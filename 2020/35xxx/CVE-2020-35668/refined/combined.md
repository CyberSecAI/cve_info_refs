=== Content from github.com_78421087_20250119_123654.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FRedisGraph%2FRedisGraph%2Fissues%2F1502)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FRedisGraph%2FRedisGraph%2Fissues%2F1502)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=RedisGraph%2FRedisGraph)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[RedisGraph](/RedisGraph)
/
**[RedisGraph](/RedisGraph/RedisGraph)**
Public

* [Notifications](/login?return_to=%2FRedisGraph%2FRedisGraph) You must be signed in to change notification settings
* [Fork
  228](/login?return_to=%2FRedisGraph%2FRedisGraph)
* [Star
   2k](/login?return_to=%2FRedisGraph%2FRedisGraph)

* [Code](/RedisGraph/RedisGraph)
* [Issues
  348](/RedisGraph/RedisGraph/issues)
* [Pull requests
  63](/RedisGraph/RedisGraph/pulls)
* [Discussions](/RedisGraph/RedisGraph/discussions)
* [Actions](/RedisGraph/RedisGraph/actions)
* [Projects
  0](/RedisGraph/RedisGraph/projects)
* [Wiki](/RedisGraph/RedisGraph/wiki)
* [Security](/RedisGraph/RedisGraph/security)
* [Insights](/RedisGraph/RedisGraph/pulse)

Additional navigation options

* [Code](/RedisGraph/RedisGraph)
* [Issues](/RedisGraph/RedisGraph/issues)
* [Pull requests](/RedisGraph/RedisGraph/pulls)
* [Discussions](/RedisGraph/RedisGraph/discussions)
* [Actions](/RedisGraph/RedisGraph/actions)
* [Projects](/RedisGraph/RedisGraph/projects)
* [Wiki](/RedisGraph/RedisGraph/wiki)
* [Security](/RedisGraph/RedisGraph/security)
* [Insights](/RedisGraph/RedisGraph/pulse)

# DoS (Denial Of Service) Bug #1502

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosed[#1503](https://github.com/RedisGraph/RedisGraph/pull/1503)Closed[DoS (Denial Of Service) Bug](#top)#1502[#1503](https://github.com/RedisGraph/RedisGraph/pull/1503)Copy linkLabels[bug](https://github.com/RedisGraph/RedisGraph/issues?q=state%3Aopen%20label%3A%22bug%22)![@cr0hn](https://avatars.githubusercontent.com/u/4076390?u=5b6602ee6066e699c6fc8297f75978de1864bf68&v=4&size=80)
## Description

![@cr0hn](https://avatars.githubusercontent.com/u/4076390?u=5b6602ee6066e699c6fc8297f75978de1864bf68&v=4&size=48)[cr0hn](https://github.com/cr0hn)opened [on Dec 21, 2020](https://github.com/RedisGraph/RedisGraph/issues/1502#issue-772219124)
## Bug impact

Redis Graph crashes and server downs

## Bug explained

It's appear that Redis Graph doesn't processes well list of unknown data types. Typing this in the CLI, server crashes:

```
> GRAPH.QUERY "myGraph" "CYPHER A=[a]"

```

It also crashes with any invalid values in `A`.

## Redis Bug report

=== REDIS BUG REPORT START: Cut & paste starting from here ===

1:M 16 Dec 2020 10:32:43.143 # Redis 6.0.5 crashed by signal: 11

1:M 16 Dec 2020 10:32:43.145 # Crashed running the instruction at: 0x7f926a6e3765

1:M 16 Dec 2020 10:32:43.145 # Accessing address: 0x10

1:M 16 Dec 2020 10:32:43.145 # Failed assertion: (:0)

------ STACK TRACE ------

EIP:

/usr/lib/redis/modules/redisgraph.so(+0x1b7765)[0x7f926a6e3765]

Backtrace:

redis-server \*:6379(logStackTrace+0x32)[0x55e762d62e02]

redis-server \*:6379(sigsegvHandler+0x9e)[0x55e762d634de]

/lib/x86\_64-linux-gnu/libpthread.so.0(+0x12730)[0x7f926b891730]

/usr/lib/redis/modules/redisgraph.so(+0x1b7765)[0x7f926a6e3765]

/usr/lib/redis/modules/redisgraph.so(AR\_EXP\_FromASTNode+0x6)[0x7f926a6e33c6]

/usr/lib/redis/modules/redisgraph.so(+0x1b7c7e)[0x7f926a6e3c7e]

/usr/lib/redis/modules/redisgraph.so(AR\_EXP\_FromASTNode+0x6)[0x7f926a6e33c6]

/usr/lib/redis/modules/redisgraph.so(+0x1b7c7e)[0x7f926a6e3c7e]

/usr/lib/redis/modules/redisgraph.so(AR\_EXP\_FromASTNode+0x6)[0x7f926a6e33c6]

/usr/lib/redis/modules/redisgraph.so(parse\_params+0x140)[0x7f926a71e0b0]

/usr/lib/redis/modules/redisgraph.so(ExecutionCtx\_FromQuery+0x1c)[0x7f926a6f080c]

/usr/lib/redis/modules/redisgraph.so(Graph\_Query+0x48)[0x7f926a6f0ab8]

/usr/lib/redis/modules/redisgraph.so(+0x1fb5ad)[0x7f926a7275ad]

/lib/x86\_64-linux-gnu/libpthread.so.0(+0x7fa3)[0x7f926b886fa3]

/lib/x86\_64-linux-gnu/libc.so.6(clone+0x3f)[0x7f926b7b54cf]

------ INFO OUTPUT ------

# Server

redis\_version:6.0.5

redis\_git\_sha1:00000000

redis\_git\_dirty:0

redis\_build\_id:a552bef8bac6cf1c

redis\_mode:standalone

os:Linux 5.4.39-linuxkit x86\_64

arch\_bits:64

multiplexing\_api:epoll

atomicvar\_api:atomic-builtin

gcc\_version:8.3.0

process\_id:1

run\_id:95e543fa2c07ff8ed405acb9a7ebe43a43377ea4

tcp\_port:6379

uptime\_in\_seconds:5

uptime\_in\_days:0

hz:10

configured\_hz:10

lru\_clock:14279243

executable:/data/redis-server

config\_file:

# Clients

connected\_clients:1

client\_recent\_max\_input\_buffer:115242

client\_recent\_max\_output\_buffer:0

blocked\_clients:1

tracking\_clients:0

clients\_in\_timeout\_table:0

# Memory

used\_memory:3399200

used\_memory\_human:3.24M

used\_memory\_rss:15708160

used\_memory\_rss\_human:14.98M

used\_memory\_peak:3399200

used\_memory\_peak\_human:3.24M

used\_memory\_peak\_perc:100.14%

used\_memory\_overhead:947558

used\_memory\_startup:839632

used\_memory\_dataset:2451642

used\_memory\_dataset\_perc:95.78%

allocator\_allocated:3980560

allocator\_active:4374528

allocator\_resident:21929984

total\_system\_memory:2084671488

total\_system\_memory\_human:1.94G

used\_memory\_lua:37888

used\_memory\_lua\_human:37.00K

used\_memory\_scripts:0

used\_memory\_scripts\_human:0B

number\_of\_cached\_scripts:0

maxmemory:0

maxmemory\_human:0B

maxmemory\_policy:noeviction

allocator\_frag\_ratio:1.10

allocator\_frag\_bytes:393968

allocator\_rss\_ratio:5.01

allocator\_rss\_bytes:17555456

rss\_overhead\_ratio:0.72

rss\_overhead\_bytes:-6221824

mem\_fragmentation\_ratio:4.63

mem\_fragmentation\_bytes:12313848

mem\_not\_counted\_for\_evict:0

mem\_replication\_backlog:0

mem\_clients\_slaves:0

mem\_clients\_normal:107854

mem\_aof\_buffer:0

mem\_allocator:jemalloc-5.1.0

active\_defrag\_running:0

lazyfree\_pending\_objects:0

# Persistence

loading:0

rdb\_changes\_since\_last\_save:1

rdb\_bgsave\_in\_progress:0

rdb\_last\_save\_time:1608114758

rdb\_last\_bgsave\_status:ok

rdb\_last\_bgsave\_time\_sec:-1

rdb\_current\_bgsave\_time\_sec:-1

rdb\_last\_cow\_size:0

aof\_enabled:0

aof\_rewrite\_in\_progress:0

aof\_rewrite\_scheduled:0

aof\_last\_rewrite\_time\_sec:-1

aof\_current\_rewrite\_time\_sec:-1

aof\_last\_bgrewrite\_status:ok

aof\_last\_write\_status:ok

aof\_last\_cow\_size:0

module\_fork\_in\_progress:0

module\_fork\_last\_cow\_size:0

# Stats

total\_connections\_received:1

total\_commands\_processed:3

instantaneous\_ops\_per\_sec:1

total\_net\_input\_bytes:206292

total\_net\_output\_bytes:261

instantaneous\_input\_kbps:125.91

instantaneous\_output\_kbps:0.16

rejected\_connections:0

sync\_full:0

sync\_partial\_ok:0

sync\_partial\_err:0

expired\_keys:0

expired\_stale\_perc:0.00

expired\_time\_cap\_reached\_count:0

expire\_cycle\_cpu\_milliseconds:0

evicted\_keys:0

keyspace\_hits:4

keyspace\_misses:1

pubsub\_channels:0

pubsub\_patterns:0

latest\_fork\_usec:0

migrate\_cached\_sockets:0

slave\_expires\_tracked\_keys:0

active\_defrag\_hits:0

active\_defrag\_misses:0

active\_defrag\_key\_hits:0

active\_defrag\_key\_misses:0

tracking\_total\_keys:0

tracking\_total\_items:0

tracking\_total\_prefixes:0

unexpected\_error\_replies:0

# Replication

role:master

connected\_slaves:0

master\_replid:6d0c230f73cf5b6fdde876088a417b5cc8b36533

master\_replid2:0000000000000000000000000000000000000000

master\_repl\_offset:0

second\_repl\_offset:-1

repl\_backlog\_active:0

repl\_backlog\_size:1048576

repl\_backlog\_first\_byte\_offset:0

repl\_backlog\_histlen:0

# CPU

used\_cpu\_sys:0.044293

used\_cpu\_user:0.224490

used\_cpu\_sys\_children:0.005976

used\_cpu\_user\_children:0.000929

# Modules

module:name=graph,ver=20208,api=1,filters=0,usedby=[],using=[],options=[]

# Commandstats

cmdstat\_graph.QUERY:calls=3,usec=4510,usec\_per\_call=1503.33

# Cluster

cluster\_enabled:0

# Keyspace

db0:keys=1,expires=0,avg\_ttl=0

------ CLIENT LIST OUTPUT ------

id=6 addr=172.17.0.1:51154 fd=8 name= age=1 idle=0 flags=b db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=90860 obl=0 oll=0 omem=0 events=r cmd=graph.QUERY user=default

------ REGISTERS ------

1:M 16 Dec 2020 10:32:43.158 #

RAX:0000000000000000 RBX:00007f926021f160

RCX:00007f926b89b360 RDX:00007f9269529ab0

RDI:00000000000000a0 RSI:0000000000000001

RBP:0000000000000050 RSP:00007f92695272f0

R8 :0000000000000008 R9 :000000000000009f

R10:0000000000000002 R11:00007f9269527f40

R12:0000000000000002 R13:00007f926b24d9f8

R14:0000000000000002 R15:0000000000000001

RIP:00007f926a6e3765 EFL:0000000000010206

CSGSFS:002b000000000033

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272ff) -> 00007f926ab5084e

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272fe) -> 00007f9269527390

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272fd) -> 00007f926a6e3c7e

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272fc) -> 00007f926021f1c0

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272fb) -> 00007f926a6e33c6

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272fa) -> 0000000000000001

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272f9) -> 0000000000000002

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272f8) -> 00007f926b24d9f8

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272f7) -> 0000000000000002

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272f6) -> 00007f926b21b690

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272f5) -> 00007f926021f1c0

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272f4) -> 00007f926adb3ba0

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272f3) -> 00007f926021f1c0

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272f2) -> 0000744e696c6f74

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272f1) -> 00007f926ab5084e

1:M 16 Dec 2020 10:32:43.158 # (00007f92695272f0) -> 00007f9269527320

------ MODULES INFO OUTPUT ------

# graph\_executing commands

------ FAST MEMORY TEST ------

1:M 16 Dec 2020 10:32:43.159 # Bio thread for job type #0 terminated

1:M 16 Dec 2020 10:32:43.159 # Bio thread for job type [#1](https://github.com/RedisGraph/RedisGraph/pull/1) terminated

1:M 16 Dec 2020 10:32:43.160 # Bio thread for job type [#2](https://github.com/RedisGraph/RedisGraph/pull/2) terminated

\*\*\* Preparing to test memory region 55e762eae000 (2277376 bytes)

\*\*\* Preparing to test memory region 55e763bf0000 (270336 bytes)

\*\*\* Preparing to test memory region 7f9260000000 (4018176 bytes)

\*\*\* Preparing to test memory region 7f9265aa5000 (19398656 bytes)

\*\*\* Preparing to test memory region 7f9266d26000 (8388608 bytes)

\*\*\* Preparing to test memory region 7f9267527000 (8388608 bytes)

\*\*\* Preparing to test memory region 7f9267d28000 (8388608 bytes)

\*\*\* Preparing to test memory region 7f9268529000 (8388608 bytes)

\*\*\* Preparing to test memory region 7f9268d2a000 (8388608 bytes)

\*\*\* Preparing to test memory region 7f926952b000 (8388608 bytes)

\*\*\* Preparing to test memory region 7f9269d2c000 (8388608 bytes)

\*\*\* Preparing to test memory region 7f926adfd000 (12288 bytes)

\*\*\* Preparing to test memory region 7f926ae00000 (8388608 bytes)

\*\*\* Preparing to test memory region 7f926b6b8000 (16384 bytes)

\*\*\* Preparing to test memory region 7f926b879000 (24576 bytes)

\*\*\* Preparing to test memory region 7f926b89c000 (16384 bytes)

\*\*\* Preparing to test memory region 7f926bb85000 (16384 bytes)

\*\*\* Preparing to test memory region 7f926bdad000 (8192 bytes)

\*\*\* Preparing to test memory region 7f926bdda000 (4096 bytes)

.O.O.O.O.O.O.O.O.%

## Metadata

### Assignees

No one assigned

### Labels

[bug](https://github.com/RedisGraph/RedisGraph/issues?q=state%3Aopen%20label%3A%22bug%22)
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_bc7dfb94_20250119_123657.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FRedisGraph%2FRedisGraph%2Fpull%2F1503)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FRedisGraph%2FRedisGraph%2Fpull%2F1503)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=RedisGraph%2FRedisGraph)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[RedisGraph](/RedisGraph)
/
**[RedisGraph](/RedisGraph/RedisGraph)**
Public

* [Notifications](/login?return_to=%2FRedisGraph%2FRedisGraph) You must be signed in to change notification settings
* [Fork
  228](/login?return_to=%2FRedisGraph%2FRedisGraph)
* [Star
   2k](/login?return_to=%2FRedisGraph%2FRedisGraph)

* [Code](/RedisGraph/RedisGraph)
* [Issues
  348](/RedisGraph/RedisGraph/issues)
* [Pull requests
  63](/RedisGraph/RedisGraph/pulls)
* [Discussions](/RedisGraph/RedisGraph/discussions)
* [Actions](/RedisGraph/RedisGraph/actions)
* [Projects
  0](/RedisGraph/RedisGraph/projects)
* [Wiki](/RedisGraph/RedisGraph/wiki)
* [Security](/RedisGraph/RedisGraph/security)
* [Insights](/RedisGraph/RedisGraph/pulse)

Additional navigation options

* [Code](/RedisGraph/RedisGraph)
* [Issues](/RedisGraph/RedisGraph/issues)
* [Pull requests](/RedisGraph/RedisGraph/pulls)
* [Discussions](/RedisGraph/RedisGraph/discussions)
* [Actions](/RedisGraph/RedisGraph/actions)
* [Projects](/RedisGraph/RedisGraph/projects)
* [Wiki](/RedisGraph/RedisGraph/wiki)
* [Security](/RedisGraph/RedisGraph/security)
* [Insights](/RedisGraph/RedisGraph/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FRedisGraph%2FRedisGraph%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FRedisGraph%2FRedisGraph%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Error on alias references in parameters #1503

 Merged

[swilly22](/swilly22)
merged 3 commits into
[master](/RedisGraph/RedisGraph/tree/master "RedisGraph/RedisGraph:master")
from
[parameter-alias-reference](/RedisGraph/RedisGraph/tree/parameter-alias-reference "RedisGraph/RedisGraph:parameter-alias-reference")

Dec 23, 2020

 Merged

# [Error on alias references in parameters](#top) #1503

[swilly22](/swilly22)
merged 3 commits into
[master](/RedisGraph/RedisGraph/tree/master "RedisGraph/RedisGraph:master")
from
[parameter-alias-reference](/RedisGraph/RedisGraph/tree/parameter-alias-reference "RedisGraph/RedisGraph:parameter-alias-reference")

Dec 23, 2020

[Conversation
2](/RedisGraph/RedisGraph/pull/1503)
[Commits
3](/RedisGraph/RedisGraph/pull/1503/commits)
[Checks
0](/RedisGraph/RedisGraph/pull/1503/checks)
[Files changed](/RedisGraph/RedisGraph/pull/1503/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=60&v=4)](/jeffreylovitz)

Copy link

Contributor

### @jeffreylovitz **[jeffreylovitz](/jeffreylovitz)** commented [Dec 21, 2020](#issue-772369421)

Causes a compile-time error to be emitted when parameters refer to AST identifier nodes (unquoted strings).

Resolves [#1502](https://github.com/RedisGraph/RedisGraph/issues/1502).

Sorry, something went wrong.

All reactions

[![@jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=40&u=236a602fab0a7ace95c758a30cf28e586794a022&v=4)](/jeffreylovitz)
[jeffreylovitz](/jeffreylovitz)
added
the
[bug](/RedisGraph/RedisGraph/labels/bug)
label
[Dec 21, 2020](#event-4137112425)

 [![@jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=40&u=236a602fab0a7ace95c758a30cf28e586794a022&v=4)](/jeffreylovitz)
[jeffreylovitz](/jeffreylovitz)
requested a review
from [swilly22](/swilly22)
[December 21, 2020 18:15](#event-4137112437)

[![@jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=40&u=236a602fab0a7ace95c758a30cf28e586794a022&v=4)](/jeffreylovitz)
[jeffreylovitz](/jeffreylovitz)
self-assigned this
[Dec 21, 2020](#event-4137112462)

[![swilly22](https://avatars.githubusercontent.com/u/2638748?s=60&v=4)](/swilly22)

**[swilly22](/swilly22)**
suggested changes
[Dec 22, 2020](#pullrequestreview-556887036)

 [View reviewed changes](/RedisGraph/RedisGraph/pull/1503/files)

Copy link

Contributor

### @swilly22 **[swilly22](/swilly22)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Looking great, just one request.

Sorry, something went wrong.

All reactions

[src/arithmetic/arithmetic\_expression\_construct.c](/RedisGraph/RedisGraph/pull/1503/files#diff-86280ea8f06117ea5820ae1d2706f6e3a77315fd90f155602bf9c396687bfba0)
Outdated

Comment on lines
120
 to
126

|  |  | if(ast == NULL) { |
| --- | --- | --- |
|  |  | // Attempted to access the AST before it has been constructed. |
|  |  | ErrorCtx\_SetError("Attempted to access variable before it has been defined"); |
|  |  | return AR\_EXP\_NewConstOperandNode(SI\_NullVal()); |
|  |  | } |

Copy link

Contributor

### @swilly22 **[swilly22](/swilly22)** [Dec 22, 2020](#discussion_r547126098)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Please extend this comment, explaining how is it possible to reach this situation,

give an example query, e.g. `CYPHER param=[a] MATCH (a) RETURN param`.

Sorry, something went wrong.

All reactions

 [jeffreylovitz](/jeffreylovitz)
added 2 commits
[December 22, 2020 11:07](#commits-pushed-5dba254)

[![@jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=40&v=4)](/jeffreylovitz)

`[Error on alias references in parameters](/RedisGraph/RedisGraph/pull/1503/commits/5dba254abe97c1bae905a99e63b21a58d3cb4b08 "Error on alias references in parameters")`

`[5dba254](/RedisGraph/RedisGraph/pull/1503/commits/5dba254abe97c1bae905a99e63b21a58d3cb4b08)`

[![@jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=40&v=4)](/jeffreylovitz)

`[Address PR comments](/RedisGraph/RedisGraph/pull/1503/commits/7810a51d45de614d665506342191943740fe1abe "Address PR comments")`

`[7810a51](/RedisGraph/RedisGraph/pull/1503/commits/7810a51d45de614d665506342191943740fe1abe)`

 [![@jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=40&u=236a602fab0a7ace95c758a30cf28e586794a022&v=4)](/jeffreylovitz)
[jeffreylovitz](/jeffreylovitz)
[force-pushed](/RedisGraph/RedisGraph/compare/c7a430cf48f98c4bcfedde30ffa248f04ee094a1..7810a51d45de614d665506342191943740fe1abe)
the
parameter-alias-reference

branch
from
[`c7a430c`](/RedisGraph/RedisGraph/commit/c7a430cf48f98c4bcfedde30ffa248f04ee094a1) to
[`7810a51`](/RedisGraph/RedisGraph/commit/7810a51d45de614d665506342191943740fe1abe)  [Compare](/RedisGraph/RedisGraph/compare/c7a430cf48f98c4bcfedde30ffa248f04ee094a1..7810a51d45de614d665506342191943740fe1abe)
[December 22, 2020 16:08](#event-4140783621)

[![@swilly22](https://avatars.githubusercontent.com/u/2638748?s=40&v=4)](/swilly22)

`[Merge branch 'master' into parameter-alias-reference](/RedisGraph/RedisGraph/pull/1503/commits/8d8018c83f4486ad6c3dc33f490ff072bbe53ce1 "Merge branch 'master' into parameter-alias-reference")`

`[8d8018c](/RedisGraph/RedisGraph/pull/1503/commits/8d8018c83f4486ad6c3dc33f490ff072bbe53ce1)`

[![swilly22](https://avatars.githubusercontent.com/u/2638748?s=60&v=4)](/swilly22)

**[swilly22](/swilly22)**
approved these changes
[Dec 23, 2020](#pullrequestreview-557686640)

 [View reviewed changes](/RedisGraph/RedisGraph/pull/1503/files/8d8018c83f4486ad6c3dc33f490ff072bbe53ce1)

[![@swilly22](https://avatars.githubusercontent.com/u/2638748?s=40&u=e59b22a070a06fd4bf325ec906147bf9126bf0e0&v=4)](/swilly22)
[swilly22](/swilly22)
merged commit [`aed3fba`](/RedisGraph/RedisGraph/commit/aed3fba39374eb11194a6a728263fbf31ffac3c9)
into
master

[Dec 23, 2020](https://github.com/RedisGraph/RedisGraph/pull/1503#event-4143067860)

 [![@swilly22](https://avatars.githubusercontent.com/u/2638748?s=40&u=e59b22a070a06fd4bf325ec906147bf9126bf0e0&v=4)](/swilly22)
[swilly22](/swilly22)
deleted the
parameter-alias-reference

branch
[December 23, 2020 07:54](#event-4143068084)

[jeffreylovitz](/jeffreylovitz)
added a commit
that referenced
this pull request
[Dec 27, 2020](#ref-commit-d902fa3)
[![@jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=40&u=236a602fab0a7ace95c758a30cf28e586794a022&v=4)](/jeffreylovitz)

`[Error on alias references in parameters (](/RedisGraph/RedisGraph/commit/d902fa3fead70654bfddf9dbaa0b9b6a05ae6b7a "Error on alias references in parameters (#1503)

* Error on alias references in parameters

* Address PR comments

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit aed3fba39374eb11194a6a728263fbf31ffac3c9)")[#1503](https://github.com/RedisGraph/RedisGraph/pull/1503)[)](/RedisGraph/RedisGraph/commit/d902fa3fead70654bfddf9dbaa0b9b6a05ae6b7a "Error on alias references in parameters (#1503)

* Error on alias references in parameters

* Address PR comments

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit aed3fba39374eb11194a6a728263fbf31ffac3c9)")`
…

`[d902fa3](/RedisGraph/RedisGraph/commit/d902fa3fead70654bfddf9dbaa0b9b6a05ae6b7a)`

```
* Error on alias references in parameters

* Address PR comments

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit [aed3fba](https://github.com/RedisGraph/RedisGraph/commit/aed3fba39374eb11194a6a728263fbf31ffac3c9))
```

[swilly22](/swilly22)
added a commit
that referenced
this pull request
[Dec 27, 2020](#ref-commit-efe17d9)
[![@jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=40&u=236a602fab0a7ace95c758a30cf28e586794a022&v=4)](/jeffreylovitz) [![@rafie](https://avatars.githubusercontent.com/u/7499323?s=40&u=e0ca59a740195becb5f5378505423a5f97634950&v=4)](/rafie)
[![@alonre24](https://avatars.githubusercontent.com/u/28729016?s=40&u=af2f61473903947a447ffa31dd4db17ad5f15059&v=4)](/alonre24) [![@swilly22](https://avatars.githubusercontent.com/u/2638748?s=40&u=e59b22a070a06fd4bf325ec906147bf9126bf0e0&v=4)](/swilly22) [![@danitseitlin](https://avatars.githubusercontent.com/u/39850374?s=40&v=4)](/danitseitlin)

`[2 2 12 upversion (](/RedisGraph/RedisGraph/commit/efe17d9902b78716cf27297dadc8b5740a56caf6 "2 2 12 upversion (#1512)

* Added QA automation support (#1483)

* Added QA automation support

* fixes 1

* fixes 2

(cherry picked from commit ebdbd6ecff7f46ef655276435059890effcbf786)

* add Graph config command to Rampfile (#1485)

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit 0ead11e8c1a4f2a37c3623f84a28ba9c5141264f)

* Refactor aggregate logic (#1468)

* Refactor logic for invoking aggregate functions

* WIP

* Fix unit tests, stDevP logic

* Fix formatting flag

* reduce and evaluate aggregation functions

* consolidation agg and none agg functions

* Additional tests, comment corrections

Co-authored-by: swilly22 <roi@redislabs.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit aa66db8a4e7103d57d4da5a127adabcedbfaa6c2)

* Replace cache per thread with global cache (#1393)

* global cache

* Replace the cache-per-thread with a global cache:
-Use rwlock to synchronize access to the cache.
-Replace the hash lookup of queries strings with rax to support safe access of multiple readers.
-When cache hit occurs, do (shallow) memcpy of the query AST along with reference count increase, and store the current execution params in the new AST copy.

* Fix memory leaks.
Bug fix: set AST in thread local storage after the shallow copy.

* Update comments in config files and number of threads in test_cache to fit the new cache design.

* Defending execution plans that are being cloned from evicted by another thread, by adding ref count.

* Change cache implementation so that cache item is copied within the cache get/set functions by using a callback. This ensures that cache item will not be freed when evicted from cache while it is cloned by another thread.

* Change cache implementation so that cache item is copied within the cache get/set functions by using a callback. This ensures that cache item will not be freed when evicted from cache while it is cloned by another thread.

* moved from ulong to long long

* refactor cache unit-test

* refactored cache

* Refactor cache_set and test_cache.

* mostly formatting

* switch to new config get

Co-authored-by: swilly22 <roi@redislabs.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit 75d0a99db1e1928e2d22c370a8eef0158beeed27)

* Add support for startNode and endNode functions (#1490)

* Add support for startNode and endNode functions

* Address PR comments

(cherry picked from commit 584f59bf6f1a28efb433165d16d824495e8bad8d)

* Disallow updating properties after deleting their entities (#1494)

* Disallow updating properties after deleting their entities

* Address PR comments

(cherry picked from commit 92125cfcf8b05ab4b18775de02992e9fbc879c92)

* Disallow assigning properties to complex types in MERGE SET (#1496)

* Disallow assigning properties to complex types in MERGE SET constructions

* Address PR comments

(cherry picked from commit 6bc3552d3b69417fe2082734ed6bc28739e0bc32)

* Consider both filters and labels in selecting a starting point (#1498)

* Consider both filters and labels in selecting a starting point

* refactored traverse order

* Address PR comments

* Update test_traversal_ordering.cpp

Co-authored-by: swilly22 <roi@redislabs.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit 818e541f88910e818ca4ba5085f27ad077a70eac)

* optimize expression before accessing it (#1499)

* optimize expression before accessing it

* algebraic expression transposed should handle directly nested transposes

(cherry picked from commit 78f531035ae6a25ac6d04f7e181be4a7b109e05f)

* Don't attempt to access non-existent properties (#1495)

* Don't attempt to access non-existent properties

* Address PR comments

* Add additional tests

* Add documentation

* Skip tests that cause memory leaks

* Address PR comments

(cherry picked from commit 50aa8681a51ed1b9816f40d39854d40c44e6a155)

* Error on alias references in parameters (#1503)

* Error on alias references in parameters

* Address PR comments

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit aed3fba39374eb11194a6a728263fbf31ffac3c9)

* Adding 'redis-modules-sdk' package to the README (#1509)

(cherry picked from commit 2b8a3c6dee5490ab5bf5549f63e1a3ff61e4dbbd)

* disable runtime config on enterprise (#1508)

(cherry picked from commit 9bcc2d22984f0248ac8301b7b56720b3c710f5fa)

* bump version to 2.2.12

Co-authored-by: Rafi Einstein <raffapen@outlook.com>
Co-authored-by: alonre24 <alonreshef24@gmail.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
Co-authored-by: Dani Tseiltin <39850374+danitseitlin@users.noreply.github.com>")[#1512](https://github.com/RedisGraph/RedisGraph/pull/1512)[)](/RedisGraph/RedisGraph/commit/efe17d9902b78716cf27297dadc8b5740a56caf6 "2 2 12 upversion (#1512)

* Added QA automation support (#1483)

* Added QA automation support

* fixes 1

* fixes 2

(cherry picked from commit ebdbd6ecff7f46ef655276435059890effcbf786)

* add Graph config command to Rampfile (#1485)

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit 0ead11e8c1a4f2a37c3623f84a28ba9c5141264f)

* Refactor aggregate logic (#1468)

* Refactor logic for invoking aggregate functions

* WIP

* Fix unit tests, stDevP logic

* Fix formatting flag

* reduce and evaluate aggregation functions

* consolidation agg and none agg functions

* Additional tests, comment corrections

Co-authored-by: swilly22 <roi@redislabs.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit aa66db8a4e7103d57d4da5a127adabcedbfaa6c2)

* Replace cache per thread with global cache (#1393)

* global cache

* Replace the cache-per-thread with a global cache:
-Use rwlock to synchronize access to the cache.
-Replace the hash lookup of queries strings with rax to support safe access of multiple readers.
-When cache hit occurs, do (shallow) memcpy of the query AST along with reference count increase, and store the current execution params in the new AST copy.

* Fix memory leaks.
Bug fix: set AST in thread local storage after the shallow copy.

* Update comments in config files and number of threads in test_cache to fit the new cache design.

* Defending execution plans that are being cloned from evicted by another thread, by adding ref count.

* Change cache implementation so that cache item is copied within the cache get/set functions by using a callback. This ensures that cache item will not be freed when evicted from cache while it is cloned by another thread.

* Change cache implementation so that cache item is copied within the cache get/set functions by using a callback. This ensures that cache item will not be freed when evicted from cache while it is cloned by another thread.

* moved from ulong to long long

* refactor cache unit-test

* refactored cache

* Refactor cache_set and test_cache.

* mostly formatting

* switch to new config get

Co-authored-by: swilly22 <roi@redislabs.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit 75d0a99db1e1928e2d22c370a8eef0158beeed27)

* Add support for startNode and endNode functions (#1490)

* Add support for startNode and endNode functions

* Address PR comments

(cherry picked from commit 584f59bf6f1a28efb433165d16d824495e8bad8d)

* Disallow updating properties after deleting their entities (#1494)

* Disallow updating properties after deleting their entities

* Address PR comments

(cherry picked from commit 92125cfcf8b05ab4b18775de02992e9fbc879c92)

* Disallow assigning properties to complex types in MERGE SET (#1496)

* Disallow assigning properties to complex types in MERGE SET constructions

* Address PR comments

(cherry picked from commit 6bc3552d3b69417fe2082734ed6bc28739e0bc32)

* Consider both filters and labels in selecting a starting point (#1498)

* Consider both filters and labels in selecting a starting point

* refactored traverse order

* Address PR comments

* Update test_traversal_ordering.cpp

Co-authored-by: swilly22 <roi@redislabs.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit 818e541f88910e818ca4ba5085f27ad077a70eac)

* optimize expression before accessing it (#1499)

* optimize expression before accessing it

* algebraic expression transposed should handle directly nested transposes

(cherry picked from commit 78f531035ae6a25ac6d04f7e181be4a7b109e05f)

* Don't attempt to access non-existent properties (#1495)

* Don't attempt to access non-existent properties

* Address PR comments

* Add additional tests

* Add documentation

* Skip tests that cause memory leaks

* Address PR comments

(cherry picked from commit 50aa8681a51ed1b9816f40d39854d40c44e6a155)

* Error on alias references in parameters (#1503)

* Error on alias references in parameters

* Address PR comments

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit aed3fba39374eb11194a6a728263fbf31ffac3c9)

* Adding 'redis-modules-sdk' package to the README (#1509)

(cherry picked from commit 2b8a3c6dee5490ab5bf5549f63e1a3ff61e4dbbd)

* disable runtime config on enterprise (#1508)

(cherry picked from commit 9bcc2d22984f0248ac8301b7b56720b3c710f5fa)

* bump version to 2.2.12

Co-authored-by: Rafi Einstein <raffapen@outlook.com>
Co-authored-by: alonre24 <alonreshef24@gmail.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
Co-authored-by: Dani Tseiltin <39850374+danitseitlin@users.noreply.github.com>")`
…

`[efe17d9](/RedisGraph/RedisGraph/commit/efe17d9902b78716cf27297dadc8b5740a56caf6)`

```
* Added QA automation support ([#1483](https://github.com/RedisGraph/RedisGraph/pull/1483))

* Added QA automation support

* fixes 1

* fixes 2

(cherry picked from commit [ebdbd6e](https://github.com/RedisGraph/RedisGraph/commit/ebdbd6ecff7f46ef655276435059890effcbf786))

* add Graph config command to Rampfile ([#1485](https://github.com/RedisGraph/RedisGraph/pull/1485))

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit [0ead11e](https://github.com/RedisGraph/RedisGraph/commit/0ead11e8c1a4f2a37c3623f84a28ba9c5141264f))

* Refactor aggregate logic ([#1468](https://github.com/RedisGraph/RedisGraph/pull/1468))

* Refactor logic for invoking aggregate functions

* WIP

* Fix unit tests, stDevP logic

* Fix formatting flag

* reduce and evaluate aggregation functions

* consolidation agg and none agg functions

* Additional tests, comment corrections

Co-authored-by: swilly22 <roi@redislabs.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit [aa66db8](https://github.com/RedisGraph/RedisGraph/commit/aa66db8a4e7103d57d4da5a127adabcedbfaa6c2))

* Replace cache per thread with global cache ([#1393](https://github.com/RedisGraph/RedisGraph/pull/1393))

* global cache

* Replace the cache-per-thread with a global cache:
-Use rwlock to synchronize access to the cache.
-Replace the hash lookup of queries strings with rax to support safe access of multiple readers.
-When cache hit occurs, do (shallow) memcpy of the query AST along with reference count increase, and store the current execution params in the new AST copy.

* Fix memory leaks.
Bug fix: set AST in thread local storage after the shallow copy.

* Update comments in config files and number of threads in test_cache to fit the new cache design.

* Defending execution plans that are being cloned from evicted by another thread, by adding ref count.

* Change cache implementation so that cache item is copied within the cache get/set functions by using a callback. This ensures that cache item will not be freed when evicted from cache while it is cloned by another thread.

* Change cache implementation so that cache item is copied within the cache get/set functions by using a callback. This ensures that cache item will not be freed when evicted from cache while it is cloned by another thread.

* moved from ulong to long long

* refactor cache unit-test

* refactored cache

* Refactor cache_set and test_cache.

* mostly formatting

* switch to new config get

Co-authored-by: swilly22 <roi@redislabs.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit [75d0a99](https://github.com/RedisGraph/RedisGraph/commit/75d0a99db1e1928e2d22c370a8eef0158beeed27))

* Add support for startNode and endNode functions ([#1490](https://github.com/RedisGraph/RedisGraph/pull/1490))

* Add support for startNode and endNode functions

* Address PR comments

(cherry picked from commit [584f59b](https://github.com/RedisGraph/RedisGraph/commit/584f59bf6f1a28efb433165d16d824495e8bad8d))

* Disallow updating properties after deleting their entities ([#1494](https://github.com/RedisGraph/RedisGraph/pull/1494))

* Disallow updating properties after deleting their entities

* Address PR comments

(cherry picked from commit [92125cf](https://github.com/RedisGraph/RedisGraph/commit/92125cfcf8b05ab4b18775de02992e9fbc879c92))

* Disallow assigning properties to complex types in MERGE SET ([#1496](https://github.com/RedisGraph/RedisGraph/pull/1496))

* Disallow assigning properties to complex types in MERGE SET constructions

* Address PR comments

(cherry picked from commit [6bc3552](https://github.com/RedisGraph/RedisGraph/commit/6bc3552d3b69417fe2082734ed6bc28739e0bc32))

* Consider both filters and labels in selecting a starting point ([#1498](https://github.com/RedisGraph/RedisGraph/pull/1498))

* Consider both filters and labels in selecting a starting point

* refactored traverse order

* Address PR comments

* Update test_traversal_ordering.cpp

Co-authored-by: swilly22 <roi@redislabs.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit [818e541](https://github.com/RedisGraph/RedisGraph/commit/818e541f88910e818ca4ba5085f27ad077a70eac))

* optimize expression before accessing it ([#1499](https://github.com/RedisGraph/RedisGraph/pull/1499))

* optimize expression before accessing it

* algebraic expression transposed should handle directly nested transposes

(cherry picked from commit [78f5310](https://github.com/RedisGraph/RedisGraph/commit/78f531035ae6a25ac6d04f7e181be4a7b109e05f))

* Don't attempt to access non-existent properties ([#1495](https://github.com/RedisGraph/RedisGraph/pull/1495))

* Don't attempt to access non-existent properties

* Address PR comments

* Add additional tests

* Add documentation

* Skip tests that cause memory leaks

* Address PR comments

(cherry picked from commit [50aa868](https://github.com/RedisGraph/RedisGraph/commit/50aa8681a51ed1b9816f40d39854d40c44e6a155))

* Error on alias references in parameters ([#1503](https://github.com/RedisGraph/RedisGraph/pull/1503))

* Error on alias references in parameters

* Address PR comments

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
(cherry picked from commit [aed3fba](https://github.com/RedisGraph/RedisGraph/commit/aed3fba39374eb11194a6a728263fbf31ffac3c9))

* Adding 'redis-modules-sdk' package to the README ([#1509](https://github.com/RedisGraph/RedisGraph/pull/1509))

(cherry picked from commit [2b8a3c6](https://github.com/RedisGraph/RedisGraph/commit/2b8a3c6dee5490ab5bf5549f63e1a3ff61e4dbbd))

* disable runtime config on enterprise ([#1508](https://github.com/RedisGraph/RedisGraph/pull/1508))

(cherry picked from commit [9bcc2d2](https://github.com/RedisGraph/RedisGraph/commit/9bcc2d22984f0248ac8301b7b56720b3c710f5fa))

* bump version to 2.2.12

Co-authored-by: Rafi Einstein <raffapen@outlook.com>
Co-authored-by: alonre24 <alonreshef24@gmail.com>
Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
Co-authored-by: Dani Tseiltin <39850374+danitseitlin@users.noreply.github.com>
```

[pnxguide](/pnxguide)
pushed a commit
to CMU-SPEED/RedisGraph
that referenced
this pull request
[Mar 22, 2023](#ref-commit-3a71fa8)
[![@jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=40&u=236a602fab0a7ace95c758a30cf28e586794a022&v=4)](/jeffreylovitz) [![@swilly22](https://avatars.githubusercontent.com/u/2638748?s=40&u=e59b22a070a06fd4bf325ec906147bf9126bf0e0&v=4)](/swilly22)

`[Error on alias references in parameters (](/CMU-SPEED/RedisGraph/commit/3a71fa8f6554a1ffd7e47a905c61938ae3790155 "Error on alias references in parameters (#1503)

* Error on alias references in parameters

* Address PR comments

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>")[RedisGraph#1503](https://github.com/RedisGraph/RedisGraph/pull/1503)[)](/CMU-SPEED/RedisGraph/commit/3a71fa8f6554a1ffd7e47a905c61938ae3790155 "Error on alias references in parameters (#1503)

* Error on alias references in parameters

* Address PR comments

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>")`
…

`[3a71fa8](/CMU-SPEED/RedisGraph/commit/3a71fa8f6554a1ffd7e47a905c61938ae3790155)`

```
* Error on alias references in parameters

* Address PR comments

Co-authored-by: Roi Lipman <swilly22@users.noreply.github.com>
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FRedisGraph%2FRedisGraph%2Fpull%2F1503)

Reviewers

[![@swilly22](https://avatars.githubusercontent.com/u/2638748?s=40&v=4)](/swilly22) [swilly22](/swilly22)

swilly22 approved these changes

Assignees

[![@jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=40&v=4)](/jeffreylovitz) [jeffreylovitz](/jeffreylovitz)

Labels

[bug](/RedisGraph/RedisGraph/labels/bug)

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

 [DoS (Denial Of Service) Bug](https://github.com/RedisGraph/RedisGraph/issues/1502)

2 participants

[![@jeffreylovitz](https://avatars.githubusercontent.com/u/6090852?s=52&v=4)](/jeffreylovitz) [![@swilly22](https://avatars.githubusercontent.com/u/2638748?s=52&v=4)](/swilly22)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


