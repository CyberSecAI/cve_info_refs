=== Content from rustsec.org_f092ebb8_20250119_122046.html ===


RUSTSEC-2020-0070: lock\_api: Some lock\_api lock guard objects can cause data races › RustSec Advisory Database

#

[About](/)
[Advisories](/advisories/)
[Report Vulnerabilities](/contributing.html)

[History](https://github.com/RustSec/advisory-db/commits/main/crates/lock_api/RUSTSEC-2020-0070.md) ⋅
[Edit](https://github.com/RustSec/advisory-db/edit/main/crates/lock_api/RUSTSEC-2020-0070.md) ⋅
[JSON (OSV)](https://api.osv.dev/v1/vulns/RUSTSEC-2020-0070)

# RUSTSEC-2020-0070

Some lock\_api lock guard objects can cause data races

Reported
November 8, 2020

Issued
November 18, 2020

(last modified: June 13, 2023)

Package
[lock\_api](/packages/lock_api.html)
([crates.io](https://crates.io/crates/lock_api))

Type
INFO
Unsound

Categories

* [memory-corruption](/categories/memory-corruption.html)
* [thread-safety](/categories/thread-safety.html)

Keywords
[#concurrency](/keywords/concurrency.html)

Aliases

* [CVE-2020-35910](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-35910)
* [CVE-2020-35911](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-35911)
* [CVE-2020-35912](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-35912)
* [CVE-2020-35913](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-35913)
* [CVE-2020-35914](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-35914)
* [GHSA-5wg8-7c9q-794v](https://github.com/advisories/GHSA-5wg8-7c9q-794v)
* [GHSA-gmv4-vmx3-x9f3](https://github.com/advisories/GHSA-gmv4-vmx3-x9f3)
* [GHSA-hj9h-wrgg-hgmx](https://github.com/advisories/GHSA-hj9h-wrgg-hgmx)
* [GHSA-ppj3-7jw3-8vc4](https://github.com/advisories/GHSA-ppj3-7jw3-8vc4)
* [GHSA-vh4p-6j7g-f4j9](https://github.com/advisories/GHSA-vh4p-6j7g-f4j9)

References

* <https://github.com/Amanieu/parking_lot/pull/262>

Patched

* `>=0.4.2`

Affected Functions
Version
`lock_api::MappedMutexGuard`

* `>=0.1.0`

`lock_api::MappedRwLockReadGuard`

* `>=0.1.0`

`lock_api::MappedRwLockWriteGuard`

* `>=0.1.0`

`lock_api::RwLockReadGuard`

* `>=0.1.0`

`lock_api::RwLockWriteGuard`

* `>=0.1.0`

### Description

Affected versions of lock\_api had unsound implementations of the `Send` or
`Sync` traits for some guard objects, namely:

* MappedMutexGuard
* MappedRwLockReadGuard
* MappedRwLockWriteGuard
* RwLockReadGuard
* RwLockWriteGuard

These guards could allow data races through types that are not safe to `Send`
across thread boundaries in safe Rust code.

This issue was fixed by changing the trait bounds on the `Mapped` guard types
and removing the `Sync` trait for the `RwLock` guards.

Advisory available under [CC0-1.0](https://spdx.org/licenses/CC0-1.0.html)
license.


