=== Content from packetstormsecurity.com_10b3098c_20250119_114619.html ===

[![](/logos/smalllogobeta.png)](/)

* files
* news
* users
* cve

[![](/logos/smalllogobeta.png)](/)

* files
* news
* users
* cve

![](/logos/linegray.png)

 [About](/help/view/4) |
[Terms](/tos/) |
[Copyright](/help/view/7) |
[Privacy](/help/view/6) |
[BlueSky](https://bsky.app/profile/packetstorm.bsky.social) |
[X](https://x.com/packet_storm) |
[Mastodon](https://infosec.exchange/%40packet_storm/)



=== Content from rdstation-static.s3.amazonaws.com_d562c384_20250119_114645.html ===
O que há
de novo no
CITSmart 9.0?

Acelere a
Transformação
Digital
na sua
organização

Índice

O que é CITSmart?

Quais as possibilidades de uso?

História do CITSmart

Evolução

Anuva

Neuro

Esteja preparado para a mudança

Serviços… Entregando Valor

Um conceito de serviços:

Serviços Excelência

O que há de novo no CITSmart 9.0?

Processo de Gerenciamento de Capacidade e ITAM

Processo Financeiro

Melhorias

Comparativo de versões

Notas de Release

Política de Liberação e Atualização
dos Produtos CITSmart

Visão Geral

Versões Suportadas

Informações Adicionais Sobre Atualização

4

4

6

6

7

7

7

8

8

9

10

11

15

20

21

24

24

24

27

27

4

O que é
CITSmart?

O CITSmart é uma plataforma criada pela Central IT. A sua principal função é
conectar pessoas e recursos digitais, para otimizar o trabalho e amplificar os
resultados do negócio.

Em seu desenvolvimento, foram priorizadas as funcionalidades que dessem
maior protagonismo aos usuários. Assim, através dos portais de relaciona-
mento,  otimizamos  a  experiência  de  clientes  e  colaboradores  e,  por  meio
do Workflow Digital Inteligente e da gestão ágil, com uso de Kanbans, co-
nectamos times para uma maior colaboração centrada no cliente, gerando
melhoria progressiva e interativa, simplicidade na execução, praticidade, ali-
nhamento e agilidade.

Quais as possibilidades de uso?

Há cases de gestão de serviços com processos automatizados em diversas
áreas como:

Educação

Compras

Recursos humanos como a solicitação
de pessoal, treinamento, etc.

Departamento pessoal como a solicitação
de benefícios, férias, folha de pagamento,
esclarecimentos, etc.

Viagem

Jurídico como elaboração e análise
de contratos, apoio, etc.

Comunicação, Marketing
entre outros.

Atendimento em campo como a troca de equipamentos, execução
de reparos e manutenção etc.

Além  desses,  seguindo  as  melhores  práticas  de  gestão  de  serviços,  com
base na biblioteca de melhores práticas da ITIL, o CITSmart possui nativa-
mente 16 processos automatizados, sendo eles:

5

AM  =  Gerenciamento de Ativos

AVM   =  Gerenciamento de Disponibilidade

CAP   =  Gerenciamento de Capacidade

  CHG   =  Gerenciamento de Mudança

EV   =  Gerenciamento de Eventos

FM   =  Gerenciamento Financeiro

IM   =  Gerenciamento de Incidentes

  ITSCM  =  Gerenciamento de Continuidade de

    Serviços de TI

KM   =  Gerenciamento do Conhecimento

PM   =  Gerenciamento de Problema

REL   =  Gerenciamento de Liberação e Implantação

RF   =  Cumprimento de Requisição

  SACM   =  Gerenciamento de Ativos de Serviço &

	 	 Gerenciamento	de	Configuração

SCM   =  Gerenciamento	do	Catálogo	de	Serviço

SLM   =  Gerenciamento de Nível de Serviço

SPM   =  Gerenciamento de Portifólio

História do CITSmart

O CITSmart foi criado pela Central IT, para ser um produto único, totalmente
direcionado para atender às necessidades do ITSM (Gerenciamento de Ser-
viços de TI), principalmente, para o cumprimento dos requisitos do ITIL, pre-
gado pela instituição Pink Elephant, através da certificação PinkVerify. Após
anos de trabalho voltado para a evolução da ferramenta, atualmente o CIT-
Smart atende aos 16 processos. As principais funcionalidades são Gestão de
Tickets (incidentes e requisições), Portfólio de Catálogo e Serviços, Base de
Conhecimento, Mudança e CMDB. O público atual do CITSmart são as em-
presas com departamentos de TI, bem como as necessidades da solução
ITSM para administar suas TIs.

Toda a sustentação da plataforma, assim como a expertise para instalação,
suporte e melhorias é realizada exclusivamente pela Central IT, através de
equipes  especializadas  nas  tecnologias  que  a  compõem.  Os  times  estão
sempre prontos para realizar diagnósticos completos de qualquer ambien-
te, criando um plano personalizado e eficaz de implantação e evolução do
CITSmart, para a maior valorização dos negócios.

Evolução

A principal mudança introduzida no ano passado foi o foco nos processos
de negócios para além da TI, ou seja, Corporate Service Management, prova
disso é a adaptação da declaração de serviço que se tornou Conexão de
processos, entregando experiências.

7

Esta decisão foi baseada na capacidade do nosso Workflow de se adaptar
às várias necessidades do negócio, e no Neuro, permitindo a construção de
novas entradas de dados e possibilidades de integração. Também criamos
no ano de 2018 os produtos CE - Centro de Experiências. Este produto é vol-
tado a criar um construtor de espaço de trabalho digital.

Anuva

A ANUVA também foi iniciada e representa a Inteligência Artificial do CITSmart,
onde promove integração e aprendizado de máquina com conhecimento.

Neuro

O NEURO é um produto 100% pronto e adequado no CITSmart, este produto
é muito poderoso e permite construir novas funcionalidades, aplicações e
integrações. É muito próximo dos produtos RPA (automação de processos
de robótica), mas traz diferentes possibilidades, como a integração natural
com a estrutura de Service Management (SLAs, conhecimento, portfólio, ti-
ckets, portal de serviços, entre outros). Além disso, entendemos que os con-
ceitos de Service Management são muito poderosos e podem ir além da TI,
permitindo ganhos interessantes para as unidades de negócio.

Esteja preparado para a mudança

Flexibilidade, adaptabilidade e preparação para a mudança é o que definirá
as empresas que sobreviverão e as que não existirão mais. Portanto, quem
quer que vá em frente não é aquele que prevê o futuro, mas quem o segue.

Algumas empresas têm dificuldade em se mover rapidamente, não só pelo
número  de  pessoas  ou  processos,  mas  também  principalmente  pela  sua
motivação, a velocidade de lançamento de novos produtos e ideias é muito
rápida, porque todos estão envolvidos principalmente no resultado.

Estar preparado para o futuro está sendo preparado para mudanças.

A mudança rápida está ajudando as pessoas a mudar.

Apoiar a mudança nas pessoas está mudando
rapidamente os processos.

8

Se este é o trinômio para Mudança rápida e sem dor, qual é a razão para tal
dificuldade? A principal razão é que não faz sentido pensar em processos se
esses processos não levarem a resultados e objetivos. Talvez os processos
sejam os meios, não o fim. O final é sempre os novos resultados. Gestão por
processos não é suficiente para isso.

Serviços…	Entregando	Valor

Qual conceito seria mais apropriado para agregar valor? Já pensou sobre o
conceito de serviços? Você deve estar pensando:

O que você quer dizer?

Quais serviços tem a ver comigo?

Não importa qual seja o campo de ação; é preciso entregar valor para al-
guém.  Nesta  nova  economia,  muitas  pessoas  entendem  esse valor  como
experiência e esse conceito é a nova maneira de se conectar com a nova
geração de clientes.

Um conceito de serviços:

“É um produto da atividade humana que satisfaz uma necessidade.
Representa valor para alguém.”

Serviços definem metas. Representa em sua essência “resultados” e “reali-
zação de objetivos”. É o que todo mundo está procurando.

É fácil pensar em serviços para clientes finais, toda a experiência dos clientes
é composta deles; no entanto, já ouviu falar de serviços corporativos? Talvez
o termo seja novo, mas é simples, é colocar áreas internas ou departamen-
tos para fornecer resultados para o outro. Isso muda tudo.

Com esse conceito de “serviços corporativos”, uma administração ou orga-
nização maior pode se adaptar facilmente. Pensar e adaptar-se aos novos
resultados que terão de ser fornecidos por cada departamento (e geral) e,
em  seguida,  cada  departamento  se  adaptar  internamente  em  termos  de
processos. O foco foi totalmente adaptado, bem como a capacidade de res-
posta e motivação.

9

Serviços Excelência

O gerenciamento de serviços não é mais apenas para a TI. A medida que
a digitalização se espalha pelas empresas, ela atende às necessidades de
todos  os  departamentos.  O  gerenciamento  de  serviços  expandiu-se  para
representar novas maneiras de dar suporte aos negócios, alinhando depar-
tamentos,  eliminando  silos,  melhorando  a  utilização  de  recursos,  automa-
tizando processos e fornecendo melhor gerenciamento a toda a empresa,
reduzindo assim os custos.

O  que  preocupa  a  maioria  das  empresas  é  definir  o  que  separa  uma  boa
experiência de cliente de uma ruim. Hoje, no mundo dos negócios, muitas
das necessidades da própria empresa tendem a ofuscar as necessidades
dos clientes.

O CITSmart acredita que o foco do negócio deve estar na boa experiência
do cliente e estar um passo a frente, dependendo de como se conecta ser-
viços e processos.

Essa é a nova mentalidade para as novas empresas e o CITSmart Platform
ajudará nas mudanças da perspectiva dessas corporações.

O que há
de novo no
CITSmart 9.0?

11

Processo de Gerenciamento de
Capacidade e ITAM

Agora no Citsmart V9 você pode controlar todos os itens de Capacidade dos
seus ativos de TI. Controle o investimento em capacidade seja justificado e
planejado ao longo do tempo, para que sempre haja capacidade suficiente e
sem desperdício, junto com ITAM Expanda o escopo de controle do geren-
ciamento de configuração, dos itens de configuração para todos os ativos.

Crie os indicadores de Capacidade conforme necessidade de seu ambiente
e processo.

Associe aos atributos de seus Ativos e Itens de Configuração, escolha quais
itens deseja controlar a capacidade.

12

Controle a capacidade dos seus ativos em um único processo. O CMDB se
tornou mais poderoso do que nunca!

13

Faça planejamentos e previsões da capacidade dos seus ativos

Crie relacionamentos, associe seus ativos aos seus serviços e entre eles e
controle

14

Visualize e faça previsões completas da capacidade total do seus ativos e
serviços diretamente pelo Mapa de Serviços

15

Processo Financeiro

Gerencie e controle todos os custos e preços da sua TI de forma simples
e integrada

Crie  categorias  financeiras  que  serão  utilizadas  para  identificação  de
lançamentos de dados financeiros (Venda, Compra, Orçamento).

Gerencie o ciclos e subciclos financeiros conforme sua necessidade!

Ciclo: Anual Subciclo: (Mensal, ou seja, teremos 12 meses) (Quarter, ou seja,
4 períodos de 3 meses) Jan – Mar | Abr – Jun | Jul – Set | Out – Dez)

Ciclo: Mensal Subciclo: (Semanal, ou seja, teremos 4 ou 5 semanas) (Quinze-
nal, ou seja, teremos 2 periodos de 15 dias (1 a 15 e 16 a 30 ou 31)

16

Tenha controle de todos os lançamentos financeiros e garanta aprova-
ção de cada um deles!

Promova o rateio de seus custos e receitas com seus centros de resulta-
dos, contratos, ativos, contas contábeis e muito mais!

17

Gerando valor de venda e saiba qual a sua margem de lucro! Selecione o
período, serviço e qual a taxa mínima de retorno (lucratividade que espero):

18

Depois disso basta clicar em “gerar” que será apresentado os valores mês a
mês conforme os lançamentos. É contabilizado no mês, todas as despesas
e todas as receitas associadas ao serviço.

Tenha a mão seus Custos por Categoria

Atribua seu Preço de Venda

Você poderá aferir o preço de forma fixa, ou

19

De maneira variável através da integração com o neuro! Suas receitas varia-
das serão contabilizadas automaticamente!

20

Melhorias

Processo

Melhoria

Gerenciamento de Portfólio

Gerenciamento de Nível de Serviço

Gerenciamento de Mudança

Gerenciamento de Conhecimento

Houve uma melhora na forma de visualização e uti-
lização do mapa de serviços.

Agora é possível inserir preços dos serviços a tem-
po da atribuição do Nível de serviço para as ativida-
des do Portifólio.

Criada  a  visualização  de  possíveis  conflitos  entre
jornadas  quando  está  sendo  feito  o  planejamento
de uma mudança.

Houveram  melhorias  nos  permissionamentos  de
conhecimento para visualização e fluxo de aprova-
ção..

Gerenciamento  de  Configuração  e
Ativos de Serviço

Novo Processo certificado pela Pink Verify

Gerenciamento de Eventos

Gerenciamento de Disponibilidade

Foram alteradas algumas nomenclaturas dos status
dos  eventos  para  melhor  utilização,  entendimento
e aplicação da Gerencia de Eventos no controle de
incidentes.

Foi implantado um relacionamento Com a Gerência
de Conhecimentos, agora é feita uma apresentação
de artigo de conhecimento dos IC´s relacionados.

Gerenciamento de Capacidade

Novo Processo certificado pela Pink Verify

Simple - Agile Project Management

Centro de Experiência

Alertas/Escalonamento

Chat

Dashboards  e  Relatórios  Personali-
zados

Gestão de Fluxo de trabalho

Anuva

Smart Analytics

Inclusão de um histórico para melhor acompanha-
mento dos tralalhos/tarefas.

Adicionados  novos widgets  e  novos  componentes
melhorando  ainda  mais  a  UX  e  UI  dos  centros  de
experiência.

Incluídos  os vínculos  com  os  novos  processos  (Fi-
nanceiro, Capacidade e ITAM).

A interface foi melhorada para otimização de inte-
ração com IA.

Adicionados  novos  widgets  e  novos  componen-
tes  tornando  os  Dashboards  e  Smart  Reports  ain-
da  mais  poderosos  e  com  maior  aplicabilidade  e
abrangência de uso..

Adicionado  o  fluxo  de  aprovação  financeiro  e  de
componentes de utilização do ESI.

Feita ampliação dos fluxos de trabalho e dos web-
services.

Liberação  da view  dos  16  processos  presentes  na
plataforma,  integração  com  Data  Studio,  Power  BI
e Metabase.

Comparativo de versões

Suporte,  Gestão  de  Processos,  Recursos,  Integrações  e
Segurança

CITSmart 8

CITSmart 9

21

Aplicação Web

iPhone app

Android app

Suporte

Telefone

Suporte online

Documentação

Tutoriais em vídeo

CITSmart 8

CITSmart 9

Gerenciamento de Processos

CITSmart 8

CITSmart 9

Gerenciamento de Portfólio

Gerenciamento de Catálogo de Serviço

Gerenciamento de Nível de Serviço

Gerenciamento de Mudança

Gerenciamento de Liberação

Gerenciamento de Conhecimento

Gerenciamento de Configuração e Ativos de Serviço

Gerenciamento de Ativos

Gerenciamento de Eventos

☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
22

Gerenciamento de Ticket - Incidente e Requisição

Gerenciamento de Problema

Gerenciamento de Continuidade

Gerenciamento de Disponibilidade

Gerenciamento de Capacidade

Gerenciamento Financeiro

Gerenciamento de Demanda

Recursos

CITSmart 8

CITSmart 9

Simple - Agile Project Management

Gerenciamento de Tarefas com Kanban

Centro de Experiência

Alertas/Escalonamento

Chat

Portal do Conhecimento

Dashboards e Relatórios Personalizados

Aplicação CITSmart

Mobile e CITSmart GO

Gerenciamento de Contrato

Gerenciamento de Projeto

Gestão de Fluxo de trabalho

☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
Construção de Relatórios Dinâmicos

Surveys e Feedback

Dashboards

Portal de Serviços

API

Formulários Customizados

Widgets

Anuva

Smart Analytics

Integrações

Nágios

Zabbix

IBM Watson

Asterisk

LDAP/AD

Saiku

E-mail

Segurança

HTTPS

23

CITSmart 8

CITSmart 9

CITSmart 8

CITSmart 9

Legenda

Possui

Melhoria

Não possui

Não possui

☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
☑️
24

Notas de Release

Versão 9.0 (2020/07/10)

Bem-vindos ao Citsmart Versão 9.0 Esta versão apresenta os seguintes itens:

Número

Tipo

Funcionalidade

Descrição

8968

Corretiva

Centro de Expe-
riência

Correção no retorno da lista de Por-
tfólios quando o parâmetro 293 que
filtra o portfólio por grupos de acesso
está habilitado

4818

Corretiva

Tempo de
Atendimento

Correção na marcação de uma ativi-
dade para vincular ao SLA cadastrado

Política de Liberação e Atualização
dos Produtos CITSmart

Visão Geral

O objetivo desta política é descrever os ciclos de liberação e atualização dos
Produtos CITSmart, notificações ao cliente e outras informações relevantes.

As diretrizes da política são aplicáveis a todos os nossos produtos, estejam
eles usando o modelo SaaS ou On-Premise.

Ciclos de Liberação e Atualização

Nossa proposta de liberação e atualização de produtos foi definida para for-
necer estabilidade, resposta rápida a problemas, além de fornecimento con-
tínuo de novos recursos e experiências.

Os produtos CITSmart, geralmente, seguem 3 tipos de liberação, conforme
listado na tabela a seguir:

25

Tipo Li-
beração

Escopo

Frequência

Notificação

Major
Release

Novas funcionalidades
e killer features para o
produto.

Tipicamente, duas
vezes por ano

Tipicamente, um mês
antes do lançamento,
com uma segunda no-
tificação 20 dias após
o envio da 1ª.

Minor
Release

Inclui, mas não se limita
a pequenas melhorias,
atualizações de segu-
rança e geralmente
não envolve mudanças
arquiteturais.

Tipicamente,
uma vez a cada 2
meses

Hotfix
Planeja-
da

Atualizações incluin-
do correção de erros
e aplicações e ajustes
pontuais.

Tipicamente, uma
vez por mês

Hotfix
Crítica

Correções emergen-
ciais para garantir a es-
tabilidade e segurança
do Sistema

Sempre que ne-
cessário

Poucas horas antes,
preferencialmente 48h
antes

A CITSmart refere-se a cada Feature Release, e seus Hotfixes associados,
como uma “Série”. Por exemplo, a Versão 7.6.5.4 faz parte da Série 7. As sé-
ries são atualizações de versão, na maioria das vezes, com mudanças signi-
ficativas na aplicação ou na arquitetura.

Por conta disso, os produtos CITSmart utilizam o seguinte padrão de versão:

Series > Major Release > Minor Release > Hotfix

Por exemplo: Na versão 7.6.5.4, 7 é a Série, 6 é a Major Release, 5 é a Minor

Release e 4 é o HotFix associado.

26

Cronograma de Lançamento do CITSmart:

Mês de Lança-
mento

Tipo de Lançamento

Número da Versão

Janeiro

Hot-fix Planejada

<series>.x.1.1

Fevereiro

Minor Release

<series>.x.2.0

Março

Hot-fix Planejada

<series>.x.2.1

Abril

Maio

Junho

Julho

New Series ou Major Release

SERIE.0.0.0/ <series>.X.0.0

Hot-fix Planejada

<series>.x.0.Y

Minor Release

<series>.x.1.0

Hot-fix Planejada

<series>.x.1.Y

Agosto

Minor Release

<series>.x.2.0

Setembro

Hot-fix Planejada

<series>.x.2.Y

Outubro

New Series ou Major Release

SERIE.0.0.0/ <series>.X.0.0

Novembro

Hot-fix Planejada

<series>.x.0.Y

Dezembro

Minor Release

<series>.x.1.0

(*) O tempo e a frequência dos lançamentos estão sujeitos a alterações, a
critério exclusivo do CITSmart. No caso de alterações deste cronograma, os
clientes deverão ser previamente notificados.

27

Versões Suportadas

Nossa política atual é oferecer suporte a Série mais recente. A série anterior
será suportada até 6 meses após o lançamento da nova série.

A  CITSmart  geralmente  realiza  dois  grandes  lançamentos  por  ano,  sendo
assim, o cliente precisará atualizar, aproximadamente, uma vez por ano para
se permanecer em uma versão suportada. A CITSmart fornece atualizações
(por exemplo: correções e hotfixes) somente para a versão suportada.

Informações Adicionais Sobre
Atualização

Os Procedimentos de Atualização dependem do modelo da solução adqui-
rida  (SaaS  ou  On-Premise),  para  cada  uma  delas,  siga  as  recomendações
abaixo

Clientes SaaS

Os  clientes  podem  agendar  atualizações  de  software  quando  necessá-
rio, enviando uma nova solicitação de serviço por meio de nosso site de
suporte. Nessa solicitação, o cliente informa a data desejada para atuali-
zação, versão  desejada  e  tipo  de  ambiente  não  produção  ou  produção).
Os tempos de interrupção são definidos para minimizar a interrupção dos
negócios do cliente. Todo o processo de atualização é feito pelo time de
suporte da CITSmart

Clientes On-Premise

Nesse caso, os clientes são responsáveis pela atualização de software. Re-
comendamos que os clientes testem funcionalidades e customizações no
ambiente de não produção antes de realizar a atualização no ambiente de
produção. Orientações sobre como atualizar ou usar novos recursos estarão
disponíveis nas Notas da Versão.

Se você tiver alguma dúvida sobre os procedimentos de atualização, envie-
-nos uma solicitação de serviço, por meio do nosso site de suporte.

Inicie agora a
Transformação Digital
da sua organização

+55 61 3030-4011
0800 644 4433

Acesse o novo site
www.citsmart.com.br



=== Content from citsmart.com.br_ca94acf2_20250119_114621.html ===


### [CITSmartCITSmart](https://citsmart.com.br/)

* Soluções

  ## As nossas soluções são o caminho certo para os seus negócios

  + [ITSM](#tabs_v2-paneeluid9dbf628b_1_0)
  + [FACILITIES](#tabs_v2-paneeluid9dbf628b_1_1)
  + [GRP](#tabs_v2-paneeluid9dbf628b_1_2)
  + [OUVIDORIA](#tabs_v2-paneeluid9dbf628b_1_3)
  + [AIOps](#tabs_v2-paneeluid9dbf628b_1_4)
  + [CRM](#tabs_v2-paneeluid9dbf628b_1_5)
  + [VIAGENS](#tabs_v2-paneeluid9dbf628b_1_6)
  + [RH](#tabs_v2-paneeluid9dbf628b_1_7)
  + [DOCUMENTAÇÃO](#tabs_v2-paneeluid9dbf628b_1_8)

  ## Gestão além da TI

  Com a solução de ITSM do CITSmart a transformação digital se torna realidade. Baseamos nossos trabalhos em frameworks e metodologias que irão te auxiliar em todas as atividades relacionadas ao ambiente tecnológico.

  [Saiba mais](https://citsmart.com.br/citsmart-x/ "Saiba mais")

  O CITSmart possui **21** Processos ITIL certificados pela PINK VERIFY.![](http://citsmart.com.br/wp-content/uploads/2024/08/PinkVERIFY-Certified-21-Processes-300x111.jpg)

  ## Facilite a comunicação com o seu cliente

  Com o CITSmart Facilities é possível dispobibilizar para o cliente um portal único com todos os serviços disponíveis da sua organização.

  De forma transparente e automatizada o seu cliente e você terão a rastreabilidade de todos os tickets abertos para a sua organização.

  [Saiba mais](https://citsmart.com.br/facilities "Saiba mais")

  ## Planejamento de Recursos Governamentais

  Com o CITSmart GRP é possível gerenciar bens e serviços de forma simplificada em uma plataforma única aderente as legislações que regem a Administração Pública, referente a gestão de almoxarifado, de patrimônio (mobiliário e imobiliário) e contratos.

  [Saiba mais](https://citsmart.com.br/grp "Saiba mais")
  + [Almoxarifado](#eluid9a9c67e9_1_0)
  + [Patrimônio](#eluid9a9c67e9_1_1)
  + [Inventário](#eluid9a9c67e9_1_2)
  + [Imóveis](#eluid9a9c67e9_1_3)
  + [Contratos](#eluid9a9c67e9_1_4)

  Controle de entrada, saída e vida útil de bens.

  Gerenciamento de bens, em geral.

  Instrumento de controle que permite o ajuste dos dados escriturais com o saldo físico.

  Gerenciamento de bens, seu estado e consulta à legislação.

  Gestão de documentação e relacionamento com fornecedores e clientes.

  ## Qualidade no atendimento ao cliente

  Com a solução de Ouvidoria do CITSmart é possível customizar todos os processos internos de atendimento e tratamento das manifestações abertas para a sua organização.

  [Saiba mais](https://citsmart.com.br/ouvidoria "Saiba mais")

  ## Aplique todos os recursos da IA ao seu negócio

  Com a utilização da Inteligência Artificial para as operações de TI tenha a análise totalmente preditiva e automatizada do ambiente tecnológico.

  [Saiba mais](https://citsmart.com.br/aiops "Saiba mais")

  ## Acompanhamento do dia a dia

  O CITSmart CRM vai além da solução para registro de leads. O que torna o processo de consolidação de negócios muito mais transparente e ágil.

  [Saiba mais](https://citsmart.com.br/crm "Saiba mais")

  ## Gestão de viagens corporativas

  O CITSmart torna todo o processo de viagens mais inteligente.

  [Saiba mais](https://citsmart.com.br/viagens "Saiba mais")

  ## Automatize o seu RH e torne tudo mais prático

  Use as informações que o CITSmart te fornece, em tempo real, e tome decisões sobre o gerenciamento interno de suas equipes ou dos assuntos interligados a elas, reduzindo perdas, com monitoramento constante.

  [Saiba mais](https://citsmart.com.br/rh "Saiba mais")

  ## Automatize o seu RH e torne tudo mais prático

  Use as informações que o CITSmart te fornece, em tempo real, e tome decisões sobre o gerenciamento interno de suas equipes ou dos assuntos interligados a elas, reduzindo perdas, com monitoramento constante.

  [Saiba mais](https://citsmart.com.br/rh "Saiba mais")

  + [ITSM](https://citsmart.com.br/solucoes/itsm-2/)
  + [FACILITIES](https://citsmart.com.br/solucoes/facilities/)
  + [GRP](https://citsmart.com.br/solucoes/grp/)
  + [OUVIDORIA](https://citsmart.com.br/solucoes/ouvidoria/)
  + [AIOps](https://citsmart.com.br/solucoes/aiops/)
  + [CRM](https://citsmart.com.br/solucoes/crm/)
  + [VIAGENS](https://citsmart.com.br/solucoes/viagens/)
  + [RH](https://citsmart.com.br/solucoes/rh/)
  + [DOCUMENTAÇÃO](https://docs.citsmart.com/)
* Widgets

  ## Com esses widgets, fica fácil criar o ambiente ideal para atender às suas demandas

  + [WORKFLOW](#tabs_v2-paneeluidc15a3d75_2_0)
  + [SIMPLE](#tabs_v2-paneeluidc15a3d75_2_1)
  + [SIMON](#tabs_v2-paneeluidc15a3d75_2_2)
  + [NEURO](#tabs_v2-paneeluidc15a3d75_2_3)

  ## Crie mapas para os serviços, de acordo com as metas e estratégias dos seus negócios

  O CITSmart promove a interação entre os serviços, criando uma rede integrada de registro e tratamentos, com designação de responsáveis e automação dos procedimentos, com fidelidade ao framework do sistema, dando total controle do processo, do registro à finalização.

  [Saiba mais](https://citsmart.com.br/workflow/ "Saiba mais")

  ## Gerencie de forma ágil equipes e processos

  Organize e orquestre as atividades da sua equipe e maximize o uso dos recursos, de forma simples e ágil. O Simple permite organizar os fluxos de trabalho, criar atividades e engajar os colaboradores a partir de um clique. O Simple é a ferramenta Kanban do CITsmart.

  [Saiba mais](https://citsmart.com.br/simple/ "Saiba mais")

  ## A IA capaz de monitorar o seu negócio, 24x7, 365 dias por ano

  Integre o CITSmart ao Simon e tenha uma plataforma de gestão e a inteligência artificial ao seu dispor.

  [Saiba mais](https://citsmart.com.br/simon/ "Saiba mais")

  ## Customize! Crie, integre e automatize soluções, sob medida para a necessidade da sua empresa

  Clique, arraste e está pronto. Tudo muito fácil com o Neuro do CITsmart.

  [Saiba mais](https://citsmart.com.br/neuro/ "Saiba mais")

  + [WORKFLOW](https://citsmart.com.br/widgets/workflow/)
  + [SIMPLE](https://citsmart.com.br/widgets/simple/)
  + [SIMON](https://citsmart.com.br/widgets/simon/)
  + [NEURO2](https://citsmart.com.br/widgets/neuro2/)
* [Contato](https://citsmart.com.br/contato/)
* [CITSMART X](https://citsmart.com.br/citsmart-x/)

* [Home](https://citsmart.com.br)
* [SOLUÇÕES](https://citsmart.com.br/solucoes/)
* ITSM

# Gestão além da TI

Com a solução de ITSM  do CITSmart a transformação digital se torna realidade. Baseamos nossos trabalhos em frameworks e metodologias que irão te auxiliar em todas as atividades relacionadas ao ambiente tecnológico.

Com a implantação do CITSmart elevamos o nível de maturidade da sua organização tornando-a mais eficiente e estratégica proporcionando maior valor e resultados positivos aos clientes de forma simples e objetiva.

 ![](http://citsmart.com.br/wp-content/uploads/2020/06/ilustracao_itsm-1.png "ilustracao_itsm")

 ![](http://citsmart.com.br/wp-content/uploads/2020/06/ilustracao_itsm-e1593615250114.png "ilustracao_itsm")

## A solução está mais completa

#### *Proporcionamos uma TI mais ágil e estratégica.*

Conheça a versão 9.0, agora com 16 processos certificados pela PinkVerify, novos frameworks e metodologias.

– Design Thinking

– Lean

– Agile

– DevOps

– ITIL

Toda a gestão é intuitiva, com o CITSmart. A ferramenta integra serviços e agrega toda a facilidade da customização de processos, garantindo a disponibilidade das funcionalidades aos usuários, com foco na inovação e na otimização dos fluxos de trabalho.

# Una pessoas e tecnologias e torne as atividades mais complexas em fluxos de trabalho automatizados

## Potencialize a sua gestão

#### **Com o CITSmart ITSM é possível  gerenciar de ponta a ponta o ciclo de vida de um registro:**

* Criar dashboards personalizados
* Ter o controle dos SLA's
* Monitorar o status dos tickets
* Identificar as áreas solicitantes
* Integrar com soluções de AIOps
* Gerar relatórios de trabalho
* Tenha um portal único para abertura de tickets para todas as áreas da organização

 ![](http://citsmart.com.br/wp-content/uploads/2020/06/hero-12-img-1-e1593615946427.png "hero-12-img")

# Tenha todos os processos de governança, riscos e compliance monitorados na sua organização

# Torne-se mais ágil com a Suite CITSmart

#### Possibilidades

* Controle de e tickets
* Gestão de relacionamento e satisfação de clientes
* Central de atendimento
* Ouvidoria
* Integração com telefonia e redes sociais

#### Metodologia

* Trabalho ágil
* Planejamento rápido
* Delegação fácil
* Controle simples e eficiente

#### Processos

* Operações de TI
* Gerenciamento de Problemas
* Evento
* Continuidade
* Disponibilidade
* Conhecimento
* Ativos de TI
* Mudança
* Liberação
* Entre outros (Total de 21 processos ITIL)

#### Inteligência

* Integração com soluções de IA
* Assistente virtual (Bot)
* Portal de Conhecimento por perfil
* Ambientes de trabalho digitais

#### Customização

* Personalização e construção de formulários
* Fluxos de trabalho
* Construtores de APP
* Integração com sistemas e bancos de dados legados

 ![](http://citsmart.com.br/wp-content/uploads/2020/06/shutterstock_1356646937-Converted-1-e1593616114846.png "shutterstock_1356646937-[Converted]")

## Soluções inovadoras

O propósito da Plataforma é oferecer ferramentas personalizadas e modulares, em uma única tela.

| **SOLUÇÕES** | **WIDGETS** |
| --- | --- |
| – AIOps | – Anuva *(Bot)* |
| – ITSM | – Neuro *(Desenvolvimento)* |
| – Facilites | – Portal do Conhecimento |
| – GRP | – AIOPS |
| – Ouvidoria | – Simple *(Kanban)* |
| – RH | – Workflow |
| – Viagem |  |
| – CRM |

# **21 Processos Certificados pela PinkVerify**

**Gerenciamento de Ativos**
**Gerenciamento de Disponibilidade**
**Gerenciamento de Capacidade**
**Gerenciamento de Mudança**
**Gerenciamento de Eventos**
**Gerenciamento Financeiro**
**Gerenciamento de Continuidade de Serviços de TI**
**Gerenciamento do Conhecimento**
**Gerenciamento de Problema**
**Gerenciamento de Liberação e Implantação**
**Cumprimento de Requisição**
**Gerenciamento de Configuração**
**Gerenciamento de Catálogo de Serviço**
**Gerenciamento de Nível de Serviço**
**Gerenciamento de Portifólio**
**Gerenciamento de Capacidade**

# Eleve o nível de maturidade da sua organização

## *Conheça o CITSmart ITSM*

## Experimente o CITSmart e eleve o nível de maturidade da sua organização

 [Solicite uma proposta](https://citsmart.com.br/contato/ "Saiba mais")

# Baixe nosso **e-book** gratuitamente e conheça todas as nossas funcionalidades.

## Inicie agora a **transformação digital** da sua organização.

#### Contato Comercial:

## **+55 61 3030-4011****0800 644 4433**

### info@citsmart.com.br

[Entre em contato](https://citsmart.com.br/contato/ "Entre em contato")

* [SOLUÇÕES](#q)
  + [ITSM](https://citsmart.com.br/solucoes/itsm-2/)
  + [FACILITIES](https://citsmart.com.br/solucoes/facilities/)
  + [GRP](https://citsmart.com.br/solucoes/grp/)
  + [OUVIDORIA](https://citsmart.com.br/solucoes/ouvidoria/)
  + [AIOps](https://citsmart.com.br/solucoes/aiops/)
  + [CRM](https://citsmart.com.br/solucoes/crm/)
  + [VIAGENS](https://citsmart.com.br/solucoes/viagens/)
  + [RH](https://citsmart.com.br/solucoes/rh/)
* WIDGETS
  + [WORKFLOW](https://citsmart.com.br/widgets/workflow/)
  + [SIMPLE](https://citsmart.com.br/widgets/simple/)
  + [AIOPS](https://citsmart.com.br/widgets/simon/)
  + [NEURO2](https://citsmart.com.br/widgets/neuro2/)
* [Contato](https://citsmart.com.br/contato/)
* [CITSMART X](https://citsmart.com.br/citsmart-x/)

 ![](http://citsmart.com.br/wp-content/uploads/2020/06/logo250.png "logo250")

Copyright © 2020 | Todos os direitos reservados à CITSmart

 [Política de Privacidade](https://citsmart.com.br/politica-de-privacidade/)

TOP

PT

* [EN](https://citsmart.com.br/en/solucoes/itsm-2/ "Language switcher : English")


=== Content from github.com_da34d9ad_20250119_114625.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnardnet%2Fcitsmart%2Fblob%2Fmaster%2FWEB-INF%2Fsrc%2Fbr%2Fcom%2Fcentralit%2Fcitcorpore%2Fintegracao%2Fad%2FLDAPUtils.java)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnardnet%2Fcitsmart%2Fblob%2Fmaster%2FWEB-INF%2Fsrc%2Fbr%2Fcom%2Fcentralit%2Fcitcorpore%2Fintegracao%2Fad%2FLDAPUtils.java)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=nardnet%2Fcitsmart)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[nardnet](/nardnet)
/
**[citsmart](/nardnet/citsmart)**
Public

* [Notifications](/login?return_to=%2Fnardnet%2Fcitsmart) You must be signed in to change notification settings
* [Fork
  2](/login?return_to=%2Fnardnet%2Fcitsmart)
* [Star
   0](/login?return_to=%2Fnardnet%2Fcitsmart)

* [Code](/nardnet/citsmart)
* [Issues
  0](/nardnet/citsmart/issues)
* [Pull requests
  0](/nardnet/citsmart/pulls)
* [Actions](/nardnet/citsmart/actions)
* [Projects
  0](/nardnet/citsmart/projects)
* [Security](/nardnet/citsmart/security)
* [Insights](/nardnet/citsmart/pulse)

Additional navigation options

* [Code](/nardnet/citsmart)
* [Issues](/nardnet/citsmart/issues)
* [Pull requests](/nardnet/citsmart/pulls)
* [Actions](/nardnet/citsmart/actions)
* [Projects](/nardnet/citsmart/projects)
* [Security](/nardnet/citsmart/security)
* [Insights](/nardnet/citsmart/pulse)

## Files

 master
## Breadcrumbs

1. [citsmart](/nardnet/citsmart/tree/master)
2. /[WEB-INF](/nardnet/citsmart/tree/master/WEB-INF)
3. /[src](/nardnet/citsmart/tree/master/WEB-INF/src)
4. /[br](/nardnet/citsmart/tree/master/WEB-INF/src/br)
5. /[com](/nardnet/citsmart/tree/master/WEB-INF/src/br/com)
6. /[centralit](/nardnet/citsmart/tree/master/WEB-INF/src/br/com/centralit)
7. /[citcorpore](/nardnet/citsmart/tree/master/WEB-INF/src/br/com/centralit/citcorpore)
8. /[integracao](/nardnet/citsmart/tree/master/WEB-INF/src/br/com/centralit/citcorpore/integracao)
9. /[ad](/nardnet/citsmart/tree/master/WEB-INF/src/br/com/centralit/citcorpore/integracao/ad)
/
# LDAPUtils.java

Copy path Blame  Blame
## Latest commit

## History

[History](/nardnet/citsmart/commits/master/WEB-INF/src/br/com/centralit/citcorpore/integracao/ad/LDAPUtils.java)1078 lines (846 loc) · 34.6 KB master
## Breadcrumbs

1. [citsmart](/nardnet/citsmart/tree/master)
2. /[WEB-INF](/nardnet/citsmart/tree/master/WEB-INF)
3. /[src](/nardnet/citsmart/tree/master/WEB-INF/src)
4. /[br](/nardnet/citsmart/tree/master/WEB-INF/src/br)
5. /[com](/nardnet/citsmart/tree/master/WEB-INF/src/br/com)
6. /[centralit](/nardnet/citsmart/tree/master/WEB-INF/src/br/com/centralit)
7. /[citcorpore](/nardnet/citsmart/tree/master/WEB-INF/src/br/com/centralit/citcorpore)
8. /[integracao](/nardnet/citsmart/tree/master/WEB-INF/src/br/com/centralit/citcorpore/integracao)
9. /[ad](/nardnet/citsmart/tree/master/WEB-INF/src/br/com/centralit/citcorpore/integracao/ad)
/
# LDAPUtils.java

Top
## File metadata and controls

* Code
* Blame

1078 lines (846 loc) · 34.6 KB[Raw](https://github.com/nardnet/citsmart/raw/refs/heads/master/WEB-INF/src/br/com/centralit/citcorpore/integracao/ad/LDAPUtils.java)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000package br.com.centralit.citcorpore.integracao.ad;
import java.io.IOException;import java.util.ArrayList;import java.util.Collection;import java.util.Hashtable;
import javax.naming.AuthenticationException;import javax.naming.Context;import javax.naming.NamingEnumeration;import javax.naming.NamingException;import javax.naming.SizeLimitExceededException;import javax.naming.directory.Attributes;import javax.naming.directory.DirContext;import javax.naming.directory.InitialDirContext;import javax.naming.directory.SearchControls;import javax.naming.directory.SearchResult;import javax.naming.ldap.Control;import javax.naming.ldap.InitialLdapContext;import javax.naming.ldap.LdapContext;import javax.naming.ldap.PagedResultsControl;import javax.naming.ldap.PagedResultsResponseControl;
import org.apache.commons.lang.StringUtils;
import br.com.centralit.citcorpore.bean.ADUserDTO;import br.com.centralit.citcorpore.bean.ServidorContextoDTO;import br.com.centralit.citcorpore.negocio.ParametroCorporeService;import br.com.centralit.citcorpore.negocio.UsuarioService;import br.com.centralit.citcorpore.util.Enumerados.ParametroSistema;import br.com.centralit.citcorpore.util.Enumerados;import br.com.centralit.citcorpore.util.ParametroUtil;import br.com.citframework.excecao.ServiceException;import br.com.citframework.service.ServiceLocator;
@SuppressWarnings({ "unchecked", "unused", "rawtypes" })public class LDAPUtils {
 protected static LDAPUtils instanceLdap;
 public static String INITIAL\_CTX = "com.sun.jndi.ldap.LdapCtxFactory";
 public static String SERVIDOR = "";// = "ldap://stj.gov.br:389";
 public static String CONNECTION\_TYPE = "simple";
 public static String ADMIN\_DN = "";// = "ldapciep";
 public static String ADMIN\_PW = "";// = "ldapses0p";
 public static String BASE\_DN = "";// = "dc=stj,dc=gov,dc=br";
 public static String MSG\_ERROR\_LDAP\_CONNECTION = "Não foi possível obter um contexto LDAP";
 public static String MSG\_ERROR\_LDAP\_VALIDATION\_USER = "Username ou Password Inválida";
 public static String FILTRO = "";  public static String LDAP\_FILTRO = "";  public static String LDAP\_ATRIBUTO = "";  public static String GRUPOPADRAO = "";  public static String ID\_PERFIL\_ACESSO\_DEFAULT = "";  public static String NUMERO\_COLABORADORES\_CONSULTA\_AD = "";
 private LDAPUtils() { super(); }
 public static LDAPUtils getInstance() {
 if (instanceLdap == null) { instanceLdap = new LDAPUtils(); }
 return instanceLdap; }
 static { inicializaDados(); }
 private static void inicializaDados() { String[] loginAd; String[] ldad\_sufixo; String[] base\_dominio; String admin\_dn\_login = ""; String admin\_dominio = ""; String base\_dominio\_recebe = "";  try {  if (!ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.LOGIN\_AD, " ").trim().equalsIgnoreCase("")) { admin\_dn\_login = ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.LOGIN\_AD, " ").trim(); ADMIN\_DN = admin\_dn\_login; }  if (!ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.LDAD\_SUFIXO\_DOMINIO, " ").trim().equalsIgnoreCase("")) { loginAd = admin\_dn\_login.split(";"); ldad\_sufixo = ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.LDAD\_SUFIXO\_DOMINIO, " ").trim().split(";"); for (int i = 0; i < ldad\_sufixo.length; i++) { admin\_dominio += loginAd[i]+ldad\_sufixo[i]+";"; } ADMIN\_DN = admin\_dominio; } if (!ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.SENHA\_AD, " ").trim().equalsIgnoreCase("")) { ADMIN\_PW = ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.SENHA\_AD, " ").trim(); } if (!ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.LDAP\_URL, " ").trim().equalsIgnoreCase("")) { SERVIDOR = ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.LDAP\_URL, " ").trim(); } if (!ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.DOMINIO\_AD, " ").trim().equalsIgnoreCase("")) { BASE\_DN = ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.DOMINIO\_AD, " ").trim(); }  if (!ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.LDAP\_FILTRO, " ").trim().equalsIgnoreCase("")) { LDAP\_FILTRO = ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.LDAP\_FILTRO, " ").trim(); } if (!ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.LDAP\_ATRIBUTO, " ").trim().equalsIgnoreCase("")) { LDAP\_ATRIBUTO = ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.LDAP\_ATRIBUTO, " ").trim(); } if (!ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.ID\_PERFIL\_ACESSO\_DEFAULT, " ").trim().equalsIgnoreCase("")) { ID\_PERFIL\_ACESSO\_DEFAULT = ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.ID\_PERFIL\_ACESSO\_DEFAULT, " ").trim(); } if (!ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.ID\_GRUPO\_PADRAO\_LDAP, " ").trim().equalsIgnoreCase("")) { GRUPOPADRAO = ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.ID\_GRUPO\_PADRAO\_LDAP, " ").trim(); } if (!ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.NUMERO\_COLABORADORES\_CONSULTA\_AD, " ").trim().equalsIgnoreCase("")) { NUMERO\_COLABORADORES\_CONSULTA\_AD = ParametroUtil.getValorParametroCitSmartHashMap(Enumerados.ParametroSistema.NUMERO\_COLABORADORES\_CONSULTA\_AD, " ").trim(); }  } catch (Exception e) { e.printStackTrace(); } }
 public static ADUserDTO autenticacaoAD(String login, String password) throws Exception {
 inicializaDados(); ADUserDTO adUserAux = null;
 NamingEnumeration results = null; NamingEnumeration cursor = null;
 String flag = null; Hashtable active = new Hashtable(); Collection<ServidorContextoDTO> listContexto = null;
 SearchControls search = null; SearchControls searchUser = null; String filtro = null; boolean usuarioAutenticado = false;
 listContexto = createLdapConnection();  for (ServidorContextoDTO dirContext : listContexto) {
 if (dirContext != null && dirContext.isAtivo()) {
 search = new SearchControls(); search.setSearchScope(SearchControls.SUBTREE\_SCOPE);
 searchUser = new SearchControls(); searchUser.setSearchScope(SearchControls.SUBTREE\_SCOPE);
  String[] atributosParaRetornar = new String[1]; /\*\* \* Realiza a Validação Caso o parametro openLDAP esteja ativo \* sambaNTPassword - Atributo de Senha configurada para o openLDAP \* distinguishedName - (Default) Atributo de senha padrão \*/ String parametroOpenLdap = ParametroUtil.getValorParametroCitSmartHashMap(ParametroSistema.LDAP\_OPEN\_LDAP, "N"); if (parametroOpenLdap.equals("S")) { atributosParaRetornar[0] = "uid"; } else { atributosParaRetornar[0] = "distinguishedName"; }  searchUser.setReturningAttributes(atributosParaRetornar);
 String[] atributosRetorno = getADFieldList(); search.setReturningAttributes(atributosRetorno);
 /\*\* \* uid - Referencia ao CPF \* sAMAccountName - (Default) Login do usuario \*/ if (parametroOpenLdap.equals("S")) { filtro = "(&(uid=" + login + "))"; } else { filtro = "(&(sAMAccountName=" + login + "))"; }  try {
 cursor = dirContext.getDirContext().search(dirContext.getBaseDominio(), filtro, searchUser);
 if (cursor.hasMoreElements()) {
 SearchResult result = (SearchResult) cursor.nextElement(); Attributes att = result.getAttributes(); String dn = ""; /\*\* \* sambaNTPassword - Atributo de Senha configurada para o openLDAP distinguishedName - (Default) Atributo de senha padrão \*/ if (parametroOpenLdap.equals("S")) { dn = (String) att.get("uid").get(); usuarioAutenticado = validateUser("uid=" + dn + "," + dirContext.getBaseDominio(), password); } else { dn = (String) att.get("distinguishedName").get(); usuarioAutenticado = validateUser(dn, password); } }  if (usuarioAutenticado) { results = dirContext.getDirContext().search(dirContext.getBaseDominio(), filtro, search);
 if (results != null && results.hasMoreElements()) {
 while (results != null && results.hasMoreElements()) {
 adUserAux = new ADUserDTO();
 System.out.println("------------- INÍCIO --------------"); String retorno = null;
 SearchResult searchResult = (SearchResult) results.next();
 for (int i = 0; i < atributosRetorno.length; i++) {
 if (searchResult.getAttributes().get(atributosRetorno[i]) != null) {
 retorno = nullToNaoDisponivel(searchResult.getAttributes().get(atributosRetorno[i]).toString());
 setPropertyToAdUserDTO(adUserAux, atributosRetorno[i], retorno.split(":")[1]); } }
 System.out.println(adUserAux.getUserPrincipalName() + " - " + adUserAux.getsAMAccountName());  System.out.println("------------- FIM --------------"); } adUserAux.setIdGrupo(dirContext.getGrupoPadrao()); adUserAux.setLdapAtributo(dirContext.getLdpaAtributo()); break; } }
 } catch (NamingException e) { System.out.println(MSG\_ERROR\_LDAP\_CONNECTION); e.printStackTrace(); } } } return adUserAux; }
 /\*\* \* Sincroniza todos os usuários do AD com o CITSMart \*  \* @return <code>ArrayList<ADUserDTO></code> \* @author Vadoilo Damasceno \* @throws Exception  \*/ public static synchronized Collection<ADUserDTO> sincronizaUsuariosAD() throws Exception {
 UsuarioService usuarioService; ArrayList<ADUserDTO> listaUsuariosAD = new ArrayList<ADUserDTO>(); inicializaDados(); ADUserDTO adUserAux = null;
 NamingEnumeration results = null;
 Hashtable active = new Hashtable(); // DirContext contexto = null;
 SearchControls searchControls = null; String filtro = null; boolean usuarioAutenticado = false;
  for (ServidorContextoDTO context : dadosConexao()) {  LdapContext ldapContexto = context.getLdapContext();
 String var = ParametroUtil.getValorParametroCitSmartHashMap(ParametroSistema.LDAP\_OPEN\_LDAP, "N");
 if (ldapContexto != null) {
 searchControls = new SearchControls(); searchControls.setSearchScope(SearchControls.SUBTREE\_SCOPE);
 try { System.out.println(" \n \n LDAP - ROTINA DE SINCRONIZAÇÃO COM AD INICIADA \n \n"); String numColaboradoresPorPag; Integer pageSize = new Integer(4000);  if (context.getNumeroColaboradores() != null && context.getNumeroColaboradores().equals("")) { numColaboradoresPorPag = context.getNumeroColaboradores(); }else{ numColaboradoresPorPag = ParametroUtil.getValorParametroCitSmartHashMap(ParametroSistema.NUMERO\_COLABORADORES\_CONSULTA\_AD, "4000").trim(); }
 if (numColaboradoresPorPag != null && !StringUtils.isEmpty(numColaboradoresPorPag)) {
 pageSize = Integer.parseInt(numColaboradoresPorPag.trim()); }
 byte[] cookie = null; int contador = 0; int total; int numPagina = 0;
 String[] atributosRetorno = getADFieldList(); searchControls.setReturningAttributes(atributosRetorno);
 //filtro caso venha pelo context ele pega esse valor, senão pega o valor padrão do parametro; if (context.getLdpaFiltro() != null && context.getLdpaFiltro().equals("")) { filtro = context.getLdpaFiltro(); }else{ filtro = ParametroUtil.getValorParametroCitSmartHashMap(ParametroSistema.LDAP\_FILTRO, "(&(objectCategory=person)(objectClass=user))"); } usuarioService = (UsuarioService) ServiceLocator.getInstance().getService(UsuarioService.class, null);
 if(var.equals("S")) ldapContexto.setRequestControls(new Control[] { new PagedResultsControl(pageSize, Control.NONCRITICAL) }); else ldapContexto.setRequestControls(new Control[] { new PagedResultsControl(pageSize, Control.CRITICAL) });
 do {
 numPagina++;
 results = ldapContexto.search(context.getBaseDominio(), filtro, searchControls);
 System.out.println(" \n \n LDAP - PÁGINA " + numPagina + " - INICIADA \n \n");
 while (results != null && results.hasMoreElements()) { contador++;
 adUserAux = new ADUserDTO();
 System.out.println("---------------------------------------");
 String retorno = null; SearchResult searchResult = (SearchResult) results.next();
 for (int i = 0; i < atributosRetorno.length; i++) {
 if (searchResult.getAttributes().get(atributosRetorno[i]) != null) {
 retorno = nullToNaoDisponivel(searchResult.getAttributes().get(atributosRetorno[i]).toString()); setPropertyToAdUserDTO(adUserAux, atributosRetorno[i], retorno.split(":")[1]); }
 }
 System.out.println(contador + " - " + adUserAux.getsAMAccountName() + " - " + adUserAux.getUserPrincipalName()); System.out.println("---------------------------------------");
 listaUsuariosAD.add(adUserAux); adUserAux.setLdapAtributo(context.getLdpaAtributo()); adUserAux.setIdGrupo(context.getGrupoPadrao()); usuarioService.sincronizaUsuarioAD(adUserAux, 0); }
 // Examine the paged results control response Control[] controls = ldapContexto.getResponseControls(); if (controls != null) { for (int i = 0; i < controls.length; i++) { if (controls[i] instanceof PagedResultsResponseControl) { PagedResultsResponseControl prrc = (PagedResultsResponseControl) controls[i]; total = prrc.getResultSize(); cookie = prrc.getCookie(); } else { // Handle other response controls (if any) } } }
 // Re-activate paged results] if(var.equals("S")) ldapContexto.setRequestControls(new Control[] { new PagedResultsControl(pageSize, cookie, Control.NONCRITICAL) }); else ldapContexto.setRequestControls(new Control[] { new PagedResultsControl(pageSize, cookie, Control.CRITICAL) });
 } while (cookie != null);
 System.out.println("LDAP - ROTINA DE SINCRONIZAÇÃO COM AD FINALIZADA."); System.out.println("LDAP - TOTAL DE REGISTROS RECUPERADOS = " + contador);
 } catch (AuthenticationException ex) {
 String[] erro = ex.toString().split(":"); String[] e = erro[erro.length - 1].split(",");
 if (e[1].compareTo(" data 525") == 0) System.out.println("Usuario invalido");
 else if (e[1].compareTo(" data 52e") == 0) System.out.println("Senha invalida");
 } catch (SizeLimitExceededException sizeLimit) {
 System.out.println("Limite excedeu..."); sizeLimit.printStackTrace();
 } catch (NamingException ex) {
 System.out.println("NamingException is: " + ex);
 } catch (IOException ie) { System.err.println("LDAP - IOException "); ie.printStackTrace(); } catch (Exception e) { e.printStackTrace(); } finally { try { ldapContexto.close(); ldapContexto = null; System.gc(); } catch (NamingException e) { System.out.println("LDAP - NamingException - não foi possível fechar ldapContexto."); e.printStackTrace(); } } } } return listaUsuariosAD; }
 /\*\* \* Consulta empregado a partir da Tela de Solicitação Serviço. Pesquisa é realizada pelo Login do Usuário. \*  \* @param login \* @param idGrupoSolicitante \* @return ADUserDTO \* @throws Exception  \*/ public static ArrayList<ADUserDTO> consultaEmpregado(String login, Integer idGrupoSolicitante) throws Exception {
 UsuarioService usuarioService;
 inicializaDados(); ADUserDTO adUserAux = null;
 NamingEnumeration results = null; NamingEnumeration cursor = null;
 String flag = null; Hashtable active = new Hashtable(); // DirContext contexto = null; Collection<ServidorContextoDTO> listContexto = null; SearchControls search = null; SearchControls searchUser = null; ArrayList<ADUserDTO> listaUsuariosAD = new ArrayList<ADUserDTO>(); String filtro = null; boolean usuarioAutenticado = false;
 listContexto = createLdapConnection();  for (ServidorContextoDTO dirContext : listContexto) { String var = ParametroUtil.getValorParametroCitSmartHashMap(ParametroSistema.LDAP\_OPEN\_LDAP, "N");
  if (dirContext != null) {
 search = new SearchControls(); search.setSearchScope(SearchControls.SUBTREE\_SCOPE);
 searchUser = new SearchControls(); searchUser.setSearchScope(SearchControls.SUBTREE\_SCOPE);  String[] atributosParaRetornar = new String[1];  if(var.equals("S")) atributosParaRetornar[0] = "uid"; else atributosParaRetornar[0] = "distinguishedName";  searchUser.setReturningAttributes(atributosParaRetornar);
 String[] atributosRetorno = getADFieldList(); search.setReturningAttributes(atributosRetorno);
 if(var.equals("S")) filtro = "(&(uid=" + login + "))"; else filtro = "(&(sAMAccountName=" + login + "))";
 try {
 usuarioService = (UsuarioService) ServiceLocator.getInstance().getService(UsuarioService.class, null);
 results = dirContext.getDirContext().search(dirContext.getBaseDominio(), filtro, search);
 if (results != null && results.hasMoreElements()) {
 while (results != null && results.hasMoreElements()) {
 adUserAux = new ADUserDTO();
 System.out.println("------------- INÍCIO --------------"); String retorno = null;
 SearchResult searchResult = (SearchResult) results.next();
 for (int i = 0; i < atributosRetorno.length; i++) {
 if (searchResult.getAttributes().get(atributosRetorno[i]) != null) {
 retorno = nullToNaoDisponivel(searchResult.getAttributes().get(atributosRetorno[i]).toString());
 setPropertyToAdUserDTO(adUserAux, atributosRetorno[i], retorno.split(":")[1]); } }
 System.out.println(adUserAux.getUserPrincipalName() + " - " + adUserAux.getsAMAccountName()); System.out.println("------------- FIM --------------");
 usuarioService.sincronizaUsuarioAD(adUserAux, idGrupoSolicitante);
 listaUsuariosAD.add(adUserAux); } } } catch (AuthenticationException ex) {
 String[] erro = ex.toString().split(":"); String[] e = erro[erro.length - 1].split(",");
 if (e[1].compareTo(" data 525") == 0) flag = "Usuario invalido";
 else if (e[1].compareTo(" data 52e") == 0) flag = "Sennha invalida";
 } catch (NamingException ex) {
 System.out.println("NamingException is: " + ex);
 } catch (Exception e) {
 e.printStackTrace();
 } finally {
 System.out.println(flag);
 } }
 } return listaUsuariosAD; }
 private static void setPropertyToAdUserDTO(ADUserDTO adUserObject, String name, String value) throws Exception { String var = ParametroUtil.getValorParametroCitSmartHashMap(ParametroSistema.LDAP\_OPEN\_LDAP, "N"); if (name.equalsIgnoreCase("CN")) { adUserObject.setCN(value); if(var.equals("S")) adUserObject.setUserPrincipalName(value); return; } if (name.equalsIgnoreCase("description")) { adUserObject.setDescription(value); return; } if (name.equalsIgnoreCase("displayName")) { adUserObject.setDisplayName(value); return; } if (name.equalsIgnoreCase("DN")) { adUserObject.setDN(value); return; } if (name.equalsIgnoreCase("givenName")) { adUserObject.setGivenName(value); return; }
 if (name.equalsIgnoreCase("homeDrive")) { adUserObject.setHomeDrive(value); return; } if (name.equalsIgnoreCase("name")) { adUserObject.setName(value); return; } if (name.equalsIgnoreCase("objectCategory")) { adUserObject.setObjectCategory(value); return; } if (name.equalsIgnoreCase("objectClass")) { adUserObject.setObjectClass(value); return; } if (name.equalsIgnoreCase("physicalDeliveryOfficeName")) { adUserObject.setPhysicalDeliveryOfficeName(value); return; }
 if (name.equalsIgnoreCase("profilePath")) { adUserObject.setProfilePath(value); return; } if (name.equalsIgnoreCase("uid") && var.equals("S")) { adUserObject.setsAMAccountName(value); return; } else if (name.equalsIgnoreCase("sAMAccountName")) { adUserObject.setsAMAccountName(value); return; } if (name.equalsIgnoreCase("SN")) { adUserObject.setSN(value); return; } if (name.equalsIgnoreCase("userAccountControl")) { adUserObject.setUserAccountControl(value); return; } if (name.equalsIgnoreCase("userPrincipalName")) { adUserObject.setUserPrincipalName(value); return; }
 if (name.equalsIgnoreCase("homeMDB")) { adUserObject.setHomeMDB(value); return; } if (name.equalsIgnoreCase("legacyExchangeDN")) { adUserObject.setLegacyExchangeDN(value); return; } if (name.equalsIgnoreCase("mail")) { adUserObject.setMail(value); return; } if (name.equalsIgnoreCase("mAPIRecipient")) { adUserObject.setmAPIRecipient(value); return; } if (name.equalsIgnoreCase("mailNickname")) { adUserObject.setMailNickname(value); return; } if (name.equalsIgnoreCase("c")) { adUserObject.setC(value); return; } if (name.equalsIgnoreCase("company")) { adUserObject.setCompany(value); return; } if (name.equalsIgnoreCase("department")) { adUserObject.setDepartment(value); return; } if (name.equalsIgnoreCase("homephone")) { adUserObject.setHomephone(value); return; } if (name.equalsIgnoreCase("l")) { adUserObject.setL(value); return; } if (name.equalsIgnoreCase("location")) { adUserObject.setLocation(value); return; } if (name.equalsIgnoreCase("manager")) { adUserObject.setManager(value); return; } if (name.equalsIgnoreCase("mobile")) { adUserObject.setMobile(value); return; } if (name.equalsIgnoreCase("OU")) { adUserObject.setOU(value); return; } if (name.equalsIgnoreCase("postalCode")) { adUserObject.setPostalCode(value); return; } if (name.equalsIgnoreCase("st")) { adUserObject.setSt(value); return; } if (name.equalsIgnoreCase("streetAddress")) { adUserObject.setStreetAddress(value); return; } if (name.equalsIgnoreCase("telephoneNumber")) { adUserObject.setTelephoneNumber(value); return; }
 }
 public static String[] getADFieldList() { String[] fields = { "CN", "description", "displayName", "DN", "givenName", "homeDrive", "name", "objectCategory", "objectClass", "physicalDeliveryOfficeName", "profilePath", "sAMAccountName", "SN", "userAccountControl", "userPrincipalName", "homeMDB", "legacyExchangeDN", "mail", "mAPIRecipient", "mailNickname", "c", "company", "department", "homephone", "l", "location", "manager", "mobile", "OU", "postalCode", "st", "streetAddress", "telephoneNumber", "uid" };
 return fields; }
 public static String nullToNaoDisponivel(String value) { return value == null ? "Não disponível" : value; }
 private static Collection<ServidorContextoDTO> createLdapConnection() {
 DirContext contexto = null; Hashtable env = new Hashtable(); Collection<DirContext> ctx = new ArrayList<DirContext>(); ServidorContextoDTO servidorContextoDTO = null; Collection<ServidorContextoDTO> listServidor = new ArrayList<ServidorContextoDTO>();  // Especifica INITIAL CONTEXT env.put(Context.INITIAL\_CONTEXT\_FACTORY, INITIAL\_CTX);  String[] servidor = SERVIDOR.trim().split(";"); String[] admin\_dn = ADMIN\_DN.trim().split(";"); String[] admin\_pw = ADMIN\_PW.trim().split(";");   String[] ldap\_filtro = null; String[] ldap\_atributo = null; String[] grupo\_padrao = null; String[] perfil\_acesso = null; String[] numero\_colaboradores = null; String[] base\_dominio = null;  if (!LDAP\_FILTRO.equals("")) { ldap\_filtro = LDAP\_FILTRO.trim().split(";"); } if (!LDAP\_ATRIBUTO.equals("")) { ldap\_atributo = LDAP\_ATRIBUTO.trim().split(";"); } if (!GRUPOPADRAO.equals("")) { grupo\_padrao = GRUPOPADRAO .trim().split(";"); } if (!ID\_PERFIL\_ACESSO\_DEFAULT.equals("")) { perfil\_acesso = ID\_PERFIL\_ACESSO\_DEFAULT.trim().split(";"); } if (!NUMERO\_COLABORADORES\_CONSULTA\_AD.equals("")) { numero\_colaboradores = NUMERO\_COLABORADORES\_CONSULTA\_AD .trim().split(";"); } if (!BASE\_DN.equals("")) { base\_dominio = BASE\_DN.trim().split(";"); } // if (servidor.length > 1 && admin\_dn.length > 1 && admin\_pw.length > 1) { for (int i = 0; i < servidor.length; i++) {  servidorContextoDTO = new ServidorContextoDTO();  // Especifica o IP/Nome e a porta do servidor LDAP env.put(Context.PROVIDER\_URL, servidor[i]); // Usuário ADMIN0 env.put(Context.SECURITY\_PRINCIPAL, admin\_dn[i]); // Senha ADMIN env.put(Context.SECURITY\_CREDENTIALS, admin\_pw[i]); // Tipo de Conexão env.put(Context.SECURITY\_AUTHENTICATION, CONNECTION\_TYPE); // Cria um Initial Context
 try {  contexto = new InitialDirContext(env); if (contexto != null) { servidorContextoDTO.setDirContext(contexto); servidorContextoDTO.setServidor(servidor[i]); if (grupo\_padrao != null && grupo\_padrao.length != 0) { servidorContextoDTO.setGrupoPadrao(grupo\_padrao[i]); } if (ldap\_atributo != null && ldap\_atributo.length != 0) { servidorContextoDTO.setLdpaAtributo(ldap\_atributo[i]); } if (ldap\_filtro != null && ldap\_filtro.length != 0) { servidorContextoDTO.setLdpaFiltro(ldap\_filtro[i]); } if (numero\_colaboradores != null && numero\_colaboradores.length != 0) { servidorContextoDTO.setNumeroColaboradores(numero\_colaboradores[i]); } if (perfil\_acesso != null && perfil\_acesso.length != 0) { servidorContextoDTO.setPerfilAcesso(perfil\_acesso[i]); } if (base\_dominio != null && base\_dominio.length != 0) { servidorContextoDTO.setBaseDominio(base\_dominio[i]); } servidorContextoDTO.setAtivo(true); listServidor.add(servidorContextoDTO); } //ctx.add(new InitialDirContext(env)); } catch (NamingException e) { servidorContextoDTO.setDirContext(contexto); servidorContextoDTO.setServidor(servidor[i]); servidorContextoDTO.setAtivo(false); listServidor.add(servidorContextoDTO); System.out.println(MSG\_ERROR\_LDAP\_CONNECTION); e.printStackTrace(); } } // } return listServidor; }
 private static boolean validateUser(String dn, String senha) {
 DirContext ldapCtx = null; boolean bResult = false;
 Hashtable env = new Hashtable(); String[] servidor = SERVIDOR.trim().split(";");  for (int i = 0; i < servidor.length; i++) { // Especifica INITIAL CONTEXT env.put(Context.INITIAL\_CONTEXT\_FACTORY, INITIAL\_CTX); // Especifica o IP/Nome e a porta do servidor LDAP env.put(Context.PROVIDER\_URL, servidor[i]); // Ldap Distingued Name env.put(Context.SECURITY\_PRINCIPAL, dn); // Senha Usuário env.put(Context.SECURITY\_CREDENTIALS, senha); // Tipo de Conexão env.put(Context.SECURITY\_AUTHENTICATION, CONNECTION\_TYPE); try { // Cria um Initial Context ldapCtx = new InitialDirContext(env);
 } catch (AuthenticationException auEx) { System.out.println(MSG\_ERROR\_LDAP\_VALIDATION\_USER); auEx.printStackTrace(); } catch (NamingException ne) { System.out.println(MSG\_ERROR\_LDAP\_CONNECTION); ne.printStackTrace(); } finally {
 if (ldapCtx != null) { bResult = true; break; } } } return bResult; }
 /\*\* \* Testa conexão com LDAP. \*  \* @return boolean \* @author valdoilo.damasceno \* @throws Exception  \*/ public static Collection<ADUserDTO> testarConexao() throws Exception {
 UsuarioService usuarioService;
 inicializaDados(); ADUserDTO adUserAux = null;
 NamingEnumeration results = null; Collection<ADUserDTO> listAdUserAux = new ArrayList<ADUserDTO>(); Hashtable active = new Hashtable();
 SearchControls searchControls = null; String filtro = null; boolean usuarioAutenticado = false;
  for (ServidorContextoDTO context : dadosConexao()) { adUserAux = new ADUserDTO(); LdapContext ldapContexto = (LdapContext) context.getLdapContext();
 ArrayList<ADUserDTO> listaUsuariosAD = new ArrayList<ADUserDTO>(); String var = ParametroUtil.getValorParametroCitSmartHashMap(ParametroSistema.LDAP\_OPEN\_LDAP, "N"); if (ldapContexto != null) {
 searchControls = new SearchControls(); searchControls.setSearchScope(SearchControls.SUBTREE\_SCOPE);
 try {
 Integer pageSize = new Integer(1);
 byte[] cookie = null; int contador = 0; int total; int numPagina = 0;
 String[] atributosRetorno = getADFieldList(); searchControls.setReturningAttributes(atributosRetorno);  //filtro caso venha pelo context ele pega esse valor, senão pega o valor padrão do parametro; if (context.getLdpaFiltro() != null && !context.getLdpaFiltro().equalsIgnoreCase("")) { filtro = context.getLdpaFiltro(); }else{ filtro = ParametroUtil.getValorParametroCitSmartHashMap(ParametroSistema.LDAP\_FILTRO, "(&(objectCategory=person)(objectClass=user))"); }   usuarioService = (UsuarioService) ServiceLocator.getInstance().getService(UsuarioService.class, null);  if(var.equals("S")) ldapContexto.setRequestControls(new Control[] { new PagedResultsControl(pageSize, Control.NONCRITICAL) }); else ldapContexto.setRequestControls(new Control[] { new PagedResultsControl(pageSize, Control.CRITICAL) });
 numPagina++;
 results = ldapContexto.search(context.getBaseDominio(), filtro, searchControls);
 while (results != null && results.hasMoreElements() && contador < 1) { contador++;
 String retorno = null; SearchResult searchResult = (SearchResult) results.next();
 for (int i = 0; i < atributosRetorno.length; i++) {
 if (searchResult.getAttributes().get(atributosRetorno[i]) != null) {
 retorno = nullToNaoDisponivel(searchResult.getAttributes().get(atributosRetorno[i]).toString()); setPropertyToAdUserDTO(adUserAux, atributosRetorno[i], retorno.split(":")[1]); }
 } }
 } catch (AuthenticationException ex) {
 String[] erro = ex.toString().split(":"); String[] e = erro[erro.length - 1].split(",");
 if (e[1].compareTo(" data 525") == 0) System.out.println("Usuario invalido");
 else if (e[1].compareTo(" data 52e") == 0) System.out.println("Senha invalida");
 } catch (SizeLimitExceededException sizeLimit) {
 System.out.println("Limite excedeu..."); sizeLimit.printStackTrace();
 } catch (NamingException ex) {
 System.out.println("NamingException is: " + ex);
 } catch (IOException ie) { System.err.println("LDAP - IOException "); ie.printStackTrace(); } catch (Exception e) { e.printStackTrace(); } finally { try { ldapContexto.close(); ldapContexto = null; System.gc(); adUserAux.setAtivo(true); adUserAux.setServer(context.getServidor()); listAdUserAux.add(adUserAux); } catch (NamingException e) { System.out.println("LDAP - NamingException - não foi possível fechar ldapContexto."); e.printStackTrace(); } }
 }else{ adUserAux.setAtivo(false); adUserAux.setServer(context.getServidor()); listAdUserAux.add(adUserAux); } } return listAdUserAux;//olhar }  private static Collection<ServidorContextoDTO> dadosConexao() throws Exception {  Collection<DirContext> dirContext = new ArrayList<DirContext>(); Collection<ServidorContextoDTO> listServidor = new ArrayList<ServidorContextoDTO>(); Hashtable env = new Hashtable();  LdapContext contexto = null;  String[] servidor = SERVIDOR.trim().split(";"); String[] admin\_dn = ADMIN\_DN.trim().split(";"); String[] admin\_pw = ADMIN\_PW.trim().split(";"); [View remainder of file in raw view](https://github.com/nardnet/citsmart/raw/refs/heads/master/WEB-INF/src/br/com/centralit/citcorpore/integracao/ad/LDAPUtils.java)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


