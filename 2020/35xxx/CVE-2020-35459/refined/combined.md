=== Content from lists.openwall.net_ae5d8845_20250119_141836.html ===


| [lists.openwall.net](https://lists.openwall.net) [lists](/)  /  [announce](https://www.openwall.com/lists/announce/)  [owl-users](https://www.openwall.com/lists/owl-users/)  [owl-dev](https://www.openwall.com/lists/owl-dev/)  [john-users](https://www.openwall.com/lists/john-users/)  [john-dev](https://www.openwall.com/lists/john-dev/)  [passwdqc-users](https://www.openwall.com/lists/passwdqc-users/)  [yescrypt](https://www.openwall.com/lists/yescrypt/)  [popa3d-users](https://www.openwall.com/lists/popa3d-users/)  /  [oss-security](https://www.openwall.com/lists/oss-security/)  [kernel-hardening](https://www.openwall.com/lists/kernel-hardening/)  [musl](https://www.openwall.com/lists/musl/)  [sabotage](https://www.openwall.com/lists/sabotage/)  [tlsify](https://www.openwall.com/lists/tlsify/)  [passwords](https://www.openwall.com/lists/passwords/)  /  [crypt-dev](https://www.openwall.com/lists/crypt-dev/)  [xvendor](https://www.openwall.com/lists/xvendor/)  /  [Bugtraq](/bugtraq/)  [Full-Disclosure](/full-disclosure/)  [linux-kernel](/linux-kernel/)  linux-[netdev](/netdev/)  [linux-ext4](/linux-ext4/)  [linux-hardening](/linux-hardening/)  [linux-cve-announce](/linux-cve-announce/)  [PHC](/phc-discussions/)| *Open Source and information security mailing list archives*|  | | | | |
| --- | --- | --- | --- | --- |

| | [Hash Suite: Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

# Open Source and information security mailing list archives

### Openwall-hosted community mailing lists

* [oss-security](https://www.openwall.com/lists/oss-security/)
  ([info](https://oss-security.openwall.org/wiki/mailing-lists/oss-security)) -
  Open Source software security discussions
  (there's also a [wiki](https://oss-security.openwall.org/wiki/))* [kernel-hardening](https://www.openwall.com/lists/kernel-hardening/) -
    Linux kernel security hardening discussions (see also linux-hardening below)* [libc-coord](https://www.openwall.com/lists/libc-coord/) -
      [coordination of work on standard C libraries (libc)](https://www.openwall.com/lists/libc-coord/2020/01/30/1)* [musl](https://www.openwall.com/lists/musl/) - discussions around
        [musl](https://www.musl-libc.org),
        a new standard C library for Linux* [passwords](https://www.openwall.com/lists/passwords/) - discussions on anything related to passwords
          except what better fits on other mailing lists* [sabotage](https://www.openwall.com/lists/sabotage/) -
            discussions around Sabotage Linux,
            an experimental distribution based on musl and BusyBox* [tlsify](https://www.openwall.com/lists/tlsify/) - [a TLS API](https://www.openwall.com/lists/tlsify/2015/09/28/1)
              for file-descriptor-oriented applications to make use of secure (TLS) sockets
              without invasive changes to their programming model

### Openwall mailing lists

* [announce](https://www.openwall.com/lists/announce/) - announcements only, very low traffic* [owl-users](https://www.openwall.com/lists/owl-users/) -
    [Openwall GNU/\*/Linux](https://www.openwall.com/Owl/) (Owl) user discussions* [owl-dev](https://www.openwall.com/lists/owl-dev/) - Owl development discussions* [lkrg-users](https://www.openwall.com/lists/lkrg-users/) -
        [Linux Kernel Runtime Guard](https://www.openwall.com/lkrg/) user discussions* [john-users](https://www.openwall.com/lists/john-users/) -
          [John the Ripper](https://www.openwall.com/john/) password cracker user discussions

          See also:
          [selected most useful and currently relevant postings](https://openwall.info/wiki/john/mailing-list-excerpts)* [john-dev](https://www.openwall.com/lists/john-dev/) -
            John the Ripper development discussions* [passwdqc-users](https://www.openwall.com/lists/passwdqc-users/) -
              [passwdqc](https://www.openwall.com/passwdqc/)
              password/passphrase strength checking and policy enforcement toolset user discussions* [yescrypt](https://www.openwall.com/lists/yescrypt/) -
                discussions around [yescrypt](https://www.openwall.com/yescrypt/) KDF and password hashing scheme* [popa3d-users](https://www.openwall.com/lists/popa3d-users/) -
                  [popa3d](https://www.openwall.com/popa3d/) Unix POP3 daemon user discussions

### Obsolete/inactive Openwall(-hosted) mailing lists

* [crypt-dev](https://www.openwall.com/lists/crypt-dev/) -
  [design and implementation of a new password hashing method for servers](https://www.openwall.com/lists/crypt-dev/2011/04/05/2)* [xvendor](https://www.openwall.com/lists/xvendor/)
    ([info](https://www.openwall.com/community/xvendor)) -
    collaboration and information exchange between OS distribution vendors
    (mostly Linux) on non-security topics

### Other (third-party) mailing lists

* [Bugtraq](bugtraq/) -
  security vulnerability announcements and discussions, pre-moderated* [Full-Disclosure](full-disclosure/) -
    security vulnerability announcements and discussions, originally not moderated but now also pre-moderated* [linux-kernel](linux-kernel/) -
      Linux kernel development discussions, very high volume* [netdev](netdev/) -
        Linux networking subsystem development discussions, high volume* [linux-ext4](linux-ext4/) -
          Linux ext4 filesystem development* [linux-hardening](linux-hardening/) -
            Linux kernel security hardening discussions (focused on upstream maintenance of the changes)* [linux-cve-announce](linux-cve-announce/) -
              [Linux kernel CVE announcements](https://docs.kernel.org/process/cve.html)* [PHC discussions](phc-discussions/) -
                [Password Hashing Competition](https://password-hashing.net)
                discussions

Quick Comment:

| [Powered by Openwall GNU/*/Linux](https://www.openwall.com/Owl/ "Powered by Openwall GNU/*/Linux - security-enhanced \"Linux distribution\"") [Powered by OpenVZ](https://openvz.org "Powered by OpenVZ - OS virtualization solution for Linux") 781942 | |
| --- | --- |



=== Content from wiki.debian.org_8d48714b_20250119_141835.html ===

[![Debian](https://www.debian.org/Pics/openlogo-50.png)](https://www.debian.org "Debian Homepage")

[Wiki](/FrontPage "Debian Wiki Homepage")

[Login](/LTS?action=login)

* [FrontPage](/FrontPage)
* [RecentChanges](/RecentChanges)
* [FindPage](/FindPage)
* [HelpContents](/HelpContents)
* [LTS](/LTS)

Search:

[![Debian](https://www.debian.org/Pics/openlogo-50.png)](https://www.debian.org "Debian Homepage")
[Wiki](/FrontPage "Debian Wiki Homepage")/

* [Login](/LTS?action=login)
* Comments
* [Info](/LTS?action=info)
* [Attachments](/LTS?action=AttachFile)
* More Actions:
  Raw Text
  Print View
  Render as Docbook
  Delete Cache
  ------------------------
  Check Spelling
  Like Pages
  Local Site Map
  ------------------------
  Rename Page
  Delete Page
  ------------------------
  Subscribe User
  ------------------------
  Remove Spam
  Revert to this revision
  Package Pages
  ------------------------
  Load
  Save
  SlideShow

# * [LTS](/LTS)

[Translation(s)](/DebianWiki/EditorGuide#translation): [English](/LTS) - [Deutsch](/de/LTS) - [Español](/es/LTS) - [Français](/fr/LTS) - [Italiano](/it/LTS) - [한국어](/ko/LTS) - [Português](/pt/LTS) - [Português (Brasil)](/pt_BR/LTS) - [Русский](/ru/LTS)

# Debian Long Term Support

Debian Long Term Support (LTS) is a project to extend the lifetime of all Debian stable releases to (at least) 5 years. Debian LTS is not handled by the Debian Security and Release teams, but by a separate group of volunteers and companies interested in making it a success.

Thus the Debian LTS team takes over security maintenance of the various releases once the Debian Security team stops its work.

![/!\](/htdocs/debwiki/img/alert.png "/!\")

LTS ([last modified 2024-08-15 02:46:47](/LTS?action=info))

* Debian [privacy policy](https://www.debian.org/legal/privacy), Wiki [team](/Teams/DebianWiki), [bugs](https://bugs.debian.org/wiki.debian.org) and [config](https://salsa.debian.org/debian/wiki.debian.org).
* Powered by [MoinMoin](https://moinmo.in/ "This site uses the MoinMoin Wiki software.") and [Python](https://moinmo.in/Python "MoinMoin is written in Python."), with hosting provided by [Metropolitan Area Network Darmstadt](https://www.man-da.de/).



=== Content from www.openwall.com_19099579_20250119_124701.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](2) [[next>]](4) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20210112125959.GI7776@suse.de>
Date: Tue, 12 Jan 2021 13:59:59 +0100
From: Marcus Meissner <meissner@...e.de>
To: OSS Security List <oss-security@...ts.openwall.com>
Subject: Security issues in hawk2 and crmsh

Hi folks,

We have received reports of 2 security issues for hawk and crmsh. These
hawk and crmsh projects refer to distros@ for their disclosure work.

These issues were reported to SUSE by Vincent Berg of Anvil Ventures.

1. Remote unauthenticated shell injection into the Hawk webserver

   Hawk is a High Availability specific webconsole with its own webserver.

   The Hawk webserver versions 2.2 up to now have a shell code injection
   issue via the "hawk_remember_me_id" cookie.

   It can be triggered from 2 places, via /login (with login_from_cookie) and /logout
   interfaces.

   The cookie value is passed unquoted and unfiltered from ruby to a
   shell command as commandline argument. (Using %[shellcommand] pattern.)

   As hawk is running as "hauser" usually, this allows unauthenticated
   remote attackers to gain access to the "hauser" account.

   Introduced by <https://github.com/ClusterLabs/hawk/commit/a939a099c6abdac383fbaede5e8655853222c887#diff-5349b200e8dc7ea82818115aa0aa1522>

   We have received CVE-2020-35458 from Mitre for this issue.

   Our team did a fix that does not use an subshell to invoke the command, patch is attached.

2. Local root privilege escalation via hawk and crmsh shell code injection

   crmsh is a commandline shell utility to query or configure a HA cluster.

   The Hawk webconsole contains a "setuid root" helper tool called "hawk_invoke", which
   allows hawk to call some root functionality in "crmsh".

   hawk_invoke allows calls from "hauser" or "vagrant" users only.

   hawk_invoke has a whitelist of "crmsh" commandline options, but does not do any
   filtering or blocking of stdin.

   The "crm history" sub-command is whitelisted by hawk_invoke.

   It opens its own sub-shell with various commands, one of them is "session create SESSION"
   This subcommand will create a directory "SESSION" by calling:

		if utils.pipe_cmd_nosudo("mkdir -p %s" % session_dir) != 0:

   which again does not filter the input.

   This allows local privilege escalation from "hauser" or "vagrant" to root.

   We have received CVE-2020-35459 from Mitre for this issue.

   Currently we will fix only the unsafe mkdir and add ; to the blacklist filtering, a patch is attached.

Due to shortness of time we did not yet do a full (re)audit of crmsh and hawk, we are currently working on that.

The whole hawk_invoke setuid root setup also needs a full redesign.

Ciao, Marcus

View attachment "[hawk2-CVE-2020-35458.patch](3/1)" of type "text/x-patch" (1974 bytes)

View attachment "[crmsh-CVE-2020-35459.patch](3/2)" of type "text/x-patch" (3341 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from bugzilla.suse.com_1ff4794f_20250119_124702.html ===


| Bugzilla – Bug 1179999 | VUL-0: CVE-2020-35459: crmsh: Root privilege escalation via hawk\_invoke and crmsh | Last modified: 2024-12-30 16:38:45 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1179999)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 1179999**](show_bug.cgi?id=1179999)
(CVE-2020-35459)
- VUL-0: CVE-2020-35459: crmsh: Root privilege escalation via hawk\_invoke and crmsh

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-0: CVE-2020-35459: crmsh: Root privilege escalation via hawk\_invoke and c...

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2020-35459 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | SUSE Security Incidents | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Novell Products | | [Component:](describecomponents.cgi?product=SUSE Security Incidents "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Incidents ([show other bugs](buglist.cgi?component=Incidents&product=SUSE%20Security%20Incidents&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other Other | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P1 - Urgent **Severity**: Critical | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Xin Liang | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Security Team bot | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") | <https://smash.suse.de/issue/273298/> | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | CVSSv3.1:SUSE:CVE-2020-35459:8.4:(AV:... | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2020-12-14 12:16 UTC by Marcus Meissner | | --- | --- | | Modified: | 2024-12-30 16:38 UTC ([History](show_activity.cgi?id=1179999)) | | CC List: | 12 users (show)  atoptsoglou dakechi dmaiocchi gianluca.gabrielli jsegitz meissner puzel shap-staff tserong wolfgang.frisch xliang zzhou | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=1179999) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=1179999&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=1179999&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Comment 3](show_bug.cgi?id=1179999#c3)  Dario Maiocchi   2020-12-14 16:51:53 UTC  ``` thx ``` [Comment 8](show_bug.cgi?id=1179999#c8)  Xin Liang   2020-12-18 08:39:03 UTC  ``` Hi Marcus,  Please see the patch I created in [https://build.suse.de/package/view_file/home:XinLiang:branches:SUSE:SLE-15-SP2:Update/crmsh/0001-Fix-history-use-Path.mkdir-instead-of-mkdir-command-.patch?expand=1](https://build.suse.de/package/view_file/home%3AXinLiang%3Abranches%3ASUSE%3ASLE-15-SP2%3AUpdate/crmsh/0001-Fix-history-use-Path.mkdir-instead-of-mkdir-command-.patch?expand=1)  Changes include: * Use Path.mkdir instead of system mkdir command * Consider contain ";" in directory name was not sane  Please review and give me feedback when you have time  Thanks! ``` [Comment 12](show_bug.cgi?id=1179999#c12)  Xin Liang   2020-12-25 02:18:39 UTC  ``` For 12sp4/sp5 and 12sp3, changes include:  * Use utils.mkdirp instead of system mkdir command * Consider contain ";" in directory name was not sane ``` [Comment 19](show_bug.cgi?id=1179999#c19)  Johannes Segitz   2021-01-05 08:13:59 UTC  ``` Everytime you can avoid using a shell construct and can do it in plain python it's better.   I'll have a look now ``` [Comment 24](show_bug.cgi?id=1179999#c24)  Marcus Meissner   2021-01-12 13:01:11 UTC  ``` I just posted to oss-security ``` [Comment 25](show_bug.cgi?id=1179999#c25)  Marcus Meissner   2021-01-12 13:01:28 UTC  ``` please feel free to commit this change to upstream git ``` [Comment 26](show_bug.cgi?id=1179999#c26)  Swamp Workflow Management   2021-01-12 17:21:19 UTC  ``` SUSE-SU-2021:0085-1: An update that fixes one vulnerability is now available.  Category: security (important) Bug References: 1179999 CVE References: CVE-2020-35459 JIRA References:  Sources used: SUSE Linux Enterprise High Availability 15-SP1 (src):    crmsh-4.2.0+git.1607075079.a25648d8-3.51.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 27](show_bug.cgi?id=1179999#c27)  Swamp Workflow Management   2021-01-12 17:22:17 UTC  ``` SUSE-SU-2021:0086-1: An update that fixes one vulnerability is now available.  Category: security (important) Bug References: 1179999 CVE References: CVE-2020-35459 JIRA References:  Sources used: SUSE Linux Enterprise High Availability 15-SP2 (src):    crmsh-4.2.0+git.1607075079.a25648d8-5.32.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 28](show_bug.cgi?id=1179999#c28)  Swamp Workflow Management   2021-01-12 17:24:20 UTC  ``` SUSE-SU-2021:0084-1: An update that fixes one vulnerability is now available.  Category: security (important) Bug References: 1179999 CVE References: CVE-2020-35459 JIRA References:  Sources used: SUSE Linux Enterprise High Availability 12-SP3 (src):    crmsh-3.0.4+git.1607490926.e492f845-13.56.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 29](show_bug.cgi?id=1179999#c29)  Swamp Workflow Management   2021-01-12 17:25:21 UTC  ``` SUSE-SU-2021:0083-1: An update that fixes one vulnerability is now available.  Category: security (important) Bug References: 1179999 CVE References: CVE-2020-35459 JIRA References:  Sources used: SUSE Linux Enterprise High Availability 12-SP5 (src):    crmsh-4.1.0+git.1607482714.9633b80d-2.50.1 SUSE Linux Enterprise High Availability 12-SP4 (src):    crmsh-4.1.0+git.1607482714.9633b80d-2.50.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 30](show_bug.cgi?id=1179999#c30)  Swamp Workflow Management   2021-01-12 17:26:21 UTC  ``` SUSE-SU-2021:0087-1: An update that fixes one vulnerability is now available.  Category: security (important) Bug References: 1179999 CVE References: CVE-2020-35459 JIRA References:  Sources used: SUSE Linux Enterprise High Availability 15 (src):    crmsh-4.2.0+git.1607075079.a25648d8-3.56.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 31](show_bug.cgi?id=1179999#c31)  Swamp Workflow Management   2021-01-13 20:17:23 UTC  ``` openSUSE-SU-2021:0055-1: An update that fixes one vulnerability is now available.  Category: security (important) Bug References: 1179999 CVE References: CVE-2020-35459 JIRA References:  Sources used: openSUSE Leap 15.2 (src):    crmsh-4.2.0+git.1607075079.a25648d8-lp152.4.39.1 ``` [Comment 32](show_bug.cgi?id=1179999#c32)  Swamp Workflow Management   2021-01-16 14:35:22 UTC  ``` openSUSE-SU-2021:0073-1: An update that fixes one vulnerability is now available.  Category: security (important) Bug References: 1179999 CVE References: CVE-2020-35459 JIRA References:  Sources used: openSUSE Leap 15.1 (src):    crmsh-4.2.0+git.1607075079.a25648d8-lp151.2.45.1 ``` [Comment 38](show_bug.cgi?id=1179999#c38)  Swamp Workflow Management   2021-03-08 20:18:13 UTC  ``` SUSE-SU-2021:0722-1: An update that solves two vulnerabilities and has four fixes is now available.  Category: security (important) Bug References: 1154927,1178454,1178869,1179999,1180571,1180688 CVE References: CVE-2020-35459,CVE-2021-3020 JIRA References:  Sources used: SUSE Linux Enterprise High Availability 12-SP5 (src):    crmsh-4.1.0+git.1614156984.f4f5e146-2.56.2 SUSE Linux Enterprise High Availability 12-SP4 (src):    crmsh-4.1.0+git.1614156984.f4f5e146-2.56.2  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 40](show_bug.cgi?id=1179999#c40)  Gianluca Gabrielli   2021-03-11 18:32:45 UTC  ``` According to our tracking hawk2 is tagged as affected also for SUSE:SLE-12-SP2:Update, but no fix was submitted. Could you please give me some context about it? ``` [Comment 42](show_bug.cgi?id=1179999#c42)  Swamp Workflow Management   2021-03-11 23:29:59 UTC  ``` SUSE-SU-2021:0771-1: An update that solves two vulnerabilities and has three fixes is now available.  Category: security (important) Bug References: 1154927,1178454,1178869,1179999,1180571 CVE References: CVE-2020-35459,CVE-2021-3020 JIRA References:  Sources used: SUSE Linux Enterprise High Availability 12-SP3 (src):    crmsh-3.0.4+git.1614156978.4c1dc46d-13.62.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 43](show_bug.cgi?id=1179999#c43)  Swamp Workflow Management   2021-03-12 20:20:28 UTC  ``` SUSE-SU-2021:0782-1: An update that solves two vulnerabilities, contains one feature and has 5 fixes is now available.  Category: security (important) Bug References: 1154927,1178454,1178869,1179999,1180137,1180571,1180688 CVE References: CVE-2020-35459,CVE-2021-3020 JIRA References: ECO-1658 Sources used: SUSE Linux Enterprise High Availability 15-SP1 (src):    crmsh-4.3.0+20210219.5d1bf034-3.57.3  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 44](show_bug.cgi?id=1179999#c44)  Swamp Workflow Management   2021-03-12 20:23:29 UTC  ``` SUSE-SU-2021:0781-1: An update that solves two vulnerabilities, contains one feature and has 7 fixes is now available.  Category: security (important) Bug References: 1154927,1178454,1178869,1179999,1180126,1180137,1180571,1180688,1181415 CVE References: CVE-2020-35459,CVE-2021-3020 JIRA References: ECO-1658 Sources used: SUSE Linux Enterprise High Availability 15-SP2 (src):    crmsh-4.3.0+20210305.9db5c9a8-5.42.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 45](show_bug.cgi?id=1179999#c45)  Swamp Workflow Management   2021-03-14 17:28:56 UTC  ``` openSUSE-SU-2021:0410-1: An update that solves two vulnerabilities and has 7 fixes is now available.  Category: security (important) Bug References: 1154927,1178454,1178869,1179999,1180126,1180137,1180571,1180688,1181415 CVE References: CVE-2020-35459,CVE-2021-3020 JIRA References:  Sources used: openSUSE Leap 15.2 (src):    crmsh-4.3.0+20210305.9db5c9a8-lp152.4.47.1 ``` [Comment 46](show_bug.cgi?id=1179999#c46)  Swamp Workflow Management   2021-03-17 20:47:38 UTC  ``` SUSE-SU-2021:0806-1: An update that solves two vulnerabilities, contains one feature and has 5 fixes is now available.  Category: security (important) Bug References: 1154927,1178454,1178869,1179999,1180137,1180571,1180688 CVE References: CVE-2020-35459,CVE-2021-3020 JIRA References: ECO-1658 Sources used: SUSE Linux Enterprise High Availability 15 (src):    crmsh-4.3.0+20210219.5d1bf034-3.62.3  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 47](show_bug.cgi?id=1179999#c47)  Swamp Workflow Management   2021-03-24 14:26:57 UTC  ``` SUSE-SU-2021:0941-1: An update that solves two vulnerabilities and has one errata is now available.  Category: security (important) Bug References: 1179999,1182165,1182166 CVE References: CVE-2020-35459,CVE-2021-25314 JIRA References:  Sources used: SUSE Linux Enterprise High Availability 15-SP2 (src):    hawk2-2.6.3+git.1614684118.af555ad9-3.27.1 SUSE Linux Enterprise High Availability 15-SP1 (src):    hawk2-2.6.3+git.1614684118.af555ad9-3.27.1 SUSE Linux Enterprise High Availability 15 (src):    hawk2-2.6.3+git.1614684118.af555ad9-3.27.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 48](show_bug.cgi?id=1179999#c48)  Swamp Workflow Management   2021-03-24 14:28:15 UTC  ``` SUSE-SU-2021:0942-1: An update that solves two vulnerabilities and has one errata is now available.  Category: security (important) Bug References: 1179999,1182165,1182166 CVE References: CVE-2020-35459,CVE-2021-25314 JIRA References:  Sources used: SUSE Linux Enterprise High Availability 12-SP5 (src):    hawk2-2.6.3+git.1614685906.812c31e9-3.30.1 SUSE Linux Enterprise High Availability 12-SP4 (src):    hawk2-2.6.3+git.1614685906.812c31e9-3.30.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 49](show_bug.cgi?id=1179999#c49)  Swamp Workflow Management   2021-03-24 14:37:14 UTC  ``` SUSE-SU-2021:0943-1: An update that solves two vulnerabilities and has one errata is now available.  Category: security (important) Bug References: 1179999,1182165,1182166 CVE References: CVE-2020-35459,CVE-2021-25314 JIRA References:  Sources used: SUSE Linux Enterprise High Availability 12-SP3 (src):    hawk2-2.6.3+git.1614685906.812c31e9-2.42.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 62](show_bug.cgi?id=1179999#c62)  Swamp Workflow Management   2021-07-02 19:16:18 UTC  ``` SUSE-SU-2021:2238-1: An update that solves one vulnerability, contains one feature and has 5 fixes is now available.  Category: security (moderate) Bug References: 1163460,1175982,1179999,1184465,1185423,1187553 CVE References: CVE-2020-35459 JIRA References: SLE-17979 Sources used: SUSE Linux Enterprise High Availability 15-SP1 (src):    crmsh-4.3.1+20210624.67223df2-3.69.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 63](show_bug.cgi?id=1179999#c63)  Swamp Workflow Management   2021-07-02 19:17:55 UTC  ``` SUSE-SU-2021:2239-1: An update that solves one vulnerability, contains one feature and has 5 fixes is now available.  Category: security (moderate) Bug References: 1163460,1175982,1179999,1184465,1185423,1187553 CVE References: CVE-2020-35459 JIRA References: SLE-17979 Sources used: SUSE Linux Enterprise High Availability 15 (src):    crmsh-4.3.1+20210624.67223df2-3.74.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 64](show_bug.cgi?id=1179999#c64)  Swamp Workflow Management   2021-07-21 13:19:16 UTC  ``` openSUSE-SU-2021:2435-1: An update that solves one vulnerability, contains one feature and has 5 fixes is now available.  Category: security (moderate) Bug References: 1163460,1175982,1179999,1184465,1185423,1187553 CVE References: CVE-2020-35459 JIRA References: SLE-17979 Sources used: openSUSE Leap 15.3 (src):    crmsh-4.3.1+20210702.4e0ee8fb-5.59.1 ``` [Comment 65](show_bug.cgi?id=1179999#c65)  Swamp Workflow Management   2021-07-21 13:34:33 UTC  ``` SUSE-SU-2021:2435-1: An update that solves one vulnerability, contains one feature and has 5 fixes is now available.  Category: security (moderate) Bug References: 1163460,1175982,1179999,1184465,1185423,1187553 CVE References: CVE-2020-35459 JIRA References: SLE-17979 Sources used: SUSE Linux Enterprise High Availability 15-SP3 (src):    crmsh-4.3.1+20210702.4e0ee8fb-5.59.1 SUSE Linux Enterprise High Availability 15-SP2 (src):    crmsh-4.3.1+20210702.4e0ee8fb-5.59.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 66](show_bug.cgi?id=1179999#c66)  Swamp Workflow Management   2021-07-24 19:18:32 UTC  ``` openSUSE-SU-2021:1087-1: An update that solves one vulnerability, contains one feature and has 5 fixes is now available.  Category: security (moderate) Bug References: 1163460,1175982,1179999,1184465,1185423,1187553 CVE References: CVE-2020-35459 JIRA References: SLE-17979 Sources used: openSUSE Leap 15.2 (src):    crmsh-4.3.1+20210702.4e0ee8fb-lp152.4.59.1 ``` [Comment 68](show_bug.cgi?id=1179999#c68)  Swamp Workflow Management   2021-09-16 22:29:04 UTC  ``` # maintenance_jira_update_notice SUSE-SU-2021:3121-1: An update that solves one vulnerability and has one errata is now available.  Category: security (important) Bug References: 1179999,1189641 CVE References: CVE-2020-35459 JIRA References:  Sources used: SUSE Linux Enterprise High Availability 12-SP5 (src):    crmsh-4.1.1+git.1630047134.803a70f2-2.65.1 SUSE Linux Enterprise High Availability 12-SP4 (src):    crmsh-4.1.1+git.1630047134.803a70f2-2.65.1  NOTE: This line indicates an update has been released for the listed product(s). At times this might be only a partial fix. If you have questions please reach out to maintenance coordination. ``` [Comment 69](show_bug.cgi?id=1179999#c69)  Roger Zhou   2022-03-10 05:53:24 UTC  ``` clean up the stale state ``` [Comment 70](show_bug.cgi?id=1179999#c70)  Gianluca Gabrielli   2022-03-10 08:21:48 UTC  ``` Still missing submissions for:  - SUSE:SLE-12-SP2:Update/hawk2  - SUSE:SLE-12-SP2:Update/crmsh  - SUSE:SLE-12-SP2:Update/crmsh  @Roger, please _do not_ close security-related issues, instead reassign them back to security-team@suse.de. ``` [Comment 71](show_bug.cgi?id=1179999#c71)  Diego Vinicius Akechi   2022-03-10 08:44:08 UTC  ``` The decision of not backporting this to 12-SP2 was made in agreement with PM giving we were really close to the EOL of this service pack.  What are the reasons to revisit and ask for that again? ``` [Comment 77](show_bug.cgi?id=1179999#c77)  Gianluca Gabrielli   2022-03-10 13:18:16 UTC  ``` So, we can close this issue. Thanks to everybody. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=1179999)
* - [XML](show_bug.cgi?ctype=xml&id=1179999)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=1179999)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1179999)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)



=== Content from idp-portal.suse.com_6b95d262_20250119_141810.html ===

## UCS

# Welcome to Univention Corporate Server

## JavaScript required

A browser with JavaScript enabled is required in order to use this service.

When using Internet Explorer, please check your security settings and add this address to your trusted sites.



=== Content from github.com_9474d84a_20250119_124705.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FClusterLabs%2Fcrmsh%2Fblob%2Fa403aa15f3ea575adfe5e43bf2a31c9f9094fcda%2Fcrmsh%2Fhistory.py)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FClusterLabs%2Fcrmsh%2Fblob%2Fa403aa15f3ea575adfe5e43bf2a31c9f9094fcda%2Fcrmsh%2Fhistory.py)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=ClusterLabs%2Fcrmsh)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ClusterLabs](/ClusterLabs)
/
**[crmsh](/ClusterLabs/crmsh)**
Public

* [Notifications](/login?return_to=%2FClusterLabs%2Fcrmsh) You must be signed in to change notification settings
* [Fork
  93](/login?return_to=%2FClusterLabs%2Fcrmsh)
* [Star
   132](/login?return_to=%2FClusterLabs%2Fcrmsh)

* [Code](/ClusterLabs/crmsh)
* [Issues
  64](/ClusterLabs/crmsh/issues)
* [Pull requests
  22](/ClusterLabs/crmsh/pulls)
* [Actions](/ClusterLabs/crmsh/actions)
* [Projects
  0](/ClusterLabs/crmsh/projects)
* [Wiki](/ClusterLabs/crmsh/wiki)
* [Security](/ClusterLabs/crmsh/security)
* [Insights](/ClusterLabs/crmsh/pulse)

Additional navigation options

* [Code](/ClusterLabs/crmsh)
* [Issues](/ClusterLabs/crmsh/issues)
* [Pull requests](/ClusterLabs/crmsh/pulls)
* [Actions](/ClusterLabs/crmsh/actions)
* [Projects](/ClusterLabs/crmsh/projects)
* [Wiki](/ClusterLabs/crmsh/wiki)
* [Security](/ClusterLabs/crmsh/security)
* [Insights](/ClusterLabs/crmsh/pulse)

## Files

 a403aa1
## Breadcrumbs

1. [crmsh](/ClusterLabs/crmsh/tree/a403aa15f3ea575adfe5e43bf2a31c9f9094fcda)
2. /[crmsh](/ClusterLabs/crmsh/tree/a403aa15f3ea575adfe5e43bf2a31c9f9094fcda/crmsh)
/
# history.py

Copy path Blame  Blame
## Latest commit

## History

[History](/ClusterLabs/crmsh/commits/a403aa15f3ea575adfe5e43bf2a31c9f9094fcda/crmsh/history.py)1053 lines (932 loc) · 35.3 KB a403aa1
## Breadcrumbs

1. [crmsh](/ClusterLabs/crmsh/tree/a403aa15f3ea575adfe5e43bf2a31c9f9094fcda)
2. /[crmsh](/ClusterLabs/crmsh/tree/a403aa15f3ea575adfe5e43bf2a31c9f9094fcda/crmsh)
/
# history.py

Top
## File metadata and controls

* Code
* Blame

1053 lines (932 loc) · 35.3 KB[Raw](https://github.com/ClusterLabs/crmsh/raw/a403aa15f3ea575adfe5e43bf2a31c9f9094fcda/crmsh/history.py)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000# Copyright (C) 2011 Dejan Muhamedagic <dmuhamedagic@suse.de># Copyright (C) 2013-2016 Kristoffer Gronlund <kgronlund@suse.com># See COPYING for license information.
import osimport timeimport reimport globimport configparser
from . import configfrom . import constantsfrom . import userdirfrom . import logtimefrom . import logparserfrom . import utils
from .msg import common\_debug, common\_warn, common\_err, common\_error, common\_info, warn\_once
\_LOG\_FILES = ("ha-log.txt", "messages", "ha-log", "cluster-log.txt", "journal.log", "pacemaker.log")
## hb\_report interface## read hb\_report generated report, show interesting stuff, search# through logs, get PE input files, get log slices (perhaps even# coloured nicely!)#
def is\_our\_log(s, node\_l): return logtime.syslog2node(s) in node\_l
def log2node(log): return os.path.basename(os.path.dirname(log))
def is\_log(p): return os.path.isfile(p) and os.path.getsize(p) > 0
\_PE\_NUM\_RE = re.compile("pe-[^-]+-([0-9]+)[.]")
def get\_pe\_num(pe\_file): m = \_PE\_NUM\_RE.search(pe\_file) if m: return m.group(1) return "-1"
def pe\_file\_in\_range(pe\_f, a): if not a: return pe\_f if a[0] <= int(get\_pe\_num(pe\_f)) <= a[1]: return pe\_f return None
def read\_log\_info(log): 'Read <log>.info and return logfile and next pos' s = utils.file2str(log + ".info") m = re.match(r"^(.+)\s+(\d+)$", s or '') if m: logf, pos = m.groups() return logf, int(pos) return '', -1
def append\_newlogs(outdir, to\_update): ''' Append new logs fetched from nodes. Update <log>.info with new next pos ''' if not os.path.isdir(outdir): return for node, rptlog, logfile, nextpos in to\_update: fl = glob.glob("%s/\*%s\*" % (outdir, node)) if not fl: continue utils.append\_file(rptlog, fl[0])
 newpos = nextpos + os.stat(fl[0]).st\_size try: f = open(rptlog + ".info", "w") f.write("%s %d\n" % (logfile, newpos)) f.close() except IOError as msg: common\_err("couldn't the update %s.info: %s" % (rptlog, msg))
def rpt\_pe2t\_str(rpt\_pe\_file): '''Convert report's pe\_file path to transition string.''' node = os.path.basename(os.path.dirname(os.path.dirname(rpt\_pe\_file))) return logparser.trans\_str(node, rpt\_pe\_file)
def mkarchive(idir): "Create an archive from a directory" home = userdir.gethomedir() if not home: common\_err("no home directory, nowhere to pack report") return False archive = '%s.tar.bz2' % os.path.join(home, os.path.basename(idir)) cmd = "tar -C '%s/..' -cj -f '%s' %s" % \ (idir, archive, os.path.basename(idir)) if utils.pipe\_cmd\_nosudo(cmd) != 0: common\_err('could not pack report, command "%s" failed' % cmd) return False else: print("Report saved in '%s'" % archive) return True
CH\_SRC, CH\_TIME, CH\_UPD = 1, 2, 3
class Report(object): ''' A hb\_report class. ''' live\_recent = 6\*60\*60 # recreate live hb\_report once every 6 hours short\_live\_recent = 60 # update once a minute nodecolors = ("NORMAL", "GREEN", "CYAN", "MAGENTA", "YELLOW", "WHITE", "BLUE", "RED") session\_sub = "session" report\_cache\_dir = os.path.join(config.path.cache, 'history-%s' % (utils.getuser())) outdir = os.path.join(report\_cache\_dir, "psshout") errdir = os.path.join(report\_cache\_dir, "pssherr")
 def \_\_init\_\_(self): # main source attributes self.\_creation\_time = "--:--:--" self.\_creator = "unknown" self.source = None self.from\_dt = None self.to\_dt = None self.log\_l = [] self.setnodes = [] # optional # derived self.loc = None self.ready = False self.nodecolor = {} self.logparser = None self.desc = None self.cib = None self.node\_l = [] self.last\_live\_update = 0 self.detail = 0 self.log\_filter\_out = [] self.log\_filter\_out\_re = [] # change\_origin may be 0, CH\_SRC, CH\_TIME, CH\_UPD # depending on the change\_origin, we update our attributes self.change\_origin = CH\_SRC logtime.set\_year()
 def error(self, s): common\_err("%s: %s" % (self.source, s))
 def warn(self, s): common\_warn("%s: %s" % (self.source, s))
 def rsc\_list(self): return self.cib.resources()
 def node\_list(self): return self.node\_l
 def peinputs\_list(self): if self.logparser: return [x.pe\_num for x in self.logparser.get\_transitions()] return []
 def session\_subcmd\_list(self): return ["save", "load", "pack", "delete", "list", "update"]
 def session\_list(self): d = self.get\_session\_dir(None) return os.listdir(d).sort() if os.path.isdir(d) else []
 def unpack\_report(self, tarball): ''' Unpack hb\_report tarball. Don't unpack if the directory already exists! ''' bfname = os.path.basename(tarball) parentdir = os.path.dirname(tarball) common\_debug("tarball: %s, in dir: %s" % (bfname, parentdir)) if bfname.endswith(".tar.bz2"): loc = tarball.replace(".tar.bz2", "") tar\_unpack\_option = "j" elif bfname.endswith(".tar.gz"): # hmm, must be ancient loc = tarball.replace(".tar.gz", "") tar\_unpack\_option = "z" elif bfname.endswith(".tar.xz"): loc = tarball.replace(".tar.xz", "") tar\_unpack\_option = "J" else: self.error("this doesn't look like a report tarball") return None self.set\_change\_origin(CH\_SRC) if os.path.isdir(loc): if (os.stat(tarball).st\_mtime - os.stat(loc).st\_mtime) < 60: return loc utils.rmdir\_r(loc) cwd = os.getcwd() if parentdir: try: os.chdir(parentdir) except OSError as msg: self.error(msg) return None try: rc, tf\_loc = utils.get\_stdout("tar -t%s < %s 2> /dev/null | head -1" % (tar\_unpack\_option, utils.quote(bfname))) if os.path.abspath(tf\_loc) != os.path.abspath(loc): common\_debug("top directory in tarball: %s, doesn't match the tarball name: %s" % (tf\_loc, loc)) loc = os.path.join(os.path.dirname(loc), tf\_loc) except Exception as msg: common\_err("%s: %s" % (tarball, msg)) return None common\_debug("tar -x%s < %s" % (tar\_unpack\_option, utils.quote(bfname))) rc = utils.pipe\_cmd\_nosudo("tar -x%s < %s" % (tar\_unpack\_option, utils.quote(bfname))) if self.source == "live": os.remove(bfname) os.chdir(cwd) if rc != 0: return None return loc
 def short\_pe\_path(self, pe\_file): return pe\_file.replace("%s/" % self.loc, "")
 def get\_nodes(self): def check\_node(p): pp = os.path.join(self.loc, p) if os.path.isfile(os.path.join(pp, 'cib.xml')): return p return os.path.isdir(pp) and self.find\_node\_log(p) nodes = sorted([os.path.basename(p) for p in os.listdir(self.loc) if check\_node(p)]) if self.source == "live" and len(nodes) == 0: nodes = [utils.this\_node()] return nodes
 def check\_nodes(self): 'Verify if the nodes in cib match the nodes in the report.' nl = self.get\_nodes() if not nl: self.error("no nodes in report") return False for n in self.node\_l: if n not in nl: self.warn("node %s not in report" % n) else: nl.remove(n) return True
 def check\_report(self): ''' Check some basic properties of the report. ''' if not self.loc: return False if not os.access(self.desc, os.F\_OK): self.error("no description file in the report") return False if not self.check\_nodes(): return False return True
 def \_live\_loc(self): return os.path.join(self.report\_cache\_dir, "live")
 def is\_live\_recent(self): ''' Look at the last live report. If it's recent enough, return True. ''' try: last\_ts = os.stat(self.desc).st\_mtime return time.time() - last\_ts <= self.live\_recent except: return False
 def is\_live\_very\_recent(self): ''' Look at the last live report. If it's recent enough, return True. ''' return (time.time() - self.last\_live\_update) <= self.short\_live\_recent
 def prevent\_live\_update(self): ''' Don't update live report if to\_time is set (not open end). ''' return self.to\_dt is not None
 def find\_node\_log(self, node): p = os.path.join(self.loc, node) for lf in \_LOG\_FILES: if is\_log(os.path.join(p, lf)): return os.path.join(p, lf) return None
 def find\_logs(self): 'Return a list of logs found (one per node).' l = [] for node in self.node\_l: log = self.find\_node\_log(node) if log: l.append(log) else: self.warn("no log found for node %s" % node) if self.source == "live" and node == utils.this\_node(): self.warn("Data collection fails if '%s' is not in sudoers file" % (utils.getuser())) if len(l) == 0: for lf in \_LOG\_FILES: global\_log = os.path.join(self.loc, lf) if os.path.isfile(global\_log): l.append(global\_log) break return l
 def unpack\_new\_peinputs(self, node, pe\_l): ''' Untar PE inputs fetched from nodes. ''' if not os.path.isdir(self.outdir): return fl = glob.glob("%s/\*%s\*" % (self.outdir, node)) if not fl: return -1 u\_dir = os.path.join(self.loc, node) return utils.pipe\_cmd\_nosudo("tar -C %s -x < %s" % (u\_dir, fl[0]))
 def read\_new\_log(self, node): ''' Get a list of log lines. The log is put in self.outdir/node by parallax. ''' if not os.path.isdir(self.outdir): return [] fl = glob.glob("%s/\*%s\*" % (self.outdir, node)) if not fl: return [] try: f = open(fl[0]) except IOError as msg: common\_err("open %s: %s" % (fl[0], msg)) return [] return f.readlines()
 def update\_live\_report(self, next\_loglines, next\_peinputs): ''' Update the existing live report, if it's older than self.short\_live\_recent: - append newer logs - get new PE inputs TODO: FIXME: broken now ''' common\_info("Fetching updated logs from cluster nodes. Please wait...") common\_debug("Candidate logs: %s" % (self.log\_l)) to\_update = [] for rptlog in self.log\_l: node = log2node(rptlog) logf, pos = read\_log\_info(rptlog) if logf: common\_debug("Updating %s : %s : %s : %s" % (node, rptlog, logf, pos)) to\_update.append([node, rptlog, logf, pos]) if not to\_update: common\_info("No updatable logs found (missing .info for logs)") return False
 utils.rmdir\_r(self.outdir) utils.rmdir\_r(self.errdir) self.last\_live\_update = time.time()
 end\_time = self.\_str\_dt(self.get\_rpt\_dt(self.to\_dt, "bottom")) rc1 = next\_loglines(to\_update, self.outdir, self.errdir, end\_time) append\_newlogs(self.outdir, to\_update)
 # read new logs # find any missing pefiles # return list of missing pefiles # fetch missing pefiles from nodes # unpack missing pefiles # node\_pe\_l: [(node, [pefile ...]) ...] node\_pe\_l = self.logparser.scan(mode='refresh') rc2 = next\_peinputs(node\_pe\_l, self.outdir, self.errdir) unpack\_rc = 0 for node, pe\_l in node\_pe\_l: unpack\_rc |= self.unpack\_new\_peinputs(node, pe\_l) rc2 |= (unpack\_rc == 0) utils.rmdir\_r(self.outdir) utils.rmdir\_r(self.errdir)
 return rc1 and rc2
 def get\_live\_report(self): loc = None with utils.lock(self.report\_cache\_dir): loc = self.new\_live\_report() return loc
 def manage\_live\_report(self, force=False, no\_live\_update=False): ''' Update or create live report. ''' d = self.\_live\_loc()
 created\_now = False
 # Create live report if it doesn't exist if not d or not os.path.isdir(d): created\_now, d = True, self.get\_live\_report() if not self.loc: # the live report is there, but we were just invoked self.loc = d self.report\_setup() if not force and self.is\_live\_recent(): # try just to refresh the live report if self.to\_dt or self.is\_live\_very\_recent() or no\_live\_update: return self.\_live\_loc() \_HAS\_PARALLAX = False try: from .crm\_pssh import next\_loglines, next\_peinputs \_HAS\_PARALLAX = True except: pass if \_HAS\_PARALLAX: rc = None with utils.lock(self.report\_cache\_dir): rc = self.update\_live\_report(next\_loglines, next\_peinputs) if rc is None: return None if rc: self.set\_change\_origin(CH\_UPD) return self.\_live\_loc() else: warn\_once("parallax library not installed, slow live updates ahead") if not created\_now: return self.get\_live\_report() return self.loc
 def new\_live\_report(self): ''' Run the report command to get logs now. ''' from . import ui\_report
 extcmd = ui\_report.report\_tool() if extcmd is None: self.error("No reporting tool found") return None
 d = self.\_live\_loc() utils.rmdir\_r(d) tarball = "%s.tar.bz2" % d to\_option = "" if self.to\_dt: to\_option = "-t '%s'" % logtime.human\_date(self.to\_dt) nodes\_option = "" if self.setnodes: nodes\_option = "'-n %s'" % ' '.join(self.setnodes) if utils.pipe\_cmd\_nosudo("mkdir -p %s" % os.path.dirname(d)) != 0: return None common\_info("Retrieving information from cluster nodes, please wait...") rc = utils.pipe\_cmd\_nosudo("%s -Z -Q -f '%s' %s %s %s %s" % (extcmd, self.from\_dt.ctime(), to\_option, nodes\_option, str(config.core.report\_tool\_options), d)) if rc != 0: if os.path.isfile(tarball): self.warn("report thinks it failed, proceeding anyway") else: self.error("report failed") return None self.last\_live\_update = time.time() return self.unpack\_report(tarball)
 def set\_source(self, src): 'Set our source.' if self.source != src: self.set\_change\_origin(CH\_SRC) self.source = src self.loc = None self.ready = False
 def set\_period(self, from\_dt, to\_dt): ''' Set from/to\_dt. ''' common\_debug("setting report times: <%s> - <%s>" % (from\_dt, to\_dt)) self.from\_dt = from\_dt self.to\_dt = to\_dt
 refresh = False if self.source == "live" and self.ready: top\_dt = self.get\_rpt\_dt(None, "top") if top\_dt is None: return False refresh = from\_dt and top\_dt > from\_dt if refresh: self.set\_change\_origin(CH\_UPD) return self.refresh\_source(force=True) else: self.set\_change\_origin(CH\_TIME) self.report\_setup() return True
 def set\_detail(self, detail\_lvl): ''' Set the detail level. ''' self.detail = int(detail\_lvl) if self.logparser: self.logparser.detail = self.detail
 def set\_nodes(self, \*args): ''' Allow user to set the node list (necessary if the host is not part of the cluster). ''' self.setnodes = args
 def get\_cib\_loc(self): if not self.node\_l: return "" return os.path.join(self.loc, self.node\_l[0], "cib.xml")
 def read\_cib(self): ''' Get some information from the report's CIB (node list, resource list, groups). If "live" then use cibadmin. ''' self.cib = logparser.CibInfo(self.loc)
 def set\_node\_colors(self): i = 0 for n in self.node\_l: self.nodecolor[n] = self.nodecolors[i] i = (i+1) % len(self.nodecolors)
 def \_report\_setup\_source(self): constants.pcmk\_version = None # is this an hb\_report or a crm\_report? for descname in ("description.txt", "report.summary"): self.desc = os.path.join(self.loc, descname) if os.path.isfile(self.desc): yr = os.stat(self.desc).st\_mtime common\_debug("Found %s, created %s" % (descname, yr)) self.\_creation\_time = time.strftime("%a %d %b %H:%M:%S %Z %Y", time.localtime(yr)) if descname == 'report.summary': self.\_creator = "crm\_report" else: self.\_creator = 'unknown' logtime.set\_year(yr) break else: self.error("Invalid report: No description found") return
 self.node\_l = self.get\_nodes() self.set\_node\_colors() self.log\_l = self.find\_logs() self.read\_cib()
 def \_report\_setup\_update(self): l = self.get\_nodes() if self.node\_l != l: self.node\_l = l self.set\_node\_colors() self.log\_l = self.find\_logs() self.read\_cib()
 def report\_setup(self): if self.change\_origin == 0: return False if not self.loc: return False
 if self.change\_origin == CH\_SRC: self.\_report\_setup\_source() elif self.change\_origin == CH\_UPD: self.\_report\_setup\_update()
 if self.logparser is None: self.logparser = logparser.LogParser(self.loc, self.cib, self.log\_l, self.detail) self.logparser.scan() self.logparser.set\_timeframe(self.from\_dt, self.to\_dt)
 self.ready = self.check\_report() self.set\_change\_origin(0)
 def prepare\_source(self, no\_live\_update=False): ''' Unpack a report tarball. For "live", create an ad-hoc report and unpack it somewhere in the cache area. Parse the period. ''' if not self.source: common\_error("no source set yet") return False if self.ready and (no\_live\_update or self.source != "live"): return True if self.source == "live": self.loc = self.manage\_live\_report(no\_live\_update=no\_live\_update) elif os.path.isfile(self.source): self.loc = self.unpack\_report(self.source) elif os.path.isdir(self.source): self.loc = self.source if not self.loc: return False self.report\_setup() return self.ready
 def refresh\_source(self, force=False): ''' Refresh report from live, or clear metadata cache for non-live report ''' if self.source == "live": self.last\_live\_update = 0 self.loc = self.manage\_live\_report(force=force) self.report\_setup() return self.ready else: print("Refreshing log data...") if not self.ready: self.set\_change\_origin(CH\_TIME) self.prepare\_source() missing\_pes = self.logparser.scan(mode='force') if len(missing\_pes): print("%d transitions, %d events and %d missing PE input files." % tuple(self.logparser.count() + (len(missing\_pes),))) else: print("%d transitions, %d events." % self.logparser.count())
 def \_str\_nodecolor(self, node, s): try: clr = self.nodecolor[node] except: return s try: return "${%s}%s${NORMAL}" % (clr, s) except: s = s.replace("${", "$.{") return "${%s}%s${NORMAL}" % (clr, s)
 def match\_filter\_out(self, s): for regexp in self.log\_filter\_out\_re: if regexp.search(s): return True return False
 def display\_logs(self, l): def color\_nodes(s): node = logtime.syslog2node(s) return self.\_str\_nodecolor(node, s) if node is not None else s
 if self.log\_filter\_out\_re: utils.page\_gen(color\_nodes(x) for x in l if not self.match\_filter\_out(x)) else: utils.page\_gen(color\_nodes(x) for x in l)
 def show\_logs(self, nodes=None): ''' Print log lines, either all or matching a given node ''' self.display\_logs(self.logparser.get\_logs(nodes=nodes))
 def get\_source(self): return self.source
 def get\_desc\_line(self, fld): try: f = open(self.desc) except IOError as msg: common\_err("open %s: %s" % (self.desc, msg)) return for s in f: if s.startswith("%s: " % fld): f.close() s = s.replace("%s: " % fld, "").rstrip() return s f.close()
 def short\_peinputs\_list(self): '''There could be quite a few transitions, limit the output''' max\_output = 20 s = "" transitions = list(self.logparser.get\_transitions()) if len(transitions) > max\_output: s = "... "
 def fmt(t): if len(t.tags): return self.\_str\_nodecolor(t.dc, t.pe\_num) + "\*" return self.\_str\_nodecolor(t.dc, t.pe\_num)
 return "%s%s" % (s, ' '.join([fmt(x) for x in transitions[-max\_output:]]))
 def get\_rpt\_dt(self, dt, whence): ''' Figure out the time of the start/end of the report. The ts input is the time stamp set by user (it can be empty). whence is set either to "top" or "bottom". ''' def first\_line(l): l.seek(0) return utils.to\_ascii(l.readline()).rstrip()
 def last\_line(l): '''Note: assumes that the last log line isn't > 2048 characters''' l.seek(-2048, os.SEEK\_END) return utils.to\_ascii(l.readlines()[-1]).rstrip()
 if dt: return dt try: if whence == "top": myts = min(logtime.syslog\_ts(x) for x in (first\_line(l) for l in self.logparser.fileobjs)) elif whence == "bottom": myts = max(logtime.syslog\_ts(x) for x in (last\_line(l) for l in self.logparser.fileobjs)) if myts: return utils.timestamp\_to\_datetime(myts) common\_debug("No log lines with timestamps found in report") except Exception as e: common\_debug("Error: %s" % (e)) return None
 def \_str\_dt(self, dt): return dt and logtime.human\_date(dt) or "--/--/-- --:--:--"
 def info(self): ''' Print information about the source. ''' if not self.prepare\_source(): return False
 created\_on = self.get\_desc\_line("Date") or self.\_creation\_time created\_by = self.get\_desc\_line("By") or self.\_creator
 utils.page\_string( '\n'.join(("Source: %s" % self.source, "Created on: %s" % (created\_on), "By: %s" % (created\_by), "Period: %s - %s" % (self.\_str\_dt(self.get\_rpt\_dt(self.from\_dt, "top")), self.\_str\_dt(self.get\_rpt\_dt(self.to\_dt, "bottom"))), "Nodes: %s" % ' '.join([self.\_str\_nodecolor(x, x) for x in self.node\_l]), "Groups: %s" % ' '.join(list(self.cib.groups.keys())), "Clones: %s" % ' '.join(list(self.cib.clones.keys())), "Resources: %s" % ' '.join(self.cib.primitives), "Transitions: %s" % self.short\_peinputs\_list())))
 def events(self): ''' Show all events. ''' if not self.prepare\_source(): return False
 self.display\_logs(self.logparser.get\_events())
 def find\_transition(self, t\_str): for t\_obj in self.logparser.get\_transitions(): if str(t\_obj) == t\_str: return t\_obj return None
 def show\_transition\_log(self, rpt\_pe\_file, full\_log=False): ''' Search for events within the given transition. ''' if not self.prepare\_source(no\_live\_update=self.prevent\_live\_update()): return False t\_obj = self.find\_transition(rpt\_pe2t\_str(rpt\_pe\_file)) if not t\_obj: common\_err("%s: transition not found" % rpt\_pe\_file) return False # limit the log scope temporarily self.logparser.set\_timeframe(t\_obj.start\_ts, t\_obj.end\_ts) if full\_log: self.show\_logs() else: t\_obj.transition\_info() self.events() self.logparser.set\_timeframe(self.from\_dt, self.to\_dt) return True
 def get\_transition\_tags(self, rpt\_pe\_file): ''' Returns the tags for the transition as a sorted list ''' t\_obj = self.find\_transition(rpt\_pe2t\_str(rpt\_pe\_file)) if not t\_obj: common\_err("%s: transition not found" % rpt\_pe\_file) return None return sorted(t\_obj.tags)
 def resource(self, \*args): ''' Show resource events. ''' if not self.prepare\_source(no\_live\_update=self.prevent\_live\_update()): return False self.display\_logs(self.logparser.get\_events(event="resource", resources=args))
 def node(self, \*args): ''' Show node events. ''' if not self.prepare\_source(no\_live\_update=self.prevent\_live\_update()): return False self.display\_logs(self.logparser.get\_events(event="node", nodes=args))
 def show\_log(self, \*nodes): ''' Show logs for a node or all nodes. ''' if not self.prepare\_source(): return False self.show\_logs(nodes=nodes)
 def pe\_detail\_format(self, t\_obj): l = [ utils.shortdate(t\_obj.start\_ts), utils.shorttime(t\_obj.start\_ts), t\_obj.end\_ts and utils.shorttime(t\_obj.end\_ts) or "--:--:--", # the format string occurs also below self.\_str\_nodecolor(t\_obj.dc, '%-13s' % t\_obj.shortname()) ] l += utils.get\_cib\_attributes(t\_obj.path(), "cib", ("update-client", "update-user", "update-origin"), ("no-client", "no-user", "no-origin")) l += [" ".join(sorted(t\_obj.tags))] return '%s %s %s %-13s %-10s %-10s %s %s' % tuple(l)
 def pelist(self, a=None, verbose=False): pe\_details\_hdr = "Date Start End Filename Client User Origin Tags" pe\_details\_sep = "==== ===== === ======== ====== ==== ====== ====" if not self.prepare\_source(no\_live\_update=self.prevent\_live\_update()): return [] if isinstance(a, (tuple, list)): if len(a) == 1: a.append(a[0]) elif a is not None: a = [a, a] l = [verbose and self.pe\_detail\_format(t\_obj) or t\_obj.path() for t\_obj in self.logparser.get\_transitions() if pe\_file\_in\_range(t\_obj.pe\_file, a)] if verbose: l = [pe\_details\_hdr, pe\_details\_sep] + l return l
 def show\_transitions(self): if not self.prepare\_source(no\_live\_update=self.prevent\_live\_update()): return [] return ["%-30s %-15s %-15s Tags" % ("Time", "Name", "Node")] + [t.description() for t in self.logparser.get\_transitions()]
 def dotlist(self, a=None): l = [x.replace("bz2", "dot") for x in self.pelist(a)] return [x for x in l if os.path.isfile(x)]
 def find\_pe\_files(self, path): 'Find a PE or dot file matching part of the path.' pe\_l = path.endswith(".dot") and self.dotlist() or self.pelist() return [x for x in pe\_l if x.find(path) >= 0]
 def pe2dot(self, f): f = f.replace("bz2", "dot") if os.path.isfile(f): return f return None
 def find\_file(self, f): return utils.file\_find\_by\_name(self.loc, f)
 def get\_session\_dir(self, name): try: return os.path.join(self.report\_cache\_dir, self.session\_sub, name) except: return os.path.join(self.report\_cache\_dir, self.session\_sub) state\_file = 'history\_state.cfg' rpt\_section = 'report'
 def save\_state(self, sdir): ''' Save the current history state. It should include: - directory - timeframe - detail TODO ''' p = configparser.ConfigParser() p.add\_section(self.rpt\_section) p.set(self.rpt\_section, 'dir', self.source == "live" and sdir or self.source) p.set(self.rpt\_section, 'from\_time', self.from\_dt and logtime.human\_date(self.from\_dt) or '') p.set(self.rpt\_section, 'to\_time', self.to\_dt and logtime.human\_date(self.to\_dt) or '') p.set(self.rpt\_section, 'detail', str(self.detail)) self.manage\_excludes("save", p) fname = os.path.join(sdir, self.state\_file) try: f = open(fname, "wt") except IOError as msg: common\_err("Failed to save state: %s" % (msg)) return False p.write(f) f.close() return True
 def load\_state(self, sdir): ''' Load the history state from a file. ''' p = configparser.ConfigParser() fname = os.path.join(sdir, self.state\_file) try: p.read(fname) except Exception as msg: common\_err("Failed to load state: %s" % (msg)) return False rc = True try: for n, v in p.items(self.rpt\_section): if n == 'dir': self.set\_source(v) if not os.path.exists(v): common\_err("session state file %s points to a non-existing directory: %s" % (fname, v)) rc = False elif n == 'from\_time': self.from\_dt = v and utils.parse\_time(v) or None elif n == 'to\_time': self.to\_dt = v and utils.parse\_time(v) or None elif n == 'detail': self.set\_detail(v) else: common\_warn("unknown item %s in the session state file %s" % (n, fname)) rc |= self.manage\_excludes("load", p) except configparser.NoSectionError as msg: common\_err("session state file %s: %s" % (fname, msg)) rc = False except Exception as msg: common\_err("%s: bad value '%s' for '%s' in session state file %s" % (msg, v, n, fname)) rc = False if rc: self.set\_change\_origin(CH\_SRC) return rc
 def set\_change\_origin(self, org): '''Set origin only to a smaller value (if current > 0). This prevents lesser change\_origin overwriting a greater one. ''' if self.change\_origin == 0 or org < self.change\_origin: self.change\_origin = org
 def manage\_session(self, subcmd, name): session\_dir = self.get\_session\_dir(name) if subcmd == "save" and os.path.exists(session\_dir): common\_err("history session %s exists" % name) return False elif subcmd in ("load", "pack", "update", "delete") and not os.path.exists(session\_dir): common\_err("history session %s does not exist" % name) return False if subcmd == "save": if utils.pipe\_cmd\_nosudo("mkdir -p %s" % session\_dir) != 0: return False if self.source == "live": rc = utils.pipe\_cmd\_nosudo("tar -C '%s' -c . | tar -C '%s' -x" % (self.\_live\_loc(), session\_dir)) if rc != 0: return False return self.save\_state(session\_dir) elif subcmd == "update": return self.save\_state(session\_dir)[View remainder of file in raw view](https://github.com/ClusterLabs/crmsh/raw/a403aa15f3ea575adfe5e43bf2a31c9f9094fcda/crmsh/history.py)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from lists.debian.org_5be71543_20250119_124706.html ===


---

[[Date Prev](msg00020.html)][[Date Next](msg00022.html)]
[[Thread Prev](msg00020.html)][[Thread Next](msg00022.html)]
[[Date Index](maillist.html#00021)]
[[Thread Index](threads.html#00021)]

# [SECURITY] [DLA 2533-1] crmsh security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 2533-1] crmsh security update
* *From*: "Chris Lamb" <lamby@debian.org>
* *Date*: Mon, 25 Jan 2021 10:08:28 -0500 (EST)
* *Message-id*: <[[🔎]](/msgid-search/161158728028.2029407.18316372285826439580%40tinycat.chris-lamb.co.uk) [161158728028.2029407.18316372285826439580@tinycat.chris-lamb.co.uk](msg00021.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- -------------------------------------------------------------------------
Debian LTS Advisory DLA-2533-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                           Chris Lamb
January 25, 2021                              <https://wiki.debian.org/LTS>
- -------------------------------------------------------------------------

Package        : crmsh
Version        : 2.3.2-4+deb9u1
CVE ID         : CVE-2020-35459

It was discovered that there was an in issue in the command-line tool
for the Pacemaker High Availability stack. Local attackers were able
to execute commands via shell code injection to the "crm history"
command-line tool, potentially allowing escalation of privileges.

For Debian 9 "Stretch", this problem has been fixed in version
2.3.2-4+deb9u1.

We recommend that you upgrade your crmsh packages.

For the detailed security status of crmsh please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/crmsh>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEwv5L0nHBObhsUz5GHpU+J9QxHlgFAmAO3r4ACgkQHpU+J9Qx
Hlhn7xAAsa71MV3K3hCzIlxPe8raFcJ815X9VyX3/TSTiOk25sONTIkQZi1MbUxz
VZP9dv87xsdNyOBVY6R7gxXinmM1pdfiOcJ/Na5/UHi4MWbrXO6dTGxJ9qYa1F9t
Bzt5UU2dHiLKlTSHP5WT0QvH0EHMK7ZONdFbpHsNtATsvqSK2anhep7aB+gN4AMI
AVs4Z21282nGPTb3kHSVS/+540wzrTL1WMiA2UH35scPb+NjoZdE+Xn9m77sqPjb
q4LO0ok1aVmcDX/rIXtGB010udxCIMVX2qaUDS+/geF+QdbbW7HeGxABOJegtHys
QyQd5JDPmnt59pRnlmqPvalI84rSPsPEgoh1CGH8Jkesu2G8TxGpRLTLCzL4rDc4
lALO3AH2kb+XyheWOgPPYVqGyTJte5JOu3As4iko6poTKsDjd0vFfZV+v6yomKZu
dlFaLMC8ClOh9r8FREcYLGrjqUKP32qlok1GWoyqtdCHcpXy7RfjuxWWTDZwwOay
VbKkBMesoK5tqFX4BD2pLuxYH/P/2vyWr/FwD+c3AneL9Xk5fX4kEgTNy/63JkbT
dxQDhQKqIzHv6uqH6NZPQvhZkAqOIK/Ch28x/+l1Gm6dYLW/DocVWBX1iTEb8VpD
uvbtoshqxuxoWYBLqsK3Jp+yNCBHi/i+lnV+h7gJU6Wn+o77vs4=
=oVSi
-----END PGP SIGNATURE-----

```

---



=== Content from www.openwall.com_ff0141a7_20250119_141835.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

# blists - web interface to mailing list archives

blists is a web interface to mailing list archives that works off indexed mbox files.
There are two programs: *bindex* and *bit*.
*bindex* generates or updates the index file (yes, incremental updates are supported).
*bit* is a CGI/SSI program that generates web pages on the fly.
Both programs are written in C and are very fast.

You can view the latest <README> file,
which describes blists in more detail and provides installation instructions.
It is also included in the archive below.

Download ([release notes](/lists/announce/2017/11/19/1)):

* [blists 2.0](blists-2.0.tar.gz) and
  its [signature](blists-2.0.tar.gz.sign)* [blists 1.0](blists-1.0.tar.gz) and
    its [signature](blists-1.0.tar.gz.sign)

These files are also
[available from the Openwall file archive](https://download.openwall.net/pub/projects/blists/).
The source code of blists can be browsed on
[GitHub](https://github.com/openwall/blists) or via
[CVSweb](https://cvsweb.openwall.com/blists).

Follow [this link](/signatures/) for information on verifying the signatures.

To see blists in action, check out our
[Open Source and information security mailing list archives](https://lists.openwall.net).

blists is a registered project with
[Open Hub](https://www.openhub.net/p/blists).

Quick Comment:

412429



=== Content from www.openwall.com_0daaae2a_20250119_124707.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](2) [[next>]](4) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20210112125959.GI7776@suse.de>
Date: Tue, 12 Jan 2021 13:59:59 +0100
From: Marcus Meissner <meissner@...e.de>
To: OSS Security List <oss-security@...ts.openwall.com>
Subject: Security issues in hawk2 and crmsh

Hi folks,

We have received reports of 2 security issues for hawk and crmsh. These
hawk and crmsh projects refer to distros@ for their disclosure work.

These issues were reported to SUSE by Vincent Berg of Anvil Ventures.

1. Remote unauthenticated shell injection into the Hawk webserver

   Hawk is a High Availability specific webconsole with its own webserver.

   The Hawk webserver versions 2.2 up to now have a shell code injection
   issue via the "hawk_remember_me_id" cookie.

   It can be triggered from 2 places, via /login (with login_from_cookie) and /logout
   interfaces.

   The cookie value is passed unquoted and unfiltered from ruby to a
   shell command as commandline argument. (Using %[shellcommand] pattern.)

   As hawk is running as "hauser" usually, this allows unauthenticated
   remote attackers to gain access to the "hauser" account.

   Introduced by <https://github.com/ClusterLabs/hawk/commit/a939a099c6abdac383fbaede5e8655853222c887#diff-5349b200e8dc7ea82818115aa0aa1522>

   We have received CVE-2020-35458 from Mitre for this issue.

   Our team did a fix that does not use an subshell to invoke the command, patch is attached.

2. Local root privilege escalation via hawk and crmsh shell code injection

   crmsh is a commandline shell utility to query or configure a HA cluster.

   The Hawk webconsole contains a "setuid root" helper tool called "hawk_invoke", which
   allows hawk to call some root functionality in "crmsh".

   hawk_invoke allows calls from "hauser" or "vagrant" users only.

   hawk_invoke has a whitelist of "crmsh" commandline options, but does not do any
   filtering or blocking of stdin.

   The "crm history" sub-command is whitelisted by hawk_invoke.

   It opens its own sub-shell with various commands, one of them is "session create SESSION"
   This subcommand will create a directory "SESSION" by calling:

		if utils.pipe_cmd_nosudo("mkdir -p %s" % session_dir) != 0:

   which again does not filter the input.

   This allows local privilege escalation from "hauser" or "vagrant" to root.

   We have received CVE-2020-35459 from Mitre for this issue.

   Currently we will fix only the unsafe mkdir and add ; to the blacklist filtering, a patch is attached.

Due to shortness of time we did not yet do a full (re)audit of crmsh and hawk, we are currently working on that.

The whole hawk_invoke setuid root setup also needs a full redesign.

Ciao, Marcus

View attachment "[hawk2-CVE-2020-35458.patch](3/1)" of type "text/x-patch" (1974 bytes)

View attachment "[crmsh-CVE-2020-35459.patch](3/2)" of type "text/x-patch" (3341 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from github.com_d8615d86_20250119_124706.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FClusterLabs%2Fcrmsh%2Freleases)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FClusterLabs%2Fcrmsh%2Freleases)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Findex&source=header-repo&source_repo=ClusterLabs%2Fcrmsh)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ClusterLabs](/ClusterLabs)
/
**[crmsh](/ClusterLabs/crmsh)**
Public

* [Notifications](/login?return_to=%2FClusterLabs%2Fcrmsh) You must be signed in to change notification settings
* [Fork
  93](/login?return_to=%2FClusterLabs%2Fcrmsh)
* [Star
   132](/login?return_to=%2FClusterLabs%2Fcrmsh)

* [Code](/ClusterLabs/crmsh)
* [Issues
  64](/ClusterLabs/crmsh/issues)
* [Pull requests
  22](/ClusterLabs/crmsh/pulls)
* [Actions](/ClusterLabs/crmsh/actions)
* [Projects
  0](/ClusterLabs/crmsh/projects)
* [Wiki](/ClusterLabs/crmsh/wiki)
* [Security](/ClusterLabs/crmsh/security)
* [Insights](/ClusterLabs/crmsh/pulse)

Additional navigation options

* [Code](/ClusterLabs/crmsh)
* [Issues](/ClusterLabs/crmsh/issues)
* [Pull requests](/ClusterLabs/crmsh/pulls)
* [Actions](/ClusterLabs/crmsh/actions)
* [Projects](/ClusterLabs/crmsh/projects)
* [Wiki](/ClusterLabs/crmsh/wiki)
* [Security](/ClusterLabs/crmsh/security)
* [Insights](/ClusterLabs/crmsh/pulse)

# Releases: ClusterLabs/crmsh

[Releases](/ClusterLabs/crmsh/releases)
[Tags](/ClusterLabs/crmsh/tags)

Releases · ClusterLabs/crmsh
## Release crmsh 4.6.1

15 Nov 05:59

![@liangxin1300](https://avatars.githubusercontent.com/u/1650862?s=40&v=4)
[liangxin1300](/liangxin1300)

[4.6.1](/ClusterLabs/crmsh/tree/4.6.1)

[`e7094c6`](/ClusterLabs/crmsh/commit/e7094c60a054658372981fd983811c8670042424)

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ClusterLabs/crmsh/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.6.1)

 Loading

[View all tags](/ClusterLabs/crmsh/tags)

[Release crmsh 4.6.1](/ClusterLabs/crmsh/releases/tag/4.6.1)
[Latest](/ClusterLabs/crmsh/releases/latest)

[Latest](/ClusterLabs/crmsh/releases/latest)

## Features since tag 4.6.0

* Dev: report: Collect qdevice/qnetd status by [@liangxin1300](https://github.com/liangxin1300) in [#1376](https://github.com/ClusterLabs/crmsh/pull/1376)
* Dev: doc: implement help2adoc ([#1374](https://github.com/ClusterLabs/crmsh/issues/1374)) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1380](https://github.com/ClusterLabs/crmsh/pull/1380)
* Setup bootstrap stages dependency by [@liangxin1300](https://github.com/liangxin1300) in [#1401](https://github.com/ClusterLabs/crmsh/pull/1401)
* Dev: ui\_configure: Complete required parameters first by [@liangxin1300](https://github.com/liangxin1300) in [#1484](https://github.com/ClusterLabs/crmsh/pull/1484)
* Add an option 'add\_advised\_op\_values' to disable adding advised op values by [@liangxin1300](https://github.com/liangxin1300) in [#1514](https://github.com/ClusterLabs/crmsh/pull/1514)
* Dev: remove `upgradeutil` and add `crm cluster health hawk2 [--fix]` (bsc#1228899) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1559](https://github.com/ClusterLabs/crmsh/pull/1559)

## Major fixes since tag 4.6.0

* Fix: bootstrap: ssh key of the init node is duplicated in the authorized\_keys files of other node (bsc#1218940) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1311](https://github.com/ClusterLabs/crmsh/pull/1311)
* Fix: sh: guide users to setup key-based ssh authentication when non-interactive authentcation fails (bsc#1219045) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1309](https://github.com/ClusterLabs/crmsh/pull/1309)
* Fix: ui\_cluster: Can't start cluster with --all option if no cib (bsc#1219052) by [@liangxin1300](https://github.com/liangxin1300) in [#1312](https://github.com/ClusterLabs/crmsh/pull/1312)
* Fix: report: Escape special characters in pattern (bsc#1220022) by [@liangxin1300](https://github.com/liangxin1300) in [#1329](https://github.com/ClusterLabs/crmsh/pull/1329)
* Fix: ui\_node: clearstate command needs adjustment (bsc#1219831) by [@aleksei-burlakov](https://github.com/aleksei-burlakov) in [#1334](https://github.com/ClusterLabs/crmsh/pull/1334)
* Fix: bootstrap: clear stall data about ssh users left possiblely from previous setups (bsc#1219476) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1321](https://github.com/ClusterLabs/crmsh/pull/1321)
* Fix: report: use ClusterShell for ssh (bsc#1220170) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1335](https://github.com/ClusterLabs/crmsh/pull/1335)
* Fix: add diagnostic messages when crm report cannot find ssh-agent (bsc#1219538) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1336](https://github.com/ClusterLabs/crmsh/pull/1336)
* Fix: report: Show different perspectives of cluster status with multiple 'crm\_mon' options (bsc#1204273) by [@liangxin1300](https://github.com/liangxin1300) in [#1345](https://github.com/ClusterLabs/crmsh/pull/1345)
* Fix: bootstrap: Remove unused -i option when calling csync2\_remote and ssh\_remote stage (bsc#1212080) by [@liangxin1300](https://github.com/liangxin1300) in [#1348](https://github.com/ClusterLabs/crmsh/pull/1348)
* Fix: sh: pass env to child process explicitly (bsc#1205925) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1356](https://github.com/ClusterLabs/crmsh/pull/1356)
* Fix: sh: Return the value of AuthorizationError.diagnose if it is not None by [@liangxin1300](https://github.com/liangxin1300) in [#1365](https://github.com/ClusterLabs/crmsh/pull/1365)
* Fix: ui\_node: prevent traceback on node standby by [@liangxin1300](https://github.com/liangxin1300) in [#1338](https://github.com/ClusterLabs/crmsh/pull/1338)
* Fix: ui\_node: When `utils.list_cluster_nodes` return None, try to get ip list from corosync.conf by [@liangxin1300](https://github.com/liangxin1300) in [#1378](https://github.com/ClusterLabs/crmsh/pull/1378)
* Fix: bootstrap: Detect cluster service on init node before saving the canonical hostname (bsc#1222714) by [@liangxin1300](https://github.com/liangxin1300) in [#1387](https://github.com/ClusterLabs/crmsh/pull/1387)
* Fix: healthcheck: Missing 'id\_' prefix while checking the ssh key exi… by [@liangxin1300](https://github.com/liangxin1300) in [#1395](https://github.com/ClusterLabs/crmsh/pull/1395)
* Fix: doc/toolchain: fix missing anchor in generated AIO doc ([#1409](https://github.com/ClusterLabs/crmsh/issues/1409)) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1412](https://github.com/ClusterLabs/crmsh/pull/1412)
* Fix: healthcheck: KeyError when local nodename not found in cib (bsc#1223438) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1420](https://github.com/ClusterLabs/crmsh/pull/1420)
* Fix: cmd\_status: call crm\_mon without shell ([#1429](https://github.com/ClusterLabs/crmsh/issues/1429)) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1432](https://github.com/ClusterLabs/crmsh/pull/1432)
* Fix: upgradeutil: refine error handling (bsc#1226147, bsc#1223371) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1457](https://github.com/ClusterLabs/crmsh/pull/1457)
* Fix: github-actions: should pass secrets to reusable workflows by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1476](https://github.com/ClusterLabs/crmsh/pull/1476)
* Fix: ui\_context: crm cluster delete autocompletion [#1403](https://github.com/ClusterLabs/crmsh/pull/1403) [#1460](https://github.com/ClusterLabs/crmsh/issues/1460) by [@aleksei-burlakov](https://github.com/aleksei-burlakov) in [#1480](https://github.com/ClusterLabs/crmsh/pull/1480)
* Fix: ui\_context: crm configure up prompt [#1466](https://github.com/ClusterLabs/crmsh/issues/1466) by [@aleksei-burlakov](https://github.com/aleksei-burlakov) in [#1482](https://github.com/ClusterLabs/crmsh/pull/1482)
* Fix: cibconfig: Disable auto complete advised operation values when adding a rsc\_template by [@liangxin1300](https://github.com/liangxin1300) in [#1455](https://github.com/ClusterLabs/crmsh/pull/1455)
* Fix: qnetd fails to start when TLS is disabled (bsc#1227649) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1492](https://github.com/ClusterLabs/crmsh/pull/1492)
* Fix: hahealth.py script (bsc#1228271) by [@liangxin1300](https://github.com/liangxin1300) in [#1495](https://github.com/ClusterLabs/crmsh/pull/1495)
* Fix: bootstrap: ssh public key should be copied to qnetd node when ssh-agent feature is not enabled (bsc#1228950) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1515](https://github.com/ClusterLabs/crmsh/pull/1515)
* Fix: report: crm report will hang if CIB contains invalid configuraions (bsc#1229686) by [@liangxin1300](https://github.com/liangxin1300) in [#1518](https://github.com/ClusterLabs/crmsh/pull/1518)
* Fix: Don't add time units to values for existing CIB (bsc#1228817) by [@liangxin1300](https://github.com/liangxin1300) in [#1506](https://github.com/ClusterLabs/crmsh/pull/1506)
* Fix: hawk2 cannot call `crm script` as user hacluster (bsc#1228271) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1522](https://github.com/ClusterLabs/crmsh/pull/1522)
* Fix: Raise an exception as a rapid return of ssh-related operations to prevent hang (bsc#1228899) by [@liangxin1300](https://github.com/liangxin1300) in [#1521](https://github.com/ClusterLabs/crmsh/pull/1521)
* Fix: utils: group check failure when os.getgroups() returns empty (bsc#1229030) by [@liangxin1300](https://github.com/liangxin1300) in [#1528](https://github.com/ClusterLabs/crmsh/pull/1528)
* Fix: Add a new option 'has\_fa\_advised\_op' (bsc#1228858) by [@liangxin1300](https://github.com/liangxin1300) in [#1531](https://github.com/ClusterLabs/crmsh/pull/1531)
* Fix: utils: Stop providing the detailed and precise sudoer rules to "hack" the privilege (bsc#1229093) by [@liangxin1300](https://github.com/liangxin1300) in [#1538](https://github.com/ClusterLabs/crmsh/pull/1538)
* Fix: bootstrap: check is\_nologin more robustly (bsc#1228251) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1556](https://github.com/ClusterLabs/crmsh/pull/1556)
* Fix: report: find\_shell should accept hacluster user (bsc#1228899) by [@nicholasyang2022](https://github.com/nicholasyang2022) in [#1566](https://github.com/ClusterLabs/crmsh/pull/1566)
* Fix: cibconfig: Disable auto add advise values for operations (bsc#1231386) by [@liangxin1300](https://github.com/liangxin1300) in [#1580](https://github.com/ClusterLabs/crmsh/pull/1580)
* Fix: ui\_cluster: Stop renaming cluster name when using qdevice by [@liangxin1300](https://github.com/liangxin1300) in [#1576](https://github.com/ClusterLabs/crmsh/pull/1576)
* Fix: report.utils: Fix the performance issue (bsc#1232821) by [@liangxin1300](https://github.com/liangxin1300) in [#1605](https://github.com/ClusterLabs/crmsh/pull/1605)
* Fix: log: The report DEBUG log message is not displayed in the log file by [@liangxin1300](https://github.com/liangxin1300) in [#1609](https://github.com/ClusterLabs/crmsh/pull/1609)

**Full Changelog**: [4.6.0...4.6.1](https://github.com/ClusterLabs/crmsh/compare/4.6.0...4.6.1)

### Contributors

* [![@liangxin1300](https://avatars.githubusercontent.com/u/1650862?s=64&v=4)](https://github.com/liangxin1300)
* [![@aleksei-burlakov](https://avatars.githubusercontent.com/u/22703481?s=64&v=4)](https://github.com/aleksei-burlakov)
* [![@nicholasyang2022](https://avatars.githubusercontent.com/u/110801211?s=64&v=4)](https://github.com/nicholasyang2022)

liangxin1300, aleksei-burlakov, and nicholasyang2022

 Assets
2

 Loading

All reactions

## Release crmsh 4.6.0

09 Jan 09:30

![@liangxin1300](https://avatars.githubusercontent.com/u/1650862?s=40&v=4)
[liangxin1300](/liangxin1300)

[4.6.0](/ClusterLabs/crmsh/tree/4.6.0)

[`1eb5327`](/ClusterLabs/crmsh/commit/1eb532769ec600aae3ec88c1229f637119247fa9)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ClusterLabs/crmsh/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.6.0)

 Loading

[View all tags](/ClusterLabs/crmsh/tags)

[Release crmsh 4.6.0](/ClusterLabs/crmsh/releases/tag/4.6.0)

Changes since tag 4.5.0

Features:

* bootstrap: support ssh-agent and crmsh could no longer rely on the private key in the cluster nodes ([#1261](https://github.com/ClusterLabs/crmsh/pull/1261))
* prun: replace parallax with crmsh.prun to support non-root sudoer ([#1147](https://github.com/ClusterLabs/crmsh/pull/1147))
* report: rewrite crm report and improve performance noticeably ([#1246](https://github.com/ClusterLabs/crmsh/pull/1246))

Major fixes:

* Fix: bootstrap: fix the owner and permission of file authorized\_keys (bsc#1217279)
* Fix: prun: should not call user\_pair\_for\_ssh() when target host is localhost (bsc#1217094)
* Fix: utils: Add 'sudo' only when there is a sudoer(bsc#1215549)
* Fix: report: Pick up tarball suffix dynamically (bsc#1215438)
* Fix: report: Pick 'gzip' as the first compress prog for cross-platform compatibility(bsc#1215438)
* Fix: constants: Add several resource meta attributes (bsc#1215319)
* Fix: upgradeutil: reduce the timeout for getting sequence from remote node (bsc#1213797)
* Fix: userdir: Get the effictive user name instead of using getpass.getuser (bsc#1213821)
* Fix: upgradeutil: support the change of path of upgrade\_seq in crmsh-4.5 (bsc#1213050)
* Fix: ui\_context: wait4dc should assume a subcommand completes successfully if no exceptions are raised (bsc#1212992)
* Fix: bootstrap: fix the validation of option -N and -c (bsc#1212436)
* Fix: geo\_cluster: the behavior of choosing a default user in geo\_join/geo\_init\_arbitrator is different with `cluster join` (bsc#1211817)
* Fix: utils: do not use sudoer user to create ssh session unless it is specified explicitly (bsc#1211817)
* Dev: refine non-root sudoer support for crmsh.parallax.parallax\_call (bsc#1210709)
* Fix: bootstrap: `init --qnetd-hostname` fails when username is not specified (bsc#1211200)
* Fix: bootstrap: crm cluster join default behavior change in ssh key handling (bsc#1210693)
* Fix: help: Long time to load and parse crm.8.adoc (bsc#1210198)
* Fix: cibconfig: use any existing rsc\_defaults set rather than create another one (bsc#1210614)
* Fix: lock: Join node failed to wait init node finished (bsc#1210332)
* Dev: unify version string used in setup.py and autotools ([#943](https://github.com/ClusterLabs/crmsh/issues/943))
* Fix: ui\_cluster: Improve the process of 'crm cluster stop' (bsc#1213889)
* Dev: log: save backtrace of ValueError in logfile and suppress it in console ([#1281](https://github.com/ClusterLabs/crmsh/issues/1281))
* Fix: report: Unable to gather log files that are in the syslog format (bsc#1218491)
* Dev: bootstrap: Assign hosts with \_context.node\_list\_in\_cluster in join\_ssh\_merge (bsc#1218331)

More changes details please see <https://github.com/ClusterLabs/crmsh/blob/crmsh-4.6/ChangeLog>

 Assets
2

 Loading

All reactions

## Release crmsh 4.6.0 - rc2

22 Dec 09:16

![@liangxin1300](https://avatars.githubusercontent.com/u/1650862?s=40&v=4)
[liangxin1300](/liangxin1300)

[4.6.0-rc2](/ClusterLabs/crmsh/tree/4.6.0-rc2)

[`b7650ca`](/ClusterLabs/crmsh/commit/b7650ca37843c4d25b312dcf1194be3c5b61b1da)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ClusterLabs/crmsh/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.6.0-rc2)

 Loading

[View all tags](/ClusterLabs/crmsh/tags)

[Release crmsh 4.6.0 - rc2](/ClusterLabs/crmsh/releases/tag/4.6.0-rc2)

Changes since tag 4.6.0-rc1

Major fixes:

* Dev: unify version string used in setup.py and autotools ([#943](https://github.com/ClusterLabs/crmsh/issues/943))
* Fix: ui\_cluster: Improve the process of 'crm cluster stop' (bsc#1213889)
* Dev: log: save backtrace of ValueError in logfile and suppress it in console ([#1281](https://github.com/ClusterLabs/crmsh/issues/1281))

For more change details please see <https://github.com/ClusterLabs/crmsh/blob/crmsh-4.6/ChangeLog>

 Assets
2

 Loading

All reactions

## Release crmsh 4.5.1

12 Dec 08:43

![@liangxin1300](https://avatars.githubusercontent.com/u/1650862?s=40&v=4)
[liangxin1300](/liangxin1300)

[4.5.1](/ClusterLabs/crmsh/tree/4.5.1)

[`89bb8cc`](/ClusterLabs/crmsh/commit/89bb8cc8c6fccb8a8bc7e8cbe7935720deb0dedf)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ClusterLabs/crmsh/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.5.1)

 Loading

[View all tags](/ClusterLabs/crmsh/tags)

[Release crmsh 4.5.1](/ClusterLabs/crmsh/releases/tag/4.5.1)

Changes since tag 4.5.0

Features:

* prun: replace parallax with crmsh.prun to support non-root sudoer ([#1147](https://github.com/ClusterLabs/crmsh/pull/1147))

Major fixes:

* Fix: ui\_cluster: Improve the process of 'crm cluster stop' (bsc#1213889)
* Fix: bootstrap: fix the owner and permission of file authorized\_keys (bsc#1217279)
* Fix: utils: Add 'sudo' only when there is a sudoer(bsc#1215549)
* Fix: prun: should not call user\_pair\_for\_ssh() when target host is localhost (bsc#1217094)
* Fix: report: Pick up tarball suffix dynamically (bsc#1215438)
* Fix: report: Pick 'gzip' as the first compress prog for cross-platform compatibility(bsc#1215438)
* Fix: constants: Add several resource meta attributes (bsc#1215319)
* Fix: upgradeutil: reduce the timeout for getting sequence from remote node (bsc#1213797)
* Fix: userdir: Get the effictive user name instead of using getpass.getuser (bsc#1213821)
* Fix: upgradeutil: support the change of path of upgrade\_seq in crmsh-4.5 (bsc#1213050)
* Fix: ui\_context: wait4dc should assume a subcommand completes successfully if no exceptions are raised (bsc#1212992)
* Fix: bootstrap: fix the validation of option -N and -c (bsc#1212436)
* Fix: geo\_cluster: the behavior of choosing a default user in geo\_join/geo\_init\_arbitrator is different with `cluster join` (bsc#1211817)
* Fix: utils: do not use sudoer user to create ssh session unless it is specified explicitly (bsc#1211817)
* Dev: refine non-root sudoer support for crmsh.parallax.parallax\_call (bsc#1210709)
* Fix: bootstrap: `init --qnetd-hostname` fails when username is not specified (bsc#1211200)
* Fix: bootstrap: crm cluster join default behavior change in ssh key handling (bsc#1210693)
* Fix: help: Long time to load and parse crm.8.adoc (bsc#1210198)
* Fix: cibconfig: use any existing rsc\_defaults set rather than create another one (bsc#1210614)
* Fix: lock: Join node failed to wait init node finished (bsc#1210332)

More change details please see <https://github.com/ClusterLabs/crmsh/blob/crmsh-4.5/ChangeLog>

 Assets
2

 Loading

All reactions

## Release crmsh 4.6.0 - rc1

08 Dec 03:10

![@liangxin1300](https://avatars.githubusercontent.com/u/1650862?s=40&v=4)
[liangxin1300](/liangxin1300)

[4.6.0-rc1](/ClusterLabs/crmsh/tree/4.6.0-rc1)

[`a903b85`](/ClusterLabs/crmsh/commit/a903b85403909d658450412245d4c322b4501ab5)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ClusterLabs/crmsh/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.6.0-rc1)

 Loading

[View all tags](/ClusterLabs/crmsh/tags)

[Release crmsh 4.6.0 - rc1](/ClusterLabs/crmsh/releases/tag/4.6.0-rc1)
Pre-release

Pre-release

Changes since tag 4.5.0

Features:

* bootstrap: support ssh-agent and crmsh could no longer rely on the private key in the cluster nodes ([#1261](https://github.com/ClusterLabs/crmsh/pull/1261))
* prun: replace parallax with crmsh.prun to support non-root sudoer ([#1147](https://github.com/ClusterLabs/crmsh/pull/1147))
* report: rewrite crm report and improve performance noticeably ([#1246](https://github.com/ClusterLabs/crmsh/pull/1246))

Major fixes:

* Fix: bootstrap: fix the owner and permission of file authorized\_keys (bsc#1217279)
* Fix: prun: should not call user\_pair\_for\_ssh() when target host is localhost (bsc#1217094)
* Fix: utils: Add 'sudo' only when there is a sudoer(bsc#1215549)
* Fix: report: Pick up tarball suffix dynamically (bsc#1215438)
* Fix: report: Pick 'gzip' as the first compress prog for cross-platform compatibility(bsc#1215438)
* Fix: constants: Add several resource meta attributes (bsc#1215319)
* Fix: upgradeutil: reduce the timeout for getting sequence from remote node (bsc#1213797)
* Fix: userdir: Get the effictive user name instead of using getpass.getuser (bsc#1213821)
* Fix: upgradeutil: support the change of path of upgrade\_seq in crmsh-4.5 (bsc#1213050)
* Fix: ui\_context: wait4dc should assume a subcommand completes successfully if no exceptions are raised (bsc#1212992)
* Fix: bootstrap: fix the validation of option -N and -c (bsc#1212436)
* Fix: geo\_cluster: the behavior of choosing a default user in geo\_join/geo\_init\_arbitrator is different with `cluster join` (bsc#1211817)
* Fix: utils: do not use sudoer user to create ssh session unless it is specified explicitly (bsc#1211817)
* Dev: refine non-root sudoer support for crmsh.parallax.parallax\_call (bsc#1210709)
* Fix: bootstrap: `init --qnetd-hostname` fails when username is not specified (bsc#1211200)
* Fix: bootstrap: crm cluster join default behavior change in ssh key handling (bsc#1210693)
* Fix: help: Long time to load and parse crm.8.adoc (bsc#1210198)
* Fix: cibconfig: use any existing rsc\_defaults set rather than create another one (bsc#1210614)
* Fix: lock: Join node failed to wait init node finished (bsc#1210332)

More changes details please see <https://github.com/ClusterLabs/crmsh/blob/crmsh-4.6/ChangeLog>

 Assets
2

 Loading

 👍
1
 zzhou1 reacted with thumbs up emoji
 🎉
1
 zzhou1 reacted with hooray emoji
 🚀
1
 zzhou1 reacted with rocket emoji

All reactions

* 👍
  1 reaction
* 🎉
  1 reaction
* 🚀
  1 reaction

 1 person reacted

## Release crmsh 4.5.0

30 Mar 02:19

![@liangxin1300](https://avatars.githubusercontent.com/u/1650862?s=40&v=4)
[liangxin1300](/liangxin1300)

[4.5.0](/ClusterLabs/crmsh/tree/4.5.0)

[`60bfb16`](/ClusterLabs/crmsh/commit/60bfb162109b2bbe899f2d0f4171a073086e1a2f)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ClusterLabs/crmsh/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.5.0)

 Loading

[View all tags](/ClusterLabs/crmsh/tags)

[Release crmsh 4.5.0](/ClusterLabs/crmsh/releases/tag/4.5.0)

Changes since tag 4.4.1

Features:

* Enable setup and manage cluster via non-root user ([#1009](https://github.com/ClusterLabs/crmsh/pull/1009),[#1123](https://github.com/ClusterLabs/crmsh/pull/1123),[#1135](https://github.com/ClusterLabs/crmsh/pull/1135))
* Gradually start the large cluster ([#985](https://github.com/ClusterLabs/crmsh/pull/985))
* Populate advised monitor/start/stop operations values ([#1038](https://github.com/ClusterLabs/crmsh/pull/1038))
* Adjust cluster property priority-fencing-delay automatically ([#1017](https://github.com/ClusterLabs/crmsh/pull/1017))
* Add option -x to skip csync2 while bootstrapping ([#1035](https://github.com/ClusterLabs/crmsh/pull/1035))

Major fixes:

* Fix: crm report: sustain if there are offline nodes (bsc#1209480)
* Fix: validate ssh session when the users is determined by guessing (bsc#1209193)
* Fix: parallax: Use 'sudo bash -c' when executing commands via sudoer (bsc#1209192)
* Fix: qdevice: Unable to setup qdevice under non-root user (bsc#1208770)
* Fix: upgradeutil: do upgrade silently (bsc#1208327)
* Fix: bootstrap: `crm cluster join ssh` raises TypeError (bsc#1208327)
* Fix: utils: Change the way to get pacemaker's version (bsc#1208216)
* Fix: hawk fails to parse the slash (bsc#1206217)
* Fix: extra logs while configuring passwordless (bsc#1207720)
* Fix: report: Catch read exception (bsc#1206606)
* Fix: bootstrap: Unset SBD\_DELAY\_START when running 'crm cluster start' (bsc#1202177)
* Fix: ui\_context: redirect `foo -h`/`foo --help` to `help foo` (bsc#1205735)
* Fix: qdevice: Adjust SBD\_WATCHDOG\_TIMEOUT when configuring qdevice not using stage (bsc#1205727)
* Fix: cibconfig: Complete promotable=true and interlave=true for Promoted/Unpromoted resource (bsc#1205522)
* Fix: corosync: show corosync ring status if has fault (bsc#1205615)
* Fix: bootstrap: fix passwordless ssh authentication for hacluster automatically when a new node is joining the cluster (bsc#1201785)
* Fix: upgradeutil: automated init ssh passwordless auth for hacluster after upgrading (bsc#1201785)
* fix: log: fail to open log file even if user is in haclient group (bsc#1204670)
* Fix: sbd: Ask if overwrite when given sbd device on interactive mode(bsc#1201428)
* Fix: ui\_cluster: 'crm cluster stop' failed to stop services (bsc#1203601)
* Fix: crash\_test: do not use firewalld to isolate a cluster node (bsc#1192467)
* Fix: parallax: Add LogLevel=error ssh option to filter out warnings (bsc#1196726)
* Revert "Fix: utils: Only raise exception when return code of systemctl command over ssh larger than 4 (bsc#1196726)" (bsc#1202655)
* Fix: configure: refresh cib before showing or modifying if no pending changes has been made (bsc#1202465)
* Fix: bootstrap: Use crmsh.parallax instead of parallax module directly (bsc#1202006)

More changes details please see <https://github.com/ClusterLabs/crmsh/blob/master/ChangeLog>

 Assets
2

 Loading

All reactions

## Release crmsh 4.5.0 - rc2

09 Mar 14:14

![@liangxin1300](https://avatars.githubusercontent.com/u/1650862?s=40&v=4)
[liangxin1300](/liangxin1300)

[4.5.0-rc2](/ClusterLabs/crmsh/tree/4.5.0-rc2)

[`a4c4192`](/ClusterLabs/crmsh/commit/a4c4192d554aa5c59d5cb51bd5c07eb062e2ec83)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ClusterLabs/crmsh/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.5.0-rc2)

 Loading

[View all tags](/ClusterLabs/crmsh/tags)

[Release crmsh 4.5.0 - rc2](/ClusterLabs/crmsh/releases/tag/4.5.0-rc2)

Changes since tag 4.5.0-rc1

Major fixes:

* Fix: bootstrap: Swap hacluster ssh key with other nodes
* Fix: report: Fix crm report issue under non-root user
* Fix: bootstrap: Don't save core.debug when saving core.hosts (bsc#1208991)
* Dev: log: Redirect debug messages into stderr

 Assets
2

 Loading

All reactions

## Release crmsh 4.5.0 - rc1

03 Mar 03:42

![@liangxin1300](https://avatars.githubusercontent.com/u/1650862?s=40&v=4)
[liangxin1300](/liangxin1300)

[4.5.0-rc1](/ClusterLabs/crmsh/tree/4.5.0-rc1)

[`2b5310b`](/ClusterLabs/crmsh/commit/2b5310b97180a113e2b15b3ae317b723cf5198e4)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ClusterLabs/crmsh/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.5.0-rc1)

 Loading

[View all tags](/ClusterLabs/crmsh/tags)

[Release crmsh 4.5.0 - rc1](/ClusterLabs/crmsh/releases/tag/4.5.0-rc1)

Changes since tag 4.4.1

Features:

* Enable setup and manage cluster via non-root user ([#1009](https://github.com/ClusterLabs/crmsh/pull/1009),[#1123](https://github.com/ClusterLabs/crmsh/pull/1123),[#1135](https://github.com/ClusterLabs/crmsh/pull/1135))
* Gradually start the large cluster ([#985](https://github.com/ClusterLabs/crmsh/pull/985))
* Populate advised monitor/start/stop operations values ([#1038](https://github.com/ClusterLabs/crmsh/pull/1038))
* Adjust cluster property priority-fencing-delay automatically ([#1017](https://github.com/ClusterLabs/crmsh/pull/1017))
* Add option -x to skip csync2 while bootstrapping ([#1035](https://github.com/ClusterLabs/crmsh/pull/1035))

Major fixes:

* Fix: qdevice: Unable to setup qdevice under non-root user (bsc#1208770)
* Fix: upgradeutil: do upgrade silently (bsc#1208327)
* Fix: bootstrap: `crm cluster join ssh` raises TypeError (bsc#1208327)
* Fix: utils: Change the way to get pacemaker's version (bsc#1208216)
* Fix: hawk fails to parse the slash (bsc#1206217)
* Fix: extra logs while configuring passwordless (bsc#1207720)
* Fix: report: Catch read exception (bsc#1206606)
* Fix: bootstrap: Unset SBD\_DELAY\_START when running 'crm cluster start' (bsc#1202177)
* Fix: ui\_context: redirect `foo -h`/`foo --help` to `help foo` (bsc#1205735)
* Fix: qdevice: Adjust SBD\_WATCHDOG\_TIMEOUT when configuring qdevice not using stage (bsc#1205727)
* Fix: cibconfig: Complete promotable=true and interlave=true for Promoted/Unpromoted resource (bsc#1205522)
* Fix: corosync: show corosync ring status if has fault (bsc#1205615)
* Fix: bootstrap: fix passwordless ssh authentication for hacluster automatically when a new node is joining the cluster (bsc#1201785)
* Fix: upgradeutil: automated init ssh passwordless auth for hacluster after upgrading (bsc#1201785)
* fix: log: fail to open log file even if user is in haclient group (bsc#1204670)
* Fix: sbd: Ask if overwrite when given sbd device on interactive mode(bsc#1201428)
* Fix: ui\_cluster: 'crm cluster stop' failed to stop services (bsc#1203601)
* Fix: crash\_test: do not use firewalld to isolate a cluster node (bsc#1192467)
* Fix: parallax: Add LogLevel=error ssh option to filter out warnings (bsc#1196726)
* Revert "Fix: utils: Only raise exception when return code of systemctl command over ssh larger than 4 (bsc#1196726)" (bsc#1202655)
* Fix: configure: refresh cib before showing or modifying if no pending changes has been made (bsc#1202465)
* Fix: bootstrap: Use crmsh.parallax instead of parallax module directly (bsc#1202006)

More changes details please see <https://github.com/ClusterLabs/crmsh/blob/master/ChangeLog>

 Assets
2

 Loading

All reactions

## Release crmsh 4.4.1

03 Mar 04:16

![@liangxin1300](https://avatars.githubusercontent.com/u/1650862?s=40&v=4)
[liangxin1300](/liangxin1300)

[4.4.1](/ClusterLabs/crmsh/tree/4.4.1)

[`387d071`](/ClusterLabs/crmsh/commit/387d071f00e0810b5d0a8f2677a2d0ab6dd5f8b1)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ClusterLabs/crmsh/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.4.1)

 Loading

[View all tags](/ClusterLabs/crmsh/tags)

[Release crmsh 4.4.1](/ClusterLabs/crmsh/releases/tag/4.4.1)

Changes since tag 4.4.0

Features:

* Enable "crm configure show related:<ra\_type>" to show the objects by given ra type ([#978](https://github.com/ClusterLabs/crmsh/pull/978))
* Parametrize the ra trace log dir ([#939](https://github.com/ClusterLabs/crmsh/pull/939))
* Enable -N option setup the current node and peers all together ([#961](https://github.com/ClusterLabs/crmsh/pull/961))

Major fixes:

* Fix: utils: use -o and -n to compare files instead of strings for crm\_diff (bsc#1201312)
* Fix: crm report: use sudo when under non root and hacluster user (bsc#1199634)
* Fix: utils: wait4dc: Make change since output of 'crmadmin -S' changed(bsc#1199412)
* Fix: bootstrap: stop and disable csync2.socket on removed node (bsc#1199325)
* Fix: crm report: Read data in a save way, to avoid UnicodeDecodeError(bsc#1198180)
* Fix: qdevice: Add lock to protect init\_db\_on\_qnetd function (bsc#1197323)
* Fix: utils: Only raise exception when return code of systemctl command over ssh larger than 4 (bsc#1196726)

More changes details please see <https://github.com/ClusterLabs/crmsh/blob/master/ChangeLog>

 Assets
2

 Loading

All reactions

## Release crmsh 4.4.0

17 Feb 06:47

![@liangxin1300](https://avatars.githubusercontent.com/u/1650862?s=40&v=4)
[liangxin1300](/liangxin1300)

[4.4.0](/ClusterLabs/crmsh/tree/4.4.0)

[`b8f67f4`](/ClusterLabs/crmsh/commit/b8f67f4e0eb53af9396d854a8ab740460c70c7ce)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ClusterLabs/crmsh/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.4.0)

 Loading

[View all tags](/ClusterLabs/crmsh/tags)

[Release crmsh 4.4.0](/ClusterLabs/crmsh/releases/tag/4.4.0)

Changes since tag 4.3.1

Features:

* Support OCF 1.1 when detected and OCF\_1\_1\_SUPPORT flag is on ([#914](https://github.com/ClusterLabs/crmsh/pull/914))
* Change default transport type as udpu(unicast) ([#918](https://github.com/ClusterLabs/crmsh/pull/918))
* Support multi sub-commands with --all option or specific node ([#797](https://github.com/ClusterLabs/crmsh/pull/797))
* Adjust corosync and sbd parameters according to the profile environment detected ([#890](https://github.com/ClusterLabs/crmsh/pull/890)) ([#842](https://github.com/ClusterLabs/crmsh/pull/842))
* Rename hb\_report as "crm report" ([#883](https://github.com/ClusterLabs/crmsh/pull/883))
* Improve crm report performance ([#880](https://github.com/ClusterLabs/crmsh/pull/880))
* Using python logging as crmsh logging system ([#614](https://github.com/ClusterLabs/crmsh/pull/614))

Major fixes:

* Fix: sbd: not overwrite SYSCONFIG\_SBD and sbd-disk-metadata if input 'n'
* Dev: behave: Change docker cgroup driver as systemd
* Dev: bootstrap: the joining node retries an active cluster
* Dev: ui\_node: Use diff and patch instead of replace cib
* Fix: bootstrap: Don't change pacemaker.service bootup preference
* Fix: log: Change the log file owner as hacluster:haclient
* Fix: crash\_test: Adjust help output of 'crm cluster crash\_test -h'
* Fix: ui\_configure: Give a deprecated warning when using "ms" subcommand
* Fix: xmlutil: Parse promotable clone correctly and also consider compatibility
* Fix: crm: To avoid the potential "permission denied" error under other users
* Fix: ui\_resource: Parse node and lifetime correctly
* Fix: ui\_resource: Parse lifetime option correctly
* Fix: bootstrap: Add /etc/crm/crm.conf and /etc/crm/profiles.yml into /etc/csync2/csync2.cfg
* Fix: hb\_report: Using python way to collect ra trace files
* Fix: doc: Note that resource tracing is only supported by OCF RAs
* Fix: bootstrap: adjust host list for parallax to get and copy known\_hosts file
* Fix: parse: Should still be able to show the empty property if it already exists
* Fix: bootstrap: check for missing fields in 'crm\_node -l' output
* Fix: resource: make untrace consistent with trace
* Fix: ocfs2: Skip verifying UUID for ocfs2 device on top of raid or lvm on the join node

More changes details please see <https://github.com/ClusterLabs/crmsh/blob/master/ChangeLog>

 Assets
2

 Loading

All reactions

Previous *1* [2](/ClusterLabs/crmsh/releases?page=2) [Next](/ClusterLabs/crmsh/releases?page=2)

Previous [Next](/ClusterLabs/crmsh/releases?page=2)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


