=== Content from wiki.mozilla.org_ef8238f3_20250119_141543.html ===


# BMO/UserGuide/Whiteboard

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)

Each bug has a free-form single line text entry box for adding tags and status information. This wiki page is dedicated to collect a comprehensive list of whiteboard tags used in the Mozilla project.

## Contents

* [1 Whiteboard considered harmful](#Whiteboard_considered_harmful)
* [2 Contributor mentoring](#Contributor_mentoring)
* [3 Automated Testing](#Automated_Testing)
* [4 Autonag](#Autonag)
* [5 Release Engineering](#Release_Engineering)
* [6 Sheriffing](#Sheriffing)
* [7 Firefox](#Firefox)
* [8 Community reported bugs](#Community_reported_bugs)
* [9 Firefox OS](#Firefox_OS)
* [10 Tor](#Tor)
* [11 Web Compatibility](#Web_Compatibility)
* [12 Scrum Development](#Scrum_Development)
* [13 What does this whiteboard keyword mean?](#What_does_this_whiteboard_keyword_mean?)
## Whiteboard considered harmful

It is recommended that you request alternative metadata instead of using whiteboard tagging.

* Updating whiteboards tags through the API is non-trivial
* There is no global auto-suggest for whiteboard tags
* There is no verification of whiteboard tags; typos will not be caught and prevented
* Renaming a whiteboard tag requires writing a script to update every bug with that tag, changing its last modified timestamp and generating bugmail; other solutions involve a simple change by administrators
* Whiteboard tags cannot be disabled; people might continue to provide them after they are no longer relevant thinking they still apply
* If desired it's possible to restrict who can set flags to particular values; it will never be possible to prevent accidental or other changes to the whiteboard from any user with editbugs or the bug's reporter

Consider using a keyword, a flag, or a status flag. You can request this on [Bugzilla](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).

## Contributor mentoring

For more information, see [Mentors](/Mentors "Mentors").

* `[lang=]`: The programming language involved for this bug.
* `[mentor-lang=]`: (human/natural) language other than English the mentor will be able to communicate to the contributor with.

## Automated Testing

* `[test disabled]`: Indicates an automated test has been disabled. Typically used in bugs filed for intermittent test failures, to indicate that the absence of new failures in the bug is due to the test being disabled - as well as remind module owners that the test needs fixing and re-enabling.

## Autonag

`[no-nag]`: Indicates that a bug should not be modified or commented in by our [Autonag](/Release_Management/autonag "Release Management/autonag") scripts.

## Release Engineering

* `[capacity]`: This bug will help increase (or free up) capacity for our automated build & test machines.

## Sheriffing

* `[leave open]`: This has [been deprecated](https://groups.google.com/forum/#!topic/mozilla.dev.platform/Ie9OXcWbTSs) in favour of the 'leave-open' keyword. Used to ensure that the bug updating tool mcMerge does not close the bug when commits referencing it are merged into mozilla-central.
* `[retriggered]`: Used by sheriffs when investigating Fresh Oranges [[1]](https://charts.mozilla.org/FreshOranges/index.html) to find where a failure started from, using backfills and retriggers

## Firefox

* `dupeme`, `dupme`, or `DUPEME`: we're pretty sure this bug report is a duplicate of another bug, but cannot recall which one or cannot find it.
* `[qa-]`: QE (Quality Engineering) verification not required - superseded by the qe-verify flag.
* `[adv-mainNN+]` (where `NN` is some number): a security advisory about this bug for the release `NN` will be (has been) written.
* `[MemShrink]`: [a project](/Performance/MemShrink "Performance/MemShrink") to reduce memory consumption.

## Community reported bugs

* `[nightly-community]`: This bug was reported by a member of the Firefox Nightly community. Used to triage community-reported bugs and measure the impact of our core community on product quality.
* `[mozfr-community]`: This bug was reported by a member of the MozFR French-speaking community. Used to evaluate the impact of the mozfr.org community on product quality.

## Firefox OS

[Template:Note: This project is no longer active, but we leave these definitions for bug tracker historian purposes](/index.php?title=Template:Note:_This_project_is_no_longer_active,_but_we_leave_these_definitions_for_bug_tracker_historian_purposes&action=edit&redlink=1 "Template:Note: This project is no longer active, but we leave these definitions for bug tracker historian purposes (page does not exist)")

* `[POVB]`: Part of vendor build; the fix of this bug is not in the Mozilla codebase, but it's in our interest to track it.
* `[priority]`: Indicates we are asked by a partner to address this issue with priority.
* `[tarako_only]`: Special pref or feature that only lands on branch for Tarako (low memory phone), i.e. 1.3T branch of Gaia and Gecko. To be picked up on future releases.
* `[p=]/[u=]/[c=]/[s=]`: See [Scrum Development](/BMO/Whiteboard#Scrum_Development "BMO/Whiteboard"). Firefox OS uses the u= tag as the milestone instead, see [Firefox OS Performance Triage](/FirefoxOS/Performance/Triage#Scrumbugs_Tags "FirefoxOS/Performance/Triage")
* `[ft:<name of the team>]`, `[systemsfe]`, etc: Bugs identified to be owned by a "functional team" within B2G engineering. Each team owns a specific set of Bugzilla components, and tags are used to denote owned bugs outside of these components.

## Tor

* `[tor ###]` Part of the [Tor uplift project](/Security/Tor_Uplift/Tracking "Security/Tor Uplift/Tracking"). For example, `[tor 16620]` indicates a corresponding ticket at <https://trac.torproject.org/16620>. See also <https://torpat.ch/uplift>

## Web Compatibility

[Our whiteboard keywords](/Compatibility/BugsGuide "Compatibility/BugsGuide") are already described.

## Scrum Development

The following flags are used by tools like [scrumbu.gs](https://scrumbu.gs/help/) for managing sprints using the scrum development framework:

* `[p=]`: A rough estimate from engineer on how long the bug is going to take.
* `[u=]`: The user (in the scrum sense) that this story affects
* `[c=]`: The component (in the scrum sense) that this story affects
* `[s=]`: An explicit sprint slug this bug should belong to.

If you are not managing a product, you probably don't have to set these.

## What does this whiteboard keyword mean?

If you know what one of the following whiteboard keywords means, please describe it and put it into one of the above categories above (or create a new one):

* `[2.0-FL-bug-bash]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=1021384>)
* `[games]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=1017892>)
* `[reserve-photon-structure]` ([examples](https://bugzilla.mozilla.org/buglist.cgi?list_id=14108939&status_whiteboard_type=substring&status_whiteboard=%5Breserve-photon-structure%5D&order=Bug%20Number&query_format=advanced))
* `[TCP]` (example: <https://bugzilla.mozilla.org/show_bug.cgi?id=920036>)
  + my guess: Tablet Contribution Program?

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/Whiteboard&oldid=1245932>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FWhiteboard "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/Whiteboard "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/Whiteboard&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/Whiteboard)
* [View source](/index.php?title=BMO/UserGuide/Whiteboard&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/Whiteboard&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/Whiteboard "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/Whiteboard "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/Whiteboard&oldid=1245932 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/Whiteboard&action=info "More information about this page")

* This page was last edited on 27 March 2023, at 15:08.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/Whiteboard&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from www.mozilla.org_0c6a373f_20250119_124242.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2020-07

## Security Vulnerabilities fixed in Thunderbird 68.5

Announced
February 11, 2020
Impact
moderate
Products
Thunderbird
Fixed in

* Thunderbird 68.5

#### [#CVE-2020-6793: Out-of-bounds read when processing certain email messages](#CVE-2020-6793)

Reporter
Chiaki ISHIKAWA
Impact
moderate
##### Description

When processing an email message with an ill-formed envelope, Thunderbird could read data from a random memory location.

##### References

* [Bug 1608539](https://bugzilla.mozilla.org/show_bug.cgi?id=1608539)

#### [#CVE-2020-6794: Setting a master password post-Thunderbird 52 does not delete unencrypted previously stored passwords](#CVE-2020-6794)

Reporter
Jurgen Gaeremyn
Impact
moderate
##### Description

If a user saved passwords before Thunderbird 60 and then later set a master password, an unencrypted copy of these passwords is still accessible. This is because the older stored password file was not deleted when the data was copied to a new format starting in Thunderbird 60. The new master password is added only on the new file. This could allow the exposure of stored password data outside of user expectations.

##### References

* [Bug 1606619](https://bugzilla.mozilla.org/show_bug.cgi?id=1606619)

#### [#CVE-2020-6795: Crash processing S/MIME messages with multiple signatures](#CVE-2020-6795)

Reporter
Stephan Lauffer
Impact
moderate
##### Description

When processing a message that contains multiple S/MIME signatures, a bug in the MIME processing code caused a null pointer dereference, leading to an unexploitable crash.

##### References

* [Bug 1611105](https://bugzilla.mozilla.org/show_bug.cgi?id=1611105)

#### [#CVE-2020-6797: Extensions granted downloads.open permission could open arbitrary applications on Mac OSX](#CVE-2020-6797)

Reporter
Vladimir Metnew
Impact
moderate
##### Description

By downloading a file with the .fileloc extension, a semi-privileged extension could launch an arbitrary application on the user's computer. The attacker is restricted as they are unable to download non-quarantined files or supply command line arguments to the application, limiting the impact.
*Note: this issue only occurs on Mac OSX. Other operating systems are unaffected.*

##### References

* [Bug 1596668](https://bugzilla.mozilla.org/show_bug.cgi?id=1596668)

#### [#CVE-2020-6798: Incorrect parsing of template tag could result in JavaScript injection](#CVE-2020-6798)

Reporter
terjanq
Impact
moderate
##### Description

If a `<template>` tag was used in a `<select%gt;` tag, the parser could be confused and allow JavaScript parsing and execution when it should not be allowed. A site that relied on the browser behaving correctly could suffer a cross-site scripting vulnerability as a result.
*In general, this flaw cannot be exploited through email in the Thunderbird product because scripting is disabled when reading mail, but is potentially a risk in browser or browser-like contexts.*

##### References

* [Bug 1602944](https://bugzilla.mozilla.org/show_bug.cgi?id=1602944)

#### [#CVE-2020-6792: Message ID calculcation was based on uninitialized data](#CVE-2020-6792)

Reporter
Chiaki ISHIKAWA
Impact
low
##### Description

When deriving an identifier for an email message, uninitialized memory was used in addition to the message contents.

##### References

* [Bug 1609607](https://bugzilla.mozilla.org/show_bug.cgi?id=1609607)

#### [#CVE-2020-6800: Memory safety bugs fixed in Thunderbird 68.5](#CVE-2020-6800)

Reporter
Mozilla developers and community
Impact
high
##### Description

Mozilla developers and community members Raul Gurzau, Tyson Smith, Bob Clary, Liz Henry, and Christian Holler reported memory safety bugs present in Firefox 72 and Firefox ESR 68.4. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.
*In general, these flaws cannot be exploited through email in the Thunderbird product because scripting is disabled when reading mail, but are potentially risks in browser or browser-like contexts.*

##### References

* [Memory safety bugs fixed in Firefox 73, Firefox ESR 68.5, and Thunderbird 68.5](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1595786%2C1596706%2C1598543%2C1604851%2C1608580%2C1608785%2C1605777)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_b78bc4fd_20250119_141541.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1608539)
* [XML](/show_bug.cgi?ctype=xml&id=1608539)

Closed
[Bug 1608539](/show_bug.cgi?id=1608539)
(CVE-2020-6793)

Opened 5 years ago
Closed 5 years ago

# C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m\_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m\_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()

## Categories

### (MailNews Core :: Backend, defect)

[Product:](/describecomponents.cgi?product=MailNews%20Core)

MailNews Core
▾

MailNews Core
Mail and news components common to Thunderbird and SeaMonkey
[See Open Bugs in This Product](/buglist.cgi?product=MailNews%20Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=MailNews%20Core)
Watch This Product

[Component:](/describecomponents.cgi?product=MailNews%20Core&component=Backend#Backend)

Backend
▾

MailNews Core :: Backend
Problems with RDF data sources and application logic. Most likely, your problem can fit in one of the other components so this component should be rarely used.
[See Open Bugs in This Component](/buglist.cgi?product=MailNews%20Core&component=Backend&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=MailNews%20Core&component=Backend&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=MailNews%20Core&component=Backend)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

## Tracking

### (thunderbird\_esr68+ fixed, thunderbird73 fixed)

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

Thunderbird 74.0

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| thunderbird\_esr68 | [+](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=equals&v1=fixed) |
| thunderbird73 | --- | [fixed](/buglist.cgi?f1=cf_status_thunderbird_73&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| relnote-thunderbird |  | --- |
| thunderbird\_esr68 | + | fixed |
| thunderbird73 |  | fixed |
| seamonkey2.53 | --- | --- |
| seamonkey2.57esr | --- | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| thunderbird133 | --- | --- |
| thunderbird134 | --- | --- |
| thunderbird135 | --- | --- |
| thunderbird136 | --- | --- |

## People

### (Reporter: ishikawa, Assigned: ishikawa)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=40)  [ishikawa](/user_profile?user_id=32503)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=40)  [ishikawa](/user_profile?user_id=32503)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

5 people

## References

### (Blocks 1 open bug)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[1592860](/show_bug.cgi?id=1592860 "NEW - [META] Hidden issues of xpcshell test of C-C TB (hidden because they don't get printed if the test succeeds)."), [CVE-2020-6792](/show_bug.cgi?id=1609607 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.")

Dependency [tree](/showdependencytree.cgi?id=1608539&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1608539)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-moderate, valgrind)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2020-6793

[Keywords:](/describekeywords.cgi)

[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---),
[valgrind](/buglist.cgi?keywords=valgrind&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | wanted-thunderbird |  |
| --- | --- | --- |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | relnote |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (6 files, 3 obsolete files)

| [valgrind-xpctest-check.patch](/attachment.cgi?id=9120154)  [5 years ago](#c0)  [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)   8.24 KB, patch |  | [Details](/attachment.cgi?id=9120154&action=edit) | [Diff](/attachment.cgi?id=9120154&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9120154) |
| --- | --- | --- |
| [Output mentioned in comment 6](/attachment.cgi?id=9121141)  [5 years ago](#c7)  [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)   381.76 KB, text/plain |  | [Details](/attachment.cgi?id=9121141&action=edit) |
| [valgrind-xpctest-check.patch (take 2)](/attachment.cgi?id=9121143)  [5 years ago](#c8)  [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)   10.52 KB, patch |  | [Details](/attachment.cgi?id=9121143&action=edit) | [Diff](/attachment.cgi?id=9121143&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9121143) |
| [Output mentioned in comment 10.](/attachment.cgi?id=9121228)  [5 years ago](#c11)  [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)   415.49 KB, text/plain |  | [Details](/attachment.cgi?id=9121228&action=edit) |
| [patch to initialize m\_headerstartpos and avoid uninitialized memory access by using correct buffer length.](/attachment.cgi?id=9122300)  [5 years ago](#c14)  [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)   10.81 KB, patch |  | [Details](/attachment.cgi?id=9122300&action=edit) | [Diff](/attachment.cgi?id=9122300&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122300) |
| [1608539-v2.patch](/attachment.cgi?id=9122915)  [5 years ago](#c20)  [Kai Engert [:KaiE:]](/user_profile?user_id=36541)   3.83 KB, patch |  | [Details](/attachment.cgi?id=9122915&action=edit) | [Diff](/attachment.cgi?id=9122915&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122915) |
| [1608539-v3.patch](/attachment.cgi?id=9122925)  [5 years ago](#c22)  [Kai Engert [:KaiE:]](/user_profile?user_id=36541)   3.83 KB, patch | mkmelin : [review+](#a1268518_101158 "5 years ago") | [Details](/attachment.cgi?id=9122925&action=edit) | [Diff](/attachment.cgi?id=9122925&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122925) |
| [Reformatted Kai's patch.](/attachment.cgi?id=9123029)  [5 years ago](#c25)  [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)   4.03 KB, patch |  | [Details](/attachment.cgi?id=9123029&action=edit) | [Diff](/attachment.cgi?id=9123029&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123029) |
| [1608539-v3c.patch](/attachment.cgi?id=9123165)  [5 years ago](#c29)  [Kai Engert [:KaiE:]](/user_profile?user_id=36541)   3.83 KB, patch | KaiE : [review+](#c29 "5 years ago")  mkmelin : [approval-comm-beta+](#a1695838_101158 "5 years ago")  mkmelin : [approval-comm-esr68+](#a2136583_101158 "5 years ago") | [Details](/attachment.cgi?id=9123165&action=edit) | [Diff](/attachment.cgi?id=9123165&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123165) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1608539#c0)• 5 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1608539&comment_id=14585526 "1 revision") |
|  | |

Attached patch

[valgrind-xpctest-check.patch](attachment.cgi?id=9120154&action=diff)
— [Details](attachment.cgi?id=9120154&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9120154)

The subject says it all

|m\_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()

The unitinitialized reference happens at

<https://searchfox.org/comm-central/source/mailnews/local/src/nsParseMailbox.cpp#1223>

I found this by running xpcshell-tests under valgrind.

If m\_headerstartpos is not properly initialized, literally anything goes.

Header parsing, etc. get all screwed up.

The symptom of strange display of message in a message pane that shows only blank or in the middle of header, etc. could be at least partially explained by this bug. (Maybe not all the cases.)

I detected the issue using valgrind, and then began dumping m\_headerstartpos after I set

```
export MALLOC_CHECK_=3
export MALLOC_PERTURB_=0x5A

```

in my environment. GNU libc malloc fills the uninitialized malloc'ed area with 0xA5.

Thus it is rather easy to find it in an otherwise normal dump.

```
cf. From man mallopt.

       M_PERTURB (since glibc 2.4)
              If this parameter is set to a nonzero value, then bytes of allocated memory  (other  than  alloca‐
              tions  via calloc(3)) are initialized to the complement of the value in the least significant byte
              of value, and when allocated memory is released using free(3), the freed  bytes  are  set  to  the
              least  significant  byte  of value.  This can be useful for detecting errors where programs incor‐
              rectly rely on allocated memory being initialized to zero, or reuse values in memory that has  al‐
              ready been freed.
   ...
       MALLOC_PERTURB_
              Controls the same parameter as mallopt() M_PERTURB.

```

The tests that trigger and not trigger the symptoms in C-C portion of xpcshell-tests are as follows.

This is the output from egrep "(nrun-xpcshell-original.sh|a5a5a5a5)" log1155-xpcshell.txt

log1155-xpcshell.txt being the log output.

```
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/chat/components/src/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/chat/modules/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/chat/protocols/irc/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/chat/protocols/skype/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/chat/protocols/xmpp/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/common/saxparser/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/common/test/xpcshell
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/ldap/xpcom/tests/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mail/base/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mail/components/enterprisepolicies/tests/xpcshell
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mail/components/extensions/test/xpcshell
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mail/components/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/addrbook/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/base/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/compose/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/db/gloda/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/db/msgdb/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/extensions/bayesian-spam-filter/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/extensions/mdn/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/extensions/newsblog/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/imap/test/unit
 1:14.92 pid:109013 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus->value =0x0x55788019a046,m_headers.GetBuffer()=0x557880199fe0, m_envelope_pos=0x0
 2:17.25 pid:110314 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus->value =0x0x557082978326,m_headers.GetBuffer()=0x5570829782c0, m_envelope_pos=0x0
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/import/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/intl/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/jsaccount/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/local/test/unit
 0:09.37 pid:111723 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus->value =0x0x5645cf9c8621,m_headers.GetBuffer()=0x5645cf9c85b0, m_envelope_pos=0x0
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/mime/jsmime/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/mime/test/unit

```

I inserted the dump of m\_headerstartpos using the patch in the attached file.

I have not fully analyzed WHEN/HOW the uninitialized access happens. But I suspect this has something to do with malformed or missing headers.

I don't want to see some script kiddies sending out such messages en masse to disrupt TB users, thus setting the security flag.

Once we can be sure this is of minor issue, then we can unflag it.

TIA

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1608539#c1)• 5 years ago |
|  | |

Oh, BTW, I notice that the hash calculation touches uninitialized memory region. The last hunk in the attached diff is for investigating this.

I knew that for a long time. But I let it pass since it is not unusual for some hash functions to

calculate the value using 4 or 8 octets at a time, and thus if we have interesting data which has a length of not multiple of 4, we may end up

accessing the last few uninitialized octets of a word: this happens in zip/unzip operation during |make mozmill| test

and I have suppressed the warning from valgrind after investigation revealed that it is a non-issue.

However, with this uninitialized memory access issue at hand, I investigated a bit more, and I now realized that uninitialized access during hash calcluation MAY end up generating message-ID for a message which does not have it to be attached a non-unique message ID.: that is, the message ID varies each time it is generated because of random data in uninitiailized memory. (Correct me if I am wrong here.)

This may happen when you import a message in an individual file and the message lacks a message ID.

If you include it in multiple folders, the same message will have a different message ID in different folders. So this may not be optimal.

But the practical impact of having the message with different message ID is not that great if I am not mistaken again.

*HOWEVER*, during investigation, I have noticed a glaring uninitialized memory creation and access in the code which I will report later. I am overwhelmed at what is going on and not sure where the problem begins, even.

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a815_32503)• 5 years ago |

Blocks: [1592860](/show_bug.cgi?id=1592860 "NEW - [META] Hidden issues of xpcshell test of C-C TB (hidden because they don't get printed if the test succeeds).")

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1608539#c2)• 5 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1608539&comment_id=14585558 "2 revisions") |
|  | |

I should probably mention this in the separate bug for the hash calculation (but the problem seems to be entangled somehow)., but

the dump of hash area shows this:

```
 1:19.22 pid:109069 {debug} Dump:tmp_buf: totalsize = 1024
 1:19.22 pid:109069 0x00:   f  r  o  m	:     y	 @  y  .  y 00 NL  t  o	 :
 1:19.22 pid:109069 0x10:      x  @  x	.  x 00 NL  s  u  b  j	e  c  t	 :
 1:19.22 pid:109069 0x20:      d  o  w	n  l  o	 a  d	  o  n	   d  e	 m
 1:19.22 pid:109069 0x30:   a  n  d	p  r  o	 b  l  e  m 00 NL  d  a	 t
 1:19.22 pid:109069 0x40:   e  :     F	r  i  ,	    0  1     J	a  n	 2
 1:19.22 pid:109069 0x50:   0  1  0	1  2  :	 0  0	  -  0	5  0  0 00
 1:19.22 pid:109069 0x60:  NL  c  o  n	t  e  n	 t  -  t  y  p	e  :	 m
 1:19.22 pid:109069 0x70:   u  l  t  i	p  a  r	 t  /  m  i  x	e  d  ;
 1:19.22 pid:109069 0x80:   b  o  u  n	d  a  r	 y  =  "  -  -	-  -  P	 a
 1:19.22 pid:109069 0x90:   r  t  0  +	" 00  " 00 NL a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xA0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xB0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xC0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xD0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xE0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xF0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x00:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x10:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x20:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x30:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x40:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x50:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x60:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x70:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x80:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x90:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xA0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xB0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xC0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xD0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xE0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xF0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x00:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x10:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x20:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x30:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x40:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x50:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x60:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x70:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x80:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x90:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xA0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xB0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xC0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xD0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xE0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xF0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x00:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x10:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x20:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x30:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x40:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x50:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x60:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x70:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x80:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x90:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xA0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xB0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xC0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xD0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xE0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xF0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5

```

That is the buffer sent for header-related processing has totallength (= GetSize()) of 1024 and filled with uninitialized value and the

hash is calculated over this area. Something is horribly wrong...

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1608539#c3)• 5 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1608539&comment_id=14585584 "2 revisions") |
|  | |

Re the tests that cause the uninitialized access of |m\_headerstartpos| is as follows.

I am afraid that I ran the test partially before I ran the full test and so the same error was reported twice.

(Note in the following like '||' actually is | followed by \ and then |. I don't know what hides the \ . Is this part of HTML spec?)

Edited excerpt from egrep "(nrun-xpcshell-original.sh|a5a5a5a5|| Starting)" log1155-xpcshell.txt

```
 1:14.90 INFO comm/mailnews/imap/test/unit/test_offlinePlayback.js | Starting doOfflineOps
 1:14.92 pid:109013 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus->value =0x0x55788019a046,m_headers.GetBuffer()=0x557880199fe0, m_envelope_pos=0x0

 2:17.23 INFO comm/mailnews/imap/test/unit/test_offlinePlayback.js | Starting doOfflineOps
 2:17.25 pid:110314 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus->value =0x0x557082978326,m_headers.GetBuffer()=0x5570829782c0, m_envelope_pos=0x0

 0:07.12 INFO comm/mailnews/local/test/unit/test_movemailDownload.js | Starting streamMessages
 0:09.37 pid:111723 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus->value =0x0x5645cf9c8621,m_headers.GetBuffer()=0x5645cf9c85b0, m_envelope_pos=0x0

```

|  | [Wayne Mery (:wsmwk)](/user_profile?user_id=29811) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a56485_29811)• 5 years ago |

Component: Untriaged → BackendProduct: Thunderbird → MailNews Core

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1608539#c4)• 5 years ago |
|  | |

I have spent 20 minutes trying to understand this code, but it's tricky.

However, it seems that most variables are initialized to zero in nsParseMailMessageState::Clear(), but m\_headerstartpos isn't.

Can we add m\_headerstartpos=0; and see if you can still reproduce the issue?

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1608539#c5)• 5 years ago |
|  | |

(In reply to Kai Engert (:KaiE:) from [comment #4](/show_bug.cgi?id=1608539#c4 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()"))

> I have spent 20 minutes trying to understand this code, but it's tricky.
>
> However, it seems that most variables are initialized to zero in nsParseMailMessageState::Clear(), but m\_headerstartpos isn't.
>
> Can we add m\_headerstartpos=0; and see if you can still reproduce the issue?

Yes, the code is tricky. I tried understand when/why the part where the uninitialized m\_headerstartpos was referenced, but have not figured out yet.

Let me try the bandage of setting "m\_headerstartpos=0" and how it goes.

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1608539#c6)• 5 years ago |
|  | |

uninitialized m\_headerstartpos is gone by the initialization and it does not seem to have ill-effect on other xpcshell-tests for now.

So I will watch out over mochitest in the future.

*HOWEVER*, the issue I found regarding the strange access to uninitialized buffer area mentioned in [comment 2](/show_bug.cgi?id=1608539#c2 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()") is still there.

So we need more investigation. Before I file a bug on that I found this uninitialized buffer reference happens in many tests.

I am attaching the output of the following command (log1157-xpcshell.txt is a local log filename).

```
egrep "({debug} Dump:tmp_buf: totalsize = |nrun-xpcshell-original.sh|Failed: 1| a5|a5a5a5a5|\| Starting)" log1157-xpcshell.txt

```

(Again, the double | | before |Starting| is actuall |, , then followed by another |.,

Basically, when TB hits the code path to print |totalsize =| in my added dump statement, the code tries to reference a buffer whose last part is filled with uninitialized octet, and if I am not mistaken, the hash is calculated on these uninitialized areas instead of the properly initialized data.

I am not sure if the length passed to the routine is bogus or the buffer initialization code (that fills buffer with the header data) is bogus.

I have not had the time to look at the failing tests, but there must be a pattern to the data which triggered the uninitialized buffer access problem.

I wish the code here is simplified. There seems to be a code that tries to add ">" if a mail text starts a line with "From", but the code tries to be clever and obscures the entire logic.: I don't mind a simple memcpy() to shift the line image to create a place to insert the ">" at the beginning

so that we have a simpler easy-to-understand code.: Clever and hard-to-understand code is written once, but future developers and debuggers need to understand whatever tricky stuff THOUSAND times. TB community today cannot afford that kind of clever code any more (!).

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1608539#c7)• 5 years ago |
|  | |

Attached file
[Output mentioned in comment 6](attachment.cgi?id=9121141)
— [Details](attachment.cgi?id=9121141&action=edit)

The output mentioned in [comment 6](/show_bug.cgi?id=1608539#c6 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()").

I have slightly changed the routine to dump the buffer.

I will upload the changed patch after this message.

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1608539#c8)• 5 years ago |
|  | |

Attached patch

[valgrind-xpctest-check.patch (take 2)](attachment.cgi?id=9121143&action=diff)
— [Details](attachment.cgi?id=9121143&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9121143)

I think instead of passing GetSize() of buffer area that stores the header data to md5->Update routine to calculate the MD5 and end up with a missing message ID, we should probably keep track of the ending position (NUL code at the end of the last header line when the headers are parsed and stored.: NEWLINE, CR LF seem to be replaced with NUL in the code) and pass the length from the m\_headerstartpos to that position.

However, as the forgotten initializaton of m\_headestartpos shows there seem to a can of worms around here.

Assignee: nobody → ishikawa

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1608539#c9)• 5 years ago |
|  | |

I will file a separate bug VERY SOON NOW. If someone feels like doing that, I am fine.

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a469918_32503)• 5 years ago |

Blocks: [CVE-2020-6792](/show_bug.cgi?id=1609607 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.")

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1608539#c10)• 5 years ago |
|  | |

I filed [bug 1609607](/show_bug.cgi?id=1609607 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.") for the uninitialized buffer access.

Just to be complete, an addition here.

The output mentioned in [comment 6](/show_bug.cgi?id=1608539#c6 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()") is a bit misleading about the files that show the symptom of uninitialized buffer access.

The following command identifies the files better.

```
egrep "(TEST_START|{debug} Dump:tmp_buf: totalsize = |nrun-xpcshell-original.sh|Failed: 1| a5|a5a5a5a5|\| Starting)" log1157-xpcshell.txt

```

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1608539#c11)• 5 years ago |
|  | |

Attached file
[Output mentioned in comment 10.](attachment.cgi?id=9121228)
— [Details](attachment.cgi?id=9121228&action=edit)

This is the output mentioned in [comment 10](/show_bug.cgi?id=1608539#c10 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()").

One thing I noticed is that there are two cases where the totalsize is 3072 ( = 1024 x 3) and

have uninitialized area at the end.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1608539#c12)• 5 years ago |
|  | |

Kai: can you take a stab at a security severity rating for this bug from a Tbird POV

Flags: needinfo?(kaie)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a839335_36541)• 5 years ago |

Flags: needinfo?(kaie)Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1608539#c13)• 5 years ago |
|  | |

Hi, I am testing the local patch for this bug and bug [bug 1609607](/show_bug.cgi?id=1609607 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.").

I think I will bundle the patch for this bug in the patch for [bug 1609607](/show_bug.cgi?id=1609607 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.") since they seem to be interwinded in a sutble way

and should be applied together at once to avoid uninitialized memory access.

BTW, uninitialized case of m\_headerstartpos seemed to happen only when m\_envelope\_pos was equal to 0.

So this suggests that the mail (header + mainbody text) start at the beginning of a file.

Setting m\_headerstartpos = 0 might have been in OK in that sense.

(However, I am still a bit uneasy.: I am not sure if this takes care of a possible "From - " line at the beginning, etc.)

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1608539#c14)• 5 years ago |
|  | |

Attached patch

[patch to initialize m\_headerstartpos and avoid uninitialized memory access by using correct buffer length.](attachment.cgi?id=9122300&action=diff)
— [Details](attachment.cgi?id=9122300&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122300)

Here is the patch.

I intentionally kept the comment line very generic so as not to alert that this is related the sec-low bugs.

The submission to try server is

<https://treeherder.mozilla.org/#/jobs?repo=try-comm-central&revision=a6155fa767844fad63ded1d0a57e33ee746b7f03>

I don't see any new problems here.

(I accidentally put another patch, but it is a no brainer and should not cause any issue with the problem mentioned here.)

[Attachment #9122300](/attachment.cgi?id=9122300&action=edit "patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.") -
Flags: review?(kaie)

|  | [Jorg K (CEST = GMT+2)](/user_profile?user_id=176914) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1608539#c15)• 5 years ago |
|  | |

Comment on [attachment 9122300](/attachment.cgi?id=9122300 "patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.") [[details]](/attachment.cgi?id=9122300&action=edit "patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.") [[diff]](/attachment.cgi?id=9122300&action=diff "patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122300)
patch to initialize m\_headerstartpos and avoid uninitialized memory access by using correct buffer length.
Review of [attachment 9122300](/attachment.cgi?id=9122300 "patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.") [[details]](/attachment.cgi?id=9122300&action=edit "patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.") [[diff]](/attachment.cgi?id=9122300&action=diff "patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122300):
-----------------------------------------------------------------
You need to run clang-format on this. I've just briefly looked at all the formal problems.
::: mailnews/local/src/nsParseMailbox.cpp
@@ +53,5 @@
> #include "nsIOutputStream.h"
> #include "mozilla/Attributes.h"
> #include "mozilla/Logging.h"
>
> +#ifdef USEVALGRIND
Do we want that? Is that a define provided by the Mozilla environment?
@@ +436,5 @@
> // at the start of each new message, update the progress bar
> UpdateProgressPercent();
> return rv;
> + } else {
> +#ifdef DEBUG
That can go one line up if we need the debug code at all.
@@ +439,5 @@
> + } else {
> +#ifdef DEBUG
> + // You can uncomment the following line to trace the New Envelope handling.
> + // fflush(stdout);
> + // fprintf(stderr,"{debug} StartNewEnvelope was not called in HandleLine();\n");
Can we find a consistent format for the debug output, something like here:
<https://searchfox.org/comm-central/search?q=seekdebug&case=false&regexp=false&path>=
Besides, this is only comment.
@@ +566,5 @@
> for (uint32\_t i = 0; i < m\_customDBHeaders.Length(); i++)
> m\_customDBHeaderValues[i].length = 0;
>
> + m\_headerstartpos = 0;
> +
Trailing space.
@@ +592,5 @@
> }
>
> NS\_IMETHODIMP nsParseMailMessageState::SetEnvelopePos(uint64\_t aEnvelopePos) {
> +#ifdef DEBUG
> + fprintf(stderr, "SetEnvelopePos called. aEnvelopPos=%" PRIu64 "\n", aEnvelopePos);
Trailing space, and see comment above.
@@ +613,5 @@
> }
>
> NS\_IMETHODIMP nsParseMailMessageState::ParseAFolderLine(const char \*line,
> uint32\_t lineLength) {
> +#ifdef DEBUG
Trailing space and see comment above.
@@ +618,5 @@
> + fprintf(stderr,"{debug}ParseAFolderLine: lineLength=%" PRIu32 "\n", lineLength);
> +#endif
> +
> + // XXX I realize the return value of ParseAFolderLilne is completely ignored :-(
> + // We should honor the return value of ParseFolderLine(). No?
Trailing space.
@@ +626,5 @@
> nsresult nsParseMailMessageState::ParseFolderLine(const char \*line,
> uint32\_t lineLength) {
> nsresult rv;
>
> +#ifdef DEBUG
Trailing space and see comment above.
@@ +860,5 @@
> // We've found a new envelope to parse.
> nsresult nsParseMailMessageState::StartNewEnvelope(const char \*line,
> uint32\_t lineLength) {
> +#ifdef DEBUG
> + fprintf(stderr, "{debug} StartNewEnvelope called. lineLength=%" PRIu32 "\n", lineLength);
Please no {debug}.
@@ +1247,5 @@
> (nsMsgPriorityValue)((flags & nsMsgMessageFlags::Priorities) >> 13);
> flags &= ~nsMsgMessageFlags::Priorities;
> }
> +#ifdef USEVALGRIND
> + fprintf(stderr,"(debug) VALGRIND: ");
Here we have (debug).
@@ +1411,5 @@
> + // generation takes place also in hash table operation to
> + // compare messages to see if they match (!?)
> +
> + int alloclen = ((m\_headers.GetBufferPos() + 8 - 1) / 8 ) \* 8; // multiple of 8
> + void \* tmp\_buf = (void \*)PR\_Malloc(alloclen);
PR\_Malloc already returns void\*
@@ +1420,5 @@
> +#ifdef DEBUG
> + {
> + int totalsize = m\_headers.GetBufferPos();
> + int i;
> + fprintf(stderr, "{debug} Dump:tmp\_buf: totalsize = %"
{debug}

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1608539#c16)• 5 years ago |
|  | |

I will run the clang-format locally and try to make the debug print out consistent.

|  | [Jorg K (CEST = GMT+2)](/user_profile?user_id=176914) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1608539#c17)• 5 years ago |
|  | |

There's also debugging code in the patches in [bug 1242030](/show_bug.cgi?id=1242030 "NEW - Consolidated patch set from bug 1122698, bug 1134527, bug 1134529, bug 1174500"), mostly like `fprintf(stderr, "(debug) ...`. Personally I'd add as little debug as possible, and I'm wondering what the `#ifdef USEVALGRIND` is about. As far as I can see, that's not a flag the environment supports, so there is no point adding that code.

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1608539#c18)• 5 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1608539&comment_id=14605740 "1 revision") |
|  | |

(In reply to Jorg K (GMT+1) (PTO to 26th Jan 2020, sporadically reading bugmail) from [comment #17](/show_bug.cgi?id=1608539#c17 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()"))

> There's also debugging code in the patches in [bug 1242030](/show_bug.cgi?id=1242030 "NEW - Consolidated patch set from bug 1122698, bug 1134527, bug 1134529, bug 1174500"), mostly like `fprintf(stderr, "(debug) ...`. Personally I'd add as little debug as possible, and I'm wondering what the `#ifdef USEVALGRIND` is about. As far as I can see, that's not a flag the environment supports, so there is no point adding that code.

Good catch.

ifdef USEVALGRIND is a cruft left over when I used valgrind-supplied library routines to check the "definedness" of a memory location.

I no longer use it in this patch. So I am creating a new local patch in which I took it out and also changed one other |ifdef USEVALGRIND| to |ifdef DEBUG|.

The patched source tree was checked by |../mach clang-flow -p ...|.

As for [bug 1242030](/show_bug.cgi?id=1242030 "NEW - Consolidated patch set from bug 1122698, bug 1134527, bug 1134529, bug 1174500"), I have tried a bit locally to reduce the open-coded debug printf statement by creating a few macros and functions so as not to clutter up the original source code superficially, but the problem is that there are SIMPLY TWO FEW CHECKS for low-level I/O failures,

I need to add the check and somehow transmits the failure status to the calling routine (and to the debugging console or human debugger) in some way or the other.: This latter dump is very important for me to analyze OSX and Windows failure because I am developing patches under linux only. Any I/O related failures that I can't reproduce under linux need to be analyzed by dumping detailed context on tryserver runs.

Anyway, I will try a bit more in that angle.

Thank you again for your comments.

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1608539#c19)• 5 years ago |
|  | |

Hello Chiaki, thanks a lot for your very helpful detective work and preparation. However, I'd prefer to drop most of your patch, and use a fix that is as minimal as possible. I think most of such debugging output should usually be limited to local testing, or to times of active development, but should be avoided for production code.

I've also done some testing. I've temporarily used a local boolean variable, to track whether m\_headerstartpos has already been initialized, or not, at the time we reach the delta value calculation.

I found an existing test in which m\_headerstartpos remains uninitialized:

comm/mailnews/local/test/unit/test\_nsIMsgParseMailMsgState.js

Then I've set m\_headerstartpos=0, then I looked at the calculation of the delta value. It correctly calculated the beginning of the X-Mozilla-Status value. I conclude that the calculation code is correct, and we simply have to init m\_headerstartpos=0.

Looking at the code that uses the delta value, it seems like past developers had already noticed some problems with that value, given their (hack) attempt to avoid very large values.

I suggest that we add an assertion, so we can notice in debug builds and tests if the delta has an unexpected big value.

I'm renaming the delta variable slightly, to ensure its purpose is more obvious.

Only if mozStatus is non-null the current code calculates the delta value, however, if the delta value is smaller then 0xffff, it's always used to call m\_newMsgHdr->SetStatusOffset(delta). That seems wrong, I suggest to only set the value if mozStatus is non-null.

Also, it's unclear why the code calls SetStatusOffset(), and then immediately reads the value back using GetStatusOffset(). I don't know if there's a desired side effect triggered by that, but I'm guessing this was done simply for the following assertion check. I've added a TODO comment to research this detail, and potentially remove those lines. But for now, I want to focus on the bug, and those lines cannot hurt, even if they are unnecessary.

Regarding the change from GetSize() to GetBufferPos(), it seems you're right, but let's move this change to [bug 1609607](/show_bug.cgi?id=1609607 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.").

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a1198050_36541)• 5 years ago |

[Attachment #9122300](/attachment.cgi?id=9122300&action=edit "patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.") -
Flags: review?(kaie)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1608539#c20)• 5 years ago |
|  | |

Attached patch

[1608539-v2.patch](attachment.cgi?id=9122915&action=diff) (obsolete)
— [Details](attachment.cgi?id=9122915&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122915)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1608539#c21)• 5 years ago |
|  | |

Comment on [attachment 9122915](/attachment.cgi?id=9122915 "1608539-v2.patch") [[details]](/attachment.cgi?id=9122915&action=edit "1608539-v2.patch") [[diff]](/attachment.cgi?id=9122915&action=diff "1608539-v2.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122915)
1608539-v2.patch
Chiaki, is my assumption correct, that this patch is sufficient to avoid the valgrind warning?
Magnus, this patch doesn't change the calculation. The primary fix is to provide a variable initialization. In addition, it renames a variable, it adds an assertion, it changes the "if statement" for using the delta value, and adds a comment.
[Attachment #9122915](/attachment.cgi?id=9122915&action=edit "1608539-v2.patch") -
Flags: review?(mkmelin+mozilla)
[Attachment #9122915](/attachment.cgi?id=9122915&action=edit "1608539-v2.patch") -
Flags: feedback?(ishikawa)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1608539#c22)• 5 years ago |
|  | |

Attached patch

[1608539-v3.patch](attachment.cgi?id=9122925&action=diff) (obsolete)
— [Details](attachment.cgi?id=9122925&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122925)

fix typo

[Attachment #9122915](/attachment.cgi?id=9122915&action=edit "1608539-v2.patch") -
Attachment is obsolete: true
[Attachment #9122915](/attachment.cgi?id=9122915&action=edit "1608539-v2.patch") -
Flags: review?(mkmelin+mozilla)
[Attachment #9122915](/attachment.cgi?id=9122915&action=edit "1608539-v2.patch") -
Flags: feedback?(ishikawa)
[Attachment #9122925](/attachment.cgi?id=9122925&action=edit "1608539-v3.patch") -
Flags: review?(mkmelin+mozilla)
[Attachment #9122925](/attachment.cgi?id=9122925&action=edit "1608539-v3.patch") -
Flags: feedback?(ishikawa)

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1608539#c23)• 5 years ago |
|  | |

(In reply to Kai Engert (:KaiE:) from [comment #19](/show_bug.cgi?id=1608539#c19 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()"))

> Hello Chiaki, thanks a lot for your very helpful detective work and preparation. However, I'd prefer to drop most of your patch, and use a fix that is as minimal as possible. I think most of such debugging output should usually be limited to local testing, or to times of active development, but should be avoided for production code.

Thank you for the new patch.

I will take note.

> Regarding the change from GetSize() to GetBufferPos(), it seems you're right, but let's move this change to [bug 1609607](/show_bug.cgi?id=1609607 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.").

Actually, I meant to put the patch to [bug 1609607](/show_bug.cgi?id=1609607 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.") and not this one. My mistake.

(In reply to Kai Engert (:KaiE:) from [comment #21](/show_bug.cgi?id=1608539#c21 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()"))

> Comment on [attachment 9122915](/attachment.cgi?id=9122915 "1608539-v2.patch") [[details]](/attachment.cgi?id=9122915&action=edit "1608539-v2.patch") [[diff]](/attachment.cgi?id=9122915&action=diff "1608539-v2.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122915)
>
> 1608539-v2.patch
>
> Chiaki, is my assumption correct, that this patch is sufficient to avoid the
>
> valgrind warning?

I will check the valgrind run with this patch.

> Magnus, this patch doesn't change the calculation. The primary fix is to
>
> provide a variable initialization. In addition, it renames a variable, it
>
> adds an assertion, it changes the "if statement" for using the delta value,
>
> and adds a comment.

|  | [Jorg K (CEST = GMT+2)](/user_profile?user_id=176914) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1608539#c24)• 5 years ago |
|  | |

Comment on [attachment 9122925](/attachment.cgi?id=9122925 "1608539-v3.patch") [[details]](/attachment.cgi?id=9122925&action=edit "1608539-v3.patch") [[diff]](/attachment.cgi?id=9122925&action=diff "1608539-v3.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122925)
1608539-v3.patch
Review of [attachment 9122925](/attachment.cgi?id=9122925 "1608539-v3.patch") [[details]](/attachment.cgi?id=9122925&action=edit "1608539-v3.patch") [[diff]](/attachment.cgi?id=9122925&action=diff "1608539-v3.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122925):
-----------------------------------------------------------------
::: mailnews/local/src/nsParseMailbox.cpp
@@ +1222,5 @@
> flags &= ~nsMsgMessageFlags::Priorities;
> }
> +
> + deltaToMozStatus = m\_headerstartpos +
> + (mozstatus->value - m\_headers.GetBuffer()) -
Did clang-format indent it this way? I could be wrong but I think it would have just indented that by four spaces.

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1608539#c25)• 5 years ago |
|  | |

Attached patch

[Reformatted Kai's patch.](attachment.cgi?id=9123029&action=diff) (obsolete)
— [Details](attachment.cgi?id=9123029&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123029)

(In reply to Jorg K (GMT+1) (no longer working on Thunderbird) from [comment #24](/show_bug.cgi?id=1608539#c24 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()"))

> Comment on [attachment 9122925](/attachment.cgi?id=9122925 "1608539-v3.patch") [[details]](/attachment.cgi?id=9122925&action=edit "1608539-v3.patch") [[diff]](/attachment.cgi?id=9122925&action=diff "1608539-v3.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122925)
>
> ...
>
> Did clang-format indent it this way? I could be wrong but I think it would
>
> have just indented that by four spaces.

I noticed that too.

I am testing the attached reformatted patch on local PC.

The whole valgrind run of xpcshell-test takes about 13 hours on my PC and it is into 6 hours now. So I can report the result either tonight or tomorrow morning.

(I kept the indentation of Kai's comment. clang-format is too eager to fill comment.

It should have a simple escape such as the paragraph starting with "leading space //\n" and

ending with "leading space//\n" is untouched. |// clang-format off|, and |// clang-format on| are rather ugly. But I digress. )

BTW, I have submitted [bug 1611567](/show_bug.cgi?id=1611567 "RESOLVED FIXED - C-C TB uninitialized memory access during xpcshell-test, comm/mailnews/base/test/unit/test_postPluginFilters.js, Uninitialised value was created by a stack allocation at ... nsMsgDatabase::SetStringPropertyByHdr(nsIMsgDBHdr*, char const*, char const*)"), another uninitialized memory access. I wonder if people can take a look at it.

(There is yet another one from my xpcshell-test. I have yet to determine if that is a false positive or not. Probably positive one.)

TIA

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1608539#c26)• 5 years ago |
|  | |

Good news. With Kai's patch (reformatted), there was no uninitialized memory access due to the bug here, it seems.

I could execute more tests by enlarging timeout values for some more tests by inserting

```
requesttimeoutfactor = 25

```

or similar or larger values in relevant xpcshell.ini .

But that resulted in longer test elapsed time obviously since I need to run tests sequentially so as not to intermix the logs from different tests.

From my log: it took almost 13 hours.

```
ENDING_SEC=$(date +"%s")
++ date +%s
+ ENDING_SEC=1579944658
echo "It took " $((ENDING_SEC - STARTING_SEC)) " seconds."
+ echo 'It took ' 46823 ' seconds.'
It took  46823  seconds.

```

It would be nice to have a valgrind run under linux x64 from time to time.: maybe twice a month on the tryserver.

|  | [Magnus Melin [:mkmelin]](/user_profile?user_id=101158) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a1268518_101158)• 5 years ago |

[Attachment #9122925](/attachment.cgi?id=9122925&action=edit "1608539-v3.patch") -
Flags: review?(mkmelin+mozilla) → review+

|  | [Magnus Melin [:mkmelin]](/user_profile?user_id=101158) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a1268541_101158)• 5 years ago |

Status: NEW → ASSIGNEDKeywords: [valgrind](/buglist.cgi?keywords=valgrind&resolution=---)

|  | [Jorg K (CEST = GMT+2)](/user_profile?user_id=176914) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1608539#c27)• 5 years ago |
|  | |

Comment on [attachment 9123029](/attachment.cgi?id=9123029 "Reformatted Kai's patch.") [[details]](/attachment.cgi?id=9123029&action=edit "Reformatted Kai's patch.") [[diff]](/attachment.cgi?id=9123029&action=diff "Reformatted Kai's patch.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123029)
Reformatted Kai's patch.
Review of [attachment 9123029](/attachment.cgi?id=9123029 "Reformatted Kai's patch.") [[details]](/attachment.cgi?id=9123029&action=edit "Reformatted Kai's patch.") [[diff]](/attachment.cgi?id=9123029&action=diff "Reformatted Kai's patch.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123029):
-----------------------------------------------------------------
::: mailnews/local/src/nsParseMailbox.cpp
@@ +1318,3 @@
> if (!m\_IgnoreXMozillaStatus) { // imap doesn't care about
> // X-MozillaStatus
> + // clang-format off
Please don't use clang-format off for comments!
It's bad enough we use it here and there for code, but there is no need for comments. Just let is reformat the comment, and tweak it later if it needs further tweaking.

|  | [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1608539#c28)• 5 years ago |
|  | |

(In reply to Jorg K (GMT+1) (no longer working on Thunderbird) from [comment #27](/show_bug.cgi?id=1608539#c27 "RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()"))

> Comment on [attachment 9123029](/attachment.cgi?id=9123029 "Reformatted Kai's patch.") [[details]](/attachment.cgi?id=9123029&action=edit "Reformatted Kai's patch.") [[diff]](/attachment.cgi?id=9123029&action=diff "Reformatted Kai's patch.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123029)
>
> Reformatted Kai's patch.
>
> ## Review of [attachment 9123029](/attachment.cgi?id=9123029 "Reformatted Kai's patch.") [[details]](/attachment.cgi?id=9123029&action=edit "Reformatted Kai's patch.") [[diff]](/attachment.cgi?id=9123029&action=diff "Reformatted Kai's patch.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123029):
>
> ::: mailnews/local/src/nsParseMailbox.cpp
>
> @@ +1318,3 @@
>
> > ```
> >      if (!m_IgnoreXMozillaStatus) {  // imap doesn't care about
> >                                      // X-MozillaStatus
> >
> > ```
> >
> > * ```
> >        // clang-format off
> >
> >   ```
>
> Please don't use clang-format off for comments!
>
> It's bad enough we use it here and there for code, but there is no need for
>
> comments. Just let is reformat the comment, and tweak it later if it needs
>
> further tweaking.

I can certainly revert the change re comment part.

However, I am a bit puzzled from the general point of workflow.

The way we use |../mach clang-format -p comm/directories.../... | for formatting patch is

after we modify source files (or apply a patch to them) then run the clang-format and then

create the patch. Correct?

But this means that

(1) if we run clang-format and come up with a change/patch and commit it, then

(2) tweak the comment part manually later as you suggest

and commit the change to the comment part later,

(3) the next person who touches the file and runs clang-format for her/his patch

will mess up the comment part modified manually in the step (2) above, does't s/he?

In a big file after an extensive change, comments may be messed up from the viewpoint of

clang-format.

And to be frank, someone doing the gratuitous formatting as scout-like cleanup,

when s/he notices the incorrect formatting of a previous patch as s/he creates a new patch

for further modification, may not care about letting clang-format to

fill the previous patch's comment paragraphs and mess up the intention of previous

manual tweak.

This is not an ideal work flow IMHO.

Just a thought, but I find this an obnoxious problem.

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1608539#c29)• 5 years ago |
|  | |

Attached patch

[1608539-v3c.patch](attachment.cgi?id=9123165&action=diff)
— [Details](attachment.cgi?id=9123165&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123165)

Chiaki, thank you very much for confirming the patch passes valgrind.

This updated patch reformats all of the code, including the comment.

No functional change, carrying forward r=mkmelin.

[Attachment #9122925](/attachment.cgi?id=9122925&action=edit "1608539-v3.patch") -
Attachment is obsolete: true
[Attachment #9123029](/attachment.cgi?id=9123029&action=edit "Reformatted Kai's patch.") -
Attachment is obsolete: true
[Attachment #9122925](/attachment.cgi?id=9122925&action=edit "1608539-v3.patch") -
Flags: feedback?(ishikawa)
[Attachment #9123165](/attachment.cgi?id=9123165&action=edit "1608539-v3c.patch") -
Flags: review+

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1608539#c30)• 5 years ago |
|  | |

<https://hg.mozilla.org/comm-central/rev/3420cbdab2ab5f2627d5a8535790bf65222f7928>

Status: ASSIGNED → RESOLVEDClosed: 5 years agoResolution: --- → FIXEDTarget Milestone: --- → Thunderbird 74.0

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1608539#c31)• 5 years ago |
|  | |

Comment on [attachment 9123165](/attachment.cgi?id=9123165 "1608539-v3c.patch") [[details]](/attachment.cgi?id=9123165&action=edit "1608539-v3c.patch") [[diff]](/attachment.cgi?id=9123165&action=diff "1608539-v3c.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123165)
1608539-v3c.patch
[Approval Request Comment]
User impact if declined: out-of-bounds memory access, random location
Asking for approval now, so I don't forget.
But let's bake for a few days on c-c, before making the approval decision.
[Attachment #9123165](/attachment.cgi?id=9123165&action=edit "1608539-v3c.patch") -
Flags: approval-comm-esr68?
[Attachment #9123165](/attachment.cgi?id=9123165&action=edit "1608539-v3c.patch") -
Flags: approval-comm-beta?

|  | [Magnus Melin [:mkmelin]](/user_profile?user_id=101158) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a1695838_101158)• 5 years ago |

[Attachment #9123165](/attachment.cgi?id=9123165&action=edit "1608539-v3c.patch") -
Flags: approval-comm-beta? → approval-comm-beta+

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a1698237_36541)• 5 years ago |

[status-thunderbird\_esr68](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=equals&v1=affected)
[tracking-thunderbird\_esr68](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=equals&v1=%3F)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a1700669_578488)• 5 years ago |

Alias: CVE-2020-6793

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a1704484_1689)• 5 years ago |

Group: mail-core-security → core-security-release

|  | [Rob Lemley [:rjl]](/user_profile?user_id=63411) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1608539#c32)• 5 years ago |
|  | |

Thunderbird 73.0b2:

<https://hg.mozilla.org/releases/comm-beta/rev/432f80bf179a1c0d7d5996ed879397cfa263918d>

[status-thunderbird73](/buglist.cgi?f1=cf_status_thunderbird_73&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_thunderbird_73&o1=equals&v1=fixed)

|  | [Magnus Melin [:mkmelin]](/user_profile?user_id=101158) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a2136583_101158)• 5 years ago |

[Attachment #9123165](/attachment.cgi?id=9123165&action=edit "1608539-v3c.patch") -
Flags: approval-comm-esr68? → approval-comm-esr68+

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1608539#c33)• 5 years ago |
|  | |

Rob, can you please land into comm-esr68? Thanks.

Flags: needinfo?(rob)

|  | [Rob Lemley [:rjl]](/user_profile?user_id=63411) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1608539#c34)• 5 years ago |
| uplift | |

comm-esr68:

<https://hg.mozilla.org/releases/comm-esr68/rev/1437b560776b>

Flags: needinfo?(rob)

|  | [Rob Lemley [:rjl]](/user_profile?user_id=63411) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a2270235_63411)• 5 years ago |

[status-thunderbird\_esr68](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=equals&v1=fixed)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a2315859_36541)• 5 years ago |

[tracking-thunderbird\_esr68](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=equals&v1=%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1608539#a18218601_1689)• 4 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1608539&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [ISHIKAWA, Chiaki (back from day job exhibition event.)](/user_profile?user_id=32503)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_ee633934_20250119_124240.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1606619)
* [XML](/show_bug.cgi?ctype=xml&id=1606619)

Closed
[Bug 1606619](/show_bug.cgi?id=1606619)
(CVE-2020-6794)

Opened 5 years ago
Closed 5 years ago

# key3.db encryption key remains on disk from Thunderbird 52.x (becomes issue if adding a master password post 60.x)

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

key3.db encryption key remains on disk from Thunderbird 52.x (becomes issue if adding a master password post 60.x)

## Categories

### (Thunderbird :: Security, defect)

[Product:](/describecomponents.cgi?product=Thunderbird)

Thunderbird
▾

Thunderbird
For bugs in MZLA's Thunderbird desktop mail client. Bugs in the back-end (e.g. protocols) should be filed in the [MailNews Core](https://bugzilla.mozilla.org/enter_bug.cgi?product=MailNews Core) product. Bugs in calendar should be filed in the [Calendar](https://bugzilla.mozilla.org/enter_bug.cgi?product=Calendar) product. Bugs for the chat features, file in the [Chat Core](https://bugzilla.mozilla.org/enter_bug.cgi?product=Chat%20Core) product.
[See Open Bugs in This Product](/buglist.cgi?product=Thunderbird&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Thunderbird)
Watch This Product

[Component:](/describecomponents.cgi?product=Thunderbird&component=Security#Security)

Security
▾

Thunderbird :: Security
For app-level security bugs.

If the problem relates to underlying components (PSM, NSS, Core, Toolkit) then please file it in the appropriate product instead of here.

[See Open Bugs in This Component](/buglist.cgi?product=Thunderbird&component=Security&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Thunderbird&component=Security&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Thunderbird&component=Security)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

60

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

## Tracking

### (thunderbird\_esr68+ fixed)

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

Thunderbird 74.0

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| thunderbird\_esr68 | [+](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-thunderbird |  | --- |
| thunderbird\_esr68 | + | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| thunderbird133 | --- | --- |
| thunderbird134 | --- | --- |
| thunderbird135 | --- | --- |
| thunderbird136 | --- | --- |

## People

### (Reporter: KaiE, Assigned: KaiE)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=40)  [KaiE](/user_profile?user_id=36541)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=40)  [KaiE](/user_profile?user_id=36541)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

13 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[1561368](/show_bug.cgi?id=1561368 "RESOLVED WONTFIX - NSS should delete key3.db after a successful migration to key4.db")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=1606619&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1606619)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1561366](/show_bug.cgi?id=1561366 "RESOLVED FIXED - Don't delete key3.db when upgrading to TB 68.x (backout bug 1475775)"), [1510212](/show_bug.cgi?id=1510212 "RESOLVED FIXED - Upgrading to Thunderbird 60.x from a berkeley DB based Profile to a sqlite one causes key data loss"), [1607652](/show_bug.cgi?id=1607652 "RESOLVED FIXED - Firefox won't delete key3.db if the profile path contains non-ASCII string on Windows")

## Details

### (Keywords: sec-moderate)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2020-6794

[Keywords:](/describekeywords.cgi)

[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | wanted-thunderbird |  |
| --- | --- | --- |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files, 3 obsolete files)

| [testing-bug-1606619.txt](/attachment.cgi?id=9119187)  [5 years ago](#c1)  [Kai Engert [:KaiE:]](/user_profile?user_id=36541)   2.51 KB, text/plain |  | [Details](/attachment.cgi?id=9119187&action=edit) |
| --- | --- | --- |
| [1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)](/attachment.cgi?id=9119188)  [5 years ago](#c2)  [Kai Engert [:KaiE:]](/user_profile?user_id=36541)   4.60 KB, patch | mkmelin : [review+](#c9 "5 years ago") | [Details](/attachment.cgi?id=9119188&action=edit) | [Diff](/attachment.cgi?id=9119188&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9119188) |
| [1606619-1607652.patch](/attachment.cgi?id=9120253)  [5 years ago](#c11)  [Kai Engert [:KaiE:]](/user_profile?user_id=36541)   1.37 KB, patch | emk : [review+](#c12 "5 years ago") | [Details](/attachment.cgi?id=9120253&action=edit) | [Diff](/attachment.cgi?id=9120253&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9120253) |
| [1606619-complete-v2.patch](/attachment.cgi?id=9120287)  [5 years ago](#c13)  [Kai Engert [:KaiE:]](/user_profile?user_id=36541)   5.31 KB, patch | KaiE : [review+](#c13 "5 years ago") | [Details](/attachment.cgi?id=9120287&action=edit) | [Diff](/attachment.cgi?id=9120287&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9120287) |
| [1606619-complete-v3.patch](/attachment.cgi?id=9120340)  [5 years ago](#c18)  [Kai Engert [:KaiE:]](/user_profile?user_id=36541)   5.54 KB, patch |  | [Details](/attachment.cgi?id=9120340&action=edit) | [Diff](/attachment.cgi?id=9120340&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9120340) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1606619#c0)• 5 years ago |
|  | |

We haven't yet fixed [bug 1475775](/show_bug.cgi?id=1475775 "RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)") in Thunderbird.

Because of the risk of key dataloss (e.g. [bug 1510212](/show_bug.cgi?id=1510212 "RESOLVED FIXED - Upgrading to Thunderbird 60.x from a berkeley DB based Profile to a sqlite one causes key data loss")), we're waiting for a solution that is more reliable than what Firefox had used as a fix.

Let's use this new bug to track fixing the issue in Thunderbird.

In separate NSS [bug 1561368](/show_bug.cgi?id=1561368 "RESOLVED WONTFIX - NSS should delete key3.db after a successful migration to key4.db") we're working out an appropriate solution, potentially at the NSS code level.

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1606619#a32_36541)• 5 years ago |

See Also: → [1561366](/show_bug.cgi?id=1561366 "RESOLVED FIXED - Don't delete key3.db when upgrading to TB 68.x (backout bug 1475775)")

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1606619#a64_36541)• 5 years ago |

See Also: → [1510212](/show_bug.cgi?id=1510212 "RESOLVED FIXED - Upgrading to Thunderbird 60.x from a berkeley DB based Profile to a sqlite one causes key data loss")

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1606619#c1)• 5 years ago |
|  | |

Attached file
[testing-bug-1606619.txt](attachment.cgi?id=9119187)
— [Details](attachment.cgi?id=9119187&action=edit)

Assignee: nobody → kaie

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1606619#a456351_36541)• 5 years ago |

Summary: Fix CVE-2018-12383 in Thunderbird → Fix CVE-2018-12383 in Thunderbird 68.x

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1606619#c2)• 5 years ago |
|  | |

Attached patch

[1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)](attachment.cgi?id=9119188&action=diff) (obsolete)
— [Details](attachment.cgi?id=9119188&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9119188)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1606619#c3)• 5 years ago |
|  | |

The attached patch applies to TB 68.x, only.

The patch doesn't make sense for any later Thunderbird versions, because:

* we didn't take [bug 1561366](/show_bug.cgi?id=1561366 "RESOLVED FIXED - Don't delete key3.db when upgrading to TB 68.x (backout bug 1475775)") for comm-central, which means, thunderbird versions 69.x+ already deleted key3.db
* mozilla branch 73+ has disabled support for key3.db (dbm file format) completely ([bug 1594931](/show_bug.cgi?id=1594931 "RESOLVED FIXED - Set disable_dbm to true on Firefox builds")), which means, versions 73+ are no longer able to perform a migration from key3.db to key4.db

If my patch is wrong, it will cause dataloss for those users who will upgrade from thunderbird 52.x to a thunderbird 68.x having this fix.

However, with the testing steps listed in the attached text file, which I have executed locally, I try to show that the patch will delete key3.db only after the migration was successful.

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1606619#a456956_36541)• 5 years ago |

[Attachment #9119188](/attachment.cgi?id=9119188&action=edit "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") -
Attachment description: 1606619-v1.patch → 1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)

|  | [Masatoshi Kimura [:emk]](/user_profile?user_id=5842) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1606619#c4)• 5 years ago |
|  | |

Comment on [attachment 9119188](/attachment.cgi?id=9119188 "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[details]](/attachment.cgi?id=9119188&action=edit "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[diff]](/attachment.cgi?id=9119188&action=diff "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9119188)
1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)
Review of [attachment 9119188](/attachment.cgi?id=9119188 "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[details]](/attachment.cgi?id=9119188&action=edit "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[diff]](/attachment.cgi?id=9119188&action=diff "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9119188):
-----------------------------------------------------------------
::: security/manager/ssl/SecretDecoderRing.cpp
@@ +200,5 @@
> + nsCOMPtr<nsIFile> file = do\_CreateInstance("@mozilla.org/file/local;1");
> + if (!file) {
> + return NS\_ERROR\_FAILURE;
> + }
> + nsresult rv = file->InitWithNativePath(path);
See [bug 1607652](/show_bug.cgi?id=1607652 "RESOLVED FIXED - Firefox won't delete key3.db if the profile path contains non-ASCII string on Windows").

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1606619#a516163_36541)• 5 years ago |

See Also: → [1607652](/show_bug.cgi?id=1607652 "RESOLVED FIXED - Firefox won't delete key3.db if the profile path contains non-ASCII string on Windows")

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1606619#c5)• 5 years ago |
|  | |

Bob, thanks again for your very helpful comments in [bug 1561368](/show_bug.cgi?id=1561368 "RESOLVED WONTFIX - NSS should delete key3.db after a successful migration to key4.db").

Bob, can I assume, if we aren't merging,

```
slot = PK11_GetInternalKeySlot()
bool done = !PK11_IsReadOnly(slot) && PK11_IsLoggedIn(slot, NULL);

```

and `done` is true, that the migration from key3.db to key4.db has already completed?

FYI, the attached patch implements the following strategy:

* don't remove key3.db by default (as Firefox does it)
* wait until we've successfully decrypted a string stored in the secret decoder. If that works, either no master password is configured, or the master password was correctly provided by the user.
* at this time, do a once-per-application-session check for the potential cleanup
* double-check that our internal token is really logged in (we assume this means the data was migrated), and that we aren't in read-only mode (this ensures that a migration to key4.db was allowed to be written to disk)
* confirm that key4.db exists on disk. If it doesn't exist, stop.
* check whether key3.db exists on disk. If it exists, delete it.
Flags: needinfo?(rrelyea)

|  | [Robert Relyea](/user_profile?user_id=11099) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1606619#c6)• 5 years ago |
|  | |

That should work. The only possible issue is if the update failed after the login in a way that it will try to update again. I don't see a good way of detecting this case.

Flags: needinfo?(rrelyea)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1606619#c7)• 5 years ago |
|  | |

Comment on [attachment 9119188](/attachment.cgi?id=9119188 "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[details]](/attachment.cgi?id=9119188&action=edit "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[diff]](/attachment.cgi?id=9119188&action=diff "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9119188)
1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)
Magnus, given Bob approved the strategy, are you OK to take this fix for stable Thunderbird 68.x (only)?
Any suggestion who might want to double-check my fix, by potentially playing with the separate test instructions I've attached?
[Attachment #9119188](/attachment.cgi?id=9119188&action=edit "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") -
Flags: review?(mkmelin+mozilla)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1606619#c8)• 5 years ago |
|  | |

regarding [comment 4](/show_bug.cgi?id=1606619#c4 "RESOLVED FIXED - key3.db encryption key remains on disk from Thunderbird 52.x (becomes issue if adding a master password post 60.x)"), I'd merge that fix into this patch once that one is reviewed

|  | [Magnus Melin [:mkmelin]](/user_profile?user_id=101158) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1606619#c9)• 5 years ago |
|  | |

Comment on [attachment 9119188](/attachment.cgi?id=9119188 "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[details]](/attachment.cgi?id=9119188&action=edit "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[diff]](/attachment.cgi?id=9119188&action=diff "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9119188)
1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)
Review of [attachment 9119188](/attachment.cgi?id=9119188 "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[details]](/attachment.cgi?id=9119188&action=edit "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[diff]](/attachment.cgi?id=9119188&action=diff "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9119188):
-----------------------------------------------------------------
Seems fine to me.
Maybe you can let Khushil go through the steps an see if he can verify.
[Attachment #9119188](/attachment.cgi?id=9119188&action=edit "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") -
Flags: review?(mkmelin+mozilla) → review+

|  | [Magnus Melin [:mkmelin]](/user_profile?user_id=101158) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1606619#a721352_101158)• 5 years ago |

Status: NEW → ASSIGNED

|  | [Masatoshi Kimura [:emk]](/user_profile?user_id=5842) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1606619#c10)• 5 years ago |
|  | |

Please port [bug 1607652](/show_bug.cgi?id=1607652 "RESOLVED FIXED - Firefox won't delete key3.db if the profile path contains non-ASCII string on Windows"). Thunderbird 68 is the last chance to upgrade from DBM and clean-up key3.db correctly without dataloss.

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1606619#c11)• 5 years ago |
|  | |

Attached patch

[1606619-1607652.patch](attachment.cgi?id=9120253&action=diff) (obsolete)
— [Details](attachment.cgi?id=9120253&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9120253)

emk, can you please review this incremental patch, to confirm it's correctly and completely merged for the key3.db scenario?

[Attachment #9120253](/attachment.cgi?id=9120253&action=edit "1606619-1607652.patch") -
Flags: review?(VYV03354)

|  | [Masatoshi Kimura [:emk]](/user_profile?user_id=5842) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1606619#c12)• 5 years ago |
|  | |

Comment on [attachment 9120253](/attachment.cgi?id=9120253 "1606619-1607652.patch") [[details]](/attachment.cgi?id=9120253&action=edit "1606619-1607652.patch") [[diff]](/attachment.cgi?id=9120253&action=diff "1606619-1607652.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9120253)
1606619-1607652.patch
Review of [attachment 9120253](/attachment.cgi?id=9120253 "1606619-1607652.patch") [[details]](/attachment.cgi?id=9120253&action=edit "1606619-1607652.patch") [[diff]](/attachment.cgi?id=9120253&action=diff "1606619-1607652.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9120253):
-----------------------------------------------------------------
LGTM
[Attachment #9120253](/attachment.cgi?id=9120253&action=edit "1606619-1607652.patch") -
Flags: review?(VYV03354) → review+

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1606619#c13)• 5 years ago |
|  | |

Attached patch

[1606619-complete-v2.patch](attachment.cgi?id=9120287&action=diff) (obsolete)
— [Details](attachment.cgi?id=9120287&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9120287)

This patch combines the two earlier patches into a single patch, and adds a review comment.

[Attachment #9119188](/attachment.cgi?id=9119188&action=edit "1606619-v1.patch (intended for the fork of the Mozilla repository used by Thunderbird 68.x)") -
Attachment is obsolete: true
[Attachment #9120253](/attachment.cgi?id=9120253&action=edit "1606619-1607652.patch") -
Attachment is obsolete: true
[Attachment #9120287](/attachment.cgi?id=9120287&action=edit "1606619-complete-v2.patch") -
Flags: review+

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1606619#c14)• 5 years ago |
|  | |

(In reply to Magnus Melin [:mkmelin] from [comment #9](/show_bug.cgi?id=1606619#c9 "RESOLVED FIXED - key3.db encryption key remains on disk from Thunderbird 52.x (becomes issue if adding a master password post 60.x)"))

> Maybe you can let Khushil go through the steps an see if he can verify.

Hi Khushil, may I ask for your help to test this change?

I haven't been able to create a try build yet, so you'd have to build locally.

Only for comm-esr68, and the patch is for mozilla-esr68 and THUNDERBIRD\_68\_VERBRANCH.

Test instructions are attached, too.

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1606619#c15)• 5 years ago |
|  | |

Khushil, please see [comment 14](/show_bug.cgi?id=1606619#c14 "RESOLVED FIXED - key3.db encryption key remains on disk from Thunderbird 52.x (becomes issue if adding a master password post 60.x)").

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1606619#c16)• 5 years ago |
|  | |

Looks like the try server is down, so maybe I'll be able to create a test build a bit later.

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1606619#c17)• 5 years ago |
|  | |

They've fixed it.

Try build running here:

<https://treeherder.mozilla.org/#/jobs?repo=try-comm-central&revision=49cdb3d083ba692b84af334edc21a86a38c3e42d>

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1606619#c18)• 5 years ago |
|  | |

Attached patch

[1606619-complete-v3.patch](attachment.cgi?id=9120340&action=diff)
— [Details](attachment.cgi?id=9120340&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9120340)

(In reply to Kai Engert (:KaiE:) from [comment #17](/show_bug.cgi?id=1606619#c17 "RESOLVED FIXED - key3.db encryption key remains on disk from Thunderbird 52.x (becomes issue if adding a master password post 60.x)"))

> Try build running here:
>
> <https://treeherder.mozilla.org/#/jobs?repo=try-comm-central&revision=49cdb3d083ba692b84af334edc21a86a38c3e42d>

The above has builds for Linux and Mac.

Windows build had failed because of a missing include. This updated patch fixes it. Successful try build for Windows is here:

<https://treeherder.mozilla.org/#/jobs?repo=try-comm-central&revision=0264197e4bd32135e3eb454df21e70ccbe39a01d>

[Attachment #9120287](/attachment.cgi?id=9120287&action=edit "1606619-complete-v2.patch") -
Attachment is obsolete: true

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1606619#c19)• 5 years ago |
|  | |

Comment on [attachment 9120340](/attachment.cgi?id=9120340 "1606619-complete-v3.patch") [[details]](/attachment.cgi?id=9120340&action=edit "1606619-complete-v3.patch") [[diff]](/attachment.cgi?id=9120340&action=diff "1606619-complete-v3.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9120340)

1606619-complete-v3.patch

### ESR Uplift Approval Request

* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**: ESR 68.x is the last chance to fix this CVE for Thunderbird. We'll be unable to cleanup key3.db in TB 78, because TB 78 will no longer be able to perform a data migration.
* **User impact if declined**: Users having upgraded from TB 52.x will still be exposed to the security issue, because unprotected key3.db will remain on disk.
* **Fix Landed on Version**: n/a
* **Risk to taking this patch**: Medium
* **Why is the change risky/not risky? (and alternatives if risky)**: There's a small potential risk for dataloss (of saved passwords and private keys), for people who'll upgrade directly from TB 52.x to TB 68.x with this fix. Bob Relyea stated that in theory, the logic we use to conclude that "migration to key4.db has completed" might produce a false positive in an edge case scenario, but he isn't aware of a way to test for that edge case.

  Not at risk are people who have already used TB 60.x or previous TB 68.x for a while, and have already entered their master password several times. Those should certainly have been migrated successfully already.
* **String or UUID changes made by this patch**: none
[Attachment #9120340](/attachment.cgi?id=9120340&action=edit "1606619-complete-v3.patch") -
Flags: approval-mozilla-esr68?

|  | [Jorg K (CEST = GMT+2)](/user_profile?user_id=176914) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1606619#c20)• 5 years ago |
|  | |

Umm, is this a request for mozilla-esr68 trunk or THUNDERBIRD\_68\_VERBRANCH? For the latter, we don't ask for approval, we just land it there ;-)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1606619#c21)• 5 years ago |
|  | |

Comment on [attachment 9120340](/attachment.cgi?id=9120340 "1606619-complete-v3.patch") [[details]](/attachment.cgi?id=9120340&action=edit "1606619-complete-v3.patch") [[diff]](/attachment.cgi?id=9120340&action=diff "1606619-complete-v3.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9120340)
1606619-complete-v3.patch
Yeah, sorry, approval request for THUNDERBIRD\_68\_VERBRANCH.
Jörg, those comments were intended for you, to clarify and document the risks.
Before landing, we should wait for a positive test feedback from either Khushil or emk.
[Attachment #9120340](/attachment.cgi?id=9120340&action=edit "1606619-complete-v3.patch") -
Flags: approval-mozilla-esr68?

|  | [Khushil Mistry [:khushil324]](/user_profile?user_id=613936) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1606619#c22)• 5 years ago |
|  | |

Yes, it worked. I followed all the steps and finally, key3.db was not there in the profile.

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1606619#c23)• 5 years ago |
|  | |

Khushil, thanks for testing.

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1606619#c24)• 5 years ago |
|  | |

Hello Aryx, could you please commit [attachment 9120340](/attachment.cgi?id=9120340 "1606619-complete-v3.patch") [[details]](/attachment.cgi?id=9120340&action=edit "1606619-complete-v3.patch") [[diff]](/attachment.cgi?id=9120340&action=diff "1606619-complete-v3.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1606619&attachment=9120340) on mozilla-esr68/THUNDERBIRD\_68\_VERBRANCH ?

Thanks in advance

|  | [Magnus Melin [:mkmelin]](/user_profile?user_id=101158) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1606619#c25)• 5 years ago |
|  | |

Aryx, see [comment 24](/show_bug.cgi?id=1606619#c24 "RESOLVED FIXED - key3.db encryption key remains on disk from Thunderbird 52.x (becomes issue if adding a master password post 60.x)").

Flags: needinfo?(aryx.bugmail)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1606619#a2415507_36541)• 5 years ago |

[status-thunderbird\_esr68](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=equals&v1=affected)
[tracking-thunderbird\_esr68](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=equals&v1=%3F)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1606619#a2415769_36541)• 5 years ago |

Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1606619#c26)• 5 years ago |
|  | |

Updating summary to match description from original Firefox [bug 1475775](/show_bug.cgi?id=1475775 "RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)") ([CVE-2018-12383](https://www.cve.org/CVERecord?id=CVE-2018-12383)).

Summary: Fix CVE-2018-12383 in Thunderbird 68.x → key3.db encryption key remains on disk from Thunderbird 52.x (becomes issue if adding a master password post 60.x)

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1606619#c27)• 5 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1606619&comment_id=14616747 "1 revision") |
|  | |

[deleted, double post]

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1606619#c28)• 5 years ago |
|  | |

Hello Red Hat / CentOS people, cc'ing you FYI. If you have older RHEL branches that use patched NSS/FF/TB that is hardcoded to use key3.db/DBM, and which also gets Thunderbird 68.x updates, then you probably want to verify this patch is safe for you.

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1606619#a2417950_578488)• 5 years ago |

Alias: CVE-2020-6794

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1606619#c29)• 5 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-esr68/rev/661669a9175b755a43bde8a1a6594cd93f3f75df>

Shall this only land on mozilla-central?

Status: ASSIGNED → RESOLVEDClosed: 5 years ago
[status-thunderbird\_esr68](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_thunderbird_esr68&o1=equals&v1=fixed)Flags: needinfo?(aryx.bugmail)Resolution: --- → FIXEDTarget Milestone: --- → Thunderbird 68.0

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1606619#c30)• 5 years ago |
|  | |

> Shall this only land on mozilla-central?

No. Only for Thunderbird 68. Firefox already fixed this differently in [bug 1475775](/show_bug.cgi?id=1475775 "RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)").

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1606619#c31)• 5 years ago |
|  | |

We'll attribute Jurgen as the original reporter of this Thunderbird issue, because it's the same as the Firefox issue reported in [bug 1475775](/show_bug.cgi?id=1475775 "RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)").

|  | [Kai Engert [:KaiE:]](/user_profile?user_id=36541)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1606619#a3033083_36541)• 5 years ago |

[tracking-thunderbird\_esr68](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_thunderbird_esr68&o1=equals&v1=%2B)

|  | [Magnus Melin [:mkmelin]](/user_profile?user_id=101158) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1606619#a3536278_101158)• 5 years ago |

Target Milestone: Thunderbird 68.0 → Thunderbird 74.0
You need to [log in](/show_bug.cgi?id=1606619&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Kai Engert [:KaiE:]](/user_profile?user_id=36541)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from security.gentoo.org_44adb626_20250119_124240.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Mozilla Thunderbird: Multiple vulnerabilities — GLSA **202003-10**

Multiple vulnerabilities have been found in Mozilla Thunderbird,
the worst of which could result in the arbitrary execution of code.

### Affected packages

| Package | **mail-client/thunderbird** on all architectures |
| --- | --- |
| Affected versions | < **68.6.0** |
| Unaffected versions | >= **68.6.0** |

| Package | **mail-client/thunderbird-bin** on all architectures |
| --- | --- |
| Affected versions | < **68.6.0** |
| Unaffected versions | >= **68.6.0** |

### Background

Mozilla Thunderbird is a popular open-source email client from the
Mozilla project.

### Description

Multiple vulnerabilities have been discovered in Mozilla Thunderbird.
Please review the CVE identifiers referenced below for details.

### Impact

A remote attacker may be able to execute arbitrary code, cause a Denial
of Service condition, obtain sensitive information, or conduct Cross-Site
Request Forgery (CSRF).

### Workaround

There is no known workaround at this time.

### Resolution

All Mozilla Thunderbird users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=mail-client/thunderbird-68.6.0"

```

All Mozilla Thunderbird binary users should upgrade to the latest
version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose
 ">=mail-client/thunderbird-bin-68.6.0"

```
### References

* [MFSA-2019-35](https://www.mozilla.org/en-US/security/advisories/mfsa2019-35/)
* [MFSA-2019-37](https://www.mozilla.org/en-US/security/advisories/mfsa2019-37/)
* [MFSA-2020-07](https://www.mozilla.org/en-US/security/advisories/mfsa2020-07/)
* [MFSA-2020-10](https://www.mozilla.org/en-US/security/advisories/mfsa2020-10/)
* [CVE-2019-11745](https://nvd.nist.gov/vuln/detail/CVE-2019-11745)
* [CVE-2019-11757](https://nvd.nist.gov/vuln/detail/CVE-2019-11757)
* [CVE-2019-11759](https://nvd.nist.gov/vuln/detail/CVE-2019-11759)
* [CVE-2019-11760](https://nvd.nist.gov/vuln/detail/CVE-2019-11760)
* [CVE-2019-11761](https://nvd.nist.gov/vuln/detail/CVE-2019-11761)
* [CVE-2019-11762](https://nvd.nist.gov/vuln/detail/CVE-2019-11762)
* [CVE-2019-11763](https://nvd.nist.gov/vuln/detail/CVE-2019-11763)
* [CVE-2019-11764](https://nvd.nist.gov/vuln/detail/CVE-2019-11764)
* [CVE-2019-17005](https://nvd.nist.gov/vuln/detail/CVE-2019-17005)
* [CVE-2019-17008](https://nvd.nist.gov/vuln/detail/CVE-2019-17008)
* [CVE-2019-17010](https://nvd.nist.gov/vuln/detail/CVE-2019-17010)
* [CVE-2019-17011](https://nvd.nist.gov/vuln/detail/CVE-2019-17011)
* [CVE-2019-17012](https://nvd.nist.gov/vuln/detail/CVE-2019-17012)
* [CVE-2019-20503](https://nvd.nist.gov/vuln/detail/CVE-2019-20503)
* [CVE-2020-6792](https://nvd.nist.gov/vuln/detail/CVE-2020-6792)
* [CVE-2020-6793](https://nvd.nist.gov/vuln/detail/CVE-2020-6793)
* [CVE-2020-6794](https://nvd.nist.gov/vuln/detail/CVE-2020-6794)
* [CVE-2020-6795](https://nvd.nist.gov/vuln/detail/CVE-2020-6795)
* [CVE-2020-6798](https://nvd.nist.gov/vuln/detail/CVE-2020-6798)
* [CVE-2020-6800](https://nvd.nist.gov/vuln/detail/CVE-2020-6800)
* [CVE-2020-6805](https://nvd.nist.gov/vuln/detail/CVE-2020-6805)
* [CVE-2020-6806](https://nvd.nist.gov/vuln/detail/CVE-2020-6806)
* [CVE-2020-6807](https://nvd.nist.gov/vuln/detail/CVE-2020-6807)
* [CVE-2020-6811](https://nvd.nist.gov/vuln/detail/CVE-2020-6811)
* [CVE-2020-6812](https://nvd.nist.gov/vuln/detail/CVE-2020-6812)
* [CVE-2020-6814](https://nvd.nist.gov/vuln/detail/CVE-2020-6814)

**Release date**

March 14, 2020

**Latest revision**

March 14, 2020: 1

**Severity**

high

**Exploitable**

remote

**Bugzilla entries**

* [698516](https://bugs.gentoo.org/show_bug.cgi?id=698516)
* [702638](https://bugs.gentoo.org/show_bug.cgi?id=702638)
* [709350](https://bugs.gentoo.org/show_bug.cgi?id=709350)
* [712518](https://bugs.gentoo.org/show_bug.cgi?id=712518)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from usn.ubuntu.com_f34c5689_20250119_124241.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-4328-1: Thunderbird vulnerabilities

13 April 2020

Several security issues were fixed in Thunderbird.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 19.10](/security/notices?release=eoan)
* [Ubuntu 18.04 ESM](/security/notices?release=bionic)

## Packages

* [thunderbird](/security/cves?package=thunderbird) - Mozilla Open Source mail and newsgroup client

## Details

It was discovered that Message ID calculation was based on uninitialized

data. An attacker could potentially exploit this to obtain sensitive

information. ([CVE-2020-6792](/security/CVE-2020-6792))

Mutiple security issues were discovered in Thunderbird. If a user were

tricked in to opening a specially crafted message, an attacker could

potentially exploit these to cause a denial of service, obtain sensitive

information, or execute arbitrary code. ([CVE-2020-6793](/security/CVE-2020-6793), [CVE-2020-6795](/security/CVE-2020-6795),

[CVE-2020-6822](/security/CVE-2020-6822))

It was discovered that if a user saved passwords before Thunderbird 60

and then later set a master password, an unencrypted copy of these

passwords would still be accessible. A local user could exploit this to

obtain sensitive information. ([CVE-2020-6794](/security/CVE-2020-6794))

Multiple security issues were discovered in Thunderbird. If a user were

tricked in to opening a specially crafted website in a browsing context,

an attacker could potentially exploit these to cause a denial of service,

conduct cross-site scripting (XSS) attacks, obtain sensitive information,

or execute arbitrary code. ([CVE-2019-20503](/security/CVE-2019-20503), [CVE-2020-6798](/security/CVE-2020-6798), [CVE-2020-6800](/security/CVE-2020-6800),

[CVE-2020-6805](/security/CVE-2020-6805), [CVE-2020-6806](/security/CVE-2020-6806), [CVE-2020-6807](/security/CVE-2020-6807), [CVE-2020-6812](/security/CVE-2020-6812), [CVE-2020-6814](/security/CVE-2020-6814),

[CVE-2020-6819](/security/CVE-2020-6819), [CVE-2020-6820](/security/CVE-2020-6820), [CVE-2020-6821](/security/CVE-2020-6821), [CVE-2020-6825](/security/CVE-2020-6825))

It was discovered that the Devtools’ ‘Copy as cURL’ feature did not

fully escape website-controlled data. If a user were tricked in to using

the ‘Copy as cURL’ feature to copy and paste a command with specially

crafted data in to a terminal, an attacker could potentially exploit this

to execute arbitrary commands via command injection. ([CVE-2020-6811](/security/CVE-2020-6811))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 19.10

* [thunderbird](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
  -
  [1:68.7.0+build1-0ubuntu0.19.10.1](https://launchpad.net/ubuntu/%2Bsource/thunderbird/1%3A68.7.0%2Bbuild1-0ubuntu0.19.10.1)

##### Ubuntu 18.04

* [thunderbird](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
  -
  [1:68.7.0+build1-0ubuntu0.18.04.1](https://launchpad.net/ubuntu/%2Bsource/thunderbird/1%3A68.7.0%2Bbuild1-0ubuntu0.18.04.1)

After a standard system update you need to restart Thunderbird to make

all the necessary changes.

## References

* [CVE-2020-6792](/security/CVE-2020-6792)
* [CVE-2020-6793](/security/CVE-2020-6793)
* [CVE-2020-6794](/security/CVE-2020-6794)
* [CVE-2020-6795](/security/CVE-2020-6795)
* [CVE-2020-6798](/security/CVE-2020-6798)
* [CVE-2020-6800](/security/CVE-2020-6800)
* [CVE-2019-20503](/security/CVE-2019-20503)
* [CVE-2020-6805](/security/CVE-2020-6805)
* [CVE-2020-6806](/security/CVE-2020-6806)
* [CVE-2020-6807](/security/CVE-2020-6807)
* [CVE-2020-6811](/security/CVE-2020-6811)
* [CVE-2020-6812](/security/CVE-2020-6812)
* [CVE-2020-6814](/security/CVE-2020-6814)
* [CVE-2020-6819](/security/CVE-2020-6819)
* [CVE-2020-6820](/security/CVE-2020-6820)
* [CVE-2020-6821](/security/CVE-2020-6821)
* [CVE-2020-6822](/security/CVE-2020-6822)
* [CVE-2020-6825](/security/CVE-2020-6825)

## Related notices

* [USN-4335-1](/security/notices/USN-4335-1)
* [USN-4278-1](/security/notices/USN-4278-1)
* [USN-4278-2](/security/notices/USN-4278-2)
* [USN-4299-1](/security/notices/USN-4299-1)
* [USN-4317-1](/security/notices/USN-4317-1)
* [USN-4323-1](/security/notices/USN-4323-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from usn.ubuntu.com_65cb1c48_20250119_124242.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-4335-1: Thunderbird vulnerabilities

21 April 2020

Several security issues were fixed in Thunderbird.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 16.04 ESM](/security/notices?release=xenial)

## Packages

* [thunderbird](/security/cves?package=thunderbird) - Mozilla Open Source mail and newsgroup client

## Details

Multiple security issues were discovered in Thunderbird. If a user were

tricked in to opening a specially crafted website in a browsing context,

an attacker could potentially exploit these to cause a denial of service,

obtain sensitive information, bypass security restrictions, bypass

same-origin restrictions, conduct cross-site scripting (XSS) attacks, or

execute arbitrary code. ([CVE-2019-11757](/security/CVE-2019-11757), [CVE-2019-11758](/security/CVE-2019-11758), [CVE-2019-11759](/security/CVE-2019-11759),

[CVE-2019-11760](/security/CVE-2019-11760), [CVE-2019-11761](/security/CVE-2019-11761), [CVE-2019-11762](/security/CVE-2019-11762), [CVE-2019-11763](/security/CVE-2019-11763),

[CVE-2019-11764](/security/CVE-2019-11764), [CVE-2019-17005](/security/CVE-2019-17005), [CVE-2019-17008](/security/CVE-2019-17008), [CVE-2019-17010](/security/CVE-2019-17010),

[CVE-2019-17011](/security/CVE-2019-17011), [CVE-2019-17012](/security/CVE-2019-17012), [CVE-2019-17016](/security/CVE-2019-17016), [CVE-2019-17017](/security/CVE-2019-17017),

[CVE-2019-17022](/security/CVE-2019-17022), [CVE-2019-17024](/security/CVE-2019-17024), [CVE-2019-17026](/security/CVE-2019-17026), [CVE-2019-20503](/security/CVE-2019-20503),

[CVE-2020-6798](/security/CVE-2020-6798), [CVE-2020-6800](/security/CVE-2020-6800), [CVE-2020-6805](/security/CVE-2020-6805), [CVE-2020-6806](/security/CVE-2020-6806), [CVE-2020-6807](/security/CVE-2020-6807),

[CVE-2020-6812](/security/CVE-2020-6812), [CVE-2020-6814](/security/CVE-2020-6814), [CVE-2020-6819](/security/CVE-2020-6819), [CVE-2020-6820](/security/CVE-2020-6820), [CVE-2020-6821](/security/CVE-2020-6821),

[CVE-2020-6825](/security/CVE-2020-6825))

It was discovered that NSS incorrectly handled certain memory operations.

A remote attacker could potentially exploit this to cause a denial of

service, or execute arbitrary code. ([CVE-2019-11745](/security/CVE-2019-11745))

It was discovered that a specially crafted S/MIME message with an inner

encryption layer could be displayed as having a valid signature in some

circumstances, even if the signer had no access to the encrypted message.

An attacker could potentially exploit this to spoof the message author.

([CVE-2019-11755](/security/CVE-2019-11755))

A heap overflow was discovered in the expat library in Thunderbird. If a

user were tricked in to opening a specially crafted message, an attacker

could potentially exploit this to cause a denial of service, or execute

arbitrary code. ([CVE-2019-15903](/security/CVE-2019-15903))

It was discovered that Message ID calculation was based on uninitialized

data. An attacker could potentially exploit this to obtain sensitive

information. ([CVE-2020-6792](/security/CVE-2020-6792))

Mutiple security issues were discovered in Thunderbird. If a user were

tricked in to opening a specially crafted message, an attacker could

potentially exploit these to cause a denial of service, obtain sensitive

information, or execute arbitrary code. ([CVE-2020-6793](/security/CVE-2020-6793), [CVE-2020-6795](/security/CVE-2020-6795),

[CVE-2020-6822](/security/CVE-2020-6822))

It was discovered that if a user saved passwords before Thunderbird 60 and

then later set a primary password, an unencrypted copy of these passwords

would still be accessible. A local user could exploit this to obtain

sensitive information. ([CVE-2020-6794](/security/CVE-2020-6794))

It was discovered that the Devtools’ ‘Copy as cURL’ feature did not

fully escape website-controlled data. If a user were tricked in to using

the ‘Copy as cURL’ feature to copy and paste a command with specially

crafted data in to a terminal, an attacker could potentially exploit this

to execute arbitrary commands via command injection. ([CVE-2020-6811](/security/CVE-2020-6811))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 16.04

* [thunderbird](https://launchpad.net/ubuntu/%2Bsource/thunderbird)
  -
  [1:68.7.0+build1-0ubuntu0.16.04.2](https://launchpad.net/ubuntu/%2Bsource/thunderbird/1%3A68.7.0%2Bbuild1-0ubuntu0.16.04.2)

After a standard system update you need to restart Thunderbird to make

all the necessary changes.

## References

* [CVE-2019-11745](/security/CVE-2019-11745)
* [CVE-2019-11755](/security/CVE-2019-11755)
* [CVE-2019-11757](/security/CVE-2019-11757)
* [CVE-2019-11758](/security/CVE-2019-11758)
* [CVE-2019-11759](/security/CVE-2019-11759)
* [CVE-2019-11760](/security/CVE-2019-11760)
* [CVE-2019-11761](/security/CVE-2019-11761)
* [CVE-2019-11762](/security/CVE-2019-11762)
* [CVE-2019-11763](/security/CVE-2019-11763)
* [CVE-2019-11764](/security/CVE-2019-11764)
* [CVE-2019-15903](/security/CVE-2019-15903)
* [CVE-2019-17005](/security/CVE-2019-17005)
* [CVE-2019-17008](/security/CVE-2019-17008)
* [CVE-2019-17010](/security/CVE-2019-17010)
* [CVE-2019-17011](/security/CVE-2019-17011)
* [CVE-2019-17012](/security/CVE-2019-17012)
* [CVE-2019-17016](/security/CVE-2019-17016)
* [CVE-2019-17017](/security/CVE-2019-17017)
* [CVE-2019-17022](/security/CVE-2019-17022)
* [CVE-2019-17024](/security/CVE-2019-17024)
* [CVE-2019-17026](/security/CVE-2019-17026)
* [CVE-2019-20503](/security/CVE-2019-20503)
* [CVE-2020-6792](/security/CVE-2020-6792)
* [CVE-2020-6793](/security/CVE-2020-6793)
* [CVE-2020-6794](/security/CVE-2020-6794)
* [CVE-2020-6795](/security/CVE-2020-6795)
* [CVE-2020-6798](/security/CVE-2020-6798)
* [CVE-2020-6800](/security/CVE-2020-6800)
* [CVE-2020-6805](/security/CVE-2020-6805)
* [CVE-2020-6806](/security/CVE-2020-6806)
* [CVE-2020-6807](/security/CVE-2020-6807)
* [CVE-2020-6811](/security/CVE-2020-6811)
* [CVE-2020-6812](/security/CVE-2020-6812)
* [CVE-2020-6814](/security/CVE-2020-6814)
* [CVE-2020-6819](/security/CVE-2020-6819)
* [CVE-2020-6820](/security/CVE-2020-6820)
* [CVE-2020-6821](/security/CVE-2020-6821)
* [CVE-2020-6822](/security/CVE-2020-6822)
* [CVE-2020-6825](/security/CVE-2020-6825)

## Related notices

* [USN-4216-2](/security/notices/USN-4216-2)
* [USN-4216-1](/security/notices/USN-4216-1)
* [USN-4241-1](/security/notices/USN-4241-1)
* [USN-4203-1](/security/notices/USN-4203-1)
* [USN-4203-2](/security/notices/USN-4203-2)
* [USN-4202-1](/security/notices/USN-4202-1)
* [USN-4165-1](/security/notices/USN-4165-1)
* [USN-4132-2](/security/notices/USN-4132-2)
* [USN-4132-1](/security/notices/USN-4132-1)
* [USN-4852-1](/security/notices/USN-4852-1)
* [USN-5455-1](/security/notices/USN-5455-1)
* [USN-7199-1](/security/notices/USN-7199-1)
* [USN-4234-1](/security/notices/USN-4234-1)
* [USN-4328-1](/security/notices/USN-4328-1)
* [USN-4299-1](/security/notices/USN-4299-1)
* [USN-4278-1](/security/notices/USN-4278-1)
* [USN-4278-2](/security/notices/USN-4278-2)
* [USN-4317-1](/security/notices/USN-4317-1)
* [USN-4323-1](/security/notices/USN-4323-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from wiki.mozilla.org_73f8d6fa_20250119_141542.html ===


# BMO/UserGuide/BugFields

From MozillaWiki
< [BMO](/BMO "BMO")‎ | [UserGuide](/BMO/UserGuide "BMO/UserGuide")

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)
## Bugzilla Field Descriptions

Alias
A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.Assignee
This is the person in charge of resolving the bug. Every time this field changes, the status changes to NEW to make it easy to see which new bugs have appeared on a person's list.Blocks
This bug must be resolved before the bugs listed in this field can be resolved.Bug ID
The numeric id of a bug, unique within this entire installation of Bugzilla.CC
Users who may not have a direct role to play on this bug, but who are interested in its progress.Changed
When this bug was last updated.Classification
Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorization.Comment
Bugs have comments added to them by Bugzilla users. You can search for some text in those comments.Comment Tag
Comments can have arbitrary tags added to them to help with filtering as well as mark comments as spam or abusive.Component
Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.Creation date
When the bug was filed.Depends on
The bugs listed here must be resolved before this bug can be resolved.Duplicates
List of bugs that have been marked a duplicate of the bug currently being viewed.Keywords
Keywords are a controlled vocabulary for characterizing bugs across Products and Components. Examples of this field are `regression`, `sec-high`, and `topcrash`. Bugzilla administrators manage [the list of keywords](https://bugzilla.mozilla.org/describekeywords.cgi). If you believe you need a new keyword, [please contact the administrators to discuss](https://bugzilla.mozilla.org/enter_bug.cgi?product=bugzilla.mozilla.org&component=Administration).Mentors
Mentors are users who have offered to help the bug owner with such tasks as setting up a development environment, finding relevant information to fixing the bug, how to submit a patch for review, and finally how to get the fix committed.Needinfo
More information has been requested from specific individuals, or anyone, to move the bug forward to completion.OS
This is the operating system against which the bug was reported.Platform
This is the hardware platform against which the bug was reported (ARM, ARM64, x86, x86\_64, etc).Priority

| Priority | Description |
| --- | --- |
| **--** | No decision |
| **P1** | Fix in the current release cycle |
| **P2** | Fix in the next release cycle or the following (nightly + 1 or nightly + 2) |
| **P3** | Backlog |
| **P4** | Do not use. This priority is for the Web Platform Test bot. |
| **P5** | Will not fix, but will accept a patch |

This field describes the importance and order in which a bug should be fixed compared to other bugs. This field is utilized by the programmers/engineers/release managers/managers to prioritize the work to be done. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [priority definitions](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/priority.html), or for the main Bugzilla project, [Bugzilla:Priority\_System](/Bugzilla%3APriority_System "Bugzilla:Priority System").Product
Bugs are categorised into Products and Components. Select a Classification to narrow down this list.QA Contact
The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.Rank
Used by some groups to provide finer-grained ordering for working on bugs than afforded by the Priority field. Use of this field is restricted to the `rank-setters` group.Regressed by
This bug has been introduced by the bugs listed here.Regressions
This bug has introduced the bugs listed here.Reporter
The person who filed this bug.See Also
This allows you to refer to bugs in other bug tracker installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other bug tracker installations, or bugs which are related to, but not known to be duplicates of the bug. Bugs which are regressions should be listed in the Regressed by field (above)Severity
This field describes the impact of a bug. This field is utilized by the programmers/engineers/release managers/managers to determine the severity of issues and used as input for the priority of the bug. It should not be set by people filing bugs. See the Firefox [triage documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html) and [severity documentation](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/severity.html).

| Severity | Description |
| --- | --- |
| **--** | Default value for new bugs; bug triagers for components (ie engineers and other core project folks) are expected to update the bug's severity from this value. To avoid them missing new bugs for triage, do not alter this default when filing bugs. |
| **S1** | (Catastrophic) Blocks development/testing, may impact more than 25% of users, causes data loss, likely dot release driver, and no workaround available |
| **S2** | (Serious) Major functionality/product severely impaired or a high impact issue and a satisfactory workaround does not exist |
| **S3** | (Normal) Blocks non-critical functionality or a work around exists |
| **S4** | (Small/Trivial) minor significance, cosmetic issues, low or no impact to users |
| **N/A** | (Not Applicable) The above definitions do not apply to this bug; this value is reserved for bugs of type Task or Enhancement |

Summary
The bug summary is a short sentence which succinctly describes what the bug is about.Target Milestone
For Firefox-related bugs, when a change set (patch) lands in Mozilla-Central, the [sheriffs](/Sheriffing "Sheriffing") will set this field to the corresponding release value for the current Nightly.
Release status and tracking flags are used to mark intentions for when a fix or other patch should land.
If you need to track a bug against a set of milestones other than upcoming versions of Firefox, please tell the Bugzilla team, you may want a custom status flag.Triage Owner
User that is responsible [for triaging bugs in a specific component](https://firefox-source-docs.mozilla.org/bug-mgmt/policies/triage-bugzilla.html).Type
This field describes the [type of a bug](https://firefox-source-docs.mozilla.org/bug-mgmt/guides/bug-types.html).

| Type | Description |
| --- | --- |
| **defect** | regression, crash, hang, security vulnerability and any other general issue. |
| **enhancement** | new feature, improvement in UI, performance, etc. and any other request for user-facing changes and enhancements in the product; not engineering changes |
| **task** | refactoring, removal, replacement, enabling or disabling of functionality and any other engineering task |

URL
Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.Version
The version field defines the version of the software the bug was found in.Votes
Some bugs can be voted for, and you can limit your search to bugs with more than a certain number of votes. Votes are not used by Mozilla developers to set priorities.Whiteboard
Each bug has a free-form single line text entry box for adding tags and status information

Retrieved from "<https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&oldid=1250790>"

## Navigation menu

### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=BMO%2FUserGuide%2FBugFields "You are encouraged to log in; however, it is not mandatory [o]")
* [Request account](/Special%3ARequestAccount "You are encouraged to create an account and log in; however, it is not mandatory")

### Namespaces

* [Page](/BMO/UserGuide/BugFields "View the content page [c]")
* [Discussion](/index.php?title=Talk:BMO/UserGuide/BugFields&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

English

### Views

* [Read](/BMO/UserGuide/BugFields)
* [View source](/index.php?title=BMO/UserGuide/BugFields&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/index.php?title=BMO/UserGuide/BugFields&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/Main_Page "Visit the main page [z]")
* [Product releases](/Releases)
* [New pages](/Special%3ANewPages)
* [Recent changes](/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Recent uploads](/Special%3ANewFiles)
* [Random page](/Special%3ARandom "Load a random page [x]")
* [Help](/MozillaWiki%3AHelp "The place to find out")

### How to Contribute

* [All-hands meeting](/WeeklyUpdates)
* [Other meetings](/Community_Calendar)
* [Contribute to Mozilla](/Contribute)
* [Community Portal](//community.mozilla.org)
* [Community Participation Guidelines](//www.mozilla.org/en-US/about/governance/policies/participation/)

### MozillaWiki

* [About](/MozillaWiki%3AAbout)
* [Team](/MozillaWiki%3ATeam)
* [Policies](/MozillaWiki%3APolicies)
* [Report a wiki bug](//bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=wiki.mozilla.org)

### Around Mozilla

* [Mozilla Support](//support.mozilla.org/)
* [Mozilla Developer Network](//developer.mozilla.org/)
* [Planet Mozilla](//planet.mozilla.org/)
* [Mozilla Blog](//blog.mozilla.org/)
* [Research](//www.mozilla.org/research/)

### Tools

* [What links here](/Special%3AWhatLinksHere/BMO/UserGuide/BugFields "A list of all wiki pages that link here [j]")
* [Related changes](/Special%3ARecentChangesLinked/BMO/UserGuide/BugFields "Recent changes in pages linked from this page [k]")
* [Special pages](/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/index.php?title=BMO/UserGuide/BugFields&oldid=1250790 "Permanent link to this revision of this page")
* [Page information](/index.php?title=BMO/UserGuide/BugFields&action=info "More information about this page")

* This page was last edited on 14 May 2024, at 14:22.

* [Privacy policy](/MozillaWiki%3APrivacy_policy)
* [About MozillaWiki](/MozillaWiki%3AAbout)
* [Mobile view](https://wiki.mozilla.org/index.php?title=BMO/UserGuide/BugFields&mobileaction=toggle_view_mobile)

* [![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)


