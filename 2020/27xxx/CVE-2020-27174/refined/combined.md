=== Content from github.com_31525fbb_20250119_112534.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffirecracker-microvm%2Ffirecracker%2Fissues%2F2177)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffirecracker-microvm%2Ffirecracker%2Fissues%2F2177)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=firecracker-microvm%2Ffirecracker)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[firecracker-microvm](/firecracker-microvm)
/
**[firecracker](/firecracker-microvm/firecracker)**
Public

* [Notifications](/login?return_to=%2Ffirecracker-microvm%2Ffirecracker) You must be signed in to change notification settings
* [Fork
  1.9k](/login?return_to=%2Ffirecracker-microvm%2Ffirecracker)
* [Star
   26.8k](/login?return_to=%2Ffirecracker-microvm%2Ffirecracker)

* [Code](/firecracker-microvm/firecracker)
* [Issues
  64](/firecracker-microvm/firecracker/issues)
* [Pull requests
  25](/firecracker-microvm/firecracker/pulls)
* [Discussions](/firecracker-microvm/firecracker/discussions)
* [Actions](/firecracker-microvm/firecracker/actions)
* [Projects
  1](/firecracker-microvm/firecracker/projects)
* [Security](/firecracker-microvm/firecracker/security)
* [Insights](/firecracker-microvm/firecracker/pulse)

Additional navigation options

* [Code](/firecracker-microvm/firecracker)
* [Issues](/firecracker-microvm/firecracker/issues)
* [Pull requests](/firecracker-microvm/firecracker/pulls)
* [Discussions](/firecracker-microvm/firecracker/discussions)
* [Actions](/firecracker-microvm/firecracker/actions)
* [Projects](/firecracker-microvm/firecracker/projects)
* [Security](/firecracker-microvm/firecracker/security)
* [Insights](/firecracker-microvm/firecracker/pulse)

# Firecracker serial console emulation may allocate an unbounded amount of memory #2177

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosed[#2235](https://github.com/firecracker-microvm/firecracker/pull/2235)Closed[Firecracker serial console emulation may allocate an unbounded amount of memory](#top)#2177[#2235](https://github.com/firecracker-microvm/firecracker/pull/2235)Copy linkAssignees [![sandreim](https://avatars.githubusercontent.com/u/54316454?s=64&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)](/sandreim)Labels[Priority: HighIndicates than an issue or pull request should be resolved ahead of issues or pull requests labelled](https://github.com/firecracker-microvm/firecracker/issues?q=state%3Aopen%20label%3A%22Priority%3A%20High%22)Indicates than an issue or pull request should be resolved ahead of issues or pull requests labelled[Type: BugIndicates an unexpected problem or unintended behavior](https://github.com/firecracker-microvm/firecracker/issues?q=state%3Aopen%20label%3A%22Type%3A%20Bug%22)Indicates an unexpected problem or unintended behavior![@sandreim](https://avatars.githubusercontent.com/u/54316454?u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4&size=80)
## Description

![@sandreim](https://avatars.githubusercontent.com/u/54316454?u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4&size=48)[sandreim](https://github.com/sandreim)opened [on Oct 14, 2020](https://github.com/firecracker-microvm/firecracker/issues/2177#issue-721303524)

We have identified an issue in the Firecracker serial console emulation of all Firecracker versions up to v0.21.2 and Firecracker v0.22.0

### Issue Description

The Firecracker implementation of the serial console emulation allows buffering of an unlimited number of bytes when data is written to the Firecracker process standard input at a high rate.

### Impact

Firecracker customers that forward the standard input of the Firecracker process to untrusted users can become subject to DoS attacks. If memory limits are not imposed on the Firecracker process, this might impair other microVMs on the same host from allocating memory, potentially becoming an availability issue.

Serial output generated by the guest can’t trigger the issue.

### Affected Systems

Firecracker versions v0.22.0 and v0.21.2, while all older releases might be impacted.

## Mitigation

Impact can be mitigated by applying memory limits to the Firecracker process or by applying a rate limit when writing to the Firecracker process standard input.

Customers may apply:

Patched binaries mitigating this issue have been released as Firecracker v0.21.3[1] and Firecracker v0.22.1[2].

If you are using Firecracker versions up to v0.21.2 or Firecracker v0.22.0, we recommend you apply the provided fix.

[1] <https://github.com/firecracker-microvm/firecracker/releases/tag/v0.21.3>

[2] <https://github.com/firecracker-microvm/firecracker/releases/tag/v0.22.1>

## Metadata

### Assignees

* [![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=64&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)sandreim](/sandreim)
### Labels

[Priority: HighIndicates than an issue or pull request should be resolved ahead of issues or pull requests labelled](https://github.com/firecracker-microvm/firecracker/issues?q=state%3Aopen%20label%3A%22Priority%3A%20High%22)Indicates than an issue or pull request should be resolved ahead of issues or pull requests labelled[Type: BugIndicates an unexpected problem or unintended behavior](https://github.com/firecracker-microvm/firecracker/issues?q=state%3Aopen%20label%3A%22Type%3A%20Bug%22)Indicates an unexpected problem or unintended behavior
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_e5b81a43_20250119_112535.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffirecracker-microvm%2Ffirecracker%2Fpull%2F2178)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffirecracker-microvm%2Ffirecracker%2Fpull%2F2178)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=firecracker-microvm%2Ffirecracker)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[firecracker-microvm](/firecracker-microvm)
/
**[firecracker](/firecracker-microvm/firecracker)**
Public

* [Notifications](/login?return_to=%2Ffirecracker-microvm%2Ffirecracker) You must be signed in to change notification settings
* [Fork
  1.9k](/login?return_to=%2Ffirecracker-microvm%2Ffirecracker)
* [Star
   26.8k](/login?return_to=%2Ffirecracker-microvm%2Ffirecracker)

* [Code](/firecracker-microvm/firecracker)
* [Issues
  64](/firecracker-microvm/firecracker/issues)
* [Pull requests
  25](/firecracker-microvm/firecracker/pulls)
* [Discussions](/firecracker-microvm/firecracker/discussions)
* [Actions](/firecracker-microvm/firecracker/actions)
* [Projects
  1](/firecracker-microvm/firecracker/projects)
* [Security](/firecracker-microvm/firecracker/security)
* [Insights](/firecracker-microvm/firecracker/pulse)

Additional navigation options

* [Code](/firecracker-microvm/firecracker)
* [Issues](/firecracker-microvm/firecracker/issues)
* [Pull requests](/firecracker-microvm/firecracker/pulls)
* [Discussions](/firecracker-microvm/firecracker/discussions)
* [Actions](/firecracker-microvm/firecracker/actions)
* [Projects](/firecracker-microvm/firecracker/projects)
* [Security](/firecracker-microvm/firecracker/security)
* [Insights](/firecracker-microvm/firecracker/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Ffirecracker-microvm%2Ffirecracker%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Ffirecracker-microvm%2Ffirecracker%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [v0.21.3] Fix serial memory allocation issue #2178

 Merged

[sandreim](/sandreim)
merged 3 commits into
[firecracker-microvm:fix-v0.21.3](/firecracker-microvm/firecracker/tree/fix-v0.21.3 "firecracker-microvm/firecracker:fix-v0.21.3")
from
[sandreim:fix-v0.21.3](/sandreim/firecracker/tree/fix-v0.21.3 "sandreim/firecracker:fix-v0.21.3")

Oct 14, 2020

 Merged

# [[v0.21.3] Fix serial memory allocation issue](#top) #2178

[sandreim](/sandreim)
merged 3 commits into
[firecracker-microvm:fix-v0.21.3](/firecracker-microvm/firecracker/tree/fix-v0.21.3 "firecracker-microvm/firecracker:fix-v0.21.3")
from
[sandreim:fix-v0.21.3](/sandreim/firecracker/tree/fix-v0.21.3 "sandreim/firecracker:fix-v0.21.3")

Oct 14, 2020

[Conversation
0](/firecracker-microvm/firecracker/pull/2178)
[Commits
3](/firecracker-microvm/firecracker/pull/2178/commits)
[Checks
0](/firecracker-microvm/firecracker/pull/2178/checks)
[Files changed](/firecracker-microvm/firecracker/pull/2178/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![sandreim](https://avatars.githubusercontent.com/u/54316454?s=60&v=4)](/sandreim)

Copy link

Contributor

### @sandreim **[sandreim](/sandreim)** commented [Oct 14, 2020](#issue-721306435)

## Reason for This PR

Fixes [#2177](https://github.com/firecracker-microvm/firecracker/issues/2177)

## Description of Changes

Provided in commit messages.

* This functionality can be added in [`rust-vmm`](https://github.com/rust-vmm).

## License Acceptance

By submitting this pull request, I confirm that my contribution is made under

the terms of the Apache 2.0 license.

## PR Checklist

`[Author TODO: Meet these criteria.]`

`[Reviewer TODO: Verify that these criteria are met. Request changes if not]`

* All commits in this PR are signed (`git commit -s`).
* The reason for this PR is clearly provided (issue no. or explanation).
* The description of changes is clear and encompassing.
* Any required documentation changes (code and docs) are included in this PR.
* Any newly added `unsafe` code is properly documented.
* Any API changes are reflected in `firecracker/swagger.yaml`.
* Any user-facing changes are mentioned in `CHANGELOG.md`.
* All added/changed functionality is tested.

Sorry, something went wrong.

All reactions

 Iulian Barbu
and others
added 3 commits
[October 12, 2020 12:29](#commits-pushed-f91b3de)

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&v=4)](/sandreim)

`[serial: add regression test for buffer limit](/firecracker-microvm/firecracker/pull/2178/commits/f91b3de885d5d0dd7188b8ef76cfdc17da4ac214 "serial: add regression test for buffer limit

Signed-off-by: Iulian Barbu <iul@amazon.com>")`
 …

`[f91b3de](/firecracker-microvm/firecracker/pull/2178/commits/f91b3de885d5d0dd7188b8ef76cfdc17da4ac214)`

```
Signed-off-by: Iulian Barbu <iul@amazon.com>
```

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&v=4)](/sandreim)

`[serial: buffer limit fix with kick stdin evt](/firecracker-microvm/firecracker/pull/2178/commits/07286c79673eeb99baaf23f6d2da56e2db18bcbe "serial: buffer limit fix with kick stdin evt

Signed-off-by: Iulian Barbu <iul@amazon.com>
Suggested-by: Andreea Florescu <fandree@amazon.com>")`
 …

`[07286c7](/firecracker-microvm/firecracker/pull/2178/commits/07286c79673eeb99baaf23f6d2da56e2db18bcbe)`

```
Signed-off-by: Iulian Barbu <iul@amazon.com>
Suggested-by: Andreea Florescu <fandree@amazon.com>
```

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&v=4)](/sandreim)

`[Temporarily disable the cargo audit test.](/firecracker-microvm/firecracker/pull/2178/commits/75a199d9bb95b96a2afb6db3e4e3f9bb9c1b6172 "    Temporarily disable the cargo audit test.

    The security db (https://github.com/RustSec/cargo-audit)
    has broken compatiblity with cargo audit v10. A fixed cargo
    audit version v12 is available, but  it requires an upgrade of
    the rust toolchain on top of the current release. This commit
    is a temporary fix until we unshare toolchain dependency
    of Firecracker and cargo audit binary.

Signed-off-by: Andrei Sandu <sandreim@amazon.com>")`
 …

`[75a199d](/firecracker-microvm/firecracker/pull/2178/commits/75a199d9bb95b96a2afb6db3e4e3f9bb9c1b6172)`

```
    The security db (<https://github.com/RustSec/cargo-audit>)
    has broken compatiblity with cargo audit v10. A fixed cargo
    audit version v12 is available, but  it requires an upgrade of
    the rust toolchain on top of the current release. This commit
    is a temporary fix until we unshare toolchain dependency
    of Firecracker and cargo audit binary.

Signed-off-by: Andrei Sandu <sandreim@amazon.com>
```

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)](/sandreim)
[sandreim](/sandreim)
added
the
[Status: Awaiting review](/firecracker-microvm/firecracker/labels/Status%3A%20Awaiting%20review)
Indicates that a pull request is ready to be reviewed
label
[Oct 14, 2020](#event-3875675879)

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)](/sandreim)
[sandreim](/sandreim)
self-assigned this
[Oct 14, 2020](#event-3875675905)

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)](/sandreim)
[sandreim](/sandreim)
changed the title
~~Fix serial memory allocation issue~~
[v0.21.3] Fix serial memory allocation issue
[Oct 14, 2020](#event-3875679215)

 [![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)](/sandreim)
[sandreim](/sandreim)
requested review from
[acatangiu](/acatangiu) and
[iulianbarbu](/iulianbarbu)
[October 14, 2020 09:48](#event-3875699055)

[![acatangiu](https://avatars.githubusercontent.com/u/31917973?s=60&v=4)](/acatangiu)

**[acatangiu](/acatangiu)**
approved these changes
[Oct 14, 2020](#pullrequestreview-508419313)

 [View reviewed changes](/firecracker-microvm/firecracker/pull/2178/files/75a199d9bb95b96a2afb6db3e4e3f9bb9c1b6172)

[![georgepisaltu](https://avatars.githubusercontent.com/u/52418509?s=60&v=4)](/georgepisaltu)

**[georgepisaltu](/georgepisaltu)**
approved these changes
[Oct 14, 2020](#pullrequestreview-508460989)

 [View reviewed changes](/firecracker-microvm/firecracker/pull/2178/files/75a199d9bb95b96a2afb6db3e4e3f9bb9c1b6172)

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)](/sandreim)
[sandreim](/sandreim)
merged commit [`98426d9`](/firecracker-microvm/firecracker/commit/98426d92f1efe2f8bd13d5bdcf08cb6bf80a2364)
into
firecracker-microvm:fix-v0.21.3

[Oct 14, 2020](https://github.com/firecracker-microvm/firecracker/pull/2178#event-3877219604)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Ffirecracker-microvm%2Ffirecracker%2Fpull%2F2178)

Reviewers

[![@georgepisaltu](https://avatars.githubusercontent.com/u/52418509?s=40&v=4)](/georgepisaltu) [georgepisaltu](/georgepisaltu)

georgepisaltu approved these changes

[![@acatangiu](https://avatars.githubusercontent.com/u/31917973?s=40&v=4)](/acatangiu) [acatangiu](/acatangiu)

acatangiu approved these changes

[![@iulianbarbu](https://avatars.githubusercontent.com/u/14218860?s=40&v=4)](/iulianbarbu) [iulianbarbu](/iulianbarbu)

 Awaiting requested review from iulianbarbu

Assignees

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&v=4)](/sandreim) [sandreim](/sandreim)

Labels

[Status: Awaiting review](/firecracker-microvm/firecracker/labels/Status%3A%20Awaiting%20review)
Indicates that a pull request is ready to be reviewed

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=52&v=4)](/sandreim) [![@acatangiu](https://avatars.githubusercontent.com/u/31917973?s=52&v=4)](/acatangiu) [![@georgepisaltu](https://avatars.githubusercontent.com/u/52418509?s=52&v=4)](/georgepisaltu)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_f3772bb8_20250119_112537.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffirecracker-microvm%2Ffirecracker%2Fpull%2F2179)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffirecracker-microvm%2Ffirecracker%2Fpull%2F2179)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=firecracker-microvm%2Ffirecracker)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[firecracker-microvm](/firecracker-microvm)
/
**[firecracker](/firecracker-microvm/firecracker)**
Public

* [Notifications](/login?return_to=%2Ffirecracker-microvm%2Ffirecracker) You must be signed in to change notification settings
* [Fork
  1.9k](/login?return_to=%2Ffirecracker-microvm%2Ffirecracker)
* [Star
   26.8k](/login?return_to=%2Ffirecracker-microvm%2Ffirecracker)

* [Code](/firecracker-microvm/firecracker)
* [Issues
  64](/firecracker-microvm/firecracker/issues)
* [Pull requests
  25](/firecracker-microvm/firecracker/pulls)
* [Discussions](/firecracker-microvm/firecracker/discussions)
* [Actions](/firecracker-microvm/firecracker/actions)
* [Projects
  1](/firecracker-microvm/firecracker/projects)
* [Security](/firecracker-microvm/firecracker/security)
* [Insights](/firecracker-microvm/firecracker/pulse)

Additional navigation options

* [Code](/firecracker-microvm/firecracker)
* [Issues](/firecracker-microvm/firecracker/issues)
* [Pull requests](/firecracker-microvm/firecracker/pulls)
* [Discussions](/firecracker-microvm/firecracker/discussions)
* [Actions](/firecracker-microvm/firecracker/actions)
* [Projects](/firecracker-microvm/firecracker/projects)
* [Security](/firecracker-microvm/firecracker/security)
* [Insights](/firecracker-microvm/firecracker/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Ffirecracker-microvm%2Ffirecracker%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Ffirecracker-microvm%2Ffirecracker%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [v0.22.1] Fix serial memory allocation issue. #2179

 Merged

[sandreim](/sandreim)
merged 4 commits into
[firecracker-microvm:fix-v0.22.1](/firecracker-microvm/firecracker/tree/fix-v0.22.1 "firecracker-microvm/firecracker:fix-v0.22.1")
from
[sandreim:fix-v0.22.1](/sandreim/firecracker/tree/fix-v0.22.1 "sandreim/firecracker:fix-v0.22.1")

Oct 14, 2020

 Merged

# [[v0.22.1] Fix serial memory allocation issue.](#top) #2179

[sandreim](/sandreim)
merged 4 commits into
[firecracker-microvm:fix-v0.22.1](/firecracker-microvm/firecracker/tree/fix-v0.22.1 "firecracker-microvm/firecracker:fix-v0.22.1")
from
[sandreim:fix-v0.22.1](/sandreim/firecracker/tree/fix-v0.22.1 "sandreim/firecracker:fix-v0.22.1")

Oct 14, 2020

[Conversation
5](/firecracker-microvm/firecracker/pull/2179)
[Commits
4](/firecracker-microvm/firecracker/pull/2179/commits)
[Checks
0](/firecracker-microvm/firecracker/pull/2179/checks)
[Files changed](/firecracker-microvm/firecracker/pull/2179/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![sandreim](https://avatars.githubusercontent.com/u/54316454?s=60&v=4)](/sandreim)

Copy link

Contributor

### @sandreim **[sandreim](/sandreim)** commented [Oct 14, 2020](#issue-721308515)

## Reason for This PR

Fixes [#2177](https://github.com/firecracker-microvm/firecracker/issues/2177)

## Description of Changes

Provided in commit messages.

* This functionality can be added in [`rust-vmm`](https://github.com/rust-vmm).

## License Acceptance

By submitting this pull request, I confirm that my contribution is made under

the terms of the Apache 2.0 license.

## PR Checklist

`[Author TODO: Meet these criteria.]`

`[Reviewer TODO: Verify that these criteria are met. Request changes if not]`

* All commits in this PR are signed (`git commit -s`).
* The reason for this PR is clearly provided (issue no. or explanation).
* The description of changes is clear and encompassing.
* Any required documentation changes (code and docs) are included in this PR.
* Any newly added `unsafe` code is properly documented.
* Any API changes are reflected in `firecracker/swagger.yaml`.
* Any user-facing changes are mentioned in `CHANGELOG.md`.
* All added/changed functionality is tested.

Sorry, something went wrong.

All reactions

 Iulian Barbu
and others
added 3 commits
[October 12, 2020 12:40](#commits-pushed-59ccfbb)

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&v=4)](/sandreim)

`[serial: buffer limit regression test](/firecracker-microvm/firecracker/pull/2179/commits/59ccfbb0351c010a764b3e9d2106451bd9992143 "serial: buffer limit regression test

Signed-off-by: Iulian Barbu <iul@amazon.com>")`
 …

`[59ccfbb](/firecracker-microvm/firecracker/pull/2179/commits/59ccfbb0351c010a764b3e9d2106451bd9992143)`

```
Signed-off-by: Iulian Barbu <iul@amazon.com>
```

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&v=4)](/sandreim)

`[serial: limit the in buffer capacity](/firecracker-microvm/firecracker/pull/2179/commits/032ce0c77b9a5b775fc8fa0a2057fbb07f08e449 "serial: limit the in buffer capacity

Signed-off-by: Iulian Barbu <iul@amazon.com>
Suggested-by: Andreea Florescu <fandree@amazon.com>")`
 …

`[032ce0c](/firecracker-microvm/firecracker/pull/2179/commits/032ce0c77b9a5b775fc8fa0a2057fbb07f08e449)`

```
Signed-off-by: Iulian Barbu <iul@amazon.com>
Suggested-by: Andreea Florescu <fandree@amazon.com>
```

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&v=4)](/sandreim)

`[Temporarily disable the cargo audit test.](/firecracker-microvm/firecracker/pull/2179/commits/116e34962f8f0f7404dda660d2fb7479a0bedbd1 "Temporarily disable the cargo audit test.

The security db (https://github.com/RustSec/cargo-audit)
has broken compatiblity with cargo audit v10. A fixed cargo
audit version v12 is available, but  it requires an upgrade of
the rust toolchain on top of the current release. This commit
is a temporary fix until we unshare toolchain dependency
of Firecracker and cargo audit binary.

Signed-off-by: Andrei Sandu <sandreim@amazon.com>")`
 …

`[116e349](/firecracker-microvm/firecracker/pull/2179/commits/116e34962f8f0f7404dda660d2fb7479a0bedbd1)`

```
The security db (<https://github.com/RustSec/cargo-audit>)
has broken compatiblity with cargo audit v10. A fixed cargo
audit version v12 is available, but  it requires an upgrade of
the rust toolchain on top of the current release. This commit
is a temporary fix until we unshare toolchain dependency
of Firecracker and cargo audit binary.

Signed-off-by: Andrei Sandu <sandreim@amazon.com>
```

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)](/sandreim)
[sandreim](/sandreim)
added
the
[Status: Awaiting review](/firecracker-microvm/firecracker/labels/Status%3A%20Awaiting%20review)
Indicates that a pull request is ready to be reviewed
label
[Oct 14, 2020](#event-3875689351)

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)](/sandreim)
[sandreim](/sandreim)
self-assigned this
[Oct 14, 2020](#event-3875689390)

 [![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)](/sandreim)
[sandreim](/sandreim)
requested review from
[acatangiu](/acatangiu) and
[iulianbarbu](/iulianbarbu)
[October 14, 2020 09:47](#event-3875697630)

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&v=4)](/sandreim)

`[Update max delta to fix AMD coverage.](/firecracker-microvm/firecracker/pull/2179/commits/9f8682b09799fa960268499ca13cee554f7717c6 "Update max delta to fix AMD coverage.

Signed-off-by: Andrei Sandu <sandreim@amazon.com>")`
 …

`[9f8682b](/firecracker-microvm/firecracker/pull/2179/commits/9f8682b09799fa960268499ca13cee554f7717c6)`

```
Signed-off-by: Andrei Sandu <sandreim@amazon.com>
```

 [![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)](/sandreim)
[sandreim](/sandreim)
[force-pushed](/firecracker-microvm/firecracker/compare/6bafa6bfe0ebe893408ed9a743baeffde2e3edd2..9f8682b09799fa960268499ca13cee554f7717c6)
the
fix-v0.22.1

branch
from
[`6bafa6b`](/firecracker-microvm/firecracker/commit/6bafa6bfe0ebe893408ed9a743baeffde2e3edd2) to
[`9f8682b`](/firecracker-microvm/firecracker/commit/9f8682b09799fa960268499ca13cee554f7717c6)  [Compare](/firecracker-microvm/firecracker/compare/6bafa6bfe0ebe893408ed9a743baeffde2e3edd2..9f8682b09799fa960268499ca13cee554f7717c6)
[October 14, 2020 10:27](#event-3875858353)

[![georgepisaltu](https://avatars.githubusercontent.com/u/52418509?s=60&v=4)](/georgepisaltu)

**[georgepisaltu](/georgepisaltu)**
reviewed
[Oct 14, 2020](#pullrequestreview-508228994)

 [View reviewed changes](/firecracker-microvm/firecracker/pull/2179/files/032ce0c77b9a5b775fc8fa0a2057fbb07f08e449)

[src/devices/src/legacy/serial.rs](/firecracker-microvm/firecracker/pull/2179/files/59ccfbb0351c010a764b3e9d2106451bd9992143..032ce0c77b9a5b775fc8fa0a2057fbb07f08e449#diff-7e547823b7b78bfce52059d6bcb4784cfc593bed87e77d32dadc400e64c18a97)

|  |  | fn avail\_buffer\_capacity(&self) -> usize { |
| --- | --- | --- |
|  |  | FIFO\_SIZE.checked\_sub(self.in\_buffer.len()).unwrap\_or\_else(|| |
|  |  | panic!( |
|  |  | "Errored out due to serial device buffer size greater than the maximum expected size: {} > {}.", |

Copy link

Contributor

### @georgepisaltu **[georgepisaltu](/georgepisaltu)** [Oct 14, 2020](#discussion_r504586616)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

nit: "errored" is not a real word.

Suggested change

|  | "Errored out due to serial device buffer size greater than the maximum expected size: {} > {}.", |
| --- | --- |
|  | "Error: Serial device buffer size greater than the maximum expected size: {} > {}.", |

Sorry, something went wrong.

All reactions

[src/devices/src/legacy/serial.rs](/firecracker-microvm/firecracker/pull/2179/files/59ccfbb0351c010a764b3e9d2106451bd9992143..032ce0c77b9a5b775fc8fa0a2057fbb07f08e449#diff-7e547823b7b78bfce52059d6bcb4784cfc593bed87e77d32dadc400e64c18a97)

|  |  | Ok(0) |
| --- | --- | --- |
|  |  | } |
|  |  | }); |
|  |  | let mut out = vec![0u8; avail\_cap]; |

Copy link

Contributor

### @georgepisaltu **[georgepisaltu](/georgepisaltu)** [Oct 14, 2020](#discussion_r504589067)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

I think this should be a member of the struct as the constant allocation and zeroing of the memory is costly, but this is an optimization which we can implement later and is not related to the security issue.

Sorry, something went wrong.

All reactions

[src/devices/src/legacy/serial.rs](/firecracker-microvm/firecracker/pull/2179/files/59ccfbb0351c010a764b3e9d2106451bd9992143..032ce0c77b9a5b775fc8fa0a2057fbb07f08e449#diff-7e547823b7b78bfce52059d6bcb4784cfc593bed87e77d32dadc400e64c18a97)

|  |  | e |
| --- | --- | --- |
|  |  | ), |
|  |  | // Handle EOF if the event came from the input source. |
|  |  | if input\_fd == event.fd() && count == 0 { |

Copy link

Contributor

### @georgepisaltu **[georgepisaltu](/georgepisaltu)** [Oct 14, 2020](#discussion_r504590075)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Should we handle the case where `input_fd != event.fd()`?

Sorry, something went wrong.

All reactions

[![acatangiu](https://avatars.githubusercontent.com/u/31917973?s=60&v=4)](/acatangiu)

**[acatangiu](/acatangiu)**
approved these changes
[Oct 14, 2020](#pullrequestreview-508236795)

 [View reviewed changes](/firecracker-microvm/firecracker/pull/2179/files/59ccfbb0351c010a764b3e9d2106451bd9992143)

[tests/integration\_tests/functional/test\_serial\_io.py](/firecracker-microvm/firecracker/pull/2179/files/59ccfbb0351c010a764b3e9d2106451bd9992143#diff-3090af5dbbb37db777a1b68ba54339b9617dca4f84f0c277003769fc3e2ca287)

Comment on lines
+125
 to
+126

|  |  | after\_size = get\_total\_mem\_size(microvm.jailer\_clone\_pid) |
| --- | --- | --- |
|  |  | assert before\_size == after\_size, "The memory size of the " \ |

Copy link

Contributor

### @acatangiu **[acatangiu](/acatangiu)** [Oct 14, 2020](#discussion_r504592806)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

this is prone to false positives: process used memory can slightly change due to unrelated reasons

we can address this incrementally since worst that can happen are false positives - not blocking this PR because of it

Sorry, something went wrong.

All reactions

[![georgepisaltu](https://avatars.githubusercontent.com/u/52418509?s=60&v=4)](/georgepisaltu)

**[georgepisaltu](/georgepisaltu)**
approved these changes
[Oct 14, 2020](#pullrequestreview-508404312)

 [View reviewed changes](/firecracker-microvm/firecracker/pull/2179/files/9f8682b09799fa960268499ca13cee554f7717c6)

Copy link

Contributor

### @georgepisaltu **[georgepisaltu](/georgepisaltu)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

A few nits, can merge and come back to them later.

Sorry, something went wrong.

All reactions

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&u=1d770587fd084d281ed9e9f02a4f61602fdda1e3&v=4)](/sandreim)
[sandreim](/sandreim)
merged commit [`1c25f5c`](/firecracker-microvm/firecracker/commit/1c25f5c52142d9e6db56667446dae8075c1600ac)
into
firecracker-microvm:fix-v0.22.1

[Oct 14, 2020](https://github.com/firecracker-microvm/firecracker/pull/2179#event-3877174491)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Ffirecracker-microvm%2Ffirecracker%2Fpull%2F2179)

Reviewers

[![@georgepisaltu](https://avatars.githubusercontent.com/u/52418509?s=40&v=4)](/georgepisaltu) [georgepisaltu](/georgepisaltu)

georgepisaltu approved these changes

[![@acatangiu](https://avatars.githubusercontent.com/u/31917973?s=40&v=4)](/acatangiu) [acatangiu](/acatangiu)

acatangiu approved these changes

[![@iulianbarbu](https://avatars.githubusercontent.com/u/14218860?s=40&v=4)](/iulianbarbu) [iulianbarbu](/iulianbarbu)

 Awaiting requested review from iulianbarbu

Assignees

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=40&v=4)](/sandreim) [sandreim](/sandreim)

Labels

[Status: Awaiting review](/firecracker-microvm/firecracker/labels/Status%3A%20Awaiting%20review)
Indicates that a pull request is ready to be reviewed

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@sandreim](https://avatars.githubusercontent.com/u/54316454?s=52&v=4)](/sandreim) [![@acatangiu](https://avatars.githubusercontent.com/u/31917973?s=52&v=4)](/acatangiu) [![@georgepisaltu](https://avatars.githubusercontent.com/u/52418509?s=52&v=4)](/georgepisaltu)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.openwall.com_abaacba3_20250119_112531.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](../../../2020/10/22/1) [[next>]](../../../2020/10/27/1) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <1603449734487.64669@amazon.com>
Date: Fri, 23 Oct 2020 10:42:14 +0000
From: "Iordache, Alexandra" <aghecen@...zon.com>
To: "oss-security@...ts.openwall.com" <oss-security@...ts.openwall.com>
Subject: CVE-2020-27174: Firecracker serial console emulation may allocate an
 unbounded amount of memory

We have identified an issue in the Firecracker serial console emulation of all Firecracker versions up to v0.21.2 and Firecracker v0.22.0

# Issue Description

The Firecracker implementation of the serial console emulation allows buffering of an unlimited number of bytes when data is written to the Firecracker process standard input at a high rate.

# Impact

Firecracker customers that forward the standard input of the Firecracker process to untrusted users can become subject to DoS attacks. If memory limits are not imposed on the Firecracker process, this might impair other microVMs on the same host from allocating memory, potentially becoming an availability issue.

Serial output generated by the guest can't trigger the issue.

# Affected Systems

Firecracker versions v0.22.0 and v0.21.2, while all older releases might be impacted.

# Mitigation

Impact can be mitigated by applying memory limits to the Firecracker process or by applying a rate limit when writing to the Firecracker process standard input.

Customers may apply:
Patched binaries mitigating this issue have been released as Firecracker v0.21.3[1] and Firecracker v0.22.1[2].
If you are using Firecracker versions up to v0.21.2 or Firecracker v0.22.0, we recommend you apply the provided fix.

[1] <https://github.com/firecracker-microvm/firecracker/releases/tag/v0.21.3>
[2] <https://github.com/firecracker-microvm/firecracker/releases/tag/v0.22.1>?

Best regards,
Alexandra on behalf of the Firecracker maintainers team?

Amazon Development Center (Romania) S.R.L. registered office: 27A Sf. Lazar Street, UBC5, floor 2, Iasi, Iasi County, 700045, Romania. Registered in Romania. Registration number J22/2621/2005.

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


