=== Content from lore.kernel.org_ea87a732_20250119_115658.html ===

```
[dri-devel.lists.freedesktop.org archive mirror](../?t=20201103194944)
 [help](../_/text/help/) / [color](../_/text/color/) / [mirror](../_/text/mirror/) / [Atom feed](../new.atom)
```
```
From: Jeremy Cline <jcline@redhat.com>
To: Ben Skeggs <bskeggs@redhat.com>
Cc: Karol Herbst <kherbst@redhat.com>,
	David Airlie <airlied@linux.ie>,
	[nouveau@lists.freedesktop.org](../../nouveau/?t=20201103194944), [linux-kernel@vger.kernel.org](../../lkml/?t=20201103194944),
	[dri-devel@lists.freedesktop.org](../../dri-devel/?t=20201103194944), Jeremy Cline <jcline@redhat.com>
Subject: [[PATCH 1/3] drm/nouveau: use drm_dev_unplug() during device removal](#r)
Date: Tue,  3 Nov 2020 14:49:10 -0500	[[thread overview]](#r)
Message-ID: <20201103194912.184413-2-jcline@redhat.com> (<raw>)
In-Reply-To: <[20201103194912.184413-1-jcline@redhat.com](../20201103194912.184413-1-jcline%40redhat.com/)>

Nouveau does not currently support hot-unplugging, but it still makes
sense to switch from drm_dev_unregister() to drm_dev_unplug().
drm_dev_unplug() calls drm_dev_unregister() after marking the device as
unplugged, but only after any device critical sections are finished.

Since nouveau isn't using drm_dev_enter() and drm_dev_exit(), there are
no critical sections so this is nearly functionally equivalent. However,
the DRM layer does check to see if the device is unplugged, and if it is
returns appropriate error codes.

In the future nouveau can add critical sections in order to truly
support hot-unplugging.

Signed-off-by: Jeremy Cline <jcline@redhat.com>
---
 [drivers/gpu/drm/nouveau/nouveau_drm.c](#Z31drivers:gpu:drm:nouveau:nouveau_drm.c) | 2 +-
 1 file [changed](#related), 1 insertion(+), 1 deletion(-)

[diff](#iZ31drivers:gpu:drm:nouveau:nouveau_drm.c) --git a/drivers/gpu/drm/nouveau/nouveau_drm.c b/drivers/gpu/drm/nouveau/nouveau_drm.c
index d141a5f004af..4fe4d664c5f2 100644
--- a/drivers/gpu/drm/nouveau/nouveau_drm.c
+++ b/drivers/gpu/drm/nouveau/nouveau_drm.c
@@ -792,7 +792,7 @@ nouveau_drm_device_remove(struct drm_device *dev)
 	struct nvkm_client *client;
 	struct nvkm_device *device;

-	drm_dev_unregister(dev);
+	drm_dev_unplug(dev);

 	dev->irq_enabled = false;
 	client = nvxx_client(&drm->client.base);
--
2.28.0

_______________________________________________
dri-devel mailing list
dri-devel@lists.freedesktop.org
<https://lists.freedesktop.org/mailman/listinfo/dri-devel>

```

---

```
[next](../20201103194912.184413-3-jcline%40redhat.com/) [prev parent](../20201103194912.184413-1-jcline%40redhat.com/) [reply](#R)	other threads:[[~2020-11-03 19:49 UTC](../?t=20201103194944)|[newest](../)]

Thread overview: 16+ messages / expand[[flat](T/#u)|[nested](t/#u)]  [mbox.gz](t.mbox.gz)  [Atom feed](t.atom)  [top](#b)
2020-11-03 19:49 [[PATCH 0/3] drm/nouveau: fix a use-after-free in postclose()](../20201103194912.184413-1-jcline%40redhat.com/) Jeremy Cline
2020-11-03 19:49 ` [Jeremy Cline [this message]](#t)
2020-11-03 19:49 ` [[PATCH 2/3] drm/nouveau: Add a dedicated mutex for the clients list](../20201103194912.184413-3-jcline%40redhat.com/) Jeremy Cline
2020-11-25 18:37   ` [Lyude Paul](../505be3af57c36222564d0790aa8a992b1ea4d287.camel%40redhat.com/)
2020-11-25 19:45     ` [Jeremy Cline](../20201125194557.GC20747%40xps13/)
2020-11-03 19:49 ` [[PATCH 3/3] drm/nouveau: clean up all clients on device removal](../20201103194912.184413-4-jcline%40redhat.com/) Jeremy Cline
2020-11-25 18:44   ` [Lyude Paul](../3b1bf645662bc81d9c93ad0c74826d8f87d740cc.camel%40redhat.com/)
2020-11-25 20:26 ` [[PATCH v2 0/3] drm/nouveau: fix a use-after-free in postclose()](../20201125202648.5220-1-jcline%40redhat.com/) Jeremy Cline
2020-11-25 20:26   ` [[PATCH v2 1/3] drm/nouveau: use drm_dev_unplug() during device removal](../20201125202648.5220-2-jcline%40redhat.com/) Jeremy Cline
2020-11-25 20:26   ` [[PATCH v2 2/3] drm/nouveau: Add a dedicated mutex for the clients list](../20201125202648.5220-3-jcline%40redhat.com/) Jeremy Cline
2020-11-25 20:26   ` [[PATCH v2 3/3] drm/nouveau: clean up all clients on device removal](../20201125202648.5220-4-jcline%40redhat.com/) Jeremy Cline
2021-03-26 22:00   ` [[PATCH v2 0/3] drm/nouveau: fix a use-after-free in postclose()](../b4da382b17a77b66e45fd374c9d806dac6054e3a.camel%40redhat.com/) Lyude Paul
2021-08-16  7:03     ` [Salvatore Bonaccorso](../YRoN0vWFN6Lw22ej%40eldamar.lan/)
2021-08-17 20:32       ` [Lyude Paul](../418fdcbcf554d34cc6423a88974f916b64b3664c.camel%40redhat.com/)
2021-10-11  7:05         ` [Salvatore Bonaccorso](../YWPiU%2B9G0AKglHmi%40eldamar.lan/)
2021-10-11 11:05           ` [Karol Herbst](../CACO55tvokQBKz1ZyhK_2hN%3DV7rgV3n_L%3DPYNh8RLA%2By8n93qRQ%40mail.gmail.com/)

```
```
find likely ancestor, descendant, or conflicting patches for [this message](#t):
( dfblob:d141a5f004a dfblob:4fe4d664c5f )
 OR (
bs:"[PATCH 1/3] drm/nouveau: use drm_dev_unplug() during device removal" )
	([help](../_/text/help/#search))
```

---

```
Reply instructions:

You may reply publicly to [this message](#t) via plain-text email
using any one of the following methods:

* Save the following mbox file, import it into your mail client,
  and reply-to-all from there: [mbox](raw)

  Avoid top-posting and favor interleaved quoting:
  <https://en.wikipedia.org/wiki/Posting_style#Interleaved_style>

* Reply using the --to, --cc, and --in-reply-to
  switches of git-send-email(1):

  git send-email \
    --in-reply-to=20201103194912.184413-2-jcline@redhat.com \
    --to=jcline@redhat.com \
    --cc=airlied@linux.ie \
    --cc=bskeggs@redhat.com \
    --cc=dri-devel@lists.freedesktop.org \
    --cc=kherbst@redhat.com \
    --cc=linux-kernel@vger.kernel.org \
    --cc=nouveau@lists.freedesktop.org \
    /path/to/YOUR_REPLY

  <https://kernel.org/pub/software/scm/git/docs/git-send-email.html>

* If your mail client supports setting the In-Reply-To header
  via mailto: links, try the mailto: link

```
Be sure your reply has a **Subject:** header at the top and a blank line
before the message body.

---

```
This is a public inbox, see [mirroring instructions](../_/text/mirror/)
for how to clone and mirror all data and code used for this inbox;
as well as URLs for NNTP newsgroup(s).
```


=== Content from lore.kernel.org_7d00ada2_20250119_115658.html ===

```
[dri-devel.lists.freedesktop.org archive mirror](../?t=20201103194949)
 [help](../_/text/help/) / [color](../_/text/color/) / [mirror](../_/text/mirror/) / [Atom feed](../new.atom)
```
```
From: Jeremy Cline <jcline@redhat.com>
To: Ben Skeggs <bskeggs@redhat.com>
Cc: Karol Herbst <kherbst@redhat.com>,
	David Airlie <airlied@linux.ie>,
	[nouveau@lists.freedesktop.org](../../nouveau/?t=20201103194949), [linux-kernel@vger.kernel.org](../../lkml/?t=20201103194949),
	[dri-devel@lists.freedesktop.org](../../dri-devel/?t=20201103194949), Jeremy Cline <jcline@redhat.com>
Subject: [[PATCH 2/3] drm/nouveau: Add a dedicated mutex for the clients list](#r)
Date: Tue,  3 Nov 2020 14:49:11 -0500	[[thread overview]](#r)
Message-ID: <20201103194912.184413-3-jcline@redhat.com> (<raw>)
In-Reply-To: <[20201103194912.184413-1-jcline@redhat.com](../20201103194912.184413-1-jcline%40redhat.com/)>

Rather than protecting the nouveau_drm clients list with the lock within
the "client" nouveau_cli, add a dedicated lock to serialize access to
the list. This is both clearer and necessary to avoid lockdep being
upset with us when we need to iterate through all the clients in the
list and potentially lock their mutex, which is the same class as the
lock protecting the entire list.

Signed-off-by: Jeremy Cline <jcline@redhat.com>
---
 [drivers/gpu/drm/nouveau/nouveau_drm.c](#Z31drivers:gpu:drm:nouveau:nouveau_drm.c) | 9 +++++----
 [drivers/gpu/drm/nouveau/nouveau_drv.h](#Z31drivers:gpu:drm:nouveau:nouveau_drv.h) | 5 +++++
 2 files [changed](#related), 10 insertions(+), 4 deletions(-)

[diff](#iZ31drivers:gpu:drm:nouveau:nouveau_drm.c) --git a/drivers/gpu/drm/nouveau/nouveau_drm.c b/drivers/gpu/drm/nouveau/nouveau_drm.c
index 4fe4d664c5f2..d182b877258a 100644
--- a/drivers/gpu/drm/nouveau/nouveau_drm.c
+++ b/drivers/gpu/drm/nouveau/nouveau_drm.c
@@ -557,6 +557,7 @@ nouveau_drm_device_init(struct drm_device *dev)
 		nvkm_dbgopt(nouveau_debug, "DRM");

 	INIT_LIST_HEAD(&drm->clients);
+	mutex_init(&drm->clients_lock);
 	spin_lock_init(&drm->tile.lock);

 	/* workaround an odd issue on nvc1 by disabling the device's
@@ -1089,9 +1090,9 @@ nouveau_drm_open(struct drm_device *dev, struct drm_file *fpriv)

 	fpriv->driver_priv = cli;

-	mutex_lock(&drm->client.mutex);
+	mutex_lock(&drm->clients_lock);
 	list_add(&cli->head, &drm->clients);
-	mutex_unlock(&drm->client.mutex);
+	mutex_unlock(&drm->clients_lock);

 done:
 	if (ret && cli) {
@@ -1117,9 +1118,9 @@ nouveau_drm_postclose(struct drm_device *dev, struct drm_file *fpriv)
 		nouveau_abi16_fini(cli->abi16);
 	mutex_unlock(&cli->mutex);

-	mutex_lock(&drm->client.mutex);
+	mutex_lock(&drm->clients_lock);
 	list_del(&cli->head);
-	mutex_unlock(&drm->client.mutex);
+	mutex_unlock(&drm->clients_lock);

 	nouveau_cli_fini(cli);
 	kfree(cli);
[diff](#iZ31drivers:gpu:drm:nouveau:nouveau_drv.h) --git a/drivers/gpu/drm/nouveau/nouveau_drv.h b/drivers/gpu/drm/nouveau/nouveau_drv.h
index 9d04d1b36434..550e5f335146 100644
--- a/drivers/gpu/drm/nouveau/nouveau_drv.h
+++ b/drivers/gpu/drm/nouveau/nouveau_drv.h
@@ -141,6 +141,11 @@ struct nouveau_drm {

 	struct list_head clients;

+	/**
+	 * @clients_lock: Protects access to the @clients list of &struct nouveau_cli.
+	 */
+	struct mutex clients_lock;
+
 	u8 old_pm_cap;

 	struct {
--
2.28.0

_______________________________________________
dri-devel mailing list
dri-devel@lists.freedesktop.org
<https://lists.freedesktop.org/mailman/listinfo/dri-devel>

```

---

```
[next](../505be3af57c36222564d0790aa8a992b1ea4d287.camel%40redhat.com/) [prev](../20201103194912.184413-2-jcline%40redhat.com/) [parent](../20201103194912.184413-1-jcline%40redhat.com/) [reply](#R)	other threads:[[~2020-11-03 19:49 UTC](../?t=20201103194949)|[newest](../)]

Thread overview: 16+ messages / expand[[flat](T/#u)|[nested](t/#u)]  [mbox.gz](t.mbox.gz)  [Atom feed](t.atom)  [top](#b)
2020-11-03 19:49 [[PATCH 0/3] drm/nouveau: fix a use-after-free in postclose()](../20201103194912.184413-1-jcline%40redhat.com/) Jeremy Cline
2020-11-03 19:49 ` [[PATCH 1/3] drm/nouveau: use drm_dev_unplug() during device removal](../20201103194912.184413-2-jcline%40redhat.com/) Jeremy Cline
2020-11-03 19:49 ` [Jeremy Cline [this message]](#t)
2020-11-25 18:37   ` [[PATCH 2/3] drm/nouveau: Add a dedicated mutex for the clients list](../505be3af57c36222564d0790aa8a992b1ea4d287.camel%40redhat.com/) Lyude Paul
2020-11-25 19:45     ` [Jeremy Cline](../20201125194557.GC20747%40xps13/)
2020-11-03 19:49 ` [[PATCH 3/3] drm/nouveau: clean up all clients on device removal](../20201103194912.184413-4-jcline%40redhat.com/) Jeremy Cline
2020-11-25 18:44   ` [Lyude Paul](../3b1bf645662bc81d9c93ad0c74826d8f87d740cc.camel%40redhat.com/)
2020-11-25 20:26 ` [[PATCH v2 0/3] drm/nouveau: fix a use-after-free in postclose()](../20201125202648.5220-1-jcline%40redhat.com/) Jeremy Cline
2020-11-25 20:26   ` [[PATCH v2 1/3] drm/nouveau: use drm_dev_unplug() during device removal](../20201125202648.5220-2-jcline%40redhat.com/) Jeremy Cline
2020-11-25 20:26   ` [[PATCH v2 2/3] drm/nouveau: Add a dedicated mutex for the clients list](../20201125202648.5220-3-jcline%40redhat.com/) Jeremy Cline
2020-11-25 20:26   ` [[PATCH v2 3/3] drm/nouveau: clean up all clients on device removal](../20201125202648.5220-4-jcline%40redhat.com/) Jeremy Cline
2021-03-26 22:00   ` [[PATCH v2 0/3] drm/nouveau: fix a use-after-free in postclose()](../b4da382b17a77b66e45fd374c9d806dac6054e3a.camel%40redhat.com/) Lyude Paul
2021-08-16  7:03     ` [Salvatore Bonaccorso](../YRoN0vWFN6Lw22ej%40eldamar.lan/)
2021-08-17 20:32       ` [Lyude Paul](../418fdcbcf554d34cc6423a88974f916b64b3664c.camel%40redhat.com/)
2021-10-11  7:05         ` [Salvatore Bonaccorso](../YWPiU%2B9G0AKglHmi%40eldamar.lan/)
2021-10-11 11:05           ` [Karol Herbst](../CACO55tvokQBKz1ZyhK_2hN%3DV7rgV3n_L%3DPYNh8RLA%2By8n93qRQ%40mail.gmail.com/)

```
```
find likely ancestor, descendant, or conflicting patches for [this message](#t):
( dfblob:4fe4d664c5f dfblob:d182b877258 dfblob:9d04d1b3643
dfblob:550e5f33514 )
 OR (
bs:"[PATCH 2/3] drm/nouveau: Add a dedicated mutex for the clients list" )
	([help](../_/text/help/#search))
```

---

```
Reply instructions:

You may reply publicly to [this message](#t) via plain-text email
using any one of the following methods:

* Save the following mbox file, import it into your mail client,
  and reply-to-all from there: [mbox](raw)

  Avoid top-posting and favor interleaved quoting:
  <https://en.wikipedia.org/wiki/Posting_style#Interleaved_style>

* Reply using the --to, --cc, and --in-reply-to
  switches of git-send-email(1):

  git send-email \
    --in-reply-to=20201103194912.184413-3-jcline@redhat.com \
    --to=jcline@redhat.com \
    --cc=airlied@linux.ie \
    --cc=bskeggs@redhat.com \
    --cc=dri-devel@lists.freedesktop.org \
    --cc=kherbst@redhat.com \
    --cc=linux-kernel@vger.kernel.org \
    --cc=nouveau@lists.freedesktop.org \
    /path/to/YOUR_REPLY

  <https://kernel.org/pub/software/scm/git/docs/git-send-email.html>

* If your mail client supports setting the In-Reply-To header
  via mailto: links, try the mailto: link

```
Be sure your reply has a **Subject:** header at the top and a blank line
before the message body.

---

```
This is a public inbox, see [mirroring instructions](../_/text/mirror/)
for how to clone and mirror all data and code used for this inbox;
as well as URLs for NNTP newsgroup(s).
```


=== Content from bugzilla.redhat.com_eb3a35b4_20250119_115658.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1901726)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1901726)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1901726)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1901726

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1901726**](show_bug.cgi?id=1901726)
(CVE-2020-27820)
- [CVE-2020-27820](https://access.redhat.com/security/cve/CVE-2020-27820) kernel: use-after-free in nouveau kernel module

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2020-27820 kernel: use-after-free in nouveau kernel module

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2020-27820 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | low | | [Severity:](page.cgi?id=fields.html#bug_severity) | low | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1901901](show_bug.cgi?id=1901901) [1901902](show_bug.cgi?id=1901902) [1901903](show_bug.cgi?id=1901903) [1901904](show_bug.cgi?id=1901904) [1901905](show_bug.cgi?id=1901905) [1904039](show_bug.cgi?id=1904039 "CLOSED EOL - CVE-2020-27820 kernel: use-after-free in nouveau kernel module [fedora-all]") [1911185](show_bug.cgi?id=1911185) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1898653](show_bug.cgi?id=1898653) [1940001](show_bug.cgi?id=1940001) [2018914](show_bug.cgi?id=2018914) | | TreeView+ | [depends on](buglist.cgi?bug_id=1901726&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1901726&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2020-11-25 21:08 UTC by Dhananjay Arunesh | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2022-06-16 11:22 UTC ([History](show_activity.cgi?id=1901726)) | | [CC List:](page.cgi?id=fields.html#cclist) | 44 users (show)  acaringi adscvr airlied bhu blc bmasney brdeoliv bskeggs dhoward dvlasenk fhrbata hdegoede hkrzesin iboverma itamar jarodwilson jeremy jforbes jlelli jonathan josef jross jshortt jstancek jwboyer kcarcia kernel-maint kernel-mgr kherbst lgoncalv linville masami256 mchehab mcressma mlangsdo nmurray ptalbert qzhao rt-maint rvrbovsk security-response-team steved walters williams | | Fixed In Version: |  | | | Doc Type: | If docs needed, set a value | | | Doc Text: | A vulnerability was found in Linux kernel, where a use-after-frees in nouveau's postclose() handler could happen if removing device (that is not common to remove video card physically without power-off, but same happens if "unbind" the driver). | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2022-05-11 06:16:31 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHBA-2022:2229](https://access.redhat.com/errata/RHBA-2022%3A2229) | 0 | None | None | None | 2022-05-12 11:26:08 UTC | | Red Hat Product Errata | [RHBA-2022:4630](https://access.redhat.com/errata/RHBA-2022%3A4630) | 0 | None | None | None | 2022-05-18 11:45:54 UTC | | Red Hat Product Errata | [RHBA-2022:4693](https://access.redhat.com/errata/RHBA-2022%3A4693) | 0 | None | None | None | 2022-05-19 05:10:20 UTC | | Red Hat Product Errata | [RHBA-2022:4969](https://access.redhat.com/errata/RHBA-2022%3A4969) | 0 | None | None | None | 2022-06-08 18:39:23 UTC | | Red Hat Product Errata | [RHBA-2022:5088](https://access.redhat.com/errata/RHBA-2022%3A5088) | 0 | None | None | None | 2022-06-16 11:22:42 UTC | | Red Hat Product Errata | [RHSA-2022:1975](https://access.redhat.com/errata/RHSA-2022%3A1975) | 0 | None | None | None | 2022-05-10 14:38:37 UTC | | Red Hat Product Errata | [RHSA-2022:1988](https://access.redhat.com/errata/RHSA-2022%3A1988) | 0 | None | None | None | 2022-05-10 14:44:27 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1901726#c0)  Dhananjay Arunesh    2020-11-25 21:08:47 UTC  ``` A vulnerability was found in kernel, where a use-after-frees in nouveau's postclose() handler could happen if removing device (that is not common to remove video card physically without power-off, but same happens if "unbind" the driver).   ```  [Comment 4](show_bug.cgi?id=1901726#c4)  Alex    2020-11-26 11:43:25 UTC  ``` Mitigation:  To mitigate this issue, prevent the module nouveau from being loaded. Please see <https://access.redhat.com/solutions/41278> for information on how to blacklist a kernel module to prevent it from loading automatically.   ```  [Comment 6](show_bug.cgi?id=1901726#c6)  Petr Matousek    2020-11-26 15:44:58 UTC  ``` Statement:  This flaw is rated as having a Low impact because the issue can only be triggered by an privileged local user (or user with physical access) as the issue only happens during unbinding the driver or removing the device.   ```  [Comment 8](show_bug.cgi?id=1901726#c8)  Petr Matousek    2020-12-03 12:08:31 UTC  ``` External References:  [https://lore.kernel.org/dri-devel/20201103194912.184413-2-jcline@redhat.com/](https://lore.kernel.org/dri-devel/20201103194912.184413-2-jcline%40redhat.com/) [https://lore.kernel.org/dri-devel/20201103194912.184413-3-jcline@redhat.com/](https://lore.kernel.org/dri-devel/20201103194912.184413-3-jcline%40redhat.com/) [https://lore.kernel.org/dri-devel/20201103194912.184413-4-jcline@redhat.com/](https://lore.kernel.org/dri-devel/20201103194912.184413-4-jcline%40redhat.com/)   ```  [Comment 9](show_bug.cgi?id=1901726#c9)  Petr Matousek    2020-12-03 12:10:02 UTC  ``` Created kernel tracking bugs for this issue:  Affects: fedora-all [[bug 1904039](show_bug.cgi?id=1904039 "CLOSED EOL - CVE-2020-27820 kernel: use-after-free in nouveau kernel module [fedora-all]")]   ```  [Comment 11](show_bug.cgi?id=1901726#c11)  Dhananjay Arunesh    2021-01-12 10:34:37 UTC  ``` Acknowledgments:  Name: Jeremy Cline (Red Hat)   ```  [Comment 28](show_bug.cgi?id=1901726#c28)  errata-xmlrpc    2022-05-10 14:38:33 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 8  Via RHSA-2022:1975 [https://access.redhat.com/errata/RHSA-2022:1975](https://access.redhat.com/errata/RHSA-2022%3A1975)   ```  [Comment 29](show_bug.cgi?id=1901726#c29)  errata-xmlrpc    2022-05-10 14:44:23 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 8  Via RHSA-2022:1988 [https://access.redhat.com/errata/RHSA-2022:1988](https://access.redhat.com/errata/RHSA-2022%3A1988)   ```  [Comment 30](show_bug.cgi?id=1901726#c30)  Product Security DevOps Team    2022-05-11 06:16:27 UTC  ``` This bug is now closed. Further updates for individual products will be reflected on the CVE page(s):  <https://access.redhat.com/security/cve/cve-2020-27820>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1901726&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from lore.kernel.org_9e35aff3_20250119_115659.html ===

```
[dri-devel.lists.freedesktop.org archive mirror](../?t=20201103194954)
 [help](../_/text/help/) / [color](../_/text/color/) / [mirror](../_/text/mirror/) / [Atom feed](../new.atom)
```
```
From: Jeremy Cline <jcline@redhat.com>
To: Ben Skeggs <bskeggs@redhat.com>
Cc: Karol Herbst <kherbst@redhat.com>,
	David Airlie <airlied@linux.ie>,
	[nouveau@lists.freedesktop.org](../../nouveau/?t=20201103194954), [linux-kernel@vger.kernel.org](../../lkml/?t=20201103194954),
	[dri-devel@lists.freedesktop.org](../../dri-devel/?t=20201103194954), Jeremy Cline <jcline@redhat.com>
Subject: [[PATCH 3/3] drm/nouveau: clean up all clients on device removal](#r)
Date: Tue,  3 Nov 2020 14:49:12 -0500	[[thread overview]](#r)
Message-ID: <20201103194912.184413-4-jcline@redhat.com> (<raw>)
In-Reply-To: <[20201103194912.184413-1-jcline@redhat.com](../20201103194912.184413-1-jcline%40redhat.com/)>

The postclose handler can run after the device has been removed (or the
driver has been unbound) since userspace clients are free to hold the
file open the file as long as they want. Because the device removal
callback frees the entire nouveau_drm structure, any reference to it in
the postclose handler will result in a use-after-free.

To reproduce this, one must simply open the device file, unbind the
driver (or physically remove the device), and then close the device
file. This was found and can be reproduced easily with the IGT
core_hotunplug tests.

To avoid this, all clients are cleaned up in the device finialization
rather than deferring it to the postclose handler, and the postclose
handler is protected by a critical section which ensures the
drm_dev_unplug() and the postclose handler won't race.

This is not an ideal fix, since as I understand the proposed plan for
the kernel<->userspace interface for hotplug support, destroying the
client before the file is closed will cause problems. However, I believe
to properly fix this issue, the lifetime of the nouveau_drm structure
needs to be extended to match the drm_device, and this proved to be a
rather invasive change. Thus, I've broken this out so the fix can be
easily backported.

Signed-off-by: Jeremy Cline <jcline@redhat.com>
---
 [drivers/gpu/drm/nouveau/nouveau_drm.c](#Z31drivers:gpu:drm:nouveau:nouveau_drm.c) | 30 +++++++++++++++++++++++++++
 1 file [changed](#related), 30 insertions(+)

[diff](#iZ31drivers:gpu:drm:nouveau:nouveau_drm.c) --git a/drivers/gpu/drm/nouveau/nouveau_drm.c b/drivers/gpu/drm/nouveau/nouveau_drm.c
index d182b877258a..74fab777f4d0 100644
--- a/drivers/gpu/drm/nouveau/nouveau_drm.c
+++ b/drivers/gpu/drm/nouveau/nouveau_drm.c
@@ -628,6 +628,7 @@ nouveau_drm_device_init(struct drm_device *dev)
 static void
 nouveau_drm_device_fini(struct drm_device *dev)
 {
+	struct nouveau_cli *cli, *temp_cli;
 	struct nouveau_drm *drm = nouveau_drm(dev);

 	if (nouveau_pmops_runtime()) {
@@ -652,6 +653,24 @@ nouveau_drm_device_fini(struct drm_device *dev)
 	nouveau_ttm_fini(drm);
 	nouveau_vga_fini(drm);

+	/*
+	 * There may be existing clients from as-yet unclosed files. For now,
+	 * clean them up here rather than deferring until the file is closed,
+	 * but this likely not correct if we want to support hot-unplugging
+	 * properly.
+	 */
+	mutex_lock(&drm->clients_lock);
+	list_for_each_entry_safe(cli, temp_cli, &drm->clients, head) {
+		list_del(&cli->head);
+		mutex_lock(&cli->mutex);
+		if (cli->abi16)
+			nouveau_abi16_fini(cli->abi16);
+		mutex_unlock(&cli->mutex);
+		nouveau_cli_fini(cli);
+		kfree(cli);
+	}
+	mutex_unlock(&drm->clients_lock);
+
 	nouveau_cli_fini(&drm->client);
 	nouveau_cli_fini(&drm->master);
 	nvif_parent_dtor(&drm->parent);
@@ -1110,6 +1129,16 @@ nouveau_drm_postclose(struct drm_device *dev, struct drm_file *fpriv)
 {
 	struct nouveau_cli *cli = nouveau_cli(fpriv);
 	struct nouveau_drm *drm = nouveau_drm(dev);
+	int dev_index;
+
+	/*
+	 * The device is gone, and as it currently stands all clients are
+	 * cleaned up in the removal codepath. In the future this may change
+	 * so that we can support hot-unplugging, but for now we immediately
+	 * return to avoid a double-free situation.
+	 */
+	if (!drm_dev_enter(dev, &dev_index))
+		return;

 	pm_runtime_get_sync(dev->dev);

@@ -1126,6 +1155,7 @@ nouveau_drm_postclose(struct drm_device *dev, struct drm_file *fpriv)
 	kfree(cli);
 	pm_runtime_mark_last_busy(dev->dev);
 	pm_runtime_put_autosuspend(dev->dev);
+	drm_dev_exit(dev_index);
 }

 static const struct drm_ioctl_desc
--
2.28.0

_______________________________________________
dri-devel mailing list
dri-devel@lists.freedesktop.org
<https://lists.freedesktop.org/mailman/listinfo/dri-devel>

```

---

```
[next](../3b1bf645662bc81d9c93ad0c74826d8f87d740cc.camel%40redhat.com/) [prev](../20201125194557.GC20747%40xps13/) [parent](../20201103194912.184413-1-jcline%40redhat.com/) [reply](#R)	other threads:[[~2020-11-03 19:49 UTC](../?t=20201103194954)|[newest](../)]

Thread overview: 16+ messages / expand[[flat](T/#u)|[nested](t/#u)]  [mbox.gz](t.mbox.gz)  [Atom feed](t.atom)  [top](#b)
2020-11-03 19:49 [[PATCH 0/3] drm/nouveau: fix a use-after-free in postclose()](../20201103194912.184413-1-jcline%40redhat.com/) Jeremy Cline
2020-11-03 19:49 ` [[PATCH 1/3] drm/nouveau: use drm_dev_unplug() during device removal](../20201103194912.184413-2-jcline%40redhat.com/) Jeremy Cline
2020-11-03 19:49 ` [[PATCH 2/3] drm/nouveau: Add a dedicated mutex for the clients list](../20201103194912.184413-3-jcline%40redhat.com/) Jeremy Cline
2020-11-25 18:37   ` [Lyude Paul](../505be3af57c36222564d0790aa8a992b1ea4d287.camel%40redhat.com/)
2020-11-25 19:45     ` [Jeremy Cline](../20201125194557.GC20747%40xps13/)
2020-11-03 19:49 ` [Jeremy Cline [this message]](#t)
2020-11-25 18:44   ` [[PATCH 3/3] drm/nouveau: clean up all clients on device removal](../3b1bf645662bc81d9c93ad0c74826d8f87d740cc.camel%40redhat.com/) Lyude Paul
2020-11-25 20:26 ` [[PATCH v2 0/3] drm/nouveau: fix a use-after-free in postclose()](../20201125202648.5220-1-jcline%40redhat.com/) Jeremy Cline
2020-11-25 20:26   ` [[PATCH v2 1/3] drm/nouveau: use drm_dev_unplug() during device removal](../20201125202648.5220-2-jcline%40redhat.com/) Jeremy Cline
2020-11-25 20:26   ` [[PATCH v2 2/3] drm/nouveau: Add a dedicated mutex for the clients list](../20201125202648.5220-3-jcline%40redhat.com/) Jeremy Cline
2020-11-25 20:26   ` [[PATCH v2 3/3] drm/nouveau: clean up all clients on device removal](../20201125202648.5220-4-jcline%40redhat.com/) Jeremy Cline
2021-03-26 22:00   ` [[PATCH v2 0/3] drm/nouveau: fix a use-after-free in postclose()](../b4da382b17a77b66e45fd374c9d806dac6054e3a.camel%40redhat.com/) Lyude Paul
2021-08-16  7:03     ` [Salvatore Bonaccorso](../YRoN0vWFN6Lw22ej%40eldamar.lan/)
2021-08-17 20:32       ` [Lyude Paul](../418fdcbcf554d34cc6423a88974f916b64b3664c.camel%40redhat.com/)
2021-10-11  7:05         ` [Salvatore Bonaccorso](../YWPiU%2B9G0AKglHmi%40eldamar.lan/)
2021-10-11 11:05           ` [Karol Herbst](../CACO55tvokQBKz1ZyhK_2hN%3DV7rgV3n_L%3DPYNh8RLA%2By8n93qRQ%40mail.gmail.com/)

```
```
find likely ancestor, descendant, or conflicting patches for [this message](#t):
( dfblob:d182b877258 dfblob:74fab777f4d )
 OR (
bs:"[PATCH 3/3] drm/nouveau: clean up all clients on device removal" )
	([help](../_/text/help/#search))
```

---

```
Reply instructions:

You may reply publicly to [this message](#t) via plain-text email
using any one of the following methods:

* Save the following mbox file, import it into your mail client,
  and reply-to-all from there: [mbox](raw)

  Avoid top-posting and favor interleaved quoting:
  <https://en.wikipedia.org/wiki/Posting_style#Interleaved_style>

* Reply using the --to, --cc, and --in-reply-to
  switches of git-send-email(1):

  git send-email \
    --in-reply-to=20201103194912.184413-4-jcline@redhat.com \
    --to=jcline@redhat.com \
    --cc=airlied@linux.ie \
    --cc=bskeggs@redhat.com \
    --cc=dri-devel@lists.freedesktop.org \
    --cc=kherbst@redhat.com \
    --cc=linux-kernel@vger.kernel.org \
    --cc=nouveau@lists.freedesktop.org \
    /path/to/YOUR_REPLY

  <https://kernel.org/pub/software/scm/git/docs/git-send-email.html>

* If your mail client supports setting the In-Reply-To header
  via mailto: links, try the mailto: link

```
Be sure your reply has a **Subject:** header at the top and a blank line
before the message body.

---

```
This is a public inbox, see [mirroring instructions](../_/text/mirror/)
for how to clone and mirror all data and code used for this inbox;
as well as URLs for NNTP newsgroup(s).
```


=== Content from access.redhat.com_91916b76_20250119_134202.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)


