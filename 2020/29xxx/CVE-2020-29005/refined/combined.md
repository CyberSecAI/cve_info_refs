=== Content from phabricator.wikimedia.org_d86008a8_20250119_115150.html ===
Page Menu[HomePhabricator](/)

* SearchConfigure Global Search

[Log In](https://phabricator.wikimedia.org/auth/start/?next=%2FT262724)[Create Task](/maniphest/task/edit/nocreate/) [Maniphest](/maniphest/)  T262724
# Push extension exposes login credentials (CVE-2020-29004, CVE-2020-29005)Closed, Resolved[Public](/policy/explain/PHID-TASK-3flyjmbw4g736qlggxf7/view/)SecurityActions

* [Edit Task](/maniphest/task/edit/262724/)
* Edit Related Tasks...
* [Create Subtask](/maniphest/task/subtask/262724/)
* [Edit Parent Tasks](/search/rel/task.has-parent/PHID-TASK-3flyjmbw4g736qlggxf7/)
* [Edit Subtasks](/search/rel/task.has-subtask/PHID-TASK-3flyjmbw4g736qlggxf7/)
* [Merge Duplicates In](/search/rel/task.merge-in/PHID-TASK-3flyjmbw4g736qlggxf7/)
* [Close As Duplicate](/search/rel/task.close-as-duplicate/PHID-TASK-3flyjmbw4g736qlggxf7/)
* Edit Related Objects...
* [Edit Commits](/search/rel/task.has-commit/PHID-TASK-3flyjmbw4g736qlggxf7/)
* [Edit Mocks](/search/rel/task.has-mock/PHID-TASK-3flyjmbw4g736qlggxf7/)
* Subscribe
* [Mute Notifications](/subscriptions/mute/PHID-TASK-3flyjmbw4g736qlggxf7/)
* [Protect as security issue](/wmf/escalate-task/262724/)
* [Award Token](/token/give/PHID-TASK-3flyjmbw4g736qlggxf7/)
* [Flag For Later](/flag/edit/PHID-TASK-3flyjmbw4g736qlggxf7/)

Assigned To

|  | [Pastakhov](/p/Pastakhov/) |
| --- | --- |

Authored By

|  | [tosfos](/p/tosfos/) |
| --- | --- |
| Sep 11 2020, 9:10 PM2020-09-11 21:10:27 (UTC+0) |

Tags

* [Security](/tag/security/)
* [MediaWiki-extensions-Push](/tag/mediawiki-extensions-push/) [(Backlog)](/project/board/4643/)
* [Vuln-CSRF](/tag/vuln-csrf/) [(Tracked)](/project/board/907/)
* [Vuln-Infoleak](/tag/vuln-infoleak/)
Referenced FilesNoneSubscribers

|  | [Aklapper](/p/Aklapper/) |
| --- | --- |

|  | [Pastakhov](/p/Pastakhov/) |
| --- | --- |

|  | [sbassett](/p/sbassett/) |
| --- | --- |

|  | [tosfos](/p/tosfos/) |
| --- | --- |

# Description

ApiPush does not verify the targets parameter and therefore allows sending arbitrary requests. In addition, the login request sends the username and password as plain text. So a hacker can create a script and pass the url of the script as the target parameter and then catch the username and password there.

# Related Objects

* Mentions

Mentioned In [T263810: Write and send supplementary release announcement for extensions and skins with security patches (1.31.11/1.35.1)](/T263810)
[T256341: Obtain CVEs for 1.31.9/1.34.3/1.35.0 security releases](/T256341)
[T256342: Write and send supplementary release announcement for extensions and skins with security patches (1.31.9/1.34.3/1.35.0)](/T256342) Mentioned Here [T263810: Write and send supplementary release announcement for extensions and skins with security patches (1.31.11/1.35.1)](/T263810)
[T256342: Write and send supplementary release announcement for extensions and skins with security patches (1.31.9/1.34.3/1.35.0)](/T256342)
### Event Timeline

[tosfos](/p/tosfos/) created this task.[Sep 11 2020, 9:10 PM2020-09-11 21:10:27 (UTC+0)](#6455447)Restricted Application added a subscriber: [Aklapper](/p/Aklapper/).  · [View Herald Transcript](/herald/transcript/3881876/)[Sep 11 2020, 9:10 PM2020-09-11 21:10:29 (UTC+0)](#6455457)[tosfos](/p/tosfos/) renamed this task from Push extenison exposes login credentials to Push extension exposes login credentials.[Sep 11 2020, 9:10 PM2020-09-11 21:10:51 (UTC+0)](#6455459)[tosfos](/p/tosfos/) added a comment.[Sep 11 2020, 9:14 PM2020-09-11 21:14:55 (UTC+0)](#6455462)Comment Actions

There is actually a patch in review that quietly fixes this issue. It is [https://gerrit.wikimedia.org/r/c/mediawiki/extensions/Push/+/625988](https://gerrit.wikimedia.org/r/c/mediawiki/extensions/Push/%2B/625988)

[tosfos](/p/tosfos/) assigned this task to [Pastakhov](/p/Pastakhov/).[Sep 11 2020, 9:15 PM2020-09-11 21:15:36 (UTC+0)](#6455463)[Aklapper](/p/Aklapper/) added a project: [MediaWiki-extensions-Push](/tag/mediawiki-extensions-push/).[Sep 12 2020, 8:04 AM2020-09-12 08:04:45 (UTC+0)](#6455867)[sbassett](/p/sbassett/) removed a project: [Security-Team](/tag/security-team/).[Sep 14 2020, 3:12 PM2020-09-14 15:12:50 (UTC+0)](#6459043)[sbassett](/p/sbassett/) mentioned this in [T256342: Write and send supplementary release announcement for extensions and skins with security patches (1.31.9/1.34.3/1.35.0)](/T256342).[Sep 14 2020, 3:19 PM2020-09-14 15:19:02 (UTC+0)](#6459074)[sbassett](/p/sbassett/) subscribed.[Sep 14 2020, 3:48 PM2020-09-14 15:48:55 (UTC+0)](#6459247)Comment Actions

I believe this is related to the security@ email we received from Ike Hecht? Anyhow, I've softly +1'd the patch and am tracking this bug on [T256342](/T256342) for the next security release. If you need help with backports, requesting a CVE, etc, let us know.

[Aklapper](/p/Aklapper/) added a comment.[Sep 14 2020, 5:02 PM2020-09-14 17:02:19 (UTC+0)](#6459541)Comment Actions

Yes, tosfos == Ike.

[sbassett](/p/sbassett/) mentioned this in [T256341: Obtain CVEs for 1.31.9/1.34.3/1.35.0 security releases](/T256341).[Sep 23 2020, 9:16 PM2020-09-23 21:16:36 (UTC+0)](#6489531)Comment Actions

[@tosfos](/p/tosfos/) - just wanted to check in and see if <https://gerrit.wikimedia.org/r/625988> was getting close to being merged. I think we'd like to include it within [T256342](/T256342), which will likely be sent out within a day or two. If it won't be merged before then, then we can save it for the next release.

[tosfos](/p/tosfos/) added a comment.[Sep 23 2020, 9:54 PM2020-09-23 21:54:24 (UTC+0)](#6489619)Comment Actions

I think it's ready, but I don't have +2 on that repo.

[sbassett](/p/sbassett/) added a comment.[Sep 24 2020, 7:55 PM2020-09-24 19:55:43 (UTC+0)](#6492553)Comment Actions
> In [T262724#6489619](/T262724#6489619), [@tosfos](/p/tosfos/) wrote:
>
> I think it's ready, but I don't have +2 on that repo.

I can +2 it, but I'd rather someone with a bit more experience with the Push extension sign off on CR. I think any official Wikimedia announcement should likely wait until next quarter's security and supplemental release unless someone can sign off on this today or tomorrow.

[sbassett](/p/sbassett/) closed this task as Resolved.[Nov 17 2020, 10:32 PM2020-11-17 22:32:35 (UTC+0)](#6629035)[sbassett](/p/sbassett/) mentioned this in [T263810: Write and send supplementary release announcement for extensions and skins with security patches (1.31.11/1.35.1)](/T263810).Comment Actions

<https://gerrit.wikimedia.org/r/625988> appears merged, so I'm going to resolve this for now. I'm tracking this for the next supplemental security announcement for extensions/skins: [T263810](/T263810). We should make this task public, if possible, unless other wikis are still being alerted about the security issue.

[sbassett](/p/sbassett/) added projects: [Vuln-CSRF](/tag/vuln-csrf/), [Vuln-Infoleak](/tag/vuln-infoleak/).[Nov 24 2020, 2:34 AM2020-11-24 02:34:00 (UTC+0)](#6643648)[sbassett](/p/sbassett/) renamed this task from Push extension exposes login credentials to Push extension exposes login credentials (CVE-2020-29004).[Dec 1 2020, 5:48 PM2020-12-01 17:48:29 (UTC+0)](#6660488)[sbassett](/p/sbassett/) renamed this task from Push extension exposes login credentials (CVE-2020-29004) to Push extension exposes login credentials (CVE-2020-29004, CVE-2020-29005).[tosfos](/p/tosfos/) added a comment.Edited · [Dec 1 2020, 8:05 PM2020-12-01 20:05:06 (UTC+0)](#6660909)Comment Actions

Should we be alerting the wikis using this extension? Is there a process for identifying who uses it (wikiapiary?) and who to contact? It seems like anyone using this extension is on an obsolete version of MediaWiki right now: [https://wikiapiary.com/wiki/Extension:Push](https://wikiapiary.com/wiki/Extension%3APush)

[sbassett](/p/sbassett/) added a comment.[Dec 1 2020, 8:16 PM2020-12-01 20:16:52 (UTC+0)](#6660918)Comment Actions
> In [T262724#6660909](/T262724#6660909), [@tosfos](/p/tosfos/) wrote:
>
> Should we be alerting the wikis using this extension? Is there a process for identifying who uses it (wikiapiary?) and who to contact? It seems like anyone using this extension is on an obsolete version of MediaWiki right now: [https://wikiapiary.com/wiki/Extension:Push](https://wikiapiary.com/wiki/Extension%3APush)

We (as in the WMF) aren't really resourced to do this. The most we tend to do for non-bundled, non-Wikimedia-production extensions, skins, services, etc. is help review security patches, backport security patches, request relevant CVEs and send out quarterly announcements of recently-patched code bases (e.g. [T256342](/T256342)). It is hoped that this provides enough resources and visibility of security issues so that MediaWiki operators can patch at their convenience. That being said, if anyone has the cycles and desire to reach out to affected MediaWiki operators (such as those listed upon wikiapiary) the [Security-Team](/tag/security-team/) would certainly encourage such an action.

[tosfos](/p/tosfos/) added a comment.[Dec 3 2020, 11:30 PM2020-12-03 23:30:28 (UTC+0)](#6668218)Comment Actions

Fully understood. We started alerting wikis from WikiApiary. Please give us (WikiTeq) a week to try and find others. At that time, please feel free to publicize.

[sbassett](/p/sbassett/) added a comment.[Dec 4 2020, 6:56 PM2020-12-04 18:56:14 (UTC+0)](#6670014)Comment Actions
> In [T262724#6668218](/T262724#6668218), [@tosfos](/p/tosfos/) wrote:
>
> Please give us (WikiTeq) a week to try and find others. At that time, please feel free to publicize.

Sure, I'll try to set a reminder or feel free to just ping me on this task once you feel this can be publicly disclosed.

[sbassett](/p/sbassett/) triaged this task as Low priority.[Dec 22 2020, 9:37 PM2020-12-22 21:37:19 (UTC+0)](#6709201)[sbassett](/p/sbassett/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-h3lwzk7q5fx4qur/)" to "Public (No Login Required)".Content licensed under Creative Commons Attribution-ShareAlike (CC BY-SA) 4.0 unless otherwise noted; code licensed under GNU General Public License (GPL) 2.0 or later and other open source licenses. By using this site, you agree to the Terms of Use, Privacy Policy, and Code of Conduct. · [Wikimedia Foundation](https://wikimediafoundation.org/) · [Privacy Policy](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ANon-wiki_privacy_policy) · [Code of Conduct](https://www.mediawiki.org/wiki/Special%3AMyLanguage/Code_of_Conduct) · [Terms of Use](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ATerms_of_Use/Phabricator) · [Disclaimer](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3AGeneral_disclaimer) · [CC-BY-SA](https://creativecommons.org/licenses/by-sa/4.0/) · [GPL](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html) · [Credits](https://www.mediawiki.org/wiki/Phabricator/Credits)

=== Content from gerrit.wikimedia.org_4a557f2b_20250119_115148.html ===



