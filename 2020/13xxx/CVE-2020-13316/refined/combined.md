=== Content from gitlab.com_940ccaf1_20250119_115831.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

You need to sign in or sign up before continuing.

* [cves](/gitlab-org/cves/-/tree/master)
* [2020](/gitlab-org/cves/-/tree/master/2020)
* [**CVE-2020-13316.json**](/gitlab-org/cves/-/blob/master/2020/CVE-2020-13316.json)

Find file

[Blame](/gitlab-org/cves/-/blame/master/2020/CVE-2020-13316.json)
[Permalink](/gitlab-org/cves/-/blob/5dbfc725a86e6d942deec9c36b7f06f5b8d912fc/2020/CVE-2020-13316.json "Go to permalink <kbd class='flat ml-1' aria-hidden=true>y</kbd>")

* [![ GitLab Bot 's avatar](/uploads/-/system/user/avatar/1786152/avatar.png?width=64 " GitLab Bot ")](/gitlab-bot)

  Sep 12, 2020

  [3f3bfc6e](/gitlab-org/cves/-/commit/3f3bfc6e9c3f9e4957a3a40da779b2362eb328a0)
  [Publishing 0 updated advisories and 1 new advisories](/gitlab-org/cves/-/commit/3f3bfc6e9c3f9e4957a3a40da779b2362eb328a0)
  繚
  3f3bfc6e

  [ GitLab Bot ](/gitlab-bot) authored Sep 12, 2020

  3f3bfc6e

  [Publishing 0 updated advisories and 1 new advisories](/gitlab-org/cves/-/commit/3f3bfc6e9c3f9e4957a3a40da779b2362eb328a0)
  [ GitLab Bot ](/gitlab-bot) authored Sep 12, 2020

Loading



=== Content from gitlab.com_f06d409b_20250119_115831.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# Disabled Repository functionality - Still Able To Access The Project Files and Container Registry via Deploy Token

**[HackerOne report #884174](https://hackerone.com/reports/884174)** by `vaib25vicky` on 2020-05-28, assigned to [@vdesousa](/vdesousa "Vitor Meireles De Sousa"):

Security Issue <https://gitlab.com/gitlab-org/security/gitlab/-/issues/228>

### Description

The doc <https://docs.gitlab.com/ee/user/project/settings/#sharing-and-permissions> states that

> If you disable Repository functionality, GitLab also disables the following features for your project:
>
> Merge Requests
>
> Pipelines
>
> Container Registry
>
> Git Large File Storage
>
> Packages

After disabling the repository functionality, none including owner of the project is allowed to `git clone` and access the repository files.

But this is not the case with the deploy tokens, it allows you to download (git clone) or push and pull packages and container registry images of a project without having a user and a password. So, one with deploy tokens of the project is able to access project files and container registry.

Assuming of a situation where owner project token got stole or he lost it, and owner decided to disable repository functionality instead of revoking token, then this can be problematic. And owner can decide disabling repository first as a defense against lost token because Gitlab doc states that it disable project files as well as container registry.

### Steps to reproduce

As a quick PoC, I am going to use my public project whose repository functionality is disabled

[REDACTED]

* Going over above link, you can see repos is disabled.
* Use the below api with project deploy token

```
git clone https://[REDACTED]

```

* You will see one file into `lame` folder named `hackerone`

### Impact

Assuming of a situation where owner project token got stole or he lost it, and owner decided to disable repository functionality instead of revoking token, then this can be problematic. And owner can decide disabling repository first as a defense against lost token because Gitlab doc states that it disable project files as well as container registry.

### What is the current *bug* behavior?

Able to clone repository even when owner disabled repository functionality via Deploy token.

### What is the expected *correct* behavior?

If repository functionality is disabled then don't allow deploy tokens to clone repository as well as access container registry.

### Output of checks

This bug happens on GitLab.com

## Impact

Disabled Repository functionality - Still Able To Access The Project Files and Container Registry via Deploy Token

Edited Jul 06, 2022 by [Costel Maxim](/cmaxim)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.


