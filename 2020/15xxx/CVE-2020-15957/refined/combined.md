=== Content from github.com_84569304_20250119_131413.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FDP-3T%2Fdp3t-sdk-backend)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FDP-3T%2Fdp3t-sdk-backend)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=DP-3T%2Fdp3t-sdk-backend)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[DP-3T](/DP-3T)
/
**[dp3t-sdk-backend](/DP-3T/dp3t-sdk-backend)**
Public

* [Notifications](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend) You must be signed in to change notification settings
* [Fork
  86](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)
* [Star
   199](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)

The backend implementation for DP3T

### License

[MPL-2.0 license](/DP-3T/dp3t-sdk-backend/blob/develop/LICENSE)

[199
stars](/DP-3T/dp3t-sdk-backend/stargazers) [86
forks](/DP-3T/dp3t-sdk-backend/forks) [Branches](/DP-3T/dp3t-sdk-backend/branches) [Tags](/DP-3T/dp3t-sdk-backend/tags) [Activity](/DP-3T/dp3t-sdk-backend/activity)
 [Star](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)

 [Notifications](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend) You must be signed in to change notification settings

* [Code](/DP-3T/dp3t-sdk-backend)
* [Issues
  14](/DP-3T/dp3t-sdk-backend/issues)
* [Pull requests
  8](/DP-3T/dp3t-sdk-backend/pulls)
* [Actions](/DP-3T/dp3t-sdk-backend/actions)
* [Security](/DP-3T/dp3t-sdk-backend/security)
* [Insights](/DP-3T/dp3t-sdk-backend/pulse)

Additional navigation options

* [Code](/DP-3T/dp3t-sdk-backend)
* [Issues](/DP-3T/dp3t-sdk-backend/issues)
* [Pull requests](/DP-3T/dp3t-sdk-backend/pulls)
* [Actions](/DP-3T/dp3t-sdk-backend/actions)
* [Security](/DP-3T/dp3t-sdk-backend/security)
* [Insights](/DP-3T/dp3t-sdk-backend/pulse)

# DP-3T/dp3t-sdk-backend

    develop[Branches](/DP-3T/dp3t-sdk-backend/branches)[Tags](/DP-3T/dp3t-sdk-backend/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[626 Commits](/DP-3T/dp3t-sdk-backend/commits/develop/) | | |
| [.github/workflows](/DP-3T/dp3t-sdk-backend/tree/develop/.github/workflows "This path skips through empty directories") | | [.github/workflows](/DP-3T/dp3t-sdk-backend/tree/develop/.github/workflows "This path skips through empty directories") |  |  |
| [docker-compose](/DP-3T/dp3t-sdk-backend/tree/develop/docker-compose "docker-compose") | | [docker-compose](/DP-3T/dp3t-sdk-backend/tree/develop/docker-compose "docker-compose") |  |  |
| [documentation](/DP-3T/dp3t-sdk-backend/tree/develop/documentation "documentation") | | [documentation](/DP-3T/dp3t-sdk-backend/tree/develop/documentation "documentation") |  |  |
| [dpppt-backend-sdk](/DP-3T/dp3t-sdk-backend/tree/develop/dpppt-backend-sdk "dpppt-backend-sdk") | | [dpppt-backend-sdk](/DP-3T/dp3t-sdk-backend/tree/develop/dpppt-backend-sdk "dpppt-backend-sdk") |  |  |
| [ws-sdk](/DP-3T/dp3t-sdk-backend/tree/develop/ws-sdk "ws-sdk") | | [ws-sdk](/DP-3T/dp3t-sdk-backend/tree/develop/ws-sdk "ws-sdk") |  |  |
| [.gitignore](/DP-3T/dp3t-sdk-backend/blob/develop/.gitignore ".gitignore") | | [.gitignore](/DP-3T/dp3t-sdk-backend/blob/develop/.gitignore ".gitignore") |  |  |
| [.pre-commit-config.yaml](/DP-3T/dp3t-sdk-backend/blob/develop/.pre-commit-config.yaml ".pre-commit-config.yaml") | | [.pre-commit-config.yaml](/DP-3T/dp3t-sdk-backend/blob/develop/.pre-commit-config.yaml ".pre-commit-config.yaml") |  |  |
| [CONTRIBUTING.md](/DP-3T/dp3t-sdk-backend/blob/develop/CONTRIBUTING.md "CONTRIBUTING.md") | | [CONTRIBUTING.md](/DP-3T/dp3t-sdk-backend/blob/develop/CONTRIBUTING.md "CONTRIBUTING.md") |  |  |
| [GenerateKeyPair.java](/DP-3T/dp3t-sdk-backend/blob/develop/GenerateKeyPair.java "GenerateKeyPair.java") | | [GenerateKeyPair.java](/DP-3T/dp3t-sdk-backend/blob/develop/GenerateKeyPair.java "GenerateKeyPair.java") |  |  |
| [GenerateKeyPairEC.java](/DP-3T/dp3t-sdk-backend/blob/develop/GenerateKeyPairEC.java "GenerateKeyPairEC.java") | | [GenerateKeyPairEC.java](/DP-3T/dp3t-sdk-backend/blob/develop/GenerateKeyPairEC.java "GenerateKeyPairEC.java") |  |  |
| [LICENSE](/DP-3T/dp3t-sdk-backend/blob/develop/LICENSE "LICENSE") | | [LICENSE](/DP-3T/dp3t-sdk-backend/blob/develop/LICENSE "LICENSE") |  |  |
| [Makefile](/DP-3T/dp3t-sdk-backend/blob/develop/Makefile "Makefile") | | [Makefile](/DP-3T/dp3t-sdk-backend/blob/develop/Makefile "Makefile") |  |  |
| [README.md](/DP-3T/dp3t-sdk-backend/blob/develop/README.md "README.md") | | [README.md](/DP-3T/dp3t-sdk-backend/blob/develop/README.md "README.md") |  |  |
| [SECURITY.md](/DP-3T/dp3t-sdk-backend/blob/develop/SECURITY.md "SECURITY.md") | | [SECURITY.md](/DP-3T/dp3t-sdk-backend/blob/develop/SECURITY.md "SECURITY.md") |  |  |
| [configure.sh](/DP-3T/dp3t-sdk-backend/blob/develop/configure.sh "configure.sh") | | [configure.sh](/DP-3T/dp3t-sdk-backend/blob/develop/configure.sh "configure.sh") |  |  |
| View all files | | |

## Repository files navigation

* README
* MPL-2.0 license
* Security
# DP3T-Backend-SDK

[![License: MPL 2.0](https://camo.githubusercontent.com/aedad2e2e01b9abdf131b2590d74f45ca3b799cd8ed34bbaed2d2ce41e333dd7/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d504c253230322e302d627269676874677265656e2e737667)](https://camo.githubusercontent.com/aedad2e2e01b9abdf131b2590d74f45ca3b799cd8ed34bbaed2d2ce41e333dd7/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d504c253230322e302d627269676874677265656e2e737667)
[![Java CI with Maven](https://github.com/DP-3T/dp3t-sdk-backend/workflows/Java%20CI%20with%20Maven/badge.svg?branch=master)](https://github.com/DP-3T/dp3t-sdk-backend/workflows/Java%20CI%20with%20Maven/badge.svg?branch=master)
[![Quality Gate Status](https://camo.githubusercontent.com/5fc16c711d1f4b5247159d221fedeef4a826a27335943df8e33e784cdcee6122/68747470733a2f2f736f6e6172636c6f75642e696f2f6170692f70726f6a6563745f6261646765732f6d6561737572653f70726f6a6563743d44502d33545f647033742d73646b2d6261636b656e64266d65747269633d616c6572745f737461747573)](https://sonarcloud.io/dashboard?id=DP-3T_dp3t-sdk-backend)
[![Coverage](https://camo.githubusercontent.com/63793e4ca83f6a496a93548bd463554ff95fdaa8f4ddd08bf7c19d2c1cc6f267/68747470733a2f2f736f6e6172636c6f75642e696f2f6170692f70726f6a6563745f6261646765732f6d6561737572653f70726f6a6563743d44502d33545f647033742d73646b2d6261636b656e64266d65747269633d636f766572616765)](https://sonarcloud.io/dashboard?id=DP-3T_dp3t-sdk-backend)

## License

This project is licensed under the terms of the MPL 2 license. See the [LICENSE](/DP-3T/dp3t-sdk-backend/blob/develop/LICENSE) file.

## Repositories

* Android SDK & Calibration app: [dp3t-sdk-android](https://github.com/DP-3T/dp3t-sdk-android)
* iOS SDK & Calibration app: [dp3t-sdk-ios](https://github.com/DP-3T/dp3t-sdk-ios)
* Backend SDK: [dp3t-sdk-backend](https://github.com/DP-3T/dp3t-sdk-backend)

For an example project using the SDK look at the Swiss contact tracing app [SwissCovid](https://github.com/SwissCovid).

## DP3T

The Decentralised Privacy-Preserving Proximity Tracing (DP3T) project is an open protocol for COVID-19 proximity tracing using Bluetooth Low Energy functionality on mobile devices, which ensures that personal data and computation stay entirely on an individual's phone. It was produced by a core team of over 25 scientists and academic researchers from across Europe. It has also been scrutinized and improved by the wider community.

DP3T is a free-standing effort, begun at the EPFL and ETHZ, where the protocol was produced and where the implementation into an open-sourced app and server is taking place.

## Contribution Guide

Please read the [Contribution Guide](/DP-3T/dp3t-sdk-backend/blob/develop/CONTRIBUTING.md) before submitting any pull-request.

## Introduction

This documentation describes the backend used for the SwissCovid application. It is focused on providing information for the requests used for the Exposure Notification framework. Although, code of the old format is still provided, no documentation or support is available except the code itself.

## Federation Gateway Service

### Introduction

Since multiple countries are now using the Exposure Notifications Framework, the European Union started an effort to allow federation of keys coming from multiple countries. Every country connected to the gateway can then up- and download keys from all participating countries (relayed via the gateway). This means that people e.g. using the Swiss app in Germany can, if they decide to share their keys with Germany, infect people using the German app and vice versa.

For this another module was added, which periodically synchronizes keys, which are marked for sharing to a gateway service. The official European Federation Gateway Service (EFGS) can be found [here](https://github.com/eu-federation-gateway-service/efgs-federation-gateway). The [Swiss fork](https://github.com/admin-ch/chgs-federation-gateway) adds Postgres-Support as well as some other minor features.

Further information on the Interoperability Module can be found in the [dpppt-backend-sdk-interops module](/DP-3T/dp3t-sdk-backend/blob/develop/dpppt-backend-sdk/dpppt-backend-sdk-interops/README.md)

## Reproducible Builds

In order to have reproducible builds the [io.github.zlika](https://github.com/zlika/reproducible-build-maven-plugin) maven plugin is used. It replaces all timestamp with the timestamp of the last commit, and orders the entries in the JAR alphabetically. The github action then computes the sha256sum of the resulting JAR and adds the output as an build artifact.

## Dependencies

* Spring Boot 2.4.5
* Java 11 (or higher)
* Logback
* [Springboot-Swagger-3](https://github.com/Ubique-OSS/springboot-swagger3) (From Bintray)

### Database

For development purposes an hsqldb can be used to run the web service locally. For production systems, it is recommended to connect to a PostgreSQL database (cluster if possible).

#### Keys

The keys that are stored in the database contain the `GAEN` key data as specified by Google/Apple, as well as some more fields to indicate the origin of the keys, and if the keys should be shared with a federation gateway. For the federation gateway a further field `batch_tag` is needed to indicate the batch this key has been uploaded with.

[![](/DP-3T/dp3t-sdk-backend/raw/develop/documentation/img/t_gaen_exposed.png)](/DP-3T/dp3t-sdk-backend/blob/develop/documentation/img/t_gaen_exposed.png)

| Column | Description |
| --- | --- |
| pk\_exposed\_id | Primary key, autogenerated |
| key | The tek, as Base64 HEX string |
| rolling\_start\_number | Tek rolling start number, 10-minute interval since UTC epoch |
| rolling\_period | Tek rolling period, number of 10-minute intervals that a key is valid for |
| received\_at | Rounded timestamp the tek was received, |
| report\_type | The `reportType` indicating how the person uploading the key was "verified" (e.g. confirmed test) |
| days\_since\_onset\_of\_symptoms | c.f. [Interops documentation](/DP-3T/dp3t-sdk-backend/blob/develop/dpppt-backend-sdk/dpppt-backend-sdk-interops/README.md) |
| origin | String where this key was retrieved from [ISO-3166-1-Alpha-2](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes) |
| batch\_tag | If uploaded to EFGS, indicates the `batchTag` of the batch this key was uploaded with |
| share\_with\_federation\_gateway | Indicate if this key should be shared with the federation gateway |

#### JWT

This schema contains the `uuid` field to be stored temporarily. This is used to prevent replay attacks of the same token twice and the entry will be removed, after the validity of the token has been expired.

[![](/DP-3T/dp3t-sdk-backend/raw/develop/documentation/img/t_redeem_uuid.png)](/DP-3T/dp3t-sdk-backend/blob/develop/documentation/img/t_redeem_uuid.png)

| Column | Description |
| --- | --- |
| pk\_redeem\_uuid\_id | Primary key, autogenerated |
| uuid | UUID from JWD token |
| received\_at | Rounded timestamp the token was received |

#### Federation

To allow a monitoring of uploads to a federation gateway, this table holds log entries indicating different actions and error messages.

[![](/DP-3T/dp3t-sdk-backend/raw/develop/documentation/img/t_federation_sync_log.png)](/DP-3T/dp3t-sdk-backend/blob/develop/documentation/img/t_federation_sync_log.png)

| Column | Description |
| --- | --- |
| pk\_federation\_sync\_log\_id |  |
| gateway | Which gateway the log originated from |
| action | The action associated with the entry (UPLOAD |
| batch\_tag | The `batchTag` associated with the batch the message was generated for |
| upload\_date | The date the batch was uploaded (the parameter given for the API call to the gateway) |
| start\_time | When the action started. (`end - start = duration`) |
| end\_time | When the action ended. (`end - start = duration`) |
| state | If the action was successful (ERROR |

## Environments

To control different behaviors, SpringBoot profiles are used. The idea is to provide an abstract base class, which defines everything needed. Such properties can be defined as abstract, and their implementation can be provided in an extended class.

#### WSCloud\*Config/WSProdConfig/WSDevConfig

Currently three non-abstract configs (`dev`, `test`, `abn` and `prod`) are provided, which are used in the current deployed version of the backend. Those are the CloudConfigs and they are optimized to work with an environment using KeyCloak and CloudFoundry.

Furthermore, two non-abstract configs (`dev`, `prod`) are provided, which implement a basic configuration, and which should work out-of-the-box. It generates new key pairs, used to sign the payload, each time the web service is started. For an example on how to persist the keys across startup, have a look at the cloud configs.

> Note that the `dev` config uses a HSQLDB, which is non-persistent, whereas `prod` needs a running instance of PostgreSQL (either in a docker or native).

If you plan to provide new extensions or make adjustments and want to provide those to the general public, it is recommended to add a new configuration for your specific case. This can be e.g. an abstract class (e.g. WSCloudBaseConfig), which extends the base class providing certain needed keys or functions. If you provide an abstract class, please make sure to add at least one non-abstract class showing the implementation needed.

#### WSJWTConfig

There is also a possible extension to the base web service provided. The JWT config is intended to implement a possibility to authorize the post requests used to publish the secret keys from the clients. JWTs, which are signed by a health authority, are used. An interface is provided, which can be used to define the behavior of authorization (c.f. the `ValidateRequest` class and its implementation in `NoValidateRequest` and `JWTValidator`).

## Fake Requests

Since a client has to send its keys to the backend, it would be possible to filter traffic based on post requests to the backend, in order to find out, which IP addresses are "infected". To minimize such a risk clients will send a fake request, where the time delay is based on a Poisson distribution.

### Time Delay

In order to minimize the risk of timing attacks, to find out whether a request was fake or not, a time-delay of 1.5s is introduced for the `POST` request.

### Constant Payload

Clients pad the number of keys with fake keys, if not enough keys are provided by the framework (e.g. the app is installed for less than 14 days). On fake keys the web-service should not validate any dates. The key payload though needs to be the exact same size!

## GAEN/DP3T

We started with the project before Google and Apple announced the Exposure Notifications. For some time we supported both the old DP3T protocol and the new GAEN protocol, which is based on DP3T. Now that GAEN has become available on most of the versions, we removed DP3T support in the backend to lower the attack surface and make development easier.

### Legacy Notifications

Since the Exposure Notifications format has been adopted, we drop support for legacy notifications. Currently no feature-requests are implemented for the old format, but if a PR is provided, it can still be merged.

By default, the legacy controller (`DPPPTController`) uses the base url `/v1/`.

### Exposure Notifications

Here an implementation for the [Exposure Notification](https://www.google.com/covid19/exposurenotifications/) Library by Google and Apple is provided.

By default, the EN controller (`GaenController`) uses the base url `/v1/gaen/`.

The web-service provides three endpoints, which map the Exposure Notification specifications.

* /v1/gaen/exposed: `POST` Send a list of infected keys. If a JWT is used to authorize the request, send a JWT back to authorize the call of the following day. If the request as a whole is a "fake"-request, meaning the JWT has the "fake" claim set to "1", no keys are inserted.
* /v1/gaen/exposednextday: `POST` Since the EN framework won't give the key of the current day, the upload has to be split into two. This endpoint receives the key of the last day. This endpoint eventually will be removed, as soon as the EN framework is adjusted. If JWT are activated, this endpoint needs the JWT received from a successfull request to `/v1/gaen/exposed`.
* /v1/gaen/exposed/<timestamp>?publishedafter=<publishedAfter>: `GET` Returns a list of keys, which were used at `timestamp`. Note that `timestamp` needs to be epoch milliseconds. Since the behaviour of Android and iOS aren't the same, the optional `publishedAfter` parameter is added. If set only keys, which were received *after* `publishAfter` are returned. This request returns `ZIP` file containing `export.bin` and `export.sig`, where the keys and the signature are stored, as need by the EN framework. The class for signing and serializing is `ProtoSignature`.

Further endpoints are added to the controller for debugging purposes. Those requests can e.g. be blocked by a WAF rule or similar.

## JWT Validation

In order to prevent replay attacks, a JWT is only valid once. After one usage the "jit" claim is stored temporarily (longer than the validity).
The JWTs are validated based on the following criteria:

* JWT needs an expiresAt claim which is valid
* The expiresAt claim should not be longer than the set value in the config
* The JWT needs a "jit" claim and the said "jit" should not have been used

## Content Signing

In order to provide authenticity, the HttpPayload is signed. The signature is added as a `Signature` HttpHeader to each 200 or 204 response. The signature consists of a JWT containing the content hash as a claim. Further, if `protected-headers` are added in the controller (and activated through the respective key in the properties file), those headers are signed as well, thus providing the possibility of signing certain request parameters.

## Swagger

We use [Springboot-Swagger-3](https://github.com/Ubique-OSS/springboot-swagger3) to generate a `YAML` based on settings and controllers found in the project. We include a up-to-date version in each release. Currently they are lacking the documentation, but should provide enough information to use them in [Swagger Editor](https://editor.swagger.io).

## Key Handling

There are multiple ways of generating and using key pairs. In the cloud configs, the public key is read from a certificate provided via SpringBoot value injection. The private key is a PKCS8-PEM encoded private key. In the default configs, the key pairs are generated via helper functions from the JWT-library used.

There are two files, `GenerateKeyPair.java` (outputs directly the keys) and `GenerateKeyPairEC.java` (preferred way of generating key pairs, uses PEM format) to give an idea on how to generate them by yourselves.

Depending on the key-size and the algorithm and/or if you are using the `PemReader`, you may need to add [BouncyCastle](https://www.bouncycastle.org/) (c.f. [Export/Import regulations](https://crypto.stackexchange.com/questions/20524/why-are-there-limitations-on-using-encryption-with-keys-beyond-certain-length)).

> Note that the `KeyFactory` class provides a `getInstance(String algorithm, String provider)` overload as well (e.g. you need larger key sizes provided by `BouncyCastle`). You can essentially exchange `EC` and `RSA` whenever you like. For production use, please make sure that you double check the key specifications. The two files provided just use the default parameters, which may or may not be sufficient for your use case.

To load the keys you can use the `KeyVault` class. The class works by registering functions, which implement a possible decoding from a `String` to a `KeyPair` (respectively `PrivateKey` or `PublicKey`). To register a new provider, the static functions `registerNewPublicEncodingProvider` and `registerNewPrivateEncodingProvider` can be used. Have a look at the `KeyVault` class to see examples of decoding providers.

There are two possible ways of using the class. The recommended way is, to load it as a `Bean` and define all the `KeyPairs` used. The `KeyVault` is `@Autowired` into the `BaseConfiguration` and hence needs a instance, provided by one of the concrete configurations. Here is an example from the `DevConfig`:

```
var gaen = new KeyVault.KeyVaultEntry("gaen", getPrivateKey(), getPublicKey(), "EC");
var nextDayJWT = new KeyVault.KeyVaultEntry("nextDayJWT", getPrivateKey(), getPublicKey(), "EC");
var hashFilter = new KeyVault.KeyVaultEntry("hashFilter", getPrivateKey(), getPublicKey(), "EC");

try {
  return new KeyVault(gaen, nextDayJWT, hashFilter);
} catch (PrivateKeyNoSuitableEncodingFoundException | PublicKeyNoSuitableEncodingFoundException e) {
  throw new RuntimeException(e);
}
```

The constructor inserts the `KeyPairs` into a hash map, from which you can get the entries.

One does not need to use the constructor though, since the static functions `loadPrivateKey` and `loadPublicKey` can be used directly as well. It can be convenient, if one does not need to provide a `KeyPair` as, for example when only the `PublicKey` is provided, to verify signatures. The following code shows how to load a `PublicKey`.

```
KeyVault.loadPublicKey(loadPublicKey(), "RSA")
```

In any case the `loadPrivateKey` and `loadPublicKey` functions will iterate through all providers until one succeeds, or else an exception is thrown. The following providers are registered, when the class is instantiated (via `@Bean` for example):

#### PrivateKey

* `loadPrivateKeyFromJavaEncoding`: Loads a private key from a Base64 encoded version of the output of `PrivateKey.getEncoded()`.
* `loadPrivateKeyFromPem`: Loads the private key from the contents of a PEM file.

#### PublicKey

* `loadPublicKeyFromJavaEncoding`: Loads a public key from a Base64 encoded version of the output of `PublicKey.getEncoded()`.
* `loadPublicKeyFromPem`: Loads the public key from the contents of a PEM file.
* `loadPublicKeyFromX509Certificate`: Loads the public key from a certificate.

## Build

To build you need to install Maven.

```
cd dpppt-backend-sdk
mvn install
```
> Note to run the PostgreSQL unit tests, `dockerd` is needed. If you want to skip those tests add `-DskipTests` to the build command.

## Run

```
java -jar dpppt-backend-sdk-ws/target/dpppt-backend-sdk-ws-*.jar
```

## Dockerfiles

The Dockerfile includes a base JDK image to run the jar. To actually build the docker container, you need to place the generated jar in the bin folder.

```
cp dpppt-sdk-backend/dpppt-backend-sdk-ws/target/dpppt-backend-sdk-ws-1.0.0-SNAPSHOT.jar ws-sdk/ws/bin/dpppt-backend-sdk-ws-1.0.0
```

```
cd ws-sdk && docker build -t <the-tag-we-use> .
```

```
docker run -p 80:8080 -v <path_to_logbackxml>:/home/ws/conf/dpppt-backend-sdk-ws-logback.xml -v <path_to_application_properties>:/home/ws/conf/dpppt-backend-sdk-ws.properties <the-tag-we-use>
```

## Makefile

You can use the provided makefile to build the backend, build a docker image and generate the documentation.

Without a target, the makefile will generate everything except the docker image.

```
make
```

To build the docker image run

```
make docker-build
```

This will build the jar and copy it into the `ws-sdk/ws/bin` folder, from where it is then added to the container image.
The image will be tagged as `dp3t-docker`.

An example `logback.xml` is found in the `resources` folder for the `dpppt-backend-sdk-ws` Java module.

An example `application.properties` file is found at the same location.
Just make sure the configuration matches with your deployment (c.f. `WSBaseConfig` for possible properties
and `WSCloudBaseConfig` for some `CloudFoundry` specific properties)

## About

The backend implementation for DP3T

### Resources

[Readme](#readme-ov-file)
### License

[MPL-2.0 license](#MPL-2.0-1-ov-file)
### Security policy

[Security policy](#security-ov-file)

[Activity](/DP-3T/dp3t-sdk-backend/activity)
[Custom properties](/DP-3T/dp3t-sdk-backend/custom-properties)
### Stars

[**199**
stars](/DP-3T/dp3t-sdk-backend/stargazers)
### Watchers

[**23**
watching](/DP-3T/dp3t-sdk-backend/watchers)
### Forks

[**86**
forks](/DP-3T/dp3t-sdk-backend/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2FDP-3T%2Fdp3t-sdk-backend&report=DP-3T+%28user%29)

## [Releases 37](/DP-3T/dp3t-sdk-backend/releases)

[v2.5.0
Latest

Dec 8, 2022](/DP-3T/dp3t-sdk-backend/releases/tag/v2.5.0)
[+ 36 releases](/DP-3T/dp3t-sdk-backend/releases)

## [Packages 0](/orgs/DP-3T/packages?repo_name=dp3t-sdk-backend)

## [Contributors 17](/DP-3T/dp3t-sdk-backend/graphs/contributors)

[+ 3 contributors](/DP-3T/dp3t-sdk-backend/graphs/contributors)

## Languages

* [Java
  99.2%](/DP-3T/dp3t-sdk-backend/search?l=java)
* Other
  0.8%

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_73e32596_20250119_112029.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FDP-3T%2Fdp3t-sdk-backend%2Fsecurity%2Fadvisories%2FGHSA-5m5q-3qw2-3xf3)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FDP-3T%2Fdp3t-sdk-backend%2Fsecurity%2Fadvisories%2FGHSA-5m5q-3qw2-3xf3)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=DP-3T%2Fdp3t-sdk-backend)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[DP-3T](/DP-3T)
/
**[dp3t-sdk-backend](/DP-3T/dp3t-sdk-backend)**
Public

* [Notifications](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend) You must be signed in to change notification settings
* [Fork
  86](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)
* [Star
   199](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)

* [Code](/DP-3T/dp3t-sdk-backend)
* [Issues
  14](/DP-3T/dp3t-sdk-backend/issues)
* [Pull requests
  8](/DP-3T/dp3t-sdk-backend/pulls)
* [Actions](/DP-3T/dp3t-sdk-backend/actions)
* [Security](/DP-3T/dp3t-sdk-backend/security)
* [Insights](/DP-3T/dp3t-sdk-backend/pulse)

Additional navigation options

* [Code](/DP-3T/dp3t-sdk-backend)
* [Issues](/DP-3T/dp3t-sdk-backend/issues)
* [Pull requests](/DP-3T/dp3t-sdk-backend/pulls)
* [Actions](/DP-3T/dp3t-sdk-backend/actions)
* [Security](/DP-3T/dp3t-sdk-backend/security)
* [Insights](/DP-3T/dp3t-sdk-backend/pulse)

# Missing signature validation of JWT when alg=none

High

[UBaggeler](/UBaggeler)
published
GHSA-5m5q-3qw2-3xf3
Jul 30, 2020

## Package

maven

org.dpppt.backend.sdk.ws
([Maven](/advisories?query=ecosystem%3Amaven))

## Affected versions

< 1.1.1

## Patched versions

1.1.1

## Description

### Impact

When dp3t-sdk-backend is configured to check a JWT before uploading/publishing keys, it was possible to skip the signature check by providing a JWT token with `"alg":"none"`.

### Patches

The issue has been patched in version 1.1.1.

### References

* <https://nvd.nist.gov/vuln/detail/CVE-2020-15957>
* Pull-Request: [#208](https://github.com/DP-3T/dp3t-sdk-backend/pull/208)

### For more information

If you have any questions or comments about this advisory:

* Open an issue in [dp3t-sdk-backend](https://github.com/DP-3T/dp3t-sdk-backend)

### Severity

High

### CVE ID

CVE-2020-15957

### Weaknesses

No CWEs

### Credits

* [![@MrSuicideParrot](https://avatars.githubusercontent.com/u/22855486?s=40&v=4)](/MrSuicideParrot)
  [MrSuicideParrot](/MrSuicideParrot)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from avatars.githubusercontent.com_410533aa_20250119_131414.html ===
�PNG

   
IHDR   (   (   �/:  
iIDATx�lxY�dGV�X�{VVfU������i����e{l�/ �4^��|� !Ј?� ���6��`��{)���ʮ�̬\n�5nl(nU� �'Sʎ�{oD�8�\:��0#3�1a!ХB!�02�"d � �2a��\_d��vH � ao'c��7�Ҩz��3B����x.bά��@F竨̒N�#�!�;�C��H��������(���ͣqb4 ��6lC�"�g�G�wn�g2;������uڭ��
��n��5f�C0��{��U����HM��I��,@)��5@8�����o�6����y0���¹���ɷ1�7�����kk�����Ym�0<�9��~3եЄ ��4Y-��z��1F"C )x����۷n���f�v�>ڛ,�K��U���R��������y�9��èB��c�f��Mۂ�Zk�1��"C�1`0`��������E��Hu�1D�(��f���?���7~��.���Ps�8�ߗo���B)�9��<^-��:�M+�>����~'��9J�<���R��� !ƈ���'��h����7��x ��T���VJW��GCe���:KV����6�+�h��/�a�&�Z��N\=389�b��P�1ǡ���^��uֳ����,�G��\_��B�ج�����>A�1��
�4����\_݊�L �P��{��8wr��h�l�;�S{@6�Rē}�Dgxz6w��ۧ��>GC��ã�ƞ�SL���T�<��(�(%H �`���@jg���| �4)�qT�`�g��%��r.�8�9.���ђh���������8l4;�����8I(�B���[�8Xʣ��C�(�KW�Lƣ��ɳ�q-���TC =�2�2Bl���
��)�RȲL�3��!~��hg�B�[:ie0�Uy!�l�6�s��b&�!D�ô-e�ʍ�WI>[&��S�#�C��
�8�-���ъ����o������`� (`���f[T�\_`� J�� � ���@JI��\ !eͥFk�y�L�xe�<�}��5�]�����V��1��c���l����ц�VyY`��1z��E\_����ڛ}���
s\����pe��)Æ��Dh���4���繴^F��k� ����Z��8�~2���`�֛� \Σ͍������Ri ���2>�W� ; �Jz���l�9��ã�'��\_�썓�%���>d��g�y\*�\�.���2Ϻ�Ώ��gnP������Ov)ev�FX��2�RK�� %�G�Fo~��1J])�Az�E�a�F�yz�����-�RhʨG)&lc}��E����c�<��Uk���Z<��Ó�~�1���+��Z+\�9�W.%�Уb�Z!�ѨGQd��&���
k?y���ݜ.Vg��1�aA�K^J-�.��0 �����+QNܽ����;�ّY���2;�\*��EX�0!C}? �4�!D�p��gr��Ҕ��&B.Ҥ����y�y�I擽C����/�D��Y��~�0xE�[�Ξ4��^|���#��Q5���G����1vgc�\_.F\* ��N�J�5k�hg��<Ί�v�m'\_%6h1;�\r
~yU>-��Gg;w�~�������~���m� s �Z�ž��mwӰ^ws=��z��n2�r�2<��,F ~���K����S2���s�N����k>x��t`!i�}���P��(�v�Sq8\_����ϋ<j��ށ�B,�P���x����2��[4J����=ٟ0�ם�DP4���N��MD�V˗��K�r��gB��I(�Z�8L���]-�3g������DZ=�!d�aw�Js��-
�s�+/����j��
�q��n�$�N��Bg��qd�TjY�/UX#�u�PJh��.J��R���8�?��&��ƅ��l��e��0�l�N��NPF��R� ��8],6B�R�ˢ�[��+�A�1�\gkk����N�C�}�7�,�v#���h�R����^6O�?������n��]����~�K�慔9��(��YdQ��Π<��d��Be^����\_f�j�ڵ��� ��s��e�$M/Q���Cm�'��ٵ����~���qa�����$�F���y^�~xac͒�Ku)����4O^�=V��ݝ�O�N?���z|p��(h�'�,���g{t����ڡ����pi�X�폁��=�CRHx��SqR��9X�9B B���\h�1ϧ�ft��%��81�I\_)�͖���f���f��K�z�;��y��^6��ɻo����������;�w?�����hE��ݚ����(�u�K����B����U�l�����ruo46@���cE���{��ϔ:3h������`2[%I�nݾ��'��W�t���\?zV��n~����t"�\+�rQ(:h�Y�]�����PZ�P&y�J�U�O�4�
/l��ƻAs}x���髅Ȑ���F�UZ��,�̋b�^�Z�»�lw�\L����ɞ%���
��¬�2�c$�<�#�Ug�U�q�Q�eJ�I�]���ɳ���]��W^�l�����h��V�i0�pI^d�T�;���19q��U4�W�������דE����K�h��Tc'6���v#���֘Ӽ(���q���UG�����k��p����0�N]޺p�r�%u�Y���Z都Y�#ȴNҺX+B A�`"Z��.#5h1Qh����f�kn��-�/EP��Fϴ\*�RE�-�������^Qqa�{�7�䧿��V�jp��keE�ct�S�q��1������?+��ؼ����������e��t<ʳ��]�Ə�|�+�/fq�eI0b�Lj�z�?�|配�������/=���^;�6�C\*|s爼x��%�a���~�ZR�l����/���\ñe9u��z��U��YΧicH%ă0j��`���k���{�g��>i���P[Ѫ-RZ���RH�"[YKI�� �4]�{�.n��XIQ9"bm���h͔y�!�Y� ^V�A\*i��2Z.�,%�{��wo~��t�ZKk� p%�0��1F�aB�7H�B�2��i:ki�˫/B0Q�DY�nQe�s1F�YZ��fg}x���7\_�V�\_�lˆvr�X�B�R���LH�:��u��T�[���}eղm+Xss�T}�-���i�jm�]�'���Z=��I��o�Q�\*�WLKS�q�i���7V=v�itT�DJ�1��(��s�K׮�TW�W����Q������e��@�.�^A�.���y��8F+c�6ںdk%aNop�  ����4����    IEND�B`�

=== Content from github.com_84f73479_20250119_131411.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FDP-3T%2Fdp3t-sdk-backend%2Fpull%2F208)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FDP-3T%2Fdp3t-sdk-backend%2Fpull%2F208)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=DP-3T%2Fdp3t-sdk-backend)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[DP-3T](/DP-3T)
/
**[dp3t-sdk-backend](/DP-3T/dp3t-sdk-backend)**
Public

* [Notifications](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend) You must be signed in to change notification settings
* [Fork
  86](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)
* [Star
   199](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)

* [Code](/DP-3T/dp3t-sdk-backend)
* [Issues
  14](/DP-3T/dp3t-sdk-backend/issues)
* [Pull requests
  8](/DP-3T/dp3t-sdk-backend/pulls)
* [Actions](/DP-3T/dp3t-sdk-backend/actions)
* [Security](/DP-3T/dp3t-sdk-backend/security)
* [Insights](/DP-3T/dp3t-sdk-backend/pulse)

Additional navigation options

* [Code](/DP-3T/dp3t-sdk-backend)
* [Issues](/DP-3T/dp3t-sdk-backend/issues)
* [Pull requests](/DP-3T/dp3t-sdk-backend/pulls)
* [Actions](/DP-3T/dp3t-sdk-backend/actions)
* [Security](/DP-3T/dp3t-sdk-backend/security)
* [Insights](/DP-3T/dp3t-sdk-backend/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FDP-3T%2Fdp3t-sdk-backend%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Hotfix/v1.1.1 (CVE-2020-15957) #208

 Merged

[ubamrein](/ubamrein)
merged 2 commits into
[master](/DP-3T/dp3t-sdk-backend/tree/master "DP-3T/dp3t-sdk-backend:master")
from
[hotfix/v1.1.1](/DP-3T/dp3t-sdk-backend/tree/hotfix/v1.1.1 "DP-3T/dp3t-sdk-backend:hotfix/v1.1.1")

Jul 30, 2020

 Merged

# [Hotfix/v1.1.1 (CVE-2020-15957)](#top) #208

[ubamrein](/ubamrein)
merged 2 commits into
[master](/DP-3T/dp3t-sdk-backend/tree/master "DP-3T/dp3t-sdk-backend:master")
from
[hotfix/v1.1.1](/DP-3T/dp3t-sdk-backend/tree/hotfix/v1.1.1 "DP-3T/dp3t-sdk-backend:hotfix/v1.1.1")

Jul 30, 2020

[Conversation
0](/DP-3T/dp3t-sdk-backend/pull/208)
[Commits
2](/DP-3T/dp3t-sdk-backend/pull/208/commits)
[Checks
0](/DP-3T/dp3t-sdk-backend/pull/208/checks)
[Files changed](/DP-3T/dp3t-sdk-backend/pull/208/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![ubamrein](https://avatars.githubusercontent.com/u/47777208?s=60&v=4)](/ubamrein)

Copy link

Contributor

### @ubamrein **[ubamrein](/ubamrein)** commented [Jul 30, 2020](#issue-668466499)

When dp3t-sdk-backend is configured to check a JWT before uploading/publishing keys, it was possible to skip the signature check by providing a JWT token with `"alg":"none"`.

This addresses CVE-2020-15957 (thanks to [@MrSuicideParrot](https://github.com/MrSuicideParrot))

Sorry, something went wrong.

All reactions

 [ubamrein](/ubamrein)
added 2 commits
[July 30, 2020 09:35](#commits-pushed-e967592)

[![@ubamrein](https://avatars.githubusercontent.com/u/47777208?s=40&v=4)](/ubamrein)

`[require JWT with alg != none](/DP-3T/dp3t-sdk-backend/pull/208/commits/e967592bf131442b9d9916aefac2f4e42eaddd32 "require JWT with alg != none

This prevents publishing keys with a JWT with alg=none and no signature.
This addresses CVE-2020-15957")`
 …

`[e967592](/DP-3T/dp3t-sdk-backend/pull/208/commits/e967592bf131442b9d9916aefac2f4e42eaddd32)`

```
This prevents publishing keys with a JWT with alg=none and no signature.
This addresses CVE-2020-15957
```

[![@ubamrein](https://avatars.githubusercontent.com/u/47777208?s=40&v=4)](/ubamrein)

`[add unit test to check for unsinged JWTs](/DP-3T/dp3t-sdk-backend/pull/208/commits/b5d3b2f4a52d2628fd235c3a92f82cf670ad7085 "add unit test to check for unsinged JWTs")`

`[b5d3b2f](/DP-3T/dp3t-sdk-backend/pull/208/commits/b5d3b2f4a52d2628fd235c3a92f82cf670ad7085)`

 [![@ubamrein](https://avatars.githubusercontent.com/u/47777208?s=40&u=a4bb8731c61a612e8d6c4bad98ba54fb63ae8a90&v=4)](/ubamrein)
[ubamrein](/ubamrein)
requested review from
[UBaggeler](/UBaggeler) and
[martinalig](/martinalig)
[July 30, 2020 08:02](#event-3602569201)

[![UBaggeler](https://avatars.githubusercontent.com/u/35527968?s=60&v=4)](/UBaggeler)

**[UBaggeler](/UBaggeler)**
approved these changes
[Jul 30, 2020](#pullrequestreview-458171962)

 [View reviewed changes](/DP-3T/dp3t-sdk-backend/pull/208/files/b5d3b2f4a52d2628fd235c3a92f82cf670ad7085)

[![@ubamrein](https://avatars.githubusercontent.com/u/47777208?s=40&u=a4bb8731c61a612e8d6c4bad98ba54fb63ae8a90&v=4)](/ubamrein)
[ubamrein](/ubamrein)
merged commit [`b8c6476`](/DP-3T/dp3t-sdk-backend/commit/b8c6476303097b195f084587d0854997146c79f4)
into
master

[Jul 30, 2020](https://github.com/DP-3T/dp3t-sdk-backend/pull/208#event-3602593140)

 [![@ubamrein](https://avatars.githubusercontent.com/u/47777208?s=40&u=a4bb8731c61a612e8d6c4bad98ba54fb63ae8a90&v=4)](/ubamrein)
[ubamrein](/ubamrein)
deleted the
hotfix/v1.1.1

branch
[July 30, 2020 08:08](#event-3602593227)

[iCesofT](/iCesofT)
pushed a commit
to RadarCOVID/radar-covid-backend-dp3t-server
that referenced
this pull request
[Sep 20, 2020](#ref-commit-b7c3b6c)

`[fix: If JWT "alg" is "none", skip signature](/RadarCOVID/radar-covid-backend-dp3t-server/commit/b7c3b6c687f7c965e9b6b6059e2eb53ad490aafc "fix: If JWT \"alg\" is \"none\", skip signature

Related to https://github.com/DP-3T/dp3t-sdk-backend/pull/208
It was not a real issue due to RadarCovid JWT token generation")`
…

`[b7c3b6c](/RadarCOVID/radar-covid-backend-dp3t-server/commit/b7c3b6c687f7c965e9b6b6059e2eb53ad490aafc)`

```
Related to [DP-3T/dp3t-sdk-backend#208](https://github.com/DP-3T/dp3t-sdk-backend/pull/208)
It was not a real issue due to RadarCovid JWT token generation
```

[![@Marcono1234](https://avatars.githubusercontent.com/u/11685886?s=40&v=4)](/Marcono1234)
[Marcono1234](/Marcono1234)
mentioned this pull request
[Apr 11, 2021](#ref-pullrequest-855429089)

[Rename parsing methods with misleading names
jwtk/jjwt#658](/jwtk/jjwt/pull/658)
 Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FDP-3T%2Fdp3t-sdk-backend%2Fpull%2F208)

Reviewers

[![@UBaggeler](https://avatars.githubusercontent.com/u/35527968?s=40&v=4)](/UBaggeler) [UBaggeler](/UBaggeler)

UBaggeler approved these changes

[![@martinalig](https://avatars.githubusercontent.com/u/1650738?s=40&v=4)](/martinalig) [martinalig](/martinalig)

 Awaiting requested review from martinalig

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@ubamrein](https://avatars.githubusercontent.com/u/47777208?s=52&v=4)](/ubamrein) [![@UBaggeler](https://avatars.githubusercontent.com/u/35527968?s=52&v=4)](/UBaggeler)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_74e57357_20250119_112029.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FDP-3T%2Fdp3t-sdk-backend%2Fcompare%2Fv1.0.4...v1.1.0)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FDP-3T%2Fdp3t-sdk-backend%2Fcompare%2Fv1.0.4...v1.1.0)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fcompare%2Fshow&source=header-repo&source_repo=DP-3T%2Fdp3t-sdk-backend)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[DP-3T](/DP-3T)
/
**[dp3t-sdk-backend](/DP-3T/dp3t-sdk-backend)**
Public

* [Notifications](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend) You must be signed in to change notification settings
* [Fork
  86](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)
* [Star
   199](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)

* [Code](/DP-3T/dp3t-sdk-backend)
* [Issues
  14](/DP-3T/dp3t-sdk-backend/issues)
* [Pull requests
  8](/DP-3T/dp3t-sdk-backend/pulls)
* [Actions](/DP-3T/dp3t-sdk-backend/actions)
* [Security](/DP-3T/dp3t-sdk-backend/security)
* [Insights](/DP-3T/dp3t-sdk-backend/pulse)

Additional navigation options

* [Code](/DP-3T/dp3t-sdk-backend)
* [Issues](/DP-3T/dp3t-sdk-backend/issues)
* [Pull requests](/DP-3T/dp3t-sdk-backend/pulls)
* [Actions](/DP-3T/dp3t-sdk-backend/actions)
* [Security](/DP-3T/dp3t-sdk-backend/security)
* [Insights](/DP-3T/dp3t-sdk-backend/pulse)

[Permalink](https://github.com/DP-3T/dp3t-sdk-backend/compare/DP-3T%3Ae9b7670...DP-3T%3A925bc21)
# Comparing changes

 Choose two branches to see what’s changed or to start a new pull request.
If you need to, you can also  compare across forks
 or
[learn more about diff comparisons](https://docs.github.com/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-comparing-branches-in-pull-requests#three-dot-and-two-dot-git-diff-comparisons).

# Open a pull request

 Create a new pull request by comparing changes across two branches. If you need to, you can also  compare across forks
.
[Learn more about diff comparisons here](https://docs.github.com/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-comparing-branches-in-pull-requests#three-dot-and-two-dot-git-diff-comparisons).

*base repository:*
DP-3T/dp3t-sdk-backend

Failed to load repositories. Confirm that selected base ref is valid, then try again.

 Loading

*base:*
v1.0.4

Choose a base ref

Branches
Tags

Could not load branches

Nothing to show

 Loading

[{{ refName }}
default](/DP-3T/dp3t-sdk-backend/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v1.1.0)

Could not load tags

Nothing to show

[{{ refName }}
default](/DP-3T/dp3t-sdk-backend/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v1.1.0)

 Loading

...

*head repository:*
DP-3T/dp3t-sdk-backend

Failed to load repositories. Confirm that selected head ref is valid, then try again.

 Loading

*compare:*
v1.1.0

Choose a head ref

Branches
Tags

Could not load branches

Nothing to show

 Loading

[{{ refName }}
default](/DP-3T/dp3t-sdk-backend/compare/v1.0.4...%7B%7B%20urlEncodedRefName%20%7D%7D)

Could not load tags

Nothing to show

[{{ refName }}
default](/DP-3T/dp3t-sdk-backend/compare/v1.0.4...%7B%7B%20urlEncodedRefName%20%7D%7D)

 Loading

8
contributors

[Commits
81](#commits_bucket)
[Files changed
41](#files_bucket)

 Loading

 Loading

### This comparison is taking too long to generate.

Unfortunately it looks like we can’t render this comparison for you right now. It might be too big, or there might be something weird with your repository.

You can try running this command locally to see the comparison on your machine:

`git diff v1.0.4...v1.1.0`

  Retry

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_296f50db_20250119_112030.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdp-3T%2Fdp3t-sdk-backend)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdp-3T%2Fdp3t-sdk-backend)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=DP-3T%2Fdp3t-sdk-backend)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[DP-3T](/DP-3T)
/
**[dp3t-sdk-backend](/DP-3T/dp3t-sdk-backend)**
Public

* [Notifications](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend) You must be signed in to change notification settings
* [Fork
  86](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)
* [Star
   199](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)

The backend implementation for DP3T

### License

[MPL-2.0 license](/DP-3T/dp3t-sdk-backend/blob/develop/LICENSE)

[199
stars](/DP-3T/dp3t-sdk-backend/stargazers) [86
forks](/DP-3T/dp3t-sdk-backend/forks) [Branches](/DP-3T/dp3t-sdk-backend/branches) [Tags](/DP-3T/dp3t-sdk-backend/tags) [Activity](/DP-3T/dp3t-sdk-backend/activity)
 [Star](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend)

 [Notifications](/login?return_to=%2FDP-3T%2Fdp3t-sdk-backend) You must be signed in to change notification settings

* [Code](/DP-3T/dp3t-sdk-backend)
* [Issues
  14](/DP-3T/dp3t-sdk-backend/issues)
* [Pull requests
  8](/DP-3T/dp3t-sdk-backend/pulls)
* [Actions](/DP-3T/dp3t-sdk-backend/actions)
* [Security](/DP-3T/dp3t-sdk-backend/security)
* [Insights](/DP-3T/dp3t-sdk-backend/pulse)

Additional navigation options

* [Code](/DP-3T/dp3t-sdk-backend)
* [Issues](/DP-3T/dp3t-sdk-backend/issues)
* [Pull requests](/DP-3T/dp3t-sdk-backend/pulls)
* [Actions](/DP-3T/dp3t-sdk-backend/actions)
* [Security](/DP-3T/dp3t-sdk-backend/security)
* [Insights](/DP-3T/dp3t-sdk-backend/pulse)

# DP-3T/dp3t-sdk-backend

    develop[Branches](/DP-3T/dp3t-sdk-backend/branches)[Tags](/DP-3T/dp3t-sdk-backend/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[626 Commits](/DP-3T/dp3t-sdk-backend/commits/develop/) | | |
| [.github/workflows](/DP-3T/dp3t-sdk-backend/tree/develop/.github/workflows "This path skips through empty directories") | | [.github/workflows](/DP-3T/dp3t-sdk-backend/tree/develop/.github/workflows "This path skips through empty directories") |  |  |
| [docker-compose](/DP-3T/dp3t-sdk-backend/tree/develop/docker-compose "docker-compose") | | [docker-compose](/DP-3T/dp3t-sdk-backend/tree/develop/docker-compose "docker-compose") |  |  |
| [documentation](/DP-3T/dp3t-sdk-backend/tree/develop/documentation "documentation") | | [documentation](/DP-3T/dp3t-sdk-backend/tree/develop/documentation "documentation") |  |  |
| [dpppt-backend-sdk](/DP-3T/dp3t-sdk-backend/tree/develop/dpppt-backend-sdk "dpppt-backend-sdk") | | [dpppt-backend-sdk](/DP-3T/dp3t-sdk-backend/tree/develop/dpppt-backend-sdk "dpppt-backend-sdk") |  |  |
| [ws-sdk](/DP-3T/dp3t-sdk-backend/tree/develop/ws-sdk "ws-sdk") | | [ws-sdk](/DP-3T/dp3t-sdk-backend/tree/develop/ws-sdk "ws-sdk") |  |  |
| [.gitignore](/DP-3T/dp3t-sdk-backend/blob/develop/.gitignore ".gitignore") | | [.gitignore](/DP-3T/dp3t-sdk-backend/blob/develop/.gitignore ".gitignore") |  |  |
| [.pre-commit-config.yaml](/DP-3T/dp3t-sdk-backend/blob/develop/.pre-commit-config.yaml ".pre-commit-config.yaml") | | [.pre-commit-config.yaml](/DP-3T/dp3t-sdk-backend/blob/develop/.pre-commit-config.yaml ".pre-commit-config.yaml") |  |  |
| [CONTRIBUTING.md](/DP-3T/dp3t-sdk-backend/blob/develop/CONTRIBUTING.md "CONTRIBUTING.md") | | [CONTRIBUTING.md](/DP-3T/dp3t-sdk-backend/blob/develop/CONTRIBUTING.md "CONTRIBUTING.md") |  |  |
| [GenerateKeyPair.java](/DP-3T/dp3t-sdk-backend/blob/develop/GenerateKeyPair.java "GenerateKeyPair.java") | | [GenerateKeyPair.java](/DP-3T/dp3t-sdk-backend/blob/develop/GenerateKeyPair.java "GenerateKeyPair.java") |  |  |
| [GenerateKeyPairEC.java](/DP-3T/dp3t-sdk-backend/blob/develop/GenerateKeyPairEC.java "GenerateKeyPairEC.java") | | [GenerateKeyPairEC.java](/DP-3T/dp3t-sdk-backend/blob/develop/GenerateKeyPairEC.java "GenerateKeyPairEC.java") |  |  |
| [LICENSE](/DP-3T/dp3t-sdk-backend/blob/develop/LICENSE "LICENSE") | | [LICENSE](/DP-3T/dp3t-sdk-backend/blob/develop/LICENSE "LICENSE") |  |  |
| [Makefile](/DP-3T/dp3t-sdk-backend/blob/develop/Makefile "Makefile") | | [Makefile](/DP-3T/dp3t-sdk-backend/blob/develop/Makefile "Makefile") |  |  |
| [README.md](/DP-3T/dp3t-sdk-backend/blob/develop/README.md "README.md") | | [README.md](/DP-3T/dp3t-sdk-backend/blob/develop/README.md "README.md") |  |  |
| [SECURITY.md](/DP-3T/dp3t-sdk-backend/blob/develop/SECURITY.md "SECURITY.md") | | [SECURITY.md](/DP-3T/dp3t-sdk-backend/blob/develop/SECURITY.md "SECURITY.md") |  |  |
| [configure.sh](/DP-3T/dp3t-sdk-backend/blob/develop/configure.sh "configure.sh") | | [configure.sh](/DP-3T/dp3t-sdk-backend/blob/develop/configure.sh "configure.sh") |  |  |
| View all files | | |

## Repository files navigation

* README
* MPL-2.0 license
* Security
# DP3T-Backend-SDK

[![License: MPL 2.0](https://camo.githubusercontent.com/aedad2e2e01b9abdf131b2590d74f45ca3b799cd8ed34bbaed2d2ce41e333dd7/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d504c253230322e302d627269676874677265656e2e737667)](https://camo.githubusercontent.com/aedad2e2e01b9abdf131b2590d74f45ca3b799cd8ed34bbaed2d2ce41e333dd7/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d504c253230322e302d627269676874677265656e2e737667)
[![Java CI with Maven](https://github.com/DP-3T/dp3t-sdk-backend/workflows/Java%20CI%20with%20Maven/badge.svg?branch=master)](https://github.com/DP-3T/dp3t-sdk-backend/workflows/Java%20CI%20with%20Maven/badge.svg?branch=master)
[![Quality Gate Status](https://camo.githubusercontent.com/5fc16c711d1f4b5247159d221fedeef4a826a27335943df8e33e784cdcee6122/68747470733a2f2f736f6e6172636c6f75642e696f2f6170692f70726f6a6563745f6261646765732f6d6561737572653f70726f6a6563743d44502d33545f647033742d73646b2d6261636b656e64266d65747269633d616c6572745f737461747573)](https://sonarcloud.io/dashboard?id=DP-3T_dp3t-sdk-backend)
[![Coverage](https://camo.githubusercontent.com/63793e4ca83f6a496a93548bd463554ff95fdaa8f4ddd08bf7c19d2c1cc6f267/68747470733a2f2f736f6e6172636c6f75642e696f2f6170692f70726f6a6563745f6261646765732f6d6561737572653f70726f6a6563743d44502d33545f647033742d73646b2d6261636b656e64266d65747269633d636f766572616765)](https://sonarcloud.io/dashboard?id=DP-3T_dp3t-sdk-backend)

## License

This project is licensed under the terms of the MPL 2 license. See the [LICENSE](/DP-3T/dp3t-sdk-backend/blob/develop/LICENSE) file.

## Repositories

* Android SDK & Calibration app: [dp3t-sdk-android](https://github.com/DP-3T/dp3t-sdk-android)
* iOS SDK & Calibration app: [dp3t-sdk-ios](https://github.com/DP-3T/dp3t-sdk-ios)
* Backend SDK: [dp3t-sdk-backend](https://github.com/DP-3T/dp3t-sdk-backend)

For an example project using the SDK look at the Swiss contact tracing app [SwissCovid](https://github.com/SwissCovid).

## DP3T

The Decentralised Privacy-Preserving Proximity Tracing (DP3T) project is an open protocol for COVID-19 proximity tracing using Bluetooth Low Energy functionality on mobile devices, which ensures that personal data and computation stay entirely on an individual's phone. It was produced by a core team of over 25 scientists and academic researchers from across Europe. It has also been scrutinized and improved by the wider community.

DP3T is a free-standing effort, begun at the EPFL and ETHZ, where the protocol was produced and where the implementation into an open-sourced app and server is taking place.

## Contribution Guide

Please read the [Contribution Guide](/DP-3T/dp3t-sdk-backend/blob/develop/CONTRIBUTING.md) before submitting any pull-request.

## Introduction

This documentation describes the backend used for the SwissCovid application. It is focused on providing information for the requests used for the Exposure Notification framework. Although, code of the old format is still provided, no documentation or support is available except the code itself.

## Federation Gateway Service

### Introduction

Since multiple countries are now using the Exposure Notifications Framework, the European Union started an effort to allow federation of keys coming from multiple countries. Every country connected to the gateway can then up- and download keys from all participating countries (relayed via the gateway). This means that people e.g. using the Swiss app in Germany can, if they decide to share their keys with Germany, infect people using the German app and vice versa.

For this another module was added, which periodically synchronizes keys, which are marked for sharing to a gateway service. The official European Federation Gateway Service (EFGS) can be found [here](https://github.com/eu-federation-gateway-service/efgs-federation-gateway). The [Swiss fork](https://github.com/admin-ch/chgs-federation-gateway) adds Postgres-Support as well as some other minor features.

Further information on the Interoperability Module can be found in the [dpppt-backend-sdk-interops module](/DP-3T/dp3t-sdk-backend/blob/develop/dpppt-backend-sdk/dpppt-backend-sdk-interops/README.md)

## Reproducible Builds

In order to have reproducible builds the [io.github.zlika](https://github.com/zlika/reproducible-build-maven-plugin) maven plugin is used. It replaces all timestamp with the timestamp of the last commit, and orders the entries in the JAR alphabetically. The github action then computes the sha256sum of the resulting JAR and adds the output as an build artifact.

## Dependencies

* Spring Boot 2.4.5
* Java 11 (or higher)
* Logback
* [Springboot-Swagger-3](https://github.com/Ubique-OSS/springboot-swagger3) (From Bintray)

### Database

For development purposes an hsqldb can be used to run the web service locally. For production systems, it is recommended to connect to a PostgreSQL database (cluster if possible).

#### Keys

The keys that are stored in the database contain the `GAEN` key data as specified by Google/Apple, as well as some more fields to indicate the origin of the keys, and if the keys should be shared with a federation gateway. For the federation gateway a further field `batch_tag` is needed to indicate the batch this key has been uploaded with.

[![](/DP-3T/dp3t-sdk-backend/raw/develop/documentation/img/t_gaen_exposed.png)](/DP-3T/dp3t-sdk-backend/blob/develop/documentation/img/t_gaen_exposed.png)

| Column | Description |
| --- | --- |
| pk\_exposed\_id | Primary key, autogenerated |
| key | The tek, as Base64 HEX string |
| rolling\_start\_number | Tek rolling start number, 10-minute interval since UTC epoch |
| rolling\_period | Tek rolling period, number of 10-minute intervals that a key is valid for |
| received\_at | Rounded timestamp the tek was received, |
| report\_type | The `reportType` indicating how the person uploading the key was "verified" (e.g. confirmed test) |
| days\_since\_onset\_of\_symptoms | c.f. [Interops documentation](/DP-3T/dp3t-sdk-backend/blob/develop/dpppt-backend-sdk/dpppt-backend-sdk-interops/README.md) |
| origin | String where this key was retrieved from [ISO-3166-1-Alpha-2](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes) |
| batch\_tag | If uploaded to EFGS, indicates the `batchTag` of the batch this key was uploaded with |
| share\_with\_federation\_gateway | Indicate if this key should be shared with the federation gateway |

#### JWT

This schema contains the `uuid` field to be stored temporarily. This is used to prevent replay attacks of the same token twice and the entry will be removed, after the validity of the token has been expired.

[![](/DP-3T/dp3t-sdk-backend/raw/develop/documentation/img/t_redeem_uuid.png)](/DP-3T/dp3t-sdk-backend/blob/develop/documentation/img/t_redeem_uuid.png)

| Column | Description |
| --- | --- |
| pk\_redeem\_uuid\_id | Primary key, autogenerated |
| uuid | UUID from JWD token |
| received\_at | Rounded timestamp the token was received |

#### Federation

To allow a monitoring of uploads to a federation gateway, this table holds log entries indicating different actions and error messages.

[![](/DP-3T/dp3t-sdk-backend/raw/develop/documentation/img/t_federation_sync_log.png)](/DP-3T/dp3t-sdk-backend/blob/develop/documentation/img/t_federation_sync_log.png)

| Column | Description |
| --- | --- |
| pk\_federation\_sync\_log\_id |  |
| gateway | Which gateway the log originated from |
| action | The action associated with the entry (UPLOAD |
| batch\_tag | The `batchTag` associated with the batch the message was generated for |
| upload\_date | The date the batch was uploaded (the parameter given for the API call to the gateway) |
| start\_time | When the action started. (`end - start = duration`) |
| end\_time | When the action ended. (`end - start = duration`) |
| state | If the action was successful (ERROR |

## Environments

To control different behaviors, SpringBoot profiles are used. The idea is to provide an abstract base class, which defines everything needed. Such properties can be defined as abstract, and their implementation can be provided in an extended class.

#### WSCloud\*Config/WSProdConfig/WSDevConfig

Currently three non-abstract configs (`dev`, `test`, `abn` and `prod`) are provided, which are used in the current deployed version of the backend. Those are the CloudConfigs and they are optimized to work with an environment using KeyCloak and CloudFoundry.

Furthermore, two non-abstract configs (`dev`, `prod`) are provided, which implement a basic configuration, and which should work out-of-the-box. It generates new key pairs, used to sign the payload, each time the web service is started. For an example on how to persist the keys across startup, have a look at the cloud configs.

> Note that the `dev` config uses a HSQLDB, which is non-persistent, whereas `prod` needs a running instance of PostgreSQL (either in a docker or native).

If you plan to provide new extensions or make adjustments and want to provide those to the general public, it is recommended to add a new configuration for your specific case. This can be e.g. an abstract class (e.g. WSCloudBaseConfig), which extends the base class providing certain needed keys or functions. If you provide an abstract class, please make sure to add at least one non-abstract class showing the implementation needed.

#### WSJWTConfig

There is also a possible extension to the base web service provided. The JWT config is intended to implement a possibility to authorize the post requests used to publish the secret keys from the clients. JWTs, which are signed by a health authority, are used. An interface is provided, which can be used to define the behavior of authorization (c.f. the `ValidateRequest` class and its implementation in `NoValidateRequest` and `JWTValidator`).

## Fake Requests

Since a client has to send its keys to the backend, it would be possible to filter traffic based on post requests to the backend, in order to find out, which IP addresses are "infected". To minimize such a risk clients will send a fake request, where the time delay is based on a Poisson distribution.

### Time Delay

In order to minimize the risk of timing attacks, to find out whether a request was fake or not, a time-delay of 1.5s is introduced for the `POST` request.

### Constant Payload

Clients pad the number of keys with fake keys, if not enough keys are provided by the framework (e.g. the app is installed for less than 14 days). On fake keys the web-service should not validate any dates. The key payload though needs to be the exact same size!

## GAEN/DP3T

We started with the project before Google and Apple announced the Exposure Notifications. For some time we supported both the old DP3T protocol and the new GAEN protocol, which is based on DP3T. Now that GAEN has become available on most of the versions, we removed DP3T support in the backend to lower the attack surface and make development easier.

### Legacy Notifications

Since the Exposure Notifications format has been adopted, we drop support for legacy notifications. Currently no feature-requests are implemented for the old format, but if a PR is provided, it can still be merged.

By default, the legacy controller (`DPPPTController`) uses the base url `/v1/`.

### Exposure Notifications

Here an implementation for the [Exposure Notification](https://www.google.com/covid19/exposurenotifications/) Library by Google and Apple is provided.

By default, the EN controller (`GaenController`) uses the base url `/v1/gaen/`.

The web-service provides three endpoints, which map the Exposure Notification specifications.

* /v1/gaen/exposed: `POST` Send a list of infected keys. If a JWT is used to authorize the request, send a JWT back to authorize the call of the following day. If the request as a whole is a "fake"-request, meaning the JWT has the "fake" claim set to "1", no keys are inserted.
* /v1/gaen/exposednextday: `POST` Since the EN framework won't give the key of the current day, the upload has to be split into two. This endpoint receives the key of the last day. This endpoint eventually will be removed, as soon as the EN framework is adjusted. If JWT are activated, this endpoint needs the JWT received from a successfull request to `/v1/gaen/exposed`.
* /v1/gaen/exposed/<timestamp>?publishedafter=<publishedAfter>: `GET` Returns a list of keys, which were used at `timestamp`. Note that `timestamp` needs to be epoch milliseconds. Since the behaviour of Android and iOS aren't the same, the optional `publishedAfter` parameter is added. If set only keys, which were received *after* `publishAfter` are returned. This request returns `ZIP` file containing `export.bin` and `export.sig`, where the keys and the signature are stored, as need by the EN framework. The class for signing and serializing is `ProtoSignature`.

Further endpoints are added to the controller for debugging purposes. Those requests can e.g. be blocked by a WAF rule or similar.

## JWT Validation

In order to prevent replay attacks, a JWT is only valid once. After one usage the "jit" claim is stored temporarily (longer than the validity).
The JWTs are validated based on the following criteria:

* JWT needs an expiresAt claim which is valid
* The expiresAt claim should not be longer than the set value in the config
* The JWT needs a "jit" claim and the said "jit" should not have been used

## Content Signing

In order to provide authenticity, the HttpPayload is signed. The signature is added as a `Signature` HttpHeader to each 200 or 204 response. The signature consists of a JWT containing the content hash as a claim. Further, if `protected-headers` are added in the controller (and activated through the respective key in the properties file), those headers are signed as well, thus providing the possibility of signing certain request parameters.

## Swagger

We use [Springboot-Swagger-3](https://github.com/Ubique-OSS/springboot-swagger3) to generate a `YAML` based on settings and controllers found in the project. We include a up-to-date version in each release. Currently they are lacking the documentation, but should provide enough information to use them in [Swagger Editor](https://editor.swagger.io).

## Key Handling

There are multiple ways of generating and using key pairs. In the cloud configs, the public key is read from a certificate provided via SpringBoot value injection. The private key is a PKCS8-PEM encoded private key. In the default configs, the key pairs are generated via helper functions from the JWT-library used.

There are two files, `GenerateKeyPair.java` (outputs directly the keys) and `GenerateKeyPairEC.java` (preferred way of generating key pairs, uses PEM format) to give an idea on how to generate them by yourselves.

Depending on the key-size and the algorithm and/or if you are using the `PemReader`, you may need to add [BouncyCastle](https://www.bouncycastle.org/) (c.f. [Export/Import regulations](https://crypto.stackexchange.com/questions/20524/why-are-there-limitations-on-using-encryption-with-keys-beyond-certain-length)).

> Note that the `KeyFactory` class provides a `getInstance(String algorithm, String provider)` overload as well (e.g. you need larger key sizes provided by `BouncyCastle`). You can essentially exchange `EC` and `RSA` whenever you like. For production use, please make sure that you double check the key specifications. The two files provided just use the default parameters, which may or may not be sufficient for your use case.

To load the keys you can use the `KeyVault` class. The class works by registering functions, which implement a possible decoding from a `String` to a `KeyPair` (respectively `PrivateKey` or `PublicKey`). To register a new provider, the static functions `registerNewPublicEncodingProvider` and `registerNewPrivateEncodingProvider` can be used. Have a look at the `KeyVault` class to see examples of decoding providers.

There are two possible ways of using the class. The recommended way is, to load it as a `Bean` and define all the `KeyPairs` used. The `KeyVault` is `@Autowired` into the `BaseConfiguration` and hence needs a instance, provided by one of the concrete configurations. Here is an example from the `DevConfig`:

```
var gaen = new KeyVault.KeyVaultEntry("gaen", getPrivateKey(), getPublicKey(), "EC");
var nextDayJWT = new KeyVault.KeyVaultEntry("nextDayJWT", getPrivateKey(), getPublicKey(), "EC");
var hashFilter = new KeyVault.KeyVaultEntry("hashFilter", getPrivateKey(), getPublicKey(), "EC");

try {
  return new KeyVault(gaen, nextDayJWT, hashFilter);
} catch (PrivateKeyNoSuitableEncodingFoundException | PublicKeyNoSuitableEncodingFoundException e) {
  throw new RuntimeException(e);
}
```

The constructor inserts the `KeyPairs` into a hash map, from which you can get the entries.

One does not need to use the constructor though, since the static functions `loadPrivateKey` and `loadPublicKey` can be used directly as well. It can be convenient, if one does not need to provide a `KeyPair` as, for example when only the `PublicKey` is provided, to verify signatures. The following code shows how to load a `PublicKey`.

```
KeyVault.loadPublicKey(loadPublicKey(), "RSA")
```

In any case the `loadPrivateKey` and `loadPublicKey` functions will iterate through all providers until one succeeds, or else an exception is thrown. The following providers are registered, when the class is instantiated (via `@Bean` for example):

#### PrivateKey

* `loadPrivateKeyFromJavaEncoding`: Loads a private key from a Base64 encoded version of the output of `PrivateKey.getEncoded()`.
* `loadPrivateKeyFromPem`: Loads the private key from the contents of a PEM file.

#### PublicKey

* `loadPublicKeyFromJavaEncoding`: Loads a public key from a Base64 encoded version of the output of `PublicKey.getEncoded()`.
* `loadPublicKeyFromPem`: Loads the public key from the contents of a PEM file.
* `loadPublicKeyFromX509Certificate`: Loads the public key from a certificate.

## Build

To build you need to install Maven.

```
cd dpppt-backend-sdk
mvn install
```
> Note to run the PostgreSQL unit tests, `dockerd` is needed. If you want to skip those tests add `-DskipTests` to the build command.

## Run

```
java -jar dpppt-backend-sdk-ws/target/dpppt-backend-sdk-ws-*.jar
```

## Dockerfiles

The Dockerfile includes a base JDK image to run the jar. To actually build the docker container, you need to place the generated jar in the bin folder.

```
cp dpppt-sdk-backend/dpppt-backend-sdk-ws/target/dpppt-backend-sdk-ws-1.0.0-SNAPSHOT.jar ws-sdk/ws/bin/dpppt-backend-sdk-ws-1.0.0
```

```
cd ws-sdk && docker build -t <the-tag-we-use> .
```

```
docker run -p 80:8080 -v <path_to_logbackxml>:/home/ws/conf/dpppt-backend-sdk-ws-logback.xml -v <path_to_application_properties>:/home/ws/conf/dpppt-backend-sdk-ws.properties <the-tag-we-use>
```

## Makefile

You can use the provided makefile to build the backend, build a docker image and generate the documentation.

Without a target, the makefile will generate everything except the docker image.

```
make
```

To build the docker image run

```
make docker-build
```

This will build the jar and copy it into the `ws-sdk/ws/bin` folder, from where it is then added to the container image.
The image will be tagged as `dp3t-docker`.

An example `logback.xml` is found in the `resources` folder for the `dpppt-backend-sdk-ws` Java module.

An example `application.properties` file is found at the same location.
Just make sure the configuration matches with your deployment (c.f. `WSBaseConfig` for possible properties
and `WSCloudBaseConfig` for some `CloudFoundry` specific properties)

## About

The backend implementation for DP3T

### Resources

[Readme](#readme-ov-file)
### License

[MPL-2.0 license](#MPL-2.0-1-ov-file)
### Security policy

[Security policy](#security-ov-file)

[Activity](/DP-3T/dp3t-sdk-backend/activity)
[Custom properties](/DP-3T/dp3t-sdk-backend/custom-properties)
### Stars

[**199**
stars](/DP-3T/dp3t-sdk-backend/stargazers)
### Watchers

[**23**
watching](/DP-3T/dp3t-sdk-backend/watchers)
### Forks

[**86**
forks](/DP-3T/dp3t-sdk-backend/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2FDP-3T%2Fdp3t-sdk-backend&report=DP-3T+%28user%29)

## [Releases 37](/DP-3T/dp3t-sdk-backend/releases)

[v2.5.0
Latest

Dec 8, 2022](/DP-3T/dp3t-sdk-backend/releases/tag/v2.5.0)
[+ 36 releases](/DP-3T/dp3t-sdk-backend/releases)

## [Packages 0](/orgs/DP-3T/packages?repo_name=dp3t-sdk-backend)

## [Contributors 17](/DP-3T/dp3t-sdk-backend/graphs/contributors)

[+ 3 contributors](/DP-3T/dp3t-sdk-backend/graphs/contributors)

## Languages

* [Java
  99.2%](/DP-3T/dp3t-sdk-backend/search?l=java)
* Other
  0.8%

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


