=== Content from github.com_a9405573_20250119_124554.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fduffelhq%2Fpaginator%2Fblob%2Fccf0f37fa96347cc8c8a7e9eb2c64462cec4b2dc%2FREADME.md)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fduffelhq%2Fpaginator%2Fblob%2Fccf0f37fa96347cc8c8a7e9eb2c64462cec4b2dc%2FREADME.md)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=duffelhq%2Fpaginator)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[duffelhq](/duffelhq)
/
**[paginator](/duffelhq/paginator)**
Public

* [Notifications](/login?return_to=%2Fduffelhq%2Fpaginator) You must be signed in to change notification settings
* [Fork
  91](/login?return_to=%2Fduffelhq%2Fpaginator)
* [Star
   767](/login?return_to=%2Fduffelhq%2Fpaginator)

* [Code](/duffelhq/paginator)
* [Issues
  20](/duffelhq/paginator/issues)
* [Pull requests
  11](/duffelhq/paginator/pulls)
* [Actions](/duffelhq/paginator/actions)
* [Projects
  0](/duffelhq/paginator/projects)
* [Security](/duffelhq/paginator/security)
* [Insights](/duffelhq/paginator/pulse)

Additional navigation options

* [Code](/duffelhq/paginator)
* [Issues](/duffelhq/paginator/issues)
* [Pull requests](/duffelhq/paginator/pulls)
* [Actions](/duffelhq/paginator/actions)
* [Projects](/duffelhq/paginator/projects)
* [Security](/duffelhq/paginator/security)
* [Insights](/duffelhq/paginator/pulse)

## Files

 ccf0f37
## Breadcrumbs

1. [paginator](/duffelhq/paginator/tree/ccf0f37fa96347cc8c8a7e9eb2c64462cec4b2dc)
/
# README.md

Copy path Blame  Blame
## Latest commit

## History

[History](/duffelhq/paginator/commits/ccf0f37fa96347cc8c8a7e9eb2c64462cec4b2dc/README.md)166 lines (111 loc) · 5.7 KB ccf0f37
## Breadcrumbs

1. [paginator](/duffelhq/paginator/tree/ccf0f37fa96347cc8c8a7e9eb2c64462cec4b2dc)
/
# README.md

Top
## File metadata and controls

* Preview
* Code
* Blame

166 lines (111 loc) · 5.7 KB[Raw](https://github.com/duffelhq/paginator/raw/ccf0f37fa96347cc8c8a7e9eb2c64462cec4b2dc/README.md)
# Paginator

[![Build Status](https://camo.githubusercontent.com/c3f0dd91b1f88b84ad61039ce4af038d94154e5bbde0320d7fdf6a75d3d6b4bb/68747470733a2f2f7472617669732d63692e6f72672f64756666656c68712f706167696e61746f722e7376673f6272616e63683d6d6173746572)](https://travis-ci.org/duffelhq/paginator)
[![Inline docs](https://camo.githubusercontent.com/76182ce018afe0fadadfc8b8e0a78619a81d6880a2f8b3fdef8e88db0df57623/687474703a2f2f696e63682d63692e6f72672f6769746875622f64756666656c68712f706167696e61746f722e737667)](http://inch-ci.org/github/duffelhq/paginator)

[Cursor based pagination](http://use-the-index-luke.com/no-offset) for Elixir [Ecto](https://github.com/elixir-ecto/ecto).

[Documentation](https://hexdocs.pm/paginator)

## Why?

There are several ways to implement pagination in a project and they all have pros and cons depending on your situation.

### Limit-offset

This is the easiest method to use and implement: you just have to set `LIMIT` and `OFFSET` on your queries and the
database will return records based on this two parameters. Unfortunately, it has two major drawbacks:

* Inconsistent results: if the dataset changes while you are querying, the results in the page will shift and your user
  might end seeing records they have already seen and missing new ones.
* Inefficiency: `OFFSET N` instructs the database to skip the first N results of a query. However, the database must still
  fetch these rows from disk and order them before it can returns the ones requested. If the dataset you are querying is
  large this will result in significant slowdowns.

### Cursor-based (a.k.a keyset pagination)

This method relies on opaque cursor to figure out where to start selecting records. It is more performant than
`LIMIT-OFFSET` because it can filter records without traversing all of them.

It's also consistent, any insertions/deletions before the current page will leave results unaffected.

It has some limitations though: for instance you can't jump directly to a specific page. This may
not be an issue for an API or if you use infinite scrolling on your website.

### Learn more

* <http://use-the-index-luke.com/no-offset>
* <http://use-the-index-luke.com/sql/partial-results/fetch-next-page>
* <https://www.citusdata.com/blog/2016/03/30/five-ways-to-paginate/>
* <https://developer.twitter.com/en/docs/tweets/timelines/guides/working-with-timelines>

## Getting started

```
defmodule MyApp.Repo do
  use Ecto.Repo,
    otp_app: :my_app,
    adapter: Ecto.Adapters.Postgres

  use Paginator
end

query = from(p in Post, order_by: [asc: p.inserted_at, asc: p.id])

page = MyApp.Repo.paginate(query, cursor_fields: [:inserted_at, :id], limit: 50)

# `page.entries` contains all the entries for this page.
# `page.metadata` contains the metadata associated with this page (cursors, limit, total count)
```

## Install

Add `paginator` to your list of dependencies in `mix.exs`:

```
def deps do
  [{:paginator, "~> 1.0.1"}]
end
```

## Usage

1. Add `Paginator` to your repo.

   ```
   defmodule MyApp.Repo do
     use Ecto.Repo,
       otp_app: :my_app,
       adapter: Ecto.Adapters.Postgres

     use Paginator
   end
   ```
2. Use the `paginate` function to paginate your queries.

   ```
   query = from(p in Post, order_by: [asc: p.inserted_at, asc: p.id])

   # return the first 50 posts
   %{entries: entries, metadata: metadata} = Repo.paginate(query, cursor_fields: [:inserted_at, :id], limit: 50)

   # assign the `after` cursor to a variable
   cursor_after = metadata.after

   # return the next 50 posts
   %{entries: entries, metadata: metadata} = Repo.paginate(query, after: cursor_after, cursor_fields: [{inserted_at: :asc}, {:id, :asc}], limit: 50)

   # assign the `before` cursor to a variable
   cursor_before = metadata.before

   # return the previous 50 posts (if no post was created in between it should be the same list as in our first call to `paginate`)
   %{entries: entries, metadata: metadata} = Repo.paginate(query, before: cursor_before, cursor_fields: [:inserted_at, :id], limit: 50)

   # return total count
   # NOTE: this will issue a separate `SELECT COUNT(*) FROM table` query to the database.
   %{entries: entries, metadata: metadata} = Repo.paginate(query, include_total_count: true, cursor_fields: [:inserted_at, :id], limit: 50)

   IO.puts "total count: #{metadata.total_count}"
   ```

## Security Considerations

`Repo.paginate/4 will throw an ArgumentError should it detect an executable term in the cursor parameters passed to it (`before`,` after`).
This is done to protect you from potential side-effects of malicious user input, see [paginator\_test.exs](https://github.com/duffelhq/paginator/blob/master/test/paginator_test.exs#L820).

## Indexes

If you want to reap all the benefits of this method it is better that you create indexes on the columns you are using as
cursor fields.

### Example

```
# If your cursor fields are: [:inserted_at, :id]
# Add the following in a migration

create index("posts", [:inserted_at, :id])
```

## Caveats

* This method requires a deterministic sort order. If the columns you are currently using for sorting don't match that
  definition, just add any unique column and extend your index accordingly.
* You need to add order\_by clauses yourself before passing your query to `paginate/2`. In the future we might do that
  for you automatically based on the fields specified in `:cursor_fields`.
* There is an outstanding issue where Postgrex fails to properly builds the query if it includes custom PostgreSQL types.
* This library has only be tested with PostgreSQL.

## Documentation

Documentation is written into the library, you will find it in the source code, accessible from `iex` and of course, it
all gets published to [hexdocs](http://hexdocs.pm/paginator).

## Contributing

### Running tests

Clone the repo and fetch its dependencies:

```
$ git clone https://github.com/duffelhq/paginator.git
$ cd paginator
$ mix deps.get
$ mix test

```

### Building docs

```
$ mix docs

```

## LICENSE

See [LICENSE](https://github.com/duffelhq/paginator/blob/master/LICENSE.txt)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from avatars.githubusercontent.com_452a455c_20250119_141718.html ===
���� �  

 $.' ",#(7),01444'9=82<.342 
2!!22222222222222222222222222222222222222222222222222��  ( (" ���          
   } !1AQa"q2���#B��R��$3br�
%&'()\*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz�������������������������������������������������������������������������       
  w !1AQaq"2�B���� #3R�br�
$4�%�&'()\*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz��������������������������������������������������������������������������   ? ��M�ⷅ��8�e�� smV���L�q4&X|��(��8��I�\i]��e�SZ����Z�����t6w���\�ʲ��#�kCY��$���w�V�ًUp #������� �m�����s�e
��3I�QWGI�{Q�U���+c�\*kg�d'v܂����C14���j2�� sX>3�a�E�;
J)
��I=����䬆���\_Լ�MF��K�!De��Wi\v�OJ���(�9�K=�g$c�R@����>���/ϒ�����x�M��t������� ���V4�܍���:��l���N�U����L��Pysens�/�-U�K}&'²��ߟ�~��UĪ������Z�һ)+EKq�9]����nx�Ң��j��VQU�տ�ՒK�jriz�7��&�3��p~����f\�:/��k�\_��RVr�{��G��

=== Content from github.com_3b5b0db5_20250119_124556.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fduffelhq%2Fpaginator%2Fsecurity%2Fadvisories%2FGHSA-w98m-2xqg-9cvj)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fduffelhq%2Fpaginator%2Fsecurity%2Fadvisories%2FGHSA-w98m-2xqg-9cvj)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=duffelhq%2Fpaginator)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[duffelhq](/duffelhq)
/
**[paginator](/duffelhq/paginator)**
Public

* [Notifications](/login?return_to=%2Fduffelhq%2Fpaginator) You must be signed in to change notification settings
* [Fork
  91](/login?return_to=%2Fduffelhq%2Fpaginator)
* [Star
   767](/login?return_to=%2Fduffelhq%2Fpaginator)

* [Code](/duffelhq/paginator)
* [Issues
  20](/duffelhq/paginator/issues)
* [Pull requests
  11](/duffelhq/paginator/pulls)
* [Actions](/duffelhq/paginator/actions)
* [Projects
  0](/duffelhq/paginator/projects)
* [Security](/duffelhq/paginator/security)
* [Insights](/duffelhq/paginator/pulse)

Additional navigation options

* [Code](/duffelhq/paginator)
* [Issues](/duffelhq/paginator/issues)
* [Pull requests](/duffelhq/paginator/pulls)
* [Actions](/duffelhq/paginator/actions)
* [Projects](/duffelhq/paginator/projects)
* [Security](/duffelhq/paginator/security)
* [Insights](/duffelhq/paginator/pulse)

# Remote Code Execution Vulnerability

Critical

[waltfy](/waltfy)
published
GHSA-w98m-2xqg-9cvj
Aug 18, 2020

## Package

paginator
(Hex)

## Affected versions

< 0.6.0

## Patched versions

1.0.0

## Description

There is a vulnerability in Paginator which makes it susceptible to Remote Code Execution (RCE) attacks via input parameters to the `paginate()` function.

### Impact

There is a vulnerability in Paginator which makes it susceptible to Remote Code Execution (RCE) attacks via input parameters to the `paginate()` function. This will potentially affect all current users of `Paginator` prior to version >= 1.0.0.

### Patches

The vulnerability has been patched in version 1.0.0 and all users should upgrade to this version immediately. Note that this patched version uses a dependency that requires an Elixir version >=1.5.

### Credits

Thank you to Peter Stöckli.

### Severity

Critical

### CVE ID

CVE-2020-15150

### Weaknesses

No CWEs

### Credits

* [![@p-](https://avatars.githubusercontent.com/u/176818?s=40&v=4)](/p-)
  [p-](/p-)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_3096a55e_20250119_124556.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fduffelhq%2Fpaginator%2Fcommit%2Fbf45e92602e517c75aea0465efc35cd661d9ebf8)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fduffelhq%2Fpaginator%2Fcommit%2Fbf45e92602e517c75aea0465efc35cd661d9ebf8)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=duffelhq%2Fpaginator)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[duffelhq](/duffelhq)
/
**[paginator](/duffelhq/paginator)**
Public

* [Notifications](/login?return_to=%2Fduffelhq%2Fpaginator) You must be signed in to change notification settings
* [Fork
  91](/login?return_to=%2Fduffelhq%2Fpaginator)
* [Star
   767](/login?return_to=%2Fduffelhq%2Fpaginator)

* [Code](/duffelhq/paginator)
* [Issues
  20](/duffelhq/paginator/issues)
* [Pull requests
  11](/duffelhq/paginator/pulls)
* [Actions](/duffelhq/paginator/actions)
* [Projects
  0](/duffelhq/paginator/projects)
* [Security](/duffelhq/paginator/security)
* [Insights](/duffelhq/paginator/pulse)

Additional navigation options

* [Code](/duffelhq/paginator)
* [Issues](/duffelhq/paginator/issues)
* [Pull requests](/duffelhq/paginator/pulls)
* [Actions](/duffelhq/paginator/actions)
* [Projects](/duffelhq/paginator/projects)
* [Security](/duffelhq/paginator/security)
* [Insights](/duffelhq/paginator/pulse)

## Commit

[Permalink](/duffelhq/paginator/commit/bf45e92602e517c75aea0465efc35cd661d9ebf8)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-w98m-2xqg-9cvj](https://github.com/advisories/GHSA-w98m-2xqg-9cvj "GHSA-w98m-2xqg-9cvj")

[Browse files](/duffelhq/paginator/tree/bf45e92602e517c75aea0465efc35cd661d9ebf8)
Browse the repository at this point in the history

```
Fix unsafe binary to term
```

* Loading branch information

Walter Carvalho
authored
Aug 17, 2020

2 parents
[a44f6d1](/duffelhq/paginator/commit/a44f6d160439a582ddc5fdcf8ade60253bc3256f)
+
[ce4f0db](/duffelhq/paginator/commit/ce4f0dbd0543f45dab9a596df839b01a026e6632)

commit bf45e92

 Show file tree

 Hide file tree

Showing
**5 changed files**
with
**61 additions**
and
**27 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* README.md
  [README.md](#diff-b335630551682c19a781afebcf4d07bf978fb1f8ac04c6bf87428ed5106870f5)
* lib/paginator

  + lib/paginator/cursor.ex
    [cursor.ex](#diff-32921cf1556d76573a1958c0ddee5bf2ff7c6e31ba091a716ba7f68d4f5dc473)
* mix.exs
  [mix.exs](#diff-dfa6f4ed74c90e5d4fda283d547d366586e690387289bcfd473e3fa5f9ace308)
* mix.lock
  [mix.lock](#diff-f9ea769f3d62f6ebfee2c6ef453a579ab051c1b45514ecfc2ffba9d9e98a5025)
* test

  + test/paginator\_test.exs
    [paginator\_test.exs](#diff-89db4dc57c14a58073ed30268953a8903b953ae65d76dde67ca44b552e55ff4d)

## There are no files selected for viewing

4 changes: 4 additions & 0 deletions

4
[README.md](#diff-b335630551682c19a781afebcf4d07bf978fb1f8ac04c6bf87428ed5106870f5 "README.md")

Show comments

[View file](/duffelhq/paginator/blob/bf45e92602e517c75aea0465efc35cd661d9ebf8/README.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -109,6 +109,10 @@ end |
|  |  |  |
|  |  | IO.puts "total count: #{metadata.total\_count}" |
|  |  | ``` |
|  |  | ## Security Considerations |
|  |  |  |
|  |  | `Repo.paginate/4 will throw an ArgumentError should it detect an executable term in the cursor parameters passed to it (`before`, `after`). |
|  |  | This is done to protect you from potential side-effects of malicious user input, see [paginator\_test.exs](https://github.com/duffelhq/paginator/blob/master/test/paginator\_test.exs#L820). |
|  |  |  |
|  |  | ## Indexes |
|  |  |  |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[lib/paginator/cursor.ex](#diff-32921cf1556d76573a1958c0ddee5bf2ff7c6e31ba091a716ba7f68d4f5dc473 "lib/paginator/cursor.ex")

Show comments

[View file](/duffelhq/paginator/blob/bf45e92602e517c75aea0465efc35cd661d9ebf8/lib/paginator/cursor.ex)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -6,7 +6,7 @@ defmodule Paginator.Cursor do |
|  |  | def decode(encoded\_cursor) do |
|  |  | encoded\_cursor |
|  |  | |> Base.url\_decode64!() |
|  |  | |> :erlang.binary\_to\_term([:safe]) |
|  |  | |> Plug.Crypto.non\_executable\_binary\_to\_term([:safe]) |
|  |  | end |
|  |  |  |
|  |  | def encode(values) when is\_map(values) do |
| Expand Down | |  |

3 changes: 2 additions & 1 deletion

3
[mix.exs](#diff-dfa6f4ed74c90e5d4fda283d547d366586e690387289bcfd473e3fa5f9ace308 "mix.exs")

Show comments

[View file](/duffelhq/paginator/blob/bf45e92602e517c75aea0465efc35cd661d9ebf8/mix.exs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -45,7 +45,8 @@ defmodule Paginator.Mixfile do |
|  |  | {:ex\_doc, "~> 0.18", only: :dev, runtime: false}, |
|  |  | {:ex\_machina, "~> 2.1", only: :test}, |
|  |  | {:inch\_ex, "~> 1.0", only: [:dev, :test]}, |
|  |  | {:postgrex, "~> 0.13", optional: true} |
|  |  | {:postgrex, "~> 0.13", optional: true}, |
|  |  | {:plug\_crypto, "~> 1.1.2"} |
|  |  | ] |
|  |  | end |
|  |  |  |
| Expand Down | |  |

51 changes: 26 additions & 25 deletions

51
[mix.lock](#diff-f9ea769f3d62f6ebfee2c6ef453a579ab051c1b45514ecfc2ffba9d9e98a5025 "mix.lock")

Show comments

[View file](/duffelhq/paginator/blob/bf45e92602e517c75aea0465efc35cd661d9ebf8/mix.lock)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,28 +1,29 @@ |
|  |  | %{ |
|  |  | "calendar": {:hex, :calendar, "0.17.4", "22c5e8d98a4db9494396e5727108dffb820ee0d18fed4b0aa8ab76e4f5bc32f1", [:mix], [{:tzdata, "~> 0.5.8 or ~> 0.1.201603", [hex: :tzdata, repo: "hexpm", optional: false]}], "hexpm"}, |
|  |  | "certifi": {:hex, :certifi, "2.3.1", "d0f424232390bf47d82da8478022301c561cf6445b5b5fb6a84d49a9e76d2639", [:rebar3], [{:parse\_trans, "3.2.0", [hex: :parse\_trans, repo: "hexpm", optional: false]}], "hexpm"}, |
|  |  | "connection": {:hex, :connection, "1.0.4", "a1cae72211f0eef17705aaededacac3eb30e6625b04a6117c1b2db6ace7d5976", [:mix], [], "hexpm"}, |
|  |  | "db\_connection": {:hex, :db\_connection, "2.0.3", "b4e8aa43c100e16f122ccd6798cd51c48c79fd391c39d411f42b3cd765daccb0", [:mix], [{:connection, "~> 1.0.2", [hex: :connection, repo: "hexpm", optional: false]}], "hexpm"}, |
|  |  | "decimal": {:hex, :decimal, "1.6.0", "bfd84d90ff966e1f5d4370bdd3943432d8f65f07d3bab48001aebd7030590dcc", [:mix], [], "hexpm"}, |
|  |  | "earmark": {:hex, :earmark, "1.3.1", "73812f447f7a42358d3ba79283cfa3075a7580a3a2ed457616d6517ac3738cb9", [:mix], [], "hexpm"}, |
|  |  | "ecto": {:hex, :ecto, "3.0.6", "d33ab5b3f7553a41507d4b0ad5bf192d533119c4ad08f3a5d63d85aa12117dc9", [:mix], [{:decimal, "~> 1.6", [hex: :decimal, repo: "hexpm", optional: false]}, {:jason, "~> 1.0", [hex: :jason, repo: "hexpm", optional: true]}, {:poison, "~> 2.2 or ~> 3.0", [hex: :poison, repo: "hexpm", optional: true]}], "hexpm"}, |
|  |  | "ecto\_sql": {:hex, :ecto\_sql, "3.0.4", "e7a0feb0b2484b90981c56d5cd03c52122c1c31ded0b95ed213b7c5c07ae6737", [:mix], [{:db\_connection, "~> 2.0", [hex: :db\_connection, repo: "hexpm", optional: false]}, {:ecto, "~> 3.0.6", [hex: :ecto, repo: "hexpm", optional: false]}, {:mariaex, "~> 0.9.1", [hex: :mariaex, repo: "hexpm", optional: true]}, {:postgrex, "~> 0.14.0", [hex: :postgrex, repo: "hexpm", optional: true]}, {:telemetry, "~> 0.3.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm"}, |
|  |  | "ex\_doc": {:hex, :ex\_doc, "0.19.3", "3c7b0f02851f5fc13b040e8e925051452e41248f685e40250d7e40b07b9f8c10", [:mix], [{:earmark, "~> 1.2", [hex: :earmark, repo: "hexpm", optional: false]}, {:makeup\_elixir, "~> 0.10", [hex: :makeup\_elixir, repo: "hexpm", optional: false]}], "hexpm"}, |
|  |  | "ex\_machina": {:hex, :ex\_machina, "2.2.2", "d84217a6fb7840ff771d2561b8aa6d74a0d8968e4b10ecc0d7e9890dc8fb1c6a", [:mix], [{:ecto, "~> 2.2 or ~> 3.0", [hex: :ecto, repo: "hexpm", optional: true]}, {:ecto\_sql, "~> 3.0", [hex: :ecto\_sql, repo: "hexpm", optional: true]}], "hexpm"}, |
|  |  | "hackney": {:hex, :hackney, "1.13.0", "24edc8cd2b28e1c652593833862435c80661834f6c9344e84b6a2255e7aeef03", [:rebar3], [{:certifi, "2.3.1", [hex: :certifi, repo: "hexpm", optional: false]}, {:idna, "5.1.2", [hex: :idna, repo: "hexpm", optional: false]}, {:metrics, "1.0.1", [hex: :metrics, repo: "hexpm", optional: false]}, {:mimerl, "1.0.2", [hex: :mimerl, repo: "hexpm", optional: false]}, {:ssl\_verify\_fun, "1.1.1", [hex: :ssl\_verify\_fun, repo: "hexpm", optional: false]}], "hexpm"}, |
|  |  | "idna": {:hex, :idna, "5.1.2", "e21cb58a09f0228a9e0b95eaa1217f1bcfc31a1aaa6e1fdf2f53a33f7dbd9494", [:rebar3], [{:unicode\_util\_compat, "0.3.1", [hex: :unicode\_util\_compat, repo: "hexpm", optional: false]}], "hexpm"}, |
|  |  | "inch\_ex": {:hex, :inch\_ex, "1.0.1", "1f0af1a83cec8e56f6fc91738a09c838e858db3d78ef5f2ec040fe4d5a62dabf", [:mix], [{:poison, "~> 1.5 or ~> 2.0 or ~> 3.0", [hex: :poison, repo: "hexpm", optional: false]}], "hexpm"}, |
|  |  | "makeup": {:hex, :makeup, "0.8.0", "9cf32aea71c7fe0a4b2e9246c2c4978f9070257e5c9ce6d4a28ec450a839b55f", [:mix], [{:nimble\_parsec, "~> 0.5.0", [hex: :nimble\_parsec, repo: "hexpm", optional: false]}], "hexpm"}, |
|  |  | "makeup\_elixir": {:hex, :makeup\_elixir, "0.13.0", "be7a477997dcac2e48a9d695ec730b2d22418292675c75aa2d34ba0909dcdeda", [:mix], [{:makeup, "~> 0.8", [hex: :makeup, repo: "hexpm", optional: false]}], "hexpm"}, |
|  |  | "metrics": {:hex, :metrics, "1.0.1", "25f094dea2cda98213cecc3aeff09e940299d950904393b2a29d191c346a8486", [:rebar3], [], "hexpm"}, |
|  |  | "mimerl": {:hex, :mimerl, "1.0.2", "993f9b0e084083405ed8252b99460c4f0563e41729ab42d9074fd5e52439be88", [:rebar3], [], "hexpm"}, |
|  |  | "nimble\_parsec": {:hex, :nimble\_parsec, "0.5.0", "90e2eca3d0266e5c53f8fbe0079694740b9c91b6747f2b7e3c5d21966bba8300", [:mix], [], "hexpm"}, |
|  |  | "parse\_trans": {:hex, :parse\_trans, "3.2.0", "2adfa4daf80c14dc36f522cf190eb5c4ee3e28008fc6394397c16f62a26258c2", [:rebar3], [], "hexpm"}, |
|  |  | "poison": {:hex, :poison, "3.1.0", "d9eb636610e096f86f25d9a46f35a9facac35609a7591b3be3326e99a0484665", [:mix], [], "hexpm"}, |
|  |  | "calendar": {:hex, :calendar, "0.17.4", "22c5e8d98a4db9494396e5727108dffb820ee0d18fed4b0aa8ab76e4f5bc32f1", [:mix], [{:tzdata, "~> 0.5.8 or ~> 0.1.201603", [hex: :tzdata, repo: "hexpm", optional: false]}], "hexpm", "5a060b05a869a4acfc7678e3521143b39165a78ee2ccd69850a6b92a526af58a"}, |
|  |  | "certifi": {:hex, :certifi, "2.3.1", "d0f424232390bf47d82da8478022301c561cf6445b5b5fb6a84d49a9e76d2639", [:rebar3], [{:parse\_trans, "3.2.0", [hex: :parse\_trans, repo: "hexpm", optional: false]}], "hexpm", "e12d667d042c11d130594bae2b0097e63836fe8b1e6d6b2cc48f8bb7a2cf7d68"}, |
|  |  | "connection": {:hex, :connection, "1.0.4", "a1cae72211f0eef17705aaededacac3eb30e6625b04a6117c1b2db6ace7d5976", [:mix], [], "hexpm", "4a0850c9be22a43af9920a71ab17c051f5f7d45c209e40269a1938832510e4d9"}, |
|  |  | "db\_connection": {:hex, :db\_connection, "2.0.3", "b4e8aa43c100e16f122ccd6798cd51c48c79fd391c39d411f42b3cd765daccb0", [:mix], [{:connection, "~> 1.0.2", [hex: :connection, repo: "hexpm", optional: false]}], "hexpm", "1e123d79599809ca3775fd71b40574f3592a2acd85d3c41d49f5843426021f9b"}, |
|  |  | "decimal": {:hex, :decimal, "1.6.0", "bfd84d90ff966e1f5d4370bdd3943432d8f65f07d3bab48001aebd7030590dcc", [:mix], [], "hexpm", "bbd124e240e3ff40f407d50fced3736049e72a73d547f69201484d3a624ab569"}, |
|  |  | "earmark": {:hex, :earmark, "1.3.1", "73812f447f7a42358d3ba79283cfa3075a7580a3a2ed457616d6517ac3738cb9", [:mix], [], "hexpm", "000aaeff08919e95e7aea13e4af7b2b9734577b3e6a7c50ee31ee88cab6ec4fb"}, |
|  |  | "ecto": {:hex, :ecto, "3.0.6", "d33ab5b3f7553a41507d4b0ad5bf192d533119c4ad08f3a5d63d85aa12117dc9", [:mix], [{:decimal, "~> 1.6", [hex: :decimal, repo: "hexpm", optional: false]}, {:jason, "~> 1.0", [hex: :jason, repo: "hexpm", optional: true]}, {:poison, "~> 2.2 or ~> 3.0", [hex: :poison, repo: "hexpm", optional: true]}], "hexpm", "0e3761e75c87affe9f5e7735d285185c2942ccb0808ca82fb35963f55c31c7b5"}, |
|  |  | "ecto\_sql": {:hex, :ecto\_sql, "3.0.4", "e7a0feb0b2484b90981c56d5cd03c52122c1c31ded0b95ed213b7c5c07ae6737", [:mix], [{:db\_connection, "~> 2.0", [hex: :db\_connection, repo: "hexpm", optional: false]}, {:ecto, "~> 3.0.6", [hex: :ecto, repo: "hexpm", optional: false]}, {:mariaex, "~> 0.9.1", [hex: :mariaex, repo: "hexpm", optional: true]}, {:postgrex, "~> 0.14.0", [hex: :postgrex, repo: "hexpm", optional: true]}, {:telemetry, "~> 0.3.0", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "7b49acc82d34fc1e020dbf8bebaff8f1dff40b550d778743943beba4190e4db5"}, |
|  |  | "ex\_doc": {:hex, :ex\_doc, "0.19.3", "3c7b0f02851f5fc13b040e8e925051452e41248f685e40250d7e40b07b9f8c10", [:mix], [{:earmark, "~> 1.2", [hex: :earmark, repo: "hexpm", optional: false]}, {:makeup\_elixir, "~> 0.10", [hex: :makeup\_elixir, repo: "hexpm", optional: false]}], "hexpm", "0e11d67e662142fc3945b0ee410c73c8c956717fbeae4ad954b418747c734973"}, |
|  |  | "ex\_machina": {:hex, :ex\_machina, "2.2.2", "d84217a6fb7840ff771d2561b8aa6d74a0d8968e4b10ecc0d7e9890dc8fb1c6a", [:mix], [{:ecto, "~> 2.2 or ~> 3.0", [hex: :ecto, repo: "hexpm", optional: true]}, {:ecto\_sql, "~> 3.0", [hex: :ecto\_sql, repo: "hexpm", optional: true]}], "hexpm", "0d718f9b2dc1b952eab6223fd5fbe1698be7b6012a5717c66efe8a7920c43ac9"}, |
|  |  | "hackney": {:hex, :hackney, "1.13.0", "24edc8cd2b28e1c652593833862435c80661834f6c9344e84b6a2255e7aeef03", [:rebar3], [{:certifi, "2.3.1", [hex: :certifi, repo: "hexpm", optional: false]}, {:idna, "5.1.2", [hex: :idna, repo: "hexpm", optional: false]}, {:metrics, "1.0.1", [hex: :metrics, repo: "hexpm", optional: false]}, {:mimerl, "1.0.2", [hex: :mimerl, repo: "hexpm", optional: false]}, {:ssl\_verify\_fun, "1.1.1", [hex: :ssl\_verify\_fun, repo: "hexpm", optional: false]}], "hexpm", "4d605d33dd07ee1b82b105033cccb02379515105fceb1850746591814b00c205"}, |
|  |  | "idna": {:hex, :idna, "5.1.2", "e21cb58a09f0228a9e0b95eaa1217f1bcfc31a1aaa6e1fdf2f53a33f7dbd9494", [:rebar3], [{:unicode\_util\_compat, "0.3.1", [hex: :unicode\_util\_compat, repo: "hexpm", optional: false]}], "hexpm", "8fddb3aec4692c71647d67de72536254bce9069851754e370a99f2aae69fbdf4"}, |
|  |  | "inch\_ex": {:hex, :inch\_ex, "1.0.1", "1f0af1a83cec8e56f6fc91738a09c838e858db3d78ef5f2ec040fe4d5a62dabf", [:mix], [{:poison, "~> 1.5 or ~> 2.0 or ~> 3.0", [hex: :poison, repo: "hexpm", optional: false]}], "hexpm", "08fd8a9205d3e1aefad9d7cb2a7f6b346e4a3e6ff09e139f6ec978f3a479ba14"}, |
|  |  | "makeup": {:hex, :makeup, "0.8.0", "9cf32aea71c7fe0a4b2e9246c2c4978f9070257e5c9ce6d4a28ec450a839b55f", [:mix], [{:nimble\_parsec, "~> 0.5.0", [hex: :nimble\_parsec, repo: "hexpm", optional: false]}], "hexpm", "5fbc8e549aa9afeea2847c0769e3970537ed302f93a23ac612602e805d9d1e7f"}, |
|  |  | "makeup\_elixir": {:hex, :makeup\_elixir, "0.13.0", "be7a477997dcac2e48a9d695ec730b2d22418292675c75aa2d34ba0909dcdeda", [:mix], [{:makeup, "~> 0.8", [hex: :makeup, repo: "hexpm", optional: false]}], "hexpm", "adf0218695e22caeda2820eaba703fa46c91820d53813a2223413da3ef4ba515"}, |
|  |  | "metrics": {:hex, :metrics, "1.0.1", "25f094dea2cda98213cecc3aeff09e940299d950904393b2a29d191c346a8486", [:rebar3], [], "hexpm", "69b09adddc4f74a40716ae54d140f93beb0fb8978d8636eaded0c31b6f099f16"}, |
|  |  | "mimerl": {:hex, :mimerl, "1.0.2", "993f9b0e084083405ed8252b99460c4f0563e41729ab42d9074fd5e52439be88", [:rebar3], [], "hexpm", "7a4c8e1115a2732a67d7624e28cf6c9f30c66711a9e92928e745c255887ba465"}, |
|  |  | "nimble\_parsec": {:hex, :nimble\_parsec, "0.5.0", "90e2eca3d0266e5c53f8fbe0079694740b9c91b6747f2b7e3c5d21966bba8300", [:mix], [], "hexpm", "5c040b8469c1ff1b10093d3186e2e10dbe483cd73d79ec017993fb3985b8a9b3"}, |
|  |  | "parse\_trans": {:hex, :parse\_trans, "3.2.0", "2adfa4daf80c14dc36f522cf190eb5c4ee3e28008fc6394397c16f62a26258c2", [:rebar3], [], "hexpm", "578b1d484720749499db5654091ddac818ea0b6d568f2c99c562d2a6dd4aa117"}, |
|  |  | "plug\_crypto": {:hex, :plug\_crypto, "1.1.2", "bdd187572cc26dbd95b87136290425f2b580a116d3fb1f564216918c9730d227", [:mix], [], "hexpm", "6b8b608f895b6ffcfad49c37c7883e8df98ae19c6a28113b02aa1e9c5b22d6b5"}, |
|  |  | "poison": {:hex, :poison, "3.1.0", "d9eb636610e096f86f25d9a46f35a9facac35609a7591b3be3326e99a0484665", [:mix], [], "hexpm", "fec8660eb7733ee4117b85f55799fd3833eb769a6df71ccf8903e8dc5447cfce"}, |
|  |  | "poolboy": {:hex, :poolboy, "1.5.1", "6b46163901cfd0a1b43d692657ed9d7e599853b3b21b95ae5ae0a777cf9b6ca8", [:rebar], [], "hexpm"}, |
|  |  | "postgrex": {:hex, :postgrex, "0.14.1", "63247d4a5ad6b9de57a0bac5d807e1c32d41e39c04b8a4156a26c63bcd8a2e49", [:mix], [{:connection, "~> 1.0", [hex: :connection, repo: "hexpm", optional: false]}, {:db\_connection, "~> 2.0", [hex: :db\_connection, repo: "hexpm", optional: false]}, {:decimal, "~> 1.5", [hex: :decimal, repo: "hexpm", optional: false]}, {:jason, "~> 1.0", [hex: :jason, repo: "hexpm", optional: true]}], "hexpm"}, |
|  |  | "ssl\_verify\_fun": {:hex, :ssl\_verify\_fun, "1.1.1", "28a4d65b7f59893bc2c7de786dec1e1555bd742d336043fe644ae956c3497fbe", [:make, :rebar], [], "hexpm"}, |
|  |  | "telemetry": {:hex, :telemetry, "0.3.0", "099a7f3ce31e4780f971b4630a3c22ec66d22208bc090fe33a2a3a6a67754a73", [:rebar3], [], "hexpm"}, |
|  |  | "tzdata": {:hex, :tzdata, "0.5.17", "50793e3d85af49736701da1a040c415c97dc1caf6464112fd9bd18f425d3053b", [:mix], [{:hackney, "~> 1.0", [hex: :hackney, repo: "hexpm", optional: false]}], "hexpm"}, |
|  |  | "unicode\_util\_compat": {:hex, :unicode\_util\_compat, "0.3.1", "a1f612a7b512638634a603c8f401892afbf99b8ce93a45041f8aaca99cadb85e", [:rebar3], [], "hexpm"}, |
|  |  | "postgrex": {:hex, :postgrex, "0.14.1", "63247d4a5ad6b9de57a0bac5d807e1c32d41e39c04b8a4156a26c63bcd8a2e49", [:mix], [{:connection, "~> 1.0", [hex: :connection, repo: "hexpm", optional: false]}, {:db\_connection, "~> 2.0", [hex: :db\_connection, repo: "hexpm", optional: false]}, {:decimal, "~> 1.5", [hex: :decimal, repo: "hexpm", optional: false]}, {:jason, "~> 1.0", [hex: :jason, repo: "hexpm", optional: true]}], "hexpm", "a20f189bdd5a219c484818fde18e09ace20cd15fe630a828fde70bd6efdeb23b"}, |
|  |  | "ssl\_verify\_fun": {:hex, :ssl\_verify\_fun, "1.1.1", "28a4d65b7f59893bc2c7de786dec1e1555bd742d336043fe644ae956c3497fbe", [:make, :rebar], [], "hexpm", "4f8805eb5c8a939cf2359367cb651a3180b27dfb48444846be2613d79355d65e"}, |
|  |  | "telemetry": {:hex, :telemetry, "0.3.0", "099a7f3ce31e4780f971b4630a3c22ec66d22208bc090fe33a2a3a6a67754a73", [:rebar3], [], "hexpm", "63d9f37d319ff331a51f6221310deb5aac8ea3dcf5e0369d689121b5e52f72d4"}, |
|  |  | "tzdata": {:hex, :tzdata, "0.5.17", "50793e3d85af49736701da1a040c415c97dc1caf6464112fd9bd18f425d3053b", [:mix], [{:hackney, "~> 1.0", [hex: :hackney, repo: "hexpm", optional: false]}], "hexpm", "35407ed377f7c07ce47ac20a437ca0d97d950086413228a66171193b03d574ed"}, |
|  |  | "unicode\_util\_compat": {:hex, :unicode\_util\_compat, "0.3.1", "a1f612a7b512638634a603c8f401892afbf99b8ce93a45041f8aaca99cadb85e", [:rebar3], [], "hexpm", "da1d9bef8a092cc7e1e51f1298037a5ddfb0f657fe862dfe7ba4c5807b551c29"}, |
|  |  | } |

28 changes: 28 additions & 0 deletions

28
[test/paginator\_test.exs](#diff-89db4dc57c14a58073ed30268953a8903b953ae65d76dde67ca44b552e55ff4d "test/paginator_test.exs")

Show comments

[View file](/duffelhq/paginator/blob/bf45e92602e517c75aea0465efc35cd661d9ebf8/test/paginator_test.exs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -817,6 +817,34 @@ defmodule PaginatorTest do |
|  |  | end |
|  |  | end |
|  |  |  |
|  |  | test "when before parameter is erlang term, we do not execute the code", %{} do |
|  |  | # before and after, are user inputs, we need to make sure that they are |
|  |  | # handled safely. |
|  |  |  |
|  |  | test\_pid = self() |
|  |  |  |
|  |  | exploit = fn \_, \_ -> |
|  |  | send(test\_pid, :rce) |
|  |  | {:cont, []} |
|  |  | end |
|  |  |  |
|  |  | payload = |
|  |  | exploit |
|  |  | |> :erlang.term\_to\_binary() |
|  |  | |> Base.url\_encode64() |
|  |  |  |
|  |  | assert\_raise(ArgumentError, ~r/^cannot deserialize.+/, fn -> |
|  |  | payments\_by\_amount\_and\_charged\_at(:asc, :desc) |
|  |  | |> Repo.paginate( |
|  |  | cursor\_fields: [amount: :asc, charged\_at: :desc, id: :asc], |
|  |  | before: payload, |
|  |  | limit: 3 |
|  |  | ) |
|  |  | end) |
|  |  |  |
|  |  | refute\_receive :rce, 1000, "Remote Code Execution Detected" |
|  |  | end |
|  |  |  |
|  |  | test "per-record cursor generation", %{ |
|  |  | payments: {p1, \_p2, \_p3, \_p4, \_p5, \_p6, p7, \_p8, \_p9, \_p10, \_p11, \_p12} |
|  |  | } do |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `bf45e92`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fduffelhq%2Fpaginator%2Fcommit%2Fbf45e92602e517c75aea0465efc35cd661d9ebf8) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from hex.pm_fff26a45_20250119_124557.html ===


Toggle navigation

[![hex logo](/images/hex-a56f59a0c6bb92a0e2850ccd555f7525.png?vsn=d)](/)

* [Packages](/packages)
* [Pricing](/pricing)
* [Docs](/docs)
* [Log in](/login)

## [paginator](/packages/paginator) 1.2.0

Cursor based pagination for Elixir Ecto.

### Links

* [Online documentation](https://hexdocs.pm/paginator/)
* [Changelog](https://hexdocs.pm/paginator/changelog.html)
* [GitHub](https://github.com/duffelhq/paginator)

### License

MIT

### Downloads

0
1000
2000
3000
4000
Last 30 days,
all versions

* 1.27M

  1 270 302

  this version
* 924

  924

  yesterday
* 21 332

  21 332

  last 7 days
* 3.23M

  3 230 436

  all time

### Versions (15)

* [**1.2.0**](/packages/paginator/1.2.0)
  Oct 27, 2022
* [**1.1.0**](/packages/paginator/1.1.0)
  Feb 08, 2022
* [**1.0.4**](/packages/paginator/1.0.4)
  Mar 15, 2021
* [**1.0.3**](/packages/paginator/1.0.3)
  Dec 21, 2020
* [**1.0.2**](/packages/paginator/1.0.2)
  Dec 02, 2020

[Show All Versions](/packages/paginator/versions)

### Dependencies (4)

* [ecto](/packages/ecto) ~> 3.0
* [ecto\_sql](/packages/ecto_sql) ~> 3.0
* [plug\_crypto](/packages/plug_crypto) ~> 1.2.0
* [postgrex](/packages/postgrex) ~> 0.13
  (optional)

### Recent Activity

* Oct 27, 2022
  Publish documentation for release 1.2.0
* Oct 27, 2022
  Publish release 1.2.0
* Oct 27, 2022
  Revert release 1.1.1
* Oct 27, 2022
  Publish documentation for release 1.1.1
* Oct 27, 2022
  Publish release 1.1.1
* Feb 08, 2022
  Publish documentation for release 1.1.0
* Feb 08, 2022
  Publish release 1.1.0
* Mar 15, 2021
  Publish documentation for release 1.0.4
* Mar 15, 2021
  Publish release 1.0.4
* Dec 21, 2020
  Publish documentation for release 1.0.3

[Show All Activities](/packages/paginator/audit-logs)

### Config

mix.exs

rebar.config

erlang.mk

### Checksum

### Build Tools

mix
### Owners

* [![](https://www.gravatar.com/avatar/809eedc8b4e0d85cca3b172fa98830dd?s=80&d=retro)stevedomin](/users/stevedomin)
* [![](https://www.gravatar.com/avatar/48e7bd11523e54860ad23b6424e880ef?s=80&d=retro)sgerrand](/users/sgerrand)
* [![](https://www.gravatar.com/avatar/32ef3bb9d8c329a2e9cfbf268468b63a?s=80&d=retro)duffel](/users/duffel)
* [![](https://www.gravatar.com/avatar/00000000000000000000000000000000?s=80&d=mp)msz](/users/msz)

### Publisher

[![](https://www.gravatar.com/avatar/32ef3bb9d8c329a2e9cfbf268468b63a?s=80&d=retro)duffel](/users/duffel)
### Dependents (5)

[indexed](/packages/indexed), [forage](/packages/forage), [ex\_checkout](/packages/ex_checkout), [ex\_catalog](/packages/ex_catalog), [paginator\_tg](/packages/paginator_tg),
[show all...](/packages?search=depends%3Ahexpm%3Apaginator)

#### About Hex

* [About](/about)
* [Blog](/blog)
* [Sponsors](/sponsors)
* [GitHub](https://github.com/hexpm)
* [Twitter](https://twitter.com/hexpm)
* [Status](https://status.hex.pm)

#### Help

* [Documentation](/docs)
  ([FAQ](/docs/faq))
* [Specifications](https://github.com/hexpm/specifications)
* [Report Client Issue](https://github.com/hexpm/hex/issues)
* [Report General Issue](https://github.com/hexpm/hexpm/issues)
* Report Security Issue
* Contact Support

#### Policies and Terms

* [Code of Conduct](/policies/codeofconduct)
* [Terms of Service](/policies/termsofservice)
* [Privacy Policy](/policies/privacy)
* [Copyright Policy](/policies/copyright)
* [Dispute Policy](/policies/dispute)

2020 © Six Colors AB.

Powered by the [Erlang VM](https://www.erlang.org/) and the [Elixir programming language](https://elixir-lang.org/).


