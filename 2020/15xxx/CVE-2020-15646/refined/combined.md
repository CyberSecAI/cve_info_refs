=== Content from bugzilla.mozilla.org_1b9c35d5_20250119_110906.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

## Related documentation

* [Creating an account](https://bmo.readthedocs.io/en/latest/myaccount.html)
# Access Denied

| You are not authorized to access bug 1606610. To see this bug, you must first [log in to an account](/show_bug.cgi?id=1606610&GoAheadAndLogIn=1) with the appropriate permissions. |
| --- |

Please press **Back** and try again.



=== Content from www.mozilla.org_b9d29143_20250119_110907.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2020-26

## Security Vulnerabilities fixed in Thunderbird 68.10.0

Announced
June 30, 2020
Impact
high
Products
Thunderbird
Fixed in

* Thunderbird 68.10

*In general, these flaws cannot be exploited through email in the Thunderbird product because scripting is disabled when reading mail, but are potentially risks in browser or browser-like contexts.*

#### [#CVE-2020-12417: Memory corruption due to missing sign-extension for ValueTags on ARM64](#CVE-2020-12417)

Reporter
Deian Stefan
Impact
high
##### Description

Due to confusion about ValueTags on JavaScript Objects, an object may pass through the type barrier, resulting in memory corruption and a potentially exploitable crash.
*Note: this issue only affects Firefox on ARM64 platforms.*

##### References

* [Bug 1640737](https://bugzilla.mozilla.org/show_bug.cgi?id=1640737)

#### [#CVE-2020-12418: Information disclosure due to manipulated URL object](#CVE-2020-12418)

Reporter
Marcin 'Icewall' Noga of Cisco Talos
Impact
high
##### Description

Manipulating individual parts of a URL object could have caused an out-of-bounds read, leaking process memory to malicious JavaScript.

##### References

* [Bug 1641303](https://bugzilla.mozilla.org/show_bug.cgi?id=1641303)

#### [#CVE-2020-12419: Use-after-free in nsGlobalWindowInner](#CVE-2020-12419)

Reporter
worcester12345
Impact
high
##### Description

When processing callbacks that occurred during window flushing in the parent process, the associated window may die; causing a use-after-free condition. This could have led to memory corruption and a potentially exploitable crash.

##### References

* [Bug 1643874](https://bugzilla.mozilla.org/show_bug.cgi?id=1643874)

#### [#CVE-2020-12420: Use-After-Free when trying to connect to a STUN server](#CVE-2020-12420)

Reporter
Byron Campen
Impact
high
##### Description

When trying to connect to a STUN server, a race condition could have caused a use-after-free of a pointer, leading to memory corruption and a potentially exploitable crash.

##### References

* [Bug 1643437](https://bugzilla.mozilla.org/show_bug.cgi?id=1643437)

#### [#CVE-2020-15646: Automatic account setup leaks Microsoft Exchange login credentials](#CVE-2020-15646)

Reporter
Magnus Melin
Impact
high
##### Description

If an attacker intercepts Thunderbird's initial attempt to perform automatic account setup using the Microsoft Exchange autodiscovery mechanism, and the attacker sends a crafted response, then Thunderbird sends username and password over https to a server controlled by the attacker.

##### References

* [Bug 1606610](https://bugzilla.mozilla.org/show_bug.cgi?id=1606610)

#### [#CVE-2020-12421: Add-On updates did not respect the same certificate trust rules as software updates](#CVE-2020-12421)

Reporter
Chuck Harmston, Robert Hardy
Impact
moderate
##### Description

When performing add-on updates, certificate chains terminating in non-built-in-roots were rejected (even if they were legitimately added by an administrator.) This could have caused add-ons to become out-of-date silently without notification to the user.

##### References

* [Bug 1308251](https://bugzilla.mozilla.org/show_bug.cgi?id=1308251)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_00c80686_20250119_130610.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1643437)
* [XML](/show_bug.cgi?ctype=xml&id=1643437)

Closed
[Bug 1643437](/show_bug.cgi?id=1643437)
(CVE-2020-12420)

Opened 5 years ago
Closed 5 years ago

# Crash in [@ nr\_ice\_component\_process\_incoming\_check]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash in [@ nr\_ice\_component\_process\_incoming\_check]

## Categories

### (Core :: WebRTC: Networking, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=WebRTC%3A%20Networking#WebRTC%3A%20Networking)

WebRTC: Networking
▾

Core :: WebRTC: Networking
Bugs in the networking portions of WebRTC (PeerConnection dataChannels, SCTP, DTLS, SRTP, ICE, TURN, STUN, etc)
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=WebRTC%3A%20Networking&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=WebRTC%3A%20Networking&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=WebRTC%3A%20Networking)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

S2

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla79

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr68 | [78+](/buglist.cgi?f1=cf_tracking_firefox_esr68&o1=equals&v1=78%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr68&o1=equals&v1=fixed) |
| firefox-esr78 | [78+](/buglist.cgi?f1=cf_tracking_firefox_esr78&o1=equals&v1=78%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr78&o1=equals&v1=fixed) |
| firefox77 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox77&o1=equals&v1=wontfix) |
| firefox78 | [+](/buglist.cgi?f1=cf_tracking_firefox78&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox78&o1=equals&v1=fixed) |
| firefox79 | [+](/buglist.cgi?f1=cf_tracking_firefox79&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox79&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr68 | 78+ | fixed |
| firefox-esr78 | 78+ | fixed |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox77 |  | wontfix |
| firefox78 | + | fixed |
| firefox79 | + | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: bwc, Assigned: bwc)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/3e201149abea356acc9bb6f0eea8b5a0?d=mm&size=40)  [bwc](/user_profile?user_id=478411)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/3e201149abea356acc9bb6f0eea8b5a0?d=mm&size=40)  [bwc](/user_profile?user_id=478411)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/3e201149abea356acc9bb6f0eea8b5a0?d=mm&size=40)  [bwc](/user_profile?user_id=478411)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

6 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[1644477](/show_bug.cgi?id=1644477 "RESOLVED FIXED - Candidate pair insertion code has readability issues")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=1643437&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1643437)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1643446](/show_bug.cgi?id=1643446 "RESOLVED DUPLICATE - Crash in [@ nr_ice_component_nominated_pair]")

## Details

### (Keywords: crash, csectype-uaf, sec-high, Whiteboard: [adv-main78+r][adv-esr68.10+r][sec-survey])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2020-12420

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main78+r][adv-esr68.10+r][sec-survey]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ nr\_ice\_component\_process\_incoming\_check ]](https://crash-stats.mozilla.org/signature/?signature=nr_ice_component_process_incoming_check)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [Bug 1643437: (Copy of patch on cover bug) Make candidate pair insertion code easier to read/understand.](/attachment.cgi?id=9155334)  [5 years ago](#c5)  [Byron Campen [:bwc]](/user_profile?user_id=478411)   47 bytes, text/x-phabricator-request | dveditz : [sec-approval+](#c7 "5 years ago") | [Details](/attachment.cgi?id=9155334&action=edit) | [Review](/attachment.cgi?id=9155334) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1643437#c0)• 5 years ago |
|  | |

This bug is for crash report [bp-54620aeb-8b4a-4d7d-ac49-122e50200604](https://crash-stats.mozilla.org/report/index/54620aeb-8b4a-4d7d-ac49-122e50200604).

Top 10 frames of crashing thread:

```
0 xul.dll nr_ice_component_process_incoming_check media/mtransport/third_party/nICEr/src/ice/ice_component.c:905
1 xul.dll nr_ice_component_stun_server_cb media/mtransport/third_party/nICEr/src/ice/ice_component.c:1003
2 xul.dll nr_stun_server_process_request media/mtransport/third_party/nICEr/src/stun/stun_server_ctx.c:327
3 xul.dll nr_ice_socket_readable_cb media/mtransport/third_party/nICEr/src/ice/ice_socket.c:120
4 xul.dll mozilla::NrUdpSocketIpc::recv_callback_s media/mtransport/nr_socket_prsock.cpp:1594
5 xul.dll static std::_Invoker_pmf_pointer::_Call<void
6 xul.dll mozilla::runnable_args_memfn<RefPtr<mozilla::NrUdpSocketIpc>, void  media/mtransport/runnable_utils.h:121
7 xul.dll mozilla::detail::runnable_args_base<mozilla::detail::NoResult>::Run media/mtransport/runnable_utils.h:41
8 xul.dll nsThread::ProcessNextEvent xpcom/threads/nsThread.cpp:1211
9 xul.dll NS_ProcessNextEvent xpcom/threads/nsThreadUtils.cpp:501

```

Seems to be happening on all release channels.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1643437#a267_406194)• 5 years ago |

Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1643437#a346_1689)• 5 years ago |

Group: core-security → media-core-security

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1643437#c1)• 5 years ago |
|  | |

It is a little hard to determine what is going on here, since it looks like the stack is not quite complete, but one possibility is that |pair| is a dangling pointer.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1643437#c2)• 5 years ago |
|  | |

This might be a more complete stack from esr:

<https://crash-stats.mozilla.org/report/index/6bc56480-100f-4d51-97fb-d1a6a0200602>

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1643437#c3)• 5 years ago |
|  | |

So I definitely see a problem with peer (ie, remote) candidates here:

<https://searchfox.org/mozilla-central/rev/598e50d2c3cd81cd616654f16af811adceb08f9f/media/mtransport/third_party/nICEr/src/ice/ice_component.c#961-969>

If nr\_ice\_component\_insert\_pair fails here, the candidate pair stays in the check\_list: <https://searchfox.org/mozilla-central/rev/598e50d2c3cd81cd616654f16af811adceb08f9f/media/mtransport/third_party/nICEr/src/ice/ice_component.c#1712>

Then, nr\_ice\_component\_process\_incoming\_check will destroy the peer candidate here:

<https://searchfox.org/mozilla-central/rev/598e50d2c3cd81cd616654f16af811adceb08f9f/media/mtransport/third_party/nICEr/src/ice/ice_component.c#979>

This could lead to a UAF here, which is the same place we see an esr crash in [comment 2](/show_bug.cgi?id=1643437#c2 "RESOLVED FIXED - Crash in [@ nr_ice_component_process_incoming_check]"): <https://searchfox.org/mozilla-central/rev/598e50d2c3cd81cd616654f16af811adceb08f9f/media/mtransport/third_party/nICEr/src/ice/ice_component.c#795>

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1643437#c4)• 5 years ago |
|  | |

Filed cover [bug 1644477](/show_bug.cgi?id=1644477 "RESOLVED FIXED - Candidate pair insertion code has readability issues").

Depends on: [1644477](/show_bug.cgi?id=1644477 "RESOLVED FIXED - Candidate pair insertion code has readability issues")

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1643437#c5)• 5 years ago |
|  | |

Attached file
[Bug 1643437: (Copy of patch on cover bug) Make candidate pair insertion code easier to read/understand.](attachment.cgi?id=9155334)
— [Details](attachment.cgi?id=9155334&action=edit)

Includes removing an error code for a function that never fails, and removing

an error return when the function successfully did what it said it would.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1643437#c6)• 5 years ago |
|  | |

Comment on [attachment 9155334](/attachment.cgi?id=9155334 "Bug 1643437: (Copy of patch on cover bug) Make candidate pair insertion code easier to read/understand.") [[details]](/attachment.cgi?id=9155334&action=edit "Bug 1643437: (Copy of patch on cover bug) Make candidate pair insertion code easier to read/understand.")

[Bug 1643437](/show_bug.cgi?id=1643437 "RESOLVED FIXED - Crash in [@ nr_ice_component_process_incoming_check]"): (Copy of patch on cover bug) Make candidate pair insertion code easier to read/understand.

### Security Approval Request

* **How easily could an exploit be constructed based on the patch?**: Probably pretty difficult, since it does not look like a sec-bug fix.
* **Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?**: No
* **Which older supported branches are affected by this flaw?**: all
* **If not all supported branches, which bug introduced the flaw?**: None
* **Do you have backports for the affected branches?**: No
* **If not, how different, hard to create, and risky will they be?**: Pretty easy.
* **How likely is this patch to cause regressions; how much testing does it need?**: Unlikely to cause regressions.
[Attachment #9155334](/attachment.cgi?id=9155334&action=edit "Bug 1643437: (Copy of patch on cover bug) Make candidate pair insertion code easier to read/understand.") -
Flags: sec-approval?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1643437#a459858_1689)• 5 years ago |

[status-firefox77](/buglist.cgi?f1=cf_status_firefox77&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox77&o1=equals&v1=wontfix)
[status-firefox78](/buglist.cgi?f1=cf_status_firefox78&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox78&o1=equals&v1=affected)
[status-firefox79](/buglist.cgi?f1=cf_status_firefox79&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox79&o1=equals&v1=affected)
[status-firefox-esr68](/buglist.cgi?f1=cf_status_firefox_esr68&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr68&o1=equals&v1=affected)
[tracking-firefox78](/buglist.cgi?f1=cf_tracking_firefox78&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox78&o1=equals&v1=%2B)
[tracking-firefox79](/buglist.cgi?f1=cf_tracking_firefox79&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox79&o1=equals&v1=%2B)
[tracking-firefox-esr68](/buglist.cgi?f1=cf_tracking_firefox_esr68&o1=isnotempty):
--- → [78+](/buglist.cgi?f1=cf_tracking_firefox_esr68&o1=equals&v1=78%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1643437#c7)• 5 years ago |
|  | |

Comment on [attachment 9155334](/attachment.cgi?id=9155334 "Bug 1643437: (Copy of patch on cover bug) Make candidate pair insertion code easier to read/understand.") [[details]](/attachment.cgi?id=9155334&action=edit "Bug 1643437: (Copy of patch on cover bug) Make candidate pair insertion code easier to read/understand.")

[Bug 1643437](/show_bug.cgi?id=1643437 "RESOLVED FIXED - Crash in [@ nr_ice_component_process_incoming_check]"): (Copy of patch on cover bug) Make candidate pair insertion code easier to read/understand.

sec-approval+

[Attachment #9155334](/attachment.cgi?id=9155334&action=edit "Bug 1643437: (Copy of patch on cover bug) Make candidate pair insertion code easier to read/understand.") -
Flags: sec-approval? → sec-approval+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1643437#c8)• 5 years ago |
|  | |

Looks like cover bug landed successfully. Please nominate it for Beta and ESR68 approval when you get a chance. It grafts cleanly to both as-landed.

Group: media-core-security → core-security-releaseStatus: NEW → RESOLVEDClosed: 5 years ago
[status-firefox79](/buglist.cgi?f1=cf_status_firefox79&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox79&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox79&o1=equals&v1=fixed)
[status-firefox-esr78](/buglist.cgi?f1=cf_status_firefox_esr78&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr78&o1=equals&v1=affected)
[tracking-firefox-esr78](/buglist.cgi?f1=cf_tracking_firefox_esr78&o1=isnotempty):
--- → [78+](/buglist.cgi?f1=cf_tracking_firefox_esr78&o1=equals&v1=78%2B)Flags: needinfo?(docfaraday)Resolution: --- → FIXEDTarget Milestone: --- → mozilla79

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1643437#c9)• 5 years ago |
|  | |

Done.

Flags: needinfo?(docfaraday)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1643437#c10)• 5 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1643437&comment_id=14884943 "1 revision") |
|  | |

I am not sure that this is fixed just yet; we'll have to wait and see whether [bug 1644477](/show_bug.cgi?id=1644477 "RESOLVED FIXED - Candidate pair insertion code has readability issues") solved the problem.

Status: RESOLVED → REOPENEDResolution: FIXED → ---

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1643437#c11)• 5 years ago |
|  | |

The patch landed in nightly and beta is affected.

:bwc, is this bug important enough to require an uplift?

If not please set `status_beta` to `wontfix`.

For more information, please visit [auto\_nag documentation](https://wiki.mozilla.org/Release_Management/autonag#uplift_beta.py).

Flags: needinfo?(docfaraday)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1643437#c12)• 5 years ago |
|  | |

Flags are being set in other bugs.

Flags: needinfo?(docfaraday)

|  | [Julien Cristau [:jcristau]](/user_profile?user_id=580382) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1643437#c13)• 5 years ago |
|  | |

Seems like we should mark this fixed.

[status-firefox78](/buglist.cgi?f1=cf_status_firefox78&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox78&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox78&o1=equals&v1=fixed)
[status-firefox-esr68](/buglist.cgi?f1=cf_status_firefox_esr68&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr68&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr68&o1=equals&v1=fixed)
[status-firefox-esr78](/buglist.cgi?f1=cf_status_firefox_esr78&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr78&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr78&o1=equals&v1=fixed)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1643437#c14)• 5 years ago |
|  | |

It looks like [bug 1644477](/show_bug.cgi?id=1644477 "RESOLVED FIXED - Candidate pair insertion code has readability issues") probably solved this, yes. I'm going to mark this fixed for now.

Status: REOPENED → RESOLVEDClosed: 5 years ago → 5 years agoResolution: --- → FIXED

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1643437#a1638629_578488)• 5 years ago |

Whiteboard: [adv-main78+r]

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1643437#a1640677_578488)• 5 years ago |

Whiteboard: [adv-main78+r] → [adv-main78+r][adv-esr68.10+r]

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1643437#a1718677_478411)• 5 years ago |

See Also: → [1643446](/show_bug.cgi?id=1643446 "RESOLVED DUPLICATE - Crash in [@ nr_ice_component_nominated_pair]")

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1643437#c15)• 5 years ago |
|  | |

As part of a security bug pattern analysis, we are requesting your help with a high level analysis of this bug. It is our hope to develop static analysis (or potentially runtime/dynamic analysis) in the future to identify classes of bugs.

Please visit [this google form](https://docs.google.com/forms/d/e/1FAIpQLSe9uRXuoMK6tRglbNL5fpXbun_oEb6_xC2zpuE_CKA_GUjrvA/viewform?usp=pp_url&entry.2124261401=https%3A%2F%2Fbugzilla.mozilla.org%2Fshow_bug.cgi%3Fid%3D1643437) to reply.

Flags: needinfo?(docfaraday)Whiteboard: [adv-main78+r][adv-esr68.10+r] → [adv-main78+r][adv-esr68.10+r][sec-survey]

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1643437#a1728733_478411)• 5 years ago |

Flags: needinfo?(docfaraday)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1643437#a2023136_578488)• 5 years ago |

Alias: CVE-2020-12420

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1643437#a17047613_1689)• 4 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1643437&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Byron Campen [:bwc]](/user_profile?user_id=478411)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


