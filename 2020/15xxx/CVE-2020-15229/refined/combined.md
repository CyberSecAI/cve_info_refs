=== Content from github.com_17dbee7c_20250119_131821.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapptainer%2Fsingularity%2Fsecurity%2Fadvisories%2FGHSA-7gcp-w6ww-2xv9)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapptainer%2Fsingularity%2Fsecurity%2Fadvisories%2FGHSA-7gcp-w6ww-2xv9)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=apptainer%2Fsingularity)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[apptainer](/apptainer)
/
**[singularity](/apptainer/singularity)**
Public

* [Notifications](/login?return_to=%2Fapptainer%2Fsingularity) You must be signed in to change notification settings
* [Fork
  427](/login?return_to=%2Fapptainer%2Fsingularity)
* [Star
   2.5k](/login?return_to=%2Fapptainer%2Fsingularity)

* [Code](/apptainer/singularity)
* [Issues
  0](/apptainer/singularity/issues)
* [Pull requests
  0](/apptainer/singularity/pulls)
* [Actions](/apptainer/singularity/actions)
* [Wiki](/apptainer/singularity/wiki)
* [Security](/apptainer/singularity/security)
* [Insights](/apptainer/singularity/pulse)

Additional navigation options

* [Code](/apptainer/singularity)
* [Issues](/apptainer/singularity/issues)
* [Pull requests](/apptainer/singularity/pulls)
* [Actions](/apptainer/singularity/actions)
* [Wiki](/apptainer/singularity/wiki)
* [Security](/apptainer/singularity/security)
* [Insights](/apptainer/singularity/pulse)

# Path traversal and files overwrite with unsquashfs

High

[dtrudg](/dtrudg)
published
GHSA-7gcp-w6ww-2xv9
Oct 13, 2020

## Package

singularity

## Affected versions

3.1.1 - 3.6.3

## Patched versions

3.6.4

## Description

### Impact

Due to insecure handling of path traversal and the lack of path sanitization within `unsquashfs` (a distribution provided utility used by Singularity), it is possible to overwrite/create any files on the host filesystem during the extraction of a crafted squashfs filesystem.

Squashfs extraction occurs automatically for unprivileged execution of Singularity (either `--without-suid` installation or with `allow setuid = no`) when a user attempts to run an image which:

* is a local SIF image or a single file containing a squashfs filesystem
* is pulled from remote sources `library://` or `shub://`

Image build is also impacted in a more serious way as it is often performed by the root user, allowing an attacker to overwrite/create files leading to a system compromise. Bootstrap methods `library`, `shub` and `localimage` trigger a squashfs extraction.

### CVSS

Score: 8.2 (High)

String: CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:H/A:N

### Patches

This issue is addressed in Singularity 3.6.4.

All users are advised to upgrade to 3.6.4 especially if they use Singularity mainly for building image as root user.

### Workarounds

There is no solid workaround except to temporarily avoid use of unprivileged mode with single file images, in favor of sandbox images instead. Regarding image build, temporarily avoid building from `library` and `shub` sources, and as much as possible use `--fakeroot` or a VM to limit potential impact.

### For more information

General questions about the impact of the advisory / changes made in the 3.6.0 release can be asked in the:

* [Singularity Slack Channel](https://bit.ly/2m0g3lX)
* [Singularity Mailing List](https://groups.google.com/a/lbl.gov/forum/??sdf%7Csort:date#!forum/singularity)

Any sensitive security concerns should be directed to: security@sylabs.io

See our Security Policy here: <https://sylabs.io/security-policy>

### Severity

High

### CVE ID

CVE-2020-15229

### Weaknesses

No CWEs

### Credits

* [![@cclerget](https://avatars.githubusercontent.com/u/3274134?s=40&v=4)](/cclerget)
  [cclerget](/cclerget)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from bugzilla.suse.com_a3617b06_20250119_131823.html ===


| Bugzilla – Bug 1177901 | VUL-0: CVE-2020-15229: singularity: path traversal and files overwrite with unsquashfs | Last modified: 2023-07-11 15:36:04 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1177901)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 1177901**](show_bug.cgi?id=1177901)
(CVE-2020-15229)
- VUL-0: CVE-2020-15229: singularity: path traversal and files overwrite with unsquashfs

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-0: CVE-2020-15229: singularity: path traversal and files overwrite with u...

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2020-15229 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | openSUSE Distribution | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | openSUSE | | [Component:](describecomponents.cgi?product=openSUSE Distribution "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Security ([show other bugs](buglist.cgi?component=Security&product=openSUSE%20Distribution&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | Leap 15.1 | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other Other | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P3 - Medium **Severity**: Normal ([vote](page.cgi?id=voting/user.html&bug_id=1177901#vote_1177901)) | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Egbert Eich | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Security Team bot | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") | <https://smash.suse.de/issue/269188/> | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2020-10-19 15:58 UTC by Wolfgang Frisch | | --- | --- | | Modified: | 2023-07-11 15:36 UTC ([History](show_activity.cgi?id=1177901)) | | CC List: | 3 users (show)  ana.guerrero burnus forgotten\_38MyQr1Jd0 | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | Security Response Team | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=1177901) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=1177901&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=1177901&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1177901#c0)  Wolfgang Frisch   2020-10-19 15:58:53 UTC  ``` CVE-2020-15229  Singularity (an open source container platform) from version 3.1.1 through 3.6.3 has a vulnerability. Due to insecure handling of path traversal and the lack of path sanitization within `unsquashfs`, it is possible to overwrite/create any files on the host filesystem during the extraction with a crafted squashfs filesystem. The extraction occurs automatically for unprivileged (either installation or with `allow setuid = no`) run of Singularity when a user attempt to run an image which is a local SIF image or a single file containing a squashfs filesystem and is coming from remote sources `library://` or `shub://`. Image build is also impacted in a more serious way as it can be used by a root user, allowing an attacker to overwrite/create files leading to a system compromise, so far bootstrap methods `library`, `shub` and `localimage` are triggering the squashfs extraction. This issue is addressed in Singularity 3.6.4. All users are advised to upgrade to 3.6.4 especially if they use Singularity mainly for building image as root user. There is no solid workaround except to temporary avoid to use unprivileged mode with single file images in favor of sandbox images instead. Regarding image build, temporary avoid to build from `library` and `shub` sources and as much as possible use `--fakeroot` or a VM for that.  Upstream references: <https://github.com/hpcng/singularity/security/advisories/GHSA-7gcp-w6ww-2xv9> <https://github.com/hpcng/singularity/blob/v3.6.4/CHANGELOG.md#security-related-fixes>  Upstream patches: <https://github.com/hpcng/singularity/pull/5611> <https://github.com/hpcng/singularity/commit/eba3dea260b117198fdb6faf41f2482ab2f8d53e>  References: <https://bugzilla.redhat.com/show_bug.cgi?id=1888811> <http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2020-15229> <http://people.canonical.com/~ubuntu-security/cve/2020/CVE-2020-15229.html> <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-15229> ``` [Comment 1](show_bug.cgi?id=1177901#c1)  Wolfgang Frisch   2020-10-19 16:01:32 UTC  ``` Affected: openSUSE Leap 15.1 openSUSE Leap 15.2 openSUSE Tumbleweed ``` [Comment 2](show_bug.cgi?id=1177901#c2)  OBSbugzilla Bot   2020-10-23 16:50:06 UTC  ``` This is an autogenerated message for OBS integration: This bug (1177901) was mentioned in <https://build.opensuse.org/request/show/843644> 15.1 / singularity <https://build.opensuse.org/request/show/843645> 15.2 / singularity ``` [Comment 3](show_bug.cgi?id=1177901#c3)  Swamp Workflow Management   2020-10-29 23:25:39 UTC  ``` openSUSE-SU-2020:1770-1: An update that fixes one vulnerability is now available.  Category: security (important) Bug References: 1177901 CVE References: CVE-2020-15229 JIRA References:  Sources used: openSUSE Leap 15.2 (src):    singularity-3.6.4-lp152.2.9.1 ``` [Comment 4](show_bug.cgi?id=1177901#c4)  Swamp Workflow Management   2020-10-29 23:27:40 UTC  ``` openSUSE-SU-2020:1769-1: An update that fixes one vulnerability is now available.  Category: security (important) Bug References: 1177901 CVE References: CVE-2020-15229 JIRA References:  Sources used: openSUSE Leap 15.1 (src):    singularity-3.6.4-lp151.2.12.1 ``` [Comment 5](show_bug.cgi?id=1177901#c5)  Swamp Workflow Management   2020-11-02 05:20:54 UTC  ``` openSUSE-SU-2020:1814-1: An update that fixes one vulnerability is now available.  Category: security (important) Bug References: 1177901 CVE References: CVE-2020-15229 JIRA References:  Sources used: openSUSE Backports SLE-15-SP2 (src):    singularity-3.6.4-bp152.2.12.1 ``` [Comment 7](show_bug.cgi?id=1177901#c7)  Egbert Eich   2023-07-11 15:36:04 UTC  ``` Fixed a long time ago already. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=1177901)
* - [XML](show_bug.cgi?ctype=xml&id=1177901)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=1177901)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D1177901)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)



=== Content from avatars.githubusercontent.com_879ba437_20250119_131816.html ===
�PNG

   
IHDR  �  �   �.�b  �IDATx����m�@F�Ǔ{�"ʠ:�ኼ���:Ba&����I���6������ 0�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� b$�� v@�� ۴K�~L������� �ɿ�������H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A쀄m� ��s?VO����1Vo�\*]`���z�%���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A쀄�cΥs?����|L��M�����H�ͣ�e>c���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; a[=����X=�/; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A쀄�c�����H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; A���H; �+  ����"�sKA    IEND�B`�

=== Content from github.com_4146b810_20250119_112554.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapptainer%2Fsingularity%2Fblob%2Fv3.6.4%2FCHANGELOG.md)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapptainer%2Fsingularity%2Fblob%2Fv3.6.4%2FCHANGELOG.md)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=apptainer%2Fsingularity)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[apptainer](/apptainer)
/
**[singularity](/apptainer/singularity)**
Public

* [Notifications](/login?return_to=%2Fapptainer%2Fsingularity) You must be signed in to change notification settings
* [Fork
  427](/login?return_to=%2Fapptainer%2Fsingularity)
* [Star
   2.5k](/login?return_to=%2Fapptainer%2Fsingularity)

* [Code](/apptainer/singularity/tree/v3.6.4)
* [Issues
  0](/apptainer/singularity/issues)
* [Pull requests
  0](/apptainer/singularity/pulls)
* [Actions](/apptainer/singularity/actions)
* [Wiki](/apptainer/singularity/wiki)
* [Security](/apptainer/singularity/security)
* [Insights](/apptainer/singularity/pulse)

Additional navigation options

* [Code](/apptainer/singularity/tree/v3.6.4)
* [Issues](/apptainer/singularity/issues)
* [Pull requests](/apptainer/singularity/pulls)
* [Actions](/apptainer/singularity/actions)
* [Wiki](/apptainer/singularity/wiki)
* [Security](/apptainer/singularity/security)
* [Insights](/apptainer/singularity/pulse)

## Files

 v3.6.4
## Breadcrumbs

1. [singularity](/apptainer/singularity/tree/v3.6.4)
/
# CHANGELOG.md

Copy path Blame  Blame
## Latest commit

## History

[History](/apptainer/singularity/commits/v3.6.4/CHANGELOG.md)647 lines (529 loc) · 34 KB v3.6.4
## Breadcrumbs

1. [singularity](/apptainer/singularity/tree/v3.6.4)
/
# CHANGELOG.md

Top
## File metadata and controls

* Preview
* Code
* Blame

647 lines (529 loc) · 34 KB[Raw](https://github.com/apptainer/singularity/raw/refs/tags/v3.6.4/CHANGELOG.md)

*With the release of `v3.0.0`, we're introducing a new changelog format in an attempt to consolidate the information presented in the changelog. The new changelog is reduced in scope to only documenting functionality changes from version to version. This ensures that the changelog is as useful as it can be. Changes which should be documented include:*

* *Renamed commands*
* *Deprecated / removed commands*
* *Changed defaults / behaviors*
* *Migration guidance*
* *New features / functionalities*

*The old changelog can be found in the `release-2.6` branch*

# v3.6.4 - [2020-10-13]

## Security related fixes

Singularity 3.6.4 addresses the following security issue.

* [CVE-2020-15229](https://github.com/hpcng/singularity/security/advisories/GHSA-7gcp-w6ww-2xv9):
  Due to insecure handling of path traversal and the lack of path
  sanitization within unsquashfs (a distribution provided utility
  used by Singularity), it is possible to overwrite/create files on
  the host filesystem during the extraction of a crafted squashfs
  filesystem. Affects unprivileged execution of SIF / SquashFS
  images, and image builds from SIF / SquashFS images.

## Bug Fixes

* Update scs-library-client to support `library://` backends using an
  3rd party S3 object store that does not strictly conform to v4
  signature spec.

# v3.6.3 - [2020-09-15]

## Security related fixes

Singularity 3.6.3 addresses the following security issues.

* [CVE-2020-25039](https://github.com/hpcng/singularity/security/advisories/GHSA-w6v2-qchm-grj7):
  When a Singularity action command (run, shell, exec) is run with
  the fakeroot or user namespace option, Singularity will extract a
  container image to a temporary sandbox directory. Due to insecure
  permissions on the temporary directory it is possible for any user
  with access to the system to read the contents of the
  image. Additionally, if the image contains a world-writable file
  or directory, it is possible for a user to inject arbitrary
  content into the running container.
* [CVE-2020-25040](https://github.com/hpcng/singularity/security/advisories/GHSA-jv9c-w74q-6762):
  When a Singularity command that results in a container build
  operation is executed, it is possible for a user with access to
  the system to read the contents of the image during the
  build. Additionally, if the image contains a world-writable file
  or directory, it is possible for a user to inject arbitrary
  content into the running build, which in certain circumstances may
  enable arbitrary code execution during the build and/or when the
  built container is run.

## Bug Fixes

* Add CAP\_MKNOD in capability bounding set of RPC to fix issue with
  cryptsetup when decrypting image from within a docker container.
* Fix decryption issue when using both IPC and PID namespaces.
* Fix unsupported builtins panic from shell interpreter and add umask
  support for definition file scripts.
* Do not load keyring in prepare\_linux if ECL not enabled.
* Ensure sandbox option overrides remote build destination.

# v3.6.2 - [2020-08-25]

## New features / functionalities

* Add --force option to `singularity delete` for non-interactive
  workflows.

## Change defaults / behaviours

* Default to current architecture for `singularity delete`.

## Bug Fixes

* Respect current remote for `singularity delete` command.
* Allow `rw` as a (noop) bind option.
* Fix capability handling regression in overlay mount.
* Fix LD\_LIBRARY\_PATH environment override regression with
  `--nv/--rocm`.
* Fix environment variable duplication within singularity engine.
* Use `-user-xattrs` for unsquashfs to avoid error with rootless
  extraction using unsquashfs 3.4 (Ubuntu 20.04).
* Correct `--no-home` message for 3.6 CWD behavior.
* Don't fail if parent of cache dir not accessible.
* Fix tests for Go 1.15 Ctty handling.
* Fix additional issues with test images on ARM64.
* Fix FUSE e2e tests to use container ssh\_config.

# v3.6.1 - [2020-07-21]

## New features / functionalities

* Support compilation with `FORTIFY_SOURCE=2` and build in `pie`
  mode with `fstack-protector` enabled (#5433).

## Bug Fixes

* Provide advisory message r.e. need for `upper` and `work` to
  exist in overlay images.
* Use squashfs mem and processor limits in squashfs gzip check.
* Ensure build destination path is not an empty string - do
  not overwrite CWD.
* Don't unset PATH when interpreting legacy /environment files.

# v3.6.0 - [2020-07-14]

## Security related fixes

Singularity 3.6.0 introduces a new signature format for SIF images,
and changes to the signing / verification code to address:

* [CVE-2020-13845](https://cve.mitre.org/cgi-bin/cvename.cgi?name=2020-13845)
  In Singularity 3.x versions below 3.6.0, issues allow the ECL to
  be bypassed by a malicious user.
* [CVE-2020-13846](https://cve.mitre.org/cgi-bin/cvename.cgi?name=2020-13846)
  In Singularity 3.5 the `--all / -a` option to `singularity verify`
  returns success even when some objects in a SIF container are not
  signed, or cannot be verified.
* [CVE-2020-13847](https://cve.mitre.org/cgi-bin/cvename.cgi?name=2020-13847)
  In Singularity 3.x versions below 3.6.0, Singularity's sign and
  verify commands do not sign metadata found in the global header or
  data object descriptors of a SIF file, allowing an attacker to
  cause unexpected behavior. A signed container may verify
  successfully, even when it has been modified in ways that could be
  exploited to cause malicious behavior.

Please see the published security advisories at
<https://github.com/hpcng/singularity/security/advisories> for full
detail of these security issues.

Note that the new signature format is necessarily incompatible with
Singularity < 3.6.0 - e.g. Singularity 3.5.3 cannot verify containers
signed by 3.6.0.

We thank Tru Huynh for a report that led to the review of, and changes to,
the signature implementation.

## New features / functionalities

* Singularity now supports the execution of minimal Docker/OCI
  containers that do not contain `/bin/sh`, e.g. `docker://hello-world`.
* A new cache structure is used that is concurrency safe on a filesystem that
  supports atomic rename. *If you downgrade to Singularity 3.5 or older after
  using 3.6 you will need to run `singularity cache clean`.*
* A plugin system rework adds new hook points that will allow the
  development of plugins that modify behavior of the runtime. An image driver
  concept is introduced for plugins to support new ways of handling image and
  overlay mounts. *Plugins built for <=3.5 are not compatible with 3.6*.
* The `--bind` flag can now bind directories from a SIF or ext3 image into a
  container.
* The `--fusemount` feature to mount filesystems to a container via FUSE
  drivers is now a supported feature (previously an experimental hidden flag).
  This permits users to mount e.g. `sshfs` and `cvmfs` filesystems to the
  container at runtime.
* A new `-c/--config` flag allows an alternative `singularity.conf` to be
  specified by the `root` user, or all users in an unprivileged installation.
* A new `--env` flag allows container environment variables to be set via the
  Singularity command line.
* A new `--env-file` flag allows container environment variables to be set from
  a specified file.
* A new `--days` flag for `cache clean` allows removal of items older than a
  specified number of days. Replaces the `--name` flag which is not generally
  useful as the cache entries are stored by hash, not a friendly name.
* A new '--legacy-insecure' flag to `verify` allows verification of SIF signatures
  in the old, insecure format.
* A new '-l / --logs' flag for `instance list` that shows the paths
  to instance STDERR / STDOUT log files.
* The `--json` output of `instance list` now include paths to STDERR
  / STDOUT log files.

## Changed defaults / behaviours

* New signature format (see security fixes above).
* Environment variables prefixed with `SINGULARITYENV_` always take
  precedence over variables without `SINGULARITYENV_` prefix.
* The `%post` build section inherits environment variables from the base image.
* `%files from ...` will now follow symlinks for sources that are directly
  specified, or directly resolved from a glob pattern. It will not follow
  symlinks found through directory traversal. This mirrors Docker multi-stage
  COPY behaviour.
* Restored the CWD mount behaviour of v2, implying that CWD path is not recreated
  inside container and any symlinks in the CWD path are not resolved anymore to
  determine the destination path inside container.
* The `%test` build section is executed the same manner as `singularity test image`.
* `--fusemount` with the `container:` default directive will foreground the FUSE
  process. Use `container-daemon:` for previous behavior.
* Fixed spacing of `singularity instance list` to be dynamically changing based off of
  input lengths instead of fixed number of spaces to account for long instance names.

## Deprecated / removed commands

* Removed `--name` flag for `cache clean`; replaced with `--days`.
* Deprecate `-a / --all` option to `sign/verify` as new signature
  behavior makes this the default.

## Bug Fixes

* Don't try to mount `$HOME` when it is `/` (e.g. `nobody` user).
* Process `%appinstall` sections in order when building from a definition file.
* Ensure `SINGULARITY_CONTAINER`, `SINGULARITY_ENVIRONMENT` and the custom
  shell prompt are set inside a container.
* Honor insecure registry settings from `/etc/containers/registries.conf`.
* Fix `http_proxy` env var handling in `yum` bootstrap builds.
* Disable log colorization when output location is not a terminal.
* Check encryption keys are usable before beginning an encrypted build.
* Allow app names with non-alphanumeric characters.
* Use the `base` metapackage for arch bootstrap builds - arch no longer has a
  `base` group.
* Ensure library client messages are logged with `--debug`.
* Do not mount `$HOME` with `--fakeroot --contain`.
* Fall back to underlay automatically when using a sandbox on GPFS.
* Fix Ctrl-Z handling - propagation of signal.

# v3.5.3 - [2020.02.18]

## Changed defaults / behaviours

The following minor behaviour changes have been made in 3.5.3 to allow
correct operation on CRAY CLE6, and correct an issue with multi-stage
image builds that was blocking use by build systems such as Spack:

* Container action scripts are no longer bound in from `etc/actions.d` on the
  host. They are created dynamically and inserted at container startup.
* `%files from ...` will no longer follow symlinks when copying between
  stages in a multi stage build, as symlinks should be copied so that they
  resolve identically in later stages. Copying `%files` from the host will
  still maintain previous behavior of following links.

## Bug Fixes

* Bind additional CUDA 10.2 libs when using the `--nv` option without
  `nvidia-container-cli`.
* Fix an NVIDIA persistenced socket bind error with `--writable`.
* Add detection of ceph to allow workarounds that avoid issues with
  sandboxes on ceph filesystems.
* Ensure setgid is inherited during make install.
* Ensure the root directory of a build has owner write permissions,
  regardless of the permissions in the bootstrap source.
* Fix a regression in `%post` and `%test` to honor the `-c` option.
* Fix an issue running `%post` when a container doesn't have
  `/etc/resolv.conf` or `/etc/hosts` files.
* Fix an issue with UID detection on RHEL6 when running instances.
* Fix a logic error when a sandbox image is in an overlay incompatible
  location, and both overlay and underlay are disabled globally.
* Fix an issue causing user namespace to always be used when `allow-setuid=no`
  was configured in a setuid installation.
* Always allow key IDs and fingerprints to be specified with or without a `0x`
  prefix when using `singularity keys`
* Fix an issue preventing joining an instance started with `--boot`.
* Provide a useful error message if an invalid library:// path is provided.
* Bring in multi-part upload client functionality that will address large
  image upload / proxied upload issues with a future update to Sylabs cloud.

In addition, numerous improvements have been made to the test suites, allowing
them to pass cleanly on a range of kernel versions and distributions that are
not covered by the open-source CI runs.

# v3.5.2 - [2019.12.17]

## [Security related fix](https://cve.mitre.org/cgi-bin/cvename.cgi?name=2019-19724)

* 700 permissions are enforced on `$HOME/.singularity` and `SINGULARITY_CACHEDIR`
  directories (CVE-2019-19724). Many thanks to Stuart Barkley for reporting this issue.

## Bug Fixes

* Fixes an issue preventing use of `.docker/config` for docker registry
  authentication.
* Fixes the `run-help` command in the unprivileged workflow.
* Fixes a regression in the `inspect` command to support older image formats.
* Adds a workaround for an EL6 kernel bug regarding shared bind mounts.
* Fixes caching of http(s) sources with conflicting filenames.
* Fixes a fakeroot sandbox build error on certain filesystems, e.g. lustre, GPFS.
* Fixes a fakeroot build failure to a sandbox in $HOME.
* Fixes a fakeroot build failure from a bad def file section script location.
* Fixes container execution errors when CWD is a symlink.
* Provides a useful warning r.e. possible fakeroot build issues when seccomp
  support is not available.
* Fixes an issue where the `--disable-cache` option was not being honored.
* Deprecated `--groupid` flag for `sign` and `verify`; replaced with `--group-id`.
* Removed useless flag `--url` for `sign`.

# v3.5.1 - [2019.12.05]

## New features / functionalities

A single feature has been added in the bugfix release, with specific
functionality:

* A new option `allow container encrypted` can be set to `no` in
  `singularity.conf` to prevent execution of encrypted containers.

## Bug Fixes

This point release addresses the following issues:

* Fixes a disk space leak when building from docker-archive.
* Makes container process SIGABRT return the expected code.
* Fixes the `inspect` command in unprivileged workflow.
* Sets an appropriate default umask during build stages, to avoid issues with
  very restrictive user umasks.
* Fixes an issue with build script content being consumed from STDIN.
* Corrects the behaviour of underlay with non-empty / symlinked CWD and absolute
  symlink binds targets.
* Fixes execution of containers when binding BTRFS filesystems.
* Fixes build / check failures for MIPS & PPC64.
* Ensures file ownership maintained when building image from sandbox.
* Fixes a squashfs mount error on kernel 5.4.0 and above.
* Fixes an underlay fallback problem, which prevented use of sandboxes on
  lustre filesystems.

# v3.5.0 - [2019.11.13]

## New features / functionalities

* New support for AMD GPUs via `--rocm` option added to bind ROCm devices and
  libraries into containers.
* Plugins can now modify Singularity behaviour with two mutators: CLI and
  Runtime.
* Introduced the `config global` command to edit `singularity.conf` settings
  from the CLI.
* Introduced the `config fakeroot` command to setup `subuid` and `subgid`
  mappings for `--fakeroot` from the Singularity CLI.

## Changed defaults / behaviours

* Go 1.13 adopted.
* Vendored modules removed from the Git tree, will be included in release tarballs.
* Singularity will now fail with an error if a requested bind mount cannot be
  made.
  + This is beneficial to fail fast in workflows where a task may fail a long
    way downstream if a bind mount is unavailable.
  + Any unavailable bind mount sources must be removed from
    `singularity.conf`.
* Docker/OCI image extraction now faithfully respects layer
  permissions.
  + This may lead to sandboxes that cannot be removed without
    modifying permissions.
  + `--fix-perms` option added to preserve old behaviour when
    building sandboxes.
  + Discussion issue for this change at: <https://github.com/sylabs/singularity/issues/4671>
* `Singularity>` prompt is always set when entering shell in a container.
* The current `umask` will be honored when building a SIF file.
* `instance exec` processes acquire cgroups set on `instance start`
* `--fakeroot` supports uid/subgid ranges >65536
* `singularity version` now reports semver compliant version
  information.

## Deprecated / removed commands

* Deprecated `--id` flag for `sign` and `verify`; replaced with `--sif-id`.

# v3.4.2 - [2019.10.08]

* This point release addresses the following issues:
  + Sets workable permissions on OCI -> sandbox rootless builds
  + Fallback correctly to user namespace for non setuid installation
  + Correctly handle the starter-suid binary for non-root installs
  + Creates CACHEDIR if it doesn't exist
  + Set apex loglevel for umoci to match singularity loglevel

# v3.4.1 - [2019.09.17]

* This point release addresses the following issues:
  + Fixes an issue where a PID namespace was always being used
  + Fixes compilation on non 64-bit architectures
  + Allows fakeroot builds for zypper, pacstrap, and debootstrap
  + Correctly detects seccomp on OpenSUSE
  + Honors GO\_MODFLAGS properly in the mconfig generated makefile
  + Passes the Mac hostname to the VM in MacOS Singularity builds
  + Handles temporary EAGAIN failures when setting up loop devices on recent kernels
  + Fixes excessive memory usage in singularity push

# v3.4.0 - [2019.08.30]

## New features / functionalities

* New support for building and running encrypted containers with RSA keys and passphrases
  + `--pem-path` option added to the `build` and action commands for RSA based encrypted containers
  + `--passphrase` option added to `build` and action commands for passphrase based encrypted containers
  + `SINGULARITY_ENCRYPTION_PEM_PATH` and `SINGULARITY_ENCRYPTION_PASSPHRASE` environment variables added to serve same functions as above
  + `--encrypt` option added to `build` command to build an encrypted container when environment variables contain a secret
* New `--disable-cache` flag prevents caching of downloaded containers
* Added support for multi-line variables in singularity def-files
* Added support for 'indexed' def-file variables (like arrays)
* Added support for SUSE SLE Products
* Added the def-file variables:
  product, user, regcode, productpgp, registerurl, modules, otherurl (indexed)
* Support multiple-architecture tags in the SCS library
* Added a `--dry-run` flag to `cache clean`
* Added a `SINGULARITY_SYPGPDIR` environment variable to specify the location of PGP key data
* Added a `--nonet` option to the action commands to disable networking when running with the `--vm` option
* Added a `--long-list` flag to the `key search` command to preserve
* Added experimental, hidden `--fusemount` flag to pass a command to mount a libfuse3 based file system within the container

## Changed defaults / behaviors

* Runtime now properly honors `SINGULARITY_DISABLE_CACHE` environment variable
* `remote add` command now automatically attempts to login and a `--no-login` flag is added to disable this behavior
* Using the `pull` command to download an unsigned container no longer produces an error code
* `cache clean` command now prompts user before cleaning when run without `--force` option and is more verbose
* Shortened the default output of the `key search` command

## Deprecated / removed commands

* The `--allow-unsigned` flag to `pull` has been deprecated and will be removed in the future

# v3.3.0 - [2019.06.17]

## Changed defaults / behaviors

* Remote login and status commands will now use the default remote if a remote name is not supplied
* Added Singularity hub (`shub`) cache support when using the `pull` command
* Clean cache in a safer way by only deleting the cache subdirectories
* Improvements to the `cache clean` command

## New features / functionalities

* new `oras` URI for pushing and pulling SIF files to and from supported OCI registries
* added the `--fakeroot` option to `build`, `exec`, `run`, `shell`, `test`, and `instance start` commands to run container in a new user namespace as uid 0
* added the `fakeroot` network type for use with the `--network` option
* `sif` command to allow for the inspection and manipulation of SIF files with the following subcommands
  + `add` Add a data object to a SIF file
  + `del` Delete a specified object descriptor and data from SIF file
  + `dump` Extract and output data objects from SIF files
  + `header` Display SIF global headers
  + `info` Display detailed information of object descriptors
  + `list` List object descriptors from SIF files
  + `new` Create a new empty SIF image file
  + `setprim` Set primary system partition

# v3.2.1 - [2019.05.28]

* This point release fixes the following bugs:
  + Allows users to join instances with non-suid workflow
  + Removes false warning when seccomp is disabled on the host
  + Fixes an issue in the terminal when piping output to commands
  + Binds NVIDIA persistenced socket when `--nv` is invoked

# v3.2.0 - [2019.05.14]

## [Security related fix](https://cve.mitre.org/cgi-bin/cvename.cgi?name=2019-11328)

* Instance files are now stored in user's home directory for privacy and many checks have been added to ensure that a user can't manipulate files to change `starter-suid` behavior when instances are joined (many thanks to Matthias Gerstner from the SUSE security team for finding and securely reporting this vulnerability)

## New features / functionalities

* Introduced a new basic framework for creating and managing plugins
* Added the ability to create containers through multi-stage builds
  + Definitions now require `Bootstrap` be the first parameter of header
* Created the concept of a Sylabs Cloud "remote" endpoint and added the ability for users and admins to set them through CLI and conf files
* Added caching for images from Singularity Hub
* Made it possible to compile Singularity outside of `$GOPATH`
* Added a json partition to SIF files for OCI configuration when building from an OCI source
* Full integration with Singularity desktop for MacOS code base

## New Commands

* Introduced the `plugin` command group for creating and managing plugins

  + `compile` Compile a singularity plugin
  + `disable` disable an installed singularity plugin
  + `enable` Enable an installed singularity plugin
  + `inspect` Inspect a singularity plugin (either an installed one or an image)
  + `install` Install a singularity plugin
  + `list` List installed singularity plugins
  + `uninstall` Uninstall removes the named plugin from the system
* Introduced the `remote` command group to support management of Singularity endpoints:

  + `add` Create a new Sylabs Cloud remote endpoint
  + `list` List all remote endpoints that are configured
  + `login` Log into a remote endpoint using an authentication token
  + `remove` Remove an existing Sylabs Cloud remote endpoint
  + `status` Check the status of the services at an endpoint
  + `use` Set a remote endpoint to be used by default
* Added to the `key` command group to improve PGP key management:

  + `export` Export a public or private key into a specific file
  + `import` Import a local key into the local keyring
  + `remove` Remove a local public key
* Added the `Stage: <name>` keyword to the definition file header and the `from <stage name>` option/argument pair to the `%files` section to support multistage builds

## Deprecated / removed commands

* The `--token/-t` option has been deprecated in favor of the `singularity remote` command group

## Changed defaults / behaviors

* Ask to confirm password on a newly generated PGP key
* Prompt to push a key to the KeyStore when generated
* Refuse to push an unsigned container unless overridden with `--allow-unauthenticated/-U` option
* Warn and prompt when pulling an unsigned container without the `--allow-unauthenticated/-U` option
* `Bootstrap` must now be the first field of every header because of parser requirements for multi-stage builds

# v3.1.1 - [2019.04.02]

## New Commands

* New hidden `buildcfg` command to display compile-time parameters
* Added support for `LDFLAGS`, `CFLAGS`, `CGO_` variables in build system
* Added `--nocolor` flag to Singularity client to disable color in logging

## Removed Commands

* `singularity capability <add/drop> --desc` has been removed
* `singularity capability list <--all/--group/--user>` flags have all been removed

## New features / functionalities

* The `--builder` flag to the `build` command implicitly sets `--remote`
* Repeated binds no longer cause Singularity to exit and fail, just warn instead
* Corrected typos and improved docstrings throughout
* Removed warning when CWD does not exist on the host system
* Added support to spec file for RPM building on SLES 11

# v3.1.0 - [2019.02.22]

## New Commands

* Introduced the `oci` command group to support a new OCI compliant variant of the Singularity runtime:
  + `attach` Attach console to a running container process
  + `create` Create a container from a bundle directory
  + `delete` Delete container
  + `exec` Execute a command within container
  + `kill` Kill a container
  + `mount` Mount create an OCI bundle from SIF image
  + `pause` Suspends all processes inside the container
  + `resume` Resumes all processes previously paused inside the container
  + `run` Create/start/attach/delete a container from a bundle directory
  + `start` Start container process
  + `state` Query state of a container
  + `umount` Umount delete bundle
  + `update` Update container cgroups resources
* Added `cache` command group to inspect and manage cached files
  + `clean` Clean your local Singularity cache
  + `list` List your local Singularity cache

## New features / functionalities

* Can now build CLI on darwin for limited functionality on Mac
* Added the `scratch` bootstrap agent to build from anything
* Reintroduced support for zypper bootstrap agent
* Added the ability to overwrite a new `singularity.conf` when building from RPM if desired
* Fixed several regressions and omissions in [SCIF](https://sci-f.github.io/) support
* Added caching for containers pulled/built from the [Container Library](https://cloud.sylabs.io/library)
* Changed `keys` command group to `key` (retained hidden `keys` command for backward compatibility)
* Created an `RPMPREFIX` variable to allow RPMs to be installed in custom locations
* Greatly expanded CI unit and end-to-end testing

# v3.0.3 - [2019.01.21]

* Bind paths in `singularity.conf` are properly parsed and applied at runtime
* Singularity runtime will properly fail if `singularity.conf` file is not owned by the root user
* Several improvements to RPM packaging including using golang from epel, improved support for Fedora, and avoiding overwriting conf file on new RPM install
* Unprivileged `--contain` option now properly mounts `devpts` on older kernels
* Uppercase proxy environment variables are now rightly respected
* Add http/https protocols for singularity run/pull commands
* Update to SIF 1.0.2
* Add *noPrompt* parameter to `pkg/signing/Verify` function to enable silent verification

# v3.0.2 - [2019.01.04]

* Added the `--docker-login` flag to enable interactive authentication with docker registries
* Added support for pulling directly from HTTP and HTTPS
* Made minor improvements to RPM packaging and added basic support for alpine packaging
* The `$SINGULARITY_NOHTTPS`,`$SINGULARITY_TMPDIR`, and `$SINGULARITY_DOCKER_USERNAME`/`$SINGULARITY_DOCKER_PASSWORD` environment variables are now correctly respected
* Pulling from a private shub registry now works as expected
* Running a container with `--network="none"` no longer incorrectly fails with an error message
* Commands now correctly return 1 when incorrectly executed without arguments
* Progress bars no longer incorrectly display when running with `--quiet` or `--silent`
* Contents of `91-environment.sh` file are now displayed if appropriate when running `inspect --environment`

# v3.0.1 - [2018.10.31]

* Improved RPM packaging procedure via makeit
* Enhanced general stability of runtime

# v3.0.0 - [2018.10.08]

* Singularity is now written primarily in Go to bring better integration with the existing container ecosystem
* Added support for new URIs (`build` & `run/exec/shell/start`):
  + `library://` - Supports the [Sylabs.io Cloud Library](https://cloud.sylabs.io/library)
  + `docker-daemon:` - Supports images managed by the locally running docker daemon
  + `docker-archive:` - Supports archived docker images
  + `oci:` - Supports oci images
  + `oci-archive:` - Supports archived oci images
* Handling of `docker` & `oci` URIs/images now utilizes [containers/image](https://github.com/containers/image) to parse and convert those image types in a supported way
* Replaced `singularity instance.*` command group with `singularity instance *`
* The command `singularity help` now only provides help regarding the usage of the `singularity` command. To display an image's `help` message, use `singularity run-help <image path>` instead

## Removed Deprecated Commands

* Removed deprecated `singularity image.*` command group
* Removed deprecated `singularity create` command
* Removed deprecated `singularity bootstrap` command
* Removed deprecated `singularity mount` command
* Removed deprecated `singularity check` command

## New Commands

* Added `singularity run-help <image path>` command to output an image's `help` message
* Added `singularity sign <image path>` command to allow a user to cryptographically sign a SIF image
* Added `singularity verify <image path>` command to allow a user to verify a SIF image's cryptographic signatures
* Added `singularity keys` command to allow the management of `OpenPGP` key stores
* Added `singularity capability` command to allow fine grained control over the capabilities of running containers
* Added `singularity push` command to push images to the [Sylabs.io Cloud Library](https://cloud.sylabs.io/library)

## Changed Commands

### Action Command Group (`run/shell/exec/instance start`)

* Added flags:
  + `--add-caps <string>`: Run the contained process with the specified capability set (requires root)
  + `--allow-setuid`: Allows setuid binaries to be mounted into the container (requires root)
  + `--apply-cgroups <path>`: Apply cgroups configuration from file to contained processes (requires root)
  + `--dns <string>`: Adds the comma separated list of DNS servers to the containers `resolv.conf` file
  + `--drop-caps <string>`: Drop the specified capabilities from the container (requires root)
  + `--fakeroot`: Run the container in a user namespace as `uid=0`. Requires a recent kernel to function properly
  + `--hostname <string>`: Set the hostname of the container
  + `--keep-privs`: Keep root user privilege inside the container (requires root)
  + `--network <string>`: Specify a list of comma separated network types ([CNI Plugins](https://github.com/containernetworking/cni)) to be present inside the container, each with its own dedicated interface in the container
  + `--network-args <string>`: Specify arguments to pass to CNI network plugins (set by `--network`)
  + `--no-privs`: Drop all privileges from root user inside the container (requires root)
  + `--security <string>`: Configure security features such as SELinux, Apparmor, Seccomp...
  + `--writable-tmpfs`: Run container with a `tmpfs` overlay
* The command `singularity instance start` now supports the `--boot` flag to boot the container via `/sbin/init`
* Changes to image mounting behavior:
  + All image formats are mounted as read only by default
  + `--writable` only works on images which can be mounted in read/write [applicable to: `sandbox` and legacy `ext3` images]
  + `--writable-tmpfs` runs the container with a writable `tmpfs`-based overlay [applicable to: all image formats]
  + `--overlay <string>` now specifies a list of `ext3`/`sandbox` images which are set as the containers overlay [applicable to: all image formats]

### Build Command:

* All images are now built as [Singularity Image Format (SIF)](https://www.sylabs.io/2018/03/sif-containing-your-containers/) images by default
* When building to a path that already exists, `singularity build` will now prompt the user if they wish to overwrite the file existing at the specified location
* The `-w|--writable` flag has been removed
* The `-F|--force` flag now overrides the interactive prompt and will always attempt to overwrite the file existing at the specified location
* The `-u|--update` flag has been added to support the workflow of running a definition file on top of an existing container [implies `--sandbox`, only supports `sandbox` image types]
* The `singularity build` command now supports the following flags for integration with the [Sylabs.io Cloud Library](https://cloud.sylabs.io/library):
  + `-r|--remote`: Build the image remotely on the Sylabs Remote Builder (currently unavailable)
  + `-d|--detached`: Detach from the `stdout` of the remote build [requires `--remote`]
  + `--builder <string>`: Specifies the URL of the remote builder to access
  + `--library <string>`: Specifies the URL of the [Sylabs.io Cloud Library](https://cloud.sylabs.io/library) to push the built image to when the build command destination is in the form `library://<reference>`
* The `bootstrap` keyword in the definition file now supports the following values:
  + `library`
  + `docker-daemon`
  + `docker-archive`
  + `oci`
  + `oci-archive`
* The `from` keyword in the definition file now correctly parses a `docker` URI which includes the `registry` and/or `namespace` components
* The `registry` and `namespace` keywords in the definition file are no longer supported. Instead, those values may all go into the `from` keyword
* Building from a tar archive of a `sandbox` no longer works

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.suse.com_9c8953f1_20250119_131822.html ===

![](/assets/img/1px-transparent.gif)
![](/assets/img/1px-transparent.gif)

[![SUSE Logo](https://www.suse.com/assets/img/suse-white-logo-green.svg)
![SUSE Federal Logo](https://www.suse.com/assets/img/fed_logo.png)](https://www.suse.com)
Exit SUSE Federal  >

[Customer Center](https://scc.suse.com/home)

Account

Hello
[Update Your Account](https://www.suse.com/account/update/)
[Log Out](https://www.suse.com/saml2/logout/)

[Login](https://www.suse.com/saml2/login/)
[Create Account](https://www.suse.com/account/create/)
[Update Your Account](https://www.suse.com/account/update/)

English

Language
[Deutsch](https://www.suse.com/de-de/security/cve/CVE-2020-15229.html)
[English](https://www.suse.com/security/cve/CVE-2020-15229.html)
[EspaÃ±ol](https://www.suse.com/es-es/security/cve/CVE-2020-15229.html)
[FranÃ§ais](https://www.suse.com/fr-fr/security/cve/CVE-2020-15229.html)
[ä¸­æ(ç®ä½)](https://www.suse.com/zh-cn/security/cve/CVE-2020-15229.html)
[æ¥æ¬èª](https://www.suse.com/ja-jp/security/cve/CVE-2020-15229.html)
[íêµ­ì´](https://www.suse.com/ko-kr/security/cve/CVE-2020-15229.html)
[PortuguÃªs (Brasil)](https://www.suse.com/pt-br/security/cve/CVE-2020-15229.html)

[Shop](https://www.suse.com/shop/)

[View Cart](https://buy.suse.com/store?Action=DisplayPage&Env=BASE&SiteID=suse&id=ThreePgCheckoutShoppingCartPage)

[![SUSE Logo](https://www.suse.com/assets/img/suse-white-logo-green.svg)](https://www.suse.com)
Exit SUSE Federal  >

[Shop](https://www.suse.com/shop/)
[SUSECON 25](https://www.suse.com/susecon/)
[Customer](https://scc.suse.com/home)

Federal Solutions

Products

Solutions

Support

Partners

Communities

About

[Contact Us](https://www.suse.com/contact/)

[Free Downloads](https://www.suse.com/products/)

 Back

 Back
[![Icon](https://www.suse.com/assets/img/icons/Linux-one-color.svg)
Linux](https://www.suse.com/solutions/business-critical-linux/ "Linux")

* [SUSE Linux Enterprise Server](https://www.suse.com/products/server/)
* [SUSE Linux Enterprise Server

  for SAP Applications](https://www.suse.com/products/sles-for-sap/)
* [SUSE Linux Micro](https://www.suse.com/products/micro/)
* [SUSE Multi-Linux Support](https://www.suse.com/products/multi-linux-support/)
* [SUSE Multi-Linux Manager](https://www.suse.com/products/multi-linux-manager/)

[![Icon](https://www.suse.com/assets/img/icons/Cloud-native-one-color.svg)
Cloud Native](https://www.suse.com/solutions/enterprise-container-management/ "Cloud Native")

* [SUSE Rancher Prime](https://www.suse.com/products/rancher/)
* [Virtualization (Harvester)](https://www.suse.com/products/rancher/virtualization/)
* [Storage (Longhorn)](https://www.suse.com/products/rancher/storage/)
* [Security (NeuVector)](https://www.suse.com/products/rancher/security/)
* [Observability](https://www.suse.com/solutions/observability/)
* [SUSE Cloud Observability](https://www.suse.com/products/cloud/observability/)

[![Icon](https://www.suse.com/assets/img/icons/Edge-one-color.svg)
Edge](https://www.suse.com/solutions/edge-computing/ "Edge")

* [SUSE Edge](https://www.suse.com/products/edge/)
* [SUSE Edge for Telco](https://www.suse.com/products/edge-for-telco/)

[![Icon](https://www.suse.com/assets/img/icons/AI-one-color.svg)
AI](https://www.suse.com/solutions/edge-computing/ "AI")

* [SUSE AI](https://www.suse.com/products/ai/)

[All Products](https://www.suse.com/products/)

 Back
Foundational

* [![Linux](https://www.suse.com/assets/img/icons/Linux-one-color.svg)](https://www.suse.com/solutions/linux/)
* [![Cloud Native](https://www.suse.com/assets/img/icons/Cloud-native-one-color.svg)](https://www.suse.com/solutions/cloud-native/)
* [![Edge](https://www.suse.com/assets/img/icons/Edge-one-color.svg)](https://www.suse.com/solutions/edge/)
* [![AI](https://www.suse.com/assets/img/icons/AI-one-color.svg)](https://www.suse.com/solutions/ai/)

Solutions

* [Run SAP

  Run & secure cloud and on-prem workloads](https://www.suse.com/solutions/run-sap-solutions/)
* [Public Cloud

  Accelerate and innovate across your cloud environment](https://www.suse.com/solutions/public-cloud/)
* [Observability

  Rapid, full-stack visibility in under 5 minutes](https://www.suse.com/solutions/observability/)
* [Security

  Secure your digital enterprise](https://www.suse.com/solutions/security/)

Industries

* [Automotive](https://www.suse.com/sector/automotive/)
* [Telecom](https://www.suse.com/sector/telco/)
* [Banking and Financial Systems](https://www.suse.com/sector/banking-financial-services/)
* [Healthcare](https://www.suse.com/sector/healthcare/)
* [Manufacturing](https://www.suse.com/sector/manufacturing/)
* [Retail](https://www.suse.com/sector/retail/)
* [Technology & Software](https://www.suse.com/sector/technology/)
* [Federal](https://www.ranchergovernment.com/)
* [Pharma](https://www.suse.com/sector/pharma/)
* [Energy](https://www.suse.com/sector/energy/)

 Back
Support

* [Product Support

  SUSE Customer Center](https://scc.suse.com/home)
* [Premium Support Services

  Dedicated support services from a premium team](https://www.suse.com/services/premium/)
* [Long Term Services Support

  Stay on your existing product version](https://www.suse.com/products/long-term-service-pack-support/)
* [Renew Your Support Subscription

  Partners with cloud providers](https://www.suse.com/renewals/)
* [![AWS](https://www.suse.com/assets/img/icons/320px-Amazon3.svg)](https://aws.amazon.com/marketplace/search/results?searchTerms=suse)
* [![Microsoft Azure](https://www.suse.com/assets/img/icons/Microsoft_Azure3.svg)](https://azure.microsoft.com/solutions/linux-on-azure/suse/)
* [![Google](https://www.suse.com/assets/img/icons/lockup_GoogleCloud_FullColor_rgb_139x24px 1.svg)](https://console.cloud.google.com/marketplace/browse?q=SUSE)

Services

* [Consulting Services](https://www.suse.com/services/)
* [Training & Certification](https://www.suse.com/training/)
* [Premium Technical Advisory Services](https://www.suse.com/services/premium-technical-advisory/)

Resources

* [SUSE Support User Guide](https://www.suse.com/support/handbook/)
* [Patches & Updates](https://download.suse.com/patch/finder/)
* [Product Documentation](https://documentation.suse.com/)
* [Knowledgebase](https://www.suse.com/support/kb/)
* [Product Support Life Cycle](https://www.suse.com/lifecycle/)
* [Package Hub

  Community packages for SUSE Linux Enterprise Server](https://packagehub.suse.com/)
* [Driver Search](https://drivers.suse.com/)
* [Support Forums](https://forums.suse.com/forum.php)
* [Developer Services](https://www.suse.com/services/support-offerings/developer-services/)
* [Beta Program](https://www.suse.com/betaprogram/)
* [Security](https://www.suse.com/support/security/)

 Back
Partners

* [Partner Program](https://www.suse.com/partners/)
* [Find a Partner](https://www.suse.com/partners/find-partner/)
* [Become a Partner](https://www.suse.com/partners/become-partner/)
* [Login to the SUSE Partner Portal](https://partner.suse.com/)

 Back
Communities

* [Blog](https://www.suse.com/c/blog/)
* [Forum](https://forums.suse.com/forum.php)
* [Open Source Projects](http://opensource.suse.com/)
* [openSUSE.org](https://www.opensuse.org/)

 Back
About

* [About](https://www.suse.com/company/about/)
* [Leadership](https://www.suse.com/leadership/)
* [Careers](https://jobs.suse.com/)
* [Newsroom](https://www.suse.com/news/)
* [Success Stories](https://www.suse.com/success/)
* [Investor Relations](https://ir.suse.com/)
* [Social Impact](https://www.suse.com/esg/)
* [SUSE Logo and Brand](https://brand.suse.com/)
* [Events](https://www.suse.com/events/)
* [Merchandise Store](https://www.susemerchandise.com/)

# CVE-2020-15229

## Common Vulnerabilities and Exposures

[[Previous]](CVE-2020-15211.html) [[Index]](index.html) [[Next]](CVE-2020-15238.html)

### Upstream information

[CVE-2020-15229 at MITRE](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-15229)

#### Description

Singularity (an open source container platform) from version 3.1.1 through 3.6.3 has a vulnerability. Due to insecure handling of path traversal and the lack of path sanitization within `unsquashfs`, it is possible to overwrite/create any files on the host filesystem during the extraction with a crafted squashfs filesystem. The extraction occurs automatically for unprivileged (either installation or with `allow setuid = no`) run of Singularity when a user attempt to run an image which is a local SIF image or a single file containing a squashfs filesystem and is coming from remote sources `library://` or `shub://`. Image build is also impacted in a more serious way as it can be used by a root user, allowing an attacker to overwrite/create files leading to a system compromise, so far bootstrap methods `library`, `shub` and `localimage` are triggering the squashfs extraction. This issue is addressed in Singularity 3.6.4. All users are advised to upgrade to 3.6.4 especially if they use Singularity mainly for building image as root user. There is no solid workaround except to temporary avoid to use unprivileged mode with single file images in favor of sandbox images instead. Regarding image build, temporary avoid to build from `library` and `shub` sources and as much as possible use `--fakeroot` or a VM for that.

---

### [SUSE information](https://www.suse.com/c/cve-pages-self-help-security-issues-suse-linux-enterprise/)

Overall state of this security issue: Resolved

This issue is currently rated as having [critical](https://www.suse.com/support/security/rating/) severity.

[CVSS v2 Scores](https://nvd.nist.gov/cvss.cfm)
|  | National Vulnerability Database |
| Base Score | 5.8 |
| Vector | AV:N/AC:M/Au:N/C:P/I:P/A:N |
| Access Vector | Network |
| Access Complexity | Medium |
| Authentication | None |
| Confidentiality Impact | Partial |
| Integrity Impact | Partial |
| Availability Impact | None |

[CVSS v3 Scores](https://nvd.nist.gov/cvss.cfm)
|  | National Vulnerability Database |
| Base Score | 9.3 |
| Vector | CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:H/I:H/A:N |
| Attack Vector | Network |
| Attack Complexity | Low |
| Privileges Required | None |
| User Interaction | Required |
| Scope | Changed |
| Confidentiality Impact | High |
| Integrity Impact | High |
| Availability Impact | None |
| CVSSv3 Version | 3.1 |

SUSE Bugzilla entry: [1177901](https://bugzilla.suse.com/show_bug.cgi?id=1177901) [RESOLVED / FIXED]
### SUSE Security Advisories:

* [openSUSE-SU-2020:1769-1](https://lists.opensuse.org/archives/list/security-announce%40lists.opensuse.org/thread/VFW5R4J7EDFXFXU553USBOXIDLJTJNH5/), published Thu Dec 7 12:55:41 2023
* [openSUSE-SU-2020:1770-1](https://lists.opensuse.org/archives/list/security-announce%40lists.opensuse.org/thread/WNVFYEARGBVAQBFQWF2QYIVBZW76G7CP/), published Thu Dec 7 12:55:41 2023
* [openSUSE-SU-2020:1814-1](https://lists.opensuse.org/archives/list/security-announce%40lists.opensuse.org/thread/DY65G6E632UFVXYQXNZWRUZZG53N63DM/), published Thu Dec 7 12:55:41 2023

### List of released packages

| Product(s) | Fixed package version(s) | References |
| --- | --- | --- |
| SUSE Package Hub 15 SP2 | * `singularity >= 3.6.4-bp152.2.12.1` | Patchnames: openSUSE-2020-1814 |
| openSUSE Leap 15.1 | * `singularity >= 3.6.4-lp151.2.12.1` | Patchnames: openSUSE-2020-1769 |
| openSUSE Leap 15.2 | * `singularity >= 3.6.4-lp152.2.9.1` | Patchnames: openSUSE-2020-1770 |
| openSUSE Tumbleweed | * `singularity >= 3.8.3-1.2` | Patchnames: openSUSE-Tumbleweed-2024-11384 |

---

### Status of this issue by product and package

Please note that this evaluation state might be work in progress, incomplete or outdated. Also information for service packs in the LTSS phase is only included for issues meeting the LTSS criteria. If in doubt, feel free to contact us for clarification. The updates are grouped by state of their lifecycle. SUSE product lifecycles are documented [on the lifecycle page](https://www.suse.com/lifecycle/).

| Product(s) | Source package | State |
| --- | --- | --- |
| Products under general support and receiving all security fixes. | | |
| SUSE Linux Enterprise Module for Package Hub 15 SP5 | singularity | Already fixed |
| SUSE Linux Enterprise Module for Package Hub 15 SP6 | singularity | Already fixed |
| openSUSE Leap 15.5 | singularity | Already fixed |
| openSUSE Leap 15.6 | singularity | Already fixed |
| Products past their end of life and not receiving proactive updates anymore. | | |
| SUSE Linux Enterprise Module for Package Hub 15 SP4 | singularity | Already fixed |
| SUSE Package Hub 15 SP2 | singularity | Released |
| openSUSE Leap 15.4 | singularity | Already fixed |

---

### SUSE Timeline for this CVE

CVE page created: Thu Oct 15 21:07:13 2020

CVE page last modified: Tue Sep 3 19:16:54 2024

![SUSE Logo](https://www.suse.com/assets/img/suse-white-logo-green.svg)

* [Careers](https://jobs.suse.com/ "Careers")
* [Legal](https://www.suse.com/company/legal/ "Legal")
* [Anti-Slavery Statement](https://links.imagerelay.com/cdn/3404/ql/811b4f2364b94ff18eb15e315b3e263d/suse_anti_slavery_statement.pdf "Anti-Slavery Statement")
* [Anti-slavery](https://www.suse.com/legal/anti-slavery/ "Anti-slavery")
* [About](https://www.suse.com/company/about/ "About")
* [Communications Preferences](https://www.suse.com/company/subscribe/ "Communications Preferences")
* [Contact Us](https://www.suse.com/contact/ "Contact Us")
* [Let's Chat](#footer-chat-now "Let's Chat")

* [![](https://www.suse.com/assets/img/youtube.png)](https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA%20)
* [![](https://www.suse.com/assets/img/fn-fbook-ico-white.png)](https://www.facebook.com/SUSEWorldwide)
* [![](https://www.suse.com/assets/img/logo-black.png)](https://www.twitter.com/SUSE)
* [![](https://www.suse.com/assets/img/fn-link-ico-white.png)](https://www.linkedin.com/company/suse)
* ![WeChat](https://www.suse.com/assets/img/icons/WeChat.png)

![WeChat QR](https://www.suse.com/assets/img/icons/qrcode_for_gh_91d12717ed53_430.jpg)

Support: [Open a Support Case](https://www.suse.com/support/handbook/#open)

©  ©SUSE, All Rights Reserved

Cookie Settings

[Privacy Policy](https://www.suse.com/company/legal/) and
[Cookie Policy](https://www.suse.com/company/legal/cookies-policy/)

X

×



=== Content from lists.opensuse.org_e282f9f1_20250119_112552.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/WNVFYEARGBVAQBFQWF2QYIVBZW76G7CP/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/WNVFYEARGBVAQBFQWF2QYIVBZW76G7CP/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/WNVFYEARGBVAQBFQWF2QYIVBZW76G7CP/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/WNVFYEARGBVAQBFQWF2QYIVBZW76G7CP/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/WNVFYEARGBVAQBFQWF2QYIVBZW76G7CP/#WNVFYEARGBVAQBFQWF2QYIVBZW76G7CP)

# [security-announce] openSUSE-SU-2020:1770-1: important: Security update for singularity

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

29 Oct
2020

29 Oct
'20

23:25

openSUSE Security Update: Security update for singularity
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2020:1770-1
Rating: important
References: #1177901
Cross-References: CVE-2020-15229
Affected Products:
openSUSE Leap 15.2
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes one vulnerability is now available.
Description:
This update for singularity fixes the following issues:
Update to new version 3.6.4:
- CVE-2020-15229: Due to insecure handling of path traversal and the lack
of path sanitization within unsquashfs, it is possible to
overwrite/create files on the host filesystem during the extraction of a
crafted squashfs filesystem (boo#1177901).
Patch Instructions:
To install this openSUSE Security Update use the SUSE recommended installation methods
like YaST online\_update or "zypper patch".
Alternatively you can run the command listed for your product:
- openSUSE Leap 15.2:
zypper in -t patch openSUSE-2020-1770=1
Package List:
- openSUSE Leap 15.2 (x86\_64):
singularity-3.6.4-lp152.2.9.1
singularity-debuginfo-3.6.4-lp152.2.9.1
References:
<https://www.suse.com/security/cve/CVE-2020-15229.html>
<https://bugzilla.suse.com/1177901>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/WNVFYEARGBVAQBFQWF2QYIVBZW76G7CP/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/WNVFYEARGBVAQBFQWF2QYIVBZW76G7CP/#WNVFYEARGBVAQBFQWF2QYIVBZW76G7CP)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from lists.opensuse.org_d64c86ca_20250119_112553.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/DY65G6E632UFVXYQXNZWRUZZG53N63DM/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/DY65G6E632UFVXYQXNZWRUZZG53N63DM/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/DY65G6E632UFVXYQXNZWRUZZG53N63DM/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/DY65G6E632UFVXYQXNZWRUZZG53N63DM/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/DY65G6E632UFVXYQXNZWRUZZG53N63DM/#DY65G6E632UFVXYQXNZWRUZZG53N63DM)

# [security-announce] openSUSE-SU-2020:1814-1: important: Security update for singularity

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

2 Nov
2020

2 Nov
'20

05:20

openSUSE Security Update: Security update for singularity
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2020:1814-1
Rating: important
References: #1177901
Cross-References: CVE-2020-15229
Affected Products:
openSUSE Backports SLE-15-SP2
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes one vulnerability is now available.
Description:
This update for singularity fixes the following issues:
Update to new version 3.6.4:
- CVE-2020-15229: Due to insecure handling of path traversal and the lack
of path sanitization within unsquashfs, it is possible to
overwrite/create files on the host filesystem during the extraction of a
crafted squashfs filesystem (boo#1177901).
This update was imported from the openSUSE:Leap:15.2:Update update project.
Patch Instructions:
To install this openSUSE Security Update use the SUSE recommended installation methods
like YaST online\_update or "zypper patch".
Alternatively you can run the command listed for your product:
- openSUSE Backports SLE-15-SP2:
zypper in -t patch openSUSE-2020-1814=1
Package List:
- openSUSE Backports SLE-15-SP2 (aarch64 ppc64le s390x x86\_64):
singularity-3.6.4-bp152.2.12.1
References:
<https://www.suse.com/security/cve/CVE-2020-15229.html>
<https://bugzilla.suse.com/1177901>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/DY65G6E632UFVXYQXNZWRUZZG53N63DM/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/DY65G6E632UFVXYQXNZWRUZZG53N63DM/#DY65G6E632UFVXYQXNZWRUZZG53N63DM)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from github.com_5b312884_20250119_112557.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapptainer%2Fsingularity%2Fcommit%2Feba3dea260b117198fdb6faf41f2482ab2f8d53e)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapptainer%2Fsingularity%2Fcommit%2Feba3dea260b117198fdb6faf41f2482ab2f8d53e)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=apptainer%2Fsingularity)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[apptainer](/apptainer)
/
**[singularity](/apptainer/singularity)**
Public

* [Notifications](/login?return_to=%2Fapptainer%2Fsingularity) You must be signed in to change notification settings
* [Fork
  427](/login?return_to=%2Fapptainer%2Fsingularity)
* [Star
   2.5k](/login?return_to=%2Fapptainer%2Fsingularity)

* [Code](/apptainer/singularity)
* [Issues
  0](/apptainer/singularity/issues)
* [Pull requests
  0](/apptainer/singularity/pulls)
* [Actions](/apptainer/singularity/actions)
* [Wiki](/apptainer/singularity/wiki)
* [Security](/apptainer/singularity/security)
* [Insights](/apptainer/singularity/pulse)

Additional navigation options

* [Code](/apptainer/singularity)
* [Issues](/apptainer/singularity/issues)
* [Pull requests](/apptainer/singularity/pulls)
* [Actions](/apptainer/singularity/actions)
* [Wiki](/apptainer/singularity/wiki)
* [Security](/apptainer/singularity/security)
* [Insights](/apptainer/singularity/pulse)

## Commit

[Permalink](/apptainer/singularity/commit/eba3dea260b117198fdb6faf41f2482ab2f8d53e)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#5611](https://github.com/apptainer/singularity/pull/5611) from dctrud/36-sec

[Browse files](/apptainer/singularity/tree/eba3dea260b117198fdb6faf41f2482ab2f8d53e)
Browse the repository at this point in the history

```
Merge [GHSA-7gcp-w6ww-2xv9](https://github.com/advisories/GHSA-7gcp-w6ww-2xv9 "GHSA-7gcp-w6ww-2xv9") fixes for release 3.6.4
```

* Loading branch information

[![@dtrudg](https://avatars.githubusercontent.com/u/4522799?s=40&v=4)](/dtrudg)

[dtrudg](/apptainer/singularity/commits?author=dtrudg "View all commits by dtrudg")
authored
Oct 13, 2020

2 parents
[d603455](/apptainer/singularity/commit/d6034557a54fe4c9734c8d1004437cd8d9c3c93c)
+
[34b3192](/apptainer/singularity/commit/34b31923137eec2e0658a294add0e3c087fc65b2)

commit eba3dea

 Show file tree

 Hide file tree

Showing
**6 changed files**
with
**304 additions**
and
**13 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* CHANGELOG.md
  [CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
* INSTALL.md
  [INSTALL.md](#diff-09b140a43ebfdd8dbec31ce72cafffd15164d2860fd390692a030bcb932b54a0)
* pkg/image/unpacker

  + pkg/image/unpacker/squashfs.go
    [squashfs.go](#diff-e014846b48941d64faf58161c75012d07adae4187e9712741aa99bca3bd3cda9)
  + pkg/image/unpacker/squashfs\_no\_singularity.go
    [squashfs\_no\_singularity.go](#diff-5f9eedd88a1cd60b11402e10f2d84ee6ec5b708d0a3b32304b632b5d266c3bdb)
  + pkg/image/unpacker/squashfs\_singularity.go
    [squashfs\_singularity.go](#diff-b465b1e68e6f4f945cd4ae0930e6a7154407256c1d345a94c061a27585fe48e5)
  + pkg/image/unpacker/squashfs\_test.go
    [squashfs\_test.go](#diff-4e1d9a5d3afbea925ee3c534931843dab263f22474b42c422bd0a18aa1d30f63)

## There are no files selected for viewing

16 changes: 14 additions & 2 deletions

16
[CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed "CHANGELOG.md")

Show comments

[View file](/apptainer/singularity/blob/eba3dea260b117198fdb6faf41f2482ab2f8d53e/CHANGELOG.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -9,11 +9,23 @@ \_With the release of `v3.0.0`, we're introducing a new changelog format in an at |
|  |  |  |
|  |  | \_The old changelog can be found in the `release-2.6` branch\_ |
|  |  |  |
|  |  | # Changes since v3.6.3 |
|  |  | # v3.6.4 - [2020-10-13] |
|  |  |  |
|  |  | ## Security related fixes |
|  |  |  |
|  |  | Singularity 3.6.4 addresses the following security issue. |
|  |  |  |
|  |  | - [CVE-2020-15229](https://github.com/hpcng/singularity/security/advisories/GHSA-7gcp-w6ww-2xv9): |
|  |  | Due to insecure handling of path traversal and the lack of path |
|  |  | sanitization within unsquashfs (a distribution provided utility |
|  |  | used by Singularity), it is possible to overwrite/create files on |
|  |  | the host filesystem during the extraction of a crafted squashfs |
|  |  | filesystem. Affects unprivileged execution of SIF / SquashFS |
|  |  | images, and image builds from SIF / SquashFS images. |
|  |  |  |
|  |  | ## Bug Fixes |
|  |  |  |
|  |  | - Update scs-library-client to support library:// backends using an |
|  |  | - Update scs-library-client to support `library://` backends using an |
|  |  | 3rd party S3 object store that does not strictly conform to v4 |
|  |  | signature spec. |
|  |  |  |
| Expand Down | |  |

6 changes: 3 additions & 3 deletions

6
[INSTALL.md](#diff-09b140a43ebfdd8dbec31ce72cafffd15164d2860fd390692a030bcb932b54a0 "INSTALL.md")

Show comments

[View file](/apptainer/singularity/blob/eba3dea260b117198fdb6faf41f2482ab2f8d53e/INSTALL.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -89,7 +89,7 @@ $ mkdir -p ${GOPATH}/src/github.com/sylabs && \ |
|  |  | To build a stable version of Singularity, check out a [release tag](https://github.com/sylabs/singularity/tags) before compiling: |
|  |  |  |
|  |  | ``` |
|  |  | $ git checkout v3.6.3 |
|  |  | $ git checkout v3.6.4 |
|  |  | ``` |
|  |  |  |
|  |  | ## Compiling Singularity |
| Expand Down  Expand Up | | @@ -132,7 +132,7 @@ as shown above. Then download the latest |
|  |  | and use it to install the RPM like this: |
|  |  |  |
|  |  | ``` |
|  |  | $ export VERSION=3.6.3 # this is the singularity version, change as you need |
|  |  | $ export VERSION=3.6.4 # this is the singularity version, change as you need |
|  |  |  |
|  |  | $ wget https://github.com/sylabs/singularity/releases/download/v${VERSION}/singularity-${VERSION}.tar.gz && \ |
|  |  | rpmbuild -tb singularity-${VERSION}.tar.gz && \ |
| Expand All | | @@ -148,7 +148,7 @@ tarball and use it to install Singularity: |
|  |  | $ cd $GOPATH/src/github.com/sylabs/singularity && \ |
|  |  | ./mconfig && \ |
|  |  | make -C builddir rpm && \ |
|  |  | sudo rpm -ivh ~/rpmbuild/RPMS/x86\_64/singularity-3.6.2\*.x86\_64.rpm # or whatever version you built |
|  |  | sudo rpm -ivh ~/rpmbuild/RPMS/x86\_64/singularity-3.6.4\*.x86\_64.rpm # or whatever version you built |
|  |  | ``` |
|  |  |  |
|  |  | To build an rpm with an alternative install prefix set RPMPREFIX on the |
| Expand Down | |  |

49 changes: 41 additions & 8 deletions

49
[pkg/image/unpacker/squashfs.go](#diff-e014846b48941d64faf58161c75012d07adae4187e9712741aa99bca3bd3cda9 "pkg/image/unpacker/squashfs.go")

Show comments

[View file](/apptainer/singularity/blob/eba3dea260b117198fdb6faf41f2482ab2f8d53e/pkg/image/unpacker/squashfs.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,3 +1,4 @@ |
|  |  | // Copyright (c) 2020, Control Command Inc. All rights reserved. |
|  |  | // Copyright (c) 2019, Sylabs Inc. All rights reserved. |
|  |  | // This software is licensed under a 3-clause BSD license. Please consult the |
|  |  | // LICENSE.md file distributed with the sources of this project regarding your |
| Expand All | | @@ -17,6 +18,33 @@ import ( |
|  |  | "github.com/sylabs/singularity/pkg/sylog" |
|  |  | ) |
|  |  |  |
|  |  | const ( |
|  |  | stdinFile = "/proc/self/fd/0" |
|  |  | ) |
|  |  |  |
|  |  | var cmdFunc func(unsquashfs string, dest string, filename string, rootless bool) (\*exec.Cmd, error) |
|  |  |  |
|  |  | // unsquashfsCmd is the command instance for executing unsquashfs command |
|  |  | // in a non sandboxed environment when this package is used for unit tests. |
|  |  | func unsquashfsCmd(unsquashfs string, dest string, filename string, rootless bool) (\*exec.Cmd, error) { |
|  |  | args := make([]string, 0) |
|  |  | if rootless { |
|  |  | args = append(args, "-user-xattrs") |
|  |  | } |
|  |  | // remove the destination directory if any, if the directory is |
|  |  | // not empty (typically during image build), the unsafe option -f is |
|  |  | // set, this is unfortunately required by image build |
|  |  | if err := os.Remove(dest); err != nil && !os.IsNotExist(err) { |
|  |  | if !os.IsExist(err) { |
|  |  | return nil, fmt.Errorf("failed to remove %s: %s", dest, err) |
|  |  | } |
|  |  | // unsafe mode |
|  |  | args = append(args, "-f") |
|  |  | } |
|  |  | args = append(args, "-d", dest, filename) |
|  |  | return exec.Command(unsquashfs, args...), nil |
|  |  | } |
|  |  |  |
|  |  | // Squashfs represents a squashfs unpacker. |
|  |  | type Squashfs struct { |
|  |  | UnsquashfsPath string |
| Expand All | | @@ -41,7 +69,7 @@ func (s \*Squashfs) extract(files []string, reader io.Reader, dest string) error |
|  |  |  |
|  |  | // pipe over stdin by default |
|  |  | stdin := true |
|  |  | filename := "/proc/self/fd/0" |
|  |  | filename := stdinFile |
|  |  |  |
|  |  | if \_, ok := reader.(\*os.File); !ok { |
|  |  | // use the destination parent directory to store the |
| Expand Down  Expand Up | | @@ -71,9 +99,12 @@ func (s \*Squashfs) extract(files []string, reader io.Reader, dest string) error |
|  |  | // have to fall back to not using that option on failure. |
|  |  | if os.Geteuid() != 0 { |
|  |  | sylog.Debugf("Rootless extraction. Trying -user-xattrs for unsquashfs") |
|  |  | args := []string{"-user-xattrs", "-f", "-d", dest, filename} |
|  |  | args = append(args, files...) |
|  |  | cmd := exec.Command(s.UnsquashfsPath, args...) |
|  |  |  |
|  |  | cmd, err := cmdFunc(s.UnsquashfsPath, dest, filename, true) |
|  |  | if err != nil { |
|  |  | return fmt.Errorf("command error: %s", err) |
|  |  | } |
|  |  | cmd.Args = append(cmd.Args, files...) |
|  |  | if stdin { |
|  |  | cmd.Stdin = reader |
|  |  | } |
| Expand All | | @@ -85,17 +116,19 @@ func (s \*Squashfs) extract(files []string, reader io.Reader, dest string) error |
|  |  |  |
|  |  | // Invalid options give output... |
|  |  | // SYNTAX: unsquashfs [options] filesystem [directories or files to extract] |
|  |  | if bytes.HasPrefix(o, []byte("SYNTAX")) { |
|  |  | if bytes.Contains(o, []byte("SYNTAX")) { |
|  |  | sylog.Warningf("unsquashfs does not support -user-xattrs. Images with system xattrs may fail to extract") |
|  |  | } else { |
|  |  | // A different error is fatal |
|  |  | return fmt.Errorf("extract command failed: %s: %s", string(o), err) |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | args := []string{"-f", "-d", dest, filename} |
|  |  | args = append(args, files...) |
|  |  | cmd := exec.Command(s.UnsquashfsPath, args...) |
|  |  | cmd, err := cmdFunc(s.UnsquashfsPath, dest, filename, false) |
|  |  | if err != nil { |
|  |  | return fmt.Errorf("command error: %s", err) |
|  |  | } |
|  |  | cmd.Args = append(cmd.Args, files...) |
|  |  | if stdin { |
|  |  | cmd.Stdin = reader |
|  |  | } |
| Expand Down | |  |

12 changes: 12 additions & 0 deletions

12
[pkg/image/unpacker/squashfs\_no\_singularity.go](#diff-5f9eedd88a1cd60b11402e10f2d84ee6ec5b708d0a3b32304b632b5d266c3bdb "pkg/image/unpacker/squashfs_no_singularity.go")

Show comments

[View file](/apptainer/singularity/blob/eba3dea260b117198fdb6faf41f2482ab2f8d53e/pkg/image/unpacker/squashfs_no_singularity.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,12 @@ |
|  |  | // Copyright (c) 2020, Control Command Inc. All rights reserved. |
|  |  | // This software is licensed under a 3-clause BSD license. Please consult the |
|  |  | // LICENSE.md file distributed with the sources of this project regarding your |
|  |  | // rights to use or distribute this software. |
|  |  |  |
|  |  | // +build !singularity\_engine |
|  |  |  |
|  |  | package unpacker |
|  |  |  |
|  |  | func init() { |
|  |  | cmdFunc = unsquashfsCmd |
|  |  | } |

228 changes: 228 additions & 0 deletions

228
[pkg/image/unpacker/squashfs\_singularity.go](#diff-b465b1e68e6f4f945cd4ae0930e6a7154407256c1d345a94c061a27585fe48e5 "pkg/image/unpacker/squashfs_singularity.go")

Show comments

[View file](/apptainer/singularity/blob/eba3dea260b117198fdb6faf41f2482ab2f8d53e/pkg/image/unpacker/squashfs_singularity.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,228 @@ |
|  |  | // Copyright (c) 2020, Control Command Inc. All rights reserved. |
|  |  | // This software is licensed under a 3-clause BSD license. Please consult the |
|  |  | // LICENSE.md file distributed with the sources of this project regarding your |
|  |  | // rights to use or distribute this software. |
|  |  |  |
|  |  | // +build singularity\_engine |
|  |  |  |
|  |  | package unpacker |
|  |  |  |
|  |  | import ( |
|  |  | "bytes" |
|  |  | "debug/elf" |
|  |  | "fmt" |
|  |  | "io" |
|  |  | "io/ioutil" |
|  |  | "os" |
|  |  | "os/exec" |
|  |  | "path/filepath" |
|  |  | "regexp" |
|  |  | "strings" |
|  |  |  |
|  |  | "github.com/sylabs/singularity/internal/pkg/buildcfg" |
|  |  | ) |
|  |  |  |
|  |  | func init() { |
|  |  | cmdFunc = unsquashfsSandboxCmd |
|  |  | } |
|  |  |  |
|  |  | // getLibraries returns the libraries required by the elf binary, |
|  |  | // the binary path must be absolute. |
|  |  | func getLibraries(binary string) ([]string, error) { |
|  |  | libs := make([]string, 0) |
|  |  |  |
|  |  | exe, err := elf.Open(binary) |
|  |  | if err != nil { |
|  |  | return nil, err |
|  |  | } |
|  |  | defer exe.Close() |
|  |  |  |
|  |  | interp := "" |
|  |  |  |
|  |  | // look for the interpreter |
|  |  | for \_, p := range exe.Progs { |
|  |  | if p.Type != elf.PT\_INTERP { |
|  |  | continue |
|  |  | } |
|  |  | buf := make([]byte, 4096) |
|  |  | n, err := p.ReadAt(buf, 0) |
|  |  | if err != nil && err != io.EOF { |
|  |  | return nil, err |
|  |  | } else if n > cap(buf) { |
|  |  | return nil, fmt.Errorf("buffer too small to store interpreter") |
|  |  | } |
|  |  | // trim null byte to avoid an execution failure with |
|  |  | // an invalid argument error |
|  |  | interp = string(bytes.Trim(buf, "\x00")) |
|  |  | } |
|  |  |  |
|  |  | // this is a static binary, nothing to do |
|  |  | if interp == "" { |
|  |  | return libs, nil |
|  |  | } |
|  |  |  |
|  |  | // run interpreter to list library dependencies for the |
|  |  | // corresponding binary, eg: |
|  |  | // /lib64/ld-linux-x86-64.so.2 --list <program> |
|  |  | // /lib/ld-musl-x86\_64.so.1 --list <program> |
|  |  | errBuf := new(bytes.Buffer) |
|  |  | buf := new(bytes.Buffer) |
|  |  |  |
|  |  | cmd := exec.Command(interp, "--list", binary) |
|  |  | cmd.Stdout = buf |
|  |  | cmd.Stderr = errBuf |
|  |  |  |
|  |  | if err := cmd.Run(); err != nil { |
|  |  | return nil, fmt.Errorf("while getting library dependencies: %s\n%s", err, errBuf.String()) |
|  |  | } |
|  |  |  |
|  |  | // parse the output to get matches for ' /an/absolute/path (' |
|  |  | re := regexp.MustCompile(`[[:blank:]]?(\/.\*)[[:blank:]]\(`) |
|  |  |  |
|  |  | match := re.FindAllStringSubmatch(buf.String(), -1) |
|  |  | for \_, m := range match { |
|  |  | if len(m) < 2 { |
|  |  | continue |
|  |  | } |
|  |  | lib := m[1] |
|  |  | has := false |
|  |  | for \_, l := range libs { |
|  |  | if l == lib { |
|  |  | has = true |
|  |  | break |
|  |  | } |
|  |  | } |
|  |  | if !has { |
|  |  | libs = append(libs, lib) |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | return libs, nil |
|  |  | } |
|  |  |  |
|  |  | // unsquashfsSandboxCmd is the command instance for executing unsquashfs command |
|  |  | // in a sandboxed environment with singularity. |
|  |  | func unsquashfsSandboxCmd(unsquashfs string, dest string, filename string, rootless bool) (\*exec.Cmd, error) { |
|  |  | const ( |
|  |  | // will contain both dest and filename inside the sandbox |
|  |  | rootfsImageDir = "/image" |
|  |  | ) |
|  |  |  |
|  |  | // create the sandbox temporary directory |
|  |  | tmpdir := filepath.Dir(dest) |
|  |  | rootfs, err := ioutil.TempDir(tmpdir, "tmp-rootfs-") |
|  |  | if err != nil { |
|  |  | return nil, fmt.Errorf("failed to create chroot directory: %s", err) |
|  |  | } |
|  |  |  |
|  |  | overwrite := false |
|  |  |  |
|  |  | // remove the destination directory if any, if the directory is |
|  |  | // not empty (typically during image build), the unsafe option -f is |
|  |  | // set, this is unfortunately required by image build |
|  |  | if err := os.Remove(dest); err != nil && !os.IsNotExist(err) { |
|  |  | if !os.IsExist(err) { |
|  |  | return nil, fmt.Errorf("failed to remove %s: %s", dest, err) |
|  |  | } |
|  |  | overwrite = true |
|  |  | } |
|  |  |  |
|  |  | // map destination into the sandbox |
|  |  | rootfsDest := filepath.Join(rootfsImageDir, filepath.Base(dest)) |
|  |  |  |
|  |  | // sandbox required directories |
|  |  | rootfsDirs := []string{ |
|  |  | // unsquashfs get available CPU from /sys/devices/system/cpu/online |
|  |  | filepath.Join(rootfs, "/sys"), |
|  |  | filepath.Join(rootfs, "/dev"), |
|  |  | filepath.Join(rootfs, rootfsImageDir), |
|  |  | } |
|  |  |  |
|  |  | for \_, d := range rootfsDirs { |
|  |  | if err := os.Mkdir(d, 0700); err != nil { |
|  |  | return nil, fmt.Errorf("while creating %s: %s", d, err) |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // the decision to use user namespace is left to singularity |
|  |  | // which will detect automatically depending of the configuration |
|  |  | // what workflow it could use |
|  |  | args := []string{ |
|  |  | "-q", |
|  |  | "exec", |
|  |  | "--no-home", |
|  |  | "--no-nv", |
|  |  | "--no-rocm", |
|  |  | "-C", |
|  |  | "--no-init", |
|  |  | "--writable", |
|  |  | "-B", fmt.Sprintf("%s:%s", tmpdir, rootfsImageDir), |
|  |  | } |
|  |  |  |
|  |  | if filename != stdinFile { |
|  |  | filename = filepath.Join(rootfsImageDir, filepath.Base(filename)) |
|  |  | } |
|  |  |  |
|  |  | // get the library dependencies of unsquashfs |
|  |  | libs, err := getLibraries(unsquashfs) |
|  |  | if err != nil { |
|  |  | return nil, err |
|  |  | } |
|  |  | libraryPath := make([]string, 0) |
|  |  |  |
|  |  | roFiles := []string{ |
|  |  | unsquashfs, |
|  |  | } |
|  |  |  |
|  |  | // add libraries for bind mount and also generate |
|  |  | // LD\_LIBRARY\_PATH |
|  |  | for \_, l := range libs { |
|  |  | dir := filepath.Dir(l) |
|  |  | roFiles = append(roFiles, l) |
|  |  | has := false |
|  |  | for \_, lp := range libraryPath { |
|  |  | if lp == dir { |
|  |  | has = true |
|  |  | break |
|  |  | } |
|  |  | } |
|  |  | if !has { |
|  |  | libraryPath = append(libraryPath, dir) |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // create files and directories in the sandbox and |
|  |  | // add singularity bind mount options |
|  |  | for \_, b := range roFiles { |
|  |  | file := filepath.Join(rootfs, b) |
|  |  | dir := filepath.Dir(file) |
|  |  | if err := os.MkdirAll(dir, 0700); err != nil { |
|  |  | return nil, fmt.Errorf("while creating %s: %s", dir, err) |
|  |  | } |
|  |  | if err := ioutil.WriteFile(file, []byte(""), 0600); err != nil { |
|  |  | return nil, fmt.Errorf("while creating %s: %s", file, err) |
|  |  | } |
|  |  | args = append(args, "-B", fmt.Sprintf("%s:%s:ro", b, b)) |
|  |  | } |
|  |  |  |
|  |  | // singularity sandbox |
|  |  | args = append(args, rootfs) |
|  |  |  |
|  |  | // unsquashfs execution arguments |
|  |  | args = append(args, unsquashfs) |
|  |  | if rootless { |
|  |  | args = append(args, "-user-xattrs") |
|  |  | } |
|  |  | if overwrite { |
|  |  | args = append(args, "-f") |
|  |  | } |
|  |  | args = append(args, "-d", rootfsDest, filename) |
|  |  |  |
|  |  | cmd := exec.Command(filepath.Join(buildcfg.BINDIR, "singularity"), args...) |
|  |  | cmd.Dir = "/" |
|  |  | cmd.Env = []string{ |
|  |  | fmt.Sprintf("LD\_LIBRARY\_PATH=%s", strings.Join(libraryPath, string(os.PathListSeparator))), |
|  |  | } |
|  |  |  |
|  |  | return cmd, nil |
|  |  | } |

6 changes: 6 additions & 0 deletions

6
[pkg/image/unpacker/squashfs\_test.go](#diff-4e1d9a5d3afbea925ee3c534931843dab263f22474b42c422bd0a18aa1d30f63 "pkg/image/unpacker/squashfs_test.go")

Show comments

[View file](/apptainer/singularity/blob/eba3dea260b117198fdb6faf41f2482ab2f8d53e/pkg/image/unpacker/squashfs_test.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,3 +1,4 @@ |
|  |  | // Copyright (c) 2020, Control Command Inc. All rights reserved. |
|  |  | // Copyright (c) 2019, Sylabs Inc. All rights reserved. |
|  |  | // This software is licensed under a 3-clause BSD license. Please consult the |
|  |  | // LICENSE.md file distributed with the sources of this project regarding your |
| Expand Down  Expand Up | | @@ -106,3 +107,8 @@ func TestSquashfs(t \*testing.T) { |
|  |  | t.Errorf("file extraction failed, %s is missing", path) |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | func TestMain(m \*testing.M) { |
|  |  | cmdFunc = unsquashfsCmd |
|  |  | os.Exit(m.Run()) |
|  |  | } |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `eba3dea`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapptainer%2Fsingularity%2Fcommit%2Feba3dea260b117198fdb6faf41f2482ab2f8d53e) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_e247c4a1_20250119_112559.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapptainer%2Fsingularity%2Fpull%2F5611)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapptainer%2Fsingularity%2Fpull%2F5611)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=apptainer%2Fsingularity)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[apptainer](/apptainer)
/
**[singularity](/apptainer/singularity)**
Public

* [Notifications](/login?return_to=%2Fapptainer%2Fsingularity) You must be signed in to change notification settings
* [Fork
  427](/login?return_to=%2Fapptainer%2Fsingularity)
* [Star
   2.5k](/login?return_to=%2Fapptainer%2Fsingularity)

* [Code](/apptainer/singularity)
* [Issues
  0](/apptainer/singularity/issues)
* [Pull requests
  0](/apptainer/singularity/pulls)
* [Actions](/apptainer/singularity/actions)
* [Wiki](/apptainer/singularity/wiki)
* [Security](/apptainer/singularity/security)
* [Insights](/apptainer/singularity/pulse)

Additional navigation options

* [Code](/apptainer/singularity)
* [Issues](/apptainer/singularity/issues)
* [Pull requests](/apptainer/singularity/pulls)
* [Actions](/apptainer/singularity/actions)
* [Wiki](/apptainer/singularity/wiki)
* [Security](/apptainer/singularity/security)
* [Insights](/apptainer/singularity/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fapptainer%2Fsingularity%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fapptainer%2Fsingularity%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Merge GHSA-7gcp-w6ww-2xv9 fixes for release 3.6.4 #5611

 Merged

[dtrudg](/dtrudg)
merged 2 commits into
[apptainer:release-3.6](/apptainer/singularity/tree/release-3.6 "apptainer/singularity:release-3.6")
from
dtrudg:36-sec

Oct 13, 2020

 Merged

# [Merge GHSA-7gcp-w6ww-2xv9 fixes for release 3.6.4](#top) #5611

[dtrudg](/dtrudg)
merged 2 commits into
[apptainer:release-3.6](/apptainer/singularity/tree/release-3.6 "apptainer/singularity:release-3.6")
from
dtrudg:36-sec

Oct 13, 2020

[Conversation
1](/apptainer/singularity/pull/5611)
[Commits
2](/apptainer/singularity/pull/5611/commits)
[Checks
0](/apptainer/singularity/pull/5611/checks)
[Files changed](/apptainer/singularity/pull/5611/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![dtrudg](https://avatars.githubusercontent.com/u/4522799?s=60&v=4)](/dtrudg)

Copy link

Contributor

### @dtrudg **[dtrudg](/dtrudg)** commented [Oct 13, 2020](#issue-720297085)

Merge [GHSA-7gcp-w6ww-2xv9](https://github.com/advisories/GHSA-7gcp-w6ww-2xv9 "GHSA-7gcp-w6ww-2xv9") fixes for release 3.6.4

Sorry, something went wrong.

All reactions

 [cclerget](/cclerget)
and others
added 2 commits
[October 12, 2020 10:52](#commits-pushed-017ad91)

[![@cclerget](https://avatars.githubusercontent.com/u/3274134?s=40&v=4)](/cclerget) [![@dtrudg](https://avatars.githubusercontent.com/u/4522799?s=40&v=4)](/dtrudg)

`[Run unsquashfs in a sandboxed environment via singularity exec and op…](/apptainer/singularity/pull/5611/commits/017ad914e58386a07bfec23b7ead05770cbd9ff3 "Run unsquashfs in a sandboxed environment via singularity exec and optionally `-f` option to prevent overwrite or creation of files on the host filesystem during the extraction,
the removal of `-f` is conditional, typically for image build `-f` is required and seems unavoidable.")`
 …

`[017ad91](/apptainer/singularity/pull/5611/commits/017ad914e58386a07bfec23b7ead05770cbd9ff3)`

```
…tionally `-f` option to prevent overwrite or creation of files on the host filesystem during the extraction,

the removal of `-f` is conditional, typically for image build `-f` is required and seems unavoidable.
```

[![@dtrudg](https://avatars.githubusercontent.com/u/4522799?s=40&v=4)](/dtrudg)

`[3.6.4 CHANGELOG entry](/apptainer/singularity/pull/5611/commits/34b31923137eec2e0658a294add0e3c087fc65b2 "3.6.4 CHANGELOG entry")`

`[34b3192](/apptainer/singularity/pull/5611/commits/34b31923137eec2e0658a294add0e3c087fc65b2)`

 [![@dtrudg](https://avatars.githubusercontent.com/u/4522799?s=40&u=dd45598a5e24b0d55ce0c891fbb453f77a81c852&v=4)](/dtrudg)
[dtrudg](/dtrudg)
requested review from
[tri-adam](/tri-adam) and
[cclerget](/cclerget)
[October 13, 2020 14:00](#event-3871503746)

[![cclerget](https://avatars.githubusercontent.com/u/3274134?s=60&v=4)](/cclerget)

**[cclerget](/cclerget)**
approved these changes
[Oct 13, 2020](#pullrequestreview-507473608)

 [View reviewed changes](/apptainer/singularity/pull/5611/files/34b31923137eec2e0658a294add0e3c087fc65b2)

Copy link

Collaborator

### @cclerget **[cclerget](/cclerget)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

LGTM

Sorry, something went wrong.

All reactions

[![tri-adam](https://avatars.githubusercontent.com/u/9903835?s=60&v=4)](/tri-adam)

**[tri-adam](/tri-adam)**
approved these changes
[Oct 13, 2020](#pullrequestreview-507483881)

 [View reviewed changes](/apptainer/singularity/pull/5611/files/34b31923137eec2e0658a294add0e3c087fc65b2)

[![@dtrudg](https://avatars.githubusercontent.com/u/4522799?s=40&u=dd45598a5e24b0d55ce0c891fbb453f77a81c852&v=4)](/dtrudg)
[dtrudg](/dtrudg)
merged commit [`eba3dea`](/apptainer/singularity/commit/eba3dea260b117198fdb6faf41f2482ab2f8d53e)
into
apptainer:release-3.6

[Oct 13, 2020](https://github.com/apptainer/singularity/pull/5611#event-3871714234)

 [![@dtrudg](https://avatars.githubusercontent.com/u/4522799?s=40&u=dd45598a5e24b0d55ce0c891fbb453f77a81c852&v=4)](/dtrudg)
[dtrudg](/dtrudg)
deleted the
36-sec

branch
[October 13, 2020 14:35](#event-3871714698)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fapptainer%2Fsingularity%2Fpull%2F5611)

Reviewers

[![@tri-adam](https://avatars.githubusercontent.com/u/9903835?s=40&v=4)](/tri-adam) [tri-adam](/tri-adam)

tri-adam approved these changes

[![@cclerget](https://avatars.githubusercontent.com/u/3274134?s=40&v=4)](/cclerget) [cclerget](/cclerget)

cclerget approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@dtrudg](https://avatars.githubusercontent.com/u/4522799?s=52&v=4)](/dtrudg) [![@cclerget](https://avatars.githubusercontent.com/u/3274134?s=52&v=4)](/cclerget) [![@tri-adam](https://avatars.githubusercontent.com/u/9903835?s=52&v=4)](/tri-adam)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from sylabs.io_bdeda5e8_20250119_131815.html ===

[![Sylabs](https://sylabs.io/wp-content/uploads/2022/03/Sylabs_Logo_2022.svg)](https://sylabs.io/)

* [Products](https://sylabs.io/products/)
  + [SingularityPRO](https://sylabs.io/singularity-pro/)
  + [Singularity Enterprise](https://sylabs.io/singularity-enterprise/)
  + [Singularity Container Services](https://cloud.sylabs.io/)
* Resources
  + [Solutions](https://sylabs.io/solutions/)
  + [Whitepapers](https://sylabs.io/whitepapers/)
  + [How To Guides](https://sylabs.io/category/how-to/)
  + [Support](https://sylabs.io/support/)
  + [Brand Assets](https://sylabs.io/brand-assets/)
* Insights
  + [News](https://sylabs.io/category/news/)
  + [Media](https://sylabs.io/category/media/)
  + [Blog](https://sylabs.io/category/blog/)
  + [Videos](https://www.youtube.com/c/SylabsInc)
* Company
  + [About Us](https://sylabs.io/about-us/)
  + [Partners](https://sylabs.io/partners/)
  + [Careers](https://sylabs.io/careers/)
  + [Contact Us](https://sylabs.io/contact-us/)

[![Sylabs](https://sylabs.io/wp-content/uploads/2022/03/Sylabs_Logo_2022.svg)](https://sylabs.io/)

* Products
  + [SingularityPRO](https://sylabs.io/singularity-pro/)
  + [Singularity Enterprise](https://sylabs.io/singularity-enterprise/)
  + [Singularity Container Services](https://cloud.sylabs.io/)
* Resources
  + [Whitepapers](https://sylabs.io/whitepapers/)
  + [How To Guides](https://sylabs.io/category/how-to/)
  + [Support](https://sylabs.io/support/)
* Insights
  + [News](https://sylabs.io/category/news/)
  + [Media](https://sylabs.io/category/media/)
  + [Blog](https://sylabs.io/category/blog/)
  + [Videos](https://www.youtube.com/c/SylabsInc)
* Company
  + [About Us](https://sylabs.io/about-us/)
  + [Partners](https://sylabs.io/partners/)
  + [Careers](https://sylabs.io/careers/)
  + [Contact Us](https://sylabs.io/contact-us/)
* [SingularityCE](https://sylabs.io/singularity/)
  + [User Guide](https://sylabs.io/guides/latest/user-guide/)
  + [Admin Guide](https://sylabs.io/guides/latest/admin-guide/)
  + [Documentation](https://sylabs.io/docs/)
  + [Updates](https://sylabs.io/category/open-source/)

[![Singularity](https://sylabs.io/wp-content/uploads/2022/03/singularity-logo-round.svg)](https://sylabs.io/singularity/)

* [SingularityCE](https://sylabs.io/singularity/)
  + [User Guide](https://sylabs.io/guides/latest/user-guide/)
  + [Admin Guide](https://sylabs.io/guides/latest/admin-guide/)
  + [Documentation](https://sylabs.io/docs/)
  + [Community Updates](https://sylabs.io/category/open-source/)

Maintaining Open Source Singularity Since 2017

[SCS Login](https://cloud.sylabs.io/)

# Security Policy

## Focus on Security

A lot rides on Singularity.

If you are an open source user, developer or Sylabs™ customer, we take security very seriously, our goal is to provide all Singularity users with the best-possible assistance regarding any issue that might affect the security of their systems.

Some of the biggest HPC centers on the planet depend on Singularity containers every day to run mission-critical applications. As stewards of the open source Singularity project, we owe it to the community to establish a clear security procedure for the times when vulnerabilities are reported or discovered.

### Do you think you found a vulnerability?

It’s easy to assume that your software is secure, but at Sylabs™, we continuously test the current open source version of Singularity for vulnerabilities.

If you believe **you have discovered a vulnerability** in Singularity, let us know so we can research it! You can notify our team either:

* **via email**: security@sylabs.io ([PGP key](sylabs-security.pub))
* **via web**: fill out the form on our [contact page](/contact-us)

We encourage people who contact Singularity Security team to use email encryption. [Get our PGP public key](sylabs-security.pub) and verify the fingerprint:

`0x0EEDA03B2CF74611AE99A09FB20868209CA9540F`

### The goals of a standardized security response procedure

Before we cover the procedure that Sylabs™ takes to mitigate newly discovered vulnerabilities, let’s talk about the goals we’re trying to achieve.

**Fast turnaround:**Even vulnerabilities that have not been announced publicly are a potential source of danger because a savvy hacker may be able to discover and exploit them independently. Our procedures are designed to first understand and then quickly remediate as primary goals.

**Limited exposure:** Before patches are developed and made available, our goal is to limit the spread of information until after a patch is available and key stakeholders are protected.

**Transparency:**The open-source community must know exactly what Sylabs™ intends to do about vulnerabilities and how we are are carrying out our commitment to security. Vulnerabilities are documented using the Common Vulnerabilities and Exposures (CVE) system to provide a permanent searchable record allowing administrators to accurately judge the risks of running a particular version of Singularity within their environment.

**Enable stakeholders over malicious actors:**When a new vulnerability is publicly announced, a race begins between system administrators and those with nefarious intent. SingularityPRO subscribers are provided security patches prior to security announcements as a crucial head start in the security race. Although patches are made available to SingularityPRO customers first, those patches are provided without releasing security-related information. This limits exposure to the open source community while still providing a way to remediation for SingularityPRO customers, with a level of proactive measure.

### Sylabs™ vulnerability procedure

When a vulnerability is discovered, Sylabs™ takes the following steps:

1. Perform due diligence to fully replicate and describe the scope and severity of the bug. (This step is expected to take hours, not days.)
2. A CVE number is requested and embargoed until public release is made.
3. Security patch(es) are confidentially developed. (This step is expected to take hours or days and will be carried out with appropriate urgency.)
4. Security patches are merged into test versions of SingularityPRO and Sylabs™’ testing commences. Bugs related to patch(es) are fixed and testing is repeated as necessary. (This process is expected to take days.)
5. Once patch(es) are developed and fully tested, they are pushed to the main Singularity Pro repos.
6. SingularityPRO customers will receive a standard notification that there is a new version of Singularity available and they should upgrade. This notice will NOT contain any sensitive information and will NOT disclose the presence of a security-related patch.
7. Singularity Pro customers are given a reasonable amount of time to upgrade their installations so that when details of the exploit are revealed they are already protected.
8. After a reasonable period of time has elapsed and SingularityPRO customers have likely upgraded, the patches will be merged from the private development space into the public repository and a release will immediately be made. The release notes will do the following:

   1. Describe the issue in sufficient detail so that affected parties can judge whether to upgrade.
   2. If there is a mitigation or workaround detail it. If there is not explicitly say there is no known workaround.
   3. State whether a malicious user needs access to the system to exploit the vulnerability or whether it can be exploited remotely.
   4. State which versions of Singularity are affected and which OS-es/kernels are affected.
   5. Reference relevant CVE number(s).
9. At the same time that a release is being made, the CVE(s) will be filled out with all relevant information and released from embargo.
10. Announcements will be made on Slack and Google Group that a new version of Singularity is available with all relevant security information and links to release notes.
11. SingularityPRO customers will receive follow-up notification that the last version contains security patches and they should double check that they have upgraded. This email should contain the same information that is in the release notes (along with notifications in Sylabs™ customer support portal.)

Note: All security fixes that Sylabs™ creates will also be made available to the open source community when the full disclosure/CVE have been made public. This will include any patches that are created for legacy versions of Singularity that are no longer being actively maintained by the community.

### Continual Improvements

This security procedure is intended as a guideline and not a one-size fits all mandate. Situations will undoubtedly arise where these steps won’t apply cleanly. But the collective experience of the open source community and the Sylabs™ team, as well as our recent patching efforts lead us to believe this is a well-conceived plan.

[Does the procedure make sense? Are we missing something? Tell us what you think!](/contact-us)

##### Phone

(530) 428-5606

##### Email

support@sylabs.io

##### Socials

* [Follow](https://twitter.com/SylabsIO "Follow on X")
* [Follow](https://www.linkedin.com/company/sylabs-inc/ "Follow on LinkedIn")
* [Follow](https://www.youtube.com/c/SylabsInc "Follow on Youtube")
* [Follow](https://github.com/sylabs/singularity "Follow on GitHub")

#### Products

[SingularityPRO](https://sylabs.io/singularity-pro/)

[Singularity Enterprise](https://sylabs.io/singularity-enterprise/)

[Singularity Container Services](https://cloud.sylabs.io/)

[SingularityCE](https://sylabs.io/singularity/)

#### SingularityCE

[User Guide](https://sylabs.io/guides/latest/user-guide/)

[Admin Guide](https://sylabs.io/guides/latest/admin-guide/)

[Documentation](https://sylabs.io/docs/)

[Community Updates](https://sylabs.io/category/open-source/)

#### Resources

[Whitepapers](https://sylabs.io/whitepapers/)
[How To Guides](https://sylabs.io/category/how-to/)

[Support](https://sylabs.io/support/)

#### Insights

[News](https://sylabs.io/category/news/)

[Media](https://sylabs.io/category/media/)

[Blog](https://sylabs.io/category/blog/)

[Videos](https://www.youtube.com/c/SylabsInc)

#### Company

[About Us](https://sylabs.io/about-us/)

[Partners](https://sylabs.io/partners/)
[Careers](https://sylabs.io/careers/)
[Contact Us](https://sylabs.io/contact-us/)

[![Sylabs](https://sylabs.io/wp-content/uploads/2022/03/Sylabs_Logo_white_2022.svg "Sylabs ")](https://sylabs.io/)
9601 Lane Garrett Drive

Reno, Nevada 89511
[Get Our Newsletter](https://sylabs.io/newsletter-sign-up/)
## Join Our Mailing List

Sign up for our newsletter.

## Thank you for subscribing. You will receive our next email newsletter.

First Name

Last Name

Email

Subscribe

By submitting this form, you are consenting to receive news and marketing emails from: Sylabs. You can revoke your consent to receive emails at any time by using the unsubscribe link, found at the bottom of every email. [Emails are serviced by HubSpot.](https://legal.hubspot.com/acceptable-use)

© 2025 Sylabs™ Inc. All Rights reserved. No part of this website may be reproduced without prior permission from Sylabs.

[Privacy Policy](https://sylabs.io/privacy-policy/) | [Terms & Conditions](https://sylabs.io/terms/) | [EULA](https://sylabs.io/eula/) | [Security Policy](https://sylabs.io/security-policy/)

####

[ Placeholder content for popup link ]
[WordPress Download Manager - Best Download Management Plugin](https://www.wpdownloadmanager.com/)

Close

![](https://px.ads.linkedin.com/collect/?pid=4050570&fmt=gif)



=== Content from lists.opensuse.org_bc3aa56e_20250119_112552.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/VFW5R4J7EDFXFXU553USBOXIDLJTJNH5/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/VFW5R4J7EDFXFXU553USBOXIDLJTJNH5/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/VFW5R4J7EDFXFXU553USBOXIDLJTJNH5/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/VFW5R4J7EDFXFXU553USBOXIDLJTJNH5/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/VFW5R4J7EDFXFXU553USBOXIDLJTJNH5/#VFW5R4J7EDFXFXU553USBOXIDLJTJNH5)

# [security-announce] openSUSE-SU-2020:1769-1: important: Security update for singularity

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

29 Oct
2020

29 Oct
'20

23:27

openSUSE Security Update: Security update for singularity
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2020:1769-1
Rating: important
References: #1177901
Cross-References: CVE-2020-15229
Affected Products:
openSUSE Leap 15.1
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes one vulnerability is now available.
Description:
This update for singularity fixes the following issues:
Update to new version 3.6.4:
- CVE-2020-15229: Due to insecure handling of path traversal and the lack
of path sanitization within unsquashfs, it is possible to
overwrite/create files on the host filesystem during the extraction of a
crafted squashfs filesystem (boo#1177901).
Patch Instructions:
To install this openSUSE Security Update use the SUSE recommended installation methods
like YaST online\_update or "zypper patch".
Alternatively you can run the command listed for your product:
- openSUSE Leap 15.1:
zypper in -t patch openSUSE-2020-1769=1
Package List:
- openSUSE Leap 15.1 (x86\_64):
singularity-3.6.4-lp151.2.12.1
singularity-debuginfo-3.6.4-lp151.2.12.1
References:
<https://www.suse.com/security/cve/CVE-2020-15229.html>
<https://bugzilla.suse.com/1177901>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/VFW5R4J7EDFXFXU553USBOXIDLJTJNH5/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/VFW5R4J7EDFXFXU553USBOXIDLJTJNH5/#VFW5R4J7EDFXFXU553USBOXIDLJTJNH5)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.


