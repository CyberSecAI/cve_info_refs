=== Content from github.com_44cd6458_20250119_122550.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvaadin%2Fflow%2Fpull%2F9392)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvaadin%2Fflow%2Fpull%2F9392)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=vaadin%2Fflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vaadin](/vaadin)
/
**[flow](/vaadin/flow)**
Public

* [Notifications](/login?return_to=%2Fvaadin%2Fflow) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fvaadin%2Fflow)
* [Star
   628](/login?return_to=%2Fvaadin%2Fflow)

* [Code](/vaadin/flow)
* [Issues
  1.2k](/vaadin/flow/issues)
* [Pull requests
  20](/vaadin/flow/pulls)
* [Discussions](/vaadin/flow/discussions)
* [Actions](/vaadin/flow/actions)
* [Projects
  0](/vaadin/flow/projects)
* [Security](/vaadin/flow/security)
* [Insights](/vaadin/flow/pulse)

Additional navigation options

* [Code](/vaadin/flow)
* [Issues](/vaadin/flow/issues)
* [Pull requests](/vaadin/flow/pulls)
* [Discussions](/vaadin/flow/discussions)
* [Actions](/vaadin/flow/actions)
* [Projects](/vaadin/flow/projects)
* [Security](/vaadin/flow/security)
* [Insights](/vaadin/flow/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fvaadin%2Fflow%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fvaadin%2Fflow%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# fix: check if Url path is encoded twice in Dev Mode #9392

 Merged

[mshabarov](/mshabarov)
merged 7 commits into
[master](/vaadin/flow/tree/master "vaadin/flow:master")
from
[unsafe-path-dev-mode](/vaadin/flow/tree/unsafe-path-dev-mode "vaadin/flow:unsafe-path-dev-mode")

Nov 18, 2020

 Merged

# [fix: check if Url path is encoded twice in Dev Mode](#top) #9392

[mshabarov](/mshabarov)
merged 7 commits into
[master](/vaadin/flow/tree/master "vaadin/flow:master")
from
[unsafe-path-dev-mode](/vaadin/flow/tree/unsafe-path-dev-mode "vaadin/flow:unsafe-path-dev-mode")

Nov 18, 2020

[Conversation
13](/vaadin/flow/pull/9392)
[Commits
7](/vaadin/flow/pull/9392/commits)
[Checks
0](/vaadin/flow/pull/9392/checks)
[Files changed](/vaadin/flow/pull/9392/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![mshabarov](https://avatars.githubusercontent.com/u/61410877?s=60&v=4)](/mshabarov)

Copy link

Contributor

### @mshabarov **[mshabarov](/mshabarov)** commented [Nov 12, 2020](#issue-741887471)

Checks double encoding in Dev Mode requests paths, and if the given path contains unsafe double encoding, it then doesn't serve the request.

Sorry, something went wrong.

All reactions

[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&v=4)](/mshabarov)

`[fix: check if Url path is safe in Dev Mode](/vaadin/flow/pull/9392/commits/1a31bf11e923e2a182e10b9babbcd4795ca75da5 "fix: check if Url path is safe in Dev Mode")`

`[1a31bf1](/vaadin/flow/pull/9392/commits/1a31bf11e923e2a182e10b9babbcd4795ca75da5)`

[![vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=60&v=4)](/vaadin-bot)

**[vaadin-bot](/vaadin-bot)**
reviewed
[Nov 12, 2020](#pullrequestreview-529488434)

 [View reviewed changes](/vaadin/flow/pull/9392/files/1a31bf11e923e2a182e10b9babbcd4795ca75da5)

[flow-server/src/main/java/com/vaadin/flow/server/HandlerHelper.java](/vaadin/flow/pull/9392/files/1a31bf11e923e2a182e10b9babbcd4795ca75da5#diff-01b1a9f3d8f103c005f205de171a039d649fff7e15a626af374aab58758808c5)

Show resolved

Hide resolved

[![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=40&u=89e5958e1c179e71211972c3d16cb466cf38f5c0&v=4)](/vaadin-bot)
[vaadin-bot](/vaadin-bot)
added
the
[+0.1.0](/vaadin/flow/labels/%2B0.1.0)
label
[Nov 12, 2020](#event-3990633653)

[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov)
[mshabarov](/mshabarov)
changed the title
~~fix: check if Url path is safe in Dev Mode~~
fix: check if Url path is encoded twice in Dev Mode
[Nov 13, 2020](#event-3992348693)

 [![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov)
[mshabarov](/mshabarov)
requested a review
from [denis-anisimov](/denis-anisimov)
[November 13, 2020 10:43](#event-3992909376)

[![denis-anisimov](https://avatars.githubusercontent.com/u/11425472?s=60&v=4)](/denis-anisimov)

**[denis-anisimov](/denis-anisimov)**
suggested changes
[Nov 13, 2020](#pullrequestreview-530014723)

 [View reviewed changes](/vaadin/flow/pull/9392/files/1a31bf11e923e2a182e10b9babbcd4795ca75da5)

[flow-server/src/main/java/com/vaadin/flow/server/DevModeHandler.java](/vaadin/flow/pull/9392/files/1a31bf11e923e2a182e10b9babbcd4795ca75da5#diff-b564d3b72eaf35bafafab4431de88e168694234239f1af28353bd1f54f410261)

Show resolved

Hide resolved

[flow-server/src/main/java/com/vaadin/flow/server/HandlerHelper.java](/vaadin/flow/pull/9392/files/1a31bf11e923e2a182e10b9babbcd4795ca75da5#diff-01b1a9f3d8f103c005f205de171a039d649fff7e15a626af374aab58758808c5)

Show resolved

Hide resolved

[![@denis-anisimov](https://avatars.githubusercontent.com/u/11425472?s=80&u=3e9e0743fed4cd7951ee87f3ce3f00b846efa825&v=4)](/denis-anisimov)

Copy link

Contributor

### **[denis-anisimov](/denis-anisimov)** commented [Nov 13, 2020](#issuecomment-726734879)

| Please add a reference to the ticket in the commit message: I can't see which ticket the PR fixes. |
| --- |

All reactions

Sorry, something went wrong.

 [mshabarov](/mshabarov)
added 2 commits
[November 13, 2020 16:27](#commits-pushed-e0dcaf8)

[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&v=4)](/mshabarov)

`[Update the path pattern to block slash-dot-dot either](/vaadin/flow/pull/9392/commits/e0dcaf86b63dbcab3adbbe107d1c49d490ead8eb "Update the path pattern to block slash-dot-dot either")`

`[e0dcaf8](/vaadin/flow/pull/9392/commits/e0dcaf86b63dbcab3adbbe107d1c49d490ead8eb)`

[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&v=4)](/mshabarov)

`[Add unit tests and change status code](/vaadin/flow/pull/9392/commits/6ae6460ca4f3a9b50bd46fbf49c807fe67718307 "Add unit tests and change status code")`

`[6ae6460](/vaadin/flow/pull/9392/commits/6ae6460ca4f3a9b50bd46fbf49c807fe67718307)`

[![denis-anisimov](https://avatars.githubusercontent.com/u/11425472?s=60&v=4)](/denis-anisimov)

**[denis-anisimov](/denis-anisimov)**
suggested changes
[Nov 16, 2020](#pullrequestreview-530954685)

 [View reviewed changes](/vaadin/flow/pull/9392/files/6ae6460ca4f3a9b50bd46fbf49c807fe67718307)

[flow-server/src/test/java/com/vaadin/flow/server/DevModeHandlerTest.java](/vaadin/flow/pull/9392/files/e0dcaf86b63dbcab3adbbe107d1c49d490ead8eb..6ae6460ca4f3a9b50bd46fbf49c807fe67718307#diff-02b737d7ac8320230525dc350558d1d1f6e86719bf38fae45438159afd1a21ea)
Outdated

Show resolved

Hide resolved

[flow-server/src/test/java/com/vaadin/flow/server/StaticFileServerTest.java](/vaadin/flow/pull/9392/files/e0dcaf86b63dbcab3adbbe107d1c49d490ead8eb..6ae6460ca4f3a9b50bd46fbf49c807fe67718307#diff-32f7e37f58e6c6729c09daadafa8717bcb9dd42299459f2896018e71af764ba0)
Outdated

Show resolved

Hide resolved

 [mshabarov](/mshabarov)
added 2 commits
[November 16, 2020 10:53](#commits-pushed-563140d)

[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&v=4)](/mshabarov)

`[Split Uri validation tests and remove parameterized feature](/vaadin/flow/pull/9392/commits/563140d181ec9b7d3e7905d7f311a5de262057a2 "Split Uri validation tests and remove parameterized feature")`

`[563140d](/vaadin/flow/pull/9392/commits/563140d181ec9b7d3e7905d7f311a5de262057a2)`

[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&v=4)](/mshabarov)

`[test: add IT test](/vaadin/flow/pull/9392/commits/66dead9e0a458a77044e048ed901cf0aa0d37ecc "test: add IT test")`

`[66dead9](/vaadin/flow/pull/9392/commits/66dead9e0a458a77044e048ed901cf0aa0d37ecc)`

[![denis-anisimov](https://avatars.githubusercontent.com/u/11425472?s=60&v=4)](/denis-anisimov)

**[denis-anisimov](/denis-anisimov)**
suggested changes
[Nov 18, 2020](#pullrequestreview-533120062)

 [View reviewed changes](/vaadin/flow/pull/9392/files/66dead9e0a458a77044e048ed901cf0aa0d37ecc)

[flow-tests/test-root-context/src/test/java/com/vaadin/flow/uitest/ui/UrlValidationIT.java](/vaadin/flow/pull/9392/files/563140d181ec9b7d3e7905d7f311a5de262057a2..66dead9e0a458a77044e048ed901cf0aa0d37ecc#diff-874c4856cbab7844b1c76c10c6d533383bb79e95ef63557a6a3ff95ef374a736)
Outdated

Show resolved

Hide resolved

[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&v=4)](/mshabarov)

`[test: move IT to another module](/vaadin/flow/pull/9392/commits/c5e52744cba7d00c689835a00ea1d759577f3e5a "test: move IT to another module")`

`[c5e5274](/vaadin/flow/pull/9392/commits/c5e52744cba7d00c689835a00ea1d759577f3e5a)`

 [![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov)
[mshabarov](/mshabarov)
marked this pull request as ready for review
[November 18, 2020 07:06](#event-4009109872)

[![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=40&u=89e5958e1c179e71211972c3d16cb466cf38f5c0&v=4)](/vaadin-bot)
[vaadin-bot](/vaadin-bot)
added
[+1.0.0](/vaadin/flow/labels/%2B1.0.0)
and removed
[+0.1.0](/vaadin/flow/labels/%2B0.1.0)
labels
[Nov 18, 2020](#event-4009286556)

[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&v=4)](/mshabarov)

`[Merge remote-tracking branch 'origin/master' into unsafe-path-dev-mode](/vaadin/flow/pull/9392/commits/11b6e6fca7cec706cb6f33e648b8d9c89670baef "Merge remote-tracking branch 'origin/master' into unsafe-path-dev-mode")`

`[11b6e6f](/vaadin/flow/pull/9392/commits/11b6e6fca7cec706cb6f33e648b8d9c89670baef)`

[![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=80&u=89e5958e1c179e71211972c3d16cb466cf38f5c0&v=4)](/vaadin-bot)

Copy link

Collaborator

### **[vaadin-bot](/vaadin-bot)** commented [Nov 18, 2020](#issuecomment-729584980)

| SonarQube analysis reported 3 issues   * [MAJOR](https://camo.githubusercontent.com/80fd361f40ef82bc1a277761a7f808a604b08f62dd36ab5df25ce0d6419ad214/68747470733a2f2f736f6e6172736f757263652e6769746875622e696f2f736f6e61722d6769746875622f73657665726974792d6d616a6f722e706e67) 3 major   Watch the comments in this conversation to review them. 2 extra issues Note: The following issues were found on lines that were not modified in the pull request. Because these issues can't be reported as line comments, they are summarized here:   1. [MAJOR](https://camo.githubusercontent.com/80fd361f40ef82bc1a277761a7f808a604b08f62dd36ab5df25ce0d6419ad214/68747470733a2f2f736f6e6172736f757263652e6769746875622e696f2f736f6e61722d6769746875622f73657665726974792d6d616a6f722e706e67) [DevModeHandler.java#L533](https://github.com/vaadin/flow/blob/11b6e6fca7cec706cb6f33e648b8d9c89670baef/flow-server/src/main/java/com/vaadin/flow/server/DevModeHandler.java#L533): Remove this unused private "checkPort" method. [rule](https://sonar.projects.vaadin.com/coding_rules#rule_key=squid%3AUnusedPrivateMethod) 2. [MAJOR](https://camo.githubusercontent.com/80fd361f40ef82bc1a277761a7f808a604b08f62dd36ab5df25ce0d6419ad214/68747470733a2f2f736f6e6172736f757263652e6769746875622e696f2f736f6e61722d6769746875622f73657665726974792d6d616a6f722e706e67) [DevModeHandlerTest.java#L541](https://github.com/vaadin/flow/blob/11b6e6fca7cec706cb6f33e648b8d9c89670baef/flow-server/src/test/java/com/vaadin/flow/server/DevModeHandlerTest.java#L541): Remove this use of "Thread.sleep()". [rule](https://sonar.projects.vaadin.com/coding_rules#rule_key=squid%3AS2925) |
| --- |

All reactions

Sorry, something went wrong.

[![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=40&u=89e5958e1c179e71211972c3d16cb466cf38f5c0&v=4)](/vaadin-bot)
[vaadin-bot](/vaadin-bot)
added
[+0.1.0](/vaadin/flow/labels/%2B0.1.0)
and removed
[+1.0.0](/vaadin/flow/labels/%2B1.0.0)
labels
[Nov 18, 2020](#event-4009917153)

 [![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov)
[mshabarov](/mshabarov)
requested a review
from [denis-anisimov](/denis-anisimov)
[November 18, 2020 10:40](#event-4009979567)

[![denis-anisimov](https://avatars.githubusercontent.com/u/11425472?s=60&v=4)](/denis-anisimov)

**[denis-anisimov](/denis-anisimov)**
approved these changes
[Nov 18, 2020](#pullrequestreview-533319897)

 [View reviewed changes](/vaadin/flow/pull/9392/files/11b6e6fca7cec706cb6f33e648b8d9c89670baef)

[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov)
[mshabarov](/mshabarov)
merged commit [`19fe386`](/vaadin/flow/commit/19fe3864f9d1567c5ac7a211189986ac093e781f)
into
master

[Nov 18, 2020](https://github.com/vaadin/flow/pull/9392#event-4010060390)

 [![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov)
[mshabarov](/mshabarov)
deleted the
unsafe-path-dev-mode

branch
[November 18, 2020 10:59](#event-4010060450)

[mshabarov](/mshabarov)
added a commit
that referenced
this pull request
[Nov 18, 2020](#ref-commit-7725740)
[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov)

`[fix: check if Url contains directory change in Dev Mode (](/vaadin/flow/commit/7725740fb537610eebd57c92df5b5ba1779ed2c0 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")[#9392](https://github.com/vaadin/flow/pull/9392)[)](/vaadin/flow/commit/7725740fb537610eebd57c92df5b5ba1779ed2c0 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")`
…

`[7725740](/vaadin/flow/commit/7725740fb537610eebd57c92df5b5ba1779ed2c0)`

```
Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit [19fe386](https://github.com/vaadin/flow/commit/19fe3864f9d1567c5ac7a211189986ac093e781f))
```

[mshabarov](/mshabarov)
added a commit
that referenced
this pull request
[Nov 18, 2020](#ref-commit-1474867)
[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov)

`[fix: check if Url contains directory change in Dev Mode (](/vaadin/flow/commit/14748673fa1fc07352f7bc65ada67a45915ad0ef "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")[#9392](https://github.com/vaadin/flow/pull/9392)[)](/vaadin/flow/commit/14748673fa1fc07352f7bc65ada67a45915ad0ef "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")`
…

`[1474867](/vaadin/flow/commit/14748673fa1fc07352f7bc65ada67a45915ad0ef)`

```
Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit [19fe386](https://github.com/vaadin/flow/commit/19fe3864f9d1567c5ac7a211189986ac093e781f))
```

[mshabarov](/mshabarov)
added a commit
that referenced
this pull request
[Nov 18, 2020](#ref-commit-acf5397)
[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov)

`[fix: check if Url contains directory change in Dev Mode (](/vaadin/flow/commit/acf539766a09aa51f66409177ff5558b2e8d8492 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")[#9392](https://github.com/vaadin/flow/pull/9392)[)](/vaadin/flow/commit/acf539766a09aa51f66409177ff5558b2e8d8492 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")`
…

`[acf5397](/vaadin/flow/commit/acf539766a09aa51f66409177ff5558b2e8d8492)`

```
Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit [19fe386](https://github.com/vaadin/flow/commit/19fe3864f9d1567c5ac7a211189986ac093e781f))
```

[mshabarov](/mshabarov)
added a commit
that referenced
this pull request
[Nov 18, 2020](#ref-commit-6a18dc7)
[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov)

`[fix: check if Url contains directory change in Dev Mode (](/vaadin/flow/commit/6a18dc7926027ea1eb54fdaa9bf2fa91f48d145b "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")[#9392](https://github.com/vaadin/flow/pull/9392)[)](/vaadin/flow/commit/6a18dc7926027ea1eb54fdaa9bf2fa91f48d145b "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")`
…

`[6a18dc7](/vaadin/flow/commit/6a18dc7926027ea1eb54fdaa9bf2fa91f48d145b)`

```
Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit [19fe386](https://github.com/vaadin/flow/commit/19fe3864f9d1567c5ac7a211189986ac093e781f))
```

[pleku](/pleku)
pushed a commit
that referenced
this pull request
[Nov 19, 2020](#ref-commit-76639be)
[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov) [![@pleku](https://avatars.githubusercontent.com/u/1478381?s=40&v=4)](/pleku)

`[fix: check if Url contains directory change in Dev Mode (](/vaadin/flow/commit/76639be56911c7759da2b1d60d92f12c43413e75 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")[#9392](https://github.com/vaadin/flow/pull/9392)[)](/vaadin/flow/commit/76639be56911c7759da2b1d60d92f12c43413e75 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")`
…

`[76639be](/vaadin/flow/commit/76639be56911c7759da2b1d60d92f12c43413e75)`

```
Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit [19fe386](https://github.com/vaadin/flow/commit/19fe3864f9d1567c5ac7a211189986ac093e781f))
```

[caalador](/caalador)
pushed a commit
that referenced
this pull request
[Nov 19, 2020](#ref-commit-d8574c1)
[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov) [![@caalador](https://avatars.githubusercontent.com/u/2726090?s=40&v=4)](/caalador)

`[fix: check if Url contains directory change in Dev Mode (](/vaadin/flow/commit/d8574c111bdca2b9a788c2ce7df88645717a6366 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")[#9392](https://github.com/vaadin/flow/pull/9392)[)](/vaadin/flow/commit/d8574c111bdca2b9a788c2ce7df88645717a6366 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")`
…

`[d8574c1](/vaadin/flow/commit/d8574c111bdca2b9a788c2ce7df88645717a6366)`

```
Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit [19fe386](https://github.com/vaadin/flow/commit/19fe3864f9d1567c5ac7a211189986ac093e781f))
```

[pleku](/pleku)
pushed a commit
that referenced
this pull request
[Nov 19, 2020](#ref-commit-4b7ef8b)
[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov) [![@pleku](https://avatars.githubusercontent.com/u/1478381?s=40&v=4)](/pleku)

`[fix: check if Url contains directory change in Dev Mode (](/vaadin/flow/commit/4b7ef8b490478994486d5ee486be3fefc75c809f "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")[#9392](https://github.com/vaadin/flow/pull/9392)[)](/vaadin/flow/commit/4b7ef8b490478994486d5ee486be3fefc75c809f "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")`
…

`[4b7ef8b](/vaadin/flow/commit/4b7ef8b490478994486d5ee486be3fefc75c809f)`

```
Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit [19fe386](https://github.com/vaadin/flow/commit/19fe3864f9d1567c5ac7a211189986ac093e781f))
```

[pleku](/pleku)
pushed a commit
that referenced
this pull request
[Nov 26, 2020](#ref-commit-38d2643)
[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov) [![@pleku](https://avatars.githubusercontent.com/u/1478381?s=40&v=4)](/pleku)

`[fix: check if Url contains directory change in Dev Mode (](/vaadin/flow/commit/38d2643ca3019fc6f5d6aa78d36fd8304203cfb7 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")[#9392](https://github.com/vaadin/flow/pull/9392)[)](/vaadin/flow/commit/38d2643ca3019fc6f5d6aa78d36fd8304203cfb7 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit 19fe3864f9d1567c5ac7a211189986ac093e781f)")`
…

`[38d2643](/vaadin/flow/commit/38d2643ca3019fc6f5d6aa78d36fd8304203cfb7)`

```
Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

(cherry picked from commit [19fe386](https://github.com/vaadin/flow/commit/19fe3864f9d1567c5ac7a211189986ac093e781f))
```

[pleku](/pleku)
pushed a commit
that referenced
this pull request
[Dec 7, 2020](#ref-commit-18db84f)
[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov) [![@pleku](https://avatars.githubusercontent.com/u/1478381?s=40&v=4)](/pleku)

`[fix: check if Url contains directory change in Dev Mode (](/vaadin/flow/commit/18db84ff7f7af03fb7c42b591fba0f489be15d49 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.")[#9392](https://github.com/vaadin/flow/pull/9392)[)](/vaadin/flow/commit/18db84ff7f7af03fb7c42b591fba0f489be15d49 "fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.")`
…

`[18db84f](/vaadin/flow/commit/18db84ff7f7af03fb7c42b591fba0f489be15d49)`

```
Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.
```

[TatuLund](/TatuLund)
added a commit
that referenced
this pull request
[Dec 16, 2020](#ref-commit-8c75d58)
[![@TatuLund](https://avatars.githubusercontent.com/u/14309836?s=40&u=dce215b2d33324856c4c0889f27bef3545122211&v=4)](/TatuLund) [![@caalador](https://avatars.githubusercontent.com/u/2726090?s=40&u=1f1253f7bd2903907943ed48011b760e7128705e&v=4)](/caalador)
[![@alvarezguille](https://avatars.githubusercontent.com/u/9820084?s=40&u=a9fced283592db3596fb880b813a065f551163dc&v=4)](/alvarezguille) [![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=40&u=137d91fc17a547fcc069e72994362676b7f9b374&v=4)](/mshabarov) [![@taefi](https://avatars.githubusercontent.com/u/70698630?s=40&u=227c7a7b6f10c6650a98a5620093c7b2ba736bad&v=4)](/taefi) [![@fluorumlabs](https://avatars.githubusercontent.com/u/5602528?s=40&u=c152a2761ca50b3ed21a3d408c29fd3105658c10&v=4)](/fluorumlabs) [![@platosha](https://avatars.githubusercontent.com/u/247998?s=40&u=f756446852e9fe234391c38f9e63a7a952552f6c&v=4)](/platosha) [![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin) [![@pleku](https://avatars.githubusercontent.com/u/1478381?s=40&v=4)](/pleku) [![@manolo](https://avatars.githubusercontent.com/u/161853?s=40&u=0caf995d8c58d5a0785b1d4241e9ce0c0a62145f&v=4)](/manolo) [![@stbischof](https://avatars.githubusercontent.com/u/33224746?s=40&u=19d26a40b628234b280616a075789a5a44c89aeb&v=4)](/stbischof) [![@jouni](https://avatars.githubusercontent.com/u/66382?s=40&u=fdc557708265a48f8af2799b0001a5fa15d5caca&v=4)](/jouni) [![@KellyShao](https://avatars.githubusercontent.com/u/24410016?s=40&u=d35508413db59f0b2f16071c7e84744046ff76e0&v=4)](/KellyShao)

`[Update branch (](/vaadin/flow/commit/8c75d58009aae3736ed70a62abc878d7e37df259 "Update branch (#9665)

* test: Fix duplicate registration (#9233)

Lock the registry when registering
dynamic route in serviceInit to not have
a race where 2 inits note that path is not
registered and then try to register the route.

Fixes #9223

* refactor: Remove log usage in embedded components (#9254)

8d012f755ccf8b00288959bfa7bc6dd7a3f51284 removed some log and converted others into debug
but log in disconnectedCallback was left.

* refactor: expose the items count API to components (#9257)

Exposes DataCommunicator::getDataProviderSize to the components, in order to get the items count taking into account the countCallback, if it has been set previously.

Related-to: vaadin/vaadin-flow-components#282

* chore: unit test for devmode-not-ready page contents and type (#9266)

* chore: do not depend on commons.lang3 (#9271)

* chore: fix typo (#9272)

Fix typo in DataCommunicator::getDataProviderSize() javadoc.

* fix: Sync HierarchicalDataCommunicator's expand state with client side (#9275)

HierarchicalDataCommunicator's expanded state were not being synchronised with client side and TreeGrid's expanded nodes were being collapsed after re-attaching.

Warranty: Sync TreeGrid expanded items state with the client side when detaching and reattaching

Fixes: https://github.com/vaadin/flow/issues/9175

* chore: Bump version to 6.0-SNAPSHOT (#9279)

* refactor: make web browser immutable (#9298)

* feat: Create Flow plugins for webpack (#9295)

* feat: Create Flow plugins for webpack

Moved stats file handling to a custom plugin.
Added feature for copying custom Flow plugins
for use with webpack.

Fixes #9283

* fix: AppShellConfigurator is now considered for theme endpoint (#9332)

AppShellConfigurator is now also considered when
scanning for annotations and deciding theme.

Fixes #9110

* fix: fix TreeGrid updating wrong expanded items state on setDataProvider (#9336)

Fixes: #9328
Details: HierarchicalDataProvider's reset method was called before recreating the HierrarchyMapper in setDataProvider. This was creating wrong updates for the client side.

* feat!: Theme annotation should be only on AppShellConfigurator (#9313)

Having the `@Theme` annotation on Flow views or router layouts will not be allowed anymore, it should be on `AppShellConfigurator` instead.

Fixes #9092

* test(TypeScript): ensure CSRF token is updated when session is invalidated (#9329)

* test(TypeScript): ensure CSRF token is updated when session is invalidated

Fixes #9164

* add log message

* fix: increase threshold for performance test (#9381)

* fix: hide loading indicator when endpoint call fails (#9380)

* feat: tree-shakeable ES imports for TS form validators (#9374)

- Use tree-shakeable ES imports for TS form validators based on the latest version of validators lib.
- Add missing `return` in the `submit()` method

* feat: Theme can be defined as string or class (#9349)

Add a string definition for theme that matches the \"application theme\" in the theme folder inside /frontend/theme/, loading the css automatically from there. This is based on Lumo theme, always.
Change old class based theme to use themeClass for theme selection.

Fixes #9281

* fix!: Use data view filter and sorting only to that component (#9315)

In-memory filtering and sorting are now stored directly in component, which gives an opportunity to change it through the data view API for a certain component separately from other components bound to the same data provider.

Fixes #8655

* fix: support Range requests with either start or end byte index omitted (#9368)

Supports headers of the type Range: -123 and Range: 123-.

Fixes #9083.

* refactor: revert 'Use data view filter and sorting only to that component' (#9390)

Revert the changes for https://github.com/vaadin/flow/issues/8655 to be able to bump the version of components and avoid compile errors.

* chore: remove test module test-subcontext (#9394)

This module is subsumed by test-router-custom-context.

* chore: update readme with discord link (#9382)

* test: remove Theme annotation from demo helpers module (#9395)

* feat: Do not allow themeClass and themeName in same annotation (#9389)

Theme Class and Theme Name is not supported in
the same Theme annotation as theme name builds
on the Lumo theme.

test-themes is now for testing the Application theme only.
Old theme test was moved into test-misc.

Fixes #9370

* fix!: Use data view filter and sorting only to that component (#9315)

In-memory filtering and sorting are now stored directly in component, which gives an opportunity to change it through the data view API for a certain component separately from other components bound to the same data provider.

Fixes: #8655

* feat: Only use one theme and fail for duplicates (#9406)

Now we only handle the theme with the name inside the Theme annotation.

Fixes #9383

* Read stats.json content as a bundle resource in OSGi
Read token file as a bundle resource in OSGi

Fixes #9146
Fix NPE
Revert logic back to the previous state
# Conflicts:
#	flow-server/src/main/java/com/vaadin/flow/server/DeploymentConfigurationFactory.java
#	flow-server/src/main/java/com/vaadin/flow/server/frontend/FrontendUtils.java
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/OSGiAccess.java

* Refactor Instantiator and resources access

Fixes #9185
Exclude non-serializable classes
Drop dependency to flow-push from flow-server
# Conflicts:
#	flow-server/src/main/java/com/vaadin/flow/server/BootstrapHandler.java
#	flow-server/src/main/java/com/vaadin/flow/server/DeploymentConfigurationFactory.java
#	flow-server/src/main/resources/META-INF/services/javax.servlet.ServletContainerInitializer
#	flow-server/src/test/java/com/vaadin/flow/server/connect/generator/endpoints/model/OSGiInstantiatorFactory.java
#	flow-server/src/test/java/com/vaadin/flow/server/connect/generator/endpoints/model/OSGiResourceProvider.java
#	flow-server/src/test/java/com/vaadin/flow/server/connect/typeconversion/StringConversionTest.java

* Remove flow-osgi dep from flow-push, increase osgi cmpn version
# Conflicts:
#	flow-push/pom.xml
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/VaadinBundleTracker.java

* Correct unit tests after refactoring: make them compiling
Mock VaadinServlet in MockVaadinServletService
Adapt unit tests for refactored code
Adapt more unti tests and add one more new SPI method
Fix serializable test, proceed with unit tests adaption
Adapt unit tests for classes in com.vaadin.flow.server
Adapt unit tests in the com.vaadin.flow.server.communication package
* Adapt more unit tests

* Make sure that ServletContextInitializers are executed after
LookupInitializer
Fix OSGi presence check to be able to run unit test
Adapt servlet deployer unit tests
Exclude OSGi related classes from test
Exclude all OSGi impl classes from serializable test
# Conflicts:
#	flow-polymer-template/src/test/java/com/vaadin/flow/component/polymertemplate/NpmTemplateParserTest.java
#	flow-server/src/main/java/com/vaadin/flow/server/DeploymentConfigurationFactory.java
#	flow-server/src/main/java/com/vaadin/flow/server/startup/ApplicationRouteRegistry.java
#	flow-server/src/main/resources/META-INF/services/javax.servlet.ServletContainerInitializer
#	flow-server/src/test/java/com/vaadin/flow/component/InvalidUrlTest.java
#	flow-server/src/test/java/com/vaadin/flow/component/UITest.java
#	flow-server/src/test/java/com/vaadin/flow/server/BootstrapHandlerDependenciesTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/BootstrapHandlerTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/DeploymentConfigurationFactoryTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/I18NProviderTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/MockServletServiceSessionSetup.java
#	flow-server/src/test/java/com/vaadin/flow/server/MockVaadinServletService.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinServiceTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinServletConfigurationTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinServletServiceTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinSessionTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/communication/PushHandlerTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/communication/WebComponentBootstrapHandlerTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/frontend/FrontendUtilsTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/DevModeInitializerTestBase.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/EnableOSGiRunner.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/ServletDeployerTest.java

* Fix OSGi Lookup related issues
Fix OSGi related unit test one more time

# Conflicts:
#	flow-osgi/src/main/java/com/vaadin/flow/osgi/support/OSGiResourceProvider.java
#	flow-server/src/main/java/com/vaadin/flow/server/VaadinServlet.java
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/OSGiAccess.java
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/VaadinBundleTracker.java
#	flow-server/src/main/java/com/vaadin/flow/server/startup/LookupInitializer.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/EnableOSGiRunner.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/OSGiInitApplicationRouteRegistryTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/webcomponent/OSGiWebComponentConfigurationRegistryTest.java
#	flow-tests/test-root-context/src/main/java/com/vaadin/flow/osgi/Activator.java

* Correct the resource access for VaadinService

* Extend SPI, provide javadocs some unit tests fixes
Minor code corrections, javadocs
Correct unit test
# Conflicts:
#	flow-polymer-template/src/test/java/com/vaadin/flow/component/polymertemplate/NpmTemplateParserTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/communication/WebComponentBootstrapHandlerTest.java

* test: add unit tests

# Conflicts:
#	flow-tests/test-root-context/src/main/java/com/vaadin/flow/osgi/Activator.java

* test: make it possible to run felix-jetty in npm mode
# Conflicts:
#	flow-tests/servlet-containers/felix-jetty/pom.xml
#	flow-tests/test-root-context/pom-npm.xml

* Make httpclient dependency optional for now. (#9262)

* refactoring: move OSGi resource provider impl to flow-server (#9268)

OSGi ResourceProvider impl should be available as a service at the moment when Vaadin WAB register a servlet.
It's not possible without extra unclear config to make sure that the service is registered if it's in the flow-osgi : the bundle may be activated at any moment regardless of servlet registration.
The issue doesn't appear if the service is registered at the flow-bundle start phase.

* refactor: review fixes for OSGi (#9289)

* refactoring: review fixes

* chore: add a comment about Jar packaging in test-root-context module

* fix: ensureServletContext should be always called

* fix: fix review comments
# Conflicts:
#	flow-tests/test-root-context/pom-npm.xml

* refactor: get rid of cmpn osgi dependency (#9307)

Not needed for flow-server.

* refactoring: App classpath resources should be access via
ResourceProvider (#9278)

Fixes #9269
# Conflicts:
#	flow-polymer-template/src/main/java/com/vaadin/flow/component/polymertemplate/NpmTemplateParser.java
#	flow-server/src/main/java/com/vaadin/flow/server/BootstrapUtils.java

* test: update unit tests

* refactor: fix various OSGi related issues

* add back lost classes during cherry-picks
* fix unit tests
* rewrite polymer template RPC

* fix: fix javadocs after merge conflicts

* fix: fix mocks in unit tests

* test: Correct activator

* refactor: correct lookup initializer filtering code

* fix: fix javadocs (SQ)

* refactor: Remove OSGi related ITs and osgi module from the repo

* fix: fix some review comments

* fix: test unstable test

* refactor: get rid of OSGiClientStaticResource (#9277)

* fix: use content parameter in the activate method

* fix: Make OSGi incompatible vaadin-connect dependencies optional

* fix: make Spring deps optional

* fix: make a workaround for broken Route registry API

* fix: avoid not-breaking exception ojn loading class from another bundle

* fix: workaround for possible bug in route registry (like #9360).

* [OSGi] - Cleanup BudleActivator and Service registration, Update bnd and osgi deps (#9361)

refactor: OSGi improvements

* update bnd-version

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* update osgi dependency and version

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix mocking osgi-classes

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* OSGiResourceProvider uses @Component to declare the service

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* VaadinBundleTracker uses @Component to declare the service

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* Remove `empty` BundleActivator

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* use constants for osgi.http.whiteboard.servlet.pattern

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix unregister Service PolymerPublishedEventRpcHandler

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* registers PolymerPublishedEventRpcHandler as a declarative service

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix: add explanation why OSGi Component annotation is safe to use

* fix: code review fixes

* fix: return back accidentially removed method and call init for service

* fix: remove non-existent class pattern from test

* fix: fix import order

* fix: extract code to a separate method

* fix: correct unit test

* fix: fix unit test

* refactor: simplify list merging

* fix: return back lost code after review

* fix: imports order

* fix: revert bnd version

* fix: imports order, review comments

* fix: restore lost test method

* fix: import orders

* fix: revert not working deployment of test-root-context ui classifier

* fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

* fix: preserve filter to not lose it between page requests (#9421)

Data communicator's filter removal, which has been introduced for components with internal filtering (like a ComboBox), may lead to filter loss during the items scrolling. This fix reverts the filter removal and the components should implement this feature on their side, if necessary.

Related-to: vaadin/vaadin-flow-components#388

* chore: Update issue template with discord link (#9426)

* chore: update chrome expectation to 87 (#9445)

* fix: revert changes which broke route registration (#9432)

Need to active the tracker from an servlet context initializer because @activate doesn't work on CTOR with parameter

* chore: fix outdated AppShell javadoc (#9453)

* test: add test for setting global font (#9436)

Fixes #9409

* fix race-condition in IT-Tests (#9416)

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix: mark tests that should not be executed in OSGi (#9456)

* fix: mark tests that should not be executed in OSGi

* fix: don't use push in route not found error page in OSGi

* fix: avoid route with wildcard parameter which doesn't work in OSGi

* fix: exclude wildcard parameter IT and devmode IT

* fix: exclude \"context\" resource IT from OSGi tests

* fix: make annotation packages optional in OSGi (#9465)

Also fix test to first open page before checking client.

fixes #9463

* fix: made VaadinRequest available in endpoint (#9442)

* fix: made vaadinrequest available in endpoint

* clear VaadinRequest instance after endpoint call

* chore: remove mentions of “Connect” (#9151)

* Rename “Connect” to “Fusion”

* Remove “Fusion” naming

* feat: Serve theme static files from VAADIN/static (#9451)

Static files in META-INF/VAADIN/static will now be served
on request to VAADIN/static.
Added new webpack loader that changes app theme
css urls targeting ./ and ../ to be VAADIN/static/ instead.
Where ../ can not go outside of the application theme folder.

Fixes #9405

* refactor: Remove OSGi code from flow-server (#9472)

* refactor: Remove OSGi code from flow-server

Fixes #9219

* chore: update Flow versions description (#9469)

* feat: Theme component with app theme. (#9418)

Added the feature that you can theme components
with the app theme by creating a css file in
'frontend/theme/myTheme/components' with the
component tag name e.g. 'my-field'  should have 'my-field.css'

Fixes #9348

* fix: check whether class implements an interface first directly (#9486)

Part of #9480

* fix: remove instance field from singleton IndexHtmlRequestHandler (#9475)

* fix: remove instance field from singleton IndexHtmlRequestHandler

* apply code review suggestions

* Stop logging error when updating dev dependencies (#9476)

As there is a conflict with the dependencies and prevent adding
the flow-dev-dependencies package to the platform (#9345), this will hide
the unavoidable error that was logged for Vaadin apps.

Fixes #9251

* fix: optimize handling of requests containing Range header (#9484)

More efficient parsing of the header value. Also, range count is capped at 16
(additional will be ignored) and overlapping ranges at 2 (request will be denied
if above).

* fix: Correct regexp to only match when digit first (#9496)

Use Matcher::find instead of Matcher::matches as matches never matched.

Fixes #9494

* test: add test that external urls are not touched (#9482)

Added test that we don't touch external
urls (relative or abosolute).
Moved flow to be under path so we can have
jetty serve \"external\" resources.

Fixes #9430

* fix: Add polyfill for constructable stylesheets (#9489)

Add the constructable stylesheets polyfill so
app theme also works with non chrome based browsers.

Fixes #9488

* fix: Initialize VaadinServlet after Lookup is available (#9500)

fix: don't initialize Vaadin servlet until Lookup is not available

* feat: Enable adding assets from node_modules (#9495)

* feat: Enable adding assets from node_modules

It is now possible to import resources from
installed node_modules by adding the asset to
theme/my-theme/theme.json

Fixes #9468

* Add comment to doc on copyStaticAssets

* Fix url expectation after merge

* format lines

* test: add unit test for clear all in the servlet init method (#9507)

* Fix: fix file system traversal of theme-loader to stop at root (#9505)

The theme-loader recursion for themeFolder should stop
at the root level. Also if no theme folder found we should
not spend time on replacement.

* fix: enable PlainScriptViaJavaScriptIT in OSGi (#9520)

fixes #9461

* fix: enable PushRouteWildcardParameterIT in OSGi (#9518)

fixes #9459

* fix: enable BaseHref IT back (#9515)

Fixes #9458

* chore: Add information on logging in webpack (#9527)

Added information on log levels
with webpack loaders and plugins.

* test: fix test class and register view servlet with a context in OSGi (#9528)

Part of vaadin/osgi#5

* fix: removed `hasClientIssue(\"8236\")` guard as ITs now pass (#9536)

* Fix: Update Lit bundle parser regex. (#9546)

Now the pattern will not fail with a StackOverflowException
as we will search from the start character accepting
any characters until we reach the caught start character with ;

* fix: Enable lit css importing (#9550)

Fixes #9532

* fix: use provided executor for frontend tools (#9553)

fixes vaadin/spring#691

* feat: Resource handling to not need plugin copying (#9558)

Fixed the url handling so that theme resources
get prepended with theme/[themeName] while
having the correct absolute path. With this we can handle
these url resources with the css-loader which in turn
leads to file-loader gettign the files for copying.

External url are still not touched in any way.

part of #9410 and #9533

* fix: file-loader name for windows execution (#9575)

Windows file path separator \ should not
be used as it will result in %0B when it should
be /

* test: Fixed flaky tests caused by variable ui in ValidatorTestBase.java (#9524)

Added a ui variable in the ValidatorTestBase class to attach strong reference, in order to avoid garbage collecting it during the test run.

* refactor: get Executor service from Lookup instead init params (#9572)

fixes #9570

* fix: Add missing refreshAll method to data view

Adds the missed refresh all method to data view API.

Fixes: #9574

* chore: Update contributing guide with setup info (#9576)

The contribution guide was missing the project setup information.

There were outdated instructions in the readme, which was on the other hand not up to date and only had instructions for Eclipse. Now everything is in contribution guide and readme is short and simple, pointing to contribution guide for those who want to work with the project.

* fix!: Make VaadinService.dependencyFilters unmodifiable

While the change is backwards compatible from API perspective, it could be considered a behavior change although there is quite low risk of exposure in apps. Thus targeting 2.5 for the LTS and the recently released 5.0.

* fix: encode attribute value during transfer from embedded web app (#9583)

encode attribute value during transfer from embedded web app

* chore: move fusion endpoint code to fusion-endpoint module (#9499)

Fixes: #9354
move fusion code to a separate fusion-endpoint module, so that the fusion dependencies which are not OSGi compatible can be removed from the flow-server module.

- move the code in the connect package  to fusion-server
- removed the non OSGi compatible packages from the bnd file in flow-server
- change  `TaskGenerateOpenApi` and `TaskGenerateConnect` to interfaces in flow-server, have the implementations in fusion-endpoint since they are using code inside the connect package
- Move endpoint related tests:
   - from NodeTasksTest to  NodeTasksEndpointTest,
   - from DevModeInitializerTest to DevModeInitializerEndpointTest
- Add a `LookupImpl` class in the `flow-maven-plugin` module for finding endpoint services.
- Introduce a `isInstantiableService`method in `ReflectTools`

* feat: Embedded component appTheme support (#9588)

Add support for application theme with
embedded components.

Fixes #8564

* feat: Enable importing CSS from node_modules (#9543)

Enable using CSS files from installed node_modules by adding 'importCss' to theme/my-theme/theme.json.

Fixes #9410

* refactor: simplify ResourceProvider (#9609)

fixes #9605

* chore: add internal classes to access classloader and init context (#9618)

* chore: add internal classes to access classloader and init context

related to #9601 : needed to restore OSGi resource provider

* fix: loading indicator visible and isActive true while endpoint fetch (#9593)

* fix: loading indicator visible and isActive true while endpoint fetch

* Clarified code and added test

* fix: theme files can now be referenced as theme/theme-name (#9590)

Theme files are now copied under theme/[theme-name]
and can be referenced by theme/them-name/path/file.ff
even though they are located at VAADIN/static

Fixes: #9405 and #9535

* Fix: Generated theme.js is now named theme.generated.js (#9616)

my-theme.js is now generated as my-theme.generated.js

Fixes #9595

* Feat: Check that npm resources are available (#9617)

Check that we have named npm resources
available or throw an exception informing
the user to install it using a NpmPackage
annotation or manually with (p)npm i

Fixes #9615

* refactor: rename the app-theme root folder from theme to themes (#9626)

Fixes #9611

* refactor: refine renaming and incorrect paths in ThemeIT (#9634)

* rename app-theme root folder to themes

* chore: fix flaky tests that depends on mock count (#9631)

* chore: create deepClean profile (#9311)

Using the deepClean profile one can
clean up all the generated files and
node_modules folders from all test modules.

* test: add document.css level styles tests (#9646)

Adds a tests for checking that the document.css file is injected to the document scope and not injected to embedded element shadow root.

Fixes #9552

* refactor: extract common config functionality and introduce add config (#9635)

refactor: extract common config functionality and introduce add config

part of #9417

Co-authored-by: caalador <mikael.grankvist@gmail.com>
Co-authored-by: Guille <alvarezguille@users.noreply.github.com>
Co-authored-by: Mikhail Shabarov <61410877+mshabarov@users.noreply.github.com>
Co-authored-by: Johannes Eriksson <joheriks@vaadin.com>
Co-authored-by: Soroosh Taefi <taefi.soroosh@gmail.com>
Co-authored-by: Denis <denis@vaadin.com>
Co-authored-by: Artem Godin <fluorumlabs@users.noreply.github.com>
Co-authored-by: Anton Platonov <anton@vaadin.com>
Co-authored-by: Haijian Wang <30408303+haijian-vaadin@users.noreply.github.com>
Co-authored-by: Pekka Hyvönen <pekka@vaadin.com>
Co-authored-by: Manuel Carrasco Moñino <manolo@vaadin.com>
Co-authored-by: Stefan Bischof <33224746+stbischof@users.noreply.github.com>
Co-authored-by: Jouni Koivuviita <jouni@vaadin.com>
Co-authored-by: Jialin Shao <jialin_shao@outlook.com>
Co-authored-by: Tan Bui <tan@vaadin.com>")[#9665](https://github.com/vaadin/flow/pull/9665)[)](/vaadin/flow/commit/8c75d58009aae3736ed70a62abc878d7e37df259 "Update branch (#9665)

* test: Fix duplicate registration (#9233)

Lock the registry when registering
dynamic route in serviceInit to not have
a race where 2 inits note that path is not
registered and then try to register the route.

Fixes #9223

* refactor: Remove log usage in embedded components (#9254)

8d012f755ccf8b00288959bfa7bc6dd7a3f51284 removed some log and converted others into debug
but log in disconnectedCallback was left.

* refactor: expose the items count API to components (#9257)

Exposes DataCommunicator::getDataProviderSize to the components, in order to get the items count taking into account the countCallback, if it has been set previously.

Related-to: vaadin/vaadin-flow-components#282

* chore: unit test for devmode-not-ready page contents and type (#9266)

* chore: do not depend on commons.lang3 (#9271)

* chore: fix typo (#9272)

Fix typo in DataCommunicator::getDataProviderSize() javadoc.

* fix: Sync HierarchicalDataCommunicator's expand state with client side (#9275)

HierarchicalDataCommunicator's expanded state were not being synchronised with client side and TreeGrid's expanded nodes were being collapsed after re-attaching.

Warranty: Sync TreeGrid expanded items state with the client side when detaching and reattaching

Fixes: https://github.com/vaadin/flow/issues/9175

* chore: Bump version to 6.0-SNAPSHOT (#9279)

* refactor: make web browser immutable (#9298)

* feat: Create Flow plugins for webpack (#9295)

* feat: Create Flow plugins for webpack

Moved stats file handling to a custom plugin.
Added feature for copying custom Flow plugins
for use with webpack.

Fixes #9283

* fix: AppShellConfigurator is now considered for theme endpoint (#9332)

AppShellConfigurator is now also considered when
scanning for annotations and deciding theme.

Fixes #9110

* fix: fix TreeGrid updating wrong expanded items state on setDataProvider (#9336)

Fixes: #9328
Details: HierarchicalDataProvider's reset method was called before recreating the HierrarchyMapper in setDataProvider. This was creating wrong updates for the client side.

* feat!: Theme annotation should be only on AppShellConfigurator (#9313)

Having the `@Theme` annotation on Flow views or router layouts will not be allowed anymore, it should be on `AppShellConfigurator` instead.

Fixes #9092

* test(TypeScript): ensure CSRF token is updated when session is invalidated (#9329)

* test(TypeScript): ensure CSRF token is updated when session is invalidated

Fixes #9164

* add log message

* fix: increase threshold for performance test (#9381)

* fix: hide loading indicator when endpoint call fails (#9380)

* feat: tree-shakeable ES imports for TS form validators (#9374)

- Use tree-shakeable ES imports for TS form validators based on the latest version of validators lib.
- Add missing `return` in the `submit()` method

* feat: Theme can be defined as string or class (#9349)

Add a string definition for theme that matches the \"application theme\" in the theme folder inside /frontend/theme/, loading the css automatically from there. This is based on Lumo theme, always.
Change old class based theme to use themeClass for theme selection.

Fixes #9281

* fix!: Use data view filter and sorting only to that component (#9315)

In-memory filtering and sorting are now stored directly in component, which gives an opportunity to change it through the data view API for a certain component separately from other components bound to the same data provider.

Fixes #8655

* fix: support Range requests with either start or end byte index omitted (#9368)

Supports headers of the type Range: -123 and Range: 123-.

Fixes #9083.

* refactor: revert 'Use data view filter and sorting only to that component' (#9390)

Revert the changes for https://github.com/vaadin/flow/issues/8655 to be able to bump the version of components and avoid compile errors.

* chore: remove test module test-subcontext (#9394)

This module is subsumed by test-router-custom-context.

* chore: update readme with discord link (#9382)

* test: remove Theme annotation from demo helpers module (#9395)

* feat: Do not allow themeClass and themeName in same annotation (#9389)

Theme Class and Theme Name is not supported in
the same Theme annotation as theme name builds
on the Lumo theme.

test-themes is now for testing the Application theme only.
Old theme test was moved into test-misc.

Fixes #9370

* fix!: Use data view filter and sorting only to that component (#9315)

In-memory filtering and sorting are now stored directly in component, which gives an opportunity to change it through the data view API for a certain component separately from other components bound to the same data provider.

Fixes: #8655

* feat: Only use one theme and fail for duplicates (#9406)

Now we only handle the theme with the name inside the Theme annotation.

Fixes #9383

* Read stats.json content as a bundle resource in OSGi
Read token file as a bundle resource in OSGi

Fixes #9146
Fix NPE
Revert logic back to the previous state
# Conflicts:
#	flow-server/src/main/java/com/vaadin/flow/server/DeploymentConfigurationFactory.java
#	flow-server/src/main/java/com/vaadin/flow/server/frontend/FrontendUtils.java
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/OSGiAccess.java

* Refactor Instantiator and resources access

Fixes #9185
Exclude non-serializable classes
Drop dependency to flow-push from flow-server
# Conflicts:
#	flow-server/src/main/java/com/vaadin/flow/server/BootstrapHandler.java
#	flow-server/src/main/java/com/vaadin/flow/server/DeploymentConfigurationFactory.java
#	flow-server/src/main/resources/META-INF/services/javax.servlet.ServletContainerInitializer
#	flow-server/src/test/java/com/vaadin/flow/server/connect/generator/endpoints/model/OSGiInstantiatorFactory.java
#	flow-server/src/test/java/com/vaadin/flow/server/connect/generator/endpoints/model/OSGiResourceProvider.java
#	flow-server/src/test/java/com/vaadin/flow/server/connect/typeconversion/StringConversionTest.java

* Remove flow-osgi dep from flow-push, increase osgi cmpn version
# Conflicts:
#	flow-push/pom.xml
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/VaadinBundleTracker.java

* Correct unit tests after refactoring: make them compiling
Mock VaadinServlet in MockVaadinServletService
Adapt unit tests for refactored code
Adapt more unti tests and add one more new SPI method
Fix serializable test, proceed with unit tests adaption
Adapt unit tests for classes in com.vaadin.flow.server
Adapt unit tests in the com.vaadin.flow.server.communication package
* Adapt more unit tests

* Make sure that ServletContextInitializers are executed after
LookupInitializer
Fix OSGi presence check to be able to run unit test
Adapt servlet deployer unit tests
Exclude OSGi related classes from test
Exclude all OSGi impl classes from serializable test
# Conflicts:
#	flow-polymer-template/src/test/java/com/vaadin/flow/component/polymertemplate/NpmTemplateParserTest.java
#	flow-server/src/main/java/com/vaadin/flow/server/DeploymentConfigurationFactory.java
#	flow-server/src/main/java/com/vaadin/flow/server/startup/ApplicationRouteRegistry.java
#	flow-server/src/main/resources/META-INF/services/javax.servlet.ServletContainerInitializer
#	flow-server/src/test/java/com/vaadin/flow/component/InvalidUrlTest.java
#	flow-server/src/test/java/com/vaadin/flow/component/UITest.java
#	flow-server/src/test/java/com/vaadin/flow/server/BootstrapHandlerDependenciesTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/BootstrapHandlerTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/DeploymentConfigurationFactoryTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/I18NProviderTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/MockServletServiceSessionSetup.java
#	flow-server/src/test/java/com/vaadin/flow/server/MockVaadinServletService.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinServiceTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinServletConfigurationTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinServletServiceTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinSessionTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/communication/PushHandlerTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/communication/WebComponentBootstrapHandlerTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/frontend/FrontendUtilsTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/DevModeInitializerTestBase.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/EnableOSGiRunner.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/ServletDeployerTest.java

* Fix OSGi Lookup related issues
Fix OSGi related unit test one more time

# Conflicts:
#	flow-osgi/src/main/java/com/vaadin/flow/osgi/support/OSGiResourceProvider.java
#	flow-server/src/main/java/com/vaadin/flow/server/VaadinServlet.java
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/OSGiAccess.java
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/VaadinBundleTracker.java
#	flow-server/src/main/java/com/vaadin/flow/server/startup/LookupInitializer.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/EnableOSGiRunner.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/OSGiInitApplicationRouteRegistryTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/webcomponent/OSGiWebComponentConfigurationRegistryTest.java
#	flow-tests/test-root-context/src/main/java/com/vaadin/flow/osgi/Activator.java

* Correct the resource access for VaadinService

* Extend SPI, provide javadocs some unit tests fixes
Minor code corrections, javadocs
Correct unit test
# Conflicts:
#	flow-polymer-template/src/test/java/com/vaadin/flow/component/polymertemplate/NpmTemplateParserTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/communication/WebComponentBootstrapHandlerTest.java

* test: add unit tests

# Conflicts:
#	flow-tests/test-root-context/src/main/java/com/vaadin/flow/osgi/Activator.java

* test: make it possible to run felix-jetty in npm mode
# Conflicts:
#	flow-tests/servlet-containers/felix-jetty/pom.xml
#	flow-tests/test-root-context/pom-npm.xml

* Make httpclient dependency optional for now. (#9262)

* refactoring: move OSGi resource provider impl to flow-server (#9268)

OSGi ResourceProvider impl should be available as a service at the moment when Vaadin WAB register a servlet.
It's not possible without extra unclear config to make sure that the service is registered if it's in the flow-osgi : the bundle may be activated at any moment regardless of servlet registration.
The issue doesn't appear if the service is registered at the flow-bundle start phase.

* refactor: review fixes for OSGi (#9289)

* refactoring: review fixes

* chore: add a comment about Jar packaging in test-root-context module

* fix: ensureServletContext should be always called

* fix: fix review comments
# Conflicts:
#	flow-tests/test-root-context/pom-npm.xml

* refactor: get rid of cmpn osgi dependency (#9307)

Not needed for flow-server.

* refactoring: App classpath resources should be access via
ResourceProvider (#9278)

Fixes #9269
# Conflicts:
#	flow-polymer-template/src/main/java/com/vaadin/flow/component/polymertemplate/NpmTemplateParser.java
#	flow-server/src/main/java/com/vaadin/flow/server/BootstrapUtils.java

* test: update unit tests

* refactor: fix various OSGi related issues

* add back lost classes during cherry-picks
* fix unit tests
* rewrite polymer template RPC

* fix: fix javadocs after merge conflicts

* fix: fix mocks in unit tests

* test: Correct activator

* refactor: correct lookup initializer filtering code

* fix: fix javadocs (SQ)

* refactor: Remove OSGi related ITs and osgi module from the repo

* fix: fix some review comments

* fix: test unstable test

* refactor: get rid of OSGiClientStaticResource (#9277)

* fix: use content parameter in the activate method

* fix: Make OSGi incompatible vaadin-connect dependencies optional

* fix: make Spring deps optional

* fix: make a workaround for broken Route registry API

* fix: avoid not-breaking exception ojn loading class from another bundle

* fix: workaround for possible bug in route registry (like #9360).

* [OSGi] - Cleanup BudleActivator and Service registration, Update bnd and osgi deps (#9361)

refactor: OSGi improvements

* update bnd-version

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* update osgi dependency and version

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix mocking osgi-classes

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* OSGiResourceProvider uses @Component to declare the service

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* VaadinBundleTracker uses @Component to declare the service

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* Remove `empty` BundleActivator

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* use constants for osgi.http.whiteboard.servlet.pattern

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix unregister Service PolymerPublishedEventRpcHandler

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* registers PolymerPublishedEventRpcHandler as a declarative service

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix: add explanation why OSGi Component annotation is safe to use

* fix: code review fixes

* fix: return back accidentially removed method and call init for service

* fix: remove non-existent class pattern from test

* fix: fix import order

* fix: extract code to a separate method

* fix: correct unit test

* fix: fix unit test

* refactor: simplify list merging

* fix: return back lost code after review

* fix: imports order

* fix: revert bnd version

* fix: imports order, review comments

* fix: restore lost test method

* fix: import orders

* fix: revert not working deployment of test-root-context ui classifier

* fix: check if Url contains directory change in Dev Mode (#9392)

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

* fix: preserve filter to not lose it between page requests (#9421)

Data communicator's filter removal, which has been introduced for components with internal filtering (like a ComboBox), may lead to filter loss during the items scrolling. This fix reverts the filter removal and the components should implement this feature on their side, if necessary.

Related-to: vaadin/vaadin-flow-components#388

* chore: Update issue template with discord link (#9426)

* chore: update chrome expectation to 87 (#9445)

* fix: revert changes which broke route registration (#9432)

Need to active the tracker from an servlet context initializer because @activate doesn't work on CTOR with parameter

* chore: fix outdated AppShell javadoc (#9453)

* test: add test for setting global font (#9436)

Fixes #9409

* fix race-condition in IT-Tests (#9416)

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix: mark tests that should not be executed in OSGi (#9456)

* fix: mark tests that should not be executed in OSGi

* fix: don't use push in route not found error page in OSGi

* fix: avoid route with wildcard parameter which doesn't work in OSGi

* fix: exclude wildcard parameter IT and devmode IT

* fix: exclude \"context\" resource IT from OSGi tests

* fix: make annotation packages optional in OSGi (#9465)

Also fix test to first open page before checking client.

fixes #9463

* fix: made VaadinRequest available in endpoint (#9442)

* fix: made vaadinrequest available in endpoint

* clear VaadinRequest instance after endpoint call

* chore: remove mentions of “Connect” (#9151)

* Rename “Connect” to “Fusion”

* Remove “Fusion” naming

* feat: Serve theme static files from VAADIN/static (#9451)

Static files in META-INF/VAADIN/static will now be served
on request to VAADIN/static.
Added new webpack loader that changes app theme
css urls targeting ./ and ../ to be VAADIN/static/ instead.
Where ../ can not go outside of the application theme folder.

Fixes #9405

* refactor: Remove OSGi code from flow-server (#9472)

* refactor: Remove OSGi code from flow-server

Fixes #9219

* chore: update Flow versions description (#9469)

* feat: Theme component with app theme. (#9418)

Added the feature that you can theme components
with the app theme by creating a css file in
'frontend/theme/myTheme/components' with the
component tag name e.g. 'my-field'  should have 'my-field.css'

Fixes #9348

* fix: check whether class implements an interface first directly (#9486)

Part of #9480

* fix: remove instance field from singleton IndexHtmlRequestHandler (#9475)

* fix: remove instance field from singleton IndexHtmlRequestHandler

* apply code review suggestions

* Stop logging error when updating dev dependencies (#9476)

As there is a conflict with the dependencies and prevent adding
the flow-dev-dependencies package to the platform (#9345), this will hide
the unavoidable error that was logged for Vaadin apps.

Fixes #9251

* fix: optimize handling of requests containing Range header (#9484)

More efficient parsing of the header value. Also, range count is capped at 16
(additional will be ignored) and overlapping ranges at 2 (request will be denied
if above).

* fix: Correct regexp to only match when digit first (#9496)

Use Matcher::find instead of Matcher::matches as matches never matched.

Fixes #9494

* test: add test that external urls are not touched (#9482)

Added test that we don't touch external
urls (relative or abosolute).
Moved flow to be under path so we can have
jetty serve \"external\" resources.

Fixes #9430

* fix: Add polyfill for constructable stylesheets (#9489)

Add the constructable stylesheets polyfill so
app theme also works with non chrome based browsers.

Fixes #9488

* fix: Initialize VaadinServlet after Lookup is available (#9500)

fix: don't initialize Vaadin servlet until Lookup is not available

* feat: Enable adding assets from node_modules (#9495)

* feat: Enable adding assets from node_modules

It is now possible to import resources from
installed node_modules by adding the asset to
theme/my-theme/theme.json

Fixes #9468

* Add comment to doc on copyStaticAssets

* Fix url expectation after merge

* format lines

* test: add unit test for clear all in the servlet init method (#9507)

* Fix: fix file system traversal of theme-loader to stop at root (#9505)

The theme-loader recursion for themeFolder should stop
at the root level. Also if no theme folder found we should
not spend time on replacement.

* fix: enable PlainScriptViaJavaScriptIT in OSGi (#9520)

fixes #9461

* fix: enable PushRouteWildcardParameterIT in OSGi (#9518)

fixes #9459

* fix: enable BaseHref IT back (#9515)

Fixes #9458

* chore: Add information on logging in webpack (#9527)

Added information on log levels
with webpack loaders and plugins.

* test: fix test class and register view servlet with a context in OSGi (#9528)

Part of vaadin/osgi#5

* fix: removed `hasClientIssue(\"8236\")` guard as ITs now pass (#9536)

* Fix: Update Lit bundle parser regex. (#9546)

Now the pattern will not fail with a StackOverflowException
as we will search from the start character accepting
any characters until we reach the caught start character with ;

* fix: Enable lit css importing (#9550)

Fixes #9532

* fix: use provided executor for frontend tools (#9553)

fixes vaadin/spring#691

* feat: Resource handling to not need plugin copying (#9558)

Fixed the url handling so that theme resources
get prepended with theme/[themeName] while
having the correct absolute path. With this we can handle
these url resources with the css-loader which in turn
leads to file-loader gettign the files for copying.

External url are still not touched in any way.

part of #9410 and #9533

* fix: file-loader name for windows execution (#9575)

Windows file path separator \ should not
be used as it will result in %0B when it should
be /

* test: Fixed flaky tests caused by variable ui in ValidatorTestBase.java (#9524)

Added a ui variable in the ValidatorTestBase class to attach strong reference, in order to avoid garbage collecting it during the test run.

* refactor: get Executor service from Lookup instead init params (#9572)

fixes #9570

* fix: Add missing refreshAll method to data view

Adds the missed refresh all method to data view API.

Fixes: #9574

* chore: Update contributing guide with setup info (#9576)

The contribution guide was missing the project setup information.

There were outdated instructions in the readme, which was on the other hand not up to date and only had instructions for Eclipse. Now everything is in contribution guide and readme is short and simple, pointing to contribution guide for those who want to work with the project.

* fix!: Make VaadinService.dependencyFilters unmodifiable

While the change is backwards compatible from API perspective, it could be considered a behavior change although there is quite low risk of exposure in apps. Thus targeting 2.5 for the LTS and the recently released 5.0.

* fix: encode attribute value during transfer from embedded web app (#9583)

encode attribute value during transfer from embedded web app

* chore: move fusion endpoint code to fusion-endpoint module (#9499)

Fixes: #9354
move fusion code to a separate fusion-endpoint module, so that the fusion dependencies which are not OSGi compatible can be removed from the flow-server module.

- move the code in the connect package  to fusion-server
- removed the non OSGi compatible packages from the bnd file in flow-server
- change  `TaskGenerateOpenApi` and `TaskGenerateConnect` to interfaces in flow-server, have the implementations in fusion-endpoint since they are using code inside the connect package
- Move endpoint related tests:
   - from NodeTasksTest to  NodeTasksEndpointTest,
   - from DevModeInitializerTest to DevModeInitializerEndpointTest
- Add a `LookupImpl` class in the `flow-maven-plugin` module for finding endpoint services.
- Introduce a `isInstantiableService`method in `ReflectTools`

* feat: Embedded component appTheme support (#9588)

Add support for application theme with
embedded components.

Fixes #8564

* feat: Enable importing CSS from node_modules (#9543)

Enable using CSS files from installed node_modules by adding 'importCss' to theme/my-theme/theme.json.

Fixes #9410

* refactor: simplify ResourceProvider (#9609)

fixes #9605

* chore: add internal classes to access classloader and init context (#9618)

* chore: add internal classes to access classloader and init context

related to #9601 : needed to restore OSGi resource provider

* fix: loading indicator visible and isActive true while endpoint fetch (#9593)

* fix: loading indicator visible and isActive true while endpoint fetch

* Clarified code and added test

* fix: theme files can now be referenced as theme/theme-name (#9590)

Theme files are now copied under theme/[theme-name]
and can be referenced by theme/them-name/path/file.ff
even though they are located at VAADIN/static

Fixes: #9405 and #9535

* Fix: Generated theme.js is now named theme.generated.js (#9616)

my-theme.js is now generated as my-theme.generated.js

Fixes #9595

* Feat: Check that npm resources are available (#9617)

Check that we have named npm resources
available or throw an exception informing
the user to install it using a NpmPackage
annotation or manually with (p)npm i

Fixes #9615

* refactor: rename the app-theme root folder from theme to themes (#9626)

Fixes #9611

* refactor: refine renaming and incorrect paths in ThemeIT (#9634)

* rename app-theme root folder to themes

* chore: fix flaky tests that depends on mock count (#9631)

* chore: create deepClean profile (#9311)

Using the deepClean profile one can
clean up all the generated files and
node_modules folders from all test modules.

* test: add document.css level styles tests (#9646)

Adds a tests for checking that the document.css file is injected to the document scope and not injected to embedded element shadow root.

Fixes #9552

* refactor: extract common config functionality and introduce add config (#9635)

refactor: extract common config functionality and introduce add config

part of #9417

Co-authored-by: caalador <mikael.grankvist@gmail.com>
Co-authored-by: Guille <alvarezguille@users.noreply.github.com>
Co-authored-by: Mikhail Shabarov <61410877+mshabarov@users.noreply.github.com>
Co-authored-by: Johannes Eriksson <joheriks@vaadin.com>
Co-authored-by: Soroosh Taefi <taefi.soroosh@gmail.com>
Co-authored-by: Denis <denis@vaadin.com>
Co-authored-by: Artem Godin <fluorumlabs@users.noreply.github.com>
Co-authored-by: Anton Platonov <anton@vaadin.com>
Co-authored-by: Haijian Wang <30408303+haijian-vaadin@users.noreply.github.com>
Co-authored-by: Pekka Hyvönen <pekka@vaadin.com>
Co-authored-by: Manuel Carrasco Moñino <manolo@vaadin.com>
Co-authored-by: Stefan Bischof <33224746+stbischof@users.noreply.github.com>
Co-authored-by: Jouni Koivuviita <jouni@vaadin.com>
Co-authored-by: Jialin Shao <jialin_shao@outlook.com>
Co-authored-by: Tan Bui <tan@vaadin.com>")`
…

`[8c75d58](/vaadin/flow/commit/8c75d58009aae3736ed70a62abc878d7e37df259)`

```
* test: Fix duplicate registration ([#9233](https://github.com/vaadin/flow/pull/9233))

Lock the registry when registering
dynamic route in serviceInit to not have
a race where 2 inits note that path is not
registered and then try to register the route.

Fixes [#9223](https://github.com/vaadin/flow/issues/9223)

* refactor: Remove log usage in embedded components ([#9254](https://github.com/vaadin/flow/pull/9254))

[8d012f7](https://github.com/vaadin/flow/commit/8d012f755ccf8b00288959bfa7bc6dd7a3f51284) removed some log and converted others into debug
but log in disconnectedCallback was left.

* refactor: expose the items count API to components ([#9257](https://github.com/vaadin/flow/pull/9257))

Exposes DataCommunicator::getDataProviderSize to the components, in order to get the items count taking into account the countCallback, if it has been set previously.

Related-to: [vaadin/flow-components#282](https://github.com/vaadin/flow-components/issues/282)

* chore: unit test for devmode-not-ready page contents and type ([#9266](https://github.com/vaadin/flow/pull/9266))

* chore: do not depend on commons.lang3 ([#9271](https://github.com/vaadin/flow/pull/9271))

* chore: fix typo ([#9272](https://github.com/vaadin/flow/pull/9272))

Fix typo in DataCommunicator::getDataProviderSize() javadoc.

* fix: Sync HierarchicalDataCommunicator's expand state with client side ([#9275](https://github.com/vaadin/flow/pull/9275))

HierarchicalDataCommunicator's expanded state were not being synchronised with client side and TreeGrid's expanded nodes were being collapsed after re-attaching.

Warranty: Sync TreeGrid expanded items state with the client side when detaching and reattaching

Fixes: [#9175](https://github.com/vaadin/flow/issues/9175)

* chore: Bump version to 6.0-SNAPSHOT ([#9279](https://github.com/vaadin/flow/pull/9279))

* refactor: make web browser immutable ([#9298](https://github.com/vaadin/flow/pull/9298))

* feat: Create Flow plugins for webpack ([#9295](https://github.com/vaadin/flow/pull/9295))

* feat: Create Flow plugins for webpack

Moved stats file handling to a custom plugin.
Added feature for copying custom Flow plugins
for use with webpack.

Fixes [#9283](https://github.com/vaadin/flow/issues/9283)

* fix: AppShellConfigurator is now considered for theme endpoint ([#9332](https://github.com/vaadin/flow/pull/9332))

AppShellConfigurator is now also considered when
scanning for annotations and deciding theme.

Fixes [#9110](https://github.com/vaadin/flow/issues/9110)

* fix: fix TreeGrid updating wrong expanded items state on setDataProvider ([#9336](https://github.com/vaadin/flow/pull/9336))

Fixes: [#9328](https://github.com/vaadin/flow/issues/9328)
Details: HierarchicalDataProvider's reset method was called before recreating the HierrarchyMapper in setDataProvider. This was creating wrong updates for the client side.

* feat!: Theme annotation should be only on AppShellConfigurator ([#9313](https://github.com/vaadin/flow/pull/9313))

Having the `@Theme` annotation on Flow views or router layouts will not be allowed anymore, it should be on `AppShellConfigurator` instead.

Fixes [#9092](https://github.com/vaadin/flow/issues/9092)

* test(TypeScript): ensure CSRF token is updated when session is invalidated ([#9329](https://github.com/vaadin/flow/pull/9329))

* test(TypeScript): ensure CSRF token is updated when session is invalidated

Fixes [#9164](https://github.com/vaadin/flow/issues/9164)

* add log message

* fix: increase threshold for performance test ([#9381](https://github.com/vaadin/flow/pull/9381))

* fix: hide loading indicator when endpoint call fails ([#9380](https://github.com/vaadin/flow/pull/9380))

* feat: tree-shakeable ES imports for TS form validators ([#9374](https://github.com/vaadin/flow/pull/9374))

- Use tree-shakeable ES imports for TS form validators based on the latest version of validators lib.
- Add missing `return` in the `submit()` method

* feat: Theme can be defined as string or class ([#9349](https://github.com/vaadin/flow/pull/9349))

Add a string definition for theme that matches the "application theme" in the theme folder inside /frontend/theme/, loading the css automatically from there. This is based on Lumo theme, always.
Change old class based theme to use themeClass for theme selection.

Fixes [#9281](https://github.com/vaadin/flow/issues/9281)

* fix!: Use data view filter and sorting only to that component ([#9315](https://github.com/vaadin/flow/pull/9315))

In-memory filtering and sorting are now stored directly in component, which gives an opportunity to change it through the data view API for a certain component separately from other components bound to the same data provider.

Fixes [#8655](https://github.com/vaadin/flow/issues/8655)

* fix: support Range requests with either start or end byte index omitted ([#9368](https://github.com/vaadin/flow/pull/9368))

Supports headers of the type Range: -123 and Range: 123-.

Fixes [#9083](https://github.com/vaadin/flow/issues/9083).

* refactor: revert 'Use data view filter and sorting only to that component' ([#9390](https://github.com/vaadin/flow/pull/9390))

Revert the changes for [#8655](https://github.com/vaadin/flow/issues/8655) to be able to bump the version of components and avoid compile errors.

* chore: remove test module test-subcontext ([#9394](https://github.com/vaadin/flow/pull/9394))

This module is subsumed by test-router-custom-context.

* chore: update readme with discord link ([#9382](https://github.com/vaadin/flow/pull/9382))

* test: remove Theme annotation from demo helpers module ([#9395](https://github.com/vaadin/flow/pull/9395))

* feat: Do not allow themeClass and themeName in same annotation ([#9389](https://github.com/vaadin/flow/pull/9389))

Theme Class and Theme Name is not supported in
the same Theme annotation as theme name builds
on the Lumo theme.

test-themes is now for testing the Application theme only.
Old theme test was moved into test-misc.

Fixes [#9370](https://github.com/vaadin/flow/issues/9370)

* fix!: Use data view filter and sorting only to that component ([#9315](https://github.com/vaadin/flow/pull/9315))

In-memory filtering and sorting are now stored directly in component, which gives an opportunity to change it through the data view API for a certain component separately from other components bound to the same data provider.

Fixes: [#8655](https://github.com/vaadin/flow/issues/8655)

* feat: Only use one theme and fail for duplicates ([#9406](https://github.com/vaadin/flow/pull/9406))

Now we only handle the theme with the name inside the Theme annotation.

Fixes [#9383](https://github.com/vaadin/flow/issues/9383)

* Read stats.json content as a bundle resource in OSGi
Read token file as a bundle resource in OSGi

Fixes [#9146](https://github.com/vaadin/flow/issues/9146)
Fix NPE
Revert logic back to the previous state
# Conflicts:
#	flow-server/src/main/java/com/vaadin/flow/server/DeploymentConfigurationFactory.java
#	flow-server/src/main/java/com/vaadin/flow/server/frontend/FrontendUtils.java
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/OSGiAccess.java

* Refactor Instantiator and resources access

Fixes [#9185](https://github.com/vaadin/flow/issues/9185)
Exclude non-serializable classes
Drop dependency to flow-push from flow-server
# Conflicts:
#	flow-server/src/main/java/com/vaadin/flow/server/BootstrapHandler.java
#	flow-server/src/main/java/com/vaadin/flow/server/DeploymentConfigurationFactory.java
#	flow-server/src/main/resources/META-INF/services/javax.servlet.ServletContainerInitializer
#	flow-server/src/test/java/com/vaadin/flow/server/connect/generator/endpoints/model/OSGiInstantiatorFactory.java
#	flow-server/src/test/java/com/vaadin/flow/server/connect/generator/endpoints/model/OSGiResourceProvider.java
#	flow-server/src/test/java/com/vaadin/flow/server/connect/typeconversion/StringConversionTest.java

* Remove flow-osgi dep from flow-push, increase osgi cmpn version
# Conflicts:
#	flow-push/pom.xml
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/VaadinBundleTracker.java

* Correct unit tests after refactoring: make them compiling
Mock VaadinServlet in MockVaadinServletService
Adapt unit tests for refactored code
Adapt more unti tests and add one more new SPI method
Fix serializable test, proceed with unit tests adaption
Adapt unit tests for classes in com.vaadin.flow.server
Adapt unit tests in the com.vaadin.flow.server.communication package
* Adapt more unit tests

* Make sure that ServletContextInitializers are executed after
LookupInitializer
Fix OSGi presence check to be able to run unit test
Adapt servlet deployer unit tests
Exclude OSGi related classes from test
Exclude all OSGi impl classes from serializable test
# Conflicts:
#	flow-polymer-template/src/test/java/com/vaadin/flow/component/polymertemplate/NpmTemplateParserTest.java
#	flow-server/src/main/java/com/vaadin/flow/server/DeploymentConfigurationFactory.java
#	flow-server/src/main/java/com/vaadin/flow/server/startup/ApplicationRouteRegistry.java
#	flow-server/src/main/resources/META-INF/services/javax.servlet.ServletContainerInitializer
#	flow-server/src/test/java/com/vaadin/flow/component/InvalidUrlTest.java
#	flow-server/src/test/java/com/vaadin/flow/component/UITest.java
#	flow-server/src/test/java/com/vaadin/flow/server/BootstrapHandlerDependenciesTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/BootstrapHandlerTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/DeploymentConfigurationFactoryTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/I18NProviderTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/MockServletServiceSessionSetup.java
#	flow-server/src/test/java/com/vaadin/flow/server/MockVaadinServletService.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinServiceTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinServletConfigurationTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinServletServiceTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/VaadinSessionTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/communication/PushHandlerTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/communication/WebComponentBootstrapHandlerTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/frontend/FrontendUtilsTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/DevModeInitializerTestBase.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/EnableOSGiRunner.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/ServletDeployerTest.java

* Fix OSGi Lookup related issues
Fix OSGi related unit test one more time

# Conflicts:
#	flow-osgi/src/main/java/com/vaadin/flow/osgi/support/OSGiResourceProvider.java
#	flow-server/src/main/java/com/vaadin/flow/server/VaadinServlet.java
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/OSGiAccess.java
#	flow-server/src/main/java/com/vaadin/flow/server/osgi/VaadinBundleTracker.java
#	flow-server/src/main/java/com/vaadin/flow/server/startup/LookupInitializer.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/EnableOSGiRunner.java
#	flow-server/src/test/java/com/vaadin/flow/server/startup/OSGiInitApplicationRouteRegistryTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/webcomponent/OSGiWebComponentConfigurationRegistryTest.java
#	flow-tests/test-root-context/src/main/java/com/vaadin/flow/osgi/Activator.java

* Correct the resource access for VaadinService

* Extend SPI, provide javadocs some unit tests fixes
Minor code corrections, javadocs
Correct unit test
# Conflicts:
#	flow-polymer-template/src/test/java/com/vaadin/flow/component/polymertemplate/NpmTemplateParserTest.java
#	flow-server/src/test/java/com/vaadin/flow/server/communication/WebComponentBootstrapHandlerTest.java

* test: add unit tests

# Conflicts:
#	flow-tests/test-root-context/src/main/java/com/vaadin/flow/osgi/Activator.java

* test: make it possible to run felix-jetty in npm mode
# Conflicts:
#	flow-tests/servlet-containers/felix-jetty/pom.xml
#	flow-tests/test-root-context/pom-npm.xml

* Make httpclient dependency optional for now. ([#9262](https://github.com/vaadin/flow/pull/9262))

* refactoring: move OSGi resource provider impl to flow-server ([#9268](https://github.com/vaadin/flow/pull/9268))

OSGi ResourceProvider impl should be available as a service at the moment when Vaadin WAB register a servlet.
It's not possible without extra unclear config to make sure that the service is registered if it's in the flow-osgi : the bundle may be activated at any moment regardless of servlet registration.
The issue doesn't appear if the service is registered at the flow-bundle start phase.

* refactor: review fixes for OSGi ([#9289](https://github.com/vaadin/flow/pull/9289))

* refactoring: review fixes

* chore: add a comment about Jar packaging in test-root-context module

* fix: ensureServletContext should be always called

* fix: fix review comments
# Conflicts:
#	flow-tests/test-root-context/pom-npm.xml

* refactor: get rid of cmpn osgi dependency ([#9307](https://github.com/vaadin/flow/pull/9307))

Not needed for flow-server.

* refactoring: App classpath resources should be access via
ResourceProvider ([#9278](https://github.com/vaadin/flow/pull/9278))

Fixes [#9269](https://github.com/vaadin/flow/issues/9269)
# Conflicts:
#	flow-polymer-template/src/main/java/com/vaadin/flow/component/polymertemplate/NpmTemplateParser.java
#	flow-server/src/main/java/com/vaadin/flow/server/BootstrapUtils.java

* test: update unit tests

* refactor: fix various OSGi related issues

* add back lost classes during cherry-picks
* fix unit tests
* rewrite polymer template RPC

* fix: fix javadocs after merge conflicts

* fix: fix mocks in unit tests

* test: Correct activator

* refactor: correct lookup initializer filtering code

* fix: fix javadocs (SQ)

* refactor: Remove OSGi related ITs and osgi module from the repo

* fix: fix some review comments

* fix: test unstable test

* refactor: get rid of OSGiClientStaticResource ([#9277](https://github.com/vaadin/flow/pull/9277))

* fix: use content parameter in the activate method

* fix: Make OSGi incompatible vaadin-connect dependencies optional

* fix: make Spring deps optional

* fix: make a workaround for broken Route registry API

* fix: avoid not-breaking exception ojn loading class from another bundle

* fix: workaround for possible bug in route registry (like [#9360](https://github.com/vaadin/flow/issues/9360)).

* [OSGi] - Cleanup BudleActivator and Service registration, Update bnd and osgi deps ([#9361](https://github.com/vaadin/flow/pull/9361))

refactor: OSGi improvements

* update bnd-version

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* update osgi dependency and version

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix mocking osgi-classes

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* OSGiResourceProvider uses [@component](https://github.com/component) to declare the service

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* VaadinBundleTracker uses [@component](https://github.com/component) to declare the service

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* Remove `empty` BundleActivator

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* use constants for osgi.http.whiteboard.servlet.pattern

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix unregister Service PolymerPublishedEventRpcHandler

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* registers PolymerPublishedEventRpcHandler as a declarative service

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix: add explanation why OSGi Component annotation is safe to use

* fix: code review fixes

* fix: return back accidentially removed method and call init for service

* fix: remove non-existent class pattern from test

* fix: fix import order

* fix: extract code to a separate method

* fix: correct unit test

* fix: fix unit test

* refactor: simplify list merging

* fix: return back lost code after review

* fix: imports order

* fix: revert bnd version

* fix: imports order, review comments

* fix: restore lost test method

* fix: import orders

* fix: revert not working deployment of test-root-context ui classifier

* fix: check if Url contains directory change in Dev Mode ([#9392](https://github.com/vaadin/flow/pull/9392))

Checks whether the Url contains a directory change and a double encoding in Dev Mode. Returns 403 Forbidden immediately and skip the request handling, if does.

* fix: preserve filter to not lose it between page requests ([#9421](https://github.com/vaadin/flow/pull/9421))

Data communicator's filter removal, which has been introduced for components with internal filtering (like a ComboBox), may lead to filter loss during the items scrolling. This fix reverts the filter removal and the components should implement this feature on their side, if necessary.

Related-to: [vaadin/flow-components#388](https://github.com/vaadin/flow-components/issues/388)

* chore: Update issue template with discord link ([#9426](https://github.com/vaadin/flow/pull/9426))

* chore: update chrome expectation to 87 ([#9445](https://github.com/vaadin/flow/pull/9445))

* fix: revert changes which broke route registration ([#9432](https://github.com/vaadin/flow/pull/9432))

Need to active the tracker from an servlet context initializer because [@activate](https://github.com/activate) doesn't work on CTOR with parameter

* chore: fix outdated AppShell javadoc ([#9453](https://github.com/vaadin/flow/pull/9453))

* test: add test for setting global font ([#9436](https://github.com/vaadin/flow/pull/9436))

Fixes [#9409](https://github.com/vaadin/flow/issues/9409)

* fix race-condition in IT-Tests ([#9416](https://github.com/vaadin/flow/pull/9416))

Signed-off-by: Stefan Bischof <stbischof@bipolis.org>

* fix: mark tests that should not be executed in OSGi ([#9456](https://github.com/vaadin/flow/pull/9456))

* fix: mark tests that should not be executed in OSGi

* fix: don't use push in route not found error page in OSGi

* fix: avoid route with wildcard parameter which doesn't work in OSGi

* fix: exclude wildcard parameter IT and devmode IT

* fix: exclude "context" resource IT from OSGi tests

* fix: make annotation packages optional in OSGi ([#9465](https://github.com/vaadin/flow/pull/9465))

Also fix test to first open page before checking client.

fixes [#9463](https://github.com/vaadin/flow/issues/9463)

* fix: made VaadinRequest available in endpoint ([#9442](https://github.com/vaadin/flow/pull/9442))

* fix: made vaadinrequest available in endpoint

* clear VaadinRequest instance after endpoint call

* chore: remove mentions of “Connect” ([#9151](https://github.com/vaadin/flow/pull/9151))

* Rename “Connect” to “Fusion”

* Remove “Fusion” naming

* feat: Serve theme static files from VAADIN/static ([#9451](https://github.com/vaadin/flow/pull/9451))

Static files in META-INF/VAADIN/static will now be served
on request to VAADIN/static.
Added new webpack loader that changes app theme
css urls targeting ./ and ../ to be VAADIN/static/ instead.
Where ../ can not go outside of the application theme folder.

Fixes [#9405](https://github.com/vaadin/flow/issues/9405)

* refactor: Remove OSGi code from flow-server ([#9472](https://github.com/vaadin/flow/pull/9472))

* refactor: Remove OSGi code from flow-server

Fixes [#9219](https://github.com/vaadin/flow/issues/9219)

* chore: update Flow versions description ([#9469](https://github.com/vaadin/flow/pull/9469))

* feat: Theme component with app theme. ([#9418](https://github.com/vaadin/flow/pull/9418))

Added the feature that you can theme components
with the app theme by creating a css file in
'frontend/theme/myTheme/components' with the
component tag name e.g. 'my-field'  should have 'my-field.css'

Fixes [#9348](https://github.com/vaadin/flow/issues/9348)

* fix: check whether class implements an interface first directly ([#9486](https://github.com/vaadin/flow/pull/9486))

Part of [#9480](https://github.com/vaadin/flow/issues/9480)

* fix: remove instance field from singleton IndexHtmlRequestHandler ([#9475](https://github.com/vaadin/flow/pull/9475))

* fix: remove instance field from singleton IndexHtmlRequestHandler

* apply code review suggestions

* Stop logging error when updating dev dependencies ([#9476](https://github.com/vaadin/flow/pull/9476))

As there is a conflict with the dependencies and prevent adding
the flow-dev-dependencies package to the platform ([#9345](https://github.com/vaadin/flow/issues/9345)), this will hide
the unavoidable error that was logged for Vaadin apps.

Fixes [#9251](https://github.com/vaadin/flow/issues/9251)

* fix: optimize handling of requests containing Range header ([#9484](https://github.com/vaadin/flow/pull/9484))

More efficient parsing of the header value. Also, range count is capped at 16
(additional will be ignored) and overlapping ranges at 2 (request will be denied
if above).

* fix: Correct regexp to only match when digit first ([#9496](https://github.com/vaadin/flow/pull/9496))

Use Matcher::find instead of Matcher::matches as matches never matched.

Fixes [#9494](https://github.com/vaadin/flow/issues/9494)

* test: add test that external urls are not touched ([#9482](https://github.com/vaadin/flow/pull/9482))

Added test that we don't touch external
urls (relative or abosolute).
Moved flow to be under path so we can have
jetty serve "external" resources.

Fixes [#9430](https://github.com/vaadin/flow/issues/9430)

* fix: Add polyfill for constructable stylesheets ([#9489](https://github.com/vaadin/flow/pull/9489))

Add the constructable stylesheets polyfill so
app theme also works with non chrome based browsers.

Fixes [#9488](https://github.com/vaadin/flow/issues/9488)

* fix: Initialize VaadinServlet after Lookup is available ([#9500](https://github.com/vaadin/flow/pull/9500))

fix: don't initialize Vaadin servlet until Lookup is not available

* feat: Enable adding assets from node_modules ([#9495](https://github.com/vaadin/flow/pull/9495))

* feat: Enable adding assets from node_modules

It is now possible to import resources from
installed node_modules by adding the asset to
theme/my-theme/theme.json

Fixes [#9468](https://github.com/vaadin/flow/issues/9468)

* Add comment to doc on copyStaticAssets

* Fix url expectation after merge

* format lines

* test: add unit test for clear all in the servlet init method ([#9507](https://github.com/vaadin/flow/pull/9507))

* Fix: fix file system traversal of theme-loader to stop at root ([#9505](https://github.com/vaadin/flow/pull/9505))

The theme-loader recursion for themeFolder should stop
at the root level. Also if no theme folder found we should
not spend time on replacement.

* fix: enable PlainScriptViaJavaScriptIT in OSGi ([#9520](https://github.com/vaadin/flow/pull/9520))

fixes [#9461](https://github.com/vaadin/flow/issues/9461)

* fix: enable PushRouteWildcardParameterIT in OSGi ([#9518](https://github.com/vaadin/flow/pull/9518))

fixes [#9459](https://github.com/vaadin/flow/issues/9459)

* fix: enable BaseHref IT back ([#9515](https://github.com/vaadin/flow/pull/9515))

Fixes [#9458](https://github.com/vaadin/flow/issues/9458)

* chore: Add information on logging in webpack ([#9527](https://github.com/vaadin/flow/pull/9527))

Added information on log levels
with webpack loaders and plugins.

* test: fix test class and register view servlet with a context in OSGi ([#9528](https://github.com/vaadin/flow/pull/9528))

Part of [vaadin/osgi#5](https://github.com/vaadin/osgi/issues/5)

* fix: removed `hasClientIssue("8236")` guard as ITs now pass ([#9536](https://github.com/vaadin/flow/pull/9536))

* Fix: Update Lit bundle parser regex. ([#9546](https://github.com/vaadin/flow/pull/9546))

Now the pattern will not fail with a StackOverflowException
as we will search from the start character accepting
any characters until we reach the caught start character with ;

* fix: Enable lit css importing ([#9550](https://github.com/vaadin/flow/pull/9550))

Fixes [#9532](https://github.com/vaadin/flow/issues/9532)

* fix: use provided executor for frontend tools ([#9553](https://github.com/vaadin/flow/pull/9553))

fixes [vaadin/spring#691](https://github.com/vaadin/spring/issues/691)

* feat: Resource handling to not need plugin copying ([#9558](https://github.com/vaadin/flow/pull/9558))

Fixed the url handling so that theme resources
get prepended with theme/[themeName] while
having the correct absolute path. With this we can handle
these url resources with the css-loader which in turn
leads to file-loader gettign the files for copying.

External url are still not touched in any way.

part of [#9410](https://github.com/vaadin/flow/issues/9410) and [#9533](https://github.com/vaadin/flow/issues/9533)

* fix: file-loader name for windows execution ([#9575](https://github.com/vaadin/flow/pull/9575))

Windows file path separator \ should not
be used as it will result in %0B when it should
be /

* test: Fixed flaky tests caused by variable ui in ValidatorTestBase.java ([#9524](https://github.com/vaadin/flow/pull/9524))

Added a ui variable in the ValidatorTestBase class to attach strong reference, in order to avoid garbage collecting it during the test run.

* refactor: get Executor service from Lookup instead init params ([#9572](https://github.com/vaadin/flow/pull/9572))

fixes [#9570](https://github.com/vaadin/flow/issues/9570)

* fix: Add missing refreshAll method to data view

Adds the missed refresh all method to data view API.

Fixes: [#9574](https://github.com/vaadin/flow/issues/9574)

* chore: Update contributing guide with setup info ([#9576](https://github.com/vaadin/flow/pull/9576))

The contribution guide was missing the project setup information.

There were outdated instructions in the readme, which was on the other hand not up to date and only had instructions for Eclipse. Now everything is in contribution guide and readme is short and simple, pointing to contribution guide for those who want to work with the project.

* fix!: Make VaadinService.dependencyFilters unmodifiable

While the change is backwards compatible from API perspective, it could be considered a behavior change although there is quite low risk of exposure in apps. Thus targeting 2.5 for the LTS and the recently released 5.0.

* fix: encode attribute value during transfer from embedded web app ([#9583](https://github.com/vaadin/flow/pull/9583))

encode attribute value during transfer from embedded web app

* chore: move fusion endpoint code to fusion-endpoint module ([#9499](https://github.com/vaadin/flow/pull/9499))

Fixes: [#9354](https://github.com/vaadin/flow/issues/9354)
move fusion code to a separate fusion-endpoint module, so that the fusion dependencies which are not OSGi compatible can be removed from the flow-server module.

- move the code in the connect package  to fusion-server
- removed the non OSGi compatible packages from the bnd file in flow-server
- change  `TaskGenerateOpenApi` and `TaskGenerateConnect` to interfaces in flow-server, have the implementations in fusion-endpoint since they are using code inside the connect package
- Move endpoint related tests:
   - from NodeTasksTest to  NodeTasksEndpointTest,
   - from DevModeInitializerTest to DevModeInitializerEndpointTest
- Add a `LookupImpl` class in the `flow-maven-plugin` module for finding endpoint services.
- Introduce a `isInstantiableService`method in `ReflectTools`

* feat: Embedded component appTheme support ([#9588](https://github.com/vaadin/flow/pull/9588))

Add support for application theme with
embedded components.

Fixes [#8564](https://github.com/vaadin/flow/issues/8564)

* feat: Enable importing CSS from node_modules ([#9543](https://github.com/vaadin/flow/pull/9543))

Enable using CSS files from installed node_modules by adding 'importCss' to theme/my-theme/theme.json.

Fixes [#9410](https://github.com/vaadin/flow/issues/9410)

* refactor: simplify ResourceProvider ([#9609](https://github.com/vaadin/flow/pull/9609))

fixes #9605

* chore: add internal classes to access classloader and init context ([#9618](https://github.com/vaadin/flow/pull/9618))

* chore: add internal classes to access classloader and init context

related to [#9601](https://github.com/vaadin/flow/issues/9601) : needed to restore OSGi resource provider

* fix: loading indicator visible and isActive true while endpoint fetch ([#9593](https://github.com/vaadin/flow/pull/9593))

* fix: loading indicator visible and isActive true while endpoint fetch

* Clarified code and added test

* fix: theme files can now be referenced as theme/theme-name ([#9590](https://github.com/vaadin/flow/pull/9590))

Theme files are now copied under theme/[theme-name]
and can be referenced by theme/them-name/path/file.ff
even though they are located at VAADIN/static

Fixes: [#9405](https://github.com/vaadin/flow/issues/9405) and [#9535](https://github.com/vaadin/flow/issues/9535)

* Fix: Generated theme.js is now named theme.generated.js ([#9616](https://github.com/vaadin/flow/pull/9616))

my-theme.js is now generated as my-theme.generated.js

Fixes [#9595](https://github.com/vaadin/flow/issues/9595)

* Feat: Check that npm resources are available ([#9617](https://github.com/vaadin/flow/pull/9617))

Check that we have named npm resources
available or throw an exception informing
the user to install it using a NpmPackage
annotation or manually with (p)npm i

Fixes [#9615](https://github.com/vaadin/flow/issues/9615)

* refactor: rename the app-theme root folder from theme to themes ([#9626](https://github.com/vaadin/flow/pull/9626))

Fixes [#9611](https://github.com/vaadin/flow/issues/9611)

* refactor: refine renaming and incorrect paths in ThemeIT ([#9634](https://github.com/vaadin/flow/pull/9634))

* rename app-theme root folder to themes

* chore: fix flaky tests that depends on mock count ([#9631](https://github.com/vaadin/flow/pull/9631))

* chore: create deepClean profile ([#9311](https://github.com/vaadin/flow/pull/9311))

Using the deepClean profile one can
clean up all the generated files and
node_modules folders from all test modules.

* test: add document.css level styles tests ([#9646](https://github.com/vaadin/flow/pull/9646))

Adds a tests for checking that the document.css file is injected to the document scope and not injected to embedded element shadow root.

Fixes [#9552](https://github.com/vaadin/flow/issues/9552)

* refactor: extract common config functionality and introduce add config ([#9635](https://github.com/vaadin/flow/pull/9635))

refactor: extract common config functionality and introduce add config

part of [#9417](https://github.com/vaadin/flow/issues/9417)

Co-authored-by: caalador <mikael.grankvist@gmail.com>
Co-authored-by: Guille <alvarezguille@users.noreply.github.com>
Co-authored-by: Mikhail Shabarov <61410877+mshabarov@users.noreply.github.com>
Co-authored-by: Johannes Eriksson <joheriks@vaadin.com>
Co-authored-by: Soroosh Taefi <taefi.soroosh@gmail.com>
Co-authored-by: Denis <denis@vaadin.com>
Co-authored-by: Artem Godin <fluorumlabs@users.noreply.github.com>
Co-authored-by: Anton Platonov <anton@vaadin.com>
Co-authored-by: Haijian Wang <30408303+haijian-vaadin@users.noreply.github.com>
Co-authored-by: Pekka Hyvönen <pekka@vaadin.com>
Co-authored-by: Manuel Carrasco Moñino <manolo@vaadin.com>
Co-authored-by: Stefan Bischof <33224746+stbischof@users.noreply.github.com>
Co-authored-by: Jouni Koivuviita <jouni@vaadin.com>
Co-authored-by: Jialin Shao <jialin_shao@outlook.com>
Co-authored-by: Tan Bui <tan@vaadin.com>
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fvaadin%2Fflow%2Fpull%2F9392)

Reviewers

[![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=40&v=4)](/vaadin-bot) [vaadin-bot](/vaadin-bot)

vaadin-bot left review comments

[![@denis-anisimov](https://avatars.githubusercontent.com/u/11425472?s=40&v=4)](/denis-anisimov) [denis-anisimov](/denis-anisimov)

denis-anisimov approved these changes

Assignees

No one assigned

Labels

[+0.1.0](/vaadin/flow/labels/%2B0.1.0)

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@mshabarov](https://avatars.githubusercontent.com/u/61410877?s=52&v=4)](/mshabarov) [![@denis-anisimov](https://avatars.githubusercontent.com/u/11425472?s=52&v=4)](/denis-anisimov) [![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=52&v=4)](/vaadin-bot)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from vaadin.com_0259d8cd_20250119_122551.html ===


  [All vulnerability reports](/security)
# Directory traversal in development mode handler in Vaadin 14 and 15-17

Severity:

 Medium (Base score 5.9) [CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:N/A:N](https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:N/A:N)

CVE entry:

 [CVE-2020-36321](https://www.cve.org/CVERecord?id=CVE-2020-36321)

## Overview

Improper URL validation in development mode handler in `com.vaadin:flow-server` versions 2.0.0 through 2.4.1 (Vaadin 14.0.0 through 14.4.2), and 3.0 prior to 5.0 (Vaadin 15 prior to 18) allows attacker to request arbitrary files stored outside of intended frontend resources folder.

See [CWE-20: Improper Input Validation](https://cwe.mitre.org/data/definitions/20.html), [CWE-22: Improper Limitation of a Pathname to a Restricted Directory ('Path Traversal')](https://cwe.mitre.org/data/definitions/22.html)

## Description

When running the webpack development server, it was possible to request files in the file system that are stored outside the intended frontend resources folder. This exposed two attack vectors:

* A developer running a Vaadin application locally in development mode could expose their file system to an attacker by visiting a malicious website.
* A developer running a Vaadin application locally in development mode and allowing it to be accessed from outside their own system, would expose their file system to the outside world.

The file system would be exposed to an attacker, if:

1. A Vaadin application does not have production mode enabled and is missing webpack-compiled frontend resources, and
2. the Vaadin application is deployed to a system on which it has access to a Node.js installation (or allows the installation of Node.js), and this causes the application startup to install and start the webpack development server on the system.

This issue is not present in Vaadin applications running in production mode: it only occurs when developing a Vaadin application and running the webpack development server.

## Affected products and mitigation

Users of affected versions should apply the following mitigation or upgrade. Releases that have fixed this issue include:

| Product version | Mitigation |
| --- | --- |
| Vaadin 14.0.0 - 14.4.2 | Upgrade to 14.4.3 or newer version |
| Vaadin 15 - 17 | No longer supported; Upgrade to 18.0.0 or newer version |

Please note that Vaadin versions 15-17 are no longer supported and you should update either to the latest 18 version.

## Artifacts

| Maven coordinates | Vulnerable version | Fixed version |
| --- | --- | --- |
| com.vaadin:flow-server | 2.0.0 - 2.4.1 | ≥ 2.4.2 |
| com.vaadin:flow-server | 3.0 - 4.0 | N/A |

## References

* PR: <https://github.com/vaadin/flow/pull/9392>
## History

* 2021-04-15: Requalified issue as a medium severity vulnerability
* 2020-11-26: Initial vulnerability report published

* Company
* [About](/company)
* [Careers](/company/careers)
* [Leadership](/company/leadership)
* [Brand](/trademark)
* [Whistleblowing](https://app.easywhistle.com/report/vaadin/about)

* Platform
* [Flow](/flow)
* [UI Components](/components)
* [Collaboration Kits](/collaboration)
* [Acceleration Kits](/acceleration)
* [DS Publisher](/design-system-publisher)
* [Designer](/designer)
* [TestBench](/testbench)

* Solutions
* [App creation](/solutions/create-new-app)
* [App modernization](/solutions/modernize-existing-app)
* [Migration assistance](/solutions/migration-assistance)
* [Design services](/solutions/design-services)
* [Vaadin support](/solutions/support)
* [Expert services](/solutions/expert-services)

* Developers
* [Get Vaadin certified](/certification)
* [Developer portal](/developers)
* [Start an app](https://start.vaadin.com/app)
* [Documentation](/docs/latest)
* [Add-on Directory](/directory/)
* [Training videos](/learn/training)

* Resources
* [Blog](/blog)
* [Customer stories](/success-stories)
* [Events & webinars](/events)
* [Framework comparison](/comparison)
* [For students](/student-program/)

© Vaadin Ltd. All rights reserved

* [Community Terms](/community-terms)
* [Privacy Policy](/privacy-policy)


