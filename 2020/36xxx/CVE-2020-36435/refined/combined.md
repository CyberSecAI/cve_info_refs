=== Content from github.com_88cd5e81_20250119_142612.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-fqq2-xp7m-xvm8)

**CVE-2020-36435**

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-fqq2-xp7m-xvm8)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2Fadvisories%2F%3Cid%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

1. [GitHub Advisory Database](/advisories)
2. [GitHub Reviewed](/advisories?query=type%3Areviewed)
3. [CVE-2020-36435](/advisories/GHSA-fqq2-xp7m-xvm8)

## Data race in ruspiro-singleton

High severity

GitHub Reviewed

Published
Aug 25, 2021
to the GitHub Advisory Database
•
Updated Jan 27, 2023

[Vulnerability details](/advisories/GHSA-fqq2-xp7m-xvm8)
[Dependabot alerts
0](/advisories/GHSA-fqq2-xp7m-xvm8/dependabot)

## Package

cargo

ruspiro-singleton
([Rust](/advisories?query=ecosystem%3Arust))

## Affected versions

< 0.4.1

## Patched versions

0.4.1

## Description

`Singleton<T>` is meant to be a static object that can be initialized lazily. In

order to satisfy the requirement that `static` items must implement `Sync`,

`Singleton` implemented both `Sync` and `Send` unconditionally.

This allows for a bug where non-`Sync` types such as `Cell` can be used in

singletons and cause data races in concurrent programs.

The flaw was corrected in commit `b0d2bd20e` by adding trait bounds, requiring

the contaiend type to implement `Sync`.

### References

* <https://nvd.nist.gov/vuln/detail/CVE-2020-36435>
* [RusPiRo/ruspiro-singleton#11](https://github.com/RusPiRo/ruspiro-singleton/pull/11)
* <https://rustsec.org/advisories/RUSTSEC-2020-0115.html>
* [RusPiRo/ruspiro-singleton#10](https://github.com/RusPiRo/ruspiro-singleton/issues/10)
* [RusPiRo/ruspiro-singleton@b0d2bd2](https://github.com/RusPiRo/ruspiro-singleton/commit/b0d2bd20eb40b9cbc2958b981ba2dcd9e6f9396e)
* <https://raw.githubusercontent.com/rustsec/advisory-db/main/crates/ruspiro-singleton/RUSTSEC-2020-0115.md>

Published by the [National Vulnerability Database](https://nvd.nist.gov/vuln/detail/CVE-2020-36435)
Aug 8, 2021

Reviewed
Aug 18, 2021

Published to the GitHub Advisory Database
Aug 25, 2021

Last updated
Jan 27, 2023

### Severity

High

8.1

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
High

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
High

Availability
High

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:H

### [EPSS score](https://www.first.org/epss/user-guide)

0.235%
 (61st percentile)

### Weaknesses

[CWE-119](/advisories?query=cwe%3A119) [CWE-362](/advisories?query=cwe%3A362)

### CVE ID

CVE-2020-36435

### GHSA ID

GHSA-fqq2-xp7m-xvm8

### Source code

[RusPiRo/ruspiro-singleton](https://github.com/RusPiRo/ruspiro-singleton)

 Loading

Checking history

See something to contribute?
[Suggest improvements for this vulnerability](/advisories/GHSA-fqq2-xp7m-xvm8/improve).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from raw.githubusercontent.com_f0e42a69_20250119_125923.html ===
```toml
[advisory]
id = "RUSTSEC-2020-0115"
package = "ruspiro-singleton"
date = "2020-11-16"
url = "https://github.com/RusPiRo/ruspiro-singleton/issues/10"
categories = ["memory-corruption", "thread-safety"]
keywords = ["concurrency"]
aliases = ["CVE-2020-36435", "GHSA-fqq2-xp7m-xvm8"]
cvss = "CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:H"
[versions]
patched = [">= 0.4.1"]
```
# Singleton lacks bounds on Send and Sync.
`Singleton` is meant to be a static object that can be initialized lazily. In
order to satisfy the requirement that `static` items must implement `Sync`,
`Singleton` implemented both `Sync` and `Send` unconditionally.
This allows for a bug where non-`Sync` types such as `Cell` can be used in
singletons and cause data races in concurrent programs.
The flaw was corrected in commit `b0d2bd20e` by adding trait bounds, requiring
the contaiend type to implement `Sync`.


=== Content from github.com_c7729d14_20250119_142612.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FRusPiRo%2Fruspiro-singleton%2Fissues%2F10)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FRusPiRo%2Fruspiro-singleton%2Fissues%2F10)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=RusPiRo%2Fruspiro-singleton)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[RusPiRo](/RusPiRo)
/
**[ruspiro-singleton](/RusPiRo/ruspiro-singleton)**
Public

* [Notifications](/login?return_to=%2FRusPiRo%2Fruspiro-singleton) You must be signed in to change notification settings
* [Fork
  1](/login?return_to=%2FRusPiRo%2Fruspiro-singleton)
* [Star
   3](/login?return_to=%2FRusPiRo%2Fruspiro-singleton)

* [Code](/RusPiRo/ruspiro-singleton)
* [Issues
  0](/RusPiRo/ruspiro-singleton/issues)
* [Pull requests
  0](/RusPiRo/ruspiro-singleton/pulls)
* [Actions](/RusPiRo/ruspiro-singleton/actions)
* [Security](/RusPiRo/ruspiro-singleton/security)
* [Insights](/RusPiRo/ruspiro-singleton/pulse)

Additional navigation options

* [Code](/RusPiRo/ruspiro-singleton)
* [Issues](/RusPiRo/ruspiro-singleton/issues)
* [Pull requests](/RusPiRo/ruspiro-singleton/pulls)
* [Actions](/RusPiRo/ruspiro-singleton/actions)
* [Security](/RusPiRo/ruspiro-singleton/security)
* [Insights](/RusPiRo/ruspiro-singleton/pulse)

# Singleton needs bounds on its Send/Sync traits #10

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosed[#11](https://github.com/RusPiRo/ruspiro-singleton/pull/11)Closed[Singleton needs bounds on its Send/Sync traits](#top)#10[#11](https://github.com/RusPiRo/ruspiro-singleton/pull/11)Copy linkAssignees [![2ndTaleStudio](https://avatars.githubusercontent.com/u/43264484?s=64&u=d2ffb2f75d29f52968f1d639ade867b422ae9962&v=4)](/2ndTaleStudio)Labels[bugSomething isn't working](https://github.com/RusPiRo/ruspiro-singleton/issues?q=state%3Aopen%20label%3A%22bug%22)Something isn't working![@ammaraskar](https://avatars.githubusercontent.com/u/773529?u=2c52b558c4daef8e3a6df73e6e4234d169f462b8&v=4&size=80)
## Description

![@ammaraskar](https://avatars.githubusercontent.com/u/773529?u=2c52b558c4daef8e3a6df73e6e4234d169f462b8&v=4&size=48)[ammaraskar](https://github.com/ammaraskar)opened [on Nov 16, 2020](https://github.com/RusPiRo/ruspiro-singleton/issues/10#issue-743999563)

Hi there, we (Rust group [@sslab-gatech](https://github.com/sslab-gatech)) are scanning crates on crates.io for potential soundness bugs. We noticed that `Singleton` implements Send and Sync unconiditionally:

[ruspiro-singleton/src/lib.rs](https://github.com/RusPiRo/ruspiro-singleton/blob/203f1ae3501d3b531233365b0275124a364f546e/src/lib.rs#L82-L85)

Lines 82 to 85
in
[203f1ae](/RusPiRo/ruspiro-singleton/commit/203f1ae3501d3b531233365b0275124a364f546e)

|  | // The Singleton need to implement Send & Sync to ensure cross core compile check mechanics |
| --- | --- |
|  | // this is safe as the inner RWLock ensures cross core safety |
|  | unsafe impl<T> Sync for Singleton<T> {} |
|  | unsafe impl<T> Send for Singleton<T> {} |

This is guarded by a `RwLock` but violates `RwLock`'s own assumptions that `Send` will have `T: Send` and `Sync` will be `T: Send + Sync`. The way this is structured right now allows for data races from safe Rust code, for example:

```
#![forbid(unsafe_code)]

use ruspiro_singleton::Singleton;

use std::{cell::Cell, thread};

#[derive(Debug, Clone, Copy)]
enum RefOrInt<'a> { Ref(&'a u64), Int(u64) }
static SOME_INT: u64 = 123;

static STATIC_CELL : Singleton<Cell<RefOrInt>> = Singleton::lazy(&|| {
    Cell::new(RefOrInt::Ref(&SOME_INT))
});

fn main() {
    thread::spawn(move || {
        loop {
            STATIC_CELL.with_ref(|cell| {
                // Repeatedly write Ref(&addr) and Int(0xdeadbeef) into the cell.
                cell.set(RefOrInt::Ref(&SOME_INT));
                cell.set(RefOrInt::Int(0xdeadbeef));
            });
        }
    });

    STATIC_CELL.with_ref(|cell| {
        loop {
            if let RefOrInt::Ref(addr) = cell.get() {
                // Hope that between the time we pattern match the object as a
                // `Ref`, it gets written to by the other thread.
                if addr as *const u64 == &SOME_INT as *const u64 { continue; }

                // Due to the data race, obtaining Ref(0xdeadbeef) is possible
                println!("Pointer is now: {:p}", addr);
                println!("Dereferencing addr will now segfault: {}", *addr);
            }
        }
    });
}
```

This outputs:

```
Pointer is now: 0xdeadbeef

Return Code: -11 (SIGSEGV)

```
## Metadata

### Assignees

* [![@2ndTaleStudio](https://avatars.githubusercontent.com/u/43264484?s=64&u=d2ffb2f75d29f52968f1d639ade867b422ae9962&v=4)2ndTaleStudio](/2ndTaleStudio)
### Labels

[bugSomething isn't working](https://github.com/RusPiRo/ruspiro-singleton/issues?q=state%3Aopen%20label%3A%22bug%22)Something isn't working
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from rustsec.org_23cc91e9_20250119_125924.html ===


RUSTSEC-2020-0115: ruspiro-singleton: Singleton lacks bounds on Send and Sync. › RustSec Advisory Database

#

[About](/)
[Advisories](/advisories/)
[Report Vulnerabilities](/contributing.html)

[History](https://github.com/RustSec/advisory-db/commits/main/crates/ruspiro-singleton/RUSTSEC-2020-0115.md) ⋅
[Edit](https://github.com/RustSec/advisory-db/edit/main/crates/ruspiro-singleton/RUSTSEC-2020-0115.md) ⋅
[JSON (OSV)](https://api.osv.dev/v1/vulns/RUSTSEC-2020-0115)

# RUSTSEC-2020-0115

Singleton lacks bounds on Send and Sync.

Reported
November 16, 2020

Issued
January 22, 2021

(last modified: June 13, 2023)

Package
[ruspiro-singleton](/packages/ruspiro-singleton.html)
([crates.io](https://crates.io/crates/ruspiro-singleton))

Type
Vulnerability

Categories

* [memory-corruption](/categories/memory-corruption.html)
* [thread-safety](/categories/thread-safety.html)

Keywords
[#concurrency](/keywords/concurrency.html)

Aliases

* [CVE-2020-36435](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-36435)
* [GHSA-fqq2-xp7m-xvm8](https://github.com/advisories/GHSA-fqq2-xp7m-xvm8)

References

* <https://github.com/RusPiRo/ruspiro-singleton/issues/10>

CVSS Score
8.1
HIGH

CVSS Details
Attack vectorNetwork
Attack complexityHigh
Privileges requiredNone
User interactionNone
ScopeUnchanged
ConfidentialityHigh
IntegrityHigh
AvailabilityHigh

CVSS Vector
[CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:H](https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:H)
Patched

* `>=0.4.1`

### Description

`Singleton<T>` is meant to be a static object that can be initialized lazily. In
order to satisfy the requirement that `static` items must implement `Sync`,
`Singleton` implemented both `Sync` and `Send` unconditionally.

This allows for a bug where non-`Sync` types such as `Cell` can be used in
singletons and cause data races in concurrent programs.

The flaw was corrected in commit `b0d2bd20e` by adding trait bounds, requiring
the contaiend type to implement `Sync`.

Advisory available under [CC0-1.0](https://spdx.org/licenses/CC0-1.0.html)
license.



=== Content from github.com_4dac20ac_20250119_142611.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FRusPiRo%2Fruspiro-singleton)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FRusPiRo%2Fruspiro-singleton)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=RusPiRo%2Fruspiro-singleton)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[RusPiRo](/RusPiRo)
/
**[ruspiro-singleton](/RusPiRo/ruspiro-singleton)**
Public

* [Notifications](/login?return_to=%2FRusPiRo%2Fruspiro-singleton) You must be signed in to change notification settings
* [Fork
  1](/login?return_to=%2FRusPiRo%2Fruspiro-singleton)
* [Star
   3](/login?return_to=%2FRusPiRo%2Fruspiro-singleton)

Crate to provide cross core safe singleton pattern

### License

Apache-2.0, MIT licenses found

### Licenses found

[Apache-2.0
LICENSE-APACHE](/RusPiRo/ruspiro-singleton/blob/development/./LICENSE-APACHE) [MIT
LICENSE-MIT](/RusPiRo/ruspiro-singleton/blob/development/./LICENSE-MIT)

[3
stars](/RusPiRo/ruspiro-singleton/stargazers) [1
fork](/RusPiRo/ruspiro-singleton/forks) [Branches](/RusPiRo/ruspiro-singleton/branches) [Tags](/RusPiRo/ruspiro-singleton/tags) [Activity](/RusPiRo/ruspiro-singleton/activity)
 [Star](/login?return_to=%2FRusPiRo%2Fruspiro-singleton)

 [Notifications](/login?return_to=%2FRusPiRo%2Fruspiro-singleton) You must be signed in to change notification settings

* [Code](/RusPiRo/ruspiro-singleton)
* [Issues
  0](/RusPiRo/ruspiro-singleton/issues)
* [Pull requests
  0](/RusPiRo/ruspiro-singleton/pulls)
* [Actions](/RusPiRo/ruspiro-singleton/actions)
* [Security](/RusPiRo/ruspiro-singleton/security)
* [Insights](/RusPiRo/ruspiro-singleton/pulse)

Additional navigation options

* [Code](/RusPiRo/ruspiro-singleton)
* [Issues](/RusPiRo/ruspiro-singleton/issues)
* [Pull requests](/RusPiRo/ruspiro-singleton/pulls)
* [Actions](/RusPiRo/ruspiro-singleton/actions)
* [Security](/RusPiRo/ruspiro-singleton/security)
* [Insights](/RusPiRo/ruspiro-singleton/pulse)

# RusPiRo/ruspiro-singleton

    development[Branches](/RusPiRo/ruspiro-singleton/branches)[Tags](/RusPiRo/ruspiro-singleton/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[50 Commits](/RusPiRo/ruspiro-singleton/commits/development/) | | |
| [.cargo](/RusPiRo/ruspiro-singleton/tree/development/.cargo ".cargo") | | [.cargo](/RusPiRo/ruspiro-singleton/tree/development/.cargo ".cargo") |  |  |
| [.github/workflows](/RusPiRo/ruspiro-singleton/tree/development/.github/workflows "This path skips through empty directories") | | [.github/workflows](/RusPiRo/ruspiro-singleton/tree/development/.github/workflows "This path skips through empty directories") |  |  |
| [src](/RusPiRo/ruspiro-singleton/tree/development/src "src") | | [src](/RusPiRo/ruspiro-singleton/tree/development/src "src") |  |  |
| [.gitignore](/RusPiRo/ruspiro-singleton/blob/development/.gitignore ".gitignore") | | [.gitignore](/RusPiRo/ruspiro-singleton/blob/development/.gitignore ".gitignore") |  |  |
| [.rustfmt.toml](/RusPiRo/ruspiro-singleton/blob/development/.rustfmt.toml ".rustfmt.toml") | | [.rustfmt.toml](/RusPiRo/ruspiro-singleton/blob/development/.rustfmt.toml ".rustfmt.toml") |  |  |
| [CHANGELOG.md](/RusPiRo/ruspiro-singleton/blob/development/CHANGELOG.md "CHANGELOG.md") | | [CHANGELOG.md](/RusPiRo/ruspiro-singleton/blob/development/CHANGELOG.md "CHANGELOG.md") |  |  |
| [Cargo.toml](/RusPiRo/ruspiro-singleton/blob/development/Cargo.toml "Cargo.toml") | | [Cargo.toml](/RusPiRo/ruspiro-singleton/blob/development/Cargo.toml "Cargo.toml") |  |  |
| [LICENSE-APACHE](/RusPiRo/ruspiro-singleton/blob/development/LICENSE-APACHE "LICENSE-APACHE") | | [LICENSE-APACHE](/RusPiRo/ruspiro-singleton/blob/development/LICENSE-APACHE "LICENSE-APACHE") |  |  |
| [LICENSE-MIT](/RusPiRo/ruspiro-singleton/blob/development/LICENSE-MIT "LICENSE-MIT") | | [LICENSE-MIT](/RusPiRo/ruspiro-singleton/blob/development/LICENSE-MIT "LICENSE-MIT") |  |  |
| [Makefile.toml](/RusPiRo/ruspiro-singleton/blob/development/Makefile.toml "Makefile.toml") | | [Makefile.toml](/RusPiRo/ruspiro-singleton/blob/development/Makefile.toml "Makefile.toml") |  |  |
| [README.md](/RusPiRo/ruspiro-singleton/blob/development/README.md "README.md") | | [README.md](/RusPiRo/ruspiro-singleton/blob/development/README.md "README.md") |  |  |
| [rust-toolchain.toml](/RusPiRo/ruspiro-singleton/blob/development/rust-toolchain.toml "rust-toolchain.toml") | | [rust-toolchain.toml](/RusPiRo/ruspiro-singleton/blob/development/rust-toolchain.toml "rust-toolchain.toml") |  |  |
| View all files | | |

## Repository files navigation

* README
* Apache-2.0 license
* MIT license
# RusPiRo Singleton crate

This crate provides an easy to use singleton pattern that is safe to be used across cores.

[![Travis-CI Status](https://camo.githubusercontent.com/9c345095fbe23fc706665c37a4ed3279da891de8351d2aa5f891f4f764ec2f91/68747470733a2f2f6170692e7472617669732d63692e636f6d2f5275735069526f2f7275737069726f2d73696e676c65746f6e2e7376673f6272616e63683d6d6173746572)](https://travis-ci.com/RusPiRo/ruspiro-singleton)
[![Latest Version](https://camo.githubusercontent.com/694204f4b5471041e0ec6d221e88ffd31e53dbe26eab162f47fe55bd3818eac6/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f7275737069726f2d73696e676c65746f6e2e737667)](https://crates.io/crates/ruspiro-singleton)
[![Documentation](https://camo.githubusercontent.com/af21eb7a961a1d1129cecb994a97dabfa8f673996c5e8f9e6860c6b53980a5f6/68747470733a2f2f646f63732e72732f7275737069726f2d73696e676c65746f6e2f62616467652e737667)](https://docs.rs/ruspiro-singleton)
[![License](https://camo.githubusercontent.com/1910f02001b106fa0cc875f7a4ea2750eb4b3f46a7a5b0a01b298a916c1a61b3/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f6c2f7275737069726f2d73696e676c65746f6e2e737667)](https://github.com/RusPiRo/ruspiro-singleton#license)

## Usage

To use this crate simply add the dependency to your `Cargo.toml` file:

```
[dependencies]
ruspiro-singleton = "||VERSION||"
```

Once done on any rust file you can define a static variable as `Singleton` of any type for safe cross core access in two different ways. The first variant requires to provide an instance of the data to be wrapped inside the singleton while defining the same.

```
// define the static variable
static DEMO:Singleton<Demo> = Singleton::new(Demo::new());

// define the type to be accessible as singleton
struct Demo {
    pub count: u32,
}

// implement the type that should provided as singlton
impl Demo {
    pub const fn new() -> Self {
        Demo {
            count: 0,
        }
    }
}
```

The second variant allows to pass a closure to the initialization of the `Singleton` that will be evaluated at first access to the contents of it.

> !HINT!
> Safe lazy initialization is ensured using atomics. On the Raspberry Pi atmomic operations require the *MMU* to be configured and active. Otherwise the executing CPU core will hang when trying to execute the atomic operation.

```
// define the static variable with an inizialization closure
static DEMO:Singleton<Box<Demo>> = Singleton::lazy(&|| {
    Box::new(
        Demo::new()
    )
});

// define the type to be accessible as singleton
struct Demo {
    pub count: u32,
}

// implement the type that should provided as singlton
impl Demo {
    pub const fn new() -> Self {
        Demo {
            count: 0,
        }
    };
}
```

To use the data sealed with the `Singleton` call either of the two methods `with_ref` and `with_mut` providing a closure accessing the data immuable or mutable.

```
fn main() {
    // safely use the singleton inside the closure passed to [with_mut] to update it's contents
    DEMO.with_mut(|d| {
        d.count += 10;
    });

    // safely use the singleton inside the closure passed to [with_ref] if read-only access is required
    DEMO.with_mut(|d| {
        println!("Value: {}", d.count);
    });

    // you may also return a value from the singleton to work with it after the safe singleton access
    let val = DEMO.with_ref(|d| {
        if d.count != 0 {
            true
        } else {
            false
        }
    });
}
```

## License

Licensed under Apache License, Version 2.0, ([LICENSE-APACHE](/RusPiRo/ruspiro-singleton/blob/development/LICENSE-APACHE) or <http://www.apache.org/licenses/LICENSE-2.0>) or MIT ([LICENSE-MIT](/RusPiRo/ruspiro-singleton/blob/development/LICENSE-MIT) or <http://opensource.org/licenses/MIT>)) at your choice.

## About

Crate to provide cross core safe singleton pattern

### Resources

[Readme](#readme-ov-file)
### License

Apache-2.0, MIT licenses found

### Licenses found

[Apache-2.0
LICENSE-APACHE](/RusPiRo/ruspiro-singleton/blob/development/./LICENSE-APACHE) [MIT
LICENSE-MIT](/RusPiRo/ruspiro-singleton/blob/development/./LICENSE-MIT)

[Activity](/RusPiRo/ruspiro-singleton/activity)
[Custom properties](/RusPiRo/ruspiro-singleton/custom-properties)
### Stars

[**3**
stars](/RusPiRo/ruspiro-singleton/stargazers)
### Watchers

[**1**
watching](/RusPiRo/ruspiro-singleton/watchers)
### Forks

[**1**
fork](/RusPiRo/ruspiro-singleton/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2FRusPiRo%2Fruspiro-singleton&report=RusPiRo+%28user%29)

## [Releases 10](/RusPiRo/ruspiro-singleton/releases)

[Release v0.4.3
Latest

Sep 6, 2021](/RusPiRo/ruspiro-singleton/releases/tag/v0.4.3)
[+ 9 releases](/RusPiRo/ruspiro-singleton/releases)

## [Packages 0](/orgs/RusPiRo/packages?repo_name=ruspiro-singleton)

No packages published

## [Contributors 2](/RusPiRo/ruspiro-singleton/graphs/contributors)

## Languages

* [Rust
  100.0%](/RusPiRo/ruspiro-singleton/search?l=rust)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


