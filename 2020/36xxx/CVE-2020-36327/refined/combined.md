=== Content from bundler.io_45956013_20250119_112636.html ===

[Bundler](/)

* [Docs](/docs.html)
* [Team](/contributors.html)
* [Blog](/blog)
* [Repository](https://github.com/rubygems/rubygems/tree/master/bundler)

![](/images/blog_header_transparent_bg.png)

## [A more secure bundler: We fixed our source priorities.](/blog/2021/02/15/a-more-secure-bundler-we-fixed-our-source-priorities.html)

by
[David Rodríguez](https://github.com/deivid-rodriguez/)
on
Feb 15 2021

> **NOTE**: Whereas the issue was initially fixed in bundler 2.2.10, it had to
> be reverted due to several problems caused by the initial approach. A proper
> fix was finally released with bundler 2.2.18.

## What happened?

Last week [an article about “Dependency
Confusion”](https://medium.com/%40alex.birsan/dependency-confusion-4a5d60fec610)
hit the news, where a developer was able to make thousands of dollars on bug
bounty programs from big tech companies, by pushing libraries to public
repositories that ended up unintentionally being installed into these companies
servers.

The developer was able to expose (in a non-malicious way) a vulnerability
present in well-known dependency managers, where given a library name they will
end up preferring installing it from a public source rather than from a private
source. This is not secure because the name in the public source is controlled
by the first person claiming it, whereas the name in the private source is controlled
by the private source owner.

Unfortunately, Bundler had this vulnerability.

There’s good news though:

## Things were safe on the rubygems.org side

The rubygems.org organization, in collaboration with
[diffend.io](https://diffend.io), have a pretty good malicious code detection
system. In fact, the only reason this developer was able to make all this money
by getting these gems installed in companies private servers is because our
system detected them, flagged them for us, and we determined them to be
non-malicious, and only for research purposes. If those gems had been malicious,
we wouldn’t have allowed them.

Check out the [more detailed blog
post](https://mensfeld.pl/2021/02/rubygems-dependency-confusion-side-of-things/)
from our diffend.io friends about what happened in the rubygems.org side of
things, and how things were secure.

## The issue has been fixed in bundler 2.2.10

We have shipped bundler 2.2.10 with a fix, and now whenever you specify a block
source in your `Gemfile`, bundler will prioritize it when resolving direct
dependencies specified inside, and also transitive dependencies of those. So in
the following situation both `my-private-gem` and `my-another-private-gem` will
be picked up from `https://my-private-server`, even if someone pushes a higher
version with the same name to `rubygems.org`:

```
# my-private-gem.gemspec
# ...
gem.dependency("my-another-private-gem")

```

```
# Gemfile

source "https://rubygems.org"

source "https://my-private-server" do
  gem "my-private-gem"
end

```

Make sure you upgrade your bundler version either by running `gem install
bundler`, or by upgrading rubygems through `gem update --system` (which will
install bundler 2.2.10 as a default gem).

## Final notes

The bundler team had actually been aware of this issue for a while, but
unfortunately lacks resources to take care of everything we need to take care,
so the fix was postponed for too long. Maintaining the rubygems.org
infrastructure and its client libraries requires a big amount of work and we
barely manage to keep up with it. So, if your company really needs us to stay on
top of these issues, please consider funding
[RubyTogether](https://rubytogether.org/) ❤️.

That’s all for today,

Happy bundling!

---

Deivid, André and the RubyGems team

* [Docs](/docs.html)
* [Team](/contributors.html)
* [Blog](/blog)
* [About](/about.html)
* [Repository](https://github.com/rubygems/rubygems/tree/master/bundler)



=== Content from www.zofrex.com_2cd94ab3_20250119_112639.html ===

🇺🇦   Please help support Ukraine and all people affected by Russia's aggressive and unprovoked invasion of Ukraine. [Spread awareness](https://zverok.space/blog/2022-03-03-WAR.html), and, if you can, [donate](https://www.forbes.com/sites/gabbyshacknai/2022/02/24/10-ways-to-help-the-people-of-ukraine-right-now/).

[zofrex.com](/)

[About](/about/)[Blog](/)

# Bundler is Still Vulnerable to Dependency Confusion Attacks (CVE⁠-⁠2020⁠-⁠36327)

29 April 2021
• zofrex

**TL;DR:** Bundler was vulnerable to dependency confusion attacks if you had any implicit private dependencies, and was since version 1.16.0, released in October 2017, until version 2.2.18, released in May 2021.

The latest version at the time of writing, **2.2.18**, fixes the issue.

**Last revised: 25 May 2021.**

If you’re using Bundler to manage your dependencies, you probably know that you shouldn’t use multiple global sources, and should specify sources directly for private gems:

```
source "https://rubygems.org"

gem "rails", "~> 6.1" # public gems you depend on go here

source "https://private-packages.acme.example" do
    gem "acme-logger" # private gem
end

```

If you do this, the acme-logger gem will only ever be downloaded from `private-packages.acme.example`, and never from RubyGems, even if there is a package with the same name and higher version number on RubyGems.

Sounds fine, right?

But what if acme-logger has dependencies? And what if some of those dependencies are also private? For example, if acme-logger depends on another private gem, acme-util:

```

.
├── rails
└── acme-logger
    └── acme-util

```

The documentation has [this](https://bundler.io/man/gemfile.5.html#SOURCE) to say:

> Bundler will search for child dependencies of this gem by first looking in the source selected for the parent, but if they are not found there, it will fall back on global sources using the ordering described in SOURCE PRIORITY.

[and](https://bundler.io/man/gemfile.5.html#SOURCE-PRIORITY):

> #### Source Priority
>
> When attempting to locate a gem to satisfy a gem requirement, bundler uses the following priority order:
>
> * The source explicitly attached to the gem (using :source, :path, or :git)
> * For implicit gems (dependencies of explicit gems), any source, git, or path repository declared on the parent. This results in bundler prioritizing the ActiveSupport gem from the Rails git repository over ones from rubygems.org
> * The sources specified via global source lines, searching each source in your Gemfile from last added to first added.

According to the documentation, this is fine: it will search for acme-util in the same repository it got acme-logger from, and will only attempt to fetch it from the public repository if it doesn’t find it.

However, the documentation is wrong.

## The Vulnerability

Bundler will fetch implicit dependencies (dependencies of your explicit dependencies) from any declared source in the Gemfile, even if their parents are limited to a particular source. If the gem on RubyGems has a higher version number than the gem in your private repository, Bundler will fetch that one.

Looking back at our example Gemfile again:

```
source "https://rubygems.org"

gem "rails", "~> 6.1"

source "https://private-packages.acme.example" do
    gem "acme-logger"
end

```

If my private repository has acme-util version 1.0.0 in it, and someone uploads their own acme-util to RubyGems with version 1.0.1, this is what happens when I update:

```
% bundle update
Fetching gem metadata from https://private-packages.acme.example...
Fetching gem metadata from https://rubygems.org/.
Resolving dependencies...
Using bundler 2.2.16
Using rails 6.1.0
Fetching acme-util 1.0.1 (was 1.0.0)
Installing acme-util 1.0.1 (was 1.0.0)
Using acme-logger 0.1.0
Bundle updated!

% ruby main.rb
Hello from the public Gem that is masking the private Gem. Oh no!
```
## Vulnerable versions

Affected: 1.7.0–2.2.16, except 2.2.10.

Nearly every version of Bundler released in the last three-and-a-half years is vulnerable, including 2.2.16, which is the latest version at the time of writing.

2.2.10 is a bit of a special case. It contains a fix rolled out for this issue, but the fix caused [so many](https://github.com/rubygems/rubygems/issues/4380) [other](https://github.com/rubygems/rubygems/issues/4382) [problems](https://github.com/rubygems/rubygems/issues/4383) it was [reverted](https://github.com/rubygems/rubygems/pull/4385). I don’t know if it’s safe to use, generally. Maybe it’s fine if none of the other bugs affect you?

Versions prior to 1.7 aren’t applicable because they have no source scoping at all (which makes them even more vulnerable to dependency confusion).

It’s worth noting that all 1.x versions are also vulnerable to [CVE-2016-7954](https://collectiveidea.com/blog/archives/2016/10/06/bundlers-multiple-source-security-vulnerability), although this is a slightly more niche issue, and is possible to mitigate.

## Timeline

* August 13, 2014: Bundler 1.7.0 released, introducing non-global sources, fixing [CVE-2013-0334](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-0334)
* October 31, 2017: Bundler 1.16.0 released, introducing this bug (CVE-2020-36327)
* September 30, 2020: [First report of the bug (that I know of)](https://github.com/rubygems/rubygems/issues/3982), although several reports have been made over the years that hint at its existence
* February 9, 2021: [Alex Birsan publishes his post on dependency confusion](https://medium.com/%40alex.birsan/dependency-confusion-4a5d60fec610), putting a spotlight on the issue
* February 15, 2021: Bundler 2.2.10 released, fixing the issue, and [Bundler publish a blogpost saying the issue is fixed](https://bundler.io/blog/2021/02/15/a-more-secure-bundler-we-fixed-our-source-priorities.html)
* February 17, 2021: Bundler 2.2.11 released, rolling back the fix
* February 22, 2021: The [Bundler blog post](https://bundler.io/blog/2021/02/15/a-more-secure-bundler-we-fixed-our-source-priorities.html) is updated to reflect that the fix has been rolled back (updating was delayed due to build failures of the Bundler website)
* April 29, 2021: CVE-2020-36327 is assigned

## Mitigations

There are a few options for mitigating this vulnerability, but none of them are perfect.

### Virtual Namespacing

The best mitigation, in my opinion, is to adopt the virtual namespacing pattern, which [I wrote a post about last week](/blog/2021/04/20/virtual-namespacing-robust-approach-dependency-confusion/). In short, this involves ensuring all your systems point at a mirror of RubyGems that you control, as well as your private Gem server. You then adopt a naming convention for your private gems (this is the “virtual namespace”) and set policies on your repositories that ensure that the private gems will never be fetched from RubyGems.

This is the strongest mitigation, because it is a standalone fix for dependency confusion attacks, and it requires no ongoing work once implemented (unlike individually blocklisting your private gems on the RubyGems mirror).

It does have some significant downsides, however. If your existing gems don’t already follow a naming pattern, you need to ensure you add all of them to the blocklist — missing a single one will leave you vulnerable — and if you aren’t already using a RubyGems mirror, it will potentially require a lot of configuration changes in your environment and your apps.

### Scope all gems (2.2.14+ Only)

You might be wondering if you can work-around this bug by having no global sources, which [the documentation does recommend](https://bundler.io/man/gemfile.5.html#SOURCE):

> Using the :source option for an individual gem will also make that source available as a possible global source for any other gems which do not specify explicit sources. Thus, when adding gems with explicit sources, it is recommended that you also ensure all other gems in the Gemfile are using explicit sources.

That would mean your Gemfile looks like this:

```
source "https://rubygems.org" do
    gem "rails", "~> 6.1"
end

source "https://private-packages.acme.example" do
    gem "acme-logger"
end

```

On Bundler version 2.2.13 and earlier, this doesn’t change the results at all compared to above.

On versions 2.2.14, 2.2.15, and 2.2.16 this causes an error:

```
Fetching gem metadata from https://rubygems.org/.
Fetching gem metadata from https://private-packages.acme.example...
Resolving dependencies...
Could not find acme-util-1.0.1 in any of the sources

```

This isn’t a great mitigation, in my opinion. The behaviour is out of spec, so it doesn’t feel safe to rely on. There may be edge cases where it doesn’t protect you from the vulnerability, or the behaviour may change in future versions of Bundler. As well as being unspecified behaviour, what Bundler does here is outright *weird*: it’s aware that 1.0.1 exists because it found it in the public repository, but then only tries to download it from the private repository. Effectively, you’d be relying on a bug.

That said, I think it is worth making this change. It’s the recommended way to use multiple repositories with Bundler, and writing your Gemfiles this way has mitigated other security issues in the past. I’m recommending doing this as a matter of best practice, however, and not as a mitigation for this specific issue.

It’s also so easy to apply compared to the other mitigations here, you might consider doing it for extra protection while you work on implementing a more reliable mitigation.

### Publicly register all your gems

To carry out the attack, someone needs to register gems with the same names as yours on the RubyGems repository. One way to prevent the attack from working is to do this yourself – register a dummy gem with the same name for every private gem you have.

The main downsides of this are:

* You need to make sure you register every Gem you have – if you miss a single one, you render the defence useless.
* You need to keep the list up to date as new Gems are created.
* This will publicly disclose the names of all your internal Gems, which may or may not be acceptable for you.

### Explicitly provide source for each dependency

Bundler only gets confused about *implicit* dependencies, so you can make all your private dependencies *explicit*:

```
source "https://rubygems.org" do
    gem "rails", "~> 6.1"
end

source "https://private-packages.acme.example" do
    gem "acme-logger"
    gem "acme-util"
end

```

Note that acme-util is now declared in the Gemfile, when previously it was only installed due to being a dependency of acme-logger. Configured like this, Bundler will only fetch acme-util from the private repository.

This is a workable fix if you only have a very small number of implicit private dependencies and a small number of apps using them. If you have more than a few, it’s not going to be tenable, because you have to ensure you include every implicit dependency in every Gemfile. You only have to miss one to be vulnerable. It’s too much work to keep a handle on this, especially on an ongoing basis as dependencies are added or new apps created.

However, if you only have one or two implicit dependencies, and a small enough number of apps that you can keep an eye on all their Gemfiles, this might be enough to keep you safe until Bundler is fixed.

## “What else can I do?”

Bundler is critical infrastructure for many people, and I am assuming that includes you if you are reading this, yet the team working on it lacks the resources they need to tackle issues like this in a timely manner.

I have worked with the Bundler team on this and other issues and they’re a really great bunch. If you’re unhappy that a critical bug has gone unfixed for such a long time, please, channel that energy towards [financially supporting Ruby Together, the non-profit organisation that maintains Bundler and RubyGems](https://rubytogether.org/).

## Acknowledgements

Thank you to [NeoThermic](https://twitter.com/neothermic) and [Ben](https://bengadbois.com/) for their feedback on drafts of this post.

## zofrex.com

* James 'zofrex' Sanderson

Adventures in infosec, devops, and testing



=== Content from bugzilla.redhat.com_618022da_20250119_131854.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1958999)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1958999)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1958999)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1958999

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1958999**](show_bug.cgi?id=1958999)
(CVE-2020-36327)
- [CVE-2020-36327](https://access.redhat.com/security/cve/CVE-2020-36327) rubygem-bundler: Dependencies of gems with explicit source may be installed from a different source

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2020-36327 rubygem-bundler: Dependencies of gems with explicit source may...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2020-36327 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1959000](show_bug.cgi?id=1959000 "CLOSED EOL - CVE-2020-36327 rubygem-bundler: Dependencies of gems with explicit source may be installed from a different source [fedora-all]") [1960044](show_bug.cgi?id=1960044) [1960172](show_bug.cgi?id=1960172 "CLOSED ERRATA - CVE-2020-36327 ruby: rubygem-bundler: Dependencies of gems with explicit source may be installed from a different source [fedora-all]") [1960173](show_bug.cgi?id=1960173 "CLOSED EOL - CVE-2020-36327 ruby:2.6/ruby: rubygem-bundler: Dependencies of gems with explicit source may be installed from a different source [fedora-all]") [1960174](show_bug.cgi?id=1960174 "CLOSED EOL - CVE-2020-36327 ruby:2.7/ruby: rubygem-bundler: Dependencies of gems with explicit source may be installed from a different source [fedora-all]") [1960175](show_bug.cgi?id=1960175 "CLOSED EOL - CVE-2020-36327 ruby:master/ruby: rubygem-bundler: Dependencies of gems with explicit source may be installed from a different source [fedora-all]") [1968488](show_bug.cgi?id=1968488) [1968489](show_bug.cgi?id=1968489) [1968490](show_bug.cgi?id=1968490) [1968491](show_bug.cgi?id=1968491) [1968492](show_bug.cgi?id=1968492) [1968493](show_bug.cgi?id=1968493) [1968494](show_bug.cgi?id=1968494) [1968495](show_bug.cgi?id=1968495) [1968496](show_bug.cgi?id=1968496) [1968497](show_bug.cgi?id=1968497) [1968498](show_bug.cgi?id=1968498) [1968499](show_bug.cgi?id=1968499) [1968500](show_bug.cgi?id=1968500) [1968501](show_bug.cgi?id=1968501) [1968502](show_bug.cgi?id=1968502) [1968503](show_bug.cgi?id=1968503) [1968504](show_bug.cgi?id=1968504) [1968505](show_bug.cgi?id=1968505) [1968506](show_bug.cgi?id=1968506) [1968507](show_bug.cgi?id=1968507) [2003060](show_bug.cgi?id=2003060) [2003062](show_bug.cgi?id=2003062) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1959001](show_bug.cgi?id=1959001) [1997390](show_bug.cgi?id=1997390) | | TreeView+ | [depends on](buglist.cgi?bug_id=1958999&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1958999&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2021-05-10 14:42 UTC by Pedro Sampaio | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2022-04-17 21:22 UTC ([History](show_activity.cgi?id=1958999)) | | [CC List:](page.cgi?id=fields.html#cclist) | 34 users (show)  akarol amackenz amasferr amctagga besser82 chazlett dmetzger drieden gmccullo gtanzill hhorak jaruga jhardy joe jorton jprokop mark.a.wang mkudlej mo mtasaka obarenbo pvalena roliveri ruby-maint ruby-packagers-sig shreyankg simaishi smallamp s strzibny tjochec vanmeeuwen+fedora vondruch ytale | | Fixed In Version: | rubygem-bundler 2.2.18 | | | Doc Type: | If docs needed, set a value | | | Doc Text: | A flaw was found in the way Bundler determined the source repository when installing dependencies of source-restricted gem packages. In configurations that use multiple gem repositories and explicitly define from which source repository certain gems are to be installed, a dependency of a source-restricted gem could be installed form a different source if that repository provided higher version of the package. This could lead to installation of a malicious gem version and arbitrary code execution. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2021-08-05 19:06:56 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHBA-2021:3130](https://access.redhat.com/errata/RHBA-2021%3A3130) | 0 | None | None | None | 2021-08-11 04:55:53 UTC | | Red Hat Product Errata | [RHBA-2021:4018](https://access.redhat.com/errata/RHBA-2021%3A4018) | 0 | None | None | None | 2021-10-28 01:19:09 UTC | | Red Hat Product Errata | [RHBA-2022:0593](https://access.redhat.com/errata/RHBA-2022%3A0593) | 0 | None | None | None | 2022-02-22 12:51:53 UTC | | Red Hat Product Errata | [RHBA-2022:0594](https://access.redhat.com/errata/RHBA-2022%3A0594) | 0 | None | None | None | 2022-02-22 13:48:09 UTC | | Red Hat Product Errata | [RHSA-2021:3020](https://access.redhat.com/errata/RHSA-2021%3A3020) | 0 | None | None | None | 2021-08-05 14:53:41 UTC | | Red Hat Product Errata | [RHSA-2021:3559](https://access.redhat.com/errata/RHSA-2021%3A3559) | 0 | None | None | None | 2021-09-20 07:58:45 UTC | | Red Hat Product Errata | [RHSA-2021:3982](https://access.redhat.com/errata/RHSA-2021%3A3982) | 0 | None | None | None | 2021-10-25 20:51:05 UTC | | Red Hat Product Errata | [RHSA-2022:0044](https://access.redhat.com/errata/RHSA-2022%3A0044) | 0 | None | None | None | 2022-01-10 07:29:24 UTC | | Red Hat Product Errata | [RHSA-2022:0543](https://access.redhat.com/errata/RHSA-2022%3A0543) | 0 | None | None | None | 2022-02-16 11:34:38 UTC | | Red Hat Product Errata | [RHSA-2022:0544](https://access.redhat.com/errata/RHSA-2022%3A0544) | 0 | None | None | None | 2022-02-16 11:35:43 UTC | | Red Hat Product Errata | [RHSA-2022:0545](https://access.redhat.com/errata/RHSA-2022%3A0545) | 0 | None | None | None | 2022-02-16 11:39:15 UTC | | Red Hat Product Errata | [RHSA-2022:0546](https://access.redhat.com/errata/RHSA-2022%3A0546) | 0 | None | None | None | 2022-02-16 11:42:28 UTC | | Red Hat Product Errata | [RHSA-2022:0547](https://access.redhat.com/errata/RHSA-2022%3A0547) | 0 | None | None | None | 2022-02-16 11:28:35 UTC | | Red Hat Product Errata | [RHSA-2022:0548](https://access.redhat.com/errata/RHSA-2022%3A0548) | 0 | None | None | None | 2022-02-16 11:27:44 UTC | | Red Hat Product Errata | [RHSA-2022:0581](https://access.redhat.com/errata/RHSA-2022%3A0581) | 0 | None | None | None | 2022-02-21 10:11:29 UTC | | Red Hat Product Errata | [RHSA-2022:0582](https://access.redhat.com/errata/RHSA-2022%3A0582) | 0 | None | None | None | 2022-02-21 10:12:26 UTC | | Red Hat Product Errata | [RHSA-2022:0708](https://access.redhat.com/errata/RHSA-2022%3A0708) | 0 | None | None | None | 2022-02-28 18:56:42 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1958999#c0)  Pedro Sampaio    2021-05-10 14:42:52 UTC  ``` Bundler 1.16.0 through 2.2.9 and 2.2.11 through 2.2.16 sometimes chooses a dependency source based on the highest gem version number, which means that a rogue gem found at a public source may be chosen, even if the intended choice was a private gem that is a dependency of another private gem that is explicitly depended on by the application. NOTE: it is not correct to use [CVE-2021-24105](https://access.redhat.com/security/cve/CVE-2021-24105) for every "Dependency Confusion" issue in every product.  References:  <https://github.com/rubygems/rubygems/issues/3982> <https://bundler.io/blog/2021/02/15/a-more-secure-bundler-we-fixed-our-source-priorities.html> <https://mensfeld.pl/2021/02/rubygems-dependency-confusion-attack-side-of-things/> <https://www.zofrex.com/blog/2021/04/29/bundler-still-vulnerable-dependency-confusion-cve-2020-36327/>   ```  [Comment 1](show_bug.cgi?id=1958999#c1)  Pedro Sampaio    2021-05-10 14:43:42 UTC  ``` Created rubygem-bundler tracking bugs for this issue:  Affects: fedora-all [[bug 1959000](show_bug.cgi?id=1959000 "CLOSED EOL - CVE-2020-36327 rubygem-bundler: Dependencies of gems with explicit source may be installed from a different source [fedora-all]")]   ```  [Comment 3](show_bug.cgi?id=1958999#c3)  Tomas Hoger    2021-05-13 08:42:56 UTC  ``` Created ruby tracking bugs for this issue:  Affects: fedora-all [[bug 1960172](show_bug.cgi?id=1960172 "CLOSED ERRATA - CVE-2020-36327 ruby: rubygem-bundler: Dependencies of gems with explicit source may be installed from a different source [fedora-all]")]   Created ruby:2.7/ruby tracking bugs for this issue:  Affects: fedora-all [[bug 1960174](show_bug.cgi?id=1960174 "CLOSED EOL - CVE-2020-36327 ruby:2.7/ruby: rubygem-bundler: Dependencies of gems with explicit source may be installed from a different source [fedora-all]")]   Created ruby:master/ruby tracking bugs for this issue:  Affects: fedora-all [[bug 1960175](show_bug.cgi?id=1960175 "CLOSED EOL - CVE-2020-36327 ruby:master/ruby: rubygem-bundler: Dependencies of gems with explicit source may be installed from a different source [fedora-all]")]   ```  [Comment 4](show_bug.cgi?id=1958999#c4)  Tomas Hoger    2021-05-13 13:09:59 UTC  ``` Note that this is not fixed in bundler 2.2.16.  This was reported fixed in 2.2.10, but fixes were reverted in the 2.2.11 released only two days later.  The current bundler version 2.2.17 remains unfixed.   ```  [Comment 7](show_bug.cgi?id=1958999#c7)  Tomas Hoger    2021-05-24 19:38:02 UTC  ``` An upstream PR for a new proper fix for this issue:  <https://github.com/rubygems/rubygems/pull/4609>   ```  [Comment 9](show_bug.cgi?id=1958999#c9)  Tomas Hoger    2021-05-26 07:52:17 UTC  ``` This issue was fixed in Bundler 2.2.18:  <https://github.com/rubygems/rubygems/blob/bundler-v2.2.18/bundler/CHANGELOG.md>   ```  [Comment 12](show_bug.cgi?id=1958999#c12)  Vít Ondruch    2021-05-31 11:36:47 UTC  ``` <https://github.com/rubygems/rubygems/pull/4609#issuecomment-851423668>  Just FTR, I have queried Bundler upstream what they think about possible backport. However,they might leave it up to Ruby maintainers.   ```  [Comment 13](show_bug.cgi?id=1958999#c13)  Tomas Hoger    2021-05-31 12:56:56 UTC  ``` Note that this is what bundler documentation states regarding the handling of gems with explicitly defined source, and their dependencies:  <https://bundler.io/man/gemfile.5.html#SOURCE>  """ You can select an alternate Rubygems repository for a gem using the ':source' option.    gem "some_internal_gem", :source => "<https://gems.example.com>"  This forces the gem to be loaded from this source and ignores any global sources declared at the top level of the file. If the gem does not exist in this source, it will not be installed.  Bundler will search for child dependencies of this gem by first looking in the source selected for the parent, but if they are not found there, it will fall back on global sources using the ordering described in SOURCE PRIORITY. """  That documentation indicates that dependencies should only be installed from a different source if not found in the same source as the gem with an explicitly defined source.  Note that fallback to the use of global sources in case when the private source does not provide the dependency is needed so that source-restriced gems can depend depend on gems from public repos such as RubyGems.org.   ```  [Comment 15](show_bug.cgi?id=1958999#c15)  Vít Ondruch    2021-05-31 14:02:14 UTC  ``` (In reply to Vít Ondruch from [comment #12](show_bug.cgi?id=1958999#c12)) And this is the response:  ~~~ This would be pretty hard to backport indeed. It's a big patch and the result of work & refactoring across many versions, for example, it's built on top of #4381 which is also another related security improvement. I guess the only chance would be to completely upgrade bundler on older but still supported rubies like 2.7. ~~~   ```  [Comment 25](show_bug.cgi?id=1958999#c25)  Jun Aruga    2021-06-08 12:40:49 UTC  ``` > Bundler 1.16.0 through 2.2.9 and 2.2.11 through 2.2.16 sometimes chooses  > Note that this is not fixed in bundler 2.2.16.  This was reported fixed in 2.2.10, but fixes were reverted in the 2.2.11 released only two days later.  The current bundler version 2.2.17 remains unfixed.  > This issue was fixed in Bundler 2.2.18:  Pedro or Tomas. Can you help us to clarify the CVE affected versions of the Bundler? Are the following affected versions correct?  Affected versions: * version < 1.16.0: not affected * 1.16.0 <= version <= 2.2.9: affected * 2.2.10: fixed temporarily * 2.2.11 <= version <= 2.2.17: affected  * 2.2.18 <= version: fixed. (the latest version is 2.2.19 right now).   ```  [Comment 26](show_bug.cgi?id=1958999#c26)  Yadnyawalk Tale    2021-06-08 13:00:25 UTC  ``` (In reply to Jun Aruga from [comment #25](show_bug.cgi?id=1958999#c25))  > Pedro or Tomas. Can you help us to clarify the CVE affected versions of the > Bundler? Are the following affected versions correct? >  > Affected versions: > * version < 1.16.0: not affected > * 1.16.0 <= version <= 2.2.9: affected > * 2.2.10: fixed temporarily > * 2.2.11 <= version <= 2.2.17: affected  > * 2.2.18 <= version: fixed. (the latest version is 2.2.19 right now).  This flaw affect bundler version 1.16.0 onwards till 2.2.17; except 2.2.10 which had a fix which got reverted in 2.2.11. You got that correct, Jun ([comment #25](show_bug.cgi?id=1958999#c25)).   ```  [Comment 27](show_bug.cgi?id=1958999#c27)  Tomas Hoger    2021-06-09 08:50:42 UTC  ``` In reply to [comment #25](show_bug.cgi?id=1958999#c25): > Affected versions: > * version < 1.16.0: not affected  The information in the official CVE description about 1.16.0 being the first affected version seems to come from the zofrex's blog post:  <https://www.zofrex.com/blog/2021/04/29/bundler-still-vulnerable-dependency-confusion-cve-2020-36327/>  which actually provides contradicting information - some parts stating only 1.16.0 and later are affected, and other stating all versions starting with 1.7.0 (which introduced ability to restrict gems to specific sources) are affected.  There's bundler 1.7.8 shipped in Red Hat Enterprise Linux 7 and I confirmed the problem with that version.  Hence I do not see a reason to assume versions between 1.7.0 and 1.16.0 to be unaffected.   ```  [Comment 28](show_bug.cgi?id=1958999#c28)  Jun Aruga    2021-06-10 15:11:41 UTC  ``` OK, thanks for clarifying the affected versions.  > which actually provides contradicting information - some parts stating only 1.16.0 and later are affected, and other stating all versions starting with 1.7.0 (which introduced ability to restrict gems to specific sources) are affected.  There's bundler 1.7.8 shipped in Red Hat Enterprise Linux 7 and I confirmed the problem with that version.  Hence I do not see a reason to assume versions between 1.7.0 and 1.16.0 to be unaffected.  OK. I will keep the info in mind.   ```  [Comment 29](show_bug.cgi?id=1958999#c29)  Jun Aruga    2021-06-15 13:46:49 UTC  ``` Just FYI: yesterday a PR to upgrade the bundled bundler from 2.2.15 to 2.2.20 (= latest version) was opened by a maintainer on Ruby. <https://github.com/ruby/ruby/pull/4569>   ```  [Comment 34](show_bug.cgi?id=1958999#c34)  errata-xmlrpc    2021-08-05 14:53:38 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 8  Via RHSA-2021:3020 [https://access.redhat.com/errata/RHSA-2021:3020](https://access.redhat.com/errata/RHSA-2021%3A3020)   ```  [Comment 35](show_bug.cgi?id=1958999#c35)  Product Security DevOps Team    2021-08-05 19:06:56 UTC  ``` This bug is now closed. Further updates for individual products will be reflected on the CVE page(s):  <https://access.redhat.com/security/cve/cve-2020-36327>   ```  [Comment 36](show_bug.cgi?id=1958999#c36)  errata-xmlrpc    2021-09-20 07:58:42 UTC  ``` This issue has been addressed in the following products:    Red Hat Software Collections for Red Hat Enterprise Linux 7   Red Hat Software Collections for Red Hat Enterprise Linux 7.7 EUS  Via RHSA-2021:3559 [https://access.redhat.com/errata/RHSA-2021:3559](https://access.redhat.com/errata/RHSA-2021%3A3559)   ```  [Comment 37](show_bug.cgi?id=1958999#c37)  errata-xmlrpc    2021-10-25 20:51:02 UTC  ``` This issue has been addressed in the following products:    Red Hat Software Collections for Red Hat Enterprise Linux 7   Red Hat Software Collections for Red Hat Enterprise Linux 7.7 EUS  Via RHSA-2021:3982 [https://access.redhat.com/errata/RHSA-2021:3982](https://access.redhat.com/errata/RHSA-2021%3A3982)   ```  [Comment 46](show_bug.cgi?id=1958999#c46)  errata-xmlrpc    2022-01-10 07:29:21 UTC  ``` This issue has been addressed in the following products:    OpenShift Logging 5.3  Via RHSA-2022:0044 [https://access.redhat.com/errata/RHSA-2022:0044](https://access.redhat.com/errata/RHSA-2022%3A0044)   ```  [Comment 48](show_bug.cgi?id=1958999#c48)  Mark Wang    2022-02-09 01:36:10 UTC  ``` This issue has been addressed in "Red Hat Enterprise Linux 8" via RHSA-2021:3020. In RHSA-2021:3020, ruby 2.7 is updated. The default ruby 2.5 is not updated yet. Could you share the plan of this security update to ruby 2.5?   ```  [Comment 49](show_bug.cgi?id=1958999#c49)  Vít Ondruch    2022-02-09 08:54:52 UTC  ``` (In reply to Mark Wang from [comment #48](show_bug.cgi?id=1958999#c48)) > This issue has been addressed in "Red Hat Enterprise Linux 8" via > RHSA-2021:3020. > In RHSA-2021:3020, ruby 2.7 is updated. The default ruby 2.5 is not updated > yet. > Could you share the plan of this security update to ruby 2.5?  Dear Mark,  The fixes for Ruby 2.5 are undergoing testing right now, so the release is imminent (unless some blocker is identified).  Also, please note that the fix for Ruby 2.{5,6} will differ from Ruby 2.7 and will be based on this PR:  <https://src.fedoraproject.org/rpms/ruby/pull-request/102>   ```  [Comment 50](show_bug.cgi?id=1958999#c50)  Mark Wang    2022-02-10 00:58:39 UTC  ``` (In reply to Vít Ondruch from [comment #49](show_bug.cgi?id=1958999#c49)) > Dear Mark, >  > The fixes for Ruby 2.5 are undergoing testing right now, so the release is > imminent (unless some blocker is identified). >  > Also, please note that the fix for Ruby 2.{5,6} will differ from Ruby 2.7 > and will be based on this PR: >  > <https://src.fedoraproject.org/rpms/ruby/pull-request/102>  Thanks!   ```  [Comment 53](show_bug.cgi?id=1958999#c53)  errata-xmlrpc    2022-02-16 11:27:41 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 8.1 Update Services for SAP Solutions  Via RHSA-2022:0548 [https://access.redhat.com/errata/RHSA-2022:0548](https://access.redhat.com/errata/RHSA-2022%3A0548)   ```  [Comment 54](show_bug.cgi?id=1958999#c54)  errata-xmlrpc    2022-02-16 11:28:32 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 8.2 Extended Update Support  Via RHSA-2022:0547 [https://access.redhat.com/errata/RHSA-2022:0547](https://access.redhat.com/errata/RHSA-2022%3A0547)   ```  [Comment 55](show_bug.cgi?id=1958999#c55)  errata-xmlrpc    2022-02-16 11:34:36 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 8  Via RHSA-2022:0543 [https://access.redhat.com/errata/RHSA-2022:0543](https://access.redhat.com/errata/RHSA-2022%3A0543)   ```  [Comment 56](show_bug.cgi?id=1958999#c56)  errata-xmlrpc    2022-02-16 11:35:39 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 8.4 Extended Update Support  Via RHSA-2022:0544 [https://access.redhat.com/errata/RHSA-2022:0544](https://access.redhat.com/errata/RHSA-2022%3A0544)   ```  [Comment 57](show_bug.cgi?id=1958999#c57)  errata-xmlrpc    2022-02-16 11:39:12 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 8  Via RHSA-2022:0545 [https://access.redhat.com/errata/RHSA-2022:0545](https://access.redhat.com/errata/RHSA-2022%3A0545)   ```  [Comment 58](show_bug.cgi?id=1958999#c58)  errata-xmlrpc    2022-02-16 11:42:25 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 8.4 Extended Update Support  Via RHSA-2022:0546 [https://access.redhat.com/errata/RHSA-2022:0546](https://access.redhat.com/errata/RHSA-2022%3A0546)   ```  [Comment 59](show_bug.cgi?id=1958999#c59)  Jun Aruga    2022-02-16 17:21:56 UTC  ``` Dear Mark, The fixes for RHEL 8 Ruby 2.5 was released today. You can check below documents.   <https://access.redhat.com/security/cve/CVE-2020-36327> <https://access.redhat.com/articles/6206172>   ```  [Comment 61](show_bug.cgi?id=1958999#c61)  errata-xmlrpc    2022-02-21 10:11:27 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 8.1 Update Services for SAP Solutions  Via RHSA-2022:0581 [https://access.redhat.com/errata/RHSA-2022:0581](https://access.redhat.com/errata/RHSA-2022%3A0581)   ```  [Comment 62](show_bug.cgi?id=1958999#c62)  errata-xmlrpc    2022-02-21 10:12:23 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 8.2 Extended Update Support  Via RHSA-2022:0582 [https://access.redhat.com/errata/RHSA-2022:0582](https://access.redhat.com/errata/RHSA-2022%3A0582)   ```  [Comment 64](show_bug.cgi?id=1958999#c64)  errata-xmlrpc    2022-02-28 18:56:39 UTC  ``` This issue has been addressed in the following products:    Red Hat Software Collections for Red Hat Enterprise Linux 7  Via RHSA-2022:0708 [https://access.redhat.com/errata/RHSA-2022:0708](https://access.redhat.com/errata/RHSA-2022%3A0708)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1958999&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from mensfeld.pl_c27f14df_20250119_112638.html ===

[Skip to the content](#site-content)

* [About me](https://mensfeld.pl/about-me/)
* [Contact](https://mensfeld.pl/contact/)

Search for:

[![Closer to Code](https://mensfeld.pl/wp-content/uploads/2016/10/cropped-icon.ruby_-1-2.png)](https://mensfeld.pl/)
[Closer to Code](https://mensfeld.pl/)

[![](https://mensfeld.pl/wp-content/uploads/2021/02/50339326921_b6bc96de9a_k.jpg)](https://mensfeld.pl/2021/02/rubygems-dependency-confusion-attack-side-of-things/)
# RubyGems dependency confusion attack side of things

[February 15, 2021](https://mensfeld.pl/2021/02/rubygems-dependency-confusion-attack-side-of-things/)
 /
[Maciej Mensfeld](https://mensfeld.pl/author/admin/ "Posts by Maciej Mensfeld")
 /
[0 Comments](https://mensfeld.pl/2021/02/rubygems-dependency-confusion-attack-side-of-things/#respond)

Table of Contents

* [1 It's you who is responsible for the security of your software, and bugs do exist](#its-you-who-is-responsible-for-the-security-of-your-software-and-bugs-do-exist)
* [2 Does RubyGems allow for malicious packages?](#does-rubygems-allow-for-malicious-packages)
* [3 It is a constant race](#it-is-a-constant-race)
* [4 It is not about RubyGems only but also about Bundler](#it-is-not-about-rubygems-only-but-also-about-bundler)
* [5 I use private gems, please help!](#i-use-private-gems-please-help)
* [6 Summary](#summary)

**Note:** This article is **not** to deprecate any of the findings and achievements of [Alex Birsan](https://medium.com/%40alex.birsan/dependency-confusion-4a5d60fec610). He did great work exploiting specific vulnerabilities and patterns. It is to present the RubyGems side of the story and to reassure you. We actively work to provide a healthy and safe ecosystem for our users.

After reading the [Dependency Confusion: How I Hacked Into Apple, Microsoft and Dozens of Other Companies](https://medium.com/%40alex.birsan/dependency-confusion-4a5d60fec610) I felt, that the Ruby community requires a bit of explanation from people involved in RubyGems security assessment. So here it is.

### It's you who is responsible for the security of your software, and bugs do exist

First of all, let me remind you that your system security should never rely solely on other people's OSS work. In the end, it will be your system that will get hacked. Secondly, any software has bugs, whether we're talking about Bundler, RubyGems, Yarn, or any other piece of code.

Looking at this incident as someone heavily involved with making the Ruby ecosystem secure, RubyGems did everything right.

### Does RubyGems allow for malicious packages?

Starting from September 2020, Alex has uploaded gems used for his research. [Diffend](https://diffend.io/) spotted them, and each of the findings was reported to the RubyGems security team.

RubyGems security team assessed each of them, going through the source codes to ensure they were not malicious. And they were **not**. The reason why they were allowed to stay is that:

1. A security researcher uploaded them that we knew of.
2. They included a description and reasoning why they do what they do (see [here](https://my.diffend.io/gems/valis/2300.4.2#d2h-102270-152)).
3. Several people from RubyGems checked them to ensure they were not doing any harm.

RubyGems policy regarding gems is simple:

> As long as the gem is not doing any harm or is not misleading in a harmful way, it won't be removed.

Thousands of gems download things upon being installed, run compilers, and send requests over the internet. For some advanced cases, there is no other way.

### It is a constant race

We inspect gems and take many countermeasures to ensure the whole ecosystem's safety. While we cannot promise you that we will catch every single attack ever, we are making progress, and we are getting better and better with our detection systems.

Even the day I'm writing this article, we've yanked (removed) **8** gems that were a build-up for a more significant scale attack.

### It is not about RubyGems only but also about Bundler

Bundler is a complex piece of code. The resolving engine needs to deal with many corner-cases. Security of resolution is the most important thing, but other factors like correctness and speed are also important.

While we do not know the exact way of installing those gems, our gut feeling is that they might have been resolved "incorrectly". "Incorrectly," however, indicates that they were resolved in an invalid way. At the same time, it may turn out that they were resolved exactly as expected but not as the end-user/programmer wanted. It might be, that it was due to [this](https://github.com/rubygems/rubygems/issues/3982) bug. That is, "dependency of my dependency will be checked in RubyGems."

### I use private gems, please help!

If you use private gems with private dependencies, you can do few things at the moment:

1. **Most important**: Update Bundler once the patch is released.
2. ~~**Most important**: Update Bundler to the [2.2.10 version](https://rubygems.org/gems/bundler/versions/2.2.10).~~
3. Always use Bundler [source blocks](https://bundler.io/gemfile.html#gemfiles) to ensure that private gems can only come from private sources. If your private gems depend on other private gems, you may need to declare those gems in the private source block as well.
4. Setup a tool like [Diffend](http://diffend.io/) and create rules that will block Bundler from using RubyGems as a source for gems that match your internal gems naming conventions.
5. Mirror RubyGems and upstream only gems you are interested in + your own.
6. [workaround] Book the gems names in RubyGems (althought this may also be a potential insight for hackers into internal naming conventions of your company).

### Summary

So yes, there was a bug in Bundler (fixed in 2.2.10), but at the same time, if it was not for explicit permission from the RubyGems security team, those gems would have been yanked soon after they were released. That's why in this particular case, I would rather say that those companies got "researched" rather than hacked.

This incident made RubyGems reconsider the "no harm" policy, and it may be subject to change in the near future.

---

Cover photo by [Jan Hrdina](https://www.flickr.com/photos/141464170%40N04/) on Attribution-ShareAlike 2.0 Generic (CC BY-SA 2.0).

Categories: [Ruby](https://mensfeld.pl/category/ruby/), [Security](https://mensfeld.pl/category/security/), [Software](https://mensfeld.pl/category/software/)

Tags: [Bundler](https://mensfeld.pl/tag/bundler/), [diffend](https://mensfeld.pl/tag/diffend/), [Ruby](https://mensfeld.pl/tag/ruby/), [rubygems](https://mensfeld.pl/tag/rubygems/), [security](https://mensfeld.pl/tag/security/)

## Post navigation

[How requiring a gem can mess up your already running application](https://mensfeld.pl/2021/01/how-requiring-a-gem-can-mess-up-your-already-running-application/)[Reading the uncompressed GZIP file size in Ruby without decompression](https://mensfeld.pl/2021/11/reading-the-uncompressed-gzip-file-size-in-ruby-without-decompression/)

### Leave a Reply

Your email address will not be published. Required fields are marked \*

Comment \*

Name \*

Email \*

Website

![CAPTCHA](https://mensfeld.pl/wp-content/plugins/si-captcha-for-wordpress/captcha/securimage_show.php?si_sm_captcha=1&si_form_id=com&prefix=qJmwlWxehS6yS1GO "CAPTCHA")

![Refresh](https://mensfeld.pl/wp-content/plugins/si-captcha-for-wordpress/captcha/images/refresh.png)

CAPTCHA Code \*

Δ

### Social media

* [Github](http://github.com/mensfeld/)
* [Linkedin](https://www.linkedin.com/in/maciejmensfeld "See my Linkedin profile")
* [Twitter](https://twitter.com/MaciejMensfeld)

### Archives

Archives
Select Month
 January 2025  (1)
 August 2024  (1)
 July 2024  (1)
 May 2024  (1)
 April 2024  (2)
 February 2024  (2)
 January 2024  (1)
 December 2023  (1)
 October 2023  (1)
 September 2023  (1)
 June 2023  (2)
 April 2023  (1)
 March 2023  (1)
 February 2023  (1)
 November 2022  (2)
 August 2022  (1)
 January 2022  (1)
 December 2021  (1)
 November 2021  (1)
 February 2021  (1)
 January 2021  (1)
 December 2020  (2)
 October 2020  (1)
 September 2020  (2)
 November 2019  (1)
 October 2019  (1)
 September 2019  (1)
 July 2019  (2)
 May 2019  (1)
 February 2019  (1)
 January 2019  (1)
 November 2018  (1)
 October 2018  (1)
 August 2018  (1)
 July 2018  (1)
 June 2018  (1)
 May 2018  (2)
 March 2018  (1)
 January 2018  (1)
 December 2017  (1)
 November 2017  (2)
 September 2017  (1)
 June 2017  (1)
 March 2017  (1)
 January 2017  (1)
 December 2016  (1)
 November 2016  (1)
 October 2016  (2)
 September 2016  (2)
 August 2016  (1)
 July 2016  (1)
 June 2016  (1)
 May 2016  (4)
 April 2016  (1)
 March 2016  (2)
 February 2016  (1)
 January 2016  (1)
 December 2015  (1)
 November 2015  (2)
 October 2015  (1)
 September 2015  (2)
 August 2015  (2)
 July 2015  (2)
 June 2015  (2)
 May 2015  (1)
 April 2015  (1)
 March 2015  (5)
 February 2015  (2)
 January 2015  (4)
 December 2014  (2)
 November 2014  (1)
 October 2014  (3)
 September 2014  (5)
 August 2014  (5)
 July 2014  (4)
 June 2014  (2)
 May 2014  (2)
 April 2014  (1)
 March 2014  (2)
 February 2014  (5)
 January 2014  (5)
 December 2013  (3)
 November 2013  (2)
 October 2013  (3)
 September 2013  (1)
 August 2013  (3)
 July 2013  (3)
 June 2013  (3)
 May 2013  (1)
 April 2013  (6)
 March 2013  (2)
 February 2013  (1)
 January 2013  (3)
 December 2012  (3)
 November 2012  (1)
 October 2012  (2)
 September 2012  (2)
 August 2012  (1)
 July 2012  (2)
 June 2012  (2)
 May 2012  (1)
 April 2012  (3)
 March 2012  (1)
 February 2012  (2)
 January 2012  (2)
 December 2011  (2)
 November 2011  (2)
 October 2011  (5)
 September 2011  (4)
 August 2011  (4)
 July 2011  (5)
 June 2011  (8)
 May 2011  (6)
 April 2011  (5)
 March 2011  (7)
 February 2011  (5)
 January 2011  (2)
 December 2010  (7)
 November 2010  (8)
 October 2010  (13)
 September 2010  (17)
 August 2010  (14)
 July 2010  (10)
 June 2010  (2)
 May 2010  (16)
 March 2010  (1)
 February 2010  (1)
 January 2010  (3)

### Tags

[ActiveModel](https://mensfeld.pl/tag/activemodel/)
[ActiveRecord](https://mensfeld.pl/tag/activerecord/)
[apache kafka](https://mensfeld.pl/tag/apache-kafka/)
[backup](https://mensfeld.pl/tag/backup/)
[bash](https://mensfeld.pl/tag/bash/)
[deprecation warning](https://mensfeld.pl/tag/deprecation-warning/)
[gem](https://mensfeld.pl/tag/gem/)
[HTTP](https://mensfeld.pl/tag/http/)
[Javascript](https://mensfeld.pl/tag/javascript/)
[kafka](https://mensfeld.pl/tag/kafka/)
[karafka](https://mensfeld.pl/tag/karafka/)
[karafka framework](https://mensfeld.pl/tag/karafka-framework/)
[Linux](https://mensfeld.pl/tag/linux/)
[migration](https://mensfeld.pl/tag/migration/)
[Mongo](https://mensfeld.pl/tag/mongo/)
[Mongoid](https://mensfeld.pl/tag/mongoid/)
[Mysql](https://mensfeld.pl/tag/mysql/)
[openssl](https://mensfeld.pl/tag/openssl/)
[paperclip](https://mensfeld.pl/tag/paperclip/)
[Performance](https://mensfeld.pl/tag/performance/)
[PHP](https://mensfeld.pl/tag/php/)
[Rails](https://mensfeld.pl/tag/rails/)
[Rails 2.3.8](https://mensfeld.pl/tag/rails-2-3-8/)
[Rails3](https://mensfeld.pl/tag/rails3/)
[Rails3.1](https://mensfeld.pl/tag/rails3-1/)
[Rails4](https://mensfeld.pl/tag/rails4/)
[Rails 4](https://mensfeld.pl/tag/rails-4/)
[Rails 4.0](https://mensfeld.pl/tag/rails-4-0/)
[RoR](https://mensfeld.pl/tag/ror/)
[routes](https://mensfeld.pl/tag/routes/)
[routing error](https://mensfeld.pl/tag/routing-error/)
[Ruby](https://mensfeld.pl/tag/ruby/)
[Ruby 1.8.7](https://mensfeld.pl/tag/ruby-1-8-7/)
[Ruby 1.9](https://mensfeld.pl/tag/ruby-1-9/)
[Ruby 1.9.2](https://mensfeld.pl/tag/ruby-1-9-2/)
[Ruby 1.9.3](https://mensfeld.pl/tag/ruby-1-9-3/)
[Ruby on Rails](https://mensfeld.pl/tag/ruby-on-rails/)
[RVM](https://mensfeld.pl/tag/rvm/)
[safety](https://mensfeld.pl/tag/safety/)
[server](https://mensfeld.pl/tag/server/)
[shell](https://mensfeld.pl/tag/shell/)
[Sidekiq](https://mensfeld.pl/tag/sidekiq/)
[Sinatra](https://mensfeld.pl/tag/sinatra/)
[SVN](https://mensfeld.pl/tag/svn/)
[ubuntu](https://mensfeld.pl/tag/ubuntu/)

### Archives

Archives
Select Month
 January 2025  (1)
 August 2024  (1)
 July 2024  (1)
 May 2024  (1)
 April 2024  (2)
 February 2024  (2)
 January 2024  (1)
 December 2023  (1)
 October 2023  (1)
 September 2023  (1)
 June 2023  (2)
 April 2023  (1)
 March 2023  (1)
 February 2023  (1)
 November 2022  (2)
 August 2022  (1)
 January 2022  (1)
 December 2021  (1)
 November 2021  (1)
 February 2021  (1)
 January 2021  (1)
 December 2020  (2)
 October 2020  (1)
 September 2020  (2)
 November 2019  (1)
 October 2019  (1)
 September 2019  (1)
 July 2019  (2)
 May 2019  (1)
 February 2019  (1)
 January 2019  (1)
 November 2018  (1)
 October 2018  (1)
 August 2018  (1)
 July 2018  (1)
 June 2018  (1)
 May 2018  (2)
 March 2018  (1)
 January 2018  (1)
 December 2017  (1)
 November 2017  (2)
 September 2017  (1)
 June 2017  (1)
 March 2017  (1)
 January 2017  (1)
 December 2016  (1)
 November 2016  (1)
 October 2016  (2)
 September 2016  (2)
 August 2016  (1)
 July 2016  (1)
 June 2016  (1)
 May 2016  (4)
 April 2016  (1)
 March 2016  (2)
 February 2016  (1)
 January 2016  (1)
 December 2015  (1)
 November 2015  (2)
 October 2015  (1)
 September 2015  (2)
 August 2015  (2)
 July 2015  (2)
 June 2015  (2)
 May 2015  (1)
 April 2015  (1)
 March 2015  (5)
 February 2015  (2)
 January 2015  (4)
 December 2014  (2)
 November 2014  (1)
 October 2014  (3)
 September 2014  (5)
 August 2014  (5)
 July 2014  (4)
 June 2014  (2)
 May 2014  (2)
 April 2014  (1)
 March 2014  (2)
 February 2014  (5)
 January 2014  (5)
 December 2013  (3)
 November 2013  (2)
 October 2013  (3)
 September 2013  (1)
 August 2013  (3)
 July 2013  (3)
 June 2013  (3)
 May 2013  (1)
 April 2013  (6)
 March 2013  (2)
 February 2013  (1)
 January 2013  (3)
 December 2012  (3)
 November 2012  (1)
 October 2012  (2)
 September 2012  (2)
 August 2012  (1)
 July 2012  (2)
 June 2012  (2)
 May 2012  (1)
 April 2012  (3)
 March 2012  (1)
 February 2012  (2)
 January 2012  (2)
 December 2011  (2)
 November 2011  (2)
 October 2011  (5)
 September 2011  (4)
 August 2011  (4)
 July 2011  (5)
 June 2011  (8)
 May 2011  (6)
 April 2011  (5)
 March 2011  (7)
 February 2011  (5)
 January 2011  (2)
 December 2010  (7)
 November 2010  (8)
 October 2010  (13)
 September 2010  (17)
 August 2010  (14)
 July 2010  (10)
 June 2010  (2)
 May 2010  (16)
 March 2010  (1)
 February 2010  (1)
 January 2010  (3)

### Recent Posts

* [The Silent Guardian: Why Bundler Checksums Are a Game-Changer for Your Applications](https://mensfeld.pl/2025/01/the-silent-guardian-why-bundler-checksums-are-a-game-changer-for-your-applications/)
* [Under the Hood: Enhancing Karafka’s CPU and Memory Efficiency](https://mensfeld.pl/2024/08/under-the-hood-enhancing-karafkas-cpu-and-memory-efficiency/)
* [The librdkafka Supply Chain Breakdown: rdkafka-ruby’s Darkest Hour](https://mensfeld.pl/2024/07/the-librdkafka-supply-chain-breakdown-rdkafka-rubys-darkest-hour/)
* [From Sleep to Speed: Making Rdkafka Sync Operations 16 Times Faster](https://mensfeld.pl/2024/05/from-sleep-to-speed-making-rdkafka-sync-operations-16-times-faster/)
* [Karafka 2.4 Release Announcement: Advancing Kafka Processing for Ruby and Rails](https://mensfeld.pl/2024/04/karafka-2-4-release-announcement-advancing-kafka-processing-for-ruby-and-rails/)
* [From Oniguruma to POSIX: The Regex Rift Between Ruby and C](https://mensfeld.pl/2024/04/from-oniguruma-to-posix-the-regex-rift-between-ruby-and-c/)
* [The Art of Forking: Unlocking Scalability in Ruby](https://mensfeld.pl/2024/02/the-art-of-forking-unlocking-scalability-in-ruby/)

Copyright © 2025 [Closer to Code](https://mensfeld.pl)

Theme by [Anders Noren](https://andersnoren.se) — Up ↑



=== Content from lists.fedoraproject.org_c59f3f47_20250119_112638.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/MWXHK5UUHVSHF7HTHMX6JY3WXDVNIHSL/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/MWXHK5UUHVSHF7HTHMX6JY3WXDVNIHSL/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/MWXHK5UUHVSHF7HTHMX6JY3WXDVNIHSL/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/MWXHK5UUHVSHF7HTHMX6JY3WXDVNIHSL/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-MWXHK5UUHVSHF7HTHMX6JY3WXDVNIHSL.mbox.gz?message=MWXHK5UUHVSHF7HTHMX6JY3WXDVNIHSL "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/MWXHK5UUHVSHF7HTHMX6JY3WXDVNIHSL/#MWXHK5UUHVSHF7HTHMX6JY3WXDVNIHSL)

# [SECURITY] Fedora 34 Update: ruby-3.0.2-149.fc34

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

28 Jul
2021

28 Jul
'21

8:09 p.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2021-36cdab1f8d
2021-07-29 01:06:35.173516
--------------------------------------------------------------------------------

Name : ruby
Product : Fedora 34
Version : 3.0.2
Release : 149.fc34
URL : <https://www.ruby-lang.org/>
Summary : An interpreter of object-oriented scripting language
Description :
Ruby is the interpreted scripting language for quick and easy
object-oriented programming. It has many features to process text
files and to do system management tasks (as in Perl). It is simple,
straight-forward, and extensible.

--------------------------------------------------------------------------------
Update Information:

Security fix for CVE-2020-36327 CVE-2021-31799 CVE-2021-31810 CVE-2021-32066
--------------------------------------------------------------------------------
ChangeLog:

\* Tue Jul 13 2021 Jarek Prokop jprokop@redhat.com - 3.0.2-149
- Upgrade to Ruby 3.0.2.
- Fix command injection vulnerability in RDoc.
Resolves: CVE-2021-31799
- Fix FTP PASV command response can cause Net::FTP to connect to arbitrary host.
Resolves: CVE-2021-31810
- Fix StartTLS stripping vulnerability in Net::IMAP.
Resolves: CVE-2021-32066
- Fix dependencies of gems with explicit source installed from a different
source.
Resolves: CVE-2020-36327
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #1958999 - CVE-2020-36327 rubygem-bundler: Dependencies of gems with explicit source may be installed from a different source
<https://bugzilla.redhat.com/show_bug.cgi?id=1958999>
[ 2 ] Bug #1980126 - CVE-2021-31810 ruby: FTP PASV command response can cause Net::FTP to connect to arbitrary host
<https://bugzilla.redhat.com/show_bug.cgi?id=1980126>
[ 3 ] Bug #1980128 - CVE-2021-32066 ruby: StartTLS stripping vulnerability in Net::IMAP
<https://bugzilla.redhat.com/show_bug.cgi?id=1980128>
[ 4 ] Bug #1980132 - CVE-2021-31799 rubygem-rdoc: Command injection vulnerability in RDoc
<https://bugzilla.redhat.com/show_bug.cgi?id=1980132>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2021-36cdab1f8d' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/MWXHK5UUHVSHF7HTHMX6JY3WXDVNIHSL/#MWXHK5UUHVSHF7HTHMX6JY3WXDVNIHSL)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from msrc.microsoft.com_5d6a68fd_20250119_112639.html ===
You need to enable JavaScript to run this app.

=== Content from github.com_553b299a_20250119_131853.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Frubygems%2Frubygems%2Fissues%2F3982)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Frubygems%2Frubygems%2Fissues%2F3982)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=rubygems%2Frubygems)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[rubygems](/rubygems)
/
**[rubygems](/rubygems/rubygems)**
Public

* [Notifications](/login?return_to=%2Frubygems%2Frubygems) You must be signed in to change notification settings
* [Fork
  1.8k](/login?return_to=%2Frubygems%2Frubygems)
* [Star
   3.7k](/login?return_to=%2Frubygems%2Frubygems)

* [Code](/rubygems/rubygems)
* [Issues
  195](/rubygems/rubygems/issues)
* [Pull requests
  59](/rubygems/rubygems/pulls)
* [Discussions](/rubygems/rubygems/discussions)
* [Actions](/rubygems/rubygems/actions)
* [Security](/rubygems/rubygems/security)
* [Insights](/rubygems/rubygems/pulse)

Additional navigation options

* [Code](/rubygems/rubygems)
* [Issues](/rubygems/rubygems/issues)
* [Pull requests](/rubygems/rubygems/pulls)
* [Discussions](/rubygems/rubygems/discussions)
* [Actions](/rubygems/rubygems/actions)
* [Security](/rubygems/rubygems/security)
* [Insights](/rubygems/rubygems/pulse)

# Global vs block gem server source priority doesn't work as expected #3982

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosed[#4609](https://github.com/rubygems/rubygems/pull/4609)[#3655](https://github.com/rubygems/rubygems/pull/3655)Closed[Global vs block gem server source priority doesn't work as expected](#top)#3982[#4609](https://github.com/rubygems/rubygems/pull/4609)[#3655](https://github.com/rubygems/rubygems/pull/3655)Copy linkLabels[type: bug report](https://github.com/rubygems/rubygems/issues?q=state%3Aopen%20label%3A%22type%3A%20bug%20report%22)![@deivid-rodriguez](https://avatars.githubusercontent.com/u/2887858?v=4&size=80)
## Description

![@deivid-rodriguez](https://avatars.githubusercontent.com/u/2887858?v=4&size=48)[deivid-rodriguez](https://github.com/deivid-rodriguez)opened [on Sep 30, 2020](https://github.com/rubygems/rubygems/issues/3982#issue-712172981)

In a situation like the following:

```
# my-private-gem.gemspec
# ...
gem.dependency("my-another-private-gem")

# Gemfile
source 'https://my-private-server' do
  gem 'my-private-gem'
end
```

Bundler should try to resolve using the private source for my-private-gem and all of its indirect dependencies. Only if a valid resolution is not found, it should also consider `rubygems.org` for those dependencies.

Insted, Bundle will still install `my-another-private-gem` from rubygems.org if the gem exists there. We should probably search first in the same source as `my-private-gem` before falling back.

*Originally posted by [@rafaelfranca](https://github.com/rafaelfranca) in [#3948 (comment)](https://github.com/rubygems/rubygems/issues/3948#issuecomment-692920465)*

## Metadata

### Assignees

No one assigned

### Labels

[type: bug report](https://github.com/rubygems/rubygems/issues?q=state%3Aopen%20label%3A%22type%3A%20bug%20report%22)
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


