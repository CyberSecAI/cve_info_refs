=== Content from github.com_6dcca04f_20250119_120121.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvaadin%2Fflow%2Fpull%2F8051)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvaadin%2Fflow%2Fpull%2F8051)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=vaadin%2Fflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vaadin](/vaadin)
/
**[flow](/vaadin/flow)**
Public

* [Notifications](/login?return_to=%2Fvaadin%2Fflow) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fvaadin%2Fflow)
* [Star
   628](/login?return_to=%2Fvaadin%2Fflow)

* [Code](/vaadin/flow)
* [Issues
  1.2k](/vaadin/flow/issues)
* [Pull requests
  20](/vaadin/flow/pulls)
* [Discussions](/vaadin/flow/discussions)
* [Actions](/vaadin/flow/actions)
* [Projects
  0](/vaadin/flow/projects)
* [Security](/vaadin/flow/security)
* [Insights](/vaadin/flow/pulse)

Additional navigation options

* [Code](/vaadin/flow)
* [Issues](/vaadin/flow/issues)
* [Pull requests](/vaadin/flow/pulls)
* [Discussions](/vaadin/flow/discussions)
* [Actions](/vaadin/flow/actions)
* [Projects](/vaadin/flow/projects)
* [Security](/vaadin/flow/security)
* [Insights](/vaadin/flow/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fvaadin%2Fflow%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fvaadin%2Fflow%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# inherit the default behaviour of spring for internal object mapper #8051

 Merged

[manolo](/manolo)
merged 11 commits into
[master](/vaadin/flow/tree/master "vaadin/flow:master")
from
[haijian/fix-object-mapper](/vaadin/flow/tree/haijian/fix-object-mapper "vaadin/flow:haijian/fix-object-mapper")

Apr 16, 2020

 Merged

# [inherit the default behaviour of spring for internal object mapper](#top) #8051

[manolo](/manolo)
merged 11 commits into
[master](/vaadin/flow/tree/master "vaadin/flow:master")
from
[haijian/fix-object-mapper](/vaadin/flow/tree/haijian/fix-object-mapper "vaadin/flow:haijian/fix-object-mapper")

Apr 16, 2020

[Conversation
15](/vaadin/flow/pull/8051)
[Commits
11](/vaadin/flow/pull/8051/commits)
[Checks
0](/vaadin/flow/pull/8051/checks)
[Files changed](/vaadin/flow/pull/8051/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

Copy link

Contributor

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** commented [Apr 14, 2020](#issue-599537157) • edited by mehdi-vaadin Loading

This change is [![Reviewable](https://camo.githubusercontent.com/1541c4039185914e83657d3683ec25920c672c6c5c7ab4240ee7bff601adec0b/68747470733a2f2f72657669657761626c652e696f2f7265766965775f627574746f6e2e737667)](https://reviewable.io/reviews/vaadin/flow/8051)

Sorry, something went wrong.

All reactions

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[inherit the default behaviour of spring for internal object mapper](/vaadin/flow/pull/8051/commits/ce754cfd414a9297eb35b1977abdc43379d95ec9 "inherit the default behaviour of spring for internal object mapper")`

`[ce754cf](/vaadin/flow/pull/8051/commits/ce754cfd414a9297eb35b1977abdc43379d95ec9)`

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)
[haijian-vaadin](/haijian-vaadin)
added
the
[hilla](/vaadin/flow/labels/hilla)
Issues related to Hilla
label
[Apr 14, 2020](#event-3230926175)

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[fix test](/vaadin/flow/pull/8051/commits/970c9d9add64de948a0922501851dfbb645406c1 "fix test")`

`[970c9d9](/vaadin/flow/pull/8051/commits/970c9d9add64de948a0922501851dfbb645406c1)`

[![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=40&u=89e5958e1c179e71211972c3d16cb466cf38f5c0&v=4)](/vaadin-bot)
[vaadin-bot](/vaadin-bot)
added
the
[+1.0.0](/vaadin/flow/labels/%2B1.0.0)
label
[Apr 14, 2020](#event-3231236298)

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)
[haijian-vaadin](/haijian-vaadin)
mentioned this pull request
[Apr 14, 2020](#ref-issue-597728708)

[Error serializing ZonedDateTime in 15.0.4
#8034](/vaadin/flow/issues/8034)

Closed

[![knoobie](https://avatars.githubusercontent.com/u/3968629?s=60&v=4)](/knoobie)

**[knoobie](/knoobie)**
suggested changes
[Apr 14, 2020](#pullrequestreview-392980672)

 [View reviewed changes](/vaadin/flow/pull/8051/files/970c9d9add64de948a0922501851dfbb645406c1)

[flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java](/vaadin/flow/pull/8051/files/970c9d9add64de948a0922501851dfbb645406c1#diff-56272e5f14c84ac71ebb8c8284814908e251e4e33d0484372d2bb79406d75e03)
Outdated

|  |  | @@ -153,6 +161,17 @@ public VaadinConnectController( | |
| --- | --- | --- | --- |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | private ObjectMapper getDefaultObjectMapper(ApplicationContext context) { |

Copy link

Contributor

### @knoobie **[knoobie](/knoobie)** [Apr 14, 2020](#discussion_r408179029)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Suggested change

|  | private ObjectMapper getDefaultObjectMapper(ApplicationContext context) { |
| --- | --- |
|  | private ObjectMapper createVaadinConnectObjectMapper(ApplicationContext context) { |

* I would rename the get to create, because we create a new instance
* I would rename the method to show that we create the default ObjectMapper for VaadinConnect, not the default ObjectMapper

Sorry, something went wrong.

All reactions

[flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java](/vaadin/flow/pull/8051/files/970c9d9add64de948a0922501851dfbb645406c1#diff-56272e5f14c84ac71ebb8c8284814908e251e4e33d0484372d2bb79406d75e03)

|  |  | @@ -153,6 +161,17 @@ public VaadinConnectController( | |
| --- | --- | --- | --- |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | private ObjectMapper getDefaultObjectMapper(ApplicationContext context) { |
|  |  | ObjectMapper objectMapper = Jackson2ObjectMapperBuilder.json().build(); |

Copy link

Contributor

### @knoobie **[knoobie](/knoobie)** [Apr 14, 2020](#discussion_r408181495) • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Edit: This could be all wrong - let me check it.. just saw that it is a static method call.

Edit2: It is working like this (it inherits in my test spring's config) - this is surprising.. but I it feels wrong. I would still be in favor of`context.getBean(Jackson2ObjectMapperBuilder.class)` - just in case.

~~This won't work Because you create a completely new instance again (this time from the Jackson2ObjectMapperBuilder) - so all spring related defaults are gone again.~~

~~This can be fixed in two ways:~~

* ~~add Jackson2ObjectMapperBuilder to the constructor of the class and in this method as argument~~
* ~~`context.getBean(Jackson2ObjectMapperBuilder.class)` could be used to get the current impl of spring.~~

~~See here for more information what is configured: <https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jackson/JacksonAutoConfiguration.java#L172>~~

Sorry, something went wrong.

All reactions

[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerTest.java](/vaadin/flow/pull/8051/files/970c9d9add64de948a0922501851dfbb645406c1#diff-ec0b06877a913cd0d5e59133a03ee57cc6060434101c0f3d298bcf8345772505)

|  |  | } |
| --- | --- | --- |
|  |  |  |
|  |  | @Test |
|  |  | public void should\_NotOverrideVisibility\_When\_JacksonPropertiesProvideVisibility() { |

Copy link

Contributor

### @knoobie **[knoobie](/knoobie)** [Apr 14, 2020](#discussion_r408185528)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Not blocking, just my personal opinion: I feel this needs a lot more tests.

* no mocking - a real test with Spring / Spring Boot's Applicationcontext to verify that multiple instances are created with different qualifier (default and vaadin) - example: Can be done with [ApplicationContextRunner](https://www.baeldung.com/spring-boot-context-runner)
* a test that verifies that the bug described by the user is fixed
* my comment in the last PR: [[Security Fix]Use Vaadin's own ObjectMapper instead of the one from Spring #8016 (comment)](https://github.com/vaadin/flow/pull/8016#discussion_r405137705)

Sorry, something went wrong.

All reactions

[![ptdatkhtn](https://avatars.githubusercontent.com/u/23411091?s=60&v=4)](/ptdatkhtn)

**[ptdatkhtn](/ptdatkhtn)**
previously approved these changes
[Apr 15, 2020](#pullrequestreview-393648868)

 [View reviewed changes](/vaadin/flow/pull/8051/files/970c9d9add64de948a0922501851dfbb645406c1)

Copy link

Contributor

### @ptdatkhtn **[ptdatkhtn](/ptdatkhtn)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

[![:lgtm:](https://camo.githubusercontent.com/204e5a43dbe1a0ce96b00dc9f6efaa7c31943c30f6d7fc9f92fa23ad865d6ea0/68747470733a2f2f72657669657761626c652e696f2f6c67746d2e706e67 ":lgtm:")](https://camo.githubusercontent.com/204e5a43dbe1a0ce96b00dc9f6efaa7c31943c30f6d7fc9f92fa23ad865d6ea0/68747470733a2f2f72657669657761626c652e696f2f6c67746d2e706e67)

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8051#-:-M4xNXrr6-3pn6hfp-cb:bnfp4nl)* status: 3 unresolved discussions, 1 of 1 LGTMs obtained (waiting on [@haijian-vaadin](https://github.com/haijian-vaadin))

Sorry, something went wrong.

All reactions

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[add tests](/vaadin/flow/pull/8051/commits/13e95bb21fdc87abeff05e31228a31e718e787b4 "add tests")`

`[13e95bb](/vaadin/flow/pull/8051/commits/13e95bb21fdc87abeff05e31228a31e718e787b4)`

 [![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)
[haijian-vaadin](/haijian-vaadin)
dismissed
[ptdatkhtn](/ptdatkhtn)’s [stale review](#pullrequestreview-393648868)
via
`[13e95bb](/vaadin/flow/commit/13e95bb21fdc87abeff05e31228a31e718e787b4)`
[April 15, 2020 19:24](#event-3236947602)

 [haijian-vaadin](/haijian-vaadin)
added 4 commits
[April 16, 2020 09:27](#commits-pushed-556b1f8)

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[rest endpoint test refactor](/vaadin/flow/pull/8051/commits/556b1f8cda07697f0ec9213a763081ecdc0b0754 "rest endpoint test refactor")`

`[556b1f8](/vaadin/flow/pull/8051/commits/556b1f8cda07697f0ec9213a763081ecdc0b0754)`

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[revert VaadinConnectTypeConversionEndpoints.java](/vaadin/flow/pull/8051/commits/5e02739be33ed15bb698f2650349012ff0e472fc "revert VaadinConnectTypeConversionEndpoints.java")`

`[5e02739](/vaadin/flow/pull/8051/commits/5e02739be33ed15bb698f2650349012ff0e472fc)`

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[Remove the IT suffix from the test](/vaadin/flow/pull/8051/commits/91a618362ae2684fbad454ddcc67066fec330782 "Remove the IT suffix from the test")`

`[91a6183](/vaadin/flow/pull/8051/commits/91a618362ae2684fbad454ddcc67066fec330782)`

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[method renaming](/vaadin/flow/pull/8051/commits/6ef06f07362dbb3742717045d05ccf68963e20ec "method renaming")`

`[6ef06f0](/vaadin/flow/pull/8051/commits/6ef06f07362dbb3742717045d05ccf68963e20ec)`

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

**[haijian-vaadin](/haijian-vaadin)**
commented
[Apr 16, 2020](#pullrequestreview-394415906)

 [View reviewed changes](/vaadin/flow/pull/8051/files/6ef06f07362dbb3742717045d05ccf68963e20ec)

Copy link

Contributor

Author

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8051)* status: 3 unresolved discussions, 0 of 1 LGTMs obtained, and 1 stale (waiting on [@knoobie](https://github.com/knoobie))

---

*[flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java, line 164 at r1](https://reviewable.io/reviews/vaadin/flow/8051#-M4sf03aV-Z1EpwO7ZJB-r1-164:-M513NOjD8YOXnxdYRbi:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/970c9d9add64de948a0922501851dfbb645406c1/flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java#L164)):*

*Previously, knoobie (Knoobie) wrote…*
> ```
>     private ObjectMapper createVaadinConnectObjectMapper(ApplicationContext context) {
>
> ```
>
> * I would rename the get to create, because we create a new instance
> * I would rename the method to show that we create the default ObjectMapper for VaadinConnect, not the default ObjectMapper

Done.

---

*[flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java, line 165 at r1](https://reviewable.io/reviews/vaadin/flow/8051#-M4sf03aV-Z1EpwO7ZJB-r1-165:-M513NtOBRgZxnUCF8vz:b1bqteu) ([raw file](https://github.com/vaadin/flow/blob/970c9d9add64de948a0922501851dfbb645406c1/flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java#L165)):*

*Previously, knoobie (Knoobie) wrote…*
> Edit: This could be all wrong - let me check it.. just saw that it is a static method call.
>
> Edit2: It is working like this (it inherits in my test spring's config) - this is surprising.. but I it feels wrong. I would still be in favor of`context.getBean(Jackson2ObjectMapperBuilder.class)` - just in case.
>
> ~~This won't work Because you create a completely new instance again (this time from the Jackson2ObjectMapperBuilder) - so all spring related defaults are gone again.~~
>
> ~~This can be fixed in two ways:~~
>
> * ~~add Jackson2ObjectMapperBuilder to the constructor of the class and in this method as argument~~
> * ~~`context.getBean(Jackson2ObjectMapperBuilder.class)` could be used to get the current impl of spring.~~
>
> ~~See here for more information what is configured: <https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jackson/JacksonAutoConfiguration.java#L172>~~

hmm, I think I would prefer to static way since it's a static method. Otherwise, I get code warnings.

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerTest.java, line 822 at r1](https://reviewable.io/reviews/vaadin/flow/8051#-M4sf03aV-Z1EpwO7ZJD-r1-822:-M517WW95zMtiUTjzktP:b-srzdow) ([raw file](https://github.com/vaadin/flow/blob/970c9d9add64de948a0922501851dfbb645406c1/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerTest.java#L822)):*

*Previously, knoobie (Knoobie) wrote…*
> Not blocking, just my personal opinion: I feel this needs a lot more tests.
>
> * no mocking - a real test with Spring / Spring Boot's Applicationcontext to verify that multiple instances are created with different qualifier (default and vaadin) - example: Can be done with [ApplicationContextRunner](https://www.baeldung.com/spring-boot-context-runner)
> * a test that verifies that the bug described by the user is fixed
> * my comment in the last PR: [[Security Fix]Use Vaadin's own ObjectMapper instead of the one from Spring #8016 (comment)](https://github.com/vaadin/flow/pull/8016#discussion_r405137705)

Done. Now added tests for the reported cases.

Sorry, something went wrong.

All reactions

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=80&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)

Copy link

Contributor

Author

### **[haijian-vaadin](/haijian-vaadin)** commented [Apr 16, 2020](#issuecomment-614504806)

| Thank you [@knoobie](https://github.com/knoobie) for watching this closely and all your good suggestions. Now I also feel more confident with the tests. Sorry I was a bit busy setting up the tests and didn't reply in time.  Regarding the "/api/get", let's keep it as it is for now, one benefit is that it's used exactly the same as in the reported ticket. Later on, if/when we add more tests, then we can figure a better name. |
| --- |

All reactions

Sorry, something went wrong.

[![knoobie](https://avatars.githubusercontent.com/u/3968629?s=60&v=4)](/knoobie)

**[knoobie](/knoobie)**
reviewed
[Apr 16, 2020](#pullrequestreview-394423358)

 [View reviewed changes](/vaadin/flow/pull/8051/files/6ef06f07362dbb3742717045d05ccf68963e20ec)

Copy link

Contributor

### @knoobie **[knoobie](/knoobie)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

LGTM! All good! The end result matters the most!

> Reviewed 3 of 4 files at r1, 7 of 7 files at r2.
>
> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8051#-:-M519f_q6pnqlIuCia2E:b-87d9c5)* status: all discussions resolved, 0 of 1 LGTMs obtained, and 1 stale

Sorry, something went wrong.

All reactions

[![knoobie](https://avatars.githubusercontent.com/u/3968629?s=60&v=4)](/knoobie)

**[knoobie](/knoobie)**
reviewed
[Apr 16, 2020](#pullrequestreview-394423443)

 [View reviewed changes](/vaadin/flow/pull/8051/files/6ef06f07362dbb3742717045d05ccf68963e20ec)

Copy link

Contributor

### @knoobie **[knoobie](/knoobie)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

[![:lgtm:](https://camo.githubusercontent.com/204e5a43dbe1a0ce96b00dc9f6efaa7c31943c30f6d7fc9f92fa23ad865d6ea0/68747470733a2f2f72657669657761626c652e696f2f6c67746d2e706e67 ":lgtm:")](https://camo.githubusercontent.com/204e5a43dbe1a0ce96b00dc9f6efaa7c31943c30f6d7fc9f92fa23ad865d6ea0/68747470733a2f2f72657669657761626c652e696f2f6c67746d2e706e67)

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8051#-:-M519wIlAV4brgwkQDt3:bnfp4nl)* status: ![:shipit:](https://github.githubassets.com/images/icons/emoji/shipit.png ":shipit:") complete! all discussions resolved, 1 of 1 LGTMs obtained, and 1 stale

Sorry, something went wrong.

All reactions

[![manolo](https://avatars.githubusercontent.com/u/161853?s=60&v=4)](/manolo)

**[manolo](/manolo)**
approved these changes
[Apr 16, 2020](#pullrequestreview-394433529)

 [View reviewed changes](/vaadin/flow/pull/8051/files/6ef06f07362dbb3742717045d05ccf68963e20ec)

Copy link

Member

### @manolo

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8051)* status: 1 unresolved discussion, 1 of 1 LGTMs obtained, and 1 stale (waiting on [@haijian-vaadin](https://github.com/haijian-vaadin))

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/typeconversion/BaseTypeConversionIT.java, line 99 at r2](https://reviewable.io/reviews/vaadin/flow/8051#-M51CiyVBxqbWgvsoJ4k:-M51CiyW1S3EgNX_9VUr:b7wvnle) ([raw file](https://github.com/vaadin/flow/blob/6ef06f07362dbb3742717045d05ccf68963e20ec/flow-server/src/test/java/com/vaadin/flow/server/connect/typeconversion/BaseTypeConversionIT.java#L99)):*

> ```
>     }
>
>     protected MockHttpServletResponse callMethod(String methodName) throws Exception {
> ```

Why do you need this ?

Sorry, something went wrong.

All reactions

[![manolo](https://avatars.githubusercontent.com/u/161853?s=60&v=4)](/manolo)

**[manolo](/manolo)**
requested changes
[Apr 16, 2020](#pullrequestreview-394433666)

 [View reviewed changes](/vaadin/flow/pull/8051/files/6ef06f07362dbb3742717045d05ccf68963e20ec)

Copy link

Member

### @manolo **[manolo](/manolo)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8051)* status: 1 unresolved discussion, 1 of 1 LGTMs obtained, and 1 stale (waiting on [@haijian-vaadin](https://github.com/haijian-vaadin))

Sorry, something went wrong.

All reactions

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[remove leftover code](/vaadin/flow/pull/8051/commits/b8a0fae8962ac8e7672464e7c55107fe8b081f72 "remove leftover code")`

`[b8a0fae](/vaadin/flow/pull/8051/commits/b8a0fae8962ac8e7672464e7c55107fe8b081f72)`

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

**[haijian-vaadin](/haijian-vaadin)**
commented
[Apr 16, 2020](#pullrequestreview-394452321)

 [View reviewed changes](/vaadin/flow/pull/8051/files/b8a0fae8962ac8e7672464e7c55107fe8b081f72)

Copy link

Contributor

Author

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8051)* status: 1 unresolved discussion, 0 of 1 LGTMs obtained, and 2 stale (waiting on [@manolo](https://github.com/manolo))

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/typeconversion/BaseTypeConversionIT.java, line 99 at r2](https://reviewable.io/reviews/vaadin/flow/8051#-M51CiyVBxqbWgvsoJ4k:-M51HztGDwRLnB6WYFk4:b-int9zt) ([raw file](https://github.com/vaadin/flow/blob/6ef06f07362dbb3742717045d05ccf68963e20ec/flow-server/src/test/java/com/vaadin/flow/server/connect/typeconversion/BaseTypeConversionIT.java#L99)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> Why do you need this ?

Good catch, some leftover code that I forgot to remove. Done.

Sorry, something went wrong.

All reactions

[![manolo](https://avatars.githubusercontent.com/u/161853?s=60&v=4)](/manolo)

**[manolo](/manolo)**
requested changes
[Apr 16, 2020](#pullrequestreview-394473734)

 [View reviewed changes](/vaadin/flow/pull/8051/files/b8a0fae8962ac8e7672464e7c55107fe8b081f72)

Copy link

Member

### @manolo **[manolo](/manolo)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> Reviewed 3 of 4 files at r1, 6 of 7 files at r2, 1 of 1 files at r3.
>
> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8051)* status: 5 unresolved discussions, 0 of 1 LGTMs obtained, and 2 stale (waiting on [@haijian-vaadin](https://github.com/haijian-vaadin) and [@manolo](https://github.com/manolo))

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/rest/BeanWithPrivateFields.java, line 40 at r3](https://reviewable.io/reviews/vaadin/flow/8051#-M51NzeF1KFaJSbUeYGY:-M51NzeF1KFaJSbUeYGZ:b3lc9fc) ([raw file](https://github.com/vaadin/flow/blob/b8a0fae8962ac8e7672464e7c55107fe8b081f72/flow-server/src/test/java/com/vaadin/flow/server/connect/rest/BeanWithPrivateFields.java#L40)):*

> ```
> 		this.firstName = firstName;
> 	}
> }
> ```

pls format following vaadin conventions. In this case replace tabs with 4 spaces, add a new line at the end of the file

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/rest/EndpointWithRestControllerTest.java, line 118 at r3](https://reviewable.io/reviews/vaadin/flow/8051#-M51OH3f8zgEdqj_gRTa:-M51OH3f8zgEdqj_gRTb:b25l7al) ([raw file](https://github.com/vaadin/flow/blob/b8a0fae8962ac8e7672464e7c55107fe8b081f72/flow-server/src/test/java/com/vaadin/flow/server/connect/rest/EndpointWithRestControllerTest.java#L118)):*

> ```
>         return mockMvcForEndpoint.perform(requestBuilder).andReturn().getResponse().getContentAsString();
>     }
> }
> ```

nit: add new line

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/rest/MyRestController.java, line 32 at r3](https://reviewable.io/reviews/vaadin/flow/8051#-M51OLKm-RS3vFxLR-No:-M51OLKn1iU9zT7bjPbR:b3godeo) ([raw file](https://github.com/vaadin/flow/blob/b8a0fae8962ac8e7672464e7c55107fe8b081f72/flow-server/src/test/java/com/vaadin/flow/server/connect/rest/MyRestController.java#L32)):*

> ```
> 	}
>
> }
> ```

format file

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/rest/VaadinConnectEndpoints.java, line 39 at r3](https://reviewable.io/reviews/vaadin/flow/8051#-M51ONr0DO0Qyj7A9cdp:-M51ONr0DO0Qyj7A9cdq:biedhni) ([raw file](https://github.com/vaadin/flow/blob/b8a0fae8962ac8e7672464e7c55107fe8b081f72/flow-server/src/test/java/com/vaadin/flow/server/connect/rest/VaadinConnectEndpoints.java#L39)):*

> ```
>             return zonedDateTime;
>         }
>
> ```

extra spaces

Sorry, something went wrong.

All reactions

 [![@manolo](https://avatars.githubusercontent.com/u/161853?s=40&u=0caf995d8c58d5a0785b1d4241e9ce0c0a62145f&v=4)](/manolo)
[manolo](/manolo)
self-requested a review
[April 16, 2020 09:50](#event-3239101608)

 [haijian-vaadin](/haijian-vaadin)
added 2 commits
[April 16, 2020 13:01](#commits-pushed-513e5c3)

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[code formatting](/vaadin/flow/pull/8051/commits/513e5c30cdd72f852e518c69272b66e01f1386e4 "code formatting")`

`[513e5c3](/vaadin/flow/pull/8051/commits/513e5c30cdd72f852e518c69272b66e01f1386e4)`

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[code format](/vaadin/flow/pull/8051/commits/eef328a67a8fea4a0cec5822b09d5403aedb8463 "code format")`

`[eef328a](/vaadin/flow/pull/8051/commits/eef328a67a8fea4a0cec5822b09d5403aedb8463)`

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

**[haijian-vaadin](/haijian-vaadin)**
commented
[Apr 16, 2020](#pullrequestreview-394500300)

 [View reviewed changes](/vaadin/flow/pull/8051/files/eef328a67a8fea4a0cec5822b09d5403aedb8463)

Copy link

Contributor

Author

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8051)* status: 3 unresolved discussions, 0 of 1 LGTMs obtained, and 2 stale (waiting on [@haijian-vaadin](https://github.com/haijian-vaadin), [@knoobie](https://github.com/knoobie), and [@manolo](https://github.com/manolo))

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/rest/MyRestController.java, line 32 at r3](https://reviewable.io/reviews/vaadin/flow/8051#-M51OLKm-RS3vFxLR-No:-M51W_3D5r_FYK66FjnW:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/b8a0fae8962ac8e7672464e7c55107fe8b081f72/flow-server/src/test/java/com/vaadin/flow/server/connect/rest/MyRestController.java#L32)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> format file

Done.

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/rest/VaadinConnectEndpoints.java, line 39 at r3](https://reviewable.io/reviews/vaadin/flow/8051#-M51ONr0DO0Qyj7A9cdp:-M51WZeO0dC_o7Dfcgnb:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/b8a0fae8962ac8e7672464e7c55107fe8b081f72/flow-server/src/test/java/com/vaadin/flow/server/connect/rest/VaadinConnectEndpoints.java#L39)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> extra spaces

Done.

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/typeconversion/BaseTypeConversionIT.java, line 99 at r2](https://reviewable.io/reviews/vaadin/flow/8051#-M51CiyVBxqbWgvsoJ4k:-M51MwDf5oTjty82g9Ck:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/6ef06f07362dbb3742717045d05ccf68963e20ec/flow-server/src/test/java/com/vaadin/flow/server/connect/typeconversion/BaseTypeConversionIT.java#L99)):*

*Previously, haijian-vaadin (Haijian Wang) wrote…*
> Good catch, some leftover code that I forgot to remove. Done.

Done.

Sorry, something went wrong.

All reactions

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[code formatting](/vaadin/flow/pull/8051/commits/721ccba8f1d1858170055bd748119f5002ec1b04 "code formatting")`

`[721ccba](/vaadin/flow/pull/8051/commits/721ccba8f1d1858170055bd748119f5002ec1b04)`

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

**[haijian-vaadin](/haijian-vaadin)**
commented
[Apr 16, 2020](#pullrequestreview-394551587)

 [View reviewed changes](/vaadin/flow/pull/8051/files/721ccba8f1d1858170055bd748119f5002ec1b04)

Copy link

Contributor

Author

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8051)* status: 3 unresolved discussions, 0 of 1 LGTMs obtained, and 2 stale (waiting on [@knoobie](https://github.com/knoobie) and [@manolo](https://github.com/manolo))

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/rest/BeanWithPrivateFields.java, line 40 at r3](https://reviewable.io/reviews/vaadin/flow/8051#-M51NzeF1KFaJSbUeYGY:-M51nDEA3dXPT7WZRtqa:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/b8a0fae8962ac8e7672464e7c55107fe8b081f72/flow-server/src/test/java/com/vaadin/flow/server/connect/rest/BeanWithPrivateFields.java#L40)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> pls format following vaadin conventions. In this case replace tabs with 4 spaces, add a new line at the end of the file

Done.

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/rest/EndpointWithRestControllerTest.java, line 118 at r3](https://reviewable.io/reviews/vaadin/flow/8051#-M51OH3f8zgEdqj_gRTa:-M51nETM8rBJSBKn8RSM:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/b8a0fae8962ac8e7672464e7c55107fe8b081f72/flow-server/src/test/java/com/vaadin/flow/server/connect/rest/EndpointWithRestControllerTest.java#L118)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> nit: add new line

Done.

Sorry, something went wrong.

All reactions

[![manolo](https://avatars.githubusercontent.com/u/161853?s=60&v=4)](/manolo)

**[manolo](/manolo)**
approved these changes
[Apr 16, 2020](#pullrequestreview-394583587)

 [View reviewed changes](/vaadin/flow/pull/8051/files/721ccba8f1d1858170055bd748119f5002ec1b04)

Copy link

Member

### @manolo **[manolo](/manolo)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

[![:lgtm:](https://camo.githubusercontent.com/204e5a43dbe1a0ce96b00dc9f6efaa7c31943c30f6d7fc9f92fa23ad865d6ea0/68747470733a2f2f72657669657761626c652e696f2f6c67746d2e706e67 ":lgtm:")](https://camo.githubusercontent.com/204e5a43dbe1a0ce96b00dc9f6efaa7c31943c30f6d7fc9f92fa23ad865d6ea0/68747470733a2f2f72657669657761626c652e696f2f6c67746d2e706e67)

> Reviewed 4 of 4 files at r4.
>
> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8051#-:-M51yA3E3NiLU3mn2VPt:bnfp4nl)* status: ![:shipit:](https://github.githubassets.com/images/icons/emoji/shipit.png ":shipit:") complete! all discussions resolved, 1 of 1 LGTMs obtained, and 2 stale

Sorry, something went wrong.

All reactions

[![@manolo](https://avatars.githubusercontent.com/u/161853?s=40&u=0caf995d8c58d5a0785b1d4241e9ce0c0a62145f&v=4)](/manolo)
[manolo](/manolo)
merged commit [`e9e27c3`](/vaadin/flow/commit/e9e27c3a249d6b2d78dc7a7c16ea2b76f17fd51e)
into
master

[Apr 16, 2020](https://github.com/vaadin/flow/pull/8051#event-3239682327)

 [![@manolo](https://avatars.githubusercontent.com/u/161853?s=40&u=0caf995d8c58d5a0785b1d4241e9ce0c0a62145f&v=4)](/manolo)
[manolo](/manolo)
deleted the
haijian/fix-object-mapper

branch
[April 16, 2020 12:31](#event-3239682396)

[haijian-vaadin](/haijian-vaadin)
added a commit
that referenced
this pull request
[Apr 16, 2020](#ref-commit-78fd664)
[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)

`[inherit the default behaviour of spring for internal object mapper (](/vaadin/flow/commit/78fd664150437421d9d4be5d9c31da61778847c8 "inherit the default behaviour of spring for internal object mapper (#8051)

* inherit the default behaviour of spring for internal object mapper

* fix test

* add tests

* rest endpoint test refactor

* revert VaadinConnectTypeConversionEndpoints.java

* Remove the IT suffix from the test

* method renaming

* remove leftover code

* code formatting

* code format

* code formatting")[#…](https://github.com/vaadin/flow/pull/8051)`
…

`[78fd664](/vaadin/flow/commit/78fd664150437421d9d4be5d9c31da61778847c8)`

```
[…8051](https://github.com/vaadin/flow/pull/8051))

* inherit the default behaviour of spring for internal object mapper

* fix test

* add tests

* rest endpoint test refactor

* revert VaadinConnectTypeConversionEndpoints.java

* Remove the IT suffix from the test

* method renaming

* remove leftover code

* code formatting

* code format

* code formatting
```

[haijian-vaadin](/haijian-vaadin)
added a commit
that referenced
this pull request
[Apr 16, 2020](#ref-commit-02a5275)
[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)

`[inherit the default behaviour of spring for internal object mapper (](/vaadin/flow/commit/02a52751eaeb60cde546e0a65b69d21bc345bde5 "inherit the default behaviour of spring for internal object mapper (#8051)

* inherit the default behaviour of spring for internal object mapper

* fix test

* add tests

* rest endpoint test refactor

* revert VaadinConnectTypeConversionEndpoints.java

* Remove the IT suffix from the test

* method renaming

* remove leftover code

* code formatting

* code format

* code formatting")[#…](https://github.com/vaadin/flow/pull/8051)`
…

`[02a5275](/vaadin/flow/commit/02a52751eaeb60cde546e0a65b69d21bc345bde5)`

```
[…8051](https://github.com/vaadin/flow/pull/8051))

* inherit the default behaviour of spring for internal object mapper

* fix test

* add tests

* rest endpoint test refactor

* revert VaadinConnectTypeConversionEndpoints.java

* Remove the IT suffix from the test

* method renaming

* remove leftover code

* code formatting

* code format

* code formatting
```

[haijian-vaadin](/haijian-vaadin)
added a commit
that referenced
this pull request
[Apr 16, 2020](#ref-commit-5ca5090)
[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)

`[inherit the default behaviour of spring for internal object mapper (](/vaadin/flow/commit/5ca509068dc051f287a695cd9f6af4dedf2f968a "inherit the default behaviour of spring for internal object mapper (#8051)

* inherit the default behaviour of spring for internal object mapper

* fix test

* add tests

* rest endpoint test refactor

* revert VaadinConnectTypeConversionEndpoints.java

* Remove the IT suffix from the test

* method renaming

* remove leftover code

* code formatting

* code format

* code formatting")[#…](https://github.com/vaadin/flow/pull/8051)`
…

`[5ca5090](/vaadin/flow/commit/5ca509068dc051f287a695cd9f6af4dedf2f968a)`

```
[…8051](https://github.com/vaadin/flow/pull/8051))

* inherit the default behaviour of spring for internal object mapper

* fix test

* add tests

* rest endpoint test refactor

* revert VaadinConnectTypeConversionEndpoints.java

* Remove the IT suffix from the test

* method renaming

* remove leftover code

* code formatting

* code format

* code formatting
```

[haijian-vaadin](/haijian-vaadin)
added a commit
that referenced
this pull request
[Apr 16, 2020](#ref-commit-3c089c6)
[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)

`[inherit the default behaviour of spring for internal object mapper (](/vaadin/flow/commit/3c089c6200df6a1d1e9703f3a8fb53a294b4df55 "inherit the default behaviour of spring for internal object mapper (#8051)

* inherit the default behaviour of spring for internal object mapper

* fix test

* add tests

* rest endpoint test refactor

* revert VaadinConnectTypeConversionEndpoints.java

* Remove the IT suffix from the test

* method renaming

* remove leftover code

* code formatting

* code format

* code formatting")[#…](https://github.com/vaadin/flow/pull/8051)`
…

`[3c089c6](/vaadin/flow/commit/3c089c6200df6a1d1e9703f3a8fb53a294b4df55)`

```
[…8051](https://github.com/vaadin/flow/pull/8051))

* inherit the default behaviour of spring for internal object mapper

* fix test

* add tests

* rest endpoint test refactor

* revert VaadinConnectTypeConversionEndpoints.java

* Remove the IT suffix from the test

* method renaming

* remove leftover code

* code formatting

* code format

* code formatting
```

[haijian-vaadin](/haijian-vaadin)
added a commit
that referenced
this pull request
[Apr 16, 2020](#ref-commit-a6d5de5)
[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)

`[inherit the default behaviour of spring for internal object mapper (](/vaadin/flow/commit/a6d5de53c1699984bcb3ca1482bb0bdcd6b4e46a "inherit the default behaviour of spring for internal object mapper (#8051)")[#…](https://github.com/vaadin/flow/pull/8051)`
…

`[a6d5de5](/vaadin/flow/commit/a6d5de53c1699984bcb3ca1482bb0bdcd6b4e46a)`

```
[…8051](https://github.com/vaadin/flow/pull/8051))
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fvaadin%2Fflow%2Fpull%2F8051)

Reviewers

[![@knoobie](https://avatars.githubusercontent.com/u/3968629?s=40&v=4)](/knoobie) [knoobie](/knoobie)

knoobie requested changes

[![@manolo](https://avatars.githubusercontent.com/u/161853?s=40&v=4)](/manolo) [manolo](/manolo)

manolo approved these changes

[![@ptdatkhtn](https://avatars.githubusercontent.com/u/23411091?s=40&v=4)](/ptdatkhtn) [ptdatkhtn](/ptdatkhtn)

ptdatkhtn left review comments

Assignees

No one assigned

Labels

[hilla](/vaadin/flow/labels/hilla)
Issues related to Hilla
[+1.0.0](/vaadin/flow/labels/%2B1.0.0)

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

5 participants

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=52&v=4)](/haijian-vaadin) [![@manolo](https://avatars.githubusercontent.com/u/161853?s=52&v=4)](/manolo) [![@knoobie](https://avatars.githubusercontent.com/u/3968629?s=52&v=4)](/knoobie) [![@ptdatkhtn](https://avatars.githubusercontent.com/u/23411091?s=52&v=4)](/ptdatkhtn) [![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=52&v=4)](/vaadin-bot)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from vaadin.com_75c0b2ba_20250119_120122.html ===


  [All vulnerability reports](/security)
# Potential sensitive data exposure in applications using Vaadin 15

Severity:

 Low (Base score 3.1) [CVSS:3.1/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:N/A:N](https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=CVSS:3.1/AV:N/AC:H/PR:L/UI:N/S:U/C:L/I:N/A:N)

CVE entry:

 [CVE-2020-36319](https://www.cve.org/CVERecord?id=CVE-2020-36319)

## Overview

Insecure configuration of default `ObjectMapper` in `com.vaadin:flow-server` versions 3.0.0 through 3.0.5 (Vaadin 15.0.0 through 15.0.4) may expose sensitive data if the application also uses e.g. `@RestController`

See [CWE-200: Exposure of Sensitive Information to an Unauthorized Actor](https://cwe.mitre.org/data/definitions/200.html)

## Description

The affected versions of Vaadin modify the default `ObjectMapper` bean in Spring to also expose private and protected properties. This can cause accidental exposure of sensitive data if the application also uses e.g. `@RestController`. Vaadin 15.0.5 fixes the problem by only modifying a separate ObjectMapper instance that isn't shared with other Spring functionality.

## Affected products and mitigation

Users of affected versions should apply the following mitigation or upgrade. Releases that have fixed this issue include:

| Product version | Mitigation |
| --- | --- |
| Vaadin 15.0.0 - 15.0.4 | Upgrade to 15.0.5 or newer version |

## Artifacts

| Maven coordinates | Vulnerable version | Fixed version |
| --- | --- | --- |
| com.vaadin:flow-server | 3.0.0 - 3.0.5 | ≥ 3.0.6 |

## Credit

This issue was discovered and responsibly reported by Christian Knoop (<https://github.com/knoobie>).

## References

* PR: <https://github.com/vaadin/flow/pull/8016>
* PR: <https://github.com/vaadin/flow/pull/8051>
## History

* 2020-04-21: Initial vulnerability report published

* Company
* [About](/company)
* [Careers](/company/careers)
* [Leadership](/company/leadership)
* [Brand](/trademark)
* [Whistleblowing](https://app.easywhistle.com/report/vaadin/about)

* Platform
* [Flow](/flow)
* [UI Components](/components)
* [Collaboration Kits](/collaboration)
* [Acceleration Kits](/acceleration)
* [DS Publisher](/design-system-publisher)
* [Designer](/designer)
* [TestBench](/testbench)

* Solutions
* [App creation](/solutions/create-new-app)
* [App modernization](/solutions/modernize-existing-app)
* [Migration assistance](/solutions/migration-assistance)
* [Design services](/solutions/design-services)
* [Vaadin support](/solutions/support)
* [Expert services](/solutions/expert-services)

* Developers
* [Get Vaadin certified](/certification)
* [Developer portal](/developers)
* [Start an app](https://start.vaadin.com/app)
* [Documentation](/docs/latest)
* [Add-on Directory](/directory/)
* [Training videos](/learn/training)

* Resources
* [Blog](/blog)
* [Customer stories](/success-stories)
* [Events & webinars](/events)
* [Framework comparison](/comparison)
* [For students](/student-program/)

© Vaadin Ltd. All rights reserved

* [Community Terms](/community-terms)
* [Privacy Policy](/privacy-policy)



=== Content from github.com_bfcd6103_20250119_120116.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvaadin%2Fflow%2Fpull%2F8016)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvaadin%2Fflow%2Fpull%2F8016)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=vaadin%2Fflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vaadin](/vaadin)
/
**[flow](/vaadin/flow)**
Public

* [Notifications](/login?return_to=%2Fvaadin%2Fflow) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fvaadin%2Fflow)
* [Star
   628](/login?return_to=%2Fvaadin%2Fflow)

* [Code](/vaadin/flow)
* [Issues
  1.2k](/vaadin/flow/issues)
* [Pull requests
  20](/vaadin/flow/pulls)
* [Discussions](/vaadin/flow/discussions)
* [Actions](/vaadin/flow/actions)
* [Projects
  0](/vaadin/flow/projects)
* [Security](/vaadin/flow/security)
* [Insights](/vaadin/flow/pulse)

Additional navigation options

* [Code](/vaadin/flow)
* [Issues](/vaadin/flow/issues)
* [Pull requests](/vaadin/flow/pulls)
* [Discussions](/vaadin/flow/discussions)
* [Actions](/vaadin/flow/actions)
* [Projects](/vaadin/flow/projects)
* [Security](/vaadin/flow/security)
* [Insights](/vaadin/flow/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fvaadin%2Fflow%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fvaadin%2Fflow%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [Security Fix]Use Vaadin's own ObjectMapper instead of the one from Spring #8016

 Merged

[haijian-vaadin](/haijian-vaadin)
merged 8 commits into
[master](/vaadin/flow/tree/master "vaadin/flow:master")
from
[haijian/fix-security-issue](/vaadin/flow/tree/haijian/fix-security-issue "vaadin/flow:haijian/fix-security-issue")

Apr 8, 2020

 Merged

# [[Security Fix]Use Vaadin's own ObjectMapper instead of the one from Spring](#top) #8016

[haijian-vaadin](/haijian-vaadin)
merged 8 commits into
[master](/vaadin/flow/tree/master "vaadin/flow:master")
from
[haijian/fix-security-issue](/vaadin/flow/tree/haijian/fix-security-issue "vaadin/flow:haijian/fix-security-issue")

Apr 8, 2020

[Conversation
16](/vaadin/flow/pull/8016)
[Commits
8](/vaadin/flow/pull/8016/commits)
[Checks
0](/vaadin/flow/pull/8016/checks)
[Files changed](/vaadin/flow/pull/8016/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

Copy link

Contributor

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** commented [Apr 7, 2020](#issue-595897751) • edited by mehdi-vaadin Loading

Fixes [#8010](https://github.com/vaadin/flow/issues/8010)

---

This change is [![Reviewable](https://camo.githubusercontent.com/1541c4039185914e83657d3683ec25920c672c6c5c7ab4240ee7bff601adec0b/68747470733a2f2f72657669657761626c652e696f2f7265766965775f627574746f6e2e737667)](https://reviewable.io/reviews/vaadin/flow/8016)

Sorry, something went wrong.

All reactions

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[Use Vaadin's own Objectmapper instead of the one from Spring](/vaadin/flow/pull/8016/commits/4fa09257f228e98c451ede8e1959db7177d8c988 "Use Vaadin's own Objectmapper instead of the one from Spring")`

`[4fa0925](/vaadin/flow/pull/8016/commits/4fa09257f228e98c451ede8e1959db7177d8c988)`

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)
[haijian-vaadin](/haijian-vaadin)
added
the
[hilla](/vaadin/flow/labels/hilla)
Issues related to Hilla
label
[Apr 7, 2020](#event-3210045288)

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)
[haijian-vaadin](/haijian-vaadin)
mentioned this pull request
[Apr 7, 2020](#ref-issue-595702104)

[Vaadin 15 exposes private properties in JSON responses of REST api
#8010](/vaadin/flow/issues/8010)

Closed

[![knoobie](https://avatars.githubusercontent.com/u/3968629?s=60&v=4)](/knoobie)

**[knoobie](/knoobie)**
reviewed
[Apr 7, 2020](#pullrequestreview-389176154)

 [View reviewed changes](/vaadin/flow/pull/8016/files/4fa09257f228e98c451ede8e1959db7177d8c988)

[...erver/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java](/vaadin/flow/pull/8016/files/4fa09257f228e98c451ede8e1959db7177d8c988#diff-a1409723779e81e0690f8e0e8d571ebb53ad01191d240614f1369c1986dd5d79)
Outdated

|  |  | \*/ |
| --- | --- | --- |
|  |  | @Bean |
|  |  | @Qualifier(VAADIN\_ENDPOINT\_MAPPER\_BEAN\_QUALIFIER) |
|  |  | ObjectMapper objectMapper(ApplicationContext context) { |

Copy link

Contributor

### @knoobie **[knoobie](/knoobie)** [Apr 7, 2020](#discussion_r404855764)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Suggested change

|  | ObjectMapper objectMapper(ApplicationContext context) { |
| --- | --- |
|  | public ObjectMapper vaadinEndpointMapper(ApplicationContext context) { |

Change method name to reflect the `Bean` that's going to be created.

Optional/Personal opinion: I would wrap the `ObjectMapper` in an object `VaadinConnectMapper#getObjectMapper` and return `VaadinConnectMapper` here as `Bean`, so it's easy to differentiate between the normal `ObjectMapper` and the Object Vaadin is using internally.

Sorry, something went wrong.

All reactions

[...erver/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java](/vaadin/flow/pull/8016/files/4fa09257f228e98c451ede8e1959db7177d8c988#diff-a1409723779e81e0690f8e0e8d571ebb53ad01191d240614f1369c1986dd5d79)
Outdated

|  |  | } |
| --- | --- | --- |
|  |  | return objectMapper; |
|  |  | } catch (Exception e) { |
|  |  | throw new IllegalStateException(String.format( |

### This comment was marked as outdated.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fvaadin%2Fflow%2Fpull%2F8016)

Sorry, something went wrong.

[flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java](/vaadin/flow/pull/8016/files/4fa09257f228e98c451ede8e1959db7177d8c988#diff-56272e5f14c84ac71ebb8c8284814908e251e4e33d0484372d2bb79406d75e03)
Outdated

|  |  | @@ -136,15 +133,13 @@ | |
| --- | --- | --- | --- |
|  |  | \* The servlet context for the controller. |
|  |  | \*/ |
|  |  | public VaadinConnectController( |
|  |  | @Autowired(required = false) @Qualifier(VAADIN\_ENDPOINT\_MAPPER\_BEAN\_QUALIFIER) ObjectMapper vaadinEndpointMapper, |
|  |  | @Autowired @Qualifier(VAADIN\_ENDPOINT\_MAPPER\_BEAN\_QUALIFIER) ObjectMapper vaadinEndpointMapper, |

### This comment was marked as outdated.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fvaadin%2Fflow%2Fpull%2F8016)

Sorry, something went wrong.

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[fix connect controller tests](/vaadin/flow/pull/8016/commits/78dcf87b7cc52e1cbf5078ef9a6d1758b280f1dd "fix connect controller tests")`

`[78dcf87](/vaadin/flow/pull/8016/commits/78dcf87b7cc52e1cbf5078ef9a6d1758b280f1dd)`

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

**[haijian-vaadin](/haijian-vaadin)**
commented
[Apr 7, 2020](#pullrequestreview-389412616)

 [View reviewed changes](/vaadin/flow/pull/8016/files/78dcf87b7cc52e1cbf5078ef9a6d1758b280f1dd)

Copy link

Contributor

Author

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016)* status: 3 unresolved discussions, 0 of 1 LGTMs obtained (waiting on [@knoobie](https://github.com/knoobie))

---

*[flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java, line 136 at r1](https://reviewable.io/reviews/vaadin/flow/8016#-M4Jy_yp1ePvit2UHwt8-r1-136:-M4L1XoI0U0yBkLicF8C:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/4fa09257f228e98c451ede8e1959db7177d8c988/flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java#L136)):*

*Previously, knoobie (Knoobie) wrote…*
> Autowired could be removed - every instance in the constructor is autowired.
>
> This has to be updated, if my comment from above is accepted.

Done.

---

*[flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java, line 157 at r1](https://reviewable.io/reviews/vaadin/flow/8016#-M4Jy_yp1ePvit2UHwt9-r1-157:-M4L1_fP59zHrA4PBwtu:b-mmey1m) ([raw file](https://github.com/vaadin/flow/blob/4fa09257f228e98c451ede8e1959db7177d8c988/flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java#L157)):*

*Previously, knoobie (Knoobie) wrote…*
> ```
>     public ObjectMapper vaadinEndpointMapper(ApplicationContext context) {
>
> ```
>
> Change method name to reflect the `Bean` that's going to be created.
>
> Optional/Personal opinion: I would wrap the `ObjectMapper` in an object `VaadinConnectMapper#getObjectMapper` and return `VaadinConnectMapper` here as `Bean`, so it's easy to differentiate between the normal `ObjectMapper` and the Object Vaadin is using internally.

Thanks for the good suggestion. I think updating the method name would be enough for now.

Any specific reasons to open the method as public? Would package-private be better since it's intended for internal use?

---

*[flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java, line 168 at r1](https://reviewable.io/reviews/vaadin/flow/8016#-M4Jy_yp1ePvit2UHwt9-r1-168:-M4L2BsY4ZUhhfAt5dvw:bkndapd) ([raw file](https://github.com/vaadin/flow/blob/4fa09257f228e98c451ede8e1959db7177d8c988/flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java#L168)):*

*Previously, knoobie (Knoobie) wrote…*
> The whole try/catch could be removed?

Done. Yes, good suggestion, it was a copy-paste, now it can be removed.

Sorry, something went wrong.

All reactions

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[fix sonar issue](/vaadin/flow/pull/8016/commits/52048910c9872d63925d6afeb1e9fffe2494e4bd "fix sonar issue")`

`[5204891](/vaadin/flow/pull/8016/commits/52048910c9872d63925d6afeb1e9fffe2494e4bd)`

[![knoobie](https://avatars.githubusercontent.com/u/3968629?s=60&v=4)](/knoobie)

**[knoobie](/knoobie)**
reviewed
[Apr 7, 2020](#pullrequestreview-389426644)

 [View reviewed changes](/vaadin/flow/pull/8016/files/52048910c9872d63925d6afeb1e9fffe2494e4bd)

Copy link

Contributor

### @knoobie **[knoobie](/knoobie)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> Reviewed 3 of 4 files at r2.
>
> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016)* status: 2 unresolved discussions, 0 of 1 LGTMs obtained (waiting on [@haijian-vaadin](https://github.com/haijian-vaadin) and [@knoobie](https://github.com/knoobie))

---

*[flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java, line 157 at r1](https://reviewable.io/reviews/vaadin/flow/8016#-M4Jy_yp1ePvit2UHwt9-r1-157:-M4L60-hEMp81QZIdp0x:b-op9mme) ([raw file](https://github.com/vaadin/flow/blob/4fa09257f228e98c451ede8e1959db7177d8c988/flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java#L157)):*

*Previously, haijian-vaadin (Haijian Wang) wrote…*
> Thanks for the good suggestion. I think updating the method name would be enough for now.
>
> Any specific reasons to open the method as public? Would package-private be better since it's intended for internal use?

I aligned the modifier with all other modifier on `@Bean`s in this class. I would always prefer a public modifier combined with `@ConditionalOnMissingBean` if you are allowed to use it.

Sorry, something went wrong.

All reactions

[![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=40&u=89e5958e1c179e71211972c3d16cb466cf38f5c0&v=4)](/vaadin-bot)
[vaadin-bot](/vaadin-bot)
added
the
[+0.0.1](/vaadin/flow/labels/%2B0.0.1)
label
[Apr 7, 2020](#event-3211370911)

[![knoobie](https://avatars.githubusercontent.com/u/3968629?s=60&v=4)](/knoobie)

**[knoobie](/knoobie)**
reviewed
[Apr 7, 2020](#pullrequestreview-389519713)

 [View reviewed changes](/vaadin/flow/pull/8016/files/52048910c9872d63925d6afeb1e9fffe2494e4bd)

[...r/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java](/vaadin/flow/pull/8016/files/52048910c9872d63925d6afeb1e9fffe2494e4bd#diff-8f92bccc4a62686b34d4128ac5804cd5f066c1e8e4dbde732a6fd6668a4cdb06)
Outdated

|  |  |  |
| --- | --- | --- |
|  |  | try{ |
|  |  | String result = objectMapper.writeValueAsString(new Entity()); |
|  |  | assertEquals("{\"name\":\"Bond\"}", result); |

Copy link

Contributor

### @knoobie **[knoobie](/knoobie)** [Apr 7, 2020](#discussion_r405137705)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Was thinking about this.. is this the right way to test it? I didn't have to time to look into VaadinConnect, so I'm not sure if this could break any existing usecases you wanted to handle.

What I would expect from the test:

* Asking the ApplicationContext for two beans (normal ObjectMapper and the qualified ObjectMapper)
* Normal ObjectMapper should have all configuration provided by the user
* Qualified ObjectMapper should have all configuration Vaadin needs to work
* Both ObjectMapper serialize the same object.. depending on the configuration of the normal ObjectMapper both serialized strings should not look the same. (for example one could use Getter and the other properties for Serialization)

Or am I missing something?

Sorry, something went wrong.

All reactions

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[align modifier with other methods](/vaadin/flow/pull/8016/commits/498aa4588791acfc3f9d53f44a99b4489758f604 "align modifier with other methods")`

`[498aa45](/vaadin/flow/pull/8016/commits/498aa4588791acfc3f9d53f44a99b4489758f604)`

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

**[haijian-vaadin](/haijian-vaadin)**
commented
[Apr 8, 2020](#pullrequestreview-389680691)

 [View reviewed changes](/vaadin/flow/pull/8016/files/498aa4588791acfc3f9d53f44a99b4489758f604)

Copy link

Contributor

Author

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016)* status: 3 unresolved discussions, 0 of 1 LGTMs obtained (waiting on [@haijian-vaadin](https://github.com/haijian-vaadin) and [@knoobie](https://github.com/knoobie))

---

*[flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java, line 157 at r1](https://reviewable.io/reviews/vaadin/flow/8016#-M4Jy_yp1ePvit2UHwt9-r1-157:-M4NPI6zAJS3oDZETjGH:b-lqht6v) ([raw file](https://github.com/vaadin/flow/blob/4fa09257f228e98c451ede8e1959db7177d8c988/flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java#L157)):*

*Previously, knoobie (Knoobie) wrote…*
> I aligned the modifier with all other modifier on `@Bean`s in this class. I would always prefer a public modifier combined with `@ConditionalOnMissingBean` if you are allowed to use it.

Good point. I updated the modifier to align with others. I just checked the code, `@ConditionalOnMissingBean` is not used atm, so skip it for now.

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 41 at r3](https://reviewable.io/reviews/vaadin/flow/8016#-M4L1PBh36Weuahg7Zvl-r3-41:-M4NPZWo4__eDNX_7GJD:b-e8dni) ([raw file](https://github.com/vaadin/flow/blob/52048910c9872d63925d6afeb1e9fffe2494e4bd/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L41)):*

*Previously, knoobie (Knoobie) wrote…*
> Was thinking about this.. is this the right way to test it? I didn't have to time to look into VaadinConnect, so I'm not sure if this could break any existing usecases you wanted to handle.
>
> What I would expect from the test:
>
> * Asking the ApplicationContext for two beans (normal ObjectMapper and the qualified ObjectMapper)
> * Normal ObjectMapper should have all configuration provided by the user
> * Qualified ObjectMapper should have all configuration Vaadin needs to work
> * Both ObjectMapper serialize the same object.. depending on the configuration of the normal ObjectMapper both serialized strings should not look the same. (for example one could use Getter and the other properties for Serialization)
>
> Or am I missing something?

Good catch and thanks a lot for the good suggestion, that would be a proper test for the change. This unit test is not new but rather moved from the `VaadinConnectControllerTest`, since the logic is moved from there to `VaaadinConnectControllerConfiguration`.

In the original test, it verifies if the mocked object mapper does not call the `setVisibility()` if a `jacksonProperties` exists. Now since I cannot use the mock any more, I borrowed the example attached in the ticket to check the final result.

Basically, I wanted to roll out the fix first to make a new release, since it's a serious security issue. I will add a proper test later on.

Sorry, something went wrong.

All reactions

[![knoobie](https://avatars.githubusercontent.com/u/3968629?s=60&v=4)](/knoobie)

**[knoobie](/knoobie)**
reviewed
[Apr 8, 2020](#pullrequestreview-389681733)

 [View reviewed changes](/vaadin/flow/pull/8016/files/498aa4588791acfc3f9d53f44a99b4489758f604)

Copy link

Contributor

### @knoobie **[knoobie](/knoobie)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> Reviewed 1 of 4 files at r2, 2 of 2 files at r3, 1 of 1 files at r4.
>
> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016)* status: 2 unresolved discussions, 0 of 1 LGTMs obtained (waiting on [@haijian-vaadin](https://github.com/haijian-vaadin))

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 41 at r3](https://reviewable.io/reviews/vaadin/flow/8016#-M4L1PBh36Weuahg7Zvl-r3-41:-M4NSA2_4Hwobct4kIT1:b3zyumc) ([raw file](https://github.com/vaadin/flow/blob/52048910c9872d63925d6afeb1e9fffe2494e4bd/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L41)):*

*Previously, haijian-vaadin (Haijian Wang) wrote…*
> Good catch and thanks a lot for the good suggestion, that would be a proper test for the change. This unit test is not new but rather moved from the `VaadinConnectControllerTest`, since the logic is moved from there to `VaaadinConnectControllerConfiguration`.
>
> In the original test, it verifies if the mocked object mapper does not call the `setVisibility()` if a `jacksonProperties` exists. Now since I cannot use the mock any more, I borrowed the example attached in the ticket to check the final result.
>
> Basically, I wanted to roll out the fix first to make a new release, since it's a serious security issue. I will add a proper test later on.

Good point! LGTM!

Sorry, something went wrong.

All reactions

[![manolo](https://avatars.githubusercontent.com/u/161853?s=60&v=4)](/manolo)

**[manolo](/manolo)**
requested changes
[Apr 8, 2020](#pullrequestreview-389684030)

 [View reviewed changes](/vaadin/flow/pull/8016/files/498aa4588791acfc3f9d53f44a99b4489758f604)

Copy link

Member

### @manolo **[manolo](/manolo)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016)* status: 6 unresolved discussions, 0 of 1 LGTMs obtained (waiting on [@haijian-vaadin](https://github.com/haijian-vaadin))

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 27 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSx4Z0CjV8doga5eR:-M4NSx4Z0CjV8doga5eS:b-k10qpq) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L27)):*

> ```
>         VaadinEndpointProperties endpointPropertiesMock = mock(VaadinEndpointProperties.class);
>         VaadinConnectControllerConfiguration configuration = new VaadinConnectControllerConfiguration(endpointPropertiesMock);
>
> ```

extra spaces

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 39 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSmlk77kPQVCIvJl-:-M4NSmlk77kPQVCIvJl0:bss9o5n) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L39)):*

> ```
>         verify(contextMock, times(1)).getBean(JacksonProperties.class);
>
>         try{
> ```

space before curly

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 42 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSq5e24_c8mHULrnU:-M4NSq5e24_c8mHULrnV:b-tky4pw) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L42)):*

> ```
>                 String result = objectMapper.writeValueAsString(new Entity());
>                 assertEquals("{\"name\":\"Bond\"}", result);
>         }catch(Exception e){
> ```

spaces after and before curlis

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 55 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSz5n-l6gzjKCoqpg:-M4NSz5n-l6gzjKCoqph:b-213fav) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L55)):*

> ```
>         public String getName() {
>                 return name;
> ```

should use 4 spaces here, seems you are using 8, and the same in the below methods

Sorry, something went wrong.

All reactions

[![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=40&u=89e5958e1c179e71211972c3d16cb466cf38f5c0&v=4)](/vaadin-bot)
[vaadin-bot](/vaadin-bot)
added
[+0.1.0](/vaadin/flow/labels/%2B0.1.0)
and removed
[+0.0.1](/vaadin/flow/labels/%2B0.0.1)
labels
[Apr 8, 2020](#event-3212751543)

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[fix sonar issues](/vaadin/flow/pull/8016/commits/69da40162bab24c9f5cfca5a7ee1947599f75667 "fix sonar issues")`

`[69da401](/vaadin/flow/pull/8016/commits/69da40162bab24c9f5cfca5a7ee1947599f75667)`

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

**[haijian-vaadin](/haijian-vaadin)**
commented
[Apr 8, 2020](#pullrequestreview-389701410)

 [View reviewed changes](/vaadin/flow/pull/8016/files/69da40162bab24c9f5cfca5a7ee1947599f75667)

Copy link

Contributor

Author

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016)* status: 6 unresolved discussions, 0 of 1 LGTMs obtained (waiting on [@knoobie](https://github.com/knoobie), [@manolo](https://github.com/manolo), and [@vaadin-bot](https://github.com/vaadin-bot))

---

*[flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java, line 157 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4Jy_yp1ePvit2UHwt9-r4-157:-M4NaHBL5qkI_7TmaSpk:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfiguration.java#L157)):*

*Previously, vaadin-bot (Vaadin Bot) wrote…*
> [![CRITICAL](https://camo.githubusercontent.com/b647c40f2dd33e02f00e4c117973f2fa5184cf0b5de6658b5142c01e417785b7/68747470733a2f2f736f6e6172736f757263652e6769746875622e696f2f736f6e61722d6769746875622f73657665726974792d637269746963616c2e706e67 "Severity: CRITICAL")](https://camo.githubusercontent.com/b647c40f2dd33e02f00e4c117973f2fa5184cf0b5de6658b5142c01e417785b7/68747470733a2f2f736f6e6172736f757263652e6769746875622e696f2f736f6e61722d6769746875622f73657665726974792d637269746963616c2e706e67) Document the parameter(s): context [![rule](https://camo.githubusercontent.com/17d552099da33c2502abb679c5d4cd549d82d00e8f0a2240966aa69cb0088c9c/68747470733a2f2f736f6e6172736f757263652e6769746875622e696f2f736f6e61722d6769746875622f72756c652e706e67)](https://sonar.projects.vaadin.com/coding_rules#rule_key=squid%3AUndocumentedApi)

Done.

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 41 at r3](https://reviewable.io/reviews/vaadin/flow/8016#-M4L1PBh36Weuahg7Zvl-r3-41:-M4NaRb88vQO9J7fBBMu:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/52048910c9872d63925d6afeb1e9fffe2494e4bd/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L41)):*

*Previously, knoobie (Knoobie) wrote…*
> Good point! LGTM!

Done.

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 27 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSx4Z0CjV8doga5eR:-M4NaPeN5nl_2LlCojV1:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L27)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> extra spaces

Done.

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 39 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSmlk77kPQVCIvJl-:-M4NaQQpBzWs6ALWwoWr:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L39)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> space before curly

Done.

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 42 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSq5e24_c8mHULrnU:-M4NaSDM7rZig5aBMvrx:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L42)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> spaces after and before curlis

Done.

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 55 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSz5n-l6gzjKCoqpg:-M4NaSq_69DBl-4Qb78x:b-896fix) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L55)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> should use 4 spaces here, seems you are using 8, and the same in the below methods

Done.

Sorry, something went wrong.

All reactions

 [![@manolo](https://avatars.githubusercontent.com/u/161853?s=40&u=0caf995d8c58d5a0785b1d4241e9ce0c0a62145f&v=4)](/manolo)
[manolo](/manolo)
requested a review
from [vaadin-bot](/vaadin-bot)
[April 8, 2020 08:49](#event-3213143648)

[![manolo](https://avatars.githubusercontent.com/u/161853?s=60&v=4)](/manolo)

**[manolo](/manolo)**
requested changes
[Apr 8, 2020](#pullrequestreview-389773901)

 [View reviewed changes](/vaadin/flow/pull/8016/files/69da40162bab24c9f5cfca5a7ee1947599f75667)

Copy link

Member

### @manolo **[manolo](/manolo)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016)* status: 4 unresolved discussions, 0 of 1 LGTMs obtained (waiting on [@haijian-vaadin](https://github.com/haijian-vaadin), [@knoobie](https://github.com/knoobie), and [@vaadin-bot](https://github.com/vaadin-bot))

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 39 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSmlk77kPQVCIvJl-:-M4NyKHY6C2t9iAedQQr:b-fvkae4) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L39)):*

*Previously, haijian-vaadin (Haijian Wang) wrote…*
> Done.

not done it should read `try {`

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 42 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSq5e24_c8mHULrnU:-M4NyOLT3FnwO1DnOvuh:b-s4p4x7) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L42)):*

*Previously, haijian-vaadin (Haijian Wang) wrote…*
> Done.

not done `} catch (Excepcion e) {`

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 55 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSz5n-l6gzjKCoqpg:-M4Ny_RH2NU2A7knWdPL:b-w8e3sm) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L55)):*

*Previously, haijian-vaadin (Haijian Wang) wrote…*
> Done.

not done should be

```
public String getName {
    return name;

```

Sorry, something went wrong.

All reactions

 [haijian-vaadin](/haijian-vaadin)
added 2 commits
[April 8, 2020 11:55](#commits-pushed-61d13fe)

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[fix formmating](/vaadin/flow/pull/8016/commits/61d13fe5d7fde94df2acfc0bb3c03aa2aef4a31c "fix formmating")`

`[61d13fe](/vaadin/flow/pull/8016/commits/61d13fe5d7fde94df2acfc0bb3c03aa2aef4a31c)`

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[fix formatting](/vaadin/flow/pull/8016/commits/ecd77971152f992504a6bf87f9cc50385a8bb439 "fix formatting")`

`[ecd7797](/vaadin/flow/pull/8016/commits/ecd77971152f992504a6bf87f9cc50385a8bb439)`

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

**[haijian-vaadin](/haijian-vaadin)**
commented
[Apr 8, 2020](#pullrequestreview-389782182)

 [View reviewed changes](/vaadin/flow/pull/8016/files/ecd77971152f992504a6bf87f9cc50385a8bb439)

Copy link

Contributor

Author

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016)* status: 4 unresolved discussions, 0 of 1 LGTMs obtained (waiting on [@knoobie](https://github.com/knoobie), [@manolo](https://github.com/manolo), and [@vaadin-bot](https://github.com/vaadin-bot))

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 39 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSmlk77kPQVCIvJl-:-M4O-XH8-k38hSI1yJqh:b-ui3d7p) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L39)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> not done it should read `try {`

It's already like that, <https://github.com/vaadin/flow/blob/haijian/fix-security-issue/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java>. I think reviewable didn't catch the change.

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 42 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSq5e24_c8mHULrnU:-M4O00-b6O7ObZsv3Ojb:bshxlau) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L42)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> not done `} catch (Excepcion e) {`

same here. see <https://github.com/vaadin/flow/blob/haijian/fix-security-issue/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java>

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 55 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSz5n-l6gzjKCoqpg:-M4O04rrCzWTmEQ8IoYt:b-99az09) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L55)):*

*Previously, manolo (Manuel Carrasco Moñino) wrote…*
> not done should be
>
> ```
> public String getName {
>     return name;
>
> ```

same here as well. <https://github.com/vaadin/flow/blob/haijian/fix-security-issue/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java>

Sorry, something went wrong.

All reactions

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

**[haijian-vaadin](/haijian-vaadin)**
commented
[Apr 8, 2020](#pullrequestreview-389783620)

 [View reviewed changes](/vaadin/flow/pull/8016/files/ecd77971152f992504a6bf87f9cc50385a8bb439)

Copy link

Contributor

Author

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016)* status: 4 unresolved discussions, 0 of 1 LGTMs obtained (waiting on [@knoobie](https://github.com/knoobie), [@manolo](https://github.com/manolo), and [@vaadin-bot](https://github.com/vaadin-bot))

---

*[flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java, line 55 at r4](https://reviewable.io/reviews/vaadin/flow/8016#-M4NSz5n-l6gzjKCoqpg:-M4O0Phz2yAJAMI7mnAZ:bkaanv5) ([raw file](https://github.com/vaadin/flow/blob/498aa4588791acfc3f9d53f44a99b4489758f604/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java#L55)):*

*Previously, haijian-vaadin (Haijian Wang) wrote…*
> same here as well. <https://github.com/vaadin/flow/blob/haijian/fix-security-issue/flow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerConfigurationTest.java>

I think for some reason, Reviewable didn't catch the change.

Sorry, something went wrong.

All reactions

[![manolo](https://avatars.githubusercontent.com/u/161853?s=60&v=4)](/manolo)

**[manolo](/manolo)**
approved these changes
[Apr 8, 2020](#pullrequestreview-389786835)

 [View reviewed changes](/vaadin/flow/pull/8016/files/ecd77971152f992504a6bf87f9cc50385a8bb439)

Copy link

Member

### @manolo **[manolo](/manolo)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

crazy reviewable, some times it takes a while to reflect changes [![:lgtm_strong:](https://camo.githubusercontent.com/d6a46917134d5bd730f097a11c6d84fb9efc0c89be40f13b7f42d3ce9f79e198/68747470733a2f2f72657669657761626c652e696f2f6c67746d5f7374726f6e672e706e67 ":lgtm_strong:")](https://camo.githubusercontent.com/d6a46917134d5bd730f097a11c6d84fb9efc0c89be40f13b7f42d3ce9f79e198/68747470733a2f2f72657669657761626c652e696f2f6c67746d5f7374726f6e672e706e67)

> Reviewed 2 of 2 files at r3, 2 of 2 files at r5.
>
> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016#-:-M4O1MSB1Nc4f54Z4IMx:b-kbu9eg)* status: 2 unresolved discussions, 1 of 1 LGTMs obtained (waiting on [@knoobie](https://github.com/knoobie) and [@vaadin-bot](https://github.com/vaadin-bot))

Sorry, something went wrong.

All reactions

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&v=4)](/haijian-vaadin)

`[Merge branch 'master' into haijian/fix-security-issue](/vaadin/flow/pull/8016/commits/061a1f9dffd939910364a237db67c52f2fe0dff7 "Merge branch 'master' into haijian/fix-security-issue")`

`[061a1f9](/vaadin/flow/pull/8016/commits/061a1f9dffd939910364a237db67c52f2fe0dff7)`

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)
[haijian-vaadin](/haijian-vaadin)
changed the title
~~Use Vaadin's own ObjectMapper instead of the one from Spring~~
[Security Fix]Use Vaadin's own ObjectMapper instead of the one from Spring
[Apr 8, 2020](#event-3213391850)

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

**[haijian-vaadin](/haijian-vaadin)**
commented
[Apr 8, 2020](#pullrequestreview-389864400)

 [View reviewed changes](/vaadin/flow/pull/8016/files/061a1f9dffd939910364a237db67c52f2fe0dff7)

Copy link

Contributor

Author

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

[![:lgtm:](https://camo.githubusercontent.com/204e5a43dbe1a0ce96b00dc9f6efaa7c31943c30f6d7fc9f92fa23ad865d6ea0/68747470733a2f2f72657669657761626c652e696f2f6c67746d2e706e67 ":lgtm:")](https://camo.githubusercontent.com/204e5a43dbe1a0ce96b00dc9f6efaa7c31943c30f6d7fc9f92fa23ad865d6ea0/68747470733a2f2f72657669657761626c652e696f2f6c67746d2e706e67)

> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016#-:-M4OQBs6AGtNx6kku68E:bnfp4nl)* status: 2 unresolved discussions, 2 of 1 LGTMs obtained (waiting on [@knoobie](https://github.com/knoobie) and [@vaadin-bot](https://github.com/vaadin-bot))

Sorry, something went wrong.

All reactions

[![knoobie](https://avatars.githubusercontent.com/u/3968629?s=60&v=4)](/knoobie)

**[knoobie](/knoobie)**
approved these changes
[Apr 8, 2020](#pullrequestreview-389865142)

 [View reviewed changes](/vaadin/flow/pull/8016/files/061a1f9dffd939910364a237db67c52f2fe0dff7)

[![haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=60&v=4)](/haijian-vaadin)

**[haijian-vaadin](/haijian-vaadin)**
commented
[Apr 8, 2020](#pullrequestreview-389866315)

 [View reviewed changes](/vaadin/flow/pull/8016/files/061a1f9dffd939910364a237db67c52f2fe0dff7)

Copy link

Contributor

Author

### @haijian-vaadin **[haijian-vaadin](/haijian-vaadin)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> Dismissed [@knoobie](https://github.com/knoobie) and [@vaadin-bot](https://github.com/vaadin-bot) from 2 discussions.
>
> *[Reviewable](https://reviewable.io/reviews/vaadin/flow/8016)* status: ![:shipit:](https://github.githubassets.com/images/icons/emoji/shipit.png ":shipit:") complete! all discussions resolved, 2 of 1 LGTMs obtained

Sorry, something went wrong.

All reactions

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)
[haijian-vaadin](/haijian-vaadin)
merged commit [`7222c96`](/vaadin/flow/commit/7222c96b1c5da51e56061cc5ae6d32f9a5876bc3)
into
master

[Apr 8, 2020](https://github.com/vaadin/flow/pull/8016#event-3213596402)

 [![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)
[haijian-vaadin](/haijian-vaadin)
deleted the
haijian/fix-security-issue

branch
[April 8, 2020 10:58](#event-3213596505)

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin)
[haijian-vaadin](/haijian-vaadin)
added
the
[target/3.0](/vaadin/flow/labels/target/3.0)
label
[Apr 8, 2020](#event-3213608171)

[manolo](/manolo)
pushed a commit
that referenced
this pull request
[Apr 8, 2020](#ref-commit-d417f36)
[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=40&u=20aaeb818eeec7e7e60a993a58576aa126ade17a&v=4)](/haijian-vaadin) [![@manolo](https://avatars.githubusercontent.com/u/161853?s=40&v=4)](/manolo)

`[[Security Fix]Use Vaadin's own ObjectMapper instead of the one from S…](/vaadin/flow/commit/d417f36fb0f68053d30942c02829cf10099885d5 "[Security Fix]Use Vaadin's own ObjectMapper instead of the one from Spring (#8016)")`
…

`[d417f36](/vaadin/flow/commit/d417f36fb0f68053d30942c02829cf10099885d5)`

```
…pring ([#8016](https://github.com/vaadin/flow/pull/8016))
```

[![@knoobie](https://avatars.githubusercontent.com/u/3968629?s=40&v=4)](/knoobie)
[knoobie](/knoobie)
mentioned this pull request
[Apr 14, 2020](#ref-pullrequest-599537157)

[inherit the default behaviour of spring for internal object mapper
#8051](/vaadin/flow/pull/8051)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fvaadin%2Fflow%2Fpull%2F8016)

Reviewers

[![@knoobie](https://avatars.githubusercontent.com/u/3968629?s=40&v=4)](/knoobie) [knoobie](/knoobie)

knoobie approved these changes

[![@manolo](https://avatars.githubusercontent.com/u/161853?s=40&v=4)](/manolo) [manolo](/manolo)

manolo approved these changes

[![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=40&v=4)](/vaadin-bot) [vaadin-bot](/vaadin-bot)

 Awaiting requested review from vaadin-bot

Assignees

No one assigned

Labels

[hilla](/vaadin/flow/labels/hilla)
Issues related to Hilla
[+0.1.0](/vaadin/flow/labels/%2B0.1.0)

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

 [Vaadin 15 exposes private properties in JSON responses of REST api](https://github.com/vaadin/flow/issues/8010)

4 participants

[![@haijian-vaadin](https://avatars.githubusercontent.com/u/30408303?s=52&v=4)](/haijian-vaadin) [![@manolo](https://avatars.githubusercontent.com/u/161853?s=52&v=4)](/manolo) [![@knoobie](https://avatars.githubusercontent.com/u/3968629?s=52&v=4)](/knoobie) [![@vaadin-bot](https://avatars.githubusercontent.com/u/20280877?s=52&v=4)](/vaadin-bot)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


