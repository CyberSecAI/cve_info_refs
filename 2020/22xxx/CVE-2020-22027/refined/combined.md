=== Content from trac.ffmpeg.org_b7de2479_20250119_121746.html ===


[![FFmpeg](/ffmpeg-logo.png)](https://ffmpeg.org)

Search:

* [Login](/login)
* [Preferences](/prefs)
* [Help/Guide](/wiki/TracGuide)
* [About Trac](/about)
* [Register](/register)
* [Forgot your password?](/reset_password)

* [Wiki](/wiki)
* [Timeline](/timeline)
* [View Tickets](/report)
* [Search](/search)
* [Tags](/tags)

## Context Navigation

* ![Up-vote](/chrome/vote/aupgray.png)+0![Down-vote](/chrome/vote/adowngray.png)
* ‚Üê [Previous Ticket](/ticket/8241 "Ticket #8241")
* [Next Ticket](/ticket/8243 "Ticket #8243") ‚Üí

---

Opened [5 years ago](/timeline?from=2019-10-11T03%3A17%3A51Z&precision=second "See timeline at Oct 11, 2019, 3:17:51 AM")

Closed [5 years ago](/timeline?from=2019-10-11T09%3A21%3A29Z&precision=second "See timeline at Oct 11, 2019, 9:21:29 AM")

Last modified [5 years ago](/timeline?from=2019-10-13T21%3A36%3A03Z&precision=second "See timeline at Oct 13, 2019, 9:36:03 PM")

## [#8242](/ticket/8242) [closed](/query?status=closed) [defect](/query?status=!closed&type=defect) ([fixed](/query?resolution=fixed&status=closed))

# heap-buffer-overflow at libavfilter/vf\_neighbor.c

| Reported by: | [Suhwan](/query?reporter=Suhwan&status=!closed) | Owned by: |  |
| --- | --- | --- | --- |
| Priority: | [normal](/query?priority=normal&status=!closed) | Component: | [avfilter](/query?component=avfilter&status=!closed) |
| Version: | [git-master](/query?status=!closed&version=git-master) | Keywords: | [neighbor](/query?keywords=~neighbor&status=!closed) [asan](/query?keywords=~asan&status=!closed) |
| Cc: |  | Blocked By: |  |
| Blocking: |  | Reproduced by developer: | [no](/query?reproduced=0&status=!closed) |
| Analyzed by developer: | [no](/query?analyzed=0&status=!closed) |  |  |

## Description

Summary of the bug:

There is a heap-buffer-overflow at libavfilter/vf\_neighbor.c:191 in deflate16

I compiled ffmpeg with "--toolchain=clang-asan" to check the heap buffer overflow and attached log file.

How to reproduce:

```
% ffmpeg_g -y -i samples/tmp3/tmp-32.png48 -filter_complex deflate -target dvd -loglevel 99 -map 0 -disposition:v:227 webvtt -ar 48000 -ac 20 tmp.u16le

ffmpeg version N-95314-g1331e00179 Copyright (c) 2000-2019 the FFmpeg developers
built with clang version 6.0.0-1ubuntu2 (tags/RELEASE_600/final)
configuration: --cc=clang --cxx=clang++ --ld=clang --enable-debug --toolchain=clang-asan

```

Here's ASAN log

```
==41359==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x619000007d7e at pc 0x000001038790 bp 0x7fffffffa190 sp 0x7fffffffa188
READ of size 2 at 0x619000007d7e thread T0
    #0 0x103878f in deflate16 ffmpeg/libavfilter/vf_neighbor.c:191:35
    #1 0x1033f4b in filter_slice ffmpeg/libavfilter/vf_neighbor.c:301:13
    #2 0x9429d9 in worker_func ffmpeg/libavfilter/pthread.c:50:15
    #3 0x8658de2 in run_jobs ffmpeg/libavutil/slicethread.c:61:9
    #4 0x8658484 in avpriv_slicethread_execute ffmpeg/libavutil/slicethread.c:188:19
    #5 0x942136 in thread_execute ffmpeg/libavfilter/pthread.c:72:5
    #6 0x102f611 in filter_frame ffmpeg/libavfilter/vf_neighbor.c:328:5
    #7 0x827289 in ff_filter_activate_default ffmpeg/libavfilter/avfilter.c:1071:11
    #8 0x827289 in ff_filter_activate ffmpeg/libavfilter/avfilter.c:1430
    #9 0x870182 in push_frame ffmpeg/libavfilter/buffersrc.c:187:15
    #10 0x870182 in av_buffersrc_add_frame_internal ffmpeg/libavfilter/buffersrc.c:261
    #11 0x86ebc2 in av_buffersrc_add_frame_flags ffmpeg/libavfilter/buffersrc.c:170:16
    #12 0x666867 in ifilter_send_frame ffmpeg/fftools/ffmpeg.c:2196:11
    #13 0x666867 in send_frame_to_filters ffmpeg/fftools/ffmpeg.c:2270
    #14 0x6075f7 in decode_video ffmpeg/fftools/ffmpeg.c:2469:11
    #15 0x6075f7 in process_input_packet ffmpeg/fftools/ffmpeg.c:2623
    #16 0x6450b8 in process_input ffmpeg/fftools/ffmpeg.c:4313:23
    #17 0x5e7157 in transcode_step ffmpeg/fftools/ffmpeg.c:4638:11
    #18 0x5e7157 in transcode ffmpeg/fftools/ffmpeg.c:4692
    #19 0x5db65b in main ffmpeg/fftools/ffmpeg.c:4894:9
    #20 0x7ffff5c93b96 in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310
    #21 0x41def9 in _start (ffmpeg/ffmpeg_g+0x41def9)

0x619000007d7e is located 2 bytes to the left of 1055-byte region [0x619000007d80,0x61900000819f)
allocated by thread T0 here:
    #0 0x4de9e8 in posix_memalign (ffmpeg/ffmpeg_g+0x4de9e8)
    #1 0x8564fb1 in av_malloc ffmpeg/libavutil/mem.c:87:9
    #2 0x84cc231 in av_buffer_alloc ffmpeg/libavutil/buffer.c:72:12
    #3 0x84cc231 in av_buffer_allocz ffmpeg/libavutil/buffer.c:85
    #4 0x84d0a56 in pool_alloc_buffer ffmpeg/libavutil/buffer.c:313:26
    #5 0x84d0a56 in av_buffer_pool_get ffmpeg/libavutil/buffer.c:349
    #6 0x91af8d in ff_frame_pool_get ffmpeg/libavfilter/framepool.c:222:29
    #7 0x15a660c in ff_default_get_video_buffer ffmpeg/libavfilter/video.c:90:13
    #8 0x124c7f9 in scale_frame ffmpeg/libavfilter/vf_scale.c:460:11
    #9 0x124a8ec in filter_frame ffmpeg/libavfilter/vf_scale.c:549:11
    #10 0x827289 in ff_filter_activate_default ffmpeg/libavfilter/avfilter.c:1071:11
    #11 0x827289 in ff_filter_activate ffmpeg/libavfilter/avfilter.c:1430
    #12 0x870135 in push_frame ffmpeg/libavfilter/buffersrc.c:187:15
    #13 0x870135 in av_buffersrc_add_frame_internal ffmpeg/libavfilter/buffersrc.c:261
    #14 0x86ebc2 in av_buffersrc_add_frame_flags ffmpeg/libavfilter/buffersrc.c:170:16
    #15 0x666867 in ifilter_send_frame ffmpeg/fftools/ffmpeg.c:2196:11
    #16 0x666867 in send_frame_to_filters ffmpeg/fftools/ffmpeg.c:2270
    #17 0x6075f7 in decode_video ffmpeg/fftools/ffmpeg.c:2469:11
    #18 0x6075f7 in process_input_packet ffmpeg/fftools/ffmpeg.c:2623
    #19 0x6450b8 in process_input ffmpeg/fftools/ffmpeg.c:4313:23
    #20 0x5e7157 in transcode_step ffmpeg/fftools/ffmpeg.c:4638:11
    #21 0x5e7157 in transcode ffmpeg/fftools/ffmpeg.c:4692
    #22 0x5db65b in main ffmpeg/fftools/ffmpeg.c:4894:9
    #23 0x7ffff5c93b96 in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310

SUMMARY: AddressSanitizer: heap-buffer-overflow ffmpeg/libavfilter/vf_neighbor.c:191:35 in deflate16

```

Please confirm.

Thanks

### Attachments (2)

[gdb-vf\_neighbor\_191](/attachment/ticket/8242/gdb-vf_neighbor_191 "View attachment")[‚Äã](/raw-attachment/ticket/8242/gdb-vf_neighbor_191 "Download")
(17.0 KB
) - added by Suhwan [5 years ago](/timeline?from=2019-10-11T03%3A18%3A57Z&precision=second "See timeline at Oct 11, 2019, 3:18:57 AM").
[PoC\_vf\_neighbor\_191.png48](/attachment/ticket/8242/PoC_vf_neighbor_191.png48 "View attachment")[‚Äã](/raw-attachment/ticket/8242/PoC_vf_neighbor_191.png48 "Download")
(290 bytes
) - added by Suhwan [5 years ago](/timeline?from=2019-10-11T03%3A19%3A16Z&precision=second "See timeline at Oct 11, 2019, 3:19:16 AM").
poc

Download all attachments as:
[.zip](/zip-attachment/ticket/8242/)

Oldest first

Newest first

Threaded

Show comments

Show property changes

### Change History (4)

### by Suhwan, [5 years ago](/timeline?from=2019-10-11T03%3A18%3A57Z&precision=second "See timeline at Oct 11, 2019, 3:18:57 AM")

| Attachment: | [*gdb-vf\_neighbor\_191*](/attachment/ticket/8242/gdb-vf_neighbor_191)[‚Äã](/raw-attachment/ticket/8242/gdb-vf_neighbor_191 "Download") added |
| --- | --- |

### by Suhwan, [5 years ago](/timeline?from=2019-10-11T03%3A19%3A16Z&precision=second "See timeline at Oct 11, 2019, 3:19:16 AM")

| Attachment: | [*PoC\_vf\_neighbor\_191.png48*](/attachment/ticket/8242/PoC_vf_neighbor_191.png48)[‚Äã](/raw-attachment/ticket/8242/PoC_vf_neighbor_191.png48 "Download") added |
| --- | --- |

poc

### [comment:1](#comment:1) by Elon Musk, [5 years ago](/timeline?from=2019-10-11T09%3A21%3A29Z&precision=second "See timeline at Oct 11, 2019, 9:21:29 AM")

| Resolution: | ‚Üí fixed |
| --- | --- |
| Status: | new ‚Üí closed |

### [comment:2](#comment:2) by Carl Eugen Hoyos, [5 years ago](/timeline?from=2019-10-13T21%3A36%3A03Z&precision=second "See timeline at Oct 13, 2019, 9:36:03 PM")

| Component: | undetermined ‚Üí avfilter |
| --- | --- |
| Keywords: | neighbor added |

[e787f8fd7ee99ba0c3e0f086ce2ce59eea7ed86c](/changeset/e787f8fd7ee99ba0c3e0f086ce2ce59eea7ed86c/ffmpeg "avfilter/vf_neighbor: check if width is 1

Fixes #8242")

**Note:**
See [TracTickets](/wiki/TracTickets)
for help on using tickets.

### Download in other formats:

* [RSS Feed](/ticket/8242?format=rss)
* [Comma-delimited Text](/ticket/8242?format=csv)
* [Tab-delimited Text](/ticket/8242?format=tab)

---

[![Trac Powered](/chrome/common/trac_logo_mini.png)](https://trac.edgewall.org/)

Powered by [**Trac 1.6**](/about)

By [Edgewall Software](http://www.edgewall.org/)
.

Visit the Trac open source project at
<http://trac.edgewall.org/>



=== Content from www.debian.org_7d3dec2e_20250119_121746.html ===


---

[[Date Prev](msg00174.html)][[Date Next](msg00176.html)]
[[Thread Prev](msg00174.html)][[Thread Next](msg00176.html)]
[[Date Index](maillist.html#00175)]
[[Thread Index](threads.html#00175)]

# [SECURITY] [DSA 4990-1] ffmpeg security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 4990-1] ffmpeg security update
* *From*: Moritz Muehlenhoff <jmm@debian.org>
* *Date*: Tue, 19 Oct 2021 18:51:14 +0000
* *Message-id*: <[[üîé]](/msgid-search/20211019185114.GA14597%40seger.debian.org)¬†[20211019185114.GA14597@seger.debian.org](msg00175.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-4990-1                   security@debian.org
<https://www.debian.org/security/>                       Moritz Muehlenhoff
October 19, 2021                      <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : ffmpeg
CVE ID         : CVE-2020-20445 CVE-2020-20446 CVE-2020-20453 CVE-2020-21041
                 CVE-2020-22015 CVE-2020-22016 CVE-2020-22017 CVE-2020-22019
                 CVE-2020-22020 CVE-2020-22021 CVE-2020-22022 CVE-2020-22023
                 CVE-2020-22025 CVE-2020-22026 CVE-2020-22027 CVE-2020-22028
                 CVE-2020-22029 CVE-2020-22030 CVE-2020-22031 CVE-2020-22032
                 CVE-2020-22033 CVE-2020-22034 CVE-2020-22035 CVE-2020-22036
                 CVE-2020-22037 CVE-2020-22049 CVE-2020-22054 CVE-2020-35965
                 CVE-2021-38114 CVE-2021-38171 CVE-2021-38291

Several vulnerabilities have been discovered in the FFmpeg multimedia
framework, which could result in denial of service or potentially the
execution of arbitrary code if malformed files/streams are processed.

For the oldstable distribution (buster), these problems have been fixed
in version 7:4.1.8-0+deb10u1.

We recommend that you upgrade your ffmpeg packages.

For the detailed security status of ffmpeg please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/ffmpeg>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEEtuYvPRKsOElcDakFEMKTtsN8TjYFAmFvE0MACgkQEMKTtsN8
Tjar1A//XPaJ4SP7JyAs3H845zwESim4+SsoK2sdz5fkFIiaM17lHcVTeQyDbGtw
5E9LfBRw9oxseU+6pCze3LdwqDKhdwiotDgWj4NZ8OJBLz4Iq12nJMkKCXAaTdFp
8pBYhrgLloyl+6Tdc76jBGMT9KhXtaWrNhsI/T01KNMD0yhOMBzgmgOJi7NgoMcS
/mk6TAfW5zGClMWCAVPHwmCx4S6C+8O99pgGdavbBZhtdFqZETgYFln8H3Wpw8V9
93MF4Qbwq7kZ3NLI+Jie5shM50ootzcHa8RP7Aaf+3K4mZ/9ORo8rvJF7mcJi4EG
fE/e0x/Q4bezdFbbgDFVLMzEq9vdO1UevO8gCWlfe17nh+JB3BEiwO9mF+cUuvb5
ySH8FA2W9EWEGEZgdgk2h8suHQ5ELI3sNLPnc9VA2IXF/PVl3Gm3vK3+ELedP5Lw
WK2QlWOiVPkzAvcY8EXtEzIMCdnioMKkrcr5bDzfCeL7FTR0A6St+NKYWO/31R2h
c6WGxAOMXSSSKe1j48mrsbqNlzPv7LwDyjS70ZJ3QrtQ4dp+prxnAD3A4uDk6fyO
7Qs466QF0bYRJP/I0DggKEwQKvdK9MSubSgftz414J+bqfE3WqUOjtUneN4ZTQx0
WXA7cPN/2rolLx2UGygPfqjlTcdFBFwWrBfXpu34jYD7ONiKGTU=
=i0d7
-----END PGP SIGNATURE-----

```

---



=== Content from trac.ffmpeg.org_2b43c51b_20250119_121744.html ===


[![FFmpeg](/ffmpeg-logo.png)](https://ffmpeg.org)

Search:

* [Login](/login)
* [Preferences](/prefs)
* [Help/Guide](/wiki/TracGuide)
* [About Trac](/about)
* [Register](/register)
* [Forgot your password?](/reset_password)

* [Wiki](/wiki)
* [Timeline](/timeline)
* [View Tickets](/report)
* [Search](/search)
* [Tags](/tags)

## Context Navigation

* [Back to Ticket #8242](/ticket/8242)

---

# [Ticket #8242](/ticket/8242): gdb-vf\_neighbor\_191

| File gdb-vf\_neighbor\_191, 17.0 KB (added by Suhwan, [5 years ago](/timeline?from=2019-10-11T03%3A18%3A57Z&precision=second "See timeline at Oct 11, 2019, 3:18:57 AM")) |
| --- |
|  |

| Line |  |
| --- | --- |
| [1](#L1) | GNU gdb (Ubuntu 8.1-0ubuntu3) 8.1.0.20180409-git |
| [2](#L2) | Copyright (C) 2018 Free Software Foundation, Inc. |
| [3](#L3) | License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html> |
| [4](#L4) | This is free software: you are free to change and redistribute it. |
| [5](#L5) | There is NO WARRANTY, to the extent permitted by law. Type "show copying" |
| [6](#L6) | and "show warranty" for details. |
| [7](#L7) | This GDB was configured as "x86\_64-linux-gnu". |
| [8](#L8) | Type "show configuration" for configuration details. |
| [9](#L9) | For bug reporting instructions, please see: |
| [10](#L10) | <http://www.gnu.org/software/gdb/bugs/>. |
| [11](#L11) | Find the GDB manual and other documentation resources online at: |
| [12](#L12) | <http://www.gnu.org/software/gdb/documentation/>. |
| [13](#L13) | For help, type "help". |
| [14](#L14) | Type "apropos word" to search for commands related to "word"... |
| [15](#L15) | Reading symbols from ../ffmpeg/ffmpeg\_g...done. |
| [16](#L16) | (gdb) r |
| [17](#L17) | Starting program: ffmpeg/ffmpeg\_g -y -i samples/tmp3/tmp-32.png48 -filter\_complex deflate -target dvd -loglevel 99 -map 0 -disposition:v:227 webvtt -ar 48000 -ac 20 output/tmp.u16le |
| [18](#L18) | [Thread debugging using libthread\_db enabled] |
| [19](#L19) | Using host libthread\_db library "/lib/x86\_64-linux-gnu/libthread\_db.so.1". |
| [20](#L20) | ffmpeg version N-95314-g1331e00179 Copyright (c) 2000-2019 the FFmpeg developers |
| [21](#L21) | built with clang version 6.0.0-1ubuntu2 (tags/RELEASE\_600/final) |
| [22](#L22) | configuration: --cc=clang --cxx=clang++ --ld=clang --enable-debug --toolchain=clang-asan |
| [23](#L23) | libavutil 56. 35.100 / 56. 35.100 |
| [24](#L24) | libavcodec 58. 59.102 / 58. 59.102 |
| [25](#L25) | libavformat 58. 33.100 / 58. 33.100 |
| [26](#L26) | libavdevice 58. 9.100 / 58. 9.100 |
| [27](#L27) | libavfilter 7. 62.100 / 7. 62.100 |
| [28](#L28) | libswscale 5. 6.100 / 5. 6.100 |
| [29](#L29) | libswresample 3. 6.100 / 3. 6.100 |
| [30](#L30) | Splitting the commandline. |
| [31](#L31) | Reading option '-y' ... matched as option 'y' (overwrite output files) with argument '1'. |
| [32](#L32) | Reading option '-i' ... matched as input url with argument 'samples/tmp3/tmp-32.png48'. |
| [33](#L33) | Reading option '-filter\_complex' ... matched as option 'filter\_complex' (create a complex filtergraph) with argument 'deflate'. |
| [34](#L34) | Reading option '-target' ... matched as option 'target' (specify target file type ("vcd", "svcd", "dvd", "dv" or "dv50" with optional prefixes "pal-", "ntsc-" or "film-")) with argument 'dvd'. |
| [35](#L35) | Reading option '-loglevel' ... matched as option 'loglevel' (set logging level) with argument '99'. |
| [36](#L36) | Reading option '-map' ... matched as option 'map' (set input stream mapping) with argument '0'. |
| [37](#L37) | Reading option '-disposition:v:227' ... matched as option 'disposition' (disposition) with argument 'webvtt'. |
| [38](#L38) | Reading option '-ar' ... matched as option 'ar' (set audio sampling rate (in Hz)) with argument '48000'. |
| [39](#L39) | Reading option '-ac' ... matched as option 'ac' (set number of audio channels) with argument '20'. |
| [40](#L40) | Reading option 'output/tmp.u16le' ... matched as output url. |
| [41](#L41) | Finished splitting the commandline. |
| [42](#L42) | Parsing a group of options: global . |
| [43](#L43) | Applying option y (overwrite output files) with argument 1. |
| [44](#L44) | Applying option filter\_complex (create a complex filtergraph) with argument deflate. |
| [45](#L45) | Applying option loglevel (set logging level) with argument 99. |
| [46](#L46) | Successfully parsed a group of options. |
| [47](#L47) | Parsing a group of options: input url samples/tmp3/tmp-32.png48. |
| [48](#L48) | Successfully parsed a group of options. |
| [49](#L49) | Opening an input file: samples/tmp3/tmp-32.png48. |
| [50](#L50) | [NULL @ 0x61b000000080] Opening 'samples/tmp3/tmp-32.png48' for reading |
| [51](#L51) | [file @ 0x610000000040] Setting default whitelist 'file,crypto' |
| [52](#L52) | Probing mpegts score:2 size:290 |
| [53](#L53) | Probing png\_pipe score:99 size:290 |
| [54](#L54) | [png\_pipe @ 0x61b000000080] Format png\_pipe probed with size=2048 and score=99 |
| [55](#L55) | [png\_pipe @ 0x61b000000080] Before avformat\_find\_stream\_info() pos: 0 bytes read:290 seeks:0 nb\_streams:1 |
| [56](#L56) | [png\_pipe @ 0x61b000000080] stream 0: start\_time: -368934881474191040.000 duration: -368934881474191040.000 |
| [57](#L57) | [png\_pipe @ 0x61b000000080] format: start\_time: -9223372036854.775 duration: -9223372036854.775 (estimate from bit rate) bitrate=0 kb/s |
| [58](#L58) | [png\_pipe @ 0x61b000000080] After avformat\_find\_stream\_info() pos: 290 bytes read:290 seeks:0 frames:1 |
| [59](#L59) | Input #0, png\_pipe, from 'samples/tmp3/tmp-32.png48': |
| [60](#L60) | Duration: N/A, bitrate: N/A |
| [61](#L61) | Stream #0:0, 1, 1/25: Video: png, 1 reference frame, rgba64be(pc), 1x1, 0/1, 25 tbr, 25 tbn, 25 tbc |
| [62](#L62) | Successfully opened the file. |
| [63](#L63) | Parsing a group of options: output url output/tmp.u16le. |
| [64](#L64) | Applying option target (specify target file type ("vcd", "svcd", "dvd", "dv" or "dv50" with optional prefixes "pal-", "ntsc-" or "film-")) with argument dvd. |
| [65](#L65) | Assuming PAL for target. |
| [66](#L66) | Applying option map (set input stream mapping) with argument 0. |
| [67](#L67) | Applying option disposition:v:227 (disposition) with argument webvtt. |
| [68](#L68) | Applying option ar (set audio sampling rate (in Hz)) with argument 48000. |
| [69](#L69) | Applying option ac (set number of audio channels) with argument 20. |
| [70](#L70) | Successfully parsed a group of options. |
| [71](#L71) | Opening an output file: output/tmp.u16le. |
| [72](#L72) | [file @ 0x610000000840] Setting default whitelist 'file,crypto' |
| [73](#L73) | Successfully opened the file. |
| [74](#L74) | detected 48 logical cores |
| [75](#L75) | [New Thread 0x7ffff172d700 (LWP 41596)] |
| [76](#L76) | [New Thread 0x7ffff0f2c700 (LWP 41597)] |
| [77](#L77) | [New Thread 0x7ffff072b700 (LWP 41601)] |
| [78](#L78) | [New Thread 0x7fffeff2a700 (LWP 41604)] |
| [79](#L79) | [New Thread 0x7fffef729700 (LWP 41607)] |
| [80](#L80) | [New Thread 0x7fffeef28700 (LWP 41610)] |
| [81](#L81) | [New Thread 0x7fffee727700 (LWP 41615)] |
| [82](#L82) | [New Thread 0x7fffedf26700 (LWP 41616)] |
| [83](#L83) | [New Thread 0x7fffed725700 (LWP 41618)] |
| [84](#L84) | [New Thread 0x7fffecf24700 (LWP 41619)] |
| [85](#L85) | [New Thread 0x7fffec723700 (LWP 41622)] |
| [86](#L86) | [New Thread 0x7fffebf22700 (LWP 41626)] |
| [87](#L87) | [New Thread 0x7fffeb721700 (LWP 41629)] |
| [88](#L88) | [New Thread 0x7fffeaf20700 (LWP 41631)] |
| [89](#L89) | [New Thread 0x7fffea71f700 (LWP 41639)] |
| [90](#L90) | [New Thread 0x7fffe9f1e700 (LWP 41643)] |
| [91](#L91) | Stream mapping: |
| [92](#L92) | Stream #0:0 (png) -> deflate |
| [93](#L93) | deflate -> Stream #0:0 (mpeg2video) |
| [94](#L94) | Press [q] to stop, [?] for help |
| [95](#L95) | cur\_dts is invalid st:0 (0) [init:0 i\_done:0 finish:0] (this is harmless if it occurs once at the start per stream) |
| [96](#L96) | [New Thread 0x7fffe971d700 (LWP 41645)] |
| [97](#L97) | [New Thread 0x7fffe8f1c700 (LWP 41646)] |
| [98](#L98) | [New Thread 0x7fffe871b700 (LWP 41647)] |
| [99](#L99) | [New Thread 0x7fffe7f1a700 (LWP 41650)] |
| [100](#L100) | [New Thread 0x7fffe7719700 (LWP 41655)] |
| [101](#L101) | [New Thread 0x7fffe6f18700 (LWP 41657)] |
| [102](#L102) | [New Thread 0x7fffe6717700 (LWP 41659)] |
| [103](#L103) | [New Thread 0x7fffe5f16700 (LWP 41665)] |
| [104](#L104) | [New Thread 0x7fffe5715700 (LWP 41671)] |
| [105](#L105) | [New Thread 0x7fffe4f14700 (LWP 41672)] |
| [106](#L106) | [New Thread 0x7fffe4713700 (LWP 41673)] |
| [107](#L107) | [New Thread 0x7fffe3f12700 (LWP 41674)] |
| [108](#L108) | [New Thread 0x7fffe3711700 (LWP 41675)] |
| [109](#L109) | [New Thread 0x7fffe2f08700 (LWP 41678)] |
| [110](#L110) | [New Thread 0x7fffe26f1700 (LWP 41680)] |
| [111](#L111) | [New Thread 0x7fffe1eda700 (LWP 41685)] |
| [112](#L112) | [New Thread 0x7fffe16c3700 (LWP 41691)] |
| [113](#L113) | [New Thread 0x7fffe0eac700 (LWP 41693)] |
| [114](#L114) | [New Thread 0x7fffe0695700 (LWP 41694)] |
| [115](#L115) | [New Thread 0x7fffdfe7e700 (LWP 41695)] |
| [116](#L116) | [New Thread 0x7fffdf667700 (LWP 41696)] |
| [117](#L117) | [New Thread 0x7fffdee50700 (LWP 41697)] |
| [118](#L118) | [New Thread 0x7fffde639700 (LWP 41699)] |
| [119](#L119) | [New Thread 0x7fffdde22700 (LWP 41701)] |
| [120](#L120) | [New Thread 0x7fffdd60b700 (LWP 41703)] |
| [121](#L121) | [New Thread 0x7fffdcdf4700 (LWP 41706)] |
| [122](#L122) | [New Thread 0x7fffdc5dd700 (LWP 41707)] |
| [123](#L123) | [New Thread 0x7fffdbdc6700 (LWP 41709)] |
| [124](#L124) | [New Thread 0x7fffdb5af700 (LWP 41716)] |
| [125](#L125) | [New Thread 0x7fffdad98700 (LWP 41717)] |
| [126](#L126) | [New Thread 0x7fffda581700 (LWP 41720)] |
| [127](#L127) | [New Thread 0x7fffd9d6a700 (LWP 41721)] |
| [128](#L128) | [New Thread 0x7fffd9553700 (LWP 41722)] |
| [129](#L129) | [New Thread 0x7fffd8d3c700 (LWP 41723)] |
| [130](#L130) | [New Thread 0x7fffd8525700 (LWP 41724)] |
| [131](#L131) | [New Thread 0x7fffd7d0e700 (LWP 41725)] |
| [132](#L132) | [New Thread 0x7fffd74f7700 (LWP 41726)] |
| [133](#L133) | [New Thread 0x7fffd6ce0700 (LWP 41729)] |
| [134](#L134) | [New Thread 0x7fffd64c9700 (LWP 41731)] |
| [135](#L135) | [New Thread 0x7fffd5cb2700 (LWP 41733)] |
| [136](#L136) | [New Thread 0x7fffd549b700 (LWP 41737)] |
| [137](#L137) | [New Thread 0x7fffd4c84700 (LWP 41739)] |
| [138](#L138) | [New Thread 0x7fffd446d700 (LWP 41742)] |
| [139](#L139) | [New Thread 0x7fffd3c56700 (LWP 41745)] |
| [140](#L140) | [New Thread 0x7fffd343f700 (LWP 41750)] |
| [141](#L141) | [New Thread 0x7fffd2c28700 (LWP 41751)] |
| [142](#L142) | [New Thread 0x7fffd2411700 (LWP 41754)] |
| [143](#L143) | [New Thread 0x7fffd1bfa700 (LWP 41755)] |
| [144](#L144) | Last message repeated 1 times |
| [145](#L145) | [graph 0 input from stream 0:0 @ 0x6110000011c0] Setting 'video\_size' to value '1x1' |
| [146](#L146) | [graph 0 input from stream 0:0 @ 0x6110000011c0] Setting 'pix\_fmt' to value '106' |
| [147](#L147) | [graph 0 input from stream 0:0 @ 0x6110000011c0] Setting 'time\_base' to value '1/25' |
| [148](#L148) | [graph 0 input from stream 0:0 @ 0x6110000011c0] Setting 'pixel\_aspect' to value '0/1' |
| [149](#L149) | [graph 0 input from stream 0:0 @ 0x6110000011c0] Setting 'sws\_param' to value 'flags=2' |
| [150](#L150) | [graph 0 input from stream 0:0 @ 0x6110000011c0] Setting 'frame\_rate' to value '25/1' |
| [151](#L151) | [graph 0 input from stream 0:0 @ 0x6110000011c0] w:1 h:1 pixfmt:rgba64be tb:1/25 fr:25/1 sar:0/1 sws\_param:flags=2 |
| [152](#L152) | [scaler\_out\_0\_0 @ 0x611000001440] Setting 'w' to value '720' |
| [153](#L153) | [scaler\_out\_0\_0 @ 0x611000001440] Setting 'h' to value '576' |
| [154](#L154) | [scaler\_out\_0\_0 @ 0x611000001440] Setting 'flags' to value 'bicubic' |
| [155](#L155) | [scaler\_out\_0\_0 @ 0x611000001440] w:720 h:576 flags:'bicubic' interl:0 |
| [156](#L156) | [format @ 0x6110000016c0] Setting 'pix\_fmts' to value 'yuv420p' |
| [157](#L157) | [auto\_scaler\_0 @ 0x61100001b700] w:iw h:ih flags:'bilinear' interl:0 |
| [158](#L158) | [Parsed\_deflate\_0 @ 0x611000001080] auto-inserting filter 'auto\_scaler\_0' between the filter 'graph 0 input from stream 0:0' and the filter 'Parsed\_deflate\_0' |
| [159](#L159) | [AVFilterGraph @ 0x60e000001280] query\_formats: 5 queried, 3 merged, 1 already done, 0 delayed |
| [160](#L160) | [auto\_scaler\_0 @ 0x61100001b700] picking gbrap16le out of 55 ref:rgba64be alpha:1 |
| [161](#L161) | [swscaler @ 0x62f000000400] Forcing full internal H chroma due to odd output size |
| [162](#L162) | [swscaler @ 0x62f000000400] Forcing full internal H chroma due to input having non subsampled chroma |
| [163](#L163) | [auto\_scaler\_0 @ 0x61100001b700] w:1 h:1 fmt:rgba64be sar:0/1 -> w:1 h:1 fmt:gbrap16le sar:0/1 flags:0x2 |
| [164](#L164) | [scaler\_out\_0\_0 @ 0x611000001440] w:1 h:1 fmt:gbrap16le sar:0/1 -> w:720 h:576 fmt:yuv420p sar:0/1 flags:0x4 |
| [165](#L165) | ================================================================= |
| [166](#L166) | ==41359==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x619000007d7e at pc 0x000001038790 bp 0x7fffffffa190 sp 0x7fffffffa188 |
| [167](#L167) | READ of size 2 at 0x619000007d7e thread T0 |
| [168](#L168) | #0 0x103878f in deflate16 ffmpeg/libavfilter/vf\_neighbor.c:191:35 |
| [169](#L169) | #1 0x1033f4b in filter\_slice ffmpeg/libavfilter/vf\_neighbor.c:301:13 |
| [170](#L170) | #2 0x9429d9 in worker\_func ffmpeg/libavfilter/pthread.c:50:15 |
| [171](#L171) | #3 0x8658de2 in run\_jobs ffmpeg/libavutil/slicethread.c:61:9 |
| [172](#L172) | #4 0x8658484 in avpriv\_slicethread\_execute ffmpeg/libavutil/slicethread.c:188:19 |
| [173](#L173) | #5 0x942136 in thread\_execute ffmpeg/libavfilter/pthread.c:72:5 |
| [174](#L174) | #6 0x102f611 in filter\_frame ffmpeg/libavfilter/vf\_neighbor.c:328:5 |
| [175](#L175) | #7 0x827289 in ff\_filter\_activate\_default ffmpeg/libavfilter/avfilter.c:1071:11 |
| [176](#L176) | #8 0x827289 in ff\_filter\_activate ffmpeg/libavfilter/avfilter.c:1430 |
| [177](#L177) | #9 0x870182 in push\_frame ffmpeg/libavfilter/buffersrc.c:187:15 |
| [178](#L178) | #10 0x870182 in av\_buffersrc\_add\_frame\_internal ffmpeg/libavfilter/buffersrc.c:261 |
| [179](#L179) | #11 0x86ebc2 in av\_buffersrc\_add\_frame\_flags ffmpeg/libavfilter/buffersrc.c:170:16 |
| [180](#L180) | #12 0x666867 in ifilter\_send\_frame ffmpeg/fftools/ffmpeg.c:2196:11 |
| [181](#L181) | #13 0x666867 in send\_frame\_to\_filters ffmpeg/fftools/ffmpeg.c:2270 |
| [182](#L182) | #14 0x6075f7 in decode\_video ffmpeg/fftools/ffmpeg.c:2469:11 |
| [183](#L183) | #15 0x6075f7 in process\_input\_packet ffmpeg/fftools/ffmpeg.c:2623 |
| [184](#L184) | #16 0x6450b8 in process\_input ffmpeg/fftools/ffmpeg.c:4313:23 |
| [185](#L185) | #17 0x5e7157 in transcode\_step ffmpeg/fftools/ffmpeg.c:4638:11 |
| [186](#L186) | #18 0x5e7157 in transcode ffmpeg/fftools/ffmpeg.c:4692 |
| [187](#L187) | #19 0x5db65b in main ffmpeg/fftools/ffmpeg.c:4894:9 |
| [188](#L188) | #20 0x7ffff5c93b96 in \_\_libc\_start\_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 |
| [189](#L189) | #21 0x41def9 in \_start (ffmpeg/ffmpeg\_g+0x41def9) |
| [190](#L190) |  |
| [191](#L191) | 0x619000007d7e is located 2 bytes to the left of 1055-byte region [0x619000007d80,0x61900000819f) |
| [192](#L192) | allocated by thread T0 here: |
| [193](#L193) | #0 0x4de9e8 in posix\_memalign (ffmpeg/ffmpeg\_g+0x4de9e8) |
| [194](#L194) | #1 0x8564fb1 in av\_malloc ffmpeg/libavutil/mem.c:87:9 |
| [195](#L195) | #2 0x84cc231 in av\_buffer\_alloc ffmpeg/libavutil/buffer.c:72:12 |
| [196](#L196) | #3 0x84cc231 in av\_buffer\_allocz ffmpeg/libavutil/buffer.c:85 |
| [197](#L197) | #4 0x84d0a56 in pool\_alloc\_buffer ffmpeg/libavutil/buffer.c:313:26 |
| [198](#L198) | #5 0x84d0a56 in av\_buffer\_pool\_get ffmpeg/libavutil/buffer.c:349 |
| [199](#L199) | #6 0x91af8d in ff\_frame\_pool\_get ffmpeg/libavfilter/framepool.c:222:29 |
| [200](#L200) | #7 0x15a660c in ff\_default\_get\_video\_buffer ffmpeg/libavfilter/video.c:90:13 |
| [201](#L201) | #8 0x124c7f9 in scale\_frame ffmpeg/libavfilter/vf\_scale.c:460:11 |
| [202](#L202) | #9 0x124a8ec in filter\_frame ffmpeg/libavfilter/vf\_scale.c:549:11 |
| [203](#L203) | #10 0x827289 in ff\_filter\_activate\_default ffmpeg/libavfilter/avfilter.c:1071:11 |
| [204](#L204) | #11 0x827289 in ff\_filter\_activate ffmpeg/libavfilter/avfilter.c:1430 |
| [205](#L205) | #12 0x870135 in push\_frame ffmpeg/libavfilter/buffersrc.c:187:15 |
| [206](#L206) | #13 0x870135 in av\_buffersrc\_add\_frame\_internal ffmpeg/libavfilter/buffersrc.c:261 |
| [207](#L207) | #14 0x86ebc2 in av\_buffersrc\_add\_frame\_flags ffmpeg/libavfilter/buffersrc.c:170:16 |
| [208](#L208) | #15 0x666867 in ifilter\_send\_frame ffmpeg/fftools/ffmpeg.c:2196:11 |
| [209](#L209) | #16 0x666867 in send\_frame\_to\_filters ffmpeg/fftools/ffmpeg.c:2270 |
| [210](#L210) | #17 0x6075f7 in decode\_video ffmpeg/fftools/ffmpeg.c:2469:11 |
| [211](#L211) | #18 0x6075f7 in process\_input\_packet ffmpeg/fftools/ffmpeg.c:2623 |
| [212](#L212) | #19 0x6450b8 in process\_input ffmpeg/fftools/ffmpeg.c:4313:23 |
| [213](#L213) | #20 0x5e7157 in transcode\_step ffmpeg/fftools/ffmpeg.c:4638:11 |
| [214](#L214) | #21 0x5e7157 in transcode ffmpeg/fftools/ffmpeg.c:4692 |
| [215](#L215) | #22 0x5db65b in main ffmpeg/fftools/ffmpeg.c:4894:9 |
| [216](#L216) | #23 0x7ffff5c93b96 in \_\_libc\_start\_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310 |
| [217](#L217) |  |
| [218](#L218) | SUMMARY: AddressSanitizer: heap-buffer-overflow ffmpeg/libavfilter/vf\_neighbor.c:191:35 in deflate16 |
| [219](#L219) | Shadow bytes around the buggy address: |
| [220](#L220) | 0x0c327fff8f50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |
| [221](#L221) | 0x0c327fff8f60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |
| [222](#L222) | 0x0c327fff8f70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |
| [223](#L223) | 0x0c327fff8f80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |
| [224](#L224) | 0x0c327fff8f90: 00 00 00 00 00 fa fa fa fa fa fa fa fa fa fa fa |
| [225](#L225) | =>0x0c327fff8fa0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa[fa] |
| [226](#L226) | 0x0c327fff8fb0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |
| [227](#L227) | 0x0c327fff8fc0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |
| [228](#L228) | 0x0c327fff8fd0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |
| [229](#L229) | 0x0c327fff8fe0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |
| [230](#L230) | 0x0c327fff8ff0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 |
| [231](#L231) | Shadow byte legend (one shadow byte represents 8 application bytes): |
| [232](#L232) | Addressable: 00 |
| [233](#L233) | Partially addressable: 01 02 03 04 05 06 07 |
| [234](#L234) | Heap left redzone: fa |
| [235](#L235) | Freed heap region: fd |
| [236](#L236) | Stack left redzone: f1 |
| [237](#L237) | Stack mid redzone: f2 |
| [238](#L238) | Stack right redzone: f3 |
| [239](#L239) | Stack after return: f5 |
| [240](#L240) | Stack use after scope: f8 |
| [241](#L241) | Global redzone: f9 |
| [242](#L242) | Global init order: f6 |
| [243](#L243) | Poisoned by user: f7 |
| [244](#L244) | Container overflow: fc |
| [245](#L245) | Array cookie: ac |
| [246](#L246) | Intra object redzone: bb |
| [247](#L247) | ASan internal: fe |
| [248](#L248) | Left alloca redzone: ca |
| [249](#L249) | Right alloca redzone: cb |
| [250](#L250) | ==41359==ABORTING |
| [251](#L251) | [Thread 0x7fffd1bfa700 (LWP 41755) exited] |
| [252](#L252) | [Thread 0x7fffd2411700 (LWP 41754) exited] |
| [253](#L253) | [Thread 0x7fffd2c28700 (LWP 41751) exited] |
| [254](#L254) | [Thread 0x7fffd343f700 (LWP 41750) exited] |
| [255](#L255) | [Thread 0x7fffd3c56700 (LWP 41745) exited] |
| [256](#L256) | [Thread 0x7fffd446d700 (LWP 41742) exited] |
| [257](#L257) | [Thread 0x7fffd4c84700 (LWP 41739) exited] |
| [258](#L258) | [Thread 0x7fffd549b700 (LWP 41737) exited] |
| [259](#L259) | [Thread 0x7fffd5cb2700 (LWP 41733) exited] |
| [260](#L260) | [Thread 0x7fffd64c9700 (LWP 41731) exited] |
| [261](#L261) | [Thread 0x7fffd74f7700 (LWP 41726) exited] |
| [262](#L262) | [Thread 0x7fffd7d0e700 (LWP 41725) exited] |
| [263](#L263) | [Thread 0x7fffd8525700 (LWP 41724) exited] |
| [264](#L264) | [Thread 0x7fffd8d3c700 (LWP 41723) exited] |
| [265](#L265) | [Thread 0x7fffd9553700 (LWP 41722) exited] |
| [266](#L266) | [Thread 0x7fffd9d6a700 (LWP 41721) exited] |
| [267](#L267) | [Thread 0x7fffda581700 (LWP 41720) exited] |
| [268](#L268) | [Thread 0x7fffdad98700 (LWP 41717) exited] |
| [269](#L269) | [Thread 0x7fffdb5af700 (LWP 41716) exited] |
| [270](#L270) | [Thread 0x7fffdbdc6700 (LWP 41709) exited] |
| [271](#L271) | [Thread 0x7fffdc5dd700 (LWP 41707) exited] |
| [272](#L272) | [Thread 0x7fffdcdf4700 (LWP 41706) exited] |
| [273](#L273) | [Thread 0x7fffdd60b700 (LWP 41703) exited] |
| [274](#L274) | [Thread 0x7fffdde22700 (LWP 41701) exited] |
| [275](#L275) | [Thread 0x7fffde639700 (LWP 41699) exited] |
| [276](#L276) | [Thread 0x7fffdee50700 (LWP 41697) exited] |
| [277](#L277) | [Thread 0x7fffdf667700 (LWP 41696) exited] |
| [278](#L278) | [Thread 0x7fffdfe7e700 (LWP 41695) exited] |
| [279](#L279) | [Thread 0x7fffe0695700 (LWP 41694) exited] |
| [280](#L280) | [Thread 0x7fffe0eac700 (LWP 41693) exited] |
| [281](#L281) | [Thread 0x7fffe16c3700 (LWP 41691) exited] |
| [282](#L282) | [Thread 0x7fffe1eda700 (LWP 41685) exited] |
| [283](#L283) | [Thread 0x7fffe26f1700 (LWP 41680) exited] |
| [284](#L284) | [Thread 0x7fffe2f08700 (LWP 41678) exited] |
| [285](#L285) | [Thread 0x7fffe3711700 (LWP 41675) exited] |
| [286](#L286) | [Thread 0x7fffe3f12700 (LWP 41674) exited] |
| [287](#L287) | [Thread 0x7fffe4713700 (LWP 41673) exited] |
| [288](#L288) | [Thread 0x7fffe4f14700 (LWP 41672) exited] |
| [289](#L289) | [Thread 0x7fffe5715700 (LWP 41671) exited] |
| [290](#L290) | [Thread 0x7fffe5f16700 (LWP 41665) exited] |
| [291](#L291) | [Thread 0x7fffe6717700 (LWP 41659) exited] |
| [292](#L292) | [Thread 0x7fffe6f18700 (LWP 41657) exited] |
| [293](#L293) | [Thread 0x7fffe7719700 (LWP 41655) exited] |
| [294](#L294) | [Thread 0x7fffe7f1a700 (LWP 41650) exited] |
| [295](#L295) | [Thread 0x7fffe871b700 (LWP 41647) exited] |
| [296](#L296) | [Thread 0x7fffe8f1c700 (LWP 41646) exited] |
| [297](#L297) | [Thread 0x7fffe971d700 (LWP 41645) exited] |
| [298](#L298) | [Thread 0x7fffe9f1e700 (LWP 41643) exited] |
| [299](#L299) | [Thread 0x7fffea71f700 (LWP 41639) exited] |
| [300](#L300) | [Thread 0x7fffeaf20700 (LWP 41631) exited] |
| [301](#L301) | [Thread 0x7fffeb721700 (LWP 41629) exited] |
| [302](#L302) | [Thread 0x7fffebf22700 (LWP 41626) exited] |
| [303](#L303) | [Thread 0x7fffec723700 (LWP 41622) exited] |
| [304](#L304) | [Thread 0x7fffecf24700 (LWP 41619) exited] |
| [305](#L305) | [Thread 0x7fffed725700 (LWP 41618) exited] |
| [306](#L306) | [Thread 0x7fffedf26700 (LWP 41616) exited] |
| [307](#L307) | [Thread 0x7fffee727700 (LWP 41615) exited] |
| [308](#L308) | [Thread 0x7fffeef28700 (LWP 41610) exited] |
| [309](#L309) | [Thread 0x7fffef729700 (LWP 41607) exited] |
| [310](#L310) | [Thread 0x7fffeff2a700 (LWP 41604) exited] |
| [311](#L311) | [Thread 0x7ffff072b700 (LWP 41601) exited] |
| [312](#L312) | [Thread 0x7ffff0f2c700 (LWP 41597) exited] |
| [313](#L313) | [Thread 0x7ffff172d700 (LWP 41596) exited] |
| [314](#L314) | [Thread 0x7ffff7fb6780 (LWP 41359) exited] |
| [315](#L315) | [Inferior 1 (process 41359) exited with code 01] |
| [316](#L316) |  |

### Download in other formats:

* [Original Format](/raw-attachment/ticket/8242/gdb-vf_neighbor_191)

---

[![Trac Powered](/chrome/common/trac_logo_mini.png)](https://trac.edgewall.org/)

Powered by [**Trac 1.6**](/about)

By [Edgewall Software](http://www.edgewall.org/)
.

Visit the Trac open source project at
<http://trac.edgewall.org/>


