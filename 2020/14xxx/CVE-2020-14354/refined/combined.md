=== Content from packetstormsecurity.com_3e6fb75c_20250119_112705.html ===

[![](/logos/smalllogobeta.png)](/)

* files
* news
* users
* cve

[![](/logos/smalllogobeta.png)](/)

* files
* news
* users
* cve

![](/logos/linegray.png)

 [About](/help/view/4) |
[Terms](/tos/) |
[Copyright](/help/view/7) |
[Privacy](/help/view/6) |
[BlueSky](https://bsky.app/profile/packetstorm.bsky.social) |
[X](https://x.com/packet_storm) |
[Mastodon](https://infosec.exchange/%40packet_storm/)



=== Content from c-ares.haxx.se_533561bf_20250119_112702.html ===

[![c-ares](/assets/c-ares-logo.svg)](/)

[Docs](/docs.html)[Features](/features/)[GitHub](https://github.com/c-ares/c-ares)[License](/license.html)[Mail Archive](/mailarchive.html)[Why](/why.html)

# Changelog

## c-ares version 1.34.4 - December 14 2024

This is a bugfix release.

Changes:

* QNX Port: Port to QNX 8, add primary config reading support, add CI build. [PR #934](https://github.com/c-ares/c-ares/pull/934), [PR #937](https://github.com/c-ares/c-ares/pull/937), [PR #938](https://github.com/c-ares/c-ares/pull/938)

Bugfixes:

* Empty TXT records were not being preserved. [PR #922](https://github.com/c-ares/c-ares/pull/922)
* docs: update deprecation notices for `ares_create_query()` and `ares_mkquery()`. [PR #910](https://github.com/c-ares/c-ares/pull/910)
* license: some files weren’t properly updated. [PR #920](https://github.com/c-ares/c-ares/pull/920)
* Fix bind local device regression from 1.34.0. [PR #929](https://github.com/c-ares/c-ares/pull/929), [PR #931](https://github.com/c-ares/c-ares/pull/931), [PR #935](https://github.com/c-ares/c-ares/pull/935)
* CMake: set policy version to prevent deprecation warnings. [PR #932](https://github.com/c-ares/c-ares/pull/932)
* CMake: shared and static library names should be the same on unix platforms like autotools uses. [PR #933](https://github.com/c-ares/c-ares/pull/933)
* Update to latest autoconf archive macros for enhanced system compatibility. [PR #936](https://github.com/c-ares/c-ares/pull/936)

## c-ares version 1.34.3 - November 9 2024

This is a bugfix release.

Changes:

* Build the release package in an automated way so we can provide
  provenance as per [SLSA3](https://slsa.dev/).
  [PR #906](https://github.com/c-ares/c-ares/pull/906)

Bugfixes:

* Some upstream servers are non-compliant with EDNS options, resend queries
  without EDNS. [Issue #911](https://github.com/c-ares/c-ares/issues/911)
* Android: <=7 needs sys/system\_properties.h
  [a70637c](https://github.com/c-ares/c-ares/commit/a70637c)
* Android: CMake needs `-D_GNU_SOURCE` and others.
  [PR #915](https://github.com/c-ares/c-ares/pull/914)
* TSAN warns on missing lock, but lock isn’t actually necessary.
  [PR #915](https://github.com/c-ares/c-ares/pull/915)
* `ares_getaddrinfo()` for `AF_UNSPEC` should retry IPv4 if only IPv6 is
  received. [765d558](https://github.com/c-ares/c-ares/commit/765d558)
* `ares_send()` shouldn’t return `ARES_EBADRESP`, its `ARES_EBADQUERY`.
  [91519e7](https://github.com/c-ares/c-ares/commit/91519e7)
* Fix typos in man pages. [PR #905](https://github.com/c-ares/c-ares/pull/905)

## c-ares version 1.34.2 - October 15 2024

This release contains a fix for downstream packages detecting the c-ares
version based on the contents of the header file rather than the
distributed pkgconf or cmake files.

## c-ares version 1.34.1 - October 9 2024

This release fixes a packaging issue.

## c-ares version 1.34.0 - October 9 2024

This is a feature and bugfix release.

Features:

* adig: read arguments from adigrc.
  [PR #856](https://github.com/c-ares/c-ares/pull/856)
* Add new pending write callback optimization via `ares_set_pending_write_cb`.
  [PR #857](https://github.com/c-ares/c-ares/pull/857)
* New function `ares_process_fds()`.
  [PR #875](https://github.com/c-ares/c-ares/pull/875)
* Failed servers should be probed rather than redirecting queries which could
  cause unexpected latency.
  [PR #877](https://github.com/c-ares/c-ares/pull/877)
* adig: rework command line arguments to mimic dig from bind.
  [PR #890](https://github.com/c-ares/c-ares/pull/890)
* Add new method for overriding network functions
  `ares_set_socket_function_ex()` to properly support all new functionality.
  [PR #894](https://github.com/c-ares/c-ares/pull/894)
* Fix regression with custom socket callbacks due to DNS cookie support.
  [PR #895](https://github.com/c-ares/c-ares/pull/895)
* ares\_socket: set IP\_BIND\_ADDRESS\_NO\_PORT on ares\_set\_local\_ip\* tcp sockets
  [PR #887](https://github.com/c-ares/c-ares/pull/887)
* URI parser/writer for ares\_set\_servers\_csv()/ares\_get\_servers\_csv().
  [PR #882](https://github.com/c-ares/c-ares/pull/882)

Changes:

* Connection handling modularization.
  [PR #857](https://github.com/c-ares/c-ares/pull/857),
  [PR #876](https://github.com/c-ares/c-ares/pull/876)
* Expose library/utility functions to tools.
  [PR #860](https://github.com/c-ares/c-ares/pull/860)
* Remove `ares__` prefix, just use `ares_` for internal functions.
  [PR #872](https://github.com/c-ares/c-ares/pull/872)

Bugfixes:

* fix: potential WIN32\_LEAN\_AND\_MEAN redefinition.
  [PR #869](https://github.com/c-ares/c-ares/pull/869)
* Fix googletest v1.15 compatibility.
  [PR #874](https://github.com/c-ares/c-ares/pull/874)
* Fix pkgconfig thread dependencies.
  [PR #884](https://github.com/c-ares/c-ares/pull/884)

## c-ares version 1.33.1 - August 23 2024

This is a bugfix release.

Bugfixes:

* Work around systemd-resolved quirk that returns unexpected codes for single
  label names. Also adds test cases to validate the work around works and
  will continue to work in future releases.
  [PR #863](https://github.com/c-ares/c-ares/pull/863),
  See Also [systemd/systemd#34101](https://github.com/systemd/systemd/issues/34101)
* Fix sysconfig ndots default value, also adds containerized test case to
  prevent future regressions.
  [PR #862](https://github.com/c-ares/c-ares/pull/862)
* Fix blank DNS name returning error code rather than valid record for
  commands like: `adig -t SOA .`. Also adds test case to prevent future
  regressions.
  [9e574af](https://github.com/c-ares/c-ares/commit/9e574af)
* Fix calculation of query times > 1s.
  [2b2eae7](https://github.com/c-ares/c-ares/commit/2b2eae7)
* Fix building on old Linux releases that don’t have `TCP_FASTOPEN_CONNECT`.
  [b7a89b9](https://github.com/c-ares/c-ares/commit/b7a89b9)
* Fix minor Android build warnings.
  [PR #848](https://github.com/c-ares/c-ares/pull/848)

## c-ares version 1.33.0 - August 2 2024

This is a feature and bugfix release.

Features:

* Add DNS cookie support (RFC7873 + RFC9018) to help prevent off-path cache
  poisoning attacks. [PR #833](https://github.com/c-ares/c-ares/pull/833)
* Implement TCP FastOpen (TFO) RFC7413, which will make TCP reconnects 0-RTT
  on supported systems. [PR #840](https://github.com/c-ares/c-ares/pull/840)

Changes:

* Reorganize source tree. [PR #822](https://github.com/c-ares/c-ares/pull/822)
* Refactoring of connection handling to prevent code duplication.
  [PR #839](https://github.com/c-ares/c-ares/pull/839)
* New dynamic array data structure to prevent simple logic flaws in array
  handling in various code paths.
  [PR #841](https://github.com/c-ares/c-ares/pull/841)

Bugfixes:

* `ares_destroy()` race condition during shutdown due to missing lock.
  [PR #831](https://github.com/c-ares/c-ares/pull/831)
* Android: Preserve thread name after attaching it to JVM.
  [PR #838](https://github.com/c-ares/c-ares/pull/838)
* Windows UWP (Store) support fix.
  [PR #845](https://github.com/c-ares/c-ares/pull/845)

## c-ares version 1.32.3 - July 24 2024

This is a bugfix release.

Changes:

* Prevent complex recursion during query requeuing and connection cleanup for
  stability. [e8b32b8](https://github.com/c-ares/c-ares/commit/e8b32b8)
* Better propagate error codes on requeue situations.
  [a9bc0a2](https://github.com/c-ares/c-ares/commit/a9bc0a2)
* Try to prevent SIGPIPE from being generated and delivered to integrations.
  [de01baa](https://github.com/c-ares/c-ares/commit/de01baa)

Bugfixes:

* Missing manpage for `ares_dns_record_set_id()`
  [aa462b3](https://github.com/c-ares/c-ares/commit/aa462b3)
* Memory leak in `ares__hosts_entry_to_hostent()` due to allocation strategy.
  [PR #824](https://github.com/c-ares/c-ares/pull/824)
* UDP write failure detected via ICMP unreachable should trigger faster
  failover. [PR #821](https://github.com/c-ares/c-ares/pull/821)
* Fix pycares test case regression due to wrong error code being returned.
  Regression from 1.31.0. [PR #820](https://github.com/c-ares/c-ares/pull/820)
* Fix possible Windows crash during `ares_destroy()` when using event threads.
  [5609bd4](https://github.com/c-ares/c-ares/commit/5609bd4)
* `ARES_OPT_MAXTIMEOUTMS` wasn’t being honored in all cases.
  [a649c60](https://github.com/c-ares/c-ares/commit/a649c60)

## c-ares version 1.32.2 - July 15 2024

This is a bugfix release.

Bugfixes:

* Windows: rework EventThread AFD code for better stability.
  [PR #811](https://github.com/c-ares/c-ares/pull/811)
* Windows: If an IP address was detected to have changed, it could lead to a
  crash due to a bad pointer. Regression introduced in 1.31.0.
  [59e3a1f4](https://github.com/c-ares/c-ares/commit/59e3a1f4)
* Windows: use `QueryPerformanceCounters()` instead of `GetTickCount64()` for
  better time accuracy (~15ms -> ~1us).
  [8a50fc6c](https://github.com/c-ares/c-ares/commit/8a50fc6c)
* Windows 32bit config change callback needs to be tagged as `stdcall` otherwise
  could result in a crash.
  [5c2bab35](https://github.com/c-ares/c-ares/commit/5c2bab35)
* Tests that need accurate timing should not depend on internal symbols as there
  are C++ equivalents in `std::chrono`.
  [PR #809](https://github.com/c-ares/c-ares/pull/809)
* Kqueue (MacOS, \*BSD): If the open socket count exceeded 8 (unlikely), it
  would try to allocate a new buffer that was too small.
  [5aad7981](https://github.com/c-ares/c-ares/commit/5aad7981)

## c-ares version 1.32.1 - July 7 2024

This is a bugfix release.

Bugfixes:

* Channel lock needs to be recursive to ensure calls into c-ares functions can
  be made from callbacks otherwise deadlocks will occur. This regression was
  introduced in 1.32.0.

## c-ares version 1.32.0 - July 4 2024

This is a feature and bugfix release.

Features:

* Add support for DNS 0x20 to help prevent cache poisoning attacks, enabled
  by specifying `ARES_FLAG_DNS0x20`. Disabled by default. [PR #800](https://github.com/c-ares/c-ares/pull/800)
* Rework query timeout logic to automatically adjust timeouts based on network
  conditions. The timeout specified now is only used as a hint until there
  is enough history to calculate a more valid timeout. [PR #794](https://github.com/c-ares/c-ares/pull/794)

Changes:

* DNS RR TXT strings should not be automatically concatenated as there are use
  cases outside of RFC 7208. In order to maintain ABI compliance, the ability
  to retrieve TXT strings concatenated is retained as well as a new API to
  retrieve the individual strings. This restores behavior from c-ares 1.20.0.
  [PR #801](https://github.com/c-ares/c-ares/pull/801)
* Clean up header inclusion logic to make hacking on code easier. [PR #797](https://github.com/c-ares/c-ares/pull/797)
* GCC/Clang: Enable even more strict warnings to catch more coding flaws. [253bdee](https://github.com/c-ares/c-ares/commit/253bdee)
* MSVC: Enable `/W4` warning level. [PR #792](https://github.com/c-ares/c-ares/pull/792)

Bugfixes:

* Tests: Fix thread race condition in test cases for EventThread. [PR #803](https://github.com/c-ares/c-ares/pull/803)
* Windows: Fix building with UNICODE. [PR #802](https://github.com/c-ares/c-ares/pull/802)
* Thread Saftey: `ares_timeout()` was missing lock. [74a64e4](https://github.com/c-ares/c-ares/commit/74a64e4)
* Fix building with DJGPP (32bit protected mode DOS). [PR #789](https://github.com/c-ares/c-ares/pull/789)

## c-ares version 1.31.0 - June 18 2024

This is a maintenance and bugfix release.

Changes:

* Enable Query Cache by default. [PR #786](https://github.com/c-ares/c-ares/pull/786)

Bugfixes:

* Enhance Windows DNS configuration change detection to also detect manual DNS
  configuration changes. [PR #785](https://github.com/c-ares/c-ares/issues/785)
* Various legacy MacOS Build fixes. [Issue #782](https://github.com/c-ares/c-ares/issues/782)
* Ndots value of zero in resolv.conf was not being honored. [852a60a](https://github.com/c-ares/c-ares/commit/852a60a)
* Watt-32 build support had been broken for some time. [PR #781](https://github.com/c-ares/c-ares/pull/781)
* Distribute `ares_dns_rec_type_tostr` manpage. [PR #778](https://github.com/c-ares/c-ares/pull/778)

## c-ares version 1.30.0 - June 7 2024

This is a maintenance and bugfix release.

Features:

* Basic support for SIG RR record (RFC 2931 / RFC 2535) [PR #773](https://github.com/c-ares/c-ares/pull/773)

Changes:

* Validation that DNS strings can only consist of printable ascii characters
  otherwise will trigger a parse failure.
  [75de16c](https://github.com/c-ares/c-ares/commit/75de16c) and
  [40fb125](https://github.com/c-ares/c-ares/commit/40fb125)
* Windows: use `GetTickCount64()` for a monotonic timer that does not wrap. [1dff8f6](https://github.com/c-ares/c-ares/commit/1dff8f6)

Bugfixes:

* QueryCache: Fix issue where purging on server changes wasn’t working. [a6c8fe6](https://github.com/c-ares/c-ares/commit/a6c8fe6)
* Windows: Fix Y2K38 issue by creating our own `ares_timeval_t` datatype. [PR #772](https://github.com/c-ares/c-ares/pull/772)
* Fix packaging issue affecting MacOS due to a missing header. [55afad6](https://github.com/c-ares/c-ares/commit/55afad6)
* MacOS: Fix UBSAN warnings that are likely meaningless due to alignment issues
  in new MacOS config reader.
* Android: arm 32bit build failure due to missing symbol. [d1722e6](https://github.com/c-ares/c-ares/commit/d1722e6)

## c-ares version 1.29.0 - May 24 2024

This is a feature and bugfix release.

Features:

* When using `ARES_OPT_EVENT_THREAD`, automatically reload system configuration
  when network conditions change. [PR #759](https://github.com/c-ares/c-ares/pull/759)
* Apple: reimplement DNS configuration reading to more accurately pull DNS
  settings. [PR #750](https://github.com/c-ares/c-ares/pull/750)
* Add observability into DNS server health via a server state callback, invoked
  whenever a query finishes. [PR #744](https://github.com/c-ares/c-ares/pull/744)
* Add server failover retry behavior, where failed servers are retried with
  small probability after a minimum delay. [PR #731](https://github.com/c-ares/c-ares/pull/731)

Changes:

* Mark `ares_channel_t *` as const in more places in the public API. [PR #758](https://github.com/c-ares/c-ares/pull/758)

Bugfixes:

* Due to a logic flaw dns name compression writing was not properly implemented
  which would result in the name prefix not being written for a partial match.
  This could cause issues in various record types such as MX records when using
  the deprecated API. Regression introduced in 1.28.0. [Issue #757](https://github.com/c-ares/c-ares/issues/757)
* Revert OpenBSD `SOCK_DNS` flag, it doesn’t do what the docs say it does and
  causes c-ares to become non-functional. [PR #754](https://github.com/c-ares/c-ares/pull/754)
* `ares_getnameinfo()`: loosen validation on `salen` parameter. [Issue #752](https://github.com/c-ares/c-ares/issues/752)
* cmake: Android requires C99. [PR #748](https://github.com/c-ares/c-ares/pull/748)
* `ares_queue_wait_empty()` does not honor timeout\_ms >= 0. [Issue #742](https://github.com/c-ares/c-ares/pull/742)

## c-ares version 1.28.1 - Mar 30 2024

This release contains a fix for a single significant regression introduced
in c-ares 1.28.0.

* `ares_search()` and `ares_getaddrinfo()` resolution fails if no search domains
  are specified. [Issue #737](https://github.com/c-ares/c-ares/issues/737)

## c-ares version 1.28.0 - Mar 29 2024

This is a feature and bugfix release.

Features:

* Emit warnings when deprecated c-ares functions are used. This can be
  disabled by passing a compiler definition of `CARES_NO_DEPRECATED`. [PR #732](https://github.com/c-ares/c-ares/pull/732)
* Add function `ares_search_dnsrec()` to search for records using the new DNS
  record data structures. [PR #719](https://github.com/c-ares/c-ares/pull/719)
* Rework internals to pass around `ares_dns_record_t` instead of binary data,
  this introduces new public functions of `ares_query_dnsrec()` and
  `ares_send_dnsrec()`. [PR #730](https://github.com/c-ares/c-ares/pull/730)

Changes:

* tests: when performing simulated queries, reduce timeouts to make tests run
  faster
* Replace configuration file parsers with memory-safe parser. [PR #725](https://github.com/c-ares/c-ares/pull/725)
* Remove `acountry` completely, the manpage might still get installed otherwise. [Issue #718](https://github.com/c-ares/c-ares/pull/718)

Bugfixes:

* CMake: don’t overwrite global required libraries/definitions/includes which
  could cause build errors for projects chain building c-ares. [Issue #729](https://github.com/c-ares/c-ares/issues/729)
* On some platforms, `netinet6/in6.h` is not included by `netinet/in.h`
  and needs to be included separately. [PR #728](https://github.com/c-ares/c-ares/pull/728)
* Fix a potential memory leak in `ares_init()`. [Issue #724](https://github.com/c-ares/c-ares/issues/724)
* Some platforms don’t have the `isascii()` function. Implement as a macro. [PR #721](https://github.com/c-ares/c-ares/pull/721)
* CMake: Fix Chain building if CMAKE runtime paths not set
* NDots configuration should allow a value of zero. [PR #735](https://github.com/c-ares/c-ares/pull/735)

## c-ares version 1.27.0 - Feb 23 2024

This is a security, feature, and bugfix release.

Security:

* Moderate. CVE-2024-25629. Reading malformatted `/etc/resolv.conf`,
  `/etc/nsswitch.conf` or the `HOSTALIASES` file could result in a crash.
  [GHSA-mg26-v6qh-x48q](https://github.com/c-ares/c-ares/security/advisories/GHSA-mg26-v6qh-x48q)

Features:

* New function `ares_queue_active_queries()` to retrieve number of in-flight
  queries. [PR #712](https://github.com/c-ares/c-ares/pull/712)
* New function `ares_queue_wait_empty()` to wait for the number of in-flight
  queries to reach zero. [PR #710](https://github.com/c-ares/c-ares/pull/710)
* New `ARES_FLAG_NO_DEFLT_SVR` for `ares_init_options()` to return a failure if
  no DNS servers can be found rather than attempting to use `127.0.0.1`. This
  also introduces a new ares status code of `ARES_ENOSERVER`. [PR #713](https://github.com/c-ares/c-ares/pull/713)

Changes:

* EDNS Packet size should be 1232 as per DNS Flag Day. [PR #705](https://github.com/c-ares/c-ares/pull/705)

Bugfixes:

* Windows DNS suffix search list memory leak. [PR #711](https://github.com/c-ares/c-ares/pull/711)
* Fix warning due to ignoring return code of `write()`. [PR #709](https://github.com/c-ares/c-ares/pull/709)
* CMake: don’t override target output locations if not top-level. [Issue #708](https://github.com/c-ares/c-ares/issues/708)
* Fix building c-ares without thread support. [PR #700](https://github.com/c-ares/c-ares/pull/700)

## c-ares version 1.26.0 - Jan 26 2024

This is a feature and bugfix release.

Features:

* Event Thread support. Integrators are no longer required to monitor the
  file descriptors registered by c-ares for events and call `ares_process()`
  when enabling the event thread feature via `ARES_OPT_EVENT_THREAD` passed
  to `ares_init_options()`. [PR #696](https://github.com/c-ares/c-ares/pull/696)
* Added flags to `are_dns_parse()` to force RAW packet parsing.
  [PR #693](https://github.com/c-ares/c-ares/pull/693)

Changes:

* Mark `ares_fds()` as deprecated.
  [PR #691](https://github.com/c-ares/c-ares/pull/691)

Bugfixes:

* `adig`: Differentiate between internal and server errors.
  [e10b16a](https://github.com/c-ares/c-ares/commit/e10b16a)
* Autotools allow make to override CFLAGS/CPPFLAGS/CXXFLAGS.
  [PR #695](https://github.com/c-ares/c-ares/pull/695)
* Autotools: fix building for 32bit windows due to stdcall symbol mangling.
  [PR #689](https://github.com/c-ares/c-ares/pull/689)
* RR Name should not be sanity checked against the Question.
  [PR #685](https://github.com/c-ares/c-ares/pull/685)

## c-ares version 1.25.0 - Jan 3 2024

Changes:

* AutoTools: rewrite build system to be lighter weight and fix issues in some semi-modern systems. It is likely this has broken building on some less common and legacy OSs, please report issues. [PR #674](https://github.com/c-ares/c-ares/pull/674)
* Rewrite ares\_strsplit() as a wrapper for ares\_\_buf\_split() for memory safety reasons. [88c444d](https://github.com/c-ares/c-ares/commit/88c444d)
* The ahost utility now uses ares\_getaddrinfo() and returns both IPv4 and IPv6 addresses by default. [PR #669](https://github.com/c-ares/c-ares/pull/669)
* OpenBSD: Add SOCK\_DNS flag when creating socket. [PR #659](https://github.com/c-ares/c-ares/pull/659)

Bugfixes:

* Tests: Live reverse lookups for Google’s public DNS servers no longer return results, replace with CloudFlare pubic DNS servers. [1231aa7](https://github.com/c-ares/c-ares/commit/1231aa7)
* MacOS legacy SDKs require sys/socket.h before net/if.h [PR #673](https://github.com/c-ares/c-ares/pull/673)
* Connection failures should increment the server failure count first or a retry might be enqueued to the same server. [05181a6](https://github.com/c-ares/c-ares/commit/05181a6)
* On systems that don’t implement the ability to enumerate network interfaces the stubs used the wrong prototype. [eebfe0c](https://github.com/c-ares/c-ares/commit/eebfe0c)
* Fix minor warnings and documentation typos. [PR #666](https://github.com/c-ares/c-ares/pull/666)
* Fix support for older GoogleTest versions. [d186f11](https://github.com/c-ares/c-ares/commit/d186f11)
* getrandom() may require sys/random.h on some systems. [Issue #665](https://github.com/c-ares/c-ares/issues/665)
* Fix building tests with symbol hiding enabled. [Issue #664](https://github.com/c-ares/c-ares/issues/664)

## c-ares version 1.24.0 - Dec 17 2023

Features:

* [Add support for IPv6 link-local DNS servers. Nameserver formats can nowaccept the %iface suffix, and a new ares\_get\_servers\_csv() function was added to return servers that can contain the link-local interface name.](https://github.com/c-ares/c-ares/pull/646)

Changes:

* [Unbundle GoogleTest for test cases. Package maintainers will now need to require GoogleTest (GMock) as a build dependency if building tests. New GoogleTest versions require C++14 or later.](https://github.com/c-ares/c-ares/pull/655)
* [Replace nameserver parsing code to use new memory-safe functions.](https://github.com/c-ares/c-ares/pull/643)
* [Replace the sortlist parser with new memory-safe functions.](https://github.com/c-ares/c-ares/pull/653)
* Various warning fixes and dead code removal.

Bugfixes:

* [Old Linux versions require POSIX\_C\_SOURCE or \_GNU\_SOURCE to compile with thread safety support.](https://github.com/c-ares/c-ares/issues/644)
* [A non-responsive DNS server that caused timeouts wouldn’t increment the failure count, this would lead to other servers not being tried. Regression introduced in 1.22.0.](https://github.com/c-ares/c-ares/pull/650)
* [Some projects that depend on c-ares expect invalid parameter option values passed into ares\_init\_options() to simply be ignored. This behavior has been restored.](https://github.com/c-ares/c-ares/commit/c982bf4)
* [On linux getrandom() can fail if the kernel doesn’t support the syscall, fall back to another random source.](https://github.com/c-ares/c-ares/pull/661)
* [ares\_cancel() when performing ares\_gethostbyname() or ares\_getaddrinfo() with AF\_UNSPEC, if called after one address class was returned but before the other address class, it would return ARES\_SUCCESS rather than ARES\_ECANCELLED.](https://github.com/c-ares/c-ares/pull/663)

## c-ares version 1.23.0 - Nov 30 2023

Features:

* [Introduce optional (but on by default) thread-safety for the c-ares library. This has no API nor ABI implications.](https://github.com/c-ares/c-ares/pull/636)
* [resolv.conf in modern systems uses attempts and timeouts options instead of the old retrans and retry options.](https://github.com/c-ares/c-ares/pull/632)
* [Query caching support based on TTL of responses. Can be enabled via ares\_init\_options() with ARES\_OPT\_QUERY\_CACHE.](https://github.com/c-ares/c-ares/pull/625)

Bugfixes:

* [ares\_init\_options() for ARES\_OPT\_UDP\_PORT and ARES\_OPT\_TCP\_PORT accept the port in host byte order, but it was reading it as network byte order. Regression introduced in 1.20.0.](https://github.com/c-ares/c-ares/commit/fb52c3f)
* [ares\_init\_options() for ARES\_FLAG\_NOSEARCH was not being honored for ares\_getaddrinfo() or ares\_gethostbyname(). Regression introduced in 1.16.0.](https://github.com/c-ares/c-ares/pull/638)
* [Autotools MacOS and iOS version check was failing](https://github.com/c-ares/c-ares/commit/f4d8c9a)
* [Environment variables passed to c-ares are meant to be an override for system configuration. Regression introduced in 1.22.0.](https://github.com/c-ares/c-ares/commit/b674abd)
* [Spelling fixes as detected by codespell.](https://github.com/c-ares/c-ares/pull/634)
* [The timeout returned by ares\_timeout() was truncated to milliseconds but validated to microseconds which could cause a user to attempt to process timeouts prior to the timeout actually expiring.](https://github.com/c-ares/c-ares/pull/633)
* [CMake was not honoring CXXFLAGS passed in via the environment which could cause compile and link errors with distribution hardening flags during packaging.](https://github.com/c-ares/c-ares/commit/33ee6c0)
* [Fix Windows UWP and Cygwin compilation.](https://github.com/c-ares/c-ares/pull/627)
* [ares\_set\_servers\_\*() for legacy reasons needs to accept an empty server listand zero out all servers. This results in an inoperable channel and thus is only used in simulation testing, but we don’t want to break users. Regression introduced in 1.21.0.](https://github.com/c-ares/c-ares/commit/320cefe)

## c-ares version 1.22.1 - Nov 19 2023

Bugfixes:

* [Fix /etc/hosts processing performance with all entries using same IPaddress. Large hosts files using the same IP address for all entries could use exponential time.](https://github.com/c-ares/c-ares/commit/a36317)
* [Fix typos in manpages](https://github.com/c-ares/c-ares/pull/619)
* [Fix OpenWatcom building](https://github.com/c-ares/c-ares/pull/623)

## c-ares version 1.22.0 - Nov 14 2023

Features:

* [ares\_reinit() is now implemented to re-read any system configuration and immediately apply to an existing ares channel](https://github.com/c-ares/c-ares/pull/614)
* [The adig command line program has been rewritten and its format now more closely matches that of BIND’s dig utility](https://github.com/c-ares/c-ares/pull/607)
* [The new DNS message parser and writer functions have now been made public](https://github.com/c-ares/c-ares/pull/604)
* [RFC9460 HTTPS and SVCB records are now supported](https://github.com/c-ares/c-ares/pull/603)
* [RFC6698 TLSA records are now supported](https://github.com/c-ares/c-ares/pull/600)
* [The server list is now internally dynamic and can be changed without impacting existing queries](https://github.com/c-ares/c-ares/pull/594)
* [Hosts file processing is now cached until the file is detected to be changed to speed up repetitive lookups of large hosts files](https://github.com/c-ares/c-ares/pull/591)

Changes:

* [Internally all DNS messages are now written using the new DNS writing functions](https://github.com/c-ares/c-ares/pull/598)
* [EDNS is now enabled by default](https://github.com/c-ares/c-ares/pull/596)
* [Internal cleanups in function prototypes](https://github.com/c-ares/c-ares/pull/595)

Bugfixes:

* [Randomize retry penalties to prevent thundering herd issues when dns servers throttle requests](https://github.com/c-ares/c-ares/pull/606)
* [Fix Windows build error for missing if\_indextoname()](https://github.com/c-ares/c-ares/pull/594)

## c-ares version 1.21.0 - Oct 27 2023

Changes:

* [Provide better man page cross-links.](https://github.com/c-ares/c-ares/pull/565)
* [Introduce ares\_status\_t as an enum rather than using #define list and integer data type for internal functions.](https://github.com/c-ares/c-ares/pull/567)
* [Introduce ares\_bool\_t datatype rather than using an integer with 0/1 so it is clear based on the function prototype what it returns.](https://github.com/c-ares/c-ares/pull/570)
* [Increase compiler warning levels by default.](https://github.com/c-ares/c-ares/pull/568)
* [Use size\_t and other more proper datatypes internally (rather than int).](https://github.com/c-ares/c-ares/pull/573)
* [Many developers have used different code styles over the years, standardize on one and use clang-format to enforce the style.](https://github.com/c-ares/c-ares/pull/579)
* [CMake can now control symbol visibility](https://github.com/c-ares/c-ares/pull/574)
* [Replace multiple DNS hand-made parsers with new memory-safe DNS message parser.](https://github.com/c-ares/c-ares/pull/581)

Bugfixes:

* [Tools: STAYOPEN flag could make tools not terminate.](https://github.com/c-ares/c-ares/pull/569)
* [Socket callbacks were passed SOCK\_STREAM instead of SOCK\_DGRAM on udp.](https://github.com/c-ares/c-ares/commit/a070d78)

## c-ares version 1.20.1 - Oct 8 2023

Bugfixes:

* [Resolve use-after-free issue when TCP connection is terminated before a response is returned](https://github.com/c-ares/c-ares/pull/562)
* Reduce number of queries for a load test case to prevent overloading some build systems
* [Fix fuzz test build target](https://github.com/c-ares/c-ares/pull/559)

## c-ares version 1.20.0 - Oct 7 2023

Changes:

* [Update from 1989 MIT license text to modern MIT license text](https://github.com/c-ares/c-ares/pull/556)
* [Remove acountry from built tools as nerd.dk is gone](https://github.com/c-ares/c-ares/pull/554)
* [Add new ARES\_OPT\_UDP\_MAX\_QUERIES configuration option to limit the number of queries that can be made from a single ephemeral port](https://github.com/c-ares/c-ares/pull/549)
* [Default per-query timeout has been reduced to 2s with a 3x retry count](https://github.com/c-ares/c-ares/pull/542)
* [Modernization: start implementing some common data structures that are easy to use and hard to misuse. This will make code refactoring easier and remove some varied implementations in use. This change also makes ares\_timeout() more efficient](https://github.com/c-ares/c-ares/pull/540)
* [Use SPDX identifiers and a REUSE CI job to verify](https://github.com/c-ares/c-ares/commit/c1b00c41)
* [rand: add support for getrandom()](https://github.com/c-ares/c-ares/pull/526)

Bug fixes:

* [TCP back to back queries were broken](https://github.com/c-ares/c-ares/pull/552)
* [Ensure queries for ares\_getaddrinfo() are not requeued during destruction](https://github.com/c-ares/c-ares/pull/553)
* [ares\_getaddrinfo() should not retry other address classes if one address class has already been returned](https://github.com/c-ares/c-ares/pull/551)
* [Avoid production ill-formed result when qualifying a name with the root domain](https://github.com/c-ares/c-ares/pull/546)
* [Fix missing prefix for CMake generated libcares.pc](https://github.com/c-ares/c-ares/pull/530)
* [DNS server ports will now be read from system configuration instead of defaulting to port 53](https://github.com/c-ares/c-ares/pull/534)
* [Remove some unreachable code](https://github.com/c-ares/c-ares/pull/527)
* [Replace usages of sprintf with snprintf](https://github.com/c-ares/c-ares/pull/525)
* [Fix Watcom instructions and update Windows URLs](https://github.com/c-ares/c-ares/pull/524)

## c-ares version 1.19.1 - May 22 2023

Security:

* [CVE-2023-32067](https://github.com/c-ares/c-ares/security/advisories/GHSA-9g78-jv2r-p7vc). High. 0-byte UDP payload causes Denial of Service
* [CVE-2023-31147](https://github.com/c-ares/c-ares/security/advisories/GHSA-8r8p-23f3-64c2) Moderate. Insufficient randomness in generation of DNS query IDs
* [CVE-2023-31130](https://github.com/c-ares/c-ares/security/advisories/GHSA-x6mf-cxr9-8q6v). Moderate. Buffer Underwrite in ares\_inet\_net\_pton()
* [CVE-2023-31124](https://github.com/c-ares/c-ares/security/advisories/GHSA-54xr-f67r-4pc4). Low. AutoTools does not set CARES\_RANDOM\_FILE during cross compilation

Bug fixes:

* [Fix uninitialized memory warning in test](https://github.com/c-ares/c-ares/pull/515)
* [Turn off IPV6\_V6ONLY on Windows to allow IPv4-mapped IPv6 addresses](https://github.com/c-ares/c-ares/pull/520)
* [ares\_getaddrinfo() should allow a port of 0](https://github.com/c-ares/c-ares/issues/517)
* [Fix memory leak in ares\_send() on error](https://github.com/c-ares/c-ares/pull/511)
* [Fix comment style in ares\_data.h](https://github.com/c-ares/c-ares/pull/513)
* [Remove unneeded ifdef for Windows](https://github.com/c-ares/c-ares/pull/512)
* [Fix typo in ares\_init\_options.3](https://github.com/c-ares/c-ares/pull/510)
* [Re-add support for Watcom compiler](https://github.com/c-ares/c-ares/pull/509)
* [Sync ax\_pthread.m4 with upstream](https://github.com/c-ares/c-ares/pull/507)
* [Windows: Invalid stack variable used out of scope for HOSTS path](https://github.com/c-ares/c-ares/pull/502)
* [Sync ax\_cxx\_compile\_stdcxx\_11.m4 with upstream to fix uclibc support](https://github.com/c-ares/c-ares/pull/505)

## c-ares version 1.19.0 - Jan 28 2023

Security:

* [Low. Stack overflow in ares\_set\_sortlist() which is used during c-ares initialization and typically provided by an administrator and not an end user.](https://github.com/c-ares/c-ares/pull/497)

Changes:

* [Windows: Drop support for XP and derivatives which greatly cleans up initialization code.](https://github.com/c-ares/c-ares/pull/445)
* [Add ARES\_OPT\_HOSTS\_FILE similar to ARES\_OPT\_RESOLVCONF for specifying a custom hosts file location.](https://github.com/c-ares/c-ares/pull/465)
* [Add vcpkg installation instructions](https://github.com/c-ares/c-ares/pull/478)

Bug fixes:

* [Fix cross-compilation from Windows to Linux due to CPACK logic.](https://github.com/c-ares/c-ares/pull/436)
* [Fix memory leak in reading /etc/hosts when using localhost fallback.](https://github.com/c-ares/c-ares/issues/439)
* [Fix chain building c-ares when libresolv is already included by another project](https://github.com/c-ares/c-ares/pull/451)
* File lookup should not immediately abort as there may be other tries due to search criteria.
* [Asterisks should be allowed in host validation as CNAMEs may reference wildcard domains](https://github.com/c-ares/c-ares/issues/457)
* [AutoTools build system referenced bad STDC\_HEADERS macro](https://github.com/c-ares/c-ares/pull/459)
* Even if one address class returns a failure for ares\_getaddrinfo() we should still return the results we have
* [CMake Windows: DLLs did not include resource file to include versions](https://github.com/c-ares/c-ares/issues/460)
* [CMake: Guard target creation in exported config](https://github.com/c-ares/c-ares/pull/464)
* [Fix ares\_getaddrinfo() numerical address resolution with AF\_UNSPEC](https://github.com/c-ares/c-ares/pull/469)
* [Apple: fix libresolv configured query times.](https://github.com/c-ares/c-ares/pull/467)
* [Fix tools and help information](https://github.com/c-ares/c-ares/pull/479)
* [Various documentation fixes and cleanups](https://github.com/c-ares/c-ares/pull/490)
* [Add include guards to ares\_data.h](https://github.com/c-ares/c-ares/pull/491)
* [c-ares could try to exceed maximum number of iovec entries supported by system](https://github.com/c-ares/c-ares/pull/489)
* [CMake package config generation allow for absolute install paths](https://github.com/c-ares/c-ares/pull/486)
* [Intel compiler fixes](https://github.com/c-ares/c-ares/pull/485)
* [ares\_strsplit bugs](https://github.com/c-ares/c-ares/pull/492)
* [The RFC6761 6.3 states localhost subdomains must be offline too.](https://github.com/c-ares/c-ares/issues/477)

## c-ares version 1.18.1 - Oct 27 2021

Bug fixes:

* ares\_getaddrinfo() would return ai\_addrlen of 16 for ipv6 adddresses rather than the sizeof(struct sockaddr\_in6)

## c-ares version 1.18.0 - Oct 25 2021

Changes:

* [Add support for URI(Uniform Resource Identifier) records via ares\_parse\_uri\_reply()](https://github.com/c-ares/c-ares/pull/411)
* [Provide ares\_nameser.h as a public interface as needed by NodeJS](https://github.com/c-ares/c-ares/pull/417)
* [Update URLs from c-ares.haxx.se to c-ares.org](https://github.com/c-ares/c-ares/issues/423)
* [During a domain search, treat ARES\_ENODATA as ARES\_NXDOMAIN so that the search process will continue to the next domain in the search.](https://github.com/c-ares/c-ares/issues/426)
* [Turn ares\_gethostbyname() into a wrapper for ares\_getaddrinfo() as they followed very similar code paths and ares\_gethostbyaddr() has some more desirable features such as priority sorting and parallel queries for AF\_UNSPEC.](https://github.com/c-ares/c-ares/pull/428)
* [ares\_getaddrinfo() now contains a name element in the address info structure as the last element. This is not an API or ABI break due to the structure always being internally allocated and it being the last element.](https://github.com/c-ares/c-ares/pull/428)
* [ares\_parse\_a\_reply() and ares\_parse\_aaaa\_reply() were nearly identical, those now use the same helper functions for parsing rather than having their own code.](https://github.com/c-ares/c-ares/pull/428)
* [RFC6761 Section 6.3 says “localhost” lookups need to be special cased to return loopback addresses, and not forward queries to recursive dns servers. On Windows this now returns all loopback addresses, on other systems it returns 127.0.0.1 or ::1 always, and will never forward a request for “localhost” to outside DNS servers.](https://github.com/c-ares/c-ares/pull/430)
* [Haiku: port](https://github.com/c-ares/c-ares/pull/431)

Bug fixes:

* [add build to .gitignore](https://github.com/c-ares/c-ares/pull/410)
* [z/OS minor update, add missing semicolon in ares\_init.c](https://github.com/c-ares/c-ares/pull/414)
* [Fix building when latest ax\_code\_coverage.m4 is imported](https://github.com/c-ares/c-ares/pull/418)
* Work around autotools ‘error: too many loops’ and other newer autotools import related bugs.
* [MinGW cross builds need advapi32 link as lower case](https://github.com/c-ares/c-ares/pull/420)
* [Cygwin build fix due to containing both socket.h and winsock2.h](https://github.com/c-ares/c-ares/pull/422)
* [ares\_expand\_name should allow underscores (\_) as SRV records legitimately use them](https://github.com/c-ares/c-ares/issues/424)
* [Allow ‘/’ as a valid character for a returned name for CNAME in-addr.arpa delegation](https://github.com/c-ares/c-ares/issues/427)
* [ares\_getaddrinfo() was not honoring HOSTALIASES](https://github.com/c-ares/c-ares/pull/428)
* [ares\_getaddrinfo() had some test cases disabled due to a bug in the test framework itself which has now been resolved](https://github.com/c-ares/c-ares/pull/428)

## c-ares version 1.17.2 - Aug 10 2021

Security:

* [NodeJS passes NULL for addr and 0 for addrlen to ares\_parse\_ptr\_reply() on systems where malloc(0) returns NULL. This would cause a crash.](https://github.com/c-ares/c-ares/issues/392)
* [When building c-ares with CMake, the RANDOM\_FILE would not be set and therefore downgrade to the less secure random number generator](https://github.com/c-ares/c-ares/pull/397)
* [If ares\_getaddrinfo() was terminated by an ares\_destroy(), it would cause a crash](https://github.com/c-ares/c-ares/commit/df94703)
* [Crash in sortaddrinfo() if the list size equals 0 due to an unexpected DNS response](https://github.com/c-ares/c-ares/pull/400)
* [Expand number of escaped characters in DNS replies as per RFC1035 5.1 to prevent spoofing](https://github.com/c-ares/c-ares/commit/362f91d) [follow-up](https://github.com/c-ares/c-ares/commit/44c009b)
* [Perform validation on hostnames to prevent possible XSS due to applications not performing valiation themselves](https://github.com/c-ares/c-ares/commit/c9b6c60)

Changes:

* [Use non-blocking /dev/urandom for random data to prevent early startup performance issues](https://github.com/c-ares/c-ares/pull/391)
* [z/OS port](https://github.com/c-ares/c-ares/pull/390)
* [ares\_malloc(0) is now defined behavior (returns NULL) rather than system-specific to catch edge cases](https://github.com/c-ares/c-ares/commit/485fb66)

Bug fixes:

* [Fuzz testing files were not distributed with official archives](https://github.com/c-ares/c-ares/issues/379)
* [Building tests should not force building of static libraries except on Windows](https://github.com/c-ares/c-ares/issues/380)
* [Windows builds of the tools would fail if built as static due to a missing CARES\_STATICLIB definition](https://github.com/c-ares/c-ares/issues/384)
* [Relative headers must use double quotes to prevent pulling in a system library](https://github.com/c-ares/c-ares/pull/386)
* [Fix OpenBSD building by implementing portability updates for including arpa/nameser.h](https://github.com/c-ares/c-ares/issues/388)
* [Fix building out-of-tree for autotools](https://github.com/c-ares/c-ares/pull/394)
* [Make install on MacOS/iOS with CMake was missing the bundle destination so libraries weren’t actually installed](https://github.com/c-ares/c-ares/pull/395)
* [Fix retrieving DNS server configuration on MacOS and iOS if the configuration did not include search domains](https://github.com/c-ares/c-ares/pull/401)
* [ares\_parse\_a\_reply and ares\_parse\_aaa\_reply were erroneously using strdup() instead of ares\_strdup()](https://github.com/c-ares/c-ares/pull/408)

## c-ares version 1.17.1 - Nov 19 2020

Fixes packaging issues in 1.17.0.

## c-ares version 1.17.0 - Nov 16 2020

Security:

* [avoid read-heap-buffer-overflow in ares\_parse\_soa\_reply found during fuzzing](https://github.com/c-ares/c-ares/issues/333)
* [Avoid theoretical buffer overflow in RC4 loop comparison](https://github.com/c-ares/c-ares/pull/336)
* [Empty hquery->name could lead to invalid memory access](https://github.com/c-ares/c-ares/pull/367)
* [ares\_parse\_{a,aaaa}\_reply() could return a larger \*naddrttls than was passed in](https://github.com/c-ares/c-ares/issues/371)

Changes:

* [Update help information for adig, acountry, and ahost](https://github.com/c-ares/c-ares/pull/334)
* [Test Suite now uses dynamic system-assigned ports rather than hardcoded ports to prevent failures in containers](https://github.com/c-ares/c-ares/pull/346)
* [Detect remote DNS server does not support EDNS using rules from RFC 6891](https://github.com/c-ares/c-ares/pull/244)
* [Source tree has been reorganized to use a more modern layout](https://github.com/c-ares/c-ares/pull/349)
* [Allow parsing of CAA Resource Record](https://github.com/c-ares/c-ares/pull/360)

Bug fixes:

* [readaddrinfo bad sizeof()](https://github.com/c-ares/c-ares/pull/331)
* [Test cases should honor HAVE\_WRITEV flag, not depend on WIN32](https://github.com/c-ares/c-ares/pull/344)
* [FQDN with trailing period should be queried first](https://github.com/c-ares/c-ares/pull/345)
* [ares\_getaddrinfo() was returning members of the struct as garbage values if unset, and was not honoring ai\_socktype and ai\_protocol hints.](https://github.com/c-ares/c-ares/issues/317)
* [ares\_gethostbyname() with AF\_UNSPEC and an ip address would fail](https://github.com/c-ares/c-ares/pull/204)
* [Properly document ares\_set\_local\_ip4() uses host byte order](https://github.com/c-ares/c-ares/pull/368)

## c-ares version 1.16.1 - May 11 2020

Security:

* Prevent possible use-after-free and double-free in ares\_getaddrinfo() if ares\_destroy() is called prior to ares\_getaddrinfo() completing. Reported by Jann Horn at Google Project Zero.

Changes:

* Allow TXT records on CHAOS qclass. Used for retriving things like version.bind, version.server, authoris.bind, hostname.bind, and id.server. [3]

Bug fixes:

* Fix Windows Unicode incompatibilities with ares\_getaddrinfo() [1]
* Silence false cast-align compiler warnings due to valid casts of struct sockaddr to struct sockaddr\_in and struct sockaddr\_in6.
* MacOS should use libresolv for retrieving DNS servers, like iOS
* CMake build system should populate the INCLUDE\_DIRECTORIES property of installed targets [2]
* Correct macros in use for the ares\_getaddrinfo.3 man page

## c-ares version 1.16.0 - March 13 2020

Changes:

* Introduction of ares\_getaddrinfo() API which provides similar output (including proper sorting as per RFC 6724) to the system native API, but utilizes different data structures in order to provide additional information such as TTLs and all aliases. Please reference the respective man pages for usage details.
* Parse SOA records from ns\_t\_any response
* CMake: Provide c-ares version in package export file
* CMake: Add CPACK functionality for DEB and RPM
* CMake: Generate PDB files during build
* CMake: Support manpage installation

Bug fixes:

* Fix bad expectation in IPv6 localhost test.
* AutoTools: use XC\_CHECK\_BUILD\_FLAGS instead of XC\_CHECK\_USER\_FLAGS to prevent complaints about CPPFLAGS in CFLAGS.
* Fix .onion handling
* Command line usage was out of date for adig and ahost.
* Typos in manpages
* If ares\_getenv is defined, it must return a value on all platforms
* If /etc/resolv.conf has invalid lookup values, use the defaults.
* Tests: Separate live tests from SetServers\* tests as only live tests should require internet access.
* ares\_gethostbyname() should return ENODATA if no valid A or AAAA record is found, but a CNAME was found.
* CMake: Rework library function checking to prevent unintended linking with system libraries that aren’t needed.
* Due to use of inet\_addr() it was not possible to return 255.255.255.255 from ares\_gethostbyname().
* CMake: Fix building of tests on Windows

## c-ares version 1.15.0 - October 23 2018

Changes:

* [Add ares\_init\_options() configurability for path to resolv.conf file](https://github.com/c-ares/c-ares/issues/220)
* [Ability to exclude building of tools (adig, ahost, acountry) in CMake](https://github.com/c-ares/c-ares/issues/200)
* [Android: Support for domain search suffix](https://github.com/c-ares/c-ares/issues/207)
* [Report ARES\_ENOTFOUND for .onion domain names as per RFC7686](https://github.com/c-ares/c-ares/issues/196)

Bug fixes:

* [AIX build fix for trying to include both nameser\_compat.h and onameser\_compat.h](https://github.com/c-ares/c-ares/issues/224)
* [Windows: Improve DNS suffixes extracting from WinNT registry](https://github.com/c-ares/c-ares/pull/202)
* [Fix modern GCC warnings](https://github.com/c-ares/c-ares/pull/201)
* [Apply the IPv6 server blacklist to all nameserver sources, not just Windows](https://github.com/c-ares/c-ares/pull/193)
* [Fix warnings emitted by MSVC when using -W4](https://github.com/c-ares/c-ares/pull/192)
* [Prevent changing name servers while queries are outstanding](https://github.com/c-ares/c-ares/pull/191)
* [Harden and rationalize c-ares timeout computation](https://github.com/c-ares/c-ares/pull/187)
* [Distribute ares\_android.h](https://c-ares.org/mail/c-ares-archive-2018-04/0000.shtml)
* [ares\_set\_servers\_csv() on failure should not leave channel in a bad state](https://c-ares.org/mail/c-ares-archive-2018-03/0000.shtml)
* Add missing docs to distribution

## c-ares version 1.14.0 - February 16 2018

Changes:

* [android: Introduce new ares\_library\_init\_android() call for Oreo support](https://github.com/c-ares/c-ares/pull/148)

Bug fixes:

* [Fix patch for CVE-2017-1000381 to not be overly aggressive](https://github.com/c-ares/c-ares/commit/18ea99)
* [win32: Preserve DNS server order returned by Windows when sorting and exclude DNS servers in legacy subnets](https://github.com/c-ares/c-ares/issues/150)
* win32: Support most recent Visual Studio 2017
* [gethostbyaddr should fail with ECANCELLED not ENOTFOUND when ares\_cancel is called](https://github.com/c-ares/c-ares/pull/138)
* [win32: Exclude legacy ipv6 subnets](https://github.com/c-ares/c-ares/pull/144)
* [android: Applications compiled for Oreo can no longer use \_\_system\_property\_get and must use Java calls to retrieve DNS servers](https://github.com/c-ares/c-ares/pull/175%22%22)
* [win32: Force use of ANSI functions](https://github.com/c-ares/c-ares/pull/142)
* CMake minimum version is now 3.1
* [ares\_gethostbyname.3: fix callback status values](https://c-ares.org/mail/c-ares-archive-2011-06/0012.shtml)
* [docs: Document WSAStartup requirement](https://github.com/c-ares/c-ares/pull/180)
* [Fix a typo in init\_by\_resolv\_conf](https://github.com/c-ares/c-ares/pull/160)
* [Android JNI code leaks local references in some cases](https://github.com/c-ares/c-ares/pull/175)
* [Force using the ANSI versions of WinAPI functions](https://github.com/c-ares/c-ares/pull/142)

## c-ares version 1.13.0 - June 20 2017

Changes:

* cmake build system support added
* Add virtual function set for socket IO: ares\_set\_socket\_functions

Bug fixes:

* [CVE-2017-1000381: c-ares NAPTR parser out of bounds access](https://c-ares.org/adv_20170620.html)
* macos: do not set HAVE\_CLOCK\_GETTIME\_MONOTONIC
* test: check ares\_create\_query with too-long name
* dist: add ares\_library\_initialized.\* to the tarball
* fix build on OpenBSD
* dist: ship msvc\_ver.inc too
* test: Add gTest/gMock files to SOURCES
* test: add fuzz entrypoint for ares\_create\_query()
* configure: clock\_gettime workaround
* docs: convert INSTALL to MarkDown & tweak
* ares\_process: fix return type of socket\_create function (win32 warning)
* docs: fixed references to ares\_set\_local\_ip4 and ares\_set\_local\_ip6
* Windows DNS server sorting
* Use ares\_socklen\_t instead of socket\_t
* ares\_create\_query: use ares\_free not naked free
* msvc\_ver.inc support most recent Visual Studio 2017
* acountry: Convert char from ISO-8859-1 to UTF-8
* ares\_expand\_name: limit number of indirections
* configure: do not check for ar if specified manually
* Added support for Windows DNS Suffix Search List
* ares.h: support compiling with QNX

## c-ares version 1.12.0 - Sep 29 2016

Changes:

* api: add ARES\_OPT\_NOROTATE optmask value

Bug fixes:

* [CVE-2016-5180: ares\_create\_query single byte out of buffer write](https://c-ares.org/adv_20160929.html)
* configure: acknowledge –disable-tests [1]
* man pages: fix typos detected by Lintian
* test: add missing #includes for dns-proto.cc
* test: avoid in6addr\_\* constants
* test: Build with MinGW on AppVeyor
* Makefile.m32: add support for extra flags
* Makefile.m32: add support for CROSSPREFIX
* configure: check if tests can get built before enabled
* ares\_library\_cleanup: reset ares\_realloc too
* ahost.c: add cast to fix C++ compile
* test: Only pass unused args to GoogleTest
* build: commonize MSVC version detection
* msvc\_ver.inc: support Visual Studio 2015 Update 1, 2, 3
* test: for AF\_UNSPEC, return CNAME only for AAAA, but valid A record
* ares\_getnameinfo: explicitly clear struct servent before use
* test: Update fuzzing function prototype
* init: fix nsort initialization
* test: add fuzzing check script to tests
* web: http => https
* read\_tcp\_data: remove superfluous NULL check
* LICENSE.md: add a stand-alone license file
* SECURITY.md: suggested “security process” for the project
* ares\_init\_options: only propagate init failures from options [2]
* headers: remove checks for and defines of variable sizes
* test: fix gMock to work with gcc >= 6.x [3]

## c-ares version 1.11.0 - Feb 19 2016

Changes:

* Add a unit test suite
* Allow builds with code converage with –enable-code-coverage configure option
* Allow library-wide override of malloc/free
* Allow multiple -s options to the ahost command
* api: Expose the ares\_library\_initialized() function
* api: Add ares\_set\_sortlist(3) entrypoint
* api: Add entrypoints to allow use of per-server ports
* api: introduce `ares\_parse\_txt\_reply\_ext`
* api: Add ares\_set\_socket\_configure\_callback()

Bug fixes:

* timeadd: make static
* timeoffset: made static and private
* nowarn: use limits.h instead of configure for size of long
* single\_domain: Invalid memory access for empty string input
* ares\_build.h: fix building on 64-bit powerpc
* Allow specification of search domain in ahost
* Don’t override explicitly specified search domains
* ares\_parse\_soa\_reply: Do not leak rr\_name on allocation failure
* Update ahost man page to describe -s option
* host\_callback: Fall back to AF\_INET on searching with AF\_UNSPEC
* Add -t u option to ahost
* CONTRIBUTING: added
* ares\_set\_servers\_csv: fix NULL dereference
* Fix integer shift overflow if both tcp\_socket and udp\_socket are set
* fix acountry memory leak
* lookup\_service: prevent tmpbuf from overrunning
* ares\_getnameinfo.3: there is no ares\_getaddrinfo
* init\_by\_defaults: Continue loop if space for hostname not large enough
* Destroy options if ares\_save\_options fails
* ares\_\_read\_line: free buf on realloc failure
* added define for visual studio 2013
* windows: fix slow DNS lookup issue
* Use libresolv to initialize cares on iPhone targets
* buildconf: remove check for libtool, it only requires libtoolize
* init\_by\_resolv\_conf: Don’t exit loop early leaving uninitialized entries
* ahost: check the select() return code
* configure\_socket: explicitly ignore return code
* read\_tcp\_data: don’t try to use NULL pointer after malloc failure
* Distribute all man pages
* ares\_expand\_name: check for valid bits in label length
* ares\_\_read\_line: clear buf pointer on realloc failure
* process\_answer: fix things up correctly when removing EDNS option
* ares\_parse\_txt\_reply: propagate errors from per-substring loop
* ares\_gethostbyname: don’t leak valid-but-empty hostent
* ares\_init\_options: don’t lose init failure
* ares\_dup: clear new channel on failure
* config\_sortlist: free any existing sortlist on (re)alloc failure
* ares\_striendstr: fix so non-NULL return can happen
* bitncmp: update comment to match code behaviour
* ares\_set\_servers\_csv.3: make return type match code
* init\_by\_resolv\_conf: ignore `fopen` errors to use default values
* Use “resolve” as synonym of “dns” in nsswitch.conf
* ares\_win32\_init: make LoadLibrary work when using UNICODE too
* dist: Distribute README.md
* configure: build silently by default
* ares\_dup.3: remove mention of nonexistent function

## c-ares version 1.10.0 - May 12 2013

Changes:

* Added ares\_create\_query(), to be used instead of ares\_mkquery()
* ares\_inet\_ntop() and ares\_inet\_pton() are now recognized c-ares functions

Bug fixes:

* include the ares\_parse\_soa\_reply.\* files in the tarball
* read\_udp\_packets: bail out loop on bad sockets
* get\_DNS\_AdaptersAddresses: fix IPv6 parsing
* adig: perror() doesn’t work for socket errors on windows
* ares\_parse\_aaaa\_reply: fix memory leak
* setup\_once.h: HP-UX sys/socket.h issue workaround
* configure: several fixes
* config-dos.h: define strerror() to strerror\_s\_() for High-C
* config-dos.h: define HAVE\_CLOSE\_S for MSDOS/Watt-32
* ares\_build.h.dist: enhance non-configure GCC ABI detection logic
* ares.h: stricter CARES\_EXTERN linkage decorations logic
* ares\_cancel(): cancel requests safely
* protocol parsing: check input data stricter
* library init: be recursive, reference count inits/cleanups
* ares\_parse\_txt\_reply: return a ares\_txt\_reply node for each sub-string
* ares\_set\_servers\_csv: fixed IPv6 address parsing
* build: fix build on msvc11

## c-ares version 1.9.1 - Jun 18 2012

Fixed:

* include the ares\_parse\_soa\_reply.\* files in the tarball

## c-ares version 1.9.0 - Jun 17 2012

Changed:

* Added ares\_parse\_soa\_reply

Fixed:

* libcares.pc generation for static MingW\* cross builds
* ares\_dup: UDP and TCP port byte order in saved options

## c-ares version 1.8.0 - Apr 27 2012

Changed:

* Added ares\_parse\_naptr\_reply()

Fixed:

* handle CNAME-only in ares\_parse\_aaaa\_reply()
* support multiple DNS servers on Android
* check for \_\_ANDROID\_\_ in addition to ANDROID macro
* port numbers: convert them to network order
* get\_iphlpapi\_dns\_info: fix buffer overrun
* configure: make CURL\_CHECK\_DEF ignore leading whitespace
* segfault triggered in ares\_init\_options()
* ares\_getnameinfo’s memcpy did not copy enough bytes
* ares\_destroy: fix segfault in ares\_destroy\_options()
* CHANGES: generate from script
* configure: fix symbol hiding usability check

## c-ares version 1.7.5 - Aug 16 2011

Fixed:

* detection of semicolon comments in resolv.conf
* avoid using system’s inet\_net\_pton affected by the WLB-2008080064 advisory
* replacement ares\_inet\_net\_pton affected by the WLB-2008080064 advisory
* replacement ares\_inet\_ntop affected by potential out of bounds write
* added install target to Makefile.msvc
* only fall back to AF\_INET searches when looking for AF\_UNSPEC addresses
* fixed ares\_parse\_\*\_reply memory leaks
* Use correct sizeof in ares\_getnameinfo()
* IPv6-on-windows: find DNS servers correctly
* man pages: docs for the c-ares utility programs
* getservbyport replacement for Win CE
* config\_sortlist: (win32) missing else
* advance\_tcp\_send\_queue: avoid NULL ptr dereference
* configure: fix a bashism
* ares\_expand\_name: Fix encoded length for indirect root

## c-ares version 1.7.4 - Dec 9 2010

Changed:

* local-bind: Support binding to local interface/IPs, see ares\_set\_local\_ip4, ares\_set\_local\_ip6, ares\_set\_local\_dev

Fixed:

* memory leak in ares\_getnameinfo
* add missing break that caused get\_ares\_servers to fail
* ares\_parse\_a\_reply: fix CNAME response parsing
* init\_by\_options: don’t copy an empty sortlist
* Replaced uint32\_t with unsigned int to fix broken builds on a couple of platforms
* Fix lookup with HOSTALIASES set
* adig: fix NAPTR parsing
* compiler warning cleanups

## c-ares version 1.7.3 - Jun 11 2010

Fixed:

* builds on Android
* now includes all files necessary to build it (1.7.2 lacked a file)

## c-ares version 1.7.2 - Jun 10 2010

Changed:

* Added ares\_parse\_mx\_reply()

Fixed:

* ares\_init: Last, not first instance of domain or search should win
* improve alternative definition of bool
* fix VS2010 compiler warnings

## c-ares version 1.7.1 - Mar 23 2010

Changed:

* added IPv6 name servers support

Fixed:

* closing of sockets on Windows systems
* MSVC deprecated compiler options warnings
* ares\_process\_fd() didn’t check broken connections

## c-ares version 1.7.0 - Nov 30 2009

Changed:

* in6\_addr is not used in ares.h anymore, but a private ares\_in6\_addr is instead declared and used
* ares\_gethostbyname() now supports ‘AF\_UNSPEC’ as a family for resolving either AF\_INET6 or AF\_INET
* a build-time configured ares\_socklen\_t is now used instead of socklen\_t
* new ares\_library\_init() and ares\_library\_cleanup() functions
* new –enable-curldebug configure option
* ARES\_ECANCELLED is now sent as reason for ares\_cancel()
* added ares\_parse\_srv\_reply()
* added ares\_parse\_txt\_reply()
* added ares\_free\_data()
* new –enable-symbol-hiding configure option
* new Makefile.msvc for any MSVC compiler or MS Visual Studio version
* addrttl and addr6ttl structs renamed to ares\_addrttl and ares\_addr6ttl
* naming convention for libraries built with MSVC, see README.msvc

Fixed:

* ares\_parse\_\*\_reply() functions now return ARES\_EBADRESP instead of ARES\_EBADNAME if the name in the response failed to decode
* only expose/export symbols starting with ‘ares\_’
* fix \Device\TCP handle leaks triggered by buggy iphlpapi.dll
* init without internet gone no longer fails
* out of bounds memory overwrite triggered with malformed /etc/hosts file
* function prototypes in man pages out of sync with ares.h

## c-ares version 1.6.0 - Dec 9 2008

Changed:

* Added support for the glibc “rotate” resolv.conf option (or ARES\_OPT\_ROTATE)
* Added ares\_gethostbyname\_file()
* Added ares\_dup()
* Added ares\_set\_socket\_callback()

Fixed:

* improved configure detection of several functions
* improved source code portability
* adig supports a regular numerical dotted IP address for the -s option
* handling of EINPROGRESS for UDP connects
* ares\_parse\_ptr\_reply() would cause a buffer to shrink instead of expand if a reply contained 8 or more records
* buildconf works on OS X

## c-ares version 1.5.3 - Aug 29 2008

* fix adig sample application compilation failure on some systems
* fix pkg-config reporting of private libraries needed for static linking
* fallback to gettimeofday when monotonic clock is unavailable at run-time
* ares\_gethostbyname() fallback from AAA to A records with CNAME present
* allow –enable-largefile and –disable-largefile configurations
* configure process no longer needs nor checks size of curl\_off\_t
* library will now be built with \_REENTRANT symbol defined if needed
* Improved configure detection of number of arguments for getservbyport\_r
* Improved query-ID randomness
* Validate that DNS response address matches the request address
* fix acountry sample application compilation failure on some systems

## c-ares version 1.5.2 - May 29 2008

* code refactoring in ares\_gethostbyaddr
* improved checking of /dev/urandom in configure script
* new sample application, acountry
* improved MSVC6 dsp files
* adig sample application supports NAPTR records
* improved file seeding randomizer
* improved parsing of resolver configuration files
* updated configure script to remove autoconf 2.62 warnings
* use monotonic time source if available
* return all PTR-records when doing reverse lookups
* millisecond resolution support for the timeout option

## c-ares version 1.5.1 - Nov 21 2007

* added the ares\_llist.h header that was missing in the 1.5.0 release

## c-ares version 1.5.0 - Nov 21 2007

* SONAME bump to a few API and ABI breaking changes: - ares\_host\_callback() - ares\_nameinfo\_callback() - ares\_parse\_a\_reply() - ares\_parse\_aaaa\_reply()
* two valgrind reports were silenced
* ares\_save\_options() fix
* do DNS retries even on TCP connections
* correctly clear sockets from the fd\_set in several functions
* always wait on TCP events to detect connect closures
* new socket options: ARES\_OPT\_SOCK\_SNDBUF and ARES\_OPT\_SOCK\_RCVBUF
* made the query callbacks receive the number of timeouts that happened during the execution of a query
* don’t skip a server if it’s the only one
* segfault when generating a DNS “Transaction ID” under low memory conditions
* ares\_strerror() segfault fix
* added copyright texts to a few places that were missing them

## c-ares version 1.4.0 - Jun 8 2007

* fixed VS2005 compiler warnings due to time\_t being 64bit
* introduced cryptographically secure transaction IDs
* added ares\_save\_options()
* added ares\_destroy\_options()
* added ares\_process\_fd()
* fixed undefined return value in init\_by\_resolv\_conf() function for windows
* added ares\_parse\_ns\_reply()
* fix failure to get the search sequence of /etc/hosts and DNS from /etc/nsswitch.conf, /etc/host.conf or /etc/svc.conf when /etc/resolv.conf did not exist
* when domains were sert in the options struct, and there were domain/search entries in /etc/resolv.conf, the domains of the options struct would be overridden
* removed a couple of potential zero size memory allocations
* fixed the line endings in areslib.dsp

* [c-ares](https://github.com/c-ares)

© 2024 the c-ares project and its contributors



=== Content from access.redhat.com_a7716607_20250119_131917.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from github.com_55b8a03d_20250119_112703.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fc-ares%2Fc-ares%2Fcommit%2F1cc7e83c3bdfaafbc5919c95025592d8de3a170e)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fc-ares%2Fc-ares%2Fcommit%2F1cc7e83c3bdfaafbc5919c95025592d8de3a170e)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=c-ares%2Fc-ares)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[c-ares](/c-ares)
/
**[c-ares](/c-ares/c-ares)**
Public

* [Notifications](/login?return_to=%2Fc-ares%2Fc-ares) You must be signed in to change notification settings
* [Fork
  612](/login?return_to=%2Fc-ares%2Fc-ares)
* [Star
   1.9k](/login?return_to=%2Fc-ares%2Fc-ares)

* [Code](/c-ares/c-ares)
* [Issues
  19](/c-ares/c-ares/issues)
* [Pull requests
  2](/c-ares/c-ares/pulls)
* [Discussions](/c-ares/c-ares/discussions)
* [Actions](/c-ares/c-ares/actions)
* [Security](/c-ares/c-ares/security)
* [Insights](/c-ares/c-ares/pulse)

Additional navigation options

* [Code](/c-ares/c-ares)
* [Issues](/c-ares/c-ares/issues)
* [Pull requests](/c-ares/c-ares/pulls)
* [Discussions](/c-ares/c-ares/discussions)
* [Actions](/c-ares/c-ares/actions)
* [Security](/c-ares/c-ares/security)
* [Insights](/c-ares/c-ares/pulse)

## Commit

[Permalink](/c-ares/c-ares/commit/1cc7e83c3bdfaafbc5919c95025592d8de3a170e)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Prevent possible double-free in ares\_getaddrinfo() if ares\_destroy() …

[Browse files](/c-ares/c-ares/tree/1cc7e83c3bdfaafbc5919c95025592d8de3a170e)
Browse the repository at this point in the history

```
…is called

In the event that ares_destroy() is called prior to ares_getaddrinfo() completing,
it would result in an invalid read and double-free due to calling end_hquery() twice.

Reported By: Jann Horn @ Google Project Zero
```

* Loading branch information

[![@bradh352](https://avatars.githubusercontent.com/u/19732188?s=40&v=4)](/bradh352)

[bradh352](/c-ares/c-ares/commits?author=bradh352 "View all commits by bradh352")
committed
May 7, 2020

1 parent
[1c73ecc](/c-ares/c-ares/commit/1c73eccfdcb63ef2f246dfdb13af765f6c32bfba)

commit 1cc7e83

Showing
**1 changed file**
with
**1 addition**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[ares\_getaddrinfo.c](#diff-2d113baf561b7934a90a6d36cb8d1d3a0efed88c159f99ed4e63beef17d8ed15 "ares_getaddrinfo.c")

Show comments

[View file](/c-ares/c-ares/blob/1cc7e83c3bdfaafbc5919c95025592d8de3a170e/ares_getaddrinfo.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -548,6 +548,7 @@ static void host\_callback(void \*arg, int status, int timeouts, |
|  |  | else if (status == ARES\_EDESTRUCTION) |
|  |  | { |
|  |  | end\_hquery(hquery, status); |
|  |  | return; |
|  |  | } |
|  |  |  |
|  |  | if (!hquery->remaining) |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `1cc7e83`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fc-ares%2Fc-ares%2Fcommit%2F1cc7e83c3bdfaafbc5919c95025592d8de3a170e) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from lists.fedoraproject.org_4c0f8c4e_20250119_112704.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/4OOYAMJVLLCLXDTHW3V5UXNULZBBK4O6/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/4OOYAMJVLLCLXDTHW3V5UXNULZBBK4O6/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/4OOYAMJVLLCLXDTHW3V5UXNULZBBK4O6/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/4OOYAMJVLLCLXDTHW3V5UXNULZBBK4O6/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-4OOYAMJVLLCLXDTHW3V5UXNULZBBK4O6.mbox.gz?message=4OOYAMJVLLCLXDTHW3V5UXNULZBBK4O6 "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/4OOYAMJVLLCLXDTHW3V5UXNULZBBK4O6/#4OOYAMJVLLCLXDTHW3V5UXNULZBBK4O6)

# [SECURITY] Fedora 33 Update: nodejs-14.15.1-1.fc33

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

12 Dec
2020

12 Dec
'20

8:10 p.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2020-43d5a372fc
2020-12-13 02:07:36.430414
--------------------------------------------------------------------------------

Name : nodejs
Product : Fedora 33
Version : 14.15.1
Release : 1.fc33
URL : <http://nodejs.org/>
Summary : JavaScript runtime
Description :
Node.js is a platform built on Chrome's JavaScript runtime
for easily building fast, scalable network applications.
Node.js uses an event-driven, non-blocking I/O model that
makes it lightweight and efficient, perfect for data-intensive
real-time applications that run across distributed devices.

--------------------------------------------------------------------------------
Update Information:

Update to 14.15.1
--------------------------------------------------------------------------------
ChangeLog:

\* Wed Dec 2 2020 Stephen Gallagher sgallagh@redhat.com - 1:14.15.1-1
- Update to 14.15.1
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #1846887 - CVE-2020-10531 nodejs: ICU: Integer overflow in UnicodeString::doAppend() [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1846887>
[ 2 ] Bug #1846892 - CVE-2020-10531 nodejs:14/nodejs: ICU: Integer overflow in UnicodeString::doAppend() [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1846892>
[ 3 ] Bug #1847485 - CVE-2020-11080 nodejs:14/nghttp2: overly large SETTINGS frames can lead to DoS [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1847485>
[ 4 ] Bug #1856877 - CVE-2020-15095 nodejs: npm: Sensitive information exposure through logs [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1856877>
[ 5 ] Bug #1866840 - CVE-2020-14354 nodejs: c-ares: ares\_destroy() with pending ares\_getaddrinfo() leads to Use-After-Free [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1866840>
[ 6 ] Bug #1879333 - CVE-2020-8251 nodejs: Denial of Service by resource exhaustion CWE-400 due to unfinished HTTP/1.1 requests [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1879333>
[ 7 ] Bug #1879334 - CVE-2020-8251 nodejs:14/nodejs: Denial of Service by resource exhaustion CWE-400 due to unfinished HTTP/1.1 requests [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1879334>
[ 8 ] Bug #1879336 - CVE-2020-8252 nodejs: libuv: buffer overflow in realpath [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1879336>
[ 9 ] Bug #1879341 - CVE-2020-8201 nodejs: HTTP Request Smuggling due to CR-to-Hyphen conversion [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1879341>
[ 10 ] Bug #1879342 - CVE-2020-8252 nodejs:14/nodejs: libuv: buffer overflow in realpath [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1879342>
[ 11 ] Bug #1879346 - CVE-2020-8201 nodejs:14/nodejs: HTTP Request Smuggling due to CR-to-Hyphen conversion [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1879346>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2020-43d5a372fc' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/4OOYAMJVLLCLXDTHW3V5UXNULZBBK4O6/#4OOYAMJVLLCLXDTHW3V5UXNULZBBK4O6)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from bugzilla.redhat.com_4ca21216_20250119_131917.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1856877)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1856877)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1856877)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1856877

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1856877**](show_bug.cgi?id=1856877)
- [CVE-2020-15095](https://access.redhat.com/security/cve/CVE-2020-15095) nodejs: npm: Sensitive information exposure through logs [fedora-all]

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2020-15095 nodejs: npm: Sensitive information exposure through logs [fedo...

| | [Keywords](describekeywords.cgi): | Security  SecurityTracking | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Fedora | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Fedora | | [Component:](describecomponents.cgi?product=Fedora "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | nodejs | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 32 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | NodeJS Packaging SIG | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Fedora Extras Quality Assurance | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [CVE-2020-15095](show_bug.cgi?id=1856875 "CLOSED ERRATA - CVE-2020-15095 npm: sensitive information exposure through logs") | | TreeView+ | [depends on](buglist.cgi?bug_id=1856877&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1856877&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2020-07-14 15:49 UTC by Michael Kaplan | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2020-12-13 02:23 UTC ([History](show_activity.cgi?id=1856877)) | | [CC List:](page.cgi?id=fields.html#cclist) | 6 users (show)  mrunge nodejs-sig sgallagh tchollingsworth thrcka zsvetlik | | Fixed In Version: | nodejs-14.15.1-1.fc33 nodejs-14-3220201203015508.43bbeeef nodejs-14-3320201203015508.601d93de | | | Doc Type: | No Doc Update | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2020-12-13 02:08:34 UTC | | | Type: | --- | | | Embargoed: |  | | | [Dependent Products:](page.cgi?id=fields.html#dependent_products "Other Products that are affected by this bug.") | Ember-CSI Red Hat Enterprise Virtualization Manager Red Hat OpenStack Service Telemetry Framework | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1856877#c0)  Michael Kaplan    2020-07-14 15:49:09 UTC  ```  This is an automatically created tracking bug!  It was created to ensure that one or more security vulnerabilities are fixed in affected versions of fedora-all.  For comments that are specific to the vulnerability please use bugs filed against the "Security Response" product referenced in the "Blocks" field.  For more information see: <http://fedoraproject.org/wiki/Security/TrackingBugs>  When submitting as an update, use the fedpkg template provided in the next comment(s).  This will include the bug IDs of this tracking bug as well as the relevant top-level CVE bugs.  Please also mention the CVE IDs being fixed in the RPM changelog and the fedpkg commit message.  NOTE: this issue affects multiple supported versions of Fedora. While only one tracking bug has been filed, please correct all affected versions at the same time.  If you need to fix the versions independent of each other, you may clone this bug as appropriate.   ```  [Comment 1](show_bug.cgi?id=1856877#c1)  Michael Kaplan    2020-07-14 15:49:12 UTC  ``` Use the following template to for the 'fedpkg update' request to submit an update for this issue as it contains the top-level parent bug(s) as well as this tracking bug.  This will ensure that all associated bugs get updated when new packages are pushed to stable.  =====  # bugfix, security, enhancement, newpackage (required) type=security  # low, medium, high, urgent (required) severity=medium  # testing, stable request=testing  # Bug numbers: 1234,9876 bugs=1856875,1856877  # Description of your update notes=Security fix for [PUT CVEs HERE]  # Enable request automation based on the stable/unstable karma thresholds autokarma=True stable_karma=3 unstable_karma=-3  # Automatically close bugs when this marked as stable close_bugs=True  # Suggest that users restart after update suggest_reboot=False  ======  Additionally, you may opt to use the bodhi web interface to submit updates:  <https://bodhi.fedoraproject.org/updates/new>   ```  [Comment 2](show_bug.cgi?id=1856877#c2)  Fedora Update System    2020-12-03 16:22:32 UTC  ``` FEDORA-MODULAR-2020-70d98849b8 has been submitted as an update to Fedora 32 Modular. <https://bodhi.fedoraproject.org/updates/FEDORA-MODULAR-2020-70d98849b8>   ```  [Comment 3](show_bug.cgi?id=1856877#c3)  Fedora Update System    2020-12-03 16:23:00 UTC  ``` FEDORA-MODULAR-2020-5913a0852f has been submitted as an update to Fedora 33 Modular. <https://bodhi.fedoraproject.org/updates/FEDORA-MODULAR-2020-5913a0852f>   ```  [Comment 4](show_bug.cgi?id=1856877#c4)  Fedora Update System    2020-12-03 16:23:26 UTC  ``` FEDORA-2020-43d5a372fc has been submitted as an update to Fedora 33. <https://bodhi.fedoraproject.org/updates/FEDORA-2020-43d5a372fc>   ```  [Comment 5](show_bug.cgi?id=1856877#c5)  Fedora Update System    2020-12-05 01:58:26 UTC  ``` FEDORA-2020-43d5a372fc has been pushed to the Fedora 33 testing repository. Soon you'll be able to install the update with the following command: `sudo dnf upgrade --enablerepo=updates-testing --advisory=FEDORA-2020-43d5a372fc` You can provide feedback for this update here: <https://bodhi.fedoraproject.org/updates/FEDORA-2020-43d5a372fc>  See also [https://fedoraproject.org/wiki/QA:Updates_Testing](https://fedoraproject.org/wiki/QA%3AUpdates_Testing) for more information on how to test updates.   ```  [Comment 6](show_bug.cgi?id=1856877#c6)  Fedora Update System    2020-12-05 02:15:12 UTC  ``` FEDORA-MODULAR-2020-70d98849b8 has been pushed to the Fedora 32 Modular testing repository.  You can provide feedback for this update here: <https://bodhi.fedoraproject.org/updates/FEDORA-MODULAR-2020-70d98849b8>  See also [https://fedoraproject.org/wiki/QA:Updates_Testing](https://fedoraproject.org/wiki/QA%3AUpdates_Testing) for more information on how to test updates.   ```  [Comment 7](show_bug.cgi?id=1856877#c7)  Fedora Update System    2020-12-05 02:15:40 UTC  ``` FEDORA-MODULAR-2020-5913a0852f has been pushed to the Fedora 33 Modular testing repository.  You can provide feedback for this update here: <https://bodhi.fedoraproject.org/updates/FEDORA-MODULAR-2020-5913a0852f>  See also [https://fedoraproject.org/wiki/QA:Updates_Testing](https://fedoraproject.org/wiki/QA%3AUpdates_Testing) for more information on how to test updates.   ```  [Comment 8](show_bug.cgi?id=1856877#c8)  Fedora Update System    2020-12-13 02:08:34 UTC  ``` FEDORA-2020-43d5a372fc has been pushed to the Fedora 33 stable repository. If problem still persists, please make note of it in this bug report.   ```  [Comment 9](show_bug.cgi?id=1856877#c9)  Fedora Update System    2020-12-13 02:20:00 UTC  ``` FEDORA-MODULAR-2020-70d98849b8 has been pushed to the Fedora 32 Modular stable repository. If problem still persists, please make note of it in this bug report.   ```  [Comment 10](show_bug.cgi?id=1856877#c10)  Fedora Update System    2020-12-13 02:23:52 UTC  ``` FEDORA-MODULAR-2020-5913a0852f has been pushed to the Fedora 33 Modular stable repository. If problem still persists, please make note of it in this bug report.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1856877&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugzilla.redhat.com_b2a21267_20250119_131916.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1866840)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1866840)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1866840)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1866840

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1866840**](show_bug.cgi?id=1866840)
- [CVE-2020-14354](https://access.redhat.com/security/cve/CVE-2020-14354) nodejs: c-ares: ares\_destroy() with pending ares\_getaddrinfo() leads to Use-After-Free [fedora-all]

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2020-14354 nodejs: c-ares: ares\_destroy() with pending ares\_getaddrinfo()...

| | [Keywords](describekeywords.cgi): | Security  SecurityTracking | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Fedora | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Fedora | | [Component:](describecomponents.cgi?product=Fedora "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | nodejs | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 32 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | NodeJS Packaging SIG | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Fedora Extras Quality Assurance | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [CVE-2020-14354](show_bug.cgi?id=1866838 "CLOSED NOTABUG - CVE-2020-14354 c-ares: ares_destroy() with pending ares_getaddrinfo() leads to Use-After-Free") | | TreeView+ | [depends on](buglist.cgi?bug_id=1866840&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1866840&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2020-08-06 14:21 UTC by Michael Kaplan | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2020-12-13 02:23 UTC ([History](show_activity.cgi?id=1866840)) | | [CC List:](page.cgi?id=fields.html#cclist) | 6 users (show)  mrunge nodejs-sig sgallagh tchollingsworth thrcka zsvetlik | | Fixed In Version: | nodejs-14.15.1-1.fc33 nodejs-14-3220201203015508.43bbeeef nodejs-14-3320201203015508.601d93de | | | Doc Type: | No Doc Update | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2020-12-13 02:08:40 UTC | | | Type: | --- | | | Embargoed: |  | | | [Dependent Products:](page.cgi?id=fields.html#dependent_products "Other Products that are affected by this bug.") | Ember-CSI Red Hat Enterprise Virtualization Manager Red Hat OpenStack Service Telemetry Framework | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1866840#c0)  Michael Kaplan    2020-08-06 14:21:47 UTC  ```  This is an automatically created tracking bug!  It was created to ensure that one or more security vulnerabilities are fixed in affected versions of fedora-all.  For comments that are specific to the vulnerability please use bugs filed against the "Security Response" product referenced in the "Blocks" field.  For more information see: <http://fedoraproject.org/wiki/Security/TrackingBugs>  When submitting as an update, use the fedpkg template provided in the next comment(s).  This will include the bug IDs of this tracking bug as well as the relevant top-level CVE bugs.  Please also mention the CVE IDs being fixed in the RPM changelog and the fedpkg commit message.  NOTE: this issue affects multiple supported versions of Fedora. While only one tracking bug has been filed, please correct all affected versions at the same time.  If you need to fix the versions independent of each other, you may clone this bug as appropriate.   ```  [Comment 1](show_bug.cgi?id=1866840#c1)  Michael Kaplan    2020-08-06 14:21:50 UTC  ``` Use the following template to for the 'fedpkg update' request to submit an update for this issue as it contains the top-level parent bug(s) as well as this tracking bug.  This will ensure that all associated bugs get updated when new packages are pushed to stable.  =====  # bugfix, security, enhancement, newpackage (required) type=security  # low, medium, high, urgent (required) severity=medium  # testing, stable request=testing  # Bug numbers: 1234,9876 bugs=1866838,1866840  # Description of your update notes=Security fix for [PUT CVEs HERE]  # Enable request automation based on the stable/unstable karma thresholds autokarma=True stable_karma=3 unstable_karma=-3  # Automatically close bugs when this marked as stable close_bugs=True  # Suggest that users restart after update suggest_reboot=False  ======  Additionally, you may opt to use the bodhi web interface to submit updates:  <https://bodhi.fedoraproject.org/updates/new>   ```  [Comment 2](show_bug.cgi?id=1866840#c2)  Fedora Update System    2020-12-03 16:22:35 UTC  ``` FEDORA-MODULAR-2020-70d98849b8 has been submitted as an update to Fedora 32 Modular. <https://bodhi.fedoraproject.org/updates/FEDORA-MODULAR-2020-70d98849b8>   ```  [Comment 3](show_bug.cgi?id=1866840#c3)  Fedora Update System    2020-12-03 16:23:03 UTC  ``` FEDORA-MODULAR-2020-5913a0852f has been submitted as an update to Fedora 33 Modular. <https://bodhi.fedoraproject.org/updates/FEDORA-MODULAR-2020-5913a0852f>   ```  [Comment 4](show_bug.cgi?id=1866840#c4)  Fedora Update System    2020-12-03 16:23:29 UTC  ``` FEDORA-2020-43d5a372fc has been submitted as an update to Fedora 33. <https://bodhi.fedoraproject.org/updates/FEDORA-2020-43d5a372fc>   ```  [Comment 5](show_bug.cgi?id=1866840#c5)  Fedora Update System    2020-12-05 01:58:28 UTC  ``` FEDORA-2020-43d5a372fc has been pushed to the Fedora 33 testing repository. Soon you'll be able to install the update with the following command: `sudo dnf upgrade --enablerepo=updates-testing --advisory=FEDORA-2020-43d5a372fc` You can provide feedback for this update here: <https://bodhi.fedoraproject.org/updates/FEDORA-2020-43d5a372fc>  See also [https://fedoraproject.org/wiki/QA:Updates_Testing](https://fedoraproject.org/wiki/QA%3AUpdates_Testing) for more information on how to test updates.   ```  [Comment 6](show_bug.cgi?id=1866840#c6)  Fedora Update System    2020-12-05 02:15:14 UTC  ``` FEDORA-MODULAR-2020-70d98849b8 has been pushed to the Fedora 32 Modular testing repository.  You can provide feedback for this update here: <https://bodhi.fedoraproject.org/updates/FEDORA-MODULAR-2020-70d98849b8>  See also [https://fedoraproject.org/wiki/QA:Updates_Testing](https://fedoraproject.org/wiki/QA%3AUpdates_Testing) for more information on how to test updates.   ```  [Comment 7](show_bug.cgi?id=1866840#c7)  Fedora Update System    2020-12-05 02:15:42 UTC  ``` FEDORA-MODULAR-2020-5913a0852f has been pushed to the Fedora 33 Modular testing repository.  You can provide feedback for this update here: <https://bodhi.fedoraproject.org/updates/FEDORA-MODULAR-2020-5913a0852f>  See also [https://fedoraproject.org/wiki/QA:Updates_Testing](https://fedoraproject.org/wiki/QA%3AUpdates_Testing) for more information on how to test updates.   ```  [Comment 8](show_bug.cgi?id=1866840#c8)  Fedora Update System    2020-12-13 02:08:40 UTC  ``` FEDORA-2020-43d5a372fc has been pushed to the Fedora 33 stable repository. If problem still persists, please make note of it in this bug report.   ```  [Comment 9](show_bug.cgi?id=1866840#c9)  Fedora Update System    2020-12-13 02:20:02 UTC  ``` FEDORA-MODULAR-2020-70d98849b8 has been pushed to the Fedora 32 Modular stable repository. If problem still persists, please make note of it in this bug report.   ```  [Comment 10](show_bug.cgi?id=1866840#c10)  Fedora Update System    2020-12-13 02:23:54 UTC  ``` FEDORA-MODULAR-2020-5913a0852f has been pushed to the Fedora 33 Modular stable repository. If problem still persists, please make note of it in this bug report.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1866840&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugzilla.redhat.com_935ae04e_20250119_112702.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1866838)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1866838)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1866838)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1866838

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1866838**](show_bug.cgi?id=1866838)
(CVE-2020-14354)
- [CVE-2020-14354](https://access.redhat.com/security/cve/CVE-2020-14354) c-ares: ares\_destroy() with pending ares\_getaddrinfo() leads to Use-After-Free

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2020-14354 c-ares: ares\_destroy() with pending ares\_getaddrinfo() leads t...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED NOTABUG | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2020-14354 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1866840](show_bug.cgi?id=1866840 "CLOSED ERRATA - CVE-2020-14354 nodejs: c-ares: ares_destroy() with pending ares_getaddrinfo() leads to Use-After-Free [fedora-all]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1866841](show_bug.cgi?id=1866841) [1939846](show_bug.cgi?id=1939846) | | TreeView+ | [depends on](buglist.cgi?bug_id=1866838&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1866838&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2020-08-06 14:21 UTC by Michael Kaplan | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-03-17 08:41 UTC ([History](show_activity.cgi?id=1866838)) | | [CC List:](page.cgi?id=fields.html#cclist) | 14 users (show)  atikhono hhorak jhrozek jorton mrunge nagy.martin nodejs-maint nodejs-sig sgallagh tcallawa tchollingsworth thrcka valtri zsvetlik | | Fixed In Version: | c-ares 1.16.1 | | | Doc Type: | If docs needed, set a value | | | Doc Text: | A possible use-after-free and double-free in c-ares lib version 1.16.0 if ares\_destroy() is called prior to ares\_getaddrinfo() completing. This flaw possibly allows an attacker to crash the service that uses c-ares lib. The highest threat from this vulnerability is to this service availability. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2020-08-12 12:43:59 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1866838#c0)  Michael Kaplan    2020-08-06 14:21:37 UTC  ``` The following code was introduced in c-ares commit dbd4c441 (first released in 1.16.0, which was published on 2020-03-13), as part of the new ares_getaddrinfo() feature:   ========================================================= static void end_hquery(struct host_query *hquery, int status) { [...]  hquery->callback(hquery->arg, status, hquery->timeouts, hquery->ai);  ares_free(hquery->name);  ares_free(hquery); }  static void host_callback(void *arg, int status, int timeouts,              unsigned char *abuf, int alen) {  struct host_query *hquery = (struct host_query*)arg;  int addinfostatus = ARES_SUCCESS;  [...]   if (status == ARES_SUCCESS)   [...]  else if (status == ARES_EDESTRUCTION)   {    end_hquery(hquery, status);   }   if (!hquery->remaining)   {    if (addinfostatus != ARES_SUCCESS)     [...]    else if (hquery->ai->nodes)     {      /* at least one query ended with ARES_SUCCESS */      end_hquery(hquery, ARES_SUCCESS);     }    else if (status == ARES_ENOTFOUND)     [...]    else     {      end_hquery(hquery, status);     }   }   /* at this point we keep on waiting for the next query to finish */ } =========================================================   In the ARES_EDESTRUCTION case, host_callback() ends up calling end_hquery() twice (unless it crashes before the second call), and the second call will, among other things, call a function pointer from freed memory and free the memory a second time.  Here's a reproducer:  ========================================================= #include <ares.h> #include <err.h> #include <stdio.h> #include <stdlib.h>  static void gai_cb(void *arg, int status, int timeouts,          struct ares_addrinfo *result) {  printf(\"gai_cb(): %s\ \", ares_strerror(status)); }  int main(void) {  if (ares_library_init(ARES_LIB_INIT_ALL))   errx(1, \"ares_library_init\");  ares_channel chan;  if (ares_init(&chan))   errx(1, \"ares_init\");  ares_getaddrinfo(chan, \"blah\", NULL, NULL, gai_cb, NULL);  ares_destroy(chan);  return 0; } =========================================================   Output (from a test against c-ares from Debian testing):  ========================================================= user@vm:~/test/cares-gai-destroy$ valgrind ./cares-gai-destroy-uaf  ==5248== Memcheck, a memory error detector ==5248== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al. ==5248== Using Valgrind-3.14.0 and LibVEX; rerun with -h for copyright info ==5248== Command: ./cares-gai-destroy-uaf ==5248==  gai_cb(): Channel is being destroyed ==5248== Invalid read of size 4 ==5248==  at 0x485F56A: host_callback (ares_getaddrinfo.c:553) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== Address 0x4a4ae00 is 80 bytes inside a block of size 88 free'd ==5248==  at 0x48369AB: free (vg_replace_malloc.c:530) ==5248==  by 0x485F126: end_hquery (ares_getaddrinfo.c:429) ==5248==  by 0x485F569: host_callback (ares_getaddrinfo.c:550) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== Block was alloc'd at ==5248==  at 0x483577F: malloc (vg_replace_malloc.c:299) ==5248==  by 0x485F951: ares_getaddrinfo (ares_getaddrinfo.c:650) ==5248==  by 0x109247: main (cares-gai-destroy-uaf.c:17) ==5248==  ==5248== Invalid read of size 4 ==5248==  at 0x485F4CD: host_callback (ares_getaddrinfo.c:542) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== Address 0x4a4ae00 is 80 bytes inside a block of size 88 free'd ==5248==  at 0x48369AB: free (vg_replace_malloc.c:530) ==5248==  by 0x485F126: end_hquery (ares_getaddrinfo.c:429) ==5248==  by 0x485F569: host_callback (ares_getaddrinfo.c:550) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== Block was alloc'd at ==5248==  at 0x483577F: malloc (vg_replace_malloc.c:299) ==5248==  by 0x485F951: ares_getaddrinfo (ares_getaddrinfo.c:650) ==5248==  by 0x109247: main (cares-gai-destroy-uaf.c:17) ==5248==  ==5248== Invalid read of size 4 ==5248==  at 0x485F4D0: host_callback (ares_getaddrinfo.c:541) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== Address 0x4a4adec is 60 bytes inside a block of size 88 free'd ==5248==  at 0x48369AB: free (vg_replace_malloc.c:530) ==5248==  by 0x485F126: end_hquery (ares_getaddrinfo.c:429) ==5248==  by 0x485F569: host_callback (ares_getaddrinfo.c:550) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== Block was alloc'd at ==5248==  at 0x483577F: malloc (vg_replace_malloc.c:299) ==5248==  by 0x485F951: ares_getaddrinfo (ares_getaddrinfo.c:650) ==5248==  by 0x109247: main (cares-gai-destroy-uaf.c:17) ==5248==  ==5248== Invalid write of size 4 ==5248==  at 0x485F4D6: host_callback (ares_getaddrinfo.c:542) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== Address 0x4a4ae00 is 80 bytes inside a block of size 88 free'd ==5248==  at 0x48369AB: free (vg_replace_malloc.c:530) ==5248==  by 0x485F126: end_hquery (ares_getaddrinfo.c:429) ==5248==  by 0x485F569: host_callback (ares_getaddrinfo.c:550) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== Block was alloc'd at ==5248==  at 0x483577F: malloc (vg_replace_malloc.c:299) ==5248==  by 0x485F951: ares_getaddrinfo (ares_getaddrinfo.c:650) ==5248==  by 0x109247: main (cares-gai-destroy-uaf.c:17) ==5248==  ==5248== Invalid read of size 8 ==5248==  at 0x485F0BD: end_hquery (ares_getaddrinfo.c:394) ==5248==  by 0x485F569: host_callback (ares_getaddrinfo.c:550) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== Address 0x4a4adf8 is 72 bytes inside a block of size 88 free'd ==5248==  at 0x48369AB: free (vg_replace_malloc.c:530) ==5248==  by 0x485F126: end_hquery (ares_getaddrinfo.c:429) ==5248==  by 0x485F569: host_callback (ares_getaddrinfo.c:550) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== Block was alloc'd at ==5248==  at 0x483577F: malloc (vg_replace_malloc.c:299) ==5248==  by 0x485F951: ares_getaddrinfo (ares_getaddrinfo.c:650) ==5248==  by 0x109247: main (cares-gai-destroy-uaf.c:17) ==5248==  ==5248== Invalid read of size 8 ==5248==  at 0x485F05D: ares_freeaddrinfo (ares_freeaddrinfo.c:54) ==5248==  by 0x485F167: end_hquery (ares_getaddrinfo.c:423) ==5248==  by 0x485F569: host_callback (ares_getaddrinfo.c:550) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== Address 0x0 is not stack'd, malloc'd or (recently) free'd ==5248==  ==5248==  ==5248== Process terminating with default action of signal 11 (SIGSEGV): dumping core ==5248== Access not within mapped region at address 0x0 ==5248==  at 0x485F05D: ares_freeaddrinfo (ares_freeaddrinfo.c:54) ==5248==  by 0x485F167: end_hquery (ares_getaddrinfo.c:423) ==5248==  by 0x485F569: host_callback (ares_getaddrinfo.c:550) ==5248==  by 0x486869F: qcallback (ares_query.c:183) ==5248==  by 0x485E8D0: ares_destroy (ares_destroy.c:58) ==5248==  by 0x109253: main (cares-gai-destroy-uaf.c:18) ==5248== If you believe this happened as a result of a stack ==5248== overflow in your program's main thread (unlikely but ==5248== possible), you can try to increase the size of the ==5248== main thread stack using the --main-stacksize= flag. ==5248== The main thread stack size used in this run was 8388608. ==5248==  ==5248== HEAP SUMMARY: ==5248==   in use at exit: 74,643 bytes in 7 blocks ==5248==  total heap usage: 29 allocs, 22 frees, 95,011 bytes allocated ==5248==  ==5248== LEAK SUMMARY: ==5248==  definitely lost: 0 bytes in 0 blocks ==5248==  indirectly lost: 0 bytes in 0 blocks ==5248==   possibly lost: 0 bytes in 0 blocks ==5248==  still reachable: 74,643 bytes in 7 blocks ==5248==     suppressed: 0 bytes in 0 blocks ==5248== Rerun with --leak-check=full to see details of leaked memory ==5248==  ==5248== For counts of detected and suppressed errors, rerun with: -v ==5248== ERROR SUMMARY: 7 errors from 6 contexts (suppressed: 0 from 0) Segmentation fault =========================================================  References:  <https://packetstormsecurity.com/files/158755/GS20200804145053.txt>   ```  [Comment 1](show_bug.cgi?id=1866838#c1)  Michael Kaplan    2020-08-06 14:22:00 UTC  ``` Created nodejs tracking bugs for this issue:  Affects: fedora-all [[bug 1866840](show_bug.cgi?id=1866840 "CLOSED ERRATA - CVE-2020-14354 nodejs: c-ares: ares_destroy() with pending ares_getaddrinfo() leads to Use-After-Free [fedora-all]")]   ```  [Comment 2](show_bug.cgi?id=1866838#c2)  Alex    2020-08-12 10:25:14 UTC  ``` Acknowledgments:  Name: Jann Horn (Google Project Zero)   ```  [Comment 5](show_bug.cgi?id=1866838#c5)  Alex    2020-08-12 10:56:06 UTC  ``` Mitigation:  If calling wait_ares(channel) before ares_destroy() in the service that uses c-ares, then this should prevent this bug.   ```  [Comment 7](show_bug.cgi?id=1866838#c7)  Alex    2020-08-12 10:59:23 UTC  ``` The Red Hat Enterprise Linux not affected (all versions), because the latest version of c-ares being used is 1.13.0. And the bug introduced in 1.16.0 (and then fixed in 1.16.1).   ```  [Comment 10](show_bug.cgi?id=1866838#c10)  Alex    2020-08-12 11:06:19 UTC  ``` External References:  <https://packetstormsecurity.com/files/158755/GS20200804145053.txt> <https://c-ares.haxx.se/changelog.html> <https://github.com/c-ares/c-ares/commit/1cc7e83c3bdfaafbc5919c95025592d8de3a170e>   ```  [Comment 11](show_bug.cgi?id=1866838#c11)  Alex    2020-08-12 11:14:15 UTC  ``` Statement:  This flaw is rated as a having Moderate impact, because it can happen only during close of the service (or when handling ARES_ECONNREFUSED). The Red Hat Enterprise Linux not affected (all versions), because the version of c-ares being used is 1.13.0, and the bug introduced in 1.16.0 (and then fixed in 1.16.1).   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1866838&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)


