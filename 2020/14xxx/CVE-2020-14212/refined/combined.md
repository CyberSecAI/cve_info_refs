=== Content from bugs.gentoo.org_78cdedf1_20250119_130522.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 71801
Add debugging and profiling support to clanlib
Last modified: 2004-11-19 15:32:46 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=71801&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=71801&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 71801**](show_bug.cgi?id=71801)
- Add debugging and profiling support to clanlib

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
Add debugging and profiling support to clanlib

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED INVALID | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Linux | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Linux "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | [OLD] Library ([show other bugs](buglist.cgi?component=%5BOLD%5D%20Library&product=Gentoo%20Linux&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | High enhancement | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Linux bug wranglers | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2004-11-19 15:23 UTC by Luke Worth | | --- | --- | | Modified: | 2004-11-19 15:32 UTC ([History](show_activity.cgi?id=71801)) | | CC List: | 0 users | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=71801&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=71801&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  Luke Worth    2004-11-19 15:23:50 UTC  ``` I am developing some software with clanlib, and would like it to support the use flags 'debug' and 'gprof'. -fomit-frame-pointer needs to be filtered out of CFLAGS for gprof to work.  thanks  Reproducible: Always Steps to Reproduce: 1. 2. 3. ```  [Comment 1](#c1)  Olivier Crete (RETIRED)   gentoo-dev  2004-11-19 15:32:46 UTC  ``` Can't you just do CFLAGS="-g -fno-omit-pointer" emerge clanlib ? If not.. please re-open the bug..  ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=71801)
* - [XML](show_bug.cgi?ctype=xml&id=71801)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=71801)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=71801&product=Gentoo%20Linux)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=71801&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=71801&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from security.gentoo.org_7ebe70d7_20250119_110726.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# FFmpeg: Multiple vulnerabilities — GLSA **202007-58**

Multiple vulnerabilities have been found in FFmpeg, the worst of
which could result in the arbitrary execution of code.

### Affected packages

| Package | **media-video/ffmpeg** on all architectures |
| --- | --- |
| Affected versions | < **4.2.4** |
| Unaffected versions | >= **4.2.4** |

### Background

FFmpeg is a complete, cross-platform solution to record, convert and
stream audio and video.

### Description

Multiple vulnerabilities have been discovered in FFmpeg. Please review
the CVE identifiers referenced below for details.

### Impact

Please review the referenced CVE identifiers for details.

### Workaround

There is no known workaround at this time.

### Resolution

All FFmpeg users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=media-video/ffmpeg-4.2.4"

```
### References

* [CVE-2019-13312](https://nvd.nist.gov/vuln/detail/CVE-2019-13312)
* [CVE-2019-15942](https://nvd.nist.gov/vuln/detail/CVE-2019-15942)
* [CVE-2020-12284](https://nvd.nist.gov/vuln/detail/CVE-2020-12284)
* [CVE-2020-13904](https://nvd.nist.gov/vuln/detail/CVE-2020-13904)
* [CVE-2020-14212](https://nvd.nist.gov/vuln/detail/CVE-2020-14212)

**Release date**

July 28, 2020

**Latest revision**

July 28, 2020: 1

**Severity**

normal

**Exploitable**

remote

**Bugzilla entries**

* [718012](https://bugs.gentoo.org/show_bug.cgi?id=718012)
* [719940](https://bugs.gentoo.org/show_bug.cgi?id=719940)
* [727450](https://bugs.gentoo.org/show_bug.cgi?id=727450)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from patchwork.ffmpeg.org_5c0d5aaf_20250119_110725.html ===

Toggle navigation

[Patchwork](/)
FFmpeg

* [Patches](/project/ffmpeg/list/)
* [Bundles](/project/ffmpeg/bundles/)
* [About this project](/project/ffmpeg/)

* [Login](/user/login/)
* [Register](/register/)
* [Mail settings](/mail/)

Show patches with:
Series = **[FFmpeg-devel,1/2] dnn\_backend\_native.c: refine code for fail case**

   |
State = **Action Required**

   |
Archived = **No**

   |   0
patches

Series

Submitter

State
anyAction RequiredNewAcceptedRejectedRFCNot ApplicableChanges RequestedSupersededDeferredWithdrawn

Search

Archived
 No Yes Both

Delegate
------Nobodymichaelstate\_update\_botlqbp0Timothy\_GuMattOliverbtbnjamrialsebechlebskycehoyoskurosurcombsqyot27llogancusuxyinshiyouandriyandrmstorsjo

Apply

| [Patch](/project/ffmpeg/list/?series=1463&order=name) | Series | A/L/R/T | S/W/F | [Date](/project/ffmpeg/list/?series=1463&order=date) | [Submitter](/project/ffmpeg/list/?series=1463&order=submitter) | [Delegate](/project/ffmpeg/list/?series=1463&order=delegate) | [State](/project/ffmpeg/list/?series=1463&order=state) |
| --- | --- | --- | --- | --- | --- | --- | --- |
| No patches to display | | | | | | | |

[patchwork](http://jk.ozlabs.org/projects/patchwork/) patch tracking system |
version v3.2.1.post13+gitb22f2c5 |
[about patchwork](/about/)



=== Content from trac.ffmpeg.org_fcf13f57_20250119_110740.html ===


[![FFmpeg](/ffmpeg-logo.png)](https://ffmpeg.org)

Search:

* [Login](/login)
* [Preferences](/prefs)
* [Help/Guide](/wiki/TracGuide)
* [About Trac](/about)
* [Register](/register)
* [Forgot your password?](/reset_password)

* [Wiki](/wiki)
* [Timeline](/timeline)
* [View Tickets](/report)
* [Search](/search)
* [Tags](/tags)

## Context Navigation

* ![Up-vote](/chrome/vote/aupgray.png)+0![Down-vote](/chrome/vote/adowngray.png)
* ← [Previous Ticket](/ticket/8715 "Ticket #8715")
* [Next Ticket](/ticket/8717 "Ticket #8717") →

---

Opened [5 years ago](/timeline?from=2020-06-07T08%3A26%3A33Z&precision=second "See timeline at Jun 7, 2020, 8:26:33 AM")

Closed [5 years ago](/timeline?from=2020-06-21T20%3A51%3A17Z&precision=second "See timeline at Jun 21, 2020, 8:51:17 PM")

## [#8716](/ticket/8716) [closed](/query?status=closed) [defect](/query?status=!closed&type=defect) ([fixed](/query?resolution=fixed&status=closed))

# Heap buffer overflow in ff\_dnn\_load\_model\_native

| Reported by: | [Assaf Sion](/query?reporter=assafsion&status=!closed) | Owned by: | [Guo Yejun](/query?owner=guoyejun&status=!closed) |
| --- | --- | --- | --- |
| Priority: | [important](/query?priority=important&status=!closed) | Component: | [avfilter](/query?component=avfilter&status=!closed) |
| Version: | [git-master](/query?status=!closed&version=git-master) | Keywords: | [dnn](/query?keywords=~dnn&status=!closed) |
| Cc: | [assafsion@gmaiil.com](/query?cc=~assafsion%40gmaiil.com&status=!closed), [yejun.guo@intel.com](/query?cc=~yejun.guo%40intel.com&status=!closed) | Blocked By: |  |
| Blocking: |  | Reproduced by developer: | [yes](/query?reproduced=1&status=!closed) |
| Analyzed by developer: | [no](/query?analyzed=0&status=!closed) |  |  |

## Description

In dnn\_backend\_native.c the call to ff\_dnn\_load\_model\_native could cause a heap buffer overflow caused by a missing check of the variable operand\_index while accessing network->operands and setting the name. this could cause a read buffer overflow and may use as a primitive to leak addresses or sensitive memory.

I compiled ffmpeg on Ubuntu 18.04 with the following configuration:

configuration: --cc=clang --extra-cflags='-O0 -g3 -fsanitize=address -Wno-error -fPIC' --extra-ldflags='-O0 -g3 -fsanitize=address -Wno-error -fPIC' --enable-debug --disable-asm --disable-optimizations --disable-shared --enable-libopenjpeg --enable-gpl --enable-libass --enable-libfdk-aac --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree

the bug could be reproduced while running the following command line:

ffmpeg -v debug -i 10.jpg -vf format=rgb24,sr=dnn\_backend=native:model=crash\_dnn\_backend\_native\_1 derain.jpg

the output after running the command:

ffmpeg version N-97806-gf603d10b1e Copyright (c) 2000-2020 the FFmpeg developers

> built with clang version 6.0.0-1ubuntu2 (tags/RELEASE\_600/final)
>
> configuration: --cc=clang --extra-cflags='-O0 -g3 -fsanitize=address -Wno-error -fPIC' --extra-ldflags='-O0 -g3 -fsanitize=address -Wno-error -fPIC' --enable-debug --disable-asm --disable-optimizations --disable-shared --enable-libopenjpeg --enable-gpl --enable-libass --enable-libfdk-aac --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree
>
> libavutil 56. 45.100 / 56. 45.100
>
> libavcodec 58. 84.100 / 58. 84.100
>
> libavformat 58. 43.100 / 58. 43.100
>
> libavdevice 58. 9.103 / 58. 9.103
>
> libavfilter 7. 81.100 / 7. 81.100
>
> libswscale 5. 6.101 / 5. 6.101
>
> libswresample 3. 6.100 / 3. 6.100
>
> libpostproc 55. 6.100 / 55. 6.100

Splitting the commandline.

Reading option '-v' ... matched as option 'v' (set logging level) with argument 'debug'.

Reading option '-i' ... matched as input url with argument '10.jpg'.

Reading option '-vf' ... matched as option 'vf' (set video filters) with argument 'format=rgb24,sr=dnn\_backend=native:model=crash\_dnn\_backend\_native\_1'.

Reading option 'derain.jpg' ... matched as output url.

Finished splitting the commandline.

Parsing a group of options: global .

Applying option v (set logging level) with argument debug.

Successfully parsed a group of options.

Parsing a group of options: input url 10.jpg.

Successfully parsed a group of options.

Opening an input file: 10.jpg.

[NULL @ 0x61b000000080] Opening '10.jpg' for reading

[file @ 0x60c000000040] Setting default whitelist 'file,crypto,data'

[image2 @ 0x61b000000080] Format image2 probed with size=2048 and score=50

[image2 @ 0x61b000000080] Before avformat\_find\_stream\_info() pos: 0 bytes read:18522 seeks:0 nb\_streams:1

[mjpeg @ 0x619000000580] marker=d8 avail\_size\_in\_buf=18520

[mjpeg @ 0x619000000580] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000580] marker=e0 avail\_size\_in\_buf=18518

[mjpeg @ 0x619000000580] marker parser used 16 bytes (128 bits)

[mjpeg @ 0x619000000580] marker=e1 avail\_size\_in\_buf=18500

[mjpeg @ 0x619000000580] marker parser used 12833 bytes (102664 bits)

[mjpeg @ 0x619000000580] marker=db avail\_size\_in\_buf=5664

[mjpeg @ 0x619000000580] index=0

[mjpeg @ 0x619000000580] qscale[0]: 2

[mjpeg @ 0x619000000580] marker parser used 67 bytes (536 bits)

[mjpeg @ 0x619000000580] marker=db avail\_size\_in\_buf=5595

[mjpeg @ 0x619000000580] index=1

[mjpeg @ 0x619000000580] qscale[1]: 8

[mjpeg @ 0x619000000580] marker parser used 67 bytes (536 bits)

[mjpeg @ 0x619000000580] marker=c0 avail\_size\_in\_buf=5526

[mjpeg @ 0x619000000580] Changing bps from 0 to 8

[mjpeg @ 0x619000000580] sof0: picture: 432x173

[mjpeg @ 0x619000000580] component 0 1:1 id: 0 quant:0

[mjpeg @ 0x619000000580] component 1 1:1 id: 1 quant:1

[mjpeg @ 0x619000000580] component 2 1:1 id: 2 quant:1

[mjpeg @ 0x619000000580] pix fmt id 11111100

[mjpeg @ 0x619000000580] Format yuvj444p chosen by get\_format().

[mjpeg @ 0x619000000580] marker parser used 17 bytes (136 bits)

[mjpeg @ 0x619000000580] marker=c4 avail\_size\_in\_buf=5507

[mjpeg @ 0x619000000580] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000580] marker=c4 avail\_size\_in\_buf=5478

[mjpeg @ 0x619000000580] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000580] marker=c4 avail\_size\_in\_buf=5420

[mjpeg @ 0x619000000580] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000580] marker=c4 avail\_size\_in\_buf=5393

[mjpeg @ 0x619000000580] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000580] escaping removed 16 bytes

[mjpeg @ 0x619000000580] marker=da avail\_size\_in\_buf=5360

[mjpeg @ 0x619000000580] marker parser used 5344 bytes (42752 bits)

[mjpeg @ 0x619000000580] marker=d9 avail\_size\_in\_buf=0

[mjpeg @ 0x619000000580] decode frame unused 0 bytes

[image2 @ 0x61b000000080] After avformat\_find\_stream\_info() pos: 18522 bytes read:18522 seeks:0 frames:1

Input #0, image2, from '10.jpg':

> Duration: 00:00:00.04, start: 0.000000, bitrate: 3704 kb/s
>
>
> > Stream #0:0, 1, 1/25: Video: mjpeg (Baseline), 1 reference frame, yuvj444p(pc, bt470bg/unknown/unknown, center), 432x173 [SAR 96:96 DAR 432:173], 0/1, 25 tbr, 25 tbn, 25 tbc

Successfully opened the file.

Parsing a group of options: output url derain.jpg.

Applying option vf (set video filters) with argument format=rgb24,sr=dnn\_backend=native:model=crash\_dnn\_backend\_native\_1.

Successfully parsed a group of options.

Opening an output file: derain.jpg.

Successfully opened the file.

Stream mapping:

> Stream #0:0 -> #0:0 (mjpeg (native) -> mjpeg (native))

Press [q] to stop, [?](/ticket/8716 "#8716: defect: Heap buffer overflow in ff_dnn_load_model_native (closed: fixed)") for help

cur\_dts is invalid st:0 (0) [init:0 i\_done:0 finish:0] (this is harmless if it occurs once at the start per stream)

[mjpeg @ 0x619000000a80] marker=d8 avail\_size\_in\_buf=18520

[mjpeg @ 0x619000000a80] marker parser used 0 bytes (0 bits)

[mjpeg @ 0x619000000a80] marker=e0 avail\_size\_in\_buf=18518

[mjpeg @ 0x619000000a80] marker parser used 16 bytes (128 bits)

[mjpeg @ 0x619000000a80] marker=e1 avail\_size\_in\_buf=18500

[mjpeg @ 0x619000000a80] marker parser used 12833 bytes (102664 bits)

[mjpeg @ 0x619000000a80] marker=db avail\_size\_in\_buf=5664

[mjpeg @ 0x619000000a80] index=0

[mjpeg @ 0x619000000a80] qscale[0]: 2

[mjpeg @ 0x619000000a80] marker parser used 67 bytes (536 bits)

[mjpeg @ 0x619000000a80] marker=db avail\_size\_in\_buf=5595

[mjpeg @ 0x619000000a80] index=1

[mjpeg @ 0x619000000a80] qscale[1]: 8

[mjpeg @ 0x619000000a80] marker parser used 67 bytes (536 bits)

[mjpeg @ 0x619000000a80] marker=c0 avail\_size\_in\_buf=5526

[mjpeg @ 0x619000000a80] sof0: picture: 432x173

[mjpeg @ 0x619000000a80] component 0 1:1 id: 0 quant:0

[mjpeg @ 0x619000000a80] component 1 1:1 id: 1 quant:1

[mjpeg @ 0x619000000a80] component 2 1:1 id: 2 quant:1

[mjpeg @ 0x619000000a80] pix fmt id 11111100

[mjpeg @ 0x619000000a80] Format yuvj444p chosen by get\_format().

[mjpeg @ 0x619000000a80] marker parser used 17 bytes (136 bits)

[mjpeg @ 0x619000000a80] marker=c4 avail\_size\_in\_buf=5507

[mjpeg @ 0x619000000a80] class=0 index=0 nb\_codes=8

[mjpeg @ 0x619000000a80] marker parser used 27 bytes (216 bits)

[mjpeg @ 0x619000000a80] marker=c4 avail\_size\_in\_buf=5478

[mjpeg @ 0x619000000a80] class=1 index=0 nb\_codes=226

[mjpeg @ 0x619000000a80] marker parser used 56 bytes (448 bits)

[mjpeg @ 0x619000000a80] marker=c4 avail\_size\_in\_buf=5420

[mjpeg @ 0x619000000a80] class=0 index=1 nb\_codes=6

[mjpeg @ 0x619000000a80] marker parser used 25 bytes (200 bits)

[mjpeg @ 0x619000000a80] marker=c4 avail\_size\_in\_buf=5393

[mjpeg @ 0x619000000a80] class=1 index=1 nb\_codes=82

[mjpeg @ 0x619000000a80] marker parser used 31 bytes (248 bits)

[mjpeg @ 0x619000000a80] escaping removed 16 bytes

[mjpeg @ 0x619000000a80] marker=da avail\_size\_in\_buf=5360

[mjpeg @ 0x619000000a80] component: 0

[mjpeg @ 0x619000000a80] component: 1

[mjpeg @ 0x619000000a80] component: 2

[mjpeg @ 0x619000000a80] marker parser used 5343 bytes (42742 bits)

[mjpeg @ 0x619000000a80] marker=d9 avail\_size\_in\_buf=0

[mjpeg @ 0x619000000a80] decode frame unused 0 bytes

detected 32 logical cores

[Parsed\_format\_0 @ 0x610000000040] Setting 'pix\_fmts' to value 'rgb24'

[Parsed\_sr\_1 @ 0x610000000140] Setting 'dnn\_backend' to value 'native'

[Parsed\_sr\_1 @ 0x610000000140] Setting 'model' to value 'crash\_dnn\_backend\_native\_1'

[file @ 0x60d000000040] Setting default whitelist 'file,crypto,data'

=================================================================

==95291==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x610000000a99 at pc 0x0000013b0b46 bp 0x7fffffff81e0 sp 0x7fffffff81d8

WRITE of size 1 at 0x610000000a99 thread T0

> #0 0x13b0b45 in avio\_get\_str /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavformat/aviobuf.c:866:22
>
> [#1](/ticket/1 "#1: task: Test (closed: invalid)") 0x130d50e in ff\_dnn\_load\_model\_native /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/dnn/dnn\_backend\_native.c:233:9
>
> [#2](/ticket/2 "#2: defect: Colour artefacts in wmv3 (closed: fixed)") 0xe5802e in init /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/vf\_sr.c:84:25
>
> [#3](/ticket/3 "#3: defect: Auto-detection of Sonic Foundry Soft Encode AC3 files with a 16-byte ... (closed: fixed)") 0x6c56ca in avfilter\_init\_dict /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/avfilter.c:912:15
>
> [#4](/ticket/4 "#4: defect: MP3 file with unsynchronised id3v2 tag is not read correctly (closed: invalid)") 0x6c6747 in avfilter\_init\_str /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/avfilter.c:1013:11
>
> [#5](/ticket/5 "#5: defect: jp2k muxed into mov by FFmpeg can't be played by QuickTime (reopened)") 0x74b4fe in create\_filter /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/graphparser.c:149:11
>
> [#6](/ticket/6 "#6: defect: Alsa output channel order is wrong (closed: fixed)") 0x747826 in parse\_filter /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/graphparser.c:192:11
>
> [#7](/ticket/7 "#7: defect: seeking back to beginning of file sometimes fails badly (closed: fixed)") 0x74685f in avfilter\_graph\_parse2 /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavfilter/graphparser.c:427:20
>
> [#8](/ticket/8 "#8: defect: Matroska muxers define unusable codec_tag properties (closed: fixed)") 0x5687d7 in configure\_filtergraph /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg\_filter.c:1061:16
>
> [#9](/ticket/9 "#9: defect: libswscale MMX2 giving videos a pink lined overlay (closed: needs_more_info)") 0x5d66a3 in ifilter\_send\_frame /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:2166:15
>
> [#10](/ticket/10 "#10: defect: rtsp method PLAY fails (status_code = 400) with some locales ... (closed: fixed)") 0x5d5669 in send\_frame\_to\_filters /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:2247:15
>
> [#11](/ticket/11 "#11: defect: Some .ape files play only silence in ffplay (closed: fixed)") 0x5d0f2b in decode\_video /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:2446:11
>
> [#12](/ticket/12 "#12: enhancement: expand nut file format to encode 'bits_per_coded_sample' (closed: wontfix)") 0x59ba41 in process\_input\_packet /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:2600:19
>
> [#13](/ticket/13 "#13: defect: demuxing ogg track produces invalid ogg on 3rd pass (closed: fixed)") 0x5be936 in process\_input /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:4491:5
>
> [#14](/ticket/14 "#14: defect: Crash when reading mkv file (closed: fixed)") 0x597af6 in transcode\_step /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:4611:11
>
> [#15](/ticket/15 "#15: defect: Initial I-frame in ogg/theora file is not decoded (closed: fixed)") 0x590da5 in transcode /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:4665:15
>
> [#16](/ticket/16 "#16: defect: \"non-monotonically increasing dts\" because of corrupt rtptime (closed: fixed)") 0x58efda in main /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/fftools/ffmpeg.c:4866:9
>
> [#17](/ticket/17 "#17: defect: FFPlay set different pts from ffmpeg for AVFilterBufferRef (closed: invalid)") 0x7ffff2cb9b96 in libc\_start\_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310
>
> [#18](/ticket/18 "#18: enhancement: support lvf h264 file (closed: fixed)") 0x423839 in \_start (/home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/ffmpeg\_g+0x423839)

Address 0x610000000a99 is a wild pointer.

SUMMARY: AddressSanitizer: heap-buffer-overflow /home/cyber/VulnResearch/ffmpeg/clean/13\_5\_ffmpeg/FFmpeg/libavformat/aviobuf.c:866:22 in avio\_get\_str

Shadow bytes around the buggy address:

> 0x0c207fff8100: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
>
> 0x0c207fff8110: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
>
> 0x0c207fff8120: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
>
> 0x0c207fff8130: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
>
> 0x0c207fff8140: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa

=>0x0c207fff8150: fa fa fa[fa]fa fa fa fa fa fa fa fa fa fa fa fa

> 0x0c207fff8160: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
>
> 0x0c207fff8170: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
>
> 0x0c207fff8180: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
>
> 0x0c207fff8190: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
>
> 0x0c207fff81a0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa

Shadow byte legend (one shadow byte represents 8 application bytes):

> Addressable: 00
>
> Partially addressable: 01 02 03 04 05 06 07
>
> Heap left redzone: fa
>
> Freed heap region: fd
>
> Stack left redzone: f1
>
> Stack mid redzone: f2
>
> Stack right redzone: f3
>
> Stack after return: f5
>
> Stack use after scope: f8
>
> Global redzone: f9
>
> Global init order: f6
>
> Poisoned by user: f7
>
> Container overflow: fc
>
> Array cookie: ac
>
> Intra object redzone: bb
>
> ASan internal: fe
>
> Left alloca redzone: ca
>
> Right alloca redzone: cb

==95291==ABORTING

[1] + Done "/usr/bin/gdb" --interpreter=mi --tty=${DbgTerm} 0<"/tmp/Microsoft-MIEngine-In-tnrcrzm8.01d" 1>"/tmp/Microsoft-MIEngine-Out-7wia81vb.b6z"

### Attachments (2)

[10.jpg](/attachment/ticket/8716/10.jpg "View attachment")[​](/raw-attachment/ticket/8716/10.jpg "Download")
(18.1 KB
) - added by Assaf Sion [5 years ago](/timeline?from=2020-06-07T08%3A28%3A05Z&precision=second "See timeline at Jun 7, 2020, 8:28:05 AM").
[crash\_dnn\_backend\_native\_1](/attachment/ticket/8716/crash_dnn_backend_native_1 "View attachment")[​](/raw-attachment/ticket/8716/crash_dnn_backend_native_1 "Download")
(111 bytes
) - added by Assaf Sion [5 years ago](/timeline?from=2020-06-07T08%3A28%3A29Z&precision=second "See timeline at Jun 7, 2020, 8:28:29 AM").

Download all attachments as:
[.zip](/zip-attachment/ticket/8716/)

Oldest first

Newest first

Threaded

Show comments

Show property changes

### Change History (10)

### by Assaf Sion, [5 years ago](/timeline?from=2020-06-07T08%3A28%3A05Z&precision=second "See timeline at Jun 7, 2020, 8:28:05 AM")

| Attachment: | [*10.jpg*](/attachment/ticket/8716/10.jpg)[​](/raw-attachment/ticket/8716/10.jpg "Download") added |
| --- | --- |

### by Assaf Sion, [5 years ago](/timeline?from=2020-06-07T08%3A28%3A29Z&precision=second "See timeline at Jun 7, 2020, 8:28:29 AM")

| Attachment: | [*crash\_dnn\_backend\_native\_1*](/attachment/ticket/8716/crash_dnn_backend_native_1)[​](/raw-attachment/ticket/8716/crash_dnn_backend_native_1 "Download") added |
| --- | --- |

### [comment:1](#comment:1) by Guo Yejun, [5 years ago](/timeline?from=2020-06-08T05%3A57%3A39Z&precision=second "See timeline at Jun 8, 2020, 5:57:39 AM")

| Cc: | yejun.guo@intel.com added |
| --- | --- |
| Owner: | set to Guo Yejun |
| Status: | new → open |

1. could you please re-generate the native model with script tools/python/convert.py and try it again?

I checked file crash\_dnn\_backend\_native\_1 and there might be a version mismatch. (There is version checking now in ffmpeg c/python code.)

2. if the issue still exists with step 1, could you share the .pb file?

thanks.

### [comment:2](#comment:2) by Assaf Sion, [5 years ago](/timeline?from=2020-06-08T10%3A21%3A26Z&precision=second "See timeline at Jun 8, 2020, 10:21:26 AM")

The bug won`t trigger without the native model that I crafted my self.

The whole reason for this is bug is when using a crafted model file, you could trigger the bug.

### [comment:3](#comment:3) by Guo Yejun, [5 years ago](/timeline?from=2020-06-08T15%3A27%3A13Z&precision=second "See timeline at Jun 8, 2020, 3:27:13 PM")

sorry, i don't quite understand you meaning.

could you share how you generate file crash\_dnn\_backend\_native\_1, thanks.

### [comment:4](#comment:4) by Assaf Sion, [5 years ago](/timeline?from=2020-06-08T15%3A34%3A25Z&precision=second "See timeline at Jun 8, 2020, 3:34:25 PM")

I manually crafted it.

I am a security researcher and I noticed that this part of the code could be exploited,

Therefor, I crafted crash\_dnn\_backend\_native\_1 myself.

### [comment:5](#comment:5) by Carl Eugen Hoyos, [5 years ago](/timeline?from=2020-06-08T19%3A39%3A55Z&precision=second "See timeline at Jun 8, 2020, 7:39:55 PM")

| Keywords: | dnn added |
| --- | --- |
| Priority: | critical → important |
| Reproduced by developer: | set |

Also reproducible with valgrind.

### [comment:6](#comment:6) by Guo Yejun, [5 years ago](/timeline?from=2020-06-11T05%3A17%3A45Z&precision=second "See timeline at Jun 11, 2020, 5:17:45 AM")

thanks, the patch for the fix is sent out, see [​https://patchwork.ffmpeg.org/project/ffmpeg/list/?series=1463](https://patchwork.ffmpeg.org/project/ffmpeg/list/?series=1463)

### [comment:7](#comment:7) by Assaf Sion, [5 years ago](/timeline?from=2020-06-21T12%3A29%3A13Z&precision=second "See timeline at Jun 21, 2020, 12:29:13 PM")

This bug was assigned with CVE-2020-14212.

### [comment:8](#comment:8) by Carl Eugen Hoyos, [5 years ago](/timeline?from=2020-06-21T20%3A51%3A17Z&precision=second "See timeline at Jun 21, 2020, 8:51:17 PM")

| Resolution: | → fixed |
| --- | --- |
| Status: | open → closed |

Fixed in [0b3bd001ac1745d9d008a2d195817df57d7d1d14](/changeset/0b3bd001ac1745d9d008a2d195817df57d7d1d14/ffmpeg "dnn_backend_native: check operand index

it fixed the issue in ...")

**Note:**
See [TracTickets](/wiki/TracTickets)
for help on using tickets.

### Download in other formats:

* [RSS Feed](/ticket/8716?format=rss)
* [Comma-delimited Text](/ticket/8716?format=csv)
* [Tab-delimited Text](/ticket/8716?format=tab)

---

[![Trac Powered](/chrome/common/trac_logo_mini.png)](https://trac.edgewall.org/)

Powered by [**Trac 1.6**](/about)

By [Edgewall Software](http://www.edgewall.org/)
.

Visit the Trac open source project at
<http://trac.edgewall.org/>


