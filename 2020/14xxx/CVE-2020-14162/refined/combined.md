=== Content from 0xpanic.github.io_95d40407_20250119_111212.html ===

- [Blog](https://0xpanic.github.io)
- [Term Papers](https://onthecoverof.gq/papers)
- [View on GitHub](https://github.com/0xPanic/0xPanic.github.io)

# Vulnerabilities regarding Pihole's setdns command

Jul 21, 2020

Pair of local privilege escalation vulnerabilities in Pihole <5.0 and <5.1

**tl;dr**

CVE-2020-12620: edit /etc/pihole/dnsserver.conf to append &&/tmp/reverseshell.sh to an ip address to get root shell on <5.0

CVE-2020-14162: `sudo pihole -a setdns 1.1.1.1&&bash` to get root shell (need to be able to run pihole with UID 0, www-data can) on <5.1

---

This discovery started with me running `grep -R exec *.php` on the source code for the web interface to look for command injection vulnerabilities, which lead to me discovering this line of code on line ~411 in savesettings.php

![_vulnerable line](/images/pihole/guiltyline.png)

Going up the DU chain I didn’t see any point where the $IPs variable is sanitized, however the variable is the result of a file read of /etc/pihole/dnsserver.conf, which means it can’t be exploited by just having access to the web console, you’ll also need write access to that file.

This file is a list of semicolon separated IP addresses that can be selected to be pihole’s upstream DNS server. I tried appending a command to the end of an IP address to see what would happen. The only thing that I could get to work was appending &&/tmp/evil.sh to the end of an IP, where evil.sh is a reverse shell script.

![_conf file](/images/pihole/editpayload.png)

The next time the upstream DNS server is saved through the Admin Console with that IP selected, evil.sh will execute.

![_revshell](/images/pihole/root1.png)

An obscure use case but a vulnerability nonetheless. This was patched on 5.0 and assigned CVE-2020-12620.

---

What I didn’t notice at first was that this really shouldn’t have returned a root shell. I thought that the command being run was `sudo pihole -a setdns 1.1.1.1&&/tmp/evil.sh`, which should return a shell as www-data, not root, since sudo doesn’t carry over to the command on the other side of the double ampersands.

You can test this yourself by running `sudo whoami&&whoami`.

I didn’t think too much of this though, because at the time www-data could run any command with sudo without a password. However, the developers later restricted www-data to only be able to run `pihole` as root.

Digging deeper it turns out that what is going on here is that the `setdns` command in pihole is setting an environment variable to be equal to the provided value, which is then sourced. The shell metacharacters in the environment variable’s value is causing code to be executed as it is sourced. The command being run was actually `sudo pihole -a setdns "1.1.1.1&&/tmp/evil.sh"` and I just didn’t notice the quotation marks.

Which means that we can just run `sudo pihole -a setdns "1.1.1.1&&bash"` from the command line and get a root shell if we have permission to run that command with sudo and nothing else.

![_rootshell.yml](/images/pihole/privesc.png)

This makes pihole <5.1’s CLI a GTFObin. While GTFObins aren’t normally CVE worthy, www-data having permission to run this with sudo by default makes this a vulnerability, since it effectively turns any RCE in the website into root access. This was assigned CVE-2020-14162.

This also means that the original exploitation method of editing the dnsserver.conf file is actually exploiting both CVEs in parallel (you could technically exploit CVE-2020-12620 by itself by appending `" && /tmp/evil.sh` instead, but there’s not much of a reason to)

---

Timeline:

2020-04-22: Contacted Pihole team for initial vulnerability

2020-04-24: Received reply from Pihole

2020-05-01: CVE-2020-12620 assigned, informed Pihole developers

2020-05-03: patch applied for release with 5.0 update

2020-05-10: 5.0 released

2020-06-08: contacted pihole team for second vulnerability

2020-06-13: pihole team replied and applied a patch for release with 5.1 update

2020-07-15: 5.1 released

2020-07-21: published writeup with go-ahead from the developers



=== Content from docs.pi-hole.net_45034cff_20250119_111212.html ===


[Skip to content](#pi-hole-core)

[![logo](../../images/logo.svg)](../.. "Pi-hole documentation")

Pi-hole documentation

The pihole command - Pi-hole documentation

Initializing search

[GitHub](https://github.com/pi-hole/pi-hole "Go to repository")

[![logo](../../images/logo.svg)](../.. "Pi-hole documentation")
Pi-hole documentation

[GitHub](https://github.com/pi-hole/pi-hole "Go to repository")

* [Overview](../..)
* About Pi-hole

  About Pi-hole
  + [Contact Us](../../main/contact/)
  + [Pi-hole Origins](../../main/origins/)
  + [On the Web](../../main/coverage/)
* Getting Started

  Getting Started
  + [Prerequisites](../../main/prerequisites/)
  + [Installation](../../main/basic-install/)
  + [Post-Install](../../main/post-install/)
  + [Updating](../../main/update/)
  + [Uninstalling](../../main/uninstall/)
* Pi-hole Core

  Pi-hole Core
  + The  `pihole`  command

    [The  `pihole`  command](./)

    Table of contents
    - [Pi-hole Core](#pi-hole-core)
      * [Core Script](#core-script)
      * [Whitelisting, Blacklisting and Regex](#whitelisting-blacklisting-and-regex)
      * [Debugger](#debugger)
      * [Log Flush](#log-flush)
      * [Reconfigure](#reconfigure)
      * [Tail](#tail)
      * [Admin](#admin)
      * [Chronometer](#chronometer)
      * [Gravity](#gravity)
      * [Logging](#logging)
      * [Query](#query)
      * [Update](#update)
      * [Version](#version)
      * [Uninstall](#uninstall)
      * [Status](#status)
      * [Enable & Disable](#enable-disable)
      * [Restart DNS](#restart-dns)
      * [Checkout](#checkout)
    - [Pi-hole Web](#pi-hole-web)
      * [Web Script](#web-script)
      * [Password](#password)
      * [Teleport](#teleport)
      * [Temperature Unit](#temperature-unit)
      * [Interface](#interface)
* Databases

  Databases
  + [Overview](../../database/)
  + [Query database](../../database/ftl/)
  + Domain database

    Domain database
    - [Overview](../../database/gravity/)
    - [Group management](../../database/gravity/groups/)
    - [Database recovery](../../database/gravity/recovery/)
* FTLDNS

  FTLDNS
  + [Overview](../../ftldns/)
  + [Configuration](../../ftldns/configfile/)
  + [Interfaces](../../ftldns/interfaces/)
  + [DNS resolver](../../ftldns/dns-resolver/)
  + [DNS cache](../../ftldns/dns-cache/)
  + [Blocking mode](../../ftldns/blockingmode/)
  + [Privacy levels](../../ftldns/privacylevels/)
  + [dnsmasq warnings](../../ftldns/dnsmasq_warn/)
  + Advanced

    Advanced
    - [Install from source](../../ftldns/compile/)
    - [Telnet API](../../ftldns/telnet-api/)
    - [Signals](../../ftldns/signals/)
    - [Cache dump](../../ftldns/cache_dump/)
    - [Packet dump](../../ftldns/package_dump/)
    - Debugging

      Debugging
      * [gdb](../../ftldns/debugging/)
      * [valgrind](../../ftldns/valgrind/)
    - [In-depth manual](../../ftldns/in-depth/)
* Group management

  Group management
  + [Overview](../../group_management/groups/)
  + [Examples](../../group_management/example/)
* RegEx blocking

  RegEx blocking
  + [Overview](../../regex/overview/)
  + [Testing](../../regex/testmode/)
  + [Tutorial](../../regex/tutorial/)
  + [Pi-hole extensions](../../regex/pi-hole/)
  + [Approximate matching](../../regex/approximate/)
* Docker

  Docker
  + [DHCP](../../docker/DHCP/)
* Contributing

  Contributing
  + [Contributing on GitHub](../../guides/github/contributing/)
  + [Developer Certificate of Origin (DCO)](../../guides/github/dco/)
  + [How to sign-off commits](../../guides/github/how-to-signoff/)
  + [How to fork and rebase](../../guides/github/how-to-fork-rebase/)
* Guides

  Guides
  + DNS

    DNS
    - [unbound](../../guides/dns/unbound/)
    - [cloudflared (DoH)](../../guides/dns/cloudflared/)
    - [Upstream DNS Providers](../../guides/dns/upstream-dns-providers/)
  + VPN

    VPN
    - WireGuard

      WireGuard
      * [Overview](../../guides/vpn/wireguard/overview/)
      * [Concept](../../guides/vpn/wireguard/concept/)
      * [Install server](../../guides/vpn/wireguard/server/)
      * [Add client(s)](../../guides/vpn/wireguard/client/)
      * Optional extra features

        Optional extra features
        + [Make local devices accessible](../../guides/vpn/wireguard/internal/)
        + [Tunnel all Internet traffic](../../guides/vpn/wireguard/route-everything/)
      * [Troubleshooting](../../guides/vpn/wireguard/faq/)
    - OpenVPN

      OpenVPN
      * [Overview](../../guides/vpn/openvpn/overview/)
      * [Installation](../../guides/vpn/openvpn/installation/)
      * [Setup OpenVPN Server](../../guides/vpn/openvpn/setup-openvpn-server/)
      * [Firewall Configuration](../../guides/vpn/openvpn/firewall/)
      * Connecting clients

        Connecting clients
        + [General](../../guides/vpn/openvpn/clients/)
        + [Android](../../guides/vpn/openvpn/android-client/)
      * [Optional: Only route DNS via VPN](../../guides/vpn/openvpn/only-dns-via-vpn/)
      * [Optional: Dual operation: LAN & VPN at the same time](../../guides/vpn/openvpn/dual-operation/)
      * [Optional: Full and DNS-only](../../guides/vpn/openvpn/dual-VPN/)
      * [Optional: Dynamic DNS](../../guides/vpn/openvpn/dynDNS/)
      * [Troubleshooting](../../guides/vpn/openvpn/troubleshooting/)
  + Misc

    Misc
    - [Benchmarking](../../guides/misc/benchmark/)
    - Tor & Pi-hole

      Tor & Pi-hole
      * [Overview](../../guides/misc/tor/overview/)
      * [Basic Setup](../../guides/misc/tor/setup/)
      * [Using Tor](../../guides/misc/tor/using-tor/)
      * [Performance and other issues](../../guides/misc/tor/performance-issues/)
      * [Using DNSSEC](../../guides/misc/tor/dnssec/)
    - [Whitelist and Blacklist editing](../../guides/misc/whitelist-blacklist/)
  + Web server

    Web server
    - [NGINX](../../guides/webserver/nginx/)
    - [Caddy](../../guides/webserver/caddy/)
    - [Traefik v1 (not in Docker)](../../guides/webserver/traefik-nodocker/)
    - [Traefik v2 (with Docker)](../../guides/webserver/traefik-v2-docker/)
* Router setup

  Router setup
  + [ASUS router](../../routers/asus/)
  + [Fritz!Box (EN)](../../routers/fritzbox/)
  + [Fritz!Box (DE)](../../routers/fritzbox-de/)
  + [Nokia G-240W-B](../../routers/nokia-G240WB/)
  + [TP-Link](../../routers/tp-link/)
  + [Ubiquiti USG](../../routers/ubiquiti-usg/)
* [FAQ](../../main/faq/)
* [Community Projects](../../main/projects/)

Table of contents

* [Pi-hole Core](#pi-hole-core)
  + [Core Script](#core-script)
  + [Whitelisting, Blacklisting and Regex](#whitelisting-blacklisting-and-regex)
  + [Debugger](#debugger)
  + [Log Flush](#log-flush)
  + [Reconfigure](#reconfigure)
  + [Tail](#tail)
  + [Admin](#admin)
  + [Chronometer](#chronometer)
  + [Gravity](#gravity)
  + [Logging](#logging)
  + [Query](#query)
  + [Update](#update)
  + [Version](#version)
  + [Uninstall](#uninstall)
  + [Status](#status)
  + [Enable & Disable](#enable-disable)
  + [Restart DNS](#restart-dns)
  + [Checkout](#checkout)
* [Pi-hole Web](#pi-hole-web)
  + [Web Script](#web-script)
  + [Password](#password)
  + [Teleport](#teleport)
  + [Temperature Unit](#temperature-unit)
  + [Interface](#interface)

# The  `pihole`  command

Pi-hole makes use of many commands, and here we will break down those required to administer the program via the command-line Interface.

| Index | Invocation |
| --- | --- |
| [Core Script](#pi-hole-core) | `pihole` |
| [Web Script](#pi-hole-web) | `pihole -a` |

---

## Pi-hole Core[¶](#pi-hole-core "Permanent link")

| Feature | Invocation |
| --- | --- |
| [Core](#core-script) | `pihole` |
| [Whitelisting, Blacklisting and Regex](#whitelisting-blacklisting-and-regex) | `pihole -w`, `pihole -b`, `pihole --regex`, `pihole --wild` |
| [Debugger](#debugger) | `pihole debug` |
| [Log Flush](#log-flush) | `pihole flush` |
| [Reconfigure](#reconfigure) | `pihole reconfigure` |
| [Tail](#tail) | `pihole tail` |
| [Admin](#admin) | `pihole -a` |
| [Gravity](#gravity) | `pihole updateGravity` |
| [Logging](#logging) | `pihole logging` |
| [Query](#query) | `pihole query` |
| [Update](#update) | `pihole updatePihole` |
| [Version](#version) | `pihole version` |
| [Uninstall](#uninstall) | `pihole uninstall` |
| [Status](#status) | `pihole status` |
| [Enable & Disable](#enable-disable) | `pihole enable` |
| [Restart DNS](#restart-dns) | `pihole restartdns` |
| [Checkout](#checkout) | `pihole checkout` |

### Core Script[¶](#core-script "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole --help` |
| Script Location | [`/usr/local/bin/pihole`](https://github.com/pi-hole/pi-hole/blob/master/pihole) |
| Example Usage | `pihole -b advertiser.example.com` |

The core script of Pi-hole provides the ability to tie many DNS related functions into a simple and user-friendly management system, so that one may easily block unwanted content such as advertisements. For both the Command-line Interface (CLI) and Web Interface, we achieve this through the `pihole` command (this helps minimize code duplication, and allows users to read exactly what's happening using `bash` scripting). This "wrapper" elevates the current user (whether it be your own user account, or `www-data`) using `sudo`, but restricts the elevation to solely what can be called through the wrapper.

### Whitelisting, Blacklisting and Regex[¶](#whitelisting-blacklisting-and-regex "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole -w --help`, `pihole -b --help`, `pihole --regex --help`, `pihole --wild --help` |
| Script Location | [`/opt/pihole/list.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/list.sh) |
| Example Usage | [`pihole --regex '^example.com$' '.*\.example2.net'`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#white-black-list) |

Administrators need to be able to manually add and remove domains for various purposes, and these commands serve that purpose.

See [Regex Blocking](../../regex/overview/) for more information about using Regex.

**Basic Script Process**:

* Each domain is validated using regex (except when using `--regex`), to ensure invalid domains and IDNs are not added
* A domain gets added to or removed from the `domainlist` table in [`/etc/pihole/gravity.db`](../../database/gravity/)
* The DNS server is then reloaded

### Debugger[¶](#debugger "Permanent link")

|  |  |
| --- | --- |
| Help Command | N/A |
| Script Location | [`/opt/pihole/piholeDebug.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/piholeDebug.sh) |
| Example Usage | [`pihole debug`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#debug) |

The Pi-hole debugger will attempt to diagnose any issues, and link to an FAQ with instructions as to how an admin can rectify the issue. Once the debugger has finished, the admin has the option to upload the generated log to the Pi-hole developers, who can help with diagnosing and rectifying persistent issues.

### Log Flush[¶](#log-flush "Permanent link")

|  |  |
| --- | --- |
| Help Command | N/A |
| Script Location | [`/opt/pihole/piholeLogFlush.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/piholeLogFlush.sh) |
| Example Usage | [`pihole flush`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#flushing-the-log) |

When invoked manually, this command will allow you to empty Pi-hole's log, which is located at `/var/log/pihole/pihole.log`. The command also serves to rotate the log daily, if the `logrotate` application is installed.

### Reconfigure[¶](#reconfigure "Permanent link")

|  |  |
| --- | --- |
| Help Command | N/A |
| Script Location | [`/etc/.pihole/automated install/basic-install.sh`](https://github.com/pi-hole/pi-hole/blob/master/automated%20install/basic-install.sh) |
| Example Usage | `pihole reconfigure` |

There are times where the administrator will need to repair or reconfigure the Pi-hole installation, which is performed via this command.

**Basic Script Process**:

* [`basic-install.sh`](https://github.com/pi-hole/pi-hole/blob/master/automated%20install/basic-install.sh) will be run
  + **Reconfigure** will run through the first-time installation prompts, asking for upstream DNS provider, IP protocols, etc
  + **Repair** will retain your existing settings and will attempt to repair any scripts or dependencies as necessary
* The rest of `basic-install.sh` will then run as appropriate

### Tail[¶](#tail "Permanent link")

|  |  |
| --- | --- |
| Help Command | N/A |
| Script Location | [`/usr/local/bin/pihole`](https://github.com/pi-hole/pi-hole/blob/master/pihole) |
| Example Usage | [`pihole tail`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#tailing-the-log) |

Since Pi-hole will log DNS queries by default, using this command to watch the log in real-time can be useful for debugging a problematic site, or even just for sheer curiosities sake.

### Admin[¶](#admin "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole -a --help` |
| Script Location | [`/opt/pihole/webpage.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/webpage.sh) |
| Example Usage | `pihole -a -p secretpassword` |

Detailed information on this is [found here](#web-script).

### Chronometer[¶](#chronometer "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole -c --help` |
| Script Location | [`/opt/pihole/chronometer.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/chronometer.sh) |
| Example Usage | [`pihole -c -e`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#chronometer) |

Chronometer is a console dashboard of real-time stats, which can be displayed via `ssh` or on an LCD screen attached directly to your hardware. The script is capable of detecting the size of your screen and adjusting output to try and best suit it.

[![Chronometer in action](../chronometer-thumb.jpg)](../chronometer.jpg)

[Image courtesy of /u/super\_nicktendo22](https://www.reddit.com/r/pihole/comments/6ldjna/pihole_setup_went_so_well_at_home_for_the_1st/)

### Gravity[¶](#gravity "Permanent link")

|  |  |
| --- | --- |
| Help Command | N/A |
| Script Location | [`/opt/pihole/gravity.sh`](https://github.com/pi-hole/pi-hole/blob/master/gravity.sh) |
| Example Usage | [`pihole -g`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#gravity) |

Gravity is one of the most important scripts of Pi-hole. Its main purpose is to retrieve blocklists, and then consolidate them into one unique list for the built-in DNS server to use, but it also serves to complete the process of manual whitelisting, blacklisting and wildcard update. It is run automatically each week, but it can be invoked manually at any time.

**Basic Script Process**:

* It will determine Internet connectivity, and give time for `pihole-FTL` to be resolvable on low-end systems if has just been restarted
* It extracts all URLs and domains from the `adlists` table in [`/etc/pihole/gravity.db`](../../database/gravity/)
* It runs through each URL, downloading it if necessary
  + `curl` checks the servers `Last-Modified` header to ensure it is getting a newer version
* It will attempt to parse the file into a domains-only format if necessary
* Lists are merged, comments removed, sorted uniquely and stored in the `gravity` table of [`/etc/pihole/gravity.db`](../../database/gravity/)
* Gravity cleans up temporary content and reloads the DNS server

### Logging[¶](#logging "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole logging --help` |
| Script Location | [`/usr/local/bin/pihole`](https://github.com/pi-hole/pi-hole/blob/master/pihole) |
| Example Usage | [`pihole logging off`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#logging) |

This command specifies whether the Pi-hole log should be used, by commenting out `log-queries` within `/etc/dnsmasq.d/01-pihole.conf` and flushing the log.

### Query[¶](#query "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole query --help` |
| Script Location | [`/usr/local/bin/pihole`](https://github.com/pi-hole/pi-hole/blob/master/pihole) |
| Example Usage | [`pihole -q -exact -adlist example.domain.com`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#adlist-query) |

This command will query your whitelist, blacklist, wildcards and adlists for a specified domain.

**Basic Script Process**:

* User-specified options are handled
* Using `idn`, it will convert [Internationalized domain names](https://en.wikipedia.org/wiki/Internationalized_domain_name) into [punycode](https://en.wikipedia.org/wiki/Punycode)
* Database at [`/etc/pihole/gravity.db`](../../database/gravity/) is queried to return a list of adlists in which the queried domain exists.

### Update[¶](#update "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole updatePihole` |
| Script Location | [`/opt/pihole/update.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/update.sh) |
| Example Usage | `pihole -up` |

Check Pi-hole Core, Web Interface and FTL repositories to determine what upgrades (if any) are required. It will then automatically update and reinstall if necessary.

**Basic Script Process**:

* Script determines if updates are available by querying GitHub
* Updated files are downloaded to the local filesystem using `git`
* [`basic-install.sh`](https://github.com/pi-hole/pi-hole/blob/master/automated%20install/basic-install.sh) is run

### Version[¶](#version "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole version` |
| Script Location | [`/opt/pihole/version.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/version.sh) |
| Example Usage | `pihole -v -c` |

Shows installed versions of Pi-hole, Web Interface & FTL. It also provides options to configure which details will be printed, such as the current version, latest version, hash and subsystem.

### Uninstall[¶](#uninstall "Permanent link")

|  |  |
| --- | --- |
| Help Command | N/A |
| Script Location | [`/etc/.pihole/automated install/uninstall.sh`](https://github.com/pi-hole/pi-hole/blob/master/automated%20install/uninstall.sh) |
| Example Usage | [`pihole uninstall`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#uninstall) |

Uninstall Pi-hole from your system, giving the option to remove each dependency individually.

### Status[¶](#status "Permanent link")

|  |  |
| --- | --- |
| Help Command | N/A |
| Script Location | [`/usr/local/bin/pihole`](https://github.com/pi-hole/pi-hole/blob/master/pihole) |
| Example Usage | [`pihole status`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#status) |

Display the running status of Pi-hole's DNS and blocking services.

### Enable & Disable[¶](#enable-disable "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole disable --help` |
| Script Location | [`/usr/local/bin/pihole`](https://github.com/pi-hole/pi-hole/blob/master/pihole) |
| Example Usage | [`pihole disable 5m`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#toggle) |

Toggle Pi-hole's ability to block unwanted domains. The disable option has the option to set a specified time before blocking is automatically re-enabled.

### Restart DNS[¶](#restart-dns "Permanent link")

|  |  |
| --- | --- |
| Help Command | N/A |
| Script Location | [`/usr/local/bin/pihole`](https://github.com/pi-hole/pi-hole/blob/master/pihole) |
| Example Usage | [`pihole restartdns`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#restartdns) |

Restart Pi-hole's DNS service.

### Checkout[¶](#checkout "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole checkout --help` |
| Script Location | [`/opt/pihole/piholeCheckout.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/piholeCheckout.sh) |
| Example Usage | [`pihole checkout dev`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#checkout) |

Switch Pi-hole subsystems to a different GitHub branch. An admin can specify repositories as well as branches.

---

## Pi-hole Web[¶](#pi-hole-web "Permanent link")

| Feature | Invocation |
| --- | --- |
| [Web Script](#web-script) | `pihole -a` |
| [Password](#password) | `pihole -a password` |
| [Teleport](#teleport) | `pihole -a -t` |
| [Temperature Unit](#temperature-unit) | `pihole -a celsius`, `pihole -a fahrenheit`, `pihole -a kelvin` |
| [Interface](#interface) | `pihole -a interface` |

### Web Script[¶](#web-script "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole -a --help` |
| Script Location | [`/opt/pihole/webpage.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/webpage.sh) |
| Example Usage | `pihole -a -p secretpassword` |

Set options for the Web Interface. This script is used to tie in all Web Interface features which are not already covered by the [Core Script](#core-script).

### Password[¶](#password "Permanent link")

|  |  |
| --- | --- |
| Help Command | N/A |
| Script Location | [`/opt/pihole/webpage.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/webpage.sh) |
| Example Usage | [`pihole -a -p secretpassword`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#web-password) |

Set the Web Interface password. Password can be entered as an option (e.g: `pihole -a -p secretpassword`), or separately as to not display on the screen (e.g: `pihole -a -p`).

### Teleport[¶](#teleport "Permanent link")

|  |  |
| --- | --- |
| Help Command | N/A |
| Script Location | N/A |
| Example Usage | `pihole -a -t` |

Create a configuration backup. The backup will be created in the directory from which the command is run. The backup can be imported using the Settings > Teleport page.

### Temperature Unit[¶](#temperature-unit "Permanent link")

|  |  |
| --- | --- |
| Help Command | N/A |
| Script Location | [`/opt/pihole/webpage.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/webpage.sh) |
| Example Usage | [`pihole -a -c`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#temp-unit) |

Set the specified temperature unit as the preferred type. This preference will affect the Web Interface, as well as Chronometer.

### Interface[¶](#interface "Permanent link")

|  |  |
| --- | --- |
| Help Command | `pihole -a interface --help` |
| Script Location | [`/opt/pihole/webpage.sh`](https://github.com/pi-hole/pi-hole/blob/master/advanced/Scripts/webpage.sh) |
| Example Usage | [`pihole -a interface local`](https://discourse.pi-hole.net/t/the-pihole-command-with-examples/738#interface) |

Specify interface listening behavior for `pihole-FTL`. When using `pihole -a interface all`, please ensure you use a firewall to prevent your Pi-hole from becoming an unwitting host to [DNS amplification attackers](https://duckduckgo.com/?q=dns+amplification+attack). You may want to consider running [Wireguard](../../guides/vpn/wireguard/overview/) to grant your mobile devices access to the Pi-hole.

April 28, 2024

Back to top

Copyright Pi-hole. Licensed under [CC BY-SA 4.0](http://creativecommons.org/licenses/by-sa/4.0/)

[This site is powered by Netlify](https://www.netlify.com/)


