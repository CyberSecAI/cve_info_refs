=== Content from en.bitcoin.it_a87372d7_20250119_125238.html ===


# Common Vulnerabilities and Exposures

From Bitcoin Wiki

[Jump to navigation](#mw-head)
[Jump to search](#searchInput)

| CVE | Announced | Affects | Severity | Attack is... | Flaw | Net |
| --- | --- | --- | --- | --- | --- | --- |
| Pre-BIP protocol changes | n/a | All Bitcoin clients | Netsplit[[1]](#cite_note-Netsplit-1) | Implicit[[2]](#cite_note-hardfork-2) | [Various hardforks and softforks](/wiki/Consensus_versions "Consensus versions") | 100% |
| [CVE-2010-5137](#CVE-2010-5137) | 2010-07-28 | wxBitcoin and bitcoind | DoS[[3]](#cite_note-DoS-3) | Easy | OP\_LSHIFT crash | 100% |
| [CVE-2010-5141](#CVE-2010-5141) | 2010-07-28 | wxBitcoin and bitcoind | Theft[[4]](#cite_note-Theft-4) | Easy | OP\_RETURN could be used to spend any output. | 100% |
| [CVE-2010-5138](#CVE-2010-5138) | 2010-07-29 | wxBitcoin and bitcoind | DoS[[3]](#cite_note-DoS-3) | Easy | Unlimited SigOp DoS | 100% |
| **[CVE-2010-5139](/wiki/CVE-2010-5139 "CVE-2010-5139")** | 2010-08-15 | wxBitcoin and bitcoind | Inflation[[5]](#cite_note-inflation-5) | Easy | Combined output overflow | 100% |
| [CVE-2010-5140](#CVE-2010-5140) | 2010-09-29 | wxBitcoin and bitcoind | DoS[[3]](#cite_note-DoS-3) | Easy | Never confirming transactions | 100% |
| [CVE-2011-4447](#CVE-2011-4447) | 2011-11-11 | wxBitcoin and bitcoind | Exposure[[6]](#cite_note-Exposure-6) | Hard | Wallet non-encryption | [100%](http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2011-4447.html) |
| [CVE-2012-1909](#CVE-2012-1909) | 2012-03-07 | Bitcoin protocol and all clients | Netsplit[[1]](#cite_note-Netsplit-1) | Very hard | Transaction overwriting | [100%](http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2012-1909.html) |
| [CVE-2012-1910](#CVE-2012-1910) | 2012-03-17 | bitcoind & Bitcoin-Qt for Windows | Unknown[[7]](#cite_note-Unknown-7) | Hard | Non-thread safe MingW exceptions | [100%](http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2012-1910.html) |
| [BIP 0016](#BIP-0016) | 2012-04-01 | All Bitcoin clients | Fake Conf[[8]](#cite_note-FakeConf-8) | Miners[[9]](#cite_note-MinerEasy-9) | Softfork: P2SH | [100%](http://luke.dashjr.org/programs/bitcoin/files/charts/BIP-0016.html) |
| [CVE-2012-2459](#CVE-2012-2459) | 2012-05-14 | bitcoind and Bitcoin-Qt | Netsplit[[1]](#cite_note-Netsplit-1) | Easy | Block hash collision (via merkle root) | [100%](http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2012-2459.html) |
| **[CVE-2012-3789](/wiki/CVE-2012-3789 "CVE-2012-3789")** | 2012-06-20 | bitcoind and Bitcoin-Qt | DoS[[3]](#cite_note-DoS-3) | Easy | (Lack of) orphan txn resource limits | [100%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20123789) |
| [CVE-2012-4682](#CVE-2012-4682) |  | bitcoind and Bitcoin-Qt | DoS[[3]](#cite_note-DoS-3) |  |  | [100%](http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2012-4682.html) |
| **[CVE-2012-4683](/wiki/CVE-2012-4683 "CVE-2012-4683")** | 2012-08-23 | bitcoind and Bitcoin-Qt | DoS[[3]](#cite_note-DoS-3) | Easy | Targeted DoS by CPU exhaustion using alerts | [100%](http://luke.dashjr.org/programs/bitcoin/files/charts/CVE-2012-4683.html) |
| **[CVE-2012-4684](/wiki/CVE-2012-4684 "CVE-2012-4684")** | 2012-08-24 | bitcoind and Bitcoin-Qt | DoS[[3]](#cite_note-DoS-3) | Easy | Network-wide DoS using malleable signatures in alerts | [100%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20124684) |
| [CVE-2013-2272](#CVE-2013-2272) | 2013-01-11 | bitcoind and Bitcoin-Qt | Exposure[[6]](#cite_note-Exposure-6) | Easy | Remote discovery of node's wallet addresses | [99.99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20132272) |
| [CVE-2013-2273](#CVE-2013-2273) | 2013-01-30 | bitcoind and Bitcoin-Qt | Exposure[[6]](#cite_note-Exposure-6) | Easy | Predictable change output | [99.99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20132273) |
| [CVE-2013-2292](#CVE-2013-2292) | 2013-01-30 | bitcoind and Bitcoin-Qt | DoS[[3]](#cite_note-DoS-3) | Hard | A transaction that takes at least 3 minutes to verify | [0%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20132292) |
| **[CVE-2013-2293](/wiki/CVE-2013-2293 "CVE-2013-2293")** | 2013-02-14 | bitcoind and Bitcoin-Qt | DoS[[3]](#cite_note-DoS-3) | Easy | Continuous hard disk seek | [99.99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20132293) |
| [CVE-2013-3219](#CVE-2013-3219) | 2013-03-11 | bitcoind and Bitcoin-Qt 0.8.0 | Fake Conf[[8]](#cite_note-FakeConf-8) | Miners[[9]](#cite_note-MinerEasy-9) | Unenforced block protocol rule | [100%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20133219) |
| [CVE-2013-3220](#CVE-2013-3220) | 2013-03-11 | bitcoind and Bitcoin-Qt | Netsplit[[1]](#cite_note-Netsplit-1) | Hard | Inconsistent BDB lock limit interactions | [99.99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20133220) |
| [BIP 0034](#BIP-0034) | 2013-03-25 | All Bitcoin clients | Fake Conf[[8]](#cite_note-FakeConf-8) | Miners[[9]](#cite_note-MinerEasy-9) | Softfork: Height in coinbase | [100%](http://luke.dashjr.org/programs/bitcoin/files/charts/BIP-0034.html) |
| [BIP 0050](#BIP-0050) | 2013-05-15 | All Bitcoin clients | Netsplit[[1]](#cite_note-Netsplit-1) | Implicit[[2]](#cite_note-hardfork-2) | Hard fork to remove txid limit protocol rule | [99.99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?50) |
| [CVE-2013-4627](#CVE-2013-4627) | 2013-06-?? | bitcoind and Bitcoin-Qt | DoS[[3]](#cite_note-DoS-3) | Easy | Memory exhaustion with excess tx message data | [99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20134627) |
| [CVE-2013-4165](#CVE-2013-4165) | 2013-07-20 | bitcoind and Bitcoin-Qt | Theft[[10]](#cite_note-theft-local-timing-10) | Local | Timing leak in RPC authentication | [99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20134165) |
| [CVE-2013-5700](#CVE-2013-5700) | 2013-09-04 | bitcoind and Bitcoin-Qt 0.8.x | DoS[[3]](#cite_note-DoS-3) | Easy | Remote p2p crash via bloom filters | [99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20135700) |
| [CVE-2014-0160](#CVE-2014-0160) | 2014-04-07 | Anything using OpenSSL for TLS | Unknown[[7]](#cite_note-Unknown-7) | Easy | Remote memory leak via payment protocol | Unknown |
| [CVE-2015-3641](https://bitcoincore.org/en/2024/07/03/disclose_receive_buffer_oom/) | 2014-07-07 | bitcoind and Bitcoin-Qt prior to 0.10.2 | DoS[[3]](#cite_note-DoS-3) | Easy | OOM via p2p | [99.9%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20135700) |
| BIP 66 | 2015-02-13 | All Bitcoin clients | Fake Conf[[8]](#cite_note-FakeConf-8) | Miners[[9]](#cite_note-MinerEasy-9) | Softfork: Strict DER signatures | [99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?66) |
| BIP 65 | 2015-11-12 | All Bitcoin clients | Fake Conf[[8]](#cite_note-FakeConf-8) | Miners[[9]](#cite_note-MinerEasy-9) | Softfork: OP\_CHECKLOCKTIMEVERIFY | [99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?65) |
| BIPs 68, 112 & 113 | 2016-04-11 | All Bitcoin clients | Fake Conf[[8]](#cite_note-FakeConf-8) | Miners[[9]](#cite_note-MinerEasy-9) | Softforks: Rel locktime, CSV & MTP locktime | [99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?68) |
| CVE-2015-6031 | 2015-09-15 | MiniUPnPcBitcoin Core/Knots prior to 0.11.2 | Anything | LAN | Buffer overflow |
| BIPs 141, 143 & 147 | 2016-10-27 | All Bitcoin clients | Fake Conf[[8]](#cite_note-FakeConf-8) | Miners[[9]](#cite_note-MinerEasy-9) | Softfork: Segwit | [99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?141) |
| [CVE-2016-8889](#CVE-2016-8889) | 2016-10-27 | Bitcoin Knots GUI 0.11.0 - 0.13.0 | Exposure | Hard | Debug console history storing sensitive info | 100% |
| CVE-2017-9230 | ? | Bitcoin | ? | ? | ASICBoost | 0% |
| BIP 148 | 2017-03-12 | All Bitcoin clients | Fake Conf[[8]](#cite_note-FakeConf-8) | Miners[[9]](#cite_note-MinerEasy-9) | Softfork: Segwit UASF | ? |
| [CVE-2017-12842](#CVE-2017-12842) | 2018-06-09 |  |  |  | No commitment to block merkle tree depth |  |
| [CVE-2016-10724](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-July/016189.html) | 2018-07-02 | bitcoind and Bitcoin-Qt prior to 0.13.0 | DoS[[3]](#cite_note-DoS-3) | Keyholders[[11]](#cite_note-KeyholderEasy-11) | Alert memory exhaustion | [99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201610724) |
| [TBD](https://bitcoincore.org/en/2024/07/03/disclose-header-spam/) | 2024-07-03 | Bitcoin Core/Knots prior to 0.15.0 | DoS[[3]](#cite_note-DoS-3) | Easy | OOM via fake block headers |
| [CVE-2016-10725](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-July/016189.html) | 2018-07-02 | bitcoind and Bitcoin-Qt prior to 0.13.0 | DoS[[3]](#cite_note-DoS-3) | Keyholders[[11]](#cite_note-KeyholderEasy-11) | Final alert cancellation | [99%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201610724) |
| [CVE-2018-17144](#CVE-2018-17144) | 2018-09-17 | bitcoind and Bitcoin-Qt prior to 0.16.3 | Inflation[[5]](#cite_note-inflation-5) | Miners[[9]](#cite_note-MinerEasy-9) | Missing check for duplicate inputs | [80%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201817144) |
| [CVE-2018-20587](https://medium.com/%40lukedashjr/cve-2018-20587-advisory-and-full-disclosure-a3105551e78b) | 2019-02-08 | Bitcoin Knots prior to 0.17.1, and all current Bitcoin Core releases | Theft[[10]](#cite_note-theft-local-timing-10) | Local | No alert for RPC service binding failure | [<1%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201820587) |
| [CVE-2017-18350](#CVE-2017-18350) | 2019-06-22 | bitcoind and Bitcoin-Qt prior to 0.15.1 | Unknown | Varies[[12]](#cite_note-12) | Buffer overflow from SOCKS proxy | [94%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201718350) |
| [CVE-2018-20586](#CVE-2018-20586) | 2019-06-22 | bitcoind and Bitcoin-Qt prior to 0.17.1 | Deception | RPC access | Debug log injection via unauthenticated RPC | [77%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201820586) |
| [TBD](https://bitcoincore.org/en/2024/07/03/disclose-orphan-dos/) | 2024-07-03 | Bitcoin Core/Knots prior to 0.18.0 | DoS | Easy | Orphan transaction CPU tieup |
| [CVE-2019-12998](https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-September/002174.html) | 2019-08-30 | c-lightning prior to 0.7.1 | Theft | Easy | Missing check of channel funding UTXO |
| [CVE-2019-12999](https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-September/002174.html) | 2019-08-30 | lnd prior to 0.7 | Theft | Easy | Missing check of channel funding UTXO amount |
| [CVE-2019-13000](https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-September/002174.html) | 2019-08-30 | eclair prior to 0.3 | Theft | Easy | Missing check of channel funding UTXO |
| [TBD](https://bitcoincore.org/en/2024/07/03/disclose-inv-buffer-blowup/) | 2024-07-03 | Bitcoin Core/Knots prior to 0.20.0 | DoS | Easy | Network buffer OOM |
| [TBD](https://bitcoincore.org/en/2024/07/03/disclose-getdata-cpu/) | 2024-07-03 | Bitcoin Core/Knots prior to 0.20.0 | CPU usage | Easy | Infinite loop via p2p |
| [TBD](https://bitcoincore.org/en/2024/07/03/disclose-bip70-crash/) | 2024-07-03 | Bitcoin Core/Knots prior to 0.20.0 | DoS | Recipient[[13]](#cite_note-Recipient-13) | OOM via malicious BIP72 URI |
| [CVE-2020-14199](#CVE-2020-14199) | 2020-06-03 | Trezor and others | Theft | Social[[14]](#cite_note-14) | Double-signing can enable unintended fees |
| [CVE-2018-17145](https://invdos.net/) | 2020-09-09 | Bitcoin Core prior to 0.16.2Bitcoin Knots prior to 0.16.1Bcoin prior to 1.0.2Btcd prior to 0.21.0 | DoS[[3]](#cite_note-DoS-3) | Easy | p2p memory blow-up | [87%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?201817145) |
| [CVE-2020-26895](#CVE-2020-26895) | 2020-10-08 | lnd prior to 0.10 | Theft | Easy | Missing low-S normalization for HTLC signatures |
| [CVE-2020-26896](#CVE-2020-26896) | 2020-10-08 | lnd prior to 0.11 | Theft | Varies[[15]](#cite_note-15) | Invoice preimage extraction via forwarded HTLC |
| [CVE-2020-14198](https://bitcoincore.org/en/2024/07/03/disclose-unbounded-banlist/) |  | Bitcoin Core 0.20.1 | DoS[[3]](#cite_note-DoS-3) | Easy | Remote DoS | [93%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?202014198) |
| [TBD](https://bitcoincore.org/en/2024/07/03/disclose-timestamp-overflow/) | 2024-07-03 | Bitcoin Core/Knots prior to 0.20.2 | Netsplit[[1]](#cite_note-Netsplit-1) | Varies | Adjusted time manipulation |
| [CVE-2021-3401](#CVE-2021-3401) | 2021-02-01 | Bitcoin Core GUI prior to 0.19.0Bitcoin Knots GUI prior to 0.18.1 | Theft | Hard | Qt5 remote execution | [64%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?20213401) |
| [TBD](https://bitcoincore.org/en/2024/07/31/disclose-upnp-oom/) | 2024-07-31 | Bitcoin Core/Knots prior to 22.0 with UPnP enabled | DoS | Local | OOM via LAN spam |
| [TBD](https://bitcoincore.org/en/2024/07/31/disclose-addrman-int-overflow/) | 2024-07-31 | Bitcoin Core/Knots prior to 22.0 | DoS | Easy | OOM via p2p spam |
| [CVE-2021-31876](#CVE-2021-31876) | 2021-05-06 | Various wallets |  |  |  |
| CVE-2021-41591 | 2021-10-04 | Lightning software |  |  |  |
| CVE-2021-41592 | 2021-10-04 | Lightning software |  |  |  |
| CVE-2021-41593 | 2021-10-04 | Lightning software |  |  |  |
| BIPs 341-343 | 2021-11-13 | All Bitcoin nodes | Fake Conf[[8]](#cite_note-FakeConf-8) | Miners[[9]](#cite_note-MinerEasy-9) | Softfork: Taproot | [57%](http://luke.dashjr.org/programs/bitcoin/files/charts/security.html?343) |
| [CVE-2022-31246](https://github.com/spesmilo/electrum/security/advisories/GHSA-4fh4-hx35-r355) | 2022-06-07 | Electrum 2.1 until before 4.2.2 | Theft | Social |  |
| [CVE-2023-50428](#CVE-2023-50428) | 2023 | All Bitcoin nodes | DoS[[3]](#cite_note-DoS-3) | Easy | Bypass of datacarriersize limit using OP\_FALSE,OP\_IF |  |
| [CVE-2024-34149](#CVE-2024-34149) | 2024-03-30 | Bitcoin Core 0.21.1 and newer (not fixed)Bitcoin Knots 0.21.1 - 0.23.0 | DoS[[3]](#cite_note-DoS-3) | Easy | Script size limit not enforced for Tapscript |  |

1. ↑ [1.0](#cite_ref-Netsplit_1-0) [1.1](#cite_ref-Netsplit_1-1) [1.2](#cite_ref-Netsplit_1-2) [1.3](#cite_ref-Netsplit_1-3) [1.4](#cite_ref-Netsplit_1-4) [1.5](#cite_ref-Netsplit_1-5) Attacker can create multiple views of the network, enabling [double-spending](/wiki/Double-spending "Double-spending") with over 1 confirmation
2. ↑ [2.0](#cite_ref-hardfork_2-0) [2.1](#cite_ref-hardfork_2-1) This is a protocol "hard-fork" that old clients will reject as invalid and must therefore not be used.
3. ↑ [3.00](#cite_ref-DoS_3-0) [3.01](#cite_ref-DoS_3-1) [3.02](#cite_ref-DoS_3-2) [3.03](#cite_ref-DoS_3-3) [3.04](#cite_ref-DoS_3-4) [3.05](#cite_ref-DoS_3-5) [3.06](#cite_ref-DoS_3-6) [3.07](#cite_ref-DoS_3-7) [3.08](#cite_ref-DoS_3-8) [3.09](#cite_ref-DoS_3-9) [3.10](#cite_ref-DoS_3-10) [3.11](#cite_ref-DoS_3-11) [3.12](#cite_ref-DoS_3-12) [3.13](#cite_ref-DoS_3-13) [3.14](#cite_ref-DoS_3-14) [3.15](#cite_ref-DoS_3-15) [3.16](#cite_ref-DoS_3-16) [3.17](#cite_ref-DoS_3-17) [3.18](#cite_ref-DoS_3-18) Attacker can disable some functionality, for example by crashing clients
4. [↑](#cite_ref-Theft_4-0) Attacker can take coins outside known network rules
5. ↑ [5.0](#cite_ref-inflation_5-0) [5.1](#cite_ref-inflation_5-1) Attacker can create coins outside known network rules
6. ↑ [6.0](#cite_ref-Exposure_6-0) [6.1](#cite_ref-Exposure_6-1) [6.2](#cite_ref-Exposure_6-2) Attacker can access user data outside known acceptable methods
7. ↑ [7.0](#cite_ref-Unknown_7-0) [7.1](#cite_ref-Unknown_7-1) Extent of possible abuse is unknown
8. ↑ [8.0](#cite_ref-FakeConf_8-0) [8.1](#cite_ref-FakeConf_8-1) [8.2](#cite_ref-FakeConf_8-2) [8.3](#cite_ref-FakeConf_8-3) [8.4](#cite_ref-FakeConf_8-4) [8.5](#cite_ref-FakeConf_8-5) [8.6](#cite_ref-FakeConf_8-6) [8.7](#cite_ref-FakeConf_8-7) [8.8](#cite_ref-FakeConf_8-8) Attacker can double-spend with 1 confirmation
9. ↑ [9.00](#cite_ref-MinerEasy_9-0) [9.01](#cite_ref-MinerEasy_9-1) [9.02](#cite_ref-MinerEasy_9-2) [9.03](#cite_ref-MinerEasy_9-3) [9.04](#cite_ref-MinerEasy_9-4) [9.05](#cite_ref-MinerEasy_9-5) [9.06](#cite_ref-MinerEasy_9-6) [9.07](#cite_ref-MinerEasy_9-7) [9.08](#cite_ref-MinerEasy_9-8) [9.09](#cite_ref-MinerEasy_9-9) Attacking requires mining block(s)
10. ↑ [10.0](#cite_ref-theft-local-timing_10-0) [10.1](#cite_ref-theft-local-timing_10-1) Local attacker could potentially determine the RPC passphrase via a timing sidechannel.
11. ↑ [11.0](#cite_ref-KeyholderEasy_11-0) [11.1](#cite_ref-KeyholderEasy_11-1) Attacking requires signing with the publicly-disclosed alert key
12. [↑](#cite_ref-12) Depends on software configuration
13. [↑](#cite_ref-Recipient_13-0) Can only be exploited by the recipient the victim intends to pay
14. [↑](#cite_ref-14) User must be tricked into cooperating (social engineering)
15. [↑](#cite_ref-15) Depends on node configuration, only affects routable merchants, requires external knowledge of receiver's invoices and/or luck to identify receiver, only works against single-shot HTLCs (legacy or MPP)

## CVE-2010-5137

```
Date: 2010-07-28
Summary: OP_LSHIFT crash
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| bitcoindwxBitcoin | \* - 0.3.4 | 0.3.5 |

On July 28 2010, two bugs were discovered and demonstrated on the test network. One caused bitcoin to crash on some machines when processing a transaction containing an OP\_LSHIFT. This was never exploited on the main network, and was fixed by Bitcoin version 0.3.5.

After these bugs were discovered, many currently-unused script words were disabled for safety.

### References

* [US-CERT/NIST](http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-5137)

## CVE-2010-5141

```
Date: 2010-07-28
Summary: ?
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| bitcoindwxBitcoin | \* - 0.3.4 | 0.3.5 |

On July 28 2010, two bugs were discovered and demonstrated on the test network. One exploited a bug in the transaction handling code and allowed an attacker to spend coins that they did not own. This was never exploited on the main network, and was fixed by Bitcoin version 0.3.5.

After these bugs were discovered, many currently-unused script words were disabled for safety.

### References

* [US-CERT/NIST](http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-5141)

## CVE-2010-5138

```
Date: 2010-07-29
Summary: Unlimited SigOp DoS
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| bitcoindwxBitcoin | \* - 0.3.? | 0.3.? |

On July 29 2010, it was discovered that block [71036](http://blockexplorer.com/block/00000000000997f9fd2fe1ee376293ef8c42ad09193a5d2086dddf8e5c426b56) contained several transactions with a ton of OP\_CHECKSIG commands. There should only ever be one such command. This caused every node to do extra unnecessary work, and it could have been used as a denial-of-service attack. A new version of Bitcoin was quickly released. The new version did not cause a fork on the main network, though it did cause one on the test network (where someone had played around with the attack more).

### References

* [US-CERT/NIST](http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-5138)

## CVE-2010-5139

*Main article: [CVE-2010-5139](/wiki/CVE-2010-5139 "CVE-2010-5139")*
```
Date: 2010-08-15
Summary: Combined output overflow
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| bitcoindwxBitcoin | \* - 0.3.10 | 0.3.11 |

On August 15 2010, it was [discovered](http://bitcointalk.org/index.php?topic=822.0) that block 74638 contained a transaction that created over 184 billion bitcoins for two different addresses. This was possible because the code used for checking transactions before including them in a block didn't account for the case of outputs so large that they overflowed when summed. A new version was published within a few hours of the discovery. The block chain had to be forked. Although many unpatched nodes continued to build on the "bad" block chain, the "good" block chain overtook it at a block height of 74691. The bad transaction no longer exists for people using the longest chain.

The block and transaction:

```
CBlock(hash=0000000000790ab3, ver=1, hashPrevBlock=0000000000606865, hashMerkleRoot=618eba,
nTime=1281891957, nBits=1c00800e, nNonce=28192719, vtx=2)
  CTransaction(hash=012cd8, ver=1, vin.size=1, vout.size=1, nLockTime=0)
    CTxIn(COutPoint(000000, -1), coinbase 040e80001c028f00)
    CTxOut(nValue=50.51000000, scriptPubKey=0x4F4BA55D1580F8C3A8A2C7)
  CTransaction(hash=1d5e51, ver=1, vin.size=1, vout.size=2, nLockTime=0)
    CTxIn(COutPoint(237fe8, 0), scriptSig=0xA87C02384E1F184B79C6AC)
    CTxOut(nValue=92233720368.54275808, scriptPubKey=OP_DUP OP_HASH160 0xB7A7)
    CTxOut(nValue=92233720368.54275808, scriptPubKey=OP_DUP OP_HASH160 0x1512)
  vMerkleTree: 012cd8 1d5e51 618eba

Block hash: 0000000000790ab3f22ec756ad43b6ab569abf0bddeb97c67a6f7b1470a7ec1c
Transaction hash: 1d5e512a9723cbef373b970eb52f1e9598ad67e7408077a82fdac194b65333c9
```
### References

* [Discovery](https://bitcointalk.org/index.php?topic=822.0)
* [US-CERT/NIST](http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-5139)

## CVE-2010-5140

```
Date: 2010-09-29
Summary: Never confirming transactions
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| bitcoindwxBitcoin | \* - 0.3.12 | 0.3.13 |

Around September 29, 2010, people started [reporting](https://bitcointalk.org/index.php?topic=1306.0) that their sent transactions would not confirm. This happened because people modified Bitcoin to send sub-0.01 transactions without any fees. A 0.01 fee was at that time required by the network for such transactions (essentially prohibiting them), so the transactions remained at 0 confirmations forever. This became a more serious issue because Bitcoin would send transactions using bitcoins gotten from transactions with 0 confirmations, and these resulting transactions would also never confirm. Because Bitcoin tends to prefer sending smaller coins, these invalid transactions quickly multiplied, contaminating the wallets of everyone who received them.

Bitcoin was changed to only select coins with at least 1 confirmation. The remaining sub-0.01 transactions were cleared by generators who modified their version of Bitcoin to not require the micropayment fee. It took a while for everything to get cleared, though, because many of the intermediate transactions had been forgotten by the network by this point and had to be rebroadcast by the original senders.

### References

* [Initial reports](https://bitcointalk.org/index.php?topic=1306.0)
* [US-CERT/NIST](http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-5140)

## CVE-2011-4447

```
Date: 2011-11-11
Summary: Wallet non-encryption
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| bitcoindwxBitcoin | 0.4.0 - 0.4.1rc6 | 0.4.10.5.0 |

### References

* [Announcement](https://bitcointalk.org/index.php?topic=51604.0)
* [Finding](https://bitcointalk.org/index.php?topic=51474.0)
* [0.5.0](http://bitcoin.org/releases/2011/11/21/v0.5.0.html)
* [US-CERT/NIST](http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2011-4447)

## CVE-2012-1909

```
Date: 2012-03-07
Summary: Transaction overwriting
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin protocol | Before March 15th, 2012 | BIP 30 |
| Bitcoin-Qtbitcoind | \* - 0.4.4rc20.5.0rc1 - 0.5.0.4rc20.5.1rc1 - 0.5.3rc20.6.0rc1 - 0.6.0rc2 | 0.4.40.5.0.40.5.30.6.0rc3 |
| wxBitcoin | ALL | NONE |

### References

* [Announcement](https://bitcointalk.org/index.php?topic=67738.0)
* [Fix](https://en.bitcoin.it/wiki/BIP_0030)
* [Gentoo bug tracker](https://bugs.gentoo.org/show_bug.cgi?id=407793)
* [US-CERT/NIST](http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2012-1909)

## CVE-2012-1910

```
Date: 2012-03-17
Summary: Non-thread safe MingW exceptions
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| bitcoind for WindowsBitcoin-Qt for Windows | 0.5.0rc1 - 0.5.0.40.5.1rc1 - 0.5.3.00.6.0rc1 - 0.6.0rc3 | 0.5.0.50.5.3.10.5.40.6.0rc4 |

### References

* [Announcement](https://bitcointalk.org/index.php?topic=69120.0)
* [US-CERT/NIST](http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2012-1910)
* [Full disclosure](http://gavintech.blogspot.com/2012/03/full-disclosure-bitcoin-qt-on-windows.html)

## BIP-0016

```
Date: 2012-04-01
Summary: Mandatory P2SH protocol update
Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.40.5.0rc1 - 0.5.0.50.5.1rc1 - 0.5.30.6.0rc1 | 0.4.50.5.0.60.5.4rc10.6.0rc2 |
| wxBitcoin | ALL | NONE |

### References

* [BIP 0016](/wiki/BIP_0016 "BIP 0016")

## CVE-2012-2459

```
Date: 2012-05-14
Summary: Block hash collision (via merkle tree)
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.6rc10.5.0rc1 - 0.5.5rc10.6.0rc1 - 0.6.0.7rc10.6.1rc1 - 0.6.1rc1 | 0.4.60.5.50.6.0.70.6.1rc2 |

Block hash collisions can easily be made by duplicating transactions in the merkle tree.
Such a collision is invalid, but if recorded (as Bitcoin-Qt and bitcoind prior to 0.6.1 did) would prevent acceptance of the legitimate block with the same hash.
This could be used to fork the blockchain, including deep double-spend attacks.

### References

* [Announcement](https://bitcointalk.org/?topic=81749)
* [Gentoo bug tracker](https://bugs.gentoo.org/show_bug.cgi?id=415973)
* [US-CERT/NIST](http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2012-2459)
* [Full Disclosure](https://bitcointalk.org/?topic=102395)

## CVE-2012-3789

*Main article: [CVE-2012-3789](/wiki/CVE-2012-3789 "CVE-2012-3789")*
```
Date: 2012-06-20
Summary: (Lack of) orphan txn resource limits
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.7rc20.5.0rc1 - 0.5.6rc20.6.0rc1 - 0.6.0.8rc20.6.1rc1 - 0.6.2.2 | 0.4.7rc30.5.6rc30.6.0.9rc10.6.3rc1 |

### References

* [CVE-2012-3789](/wiki/CVE-2012-3789 "CVE-2012-3789")
* [0.6.3rc1 Announcement](https://bitcointalk.org/?topic=88734)
* [US-CERT/NIST](http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2012-3789)

## CVE-2012-4682

```
Date:
Summary:
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.7rc20.5.0rc1 - 0.5.6rc20.6.0rc1 - 0.6.0.8rc20.6.1rc1 - 0.6.2.2 | 0.4.7rc30.5.6rc30.6.0.9rc10.6.3rc1 |

### References

* [CVE-2012-4682](/w/index.php?title=CVE-2012-4682&action=edit&redlink=1 "CVE-2012-4682 (page does not exist)")
* [Gentoo bug](https://bugs.gentoo.org/show_bug.cgi?id=435216)

## CVE-2012-4683

*Main article: [CVE-2012-4683](/wiki/CVE-2012-4683 "CVE-2012-4683")*
```
Date: 2012-08-23
Summary: Targeted DoS by CPU exhaustion using alerts
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.7rc20.5.0rc1 - 0.5.6rc20.6.0rc1 - 0.6.0.8rc20.6.1rc1 - 0.6.2.2 | 0.7.0 |

### References

* [CVE-2012-4683](/wiki/CVE-2012-4683 "CVE-2012-4683")
* [Announcement](https://bitcointalk.org/index.php?topic=148038.0)
* [Gentoo bug](https://bugs.gentoo.org/show_bug.cgi?id=435216)

## CVE-2012-4684

*Main article: [CVE-2012-4684](/wiki/CVE-2012-4684 "CVE-2012-4684")*
```
Date: 2012-08-24
Summary: Network-wide DoS using malleable signatures in alerts
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.7rc20.5.0rc1 - 0.5.6rc20.6.0rc1 - 0.6.0.8rc20.6.1rc1 - 0.6.2.2 - 0.6.3rc1 | 0.7.0 |

### References

* [CVE-2012-4684](/wiki/CVE-2012-4684 "CVE-2012-4684")
* [Announcement](https://bitcointalk.org/index.php?topic=148109.0)

## CVE-2013-2272

```
Date: 2013-01-11
Summary: Remote discovery of node's wallet addresses
Fix Deployment: 99.99%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.8rc40.5.0rc1 - 0.5.70.6.0rc1 - 0.6.0.10rc40.6.1rc1 - 0.6.4rc40.7.0rc1 - 0.7.2 | 0.4.9rc10.5.8rc10.6.0.11rc10.6.5rc10.7.3rc1 |

### References

* [Announcement](https://bitcointalk.org/?topic=135856)
* [Gentoo bug](https://bugs.gentoo.org/show_bug.cgi?id=462046)

## CVE-2013-2273

```
Date: 2013-01-30
Summary: Predictable change output
Fix Deployment: 99.99%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.8rc40.5.0rc1 - 0.5.70.6.0rc1 - 0.6.0.10rc40.6.1rc1 - 0.6.4rc40.7.0rc1 - 0.7.2 | 0.4.9rc10.5.8rc10.6.0.11rc10.6.5rc10.7.3rc1 |

### References

* [Gentoo bug](https://bugs.gentoo.org/show_bug.cgi?id=462046)

## CVE-2013-2292

```
Date: 2013-01-30
Summary: A transaction that takes at least 3 minutes to verify
Fix Deployment: 0%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | All versions | No fix yet |

### References

* [CVE-2013-2292](/w/index.php?title=CVE-2013-2292&action=edit&redlink=1 "CVE-2013-2292 (page does not exist)")
* [Announcement](https://bitcointalk.org/?topic=140078)
* [Gentoo bug](https://bugs.gentoo.org/show_bug.cgi?id=462046)

## CVE-2013-2293

*Main article: [CVE-2013-2293](/wiki/CVE-2013-2293 "CVE-2013-2293")*
```
Date: 2013-02-14
Summary: Continuous hard disk seek
Fix Deployment: 99.99%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.7.3rc1 | No fix yet (0.8.0 unaffected) |

### References

* [CVE-2013-2293](/wiki/CVE-2013-2293 "CVE-2013-2293")
* [Announcement](https://bitcointalk.org/?topic=144122)
* [Gentoo bug](https://bugs.gentoo.org/show_bug.cgi?id=462046)

## CVE-2013-3219

```
Date: 2013-03-11
Summary: Unenforced block protocol rule
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | 0.8.0rc1 - 0.8.0 | 0.8.1 |

### References

* [BIP 50](/wiki/BIP_0050 "BIP 0050")

## CVE-2013-3220

```
Date: 2013-03-11
Summary: Inconsistent BDB lock limit interactions
Fix Deployment: 99.99%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.9rc10.5.0rc1 - 0.5.8rc10.6.0rc1 - 0.6.5rc10.7.0rc1 - 0.7.3rc1 | 0.4.9rc20.5.8rc20.6.5rc20.7.3rc2 |
| wxBitcoin | ALL | NONE |

### References

* [BIP 50](/wiki/BIP_0050 "BIP 0050")

## BIP-0034

```
Date: 2013-03-25
Summary: Mandatory block protocol update
Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.70.5.0rc1 - 0.5.70.6.0rc1 - 0.6.0.90.6.1rc1 - 0.6.3 | 0.4.8rc10.5.7rc10.6.0.10rc10.6.4rc1 |
| wxBitcoin | ALL | NONE |

### References

* [BIP 0034](/wiki/BIP_0034 "BIP 0034")

## BIP-0050

```
Date: 2013-05-15
Summary: Hard fork to remove txid limit protocol rule
Deployment: 99.99%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.9rc10.5.0rc1 - 0.5.8rc10.6.0rc1 - 0.6.5rc10.7.0rc1 - 0.7.3rc1 | 0.4.9rc20.5.8rc20.6.5rc20.7.3rc2 |
| wxBitcoin | ALL | NONE |

### References

* [BIP 0050](/wiki/BIP_0050 "BIP 0050")

## CVE-2013-4627

```
Date: 2013-06-??
Summary: Memory exhaustion with excess tx message data
Fix Deployment: 99.9%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.9rc30.5.0rc1 - 0.5.8rc30.6.0rc1 - 0.6.5rc30.7.0rc1 - 0.7.3rc30.8.0rc1 - 0.8.3 | 0.4.9rc40.5.8rc40.6.5rc40.7.3rc40.8.4 |
| wxBitcoin | ALL | NONE |

### References

## CVE-2013-4165

```
Date: 2013-07-20
Summary: Timing leak in RPC authentication
Fix Deployment: 99.9%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | \* - 0.4.9rc30.5.0rc1 - 0.5.8rc30.6.0rc1 - 0.6.5rc30.7.0rc1 - 0.7.3rc30.8.0rc1 - 0.8.3 | 0.4.9rc40.5.8rc40.6.5rc40.7.3rc40.8.4rc1 |
| wxBitcoin | ALL | NONE |

### References

* [Bitcoin-Qt 0.8.4 release notes](https://bitcointalk.org/index.php?topic=287351)
* [The initial bug report](https://github.com/bitcoin/bitcoin/issues/2838)

## CVE-2013-5700

```
Date: 2013-09-04
Summary: Remote p2p crash via bloom filters
Fix Deployment: 99.9%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | 0.8.0rc1 - 0.8.3 | 0.8.4rc1 |

### References

* [Bitcoin-Qt 0.8.4 release notes](https://bitcointalk.org/index.php?topic=287351)
* [The fix](https://github.com/bitcoin/bitcoin/commit/37c6389c5a0ca63ae3573440ecdfe95d28ad8f07)
* [An added test](https://github.com/bitcoin/bitcoin/pull/18515)

## CVE-2016-8889

```
Date: 2016-10-27
Summary: Debug console history storing sensitive info
Fix Deployment: 100%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin Knots GUI | 0.11.0 - 0.13.0 | 0.13.1 |

### References

* [Bitcoin Knots 0.16.1.knots20161027 release notes](https://github.com/bitcoinknots/bitcoin/blob/v0.13.1.knots20161027/doc/release-notes.md)
* [US-CERT/NIST](https://nvd.nist.gov/vuln/detail/CVE-2016-8889)

## CVE-2017-12842

```
Date: 2018-06-09
Summary: No commitment to block merkle tree depth

```
### References

* [Explanation by Sergio Demian Lerner](https://bitslog.wordpress.com/2018/06/09/leaf-node-weakness-in-bitcoin-merkle-tree-design/)
* [Further elaboration by Suhas Daftuar](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2019-February/016697.html)

## CVE-2017-18350

```
Date: 2019-06-22
Summary: Buffer overflow from SOCKS proxy

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | 0.7.0rc1 - 0.15.0 | 0.15.1rc1 |

### References

* [Disclosure of details](https://medium.com/%40lukedashjr/cve-2017-18350-disclosure-fe6d695f45d5)

## CVE-2018-17144

```
Date: 2018-09-17
Summary: Missing check for duplicate inputs
Fix Deployment: 31%

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | 0.14.0rc1 - 0.14.20.15.0rc1 - 0.15.10.16.0rc1 - 0.16.2 | 0.14.30.15.20.16.3 |

### References

* [Full disclosure by Bitcoin Core](https://bitcoincore.org/en/2018/09/20/notice/)
* [Bitcoin Core 0.16.3 release notes](https://bitcoincore.org/en/2018/09/18/release-0.16.3/)
* [Bitcoin Knots 0.16.3.knots20180918 release notes](https://github.com/bitcoinknots/bitcoin/blob/v0.16.3.knots20180918/doc/release-notes.md)
* [US-CERT/NIST](https://nvd.nist.gov/vuln/detail/CVE-2018-17144)
* [Gentoo bug](https://bugs.gentoo.org/show_bug.cgi?id=666669)

## CVE-2018-20586

```
Date: 2019-06-22
Summary: Debug log injection via unauthenticated RPC

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin-Qtbitcoind | 0.12.0rc1 - 0.17.0 | 0.17.1rc1 |

## CVE-2020-14199

```
Date: 2020-06-03
Summary: Double-signing can enable unintended fees

```

| Affected | | Fix |
| --- | --- | --- |
| Trezor One |  | 1.9.1 |
| Trezor Model T |  | 2.3.1 |
| ??? |

### References

* [Disclosure of details by Trezor team](https://blog.trezor.io/details-of-firmware-updates-for-trezor-one-version-1-9-1-and-trezor-model-t-version-2-3-1-1eba8f60f2dd)

## CVE-2020-26895

```
Date: 2020-10-08
Summary: Missing low-S normalization for HTLC signatures.

```

| Affected | | Fix |
| --- | --- | --- |
| lnd |  | 0.10.0 |

### References

* [CVE-2020-26895: LND Low-S Tx-Relay Standardness](https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-October/002858.html)
* [Full Disclosure: Full Disclosure: CVE-2020-26895 LND "Hodl my Shitsig"](https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-October/002856.html)

## CVE-2020-26896

```
Date: 2020-10-08
Summary: Invoice preimage extraction via forwarded HTLC.

```

| Affected | | Fix |
| --- | --- | --- |
| lnd |  | 0.11.0 |

### References

* [CVE-2020-26896: LND Invoice Preimage Extraction](https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-October/002857.html)
* [Full Disclosure: CVE-2020-26896 LND "The (un)covert channel"](https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-October/002855.html)

## CVE-2021-3401

```
Date: 2021-02-01
Summary: Qt5 remote execution

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin Core GUI |  | 0.19.0 |
| Bitcoin Knots GUI |  | 0.18.1 |

## CVE-2021-31876

```
Date: 2021-05-06

```
### References

* [Full Disclosure: CVE-2021-31876 Defect in Bitcoin Core's bip125 logic](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-May/018893.html)

### References

* [URI Argument Injection Vulnerability in Bitcoin Core 0.18 and Earlier](https://achow101.com/2021/02/0.18-uri-vuln)

## CVE-2023-50428

```
Date: 2023
Summary: Bypass of datacarriersize limit using OP_FALSE,OP_IF

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin Core | 0.9 and later | NOT FIXED |
| Bitcoin Knots | 0.9 - 23.0 | 25.1.knots20231115 |
| btcd | ? | NOT FIXED |
| libbitcoin | ? | NOT FIXED |

## CVE-2024-34149

```
Date: 2024-03-30
Summary: Script size limit not enforced for Tapscript

```

| Affected | | Fix |
| --- | --- | --- |
| Bitcoin Core | 0.21.1 and later | NOT FIXED |
| Bitcoin Knots | 0.21.1 - 23.0 | 25.1.knots20231115 |
| btcd | ? | ? |
| libbitcoin | ? | ? |

## Definitions

A critical vulnerability is one that will have disastrous consequences if it is exploited. A serious vulnerability is one that will have serious consequences if it is exploited[[1]](#cite_note-16).

## See Also

* [Changelog](/wiki/Changelog "Changelog")
* <https://blog.bitmex.com/bitcoins-consensus-forks/>

## References

1. [↑](#cite_ref-16) <http://bitcointalk.org/index.php?topic=88892.0>

| | [Bitcoin Core](/wiki/Bitcoin_Core "Bitcoin Core") documentation | | | --- | --- | |  | | User documentation | [Alert system](/wiki/Alert_system "Alert system") • [Bitcoin Core compatible devices](/wiki/Bitcoin_Core_compatible_devices "Bitcoin Core compatible devices") • [Data directory](/wiki/Data_directory "Data directory") • [Fallback Nodes](/wiki/Fallback_Nodes "Fallback Nodes") • [How to import private keys in Bitcoin Core 0.7+](/wiki/Help%3AHow_to_import_private_keys_in_Bitcoin_Core_0.7%2B "Help:How to import private keys in Bitcoin Core 0.7+") • [Installing Bitcoin Core](/wiki/Help%3AInstalling_Bitcoin_Core "Help:Installing Bitcoin Core") • [Running Bitcoin](/wiki/Running_Bitcoin "Running Bitcoin") • [Transaction fees](/wiki/Transaction_fees "Transaction fees") • [Vocabulary](/wiki/Vocabulary "Vocabulary") | |  | | Developer documentation | [Accounts explained](/wiki/Help%3AAccounts_explained "Help:Accounts explained") • [API calls list](/wiki/Original_Bitcoin_client/API_calls_list "Original Bitcoin client/API calls list") • [API reference (JSON-RPC)](/wiki/API_reference_%28JSON-RPC%29 "API reference (JSON-RPC)") • [Block chain download](/wiki/Block_chain_download "Block chain download") • [Dump format](/wiki/Dump_format "Dump format") • [getblocktemplate](/wiki/Getblocktemplate "Getblocktemplate") • [List of address prefixes](/wiki/List_of_address_prefixes "List of address prefixes") • [Protocol documentation](/wiki/Protocol_documentation "Protocol documentation") • [Script](/wiki/Script "Script") • [Technical background of version 1 Bitcoin addresses](/wiki/Technical_background_of_version_1_Bitcoin_addresses "Technical background of version 1 Bitcoin addresses") • [Testnet](/wiki/Testnet "Testnet") • [Transaction Malleability](/wiki/Transaction_Malleability "Transaction Malleability") • [Wallet import format](/wiki/Wallet_import_format "Wallet import format") | |  | | History & theory | Common Vulnerabilities and Exposures • [DOS/STONED incident](/wiki/DOS/STONED_incident "DOS/STONED incident") • [Economic majority](/wiki/Economic_majority "Economic majority") • [Full node](/wiki/Full_node "Full node") • [Original Bitcoin client](/wiki/Original_Bitcoin_client "Original Bitcoin client") • [Value overflow incident](/wiki/Value_overflow_incident "Value overflow incident") | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

Retrieved from "<https://en.bitcoin.it/w/index.php?title=Common_Vulnerabilities_and_Exposures&oldid=70310>"
[Categories](/wiki/Special%3ACategories "Special:Categories"):

* [Security](/wiki/Category%3ASecurity "Category:Security")
* [Bitcoin Core documentation](/wiki/Category%3ABitcoin_Core_documentation "Category:Bitcoin Core documentation")

## Navigation menu

### Personal tools

* [Create account](/w/index.php?title=Special:CreateAccount&returnto=Common+Vulnerabilities+and+Exposures "You are encouraged to create an account and log in; however, it is not mandatory")
* [Log in](/w/index.php?title=Special:UserLogin&returnto=Common+Vulnerabilities+and+Exposures "You are encouraged to log in; however, it is not mandatory [o]")

### Namespaces

* [Page](/wiki/Common_Vulnerabilities_and_Exposures "View the content page [c]")
* [Discussion](/wiki/Talk%3ACommon_Vulnerabilities_and_Exposures "Discussion about the content page [t]")

English

### Views

* [Read](/wiki/Common_Vulnerabilities_and_Exposures)
* [View source](/w/index.php?title=Common_Vulnerabilities_and_Exposures&action=edit "This page is protected.
  You can view its source [e]")
* [View history](/w/index.php?title=Common_Vulnerabilities_and_Exposures&action=history "Past revisions of this page [h]")

More

### Search

### Navigation

* [Main page](/wiki/Main_Page "Visit the main page [z]")
* [Bitcoin FAQ](/wiki/Help%3AFAQ)
* [Editing help](/wiki/Bitcoin_Wiki%3AHelp)
* [Forums](/wiki/Forums)
* [Chatrooms](/wiki/IRC_channels)
* [Recent changes](/wiki/Special%3ARecentChanges)
* [Page index](/wiki/Special%3AAllPages)

### Tools

* [What links here](/wiki/Special%3AWhatLinksHere/Common_Vulnerabilities_and_Exposures "A list of all wiki pages that link here [j]")
* [Related changes](/wiki/Special%3ARecentChangesLinked/Common_Vulnerabilities_and_Exposures "Recent changes in pages linked from this page [k]")
* [Special pages](/wiki/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/w/index.php?title=Common_Vulnerabilities_and_Exposures&oldid=70310 "Permanent link to this revision of this page")
* [Page information](/w/index.php?title=Common_Vulnerabilities_and_Exposures&action=info "More information about this page")

### Sister projects

* [Essays](/wiki/Bitcoin_Wiki%3AEssay_main_page)
* [Source](/wiki/Bitcoin_Wiki%3ASource_main_page)

* This page was last edited on 31 July 2024, at 17:40.
* Content is available under [Creative Commons Attribution 3.0](http://creativecommons.org/licenses/by/3.0/) unless otherwise noted.

* [Privacy policy](/wiki/Bitcoin_Wiki%3APrivacy_policy)
* [About Bitcoin Wiki](/wiki/Bitcoin_Wiki%3AAbout)
* [Disclaimers](/wiki/Bitcoin_Wiki%3AGeneral_disclaimer)

* [![Powered by MediaWiki](/w/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)



=== Content from bitcoincore.org_17f15254_20250119_142156.html ===


[![bitcoin core logo](/assets/images/bitcoin_core_logo_colored_reversed.png)](/)

* [About](/en/about/)
* [Download](/en/download)
* [blog](/en/blog/)
* [releases](/en/releases/)
* Development
  + [contribute](/en/contribute/)
  + [contributing code](/en/faq/contributing-code/)
  + [meetings](/en/meetings/)
  + [Lifecycle](/en/lifecycle)
  + [Security Advisories](/en/security-advisories/)
  + [RPC Docs](/en/doc/)
    - [28.0.0](/en/doc/28.0.0/)
    - [27.0.0](/en/doc/27.0.0/)
    - [26.0.0](/en/doc/26.0.0/)
    - [25.0.0](/en/doc/25.0.0/)
    - [24.0.0](/en/doc/24.0.0/)
    - [23.0.0](/en/doc/23.0.0/)
    - [22.0.0](/en/doc/22.0.0/)
    - [0.21.0](/en/doc/0.21.0/)
    - [0.20.0](/en/doc/0.20.0/)
    - [0.19.0](/en/doc/0.19.0/)
    - [0.18.0](/en/doc/0.18.0/)
    - [0.17.0](/en/doc/0.17.0/)
    - [0.16.3](/en/doc/0.16.3/)
    - [0.16.2](/en/doc/0.16.2/)
    - [0.16.1](/en/doc/0.16.1/)
    - [0.16.0](/en/doc/0.16.0/)
* Contact
  + [Contact Us](/en/contact/)
  + [Announcements](/en/list/announcements/join/)
  + [Twitter impersonation](/en/twitter-impersonation)
* English
  æ¥æ¬èª

# [Disclosure of CVE-2020-14198](/en/2024/07/03/disclose-unbounded-banlist/ "Disclosure of CVE-2020-14198")

by .

Bitcoin Core maintained an unlimited list of banned IP addresses and performed a quadratic operation
on it. This could lead to an OOM crash and a CPU Dos.

This issue is considered **High** severity.

## Details

Bitcoin Core maintained a list of banned IP addresses. This list was not bounded and could be
manipulated by an adversary. Adding new entries to this list was particularly cheap for an attacker
when considering IPV6. In addition, when receiving a `GETADDR` message, Bitcoin Core would scan the
entire ban list for every single address to be returned (up to 2500).

## Attribution

Calin Culianu first responsibly disclosed it. Calin later publicly disclosed the bug in [a PR
comment](https://github.com/bitcoin/bitcoin/pull/15617#issuecomment-640898523).

On the same day Jason Cox from Bitcoin ABC emailed the Bitcoin Core project to share this same
report they also received.

## Timeline

* 2020-06-08 Calin Culianu privately reports the bug to the Bitcoin Core project
* 2020-06-08 Jason Cox privately shares the (same) report sent to Bitcoin ABC with Bitcoin Core
* 2020-06-08 Calin Culianu publicly discloses the vulnerability on the original PR which introduced the quadratic behaviour
* 2020-06-09 Pieter Wuille opens PR [#19219](https://github.com/bitcoin/bitcoin/pull/19219) which fixes both the unbounded memory usage and the quadratic behaviour
* 2020-06-16 Luke Dashjr gets assigned CVE-2020-14198 for this vulnerability after his request
* 2020-07-07 Pieterâs PR is merged
* 2020-08-01 Bitcoin Core 0.20.1 is released with the fix
* 2021-01-14 Bitcoin Core 0.21.0 is released with the fix
* 2022-04-25 The last vulnerable Bitcoin Core version (0.20.0) goes EOL
* 2024-07-03 (Official) Public Disclosure

---

**Disclosure of CVE-2020-14198**
was published on
July 03, 2024

.

#### Recommended ([View all posts](/en/blog/))

* [Bitcoin Core 28.1 released](/en/2025/01/09/release-28.1/ "Bitcoin Core 28.1 released")
* [Bitcoin Core 27.2 released](/en/2024/11/04/release-27.2/ "Bitcoin Core 27.2 released")

---

[Twitter](https://twitter.com/bitcoincoreorg)

[Legal](/en/legal/) | [Privacy Policy](/en/legal/privacy) | [RSS ![rss feeds](/assets/images/rss-24x24.png)](/en/rss/)

![bitcoin core logo](/assets/images/bitcoin_core_logo.png)

© 2025 Bitcoin Core



=== Content from security.gentoo.org_b994d136_20250119_125240.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Bitcoin: Multiple vulnerabilities — GLSA **202009-18**

Multiple vulnerabilities have been found in Bitcoin, the worst of
which could result in a Denial of Service condition.

### Affected packages

| Package | **net-p2p/bitcoind** on all architectures |
| --- | --- |
| Affected versions | < **0.20.1** |
| Unaffected versions | >= **0.20.1** |

| Package | **net-p2p/bitcoin-qt** on all architectures |
| --- | --- |
| Affected versions | < **0.20.1** |
| Unaffected versions | >= **0.20.1** |

| Package | **net-p2p/bitcoin-cli** on all architectures |
| --- | --- |
| Affected versions | < **0.20.1** |
| Unaffected versions | >= **0.20.1** |

### Background

Bitcoin Core consists of both “full-node” software for fully
validating the blockchain as well as a bitcoin wallet.

### Description

Multiple vulnerabilities have been discovered in Bitcoin. Please review
the CVE identifiers referenced below for details.

### Impact

Please review the referenced CVE identifiers for details.

### Workaround

There is no known workaround at this time.

### Resolution

All bitcoind users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=net-p2p/bitcoind-0.20.1"

```

All bitcoin-qt users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=net-p2p/bitcoin-qt-0.20.1"

```

All bitcoin-cli users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=net-p2p/bitcoin-cli-0.20.1"

```
### References

* [CVE-2019-15947](https://nvd.nist.gov/vuln/detail/CVE-2019-15947)
* [CVE-2020-14198](https://nvd.nist.gov/vuln/detail/CVE-2020-14198)

**Release date**

September 30, 2020

**Latest revision**

September 30, 2020: 1

**Severity**

normal

**Exploitable**

remote

**Bugzilla entries**

* [711198](https://bugs.gentoo.org/show_bug.cgi?id=711198)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from github.com_af9f0fbe_20250119_125239.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbitcoin%2Fbitcoin%2Fcommits%2Fmaster)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbitcoin%2Fbitcoin%2Fcommits%2Fmaster)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fcommits%2Fshow&source=header-repo&source_repo=bitcoin%2Fbitcoin)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[bitcoin](/bitcoin)
/
**[bitcoin](/bitcoin/bitcoin)**
Public

* [Notifications](/login?return_to=%2Fbitcoin%2Fbitcoin) You must be signed in to change notification settings
* [Fork
  36.6k](/login?return_to=%2Fbitcoin%2Fbitcoin)
* [Star
   81.5k](/login?return_to=%2Fbitcoin%2Fbitcoin)

* [Code](/bitcoin/bitcoin)
* [Issues
  375](/bitcoin/bitcoin/issues)
* [Pull requests
  325](/bitcoin/bitcoin/pulls)
* [Actions](/bitcoin/bitcoin/actions)
* [Projects
  5](/bitcoin/bitcoin/projects)
* [Security](/bitcoin/bitcoin/security)
* [Insights](/bitcoin/bitcoin/pulse)

Additional navigation options

* [Code](/bitcoin/bitcoin)
* [Issues](/bitcoin/bitcoin/issues)
* [Pull requests](/bitcoin/bitcoin/pulls)
* [Actions](/bitcoin/bitcoin/actions)
* [Projects](/bitcoin/bitcoin/projects)
* [Security](/bitcoin/bitcoin/security)
* [Insights](/bitcoin/bitcoin/pulse)

# Commits

## Branch selector

 master
## User selector

All users
## Datepicker

All time
## Commit History

### Commits on Jan 17, 2025

* #### [Merge](/bitcoin/bitcoin/commit/89720b7a1b37af885f304350fa25f2479179ae3e "Merge bitcoin/bitcoin#31543: cmake: Always provide `RPATH` on NetBSD 11115e9aa845d675a88e18e729913f0aaa11e322 cmake: Always provide `RPATH` on NetBSD (Hennadii Stepanov) Pull request description: Apparently, runtime paths cannot be skipped on NetBSD, even for system-wide packages. On NetBSD 10.0: - on the master branch @ bb57017b2945d5e0bbd95c7f1a9369a8ab7c6fcd: ``` $ cmake -B build -DCMAKE_C_COMPILER=\"/usr/pkg/gcc14/bin/gcc\" -DCMAKE_CXX_COMPILER=\"/usr/pkg/gcc14/bin/g++\" $ cmake --build build $ ./build/src/bitcoin-wallet -version ./build/src/bitcoin-wallet: Shared object \"libsqlite3.so.0\" not found $ cmake --install build --prefix /home/hebasto/INSTALL $ /home/hebasto/INSTALL/bin/bitcoin-wallet -version /home/hebasto/INSTALL/bin/bitcoin-wallet: Shared object \"libsqlite3.so.0\" not found ``` - with this PR: ``` $ cmake -B build -DCMAKE_C_COMPILER=\"/usr/pkg/gcc14/bin/gcc\" -DCMAKE_CXX_COMPILER=\"/usr/pkg/gcc14/bin/g++\" $ cmake --build build $ ./build/src/bitcoin-wallet -version | head -1 Bitcoin Core bitcoin-wallet utility version v28.99.0-11115e9aa845 $ cmake --install build --prefix /home/hebasto/INSTALL $ /home/hebasto/INSTALL/bin/bitcoin-wallet -version | head -1 Bitcoin Core bitcoin-wallet utility version v28.99.0-11115e9aa845 ``` ACKs for top commit: theuni: utACK https://github.com/bitcoin/bitcoin/pull/31543/commits/11115e9aa845d675a88e18e729913f0aaa11e322 Tree-SHA512: c9cd5d8c65fcf12677c381060dd53794396b7cd3e61ec39d3c5dadd7cdc08ab9790c59aa346402d53f8f9f317830919edf7f8135a6c0d5703c3bd9e519b157a4") [#31543](https://github.com/bitcoin/bitcoin/pull/31543)[: cmake: Always provide](/bitcoin/bitcoin/commit/89720b7a1b37af885f304350fa25f2479179ae3e "Merge bitcoin/bitcoin#31543: cmake: Always provide `RPATH` on NetBSD 11115e9aa845d675a88e18e729913f0aaa11e322 cmake: Always provide `RPATH` on NetBSD (Hennadii Stepanov) Pull request description: Apparently, runtime paths cannot be skipped on NetBSD, even for system-wide packages. On NetBSD 10.0: - on the master branch @ bb57017b2945d5e0bbd95c7f1a9369a8ab7c6fcd: ``` $ cmake -B build -DCMAKE_C_COMPILER=\"/usr/pkg/gcc14/bin/gcc\" -DCMAKE_CXX_COMPILER=\"/usr/pkg/gcc14/bin/g++\" $ cmake --build build $ ./build/src/bitcoin-wallet -version ./build/src/bitcoin-wallet: Shared object \"libsqlite3.so.0\" not found $ cmake --install build --prefix /home/hebasto/INSTALL $ /home/hebasto/INSTALL/bin/bitcoin-wallet -version /home/hebasto/INSTALL/bin/bitcoin-wallet: Shared object \"libsqlite3.so.0\" not found ``` - with this PR: ``` $ cmake -B build -DCMAKE_C_COMPILER=\"/usr/pkg/gcc14/bin/gcc\" -DCMAKE_CXX_COMPILER=\"/usr/pkg/gcc14/bin/g++\" $ cmake --build build $ ./build/src/bitcoin-wallet -version | head -1 Bitcoin Core bitcoin-wallet utility version v28.99.0-11115e9aa845 $ cmake --install build --prefix /home/hebasto/INSTALL $ /home/hebasto/INSTALL/bin/bitcoin-wallet -version | head -1 Bitcoin Core bitcoin-wallet utility version v28.99.0-11115e9aa845 ``` ACKs for top commit: theuni: utACK https://github.com/bitcoin/bitcoin/pull/31543/commits/11115e9aa845d675a88e18e729913f0aaa11e322 Tree-SHA512: c9cd5d8c65fcf12677c381060dd53794396b7cd3e61ec39d3c5dadd7cdc08ab9790c59aa346402d53f8f9f317830919edf7f8135a6c0d5703c3bd9e519b157a4") `[RPATH](/bitcoin/bitcoin/commit/89720b7a1b37af885f304350fa25f2479179ae3e "Merge bitcoin/bitcoin#31543: cmake: Always provide `RPATH` on NetBSD 11115e9aa845d675a88e18e729913f0aaa11e322 cmake: Always provide `RPATH` on NetBSD (Hennadii Stepanov) Pull request description: Apparently, runtime paths cannot be skipped on NetBSD, even for system-wide packages. On NetBSD 10.0: - on the master branch @ bb57017b2945d5e0bbd95c7f1a9369a8ab7c6fcd: ``` $ cmake -B build -DCMAKE_C_COMPILER=\"/usr/pkg/gcc14/bin/gcc\" -DCMAKE_CXX_COMPILER=\"/usr/pkg/gcc14/bin/g++\" $ cmake --build build $ ./build/src/bitcoin-wallet -version ./build/src/bitcoin-wallet: Shared object \"libsqlite3.so.0\" not found $ cmake --install build --prefix /home/hebasto/INSTALL $ /home/hebasto/INSTALL/bin/bitcoin-wallet -version /home/hebasto/INSTALL/bin/bitcoin-wallet: Shared object \"libsqlite3.so.0\" not found ``` - with this PR: ``` $ cmake -B build -DCMAKE_C_COMPILER=\"/usr/pkg/gcc14/bin/gcc\" -DCMAKE_CXX_COMPILER=\"/usr/pkg/gcc14/bin/g++\" $ cmake --build build $ ./build/src/bitcoin-wallet -version | head -1 Bitcoin Core bitcoin-wallet utility version v28.99.0-11115e9aa845 $ cmake --install build --prefix /home/hebasto/INSTALL $ /home/hebasto/INSTALL/bin/bitcoin-wallet -version | head -1 Bitcoin Core bitcoin-wallet utility version v28.99.0-11115e9aa845 ``` ACKs for top commit: theuni: utACK https://github.com/bitcoin/bitcoin/pull/31543/commits/11115e9aa845d675a88e18e729913f0aaa11e322 Tree-SHA512: c9cd5d8c65fcf12677c381060dd53794396b7cd3e61ec39d3c5dadd7cdc08ab9790c59aa346402d53f8f9f317830919edf7f8135a6c0d5703c3bd9e519b157a4")` [on NetBSD](/bitcoin/bitcoin/commit/89720b7a1b37af885f304350fa25f2479179ae3e "Merge bitcoin/bitcoin#31543: cmake: Always provide `RPATH` on NetBSD 11115e9aa845d675a88e18e729913f0aaa11e322 cmake: Always provide `RPATH` on NetBSD (Hennadii Stepanov) Pull request description: Apparently, runtime paths cannot be skipped on NetBSD, even for system-wide packages. On NetBSD 10.0: - on the master branch @ bb57017b2945d5e0bbd95c7f1a9369a8ab7c6fcd: ``` $ cmake -B build -DCMAKE_C_COMPILER=\"/usr/pkg/gcc14/bin/gcc\" -DCMAKE_CXX_COMPILER=\"/usr/pkg/gcc14/bin/g++\" $ cmake --build build $ ./build/src/bitcoin-wallet -version ./build/src/bitcoin-wallet: Shared object \"libsqlite3.so.0\" not found $ cmake --install build --prefix /home/hebasto/INSTALL $ /home/hebasto/INSTALL/bin/bitcoin-wallet -version /home/hebasto/INSTALL/bin/bitcoin-wallet: Shared object \"libsqlite3.so.0\" not found ``` - with this PR: ``` $ cmake -B build -DCMAKE_C_COMPILER=\"/usr/pkg/gcc14/bin/gcc\" -DCMAKE_CXX_COMPILER=\"/usr/pkg/gcc14/bin/g++\" $ cmake --build build $ ./build/src/bitcoin-wallet -version | head -1 Bitcoin Core bitcoin-wallet utility version v28.99.0-11115e9aa845 $ cmake --install build --prefix /home/hebasto/INSTALL $ /home/hebasto/INSTALL/bin/bitcoin-wallet -version | head -1 Bitcoin Core bitcoin-wallet utility version v28.99.0-11115e9aa845 ``` ACKs for top commit: theuni: utACK https://github.com/bitcoin/bitcoin/pull/31543/commits/11115e9aa845d675a88e18e729913f0aaa11e322 Tree-SHA512: c9cd5d8c65fcf12677c381060dd53794396b7cd3e61ec39d3c5dadd7cdc08ab9790c59aa346402d53f8f9f317830919edf7f8135a6c0d5703c3bd9e519b157a4")

  Show description for 89720b7[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[89720b7](/bitcoin/bitcoin/commit/89720b7a1b37af885f304350fa25f2479179ae3e)Copy full SHA for 89720b7
* #### [Merge](/bitcoin/bitcoin/commit/5b3a81f44da6c401f7b7d897baa3511faba2d12a "Merge bitcoin/bitcoin#31626: depends: Use base system's `sha256sum` utility on FreeBSD 727c54276967e001f43831db83c790a1dec7a598 depends: Use base system's `sha256sum` utility (Hennadii Stepanov) Pull request description: On FreeBSD, the `shasum` utility is provided by the [`perl5`](https://ports.freebsd.org/cgi/ports.cgi?query=%5Eperl5&stype=all&sektion=all) port, which is not part of the base system and must be [installed](https://github.com/hebasto/bitcoin-core-nightly/blob/0e3518579a02e6c79bafc67817136220579a0d5c/.github/workflows/freebsd.yml#L104) separately. Note that this requirement is currently not documented in [`depends/README.md`](https://github.com/bitcoin/bitcoin/blob/master/depends/README.md). This PR switches to using the [`sha256sum`](https://man.freebsd.org/cgi/man.cgi?query=sha256sum&apropos=0&sektion=0&manpath=FreeBSD+14.2-RELEASE+and+Ports&arch=default&format=html) utility, which is included in the base system. ACKs for top commit: davidgumberg: ACK https://github.com/bitcoin/bitcoin/pull/31626/commits/727c54276967e001f43831db83c790a1dec7a598 Tree-SHA512: 41f11b80c2dc32514116400aa8ae57ef809edcbff5883dd62042d12ff14a54557864e2f1979c8705914242a2334880463da3e376f32c5b57a68fe41a90db1f85") [#31626](https://github.com/bitcoin/bitcoin/pull/31626)[: depends: Use base system's](/bitcoin/bitcoin/commit/5b3a81f44da6c401f7b7d897baa3511faba2d12a "Merge bitcoin/bitcoin#31626: depends: Use base system's `sha256sum` utility on FreeBSD 727c54276967e001f43831db83c790a1dec7a598 depends: Use base system's `sha256sum` utility (Hennadii Stepanov) Pull request description: On FreeBSD, the `shasum` utility is provided by the [`perl5`](https://ports.freebsd.org/cgi/ports.cgi?query=%5Eperl5&stype=all&sektion=all) port, which is not part of the base system and must be [installed](https://github.com/hebasto/bitcoin-core-nightly/blob/0e3518579a02e6c79bafc67817136220579a0d5c/.github/workflows/freebsd.yml#L104) separately. Note that this requirement is currently not documented in [`depends/README.md`](https://github.com/bitcoin/bitcoin/blob/master/depends/README.md). This PR switches to using the [`sha256sum`](https://man.freebsd.org/cgi/man.cgi?query=sha256sum&apropos=0&sektion=0&manpath=FreeBSD+14.2-RELEASE+and+Ports&arch=default&format=html) utility, which is included in the base system. ACKs for top commit: davidgumberg: ACK https://github.com/bitcoin/bitcoin/pull/31626/commits/727c54276967e001f43831db83c790a1dec7a598 Tree-SHA512: 41f11b80c2dc32514116400aa8ae57ef809edcbff5883dd62042d12ff14a54557864e2f1979c8705914242a2334880463da3e376f32c5b57a68fe41a90db1f85") `[sha256sum](/bitcoin/bitcoin/commit/5b3a81f44da6c401f7b7d897baa3511faba2d12a "Merge bitcoin/bitcoin#31626: depends: Use base system's `sha256sum` utility on FreeBSD 727c54276967e001f43831db83c790a1dec7a598 depends: Use base system's `sha256sum` utility (Hennadii Stepanov) Pull request description: On FreeBSD, the `shasum` utility is provided by the [`perl5`](https://ports.freebsd.org/cgi/ports.cgi?query=%5Eperl5&stype=all&sektion=all) port, which is not part of the base system and must be [installed](https://github.com/hebasto/bitcoin-core-nightly/blob/0e3518579a02e6c79bafc67817136220579a0d5c/.github/workflows/freebsd.yml#L104) separately. Note that this requirement is currently not documented in [`depends/README.md`](https://github.com/bitcoin/bitcoin/blob/master/depends/README.md). This PR switches to using the [`sha256sum`](https://man.freebsd.org/cgi/man.cgi?query=sha256sum&apropos=0&sektion=0&manpath=FreeBSD+14.2-RELEASE+and+Ports&arch=default&format=html) utility, which is included in the base system. ACKs for top commit: davidgumberg: ACK https://github.com/bitcoin/bitcoin/pull/31626/commits/727c54276967e001f43831db83c790a1dec7a598 Tree-SHA512: 41f11b80c2dc32514116400aa8ae57ef809edcbff5883dd62042d12ff14a54557864e2f1979c8705914242a2334880463da3e376f32c5b57a68fe41a90db1f85")` [utility on FreeBSD](/bitcoin/bitcoin/commit/5b3a81f44da6c401f7b7d897baa3511faba2d12a "Merge bitcoin/bitcoin#31626: depends: Use base system's `sha256sum` utility on FreeBSD 727c54276967e001f43831db83c790a1dec7a598 depends: Use base system's `sha256sum` utility (Hennadii Stepanov) Pull request description: On FreeBSD, the `shasum` utility is provided by the [`perl5`](https://ports.freebsd.org/cgi/ports.cgi?query=%5Eperl5&stype=all&sektion=all) port, which is not part of the base system and must be [installed](https://github.com/hebasto/bitcoin-core-nightly/blob/0e3518579a02e6c79bafc67817136220579a0d5c/.github/workflows/freebsd.yml#L104) separately. Note that this requirement is currently not documented in [`depends/README.md`](https://github.com/bitcoin/bitcoin/blob/master/depends/README.md). This PR switches to using the [`sha256sum`](https://man.freebsd.org/cgi/man.cgi?query=sha256sum&apropos=0&sektion=0&manpath=FreeBSD+14.2-RELEASE+and+Ports&arch=default&format=html) utility, which is included in the base system. ACKs for top commit: davidgumberg: ACK https://github.com/bitcoin/bitcoin/pull/31626/commits/727c54276967e001f43831db83c790a1dec7a598 Tree-SHA512: 41f11b80c2dc32514116400aa8ae57ef809edcbff5883dd62042d12ff14a54557864e2f1979c8705914242a2334880463da3e376f32c5b57a68fe41a90db1f85")

  Show description for 5b3a81f[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[5b3a81f](/bitcoin/bitcoin/commit/5b3a81f44da6c401f7b7d897baa3511faba2d12a)Copy full SHA for 5b3a81f
* #### [Merge](/bitcoin/bitcoin/commit/832d57307302e9d9b48ac3870ad5e207b39bb665 "Merge bitcoin/bitcoin#31651: ci: Turn CentOS task into native one fabefd9915802d53d8c83ae66e5cb259196d9422 ci: Turn CentOS task into native one (MarcoFalke) Pull request description: Cross-compiling to `i686-pc-linux-gnu` on CentOS in the CI is mostly redundant with the `ci/test/00_setup_env_i686_multiprocess.sh` task (albeit it using clang): https://github.com/bitcoin/bitcoin/blob/35bf426e02210c1bbb04926f4ca2e0285fbfcd11/ci/test/00_setup_env_i686_multiprocess.sh#L9-L12 One task seems sufficient as a sanity check, given that there seems to be no real demand for this architecture anyway. Turning the task into a native one makes it possible to run the task natively on aarch64 or any other supported architecture. Also, remove the install of the `lbzip2` package, which is unused since commit a46065e36cf868265c909dc5edf29dc17be53c1f Also, remove the `CONFIG_SHELL` env var, which is unused since the cmake migration. (`CONFIG_SHELL` in depends is still kept). ACKs for top commit: davidgumberg: ACK https://github.com/bitcoin/bitcoin/pull/31651/commits/fabefd9915802d53d8c83ae66e5cb259196d9422 hebasto: ACK fabefd9915802d53d8c83ae66e5cb259196d9422, tested locally on Ubuntu 24.10. Tree-SHA512: 5a7b3131b379d11ef602e5821165861e9bdf61d605014bf8fcb33b8e12d8823450798af2d3289b96f7559dfa47b839bf939ddc0b3725efecfeac7ae570a981e7") [#31651](https://github.com/bitcoin/bitcoin/pull/31651)[: ci: Turn CentOS task into native one](/bitcoin/bitcoin/commit/832d57307302e9d9b48ac3870ad5e207b39bb665 "Merge bitcoin/bitcoin#31651: ci: Turn CentOS task into native one fabefd9915802d53d8c83ae66e5cb259196d9422 ci: Turn CentOS task into native one (MarcoFalke) Pull request description: Cross-compiling to `i686-pc-linux-gnu` on CentOS in the CI is mostly redundant with the `ci/test/00_setup_env_i686_multiprocess.sh` task (albeit it using clang): https://github.com/bitcoin/bitcoin/blob/35bf426e02210c1bbb04926f4ca2e0285fbfcd11/ci/test/00_setup_env_i686_multiprocess.sh#L9-L12 One task seems sufficient as a sanity check, given that there seems to be no real demand for this architecture anyway. Turning the task into a native one makes it possible to run the task natively on aarch64 or any other supported architecture. Also, remove the install of the `lbzip2` package, which is unused since commit a46065e36cf868265c909dc5edf29dc17be53c1f Also, remove the `CONFIG_SHELL` env var, which is unused since the cmake migration. (`CONFIG_SHELL` in depends is still kept). ACKs for top commit: davidgumberg: ACK https://github.com/bitcoin/bitcoin/pull/31651/commits/fabefd9915802d53d8c83ae66e5cb259196d9422 hebasto: ACK fabefd9915802d53d8c83ae66e5cb259196d9422, tested locally on Ubuntu 24.10. Tree-SHA512: 5a7b3131b379d11ef602e5821165861e9bdf61d605014bf8fcb33b8e12d8823450798af2d3289b96f7559dfa47b839bf939ddc0b3725efecfeac7ae570a981e7")

  Show description for 832d573[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[832d573](/bitcoin/bitcoin/commit/832d57307302e9d9b48ac3870ad5e207b39bb665)Copy full SHA for 832d573
* #### [Merge](/bitcoin/bitcoin/commit/5ac1e0814aec2f7157f2574928405e85aa6d2243 "Merge bitcoin/bitcoin#31621: doc: Update dependency installation for Debian/Ubuntu 160c27ec078346fbf07f9b84dc10cef2b9809327 doc: Update dependency installation for Debian/Ubuntu and CI (Adlai Chandrasekhar) Pull request description: This is similar to the recently-pushed 8d20348 and results in slightly cleaner systems for future Debian/Ubuntu builds. According to the description for pkg-config, \"pkgconf is a replacement for pkg-config, providing additional functionality while also maintaining compatibility. This package only provides a dependency link to the pkgconf package to help with package upgrades. It can be safely removed.\" Thus the relevant sections of `doc/build-unix.md` and `depends/README.md` are updated. ACKs for top commit: maflcko: weak ACK 160c27ec078346fbf07f9b84dc10cef2b9809327 fanquake: ACK 160c27ec078346fbf07f9b84dc10cef2b9809327 - seems correct for modern distro versions, and using pkgconf on older ones also seems to work fine. Tree-SHA512: fadeffe464073df91b706e30f560bfe332ce676521cc5d2044d3bf499f08d986ccaab0a10dd1178f626a90bbac3a4f8c445fe4f8e3a63960721664a247b758f7") [#31621](https://github.com/bitcoin/bitcoin/pull/31621)[: doc: Update dependency installation for Debian/Ubuntu](/bitcoin/bitcoin/commit/5ac1e0814aec2f7157f2574928405e85aa6d2243 "Merge bitcoin/bitcoin#31621: doc: Update dependency installation for Debian/Ubuntu 160c27ec078346fbf07f9b84dc10cef2b9809327 doc: Update dependency installation for Debian/Ubuntu and CI (Adlai Chandrasekhar) Pull request description: This is similar to the recently-pushed 8d20348 and results in slightly cleaner systems for future Debian/Ubuntu builds. According to the description for pkg-config, \"pkgconf is a replacement for pkg-config, providing additional functionality while also maintaining compatibility. This package only provides a dependency link to the pkgconf package to help with package upgrades. It can be safely removed.\" Thus the relevant sections of `doc/build-unix.md` and `depends/README.md` are updated. ACKs for top commit: maflcko: weak ACK 160c27ec078346fbf07f9b84dc10cef2b9809327 fanquake: ACK 160c27ec078346fbf07f9b84dc10cef2b9809327 - seems correct for modern distro versions, and using pkgconf on older ones also seems to work fine. Tree-SHA512: fadeffe464073df91b706e30f560bfe332ce676521cc5d2044d3bf499f08d986ccaab0a10dd1178f626a90bbac3a4f8c445fe4f8e3a63960721664a247b758f7")

  Show description for 5ac1e08[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[5ac1e08](/bitcoin/bitcoin/commit/5ac1e0814aec2f7157f2574928405e85aa6d2243)Copy full SHA for 5ac1e08
* #### [Merge](/bitcoin/bitcoin/commit/370b9c1a0b91b504184a672ccb9aa738c4420dce "Merge bitcoin/bitcoin#31675: [test] fix p2p_orphan_handling.py empty orphanage check 2e75ebb6169da08b04c4769555c4c84d6b5ca0ec [test] fix p2p_orphan_handling.py empty orphanage check (glozow) Pull request description: Fix CI: https://cirrus-ci.com/task/4584274617171968?logs=ci#L2784 ACKs for top commit: maflcko: lgtm ACK 2e75ebb6169da08b04c4769555c4c84d6b5ca0ec instagibbs: ACK 2e75ebb6169da08b04c4769555c4c84d6b5ca0ec theStack: ACK 2e75ebb6169da08b04c4769555c4c84d6b5ca0ec Tree-SHA512: 7c5c4d1eb816368b2fdd8e090769ff586f69a9800a99ab99d42beda96c933b5c449dfece91b659d48e4c2d7dcaae0dde6441a294d33c991db3d85c15df0123b6") [#31675](https://github.com/bitcoin/bitcoin/pull/31675)[: [test] fix p2p\_orphan\_handling.py empty orphanage check](/bitcoin/bitcoin/commit/370b9c1a0b91b504184a672ccb9aa738c4420dce "Merge bitcoin/bitcoin#31675: [test] fix p2p_orphan_handling.py empty orphanage check 2e75ebb6169da08b04c4769555c4c84d6b5ca0ec [test] fix p2p_orphan_handling.py empty orphanage check (glozow) Pull request description: Fix CI: https://cirrus-ci.com/task/4584274617171968?logs=ci#L2784 ACKs for top commit: maflcko: lgtm ACK 2e75ebb6169da08b04c4769555c4c84d6b5ca0ec instagibbs: ACK 2e75ebb6169da08b04c4769555c4c84d6b5ca0ec theStack: ACK 2e75ebb6169da08b04c4769555c4c84d6b5ca0ec Tree-SHA512: 7c5c4d1eb816368b2fdd8e090769ff586f69a9800a99ab99d42beda96c933b5c449dfece91b659d48e4c2d7dcaae0dde6441a294d33c991db3d85c15df0123b6")

  Show description for 370b9c1[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[370b9c1](/bitcoin/bitcoin/commit/370b9c1a0b91b504184a672ccb9aa738c4420dce)Copy full SHA for 370b9c1
### Commits on Jan 16, 2025

* #### [[test] fix p2p\_orphan\_handling.py empty orphanage check](/bitcoin/bitcoin/commit/2e75ebb6169da08b04c4769555c4c84d6b5ca0ec "[test] fix p2p_orphan_handling.py empty orphanage check It's possible getorphantxs isn't empty immediately. Prevent intermittent errors.")

  Show description for 2e75ebb[![glozow](https://avatars.githubusercontent.com/u/25183001?v=4&size=32)](/glozow)[glozow](/bitcoin/bitcoin/commits?author=glozow)committed[2e75ebb](/bitcoin/bitcoin/commit/2e75ebb6169da08b04c4769555c4c84d6b5ca0ec)Copy full SHA for 2e75ebb
* #### [Merge](/bitcoin/bitcoin/commit/f9032a4abb74062051de7892916bcbe46d377a13 "Merge bitcoin/bitcoin#31242: wallet, desc spkm: Return SigningProvider only if we have the privkey f6a6d912059c66792f48689632d2a7f14f8bdad9 test: add check for getting SigningProvider for a CPubKey (Sebastian Falbesoner) 62a95f5af9b998e241eb72c16ba581e77c480126 test: refactor: move `CreateDescriptor` helper to wallet test util module (Sebastian Falbesoner) 493656763f73e5ef1cfb979a513c12983dca99dd desc spkm: Return SigningProvider only if we have the privkey (Ava Chow) Pull request description: If we know about a pubkey that's in our descriptor, but we don't have the private key, don't return a SigningProvider for that pubkey. This is specifically an issue for Taproot outputs that use the H point as the resulting PSBTs may end up containing irrelevant information because the H point was detected as a pubkey each unrelated descriptor knew about. Split from #29675 ACKs for top commit: fjahr: ACK f6a6d912059c66792f48689632d2a7f14f8bdad9 theStack: re-ACK f6a6d912059c66792f48689632d2a7f14f8bdad9 furszy: utACK f6a6d912059. Only reviewed the actual change in detail, not the test commit. Tree-SHA512: 30a196e611a0c5d9ebe5baf6d896caaa6af66f1615463dbb0c31e52604d53cf342922bb9967b3c697b47083d76b0485c77a5f545bd6381247c8bc44321c70f97") [#31242](https://github.com/bitcoin/bitcoin/pull/31242)[: wallet, desc spkm: Return SigningProvider only if we have the privkey](/bitcoin/bitcoin/commit/f9032a4abb74062051de7892916bcbe46d377a13 "Merge bitcoin/bitcoin#31242: wallet, desc spkm: Return SigningProvider only if we have the privkey f6a6d912059c66792f48689632d2a7f14f8bdad9 test: add check for getting SigningProvider for a CPubKey (Sebastian Falbesoner) 62a95f5af9b998e241eb72c16ba581e77c480126 test: refactor: move `CreateDescriptor` helper to wallet test util module (Sebastian Falbesoner) 493656763f73e5ef1cfb979a513c12983dca99dd desc spkm: Return SigningProvider only if we have the privkey (Ava Chow) Pull request description: If we know about a pubkey that's in our descriptor, but we don't have the private key, don't return a SigningProvider for that pubkey. This is specifically an issue for Taproot outputs that use the H point as the resulting PSBTs may end up containing irrelevant information because the H point was detected as a pubkey each unrelated descriptor knew about. Split from #29675 ACKs for top commit: fjahr: ACK f6a6d912059c66792f48689632d2a7f14f8bdad9 theStack: re-ACK f6a6d912059c66792f48689632d2a7f14f8bdad9 furszy: utACK f6a6d912059. Only reviewed the actual change in detail, not the test commit. Tree-SHA512: 30a196e611a0c5d9ebe5baf6d896caaa6af66f1615463dbb0c31e52604d53cf342922bb9967b3c697b47083d76b0485c77a5f545bd6381247c8bc44321c70f97")

  Show description for f9032a4[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[f9032a4](/bitcoin/bitcoin/commit/f9032a4abb74062051de7892916bcbe46d377a13)Copy full SHA for f9032a4
* #### [Merge](/bitcoin/bitcoin/commit/9dc4eedb670bda568d4c3bbe6ce99f9d1188d49e "Merge bitcoin/bitcoin#31673: doc: fix minor typos in comments b30cc71e853cbaaec66e7e23d7d1a32468079ee0 doc: fix typos (Adlai Chandrasekhar) Pull request description: In the unrelated PR #31621 the linter reported a few typos, that are fixed in this commit. I used the \"doc\" prefix as it only modifies comments, so none of the more significant prefixes seem appropriate. ACKs for top commit: maflcko: lgtm ACK b30cc71e853cbaaec66e7e23d7d1a32468079ee0 Tree-SHA512: 7bba2d928fc0b98f62f96d9abf6dba98f699b386b75730271fa3e7b57a8a220df2265b699007f066e585e1db2ee3cbe5a272b74a8c153f6f8814c01e6de7a3ee") [#31673](https://github.com/bitcoin/bitcoin/pull/31673)[: doc: fix minor typos in comments](/bitcoin/bitcoin/commit/9dc4eedb670bda568d4c3bbe6ce99f9d1188d49e "Merge bitcoin/bitcoin#31673: doc: fix minor typos in comments b30cc71e853cbaaec66e7e23d7d1a32468079ee0 doc: fix typos (Adlai Chandrasekhar) Pull request description: In the unrelated PR #31621 the linter reported a few typos, that are fixed in this commit. I used the \"doc\" prefix as it only modifies comments, so none of the more significant prefixes seem appropriate. ACKs for top commit: maflcko: lgtm ACK b30cc71e853cbaaec66e7e23d7d1a32468079ee0 Tree-SHA512: 7bba2d928fc0b98f62f96d9abf6dba98f699b386b75730271fa3e7b57a8a220df2265b699007f066e585e1db2ee3cbe5a272b74a8c153f6f8814c01e6de7a3ee")

  Show description for 9dc4eed[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[9dc4eed](/bitcoin/bitcoin/commit/9dc4eedb670bda568d4c3bbe6ce99f9d1188d49e)Copy full SHA for 9dc4eed
* #### [doc: fix typos](/bitcoin/bitcoin/commit/b30cc71e853cbaaec66e7e23d7d1a32468079ee0 "doc: fix typos")

  [![adlai](https://avatars.githubusercontent.com/u/94171?v=4&size=32)](/adlai)[adlai](/bitcoin/bitcoin/commits?author=adlai)committed[b30cc71](/bitcoin/bitcoin/commit/b30cc71e853cbaaec66e7e23d7d1a32468079ee0)Copy full SHA for b30cc71
* #### [doc: Update dependency installation for Debian/Ubuntu and CI](/bitcoin/bitcoin/commit/160c27ec078346fbf07f9b84dc10cef2b9809327 "doc: Update dependency installation for Debian/Ubuntu and CI According to the description for pkg-config, \"pkgconf is a replacement for pkg-config, providing additional functionality while also maintaining compatibility. This package only provides a dependency link to the pkgconf package to help with package upgrades. It can be safely removed.\" Thus several scripts and markdown files are updated.")

  Show description for 160c27e[![adlai](https://avatars.githubusercontent.com/u/94171?v=4&size=32)](/adlai)[adlai](/bitcoin/bitcoin/commits?author=adlai)committed[160c27e](/bitcoin/bitcoin/commit/160c27ec078346fbf07f9b84dc10cef2b9809327)Copy full SHA for 160c27e
* #### [Merge](/bitcoin/bitcoin/commit/df8bf657450d5383870d40790ea9f4fdb03c360d "Merge bitcoin/bitcoin#31483: kernel: Move kernel-related cache constants to kernel cache 2a92702bafca5c78b270a9502a22cb9deac02cfc init: Use size_t consistently for cache sizes (TheCharlatan) 65cde3621dbb9ac7d210d4926e7601c4adf5f498 kernel: Move default cache constants to caches (TheCharlatan) 8826cae285490439dc1f19b25fa70b2b9e62dfe8 kernel: Move non-kernel db cache size constants (TheCharlatan) e758b26b85da27ef44f3d2c924f3f08e8c1f4fdf kernel: Move kernel-specific cache size options to kernel (TheCharlatan) d5e2c4a4097c799433cfc5367c61568fad2c784e fuzz: Add fuzz test for checked and saturating add and left shift (TheCharlatan) c03a2795a8e044d17835bbf03de0c64dc7b41da8 util: Add integer left shift helpers (TheCharlatan) 8bd5f8a38ce903c05606841ebed1902398cb0b14 [refactor] init: Simplify coinsdb cache calculation (TheCharlatan) 5db7d4d3d28bd1269a09955b4695135c86c4827d doc: Correct docstring describing max block tree db cache (TheCharlatan) Pull request description: Carrying non-kernel related fields in the cache sizes for the indexes is confusing for kernel library users. The cache sizes are set currently with magic numbers in bitcoin-chainstate. The comments for the cache size calculations are not completely clear. The constants for the cache sizes are also currently in `txdb.h`, which is not an ideal place for holding all cache size related constants. Solve these things by moving the kernel-specific cache size fields to their own struct and moving the constants to either the node or the kernel cache sizes. This slightly changes the way the cache is allocated if (and only if) the txindex and/or blockfilterindex is used. Since they are now given precedence over the block tree db cache, this results in a bit less cache being allocated to the block tree db, coinsdb and coins caches. The effect is negligible though, i.e. cache sizes with default dbcache reported through the logs are: master: ``` Cache configuration: * Using 2.0 MiB for block index database * Using 56.0 MiB for transaction index database * Using 49.0 MiB for basic block filter index database * Using 8.0 MiB for chain state database * Using 335.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space) ``` this PR: ``` Cache configuration: * Using 2.0 MiB for block index database * Using 56.2 MiB for transaction index database * Using 49.2 MiB for basic block filter index database * Using 8.0 MiB for chain state database * Using 334.5 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space) ``` --- This PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587). ACKs for top commit: stickies-v: re-ACK 2a92702bafca5c78b270a9502a22cb9deac02cfc ryanofsky: Code review ACK 2a92702bafca5c78b270a9502a22cb9deac02cfc. Changes since last review are fixing size options to use size_t instead of int64_t again, simplifying CheckedLeftShift more, and making other minor suggested cleanups hodlinator: re-ACK 2a92702bafca5c78b270a9502a22cb9deac02cfc Tree-SHA512: 98376eaa0660b1b8c096a5ce1f3e7c8c30e7cd6644de36856c2d3e573108cfc9473c93ebb3952b7881047b5ae6c85c5b096e6726f30f35be58b98eca07c8c785") [#31483](https://github.com/bitcoin/bitcoin/pull/31483)[: kernel: Move kernel-related cache constants to kernel cache](/bitcoin/bitcoin/commit/df8bf657450d5383870d40790ea9f4fdb03c360d "Merge bitcoin/bitcoin#31483: kernel: Move kernel-related cache constants to kernel cache 2a92702bafca5c78b270a9502a22cb9deac02cfc init: Use size_t consistently for cache sizes (TheCharlatan) 65cde3621dbb9ac7d210d4926e7601c4adf5f498 kernel: Move default cache constants to caches (TheCharlatan) 8826cae285490439dc1f19b25fa70b2b9e62dfe8 kernel: Move non-kernel db cache size constants (TheCharlatan) e758b26b85da27ef44f3d2c924f3f08e8c1f4fdf kernel: Move kernel-specific cache size options to kernel (TheCharlatan) d5e2c4a4097c799433cfc5367c61568fad2c784e fuzz: Add fuzz test for checked and saturating add and left shift (TheCharlatan) c03a2795a8e044d17835bbf03de0c64dc7b41da8 util: Add integer left shift helpers (TheCharlatan) 8bd5f8a38ce903c05606841ebed1902398cb0b14 [refactor] init: Simplify coinsdb cache calculation (TheCharlatan) 5db7d4d3d28bd1269a09955b4695135c86c4827d doc: Correct docstring describing max block tree db cache (TheCharlatan) Pull request description: Carrying non-kernel related fields in the cache sizes for the indexes is confusing for kernel library users. The cache sizes are set currently with magic numbers in bitcoin-chainstate. The comments for the cache size calculations are not completely clear. The constants for the cache sizes are also currently in `txdb.h`, which is not an ideal place for holding all cache size related constants. Solve these things by moving the kernel-specific cache size fields to their own struct and moving the constants to either the node or the kernel cache sizes. This slightly changes the way the cache is allocated if (and only if) the txindex and/or blockfilterindex is used. Since they are now given precedence over the block tree db cache, this results in a bit less cache being allocated to the block tree db, coinsdb and coins caches. The effect is negligible though, i.e. cache sizes with default dbcache reported through the logs are: master: ``` Cache configuration: * Using 2.0 MiB for block index database * Using 56.0 MiB for transaction index database * Using 49.0 MiB for basic block filter index database * Using 8.0 MiB for chain state database * Using 335.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space) ``` this PR: ``` Cache configuration: * Using 2.0 MiB for block index database * Using 56.2 MiB for transaction index database * Using 49.2 MiB for basic block filter index database * Using 8.0 MiB for chain state database * Using 334.5 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space) ``` --- This PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587). ACKs for top commit: stickies-v: re-ACK 2a92702bafca5c78b270a9502a22cb9deac02cfc ryanofsky: Code review ACK 2a92702bafca5c78b270a9502a22cb9deac02cfc. Changes since last review are fixing size options to use size_t instead of int64_t again, simplifying CheckedLeftShift more, and making other minor suggested cleanups hodlinator: re-ACK 2a92702bafca5c78b270a9502a22cb9deac02cfc Tree-SHA512: 98376eaa0660b1b8c096a5ce1f3e7c8c30e7cd6644de36856c2d3e573108cfc9473c93ebb3952b7881047b5ae6c85c5b096e6726f30f35be58b98eca07c8c785")

  Show description for df8bf65[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[df8bf65](/bitcoin/bitcoin/commit/df8bf657450d5383870d40790ea9f4fdb03c360d)Copy full SHA for df8bf65
* #### [Merge](/bitcoin/bitcoin/commit/335798c496371b7e12a7e159312a4377a858cfc3 "Merge bitcoin/bitcoin#31397: p2p: track and use all potential peers for orphan resolution 86d7135e36efd39781cf4c969011df99f0cbb69d [p2p] only attempt 1p1c when both txns provided by the same peer (glozow) f7658d9b1475ecaa5cb8e543e5c66a3a3a2dc1fb [cleanup] remove p2p_inv from AddTxAnnouncement (glozow) 063c1324c143d98e6d5108bb51b3ca59b45f9b85 [functional test] getorphantxs reflects multiple announcers (glozow) 0da693f7e129fccaecf9a2c177083d2e80d37781 [functional test] orphan handling with multiple announcers (glozow) b6ea4a9afe2d8bbf49b6b6c42f0a3ce4390c4535 [p2p] try multiple peers for orphan resolution (glozow) 1d2e1d709ce3d95d409254c860347bc3fedf30e1 [refactor] move creation of unique_parents to helper function (glozow) c6893b0f0b7b205c8da4b9d281a55c9eb843b582 [txdownload] remove unique_parents that we already have (glozow) 163aaf285af91b49c2d788463dc1e1654c88ade6 [fuzz] orphanage multiple announcer functions (glozow) 22b023b09da3e2fe00467c77b105a61c1961081f [unit test] multiple orphan announcers (glozow) 96c1a822a274689611f409246ef1573906b0083e [unit test] TxOrphanage EraseForBlock (glozow) 04448ce32a3bc4b6d12293f71e40333abe35c224 [txorphanage] add GetTx so that orphan vin can be read (glozow) e810842acda6fe56e0536ebecfbb9d17d26e1513 [txorphanage] support multiple announcers (glozow) 62a9ff187076686b39dca64ad4f2f439da0875d1 [refactor] change type of unique_parents to Txid (glozow) 6951ddcefd9e05f31ee7634bbfbf1d19e04ec00e [txrequest] GetCandidatePeers (glozow) Pull request description: Part of #27463. (Transaction) **orphan resolution** is a process that kicks off when we are missing UTXOs to validate an unconfirmed transaction. We currently request missing parents by txid; BIP 331 also defines a way to [explicitly request ancestors](https://github.com/bitcoin/bips/blob/master/bip-0331.mediawiki#handle-orphans-better). Currently, when we find that a transaction is an orphan, we only try to resolve it with the peer who provided the `tx`. If this doesn't work out (e.g. they send a `notfound` or don't respond), we do not try again. We actually can't, because we've already forgotten who else could resolve this orphan (i.e. all the other peers who announced the transaction). What is wrong with this? It makes transaction download less reliable, particularly for 1p1c packages which must go through orphan resolution in order to be downloaded. Can we fix this with BIP 331 / is this \"duct tape\" before the real solution? BIP 331 (receiver-initiated ancestor package relay) is also based on the idea that there is an orphan that needs resolution, but it's just a new way of communicating information. It's not inherently more honest; you can request ancestor package information and get a `notfound`. So ancestor package relay still requires some kind of procedure for retrying when an orphan resolution attempt fails. See the #27742 implementation which builds on this orphan resolution tracker to keep track of what packages to download (it just isn't rebased on this exact branch). The difference when using BIP 331 is that we request `ancpkginfo` and then `pkgtxns` instead of the parent txids. Zooming out, we'd like orphan handling to be: - Bandwidth-efficient: don't have too many requests out at once. As already implemented today, transaction requests for orphan parents and regular download both go through the `TxRequestTracker` so that we don't have duplicate requests out. - Not vulnerable to censorship: don't give up too easily, use all candidate peers. See e.g. https://bitcoincore.org/en/2024/07/03/disclose_already_asked_for/ - Load-balance between peers: don't overload peers; use all peers available. This is also useful for when we introduce per-peer orphan protection, since each peer will have limited slots. The approach taken in this PR is to think of each peer who announces an orphan as a potential \"orphan resolution candidate.\" These candidates include: - the peer who sent us the orphan tx - any peers who announced the orphan prior to us downloading it - any peers who subsequently announce the orphan after we have started trying to resolve it For each orphan resolution candidate, we treat them as having \"announced\" all of the missing parents to us at the time of receipt of this orphan transaction (or at the time they announced the tx if they do so after we've already started tracking it as an orphan). We add the missing parents as entries to `m_txrequest`, incorporating the logic of typical txrequest processing, which means we prefer outbounds, try not to have duplicate requests in flight, don't overload peers, etc. ACKs for top commit: marcofleon: Code review ACK 86d7135e36efd39781cf4c969011df99f0cbb69d instagibbs: reACK 86d7135e36efd39781cf4c969011df99f0cbb69d dergoegge: Code review ACK 86d7135e36efd39781cf4c969011df99f0cbb69d mzumsande: ACK 86d7135e36efd39781cf4c969011df99f0cbb69d Tree-SHA512: 618d523b86e60c3ea039e88326d50db4e55e8e18309c6a20e8f2b10ed9e076f1de0315c335fd3b8abdabcc8b53cbceb66fb59147d05470ea25b83a2b4bd9c877") [#31397](https://github.com/bitcoin/bitcoin/pull/31397)[: p2p: track and use all potential peers for orphan resolution](/bitcoin/bitcoin/commit/335798c496371b7e12a7e159312a4377a858cfc3 "Merge bitcoin/bitcoin#31397: p2p: track and use all potential peers for orphan resolution 86d7135e36efd39781cf4c969011df99f0cbb69d [p2p] only attempt 1p1c when both txns provided by the same peer (glozow) f7658d9b1475ecaa5cb8e543e5c66a3a3a2dc1fb [cleanup] remove p2p_inv from AddTxAnnouncement (glozow) 063c1324c143d98e6d5108bb51b3ca59b45f9b85 [functional test] getorphantxs reflects multiple announcers (glozow) 0da693f7e129fccaecf9a2c177083d2e80d37781 [functional test] orphan handling with multiple announcers (glozow) b6ea4a9afe2d8bbf49b6b6c42f0a3ce4390c4535 [p2p] try multiple peers for orphan resolution (glozow) 1d2e1d709ce3d95d409254c860347bc3fedf30e1 [refactor] move creation of unique_parents to helper function (glozow) c6893b0f0b7b205c8da4b9d281a55c9eb843b582 [txdownload] remove unique_parents that we already have (glozow) 163aaf285af91b49c2d788463dc1e1654c88ade6 [fuzz] orphanage multiple announcer functions (glozow) 22b023b09da3e2fe00467c77b105a61c1961081f [unit test] multiple orphan announcers (glozow) 96c1a822a274689611f409246ef1573906b0083e [unit test] TxOrphanage EraseForBlock (glozow) 04448ce32a3bc4b6d12293f71e40333abe35c224 [txorphanage] add GetTx so that orphan vin can be read (glozow) e810842acda6fe56e0536ebecfbb9d17d26e1513 [txorphanage] support multiple announcers (glozow) 62a9ff187076686b39dca64ad4f2f439da0875d1 [refactor] change type of unique_parents to Txid (glozow) 6951ddcefd9e05f31ee7634bbfbf1d19e04ec00e [txrequest] GetCandidatePeers (glozow) Pull request description: Part of #27463. (Transaction) **orphan resolution** is a process that kicks off when we are missing UTXOs to validate an unconfirmed transaction. We currently request missing parents by txid; BIP 331 also defines a way to [explicitly request ancestors](https://github.com/bitcoin/bips/blob/master/bip-0331.mediawiki#handle-orphans-better). Currently, when we find that a transaction is an orphan, we only try to resolve it with the peer who provided the `tx`. If this doesn't work out (e.g. they send a `notfound` or don't respond), we do not try again. We actually can't, because we've already forgotten who else could resolve this orphan (i.e. all the other peers who announced the transaction). What is wrong with this? It makes transaction download less reliable, particularly for 1p1c packages which must go through orphan resolution in order to be downloaded. Can we fix this with BIP 331 / is this \"duct tape\" before the real solution? BIP 331 (receiver-initiated ancestor package relay) is also based on the idea that there is an orphan that needs resolution, but it's just a new way of communicating information. It's not inherently more honest; you can request ancestor package information and get a `notfound`. So ancestor package relay still requires some kind of procedure for retrying when an orphan resolution attempt fails. See the #27742 implementation which builds on this orphan resolution tracker to keep track of what packages to download (it just isn't rebased on this exact branch). The difference when using BIP 331 is that we request `ancpkginfo` and then `pkgtxns` instead of the parent txids. Zooming out, we'd like orphan handling to be: - Bandwidth-efficient: don't have too many requests out at once. As already implemented today, transaction requests for orphan parents and regular download both go through the `TxRequestTracker` so that we don't have duplicate requests out. - Not vulnerable to censorship: don't give up too easily, use all candidate peers. See e.g. https://bitcoincore.org/en/2024/07/03/disclose_already_asked_for/ - Load-balance between peers: don't overload peers; use all peers available. This is also useful for when we introduce per-peer orphan protection, since each peer will have limited slots. The approach taken in this PR is to think of each peer who announces an orphan as a potential \"orphan resolution candidate.\" These candidates include: - the peer who sent us the orphan tx - any peers who announced the orphan prior to us downloading it - any peers who subsequently announce the orphan after we have started trying to resolve it For each orphan resolution candidate, we treat them as having \"announced\" all of the missing parents to us at the time of receipt of this orphan transaction (or at the time they announced the tx if they do so after we've already started tracking it as an orphan). We add the missing parents as entries to `m_txrequest`, incorporating the logic of typical txrequest processing, which means we prefer outbounds, try not to have duplicate requests in flight, don't overload peers, etc. ACKs for top commit: marcofleon: Code review ACK 86d7135e36efd39781cf4c969011df99f0cbb69d instagibbs: reACK 86d7135e36efd39781cf4c969011df99f0cbb69d dergoegge: Code review ACK 86d7135e36efd39781cf4c969011df99f0cbb69d mzumsande: ACK 86d7135e36efd39781cf4c969011df99f0cbb69d Tree-SHA512: 618d523b86e60c3ea039e88326d50db4e55e8e18309c6a20e8f2b10ed9e076f1de0315c335fd3b8abdabcc8b53cbceb66fb59147d05470ea25b83a2b4bd9c877")

  Show description for 335798c[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[335798c](/bitcoin/bitcoin/commit/335798c496371b7e12a7e159312a4377a858cfc3)Copy full SHA for 335798c
* #### [Merge](/bitcoin/bitcoin/commit/98939ce7b7441cc95b8fda4d502f182aab1d6a32 "Merge bitcoin/bitcoin#31655: refactor: Avoid UB in SHA3_256::Write fabeca3458b38a3d8930cb0cbc866388c3f120f1 refactor: Avoid UB in SHA3_256::Write (MarcoFalke) fad4032b219e58300f8d0a74bbcf38ef26fa89d0 refactor: Drop unused UCharCast (MarcoFalke) Pull request description: It is UB to apply a distance to a pointer or iterator further than the end itself, even if the distance is (partially) revoked later on. Fix the issue by advancing the data pointer at most to the end. This fix is required to adopt C++ safe buffers https://github.com/bitcoin/bitcoin/issues/31272. Also included is a somewhat unrelated commit. ACKs for top commit: sipa: utACK fabeca3458b38a3d8930cb0cbc866388c3f120f1 theuni: utACK fabeca3458b38a3d8930cb0cbc866388c3f120f1 hebasto: ACK fabeca3458b38a3d8930cb0cbc866388c3f120f1. Tree-SHA512: 78c53691322b72c3ba9c25ec94eec275dbbbc3049b0ad45e7d9fb2df0afbbaa905b0d8fa7106a3582f937bb1dc15a7592c4ad2d80fe4cff1062a3acfd3638f08") [#31655](https://github.com/bitcoin/bitcoin/pull/31655)[: refactor: Avoid UB in SHA3\_256::Write](/bitcoin/bitcoin/commit/98939ce7b7441cc95b8fda4d502f182aab1d6a32 "Merge bitcoin/bitcoin#31655: refactor: Avoid UB in SHA3_256::Write fabeca3458b38a3d8930cb0cbc866388c3f120f1 refactor: Avoid UB in SHA3_256::Write (MarcoFalke) fad4032b219e58300f8d0a74bbcf38ef26fa89d0 refactor: Drop unused UCharCast (MarcoFalke) Pull request description: It is UB to apply a distance to a pointer or iterator further than the end itself, even if the distance is (partially) revoked later on. Fix the issue by advancing the data pointer at most to the end. This fix is required to adopt C++ safe buffers https://github.com/bitcoin/bitcoin/issues/31272. Also included is a somewhat unrelated commit. ACKs for top commit: sipa: utACK fabeca3458b38a3d8930cb0cbc866388c3f120f1 theuni: utACK fabeca3458b38a3d8930cb0cbc866388c3f120f1 hebasto: ACK fabeca3458b38a3d8930cb0cbc866388c3f120f1. Tree-SHA512: 78c53691322b72c3ba9c25ec94eec275dbbbc3049b0ad45e7d9fb2df0afbbaa905b0d8fa7106a3582f937bb1dc15a7592c4ad2d80fe4cff1062a3acfd3638f08")

  Show description for 98939ce[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[98939ce](/bitcoin/bitcoin/commit/98939ce7b7441cc95b8fda4d502f182aab1d6a32)Copy full SHA for 98939ce
### Commits on Jan 15, 2025

* #### [Merge](/bitcoin/bitcoin/commit/712cab3a8f8ad76db959337ddc35cb4c34cac388 "Merge bitcoin/bitcoin#31061: refactor: Check translatable format strings at compile-time fa3efb5729091a36a0e82316e9e4b7c09115dc2e refactor: Introduce struct to hold a runtime format string (MarcoFalke) fa6adb0134408d9a5cb623a41f057d3807e2b006 lint: Remove unused and broken format string linter (MarcoFalke) fadc6b9bac82e99a422d72935a74f3a5444274ed refactor: Check translatable format strings at compile-time (MarcoFalke) fa1d5acb8d8e1842797604fbd1e7c69f6acdb6c7 refactor: Use TranslateFn type consistently (MarcoFalke) eeee6cf2ffb24d930fc2fe77912788abf685cd4b refactor: Delay translation of _() literals (MarcoFalke) Pull request description: All translatable format strings are fixed. This change surfaces errors in them at compile-time. The implementation achieves this by allowing to delay the translation (or `std::string` construction) that previously happened in `_()` by returning a new type from this function. The new type can be converted to `bilingual_str` where needed. This can be tested by adding a format string error in an original string literal and observing a new compile-time failure. Fixes https://github.com/bitcoin/bitcoin/issues/30530 ACKs for top commit: stickies-v: re-ACK fa3efb5729091a36a0e82316e9e4b7c09115dc2e ryanofsky: Code review ACK fa3efb5729091a36a0e82316e9e4b7c09115dc2e. Since last review added TranslateFn commit, clarified FormatStringCheck documentation, dropped redundant `inline` keyword Tree-SHA512: 28fa1db11e85935d998031347bd519675d75c171c8323b0ed6cdd0b628c95250bb86b30876946cc48840ded541e95b8a152696f9f2b13a5f28f5673228ee0509") [#31061](https://github.com/bitcoin/bitcoin/pull/31061)[: refactor: Check translatable format strings at compile-time](/bitcoin/bitcoin/commit/712cab3a8f8ad76db959337ddc35cb4c34cac388 "Merge bitcoin/bitcoin#31061: refactor: Check translatable format strings at compile-time fa3efb5729091a36a0e82316e9e4b7c09115dc2e refactor: Introduce struct to hold a runtime format string (MarcoFalke) fa6adb0134408d9a5cb623a41f057d3807e2b006 lint: Remove unused and broken format string linter (MarcoFalke) fadc6b9bac82e99a422d72935a74f3a5444274ed refactor: Check translatable format strings at compile-time (MarcoFalke) fa1d5acb8d8e1842797604fbd1e7c69f6acdb6c7 refactor: Use TranslateFn type consistently (MarcoFalke) eeee6cf2ffb24d930fc2fe77912788abf685cd4b refactor: Delay translation of _() literals (MarcoFalke) Pull request description: All translatable format strings are fixed. This change surfaces errors in them at compile-time. The implementation achieves this by allowing to delay the translation (or `std::string` construction) that previously happened in `_()` by returning a new type from this function. The new type can be converted to `bilingual_str` where needed. This can be tested by adding a format string error in an original string literal and observing a new compile-time failure. Fixes https://github.com/bitcoin/bitcoin/issues/30530 ACKs for top commit: stickies-v: re-ACK fa3efb5729091a36a0e82316e9e4b7c09115dc2e ryanofsky: Code review ACK fa3efb5729091a36a0e82316e9e4b7c09115dc2e. Since last review added TranslateFn commit, clarified FormatStringCheck documentation, dropped redundant `inline` keyword Tree-SHA512: 28fa1db11e85935d998031347bd519675d75c171c8323b0ed6cdd0b628c95250bb86b30876946cc48840ded541e95b8a152696f9f2b13a5f28f5673228ee0509")

  Show description for 712cab3[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[712cab3](/bitcoin/bitcoin/commit/712cab3a8f8ad76db959337ddc35cb4c34cac388)Copy full SHA for 712cab3
* #### [init: Use size\_t consistently for cache sizes](/bitcoin/bitcoin/commit/2a92702bafca5c78b270a9502a22cb9deac02cfc "init: Use size_t consistently for cache sizes This avoids having to rely on implicit casts when passing them to the various functions allocating the caches. This also ensures that if the requested amount of db_cache does not fit in a size_t, it is clamped to the maximum value of a size_t. Also take this opportunity to make the total amounts of cache in the chainstate manager a size_t too.")

  Show description for 2a92702[![TheCharlatan](https://avatars.githubusercontent.com/u/8421793?v=4&size=32)](/TheCharlatan)[TheCharlatan](/bitcoin/bitcoin/commits?author=TheCharlatan)committed[2a92702](/bitcoin/bitcoin/commit/2a92702bafca5c78b270a9502a22cb9deac02cfc)Copy full SHA for 2a92702
* #### [kernel: Move default cache constants to caches](/bitcoin/bitcoin/commit/65cde3621dbb9ac7d210d4926e7601c4adf5f498 "kernel: Move default cache constants to caches They are not related to the txdb, so a better place for them is the new kernel and node cache file. Re-use the default amount of kernel cache for the default node cache.")

  Show description for 65cde36[![TheCharlatan](https://avatars.githubusercontent.com/u/8421793?v=4&size=32)](/TheCharlatan)[TheCharlatan](/bitcoin/bitcoin/commits?author=TheCharlatan)committed[65cde36](/bitcoin/bitcoin/commit/65cde3621dbb9ac7d210d4926e7601c4adf5f498)Copy full SHA for 65cde36
* #### [kernel: Move non-kernel db cache size constants](/bitcoin/bitcoin/commit/8826cae285490439dc1f19b25fa70b2b9e62dfe8 "kernel: Move non-kernel db cache size constants These have nothing to do with the txdb, so move them out and into the node caches.")

  Show description for 8826cae[![TheCharlatan](https://avatars.githubusercontent.com/u/8421793?v=4&size=32)](/TheCharlatan)[TheCharlatan](/bitcoin/bitcoin/commits?author=TheCharlatan)committed[8826cae](/bitcoin/bitcoin/commit/8826cae285490439dc1f19b25fa70b2b9e62dfe8)Copy full SHA for 8826cae
* #### [kernel: Move kernel-specific cache size options to kernel](/bitcoin/bitcoin/commit/e758b26b85da27ef44f3d2c924f3f08e8c1f4fdf "kernel: Move kernel-specific cache size options to kernel Carrying non-kernel related fields in the cache sizes for the indexes is confusing for kernel library users. The cache sizes also are set currently with magic numbers in bitcoin-chainstate. The comments for the cache size calculations are also not completely clear. Solve these things by moving the kernel-specific cache size fields to their own struct. This slightly changes the way the cache is allocated if the txindex and/or blockfilterindex is used. Since they are now given precedence over the block tree db cache, this results in a bit less cache being allocated to the block tree db, coinsdb and coins caches. The effect is negligible though, i.e. cache sizes with default dbcache reported through the logs are: master: Cache configuration: * Using 2.0 MiB for block index database * Using 56.0 MiB for transaction index database * Using 49.0 MiB for basic block filter index database * Using 8.0 MiB for chain state database * Using 335.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space) this branch: Cache configuration: * Using 2.0 MiB for block index database * Using 56.2 MiB for transaction index database * Using 49.2 MiB for basic block filter index database * Using 8.0 MiB for chain state database * Using 334.5 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)")

  Show description for e758b26[![TheCharlatan](https://avatars.githubusercontent.com/u/8421793?v=4&size=32)](/TheCharlatan)[TheCharlatan](/bitcoin/bitcoin/commits?author=TheCharlatan)committed[e758b26](/bitcoin/bitcoin/commit/e758b26b85da27ef44f3d2c924f3f08e8c1f4fdf)Copy full SHA for e758b26
* #### [fuzz: Add fuzz test for checked and saturating add and left shift](/bitcoin/bitcoin/commit/d5e2c4a4097c799433cfc5367c61568fad2c784e "fuzz: Add fuzz test for checked and saturating add and left shift Co-authored-by: Ryan Ofsky <ryan@ofsky.org>")

  Show description for d5e2c4a ![TheCharlatan](https://avatars.githubusercontent.com/u/8421793?v=4&size=32)![ryanofsky](https://avatars.githubusercontent.com/u/7133040?v=4&size=32)[TheCharlatan](/bitcoin/bitcoin/commits?author=TheCharlatan)and[ryanofsky](/bitcoin/bitcoin/commits?author=ryanofsky)committed[d5e2c4a](/bitcoin/bitcoin/commit/d5e2c4a4097c799433cfc5367c61568fad2c784e)Copy full SHA for d5e2c4a
* #### [util: Add integer left shift helpers](/bitcoin/bitcoin/commit/c03a2795a8e044d17835bbf03de0c64dc7b41da8 "util: Add integer left shift helpers The helpers are used in the following commits to increase the safety of conversions during cache size calculations. Co-authored-by: Ryan Ofsky <ryan@ofsky.org> Co-authored-by: stickies-v <stickies-v@protonmail.com>")

  Show description for c03a279 ![TheCharlatan](https://avatars.githubusercontent.com/u/8421793?v=4&size=32)![ryanofsky](https://avatars.githubusercontent.com/u/7133040?v=4&size=32)![stickies-v](https://avatars.githubusercontent.com/u/69010457?v=4&size=32)3 peoplecommitted[c03a279](/bitcoin/bitcoin/commit/c03a2795a8e044d17835bbf03de0c64dc7b41da8)Copy full SHA for c03a279
* #### [refactor: Introduce struct to hold a runtime format string](/bitcoin/bitcoin/commit/fa3efb5729091a36a0e82316e9e4b7c09115dc2e "refactor: Introduce struct to hold a runtime format string This brings the format types closer to the standard library types: * FormatStringCheck corresponds to std::basic_format_string, with compile-time checks done via ConstevalFormatString * RuntimeFormat corresponds to std::runtime_format, with no compile-time checks done. Also, it documents where no compile-time checks are done.")

  Show description for fa3efb5![author](https://github.githubassets.com/images/gravatars/gravatar-user-420.png?size=32)MarcoFalkecommitted[fa3efb5](/bitcoin/bitcoin/commit/fa3efb5729091a36a0e82316e9e4b7c09115dc2e)Copy full SHA for fa3efb5
* #### [lint: Remove unused and broken format string linter](/bitcoin/bitcoin/commit/fa6adb0134408d9a5cb623a41f057d3807e2b006 "lint: Remove unused and broken format string linter The linter has many implementation bugs and missing features. Also, it is completely redundant with FormatStringCheck, which constructs from ConstevalFormatString or a runtime format string.")

  Show description for fa6adb0![author](https://github.githubassets.com/images/gravatars/gravatar-user-420.png?size=32)MarcoFalkecommitted[fa6adb0](/bitcoin/bitcoin/commit/fa6adb0134408d9a5cb623a41f057d3807e2b006)Copy full SHA for fa6adb0
* #### [refactor: Check translatable format strings at compile-time](/bitcoin/bitcoin/commit/fadc6b9bac82e99a422d72935a74f3a5444274ed "refactor: Check translatable format strings at compile-time")

  ![author](https://github.githubassets.com/images/gravatars/gravatar-user-420.png?size=32)MarcoFalkecommitted[fadc6b9](/bitcoin/bitcoin/commit/fadc6b9bac82e99a422d72935a74f3a5444274ed)Copy full SHA for fadc6b9
* #### [refactor: Use TranslateFn type consistently](/bitcoin/bitcoin/commit/fa1d5acb8d8e1842797604fbd1e7c69f6acdb6c7 "refactor: Use TranslateFn type consistently The type was introduced in the previous commit.")

  Show description for fa1d5ac![author](https://github.githubassets.com/images/gravatars/gravatar-user-420.png?size=32)MarcoFalkecommitted[fa1d5ac](/bitcoin/bitcoin/commit/fa1d5acb8d8e1842797604fbd1e7c69f6acdb6c7)Copy full SHA for fa1d5ac
### Commits on Jan 14, 2025

* #### [Merge](/bitcoin/bitcoin/commit/e7c479495509c068215b73f6df070af2d406ae15 "Merge bitcoin/bitcoin#31630: doc: Archive 28.1 release notes bb5f76ee013ee439f70e86319d22f308db8a24ea doc: Archive 28.1 release notes (Ava Chow) Pull request description: ACKs for top commit: rkrux: reACK bb5f76ee013ee439f70e86319d22f308db8a24ea laanwj: ACK bb5f76ee013ee439f70e86319d22f308db8a24ea Tree-SHA512: f146f760f61154627df6109fa4cceb9717e7bfae8c04c82a0562a458a26f47036e3831374108d1261bbc35f3ff51615840c8f7e074d0f83ed3489b224eb6ec07") [#31630](https://github.com/bitcoin/bitcoin/pull/31630)[: doc: Archive 28.1 release notes](/bitcoin/bitcoin/commit/e7c479495509c068215b73f6df070af2d406ae15 "Merge bitcoin/bitcoin#31630: doc: Archive 28.1 release notes bb5f76ee013ee439f70e86319d22f308db8a24ea doc: Archive 28.1 release notes (Ava Chow) Pull request description: ACKs for top commit: rkrux: reACK bb5f76ee013ee439f70e86319d22f308db8a24ea laanwj: ACK bb5f76ee013ee439f70e86319d22f308db8a24ea Tree-SHA512: f146f760f61154627df6109fa4cceb9717e7bfae8c04c82a0562a458a26f47036e3831374108d1261bbc35f3ff51615840c8f7e074d0f83ed3489b224eb6ec07")

  Show description for e7c4794[![glozow](https://avatars.githubusercontent.com/u/25183001?v=4&size=32)](/glozow)[glozow](/bitcoin/bitcoin/commits?author=glozow)committed[e7c4794](/bitcoin/bitcoin/commit/e7c479495509c068215b73f6df070af2d406ae15)Copy full SHA for e7c4794
* #### [Merge](/bitcoin/bitcoin/commit/7cd862aab94f8a73f51171d460a573d25a7fa939 "Merge bitcoin/bitcoin#31646: test: avoid internet traffic 2ed161c5ce648cb66ec3d2941b02d68b6ca4c390 test: avoid generating non-loopback traffic from p2p_dns_seeds.py (Vasil Dimov) a5746dc559c2a0909018be6ca2f3869e237a49b7 test: avoid generating non-loopback traffic from feature_config_args.py (Vasil Dimov) 6b3f6eae70bbf61a8a57764d60b1c34c9fd227d6 test: avoid generating non-loopback traffic from p2p_seednode.py (Vasil Dimov) Pull request description: Avoid generating outbound traffic on a non-loopback interface during tests. Fix all tests, including ones that generate DNS traffic. --- This is a subset of https://github.com/bitcoin/bitcoin/pull/31349 containing only the changes to the tests, without the CI changes to detect future regressions. ACKs for top commit: kevkevinpal: light code review ACK [2ed161c](https://github.com/bitcoin/bitcoin/pull/31646/commits/2ed161c5ce648cb66ec3d2941b02d68b6ca4c390) brunoerg: code review ACK 2ed161c5ce648cb66ec3d2941b02d68b6ca4c390 BrandonOdiwuor: Code Review ACK 2ed161c5ce648cb66ec3d2941b02d68b6ca4c390 jonatack: ACK 2ed161c5ce648cb66ec3d2941b02d68b6ca4c390 Tree-SHA512: 34dcd4a4d0c4edaa68cc7263540af01afd6ef6e90fd6a43dcd1e989dbd7d32cb2c24ad9e68fde75866a935e6dbfe10d45c10f0bc674f40f9ac72ef964e5a380a") [#31646](https://github.com/bitcoin/bitcoin/pull/31646)[: test: avoid internet traffic](/bitcoin/bitcoin/commit/7cd862aab94f8a73f51171d460a573d25a7fa939 "Merge bitcoin/bitcoin#31646: test: avoid internet traffic 2ed161c5ce648cb66ec3d2941b02d68b6ca4c390 test: avoid generating non-loopback traffic from p2p_dns_seeds.py (Vasil Dimov) a5746dc559c2a0909018be6ca2f3869e237a49b7 test: avoid generating non-loopback traffic from feature_config_args.py (Vasil Dimov) 6b3f6eae70bbf61a8a57764d60b1c34c9fd227d6 test: avoid generating non-loopback traffic from p2p_seednode.py (Vasil Dimov) Pull request description: Avoid generating outbound traffic on a non-loopback interface during tests. Fix all tests, including ones that generate DNS traffic. --- This is a subset of https://github.com/bitcoin/bitcoin/pull/31349 containing only the changes to the tests, without the CI changes to detect future regressions. ACKs for top commit: kevkevinpal: light code review ACK [2ed161c](https://github.com/bitcoin/bitcoin/pull/31646/commits/2ed161c5ce648cb66ec3d2941b02d68b6ca4c390) brunoerg: code review ACK 2ed161c5ce648cb66ec3d2941b02d68b6ca4c390 BrandonOdiwuor: Code Review ACK 2ed161c5ce648cb66ec3d2941b02d68b6ca4c390 jonatack: ACK 2ed161c5ce648cb66ec3d2941b02d68b6ca4c390 Tree-SHA512: 34dcd4a4d0c4edaa68cc7263540af01afd6ef6e90fd6a43dcd1e989dbd7d32cb2c24ad9e68fde75866a935e6dbfe10d45c10f0bc674f40f9ac72ef964e5a380a")

  Show description for 7cd862a[![glozow](https://avatars.githubusercontent.com/u/25183001?v=4&size=32)](/glozow)[glozow](/bitcoin/bitcoin/commits?author=glozow)committed[7cd862a](/bitcoin/bitcoin/commit/7cd862aab94f8a73f51171d460a573d25a7fa939)Copy full SHA for 7cd862a
* #### [refactor: Delay translation of \_() literals](/bitcoin/bitcoin/commit/eeee6cf2ffb24d930fc2fe77912788abf685cd4b "refactor: Delay translation of _() literals This is required for a future commit that requires _() to be consteval for format literals. Co-Authored-By: Ryan Ofsky <ryan@ofsky.org>")

  Show description for eeee6cf ![MarcoFalke](https://github.githubassets.com/images/gravatars/gravatar-user-420.png?size=32)![ryanofsky](https://avatars.githubusercontent.com/u/7133040?v=4&size=32)MarcoFalkeand[ryanofsky](/bitcoin/bitcoin/commits?author=ryanofsky)committed[eeee6cf](/bitcoin/bitcoin/commit/eeee6cf2ffb24d930fc2fe77912788abf685cd4b)Copy full SHA for eeee6cf
* #### [refactor: Avoid UB in SHA3\_256::Write](/bitcoin/bitcoin/commit/fabeca3458b38a3d8930cb0cbc866388c3f120f1 "refactor: Avoid UB in SHA3_256::Write It is UB to apply a distance to a pointer or iterator further than the end itself, even if the distance is (partially) revoked later on. Fix the issue by advancing the data pointer at most to the end.")

  Show description for fabeca3![author](https://github.githubassets.com/images/gravatars/gravatar-user-420.png?size=32)MarcoFalkecommitted[fabeca3](/bitcoin/bitcoin/commit/fabeca3458b38a3d8930cb0cbc866388c3f120f1)Copy full SHA for fabeca3
* #### [refactor: Drop unused UCharCast](/bitcoin/bitcoin/commit/fad4032b219e58300f8d0a74bbcf38ef26fa89d0 "refactor: Drop unused UCharCast This is no longer needed after commit 6aa0e70ccbd5491ec9d7c81892820f3341ccd631")

  Show description for fad4032![author](https://github.githubassets.com/images/gravatars/gravatar-user-420.png?size=32)MarcoFalkecommitted[fad4032](/bitcoin/bitcoin/commit/fad4032b219e58300f8d0a74bbcf38ef26fa89d0)Copy full SHA for fad4032
* #### [test: avoid generating non-loopback traffic from p2p\_dns\_seeds.py](/bitcoin/bitcoin/commit/2ed161c5ce648cb66ec3d2941b02d68b6ca4c390 "test: avoid generating non-loopback traffic from p2p_dns_seeds.py `p2p_dns_seeds.py` would try to connect to the DNS server configured on the machine and resolve `dummySeed.invalid`. To block that configure an unavailable proxy which will be used also to connect to the name server. The test needs 2 successful connections to other peers (two Python `P2PInterface`s) and they work in spite of the unavailable proxy because they are on `127.0.0.1` (`NET_UNROUTABLE`) and the proxy is not used for that.")

  Show description for 2ed161c[![vasild](https://avatars.githubusercontent.com/u/266751?v=4&size=32)](/vasild)[vasild](/bitcoin/bitcoin/commits?author=vasild)committed[2ed161c](/bitcoin/bitcoin/commit/2ed161c5ce648cb66ec3d2941b02d68b6ca4c390)Copy full SHA for 2ed161c
* #### [test: avoid generating non-loopback traffic from feature\_config\_args.py](/bitcoin/bitcoin/commit/a5746dc559c2a0909018be6ca2f3869e237a49b7 "test: avoid generating non-loopback traffic from feature_config_args.py `feature_config_args.py` uses a proxy address of `1.2.3.4`. This results in actually trying to open TCP connections over the internet to `1.2.3.4:9050`. The test does not need those to succeed so use `127.0.0.1:1` instead. Also avoid `-noconnect=0` because that is interpreted as `-connect=1` which is interpreted as `-connect=0.0.0.1` and a connection to `0.0.0.1:18444` is attempted.")

  Show description for a5746dc[![vasild](https://avatars.githubusercontent.com/u/266751?v=4&size=32)](/vasild)[vasild](/bitcoin/bitcoin/commits?author=vasild)committed[a5746dc](/bitcoin/bitcoin/commit/a5746dc559c2a0909018be6ca2f3869e237a49b7)Copy full SHA for a5746dc
* #### [test: avoid generating non-loopback traffic from p2p\_seednode.py](/bitcoin/bitcoin/commit/6b3f6eae70bbf61a8a57764d60b1c34c9fd227d6 "test: avoid generating non-loopback traffic from p2p_seednode.py `p2p_seednode.py` would try to connect to `0.0.0.1` and `0.0.0.2` as seed nodes. This sends outbound TCP packets on a non-loopback interface to the default router. Configure an unavailable proxy for all executions of `bitcoind` during this test. Also change `0.0.0.1` and `0.0.0.2` because connecting to them would skip the `-proxy=` setting because for such an address: * `CNetAddr::IsLocal()` is true, thus * `CNetAddr::IsRoutable()` is false, thus * `CNetAddr::GetNetwork()` is `NET_UNROUTABLE`, even though `CNetAddr::m_net` is `NET_IPV4`. This speeds up the execution time of `p2p_seednode.py` from 12.5s to 2.5s.")

  Show description for 6b3f6ea[![vasild](https://avatars.githubusercontent.com/u/266751?v=4&size=32)](/vasild)[vasild](/bitcoin/bitcoin/commits?author=vasild)committed[6b3f6ea](/bitcoin/bitcoin/commit/6b3f6eae70bbf61a8a57764d60b1c34c9fd227d6)Copy full SHA for 6b3f6ea
### Commits on Jan 13, 2025

* #### [ci: Turn CentOS task into native one](/bitcoin/bitcoin/commit/fabefd9915802d53d8c83ae66e5cb259196d9422 "ci: Turn CentOS task into native one")

  ![author](https://github.githubassets.com/images/gravatars/gravatar-user-420.png?size=32)MarcoFalkecommitted[fabefd9](/bitcoin/bitcoin/commit/fabefd9915802d53d8c83ae66e5cb259196d9422)Copy full SHA for fabefd9
* #### [doc: Archive 28.1 release notes](/bitcoin/bitcoin/commit/bb5f76ee013ee439f70e86319d22f308db8a24ea "doc: Archive 28.1 release notes")

  [![achow101](https://avatars.githubusercontent.com/u/3782274?v=4&size=32)](/achow101)[achow101](/bitcoin/bitcoin/commits?author=achow101)committed[bb5f76e](/bitcoin/bitcoin/commit/bb5f76ee013ee439f70e86319d22f308db8a24ea)Copy full SHA for bb5f76e
### Commits on Jan 10, 2025

* #### [Merge](/bitcoin/bitcoin/commit/35bf426e02210c1bbb04926f4ca2e0285fbfcd11 "Merge bitcoin/bitcoin#28724: wallet: Cleanup accidental encryption keys in watchonly wallets 69e95c2b4f99eb4c2af6b2b6cc6a66abfea753df tests: Test cleanup of mkeys from wallets without privkeys (Andrew Chow) 2b9279b50a3682ab97308888b4f272d3ae379811 wallet: Remove unused encryption keys from watchonly wallets (Andrew Chow) 813a16a463326079472366aed42f5218a57db63b wallet: Add HasCryptedKeys (Andrew Chow) Pull request description: An earlier version allowed users to create watchonly wallets (wallets without private keys) that were \"encrypted\". Such wallets would have a stored encryption keys, but nothing would actually be encrypted with them. This can cause unexpected behavior such as https://github.com/bitcoin-core/gui/issues/772. We can detect such wallets as they will have the disable private keys flag set, no encrypted keys, and encryption keys. For such wallets, we can remove those encryption keys thereby avoiding any issues that may result from this unexpected situation. ACKs for top commit: sipa: utACK 69e95c2b4f99eb4c2af6b2b6cc6a66abfea753df. laanwj: Code review re-ACK 69e95c2b4f99eb4c2af6b2b6cc6a66abfea753df furszy: Code review ACK 69e95c2b4f99eb4 Tree-SHA512: 901932cd709c57e66c598f011f0105a243b5a8b539db2ef3fcf370dca4cf35ae09bc1110e8fca8353be470f159468855a4dd96b99bc9c1112adc86ccc50e1b9d") [#28724](https://github.com/bitcoin/bitcoin/pull/28724)[: wallet: Cleanup accidental encryption keys in watchonly wallets](/bitcoin/bitcoin/commit/35bf426e02210c1bbb04926f4ca2e0285fbfcd11 "Merge bitcoin/bitcoin#28724: wallet: Cleanup accidental encryption keys in watchonly wallets 69e95c2b4f99eb4c2af6b2b6cc6a66abfea753df tests: Test cleanup of mkeys from wallets without privkeys (Andrew Chow) 2b9279b50a3682ab97308888b4f272d3ae379811 wallet: Remove unused encryption keys from watchonly wallets (Andrew Chow) 813a16a463326079472366aed42f5218a57db63b wallet: Add HasCryptedKeys (Andrew Chow) Pull request description: An earlier version allowed users to create watchonly wallets (wallets without private keys) that were \"encrypted\". Such wallets would have a stored encryption keys, but nothing would actually be encrypted with them. This can cause unexpected behavior such as https://github.com/bitcoin-core/gui/issues/772. We can detect such wallets as they will have the disable private keys flag set, no encrypted keys, and encryption keys. For such wallets, we can remove those encryption keys thereby avoiding any issues that may result from this unexpected situation. ACKs for top commit: sipa: utACK 69e95c2b4f99eb4c2af6b2b6cc6a66abfea753df. laanwj: Code review re-ACK 69e95c2b4f99eb4c2af6b2b6cc6a66abfea753df furszy: Code review ACK 69e95c2b4f99eb4 Tree-SHA512: 901932cd709c57e66c598f011f0105a243b5a8b539db2ef3fcf370dca4cf35ae09bc1110e8fca8353be470f159468855a4dd96b99bc9c1112adc86ccc50e1b9d")

  Show description for 35bf426[![fanquake](https://avatars.githubusercontent.com/u/863730?v=4&size=32)](/fanquake)[fanquake](/bitcoin/bitcoin/commits?author=fanquake)committed[35bf426](/bitcoin/bitcoin/commit/35bf426e02210c1bbb04926f4ca2e0285fbfcd11)Copy full SHA for 35bf426
## Pagination

[Previous](/bitcoin/bitcoin/commits/master?before=89720b7a1b37af885f304350fa25f2479179ae3e+0)[Next](/bitcoin/bitcoin/commits/master?after=89720b7a1b37af885f304350fa25f2479179ae3e+34)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


