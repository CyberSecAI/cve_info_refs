Based on the provided content, here's an analysis of the potential vulnerability:

**Root Cause of Vulnerability:**

The commit message "viewer (not used anymore) generates sec issue" combined with the code changes in `login.php` suggests that the vulnerability stems from how the `viewer` parameter was handled in the login process. Specifically, the commit removes the functionality of the `viewer` parameter by setting `$args->viewer = '';` suggesting that it was previously processed in a way that caused a security issue.

**Weaknesses/Vulnerabilities Present:**

The vulnerability likely resided in the handling of the `$pParams['viewer']` parameter. Previously, this parameter was being used without proper sanitization or validation, which allowed a user to potentially inject malicious code or manipulate the application's behavior. The specific nature of the vulnerability is not explicitly detailed but the code suggests it was related to the viewer functionality. The change `$args->viewer = '';` disables the viewer functionality completely, suggesting that the old functionality was problematic.

**Impact of Exploitation:**

The impact of exploiting this vulnerability is not detailed in the provided content, however, it is classified as a security issue by the developer, suggesting it was more severe than simple malfunction. Without more specific information, we can only speculate about the potential impact but common vulnerabilities of this type include:
* **Cross-Site Scripting (XSS):** If the `viewer` parameter was being used in an output context, a malicious user could inject JavaScript, leading to XSS attacks.
* **Information Disclosure:** Depending on the purpose of the `viewer` parameter, it might have been possible to manipulate it to access sensitive information.
* **Authentication Bypass:** In some cases, similar parameters can be abused to bypass authentication checks or impersonate other users.

**Attack Vectors:**

The attack vector for this vulnerability would be through the `login.php` script, likely via a crafted HTTP request with a malicious `viewer` parameter. The attacker would need to be able to send requests with parameters, and the vulnerability would have been reachable through the login form or any endpoint that used the vulnerable login logic.

**Required Attacker Capabilities/Position:**

The attacker would need to:
1. Understand that the `viewer` parameter was used.
2. Manipulate the `viewer` parameter in the request to the login script (`login.php`).
3. Have a valid target to exploit with this vulnerability.

**Additional Notes:**
* The code change `//$args->viewer = $pParams['viewer'];` is commented out, further suggesting that this line was the root of the security problem.
* The associated commit message and code change indicate that the `viewer` functionality was removed instead of fixing the vulnerability directly.
* This commit only disables the viewer parameter rather than addressing the underlying issue that made it vulnerable, suggesting there may be further security issues around login parameters.

**In Summary:**
The provided content suggests that the `viewer` parameter in the `login.php` script was vulnerable, likely due to lack of sanitization. While the exact nature of the vulnerability is not fully detailed, the developer removed the vulnerable code rather than fixing the vulnerability directly.