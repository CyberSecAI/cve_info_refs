=== Content from jvn.jp_860d83eb_20250119_113734.html ===


![Japan Vulnerability Notes](/common/img/note_logo.gif)

Published:2020/07/31  Last Updated:2020/07/31
# JVN#73169744 Multiple vulnerabilities in multiple PHP Factory products

## Overview

Multiple products provided by PHP Factory contain multiple vulnerabilities.

## Products Affected

**CVE-2020-5615**

* [Calendar01] free edition ver1.0.0
* [Calendar02] free edition ver1.0.0

**CVE-2020-5616**

* [Calendar01] free edition ver1.0.0
* [Calendar02] free edition ver1.0.0
* [PKOBO-News01] free edition ver1.0.3 and earlier
* [PKOBO-vote01] free edition ver1.0.1 and earlier
* [Telop01] free edition ver1.0.0
* [Gallery01] free edition ver1.0.3 and earlier
* [CalendarForm01] free edition ver1.0.3 and earlier
* [Link01] free edition ver1.0.0

## Description

Multiple products provided by PHP Factory contain multiple vulnerabilities listed below.

* **Cross-site Request Forgery ([CWE-352](https://cwe.mitre.org/data/definitions/352.html))** - CVE-2020-5615

  | CVSS v3 | CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N | **Base Score: 4.3** |
  | --- | --- | --- |
  | CVSS v2 | AV:N/AC:H/Au:N/C:N/I:P/A:N | **Base Score: 2.6** |
* **Authentication bypass ([CWE-287](https://cwe.mitre.org/data/definitions/287.html))** - CVE-2020-5616

  | CVSS v3 | CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:L/I:L/A:N | **Base Score: 4.8** |
  | --- | --- | --- |
  | CVSS v2 | AV:N/AC:H/Au:N/C:P/I:P/A:N | **Base Score: 4.0** |

## Impact

* If a user views a malicious page while logged in, unintended operations may be performed - CVE-2020-5615
* A remote attacker under certain conditions may log in to the product with administrative privileges - CVE-2020-5616

## Solution

**Update the software** - CVE-2020-5615

Update the software to the latest version according to the information provided by the developer.

**Add code to the affected file** - CVE-2020-5616

Add code to the affected file according to the information provided by the developer.

## Vendor Status

| Vendor | Link |
| --- | --- |
| PHP Factory | [[Calendar01] free edition](https://www.php-factory.net/calendar/01.php) |
|  | [[Calendar02] free edition](https://www.php-factory.net/calendar/02.php) |
|  | [[PKOBO-News01] free edition](https://www.php-factory.net/news/pkobo-news01.php) |
|  | [[PKOBO-vote01] free edition](https://www.php-factory.net/vote/01.php) |
|  | [[Telop01] free edition](https://www.php-factory.net/telop/01.php) |
|  | [[Gallery01] free edition](https://www.php-factory.net/gallery/01.php) |
|  | [[CalendarForm01] free edition](https://www.php-factory.net/calendar_form/01.php) |
|  | [[Link01] free edition](https://www.php-factory.net/link/01.php) |

## References

## JPCERT/CC Addendum

## Vulnerability Analysis by JPCERT/CC

## Credit

Yuji Tounai of Mitsui Bussan Secure Directions, Inc. reported this vulnerability to IPA.

JPCERT/CC coordinated with the developer under Information Security Early Warning Partnership.

## Other Information

| JPCERT Alert |  |
| --- | --- |
| JPCERT Reports |  |
| CERT Advisory |  |
| CPNI Advisory |  |
| TRnotes |  |
| CVE | [CVE-2020-5615](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-5615) |
|  | [CVE-2020-5616](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-5616) |
| JVN iPedia | [JVNDB-2020-000051](https://jvndb.jvn.jp/jvndb/JVNDB-2020-000051) |

* JVN
* [HOME](/en/index.html)
* [What is JVN ?](/en/nav/jvn.html)
* [Instructions](/en/nav/jvnhelp.html)
* [List of Vulnerability Report](/en/report/index.html)
* [VN\_JP](/en/jp/index.html)
* [VN\_JP(Unreachable)](/en/adj/index.html)
* [VN\_VU](/en/vu/index.html)
* [TA](/en/ta/index.html)
* [TRnotes](/en/tr/index.html)
* [JVN iPedia](http://jvndb.jvn.jp/en/)
* [MyJVN](http://jvndb.jvn.jp/en/apis/myjvn/index.html)
* [JVNJS/RSS](/en/rss/index.html)
* [Vendor List](/en/nav/index.html)
* [List of unreachable developers](/en/reply/index.html)
* [Contact](/en/contact/index.html)

Copyright (c) 2000-2020 JPCERT/CC and IPA. All rights reserved.



=== Content from www.php-factory.net_7410fa06_20250119_113736.html ===


![PHP工房](../common/img/header.png)

[![このエントリーをはてなブックマークに追加](//b.st-hatena.com/images/entry-button/button-only@2x.png)](http://b.hatena.ne.jp/entry/http%3A//www.php-factory.net/ "このエントリーをはてなブックマークに追加")
[Tweet](https://twitter.com/share)

[HOME](../) > 【Calendar01】PHP営業日・スケジュールカレンダーフリー（無料）版

## 【Calendar01】（3デバイス対応）PHP営業日・スケジュールカレンダーフリー（無料）版

![PHP営業日カレンダー　フリー（無料）Beta版デモ](../common/img/sub/sche01.png)

PC、スマホ（スマートフォン）、携帯（ガラケー）3デバイスに対応したフリー（無料）のシンプルスケジュールカレンダー・営業日カレンダーCMSプログラムです。管理画面で営業日、休業日、定休日を設定、更新可能です。

お店や会社、スポーツクラブ、学校（スクール）などの営業日スケジュールカレンダーに最適です。

クライアントが更新することを想定しているので、シンプルで直感的な更新が可能です。

【2024/05/09　重要なお知らせ】
祝日の自動取得機能が正常に動作しない問題。

対象バージョン：ver1.0.2以下。ver1.0.3以降は問題ありません。

※バージョンはconfig.phpの上部に記載されています。

症状：祝日の自動取得が行えない。

原因：GoogleカレンダーAPIの仕様が変わったためと思われます。

対象者：祝日の自動取得機能をONにしている方のみ。（config.phpでON、OFF可能。デフォルト値はOFF）

修正方法：以下をご参考の上で修正してください。

設定ファイルconfig.phpを開き、以下の記述をファイル内検索してください。

//$holidays\_id = 'japanese\_\_ja@holiday.calendar.google.com'; // Google 公式版日本語

この先頭のスラッシュ2つ「//」を削除してコメントアウトを解除（有効化）してください。

これだけです。

### 主な機能と特徴

1. 無料（フリー）の営業日・スケジュールカレンダープログラムです。もちろん商用サイトでもどんなサイトでも設置可能です。
2. 管理画面から登録、編集できるので完全自動化（CMS）として運用可能です。
3. スマホ（スマートフォン）、携帯（ガラケー）用に最適化したファイルも同梱していますので、3デバイス同時更新が可能です。スマホ、ガラケーは表形式ではなく縦長のリスト形式で表示されます。

   PCは表形式、リスト形式を選択可能です。デフォルトは表形式
4. デフォルトデザインはシンプルですが、CSSを編集すればオリジナルデザインも可能。

   （変更にはHTMLやCSSの基本知識が必要です）
5. 設置が容易。ページ内でカレンダーを表示させたい場所にiframeタグ1行を記述すれば表示側の設置は完了します。iframeタグなので既存のページが.htmlでもOKです。
6. 定休日設定（たとえば毎週月曜日）が可能で、設定すれば全期間で有効になります。

   ※ただし隔週は不可なので隔週の場合は通常通りチェックにて反映してください。
7. カレンダーを何ヶ月後まで表示させるかなどの設定が可能です。（過去を表示するかも設定可）
8. 祝日は赤字で表示され、GoogleAPIから自動で取得されます。こちらの詳細が以下「運用上の注意点」にありますのでご一読ください。 （※2015/11/25からオプションとなりました。デフォルトはOFF）

   ただし、この機能はPHP5.2以上のみ可能です。
9. Javascriptは使用していませんので、ブラウザ間の問題もありません。
10. パーミッションの自己診断も行います。データ保存ファイルのパーミッションの値が正常でない場合には管理画面で警告文が出ます。
11. その他設定ファイルにて詳細設定が可能です。ファイル内のコメントを参考に設定下さい。

### サンプルデモ

[管理画面サンプルデモ](../demo/calendar/calendar01/admin.php)

ユーザ名：admin

パスワード：1397

※自由に登録、編集して下さい。

PCのみ表示形式を表（テーブル）形式、リスト形式から選択可能です。（スマホ、ガラケーはリスト形式）

デフォルトは表（テーブル）形式です。設定ファイルにて変更可能です。

[表示サンプルデモ（PC用 表形式）](../demo/calendar/calendar01/)

[表示サンプルデモ（PC用 リスト形式）](../demo/calendar/calendar01/index_list.php)

iframeタグ（インラインフレーム）で表示しています。実際は既存サイトなどに埋め込むことになるかと思います。

カレンダーの幅は自由に変更可能です。（デフォルトは100％）カレンダーはシンプルなHTMLのタグです。CSSにて自由に設定下さい。（ソースを表示して各タグ、class等を確認しつつ設定下さい）

携帯、スマホはQRコードを読めば実機でも確認できます。スマホ、携帯は既存ページ内に表示させるよりもリンクさせる方法が良いでしょう。

| スマホ用QR [QRコード](../demo/calendar/calendar01/sp.php) | 携帯用QR [携帯版QRコード](../demo/calendar/calendar01/i.php) |
| --- | --- |

### ダウンロード

事前に[ご利用規約](#ruleArea)をご確認下さい。

クリックで自分のPCに保存して下さい。または右クリック⇒「対象をファイルに保存」

[【Calendar01】ダウンロード](../download_count/download.php?download=9)

#### 関連プログラム（その他の機能搭載版）

* [【Calendar02】PHP営業日・スケジュールカレンダー(テキスト入力付)](02.php)
* [【Calendar03】PHP営業日・スケジュールカレンダー(プルダウン選択・テキスト入力付)](03.php)

### 設置方法

ファイルの文字コードはUTF-8です。必ず対応したエディタで開いてください。

メモ帳（UTF-8非対応）は使用禁止です。ファイルが壊れます。[TeraPad（無料）](http://www5f.biglobe.ne.jp/~t-susumu/library/tpad.html)やDreamWeaver等で開いてください。必ずUTF-8のBOM無し（UTF-8N）で保存して下さい（いずれもデフォルトではBOM無しで保存されます）。

[BOMについて詳しく知りたい方はこちら](../trivia/03.php)

※PHPではスラッシュ2回「//」の後からその行の末尾までがコメント扱いとなります。「#」、「/\*\*/」もです。

#### 1.ファイル構成を確認し、表示側の設定を行う（iframeタグを埋め込む等）

ダウンロードしたzipファイルを解凍するとcalendar01フォルダがあります。

赤字のファイルが触るファイルです。その他は基本的には触らずOKです。

| ・index.php | PC用のカレンダーを表示するファイルです。実際にはこれをトップページ、または任意のページの任意の箇所にiframeタグで読み込むことになると思います。見た目等はCSSで自由に調整して下さい。 |
| --- | --- |
| インラインフレーム使用時のiframeタグ以下のタグを表示させたい場所に貼り付ければOKです。必要に応じて幅、高さ、パス等を調整してください。 スクロールバーを出したくない場合は高さは多めに指定すると良いです。  <iframe src="calendar01/" width="210" height="310" frameborder="0" scrolling="auto"></iframe> | |
| ・Readme.txt | 設置法、利用規約など。 |
| ・admin.php | 管理画面です。登録や変更を行います。クライアントにはこのURLだけを教えることになるかと思います。 |
| ・complete.php | 「更新」による2重登録防止用のリダイレクトファイルです。そのまま置いておきましょう。 |
| ・config.php | 設定ファイル。管理画面ログイン情報の設定やその他設定、関数記述など |
| ・style.css | admin.php、index.php、sp.phpのスタイルを記述してます(もちろん独自のCSSでもOKです)必要に応じて自由に変更して下さい。 |
| ・data/ | データ保存用ディレクトリ（パーミッションを書き込み可能なものに） |
| ┗ holiday\_set.dat | 休業日データを保存するファイル （パーミッション666等書き込み可能なものに） |
| ┗closed.dat | 定休日データを保存するファイル （パーミッション666等書き込み可能なものに） |
| ┗西暦\_holiday.dat | ダウンロード直後は存在しません。サーバーにアップロード後、初回アクセス時に自動生成されます。 祝日データを保存するファイルです。年が切り替わるタイミングでGoogleAPIより当年、翌年、前年分の祝日データを自動で取得、保存します。Googleの仕様により祝日データが正確では無い場合は直接編集も可能です。登録データを参考に変更下さい。 |
| sp.php | スマホ用のカレンダーです。このファイルにリンクさせる形になるかと思いますが、iframeで読み込んでもOKかもしれません。（ただし、スマホ全機種でのiframeタグ対応は保証できませんのでリンクさせるのが無難です） |
| i.php | 携帯（ガラケー）用のカレンダーです。携帯はiframeに対応していな機種がほとんどかと思うので、このファイルにリンクさせる形になるかと思います。 |

#### **2. ユーザID、パスワードを設定する**

config.phpをエディタソフトで開き、ログインのためのID、パスワードを変更してください。

初期値は

ID：admin

パスワード：1397

になっています。**必ず変更してください。**その他必要に応じてコメントを参考に設定してください。

#### **3. FTPでアップ**

「calendar01」フォルダごと全ファイルをアップし、 **「data」ディレクトリのパーミッションを書き込み可能な755 or 777等に設定（サーバーによる）**

**data/holiday\_set.datのパーミッションを書き込み可能な666等に設定（サーバーによる）

data/closed.dat.datのパーミッションを書き込み可能な666等に設定（サーバーによる）**にしてください。

もちろんカレンダーを埋め込んだページもアップして下さい。これで完了です。

各パーミッションの適切な値はサーバーのマニュアル等を参考に変更下さい。

サーバーによっては値が違う、または変更の必要自体無いこともあります。

もしパーミッションの設定が間違っていた場合ですが、すべての環境での保証はありませんが管理画面にてその旨警告が表示されるよう設定しています。またもしパーミッションが間違いの場合には「data」ディレクトリの場合、祝日データが取得できない、また、holiday\_set.dat、closed.datの場合、新規登録時にエラーで登録自体ができません。要するにまともに動かないのでテスト段階ですぐに気付けます。

逆にそのようなことがない場合は適切なパーミッションになっていると考えてOKです。

ちなみにエックスサーバーの場合、今のところパーミッション変更は不要です。

#### **4.登録テストとブラウザで結果確認**

**ブラウザで「あなたのサイトのURL」/calendar01/admin.php**を表示し、管理画面にログインし、登録を行ってみてください。正常に登録、編集できればOKです。定休日設定も確認下さい。

ifirameなどで埋め込んだページもブラウザで確認してみて下さい。

登録データが反映されていればOKです。

#### **5. ページの調整**

設置するページやその他必要に応じてスタイルシート、HTML等で見た目の調整を行ってください。じゆ～です！

その他htmlソースを見ると分かりますが、タグや各セル、各曜日にはそれぞれclassを振っていますので、

style.cssのCSSを変更して自由にデザイン下さい

また、class="youbi\_0"が日曜日でそのまま曜日ごとに連番が振られclass="youbi\_6"が土曜日となっています。

カレンダー部分のhtmlを変更したい場合はconfig.php内下部に各デバイス（PC用、スマホ用、携帯用）ごとに記述しています。カレンダーのタグや「日」、「月」などのテキストを変更したい場合直接変更してください。

これら設置法などはダウンロードファイル内のReadme.txtにも記述しています。

充分な検証は行っておりますが、配布直後は未知の不具合等が無いとも限りませんので、気になる点などがあれば遠慮なくお問い合わせ下さい。

また使用感などもいただけますとものすごーくありがたいです＾＾

### **著作権表示削除について**（2,000円+消費税/1サイト）

デフォルトではページ下部に著作権表示リンクがあります。

これらの著作権表示の削除には1サイトあたり2000円+消費税の使用料金が必要になります。

お支払いいただいた場合、この表示が削除されます。
2サイト目以降は都度料金が必要になります。

[著作権リンク削除依頼はこちらです（銀行振込）](../license.php?script=Calendar01)

[クレジットカードでのお支払いはこちら![](../common/img/icon/card_logo.png)](../payment/?script=Calendar01)

（完全自動化によりクレジットカード払いの場合、決済完了後即ダウンロード可能です。手数料無し）

### 既存のサイトの任意のページに直接埋め込みたい場合

calendar01フォルダ内のindex.phpの必要な箇所（2箇所）をコピペすればOKです。コメントも書いておりますので参考下さい。
ただし、埋め込み先のページは拡張子が.phpでかつ文字コードがUTF-8である必要があります。

また

require\_once('config.php');

の箇所は設置場所によって変更下さい。単純にconfig.phpへの相対パスを書けばいいだけです。（絶対パス不可）

例　require\_once('calendar01/config.php');

CSSファイルへのリンク部分も必要に応じて変更下さい。もちろんオリジナルでもOKです。

### GoogleAPIの仕様変更に伴う既存ファイルの修正方法

2014/11/25以前にダウンロードされた方は以下のページにまとめしたのでご参照下さい。

[GoogleAPIの仕様変更に伴う既存ファイルの修正方法](../calendar_form/holiday_update.php)

### 運用上の注意点

2014/11/17からのGoogleAPIの仕様変更に伴い、GoogleAPIキーが必要になりました。お手数ですが、事前にAPIキーの取得が必要になります。取得方法は以下ページにまとめておりますのでご参考下さい。

[GoogleカレンダーAPIキーの取得手順](../calendar_form/google_api.php)

祝日設定は不要、またはGoogleAPIキーの取り方が分からない、または面倒な方はそのままでも運用は問題ありません。デフォルトはOFFです。（祝日が赤字にならないだけです）または祝日用のデータファイルをこのページからダウンロードいただいて手動でdataディレクトリにアップしても反映可能です。

### 動作確認済PHPバージョン

**PHP4.3.9～PHP8.1**

### 動作確認済レンタルサーバー

* [エックスサーバー](https://px.a8.net/svt/ejp?a8mat=1I6N7F+64AKS2+CO4+609HU) [PR]
  ![](https://www13.a8.net/0.gif?a8mat=1I6N7F+64AKS2+CO4+609HU)

  ※個人的にはここが好きで、もうずっとここです。このサーバーで困ることはまずないでしょう。
* [ロリポップ！](https://px.a8.net/svt/ejp?a8mat=16EM8C+87WMLU+348+65MEA) [PR]
  ![](https://www18.a8.net/0.gif?a8mat=16EM8C+87WMLU+348+65MEA)

  ※ただしここはWAF機能がONの場合、CMSプログラムで問題が発生する可能性が高いです。[詳細はこちら](https://www.php-factory.net/cms/detail.php?id=17)

  またサーバーがブラックリストに登録されてしまいメール系のプログラムで受信できない大問題も多々確認されています。[詳細はこちら](https://www.php-factory.net/cms/detail.php?id=4) 　ただコスパ的には有りだと思います。
* [カゴヤのレンタルサーバー](https://px.a8.net/svt/ejp?a8mat=1ZZHAF+G6A4KY+7YE+I1NCI) [PR]
  ![](https://www13.a8.net/0.gif?a8mat=1ZZHAF+G6A4KY+7YE+I1NCI)

  ここは高機能、高スペック、良心的な価格でありながら風俗系のサイトがOKという非常に貴重なサーバーです。個人的には風俗系のサイトであればこのサーバー以外の選択肢はないと思ってます。
* [さくらのレンタルサーバ](https://px.a8.net/svt/ejp?a8mat=1ZZYHJ+FGOHKI+D8Y+67RK2) [PR]
  ![](https://www13.a8.net/0.gif?a8mat=1ZZYHJ+FGOHKI+D8Y+67RK2)

その他一般的なレンタルサーバーであれば問題なく動作するはずですが、

すべての環境（サーバー）での動作を保証するものではありませんのでご了承下さい。

問題が出る可能性が高い、またはそのままでは必ず問題が出ることが分かっているサーバー

※現状私自身が把握している範囲です。（実際に確認していますのでちゃんと根拠もあります）

1，Yahoo系（ジオプラス、ウェブホスティングとも）※Softbankも含む

2，KDDI系（CPI含む）

3，NTT系（WebArena（suiteX）、NTTビズリンク（BizLink））

※プロバイダー系は特に問題が多いです。（個人的には絶対に借りてはいけないと考えています）

4，スマイルサーバー

5，ファーストサーバ

[特にCPI、NTT系、スマイルサーバー、ファーストサーバで問題がある場合はこちらも参照下さい](https://www.php-factory.net/cms/detail.php?id=6)

経験上、結局は「餅は餅屋です」。プロバイダー系はプラン、金額に関係なく特に問題が多いです。サーバーの問題で時間を取られるのは非常に無駄ですし、その先ずっと影響しますのでサーバー選びは慎重にされることをオススメします。
特に理由がなければあえてこれらのサーバーは借りないほうが得策でしょう。高いから良い、安いからダメという安易なものでもありませんので難しいところですね。（まぁ安いには安いなりの理由があるのですが・・）

### よくある質問

##### カレンダー表示スペースの高さを内容に応じて調整したい（iframeのスクロールバーを出さない）

iframeの場合には、高さが自動で調整されるようなものではないため、微妙な高さ調整は難しいのが現状です。

その場合、ファイルにPHPのソースコードを直接埋め込むことで解決可能です。詳細は上記「既存のサイトの任意のページに直接埋め込みたい場合」を参考下さい。

記憶が定かではありませんが、たしかiframeの高さを内容に応じて調整してくれるJavascriptがあった気がします。

##### 当月と翌月を表示したい

営業日カレンダー（Calendar01、Calendar02、Calendar03）の場合

表示するファイル内の

「▼▼▼ 任意のページに埋め込んで表示させたい場合（iframeを使わない）はここからコピペ ▼▼▼」

から

「 ▲▲▲コピペここまで▲▲▲」

までをまるっとコピーし、そのまま「 ▲▲▲コピペここまで▲▲▲」の下にまるっと貼り付けし、

1，貼り付けた側の「require\_once('config.php');」の1行を削除下さい。（2重で読み込むとエラーとなります）

2，貼り付けた側の「scheduleCalendarPc($ym,$timeStamp,$copyright);」という記述を以下のように修正下さい。（コピペでOKです）※作業は一字一句間違わないよう慎重に行って下さい。

scheduleCalendarPc(date('Y-m',strtotime(date('Y-m-1').' +1 month')),strtotime(date('Y-m-1',strtotime(date('Y-m-1').' +1 month'))),$copyright);

これでこれは当月と翌月が表示されるようになります。レイアウトや見た目は自由に調整下さい。

カレンダーフォームの場合（【CalendarForm01】）

まず表示用のファイル内（pc.phpなど）の以下の箇所をまるっとコピペ下さい。

<!--　▼以下休業日、定休日テキスト箇所。すべて削除してしまってオリジナルでももちろんOKです▼　-->

から

<?php Uqa4h78r();}//著作権表記リンク無断削除禁止（削除すると全機能、または一部機能が失われます）?>

ここまでをコピーし、そのままその下にコピペ下さい。

その上で貼り付けた方の「scheduleCalenderPc($ym,$timeStamp,$copyright);」を以下にまるっと書き換えて下さい。（コピペでOKです）

scheduleCalenderPc(date('Y-m',strtotime(date('Y-m-1').' +1 month')),strtotime(date('Y-m-1',strtotime(date('Y-m-1').' +1 month'))),$copyright);

翌々月（2ヶ月後）を表示したい場合には、「+1」とある2箇所を+2にすればOKです。3ヶ月後などそれ以降は同じルールでOKです。

翌月、前月のリンクをCSSで非表示にする（必要に応じて）

必要に応じてカレンダー内に表示されている翌月、前月のリンクをCSSで非表示に。

.calendarHeader a{
display:none;
}

##### 祝日自動取得ができない。（エラー表示や画面真っ白など）

2014/11/25以降にプログラムをダウンロードされた方でこの症状が出る場合には、PHPのバージョンの問題が考えられます。祝日自動取得はPHP5.2以上である必要があります。PHP5.2以上にバージョンアップされるか、設定ファイルで自動取得をOFFにして下さい。

##### レスポンシブのためPCでは表形式、スマホ版ではリスト形式が表示されるようにしたい

レスポンシブ化されているページの場合、基本的には表形式、またはリスト形式のどちらかを固定で選ぶ必要がありますが、
メディアクエリを利用することでそういったことが可能ではあります。

考え方としては、
iframeタグを2つ記述して、PC用、スマホ用を読み込んでおいて、
それぞれのiframeタグにid属性を付けておいて、
CSSで表示、非表示を切り替えるだけですね。

例

<iframe src="calendar/" width="100%" height="450" frameborder="0" scrolling="auto" id="pc"></iframe>

<iframe src="calendar/sp.php" width="100%" height="450" frameborder="0" scrolling="auto" id="sp"></iframe>

あとはCSSでdisplay:noneで制御すればOKですね。

メディアクエリについてご存知ない場合はご自身で調べてみて下さい。

```

/* CSS例 */

#pc{
	display:block;
}
#sp{
	display:none;
}

@media screen and (max-width:572px) {
/*　画面サイズが572px以下はここを読み込む　*/

#pc{
	display:none;
}
#sp{
	display:block;
}

}

```

以上です。

##### 管理画面での更新が反映されない（管理画面側の表示月数の問題）

設定ファイルで管理画面側の表示月数を設定可能となっていますが、複数月を一括で更新する仕様上、管理画面側の表示月数を増やすほど、1ページあたりのPOST数（項目数）も増えていきます。

ここで問題となるのがPHP5.3以降で導入されたphp.iniの「max\_input\_vars」で、これはPOST数の上限値です。

この「max\_input\_vars」はデフォルトで1000に設定されています。

そのため管理画面側の表示月数を増やしていくとこの上限値1000を超えてしまうため、
更新が反映されない状況になります。

プログラムごとに異なりますが、表示月数をおおよそ以下の値に設定すると上限値を上回ってしまう可能性が高いです。

【Calendar01】＝ 基本的には問題となりません。（少なくとも2～3年程度まではOKです）

【Calendar02】＝ おおよそ14ヶ月以上

【Calendar03】＝ おおよそ7ヶ月以上

そのためこの表示月数以下としていただく必要がございます。

どうしてもこの表示月数以上に設定されたい場合はサーバーのphp.iniの設定値を変更する必要があります。

サーバーのphp.iniの設定値を変更する方法については以下ページで説明しておりますのでご参考下さい。

[PHP5.3以降で一度にPOSTできる上限数（max\_input\_vars）を変更する](../trivia/14.php)

##### 祝日自動取得での祝日が実際の祝日と異なる（間違っている）

残念ながら祝日自動取得はGoogleのサービスを利用する性質上、100％正確ではありません。

また2020年は特にイレギュラーな年であり、天皇誕生日の追加やオリンピックに合わせて祝日が多数変更されていますが、自動取得では反映されないようです。

そのため祝日用のデータファイルを直接編集することで対応いただくしか手がありません。

2020年の祝日データファイルは以下の場所にあります。

data/2020\_holiday.dat

※「2020」の箇所がその年の祝日データファイルということです。（2021＝2021年の祝日データファイル）

「2020\_holiday.dat」をエディタソフトなどで開いていただき、
1行ごとに祝日が記述されていますので、
実際の祝日などを参考に日付を直接修正して下さい。

### サポートについて

HTMLやCSSなどをある程度理解されている方を対象としています。

カスタマイズ方法などのサポートは行っておりませんのでご了承ください。

修正方法などに関するサポートは有料にて承ります。

管理人1人で運営していますので。。。

[有料サポートはこちら](../support.php)

設置の際の不明点や気になった点、不具合等があれば遠慮なくなんでもご連絡ください。

[お問い合わせはこちら](../contact.php)

### カスタマイズ、設置代行について

カスタマイズ（改造等）方法などのサポートは行っておりません。

カスタマイズや仕様変更、設置代行などは2,000円～の有料にて承ります。

[ご依頼・お見積もりはこちらです](../contact.php)

### ご利用規約

・無料版プログラムはフリーウェアです。ただし、著作権は放棄するものではありません。

・プログラムの著作権表示リンク（ページ下部にある当サイトへのリンク）を無断で削除することはできません。
（一律2,000円+消費税の削除依頼をいただいた場合を除く）

・プログラムの再配布、再販売は禁止です。

　※ただしクライアントへの納品などでシステム費用、設置費用として請求されるのは問題ありません。

・プログラムによって何らかの不利益、損害が生じても一切の責任を負いません。

　あらかじめご了承の上ご使用ください。

　もし何らかのトラブルがあった場合には、ご相談いただければ解決策が見つかるかもしれません。

　（クライアントへの原因の説明など）

・プログラムは全ての環境（サーバー）での動作を保証するものではありません。

・改変等は自由ですが、自己責任でお願いします。

・有料版をご購入いただいた場合、初期不良を除き、ご使用後の返金には応じ兼ねます。

・有料版（著作権リンク削除含む）は1サイト（同一ドメイン）内であれば複製の上で複数利用可能です。
　2サイト目以降は都度サイトより購入申込みが必要になります。
　※サブドメインはその性質上、別サイト（別ドメイン）とみなします。

　ダウンロードいただいた時点で利用規約に同意したものとみなされます。

### 更新履歴

2024.05.09　ver1.0.3リリース
祝日の自動取得機能が正常に動作しない問題の改善。

ver1.0.2以下の場合で祝日の自動取得機能をONにしている場合は修正が必要です。

ページ上部に記載しておりますのでご確認いただければと思います。

2021.05.20 v1.0.2リリース
管理画面における反射型クロスサイトスクリプティングの指摘と修正方法について

-- 脆弱性に該当する製品名およびバージョン

※ver.1.0.0～ver.1.0.1

（バージョンはadmin/include/config.php内の上部に記載しています）

確認済対象ブラウザ：（Firefox/Chromeで確認）

-- 脆弱性の内容

管理画面にアクセスしたユーザーを悪意のあるページに誘導することで、ウェブブラウザ上で任意のスクリプトが実行される可能性。

この条件が成立するには管理画面にログインしている管理者を特定のページに誘導する必要があることから、実際に発生する可能性は限りなく低いと思われます。これまでに実害の報告などは届いておりません。

ただ念の為、下記手順にて修正を行なっていただければと思います。

-- 脆弱性への対応方法と適用方法

最新版をダウンロードの上で設定ファイルconfig.phpのみを差し替えていただくか（設定が初期化されます）、

または以下手順で修正を行なってください。

config.phpの723行目付近の以下の箇所。

※ファイル内で1箇所しかありませんので間違うことはありません。

$scheduleCalendar = '<form action="?ym='.$getYm.'" method="post">';

↓以下のように修正いただくか、そのままコピペください。

$scheduleCalendar = '<form action="?ym='.h($getYm).'" method="post">';

※「$getYm」をh()で囲むだけです。

以上、これだけです。念の為、管理画面で更新などの操作を行なってください。

特に問題がなければ完了です。もし万が一問題が発生した場合は戻していただくか、お問い合わせください。

-- 謝辞

apple502j様並びに情報処理推進機構 IPA様、JPCERT/CC 脆弱性コーディネーショングループ様にはこの場を借りて感謝申し上げます。

2020.07.30 1.0.1 リリース
脆弱性対策に伴うコード修正

クロスサイト・リクエスト・フォージェリ（CSRF）対策及びセキュリティ強化のためセッション名の変更。

-- 脆弱性に該当する製品名およびバージョン

[【Calendar01】（3デバイス対応）PHP営業日・スケジュールカレンダーフリー（無料）版](../calendar/01.php)

[【Calendar02】PHP営業日・スケジュールカレンダー(テキスト入力付)　フリー・無料版](../calendar/02.php)

※ver.1.0.0（2020/07/30以降にダウンロードされた方は該当しません。）

（バージョンはReadmeまたはconfig.php内に記載しています）

確認済対象ブラウザ：（Firefox/Chromeで確認）

-- 脆弱性の内容

1，クロスサイト・リクエスト・フォージェリ（CSRF）

管理画面へログイン中の管理者が悪意のある第三者が作成した罠ページへ誘導された場合に、特定のリンクをクリックさせることによって任意のスクリプトを含む文字列が投稿され、閲覧者側で任意のスクリプトが実行される可能性。

2，特定の条件下において、遠隔の第三者に管理者権限で当該製品にログインされる問題。

この条件が成立するには第三者があなたのサイトのサーバー上に無断でファイルを設置する必要があることから、この問題が実際に発生する可能性は限りなく低いと思われます。これまでに実害の報告などは届いておりません。

ユーザーにとって利便性が良いため、あえてそうしていたということもありますので、
非常に判断が難しいものでしたが、今回の指摘を真摯に受け止め、また利便性よりも安全性を優先するという判断としました。

-- 脆弱性への対応方法と適用方法

1，クロスサイト・リクエスト・フォージェリ（CSRF）

最新版をダウンロードいただき、既存のadmin.phpのみを差し替えて（上書き）下さい。

複数の複雑な条件が重ならない限り本脆弱性は発生しないため、設置中のものがすぐに攻撃対象となる可能性は低いと考えていますが、大変お手数おかけしますが出来る限りご対応頂きますようお願い申し上げます。

問題が出た場合にはお気軽にお問い合わせよりご連絡下さい。

2，特定の条件下において、遠隔の第三者に管理者権限で当該製品にログインされる問題。

以下手順で修正を行なってください。

1，admin.phpをエディタソフトで開いていただき、

「session\_start();」を見つけて下さい。（ファイル内に1箇所しかないため検索すればすぐに見つかります）

2，この「session\_start();」の上に以下1行をコピペして下さい。

session\_name('PHPSystem');
※「PHPSystem」部分の文字は変更して下さい。英数字のみとして下さい。

例

**session\_name('PHPSystem123');

session\_start();**

※順番に注意して下さい。必ずsession\_start();の上に追加下さい。

以上、これだけです。

もしすでに「session\_name()」がある場合はすでに対策済のバージョンですので変更不要です。

尚、当サイトの管理画面があるプログラムを複数設置している場合で一度のログイン認証で相互に行き来出来たほうが良い場合はsession\_nameの文字列を同じものとして下さい。

-- 謝辞

ご報告いただきました「三井物産セキュアディレクション株式会社　東内様」、

並びに情報処理推進機構 IPA様、JPCERT/CC 脆弱性ハンドリングチーム様にはこの場を借りて感謝申し上げます。

2015.06.19
サーバーのPHPのバージョンがPHP4.○○の場合に管理画面で翌月、前月が「1月」と表示されてしまう。及び表示側で前月に戻れない不具合を修正しました。PHP5以上であれば問題はありませんでしたので、今現在設置中の方は特に問題はございません。
（今現在大多数のサーバーではPHP5以上のため基本的には問題ありません）

ご連絡いただきましたI様にはこの場を借りて感謝申し上げます。

2014.11.25

2014.11.17からのGoogleカレンダーAPIの仕様変更に伴い、祝日データが自動で取得されない不具合を修正しました。2014.11.25以前にダウンロードされた方は大変お手数ですが、現在配布中の最新版をダウンロードいただくか、修正をお願い致します 。

[GoogleAPIの仕様変更に伴う既存ファイルの修正方法](holiday_update.php)

今後は祝日自動取得にGooglAPIキーが必要になります。→googleにて無料で取得できます。

または最新版に限りますが、設定ファイルでこの機能をOFFにし、このサイトから祝日用のデータファイルをダウンロードの上、手動でアップする方法もあります。またはそもそも祝日設定が不要であればOFFのままで運用可能です。

2014.02.28　Calenderのスペルが間違っていたものを修正しました。ソースコード内のスペルも変更しています。（Calender→Calendar）

2014.02.01　インラインフレーム（iframe）での設置のみを考慮していましたが、既存のページにも直接埋め込めるよう修正しました。但し埋め込み先のページの文字コードがUTF-8である必要があります。

2014.01.19　スマホ、携帯版は表形式ではなく、縦長のリスト形式で表示するよう修正。PCは表形式、リスト形式選択可能に（デフォルトは表形式）

2013/9/4　Beta版としてプログラムの配布を開始

## PHPメールフォーム（無料版）

* [【MailForm01】メールフォーム　フリー](../mail/01.php)
* [【MultiLangForm01】多言語対応版](../mail/multi01.php) ![](../common/img/icon/new.gif)

## PHPメールフォーム（有料版）

* [【MailForm02】アドレス2重チェック付き](../mail/02.php)
* [【MailForm03】CSV保存付き](../mail/03.php)
* [【MailForm04】禁止ワード、禁止IP](../mail/04.php)
* [【MailForm05】ファイル添付機能](../mail/06.php)
* [【MailForm07】送信先振り分け機能付き](../mail/07.php)
* [**【MailFormFull】全機能搭載版（購入はこちら）**](../mail/05.php)
* [フォームのカスタマイズ](../mailform_order.php)
* [フォーム作成依頼](../contact.php#form_sakusei)

## 新着情報・更新履歴CMS（無料版）

* [【PKOBO-News01】](../news/pkobo-news01.php) ![](../common/img/icon/new.gif)

## 投票・アンケートシステム（無料版）

* [【PKOBO-vote01】投票・アンケート](../vote/01.php) ![](../common/img/icon/new.gif)

## テロップCMS（無料版）

* [【Telop01】テロップ・ニュースティッカー](../telop/01.php)

## 写真ギャラリーCMS（無料版）

* [【Gallery01】写真ギャラリー](../gallery/01.php)

## 営業日カレンダーCMS（無料版）

* [【Calendar01】シンプル版](../calendar/01.php)
* [【Calendar02】テキスト入力付き](../calendar/02.php)

## 営業日カレンダーCMS（有料版）

* [【Calendar03】プルダウン・テキスト入力付き](../calendar/03.php)

## カレンダー予約フォーム（無料版）

* [【CalendarForm01】カレンダー予約フォーム](../calendar_form/01.php)

## カレンダー予約フォーム（有料版）

* [【CalendarForm02】カレンダー予約フォーム

  　　CSV保存機能付き](../calendar_form/02.php) ![](../common/img/icon/new.gif)

## リンク集ページCMS（無料版）

* [【Link01】リンク集ページCMS](../link/01.php)

## アクセスカウンター（無料版）

* [テキスト版、画像版](../counter/01.php)

## ダウンロードカウンター（無料版）

* [ダウンロードカウンター01](../download_count/01.php)

## その他

* [【PKOBO-CS-API】API連携中古車情報システム](../product/cs-api.php)

[![メールフォームの各種カスタマイズならお任せ下さい](../common/img/side_ban02.png)](https://www.php-factory.net/mailform_order.php)
[![業務効率化が可能なPHPオリジナルCMS制作します](../common/img/side_ban01.png)](https://www.php-factory.net/cms_order.php)
## 役立つかも？なもの

* [指定URLページのファイルサイズ計測](../trivia/13.php)
* [パチスロ当たりシミュレーター](../trivia/08.php)

## 豆知識や役立ち事など

* [PHPが使えるレンタルサーバー比較](../server.php)
* [htaccessでBasic認証](../trivia/01.php)
* [Yahooジオプラスへの導入について（重要）](../trivia/02.php)
* [Yahooジオプラスでログイン不具合について](../trivia/07.php)
* [UTF-8使用時の注意点（BOMあり、なし）](../trivia/03.php)
* [JSでコピー＆ペースト禁止処理](../trivia/04.php)
* [サーバーのphp.iniによるアップロードファイルの最大容量の確認と容量制限の変更](../trivia/05.php)
* [迷惑メール、スパムメール対策](../trivia/09.php)
* [フォームの基礎知識](../trivia/17.php)
* [送信ボタン連打による多重送信防止](../trivia/18.php)
* [迷惑メール扱いされる場合の対策](../trivia/21.php)

## PHPについて

* [PHP基礎の基礎](../aboutphp/01.php)
* [PHPマニュアル（外部サイト）](http://php.net/manual/ja/index.php)
* [XAMPP（外部サイト）](http://www.apachefriends.org/jp/xampp-windows.html)

## 各種情報

* [よくある質問](../faq.php)
* [有料サポート](https://www.php-factory.net/support.php)
* [カスタマイズ・設置代行・お問い合わせ](https://www.php-factory.net/contact.php)
* [事業概要](../company.php)
* [ご利用規約](../convention.php)
* [運営者プロフィール](../profile.php)
* [プライバシーポリシー](../privacy.php)
* [特定商取引法に基づく表示](../policy.php)
* [リンクについて](../about_link.php)
* [Ken'sWEB](http://www.kens-web.com/)（外部ブログ）

![](../common/img/contents_bottom.png)

[PAGE TOP](#outline)

｜[HOME](../)｜[事業概要](../company.php)｜[ご利用規約](../convention.php)｜[運営者プロフィール](../profile.php)｜[カスタマイズ・設置代行・お問い合わせ](https://www.php-factory.net/contact.php)｜[有料サポート](https://www.php-factory.net/support.php)｜[プライバシーポリシー](../privacy.php)｜

Copyright [PHP工房](../). All Rights Reserved



=== Content from jvndb.jvn.jp_f31b0e9b_20250119_132630.html ===


![JVN iPedia](/en/common/img/en_logo.gif)
Last Updated:2020/07/31

| [[Japanese]](/ja/contents/2020/JVNDB-2020-000051.html) | |
| --- | --- |
| JVNDB-2020-000051 | |
| Multiple vulnerabilities in multiple PHP Factory products | |
| Overview | |
| Multiple products provided by PHP Factory contain multiple vulnerabilities listed below. | |
| CVSS Severity ([What is CVSS?](/en/nav/jvndbhelp.html#jvndb3)) | |
| **CVSS V3 Severity:Base Metrics [4.8](/cvss/en/v3.html#CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:L/I:L/A:N) (Medium) [IPA Score]**  * Attack Vector: Network * Attack Complexity: High * Privileges Required: None * User Interaction: None * Scope: Unchanged * Confidentiality Impact: Low * Integrity Impact: Low * Availability Impact: None  **CVSS V2 Severity:Base Metrics [4.0](/cvss/en/v2.html#AV:N/AC:H/Au:N/C:P/I:P/A:N) (Medium) [IPA Score]**  * Access Vector: Network * Access Complexity: High * Authentication: None * Confidentiality Impact: Partial * Integrity Impact: Partial * Availability Impact: None   The above CVSS base scores have been assigned for CVE-2020-5616 | |
| ---   **CVSS V3 Severity: Base Metrics: [4.3](/cvss/ja/v3.html#/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N) (Medium) [IPA Score]**  * Attack Vector: Network * Attack Complexity: Low * Privileges Required: None * User Interaction: Required * Scope: Unchanged * Confidentiality Impact: None * Integrity Impact: Low * Availability Impact: None **CVSS V2 Severity:****Base Metrics: [2.6](/cvss/ja/v2.html#AV:N/AC:H/Au:N/C:N/I:P/A:N) (Low) [IPA Score]**  * Access Vector: Network * Access Complexity: High * Authentication: None * Confidentiality Impact: None * Integrity Impact: Partial * Availability Impact: None The above CVSS base scores have been assigned for CVE-2020-5615 | |
| Affected Products | |
|  | |
| PHP Kobo  * [Calendar01] (for 3 Devices) PHP Business Days, Schedule Calendar free edition * PHP Business Days, Schedule Calendar Free (Text input) * (Acceptance Limit)Appoinment, Application Form, Business Calendar Free * Photo Gallery CMS for PC, smartphone and feature phone (Free) * PHP Link CMS Free * PHP New Information, Notice, News CMS Program Free * PHP Vote, Questionnaire System (Preventing Countinuous Voting), CMS Free * [Telop01] PHP Telop, News Sticker, Headline CMS free edition | |
| **CVE-2020-5615** \* [Calendar01] free edition ver1.0.0 \* [Calendar02] free edition ver1.0.0 **CVE-2020-5616** \* [Calendar01] free edition ver1.0.0 \* [Calendar02] free edition ver1.0.0 \* [PKOBO-News01] free edition ver1.0.3 and earlier \* [PKOBO-vote01] free edition ver1.0.1 and earlier \* [Telop01] free edition ver1.0.0 \* [Gallery01] free edition ver1.0.3 and earlier \* [CalendarForm01] free edition ver1.0.3 and earlier \* [Link01] free edition ver1.0.0 | |
| Impact | |
| \* If a user views a malicious page while logged in, unintended operations may be performed - CVE-2020-5615 | |
| Solution | |
| [Update the software] - CVE-2020-5615 | |
| Vendor Information | |
| PHP Kobo  * PHP Kobo : [[Calendar01] free edition](https://www.php-factory.net/calendar/01.php) (in Japanese) * PHP Kobo : [[Calendar02] free edition](https://www.php-factory.net/calendar/02.php) (in Japanese) * PHP Kobo :  [[PKOBO-News01] free edition](https://www.php-factory.net/news/pkobo-news01.php) (in Japanese) * PHP Kobo : [[PKOBO-vote01] free edition](https://www.php-factory.net/vote/01.php) (in Japanese) * PHP Kobo : [[Telop01] free edition](https://www.php-factory.net/telop/01.php) (in Japanese) * PHP Kobo : [[Gallery01] free edition](https://www.php-factory.net/gallery/01.php) (in Japanese) * PHP Kobo : [[CalendarForm01] free edition](https://www.php-factory.net/calendar_form/01.php) (in Japanese) * PHP Kobo : [[Link01] free edition](https://www.php-factory.net/link/01.php) (in Japanese) | |
| CWE ([What is CWE?](http://www.ipa.go.jp/security/english/vuln/CWE_en.html)) | |
| 1. [Permissions(CWE-264)](https://www.ipa.go.jp/en/security/vulnerabilities/cwe.html) [IPA Evaluation] 2. [Cross-Site Request Forgery(CWE-352)](https://www.ipa.go.jp/en/security/vulnerabilities/cwe.html) [IPA Evaluation] | |
| CVE ([What is CVE?](http://www.ipa.go.jp/security/english/vuln/CVE_en.html)) | |
| 1. [CVE-2020-5615](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-5615) 2. [CVE-2020-5616](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-5616) | |
| References | |
| 1. JVN : [JVN#73169744](https://jvn.jp/en/jp/JVN73169744/index.html) 2. National Vulnerability Database (NVD) : [CVE-2020-5615](https://nvd.nist.gov/vuln/detail/CVE-2020-5615) 3. National Vulnerability Database (NVD) : [CVE-2020-5616](https://nvd.nist.gov/vuln/detail/CVE-2020-5616) | |
| Revision History | |
| * [2020/07/31] | |

| --- | |
| --- | --- |
| Date Public | 2020/07/31 |
| Date First Published | 2020/07/31 |
| Date Last Updated | 2020/07/31 |
| --- | |

* JVN
* [HOME](https://jvn.jp/en/)
* [What is JVN ?](https://jvn.jp/en/nav/jvn.html)
* [Instructions](https://jvn.jp/en/nav/jvnhelp.html)
* [List of Vulnerability Report](https://jvn.jp/en/report/index.html)
* [VN\_JP](https://jvn.jp/en/jp/index.html)
* [VN\_JP(Unreachable)](https://jvn.jp/en/adj/index.html)
* [VN\_VU](https://jvn.jp/en/vu/index.html)
* [TA](https://jvn.jp/en/ta/index.html)
* [TRnotes](https://jvn.jp/en/tr/index.html)
* [JVN iPedia](/en/)
* [Search](/search/index.php?mode=_vulnerability_search_IA_VulnSearch&lang=en)
* [What is JVN iPedia?](/en/nav/jvndb.html)
* [How to Use?](/en/nav/jvndbhelp.html)
* [MyJVN](/en/apis/myjvn/index.html)
* [JVNJS/RSS](https://jvn.jp/en/rss/index.html)
* [Vendor List](https://jvn.jp/en/nav/index.html)
* [List of unreachable developers](https://jvn.jp/en/reply/index.html)
* [Contact](https://jvn.jp/en/contact/index.html)

![Copyright © 2007- IPA. All rights reserved.](/common/img/copyright.png)


