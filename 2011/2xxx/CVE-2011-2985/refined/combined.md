=== Content from lists.opensuse.org_e11968e7_20250125_224224.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/SWVDDHAD7E5EB2ZZU6X5GC3P5NNYQ2UB/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/SWVDDHAD7E5EB2ZZU6X5GC3P5NNYQ2UB/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/SWVDDHAD7E5EB2ZZU6X5GC3P5NNYQ2UB/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/SWVDDHAD7E5EB2ZZU6X5GC3P5NNYQ2UB/)

Ã—
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/SWVDDHAD7E5EB2ZZU6X5GC3P5NNYQ2UB/#SWVDDHAD7E5EB2ZZU6X5GC3P5NNYQ2UB)

# [security-announce] SUSE Security Announcement: Mozilla Firefox (SUSE-SA:2011:037)

![](https://seccdn.libravatar.org/avatar/bff0c215e01f23fcee6fe49e65fae458.jpg?s=120&d=mm&r=g)
## [Marcus Meissner](/archives/users/7f6ceefc1eac47b3aa8bbc0c4e1230fe/ "See the profile for Marcus Meissner")

29 Aug
2011

29 Aug
'11

11:12

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
SUSE Security Announcement
Package: MozillaFirefox,MozillaThunderbird,seamonkey
Announcement ID: SUSE-SA:2011:037
Date: Mon, 29 Aug 2011 12:00:00 +0000
Affected Products: openSUSE 11.3
openSUSE 11.4
SUSE Linux Enterprise Server 11 SP1
SUSE Linux Enterprise Desktop 11 SP1
SUSE Linux Enterprise Server 10 SP4
SUSE Linux Enterprise Desktop 10 SP4
SUSE Linux Enterprise Server 10 SP3
SLE SDK 10 SP3
SLE SDK 10 SP4
SUSE Linux Enterprise Software Development Kit 11 SP1
Vulnerability Type: remote code execution
CVSS v2 Base Score: 6.8 (AV:N/AC:M/Au:N/C:P/I:P/A:P)
SUSE Default Package: yes
Cross-References: CVE-2011-0084, CVE-2011-2378, CVE-2011-2980
CVE-2011-2981, CVE-2011-2982, CVE-2011-2983
CVE-2011-2984, CVE-2011-2985, CVE-2011-2986
CVE-2011-2987, CVE-2011-2988, CVE-2011-2989
CVE-2011-2990, CVE-2011-2991, CVE-2011-2992
CVE-2011-2993, MFSA 2011-29, MFSA 2011-30
MFSA 2011-32, MFSA 2011-33
Content of This Advisory:
1) Security Vulnerability Resolved:
Mozilla Firefox 3.6.20 / 6.0 security upgrade
Problem Description
2) Solution or Work-Around
3) Special Instructions and Notes
4) Package Location and Checksums
5) Pending Vulnerabilities, Solutions, and Work-Arounds:
none
6) Authenticity Verification and Additional Information
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
1) Problem Description and Brief Discussion
Mozilla released a round of security updates.
Mozilla Firefox was updated to version 6 on openSUSE 11.4,
Mozilla Firefox was updated to version 3.6.20 on openSUSE 11.3 and
SUSE Linux Enterprise 10 and 11.
Seamonkey was updated to 2.3 on openSUSE 11.3,11.4
Mozilla Thunderbird was updated to 3.1.2 on openSUSE 11.3,11.4.
Mozilla XULRunner was updated to 1.9.2.20.
The updates bring new features, fix bugs and security issues.
Mozilla Firefox 6:
<http://www.mozilla.org/security/announce/2011/mfsa2011-29.html>
Mozilla Firefox 3.6.20:
<http://www.mozilla.org/security/announce/2011/mfsa2011-30.html>
Mozilla Seamonkey 2.3:
<http://www.mozilla.org/security/announce/2011/mfsa2011-33.html>
Mozilla Thunderbird:
<http://www.mozilla.org/security/announce/2011/mfsa2011-32.html>
\* Miscellaneous memory safety hazards:
Mozilla identified and fixed several memory safety bugs in the
browser engine used in Firefox 4, Firefox 5 and other Mozilla-based
products. Some of these bugs showed evidence of memory corruption
under certain circumstances, and we presume that with enough effort
at least some of these could be exploited to run arbitrary code.
Gary Kwong, Igor Bukanov, Nils and Bob Clary reported memory safety
issues which affected Thunderbird 3.1. (CVE-2011-2982)
Aral Yaman reported a WebGL crash which affected Firefox 4 and
Firefox 5. (CVE-2011-2989)
Vivekanand Bolajwar reported a JavaScript crash which affected
Firefox 4 and Firefox 5. (CVE-2011-2991)
Bert Hubert and Theo Snelleman of Fox-IT reported a crash in the
OGG reader which affected Firefox 4 and Firefox 5. (CVE-2011-2992)
Mozilla developers and community members Robert Kaiser, Jesse
Ruderman, moz\_bug\_r\_a4, Mardeg, Gary Kwong, Christoph Diehl, Martijn
Wargers, Travis Emmitt, Bob Clary and Jonathan Watt reported memory
safety issues which affected Firefox 4 and Firefox 5. (CVE-2011-2985)
\* Unsigned scripts can call script inside signed JAR
Rafael Gieschke reported that unsigned JavaScript could call into
script inside a signed JAR thereby inheriting the identity of the
site that signed the JAR as well as any permissions that a user
had granted the signed JAR. (CVE-2011-2993)
\* String crash using WebGL shaders
Michael Jordon of Context IS reported that an overly long shader
program could cause a buffer overrun and crash in a string class
used to store the shader source code. (CVE-2011-2988)
\* Heap overflow in ANGLE library
Michael Jordon of Context IS reported a potentially exploitable heap
overflow in the ANGLE library used by Mozilla's WebGL
implementation. (CVE-2011-2987)
\* Crash in SVGTextElement.getCharNumAtPosition()
Security researcher regenrecht reported via TippingPoint's Zero
Day Initiative that a SVG text manipulation routine contained a
dangling pointer vulnerability. (CVE-2011-0084)
\* Credential leakage using Content Security Policy reports
Mike Cardwell reported that Content Security Policy violation reports
failed to strip out proxy authorization credentials from the list
of request headers. Daniel Veditz reported that redirecting to
a website with Content Security Policy resulted in the incorrect
resolution of hosts in the constructed policy. (CVE-2011-2990)
\* Cross-origin data theft using canvas and Windows D2D
nasalislarvatus3000 reported that when using Windows D2D hardware
acceleration, image data from one domain could be inserted into a
canvas and read by a different domain. (CVE-2011-2986)
\* Privilege escalation using event handlers
Mozilla security researcher moz\_bug\_r\_a\_4 reported a vulnerability
in event management code that would permit JavaScript to be run
in the wrong context, including that of a different website or
potentially in a chrome-privileged context. (CVE-2011-2981)
\* Dangling pointer vulnerability in appendChild
Security researcher regenrecht reported via TippingPoint's Zero
Day Initiative that appendChild did not correctly account for DOM
objects it operated upon and could be exploited to dereference an
invalid pointer. (CVE-2011-2378)
\* Privilege escalation dropping a tab element in content area
Mozilla security researcher moz\_bug\_r\_a4 reported that web
content could receive chrome privileges if it registered for drop
events and a browser tab element was dropped into the content
area. (CVE-2011-2984)
\* Binary planting vulnerability in ThinkPadSensor::Startup
Security researcher Mitja Kolsek of Acros Security reported that
ThinkPadSensor::Startup could potentially be exploited to load a
malicious DLL into the running process. (CVE-2011-2980)
This issue affects probably only MS Windows.
\* Private data leakage using RegExp.input
Security researcher shutdown reported that data from other domains
could be read when RegExp.input was set. (CVE-2011-2983)
2) Solution or Work-Around
There is no known workaround, please install the update packages.
3) Special Instructions and Notes
Please restart running instances of Mozilla Firefox/Thunderbird and/or seamonkey
after the update.
4) Package Location and Checksums
The preferred method for installing security updates is to use the YaST
"Online Update" module or the "zypper" commandline tool. The package and
patch management stack will detect which updates are required and
automatically perform the necessary steps to verify and install them.
Alternatively, download the update packages for your distribution manually
and verify their integrity by the methods listed in Section 6 of this
announcement. Then install the packages using the command
rpm -Fhv <file.rpm>
to apply the update, replacing <file.rpm> with the filename of the
downloaded RPM package.
x86 Platform:
openSUSE 11.4:
[http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-6.0-2.2.1.i...](http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-6.0-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-branding-up...](http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-branding-upstream-6.0-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-buildsymbol...](http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-buildsymbols-6.0-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-devel-6.0-2...](http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-devel-6.0-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-translation...](http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-translations-common-6.0-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-translation...](http://download.opensuse.org/update/11.4/rpm/i586/MozillaFirefox-translations-other-6.0-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/MozillaThunderbird-3.1.12-...](http://download.opensuse.org/update/11.4/rpm/i586/MozillaThunderbird-3.1.12-0.11.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/MozillaThunderbird-buildsy...](http://download.opensuse.org/update/11.4/rpm/i586/MozillaThunderbird-buildsymbols-3.1.12-0.11.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/MozillaThunderbird-devel-3...](http://download.opensuse.org/update/11.4/rpm/i586/MozillaThunderbird-devel-3.1.12-0.11.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/MozillaThunderbird-transla...](http://download.opensuse.org/update/11.4/rpm/i586/MozillaThunderbird-translations-common-3.1.12-0.11.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/MozillaThunderbird-transla...](http://download.opensuse.org/update/11.4/rpm/i586/MozillaThunderbird-translations-other-3.1.12-0.11.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/enigmail-1.1.2+3.1.12-0.11...](http://download.opensuse.org/update/11.4/rpm/i586/enigmail-1.1.2%2B3.1.12-0.11.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/libfreebl3-3.12.11-1.3.1.i...](http://download.opensuse.org/update/11.4/rpm/i586/libfreebl3-3.12.11-1.3.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/libsoftokn3-3.12.11-1.3.1....](http://download.opensuse.org/update/11.4/rpm/i586/libsoftokn3-3.12.11-1.3.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-js192-1.9.2.20-1.2...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-js192-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nspr-4.8.9-1.3.1.i...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nspr-4.8.9-1.3.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nspr-devel-4.8.9-1...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nspr-devel-4.8.9-1.3.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nss-3.12.11-1.3.1....](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nss-3.12.11-1.3.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nss-certs-3.12.11-...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nss-certs-3.12.11-1.3.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nss-devel-3.12.11-...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nss-devel-3.12.11-1.3.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nss-sysinit-3.12.1...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nss-sysinit-3.12.11-1.3.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nss-tools-3.12.11-...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-nss-tools-3.12.11-1.3.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-1.9.2...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-build...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-buildsymbols-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-devel...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-devel-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-gnome...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-gnome-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-trans...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-translations-common-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-trans...](http://download.opensuse.org/update/11.4/rpm/i586/mozilla-xulrunner192-translations-other-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-2.3-2.2.1.i586.r...](http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-2.3-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-dom-inspector-2....](http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-dom-inspector-2.3-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-irc-2.3-2.2.1.i5...](http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-irc-2.3-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-translations-com...](http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-translations-common-2.3-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-translations-oth...](http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-translations-other-2.3-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-venkman-2.3-2.2....](http://download.opensuse.org/update/11.4/rpm/i586/seamonkey-venkman-2.3-2.2.1.i586.rpm)
openSUSE 11.3:
[http://download.opensuse.org/update/11.3/rpm/i586/MozillaFirefox-3.6.20-0.2....](http://download.opensuse.org/update/11.3/rpm/i586/MozillaFirefox-3.6.20-0.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/MozillaFirefox-branding-up...](http://download.opensuse.org/update/11.3/rpm/i586/MozillaFirefox-branding-upstream-3.6.20-0.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/MozillaFirefox-translation...](http://download.opensuse.org/update/11.3/rpm/i586/MozillaFirefox-translations-common-3.6.20-0.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/MozillaFirefox-translation...](http://download.opensuse.org/update/11.3/rpm/i586/MozillaFirefox-translations-other-3.6.20-0.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/MozillaThunderbird-3.1.12-...](http://download.opensuse.org/update/11.3/rpm/i586/MozillaThunderbird-3.1.12-0.15.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/MozillaThunderbird-devel-3...](http://download.opensuse.org/update/11.3/rpm/i586/MozillaThunderbird-devel-3.1.12-0.15.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/MozillaThunderbird-transla...](http://download.opensuse.org/update/11.3/rpm/i586/MozillaThunderbird-translations-common-3.1.12-0.15.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/MozillaThunderbird-transla...](http://download.opensuse.org/update/11.3/rpm/i586/MozillaThunderbird-translations-other-3.1.12-0.15.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/enigmail-1.1.2+3.1.12-0.15...](http://download.opensuse.org/update/11.3/rpm/i586/enigmail-1.1.2%2B3.1.12-0.15.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/libfreebl3-3.12.11-1.2.1.i...](http://download.opensuse.org/update/11.3/rpm/i586/libfreebl3-3.12.11-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/libsoftokn3-3.12.11-1.2.1....](http://download.opensuse.org/update/11.3/rpm/i586/libsoftokn3-3.12.11-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-js192-1.9.2.20-1.2...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-js192-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nspr-4.8.9-1.2.1.i...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nspr-4.8.9-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nspr-devel-4.8.9-1...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nspr-devel-4.8.9-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nss-3.12.11-1.2.1....](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nss-3.12.11-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nss-certs-3.12.11-...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nss-certs-3.12.11-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nss-devel-3.12.11-...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nss-devel-3.12.11-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nss-sysinit-3.12.1...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nss-sysinit-3.12.11-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nss-tools-3.12.11-...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-nss-tools-3.12.11-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-1.9.2...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-build...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-buildsymbols-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-devel...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-devel-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-gnome...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-gnome-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-trans...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-translations-common-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-trans...](http://download.opensuse.org/update/11.3/rpm/i586/mozilla-xulrunner192-translations-other-1.9.2.20-1.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-2.3-2.2.1.i586.r...](http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-2.3-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-dom-inspector-2....](http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-dom-inspector-2.3-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-irc-2.3-2.2.1.i5...](http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-irc-2.3-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-translations-com...](http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-translations-common-2.3-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-translations-oth...](http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-translations-other-2.3-2.2.1.i586.rpm)
[http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-venkman-2.3-2.2....](http://download.opensuse.org/update/11.3/rpm/i586/seamonkey-venkman-2.3-2.2.1.i586.rpm)
x86-64 Platform:
openSUSE 11.4:
[http://download.opensuse.org/update/11.4/rpm/x86\_64/MozillaFirefox-6.0-2.2.1...](http://download.opensuse.org/update/11.4/rpm/x86_64/MozillaFirefox-6.0-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/MozillaFirefox-branding-...](http://download.opensuse.org/update/11.4/rpm/x86_64/MozillaFirefox-branding-upstream-6.0-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/MozillaFirefox-buildsymb...](http://download.opensuse.org/update/11.4/rpm/x86_64/MozillaFirefox-buildsymbols-6.0-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/MozillaFirefox-devel-6.0...](http://download.opensuse.org/update/11.4/rpm/x86_64/MozillaFirefox-devel-6.0-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/MozillaFirefox-translati...](http://download.opensuse.org/update/11.4/rpm/x86_64/MozillaFirefox-translations-common-6.0-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/MozillaFirefox-translati...](http://download.opensuse.org/update/11.4/rpm/x86_64/MozillaFirefox-translations-other-6.0-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/MozillaThunderbird-3.1.1...](http://download.opensuse.org/update/11.4/rpm/x86_64/MozillaThunderbird-3.1.12-0.11.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/MozillaThunderbird-build...](http://download.opensuse.org/update/11.4/rpm/x86_64/MozillaThunderbird-buildsymbols-3.1.12-0.11.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/MozillaThunderbird-devel...](http://download.opensuse.org/update/11.4/rpm/x86_64/MozillaThunderbird-devel-3.1.12-0.11.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/MozillaThunderbird-trans...](http://download.opensuse.org/update/11.4/rpm/x86_64/MozillaThunderbird-translations-common-3.1.12-0.11.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/MozillaThunderbird-trans...](http://download.opensuse.org/update/11.4/rpm/x86_64/MozillaThunderbird-translations-other-3.1.12-0.11.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/enigmail-1.1.2+3.1.12-0....](http://download.opensuse.org/update/11.4/rpm/x86_64/enigmail-1.1.2%2B3.1.12-0.11.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/libfreebl3-3.12.11-1.3.1...](http://download.opensuse.org/update/11.4/rpm/x86_64/libfreebl3-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/libfreebl3-32bit-3.12.11...](http://download.opensuse.org/update/11.4/rpm/x86_64/libfreebl3-32bit-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/libsoftokn3-3.12.11-1.3....](http://download.opensuse.org/update/11.4/rpm/x86_64/libsoftokn3-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/libsoftokn3-32bit-3.12.1...](http://download.opensuse.org/update/11.4/rpm/x86_64/libsoftokn3-32bit-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-js192-1.9.2.20-1...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-js192-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-js192-32bit-1.9....](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-js192-32bit-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-nspr-32bit-4.8.9...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-nspr-32bit-4.8.9-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-nspr-4.8.9-1.3.1...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-nspr-4.8.9-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-nspr-devel-4.8.9...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-nspr-devel-4.8.9-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-nss-3.12.11-1.3....](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-nss-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-nss-32bit-3.12.1...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-nss-32bit-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-nss-certs-3.12.1...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-nss-certs-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-nss-certs-32bit-...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-nss-certs-32bit-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-nss-devel-3.12.1...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-nss-devel-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-nss-sysinit-3.12...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-nss-sysinit-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-nss-sysinit-32bi...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-nss-sysinit-32bit-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-nss-tools-3.12.1...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-nss-tools-3.12.11-1.3.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-xulrunner192-1.9...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-xulrunner192-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-xulrunner192-32b...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-xulrunner192-32bit-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-xulrunner192-bui...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-xulrunner192-buildsymbols-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-xulrunner192-dev...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-xulrunner192-devel-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-xulrunner192-gno...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-xulrunner192-gnome-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-xulrunner192-gno...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-xulrunner192-gnome-32bit-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-xulrunner192-tra...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-xulrunner192-translations-common-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-xulrunner192-tra...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-xulrunner192-translations-common-32bit-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-xulrunner192-tra...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-xulrunner192-translations-other-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/mozilla-xulrunner192-tra...](http://download.opensuse.org/update/11.4/rpm/x86_64/mozilla-xulrunner192-translations-other-32bit-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/seamonkey-2.3-2.2.1.x86\_...](http://download.opensuse.org/update/11.4/rpm/x86_64/seamonkey-2.3-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/seamonkey-dom-inspector-...](http://download.opensuse.org/update/11.4/rpm/x86_64/seamonkey-dom-inspector-2.3-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/seamonkey-irc-2.3-2.2.1....](http://download.opensuse.org/update/11.4/rpm/x86_64/seamonkey-irc-2.3-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/seamonkey-translations-c...](http://download.opensuse.org/update/11.4/rpm/x86_64/seamonkey-translations-common-2.3-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/seamonkey-translations-o...](http://download.opensuse.org/update/11.4/rpm/x86_64/seamonkey-translations-other-2.3-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.4/rpm/x86\_64/seamonkey-venkman-2.3-2....](http://download.opensuse.org/update/11.4/rpm/x86_64/seamonkey-venkman-2.3-2.2.1.x86_64.rpm)
openSUSE 11.3:
[http://download.opensuse.org/update/11.3/rpm/x86\_64/MozillaFirefox-3.6.20-0....](http://download.opensuse.org/update/11.3/rpm/x86_64/MozillaFirefox-3.6.20-0.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/MozillaFirefox-branding-...](http://download.opensuse.org/update/11.3/rpm/x86_64/MozillaFirefox-branding-upstream-3.6.20-0.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/MozillaFirefox-translati...](http://download.opensuse.org/update/11.3/rpm/x86_64/MozillaFirefox-translations-common-3.6.20-0.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/MozillaFirefox-translati...](http://download.opensuse.org/update/11.3/rpm/x86_64/MozillaFirefox-translations-other-3.6.20-0.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/MozillaThunderbird-3.1.1...](http://download.opensuse.org/update/11.3/rpm/x86_64/MozillaThunderbird-3.1.12-0.15.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/MozillaThunderbird-devel...](http://download.opensuse.org/update/11.3/rpm/x86_64/MozillaThunderbird-devel-3.1.12-0.15.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/MozillaThunderbird-trans...](http://download.opensuse.org/update/11.3/rpm/x86_64/MozillaThunderbird-translations-common-3.1.12-0.15.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/MozillaThunderbird-trans...](http://download.opensuse.org/update/11.3/rpm/x86_64/MozillaThunderbird-translations-other-3.1.12-0.15.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/enigmail-1.1.2+3.1.12-0....](http://download.opensuse.org/update/11.3/rpm/x86_64/enigmail-1.1.2%2B3.1.12-0.15.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/libfreebl3-3.12.11-1.2.1...](http://download.opensuse.org/update/11.3/rpm/x86_64/libfreebl3-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/libfreebl3-32bit-3.12.11...](http://download.opensuse.org/update/11.3/rpm/x86_64/libfreebl3-32bit-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/libsoftokn3-3.12.11-1.2....](http://download.opensuse.org/update/11.3/rpm/x86_64/libsoftokn3-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/libsoftokn3-32bit-3.12.1...](http://download.opensuse.org/update/11.3/rpm/x86_64/libsoftokn3-32bit-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-js192-1.9.2.20-1...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-js192-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-js192-32bit-1.9....](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-js192-32bit-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-nspr-32bit-4.8.9...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-nspr-32bit-4.8.9-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-nspr-4.8.9-1.2.1...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-nspr-4.8.9-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-nspr-devel-4.8.9...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-nspr-devel-4.8.9-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-nss-3.12.11-1.2....](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-nss-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-nss-32bit-3.12.1...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-nss-32bit-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-nss-certs-3.12.1...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-nss-certs-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-nss-certs-32bit-...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-nss-certs-32bit-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-nss-devel-3.12.1...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-nss-devel-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-nss-sysinit-3.12...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-nss-sysinit-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-nss-sysinit-32bi...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-nss-sysinit-32bit-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-nss-tools-3.12.1...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-nss-tools-3.12.11-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-xulrunner192-1.9...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-xulrunner192-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-xulrunner192-32b...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-xulrunner192-32bit-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-xulrunner192-bui...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-xulrunner192-buildsymbols-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-xulrunner192-dev...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-xulrunner192-devel-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-xulrunner192-gno...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-xulrunner192-gnome-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-xulrunner192-gno...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-xulrunner192-gnome-32bit-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-xulrunner192-tra...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-xulrunner192-translations-common-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-xulrunner192-tra...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-xulrunner192-translations-common-32bit-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-xulrunner192-tra...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-xulrunner192-translations-other-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/mozilla-xulrunner192-tra...](http://download.opensuse.org/update/11.3/rpm/x86_64/mozilla-xulrunner192-translations-other-32bit-1.9.2.20-1.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/seamonkey-2.3-2.2.1.x86\_...](http://download.opensuse.org/update/11.3/rpm/x86_64/seamonkey-2.3-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/seamonkey-dom-inspector-...](http://download.opensuse.org/update/11.3/rpm/x86_64/seamonkey-dom-inspector-2.3-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/seamonkey-irc-2.3-2.2.1....](http://download.opensuse.org/update/11.3/rpm/x86_64/seamonkey-irc-2.3-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/seamonkey-translations-c...](http://download.opensuse.org/update/11.3/rpm/x86_64/seamonkey-translations-common-2.3-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/seamonkey-translations-o...](http://download.opensuse.org/update/11.3/rpm/x86_64/seamonkey-translations-other-2.3-2.2.1.x86_64.rpm)
[http://download.opensuse.org/update/11.3/rpm/x86\_64/seamonkey-venkman-2.3-2....](http://download.opensuse.org/update/11.3/rpm/x86_64/seamonkey-venkman-2.3-2.2.1.x86_64.rpm)
Sources:
openSUSE 11.4:
[http://download.opensuse.org/update/11.4/rpm/src/MozillaFirefox-6.0-2.2.1.sr...](http://download.opensuse.org/update/11.4/rpm/src/MozillaFirefox-6.0-2.2.1.src.rpm)
[http://download.opensuse.org/update/11.4/rpm/src/MozillaThunderbird-3.1.12-0...](http://download.opensuse.org/update/11.4/rpm/src/MozillaThunderbird-3.1.12-0.11.1.src.rpm)
[http://download.opensuse.org/update/11.4/rpm/src/mozilla-nspr-4.8.9-1.3.1.sr...](http://download.opensuse.org/update/11.4/rpm/src/mozilla-nspr-4.8.9-1.3.1.src.rpm)
[http://download.opensuse.org/update/11.4/rpm/src/mozilla-nss-3.12.11-1.3.1.s...](http://download.opensuse.org/update/11.4/rpm/src/mozilla-nss-3.12.11-1.3.1.src.rpm)
[http://download.opensuse.org/update/11.4/rpm/src/mozilla-xulrunner192-1.9.2....](http://download.opensuse.org/update/11.4/rpm/src/mozilla-xulrunner192-1.9.2.20-1.2.1.src.rpm)
<http://download.opensuse.org/update/11.4/rpm/src/seamonkey-2.3-2.2.1.src.rpm>
openSUSE 11.3:
[http://download.opensuse.org/update/11.3/rpm/src/MozillaFirefox-3.6.20-0.2.1...](http://download.opensuse.org/update/11.3/rpm/src/MozillaFirefox-3.6.20-0.2.1.src.rpm)
[http://download.opensuse.org/update/11.3/rpm/src/MozillaThunderbird-3.1.12-0...](http://download.opensuse.org/update/11.3/rpm/src/MozillaThunderbird-3.1.12-0.15.1.src.rpm)
[http://download.opensuse.org/update/11.3/rpm/src/mozilla-nspr-4.8.9-1.2.1.sr...](http://download.opensuse.org/update/11.3/rpm/src/mozilla-nspr-4.8.9-1.2.1.src.rpm)
[http://download.opensuse.org/update/11.3/rpm/src/mozilla-nss-3.12.11-1.2.1.s...](http://download.opensuse.org/update/11.3/rpm/src/mozilla-nss-3.12.11-1.2.1.src.rpm)
[http://download.opensuse.org/update/11.3/rpm/src/mozilla-xulrunner192-1.9.2....](http://download.opensuse.org/update/11.3/rpm/src/mozilla-xulrunner192-1.9.2.20-1.2.1.src.rpm)
<http://download.opensuse.org/update/11.3/rpm/src/seamonkey-2.3-2.2.1.src.rpm>
Our maintenance customers are notified individually. The packages are
offered for installation from the maintenance web:
SUSE Linux Enterprise Software Development Kit 11 SP1
[http://download.novell.com/patch/finder/?keywords=5c3516aa47640b1f3ca0aae0a2...](http://download.novell.com/patch/finder/?keywords=5c3516aa47640b1f3ca0aae0a2c8f067)
SUSE Linux Enterprise Desktop 11 SP1
[http://download.novell.com/patch/finder/?keywords=5c3516aa47640b1f3ca0aae0a2...](http://download.novell.com/patch/finder/?keywords=5c3516aa47640b1f3ca0aae0a2c8f067)
SUSE Linux Enterprise Server 11 SP1
[http://download.novell.com/patch/finder/?keywords=5c3516aa47640b1f3ca0aae0a2...](http://download.novell.com/patch/finder/?keywords=5c3516aa47640b1f3ca0aae0a2c8f067)
SUSE Linux Enterprise Server 10 SP3
[http://download.novell.com/patch/finder/?keywords=b2e45f3a2377c8c0b0d85d6e8d...](http://download.novell.com/patch/finder/?keywords=b2e45f3a2377c8c0b0d85d6e8dc698c3)
SLE SDK 10 SP3
[http://download.novell.com/patch/finder/?keywords=b2e45f3a2377c8c0b0d85d6e8d...](http://download.novell.com/patch/finder/?keywords=b2e45f3a2377c8c0b0d85d6e8dc698c3)
SUSE Linux Enterprise Desktop 10 SP4
[http://download.novell.com/patch/finder/?keywords=24df2ef0dad5f3b46261e6f993...](http://download.novell.com/patch/finder/?keywords=24df2ef0dad5f3b46261e6f99333badf)
SLE SDK 10 SP4
[http://download.novell.com/patch/finder/?keywords=24df2ef0dad5f3b46261e6f993...](http://download.novell.com/patch/finder/?keywords=24df2ef0dad5f3b46261e6f99333badf)
SUSE Linux Enterprise Server 10 SP4
[http://download.novell.com/patch/finder/?keywords=24df2ef0dad5f3b46261e6f993...](http://download.novell.com/patch/finder/?keywords=24df2ef0dad5f3b46261e6f99333badf)
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
5) Pending Vulnerabilities, Solutions, and Work-Arounds:
none
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
6) Authenticity Verification and Additional Information
- Announcement authenticity verification:
SUSE security announcements are published via mailing lists and on Web
sites. The authenticity and integrity of a SUSE security announcement is
guaranteed by a cryptographic signature in each announcement. All SUSE
security announcements are published with a valid signature.
To verify the signature of the announcement, save it as text into a file
and run the command
gpg --verify <file>
replacing <file> with the name of the file where you saved the
announcement. The output for a valid signature looks like:
gpg: Signature made <DATE> using RSA key ID 3D25D3D9
gpg: Good signature from "SuSE Security Team <security@suse.de>"
where <DATE> is replaced by the date the document was signed.
If the security team's key is not contained in your key ring, you can
import it from the first installation CD. To import the key, use the
command
gpg --import gpg-pubkey-3d25d3d9-36e12d04.asc
- Package authenticity verification:
SUSE update packages are available on many mirror FTP servers all over the
world. While this service is considered valuable and important to the free
and open source software community, the authenticity and the integrity of
a package needs to be verified to ensure that it has not been tampered
with.
The internal rpm package signatures provide an easy way to verify the
authenticity of an RPM package. Use the command
rpm -v --checksig <file.rpm>
to verify the signature of the package, replacing <file.rpm> with the
filename of the RPM package downloaded. The package is unmodified if it
contains a valid signature from build@suse.de with the key ID 9C800ACA.
This key is automatically imported into the RPM database (on
RPMv4-based distributions) and the gpg key ring of 'root' during
installation. You can also find it on the first installation CD and at
the end of this announcement.
- SUSE runs two security mailing lists to which any interested party may
subscribe:
opensuse-security@opensuse.org
- General Linux and SUSE security discussion.
All SUSE security announcements are sent to this list.
To subscribe, send an e-mail to
<opensuse-security+subscribe@opensuse.org>.
opensuse-security-announce@opensuse.org
- SUSE's announce-only mailing list.
Only SUSE's security announcements are sent to this list.
To subscribe, send an e-mail to
<opensuse-security-announce+subscribe@opensuse.org>.
=====================================================================
SUSE's security contact is <security@suse.com> or <security@suse.de>.
The <security@suse.de> public key is listed below.
=====================================================================
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
The information in this advisory may be distributed or reproduced,
provided that the advisory is not modified in any way. In particular, the
clear text signature should show proof of the authenticity of the text.
SUSE Linux Products GmbH provides no warranties of any kind whatsoever
with respect to the information contained in this security advisory.
Type Bits/KeyID Date User ID
pub 2048R/3D25D3D9 1999-03-06 SuSE Security Team <security@suse.de>
pub 1024D/9C800ACA 2000-10-19 SuSE Package Signing Key <build@suse.de>
- -----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.4.2 (GNU/Linux)
mQENAzbhLQQAAAEIAKAkXHe0lWRBXLpn38hMHy03F0I4Sszmoc8aaKJrhfhyMlOA
BqvklPLE2f9UrI4Xc860gH79ZREwAgPt0pi6+SleNFLNcNFAuuHMLQOOsaMFatbz
JR9i4m/lf6q929YROu5zB48rBAlcfTm+IBbijaEdnqpwGib45wE/Cfy6FAttBHQh
1Kp+r/jPbf1mYAvljUfHKuvbg8t2EIQz/5yGp+n5trn9pElfQO2cRBq8LFpf1l+U
P7EKjFmlOq+Gs/fF98/dP3DfniSd78LQPq5vp8RL8nr/o2i7jkAQ33m4f1wOBWd+
cZovrKXYlXiR+Bf7m2hpZo+/sAzhd7LmAD0l09kABRG0JVN1U0UgU2VjdXJpdHkg
VGVhbSA8c2VjdXJpdHlAc3VzZS5kZT6JARUDBRA24S1H5Fiyh7HKPEUBAVcOB/9b
yHYji1/+4Xc2GhvXK0FSJN0MGgeXgW47yxDL7gmR4mNgjlIOUHZj0PEpVjWepOJ7
tQS3L9oP6cpj1Fj/XxuLbkp5VCQ61hpt54coQAvYrnT9rtWEGN+xmwejT1WmYmDJ
xG+EGBXKr+XP69oIUl1E2JO3rXeklulgjqRKos4cdXKgyjWZ7CP9V9daRXDtje63
Om8gwSdU/nCvhdRIWp/Vwbf7Ia8iZr9OJ5YuQl0DBG4qmGDDrvImgPAFkYFzwlqo
choXFQ9y0YVCV41DnR+GYhwl2qBd81T8aXhihEGPIgaw3g8gd8B5o6mPVgl+nJqI
BkEYGBusiag2pS6qwznZiQEVAwUQNuEtBHey5gA9JdPZAQFtOAf+KVh939b0J94u
v/kpg4xs1LthlhquhbHcKNoVTNspugiC3qMPyvSX4XcBr2PC0cVkS4Z9PY9iCfT+
x9WM96g39dAF+le2CCx7XISk9XXJ4ApEy5g4AuK7NYgAJd39PPbERgWnxjxir9g0
Ix30dS30bW39D+3NPU5Ho9TD/B7UDFvYT5AWHl3MGwo3a1RhTs6sfgL7yQ3U+mvq
MkTExZb5mfN1FeaYKMopoI4VpzNVeGxQWIz67VjJHVyUlF20ekOz4kWVgsxkc8G2
saqZd6yv2EwqYTi8BDAduweP33KrQc4KDDommQNDOXxaKOeCoESIdM4p7Esdjq1o
L0oixF12CohGBBARAgAGBQI7HmHDAAoJEJ5A4xAACqukTlQAoI4QzP9yjPohY7OU
F7J3eKBTzp25AJ42BmtSd3pvm5ldmognWF3Trhp+GYkAlQMFEDe3O8IWkDf+zvyS
FQEBAfkD/3GG5UgJj18UhYmh1gfjIlDcPAeqMwSytEHDENmHC+vlZQ/p0mT9tPiW
tp34io54mwr+bLPN8l6B5GJNkbGvH6M+mO7R8Lj4nHL6pyAv3PQr83WyLHcaX7It
Klj371/4yzKV6qpz43SGRK4MacLo2rNZ/dNej7lwPCtzCcFYwqkiiEYEEBECAAYF
AjoaQqQACgkQx1KqMrDf94ArewCfWnTUDG5gNYkmHG4bYL8fQcizyA4An2eVo/n+
3J2KRWSOhpAMsnMxtPbBmQGiBDnu9IERBACT8Y35+2vv4MGVKiLEMOl9GdST6MCk
YS3yEKeueNWc+z/0Kvff4JctBsgs47tjmiI9sl0eHjm3gTR8rItXMN6sJEUHWzDP
+Y0PFPboMvKx0FXl/A0dM+HFrruCgBlWt6FA+okRySQiliuI5phwqkXefl9AhkwR
8xocQSVCFxcwvwCglVcOQliHu8jwRQHxlRE0tkwQQI0D+wfQwKdvhDplxHJ5nf7U
8c/yE/vdvpN6lF0tmFrKXBUX+K7u4ifrZlQvj/81M4INjtXreqDiJtr99Rs6xa0S
cZqITuZC4CWxJa9GynBED3+D2t1V/f8l0smsuYoFOF7Ib49IkTdbtwAThlZp8bEh
ELBeGaPdNCcmfZ66rKUdG5sRA/9ovnc1krSQF2+sqB9/o7w5/q2qiyzwOSTnkjtB
UVKn4zLUOf6aeBAoV6NMCC3Kj9aZHfA+ND0ehPaVGJgjaVNFhPi4x0e7BULdvgOo
AqajLfvkURHAeSsxXIoEmyW/xC1sBbDkDUIBSx5oej73XCZgnj/inphRqGpsb+1n
KFvF+rQoU3VTRSBQYWNrYWdlIFNpZ25pbmcgS2V5IDxidWlsZEBzdXNlLmRlPohi
BBMRAgAiBQJA2AY+AhsDBQkObd+9BAsHAwIDFQIDAxYCAQIeAQIXgAAKCRCoTtro
nIAKypCfAJ9RuZ6ZSV7QW4pTgTIxQ+ABPp0sIwCffG9bCNnrETPlgOn+dGEkAWeg
KL+IRgQQEQIABgUCOnBeUgAKCRCeQOMQAAqrpNzOAKCL512FZvv4VZx94TpbA9lx
yoAejACeOO1HIbActAevk5MUBhNeLZa/qM2JARUDBRA6cGBvd7LmAD0l09kBATWn
B/9An5vfiUUE1VQnt+T/EYklES3tXXaJJp9pHMa4fzFa8jPVtv5UBHGee3XoUNDV
wM2OgSEISZxbzdXGnqIlcT08TzBUD9i579uifklLsnr35SJDZ6ram51/CWOnnaVh
UzneOA9gTPSr+/fT3WeVnwJiQCQ30kNLWVXWATMnsnT486eAOlT6UNBPYQLpUprF
5Yryk23pQUPAgJENDEqeU6iIO9Ot1ZPtB0lniw+/xCi13D360o1tZDYOp0hHHJN3
D3EN8C1yPqZd5CvvznYvB6bWBIpWcRgdn2DUVMmpU661jwqGlRz1F84JG/xe4jGu
zgpJt9IXSzyohEJB6XG5+D0BuQINBDnu9JIQCACEkdBN6Mxf5WvqDWkcMRy6wnrd
9DYJ8UUTmIT2iQf07tRUKJJ9v0JXfx2Z4d08IQSMNRaq4VgSe+PdYgIy0fbj23Vi
a5/gO7fJEpD2hd2f+pMnOWvH2rOOIbeYfuhzAc6BQjAKtmgR0ERUTafTM9Wb6F13
CNZZNZfDqnFDP6L12w3z3F7FFXkz07Rs3AIto1ZfYZd4sCSpMr/0S5nLrHbIvGLp
271hhQBeRmmoGEKO2JRelGgUJ2CUzOdtwDIKT0LbCpvaP8PVnYF5IFoYJIWRHqlE
t5ucTXstZy7vYjL6vTP4l5xs+LIOkNmPhqmfsgLzVo0UaLt80hOwc4NvDCOLAAMG
B/9g+9V3ORzw4LvO1pwRYJqfDKUq/EJ0rNMMD4N8RLpZRhKHKJUm9nNHLbksnlZw
rbSTM5LpC/U6sheLP+l0bLVoq0lmsCcUSyh+mY6PxWirLIWCn/IAZAGnXb6Zd6Tt
IJlGG6pqUN8QxGJYQnonl0uTJKHJENbI9sWHQdcTtBMc34gorHFCo1Bcvpnc1LFL
rWn7mfoGx6INQjf3HGQpMXAWuSBQhzkazY6vaWFpa8bBJ+gKbBuySWzNm3rFtT5H
RKMWpO+M9bHp4d+puY0L1YwN1OMatcMMpcWnZpiWiR83oi32+xtWUY2U7Ae38mMa
g8zFbpeqPQUsDv9V7CAJ1dbriEwEGBECAAwFAkDYBnoFCQ5t3+gACgkQqE7a6JyA
CspnpgCfRbYwxT3iq+9l/PgNTUNTZOlof2oAn25y0eGi0371jap9kOV6uq71sUuO
=ypVs
- -----END PGP PUBLIC KEY BLOCK-----
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.18 (GNU/Linux)
iQEVAwUBTlueIney5gA9JdPZAQKUqwgAhlurNIzSXz9B6/GfqHmjuMS3nTQA6Mmp
TBCwkXZPp9rAa36B3t/eLr6GIVXp8LgznZDm3SvqvDCwLPAirggb937KFCjOx9+D
wHSCqB3soXkQA/XAnfLJHkK72zokwEDkAPDBLz600GkQLw0vqzf//Nr/BTcTEBZi
WzG6gz9CYGE6GXaKi130vhE1hQYe+It74GtuqD4daVOUEOzCd3kxASAXRhSl8H1P
c/eOM8x5MyFby9a1H7SeyakliWSmIynCb06bAgm9pMXo1wYR9La5p5E+rzemeWCJ
yiik1ia2JL4zamD4uiuVK99Yx2qpi1Xl49cMUujkvXayDThlNom1oQ==
=kiZC
-----END PGP SIGNATURE-----
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/SWVDDHAD7E5EB2ZZU6X5GC3P5NNYQ2UB/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/SWVDDHAD7E5EB2ZZU6X5GC3P5NNYQ2UB/#SWVDDHAD7E5EB2ZZU6X5GC3P5NNYQ2UB)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from secunia.com_a24bb08b_20250125_224227.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from GartnerÂ®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexeraâ€™s 2025 IT Priorities Report highlight whatâ€™s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The worldâ€™s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the worldâ€™s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoftâ€™s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that arenâ€™t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNowÂ® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Â© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

Ã—

...



=== Content from bugzilla.mozilla.org_e2fe3842_20250125_224244.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/662132)
* [XML](/show_bug.cgi?ctype=xml&id=662132)

Closed
[Bug 662132](/show_bug.cgi?id=662132)

Opened 14 years ago
Closed 14 years ago

# TI: Crash [@ JSString::isFlat]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

TI: Crash [@ JSString::isFlat]

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
â–¾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Performance Impact | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| firefox7 | [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed) |
| firefox8 | [+](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=fixed) |
| status2.0 | --- | [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | - | wontfix |
| firefox6 | + | fixed |
| firefox7 | + | fixed |
| firefox8 | + | fixed |
| status2.0 |  | wanted |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: bhackett1024)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/764aa0af2fda6f02fb17dc9771bb18d9?d=mm&size=40)  [bhackett1024](/user_profile?user_id=346231)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[infer-regress](/show_bug.cgi?id=619415 "RESOLVED FIXED - [meta] Type inference regressions"), [630996](/show_bug.cgi?id=630996 "RESOLVED FIXED - A tool for stress testing objects and PIC's")

Dependency [tree](/showdependencytree.cgi?id=662132&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=662132)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[663628](/show_bug.cgi?id=663628 "RESOLVED DUPLICATE - TI: Crash in mjit-generated code")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: crash, testcase, Whiteboard: [sg:critical?] [jst likes for 6] [landed m-c 6/27][fixed-in-tracemonkey][qa-])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?] [jst likes for 6] [landed m-c 6/27][fixed-in-tracemonkey][qa-]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [decoder](/user_profile?user_id=395101) | [in-testsuite](#c23 "12 years ago") | + |
| --- | --- | --- |
| [decoder](/user_profile?user_id=395101) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ JSString::isFlat ]](https://crash-stats.mozilla.org/signature/?signature=JSString%3A%3AisFlat)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [patch](/attachment.cgi?id=538776)  [14 years ago](#c9)  [Brian Hackett [Laid off!]](/user_profile?user_id=346231)   3.44 KB, patch | dvander : [review+](#a746554_309316 "14 years ago")  christian : [approval-mozilla-beta+](#c19 "14 years ago") | [Details](/attachment.cgi?id=538776&action=edit) | [Diff](/attachment.cgi?id=538776&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=662132&attachment=538776) |
| --- | --- | --- |

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=662132#c0)â€¢ 14 years ago |
|  | |

gczeal()
let n = {}
let o = {}
for (let i = 0; i < 5; i++) {
Array();
for (let j = 0; j < 7; j++) {
o.\_\_defineSetter\_\_("", function() {})
o.p3 = 1
delete o.p3
}
}
crashes js debug shell on JM changeset 6d423e5f2e48 with -m, -j and -n at JSString::isFlat
This was found using a combination of jsfunfuzz and jandem's method fuzzer.
(gdb) bt
#0 0x000000010003d134 in JSString::isFlat (this=0x13e760) at jsstr.h:313
#1 0x00000001000477b5 in JSString::ensureFlat (this=0x13e760, cx=0x100925920) at jsstr.h:723
#2 0x0000000100047835 in JSString::getCharsZ (this=0x13e760, cx=0x100925920) at jsstr.h:703
#3 0x00000001000478e0 in js::types::MakeTypeId (cx=0x100925920, id={asBits = 1304416}) at jsinferinlines.h:118
#4 0x00000001000e99f2 in InlineAddTypeProperty (cx=0x100925920, obj=0x1009301c0, id={asBits = 1304416}, type=1) at /Users/fuzz3/Desktop/jsfunfuzz-dbg-64-jm-70388-6d423e5f2e48/compilePath/js/src/jsinfer.cpp:2723
#5 0x00000001000d671d in js::types::TypeObject::addPropertyType (this=0x1009301c0, cx=0x100925920, id={asBits = 1304416}, type=1) at /Users/fuzz3/Desktop/jsfunfuzz-dbg-64-jm-70388-6d423e5f2e48/compilePath/js/src/jsinfer.cpp:2739
#6 0x00000001001f5554 in js::types::AddTypePropertyId (cx=0x100925920, obj=0x1009301c0, id={asBits = 1304416}, type=1) at jsinferinlines.h:325
#7 0x000000010005a046 in JSObject::deleteProperty (this=0x100f16160, cx=0x100925920, id={asBits = 1304416}, rval=0x7fff5fbfdb10, strict=0) at jsobjinlines.h:161
#8 0x00000001002b093f in js::mjit::stubs::DelProp<0> (f=@0x7fff5fbfdb40, atom=0x13e760) at /Users/fuzz3/Desktop/jsfunfuzz-dbg-64-jm-70388-6d423e5f2e48/compilePath/js/src/methodjit/StubCalls.cpp:2649
#9 0x0000000100e67583 in ?? ()
#10 0x00000001002acb4d in js::mjit::EnterMethodJIT (cx=0x100925920, fp=0x100a67048, code=0x100e67fc0, stackLimit=0x100b1cb00) at /Users/fuzz3/Desktop/jsfunfuzz-dbg-64-jm-70388-6d423e5f2e48/compilePath/js/src/methodjit/MethodJIT.cpp:886
#11 0x00000001002acc82 in CheckStackAndEnterMethodJIT (cx=0x100925920, fp=0x100a67048, code=0x100e67fc0) at /Users/fuzz3/Desktop/jsfunfuzz-dbg-64-jm-70388-6d423e5f2e48/compilePath/js/src/methodjit/MethodJIT.cpp:918
/snip

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=662132#a234603_309316)â€¢ 14 years ago |

Group: core-security

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=662132#c1)â€¢ 14 years ago |
|  | |

TM bug triggered by a GC in the middle of a SetProp PIC update. The PIC caches the IC's secondShapeGuard field (I think because it might modify it), and can also trigger a GC which resets the PIC (including the secondShapeGuard). After the GC it uses the old value of secondShapeGuard and patches the inline path wrt that offset, which ends up trashing code memory after the SETPROP (in this case, the write of the atom passed to the DelProp stub).
It looks like other ICs may have similar problems --- which ICs can trigger a GC on paths where they end up patching the IC afterwards?

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=662132#c2)â€¢ 14 years ago |
|  | |

Brian, can you suggest a sg: severity rating here per <https://wiki.mozilla.org/Security_Severity_Ratings>?Assignee: general â†’ bhackett1024

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=662132#c3)â€¢ 14 years ago |
|  | |

I think this would be hard to exploit (need to trigger a GC at exactly the right point), but would be nasty if it there is a consistent way to trigger the failure --- we are patching code memory with a value (shape number) that an attacker has a small amount of control over.Whiteboard: [sg:critical?]

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=662132#c4)â€¢ 14 years ago |
|  | |

I don't know what the landing schedule is for the TI branch, but we need to make sure this gets fixed before we ship this new code.
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=unaffected)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=unaffected)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- â†’ [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [-](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=-)
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B)

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=662132#a396096_12352)â€¢ 14 years ago |

[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-) â†’ ---

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=662132#a419066_12352)â€¢ 14 years ago |

[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- â†’ [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-)

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=662132#c5)â€¢ 14 years ago |
|  | |

Should have been clearer in [comment 3](/show_bug.cgi?id=662132#c3 "VERIFIED FIXED - TI: Crash [@ JSString::isFlat]"), the behavior described is possible on m-c and (I think) all versions of Firefox since 4.0.
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-) â†’ ---

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=662132#c7)â€¢ 14 years ago |
|  | |

Crashing testcase for TM tip (rev 49cfb12c2225, OS X x86, debug build, run with -m -a). It's hard to trigger this with a plain gczeal(), as the IC needs to warm up to trip this but is reset by garbage collections.
gczeal(2, 7);
function foo(x) {
x.f = 0;
return [1,2,3,4,5];
}
foo({});
foo({a:0});
foo({b:0});
foo({c:0});

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=662132#c8)â€¢ 14 years ago |
|  | |

For future reference, we also have schedulegc(n) now, which schedules a GC after n allocations.

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=662132#c9)â€¢ 14 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=538776&action=diff)
â€” [Details](attachment.cgi?id=538776&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=662132&attachment=538776)

Patch, watches for GC on both SetProp and GetProp compilers. It didn't look like other PIC stub compilers carry the secondShapeGuard info across VM calls. I'm still not sure if the GetProp compiler can trigger GC on paths where it eventually tries to add a stub, but figure it's best to check regardless.
[Attachment #538776](/attachment.cgi?id=538776&action=edit "patch") -
Flags: review?(dvander)

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=662132#a722831_1)â€¢ 14 years ago |

Crash Signature: [@ JSString::isFlat]

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=662132#a746554_309316)â€¢ 14 years ago |

[Attachment #538776](/attachment.cgi?id=538776&action=edit "patch") -
Flags: review?(dvander) â†’ review+

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=662132#c10)â€¢ 14 years ago |
|  | |

How should this land?

|  | [David Anderson [:dvander] - inactive, e-mail if emergency](/user_profile?user_id=309316) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=662132#c11)â€¢ 14 years ago |
|  | |

(In reply to [comment #10](/show_bug.cgi?id=662132#c10 "VERIFIED FIXED - TI: Crash [@ JSString::isFlat]"))
> How should this land?
Both TM and TI branches, I think.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=662132#c12)â€¢ 14 years ago |
|  | |

(In reply to [comment #5](/show_bug.cgi?id=662132#c5 "VERIFIED FIXED - TI: Crash [@ JSString::isFlat]"))
> Should have been clearer in [comment 3](/show_bug.cgi?id=662132#c3 "VERIFIED FIXED - TI: Crash [@ JSString::isFlat]"), the behavior described is possible on
> m-c and (I think) all versions of Firefox since 4.0.
Feel free to adjust the status-<branch> fields to reflect reality the same way you would the overall bug status. Also if you think we're wrong not to track something it would be better to re-nominate it ('?') rather than set '-' back to the default.
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- â†’ [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
[unaffected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=unaffected) â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[unaffected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=unaffected) â†’ [affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- â†’ [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
[-](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=-) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=662132#c13)â€¢ 14 years ago |
|  | |

Hmm, never intended to modify the status flags, not sure what happened there.

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=662132#c14)â€¢ 14 years ago |
|  | |

Luke, or anyone else, can we get this landed...?

|  | [David Mandelin [:dmandelin]](/user_profile?user_id=294323) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=662132#c15)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/tracemonkey/rev/a3fc40d483e5>Whiteboard: [sg:critical?] â†’ [sg:critical?][fixed-in-tracemonkey]

|  | [Chris Leary [:cdleary] (not checking bugmail)](/user_profile?user_id=374575) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=662132#c16)â€¢ 14 years ago |
|  | |

cdleary-bot mozilla-central merge info:
<http://hg.mozilla.org/mozilla-central/rev/a3fc40d483e5>

|  | [Chris Leary [:cdleary] (not checking bugmail)](/user_profile?user_id=374575) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=662132#a1938431_374575)â€¢ 14 years ago |

Status: NEW â†’ RESOLVEDClosed: 14 years agoResolution: --- â†’ FIXED

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=662132#c17)â€¢ 14 years ago |
|  | |

This patch is good for 6, right? If so, please request beta approval for the patch!
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed)
[status-firefox8](/buglist.cgi?f1=cf_status_firefox8&o1=isnotempty):
--- â†’ [fixed](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=fixed)
[tracking-firefox8](/buglist.cgi?f1=cf_tracking_firefox8&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=662132#a3414911_1689)â€¢ 14 years ago |

Whiteboard: [sg:critical?][fixed-in-tracemonkey] â†’ [sg:critical?][needs Fx6 approval request/landing][fixed-in-tracemonkey]

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=662132#a3708619_5003)â€¢ 14 years ago |

Whiteboard: [sg:critical?][needs Fx6 approval request/landing][fixed-in-tracemonkey] â†’ [sg:critical?] [jst likes for 6] [landed m-c 6/27][fixed-in-tracemonkey]

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=662132#c18)â€¢ 14 years ago |
|  | |

Comment on [attachment 538776](/attachment.cgi?id=538776 "patch") [[details]](/attachment.cgi?id=538776&action=edit "patch") [[diff]](/attachment.cgi?id=538776&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=662132&attachment=538776)
patch
dvander says this is safe for branches and could fix random crashes too. Requesting approvals.
[Attachment #538776](/attachment.cgi?id=538776&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #538776](/attachment.cgi?id=538776&action=edit "patch") -
Flags: approval-mozilla-aurora?

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=662132#c19)â€¢ 14 years ago |
|  | |

Comment on [attachment 538776](/attachment.cgi?id=538776 "patch") [[details]](/attachment.cgi?id=538776&action=edit "patch") [[diff]](/attachment.cgi?id=538776&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=662132&attachment=538776)
patch
approve for releases/mozilla-beta. Please land asap. We do not need to approve for aurora as it is already there
[Attachment #538776](/attachment.cgi?id=538776&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #538776](/attachment.cgi?id=538776&action=edit "patch") -
Flags: approval-mozilla-beta+
[Attachment #538776](/attachment.cgi?id=538776&action=edit "patch") -
Flags: approval-mozilla-aurora?

|  | [David Mandelin [:dmandelin]](/user_profile?user_id=294323) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=662132#c20)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/mozilla-beta/rev/a7367773bb01>
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=662132#c21)â€¢ 13 years ago |
|  | |

qa-: no QA fix verification neededWhiteboard: [sg:critical?] [jst likes for 6] [landed m-c 6/27][fixed-in-tracemonkey] â†’ [sg:critical?] [jst likes for 6] [landed m-c 6/27][fixed-in-tracemonkey][qa-]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=662132#a14064008_1689)â€¢ 13 years ago |

Group: core-security

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=662132#c22)â€¢ 13 years ago |
|  | |

Testcase needs tracer (-j) to trigger, tracer is long gone.
-> VERIFIED.Status: RESOLVED â†’ VERIFIED

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=662132#c23)â€¢ 12 years ago |
|  | |

Automatically extracted testcase for this bug was committed:
<https://hg.mozilla.org/mozilla-central/rev/efaf8960a929>Flags: in-testsuite+
You need to [log in](/show_bug.cgi?id=662132&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Brian Hackett [Laid off!]](/user_profile?user_id=346231)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_359f4326_20250125_224248.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/667315)
* [XML](/show_bug.cgi?ctype=xml&id=667315)

Closed
[Bug 667315](/show_bug.cgi?id=667315)

Opened 14 years ago
Closed 14 years ago

# XSLT crashes Firefox 5 and Firefox 7 (but not Firefox 4)

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

XSLT crashes Firefox 5 and Firefox 7 (but not Firefox 4)

## Categories

### (Core :: XSLT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=XSLT#XSLT)

XSLT
â–¾

Core :: XSLT
For bugs on Mozilla's XSLT support. See the [project
page](http://www.mozilla.org/projects/xslt) for tips on testcases and commonly encountered legacy problems.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=XSLT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=XSLT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=XSLT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla7

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | --- | [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| firefox7 | [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed) |
| status2.0 | --- | [unaffected](/buglist.cgi?f1=cf_status_20&o1=equals&v1=unaffected) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 |  | affected |
| firefox6 | + | fixed |
| firefox7 | + | fixed |
| status2.0 |  | unaffected |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: travisemmitt, Assigned: peterv)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/21a031df69f8c0549475a8cdc06f53f5?d=mm&size=40)  [peterv](/user_profile?user_id=24295)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/09b790d5bfb251337cb2d6b5d598f6cf?d=mm&size=40)  [travisemmitt](/user_profile?user_id=418715)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/5111b810214a00377104f5ad3efefa26?d=mm&size=40)  [sefeng](/user_profile?user_id=625922)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

13 people

## References

### ( [URL](http://tripalot.com/tripacat/xml/albums.xml "http://tripalot.com/tripacat/xml/albums.xml") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[603844](/show_bug.cgi?id=603844 "RESOLVED FIXED - Leak txUnknownHandler+ with transformToDocument(textnode)")

Dependency [tree](/showdependencytree.cgi?id=667315&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=667315)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[tripalot.com/tripacat/xml/albums.xml](http://tripalot.com/tripacat/xml/albums.xml "http://tripalot.com/tripacat/xml/albums.xml")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: crash, regression, reproducible, Whiteboard: [sg:critical?][qa-])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[reproducible](/buglist.cgi?keywords=reproducible&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?][qa-]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ libc-2.13.so@0x32405 ]](https://crash-stats.mozilla.org/signature/?signature=libc-2.13.so%400x32405)

[[@ linux-gate.so@0x425 ]](https://crash-stats.mozilla.org/signature/?signature=linux-gate.so%400x425)

[[@ \_purecall | flushTransaction ]](https://crash-stats.mozilla.org/signature/?signature=_purecall%20%7C%20flushTransaction)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 2 obsolete files)

| [v1](/attachment.cgi?id=542900)  [14 years ago](#c13)  [Peter Van der Beken [:peterv]](/user_profile?user_id=24295)   13.07 KB, patch | sicking : [review+](#c15 "14 years ago") | [Details](/attachment.cgi?id=542900&action=edit) | [Diff](/attachment.cgi?id=542900&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=667315&attachment=542900) |
| --- | --- | --- |
| [v1 (diff -w)](/attachment.cgi?id=542903)  [14 years ago](#c14)  [Peter Van der Beken [:peterv]](/user_profile?user_id=24295)   10.18 KB, patch |  | [Details](/attachment.cgi?id=542903&action=edit) | [Diff](/attachment.cgi?id=542903&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=667315&attachment=542903) |
| [v1](/attachment.cgi?id=543814)  [14 years ago](#c23)  [Peter Van der Beken [:peterv]](/user_profile?user_id=24295)   15.10 KB, patch | peterv : [review+](#c23 "14 years ago")  asa : [approval-mozilla-beta+](#c24 "14 years ago") | [Details](/attachment.cgi?id=543814&action=edit) | [Diff](/attachment.cgi?id=543814&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=667315&attachment=543814) |

Show Obsolete

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Travis Emmitt](/user_profile?user_id=418715)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=667315#c0)â€¢ 14 years ago |
|  | |

User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:5.0) Gecko/20100101 Firefox/5.0
Build Identifier: Mozilla/5.0 (Windows NT 5.1; rv:5.0) Gecko/20100101 Firefox/5.0
Some (but not all) XSLT crashes Firefox 5 on Windows 7 and XP. This crash did not happen on Firefox 4 or earlier.
The crash happens on local XSLT files as well.
Reproducible: Always
Steps to Reproduce:
1. Load the page indicated in the url
Actual Results:
Loading the XSLT at the cited URL crashes Firefox 5 but not 4 and earlier.
Expected Results:
Firefox 5 should not crash, because Firefox 4 did not crash (and neither do IE or Chrome).
I haven't tried methodically whittling down the XSLT to find out whether it is a particular function or extension which is causing the crash. If that is something that would be useful, I can do it; otherwise, I am hoping other people report similar problems.

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=667315#c1)â€¢ 14 years ago |
|  | |

Reproduced:
Mozilla/5.0 (X11; Linux x86\_64; rv:7.0a1) Gecko/20110626 Firefox/7.0a1
0 libc-2.13.so libc-2.13.so@0x32405
1 libc-2.13.so libc-2.13.so@0x3567f
2 libxul.so nsTArray<txOutputTransaction\*, nsTArrayDefaultAllocator>::~nsTArray nsTArray.h:374
3 ld-2.13.so ld-2.13.so@0x55f
4 libc-2.13.so libc-2.13.so@0x6b9f
5 libm-2.13.so libm-2.13.so@0x281fff
6 ld-2.13.so ld-2.13.so@0xd711
7 libstdc++.so.6.0.16 libstdc++.so.6.0.16@0xbee4c
8 libpthread-2.13.so libpthread-2.13.so@0xe11c
9 libstdc++.so.6.0.16 libstdc++.so.6.0.16@0xbcff5
10 libstdc++.so.6.0.16 libstdc++.so.6.0.16@0xbd022
11 libstdc++.so.6.0.16 libstdc++.so.6.0.16@0xbda3e
12 libxul.so txResultBuffer::flushToHandler content/xslt/src/xslt/txBufferingHandler.cpp:477
13 libxul.so txCopyOf::execute content/xslt/src/xslt/txInstructions.cpp:432
14 libxul.so txXSLTProcessor::execute content/xslt/src/xslt/txXSLTProcessor.cpp:104
15 libxul.so txMozillaXSLTProcessor::TransformToDoc content/xslt/src/xslt/txMozillaXSLTProcessor.cpp:676
16 libxul.so nsTransformBlockerEvent::Run content/xslt/src/xslt/txMozillaXSLTProcessor.cpp:558
17 libxul.so nsThread::ProcessNextEvent xpcom/threads/nsThread.cpp:617
18 libxul.so NS\_ProcessNextEvent\_P obj-firefox/xpcom/build/nsThreadUtils.cpp:245
19 libxul.so mozilla::ipc::MessagePump::Run ipc/glue/MessagePump.cpp:110
20 libxul.so MessageLoop::Run ipc/chromium/src/base/message\_loop.cc:218
21 libxul.so nsBaseAppShell::Run widget/src/xpwidgets/nsBaseAppShell.cpp:189
22 libxul.so nsAppStartup::Run toolkit/components/startup/nsAppStartup.cpp:222
23 libxul.so XRE\_main toolkit/xre/nsAppRunner.cpp:3573
24 firefox main browser/app/nsBrowserApp.cpp:198
25 libc-2.13.so libc-2.13.so@0x1eeac
26 firefox firefox@0x193fCrash Signature: [@ libc-2.13.so@0x32405 ]Keywords: [crash](/buglist.cgi?keywords=crash&resolution=---)OS: Windows 7 â†’ AllHardware: x86 â†’ AllVersion: unspecified â†’ Trunk

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=667315#c2)â€¢ 14 years ago |
|  | |

Last good nightly: 2011-04-08 First bad nightly: 2011-04-09
Pushlog: <http://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=27d6a4a5e20f&tochange=7d90da136b2c>Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=667315#c3)â€¢ 14 years ago |
|  | |

[bp-26a25d8c-953c-44d2-a39f-146542110626](https://crash-stats.mozilla.org/report/index/26a25d8c-953c-44d2-a39f-146542110626)
[@ linux-gate.so@0x425 ]
[bp-650154ac-8a4d-4b10-984a-820e32110626](https://crash-stats.mozilla.org/report/index/650154ac-8a4d-4b10-984a-820e32110626)
[@ linux-gate.so@0x425 ]
[bp-03f57bff-3748-4304-9c77-007d42110626](https://crash-stats.mozilla.org/report/index/03f57bff-3748-4304-9c77-007d42110626)
[@ linux-gate.so@0x425 ]
[bp-2e307c77-cbec-465d-89aa-5d6b82110626](https://crash-stats.mozilla.org/report/index/2e307c77-cbec-465d-89aa-5d6b82110626)
[@ linux-gate.so@0x425 ]
[bp-2bd4ebd1-eabe-4047-a868-4c7362110626](https://crash-stats.mozilla.org/report/index/2bd4ebd1-eabe-4047-a868-4c7362110626)
[@ libc-2.13.so@0x32405 ]Crash Signature: [@ libc-2.13.so@0x32405 ] â†’ [@ libc-2.13.so@0x32405 ][@ linux-gate.so@0x425 ]

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=667315#c4)â€¢ 14 years ago |
|  | |

0 linux-gate.so linux-gate.so@0x425
1 libc-2.13.so libc-2.13.so@0x2abb0
2 libc-2.13.so libc-2.13.so@0x155ff3
3 libc-2.13.so libc-2.13.so@0x2dfd1
4 ld-2.13.so ld-2.13.so@0x9ba1
5 libstdc++.so.6.0.16 libstdc++.so.6.0.16@0xab4b
6 ld-2.13.so ld-2.13.so@0x1da73
7 libc-2.13.so libc-2.13.so@0xbf863
8 libstdc++.so.6.0.16 libstdc++.so.6.0.16@0x24440
9 libstdc++.so.6.0.16 libstdc++.so.6.0.16@0xc1607
10 libc-2.13.so libc-2.13.so@0x15657f

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=667315#c5)â€¢ 14 years ago |
|  | |

The first bad revision is:
changeset: 67678:a6822a5df633
user: Peter Van der Beken <peterv@propagandism.org>
date: Thu Dec 02 11:12:27 2010 -0500
summary: Fix for [bug 603844](/show_bug.cgi?id=603844 "RESOLVED FIXED - Leak txUnknownHandler+ with transformToDocument(textnode)") (Leak txUnknownHandler+ with transformToDocument(textnode)). r=sicking.
<http://hg.mozilla.org/mozilla-central/rev/a6822a5df633>

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667315#a7144_410947)â€¢ 14 years ago |

Component: File Handling â†’ XSLTProduct: Firefox â†’ CoreQA Contact: file.handling â†’ xslt

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667315#a7485_410947)â€¢ 14 years ago |

Status: UNCONFIRMED â†’ NEWDepends on: [603844](/show_bug.cgi?id=603844 "RESOLVED FIXED - Leak txUnknownHandler+ with transformToDocument(textnode)")Ever confirmed: trueKeywords: [reproducible](/buglist.cgi?keywords=reproducible&resolution=---)Summary: XSLT crashes Firefox 5 (but not 4) â†’ XSLT crashes Firefox 5 and Firefox 7 (but not Firefox 4)

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=667315#c6)â€¢ 14 years ago |
|  | |

Travis, are you able to post some related Report IDs from about:crashes, like I've done in [comment 3](/show_bug.cgi?id=667315#c3 "RESOLVED FIXED - XSLT crashes Firefox 5 and Firefox 7 (but not Firefox 4)")? The important thing is "bp-" strings. My IDs are from Linux so it would be interesting to also see what they look like with Windows.

|  | [Travis Emmitt](/user_profile?user_id=418715)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=667315#c7)â€¢ 14 years ago |
|  | |

<https://crash-stats.mozilla.com/report/pending/0b462f1f-b0c8-4b06-b9ec-6a9b12110626>

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=667315#c8)â€¢ 14 years ago |
|  | |

0 ntdll.dll KiFastSystemCallRet
1 ntdll.dll ZwWaitForSingleObject
2 kernel32.dll WaitForSingleObjectEx
3 kernel32.dll WaitForSingleObject
4 xul.dll google\_breakpad::ExceptionHandler::WriteMinidumpOnHandlerThread toolkit/crashreporter/google-breakpad/src/client/windows/handler/exception\_handler.cc:763
5 xul.dll google\_breakpad::ExceptionHandler::HandlePureVirtualCall toolkit/crashreporter/google-breakpad/src/client/windows/handler/exception\_handler.cc:707
6 mozcrt19.dll \_purecall obj-firefox/memory/jemalloc/crtsrc/purevirt.c:47
7 xul.dll flushTransaction content/xslt/src/xslt/txBufferingHandler.cpp:477
8 xul.dll txResultBuffer::flushToHandler content/xslt/src/xslt/txBufferingHandler.cpp:503
9 xul.dll txResultTreeFragment::flushToHandler content/xslt/src/xslt/txRtfHandler.cpp:89
10 xul.dll txCopyOf::execute content/xslt/src/xslt/txInstructions.cpp:432
11 xul.dll txXSLTProcessor::execute content/xslt/src/xslt/txXSLTProcessor.cpp:104
12 xul.dll txMozillaXSLTProcessor::TransformToDoc content/xslt/src/xslt/txMozillaXSLTProcessor.cpp:715
13 xul.dll nsTransformBlockerEvent::Run content/xslt/src/xslt/txMozillaXSLTProcessor.cpp:595
14 xul.dll nsThread::ProcessNextEvent xpcom/threads/nsThread.cpp:618
15 xul.dll TimerThread::RemoveTimer xpcom/threads/TimerThread.cpp:417
16 xul.dll MessageLoop::RunInternal ipc/chromium/src/base/message\_loop.cc:219
17 xul.dll MessageLoop::RunHandler ipc/chromium/src/base/message\_loop.cc:202
18 mozcrt19.dll \_VEC\_memzero
19 xul.dll xul.dll@0x37057f
20 firefox.exe firefox.exe@0x1bb7
21 kernel32.dll GetCodePageFileInfo
22 kernel32.dll BaseProcessStart
23 firefox.exe firefox.exe@0x186fCrash Signature: [@ libc-2.13.so@0x32405 ][@ linux-gate.so@0x425 ] â†’ [@ libc-2.13.so@0x32405 ][@ linux-gate.so@0x425 ][@ \_purecall | flushTransaction ]

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667315#a26895_20209)â€¢ 14 years ago |

Blocks: [603844](/show_bug.cgi?id=603844 "RESOLVED FIXED - Leak txUnknownHandler+ with transformToDocument(textnode)")
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F)
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%3F)No longer depends on: [603844](/show_bug.cgi?id=603844 "RESOLVED FIXED - Leak txUnknownHandler+ with transformToDocument(textnode)")

|  | [Jonas Sicking (:sicking) No longer reading bugmail consistently](/user_profile?user_id=9186) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=667315#c9)â€¢ 14 years ago |
|  | |

Peter, can you look at this?Assignee: nobody â†’ peterv

|  | [Peter Van der Beken [:peterv]](/user_profile?user_id=24295)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=667315#c13)â€¢ 14 years ago |
|  | |

Attached patch

[v1](attachment.cgi?id=542900&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=542900&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=667315&attachment=542900)

This needs the txUnknownHandler to flush while we're already flushing a different buffer to the result handler (flushing the rtf buffer for example). Apparently we didn't have a test for that.
This patch avoids the |delete this|'s that we have in the txUnknownHandler. Instead we forward the remaining hooks to the new result handler from the txUnknownHandler and keep the txUnknownHandler alive until the execution state dies. We clear the buffer so this shouldn't give too much bloat.
[Attachment #542900](/attachment.cgi?id=542900&action=edit "v1") -
Flags: review?(jonas)

|  | [Peter Van der Beken [:peterv]](/user_profile?user_id=24295)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=667315#c14)â€¢ 14 years ago |
|  | |

Attached patch

[v1 (diff -w)](attachment.cgi?id=542903&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=542903&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=667315&attachment=542903)

|  | [Jonas Sicking (:sicking) No longer reading bugmail consistently](/user_profile?user_id=9186) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=667315#c15)â€¢ 14 years ago |
|  | |

Comment on [attachment 542900](/attachment.cgi?id=542900 "v1") [[details]](/attachment.cgi?id=542900&action=edit "v1") [[diff]](/attachment.cgi?id=542900&action=diff "v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=667315&attachment=542900)
v1
Review of [attachment 542900](/attachment.cgi?id=542900 "v1") [[details]](/attachment.cgi?id=542900&action=edit "v1") [[diff]](/attachment.cgi?id=542900&action=diff "v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=667315&attachment=542900):
-----------------------------------------------------------------
Please also add tests to not only ensure that we don't crash, but that we also output the correct result. For example that if the variable starts with <html> that we go into HTML mode etc. You can just use XSLTProcessor.transformToDocument to do that.
r=me with that
::: content/xslt/src/xslt/txUnknownHandler.cpp
@@ +107,5 @@
> + // leak mEs->mResultHandler in createHandlerAndFlush and we'll crash on
> + // the last line (delete this).
> + NS\_ASSERTION(mEs->mResultHandler == this,
> + "We're leaking mEs->mResultHandler and are going to "
> + "crash.");
The crash part sounds like it might no longer be true. At least that part of the comment is wrong. Maybe just say that we might crash since we're in unknown territory.
[Attachment #542900](/attachment.cgi?id=542900&action=edit "v1") -
Flags: review?(jonas) â†’ review+

|  | [[:Cww]](/user_profile?user_id=297228) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667315#a357823_297228)â€¢ 14 years ago |

Group: core-security

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667315#a357880_482154)â€¢ 14 years ago |

[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F) â†’ [-](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=-)
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%3F) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=667315#c16)â€¢ 14 years ago |
|  | |

XSLT is an area of recent interest amongst security researchers. If this instance was found on a live web server isn't it likely to be rediscovered? How common is the condition that causes the crash?
It would be much better to get this fix into Firefox 6 unless this is a risky patch.
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_20&o1=equals&v1=unaffected)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
[-](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=-) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)Whiteboard: [sg:critical?]

|  | [Travis Emmitt](/user_profile?user_id=418715)  Reporter |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=667315#c17)â€¢ 14 years ago |
|  | |

The crash happens on my local copy of the file as well, so I don't want anyone thinking the web server configuration has anything to do with it. Like I said, if you guys need help reducing the XSLT to the simplest possible code that creates a crash, I can do that. I suspect the crash has something to do with either an XSLT extension or perhaps my use of the document() function, although it might be something else entirely.
Did you guys find the cause of the problem?
As for priority, all I can say is that I personally won't be upgrading to Firefox 5 until the crash is fixed, because I use Firefox to test my XML-based sites before rendering them into XHTML and pushing live. Until I can safely use Firefox 5, I won't be able to recommend it to others, and might have to start recommending Chrome or IE9. So if your goal is to maximize Firefox users, my recommendation is to fix the crash in Firefox 5 so that long-time developers like myself can continue to use (and promote) Firefox.

|  | [Jonas Sicking (:sicking) No longer reading bugmail consistently](/user_profile?user_id=9186) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=667315#c18)â€¢ 14 years ago |
|  | |

There's a reviewed fix attached to the bug, so yes, the problem has been located.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=667315#c19)â€¢ 14 years ago |
|  | |

Travis, the suggestion in [comment 16](/show_bug.cgi?id=667315#c16 "RESOLVED FIXED - XSLT crashes Firefox 5 and Firefox 7 (but not Firefox 4)") to fix this for Firefox 6 means to fix it for the scheduled security update to Firefox 5 (scheduled for August 16). Fixing it before that would involve doing a special release just for this fix, and while this is definitely a problem it's not clear that it's serious enough for that. Typically we would only do that for serious compatibility regressions or security bugs being actively exploited.

|  | [Travis Emmitt](/user_profile?user_id=418715)  Reporter |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=667315#c20)â€¢ 14 years ago |
|  | |

Okay, thanks for the clarification!

|  | [Peter Van der Beken [:peterv]](/user_profile?user_id=24295)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=667315#c21)â€¢ 14 years ago |
|  | |

Grmbl, I accidently checked in the testcases.
<http://hg.mozilla.org/mozilla-central/rev/84f72e1d1fa2>Status: NEW â†’ RESOLVEDClosed: 14 years ago
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed)Resolution: --- â†’ FIXEDTarget Milestone: --- â†’ mozilla7

|  | [Peter Van der Beken [:peterv]](/user_profile?user_id=24295)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=667315#c22)â€¢ 14 years ago |
|  | |

Comment on [attachment 542900](/attachment.cgi?id=542900 "v1") [[details]](/attachment.cgi?id=542900&action=edit "v1") [[diff]](/attachment.cgi?id=542900&action=diff "v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=667315&attachment=542900)
v1
This is a fairly safe patch, we delay deleting an object while there might be callers that have a reference to it (and forward all uses of that object to the object that replaced it). We used to delete it right away and callers potentially used a dangling pointer. We should take this for Firefox 6.
[Attachment #542900](/attachment.cgi?id=542900&action=edit "v1") -
Flags: approval-mozilla-aurora?

|  | [Peter Van der Beken [:peterv]](/user_profile?user_id=24295)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=667315#c23)â€¢ 14 years ago |
|  | |

Attached patch

[v1](attachment.cgi?id=543814&action=diff)
â€” [Details](attachment.cgi?id=543814&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=667315&attachment=543814)

[Attachment #542900](/attachment.cgi?id=542900&action=edit "v1") -
Attachment is obsolete: true
[Attachment #542903](/attachment.cgi?id=542903&action=edit "v1 (diff -w)") -
Attachment is obsolete: true
[Attachment #543814](/attachment.cgi?id=543814&action=edit "v1") -
Flags: review+
[Attachment #543814](/attachment.cgi?id=543814&action=edit "v1") -
Flags: approval-mozilla-aurora?
[Attachment #542900](/attachment.cgi?id=542900&action=edit "v1") -
Flags: approval-mozilla-aurora?

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=667315#c24)â€¢ 14 years ago |
|  | |

Comment on [attachment 543814](/attachment.cgi?id=543814 "v1") [[details]](/attachment.cgi?id=543814&action=edit "v1") [[diff]](/attachment.cgi?id=543814&action=diff "v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=667315&attachment=543814)
v1
this is already in Aurora 7 but we'd like it in Beta 7. Setting approval-mozilla-beta+
[Attachment #543814](/attachment.cgi?id=543814&action=edit "v1") -
Flags: approval-mozilla-aurora? â†’ approval-mozilla-beta+

|  | [Peter Van der Beken [:peterv]](/user_profile?user_id=24295)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=667315#c25)â€¢ 14 years ago |
|  | |

(In reply to [comment #24](/show_bug.cgi?id=667315#c24 "RESOLVED FIXED - XSLT crashes Firefox 5 and Firefox 7 (but not Firefox 4)"))
> this is already in Aurora 7 but we'd like it in Beta 7. Setting
> approval-mozilla-beta+
I don't understand, did you mean Beta 6?

|  | [Peter Van der Beken [:peterv]](/user_profile?user_id=24295)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=667315#c26)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-beta/rev/018ff8037095>
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=667315#c27)â€¢ 13 years ago |
|  | |

qa+ for fix verification in Firefox 7Whiteboard: [sg:critical?] â†’ [sg:critical?][qa+]

|  | [juan becerra [:juanb]](/user_profile?user_id=241759) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=667315#c28)â€¢ 13 years ago |
|  | |

I wasn't able to reproduce this problem on versions version 5.0.1 on XP, nor 5.0.1, 6.0.2, 7.09rc, nightly on Linux using the information on [comment #0](/show_bug.cgi?id=667315#c0 "RESOLVED FIXED - XSLT crashes Firefox 5 and Firefox 7 (but not Firefox 4)"), so I am not able to verify it.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=667315#c29)â€¢ 13 years ago |
|  | |

I notice that the URL of the testcase of the bug is behind authorization now. There is no file attached to the bug.
QA cannot verify.
Since the checked in testcase is passing, I'm going to assume it is good but QA cannot check manually.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=667315#c30)â€¢ 13 years ago |
|  | |

Based on recent comments and my own failed attempt, QA cannot verify this fix due to an inaccessible testcase. Please provide a working testcase or simply mark VERIFIED if the checked-in test is enough.Whiteboard: [sg:critical?][qa+] â†’ [sg:critical?][qa-]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667315#a12189933_1689)â€¢ 13 years ago |

Group: core-securityKeywords: [testcase-wanted](/buglist.cgi?keywords=testcase-wanted&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667315#a135907276_75935)â€¢ 9 years ago |

Keywords: [testcase-wanted](/buglist.cgi?keywords=testcase-wanted&resolution=---)
You need to [log in](/show_bug.cgi?id=667315&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Peter Van der Beken [:peterv]](/user_profile?user_id=24295)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_6eaf0b7c_20250125_224230.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, weâ€™d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured â€” we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2011-33

## Security issues addressed in SeaMonkey 2.3

Announced
August 16, 2011
Impact
Critical
Products
SeaMonkey
Fixed in

* SeaMonkey 2.3

### Miscellaneous memory safety hazards (rv:4.0)

Impact: Critical

Description: Mozilla identified and fixed several
memory safety bugs in the browser engine used in SeaMonkey 2.2 and other
Mozilla-based products. Some of these bugs showed evidence of memory corruption
under certain circumstances, and we presume that with enough effort at least
some of these could be exploited to run arbitrary code.

References:

**Aral Yaman** reported a WebGL crash which
affected SeaMonkey 2.2.

* <https://bugzilla.mozilla.org/show_bug.cgi?id=674042>
* [CVE-2011-2989](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2989)

**Vivekanand Bolajwar** reported a JavaScript
crash which affected SeaMonkey 2.2.

* <https://bugzilla.mozilla.org/show_bug.cgi?id=655660>
* [CVE-2011-2991](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2991)

**Bert Hubert**
and **Theo Snelleman** of Fox-IT reported a crash in the Ogg reader
which affected SeaMonkey 2.2.

* <https://bugzilla.mozilla.org/show_bug.cgi?id=672789>
* [CVE-2011-2992](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2992)

Mozilla developers and community members Robert Kaiser,
Jesse Ruderman, moz\_bug\_r\_a4, Mardeg, Gary Kwong, Christoph Diehl, Martijn
Wargers, Travis Emmitt, Bob Clary and Jonathan Watt reported memory safety
issues which affected SeaMonkey 2.2.

* [Memory safety bugs - SeaMonkey 2.3](https://bugzilla.mozilla.org/buglist.cgi?bug_id=646825,648206,650273,650275,651030,660517,662132,665518,667092,667512,668245,669584,650732,667315)
* [CVE-2011-2985](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2985)

### Unsigned scripts can call script inside signed JAR

Impact: Critical

Description: **Rafael Gieschke**
reported that unsigned JavaScript could call into script inside a signed JAR
thereby inheriting the identity of the site that signed the JAR as well as any
permissions that a user had granted the signed JAR.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=657267>
* [CVE-2011-2993](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2993)

### String crash using WebGL shaders

Impact: Critical

Description: **Michael Jordon** of
Context IS reported that an overly long shader program could cause a buffer
overrun and crash in a string class used to store the shader source code.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=665936>
* [CVE-2011-2988](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2988)

### Heap overflow in ANGLE library

Impact: Critical

Description: **Michael Jordon** of
Context IS reported a potentially exploitable heap overflow in the ANGLE library
used by Mozilla's WebGL implementation.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=665934>
* [CVE-2011-2987](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2987)

### Crash in SVGTextElement.getCharNumAtPosition()

Impact: Critical

Description: Security
researcher **regenrecht** reported via TippingPoint's Zero Day
Initiative that a SVG text manipulation routine contained a dangling pointer
vulnerability.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=648094>
* [CVE-2011-0084](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-0084)

### Credential leakage using Content Security Policy reports

Impact: High

Description: **Mike Cardwell**
reported that Content Security Policy violation reports failed to strip out
proxy authorization credentials from the list of request headers. **Daniel
Veditz** reported that redirecting to a website with Content Security
Policy resulted in the incorrect resolution of hosts in the constructed
policy.

References:

* [CSP reports leak proxy auth tokens](https://bugzilla.mozilla.org/show_bug.cgi?id=664983)
* [Incorrect CSP host resolution](https://bugzilla.mozilla.org/show_bug.cgi?id=679588)
* [CVE-2011-2990](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2990)

### Cross-origin data theft using canvas and Windows D2D

Impact: High

Description: **nasalislarvatus3000**
reported that when using Windows D2D hardware acceleration, image data from one
domain could be inserted into a canvas and read by a different domain.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=655836>
* [CVE-2011-2986](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2986)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporationâ€™s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are Â©1998â€“2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from www.mozilla.org_26057a4d_20250125_224229.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, weâ€™d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured â€” we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2011-31

## Security issues addressed in Thunderbird 6

Announced
August 16, 2011
Impact
Critical
Products
Thunderbird
Fixed in

* Thunderbird 6

Many of the issues listed below are not exploitable through mail
since JavaScript is disabled by default in Thunderbird. These particular issues
may be triggered while viewing RSS feeds and displaying full remote content
rather than the feed summary. Addons that expose browser functionality may also
enable such issues to be exploited.

### Miscellaneous memory safety hazards (rv:4.0)

Impact: Critical

Description: Mozilla identified and fixed several
memory safety bugs in the browser engine used in Thunderbird 5 and other
Mozilla-based products. Some of these bugs showed evidence of memory corruption
under certain circumstances, and we presume that with enough effort at least
some of these could be exploited to run arbitrary code.

References:

**Aral Yaman** reported a WebGL crash which
affected Thunderbird 5.

* <https://bugzilla.mozilla.org/show_bug.cgi?id=674042>
* [CVE-2011-2989](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2989)

**Vivekanand Bolajwar** reported a JavaScript
crash which affected Thunderbird 5.

* <https://bugzilla.mozilla.org/show_bug.cgi?id=655660>
* [CVE-2011-2991](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2991)

**Bert Hubert**
and **Theo Snelleman** of Fox-IT reported a crash in the Ogg reader
which affected Thunderbird 5.

* <https://bugzilla.mozilla.org/show_bug.cgi?id=672789>
* [CVE-2011-2992](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2992)

Mozilla developers and community members Robert Kaiser,
Jesse Ruderman, moz\_bug\_r\_a4, Mardeg, Gary Kwong, Christoph Diehl, Martijn
Wargers, Travis Emmitt, Bob Clary and Jonathan Watt reported memory safety
issues which affected Thunderbird 5.

* [Memory safety bugs - Thunderbird 6](https://bugzilla.mozilla.org/buglist.cgi?bug_id=646825,648206,650273,650275,651030,660517,662132,665518,667092,667512,668245,669584,650732,667315)
* [CVE-2011-2985](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2985)

### String crash using WebGL shaders

Impact: Critical

Description: **Michael Jordon** of
Context IS reported that an overly long shader program could cause a buffer
overrun and crash in a string class used to store the shader source code.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=665936>
* [CVE-2011-2988](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2988)

### Heap overflow in ANGLE library

Impact: Critical

Description: **Michael Jordon** of
Context IS reported a potentially exploitable heap overflow in the ANGLE library
used by Mozilla's WebGL implementation.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=665934>
* [CVE-2011-2987](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2987)

### Crash in SVGTextElement.getCharNumAtPosition()

Impact: Critical

Description: Security
researcher **regenrecht** reported via TippingPoint's Zero Day
Initiative that a SVG text manipulation routine contained a dangling pointer
vulnerability.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=648094>
* [CVE-2011-0084](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-0084)

### Cross-origin data theft using canvas and Windows D2D

Impact: High

Description: **nasalislarvatus3000**
reported that when using Windows D2D hardware acceleration, image data from one
domain could be inserted into a canvas and read by a different domain.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=655836>
* [CVE-2011-2986](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2986)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporationâ€™s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are Â©1998â€“2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_b1f27379_20250125_224237.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/650275)
* [XML](/show_bug.cgi?ctype=xml&id=650275)

Closed
[Bug 650275](/show_bug.cgi?id=650275)

Opened 14 years ago
Closed 14 years ago

# "ABORT: bad scope for new JSObjects" with setTimeout

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

"ABORT: bad scope for new JSObjects" with setTimeout

## Categories

### (Core :: Security, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Security#Security)

Security
â–¾

Core :: Security
For non-crypto security bugs. Or use this general component if you know you have a Browser security bug, but not sure what component to use. Bug will be reviewed for proper component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Security&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Security&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Security)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Windows XP

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| blocking2.0 | --- | [-](/buglist.cgi?f1=cf_blocking_20&o1=equals&v1=-) |
| status2.0 | --- | [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| blocking-fx | --- | [?](/buglist.cgi?f1=cf_blocking_fx&o1=equals&v1=%3F) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | - | wontfix |
| firefox6 | + | fixed |
| blocking2.0 |  | - |
| status2.0 |  | wanted |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| blocking-fx |  | ? |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: moz\_bug\_r\_a4, Assigned: mrbkap)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/89d2149736265010bfe669ce8c3075c0?d=mm&size=40)  [mrbkap](/user_profile?user_id=69426)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/5de37f4deb4e2ac039d463d504c60ba6?d=mm&size=40)  [moz\_bug\_r\_a4](/user_profile?user_id=194398)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=40)  [dveditz](/user_profile?user_id=1689)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

6 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[650273](/show_bug.cgi?id=650273 "RESOLVED FIXED - \"Assertion failure: compartment mismatched\" with setTimeout")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=650275&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=650275)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Whiteboard: [sg:critical?] fixed-in-tracemonkey)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?] fixed-in-tracemonkey

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [testcase (crashes Firefox when loaded)](/attachment.cgi?id=526246)  [14 years ago](#c0)  [moz\_bug\_r\_a4](/user_profile?user_id=194398)   553 bytes, text/html |  | [Details](/attachment.cgi?id=526246&action=edit) |
| --- | --- | --- |

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=650275#c0)â€¢ 14 years ago |
|  | |

Attached file
[testcase (crashes Firefox when loaded)](attachment.cgi?id=526246)
â€” [Details](attachment.cgi?id=526246&action=edit)

###!!! ABORT: bad scope for new JSObjects: 'type.IsArithmetic() || cx->compartment == lccx.GetScopeForNewJSObjects()->compartment()', file js/src/xpconnect/src/xpcconvert.cpp, line 253

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650275#a8149_20209)â€¢ 14 years ago |

blocking2.0: --- â†’ ?blocking-fx: --- â†’ ?
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=650275#c1)â€¢ 14 years ago |
|  | |

Doesn't look like a chemspill bug and we're not planning any more 4.0.x releases.blocking2.0: ? â†’ -
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- â†’ [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)Whiteboard: [sg:critical?]

|  | [Sheila Mooney](/user_profile?user_id=395208) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=650275#c2)â€¢ 14 years ago |
|  | |

Is this something we should be tracking for FF5? We are skipping these in the Aurora triage meetings and deferring the decision to the crit smash team. Can someone make a call on +/- here?

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650275#a982192_12352)â€¢ 14 years ago |

Depends on: [650273](/show_bug.cgi?id=650273 "RESOLVED FIXED - \"Assertion failure: compartment mismatched\" with setTimeout")

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=650275#c3)â€¢ 14 years ago |
|  | |

Tracking this for 5. Blake has a fix in the works.
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B)No longer depends on: [650273](/show_bug.cgi?id=650273 "RESOLVED FIXED - \"Assertion failure: compartment mismatched\" with setTimeout")

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650275#a982306_12352)â€¢ 14 years ago |

Assignee: nobody â†’ mrbkapDepends on: [650273](/show_bug.cgi?id=650273 "RESOLVED FIXED - \"Assertion failure: compartment mismatched\" with setTimeout")

|  | [Sheila Mooney](/user_profile?user_id=395208) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=650275#c4)â€¢ 14 years ago |
|  | |

Blake, do you have a status? When do we expect a fix to be ready?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650275#a1765786_1689)â€¢ 14 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=650275#c5)â€¢ 14 years ago |
|  | |

I have a patch that works but breaks a mochitest. I'm not sure how important the test is, though. I'll try to figure it out tomorrow.

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=650275#c6)â€¢ 14 years ago |
|  | |

We're now quite late in the game for Firefox 5. Does the fix at [bug 650273](/show_bug.cgi?id=650273 "RESOLVED FIXED - \"Assertion failure: compartment mismatched\" with setTimeout") remedy this?

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=650275#c7)â€¢ 14 years ago |
|  | |

Yes, it does.Whiteboard: [sg:critical?] â†’ [sg:critical?] fixed-in-tracemonkey

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=650275#c8)â€¢ 14 years ago |
|  | |

[bug 650273](/show_bug.cgi?id=650273 "RESOLVED FIXED - \"Assertion failure: compartment mismatched\" with setTimeout") is fixed on mozilla-centralStatus: NEW â†’ RESOLVEDClosed: 14 years agoResolution: --- â†’ FIXED

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=650275#c9)â€¢ 14 years ago |
|  | |

Per discussion with mrbkap and dveditz we've decided that it's too late to fix this for 5, but it's already fixed for 6.
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B) â†’ [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650275#a18448767_1689)â€¢ 13 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=650275&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [moz\_bug\_r\_a4](/user_profile?user_id=194398)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_873b46c6_20250125_224245.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/665518)
* [XML](/show_bug.cgi?ctype=xml&id=665518)

Closed
[Bug 665518](/show_bug.cgi?id=665518)

Opened 14 years ago
Closed 14 years ago

# Websocket Data Framing crash [@mozilla::net::nsWebSocketHandler::ApplyMask]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Websocket Data Framing crash [@mozilla::net::nsWebSocketHandler::ApplyMask]

## Categories

### (Core :: Networking: WebSockets, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Networking%3A%20WebSockets#Networking%3A%20WebSockets)

Networking: WebSockets
â–¾

Core :: Networking: WebSockets
Bugs related to the performance/correctness of the
on-the-wire WebSocket networking protocol: file other WebSockets bugs under
DOM:WebSockets
interface may be better classified as Core::DOM.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Networking%3A%20WebSockets&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Networking%3A%20WebSockets&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Networking%3A%20WebSockets)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla7

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox6 | + | fixed |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: posidron, Assigned: mcmanus)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=40)  [mcmanus](/user_profile?user_id=32546)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/9e7272cd8191f064be3b2b7dcd6a8903?d=mm&size=40)  [posidron](/user_profile?user_id=368570)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/608e04ebca94be52b05c003d51d43e07?d=mm&size=40)  [kershaw](/user_profile?user_id=505624)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

8 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[665536](/show_bug.cgi?id=665536 "RESOLVED DUPLICATE - Websocket crash [@mozilla::net::nsWebSocketHandler::ProcessInput]")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Whiteboard: [sg:critical?])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [callstack](/attachment.cgi?id=540441)  [14 years ago](#c0)  [Christoph Diehl [:posidron]](/user_profile?user_id=368570)   2.97 KB, text/plain |  | [Details](/attachment.cgi?id=540441&action=edit) |
| --- | --- | --- |
| [63 bit lengths v1](/attachment.cgi?id=540471)  [14 years ago](#c3)  [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)   1.30 KB, patch | Biesinger : [review+](#a8862_15661 "14 years ago")  christian : [approval-mozilla-aurora+](#c8 "14 years ago") | [Details](/attachment.cgi?id=540471&action=edit) | [Diff](/attachment.cgi?id=540471&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=665518&attachment=540471) |

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=665518#c0)â€¢ 14 years ago |
|  | |

Attached file
[callstack](attachment.cgi?id=540441)
â€” [Details](attachment.cgi?id=540441&action=edit)

Received connection: ('127.0.0.1', 61673)
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: x6X5fx2b1lAIM7QZxYAlCH7GW6c=
Sending: b'\t\xff\xfe\x81\x05Hello'

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=665518#c2)â€¢ 14 years ago |
|  | |

section 4.2 says that the most-significant-bit of a 64 bit length must be 0.. (0xfe is the MSB of the length field above) and we are missing a check to enforce that.. failing to do so led to a quantity going negative and then various length checks failing.

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=665518#c3)â€¢ 14 years ago |
|  | |

Attached patch

[63 bit lengths v1](attachment.cgi?id=540471&action=diff)
â€” [Details](attachment.cgi?id=540471&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=665518&attachment=540471)

Assignee: nobody â†’ mcmanusStatus: NEW â†’ ASSIGNED
[Attachment #540471](/attachment.cgi?id=540471&action=edit "63 bit lengths v1") -
Flags: review?(cbiesinger)

|  | [Christian :Biesinger (don't email me, ping me on IRC)](/user_profile?user_id=15661) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=665518#a8862_15661)â€¢ 14 years ago |

[Attachment #540471](/attachment.cgi?id=540471&action=edit "63 bit lengths v1") -
Flags: review?(cbiesinger) â†’ review+

|  | [Ian Melven :imelven](/user_profile?user_id=416294) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=665518#c4)â€¢ 14 years ago |
|  | |

is there a particular reason that PRInt64 payloadLength is signed ?

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=665518#a92268_32546)â€¢ 14 years ago |

Whiteboard: [inbound]

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=665518#c5)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/mozilla-central/rev/4b4280bad349>Status: ASSIGNED â†’ RESOLVEDClosed: 14 years agoResolution: --- â†’ FIXEDWhiteboard: [inbound]

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=665518#c6)â€¢ 14 years ago |
|  | |

This should land to aurora too, right?
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F)

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=665518#a127093_32546)â€¢ 14 years ago |

[Attachment #540471](/attachment.cgi?id=540471&action=edit "63 bit lengths v1") -
Flags: approval-mozilla-aurora?

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=665518#c7)â€¢ 14 years ago |
|  | |

for the aurora review: this bug is found as part of websockets fuzz testing as part of the security review. yea for fuzz testing!

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=665518#a290541_482154)â€¢ 14 years ago |

[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=665518#c8)â€¢ 14 years ago |
|  | |

Comment on [attachment 540471](/attachment.cgi?id=540471 "63 bit lengths v1") [[details]](/attachment.cgi?id=540471&action=edit "63 bit lengths v1") [[diff]](/attachment.cgi?id=540471&action=diff "63 bit lengths v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=665518&attachment=540471)
63 bit lengths v1
Approved for releases/mozilla-aurora
[Attachment #540471](/attachment.cgi?id=540471&action=edit "63 bit lengths v1") -
Flags: approval-mozilla-aurora? â†’ approval-mozilla-aurora+

|  | [Patrick McManus [:mcmanus]](/user_profile?user_id=32546)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=665518#c9)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-aurora/rev/8ee63a6bfefb>
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=665518#a1399177_482154)â€¢ 14 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=665518#c10)â€¢ 13 years ago |
|  | |

assuming worst-case sg:critical since it looks like we can overwrite heap data in ApplyMask() if we don't die reading out of bounds first.Whiteboard: [sg:critical?]Target Milestone: --- â†’ mozilla7

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=665518#a12751469_1689)â€¢ 13 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=665518&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Christoph Diehl [:posidron]](/user_profile?user_id=368570)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_6e190d92_20250125_224252.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/668245)
* [XML](/show_bug.cgi?ctype=xml&id=668245)

Closed
[Bug 668245](/show_bug.cgi?id=668245)

Opened 14 years ago
Closed 14 years ago

# Crash [@ mozilla::places::History::NotifyVisited(nsIURI\*) ]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ mozilla::places::History::NotifyVisited(nsIURI\*) ]

## Categories

### (Toolkit :: Places, defect)

[Product:](/describecomponents.cgi?product=Toolkit)

Toolkit
â–¾

Toolkit
The Mozilla Toolkit is a set of APIs, built on top of Gecko, which provide advanced services to XUL applications. These services include Profile Management, Chrome Registration, Browsing History, Extension and Theme Management, Application Update Service, and Safe Mode. ([More info](https://wiki.mozilla.org/Modules/Toolkit))
[See Open Bugs in This Product](/buglist.cgi?product=Toolkit&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Toolkit)
Watch This Product

[Component:](/describecomponents.cgi?product=Toolkit&component=Places#Places)

Places
â–¾

Toolkit :: Places
Manages the user's history, bookmarks, livemarks and annotations. This component is for bugs in the Places APIs, database tables, and code used to access Places data.
[See Open Bugs in This Component](/buglist.cgi?product=Toolkit&component=Places&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Toolkit&component=Places&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Toolkit&component=Places)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla8

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| firefox7 | [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed) |
| blocking2.0 | --- | [-](/buglist.cgi?f1=cf_blocking_20&o1=equals&v1=-) |
| status2.0 | --- | [wontfix](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wontfix) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | - | wontfix |
| firefox6 | + | fixed |
| firefox7 | + | fixed |
| blocking2.0 |  | - |
| status2.0 |  | wontfix |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: bc, Assigned: mak)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/0d674a646529b0795088d7a8075fbaea?d=mm&size=40)  [mak](/user_profile?user_id=240353)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/ee4c7c6351b45c4655e16993a29979b0?d=mm&size=40)  [bc](/user_profile?user_id=23402)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/0d674a646529b0795088d7a8075fbaea?d=mm&size=40)  [mak](/user_profile?user_id=240353)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

8 people

## References

### ( [URL](http://bella.heavenforum.org/t1220-koreana-film-mesum-bali "http://bella.heavenforum.org/t1220-koreana-film-mesum-bali") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[bella.heavenforum.org/t1220-koreana-f...](http://bella.heavenforum.org/t1220-koreana-film-mesum-bali "http://bella.heavenforum.org/t1220-koreana-film-mesum-bali")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: crash, verified-aurora, verified-beta, Whiteboard: [sg:critical?][qa!])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[verified-aurora](/buglist.cgi?keywords=verified-aurora&resolution=---),
[verified-beta](/buglist.cgi?keywords=verified-beta&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?][qa!]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ mozilla::places::History::NotifyVisited(nsIURI\*) ]](https://crash-stats.mozilla.org/signature/?signature=mozilla%3A%3Aplaces%3A%3AHistory%3A%3ANotifyVisited%28nsIURI%2A%29)

 |

[[@ nsTArray\_base<nsTArrayDefaultAllocator>::Length() | mozilla::places::History::NotifyVisited(nsIURI\*) ]](https://crash-stats.mozilla.org/signature/?signature=nsTArray_base%3CnsTArrayDefaultAllocator%3E%3A%3ALength%28%29%20%7C%20mozilla%3A%3Aplaces%3A%3AHistory%3A%3ANotifyVisited%28nsIURI%2A%29)

 |

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (8 files, 1 obsolete file)

| [crash report 1](/attachment.cgi?id=542851)  [14 years ago](#c0)  [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402)   60.92 KB, text/plain |  | [Details](/attachment.cgi?id=542851&action=edit) |
| --- | --- | --- |
| [crash report 2](/attachment.cgi?id=542854)  [14 years ago](#c1)  [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402)   60.88 KB, text/plain |  | [Details](/attachment.cgi?id=542854&action=edit) |
| [wgetted page content](/attachment.cgi?id=542855)  [14 years ago](#c2)  [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402)   70.09 KB, application/x-bzip2 |  | [Details](/attachment.cgi?id=542855&action=edit) |
| [Stack 1](/attachment.cgi?id=543952)  [14 years ago](#c7)  [Marco Bonardo [:mak]](/user_profile?user_id=240353)   6.41 KB, text/plain |  | [Details](/attachment.cgi?id=543952&action=edit) |
| [stack 2](/attachment.cgi?id=543953)  [14 years ago](#c8)  [Marco Bonardo [:mak]](/user_profile?user_id=240353)   17.33 KB, text/plain |  | [Details](/attachment.cgi?id=543953&action=edit) |
| [stack 3](/attachment.cgi?id=543954)  [14 years ago](#c9)  [Marco Bonardo [:mak]](/user_profile?user_id=240353)   12.47 KB, text/plain |  | [Details](/attachment.cgi?id=543954&action=edit) |
| [patch v1.0](/attachment.cgi?id=544591)  [14 years ago](#c17)  [Marco Bonardo [:mak]](/user_profile?user_id=240353)   2.76 KB, patch |  | [Details](/attachment.cgi?id=544591&action=edit) | [Diff](/attachment.cgi?id=544591&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=668245&attachment=544591) |
| [beta patch v1.0](/attachment.cgi?id=544760)  [14 years ago](#c26)  [Marco Bonardo [:mak]](/user_profile?user_id=240353)   2.50 KB, patch | bzbarsky : [review+](#c28 "14 years ago")  asa : [approval-mozilla-beta+](#a1745317_5003 "14 years ago") | [Details](/attachment.cgi?id=544760&action=edit) | [Diff](/attachment.cgi?id=544760&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=668245&attachment=544760) |
| [central/aurora patch v1.0](/attachment.cgi?id=544763)  [14 years ago](#c27)  [Marco Bonardo [:mak]](/user_profile?user_id=240353)   2.50 KB, patch | bzbarsky : [review+](#c29 "14 years ago")  asa : [approval-mozilla-aurora+](#a1745324_5003 "14 years ago") | [Details](/attachment.cgi?id=544763&action=edit) | [Diff](/attachment.cgi?id=544763&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=668245&attachment=544763) |

Show Obsolete

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=668245#c0)â€¢ 14 years ago |
|  | |

Attached file
[crash report 1](attachment.cgi?id=542851)
â€” [Details](attachment.cgi?id=542851&action=edit)

1. <http://bella.heavenforum.org/t1220-koreana-film-mesum-bali>
2. Opens multitudes of external programs for various protocols for example mail instances (Outlook on the Crash Automation) as well as IRC if you have that set up.
3. Crash Aurora
Original Socorro report [bp-6165cea3-0d6e-4841-ba25-f33692110626](https://crash-stats.mozilla.org/report/index/6165cea3-0d6e-4841-ba25-f33692110626)
0 xul.dll mozilla::places::History::NotifyVisited
1 xul.dll mozilla::places::`anonymous namespace'::NotifyVisitObservers::Run toolkit/components/places/History.cpp:477
2 xul.dll nsThread::ProcessNextEvent xpcom/threads/nsThread.cpp:618
3 nspr4.dll PR\_GetThreadPrivate nsprpub/pr/src/threads/prtpd.c:232
4 xul.dll NS\_ProcessNextEvent\_P obj-firefox/xpcom/build/nsThreadUtils.cpp:250
5 xul.dll nsXULWindow::ShowModal xpfe/appshell/src/nsXULWindow.cpp:419
6 xul.dll nsContentTreeOwner::ShowAsModal xpfe/appshell/src/nsContentTreeOwner.cpp:554
7 xul.dll nsWindowWatcher::OpenWindowJSInternal
Other reports on Windows Firefox 4 and 5:
<https://crash-stats.mozilla.com/report/list?product=Firefox&query_search=signature&query_type=contains&query=mozilla%3A%3Aplaces%3A%3AHistory%3A%3ANotifyVisited&reason_type=contains&date=06%2F29%2F2011%2009%3A47%3A44&range_value=1&range_unit=weeks&hang_type=any&process_type=any&do_query=1&signature=mozilla%3A%3Aplaces%3A%3AHistory%3A%3ANotifyVisited%28nsIURI%2A%29>
crash report 1
Operating system: Windows NT
5.1.2600 Service Pack 3
CPU: x86
GenuineIntel family 6 model 44 stepping 2
1 CPU
Crash reason: EXCEPTION\_ACCESS\_VIOLATION\_READ
Crash address: 0x11
Thread 0 (crashed)
0 xul.dll!nsTArray\_base<nsTArrayDefaultAllocator>::Length() [nsTArray.h : 139 + 0x5]
eip = 0x10061b1c esp = 0x00119d00 ebp = 0x00119d04 ebx = 0x00000000
esi = 0x12411750 edi = 0xffff0007 eax = 0x04442848 ecx = 0x00000011
edx = 0x00000001 efl = 0x00010206
Found by: given as instruction pointer in context
1 xul.dll!mozilla::places::History::NotifyVisited(nsIURI \*) [History.cpp : 1304 + 0x7]
eip = 0x1106b584 esp = 0x00119d0c ebp = 0x00119d2c
Found by: call frame info

|  | [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=668245#c1)â€¢ 14 years ago |
|  | |

Attached file
[crash report 2](attachment.cgi?id=542854)
â€” [Details](attachment.cgi?id=542854&action=edit)

perating system: Windows NT
5.1.2600 Service Pack 3
CPU: x86
GenuineIntel family 6 model 44 stepping 2
1 CPU
Crash reason: EXCEPTION\_ACCESS\_VIOLATION\_READ
Crash address: 0x67726f2e
Thread 0 (crashed)
0 xul.dll!nsTArray\_base<nsTArrayDefaultAllocator>::Length() [nsTArray.h : 139 + 0x5]
eip = 0x10061b1c esp = 0x00119d00 ebp = 0x00119d04 ebx = 0x00000000
esi = 0x12411750 edi = 0xffff0007 eax = 0x0446d320 ecx = 0x67726f2e
edx = 0x00000001 efl = 0x00010206
Found by: given as instruction pointer in context
1 xul.dll!mozilla::places::History::NotifyVisited(nsIURI \*) [History.cpp : 1304 + 0x7]
eip = 0x1106b584 esp = 0x00119d0c ebp = 0x00119d2c
Found by: call frame info
Ted's exploitable tool rates this report as highly exploitable.

|  | [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=668245#c2)â€¢ 14 years ago |
|  | |

Attached file
[wgetted page content](attachment.cgi?id=542855)
â€” [Details](attachment.cgi?id=542855&action=edit)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=668245#a28537_1689)â€¢ 14 years ago |

Whiteboard: [sg:critical?]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=668245#a99910_1689)â€¢ 14 years ago |

Assignee: nobody â†’ mak77blocking2.0: --- â†’ -
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- â†’ [wontfix](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wontfix)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- â†’ [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B)

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=668245#c3)â€¢ 14 years ago |
|  | |

I've been able to crash Aurora, but not Nightly.
Do we have any evidence of this affecting Nightly?

|  | [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=668245#c4)â€¢ 14 years ago |
|  | |

No, just Aurora and Windows XP afaict.

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=668245#c5)â€¢ 14 years ago |
|  | |

a couple interesting assertions we hit:
###!!! ASSERTION: Setting the link state of an unregistered Link!: 'mRegistered', file c:/mozilla/mozilla-aurora/content/base/src/Link.cpp, line 83
###!!! ASSERTION: Setting state to the currently set state!: 'mLinkState != aState', file c:/mozilla/mozilla-aurora/content/base/src/Link.cpp, line 85
I suspect [Bug 598833](/show_bug.cgi?id=598833 "VERIFIED FIXED - Consider storing intrinsic state in a direct member of Element") part 12 may have fixed this crash, but needs more investigation.

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=668245#c6)â€¢ 14 years ago |
|  | |

Also, keeping on this ends up with ASSERTION: Calling SetLinkState added or removed an observer! this means SetLinkState causes a call to UnregisterVisitedCallback(), the array changes its size while we are looping through it, next iteration tries to access memory for the just removed element.

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=668245#c7)â€¢ 14 years ago |
|  | |

Attached file
[Stack 1](attachment.cgi?id=543952)
â€” [Details](attachment.cgi?id=543952&action=edit)

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=668245#c8)â€¢ 14 years ago |
|  | |

Attached file
[stack 2](attachment.cgi?id=543953)
â€” [Details](attachment.cgi?id=543953&action=edit)

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=668245#c9)â€¢ 14 years ago |
|  | |

Attached file
[stack 3](attachment.cgi?id=543954)
â€” [Details](attachment.cgi?id=543954&action=edit)

All these stacks seem to be related to a modal dialog spinning the events loop

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=668245#c10)â€¢ 14 years ago |
|  | |

cc-ing boris who knows the "other-side" (HTML/DOM) better than me and changed SetLinkState recently.
The loop itself seems pretty unsafe if something can cause concurrent calls to ResetLinkState while we are invoking SetLinkState.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=668245#c11)â€¢ 14 years ago |
|  | |

> ###!!! ASSERTION: Setting the link state of an unregistered Link!:
> 'mRegistered', file c:/mozilla/mozilla-aurora/content/base/src/Link.cpp, line 83
Hrm. How did that happen? mRegistered can only be false if we've never registered with history, if we've gotten a SetLinkState() call, or if we've successfully called UnregisterVisitedCallback()....
> Calling SetLinkState added or removed an observer!
I believe that \_this\_ is currently possible: SetLinkState triggers a ContentStateChanged which does selector matching, which can trigger Link::LinkState calls on arbitrary previous siblings and ancestors of the element.
Can we just use an nsTObserverArray for the observers here?

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=668245#c12)â€¢ 14 years ago |
|  | |

And does doing that fix the assertions from [comment 5](/show_bug.cgi?id=668245#c5 "VERIFIED FIXED - Crash [@ mozilla::places::History::NotifyVisited(nsIURI*) ]")?

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=668245#c13)â€¢ 14 years ago |
|  | |

(In reply to [comment #11](/show_bug.cgi?id=668245#c11 "VERIFIED FIXED - Crash [@ mozilla::places::History::NotifyVisited(nsIURI*) ]"))
> > ###!!! ASSERTION: Setting the link state of an unregistered Link!:
> > 'mRegistered', file c:/mozilla/mozilla-aurora/content/base/src/Link.cpp, line 83
>
> Hrm. How did that happen? mRegistered can only be false if we've never
> registered with history, if we've gotten a SetLinkState() call, or if we've
> successfully called UnregisterVisitedCallback()....
Well, SetLinkState sets both mLinkState and mRegistered. From stack 3 looks like the next call to ContentStateChanged causes the opening of a modal dialog. This spins the events loop and may cause a nested NotifyVisited call. If this happens to be for the same URI, we may end up handling again the Link we were already handling.
> Can we just use an nsTObserverArray for the observers here?
Yes, I think this may solve at least the access to random memory, I was not aware we had such a nice array type, I can think of other uses for it. Btw, I'm about to test this.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=668245#c14)â€¢ 14 years ago |
|  | |

> From stack 3 looks like the next call to ContentStateChanged causes the opening
> of a modal dialog.
That is ... possibly broken. Filed [bug 669934](/show_bug.cgi?id=669934 "RESOLVED INVALID - Do frameloader init and finalization off a script runner").
So I think we definitely want to use an nsTObserverArray here (per [comment 11](/show_bug.cgi?id=668245#c11 "VERIFIED FIXED - Crash [@ mozilla::places::History::NotifyVisited(nsIURI*) ]") second part). But we may also want to wrap a script blocker around the whole notification pass, to avoid that nested modal dialog in the first place. Does doing that work?

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=668245#c15)â€¢ 14 years ago |
|  | |

Specifically, nsAutoScriptBlocker at the top of History::NotifyVisited.

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=668245#c16)â€¢ 14 years ago |
|  | |

This means I have to make History.cpp depend on nsContentUtils.h, shouldn't be a big deal now that libxul is default, but it's creating some deep linking around, I can't find other toolkit code using ContentUtils.
A possible alternative may be to annotate in KeyClass that we are notifying its observers, and in NotifyVisited bail out early if this flag is set.
I was also looking at other crash stacks, one is crashing when trying to get Length from the array. I think this may happen if a nested call destroys the array while the external call is walking it, indeed after walking the array it is destroyed by the call to RemoveEntry(aURI).
Finally, I'm getting other interesting assertions on this page:
###!!! ASSERTION: We shouldn't be reentering here: '!mFrameIsUpdatingScrollbar',
file c:/mozilla/mozilla-beta/layout/generic/nsGfxScrollFrame.cpp, line 3164
###!!! ASSERTION: Adding a child where we already have a child? This may misbehave: 'Error', file c:/mozilla/mozilla-beta/docshell/shistory/src/nsSHEntry.cpp, line 703

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=668245#c17)â€¢ 14 years ago |
|  | |

Attached patch

[patch v1.0](attachment.cgi?id=544591&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=544591&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=668245&attachment=544591)

In previous comment I suggest something like this

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=668245#c18)â€¢ 14 years ago |
|  | |

> shouldn't be a big deal now that libxul is default
Right; that's why it's doable at all.
> A possible alternative may be to annotate in KeyClass that we are notifying
> its observers, and in NotifyVisited bail out early if this flag is set.
If we guarantee that observers are always appended and that they are notified in order, this would work, yes.
> ###!!! ASSERTION: Adding a child where we already have a child?
This is a known issue. The scrollframe assert is not....

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=668245#c19)â€¢ 14 years ago |
|  | |

observers (Links) are only added in RegisterVisitedCallback:
// Start tracking our Link.
if (!observers.AppendElement(aLink)) {
// Curses - unregister and return failure.
(void)UnregisterVisitedCallback(aURI, aLink);
return NS\_ERROR\_OUT\_OF\_MEMORY;
}
so yeah, I think we can say they are always appended unless nsTObserverArray does fancy reordering!

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=668245#c20)â€¢ 14 years ago |
|  | |

nsTObserverArray doesn't play any games like that. It's just an array that lets you know when it changes. ;)

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=668245#c21)â€¢ 14 years ago |
|  | |

Even with the patch, I've been able to crash with a stack similar to stack 3 (obviously this time in xul.dll!nsTArray\_base<nsTArrayDefaultAllocator>::Length()).
While mObservers has a valid address, and key is not null, key->array is invalid.
These are nested NotifyVisited calls, but not for the same uri.
I'm trying to figure out how can we end up with a valid key containing a null array.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=668245#c22)â€¢ 14 years ago |
|  | |

Does the hashtable end up mutating while we're working with one of its entries?

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=668245#c23)â€¢ 14 years ago |
|  | |

Well, a previous call to NotifyVisited for URI1 causes a modal dialog (I think it's the alert we show for the "Unknown handler for this protocol" error), the events loop spins and NotifyVisited for URI2 is invoked. It does:
KeyClass\* key = mObservers.GetEntry(aURI);
[ ... ]
ObserverArray::ForwardIterator iter(key->array);
while (iter.HasMore())
So I don't think it can mutate between the GetEntry call and the HasMore() call (that invokes Length on a null base array). I was thinking of a OOM condition but I'd not expect the key to be notnull then.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=668245#c24)â€¢ 14 years ago |
|  | |

Not sure what's going on there...
I really think a scriptblocker is the right tool here.

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=668245#c25)â€¢ 14 years ago |
|  | |

You were right, during the iteration (when iter has mPosition = 1, so the first iteration happened, the second has to start), key starts pointing to bad memory, checking in the immediate window mObservers->GetEntry(aURI), it returns a quite different address, so the hash must have changed.
Various nested calls do a PutEntry and add observers, I suppose this may force the nsTHashTable to realloc.
The nsAutoScriptBlocker seems to avoid all nesting and perf hog, so I agree that it looks like the best approach, I just wanted to be sure there was not something more. Will attach the patch for that.
Most likely this page may cause other crashes not related to History, for sure I've seen once a memory writing violation during GC, always the nsGfxScrollFrame assertion and sometimes OOM. Most of the issues are being generated by the events loop spinning of the modal dialog, so maybe Jesse may create some fuzz tests that open these modal alerts.

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=668245#c26)â€¢ 14 years ago |
|  | |

Attached patch

[beta patch v1.0](attachment.cgi?id=544760&action=diff)
â€” [Details](attachment.cgi?id=544760&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=668245&attachment=544760)

patch for beta, going to make one for central/aurora.
Notice that, even with this patch, browser still crashes on OOM conditions.
[Attachment #544591](/attachment.cgi?id=544591&action=edit "patch v1.0") -
Attachment is obsolete: true
[Attachment #544760](/attachment.cgi?id=544760&action=edit "beta patch v1.0") -
Flags: review?(bzbarsky)

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=668245#c27)â€¢ 14 years ago |
|  | |

Attached patch

[central/aurora patch v1.0](attachment.cgi?id=544763&action=diff)
â€” [Details](attachment.cgi?id=544763&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=668245&attachment=544763)

unbitrot and uses MOZ\_ASSERT rather than a simple assertion, since that kind of failure should really be noticed.
[Attachment #544763](/attachment.cgi?id=544763&action=edit "central/aurora patch v1.0") -
Flags: review?(bzbarsky)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=668245#c28)â€¢ 14 years ago |
|  | |

Comment on [attachment 544760](/attachment.cgi?id=544760 "beta patch v1.0") [[details]](/attachment.cgi?id=544760&action=edit "beta patch v1.0") [[diff]](/attachment.cgi?id=544760&action=diff "beta patch v1.0") [[review]](/page.cgi?id=splinter.html&ignore=&bug=668245&attachment=544760)
beta patch v1.0
s/array, this/array, so this/
r=me
Why are we hitting OOM, though? Followup bug needed?
[Attachment #544760](/attachment.cgi?id=544760&action=edit "beta patch v1.0") -
Flags: review?(bzbarsky) â†’ review+

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=668245#c29)â€¢ 14 years ago |
|  | |

Comment on [attachment 544763](/attachment.cgi?id=544763 "central/aurora patch v1.0") [[details]](/attachment.cgi?id=544763&action=edit "central/aurora patch v1.0") [[diff]](/attachment.cgi?id=544763&action=diff "central/aurora patch v1.0") [[review]](/page.cgi?id=splinter.html&ignore=&bug=668245&attachment=544763)
central/aurora patch v1.0
r=me
[Attachment #544763](/attachment.cgi?id=544763&action=edit "central/aurora patch v1.0") -
Flags: review?(bzbarsky) â†’ review+

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=668245#c30)â€¢ 14 years ago |
|  | |

(In reply to [comment #28](/show_bug.cgi?id=668245#c28 "VERIFIED FIXED - Crash [@ mozilla::places::History::NotifyVisited(nsIURI*) ]"))
> Why are we hitting OOM, though? Followup bug needed?
Sorry for late, I was traveling. I reproduced this crash in a VM with 2GB memory, the page opened one hundred Outlook Express windows and a bunch of application handler selectors, plus its contents that is a bunch of iframes. Sometimes just doing that ended up with Outlook itself alerting for "Not enough memory". But I didn't pay enough attention to memory shared across the various apps. This week I don't have the XP box at hand, I may check that next week.

|  | [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402)  Reporter |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=668245#c31)â€¢ 14 years ago |
|  | |

fwiw, on Windows 7 Beta/Firefox 6 I saw 3 Assertion failure: !cx->thread->data.conservativeGC.requestThreshold with address 0xffffffffdddddddd on 7/7.
I can also reproduce nsTArray\_base<nsTArrayDefaultAllocator>::Length | mozilla::places::History::NotifyVisited mozilla::places::::NotifyVisitObservers::Run nsThread::ProcessNextEvent NS\_ProcessNextEvent\_P nsXULWindow::ShowModal on Mac OS X 10.5 and have seen that signature earlier in Windows 7. Linux may just be missing because my vms aren't configured with external protocol handlers. Flipping OS to All. I'll retest as soon as the patches land.OS: Windows XP â†’ All

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=668245#c32)â€¢ 14 years ago |
|  | |

the nsTArray length is fixed by this patch as well, the array mutates position in memory when the hash changes, so length fails.
Dunno about the GC, doesn't seem related at first glance.

|  | [Shawn Wilsher :sdwilsh](/user_profile?user_id=233280) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=668245#c33)â€¢ 14 years ago |
|  | |

Comment on [attachment 544763](/attachment.cgi?id=544763 "central/aurora patch v1.0") [[details]](/attachment.cgi?id=544763&action=edit "central/aurora patch v1.0") [[diff]](/attachment.cgi?id=544763&action=diff "central/aurora patch v1.0") [[review]](/page.cgi?id=splinter.html&ignore=&bug=668245&attachment=544763)
central/aurora patch v1.0
Review of [attachment 544763](/attachment.cgi?id=544763 "central/aurora patch v1.0") [[details]](/attachment.cgi?id=544763&action=edit "central/aurora patch v1.0") [[diff]](/attachment.cgi?id=544763&action=diff "central/aurora patch v1.0") [[review]](/page.cgi?id=splinter.html&ignore=&bug=668245&attachment=544763):
-----------------------------------------------------------------
::: toolkit/components/places/History.cpp
@@ +1307,5 @@
> + ObserverArray::ForwardIterator iter(key->array);
> + while (iter.HasMore()) {
> + Link\* link = iter.GetNext();
> + link->SetLinkState(eLinkState\_Visited);
> + // Verify that the observers hash doesn't mutate while looping through it.
We aren't looping through the observers hash though, so I don't think this comment is right.

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=668245#c34)â€¢ 14 years ago |
|  | |

right, will fix the comment on push, my English failed.

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=668245#c35)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/integration/mozilla-inbound/rev/060ce5929799>

|  | [Chris Jones [:cjones] inactive; ni?/f?/r? if you need me](/user_profile?user_id=336288) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=668245#c36)â€¢ 14 years ago |
|  | |

Do these two failures look familiar?
<http://tinderbox.mozilla.org/showlog.cgi?log=Mozilla-Inbound/1310598981.1310601152.2063.gz>
<http://tinderbox.mozilla.org/showlog.cgi?log=Mozilla-Inbound/1310599460.1310603892.15885.gz>

|  | [Chris Jones [:cjones] inactive; ni?/f?/r? if you need me](/user_profile?user_id=336288) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=668245#c37)â€¢ 14 years ago |
|  | |

Backed out for a new intermittent-but-frequent |make check| orange on linux in <http://hg.mozilla.org/integration/mozilla-inbound/rev/c4676497cbf3>.

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=668245#c38)â€¢ 14 years ago |
|  | |

Thank you, I think the failures are barely related and the test is maybe a bit fragile by itself, but the make check is for sure this patch... Looks like I hit a glib bug or something like that, we saw similar issues in the past with glib...
I'll try to push a patch without moz\_assert to tryserver and do a bunch of respins, since I suspect it's mostly causing the problem, even if I suspect fixing it properly may be hairy if it's really glib.

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=668245#c39)â€¢ 14 years ago |
|  | |

Any luck on an updated patch here, it'd be great to get this in on beta and aurora!

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=668245#a1605074_5003)â€¢ 14 years ago |

Whiteboard: [sg:critical?] â†’ [sg:critical?] [needs updated patches]

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=668245#c40)â€¢ 14 years ago |
|  | |

sorry, I was traveling, looking into it today.

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=668245#c41)â€¢ 14 years ago |
|  | |

I'm waiting on these results, so far so good:
<http://tbpl.mozilla.org/?tree=Try&rev=b9f0e38cf98b>
Since the make check failures were on debug builds, my theory on MOZ\_ASSERT sounds plausible, the patch on try uses NS\_ABORT\_IF\_FALSE instead. Once I have enough green builds I'll reland.

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=668245#c42)â€¢ 14 years ago |
|  | |

according to tryserver it should stick...
<http://hg.mozilla.org/mozilla-central/rev/bebc2764bed5>
will ask approvals as soon as I see everything is fine in central.Status: NEW â†’ RESOLVEDClosed: 14 years agoResolution: --- â†’ FIXEDTarget Milestone: --- â†’ mozilla8

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=668245#a1722010_240353)â€¢ 14 years ago |

[Attachment #544763](/attachment.cgi?id=544763&action=edit "central/aurora patch v1.0") -
Flags: approval-mozilla-aurora?

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=668245#c43)â€¢ 14 years ago |
|  | |

Comment on [attachment 544760](/attachment.cgi?id=544760 "beta patch v1.0") [[details]](/attachment.cgi?id=544760&action=edit "beta patch v1.0") [[diff]](/attachment.cgi?id=544760&action=diff "beta patch v1.0") [[review]](/page.cgi?id=splinter.html&ignore=&bug=668245&attachment=544760)
beta patch v1.0
notice, I'm going to use NS\_ABORT\_IF\_FALSE on all branches.
[Attachment #544760](/attachment.cgi?id=544760&action=edit "beta patch v1.0") -
Flags: approval-mozilla-beta?

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=668245#a1745207_5003)â€¢ 14 years ago |

Whiteboard: [sg:critical?] [needs updated patches] â†’ [sg:critical?]

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=668245#a1745317_5003)â€¢ 14 years ago |

[Attachment #544760](/attachment.cgi?id=544760&action=edit "beta patch v1.0") -
Flags: approval-mozilla-beta? â†’ approval-mozilla-beta+

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=668245#a1745324_5003)â€¢ 14 years ago |

[Attachment #544763](/attachment.cgi?id=544763&action=edit "central/aurora patch v1.0") -
Flags: approval-mozilla-aurora? â†’ approval-mozilla-aurora+

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=668245#c44)â€¢ 14 years ago |
|  | |

Transplanted:
<http://hg.mozilla.org/releases/mozilla-aurora/rev/183f76b8367b>
<http://hg.mozilla.org/releases/mozilla-beta/rev/37dc24eeac59>
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed)

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353)  Assignee |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=668245#c45)â€¢ 14 years ago |
|  | |

thank you very much, transplant worked fine from what I see.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=668245#c46)â€¢ 13 years ago |
|  | |

qa+ for verification on Firefox 7Whiteboard: [sg:critical?] â†’ [sg:critical?][qa+]

|  | [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402)  Reporter |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=668245#c47)â€¢ 13 years ago |
|  | |

verified on Nightly/9, Aurora/8, Beta/7 no crash with url on Windows XP, Windows 7, Linux 32/64 bit, Mac OS X 10.4Status: RESOLVED â†’ VERIFIEDKeywords: [verified-aurora](/buglist.cgi?keywords=verified-aurora&resolution=---),
[verified-beta](/buglist.cgi?keywords=verified-beta&resolution=---)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=668245#a7725086_279076)â€¢ 13 years ago |

Whiteboard: [sg:critical?][qa+] â†’ [sg:critical?][qa!]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=668245#a12010145_1689)â€¢ 13 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=668245&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.mozilla.org_1619d53f_20250125_224228.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, weâ€™d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured â€” we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2011-29

## Security issues addressed in Firefox 6

Announced
August 16, 2011
Impact
Critical
Products
Firefox
Fixed in

* Firefox 6

### Miscellaneous memory safety hazards (rv:4.0)

Impact: Critical

Description: Mozilla identified and fixed several
memory safety bugs in the browser engine used in Firefox 4, Firefox 5 and other
Mozilla-based products. Some of these bugs showed evidence of memory corruption
under certain circumstances, and we presume that with enough effort at least
some of these could be exploited to run arbitrary code.

References:

**Aral Yaman** reported a WebGL crash which
affected Firefox 4 and Firefox 5.

* <https://bugzilla.mozilla.org/show_bug.cgi?id=674042> ([CVE-2011-2989](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2989))

**Vivekanand Bolajwar** reported a JavaScript
crash which affected Firefox 4 and Firefox 5.

* <https://bugzilla.mozilla.org/show_bug.cgi?id=655660> ([CVE-2011-2991](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2991))

**Bert Hubert**
and **Theo Snelleman** of Fox-IT reported a crash in the Ogg reader
which affected Firefox 4 and Firefox 5.

* <https://bugzilla.mozilla.org/show_bug.cgi?id=672789> ([CVE-2011-2992](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2992))

Mozilla developers and community members Robert Kaiser,
Jesse Ruderman, moz\_bug\_r\_a4, Mardeg, Gary Kwong, Christoph Diehl, Martijn
Wargers, Travis Emmitt, Bob Clary and Jonathan Watt reported memory safety
issues which affected Firefox 4 and Firefox 5.

* [Memory safety bugs - Firefox 6](https://bugzilla.mozilla.org/buglist.cgi?bug_id=646825,648206,650273,650275,651030,660517,662132,665518,667092,667512,668245,669584,650732,667315) ([CVE-2011-2985](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2985))

### Unsigned scripts can call script inside signed JAR

Impact: Critical

Description: **Rafael Gieschke**
reported that unsigned JavaScript could call into script inside a signed JAR
thereby inheriting the identity of the site that signed the JAR as well as any
permissions that a user had granted the signed JAR.

This is a distinct issue
from [MFSA 2008-23](/security/announce/2008/mfsa2008-23.html) and did
not affect Firefox 3.6.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=657267> ([CVE-2011-2993](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2993))

### String crash using WebGL shaders

Impact: Critical

Description: **Michael Jordon** of
Context IS reported that an overly long shader program could cause a buffer
overrun and crash in a string class used to store the shader source code.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=665936> ([CVE-2011-2988](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2988))

### Heap overflow in ANGLE library

Impact: Critical

Description: **Michael Jordon** of
Context IS reported a potentially exploitable heap overflow in the ANGLE library
used by Mozilla's WebGL implementation.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=665934> ([CVE-2011-2987](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2987))

### Crash in SVGTextElement.getCharNumAtPosition()

Impact: Critical

Description: Security
researcher **regenrecht** reported via TippingPoint's Zero Day
Initiative that a SVG text manipulation routine contained a dangling pointer
vulnerability.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=648094> ([CVE-2011-0084](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-0084))

### Credential leakage using Content Security Policy reports

Impact: High

Description: **Mike Cardwell**
reported that Content Security Policy violation reports failed to strip out
proxy authorization credentials from the list of request headers. **Daniel
Veditz** reported that redirecting to a website with Content Security
Policy resulted in the incorrect resolution of hosts in the constructed
policy.

References:

* [CSP reports leak proxy auth tokens](https://bugzilla.mozilla.org/show_bug.cgi?id=664983)
* [Incorrect CSP host resolution](https://bugzilla.mozilla.org/show_bug.cgi?id=679588)
* [CVE-2011-2990](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2990)

### Cross-origin data theft using canvas and Windows D2D

Impact: High

Description: **nasalislarvatus3000**
reported that when using Windows D2D hardware acceleration, image data from one
domain could be inserted into a canvas and read by a different domain.

References:

* <https://bugzilla.mozilla.org/show_bug.cgi?id=655836> ([CVE-2011-2986](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2986))

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporationâ€™s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are Â©1998â€“2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_eb78c78a_20250125_224232.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/646825)
* [XML](/show_bug.cgi?ctype=xml&id=646825)

Closed
[Bug 646825](/show_bug.cgi?id=646825)

Opened 14 years ago
Closed 14 years ago

# [ANGLE] crash [@ gl::VertexDataConverter<float, gl::WidenRule<int, 2>, gl::ConversionRule<int, 0, int>, gl::DefaultVertexValues<float, int> >::convertArray(float const\*, unsigned int, unsigned int, float\*)]with Google Labs' Body Map

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

[ANGLE] crash [@ gl::VertexDataConverter<float, gl::WidenRule<int, 2>, gl::ConversionRule<int, 0, int>, gl::DefaultVertexValues<float, int> >::convertArray(float const\*, unsigned int, unsigned int, float\*)]with Google Labs' Body Map

## Categories

### (Core :: Graphics: CanvasWebGL, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Graphics%3A%20CanvasWebGL#Graphics%3A%20CanvasWebGL)

Graphics: CanvasWebGL
â–¾

Core :: Graphics: CanvasWebGL
Bugs with the WebGL Canvas Context.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20CanvasWebGL&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20CanvasWebGL&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Graphics%3A%20CanvasWebGL)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Windows NT

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | --- | [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| firefox7 | [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed) |
| firefox8 | [+](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=fixed) |
| status2.0 | --- | [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 |  | affected |
| firefox6 | + | fixed |
| firefox7 | + | fixed |
| firefox8 | + | fixed |
| status2.0 |  | wanted |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: kairo, Assigned: bjacob)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/8f64ddf291d83cdc891c05ee5d5cc5dc?d=mm&size=40)  [bjacob](/user_profile?user_id=382769)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [kairo](/user_profile?user_id=5189)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/ca6a57abf052ac63d917d5dae1cc0f00?d=mm&size=40)  [jgilbert](/user_profile?user_id=419431)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

7 people

## References

### ( [URL](http://bodybrowser.googlelabs.com/body.html "http://bodybrowser.googlelabs.com/body.html#") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[675634](/show_bug.cgi?id=675634 "RESOLVED WORKSFORME - Firefox crashes while on a page that uses WebGL [@ gl::VertexDataConverter<float, gl::WidenRule<int, 2>, gl::ConversionRule<int, 0, int>, gl::DefaultVertexValues<float, int> >::convertArray(void const*, unsigned int, unsigned int, void*) ]")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=646825&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=646825)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[bodybrowser.googlelabs.com/body.html#](http://bodybrowser.googlelabs.com/body.html "http://bodybrowser.googlelabs.com/body.html#")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[code.google.com/p/angleproject/issues...](http://code.google.com/p/angleproject/issues/detail?id=139 "http://code.google.com/p/angleproject/issues/detail?id=139")

[code.google.com/p/angleproject/issues...](http://code.google.com/p/angleproject/issues/detail?id=179 "http://code.google.com/p/angleproject/issues/detail?id=179")

## Details

### (Keywords: crash, Whiteboard: [sg:critical?][qa?])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?][qa?]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ gl::VertexDataConverter<float, gl::WidenRule<int, 2>, gl::ConversionRule<int, 0, int>, gl::DefaultVertexValues<float, int> >::convertArray(float const\*, unsigned int, unsigned int, float\*) ]](https://crash-stats.mozilla.org/signature/?signature=gl%3A%3AVertexDataConverter%3Cfloat%2C%20gl%3A%3AWidenRule%3Cint%2C%202%3E%2C%20gl%3A%3AConversionRule%3Cint%2C%200%2C%20int%3E%2C%20gl%3A%3ADefaultVertexValues%3Cfloat%2C%20int%3E%20%3E%3A%3AconvertArray%28float%20const%2A%2C%20unsigned%20int%2C%20unsigned%20int%2C%20float%2A%29)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [angle r702](/attachment.cgi?id=548223)  [14 years ago](#c8)  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)   7.83 KB, patch | christian : [approval-mozilla-aurora+](#c10 "14 years ago")  christian : [approval-mozilla-beta+](#c10 "14 years ago") | [Details](/attachment.cgi?id=548223&action=edit) | [Diff](/attachment.cgi?id=548223&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=646825&attachment=548223) |
| --- | --- | --- |

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Robert Kaiser](/user_profile?user_id=5189)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=646825#c0)â€¢ 14 years ago |
|  | |

This bug was filed from the Socorro interface and is
report [bp-8a45c98b-589b-481f-99c1-f042b2110330](https://crash-stats.mozilla.org/report/index/8a45c98b-589b-481f-99c1-f042b2110330) .
=============================================================
Since 2011-03-29, but really on 2011-03-03, we see a rise in crashes with that signature, the comments in <https://crash-stats.mozilla.com/report/list?signature=gl%3A%3AVertexDataConverter%3Cfloat%2C%20gl%3A%3AWidenRule%3Cint%2C%202%3E%2C%20gl%3A%3AConversionRule%3Cint%2C%200%2C%20int%3E%2C%20gl%3A%3ADefaultVertexValues%3Cfloat%2C%20int%3E%20%3E%3A%3AconvertArray%28float%20const%2A%2C%20unsigned%20int%2C%20unsigned%20int%2C%20float%2A%29> seem to almost all point to Google Labs' Body Map and <http://bodybrowser.googlelabs.com/body.html># and as I heard this launched in the last days, the rise seems to correspond.
There was a small amount of crashes with this signature around before, 2-20 crashes per day when we still processed all crash reports. On 2011-03-30, we have 61 crashes with only 10% of all crashes being processed by the Socorro system (so in reality we probably have ~600), making this #186 on this day's topcrash list for 4.0\* versions.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=646825#c1)â€¢ 14 years ago |
|  | |

This is a ANGLE bug. This code didn't change recently in ANGLE so I'll assume that it's still present in upstream.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=646825#c2)â€¢ 14 years ago |
|  | |

Filed ANGLE [bug 139](/show_bug.cgi?id=139 "VERIFIED FIXED - nsrpub/pr/src/md/unix.c error for BSD/OS 3.1"):
<http://code.google.com/p/angleproject/issues/detail?id=139>

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=646825#a1607_382769)â€¢ 14 years ago |

Summary: crash [@ gl::VertexDataConverter<float, gl::WidenRule<int, 2>, gl::ConversionRule<int, 0, int>, gl::DefaultVertexValues<float, int> >::convertArray(float const\*, unsigned int, unsigned int, float\*)]with Google Labs' Body Map â†’ [ANGLE] crash [@ gl::VertexDataConverter<float, gl::WidenRule<int, 2>, gl::ConversionRule<int, 0, int>, gl::DefaultVertexValues<float, int> >::convertArray(float const\*, unsigned int, unsigned int, float\*)]with Google Labs' Body Map

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=646825#a6076136_1)â€¢ 14 years ago |

Crash Signature: [@ gl::VertexDataConverter<float, gl::WidenRule<int, 2>, gl::ConversionRule<int, 0, int>, gl::DefaultVertexValues<float, int> >::convertArray(float const\*, unsigned int, unsigned int, float\*)]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=646825#c3)â€¢ 14 years ago |
|  | |

Chris Evans says this looks like a Windows-specific buffer overflow in the ANGLE code. If there's an ANGLE fix for this in time would be great to pick it up in time for Firefox 6 (although it's late in the game).Assignee: nobody â†’ bjacobGroup: core-security
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- â†’ [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected)
[status-firefox8](/buglist.cgi?f1=cf_status_firefox8&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=affected)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F)
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B)See Also: â†’ <http://code.google.com/p/angleproject/issues/detail?id=139>Whiteboard: [sg:critical?]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=646825#c4)â€¢ 14 years ago |
|  | |

A reduced testcase would be great for debugging and verification. The bodybrowser site code could change over time (and in fact is likely to if this is a common crash).Keywords: [testcase-wanted](/buglist.cgi?keywords=testcase-wanted&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=646825#c5)â€¢ 14 years ago |
|  | |

This crash is fixed in ANGLE r702 according to the two angleproject bugs.See Also: â†’ <http://code.google.com/p/angleproject/issues/detail?id=179>

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=646825#c6)â€¢ 14 years ago |
|  | |

That patch looks appropriate to take during the Fx6 beta period
<https://code.google.com/p/angleproject/source/detail?r=702>
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=646825#c7)â€¢ 14 years ago |
|  | |

OK, will do tomorrow. Worried I might forget. Ping me if I do.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=646825#c8)â€¢ 14 years ago |
|  | |

Attached patch

[angle r702](attachment.cgi?id=548223&action=diff)
â€” [Details](attachment.cgi?id=548223&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=646825&attachment=548223)

Tryserver:
<http://hg.mozilla.org/try/rev/3cd4da06cf08>

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=646825#c9)â€¢ 14 years ago |
|  | |

Landed on central:
<http://hg.mozilla.org/mozilla-central/rev/85b0cc81a189>Status: NEW â†’ RESOLVEDClosed: 14 years agoResolution: --- â†’ FIXED

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=646825#a10115239_382769)â€¢ 14 years ago |

[Attachment #548223](/attachment.cgi?id=548223&action=edit "angle r702") -
Flags: approval-mozilla-beta?
[Attachment #548223](/attachment.cgi?id=548223&action=edit "angle r702") -
Flags: approval-mozilla-aurora?

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=646825#c10)â€¢ 14 years ago |
|  | |

Comment on [attachment 548223](/attachment.cgi?id=548223 "angle r702") [[details]](/attachment.cgi?id=548223&action=edit "angle r702") [[diff]](/attachment.cgi?id=548223&action=diff "angle r702") [[review]](/page.cgi?id=splinter.html&ignore=&bug=646825&attachment=548223)
angle r702
Approved for beta and aurora. Please land asap
[Attachment #548223](/attachment.cgi?id=548223&action=edit "angle r702") -
Flags: approval-mozilla-beta?
[Attachment #548223](/attachment.cgi?id=548223&action=edit "angle r702") -
Flags: approval-mozilla-beta+
[Attachment #548223](/attachment.cgi?id=548223&action=edit "angle r702") -
Flags: approval-mozilla-aurora?
[Attachment #548223](/attachment.cgi?id=548223&action=edit "angle r702") -
Flags: approval-mozilla-aurora+

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=646825#c11)â€¢ 14 years ago |
|  | |

Landed on Aurora and Beta:
<http://hg.mozilla.org/releases/mozilla-aurora/rev/46cd7e3ccedd>
<http://hg.mozilla.org/releases/mozilla-beta/rev/4621648305dc>

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=646825#c12)â€¢ 13 years ago |
|  | |

Marking fixed for branches!
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed)
[status-firefox8](/buglist.cgi?f1=cf_status_firefox8&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=fixed)
[tracking-firefox8](/buglist.cgi?f1=cf_tracking_firefox8&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=646825#a10994315_1689)â€¢ 13 years ago |

Depends on: [675634](/show_bug.cgi?id=675634 "RESOLVED WORKSFORME - Firefox crashes while on a page that uses WebGL [@ gl::VertexDataConverter<float, gl::WidenRule<int, 2>, gl::ConversionRule<int, 0, int>, gl::DefaultVertexValues<float, int> >::convertArray(void const*, unsigned int, unsigned int, void*) ]")

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=646825#c13)â€¢ 13 years ago |
|  | |

As per the testcase-wanted keyword, is there something QA can do to verify this bug fix?Whiteboard: [sg:critical?] â†’ [sg:critical?][qa?]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=646825#a19744768_1689)â€¢ 13 years ago |

Group: core-security

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=646825#a143440629_75935)â€¢ 9 years ago |

Keywords: [testcase-wanted](/buglist.cgi?keywords=testcase-wanted&resolution=---)
You need to [log in](/show_bug.cgi?id=646825&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_ea95b54a_20250125_224241.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/651030)
* [XML](/show_bug.cgi?ctype=xml&id=651030)

Closed
[Bug 651030](/show_bug.cgi?id=651030)

Opened 14 years ago
Closed 14 years ago

# "Assertion failure: JSVAL\_IS\_DOUBLE\_IMPL(data)"

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

"Assertion failure: JSVAL\_IS\_DOUBLE\_IMPL(data)"

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
â–¾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=unaffected) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| firefox7 | [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed) |
| status2.0 | --- | [unaffected](/buglist.cgi?f1=cf_status_20&o1=equals&v1=unaffected) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 |  | unaffected |
| firefox6 | + | fixed |
| firefox7 | + | fixed |
| status2.0 |  | unaffected |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: jorendorff)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=40)  [jorendorff](/user_profile?user_id=281791)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[637099](/show_bug.cgi?id=637099 "VERIFIED FIXED - Remove JS_ClearScope calls on windows")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[614714](/show_bug.cgi?id=614714 "RESOLVED FIXED - Assertion failure: obj->containsSlot(slot) with noscript+youtube"), [653561](/show_bug.cgi?id=653561 "RESOLVED WORKSFORME - Firefox 6.0a1 Crash Report [@ JSObject::allocSlot ]")

Dependency [tree](/showdependencytree.cgi?id=651030&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=651030)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, regression, testcase, Whiteboard: [sg:critical?][fixed-in-tracemonkey][qa-])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?][fixed-in-tracemonkey][qa-]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [jorendorff](/user_profile?user_id=281791) | [in-testsuite](#c22 "14 years ago") | - |
| --- | --- | --- |
| [jorendorff](/user_profile?user_id=281791) | in-testsuite | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 1 obsolete file)

| [testcase (crashes Firefox when loaded)](/attachment.cgi?id=526925)  [14 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   311 bytes, text/html |  | [Details](/attachment.cgi?id=526925&action=edit) |
| --- | --- | --- |
| [stack trace](/attachment.cgi?id=526926)  [14 years ago](#c1)  [Jesse Ruderman](/user_profile?user_id=11608)   51.52 KB, text/plain |  | [Details](/attachment.cgi?id=526926&action=edit) |
| [WIP 1 - patch that works](/attachment.cgi?id=529228)  [14 years ago](#c12)  [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791)   1.92 KB, patch |  | [Details](/attachment.cgi?id=529228&action=edit) | [Diff](/attachment.cgi?id=529228&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=651030&attachment=529228) |
| [v2](/attachment.cgi?id=530051)  [14 years ago](#c14)  [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791)   3.50 KB, patch | cdleary : [review+](#c21 "14 years ago") | [Details](/attachment.cgi?id=530051&action=edit) | [Diff](/attachment.cgi?id=530051&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=651030&attachment=530051) |

Show Obsolete

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=651030#c0)â€¢ 14 years ago |
|  | |

Attached file
[testcase (crashes Firefox when loaded)](attachment.cgi?id=526925)
â€” [Details](attachment.cgi?id=526925&action=edit)

Assertion failure: JSVAL\_IS\_DOUBLE\_IMPL(data), at js/src/jsvalue.h:715
TM branch only. I'm guessing it's a TM branch regression.
(Tested using <http://hg.mozilla.org/tracemonkey/rev/59325b2ca38b>)

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=651030#c1)â€¢ 14 years ago |
|  | |

Attached file
[stack trace](attachment.cgi?id=526926)
â€” [Details](attachment.cgi?id=526926&action=edit)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=651030#c2)â€¢ 14 years ago |
|  | |

Yeah, I see this. In this case |data| is an object. In particular, a Function object; the JSFunction looks to be non-interpreted and the native looks like Function(JSContext\*, unsigned int, js::Value\*).
It looks like in JSObject::allocSlot (where |this| is a Window) we end up in the |if (inDictionaryMode() && lastProp->hasTable()) {| case and |last| ends up 82. The code then tries to do:
4398 #ifdef DEBUG
4399 JS\_ASSERT(last < slot);
4400 uint32 next = getSlot(last).toPrivateUint32();
4401 JS\_ASSERT\_IF(next != SHAPE\_INVALID\_SLOT, next < slot);
4402 #endif
but getSlot(last) is storing Function, not an integer.
Is this another symptom of JS\_ClearScope biting us?

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=651030#c3)â€¢ 14 years ago |
|  | |

Hitting this on mozilla-central now that TM has merged to m-c.
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F)

|  | [David Mandelin [:dmandelin]](/user_profile?user_id=294323) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=651030#c4)â€¢ 14 years ago |
|  | |

This doesn't repro for me on today's nightly or on TM tip (although I thought it did a few days ago). Can you recheck?

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=651030#c5)â€¢ 14 years ago |
|  | |

I can still reproduce with <http://hg.mozilla.org/mozilla-central/rev/19555867d9eb>

|  | [David Mandelin [:dmandelin]](/user_profile?user_id=294323) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=651030#c6)â€¢ 14 years ago |
|  | |

Jesse showed this to me in gdb. It is crashing calling js\_GetMethod on an object that looks like it's been "fake-ClearScope'd", i.e., it has a lot of properties, most of which are undefined.
I can now repro this on 32-bit Win7 loading the test from a local file.

|  | [David Mandelin [:dmandelin]](/user_profile?user_id=294323) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=651030#c7)â€¢ 14 years ago |
|  | |

Bisected to:
changeset: 67781:e8a149ad8bcf
user: Jason Orendorff <jorendorff@mozilla.com>
date: Thu Apr 14 16:59:26 2011 -0700
summary: [Bug 614714](/show_bug.cgi?id=614714 "RESOLVED FIXED - Assertion failure: obj->containsSlot(slot) with noscript+youtube") - Change JS\_ClearScope to use the new enumeration code.
r=Waldo.

|  | [David Mandelin [:dmandelin]](/user_profile?user_id=294323) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=651030#a846117_294323)â€¢ 14 years ago |

Depends on: [637099](/show_bug.cgi?id=637099 "VERIFIED FIXED - Remove JS_ClearScope calls on windows")

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=651030#c8)â€¢ 14 years ago |
|  | |

Taking.Assignee: general â†’ jorendorff

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=651030#c9)â€¢ 14 years ago |
|  | |

In the shell:
a = 1;
b = 2;
delete a;
clear();
c = 3;

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=651030#c10)â€¢ 14 years ago |
|  | |

Correction, clear() without arguments always crashes. That test case is bogus.

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=651030#c11)â€¢ 14 years ago |
|  | |

Sigh, just wasn't trying hard enough. Real shell test case:
a = 1;
b = 1;
delete a;
c = 1;
delete b;
clear(this);
d = 1;
The bug is in jsscope.cpp, JSObject::removeProperty:
/\*
\* Maintain slot freelist consistency. The only constraint we
\* have is that slot numbers on the freelist are less than
\* lastProp->slotSpan. Thus, if the freelist is non-empty,
\* then lastProp->slotSpan may not decrease.
\*/
if (table->freelist != SHAPE\_INVALID\_SLOT) {
lastProp->slotSpan = shape->slotSpan;
/\* Add the slot to the freelist if it wasn't added in freeSlot. \*/
if (hadSlot && !addedToFreelist) {
getSlotRef(shape->slot).setPrivateUint32(table->freelist);
table->freelist = shape->slot;
}
}
Actually there is another constraint, which is that reserved slots must not be put on the freelist. [Bug 595230](/show_bug.cgi?id=595230 "VERIFIED FIXED - Crash [@ EscapeAttributeValue] or \"Assertion failure: JSVAL_TO_OBJECT(nsval)->getClass() == &js_NamespaceClass,\"") fixed this in JSObject::freeSlot, but we missed the similar code in JSObject::removeProperty. :-\
I have a patch, but it simply copies the fix. I should try commoning up code instead. No time now.

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=651030#c12)â€¢ 14 years ago |
|  | |

Attached patch

[WIP 1 - patch that works](attachment.cgi?id=529228&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=529228&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=651030&attachment=529228)

(no test, either)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=651030#c13)â€¢ 14 years ago |
|  | |

Without knowing anything "lots of properties that appear undefined" ([comment 6](/show_bug.cgi?id=651030#c6 "RESOLVED FIXED - \"Assertion failure: JSVAL_IS_DOUBLE_IMPL(data)\"")) sounds potentially exploitable.Blocks: [614714](/show_bug.cgi?id=614714 "RESOLVED FIXED - Assertion failure: obj->containsSlot(slot) with noscript+youtube")
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_20&o1=equals&v1=unaffected)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=unaffected)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)Whiteboard: [sg:critical?]

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=651030#c14)â€¢ 14 years ago |
|  | |

Attached patch

[v2](attachment.cgi?id=530051&action=diff)
â€” [Details](attachment.cgi?id=530051&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=651030&attachment=530051)

It seems like to "common up" we could switch these two chunks of code in JSObject::removeProperty:
> /\* First, if shape is unshared and has a slot, free its slot number. \*/
> bool addedToFreelist = false;
> bool hadSlot = !shape->isAlias() && shape->hasSlot();
> if (hadSlot) {
> addedToFreelist = freeSlot(cx, shape->slot);
> JS\_ATOMIC\_INCREMENT(&cx->runtime->propertyRemovals);
> }
>
> /\* If shape is not the last property added, switch to dictionary mode. \*/
> if (shape != lastProp && !inDictionaryMode()) {
> if (!toDictionaryMode(cx))
> return false;
> spp = nativeSearch(shape->id);
> shape = SHAPE\_FETCH(spp);
> }
Then get rid of addedToFreelist entirely and the chunk of code that tests it.
It looks like it would work, but I don't want to take on another slightly risky change right now. So posting the smaller, more cowardly patch.
[Attachment #529228](/attachment.cgi?id=529228&action=edit "WIP 1 - patch that works") -
Attachment is obsolete: true
[Attachment #530051](/attachment.cgi?id=530051&action=edit "v2") -
Flags: review?(brendan)

|  | [Bob Clary [:bc] (inactive)](/user_profile?user_id=23402) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=651030#c15)â€¢ 14 years ago |
|  | |

Seen this in automation on WinXP with:
<http://cabanaomundao.blogspot.com/> | <http://www.cabanaomundaogospel.net.br/>
<http://vuaphim.net/xem-phim> (reproducible on xp)OS: Mac OS X â†’ AllHardware: x86\_64 â†’ All

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=651030#c16)â€¢ 14 years ago |
|  | |

Comment on [attachment 530051](/attachment.cgi?id=530051 "v2") [[details]](/attachment.cgi?id=530051&action=edit "v2") [[diff]](/attachment.cgi?id=530051&action=diff "v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=651030&attachment=530051)
v2
Shifting review, hoping to get this in.
dmandelin, please feel free to redirect this to whoever knows this code.
[Attachment #530051](/attachment.cgi?id=530051&action=edit "v2") -
Flags: review?(brendan) â†’ review?(dmandelin)

|  | [Rob Campbell [:rc] (:robcee)](/user_profile?user_id=249294) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=651030#c17)â€¢ 14 years ago |
|  | |

seems likely related to [bug 653561](/show_bug.cgi?id=653561 "RESOLVED WORKSFORME - Firefox 6.0a1 Crash Report [@ JSObject::allocSlot ]") based on the time-frame in these comments. Jesse, presumably you're tracking both?

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=651030#c18)â€¢ 14 years ago |
|  | |

robcee, [bug 653561 comment 4](/show_bug.cgi?id=653561#c4 "RESOLVED WORKSFORME - Firefox 6.0a1 Crash Report [@ JSObject::allocSlot ]") is all I've got.

|  | [Rob Campbell [:rc] (:robcee)](/user_profile?user_id=249294) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=651030#c19)â€¢ 14 years ago |
|  | |

Righto. We'll see if it goes away when Jason lands his fix.

|  | [Chris Leary [:cdleary] (not checking bugmail)](/user_profile?user_id=374575) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=651030#c20)â€¢ 14 years ago |
|  | |

Comment on [attachment 530051](/attachment.cgi?id=530051 "v2") [[details]](/attachment.cgi?id=530051&action=edit "v2") [[diff]](/attachment.cgi?id=530051&action=diff "v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=651030&attachment=530051)
v2
Stealing review with permission.
[Attachment #530051](/attachment.cgi?id=530051&action=edit "v2") -
Flags: review?(dmandelin) â†’ review?(cdleary)

|  | [Chris Leary [:cdleary] (not checking bugmail)](/user_profile?user_id=374575) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=651030#c21)â€¢ 14 years ago |
|  | |

Comment on [attachment 530051](/attachment.cgi?id=530051 "v2") [[details]](/attachment.cgi?id=530051&action=edit "v2") [[diff]](/attachment.cgi?id=530051&action=diff "v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=651030&attachment=530051)
v2
Looks right to me. Without reading the comments I also saw the difference from JSObject::freeSlot and thought that the addedToFreeList stuff could go, but I understand your reluctance.
[Attachment #530051](/attachment.cgi?id=530051&action=edit "v2") -
Flags: review?(cdleary) â†’ review+

|  | [David Mandelin [:dmandelin]](/user_profile?user_id=294323) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=651030#a1888037_294323)â€¢ 14 years ago |

Blocks: [653561](/show_bug.cgi?id=653561 "RESOLVED WORKSFORME - Firefox 6.0a1 Crash Report [@ JSObject::allocSlot ]")

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=651030#c22)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/tracemonkey/rev/4964885e6b9a>
test omittedFlags: in-testsuite-Whiteboard: [sg:critical?] â†’ [sg:critical?][fixed-in-tracemonkey]

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=651030#a4465167_12352)â€¢ 14 years ago |

[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=651030#c23)â€¢ 14 years ago |
|  | |

This seems like it's fixed everywhere by now. Marking as such.Status: NEW â†’ RESOLVEDClosed: 14 years ago
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
--- â†’ [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed)
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B)Resolution: --- â†’ FIXED

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=651030#a4465441_1689)â€¢ 14 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=651030#c24)â€¢ 13 years ago |
|  | |

qa-: fix verification unnecessaryWhiteboard: [sg:critical?][fixed-in-tracemonkey] â†’ [sg:critical?][fixed-in-tracemonkey][qa-]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=651030#a18138451_1689)â€¢ 13 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=651030&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_8b8dcaec_20250125_224253.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/669584)
* [XML](/show_bug.cgi?ctype=xml&id=669584)

Closed
[Bug 669584](/show_bug.cgi?id=669584)

Opened 14 years ago
Closed 14 years ago

# The fix for [bug 639728](/show_bug.cgi?id=639728 "RESOLVED FIXED - Crash [@ mozilla::DOMSVGPathSegList::ItemAt] with GC") forgot that items are created lazily

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

The fix for bug 639728 forgot that items are created lazily

## Categories

### (Core :: SVG, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=SVG#SVG)

SVG
â–¾

Core :: SVG

Issues with the layout or rendering of SVG content and interacting with the SVG DOM.

Example bugs:

* SVG marker can not be clipped with clip-path
* x position adjustments of SVG vertical text on a path moves in the wrong direction

Specifications covered:

* SVG

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=SVG&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=SVG&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=SVG)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| firefox7 | [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed) |
| firefox8 | [+](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=fixed) |
| blocking2.0 | --- | [-](/buglist.cgi?f1=cf_blocking_20&o1=equals&v1=-) |
| status2.0 | --- | [wontfix](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wontfix) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | - | wontfix |
| firefox6 | + | fixed |
| firefox7 | + | fixed |
| firefox8 | + | fixed |
| blocking2.0 |  | - |
| status2.0 |  | wontfix |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jwatt, Assigned: jwatt)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](extensions/Gravatar/web/default.jpg)  [jwatt](/user_profile?user_id=32767)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [jwatt](/user_profile?user_id=32767)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jwatt](/user_profile?user_id=32767)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

3 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[639728](/show_bug.cgi?id=639728 "RESOLVED FIXED - Crash [@ mozilla::DOMSVGPathSegList::ItemAt] with GC"), [686044](/show_bug.cgi?id=686044 "VERIFIED FIXED - Crash with after path.pathSegList.appendItem and GC")

Dependency [tree](/showdependencytree.cgi?id=669584&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=669584)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Whiteboard: [sg:critical?][qa-])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?][qa-]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [jwatt](/user_profile?user_id=32767) | [in-testsuite](#a195129_32767 "14 years ago") | ? |
| --- | --- | --- |
| [jwatt](/user_profile?user_id=32767) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [patch](/attachment.cgi?id=544186)  [14 years ago](#c1)  [Jonathan Watt [:jwatt]](/user_profile?user_id=32767)   6.21 KB, patch | dholbert : [review+](#c2 "14 years ago")  christian : [approval-mozilla-aurora+](#c7 "14 years ago")  christian : [approval-mozilla-beta+](#c7 "14 years ago") | [Details](/attachment.cgi?id=544186&action=edit) | [Diff](/attachment.cgi?id=544186&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=669584&attachment=544186) |
| --- | --- | --- |

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jonathan Watt [:jwatt]](/user_profile?user_id=32767)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=669584#c0)â€¢ 14 years ago |
|  | |

The fix for [bug 639728](/show_bug.cgi?id=639728 "RESOLVED FIXED - Crash [@ mozilla::DOMSVGPathSegList::ItemAt] with GC") forgot that items are created lazily. Checking that the list length is going to change to zero is not enough. The last remaining reference to the object may be a single item at an arbitrary index, so really we have to check whether the list length is decreasing.

|  | [Jonathan Watt [:jwatt]](/user_profile?user_id=32767)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=669584#c1)â€¢ 14 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=544186&action=diff)
â€” [Details](attachment.cgi?id=544186&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=669584&attachment=544186)

[Attachment #544186](/attachment.cgi?id=544186&action=edit "patch") -
Flags: review?(dholbert)

|  | [Jonathan Watt [:jwatt]](/user_profile?user_id=32767)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=669584#a565_32767)â€¢ 14 years ago |

Blocks: [639728](/show_bug.cgi?id=639728 "RESOLVED FIXED - Crash [@ mozilla::DOMSVGPathSegList::ItemAt] with GC")

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=669584#c2)â€¢ 14 years ago |
|  | |

Comment on [attachment 544186](/attachment.cgi?id=544186 "patch") [[details]](/attachment.cgi?id=544186&action=edit "patch") [[diff]](/attachment.cgi?id=544186&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=669584&attachment=544186)
patch
Do you have a testcase for this? (not that we'd want to check it in yet)
We probably should take this on aurora & beta, too.
[Attachment #544186](/attachment.cgi?id=544186&action=edit "patch") -
Flags: review?(dholbert) â†’ review+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=669584#c3)â€¢ 14 years ago |
|  | |

guessing sg:critical since the other one was and you marked this as a security bug? please correct if wrong.blocking2.0: --- â†’ -
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- â†’ [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected)
[status-firefox8](/buglist.cgi?f1=cf_status_firefox8&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=affected)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- â†’ [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-)Keywords: [testcase-wanted](/buglist.cgi?keywords=testcase-wanted&resolution=---)Whiteboard: [sg:critical?]

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=669584#c4)â€¢ 14 years ago |
|  | |

Yes -- this is indeed [sg:critical]. (could trigger early deletion of the |this| pointer, followed by more method-calls on |this|, in the affected code.)

|  | [Jonathan Watt [:jwatt]](/user_profile?user_id=32767)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=669584#c5)â€¢ 14 years ago |
|  | |

Pushed <http://hg.mozilla.org/integration/mozilla-inbound/rev/a3053d8e4090>
I don't have the cycles to make a regression testcase today, but I'll leave this bug open for that. The testcase only needs to land on trunk anyway.

|  | [Jonathan Watt [:jwatt]](/user_profile?user_id=32767)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=669584#c6)â€¢ 14 years ago |
|  | |

Comment on [attachment 544186](/attachment.cgi?id=544186 "patch") [[details]](/attachment.cgi?id=544186&action=edit "patch") [[diff]](/attachment.cgi?id=544186&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=669584&attachment=544186)
patch
Yeah, I agree with dholbert this should land on beta and aurora. Pretty much no risk as mentioned in [bug 639728 comment 20](/show_bug.cgi?id=639728#c20 "RESOLVED FIXED - Crash [@ mozilla::DOMSVGPathSegList::ItemAt] with GC").
[Attachment #544186](/attachment.cgi?id=544186&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #544186](/attachment.cgi?id=544186&action=edit "patch") -
Flags: approval-mozilla-aurora?

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=669584#a120535_12352)â€¢ 14 years ago |

[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
[wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) â†’ [wontfix](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wontfix)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B)
[tracking-firefox8](/buglist.cgi?f1=cf_tracking_firefox8&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%2B)

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=669584#c7)â€¢ 14 years ago |
|  | |

Comment on [attachment 544186](/attachment.cgi?id=544186 "patch") [[details]](/attachment.cgi?id=544186&action=edit "patch") [[diff]](/attachment.cgi?id=544186&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=669584&attachment=544186)
patch
Approved for releases/mozilla-aurora and releases/mozilla-beta
[Attachment #544186](/attachment.cgi?id=544186&action=edit "patch") -
Flags: approval-mozilla-beta?
[Attachment #544186](/attachment.cgi?id=544186&action=edit "patch") -
Flags: approval-mozilla-beta+
[Attachment #544186](/attachment.cgi?id=544186&action=edit "patch") -
Flags: approval-mozilla-aurora?
[Attachment #544186](/attachment.cgi?id=544186&action=edit "patch") -
Flags: approval-mozilla-aurora+

|  | [Jonathan Watt [:jwatt]](/user_profile?user_id=32767)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=669584#c8)â€¢ 14 years ago |
|  | |

Pushed:
<https://hg.mozilla.org/releases/mozilla-beta/rev/eb18cd57c25b>
<https://hg.mozilla.org/releases/mozilla-aurora/rev/85609541e35e>

|  | [Jonathan Watt [:jwatt]](/user_profile?user_id=32767)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=669584#a178363_32767)â€¢ 14 years ago |

[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed)
[status-firefox8](/buglist.cgi?f1=cf_status_firefox8&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=fixed)

|  | [Jonathan Watt [:jwatt]](/user_profile?user_id=32767)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=669584#a195090_32767)â€¢ 14 years ago |

Status: ASSIGNED â†’ RESOLVEDClosed: 14 years agoResolution: --- â†’ FIXED

|  | [Jonathan Watt [:jwatt]](/user_profile?user_id=32767)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=669584#a195129_32767)â€¢ 14 years ago |

Flags: in-testsuite?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=669584#a5671065_278074)â€¢ 13 years ago |

Blocks: [686044](/show_bug.cgi?id=686044 "VERIFIED FIXED - Crash with after path.pathSegList.appendItem and GC")

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=669584#c9)â€¢ 13 years ago |
|  | |

qa- as no QA fix verification neededWhiteboard: [sg:critical?] â†’ [sg:critical?][qa-]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=669584#a11377521_1689)â€¢ 13 years ago |

Group: core-security

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=669584#a135072096_75935)â€¢ 9 years ago |

Keywords: [testcase-wanted](/buglist.cgi?keywords=testcase-wanted&resolution=---)
You need to [log in](/show_bug.cgi?id=669584&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Jonathan Watt [:jwatt]](/user_profile?user_id=32767)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_e882d901_20250125_224236.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/650273)
* [XML](/show_bug.cgi?ctype=xml&id=650273)

Closed
[Bug 650273](/show_bug.cgi?id=650273)

Opened 14 years ago
Closed 14 years ago

# "Assertion failure: compartment mismatched" with setTimeout

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

"Assertion failure: compartment mismatched" with setTimeout

## Categories

### (Core :: Security, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Security#Security)

Security
â–¾

Core :: Security
For non-crypto security bugs. Or use this general component if you know you have a Browser security bug, but not sure what component to use. Bug will be reviewed for proper component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Security&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Security&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Security)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Windows XP

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla6

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| blocking2.0 | --- | [-](/buglist.cgi?f1=cf_blocking_20&o1=equals&v1=-) |
| status2.0 | --- | [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | - | wontfix |
| firefox6 | + | fixed |
| blocking2.0 |  | - |
| status2.0 |  | wanted |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: moz\_bug\_r\_a4, Assigned: mrbkap)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/89d2149736265010bfe669ce8c3075c0?d=mm&size=40)  [mrbkap](/user_profile?user_id=69426)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/5de37f4deb4e2ac039d463d504c60ba6?d=mm&size=40)  [moz\_bug\_r\_a4](/user_profile?user_id=194398)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=40)  [dveditz](/user_profile?user_id=1689)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[656460](/show_bug.cgi?id=656460 "RESOLVED FIXED - Skip dummy frames for function.caller"), [659207](/show_bug.cgi?id=659207 "RESOLVED FIXED - --enable-shared-js builds are broken"), [693212](/show_bug.cgi?id=693212 "RESOLVED FIXED - Assertion failure: !cx->isExceptionPending(), at js/src/jscntxtinlines.h:299")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[650275](/show_bug.cgi?id=650275 "RESOLVED FIXED - \"ABORT: bad scope for new JSObjects\" with setTimeout")

Dependency [tree](/showdependencytree.cgi?id=650273&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=650273)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: regression, Whiteboard: [sg:nse] fixed-in-tracemonkey [this and 659207 need approval together if at all])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[regression](/buglist.cgi?keywords=regression&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:nse] fixed-in-tracemonkey [this and 659207 need approval together if at all]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files, 2 obsolete files)

| [testcase (crashes Firefox when loaded)](/attachment.cgi?id=526244)  [14 years ago](#c0)  [moz\_bug\_r\_a4](/user_profile?user_id=194398)   545 bytes, text/html |  | [Details](/attachment.cgi?id=526244&action=edit) |
| --- | --- | --- |
| [wip](/attachment.cgi?id=531503)  [14 years ago](#c8)  [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)   5.83 KB, patch |  | [Details](/attachment.cgi?id=531503&action=edit) | [Diff](/attachment.cgi?id=531503&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650273&attachment=531503) |
| [Fix](/attachment.cgi?id=531782)  [14 years ago](#c9)  [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)   5.85 KB, patch |  | [Details](/attachment.cgi?id=531782&action=edit) | [Diff](/attachment.cgi?id=531782&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650273&attachment=531782) |
| [Fix](/attachment.cgi?id=531794)  [14 years ago](#c10)  [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)   5.68 KB, patch | luke : [review+](#c11 "14 years ago") | [Details](/attachment.cgi?id=531794&action=edit) | [Diff](/attachment.cgi?id=531794&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650273&attachment=531794) |

Show Obsolete

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=650273#c0)â€¢ 14 years ago |
|  | |

Attached file
[testcase (crashes Firefox when loaded)](attachment.cgi?id=526244)
â€” [Details](attachment.cgi?id=526244&action=edit)

Assertion failure: compartment mismatched, at js/src/jscntxtinlines.h:542

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a8321_20209)â€¢ 14 years ago |

blocking2.0: --- â†’ ?blocking-fx: --- â†’ ?
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=650273#c1)â€¢ 14 years ago |
|  | |

missed macaw, we'll look at triaging into possible chemspills when we know the cause and fix.blocking2.0: ? â†’ ---blocking-fx: ? â†’ ---

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=650273#c2)â€¢ 14 years ago |
|  | |

What build does this happen in? mozilla-central, Firefox 4? regression between 4 and 4.0.1pre?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a14526_1689)â€¢ 14 years ago |

blocking2.0: --- â†’ ?

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=650273#c3)â€¢ 14 years ago |
|  | |

I can reproduce this in mozilla-central and Firefox 4, and this is not a
regression between 4 and 4.0.1pre.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=650273#c4)â€¢ 14 years ago |
|  | |

mrbkap: is this likely an sg:high same-origin violation, or an sg:critical worm-into-chrome problem? (or neither?)
Minus for mozilla-2.0 for now, but if we have a ff5 fix in hand and do a chemspill we can pick it up then.blocking2.0: ? â†’ -
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- â†’ [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=650273#c5)â€¢ 14 years ago |
|  | |

Blake, can you have a look here?Assignee: nobody â†’ mrbkap
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=650273#c6)â€¢ 14 years ago |
|  | |

Blake says this bug in and of itself is not exploitable, but he's got a fix in the works that will fix this bug and also [bug 650275](/show_bug.cgi?id=650275 "RESOLVED FIXED - \"ABORT: bad scope for new JSObjects\" with setTimeout").Blocks: [650275](/show_bug.cgi?id=650275 "RESOLVED FIXED - \"ABORT: bad scope for new JSObjects\" with setTimeout")Whiteboard: [sg:nse]

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a982408_12352)â€¢ 14 years ago |

No longer blocks: [650275](/show_bug.cgi?id=650275 "RESOLVED FIXED - \"ABORT: bad scope for new JSObjects\" with setTimeout")

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a982449_12352)â€¢ 14 years ago |

Blocks: [650275](/show_bug.cgi?id=650275 "RESOLVED FIXED - \"ABORT: bad scope for new JSObjects\" with setTimeout")

|  | [Marcia Knous [:marcia]](/user_profile?user_id=8519) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=650273#c7)â€¢ 14 years ago |
|  | |

Depends on [Bug 650275](/show_bug.cgi?id=650275 "RESOLVED FIXED - \"ABORT: bad scope for new JSObjects\" with setTimeout") - Sheila commented in that bug asking for status.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a1766007_1689)â€¢ 14 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=650273#c8)â€¢ 14 years ago |
|  | |

Attached patch

[wip](attachment.cgi?id=531503&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=531503&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650273&attachment=531503)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a2274604_69426)â€¢ 14 years ago |

Depends on: [656460](/show_bug.cgi?id=656460 "RESOLVED FIXED - Skip dummy frames for function.caller")

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=650273#c9)â€¢ 14 years ago |
|  | |

Attached patch

[Fix](attachment.cgi?id=531782&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=531782&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650273&attachment=531782)

[Attachment #531503](/attachment.cgi?id=531503&action=edit "wip") -
Attachment is obsolete: true
[Attachment #531782](/attachment.cgi?id=531782&action=edit "Fix") -
Flags: review?(luke)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=650273#c10)â€¢ 14 years ago |
|  | |

Attached patch

[Fix](attachment.cgi?id=531794&action=diff)
â€” [Details](attachment.cgi?id=531794&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650273&attachment=531794)

[Attachment #531782](/attachment.cgi?id=531782&action=edit "Fix") -
Attachment is obsolete: true
[Attachment #531782](/attachment.cgi?id=531782&action=edit "Fix") -
Flags: review?(luke)
[Attachment #531794](/attachment.cgi?id=531794&action=edit "Fix") -
Flags: review?(luke)

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=650273#c11)â€¢ 14 years ago |
|  | |

Comment on [attachment 531794](/attachment.cgi?id=531794 "Fix") [[details]](/attachment.cgi?id=531794&action=edit "Fix") [[diff]](/attachment.cgi?id=531794&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650273&attachment=531794)
Fix
Review of [attachment 531794](/attachment.cgi?id=531794 "Fix") [[details]](/attachment.cgi?id=531794&action=edit "Fix") [[diff]](/attachment.cgi?id=531794&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650273&attachment=531794):
-----------------------------------------------------------------
::: js/src/jswrapper.cpp
@@ +375,5 @@
> + if (!context->stack.pushDummyFrame(context, \*scopeChain, &frame))
> + return false;
> +
> + if (context->isExceptionPending())
> + context->wrapPendingException();
As discussed, I think this can be dropped since the compartment isn't changing.
[Attachment #531794](/attachment.cgi?id=531794&action=edit "Fix") -
Flags: review?(luke) â†’ review+

|  | [Luke Wagner [:luke]](/user_profile?user_id=347312) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=650273#c12)â€¢ 14 years ago |
|  | |

(That is, the wrapPendingException, not the first two lines that splinter included. We need a way to control how much splinter quotes.)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=650273#c13)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/tracemonkey/rev/ab172b4ca00d>Whiteboard: [sg:nse] â†’ [sg:nse] fixed-in-tracemonkey

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=650273#c14)â€¢ 14 years ago |
|  | |

Luke, Blake, what's the risk/reward trade-off here for potentially taking into Firefox 5?

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=650273#c15)â€¢ 14 years ago |
|  | |

Asa, this fixes a few security bugs, and adds belts-and-braces for other security bugs that we fixed in another way. It also maintains some invariants that were otherwise not well maintained in the face of malicious scripts.
On the other hand, this isn't the safest patch, as it does add a couple of new cases that didn't exist before (and required at least one fix, in [bug 656460](/show_bug.cgi?id=656460 "RESOLVED FIXED - Skip dummy frames for function.caller")). I'd say it's worth it, overall.

|  | [Chris Leary [:cdleary] (not checking bugmail)](/user_profile?user_id=374575) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=650273#c16)â€¢ 14 years ago |
|  | |

cdleary-bot mozilla-central merge info:
<http://hg.mozilla.org/mozilla-central/rev/ab172b4ca00d>

|  | [Chris Leary [:cdleary] (not checking bugmail)](/user_profile?user_id=374575) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a3308564_374575)â€¢ 14 years ago |

Status: NEW â†’ RESOLVEDClosed: 14 years agoResolution: --- â†’ FIXED

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a3324752_20209)â€¢ 14 years ago |

Depends on: [659207](/show_bug.cgi?id=659207 "RESOLVED FIXED - --enable-shared-js builds are broken")

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=650273#c17)â€¢ 14 years ago |
|  | |

This caused [bug 659207](/show_bug.cgi?id=659207 "RESOLVED FIXED - --enable-shared-js builds are broken").
I would expect that to have a good chance of causing this to not build if pushed for fx5 as-is.

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=650273#c18)â€¢ 14 years ago |
|  | |

Comment on [attachment 531794](/attachment.cgi?id=531794 "Fix") [[details]](/attachment.cgi?id=531794&action=edit "Fix") [[diff]](/attachment.cgi?id=531794&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650273&attachment=531794)
Fix
I think this should go into Firefox 5. It hasn't had fallout except for [bug 659207](/show_bug.cgi?id=659207 "RESOLVED FIXED - --enable-shared-js builds are broken") and that's a minor change to the patch.
[Attachment #531794](/attachment.cgi?id=531794&action=edit "Fix") -
Flags: approval-mozilla-beta?

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=650273#c19)â€¢ 14 years ago |
|  | |

Blake, is the patch at [bug 650273](/show_bug.cgi?id=650273 "RESOLVED FIXED - \"Assertion failure: compartment mismatched\" with setTimeout") strictly necessary if we agree to take the patch here? Or is that something "only" of concern for our developers?

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=650273#c20)â€¢ 14 years ago |
|  | |

I don't think "'only' of concern for our developers is a valid phrase. If all you care about is cutting down on the number of patches pushed to Aurora, then I'm happy to fold the patches together. I don't want to split hairs over a compile fix with no effect on actual code. There is no advantage to taking this patch without the compile fix in [bug 659207](/show_bug.cgi?id=659207 "RESOLVED FIXED - --enable-shared-js builds are broken").

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a4014209_5003)â€¢ 14 years ago |

Whiteboard: [sg:nse] fixed-in-tracemonkey â†’ [sg:nse] fixed-in-tracemonkey [this and 659207 need approval together if at all]

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=650273#c21)â€¢ 14 years ago |
|  | |

(In reply to [comment #20](/show_bug.cgi?id=650273#c20 "RESOLVED FIXED - \"Assertion failure: compartment mismatched\" with setTimeout"))
> I don't think "'only' of concern for our developers is a valid phrase. If
> all you care about is cutting down on the number of patches pushed to
> Aurora, then I'm happy to fold the patches together. I don't want to split
> hairs over a compile fix with no effect on actual code. There is no
> advantage to taking this patch without the compile fix in [bug 659207](/show_bug.cgi?id=659207 "RESOLVED FIXED - --enable-shared-js builds are broken").
I'm not interested in numbers of patches at all. What I'm trying to figure out here is what part of these three issues, this bug, [bug 650275](/show_bug.cgi?id=650275 "RESOLVED FIXED - \"ABORT: bad scope for new JSObjects\" with setTimeout") and [bug 659207](/show_bug.cgi?id=659207 "RESOLVED FIXED - --enable-shared-js builds are broken") are necessary to solve the security issue that I presumed was a concern for our users. That's why release drivers are tracking these bugs.

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=650273#c22)â€¢ 14 years ago |
|  | |

Well, except that release drivers are pretty explicitly not tracking [bug 659207](/show_bug.cgi?id=659207 "RESOLVED FIXED - --enable-shared-js builds are broken"). For the record:
This bug ([bug 650273](/show_bug.cgi?id=650273 "RESOLVED FIXED - \"Assertion failure: compartment mismatched\" with setTimeout")) requires [bug 650275](/show_bug.cgi?id=650275 "RESOLVED FIXED - \"ABORT: bad scope for new JSObjects\" with setTimeout") (i.e. you can't land this bug without that one). [bug 650275](/show_bug.cgi?id=650275 "RESOLVED FIXED - \"ABORT: bad scope for new JSObjects\" with setTimeout") only has an effect with this bug checked in (the problem that it fixes doesn't exist without the patch in this bug). [bug 659207](/show_bug.cgi?id=659207 "RESOLVED FIXED - --enable-shared-js builds are broken") fixes bz's build bustage as fallout from the patch here.

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a4079581_103593)â€¢ 14 years ago |

[Attachment #531794](/attachment.cgi?id=531794&action=edit "Fix") -
Flags: approval-mozilla-beta? â†’ approval-mozilla-beta+

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=650273#c23)â€¢ 14 years ago |
|  | |

Per further discussion with mrbkap etc we've decided that it's too late to take this for 5, but this landed in time for 6 already, so it'll be fixed there.
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B) â†’ [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=650273#c24)â€¢ 14 years ago |
|  | |

Comment on [attachment 531794](/attachment.cgi?id=531794 "Fix") [[details]](/attachment.cgi?id=531794&action=edit "Fix") [[diff]](/attachment.cgi?id=531794&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650273&attachment=531794)
Fix
removing approval since this is no longer intended for beta for 5.
[Attachment #531794](/attachment.cgi?id=531794&action=edit "Fix") -
Flags: approval-mozilla-beta+

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a6175562_103593)â€¢ 14 years ago |

Target Milestone: --- â†’ mozilla6

|  | [Jesse Ruderman](/user_profile?user_id=11608) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=650273#c25)â€¢ 14 years ago |
|  | |

I took some ideas from the testcase and added them to my DOM fuzzer. Thanks moz\_bug\_r\_a4 and mrbkap. (7ea4f291dde2, 68b6a7a21708, 8958f6b556c7, 10570e474f13)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a15342397_20209)â€¢ 13 years ago |

Depends on: [693212](/show_bug.cgi?id=693212 "RESOLVED FIXED - Assertion failure: !cx->isExceptionPending(), at js/src/jscntxtinlines.h:299")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650273#a18448877_1689)â€¢ 13 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=650273&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [moz\_bug\_r\_a4](/user_profile?user_id=194398)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_74c28f3c_20250125_224242.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/660517)
* [XML](/show_bug.cgi?ctype=xml&id=660517)

Closed
[Bug 660517](/show_bug.cgi?id=660517)

Opened 14 years ago
Closed 14 years ago

# "ASSERTION: unable to transplant wrappers, probably OOM"

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

"ASSERTION: unable to transplant wrappers, probably OOM"

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
â–¾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla6

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| firefox7 | [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed) |
| firefox8 | [+](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=fixed) |
| blocking2.0 | --- | [-](/buglist.cgi?f1=cf_blocking_20&o1=equals&v1=-) |
| status2.0 | --- | [wontfix](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wontfix) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | - | wontfix |
| firefox6 | + | fixed |
| firefox7 | + | fixed |
| firefox8 | + | fixed |
| blocking2.0 |  | - |
| status2.0 |  | wontfix |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: Waldo)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/d26a0ca7ae1134e0e1dbdddf82e28929?d=mm&size=40)  [Waldo](/user_profile?user_id=83595)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

5 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[664957](/show_bug.cgi?id=664957 "RESOLVED DUPLICATE - Crash [@ JSObject::isWrapper] with InstallTrigger, Iterator, E4X")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, regression, testcase, Whiteboard: [sg:critical?] [landed m-c 6/27] [JST likes] fixed-in-tracemonkey [qa-])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?] [landed m-c 6/27] [JST likes] fixed-in-tracemonkey [qa-]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files)

| [testcase](/attachment.cgi?id=535905)  [14 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   461 bytes, text/html |  | [Details](/attachment.cgi?id=535905&action=edit) |
| --- | --- | --- |
| [stack trace for the assertion](/attachment.cgi?id=535906)  [14 years ago](#c1)  [Jesse Ruderman](/user_profile?user_id=11608)   1.11 KB, text/plain |  | [Details](/attachment.cgi?id=535906&action=edit) |
| [Does what it says on the box, haven't tested original yet but expect goodness](/attachment.cgi?id=539915)  [14 years ago](#c6)  [Jeff Walden [:Waldo]](/user_profile?user_id=83595)   3.82 KB, patch | mrbkap : [review+](#a2137764_69426 "14 years ago")  asa : [approval-mozilla-aurora+](#a4373635_5003 "14 years ago")  asa : [approval-mozilla-beta+](#a4373635_5003 "14 years ago") | [Details](/attachment.cgi?id=539915&action=edit) | [Diff](/attachment.cgi?id=539915&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=660517&attachment=539915) |

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=660517#c0)â€¢ 14 years ago |
|  | |

Attached file
[testcase](attachment.cgi?id=535905)
â€” [Details](attachment.cgi?id=535905&action=edit)

###!!! ASSERTION: unable to transplant wrappers, probably OOM: 'Error', file dom/base/nsGlobalWindow.cpp, line 2096
(It's not OOM.)
And there are also several errors from chrome code in tabbrowser.xml and nsLoginManager.js, which is worrisome:
JavaScript error: , line 0: uncaught exception: [Exception... "Could not convert Native argument arg 0 [nsIWebProgress.DOMWindow]" nsresult: "0x8057000a (NS\_ERROR\_XPC\_BAD\_CONVERT\_NATIVE)" location: "JS frame :: chrome://browser/content/tabbrowser.xml :: <TOP\_LEVEL> :: line 605" data: no]
[Exception... "Could not convert Native argument arg 0 [nsIWebProgress.DOMWindow]" nsresult: "0x8057000a (NS\_ERROR\_XPC\_BAD\_CONVERT\_NATIVE)" location: "JS frame :: resource:///components/nsLoginManager.js :: <TOP\_LEVEL> :: line 285" data: no]
JavaScript error: , line 0: uncaught exception: [Exception... "Could not convert Native argument arg 0 [nsIWebProgress.DOMWindow]" nsresult: "0x8057000a (NS\_ERROR\_XPC\_BAD\_CONVERT\_NATIVE)" location: "JS frame :: chrome://browser/content/tabbrowser.xml :: <TOP\_LEVEL> :: line 547" data: no]

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=660517#c1)â€¢ 14 years ago |
|  | |

Attached file
[stack trace for the assertion](attachment.cgi?id=535906)
â€” [Details](attachment.cgi?id=535906&action=edit)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=660517#c2)â€¢ 14 years ago |
|  | |

(In reply to [comment #0](/show_bug.cgi?id=660517#c0 "RESOLVED FIXED - \"ASSERTION: unable to transplant wrappers, probably OOM\""))
> (It's not OOM.)
No, it's the next best thing: E4X!
The exception and assertion stem from the fact that we refuse to wrap E4X objects in proxies. When we navigate back, we need to transplant the old outer window into a proxy, including its prototype. But that fails in this case.
Is there any way that we can detect someone setting a wrapped native's prototype to an E4X object and throw then?
Leaving this as security sensitive, though I'm not sure exactly what the consequences of a brain transplant failing are. My not-so-extensive experience says "zombies".

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=660517#c3)â€¢ 14 years ago |
|  | |

If we've got the wrong brain there's no telling what we could do, sg:high cross-origin stuff or maybe even sg:critical if there's chrome cross-compartment leakage.Whiteboard: [sg:critical?]

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=660517#c4)â€¢ 14 years ago |
|  | |

Is there ever a reason to have an E4X object on a prototype chain?

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=660517#a1001615_12352)â€¢ 14 years ago |

[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- â†’ [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=660517#c5)â€¢ 14 years ago |
|  | |

No.

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=660517#c6)â€¢ 14 years ago |
|  | |

Attached patch

[Does what it says on the box, haven't tested original yet but expect goodness](attachment.cgi?id=539915&action=diff)
â€” [Details](attachment.cgi?id=539915&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=660517&attachment=539915)

Assignee: nobody â†’ jwalden+bmoStatus: NEW â†’ ASSIGNED
[Attachment #539915](/attachment.cgi?id=539915&action=edit "Does what it says on the box, haven't tested original yet but expect goodness") -
Flags: review?(mrbkap)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=660517#a2137764_69426)â€¢ 14 years ago |

[Attachment #539915](/attachment.cgi?id=539915&action=edit "Does what it says on the box, haven't tested original yet but expect goodness") -
Flags: review?(mrbkap) â†’ review+

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=660517#c8)â€¢ 14 years ago |
|  | |

Can we get this landed?

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=660517#c9)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/tracemonkey/rev/a4d39f157859>
Landed in TM 3.5h before [comment 8](/show_bug.cgi?id=660517#c8 "RESOLVED FIXED - \"ASSERTION: unable to transplant wrappers, probably OOM\""). :-)Component: XPConnect â†’ JavaScript EngineOS: Mac OS X â†’ AllQA Contact: xpconnect â†’ generalHardware: x86\_64 â†’ AllWhiteboard: [sg:critical?] â†’ [sg:critical?] fixed-in-tracemonkeyTarget Milestone: --- â†’ mozilla7

|  | [Chris Leary [:cdleary] (not checking bugmail)](/user_profile?user_id=374575) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=660517#c10)â€¢ 14 years ago |
|  | |

cdleary-bot mozilla-central merge info:
<http://hg.mozilla.org/mozilla-central/rev/a4d39f157859>

|  | [Chris Leary [:cdleary] (not checking bugmail)](/user_profile?user_id=374575) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=660517#a2548553_374575)â€¢ 14 years ago |

Status: ASSIGNED â†’ RESOLVEDClosed: 14 years agoResolution: --- â†’ FIXED

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=660517#c11)â€¢ 14 years ago |
|  | |

This patch is good for 6, right? If so, please request beta approval for the patch!blocking2.0: --- â†’ -
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- â†’ [wontfix](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wontfix)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed)
[status-firefox8](/buglist.cgi?f1=cf_status_firefox8&o1=isnotempty):
--- â†’ [fixed](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=fixed)
[tracking-firefox8](/buglist.cgi?f1=cf_tracking_firefox8&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=660517#a4024776_1689)â€¢ 14 years ago |

Whiteboard: [sg:critical?] fixed-in-tracemonkey â†’ [sg:critical?][needs Firefox6 approval request/landing] fixed-in-tracemonkey

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=660517#c12)â€¢ 14 years ago |
|  | |

Comment on [attachment 539915](/attachment.cgi?id=539915 "Does what it says on the box, haven't tested original yet but expect goodness") [[details]](/attachment.cgi?id=539915&action=edit "Does what it says on the box, haven't tested original yet but expect goodness") [[diff]](/attachment.cgi?id=539915&action=diff "Does what it says on the box, haven't tested original yet but expect goodness") [[review]](/page.cgi?id=splinter.html&ignore=&bug=660517&attachment=539915)
Does what it says on the box, haven't tested original yet but expect goodness
Yeah, this should be good for aurora/beta/&c.
[Attachment #539915](/attachment.cgi?id=539915&action=edit "Does what it says on the box, haven't tested original yet but expect goodness") -
Flags: approval-mozilla-beta?
[Attachment #539915](/attachment.cgi?id=539915&action=edit "Does what it says on the box, haven't tested original yet but expect goodness") -
Flags: approval-mozilla-aurora?

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=660517#c13)â€¢ 14 years ago |
|  | |

We'll get to this approval requests on Monday's 2pm PT triage.Whiteboard: [sg:critical?][needs Firefox6 approval request/landing] fixed-in-tracemonkey â†’ [sg:critical?] [landed m-c 6/27] [JST likes] fixed-in-tracemonkey

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=660517#a4373635_5003)â€¢ 14 years ago |

[Attachment #539915](/attachment.cgi?id=539915&action=edit "Does what it says on the box, haven't tested original yet but expect goodness") -
Flags: approval-mozilla-beta?
[Attachment #539915](/attachment.cgi?id=539915&action=edit "Does what it says on the box, haven't tested original yet but expect goodness") -
Flags: approval-mozilla-beta+
[Attachment #539915](/attachment.cgi?id=539915&action=edit "Does what it says on the box, haven't tested original yet but expect goodness") -
Flags: approval-mozilla-aurora?
[Attachment #539915](/attachment.cgi?id=539915&action=edit "Does what it says on the box, haven't tested original yet but expect goodness") -
Flags: approval-mozilla-aurora+

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=660517#c14)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-beta/rev/fda101def1ec>
I guess the m-a a? wasn't necessary, because this landed before the last train departure, so it was already in mozilla-aurora and only had to land in mozilla-beta. No biggie, I guess. :-)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)Target Milestone: mozilla7 â†’ mozilla6

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=660517#c15)â€¢ 13 years ago |
|  | |

Appears to be a regression, does not happen on the 1.9.2 branch (worst case: the assertion doesn't exist but the problem does).
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=660517#c16)â€¢ 13 years ago |
|  | |

qa+ for verification in Firefox 7 using the attached testcaseWhiteboard: [sg:critical?] [landed m-c 6/27] [JST likes] fixed-in-tracemonkey â†’ [sg:critical?] [landed m-c 6/27] [JST likes] fixed-in-tracemonkey [qa+]

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=660517#c17)â€¢ 13 years ago |
|  | |

Changing to qa- as this is an assertion.Whiteboard: [sg:critical?] [landed m-c 6/27] [JST likes] fixed-in-tracemonkey [qa+] â†’ [sg:critical?] [landed m-c 6/27] [JST likes] fixed-in-tracemonkey [qa-]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=660517#a14674348_1689)â€¢ 13 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=660517&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_af233a8b_20250125_224240.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/650732)
* [XML](/show_bug.cgi?ctype=xml&id=650732)

Closed
[Bug 650732](/show_bug.cgi?id=650732)

Opened 14 years ago
Closed 14 years ago

# Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const\*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const\*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]

## Categories

### (Core :: SVG, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=SVG#SVG)

SVG
â–¾

Core :: SVG

Issues with the layout or rendering of SVG content and interacting with the SVG DOM.

Example bugs:

* SVG marker can not be clipped with clip-path
* x position adjustments of SVG vertical text on a path moves in the wrong direction

Specifications covered:

* SVG

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=SVG&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=SVG&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=SVG)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla7

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| firefox7 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed) |
| status2.0 | --- | [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | - | wontfix |
| firefox6 | + | fixed |
| firefox7 |  | fixed |
| status2.0 |  | wanted |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: dholbert, Assigned: birtles)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/b21107bc66be7d2aefff1fb59d5d8bae?d=mm&size=40)  [birtles](/user_profile?user_id=165012)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/cd9b85b2e112bd7941b21ad03f42604e?d=mm&size=40)  [dholbert](/user_profile?user_id=278074)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jwatt](/user_profile?user_id=32767)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

6 people

## References

### ( [URL](http://imgh.us/1400.svgz "http://imgh.us/1400.svgz") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[imgh.us/1400.svgz](http://imgh.us/1400.svgz "http://imgh.us/1400.svgz")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: crash, crashreportid, testcase, Whiteboard: [sg:critical?])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[crashreportid](/buglist.cgi?keywords=crashreportid&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [birtles](/user_profile?user_id=165012) | [in-testsuite](#a11079042_165012 "14 years ago") | + |
| --- | --- | --- |
| [birtles](/user_profile?user_id=165012) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const\*, int, int) ]](https://crash-stats.mozilla.org/signature/?signature=nsSMILInstanceTime%3A%3AHandleChangedInterval%28nsSMILTimeContainer%20const%2A%2C%20int%2C%20int%29)

[[@ nsSMILInstanceTime::HandleChangedInterval ]](https://crash-stats.mozilla.org/signature/?signature=nsSMILInstanceTime%3A%3AHandleChangedInterval)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files, 7 obsolete files)

| [Reduced test case -- will probably cause a crash on unload](/attachment.cgi?id=536209)  [14 years ago](#c9)  [Brian Birtles (:birtles)](/user_profile?user_id=165012)   386 bytes, image/svg+xml |  | [Details](/attachment.cgi?id=536209&action=edit) |
| --- | --- | --- |
| [Crashtest -- will almost definitely cause a crash!](/attachment.cgi?id=536210)  [14 years ago](#c10)  [Brian Birtles (:birtles)](/user_profile?user_id=165012)   1.42 KB, image/svg+xml |  | [Details](/attachment.cgi?id=536210&action=edit) |
| [Part 1 - Copy list of times so interval can be safely deleted v1a](/attachment.cgi?id=537065)  [14 years ago](#c14)  [Brian Birtles (:birtles)](/user_profile?user_id=165012)   17.37 KB, patch |  | [Details](/attachment.cgi?id=537065&action=edit) | [Diff](/attachment.cgi?id=537065&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537065) |
| [Part 2 - Don't allow instance times that are dependent on themselves v1a](/attachment.cgi?id=537066)  [14 years ago](#c15)  [Brian Birtles (:birtles)](/user_profile?user_id=165012)   16.23 KB, patch |  | [Details](/attachment.cgi?id=537066&action=edit) | [Diff](/attachment.cgi?id=537066&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537066) |
| [Part 1 - Copy list of times so interval can be safely deleted v1b](/attachment.cgi?id=537921)  [14 years ago](#c16)  [Brian Birtles (:birtles)](/user_profile?user_id=165012)   17.49 KB, patch | dholbert : [review+](#c21 "14 years ago") | [Details](/attachment.cgi?id=537921&action=edit) | [Diff](/attachment.cgi?id=537921&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537921) |
| [Part 2 - Don't allow instance times that are dependent on themselves v1b](/attachment.cgi?id=537922)  [14 years ago](#c17)  [Brian Birtles (:birtles)](/user_profile?user_id=165012)   16.34 KB, patch |  | [Details](/attachment.cgi?id=537922&action=edit) | [Diff](/attachment.cgi?id=537922&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537922) |
| [Part 3 - Remove all dependent times in one hit v1a](/attachment.cgi?id=537924)  [14 years ago](#c18)  [Brian Birtles (:birtles)](/user_profile?user_id=165012)   3.09 KB, patch | dholbert : [review+](#c25 "14 years ago") | [Details](/attachment.cgi?id=537924&action=edit) | [Diff](/attachment.cgi?id=537924&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537924) |
| [Crash test - to be checked in later](/attachment.cgi?id=537925)  [14 years ago](#c19)  [Brian Birtles (:birtles)](/user_profile?user_id=165012)   2.15 KB, patch | dholbert : [review+](#c23 "14 years ago") | [Details](/attachment.cgi?id=537925&action=edit) | [Diff](/attachment.cgi?id=537925&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537925) |
| [Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert](/attachment.cgi?id=538394)  [14 years ago](#c27)  [Brian Birtles (:birtles)](/user_profile?user_id=165012)   18.01 KB, patch | christian : [approval-mozilla-aurora+](#c45 "14 years ago")  birtles : [checkin+](#a4992685_165012 "14 years ago") | [Details](/attachment.cgi?id=538394&action=edit) | [Diff](/attachment.cgi?id=538394&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=538394) |
| [Crash test - to be checked in later, v1b, r=dholbert](/attachment.cgi?id=538396)  [14 years ago](#c28)  [Brian Birtles (:birtles)](/user_profile?user_id=165012)   2.06 KB, patch |  | [Details](/attachment.cgi?id=538396&action=edit) | [Diff](/attachment.cgi?id=538396&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=538396) |
| [Part 3 - Remove all dependent times in one hit v1b, r=dholbert](/attachment.cgi?id=538397)  [14 years ago](#c29)  [Brian Birtles (:birtles)](/user_profile?user_id=165012)   3.10 KB, patch |  | [Details](/attachment.cgi?id=538397&action=edit) | [Diff](/attachment.cgi?id=538397&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=538397) |

Show Obsolete

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=650732#c0)â€¢ 14 years ago |
|  | |

Mardeg reported this crash in IRC: [bp-78a2bf1e-bcc7-4b02-a751-555a32110417](https://crash-stats.mozilla.org/report/index/78a2bf1e-bcc7-4b02-a751-555a32110417)
He doesn't have STR, but he says he'd just closed a tab with animated SVG before crashing.
Looking at the stack trace, it's cycle-collection triggering nsSMILTimedElement::Unlink, which eventually triggers nsSMILInstanceTime::HandleChangedInterval, which hits this line:
>141 PRBool objectChanged = mCreator->DependsOnBegin() ? aBeginObjectChanged :
>142 aEndObjectChanged;
...and crashes on a null-deref, since mCreator is apparently null.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a18_278074)â€¢ 14 years ago |

Keywords: [crashreportid](/buglist.cgi?keywords=crashreportid&resolution=---)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=650732#c1)â€¢ 14 years ago |
|  | |

Mardeg says <http://imgh.us/1400.svgz> is the testcase, and it crashes on closing tab some fraction of the time.URL: [https://crash-stats.mozilla.com/repor...](https://crash-stats.mozilla.com/report/index/bp-78a2bf1e-bcc7-4b02-a751-555a32110417) â†’ <http://imgh.us/1400.svgz>

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=650732#c2)â€¢ 14 years ago |
|  | |

So presumably, in the crash conditions, we're calling one of the following three methods before HandleChangedInterval -- these three methods all set mCreator to nsnull, thereby setting us up to crash in HandleChangedInterval on that "mCreator->DependsOnBegin()" call:
nsSMILInstanceTime::Unlink()
nsSMILInstanceTime::HandleDeletedInterval()
nsSMILInstanceTime::HandleFilteredInterval()

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a619_278074)â€¢ 14 years ago |

Summary: Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const\*, int, int) ] â†’ Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const\*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=650732#c3)â€¢ 14 years ago |
|  | |

I just reproduced the crash on Linux at the URL in [comment 1](/show_bug.cgi?id=650732#c1 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]") after a few tries (started up firefox, with the URL loaded from sessionstore, and then quit, and it crashed)
[bp-2125cabd-29b2-42c2-8050-716d92110417](https://crash-stats.mozilla.org/report/index/2125cabd-29b2-42c2-8050-716d92110417)
Mozilla/5.0 (X11; Linux i686; rv:6.0a1) Gecko/20110417 Firefox/6.0a1

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=650732#c4)â€¢ 14 years ago |
|  | |

I can reproduce this pretty reliably (3 out of 4 tries just now) with these STR:
1. Open 2 tabs: <http://imgh.us/1400.svgz> and <http://www.google.com/>
2. Focusing the first tab, hit "Ctrl+W" followed by "Ctrl+Shift+T" (close tab, bring it back)
3. Perform previous step a total of ~4 times. (quickly is fine - no need to wait between closing & reopening & closing etc)
4. Wait a few seconds.
---> CRASH
[bp-4de87ba2-4512-4d4d-ab8e-069cf2110417](https://crash-stats.mozilla.org/report/index/4de87ba2-4512-4d4d-ab8e-069cf2110417)
[bp-abe4f27d-695c-42ee-b3b0-0df022110417](https://crash-stats.mozilla.org/report/index/abe4f27d-695c-42ee-b3b0-0df022110417)
[bp-5bb0573e-dc1a-4f36-80dc-45d122110417](https://crash-stats.mozilla.org/report/index/5bb0573e-dc1a-4f36-80dc-45d122110417)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=650732#c5)â€¢ 14 years ago |
|  | |

From playing around with this in a debug build, I just got this crash stack:
#0 0xb53a0e1e in nsTArray\_base<nsTArrayDefaultAllocator>::Length (this=0x9ed93b18) at ../../../dist/include/nsTArray.h:139
#1 0xb61f9f61 in nsTArray<nsRefPtr<nsSMILInstanceTime>, nsTArrayDefaultAllocator>::ElementAt (this=0x9ed93b18, i=0) at ../../dist/include/nsTArray.h:455
#2 0xb61f9e32 in nsTArray<nsRefPtr<nsSMILInstanceTime>, nsTArrayDefaultAllocator>::operator[] (this=0x9ed93b18, i=0) at ../../dist/include/nsTArray.h:488
#3 0xb61f95e7 in nsSMILInterval::NotifyChanged (this=0x9ed93b10, aContainer=0x0) at ../../../mozilla/content/smil/nsSMILInterval.cpp:83
#4 0xb620488d in nsSMILTimedElement::NotifyChangedInterval (this=0xaaf23bf0) at ../../../mozilla/content/smil/nsSMILTimedElement.cpp:2037
#5 0xb6203f2a in nsSMILTimedElement::UpdateCurrentInterval (this=0xaaf23bf0, aForceChangeNotice=0) at ../../../mozilla/content/smil/nsSMILTimedElement.cpp:1833
#6 0xb62002d7 in nsSMILTimedElement::RemoveInstanceTimesForCreator (this=0xaaf23bf0, aCreator=0x9ee0c100, aIsBegin=1) at ../../../mozilla/content/smil/nsSMILTimedElement.cpp:405
#7 0xb6207710 in nsSMILTimeValueSpec::UnregisterFromReferencedElement (this=0x9ee0c100, aElement=0x9ef9c5c0) at ../../../mozilla/content/smil/nsSMILTimeValueSpec.cpp:305
#8 0xb6207615 in nsSMILTimeValueSpec::Unlink (this=0x9ee0c100) at ../../../mozilla/content/smil/nsSMILTimeValueSpec.cpp:256
#9 0xb6201f59 in nsSMILTimedElement::Unlink (this=0xaaf23bf0) at ../../../mozilla/content/smil/nsSMILTimedElement.cpp:1145
#10 0xb61ddff9 in nsSMILTimedElement::DissolveReferences (this=0xaaf23bf0) at ../../../../../mozilla/content/svg/content/src/../../../smil/nsSMILTimedElement.h:343
#11 0xb61dd8b2 in nsSVGAnimationElement::UnbindFromTree (this=0xaaf23b80, aDeep=1, aNullParent=0) at ../../../../../mozilla/content/svg/content/src/nsSVGAnimationElement.cpp:321
#12 0xb59da960 in nsGenericElement::UnbindFromTree (this=0xa8161ca0, aDeep=1, aNullParent=1) at ../../../../mozilla/content/base/src/nsGenericElement.cpp:3073
#13 0xb5a1d7f0 in nsStyledElementNotElementCSSInlineStyle::UnbindFromTree (this=0xa8161ca0, aDeep=1, aNullParent=1) at ../../../../mozilla/content/base/src/nsStyledElement.cpp:251
#14 0xb59de268 in nsGenericElement::cycleCollection::Unlink (this=0xb77803c0, p=0x9ed8e120) at ../../../../mozilla/content/base/src/nsGenericElement.cpp:4299
When we crash, the nsSMILInterval at stacklevel 3 has all of its member data pointers set to 0x5a5a5a5a. (including its nsTArray mDependentTimes's mHdr pointer -- which is why we crash.)

|  | [(mostly gone) XtC4UaLL [:xtc4uall]](/user_profile?user_id=104905) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a38319_104905)â€¢ 14 years ago |

Severity: normal â†’ critical

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=650732#c6)â€¢ 14 years ago |
|  | |

This still reproduces in latest nightly, btw.
[bp-ff40b963-8670-45b0-840f-5e4ae2110524](https://crash-stats.mozilla.org/report/index/ff40b963-8670-45b0-840f-5e4ae2110524)
Mozilla/5.0 (X11; Linux i686; rv:6.0a1) Gecko/20110524 Firefox/6.0a1

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=650732#c7)â€¢ 14 years ago |
|  | |

flagging as security-sensitive per [comment 5](/show_bug.cgi?id=650732#c5 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"). (and un-hiding [comment 5](/show_bug.cgi?id=650732#c5 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"))Group: core-security
[Comment 5](#c5) is private:
false

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a3185740_278074)â€¢ 14 years ago |

Whiteboard: [sg:critical?]

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a3185906_278074)â€¢ 14 years ago |

Keywords: [testcase](/buglist.cgi?keywords=testcase&resolution=---)

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=650732#c8)â€¢ 14 years ago |
|  | |

I will look into this in a couple of days' time (27th). If anyone wants to look into it before then feel free to take it from me.Assignee: nobody â†’ birtlesStatus: NEW â†’ ASSIGNED

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=650732#c9)â€¢ 14 years ago |
|  | |

Attached image
[Reduced test case -- will probably cause a crash on unload](attachment.cgi?id=536209)
â€” [Details](attachment.cgi?id=536209&action=edit)

Reduced test case. Will probably cause a crash!

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=650732#c10)â€¢ 14 years ago |
|  | |

Attached image
[Crashtest -- will almost definitely cause a crash!](attachment.cgi?id=536210)
â€” [Details](attachment.cgi?id=536210&action=edit)

Similar to the reduced test case, this simply adds and removes one of the animations over and over hopefully triggering a crash. (Crashes 100% of the time for me.)

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a3700095_165012)â€¢ 14 years ago |

[Attachment #536209](/attachment.cgi?id=536209&action=edit "Reduced test case -- will probably cause a crash on unload") -
Attachment description: Reduced test case â†’ Reduced test case -- will probably cause a crash on unload

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=650732#c11)â€¢ 14 years ago |
|  | |

After some analysis I've arrived at the following minimal test case:
<set id="a" attributeName="fill" to="blue"
begin="6s" end="986s"/>
<set id="b" attributeName="fill" to="orange"
begin="a.begin+69.3s;b.begin+700s" dur="700s" end="a.end"/>
<set id="c" attributeName="fill" to="yellow"
begin="0s;b.begin+700s"/>
In the above arrangement, removing element "b" before the others will trigger a crash about 50% of the time.
The reasoning is as follows:
1. In unlinking "b" we will dissolve the syncbase time references "a.begin+69.3s" and "b.begin+700s".
2. When we drop "a.begin+69.3s" we update the current interval (now from b.begin+700s to 986s).
3. After updating the interval we inform those times that are dependent on b's interval of which there are two. One belonging to "b" and one belonging to "c".
4. If we notify the time belonging to "b" first it will be updated again to b.begin+700s+700s which puts it beyond it's only end time ("a.end" = 986s) which by SMIL's rules means there is no valid interval.
5. Since "b" is still in the waiting state the interval will be deleted.
6. When we go back to the interval to finish notifying the other dependent times (c's dependent time in this case), the interval has already been deleted.
Note:
- If we make the times in the test case shorter it is harder to reproduce since "b" may no longer be in the "waiting" state and the interval can't be deleted.
- If we remove "c" we will fail to notice that the interval has been deleted when we return to it since we'll just return from the NotifyChange method without doing much more.
- I think the test crashes about 50% of the time because it depends what order we update the interval's two dependent times in. I think so anyway but haven't confirmed this yet.
Possible steps for fixing:
1. We shouldn't be deleting an interval that is in the call stack. One approach is to make intervals ref-counted and add a kungFuDeathGrip to it before calling. An alternative approach which I might try is checking that nsSMILTimedElement::UpdateCurrentInterval isn't called recursively on the same nsSMILTimedElement. If we detect such a case, set a flag, and re-run the method again after it completes the first time. Or something of that nature anyway.
2. This test produces a bizarre situation where an instance time is directly dependent on itself. I don't think that makes sense and we should probably detect it and break the cycle. It's fine for self-referential timing (as in <animate id="a" begin="a.begin+2s" .../>), but an actual instance time being dependent on itself doesn't seem useful.
3. As an optimisation, when we unlink an element we might be able to do a reset step first that just clears out all instance times with a creator set before we clear the time value spec objects. That would hopefully save a lot of unnecessary interval updating.

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=650732#c12)â€¢ 14 years ago |
|  | |

Brian, am I correct in assuming that this is happening on trunk, and not some older branch(es)?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=650732#c13)â€¢ 14 years ago |
|  | |

This affects Firefox 4 and newer (including trunk).

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=650732#c14)â€¢ 14 years ago |
|  | |

Attached patch

[Part 1 - Copy list of times so interval can be safely deleted v1a](attachment.cgi?id=537065&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=537065&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537065)

Part 1, implements step 1 from [comment 11](/show_bug.cgi?id=650732#c11 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"). The array of instance times is now copied so that even if the interval gets deleted whilst we're iterating over the times we'll be safe.
I've also taken it a little bit further and identified some other situations where we're not in an entirely safe state for doing notifications and fixed them too.
I'll run this (and the next patch) through Try before putting up for review.

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=650732#c15)â€¢ 14 years ago |
|  | |

Attached patch

[Part 2 - Don't allow instance times that are dependent on themselves v1a](attachment.cgi?id=537066&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=537066&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537066)

Implements step 2 from [comment 11](/show_bug.cgi?id=650732#c11 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]").
Detects when we're about to use an instance time as the same endpoint of an interval that it's already dependent on and avoids using such an instance time. This sort of detail simply isn't covered by SMIL/SVG (which basically ignore dynamic document changes altogether) but I've produced a couple of test cases which I think demonstrate why this new behaviour is correct.
This patch alone also fixes the crash (as does part 1 alone).

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=650732#c16)â€¢ 14 years ago |
|  | |

Attached patch

[Part 1 - Copy list of times so interval can be safely deleted v1b](attachment.cgi?id=537921&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=537921&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537921)

Just updating header information so this can be checked in.
[Attachment #537065](/attachment.cgi?id=537065&action=edit "Part 1 - Copy list of times so interval can be safely deleted v1a") -
Attachment is obsolete: true
[Attachment #537921](/attachment.cgi?id=537921&action=edit "Part 1 - Copy list of times so interval can be safely deleted v1b") -
Flags: review?(dholbert)

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=650732#c17)â€¢ 14 years ago |
|  | |

Attached patch

[Part 2 - Don't allow instance times that are dependent on themselves v1b](attachment.cgi?id=537922&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=537922&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537922)

Just updating header information
[Attachment #537066](/attachment.cgi?id=537066&action=edit "Part 2 - Don't allow instance times that are dependent on themselves v1a") -
Attachment is obsolete: true
[Attachment #537922](/attachment.cgi?id=537922&action=edit "Part 2 - Don't allow instance times that are dependent on themselves v1b") -
Flags: review?(dholbert)

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=650732#c18)â€¢ 14 years ago |
|  | |

Attached patch

[Part 3 - Remove all dependent times in one hit v1a](attachment.cgi?id=537924&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=537924&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537924)

This is really an optimisation and probably deserves a separate bug. Let me know what you think.
[Attachment #537924](/attachment.cgi?id=537924&action=edit "Part 3 - Remove all dependent times in one hit v1a") -
Flags: review?(dholbert)

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=650732#c19)â€¢ 14 years ago |
|  | |

Attached patch

[Crash test - to be checked in later](attachment.cgi?id=537925&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=537925&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537925)

Crash test. To be checked in later.
[Attachment #537925](/attachment.cgi?id=537925&action=edit "Crash test - to be checked in later") -
Flags: review?(dholbert)

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=650732#c20)â€¢ 14 years ago |
|  | |

I've put up a series of patches for review.
The three different patches all fix the crash if applied in isolation. That is, it is fixed three different ways. However, part 1 really addresses the root problem. I can file parts 2 and 3 as separate bugs. Part 3 is really just an optimisation with the side-effect of fixing this bug.
Parts 1 & 2 (applied together) have passed through Try server without issue.

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a4545263_12352)â€¢ 14 years ago |

[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [wontfix](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=wontfix)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- â†’ [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a4545309_1689)â€¢ 14 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- â†’ [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=650732#c21)â€¢ 14 years ago |
|  | |

Comment on [attachment 537921](/attachment.cgi?id=537921 "Part 1 - Copy list of times so interval can be safely deleted v1b") [[details]](/attachment.cgi?id=537921&action=edit "Part 1 - Copy list of times so interval can be safely deleted v1b") [[diff]](/attachment.cgi?id=537921&action=diff "Part 1 - Copy list of times so interval can be safely deleted v1b") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537921)
Part 1 - Copy list of times so interval can be safely deleted v1b
>diff --git a/content/smil/nsSMILInterval.h b/content/smil/nsSMILInterval.h
>+ void GetDependentTimes(nsTArray<nsRefPtr<nsSMILInstanceTime> >& aTimes);
[...]
>+nsSMILInterval::GetDependentTimes(InstanceTimeList& aTimes)
For consistency / cleanliness, can we use "InstanceTimeList" in the declaration of GetDependentTimes, too? (making the typedef public instead of private, if that's necessary)
>@@ -546,41 +546,51 @@ nsSMILTimedElement::DoSampleAt(nsSMILTi
>+ PRBool earlyEnd = ApplyEarlyEnd(sampleTime);
[...]
> nsSMILTimedElement::ApplyEarlyEnd(const nsSMILTimeValue& aSampleTime)
[...]
> nsSMILInstanceTime\* earlyEnd = CheckForEarlyEnd(aSampleTime);
nit: so in ApplyEarlyEnd(), |earlyEnd| is the name of an instance time (makes sense), whereas in DoSampleAt(), |earlyEnd| is the name of a PRBool.
Perhaps name the PRBool "didApplyEarlyEnd" or something else boolean-sounding, for clarity?
>+nsSMILTimedElement::NotifyChangedInterval(nsSMILInterval\* aInterval,
>+ for (PRUint32 i=0; i < times.Length(); ++i)
>+ {
Nit: bump the "{" up to the previous line, & add spaces around '=' in "i=0".
>diff --git a/content/smil/nsSMILTimedElement.h b/content/smil/nsSMILTimedElement.h
>+ void GetDependentTimes(nsTArray<nsRefPtr<nsSMILInstanceTime> >& aTimes);
>+ // Notification methods. Note that dispatching these notifications can trigger
>+ // a chain reaction that results in this object being called again.
"this object being called again" doesn't make sense to me -- do you mean "recursive calls to these same functions on this same object"?
>+ // [Therefore] they should not be called until this object is in a consistent state to
>+ // receive callbacks.
So, to be sure I understand -- we \*only\* get problematic recursiveness if we call this when the object is in an inconsistent state? If that's right, it might be good to state that a little more explicitly, either by clarifying the first sentence, or by adding a sentence at the end ("this will prevent the problematic chain reactions" or something like that)
r=dholbert with the above.
[Attachment #537921](/attachment.cgi?id=537921&action=edit "Part 1 - Copy list of times so interval can be safely deleted v1b") -
Flags: review?(dholbert) â†’ review+

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=650732#c22)â€¢ 14 years ago |
|  | |

(sorry, I accidentally double-pasted the GetDependentTimes() at two different spots in my review feedback. ignore the second one, towards the bottom. :))

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=650732#c23)â€¢ 14 years ago |
|  | |

Comment on [attachment 537925](/attachment.cgi?id=537925 "Crash test - to be checked in later") [[details]](/attachment.cgi?id=537925&action=edit "Crash test - to be checked in later") [[diff]](/attachment.cgi?id=537925&action=diff "Crash test - to be checked in later") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537925)
Crash test - to be checked in later
>diff --git a/content/smil/crashtests/650732-1.svg b/content/smil/crashtests/650732-1.svg
>+function add()
>+{
[...]
>+ attempts++;
>+ if (++attempts >= max\_attempts) {
Looks like you're accidentally double-incrementing here. :)
Also, the control-flow isn't immediately grockable. How about we improve it as follows, for readability:
Have load trigger a method "attemptCrash()" (instead of triggering remove), where attemptCrash looks like so:
function attemptCrash() {
remove();
add();
if (++attempts >= max\_attempts) {
document.documentElement.removeAttribute("class");
} else {
setTimeout(remove, 0);
}
}
That way, "remove()" and "add()" can just do what their names say, and no more. (In particular -- they'd no longer call each other, and "add" no longer does the special increment-and-check-if-we're-done).
r=dholbert with the above.
[Attachment #537925](/attachment.cgi?id=537925&action=edit "Crash test - to be checked in later") -
Flags: review?(dholbert) â†’ review+

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=650732#c24)â€¢ 14 years ago |
|  | |

(In reply to [comment #23](/show_bug.cgi?id=650732#c23 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"))
> setTimeout(remove, 0);
sorry; I meant for the setTimeout in attemptCrash to call itself, not 'remove'. It should have been: setTimeout(attemptCrash, 0);

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=650732#c25)â€¢ 14 years ago |
|  | |

Comment on [attachment 537924](/attachment.cgi?id=537924 "Part 3 - Remove all dependent times in one hit v1a") [[details]](/attachment.cgi?id=537924&action=edit "Part 3 - Remove all dependent times in one hit v1a") [[diff]](/attachment.cgi?id=537924&action=diff "Part 3 - Remove all dependent times in one hit v1a") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537924)
Part 3 - Remove all dependent times in one hit v1a
> void
> nsSMILTimedElement::Unlink()
> {
>+ // As an speed up, go through and remove all instance times that have
s/an/a/
[Attachment #537924](/attachment.cgi?id=537924&action=edit "Part 3 - Remove all dependent times in one hit v1a") -
Flags: review?(dholbert) â†’ review+

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=650732#c26)â€¢ 14 years ago |
|  | |

(In reply to [comment #20](/show_bug.cgi?id=650732#c20 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"))
> I can file parts 2 and 3 as separate bugs. Part 3 is really
> just an optimisation with the side-effect of fixing this bug.
I haven't looked at patch 2 in detail yet, but I think I \_would\_ prefer to have that one be a separate (non-security-sensitive?) bug, given that it's a nontrivial change that's orthogonal to the other patches here & not necessary for fixing this crash. That way, in the unlikely event that patch 1 or 2 has to be backed out due to regressions, we won't end up with a franken-bug with some patches landed & some patches backed out.
I'm less concerned with patch 3 getting its own bug, since it's minimal and (IIUC?) has no intended effect on behavior (aside from a perf win & fixing this bug as a side effect). You can split it to a separate bug if you like, but I don't particularly care. :)
Side question: which patch(es) here should we try to get landed on the aurora & beta branches? Perhaps just patch 3, since it's minimal & sufficient to fix the crash? (In the absence of another crasher testcase that specifically requires one of the other patches, I'm currently leaning against backporting them...)

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=650732#c27)â€¢ 14 years ago |
|  | |

Attached patch

[Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert](attachment.cgi?id=538394&action=diff)
â€” [Details](attachment.cgi?id=538394&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=538394)

Thanks Daniel for getting back to me on all this! I've fixed the items you picked up but just want to check about the last comment.
(In reply to [comment #21](/show_bug.cgi?id=650732#c21 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"))
> >+ // Notification methods. Note that dispatching these notifications can trigger
> >+ // a chain reaction that results in this object being called again.
>
> "this object being called again" doesn't make sense to me -- do you mean
> "recursive calls to these same functions on this same object"?
It's not necessarily recursive in terms of calling the same functions again, but it could be.
e.g. we can have
TimedElementA::NotifyChangedInterval
-> dependent times::HandleChangedInterval
-> all sorts of updates to time value specs etc.
-> TimedElementA::UpdateInstanceTime
-> TimedElementA::UpdateCurrentInterval
From that point we \*may\* call NotifyChangedInterval recursively but even if we don't, we need to be sure we're in a consistent state.
For example, in principal, mCurrentInterval should only be set whilst the state is WAITING or ACTIVE. So we need to be careful not to do:
mElementState = POSTACTIVE;
NotifyChangedInterval();
mCurrentInterval = nsnull;
If we do that we'll violate assertions in UpdateCurrentInterval, not to mention overwriting the most recent state.
So it's not really recursion that's the problem but just callbacks to the same object.
> So, to be sure I understand -- we \*only\* get problematic recursiveness if we
> call this when the object is in an inconsistent state?
If "problematic recursiveness" means crashes like this bug then not really. This bug is fixed by copying the list of instance times out of the interval before doing change notification in case the interval disappears. It's not fixed by ensuring we're in a consistent state for doing notifications.
However in fixing the change notification problem I noticed that there were one or two instances (particularly the early-end case) where we were assuming too much about the state of the element after doing notifications.
I've had a go at updating the comment but let me know if you can think of further improvements to it.
[Attachment #537921](/attachment.cgi?id=537921&action=edit "Part 1 - Copy list of times so interval can be safely deleted v1b") -
Attachment is obsolete: true

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=650732#c28)â€¢ 14 years ago |
|  | |

Attached patch

[Crash test - to be checked in later, v1b, r=dholbert](attachment.cgi?id=538396&action=diff)
â€” [Details](attachment.cgi?id=538396&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=538396)

Address review feedback.
[Attachment #537925](/attachment.cgi?id=537925&action=edit "Crash test - to be checked in later") -
Attachment is obsolete: true

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=650732#c29)â€¢ 14 years ago |
|  | |

Attached patch

[Part 3 - Remove all dependent times in one hit v1b, r=dholbert](attachment.cgi?id=538397&action=diff) (obsolete)
â€” [Details](attachment.cgi?id=538397&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=538397)

Address review feedback.
[Attachment #537924](/attachment.cgi?id=537924&action=edit "Part 3 - Remove all dependent times in one hit v1a") -
Attachment is obsolete: true

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=650732#c30)â€¢ 14 years ago |
|  | |

Comment on [attachment 537922](/attachment.cgi?id=537922 "Part 2 - Don't allow instance times that are dependent on themselves v1b") [[details]](/attachment.cgi?id=537922&action=edit "Part 2 - Don't allow instance times that are dependent on themselves v1b") [[diff]](/attachment.cgi?id=537922&action=diff "Part 2 - Don't allow instance times that are dependent on themselves v1b") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=537922)
Part 2 - Don't allow instance times that are dependent on themselves v1b
Moved to [bug 663288](/show_bug.cgi?id=663288 "VERIFIED FIXED - SVG SMIL: Instance times should not be dependent on themselves")
[Attachment #537922](/attachment.cgi?id=537922&action=edit "Part 2 - Don't allow instance times that are dependent on themselves v1b") -
Attachment is obsolete: true
[Attachment #537922](/attachment.cgi?id=537922&action=edit "Part 2 - Don't allow instance times that are dependent on themselves v1b") -
Flags: review?(dholbert)

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=650732#c31)â€¢ 14 years ago |
|  | |

(In reply to [comment #26](/show_bug.cgi?id=650732#c26 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"))
> I haven't looked at patch 2 in detail yet, but I think I \_would\_ prefer to
> have that one be a separate (non-security-sensitive?) bug, given that it's a
> nontrivial change that's orthogonal to the other patches here & not
> necessary for fixing this crash. That way, in the unlikely event that patch
> 1 or 2 has to be backed out due to regressions, we won't end up with a
> franken-bug with some patches landed & some patches backed out.
Good call. I've moved part 2 to [bug 663288](/show_bug.cgi?id=663288 "VERIFIED FIXED - SVG SMIL: Instance times should not be dependent on themselves").
> I'm less concerned with patch 3 getting its own bug, since it's minimal and
> (IIUC?) has no intended effect on behavior (aside from a perf win & fixing
> this bug as a side effect).
That's correct.
> Side question: which patch(es) here should we try to get landed on the
> aurora & beta branches? Perhaps just patch 3, since it's minimal &
> sufficient to fix the crash? (In the absence of another crasher testcase
> that specifically requires one of the other patches, I'm currently leaning
> against backporting them...)
Patch 1 is the real fix. If we just push patch 3 then I suspect there \*may\* be other test cases that could produce a crash along similar lines--but I've yet to find them. If it's possible to get patch 1 landed then I'd prefer that, but I'm ok with just patch 3 if you judge patch 1 as too risky.
(I haven't landed anything for a while so I don't have a feel for what's an acceptable level of risk on the new branches.)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=650732#c32)â€¢ 14 years ago |
|  | |

(In reply to [comment #27](/show_bug.cgi?id=650732#c27 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"))
> I've had a go at updating the comment but let me know if you can think of
> further improvements to it.
Looks great now - thanks for the clarification!

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=650732#c33)â€¢ 14 years ago |
|  | |

(In reply to [comment #31](/show_bug.cgi?id=650732#c31 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"))
> > Side question: which patch(es) here should we try to get landed on the
> > aurora & beta branches?
>
> Patch 1 is the real fix. If we just push patch 3 then I suspect there \*may\*
> be other test cases that could produce a crash along similar lines
Ok, fair enough.
(In reply to [comment #31](/show_bug.cgi?id=650732#c31 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"))
> (I haven't landed anything for a while so I don't have a feel for what's an
> acceptable level of risk on the new branches.)
Due to the sg nature of this bug, I suspect patch 1 would be likely to get approval-aurora+. approval-beta may be harder to argue for, though, as this is a nontrivial change, & beta is kind of like an rc. (and it'll update to the code in aurora after 6 weeks anyway.)
Once this is landed on trunk, I'd suggest requesting approval-aurora ASAP. The approval-queue-triagers suggest that you include a comment with a brief risk/reward assessment when you request approval, too.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=650732#c34)â€¢ 14 years ago |
|  | |

(In reply to [comment #33](/show_bug.cgi?id=650732#c33 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"))
> approval-beta may be harder to argue for, though
(ah -- indeed, I just noticed that jst had already set this as "status-firefox5:wontfix".)

|  | [Mardeg](/user_profile?user_id=200920) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=650732#c35)â€¢ 14 years ago |
|  | |

(In reply to [comment #34](/show_bug.cgi?id=650732#c34 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"))
> (ah -- indeed, I just noticed that jst had already set this as
> "status-firefox5:wontfix".)
and "status2.0:wanted" so there's a possibility it could land on the Firefox 4 branch?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=650732#c36)â€¢ 14 years ago |
|  | |

(yeah, I think that status2.0 value may have been accidental/bogus. Last I heard, the next update for Firefox 4 users will be Firefox 5.)

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a4877493_1)â€¢ 14 years ago |

Crash Signature: [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const\*, int, int) ]
[@ nsSMILInstanceTime::HandleChangedInterval ]

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=650732#c37)â€¢ 14 years ago |
|  | |

It turns out patch 3 is bad. It causes SMIL crashtest 596796-1.svg to fail. Currently debugging. Patch 1 should still be fine.Crash Signature: [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const\*, int, int) ]
[@ nsSMILInstanceTime::HandleChangedInterval ] â†’ [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const\*, int, int) ]
[@ nsSMILInstanceTime::HandleChangedInterval ]

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=650732#c38)â€¢ 14 years ago |
|  | |

Comment on [attachment 538397](/attachment.cgi?id=538397 "Part 3 - Remove all dependent times in one hit v1b, r=dholbert") [[details]](/attachment.cgi?id=538397&action=edit "Part 3 - Remove all dependent times in one hit v1b, r=dholbert") [[diff]](/attachment.cgi?id=538397&action=diff "Part 3 - Remove all dependent times in one hit v1b, r=dholbert") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=538397)
Part 3 - Remove all dependent times in one hit v1b, r=dholbert
Moving this patch to [bug 664343](/show_bug.cgi?id=664343 "VERIFIED FIXED - SVG SMIL: Tear down of syncbase intervals is inefficient"). It needs to be re-thought. For now, patch 1 is sufficient to fix this bug.
[Attachment #538397](/attachment.cgi?id=538397&action=edit "Part 3 - Remove all dependent times in one hit v1b, r=dholbert") -
Attachment is obsolete: true

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=650732#c39)â€¢ 14 years ago |
|  | |

Pushed to m-i:
<http://hg.mozilla.org/integration/mozilla-inbound/rev/2fbc5d9b566b>Whiteboard: [sg:critical?] â†’ [sg:critical?][inbound]

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a4992685_165012)â€¢ 14 years ago |

[Attachment #538394](/attachment.cgi?id=538394&action=edit "Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert") -
Flags: checkin+

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=650732#c40)â€¢ 14 years ago |
|  | |

This has now landed on m-c:
<http://hg.mozilla.org/mozilla-central/rev/2fbc5d9b566b>
Will request approval to land on aurora.Whiteboard: [sg:critical?][inbound] â†’ [sg:critical?]

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=650732#c41)â€¢ 14 years ago |
|  | |

Comment on [attachment 538394](/attachment.cgi?id=538394 "Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert") [[details]](/attachment.cgi?id=538394&action=edit "Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert") [[diff]](/attachment.cgi?id=538394&action=diff "Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=538394)
Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert
Requesting approval to land on aurora. Potentially exploitable, causes crash with attached test case ([attachment 538396](/attachment.cgi?id=538396 "Crash test - to be checked in later, v1b, r=dholbert") [[details]](/attachment.cgi?id=538396&action=edit "Crash test - to be checked in later, v1b, r=dholbert") [[diff]](/attachment.cgi?id=538396&action=diff "Crash test - to be checked in later, v1b, r=dholbert") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=538396)), sg:crit?, landed on m-c and seems to be behaving.
[Attachment #538394](/attachment.cgi?id=538394&action=edit "Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert") -
Flags: approval-mozilla-aurora?

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=650732#c42)â€¢ 14 years ago |
|  | |

This needs to bake some days before we'll consider this for aurora. Leaving the patch nominated. An risk/benefit analysis would be helpful here though, as the patch is a bit on the large side and assessing risk purely based on reading the patch isn't trivial.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=650732#c43)â€¢ 14 years ago |
|  | |

[Comment 40](/show_bug.cgi?id=650732#c40 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]") means this is FIXED on trunk/mozilla7Status: ASSIGNED â†’ RESOLVEDClosed: 14 years ago
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed)Resolution: --- â†’ FIXEDTarget Milestone: --- â†’ mozilla7

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=650732#c44)â€¢ 14 years ago |
|  | |

(In reply to [comment #42](/show_bug.cgi?id=650732#c42 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]"))
> This needs to bake some days before we'll consider this for aurora. Leaving
> the patch nominated. An risk/benefit analysis would be helpful here though,
> as the patch is a bit on the large side and assessing risk purely based on
> reading the patch isn't trivial.
I'm not sure exactly what more to add. The patch largely just moves code from one point to another. However, it's quite a complicated part of the code (it manages timing dependencies which can be arbitrarily complex) so there is the potential that this patch alters the behaviour such that some instances of cyclic dependencies are not correctly detected and broken resulting in infinite recursion.
In summary:
Benefit:
\* Fixes known crash and potential security hole
\* Fixes further potentially problematic behaviour (notably the changes to early ending)
Risk:
\* Alters the behaviour such that some time dependency arrangements result in infinite recursion
I think that if this bakes for a week or so then the risk is low. In general this patch produces a more stable system and passes our existing crashtests/reftests/mochitests which include a number of test cases for cyclic dependencies.
In [bug 664343](/show_bug.cgi?id=664343 "VERIFIED FIXED - SVG SMIL: Tear down of syncbase intervals is inefficient") I hope to add some further recursion checking to catch the kind of problem this patch could trigger.

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=650732#c45)â€¢ 14 years ago |
|  | |

Comment on [attachment 538394](/attachment.cgi?id=538394 "Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert") [[details]](/attachment.cgi?id=538394&action=edit "Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert") [[diff]](/attachment.cgi?id=538394&action=diff "Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert") [[review]](/page.cgi?id=splinter.html&ignore=&bug=650732&attachment=538394)
Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert
A sg:crit that only touches SMIL is great to fix. Approved for mozilla-aurora.
[Attachment #538394](/attachment.cgi?id=538394&action=edit "Part 1 - Copy list of times so interval can be safely deleted v1c, r=dholbert") -
Flags: approval-mozilla-aurora? â†’ approval-mozilla-aurora+

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=650732#c46)â€¢ 14 years ago |
|  | |

Brian, dholbert, can you guys land this on aurora?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=650732#c47)â€¢ 14 years ago |
|  | |

Landed on aurora: <http://hg.mozilla.org/releases/mozilla-aurora/rev/d4509c8a19a9>
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a5757253_278074)â€¢ 14 years ago |

Flags: in-testsuite?

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=650732#c48)â€¢ 13 years ago |
|  | |

Crashtest on m-i (now that this fix has shipped):
<http://hg.mozilla.org/integration/mozilla-inbound/rev/07ae78c82432>

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Reporter |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=650732#c49)â€¢ 13 years ago |
|  | |

Un-hiding (now that this fix has shipped)Group: core-security

|  | [Marco Bonardo [:mak]](/user_profile?user_id=240353) |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=650732#c50)â€¢ 13 years ago |
|  | |

<http://hg.mozilla.org/mozilla-central/rev/07ae78c82432>

|  | [Vlad [QA]](/user_profile?user_id=408941) |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=650732#c51)â€¢ 13 years ago |
|  | |

I have run both testcases in the attachments and I've got no crashes on
Mozilla/5.0 (Windows NT 6.1; rv:7.0) Gecko/20100101 Firefox/7.0 beta 1
Setting resolution to Verified Fixed.Status: RESOLVED â†’ VERIFIED

|  | [Brian Birtles (:birtles)](/user_profile?user_id=165012)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=650732#a11079042_165012)â€¢ 13 years ago |

Flags: in-testsuite? â†’ in-testsuite+
You need to [log in](/show_bug.cgi?id=650732&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Brian Birtles (:birtles)](/user_profile?user_id=165012)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_d77e3a74_20250125_224234.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/648206)
* [XML](/show_bug.cgi?ctype=xml&id=648206)

Closed
[Bug 648206](/show_bug.cgi?id=648206)

Opened 14 years ago
Closed 14 years ago

# "ASSERTION: bad this object in get" or crash [@ xpc::holder\_get] with InstallTrigger

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

"ASSERTION: bad this object in get" or crash [@ xpc::holder\_get] with InstallTrigger

## Categories

### (Core :: XPConnect, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=XPConnect#XPConnect)

XPConnect
â–¾

Core :: XPConnect
Facilitates calling between JavaScript and XPCOM components.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=XPConnect&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=XPConnect&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=XPConnect)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla6

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |
| a11y-review | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-) | [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) |
| firefox6 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | - | affected |
| firefox6 |  | fixed |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: mrbkap)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/89d2149736265010bfe669ce8c3075c0?d=mm&size=40)  [mrbkap](/user_profile?user_id=69426)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/5111b810214a00377104f5ad3efefa26?d=mm&size=40)  [sefeng](/user_profile?user_id=625922)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

4 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, crash, testcase, Whiteboard: [sg:critical?] fixed-in-tracemonkey)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[crash](/buglist.cgi?keywords=crash&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?] fixed-in-tracemonkey

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ xpc::holder\_get ]](https://crash-stats.mozilla.org/signature/?signature=xpc%3A%3Aholder_get)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files)

| [testcase (crashes Firefox when loaded)](/attachment.cgi?id=524355)  [14 years ago](#c1)  [Jesse Ruderman](/user_profile?user_id=11608)   138 bytes, text/plain |  | [Details](/attachment.cgi?id=524355&action=edit) |
| --- | --- | --- |
| [stack traces (mac debug)](/attachment.cgi?id=524356)  [14 years ago](#c2)  [Jesse Ruderman](/user_profile?user_id=11608)   11.25 KB, text/plain |  | [Details](/attachment.cgi?id=524356&action=edit) |
| [Proposed fix v1](/attachment.cgi?id=525190)  [14 years ago](#c3)  [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)   2.77 KB, patch | gal : [review+](#c4 "14 years ago") | [Details](/attachment.cgi?id=525190&action=edit) | [Diff](/attachment.cgi?id=525190&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648206&attachment=525190) |

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=648206#c0)â€¢ 14 years ago |
|  | |

Symptoms are exactly the same as old [bug 608963](/show_bug.cgi?id=608963 "RESOLVED FIXED - \"ASSERTION: bad this object in get\" crash [@ xpc::holder_get ]"):
Debug:
###!!! ASSERTION: bad this object in set: 'wrapper->isProxy()', file js/src/xpconnect/wrappers/XrayWrapper.cpp, line 207
Assertion failure: isProxy(), at jsproxy.h:193
Opt:
Crash [bp-8c6523b2-2b06-4848-9cbb-089062110406](https://crash-stats.mozilla.org/report/index/8c6523b2-2b06-4848-9cbb-089062110406) [@ xpc::holder\_set ]
Filing as security-sensitive because InstallTrigger/wrappers is a sensitive area.

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=648206#c1)â€¢ 14 years ago |
|  | |

Attached file
[testcase (crashes Firefox when loaded)](attachment.cgi?id=524355)
â€” [Details](attachment.cgi?id=524355&action=edit)

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=648206#c2)â€¢ 14 years ago |
|  | |

Attached file
[stack traces (mac debug)](attachment.cgi?id=524356)
â€” [Details](attachment.cgi?id=524356&action=edit)

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=648206#c3)â€¢ 14 years ago |
|  | |

Attached patch

[Proposed fix v1](attachment.cgi?id=525190&action=diff)
â€” [Details](attachment.cgi?id=525190&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648206&attachment=525190)

So, this is one fix for this bug. The other fix that I considered (albeit not for very long) was just to throw in this case. In other words, you wouldn't be allowed to use an Xray wrapper as the prototype of another object. I wasn't sure if there might be a use-case for that though, so I backed off.Assignee: nobody â†’ mrbkapStatus: NEW â†’ ASSIGNED
[Attachment #525190](/attachment.cgi?id=525190&action=edit "Proposed fix v1") -
Flags: review?(gal)

|  | [Andreas Gal :gal](/user_profile?user_id=310943) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=648206#c4)â€¢ 14 years ago |
|  | |

Comment on [attachment 525190](/attachment.cgi?id=525190 "Proposed fix v1") [[details]](/attachment.cgi?id=525190&action=edit "Proposed fix v1") [[diff]](/attachment.cgi?id=525190&action=diff "Proposed fix v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=648206&attachment=525190)
Proposed fix v1
Common out the code?
[Attachment #525190](/attachment.cgi?id=525190&action=edit "Proposed fix v1") -
Flags: review?(gal) â†’ review+

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=648206#c5)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/tracemonkey/rev/e0f9db5a4fc7>Whiteboard: fixed-in-tracemonkey

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=648206#c6)â€¢ 14 years ago |
|  | |

This appears to have been merged to mozilla-central and is currently on Aurora(6) but not Beta(5). That's probably a fine state to be in since it's internally discovered and old supported releases don't have Xray wrappers.
Taking a swag at a sg:critical rating.Status: ASSIGNED â†’ RESOLVEDClosed: 14 years ago
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- â†’ [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-)Resolution: --- â†’ FIXEDWhiteboard: fixed-in-tracemonkey â†’ [sg:critical?] fixed-in-tracemonkeyTarget Milestone: --- â†’ mozilla6

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648206#a5830364_1)â€¢ 14 years ago |

Crash Signature: [@ xpc::holder\_get]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648206#a19171245_1689)â€¢ 13 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=648206&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_bafd5d5d_20250125_224247.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/667092)
* [XML](/show_bug.cgi?ctype=xml&id=667092)

Closed
[Bug 667092](/show_bug.cgi?id=667092)

Opened 14 years ago
Closed 14 years ago

# Crash [@ DocumentViewerImpl::Print] with onbeforeprint

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ DocumentViewerImpl::Print] with onbeforeprint

## Categories

### (Core :: Printing: Output, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Printing%3A%20Output#Printing%3A%20Output)

Printing: Output
â–¾

Core :: Printing: Output
Problems printing from this product should be submitted under this component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Printing%3A%20Output&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Printing%3A%20Output&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Printing%3A%20Output)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

Windows 7

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla7

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=unaffected) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| firefox7 | [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 |  | unaffected |
| firefox6 | + | fixed |
| firefox7 | + | fixed |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: martijn.martijn, Assigned: smaug)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/056757eff6ed7c8ec26f61e3bf7695fe?d=mm&size=40)  [smaug](/user_profile?user_id=39966)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/1ecb17d06c0dc059332f0f5fb330984e?d=mm&size=40)  [martijn.martijn](/user_profile?user_id=55600)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jwatt](/user_profile?user_id=32767)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

6 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[307258](/show_bug.cgi?id=307258 "RESOLVED FIXED - Support beforeprint and afterprint events")

Dependency [tree](/showdependencytree.cgi?id=667092&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=667092)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [sg:critical?] [landed m-c 7/01] [dveditz nom'd] [qa!])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---),
[verified-beta](/buglist.cgi?keywords=verified-beta&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?] [landed m-c 7/01] [dveditz nom'd] [qa!]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [testcase](/attachment.cgi?id=541835)  [14 years ago](#c0)  [Martijn Wargers (dead)](/user_profile?user_id=55600)   279 bytes, text/html |  | [Details](/attachment.cgi?id=541835&action=edit) |
| --- | --- | --- |
| [patch](/attachment.cgi?id=543243)  [14 years ago](#c3)  [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)   941 bytes, patch | jst : [review+](#a523789_12352 "14 years ago")  johnath : [approval-mozilla-beta+](#c7 "14 years ago") | [Details](/attachment.cgi?id=543243&action=edit) | [Diff](/attachment.cgi?id=543243&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=667092&attachment=543243) |

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Martijn Wargers (dead)](/user_profile?user_id=55600)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=667092#c0)â€¢ 14 years ago |
|  | |

Attached file
[testcase](attachment.cgi?id=541835)
â€” [Details](attachment.cgi?id=541835&action=edit)

See testcase, which crashes current trunk build. I guess a regression of [bug 307258](/show_bug.cgi?id=307258 "RESOLVED FIXED - Support beforeprint and afterprint events").
<https://crash-stats.mozilla.com/report/index/bp-19109731-87bb-4b70-b586-98d902110624>
0 xul.dll DocumentViewerImpl::Print layout/base/nsDocumentViewer.cpp:3694
1 xul.dll nsGlobalWindow::Print dom/base/nsGlobalWindow.cpp:5112
2 xul.dll nsGlobalWindow::Print dom/base/nsGlobalWindow.cpp:5077
3 xul.dll NS\_InvokeByIndex\_P xpcom/reflect/xptcall/src/md/win32/xptcinvoke.cpp:102
4 xul.dll XPC\_WN\_CallMethod js/src/xpconnect/src/xpcwrappednativejsops.cpp:1607
5 mozjs.dll js::Invoke js/src/jsinterp.cpp:656
6 mozjs.dll js::Interpret js/src/jsinterp.cpp:4550
7 mozjs.dll js::RunScript js/src/jsinterp.cpp:613
8 mozjs.dll js::Invoke js/src/jsinterp.cpp:686
9 mozjs.dll js::ExternalInvoke js/src/jsinterp.cpp:805
10 mozjs.dll JS\_CallFunctionValue js/src/jsapi.cpp:5098
11 xul.dll nsJSContext::CallEventHandler dom/base/nsJSEnvironment.cpp:1900
12 xul.dll nsGlobalWindow::RunTimeout dom/base/nsGlobalWindow.cpp:9211
13 xul.dll nsGlobalWindow::TimerCallback dom/base/nsGlobalWindow.cpp:9552
14 xul.dll nsTimerImpl::Fire xpcom/threads/nsTimerImpl.cpp:424
15 xul.dll nsTimerEvent::Run xpcom/threads/nsTimerImpl.cpp:520
16 xul.dll nsThread::ProcessNextEvent xpcom/threads/nsThread.cpp:618
17 xul.dll mozilla::ipc::MessagePump::Run ipc/glue/MessagePump.cpp:110
18 xul.dll xul.dll@0xb6560f
etc..
The iframe content is this:
<script>
setTimeout(function() {window.print();}, 10);
</script>
<frameset onbeforeprint="window.frameElement.parentNode.removeChild(window.frameElement)"></frameset>"

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667092#a83422_39966)â€¢ 14 years ago |

Group: core-security

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667092#a84124_39966)â€¢ 14 years ago |

Assignee: nobody â†’ Olli.Pettay

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=667092#c1)â€¢ 14 years ago |
|  | |

Going to assume Olli hid the bug because it looks exploitable. It's a near-null dereference, but hard to see how that works given the code flagged in the crash-stack, so it's hard to say if the bad value could end up being something else or used in a bad way.
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=unaffected)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F)
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
--- â†’ [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)Whiteboard: [sg:critical?]

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667092#a511581_12352)â€¢ 14 years ago |

[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=667092#c2)â€¢ 14 years ago |
|  | |

This looks indeed a nullpointer crash.
Patch coming.

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=667092#c3)â€¢ 14 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=543243&action=diff)
â€” [Details](attachment.cgi?id=543243&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=667092&attachment=543243)

If ::Destroy is called because of beforeprint, mDeviceContext becomes null.
[Attachment #543243](/attachment.cgi?id=543243&action=edit "patch") -
Flags: review?(jst)

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667092#a523789_12352)â€¢ 14 years ago |

[Attachment #543243](/attachment.cgi?id=543243&action=edit "patch") -
Flags: review?(jst) â†’ review+

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=667092#c4)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/mozilla-central/rev/52ba94702d12>Status: NEW â†’ RESOLVEDClosed: 14 years agoResolution: --- â†’ FIXED

|  | [Jesse Ruderman](/user_profile?user_id=11608) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=667092#c5)â€¢ 14 years ago |
|  | |

I made changes to my DOM fuzzer that should allow it to find bugs like this (but with very low probability, I think). 1a3951936f66, 3e91c7dcea51

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667092#a1722110_1689)â€¢ 14 years ago |

[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed)Target Milestone: --- â†’ mozilla7

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667092#a1722142_1689)â€¢ 14 years ago |

[Attachment #543243](/attachment.cgi?id=543243&action=edit "patch") -
Flags: approval-mozilla-beta?

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=667092#c6)â€¢ 14 years ago |
|  | |

We'll get to this approval requests on Monday's 2pm PT triage.Whiteboard: [sg:critical?] â†’ [sg:critical?] [landed m-c 7/01] [dveditz nom'd]

|  | [Johnathan Nightingale [:johnath]](/user_profile?user_id=210757) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=667092#c7)â€¢ 14 years ago |
|  | |

Comment on [attachment 543243](/attachment.cgi?id=543243 "patch") [[details]](/attachment.cgi?id=543243&action=edit "patch") [[diff]](/attachment.cgi?id=543243&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=667092&attachment=543243)
patch
Get it in quickly, please!
[Attachment #543243](/attachment.cgi?id=543243&action=edit "patch") -
Flags: approval-mozilla-beta? â†’ approval-mozilla-beta+

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=667092#c8)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-beta/rev/4137513fe932>
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=667092#c9)â€¢ 13 years ago |
|  | |

qa+ for fix verification in Firefox 7Whiteboard: [sg:critical?] [landed m-c 7/01] [dveditz nom'd] â†’ [sg:critical?] [landed m-c 7/01] [dveditz nom'd] [qa+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=667092#c10)â€¢ 13 years ago |
|  | |

Verified that the testcase no longer crashes on Win7 with Firefox 7: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0) Gecko/20100101 Firefox/7.0

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=667092#c11)â€¢ 13 years ago |
|  | |

No crash on OS X 10.7 with Firefox 7 either: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:7.0) Gecko/20100101 Firefox/7.0

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=667092#c12)â€¢ 13 years ago |
|  | |

Verified fixed based on [comment 10](/show_bug.cgi?id=667092#c10 "VERIFIED FIXED - Crash [@ DocumentViewerImpl::Print] with onbeforeprint") and 11.Status: RESOLVED â†’ VERIFIEDKeywords: [verified-beta](/buglist.cgi?keywords=verified-beta&resolution=---)Whiteboard: [sg:critical?] [landed m-c 7/01] [dveditz nom'd] [qa+] â†’ [sg:critical?] [landed m-c 7/01] [dveditz nom'd] [qa!]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667092#a12370784_1689)â€¢ 13 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=667092&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Martijn Wargers (dead)](/user_profile?user_id=55600)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_9225c495_20250126_123203.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Sun Jan 26 2025 04:32:03 PST

* **Bug ID:**
  646825,
  648206,
  650273,
  650275,
  651030,
  660517,
  662132,
  665518,
  667092,
  667512,
  668245,
  669584,
  650732,
  667315

---

14 bugs found.

| [ID](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&order=bug_id%20DESC&query_based_on=) | [Type](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&order=bug_type%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Summary](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&order=short_desc%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Product](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&order=product%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Comp](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&order=component%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Assigneeâ–²](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&order=assigned_to%20DESC%2Cbug_status%2Cpriority%2Cbug_id&query_based_on=) | [Statusâ–²](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&order=bug_status%20DESC%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Resolution](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&order=resolution%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Updated](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&order=changeddate%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [646825](/show_bug.cgi?id=646825 "RESOLVED FIXED - [ANGLE] crash [@ gl::VertexDataConverter<float, gl::WidenRule<int, 2>, gl::ConversionRule<int, 0, int>, gl::DefaultVertexValues<float, int> >::convertArray(float const*, unsigned int, unsigned int, float*)]with Google Labs' Body Map") |  | [[ANGLE] crash [@ gl::VertexDataConverter<float, gl::WidenRule<int, 2>, gl::ConversionRule<int, 0, int>, gl::DefaultVertexValues<float, int> >::convertArray(float const\*, unsigned int, unsigned int, float\*)]with Google Labs' Body Map](/show_bug.cgi?id=646825) | Core | Graphics: CanvasWebG | jacob.benoit.1 | RESO | FIXE | 2015-10-16 |
| [651030](/show_bug.cgi?id=651030 "RESOLVED FIXED - \"Assertion failure: JSVAL_IS_DOUBLE_IMPL(data)\"") |  | ["Assertion failure: JSVAL\_IS\_DOUBLE\_IMPL(data)"](/show_bug.cgi?id=651030) | Core | JavaScript Engine | jorendorff | RESO | FIXE | 2011-11-14 |
| [660517](/show_bug.cgi?id=660517 "RESOLVED FIXED - \"ASSERTION: unable to transplant wrappers, probably OOM\"") |  | ["ASSERTION: unable to transplant wrappers, probably OOM"](/show_bug.cgi?id=660517) | Core | JavaScript Engine | jwalden | RESO | FIXE | 2013-12-27 |
| [669584](/show_bug.cgi?id=669584 "RESOLVED FIXED - The fix for bug 639728 forgot that items are created lazily") |  | [The fix for bug 639728 forgot that items are created lazily](/show_bug.cgi?id=669584) | Core | SVG | jwatt | RESO | FIXE | 2015-10-16 |
| [665518](/show_bug.cgi?id=665518 "RESOLVED FIXED - Websocket Data Framing crash [@mozilla::net::nsWebSocketHandler::ApplyMask]") |  | [Websocket Data Framing crash [@mozilla::net::nsWebSocketHandler::ApplyMask]](/show_bug.cgi?id=665518) | Core | Networking: WebSocke | mcmanus | RESO | FIXE | 2012-05-30 |
| [648206](/show_bug.cgi?id=648206 "RESOLVED FIXED - \"ASSERTION: bad this object in get\" or crash [@ xpc::holder_get] with InstallTrigger") |  | ["ASSERTION: bad this object in get" or crash [@ xpc::holder\_get] with InstallTrigger](/show_bug.cgi?id=648206) | Core | XPConnect | mrbkap | RESO | FIXE | 2011-11-14 |
| [650273](/show_bug.cgi?id=650273 "RESOLVED FIXED - \"Assertion failure: compartment mismatched\" with setTimeout") |  | ["Assertion failure: compartment mismatched" with setTimeout](/show_bug.cgi?id=650273) | Core | Security | mrbkap | RESO | FIXE | 2011-11-14 |
| [650275](/show_bug.cgi?id=650275 "RESOLVED FIXED - \"ABORT: bad scope for new JSObjects\" with setTimeout") |  | ["ABORT: bad scope for new JSObjects" with setTimeout](/show_bug.cgi?id=650275) | Core | Security | mrbkap | RESO | FIXE | 2013-12-27 |
| [667315](/show_bug.cgi?id=667315 "RESOLVED FIXED - XSLT crashes Firefox 5 and Firefox 7 (but not Firefox 4)") |  | [XSLT crashes Firefox 5 and Firefox 7 (but not Firefox 4)](/show_bug.cgi?id=667315) | Core | XSLT | peterv | RESO | FIXE | 2015-10-16 |
| [662132](/show_bug.cgi?id=662132 "VERIFIED FIXED - TI: Crash [@ JSString::isFlat]") |  | [TI: Crash [@ JSString::isFlat]](/show_bug.cgi?id=662132) | Core | JavaScript Engine | bhackett1024 | VERI | FIXE | 2013-12-27 |
| [650732](/show_bug.cgi?id=650732 "VERIFIED FIXED - Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]") |  | [Crash [@ nsSMILInstanceTime::HandleChangedInterval(nsSMILTimeContainer const\*, int, int) ] [@ nsSMILInstanceTime::HandleChangedInterval ]](/show_bug.cgi?id=650732) | Core | SVG | brian | VERI | FIXE | 2011-08-24 |
| [667512](/show_bug.cgi?id=667512 "VERIFIED FIXED - Crash [@ nsIFrame::PeekOffset] with removing br and table cell and pressing right arrow key") |  | [Crash [@ nsIFrame::PeekOffset] with removing br and table cell and pressing right arrow key](/show_bug.cgi?id=667512) | Core | Layout | ehsan.akhgari | VERI | FIXE | 2012-03-08 |
| [668245](/show_bug.cgi?id=668245 "VERIFIED FIXED - Crash [@ mozilla::places::History::NotifyVisited(nsIURI*) ]") |  | [Crash [@ mozilla::places::History::NotifyVisited(nsIURI\*) ]](/show_bug.cgi?id=668245) | Toolkit | Places | mak | VERI | FIXE | 2013-12-27 |
| [667092](/show_bug.cgi?id=667092 "VERIFIED FIXED - Crash [@ DocumentViewerImpl::Print] with onbeforeprint") |  | [Crash [@ DocumentViewerImpl::Print] with onbeforeprint](/show_bug.cgi?id=667092) | Core | Printing: Output | smaug | VERI | FIXE | 2011-11-14 |

14 bugs found.

|  |  | [REST](/rest/bug?include_fields=id,summary,status&bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315 "Query as a REST API request") | [CSV](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&ctype=csv&human=1) | [Feed](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&title=Bug%20List&ctype=atom) | [iCalendar](/buglist.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&ctype=ics)  [ChangeÂ Columns](/colchange.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced&query_based_on=) | [EditÂ Search](/query.cgi?bug_id=646825%2C648206%2C650273%2C650275%2C651030%2C660517%2C662132%2C665518%2C667092%2C667512%2C668245%2C669584%2C650732%2C667315&query_format=advanced) |  | as |
| --- | --- | --- | --- | --- | --- |



=== Content from bugzilla.mozilla.org_ccabe9ce_20250125_224250.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  Â·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summaryâ–¾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View â–¾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/667512)
* [XML](/show_bug.cgi?ctype=xml&id=667512)

Closed
[Bug 667512](/show_bug.cgi?id=667512)

Opened 14 years ago
Closed 14 years ago

# Crash [@ nsIFrame::PeekOffset] with removing br and table cell and pressing right arrow key

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ nsIFrame::PeekOffset] with removing br and table cell and pressing right arrow key

## Categories

### (Core :: Layout, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
â–¾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Layout#Layout)

Layout
â–¾

Core :: Layout

Issues in Layout that do not fit into any other Layout component or which span multiple Layout components.

Bugs related to the top level presentation objects (pres shell, pres context, and document viewer), the frame constructor, and the base frame classes, as well as general issues with alignment and sizing, all belong here.

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Layout&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Layout&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Layout)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla8

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-) | [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| firefox7 | [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed) |
| firefox8 | [+](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=fixed) |
| status2.0 | --- | [wontfix](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wontfix) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | - | affected |
| firefox6 | + | fixed |
| firefox7 | + | fixed |
| firefox8 | + | fixed |
| status2.0 |  | wontfix |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: martijn.martijn, Assigned: ehsan.akhgari)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/5aef682fbfd7590b9d85d6e8dbab10eb?d=mm&size=40)  [ehsan.akhgari](/user_profile?user_id=251051)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/1ecb17d06c0dc059332f0f5fb330984e?d=mm&size=40)  [martijn.martijn](/user_profile?user_id=55600)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/cd9b85b2e112bd7941b21ad03f42604e?d=mm&size=40)  [dholbert](/user_profile?user_id=278074)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

14 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[595758](/show_bug.cgi?id=595758 "RESOLVED FIXED - Crash [@ nsTableFrame::MarkIntrinsicWidthsDirty] on print preview")

Dependency [tree](/showdependencytree.cgi?id=667512&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=667512)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (5 keywords, Whiteboard: [sg:critical?][qa!])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---),
[verified-aurora](/buglist.cgi?keywords=verified-aurora&resolution=---),
[verified-beta](/buglist.cgi?keywords=verified-beta&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?][qa!]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [ehsan.akhgari](/user_profile?user_id=251051) | [in-testsuite](#c23 "14 years ago") | + |
| --- | --- | --- |
| [ehsan.akhgari](/user_profile?user_id=251051) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ nsIFrame::PeekOffset(nsPeekOffsetStruct\*) ]](https://crash-stats.mozilla.org/signature/?signature=nsIFrame%3A%3APeekOffset%28nsPeekOffsetStruct%2A%29)

[[@ nsFrameIterator::GetFirstChild ]](https://crash-stats.mozilla.org/signature/?signature=nsFrameIterator%3A%3AGetFirstChild)

[[@ nsPlaceholderFrame::GetRealFrameFor ]](https://crash-stats.mozilla.org/signature/?signature=nsPlaceholderFrame%3A%3AGetRealFrameFor)

[[@ libxul.so@0x746c7e ]](https://crash-stats.mozilla.org/signature/?signature=libxul.so%400x746c7e)

[[@ libxul.so@0x749682 ]](https://crash-stats.mozilla.org/signature/?signature=libxul.so%400x749682)

[[@ libxul.so@0x738cae ]](https://crash-stats.mozilla.org/signature/?signature=libxul.so%400x738cae)

[[@ libxul.so@0x73853e ]](https://crash-stats.mozilla.org/signature/?signature=libxul.so%400x73853e)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [testcase](/attachment.cgi?id=542197)  [14 years ago](#c0)  [Martijn Wargers (dead)](/user_profile?user_id=55600)   851 bytes, text/html |  | [Details](/attachment.cgi?id=542197&action=edit) |
| --- | --- | --- |
| [Patch (v1)](/attachment.cgi?id=548317)  [14 years ago](#c7)  [(no longer active)](/user_profile?user_id=251051)   3.52 KB, patch | smontagu : [review+](#c15 "14 years ago")  christian : [approval-mozilla-aurora+](#c18 "14 years ago")  christian : [approval-mozilla-beta+](#c18 "14 years ago") | [Details](/attachment.cgi?id=548317&action=edit) | [Diff](/attachment.cgi?id=548317&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=667512&attachment=548317) |

Bottom â†“
Tags â–¾

* Reset

Timeline â–¾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Martijn Wargers (dead)](/user_profile?user_id=55600)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=667512#c0)â€¢ 14 years ago |
|  | |

Attached file
[testcase](attachment.cgi?id=542197)
â€” [Details](attachment.cgi?id=542197&action=edit)

See testcase, which crashes current trunk build after pressing the right arrow key.
<https://crash-stats.mozilla.com/report/index/9bc6ca38-beec-412b-bd06-161462110627>
0 @0x6c0070
1 xul.dll nsIFrame::PeekOffset layout/generic/nsFrame.cpp:5598
2 xul.dll nsFrameSelection::MoveCaret layout/generic/nsSelection.cpp:1240
3 xul.dll nsFrameSelection::MoveCaret layout/generic/nsSelection.cpp:1105
4 xul.dll nsFrameSelection::CharacterMove layout/generic/nsSelection.cpp:2191
5 xul.dll PresShell::CharacterMove layout/base/nsPresShell.cpp:3150
6 xul.dll nsSelectionMoveCommands::DoCommand editor/libeditor/base/nsEditorCommands.cpp:718
7 xul.dll nsControllerCommandTable::DoCommand embedding/components/commandhandler/src/nsControllerCommandTable.cpp:191
8 xul.dll nsBaseCommandController::DoCommand embedding/components/commandhandler/src/nsBaseCommandController.cpp:169
9 xul.dll nsXBLPrototypeHandler::DispatchXBLCommand content/xbl/src/nsXBLPrototypeHandler.cpp:499
10 xul.dll nsXBLPrototypeHandler::ExecuteHandler
11 xul.dll nsXBLPrototypeHandler::ModifiersMatchMask content/xbl/src/nsXBLPrototypeHandler.cpp:1027
12 xul.dll nsCOMPtr\_base::assign\_from\_helper obj-firefox/xpcom/build/nsCOMPtr.cpp:152
13 xul.dll nsCOMPtr<nsIDOMElement>::nsCOMPtr<nsIDOMElement> obj-firefox/dist/include/nsCOMPtr.h:644
14 xul.dll nsXBLWindowKeyHandler::GetElement content/xbl/src/nsXBLWindowKeyHandler.cpp:589
15 xul.dll nsCOMPtr\_base::assign\_with\_AddRef obj-firefox/xpcom/build/nsCOMPtr.cpp:88
16 xul.dll nsRefPtr<nsIDOMEventListener>::~nsRefPtr<nsIDOMEventListener> obj-firefox/dist/include/nsAutoPtr.h:969
17 xul.dll nsHashtable::Get xpcom/ds/nsHashtable.cpp:246
18 xul.dll nsXBLDocumentInfo::GetPrototypeBinding content/xbl/src/nsXBLDocumentInfo.cpp:545
19 xul.dll nsXBLDocumentInfo::GetPrototypeBinding content/xbl/src/nsXBLDocumentInfo.cpp:545
20 xul.dll nsXBLSpecialDocInfo::GetHandlers content/xbl/src/nsXBLWindowKeyHandler.cpp:153
21 xul.dll nsXBLSpecialDocInfo::GetAllHandlers content/xbl/src/nsXBLWindowKeyHandler.cpp:173

|  | [Martijn Wargers (dead)](/user_profile?user_id=55600)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=667512#c1)â€¢ 14 years ago |
|  | |

Hg blame isn't useful at nsFrame.cpp:5598 (as too often the case with hg blame, unfortunately.
I get a regression range between 20101104 and 20110105. I don't have any builds inbetween, atm.
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%3F)
[tracking-firefox8](/buglist.cgi?f1=cf_tracking_firefox8&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%3F)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---),
[regressionwindow-wanted](/buglist.cgi?keywords=regressionwindow-wanted&resolution=---)

|  | [Marcia Knous [:marcia]](/user_profile?user_id=8519) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=667512#c2)â€¢ 14 years ago |
|  | |

I moved the crash stack to the crash signature field - [@ nsIFrame::PeekOffset(nsPeekOffsetStruct\*) ] is the only thing we want in that field.Crash Signature: 0 @0x6c0070
1 xul.dll nsIFrame::PeekOffset layout/generic/nsFrame.cpp:5598
2 xul.dll nsFrameSelection::MoveCaret layout/generic/nsSelection.cpp:1240
3 xul.dll nsFrameSelection::MoveCaret layout/generic/nsSelection.cpp:1105
4 xul.dll contâ€¦ â†’ [@ nsIFrame::PeekOffset(nsPeekOffsetStruct\*) ]

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=667512#c3)â€¢ 14 years ago |
|  | |

WFM:
Mozilla/5.0 (X11; U; Linux i686 (x86\_64); en-US; rv:1.9.2.18) Gecko/20110614 Firefox/3.6.18
Reproduced:
Mozilla/5.0 (X11; Linux x86\_64; rv:5.0.1) Gecko/20100101 Firefox/5.0.1
Mozilla/5.0 (X11; Linux x86\_64; rv:6.0) Gecko/20100101 Firefox/6.0
Mozilla/5.0 (X11; Linux x86\_64; rv:7.0a2) Gecko/20110723 Firefox/7.0a2
Mozilla/5.0 (X11; Linux x86\_64; rv:8.0a1) Gecko/20110723 Firefox/8.0a1
Last good nightly: 2010-11-14
First bad nightly: 2010-11-15
Pushlog:
<http://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=674f2ed15cea&tochange=edf41ff32f08>
Linux crashes:
[bp-90b7715d-9f9b-4710-9953-6634f2110723](https://crash-stats.mozilla.org/report/index/90b7715d-9f9b-4710-9953-6634f2110723)
[bp-3242ba3f-b275-4e8e-b853-267d92110723](https://crash-stats.mozilla.org/report/index/3242ba3f-b275-4e8e-b853-267d92110723)
[bp-76ae7ef4-65cd-49be-965f-262132110723](https://crash-stats.mozilla.org/report/index/76ae7ef4-65cd-49be-965f-262132110723)
[bp-4f371a10-ff90-4fe3-b45e-272562110723](https://crash-stats.mozilla.org/report/index/4f371a10-ff90-4fe3-b45e-272562110723)
[bp-2a1a42d2-3f75-4eee-a51a-c00e02110723](https://crash-stats.mozilla.org/report/index/2a1a42d2-3f75-4eee-a51a-c00e02110723)
[bp-b517a0c1-6d3b-4230-bca5-e63792110723](https://crash-stats.mozilla.org/report/index/b517a0c1-6d3b-4230-bca5-e63792110723)
[bp-321bee19-d34b-40fc-b91d-a7fd02110723](https://crash-stats.mozilla.org/report/index/321bee19-d34b-40fc-b91d-a7fd02110723)
[bp-b46e14a6-a14b-498e-811e-2199e2110723](https://crash-stats.mozilla.org/report/index/b46e14a6-a14b-498e-811e-2199e2110723)
[bp-b61ad8f2-14c2-4c00-ae66-1f7902110723](https://crash-stats.mozilla.org/report/index/b61ad8f2-14c2-4c00-ae66-1f7902110723)
[bp-22806048-4d0e-4994-9938-2566e2110723](https://crash-stats.mozilla.org/report/index/22806048-4d0e-4994-9938-2566e2110723)
[bp-431e64d3-f6e8-4cba-a7f7-723c02110723](https://crash-stats.mozilla.org/report/index/431e64d3-f6e8-4cba-a7f7-723c02110723)Crash Signature: [@ nsIFrame::PeekOffset(nsPeekOffsetStruct\*) ] â†’ [@ nsIFrame::PeekOffset(nsPeekOffsetStruct\*) ]
[@ nsFrameIterator::GetFirstChild ]
[@ nsPlaceholderFrame::GetRealFrameFor ]
[@ libxul.so@0x746c7e ]
[@ libxul.so@0x749682 ]
[@ libxul.so@0x738cae ]
[@ libxul.so@0x73853e ]OS: Windows 7 â†’ AllHardware: x86 â†’ All

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=667512#c4)â€¢ 14 years ago |
|  | |

Please ignore [bp-90b7715d-9f9b-4710-9953-6634f2110723](https://crash-stats.mozilla.org/report/index/90b7715d-9f9b-4710-9953-6634f2110723) (the first Report ID) in [comment 3](/show_bug.cgi?id=667512#c3 "VERIFIED FIXED - Crash [@ nsIFrame::PeekOffset] with removing br and table cell and pressing right arrow key"). It's probably unrelated to this bug.

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=667512#c5)â€¢ 14 years ago |
|  | |

Local track down:
The first bad revision is:
changeset: 57481:54d00e3411ab
user: Ehsan Akhgari <ehsan@mozilla.com>
date: Thu Nov 11 16:40:52 2010 -0500
summary: [Bug 611182](/show_bug.cgi?id=611182 "RESOLVED FIXED - Backspace key does not work without typing something first") - Part 3: Handle dynamic changes to the editable documents and create/remove the bogus node if needed; r=bzbarsky a=blocking-beta8+Blocks: [611182](/show_bug.cgi?id=611182 "RESOLVED FIXED - Backspace key does not work without typing something first")

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667512#a2255419_410947)â€¢ 14 years ago |

Keywords: [regressionwindow-wanted](/buglist.cgi?keywords=regressionwindow-wanted&resolution=---)

|  | [(no longer active)](/user_profile?user_id=251051)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=667512#c6)â€¢ 14 years ago |
|  | |

Hmm, this patch has been backed out, so I don't know how it could cause a crash in current nightlies. I'll take a look though.

|  | [(no longer active)](/user_profile?user_id=251051)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=667512#c7)â€¢ 14 years ago |
|  | |

Attached patch

[Patch (v1)](attachment.cgi?id=548317&action=diff)
â€” [Details](attachment.cgi?id=548317&action=edit)
â€” [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=667512&attachment=548317)

The patch is pretty simple, we should just check to see if we have any visual frames.Assignee: nobody â†’ ehsanStatus: NEW â†’ ASSIGNED
[Attachment #548317](/attachment.cgi?id=548317&action=edit "Patch (v1)") -
Flags: review?(smontagu)

|  | [(no longer active)](/user_profile?user_id=251051)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=667512#c8)â€¢ 14 years ago |
|  | |

Oh, and this is most certainly not a regression from [bug 611182](/show_bug.cgi?id=611182 "RESOLVED FIXED - Backspace key does not work without typing something first")!No longer blocks: [611182](/show_bug.cgi?id=611182 "RESOLVED FIXED - Backspace key does not work without typing something first")Component: Selection â†’ LayoutQA Contact: selection â†’ layout

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667512#a2440790_1689)â€¢ 14 years ago |

Group: core-securityWhiteboard: [sg:critical?]

|  | [(no longer active)](/user_profile?user_id=251051)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=667512#c9)â€¢ 14 years ago |
|  | |

This affects Firefox 4, 5, 6, 7 and 8 (trunk).
We're returning the contents of stack memory as an nsIFrame\*. Which means that a carefully engineered web page can probably trigger this in a way that would be exploitable.
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected)
[status-firefox8](/buglist.cgi?f1=cf_status_firefox8&o1=isnotempty):
--- â†’ [affected](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=affected)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- â†’ [?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=667512#c10)â€¢ 14 years ago |
|  | |

generally assume EXCEPTION\_ACCESS\_VIOLATION\_EXEC is exploitable unless you're 100% sure both 1) an attacker can't influence the address AND 2) there's no way for an attacker to put data at the address.
The fix is deceptively simple. Why did this suddenly appear to break on Nov 14 2010? The only change that seems at all relevant to the testcase is [bug 595758](/show_bug.cgi?id=595758 "RESOLVED FIXED - Crash [@ nsTableFrame::MarkIntrinsicWidthsDirty] on print preview"). That one is guarding against a null-deref and if that path were coming up you'd be crashing due to that bug, not this.Blocks: [595758](/show_bug.cgi?id=595758 "RESOLVED FIXED - Crash [@ nsTableFrame::MarkIntrinsicWidthsDirty] on print preview")
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- â†’ [wontfix](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wontfix)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F) â†’ [-](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=-)
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%3F) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B)
[tracking-firefox8](/buglist.cgi?f1=cf_tracking_firefox8&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%3F) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox8&o1=equals&v1=%2B)

|  | [Thomas Ahlblom](/user_profile?user_id=410947) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=667512#c11)â€¢ 14 years ago |
|  | |

Now I've redone the track down, and once again I hit the same changeset as in [comment 5](/show_bug.cgi?id=667512#c5 "VERIFIED FIXED - Crash [@ nsIFrame::PeekOffset] with removing br and table cell and pressing right arrow key"), so it must have been some kind of local regression. However, I also noticed that I had to press right arrow twice to trigger the crash near the regression.
Anyway, how do I find out if and when a patch has been backed out? (using the hg command or <http://hg.mozilla.org/> ?) It could be interesting to see if we can find a good Nightly after that.

|  | [(no longer active)](/user_profile?user_id=251051)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=667512#c12)â€¢ 14 years ago |
|  | |

(In reply to [comment #10](/show_bug.cgi?id=667512#c10 "VERIFIED FIXED - Crash [@ nsIFrame::PeekOffset] with removing br and table cell and pressing right arrow key"))
> generally assume EXCEPTION\_ACCESS\_VIOLATION\_EXEC is exploitable unless
> you're 100% sure both 1) an attacker can't influence the address AND 2)
> there's no way for an attacker to put data at the address.
>
> The fix is deceptively simple. Why did this suddenly appear to break on Nov
> 14 2010? The only change that seems at all relevant to the testcase is bug
> 595758. That one is guarding against a null-deref and if that path were
> coming up you'd be crashing due to that bug, not this.
Smontagu could say for sure, I don't know this code very well. But it's quite possible that the bug has been there for some time, we just didn't have a testcase for it.
(In reply to [comment #11](/show_bug.cgi?id=667512#c11 "VERIFIED FIXED - Crash [@ nsIFrame::PeekOffset] with removing br and table cell and pressing right arrow key"))
> Anyway, how do I find out if and when a patch has been backed out? (using
> the hg command or <http://hg.mozilla.org/> ?) It could be interesting to see
> if we can find a good Nightly after that.
Your best bet is to look at the bug to see if it has been reopened. hg doesn't give you that information easily...

|  | [(no longer active)](/user_profile?user_id=251051)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=667512#c13)â€¢ 14 years ago |
|  | |

Hmm, this might actually be a regression from [bug 610638](/show_bug.cgi?id=610638 "RESOLVED FIXED - Make \"More Encodings\" submenus (intl.charsetmenu.browser.more{1,2,3,4,5}) non-localizable"). Its patch falls into the regression range, and it touches the guilty functions here: <<http://hg.mozilla.org/mozilla-central/rev/7034c271ebd2>>.Blocks: [610638](/show_bug.cgi?id=610638 "RESOLVED FIXED - Make \"More Encodings\" submenus (intl.charsetmenu.browser.more{1,2,3,4,5}) non-localizable")

|  | [Simon Montagu :smontagu](/user_profile?user_id=11171) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=667512#c14)â€¢ 14 years ago |
|  | |

(In reply to [comment #13](/show_bug.cgi?id=667512#c13 "VERIFIED FIXED - Crash [@ nsIFrame::PeekOffset] with removing br and table cell and pressing right arrow key"))
> Hmm, this might actually be a regression from [bug 610638](/show_bug.cgi?id=610638 "RESOLVED FIXED - Make \"More Encodings\" submenus (intl.charsetmenu.browser.more{1,2,3,4,5}) non-localizable"). Its patch falls
> into the regression range, and it touches the guilty functions here:
> <<http://hg.mozilla.org/mozilla-central/rev/7034c271ebd2>>.
Do you mean that? That patch just makes some prefs localizable.

|  | [Simon Montagu :smontagu](/user_profile?user_id=11171) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=667512#c15)â€¢ 14 years ago |
|  | |

Comment on [attachment 548317](/attachment.cgi?id=548317 "Patch (v1)") [[details]](/attachment.cgi?id=548317&action=edit "Patch (v1)") [[diff]](/attachment.cgi?id=548317&action=diff "Patch (v1)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=667512&attachment=548317)
Patch (v1)
Review of [attachment 548317](/attachment.cgi?id=548317 "Patch (v1)") [[details]](/attachment.cgi?id=548317&action=edit "Patch (v1)") [[diff]](/attachment.cgi?id=548317&action=diff "Patch (v1)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=667512&attachment=548317):
-----------------------------------------------------------------
[Attachment #548317](/attachment.cgi?id=548317&action=edit "Patch (v1)") -
Flags: review?(smontagu) â†’ review+

|  | [(no longer active)](/user_profile?user_id=251051)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=667512#c16)â€¢ 14 years ago |
|  | |

(In reply to [comment #14](/show_bug.cgi?id=667512#c14 "VERIFIED FIXED - Crash [@ nsIFrame::PeekOffset] with removing br and table cell and pressing right arrow key"))
> (In reply to [comment #13](/show_bug.cgi?id=667512#c13 "VERIFIED FIXED - Crash [@ nsIFrame::PeekOffset] with removing br and table cell and pressing right arrow key"))
> > Hmm, this might actually be a regression from [bug 610638](/show_bug.cgi?id=610638 "RESOLVED FIXED - Make \"More Encodings\" submenus (intl.charsetmenu.browser.more{1,2,3,4,5}) non-localizable"). Its patch falls
> > into the regression range, and it touches the guilty functions here:
> > <<http://hg.mozilla.org/mozilla-central/rev/7034c271ebd2>>.
>
> Do you mean that? That patch just makes some prefs localizable.
No, you're right, I think I confused that with another changeset. Honestly, I'm not sure what has regressed this any more...No longer blocks: [610638](/show_bug.cgi?id=610638 "RESOLVED FIXED - Make \"More Encodings\" submenus (intl.charsetmenu.browser.more{1,2,3,4,5}) non-localizable")

|  | [(no longer active)](/user_profile?user_id=251051)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=667512#c17)â€¢ 14 years ago |
|  | |

Landed without the testcase on trunk:
<http://hg.mozilla.org/mozilla-central/rev/029dd90bd20e>Status: ASSIGNED â†’ RESOLVEDClosed: 14 years agoFlags: in-testsuite?Resolution: --- â†’ FIXED

|  | [(no longer active)](/user_profile?user_id=251051)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667512#a2490304_251051)â€¢ 14 years ago |

[Attachment #548317](/attachment.cgi?id=548317&action=edit "Patch (v1)") -
Flags: approval-mozilla-beta?
[Attachment #548317](/attachment.cgi?id=548317&action=edit "Patch (v1)") -
Flags: approval-mozilla-aurora?

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=667512#c18)â€¢ 14 years ago |
|  | |

Comment on [attachment 548317](/attachment.cgi?id=548317 "Patch (v1)") [[details]](/attachment.cgi?id=548317&action=edit "Patch (v1)") [[diff]](/attachment.cgi?id=548317&action=diff "Patch (v1)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=667512&attachment=548317)
Patch (v1)
Approved for mozilla-beta and mozilla-aurora. Please land asap.
[Attachment #548317](/attachment.cgi?id=548317&action=edit "Patch (v1)") -
Flags: approval-mozilla-beta?
[Attachment #548317](/attachment.cgi?id=548317&action=edit "Patch (v1)") -
Flags: approval-mozilla-beta+
[Attachment #548317](/attachment.cgi?id=548317&action=edit "Patch (v1)") -
Flags: approval-mozilla-aurora?
[Attachment #548317](/attachment.cgi?id=548317&action=edit "Patch (v1)") -
Flags: approval-mozilla-aurora+

|  | [(no longer active)](/user_profile?user_id=251051)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=667512#c19)â€¢ 14 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-aurora/rev/97f7fcf40ee9>
<http://hg.mozilla.org/releases/mozilla-beta/rev/e9324b64603b>
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed)
[status-firefox8](/buglist.cgi?f1=cf_status_firefox8&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=affected) â†’ [fixed](/buglist.cgi?f1=cf_status_firefox8&o1=equals&v1=fixed)

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667512#a3202017_482154)â€¢ 13 years ago |

[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F) â†’ [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667512#a3646344_1689)â€¢ 13 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- â†’ [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=667512#c20)â€¢ 13 years ago |
|  | |

qa+ for verification on Firefox 7Whiteboard: [sg:critical?] â†’ [sg:critical?][qa+]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=667512#c21)â€¢ 13 years ago |
|  | |

Crash does not reproduce in Firefox 6.0.2 or 7 on OS X or Windows 7.

|  | [u279076](/user_profile?user_id=279076) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=667512#c22)â€¢ 13 years ago |
|  | |

Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0) Gecko/20100101 Firefox/7.0 ID:20110922153450
Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0a2) Gecko/20110926 Firefox/8.0a2 ID:20110926042011
Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:7.0) Gecko/20100101 Firefox/7.0 ID:20110922153450
Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:8.0a2) Gecko/20110926 Firefox/8.0a2 ID:20110926042011
Mozilla/5.0 (X11; Linux x86\_64; rv:7.0) Gecko/20100101 Firefox/7.0 ID:20110922153450
Mozilla/5.0 (X11; Linux x86\_64; rv:8.0a2) Gecko/20110926 Firefox/8.0a2 ID:20110926042011
Verified fixed using the attached testcase.Status: RESOLVED â†’ VERIFIEDKeywords: [verified-aurora](/buglist.cgi?keywords=verified-aurora&resolution=---),
[verified-beta](/buglist.cgi?keywords=verified-beta&resolution=---)Whiteboard: [sg:critical?][qa+] â†’ [sg:critical?][qa!]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=667512#a12129909_1689)â€¢ 13 years ago |

Group: core-security

|  | [(no longer active)](/user_profile?user_id=251051)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=667512#c23)â€¢ 13 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/f7f8058b2b21>Flags: in-testsuite? â†’ in-testsuite+

|  | [Ed Morley [:emorley]](/user_profile?user_id=373476) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=667512#c24)â€¢ 13 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/f7f8058b2b21>Target Milestone: --- â†’ mozilla8
You need to [log in](/show_bug.cgi?id=667512&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top â†‘

## Attachment

Hide Details

### General

Creator:  [Martijn Wargers (dead)](/user_profile?user_id=55600)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


