=== Content from www.mandriva.com_214fa870_20250124_234827.html ===


* [Tuxedo.org](https://tuxedo.org/ "Go to: Tuxedo")
* Store
* Mandriva Linux
* Enterprise Solutions
* Contact Us
* Language ![](/sites/all/themes/mandriva_customer/images/arrow-grey-bottom.gif)
  + English (International)
  + Français
  + Ð ÑÑÑÐºÐ¸Ð¹

# [Mandriva](/mandriva/)

* Download
* Mandriva Linux
* Community
* Help

## One

### The Linux desktopthat's easy to try and easy to keep

Download
![Mandriva One](/sites/all/themes/mandriva_customer/images/front/packshot_Mandriva_One.png)

## Powerpack

### Mandriva Linux- and more

Download
![Mandriva Linux Powerpack](/sites/all/themes/mandriva_customer/images/front/en-49.png)

## Mandriva Flash

### The mobile and installable Linux desktopon a USB key

Buy on Store
![Mandriva Flash](/sites/all/themes/mandriva_customer/images/front/mandriva-flash2.png)

### [Community](community)

* User Forums
* Support - FAQ
* Free Software
* Become a member

### Enterprise Solutions

* Enterprise Linux Products
* Asset Management Solution
* Professional Services
* Support & Maintenance

* Go to site »

### Mandriva Partners

* Worldwide offices
* Partner Program
* Technology Partners
* OEM
* Classmate PC with Mandriva Linux

### News

* Mandriva presents the launch of its new mobile desktop: Mandriva Flash 2008 Spring
* Speaking about Mandriva Linux 2008 Spring in media
* Speaking about Mandriva Linux 2008 Spring in media
* Mandriva presents its latest distribution: Mandriva Linux 2008 Spring
* Mandriva and Novatice Technologies present Edutice, The ready to use solution dedicated to educationand multimedia spaces
* # [Top 50 Online Casinos UK in 2023](https://montycasinos.com/online-casinos/)

more

* Download
  + Mandriva Linux 2008
  + Writing an ISO image
* Mandriva Linux
  + One
  + Powerpack
  + Mandriva Flash
* Community
  + Start
  + Register
  + Stay informed
  + Participate
  + Free software
* Help
  + Getting help
  + Knowledge Base
  + Documentation
  + Forums
  + Support Requests
  + Customer Care
  + Enterprise Support
* Enterprise Solutions
  + Products
  + Support
  + Services
  + Partners
  + Go to site »

Language
English (International)
Français
Ð ÑÑÑÐºÐ¸Ð¹

* © 2007 Mandriva S.A.
* About Us
* Legal Information
* Privacy Policy
* Contact Us



=== Content from www.redhat.com_6165516d_20250126_043453.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_edd51101_20250126_043453.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.mozilla.org_4e3e50ed_20250124_234841.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/648705)
* [XML](/show_bug.cgi?ctype=xml&id=648705)

Closed
[Bug 648705](/show_bug.cgi?id=648705)

Opened 14 years ago
Closed 14 years ago

# Possible security sensitive crash [@ mozilla::WebGLProgram::DetachShaders() ]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Possible security sensitive crash [@ mozilla::WebGLProgram::DetachShaders() ]

## Categories

### (Core :: Graphics: CanvasWebGL, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Graphics%3A%20CanvasWebGL#Graphics%3A%20CanvasWebGL)

Graphics: CanvasWebGL
▾

Core :: Graphics: CanvasWebGL
Bugs with the WebGL Canvas Context.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20CanvasWebGL&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20CanvasWebGL&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Graphics%3A%20CanvasWebGL)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Windows 7

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed) |
| blocking2.0 | --- | [-](/buglist.cgi?f1=cf_blocking_20&o1=equals&v1=-) |
| status2.0 | --- | [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | + | fixed |
| blocking2.0 |  | - |
| status2.0 |  | wanted |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: bas.schouten, Assigned: posidron)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/9e7272cd8191f064be3b2b7dcd6a8903?d=mm&size=40)  [posidron](/user_profile?user_id=368570)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b8738cf17a8d158995d4d60a2490853f?d=mm&size=40)  [bas.schouten](/user_profile?user_id=272464)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/ca6a57abf052ac63d917d5dae1cc0f00?d=mm&size=40)  [jgilbert](/user_profile?user_id=419431)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

### ( [URL](https://crash-stats.mozilla.com/report/index/9c8aa158-10e3-418b-9272-cb3632110408 "https://crash-stats.mozilla.com/report/index/9c8aa158-10e3-418b-9272-cb3632110408") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[crash-stats.mozilla.com/report/index/...](https://crash-stats.mozilla.com/report/index/9c8aa158-10e3-418b-9272-cb3632110408 "https://crash-stats.mozilla.com/report/index/9c8aa158-10e3-418b-9272-cb3632110408")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Whiteboard: [sg:critical?])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [fix dangling pointers by making them nsRefPtrs](/attachment.cgi?id=530639)  [14 years ago](#c11)  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)   2.58 KB, patch | joe : [review+](#a2383789_94 "14 years ago")  asa : [approval-mozilla-aurora+](#a2819412_5003 "14 years ago")  dveditz : [approval2.0+](#c21 "14 years ago") | [Details](/attachment.cgi?id=530639&action=edit) | [Diff](/attachment.cgi?id=530639&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648705&attachment=530639) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Bas Schouten (:bas.schouten)](/user_profile?user_id=272464)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=648705#c0)• 14 years ago |
|  | |

When playing with possible infinite loop shaders I hit a crash that appears like it might be dangerous:
Crash Reason EXCEPTION\_ACCESS\_VIOLATION\_WRITE
Crash Address 0x253e70fc
0 xul.dll mozilla::WebGLProgram::DetachShaders content/canvas/src/WebGLContext.h:1313
1 xul.dll mozilla::WebGLContext::UseProgram content/canvas/src/WebGLContextGL.cpp:3573
2 xul.dll nsIDOMWebGLRenderingContext\_UseProgram obj-firefox/js/src/xpconnect/src/dom\_quickstubs.cpp:31987
3 @0x47ef8b
4 mozjs.dll CheckStackAndEnterMethodJIT js/src/methodjit/MethodJIT.cpp:778
5 mozjs.dll js::mjit::JaegerShot js/src/methodjit/MethodJIT.cpp:802
6 mozjs.dll js::RunScript js/src/jsinterp.cpp:646
7 mozjs.dll js::Invoke js/src/jsinterp.cpp:740
8 mozjs.dll js::ExternalInvoke js/src/jsinterp.cpp:863
9 mozjs.dll JS\_CallFunctionValue js/src/jsapi.cpp:5173
10 xul.dll nsJSContext::CallEventHandler dom/base/nsJSEnvironment.cpp:1914
11 xul.dll nsGlobalWindow::RunTimeout dom/base/nsGlobalWindow.cpp:9107
12 xul.dll nsGlobalWindow::TimerCallback dom/base/nsGlobalWindow.cpp:9452
13 xul.dll nsTimerImpl::Fire xpcom/threads/nsTimerImpl.cpp:425
14 xul.dll nsTimerEvent::Run xpcom/threads/nsTimerImpl.cpp:517
15 xul.dll nsThread::ProcessNextEvent xpcom/threads/nsThread.cpp:633
16 xul.dll mozilla::ipc::MessagePump::Run ipc/glue/MessagePump.cpp:134
17 xul.dll xul.dll@0xb367c7
18 xul.dll MessageLoop::RunInternal ipc/chromium/src/base/message\_loop.cc:219
19 xul.dll MessageLoop::RunHandler ipc/chromium/src/base/message\_loop.cc:202
20 mozcrt19.dll \_VEC\_memzero
21 xul.dll xul.dll@0x35d7cd
22 firefox.exe firefox.exe@0x1bb7
23 ntdll.dll WinSqmSetIfMaxDWORD
24 ntdll.dll \_RtlUserThreadStart
25 firefox.exe firefox.exe@0x186f
26 firefox.exe firefox.exe@0x186f
1311 void DetachShaders() {
1312 for (PRUint32 i = 0; i < mAttachedShaders.Length(); ++i) {
1313 mAttachedShaders[i]->DecrementAttachCount();
1314 }
1315 mAttachedShaders.Clear();
1316 }

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=648705#c1)• 14 years ago |
|  | |

I can see this bug, but can't see any of the comments. Do I need more permissions?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=648705#c2)• 14 years ago |
|  | |

No, we just need to un-double-hide the initial description: done.Whiteboard: [sg:critical?]

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=648705#c3)• 14 years ago |
|  | |

Bas, when you can reproduce this bug, can you print the values of:
i
mAttachedShaders.Length()
Also, a test-case would greatly help.

|  | [Bas Schouten (:bas.schouten)](/user_profile?user_id=272464)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=648705#c4)• 14 years ago |
|  | |

(In reply to [comment #3](/show_bug.cgi?id=648705#c3 "RESOLVED FIXED - Possible security sensitive crash [@ mozilla::WebGLProgram::DetachShaders() ]"))
> Bas, when you can reproduce this bug, can you print the values of:
> i
> mAttachedShaders.Length()
>
> Also, a test-case would greatly help.
What I was doing was playing around with for (float i = 0.0; i < a; i += 1.0);
Where I was varying the output colors and 'a' between 10 and 100000.
On the ShaderToy site.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=648705#c5)• 14 years ago |
|  | |

@ Christoph: could you please try to find a test-case for this, based on the description given in [comment 4](/show_bug.cgi?id=648705#c4 "RESOLVED FIXED - Possible security sensitive crash [@ mozilla::WebGLProgram::DetachShaders() ]")?

|  | [Christoph Diehl [:posidron]](/user_profile?user_id=368570)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=648705#c6)• 14 years ago |
|  | |

Of course.

|  | [Joe Drew (not getting mail)](/user_profile?user_id=94) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=648705#c7)• 14 years ago |
|  | |

Over to Christoph to get a testcase.Assignee: nobody → christoph.diehl

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=648705#c8)• 14 years ago |
|  | |

The crash location
void DetachShaders() {
for (PRUint32 i = 0; i < mAttachedShaders.Length(); ++i) {
mAttachedShaders[i]->DecrementAttachCount();
}
mAttachedShaders.Clear();
}
and the fact that it's an invalid write at a random address means that the mAttachedShaders[i] pointer is stale.
This is a plain pointer, not a refptr, so one can be tempted to replace that by a refptr, but I don't understand how this pointer can have gone stale, as the WebGLContext keeps refptrs to all the shaders. As long as the WebGLContext is live, all shaders should be, and therefore pointers to them should stay valid.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=648705#c9)• 14 years ago |
|  | |

Ah, WebGLContext::DeleteShader() causes the reference count to be decremented, so it's conceivable that calling UseProgram() after DeleteShader() would crash in this way. For this reason I think that we should let WebGLProgram store refptrs instead of plain ptrs to the attached shaders.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=648705#c10)• 14 years ago |
|  | |

Some people have written to us about their intention to release a blog post about a WebGL security flaw we allegedly have on Monday, without giving us any usable information to start fixing it.
In anticipation of that, I will implement [comment 9](/show_bug.cgi?id=648705#c9 "RESOLVED FIXED - Possible security sensitive crash [@ mozilla::WebGLProgram::DetachShaders() ]").

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=648705#c11)• 14 years ago |
|  | |

Attached patch

[fix dangling pointers by making them nsRefPtrs](attachment.cgi?id=530639&action=diff)
— [Details](attachment.cgi?id=530639&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648705&attachment=530639)

This should fix it --- although I can't be sure, as I have yet to find a test case for this bug.
I tried first using WebGLObjectRefPtr, but got assertions (pasted below) so used nsRefPtr instead, as that's really just what I want:
#0 0x00007fe5c58db78d in nanosleep () at ../sysdeps/unix/syscall-template.S:82
#1 0x00007fe5c58db600 in \_\_sleep (seconds=<value optimized out>)
at ../sysdeps/unix/sysv/linux/sleep.c:138
#2 0x00007fe5c7713e40 in ah\_crap\_handler (signum=11)
at /home/bjacob/mozilla-central/toolkit/xre/nsSigHandlers.cpp:119
#3 0x00007fe5c77193e7 in nsProfileLock::FatalSignalHandler (signo=11, info=0x7fff8c63c2f0,
context=0x7fff8c63c1c0) at /home/bjacob/build/firefox/toolkit/profile/nsProfileLock.cpp:226
#4 <signal handler called>
#5 0x00007fe5c7e6096b in mozilla::WebGLObjectBaseRefPtr::Zero (this=0x282bb30)
at /home/bjacob/mozilla-central/content/canvas/src/WebGLContext.h:121
#6 0x00007fe5c7e60c35 in mozilla::WebGLZeroingObject::ZeroOwners (this=0x2adaed8)
at /home/bjacob/mozilla-central/content/canvas/src/WebGLContext.h:605
#7 0x00007fe5c7e60db5 in mozilla::WebGLShader::Delete (this=0x2adaed0)
at /home/bjacob/mozilla-central/content/canvas/src/WebGLContext.h:1236
#8 0x00007fe5c7e6826e in mozilla::WebGLContext::DeleteShader (this=0x7fe5985185c0,
sobj=0x2adaed0) at /home/bjacob/mozilla-central/content/canvas/src/WebGLContextGL.cpp:1037
#9 0x00007fe5c87149ed in nsIDOMWebGLRenderingContext\_DeleteShader (cx=0x2b5cd20, argc=1,
vp=0x7fe5b56ed248) at /home/bjacob/build/firefox/js/src/xpconnect/src/dom\_quickstubs.cpp:29672
#10 0x00007fe5c92ed564 in js::CallJSNative (cx=0x2b5cd20,
native=0x7fe5c871489b <nsIDOMWebGLRenderingContext\_DeleteShader>, argc=1, vp=0x7fe5b56ed248)
at /home/bjacob/mozilla-central/js/src/jscntxtinlines.h:277
#11 0x00007fe5c954a972 in js::Interpret (cx=0x2b5cd20, entryFrame=0x7fe5b56ed048,
inlineCallCount=2, interpMode=js::JSINTERP\_NORMAL)
at /home/bjacob/mozilla-central/js/src/jsinterp.cpp:4664
[Attachment #530639](/attachment.cgi?id=530639&action=edit "fix dangling pointers by making them nsRefPtrs") -
Flags: review?(joe)

|  | [Joe Drew (not getting mail)](/user_profile?user_id=94) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648705#a2383789_94)• 14 years ago |

[Attachment #530639](/attachment.cgi?id=530639&action=edit "fix dangling pointers by making them nsRefPtrs") -
Flags: review?(joe) → review+

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=648705#c12)• 14 years ago |
|  | |

<http://hg.mozilla.org/mozilla-central/rev/f65a3762c7de>
With that in, I really don't think that this bug could still happen; but without anyone being able to reproduce this bug, I don't know if/how I can close it.
Should this be a WORKSFORME?

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648705#a2389049_382769)• 14 years ago |

Status: NEW → RESOLVEDClosed: 14 years agoResolution: --- → WORKSFORME

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=648705#c13)• 14 years ago |
|  | |

OK, I'm feeling confident enough to mark this fixed. Reopen if needed.Resolution: WORKSFORME → FIXED

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=648705#c14)• 14 years ago |
|  | |

Does this impact Firefox 5 (aurora)? Should we consider taking the fix there?
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F)

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=648705#c15)• 14 years ago |
|  | |

I would say that's a good idea. Also in Firefox 4 if there will be another release of it.
Just wait until TBPL shows a green mochitest-1, to be sure.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=648705#c16)• 14 years ago |
|  | |

To be clear: yes, this impacts Firefox 4 and 5 in exactly the same way.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=648705#c17)• 14 years ago |
|  | |

It's green on TBPL. Recommend backporting this to Firefox 4 and 5. Changeset link:
<http://hg.mozilla.org/mozilla-central/rev/f65a3762c7de>

|  | [Joe Drew (not getting mail)](/user_profile?user_id=94) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648705#a2393327_94)• 14 years ago |

[Attachment #530639](/attachment.cgi?id=530639&action=edit "fix dangling pointers by making them nsRefPtrs") -
Flags: approval2.0?
[Attachment #530639](/attachment.cgi?id=530639&action=edit "fix dangling pointers by making them nsRefPtrs") -
Flags: approval-mozilla-aurora?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648705#a2399964_1689)• 14 years ago |

blocking2.0: --- → -
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- → [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B)

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648705#a2819412_5003)• 14 years ago |

[Attachment #530639](/attachment.cgi?id=530639&action=edit "fix dangling pointers by making them nsRefPtrs") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [JP Rosevear [:jpr]](/user_profile?user_id=407310) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=648705#c18)• 14 years ago |
|  | |

Please land for Aurora by Monday May 16 or the approval will potentially be lost. Please mark as status-firefox5 fixed when you do.

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=648705#c19)• 14 years ago |
|  | |

Please land this on releases/mozilla-aurora TODAY or approval will be rescinded.

|  | [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=648705#c20)• 14 years ago |
|  | |

Landed on mozilla-aurora:
<http://hg.mozilla.org/mozilla-aurora/rev/f8b08657dfea>

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648705#a3260251_5003)• 14 years ago |

[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=648705#c21)• 14 years ago |
|  | |

Comment on [attachment 530639](/attachment.cgi?id=530639 "fix dangling pointers by making them nsRefPtrs") [[details]](/attachment.cgi?id=530639&action=edit "fix dangling pointers by making them nsRefPtrs") [[diff]](/attachment.cgi?id=530639&action=diff "fix dangling pointers by making them nsRefPtrs") [[review]](/page.cgi?id=splinter.html&ignore=&bug=648705&attachment=530639)
fix dangling pointers by making them nsRefPtrs
Approved for the mozilla2.0 repository, a=dveditz for release-drivers if Cameron needs this for TenFourFox (although that may not support WebGL).
When landed please add a link to the changeset and flip the status2.0 field to ".x-fixed". If you don't need this on the 2.0 branch please unset the approval requests so we don't have an unfixed approval to track in bug triage.
[Attachment #530639](/attachment.cgi?id=530639&action=edit "fix dangling pointers by making them nsRefPtrs") -
Flags: approval2.0? → approval2.0+

|  | [Cameron Kaiser [:spectre]](/user_profile?user_id=101070) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=648705#c22)• 14 years ago |
|  | |

It doesn't, but I certainly wouldn't mind it landed just in case. Thanks very much!

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648705#a8164273_1689)• 14 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=648705&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Benoit Jacob [:bjacob] (mostly away)](/user_profile?user_id=382769)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_7039f27d_20250126_043448.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Sat Jan 25 2025 20:34:48 PST

* **Bug ID:**
  648705,
  643927,
  654015,
  653238,
  653026,
  652401,
  643839,
  597162,
  648022

---

| [ID](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&order=bug_id%20DESC&query_based_on=) | [Type](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&order=bug_type%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Summary](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&order=short_desc%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Product](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&order=product%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Comp](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&order=component%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Assignee▲](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&order=assigned_to%20DESC%2Cbug_status%2Cpriority%2Cbug_id&query_based_on=) | [Status▲](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&order=bug_status%20DESC%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Resolution](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&order=resolution%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Updated](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&order=changeddate%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [652401](/show_bug.cgi?id=652401 "RESOLVED FIXED - Push cx to stack before calling mozRequestAnimationFrame callbacks") |  | [Push cx to stack before calling mozRequestAnimationFrame callbacks](/show_bug.cgi?id=652401) | Core | Layout | bzbarsky | RESO | FIXE | 2012-06-08 |
| [643839](/show_bug.cgi?id=643839 "RESOLVED FIXED - Crash [@ js::gc::MarkChildren]") |  | [Crash [@ js::gc::MarkChildren]](/show_bug.cgi?id=643839) | Core | JavaScript Engine | bhackett1024 | RESO | FIXE | 2013-03-13 |
| [653026](/show_bug.cgi?id=653026 "RESOLVED FIXED - GC hazard with NoSuchMethod") |  | [GC hazard with NoSuchMethod](/show_bug.cgi?id=653026) | Core | JavaScript Engine | bill.mccloskey | RESO | FIXE | 2011-08-12 |
| [648705](/show_bug.cgi?id=648705 "RESOLVED FIXED - Possible security sensitive crash [@ mozilla::WebGLProgram::DetachShaders() ]") |  | [Possible security sensitive crash [@ mozilla::WebGLProgram::DetachShaders() ]](/show_bug.cgi?id=648705) | Core | Graphics: CanvasWebG | cdiehl | RESO | FIXE | 2011-07-12 |
| [653238](/show_bug.cgi?id=653238 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious") |  | [nsSMILAnimationController::mDocument is suspicious](/show_bug.cgi?id=653238) | Core | SVG | dholbert | RESO | FIXE | 2013-12-27 |
| [654015](/show_bug.cgi?id=654015 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"") |  | ["ASSERTION: Requesting refresh driver after document has disconnected"](/show_bug.cgi?id=654015) | Core | SVG | dholbert | RESO | FIXE | 2011-08-03 |
| [597162](/show_bug.cgi?id=597162 "RESOLVED FIXED - potential arbitrary code execution when type=content chrome frames web content") |  | [potential arbitrary code execution when type=content chrome frames web content](/show_bug.cgi?id=597162) | Core | Security | mrbkap | RESO | FIXE | 2013-12-27 |
| [643927](/show_bug.cgi?id=643927 "RESOLVED FIXED - GC hazard in JS_XDRScriptObject") |  | [GC hazard in JS\_XDRScriptObject](/show_bug.cgi?id=643927) | Core | JavaScript Engine | mwu.code | RESO | FIXE | 2011-07-12 |
| [648022](/show_bug.cgi?id=648022 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]") |  | [Firefox 4.2a1pre Crash Report [@ js\_XDRScript(JSXDRState\*, JSScript\*\*) ] [@ js\_XDRAtom ] [@ js\_XDRScriptAndSubscripts(JSXDRState\*, JSScript\*\*) ]](/show_bug.cgi?id=648022) | Core | JavaScript Engine | mwu.code | RESO | FIXE | 2015-10-07 |

9 bugs found.

|  |  | [REST](/rest/bug?include_fields=id,summary,status&bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022 "Query as a REST API request") | [CSV](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&ctype=csv&human=1) | [Feed](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&title=Bug%20List&ctype=atom) | [iCalendar](/buglist.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&ctype=ics)  [Change Columns](/colchange.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced&query_based_on=) | [Edit Search](/query.cgi?bug_id=648705%2C643927%2C654015%2C653238%2C653026%2C652401%2C643839%2C597162%2C648022&query_format=advanced) |  | as |
| --- | --- | --- | --- | --- | --- |

[File
a new bug
in the "Core" product](/enter_bug.cgi?product=Core)



=== Content from bugzilla.mozilla.org_5717283e_20250124_234836.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/643927)
* [XML](/show_bug.cgi?ctype=xml&id=643927)

Closed
[Bug 643927](/show_bug.cgi?id=643927)

Opened 14 years ago
Closed 14 years ago

# GC hazard in JS\_XDRScriptObject

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

GC hazard in JS\_XDRScriptObject

## Categories

### (Core :: JavaScript Engine, enhancement)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

enhancement

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla5

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed) |
| status2.0 | --- | [unaffected](/buglist.cgi?f1=cf_status_20&o1=equals&v1=unaffected) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 |  | fixed |
| status2.0 |  | unaffected |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: igor, Assigned: mwu)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/078be4e327f31b60d8240979565af85f?d=mm&size=40)  [mwu](/user_profile?user_id=246518)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/78556976aa7c7e7980d6865f27df11b8?d=mm&size=40)  [igor](/user_profile?user_id=50763)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

5 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[632253](/show_bug.cgi?id=632253 "RESOLVED FIXED - Avoid redundant serialization of script filename")

Dependency [tree](/showdependencytree.cgi?id=643927&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=643927)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: regression, Whiteboard: [sg:critical?])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[regression](/buglist.cgi?keywords=regression&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [Fix](/attachment.cgi?id=521327)  [14 years ago](#c5)  [Michael Wu [:mwu]](/user_profile?user_id=246518)   8.97 KB, patch | igor : [review+](#c6 "14 years ago") | [Details](/attachment.cgi?id=521327&action=edit) | [Diff](/attachment.cgi?id=521327&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=643927&attachment=521327) |
| --- | --- | --- |
| [Use guard object](/attachment.cgi?id=521638)  [14 years ago](#c10)  [Michael Wu [:mwu]](/user_profile?user_id=246518)   775 bytes, patch | Waldo : [review+](#a171973_83595 "14 years ago") | [Details](/attachment.cgi?id=521638&action=edit) | [Diff](/attachment.cgi?id=521638&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=643927&attachment=521638) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Igor Bukanov](/user_profile?user_id=50763)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=643927#c0)• 14 years ago |
|  | |

When reviewing the patch for the [bug 632253](/show_bug.cgi?id=632253 "RESOLVED FIXED - Avoid redundant serialization of script filename") I have missed that JSScript::filename is only rooted by JSScript. So the result of js\_SaveScriptFilename must be stored in the rooted script instance before a GC can happen. Yet I have suggested to decode the filename before any script instance id created.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=643927#c1)• 14 years ago |
|  | |

What do you want to do here? I could move the js\_SaveScriptFilename call back to js\_XDRScriptAndSubscripts. Would be a bit ugly.

|  | [Igor Bukanov](/user_profile?user_id=50763)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=643927#c2)• 14 years ago |
|  | |

(In reply to [comment #1](/show_bug.cgi?id=643927#c1 "RESOLVED FIXED - GC hazard in JS_XDRScriptObject"))
> What do you want to do here? I could move the js\_SaveScriptFilename call back
> to js\_XDRScriptAndSubscripts. Would be a bit ugly.
A better solution would be to add a class like XDRScriptState that would contain script-related serializations state and explicitly pass it to any function that needs global script state instead of adding more fields to JSXDRState. This way we could remove the hacks to temporary set xdr->atoms etc. when serializing the script. The class can have a flag like filenameDone to write/read the filename on the first occurrence when JSScript is available. js\_CloenScript can set that flag to avoid useless serialization.

|  | [Igor Bukanov](/user_profile?user_id=50763)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=643927#c3)• 14 years ago |
|  | |

Michael: do you have time to implement this today-tomorrow? I need something that I described in the [comment 2](/show_bug.cgi?id=643927#c2 "RESOLVED FIXED - GC hazard in JS_XDRScriptObject") to fix the [bug 643967](/show_bug.cgi?id=643967 "VERIFIED FIXED - js_CloneScript does not preserve principals for nested functions").

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=643927#c4)• 14 years ago |
|  | |

I'll see what I can do.Assignee: general → mwu

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=643927#c5)• 14 years ago |
|  | |

Attached patch

[Fix](attachment.cgi?id=521327&action=diff)
— [Details](attachment.cgi?id=521327&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=643927&attachment=521327)

Not sure how I feel about this approach, but I did fix an error path memory leak in js\_CloneScript along the way.
[Attachment #521327](/attachment.cgi?id=521327&action=edit "Fix") -
Flags: review?(igor)

|  | [Igor Bukanov](/user_profile?user_id=50763)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=643927#c6)• 14 years ago |
|  | |

Comment on [attachment 521327](/attachment.cgi?id=521327 "Fix") [[details]](/attachment.cgi?id=521327&action=edit "Fix") [[diff]](/attachment.cgi?id=521327&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=643927&attachment=521327)
Fix
>@@ -348,6 +327,9 @@ js\_XDRScriptAndSubscripts(JSXDRState \*xd
> JSScript \*script = \*scriptp;
> nsrcnotes = ntrynotes = natoms = nobjects = nregexps = nconsts = 0;
> jssrcnote \*notes = NULL;
>+ XDRScriptState \*state = xdr->state;
>+
>+ JS\_ASSERT(xdr->state);
Nit: JS\_ASSERT(state)
>@@ -618,10 +600,20 @@ js\_XDRScriptAndSubscripts(JSXDRState \*xd
>+class JSXDRStateHolder {
Thanks for creating the class - it is long overdue.
Nit: rename this into AutoJSXDRState to follow the SM naming convention for such classes.
>+public:
>+ JSXDRStateHolder(JSXDRState \*x) : xdr(x) {}
>+ ~JSXDRStateHolder() {
>+ JS\_XDRDestroy(xdr);
>+ }
>+
>+ operator JSXDRState\*() const {
>+ return xdr;
>+ }
>+
>+private:
>+ JSXDRState \*xdr;
Nit: make this JSXDRState \*const xdr;
>@@ -1967,48 +1974,42 @@ js\_CloneScript(JSContext \*cx, JSScript \*
>
> // Hand p off from w to r. Don't want them to share the data
> // mem, lest they both try to free it in JS\_XDRDestroy
> JS\_XDRMemSetData(r, p, nbytes);
> JS\_XDRMemSetData(w, NULL, 0);
>
>- r->filename = script->filename;
>+ XDRScriptState rstate(r);
>+ rstate.filename = script->filename;
>+ rstate.filenameSaved = true;
>diff --git a/js/src/jsxdrapi.h b/js/src/jsxdrapi.h
>--- a/js/src/jsxdrapi.h
>+++ b/js/src/jsxdrapi.h
>@@ -112,6 +112,8 @@ typedef struct JSXDROps {
> typedef js::Vector<JSAtom \*, 1, js::SystemAllocPolicy> XDRAtoms;
> typedef js::HashMap<JSAtom \*, uint32, js::DefaultHasher<JSAtom \*>, js::SystemAllocPolicy> XDRAtomsHashMap;
>
>+class XDRScriptState;
Nit: put the class into the js namespace.
[Attachment #521327](/attachment.cgi?id=521327&action=edit "Fix") -
Flags: review?(igor) → review+

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=643927#c7)• 14 years ago |
|  | |

<http://hg.mozilla.org/tracemonkey/rev/4484468a829b>Whiteboard: fixed-in-tracemonkey

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=643927#c8)• 14 years ago |
|  | |

Follow fix to fix bustage on debug builds: <http://hg.mozilla.org/tracemonkey/rev/c6388fb2d7be>
I'll remember to do a debug build next time..

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643927#a169453_1689)• 14 years ago |

Whiteboard: fixed-in-tracemonkey → [sg:critical?]

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=643927#c9)• 14 years ago |
|  | |

Auto classes should use the parameter macros that make sure the auto-helper can't be temporary-initialized. See jscntxt.h and the Auto\* classes in it for examples.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=643927#c10)• 14 years ago |
|  | |

Attached patch

[Use guard object](attachment.cgi?id=521638&action=diff)
— [Details](attachment.cgi?id=521638&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=643927&attachment=521638)

It doesn't matter a lot in this case since this is meant to be used as a smart pointer. However, in the rare case that someone tries to use this as a holder instead of a smart pointer, this will help.
[Attachment #521638](/attachment.cgi?id=521638&action=edit "Use guard object") -
Flags: review?

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643927#a171901_246518)• 14 years ago |

[Attachment #521638](/attachment.cgi?id=521638&action=edit "Use guard object") -
Flags: review? → review?(jwalden+bmo)

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643927#a171973_83595)• 14 years ago |

[Attachment #521638](/attachment.cgi?id=521638&action=edit "Use guard object") -
Flags: review?(jwalden+bmo) → review+

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=643927#c11)• 14 years ago |
|  | |

<http://hg.mozilla.org/tracemonkey/rev/3279d69de777> for the guard-macro followup

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=643927#c12)• 14 years ago |
|  | |

<http://hg.mozilla.org/mozilla-central/rev/4484468a829b>
<http://hg.mozilla.org/mozilla-central/rev/c6388fb2d7be>
<http://hg.mozilla.org/mozilla-central/rev/3279d69de777>Status: NEW → RESOLVEDClosed: 14 years agoResolution: --- → FIXED

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643927#a4938487_1689)• 14 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_20&o1=equals&v1=unaffected)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)Target Milestone: --- → mozilla5

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643927#a9653407_1689)• 14 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=643927&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Michael Wu [:mwu]](/user_profile?user_id=246518)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_f4d677c5_20250124_234846.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/653238)
* [XML](/show_bug.cgi?ctype=xml&id=653238)

Closed
[Bug 653238](/show_bug.cgi?id=653238)

Opened 14 years ago
Closed 14 years ago

# nsSMILAnimationController::mDocument is suspicious

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

nsSMILAnimationController::mDocument is suspicious

## Categories

### (Core :: SVG, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=SVG#SVG)

SVG
▾

Core :: SVG

Issues with the layout or rendering of SVG content and interacting with the SVG DOM.

Example bugs:

* SVG marker can not be clipped with clip-path
* x position adjustments of SVG vertical text on a path moves in the wrong direction

Specifications covered:

* SVG

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=SVG&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=SVG&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=SVG)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed) |
| firefox6 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| blocking2.0 | --- | [-](/buglist.cgi?f1=cf_blocking_20&o1=equals&v1=-) |
| status2.0 | --- | [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | + | fixed |
| firefox6 |  | fixed |
| blocking2.0 |  | - |
| status2.0 |  | wanted |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: smaug, Assigned: dholbert)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/cd9b85b2e112bd7941b21ad03f42604e?d=mm&size=40)  [dholbert](/user_profile?user_id=278074)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/056757eff6ed7c8ec26f61e3bf7695fe?d=mm&size=40)  [smaug](/user_profile?user_id=39966)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jwatt](/user_profile?user_id=32767)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

5 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[653270](/show_bug.cgi?id=653270 "RESOLVED FIXED - simplify nsSMILAnimationController construction"), [654015](/show_bug.cgi?id=654015 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=653238&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=653238)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Whiteboard: [sg:critical?])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [dholbert](/user_profile?user_id=278074) | [in-testsuite](#c13 "14 years ago") | - |
| --- | --- | --- |
| [dholbert](/user_profile?user_id=278074) | in-testsuite | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 1 obsolete file)

| [patch 1 v1](/attachment.cgi?id=528740)  [14 years ago](#c8)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   3.92 KB, patch | smaug : [review+](#a56487_39966 "14 years ago")  asa : [approval-mozilla-aurora+](#a1905074_5003 "14 years ago")  dveditz : [approval-mozilla-beta+](#a1903655_1689 "14 years ago") | [Details](/attachment.cgi?id=528740&action=edit) | [Diff](/attachment.cgi?id=528740&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=528740) |
| --- | --- | --- |
| [(ignore, empty patch)](/attachment.cgi?id=528751)  [14 years ago](#c10)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   120 bytes, patch |  | [Details](/attachment.cgi?id=528751&action=edit) | [Diff](/attachment.cgi?id=528751&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=528751) |
| [patch 2: promote GetRefreshDriverForDoc to an instance method](/attachment.cgi?id=528753)  [14 years ago](#c11)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   7.85 KB, patch | smaug : [review+](#a56502_39966 "14 years ago")  asa : [approval-mozilla-aurora+](#a1905085_5003 "14 years ago")  dveditz : [approval-mozilla-beta+](#a1903671_1689 "14 years ago") | [Details](/attachment.cgi?id=528753&action=edit) | [Diff](/attachment.cgi?id=528753&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=528753) |
| [fix compilation with --disable-smil](/attachment.cgi?id=529251)  [14 years ago](#c15)  [Bartłomiej Brzozowiec (BartZilla)](/user_profile?user_id=270383)   688 bytes, patch | dholbert : [review+](#c16 "14 years ago")  asa : [approval-mozilla-aurora+](#c25 "14 years ago")  dveditz : [approval-mozilla-beta+](#c24 "14 years ago") | [Details](/attachment.cgi?id=529251&action=edit) | [Diff](/attachment.cgi?id=529251&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=529251) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=653238#c0)• 14 years ago |
|  | |

mDocument is type nsIDocument\* and once it is set to some value
it is never cleared, if I read the code correctly.
That might lead to sg:critical crashes if someone managed to
access mDocument once the object is deleted.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=653238#c1)• 14 years ago |
|  | |

(In reply to [comment #0](/show_bug.cgi?id=653238#c0 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"))
> mDocument is type nsIDocument\* and once it is set to some value
> it is never cleared
Right -- once a nsSMILAnimationController is created, it's tied to a specific document (it's owned by that document) - the idea is it should be torn down when the document is torn down.
There shouldn't be any way for a nsSMILAnimationController to outlive its document -- I don't think anyone else retains an (owning) pointer to it. A quick search for nsSMILAnimationController confirms that:
<http://mxr.mozilla.org/mozilla-central/search?string=nsSMILAnimationController>
Given that, perhaps nsIDocument should have a nsAutoPtr<nsSMILAnimationController> rather than a nsRefPtr, to make the ownership/lifetime explicit.OS: Linux → AllHardware: x86\_64 → AllVersion: unspecified → Trunk

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=653238#c2)• 14 years ago |
|  | |

(In reply to [comment #1](/show_bug.cgi?id=653238#c1 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"))
> I don't think anyone else retains an (owning) pointer to it. A
> quick search for nsSMILAnimationController confirms that:
(Sorry, I meant to soften that "confirms" to a less-strong word, as of course someone could own a pointer via one of nsSMILAnimationController's superclasses.)
And that reminds me that we're using nsRefPtr (not nsAutoPtr) explicitly because that's required in order to be an effective subclass of nsARefreshObserver. (since registering to observe refreshes involves incrementing the refcount)

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=653238#c3)• 14 years ago |
|  | |

There could be a Disconnect() method which sets mDocument to null.
And nsDocument could call that.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=653238#c4)• 14 years ago |
|  | |

...and the only nsSMILAnimationController superclass that supports AddRef/Release is nsARefreshObserver, so the only other thing (besides the document) to retain a reference to an animation controller is a nsRefreshDriver.
dbaron tells me that a nsRefreshDriver \*can\* outlast its document if that document is an iframe, since we essentially only create \*one\* nsRefreshDriver for the topmost document in a given tab, and then use that same nsRefreshDriver for subdocuments.
So if we were to stay attached to a nsRefreshDriver beyond when our document died, that would be bad.
However, during document teardown, we'll always(?) hit nsDocument::OnPageHide, which calls mAnimationController->OnPageHide(), which calls Pause(), which calls StopSampling(), which unregisters us from the refresh driver.
(Note that script shouldn't be able to unpause us at this point, because this is a "PAUSE\_PAGEHIDE"-type Pause, whereas scripted pausing has a different type, and we only resume animation when all types of pauses' flags are cleared)
So -- this means that by the time our document dies, its AnimationController will no longer be observing refreshes, so the dying document will be the last owner of the nsSMILAnimationController (and will kill it off when its nsRefPtr goes away).

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=653238#c5)• 14 years ago |
|  | |

(In reply to [comment #3](/show_bug.cgi?id=653238#c3 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"))
> There could be a Disconnect() method which sets mDocument to null.
> And nsDocument could call that.
Per [comment 4](/show_bug.cgi?id=653238#c4 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"), this shouldn't be necessary right now, but I'd still be happy with making that change for sanity/safety.

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=653238#c6)• 14 years ago |
|  | |

Yes, I'd like to see something like Disconnect().
It should make using mDocument future-proof.
Raw pointers have caused way too many sg:critical problems.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=653238#c7)• 14 years ago |
|  | |

Sure, agreed. I'll whip up something here - taking.Assignee: nobody → dholbertStatus: NEW → ASSIGNED

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=653238#c8)• 14 years ago |
|  | |

Attached patch

[patch 1 v1](attachment.cgi?id=528740&action=diff)
— [Details](attachment.cgi?id=528740&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=528740)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=653238#c9)• 14 years ago |
|  | |

Comment on [attachment 528740](/attachment.cgi?id=528740 "patch 1 v1") [[details]](/attachment.cgi?id=528740&action=edit "patch 1 v1") [[diff]](/attachment.cgi?id=528740&action=diff "patch 1 v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=528740)
patch 1 v1
This patch layers on top of [bug 653270](/show_bug.cgi?id=653270 "RESOLVED FIXED - simplify nsSMILAnimationController construction").
Notes on patch:
- I shifted a StopSampling() call from the destructor into Disconnect, since StopSampling() needs a handle to the document in order to look up the nsRefreshDriver.)
- My Disconnect() method asserts that there aren't any outstanding owning references, besides our document's. (which means the controller should be about to die). In the unexpected case where that check fails, though, I've added null-checks to all other uses of mDocument. (the first inside of GetRefreshDriverForDoc, and the other inside of nsSMILAnimationController::DoSample)
(I'm going to post a followup patch to simplify GetRefreshDriverForDoc() into a protected instance method rather than a static helper, since every caller passes the same value -- mDocument -- to it.)
[Attachment #528740](/attachment.cgi?id=528740&action=edit "patch 1 v1") -
Flags: review?(Olli.Pettay)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=653238#c10)• 14 years ago |
|  | |

Attached patch

[(ignore, empty patch)](attachment.cgi?id=528751&action=diff) (obsolete)
— [Details](attachment.cgi?id=528751&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=528751)

This second patch just promotes the static helper-method GetRefreshDriverForDoc() to an instance method, so that its callers don't all have to pass mDocument to it.
This patch doesn't make any functional changes - it's just a straight substitution.
After this second patch, the only mentions of mDocument are in Disconnect (which clears it), and in DoSample & GetRefreshDriver (which both have a sanity-null-check, added in previous patch.)
After this cleanup, this hopefully makes it clearer that, while we don't expect mDocument to be null, we'll now be ok if it does end up being that way.
[Attachment #528751](/attachment.cgi?id=528751&action=edit "(ignore, empty patch)") -
Flags: review?(Olli.Pettay)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=653238#c11)• 14 years ago |
|  | |

Attached patch

[patch 2: promote GetRefreshDriverForDoc to an instance method](attachment.cgi?id=528753&action=diff)
— [Details](attachment.cgi?id=528753&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=528753)

(sorry, previous version was empty; forgot to qref)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a11220_278074)• 14 years ago |

[Attachment #528751](/attachment.cgi?id=528751&action=edit "(ignore, empty patch)") -
Attachment description: patch 2: promote GetRefreshDriverForDoc to an instance method → (ignore, empty patch)
[Attachment #528751](/attachment.cgi?id=528751&action=edit "(ignore, empty patch)") -
Attachment is obsolete: true
[Attachment #528751](/attachment.cgi?id=528751&action=edit "(ignore, empty patch)") -
Flags: review?(Olli.Pettay)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a11240_278074)• 14 years ago |

[Attachment #528740](/attachment.cgi?id=528740&action=edit "patch 1 v1") -
Attachment description: fix v1 → patch 1 v1

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a11255_278074)• 14 years ago |

[Attachment #528753](/attachment.cgi?id=528753&action=edit "patch 2: promote GetRefreshDriverForDoc to an instance method") -
Flags: review?(Olli.Pettay)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=653238#c12)• 14 years ago |
|  | |

These patches passed TryServer, btw:
<http://tbpl.mozilla.org/?tree=Try&rev=0e2ab7795345>

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a56487_39966)• 14 years ago |

[Attachment #528740](/attachment.cgi?id=528740&action=edit "patch 1 v1") -
Flags: review?(Olli.Pettay) → review+

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a56502_39966)• 14 years ago |

[Attachment #528753](/attachment.cgi?id=528753&action=edit "patch 2: promote GetRefreshDriverForDoc to an instance method") -
Flags: review?(Olli.Pettay) → review+

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=653238#c13)• 14 years ago |
|  | |

Landed:
<http://hg.mozilla.org/mozilla-central/rev/46eb35887fd5>
<http://hg.mozilla.org/mozilla-central/rev/22c9fbae41c4>Flags: in-testsuite-

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a79605_278074)• 14 years ago |

Status: ASSIGNED → RESOLVEDClosed: 14 years agoResolution: --- → FIXED

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=653238#c14)• 14 years ago |
|  | |

With smaug's consent, I'm opening up bug, since there's not anything that we think is actually potentially scary here. (See [comment 1](/show_bug.cgi?id=653238#c1 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"), [comment 2](/show_bug.cgi?id=653238#c2 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"), [comment 4](/show_bug.cgi?id=653238#c4 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious")) This bug's patch was just for sanity / extra-caution / future-proofing.Group: core-security

|  | [Bartłomiej Brzozowiec (BartZilla)](/user_profile?user_id=270383) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=653238#c15)• 14 years ago |
|  | |

Attached patch

[fix compilation with --disable-smil](attachment.cgi?id=529251&action=diff)
— [Details](attachment.cgi?id=529251&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=529251)

(In reply to [comment #13](/show_bug.cgi?id=653238#c13 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"))
> Landed:
> <http://hg.mozilla.org/mozilla-central/rev/46eb35887fd5>
> (...)
1.1 -- a/content/base/src/nsDocument.cpp
1.2 +++ b/content/base/src/nsDocument.cpp
...
1.11
1.12 + if (mAnimationController) {
1.13 + mAnimationController->Disconnect();
1.14 + }
1.15 +
I guess it should be #ifdef-ed MOZ\_SMIL, as in other cases in this file where mAnimationController is used. Otherwise compilation fails with --disable-smil. Patch attached that fixes this.
[Attachment #529251](/attachment.cgi?id=529251&action=edit "fix compilation with --disable-smil") -
Flags: review?(dholbert)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=653238#c16)• 14 years ago |
|  | |

Comment on [attachment 529251](/attachment.cgi?id=529251 "fix compilation with --disable-smil") [[details]](/attachment.cgi?id=529251&action=edit "fix compilation with --disable-smil") [[diff]](/attachment.cgi?id=529251&action=diff "fix compilation with --disable-smil") [[review]](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=529251)
fix compilation with --disable-smil
oops, thank you! r=me.
[Attachment #529251](/attachment.cgi?id=529251&action=edit "fix compilation with --disable-smil") -
Flags: review?(dholbert) → review+

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=653238#c17)• 14 years ago |
|  | |

Landed --disable-smil build fix on Bartłomiej's behalf:
<http://hg.mozilla.org/mozilla-central/rev/a008a3fda2b5>

|  | [Jesse Ruderman](/user_profile?user_id=11608) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a342784_11608)• 14 years ago |

Depends on: [654015](/show_bug.cgi?id=654015 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"")

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=653238#c18)• 14 years ago |
|  | |

(In reply to [comment #14](/show_bug.cgi?id=653238#c14 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"))
> With smaug's consent, I'm opening up bug, since there's not anything that we
> think is actually potentially scary here. (See [comment 1](/show_bug.cgi?id=653238#c1 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"), [comment 2](/show_bug.cgi?id=653238#c2 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"), [comment 4](/show_bug.cgi?id=653238#c4 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"))
Re-hiding, as Jesse seems to have found a way of poking a hole in the logic from [comment 1](/show_bug.cgi?id=653238#c1 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious")/2/4.Group: core-security

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=653238#c19)• 14 years ago |
|  | |

(that being [bug 654015](/show_bug.cgi?id=654015 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""))

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a528353_1689)• 14 years ago |

blocking2.0: --- → -
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- → [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B)Whiteboard: [sg:critical?]

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a551433_278074)• 14 years ago |

Depends on: [653270](/show_bug.cgi?id=653270 "RESOLVED FIXED - simplify nsSMILAnimationController construction")

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=653238#c20)• 14 years ago |
|  | |

Per [bug 654015 comment 24](/show_bug.cgi?id=654015#c24 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""): While we're not sure whether that this bug exposes us to exploitable issues, [bug 654015](/show_bug.cgi?id=654015 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"") demonstrates that one-off document-teardown bugs can cause semi-scary situations where this bug's protections would help us sleep better.
So, I'd advocate landing the following on Aurora for Firefox 5:
- [bug 653270](/show_bug.cgi?id=653270 "RESOLVED FIXED - simplify nsSMILAnimationController construction") (minor not-really-functional cleanup), which this bug stacks on top of per [comment 9](/show_bug.cgi?id=653238#c9 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious")
- this bug here's 2 patches, plus BartZilla's --disable-smil build-fix
- [bug 654015](/show_bug.cgi?id=654015 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"")'s 2 patches (once they get review)
This technically affects Firefox 4, too, but last I heard we aren't doing any more releases on that branch (and even if we were, I'm not sure this is quite scary enough to justify landing on a release branch yet).
I won't request approval until [bug 654015](/show_bug.cgi?id=654015 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"") is reviewed, and then I intend to request approval for all the aforementioned patches at once. I've already verified that they all apply cleanly to Aurora.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=653238#c21)• 14 years ago |
|  | |

Comment on [attachment 528740](/attachment.cgi?id=528740 "patch 1 v1") [[details]](/attachment.cgi?id=528740&action=edit "patch 1 v1") [[diff]](/attachment.cgi?id=528740&action=diff "patch 1 v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=528740)
patch 1 v1
Ok, requesting approval to land this bug's patches & [bug 654015](/show_bug.cgi?id=654015 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"")'s patches on aurora (as described in [comment 20](/show_bug.cgi?id=653238#c20 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"))
[Attachment #528740](/attachment.cgi?id=528740&action=edit "patch 1 v1") -
Flags: approval-mozilla-aurora?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1298825_278074)• 14 years ago |

[Attachment #528753](/attachment.cgi?id=528753&action=edit "patch 2: promote GetRefreshDriverForDoc to an instance method") -
Flags: approval-mozilla-aurora?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1298836_278074)• 14 years ago |

[Attachment #529251](/attachment.cgi?id=529251&action=edit "fix compilation with --disable-smil") -
Flags: approval-mozilla-aurora?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1729469_1689)• 14 years ago |

[Attachment #528740](/attachment.cgi?id=528740&action=edit "patch 1 v1") -
Flags: approval-mozilla-beta?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1729478_1689)• 14 years ago |

[Attachment #528753](/attachment.cgi?id=528753&action=edit "patch 2: promote GetRefreshDriverForDoc to an instance method") -
Flags: approval-mozilla-beta?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1729488_1689)• 14 years ago |

[Attachment #529251](/attachment.cgi?id=529251&action=edit "fix compilation with --disable-smil") -
Flags: approval-mozilla-beta?

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=653238#c22)• 14 years ago |
|  | |

dholbert, can you tell us what kind of risk we've got in taking this patch and what testing has been done to give us confidence that this won't hurt us on Beta?

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1845385_5003)• 14 years ago |

Whiteboard: [sg:critical?] → [sg:critical?] wants to land on beta with 654015

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1902663_5003)• 14 years ago |

[Attachment #528740](/attachment.cgi?id=528740&action=edit "patch 1 v1") -
Flags: approval-mozilla-aurora?

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1902675_5003)• 14 years ago |

[Attachment #528753](/attachment.cgi?id=528753&action=edit "patch 2: promote GetRefreshDriverForDoc to an instance method") -
Flags: approval-mozilla-aurora?

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1902698_5003)• 14 years ago |

[Attachment #529251](/attachment.cgi?id=529251&action=edit "fix compilation with --disable-smil") -
Flags: approval-mozilla-aurora?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=653238#c23)• 14 years ago |
|  | |

(In reply to [comment #22](/show_bug.cgi?id=653238#c22 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"))
> dholbert, can you tell us what kind of risk we've got in taking this patch
The change here is pretty minimal and pro-security -- basically, when nsDocument is destroyed, this patch forcibly clears nsSMILAnimationController's raw pointer to it, to prevent usages-after-free.
(We fully expect that the nsSMILAnimationController shouldn't be using that raw pointer anymore anyway, per my logic in [comment 4](/show_bug.cgi?id=653238#c4 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious"). But in case it tries to, now it won't be possible.)
The only anticipated effect here is to convert theoretical use-after-free bugs into no-ops. (since we null-check the pointer and bail out if it's null.)
[Bug 653238](/show_bug.cgi?id=653238 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious") initially looked like it was one such use-after-free bug, but it turned out it was just a use-during-destruction-but-before-the-actual-free-occurs.
> and what testing has been done to give us confidence that this won't hurt us
> on Beta?
Weeks of baking on m-c.
There are no specific testcases associated with this bug, since this is a defense against a theoretical threat that we can't think of any ways to actually trigger at this point.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1903655_1689)• 14 years ago |

[Attachment #528740](/attachment.cgi?id=528740&action=edit "patch 1 v1") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1903671_1689)• 14 years ago |

[Attachment #528753](/attachment.cgi?id=528753&action=edit "patch 2: promote GetRefreshDriverForDoc to an instance method") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=653238#c24)• 14 years ago |
|  | |

Comment on [attachment 529251](/attachment.cgi?id=529251 "fix compilation with --disable-smil") [[details]](/attachment.cgi?id=529251&action=edit "fix compilation with --disable-smil") [[diff]](/attachment.cgi?id=529251&action=diff "fix compilation with --disable-smil") [[review]](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=529251)
fix compilation with --disable-smil
Approved for mozilla-beta, a=dveditz for release-drivers
[Attachment #529251](/attachment.cgi?id=529251&action=edit "fix compilation with --disable-smil") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1905074_5003)• 14 years ago |

[Attachment #528740](/attachment.cgi?id=528740&action=edit "patch 1 v1") -
Flags: approval-mozilla-aurora+

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1905085_5003)• 14 years ago |

[Attachment #528753](/attachment.cgi?id=528753&action=edit "patch 2: promote GetRefreshDriverForDoc to an instance method") -
Flags: approval-mozilla-aurora+

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=653238#c25)• 14 years ago |
|  | |

Comment on [attachment 529251](/attachment.cgi?id=529251 "fix compilation with --disable-smil") [[details]](/attachment.cgi?id=529251&action=edit "fix compilation with --disable-smil") [[diff]](/attachment.cgi?id=529251&action=diff "fix compilation with --disable-smil") [[review]](/page.cgi?id=splinter.html&ignore=&bug=653238&attachment=529251)
fix compilation with --disable-smil
Please land these changes on both Aurora and Beta. (In the future, getting changes in during Aurora will save you this extra step.)
[Attachment #529251](/attachment.cgi?id=529251&action=edit "fix compilation with --disable-smil") -
Flags: approval-mozilla-aurora+

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=653238#c26)• 14 years ago |
|  | |

Sorry -- I forgot that this bug's patches stack on top of [bug 653270](/show_bug.cgi?id=653270 "RESOLVED FIXED - simplify nsSMILAnimationController construction") (as noted in [comment 9](/show_bug.cgi?id=653238#c9 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious")). That bug is just code-cleanup with no functional change -- I filed it in order to make the patches here simpler. /me requests approval over there...

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=653238#c27)• 14 years ago |
|  | |

Landed on aurora and beta:
<http://hg.mozilla.org/releases/mozilla-aurora/rev/a9d59e5602a1>
<http://hg.mozilla.org/releases/mozilla-aurora/rev/615fff407817>
<http://hg.mozilla.org/releases/mozilla-aurora/rev/fdf6772f5445>
<http://hg.mozilla.org/releases/mozilla-beta/rev/3c5652fa4212>
<http://hg.mozilla.org/releases/mozilla-beta/rev/4d0bb4f0d446>
<http://hg.mozilla.org/releases/mozilla-beta/rev/7a9caf11ddd4>
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a1976034_278074)• 14 years ago |

Whiteboard: [sg:critical?] wants to land on beta with 654015 → [sg:critical?]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a6546142_1689)• 14 years ago |

Group: core-security

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653238#a8476012_482154)• 13 years ago |

[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
You need to [log in](/show_bug.cgi?id=653238&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_48b69a22_20250124_234839.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/648022)
* [XML](/show_bug.cgi?ctype=xml&id=648022)

Closed
[Bug 648022](/show_bug.cgi?id=648022)

Opened 14 years ago
Closed 14 years ago

# Firefox 4.2a1pre Crash Report [@ js\_XDRScript(JSXDRState\*, JSScript\*\*) ] [@ js\_XDRAtom ] [@ js\_XDRScriptAndSubscripts(JSXDRState\*, JSScript\*\*) ]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Firefox 4.2a1pre Crash Report [@ js\_XDRScript(JSXDRState\*, JSScript\*\*) ] [@ js\_XDRAtom ] [@ js\_XDRScriptAndSubscripts(JSXDRState\*, JSScript\*\*) ]

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Windows 7

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| firefox7 | [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed) |
| status2.0 | --- | [unaffected](/buglist.cgi?f1=cf_status_20&o1=equals&v1=unaffected) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | + | fixed |
| firefox6 | + | fixed |
| firefox7 | + | fixed |
| status2.0 |  | unaffected |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: marcia, Assigned: mwu)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/078be4e327f31b60d8240979565af85f?d=mm&size=40)  [mwu](/user_profile?user_id=246518)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/cf7a6485ad75c35d66da0af6c88515d5?d=mm&size=40)  [marcia](/user_profile?user_id=8519)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

23 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[652185](/show_bug.cgi?id=652185 "RESOLVED FIXED - js_XDRRegExpObject needs to anchor the source string")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=648022&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=648022)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: crash, regression, Whiteboard: [sg:critical?] fixed-in-tracemonkey)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?] fixed-in-tracemonkey

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ js\_XDRScript(JSXDRState\*, JSScript\*\*) ]](https://crash-stats.mozilla.org/signature/?signature=js_XDRScript%28JSXDRState%2A%2C%20JSScript%2A%2A%29)

[[@ js\_XDRAtom ]](https://crash-stats.mozilla.org/signature/?signature=js_XDRAtom)

[[@ js\_XDRScriptAndSubscripts(JSXDRState\*, JSScript\*\*) ]](https://crash-stats.mozilla.org/signature/?signature=js_XDRScriptAndSubscripts%28JSXDRState%2A%2C%20JSScript%2A%2A%29)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (5 files, 2 obsolete files)

| [Back out bug 643927](/attachment.cgi?id=530742)  [14 years ago](#c27)  [Michael Wu [:mwu]](/user_profile?user_id=246518)   9.72 KB, patch |  | [Details](/attachment.cgi?id=530742&action=edit) | [Diff](/attachment.cgi?id=530742&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=530742) |
| --- | --- | --- |
| [Back out second part of bug 632253](/attachment.cgi?id=530754)  [14 years ago](#c29)  [Michael Wu [:mwu]](/user_profile?user_id=246518)   4.84 KB, patch | igor : [review+](#c30 "14 years ago") | [Details](/attachment.cgi?id=530754&action=edit) | [Diff](/attachment.cgi?id=530754&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=530754) |
| [Back out bug 643927 and second part of bug 632253](/attachment.cgi?id=530761)  [14 years ago](#c31)  [Michael Wu [:mwu]](/user_profile?user_id=246518)   10.75 KB, patch | sayrer : [approval-mozilla-aurora+](#a2896453_180188 "14 years ago") | [Details](/attachment.cgi?id=530761&action=edit) | [Diff](/attachment.cgi?id=530761&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=530761) |
| [Backout bug 518230](/attachment.cgi?id=531152)  [14 years ago](#c33)  [Michael Wu [:mwu]](/user_profile?user_id=246518)   17.81 KB, patch | igor : [review+](#a3086486_50763 "14 years ago")  sayrer : [approval-mozilla-aurora+](#a3383156_180188 "14 years ago") | [Details](/attachment.cgi?id=531152&action=edit) | [Diff](/attachment.cgi?id=531152&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=531152) |
| [Return on bad idx's](/attachment.cgi?id=533082)  [14 years ago](#c44)  [Michael Wu [:mwu]](/user_profile?user_id=246518)   560 bytes, patch |  | [Details](/attachment.cgi?id=533082&action=edit) | [Diff](/attachment.cgi?id=533082&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=533082) |
| [Backout bug 518230 (updated for latest mozilla-aurora)](/attachment.cgi?id=538622)  [14 years ago](#c56)  [Michael Wu [:mwu]](/user_profile?user_id=246518)   9.98 KB, patch | johnath : [approval-mozilla-aurora+](#c59 "14 years ago") | [Details](/attachment.cgi?id=538622&action=edit) | [Diff](/attachment.cgi?id=538622&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=538622) |
| [Backout bug 518230 (for mozilla-central)](/attachment.cgi?id=538635)  [14 years ago](#c57)  [Michael Wu [:mwu]](/user_profile?user_id=246518)   8.27 KB, patch |  | [Details](/attachment.cgi?id=538635&action=edit) | [Diff](/attachment.cgi?id=538635&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=538635) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Marcia Knous [:marcia]](/user_profile?user_id=8519)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=648022#c0)• 14 years ago |
|  | |

Seen while reviewing trunk top changers. <http://tinyurl.com/3bb45hf> to the reports.
<https://crash-stats.mozilla.com/report/index/64affb79-7ce6-437d-8e7d-441812110405>
Frame Module Signature [Expand] Source
0 mozjs.dll js\_XDRScript js/src/jsscript.cpp:439
1 mozjs.dll JS\_XDRScriptObject js/src/jsxdrapi.cpp:735
2 xul.dll ReadScriptFromStream js/src/xpconnect/loader/mozJSComponentLoader.cpp:367
3 xul.dll mozJSComponentLoader::ReadScript js/src/xpconnect/loader/mozJSComponentLoader.cpp:899
4 xul.dll mozJSComponentLoader::GlobalForLocation js/src/xpconnect/loader/mozJSComponentLoader.cpp:1044
5 xul.dll nsRefPtr<nsPresContext>::~nsRefPtr<nsPresContext> obj-firefox/dist/include/nsAutoPtr.h:969
6 xul.dll mozJSComponentLoader::JarKey js/src/xpconnect/loader/mozJSComponentLoader.cpp:599
7 kernel32.dll InterlockedExchangeAdd
<https://crash-stats.mozilla.com/report/index/64affb79-7ce6-437d-8e7d-441812110405>

|  | [Wesley W. Garland](/user_profile?user_id=122472) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=648022#c1)• 14 years ago |
|  | |

[bug 630209](/show_bug.cgi?id=630209 "RESOLVED FIXED - Unsafe usage of JS_Compile*/JS_ExecuteScript in shell and tests") recently landed (post ff4) and changes some of the rooting API/semantics for JScripts; the scrobj and JSScript are now used as a single unit (a JSObject \*) in the API. This bug also introduced JS\_XDRScriptObject(), replacing JS\_XDRScript().

|  | [David Baron :dbaron: (⌚️UTC-4, no longer working on Mozilla)](/user_profile?user_id=3881) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=648022#c2)• 14 years ago |
|  | |

Query:
[https://crash-stats.mozilla.com/report/list?product=Firefox&branch=2.2&query\_search=signature&query\_type=exact&query=&date=04%2F25%2F2011%2000%3A00%3A00&range\_value=30&range\_unit=days&hang\_type=crash&process\_type=browser&plugin\_field=&plugin\_query\_type=&plugin\_query=&do\_query=1&admin=&signature=js\_XDRScript%28JSXDRState\*%2C%20JSScript\*\*%29](https://crash-stats.mozilla.com/report/list?product=Firefox&branch=2.2&query_search=signature&query_type=exact&query=&date=04%2F25%2F2011%2000%3A00%3A00&range_value=30&range_unit=days&hang_type=crash&process_type=browser&plugin_field=&plugin_query_type=&plugin_query=&do_query=1&admin=&signature=js_XDRScript%28JSXDRState*%2C%20JSScript**%29)

|  | [chris hofmann](/user_profile?user_id=2687) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=648022#c3)• 14 years ago |
|  | |

around #4 topcrash on mozilla-central so this needs to block wide distribution of aurrora.

|  | [chris hofmann](/user_profile?user_id=2687) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a455695_2687)• 14 years ago |

Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Sheila Mooney](/user_profile?user_id=395208) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a525756_395208)• 14 years ago |

[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F)

|  | [Wesley W. Garland](/user_profile?user_id=122472) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=648022#c4)• 14 years ago |
|  | |

Is anybody looking at this?
436 JSAtom \*name;
437 if (xdr->mode == JSXDR\_ENCODE)
438 name = JS\_LOCAL\_NAME\_TO\_ATOM(names[i]);
439 if (!js\_XDRAtom(xdr, &name))
440 return false;
441 if (xdr->mode == JSXDR\_DECODE) {
442 BindingKind kind = (i < nargs)
I think we're exploding due to a bad name. Maybe it's straight-up uninitialized? Hard to say with the flow control in there, but I have a feeling that maybe this is what should be there:
436 JSAtom \*name;
437 if (xdr->mode == JSXDR\_ENCODE) {
438 name = JS\_LOCAL\_NAME\_TO\_ATOM(names[i]);
439 if (!js\_XDRAtom(xdr, &name))
440 return false;
}
441 if (xdr->mode == JSXDR\_DECODE) {
442 BindingKind kind = (i < nargs)
This is code that was refactored with [Bug 614493](/show_bug.cgi?id=614493 "RESOLVED FIXED - Move name information from JSFunction into JSScript") - Move name information from JSFunction into JSScript.

|  | [Brendan Eich [:brendan]](/user_profile?user_id=1214) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=648022#c5)• 14 years ago |
|  | |

Wes: js\_XDRAtom, like the other XDR functions, is a symmetric codec single entry point, so it must be called in both encode and decode cases. In the encode case, the variable passed by reference to it must be initialized; in the decode case, this variable need not be and the XDR function fills in the out param.
Igor, can you take this?
/beAssignee: general → igor

|  | [Wesley W. Garland](/user_profile?user_id=122472) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=648022#c6)• 14 years ago |
|  | |

Thanks for the explanation, Brendan - that de-mystifies a bit of this code, but it also means I have no clue where this bug is coming from.
It's almost as though names[] is mutating (it looks like it gets validated as non-explody up around line 405), but I can't see how it could mutate. The data in there isn't GC'd, it's in a cx->tempPool.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=648022#c7)• 14 years ago |
|  | |

It can't be related to the line above |name = JS\_LOCAL\_NAME\_TO\_ATOM(names[i]);| since this is called from ReadScriptFromStream, which means xdr->mode == JSXDR\_DECODE.
I have seen one crash in js\_XDRScript with xdr->mode == JSXDR\_ENCODE, but it's in a different place and isn't the startup crash this one seems to be. <https://crash-stats.mozilla.com/report/index/b7b05f57-9b88-4952-a71c-7b6552110412>

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=648022#c8)• 14 years ago |
|  | |

We need to figure out what caused this recent regression, and do a backout for Aurora hopefully within the next week.
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B)

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a787981_482154)• 14 years ago |

Keywords: [regressionwindow-wanted](/buglist.cgi?keywords=regressionwindow-wanted&resolution=---)

|  | [chris hofmann](/user_profile?user_id=2687) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=648022#c9)• 14 years ago |
|  | |

first started showing up in 3/31 in builds from 3/30
js\_XDRScript.JSXDRState...JSScript...
date total breakdown by build
crashes count build, count build, ...
20110328
20110329
20110330
20110331 4 4.2a1pre2011033003 4 ,
20110401 11 6 4.2a1pre2011040103,
4 4.2a1pre2011033003, 1 4.2a1pre2011033112,
20110402 21 19 4.2a1pre2011040203,
2 4.2a1pre2011040103,
20110403 19 17 4.2a1pre2011040203,
2 4.2a1pre2011040303,

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=648022#c10)• 14 years ago |
|  | |

Cedar merge, ugh:
<http://hg.mozilla.org/mozilla-central/rev/422bbd8245a7>

|  | [Sheila Mooney](/user_profile?user_id=395208) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=648022#c11)• 14 years ago |
|  | |

Is someone working on isolating a regression window for this one?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=648022#c12)• 14 years ago |
|  | |

(In reply to [comment #11](/show_bug.cgi?id=648022#c11 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> Is someone working on isolating a regression window for this one?
(I'm not sure anyone can, beyond [comment 9](/show_bug.cgi?id=648022#c9 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"), since there aren't any reliable STR)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=648022#c13)• 14 years ago |
|  | |

(In reply to [comment #9](/show_bug.cgi?id=648022#c9 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> first started showing up in 3/31 in builds from 3/30
Unless I'm misreading the data, dbaron's query from [comment 2](/show_bug.cgi?id=648022#c2 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]") shows some hits from a 3/29 build. (though the crashes in that build occurred on April 8th & April 9th.)
So [comment 10](/show_bug.cgi?id=648022#c10 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]") might not be the right regression push-range... (it's on 3/30)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=648022#c14)• 14 years ago |
|  | |

Some of the 3/29-build crashes are inside of nsComponentManagerImpl::GetServiceByContractID / nsComponentManagerImpl::CreateInstanceByContractID.
In at the push-range from the first win32 build on 3/28 to the last win32 build on 3/29 [1], there's a cset in the build-system merge that included a number of ContractID-related changes. Perhaps one of those changes is involved?
[1] <http://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=dacd66ab4dc4&tochange=820512b8223e>
[2] warning, this is a huge cset that hangs Firefox on and off while it's loading: <http://hg.mozilla.org/mozilla-central/pushloghtml?changeset=25caa0ec50f2>

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=648022#c15)• 14 years ago |
|  | |

(d'oh, nevermind @ the ContractID lead in [comment 14](/show_bug.cgi?id=648022#c14 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]") -- that cset (25caa0ec50f2) is labeled "merge m-c to b-s", and it's part of a push to merge b-s back to m-c. If I manually diff the cset before that push vs. the cset after that push, there are only a few makefile differences.)

|  | [Gregor Wagner [:gwagner]](/user_profile?user_id=314734) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=648022#c16)• 14 years ago |
|  | |

Maybe related to 605707?

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=648022#c17)• 14 years ago |
|  | |

I suspect this is related to the linux crash @ js\_XDRAtom - <https://crash-stats.mozilla.com/report/index/c026959f-265a-4182-99e8-4e08b2110421> . Guess js\_XDRAtom might've gotten inlined on Windows.
The crash is at <http://hg.mozilla.org/mozilla-central/file/fbe7830f27c0/js/src/jsxdrapi.cpp#l649> which suggests that the index that was read is invalid.Summary: Firefox 4.2a1pre Crash Report [@ js\_XDRScript(JSXDRState\*, JSScript\*\*) ] → Firefox 4.2a1pre Crash Report [@ js\_XDRScript(JSXDRState\*, JSScript\*\*) ] [@ js\_XDRAtom ]

|  | [Igor Bukanov](/user_profile?user_id=50763) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=648022#c18)• 14 years ago |
|  | |

(In reply to [comment #17](/show_bug.cgi?id=648022#c17 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> I suspect this is related to the linux crash @ js\_XDRAtom -
> <https://crash-stats.mozilla.com/report/index/c026959f-265a-4182-99e8-4e08b2110421>
> . Guess js\_XDRAtom might've gotten inlined on Windows.
I do not see how that may result in something bad. The callers of js\_XDRAtom roots the storage they use to store atoms or store atoms in GC things.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=648022#c19)• 14 years ago |
|  | |

(In reply to [comment #18](/show_bug.cgi?id=648022#c18 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> (In reply to [comment #17](/show_bug.cgi?id=648022#c17 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> > I suspect this is related to the linux crash @ js\_XDRAtom -
> > <https://crash-stats.mozilla.com/report/index/c026959f-265a-4182-99e8-4e08b2110421>
> > . Guess js\_XDRAtom might've gotten inlined on Windows.
>
> I do not see how that may result in something bad. The callers of js\_XDRAtom
> roots the storage they use to store atoms or store atoms in GC things.
Not saying that's bad. Just saying that the crash is probably actually in js\_XDRAtom, not in js\_XDRScript. And the js\_XDRAtom crashes on linux suggest that the index into the atoms table might be wrong/corrupted.

|  | [Igor Bukanov](/user_profile?user_id=50763) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=648022#c20)• 14 years ago |
|  | |

Another possible suspect is js\_XDRRegExpObject that does JS\_XDRString to read the source of the string, then calls NewBuiltinClassInstance, then calls RegExp::create, the call initRegExp, which in turn may allocate initial regexp shape before setting the private data of the new regexp object to the regexp. If the compiler keeps the only reference to the source string in RegExp, then we have the same problem as in the [bug 605707](/show_bug.cgi?id=605707 "RESOLVED FIXED - TM: crash at startup with gczeal at [@ XDRChars]"). I am not sure that this may be the cause of the crashes, so I will file another bug to fix that.Group: core-security

|  | [Igor Bukanov](/user_profile?user_id=50763) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a1388876_50763)• 14 years ago |

Depends on: [652185](/show_bug.cgi?id=652185 "RESOLVED FIXED - js_XDRRegExpObject needs to anchor the source string")

|  | [Sheila Mooney](/user_profile?user_id=395208) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=648022#c21)• 14 years ago |
|  | |

Can we get an update on this. It's still in the top 3 crashes and a regression. Have we isolated a regression window? We need to figure out what caused this and back it out.

|  | [Igor Bukanov](/user_profile?user_id=50763) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=648022#c22)• 14 years ago |
|  | |

(In reply to [comment #21](/show_bug.cgi?id=648022#c21 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> Can we get an update on this. It's still in the top 3 crashes and a regression.
I am not sure which regression is implied here. I filed the [bug 652185](/show_bug.cgi?id=652185 "RESOLVED FIXED - js_XDRRegExpObject needs to anchor the source string") since I was not sure if fixing that issue alone would be sufficient to address the crashes here in this bug.
> Have we isolated a regression window? We need to figure out what caused this
> and back it out.
If fixing the [bug 652185](/show_bug.cgi?id=652185 "RESOLVED FIXED - js_XDRRegExpObject needs to anchor the source string") is not enough to silence the crash reports, then we may consider backing out the [bug 630209](/show_bug.cgi?id=630209 "RESOLVED FIXED - Unsafe usage of JS_Compile*/JS_ExecuteScript in shell and tests").

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=648022#c23)• 14 years ago |
|  | |

I took one of the minidumps and stuck it into a debugger:
# get index? (JS\_XDRUInt32)
5f896f88 ffd2 call edx
5f896f8a 83c408 add esp,8
5f896f8d 85c0 test eax,eax
5f896f8f 0f84d7d30800 je mozjs!js\_XDRScript+0x8d68c (5f92436c)
5f896f95 833e01 cmp dword ptr [esi],1
5f896f98 0f8512020000 jne mozjs!js\_XDRScript+0x4d0 (5f8971b0)
5f896f9e 8b44244c mov eax,dword ptr [esp+4Ch]
# check for -1 index
5f896fa2 83f8ff cmp eax,0FFFFFFFFh
5f896fa5 0f84d70d0000 je mozjs!js\_XDRScript+0x10a2 (5f897d82)
# dereference a bunch of stuff to get to the atom pointer?
5f896fab 8b4e24 mov ecx,dword ptr [esi+24h]
5f896fae 8b5110 mov edx,dword ptr [ecx+10h]
5f896fb1 8b0482 mov eax,dword ptr [edx+eax\*4] < crash here
As far as I can tell, this is the same point that the Linux crash crashes in - <http://hg.mozilla.org/mozilla-central/file/fbe7830f27c0/js/src/jsxdrapi.cpp#l649>
Not sure why things are ending up this way, though.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=648022#c24)• 14 years ago |
|  | |

It doesn't look like [bug 652185](/show_bug.cgi?id=652185 "RESOLVED FIXED - js_XDRRegExpObject needs to anchor the source string") fixed this on mozilla-central, still seeing this in recent builds. e.g. [bp-769705c8-2349-4c60-85b5-a75232110505](https://crash-stats.mozilla.org/report/index/769705c8-2349-4c60-85b5-a75232110505)
backout time?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a2527146_1689)• 14 years ago |

Whiteboard: [sg:critical?]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a2527171_1689)• 14 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_20&o1=equals&v1=unaffected)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)

|  | [Igor Bukanov](/user_profile?user_id=50763) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=648022#c25)• 14 years ago |
|  | |

 (In reply to [comment #23](/show_bug.cgi?id=648022#c23 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> As far as I can tell, this is the same point that the Linux crash crashes in
> -
> <http://hg.mozilla.org/mozilla-central/file/fbe7830f27c0/js/src/jsxdrapi>.
> cpp#l649
So this looks like a regression from the [bug 643927](/show_bug.cgi?id=643927 "RESOLVED FIXED - GC hazard in JS_XDRScriptObject").

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=648022#c26)• 14 years ago |
|  | |

(In reply to [comment #25](/show_bug.cgi?id=648022#c25 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> (In reply to [comment #23](/show_bug.cgi?id=648022#c23 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> > As far as I can tell, this is the same point that the Linux crash crashes in
> > -
> > <http://hg.mozilla.org/mozilla-central/file/fbe7830f27c0/js/src/jsxdrapi>.
> > cpp#l649
>
> So this looks like a regression from the [bug 643927](/show_bug.cgi?id=643927 "RESOLVED FIXED - GC hazard in JS_XDRScriptObject").
I guess that's possible. I'm really not sure though. That patch seemed fairly correct, and it doesn't seem likely that the index is randomly corrupted either..
BTW I just noticed a recent crash report in js\_XDRAtom on windows on that same line - <https://crash-stats.mozilla.com/report/index/1ff8e8bc-6fad-4e90-b941-a8b912110504> .

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=648022#c27)• 14 years ago |
|  | |

Attached patch

[Back out bug 643927](attachment.cgi?id=530742&action=diff) (obsolete)
— [Details](attachment.cgi?id=530742&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=530742)

If this doesn't fix it, [bug 518230](/show_bug.cgi?id=518230 "RESOLVED INCOMPLETE - XPC.mfasl needs an XDR string table") might be next..
[Attachment #530742](/attachment.cgi?id=530742&action=edit "Back out bug 643927") -
Flags: review?(igor)

|  | [Igor Bukanov](/user_profile?user_id=50763) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=648022#c28)• 14 years ago |
|  | |

(In reply to [comment #27](/show_bug.cgi?id=648022#c27 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> Created [attachment 530742](/attachment.cgi?id=530742 "Back out bug 643927") [[details]](/attachment.cgi?id=530742&action=edit "Back out bug 643927") [[diff]](/attachment.cgi?id=530742&action=diff "Back out bug 643927") [[review]](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=530742) [review]
> Back out [bug 643927](/show_bug.cgi?id=643927 "RESOLVED FIXED - GC hazard in JS_XDRScriptObject")
Wait, but that reintroduces a GC hazard. I suppose we should backout that fix and the initial optimization bug.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=648022#c29)• 14 years ago |
|  | |

Attached patch

[Back out second part of bug 632253](attachment.cgi?id=530754&action=diff) (obsolete)
— [Details](attachment.cgi?id=530754&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=530754)

[Attachment #530754](/attachment.cgi?id=530754&action=edit "Back out second part of bug 632253") -
Flags: review?

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a2610074_246518)• 14 years ago |

[Attachment #530754](/attachment.cgi?id=530754&action=edit "Back out second part of bug 632253") -
Flags: review? → review?(igor)

|  | [Igor Bukanov](/user_profile?user_id=50763) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=648022#c30)• 14 years ago |
|  | |

Comment on [attachment 530754](/attachment.cgi?id=530754 "Back out second part of bug 632253") [[details]](/attachment.cgi?id=530754&action=edit "Back out second part of bug 632253") [[diff]](/attachment.cgi?id=530754&action=diff "Back out second part of bug 632253") [[review]](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=530754)
Back out second part of [bug 632253](/show_bug.cgi?id=632253 "RESOLVED FIXED - Avoid redundant serialization of script filename")
Review of [attachment 530754](/attachment.cgi?id=530754 "Back out second part of bug 632253") [[details]](/attachment.cgi?id=530754&action=edit "Back out second part of bug 632253") [[diff]](/attachment.cgi?id=530754&action=diff "Back out second part of bug 632253") [[review]](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=530754):
-----------------------------------------------------------------
Ok, lets start with that backout.
[Attachment #530754](/attachment.cgi?id=530754&action=edit "Back out second part of bug 632253") -
Flags: review?(igor) → review+

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a2610678_246518)• 14 years ago |

[Attachment #530742](/attachment.cgi?id=530742&action=edit "Back out bug 643927") -
Flags: review?(igor)

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=648022#c31)• 14 years ago |
|  | |

Attached patch

[Back out bug 643927 and second part of bug 632253](attachment.cgi?id=530761&action=diff)
— [Details](attachment.cgi?id=530761&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=530761)

Requesting approval for a backout to try to fix a crash.Assignee: igor → mwu
[Attachment #530761](/attachment.cgi?id=530761&action=edit "Back out bug 643927 and second part of bug 632253") -
Flags: approval-mozilla-aurora?

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=648022#c32)• 14 years ago |
|  | |

Try server run for the backout:
<http://tbpl.mozilla.org/?tree=Try&rev=9118d02d7265>

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a2867242_246518)• 14 years ago |

[Attachment #530742](/attachment.cgi?id=530742&action=edit "Back out bug 643927") -
Attachment is obsolete: true

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a2867265_246518)• 14 years ago |

[Attachment #530754](/attachment.cgi?id=530754&action=edit "Back out second part of bug 632253") -
Attachment is obsolete: true

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=648022#c33)• 14 years ago |
|  | |

Attached patch

[Backout bug 518230](attachment.cgi?id=531152&action=diff)
— [Details](attachment.cgi?id=531152&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=531152)

Plan B.

|  | [Robert Sayre](/user_profile?user_id=180188) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=648022#c34)• 14 years ago |
|  | |

which patch needs approval here?

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=648022#c35)• 14 years ago |
|  | |

(In reply to [comment #34](/show_bug.cgi?id=648022#c34 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> which patch needs approval here?
Just the one that I requested approval on. The second patch backs out more stuff in case the first back out isn't enough.

|  | [Robert Sayre](/user_profile?user_id=180188) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a2896453_180188)• 14 years ago |

[Attachment #530761](/attachment.cgi?id=530761&action=edit "Back out bug 643927 and second part of bug 632253") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=648022#c36)• 14 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-aurora/rev/4db54c6381ed>

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=648022#c37)• 14 years ago |
|  | |

The crash signature has changed but it's still basically the same crash at |if (!js\_XDRAtom(xdr, &name))|.
<https://crash-stats.mozilla.com/report/index/38df0cde-9e14-4faf-bede-bfac32110511>Summary: Firefox 4.2a1pre Crash Report [@ js\_XDRScript(JSXDRState\*, JSScript\*\*) ] [@ js\_XDRAtom ] → Firefox 4.2a1pre Crash Report [@ js\_XDRScript(JSXDRState\*, JSScript\*\*) ] [@ js\_XDRAtom ] [@ js\_XDRScriptAndSubscripts(JSXDRState\*, JSScript\*\*) ]

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a3055009_246518)• 14 years ago |

[Attachment #531152](/attachment.cgi?id=531152&action=edit "Backout bug 518230") -
Flags: review?(igor)

|  | [Igor Bukanov](/user_profile?user_id=50763) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a3086486_50763)• 14 years ago |

[Attachment #531152](/attachment.cgi?id=531152&action=edit "Backout bug 518230") -
Flags: review?(igor) → review+

|  | [JP Rosevear [:jpr]](/user_profile?user_id=407310) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=648022#c38)• 14 years ago |
|  | |

Please land for Aurora by Monday May 16 or the approval will potentially be lost. Please mark as status-firefox5 fixed when you do.

|  | [Robert Sayre](/user_profile?user_id=180188) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=648022#c39)• 14 years ago |
|  | |

Guys, what's going on here? Is this fixed on Aurora?

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=648022#c40)• 14 years ago |
|  | |

(In reply to [comment #39](/show_bug.cgi?id=648022#c39 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> Guys, what's going on here? Is this fixed on Aurora?
The first backout wasn't enough. Going to request approval for another backout which should fix for good.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a3126864_246518)• 14 years ago |

[Attachment #531152](/attachment.cgi?id=531152&action=edit "Backout bug 518230") -
Flags: approval-mozilla-aurora?

|  | [Robert Sayre](/user_profile?user_id=180188) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a3383156_180188)• 14 years ago |

[Attachment #531152](/attachment.cgi?id=531152&action=edit "Backout bug 518230") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=648022#c41)• 14 years ago |
|  | |

I believe this backout should fix things for aurora. However, still need to figure out what's going on and what we should do for trunk.
<http://hg.mozilla.org/releases/mozilla-aurora/rev/1ae19a9279d0>
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed)

|  | [Sheila Mooney](/user_profile?user_id=395208) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=648022#c42)• 14 years ago |
|  | |

Our next merge from mozilla-central to aurora is next Tues May 24th. Can we get a fix on the trunk so we don't propagate this to Aurora again?

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=648022#c43)• 14 years ago |
|  | |

(In reply to [comment #42](/show_bug.cgi?id=648022#c42 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> Our next merge from mozilla-central to aurora is next Tues May 24th. Can we
> get a fix on the trunk so we don't propagate this to Aurora again?
Marking it as tracking-firefox6 to make sure we don't lose this / ship a regression.
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=648022#c44)• 14 years ago |
|  | |

Attached patch

[Return on bad idx's](attachment.cgi?id=533082&action=diff)
— [Details](attachment.cgi?id=533082&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=533082)

I'm running out of ideas. Let's try testing one theory.
[Attachment #533082](/attachment.cgi?id=533082&action=edit "Return on bad idx's") -
Flags: review?

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a3558855_246518)• 14 years ago |

[Attachment #533082](/attachment.cgi?id=533082&action=edit "Return on bad idx's") -
Flags: review? → review?(igor)

|  | [Igor Bukanov](/user_profile?user_id=50763) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=648022#c45)• 14 years ago |
|  | |

(In reply to [comment #44](/show_bug.cgi?id=648022#c44 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> Created [attachment 533082](/attachment.cgi?id=533082 "Return on bad idx's") [[details]](/attachment.cgi?id=533082&action=edit "Return on bad idx's") [[diff]](/attachment.cgi?id=533082&action=diff "Return on bad idx's") [[review]](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=533082) [review]
> Return on bad idx's
>
> I'm running out of ideas. Let's try testing one theory.
We must find the real cause for the regression. So the previous backouts has not helped, right?

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=648022#c46)• 14 years ago |
|  | |

(In reply to [comment #45](/show_bug.cgi?id=648022#c45 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> (In reply to [comment #44](/show_bug.cgi?id=648022#c44 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> > Created [attachment 533082](/attachment.cgi?id=533082 "Return on bad idx's") [[details]](/attachment.cgi?id=533082&action=edit "Return on bad idx's") [[diff]](/attachment.cgi?id=533082&action=diff "Return on bad idx's") [[review]](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=533082) [review] [review]
> > Return on bad idx's
> >
> > I'm running out of ideas. Let's try testing one theory.
>
> We must find the real cause for the regression. So the previous backouts has
> not helped, right?
Oh this is for trunk. I haven't seen this crash on aurora and I don't expect to see it again, though it has only been one day.

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=648022#c47)• 14 years ago |
|  | |

On Aurora, it seems like we're still seeing crashes happen currently with the js\_XDRScriptAndSubscripts signature, but those are early startup so so prohibit people from updating. In fact, we only see it in build IDs up to 2011051600 on Aurora, so the [comment #41](/show_bug.cgi?id=648022#c41 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]") backout seems to have helped there, we just have people stranded on builds from before which won't launch properly.

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=648022#c48)• 14 years ago |
|  | |

I have transplanted the backout changeset for this bug on Aurora for Firefox 6: <<http://hg.mozilla.org/releases/mozilla-aurora/rev/65aaadba0020>>

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=648022#c49)• 14 years ago |
|  | |

Marking fixed for Firefox 6 then.
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected)
[tracking-firefox7](/buglist.cgi?f1=cf_tracking_firefox7&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox7&o1=equals&v1=%2B)

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=648022#c50)• 14 years ago |
|  | |

Michael, Igor: ping?
The backouts fixed Aurora and Beta, but on trunk we are still missing a fix for the actual problem behind this...

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=648022#c51)• 14 years ago |
|  | |

(In reply to [comment #50](/show_bug.cgi?id=648022#c50 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> Michael, Igor: ping?
>
> The backouts fixed Aurora and Beta, but on trunk we are still missing a fix
> for the actual problem behind this...
I enabled crc32 checking on omnijar startup cache in [bug 661305](/show_bug.cgi?id=661305 "RESOLVED FIXED - Use telemetry to track mismatched crc32 in the omnijar") in case it's a corrupted omni.jar that's causing this crash. If this doesn't stop the crashes, I'm just gonna back out [bug 518230](/show_bug.cgi?id=518230 "RESOLVED INCOMPLETE - XPC.mfasl needs an XDR string table") entirely.

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=648022#c52)• 14 years ago |
|  | |

js\_XDRAtom is still around: <https://crash-stats.mozilla.com/report/list?signature=js_XDRAtom>
For the other two signatures, it's hard to say on trunk, probably due to the low amount of users, but the only reports at all we have for those are 13 for js\_XDRScript on the 2011-05-26 build and one for this one on the build from the day before.

|  | [Sheila Mooney](/user_profile?user_id=395208) |  |
| --- | --- | --- |
| [Comment 53](/show_bug.cgi?id=648022#c53)• 14 years ago |
|  | |

We are still seeing this signature on Aurora (6.0a2). It's no longer appearing on trunk or 5.0.

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 54](/show_bug.cgi?id=648022#c54)• 14 years ago |
|  | |

I can't see js\_XDRScript on any build of any version with a higher build ID than 20110527 - but then, the 3 reports on that build ID are on 5.0b3.
js\_XDRScriptAndSubscripts still seems to happen on current aurora builds but is not seen anywhere else.
js\_XDRAtom still happens across all versions on current builds, mostly on trunk and aurora, though.

|  | [Sheila Mooney](/user_profile?user_id=395208) |  |
| --- | --- | --- |
| [Comment 55](/show_bug.cgi?id=648022#c55)• 14 years ago |
|  | |

Can someone investigate why we are seeing the js\_XDRScriptAndSubscripts only on Aurora?

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 56](/show_bug.cgi?id=648022#c56)• 14 years ago |
|  | |

Attached patch

[Backout bug 518230 (updated for latest mozilla-aurora)](attachment.cgi?id=538622&action=diff)
— [Details](attachment.cgi?id=538622&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=538622)

It looks like not all the backouts made it when aurora was branched. This is the missing backout which should fix js\_XDRScriptAndSubscripts . Going to follow up with a version for mozilla-central to fix js\_XDRAtom.
[Attachment #538622](/attachment.cgi?id=538622&action=edit "Backout bug 518230 (updated for latest mozilla-aurora)") -
Flags: approval-mozilla-aurora?

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a5635966_246518)• 14 years ago |

[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) → [affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected)

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 57](/show_bug.cgi?id=648022#c57)• 14 years ago |
|  | |

Attached patch

[Backout bug 518230 (for mozilla-central)](attachment.cgi?id=538635&action=diff)
— [Details](attachment.cgi?id=538635&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=538635)

This just backs out the xdr parts of [bug 518230](/show_bug.cgi?id=518230 "RESOLVED INCOMPLETE - XPC.mfasl needs an XDR string table").

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a5874205_1)• 14 years ago |

Crash Signature: [@ js\_XDRScript(JSXDRState\*, JSScript\*\*) ]
[@ js\_XDRAtom ]
[@ js\_XDRScriptAndSubscripts(JSXDRState\*, JSScript\*\*) ]

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 58](/show_bug.cgi?id=648022#c58)• 14 years ago |
|  | |

<http://hg.mozilla.org/tracemonkey/rev/3acacde59381>Crash Signature: [@ js\_XDRScript(JSXDRState\*, JSScript\*\*) ]
[@ js\_XDRAtom ]
[@ js\_XDRScriptAndSubscripts(JSXDRState\*, JSScript\*\*) ] → [@ js\_XDRScript(JSXDRState\*, JSScript\*\*) ]
[@ js\_XDRAtom ]
[@ js\_XDRScriptAndSubscripts(JSXDRState\*, JSScript\*\*) ]Whiteboard: [sg:critical?] → [sg:critical?] fixed-in-tracemonkey

|  | [Johnathan Nightingale [:johnath]](/user_profile?user_id=210757) |  |
| --- | --- | --- |
| [Comment 59](/show_bug.cgi?id=648022#c59)• 14 years ago |
|  | |

Comment on [attachment 538622](/attachment.cgi?id=538622 "Backout bug 518230 (updated for latest mozilla-aurora)") [[details]](/attachment.cgi?id=538622&action=edit "Backout bug 518230 (updated for latest mozilla-aurora)") [[diff]](/attachment.cgi?id=538622&action=diff "Backout bug 518230 (updated for latest mozilla-aurora)") [[review]](/page.cgi?id=splinter.html&ignore=&bug=648022&attachment=538622)
Backout [bug 518230](/show_bug.cgi?id=518230 "RESOLVED INCOMPLETE - XPC.mfasl needs an XDR string table") (updated for latest mozilla-aurora)
As we understand it, we are just approving the rest of the backout
[Attachment #538622](/attachment.cgi?id=538622&action=edit "Backout bug 518230 (updated for latest mozilla-aurora)") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 60](/show_bug.cgi?id=648022#c60)• 14 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-aurora/rev/2508c3f190a6>
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)

|  | [Sheila Mooney](/user_profile?user_id=395208) |  |
| --- | --- | --- |
| [Comment 61](/show_bug.cgi?id=648022#c61)• 14 years ago |
|  | |

So as of 06/17/2011 we are getting an explosive crash with this signature. On 06/16/2011 build we had 38 crashes then it jumped to over 200 for each day after with yesterday at over 300. There still seems to be some problem.

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 62](/show_bug.cgi?id=648022#c62)• 14 years ago |
|  | |

(In reply to [comment #61](/show_bug.cgi?id=648022#c61 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> So as of 06/17/2011 we are getting an explosive crash with this signature.
> On 06/16/2011 build we had 38 crashes then it jumped to over 200 for each
> day after with yesterday at over 300. There still seems to be some problem.
As I said in today's CrashKill meeting, all those crashes are with build IDs from before this landed, so the backout on Aurora is probably fine, just for some reason, people with non-recent builds had a run of crashes in the last days.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 63](/show_bug.cgi?id=648022#c63)• 14 years ago |
|  | |

Tracemonkey landed on mozilla-central today.Status: NEW → RESOLVEDClosed: 14 years ago
[status-firefox7](/buglist.cgi?f1=cf_status_firefox7&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox7&o1=equals&v1=fixed)Resolution: --- → FIXED

|  | [Sheila Mooney](/user_profile?user_id=395208) |  |
| --- | --- | --- |
| [Comment 64](/show_bug.cgi?id=648022#c64)• 14 years ago |
|  | |

Michael, so I see 2 of these crashes in an Aurora build from June 21st. It is possible that we will still get a few of these crashes or should it be eliminated entirely. I cannot find any on 5.0 for 4 weeks.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 65](/show_bug.cgi?id=648022#c65)• 14 years ago |
|  | |

Thanks for the heads up.
These two crash reports don't make much sense. They're crashing in a function that I removed/renamed in the backout, yet they still claim to be built after the backout landed. Not sure what to make of that..

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 66](/show_bug.cgi?id=648022#c66)• 14 years ago |
|  | |

(In reply to [comment #65](/show_bug.cgi?id=648022#c65 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> Thanks for the heads up.
>
> These two crash reports don't make much sense. They're crashing in a
> function that I removed/renamed in the backout, yet they still claim to be
> built after the backout landed. Not sure what to make of that..
In that case we should try to verify that this are "our" builds, i.e. from our pristine source, and not something someone built himself (or some state of aurora a distro has and happened to rebuild something from without updating the source).

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 67](/show_bug.cgi?id=648022#c67)• 14 years ago |
|  | |

(In reply to [comment #66](/show_bug.cgi?id=648022#c66 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> In that case we should try to verify that this are "our" builds, i.e. from
> our pristine source, and not something someone built himself (or some state
> of aurora a distro has and happened to rebuild something from without
> updating the source).
As I understand it, getting working crash reports from non-mozilla builds isn't possible. The crash stacks require debugging information from the build and hopefully only our own build machines can upload that debugging information to the symbol server. A hash is used to match crash reports with the right symbols.
However - I've found something interesting in comparing two crash reports with different build IDs:
Build ID 20110611042006: <https://crash-stats.mozilla.com/report/index/de2099d9-5809-4c7a-9839-3a7ae2110621>
Build ID 20110621042010: <https://crash-stats.mozilla.com/report/index/d7e991bb-a3ef-4316-a314-dbc312110621>
In both cases, the module lists reports a xul.dll with version 6.0.0.4179 and a debug identifier of F0C503A2E6D84C00888AE3CF29B650952. We might have broken updates here.

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 68](/show_bug.cgi?id=648022#c68)• 14 years ago |
|  | |

(In reply to [comment #67](/show_bug.cgi?id=648022#c67 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> (In reply to [comment #66](/show_bug.cgi?id=648022#c66 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> As I understand it, getting working crash reports from non-mozilla builds
> isn't possible
That's oversimplifying things, as you just need a proper account to upload symbols, but it probably turns out mostly true in the end.
> In both cases, the module lists reports a xul.dll with version 6.0.0.4179
> and a debug identifier of F0C503A2E6D84C00888AE3CF29B650952. We might have
> broken updates here.
That's surely a possible explanation, yes. We had update problems like this before, though we should have fixed all the major cases meanwhile. Thing still might go wrong in some strange ways at times, though, this is computers after all. ;-)

|  | [(not currently active) Ted Mielczarek](/user_profile?user_id=39022) |  |
| --- | --- | --- |
| [Comment 69](/show_bug.cgi?id=648022#c69)• 14 years ago |
|  | |

Interestingly, the xul.dlls and mozjs.dlls are both the same in both of those reports, and the changeset both DLLs are built from is the same in both cases, so it's not a mismatched xul+js in this case, anyway.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 70](/show_bug.cgi?id=648022#c70)• 14 years ago |
|  | |

I've filed [bug 666451](/show_bug.cgi?id=666451 "RESOLVED WONTFIX - Find crash reports with incorrect buildids") to try to figure out how often this sort of update breakage occurs.

|  | [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755) |  |
| --- | --- | --- |
| [Comment 71](/show_bug.cgi?id=648022#c71)• 14 years ago |
|  | |

btw: there is already [bug 635834](/show_bug.cgi?id=635834 "RESOLVED FIXED - Mismatched dll report") and [bug 666065](/show_bug.cgi?id=666065 "RESOLVED FIXED - Mismatched dll report") for checking version number mismatches which should be the same.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 72](/show_bug.cgi?id=648022#c72)• 14 years ago |
|  | |

(In reply to [comment #71](/show_bug.cgi?id=648022#c71 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> btw: there is already [bug 635834](/show_bug.cgi?id=635834 "RESOLVED FIXED - Mismatched dll report") and [bug 666065](/show_bug.cgi?id=666065 "RESOLVED FIXED - Mismatched dll report") for checking version number
> mismatches which should be the same.
AIUI that only checks mismatches between dlls. In this case, we've found mismatches between dlls and application.ini. (and likely other non-dlls since just updating application.ini is unlikely to cause crashes)

|  | [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755) |  |
| --- | --- | --- |
| [Comment 73](/show_bug.cgi?id=648022#c73)• 14 years ago |
|  | |

Understood... just pointing it out for reference of similar work.
When you get the data please check if the application.ini is for a newer or older version. It is always possible to update application.ini whereas dll's can be locked which prevents updating it and whether it is newer or older will provide a hint as to what may be going on.
Also, if in fact application.ini is incorrect this would prevent the application from running and display an error with release builds since there is a version check against the gecko version in that file. It has been a long time since I have seen any reports of that happening and iirc the reports were often due to a user performing a system restore which excludes several file types such as ini.

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 74](/show_bug.cgi?id=648022#c74)• 14 years ago |
|  | |

<https://crash-stats.mozilla.com/report/list?signature=js_XDRAtom> continues to be high on trunk, is that a different bug that needs to be filed?

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 75](/show_bug.cgi?id=648022#c75)• 14 years ago |
|  | |

(In reply to [comment #74](/show_bug.cgi?id=648022#c74 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> <https://crash-stats.mozilla.com/report/list?signature=js_XDRAtom> continues
> to be high on trunk, is that a different bug that needs to be filed?
I don't think so. The oldest build ID with the crash is 20110620121237 which is around when the backout landed. There are no js\_XDRAtom crashes after 6/20 on trunk.

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 76](/show_bug.cgi?id=648022#c76)• 14 years ago |
|  | |

(In reply to [comment #75](/show_bug.cgi?id=648022#c75 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> (In reply to [comment #74](/show_bug.cgi?id=648022#c74 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> > <https://crash-stats.mozilla.com/report/list?signature=js_XDRAtom> continues
> > to be high on trunk, is that a different bug that needs to be filed?
>
> I don't think so. The oldest build ID with the crash is 20110620121237 which
> is around when the backout landed. There are no js\_XDRAtom crashes after
> 6/20 on trunk.
I see 9 listed with build IDs from the 22nd, see the following one that has 20110622030205 as the build ID:
<https://crash-stats.mozilla.com/report/index/0fd414b9-28c1-40bd-9952-b3f8e2110623>
But right, the higher volume seems to be builds from 20th or earlier.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 77](/show_bug.cgi?id=648022#c77)• 14 years ago |
|  | |

(In reply to [comment #76](/show_bug.cgi?id=648022#c76 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> I see 9 listed with build IDs from the 22nd, see the following one that has
> 20110622030205 as the build ID:
> <https://crash-stats.mozilla.com/report/index/0fd414b9-28c1-40bd-9952>-
> b3f8e2110623
>
Compare the xul.dll version with the crash report in <https://crash-stats.mozilla.com/report/index/003142e0-98d4-42ee-8f78-181802110623> . The dlls are the same but the build ID is different - 20110620030203. So this particular report looks like another broken update.

|  | [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755) |  |
| --- | --- | --- |
| [Comment 78](/show_bug.cgi?id=648022#c78)• 14 years ago |
|  | |

(In reply to [comment #77](/show_bug.cgi?id=648022#c77 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> (In reply to [comment #76](/show_bug.cgi?id=648022#c76 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> > I see 9 listed with build IDs from the 22nd, see the following one that has
> > 20110622030205 as the build ID:
> > <https://crash-stats.mozilla.com/report/index/0fd414b9-28c1-40bd-9952>-
> > b3f8e2110623
> >
>
> Compare the xul.dll version with the crash report in
> <https://crash-stats.mozilla.com/report/index/003142e0-98d4-42ee-8f78>-
> 181802110623 . The dlls are the same but the build ID is different -
> 20110620030203. So this particular report looks like another broken update.
The build id should be 20110620030833 vs. 20110620030203 as reported in the crash report.
20110620030203 and 20110620030833 are for builds on 2011-06-20. Since we typically only update once per day could this be misreporting or did we offer two updates on 2011-06-20?

|  | [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755) |  |
| --- | --- | --- |
| [Comment 79](/show_bug.cgi?id=648022#c79)• 14 years ago |
|  | |

Ben / Nick, can either of you verify whether we offered two updates on Windows on 2011-06-20.

|  | [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755) |  |
| --- | --- | --- |
| [Comment 80](/show_bug.cgi?id=648022#c80)• 14 years ago |
|  | |

note: I only see one update for 2011-06-20
<http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/2011-06-20-03-mozilla-central/>
If that is the case then it is possible that it was an hourly (build 20110620030203) that was updated to 20110620030833 where the application.ini wasn't updated.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Comment 81](/show_bug.cgi?id=648022#c81)• 14 years ago |
|  | |

Looking at tbpl, I see two nightlies with build ids starting with 20110620:
20110620030833
20110620121237
Neither of which is 20110620030203.

|  | [Nick Thomas [:nthomas] (UTC+12)](/user_profile?user_id=69594) |  |
| --- | --- | --- |
| [Comment 82](/show_bug.cgi?id=648022#c82)• 14 years ago |
|  | |

The update system only knows about 20110620030833 for m-c win32 nightlies on the 20th. But there was a 20110620030203 for the Win64 nightly that day. How does crash-stats handle the win32/win64 difference ?

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Comment 83](/show_bug.cgi?id=648022#c83)• 14 years ago |
|  | |

(In reply to [comment #82](/show_bug.cgi?id=648022#c82 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> How
> does crash-stats handle the win32/win64 difference ?
It reports the build ID and the architecture, if it says "amd64" then I guess it's probably a 64bit build.

|  | [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755) |  |
| --- | --- | --- |
| [Comment 84](/show_bug.cgi?id=648022#c84)• 14 years ago |
|  | |

Thanks Nick! It appears that the buildid and file versions are correct for a Win64 build.

|  | [Robert Strong (they/them - no direct email)](/user_profile?user_id=141755) |  |
| --- | --- | --- |
| [Comment 85](/show_bug.cgi?id=648022#c85)• 14 years ago |
|  | |

(In reply to [comment #67](/show_bug.cgi?id=648022#c67 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> (In reply to [comment #66](/show_bug.cgi?id=648022#c66 "RESOLVED FIXED - Firefox 4.2a1pre Crash Report [@ js_XDRScript(JSXDRState*, JSScript**) ] [@ js_XDRAtom ] [@ js_XDRScriptAndSubscripts(JSXDRState*, JSScript**) ]"))
> > In that case we should try to verify that this are "our" builds, i.e. from
> > our pristine source, and not something someone built himself (or some state
> > of aurora a distro has and happened to rebuild something from without
> > updating the source).
>
> As I understand it, getting working crash reports from non-mozilla builds
> isn't possible. The crash stacks require debugging information from the
> build and hopefully only our own build machines can upload that debugging
> information to the symbol server. A hash is used to match crash reports with
> the right symbols.
>
> However - I've found something interesting in comparing two crash reports
> with different build IDs:
> Build ID 20110611042006:
> <https://crash-stats.mozilla.com/report/index/de2099d9-5809-4c7a-9839>-
> 3a7ae2110621
This one has the correct build id for the dll versions.
> Build ID 20110621042010:
> <https://crash-stats.mozilla.com/report/index/d7e991bb-a3ef-4316-a314>-
> dbc312110621
and this one doesn't
Another strange thing about this one is that the install time is 2011-06-21 19:31:05 with an age of 5 seconds since it was installed while the dll's reported are from 10 days previously.
Perhaps a startup crash with the new install while another installed version is already running?

|  | [(not currently active) Ted Mielczarek](/user_profile?user_id=39022) |  |
| --- | --- | --- |
| [Comment 86](/show_bug.cgi?id=648022#c86)• 14 years ago |
|  | |

FYI, "Install Time" is just calculated as "time since the version with this Build ID was first run":
<http://mxr.mozilla.org/mozilla-central/source/toolkit/crashreporter/nsExceptionHandler.cpp#977>
<http://mxr.mozilla.org/mozilla-central/source/toolkit/crashreporter/nsExceptionHandler.cpp#913>
We store build-id named files in "%APPDATA%\Mozilla\Firefox\Crash Reports" with timestamps in them.

|  | [Michael Wu [:mwu]](/user_profile?user_id=246518)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a7121738_246518)• 14 years ago |

[Attachment #533082](/attachment.cgi?id=533082&action=edit "Return on bad idx's") -
Flags: review?(igor)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a8373945_1689)• 14 years ago |

Group: core-security

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=648022#a142158372_75935)• 9 years ago |

Keywords: [regressionwindow-wanted](/buglist.cgi?keywords=regressionwindow-wanted&resolution=---)
You need to [log in](/show_bug.cgi?id=648022&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Michael Wu [:mwu]](/user_profile?user_id=246518)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_e111f6b0_20250124_234842.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/652401)
* [XML](/show_bug.cgi?ctype=xml&id=652401)

Closed
[Bug 652401](/show_bug.cgi?id=652401)

Opened 14 years ago
Closed 14 years ago

# Push cx to stack before calling mozRequestAnimationFrame callbacks

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Push cx to stack before calling mozRequestAnimationFrame callbacks

## Categories

### (Core :: Layout, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Layout#Layout)

Layout
▾

Core :: Layout

Issues in Layout that do not fit into any other Layout component or which span multiple Layout components.

Bugs related to the top level presentation objects (pres shell, pres context, and document viewer), the frame constructor, and the base frame classes, as well as general issues with alignment and sizing, all belong here.

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Layout&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Layout&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Layout)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla5

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed) |
| status2.0 | --- | [unaffected](/buglist.cgi?f1=cf_status_20&o1=equals&v1=unaffected) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [wontfix](/buglist.cgi?f1=cf_status_191&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 |  | fixed |
| status2.0 |  | unaffected |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | wontfix |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: smaug, Assigned: bzbarsky)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](extensions/Gravatar/web/default.jpg)  [bzbarsky](/user_profile?user_id=20209)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/056757eff6ed7c8ec26f61e3bf7695fe?d=mm&size=40)  [smaug](/user_profile?user_id=39966)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/cd9b85b2e112bd7941b21ad03f42604e?d=mm&size=40)  [dholbert](/user_profile?user_id=278074)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

6 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Whiteboard: [sg:moderate] dangerous if web exposed or misused by addons.)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:moderate] dangerous if web exposed or misused by addons.

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [bzbarsky](/user_profile?user_id=20209) | [in-testsuite](#a35572936_20209 "14 years ago") | ? |
| --- | --- | --- |
| [bzbarsky](/user_profile?user_id=20209) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [I think this is a sufficient fix for this bug.](/attachment.cgi?id=529202)  [14 years ago](#c16)  [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)   1.97 KB, patch | smaug : [review+](#c19 "14 years ago")  johnath : [approval-mozilla-aurora+](#a997480_210757 "14 years ago") | [Details](/attachment.cgi?id=529202&action=edit) | [Diff](/attachment.cgi?id=529202&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=652401&attachment=529202) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=652401#c0)• 14 years ago |
|  | |

See [bug 652317](/show_bug.cgi?id=652317 "RESOLVED FIXED - Investigate if calling MediaQueryListListener should push Cx to stack")

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=652401#c1)• 14 years ago |
|  | |

This is extra fun because the callbacks might come from different origins, so we need to keep track of where each one came from...
I guess I get to own this one. :(Assignee: nobody → bzbarskyPriority: -- → P1

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=652401#c2)• 14 years ago |
|  | |

Isn't this just the same what event handlers have had for years
(longer than I've been hacking gecko) - use the context from the relevant window.
If the callback is coming from chrome, it gets chrome privileges anyway, \*IIRC\*.

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=652401#c3)• 14 years ago |
|  | |

Or, hmm, do we handle all the callbacks related to a top level window in a same
place? Then when adding a new callback, take reference to the window on
which the method was called.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=652401#c4)• 14 years ago |
|  | |

> Or, hmm, do we handle all the callbacks related to a top level window in a same
> place?
Refresh drivers are per-tab, effectively.
We do know the document the callback comes, from, sort of. If we try a bit. I'll try to post a patch tomorrow.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=652401#c5)• 14 years ago |
|  | |

So... Does this mean that use of nsIDOMNodeFilter in the treewalker is also unsafe?

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=652401#c6)• 14 years ago |
|  | |

And also geolocation, the xpath nsresolver....
Can we seriously not do the right thing somehow in the xpconnect wrappedjs code?

|  | [Jonas Sicking (:sicking) No longer reading bugmail consistently](/user_profile?user_id=9186) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=652401#c7)• 14 years ago |
|  | |

nsIDOMNodeFilter and xpath resolver are always called back synchronously as a result from other js-calls. So the right context should already be on the stack.
geolocation is a different story though. As are desktop notifications (implemented on fennec).

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=652401#c8)• 14 years ago |
|  | |

> nsIDOMNodeFilter and xpath resolver are always called back synchronously
Ah, good point.
Sounds like we need another bug on geolocation and desktop notifications? :(

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=652401#c9)• 14 years ago |
|  | |

IIRC, either geolocation or desktop notifications should behave ok already.

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Reporter |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=652401#c10)• 14 years ago |
|  | |

or both...but better to make sure.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=652401#c11)• 14 years ago |
|  | |

OK, dunno about desktop notifications (can't find where it calls its callbacks offhand), but in [bug 452762](/show_bug.cgi?id=452762 "RESOLVED FIXED - Make sure Geolocation callbacks run in the right JS context") geolocation was changed to push null precisely to address this sort of issue. And from my reading of the XPCWrappedJSClass code, that looks correct in terms of the obvious "what else might be on the stack" issue: if there's nothing on the stack or the top thing on the stack is null, XPCWrappedJSClass will find the right JSContext for the callee object and then init an XPCCallContext with it, which will push it on the stack.
In the case of refresh driver, we can only enter Notify() in the following ways:
1) AdvanceTimeAndRefresh called.
2) RestoreNormalRefresh called.
3) Timer fires.
4) DoRefresh called.
#3 and #4 can only happen directly from the event loop, and when the event loop is spinning we're guaranteed a null on the JSContext stack (see [bug 326777](/show_bug.cgi?id=326777 "RESOLVED FIXED - [FIX]Event queue spinners must push null JSContext if they could be called from JS")).
We should probably push null for #1 and #2, but that doesn't involve branches.
Are there things we need to protect against here other than "something is already on the stack"?

|  | [Jonas Sicking (:sicking) No longer reading bugmail consistently](/user_profile?user_id=9186) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=652401#c12)• 14 years ago |
|  | |

In the case of sync-xhr and alert()s, can't there be things on the JS stack even when called from the event loop?

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=652401#c13)• 14 years ago |
|  | |

OK, I talked to smaug. He's worried about bfcache interactions when a callback spins the event loop to put one of the documents with a pending callback into bfcache, but I think the last part of [bug 607529 comment 8](/show_bug.cgi?id=607529#c8 "RESOLVED FIXED - mozRequestAnimationFrame callbacks can be called after document has gone away") applies. I don't see a security issue there.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=652401#c14)• 14 years ago |
|  | |

Jonas, that's what [bug 326777](/show_bug.cgi?id=326777 "RESOLVED FIXED - [FIX]Event queue spinners must push null JSContext if they could be called from JS") was about. Any time nsThread proceses the event loop it will push a null JSContext on the stack before actually calling Run() on the runnable. Thus there will be things on the JS stack, but the \_top\_ thing on the stack will be null.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=652401#c15)• 14 years ago |
|  | |

So I would like to claim there is no 4.0 or earlier issue here, and that the issue in 5.0 is limited to the APIs [bug 435442](/show_bug.cgi?id=435442 "RESOLVED FIXED - Implement Webkit's CSS Animation proposal") added. Testing a patch for those now, but since they're not web-exposed I don't think this bug needs to stay security-sensitive (though maybe we should make sure about [comment 10](/show_bug.cgi?id=652401#c10 "RESOLVED FIXED - Push cx to stack before calling mozRequestAnimationFrame callbacks") before we open it up?).

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=652401#c16)• 14 years ago |
|  | |

Attached patch

[I think this is a sufficient fix for this bug.](attachment.cgi?id=529202&action=diff)
— [Details](attachment.cgi?id=529202&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=652401&attachment=529202)

Try says this is green on our tests in a debug build, so I think we're good.
[Attachment #529202](/attachment.cgi?id=529202&action=edit "I think this is a sufficient fix for this bug.") -
Flags: review?(Olli.Pettay)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=652401#a476952_20209)• 14 years ago |

Whiteboard: [need review]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=652401#c17)• 14 years ago |
|  | |

(In reply to [comment #15](/show_bug.cgi?id=652401#c15 "RESOLVED FIXED - Push cx to stack before calling mozRequestAnimationFrame callbacks"))
> issue in 5.0 is limited to the APIs [bug 435442](/show_bug.cgi?id=435442 "RESOLVED FIXED - Implement Webkit's CSS Animation proposal") added. Testing a patch for
> those now, but since they're not web-exposed [...]
They're not? I thought CSS Animations were one of the new web features for Firefox 5?
If it's truly not webexposed then I suppose we can just pick it up in fx6
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_191&o1=equals&v1=wontfix)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_20&o1=equals&v1=unaffected)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)Whiteboard: [need review] → [need review][sg:moderate] dangerous if web exposed or misused by addons.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=652401#c18)• 14 years ago |
|  | |

CSS Animations are exposed. The two functions in question that live on refresh driver are only exposed via nsIDOMWindowUtils; they were added to allow testing of animations and enforce the caller having UniversalXPConnect privileges before calling into the refresh driver. You can see the exact code at <https://bug435442.bugzilla.mozilla.org/attachment.cgi?id=523829>

|  | [Olli Pettay [:smaug][bugs@pettay.fi]](/user_profile?user_id=39966)  Reporter |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=652401#c19)• 14 years ago |
|  | |

Comment on [attachment 529202](/attachment.cgi?id=529202 "I think this is a sufficient fix for this bug.") [[details]](/attachment.cgi?id=529202&action=edit "I think this is a sufficient fix for this bug.") [[diff]](/attachment.cgi?id=529202&action=diff "I think this is a sufficient fix for this bug.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=652401&attachment=529202)
I think this is a sufficient fix for this bug.
Review of [attachment 529202](/attachment.cgi?id=529202 "I think this is a sufficient fix for this bug.") [[details]](/attachment.cgi?id=529202&action=edit "I think this is a sufficient fix for this bug.") [[diff]](/attachment.cgi?id=529202&action=diff "I think this is a sufficient fix for this bug.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=652401&attachment=529202):
[Attachment #529202](/attachment.cgi?id=529202&action=edit "I think this is a sufficient fix for this bug.") -
Flags: review?(Olli.Pettay) → review+

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=652401#a970007_20209)• 14 years ago |

Whiteboard: [need review][sg:moderate] dangerous if web exposed or misused by addons. → [need landing][sg:moderate] dangerous if web exposed or misused by addons.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=652401#c20)• 14 years ago |
|  | |

Pushed <http://hg.mozilla.org/mozilla-central/rev/285a5ec88501>
I think we should probably open this bug up sometime in the near future.Status: NEW → RESOLVEDClosed: 14 years agoFlags: in-testsuite+Resolution: --- → FIXEDWhiteboard: [need landing][sg:moderate] dangerous if web exposed or misused by addons. → [sg:moderate] dangerous if web exposed or misused by addons.Target Milestone: --- → mozilla6

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=652401#c21)• 14 years ago |
|  | |

Comment on [attachment 529202](/attachment.cgi?id=529202 "I think this is a sufficient fix for this bug.") [[details]](/attachment.cgi?id=529202&action=edit "I think this is a sufficient fix for this bug.") [[diff]](/attachment.cgi?id=529202&action=diff "I think this is a sufficient fix for this bug.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=652401&attachment=529202)
I think this is a sufficient fix for this bug.
We probably should fix this on aurora, though.
This is a safe fix that would just make sure extensions can't shoot themselves in the foot.
[Attachment #529202](/attachment.cgi?id=529202&action=edit "I think this is a sufficient fix for this bug.") -
Flags: approval-mozilla-aurora?

|  | [Johnathan Nightingale [:johnath]](/user_profile?user_id=210757) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=652401#a997480_210757)• 14 years ago |

[Attachment #529202](/attachment.cgi?id=529202&action=edit "I think this is a sufficient fix for this bug.") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=652401#c22)• 14 years ago |
|  | |

Pushed <http://hg.mozilla.org/releases/mozilla-aurora/rev/fc99d98f36ab>
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed)Target Milestone: mozilla6 → mozilla5

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=652401#a6849956_1689)• 14 years ago |

Group: core-security

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=652401#a35572936_20209)• 13 years ago |

Flags: in-testsuite+ → in-testsuite?
You need to [log in](/show_bug.cgi?id=652401&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.redhat.com_c7982ada_20250124_234831.html ===

[Skip to content](#rhb-main-content)
## Featured links

* [![Red Hat Summit](/themes/custom/rh_base_ui/dist/img/red-hat-summit-logo.svg)](https://www.redhat.com/en/summit)
* [Support](https://access.redhat.com/)
* [Documentation](https://docs.redhat.com/en)
* [Console](https://cloud.redhat.com/)
* [Developers](https://developers.redhat.com/)
* [Start a trial](/en/products/trials)
* All Red Hat
  + For customers
    - [Customer support](https://access.redhat.com/)
    - [Subscription management](https://access.redhat.com/management)
    - [Support cases](https://access.redhat.com/support/cases)
    - [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
    - [Find a partner](https://catalog.redhat.com/partners)
  + For partners
    - [Partner portal](https://connect.redhat.com/partner-admin/dashboard)
    - [Partner support](https://connect.redhat.com/en/support)
    - [Become a partner](https://connect.redhat.com/)
  + Try, buy, & sell
    - [Red Hat Marketplace](https://marketplace.redhat.com/en-us)
    - [Red Hat Store](https://www.redhat.com/en/store)
    - [Contact sales](/en/contact)
    - [Start a trial](/en/products/trials)
  + Learning resources
    - [Documentation](https://docs.redhat.com/en)
    - [Training and certification](/en/services/training-and-certification)
    - [Hybrid cloud learning hub](https://cloud.redhat.com/learn)
    - [Interactive labs](/en/interactive-labs)
    - [Learning community](https://learn.redhat.com/)
    - [Red Hat TV](https://tv.redhat.com)
  + Open source communities
    - [Global advocacy](https://access.redhat.com/accelerators)
    - [How we contribute](/en/about/our-community-contributions)
[Red Hat](/en)

* [Products](https://www.redhat.com/en/technologies/all-products)
* [Solutions](https://www.redhat.com/en/solutions)
* [Training & services](https://www.redhat.com/en/services)
* [Resources](https://www.redhat.com/en/resources)
* Partners
* [About](https://www.redhat.com/en/about)
* Explore more
### Platform products

* [Red Hat Enterprise LinuxA flexible, stable operating system to support hybrid cloud innovation.](/en/technologies/linux-platforms/enterprise-linux)
* [Red Hat OpenShiftA container platform to build, modernize, and deploy applications at scale.](/en/technologies/cloud-computing/openshift)
* [Red Hat Ansible Automation PlatformNew versionA foundation for implementing enterprise-wide automation.](/en/technologies/management/ansible)
### Try & buy

* [Start a trialAssess a product with a no-cost trial.](/en/products/trials)
* [Buy onlineBuy select products and services in the Red Hat Store.](https://www.redhat.com/en/store)
* [Integrate with major cloud providersBuy Red Hat solutions using committed spend from providers, including:
  ![Cloud providers: Amazon Web Services, Microsoft Azure, and Google Cloud](https://www.redhat.com/rhdc/managed-files/cloud-providers-2x.png)](/en/partners/certified-cloud-and-service-providers)
### Featured

* [Red Hat Enterprise Linux AI](/en/technologies/linux-platforms/enterprise-linux/ai)
* [Red Hat OpenShift AI](/en/technologies/cloud-computing/openshift/openshift-ai)
* [Red Hat OpenShift Virtualization](/en/technologies/cloud-computing/openshift/virtualization)
* [Red Hat OpenShift Service on AWS](/en/technologies/cloud-computing/openshift/aws)
* [Microsoft Azure Red Hat OpenShift](/en/technologies/cloud-computing/openshift/azure)
[See all products](/en/technologies/all-products)

* [Application platformSimplify the way you build, deploy, manage, and secure apps across the hybrid cloud.](/en/solutions/application-platform)
* [Artificial intelligenceBuild, deploy, and monitor AI models and apps with Red Hat's open source platforms.](/en/solutions/ai)
* [Edge computingDeploy workloads closer to the source with security-focused edge technology.](/en/products/edge)

* [IT automationUnite disparate tech, teams, and environments with 1 comprehensive automation platform.](/en/solutions/it-automation)
* [Linux standardizationGet consistency across operating environments with an open, flexible infrastructure.](/en/solutions/linux-standardization)

* [SecurityDeliver software using trusted platforms and real-time security scanning and remediation.](/en/solutions/trusted-software-supply-chain)
* [VirtualizationModernize operations using a single platform for virtualized and containerized workloads.](/en/solutions/virtualization)
### By industry

* [Automotive](/en/solutions/automotive)
* [Financial services](/en/solutions/financial-services)
* [Healthcare](/en/solutions/healthcare)
* [Industrial sector](/en/solutions/industrial-sector)
* [Media and entertainment](/en/solutions/media-entertainment)
* [Public sector](/en/solutions/public-sector)
* [Telecommunications](/en/solutions/telecommunications)
[Explore solutions](/en/solutions)
### [Services](/en/services)

* [Consulting](/en/services/consulting)
* [Services for AI](/en/services/consulting/red-hat-consulting-for-ai)
* [Technical Account Management](/en/services/support/technical-account-management)
### [Training & certification](/en/services/training-and-certification)

* [All courses and exams](/en/services/training/all-courses-exams)
* [All certifications](/en/services/certifications)
* [Verify a certification](https://www.redhat.com/rhtapps/services/verify/)
* [Skills assessment](https://skills.ole.redhat.com)
* [Learning subscription](/en/services/training/learning-subscription)
* [Learning community](https://learn.redhat.com/)
* [Red Hat Academy](/en/services/training/red-hat-academy)
* [FAQs](/en/services/training-and-certification/faq)
* [Connect with learning experts](/en/services/training-and-certification/contact-us)
### Featured

* [Ansible Basics: Automation Technical Overview (No cost)](/en/services/training/do007-ansible-essentials-simplicity-automation-technical-overview)
* [Containers, Kubernetes and Red Hat OpenShift Technical Overview (No cost)](/en/services/training/do080-deploying-containerized-applications-technical-overview)
* [Red Hat Enterprise Linux Technical Overview (No cost)](/en/services/training/rh024-red-hat-linux-technical-overview)
* [Red Hat Certified System Administrator exam](/en/services/training/ex200-red-hat-certified-system-administrator-rhcsa-exam)
* [Red Hat System Administration I](/en/services/training/rh124-red-hat-system-administration-i)
[Explore services](/en/services)
### Topics

* [AI](/en/topics/ai)
* [Application modernization](/en/topics/application-modernization)
* [Automation](/en/topics/automation)
* [Cloud computing](/en/topics/cloud-computing)
* [Cloud-native applications](/en/topics/cloud-native-apps)
* [Containers](/en/topics/containers)
* [DevOps](/en/topics/devops)
* [Edge computing](/en/topics/edge-computing)
* [Linux](/en/topics/linux)
* [Virtualization](/en/topics/virtualization)
* [See all topics](/en/topics)
### Articles

* [What is InstructLab?](/en/topics/ai/what-is-instructlab)
* [What are cloud services?](/en/topics/cloud-computing/what-are-cloud-services)
* [What is edge computing?](/en/topics/edge-computing/what-is-edge-computing)
* [What is hybrid cloud?](/en/topics/cloud-computing/what-is-hybrid-cloud)
* [Why build a Red Hat cloud?](/en/topics/cloud-computing/why-choose-red-hat-cloud)
* [Cloud vs. edge](/en/topics/cloud-computing/cloud-vs-edge)
* [Red Hat OpenShift vs. Kubernetes](/en/technologies/cloud-computing/openshift/red-hat-openshift-kubernetes)
* [Learning Ansible basics](/en/topics/automation/learning-ansible-tutorial)
* [What is Linux?](/en/topics/linux/what-is-linux)
### More to explore

* [Blog](/en/blog)
* [Customer success stories](/en/success-stories)
* [Events and webinars](/en/events)
* [Newsroom](/en/about/newsroom)
* [Podcasts and video series](/en/red-hat-original-series)
* [Documentation](https://docs.redhat.com/en)
* [Resource library](/en/resources)
* [Training and certification](/en/services/training-and-certification)
[Explore resources](/en/resources)
### For customers

* [Our partners](/en/partners)
* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
* [Find a partner](https://catalog.redhat.com/partners)
### For partners

* [Partner Connect](https://connect.redhat.com)
* [Become a partner](https://connect.redhat.com/en/benefits-of-being-a-partner)
* [Training](https://connect.redhat.com/en/training)
* [Support](https://connect.redhat.com/en/support)
* [Access the partner portal](https://connect.redhat.com/partner-admin/dashboard)
### About us

* [Our company](/en/about/company)
* [How we work](/en/about/our-culture)
* [Our social impact](/en/about/community-social-responsibility)
* [Development model](/en/about/development-model)
* [Subscription model](/en/about/value-of-Red-Hat)
* [Product support](/en/services/support)
### Open source

* [Open source commitments](/en/about/open-source)
* [How we contribute](/en/about/our-community-contributions)
* [Red Hat on GitHub](https://github.com/RedHatOfficial)
### Company details

* [Analyst relations](/en/about/analysts)
* [Blog](/en/blog)
* [Locations](/en/about/office-locations)
* [Newsroom](/en/about/newsroom)
[Explore Red Hat](/en/about)[Contact us](/en/contact)For customers

* [Customer support](https://access.redhat.com/)* [Subscription management](https://access.redhat.com/management)* [Support cases](https://access.redhat.com/support/cases)* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)* [Find a partner](https://catalog.redhat.com/partners)
For partners

* [Partner portal](https://connect.redhat.com/partner-admin/dashboard)* [Partner support](https://connect.redhat.com/en/support)* [Become a partner](https://connect.redhat.com/)
Try, buy, & sell

* [Red Hat Marketplace](https://marketplace.redhat.com/en-us)* [Red Hat Store](https://www.redhat.com/en/store)* [Contact sales](/en/contact)* [Start a trial](/en/products/trials)
Learning resources

* [Documentation](https://docs.redhat.com/en)* [Training and certification](/en/services/training-and-certification) * [Hybrid cloud learning hub](https://cloud.redhat.com/learn)* [Interactive labs](/en/interactive-labs)* [Learning community](https://learn.redhat.com/)* [Red Hat TV](https://tv.redhat.com)
Open source communities

* [Global advocacy](https://access.redhat.com/accelerators)* [How we contribute](/en/about/our-community-contributions)
For you
New
### Recommendations

As you browse redhat.com, we'll recommend resources you may like. For now, try these.

---

* [All Red Hat products](/en/technologies/all-products)
* [Tech topics](/en/topics)
* [Red Hat resources](/en/resources)
![close](https://static.redhat.com/libs/redhat/rh-iconfont/latest/svg/web-icon-close.svg)[![Red Hat Summit](/themes/custom/rh_base_ui/dist/img/red-hat-summit-logo.svg)Red Hat Summit](https://www.redhat.com/en/summit)[Support](https://access.redhat.com/)[Documentation](https://docs.redhat.com/en)[Console](https://cloud.redhat.com/)[Developers](https://developers.redhat.com/)[Start a trial](/en/products/trials)[Contact](/en/contact)Select a language简体中文EnglishFrançaisDeutschItaliano日本語한국어PortuguêsEspañol[Contact us](/en/contact)
English
### Select a language

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)
Select a language简体中文EnglishFrançaisDeutschItaliano日本語한국어PortuguêsEspañol![](/themes/custom/rh_base_ui/dist/img/talk-bubble.svg)

* [Products](https://www.redhat.com/en/technologies/all-products)
* [Solutions](https://www.redhat.com/en/solutions)
* [Training & services](https://www.redhat.com/en/services)
* [Resources](https://www.redhat.com/en/resources)
* Partners
* [About](https://www.redhat.com/en/about)
* [Contact us](/en/contact)

### Select a language

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)

# Red Hat Support

## Go beyond support by engaging with our experts

Our teams collaborate with you to ensure you accomplish your goals with Red Hat solutions. The relationship we build with you is designed to provide you with the tools and resources you need to find success on your IT journey.

![](/rhdc/managed-files/support-header.svg)

## Configured for your success

We develop a holistic understanding of your experience as a customer by ensuring our support and engineering teams work together.

Our support team works hand in hand with the best engineers in the industry to quickly turn customer feedback into product improvements. This direct line of communication allows us to hone in on proactive fixes that can impact your bottom line.

### Quick links

* Search our [Knowledgebase](https://access.redhat.com/search/#/?q=&p=1&sort=relevant&scoped&documentKind=Knowledgebase)
* Find [product documentation](https://access.redhat.com/documentation/en-us/)
* Access the [product security center](https://access.redhat.com/security/)
* Connect with [our support team](https://access.redhat.com/support)
* Team up with a [technical account manager](/en/services/support/technical-account-management "Technical account management")
* Take advantage of [partner support](https://connect.redhat.com/en/support)

## Find the right level of support

We have different tiers of support designed to meet your unique needs.

|  | Self-support | Standard | Premium |
| --- | --- | --- | --- |
| Access to Red Hat products | checkmark | checkmark | checkmark |
| Access to our knowledgebase and tools in our award-winning Customer Portal | checkmark | checkmark | checkmark |
| Access to support engineers during standard business hours |  | checkmark | checkmark |
| Access to support engineers 24x7 for high-severity issues |  |  | checkmark |

We also feature specialized support options that can be tailored to the unique needs of companies of all sizes and industries. The Red Hat® [Enhanced Solution Support](/en/resources/enhanced-solution-support-datasheet "Red Hat Enhanced Solution Support: 24x7 engineering support") offering reduces downtime and boosts confidence through access to senior level engineers, as well as resolution and restoration SLAs—helping you stay up and running as you innovate, scale, and deploy. Our engineers help restore your operations quickly and accelerate the path to final resolution, identifying the root cause which helps protect against recurrences in the future. Enhanced Solution Support engineers, who are already familiar with your environment, will be there to assist with critical issues in production environments so that you can consistently deliver the cloud services your customers demand. This offering is available for Red Hat OpenShift® and Red Hat OpenStack® Platform customers.

### Personalized support

Connect with a technical adviser for collaborative planning and specialized guidance. Our Technical Account Managers help you streamline deployments, resolve issues, and shape your technology strategy to meet your toughest business challenges.

[Explore Technical Account Management](/en/services/support/technical-account-management)

## Award winners since 2011

We’ve evolved the traditional software subscription model, combining the best elements of our services to exceed customer expectations. The Association of Support Professionals has honored Red Hat’s Customer Portal as one of “The Top Ten Best Support Websites” for 13 years running.

[See why the Customer Portal keeps earning industry recognition](https://access.redhat.com/)

![Gold and green star with text ASP best support websites of 2023](/rhdc/managed-files/ASP-Award-Design.jpg)

## What they're saying

![BSE logo](/rhdc/managed-files/bse-logo-2.png)

> Icon-Red\_Hat-Media\_and\_documents-Quotemark\_Open-B-Red-RGB
>
> We have found the support from Red Hat to be exemplary. Whenever we need anything from them, they have given it … Red Hat is now our backbone. Our business cannot run if Red Hat is not there.
>
> Ashishkumar Chauhan
>
> CEO, BSE

> Icon-Red\_Hat-Media\_and\_documents-Quotemark\_Open-B-Red-RGB
>
> I like the fact that they really dig into things and then provide answers. As the single Linux guy, I kind of need that second admin next to me sometimes to say, "Hey, what about this?" and I am able to do that through the portal. I get my questions answered and trouble tickets resolved.
>
> Erik Widholm
>
> Sr. Enterprise Engineer

[Read more user reviews](/en/technologies/linux-platforms/enterprise-linux/user-reviews)

## Have questions?

[Contact Support team](https://access.redhat.com/support)

[Visit the Customer Portal](https://access.redhat.com/)

[![Red Hat logo](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](/en)[LinkedIn](https://www.linkedin.com/company/red-hat)[YouTube](https://www.youtube.com/user/RedHatVideos)[Facebook](https://www.facebook.com/redhatinc)[X](https://twitter.com/RedHat)
### Products

* [Red Hat Enterprise Linux](/en/technologies/linux-platforms/enterprise-linux)
* [Red Hat OpenShift](/en/technologies/cloud-computing/openshift)
* [Red Hat Ansible Automation Platform](/en/technologies/management/ansible)
* [Cloud services](/en/technologies/cloud-computing/openshift/cloud-services)
* [See all products](/en/technologies/all-products)

### Tools

* [Training and certification](/en/services/training-and-certification)
* [My account](https://www.redhat.com/wapps/ugc/protected/personalInfo.html)
* [Customer support](https://access.redhat.com)
* [Developer resources](https://developers.redhat.com/)
* [Find a partner](https://catalog.redhat.com/partners)
* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
* [Red Hat value calculator](/en/solutions/value-calculator)
* [Documentation](https://docs.redhat.com/en)

### Try, buy, & sell

* [Product trial center](/en/products/trials)
* [Red Hat Marketplace](https://marketplace.redhat.com)
* [Red Hat Store](https://www.redhat.com/en/store)
* [Buy online (Japan)](https://www.redhat.com/en/about/japan-buy)
* [Console](https://cloud.redhat.com/)

### Communicate

* [Contact sales](/en/contact/sales)
* [Contact customer service](/en/contact/customer-service)
* [Contact training](/en/services/training-and-certification/contact-us)
* [Social](/en/about/social)

### About Red Hat

We’re the world’s leading provider of enterprise open source solutions—including Linux, cloud, container, and Kubernetes. We deliver hardened solutions that make it easier for enterprises to work across platforms and environments, from the core datacenter to the network edge.

### Select a language

![](https://static.redhat.com/libs/redhat/rh-iconfont/4/svg/web-icon-globe.svg)

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)
### Red Hat legal and privacy links

* [About Red Hat](/en/about/company)
* [Jobs](/en/jobs)
* [Events](/en/events)
* [Locations](/en/about/office-locations)
* [Contact Red Hat](/en/contact)
* [Red Hat Blog](/en/blog)
* [Diversity, equity, and inclusion](/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

© 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](/en/about/privacy-policy)
* [Terms of use](/en/about/terms-use)
* [All policies and guidelines](/en/about/all-policies-guidelines)
* [Digital accessibility](/en/about/digital-accessibility)



=== Content from bugzilla.mozilla.org_f18a3610_20250124_234833.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/597162)
* [XML](/show_bug.cgi?ctype=xml&id=597162)

Closed
[Bug 597162](/show_bug.cgi?id=597162)

Opened 14 years ago
Closed 14 years ago

# potential arbitrary code execution when type=content chrome frames web content

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

potential arbitrary code execution when type=content chrome frames web content

## Categories

### (Core :: Security, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Security#Security)

Security
▾

Core :: Security
For non-crypto security bugs. Or use this general component if you know you have a Browser security bug, but not sure what component to use. Bug will be reviewed for proper component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Security&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Security&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Security)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| blocking2.0 | --- | [-](/buglist.cgi?f1=cf_blocking_20&o1=equals&v1=-) |
| status2.0 | --- | [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | + | fixed |
| firefox6 | + | fixed |
| blocking2.0 |  | - |
| status2.0 |  | wanted |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: dveditz, Assigned: mrbkap)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/89d2149736265010bfe669ce8c3075c0?d=mm&size=40)  [mrbkap](/user_profile?user_id=69426)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=40)  [dveditz](/user_profile?user_id=1689)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=40)  [dveditz](/user_profile?user_id=1689)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

16 people

## References

### (Depends on 1 open bug)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[652736](/show_bug.cgi?id=652736 "NEW - The add-ons manager (and probably other privileged UI) should be loaded in a chrome docshell rather than a content docshell"), [641342](/show_bug.cgi?id=641342 "VERIFIED FIXED - Same-origin policy not applied when chrome: resources are loaded via a custom protocol handler")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

Dependency [tree](/showdependencytree.cgi?id=597162&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=597162)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Whiteboard: [sg:critical] [fixed in TM in bug 641342] plausible social engineering escalation in testcase4 )

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical] [fixed in TM in bug 641342] plausible social engineering escalation in testcase4

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=597162#c0)• 14 years ago |
|  | |

Firefox 4 introduces about:addons -- the former add-ons dialog reborn as chrome-privileged content tab. If you select the "Get Addons" section you get a non-chrome frame hosting addons.mozilla.org. As bzbarsky notes in [bug 593387 comment 29](/show_bug.cgi?id=593387#c29 "VERIFIED FIXED - \"Get Add-ons\" pane is being restricted by X-FRAME-OPTIONS") this means web content can get a reference to a privileged chrome window through window.top
Can you do anything fun with this?
For testing purposes you can point extensions.webservice.discoverURL wherever you like (must be an https URL, although it can then navigate to non-SSL which is probably a bug).
If there are any new wrapper problems you can attack this way that would be good to know. 1) we may use this chrome-tab approach elsewhere, and 2) should AMO get hacked/defaced we don't want it to be able to escape into Firefox chrome.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a16_1689)• 14 years ago |

Whiteboard: [sg:audit]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a37_1689)• 14 years ago |

Summary: Investigate abuse of chrome content window framing non-chrome → Investigate potential for abuse of chrome content window framing non-chrome

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a2747_7044)• 14 years ago |

blocking2.0: --- → final+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a27930_1689)• 14 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=597162#c1)• 14 years ago |
|  | |

window.top is wrapped in a XOW. The XOW seems to be safe, though content can
annoy a user by setting top.location.
But, if content accesses window.top via a XPCNativeWrapper or a SJOW, the
chrome window is wrapped in a COW. And, since the chrome window does not have
\_\_exposedProps\_\_ property, content can access properties of the chrome window
via the COW. And, about:addons page has a function that is abusable via the
COW.

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=597162#c2)• 14 years ago |
|  | |

Attached file
[testcase - arbitrary code execution](attachment.cgi?id=477116) (obsolete)
— [Details](attachment.cgi?id=477116&action=edit)

|  | [Reed Loden [:reed]](/user_profile?user_id=159758) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a563700_159758)• 14 years ago |

Whiteboard: [sg:audit] → [sg:critical]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=597162#c3)• 14 years ago |
|  | |

"sg:critical" may be a slight overstatement in practice. It's an accurate measure of the ultimate effects assuming other conditions that we don't yet know to be true: AMO getting hacked (specifically the page loaded by about:addons, not an arbitrary XSS) or us having another similar content-in-chrome-content situation. sg:very-nervous. I'll knock it down a notch due to mitigations, but we need to get on this.
And think hard about whether we have any other type=content chrome pages framing unprivileged content.
Should we reassign this to mrbkap now?Summary: Investigate potential for abuse of chrome content window framing non-chrome → potential arbitrary code execution when type=content chrome frames web contentWhiteboard: [sg:critical] → [sg:high] nervous it's sg:critical it the conditions are right

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a635501_1689)• 14 years ago |

Whiteboard: [sg:high] nervous it's sg:critical it the conditions are right → [sg:high] nervous it's sg:critical if the conditions are right

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=597162#c4)• 14 years ago |
|  | |

Well, that depends on how we want to fix it. I think that we should probably fix this in docshell/dom by security-checking window.top. bz, does that make sense? Using the content/chrome docshell distinction to determine security accesses doesn't seem like a really good idea, since we've had problems with it in the past and aren't likely to get a UI-side solution any time soon, unless a docshell could dynamically switch between content-type and chrome-type.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=597162#c5)• 14 years ago |
|  | |

You mean change window.top to do the check that we recently made the X-Frame-Options stuff do?
We could probably do that, but it might break other things, of course (e.g. if any of these silly chrome-loading-in-content-docshell use window.top). Also, it doesn't help this problem enough in the "hard" cases; see below.
> Using the content/chrome docshell distinction to determine security accesses
> doesn't seem like a really good idea
Well.... that's been the setup literally forever. The problem is that people keep misusing it, as you point out.
> aren't likely to get a UI-side solution any time soon
Why not? The only reason we don't have one yet is that we never made it a priority to have one, in spite of me pointing out for years (literally) that the way we load chrome things in tabs is broken by design and will bit us eventually security-wise.
> unless a docshell could dynamically switch between content-type and
> chrome-type.
That wouldn't obviously help us.
The testcase in [comment 2](/show_bug.cgi?id=597162#c2 "RESOLVED FIXED - potential arbitrary code execution when type=content chrome frames web content") works if content script can get a reference to that chrome window in \_any\_ way, right? Not just window.top? In particular, if I call window.open and save the result in my evil.com page and then convince the user to navigate to about:addons in that resulting window, we get the same exploit, as far as I see. The only way to prevent that problem is to make sure that we never load about:addons into any window that evil content may have a handle to or may get a handle to in the future. In particular, just silently mutating the docshell type on navigation doesn't do what we want. As long as we ever allow a docshell to contain a system-principal page \_and\_ to be reachable from non-chrome script (not necessarily at the same point in time!) evil script can get hold of the window.
Now maybe we can change some security check somewhere to make the particular exploit in [comment 2](/show_bug.cgi?id=597162#c2 "RESOLVED FIXED - potential arbitrary code execution when type=content chrome frames web content") not work. And maybe moz\_bug\_r\_a4 can find another one. But maybe we should just finally stop the whack-a-mole and use the completely functional security mechanism we already have in place and change the UI to not try load system-principal pages in content docshells, followed by enforcement on the core end to fail such loads if they're tried?
All a matter of priorities, I guess....

|  | [Benjamin Smedberg](/user_profile?user_id=7044) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=597162#c6)• 14 years ago |
|  | |

You mean if I get a reference to a window (using window.open, say), and then the user navigates to about:config or something? I thought the inner window was designed to protect against this case. How is this different from navigating to any other unrelated domain which I'm not allowed to script?
I think our old definition of what makes a content/chrome docshell needs work. In my mind, the crucial difference is how it navigates and whether it can be targeted for loads. It's not primarily a distinction in terms of security, which should be handled through inner/outer windows, proxies, and such.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=597162#c7)• 14 years ago |
|  | |

[The following is from bz -- I'm commenting on bz's behalf because his browser is being wonky]
> You mean if I get a reference to a window (using window.open, say), and then
> the user navigates to about:config or something?
Yes.
> How is this different from navigating to any other unrelated domain which I'm not allowed to script?
Because we special-case chrome (chrome-principal? Not sure) stuff in XPConnect, apparently. See [comment 1](/show_bug.cgi?id=597162#c1 "RESOLVED FIXED - potential arbitrary code execution when type=content chrome frames web content"): you don't get COWs for random domains. If you think this is a COW bug, then Blake's your man. Fwiw, I think that's likely what we need to fix here....
> In my mind, the crucial difference is how it navigates and whether it can be targeted for loads.
Note that we have different types of content windows depending on whether they can be targeted for loads. The primary difference between chrome and content docshell is whether it's existence is visible to untrusted content at all or is just a browser implementation detail.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=597162#c8)• 14 years ago |
|  | |

(In reply to [comment #5](/show_bug.cgi?id=597162#c5 "RESOLVED FIXED - potential arbitrary code execution when type=content chrome frames web content"))
> in spite of me pointing out for years (literally) that the way we load
> chrome things in tabs is broken by design and will bite us eventually
> security-wise.
Many years. [bug 286651](/show_bug.cgi?id=286651 "NEW - Strip privilege from chrome loaded in a browser/content window") was filed in 2005 and that was after a lot of discussion iirc. And even then we already had things depending on running chrome privileged code in a content window.

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=597162#c9)• 14 years ago |
|  | |

(In reply to [comment #5](/show_bug.cgi?id=597162#c5 "RESOLVED FIXED - potential arbitrary code execution when type=content chrome frames web content"))
> The testcase in [comment 2](/show_bug.cgi?id=597162#c2 "RESOLVED FIXED - potential arbitrary code execution when type=content chrome frames web content") works if content script can get a reference to that
> chrome window in \_any\_ way, right? Not just window.top? In particular, if I
> call window.open and save the result in my evil.com page and then convince the
> user to navigate to about:addons in that resulting window, we get the same
> exploit, as far as I see.
Yeah, that way chrome pages are exploitable.

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=597162#c10)• 14 years ago |
|  | |

Attached file
[testcase 2 - arbitrary code execution](attachment.cgi?id=478777) (obsolete)
— [Details](attachment.cgi?id=478777&action=edit)

The following pages are exploitable:
about:about, about:addons, about:config, about:crashes, about:memory,
about:plugins, about:privatebrowsing, about:sessionrestore, about:support,
about:sync-tabs

|  | [chris hofmann](/user_profile?user_id=2687) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=597162#c11)• 14 years ago |
|  | |

probably need to have mrbkap or jst to pick up ownership of this bug at this point. who can have a look?

|  | [Damon Sicore (:damons)](/user_profile?user_id=269330) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=597162#c12)• 14 years ago |
|  | |

Assigning to jst.Assignee: moz\_bug\_r\_a4 → jst

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=597162#c13)• 14 years ago |
|  | |

Since compartments has landed, the old testcases no longer work. I'll attach
new testcases.

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=597162#c14)• 14 years ago |
|  | |

Attached file
[testcase 3 (modified testcase 1)](attachment.cgi?id=483674)
— [Details](attachment.cgi?id=483674&action=edit)

This uses the Error Console instead of the Web Console due to [bug 604722](/show_bug.cgi?id=604722 "VERIFIED FIXED - Web Console won't open on chrome content").

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=597162#c15)• 14 years ago |
|  | |

Attached file
[testcase 4 (modified testcase 2)](attachment.cgi?id=483676)
— [Details](attachment.cgi?id=483676&action=edit)

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=597162#c16)• 14 years ago |
|  | |

Blake, this would be fixed if we make chrome native's default to safe, you had a plan to do that, right?

|  | [Blake Kaplan (:mrbkap) (inactive)](/user_profile?user_id=69426)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=597162#c17)• 14 years ago |
|  | |

Yes.

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a7091011_12352)• 14 years ago |

blocking2.0: final+ → betaN+

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=597162#c18)• 14 years ago |
|  | |

Blake has a plan, he gets to own this.Assignee: jst → mrbkap

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a8303606_12352)• 14 years ago |

Summary: potential arbitrary code execution when type=content chrome frames web content → [fixed by 572647] potential arbitrary code execution when type=content chrome frames web content

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a9525941_12352)• 14 years ago |

Whiteboard: [sg:high] nervous it's sg:critical if the conditions are right → [sg:high] nervous it's sg:critical if the conditions are right, softblocker

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a9698464_12352)• 14 years ago |

Whiteboard: [sg:high] nervous it's sg:critical if the conditions are right, softblocker → [sg:high] nervous it's sg:critical if the conditions are right [softblocker]

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=597162#c19)• 14 years ago |
|  | |

Seems like this is still a problem even after [bug 572647](/show_bug.cgi?id=572647 "RESOLVED FIXED - XPCConvert::NativeInterface2JSObject should create COWs automatically") got fixed, the second testcase still appears to work here.Summary: [fixed by 572647] potential arbitrary code execution when type=content chrome frames web content → potential arbitrary code execution when type=content chrome frames web content

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=597162#c20)• 14 years ago |
|  | |

If possible, could someone please cc me on [bug 572647](/show_bug.cgi?id=572647 "RESOLVED FIXED - XPCConvert::NativeInterface2JSObject should create COWs automatically")?

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=597162#c21)• 14 years ago |
|  | |

Done.

|  | [(no longer active)](/user_profile?user_id=251051) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=597162#c22)• 14 years ago |
|  | |

Is there a good reason that this blocks betaN? If not, it should be moved over to final+.Whiteboard: [sg:high] nervous it's sg:critical if the conditions are right [softblocker] → [sg:high] nervous it's sg:critical if the conditions are right [softblocker][final?]

|  | [Mike Beltzner [:beltzner, not reading bugmail]](/user_profile?user_id=137548) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=597162#c23)• 14 years ago |
|  | |

Preeeetttty invasive code would make me feel better with beta feedback, but I agree that this can be a final blocker, especially if it's a soft blocker.blocking2.0: betaN+ → final+

|  | [Mike Beltzner [:beltzner, not reading bugmail]](/user_profile?user_id=137548) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=597162#c24)• 14 years ago |
|  | |

\*\* PRODUCT DRIVERS PLEASE NOTE \*\*
This bug is one of 7 automatically changed from blocking2.0:final+ to blocking2.0:.x during the endgame of Firefox 4 for the following reasons:
- it was marked as a soft blocking issue without a requirement for beta coverageblocking2.0: final+ → .x+

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a15577042_20209)• 14 years ago |

Blocks: [641342](/show_bug.cgi?id=641342 "VERIFIED FIXED - Same-origin policy not applied when chrome: resources are loaded via a custom protocol handler")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a16840014_1689)• 14 years ago |

[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- → [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)

|  | [Dave Townsend [:mossop]](/user_profile?user_id=91159) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a19116656_91159)• 14 years ago |

Depends on: [652736](/show_bug.cgi?id=652736 "NEW - The add-ons manager (and probably other privileged UI) should be loaded in a chrome docshell rather than a content docshell")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a19355411_1689)• 14 years ago |

[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=597162#c25)• 14 years ago |
|  | |

mrbkap: any ETA on this? Should someone else own the fix (and if so who?)?blocking2.0: .x+ → -
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B)Whiteboard: [sg:high] nervous it's sg:critical if the conditions are right [softblocker][final?] → [sg:critical] plausible social engineering escalation in testcase4

|  | [Christopher Blizzard (:blizzard)](/user_profile?user_id=14701) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=597162#c26)• 14 years ago |
|  | |

mrbkap, looking for an ETA here as this is tracking for Firefox 5.

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=597162#c27)• 14 years ago |
|  | |

With no patch and the suggestion that this change could be "invasive" I'm concerned that this is not likely to make the Firefox 5 train. Are we OK with that?

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=597162#c28)• 14 years ago |
|  | |

The patch in [bug 641342](/show_bug.cgi?id=641342 "VERIFIED FIXED - Same-origin policy not applied when chrome: resources are loaded via a custom protocol handler") fixes this bug and is landed on TM. It'll be on m-c after the next TM merge...

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a21084151_5003)• 14 years ago |

Whiteboard: [sg:critical] plausible social engineering escalation in testcase4 → [sg:critical] [fixed in TM in bug 641342] plausible social engineering escalation in testcase4

|  | [chris hofmann](/user_profile?user_id=2687) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=597162#c29)• 14 years ago |
|  | |

moz\_bug\_r\_a4, can you grab a tracemonkey build and try to confirm this bug is fixed there and is free of possible side effects. It would be good to land the fix on mozilla-central and try to get in fx5 beta if all looks well.

|  | [moz\_bug\_r\_a4](/user_profile?user_id=194398) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=597162#c30)• 14 years ago |
|  | |

It seems that the patch in [bug 641342](/show_bug.cgi?id=641342 "VERIFIED FIXED - Same-origin policy not applied when chrome: resources are loaded via a custom protocol handler") is already landed on mozilla-central.
<http://hg.mozilla.org/mozilla-central/pushloghtml?changeset=673f93bb84aa>
I confirmed that this bug is fixed on tracemonkey and mozilla-central.

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=597162#c31)• 14 years ago |
|  | |

This is fixed then. But not for Firefox 5 yet.No longer blocks: [641342](/show_bug.cgi?id=641342 "VERIFIED FIXED - Same-origin policy not applied when chrome: resources are loaded via a custom protocol handler")Status: NEW → RESOLVEDClosed: 14 years ago
[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)Depends on: [641342](/show_bug.cgi?id=641342 "VERIFIED FIXED - Same-origin policy not applied when chrome: resources are loaded via a custom protocol handler")Resolution: --- → FIXED

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=597162#c32)• 14 years ago |
|  | |

moving the Firefox 5 tracking over to the bug with the patches.
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B) → ---

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=597162#c33)• 14 years ago |
|  | |

The fix for [bug 641342](/show_bug.cgi?id=641342 "VERIFIED FIXED - Same-origin policy not applied when chrome: resources are loaded via a custom protocol handler") has landed in beta and does fix testcases 3 and 4
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=597162#a25816186_1689)• 14 years ago |

Group: core-security
You need to [log in](/show_bug.cgi?id=597162&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑



=== Content from www.redhat.com_32906b19_20250126_043454.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.mozilla.org_cd5be50d_20250124_234828.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2011-19

## Miscellaneous memory safety hazards (rv:3.0/1.9.2.18)

Announced
June 21, 2011
Reporter
Mozilla developers and community
Impact
Critical
Products
Firefox, SeaMonkey, Thunderbird
Fixed in

* Firefox 3.6.18
* Firefox 5
* SeaMonkey 2.2
* Thunderbird 3.1.11

### Description

Mozilla developers identified and fixed several memory safety bugs
in the browser engine used in Firefox and other Mozilla-based
products. Some of these bugs showed evidence of memory corruption
under certain circumstances, and we presume that with enough effort at
least some of these could be exploited to run arbitrary code.

### References

Bob Clary, Kevin Brosnan, Nils, Gary Kwong, Jesse Ruderman and
Christian Biesinger reported memory safety problems that were fixed in
clients based on mozilla5 and mozilla-1.9.2 (e.g. Firefox 5 and
Firefox 3.6.18 respectively).

* [Memory safety bugs - Firefox 5, Firefox 3.6](https://bugzilla.mozilla.org/buglist.cgi?bug_id=642734,642338,639648,646662,645572,629858,626262,643051)
* [CVE-2011-2374](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2374)

Bas Schouten, Igor Bukanov, Jesse Ruderman, Bill McCloskey, Olli
Pettay, Gary Kwong, Daniel Veditz and Marcia Knous reported memory
safety problems that were fixed in Firefox 5 and SeaMonkey 2.2. These
vulnerabilities did not affect versions prior to Firefox 4 and SeaMonkey 2.1

* [Memory safety bugs - Firefox 5](https://bugzilla.mozilla.org/buglist.cgi?bug_id=648705,643927,654015,653238,653026,652401,643839,597162,648022)
* [CVE-2011-2375](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2375)

Luke Wagner and Gary Kwong reported memory safety problems that
were fixed in Firefox 3.6.18 and Thunderbird 3.1.11 and did not affect
the JavaScript engine used in Firefox 4 and SeaMonkey 2.1.

* [Memory safety bugs - Firefox 3.6](https://bugzilla.mozilla.org/buglist.cgi?bug_id=650874,635235)
* [CVE-2011-2376](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2376)

**Rh0** reported a crash that was fixed in the browser engine used by
Firefox 3.6.18 and Thunderbird 3.1 and did not affect higher versions.

* <https://bugzilla.mozilla.org/show_bug.cgi?id=651990>
* [CVE-2011-2364](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2364)

**secenv** reported a crash that was fixed in the browser engine used by
Firefox 3.6.18 and Thunderbird 3.1.11 and did not affect higher versions.

* <https://bugzilla.mozilla.org/show_bug.cgi?id=655742>
* [CVE-2011-2365](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-2365)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_faa553bf_20250124_234848.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/654015)
* [XML](/show_bug.cgi?ctype=xml&id=654015)

Closed
[Bug 654015](/show_bug.cgi?id=654015)

Opened 14 years ago
Closed 14 years ago

# "ASSERTION: Requesting refresh driver after document has disconnected"

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

"ASSERTION: Requesting refresh driver after document has disconnected"

## Categories

### (Core :: SVG, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=SVG#SVG)

SVG
▾

Core :: SVG

Issues with the layout or rendering of SVG content and interacting with the SVG DOM.

Example bugs:

* SVG marker can not be clipped with clip-path
* x position adjustments of SVG vertical text on a path moves in the wrong direction

Specifications covered:

* SVG

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=SVG&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=SVG&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=SVG)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla6

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed) |
| firefox6 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| blocking2.0 | --- | [-](/buglist.cgi?f1=cf_blocking_20&o1=equals&v1=-) |
| status2.0 | --- | [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | + | fixed |
| firefox6 |  | fixed |
| blocking2.0 |  | - |
| status2.0 |  | wanted |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: dholbert)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/cd9b85b2e112bd7941b21ad03f42604e?d=mm&size=40)  [dholbert](/user_profile?user_id=278074)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jwatt](/user_profile?user_id=32767)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[662186](/show_bug.cgi?id=662186 "RESOLVED WORKSFORME - \"###!!! ABORT: Expecting to be paused for pagehide before disconnect: 'mPauseState & nsSMILTimeContainer::PAUSE_PAGEHIDE', file content/smil/nsSMILAnimationController.cpp\"...)"), [670324](/show_bug.cgi?id=670324 "RESOLVED INCOMPLETE - \"ASSERTION: Destroying a currently-showing document\" with XSLT")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[653238](/show_bug.cgi?id=653238 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious")

Dependency [tree](/showdependencytree.cgi?id=654015&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=654015)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, testcase, Whiteboard: [sg:critical?])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [dholbert](/user_profile?user_id=278074) | [in-testsuite](#c42 "14 years ago") | ? |
| --- | --- | --- |
| [dholbert](/user_profile?user_id=278074) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (8 files, 3 obsolete files)

| [testcase (makes Firefox assert during a subsequent GC)](/attachment.cgi?id=529377)  [14 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   615 bytes, text/html |  | [Details](/attachment.cgi?id=529377&action=edit) |
| --- | --- | --- |
| [stack trace for "ASSERTION: Requesting refresh driver after document has disconnected"](/attachment.cgi?id=529378)  [14 years ago](#c1)  [Jesse Ruderman](/user_profile?user_id=11608)   3.33 KB, text/plain |  | [Details](/attachment.cgi?id=529378&action=edit) |
| [testcase 2 (slightly reduced)](/attachment.cgi?id=529497)  [14 years ago](#c4)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   439 bytes, text/html |  | [Details](/attachment.cgi?id=529497&action=edit) |
| [stacktraces from OnPageHide/OnPageShow/Disconnect](/attachment.cgi?id=529547)  [14 years ago](#c7)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   31.19 KB, text/plain |  | [Details](/attachment.cgi?id=529547&action=edit) |
| [iframe removal test](/attachment.cgi?id=529564)  [14 years ago](#c12)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   358 bytes, text/html |  | [Details](/attachment.cgi?id=529564&action=edit) |
| [patch 1, first attempt: ditch old viewer, like in nsDocShell::Destroy](/attachment.cgi?id=529617)  [14 years ago](#c19)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   1.15 KB, patch | bzbarsky : [feedback-](#c27 "14 years ago") | [Details](/attachment.cgi?id=529617&action=edit) | [Diff](/attachment.cgi?id=529617&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=529617) |
| [patch 1, second attempt: Stop() after firing onpagehide](/attachment.cgi?id=529620)  [14 years ago](#c20)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   1.10 KB, patch |  | [Details](/attachment.cgi?id=529620&action=edit) | [Diff](/attachment.cgi?id=529620&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=529620) |
| [(not-quite-ready version of patch 2)](/attachment.cgi?id=529624)  [14 years ago](#c21)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   1.22 KB, patch |  | [Details](/attachment.cgi?id=529624&action=edit) | [Diff](/attachment.cgi?id=529624&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=529624) |
| [patch 2: catch this slightly earlier in SMIL code](/attachment.cgi?id=529625)  [14 years ago](#c22)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   983 bytes, patch | bzbarsky : [review+](#c29 "14 years ago")  asa : [approval-mozilla-aurora+](#a1562329_5003 "14 years ago")  asa : [approval-mozilla-beta+](#a1560883_5003 "14 years ago") | [Details](/attachment.cgi?id=529625&action=edit) | [Diff](/attachment.cgi?id=529625&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=529625) |
| [patch 1, third attempt: Stop() \*before\* firing onpagehide](/attachment.cgi?id=531822)  [14 years ago](#c38)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   1.08 KB, patch | bzbarsky : [review+](#c40 "14 years ago")  asa : [approval-mozilla-aurora+](#c46 "14 years ago")  asa : [approval-mozilla-beta+](#a1560889_5003 "14 years ago") | [Details](/attachment.cgi?id=531822&action=edit) | [Diff](/attachment.cgi?id=531822&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=531822) |
| [patch 3: crashtests (as mochitests) plus assertion upgrade](/attachment.cgi?id=531824)  [14 years ago](#c39)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   4.25 KB, patch | bzbarsky : [review+](#c41 "14 years ago") | [Details](/attachment.cgi?id=531824&action=edit) | [Diff](/attachment.cgi?id=531824&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=531824) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=654015#c0)• 14 years ago |
|  | |

Attached file
[testcase (makes Firefox assert during a subsequent GC)](attachment.cgi?id=529377)
— [Details](attachment.cgi?id=529377&action=edit)

1. Start Firefox (with a new profile?)
2. Load the testcase
3. Click the testcase's button
4. Quit Firefox (or force GC?)
Result: assert during shutdown
###!!! ASSERTION: Requesting refresh driver after document has disconnected!: 'Error', file content/smil/nsSMILAnimationController.cpp, line 840
Based on hg blame for the assertion, I suspect this might be a regression from [bug 653238](/show_bug.cgi?id=653238 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious").

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=654015#c1)• 14 years ago |
|  | |

Attached file
[stack trace for "ASSERTION: Requesting refresh driver after document has disconnected"](attachment.cgi?id=529378)
— [Details](attachment.cgi?id=529378&action=edit)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=654015#c2)• 14 years ago |
|  | |

(In reply to [comment #0](/show_bug.cgi?id=654015#c0 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""))
> testcase (makes Firefox crash during a subsequent GC)
[...]
> Result: assert during shutdown
Jesse: to be clear, does this actually crash for you, or just assert?
In my debug build, I can repro the assert-at-shutdown and (if I don't quit) the assert-after-a-few-seconds (at a GC), but haven't gotten this to crash yet.
> Based on hg blame for the assertion, I suspect this might be a regression from
> [bug 653238](/show_bug.cgi?id=653238 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious").
It's probably more likely that we already had some form of this problem, and we're just catching this now due to the additional sanity-checking & protections added in [bug 653238](/show_bug.cgi?id=653238 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious").

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a16398_11608)• 14 years ago |

[Attachment #529377](/attachment.cgi?id=529377&action=edit "testcase (makes Firefox assert during a subsequent GC)") -
Attachment description: testcase (makes Firefox crash during a subsequent GC) → testcase (makes Firefox assert during a subsequent GC)

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=654015#c3)• 14 years ago |
|  | |

Sorry, it just asserts. I got confused because it was reduced from a testcase that aborted (before shutdown). This is the abort:
###!!! ABORT: Clearing window pointer while animations are unpaused: 'aScriptGlobalObject || !mAnimationController || mAnimationController->IsPausedByType( nsSMILTimeContainer::PAUSE\_PAGEHIDE | nsSMILTimeContainer::PAUSE\_BEGIN)', file /builds/slave/cen-osx64-dbg/build/content/base/src/nsDocument.cpp, line 3766

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a18723_278074)• 14 years ago |

OS: Mac OS X → AllHardware: x86\_64 → All

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=654015#c4)• 14 years ago |
|  | |

Attached file
[testcase 2 (slightly reduced)](attachment.cgi?id=529497)
— [Details](attachment.cgi?id=529497&action=edit)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=654015#c5)• 14 years ago |
|  | |

So, the piece of my logic in [bug 653238](/show_bug.cgi?id=653238 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious") that we're violating here is this:
> However, during document teardown, we'll always(?) hit nsDocument::OnPageHide,
> which calls mAnimationController->OnPageHide()
In this case, we have two nested animationControllers -- one for the outer <svg>, and one for the inner <svg>. It looks like we're only getting an OnPageHide call for the outer one.
I think we probably want nsSMILAnimationController::OnPageHide to propagate that call to all of its children.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=654015#c6)• 14 years ago |
|  | |

Actually I don't think that's the problem, sorry. Digging more...

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=654015#c7)• 14 years ago |
|  | |

Attached file
[stacktraces from OnPageHide/OnPageShow/Disconnect](attachment.cgi?id=529547)
— [Details](attachment.cgi?id=529547&action=edit)

So the issue here is that we're getting calls in this order (using testcase 2):
(1) nsDocument::OnPageShow
(2) nsDocument::OnPageHide
(3) nsDocument::OnPageShow
(4) \*\*\*FOR A DIFFERENT nsDocument object: nsDocument::OnPageHide
(5) ~nsDocument (which calls nsSMILAnimationController::Disconnect)
steps 1,2,3, and 5 are all for the same nsHTMLDocument object.
step 4 is for \*another\* nsHTMLDocument object.
I've attached stack traces of this series of calls (copied directly from a log with GDB set up to print a backtrace & continue at each of these points).
As noted in the quoted chunk in [Comment 5](/show_bug.cgi?id=654015#c5 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""), our SMIL code currently assumes that (after receiving a call to OnPageShow) we'll always receive a call to OnPageHide before the document dies. The testcases here make us violate this assumption.
I'm not sure if the assumption is bad, or if the assumption \*should\* hold but our document-teardown code is broken.
bz, smaug -- is it busted here that we're getting "OnPageShow" but never a corresponding "OnPageHide", for a particular document?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=654015#c8)• 14 years ago |
|  | |

Note that these...
> (2) nsDocument::OnPageHide
> (3) nsDocument::OnPageShow
...are both inside of a call to "nsDocShell::LoadHistoryEntry", which presumably corresponds to "w.history.back();" in the testcase.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=654015#c9)• 14 years ago |
|  | |

...and the mysterious different document from (4) actually gets \*created\* between steps (2) and (3), apparently as a transitory "about:blank" viewer document. (in nsDocShell::CreateAboutBlankContentViewer / nsContentDLF::CreateBlankDocument)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=654015#c10)• 14 years ago |
|  | |

So, the most straightforward way to fix this would be to have nsSMILAnimationController::Disconnect() make a call to nsSMILAnimationController::OnPageHide(), for good measure in case we never received an OnPageHide notification from our document.
That'd only make sense if we think it's kosher for Documents to go away without sending us that OnPageHide notification, though, which I'm not sure about per the end of [comment 7](/show_bug.cgi?id=654015#c7 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"").

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=654015#c11)• 14 years ago |
|  | |

Hmm. Do we fire a pagehide if the iframe a document is in is removed from the DOM?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=654015#c12)• 14 years ago |
|  | |

Attached file
[iframe removal test](attachment.cgi?id=529564)
— [Details](attachment.cgi?id=529564&action=edit)

(In reply to [comment #11](/show_bug.cgi?id=654015#c11 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""))
> Hmm. Do we fire a pagehide if the iframe a document is in is removed from the
> DOM?
Yes - if I put a breakpoint at nsDocument::OnPageHide, I get one hit when I click the "remove iframe" button in this testcase. (I think that's what you were asking - let me know if I misunderstood)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=654015#c13)• 14 years ago |
|  | |

That's what I meant, yes. So I wonder how we manage to get a ~nsDocument without a pagehide on the same document....

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=654015#c14)• 14 years ago |
|  | |

So the unbalanced OnPageShow is caused by this counterintuitive stack (summarized from the last OnPageShow stack in [comment 7](/show_bug.cgi?id=654015#c7 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"")'s attachment):
#0 nsDocument::OnPageShow
#1 DocumentViewerImpl::LoadComplete
#2 nsDocShell::EndPageLoad
#3 nsDocShell::OnStateChange
#4 nsDocLoader::FireOnStateChange
[...]
#8 nsLoadGroup::RemoveRequest
#9 nsDocument::SetScriptGlobalObject (setting it to nsnull)
#10 DocumentViewerImpl::Close
#11 nsDocShell::SetupNewViewer
So we start out by trying to close our document (levels 11 & 10), which makes us cancel its load groups, which fires a notification that makes us think we're now ready to \*show\* our document. That seems wrong to me.
(Note that the nsDocShell at level 11 is the same as the one at levels 2 & 3, and the nsDocument at level 9 is the same as the one at level 0)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=654015#c15)• 14 years ago |
|  | |

Aha -- so I think we \*expect\* that final OnPageHide to happen at nsDocShell tear-down time.
In particular -- nsDocShell::Destroy calls FirePageHideNotification which calls mContentViewer->PageHide().
However, in this case, the history option \*replaces our mContentViewer\* with a stub one pointing at an "about:blank" document. (from "CreateAboutBlankContentViewer" mentioned above) So nsDocShell::Destroy sends PageHide to \*that\* document, not our old one.
If I comment out the call to CreateAboutBlankContentViewer and just behave as if it failed, then everything works out fine. So I think CreateAboutBlankContentViewer is basically killing us here. In this case, it's only called for javascript: URLs, which is probably why we haven't hit issues from this more often.
<http://mxr.mozilla.org/mozilla-central/source/docshell/base/nsDocShell.cpp?mark=9981-9983,9992-9992#9981>

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=654015#c16)• 14 years ago |
|  | |

CreateAboutBlankContentViewer even contains a call to "FirePageHideNotification" just like the one in nsDocShell::Destroy. So I think it's intending to clean up after itself, and I think that's supposed to be the last word in pagehide-vs.-pageshow status.
The problem is that we're accidentally triggering one more "bonus" OnPageShow \*after\* that page-hide, via the counterintuitive stack from [comment 14](/show_bug.cgi?id=654015#c14 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"").

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=654015#c17)• 14 years ago |
|  | |

> That seems wrong to me.
In general, firing pageshow when stopping the document load is correct; think the user hitting the stop button.
It sounds like the sequence of events here is that we have a document that's in the middle of loading and has already embedded its content viewer but NOT yet fired pageshow. Then CreateAboutBlankContentViewer is called, which fires pagehide on the old viewer, but doesn't actually stop the old load. Then it embeds a new viewer which is what kills off the old viewer and stops the load, right?
It'd make sense to stop the old viewer's loadgroup in CreateAboutBlankContentViewer before calling PageHide on it, perhaps... Would that fix the issue here?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=654015#c18)• 14 years ago |
|  | |

(In reply to [comment #17](/show_bug.cgi?id=654015#c17 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""))
> > That seems wrong to me.
>
> In general, firing pageshow when stopping the document load is correct; think
> the user hitting the stop button.
Right -- that part makes sense. I meant more that firing pageshow when \*closing\* the document seems broken.
> It sounds like the sequence of events here is that we have a document that's in
> the middle of loading and has already embedded its content viewer but NOT yet
> fired pageshow. Then CreateAboutBlankContentViewer is called, which fires
> pagehide on the old viewer, but doesn't actually stop the old load. Then it
> embeds a new viewer which is what kills off the old viewer and stops the load,
> right?
Yes, I think so.
> It'd make sense to stop the old viewer's loadgroup in
> CreateAboutBlankContentViewer before calling PageHide on it, perhaps... Would
> that fix the issue here?
That sounds like it might work. I've got an alternate patch that's along the same lines, so I'll post that first and then try what you suggested.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=654015#c19)• 14 years ago |
|  | |

Attached patch

[patch 1, first attempt: ditch old viewer, like in nsDocShell::Destroy](attachment.cgi?id=529617&action=diff) (obsolete)
— [Details](attachment.cgi?id=529617&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=529617)

This patch just cleans up the existing mContentViewer value inside of CreateAboutBlankContentViewer, before we've called e.g. "Embed" (which triggers the unwanted OnPageHide call).
I'm copying the existing mContentViewer cleanup code from nsDocShell::Destroy. (and I'm only doing it if !mSavingOldViewer, though I'm not sure if I actually need that check -- I don't know the conditions under which mSavingOldViewer would be set.)
I've confirmed locally that this fixes the problem, and it made some intuitive sense as a first shot, but I haven't sanity-checked it across all of our testsuites or anything.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=654015#c20)• 14 years ago |
|  | |

Attached patch

[patch 1, second attempt: Stop() after firing onpagehide](attachment.cgi?id=529620&action=diff) (obsolete)
— [Details](attachment.cgi?id=529620&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=529620)

...and here's the approach that bz suggested, which I've confirmed also works.
Not obsoleting my previous patch yet until I've gotten bz's feedback on which approach is better (in case there's some reason we'd actually want to clean up the contentviewer more directly / thoroughly.)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a106294_278074)• 14 years ago |

[Attachment #529617](/attachment.cgi?id=529617&action=edit "patch 1, first attempt: ditch old viewer, like in nsDocShell::Destroy") -
Attachment description: first attempt: ditch old viewer, like in nsDocShell::Destroy → patch 1, first attempt: ditch old viewer, like in nsDocShell::Destroy

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=654015#c21)• 14 years ago |
|  | |

Attached patch

[(not-quite-ready version of patch 2)](attachment.cgi?id=529624&action=diff) (obsolete)
— [Details](attachment.cgi?id=529624&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=529624)

Regardless of which tactic we take on the fix, we should take this assertion to catch this sort of issue slightly earlier, too.
(This basically just asserts that we get a notification from nsDocument::OnPageHide before getting a notification from ~nsDocument, without any "OnPageShow" calls in between.)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a107020_278074)• 14 years ago |

[Attachment #529624](/attachment.cgi?id=529624&action=edit "(not-quite-ready version of patch 2)") -
Attachment description: patch 2: catch this slightly earlier in SMIL code → (not-quite-ready version of patch 2)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=654015#c22)• 14 years ago |
|  | |

Attached patch

[patch 2: catch this slightly earlier in SMIL code](attachment.cgi?id=529625&action=diff)
— [Details](attachment.cgi?id=529625&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=529625)

(forgot to qref)Assignee: nobody → dholbert
[Attachment #529624](/attachment.cgi?id=529624&action=edit "(not-quite-ready version of patch 2)") -
Attachment is obsolete: trueStatus: NEW → ASSIGNED
[Attachment #529625](/attachment.cgi?id=529625&action=edit "patch 2: catch this slightly earlier in SMIL code") -
Flags: review?(bzbarsky)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a117465_278074)• 14 years ago |

[Attachment #529620](/attachment.cgi?id=529620&action=edit "patch 1, second attempt: Stop() after firing onpagehide") -
Flags: review?(bzbarsky)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a117473_278074)• 14 years ago |

[Attachment #529617](/attachment.cgi?id=529617&action=edit "patch 1, first attempt: ditch old viewer, like in nsDocShell::Destroy") -
Flags: feedback?(bzbarsky)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=654015#c23)• 14 years ago |
|  | |

FWIW, I pushed patch 1 second attempt & patch 2 to tryserver for sanity-checking. It passed, modulo known-randomorange:
<http://tbpl.mozilla.org/?tree=Try&rev=ee49290e4bce>

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a185527_1689)• 14 years ago |

blocking2.0: --- → -
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- → [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected)
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B)Whiteboard: [sg:critical?]

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=654015#c24)• 14 years ago |
|  | |

I'd told dveditz that this bug was likely security-sensitive and probably exploitable on 4.0 & Aurora, since the assertion-failure seems to indicate that we were trying to use nsSMILAnimationController::mDocument after it was deleted. (hence all the flags he just added)
However, it turns out it's not quite as bad as I'd thought. I just now noticed that this assertion is firing \*while we're in\* the nsDocument destructor, not \*after\* the destructor, as shown from the stack in [attachment 529378](/attachment.cgi?id=529378 "stack trace for \"ASSERTION: Requesting refresh driver after document has disconnected\"") [[details]](/attachment.cgi?id=529378&action=edit "stack trace for \"ASSERTION: Requesting refresh driver after document has disconnected\""). So mDocument isn't a deleted pointer yet after all, and nothing bad actually happens. (I confirmed this by placing a breakpoint in nsSMILAnimationController::RemoveChild in mozilla-aurora).
So I'm not so sure that this could be exploited. This might be better-classified as "sg:high".
Still, it seams reasonable to suppose that a yet-more-evil testcase might be able to leave us registered with a nsRefreshDriver after our document dies, due to the unbalanced PageShow call noted in [Comment 7](/show_bug.cgi?id=654015#c7 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""), and then we'd potentially outlive the document and deref its pointer after it's destroyed. We don't have such a testcase, but it seems possible.
So anyway -- this isn't as scary as I'd thought, but I still think it (and [bug 653238](/show_bug.cgi?id=653238 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious")) are worth backporting.

|  | [Johnathan Nightingale [:johnath]](/user_profile?user_id=210757) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=654015#c25)• 14 years ago |
|  | |

bz - can we get an ETA on review for these patches? This bug is on the tracking-firefox5 list (though maybe [comment 24](/show_bug.cgi?id=654015#c24 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"") means it doesn't really need to be, anymore). If it does need to be tracked against ff5, then we need to figure out how to move it forward. If it doesn't, Daniel, can you clear the + (and maybe just ask for approval when there's a patch to land)?

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=654015#c26)• 14 years ago |
|  | |

I will review these tonight. Sorry for the lag on them. :(

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=654015#c27)• 14 years ago |
|  | |

Comment on [attachment 529617](/attachment.cgi?id=529617 "patch 1, first attempt: ditch old viewer, like in nsDocShell::Destroy") [[details]](/attachment.cgi?id=529617&action=edit "patch 1, first attempt: ditch old viewer, like in nsDocShell::Destroy") [[diff]](/attachment.cgi?id=529617&action=diff "patch 1, first attempt: ditch old viewer, like in nsDocShell::Destroy") [[review]](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=529617)
patch 1, first attempt: ditch old viewer, like in nsDocShell::Destroy
So this worries me. I'd rather not do this except as a last resort.
[Attachment #529617](/attachment.cgi?id=529617&action=edit "patch 1, first attempt: ditch old viewer, like in nsDocShell::Destroy") -
Flags: feedback?(bzbarsky) → feedback-

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=654015#c28)• 14 years ago |
|  | |

Comment on [attachment 529620](/attachment.cgi?id=529620 "patch 1, second attempt: Stop() after firing onpagehide") [[details]](/attachment.cgi?id=529620&action=edit "patch 1, second attempt: Stop() after firing onpagehide") [[diff]](/attachment.cgi?id=529620&action=diff "patch 1, second attempt: Stop() after firing onpagehide") [[review]](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=529620)
patch 1, second attempt: Stop() after firing onpagehide
I'm a little surprised this worked. Shouldn't the Stop() call come \_before\_ FirePageHideNotification?

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=654015#c29)• 14 years ago |
|  | |

Comment on [attachment 529625](/attachment.cgi?id=529625 "patch 2: catch this slightly earlier in SMIL code") [[details]](/attachment.cgi?id=529625&action=edit "patch 2: catch this slightly earlier in SMIL code") [[diff]](/attachment.cgi?id=529625&action=diff "patch 2: catch this slightly earlier in SMIL code") [[review]](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=529625)
patch 2: catch this slightly earlier in SMIL code
r=me
[Attachment #529625](/attachment.cgi?id=529625&action=edit "patch 2: catch this slightly earlier in SMIL code") -
Flags: review?(bzbarsky) → review+

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=654015#c30)• 14 years ago |
|  | |

Also, can we add a test for this?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=654015#c31)• 14 years ago |
|  | |

(In reply to [comment #28](/show_bug.cgi?id=654015#c28 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""))
> I'm a little surprised this worked. Shouldn't the Stop() call come \_before\_
> FirePageHideNotification?
Possibly -- I don't know the significance of that particular ordering there. I can try the stop-before-hide ordering and see if it also works. (I see now that you'd suggested stop-before-hide at the end of [comment 17](/show_bug.cgi?id=654015#c17 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\"") -- sorry for missing that.)
Anyway, the important thing from my perspective was to have Stop() come before the call to \*Embed()\* (30 lines below), because \*that's\* the call that currently triggers the unwanted OnPageShow() (in the third backtrace of [attachment 529547](/attachment.cgi?id=529547 "stacktraces from OnPageHide/OnPageShow/Disconnect") [[details]](/attachment.cgi?id=529547&action=edit "stacktraces from OnPageHide/OnPageShow/Disconnect")), if we haven't stopped our load group.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=654015#c32)• 14 years ago |
|  | |

I would expect pageshow to fire when Stop() is called (is that not happening?). So with the ordering in the patch we're doing a pagehide and then should be doing a pageshow. Which is exactly what we want to avoid.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=654015#c33)• 14 years ago |
|  | |

(In reply to [comment #32](/show_bug.cgi?id=654015#c32 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""))
> I would expect pageshow to fire when Stop() is called (is that not
> happening?).
The PageShow is not happening. No calls are made to nsDocument::OnPageShow during the Stop() call in my current patch.
To see why, I put a breakpoint in DocumentViewerImpl::LoadComplete (the caller of the unwanted OnPageShow call in [attachment 529547](/attachment.cgi?id=529547 "stacktraces from OnPageHide/OnPageShow/Disconnect") [[details]](/attachment.cgi?id=529547&action=edit "stacktraces from OnPageHide/OnPageShow/Disconnect")). It looks like when my patch's Stop() call hits that function, we skip over its OnPageShow call here:
> 1061 if (docShell && NS\_SUCCEEDED(docShell->GetIsInUnload(&isInUnload)) &&
> 1062 !isInUnload) {
> 1063 mDocument->OnPageShow(restoring, nsnull);
> 1064 }
<http://mxr.mozilla.org/mozilla-central/source/layout/base/nsDocumentViewer.cpp#1061>
In this case, the variable isInUnload is PR\_TRUE, so we skip over OnPageShow. That bool is just a proxy for nsDocShell::mFiredUnloadEvent, which gets set to true inside of FirePageHideNotification().
So basically, FirePageHideNotification sets a flag that keeps us from triggering the OnPageShow call.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=654015#c34)• 14 years ago |
|  | |

(In reply to [comment #33](/show_bug.cgi?id=654015#c33 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""))
> So basically, FirePageHideNotification sets a flag that keeps us from
> triggering the OnPageShow call.
So, as one might expect -- if I follow bz's suggestion and move Stop() before FirePageHideNotification(), then I \*do\* get an OnPageShow() call inside of Stop. (That's ok, though, because for the purposes of this bug, the subsequent FirePageHideNotification call undoes its effects.)
So either ordering is fine for fixing this bug, AFAICT.
I get the impression that Stop()ing first (as bz suggests) is saner & less fragile. Should I go with that, then?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a864909_278074)• 14 years ago |

[Attachment #529617](/attachment.cgi?id=529617&action=edit "patch 1, first attempt: ditch old viewer, like in nsDocShell::Destroy") -
Attachment is obsolete: true

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=654015#c35)• 14 years ago |
|  | |

I think I'd prefer that, yes. Thanks for figuring out why the other was working too! Man, this code is side-effecty. :(

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=654015#c36)• 14 years ago |
|  | |

(In reply to [comment #30](/show_bug.cgi?id=654015#c30 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""))
> Also, can we add a test for this?
Not directly, I think. Such a test would need to...
(a) be able to automate a call to window.open()
(b) turn tinderbox orange if this bug's assertion fails
...and I don't think we have any testsuites that satisfy both of those conditions.
I tried running the testcases here as a crashtest, but the onload-triggered window.open() call fails to run (due to popup blocking I think).
I also wrote a mochitest version, and \*there\*, window.open() works (and triggers the assertion in an un-patched debug build), but that doesn't do us a lot of good since the mochitest harness ignores assertion failures. :)
I'm thinking I'll stick with the mochitest route, though, and then possibly convert the original NS\_ASSERTION here into a NS\_ABORT\_IF\_FALSE, because that will definitely turn tinderbox orange when it fails. :) How does that sound?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=654015#c37)• 14 years ago |
|  | |

(note that the s/NS\_ASSERTION/NS\_ABORT\_IF\_FALSE/ that I've just suggested for test-purposes shouldn't be a big deal -- that is, I'm not expecting the NS\_ASSERTION to be triggered under normal conditions anymore -- because the other new NS\_ABORT\_IF\_FALSE added in patch 2 should now always fire before this bug's assertion fires anyway.)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=654015#c38)• 14 years ago |
|  | |

Attached patch

[patch 1, third attempt: Stop() \*before\* firing onpagehide](attachment.cgi?id=531822&action=diff)
— [Details](attachment.cgi?id=531822&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=531822)

(In reply to [comment #35](/show_bug.cgi?id=654015#c35 "RESOLVED FIXED - \"ASSERTION: Requesting refresh driver after document has disconnected\""))
> I think I'd prefer that, yes. Thanks for figuring out why the other was
> working too! Man, this code is side-effecty. :(
Sounds good -- here's the updated patch.
[Attachment #529620](/attachment.cgi?id=529620&action=edit "patch 1, second attempt: Stop() after firing onpagehide") -
Attachment is obsolete: true
[Attachment #529620](/attachment.cgi?id=529620&action=edit "patch 1, second attempt: Stop() after firing onpagehide") -
Flags: review?(bzbarsky)
[Attachment #531822](/attachment.cgi?id=531822&action=edit "patch 1, third attempt: Stop() *before* firing onpagehide") -
Flags: review?(bzbarsky)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=654015#c39)• 14 years ago |
|  | |

Attached patch

[patch 3: crashtests (as mochitests) plus assertion upgrade](attachment.cgi?id=531824&action=diff)
— [Details](attachment.cgi?id=531824&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=531824)

Here's a patch with both of this bug's testcases converted into mochitests, and with this bug's original failing assertion upgraded to NS\_ABORT\_IF\_FALSE so that the mochitests can fail.
I've confirmed that these fail (abort) before this bug's fix, and they pass after this bug's fix.
[Attachment #531824](/attachment.cgi?id=531824&action=edit "patch 3: crashtests (as mochitests) plus assertion upgrade") -
Flags: review?(bzbarsky)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=654015#c40)• 14 years ago |
|  | |

Comment on [attachment 531822](/attachment.cgi?id=531822 "patch 1, third attempt: Stop() *before* firing onpagehide") [[details]](/attachment.cgi?id=531822&action=edit "patch 1, third attempt: Stop() *before* firing onpagehide") [[diff]](/attachment.cgi?id=531822&action=diff "patch 1, third attempt: Stop() *before* firing onpagehide") [[review]](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=531822)
patch 1, third attempt: Stop() \*before\* firing onpagehide
r=me.
[Attachment #531822](/attachment.cgi?id=531822&action=edit "patch 1, third attempt: Stop() *before* firing onpagehide") -
Flags: review?(bzbarsky) → review+

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=654015#c41)• 14 years ago |
|  | |

Comment on [attachment 531824](/attachment.cgi?id=531824 "patch 3: crashtests (as mochitests) plus assertion upgrade") [[details]](/attachment.cgi?id=531824&action=edit "patch 3: crashtests (as mochitests) plus assertion upgrade") [[diff]](/attachment.cgi?id=531824&action=diff "patch 3: crashtests (as mochitests) plus assertion upgrade") [[review]](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=531824)
patch 3: crashtests (as mochitests) plus assertion upgrade
r=me
[Attachment #531824](/attachment.cgi?id=531824&action=edit "patch 3: crashtests (as mochitests) plus assertion upgrade") -
Flags: review?(bzbarsky) → review+

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=654015#c42)• 14 years ago |
|  | |

Landed patches 1 & 2 on cedar (m-c is a bit backed up and colorful right now):
<http://hg.mozilla.org/projects/cedar/rev/2f53d4782ce3>
<http://hg.mozilla.org/projects/cedar/rev/2f4c320b5c33>
Holding off on landing tests (patch 3) until fix is released to users.Flags: in-testsuite?Whiteboard: [sg:critical?] → [sg:critical?] fixed-in-cedar

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=654015#c43)• 14 years ago |
|  | |

(CC'ing volkmar in case he does the next cedar-->mc merge & needs access to this bug to close it out)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=654015#c44)• 14 years ago |
|  | |

Comment on [attachment 531822](/attachment.cgi?id=531822 "patch 1, third attempt: Stop() *before* firing onpagehide") [[details]](/attachment.cgi?id=531822&action=edit "patch 1, third attempt: Stop() *before* firing onpagehide") [[diff]](/attachment.cgi?id=531822&action=diff "patch 1, third attempt: Stop() *before* firing onpagehide") [[review]](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=531822)
patch 1, third attempt: Stop() \*before\* firing onpagehide
Requesting approval to land on aurora (together with [bug 653238](/show_bug.cgi?id=653238 "RESOLVED FIXED - nsSMILAnimationController::mDocument is suspicious")).
[Attachment #531822](/attachment.cgi?id=531822&action=edit "patch 1, third attempt: Stop() *before* firing onpagehide") -
Flags: approval-mozilla-aurora?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a956100_278074)• 14 years ago |

[Attachment #529625](/attachment.cgi?id=529625&action=edit "patch 2: catch this slightly earlier in SMIL code") -
Flags: approval-mozilla-aurora?

|  | [Mounir Lamouri (:mounir)](/user_profile?user_id=342786) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=654015#c45)• 14 years ago |
|  | |

Pushed:
<http://hg.mozilla.org/mozilla-central/rev/2f53d4782ce3>
<http://hg.mozilla.org/mozilla-central/rev/2f4c320b5c33>Status: ASSIGNED → RESOLVEDClosed: 14 years agoResolution: --- → FIXEDWhiteboard: [sg:critical?] fixed-in-cedar → [sg:critical?]Target Milestone: --- → mozilla6

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a1386738_1689)• 14 years ago |

[Attachment #529625](/attachment.cgi?id=529625&action=edit "patch 2: catch this slightly earlier in SMIL code") -
Flags: approval-mozilla-beta?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a1386753_1689)• 14 years ago |

[Attachment #531822](/attachment.cgi?id=531822&action=edit "patch 1, third attempt: Stop() *before* firing onpagehide") -
Flags: approval-mozilla-beta?

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a1502627_5003)• 14 years ago |

Whiteboard: [sg:critical?] → [sg:critical?] wants to land on beta with 653238

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a1559668_5003)• 14 years ago |

[Attachment #529625](/attachment.cgi?id=529625&action=edit "patch 2: catch this slightly earlier in SMIL code") -
Flags: approval-mozilla-aurora?

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a1559679_5003)• 14 years ago |

[Attachment #531822](/attachment.cgi?id=531822&action=edit "patch 1, third attempt: Stop() *before* firing onpagehide") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora-

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a1559724_5003)• 14 years ago |

[Attachment #531822](/attachment.cgi?id=531822&action=edit "patch 1, third attempt: Stop() *before* firing onpagehide") -
Flags: approval-mozilla-aurora-

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a1560883_5003)• 14 years ago |

[Attachment #529625](/attachment.cgi?id=529625&action=edit "patch 2: catch this slightly earlier in SMIL code") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a1560889_5003)• 14 years ago |

[Attachment #531822](/attachment.cgi?id=531822&action=edit "patch 1, third attempt: Stop() *before* firing onpagehide") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a1562329_5003)• 14 years ago |

[Attachment #529625](/attachment.cgi?id=529625&action=edit "patch 2: catch this slightly earlier in SMIL code") -
Flags: approval-mozilla-aurora+

|  | [Asa Dotzler [:asa]](/user_profile?user_id=5003) |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=654015#c46)• 14 years ago |
|  | |

Comment on [attachment 531822](/attachment.cgi?id=531822 "patch 1, third attempt: Stop() *before* firing onpagehide") [[details]](/attachment.cgi?id=531822&action=edit "patch 1, third attempt: Stop() *before* firing onpagehide") [[diff]](/attachment.cgi?id=531822&action=diff "patch 1, third attempt: Stop() *before* firing onpagehide") [[review]](/page.cgi?id=splinter.html&ignore=&bug=654015&attachment=531822)
patch 1, third attempt: Stop() \*before\* firing onpagehide
Please land these changes on both Aurora and Beta. (In the future, getting changes in during Aurora will save you this extra step.)
[Attachment #531822](/attachment.cgi?id=531822&action=edit "patch 1, third attempt: Stop() *before* firing onpagehide") -
Flags: approval-mozilla-aurora+

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=654015#c47)• 14 years ago |
|  | |

Landed on aurora and beta:
<http://hg.mozilla.org/releases/mozilla-aurora/rev/7e174ba0af38>
<http://hg.mozilla.org/releases/mozilla-aurora/rev/05a003240c8f>
<http://hg.mozilla.org/releases/mozilla-beta/rev/e725b0d79412>
<http://hg.mozilla.org/releases/mozilla-beta/rev/c08c5557ce66>
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a1633244_278074)• 14 years ago |

Whiteboard: [sg:critical?] wants to land on beta with 653238 → [sg:critical?]

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a3027064_278074)• 14 years ago |

Depends on: [662186](/show_bug.cgi?id=662186 "RESOLVED WORKSFORME - \"###!!! ABORT: Expecting to be paused for pagehide before disconnect: 'mPauseState & nsSMILTimeContainer::PAUSE_PAGEHIDE', file content/smil/nsSMILAnimationController.cpp\"...)")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a6203369_1689)• 14 years ago |

Group: core-security

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a6400607_278074)• 14 years ago |

Depends on: [670324](/show_bug.cgi?id=670324 "RESOLVED INCOMPLETE - \"ASSERTION: Destroying a currently-showing document\" with XSLT")

|  | [George Carstoiu](/user_profile?user_id=401685) |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=654015#c48)• 13 years ago |
|  | |

Mozilla/5.0 (X11; Linux i686; rv:6.0) Gecko/20100101 Firefox/6.0
While runing testcase 2 on Fx 6.0b3 and 8.0a1 this is what I get in the error console:
Error: [Exception... "Component returned failure code: 0x80004003 (NS\_ERROR\_INVALID\_POINTER) [nsIURI.equals]" nsresult: "0x80004003 (NS\_ERROR\_INVALID\_POINTER)" location: "JS frame :: chrome://browser/content/browser.js :: <TOP\_LEVEL> :: line 338" data: no]
Source File: chrome://browser/content/browser.js
Line: 338
Is this the expected behavior?

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593) |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=654015#c49)• 13 years ago |
|  | |

That's an existing bug that's unrelated to the changes here. I filed [bug 675037](/show_bug.cgi?id=675037 "RESOLVED FIXED - async fullzoom callback needs to handle being called after window is destroyed").

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=654015#a8133253_482154)• 13 years ago |

[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)
You need to [log in](/show_bug.cgi?id=654015&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.redhat.com_41adae35_20250126_043454.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_c823d60a_20250124_234830.html ===

[Skip to content](#rhb-main-content)
## Featured links

* [![Red Hat Summit](/themes/custom/rh_base_ui/dist/img/red-hat-summit-logo.svg)](https://www.redhat.com/en/summit)
* [Support](https://access.redhat.com/)
* [Documentation](https://docs.redhat.com/en)
* [Console](https://cloud.redhat.com/)
* [Developers](https://developers.redhat.com/)
* [Start a trial](/en/products/trials)
* All Red Hat
  + For customers
    - [Customer support](https://access.redhat.com/)
    - [Subscription management](https://access.redhat.com/management)
    - [Support cases](https://access.redhat.com/support/cases)
    - [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
    - [Find a partner](https://catalog.redhat.com/partners)
  + For partners
    - [Partner portal](https://connect.redhat.com/partner-admin/dashboard)
    - [Partner support](https://connect.redhat.com/en/support)
    - [Become a partner](https://connect.redhat.com/)
  + Try, buy, & sell
    - [Red Hat Marketplace](https://marketplace.redhat.com/en-us)
    - [Red Hat Store](https://www.redhat.com/en/store)
    - [Contact sales](/en/contact)
    - [Start a trial](/en/products/trials)
  + Learning resources
    - [Documentation](https://docs.redhat.com/en)
    - [Training and certification](/en/services/training-and-certification)
    - [Hybrid cloud learning hub](https://cloud.redhat.com/learn)
    - [Interactive labs](/en/interactive-labs)
    - [Learning community](https://learn.redhat.com/)
    - [Red Hat TV](https://tv.redhat.com)
  + Open source communities
    - [Global advocacy](https://access.redhat.com/accelerators)
    - [How we contribute](/en/about/our-community-contributions)
[Red Hat](/en)

* [Products](https://www.redhat.com/en/technologies/all-products)
* [Solutions](https://www.redhat.com/en/solutions)
* [Training & services](https://www.redhat.com/en/services)
* [Resources](https://www.redhat.com/en/resources)
* Partners
* [About](https://www.redhat.com/en/about)
* Explore more
### Platform products

* [Red Hat Enterprise LinuxA flexible, stable operating system to support hybrid cloud innovation.](/en/technologies/linux-platforms/enterprise-linux)
* [Red Hat OpenShiftA container platform to build, modernize, and deploy applications at scale.](/en/technologies/cloud-computing/openshift)
* [Red Hat Ansible Automation PlatformNew versionA foundation for implementing enterprise-wide automation.](/en/technologies/management/ansible)
### Try & buy

* [Start a trialAssess a product with a no-cost trial.](/en/products/trials)
* [Buy onlineBuy select products and services in the Red Hat Store.](https://www.redhat.com/en/store)
* [Integrate with major cloud providersBuy Red Hat solutions using committed spend from providers, including:
  ![Cloud providers: Amazon Web Services, Microsoft Azure, and Google Cloud](https://www.redhat.com/rhdc/managed-files/cloud-providers-2x.png)](/en/partners/certified-cloud-and-service-providers)
### Featured

* [Red Hat Enterprise Linux AI](/en/technologies/linux-platforms/enterprise-linux/ai)
* [Red Hat OpenShift AI](/en/technologies/cloud-computing/openshift/openshift-ai)
* [Red Hat OpenShift Virtualization](/en/technologies/cloud-computing/openshift/virtualization)
* [Red Hat OpenShift Service on AWS](/en/technologies/cloud-computing/openshift/aws)
* [Microsoft Azure Red Hat OpenShift](/en/technologies/cloud-computing/openshift/azure)
[See all products](/en/technologies/all-products)

* [Application platformSimplify the way you build, deploy, manage, and secure apps across the hybrid cloud.](/en/solutions/application-platform)
* [Artificial intelligenceBuild, deploy, and monitor AI models and apps with Red Hat's open source platforms.](/en/solutions/ai)
* [Edge computingDeploy workloads closer to the source with security-focused edge technology.](/en/products/edge)

* [IT automationUnite disparate tech, teams, and environments with 1 comprehensive automation platform.](/en/solutions/it-automation)
* [Linux standardizationGet consistency across operating environments with an open, flexible infrastructure.](/en/solutions/linux-standardization)

* [SecurityDeliver software using trusted platforms and real-time security scanning and remediation.](/en/solutions/trusted-software-supply-chain)
* [VirtualizationModernize operations using a single platform for virtualized and containerized workloads.](/en/solutions/virtualization)
### By industry

* [Automotive](/en/solutions/automotive)
* [Financial services](/en/solutions/financial-services)
* [Healthcare](/en/solutions/healthcare)
* [Industrial sector](/en/solutions/industrial-sector)
* [Media and entertainment](/en/solutions/media-entertainment)
* [Public sector](/en/solutions/public-sector)
* [Telecommunications](/en/solutions/telecommunications)
[Explore solutions](/en/solutions)
### [Services](/en/services)

* [Consulting](/en/services/consulting)
* [Services for AI](/en/services/consulting/red-hat-consulting-for-ai)
* [Technical Account Management](/en/services/support/technical-account-management)
### [Training & certification](/en/services/training-and-certification)

* [All courses and exams](/en/services/training/all-courses-exams)
* [All certifications](/en/services/certifications)
* [Verify a certification](https://www.redhat.com/rhtapps/services/verify/)
* [Skills assessment](https://skills.ole.redhat.com)
* [Learning subscription](/en/services/training/learning-subscription)
* [Learning community](https://learn.redhat.com/)
* [Red Hat Academy](/en/services/training/red-hat-academy)
* [FAQs](/en/services/training-and-certification/faq)
* [Connect with learning experts](/en/services/training-and-certification/contact-us)
### Featured

* [Ansible Basics: Automation Technical Overview (No cost)](/en/services/training/do007-ansible-essentials-simplicity-automation-technical-overview)
* [Containers, Kubernetes and Red Hat OpenShift Technical Overview (No cost)](/en/services/training/do080-deploying-containerized-applications-technical-overview)
* [Red Hat Enterprise Linux Technical Overview (No cost)](/en/services/training/rh024-red-hat-linux-technical-overview)
* [Red Hat Certified System Administrator exam](/en/services/training/ex200-red-hat-certified-system-administrator-rhcsa-exam)
* [Red Hat System Administration I](/en/services/training/rh124-red-hat-system-administration-i)
[Explore services](/en/services)
### Topics

* [AI](/en/topics/ai)
* [Application modernization](/en/topics/application-modernization)
* [Automation](/en/topics/automation)
* [Cloud computing](/en/topics/cloud-computing)
* [Cloud-native applications](/en/topics/cloud-native-apps)
* [Containers](/en/topics/containers)
* [DevOps](/en/topics/devops)
* [Edge computing](/en/topics/edge-computing)
* [Linux](/en/topics/linux)
* [Virtualization](/en/topics/virtualization)
* [See all topics](/en/topics)
### Articles

* [What is InstructLab?](/en/topics/ai/what-is-instructlab)
* [What are cloud services?](/en/topics/cloud-computing/what-are-cloud-services)
* [What is edge computing?](/en/topics/edge-computing/what-is-edge-computing)
* [What is hybrid cloud?](/en/topics/cloud-computing/what-is-hybrid-cloud)
* [Why build a Red Hat cloud?](/en/topics/cloud-computing/why-choose-red-hat-cloud)
* [Cloud vs. edge](/en/topics/cloud-computing/cloud-vs-edge)
* [Red Hat OpenShift vs. Kubernetes](/en/technologies/cloud-computing/openshift/red-hat-openshift-kubernetes)
* [Learning Ansible basics](/en/topics/automation/learning-ansible-tutorial)
* [What is Linux?](/en/topics/linux/what-is-linux)
### More to explore

* [Blog](/en/blog)
* [Customer success stories](/en/success-stories)
* [Events and webinars](/en/events)
* [Newsroom](/en/about/newsroom)
* [Podcasts and video series](/en/red-hat-original-series)
* [Documentation](https://docs.redhat.com/en)
* [Resource library](/en/resources)
* [Training and certification](/en/services/training-and-certification)
[Explore resources](/en/resources)
### For customers

* [Our partners](/en/partners)
* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
* [Find a partner](https://catalog.redhat.com/partners)
### For partners

* [Partner Connect](https://connect.redhat.com)
* [Become a partner](https://connect.redhat.com/en/benefits-of-being-a-partner)
* [Training](https://connect.redhat.com/en/training)
* [Support](https://connect.redhat.com/en/support)
* [Access the partner portal](https://connect.redhat.com/partner-admin/dashboard)
### About us

* [Our company](/en/about/company)
* [How we work](/en/about/our-culture)
* [Our social impact](/en/about/community-social-responsibility)
* [Development model](/en/about/development-model)
* [Subscription model](/en/about/value-of-Red-Hat)
* [Product support](/en/services/support)
### Open source

* [Open source commitments](/en/about/open-source)
* [How we contribute](/en/about/our-community-contributions)
* [Red Hat on GitHub](https://github.com/RedHatOfficial)
### Company details

* [Analyst relations](/en/about/analysts)
* [Blog](/en/blog)
* [Locations](/en/about/office-locations)
* [Newsroom](/en/about/newsroom)
[Explore Red Hat](/en/about)[Contact us](/en/contact)For customers

* [Customer support](https://access.redhat.com/)* [Subscription management](https://access.redhat.com/management)* [Support cases](https://access.redhat.com/support/cases)* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)* [Find a partner](https://catalog.redhat.com/partners)
For partners

* [Partner portal](https://connect.redhat.com/partner-admin/dashboard)* [Partner support](https://connect.redhat.com/en/support)* [Become a partner](https://connect.redhat.com/)
Try, buy, & sell

* [Red Hat Marketplace](https://marketplace.redhat.com/en-us)* [Red Hat Store](https://www.redhat.com/en/store)* [Contact sales](/en/contact)* [Start a trial](/en/products/trials)
Learning resources

* [Documentation](https://docs.redhat.com/en)* [Training and certification](/en/services/training-and-certification) * [Hybrid cloud learning hub](https://cloud.redhat.com/learn)* [Interactive labs](/en/interactive-labs)* [Learning community](https://learn.redhat.com/)* [Red Hat TV](https://tv.redhat.com)
Open source communities

* [Global advocacy](https://access.redhat.com/accelerators)* [How we contribute](/en/about/our-community-contributions)
For you
New
### Recommendations

As you browse redhat.com, we'll recommend resources you may like. For now, try these.

---

* [All Red Hat products](/en/technologies/all-products)
* [Tech topics](/en/topics)
* [Red Hat resources](/en/resources)
![close](https://static.redhat.com/libs/redhat/rh-iconfont/latest/svg/web-icon-close.svg)[![Red Hat Summit](/themes/custom/rh_base_ui/dist/img/red-hat-summit-logo.svg)Red Hat Summit](https://www.redhat.com/en/summit)[Support](https://access.redhat.com/)[Documentation](https://docs.redhat.com/en)[Console](https://cloud.redhat.com/)[Developers](https://developers.redhat.com/)[Start a trial](/en/products/trials)[Contact](/en/contact)Select a language简体中文EnglishFrançaisDeutschItaliano日本語한국어PortuguêsEspañol[Contact us](/en/contact)
English
### Select a language

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)
Select a language简体中文EnglishFrançaisDeutschItaliano日本語한국어PortuguêsEspañol![](/themes/custom/rh_base_ui/dist/img/talk-bubble.svg)

* [Products](https://www.redhat.com/en/technologies/all-products)
* [Solutions](https://www.redhat.com/en/solutions)
* [Training & services](https://www.redhat.com/en/services)
* [Resources](https://www.redhat.com/en/resources)
* Partners
* [About](https://www.redhat.com/en/about)
* [Contact us](/en/contact)

### Select a language

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)

# Red Hat Support

## Go beyond support by engaging with our experts

Our teams collaborate with you to ensure you accomplish your goals with Red Hat solutions. The relationship we build with you is designed to provide you with the tools and resources you need to find success on your IT journey.

![](/rhdc/managed-files/support-header.svg)

## Configured for your success

We develop a holistic understanding of your experience as a customer by ensuring our support and engineering teams work together.

Our support team works hand in hand with the best engineers in the industry to quickly turn customer feedback into product improvements. This direct line of communication allows us to hone in on proactive fixes that can impact your bottom line.

### Quick links

* Search our [Knowledgebase](https://access.redhat.com/search/#/?q=&p=1&sort=relevant&scoped&documentKind=Knowledgebase)
* Find [product documentation](https://access.redhat.com/documentation/en-us/)
* Access the [product security center](https://access.redhat.com/security/)
* Connect with [our support team](https://access.redhat.com/support)
* Team up with a [technical account manager](/en/services/support/technical-account-management "Technical account management")
* Take advantage of [partner support](https://connect.redhat.com/en/support)

## Find the right level of support

We have different tiers of support designed to meet your unique needs.

|  | Self-support | Standard | Premium |
| --- | --- | --- | --- |
| Access to Red Hat products | checkmark | checkmark | checkmark |
| Access to our knowledgebase and tools in our award-winning Customer Portal | checkmark | checkmark | checkmark |
| Access to support engineers during standard business hours |  | checkmark | checkmark |
| Access to support engineers 24x7 for high-severity issues |  |  | checkmark |

We also feature specialized support options that can be tailored to the unique needs of companies of all sizes and industries. The Red Hat® [Enhanced Solution Support](/en/resources/enhanced-solution-support-datasheet "Red Hat Enhanced Solution Support: 24x7 engineering support") offering reduces downtime and boosts confidence through access to senior level engineers, as well as resolution and restoration SLAs—helping you stay up and running as you innovate, scale, and deploy. Our engineers help restore your operations quickly and accelerate the path to final resolution, identifying the root cause which helps protect against recurrences in the future. Enhanced Solution Support engineers, who are already familiar with your environment, will be there to assist with critical issues in production environments so that you can consistently deliver the cloud services your customers demand. This offering is available for Red Hat OpenShift® and Red Hat OpenStack® Platform customers.

### Personalized support

Connect with a technical adviser for collaborative planning and specialized guidance. Our Technical Account Managers help you streamline deployments, resolve issues, and shape your technology strategy to meet your toughest business challenges.

[Explore Technical Account Management](/en/services/support/technical-account-management)

## Award winners since 2011

We’ve evolved the traditional software subscription model, combining the best elements of our services to exceed customer expectations. The Association of Support Professionals has honored Red Hat’s Customer Portal as one of “The Top Ten Best Support Websites” for 13 years running.

[See why the Customer Portal keeps earning industry recognition](https://access.redhat.com/)

![Gold and green star with text ASP best support websites of 2023](/rhdc/managed-files/ASP-Award-Design.jpg)

## What they're saying

![BSE logo](/rhdc/managed-files/bse-logo-2.png)

> Icon-Red\_Hat-Media\_and\_documents-Quotemark\_Open-B-Red-RGB
>
> We have found the support from Red Hat to be exemplary. Whenever we need anything from them, they have given it … Red Hat is now our backbone. Our business cannot run if Red Hat is not there.
>
> Ashishkumar Chauhan
>
> CEO, BSE

> Icon-Red\_Hat-Media\_and\_documents-Quotemark\_Open-B-Red-RGB
>
> I like the fact that they really dig into things and then provide answers. As the single Linux guy, I kind of need that second admin next to me sometimes to say, "Hey, what about this?" and I am able to do that through the portal. I get my questions answered and trouble tickets resolved.
>
> Erik Widholm
>
> Sr. Enterprise Engineer

[Read more user reviews](/en/technologies/linux-platforms/enterprise-linux/user-reviews)

## Have questions?

[Contact Support team](https://access.redhat.com/support)

[Visit the Customer Portal](https://access.redhat.com/)

[![Red Hat logo](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](/en)[LinkedIn](https://www.linkedin.com/company/red-hat)[YouTube](https://www.youtube.com/user/RedHatVideos)[Facebook](https://www.facebook.com/redhatinc)[X](https://twitter.com/RedHat)
### Products

* [Red Hat Enterprise Linux](/en/technologies/linux-platforms/enterprise-linux)
* [Red Hat OpenShift](/en/technologies/cloud-computing/openshift)
* [Red Hat Ansible Automation Platform](/en/technologies/management/ansible)
* [Cloud services](/en/technologies/cloud-computing/openshift/cloud-services)
* [See all products](/en/technologies/all-products)

### Tools

* [Training and certification](/en/services/training-and-certification)
* [My account](https://www.redhat.com/wapps/ugc/protected/personalInfo.html)
* [Customer support](https://access.redhat.com)
* [Developer resources](https://developers.redhat.com/)
* [Find a partner](https://catalog.redhat.com/partners)
* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
* [Red Hat value calculator](/en/solutions/value-calculator)
* [Documentation](https://docs.redhat.com/en)

### Try, buy, & sell

* [Product trial center](/en/products/trials)
* [Red Hat Marketplace](https://marketplace.redhat.com)
* [Red Hat Store](https://www.redhat.com/en/store)
* [Buy online (Japan)](https://www.redhat.com/en/about/japan-buy)
* [Console](https://cloud.redhat.com/)

### Communicate

* [Contact sales](/en/contact/sales)
* [Contact customer service](/en/contact/customer-service)
* [Contact training](/en/services/training-and-certification/contact-us)
* [Social](/en/about/social)

### About Red Hat

We’re the world’s leading provider of enterprise open source solutions—including Linux, cloud, container, and Kubernetes. We deliver hardened solutions that make it easier for enterprises to work across platforms and environments, from the core datacenter to the network edge.

### Select a language

![](https://static.redhat.com/libs/redhat/rh-iconfont/4/svg/web-icon-globe.svg)

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)
### Red Hat legal and privacy links

* [About Red Hat](/en/about/company)
* [Jobs](/en/jobs)
* [Events](/en/events)
* [Locations](/en/about/office-locations)
* [Contact Red Hat](/en/contact)
* [Red Hat Blog](/en/blog)
* [Diversity, equity, and inclusion](/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

© 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](/en/about/privacy-policy)
* [Terms of use](/en/about/terms-use)
* [All policies and guidelines](/en/about/all-policies-guidelines)
* [Digital accessibility](/en/about/digital-accessibility)



=== Content from bugzilla.mozilla.org_c6c5e789_20250124_234845.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/653026)
* [XML](/show_bug.cgi?ctype=xml&id=653026)

Closed
[Bug 653026](/show_bug.cgi?id=653026)

Opened 14 years ago
Closed 14 years ago

# GC hazard with NoSuchMethod

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

GC hazard with NoSuchMethod

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed) |
| firefox6 | [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed) |
| status2.0 | --- | [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | + | fixed |
| firefox6 | + | fixed |
| status2.0 |  | wanted |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: billm, Assigned: billm)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/81db2831554209472ec9b0d5485ca1c9?d=mm&size=40)  [billm](/user_profile?user_id=389993)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/81db2831554209472ec9b0d5485ca1c9?d=mm&size=40)  [billm](/user_profile?user_id=389993)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

7 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[584917](/show_bug.cgi?id=584917 "RESOLVED FIXED - TM: Make JSObject flexible length")

Dependency [tree](/showdependencytree.cgi?id=653026&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=653026)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: regression, Whiteboard: [sg:critical?][fixed-in-tracemonkey][in-testsuite?])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[regression](/buglist.cgi?keywords=regression&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?][fixed-in-tracemonkey][in-testsuite?]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [testcase](/attachment.cgi?id=528500)  [14 years ago](#c0)  [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)   148 bytes, text/plain |  | [Details](/attachment.cgi?id=528500&action=edit) |
| --- | --- | --- |
| [patch](/attachment.cgi?id=528630)  [14 years ago](#c1)  [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)   3.23 KB, patch | Waldo : [review+](#c2 "14 years ago")  dmandelin : [approval-mozilla-beta+](#a2418698_294323 "14 years ago") | [Details](/attachment.cgi?id=528630&action=edit) | [Diff](/attachment.cgi?id=528630&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=653026&attachment=528630) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=653026#c0)• 14 years ago |
|  | |

Attached file
[testcase](attachment.cgi?id=528500)
— [Details](attachment.cgi?id=528500&action=edit)

This script crashes in a shell with no jit options.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653026#a26651_1689)• 14 years ago |

Whiteboard: [sg:critical?]

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=653026#c1)• 14 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=528630&action=diff)
— [Details](attachment.cgi?id=528630&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=653026&attachment=528630)

The basic problem is that the new object being allocated in js\_OnUnknownMethod is the only thing that roots the method. This object is not scanned during a GC because it has a NULL shape, so it's treated as a newborn object. This was apparently sort of intentional, to ensure that these objects don't escape into user code. However, I think it's more important that we scan them.
I set the shape so that the object looks non-native, and then I added a trace hook to the class. I thought about making it a native object, but I think then we'd need a proto for it, and I didn't want to deal with that. Please correct me if I'm wrong, Jeff.Assignee: general → wmccloskeyStatus: NEW → ASSIGNED
[Attachment #528630](/attachment.cgi?id=528630&action=edit "patch") -
Flags: review?(jwalden+bmo)

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=653026#c2)• 14 years ago |
|  | |

Comment on [attachment 528630](/attachment.cgi?id=528630 "patch") [[details]](/attachment.cgi?id=528630&action=edit "patch") [[diff]](/attachment.cgi?id=528630&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=653026&attachment=528630)
patch
Sounds reasonable.
[Attachment #528630](/attachment.cgi?id=528630&action=edit "patch") -
Flags: review?(jwalden+bmo) → review+

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=653026#c3)• 14 years ago |
|  | |

Can this land now that it's reviewed n' all? Would this patch be safe for beta?
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F)

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=653026#c4)• 14 years ago |
|  | |

Sorry for the delay. I meant to land it yesterday but I forgot. I'll make sure it gets into the beta.

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=653026#c5)• 14 years ago |
|  | |

<http://hg.mozilla.org/tracemonkey/rev/10ba4918f08e>
I pushed without the test. That needs to go in later.Whiteboard: [sg:critical?] → [sg:critical?][fixed-in-tracemonkey][in-testsuite?]

|  | [Chris Leary [:cdleary] (not checking bugmail)](/user_profile?user_id=374575) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=653026#c6)• 14 years ago |
|  | |

cdleary-bot mozilla-central merge info:
<http://hg.mozilla.org/mozilla-central/rev/10ba4918f08e>

|  | [Chris Leary [:cdleary] (not checking bugmail)](/user_profile?user_id=374575) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653026#a2318819_374575)• 14 years ago |

Status: ASSIGNED → RESOLVEDClosed: 14 years agoResolution: --- → FIXED

|  | [Robert Sayre](/user_profile?user_id=180188) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653026#a2322108_180188)• 14 years ago |

[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%2B)

|  | [David Mandelin [:dmandelin]](/user_profile?user_id=294323) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653026#a2418698_294323)• 14 years ago |

[Attachment #528630](/attachment.cgi?id=528630&action=edit "patch") -
Flags: approval-mozilla-beta+

|  | [David Mandelin [:dmandelin]](/user_profile?user_id=294323) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=653026#c7)• 14 years ago |
|  | |

<http://hg.mozilla.org/mozilla-beta/rev/cb0b3bc9c53b>
[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed)

|  | [David Mandelin [:dmandelin]](/user_profile?user_id=294323) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=653026#c8)• 14 years ago |
|  | |

This made it to mozilla-aurora as
<http://hg.mozilla.org/mozilla-aurora/rev/10ba4918f08e>

|  | [David Mandelin [:dmandelin]](/user_profile?user_id=294323) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653026#a2478729_294323)• 14 years ago |

[status-firefox6](/buglist.cgi?f1=cf_status_firefox6&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox6&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=653026#c9)• 14 years ago |
|  | |

On the 1.9.2 branch I get "TypeError: obj.x(a()) is not a function" rather than a crash. Does that mean that branch is not affected by this bug? Do we know what regressed it?blocking1.9.2: --- → ?
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_192&o1=equals&v1=%3F)

|  | [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=653026#c10)• 14 years ago |
|  | |

It looks like the testcase in the bug regressed in [bug 584917](/show_bug.cgi?id=584917 "RESOLVED FIXED - TM: Make JSObject flexible length"), so 3.6 should be safe. Before that patch, we rooted the function to call via the NoSuchMethod object's parent (or proto, I forget the argument order).
I'm still a bit worried about whether the other thing stored in the NoSuchMethod object in rooted. It can only be a jsid, but it seems like e4x might somehow allow an object to be stashed there. I don't really understand the code too well though. It would be good if someone who understands e4x better could take a look. I'm guessing this means Brendan or Igor?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=653026#c11)• 14 years ago |
|  | |

Thanks, for now we'll not track this on the old branch.Blocks: [584917](/show_bug.cgi?id=584917 "RESOLVED FIXED - TM: Make JSObject flexible length")blocking1.9.2: ? → ---
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_192&o1=equals&v1=%3F) → [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- → [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=653026#a6617723_1689)• 14 years ago |

Group: core-security

|  | [Virgil Dicu [:virgil] [QA]](/user_profile?user_id=421602) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=653026#c12)• 13 years ago |
|  | |

Mozilla/5.0 (X11; Linux x86\_64; rv:6.0) Gecko/20100101 Firefox/6.0
Could you please provide some clear STR in order to verify this issue?
You need to [log in](/show_bug.cgi?id=653026&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Bill McCloskey [inactive unless it's an emergency] (:billm)](/user_profile?user_id=389993)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.redhat.com_6c1ba682_20250124_234829.html ===

[Skip to content](#rhb-main-content)
## Featured links

* [![Red Hat Summit](/themes/custom/rh_base_ui/dist/img/red-hat-summit-logo.svg)](https://www.redhat.com/en/summit)
* [Support](https://access.redhat.com/)
* [Documentation](https://docs.redhat.com/en)
* [Console](https://cloud.redhat.com/)
* [Developers](https://developers.redhat.com/)
* [Start a trial](/en/products/trials)
* All Red Hat
  + For customers
    - [Customer support](https://access.redhat.com/)
    - [Subscription management](https://access.redhat.com/management)
    - [Support cases](https://access.redhat.com/support/cases)
    - [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
    - [Find a partner](https://catalog.redhat.com/partners)
  + For partners
    - [Partner portal](https://connect.redhat.com/partner-admin/dashboard)
    - [Partner support](https://connect.redhat.com/en/support)
    - [Become a partner](https://connect.redhat.com/)
  + Try, buy, & sell
    - [Red Hat Marketplace](https://marketplace.redhat.com/en-us)
    - [Red Hat Store](https://www.redhat.com/en/store)
    - [Contact sales](/en/contact)
    - [Start a trial](/en/products/trials)
  + Learning resources
    - [Documentation](https://docs.redhat.com/en)
    - [Training and certification](/en/services/training-and-certification)
    - [Hybrid cloud learning hub](https://cloud.redhat.com/learn)
    - [Interactive labs](/en/interactive-labs)
    - [Learning community](https://learn.redhat.com/)
    - [Red Hat TV](https://tv.redhat.com)
  + Open source communities
    - [Global advocacy](https://access.redhat.com/accelerators)
    - [How we contribute](/en/about/our-community-contributions)
[Red Hat](/en)

* [Products](https://www.redhat.com/en/technologies/all-products)
* [Solutions](https://www.redhat.com/en/solutions)
* [Training & services](https://www.redhat.com/en/services)
* [Resources](https://www.redhat.com/en/resources)
* Partners
* [About](https://www.redhat.com/en/about)
* Explore more
### Platform products

* [Red Hat Enterprise LinuxA flexible, stable operating system to support hybrid cloud innovation.](/en/technologies/linux-platforms/enterprise-linux)
* [Red Hat OpenShiftA container platform to build, modernize, and deploy applications at scale.](/en/technologies/cloud-computing/openshift)
* [Red Hat Ansible Automation PlatformNew versionA foundation for implementing enterprise-wide automation.](/en/technologies/management/ansible)
### Try & buy

* [Start a trialAssess a product with a no-cost trial.](/en/products/trials)
* [Buy onlineBuy select products and services in the Red Hat Store.](https://www.redhat.com/en/store)
* [Integrate with major cloud providersBuy Red Hat solutions using committed spend from providers, including:
  ![Cloud providers: Amazon Web Services, Microsoft Azure, and Google Cloud](https://www.redhat.com/rhdc/managed-files/cloud-providers-2x.png)](/en/partners/certified-cloud-and-service-providers)
### Featured

* [Red Hat Enterprise Linux AI](/en/technologies/linux-platforms/enterprise-linux/ai)
* [Red Hat OpenShift AI](/en/technologies/cloud-computing/openshift/openshift-ai)
* [Red Hat OpenShift Virtualization](/en/technologies/cloud-computing/openshift/virtualization)
* [Red Hat OpenShift Service on AWS](/en/technologies/cloud-computing/openshift/aws)
* [Microsoft Azure Red Hat OpenShift](/en/technologies/cloud-computing/openshift/azure)
[See all products](/en/technologies/all-products)

* [Application platformSimplify the way you build, deploy, manage, and secure apps across the hybrid cloud.](/en/solutions/application-platform)
* [Artificial intelligenceBuild, deploy, and monitor AI models and apps with Red Hat's open source platforms.](/en/solutions/ai)
* [Edge computingDeploy workloads closer to the source with security-focused edge technology.](/en/products/edge)

* [IT automationUnite disparate tech, teams, and environments with 1 comprehensive automation platform.](/en/solutions/it-automation)
* [Linux standardizationGet consistency across operating environments with an open, flexible infrastructure.](/en/solutions/linux-standardization)

* [SecurityDeliver software using trusted platforms and real-time security scanning and remediation.](/en/solutions/trusted-software-supply-chain)
* [VirtualizationModernize operations using a single platform for virtualized and containerized workloads.](/en/solutions/virtualization)
### By industry

* [Automotive](/en/solutions/automotive)
* [Financial services](/en/solutions/financial-services)
* [Healthcare](/en/solutions/healthcare)
* [Industrial sector](/en/solutions/industrial-sector)
* [Media and entertainment](/en/solutions/media-entertainment)
* [Public sector](/en/solutions/public-sector)
* [Telecommunications](/en/solutions/telecommunications)
[Explore solutions](/en/solutions)
### [Services](/en/services)

* [Consulting](/en/services/consulting)
* [Services for AI](/en/services/consulting/red-hat-consulting-for-ai)
* [Technical Account Management](/en/services/support/technical-account-management)
### [Training & certification](/en/services/training-and-certification)

* [All courses and exams](/en/services/training/all-courses-exams)
* [All certifications](/en/services/certifications)
* [Verify a certification](https://www.redhat.com/rhtapps/services/verify/)
* [Skills assessment](https://skills.ole.redhat.com)
* [Learning subscription](/en/services/training/learning-subscription)
* [Learning community](https://learn.redhat.com/)
* [Red Hat Academy](/en/services/training/red-hat-academy)
* [FAQs](/en/services/training-and-certification/faq)
* [Connect with learning experts](/en/services/training-and-certification/contact-us)
### Featured

* [Ansible Basics: Automation Technical Overview (No cost)](/en/services/training/do007-ansible-essentials-simplicity-automation-technical-overview)
* [Containers, Kubernetes and Red Hat OpenShift Technical Overview (No cost)](/en/services/training/do080-deploying-containerized-applications-technical-overview)
* [Red Hat Enterprise Linux Technical Overview (No cost)](/en/services/training/rh024-red-hat-linux-technical-overview)
* [Red Hat Certified System Administrator exam](/en/services/training/ex200-red-hat-certified-system-administrator-rhcsa-exam)
* [Red Hat System Administration I](/en/services/training/rh124-red-hat-system-administration-i)
[Explore services](/en/services)
### Topics

* [AI](/en/topics/ai)
* [Application modernization](/en/topics/application-modernization)
* [Automation](/en/topics/automation)
* [Cloud computing](/en/topics/cloud-computing)
* [Cloud-native applications](/en/topics/cloud-native-apps)
* [Containers](/en/topics/containers)
* [DevOps](/en/topics/devops)
* [Edge computing](/en/topics/edge-computing)
* [Linux](/en/topics/linux)
* [Virtualization](/en/topics/virtualization)
* [See all topics](/en/topics)
### Articles

* [What is InstructLab?](/en/topics/ai/what-is-instructlab)
* [What are cloud services?](/en/topics/cloud-computing/what-are-cloud-services)
* [What is edge computing?](/en/topics/edge-computing/what-is-edge-computing)
* [What is hybrid cloud?](/en/topics/cloud-computing/what-is-hybrid-cloud)
* [Why build a Red Hat cloud?](/en/topics/cloud-computing/why-choose-red-hat-cloud)
* [Cloud vs. edge](/en/topics/cloud-computing/cloud-vs-edge)
* [Red Hat OpenShift vs. Kubernetes](/en/technologies/cloud-computing/openshift/red-hat-openshift-kubernetes)
* [Learning Ansible basics](/en/topics/automation/learning-ansible-tutorial)
* [What is Linux?](/en/topics/linux/what-is-linux)
### More to explore

* [Blog](/en/blog)
* [Customer success stories](/en/success-stories)
* [Events and webinars](/en/events)
* [Newsroom](/en/about/newsroom)
* [Podcasts and video series](/en/red-hat-original-series)
* [Documentation](https://docs.redhat.com/en)
* [Resource library](/en/resources)
* [Training and certification](/en/services/training-and-certification)
[Explore resources](/en/resources)
### For customers

* [Our partners](/en/partners)
* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
* [Find a partner](https://catalog.redhat.com/partners)
### For partners

* [Partner Connect](https://connect.redhat.com)
* [Become a partner](https://connect.redhat.com/en/benefits-of-being-a-partner)
* [Training](https://connect.redhat.com/en/training)
* [Support](https://connect.redhat.com/en/support)
* [Access the partner portal](https://connect.redhat.com/partner-admin/dashboard)
### About us

* [Our company](/en/about/company)
* [How we work](/en/about/our-culture)
* [Our social impact](/en/about/community-social-responsibility)
* [Development model](/en/about/development-model)
* [Subscription model](/en/about/value-of-Red-Hat)
* [Product support](/en/services/support)
### Open source

* [Open source commitments](/en/about/open-source)
* [How we contribute](/en/about/our-community-contributions)
* [Red Hat on GitHub](https://github.com/RedHatOfficial)
### Company details

* [Analyst relations](/en/about/analysts)
* [Blog](/en/blog)
* [Locations](/en/about/office-locations)
* [Newsroom](/en/about/newsroom)
[Explore Red Hat](/en/about)[Contact us](/en/contact)For customers

* [Customer support](https://access.redhat.com/)* [Subscription management](https://access.redhat.com/management)* [Support cases](https://access.redhat.com/support/cases)* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)* [Find a partner](https://catalog.redhat.com/partners)
For partners

* [Partner portal](https://connect.redhat.com/partner-admin/dashboard)* [Partner support](https://connect.redhat.com/en/support)* [Become a partner](https://connect.redhat.com/)
Try, buy, & sell

* [Red Hat Marketplace](https://marketplace.redhat.com/en-us)* [Red Hat Store](https://www.redhat.com/en/store)* [Contact sales](/en/contact)* [Start a trial](/en/products/trials)
Learning resources

* [Documentation](https://docs.redhat.com/en)* [Training and certification](/en/services/training-and-certification) * [Hybrid cloud learning hub](https://cloud.redhat.com/learn)* [Interactive labs](/en/interactive-labs)* [Learning community](https://learn.redhat.com/)* [Red Hat TV](https://tv.redhat.com)
Open source communities

* [Global advocacy](https://access.redhat.com/accelerators)* [How we contribute](/en/about/our-community-contributions)
For you
New
### Recommendations

As you browse redhat.com, we'll recommend resources you may like. For now, try these.

---

* [All Red Hat products](/en/technologies/all-products)
* [Tech topics](/en/topics)
* [Red Hat resources](/en/resources)
![close](https://static.redhat.com/libs/redhat/rh-iconfont/latest/svg/web-icon-close.svg)[![Red Hat Summit](/themes/custom/rh_base_ui/dist/img/red-hat-summit-logo.svg)Red Hat Summit](https://www.redhat.com/en/summit)[Support](https://access.redhat.com/)[Documentation](https://docs.redhat.com/en)[Console](https://cloud.redhat.com/)[Developers](https://developers.redhat.com/)[Start a trial](/en/products/trials)[Contact](/en/contact)Select a language简体中文EnglishFrançaisDeutschItaliano日本語한국어PortuguêsEspañol[Contact us](/en/contact)
English
### Select a language

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)
Select a language简体中文EnglishFrançaisDeutschItaliano日本語한국어PortuguêsEspañol![](/themes/custom/rh_base_ui/dist/img/talk-bubble.svg)

* [Products](https://www.redhat.com/en/technologies/all-products)
* [Solutions](https://www.redhat.com/en/solutions)
* [Training & services](https://www.redhat.com/en/services)
* [Resources](https://www.redhat.com/en/resources)
* Partners
* [About](https://www.redhat.com/en/about)
* [Contact us](/en/contact)

### Select a language

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)

# Red Hat Support

## Go beyond support by engaging with our experts

Our teams collaborate with you to ensure you accomplish your goals with Red Hat solutions. The relationship we build with you is designed to provide you with the tools and resources you need to find success on your IT journey.

![](/rhdc/managed-files/support-header.svg)

## Configured for your success

We develop a holistic understanding of your experience as a customer by ensuring our support and engineering teams work together.

Our support team works hand in hand with the best engineers in the industry to quickly turn customer feedback into product improvements. This direct line of communication allows us to hone in on proactive fixes that can impact your bottom line.

### Quick links

* Search our [Knowledgebase](https://access.redhat.com/search/#/?q=&p=1&sort=relevant&scoped&documentKind=Knowledgebase)
* Find [product documentation](https://access.redhat.com/documentation/en-us/)
* Access the [product security center](https://access.redhat.com/security/)
* Connect with [our support team](https://access.redhat.com/support)
* Team up with a [technical account manager](/en/services/support/technical-account-management "Technical account management")
* Take advantage of [partner support](https://connect.redhat.com/en/support)

## Find the right level of support

We have different tiers of support designed to meet your unique needs.

|  | Self-support | Standard | Premium |
| --- | --- | --- | --- |
| Access to Red Hat products | checkmark | checkmark | checkmark |
| Access to our knowledgebase and tools in our award-winning Customer Portal | checkmark | checkmark | checkmark |
| Access to support engineers during standard business hours |  | checkmark | checkmark |
| Access to support engineers 24x7 for high-severity issues |  |  | checkmark |

We also feature specialized support options that can be tailored to the unique needs of companies of all sizes and industries. The Red Hat® [Enhanced Solution Support](/en/resources/enhanced-solution-support-datasheet "Red Hat Enhanced Solution Support: 24x7 engineering support") offering reduces downtime and boosts confidence through access to senior level engineers, as well as resolution and restoration SLAs—helping you stay up and running as you innovate, scale, and deploy. Our engineers help restore your operations quickly and accelerate the path to final resolution, identifying the root cause which helps protect against recurrences in the future. Enhanced Solution Support engineers, who are already familiar with your environment, will be there to assist with critical issues in production environments so that you can consistently deliver the cloud services your customers demand. This offering is available for Red Hat OpenShift® and Red Hat OpenStack® Platform customers.

### Personalized support

Connect with a technical adviser for collaborative planning and specialized guidance. Our Technical Account Managers help you streamline deployments, resolve issues, and shape your technology strategy to meet your toughest business challenges.

[Explore Technical Account Management](/en/services/support/technical-account-management)

## Award winners since 2011

We’ve evolved the traditional software subscription model, combining the best elements of our services to exceed customer expectations. The Association of Support Professionals has honored Red Hat’s Customer Portal as one of “The Top Ten Best Support Websites” for 13 years running.

[See why the Customer Portal keeps earning industry recognition](https://access.redhat.com/)

![Gold and green star with text ASP best support websites of 2023](/rhdc/managed-files/ASP-Award-Design.jpg)

## What they're saying

![BSE logo](/rhdc/managed-files/bse-logo-2.png)

> Icon-Red\_Hat-Media\_and\_documents-Quotemark\_Open-B-Red-RGB
>
> We have found the support from Red Hat to be exemplary. Whenever we need anything from them, they have given it … Red Hat is now our backbone. Our business cannot run if Red Hat is not there.
>
> Ashishkumar Chauhan
>
> CEO, BSE

> Icon-Red\_Hat-Media\_and\_documents-Quotemark\_Open-B-Red-RGB
>
> I like the fact that they really dig into things and then provide answers. As the single Linux guy, I kind of need that second admin next to me sometimes to say, "Hey, what about this?" and I am able to do that through the portal. I get my questions answered and trouble tickets resolved.
>
> Erik Widholm
>
> Sr. Enterprise Engineer

[Read more user reviews](/en/technologies/linux-platforms/enterprise-linux/user-reviews)

## Have questions?

[Contact Support team](https://access.redhat.com/support)

[Visit the Customer Portal](https://access.redhat.com/)

[![Red Hat logo](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](/en)[LinkedIn](https://www.linkedin.com/company/red-hat)[YouTube](https://www.youtube.com/user/RedHatVideos)[Facebook](https://www.facebook.com/redhatinc)[X](https://twitter.com/RedHat)
### Products

* [Red Hat Enterprise Linux](/en/technologies/linux-platforms/enterprise-linux)
* [Red Hat OpenShift](/en/technologies/cloud-computing/openshift)
* [Red Hat Ansible Automation Platform](/en/technologies/management/ansible)
* [Cloud services](/en/technologies/cloud-computing/openshift/cloud-services)
* [See all products](/en/technologies/all-products)

### Tools

* [Training and certification](/en/services/training-and-certification)
* [My account](https://www.redhat.com/wapps/ugc/protected/personalInfo.html)
* [Customer support](https://access.redhat.com)
* [Developer resources](https://developers.redhat.com/)
* [Find a partner](https://catalog.redhat.com/partners)
* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
* [Red Hat value calculator](/en/solutions/value-calculator)
* [Documentation](https://docs.redhat.com/en)

### Try, buy, & sell

* [Product trial center](/en/products/trials)
* [Red Hat Marketplace](https://marketplace.redhat.com)
* [Red Hat Store](https://www.redhat.com/en/store)
* [Buy online (Japan)](https://www.redhat.com/en/about/japan-buy)
* [Console](https://cloud.redhat.com/)

### Communicate

* [Contact sales](/en/contact/sales)
* [Contact customer service](/en/contact/customer-service)
* [Contact training](/en/services/training-and-certification/contact-us)
* [Social](/en/about/social)

### About Red Hat

We’re the world’s leading provider of enterprise open source solutions—including Linux, cloud, container, and Kubernetes. We deliver hardened solutions that make it easier for enterprises to work across platforms and environments, from the core datacenter to the network edge.

### Select a language

![](https://static.redhat.com/libs/redhat/rh-iconfont/4/svg/web-icon-globe.svg)

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)
### Red Hat legal and privacy links

* [About Red Hat](/en/about/company)
* [Jobs](/en/jobs)
* [Events](/en/events)
* [Locations](/en/about/office-locations)
* [Contact Red Hat](/en/contact)
* [Red Hat Blog](/en/blog)
* [Diversity, equity, and inclusion](/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

© 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](/en/about/privacy-policy)
* [Terms of use](/en/about/terms-use)
* [All policies and guidelines](/en/about/all-policies-guidelines)
* [Digital accessibility](/en/about/digital-accessibility)



=== Content from bugzilla.mozilla.org_3b156770_20250124_234835.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/643839)
* [XML](/show_bug.cgi?ctype=xml&id=643839)

Closed
[Bug 643839](/show_bug.cgi?id=643839)

Opened 14 years ago
Closed 14 years ago

# Crash [@ js::gc::MarkChildren]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ js::gc::MarkChildren]

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed) |
| status2.0 | --- | [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted) |
| status1.9.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected) |
| status1.9.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox5 | + | fixed |
| status2.0 |  | wanted |
| status1.9.2 |  | unaffected |
| relnote-firefox |  | --- |
| status1.9.1 |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: bhackett1024)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/764aa0af2fda6f02fb17dc9771bb18d9?d=mm&size=40)  [bhackett1024](/user_profile?user_id=346231)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[596805](/show_bug.cgi?id=596805 "RESOLVED FIXED - Crash [@ JSObject::allocSlot] or \"Assertion failure: t->freelist < slotSpan\" or \"Assertion failure: JSVAL_IS_DOUBLE_IMPL(data),\"")

Dependency [tree](/showdependencytree.cgi?id=643839&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=643839)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[602803](/show_bug.cgi?id=602803 "RESOLVED INCOMPLETE - crash in js::gc::MarkChildren")

## Details

### (Keywords: crash, regression, testcase, Whiteboard: [sg:critical?])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:critical?]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [decoder](/user_profile?user_id=395101) | [in-testsuite](#c24 "14 years ago") | - |
| --- | --- | --- |
| [decoder](/user_profile?user_id=395101) | in-testsuite | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ js::gc::MarkChildren ]](https://crash-stats.mozilla.org/signature/?signature=js%3A%3Agc%3A%3AMarkChildren)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [stack](/attachment.cgi?id=526260)  [14 years ago](#c8)  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)   21.60 KB, text/plain |  | [Details](/attachment.cgi?id=526260&action=edit) |
| --- | --- | --- |
| [patch](/attachment.cgi?id=526454)  [14 years ago](#c12)  [Brian Hackett [Laid off!]](/user_profile?user_id=346231)   1.28 KB, patch | brendan : [review+](#c13 "14 years ago")  christian : [approval-mozilla-aurora+](#a2504872_482154 "14 years ago")  dveditz : [approval2.0+](#c23 "14 years ago") | [Details](/attachment.cgi?id=526454&action=edit) | [Diff](/attachment.cgi?id=526454&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=643839&attachment=526454) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=643839#c0)• 14 years ago |
|  | |

try {
x
} catch(r) {}
try {
x = <x/>
x.c = x;
with(x) {
x
}
x.\_\_defineSetter\_\_("x", function() {})
gc()
instanceof({
a: x
})
} catch(r) {}
gc()
crashes js opt shell on TM changeset c811be25eaad without -m nor -j at js::gc::MarkChildren but does not seem to crash debug shell.
Locking s-s just to be safe.
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: 63258:b16be37906fe
user: Andreas Gal
date: Wed Mar 09 00:53:56 2011 -0800
summary: Don't shrink object slots during GC ([bug 639727](/show_bug.cgi?id=639727 "RESOLVED FIXED - don't try to shrink object slots during GC marking"), r=bhackett).

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=643839#c1)• 14 years ago |
|  | |

Tested on 64-bit shell.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=643839#c2)• 14 years ago |
|  | |

Assuming the worst given GC MarkChildren.Assignee: general → galWhiteboard: [sg:critical?]

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643839#a683571_132034)• 14 years ago |

blocking2.0: --- → ?blocking-fx: --- → ?

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=643839#c3)• 14 years ago |
|  | |

#26 topcrash on <https://crash-stats.mozilla.com/topcrasher/byversion/Firefox/4.0>

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643839#a683749_132034)• 14 years ago |

See Also: → [602803](/show_bug.cgi?id=602803 "RESOLVED INCOMPLETE - crash in js::gc::MarkChildren")

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=643839#c4)• 14 years ago |
|  | |

Gal, I hear this might be the cause for a top crash bug as well, can you investigate here?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=643839#c5)• 14 years ago |
|  | |

Probably not going to be done in time for Macaw; we'll take it in a security update when it's ready.blocking2.0: ? → ---
[status2.0](/buglist.cgi?f1=cf_status_20&o1=isnotempty):
--- → [wanted](/buglist.cgi?f1=cf_status_20&o1=equals&v1=wanted)

|  | [Johnny Stenback (:jst)](/user_profile?user_id=12352) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=643839#c6)• 14 years ago |
|  | |

gal?

|  | [Andreas Gal :gal](/user_profile?user_id=310943) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=643839#c7)• 14 years ago |
|  | |

I wasn't able to reproduce this with TM tip.

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=643839#c8)• 14 years ago |
|  | |

Attached file
[stack](attachment.cgi?id=526260)
— [Details](attachment.cgi?id=526260&action=edit)

I could still reproduce this on 32-bit Linux opt js shell on Ubuntu 10.10, TM changeset e06d53aec568.

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=643839#c9)• 14 years ago |
|  | |

(In reply to [comment #8](/show_bug.cgi?id=643839#c8 "RESOLVED FIXED - Crash [@ js::gc::MarkChildren]"))
> Created [attachment 526260](/attachment.cgi?id=526260 "stack") [[details]](/attachment.cgi?id=526260&action=edit "stack")
> stack
Valgrind opt stack is also available in this attachment.
Setting tracking-firefox5/6 ? nomination flags to track this. Now #19 on topcrash list.
[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=643839#c10)• 14 years ago |
|  | |

We have a very similar crash on the TI branch (see 649152) and the testcase there is also hard to reproduce (worked on Linux 64 bit but not on Mac OSX 64 bit). Maybe the underlying issue is the same, in that case I guess the additional information in that bug might be helpful.

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=643839#c11)• 14 years ago |
|  | |

I can also repro on OSX 32 bit opt, rev e06d53aec568 (tip). I'll look at this tonight if no one gets to it by then.

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643839#a2072195_482154)• 14 years ago |

blocking-fx: ? → ---

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643839#a2076269_482154)• 14 years ago |

[tracking-firefox5](/buglist.cgi?f1=cf_tracking_firefox5&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox5&o1=equals&v1=%2B)
[tracking-firefox6](/buglist.cgi?f1=cf_tracking_firefox6&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox6&o1=equals&v1=%3F) → ---

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=643839#c12)• 14 years ago |
|  | |

Attached patch

[patch](attachment.cgi?id=526454&action=diff)
— [Details](attachment.cgi?id=526454&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=643839&attachment=526454)

Patch. The defineSetter overwrote a value property with a setter, but did not write undefined to the old slot. The object in that old slot was collected, and then another property was added (from MarkSharpObjects of all places) which reused the slot and didn't write to it (addProperty\* expect that slots above slotSpan are undefined), so it held a stale pointer to an already-collected object.
In debug mode we cleared the slot, but not in release mode (the patch just makes us always clear the slot; also, auto-bisect is a red herring, conservative GC etc).
Can we avoid this kind of code where debug mode affects the semantics of the program? (Ran into similar issues in JM where we would invalidate entries only in debug mode). Places where we write 0xdededede or similar in debug mode to trigger a crash on the next access are good, but I'm not sure what the intention here was. This took an order of magnitude longer to understand than if it had showed up in a debug build.
[Attachment #526454](/attachment.cgi?id=526454&action=edit "patch") -
Flags: review?(brendan)

|  | [Brendan Eich [:brendan]](/user_profile?user_id=1214) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=643839#c13)• 14 years ago |
|  | |

Comment on [attachment 526454](/attachment.cgi?id=526454 "patch") [[details]](/attachment.cgi?id=526454&action=edit "patch") [[diff]](/attachment.cgi?id=526454&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=643839&attachment=526454)
patch
Good catch.
For sure this should not have been DEBUG-only. That was a mistake that assumed the only observation of a slot at or above slotSpan would be from assertions, which are also DEBUG-only. A warning sign, in hindsight.
/be
[Attachment #526454](/attachment.cgi?id=526454&action=edit "patch") -
Flags: review?(brendan) → review+

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=643839#c14)• 14 years ago |
|  | |

Based on inspection of line change, the regressing changeset is probably [bug 596805](/show_bug.cgi?id=596805 "RESOLVED FIXED - Crash [@ JSObject::allocSlot] or \"Assertion failure: t->freelist < slotSpan\" or \"Assertion failure: JSVAL_IS_DOUBLE_IMPL(data),\"") :
<http://hg.mozilla.org/tracemonkey/rev/7ef107ab081e>Assignee: gal → bhackett1024Blocks: [596805](/show_bug.cgi?id=596805 "RESOLVED FIXED - Crash [@ JSObject::allocSlot] or \"Assertion failure: t->freelist < slotSpan\" or \"Assertion failure: JSVAL_IS_DOUBLE_IMPL(data),\"")
No longer blocks: [639727](/show_bug.cgi?id=639727 "RESOLVED FIXED - don't try to shrink object slots during GC marking")Status: NEW → ASSIGNED

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=643839#c15)• 14 years ago |
|  | |

How, where and when should this get pushed? (Also, not with a testcase, right?)Status: ASSIGNED → NEW

|  | [Brendan Eich [:brendan]](/user_profile?user_id=1214) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=643839#c16)• 14 years ago |
|  | |

Dan, Christian: can you advise re: [comment 15](/show_bug.cgi?id=643839#c15 "RESOLVED FIXED - Crash [@ js::gc::MarkChildren]")? Thanks.
/be

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=643839#c17)• 14 years ago |
|  | |

As this should affect FF4 stable as well as FF5 aurora build, I'd say push to TM trunk first (without test) and then it must be merged to FF4/FF5 branches (don't know exactly who does this right now).
Once a security update for FF4 was issued we can add the missing test to trunk.
Is that correct Daniel?

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=643839#c18)• 14 years ago |
|  | |

This already missed the boat for Macaw/4.0.1 and we aren't planning on doing a 4.0.2. That being said, we want this on mozilla-aurora so that it will end up in FF5 (and of course mozilla-central as well).
Please land this on mozilla-aurora default WITHOUT the test.
Thanks!

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643839#a2504872_482154)• 14 years ago |

[Attachment #526454](/attachment.cgi?id=526454&action=edit "patch") -
Flags: approval-mozilla-aurora+

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=643839#c19)• 14 years ago |
|  | |

<http://hg.mozilla.org/mozilla-aurora/rev/bfdb6e623a36>
<http://hg.mozilla.org/mozilla-central/rev/d50f943c21e3>Status: NEW → RESOLVEDClosed: 14 years agoResolution: --- → FIXED

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=643839#c20)• 14 years ago |
|  | |

in-testsuite? can be turned to + after test is eventually checked in.Flags: in-testsuite?

|  | [Brian Hackett [Laid off!]](/user_profile?user_id=346231)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643839#a3805612_346231)• 14 years ago |

[status-firefox5](/buglist.cgi?f1=cf_status_firefox5&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox5&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643839#a4523380_1689)• 14 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_191&o1=equals&v1=unaffected)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_192&o1=equals&v1=unaffected)

|  | [Cameron Kaiser [:spectre]](/user_profile?user_id=101070) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=643839#c21)• 14 years ago |
|  | |

Per security group discussion, requesting landing on mozilla-2.0.

|  | [Cameron Kaiser [:spectre]](/user_profile?user_id=101070) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643839#a5262690_101070)• 14 years ago |

[Attachment #526454](/attachment.cgi?id=526454&action=edit "patch") -
Flags: approval2.0?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=643839#c22)• 14 years ago |
|  | |

Comment on [attachment 526454](/attachment.cgi?id=526454 "patch") [[details]](/attachment.cgi?id=526454&action=edit "patch") [[diff]](/attachment.cgi?id=526454&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=643839&attachment=526454)
patch
Approved for the mozilla2.0 repository, a=dveditz for release-drivers
When landed please add a link to the changeset and flip the status2.0 field to ".x-fixed"

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643839#a7164848_1)• 14 years ago |

Crash Signature: [@ js::gc::MarkChildren]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=643839#c23)• 14 years ago |
|  | |

Comment on [attachment 526454](/attachment.cgi?id=526454 "patch") [[details]](/attachment.cgi?id=526454&action=edit "patch") [[diff]](/attachment.cgi?id=526454&action=diff "patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=643839&attachment=526454)
patch
Approved for the mozilla2.0 repository, a=dveditz for release-drivers
[Attachment #526454](/attachment.cgi?id=526454&action=edit "patch") -
Flags: approval2.0? → approval2.0+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=643839#a9664469_1689)• 14 years ago |

Group: core-security

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=643839#c24)• 12 years ago |
|  | |

I wasn't able to rewrite the test in [comment 0](/show_bug.cgi?id=643839#c0 "RESOLVED FIXED - Crash [@ js::gc::MarkChildren]") to work without E4X. If this is possible and you want to add a test, feel free to do so and adjust the in-testsuite flag.Flags: in-testsuite? → in-testsuite-
You need to [log in](/show_bug.cgi?id=643839&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from support.avaya.com_dd3b4ca2_20250124_234820.html ===


---

firefox security and bug fix update (RHSA-2011-0885)

Original Release Date: July 19, 2011

Last Revised: April 5, 2012

Number: ASA-2011-207

Risk Level: Low

Advisory Version: 2.0

Advisory Status: Final

---

## 1. Overview:

Mozilla Firefox is an open source web browser. XULRunner provides the XUL
Runtime environment for Mozilla Firefox.

A flaw was found in the way Firefox handled malformed JPEG images. A
website containing a malicious JPEG image could cause Firefox to crash or,
potentially, execute arbitrary code with the privileges of the user running
Firefox. The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the name [CVE-2011-2377](https://www.redhat.com/security/data/cve/CVE-2011-2377.html) to this issue.

Multiple dangling pointer flaws were found in Firefox. A web page
containing malicious content could cause Firefox to crash or, potentially,
execute arbitrary code with the privileges of the user running Firefox.
The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the names [CVE-2011-0083](https://www.redhat.com/security/data/cve/CVE-2011-0083.html), [CVE-2011-0085](https://www.redhat.com/security/data/cve/CVE-2011-0085.html) and [CVE-2011-2363](https://www.redhat.com/security/data/cve/CVE-2011-2363.html) to these issues.

Several flaws were found in the processing of malformed web content. A web
page containing malicious content could cause Firefox to crash or,
potentially, execute arbitrary code with the privileges of the user running
Firefox. The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the names [CVE-2011-2364](https://www.redhat.com/security/data/cve/CVE-2011-2364.html), [CVE-2011-2365](https://www.redhat.com/security/data/cve/CVE-2011-2365.html), [CVE-2011-2374](https://www.redhat.com/security/data/cve/CVE-2011-2374.html), [CVE-2011-2375](https://www.redhat.com/security/data/cve/CVE-2011-2375.html) and [CVE-2011-2376](https://www.redhat.com/security/data/cve/CVE-2011-2376.html) to these issues.

An integer overflow flaw was found in the way Firefox handled JavaScript
Array objects. A website containing malicious JavaScript could cause
Firefox to execute that JavaScript with the privileges of the user running
Firefox. The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the name [CVE-2011-2371](https://www.redhat.com/security/data/cve/CVE-2011-2371.html) to this issue.

A use-after-free flaw was found in the way Firefox handled malformed
JavaScript. A website containing malicious JavaScript could cause Firefox
to execute that JavaScript with the privileges of the user running Firefox.
The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the name [CVE-2011-2373](https://www.redhat.com/security/data/cve/CVE-2011-2373.html) to this issue.

It was found that Firefox could treat two separate cookies as
interchangeable if both were for the same domain name but one of those
domain names had a trailing "." character. This violates the same-origin
policy and could possibly lead to data being leaked to the wrong domain.
The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the name [CVE-2011-2362](https://www.redhat.com/security/data/cve/CVE-2011-2362.html) to this issue.

More information about these vulnerabilities can be found in the security advisory issued by Red Hat:

* <https://rhn.redhat.com/errata/RHSA-2011-0885.html>

## 2. Avaya System Products using a modified version of RHEL with affected packages installed: | Product: | Affected Version(s): | Risk Level: | Actions: | | --- | --- | --- | --- | | Avaya IQ | 4.x, 5.x | None | See Mitigating Factors table below. | | Avaya Message Networking | 5.2 thru 5.2.3 | Low | Upgrade to Message Networking 5.2.4 or later. | | Avaya Messaging Storage Server | 4.0, 5.2 thru 5.2.9 | Low | Upgrade to Messaging Storage Server 5.2.10 or later. | | Avaya Aura® Presence Services | 6.0, 6.1, 6.1.1 | None | Upgrade to Presence Services 6.1.2 or later. See Mitigating Factors table below. | | Avaya Aura® Session Manager | 1.1, 5.x, 6.0.x, 6.1.x | None | Upgrade to Session Manager 6.2 or later. See Mitigating Factors table below. | | Avaya Aura® System Manager | 5.x, 6.x | None | See Mitigating Factors table below. |

**Recommended Actions for System Products:**
Avaya strongly recommends that customers follow
networking and security best practices by implementing
firewalls, ACLs, physical security or other appropriate
access restrictions. Though Avaya believes such
restrictions should always be in place, risk to Avaya
products and the surrounding network from this potential
vulnerability may be mitigated by ensuring these
practices are implemented until such time as an Avaya provided
product update or the recommended Avaya action is applied.
Further restrictions as deemed necessary based on the
customer's security policies may be required during this
interim period, but customers should not modify the System Product
operating system or application unless the change is approved by Avaya.
Making changes that are not approved may void the Avaya product service contract.

### Mitigating Factors:

When determining risk, Avaya takes into account many factors as
outlined by Avaya's
[Security Vulnerability Classification Policy](https://support.avaya.com/css/P8/documents/100066674).
The following table describes factors that mitigate the risk of specific
vulnerabilities for affected Avaya products:

| Vulnerability | Mitigating Factors |
| --- | --- |
| CVE-2011-0083 CVE-2011-0085 CVE-2011-2362 CVE-2011-2363 CVE-2011-2364 CVE-2011-2365 CVE-2011-2371 CVE-2011-2373 CVE-2011-2374 CVE-2011-2375 CVE-2011-2376 CVE-2011-2377 | This is a low risk for Message Networking and Messaging Storage Server as Firefox usage is not standard functionality. There is no risk for IQ, Presence Services, Session Manager and System Manager because Firefox is not installed by default. The xulrunner package is installed and updated per the specific product actions above. |

## 3. Avaya Software-Only Products:

Avaya software-only products operate on general-purpose operating systems.
Occasionally vulnerabilities may be discovered in the underlying operating system or
applications that come with the operating system. These vulnerabilities often do not
impact the software-only product directly but may threaten the integrity of the
underlying platform.

In the case of this advisory Avaya software-only products are not affected by the
vulnerability directly but the underlying Linux platform may be. Customers should
determine on which Linux operating system the product was installed and then follow
that vendor's guidance.

| Product: | Actions: |
| --- | --- |
| Avaya Aura® Application Enablement Services 4.x/5.x | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the AES application. |
| CVLAN | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the CVLAN application. |
| Avaya Integrated Management Suite (IMS) | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the IMS application. |
| Avaya Aura® Presence Services | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the PS application. |
| Avaya Aura® System Manager 1.0 | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the SMGR application. |
| Voice Portal | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the Voice Portal application. |

**Recommended Actions for Software-Only Products:**
In the event that the affected package is installed, Avaya recommends that customers follow recommended actions supplied by Red Hat regarding their Enterprise Linux.

## 4. Additional Information:

Additional information may also be available via the Avaya support
[website](http://support.avaya.com) and through your Avaya
account representative. Please contact your Avaya product support
representative, or dial 1-800-242-2121, with any questions.

## 5. Disclaimer:

ALL INFORMATION IS BELIEVED TO BE CORRECT AT THE TIME OF PUBLICATION
AND IS PROVIDED "AS IS". AVAYA INC., ON BEHALF ITSELF AND ITS
SUBSIDIARIES AND AFFILIATES (HEREINAFTER COLLECTIVELY REFERRED TO AS
"AVAYA"), DISCLAIMS ALL WARRANTIES, EITHER EXPRESS OR IMPLIED,
INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY AND FITNESS
FOR A PARTICULAR PURPOSE AND FURTHERMORE, AVAYA MAKES NO REPRESENTATIONS
OR WARRANTIES THAT THE STEPS RECOMMENDED WILL ELIMINATE SECURITY OR VIRUS
THREATS TO CUSTOMERS' SYSTEMS. IN NO EVENT SHALL AVAYA BE LIABLE FOR ANY
DAMAGES WHATSOEVER ARISING OUT OF OR IN CONNECTION WITH THE INFORMATION OR
RECOMMENDED ACTIONS PROVIDED HEREIN, INCLUDING DIRECT, INDIRECT, INCIDENTAL,
STATUTORY, CONSEQUENTIAL DAMAGES, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES,
EVEN IF AVAYA HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.

THE INFORMATION PROVIDED HERE DOES NOT AFFECT THE SUPPORT AGREEMENTS
IN PLACE FOR AVAYA PRODUCTS. SUPPORT FOR AVAYA PRODUCTS CONTINUES TO BE
EXECUTED AS PER EXISTING AGREEMENTS WITH AVAYA.

## 6. Revision History:

V 1.0 - July 19, 2011 - Initial Statement issued.

V 2.0 - April 5, 2012 - Changed MN, MSS, PS and SM affected versions, IQ, PS, SM
and SMGR risk level and all product actions.

Changed Mitigating Factors table and advisory status to final.

Send information regarding any discovered security problems with Avaya
products to either the contact noted in the product's documentation or
securityalerts@avaya.com.

Linux® is the registered trademark of Linus Torvalds in the U.S. and other countries.

© 2011 Avaya Inc. All Rights Reserved. All trademarks identifying Avaya products by the ® or ™ are registered trademarks or trademarks, respectively, of Avaya Inc. All other trademarks are the property of their respective owners.



=== Content from support.avaya.com_1dd9278f_20250124_234820.html ===


---

seamonkey security update (RHSA-2011-0888)

Original Release Date: July 11, 2011

Last Revised: July 11, 2011

Number: ASA-2011-201

Risk Level: Low

Advisory Version: 1.0

Advisory Status: Final

---

## 1. Overview:

SeaMonkey is an open source web browser, email and newsgroup client, IRC
chat client, and HTML editor.

A flaw was found in the way SeaMonkey handled malformed JPEG images. A
website containing a malicious JPEG image could cause SeaMonkey to crash
or, potentially, execute arbitrary code with the privileges of the user
running SeaMonkey. The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the name [CVE-2011-2377](https://www.redhat.com/security/data/cve/CVE-2011-2377.html) to this issue.

Multiple dangling pointer flaws were found in SeaMonkey. A web page
containing malicious content could cause SeaMonkey to crash or,
potentially, execute arbitrary code with the privileges of the user running
SeaMonkey. The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the names [CVE-2011-0083](https://www.redhat.com/security/data/cve/CVE-2011-0083.html), [CVE-2011-0085](https://www.redhat.com/security/data/cve/CVE-2011-0085.html) and [CVE-2011-2363](https://www.redhat.com/security/data/cve/CVE-2011-2363.html) to these issues.

Several flaws were found in the processing of malformed web content. A web
page containing malicious content could cause SeaMonkey to crash or,
potentially, execute arbitrary code with the privileges of the user running
SeaMonkey. The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the names [CVE-2011-2364](https://www.redhat.com/security/data/cve/CVE-2011-2364.html), [CVE-2011-2365](https://www.redhat.com/security/data/cve/CVE-2011-2365.html), [CVE-2011-2374](https://www.redhat.com/security/data/cve/CVE-2011-2374.html), [CVE-2011-2375](https://www.redhat.com/security/data/cve/CVE-2011-2375.html) and [CVE-2011-2376](https://www.redhat.com/security/data/cve/CVE-2011-2376.html) to these issues.

An integer overflow flaw was found in the way SeaMonkey handled JavaScript
Array objects. A website containing malicious JavaScript could cause
SeaMonkey to execute that JavaScript with the privileges of the user
running SeaMonkey. The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the name [CVE-2011-2371](https://www.redhat.com/security/data/cve/CVE-2011-2371.html) to this issue.

A use-after-free flaw was found in the way SeaMonkey handled malformed
JavaScript. A website containing malicious JavaScript could cause SeaMonkey
to execute that JavaScript with the privileges of the user running
SeaMonkey. The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the name [CVE-2011-2373](https://www.redhat.com/security/data/cve/CVE-2011-2373.html) to this issue.

It was found that SeaMonkey could treat two separate cookies as
interchangeable if both were for the same domain name but one of those
domain names had a trailing "." character. This violates the same-origin
policy and could possibly lead to data being leaked to the wrong domain.
The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the name [CVE-2011-2362](https://www.redhat.com/security/data/cve/CVE-2011-2362.html) to this issue.

More information about these vulnerabilities can be found in the security advisory issued by Red Hat:

* <https://rhn.redhat.com/errata/RHSA-2011-0888.html>

## 2. Avaya System Products using a modified version of RHEL4 with affected components/packages installed: | Product: | Affected Version(s): | Risk Level: | Actions: | | --- | --- | --- | --- | | Avaya Message Networking | 3.1 | Low | Upgrade to MN 5.2 or later. |

**Recommended Actions for System Products:**
Avaya strongly recommends that customers follow
networking and security best practices by implementing
firewalls, ACLs, physical security or other appropriate
access restrictions. Though Avaya believes such
restrictions should always be in place, risk to Avaya
products and the surrounding network from this potential
vulnerability may be mitigated by ensuring these
practices are implemented until such time as an Avaya provided
product update or the recommended Avaya action is applied.
Further restrictions as deemed necessary based on the
customer's security policies may be required during this
interim period, but customers should not modify the System Product
operating system or application unless the change is approved by Avaya.
Making changes that are not approved may void the Avaya product service contract.

### Mitigating Factors:

When determining risk, Avaya takes into account many factors as
outlined by Avaya's
[Security Vulnerability Classification Policy](https://support.avaya.com/css/P8/documents/100066674).
The following table describes factors that mitigate the risk of specific
vulnerabilities for affected Avaya products:

| Vulnerability | Mitigating Factors |
| --- | --- |
| CVE-2011-0083 CVE-2011-0085 CVE-2011-2362 CVE-2011-2363 CVE-2011-2364 CVE-2011-2365 CVE-2011-2371 CVE-2011-2373 CVE-2011-2374 CVE-2011-2375 CVE-2011-2376 CVE-2011-2377 | Low risk as no critical system applications or processes would be affected and would require non-standard user interaction. |

## 3. Avaya Software-Only Products:

Avaya software-only products operate on general-purpose operating systems.
Occasionally vulnerabilities may be discovered in the underlying operating system or
applications that come with the operating system. These vulnerabilities often do not
impact the software-only product directly but may threaten the integrity of the
underlying platform.

In the case of this advisory Avaya software-only products are not affected by the
vulnerability directly but the underlying Linux platform may be. Customers should
determine on which Linux operating system the product was installed and then follow
that vendor's guidance.

| Product: | Actions: |
| --- | --- |
| Avaya Aura® Application Enablement Services 4.x/5.x | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the AES application. |
| CVLAN | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the CVLAN application. |
| Avaya Integrated Management Suite (IMS) | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the IMS application. |
| Avaya Aura® Presence Services | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the PS application. |
| Avaya Aura® System Manager 1.0 | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the SMGR application. |
| Voice Portal | Depending on the Operating System provided by customers, the affected package may be installed on the underlying Operating System supporting the Voice Portal application. |

**Recommended Actions for Software-Only Products:**
In the event that the affected package is installed, Avaya recommends that customers follow recommended actions supplied by Red Hat regarding their Enterprise Linux.

## 4. Additional Information:

Additional information may also be available via the Avaya support
[website](http://support.avaya.com) and through your Avaya
account representative. Please contact your Avaya product support
representative, or dial 1-800-242-2121, with any questions.

## 5. Disclaimer:

ALL INFORMATION IS BELIEVED TO BE CORRECT AT THE TIME OF PUBLICATION
AND IS PROVIDED "AS IS". AVAYA INC., ON BEHALF ITSELF AND ITS
SUBSIDIARIES AND AFFILIATES (HEREINAFTER COLLECTIVELY REFERRED TO AS
"AVAYA"), DISCLAIMS ALL WARRANTIES, EITHER EXPRESS OR IMPLIED,
INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY AND FITNESS
FOR A PARTICULAR PURPOSE AND FURTHERMORE, AVAYA MAKES NO REPRESENTATIONS
OR WARRANTIES THAT THE STEPS RECOMMENDED WILL ELIMINATE SECURITY OR VIRUS
THREATS TO CUSTOMERS' SYSTEMS. IN NO EVENT SHALL AVAYA BE LIABLE FOR ANY
DAMAGES WHATSOEVER ARISING OUT OF OR IN CONNECTION WITH THE INFORMATION OR
RECOMMENDED ACTIONS PROVIDED HEREIN, INCLUDING DIRECT, INDIRECT, INCIDENTAL,
STATUTORY, CONSEQUENTIAL DAMAGES, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES,
EVEN IF AVAYA HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.

THE INFORMATION PROVIDED HERE DOES NOT AFFECT THE SUPPORT AGREEMENTS
IN PLACE FOR AVAYA PRODUCTS. SUPPORT FOR AVAYA PRODUCTS CONTINUES TO BE
EXECUTED AS PER EXISTING AGREEMENTS WITH AVAYA.

## 6. Revision History:

V 1.0 - July 11, 2011 - Initial Statement issued.

Send information regarding any discovered security problems with Avaya
products to either the contact noted in the product's documentation or
securityalerts@avaya.com.

Linux® is the registered trademark of Linus Torvalds in the U.S. and other countries.

© 2011 Avaya Inc. All Rights Reserved. All trademarks identifying Avaya products by the ® or ™ are registered trademarks or trademarks, respectively, of Avaya Inc. All other trademarks are the property of their respective owners.



=== Content from www.redhat.com_1a0f265a_20250124_234831.html ===

[Skip to content](#rhb-main-content)
## Featured links

* [![Red Hat Summit](/themes/custom/rh_base_ui/dist/img/red-hat-summit-logo.svg)](https://www.redhat.com/en/summit)
* [Support](https://access.redhat.com/)
* [Documentation](https://docs.redhat.com/en)
* [Console](https://cloud.redhat.com/)
* [Developers](https://developers.redhat.com/)
* [Start a trial](/en/products/trials)
* All Red Hat
  + For customers
    - [Customer support](https://access.redhat.com/)
    - [Subscription management](https://access.redhat.com/management)
    - [Support cases](https://access.redhat.com/support/cases)
    - [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
    - [Find a partner](https://catalog.redhat.com/partners)
  + For partners
    - [Partner portal](https://connect.redhat.com/partner-admin/dashboard)
    - [Partner support](https://connect.redhat.com/en/support)
    - [Become a partner](https://connect.redhat.com/)
  + Try, buy, & sell
    - [Red Hat Marketplace](https://marketplace.redhat.com/en-us)
    - [Red Hat Store](https://www.redhat.com/en/store)
    - [Contact sales](/en/contact)
    - [Start a trial](/en/products/trials)
  + Learning resources
    - [Documentation](https://docs.redhat.com/en)
    - [Training and certification](/en/services/training-and-certification)
    - [Hybrid cloud learning hub](https://cloud.redhat.com/learn)
    - [Interactive labs](/en/interactive-labs)
    - [Learning community](https://learn.redhat.com/)
    - [Red Hat TV](https://tv.redhat.com)
  + Open source communities
    - [Global advocacy](https://access.redhat.com/accelerators)
    - [How we contribute](/en/about/our-community-contributions)
[Red Hat](/en)

* [Products](https://www.redhat.com/en/technologies/all-products)
* [Solutions](https://www.redhat.com/en/solutions)
* [Training & services](https://www.redhat.com/en/services)
* [Resources](https://www.redhat.com/en/resources)
* Partners
* [About](https://www.redhat.com/en/about)
* Explore more
### Platform products

* [Red Hat Enterprise LinuxA flexible, stable operating system to support hybrid cloud innovation.](/en/technologies/linux-platforms/enterprise-linux)
* [Red Hat OpenShiftA container platform to build, modernize, and deploy applications at scale.](/en/technologies/cloud-computing/openshift)
* [Red Hat Ansible Automation PlatformNew versionA foundation for implementing enterprise-wide automation.](/en/technologies/management/ansible)
### Try & buy

* [Start a trialAssess a product with a no-cost trial.](/en/products/trials)
* [Buy onlineBuy select products and services in the Red Hat Store.](https://www.redhat.com/en/store)
* [Integrate with major cloud providersBuy Red Hat solutions using committed spend from providers, including:
  ![Cloud providers: Amazon Web Services, Microsoft Azure, and Google Cloud](https://www.redhat.com/rhdc/managed-files/cloud-providers-2x.png)](/en/partners/certified-cloud-and-service-providers)
### Featured

* [Red Hat Enterprise Linux AI](/en/technologies/linux-platforms/enterprise-linux/ai)
* [Red Hat OpenShift AI](/en/technologies/cloud-computing/openshift/openshift-ai)
* [Red Hat OpenShift Virtualization](/en/technologies/cloud-computing/openshift/virtualization)
* [Red Hat OpenShift Service on AWS](/en/technologies/cloud-computing/openshift/aws)
* [Microsoft Azure Red Hat OpenShift](/en/technologies/cloud-computing/openshift/azure)
[See all products](/en/technologies/all-products)

* [Application platformSimplify the way you build, deploy, manage, and secure apps across the hybrid cloud.](/en/solutions/application-platform)
* [Artificial intelligenceBuild, deploy, and monitor AI models and apps with Red Hat's open source platforms.](/en/solutions/ai)
* [Edge computingDeploy workloads closer to the source with security-focused edge technology.](/en/products/edge)

* [IT automationUnite disparate tech, teams, and environments with 1 comprehensive automation platform.](/en/solutions/it-automation)
* [Linux standardizationGet consistency across operating environments with an open, flexible infrastructure.](/en/solutions/linux-standardization)

* [SecurityDeliver software using trusted platforms and real-time security scanning and remediation.](/en/solutions/trusted-software-supply-chain)
* [VirtualizationModernize operations using a single platform for virtualized and containerized workloads.](/en/solutions/virtualization)
### By industry

* [Automotive](/en/solutions/automotive)
* [Financial services](/en/solutions/financial-services)
* [Healthcare](/en/solutions/healthcare)
* [Industrial sector](/en/solutions/industrial-sector)
* [Media and entertainment](/en/solutions/media-entertainment)
* [Public sector](/en/solutions/public-sector)
* [Telecommunications](/en/solutions/telecommunications)
[Explore solutions](/en/solutions)
### [Services](/en/services)

* [Consulting](/en/services/consulting)
* [Services for AI](/en/services/consulting/red-hat-consulting-for-ai)
* [Technical Account Management](/en/services/support/technical-account-management)
### [Training & certification](/en/services/training-and-certification)

* [All courses and exams](/en/services/training/all-courses-exams)
* [All certifications](/en/services/certifications)
* [Verify a certification](https://www.redhat.com/rhtapps/services/verify/)
* [Skills assessment](https://skills.ole.redhat.com)
* [Learning subscription](/en/services/training/learning-subscription)
* [Learning community](https://learn.redhat.com/)
* [Red Hat Academy](/en/services/training/red-hat-academy)
* [FAQs](/en/services/training-and-certification/faq)
* [Connect with learning experts](/en/services/training-and-certification/contact-us)
### Featured

* [Ansible Basics: Automation Technical Overview (No cost)](/en/services/training/do007-ansible-essentials-simplicity-automation-technical-overview)
* [Containers, Kubernetes and Red Hat OpenShift Technical Overview (No cost)](/en/services/training/do080-deploying-containerized-applications-technical-overview)
* [Red Hat Enterprise Linux Technical Overview (No cost)](/en/services/training/rh024-red-hat-linux-technical-overview)
* [Red Hat Certified System Administrator exam](/en/services/training/ex200-red-hat-certified-system-administrator-rhcsa-exam)
* [Red Hat System Administration I](/en/services/training/rh124-red-hat-system-administration-i)
[Explore services](/en/services)
### Topics

* [AI](/en/topics/ai)
* [Application modernization](/en/topics/application-modernization)
* [Automation](/en/topics/automation)
* [Cloud computing](/en/topics/cloud-computing)
* [Cloud-native applications](/en/topics/cloud-native-apps)
* [Containers](/en/topics/containers)
* [DevOps](/en/topics/devops)
* [Edge computing](/en/topics/edge-computing)
* [Linux](/en/topics/linux)
* [Virtualization](/en/topics/virtualization)
* [See all topics](/en/topics)
### Articles

* [What is InstructLab?](/en/topics/ai/what-is-instructlab)
* [What are cloud services?](/en/topics/cloud-computing/what-are-cloud-services)
* [What is edge computing?](/en/topics/edge-computing/what-is-edge-computing)
* [What is hybrid cloud?](/en/topics/cloud-computing/what-is-hybrid-cloud)
* [Why build a Red Hat cloud?](/en/topics/cloud-computing/why-choose-red-hat-cloud)
* [Cloud vs. edge](/en/topics/cloud-computing/cloud-vs-edge)
* [Red Hat OpenShift vs. Kubernetes](/en/technologies/cloud-computing/openshift/red-hat-openshift-kubernetes)
* [Learning Ansible basics](/en/topics/automation/learning-ansible-tutorial)
* [What is Linux?](/en/topics/linux/what-is-linux)
### More to explore

* [Blog](/en/blog)
* [Customer success stories](/en/success-stories)
* [Events and webinars](/en/events)
* [Newsroom](/en/about/newsroom)
* [Podcasts and video series](/en/red-hat-original-series)
* [Documentation](https://docs.redhat.com/en)
* [Resource library](/en/resources)
* [Training and certification](/en/services/training-and-certification)
[Explore resources](/en/resources)
### For customers

* [Our partners](/en/partners)
* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
* [Find a partner](https://catalog.redhat.com/partners)
### For partners

* [Partner Connect](https://connect.redhat.com)
* [Become a partner](https://connect.redhat.com/en/benefits-of-being-a-partner)
* [Training](https://connect.redhat.com/en/training)
* [Support](https://connect.redhat.com/en/support)
* [Access the partner portal](https://connect.redhat.com/partner-admin/dashboard)
### About us

* [Our company](/en/about/company)
* [How we work](/en/about/our-culture)
* [Our social impact](/en/about/community-social-responsibility)
* [Development model](/en/about/development-model)
* [Subscription model](/en/about/value-of-Red-Hat)
* [Product support](/en/services/support)
### Open source

* [Open source commitments](/en/about/open-source)
* [How we contribute](/en/about/our-community-contributions)
* [Red Hat on GitHub](https://github.com/RedHatOfficial)
### Company details

* [Analyst relations](/en/about/analysts)
* [Blog](/en/blog)
* [Locations](/en/about/office-locations)
* [Newsroom](/en/about/newsroom)
[Explore Red Hat](/en/about)[Contact us](/en/contact)For customers

* [Customer support](https://access.redhat.com/)* [Subscription management](https://access.redhat.com/management)* [Support cases](https://access.redhat.com/support/cases)* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)* [Find a partner](https://catalog.redhat.com/partners)
For partners

* [Partner portal](https://connect.redhat.com/partner-admin/dashboard)* [Partner support](https://connect.redhat.com/en/support)* [Become a partner](https://connect.redhat.com/)
Try, buy, & sell

* [Red Hat Marketplace](https://marketplace.redhat.com/en-us)* [Red Hat Store](https://www.redhat.com/en/store)* [Contact sales](/en/contact)* [Start a trial](/en/products/trials)
Learning resources

* [Documentation](https://docs.redhat.com/en)* [Training and certification](/en/services/training-and-certification) * [Hybrid cloud learning hub](https://cloud.redhat.com/learn)* [Interactive labs](/en/interactive-labs)* [Learning community](https://learn.redhat.com/)* [Red Hat TV](https://tv.redhat.com)
Open source communities

* [Global advocacy](https://access.redhat.com/accelerators)* [How we contribute](/en/about/our-community-contributions)
For you
New
### Recommendations

As you browse redhat.com, we'll recommend resources you may like. For now, try these.

---

* [All Red Hat products](/en/technologies/all-products)
* [Tech topics](/en/topics)
* [Red Hat resources](/en/resources)
![close](https://static.redhat.com/libs/redhat/rh-iconfont/latest/svg/web-icon-close.svg)[![Red Hat Summit](/themes/custom/rh_base_ui/dist/img/red-hat-summit-logo.svg)Red Hat Summit](https://www.redhat.com/en/summit)[Support](https://access.redhat.com/)[Documentation](https://docs.redhat.com/en)[Console](https://cloud.redhat.com/)[Developers](https://developers.redhat.com/)[Start a trial](/en/products/trials)[Contact](/en/contact)Select a language简体中文EnglishFrançaisDeutschItaliano日本語한국어PortuguêsEspañol[Contact us](/en/contact)
English
### Select a language

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)
Select a language简体中文EnglishFrançaisDeutschItaliano日本語한국어PortuguêsEspañol![](/themes/custom/rh_base_ui/dist/img/talk-bubble.svg)

* [Products](https://www.redhat.com/en/technologies/all-products)
* [Solutions](https://www.redhat.com/en/solutions)
* [Training & services](https://www.redhat.com/en/services)
* [Resources](https://www.redhat.com/en/resources)
* Partners
* [About](https://www.redhat.com/en/about)
* [Contact us](/en/contact)

### Select a language

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)

# Red Hat Support

## Go beyond support by engaging with our experts

Our teams collaborate with you to ensure you accomplish your goals with Red Hat solutions. The relationship we build with you is designed to provide you with the tools and resources you need to find success on your IT journey.

![](/rhdc/managed-files/support-header.svg)

## Configured for your success

We develop a holistic understanding of your experience as a customer by ensuring our support and engineering teams work together.

Our support team works hand in hand with the best engineers in the industry to quickly turn customer feedback into product improvements. This direct line of communication allows us to hone in on proactive fixes that can impact your bottom line.

### Quick links

* Search our [Knowledgebase](https://access.redhat.com/search/#/?q=&p=1&sort=relevant&scoped&documentKind=Knowledgebase)
* Find [product documentation](https://access.redhat.com/documentation/en-us/)
* Access the [product security center](https://access.redhat.com/security/)
* Connect with [our support team](https://access.redhat.com/support)
* Team up with a [technical account manager](/en/services/support/technical-account-management "Technical account management")
* Take advantage of [partner support](https://connect.redhat.com/en/support)

## Find the right level of support

We have different tiers of support designed to meet your unique needs.

|  | Self-support | Standard | Premium |
| --- | --- | --- | --- |
| Access to Red Hat products | checkmark | checkmark | checkmark |
| Access to our knowledgebase and tools in our award-winning Customer Portal | checkmark | checkmark | checkmark |
| Access to support engineers during standard business hours |  | checkmark | checkmark |
| Access to support engineers 24x7 for high-severity issues |  |  | checkmark |

We also feature specialized support options that can be tailored to the unique needs of companies of all sizes and industries. The Red Hat® [Enhanced Solution Support](/en/resources/enhanced-solution-support-datasheet "Red Hat Enhanced Solution Support: 24x7 engineering support") offering reduces downtime and boosts confidence through access to senior level engineers, as well as resolution and restoration SLAs—helping you stay up and running as you innovate, scale, and deploy. Our engineers help restore your operations quickly and accelerate the path to final resolution, identifying the root cause which helps protect against recurrences in the future. Enhanced Solution Support engineers, who are already familiar with your environment, will be there to assist with critical issues in production environments so that you can consistently deliver the cloud services your customers demand. This offering is available for Red Hat OpenShift® and Red Hat OpenStack® Platform customers.

### Personalized support

Connect with a technical adviser for collaborative planning and specialized guidance. Our Technical Account Managers help you streamline deployments, resolve issues, and shape your technology strategy to meet your toughest business challenges.

[Explore Technical Account Management](/en/services/support/technical-account-management)

## Award winners since 2011

We’ve evolved the traditional software subscription model, combining the best elements of our services to exceed customer expectations. The Association of Support Professionals has honored Red Hat’s Customer Portal as one of “The Top Ten Best Support Websites” for 13 years running.

[See why the Customer Portal keeps earning industry recognition](https://access.redhat.com/)

![Gold and green star with text ASP best support websites of 2023](/rhdc/managed-files/ASP-Award-Design.jpg)

## What they're saying

![BSE logo](/rhdc/managed-files/bse-logo-2.png)

> Icon-Red\_Hat-Media\_and\_documents-Quotemark\_Open-B-Red-RGB
>
> We have found the support from Red Hat to be exemplary. Whenever we need anything from them, they have given it … Red Hat is now our backbone. Our business cannot run if Red Hat is not there.
>
> Ashishkumar Chauhan
>
> CEO, BSE

> Icon-Red\_Hat-Media\_and\_documents-Quotemark\_Open-B-Red-RGB
>
> I like the fact that they really dig into things and then provide answers. As the single Linux guy, I kind of need that second admin next to me sometimes to say, "Hey, what about this?" and I am able to do that through the portal. I get my questions answered and trouble tickets resolved.
>
> Erik Widholm
>
> Sr. Enterprise Engineer

[Read more user reviews](/en/technologies/linux-platforms/enterprise-linux/user-reviews)

## Have questions?

[Contact Support team](https://access.redhat.com/support)

[Visit the Customer Portal](https://access.redhat.com/)

[![Red Hat logo](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](/en)[LinkedIn](https://www.linkedin.com/company/red-hat)[YouTube](https://www.youtube.com/user/RedHatVideos)[Facebook](https://www.facebook.com/redhatinc)[X](https://twitter.com/RedHat)
### Products

* [Red Hat Enterprise Linux](/en/technologies/linux-platforms/enterprise-linux)
* [Red Hat OpenShift](/en/technologies/cloud-computing/openshift)
* [Red Hat Ansible Automation Platform](/en/technologies/management/ansible)
* [Cloud services](/en/technologies/cloud-computing/openshift/cloud-services)
* [See all products](/en/technologies/all-products)

### Tools

* [Training and certification](/en/services/training-and-certification)
* [My account](https://www.redhat.com/wapps/ugc/protected/personalInfo.html)
* [Customer support](https://access.redhat.com)
* [Developer resources](https://developers.redhat.com/)
* [Find a partner](https://catalog.redhat.com/partners)
* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
* [Red Hat value calculator](/en/solutions/value-calculator)
* [Documentation](https://docs.redhat.com/en)

### Try, buy, & sell

* [Product trial center](/en/products/trials)
* [Red Hat Marketplace](https://marketplace.redhat.com)
* [Red Hat Store](https://www.redhat.com/en/store)
* [Buy online (Japan)](https://www.redhat.com/en/about/japan-buy)
* [Console](https://cloud.redhat.com/)

### Communicate

* [Contact sales](/en/contact/sales)
* [Contact customer service](/en/contact/customer-service)
* [Contact training](/en/services/training-and-certification/contact-us)
* [Social](/en/about/social)

### About Red Hat

We’re the world’s leading provider of enterprise open source solutions—including Linux, cloud, container, and Kubernetes. We deliver hardened solutions that make it easier for enterprises to work across platforms and environments, from the core datacenter to the network edge.

### Select a language

![](https://static.redhat.com/libs/redhat/rh-iconfont/4/svg/web-icon-globe.svg)

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)
### Red Hat legal and privacy links

* [About Red Hat](/en/about/company)
* [Jobs](/en/jobs)
* [Events](/en/events)
* [Locations](/en/about/office-locations)
* [Contact Red Hat](/en/contact)
* [Red Hat Blog](/en/blog)
* [Diversity, equity, and inclusion](/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

© 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](/en/about/privacy-policy)
* [Terms of use](/en/about/terms-use)
* [All policies and guidelines](/en/about/all-policies-guidelines)
* [Digital accessibility](/en/about/digital-accessibility)


