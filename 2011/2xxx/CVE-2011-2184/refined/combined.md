=== Content from lkml.org_3da039a5_20250125_142051.html ===


| [lkml.org](/) | Â | [[lkml]](/lkml) Â  [[2011]](/lkml/2011) Â  [[May]](/lkml/2011/5) Â  [[24]](/lkml/2011/5/24) Â  [[last100]](/lkml/last100) Â  [RSS Feed](/rss.php)Views: [wrap][no wrap] Â  [[headers]](/lkml/mheaders/2011/5/24/502)Â  [[forward]](/lkml/bounce/2011/5/24/502)Â | Â |
| --- | --- | --- | --- |
| Messages in this thread  * [First message in thread](/lkml/2011/5/23/199) * [=?UTF-8?B?Um9iZXJ0IMWad2nEmWNraQ==?=](/lkml/2011/5/23/199)   + [=?UTF-8?B?Um9iZXJ0IMWad2nEmWNraQ==?=](/lkml/2011/5/23/328)     - [=?UTF-8?B?Um9iZXJ0IMWad2nEmWNraQ==?=](/lkml/2011/5/25/79)       * [Eugene Teo](/lkml/2011/5/25/79)         + [=?UTF-8?B?Um9iZXJ0IMWad2nEmWNraQ==?=](/lkml/2011/5/25/220) | / | | | Date | Tue, 24 May 2011 21:52:32 +0200 | | --- | --- | | Subject | Re: Fwd: Oops (bad memory deref) in slab\_alloc() due to filp\_cachep holding incorrect values | | From | Robert ÅwiÄcki <> | |  | | --- | --- | --- | --- | --- | --- | --- | --- |  ``` And the repro - I think this might be exploitable (user-space NULL ptrderef at the first glance, in cap_capable() while in sys_setgid()).Works for me with 2.6.39 and the following config:<http://alt.swiecki.net/linux_kernel/ise-test-2.6.39-kernel-config.txt>It works for me with apparmor loaded, but looking at the code itshould work with SELinux as well (both call cap_capable()). Could besome regression of <http://securitytracker.com/id?1024384>It works with 2.6.39 but not with 2.6.39-rc4. Found with TavisOrmandy's [http://code.google.com/p/iknowthis/](https://code.google.com/p/iknowthis/)#include <sys/stat.h>#include <sys/wait.h>#include <unistd.h>#include <sys/syscall.h>#include <linux/keyctl.h>#include <linux/sched.h>int TH1(void *dummy) {	syscall(__NR_keyctl, KEYCTL_SESSION_TO_PARENT);	syscall(__NR_exit, 0);}int main(int argc, char **argv){	char stack[1024 * 32];	pid_t pid = clone(TH1, stack + sizeof(stack), CLONE_VM, NULL);	if (pid == -1) {		perror("clone");		return -1;	}	int status;	while(waitpid(pid, &status, __WALL) != pid);	setgid(4286409707);	return 0;}Oops (stacktraces from the previous emails are also valid). Basically'struct user_namespace *targ_ns' in cap_capable() is NULL.[  288.431402] CPU 0[  288.431402] Pid: 875, comm: apparmor Not tainted 2.6.39 #1 DellInc.                 Precision WorkStation 390    /0GH911[  288.431402] RIP: 0010:[<ffffffff8134cbdf>]  [<ffffffff8134cbdf>]cap_capable+0x18/0x67[  288.431402] RSP: 0018:ffff880120d43ec8  EFLAGS: 00010203[  288.431402] RAX: ffff8801220ee0c0 RBX: 0000000000000001 RCX: 0000000000000006[  288.431402] RDX: 0000000000000000 RSI: ffff880120ebb600 RDI: 0000000000000006[  288.431402] RBP: ffff880120d43ec8 R08: 0000000000000001 R09: 000000000000005a[  288.431402] R10: ffffffff813d42ea R11: 0000000000000246 R12: ffff880120ebb600[  288.431402] R13: 0000000000000006 R14: ffff8801205aaee0 R15: 0000000000000000[  288.431402] FS:  00007f919efc2720(0000) GS:ffff88012bc00000(0000)knlGS:0000000000000000[  288.431402] CS:  0010 DS: 0000 ES: 0000 CR0: 000000008005003b[  288.431402] CR2: 0000000000000408 CR3: 00000001205de000 CR4: 00000000000006f0[  288.431402] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000[  288.431402] DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400[  288.431402] Process apparmor (pid: 875, threadinfoffff880120d42000, task ffff8801205aaee0)[  288.431402] Stack:[  288.431402]  ffff880120d43f08 ffffffff81378bfb ffff880120d43ee8ffff8801205aaee0[  288.431402]  00000000ff7d6beb ffff880120ebb600 00000000000000000000000000000000[  288.431402]  ffff880120d43f18 ffffffff8134d932 ffff880120d43f38ffffffff8109d99d[  288.431402] Call Trace:[  288.431402]  [<ffffffff81378bfb>] apparmor_capable+0x27/0x61[  288.431402]  [<ffffffff8134d932>] security_capable+0x2a/0x2c[  288.431402]  [<ffffffff8109d99d>] ns_capable+0x3a/0x4f[  288.431402]  [<ffffffff8109da2b>] nsown_capable+0x24/0x29[  288.431402]  [<ffffffff810a6695>] sys_setgid+0x43/0x8d[  288.431402]  [<ffffffff81ed4902>] system_call_fastpath+0x16/0x1b[  288.431402] Code: c1 fe 05 d3 e0 48 63 f6 23 44 b2 38 c9 83 f8 0119 c0 c3 55 48 89 e5 0f 1f 44 00 00 89 cf 48 81 fa f0 16 a2 82 74 0d48 8b 46 70[  288.431402]  39 82 08 04 00 00 74 3d 48 8b 46 70 48 3b 50 60 75 1d 89 f9[  288.431402] RIP  [<ffffffff8134cbdf>] cap_capable+0x18/0x67[  288.431402]  RSP <ffff880120d43ec8>[  288.431402] CR2: 0000000000000408(gdb) bt#0  0xffffffff8134cbdf in cap_capable (tsk=<value optimized out>,cred=0x0, targ_ns=0x0, cap=6, audit=1) at security/commoncap.c:88#1  0xffffffff81378bfb in apparmor_capable (task=0xffff880120e3aee0,cred=0xffff88011f540500, ns=<value optimized out>, cap=6, audit=1) atsecurity/apparmor/lsm.c:144#2  0xffffffff8134d932 in security_capable (ns=<value optimized out>,cred=<value optimized out>, cap=<value optimized out>) atsecurity/security.c:160#3  0xffffffff8109d99d in ns_capable (ns=<value optimized out>,cap=<value optimized out>) at kernel/capability.c:381#4  0xffffffff8109da2b in nsown_capable (cap=<value optimized out>) atkernel/capability.c:412#5  0xffffffff810a6695 in sys_setgid (gid=1540) at kernel/sys.c:570#6  0xffffffff810c1e11 in sys_setgid16 (gid=<value optimized out>) atkernel/uid16.c:53-- Robert ÅwiÄcki--To unsubscribe from this list: send the line "unsubscribe linux-kernel" inthe body of a message to majordomo@vger.kernel.orgMore majordomo info at  <http://vger.kernel.org/majordomo-info.html>Please read the FAQ at  <http://www.tux.org/lkml/> ``` | \ |
| Â |
| Â | \ | Â | / |
| Â | | Last update: 2011-05-24 21:55 Â Â  [from the cache]Â©2003-2020 [Jasper Spaans](http://blog.jasper.es/)|hosted at [Digital Ocean](https://www.digitalocean.com/?refcode=9a8e99d24cf9) and my Meterkast|[Read the blog](http://blog.jasper.es/categories.html#lkml-ref) | Â |



=== Content from www.openwall.com_ff0141a7_20250126_092112.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

# blists - web interface to mailing list archives

blists is a web interface to mailing list archives that works off indexed mbox files.
There are two programs: *bindex* and *bit*.
*bindex* generates or updates the index file (yes, incremental updates are supported).
*bit* is a CGI/SSI program that generates web pages on the fly.
Both programs are written in C and are very fast.

You can view the latest <README> file,
which describes blists in more detail and provides installation instructions.
It is also included in the archive below.

Download ([release notes](/lists/announce/2017/11/19/1)):

* [blists 2.0](blists-2.0.tar.gz) and
  its [signature](blists-2.0.tar.gz.sign)* [blists 1.0](blists-1.0.tar.gz) and
    its [signature](blists-1.0.tar.gz.sign)

These files are also
[available from the Openwall file archive](https://download.openwall.net/pub/projects/blists/).
The source code of blists can be browsed on
[GitHub](https://github.com/openwall/blists) or via
[CVSweb](https://cvsweb.openwall.com/blists).

Follow [this link](/signatures/) for information on verifying the signatures.

To see blists in action, check out our
[Open Source and information security mailing list archives](https://lists.openwall.net).

blists is a registered project with
[Open Hub](https://www.openhub.net/p/blists).

Quick Comment:

413608



=== Content from securityreason.com_26af34c4_20250125_142048.html ===


---

# Security check:

Captcha. You know what to do. (CXSECURITYIDS)

---



=== Content from lkml.org_19b52d2d_20250126_092112.html ===


| [lkml.org](/) | Â | [[lkml]](/lkml) Â  [[2011]](/lkml/2011) Â  [[May]](/lkml/2011/5) Â  [[25]](/lkml/2011/5/25) Â  [[last100]](/lkml/last100) Â  [RSS Feed](/rss.php)Views: [wrap][no wrap] Â  [[headers]](/lkml/mheaders/2011/5/25/265)Â  [[forward]](/lkml/bounce/2011/5/25/265)Â | Â |
| --- | --- | --- | --- |
| Messages in this thread  * [First message in thread](/lkml/2011/5/23/199) * [Eugene Teo](/lkml/2011/5/25/79)   + [=?UTF-8?B?Um9iZXJ0IMWad2nEmWNraQ==?=](/lkml/2011/5/25/220)     - [Serge Hallyn](/lkml/2011/5/25/268)       * [Serge Hallyn](/lkml/2011/5/25/268)       * [=?UTF-8?B?Um9iZXJ0IMWad2nEmWNraQ==?=](/lkml/2011/5/25/277)         + [Serge Hallyn](/lkml/2011/5/25/288)  Patch in this message  * [Get diff 1](/lkml/diff/2011/5/25/265/1) | / | | | Date | Wed, 25 May 2011 09:44:00 -0500 | | --- | --- | | From | Serge Hallyn <> | | Subject | Re: [Security] Fwd: Oops (bad memory deref) in slab\_alloc() due to filp\_cachep holding incorrect values | |  | | --- | --- | --- | --- | --- | --- | --- | --- |  ``` Quoting Robert ÅwiÄcki (robert@swiecki.net):> On Wed, May 25, 2011 at 10:28 AM, Eugene Teo <eugeneteo@kernel.sg> wrote:> > Cc'ed David as well.> >> > On Tue, May 24, 2011 at 8:52 PM, Robert ÅwiÄcki <robert@swiecki.net> wrote:> >> And the repro - I think this might be exploitable (user-space NULL ptr> >> deref at the first glance, in cap_capable() while in sys_setgid()).> >> Works for me with 2.6.39 and the following config:> >> <http://alt.swiecki.net/linux_kernel/ise-test-2.6.39-kernel-config.txt>> >>> >> It works for me with apparmor loaded, but looking at the code it> >> should work with SELinux as well (both call cap_capable()). Could be> >> some regression of <http://securitytracker.com/id?1024384>> >>> >> It works with 2.6.39 but not with 2.6.39-rc4. Found with Tavis> >> Ormandy's [http://code.google.com/p/iknowthis/](https://code.google.com/p/iknowthis/)> > Given that it doesn't seem to appear in 2.6.39-rc4, and judging by the> names of functions involved, this change looks suspiciously related to> this oops (even if it just made the keyctl problem visible)> <http://git.itanic.dy.fi/?p=linux-stable;a=commitdiff;h=47a150edc2ae734c0f4bf50aa19499e23b9a46f8>> > >> #include <sys/stat.h>> >> #include <sys/wait.h>> >> #include <unistd.h>> >> #include <sys/syscall.h>> >> #include <linux/keyctl.h>> >> #include <linux/sched.h>> >>> >> int TH1(void *dummy) {> >> Â  Â  Â  Â syscall(__NR_keyctl, KEYCTL_SESSION_TO_PARENT);Thanks!Fooi, it looks like all users of cred_alloc_blank() may need to beaudited wrt commit 47a150edc2ae734c0f4bf50aa19499e23b9a46f8.Does this fix the bug you're seeing?From: Serge E. Hallyn <serge.hallyn@canonical.com>Date: Wed, 25 May 2011 15:41:23 +0100Subject: [PATCH 1/1] Set cred->user_ns in key_replace_session_keyringSince this cred was not created with copy_creds(), it needs to getinitialized.Signed-off-by: Serge E. Hallyn <serge.hallyn@canonical.com>--- security/keys/process_keys.c |    1 + 1 files changed, 1 insertions(+), 0 deletions(-)diff --git a/security/keys/process_keys.c b/security/keys/process_keys.cindex 6c0480d..92a3a5d 100644--- a/security/keys/process_keys.c+++ b/security/keys/process_keys.c@@ -847,6 +847,7 @@ void key_replace_session_keyring(void) 	new-> sgid	= old-> sgid; 	new->fsgid	= old->fsgid; 	new->user	= get_uid(old->user);+	new->user_ns	=Â new->user->user_ns; 	new->group_info	= get_group_info(old->group_info);  	new->securebits	= old->securebits;-- 1.7.0.4--To unsubscribe from this list: send the line "unsubscribe linux-kernel" inthe body of a message to majordomo@vger.kernel.orgMore majordomo info at  <http://vger.kernel.org/majordomo-info.html>Please read the FAQ at  <http://www.tux.org/lkml/> ``` | \ |
| Â |
| Â | \ | Â | / |
| Â | | Last update: 2011-05-25 16:47 Â Â  [from the cache]Â©2003-2020 [Jasper Spaans](http://blog.jasper.es/)|hosted at [Digital Ocean](https://www.digitalocean.com/?refcode=9a8e99d24cf9) and my Meterkast|[Read the blog](http://blog.jasper.es/categories.html#lkml-ref) | Â |



=== Content from lists.openwall.net_ae5d8845_20250126_092112.html ===


| [lists.openwall.net](https://lists.openwall.net) [lists](/)  /  [announce](https://www.openwall.com/lists/announce/)  [owl-users](https://www.openwall.com/lists/owl-users/)  [owl-dev](https://www.openwall.com/lists/owl-dev/)  [john-users](https://www.openwall.com/lists/john-users/)  [john-dev](https://www.openwall.com/lists/john-dev/)  [passwdqc-users](https://www.openwall.com/lists/passwdqc-users/)  [yescrypt](https://www.openwall.com/lists/yescrypt/)  [popa3d-users](https://www.openwall.com/lists/popa3d-users/)  /  [oss-security](https://www.openwall.com/lists/oss-security/)  [kernel-hardening](https://www.openwall.com/lists/kernel-hardening/)  [musl](https://www.openwall.com/lists/musl/)  [sabotage](https://www.openwall.com/lists/sabotage/)  [tlsify](https://www.openwall.com/lists/tlsify/)  [passwords](https://www.openwall.com/lists/passwords/)  /  [crypt-dev](https://www.openwall.com/lists/crypt-dev/)  [xvendor](https://www.openwall.com/lists/xvendor/)  /  [Bugtraq](/bugtraq/)  [Full-Disclosure](/full-disclosure/)  [linux-kernel](/linux-kernel/)  linux-[netdev](/netdev/)  [linux-ext4](/linux-ext4/)  [linux-hardening](/linux-hardening/)  [linux-cve-announce](/linux-cve-announce/)  [PHC](/phc-discussions/)| *Open Source and information security mailing list archives*|  | | | | |
| --- | --- | --- | --- | --- |

| | [Hash Suite: Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

# Open Source and information security mailing list archives

### Openwall-hosted community mailing lists

* [oss-security](https://www.openwall.com/lists/oss-security/)
  ([info](https://oss-security.openwall.org/wiki/mailing-lists/oss-security)) -
  Open Source software security discussions
  (there's also a [wiki](https://oss-security.openwall.org/wiki/))* [kernel-hardening](https://www.openwall.com/lists/kernel-hardening/) -
    Linux kernel security hardening discussions (see also linux-hardening below)* [libc-coord](https://www.openwall.com/lists/libc-coord/) -
      [coordination of work on standard C libraries (libc)](https://www.openwall.com/lists/libc-coord/2020/01/30/1)* [musl](https://www.openwall.com/lists/musl/) - discussions around
        [musl](https://www.musl-libc.org),
        a new standard C library for Linux* [passwords](https://www.openwall.com/lists/passwords/) - discussions on anything related to passwords
          except what better fits on other mailing lists* [sabotage](https://www.openwall.com/lists/sabotage/) -
            discussions around Sabotage Linux,
            an experimental distribution based on musl and BusyBox* [tlsify](https://www.openwall.com/lists/tlsify/) - [a TLS API](https://www.openwall.com/lists/tlsify/2015/09/28/1)
              for file-descriptor-oriented applications to make use of secure (TLS) sockets
              without invasive changes to their programming model

### Openwall mailing lists

* [announce](https://www.openwall.com/lists/announce/) - announcements only, very low traffic* [owl-users](https://www.openwall.com/lists/owl-users/) -
    [Openwall GNU/\*/Linux](https://www.openwall.com/Owl/) (Owl) user discussions* [owl-dev](https://www.openwall.com/lists/owl-dev/) - Owl development discussions* [lkrg-users](https://www.openwall.com/lists/lkrg-users/) -
        [Linux Kernel Runtime Guard](https://www.openwall.com/lkrg/) user discussions* [john-users](https://www.openwall.com/lists/john-users/) -
          [John the Ripper](https://www.openwall.com/john/) password cracker user discussions

          See also:
          [selected most useful and currently relevant postings](https://openwall.info/wiki/john/mailing-list-excerpts)* [john-dev](https://www.openwall.com/lists/john-dev/) -
            John the Ripper development discussions* [passwdqc-users](https://www.openwall.com/lists/passwdqc-users/) -
              [passwdqc](https://www.openwall.com/passwdqc/)
              password/passphrase strength checking and policy enforcement toolset user discussions* [yescrypt](https://www.openwall.com/lists/yescrypt/) -
                discussions around [yescrypt](https://www.openwall.com/yescrypt/) KDF and password hashing scheme* [popa3d-users](https://www.openwall.com/lists/popa3d-users/) -
                  [popa3d](https://www.openwall.com/popa3d/) Unix POP3 daemon user discussions

### Obsolete/inactive Openwall(-hosted) mailing lists

* [crypt-dev](https://www.openwall.com/lists/crypt-dev/) -
  [design and implementation of a new password hashing method for servers](https://www.openwall.com/lists/crypt-dev/2011/04/05/2)* [xvendor](https://www.openwall.com/lists/xvendor/)
    ([info](https://www.openwall.com/community/xvendor)) -
    collaboration and information exchange between OS distribution vendors
    (mostly Linux) on non-security topics

### Other (third-party) mailing lists

* [Bugtraq](bugtraq/) -
  security vulnerability announcements and discussions, pre-moderated* [Full-Disclosure](full-disclosure/) -
    security vulnerability announcements and discussions, originally not moderated but now also pre-moderated* [linux-kernel](linux-kernel/) -
      Linux kernel development discussions, very high volume* [netdev](netdev/) -
        Linux networking subsystem development discussions, high volume* [linux-ext4](linux-ext4/) -
          Linux ext4 filesystem development* [linux-hardening](linux-hardening/) -
            Linux kernel security hardening discussions (focused on upstream maintenance of the changes)* [linux-cve-announce](linux-cve-announce/) -
              [Linux kernel CVE announcements](https://docs.kernel.org/process/cve.html)* [PHC discussions](phc-discussions/) -
                [Password Hashing Competition](https://password-hashing.net)
                discussions

Quick Comment:

| [Powered by Openwall GNU/*/Linux](https://www.openwall.com/Owl/ "Powered by Openwall GNU/*/Linux - security-enhanced \"Linux distribution\"") [Powered by OpenVZ](https://openvz.org "Powered by OpenVZ - OS virtualization solution for Linux") 783927 | |
| --- | --- |



=== Content from www.openwall.com_0b4aa2e7_20250125_142049.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](3) [[thread-next>]](../../../2011/06/06/2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <4DE881E1.2000707@redhat.com>
Date: Fri, 03 Jun 2011 14:40:33 +0800
From: Eugene Teo <eugene@...hat.com>
To: oss-security@...ts.openwall.com
CC: "stev >> \"Steven M. Christey\"" <coley@...us.mitre.org>
Subject: CVE request: kernel: set cred->user_ns in key_replace_session_keyring

new->user_ns is uninitialised if the cred is not created with
copy_creds(). If I'm not mistaken, this was introduced by
47a150edc2ae734c0f4bf50aa19499 (v2.6.39).

Thread starts from <https://lkml.org/lkml/2011/5/23/199>;
Proposed patch: <https://lkml.org/lkml/2011/5/25/265>

Thanks, Eugene

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.openwall.com_34b1a7e8_20250125_142049.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](3) [[<thread-prev]](../../../2011/06/03/2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <4DEC731A.4000309@redhat.com>
Date: Mon, 06 Jun 2011 11:56:34 +0530
From: Huzaifa Sidhpurwala <huzaifas@...hat.com>
To: oss-security@...ts.openwall.com
CC: Eugene Teo <eugene@...hat.com>,
        "stev >> \"Steven M. Christey\"" <coley@...us.mitre.org>
Subject: Re: CVE request: kernel: set cred->user_ns in key_replace_session_keyring

On 06/03/2011 12:10 PM, Eugene Teo wrote:
> new->user_ns is uninitialised if the cred is not created with
> copy_creds(). If I'm not mistaken, this was introduced by
> 47a150edc2ae734c0f4bf50aa19499 (v2.6.39).
>
> Thread starts from <https://lkml.org/lkml/2011/5/23/199>;
> Proposed patch: <https://lkml.org/lkml/2011/5/25/265>
>
> Thanks, Eugene

This has been assigned CVE-2011-2184

--
Huzaifa Sidhpurwala / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from lkml.org_c7044d4d_20250126_092111.html ===


| [lkml.org](/) | Â | [[lkml]](/lkml) Â  [[2011]](/lkml/2011) Â  [[May]](/lkml/2011/5) Â  [[23]](/lkml/2011/5/23) Â  [[last100]](/lkml/last100) Â  [RSS Feed](/rss.php)Views: [wrap][no wrap] Â  [[headers]](/lkml/mheaders/2011/5/23/199)Â  [[forward]](/lkml/bounce/2011/5/23/199)Â | Â |
| --- | --- | --- | --- |
| Messages in this thread  * [First message in thread](/lkml/2011/5/23/199) * [=?UTF-8?B?Um9iZXJ0IMWad2nEmWNraQ==?=](/lkml/2011/5/23/328)   + [=?UTF-8?B?Um9iZXJ0IMWad2nEmWNraQ==?=](/lkml/2011/5/23/328)     - [=?UTF-8?B?Um9iZXJ0IMWad2nEmWNraQ==?=](/lkml/2011/5/24/502)       * [Eugene Teo](/lkml/2011/5/25/79)         + [=?UTF-8?B?Um9iZXJ0IMWad2nEmWNraQ==?=](/lkml/2011/5/25/220) | / | | | Date | Mon, 23 May 2011 16:48:14 +0200 | | --- | --- | | Subject | Oops (bad memory deref) in slab\_alloc() due to filp\_cachep holding incorrect values | | From | Robert ÅwiÄcki <> | |  | | --- | --- | --- | --- | --- | --- | --- | --- |  ``` Happens under 2.6.39-rc4.Here's probably more readable version (without lines being wrapped):<http://alt.swiecki.net/linux_kernel/sys_open-kmem_cache_alloc-2.6.39-rc4.txt>The most interesting part is probably the KGDB one. I'm stilldebugging, but in case others might figure it out faster, attaching myanalysis here. The initial observation is that values in 'filp_cachep'are incorrect.============================================================================KDB:============================================================================Stack traceback for pid 112350xffff88011ae91720    11235    11878  1    1   R  0xffff88011ae91ba0 *killall<c> ffff88011ae1dd48<c> 0000000000000018<c> ffffffff8111ed78<c>ffff88012bc4e280<c><c> ffff88012bffbe00<c> 0000000000000001<c> ffff88011ae1de48<c>ffff880107947900<c><c> 0000000000000001<c> ffff88011ae1df28<c> ffff88010374e000<c>ffff88011ae1dda8<c>Call Trace: [<ffffffff8111ed78>] ? release_pages+0x16f/0x181 [<ffffffff81162e5f>] ? get_empty_filp+0x6b/0x11f [<ffffffff8116cca7>] ? path_openat+0x33/0x345 [<ffffffff8116cff1>] ? do_filp_open+0x38/0x86 [<ffffffff8108a703>] ? get_parent_ip+0x11/0x41 [<ffffffff8108a703>] ? get_parent_ip+0x11/0x41 [<ffffffff8108a87c>] ? sub_preempt_count+0x97/0xaa [<ffffffff81ed24cd>] ? _raw_spin_unlock+0x2d/0x38 [<ffffffff811781a1>] ? alloc_fd+0x10b/0x11d [<ffffffff8116127b>] ? do_sys_open+0x6e/0x100 [<ffffffff8116132d>] ? sys_open+0x20/0x22 [<ffffffff81ed3582>] ? system_call_fastpath+0x16/0x1b---> *killallsysname    Linuxrelease    2.6.39-rc4version    #2 SMP PREEMPT Tue May 10 20:39:51 CEST 2011machine    x86_64nodename   ise-testdomainname (none)ccversion  CCVERSIONdate       2011-05-22 07:01:01 tz_minuteswest -120uptime     11 days 12:13load avg   19.87 22.44 23.24MemTotal:         993069 kBMemFree:          130318 kBBuffers:           44686 kB<1>[994415.765292] BUG: unable to handle kernel paging request at00000000ffffffff<1>[994415.766002] IP: [<ffffffff81150e83>] kmem_cache_alloc+0x57/0xe7<4>[994415.766002] PGD 10a3ba067 PUD 0<0>[994415.766002] Oops: 0000 [#1] PREEMPT SMP<0>[994415.766002] last sysfs file:/sys/devices/system/cpu/cpu1/cache/index2/shared_cpu_mapEntering kdb (current=0xffff88011ae91720, pid 11235) on processor 1due to cpu switch[1]kdb> rdax: 0000000000000000  bx: ffff88011ae1de48  cx: ffff88011ae1df28dx: 0000006c68931281  si: 0000006c68931281  di: ffffffff81162e5fbp: ffff88011ae1dd88  sp: ffff88011ae1dd48  r8: 0000000000000041r9: ffff88012074fa50  r10: 0000000000000000  r11: 0000000000000246r12: 00000000ffffffff  r13: ffff88012b002300  r14: 00000000000080d0r15: ffff88010374e000  ip: ffffffff81150e83  flags: 00010206  cs: 00000010ss: 00000018Code: 00 48 8b 50 08 4c 8b 20 4d 85 e4 75 16 48 89 f9 83 ca ff 44 89f6 4c 89 ef e8 b0 fa ff ff 49 89 c4 eb 20 49 63 45 20 49 8b 75 00 <49>8b 1c 04 48 8d 4a 40 4c 89 e0 65 48 0f c7 0e 0f 94 c0 90 84All code========   0:	00 48 8b             	add    %cl,-0x75(%rax)   3:	50                   	push   %rax   4:	08 4c 8b 20          	or     %cl,0x20(%rbx,%rcx,4)   8:	4d 85 e4             	test   %r12,%r12   b:	75 16                	jne    0x23   d:	48 89 f9             	mov    %rdi,%rcx  10:	83 ca ff             	or     $0xffffffffffffffff,%edx  13:	44 89 f6             	mov    %r14d,%esi  16:	4c 89 ef             	mov    %r13,%rdi  19:	e8 b0 fa ff ff       	callq  0xffffffffffffface  1e:	49 89 c4             	mov    %rax,%r12  21:	eb 20                	jmp    0x43  23:	49 63 45 20          	movslq 0x20(%r13),%rax  27:	49 8b 75 00          	mov    0x0(%r13),%rsi  2b:*	49 8b 1c 04          	mov    (%r12,%rax,1),%rbx     <--trapping instruction  2f:	48 8d 4a 40          	lea    0x40(%rdx),%rcx  33:	4c 89 e0             	mov    %r12,%rax  36:	65 48 0f c7 0e       	cmpxchg16b %gs:(%rsi)  3b:	0f 94 c0             	sete   %al  3e:	90                   	nop  3f:	84                   	.byte 0x84Code starting with the faulting instruction===========================================   0:	49 8b 1c 04          	mov    (%r12,%rax,1),%rbx   4:	48 8d 4a 40          	lea    0x40(%rdx),%rcx   8:	4c 89 e0             	mov    %r12,%rax   b:	65 48 0f c7 0e       	cmpxchg16b %gs:(%rsi)  10:	0f 94 c0             	sete   %al  13:	90                   	nop  14:	84                   	.byte 0x84============================================================================GDB:============================================================================(gdb) disassemble 0xffffffff81150e83Dump of assembler code for function kmem_cache_alloc:   0xffffffff81150e2c <+0>:	push   rbp   0xffffffff81150e2d <+1>:	mov    rbp,rsp   0xffffffff81150e30 <+4>:	push   r15   0xffffffff81150e32 <+6>:	push   r14   0xffffffff81150e34 <+8>:	push   r13   0xffffffff81150e36 <+10>:	push   r12   0xffffffff81150e38 <+12>:	push   rbx   0xffffffff81150e39 <+13>:	sub    rsp,0x18   0xffffffff81150e3d <+17>:	call   0xffffffff81ed32c0   0xffffffff81150e42 <+22>:	mov    r13,rdi   0xffffffff81150e45 <+25>:	mov    r14d,esi   0xffffffff81150e48 <+28>:	mov    rdi,QWORD PTR [rbp+0x8]   0xffffffff81150e4c <+32>:	mov    rax,QWORD PTR [r13+0x0]   0xffffffff81150e50 <+36>:	add    rax,QWORD PTR gs:0xdd40   0xffffffff81150e59 <+45>:	mov    rdx,QWORD PTR [rax+0x8]   0xffffffff81150e5d <+49>:	mov    r12,QWORD PTR [rax]   0xffffffff81150e60 <+52>:	test   r12,r12   0xffffffff81150e63 <+55>:	jne    0xffffffff81150e7b <kmem_cache_alloc+79>   0xffffffff81150e65 <+57>:	mov    rcx,rdi   0xffffffff81150e68 <+60>:	or     edx,0xffffffffffffffff   0xffffffff81150e6b <+63>:	mov    esi,r14d   0xffffffff81150e6e <+66>:	mov    rdi,r13   0xffffffff81150e71 <+69>:	call   0xffffffff81150926 <__slab_alloc>   0xffffffff81150e76 <+74>:	mov    r12,rax   0xffffffff81150e79 <+77>:	jmp    0xffffffff81150e9b <kmem_cache_alloc+111>   0xffffffff81150e7b <+79>:	movsxd rax,DWORD PTR [r13+0x20]   0xffffffff81150e7f <+83>:	mov    rsi,QWORD PTR [r13+0x0]   0xffffffff81150e83 <+87>:	mov    rbx,QWORD PTR [r12+rax*1]   0xffffffff81150e87 <+91>:	lea    rcx,[rdx+0x40]   0xffffffff81150e8b <+95>:	mov    rax,r12   0xffffffff81150e8e <+98>:	call   0xffffffff813d2c70   0xffffffff81150e93 <+103>:	nop    DWORD PTR [rax+0x0]   0xffffffff81150e97 <+107>:	test   al,al---Type <return> to continue, or q <return> to quit---   0xffffffff81150e99 <+109>:	je     0xffffffff81150e4c <kmem_cache_alloc+32>   0xffffffff81150e9b <+111>:	test   r12,r12   0xffffffff81150e9e <+114>:	je     0xffffffff81150eb4 <kmem_cache_alloc+136>   0xffffffff81150ea0 <+116>:	test   r14d,0x8000   0xffffffff81150ea7 <+123>:	je     0xffffffff81150eb4 <kmem_cache_alloc+136>   0xffffffff81150ea9 <+125>:	movsxd rcx,DWORD PTR [r13+0x1c]   0xffffffff81150ead <+129>:	xor    eax,eax   0xffffffff81150eaf <+131>:	mov    rdi,r12   0xffffffff81150eb2 <+134>:	rep stos BYTE PTR es:[rdi],al   0xffffffff81150eb4 <+136>:	movsxd rax,DWORD PTR [r13+0x18]   0xffffffff81150eb8 <+140>:	movsxd r15,DWORD PTR [r13+0x1c]   0xffffffff81150ebc <+144>:	mov    QWORD PTR [rbp-0x38],rax   0xffffffff81150ec0 <+148>:	mov    r13,QWORD PTR [rbp+0x8]   0xffffffff81150ec4 <+152>:	jmp    0xffffffff81150ec9 <kmem_cache_alloc+157>   0xffffffff81150ec9 <+157>:	jmp    0xffffffff81150f01 <kmem_cache_alloc+213>   0xffffffff81150ecb <+159>:	call   0xffffffff8114dacf<rcu_read_lock_sched_notrace>   0xffffffff81150ed0 <+164>:	mov    rbx,QWORD PTR [rip+0x1abdfc9]   # 0xffffffff82c0eea0   0xffffffff81150ed7 <+171>:	test   rbx,rbx   0xffffffff81150eda <+174>:	je     0xffffffff81150efc <kmem_cache_alloc+208>   0xffffffff81150edc <+176>:	mov    rdi,QWORD PTR [rbx+0x8]   0xffffffff81150ee0 <+180>:	mov    r9d,r14d   0xffffffff81150ee3 <+183>:	mov    r8,QWORD PTR [rbp-0x38]   0xffffffff81150ee7 <+187>:	mov    rcx,r15   0xffffffff81150eea <+190>:	mov    rdx,r12   0xffffffff81150eed <+193>:	mov    rsi,r13   0xffffffff81150ef0 <+196>:	call   QWORD PTR [rbx]   0xffffffff81150ef2 <+198>:	add    rbx,0x10   0xffffffff81150ef6 <+202>:	cmp    QWORD PTR [rbx],0x0   0xffffffff81150efa <+206>:	jmp    0xffffffff81150eda <kmem_cache_alloc+174>   0xffffffff81150efc <+208>:	call   0xffffffff81150cb1<rcu_read_unlock_sched_notrace>   0xffffffff81150f01 <+213>:	add    rsp,0x18   0xffffffff81150f05 <+217>:	mov    rax,r12   0xffffffff81150f08 <+220>:	pop    rbx   0xffffffff81150f09 <+221>:	pop    r12---Type <return> to continue, or q <return> to quit---   0xffffffff81150f0b <+223>:	pop    r13   0xffffffff81150f0d <+225>:	pop    r14   0xffffffff81150f0f <+227>:	pop    r15   0xffffffff81150f11 <+229>:	leave   0xffffffff81150f12 <+230>:	ret============================================================================KGDB:============================================================================(gdb) set remotebaud 115200(gdb)  target remote /dev/ttyS0Remote debugging using /dev/ttyS00xffffffff81150e83 in slab_alloc (s=0xffff88012b002300,gfpflags=32976) at mm/slub.c:19431943			if (unlikely(!this_cpu_cmpxchg_double((gdb) bt#0  0xffffffff81150e83 in slab_alloc (s=0xffff88012b002300,gfpflags=32976) at mm/slub.c:1943#1  kmem_cache_alloc (s=0xffff88012b002300, gfpflags=32976) at mm/slub.c:1971#2  0xffffffff81162e5f in kmem_cache_zalloc () at include/linux/slab.h:310#3  get_empty_filp () at fs/file_table.c:123#4  0xffffffff8116cca7 in path_openat (dfd=<value optimized out>,pathname=0xffff88010374e000 "/proc/1133/stat",    nd=0xffff88011ae1de48, op=0xffff88011ae1df28, flags=<valueoptimized out>) at fs/namei.c:2324#5  0xffffffff8116cff1 in do_filp_open (dfd=-100,pathname=0xffff88010374e000 "/proc/1133/stat",    op=0xffff88011ae1df28, flags=1) at fs/namei.c:2380#6  0xffffffff8116127b in do_sys_open (dfd=-100, filename=<valueoptimized out>, flags=32768,    mode=<value optimized out>) at fs/open.c:1001#7  0xffffffff8116132d in sys_open (filename=<value optimized out>,flags=<value optimized out>,    mode=<value optimized out>) at fs/open.c:1022#8  <signal handler called>#9  0x00007f17ee73bff0 in __brk_reservation_fn_dmi_alloc__ ()#10 0xffff880101141720 in __brk_reservation_fn_dmi_alloc__ ()#11 0xffffffff82a1bb50 in ?? ()#12 0x0000000200020000 in __brk_reservation_fn_dmi_alloc__ ()#13 0x0000000300000001 in __brk_reservation_fn_dmi_alloc__ ()#14 0x00007ffffffff000 in __brk_reservation_fn_dmi_alloc__ ()#15 0xffffffff810a4b51 in sys_restart_syscall () at kernel/signal.c:2085#16 0x0000000000000000 in ?? ()(gdb) frame 0#0  0xffffffff81150e83 in slab_alloc (s=0xffff88012b002300,gfpflags=32976) at mm/slub.c:19431943			if (unlikely(!this_cpu_cmpxchg_double((gdb) list1938			 * 3. If they were not changed replace tid and freelist1939			 *1940			 * Since this is without lock semantics the protection is only against1941			 * code executing on this cpu *not* from access by other cpus.1942			 */1943			if (unlikely(!this_cpu_cmpxchg_double(1944					s->cpu_slab->freelist, s->cpu_slab->tid,1945					object, tid,1946					get_freepointer(s, object), next_tid(tid)))) {1947	(gdb) x/i $pc=> 0xffffffff81150e83 <kmem_cache_alloc+87>:	mov    rbx,QWORD PTR [r12+rax*1](gdb) info registersrax            0x0	0rbx            0xffff88011ae1de48	-131936649355704rcx            0xffff88011ae1df28	-131936649355480rdx            0x6c68931281	465610936961rsi            0x6c68931281	465610936961rdi            0xffffffff81162e5f	-2129252769rbp            0xffff88011ae1dd88	0xffff88011ae1dd88rsp            0xffff88011ae1dd48	0xffff88011ae1dd48r8             0x41	65r9             0xffff88012074fa50	-131936555828656r10            0x0	0r11            0x246	582r12            0xffffffff	4294967295r13            0xffff88012b002300	-131936378936576r14            0x80d0	32976r15            0xffff88010374e000	-131937042374656rip            0xffffffff81150e83	0xffffffff81150e83 <kmem_cache_alloc+87>eflags         0x10206	[ PF IF RF ]cs             0x10	16ss             0x18	24ds             Could not fetch register "ds"; remote failure reply 'E22'(gdb) p object$36 = (void **) 0xffffffff(gdb) p s$1 = (struct kmem_cache *) 0xffff88012b002300(gdb) p s->cpu_slab$2 = (struct kmem_cache_cpu *) 0x15300(gdb) p *s$17 = {cpu_slab = 0x15300, flags = 0, min_partial = 7, size = 192,objsize = 192, offset = 0, oo = {x = 21}, max = {    x = 21}, min = {x = 21}, allocflags = 0, refcount = 13, ctor = 0,inuse = 192, align = 8, reserved = 0,  name = 0xffff88012b000010 "kmalloc-192", list = {next =0xffff88012b002268, prev = 0xffff88012b002468}, kobj = {    name = 0xffff880123c7c830 ":t-0000192", entry = {next =0xffff88012b002280, prev = 0xffff88012b002480},    parent = 0xffff8801249a74f8, kset = 0xffff8801249a74e0, ktype =0xffffffff82a37790, sd = 0xffff880123ca6fa0,    kref = {refcount = {counter = 1}}, state_initialized = 1,state_in_sysfs = 1, state_add_uevent_sent = 1,    state_remove_uevent_sent = 0, uevent_suppress = 0},remote_node_defrag_ratio = 1000, node = {0xffff88012b0010c0,    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x15320, 0x0, 0x5, 0x800000008,0x0, 0x200, 0x200, 0x200, 0x100000000, 0x0,    0x800000008, 0x0, 0xffff88012b000020, 0xffff88012b002368,0xffff88012b002568, 0xffff880123c7c800,    0xffff88012b002380, 0xffff88012b002580, 0xffff8801249a74f8,0xffff8801249a74e0, 0xffffffff82a37790,    0xffff880123ca65f0, 0x700000001, 0x3e8, 0xffff88012b001100, 0x0,0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x15340, 0x0, 0x5,    0x1000000010, 0x0, 0x100, 0x100, 0x100, 0x500000000, 0x0,0x800000010, 0x0, 0xffff88012b000030,    0xffff88012b002468, 0xffff88012b002668, 0xffff880123c7c7d0,0xffff88012b002480, 0xffff88012b002680,    0xffff8801249a74f8, 0xffff8801249a74e0, 0xffffffff82a37790,0xffff880123ca5c30, 0x700000001, 0x3e8}}(gdb) p/x tid$20 = 0x6c68931281(gdb) up#1  kmem_cache_alloc (s=0xffff88012b002300, gfpflags=32976) at mm/slub.c:19711971		void *ret = slab_alloc(s, gfpflags, NUMA_NO_NODE, _RET_IP_);(gdb) up#2  0xffffffff81162e5f in kmem_cache_zalloc () at include/linux/slab.h:310310		return kmem_cache_alloc(k, flags | __GFP_ZERO);(gdb) up#3  get_empty_filp () at fs/file_table.c:123123		f = kmem_cache_zalloc(filp_cachep, GFP_KERNEL);(gdb) p filp_cachep             (/note/ filp_cachep == 's' from slab_alloc())$37 = (struct kmem_cache *) 0xffff88012b002300(gdb) p *filp_cachep$38 = {cpu_slab = 0x15300, flags = 0, min_partial = 7, size = 192,objsize = 192, offset = 0, oo = {x = 21}, max = {    x = 21}, min = {x = 21}, allocflags = 0, refcount = 13, ctor = 0,inuse = 192, align = 8, reserved = 0,  name = 0xffff88012b000010 "kmalloc-192", list = {next =0xffff88012b002268, prev = 0xffff88012b002468}, kobj = {    name = 0xffff880123c7c830 ":t-0000192", entry = {next =0xffff88012b002280, prev = 0xffff88012b002480},    parent = 0xffff8801249a74f8, kset = 0xffff8801249a74e0, ktype =0xffffffff82a37790, sd = 0xffff880123ca6fa0,    kref = {refcount = {counter = 1}}, state_initialized = 1,state_in_sysfs = 1, state_add_uevent_sent = 1,    state_remove_uevent_sent = 0, uevent_suppress = 0},remote_node_defrag_ratio = 1000, node = {0xffff88012b0010c0,    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x15320, 0x0, 0x5, 0x800000008,0x0, 0x200, 0x200, 0x200, 0x100000000, 0x0,    0x800000008, 0x0, 0xffff88012b000020, 0xffff88012b002368,0xffff88012b002568, 0xffff880123c7c800,    0xffff88012b002380, 0xffff88012b002580, 0xffff8801249a74f8,0xffff8801249a74e0, 0xffffffff82a37790,    0xffff880123ca65f0, 0x700000001, 0x3e8, 0xffff88012b001100, 0x0,0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x15340, 0x0, 0x5,    0x1000000010, 0x0, 0x100, 0x100, 0x100, 0x500000000, 0x0,0x800000010, 0x0, 0xffff88012b000030,    0xffff88012b002468, 0xffff88012b002668, 0xffff880123c7c7d0,0xffff88012b002480, 0xffff88012b002680,    0xffff8801249a74f8, 0xffff8801249a74e0, 0xffffffff82a37790,0xffff880123ca5c30, 0x700000001, 0x3e8}}(gdb) p *cred  (it's 'killall' running from uid 0)$46 = {usage = {counter = 116}, uid = 0, gid = 0, suid = 0, sgid = 0,euid = 0, egid = 0, fsuid = 0, fsgid = 0,  securebits = 0, cap_inheritable = {cap = {0, 0}}, cap_permitted ={cap = {4294967295, 4294967295}}, cap_effective = {    cap = {4294967295, 4294967295}}, cap_bset = {cap = {4294967295,4294967295}}, jit_keyring = 0 '\000',  thread_keyring = 0x0, request_key_auth = 0x0, tgcred =0xffff88011c49f040, security = 0xffff8801076cc0c0,  user = 0xffffffff82a21b20, group_info = 0xffff88009fb61540, rcu ={next = 0x0, func = 0}}-- Robert ÅwiÄcki--To unsubscribe from this list: send the line "unsubscribe linux-kernel" inthe body of a message to majordomo@vger.kernel.orgMore majordomo info at  <http://vger.kernel.org/majordomo-info.html>Please read the FAQ at  <http://www.tux.org/lkml/> ``` | \ |
| Â |
| Â | \ | Â | / |
| Â | | Last update: 2011-05-23 16:51 Â Â  [from the cache]Â©2003-2020 [Jasper Spaans](http://blog.jasper.es/)|hosted at [Digital Ocean](https://www.digitalocean.com/?refcode=9a8e99d24cf9) and my Meterkast|[Read the blog](http://blog.jasper.es/categories.html#lkml-ref) | Â |


