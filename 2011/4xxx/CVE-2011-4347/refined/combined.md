=== Content from access.redhat.com_48dd8563_20250126_023332.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from lists.openwall.net_ae5d8845_20250126_023330.html ===


| [lists.openwall.net](https://lists.openwall.net) [lists](/)  /  [announce](https://www.openwall.com/lists/announce/)  [owl-users](https://www.openwall.com/lists/owl-users/)  [owl-dev](https://www.openwall.com/lists/owl-dev/)  [john-users](https://www.openwall.com/lists/john-users/)  [john-dev](https://www.openwall.com/lists/john-dev/)  [passwdqc-users](https://www.openwall.com/lists/passwdqc-users/)  [yescrypt](https://www.openwall.com/lists/yescrypt/)  [popa3d-users](https://www.openwall.com/lists/popa3d-users/)  /  [oss-security](https://www.openwall.com/lists/oss-security/)  [kernel-hardening](https://www.openwall.com/lists/kernel-hardening/)  [musl](https://www.openwall.com/lists/musl/)  [sabotage](https://www.openwall.com/lists/sabotage/)  [tlsify](https://www.openwall.com/lists/tlsify/)  [passwords](https://www.openwall.com/lists/passwords/)  /  [crypt-dev](https://www.openwall.com/lists/crypt-dev/)  [xvendor](https://www.openwall.com/lists/xvendor/)  /  [Bugtraq](/bugtraq/)  [Full-Disclosure](/full-disclosure/)  [linux-kernel](/linux-kernel/)  linux-[netdev](/netdev/)  [linux-ext4](/linux-ext4/)  [linux-hardening](/linux-hardening/)  [linux-cve-announce](/linux-cve-announce/)  [PHC](/phc-discussions/)| *Open Source and information security mailing list archives*|  | | | | |
| --- | --- | --- | --- | --- |

| | [Hash Suite: Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

# Open Source and information security mailing list archives

### Openwall-hosted community mailing lists

* [oss-security](https://www.openwall.com/lists/oss-security/)
  ([info](https://oss-security.openwall.org/wiki/mailing-lists/oss-security)) -
  Open Source software security discussions
  (there's also a [wiki](https://oss-security.openwall.org/wiki/))* [kernel-hardening](https://www.openwall.com/lists/kernel-hardening/) -
    Linux kernel security hardening discussions (see also linux-hardening below)* [libc-coord](https://www.openwall.com/lists/libc-coord/) -
      [coordination of work on standard C libraries (libc)](https://www.openwall.com/lists/libc-coord/2020/01/30/1)* [musl](https://www.openwall.com/lists/musl/) - discussions around
        [musl](https://www.musl-libc.org),
        a new standard C library for Linux* [passwords](https://www.openwall.com/lists/passwords/) - discussions on anything related to passwords
          except what better fits on other mailing lists* [sabotage](https://www.openwall.com/lists/sabotage/) -
            discussions around Sabotage Linux,
            an experimental distribution based on musl and BusyBox* [tlsify](https://www.openwall.com/lists/tlsify/) - [a TLS API](https://www.openwall.com/lists/tlsify/2015/09/28/1)
              for file-descriptor-oriented applications to make use of secure (TLS) sockets
              without invasive changes to their programming model

### Openwall mailing lists

* [announce](https://www.openwall.com/lists/announce/) - announcements only, very low traffic* [owl-users](https://www.openwall.com/lists/owl-users/) -
    [Openwall GNU/\*/Linux](https://www.openwall.com/Owl/) (Owl) user discussions* [owl-dev](https://www.openwall.com/lists/owl-dev/) - Owl development discussions* [lkrg-users](https://www.openwall.com/lists/lkrg-users/) -
        [Linux Kernel Runtime Guard](https://www.openwall.com/lkrg/) user discussions* [john-users](https://www.openwall.com/lists/john-users/) -
          [John the Ripper](https://www.openwall.com/john/) password cracker user discussions

          See also:
          [selected most useful and currently relevant postings](https://openwall.info/wiki/john/mailing-list-excerpts)* [john-dev](https://www.openwall.com/lists/john-dev/) -
            John the Ripper development discussions* [passwdqc-users](https://www.openwall.com/lists/passwdqc-users/) -
              [passwdqc](https://www.openwall.com/passwdqc/)
              password/passphrase strength checking and policy enforcement toolset user discussions* [yescrypt](https://www.openwall.com/lists/yescrypt/) -
                discussions around [yescrypt](https://www.openwall.com/yescrypt/) KDF and password hashing scheme* [popa3d-users](https://www.openwall.com/lists/popa3d-users/) -
                  [popa3d](https://www.openwall.com/popa3d/) Unix POP3 daemon user discussions

### Obsolete/inactive Openwall(-hosted) mailing lists

* [crypt-dev](https://www.openwall.com/lists/crypt-dev/) -
  [design and implementation of a new password hashing method for servers](https://www.openwall.com/lists/crypt-dev/2011/04/05/2)* [xvendor](https://www.openwall.com/lists/xvendor/)
    ([info](https://www.openwall.com/community/xvendor)) -
    collaboration and information exchange between OS distribution vendors
    (mostly Linux) on non-security topics

### Other (third-party) mailing lists

* [Bugtraq](bugtraq/) -
  security vulnerability announcements and discussions, pre-moderated* [Full-Disclosure](full-disclosure/) -
    security vulnerability announcements and discussions, originally not moderated but now also pre-moderated* [linux-kernel](linux-kernel/) -
      Linux kernel development discussions, very high volume* [netdev](netdev/) -
        Linux networking subsystem development discussions, high volume* [linux-ext4](linux-ext4/) -
          Linux ext4 filesystem development* [linux-hardening](linux-hardening/) -
            Linux kernel security hardening discussions (focused on upstream maintenance of the changes)* [linux-cve-announce](linux-cve-announce/) -
              [Linux kernel CVE announcements](https://docs.kernel.org/process/cve.html)* [PHC discussions](phc-discussions/) -
                [Password Hashing Competition](https://password-hashing.net)
                discussions

Quick Comment:

| [Powered by Openwall GNU/*/Linux](https://www.openwall.com/Owl/ "Powered by Openwall GNU/*/Linux - security-enhanced \"Linux distribution\"") [Powered by OpenVZ](https://openvz.org "Powered by OpenVZ - OS virtualization solution for Linux") 783549 | |
| --- | --- |



=== Content from bugzilla.redhat.com_a7a2a9ff_20250126_023331.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D756084)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D756084)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D756084)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 756084

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 756084**](show_bug.cgi?id=756084)
(CVE-2011-4347)
- [CVE-2011-4347](https://access.redhat.com/security/cve/CVE-2011-4347) kernel: kvm: device assignment DoS

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2011-4347 kernel: kvm: device assignment DoS

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2011-4347 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [756092](show_bug.cgi?id=756092) [756093](show_bug.cgi?id=756093) [770094](show_bug.cgi?id=770094) [770095](show_bug.cgi?id=770095) [770096](show_bug.cgi?id=770096 "CLOSED ERRATA - CVE-2011-4347 kernel: kvm: device assignment DoS [fedora-all]") [770097](show_bug.cgi?id=770097) [770098](show_bug.cgi?id=770098) [771678](show_bug.cgi?id=771678 "CLOSED ERRATA - CVE-2011-4347 kernel: kvm: device assignment DoS") [816630](show_bug.cgi?id=816630) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [755387](show_bug.cgi?id=755387) | | TreeView+ | [depends on](buglist.cgi?bug_id=756084&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=756084&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2011-11-22 16:41 UTC by Petr Matousek | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-05-11 18:25 UTC ([History](show_activity.cgi?id=756084)) | | [CC List:](page.cgi?id=fields.html#cclist) | 20 users (show)  alex.williamson areis arozansk chrisw dhoward ehabkost fhrbata jen jrieden kernel-mgr knoel lcapitulino lwang mkenneth mtosatti nobody pmatouse tburke virt-maint wnefal+redhatbugzilla | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2015-09-18 11:58:16 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2012:0149](https://access.redhat.com/errata/RHSA-2012%3A0149) | 0 | normal | SHIPPED\_LIVE | Moderate: kvm security and bug fix update | 2012-02-21 07:24:43 UTC | | Red Hat Product Errata | [RHSA-2012:0350](https://access.redhat.com/errata/RHSA-2012%3A0350) | 0 | normal | SHIPPED\_LIVE | Moderate: kernel security and bug fix update | 2012-03-06 23:43:05 UTC | | Red Hat Product Errata | [RHSA-2012:1042](https://access.redhat.com/errata/RHSA-2012%3A1042) | 0 | normal | SHIPPED\_LIVE | Important: kernel security and bug fix update | 2012-06-26 22:40:37 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=756084#c0)  Petr Matousek    2011-11-22 16:41:57 UTC  ``` It was found that kvm_vm_ioctl_assign_device function did not check if the user requesting assignment was privileged or not. Together with /dev/kvm being 666, unprivileged user could assign unused pci devices, or even devices that were in use and whose resources were not properly claimed by the respective drivers.  Please note that privileged access was still needed to re-program the device to for example issue DMA requests. This is typically achieved by touching files on sysfs filesystem. These files are usually not accessible to unprivileged users.  As a result, local user could use this flaw to crash the system.  Reference: <http://thread.gmane.org/gmane.comp.emulators.kvm.devel/82043>  Acknowledgements:  Red Hat would like to thank Sasha Levin for reporting this issue.   ```  [Comment 6](show_bug.cgi?id=756084#c6)  Petr Matousek    2011-12-23 11:05:58 UTC  ``` Created kernel tracking bugs for this issue  Affects: fedora-all [[bug 770096](show_bug.cgi?id=770096 "CLOSED ERRATA - CVE-2011-4347 kernel: kvm: device assignment DoS [fedora-all]")]   ```  [Comment 7](show_bug.cgi?id=756084#c7)  Petr Matousek    2012-01-18 21:03:36 UTC  ``` Statement:  This issue did not affect the versions of Linux kernel as shipped with Red Hat Enterprise Linux 4 and Red Hat Enterprise MRG as they did not provide support for the KVM subsystem. This has been addressed in Red Hat Enterprise Linux 6 via <https://rhn.redhat.com/errata/RHSA-2012-0350.html>. A future kvm update in Red Hat Enterprise 5 may address this flaw.   ```  [Comment 8](show_bug.cgi?id=756084#c8)  errata-xmlrpc    2012-02-21 03:15:26 UTC  ``` This issue has been addressed in following products:    Red Hat Enterprise Linux 5  Via RHSA-2012:0149 <https://rhn.redhat.com/errata/RHSA-2012-0149.html>   ```  [Comment 10](show_bug.cgi?id=756084#c10)  errata-xmlrpc    2012-03-06 18:45:00 UTC  ``` This issue has been addressed in following products:    Red Hat Enterprise Linux 6  Via RHSA-2012:0350 <https://rhn.redhat.com/errata/RHSA-2012-0350.html>   ```  [Comment 12](show_bug.cgi?id=756084#c12)  errata-xmlrpc    2012-06-26 18:41:28 UTC  ``` This issue has been addressed in following products:    Red Hat Enterprise Linux 6.1 EUS - Server Only  Via RHSA-2012:1042 <https://rhn.redhat.com/errata/RHSA-2012-1042.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=756084&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.openwall.com_ff0141a7_20250126_023330.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

# blists - web interface to mailing list archives

blists is a web interface to mailing list archives that works off indexed mbox files.
There are two programs: *bindex* and *bit*.
*bindex* generates or updates the index file (yes, incremental updates are supported).
*bit* is a CGI/SSI program that generates web pages on the fly.
Both programs are written in C and are very fast.

You can view the latest <README> file,
which describes blists in more detail and provides installation instructions.
It is also included in the archive below.

Download ([release notes](/lists/announce/2017/11/19/1)):

* [blists 2.0](blists-2.0.tar.gz) and
  its [signature](blists-2.0.tar.gz.sign)* [blists 1.0](blists-1.0.tar.gz) and
    its [signature](blists-1.0.tar.gz.sign)

These files are also
[available from the Openwall file archive](https://download.openwall.net/pub/projects/blists/).
The source code of blists can be browsed on
[GitHub](https://github.com/openwall/blists) or via
[CVSweb](https://cvsweb.openwall.com/blists).

Follow [this link](/signatures/) for information on verifying the signatures.

To see blists in action, check out our
[Open Source and information security mailing list archives](https://lists.openwall.net).

blists is a registered project with
[Open Hub](https://www.openhub.net/p/blists).

Quick Comment:

413182



=== Content from github.com_f0bcf649_20250124_173135.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Fc4e7f9022e506c6635a5037713c37118e23193e4)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Fc4e7f9022e506c6635a5037713c37118e23193e4)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  437](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/c4e7f9022e506c6635a5037713c37118e23193e4)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

KVM: Device assignment permission checks

[Browse files](/torvalds/linux/tree/c4e7f9022e506c6635a5037713c37118e23193e4)
Browse the repository at this point in the history

```
(cherry picked from commit [3d27e23](https://github.com/torvalds/linux/commit/3d27e23b17010c668db311140b17bbbb70c78fb9))

Only allow KVM device assignment to attach to devices which:

 - Are not bridges
 - Have BAR resources (assume others are special devices)
 - The user has permissions to use

Assigning a bridge is a configuration error, it's not supported, and
typically doesn't result in the behavior the user is expecting anyway.
Devices without BAR resources are typically chipset components that
also don't have host drivers.  We don't want users to hold such devices
captive or cause system problems by fencing them off into an iommu
domain.  We determine "permission to use" by testing whether the user
has access to the PCI sysfs resource files.  By default a normal user
will not have access to these files, so it provides a good indication
that an administration agent has granted the user access to the device.

[Yang Bai: add missing #include]
[avi: fix comment style]

Signed-off-by: Alex Williamson <alex.williamson@redhat.com>
Signed-off-by: Yang Bai <hamo.by@gmail.com>
Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
```

* Loading branch information

[![@awilliam](https://avatars.githubusercontent.com/u/445?s=40&v=4)](/awilliam) [![@gregkh](https://avatars.githubusercontent.com/u/14953?s=40&v=4)](/gregkh)

[awilliam](/torvalds/linux/commits?author=awilliam "View all commits by awilliam")
authored and
[gregkh](/torvalds/linux/commits?author=gregkh "View all commits by gregkh")
committed
Jan 18, 2012

1 parent
[4fd9e32](/torvalds/linux/commit/4fd9e326e5001982747225f0f7bb462e34ae9215)

commit c4e7f90

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**79 additions**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* Documentation/virtual/kvm

  + Documentation/virtual/kvm/api.txt
    [api.txt](#diff-57de5203cc2796c8dfb7cc4c308a2e3b01dde41795d495746034446d5d366c56)
* virt/kvm

  + virt/kvm/assigned-dev.c
    [assigned-dev.c](#diff-52dbe905f03859b1d27f3fd695a62b5c2cf5018fc0f8bc01db1b2fd3c1df7c6a)

## There are no files selected for viewing

4 changes: 4 additions & 0 deletions

4
[Documentation/virtual/kvm/api.txt](#diff-57de5203cc2796c8dfb7cc4c308a2e3b01dde41795d495746034446d5d366c56 "Documentation/virtual/kvm/api.txt")

Show comments

[View file](/torvalds/linux/blob/c4e7f9022e506c6635a5037713c37118e23193e4/Documentation/virtual/kvm/api.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -1134,6 +1134,10 @@ following flags are specified: |
|  |  | The KVM\_DEV\_ASSIGN\_ENABLE\_IOMMU flag is a mandatory option to ensure |
|  |  | isolation of the device. Usages not specifying this flag are deprecated. |
|  |  |  |
|  |  | Only PCI header type 0 devices with PCI BAR resources are supported by |
|  |  | device assignment. The user requesting this ioctl must have read/write |
|  |  | access to the PCI sysfs resource files associated with the device. |
|  |  |  |
|  |  | 4.49 KVM\_DEASSIGN\_PCI\_DEVICE |
|  |  |  |
|  |  | Capability: KVM\_CAP\_DEVICE\_DEASSIGNMENT |
| Expand Down | |  |

75 changes: 75 additions & 0 deletions

75
[virt/kvm/assigned-dev.c](#diff-52dbe905f03859b1d27f3fd695a62b5c2cf5018fc0f8bc01db1b2fd3c1df7c6a "virt/kvm/assigned-dev.c")

Show comments

[View file](/torvalds/linux/blob/c4e7f9022e506c6635a5037713c37118e23193e4/virt/kvm/assigned-dev.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -17,6 +17,8 @@ |
|  |  | #include <linux/pci.h> |
|  |  | #include <linux/interrupt.h> |
|  |  | #include <linux/slab.h> |
|  |  | #include <linux/namei.h> |
|  |  | #include <linux/fs.h> |
|  |  | #include "irq.h" |
|  |  |  |
|  |  | static struct kvm\_assigned\_dev\_kernel \*kvm\_find\_assigned\_dev(struct list\_head \*head, |
| Expand Down  Expand Up | | @@ -474,12 +476,73 @@ static int kvm\_vm\_ioctl\_deassign\_dev\_irq(struct kvm \*kvm, |
|  |  | return r; |
|  |  | } |
|  |  |  |
|  |  | /\* |
|  |  | \* We want to test whether the caller has been granted permissions to |
|  |  | \* use this device. To be able to configure and control the device, |
|  |  | \* the user needs access to PCI configuration space and BAR resources. |
|  |  | \* These are accessed through PCI sysfs. PCI config space is often |
|  |  | \* passed to the process calling this ioctl via file descriptor, so we |
|  |  | \* can't rely on access to that file. We can check for permissions |
|  |  | \* on each of the BAR resource files, which is a pretty clear |
|  |  | \* indicator that the user has been granted access to the device. |
|  |  | \*/ |
|  |  | static int probe\_sysfs\_permissions(struct pci\_dev \*dev) |
|  |  | { |
|  |  | #ifdef CONFIG\_SYSFS |
|  |  | int i; |
|  |  | bool bar\_found = false; |
|  |  |  |
|  |  | for (i = PCI\_STD\_RESOURCES; i <= PCI\_STD\_RESOURCE\_END; i++) { |
|  |  | char \*kpath, \*syspath; |
|  |  | struct path path; |
|  |  | struct inode \*inode; |
|  |  | int r; |
|  |  |  |
|  |  | if (!pci\_resource\_len(dev, i)) |
|  |  | continue; |
|  |  |  |
|  |  | kpath = kobject\_get\_path(&dev->dev.kobj, GFP\_KERNEL); |
|  |  | if (!kpath) |
|  |  | return -ENOMEM; |
|  |  |  |
|  |  | /\* Per sysfs-rules, sysfs is always at /sys \*/ |
|  |  | syspath = kasprintf(GFP\_KERNEL, "/sys%s/resource%d", kpath, i); |
|  |  | kfree(kpath); |
|  |  | if (!syspath) |
|  |  | return -ENOMEM; |
|  |  |  |
|  |  | r = kern\_path(syspath, LOOKUP\_FOLLOW, &path); |
|  |  | kfree(syspath); |
|  |  | if (r) |
|  |  | return r; |
|  |  |  |
|  |  | inode = path.dentry->d\_inode; |
|  |  |  |
|  |  | r = inode\_permission(inode, MAY\_READ | MAY\_WRITE | MAY\_ACCESS); |
|  |  | path\_put(&path); |
|  |  | if (r) |
|  |  | return r; |
|  |  |  |
|  |  | bar\_found = true; |
|  |  | } |
|  |  |  |
|  |  | /\* If no resources, probably something special \*/ |
|  |  | if (!bar\_found) |
|  |  | return -EPERM; |
|  |  |  |
|  |  | return 0; |
|  |  | #else |
|  |  | return -EINVAL; /\* No way to control the device without sysfs \*/ |
|  |  | #endif |
|  |  | } |
|  |  |  |
|  |  | static int kvm\_vm\_ioctl\_assign\_device(struct kvm \*kvm, |
|  |  | struct kvm\_assigned\_pci\_dev \*assigned\_dev) |
|  |  | { |
|  |  | int r = 0, idx; |
|  |  | struct kvm\_assigned\_dev\_kernel \*match; |
|  |  | struct pci\_dev \*dev; |
|  |  | u8 header\_type; |
|  |  |  |
|  |  | if (!(assigned\_dev->flags & KVM\_DEV\_ASSIGN\_ENABLE\_IOMMU)) |
|  |  | return -EINVAL; |
| Expand Down  Expand Up | | @@ -510,6 +573,18 @@ static int kvm\_vm\_ioctl\_assign\_device(struct kvm \*kvm, |
|  |  | r = -EINVAL; |
|  |  | goto out\_free; |
|  |  | } |
|  |  |  |
|  |  | /\* Don't allow bridges to be assigned \*/ |
|  |  | pci\_read\_config\_byte(dev, PCI\_HEADER\_TYPE, &header\_type); |
|  |  | if ((header\_type & PCI\_HEADER\_TYPE) != PCI\_HEADER\_TYPE\_NORMAL) { |
|  |  | r = -EPERM; |
|  |  | goto out\_put; |
|  |  | } |
|  |  |  |
|  |  | r = probe\_sysfs\_permissions(dev); |
|  |  | if (r) |
|  |  | goto out\_put; |
|  |  |  |
|  |  | if (pci\_enable\_device(dev)) { |
|  |  | printk(KERN\_INFO "%s: Could not enable PCI device\n", \_\_func\_\_); |
|  |  | r = -EBUSY; |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `c4e7f90`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2Fc4e7f9022e506c6635a5037713c37118e23193e4) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.kernel.org_cf1c5a1f_20250124_173133.html ===
commit 9bb1282f6a7754955c18be912fbc2b55d133f1b9
Author: Greg Kroah-Hartman
Date: Wed Jan 18 07:33:18 2012 -0800
Linux 3.1.10
commit 0248fedcdb0982fc15246ff23a7b926f592258d5
Author: Ludwig Nussel
Date: Tue Nov 15 14:46:46 2011 -0800
x86: Fix mmap random address range
commit 9af0c7a6fa860698d080481f24a342ba74b68982 upstream.
On x86\_32 casting the unsigned int result of get\_random\_int() to
long may result in a negative value. On x86\_32 the range of
mmap\_rnd() therefore was -255 to 255. The 32bit mode on x86\_64
used 0 to 255 as intended.
The bug was introduced by 675a081 ("x86: unify mmap\_{32|64}.c")
in January 2008.
Signed-off-by: Ludwig Nussel
Cc: Linus Torvalds
Cc: harvey.harrison@gmail.com
Cc: "H. Peter Anvin"
Cc: Harvey Harrison
Signed-off-by: Andrew Morton
Link: http://lkml.kernel.org/r/201111152246.pAFMklOB028527@wpaz5.hot.corp.google.com
Signed-off-by: Ingo Molnar
Signed-off-by: Greg Kroah-Hartman
commit 8d0120df91823df951facd3527e9f148b24e78f3
Author: KAMEZAWA Hiroyuki
Date: Thu Jan 12 17:17:44 2012 -0800
memcg: add mem\_cgroup\_replace\_page\_cache() to fix LRU issue
commit ab936cbcd02072a34b60d268f94440fd5cf1970b upstream.
Commit ef6a3c6311 ("mm: add replace\_page\_cache\_page() function") added a
function replace\_page\_cache\_page(). This function replaces a page in the
radix-tree with a new page. WHen doing this, memory cgroup needs to fix
up the accounting information. memcg need to check PCG\_USED bit etc.
In some(many?) cases, 'newpage' is on LRU before calling
replace\_page\_cache(). So, memcg's LRU accounting information should be
fixed, too.
This patch adds mem\_cgroup\_replace\_page\_cache() and removes the old hooks.
In that function, old pages will be unaccounted without touching
res\_counter and new page will be accounted to the memcg (of old page).
WHen overwriting pc->mem\_cgroup of newpage, take zone->lru\_lock and avoid
races with LRU handling.
Background:
replace\_page\_cache\_page() is called by FUSE code in its splice() handling.
Here, 'newpage' is replacing oldpage but this newpage is not a newly allocated
page and may be on LRU. LRU mis-accounting will be critical for memory cgroup
because rmdir() checks the whole LRU is empty and there is no account leak.
If a page is on the other LRU than it should be, rmdir() will fail.
This bug was added in March 2011, but no bug report yet. I guess there
are not many people who use memcg and FUSE at the same time with upstream
kernels.
The result of this bug is that admin cannot destroy a memcg because of
account leak. So, no panic, no deadlock. And, even if an active cgroup
exist, umount can succseed. So no problem at shutdown.
Signed-off-by: KAMEZAWA Hiroyuki
Acked-by: Johannes Weiner
Acked-by: Michal Hocko
Cc: Miklos Szeredi
Cc: Hugh Dickins
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit c877bca3e2a5ded480a824c1999d0eb526a29f2a
Author: Stanislaw Gruszka
Date: Wed Jan 11 09:26:54 2012 +0100
mac80211: fix rx->key NULL pointer dereference in promiscuous mode
commit 1140afa862842ac3e56678693050760edc4ecde9 upstream.
Since:
commit 816c04fe7ef01dd9649f5ccfe796474db8708be5
Author: Christian Lamparter
Date: Sat Apr 30 15:24:30 2011 +0200
mac80211: consolidate MIC failure report handling
is possible to that we dereference rx->key == NULL when driver set
RX\_FLAG\_MMIC\_STRIPPED and not RX\_FLAG\_IV\_STRIPPED and we are in
promiscuous mode. This happen with rt73usb and rt61pci at least.
Before the commit we always check rx->key against NULL, so I assume
fix should be done in mac80211 (also mic\_fail path has similar check).
References:
https://bugzilla.redhat.com/show\_bug.cgi?id=769766
http://rt2x00.serialmonkey.com/pipermail/users\_rt2x00.serialmonkey.com/2012-January/004395.html
Reported-by: Stuart D Gathman
Reported-by: Kai Wohlfahrt
Signed-off-by: Stanislaw Gruszka
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit 7eff19fee7a5c461a1bc0a6306bb05adb53051c7
Author: Larry Finger
Date: Wed Jan 4 20:50:47 2012 -0600
rtl8192se: Fix BUG caused by failure to check skb allocation
commit d90db4b12bc1b9b8a787ef28550fdb767ee25a49 upstream.
When downloading firmware into the device, the driver fails to check the
return when allocating an skb. When the allocation fails, a BUG can be
generated, as seen in https://bugzilla.redhat.com/show\_bug.cgi?id=771656.
Signed-off-by: Larry Finger
Signed-off-by: John W. Linville
Signed-off-by: Greg Kroah-Hartman
commit fa3cbc36b3f28d765ad72b1a4d845fef2628c943
Author: Bjorn Helgaas
Date: Thu Jan 5 14:27:24 2012 -0700
PNP: work around Dell 1536/1546 BIOS MMCONFIG bug that breaks USB
commit eb31aae8cb5eb54e234ed2d857ddac868195d911 upstream.
Some Dell BIOSes have MCFG tables that don't report the entire
MMCONFIG area claimed by the chipset. If we move PCI devices into
that claimed-but-unreported area, they don't work.
This quirk reads the AMD MMCONFIG MSRs and adds PNP0C01 resources as
needed to cover the entire area.
Example problem scenario:
BIOS-e820: 00000000cfec5400 - 00000000d4000000 (reserved)
Fam 10h mmconf [d0000000, dfffffff]
PCI: MMCONFIG for domain 0000 [bus 00-3f] at [mem 0xd0000000-0xd3ffffff] (base 0xd0000000)
pnp 00:0c: [mem 0xd0000000-0xd3ffffff]
pci 0000:00:12.0: reg 10: [mem 0xffb00000-0xffb00fff]
pci 0000:00:12.0: no compatible bridge window for [mem 0xffb00000-0xffb00fff]
pci 0000:00:12.0: BAR 0: assigned [mem 0xd4000000-0xd40000ff]
Reported-by: Lisa Salimbas
Reported-by:
Tested-by: dann frazier
References: https://bugzilla.kernel.org/show\_bug.cgi?id=31602
References: https://bugs.launchpad.net/ubuntu/+source/linux/+bug/647043
References: https://bugzilla.redhat.com/show\_bug.cgi?id=770308
Signed-off-by: Bjorn Helgaas
Signed-off-by: Jesse Barnes
Signed-off-by: Greg Kroah-Hartman
commit ea509eb0fb85a1c2704d932ae6095d3a2995a589
Author: Eric Dumazet
Date: Tue Dec 13 04:57:06 2011 +0100
slub: fix a possible memleak in \_\_slab\_alloc()
commit 73736e0387ba0e6d2b703407b4d26168d31516a7 upstream.
Zhihua Che reported a possible memleak in slub allocator on
CONFIG\_PREEMPT=y builds.
It is possible current thread migrates right before disabling irqs in
\_\_slab\_alloc(). We must check again c->freelist, and perform a normal
allocation instead of scratching c->freelist.
Many thanks to Zhihua Che for spotting this bug, introduced in 2.6.39
V2: Its also possible an IRQ freed one (or several) object(s) and
populated c->freelist, so its not a CONFIG\_PREEMPT only problem.
Reported-by: Zhihua Che
Signed-off-by: Eric Dumazet
Acked-by: Christoph Lameter
Signed-off-by: Pekka Enberg
Signed-off-by: Greg Kroah-Hartman
commit d70357fd5682b8d868a86551125b2d3bbc0f2cf4
Author: Roberto Sassu
Date: Mon Dec 19 15:57:28 2011 +0100
ima: fix invalid memory reference
commit 7b7e5916aa2f46e57f8bd8cb89c34620ebfda5da upstream.
Don't free a valid measurement entry on TPM PCR extend failure.
Signed-off-by: Roberto Sassu
Signed-off-by: Mimi Zohar
Signed-off-by: Greg Kroah-Hartman
commit dc2a0defaf783a0f439a39f38146622c1bb16201
Author: Roberto Sassu
Date: Mon Dec 19 15:57:27 2011 +0100
ima: free duplicate measurement memory
commit 45fae7493970d7c45626ccd96d4a74f5f1eea5a9 upstream.
Info about new measurements are cached in the iint for performance. When
the inode is flushed from cache, the associated iint is flushed as well.
Subsequent access to the inode will cause the inode to be re-measured and
will attempt to add a duplicate entry to the measurement list.
This patch frees the duplicate measurement memory, fixing a memory leak.
Signed-off-by: Roberto Sassu
Signed-off-by: Mimi Zohar
Signed-off-by: Greg Kroah-Hartman
commit ed5eb44d43c04727df9f73863ef276b75df24562
Author: NeilBrown
Date: Mon Jan 9 01:41:51 2012 +1100
md/raid1: perform bad-block tests for WriteMostly devices too.
commit 307729c8bc5b5a41361af8af95906eee7552acb1 upstream.
We normally try to avoid reading from write-mostly devices, but when
we do we really have to check for bad blocks and be sure not to
try reading them.
With the current code, best\_good\_sectors might not get set and that
causes zero-length read requests to be send down which is very
confusing.
This bug was introduced in commit d2eb35acfdccbe2 and so the patch
is suitable for 3.1.x and 3.2.x
Reported-and-tested-by: Michał Mirosław
Reported-and-tested-by: Art -kwaak- van Breemen
Signed-off-by: NeilBrown
Signed-off-by: Greg Kroah-Hartman
commit efac38b1b6965dd9d16b3e2c91118e583b66e128
Author: Ian Campbell
Date: Wed Jan 4 09:34:49 2012 +0000
xen/xenbus: Reject replies with payload > XENSTORE\_PAYLOAD\_MAX.
commit 9e7860cee18241633eddb36a4c34c7b61d8cecbc upstream.
Haogang Chen found out that:
There is a potential integer overflow in process\_msg() that could result
in cross-domain attack.
body = kmalloc(msg->hdr.len + 1, GFP\_NOIO | \_\_GFP\_HIGH);
When a malicious guest passes 0xffffffff in msg->hdr.len, the subsequent
call to xb\_read() would write to a zero-length buffer.
The other end of this connection is always the xenstore backend daemon
so there is no guest (malicious or otherwise) which can do this. The
xenstore daemon is a trusted component in the system.
However this seem like a reasonable robustness improvement so we should
have it.
And Ian when read the API docs found that:
The payload length (len field of the header) is limited to 4096
(XENSTORE\_PAYLOAD\_MAX) in both directions. If a client exceeds the
limit, its xenstored connection will be immediately killed by
xenstored, which is usually catastrophic from the client's point of
view. Clients (particularly domains, which cannot just reconnect)
should avoid this.
so this patch checks against that instead.
This also avoids a potential integer overflow pointed out by Haogang Chen.
Signed-off-by: Ian Campbell
Cc: Haogang Chen
Signed-off-by: Konrad Rzeszutek Wilk
Signed-off-by: Greg Kroah-Hartman
commit a1f73f501a775496d33b4da523b09f64b6962251
Author: nagalakshmi.nandigama@lsi.com
Date: Thu Dec 1 07:53:08 2011 +0530
SCSI: mpt2sas : Fix for memory allocation error for large host credits
commit aff132d95ffe14eca96cab90597cdd010b457af7 upstream.
The amount of memory required for tracking chain buffers is rather
large, and when the host credit count is big, memory allocation
failure occurs inside \_\_get\_free\_pages.
The fix is to limit the number of chains to 100,000. In addition,
the number of host credits is limited to 30,000 IOs. However this
limitation can be overridden this using the command line option
max\_queue\_depth. The algorithm for calculating the
reply\_post\_queue\_depth is changed so that it is equal to
(reply\_free\_queue\_depth + 16), previously it was (reply\_free\_queue\_depth \* 2).
Signed-off-by: Nagalakshmi Nandigama
Signed-off-by: James Bottomley
Signed-off-by: Greg Kroah-Hartman
commit 3e70c2626382037b67c97a706cb00788fad93527
Author: nagalakshmi.nandigama@lsi.com
Date: Thu Dec 1 07:52:56 2011 +0530
SCSI: mpt2sas: Release spinlock for the raid device list before blocking it
commit 30c43282f3d347f47f9e05199d2b14f56f3f2837 upstream.
Added code to release the spinlock that is used to protect the
raid device list before calling a function that can block. The
blocking was causing a reschedule, and subsequently it is tried
to acquire the same lock, resulting in a panic (NMI Watchdog
detecting a CPU lockup).
Signed-off-by: Nagalakshmi Nandigama
Signed-off-by: James Bottomley
Signed-off-by: Greg Kroah-Hartman
commit 84261c01dd43cef0cb0a40d6450d91066057d5b3
Author: Bjorn Helgaas
Date: Thu Jan 12 08:01:40 2012 -0700
x86/PCI: build amd\_bus.o only when CONFIG\_AMD\_NB=y
commit 5cf9a4e69c1ff0ccdd1d2b7404f95c0531355274 upstream.
We only need amd\_bus.o for AMD systems with PCI. arch/x86/pci/Makefile
already depends on CONFIG\_PCI=y, so this patch just adds the dependency
on CONFIG\_AMD\_NB.
Cc: Yinghai Lu
Signed-off-by: Bjorn Helgaas
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit 0862c6b642fdbe4069f8285bd936738224104886
Author: Bjorn Helgaas
Date: Thu Jan 5 14:27:19 2012 -0700
x86/PCI: amd: factor out MMCONFIG discovery
commit 24d25dbfa63c376323096660bfa9ad45a08870ce upstream.
This factors out the AMD native MMCONFIG discovery so we can use it
outside amd\_bus.c.
amd\_bus.c reads AMD MSRs so it can remove the MMCONFIG area from the
PCI resources. We may also need the MMCONFIG information to work
around BIOS defects in the ACPI MCFG table.
Cc: Borislav Petkov
Cc: Yinghai Lu
Signed-off-by: Bjorn Helgaas
Signed-off-by: Jesse Barnes
Signed-off-by: Greg Kroah-Hartman
commit 37bbe151450f9eedf4453b87b8d6856d2fba878a
Author: Gary Hade
Date: Mon Nov 14 15:42:16 2011 -0800
x86/PCI: Ignore CPU non-addressable \_CRS reserved memory resources
commit ae5cd86455381282ece162966183d3f208c6fad7 upstream.
This assures that a \_CRS reserved host bridge window or window region is
not used if it is not addressable by the CPU. The new code either trims
the window to exclude the non-addressable portion or totally ignores the
window if the entire window is non-addressable.
The current code has been shown to be problematic with 32-bit non-PAE
kernels on systems where \_CRS reserves resources above 4GB.
Signed-off-by: Gary Hade
Reviewed-by: Bjorn Helgaas
Cc: Thomas Renninger
Cc: linux-kernel@vger.kernel.org
Signed-off-by: Jesse Barnes
Signed-off-by: Greg Kroah-Hartman
commit 99e6fbffc973fb0f9074265f80951f61a802792c
Author: Eric W. Biederman
Date: Mon Oct 17 11:46:06 2011 -0700
PCI: msi: Disable msi interrupts when we initialize a pci device
commit a776c491ca5e38c26d9f66923ff574d041e747f4 upstream.
I traced a nasty kexec on panic boot failure to the fact that we had
screaming msi interrupts and we were not disabling the msi messages at
kernel startup. The booting kernel had not enabled those interupts so
was not prepared to handle them.
I can see no reason why we would ever want to leave the msi interrupts
enabled at boot if something else has enabled those interrupts. The pci
spec specifies that msi interrupts should be off by default. Drivers
are expected to enable the msi interrupts if they want to use them. Our
interrupt handling code reprograms the interrupt handlers at boot and
will not be be able to do anything useful with an unexpected interrupt.
This patch applies cleanly all of the way back to 2.6.32 where I noticed
the problem.
Signed-off-by: Eric W. Biederman
Signed-off-by: Jesse Barnes
Signed-off-by: Greg Kroah-Hartman
commit 5723f014a97cc8f70ebe5f17b67909a863baf26c
Author: Alex Williamson
Date: Wed Nov 16 09:24:16 2011 -0700
PCI: Fix PCI\_EXP\_TYPE\_RC\_EC value
commit 1830ea91c20b06608f7cdb2455ce05ba834b3214 upstream.
Spec shows this as 1010b = 0xa
Signed-off-by: Alex Williamson
Signed-off-by: Jesse Barnes
Signed-off-by: Greg Kroah-Hartman
commit 5634d5fe19f522d31a6d47f0dc44c596a1b75c7b
Author: Artem Bityutskiy
Date: Thu Jan 5 10:47:18 2012 +0200
UBI: fix use-after-free on error path
commit e57e0d8e818512047fe379157c3f77f1b9fabffb upstream.
When we fail to erase a PEB, we free the corresponding erase entry object,
but then re-schedule this object if the error code was something like -EAGAIN.
Obviously, it is a bug to use the object after we have freed it.
Reported-by: Emese Revfy
Signed-off-by: Artem Bityutskiy
Signed-off-by: Greg Kroah-Hartman
commit 7587b142d2d059f3e5fe7b8e8053c7aeed1e5108
Author: Bhavesh Parekh
Date: Wed Nov 30 17:43:42 2011 +0530
UBI: fix missing scrub when there is a bit-flip
commit e801e128b2200c40a0ec236cf2330b2586b6e05a upstream.
Under some cases, when scrubbing the PEB if we did not get the lock on
the PEB it fails to scrub. Add that PEB again to the scrub list
Artem: minor amendments.
Signed-off-by: Bhavesh Parekh
Signed-off-by: Artem Bityutskiy
Signed-off-by: Greg Kroah-Hartman
commit 9a399c87c36cdd84032b297189869b07ebb5fa33
Author: Chase Douglas
Date: Mon Nov 7 11:08:05 2011 -0800
HID: bump maximum global item tag report size to 96 bytes
commit e46e927b9b7e8d95526e69322855243882b7e1a3 upstream.
This allows the latest N-Trig devices to function properly.
BugLink: https://bugs.launchpad.net/bugs/724831
Signed-off-by: Chase Douglas
Signed-off-by: Jiri Kosina
Signed-off-by: Greg Kroah-Hartman
commit 7c8b708b0718d9fbff3aca2927e3daa3a8f719d4
Author: Jeff Layton
Date: Tue Dec 20 06:57:45 2011 -0500
nfs: fix regression in handling of context= option in NFSv4
commit 8a0d551a59ac92d8ff048d6cb29d3a02073e81e8 upstream.
Setting the security context of a NFSv4 mount via the context= mount
option is currently broken. The NFSv4 codepath allocates a parsed
options struct, and then parses the mount options to fill it. It
eventually calls nfs4\_remote\_mount which calls security\_init\_mnt\_opts.
That clobbers the lsm\_opts struct that was populated earlier. This bug
also looks like it causes a small memory leak on each v4 mount where
context= is used.
Fix this by moving the initialization of the lsm\_opts into
nfs\_alloc\_parsed\_mount\_data. Also, add a destructor for
nfs\_parsed\_mount\_data to make it easier to free all of the allocations
hanging off of it, and to ensure that the security\_free\_mnt\_opts is
called whenever security\_init\_mnt\_opts is.
I believe this regression was introduced quite some time ago, probably
by commit c02d7adf.
Signed-off-by: Jeff Layton
Signed-off-by: Trond Myklebust
Signed-off-by: Greg Kroah-Hartman
commit bd689a8cdbfe4cf5182f01aa93e4ba3fadf1f11c
Author: Andy Adamson
Date: Wed Dec 7 11:55:27 2011 -0500
NFSv4: include bitmap in nfsv4 get acl data
commit bf118a342f10dafe44b14451a1392c3254629a1f upstream.
The NFSv4 bitmap size is unbounded: a server can return an arbitrary
sized bitmap in an FATTR4\_WORD0\_ACL request. Replace using the
nfs4\_fattr\_bitmap\_maxsz as a guess to the maximum bitmask returned by a server
with the inclusion of the bitmap (xdr length plus bitmasks) and the acl data
xdr length to the (cached) acl page data.
This is a general solution to commit e5012d1f "NFSv4.1: update
nfs4\_fattr\_bitmap\_maxsz" and fixes hitting a BUG\_ON in xdr\_shrink\_bufhead
when getting ACLs.
Fix a bug in decode\_getacl that returned -EINVAL on ACLs > page when getxattr
was called with a NULL buffer, preventing ACL > PAGE\_SIZE from being retrieved.
Signed-off-by: Andy Adamson
Signed-off-by: Trond Myklebust
Signed-off-by: Greg Kroah-Hartman
commit 6ab1a5d77456d333674ed3b9a2bd3c29715965b6
Author: NeilBrown
Date: Wed Nov 16 11:46:31 2011 +1100
NFS - fix recent breakage to NFS error handling.
commit 2edb6bc3852c681c0d948245bd55108dc6407604 upstream.
From c6d615d2b97fe305cbf123a8751ced859dca1d5e Mon Sep 17 00:00:00 2001
From: NeilBrown
Date: Wed, 16 Nov 2011 09:39:05 +1100
Subject: NFS - fix recent breakage to NFS error handling.
commit 02c24a82187d5a628c68edfe71ae60dc135cd178 made a small and
presumably unintended change to write error handling in NFS.
Previously an error from filemap\_write\_and\_wait\_range would only be of
interest if nfs\_file\_fsync did not return an error. After this commit,
an error from filemap\_write\_and\_wait\_range would mean that (the rest of)
nfs\_file\_fsync would not even be called.
This means that:
1/ you are more likely to see EIO than e.g. EDQUOT or ENOSPC.
2/ NFS\_CONTEXT\_ERROR\_WRITE remains set for longer so more writes are
synchronous.
This patch restores previous behaviour.
Cc: Josef Bacik
Cc: Jan Kara
Cc: Al Viro
Signed-off-by: NeilBrown
Signed-off-by: Trond Myklebust
Signed-off-by: Greg Kroah-Hartman
commit 6f02bf1cbb5031ad69e5b34a5912e179c6fa78c3
Author: Andy Adamson
Date: Wed Nov 9 13:58:20 2011 -0500
NFSv4.1: fix backchannel slotid off-by-one bug
commit 61f2e5106582d02f30b6807e3f9c07463c572ccb upstream.
Signed-off-by: Andy Adamson
Signed-off-by: Trond Myklebust
Signed-off-by: Greg Kroah-Hartman
commit f63f8365c6ba087362cb3cbfb697179efeadc1fa
Author: Chuck Lever
Date: Mon Dec 5 15:40:30 2011 -0500
NFS: Retry mounting NFSROOT
commit 43717c7daebf10b43f12e68512484b3095bb1ba5 upstream.
Lukas Razik  reports that on his SPARC system,
booting with an NFS root file system stopped working after commit
56463e50 "NFS: Use super.c for NFSROOT mount option parsing."
We found that the network switch to which Lukas' client was attached
was delaying access to the LAN after the client's NIC driver reported
that its link was up. The delay was longer than the timeouts used in
the NFS client during mounting.
NFSROOT worked for Lukas before commit 56463e50 because in those
kernels, the client's first operation was an rpcbind request to
determine which port the NFS server was listening on. When that
request failed after a long timeout, the client simply selected the
default NFS port (2049). By that time the switch was allowing access
to the LAN, and the mount succeeded.
Neither of these client behaviors is desirable, so reverting 56463e50
is really not a choice. Instead, introduce a mechanism that retries
the NFSROOT mount request several times. This is the same tactic that
normal user space NFS mounts employ to overcome server and network
delays.
Signed-off-by: Lukas Razik
[ cel: match kernel coding style, add proper patch description ]
[ cel: add exponential back-off ]
Signed-off-by: Chuck Lever
Tested-by: Lukas Razik
Signed-off-by: Trond Myklebust
Signed-off-by: Greg Kroah-Hartman
commit 0b54b44b497be759fcc3b59150602aaf65865d7f
Author: Michel Dänzer
Date: Thu Jan 5 18:42:17 2012 +0100
radeon: Fix disabling PCI bus mastering on big endian hosts.
commit 3df96909b75835d487a9178761622b0cbd7310d4 upstream.
It would previously write basically random bits to PCI configuration space...
Not very surprising that the GPU tended to stop responding completely. The
resulting MCE even froze the whole machine sometimes.
Now resetting the GPU after a lockup has at least a fighting chance of
succeeding.
Signed-off-by: Michel Dänzer
Reviewed-by: Alex Deucher
Signed-off-by: Dave Airlie
Signed-off-by: Greg Kroah-Hartman
commit 76adb0e340dc36dd931c1a8bd4c7b97f77b7d23a
Author: Alex Deucher
Date: Tue Jan 3 09:48:38 2012 -0500
drm/radeon/kms: disable writeback on pre-R300 asics
commit 28eebb703e28bc455ba704adb1026f76649b768c upstream.
We often end up missing fences on older asics with
writeback enabled which leads to delays in the userspace
accel code, so just disable it by default on those asics.
Reported-by: Helge Deller
Reported-by: Dave Airlie
Signed-off-by: Alex Deucher
Signed-off-by: Dave Airlie
Signed-off-by: Greg Kroah-Hartman
commit f2f565fdcac7663c89421f5ace3826d4c84f2889
Author: Rafał Miłecki
Date: Fri Dec 23 20:32:18 2011 +0100
drm/radeon/kms: workaround invalid AVI infoframe checksum issue
commit 92db7f6c860b8190571a9dc1fcbc16d003422fe8 upstream.
This change was verified to fix both issues with no video I've
investigated. I've also checked checksum calculation with fglrx on:
RV620, HD54xx, HD5450, HD6310, HD6320.
Signed-off-by: Rafał Miłecki
Signed-off-by: Dave Airlie
Signed-off-by: Greg Kroah-Hartman
commit 910fc79f722372dcc17ff3c53e1f2191c0cf816c
Author: Rene Bollford
Date: Sun Oct 23 09:56:42 2011 +0200
ideapad: Check if acpi already handle backlight power to avoid a page fault
commit d4afc7754a60b885b63ef23fd194984e2d53a4e6 upstream.
This patch avoid a page fault in the ideapad-laptop extras when
turning the backlight power on or off.
Signed-off-by: Rene Bolldorf
Signed-off-by: Matthew Garrett
Signed-off-by: Jonathan Nieder
Tested-by: Artem X
Signed-off-by: Greg Kroah-Hartman
commit c4e7f9022e506c6635a5037713c37118e23193e4
Author: Alex Williamson
Date: Thu Jan 12 12:39:54 2012 +0200
KVM: Device assignment permission checks
(cherry picked from commit 3d27e23b17010c668db311140b17bbbb70c78fb9)
Only allow KVM device assignment to attach to devices which:
- Are not bridges
- Have BAR resources (assume others are special devices)
- The user has permissions to use
Assigning a bridge is a configuration error, it's not supported, and
typically doesn't result in the behavior the user is expecting anyway.
Devices without BAR resources are typically chipset components that
also don't have host drivers. We don't want users to hold such devices
captive or cause system problems by fencing them off into an iommu
domain. We determine "permission to use" by testing whether the user
has access to the PCI sysfs resource files. By default a normal user
will not have access to these files, so it provides a good indication
that an administration agent has granted the user access to the device.
[Yang Bai: add missing #include]
[avi: fix comment style]
Signed-off-by: Alex Williamson
Signed-off-by: Yang Bai
Signed-off-by: Marcelo Tosatti
Signed-off-by: Greg Kroah-Hartman
commit 4fd9e326e5001982747225f0f7bb462e34ae9215
Author: Alex Williamson
Date: Thu Jan 12 12:39:53 2012 +0200
KVM: Remove ability to assign a device without iommu support
(cherry picked from commit 423873736b78f549fbfa2f715f2e4de7e6c5e1e9)
This option has no users and it exposes a security hole that we
can allow devices to be assigned without iommu protection. Make
KVM\_DEV\_ASSIGN\_ENABLE\_IOMMU a mandatory option.
Signed-off-by: Alex Williamson
Signed-off-by: Marcelo Tosatti
Signed-off-by: Greg Kroah-Hartman
commit 68898049e6b897cd29644c1b500e3e9593805869
Author: Jan Kiszka
Date: Thu Jan 12 12:39:52 2012 +0200
KVM: x86: Prevent starting PIT timers in the absence of irqchip support
(cherry picked from commit 0924ab2cfa98b1ece26c033d696651fd62896c69)
User space may create the PIT and forgets about setting up the irqchips.
In that case, firing PIT IRQs will crash the host:
BUG: unable to handle kernel NULL pointer dereference at 0000000000000128
IP: [] kvm\_set\_irq+0x30/0x170 [kvm]
...
Call Trace:
[] pit\_do\_work+0x51/0xd0 [kvm]
[] process\_one\_work+0x111/0x4d0
[] worker\_thread+0x152/0x340
[] kthread+0x7e/0x90
[] kernel\_thread\_helper+0x4/0x10
Prevent this by checking the irqchip mode before starting a timer. We
can't deny creating the PIT if the irqchips aren't set up yet as
current user land expects this order to work.
Signed-off-by: Jan Kiszka
Signed-off-by: Marcelo Tosatti
Signed-off-by: Greg Kroah-Hartman
commit da84e453c225f742b32ff68f65fd9a2af2691c7c
Author: Avi Kivity
Date: Thu Jan 12 12:39:51 2012 +0200
KVM guest: prevent tracing recursion with kvmclock
(cherry picked from commit 95ef1e52922cf75b1ea2eae54ef886f2cc47eecb)
Prevent tracing of preempt\_disable() in get\_cpu\_var() in
kvm\_clock\_read(). When CONFIG\_DEBUG\_PREEMPT is enabled,
preempt\_disable/enable() are traced and this causes the function\_graph
tracer to go into an infinite recursion. By open coding the
preempt\_disable() around the get\_cpu\_var(), we can use the notrace
version which prevents preempt\_disable/enable() from being traced and
prevents the recursion.
Based on a similar patch for Xen from Jeremy Fitzhardinge.
Tested-by: Gleb Natapov
Acked-by: Steven Rostedt
Signed-off-by: Avi Kivity
Signed-off-by: Greg Kroah-Hartman
commit 70422e598a0f7f24e914187844fefcb4d656903d
Author: Takashi Iwai
Date: Wed Jan 11 12:34:11 2012 +0100
ALSA: hda - Fix the lost power-setup of seconary pins after PM resume
commit f2cbba7602383cd9cdd21f0a5d0b8bd1aad47b33 upstream.
When multiple headphone or other detectable output pins are present,
the power-map has to be updated after resume appropriately, but the
current driver doesn't check all pins but only the first pin (since
it's enough to check it for the mute-behavior). This resulted in the
silent output from the secondary outputs after PM resume.
This patch fixes the problem by checking all pins at (re-)init time.
Bugzilla: https://bugzilla.novell.com/show\_bug.cgi?id=740347
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 557d644e64dfa3715f5c71d7e7ca218becebba52
Author: Takashi Iwai
Date: Tue Jan 10 15:16:02 2012 +0100
ALSA: hda - Fix the detection of "Loopback Mixing" control for VIA codecs
commit 4808d12d1dddb046ec86425e5f6766f02e950292 upstream.
Currently the driver checks only the out\_mix\_path[] for the primary
output route for judging whether to create the loopback-mixing control
or not. But, there are cases where aamix-routing is available only on
headphone or speaker paths but not on the primary output path. So, the
driver ignores such cases inappropriately.
This patch fixes the check of the loopback-mixing control by testing
all mix-routing paths.
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 1e84380498cefb3a825aaf4596ceed73757013d1
Author: Takashi Iwai
Date: Tue Jan 10 12:41:22 2012 +0100
ALSA: hda - Return the error from get\_wcaps\_type() for invalid NIDs
commit 3a90274de3548ebb2aabfbf488cea8e275a73dc6 upstream.
When an invalid NID is given, get\_wcaps() returns zero as the error,
but get\_wcaps\_type() takes it as the normal value and returns a bogus
AC\_WID\_AUD\_OUT value. This confuses the parser.
With this patch, get\_wcaps\_type() returns -1 when value 0 is given,
i.e. an invalid NID is passed to get\_wcaps().
Bugzilla: https://bugzilla.novell.com/show\_bug.cgi?id=740118
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 2afa2d7e09c67f10fe459488c3327bd23b6035ba
Author: Takashi Iwai
Date: Tue Jan 10 08:59:56 2012 +0100
ALSA: hda - Use auto-parser for HP laptops with cx20459 codec
commit de4da59e480cdf1075b33dbaf8078fc87bc52241 upstream.
These laptops can work well with the auto-parser and their BIOS setups,
and in addition, the auto-parser fixes the problem with S3/S4 where
the unsol event handling is killed after resume due to fallback to the
single-cmd mode.
Bugzilla: https://bugzilla.novell.com/show\_bug.cgi?id=740115
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit f82b3653963a3dae3ee8381ab812c142f65b096d
Author: Pavel Hofman
Date: Thu Jan 5 23:05:18 2012 +0100
ALSA: ice1724 - Check for ac97 to avoid kernel oops
commit e7848163aa2a649d9065f230fadff80dc3519775 upstream.
Cards with identical PCI ids but no AC97 config in EEPROM do not have
the ac97 field initialized. We must check for this case to avoid kernel oops.
Signed-off-by: Pavel Hofman
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit cb9165c1d7b4cfd6878b2d46119a8c39c207a6ca
Author: David Henningsson
Date: Mon Jan 2 12:40:16 2012 +0100
ALSA: HDA: Fix automute for Cirrus Logic 421x
commit 78e2a928e377d5124932d4399c6c581908b027a0 upstream.
There was a bug in the automute logic causing speakers not to
mute when headphones were plugged in.
Tested-by: Hsin-Yi Chen
Signed-off-by: David Henningsson
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit d518b6308620ea00725e396120be9270563927e4
Author: David Henningsson
Date: Mon Jan 2 12:40:15 2012 +0100
ALSA: HDA: Fix master control for Cirrus Logic 421X
commit 40d03e63e91af8ddccdfd5a536cc2a6e51433e1d upstream.
The control name "HP/Speakers" is non-standard, and since there is
only one DAC on this chip there is no need for a virtual master
anyway.
Signed-off-by: David Henningsson
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 7fe1fb575202960264f721feeda91ee0e5850995
Author: Karsten Wiese
Date: Fri Dec 30 01:42:01 2011 +0100
ALSA: snd-usb-us122l: Delete calls to preempt\_disable
commit d0f3a2eb9062560bebca8b923424f3ca02a331ba upstream.
They are not needed here.
Signed-off-by: Karsten Wiese
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 683b6bd3e6b74c21de057d2a6230059f2ddb7df2
Author: Xi Wang
Date: Tue Jan 10 11:51:10 2012 -0500
ext4: fix undefined behavior in ext4\_fill\_flex\_info()
commit d50f2ab6f050311dbf7b8f5501b25f0bf64a439b upstream.
Commit 503358ae01b70ce6909d19dd01287093f6b6271c ("ext4: avoid divide by
zero when trying to mount a corrupted file system") fixes CVE-2009-4307
by performing a sanity check on s\_log\_groups\_per\_flex, since it can be
set to a bogus value by an attacker.
sbi->s\_log\_groups\_per\_flex = sbi->s\_es->s\_log\_groups\_per\_flex;
groups\_per\_flex = 1 << sbi->s\_log\_groups\_per\_flex;
if (groups\_per\_flex < 2) { ... }
This patch fixes two potential issues in the previous commit.
1) The sanity check might only work on architectures like PowerPC.
On x86, 5 bits are used for the shifting amount. That means, given a
large s\_log\_groups\_per\_flex value like 36, groups\_per\_flex = 1 << 36
is essentially 1 << 4 = 16, rather than 0. This will bypass the check,
leaving s\_log\_groups\_per\_flex and groups\_per\_flex inconsistent.
2) The sanity check relies on undefined behavior, i.e., oversized shift.
A standard-confirming C compiler could rewrite the check in unexpected
ways. Consider the following equivalent form, assuming groups\_per\_flex
is unsigned for simplicity.
groups\_per\_flex = 1 << sbi->s\_log\_groups\_per\_flex;
if (groups\_per\_flex == 0 || groups\_per\_flex == 1) {
We compile the code snippet using Clang 3.0 and GCC 4.6. Clang will
completely optimize away the check groups\_per\_flex == 0, leaving the
patched code as vulnerable as the original. GCC keeps the check, but
there is no guarantee that future versions will do the same.
Signed-off-by: Xi Wang
Signed-off-by: "Theodore Ts'o"
Signed-off-by: Greg Kroah-Hartman
commit 2132ecec55c2d26e90a548c32a56780f13f47a40
Author: Ben Hutchings
Date: Tue Jan 10 15:11:02 2012 -0800
drivers/rtc/interface.c: fix alarm rollover when day or month is out-of-range
commit e74a8f2edb92cb690b467cea0ab652c509e9f624 upstream.
Commit f44f7f96a20a ("RTC: Initialize kernel state from RTC") introduced a
potential infinite loop. If an alarm time contains a wildcard month and
an invalid day (> 31), or a wildcard year and an invalid month (>= 12),
the loop searching for the next matching date will never terminate. Treat
the invalid values as wildcards.
Fixes ,
Reported-by: leo weppelman
Reported-by: "P. van Gaans"
Signed-off-by: Ben Hutchings
Signed-off-by: Jonathan Nieder
Cc: Mark Brown
Cc: Marcelo Roberto Jimenez
Cc: Thomas Gleixner
Cc: John Stultz
Acked-by: Alessandro Zummo
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Greg Kroah-Hartman
commit e3b499578744760561458d300b376f0af2601819
Author: Wolfram Sang
Date: Tue Nov 29 15:34:08 2011 +0100
mtd: tests: stresstest: bail out if device has not enough eraseblocks
commit 2f4478ccff7df845dc9c0f8996a96373122c4417 upstream.
stresstest needs at least two eraseblocks. Bail out gracefully if that
condition is not met. Fixes the following 'division by zero' OOPS:
[ 619.100000] mtd\_stresstest: MTD device size 131072, eraseblock size 131072, page size 2048, count of eraseblocks 1, pages per eraseblock 64, OOB size 64
[ 619.120000] mtd\_stresstest: scanning for bad eraseblocks
[ 619.120000] mtd\_stresstest: scanned 1 eraseblocks, 0 are bad
[ 619.130000] mtd\_stresstest: doing operations
[ 619.130000] mtd\_stresstest: 0 operations done
[ 619.140000] Division by zero in kernel.
...
caused by
/\* Read or write up 2 eraseblocks at a time - hence 'ebcnt - 1' \*/
eb %= (ebcnt - 1);
Signed-off-by: Wolfram Sang
Signed-off-by: Artem Bityutskiy
Signed-off-by: David Woodhouse
Signed-off-by: Greg Kroah-Hartman
commit 3e22c678f492f82d5c2fabf1e1e87a59a8021e90
Author: Brian Norris
Date: Mon Nov 7 15:51:05 2011 -0800
mtd: mtd\_blkdevs: don't increase 'open' count on error path
commit 342ff28f5a2e5aa3236617bd2bddf6c749677ef2 upstream.
Some error paths in mtd\_blkdevs were fixed in the following commit:
commit 94735ec4044a6d318b83ad3c5794e931ed168d10
mtd: mtd\_blkdevs: fix error path in blktrans\_open
But on these error paths, the block device's `dev->open' count is
already incremented before we check for errors. This meant that, while
the error path was handled correctly on the first time through
blktrans\_open(), the device is erroneously considered already open on
the second time through.
This problem can be seen, for instance, when a UBI volume is
simultaneously mounted as a UBIFS partition and read through its
corresponding gluebi mtdblockX device. This results in blktrans\_open()
passing its error checks (with `dev->open > 0') without actually having
a handle on the device. Here's a summarized log of the actions and
results with nandsim:
# modprobe nandsim
# modprobe mtdblock
# modprobe gluebi
# modprobe ubifs
# ubiattach /dev/ubi\_ctrl -m 0
...
# ubimkvol /dev/ubi0 -N test -s 16MiB
...
# mount -t ubifs ubi0:test /mnt
# ls /dev/mtdblock\*
/dev/mtdblock0 /dev/mtdblock1
# cat /dev/mtdblock1 > /dev/null
cat: can't open '/dev/mtdblock4': Device or resource busy
# cat /dev/mtdblock1 > /dev/null
CPU 0 Unable to handle kernel paging request at virtual address
fffffff0, epc == 8031536c, ra == 8031f280
Oops[#1]:
...
Call Trace:
[<8031536c>] ubi\_leb\_read+0x14/0x164
[<8031f280>] gluebi\_read+0xf0/0x148
[<802edba8>] mtdblock\_readsect+0x64/0x198
[<802ecfe4>] mtd\_blktrans\_thread+0x330/0x3f4
[<8005be98>] kthread+0x88/0x90
[<8000bc04>] kernel\_thread\_helper+0x10/0x18
Signed-off-by: Brian Norris
Signed-off-by: Artem Bityutskiy
Signed-off-by: David Woodhouse
Signed-off-by: Greg Kroah-Hartman
commit 48a22f1478fb90cad84d9c75dd91cb8ea9750280
Author: Roman Tereshonkov
Date: Fri Dec 2 15:07:17 2011 +0200
mtd: mtdoops: skip reading initially bad blocks
commit 3538c56329936c78f7d356889908790006d0124c upstream.
Use block\_isbad to check and skip the bad blocks reading.
This will allow to get rid of the read errors if bad blocks
are present initially.
Signed-off-by: Roman Tereshonkov
Signed-off-by: Artem Bityutskiy
Signed-off-by: David Woodhouse
Signed-off-by: Greg Kroah-Hartman
commit ac3adf0e80a661573a25bbe589a6f7f2ad1d2529
Author: Roman Tereshonkov
Date: Tue Nov 29 12:49:18 2011 +0200
mtdoops: fix the oops\_page\_used array size
commit 556f063580db2953a7e53cd46b47724246320f60 upstream.
The array of unsigned long pointed by oops\_page\_used is allocated
by vmalloc which requires the size to be in bytes.
BITS\_PER\_LONG is equal to 32.
If we want to allocate memory for 32 pages with one bit per page then
32 / BITS\_PER\_LONG is equal to 1 byte that is 8 bits.
To fix it we need to multiply the result by sizeof(unsigned long) equal to 4.
Signed-off-by: Roman Tereshonkov
Signed-off-by: Artem Bityutskiy
Signed-off-by: David Woodhouse
Signed-off-by: Greg Kroah-Hartman


=== Content from www.openwall.com_5ef1ade0_20250124_173133.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](6) [[next>]](../../../2011/11/25/1) [[<thread-prev]](6) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <4ECE8598.3040206@redhat.com>
Date: Thu, 24 Nov 2011 10:57:44 -0700
From: Kurt Seifried <kseifried@...hat.com>
To: oss-security@...ts.openwall.com
Subject: Re: CVE request -- kernel: kvm: device assignment
 DoS

On 11/24/2011 10:49 AM, Petr Matousek wrote:
> It was found that kvm_vm_ioctl_assign_device function did not check if
> the user requesting assignment was privileged or not. Together with
> /dev/kvm being 666, unprivileged user could assign unused pci devices,
> or even devices that were in use and whose resources were not properly
> claimed by the respective drivers.
>
> Please note that privileged access was still needed to re-program the
> device to for example issue DMA requests. This is typically achieved by
> touching files on sysfs filesystem. These files are usually not
> accessible to unprivileged users.
>
> As a result, local user could use this flaw to crash the system.
>
> Reference:
> <https://bugzilla.redhat.com/show_bug.cgi?id=756084>
> <http://thread.gmane.org/gmane.comp.emulators.kvm.devel/82043>
>
> Thanks,
Please use CVE-2011-4347 for this issue.

--

-Kurt Seifried / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


