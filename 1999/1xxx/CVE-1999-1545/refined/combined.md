=== Content from marc.info_39cdb4d2_20250124_212206.html ===

```
[[prev in list](?l=bugtraq&m=93227470904208&w=2)] [[next in list](?l=bugtraq&m=93249196309690&w=2)] [prev in thread] [next in thread]
List:       [bugtraq](?l=bugtraq&r=1&w=2)
Subject:    joe 2.8 makes world-readable DEADJOE
From:       [Trevor Johnson <trevor () jpj ! net>](?a=90366101800018&r=1&w=2)
Date:       [1999-07-17 9:06:06](?l=bugtraq&r=1&w=2&b=199907)
[Download RAW [message](?l=bugtraq&m=93226771401036&q=mbox) or [body](?l=bugtraq&m=93226771401036&q=raw)]

Package: joe
Version: 2.8-12

I'm just guessing about the Debian version above.

sbr wrote:

> I recently started using a new editor called joe, with this editor there is
> a feature that if your existing session is terminated, it creates a DEADJOE
> in the directory.  While editing my shadow file my connection was
> terminated, thus leaving the DEADJOE in my /etc directory that was world
> readable containing my entire shadow file.  I think the problem is self
> explanitory.  I have emailed the creator and there is no feature to disable
> this that I can find or mentioned in the email.  My umask setting does not
> seem to affect the permissions of DEADJOE.
>
> The operating system is Debian Linux 2.1 kernel 2.2.10 i386.
>
> 	- Spencer.

How-To-Repeat:  use joe to edit a file, then kill -HUP its process.
                I was able to reproduce this with joe 2.8 under Red Hat
                6.0, with either Red Hat's -18 patches or the
                FreeBSD-current patches applied, so it looks like FreeBSD
                is probably vulnerable too.
Fix:  here's a patch against the pristine source, only tested on Red Hat.
Confidential:  no
__
Trevor Johnson

--- b.c.orig	Fri Jan 20 00:38:25 1995
+++ b.c	Sat Jul 17 01:54:09 1999
@@ -21,6 +21,7 @@
 #include <pwd.h>
 #endif
 #include <errno.h>
+#include <sys/types.h>

 #include "config.h"
 #include "blocks.h"
@@ -1990,6 +1991,7 @@
  {
  long tim=time(0);
  B *b;
+ mode_t mask=umask (077); /* no access to DEADJOE for others */
  FILE *f=fopen("DEADJOE","a");
  fprintf(f,"\n*** Modified files in JOE when it aborted on %s",ctime(&tim));
  if(sig) fprintf(f,"*** JOE was aborted by signal %d\n",sig);

[[prev in list](?l=bugtraq&m=93227470904208&w=2)] [[next in list](?l=bugtraq&m=93249196309690&w=2)] [prev in thread] [next in thread]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from marc.info_9ed61cdb_20250124_212205.html ===

```
[[prev in list](?l=bugtraq&m=93207286614689&w=2)] [[next in list](?l=bugtraq&m=93206513705549&w=2)] [prev in thread] [next in thread]
List:       [bugtraq](?l=bugtraq&r=1&w=2)
Subject:
From:       [sbr <sbr () DIRECT ! CA>](?a=93214840500001&r=1&w=2)
Date:       [1999-07-14 21:31:15](?l=bugtraq&r=1&w=2&b=199907)
[Download RAW [message](?l=bugtraq&m=93216103027827&q=mbox) or [body](?l=bugtraq&m=93216103027827&q=raw)]

I recently started using a new editor called joe, with this editor there is
a feature that if your existing session is terminated, it creates a DEADJOE
in the directory.  While editing my shadow file my connection was
terminated, thus leaving the DEADJOE in my /etc directory that was world
readable containing my entire shadow file.  I think the problem is self
explanitory.  I have emailed the creator and there is no feature to disable
this that I can find or mentioned in the email.  My umask setting does not
seem to affect the permissions of DEADJOE.

The operating system is Debian Linux 2.1 kernel 2.2.10 i386.

	- Spencer.

[[prev in list](?l=bugtraq&m=93207286614689&w=2)] [[next in list](?l=bugtraq&m=93206513705549&w=2)] [prev in thread] [next in thread]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)


