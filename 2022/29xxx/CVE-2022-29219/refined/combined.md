=== Content from github.com_68701638_20250114_200612.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FChainSafe%2Flodestar%2Fsecurity%2Fadvisories%2FGHSA-cvj7-5f3c-9vg9)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FChainSafe%2Flodestar%2Fsecurity%2Fadvisories%2FGHSA-cvj7-5f3c-9vg9)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=ChainSafe%2Flodestar)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ChainSafe](/ChainSafe)
/
**[lodestar](/ChainSafe/lodestar)**
Public

* [Notifications](/login?return_to=%2FChainSafe%2Flodestar) You must be signed in to change notification settings
* [Fork
  317](/login?return_to=%2FChainSafe%2Flodestar)
* [Star
   1.2k](/login?return_to=%2FChainSafe%2Flodestar)

* [Code](/ChainSafe/lodestar)
* [Issues
  223](/ChainSafe/lodestar/issues)
* [Pull requests
  25](/ChainSafe/lodestar/pulls)
* [Discussions](/ChainSafe/lodestar/discussions)
* [Actions](/ChainSafe/lodestar/actions)
* [Projects
  0](/ChainSafe/lodestar/projects)
* [Wiki](/ChainSafe/lodestar/wiki)
* [Security](/ChainSafe/lodestar/security)
* [Insights](/ChainSafe/lodestar/pulse)

Additional navigation options

* [Code](/ChainSafe/lodestar)
* [Issues](/ChainSafe/lodestar/issues)
* [Pull requests](/ChainSafe/lodestar/pulls)
* [Discussions](/ChainSafe/lodestar/discussions)
* [Actions](/ChainSafe/lodestar/actions)
* [Projects](/ChainSafe/lodestar/projects)
* [Wiki](/ChainSafe/lodestar/wiki)
* [Security](/ChainSafe/lodestar/security)
* [Insights](/ChainSafe/lodestar/pulse)

# AttesterSlashing number overflow

Moderate

[philknows](/philknows)
published
GHSA-cvj7-5f3c-9vg9
May 12, 2022

## Package

npm

@chainsafe/lodestar
([npm](/advisories?query=ecosystem%3Anpm))

## Affected versions

<0.35.0

## Patched versions

0.36.0

## Description

### Impact

Possible consensus split given maliciously-crafted `AttesterSlashing` or `ProposerSlashing` being included on-chain.

Since we represent `uint64` values as native javascript `number`s, there is an issue when those variables with large (greater than 2^53) `uint64` values are included on chain. In those cases, Lodestar may view *valid* `AttesterSlashing` or `ProposerSlashing` as *invalid*, due to rounding errors in large `number` values. This causes a consensus split, where Lodestar nodes are forked away from the main network.

Similarly Lodestar may consider *invalid* `ProposerSlashing` as *valid*, thus including in proposed blocks that will be considered invalid by the network.

### Patches

[#3977](https://github.com/ChainSafe/lodestar/pull/3977)

### Workarounds

Use `BigInt` to represent `Slot` and `Epoch` values in `AttesterSlashing` and `ProposerSlashing` objects. `BigInt` is too slow to be used in all `Slot` and `Epoch` cases, so we will carefully use `BigInt` just where necessary for consensus.

### Severity

Moderate

### CVE ID

CVE-2022-29219

### Weaknesses

No CWEs

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_34b6f7b4_20250114_200609.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FChainSafe%2Flodestar%2Fpull%2F3977)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FChainSafe%2Flodestar%2Fpull%2F3977)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=ChainSafe%2Flodestar)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ChainSafe](/ChainSafe)
/
**[lodestar](/ChainSafe/lodestar)**
Public

* [Notifications](/login?return_to=%2FChainSafe%2Flodestar) You must be signed in to change notification settings
* [Fork
  317](/login?return_to=%2FChainSafe%2Flodestar)
* [Star
   1.2k](/login?return_to=%2FChainSafe%2Flodestar)

* [Code](/ChainSafe/lodestar)
* [Issues
  223](/ChainSafe/lodestar/issues)
* [Pull requests
  25](/ChainSafe/lodestar/pulls)
* [Discussions](/ChainSafe/lodestar/discussions)
* [Actions](/ChainSafe/lodestar/actions)
* [Projects
  0](/ChainSafe/lodestar/projects)
* [Wiki](/ChainSafe/lodestar/wiki)
* [Security](/ChainSafe/lodestar/security)
* [Insights](/ChainSafe/lodestar/pulse)

Additional navigation options

* [Code](/ChainSafe/lodestar)
* [Issues](/ChainSafe/lodestar/issues)
* [Pull requests](/ChainSafe/lodestar/pulls)
* [Discussions](/ChainSafe/lodestar/discussions)
* [Actions](/ChainSafe/lodestar/actions)
* [Projects](/ChainSafe/lodestar/projects)
* [Wiki](/ChainSafe/lodestar/wiki)
* [Security](/ChainSafe/lodestar/security)
* [Insights](/ChainSafe/lodestar/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FChainSafe%2Flodestar%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FChainSafe%2Flodestar%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Reorg uint variables #3977

 Merged

[wemeetagain](/wemeetagain)
merged 1 commit into
[master](/ChainSafe/lodestar/tree/master "ChainSafe/lodestar:master")
from
[dapplion/optimize-uint](/ChainSafe/lodestar/tree/dapplion/optimize-uint "ChainSafe/lodestar:dapplion/optimize-uint")

May 5, 2022

 Merged

# [Reorg uint variables](#top) #3977

[wemeetagain](/wemeetagain)
merged 1 commit into
[master](/ChainSafe/lodestar/tree/master "ChainSafe/lodestar:master")
from
[dapplion/optimize-uint](/ChainSafe/lodestar/tree/dapplion/optimize-uint "ChainSafe/lodestar:dapplion/optimize-uint")

May 5, 2022

[Conversation
3](/ChainSafe/lodestar/pull/3977)
[Commits
1](/ChainSafe/lodestar/pull/3977/commits)
[Checks
0](/ChainSafe/lodestar/pull/3977/checks)
[Files changed](/ChainSafe/lodestar/pull/3977/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![dapplion](https://avatars.githubusercontent.com/u/35266934?s=60&v=4)](/dapplion)

Copy link

Contributor

### @dapplion **[dapplion](/dapplion)** commented [May 5, 2022](#issue-1227076452)

**Motivation**

Refactor uint variables organization for number and bigint variables

**Description**

* Reorg uint variables
* De-duplicate code
* Remove unnecessary type declarations

Sorry, something went wrong.

All reactions

[![@dapplion](https://avatars.githubusercontent.com/u/35266934?s=40&v=4)](/dapplion)

`[Optimize uint](/ChainSafe/lodestar/pull/3977/commits/fd5870fcfed12f259053ec56cd65bbc29ed4e70e "Optimize uint")`

`[fd5870f](/ChainSafe/lodestar/pull/3977/commits/fd5870fcfed12f259053ec56cd65bbc29ed4e70e)`

 [![@dapplion](https://avatars.githubusercontent.com/u/35266934?s=40&u=4bdf0f2422609a8c5edc0f246199dac15c32b366&v=4)](/dapplion)
[dapplion](/dapplion)
requested a review
from a team
as a [code owner](/ChainSafe/lodestar/blob/7d78388e49ebbec10c013f5b3dfa36c324ab37a4/.github/CODEOWNERS#L5)
[May 5, 2022 19:14](#event-6559018200)

[![@codecov](https://avatars.githubusercontent.com/in/254?s=80&v=4)](/apps/codecov)

Copy link

### **[codecov](/apps/codecov) bot** commented [May 5, 2022](#issuecomment-1118958106) • edited Loading

| [Codecov](https://codecov.io/gh/ChainSafe/lodestar/pull/3977?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ChainSafe) Report Merging [#3977](https://codecov.io/gh/ChainSafe/lodestar/pull/3977?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ChainSafe) ([fd5870f](https://github.com/ChainSafe/lodestar/commit/fd5870fcfed12f259053ec56cd65bbc29ed4e70e)) into [master](https://codecov.io/gh/ChainSafe/lodestar/commit/3eeb6e22a81f3ae43e79bcaf3f5e3e1a507164ca?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ChainSafe) ([3eeb6e2](https://github.com/ChainSafe/lodestar/commit/3eeb6e22a81f3ae43e79bcaf3f5e3e1a507164ca)) will **increase** coverage by `0.04%`. The diff coverage is `n/a`.  ``` @@            Coverage Diff             @@ ##           master    #3977      +/-   ## ========================================== + Coverage   37.06%   37.10%   +0.04%      ==========================================   Files         325      325                 Lines        9109     9115       +6        Branches     1468     1470       +2      ========================================== + Hits         3376     3382       +6        Misses       5542     5542                 Partials      191      191               ``` |
| --- |

All reactions

Sorry, something went wrong.

[![wemeetagain](https://avatars.githubusercontent.com/u/1348242?s=60&v=4)](/wemeetagain)

**[wemeetagain](/wemeetagain)**
approved these changes
[May 5, 2022](#pullrequestreview-963844541)

 [View reviewed changes](/ChainSafe/lodestar/pull/3977/files/fd5870fcfed12f259053ec56cd65bbc29ed4e70e)

[![g11tech](https://avatars.githubusercontent.com/u/76567250?s=60&v=4)](/g11tech)

**[g11tech](/g11tech)**
approved these changes
[May 5, 2022](#pullrequestreview-963850701)

 [View reviewed changes](/ChainSafe/lodestar/pull/3977/files/fd5870fcfed12f259053ec56cd65bbc29ed4e70e)

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=80&v=4)](/apps/github-actions)

Copy link

Contributor

### **[github-actions](/apps/github-actions) bot** commented [May 5, 2022](#issuecomment-1118967987)

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Performance Report ✔️ no performance regression detected Full benchmark results  | Benchmark suite | Current: [c65674d](https://github.com/ChainSafe/lodestar/commit/c65674d03094f199db7deb961d4a7a1aa96d44c8) | Previous: [7d78388](https://github.com/ChainSafe/lodestar/commit/7d78388e49ebbec10c013f5b3dfa36c324ab37a4) | Ratio | | --- | --- | --- | --- | | BeaconState.hashTreeRoot - No change | 549.00 ns/op | 565.00 ns/op | 0.97 | | BeaconState.hashTreeRoot - 1 full validator | 67.335 us/op | 62.558 us/op | 1.08 | | BeaconState.hashTreeRoot - 32 full validator | 660.80 us/op | 593.82 us/op | 1.11 | | BeaconState.hashTreeRoot - 512 full validator | 7.3918 ms/op | 6.5376 ms/op | 1.13 | | BeaconState.hashTreeRoot - 1 validator.effectiveBalance | 82.760 us/op | 74.927 us/op | 1.10 | | BeaconState.hashTreeRoot - 32 validator.effectiveBalance | 1.2307 ms/op | 1.0272 ms/op | 1.20 | | BeaconState.hashTreeRoot - 512 validator.effectiveBalance | 16.404 ms/op | 14.099 ms/op | 1.16 | | BeaconState.hashTreeRoot - 1 balances | 63.664 us/op | 57.905 us/op | 1.10 | | BeaconState.hashTreeRoot - 32 balances | 562.81 us/op | 531.17 us/op | 1.06 | | BeaconState.hashTreeRoot - 512 balances | 5.6000 ms/op | 5.0664 ms/op | 1.11 | | BeaconState.hashTreeRoot - 250000 balances | 120.10 ms/op | 106.00 ms/op | 1.13 | | processSlot - 1 slots | 11.474 us/op | 10.788 us/op | 1.06 | | processSlot - 32 slots | 1.9350 ms/op | 1.7022 ms/op | 1.14 | | getCommitteeAssignments - req 1 vs - 250000 vc | 6.4337 ms/op | 5.7377 ms/op | 1.12 | | getCommitteeAssignments - req 100 vs - 250000 vc | 8.9203 ms/op | 8.0990 ms/op | 1.10 | | getCommitteeAssignments - req 1000 vs - 250000 vc | 9.8777 ms/op | 8.9318 ms/op | 1.11 | | computeProposers - vc 250000 | 20.521 ms/op | 18.436 ms/op | 1.11 | | computeEpochShuffling - vc 250000 | 194.91 ms/op | 182.63 ms/op | 1.07 | | getNextSyncCommittee - vc 250000 | 337.67 ms/op | 304.64 ms/op | 1.11 | | altair processAttestation - 250000 vs - 7PWei normalcase | 4.8233 ms/op | 4.3105 ms/op | 1.12 | | altair processAttestation - 250000 vs - 7PWei worstcase | 6.8720 ms/op | 5.7937 ms/op | 1.19 | | altair processAttestation - setStatus - 1/6 committees join | 226.02 us/op | 219.59 us/op | 1.03 | | altair processAttestation - setStatus - 1/3 committees join | 446.31 us/op | 404.79 us/op | 1.10 | | altair processAttestation - setStatus - 1/2 committees join | 642.27 us/op | 588.66 us/op | 1.09 | | altair processAttestation - setStatus - 2/3 committees join | 807.01 us/op | 756.83 us/op | 1.07 | | altair processAttestation - setStatus - 4/5 committees join | 1.1020 ms/op | 1.0578 ms/op | 1.04 | | altair processAttestation - setStatus - 100% committees join | 1.3178 ms/op | 1.2015 ms/op | 1.10 | | altair processBlock - 250000 vs - 7PWei normalcase | 27.448 ms/op | 26.164 ms/op | 1.05 | | altair processBlock - 250000 vs - 7PWei normalcase hashState | 41.049 ms/op | 36.027 ms/op | 1.14 | | altair processBlock - 250000 vs - 7PWei worstcase | 84.479 ms/op | 82.000 ms/op | 1.03 | | altair processBlock - 250000 vs - 7PWei worstcase hashState | 127.61 ms/op | 99.397 ms/op | 1.28 | | altair processEth1Data - 250000 vs - 7PWei normalcase | 943.28 us/op | 905.56 us/op | 1.04 | | altair processEpoch - mainnet\_e81889 | 679.95 ms/op | 572.25 ms/op | 1.19 | | mainnet\_e81889 - altair beforeProcessEpoch | 109.34 ms/op | 151.78 ms/op | 0.72 | | mainnet\_e81889 - altair processJustificationAndFinalization | 34.582 us/op | 39.915 us/op | 0.87 | | mainnet\_e81889 - altair processInactivityUpdates | 12.617 ms/op | 12.482 ms/op | 1.01 | | mainnet\_e81889 - altair processRewardsAndPenalties | 163.17 ms/op | 94.590 ms/op | 1.73 | | mainnet\_e81889 - altair processRegistryUpdates | 7.7310 us/op | 10.567 us/op | 0.73 | | mainnet\_e81889 - altair processSlashings | 3.0400 us/op | 3.3780 us/op | 0.90 | | mainnet\_e81889 - altair processEth1DataReset | 3.0090 us/op | 3.1860 us/op | 0.94 | | mainnet\_e81889 - altair processEffectiveBalanceUpdates | 8.3040 ms/op | 7.6855 ms/op | 1.08 | | mainnet\_e81889 - altair processSlashingsReset | 10.033 us/op | 10.642 us/op | 0.94 | | mainnet\_e81889 - altair processRandaoMixesReset | 12.466 us/op | 12.981 us/op | 0.96 | | mainnet\_e81889 - altair processHistoricalRootsUpdate | 3.7810 us/op | 3.5670 us/op | 1.06 | | mainnet\_e81889 - altair processParticipationFlagUpdates | 7.6430 us/op | 14.986 us/op | 0.51 | | mainnet\_e81889 - altair processSyncCommitteeUpdates | 2.8120 us/op | 3.0110 us/op | 0.93 | | mainnet\_e81889 - altair afterProcessEpoch | 222.96 ms/op | 242.75 ms/op | 0.92 | | altair processInactivityUpdates - 250000 normalcase | 35.889 ms/op | 36.892 ms/op | 0.97 | | altair processInactivityUpdates - 250000 worstcase | 30.140 ms/op | 30.941 ms/op | 0.97 | | altair processRewardsAndPenalties - 250000 normalcase | 143.34 ms/op | 114.19 ms/op | 1.26 | | altair processRewardsAndPenalties - 250000 worstcase | 95.201 ms/op | 113.70 ms/op | 0.84 | | altair processSyncCommitteeUpdates - 250000 | 350.00 ms/op | 315.54 ms/op | 1.11 | | Tree 40 250000 create | 832.67 ms/op | 781.87 ms/op | 1.06 | | Tree 40 250000 get(125000) | 357.67 ns/op | 330.19 ns/op | 1.08 | | Tree 40 250000 set(125000) | 2.8744 us/op | 2.5294 us/op | 1.14 | | Tree 40 250000 toArray() | 37.656 ms/op | 36.777 ms/op | 1.02 | | Tree 40 250000 iterate all - toArray() + loop | 37.363 ms/op | 37.225 ms/op | 1.00 | | Tree 40 250000 iterate all - get(i) | 132.83 ms/op | 130.52 ms/op | 1.02 | | MutableVector 250000 create | 20.090 ms/op | 21.373 ms/op | 0.94 | | MutableVector 250000 get(125000) | 16.334 ns/op | 18.105 ns/op | 0.90 | | MutableVector 250000 set(125000) | 692.75 ns/op | 759.32 ns/op | 0.91 | | MutableVector 250000 toArray() | 7.9623 ms/op | 8.3366 ms/op | 0.96 | | MutableVector 250000 iterate all - toArray() + loop | 8.4114 ms/op | 8.4130 ms/op | 1.00 | | MutableVector 250000 iterate all - get(i) | 3.9848 ms/op | 4.1466 ms/op | 0.96 | | Array 250000 create | 7.5010 ms/op | 7.5249 ms/op | 1.00 | | Array 250000 clone - spread | 3.2529 ms/op | 3.5252 ms/op | 0.92 | | Array 250000 get(125000) | 1.4520 ns/op | 1.4930 ns/op | 0.97 | | Array 250000 set(125000) | 1.5830 ns/op | 1.5150 ns/op | 1.04 | | Array 250000 iterate all - loop | 209.69 us/op | 198.69 us/op | 1.06 | | effectiveBalanceIncrements clone Uint8Array 300000 | 97.785 us/op | 100.70 us/op | 0.97 | | effectiveBalanceIncrements clone MutableVector 300000 | 939.00 ns/op | 1.0220 us/op | 0.92 | | effectiveBalanceIncrements rw all Uint8Array 300000 | 367.30 us/op | 358.19 us/op | 1.03 | | effectiveBalanceIncrements rw all MutableVector 300000 | 216.21 ms/op | 207.34 ms/op | 1.04 | | aggregationBits - 2048 els - zipIndexesInBitList | 34.871 us/op | 32.528 us/op | 1.07 | | regular array get 100000 times | 81.681 us/op | 78.265 us/op | 1.04 | | wrappedArray get 100000 times | 81.829 us/op | 79.609 us/op | 1.03 | | arrayWithProxy get 100000 times | 36.758 ms/op | 34.627 ms/op | 1.06 | | ssz.Root.equals | 552.00 ns/op | 546.00 ns/op | 1.01 | | byteArrayEquals | 518.00 ns/op | 525.00 ns/op | 0.99 | | phase0 processBlock - 250000 vs - 7PWei normalcase | 4.2602 ms/op | 4.1946 ms/op | 1.02 | | phase0 processBlock - 250000 vs - 7PWei worstcase | 56.286 ms/op | 53.246 ms/op | 1.06 | | phase0 afterProcessEpoch - 250000 vs - 7PWei | 214.92 ms/op | 202.25 ms/op | 1.06 | | phase0 beforeProcessEpoch - 250000 vs - 7PWei | 82.221 ms/op | 80.941 ms/op | 1.02 | | phase0 processEpoch - mainnet\_e58758 | 605.80 ms/op | 585.77 ms/op | 1.03 | | mainnet\_e58758 - phase0 beforeProcessEpoch | 254.34 ms/op | 254.12 ms/op | 1.00 | | mainnet\_e58758 - phase0 processJustificationAndFinalization | 34.049 us/op | 41.753 us/op | 0.82 | | mainnet\_e58758 - phase0 processRewardsAndPenalties | 151.06 ms/op | 145.84 ms/op | 1.04 | | mainnet\_e58758 - phase0 processRegistryUpdates | 17.486 us/op | 21.124 us/op | 0.83 | | mainnet\_e58758 - phase0 processSlashings | 3.5360 us/op | 3.4080 us/op | 1.04 | | mainnet\_e58758 - phase0 processEth1DataReset | 2.8890 us/op | 3.4900 us/op | 0.83 | | mainnet\_e58758 - phase0 processEffectiveBalanceUpdates | 6.9552 ms/op | 6.6354 ms/op | 1.05 | | mainnet\_e58758 - phase0 processSlashingsReset | 11.398 us/op | 11.589 us/op | 0.98 | | mainnet\_e58758 - phase0 processRandaoMixesReset | 11.360 us/op | 12.539 us/op | 0.91 | | mainnet\_e58758 - phase0 processHistoricalRootsUpdate | 3.7460 us/op | 5.2410 us/op | 0.71 | | mainnet\_e58758 - phase0 processParticipationRecordUpdates | 11.409 us/op | 15.425 us/op | 0.74 | | mainnet\_e58758 - phase0 afterProcessEpoch | 189.40 ms/op | 179.54 ms/op | 1.05 | | phase0 processEffectiveBalanceUpdates - 250000 normalcase | 7.6092 ms/op | 7.3132 ms/op | 1.04 | | phase0 processEffectiveBalanceUpdates - 250000 worstcase 0.5 | 8.9662 ms/op | 8.0808 ms/op | 1.11 | | phase0 processRegistryUpdates - 250000 normalcase | 15.023 us/op | 14.789 us/op | 1.02 | | phase0 processRegistryUpdates - 250000 badcase\_full\_deposits | 533.43 us/op | 529.11 us/op | 1.01 | | phase0 processRegistryUpdates - 250000 worstcase 0.5 | 254.88 ms/op | 242.99 ms/op | 1.05 | | phase0 getAttestationDeltas - 250000 normalcase | 18.178 ms/op | 17.274 ms/op | 1.05 | | phase0 getAttestationDeltas - 250000 worstcase | 17.975 ms/op | 17.348 ms/op | 1.04 | | phase0 processSlashings - 250000 worstcase | 7.3782 ms/op | 6.4251 ms/op | 1.15 | | shuffle list - 16384 els | 12.970 ms/op | 12.450 ms/op | 1.04 | | shuffle list - 250000 els | 187.79 ms/op | 180.67 ms/op | 1.04 | | getEffectiveBalanceIncrementsZeroInactive - 250000 vs - 7PWei | 447.33 us/op | 422.52 us/op | 1.06 | | pass gossip attestations to forkchoice per slot | 4.4385 ms/op | 4.4262 ms/op | 1.00 | | computeDeltas | 3.7874 ms/op | 4.1948 ms/op | 0.90 | | computeProposerBoostScoreFromBalances | 614.21 us/op | 583.91 us/op | 1.05 | | getPubkeys - index2pubkey - req 1000 vs - 250000 vc | 2.3258 ms/op | 2.1584 ms/op | 1.08 | | getPubkeys - validatorsArr - req 1000 vs - 250000 vc | 104.47 us/op | 82.715 us/op | 1.26 | | BLS verify - blst-native | 2.3158 ms/op | 2.1731 ms/op | 1.07 | | BLS verifyMultipleSignatures 3 - blst-native | 4.6655 ms/op | 4.3870 ms/op | 1.06 | | BLS verifyMultipleSignatures 8 - blst-native | 9.9455 ms/op | 9.2702 ms/op | 1.07 | | BLS verifyMultipleSignatures 32 - blst-native | 36.588 ms/op | 33.649 ms/op | 1.09 | | BLS aggregatePubkeys 32 - blst-native | 49.205 us/op | 45.022 us/op | 1.09 | | BLS aggregatePubkeys 128 - blst-native | 188.58 us/op | 174.09 us/op | 1.08 | | getAttestationsForBlock | 72.009 ms/op | 70.175 ms/op | 1.03 | | CheckpointStateCache - add get delete | 13.018 us/op | 11.416 us/op | 1.14 | | validate gossip signedAggregateAndProof - struct | 5.3144 ms/op | 4.7772 ms/op | 1.11 | | validate gossip attestation - struct | 2.4774 ms/op | 2.3383 ms/op | 1.06 | | pickEth1Vote - no votes | 2.8296 ms/op | 2.4892 ms/op | 1.14 | | pickEth1Vote - max votes | 22.935 ms/op | 20.097 ms/op | 1.14 | | pickEth1Vote - Eth1Data hashTreeRoot value x2048 | 13.306 ms/op | 11.793 ms/op | 1.13 | | pickEth1Vote - Eth1Data hashTreeRoot tree x2048 | 24.291 ms/op | 22.021 ms/op | 1.10 | | pickEth1Vote - Eth1Data fastSerialize value x2048 | 1.9341 ms/op | 1.7855 ms/op | 1.08 | | pickEth1Vote - Eth1Data fastSerialize tree x2048 | 15.077 ms/op | 13.357 ms/op | 1.13 | | bytes32 toHexString | 1.1280 us/op | 1.0530 us/op | 1.07 | | bytes32 Buffer.toString(hex) | 813.00 ns/op | 777.00 ns/op | 1.05 | | bytes32 Buffer.toString(hex) from Uint8Array | 1.0930 us/op | 990.00 ns/op | 1.10 | | bytes32 Buffer.toString(hex) + 0x | 811.00 ns/op | 722.00 ns/op | 1.12 | | Object access 1 prop | 0.39300 ns/op | 0.36800 ns/op | 1.07 | | Map access 1 prop | 0.36500 ns/op | 0.33300 ns/op | 1.10 | | Object get x1000 | 22.238 ns/op | 19.029 ns/op | 1.17 | | Map get x1000 | 1.2030 ns/op | 1.1380 ns/op | 1.06 | | Object set x1000 | 134.18 ns/op | 119.28 ns/op | 1.12 | | Map set x1000 | 81.651 ns/op | 72.176 ns/op | 1.13 | | Return object 10000 times | 0.44990 ns/op | 0.41310 ns/op | 1.09 | | Throw Error 10000 times | 7.4756 us/op | 6.4503 us/op | 1.16 | | enrSubnets - fastDeserialize 64 bits | 3.3280 us/op | 2.9750 us/op | 1.12 | | enrSubnets - ssz BitVector 64 bits | 885.00 ns/op | 882.00 ns/op | 1.00 | | enrSubnets - fastDeserialize 4 bits | 464.00 ns/op | 447.00 ns/op | 1.04 | | enrSubnets - ssz BitVector 4 bits | 904.00 ns/op | 806.00 ns/op | 1.12 | | RateTracker 1000000 limit, 1 obj count per request | 222.57 ns/op | 202.72 ns/op | 1.10 | | RateTracker 1000000 limit, 2 obj count per request | 167.97 ns/op | 153.81 ns/op | 1.09 | | RateTracker 1000000 limit, 4 obj count per request | 139.34 ns/op | 127.65 ns/op | 1.09 | | RateTracker 1000000 limit, 8 obj count per request | 120.87 ns/op | 112.49 ns/op | 1.07 | | RateTracker with prune | 4.5950 us/op | 4.3350 us/op | 1.06 | | array of 16000 items push then shift | 3.7878 us/op | 3.6745 us/op | 1.03 | | LinkedList of 16000 items push then shift | 19.064 ns/op | 19.185 ns/op | 0.99 | | array of 16000 items push then pop | 241.55 ns/op | 235.49 ns/op | 1.03 | | LinkedList of 16000 items push then pop | 18.477 ns/op | 17.340 ns/op | 1.07 | | array of 24000 items push then shift | 5.5946 us/op | 5.1463 us/op | 1.09 | | LinkedList of 24000 items push then shift | 22.779 ns/op | 20.965 ns/op | 1.09 | | array of 24000 items push then pop | 247.02 ns/op | 203.04 ns/op | 1.22 | | LinkedList of 24000 items push then pop | 20.843 ns/op | 18.936 ns/op | 1.10 |    by benchmarkbot/action |

All reactions

Sorry, something went wrong.

[![@wemeetagain](https://avatars.githubusercontent.com/u/1348242?s=40&u=fa25c97ec7d5a0b51a758deef91094e97eb083d0&v=4)](/wemeetagain)
[wemeetagain](/wemeetagain)
merged commit [`e8f60b6`](/ChainSafe/lodestar/commit/e8f60b6a4cd28d475ef1b5acf0f2608a5865c992)
into
master

[May 5, 2022](https://github.com/ChainSafe/lodestar/pull/3977#event-6559122530)

 [![@wemeetagain](https://avatars.githubusercontent.com/u/1348242?s=40&u=fa25c97ec7d5a0b51a758deef91094e97eb083d0&v=4)](/wemeetagain)
[wemeetagain](/wemeetagain)
deleted the
dapplion/optimize-uint

branch
[May 5, 2022 19:33](#event-6559122603)

[dapplion](/dapplion)
added a commit
that referenced
this pull request
[May 12, 2022](#ref-commit-7a676c1)
[![@dapplion](https://avatars.githubusercontent.com/u/35266934?s=40&u=4bdf0f2422609a8c5edc0f246199dac15c32b366&v=4)](/dapplion)

`[Clarify](/ChainSafe/lodestar/commit/7a676c12d98b1825740d3928c5cad2c55f988fb5 "Clarify #3977 with unbounded uint issue") [#3977](https://github.com/ChainSafe/lodestar/pull/3977) [with unbounded uint issue](/ChainSafe/lodestar/commit/7a676c12d98b1825740d3928c5cad2c55f988fb5 "Clarify #3977 with unbounded uint issue")`

`[7a676c1](/ChainSafe/lodestar/commit/7a676c12d98b1825740d3928c5cad2c55f988fb5)`

[![@dapplion](https://avatars.githubusercontent.com/u/35266934?s=40&u=4bdf0f2422609a8c5edc0f246199dac15c32b366&v=4)](/dapplion)
[dapplion](/dapplion)
mentioned this pull request
[May 12, 2022](#ref-pullrequest-1234201709)

[Clarify #3977 with unbounded uint issue
#4018](/ChainSafe/lodestar/pull/4018)
 Merged

[wemeetagain](/wemeetagain)
pushed a commit
that referenced
this pull request
[May 13, 2022](#ref-commit-d56ff4f)
[![@dapplion](https://avatars.githubusercontent.com/u/35266934?s=40&u=4bdf0f2422609a8c5edc0f246199dac15c32b366&v=4)](/dapplion)

`[Clarify](/ChainSafe/lodestar/commit/d56ff4f5048ff82b876276fccfbaf0b93a4a3fa0 "Clarify #3977 with unbounded uint issue (#4018)") [#3977](https://github.com/ChainSafe/lodestar/pull/3977) [with unbounded uint issue (](/ChainSafe/lodestar/commit/d56ff4f5048ff82b876276fccfbaf0b93a4a3fa0 "Clarify #3977 with unbounded uint issue (#4018)")[#4018](https://github.com/ChainSafe/lodestar/pull/4018)[)](/ChainSafe/lodestar/commit/d56ff4f5048ff82b876276fccfbaf0b93a4a3fa0 "Clarify #3977 with unbounded uint issue (#4018)")`

`[d56ff4f](/ChainSafe/lodestar/commit/d56ff4f5048ff82b876276fccfbaf0b93a4a3fa0)`

[dapplion](/dapplion)
added a commit
that referenced
this pull request
[May 30, 2022](#ref-commit-83ef1ce)
[![@dapplion](https://avatars.githubusercontent.com/u/35266934?s=40&u=4bdf0f2422609a8c5edc0f246199dac15c32b366&v=4)](/dapplion) [![@twoeths](https://avatars.githubusercontent.com/u/10568965?s=40&u=ae2fe79bca138ab24af72687ca2962b1b6d81c60&v=4)](/twoeths)
[![@g11tech](https://avatars.githubusercontent.com/u/76567250?s=40&u=c0d45a6ae662ab138bd1ea8b38ac3f758a87de51&v=4)](/g11tech) [![@dadepo](https://avatars.githubusercontent.com/u/272535?s=40&u=13b8d73cb558390c5546441fb4f54730c993a902&v=4)](/dadepo) [![@wemeetagain](https://avatars.githubusercontent.com/u/1348242?s=40&u=fa25c97ec7d5a0b51a758deef91094e97eb083d0&v=4)](/wemeetagain) [![@philknows](https://avatars.githubusercontent.com/u/58080811?s=40&u=74df14c6593541e33b11b7472856e9b545271eb7&v=4)](/philknows) [![@dependabot](https://avatars.githubusercontent.com/in/29110?s=40&v=4)](/apps/dependabot)

`[v0.37.0 release (](/ChainSafe/lodestar/commit/83ef1ceb7f646ea1e42f8e848aab07e2b2b9cc67 "v0.37.0 release (#4074)

* New metric filtering missed blocks (#3927)

* Log block delay second

* Add elappsedTimeTillBecomeHead metric

* Add 'till become head' metric to dashboard

* chore: correct the metric name to elapsedTimeTillBecomeHead

* Add and use secFromSlot to clock

* Track block source

* Revert \"Track block source\"

This reverts commit 5fe62204e827e313fe6d081bb258e5306f3a734a.

* Update bucket values

* Limit how old blocks are tracked in elapsedTimeTillBecomeHead

* Simplify secFromSlot

Co-authored-by: dapplion <35266934+dapplion@users.noreply.github.com>

* Fix the terminal validations of the merge block (#3984)

* Fix the terminal validations of the merge block

* activate merge transition block spec tests

* some comments to explain the merge block validations movement

* Extend error messages when voluntary exit errors because of present of lockfile (#3935)

* Extend error and Clean up

* Only showing the message to use --force to override in case of voluntary exit

* Simplify gitData and version guessing (#3992)

Don't print double slash in version string

Dont add git-data.json to NPM releases

Write git-data.json only in from source docker build

Remove numCommits

Test git-data.json generation from within the test

Move comment

Revert \"Dont add git-data.json to NPM releases\"

This reverts commit 5fe2d388825f3e3a834058478071e8364b0d761c.

Simplify gitData and version guessing

Run cmd

* Activate ex-ante fork-choice spec tests (#4003)

* Prepare custom version on next release (#3990)

* Prepare custom version on next release

* Test in branch

* Don't set version in advance

* Remove --canary flag

* Change and commit version

* Setup git config

* Revert temp changes

* Lightclient e2e: increase validator client (#4006)

* Bump to v0.37.0 nightly builds (#4013)

* Guarantee full spec tests coverage (#4012)

* Ensure all spec tests are run

* Fix general bls tests

* Improve docs of specTestIterator

* Fix fork_choice tests

* Remove Check spec tests step

* Add merge transition/finalization banners (#3963)

* Add merge transition/finalization banners

* fix signatures

* Benchmark initial sync (#3995)

* Basic range sync perf test

* Benchmark initial sync

* Add INFURA_ETH2_CREDENTIALS to benchmark GA

* Download test cache file from alternative source

* Re-org beforeValue and testCase helpers

* Break light-client - state-transition test dependency

* Revert adding downloadTestCacheFile

* Download files from a Github release

* Clarify #3977 with unbounded uint issue (#4018)

* Update mainnet-shadow-5 configs (#4021)

* Bump moment from 2.29.1 to 2.29.2 (#3901)

Bumps [moment](https://github.com/moment/moment) from 2.29.1 to 2.29.2.
- [Release notes](https://github.com/moment/moment/releases)
- [Changelog](https://github.com/moment/moment/blob/develop/CHANGELOG.md)
- [Commits](https://github.com/moment/moment/compare/2.29.1...2.29.2)

---
updated-dependencies:
- dependency-name: moment
  dependency-type: indirect
...

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>

* Implement support for validator next-epoch proposer duties (#3782)

* Implementation to be able to get block proposer an epoch ahead - still need optimization

* revert changes made to waitForSlot

* caching the results of computing future proposers. Also extended test

* using effectiveBalanceIncrements from state instead of recomputing it

* fix lint errors

* revert check not needed in getBeaconProposer

* Update tests to include assertion messages

* Move caching of next proposer duties to BeaconChain class

* Delete the block proposer previously cached when next proposer was requested at current epoch

* moved next epoch proposers from the chain to the state

* Compute next proposer on demand and cache

* Fix lint errors

* update implementation to work with changes from master

* caching epoch seed in context so that getNextEpochBeaconProposer can be independent of state

* Revert \"caching epoch seed in context so that getNextEpochBeaconProposer can be independent of state\"

This reverts commit 02a722afabe1b6bdf42a98e1d5dbdc2805617872.

* caching epoch seed in context so that getNextEpochBeaconProposer can be independent of state

* removing the need to delete from nextEpochProposers in call to getBeaconProposer

* no need to recompute currrentProposerSeed again

* Revert \"no need to recompute currrentProposerSeed again\"

This reverts commit b6b1b8c175e6d741e3d001252678812fbfe49de5.

* removed empty file left after fixing merge conflicts

* remove some unnecessary variable from the epoch context.

* add some comments

* Fix lint

* import from the right location

* Review PR

* Merge imports

* Delete get proposers api impl test

* Remove duplicated comment

Co-authored-by: dapplion <35266934+dapplion@users.noreply.github.com>

* Extend timeout for gitData unit test (#4026)

* Fix readAndGetGitData (#4025)

* Ensure light client update is in a single period (#4029)

* Handle merge block fetch error (#4016)

* Handle merge block fetch error

* Log errors on fetch errors for terminal pow

* docs: Update nodeJS minimum requirement (#4037)

* Remove child_process call in gitData before step (#4033)

* Oppool aggregates use BitArray only for set logic (#4034)

* Use BitArrays for aggregate merging

* Test intersectUint8Arrays

* Review PR

* Update tests

* Remove un-used code

* Modify gossipsub params following consensus spec v1.1.10 (#4011)

* Modify gossipsub params following consensus spec v1.1.10

* Specify GOSSIPSUB_HEARTBEAT_INTERVAL as a constant

* Throw a more informative error on invalid keystore (#4022)

* Throw a more informative error on invalid keystore

* Make error more descriptive

* Use template string

* Update keys.ts

* Update keys.ts

Co-authored-by: Lion - dapplion <35266934+dapplion@users.noreply.github.com>

* Ignore gossip AggregateAndProof if aggregate is seen (#4019)

* Ignore gossip AggregateAndProof if aggregate is seen

* Check for non-strict superset of seen attestation data

* Fix validateGossipAggregateAndProof benchmark test

* Fix import

* Ultilize intersectUint8Arrays()

* Implement SeenContributionAndProof.participantsKnown

* Add metrics to seen cache

* Add perf tests

* Change method name to isSuperSetOrEqual()

* Refactor metric names

* Specify lerna exact version for release-nightly workflow (#4049)

* Add ropsten network (#4051)

* Force all packages to be versioned for exact (#4052)

* Update discv5 to v0.7.1 (#4044)

* Add ability to update the fee recipient for execution via beacon and/or validator defaults (#3958)

* Add and use a default fee recipient for a validator process

* transfer the proposer cache to beacon chain

* mock chain fixes

* test and perf fixes

* fee recipient validation change

* track and use free recipient as string instead of ExecutionAddress

* fix unit test

* fix merge test

* use dummy address

* refac and add proposer cache pruning

* tests for beacon proposer cache

* merge interop fee recipient check

* fix the optional

* feeRecipient confirmation and small refac

* add the missing map

* add flag to enable strict fee recipient check

* Small refactor to setup merge for ropsten using baked in configs (#4053)

* Issue advance fcU for builing the EL block (#3965)

rebaseing to the refactored prepare beacon proposer

refac payload id cache as separate class and add pruning

issue payload fcus if synced

rename issueNext.. to maybeIssueNext...

* Simplify release process (#4030)

* Simplify release process

* Remove old postrelease script

* Add lerna version check

* Tweak RELEASE.md

* Add force-publish to lerna version command

* Update the proposer boost percentage to 40% (#4055)

* ESM Support (#3978)

* ESM changes

* Fix root lodestar script

* Fix some linter errors

* trying directly re-exporting under an alias from networks module

* Fix types exports

* Fix more linter errors

* Fix spec test download

* Update bls to 7.1.0

* Fix spec tests

* temp reverting eslint parser option to 10 and disabling the check of .js file extenstion. Should fix lint errors

* temp commented out file-extension-in-import

* Disable readme checks

* Fix check-build

* Fix params e2e tests

* Bump @chainsafe/threads

* Bump bls to v7.1.1

* Add timeouts after node initialization but before sim test run

* Tweak timeouts

* Tweak timeout

* Tweak sim merge timeout

* Tweak sim merge timeout

* Tweak sim merge timeout

* Tweak sim merge timeout

* Add more timeouts

* Add another timeout

* Fix linter errors

* Fix some tests

* Fix some linter errors and spec tests

* Fix benchmarks

* Fix linter errors

* Update each bls dependency

* Tweak timeouts

* Add another timeout

* More timeouts

* Fix bls pool size

* Set root package.json to ESM

* Remove old linter comment

* Revert \"Set root package.json to ESM\"

This reverts commit 347b0fdd18de7e26d1bfb8b15a19e0083cb59168.

* Remove stray file (probably old)

* Undo unnecessary diff

* Add comment on __dirname replacement

* Import type @chainsafe/bls/types

* Use lodestar path imports

* Revert multifork to lodestar package

* Format .mocharc.yaml

* Use same @chainsafe/as-sha256 version

* Fix lodash path imports

* Use src instead of lib

* Load db metrics

* Remove experimental-specifier-resolution

* Remove lodestat/chain export

* Add stray missing file extension

* Revert ValidatorDir changes

* Fix stray missing file extensions

* Fix check-types

Co-authored-by: Dadepo Aderemi <dadepo@gmail.com>
Co-authored-by: dapplion <35266934+dapplion@users.noreply.github.com>

* chore(release): v0.37.0-beta.0

* Bump to v0.37.0

Co-authored-by: tuyennhv <vutuyen2636@gmail.com>
Co-authored-by: g11tech <76567250+g11tech@users.noreply.github.com>
Co-authored-by: dadepo <dadepo@gmail.com>
Co-authored-by: Cayman <caymannava@gmail.com>
Co-authored-by: Phil Ngo <58080811+philknows@users.noreply.github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: g11tech <gajinder@g11.in>")[#4074](https://github.com/ChainSafe/lodestar/pull/4074)[)](/ChainSafe/lodestar/commit/83ef1ceb7f646ea1e42f8e848aab07e2b2b9cc67 "v0.37.0 release (#4074)

* New metric filtering missed blocks (#3927)

* Log block delay second

* Add elappsedTimeTillBecomeHead metric

* Add 'till become head' metric to dashboard

* chore: correct the metric name to elapsedTimeTillBecomeHead

* Add and use secFromSlot to clock

* Track block source

* Revert \"Track block source\"

This reverts commit 5fe62204e827e313fe6d081bb258e5306f3a734a.

* Update bucket values

* Limit how old blocks are tracked in elapsedTimeTillBecomeHead

* Simplify secFromSlot

Co-authored-by: dapplion <35266934+dapplion@users.noreply.github.com>

* Fix the terminal validations of the merge block (#3984)

* Fix the terminal validations of the merge block

* activate merge transition block spec tests

* some comments to explain the merge block validations movement

* Extend error messages when voluntary exit errors because of present of lockfile (#3935)

* Extend error and Clean up

* Only showing the message to use --force to override in case of voluntary exit

* Simplify gitData and version guessing (#3992)

Don't print double slash in version string

Dont add git-data.json to NPM releases

Write git-data.json only in from source docker build

Remove numCommits

Test git-data.json generation from within the test

Move comment

Revert \"Dont add git-data.json to NPM releases\"

This reverts commit 5fe2d388825f3e3a834058478071e8364b0d761c.

Simplify gitData and version guessing

Run cmd

* Activate ex-ante fork-choice spec tests (#4003)

* Prepare custom version on next release (#3990)

* Prepare custom version on next release

* Test in branch

* Don't set version in advance

* Remove --canary flag

* Change and commit version

* Setup git config

* Revert temp changes

* Lightclient e2e: increase validator client (#4006)

* Bump to v0.37.0 nightly builds (#4013)

* Guarantee full spec tests coverage (#4012)

* Ensure all spec tests are run

* Fix general bls tests

* Improve docs of specTestIterator

* Fix fork_choice tests

* Remove Check spec tests step

* Add merge transition/finalization banners (#3963)

* Add merge transition/finalization banners

* fix signatures

* Benchmark initial sync (#3995)

* Basic range sync perf test

* Benchmark initial sync

* Add INFURA_ETH2_CREDENTIALS to benchmark GA

* Download test cache file from alternative source

* Re-org beforeValue and testCase helpers

* Break light-client - state-transition test dependency

* Revert adding downloadTestCacheFile

* Download files from a Github release

* Clarify #3977 with unbounded uint issue (#4018)

* Update mainnet-shadow-5 configs (#4021)

* Bump moment from 2.29.1 to 2.29.2 (#3901)

Bumps [moment](https://github.com/moment/moment) from 2.29.1 to 2.29.2.
- [Release notes](https://github.com/moment/moment/releases)
- [Changelog](https://github.com/moment/moment/blob/develop/CHANGELOG.md)
- [Commits](https://github.com/moment/moment/compare/2.29.1...2.29.2)

---
updated-dependencies:
- dependency-name: moment
  dependency-type: indirect
...

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>

* Implement support for validator next-epoch proposer duties (#3782)

* Implementation to be able to get block proposer an epoch ahead - still need optimization

* revert changes made to waitForSlot

* caching the results of computing future proposers. Also extended test

* using effectiveBalanceIncrements from state instead of recomputing it

* fix lint errors

* revert check not needed in getBeaconProposer

* Update tests to include assertion messages

* Move caching of next proposer duties to BeaconChain class

* Delete the block proposer previously cached when next proposer was requested at current epoch

* moved next epoch proposers from the chain to the state

* Compute next proposer on demand and cache

* Fix lint errors

* update implementation to work with changes from master

* caching epoch seed in context so that getNextEpochBeaconProposer can be independent of state

* Revert \"caching epoch seed in context so that getNextEpochBeaconProposer can be independent of state\"

This reverts commit 02a722afabe1b6bdf42a98e1d5dbdc2805617872.

* caching epoch seed in context so that getNextEpochBeaconProposer can be independent of state

* removing the need to delete from nextEpochProposers in call to getBeaconProposer

* no need to recompute currrentProposerSeed again

* Revert \"no need to recompute currrentProposerSeed again\"

This reverts commit b6b1b8c175e6d741e3d001252678812fbfe49de5.

* removed empty file left after fixing merge conflicts

* remove some unnecessary variable from the epoch context.

* add some comments

* Fix lint

* import from the right location

* Review PR

* Merge imports

* Delete get proposers api impl test

* Remove duplicated comment

Co-authored-by: dapplion <35266934+dapplion@users.noreply.github.com>

* Extend timeout for gitData unit test (#4026)

* Fix readAndGetGitData (#4025)

* Ensure light client update is in a single period (#4029)

* Handle merge block fetch error (#4016)

* Handle merge block fetch error

* Log errors on fetch errors for terminal pow

* docs: Update nodeJS minimum requirement (#4037)

* Remove child_process call in gitData before step (#4033)

* Oppool aggregates use BitArray only for set logic (#4034)

* Use BitArrays for aggregate merging

* Test intersectUint8Arrays

* Review PR

* Update tests

* Remove un-used code

* Modify gossipsub params following consensus spec v1.1.10 (#4011)

* Modify gossipsub params following consensus spec v1.1.10

* Specify GOSSIPSUB_HEARTBEAT_INTERVAL as a constant

* Throw a more informative error on invalid keystore (#4022)

* Throw a more informative error on invalid keystore

* Make error more descriptive

* Use template string

* Update keys.ts

* Update keys.ts

Co-authored-by: Lion - dapplion <35266934+dapplion@users.noreply.github.com>

* Ignore gossip AggregateAndProof if aggregate is seen (#4019)

* Ignore gossip AggregateAndProof if aggregate is seen

* Check for non-strict superset of seen attestation data

* Fix validateGossipAggregateAndProof benchmark test

* Fix import

* Ultilize intersectUint8Arrays()

* Implement SeenContributionAndProof.participantsKnown

* Add metrics to seen cache

* Add perf tests

* Change method name to isSuperSetOrEqual()

* Refactor metric names

* Specify lerna exact version for release-nightly workflow (#4049)

* Add ropsten network (#4051)

* Force all packages to be versioned for exact (#4052)

* Update discv5 to v0.7.1 (#4044)

* Add ability to update the fee recipient for execution via beacon and/or validator defaults (#3958)

* Add and use a default fee recipient for a validator process

* transfer the proposer cache to beacon chain

* mock chain fixes

* test and perf fixes

* fee recipient validation change

* track and use free recipient as string instead of ExecutionAddress

* fix unit test

* fix merge test

* use dummy address

* refac and add proposer cache pruning

* tests for beacon proposer cache

* merge interop fee recipient check

* fix the optional

* feeRecipient confirmation and small refac

* add the missing map

* add flag to enable strict fee recipient check

* Small refactor to setup merge for ropsten using baked in configs (#4053)

* Issue advance fcU for builing the EL block (#3965)

rebaseing to the refactored prepare beacon proposer

refac payload id cache as separate class and add pruning

issue payload fcus if synced

rename issueNext.. to maybeIssueNext...

* Simplify release process (#4030)

* Simplify release process

* Remove old postrelease script

* Add lerna version check

* Tweak RELEASE.md

* Add force-publish to lerna version command

* Update the proposer boost percentage to 40% (#4055)

* ESM Support (#3978)

* ESM changes

* Fix root lodestar script

* Fix some linter errors

* trying directly re-exporting under an alias from networks module

* Fix types exports

* Fix more linter errors

* Fix spec test download

* Update bls to 7.1.0

* Fix spec tests

* temp reverting eslint parser option to 10 and disabling the check of .js file extenstion. Should fix lint errors

* temp commented out file-extension-in-import

* Disable readme checks

* Fix check-build

* Fix params e2e tests

* Bump @chainsafe/threads

* Bump bls to v7.1.1

* Add timeouts after node initialization but before sim test run

* Tweak timeouts

* Tweak timeout

* Tweak sim merge timeout

* Tweak sim merge timeout

* Tweak sim merge timeout

* Tweak sim merge timeout

* Add more timeouts

* Add another timeout

* Fix linter errors

* Fix some tests

* Fix some linter errors and spec tests

* Fix benchmarks

* Fix linter errors

* Update each bls dependency

* Tweak timeouts

* Add another timeout

* More timeouts

* Fix bls pool size

* Set root package.json to ESM

* Remove old linter comment

* Revert \"Set root package.json to ESM\"

This reverts commit 347b0fdd18de7e26d1bfb8b15a19e0083cb59168.

* Remove stray file (probably old)

* Undo unnecessary diff

* Add comment on __dirname replacement

* Import type @chainsafe/bls/types

* Use lodestar path imports

* Revert multifork to lodestar package

* Format .mocharc.yaml

* Use same @chainsafe/as-sha256 version

* Fix lodash path imports

* Use src instead of lib

* Load db metrics

* Remove experimental-specifier-resolution

* Remove lodestat/chain export

* Add stray missing file extension

* Revert ValidatorDir changes

* Fix stray missing file extensions

* Fix check-types

Co-authored-by: Dadepo Aderemi <dadepo@gmail.com>
Co-authored-by: dapplion <35266934+dapplion@users.noreply.github.com>

* chore(release): v0.37.0-beta.0

* Bump to v0.37.0

Co-authored-by: tuyennhv <vutuyen2636@gmail.com>
Co-authored-by: g11tech <76567250+g11tech@users.noreply.github.com>
Co-authored-by: dadepo <dadepo@gmail.com>
Co-authored-by: Cayman <caymannava@gmail.com>
Co-authored-by: Phil Ngo <58080811+philknows@users.noreply.github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: g11tech <gajinder@g11.in>")`
…

`[83ef1ce](/ChainSafe/lodestar/commit/83ef1ceb7f646ea1e42f8e848aab07e2b2b9cc67)`

```
* New metric filtering missed blocks ([#3927](https://github.com/ChainSafe/lodestar/pull/3927))

* Log block delay second

* Add elappsedTimeTillBecomeHead metric

* Add 'till become head' metric to dashboard

* chore: correct the metric name to elapsedTimeTillBecomeHead

* Add and use secFromSlot to clock

* Track block source

* Revert "Track block source"

This reverts commit [5fe6220](https://github.com/ChainSafe/lodestar/commit/5fe62204e827e313fe6d081bb258e5306f3a734a).

* Update bucket values

* Limit how old blocks are tracked in elapsedTimeTillBecomeHead

* Simplify secFromSlot

Co-authored-by: dapplion <35266934+dapplion@users.noreply.github.com>

* Fix the terminal validations of the merge block ([#3984](https://github.com/ChainSafe/lodestar/pull/3984))

* Fix the terminal validations of the merge block

* activate merge transition block spec tests

* some comments to explain the merge block validations movement

* Extend error messages when voluntary exit errors because of present of lockfile ([#3935](https://github.com/ChainSafe/lodestar/pull/3935))

* Extend error and Clean up

* Only showing the message to use --force to override in case of voluntary exit

* Simplify gitData and version guessing ([#3992](https://github.com/ChainSafe/lodestar/pull/3992))

Don't print double slash in version string

Dont add git-data.json to NPM releases

Write git-data.json only in from source docker build

Remove numCommits

Test git-data.json generation from within the test

Move comment

Revert "Dont add git-data.json to NPM releases"

This reverts commit [5fe2d38](https://github.com/ChainSafe/lodestar/commit/5fe2d388825f3e3a834058478071e8364b0d761c).

Simplify gitData and version guessing

Run cmd

* Activate ex-ante fork-choice spec tests ([#4003](https://github.com/ChainSafe/lodestar/pull/4003))

* Prepare custom version on next release ([#3990](https://github.com/ChainSafe/lodestar/pull/3990))

* Prepare custom version on next release

* Test in branch

* Don't set version in advance

* Remove --canary flag

* Change and commit version

* Setup git config

* Revert temp changes

* Lightclient e2e: increase validator client ([#4006](https://github.com/ChainSafe/lodestar/pull/4006))

* Bump to v0.37.0 nightly builds ([#4013](https://github.com/ChainSafe/lodestar/pull/4013))

* Guarantee full spec tests coverage ([#4012](https://github.com/ChainSafe/lodestar/pull/4012))

* Ensure all spec tests are run

* Fix general bls tests

* Improve docs of specTestIterator

* Fix fork_choice tests

* Remove Check spec tests step

* Add merge transition/finalization banners ([#3963](https://github.com/ChainSafe/lodestar/pull/3963))

* Add merge transition/finalization banners

* fix signatures

* Benchmark initial sync ([#3995](https://github.com/ChainSafe/lodestar/pull/3995))

* Basic range sync perf test

* Benchmark initial sync

* Add INFURA_ETH2_CREDENTIALS to benchmark GA

* Download test cache file from alternative source

* Re-org beforeValue and testCase helpers

* Break light-client - state-transition test dependency

* Revert adding downloadTestCacheFile

* Download files from a Github release

* Clarify [#3977](https://github.com/ChainSafe/lodestar/pull/3977) with unbounded uint issue ([#4018](https://github.com/ChainSafe/lodestar/pull/4018))

* Update mainnet-shadow-5 configs ([#4021](https://github.com/ChainSafe/lodestar/pull/4021))

* Bump moment from 2.29.1 to 2.29.2 ([#3901](https://github.com/ChainSafe/lodestar/pull/3901))

Bumps [moment](<https://github.com/moment/moment>) from 2.29.1 to 2.29.2.
- [Release notes](<https://github.com/moment/moment/releases>)
- [Changelog](<https://github.com/moment/moment/blob/develop/CHANGELOG.md>)
- [Commits]([moment/moment@2.29.1...2.29.2](https://github.com/moment/moment/compare/2.29.1...2.29.2))

---
updated-dependencies:
- dependency-name: moment
  dependency-type: indirect
...

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>

* Implement support for validator next-epoch proposer duties ([#3782](https://github.com/ChainSafe/lodestar/pull/3782))

* Implementation to be able to get block proposer an epoch ahead - still need optimization

* revert changes made to waitForSlot

* caching the results of computing future proposers. Also extended test

* using effectiveBalanceIncrements from state instead of recomputing it

* fix lint errors

* revert check not needed in getBeaconProposer

* Update tests to include assertion messages

* Move caching of next proposer duties to BeaconChain class

* Delete the block proposer previously cached when next proposer was requested at current epoch

* moved next epoch proposers from the chain to the state

* Compute next proposer on demand and cache

* Fix lint errors

* update implementation to work with changes from master

* caching epoch seed in context so that getNextEpochBeaconProposer can be independent of state

* Revert "caching epoch seed in context so that getNextEpochBeaconProposer can be independent of state"

This reverts commit [02a722a](https://github.com/ChainSafe/lodestar/commit/02a722afabe1b6bdf42a98e1d5dbdc2805617872).

* caching epoch seed in context so that getNextEpochBeaconProposer can be independent of state

* removing the need to delete from nextEpochProposers in call to getBeaconProposer

* no need to recompute currrentProposerSeed again

* Revert "no need to recompute currrentProposerSeed again"

This reverts commit [b6b1b8c](https://github.com/ChainSafe/lodestar/commit/b6b1b8c175e6d741e3d001252678812fbfe49de5).

* removed empty file left after fixing merge conflicts

* remove some unnecessary variable from the epoch context.

* add some comments

* Fix lint

* import from the right location

* Review PR

* Merge imports

* Delete get proposers api impl test

* Remove duplicated comment

Co-authored-by: dapplion <35266934+dapplion@users.noreply.github.com>

* Extend timeout for gitData unit test ([#4026](https://github.com/ChainSafe/lodestar/pull/4026))

* Fix readAndGetGitData ([#4025](https://github.com/ChainSafe/lodestar/pull/4025))

* Ensure light client update is in a single period ([#4029](https://github.com/ChainSafe/lodestar/pull/4029))

* Handle merge block fetch error ([#4016](https://github.com/ChainSafe/lodestar/pull/4016))

* Handle merge block fetch error

* Log errors on fetch errors for terminal pow

* docs: Update nodeJS minimum requirement ([#4037](https://github.com/ChainSafe/lodestar/pull/4037))

* Remove child_process call in gitData before step ([#4033](https://github.com/ChainSafe/lodestar/pull/4033))

* Oppool aggregates use BitArray only for set logic ([#4034](https://github.com/ChainSafe/lodestar/pull/4034))

* Use BitArrays for aggregate merging

* Test intersectUint8Arrays

* Review PR

* Update tests

* Remove un-used code

* Modify gossipsub params following consensus spec v1.1.10 ([#4011](https://github.com/ChainSafe/lodestar/pull/4011))

* Modify gossipsub params following consensus spec v1.1.10

* Specify GOSSIPSUB_HEARTBEAT_INTERVAL as a constant

* Throw a more informative error on invalid keystore ([#4022](https://github.com/ChainSafe/lodestar/pull/4022))

* Throw a more informative error on invalid keystore

* Make error more descriptive

* Use template string

* Update keys.ts

* Update keys.ts

Co-authored-by: Lion - dapplion <35266934+dapplion@users.noreply.github.com>

* Ignore gossip AggregateAndProof if aggregate is seen ([#4019](https://github.com/ChainSafe/lodestar/pull/4019))

* Ignore gossip AggregateAndProof if aggregate is seen

* Check for non-strict superset of seen attestation data

* Fix validateGossipAggregateAndProof benchmark test

* Fix import

* Ultilize intersectUint8Arrays()

* Implement SeenContributionAndProof.participantsKnown

* Add metrics to seen cache

* Add perf tests

* Change method name to isSuperSetOrEqual()

* Refactor metric names

* Specify lerna exact version for release-nightly workflow ([#4049](https://github.com/ChainSafe/lodestar/pull/4049))

* Add ropsten network ([#4051](https://github.com/ChainSafe/lodestar/pull/4051))

* Force all packages to be versioned for exact ([#4052](https://github.com/ChainSafe/lodestar/pull/4052))

* Update discv5 to v0.7.1 ([#4044](https://github.com/ChainSafe/lodestar/pull/4044))

* Add ability to update the fee recipient for execution via beacon and/or validator defaults ([#3958](https://github.com/ChainSafe/lodestar/pull/3958))

* Add and use a default fee recipient for a validator process

* transfer the proposer cache to beacon chain

* mock chain fixes

* test and perf fixes

* fee recipient validation change

* track and use free recipient as string instead of ExecutionAddress

* fix unit test

* fix merge test

* use dummy address

* refac and add proposer cache pruning

* tests for beacon proposer cache

* merge interop fee recipient check

* fix the optional

* feeRecipient confirmation and small refac

* add the missing map

* add flag to enable strict fee recipient check

* Small refactor to setup merge for ropsten using baked in configs ([#4053](https://github.com/ChainSafe/lodestar/pull/4053))

* Issue advance fcU for builing the EL block ([#3965](https://github.com/ChainSafe/lodestar/pull/3965))

rebaseing to the refactored prepare beacon proposer

refac payload id cache as separate class and add pruning

issue payload fcus if synced

rename issueNext.. to maybeIssueNext...

* Simplify release process ([#4030](https://github.com/ChainSafe/lodestar/pull/4030))

* Simplify release process

* Remove old postrelease script

* Add lerna version check

* Tweak RELEASE.md

* Add force-publish to lerna version command

* Update the proposer boost percentage to 40% ([#4055](https://github.com/ChainSafe/lodestar/pull/4055))

* ESM Support ([#3978](https://github.com/ChainSafe/lodestar/pull/3978))

* ESM changes

* Fix root lodestar script

* Fix some linter errors

* trying directly re-exporting under an alias from networks module

* Fix types exports

* Fix more linter errors

* Fix spec test download

* Update bls to 7.1.0

* Fix spec tests

* temp reverting eslint parser option to 10 and disabling the check of .js file extenstion. Should fix lint errors

* temp commented out file-extension-in-import

* Disable readme checks

* Fix check-build

* Fix params e2e tests

* Bump @chainsafe/threads

* Bump bls to v7.1.1

* Add timeouts after node initialization but before sim test run

* Tweak timeouts

* Tweak timeout

* Tweak sim merge timeout

* Tweak sim merge timeout

* Tweak sim merge timeout

* Tweak sim merge timeout

* Add more timeouts

* Add another timeout

* Fix linter errors

* Fix some tests

* Fix some linter errors and spec tests

* Fix benchmarks

* Fix linter errors

* Update each bls dependency

* Tweak timeouts

* Add another timeout

* More timeouts

* Fix bls pool size

* Set root package.json to ESM

* Remove old linter comment

* Revert "Set root package.json to ESM"

This reverts commit [347b0fd](https://github.com/ChainSafe/lodestar/commit/347b0fdd18de7e26d1bfb8b15a19e0083cb59168).

* Remove stray file (probably old)

* Undo unnecessary diff

* Add comment on __dirname replacement

* Import type @chainsafe/bls/types

* Use lodestar path imports

* Revert multifork to lodestar package

* Format .mocharc.yaml

* Use same @chainsafe/as-sha256 version

* Fix lodash path imports

* Use src instead of lib

* Load db metrics

* Remove experimental-specifier-resolution

* Remove lodestat/chain export

* Add stray missing file extension

* Revert ValidatorDir changes

* Fix stray missing file extensions

* Fix check-types

Co-authored-by: Dadepo Aderemi <dadepo@gmail.com>
Co-authored-by: dapplion <35266934+dapplion@users.noreply.github.com>

* chore(release): v0.37.0-beta.0

* Bump to v0.37.0

Co-authored-by: tuyennhv <vutuyen2636@gmail.com>
Co-authored-by: g11tech <76567250+g11tech@users.noreply.github.com>
Co-authored-by: dadepo <dadepo@gmail.com>
Co-authored-by: Cayman <caymannava@gmail.com>
Co-authored-by: Phil Ngo <58080811+philknows@users.noreply.github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: g11tech <gajinder@g11.in>
```

[![@amirkhan7javi](https://avatars.githubusercontent.com/u/99166918?s=80&u=d1f6c40f683fd26d218ad51947f1f36a7af803c7&v=4)](/amirkhan7javi)

Copy link

### **[amirkhan7javi](/amirkhan7javi)** commented [Oct 18, 2022](#issuecomment-1281693629)

| In my discontinuation of Internet and access The runaway done should check the settings |
| --- |

All reactions

Sorry, something went wrong.

[![@kalbroni7](https://avatars.githubusercontent.com/u/110961941?s=40&v=4)](/kalbroni7)
[kalbroni7](/kalbroni7)
mentioned this pull request
[Jul 14, 2024](#ref-pullrequest-2407613655)

[[Snyk] Upgrade @chainsafe/lodestar-types from 0.5.0 to 0.39.0
kalbroni7/rocketpool#1](/kalbroni7/rocketpool/pull/1)
 Open

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FChainSafe%2Flodestar%2Fpull%2F3977)

Reviewers

[![@g11tech](https://avatars.githubusercontent.com/u/76567250?s=40&v=4)](/g11tech) [g11tech](/g11tech)

g11tech approved these changes

[![@wemeetagain](https://avatars.githubusercontent.com/u/1348242?s=40&v=4)](/wemeetagain) [wemeetagain](/wemeetagain)

wemeetagain approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

4 participants

[![@dapplion](https://avatars.githubusercontent.com/u/35266934?s=52&v=4)](/dapplion) [![@amirkhan7javi](https://avatars.githubusercontent.com/u/99166918?s=52&v=4)](/amirkhan7javi) [![@wemeetagain](https://avatars.githubusercontent.com/u/1348242?s=52&v=4)](/wemeetagain) [![@g11tech](https://avatars.githubusercontent.com/u/76567250?s=52&v=4)](/g11tech)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_dc95665a_20250114_200611.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FChainSafe%2Flodestar%2Freleases%2Ftag%2Fv0.36.0)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FChainSafe%2Flodestar%2Freleases%2Ftag%2Fv0.36.0)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=ChainSafe%2Flodestar)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ChainSafe](/ChainSafe)
/
**[lodestar](/ChainSafe/lodestar)**
Public

* [Notifications](/login?return_to=%2FChainSafe%2Flodestar) You must be signed in to change notification settings
* [Fork
  317](/login?return_to=%2FChainSafe%2Flodestar)
* [Star
   1.2k](/login?return_to=%2FChainSafe%2Flodestar)

* [Code](/ChainSafe/lodestar/tree/v0.36.0)
* [Issues
  223](/ChainSafe/lodestar/issues)
* [Pull requests
  25](/ChainSafe/lodestar/pulls)
* [Discussions](/ChainSafe/lodestar/discussions)
* [Actions](/ChainSafe/lodestar/actions)
* [Projects
  0](/ChainSafe/lodestar/projects)
* [Wiki](/ChainSafe/lodestar/wiki)
* [Security](/ChainSafe/lodestar/security)
* [Insights](/ChainSafe/lodestar/pulse)

Additional navigation options

* [Code](/ChainSafe/lodestar/tree/v0.36.0)
* [Issues](/ChainSafe/lodestar/issues)
* [Pull requests](/ChainSafe/lodestar/pulls)
* [Discussions](/ChainSafe/lodestar/discussions)
* [Actions](/ChainSafe/lodestar/actions)
* [Projects](/ChainSafe/lodestar/projects)
* [Wiki](/ChainSafe/lodestar/wiki)
* [Security](/ChainSafe/lodestar/security)
* [Insights](/ChainSafe/lodestar/pulse)

1. [Releases](/ChainSafe/lodestar/releases)
2. [v0.36.0](/ChainSafe/lodestar/releases/tag/v0.36.0)

# Release v0.36.0

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ChainSafe/lodestar/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v0.36.0)

 Loading

[View all tags](/ChainSafe/lodestar/tags)

![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)
[github-actions](/apps/github-actions)
released this
11 May 17:16

[v0.36.0](/ChainSafe/lodestar/tree/v0.36.0)

[`28e2c74`](/ChainSafe/lodestar/commit/28e2c74cf0f1bede8b09c8c9fec26f54b367e3fd)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

# Changelog

[Full Changelog](https://github.com/ChainSafe/lodestar/compare/v0.35.0...v0.36.0)

**Merged pull requests:**

* sleep(0) must yield event loop ([#3987](https://github.com/ChainSafe/lodestar/pull/3987)) ([@dapplion](https://github.com/dapplion))
* Fix response casing for complaince with beacon-apis ([#3980](https://github.com/ChainSafe/lodestar/pull/3980)) ([@g11tech](https://github.com/g11tech))
* add mainnet-shadow-4 configs ([#3983](https://github.com/ChainSafe/lodestar/pull/3983)) ([@philknows](https://github.com/philknows))
* Add validator option not to submit attestation early ([#3944](https://github.com/ChainSafe/lodestar/pull/3944)) (@tuyennhv)
* Prune logic when we have too many peers ([#3955](https://github.com/ChainSafe/lodestar/pull/3955)) (@tuyennhv)
* Enable proposerBoostEnabled ([#3960](https://github.com/ChainSafe/lodestar/pull/3960)) (@tuyennhv)
* Create codeql-analysis.yml ([#3975](https://github.com/ChainSafe/lodestar/pull/3975)) ([@dapplion](https://github.com/dapplion))
* Optimize uint ([#3977](https://github.com/ChainSafe/lodestar/pull/3977)) ([@dapplion](https://github.com/dapplion))
* Making comparison between local/remote BeaconParam less error prone. ([#3973](https://github.com/ChainSafe/lodestar/pull/3973)) ([@dadepo](https://github.com/dadepo))
* LightClientServer only import block if its new head ([#3967](https://github.com/ChainSafe/lodestar/pull/3967)) (@tuyennhv)
* Fix bounded peersToConnect variable ([#3957](https://github.com/ChainSafe/lodestar/pull/3957)) (@tuyennhv)
* be more lenient with accepted filename when reading voting keys. fixes [#3941](https://github.com/ChainSafe/lodestar/issues/3941) ([#3970](https://github.com/ChainSafe/lodestar/pull/3970)) ([@dadepo](https://github.com/dadepo))
* Use chain.clock where possible ([#3968](https://github.com/ChainSafe/lodestar/pull/3968)) (@tuyennhv)
* Add geth ttd override flag and update mainnet shadow fork 3 ttd ([#3972](https://github.com/ChainSafe/lodestar/pull/3972)) ([@g11tech](https://github.com/g11tech))
* Bump cross-fetch from 3.1.4 to 3.1.5 ([#3959](https://github.com/ChainSafe/lodestar/pull/3959)) ([@dependabot](https://github.com/dependabot)[bot])
* Snappy frame encode big payloads as chunks as per the standard ([#3912](https://github.com/ChainSafe/lodestar/pull/3912)) ([@g11tech](https://github.com/g11tech))
* add mainnet-shadow-3 configs ([#3966](https://github.com/ChainSafe/lodestar/pull/3966)) ([@philknows](https://github.com/philknows))
* Enable using an engine endpoint for eth1 deposit/merge tracker ([#3949](https://github.com/ChainSafe/lodestar/pull/3949)) ([@g11tech](https://github.com/g11tech))
* Fix deserializeEnrSubnets ([#3956](https://github.com/ChainSafe/lodestar/pull/3956)) (@tuyennhv)
* Add validator client dashboard ([#3954](https://github.com/ChainSafe/lodestar/pull/3954)) ([@dapplion](https://github.com/dapplion))
* Add light client finalized update route ([#3882](https://github.com/ChainSafe/lodestar/pull/3882)) ([@g11tech](https://github.com/g11tech))
* Updating outdated section of docs and code ([#3951](https://github.com/ChainSafe/lodestar/pull/3951)) ([@dadepo](https://github.com/dadepo))
* Call validatorStore sign in parallel ([#3926](https://github.com/ChainSafe/lodestar/pull/3926)) ([@dapplion](https://github.com/dapplion))
* Store PartialLightClientUpdate by SyncAggregate period ([#3936](https://github.com/ChainSafe/lodestar/pull/3936)) (@tuyennhv)
* Eth1 tracker improvements ([#3930](https://github.com/ChainSafe/lodestar/pull/3930)) ([@g11tech](https://github.com/g11tech))
* Fix Error: bytes is not iterable ([#3938](https://github.com/ChainSafe/lodestar/pull/3938)) (@tuyennhv)
* Add lightclient cmd ([#3937](https://github.com/ChainSafe/lodestar/pull/3937)) (@tuyennhv)
* Integrate `besu` with the merge script along with some general cleanup ([#3942](https://github.com/ChainSafe/lodestar/pull/3942)) ([@g11tech](https://github.com/g11tech))

### Contributors

* [![@dadepo](https://avatars.githubusercontent.com/u/272535?s=64&v=4)](https://github.com/dadepo)
* [![@twoeths](https://avatars.githubusercontent.com/u/10568965?s=64&v=4)](https://github.com/twoeths)
* [![@dependabot](https://avatars.githubusercontent.com/u/27347476?s=64&v=4)](https://github.com/dependabot)
* [![@dapplion](https://avatars.githubusercontent.com/u/35266934?s=64&v=4)](https://github.com/dapplion)
* [![@philknows](https://avatars.githubusercontent.com/u/58080811?s=64&v=4)](https://github.com/philknows)
* [![@g11tech](https://avatars.githubusercontent.com/u/76567250?s=64&v=4)](https://github.com/g11tech)

dadepo, twoeths, and 4 other contributors

 Assets
2

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


