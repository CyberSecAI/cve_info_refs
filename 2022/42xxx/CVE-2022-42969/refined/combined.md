=== Content from github.com_c6ebf74e_20250114_181546.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpytest-dev%2Fpy%2Fissues%2F287)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpytest-dev%2Fpy%2Fissues%2F287)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=pytest-dev%2Fpy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[pytest-dev](/pytest-dev)
/
**[py](/pytest-dev/py)**
Public

* [Notifications](/login?return_to=%2Fpytest-dev%2Fpy) You must be signed in to change notification settings
* [Fork
  106](/login?return_to=%2Fpytest-dev%2Fpy)
* [Star
   70](/login?return_to=%2Fpytest-dev%2Fpy)

* [Code](/pytest-dev/py)
* [Issues
  5](/pytest-dev/py/issues)
* [Pull requests
  9](/pytest-dev/py/pulls)
* [Actions](/pytest-dev/py/actions)
* [Projects
  0](/pytest-dev/py/projects)
* [Security](/pytest-dev/py/security)
* [Insights](/pytest-dev/py/pulse)

Additional navigation options

* [Code](/pytest-dev/py)
* [Issues](/pytest-dev/py/issues)
* [Pull requests](/pytest-dev/py/pulls)
* [Actions](/pytest-dev/py/actions)
* [Projects](/pytest-dev/py/projects)
* [Security](/pytest-dev/py/security)
* [Insights](/pytest-dev/py/pulse)

# ReDoS vulnerability in svnurl.py¬†#287

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[ReDoS vulnerability in svnurl.py](#top)#287Copy link![@SCH227](https://avatars.githubusercontent.com/u/69127692?u=62cff0b75e0058d28468505a14213ce4f4b72390&v=4&size=80)
## Description

![@SCH227](https://avatars.githubusercontent.com/u/69127692?u=62cff0b75e0058d28468505a14213ce4f4b72390&v=4&size=48)[SCH227](https://github.com/SCH227)opened [on Sep 22, 2022](https://github.com/pytest-dev/py/issues/287#issue-1381674903)

Good night!

I found that [this regex](https://github.com/pytest-dev/py/blob/master/py/_path/svnurl.py#L316) is vulnerable to Regular Expression Denial of Service.

## PoC:

```
>>> from py._path.svnurl import InfoSvnCommand
>>> payl = "   2256      hpk        165 Nov 24 17:55 __init__.py" + " " * 5000
>>> InfoSvnCommand(payl)

```
## Attack vector:

An user accessing a (possibly remote) subversion repository that provides malicious "info" data.

Or an attacker injecting 'svn ls http://...' output (less realistic).

## Fix:

Use a pattern with non-overlapping groups. I can help in finding a better regex and testing if needed.

üëç5üëé24
## Metadata

### Assignees

No one assigned

### Labels

No labelsNo labels
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from pypi.org_45fe9fe5_20250114_181547.html ===

![Error Icon](/_fs-ch-1T1wmsGaOgGaSxcX/assets/errorIcon.svg)
JavaScript is disabled in your browser.
Please enable JavaScript to proceed.

A required part of this site couldn‚Äôt load. This may be due to a browser
extension, network issues, or browser settings. Please check your
connection, disable any ad blockers, or try using a different browser.



=== Content from news.ycombinator.com_70eeec0a_20250114_181546.html ===


| |  | **[Hacker News](news)** [new](newest) | [past](front) | [comments](newcomments) | <ask> | <show> | <jobs> | <submit> | [login](login?goto=item%3Fid%3D34163710) | | --- | --- | --- | |
| --- | --- | --- | --- |
|
| |  |  | [gm678](user?id=gm678) [on Dec 29, 2022](item?id=34163710)   | [parent](item?id=34161221) | [context](context?id=34163710) | [favorite](fave?id=34163710&auth=c4b1dc138e5a964e7bba6800a59f480830e58524) | on: [ReDoS ‚Äúvulnerabilities‚Äù and misaligned incentives](item?id=34161221)  One example of this was a CVE for ReDoS in the `py` support library, which caused failed CI runs and "noise for hundreds of thousands of pytest users" despite being of questionable severity (as original article explains) and not actually used anywhere in the wild. <https://github.com/pytest-dev/py/issues/287> | | --- | --- | --- |  | |  |  | [woodruffw](user?id=woodruffw) [on Dec 29, 2022](item?id=34164612)   [‚Äì]  Yes! That was the report that originally inspired me to write this post. There was some ambiguity in that case, because the original reporter claims that they never actually hit ‚Äúpublish‚Äù on their drafted CVE. But it‚Äôs out there now, and nobody has responded to my (repeated) requests to revoke it, given the lack of *any* evidence of exploitability. | | --- | --- | --- | | | --- | --- | --- | --- | | |  |  | [sylware](user?id=sylware) [on Dec 29, 2022](item?id=34171942)   | [parent](#34164612) [‚Äì]  "lack of any evidence of exploitability" or not detected yet? I do understand that a CVE can be non pertinent since it could require a technical context, which reasonably cannot exist, to make any "production" exploits using it that "just work". I guess this is one of them? At the time I was meeting computer security ppl (decade ago), they told me they usually do not publish "production" exploits, they keep that for themselves or the vendor (if it is listening), but they have some. | | --- | --- | --- | | | |  |  | [masklinn](user?id=masklinn) [on Dec 29, 2022](item?id=34172130)   | [root](#34164612) | [parent](#34171942) [‚Äì]  > "lack of any evidence of exploitability" or not detected yet? Lack of evidence and likelihood. This is a "vulnerable" module for interaction with paths in SVN repositories (in order to grab SVN metadata) in the utility library of a testing framework. So the normal use case is that the "exploit" would be the repository itself, likely because your repo server has been compromised, and it would require that the test suite binds tightly to SVN for some reason. I don't think an ReDOS in your test suite is the biggest issue you're facing if your repository has been compromised. | | --- | --- | --- | | | |  |  | [sylware](user?id=sylware) [on Dec 29, 2022](item?id=34175878)   | [root](#34164612) | [parent](#34172130) [‚Äì]  I meant by that, it needs reading between the lines: some ppl were exploiting the "convenient bug" in other kind of benign systems while publishing, but they had real exploits using the "same convenient bug" on more troublesome production systems. For instance, in a fantasy world, path parsing in SVN has a "convenient bug" and you can find the same "convenient bug" deep in blink URL parsing. | | --- | --- | --- | | |
| |  | | --- |   [Guidelines](newsguidelines.html) | [FAQ](newsfaq.html) | [Lists](lists) | [API](https://github.com/HackerNews/API) | [Security](security.html) | [Legal](https://www.ycombinator.com/legal/) | [Apply to YC](https://www.ycombinator.com/apply/) | Contact Search: |



=== Content from github.com_b7c33998_20250114_181544.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpytest-dev%2Fpy%2Fblob%2Fcb87a83960523a2367d0f19226a73aed4ce4291d%2Fpy%2F_path%2Fsvnurl.py)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpytest-dev%2Fpy%2Fblob%2Fcb87a83960523a2367d0f19226a73aed4ce4291d%2Fpy%2F_path%2Fsvnurl.py)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=pytest-dev%2Fpy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[pytest-dev](/pytest-dev)
/
**[py](/pytest-dev/py)**
Public

* [Notifications](/login?return_to=%2Fpytest-dev%2Fpy) You must be signed in to change notification settings
* [Fork
  106](/login?return_to=%2Fpytest-dev%2Fpy)
* [Star
   70](/login?return_to=%2Fpytest-dev%2Fpy)

* [Code](/pytest-dev/py)
* [Issues
  5](/pytest-dev/py/issues)
* [Pull requests
  9](/pytest-dev/py/pulls)
* [Actions](/pytest-dev/py/actions)
* [Projects
  0](/pytest-dev/py/projects)
* [Security](/pytest-dev/py/security)
* [Insights](/pytest-dev/py/pulse)

Additional navigation options

* [Code](/pytest-dev/py)
* [Issues](/pytest-dev/py/issues)
* [Pull requests](/pytest-dev/py/pulls)
* [Actions](/pytest-dev/py/actions)
* [Projects](/pytest-dev/py/projects)
* [Security](/pytest-dev/py/security)
* [Insights](/pytest-dev/py/pulse)

## Files

¬†cb87a83
## Breadcrumbs

1. [py](/pytest-dev/py/tree/cb87a83960523a2367d0f19226a73aed4ce4291d)
2. /[py](/pytest-dev/py/tree/cb87a83960523a2367d0f19226a73aed4ce4291d/py)
3. /[\_path](/pytest-dev/py/tree/cb87a83960523a2367d0f19226a73aed4ce4291d/py/_path)
/
# svnurl.py

Copy path Blame  Blame
## Latest commit

## History

[History](/pytest-dev/py/commits/cb87a83960523a2367d0f19226a73aed4ce4291d/py/_path/svnurl.py)380 lines (340 loc) ¬∑ 14.4 KB¬†cb87a83
## Breadcrumbs

1. [py](/pytest-dev/py/tree/cb87a83960523a2367d0f19226a73aed4ce4291d)
2. /[py](/pytest-dev/py/tree/cb87a83960523a2367d0f19226a73aed4ce4291d/py)
3. /[\_path](/pytest-dev/py/tree/cb87a83960523a2367d0f19226a73aed4ce4291d/py/_path)
/
# svnurl.py

Top
## File metadata and controls

* Code
* Blame

380 lines (340 loc) ¬∑ 14.4 KB[Raw](https://github.com/pytest-dev/py/raw/cb87a83960523a2367d0f19226a73aed4ce4291d/py/_path/svnurl.py)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379"""module defining a subversion path object based on the externalcommand 'svn'. This modules aims to work with svn 1.3 and higherbut might also interact well with earlier versions."""
import os, sys, time, reimport pyfrom py import path, processfrom py.\_path import commonfrom py.\_path import svnwc as svncommonfrom py.\_path.cacheutil import BuildcostAccessCache, AgingCache
DEBUG=False
class SvnCommandPath(svncommon.SvnPathBase): """ path implementation that offers access to (possibly remote) subversion repositories. """
 \_lsrevcache = BuildcostAccessCache(maxentries=128) \_lsnorevcache = AgingCache(maxentries=1000, maxseconds=60.0)
 def \_\_new\_\_(cls, path, rev=None, auth=None): self = object.\_\_new\_\_(cls) if isinstance(path, cls): rev = path.rev auth = path.auth path = path.strpath svncommon.checkbadchars(path) path = path.rstrip('/') self.strpath = path self.rev = rev self.auth = auth return self
 def \_\_repr\_\_(self): if self.rev == -1: return 'svnurl(%r)' % self.strpath else: return 'svnurl(%r, %r)' % (self.strpath, self.rev)
 def \_svnwithrev(self, cmd, \*args): """ execute an svn command, append our own url and revision """ if self.rev is None: return self.\_svnwrite(cmd, \*args) else: args = ['-r', self.rev] + list(args) return self.\_svnwrite(cmd, \*args)
 def \_svnwrite(self, cmd, \*args): """ execute an svn command, append our own url """ l = ['svn %s' % cmd] args = ['"%s"' % self.\_escape(item) for item in args] l.extend(args) l.append('"%s"' % self.\_encodedurl()) # fixing the locale because we can't otherwise parse string = " ".join(l) if DEBUG: print("execing %s" % string) out = self.\_svncmdexecauth(string) return out
 def \_svncmdexecauth(self, cmd): """ execute an svn command 'as is' """ cmd = svncommon.fixlocale() + cmd if self.auth is not None: cmd += ' ' + self.auth.makecmdoptions() return self.\_cmdexec(cmd)
 def \_cmdexec(self, cmd): try: out = process.cmdexec(cmd) except py.process.cmdexec.Error: e = sys.exc\_info()[1] if (e.err.find('File Exists') != -1 or e.err.find('File already exists') != -1): raise py.error.EEXIST(self) raise return out
 def \_svnpopenauth(self, cmd): """ execute an svn command, return a pipe for reading stdin """ cmd = svncommon.fixlocale() + cmd if self.auth is not None: cmd += ' ' + self.auth.makecmdoptions() return self.\_popen(cmd)
 def \_popen(self, cmd): return os.popen(cmd)
 def \_encodedurl(self): return self.\_escape(self.strpath)
 def \_norev\_delentry(self, path): auth = self.auth and self.auth.makecmdoptions() or None self.\_lsnorevcache.delentry((str(path), auth))
 def open(self, mode='r'): """ return an opened file with the given mode. """ if mode not in ("r", "rU",): raise ValueError("mode %r not supported" % (mode,)) assert self.check(file=1) # svn cat returns an empty file otherwise if self.rev is None: return self.\_svnpopenauth('svn cat "%s"' % ( self.\_escape(self.strpath), )) else: return self.\_svnpopenauth('svn cat -r %s "%s"' % ( self.rev, self.\_escape(self.strpath)))
 def dirpath(self, \*args, \*\*kwargs): """ return the directory path of the current path joined with any given path arguments. """ l = self.strpath.split(self.sep) if len(l) < 4: raise py.error.EINVAL(self, "base is not valid") elif len(l) == 4: return self.join(\*args, \*\*kwargs) else: return self.new(basename='').join(\*args, \*\*kwargs)
 # modifying methods (cache must be invalidated) def mkdir(self, \*args, \*\*kwargs): """ create & return the directory joined with args. pass a 'msg' keyword argument to set the commit message. """ commit\_msg = kwargs.get('msg', "mkdir by py lib invocation") createpath = self.join(\*args) createpath.\_svnwrite('mkdir', '-m', commit\_msg) self.\_norev\_delentry(createpath.dirpath()) return createpath
 def copy(self, target, msg='copied by py lib invocation'): """ copy path to target with checkin message msg.""" if getattr(target, 'rev', None) is not None: raise py.error.EINVAL(target, "revisions are immutable") self.\_svncmdexecauth('svn copy -m "%s" "%s" "%s"' %(msg, self.\_escape(self), self.\_escape(target))) self.\_norev\_delentry(target.dirpath())
 def rename(self, target, msg="renamed by py lib invocation"): """ rename this path to target with checkin message msg. """ if getattr(self, 'rev', None) is not None: raise py.error.EINVAL(self, "revisions are immutable") self.\_svncmdexecauth('svn move -m "%s" --force "%s" "%s"' %( msg, self.\_escape(self), self.\_escape(target))) self.\_norev\_delentry(self.dirpath()) self.\_norev\_delentry(self)
 def remove(self, rec=1, msg='removed by py lib invocation'): """ remove a file or directory (or a directory tree if rec=1) withcheckin message msg.""" if self.rev is not None: raise py.error.EINVAL(self, "revisions are immutable") self.\_svncmdexecauth('svn rm -m "%s" "%s"' %(msg, self.\_escape(self))) self.\_norev\_delentry(self.dirpath())
 def export(self, topath): """ export to a local path
 topath should not exist prior to calling this, returns a py.path.local instance """ topath = py.path.local(topath) args = ['"%s"' % (self.\_escape(self),), '"%s"' % (self.\_escape(topath),)] if self.rev is not None: args = ['-r', str(self.rev)] + args self.\_svncmdexecauth('svn export %s' % (' '.join(args),)) return topath
 def ensure(self, \*args, \*\*kwargs): """ ensure that an args-joined path exists (by default as a file). If you specify a keyword argument 'dir=True' then the path is forced to be a directory path. """ if getattr(self, 'rev', None) is not None: raise py.error.EINVAL(self, "revisions are immutable") target = self.join(\*args) dir = kwargs.get('dir', 0) for x in target.parts(reverse=True): if x.check(): break else: raise py.error.ENOENT(target, "has not any valid base!") if x == target: if not x.check(dir=dir): raise dir and py.error.ENOTDIR(x) or py.error.EISDIR(x) return x tocreate = target.relto(x) basename = tocreate.split(self.sep, 1)[0] tempdir = py.path.local.mkdtemp() try: tempdir.ensure(tocreate, dir=dir) cmd = 'svn import -m "%s" "%s" "%s"' % ( "ensure %s" % self.\_escape(tocreate), self.\_escape(tempdir.join(basename)), x.join(basename).\_encodedurl()) self.\_svncmdexecauth(cmd) self.\_norev\_delentry(x) finally: tempdir.remove() return target
 # end of modifying methods def \_propget(self, name): res = self.\_svnwithrev('propget', name) return res[:-1] # strip trailing newline
 def \_proplist(self): res = self.\_svnwithrev('proplist') lines = res.split('\n') lines = [x.strip() for x in lines[1:]] return svncommon.PropListDict(self, lines)
 def info(self): """ return an Info structure with svn-provided information. """ parent = self.dirpath() nameinfo\_seq = parent.\_listdir\_nameinfo() bn = self.basename for name, info in nameinfo\_seq: if name == bn: return info raise py.error.ENOENT(self)
 def \_listdir\_nameinfo(self): """ return sequence of name-info directory entries of self """ def builder(): try: res = self.\_svnwithrev('ls', '-v') except process.cmdexec.Error: e = sys.exc\_info()[1] if e.err.find('non-existent in that revision') != -1: raise py.error.ENOENT(self, e.err) elif e.err.find("E200009:") != -1: raise py.error.ENOENT(self, e.err) elif e.err.find('File not found') != -1: raise py.error.ENOENT(self, e.err) elif e.err.find('not part of a repository')!=-1: raise py.error.ENOENT(self, e.err) elif e.err.find('Unable to open')!=-1: raise py.error.ENOENT(self, e.err) elif e.err.lower().find('method not allowed')!=-1: raise py.error.EACCES(self, e.err) raise py.error.Error(e.err) lines = res.split('\n') nameinfo\_seq = [] for lsline in lines: if lsline: info = InfoSvnCommand(lsline) if info.\_name != '.': # svn 1.5 produces '.' dirs, nameinfo\_seq.append((info.\_name, info)) nameinfo\_seq.sort() return nameinfo\_seq auth = self.auth and self.auth.makecmdoptions() or None if self.rev is not None: return self.\_lsrevcache.getorbuild((self.strpath, self.rev, auth), builder) else: return self.\_lsnorevcache.getorbuild((self.strpath, auth), builder)
 def listdir(self, fil=None, sort=None): """ list directory contents, possibly filter by the given fil func and possibly sorted. """ if isinstance(fil, str): fil = common.FNMatcher(fil) nameinfo\_seq = self.\_listdir\_nameinfo() if len(nameinfo\_seq) == 1: name, info = nameinfo\_seq[0] if name == self.basename and info.kind == 'file': #if not self.check(dir=1): raise py.error.ENOTDIR(self) paths = [self.join(name) for (name, info) in nameinfo\_seq] if fil: paths = [x for x in paths if fil(x)] self.\_sortlist(paths, sort) return paths
 def log(self, rev\_start=None, rev\_end=1, verbose=False): """ return a list of LogEntry instances for this path.rev\_start is the starting revision (defaulting to the first one).rev\_end is the last revision (defaulting to HEAD).if verbose is True, then the LogEntry instances also know which files changed.""" assert self.check() #make it simpler for the pipe rev\_start = rev\_start is None and "HEAD" or rev\_start rev\_end = rev\_end is None and "HEAD" or rev\_end
 if rev\_start == "HEAD" and rev\_end == 1: rev\_opt = "" else: rev\_opt = "-r %s:%s" % (rev\_start, rev\_end) verbose\_opt = verbose and "-v" or "" xmlpipe = self.\_svnpopenauth('svn log --xml %s %s "%s"' % (rev\_opt, verbose\_opt, self.strpath)) from xml.dom import minidom tree = minidom.parse(xmlpipe) result = [] for logentry in filter(None, tree.firstChild.childNodes): if logentry.nodeType == logentry.ELEMENT\_NODE: result.append(svncommon.LogEntry(logentry)) return result
#01234567890123456789012345678901234567890123467# 2256 hpk 165 Nov 24 17:55 \_\_init\_\_.py# XXX spotted by Guido, SVN 1.3.0 has different aligning, breaks the code!!!# 1312 johnny 1627 May 05 14:32 test\_decorators.py#class InfoSvnCommand: # the '0?' part in the middle is an indication of whether the resource is # locked, see 'svn help ls' lspattern = re.compile( r'^ \*(?P<rev>\d+) +(?P<author>.+?) +(0? \*(?P<size>\d+))? ' r'\*(?P<date>\w+ +\d{2} +[\d:]+) +(?P<file>.\*)$') def \_\_init\_\_(self, line): # this is a typical line from 'svn ls http://...' #\_ 1127 jum 0 Jul 13 15:28 branch/ match = self.lspattern.match(line) data = match.groupdict() self.\_name = data['file'] if self.\_name[-1] == '/': self.\_name = self.\_name[:-1] self.kind = 'dir' else: self.kind = 'file' #self.has\_props = l.pop(0) == 'P' self.created\_rev = int(data['rev']) self.last\_author = data['author'] self.size = data['size'] and int(data['size']) or 0 self.mtime = parse\_time\_with\_missing\_year(data['date']) self.time = self.mtime \* 1000000
 def \_\_eq\_\_(self, other): return self.\_\_dict\_\_ == other.\_\_dict\_\_
#\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_## helper functions#\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_def parse\_time\_with\_missing\_year(timestr): """ analyze the time part from a single line of "svn ls -v" the svn output doesn't show the year makes the 'timestr' ambigous. """ import calendar t\_now = time.gmtime()
 tparts = timestr.split() month = time.strptime(tparts.pop(0), '%b')[1] day = time.strptime(tparts.pop(0), '%d')[2] last = tparts.pop(0) # year or hour:minute try: if ":" in last: raise ValueError() year = time.strptime(last, '%Y')[0] hour = minute = 0 except ValueError: hour, minute = time.strptime(last, '%H:%M')[3:5] year = t\_now[0]
 t\_result = (year, month, day, hour, minute, 0,0,0,0) if t\_result > t\_now: year -= 1 t\_result = (year, month, day, hour, minute, 0,0,0,0) return calendar.timegm(t\_result)
class PathEntry: def \_\_init\_\_(self, ppart): self.strpath = ppart.firstChild.nodeValue.encode('UTF-8') self.action = ppart.getAttribute('action').encode('UTF-8') if self.action == 'A': self.copyfrom\_path = ppart.getAttribute('copyfrom-path').encode('UTF-8') if self.copyfrom\_path: self.copyfrom\_rev = int(ppart.getAttribute('copyfrom-rev'))

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


