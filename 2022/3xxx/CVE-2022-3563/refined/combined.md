=== Content from git.kernel.org_50e728e7_20250114_184751.html ===


| [cgit logo](/) | [index](/) : [bluez.git](/pub/scm/bluetooth/bluez.git/) | master |
| --- | --- | --- |
| Bluetooth protocol stack for Linux | Marcel Holtmann |

| [about](/pub/scm/bluetooth/bluez.git/about/)[summary](/pub/scm/bluetooth/bluez.git/)[refs](/pub/scm/bluetooth/bluez.git/refs/?id=e3c92f1f786f0b55440bd908b55894d0c792cf0e)[log](/pub/scm/bluetooth/bluez.git/log/)[tree](/pub/scm/bluetooth/bluez.git/tree/?id=e3c92f1f786f0b55440bd908b55894d0c792cf0e)[commit](/pub/scm/bluetooth/bluez.git/commit/?id=e3c92f1f786f0b55440bd908b55894d0c792cf0e)[diff](/pub/scm/bluetooth/bluez.git/diff/?id=e3c92f1f786f0b55440bd908b55894d0c792cf0e)[stats](/pub/scm/bluetooth/bluez.git/stats/)[homepage](http://www.bluez.org) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Tedd Ho-Jeong An <tedd.an@intel.com> | 2022-06-22 21:45:20 -0700 |
| --- | --- | --- |
| committer | Luiz Augusto von Dentz <luiz.von.dentz@intel.com> | 2022-06-23 16:24:57 -0700 |
| commit | [e3c92f1f786f0b55440bd908b55894d0c792cf0e](/pub/scm/bluetooth/bluez.git/commit/?id=e3c92f1f786f0b55440bd908b55894d0c792cf0e) ([patch](/pub/scm/bluetooth/bluez.git/patch/?id=e3c92f1f786f0b55440bd908b55894d0c792cf0e)) | |
| tree | [acaa516d20226a2b03522cefc02d1014d26d50a6](/pub/scm/bluetooth/bluez.git/tree/?id=e3c92f1f786f0b55440bd908b55894d0c792cf0e) | |
| parent | [7f92f75e88b66ba73db5a676c35c704e213dcd70](/pub/scm/bluetooth/bluez.git/commit/?id=7f92f75e88b66ba73db5a676c35c704e213dcd70) ([diff](/pub/scm/bluetooth/bluez.git/diff/?id=e3c92f1f786f0b55440bd908b55894d0c792cf0e&id2=7f92f75e88b66ba73db5a676c35c704e213dcd70)) | |

mgmt-tester: Fix null dereference issue reported by scan-buildThis patch fixes the null dereference reported by the scan-build.
tools/mgmt-tester.c:12025:28: warning: Access to field 'cap\_len' results
in a dereference of a null pointer (loaded from variable 'rp')
[core.NullDereference]
if (sizeof(rp->cap\_len) + rp->cap\_len != length) {
^~~~~~~~~~~
[Diffstat](/pub/scm/bluetooth/bluez.git/diff/?id=e3c92f1f786f0b55440bd908b55894d0c792cf0e)

| -rw-r--r-- | [tools/mgmt-tester.c](/pub/scm/bluetooth/bluez.git/diff/tools/mgmt-tester.c?id=e3c92f1f786f0b55440bd908b55894d0c792cf0e) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/tools/mgmt-tester.c b/tools/mgmt-tester.cindex f45a6c015e..6018327f10 100644--- a/[tools/mgmt-tester.c](/pub/scm/bluetooth/bluez.git/tree/tools/mgmt-tester.c?id=7f92f75e88b66ba73db5a676c35c704e213dcd70)+++ b/[tools/mgmt-tester.c](/pub/scm/bluetooth/bluez.git/tree/tools/mgmt-tester.c?id=e3c92f1f786f0b55440bd908b55894d0c792cf0e)@@ -12020,12 +12020,14 @@ static void read\_50\_controller\_cap\_complete(uint8\_t status, uint16\_t length, tester\_warn("Failed to read advertising features: %s (0x%02x)", mgmt\_errstr(status), status); tester\_test\_failed();+ return; }  if (sizeof(rp->cap\_len) + rp->cap\_len != length) { tester\_warn("Controller capabilities malformed, size %zu != %u", sizeof(rp->cap\_len) + rp->cap\_len, length); tester\_test\_failed();+ return; }  while (offset < rp->cap\_len) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:46:28 +0000


