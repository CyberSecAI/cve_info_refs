=== Content from gitlab.com_0f2cd3b8_20250115_093730.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# Integrations leaking emails in WebHook Logs detail page

### Summary

While testing integrations' WebHook (`DroneCi`), I came across that some logs contain multiple commits data (author's email included and not redacted).

### Steps to reproduce

1. Go to the Integrations page of a project
2. Select an integration with a WebHook (e.g. DroneCi) and test the configuration
3. Click on `View details` of the webhook created
4. Scroll down to the request part and validate that emails are visible

### What is the current *bug* behavior?

Committers' emails are visible

### What is the expected *correct* behavior?

The emails should be redacted

### Relevant logs and/or screenshots

[![image](data:image/gif;base64...)](/-/project/278964/uploads/fa802ee671701961125a33a679c51508/image.png)

[Image redacted]

### Output of checks

#### Results of GitLab environment info

Expand for output related to GitLab environment info
```

(For installations with omnibus-gitlab package run and paste the output of:
`sudo gitlab-rake gitlab:env:info`)

(For installations from source run and paste the output of:
`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)

```
#### Results of GitLab application Check

Expand for output related to the GitLab application check
```

(For installations with omnibus-gitlab package run and paste the output of:
sudo gitlab-rake gitlab:check SANITIZE=true)

(For installations from source run and paste the output of:
sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true)

(we will only investigate if the tests are passing)

```
### Possible fixes

Update the `redact_author_email` method with the code bellow

```
def redact_author_email
  self.request_data.deep_transform_values! do |value|
    value =~ URI::MailTo::EMAIL_REGEXP ? _('[REDACTED]') : value
  end
end
```

/cc [@arturoherrero](/arturoherrero "Arturo Herrero") as the EM

Edited Nov 14, 2022 by [Nick Malcolm](/nmalcolm)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.



=== Content from gitlab.com_2999af96_20250115_093730.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

* [cves](/gitlab-org/cves/-/tree/master)
* [2022](/gitlab-org/cves/-/tree/master/2022)
* [**CVE-2022-3293.json**](/gitlab-org/cves/-/blob/master/2022/CVE-2022-3293.json)

Find file

[Blame](/gitlab-org/cves/-/blame/master/2022/CVE-2022-3293.json)
[Permalink](/gitlab-org/cves/-/blob/5dbfc725a86e6d942deec9c36b7f06f5b8d912fc/2022/CVE-2022-3293.json "Go to permalink <kbd class='flat ml-1' aria-hidden=true>y</kbd>")

* [![ GitLab Bot 's avatar](/uploads/-/system/user/avatar/1786152/avatar.png?width=64 " GitLab Bot ")](/gitlab-bot)

  Oct 17, 2022

  [a22d09a0](/gitlab-org/cves/-/commit/a22d09a086edb787ed9d18cb35b7f0b05c946a71)
  [Publishing 0 updated advisories and 1 new advisories](/gitlab-org/cves/-/commit/a22d09a086edb787ed9d18cb35b7f0b05c946a71)
  繚
  a22d09a0

  [ GitLab Bot ](/gitlab-bot) authored Oct 17, 2022

  a22d09a0

  [Publishing 0 updated advisories and 1 new advisories](/gitlab-org/cves/-/commit/a22d09a086edb787ed9d18cb35b7f0b05c946a71)
  [ GitLab Bot ](/gitlab-bot) authored Oct 17, 2022

Loading


