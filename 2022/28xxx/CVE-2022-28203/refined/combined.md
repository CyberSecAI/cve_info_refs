=== Content from phabricator.wikimedia.org_ae4c649d_20250115_092217.html ===
Page Menu[HomePhabricator](/)

* SearchConfigure Global Search

[Log In](https://phabricator.wikimedia.org/auth/start/?next=%2FT297731)[Create Task](/maniphest/task/edit/nocreate/) [Maniphest](/maniphest/)  T297731
# CVE-2022-28203: Requesting Special:NewFiles in commons with actor as a condition can bring the whole database down Closed, Resolved[Public](/policy/explain/PHID-TASK-t46g2gcqxv4ijvysurjd/view/)SecurityActions

* [Edit Task](/maniphest/task/edit/297731/)
* Edit Related Tasks...
* [Create Subtask](/maniphest/task/subtask/297731/)
* [Edit Parent Tasks](/search/rel/task.has-parent/PHID-TASK-t46g2gcqxv4ijvysurjd/)
* [Edit Subtasks](/search/rel/task.has-subtask/PHID-TASK-t46g2gcqxv4ijvysurjd/)
* [Merge Duplicates In](/search/rel/task.merge-in/PHID-TASK-t46g2gcqxv4ijvysurjd/)
* [Close As Duplicate](/search/rel/task.close-as-duplicate/PHID-TASK-t46g2gcqxv4ijvysurjd/)
* Edit Related Objects...
* [Edit Commits](/search/rel/task.has-commit/PHID-TASK-t46g2gcqxv4ijvysurjd/)
* [Edit Mocks](/search/rel/task.has-mock/PHID-TASK-t46g2gcqxv4ijvysurjd/)
* Subscribe
* [Mute Notifications](/subscriptions/mute/PHID-TASK-t46g2gcqxv4ijvysurjd/)
* [Protect as security issue](/wmf/escalate-task/297731/)
* [Award Token](/token/give/PHID-TASK-t46g2gcqxv4ijvysurjd/)
* [Flag For Later](/flag/edit/PHID-TASK-t46g2gcqxv4ijvysurjd/)

Assigned To

|  | [Ladsgroup](/p/Ladsgroup/) |
| --- | --- |

Authored By

|  | [Ladsgroup](/p/Ladsgroup/) |
| --- | --- |
| Dec 14 2021, 5:57 PM2021-12-14 17:57:59 (UTC+0) |

Tags

* [Security-Team](/tag/security-team/) [(Watching)](/project/board/1179/)
* [Security](/tag/security/)
* [DBA](/tag/dba/) [(Done)](/project/board/1060/)
* [User-Ladsgroup](/tag/user-ladsgroup/) [(Done)](/project/board/2168/)
* [Performance Issue](/tag/performance_issue/)
* [SecTeam-Processed](/tag/secteam-processed/) [(Completed)](/project/board/5180/)
Referenced Files

|  | [F34883919: T297731.patch](/F34883919) |
| --- | --- |
| Dec 14 2021, 6:22 PM2021-12-14 18:22:39 (UTC+0) |

Subscribers

|  | [Aklapper](/p/Aklapper/) |
| --- | --- |

|  | [daniel](/p/daniel/) |
| --- | --- |

|  | [gerritbot](/p/gerritbot/) |
| --- | --- |

|  | [Jdforrester-WMF](/p/Jdforrester-WMF/) |
| --- | --- |

|  | [Krinkle](/p/Krinkle/) |
| --- | --- |

|  | [Ladsgroup](/p/Ladsgroup/) |
| --- | --- |

|  | [LSobanski](/p/LSobanski/) |
| --- | --- |

[View All 12 Subscribers](/subscriptions/list/PHID-TASK-t46g2gcqxv4ijvysurjd/)
# Description

I have been seeing a lot of slow queries like this:

```
wikiadmin@10.64.16.175(commonswiki)> explain SELECT  /*! STRAIGHT_JOIN */ img_name,img_timestamp,actor_user,actor_name  FROM `image` JOIN `actor` ON ((actor_id=img_actor)) LEFT JOIN `user_groups` ON (ug_group = 'bot' AND (ug_user = actor_user) AND (ug_expiry IS NULL OR ug_expiry >= '20211214173620'))   WHERE actor_name = 'Gov.mm' AND (ug_group IS NULL) AND (((img_timestamp<'20211214000000')))  ORDER BY img_timestamp DESC LIMIT 51  ;
+------+-------------+-------------+--------+-----------------------------------+---------------+---------+------------------------------------+----------+-------------------------+
| id   | select_type | table       | type   | possible_keys                     | key           | key_len | ref                                | rows     | Extra                   |
+------+-------------+-------------+--------+-----------------------------------+---------------+---------+------------------------------------+----------+-------------------------+
|    1 | SIMPLE      | image       | range  | img_timestamp,img_actor_timestamp | img_timestamp | 14      | NULL                               | 29263285 | Using where             |
|    1 | SIMPLE      | actor       | const  | PRIMARY,actor_name                | actor_name    | 257     | const                              | 1        | Using where             |
|    1 | SIMPLE      | user_groups | eq_ref | PRIMARY,ug_group,ug_expiry        | PRIMARY       | 261     | commonswiki.actor.actor_user,const | 1        | Using where; Not exists |
+------+-------------+-------------+--------+-----------------------------------+---------------+---------+------------------------------------+----------+-------------------------+
3 rows in set (0.004 sec)
```

The straight join is actually problematic, if you remove it, MySQL realizes the user doesn't exists and return with empty result right away:

```
wikiadmin@10.64.16.175(commonswiki)> explain SELECT  img_name,img_timestamp,actor_user,actor_name  FROM `image` JOIN `actor` ON ((actor_id=img_actor)) LEFT JOIN `user_groups` ON (ug_group = 'bot' AND (ug_user = actor_user) AND (ug_expiry IS NULL OR ug_expiry >= '20211214173620'))   WHERE actor_name = 'Gov.mm' AND (ug_group IS NULL) AND (((img_timestamp<'20211214000000')))  ORDER BY img_timestamp DESC LIMIT 51  ;
+------+-------------+-------+------+---------------+------+---------+------+------+-----------------------------------------------------+
| id   | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra                                               |
+------+-------------+-------+------+---------------+------+---------+------+------+-----------------------------------------------------+
|    1 | SIMPLE      | NULL  | NULL | NULL          | NULL | NULL    | NULL | NULL | Impossible WHERE noticed after reading const tables |
+------+-------------+-------+------+---------------+------+---------+------+------+-----------------------------------------------------+
1 row in set (0.001 sec)

wikiadmin@10.64.16.175(commonswiki)> SELECT  img_name,img_timestamp,actor_user,actor_name  FROM `image` JOIN `actor` ON ((actor_id=img_actor)) LEFT JOIN `user_groups` ON (ug_group = 'bot' AND (ug_user = actor_user) AND (ug_expiry IS NULL OR ug_expiry >= '20211214173620'))   WHERE actor_name = 'Gov.mm' AND (ug_group IS NULL) AND (((img_timestamp<'20211214000000')))  ORDER BY img_timestamp DESC LIMIT 51  ;
Empty set (0.001 sec)
```

You can replace "Gov.mm" with any gibberish and it would still goes in direction of reading 29M rows. Suggestion: Just run a check if the actor exists before making the query.

# Details

|  | Subject | Repo | Branch | Lines +/- |
| --- | --- | --- | --- | --- |
|  | [SECURITY: pagers: Don't make a straight join if the user is set](https://gerrit.wikimedia.org/r/c/775991) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [master](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/master) | +4 -1 |
|  | [SECURITY: pagers: Don't make a straight join if the user is set](https://gerrit.wikimedia.org/r/c/775994) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [REL1\_38](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/REL1_38) | +4 -1 |
|  | [SECURITY: pagers: Don't make a straight join if the user is set](https://gerrit.wikimedia.org/r/c/775983) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [REL1\_37](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/REL1_37) | +4 -1 |
|  | [SECURITY: pagers: Don't make a straight join if the user is set](https://gerrit.wikimedia.org/r/c/775977) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [REL1\_36](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/REL1_36) | +4 -1 |
|  | [SECURITY: pagers: Don't make a straight join if the user is set](https://gerrit.wikimedia.org/r/c/775972) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [REL1\_35](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/REL1_35) | +4 -1 |

[Customize query in gerrit](https://gerrit.wikimedia.org/r/#/q/bug:T297731)
# Related ObjectsSearch...

* Task Graph
* Mentions

|  |  | Status | Subtype | Assigned | Task |
| --- | --- | --- | --- | --- | --- |
|  |  | Resolved |  | [Reedy](/p/Reedy/) | T297829 [Release MediaWiki 1.35.6/1.36.4/1.37.2](/T297829) |
|  |  | Resolved |  | [Reedy](/p/Reedy/) | T297830 [Tracking bug for MediaWiki 1.35.6/1.36.4/1.37.2](/T297830) |
|  |  | Resolved | Security | [Ladsgroup](/p/Ladsgroup/) | T297731 [CVE-2022-28203: Requesting Special:NewFiles in commons with actor as a condition can bring the whole database down](/T297731) |

Mentioned In [T124214: Allow filtering based on tag on Special:NewFiles](/T124214)
[T297831: Obtain CVEs for 1.35.6/1.36.4/1.37.2 security releases](/T297831)
[T297830: Tracking bug for MediaWiki 1.35.6/1.36.4/1.37.2](/T297830)
### Event Timeline

[Ladsgroup](/p/Ladsgroup/) created this task.[Dec 14 2021, 5:57 PM2021-12-14 17:57:59 (UTC+0)](#7570453)Restricted Application added a subscriber: [Aklapper](/p/Aklapper/).  Â· [View Herald Transcript](/herald/transcript/4552079/)[Dec 14 2021, 5:58 PM2021-12-14 17:58:00 (UTC+0)](#7570463)

[Ladsgroup](/p/Ladsgroup/) added a comment.[Dec 14 2021, 6:01 PM2021-12-14 18:01:12 (UTC+0)](#7570480)Comment Actions

It is the same with existing actors too:

```
wikiadmin@10.64.16.175(commonswiki)> explain SELECT  /*! STRAIGHT_JOIN */ img_name,img_timestamp,actor_user,actor_name  FROM `image` JOIN `actor` ON ((actor_id=img_actor)) LEFT JOIN `user_groups` ON (ug_group = 'bot' AND (ug_user = actor_user) AND (ug_expiry IS NULL OR ug_expiry >= '20211214173620'))   WHERE actor_name = 'Ladsgroup' AND (ug_group IS NULL) AND (((img_timestamp<'20211214000000')))  ORDER BY img_timestamp DESC LIMIT 51  ;
+------+-------------+-------------+--------+-----------------------------------+---------------+---------+------------------------------------+----------+-------------------------+
| id   | select_type | table       | type   | possible_keys                     | key           | key_len | ref                                | rows     | Extra                   |
+------+-------------+-------------+--------+-----------------------------------+---------------+---------+------------------------------------+----------+-------------------------+
|    1 | SIMPLE      | image       | range  | img_timestamp,img_actor_timestamp | img_timestamp | 14      | NULL                               | 29263338 | Using where             |
|    1 | SIMPLE      | actor       | const  | PRIMARY,actor_name                | actor_name    | 257     | const                              | 1        | Using where             |
|    1 | SIMPLE      | user_groups | eq_ref | PRIMARY,ug_group,ug_expiry        | PRIMARY       | 261     | commonswiki.actor.actor_user,const | 1        | Using where; Not exists |
+------+-------------+-------------+--------+-----------------------------------+---------------+---------+------------------------------------+----------+-------------------------+
3 rows in set (0.001 sec)
```

While without STRAIGHT\_JOIN it's much faster:

```
wikiadmin@10.64.16.175(commonswiki)> explain SELECT img_name,img_timestamp,actor_user,actor_name  FROM `image` JOIN `actor` ON ((actor_id=img_actor)) LEFT JOIN `user_groups` ON (ug_group = 'bot' AND (ug_user = actor_user) AND (ug_expiry IS NULL OR ug_expiry >= '20211214173620'))   WHERE actor_name = 'Ladsgroup' AND (ug_group IS NULL) AND (((img_timestamp<'20211214000000')))  ORDER BY img_timestamp DESC LIMIT 51  ;
+------+-------------+-------------+-------+-----------------------------------+---------------------+---------+-------------+------+--------------------------+
| id   | select_type | table       | type  | possible_keys                     | key                 | key_len | ref         | rows | Extra                    |
+------+-------------+-------------+-------+-----------------------------------+---------------------+---------+-------------+------+--------------------------+
|    1 | SIMPLE      | actor       | const | PRIMARY,actor_name                | actor_name          | 257     | const       | 1    |                          |
|    1 | SIMPLE      | user_groups | const | PRIMARY,ug_group,ug_expiry        | PRIMARY             | 261     | const,const | 0    | Unique row not found     |
|    1 | SIMPLE      | image       | range | img_timestamp,img_actor_timestamp | img_actor_timestamp | 22      | NULL        | 395  | Using where; Using index |
+------+-------------+-------------+-------+-----------------------------------+---------------------+---------+-------------+------+--------------------------+
3 rows in set (0.003 sec)
```
[Ladsgroup](/p/Ladsgroup/) claimed this task.[Dec 14 2021, 6:02 PM2021-12-14 18:02:23 (UTC+0)](#7570499)[Ladsgroup](/p/Ladsgroup/) triaged this task as High priority.[Ladsgroup](/p/Ladsgroup/) added a project: [DBA](/tag/dba/).Restricted Application added a project: [User-Ladsgroup](/tag/user-ladsgroup/).  Â· [View Herald Transcript](/herald/transcript/4552088/)[Dec 14 2021, 6:02 PM2021-12-14 18:02:24 (UTC+0)](#7570502)[Ladsgroup](/p/Ladsgroup/) moved this task from [Triage](/project/board/1060/) to [In progress](/project/board/1060/) on the [DBA](/tag/dba/) board.[Dec 14 2021, 6:02 PM2021-12-14 18:02:36 (UTC+0)](#7570503)

[Ladsgroup](/p/Ladsgroup/) added a comment.[Dec 14 2021, 6:04 PM2021-12-14 18:04:51 (UTC+0)](#7570509)Comment Actions

It needs a simple join decomposition. I will never understand the fascination of mediawiki with join. Each purge makes around 200 queries with warm cache and 1k with cold one and we are worried about one more really fast query, it's not making them across the Atlantic ocean, the network latency is small.

[Ladsgroup](/p/Ladsgroup/) added subscribers: [tstarling](/p/tstarling/), [Krinkle](/p/Krinkle/), [daniel](/p/daniel/), [â¢ Pchelolo](/p/Pchelolo/).[Dec 14 2021, 6:22 PM2021-12-14 18:22:39 (UTC+0)](#7570609)Comment Actions

Here is the fix. I think we need to roll this out to all pagers that set the user and do straight join but that's for later. I appreciate code review on this.

T297731.patch1 KB[Download](https://phab.wmfusercontent.org/file/download/6655qv5rulcbadakybhd/PHID-FILE-5dpubkwtri33g6ystknj/T297731.patch)

[Marostegui](/p/Marostegui/) added a comment.[Dec 14 2021, 6:30 PM2021-12-14 18:30:28 (UTC+0)](#7570623)Comment Actions

It would be nice to roll this out this week before the code freeze - great catch Amir!

[Ladsgroup](/p/Ladsgroup/) renamed this task from Requesting Special:NewFiles in commons with non-existentant actors can bring the whole database down  to Requesting Special:NewFiles in commons with actor as a condition can bring the whole database down .[Dec 14 2021, 6:49 PM2021-12-14 18:49:25 (UTC+0)](#7570726)

[Jdforrester-WMF](/p/Jdforrester-WMF/) subscribed.Edited Â· [Dec 14 2021, 6:50 PM2021-12-14 18:50:33 (UTC+0)](#7570728)Comment Actions
> In [T297731#7570609](/T297731#7570609), [@Ladsgroup](/p/Ladsgroup/) wrote:
>
> Here is the fix. I think we need to roll this out to all pagers that set the user and do straight join but that's for later. I appreciate code review on this.
>
> T297731.patch1 KB[Download](https://phab.wmfusercontent.org/file/download/6655qv5rulcbadakybhd/PHID-FILE-5dpubkwtri33g6ystknj/T297731.patch)

That seems fine for now, yes. C+2.

[Reedy](/p/Reedy/) added a project: [Performance Issue](/tag/performance_issue/).[Dec 15 2021, 11:43 AM2021-12-15 11:43:14 (UTC+0)](#7571970)

[Ladsgroup](/p/Ladsgroup/) added a comment.[Dec 15 2021, 4:41 PM2021-12-15 16:41:38 (UTC+0)](#7572880)Comment Actions

This is deployed now.

[Ladsgroup](/p/Ladsgroup/) added a comment.[Dec 15 2021, 4:45 PM2021-12-15 16:45:32 (UTC+0)](#7572893)Comment Actions

We should monitor <https://logstash.wikimedia.org/goto/7d3662149d8277dd9a9574c833b41163> to see if it's fully stopped.

[sbassett](/p/sbassett/) subscribed.[Dec 15 2021, 9:56 PM2021-12-15 21:56:05 (UTC+0)](#7573966)Comment Actions

Thanks for the deploy, [@Ladsgroup](/p/Ladsgroup/). Now tracked at T276237 and will eventually be part of the *next* security release, due out around the end of March 2022.

[Ladsgroup](/p/Ladsgroup/) moved this task from [In progress](/project/board/1060/) to [Done](/project/board/1060/) on the [DBA](/tag/dba/) board.[Dec 16 2021, 11:11 AM2021-12-16 11:11:10 (UTC+0)](#7574892)Comment Actions
> In [T297731#7572893](/T297731#7572893), [@Ladsgroup](/p/Ladsgroup/) wrote:
>
> We should monitor <https://logstash.wikimedia.org/goto/7d3662149d8277dd9a9574c833b41163> to see if it's fully stopped.

Log is clean. I move this to done but won't close it so it gets properly processed by security team.

[sbassett](/p/sbassett/) moved this task from [Incoming](/project/board/1179/) to [Watching](/project/board/1179/) on the [Security-Team](/tag/security-team/) board.[Dec 20 2021, 4:34 PM2021-12-20 16:34:16 (UTC+0)](#7580680)[sbassett](/p/sbassett/) added a project: [SecTeam-Processed](/tag/secteam-processed/).

[Ladsgroup](/p/Ladsgroup/) closed this task as Resolved.[Dec 21 2021, 9:16 AM2021-12-21 09:16:26 (UTC+0)](#7582427)Comment Actions

Log is fully cleaned up. This is done.

[sbassett](/p/sbassett/) added a parent task: [T297830: Tracking bug for MediaWiki 1.35.6/1.36.4/1.37.2](/T297830).[Dec 21 2021, 3:37 PM2021-12-21 15:37:21 (UTC+0)](#7583179)[Reedy](/p/Reedy/) mentioned this in [T297830: Tracking bug for MediaWiki 1.35.6/1.36.4/1.37.2](/T297830).[Mar 20 2022, 12:46 PM2022-03-20 12:46:10 (UTC+0)](#7790553)[Reedy](/p/Reedy/) added a subscriber: [gerritbot](/p/gerritbot/).[Mar 28 2022, 1:32 PM2022-03-28 13:32:31 (UTC+0)](#7810730)[Reedy](/p/Reedy/) renamed this task from Requesting Special:NewFiles in commons with actor as a condition can bring the whole database down  to CVE-2022-: Requesting Special:NewFiles in commons with actor as a condition can bring the whole database down .[Mar 28 2022, 1:52 PM2022-03-28 13:52:49 (UTC+0)](#7810787)[Reedy](/p/Reedy/) mentioned this in [T297831: Obtain CVEs for 1.35.6/1.36.4/1.37.2 security releases](/T297831).[Reedy](/p/Reedy/) renamed this task from CVE-2022-: Requesting Special:NewFiles in commons with actor as a condition can bring the whole database down  to CVE-2022-28203: Requesting Special:NewFiles in commons with actor as a condition can bring the whole database down .[Mar 30 2022, 6:03 PM2022-03-30 18:03:20 (UTC+0)](#7819391)[gerritbot](/p/gerritbot/) added a comment.[Mar 31 2022, 9:43 PM2022-03-31 21:43:47 (UTC+0)](#7823271)Comment Actions

Change 775972 had a related patch set uploaded (by Reedy; author: Amir Sarabadani):

[mediawiki/core@REL1\_35] SECURITY: pagers: Don't make a straight join if the user is set

<https://gerrit.wikimedia.org/r/775972>

[gerritbot](/p/gerritbot/) added a project: [Patch-For-Review](/tag/patch-for-review/).[Mar 31 2022, 9:43 PM2022-03-31 21:43:49 (UTC+0)](#7823272)[gerritbot](/p/gerritbot/) added a comment.[Mar 31 2022, 9:53 PM2022-03-31 21:53:43 (UTC+0)](#7823289)Comment Actions

Change 775972 **merged** by jenkins-bot:

[mediawiki/core@REL1\_35] SECURITY: pagers: Don't make a straight join if the user is set

<https://gerrit.wikimedia.org/r/775972>

[gerritbot](/p/gerritbot/) added a comment.[Mar 31 2022, 9:56 PM2022-03-31 21:56:30 (UTC+0)](#7823292)Comment Actions

Change 775977 had a related patch set uploaded (by Reedy; author: Amir Sarabadani):

[mediawiki/core@REL1\_36] SECURITY: pagers: Don't make a straight join if the user is set

<https://gerrit.wikimedia.org/r/775977>

[gerritbot](/p/gerritbot/) added a comment.[Mar 31 2022, 10:07 PM2022-03-31 22:07:08 (UTC+0)](#7823382)Comment Actions

Change 775983 had a related patch set uploaded (by Reedy; author: Amir Sarabadani):

[mediawiki/core@REL1\_37] SECURITY: pagers: Don't make a straight join if the user is set

<https://gerrit.wikimedia.org/r/775983>

[gerritbot](/p/gerritbot/) added a comment.[Mar 31 2022, 10:08 PM2022-03-31 22:08:11 (UTC+0)](#7823386)Comment Actions

Change 775977 **merged** by jenkins-bot:

[mediawiki/core@REL1\_36] SECURITY: pagers: Don't make a straight join if the user is set

<https://gerrit.wikimedia.org/r/775977>

[gerritbot](/p/gerritbot/) added a comment.[Mar 31 2022, 10:19 PM2022-03-31 22:19:42 (UTC+0)](#7823412)Comment Actions

Change 775983 **merged** by jenkins-bot:

[mediawiki/core@REL1\_37] SECURITY: pagers: Don't make a straight join if the user is set

<https://gerrit.wikimedia.org/r/775983>

[gerritbot](/p/gerritbot/) added a comment.[Mar 31 2022, 10:19 PM2022-03-31 22:19:45 (UTC+0)](#7823413)Comment Actions

Change 775991 had a related patch set uploaded (by Reedy; author: Amir Sarabadani):

[mediawiki/core@master] SECURITY: pagers: Don't make a straight join if the user is set

<https://gerrit.wikimedia.org/r/775991>

[gerritbot](/p/gerritbot/) added a comment.[Mar 31 2022, 10:21 PM2022-03-31 22:21:05 (UTC+0)](#7823417)Comment Actions

Change 775994 had a related patch set uploaded (by Reedy; author: Amir Sarabadani):

[mediawiki/core@REL1\_38] SECURITY: pagers: Don't make a straight join if the user is set

<https://gerrit.wikimedia.org/r/775994>

[gerritbot](/p/gerritbot/) added a comment.[Mar 31 2022, 10:34 PM2022-03-31 22:34:53 (UTC+0)](#7823462)Comment Actions

Change 775994 **merged** by jenkins-bot:

[mediawiki/core@REL1\_38] SECURITY: pagers: Don't make a straight join if the user is set

<https://gerrit.wikimedia.org/r/775994>

[gerritbot](/p/gerritbot/) added a comment.[Mar 31 2022, 10:39 PM2022-03-31 22:39:33 (UTC+0)](#7823468)Comment Actions

Change 775991 **merged** by jenkins-bot:

[mediawiki/core@master] SECURITY: pagers: Don't make a straight join if the user is set

<https://gerrit.wikimedia.org/r/775991>

[Reedy](/p/Reedy/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-m77qtt6hif74it4/)" to "Public (No Login Required)".[Mar 31 2022, 11:05 PM2022-03-31 23:05:08 (UTC+0)](#7823529)[Reedy](/p/Reedy/) changed the edit policy from "[Custom Policy](/transactions/old/PHID-XACT-TASK-shsgyhi7unyti3b/)" to "All Users".[Maintenance\_bot](/p/Maintenance_bot/) removed a project: [Patch-For-Review](/tag/patch-for-review/).[Mar 31 2022, 11:10 PM2022-03-31 23:10:21 (UTC+0)](#7823548)[Zabe](/p/Zabe/) subscribed.[Mar 31 2022, 11:12 PM2022-03-31 23:12:20 (UTC+0)](#7823553)[Maintenance\_bot](/p/Maintenance_bot/) moved this task from [Incoming](/project/board/2168/) to [Done](/project/board/2168/) on the [User-Ladsgroup](/tag/user-ladsgroup/) board.[Mar 31 2022, 11:15 PM2022-03-31 23:15:23 (UTC+0)](#7823558)[matej\_suchanek](/p/matej_suchanek/) mentioned this in [T124214: Allow filtering based on tag on Special:NewFiles](/T124214).[Feb 17 2023, 11:49 AM2023-02-17 11:49:09 (UTC+0)](#8624878)Content licensed under Creative Commons Attribution-ShareAlike (CC BY-SA) 4.0 unless otherwise noted; code licensed under GNU General Public License (GPL) 2.0 or later and other open source licenses. By using this site, you agree to the Terms of Use, Privacy Policy, and Code of Conduct. Â· [Wikimedia Foundation](https://wikimediafoundation.org/) Â· [Privacy Policy](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ANon-wiki_privacy_policy) Â· [Code of Conduct](https://www.mediawiki.org/wiki/Special%3AMyLanguage/Code_of_Conduct) Â· [Terms of Use](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ATerms_of_Use/Phabricator) Â· [Disclaimer](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3AGeneral_disclaimer) Â· [CC-BY-SA](https://creativecommons.org/licenses/by-sa/4.0/) Â· [GPL](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html) Â· [Credits](https://www.mediawiki.org/wiki/Phabricator/Credits)

=== Content from lists.debian.org_2dc828db_20250115_092216.html ===


---

[[Date Prev](msg00026.html)][[Date Next](msg00028.html)]
[[Thread Prev](msg00026.html)][[Thread Next](msg00028.html)]
[[Date Index](maillist.html#00027)]
[[Thread Index](threads.html#00027)]

# [SECURITY] [DLA 3117-1] mediawiki security update

---

* *To*: debian-lts-announce <debian-lts-announce@lists.debian.org>
* *Subject*: [SECURITY] [DLA 3117-1] mediawiki security update
* *From*: Markus Koschany <apo@debian.org>
* *Date*: Thu, 22 Sep 2022 16:38:08 +0200
* *Message-id*: <[[ð]](/msgid-search/f45a4c489854732ab2b082fc108c43adf375ff4a.camel%40debian.org)Â [f45a4c489854732ab2b082fc108c43adf375ff4a.camel@debian.org](msg00027.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-------------------------------------------------------------------------
Debian LTS Advisory DLA-3117-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                      Markus Koschany
September 22, 2022                            <https://wiki.debian.org/LTS>
-------------------------------------------------------------------------

Package        : mediawiki
Version        : 1:1.31.16-1+deb10u3
CVE ID         : CVE-2021-44856 CVE-2022-28201 CVE-2022-28202 CVE-2022-28203
                 CVE-2022-34911 CVE-2022-34912

Several security vulnerabilities were discovered in mediawiki, a website engine
for collaborative work. Insufficiently escaped input text may allow a malicious
user to perform cross-site-scripting (XSS) attacks.

For Debian 10 buster, these problems have been fixed in version
1:1.31.16-1+deb10u3.

We recommend that you upgrade your mediawiki packages.

For the detailed security status of mediawiki please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/mediawiki>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

```

**Attachment:
[signature.asc](pgpgkIyIvSxkc.pgp)**

*Description:* This is a digitally signed message part

---



=== Content from www.debian.org_730444c4_20250115_092218.html ===


---

[[Date Prev](msg00216.html)][[Date Next](msg00218.html)]
[[Thread Prev](msg00216.html)][[Thread Next](msg00218.html)]
[[Date Index](maillist.html#00217)]
[[Thread Index](threads.html#00217)]

# [SECURITY] [DSA 5246-1] php-twig security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 5246-1] php-twig security update
* *From*: Sebastien Delafond <seb@debian.org>
* *Date*: Wed, 05 Oct 2022 05:37:23 +0000
* *Message-id*: <[[ð]](/msgid-search/E1ofx5v-00H4BD-LC%40seger.debian.org)Â [E1ofx5v-00H4BD-LC@seger.debian.org](msg00217.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-5246-1                   security@debian.org
<https://www.debian.org/security/>                       Sebastien Delafond
October 04, 2022                      <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : php-twig
CVE ID         : CVE-2022-39261
Debian Bug     : 1020991

Marlon Starkloff discovered that twig, a template engine for PHP, did
not correctly enforce sandboxing. This would allow a malicious user to
execute arbitrary code.

For the stable distribution (bullseye), this problem has been fixed in
version 2.14.3-1+deb11u2.

We recommend that you upgrade your php-twig packages.

For the detailed security status of php-twig please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/php-twig>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQEzBAEBCgAdFiEEAqSkbVtrXP4xJMh3EL6Jg/PVnWQFAmM9FmYACgkQEL6Jg/PV
nWSFYwgAoCAOajgv28W7jI5bDu/XCf3h/kmFfniaes3oEQd8H26pIHOOjLm5F4hc
w1c6soR6UyuxkkpiIMucgqcRXXzWEgWg6fLb2PHe7Msot8aiDdH/u/KQfCwhJtQI
alGalArG5IG73A/wSAo8GcH/f04u5wM8lOn/p821k9n0e4/9DgMA225KWeNYSrZJ
1FG5Q5pVl4+BEsyz2OEvSjgc/XcNOimQAk4Xauajab6eTMGCGdAnz7Tak4CDg7Q/
oCvu1sA2l+MS7G3fBu+nrK05EmQ2kmv57WgVHsqCli25crTbC13Y/k558DeoXp04
ocIzEOC1Bj/D9tKW+VONeJLutOluIA==
=ZL2h
-----END PGP SIGNATURE-----

```

---


