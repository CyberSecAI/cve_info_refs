=== Content from github.com_131ec227_20250114_190828.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenemr%2Fopenemr%2Fcommit%2Fd5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenemr%2Fopenemr%2Fcommit%2Fd5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=openemr%2Fopenemr)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[openemr](/openemr)
/
**[openemr](/openemr/openemr)**
Public

* [Notifications](/login?return_to=%2Fopenemr%2Fopenemr) You must be signed in to change notification settings
* [Fork
  2.2k](/login?return_to=%2Fopenemr%2Fopenemr)
* [Star
   3.2k](/login?return_to=%2Fopenemr%2Fopenemr)

* [Code](/openemr/openemr)
* [Issues
  280](/openemr/openemr/issues)
* [Pull requests
  81](/openemr/openemr/pulls)
* [Actions](/openemr/openemr/actions)
* [Projects
  0](/openemr/openemr/projects)
* [Security](/openemr/openemr/security)
* [Insights](/openemr/openemr/pulse)

Additional navigation options

* [Code](/openemr/openemr)
* [Issues](/openemr/openemr/issues)
* [Pull requests](/openemr/openemr/pulls)
* [Actions](/openemr/openemr/actions)
* [Projects](/openemr/openemr/projects)
* [Security](/openemr/openemr/security)
* [Insights](/openemr/openemr/pulse)

## Commit

[Permalink](/openemr/openemr/commit/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

commits for Rel 700 p2 ([#5808](https://github.com/openemr/openemr/pull/5808))

[Browse files](/openemr/openemr/tree/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14)
Browse the repository at this point in the history

```
* Accept assign fix ([#5701](https://github.com/openemr/openemr/pull/5701))

* Update Hcfa1500.php

* Update X125010837P.php

* additional CLM07 fix

* Bug fix ([#5695](https://github.com/openemr/openemr/pull/5695))

* bug fix

* csrf

* modern syntax

* wrap with text() for html xss

* bring in 2023 icd10 ([#5762](https://github.com/openemr/openemr/pull/5762))

* add eRx condition to primary business entity checkbox disable ([#5781](https://github.com/openemr/openemr/pull/5781))

* check for allow portal in choices before displaying create creds ([#5790](https://github.com/openemr/openemr/pull/5790))

* check for allow portal in choices

* styling

* Update X12Partner.class.php ([#5793](https://github.com/openemr/openemr/pull/5793))

* ignore temporary css file for patch ([#5814](https://github.com/openemr/openemr/pull/5814))

* fixes [#5824](https://github.com/openemr/openemr/issues/5824), reorganize and simplify patient portal widget ([#5825](https://github.com/openemr/openemr/pull/5825))

* fixes [#5824](https://github.com/openemr/openemr/issues/5824), reorganize and simplify patient portal widget

* fixes

* better wording, remove needless else

* fix initially collapsed

* ok enough :)

* better name

* use isset() instead

* php8 fixes for batch payments ([#5819](https://github.com/openemr/openemr/pull/5819))

* more php8 fixes for batch payments

* one more int cast

* broken link in search payments

* remove unused script

* merge

* merge

* invoice past encounter button Bug fix [#5837](https://github.com/openemr/openemr/issues/5837) ([#5840](https://github.com/openemr/openemr/pull/5840))

* edit billing note in invoice ([#5843](https://github.com/openemr/openemr/pull/5843))

* fix [#5849](https://github.com/openemr/openemr/issues/5849), handle all zeroes from old form_vitals date field; display date at top of table ([#5850](https://github.com/openemr/openemr/pull/5850))

* handle all zeroes date plus place date at top of table

* misc php8 warning

* remove cmnt

* better conditional

* even better

* fix comment

* remove class from hidden input :)

* php8 fixes for growth chart

* play it again sam

* not needed since fixing in sql upgrade

* merge

* fixes for track anything ([#5881](https://github.com/openemr/openemr/pull/5881))

* fix display and php8

* another null bites the dust

* simplify output and more php8 fixes

* fix for prior merge

Co-authored-by: surfacehazard <github@auldware.com>
Co-authored-by: Simon Quigley <squigley@altispeed.com>
Co-authored-by: Sherwin Gaddis <sherwin@affordablecustomehr.com>
```

* Loading branch information

[![@stephenwaite](https://avatars.githubusercontent.com/u/5618372?s=40&v=4)](/stephenwaite) [![@surfacehazard](https://avatars.githubusercontent.com/u/2679241?s=40&v=4)](/surfacehazard)
[![@tsimonq2](https://avatars.githubusercontent.com/u/3689821?s=40&v=4)](/tsimonq2) [![@juggernautsei](https://avatars.githubusercontent.com/u/834958?s=40&v=4)](/juggernautsei)

4 people

authored
Oct 27, 2022

1 parent
[5182298](/openemr/openemr/commit/51822989aef861f0006c7c4c21700ee3c02edcdd)

commit d5eb416

 Show file tree

 Hide file tree

Showing
**43 changed files**
with
**609 additions**
and
**392 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* contrib/icd10

  + contrib/icd10/2022-Code Descriptions.zip
    [2022-Code Descriptions.zip](#diff-79455272ccc364ec40b462455f96c2f2606b033ab495e263aae9c27c242d4ecc)
  + contrib/icd10/2023 Code Descriptions in Tabular Order.zip
    [2023 Code Descriptions in Tabular Order.zip](#diff-36f8ae0c8d02c4b6da04d673b7af25f074047db2af312502639e29c0123a38d7)
  + contrib/icd10/Zip File 3 2022 ICD-10-PCS Codes File.zip
    [Zip File 3 2022 ICD-10-PCS Codes File.zip](#diff-9a0e6c82c62e6b14ec241c5a666319f0fa0c05baaad84faaedc419796242b279)
  + contrib/icd10/Zip File 3 2023 ICD-10-PCS Codes File.zip
    [Zip File 3 2023 ICD-10-PCS Codes File.zip](#diff-e6cf8d2e53bed64803c6e4e85aeace66676b2526c61506b5b7f0f4fca2a7b0dd)
* interface

  + billing

    - interface/billing/edit\_payment.php
      [edit\_payment.php](#diff-bfd1c086b0a9f40724fd3e30ccbc473c2b213f1a0a540dc3ce95be131b4e50a9)
    - interface/billing/payment\_pat\_sel.inc.php
      [payment\_pat\_sel.inc.php](#diff-913a8a13b27af4d3e8dc7faa76e6b241d90c841e31f3beda770f89cd1875242c)
    - interface/billing/search\_payments.php
      [search\_payments.php](#diff-114f201bc77810940f48e841bc1927780ab313b9b03d6871d78aae66fee2b554)
    - interface/billing/sl\_eob\_invoice.php
      [sl\_eob\_invoice.php](#diff-26a81d5f6fd2a184775130681cda7d83aa6484ec13327c158806913078d7403b)
  + forms

    - LBF

      * interface/forms/LBF/printable.php
        [printable.php](#diff-8e97b6130268ab2c8671701938a19ac442e8d8ebe555f1e183b0e4d6a066b8f1)
    - fee\_sheet

      * interface/forms/fee\_sheet/new.php
        [new.php](#diff-5a68a62f9e36bd421727ec52c74cdc768fced8d4078ae097b82f690340364c3a)
      * review

        + interface/forms/fee\_sheet/review/fee\_sheet\_ajax.php
          [fee\_sheet\_ajax.php](#diff-bbe9094c0275e3c421060e7925ab51467eb75b9ddc877c0a88cffe3d4f761658)
        + interface/forms/fee\_sheet/review/fee\_sheet\_review\_view\_model.js
          [fee\_sheet\_review\_view\_model.js](#diff-a22499f60a0c31cd461ac708eab46e57783c5763ff9c2f81d98a23c19261e606)
        + interface/forms/fee\_sheet/review/initialize\_review.php
          [initialize\_review.php](#diff-ad1ad35f4d09cb6798ddba40f562060be3efb6443a4157dd1d5660d282f9cdcb)
    - track\_anything

      * interface/forms/track\_anything/create.php
        [create.php](#diff-73cf6b3de877bdf40385139f712333f3c2475053766f04280a88bb0ab1d175b7)
      * interface/forms/track\_anything/history.php
        [history.php](#diff-9336111664f99ca71b2fae11a04696b59de1687bd4b8f43e7a85f380d9668def)
      * interface/forms/track\_anything/new.php
        [new.php](#diff-894c627b54eed90b50d2246830b60ae65aee3e1eae9d64f07b3fddb1599a3b97)
    - vitals

      * interface/forms/vitals/C\_FormVitals.class.php
        [C\_FormVitals.class.php](#diff-9ae299bdc5a54b5b13f340513a40f8647a2c4d58eba1c84bd0523ba9b756307e)
      * growthchart

        + interface/forms/vitals/growthchart/chart.php
          [chart.php](#diff-0892d0b8345d9b085eda643a7f9f0f35408f91c04e5527a1cfba445746fd3cec)
      * templates/vitals

        + interface/forms/vitals/templates/vitals/vitals.html.twig
          [vitals.html.twig](#diff-71796b322b4e3903c2d90779f2f2b17369ef4d4780446191f468787507303e37)
  + patient\_file

    - interface/patient\_file/printed\_fee\_sheet.php
      [printed\_fee\_sheet.php](#diff-0028ab09945d062670aa28d5cc84a60fe188d2d82503f3b0119007b135469391)
    - report

      * interface/patient\_file/report/custom\_report.php
        [custom\_report.php](#diff-b9822724c18302febb8a0a03fee41f46ac299a347e1ad8168b1382da4c5d841b)
    - summary

      * interface/patient\_file/summary/create\_portallogin.php
        [create\_portallogin.php](#diff-c7752b1c1625f5ce2cce0bf2f3b61fa7e7acb392b94e62c0cfd78d838a07ba9b)
      * interface/patient\_file/summary/demographics.php
        [demographics.php](#diff-2e96f84f94192c049eaa032a31c5e19e9e7b496268d37544891386324448fb62)
      * interface/patient\_file/summary/demographics\_print.php
        [demographics\_print.php](#diff-2776da912fb7c7b964cc9bc8fa879bf83b55fe593d4ee00942811f36c76bba43)
      * interface/patient\_file/summary/track\_anything\_fragment.php
        [track\_anything\_fragment.php](#diff-1242343931d59615de4cfa843dc3d43bcd33af80713bed382f8f3fc447957b7c)
    - transaction

      * interface/patient\_file/transaction/print\_referral.php
        [print\_referral.php](#diff-5a4aaf383477f233f69be3ed5149b9b017861b9f09b5ae44ddb4134fa0982ed4)
  + usergroup

    - interface/usergroup/facility\_admin.php
      [facility\_admin.php](#diff-9b500d0b429ee26c6286eb4cbd311f9156178ae82cdecbed10d7d78a88c53912)
* library

  + classes

    - library/classes/X12Partner.class.php
      [X12Partner.class.php](#diff-5dda49c41f00fcd41742dfcece20061e8c9d2d16b5d2b1bfa62bbb31e0b018c0)
  + library/clinical\_rules.php
    [clinical\_rules.php](#diff-f21ce3eb9012ad8191b0961c51cd3a69c2f2953df248642be56729be62481b7f)
  + library/options.inc.php
    [options.inc.php](#diff-38e6117715e3b7a38511cdb8b1ecc46e99907ca455fd43cfc5ef3c34506c2f48)
  + library/patient.inc
    [patient.inc](#diff-e34db0868530925ee9a1ea567b874f61c959e316df1fe9730138e4d1d51de4ba)
* portal

  + portal/get\_patient\_info.php
    [get\_patient\_info.php](#diff-4b2e226b457e2285cfb32e603be1e241a6d7a3aac46cbac453e98719c9d33ca6)
  + portal/import\_template.php
    [import\_template.php](#diff-6e904c1c3e90fa665a464f2445366193360f81ae71238f1efefe10225dfa3877)
  + portal/import\_template\_ui.php
    [import\_template\_ui.php](#diff-7956be7eef64cbd1a6bbf7266a3fee9b36a8271eea23fe3f0356cd54e28d76bf)
  + portal/index.php
    [index.php](#diff-da020e8955d8b97ba4ff997d6fd905668e956296de9f72131e6d5b3b88e2f449)
  + lib

    - portal/lib/appsql.class.php
      [appsql.class.php](#diff-50e26a31c02c3707348c98715becb679407fd9c07ce54e37066e07908301f6a7)
* sql

  + sql/database.sql
    [database.sql](#diff-926fd962995ee7ffbfb48495131d1b623290bbfe23e4736eedbdefce7e1d7d18)
  + sql/patch.sql
    [patch.sql](#diff-20c3bc830d99b48902aabbb000b45ab4114d9832d789e914e4b34f2a1174c989)
* src

  + Billing

    - src/Billing/Hcfa1500.php
      [Hcfa1500.php](#diff-f86d05970019d58274c4581ddb6efad9d3c336dd2fb10bf45a048f14d27f8f9f)
    - src/Billing/X125010837P.php
      [X125010837P.php](#diff-e5768bfff3e7d0665a8a36accd804fa262929984534dcd75a402572fb5643ecb)
  + Common/Logging

    - src/Common/Logging/EventAuditLogger.php
      [EventAuditLogger.php](#diff-ccc65ad95643c7d37ffe34a16919c0f485296b97aa60750d1ba937ef34b1320e)
  + Patient/Cards

    - src/Patient/Cards/PortalCard.php
      [PortalCard.php](#diff-3162b9836fa3d57833b6478ed0642fbe9764950d020893bed36c97844e5b4a07)
* templates/patient/partials

  + templates/patient/partials/portal.html.twig
    [portal.html.twig](#diff-cef96fd0f1b050ee90e8ea14a7954e9a3beeb5e674fa818ce0a255585583d758)

## There are no files selected for viewing

Binary file removed
BIN
-2.11 MB

[contrib/icd10/2022-Code Descriptions.zip](#diff-79455272ccc364ec40b462455f96c2f2606b033ab495e263aae9c27c242d4ecc "contrib/icd10/2022-Code Descriptions.zip")

Show comments

[View file](/openemr/openemr/blob/51822989aef861f0006c7c4c21700ee3c02edcdd/contrib/icd10/2022-Code%20Descriptions.zip)
Edit file

Delete file

Binary file not shown.

Binary file added
BIN
+2.27 MB

[contrib/icd10/2023 Code Descriptions in Tabular Order.zip](#diff-36f8ae0c8d02c4b6da04d673b7af25f074047db2af312502639e29c0123a38d7 "contrib/icd10/2023 Code Descriptions in Tabular Order.zip")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/contrib/icd10/2023%20Code%20Descriptions%20in%20Tabular%20Order.zip)
Edit file

Delete file

Binary file not shown.

Binary file removed
BIN
-640 KB

[contrib/icd10/Zip File 3 2022 ICD-10-PCS Codes File.zip](#diff-9a0e6c82c62e6b14ec241c5a666319f0fa0c05baaad84faaedc419796242b279 "contrib/icd10/Zip File 3 2022 ICD-10-PCS Codes File.zip")

Show comments

[View file](/openemr/openemr/blob/51822989aef861f0006c7c4c21700ee3c02edcdd/contrib/icd10/Zip%20File%203%202022%20ICD-10-PCS%20Codes%20File.zip)
Edit file

Delete file

Binary file not shown.

Binary file added
BIN
+642 KB

[contrib/icd10/Zip File 3 2023 ICD-10-PCS Codes File.zip](#diff-e6cf8d2e53bed64803c6e4e85aeace66676b2526c61506b5b7f0f4fca2a7b0dd "contrib/icd10/Zip File 3 2023 ICD-10-PCS Codes File.zip")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/contrib/icd10/Zip%20File%203%202023%20ICD-10-PCS%20Codes%20File.zip)
Edit file

Delete file

Binary file not shown.

33 changes: 16 additions & 17 deletions

33
[interface/billing/edit\_payment.php](#diff-bfd1c086b0a9f40724fd3e30ccbc473c2b213f1a0a540dc3ce95be131b4e50a9 "interface/billing/edit_payment.php")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/interface/billing/edit_payment.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -141,7 +141,7 @@ |
|  |  | "'"; |
|  |  |  |
|  |  | $where = "$where1 AND pay\_amount > 0"; |
|  |  | if (isset($\_POST["Payment$CountRow"]) && $\_POST["Payment$CountRow"] \* 1 > 0) { |
|  |  | if (!empty($\_POST["Payment$CountRow"])) { |
|  |  | if (trim($\_POST['type\_name']) == 'insurance') { |
|  |  | if (trim($\_POST["HiddenIns$CountRow"]) == 1) { |
|  |  | $AccountCode = "IPP"; |
| Expand Down  Expand Up | | @@ -227,7 +227,7 @@ |
|  |  | //============================================================================================================================== |
|  |  |  |
|  |  | $where = "$where1 AND (memo LIKE 'Deductable%' OR memo LIKE 'Deductible%')"; |
|  |  | if (isset($\_POST["Deductible$CountRow"]) && $\_POST["Deductible$CountRow"] \* 1 > 0) { |
|  |  | if (!empty($\_POST["Deductible$CountRow"])) { |
|  |  | $resPayment = sqlStatement("SELECT \* from ar\_activity $where"); |
|  |  | if (sqlNumRows($resPayment) > 0) { |
|  |  | sqlStatement("update ar\_activity set deleted = NOW() $where"); |
| Expand Down  Expand Up | | @@ -259,7 +259,7 @@ |
|  |  | //============================================================================================================================== |
|  |  |  |
|  |  | $where = "$where1 AND pay\_amount < 0"; |
|  |  | if (isset($\_POST["Takeback$CountRow"]) && $\_POST["Takeback$CountRow"] \* 1 > 0) { |
|  |  | if (!empty($\_POST["Takeback$CountRow"])) { |
|  |  | $resPayment = sqlStatement("SELECT \* from ar\_activity $where"); |
|  |  | if (sqlNumRows($resPayment) > 0) { |
|  |  | sqlStatement("update ar\_activity set deleted = NOW() $where"); |
| Expand Down  Expand Up | | @@ -337,7 +337,10 @@ |
|  |  | } |
|  |  |  |
|  |  | if ($\_REQUEST['global\_amount'] == 'yes') { |
|  |  | sqlStatement("update ar\_session set global\_amount=? where session\_id =?", [(isset($\_POST["HidUnappliedAmount"]) ? trim($\_POST["HidUnappliedAmount"]) \* 1 : ''), $payment\_id]); |
|  |  | sqlStatement( |
|  |  | "update ar\_session set global\_amount=? where session\_id =?", |
|  |  | [(isset($\_POST["HidUnappliedAmount"]) ? floatval($\_POST["HidUnappliedAmount"]) : 0), $payment\_id] |
|  |  | ); |
|  |  | } elseif ($\_REQUEST['global\_reset'] == '-0.00') { |
|  |  | sqlStatement("update ar\_session set global\_amount=? where session\_id =?", [0, $payment\_id]); |
|  |  | } |
| Expand All | | @@ -354,7 +357,7 @@ |
|  |  | //============================================================================== |
|  |  | //Search Code |
|  |  | //=============================================================================== |
|  |  | $payment\_id = ($payment\_id ?? null) \* 1 > 0 ? $payment\_id : $\_REQUEST['payment\_id']; |
|  |  | $payment\_id = !empty($payment\_id) ? (int) $payment\_id : (int) $\_REQUEST['payment\_id']; |
|  |  | $ResultSearchSub = sqlStatement( |
|  |  | "SELECT DISTINCT encounter, code\_type, code, modifier, pid " . |
|  |  | "FROM ar\_activity WHERE deleted IS NULL AND session\_id = ? " . |
| Expand Down  Expand Up | | @@ -625,22 +628,22 @@ function DeletePaymentDistribution(DeleteId) {//Confirms deletion of payment dis |
|  |  | } |
|  |  | ?> |
|  |  | <?php |
|  |  | if ($payment\_id \* 1 == 0) { |
|  |  | if (empty($payment\_id)) { |
|  |  | $onclick = "top.restoreSession();return SavePayment();"; |
|  |  | } else { |
|  |  | $onclick = "return false;"; |
|  |  | } |
|  |  | ?> |
|  |  | <form class="form" name='new\_payment' method='post' action="edit\_payment.php" onsubmit='<?php echo $onclick; ?>'> |
|  |  | <?php |
|  |  | if ($payment\_id \* 1 > 0) { ?> |
|  |  | if (!empty($payment\_id)) { ?> |
|  |  | <fieldset> |
|  |  | <?php |
|  |  | require\_once("payment\_master.inc.php"); //Check/cash details are entered here. |
|  |  | ?> |
|  |  | <?php }//End of if($payment\_id\*1>0) ?> |
|  |  | <?php |
|  |  | if ($payment\_id \* 1 > 0) {//Distribution rows already in the database are displayed. |
|  |  | if (!empty($payment\_id)) {//Distribution rows already in the database are displayed. |
|  |  | ?> |
|  |  | <?php // |
|  |  | $resCount = sqlStatement( |
| Expand Down  Expand Up | | @@ -884,8 +887,7 @@ function DeletePaymentDistribution(DeleteId) {//Confirms deletion of payment dis |
|  |  | [$payment\_id, $PId, $Encounter, $Codetype, $Code, $Modifier] |
|  |  | ); |
|  |  | $rowPayment = sqlFetchArray($resPayment); |
|  |  | $PaymentDB = $rowPayment['pay\_amount'] ?? null \* 1; |
|  |  | $PaymentDB = $PaymentDB == 0 ? '' : $PaymentDB; |
|  |  | $PaymentDB = floatval($rowPayment['pay\_amount'] ?? null); |
|  |  |  |
|  |  | $resPayment = sqlStatement( |
|  |  | "SELECT pay\_amount FROM ar\_activity WHERE " . |
| Expand All | | @@ -894,8 +896,7 @@ function DeletePaymentDistribution(DeleteId) {//Confirms deletion of payment dis |
|  |  | [$payment\_id, $PId, $Encounter, $Codetype, $Code, $Modifier] |
|  |  | ); |
|  |  | $rowPayment = sqlFetchArray($resPayment); |
|  |  | $TakebackDB = ($rowPayment['pay\_amount'] ?? null) \* -1; |
|  |  | $TakebackDB = $TakebackDB == 0 ? '' : $TakebackDB; |
|  |  | $TakebackDB = floatval($rowPayment['pay\_amount'] ?? null); |
|  |  |  |
|  |  | $resPayment = sqlStatement( |
|  |  | "SELECT adj\_amount FROM ar\_activity WHERE " . |
| Expand All | | @@ -904,8 +905,7 @@ function DeletePaymentDistribution(DeleteId) {//Confirms deletion of payment dis |
|  |  | [$payment\_id, $PId, $Encounter, $Codetype, $Code, $Modifier] |
|  |  | ); |
|  |  | $rowPayment = sqlFetchArray($resPayment); |
|  |  | $AdjAmountDB = $rowPayment['adj\_amount'] \* 1; |
|  |  | $AdjAmountDB = $AdjAmountDB == 0 ? '' : $AdjAmountDB; |
|  |  | $AdjAmountDB = floatval($rowPayment['adj\_amount'] ?? null); |
|  |  |  |
|  |  | $resPayment = sqlStatement( |
|  |  | "SELECT memo FROM ar\_activity WHERE " . |
| Expand Down  Expand Up | | @@ -943,7 +943,6 @@ function DeletePaymentDistribution(DeleteId) {//Confirms deletion of payment dis |
|  |  | } else { |
|  |  | $AllowedDB = 0; |
|  |  | } |
|  |  | $AllowedDB = $AllowedDB === 0 ? '' : $AllowedDB; |
|  |  |  |
|  |  | if ($Ins == 1) { |
|  |  | $bgcolor = '#ddddff'; |
| Expand Down  Expand Up | | @@ -1072,8 +1071,8 @@ function DeletePaymentDistribution(DeleteId) {//Confirms deletion of payment dis |
|  |  | <input type='hidden' name='global\_amount' id='global\_amount' value='' /> |
|  |  | <input type='hidden' name='DeletePaymentDistributionId' id='DeletePaymentDistributionId' value='' /> |
|  |  | <input type="hidden" name="ActionStatus" id="ActionStatus" value="<?php echo attr($Message ?? ''); ?>" /> |
|  |  | <input type='hidden' name='CountIndexAbove' id='CountIndexAbove' value='<?php echo attr($CountIndexAbove \* 1); ?>' /> |
|  |  | <input type='hidden' name='CountIndexBelow' id='CountIndexBelow' value='<?php echo attr($CountIndexBelow \* 1); ?>' /> |
|  |  | <input type='hidden' name='CountIndexAbove' id='CountIndexAbove' value='<?php echo (int) attr($CountIndexAbove); ?>' /> |
|  |  | <input type='hidden' name='CountIndexBelow' id='CountIndexBelow' value='<?php echo (int) attr($CountIndexBelow); ?>' /> |
|  |  | <input type="hidden" name="ParentPage" id="ParentPage" value="<?php echo attr($\_REQUEST['ParentPage'] ?? ''); ?>" /> |
|  |  | </div> |
|  |  | </form> |
| Expand Down | |  |

8 changes: 4 additions & 4 deletions

8
[interface/billing/payment\_pat\_sel.inc.php](#diff-913a8a13b27af4d3e8dc7faa76e6b241d90c841e31f3beda770f89cd1875242c "interface/billing/payment_pat_sel.inc.php")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/interface/billing/payment_pat_sel.inc.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -25,7 +25,7 @@ |
|  |  | //=============================================================================== |
|  |  | if (isset($\_POST["mode"])) { |
|  |  | if ( |
|  |  | ($\_POST["mode"] == "search") || ($\_POST["default\_search\_patient"] == "default\_search\_patient") && |
|  |  | ($\_POST["mode"] == "search") || (($\_POST["default\_search\_patient"] ?? null) == "default\_search\_patient") && |
|  |  | isset($\_REQUEST['hidden\_patient\_code']) && |
|  |  | (int)$\_REQUEST['hidden\_patient\_code'] > 0 |
|  |  | ) { |
| Expand All | | @@ -46,9 +46,9 @@ |
|  |  | $res = sqlStatement("SELECT fname,lname,mname FROM patient\_data |
|  |  | where pid =?", array($hidden\_patient\_code)); |
|  |  | $row = sqlFetchArray($res); |
|  |  | $fname = $row['fname']; |
|  |  | $lname = $row['lname']; |
|  |  | $mname = $row['mname']; |
|  |  | $fname = $row['fname'] ?? ''; |
|  |  | $lname = $row['lname'] ?? ''; |
|  |  | $mname = $row['mname'] ?? ''; |
|  |  | $NameNew = $lname . ' ' . $fname . ' ' . $mname; |
|  |  | } |
|  |  | } |
| Expand Down | |  |

7 changes: 1 addition & 6 deletions

7
[interface/billing/search\_payments.php](#diff-114f201bc77810940f48e841bc1927780ab313b9b03d6871d78aae66fee2b554 "interface/billing/search_payments.php")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/interface/billing/search_payments.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -533,7 +533,7 @@ function SearchPayingEntityAction() { |
|  |  | </td> |
|  |  | <td> |
|  |  | <!--<a class='iframe medium\_modal' href="edit\_payment.php?payment\_id=<?php echo htmlspecialchars($RowSearch['session\_id']); ?>"><?php echo $Payer == '' ? '&nbsp;' : htmlspecialchars($Payer); ?></a>--> |
|  |  | <a class="medium\_modal" data-target="#myModal1" data-toggle="modal" onclick="loadiframe('edit\_payment.php?payment\_id=<?php echo attr\_url($RowSearch['session\_id']); ?>"><?php echo $Payer == '' ? '&nbsp;' : text($Payer); ?></a><!--link to iframe--> |
|  |  | <a class="medium\_modal" href='edit\_payment.php?payment\_id=<?php echo attr\_url($RowSearch['session\_id']); ?>')"><?php echo $Payer == '' ? '&nbsp;' : text($Payer); ?></a><!--link to iframe--> |
|  |  | </td> |
|  |  | <td> |
|  |  | <a class="medium\_modal" href='edit\_payment.php?payment\_id=<?php echo attr\_url($RowSearch['session\_id']); ?>'><?php echo $RowSearch['payer\_id'] \* 1 > 0 ? text($RowSearch['payer\_id']) : '&nbsp;'; ?></a> |
| Expand Down  Expand Up | | @@ -608,10 +608,5 @@ function SearchPayingEntityAction() { |
|  |  | </div> |
|  |  | </div><!--end of container div--> |
|  |  | <?php $oemr\_ui->oeBelowContainerDiv(); ?> |
|  |  | <script> |
|  |  | function loadiframe(htmlHref) { //load iframe |
|  |  | document.getElementById('targetiframe1').src = htmlHref; |
|  |  | } |
|  |  | </script> |
|  |  | </body> |
|  |  | </html> |

18 changes: 12 additions & 6 deletions

18
[interface/billing/sl\_eob\_invoice.php](#diff-26a81d5f6fd2a184775130681cda7d83aa6484ec13327c158806913078d7403b "interface/billing/sl_eob_invoice.php")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/interface/billing/sl_eob_invoice.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -69,10 +69,10 @@ function setins(istr) { |
|  |  | return true; |
|  |  | } |
|  |  |  |
|  |  | function goEncounterSummary(pid) { |
|  |  | function goEncounterSummary(e, pid) { |
|  |  | if(pid) { |
|  |  | if(typeof opener.toEncSummary === 'function') { |
|  |  | opener.toEncSummary(pid); |
|  |  | opener.toEncSummary(e, pid); |
|  |  | } |
|  |  | } |
|  |  | doClose(); |
| Expand Down  Expand Up | | @@ -295,7 +295,7 @@ function updateFields(payField, adjField, balField, coPayField, isFirstProcCode) |
|  |  | $payer\_type = $matches[1]; |
|  |  | } |
|  |  |  |
|  |  | if (!empty($\_POST['form\_save']) || !empty($\_POST['form\_cancel']) || !empty($\_POST['isLastClosed'])) { |
|  |  | if (!empty($\_POST['form\_save']) || !empty($\_POST['form\_cancel']) || !empty($\_POST['isLastClosed']) || !empty($\_POST['billing\_note'])) { |
|  |  | if (!empty($\_POST['form\_save'])) { |
|  |  | if (!CsrfUtils::verifyCsrfToken($\_POST["csrf\_token\_form"])) { |
|  |  | CsrfUtils::csrfNotVerified(); |
| Expand Down  Expand Up | | @@ -426,7 +426,7 @@ function updateFields(payField, adjField, balField, coPayField, isFirstProcCode) |
|  |  | if (!$debug && !$save\_stay && !$\_POST['isLastClosed']) { |
|  |  | echo "doClose();\n"; |
|  |  | } |
|  |  | if (!$debug && ($save\_stay || $\_POST['isLastClosed'])) { |
|  |  | if (!$debug && ($save\_stay || $\_POST['isLastClosed'] || $\_POST['billing\_note'])) { |
|  |  | if ($\_POST['isLastClosed']) { |
|  |  | // save last closed level |
|  |  | $form\_done = 0 + $\_POST['form\_done']; |
| Expand All | | @@ -438,6 +438,12 @@ function updateFields(payField, adjField, balField, coPayField, isFirstProcCode) |
|  |  | SLEOB::arSetupSecondary($patient\_id, $encounter\_id, $debug); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | if ($\_POST['billing\_note']) { |
|  |  | // save last closed level |
|  |  | sqlStatement("UPDATE form\_encounter SET billing\_note = ? WHERE pid = ? AND encounter = ?", array($\_POST['billing\_note'], $patient\_id, $encounter\_id)); |
|  |  | } |
|  |  |  |
|  |  | // will reload page w/o reposting |
|  |  | echo "location.replace(location)\n"; |
|  |  | } |
| Expand Down  Expand Up | | @@ -513,7 +519,7 @@ function updateFields(payField, adjField, balField, coPayField, isFirstProcCode) |
|  |  | <div class="form-row"> |
|  |  | <div class="form-group col-lg"> |
|  |  | <label class="col-form-label" for="billing\_note"><?php echo xlt('Billing Note'); ?>:</label> |
|  |  | <textarea name="billing\_note" id="billing\_note" class="form-control" cols="5" rows="2" readonly><?php echo text(($pdrow['billing\_note'] ?? '')) . "\n" . text(($bnrow['billing\_note'] ?? '')); ?></textarea> |
|  |  | <textarea name="billing\_note" id="billing\_note" class="form-control" cols="5" rows="2"><?php echo text(($pdrow['billing\_note'] ?? '')) . "\n" . text(($bnrow['billing\_note'] ?? '')); ?></textarea> |
|  |  | </div> |
|  |  | </div> |
|  |  | <div class="form-row"> |
| Expand Down  Expand Up | | @@ -767,7 +773,7 @@ class="form-control" |
|  |  | </div> |
|  |  | <?php if ($from\_posting) { ?> |
|  |  | <button type='button' class="btn btn-secondary btn-view float-right" name='form\_goto' id="btn-goto" |
|  |  | onclick="goEncounterSummary(<?php echo attr\_js($patient\_id) ?>)"><?php echo xlt("Past Encounters"); ?></button> |
|  |  | onclick="goEncounterSummary(event, <?php echo attr\_js($patient\_id) ?>)"><?php echo xlt("Past Encounters"); ?></button> |
|  |  | <?php } ?> |
|  |  | </div> |
|  |  | </div> |
| Expand Down | |  |

20 changes: 6 additions & 14 deletions

20
[interface/forms/LBF/printable.php](#diff-8e97b6130268ab2c8671701938a19ac442e8d8ebe555f1e183b0e4d6a066b8f1 "interface/forms/LBF/printable.php")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/interface/forms/LBF/printable.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -108,15 +108,6 @@ |
|  |  | 'keep\_table\_proportions' => true |
|  |  | ); |
|  |  | $pdf = new mPDF($config\_mpdf); |
|  |  | $pdf->SetHTMLHeader(' |
|  |  | <div style="text-align: right; font-weight: bold;"> |
|  |  | ' . $patientname . ' DOB: ' . oeFormatShortDate($patientdob["DOB"]) . ' DOS: ' . oeFormatShortDate($dateofservice) . ' |
|  |  | </div>'); |
|  |  | $pdf->SetHTMLFooter(' |
|  |  | <div style="float: right; width:33% text-align: left;">' . oeFormatDateTime(date("Y-m-d H:i:s")) . '</div> |
|  |  | <div style="float: right; width:33%; text-align: center; ">{PAGENO}/{nbpg}</div> |
|  |  | <div style="float: right; width:33%; text-align: right; ">' . $patientname . '</div> |
|  |  | '); |
|  |  | $pdf->SetDisplayMode('real'); |
|  |  | if ($\_SESSION['language\_direction'] == 'rtl') { |
|  |  | $pdf->SetDirectionality('rtl'); |
| Expand Down  Expand Up | | @@ -280,13 +271,14 @@ |
|  |  | $logo = ''; |
|  |  | $ma\_logo\_path = "sites/" . $\_SESSION['site\_id'] . "/images/ma\_logo.png"; |
|  |  | if (is\_file("$webserver\_root/$ma\_logo\_path")) { |
|  |  | // Would use max-height here but html2pdf does not support it. |
|  |  | // TODO - now use mPDF, so should test if still need this fix |
|  |  | $logo = "<img src='$web\_root/$ma\_logo\_path' style='height:" . attr(round($FONTSIZE \* 5.14)) . "pt' />"; |
|  |  | } else { |
|  |  | $logo = "<!-- '$ma\_logo\_path' does not exist. -->"; |
|  |  | $logo = "$web\_root/$ma\_logo\_path"; |
|  |  | } |
|  |  |  |
|  |  | echo genFacilityTitle($formtitle, -1, $logo); |
|  |  |  |
|  |  | if ($PDF\_OUTPUT) { |
|  |  | echo genPatientHeaderFooter($pid, $DOS = $dateofservice); |
|  |  | } |
|  |  | ?> |
|  |  |  |
|  |  | <?php if ($isblankform) { ?> |
| Expand Down | |  |

11 changes: 10 additions & 1 deletion

11
[interface/forms/fee\_sheet/new.php](#diff-5a68a62f9e36bd421727ec52c74cdc768fced8d4078ae097b82f690340364c3a "interface/forms/fee_sheet/new.php")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/interface/forms/fee_sheet/new.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -512,7 +512,16 @@ function echoProductLines() |
|  |  | if ($\_POST['form\_checksum'] != $current\_checksum) { |
|  |  | $alertmsg = xl('Someone else has just changed this visit. Please cancel this page and try again.'); |
|  |  | $comment = "CHECKSUM ERROR, expecting '{$\_POST['form\_checksum']}'"; |
|  |  | EventAuditLogger::instance()->newEvent("checksum", $\_SESSION['authUser'], $\_SESSION['authProvider'], 1, $comment, $pid); |
|  |  | EventAuditLogger::instance()->newEvent( |
|  |  | "checksum", |
|  |  | $\_SESSION['authUser'], |
|  |  | $\_SESSION['authProvider'], |
|  |  | 1, |
|  |  | $comment, |
|  |  | $pid, |
|  |  | 'open-emr', |
|  |  | 'fee sheet' |
|  |  | ); |
|  |  | } |
|  |  | } |
|  |  |  |
| Expand Down | |  |

20 changes: 17 additions & 3 deletions

20
[interface/forms/fee\_sheet/review/fee\_sheet\_ajax.php](#diff-bbe9094c0275e3c421060e7925ab51467eb75b9ddc877c0a88cffe3d4f761658 "interface/forms/fee_sheet/review/fee_sheet_ajax.php")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/interface/forms/fee_sheet/review/fee_sheet_ajax.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -14,13 +14,18 @@ |
|  |  | require\_once("fee\_sheet\_queries.php"); |
|  |  |  |
|  |  | use OpenEMR\Common\Acl\AclMain; |
|  |  | use OpenEMR\Common\Csrf\CsrfUtils; |
|  |  |  |
|  |  | if (!AclMain::aclCheckCore('acct', 'bill')) { |
|  |  | header("HTTP/1.0 403 Forbidden"); |
|  |  | echo "Not authorized for billing"; |
|  |  | return false; |
|  |  | } |
|  |  |  |
|  |  | if (!CsrfUtils::verifyCsrfToken($\_REQUEST["csrf\_token\_form"])) { |
|  |  | CsrfUtils::csrfNotVerified(); |
|  |  | } |
|  |  |  |
|  |  | if (isset($\_REQUEST['pid'])) { |
|  |  | $req\_pid = $\_REQUEST['pid']; |
|  |  | } |
| Expand Down  Expand Up | | @@ -62,7 +67,7 @@ |
|  |  | } |
|  |  |  |
|  |  | $retval['issues'] = $issues; |
|  |  | echo json\_encode($retval); |
|  |  | echo text(json\_encode($retval)); |
|  |  | return; |
|  |  | } |
|  |  |  |
| Expand All | | @@ -73,7 +78,7 @@ |
|  |  |  |
|  |  | $diags = array(); |
|  |  | foreach ($json\_diags as $diag) { |
|  |  | $diags[] = new code\_info($diag->{'code'}, $diag->{'code\_type'}, $diag->{'description'}); |
|  |  | $diags[] = new code\_info($diag->code, $diag->code\_type, $diag->description); |
|  |  | } |
|  |  |  |
|  |  | $procs = array(); |
| Expand All | | @@ -82,7 +87,16 @@ |
|  |  | } |
|  |  |  |
|  |  | foreach ($json\_procs as $proc) { |
|  |  | $procs[] = new procedure($proc->{'code'}, $proc->{'code\_type'}, $proc->{'description'}, $proc->{'fee'}, $proc->{'justify'}, $proc->{'modifiers'}, $proc->{'units'}, 0); |
|  |  | $procs[] = new procedure( |
|  |  | $proc->code, |
|  |  | $proc->code\_type, |
|  |  | $proc->description, |
|  |  | $proc->fee, |
|  |  | $proc->justify, |
|  |  | $proc->modifiers, |
|  |  | $proc->units, |
|  |  | 0 |
|  |  | ); |
|  |  | } |
|  |  |  |
|  |  | $database->StartTrans(); |
| Expand Down | |  |

6 changes: 4 additions & 2 deletions

6
[interface/forms/fee\_sheet/review/fee\_sheet\_review\_view\_model.js](#diff-a22499f60a0c31cd461ac708eab46e57783c5763ff9c2f81d98a23c19261e606 "interface/forms/fee_sheet/review/fee_sheet_review_view_model.js")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/interface/forms/fee_sheet/review/fee_sheet_review_view_model.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -111,7 +111,8 @@ function request\_encounter\_data(model\_data, mode, prev\_encounter) { |
|  |  | pid: pid, |
|  |  | encounter: enc, |
|  |  | mode: mode, |
|  |  | task: "retrieve" |
|  |  | task: "retrieve", |
|  |  | csrf\_token\_form: csrf\_token\_js |
|  |  | }; |
|  |  | if (prev\_encounter != null) { |
|  |  | request.prev\_encounter = prev\_encounter; |
| Expand Down  Expand Up | | @@ -205,7 +206,8 @@ function add\_review(data, event) { |
|  |  | encounter: enc, |
|  |  | task: 'add\_diags', |
|  |  | diags: JSON.stringify(diag\_list), |
|  |  | procs: JSON.stringify(proc\_list) |
|  |  | procs: JSON.stringify(proc\_list), |
|  |  | csrf\_token\_form: csrf\_token\_js |
|  |  | }, |
|  |  | function (data) { |
|  |  | refresh\_codes(); |
| Expand Down | |  |

7 changes: 6 additions & 1 deletion

7
[interface/forms/fee\_sheet/review/initialize\_review.php](#diff-ad1ad35f4d09cb6798ddba40f562060be3efb6443a4157dd1d5660d282f9cdcb "interface/forms/fee_sheet/review/initialize_review.php")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/interface/forms/fee_sheet/review/initialize_review.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -12,6 +12,8 @@ |
|  |  | \* @license https://github.com/openemr/openemr/blob/master/LICENSE GNU General Public License 3 |
|  |  | \*/ |
|  |  |  |
|  |  | use OpenEMR\Common\Csrf\CsrfUtils; |
|  |  |  |
|  |  | if (!$isBilled) { |
|  |  | require\_once("code\_check.php"); |
|  |  | ?> |
| Expand All | | @@ -22,8 +24,11 @@ |
|  |  | var review\_tag = <?php echo xlj('Review'); ?>; |
|  |  | var justify\_click\_title = <?php echo xlj('Click to choose diagnoses to justify.'); ?>; |
|  |  | var fee\_sheet\_options = []; |
|  |  | var diag\_code\_types = <?php echo diag\_code\_types('json');?>; // This is a list of diagnosis code types to present for as options in the justify dialog, for now, only "internal codes" included. |
|  |  | // This is a list of diagnosis code types to present for as options in the justify dialog, |
|  |  | // for now, only "internal codes" included. |
|  |  | var diag\_code\_types = <?php echo diag\_code\_types('json');?>; |
|  |  | var ippf\_specific = <?php echo $GLOBALS['ippf\_specific'] ? 'true' : 'false'; ?>; |
|  |  | var csrf\_token\_js = <?php echo js\_escape(CsrfUtils::collectCsrfToken()); ?>; |
|  |  | </script> |
|  |  | <script> |
|  |  | function fee\_sheet\_option(code,code\_type,description,fee) |
| Expand Down | |  |

10 changes: 5 additions & 5 deletions

10
[interface/forms/track\_anything/create.php](#diff-73cf6b3de877bdf40385139f712333f3c2475053766f04280a88bb0ab1d175b7 "interface/forms/track_anything/create.php")

Show comments

[View file](/openemr/openemr/blob/d5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14/interface/forms/track_anything/create.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -132,11 +132,11 @@ |
|  |  | // user clicked some buttons... |
|  |  | $the\_item = isset($\_POST['typeid']) ? trim($\_POST['typeid']) : ''; |
|  |  | if ($the\_item) { |
|  |  | $add = $\_POST['add']; |
|  |  | $edit = $\_POST['edit']; |
|  |  | $delete = $\_POST['delete']; |
|  |  | $deactivate = $\_POST['deact']; |
|  |  | $activate = $\_POST['act']; |
|  |  | $add = $\_POST['add'] ?? null; |
|  |  | $edit = $\_POST['edit'] ?? null; |
|  |  | $delete = $\_POST['delete'] ?? null; |
|  |  | $deactivate = $\_POST['deact'] ?? null; |
|  |  | $activate = $\_POST['act'] ?? null; |
|  |  |  |
|  |  | // add a new item to track |
|  |  | //------------------------ |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `d5eb416`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenemr%2Fopenemr%2Fcommit%2Fd5eb41697f7f1bc2c7ee5bc9bbf58684e1c8cc14) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from huntr.dev_fba7b254_20250114_190830.html ===


* [![logo](/horizontal-logo-wh.svg)](/)
* [Bounties](/bounties)
* [Partners](/partners)
* Community
* Info
[SUBMIT REPORT](/bounties/disclose)

Supported by [Protect AI](https://protectai.com/) and leading the way to [MLSecOps](https://mlsecops.com) and greater AI security.

© 2024

[Privacy Policy](/privacy)[Terms of Service](/terms)[Code of Conduct](/code-of-conduct)Cookie Preferences[Contact Us](/contact-us)
