=== Content from huntr.dev_a5923edc_20250114_232122.html ===


* [![logo](/horizontal-logo-wh.svg)](/)
* [Bounties](/bounties)
* [Partners](/partners)
* Community
* Info
[SUBMIT REPORT](/bounties/disclose)

Supported by [Protect AI](https://protectai.com/) and leading the way to [MLSecOps](https://mlsecops.com) and greater AI security.

© 2024

[Privacy Policy](/privacy)[Terms of Service](/terms)[Code of Conduct](/code-of-conduct)Cookie Preferences[Contact Us](/contact-us)

=== Content from github.com_23d5a217_20250114_232121.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenemr%2Fopenemr%2Fcommit%2F953cb84dfd55fee9d5296668ec7fdb8bf25bcea4)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenemr%2Fopenemr%2Fcommit%2F953cb84dfd55fee9d5296668ec7fdb8bf25bcea4)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=openemr%2Fopenemr)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[openemr](/openemr)
/
**[openemr](/openemr/openemr)**
Public

* [Notifications](/login?return_to=%2Fopenemr%2Fopenemr) You must be signed in to change notification settings
* [Fork
  2.2k](/login?return_to=%2Fopenemr%2Fopenemr)
* [Star
   3.2k](/login?return_to=%2Fopenemr%2Fopenemr)

* [Code](/openemr/openemr)
* [Issues
  280](/openemr/openemr/issues)
* [Pull requests
  80](/openemr/openemr/pulls)
* [Actions](/openemr/openemr/actions)
* [Projects
  0](/openemr/openemr/projects)
* [Security](/openemr/openemr/security)
* [Insights](/openemr/openemr/pulse)

Additional navigation options

* [Code](/openemr/openemr)
* [Issues](/openemr/openemr/issues)
* [Pull requests](/openemr/openemr/pulls)
* [Actions](/openemr/openemr/actions)
* [Projects](/openemr/openemr/projects)
* [Security](/openemr/openemr/security)
* [Insights](/openemr/openemr/pulse)

## Commit

[Permalink](/openemr/openemr/commit/953cb84dfd55fee9d5296668ec7fdb8bf25bcea4)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

bug fix 2

[Browse files](/openemr/openemr/tree/953cb84dfd55fee9d5296668ec7fdb8bf25bcea4)
Browse the repository at this point in the history

* Loading branch information

[![@bradymiller](https://avatars.githubusercontent.com/u/278968?s=40&v=4)](/bradymiller)

[bradymiller](/openemr/openemr/commits?author=bradymiller "View all commits by bradymiller")
committed
Oct 25, 2022

1 parent
[2e7678d](/openemr/openemr/commit/2e7678d812df167ea3c0756382408b670e8aa51f)

commit 953cb84

 Show file tree

 Hide file tree

Showing
**8 changed files**
with
**72 additions**
and
**9 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* controllers

  + controllers/C\_Document.class.php
    [C\_Document.class.php](#diff-7d2c246c517bfeada466a3239a8f7eba25c7e2c0963598d1713f2c652b4d8f28)
* custom

  + custom/zutil.cli.doc\_import.php
    [zutil.cli.doc\_import.php](#diff-acd5c3cbcf1d6e855cd9c0eab4360bbbc13d1e64a99162b61170e15485931159)
* interface/forms/eye\_mag/php

  + interface/forms/eye\_mag/php/taskman\_functions.php
    [taskman\_functions.php](#diff-957349f6e5a2159b8befa34111865f6ed546ce2f5c90490d5e61b2623925bc86)
* library

  + classes

    - library/classes/Document.class.php
      [Document.class.php](#diff-cd5bcfd97bf49bbe11e0d592796d24d9dbfc332acf10d4405d7f49aa4129d9e1)
  + library/direct\_message\_check.inc
    [direct\_message\_check.inc](#diff-2eaea1877966a3768cf5239fd4bfd98a6f127ce8a1e1dde09d111f2896e3937e)
  + library/documents.php
    [documents.php](#diff-7031299a1231336d73320a9ee9795c82b25b33aa8b7b6e24142abfb4737732df)
* sql

  + sql/database.sql
    [database.sql](#diff-926fd962995ee7ffbfb48495131d1b623290bbfe23e4736eedbdefce7e1d7d18)
  + sql/patch.sql
    [patch.sql](#diff-20c3bc830d99b48902aabbb000b45ab4114d9832d789e914e4b34f2a1174c989)

## There are no files selected for viewing

49 changes: 47 additions & 2 deletions

49
[controllers/C\_Document.class.php](#diff-7d2c246c517bfeada466a3239a8f7eba25c7e2c0963598d1713f2c652b4d8f28 "controllers/C_Document.class.php")

Show comments

[View file](/openemr/openemr/blob/953cb84dfd55fee9d5296668ec7fdb8bf25bcea4/controllers/C_Document.class.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,6 +16,7 @@ |
|  |  | use OpenEMR\Common\Acl\AclMain; |
|  |  | use OpenEMR\Common\Crypto\CryptoGen; |
|  |  | use OpenEMR\Common\Csrf\CsrfUtils; |
|  |  | use OpenEMR\Common\Logging\SystemLogger; |
|  |  | use OpenEMR\Common\Twig\TwigContainer; |
|  |  | use OpenEMR\Services\FacilityService; |
|  |  | use OpenEMR\Services\PatientService; |
| Expand All | | @@ -33,6 +34,7 @@ class C\_Document extends Controller |
|  |  | public $\_last\_node; |
|  |  | private $Document; |
|  |  | private $cryptoGen; |
|  |  | private bool $skip\_acl\_check = false; |
|  |  |  |
|  |  | public function \_\_construct($template\_mod = "general") |
|  |  | { |
| Expand Down  Expand Up | | @@ -202,6 +204,8 @@ public function upload\_action\_process() |
|  |  |  |
|  |  | if (is\_numeric($\_POST['category\_id'])) { |
|  |  | $category\_id = $\_POST['category\_id']; |
|  |  | } else { |
|  |  | $category\_id = 1; |
|  |  | } |
|  |  |  |
|  |  | $patient\_id = 0; |
| Expand All | | @@ -211,7 +215,18 @@ public function upload\_action\_process() |
|  |  | $patient\_id = $\_POST['patient\_id']; |
|  |  | } |
|  |  |  |
|  |  | if (!empty($\_FILES['dicom\_folder']['name'][0])) { |
|  |  | // ensure user has access to the category that is being uploaded to |
|  |  | $skipUpload = false; |
|  |  | if (!$this->isSkipAclCheck()) { |
|  |  | $acoSpec = sqlQuery("SELECT `aco\_spec` from `categories` WHERE `id` = ?", [$category\_id])['aco\_spec']; |
|  |  | if (AclMain::aclCheckAcoSpec($acoSpec) === false) { |
|  |  | $error = xl("Not authorized to upload to the selected category.\n"); |
|  |  | $skipUpload = true; |
|  |  | (new SystemLogger())->debug("An attempt was made to upload a document to an unauthorized category", ['user-id' => $\_SESSION['authUserID'], 'patient-id' => $patient\_id, 'category-id' => $category\_id]); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | if (!$skipUpload && !empty($\_FILES['dicom\_folder']['name'][0])) { |
|  |  | // let's zip um up then pass along new zip |
|  |  | $study\_name = $\_POST['destination'] ? (trim($\_POST['destination']) . ".zip") : 'DicomStudy.zip'; |
|  |  | $study\_name = preg\_replace('/\s+/', '\_', $study\_name); |
| Expand All | | @@ -225,7 +240,7 @@ public function upload\_action\_process() |
|  |  | } |
|  |  |  |
|  |  | $sentUploadStatus = array(); |
|  |  | if (count($\_FILES['file']['name']) > 0) { |
|  |  | if (!$skipUpload && count($\_FILES['file']['name']) > 0) { |
|  |  | $upl\_inc = 0; |
|  |  |  |
|  |  | foreach ($\_FILES['file']['name'] as $key => $value) { |
| Expand Down  Expand Up | | @@ -611,6 +626,22 @@ public function retrieve\_action(string $patient\_id = null, $document\_id, $as\_fil |
|  |  | } |
|  |  |  |
|  |  | $d = new Document($document\_id); |
|  |  |  |
|  |  | // ensure user/patient has access |
|  |  | if (isset($\_SESSION['patient\_portal\_onsite\_two']) && isset($\_SESSION['pid'])) { |
|  |  | // ensure patient has access (called from patient portal) |
|  |  | if (!$d->can\_patient\_access($\_SESSION['pid'])) { |
|  |  | (new SystemLogger())->debug("An attempt was made by a patient to download a document from an unauthorized category", ['patient-id' => $\_SESSION['pid'], 'document-id' => $document\_id]); |
|  |  | die(xlt("Not authorized to view requested file")); |
|  |  | } |
|  |  | } else { |
|  |  | // ensure user has access |
|  |  | if (!$d->can\_access()) { |
|  |  | (new SystemLogger())->debug("An attempt was made by a user to download a document from an unauthorized category", ['user-id' => $\_SESSION['authUserID'], 'patient-id' => $patient\_id, 'document-id' => $document\_id]); |
|  |  | die(xlt("Not authorized to view requested file")); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | $url = $d->get\_url(); |
|  |  | $th\_url = $d->get\_thumb\_url(); |
|  |  |  |
| Expand Down  Expand Up | | @@ -1375,4 +1406,18 @@ public function clear\_encounter\_tag\_action(string $patient\_id = null, $document\_ |
|  |  | } |
|  |  | return $this->view\_action($patient\_id, $document\_id); |
|  |  | } |
|  |  |  |
|  |  | // this will set flag to skip acl check |
|  |  | // this is needed for when uploading via services that piggyback on any user (ie. the background services) or via cron/cli |
|  |  | public function skipAclCheck(): void |
|  |  | { |
|  |  | $this->skip\_acl\_check = true; |
|  |  | } |
|  |  |  |
|  |  | // this will check if flag has been set to skip the acl check |
|  |  | // this is needed for when uploading via services that piggyback on any user (ie. the background services) or via cron/cli |
|  |  | public function isSkipAclCheck(): bool |
|  |  | { |
|  |  | return $this->skip\_acl\_check; |
|  |  | } |
|  |  | } |

1 change: 1 addition & 0 deletions

1
[custom/zutil.cli.doc\_import.php](#diff-acd5c3cbcf1d6e855cd9c0eab4360bbbc13d1e64a99162b61170e15485931159 "custom/zutil.cli.doc_import.php")

Show comments

[View file](/openemr/openemr/blob/953cb84dfd55fee9d5296668ec7fdb8bf25bcea4/custom/zutil.cli.doc_import.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -151,6 +151,7 @@ |
|  |  | 'category\_id' => '1', |
|  |  | 'higher\_level\_path' => '', |
|  |  | 'path\_depth' => '1', |
|  |  | 'skip\_acl\_check' => true |
|  |  | ); |
|  |  | $new\_doc = call\_user\_func\_array('addNewDocument', $doc\_params); |
|  |  | printf('%s - %s%s', text($doc\_pathname), (isset($new\_doc) ? text($new\_doc->get\_url()) : xlt('Documents setup error')), "\n"); |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[interface/forms/eye\_mag/php/taskman\_functions.php](#diff-957349f6e5a2159b8befa34111865f6ed546ce2f5c90490d5e61b2623925bc86 "interface/forms/eye_mag/php/taskman_functions.php")

Show comments

[View file](/openemr/openemr/blob/953cb84dfd55fee9d5296668ec7fdb8bf25bcea4/interface/forms/eye_mag/php/taskman_functions.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -593,7 +593,7 @@ function make\_document($task) |
|  |  |  |
|  |  | $type = "application/pdf"; |
|  |  | $size = filesize($temp\_filename); |
|  |  | $return = addNewDocument($filename, $type, $temp\_filename, 0, $size, $task['FROM\_ID'], $task['PATIENT\_ID'], $category\_id); |
|  |  | $return = addNewDocument($filename, $type, $temp\_filename, 0, $size, $task['FROM\_ID'], $task['PATIENT\_ID'], $category\_id, '', 1, true); |
|  |  | unlink($temp\_filename); |
|  |  |  |
|  |  | $task['DOC\_ID'] = $return['doc\_id']; |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[library/classes/Document.class.php](#diff-cd5bcfd97bf49bbe11e0d592796d24d9dbfc332acf10d4405d7f49aa4129d9e1 "library/classes/Document.class.php")

Show comments

[View file](/openemr/openemr/blob/953cb84dfd55fee9d5296668ec7fdb8bf25bcea4/library/classes/Document.class.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -264,7 +264,7 @@ public function get\_categories() |
|  |  | . "WHERE `ctd`.`document\_id` = ? "; |
|  |  | $resultSet = sqlStatement($categories, [$this->get\_id()]); |
|  |  | $categories = []; |
|  |  | while ($category = sqlGetAssoc($resultSet)) { |
|  |  | while ($category = sqlFetchArray($resultSet)) { |
|  |  | $categories[] = $category; |
|  |  | } |
|  |  | return $categories; |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[library/direct\_message\_check.inc](#diff-2eaea1877966a3768cf5239fd4bfd98a6f127ce8a1e1dde09d111f2896e3937e "library/direct_message_check.inc")

Show comments

[View file](/openemr/openemr/blob/953cb84dfd55fee9d5296668ec7fdb8bf25bcea4/library/direct_message_check.inc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -644,7 +644,7 @@ function phimail\_store($name, $mime\_type, $fn) |
|  |  | // Import the document |
|  |  | $phimail\_direct\_message\_check\_allowed\_mimetype = $mime\_type; |
|  |  | $filesize = filesize($fn); |
|  |  | $return = addNewDocument($name, $mime\_type, $fn, 0, $filesize, $user, 'direct'); |
|  |  | $return = addNewDocument($name, $mime\_type, $fn, 0, $filesize, $user, 'direct', 1, '', 1, true); |
|  |  | if (is\_array($return)) { |
|  |  | $return['filesize'] = $filesize; |
|  |  | } |
| Expand Down | |  |

6 changes: 5 additions & 1 deletion

6
[library/documents.php](#diff-7031299a1231336d73320a9ee9795c82b25b33aa8b7b6e24142abfb4737732df "library/documents.php")

Show comments

[View file](/openemr/openemr/blob/953cb84dfd55fee9d5296668ec7fdb8bf25bcea4/library/documents.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -36,9 +36,10 @@ |
|  |  | \* @param int $category\_id Document category id |
|  |  | \* @param string $higher\_level\_path Can set a higher level path here (and then place the path depth in $path\_depth) |
|  |  | \* @param int $path\_depth Path depth when using the $higher\_level\_path feature |
|  |  | \* @param boolean $skip\_acl\_check This needs to be set to true for when uploading via services that piggyback on any user (ie. the background services) or uses cron/cli |
|  |  | \* @return array/boolean Array(doc\_id,url) of the file as stored in documents table, false = failure |
|  |  | \*/ |
|  |  | function addNewDocument($name, $type, $tmp\_name, $error, $size, $owner = '', $patient\_id\_or\_simple\_directory = "00", $category\_id = '1', $higher\_level\_path = '', $path\_depth = '1') |
|  |  | function addNewDocument($name, $type, $tmp\_name, $error, $size, $owner = '', $patient\_id\_or\_simple\_directory = "00", $category\_id = '1', $higher\_level\_path = '', $path\_depth = '1', $skip\_acl\_check = false) |
|  |  | { |
|  |  |  |
|  |  | if (empty($owner)) { |
| Expand Down  Expand Up | | @@ -67,6 +68,9 @@ function addNewDocument($name, $type, $tmp\_name, $error, $size, $owner = '', $pa |
|  |  | // Add the Document and return the newly added document id |
|  |  | $cd = new C\_Document(); |
|  |  | $cd->manual\_set\_owner = $owner; |
|  |  | if ($skip\_acl\_check) { |
|  |  | $cd->skipAclCheck(); |
|  |  | } |
|  |  | $cd->upload\_action\_process(); |
|  |  | $v = $cd->get\_template\_vars("file"); |
|  |  | if (!isset($v) || !$v) { |
| Expand Down | |  |

6 changes: 3 additions & 3 deletions

6
[sql/database.sql](#diff-926fd962995ee7ffbfb48495131d1b623290bbfe23e4736eedbdefce7e1d7d18 "sql/database.sql")

Show comments

[View file](/openemr/openemr/blob/953cb84dfd55fee9d5296668ec7fdb8bf25bcea4/sql/database.sql)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -298,13 +298,13 @@ CREATE TABLE `categories` ( |
|  |  | INSERT INTO `categories` VALUES (1, 'Categories', '', 0, 0, 59, 'patients|docs', ''); |
|  |  | INSERT INTO `categories` VALUES (2, 'Lab Report', '', 1, 1, 2, 'patients|docs', ''); |
|  |  | INSERT INTO `categories` VALUES (3, 'Medical Record', '', 1, 3, 4, 'patients|docs', ''); |
|  |  | INSERT INTO `categories` VALUES (4, 'Patient Information', '', 1, 5, 10, 'patients|docs', ''); |
|  |  | INSERT INTO `categories` VALUES (5, 'Patient ID card', '', 4, 6, 7, 'patients|docs', ''); |
|  |  | INSERT INTO `categories` VALUES (4, 'Patient Information', '', 1, 5, 10, 'patients|demo', ''); |
|  |  | INSERT INTO `categories` VALUES (5, 'Patient ID card', '', 4, 6, 7, 'patients|demo', ''); |
|  |  | INSERT INTO `categories` VALUES (6, 'Advance Directive', '', 1, 11, 18, 'patients|docs','LOINC:LP173418-7'); |
|  |  | INSERT INTO `categories` VALUES (7, 'Do Not Resuscitate Order', '', 6, 12, 13, 'patients|docs', ''); |
|  |  | INSERT INTO `categories` VALUES (8, 'Durable Power of Attorney', '', 6, 14, 15, 'patients|docs', ''); |
|  |  | INSERT INTO `categories` VALUES (9, 'Living Will', '', 6, 16, 17, 'patients|docs', ''); |
|  |  | INSERT INTO `categories` VALUES (10, 'Patient Photograph', '', 4, 8, 9, 'patients|docs', ''); |
|  |  | INSERT INTO `categories` VALUES (10, 'Patient Photograph', '', 4, 8, 9, 'patients|demo', ''); |
|  |  | INSERT INTO `categories` VALUES (11, 'CCR', '', 1, 19, 20, 'patients|docs', ''); |
|  |  | INSERT INTO `categories` VALUES (12, 'CCD', '', 1, 21, 22, 'patients|docs', 'LOINC:34133-9'); |
|  |  | INSERT INTO `categories` VALUES (13, 'CCDA', '', 1, 23, 24, 'patients|docs', ''); |
| Expand Down | |  |

13 changes: 13 additions & 0 deletions

13
[sql/patch.sql](#diff-20c3bc830d99b48902aabbb000b45ab4114d9832d789e914e4b34f2a1174c989 "sql/patch.sql")

Show comments

[View file](/openemr/openemr/blob/953cb84dfd55fee9d5296668ec7fdb8bf25bcea4/sql/patch.sql)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -153,3 +153,16 @@ ALTER TABLE `form\_questionnaire\_assessments` CHANGE `code\_type` `questionnaire\_i |
|  |  | #IfNotRow2D list\_options list\_id Document\_Template\_Categories option\_id questionnaire |
|  |  | INSERT INTO `list\_options` (`list\_id`, `option\_id`, `title`, `seq`, `is\_default`, `option\_value`, `mapping`, `notes`, `codes`, `toggle\_setting\_1`, `toggle\_setting\_2`, `activity`) VALUES ('Document\_Template\_Categories','questionnaire','Questionnaires',10,0,0,'','','',0,0,1); |
|  |  | #EndIf |
|  |  |  |
|  |  | #IfRow2D categories aco\_spec patients|docs name Patient Information |
|  |  | UPDATE `categories` SET `aco\_spec` = 'patients|demo' WHERE `name` = 'Patient Information'; |
|  |  | #EndIf |
|  |  |  |
|  |  | #IfRow2D categories aco\_spec patients|docs name Patient ID card |
|  |  | UPDATE `categories` SET `aco\_spec` = 'patients|demo' WHERE `name` = 'Patient ID card'; |
|  |  | #EndIf |
|  |  |  |
|  |  | #IfRow2D categories aco\_spec patients|docs name Patient Photograph |
|  |  | UPDATE `categories` SET `aco\_spec` = 'patients|demo' WHERE `name` = 'Patient Photograph'; |
|  |  | #EndIf |
|  |  |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `953cb84`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopenemr%2Fopenemr%2Fcommit%2F953cb84dfd55fee9d5296668ec7fdb8bf25bcea4) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


