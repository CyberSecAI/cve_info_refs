=== Content from github.com_4b70c628_20250114_221643.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Feddy8%2FLightCMS)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Feddy8%2FLightCMS)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=eddy8%2FLightCMS)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[eddy8](/eddy8)
/
**[LightCMS](/eddy8/LightCMS)**
Public

* [Notifications](/login?return_to=%2Feddy8%2FLightCMS) You must be signed in to change notification settings
* [Fork
  86](/login?return_to=%2Feddy8%2FLightCMS)
* [Star
   354](/login?return_to=%2Feddy8%2FLightCMS)

LightCMS æ˜¯ä¸€ä¸ªåŸºäº Laravel å¼€å‘çš„è½»é‡çº§ CMS ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªé€šç”¨çš„åå°ç®¡ç†æ¡†æ¶ä½¿ç”¨ã€‚A lightweight cms/admin framework powered by Laravel.

### License

[Apache-2.0 license](/eddy8/LightCMS/blob/10.x/LICENSE)

[354
stars](/eddy8/LightCMS/stargazers) [86
forks](/eddy8/LightCMS/forks) [Branches](/eddy8/LightCMS/branches) [Tags](/eddy8/LightCMS/tags) [Activity](/eddy8/LightCMS/activity)
 [Star](/login?return_to=%2Feddy8%2FLightCMS)

 [Notifications](/login?return_to=%2Feddy8%2FLightCMS) You must be signed in to change notification settings

* [Code](/eddy8/LightCMS)
* [Issues
  1](/eddy8/LightCMS/issues)
* [Pull requests
  0](/eddy8/LightCMS/pulls)
* [Discussions](/eddy8/LightCMS/discussions)
* [Actions](/eddy8/LightCMS/actions)
* [Projects
  0](/eddy8/LightCMS/projects)
* [Security](/eddy8/LightCMS/security)
* [Insights](/eddy8/LightCMS/pulse)

Additional navigation options

* [Code](/eddy8/LightCMS)
* [Issues](/eddy8/LightCMS/issues)
* [Pull requests](/eddy8/LightCMS/pulls)
* [Discussions](/eddy8/LightCMS/discussions)
* [Actions](/eddy8/LightCMS/actions)
* [Projects](/eddy8/LightCMS/projects)
* [Security](/eddy8/LightCMS/security)
* [Insights](/eddy8/LightCMS/pulse)

# eddy8/LightCMS

   Â 10.x[Branches](/eddy8/LightCMS/branches)[Tags](/eddy8/LightCMS/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commitÂ History[497 Commits](/eddy8/LightCMS/commits/10.x/) | | |
| [.github/workflows](/eddy8/LightCMS/tree/10.x/.github/workflows "This path skips through empty directories") | | [.github/workflows](/eddy8/LightCMS/tree/10.x/.github/workflows "This path skips through empty directories") |  |  |
| [app](/eddy8/LightCMS/tree/10.x/app "app") | | [app](/eddy8/LightCMS/tree/10.x/app "app") |  |  |
| [bootstrap](/eddy8/LightCMS/tree/10.x/bootstrap "bootstrap") | | [bootstrap](/eddy8/LightCMS/tree/10.x/bootstrap "bootstrap") |  |  |
| [config](/eddy8/LightCMS/tree/10.x/config "config") | | [config](/eddy8/LightCMS/tree/10.x/config "config") |  |  |
| [database](/eddy8/LightCMS/tree/10.x/database "database") | | [database](/eddy8/LightCMS/tree/10.x/database "database") |  |  |
| [lang/en](/eddy8/LightCMS/tree/10.x/lang/en "This path skips through empty directories") | | [lang/en](/eddy8/LightCMS/tree/10.x/lang/en "This path skips through empty directories") |  |  |
| [public](/eddy8/LightCMS/tree/10.x/public "public") | | [public](/eddy8/LightCMS/tree/10.x/public "public") |  |  |
| [resources](/eddy8/LightCMS/tree/10.x/resources "resources") | | [resources](/eddy8/LightCMS/tree/10.x/resources "resources") |  |  |
| [routes](/eddy8/LightCMS/tree/10.x/routes "routes") | | [routes](/eddy8/LightCMS/tree/10.x/routes "routes") |  |  |
| [storage](/eddy8/LightCMS/tree/10.x/storage "storage") | | [storage](/eddy8/LightCMS/tree/10.x/storage "storage") |  |  |
| [tests](/eddy8/LightCMS/tree/10.x/tests "tests") | | [tests](/eddy8/LightCMS/tree/10.x/tests "tests") |  |  |
| [.env.example](/eddy8/LightCMS/blob/10.x/.env.example ".env.example") | | [.env.example](/eddy8/LightCMS/blob/10.x/.env.example ".env.example") |  |  |
| [.gitattributes](/eddy8/LightCMS/blob/10.x/.gitattributes ".gitattributes") | | [.gitattributes](/eddy8/LightCMS/blob/10.x/.gitattributes ".gitattributes") |  |  |
| [.gitignore](/eddy8/LightCMS/blob/10.x/.gitignore ".gitignore") | | [.gitignore](/eddy8/LightCMS/blob/10.x/.gitignore ".gitignore") |  |  |
| [.styleci.yml](/eddy8/LightCMS/blob/10.x/.styleci.yml ".styleci.yml") | | [.styleci.yml](/eddy8/LightCMS/blob/10.x/.styleci.yml ".styleci.yml") |  |  |
| [.travis.yml](/eddy8/LightCMS/blob/10.x/.travis.yml ".travis.yml") | | [.travis.yml](/eddy8/LightCMS/blob/10.x/.travis.yml ".travis.yml") |  |  |
| [LICENSE](/eddy8/LightCMS/blob/10.x/LICENSE "LICENSE") | | [LICENSE](/eddy8/LightCMS/blob/10.x/LICENSE "LICENSE") |  |  |
| [SECURITY.md](/eddy8/LightCMS/blob/10.x/SECURITY.md "SECURITY.md") | | [SECURITY.md](/eddy8/LightCMS/blob/10.x/SECURITY.md "SECURITY.md") |  |  |
| [artisan](/eddy8/LightCMS/blob/10.x/artisan "artisan") | | [artisan](/eddy8/LightCMS/blob/10.x/artisan "artisan") |  |  |
| [composer.json](/eddy8/LightCMS/blob/10.x/composer.json "composer.json") | | [composer.json](/eddy8/LightCMS/blob/10.x/composer.json "composer.json") |  |  |
| [package.json](/eddy8/LightCMS/blob/10.x/package.json "package.json") | | [package.json](/eddy8/LightCMS/blob/10.x/package.json "package.json") |  |  |
| [phpstan.neon.dist](/eddy8/LightCMS/blob/10.x/phpstan.neon.dist "phpstan.neon.dist") | | [phpstan.neon.dist](/eddy8/LightCMS/blob/10.x/phpstan.neon.dist "phpstan.neon.dist") |  |  |
| [phpunit.xml](/eddy8/LightCMS/blob/10.x/phpunit.xml "phpunit.xml") | | [phpunit.xml](/eddy8/LightCMS/blob/10.x/phpunit.xml "phpunit.xml") |  |  |
| [readme.md](/eddy8/LightCMS/blob/10.x/readme.md "readme.md") | | [readme.md](/eddy8/LightCMS/blob/10.x/readme.md "readme.md") |  |  |
| [server.php](/eddy8/LightCMS/blob/10.x/server.php "server.php") | | [server.php](/eddy8/LightCMS/blob/10.x/server.php "server.php") |  |  |
| [tailwind.js](/eddy8/LightCMS/blob/10.x/tailwind.js "tailwind.js") | | [tailwind.js](/eddy8/LightCMS/blob/10.x/tailwind.js "tailwind.js") |  |  |
| [vite.config.js](/eddy8/LightCMS/blob/10.x/vite.config.js "vite.config.js") | | [vite.config.js](/eddy8/LightCMS/blob/10.x/vite.config.js "vite.config.js") |  |  |
| [webpack.mix.js](/eddy8/LightCMS/blob/10.x/webpack.mix.js "webpack.mix.js") | | [webpack.mix.js](/eddy8/LightCMS/blob/10.x/webpack.mix.js "webpack.mix.js") |  |  |
| View all files | | |

## Repository files navigation

* README
* Apache-2.0 license
* Security
# LightCMS

[![Scrutinizer Code Quality](https://camo.githubusercontent.com/f8388f94297603baf8c9069e868820747ac18dccf37d931c3a5e74b194f65f96/68747470733a2f2f7363727574696e697a65722d63692e636f6d2f672f65646479382f6c69676874434d532f6261646765732f7175616c6974792d73636f72652e706e673f623d6d6173746572)](https://scrutinizer-ci.com/g/eddy8/lightCMS/?branch=master) [![StyleCI](https://camo.githubusercontent.com/0f4cd64bd043d397655988dd1257ca4f0fb9cb8205a9c055fd42f40510176640/68747470733a2f2f6769746875622e7374796c6563692e696f2f7265706f732f3137353432383936392f736869656c643f6272616e63683d6d6173746572)](https://github.styleci.io/repos/175428969) [![Build Status](https://camo.githubusercontent.com/67c3dab0e989cd9112b0899d52af5728f159751af92756a5464aaf4b2961f885/68747470733a2f2f7777772e7472617669732d63692e6f72672f65646479382f6c69676874434d532e7376673f6272616e63683d6d6173746572)](https://www.travis-ci.org/eddy8/lightCMS) [![PHP Version](https://camo.githubusercontent.com/8370bd2f675493721dac6fc2264adf025dcd7cfcfd5dbd39a73f6f8d15c40301/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f7068702d253345253344382e312e302d3838393242462e737667)](http://www.php.net/)

## é¡¹ç›®ç®€ä»‹

`lightCMS`æ˜¯ä¸€ä¸ªè½»é‡çº§çš„`CMS`ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªé€šç”¨çš„åå°ç®¡ç†æ¡†æ¶ä½¿ç”¨ã€‚`lightCMS`é›†æˆäº†ç”¨æˆ·ç®¡ç†ã€æƒé™ç®¡ç†ã€æ—¥å¿—ç®¡ç†ã€èœå•ç®¡ç†ç­‰åå°ç®¡ç†æ¡†æ¶çš„é€šç”¨åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿæä¾›æ¨¡å‹ç®¡ç†ã€åˆ†ç±»ç®¡ç†ç­‰`CMS`ç³»ç»Ÿä¸­å¸¸ç”¨çš„åŠŸèƒ½ã€‚`lightCMS`çš„**ä»£ç ä¸€é”®ç”Ÿæˆ**åŠŸèƒ½å¯ä»¥å¿«é€Ÿå¯¹ç‰¹å®šæ¨¡å‹ç”Ÿæˆå¢åˆ æ”¹æŸ¥ä»£ç ï¼Œæå¤§æé«˜å¼€å‘æ•ˆç‡ã€‚

`lightCMS`åŸºäº`Laravel 10.x`å¼€å‘ï¼Œå‰ç«¯æ¡†æ¶åŸºäº`layui`ã€‚

æ¼”ç¤ºç«™ç‚¹ï¼š[LightCMS Demo](http://lightcms.bituier.com/admin/login)ã€‚ç™»å½•ä¿¡æ¯ï¼šadmin/adminã€‚è¯·å‹¿å­˜å‚¨/åˆ é™¤é‡è¦æ•°æ®ï¼Œæ•°æ®åº“ä¼šå®šæ—¶é‡ç½®ã€‚

`LightCMS&Laravel`å­¦ä¹ äº¤æµQQç¾¤ï¼š**972796921**

ç‰ˆæœ¬åº“åˆ†æ”¯è¯´æ˜ï¼š

| åˆ†æ”¯åç§° | Laravelç‰ˆæœ¬ | ç»´æŠ¤ä¸­ | å¤‡æ³¨ |
| --- | --- | --- | --- |
| 10.x | 10.x | æ˜¯ |  |
| 9.x | 9.x | æ˜¯ | å»ºè®®ä½¿ç”¨ |
| 8.x | 8.x | å¦ |  |
| 7.x | 7.x | å¦ |  |
| master | 6.x | å¦ |  |
| 5.5 | 5.5 | å¦ |  |

## åŠŸèƒ½ç‚¹ä¸€è§ˆ

åå°ï¼š

* åŸºäº`RBAC`çš„æƒé™ç®¡ç†
* ç®¡ç†å‘˜ã€æ—¥å¿—ã€èœå•ç®¡ç†
* åˆ†ç±»ç®¡ç†
* æ ‡ç­¾ç®¡ç†
* é…ç½®ç®¡ç†
* æ¨¡å‹ã€æ¨¡å‹å­—æ®µã€æ¨¡å‹å†…å®¹ç®¡ç†ï¼ˆåå°å¯è‡ªå®šä¹‰ä¸šåŠ¡æ¨¡å‹ï¼Œæ–¹ä¾¿å‚ç›´è¡Œä¸šå¿«é€Ÿå¼€å‘ï¼‰
* ä¼šå‘˜ç®¡ç†
* è¯„è®ºç®¡ç†
* åŸºäºTireç®—æ³•çš„æ•æ„Ÿè¯è¿‡æ»¤ç³»ç»Ÿ
* æ™®é€šæ¨¡å‹å¢åˆ æ”¹æŸ¥ä»£ç ä¸€é”®ç”Ÿæˆ

å‰å°ï¼š

* ç”¨æˆ·æ³¨å†Œç™»å½•ï¼ˆåŒ…æ‹¬å¾®ä¿¡ã€QQã€å¾®åšä¸‰æ–¹ç™»å½•ï¼‰
* æ¨¡å‹å†…å®¹è¯¦æƒ…é¡µã€åˆ—è¡¨é¡µ
* è¯„è®ºç›¸å…³

æ›´å¤šåŠŸèƒ½å¾…ä½ å‘ç°~

## åå°é¢„è§ˆ

[![é¦–é¡µ](https://user-images.githubusercontent.com/2555476/54804611-16fa4900-4caf-11e9-885e-7f5c0dac7ce4.png)](https://user-images.githubusercontent.com/2555476/54804611-16fa4900-4caf-11e9-885e-7f5c0dac7ce4.png)

[![ç³»ç»Ÿç®¡ç†](https://user-images.githubusercontent.com/2555476/54804599-0ea20e00-4caf-11e9-8d10-526aca358916.png)](https://user-images.githubusercontent.com/2555476/54804599-0ea20e00-4caf-11e9-8d10-526aca358916.png)

## ç³»ç»Ÿç¯å¢ƒ

`linux/windows & nginx/apache/iis & mysql 5.5+ & php 8.1.0+`

* PHP >= 8.1.0
* OpenSSL PHP Extension
* PDO PHP Extension
* Mbstring PHP Extension
* Tokenizer PHP Extension
* XML PHP Extension
* GD PHP Extension

**æ³¨æ„äº‹é¡¹**

* å¦‚æœç¼“å­˜ã€é˜Ÿåˆ—ã€sessionç”¨çš„æ˜¯ redis é©±åŠ¨ï¼Œé‚£è¿˜éœ€è¦å®‰è£… redis å’Œ php redis æ‰©å±•
* å¦‚æœ`PHP`å®‰è£…äº†`opcache`æ‰©å±•ï¼Œè¯·å¯ç”¨`opcache.save_comments`å’Œ`opcache.load_comments`é…ç½®ï¼ˆé»˜è®¤æ˜¯å¯ç”¨çš„ï¼‰ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸ä½¿ç”¨[èœå•è‡ªåŠ¨è·å–](#%E8%8F%9C%E5%8D%95%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96)åŠŸèƒ½

## ç³»ç»Ÿéƒ¨ç½²

### è·å–ä»£ç å¹¶å®‰è£…ä¾èµ–

é¦–å…ˆè¯·ç¡®ä¿ç³»ç»Ÿå·²å®‰è£…å¥½[composer](https://getcomposer.org/)ã€‚å›½å†…ç”¨æˆ·å»ºè®®å…ˆ[è®¾ç½® composer é•œåƒ](https://developer.aliyun.com/composer)ï¼Œé¿å…å®‰è£…è¿‡ç¨‹ç¼“æ…¢ã€‚

```
cd /data/www
git clone git@github.com:eddy8/LightCMS.git
cd LightCMS
composer install
```

### ç³»ç»Ÿé…ç½®å¹¶åˆå§‹åŒ–

è®¾ç½®ç›®å½•æƒé™ï¼š`storage/`å’Œ`bootstrap/cache/`ç›®å½•éœ€è¦å†™å…¥æƒé™ã€‚

```
# æ­¤å¤„æƒé™è®¾ç½®ä¸º777åªæ˜¯ä¸ºäº†æ¼”ç¤ºæ“ä½œæ–¹ä¾¿ï¼Œå®é™…åªéœ€è¦ç»™webæœåŠ¡å™¨å†™å…¥æƒé™å³å¯
sudo chmod 777 -R storage/ bootstrap/cache/
```

æ–°å»ºä¸€ä»½ç¯å¢ƒé…ç½®ï¼Œå¹¶é…ç½®å¥½æ•°æ®åº“ç­‰ç›¸å…³é…ç½®:

```
cp .env.example .env

```

åˆå§‹åŒ–ç³»ç»Ÿï¼š

```
php artisan migrate --seed

```

### é…ç½®WebæœåŠ¡å™¨ï¼ˆæ­¤å¤„ä»¥`Nginx`ä¸ºä¾‹ï¼‰

```
server {
    listen 80;
    server_name light.com;
    root /data/www/lightCMS/public;
    index index.php index.html index.htm;

    add_header X-Frame-Options "SAMEORIGIN";

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~* \.(txt|doc|pdf|rar|gz|zip|docx|exe|xlsx|ppt|pptx)$ {
        add_header Content-Disposition Attachment;
        add_header X-Content-Type-Options nosniff;
    }

    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        #ä¸åŒé…ç½®å¯¹åº”ä¸åŒçš„ç¯å¢ƒé…ç½®æ–‡ä»¶ã€‚æ¯”å¦‚æ­¤å¤„åº”ç”¨ä¼šåŠ è½½.env.proæ–‡ä»¶ï¼Œé»˜è®¤ä¸é…ç½®ä¼šåŠ è½½.envæ–‡ä»¶ã€‚æ­¤å¤„å¯æ ¹æ®é¡¹ç›®éœ€è¦è‡ªè¡Œé…ç½®ã€‚
        #fastcgi_param   APP_ENV pro;
        include fastcgi_params;
    }
}

```

### åå°ç™»é™†

åå°è®¿é—®åœ°å€ï¼š`/admin/login`

é»˜è®¤ç”¨æˆ·ï¼ˆæ­¤ç”¨æˆ·ä¸ºè¶…çº§ç”¨æˆ·ï¼Œä¸å—æƒé™ç®¡ç†é™åˆ¶ï¼‰ï¼šadmin/admin

## æƒé™ç®¡ç†

åŸºäºè§’è‰²çš„æƒé™ç®¡ç†ã€‚åªéœ€æ–°å»ºå¥½è§’è‰²ï¼Œç»™å¯¹åº”çš„è§’è‰²åˆ†é…å¥½ç›¸åº”çš„æƒé™ï¼Œæœ€åç»™ç”¨æˆ·æŒ‡å®šè§’è‰²å³å¯ã€‚`lightCMS`ä¸­æƒé™çš„æ¦‚å¿µå…¶å®å°±æ˜¯èœå•ï¼Œä¸€æ¡èœå•å¯¹åº”ä¸€ä¸ª`laravel`çš„è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå…·ä½“çš„æ“ä½œã€‚

### èœå•è‡ªåŠ¨è·å–

åªéœ€è¦æŒ‰çº¦å®šæ–¹å¼å†™å¥½æŒ‡å®šè·¯ç”±çš„æ§åˆ¶å™¨æ³¨é‡Šï¼Œåˆ™å¯åœ¨[èœå•ç®¡ç†](/eddy8/LightCMS/blob/10.x/admin/menus)é¡µé¢è‡ªåŠ¨æ·»åŠ /æ›´æ–°å¯¹åº”çš„èœå•ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š

```
/**
 * è§’è‰²ç®¡ç†-è§’è‰²åˆ—è¡¨
 *
 * å–æ–¹æ³•çš„ç¬¬ä¸€è¡Œæ³¨é‡Šä½œä¸ºèœå•çš„åç§°ã€åˆ†ç»„åã€‚æ³¨é‡Šæ ¼å¼ï¼šåˆ†ç»„åç§°-èœå•åç§°ã€‚
 * æœªå†™åˆ†ç»„åç§°ï¼Œåˆ™ç›´æ¥ä½œä¸ºèœå•åç§°ï¼Œåˆ†ç»„åä¸ºç©ºã€‚
 * æœªå†™æ³¨é‡Šåˆ™é€‰ç”¨uriä½œä¸ºèœå•åï¼Œåˆ†ç»„åä¸ºç©ºã€‚
 */
public function index()
{
    $this->breadcrumb[] = ['title' => 'è§’è‰²åˆ—è¡¨', 'url' => ''];
    return view('admin.role.index', ['breadcrumb' => $this->breadcrumb]);
}
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¨‹åºå¯ä»¥è‡ªåŠ¨è·å–èœå•ï¼Œä½†æ˜¯èœå•çš„å±‚çº§å…³ç³»è¿˜æ˜¯éœ€è¦åœ¨åå°æ‰‹åŠ¨é…ç½®çš„ã€‚

## é…ç½®ç®¡ç†

é¦–å…ˆéœ€è¦å°†`config/light.php`é…ç½®æ–‡ä»¶ä¸­çš„`light_config`è®¾ç½®ä¸º`true`ï¼š

ç„¶ååªéœ€åœ¨[é…ç½®ç®¡ç†](/eddy8/LightCMS/blob/10.x/admin/configs)é¡µé¢æ–°å¢é…ç½®é¡¹æˆ–ç¼–è¾‘å·²å­˜åœ¨é…ç½®é¡¹ï¼Œåˆ™åœ¨åº”ç”¨ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨`laravel`çš„é…ç½®è·å–å‡½æ•°`config`è·å–æŒ‡å®šé…ç½®ï¼Œä¾‹å¦‚ï¼š

```
// è·å– key ä¸º SITE_NAME çš„é…ç½®é¡¹å€¼
$siteName = config('light_config.SITE_NAME');
```

ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨å…¨å±€å‡½æ•°`function getConfig($key, $default = null)`è·å–é…ç½®ã€‚

## æ ‡ç­¾ç®¡ç†

æ¨¡å‹å†…å®¹**æ‰“æ ‡ç­¾**æ˜¯ç«™ç‚¹çš„ä¸€é¡¹å¸¸ç”¨åŠŸèƒ½ï¼Œ`lightCMS`å†…ç½®äº†æ‰“æ ‡ç­¾åŠŸèƒ½ã€‚æ·»åŠ æ¨¡å‹å­—æ®µæ—¶é€‰æ‹©è¡¨å•ç±»å‹ä¸º`æ ‡ç­¾è¾“å…¥æ¡†`å³å¯ã€‚

`lightCMS`é‡‡ç”¨ä¸­é—´è¡¨ï¼ˆcontent\_tagsï¼‰æ¥å®ç°æ ‡ç­¾å’Œæ¨¡å‹å†…å®¹çš„å¤šå¯¹å¤šå…³è”å…³ç³»ã€‚

## æ¨¡å‹ç®¡ç†

`lightCMS`æ”¯æŒåœ¨åå°ç›´æ¥åˆ›å»ºæ¨¡å‹ï¼Œå¹¶å¯å¯¹æ¨¡å‹çš„è¡¨å­—æ®µè¿›è¡Œè‡ªå®šä¹‰è®¾ç½®ã€‚è®¾ç½®å®Œæ¨¡å‹å­—æ®µåï¼Œå°±ä¸éœ€è¦åšå…¶å®ƒå·¥ä½œäº†ï¼Œæ¨¡å‹çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ç³»ç»Ÿå·²ç»å†…ç½®ã€‚

è¿™é‡Œè¯´æ˜ä¸‹æ¨¡å‹çš„è¡¨å•éªŒè¯åŠåç«¯çš„ä¿å­˜å’Œæ›´æ–°å¤„ç†ã€‚å¦‚æœæœ‰è‡ªå®šä¹‰è¡¨å•éªŒè¯éœ€æ±‚ï¼Œåªéœ€åœ¨`app/Http/Request/Admin/Entity`ç›®å½•ä¸‹åˆ›å»ºæ¨¡å‹çš„è¡¨å•è¯·æ±‚éªŒè¯ç±»å³å¯ã€‚ç±»åçš„å‘½åè§„åˆ™ï¼š**æ¨¡å‹å+Request**ã€‚ä¾‹å¦‚`User`æ¨¡å‹å¯¹åº”çš„è¡¨å•è¯·æ±‚éªŒè¯ç±»ä¸º`UserRequest`ã€‚

å¦‚æœæƒ³è‡ªå®šä¹‰æ¨¡å‹çš„æ–°å¢/ç¼–è¾‘å‰ç«¯æ¨¡æ¿ï¼Œåªéœ€åœ¨`app/resources/views/admin/content`ç›®å½•ä¸‹åˆ›å»ºæ¨¡æ¿æ–‡ä»¶å³å¯ã€‚æ¨¡æ¿æ–‡ä»¶çš„å‘½åéœ€éµå¾ªå¦‚ä¸‹å‘½åè§„åˆ™ï¼š**æ¨¡å‹å\_add.blade.php**ã€‚ä¾‹å¦‚`User`æ¨¡å‹å¯¹åº”çš„æ¨¡æ¿æ–‡ä»¶åä¸º`user_add.blade.php`ã€‚

å¦‚æœæƒ³è‡ªå®šä¹‰æ¨¡å‹çš„ä¿å­˜å’Œæ›´æ–°å¤„ç†é€»è¾‘ï¼Œåªéœ€åœ¨`app/Http/Controllers/Admin/Entity`ç›®å½•ä¸‹åˆ›å»ºæ¨¡å‹çš„æ§åˆ¶å™¨ç±»å³å¯ï¼Œ`save`å’Œ`update`æ–¹æ³•å®ç°å¯å‚è€ƒ`app/Http/Controllers/Admin/ContentController`ã€‚ç±»åçš„å‘½åè§„åˆ™ï¼š**æ¨¡å‹å+Controller**ã€‚ä¾‹å¦‚`User`æ¨¡å‹å¯¹åº”çš„æ§åˆ¶å™¨ç±»ä¸º`UserController`ã€‚åŒç†ï¼Œå¦‚æœæƒ³è‡ªå®šä¹‰åˆ—è¡¨é¡µï¼ŒæŒ‰ä¸Šè¿°è§„åˆ™å®šä¹‰`index`å’Œ`list`æ–¹æ³•å³å¯ã€‚

å¦å¤–ï¼Œæ¨¡å‹å†…å®¹åœ¨æ–°å¢ã€æ›´æ–°ã€åˆ é™¤æ—¶ç³»ç»Ÿä¼šè§¦å‘ç›¸åº”çš„äº‹ä»¶ï¼Œä½ å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶åšç›¸åº”çš„ä¸šåŠ¡å¤„ç†ã€‚ä¸‹è¡¨æ‰€ç¤ºä¸ºç›¸åº”çš„äº‹ä»¶è¯´æ˜ï¼š

| äº‹ä»¶å | äº‹ä»¶å‚æ•° | è§¦å‘æ—¶é—´ | å¤‡æ³¨ |
| --- | --- | --- | --- |
| App\Events\ContentCreating | Illuminate\Http\Request $request, App\Model\Admin\Entity $entity | æ–°å¢å†…å®¹å‰ |  |
| App\Events\ContentCreated | App\Model\Admin\Content $content, App\Model\Admin\Entity $entity | æ–°å¢å†…å®¹å |  |
| App\Events\ContentUpdating | Illuminate\Http\Request $request, App\Model\Admin\Entity $entity | æ›´æ–°å†…å®¹å‰ |  |
| App\Events\ContentUpdated | Array $id, App\Model\Admin\Entity $entity | æ›´æ–°å†…å®¹å | $id ä¸ºæ›´æ–°å†…å®¹çš„ ID åˆé›† |
| App\Events\ContentDeleting | Illuminate\Support\Collection $contents, App\Model\Admin\Entity $entity | åˆ é™¤å†…å®¹å‰ | $contents ä¸ºè¢«åˆ é™¤å†…å®¹çš„ App\Model\Admin\Content å¯¹è±¡åˆé›† |
| App\Events\ContentDeleted | Illuminate\Support\Collection $contents, App\Model\Admin\Entity $entity | åˆ é™¤å†…å®¹å | $contents ä¸ºè¢«åˆ é™¤å†…å®¹çš„ App\Model\Admin\Content å¯¹è±¡åˆé›† |
| App\Events\ContentCreateShow | App\Model\Admin\Entity $entity, App\Foundation\ViewData $viewData | æ–°å¢å†…å®¹è¡¨å•å±•ç¤ºå‰ | é€šè¿‡è°ƒç”¨$viewDataçš„addCssã€addJsã€addTemplateæ–¹æ³•ï¼Œæ³¨å…¥è‡ªå®šä¹‰cssæ–‡ä»¶ã€jsæ–‡ä»¶ã€æ¨¡æ¿è‡³æ–°å¢è¡¨å•ä¸­ |
| App\Events\ContentEditShow | App\Model\Admin\Entity $entity, Illuminate\Database\Eloquent\Model $model, App\Foundation\ViewData $viewData | æ›´æ–°å†…å®¹è¡¨å•å±•ç¤ºå‰ | é€šè¿‡è°ƒç”¨$viewDataçš„addCssã€addJsã€addTemplateæ–¹æ³•ï¼Œæ³¨å…¥è‡ªå®šä¹‰cssæ–‡ä»¶ã€jsæ–‡ä»¶ã€æ¨¡æ¿è‡³æ›´æ–°è¡¨å•ä¸­ |
| App\Events\ContentListShow | int $entityId | å†…å®¹åˆ—è¡¨é¡µå±•ç¤ºå‰ | ä¸€èˆ¬ç”¨äºè‡ªå®šä¹‰å†…å®¹åˆ—è¡¨é¡µå±•ç¤ºå­—æ®µã€æœç´¢å­—æ®µç­‰ |
| App\Events\ContentListDataReturning | int $entityId, Illuminate\Contracts\Pagination\Paginator $data | å†…å®¹åˆ—è¡¨é¡µæ•°æ®æ¥å£è¿”å›å†…å®¹å‰ | ä¸€èˆ¬ç”¨äºè‡ªå®šä¹‰å†…å®¹åˆ—è¡¨é¡µæ•°æ®æ¥å£è¿”å›æ•°æ® |

### æ¨¡å‹å­—æ®µè¡¨å•ç±»å‹ç›¸å…³è¯´æ˜

å¯¹äºæ”¯æŒè¿œç¨‹æœç´¢çš„`select`è¡¨å•ç±»å‹ï¼Œåç«¯ API æœç´¢æ¥å£éœ€è¿”å›çš„æ•°æ®æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºã€‚codeä¸º0æ—¶, è¡¨ç¤ºæ­£å¸¸, åä¹‹å¼‚å¸¸ã€‚

```
{
    "code": 0,
    "msg": "success",
    "data": [
        {"name":"åŒ—äº¬","value":1,"selected":"","disabled":""},
        {"name":"ä¸Šæµ·","value":2,"selected":"","disabled":""},
        {"name":"å¹¿å·","value":3,"selected":"selected","disabled":""},
        {"name":"æ·±åœ³","value":4,"selected":"","disabled":"disabled"},
        {"name":"å¤©æ´¥","value":5,"selected":"","disabled":""}
    ]
}
```

å¯¹äºçŸ­æ–‡æœ¬ï¼ˆinputï¼Œè‡ªåŠ¨å®Œæˆï¼‰è¡¨å•ç±»å‹ï¼Œåç«¯ API æ¥å£éœ€è¿”å›çš„æ•°æ®æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š

```
{
    "suggestions": [
        "cms",
        "cmsæ˜¯ä»€ä¹ˆæ„æ€å•Š",
        "cmsæ˜¯æŒ‡çš„ä»€ä¹ˆæ„æ€å•Š",
        "cmæ˜¯ä»€ä¹ˆå•ä½",
        "æ²‰é»˜æ˜¯é‡‘",
        "cmæ˜¯å˜ç±³è¿˜æ˜¯åˆ†ç±³",
        "cmæ˜¯ä»€ä¹ˆ",
        "cmæ˜¯ä»€ä¹ˆæ„æ€å•Š",
        "cmæ˜¯ä»€ä¹ˆæ„æ€å•ä½",
        "cmæ˜¯ä»€ä¹ˆå•ä½çš„åç§°"
    ]
}
```

å¯¹äº`select`å¤šé€‰ç±»å‹è¡¨å•ï¼Œé»˜è®¤æ•°æ®åº“ä¿å­˜å€¼ä¸ºåŠè§’é€—å·åˆ†éš”çš„å¤šä¸ªé€‰æ‹©å€¼ã€‚å½“ä½ è®¾ç½®å­—æ®µç±»å‹ä¸ºæ— ç¬¦å·æ•´å‹æ—¶ï¼Œæ•°æ®åº“ä¼šä¿å­˜å¤šä¸ªé€‰æ‹©å€¼çš„æ±‚å’Œå€¼ï¼ˆå½“ç„¶å‰ææ˜¯é€‰æ‹©å€¼éƒ½æ˜¯æ•´å‹æ•°æ®ï¼‰ã€‚

### æœç´¢å­—æ®µï¼ˆ$searchFieldï¼‰é…ç½®è¯´æ˜

é€šè¿‡é…ç½®æœç´¢å­—æ®µï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨æ¨¡å‹çš„åˆ—è¡¨é¡µå±•ç¤ºæœç´¢é¡¹ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹é…ç½®ï¼š

```
    public static $searchField = [
        'name' => 'ç”¨æˆ·å', // inputæœç´¢ç±»å‹ã€‚key ä¸ºå­—æ®µåç§°ï¼Œvalue ä¸ºæ ‡é¢˜
        'status' => [ // key ä¸ºå­—æ®µåç§°ï¼Œvalue ä¸ºç›¸å…³é…ç½®
            'showType' => 'select', // ä¸‹æ‹‰æ¡†é€‰æ‹©æœç´¢ç±»å‹
            'searchType' => '=', // è¯´æ˜å­—æ®µåœ¨æ•°æ®åº“çš„æœç´¢åŒ¹é…æ–¹å¼ï¼Œé»˜è®¤ä¸ºlikeæŸ¥è¯¢
            'title' => 'çŠ¶æ€', // æ ‡é¢˜
            'enums' => [ // selectä¸‹æ‹‰æœç´¢é¡¹
                0 => 'ç¦ç”¨',
                1 => 'å¯ç”¨',
            ],
        ],
        'recommend' => [ // key ä¸ºå­—æ®µåç§°ï¼Œvalue ä¸ºç›¸å…³é…ç½®
            'showType' => 'select', // ä¸‹æ‹‰æ¡†é€‰æ‹©æœç´¢ç±»å‹
            'searchType' => 'whereRaw', // å¯¹äºä¸€äº›ç‰¹æ®Šçš„æŸ¥è¯¢æ¡ä»¶ï¼Œæ— æ³•é€šè¿‡ä¸Šè¿°æ™®é€šçš„æœç´¢åŒ¹é…å€¼æ¥å®ç°æ—¶ï¼Œå¯å°†æ­¤å€¼è®¾ç½®ä¸º whereRaw
            'searchCondition' => 'recommend & ? = ?', // ä¸ whereRaw é…åˆä½¿ç”¨ï¼Œ? è¡¨ç¤ºæŸ¥è¯¢æ¡ä»¶å€¼å‚æ•°ç»‘å®šã€‚ä¾‹ï¼šå¦‚æœç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢å€¼ä¸º 2ï¼Œåˆ™æœ€ç»ˆç”Ÿæˆçš„ sql æŸ¥è¯¢æ¡ä»¶æ˜¯ï¼š recommend & 2 = 2
            'title' => 'æ¨èä½', // æ ‡é¢˜
            'enums' => [ // selectä¸‹æ‹‰æœç´¢é¡¹
                1 => 'æ¨èä½1',
                2 => 'æ¨èä½2',
                4 => 'æ¨èä½3',
            ],
        ],
        'created_at' => [ // key ä¸ºå­—æ®µåç§°ï¼Œvalue ä¸ºç›¸å…³é…ç½®
            'showType' => 'datetime', // æ—¥æœŸæ—¶é—´æœç´¢ç±»å‹
            'title' => 'åˆ›å»ºæ—¶é—´' // æ ‡é¢˜
        ]
    ];
```

### åˆ—è¡¨å­—æ®µï¼ˆ$listFieldï¼‰é…ç½®è¯´æ˜

é€šè¿‡é…ç½®åˆ—è¡¨å­—æ®µï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨æ¨¡å‹çš„åˆ—è¡¨é¡µå±•ç¤ºåˆ—è¡¨é¡¹ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹é…ç½®ï¼š

```
    public static $listField = [
        // pid æ˜¯åˆ—è¡¨å­—æ®µåï¼ˆä¸ä¸€å®šæ˜¯æ¨¡å‹æ•°æ®åº“è¡¨çš„å­—æ®µåï¼Œåªè¦åˆ—è¡¨æ•°æ®æ¥å£è¿”å›æ•°æ®åŒ…å«è¯¥å­—æ®µå³å¯ï¼‰;titleã€widthã€sort ç­‰å±æ€§å‚è€ƒ layui çš„ table ç»„ä»¶è¡¨å¤´å‚æ•°é…ç½®å³å¯
        'pid' => ['title' => 'çˆ¶ID', 'width' => 80],
        'entityName' => ['title' => 'æ¨¡å‹', 'width' => 100],
        'userName' => ['title' => 'ç”¨æˆ·å', 'width' => 100],
        'content' => ['title' => 'å†…å®¹', 'width' => 400],
        'reply_count' => ['title' => 'å›å¤æ•°', 'width' => 80, 'sort' => true],
        'like' => ['title' => 'å–œæ¬¢', 'width' => 80, 'sort' => true],
        'dislike' => ['title' => 'ä¸å–œæ¬¢', 'width' => 80, 'sort' => true],
    ];
```

### åˆ—è¡¨æ“ä½œé¡¹ï¼ˆ$actionFieldï¼‰é…ç½®è¯´æ˜

é€šè¿‡é…ç½®åˆ—è¡¨æ“ä½œé¡¹ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨æ¨¡å‹çš„åˆ—è¡¨é¡µæ“ä½œåˆ—æ·»åŠ è‡ªå®šä¹‰é“¾æ¥ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹é…ç½®ï¼š

```
    public static $actionField = [
        // chapterUrl æ˜¯å­—æ®µåï¼ˆä¸ä¸€å®šæ˜¯æ¨¡å‹æ•°æ®åº“è¡¨çš„å­—æ®µåï¼Œåªè¦åˆ—è¡¨æ•°æ®æ¥å£è¿”å›æ•°æ®åŒ…å«è¯¥å­—æ®µå³å¯ï¼‰
        'chapterUrl' => ['title' => 'ç« èŠ‚', 'description' => 'å½“å‰å°è¯´çš„æ‰€æœ‰ç« èŠ‚'],
    ];
```

### æ’åºå­—æ®µï¼ˆ$sortFieldsï¼‰é…ç½®è¯´æ˜

é€šè¿‡é…ç½®æ’åºå­—æ®µï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨æ¨¡å‹çš„åˆ—è¡¨é¡µè‡ªå®šä¹‰æ•°æ®çš„æ’åºè§„åˆ™ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹é…ç½®ï¼š

```
    public static $actionField = [
        // æ•°ç»„çš„é”®ä¸ºæ’åºå­—æ®µåå’Œå‡åº/é™åºé…ç½®ï¼ˆåŠè§’é€—å·åˆ†éš”ï¼‰ï¼Œå€¼ä¸ºå‰å°å±•ç¤ºåç§°
        'updated_at,desc' => 'æ›´æ–°æ—¶é—´ï¼ˆé™åºï¼‰',
        'id,asc' => 'idï¼ˆå‡åºï¼‰',
    ];
```

### æŒ‰é’®å­—æ®µï¼ˆ$btnFieldï¼‰é…ç½®è¯´æ˜

é€šè¿‡é…ç½®æŒ‰é’®å­—æ®µï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨æ¨¡å‹çš„åˆ—è¡¨é¡µè‡ªå®šä¹‰æ“ä½œæŒ‰é’®ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹é…ç½®ï¼š

```
    public static $btnField = [
        [
            'title' => 'Google',
            'description' => 'æœç´¢å¼•æ“',
            'url' => 'https://www.google.com',
            'target' => '_blank',
            'class' => '',
        ],
    ];
```
> å°æç¤ºï¼šå¦‚æœä½ æ˜¯è‡ªå®šä¹‰æ¨¡å‹ï¼Œå»ºè®®è‡ªå®šä¹‰æ¨¡å‹ç»§æ‰¿`App\Model\Admin\Model`æ¨¡å‹ï¼Œæ–¹ä¾¿å¯¹ä¸Šè¿°é…ç½®é¡¹è¿›è¡Œè‡ªå®šä¹‰ã€‚

> é€šè¿‡ç›‘å¬ç‰¹å®šçš„äº‹ä»¶æ¥é…ç½®ä¸Šè¿°å±æ€§ï¼Œå¯ä»¥æ–¹ä¾¿çš„è‡ªå®šä¹‰å„ç§å±•ç¤ºæ•ˆæœã€‚

## ç³»ç»Ÿæ—¥å¿—

`lightCMS`é›†æˆäº†ä¸€å¥—ç®€å•çš„æ—¥å¿—ç³»ç»Ÿï¼Œé»˜è®¤æƒ…å†µä¸‹è®°å½•åå°çš„æ‰€æœ‰æ“ä½œç›¸å…³ä¿¡æ¯ï¼Œå…·ä½“å®ç°å¯ä»¥å‚è€ƒ`Log`ä¸­é—´ä»¶ã€‚

å¯ä»¥åˆ©ç”¨`Laravel`çš„[ä»»åŠ¡è°ƒåº¦](https://laravel.com/docs/5.8/scheduling#introduction)æ¥è‡ªåŠ¨æ¸…ç†ç³»ç»Ÿæ—¥å¿—ã€‚å¯ç”¨ä»»åŠ¡è°ƒåº¦éœ€è¦åœ¨ç³»ç»Ÿçš„è®¡åˆ’ä»»åŠ¡ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```
* * * * * cd /path-to-your-project && php artisan schedule:run >> /dev/null 2>&1

```

å¯ä»¥é€šè¿‡é…ç½®`log_async_write`é¡¹æ¥å†³å®šæ˜¯å¦å¯ç”¨å¼‚æ­¥å†™å…¥æ—¥å¿—ï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰ï¼Œå¼‚æ­¥å†™å…¥æ—¥å¿—éœ€è¦è¿è¡Œ`Laravel`çš„[é˜Ÿåˆ—å¤„ç†å™¨](https://laravel.com/docs/5.8/queues#running-the-queue-worker)ï¼š

```
php artisan queue:work
```

## ä»£ç ä¸€é”®ç”Ÿæˆ

å¯¹äºä¸€ä¸ªæ™®é€šçš„æ¨¡å‹ï¼Œç®¡ç†åå°é€šå¸¸æœ‰å¢åˆ æ”¹æŸ¥ç›¸å…³çš„ä¸šåŠ¡éœ€æ±‚ã€‚`lightCMS`æ‹¥æœ‰ä¸€é”®ç”Ÿæˆç›¸å…³ä»£ç çš„èƒ½åŠ›ï¼Œåœ¨å»ºå¥½æ¨¡å‹çš„æ•°æ®åº“è¡¨ç»“æ„åï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹`artisan`å‘½ä»¤ç”Ÿæˆç›¸å…³ä»£ç ï¼š

```
# config ä¸ºæ¨¡å‹åç§° é…ç½® ä¸ºæ¨¡å‹ä¸­æ–‡åç§°
php artisan light:basic config é…ç½®
```

æˆåŠŸæ‰§è¡Œå®Œæˆåï¼Œä¼šåˆ›å»ºå¦‚ä¸‹æ–‡ä»¶ï¼ˆæ³¨æ„ï¼šç›¸å…³ç›®å½•éœ€è¦æœ‰å†™å…¥æƒé™ï¼‰ï¼š

* routes/auto/config.php
  è·¯ç”±ï¼šåŒ…å«æ¨¡å‹å¢åˆ æ”¹æŸ¥ç›¸å…³è·¯ç”±ï¼Œåº”ç”¨ä¼šè‡ªåŠ¨åŠ è½½`routes/auto/`ç›®å½•ä¸‹çš„è·¯ç”±ã€‚
* app/Model/Admin/Config.php
  æ¨¡å‹ï¼š[$searchField](#%E6%90%9C%E7%B4%A2%E5%AD%97%E6%AE%B5searchField%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E) å±æ€§ç”¨æ¥é…ç½®æœç´¢å­—æ®µï¼Œ[$listField](#%E5%88%97%E8%A1%A8%E5%AD%97%E6%AE%B5listfield%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E) ç”¨æ¥é…ç½®åˆ—è¡¨è§†å›¾ä¸­éœ€è¦å±•ç¤ºå“ªäº›å­—æ®µæ•°æ®ã€‚
* app/Repository/Admin/ConfigRepository.php
  æ¨¡å‹æœåŠ¡å±‚ï¼šé»˜è®¤æœ‰ä¸€ä¸ª`list`æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨æ¥è¿”å›åˆ—è¡¨æ•°æ®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœåˆ—è¡¨ä¸­çš„æ•°æ®ä¸èƒ½å’Œæ•°æ®åº“å­—æ®µæ•°æ®ç›´æ¥å¯¹åº”ï¼Œåˆ™å¯å¯¹æ•°æ®åº“å­—æ®µæ•°æ®åšç›¸åº”è½¬æ¢ï¼Œå¯å‚è€ƒ`list`æ–¹æ³•ä¸­çš„`transform`éƒ¨åˆ†ã€‚
* app/Http/Controllers/Admin/ConfigController.php
  æ§åˆ¶å™¨ï¼šé»˜è®¤æœ‰ä¸€ä¸ª`$formNames`å±æ€§ï¼Œç”¨æ¥é…ç½®æ–°å¢/ç¼–è¾‘è¡¨å•è¯·æ±‚å­—æ®µçš„ç™½åå•ã€‚æ­¤å±æ€§å¿…éœ€é…ç½®ï¼Œå¦åˆ™è·å–ä¸åˆ°è¡¨å•æ•°æ®ã€‚å‚è€ƒ [request å¯¹è±¡çš„ only æ–¹æ³•](https://laravel.com/docs/5.5/requests#retrieving-input)
* app/Http/Requests/Admin/ConfigRequest.php
  è¡¨å•è¯·æ±‚ç±»ï¼šå¯åœ¨æ­¤ç±»ä¸­ç¼–å†™è¡¨å•éªŒè¯è§„åˆ™ï¼Œå‚è€ƒ [Form Request Validation](https://laravel.com/docs/5.5/validation#form-request-validation)
* resources/views/admin/config/index.blade.php
  åˆ—è¡¨è§†å›¾ï¼šåˆ—è¡¨æ•°æ®ã€æœç´¢è¡¨å•ã€‚
* resources/views/admin/config/index.blade.php
  æ–°å¢/ç¼–è¾‘è§†å›¾ï¼šåªåˆ—å‡ºäº†åŸºæœ¬æ¶æ„ï¼Œéœ€è¦è‡ªå®šä¹‰ç›¸å…³å­—æ®µçš„è¡¨å•å±•ç¤ºã€‚å‚è€ƒ [layui form](https://www.layui.com/doc/element/form.html)

æœ€åï¼Œå¦‚æœæƒ³è®©ç”Ÿæˆçš„è·¯ç”±å±•ç¤ºåœ¨èœå•ä¸­ï¼Œåªéœ€åœ¨[èœå•ç®¡ç†](/eddy8/LightCMS/blob/10.x/admin/menus)é¡µé¢ç‚¹å‡»**è‡ªåŠ¨æ›´æ–°èœå•**å³å¯ã€‚

## æ•æ„Ÿè¯æ£€æµ‹

å¦‚æœéœ€è¦å¯¹å‘è¡¨çš„å†…å®¹ï¼ˆæ–‡ç« ã€è¯„è®ºç­‰ï¼‰è¿›è¡Œå†…å®¹å®¡æŸ¥ï¼Œåˆ™å¯ç›´æ¥è°ƒç”¨`LightCMS`æä¾›çš„`checkSensitiveWords`å‡½æ•°å³å¯ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š

```
$result = checkSensitiveWords('å‡ºå”®æ­£å“æªæ”¯');
print_r($result);
/*
[
    "å”® å‡ºå”® æª",
    "æ­£å“æªæ”¯"
]
*/
```

## å›¾ç‰‡ä¸Šä¼ 

LightCMSä¸­å›¾ç‰‡é»˜è®¤ä¸Šä¼ åˆ°æœ¬åœ°æœåŠ¡å™¨ã€‚å¦‚æœæœ‰è‡ªå®šä¹‰éœ€æ±‚ï¼Œæ¯”å¦‚ä¸Šä¼ åˆ°ä¸‰æ–¹äº‘æœåŠ¡å™¨ï¼Œå¯å‚è€ƒ`config/light.php`é…ç½®æ–‡ä»¶ä¸­çš„`image_upload`é…ç½®é¡¹è¯´æ˜ï¼Œè‡ªå®šä¹‰å¤„ç†ç±»éœ€è¦å®ç°`App\Contracts\ImageUpload`æ¥å£ï¼Œæ–¹æ³•çš„è¿”å›å€¼æ•°æ®ç»“æ„å’Œç³»ç»ŸåŸæ–¹æ³•ä¿æŒä¸€è‡´å³å¯ã€‚

```
{
    "code": 200,
    "state": "SUCCESS",
    "msg": "",
    "url": "xxx"
}
```

## ç³»ç»Ÿæ ¸å¿ƒå‡½æ•°ã€æ–¹æ³•ç­‰è¯´æ˜

åšè¿™ä¸ªè¯´æ˜çš„ä¸»è¦ç›®çš„æ˜¯è®©å¼€å‘è€…äº†è§£ä¸€äº›æ ¸å¿ƒåŠŸèƒ½ï¼Œæ–¹ä¾¿è‡ªå®šä¹‰å„ç±»åŠŸèƒ½å¼€å‘ã€‚æ¯•ç«Ÿæ¡†æ¶æ˜¯ä¸å¯èƒ½ä»£åŠ³æ‰€æœ‰äº‹æƒ…æ»´^\_

---

æ–¹æ³•åç§°ï¼šApp\Repository\Admin\CategoryRepository::tree()

åŠŸèƒ½è¯´æ˜ï¼š

è¿”å›åˆ†ç±»çš„æ ‘ç»“æ„ä¿¡æ¯ã€‚æ•°æ®ç»“æ„å¯ä»¥å‚è€ƒä¸‹å›¾æ‰€ç¤ºï¼š

[![tree](https://user-images.githubusercontent.com/2555476/62991339-d7acde80-be81-11e9-9811-9d4d27e01f07.png)](https://user-images.githubusercontent.com/2555476/62991339-d7acde80-be81-11e9-9811-9d4d27e01f07.png)

æ­¤æ•°æ®ç»“æ„åŸºæœ¬åŒ…å«äº†åˆ†ç±»çš„æ‰€æœ‰ç»“æ„åŒ–ä¿¡æ¯ã€‚ç›¸å…³å­—æ®µçš„å«ä¹‰ä¹Ÿæ¯”è¾ƒæ¸…æ¥šï¼Œæ­¤å¤„åªå¯¹`path`å­—æ®µåšä¸‹è¯´æ˜ï¼šè¯¥å­—æ®µæ˜¯æŒ‡å½“å‰åˆ†ç±»çš„æ‰€æœ‰ä¸Šçº§åˆ†ç±»é“¾ï¼Œè¿™æ ·å¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“æŸä¸ªåˆ†ç±»çš„æ‰€æœ‰çˆ¶çº§åˆ†ç±»ã€‚æ¯”å¦‚å›¾ä¸­çš„`test`åˆ†ç±»çš„pathå­—æ®µå€¼ä¸º`[1, 2]`ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“çš„çŸ¥é“å®ƒçš„çˆ¶çº§åˆ†ç±»æ˜¯ï¼šæ¸¸æˆ å°„å‡»

---

å¼‚å¸¸ï¼š`App\Exceptions\InvalidAppDataException`

åº”ç”¨åœºæ™¯ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­æŠ›å‡ºè¯¥å¼‚å¸¸ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨è·³è½¬åˆ°ä¿¡æ¯æç¤ºé¡µé¢ï¼Œæç¤ºå†…å®¹ä¸ºè‡ªå®šä¹‰å¼‚å¸¸å†…å®¹ã€‚ä¸€èˆ¬ç”¨äºåº”ç”¨è¿è¡Œæ—¶é”™è¯¯çš„é¡µé¢æç¤ºã€‚

---

`App\Repository\Admin\CategoryRepository`ç±»ä¸­ä¸åˆ†ç±»æ“ä½œç›¸å…³çš„æ–¹æ³•ï¼š

```
/**
 * è·å–æŒ‡å®šå±‚çº§çš„æ‰€æœ‰åˆ†ç±»ï¼Œæ ¹åˆ†ç±»å±‚çº§ä¸º 0
 *
 * @param int $level
 * @param null $tree
 * @return Collection
 */
public static function levelCategories(int $level = 0, $tree = null): Collection

/**
 * è·å–æŒ‡å®šåˆ†ç±»çš„æ‰€æœ‰å¶å­èŠ‚ç‚¹åˆ†ç±»ï¼Œ$categoryId ä¸º 0 æ—¶è·å–æ‰€æœ‰å¶å­èŠ‚ç‚¹åˆ†ç±»
 *
 * @param int $categoryId
 * @param null $tree
 * @return Collection
 */
public static function leafCategories(int $categoryId = 0, $tree = null): Collection

/**
 * è·å–æŒ‡å®šåˆ†ç±»çš„æ‰€æœ‰çˆ¶çº§åˆ†ç±»ï¼Œæ²¡æœ‰çˆ¶åˆ†ç±»æ—¶è¿”å›ç©ºæ•°ç»„
 *
 * @param int $categoryId
 * @param null $tree
 * @return array
 */
public static function parentCategories(int $categoryId, $tree = null): array

```

## å‰å°ç›¸å…³

### ç”¨æˆ·æ³¨å†Œç™»å½•

`LightCMS`é›†æˆäº†ä¸€å¥—ç®€å•çš„ç”¨æˆ·æ³¨å†Œç™»å½•ç³»ç»Ÿï¼Œæ”¯æŒå¾®ä¿¡ã€QQã€å¾®åšä¸‰æ–¹ç™»å½•ã€‚ä¸‰æ–¹ç™»å½•ç›¸å…³é…ç½®è¯·å‚è€ƒ`config/light.php`ã€‚

## è¯´æ˜

æœ‰é—®é¢˜å¯ä»¥æ issue ï¼Œä¸ºé¡¹ç›®è´¡çŒ®ä»£ç å¯ä»¥æ pull request

## Project supported by JetBrains

Many thanks to Jetbrains for kindly providing a license for me to work on this and other open-source projects.

[![](https://camo.githubusercontent.com/99d59f1721da5543764f341f9013f478fd27042918fc1109aa367292a8dcca0a/68747470733a2f2f7265736f75726365732e6a6574627261696e732e636f6d2f73746f726167652f70726f64756374732f636f6d70616e792f6272616e642f6c6f676f732f6a625f6265616d2e737667)](https://www.jetbrains.com/?from=https://github.com/eddy8)

## About

LightCMS æ˜¯ä¸€ä¸ªåŸºäº Laravel å¼€å‘çš„è½»é‡çº§ CMS ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªé€šç”¨çš„åå°ç®¡ç†æ¡†æ¶ä½¿ç”¨ã€‚A lightweight cms/admin framework powered by Laravel.

### Topics

[php](/topics/php "Topic: php")
[cms](/topics/cms "Topic: cms")
[laravel](/topics/laravel "Topic: laravel")
[admin](/topics/admin "Topic: admin")
[lightcms](/topics/lightcms "Topic: lightcms")

### Resources

[Readme](#readme-ov-file)
### License

[Apache-2.0 license](#Apache-2.0-1-ov-file)
### Security policy

[Security policy](#security-ov-file)

[Activity](/eddy8/LightCMS/activity)
### Stars

[**354**
stars](/eddy8/LightCMS/stargazers)
### Watchers

[**19**
watching](/eddy8/LightCMS/watchers)
### Forks

[**86**
forks](/eddy8/LightCMS/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Feddy8%2FLightCMS&report=eddy8+%28user%29)

## [Releases 19](/eddy8/LightCMS/releases)

[v2.0
Latest

Jun 28, 2022](/eddy8/LightCMS/releases/tag/v2.0)
[+ 18 releases](/eddy8/LightCMS/releases)

## [Packages 0](/users/eddy8/packages?repo_name=LightCMS)

No packages published

## [Contributors 3](/eddy8/LightCMS/graphs/contributors)

## Languages

* [PHP
  64.6%](/eddy8/LightCMS/search?l=php)
* [Blade
  35.4%](/eddy8/LightCMS/search?l=blade)

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.



=== Content from github.com_ec69668d_20250114_221643.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Feddy8%2FLightCMS%2Fissues%2F30)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Feddy8%2FLightCMS%2Fissues%2F30)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=eddy8%2FLightCMS)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[eddy8](/eddy8)
/
**[LightCMS](/eddy8/LightCMS)**
Public

* [Notifications](/login?return_to=%2Feddy8%2FLightCMS) You must be signed in to change notification settings
* [Fork
  86](/login?return_to=%2Feddy8%2FLightCMS)
* [Star
   354](/login?return_to=%2Feddy8%2FLightCMS)

* [Code](/eddy8/LightCMS)
* [Issues
  1](/eddy8/LightCMS/issues)
* [Pull requests
  0](/eddy8/LightCMS/pulls)
* [Discussions](/eddy8/LightCMS/discussions)
* [Actions](/eddy8/LightCMS/actions)
* [Projects
  0](/eddy8/LightCMS/projects)
* [Security](/eddy8/LightCMS/security)
* [Insights](/eddy8/LightCMS/pulse)

Additional navigation options

* [Code](/eddy8/LightCMS)
* [Issues](/eddy8/LightCMS/issues)
* [Pull requests](/eddy8/LightCMS/pulls)
* [Discussions](/eddy8/LightCMS/discussions)
* [Actions](/eddy8/LightCMS/actions)
* [Projects](/eddy8/LightCMS/projects)
* [Security](/eddy8/LightCMS/security)
* [Insights](/eddy8/LightCMS/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Feddy8%2FLightCMS%2Fissues%2Fnew%2Fchoose)

By clicking â€œSign up for GitHubâ€, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). Weâ€™ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Feddy8%2FLightCMS%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# A stored cross-site scripting (XSS) vulnerability exists in LightCMS "contents" field #30

Closed

[SKdft](/SKdft) opened this issue
Jun 6, 2022
Â· 2 comments

Closed

# [A stored cross-site scripting (XSS) vulnerability exists in LightCMS "contents" field](#top) #30

[SKdft](/SKdft) opened this issue
Jun 6, 2022
Â· 2 comments

## Comments

[![@SKdft](https://avatars.githubusercontent.com/u/30437097?s=80&v=4)](/SKdft)

Copy link

### **[SKdft](/SKdft)** commented [Jun 6, 2022](#issue-1262073812)

| A stored cross-site scripting (XSS) vulnerability exists in LightCMS that allows an user authorized to upload a malicious .pdf file which acts as a stored XSS payload. If this stored XSS payload is triggered by an administrator it will trigger a XSS attack.   1. login as admin in the article page    [å›¾ç‰‡](https://user-images.githubusercontent.com/30437097/172198823-f1ca7332-84de-4187-bc88-989f88816327.png) 2. create a new article    [å›¾ç‰‡](https://user-images.githubusercontent.com/30437097/172199007-99e61394-bdf8-4515-87c7-ba60d9379b80.png) 3. upload the malicious pdf. the content of xss.pdf :  ``` %PDF-1.4 %1111 1 0 obj << /CreationDate (D:20210619104632+08'00') /Creator (xss) /Producer (PDF-XChange Core API SDK \(7.0.324.2\)) >> endobj 2 0 obj << /Metadata 3 0 R /Pages 4 0 R /Type /Catalog >> endobj 3 0 obj << /Length 2983 /Subtype /XML /Type /Metadata >> stream <?xpacket begin="ï»¿" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="XMP Core 5.5.0"> 	<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> 		<rdf:Description rdf:about="" 				xmlns:dc="http://purl.org/dc/elements/1.1/" 				xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" 				xmlns:xmp="http://ns.adobe.com/xap/1.0/" 				xmlns:pdf="http://ns.adobe.com/pdf/1.3/"> 			<dc:format>application/pdf</dc:format> 			<xmpMM:DocumentID>uuid:9c93bc08-8e4e-46cb-b28f-824c693821a4</xmpMM:DocumentID> 			<xmpMM:InstanceID>uuid:2cd63bea-24ca-4ef8-a12c-015da3b28c96</xmpMM:InstanceID> 			<xmp:CreateDate>2021-06-19T10:46:32+08:00</xmp:CreateDate> 			<xmp:CreatorTool>è¿…æ·PDFç¼–è¾‘å™¨ 7.0.324.2</xmp:CreatorTool> 			<xmp:ModifyDate>2021-06-19T10:52:02+08:00</xmp:ModifyDate> 			<pdf:Producer>PDF-XChange Core API SDK (7.0.324.2)</pdf:Producer> 		</rdf:Description> 	</rdf:RDF> </x:xmpmeta>  ```  4. back to content then wo edit this upload:    [å›¾ç‰‡](https://user-images.githubusercontent.com/30437097/172202907-a904a853-3aab-4910-9fc5-f2164122f120.png) 5. when user click the link it will trigger a XSS attack    [å›¾ç‰‡](https://user-images.githubusercontent.com/30437097/172203003-c12be92d-c17b-4aed-8e46-a23afc005434.png)   [å›¾ç‰‡](https://user-images.githubusercontent.com/30437097/172203132-87e0056b-6592-48a1-9e85-64f8425aa73a.png) |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@eddy8](https://avatars.githubusercontent.com/u/2555476?s=80&u=7fca82f1c619b6fe113e9f434e394213ce12ee21&v=4)](/eddy8)

Copy link

Owner

### **[eddy8](/eddy8)** commented [Jun 9, 2022](#issuecomment-1150587539)

| No better solution have been found except to prohibit users from uploading PDF files, can you give some help to me, thanks.  Adding the â€œContent-Disposition: Attachmentâ€ and â€œX-Content-Type-Options: nosniffâ€ headers to the response of static files [https://owasp.org/www-community/vulnerabilities/Unrestricted\_File\_Upload](url) |
| --- |

All reactions

Sorry, something went wrong.

[![@SKdft](https://avatars.githubusercontent.com/u/30437097?s=80&v=4)](/SKdft)

Copy link

Author

### **[SKdft](/SKdft)** commented [Jun 9, 2022](#issuecomment-1150623250)

| referenceï¼Œwe recommend the followingï¼š   1. nginx configure the reverse proxy which can add a header to the specified url.  ``` location /{     if ($request_filename ~* ^.*?.(txt|doc|pdf|rar|gz|zip|docx|exe|xlsx|ppt|pptx)$){                         add_header Content-Disposition attachment;                  }     }  ```  2. if it is possibleï¼Œrefer to    `https://owasp.org/www-community/vulnerabilities/Unrestricted_File_Upload` --- It is recommended that this practice be performed for all of the files that users need to download in all the modules that deal with a file download.currently we do this.   3.nginx detects the uploaded pdf and find the xss features such as 'app.alert(....)'.  Hope can help youï¼ |
| --- |

 ğŸ‘
1
 eddy8 reacted with thumbs up emoji

All reactions

* ğŸ‘
  1 reaction

Sorry, something went wrong.

[eddy8](/eddy8)
added a commit
that referenced
this issue
[Jun 9, 2022](#ref-commit-ca904a6)
[![@eddy8](https://avatars.githubusercontent.com/u/2555476?s=40&u=7fca82f1c619b6fe113e9f434e394213ce12ee21&v=4)](/eddy8)

`[fix: xss vulnerability](/eddy8/LightCMS/commit/ca904a60bbf77eb0b238a7a3d2c0200adcac3051 "fix: xss vulnerability #30") [#30](https://github.com/eddy8/LightCMS/issues/30)`

`[ca904a6](/eddy8/LightCMS/commit/ca904a60bbf77eb0b238a7a3d2c0200adcac3051)`

[![@eddy8](https://avatars.githubusercontent.com/u/2555476?s=40&u=7fca82f1c619b6fe113e9f434e394213ce12ee21&v=4)](/eddy8)
[eddy8](/eddy8)
closed this as [completed](/eddy8/LightCMS/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Jun 9, 2022](#event-6774519779)

[eddy8](/eddy8)
added a commit
that referenced
this issue
[Jul 7, 2022](#ref-commit-b316a46)
[![@eddy8](https://avatars.githubusercontent.com/u/2555476?s=40&u=7fca82f1c619b6fe113e9f434e394213ce12ee21&v=4)](/eddy8)

`[fix: xss vulnerability](/eddy8/LightCMS/commit/b316a46404a524cf479f2fc37917a4e93ebf67a3 "fix: xss vulnerability #30") [#30](https://github.com/eddy8/LightCMS/issues/30)`

`[b316a46](/eddy8/LightCMS/commit/b316a46404a524cf479f2fc37917a4e93ebf67a3)`

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Feddy8%2FLightCMS%2Fissues%2F30)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

2 participants

[![@eddy8](https://avatars.githubusercontent.com/u/2555476?s=52&v=4)](/eddy8) [![@SKdft](https://avatars.githubusercontent.com/u/30437097?s=52&v=4)](/SKdft)

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.


