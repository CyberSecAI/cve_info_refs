=== Content from www.mozilla.org_18bdcdd2_20250114_193713.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2022-47

## Security Vulnerabilities fixed in Firefox 107

Announced
November 15, 2022
Impact
high
Products
Firefox
Fixed in

* Firefox 107

This advisory was updated December 13, 2022 to add CVE-2022-46882 and CVE-2022-46883. Both fixes were included in the original release of Firefox 107, but did not appear in the advisory published at that time.

#### [#CVE-2022-45403: Service Workers might have learned size of cross-origin media files](#CVE-2022-45403)

Reporter
Anne van Kesteren and Karl Tomlinson
Impact
high
##### Description

Service Workers should not be able to infer information about opaque cross-origin responses; but timing information for cross-origin media combined with Range requests might have allowed them to determine the presence or length of a media file.

##### References

* [Bug 1762078](https://bugzilla.mozilla.org/show_bug.cgi?id=1762078)

#### [#CVE-2022-45404: Fullscreen notification bypass](#CVE-2022-45404)

Reporter
Irvan Kurniawan
Impact
high
##### Description

Through a series of popup and `window.print()` calls, an attacker can cause a window to go fullscreen without the user seeing the notification prompt, resulting in potential user confusion or spoofing attacks.

##### References

* [Bug 1790815](https://bugzilla.mozilla.org/show_bug.cgi?id=1790815)

#### [#CVE-2022-45405: Use-after-free in InputStream implementation](#CVE-2022-45405)

Reporter
Atte Kettunen
Impact
high
##### Description

Freeing arbitrary `nsIInputStream`'s on a different thread than creation could have led to a use-after-free and potentially exploitable crash.

##### References

* [Bug 1791314](https://bugzilla.mozilla.org/show_bug.cgi?id=1791314)

#### [#CVE-2022-45406: Use-after-free of a JavaScript Realm](#CVE-2022-45406)

Reporter
Samuel Groß
Impact
high
##### Description

If an out-of-memory condition occurred when creating a JavaScript global, a JavaScript realm may be deleted while references to it lived on in a BaseShape. This could lead to a use-after-free causing a potentially exploitable crash.

##### References

* [Bug 1791975](https://bugzilla.mozilla.org/show_bug.cgi?id=1791975)

#### [#CVE-2022-45407: Loading fonts on workers was not thread-safe](#CVE-2022-45407)

Reporter
Armin Ebert
Impact
high
##### Description

If an attacker loaded a font using `FontFace()` on a background worker, a use-after-free could have occurred, leading to a potentially exploitable crash.

##### References

* [Bug 1793314](https://bugzilla.mozilla.org/show_bug.cgi?id=1793314)

#### [#CVE-2022-45408: Fullscreen notification bypass via windowName](#CVE-2022-45408)

Reporter
Irvan Kurniawan
Impact
high
##### Description

Through a series of popups that reuse windowName, an attacker can cause a window to go fullscreen without the user seeing the notification prompt, resulting in potential user confusion or spoofing attacks.

##### References

* [Bug 1793829](https://bugzilla.mozilla.org/show_bug.cgi?id=1793829)

#### [#CVE-2022-45409: Use-after-free in Garbage Collection](#CVE-2022-45409)

Reporter
Gary Kwong
Impact
high
##### Description

The garbage collector could have been aborted in several states and zones and `GCRuntime::finishCollection` may not have been called, leading to a use-after-free and potentially exploitable crash

##### References

* [Bug 1796901](https://bugzilla.mozilla.org/show_bug.cgi?id=1796901)

#### [#CVE-2022-45410: ServiceWorker-intercepted requests bypassed SameSite cookie policy](#CVE-2022-45410)

Reporter
Dongsung Kim
Impact
moderate
##### Description

When a ServiceWorker intercepted a request with `FetchEvent`, the origin of the request was lost after the ServiceWorker took ownership of it. This had the effect of negating SameSite cookie protections. This was addressed in the spec and then in browsers.

##### References

* [Bug 1658869](https://bugzilla.mozilla.org/show_bug.cgi?id=1658869)

#### [#CVE-2022-45411: Cross-Site Tracing was possible via non-standard override headers](#CVE-2022-45411)

Reporter
scarlet
Impact
moderate
##### Description

Cross-Site Tracing occurs when a server will echo a request back via the Trace method, allowing an XSS attack to access to authorization headers and cookies inaccessible to JavaScript (such as cookies protected by HTTPOnly). To mitigate this attack, browsers placed limits on `fetch()` and XMLHttpRequest; however some webservers have implemented non-standard headers such as `X-Http-Method-Override` that override the HTTP method, and made this attack possible again. Firefox has applied the same mitigations to the use of this and similar headers.

##### References

* [Bug 1790311](https://bugzilla.mozilla.org/show_bug.cgi?id=1790311)

#### [#CVE-2022-45412: Symlinks may resolve to partially uninitialized buffers](#CVE-2022-45412)

Reporter
Armin Ebert
Impact
moderate
##### Description

When resolving a symlink such as `file:///proc/self/fd/1`, an error message may be produced where the symlink was resolved to a string containing unitialized memory in the buffer.
*This bug only affects Firefox on Unix-based operated systems (Android, Linux, MacOS). Windows is unaffected.*

##### References

* [Bug 1791029](https://bugzilla.mozilla.org/show_bug.cgi?id=1791029)

#### [#CVE-2022-45413: SameSite=Strict cookies could have been sent cross-site via intent URLs](#CVE-2022-45413)

Reporter
Axel Chong
Impact
moderate
##### Description

Using the `S.browser_fallback_url parameter` parameter, an attacker could redirect a user to a URL and cause SameSite=Strict cookies to be sent.
*This issue only affects Firefox for Android. Other operating systems are not affected.*

##### References

* [Bug 1791201](https://bugzilla.mozilla.org/show_bug.cgi?id=1791201)

#### [#CVE-2022-40674: Use-after-free vulnerability in expat](#CVE-2022-40674)

Reporter
Rhodri James
Impact
moderate
##### Description

A flaw in XML parsing could have led to a use-after-free causing a potentially exploitable crash.
*In official releases of Firefox this vulnerability is mitigated by wasm sandboxing; versions managed by Linux distributions may have other settings.*

##### References

* [Bug 1791598](https://bugzilla.mozilla.org/show_bug.cgi?id=1791598)

#### [#CVE-2022-45415: Downloaded file may have been saved with malicious extension](#CVE-2022-45415)

Reporter
Jefferson Scher and Jayateertha Guruprasad
Impact
moderate
##### Description

When downloading an HTML file, if the title of the page was formatted as a filename with a malicious extension, Firefox may have saved the file with that extension, leading to possible system compromise if the downloaded file was later ran.

##### References

* [Bug 1793551](https://bugzilla.mozilla.org/show_bug.cgi?id=1793551)

#### [#CVE-2022-45416: Keystroke Side-Channel Leakage](#CVE-2022-45416)

Reporter
Erik Kraft, Martin Schwarzl, and Andrew McCreight
Impact
moderate
##### Description

Keyboard events reference strings like "KeyA" that were at fixed, known, and widely-spread addresses. Cache-based timing attacks such as Prime+Probe could have possibly figured out which keys were being pressed.

##### References

* [Bug 1793676](https://bugzilla.mozilla.org/show_bug.cgi?id=1793676)

#### [#CVE-2022-45417: Service Workers in Private Browsing Mode may have been written to disk](#CVE-2022-45417)

Reporter
Kagami
Impact
moderate
##### Description

Service Workers did not detect Private Browsing Mode correctly in all cases, which could have led to Service Workers being written to disk for websites visited in Private Browsing Mode. This would not have persisted them in a state where they would run again, but it would have leaked Private Browsing Mode details to disk.

##### References

* [Bug 1794508](https://bugzilla.mozilla.org/show_bug.cgi?id=1794508)

#### [#CVE-2022-45418: Custom mouse cursor could have been drawn over browser UI](#CVE-2022-45418)

Reporter
Hafiizh
Impact
moderate
##### Description

If a custom mouse cursor is specified in CSS, under certain circumstances the cursor could have been drawn over the browser UI, resulting in potential user confusion or spoofing attacks.

##### References

* [Bug 1795815](https://bugzilla.mozilla.org/show_bug.cgi?id=1795815)

#### [#CVE-2022-46882: Use-after-free in WebGL](#CVE-2022-46882)

Reporter
Irvan Kurniawan
Impact
moderate
##### Description

A use-after-free in WebGL extensions could have led to a potentially exploitable crash.

##### References

* [Bug 1789371](https://bugzilla.mozilla.org/show_bug.cgi?id=1789371)

#### [#CVE-2022-45419: Deleting a security exception did not take effect immediately](#CVE-2022-45419)

Reporter
Ronald Crane
Impact
low
##### Description

If the user added a security exception for an invalid TLS certificate, opened an ongoing TLS connection with a server that used that certificate, and then deleted the exception, Firefox would have kept the connection alive, making it seem like the certificate was still trusted.

##### References

* [Bug 1716082](https://bugzilla.mozilla.org/show_bug.cgi?id=1716082)

#### [#CVE-2022-45420: Iframe contents could be rendered outside the iframe](#CVE-2022-45420)

Reporter
Suhwan Song of SNU CompSec Lab
Impact
low
##### Description

Using tables inside of an iframe, an attacker could have caused iframe contents to be rendered outside the boundaries of the iframe, resulting in potential user confusion or spoofing attacks.

##### References

* [Bug 1792643](https://bugzilla.mozilla.org/show_bug.cgi?id=1792643)

#### [#CVE-2022-45421: Memory safety bugs fixed in Firefox 107 and Firefox ESR 102.5](#CVE-2022-45421)

Reporter
Mozilla developers
Impact
high
##### Description

Mozilla developers Andrew McCreight and Gabriele Svelto reported memory safety bugs present in Firefox 106 and Firefox ESR 102.4. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 107 and Firefox ESR 102.5](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1767920%2C1789808%2C1794061)

#### [#CVE-2022-46883: Memory safety bugs fixed in Firefox 107](#CVE-2022-46883)

Reporter
Mozilla developers
Impact
high
##### Description

Mozilla developers Gabriele Svelto, Yulia Startsev, Andrew McCreight and the Mozilla Fuzzing Team reported memory safety bugs present in Firefox 106. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 107](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1584674%2C1791152%2C1792241%2C1792984%2C1793127%2C1794645)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_b5cc7b93_20250114_193710.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1793314)
* [XML](/show_bug.cgi?ctype=xml&id=1793314)

Closed
[Bug 1793314](/show_bug.cgi?id=1793314)
(CVE-2022-45407)

Opened 2 years ago
Closed 2 years ago

# heap-use-after-free in font loading using FontFace from worker thread

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

heap-use-after-free in font loading using FontFace from worker thread

## Categories

### (Core :: Layout: Text and Fonts, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Layout%3A%20Text%20and%20Fonts#Layout%3A%20Text%20and%20Fonts)

Layout: Text and Fonts
▾

Core :: Layout: Text and Fonts

Issues with CSS font selection, font loading, text shaping and glyph selection, breaking, text decorations, bidirectional text processing, and white space processing. For issues with glyph rendering and font format support, see the Graphics: Text component.

Example bugs:

* line-breaking code does not handle supplementary-plane characters properly
* double or wavy decoration lines are not repainted correctly if specified on floating first letter

Specifications covered:

* CSS Fonts
* CSS Size Adjustment
* CSS Text
* CSS Text Decoration

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Layout%3A%20Text%20and%20Fonts&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Layout%3A%20Text%20and%20Fonts&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Layout%3A%20Text%20and%20Fonts)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

--

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
DUPLICATE
of [bug 1793127](/show_bug.cgi?id=1793127 "RESOLVED FIXED - AddressSanitizer: heap-use-after-free [@ Length] with READ of size 8")

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

DUPLICATE

of

Mark as Duplicate

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

---

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox107 | [+](/buglist.cgi?f1=cf_tracking_firefox107&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox107&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox107 | + | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: arminius, Assigned: jfkthame)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/e0f9759e1d7514ae4adfd806869e3c5d?d=mm&size=40)  [jfkthame](/user_profile?user_id=329583)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/3cca6b6cc3855653ab1b17e9df3aa8e1?d=mm&size=40)  [arminius](/user_profile?user_id=526160)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/e0f9759e1d7514ae4adfd806869e3c5d?d=mm&size=40)  [jfkthame](/user_profile?user_id=329583)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

8 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1793379](/show_bug.cgi?id=1793379 "VERIFIED FIXED - AddressSanitizer: SEGV /builds/worker/workspace/obj-build/dist/include/mozilla/Assertions.h:261:3 in MOZ_Crash (via FontFaceImpl::SetDescriptor on worker thread)"), [1793127](/show_bug.cgi?id=1793127 "RESOLVED FIXED - AddressSanitizer: heap-use-after-free [@ Length] with READ of size 8"), [1791023](/show_bug.cgi?id=1791023 "VERIFIED FIXED - Hit MOZ_CRASH(gfxFontFaceBufferSource not thread-safe) at /xpcom/base/nsISupportsImpl.cpp:43"), [1794528](/show_bug.cgi?id=1794528 "RESOLVED DUPLICATE - AddressSanitizer: heap-use-after-free [@ gfxUserFontEntry::DoLoadNextSrc] with READ of size 4")

## Details

### (5 keywords, Whiteboard: [adv-main107+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2022-45407

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main107+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [dveditz](/user_profile?user_id=1689) | [sec-bounty](#c12 "2 years ago") | + |
| --- | --- | --- |
| [dveditz](/user_profile?user_id=1689) | sec-bounty | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [advisory.txt](/attachment.cgi?id=9302909)  [2 years ago](#c13)  [Tom Ritter [:tjr]](/user_profile?user_id=578488)   225 bytes, text/plain |  | [Details](/attachment.cgi?id=9302909&action=edit) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Armin Ebert [:arminius]](/user_profile?user_id=526160)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1793314#c0)• 2 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1793314&comment_id=16094751 "1 revision") |
|  | |

Loading user fonts via `FontFace()` from workers isn't thread-safe and may cause a heap-use-after-free.

Two ASAN UAF samples on `m-c-20220930214439-asan-opt`:

```
==521246==ERROR: AddressSanitizer: heap-use-after-free on address 0x6030001a4f88 at pc 0x7f0f6c3ca7b6 bp 0x7f0f5410c130 sp 0x7f0f5410c128
READ of size 8 at 0x6030001a4f88 thread T228
    #0 0x7f0f6c3ca7b5 in load /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/atomic_base.h:396:9
    #1 0x7f0f6c3ca7b5 in get /builds/worker/workspace/obj-build/dist/include/nsISupportsImpl.h:389:19
    #2 0x7f0f6c3ca7b5 in operator unsigned long /builds/worker/workspace/obj-build/dist/include/nsISupportsImpl.h:385:56
    #3 0x7f0f6c3ca7b5 in gfxCharacterMap::NotifyMaybeReleased() /builds/worker/checkouts/gecko/gfx/thebes/gfxFontEntry.cpp:63:7
    #4 0x7f0f72342cd7 in Release /builds/worker/workspace/obj-build/dist/include/gfxFontEntry.h:84:14
    #5 0x7f0f72342cd7 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40
    #6 0x7f0f72342cd7 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36
    #7 0x7f0f72342cd7 in ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7
    #8 0x7f0f72342cd7 in mozilla::dom::FontFaceImpl::~FontFaceImpl() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:75:1
    #9 0x7f0f7233f976 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFaceImpl.h:37:3
    #10 0x7f0f7233f976 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40
    #11 0x7f0f7233f976 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36
    #12 0x7f0f7233f976 in ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7
    #13 0x7f0f7233f976 in mozilla::dom::FontFace::~FontFace() /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:83:1
    #14 0x7f0f7235f200 in DeleteCycleCollectable /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:73:1
    #15 0x7f0f7235f200 in mozilla::dom::FontFace::cycleCollection::DeleteCycleCollectable(voibuilds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFace.h:44:3
    #16 0x7f0f69c1ded2 in SnowWhiteKiller::~SnowWhiteKiller() /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2406:7
    #17 0x7f0f69c1d46e in nsCycleCollector::FreeSnowWhite(bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2596:3
    #18 0x7f0f69c25424 in nsCycleCollector::BeginCollection(mozilla::CCReason, ccIsManual, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3585:3
    #19 0x7f0f69c24a4c in nsCycleCollector::Collect(mozilla::CCReason, ccIsManual, js::SliceBudget&, nsICycleCollectorListener*, bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3412:9
    #20 0x7f0f69c2813a in nsCycleCollector_collect(mozilla::CCReason, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3920:28
    #21 0x7f0f7156ca3d in mozilla::dom::workerinternals::(anonymous namespace)::WorkerJSRuntime::CustomGCCallback(JSGCStatus) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:816:11
    #22 0x7f0f69bd9338 in mozilla::CycleCollectedJSRuntime::OnGC(JSContext*, JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/xpcom/base/CycleCollectedJSRuntime.cpp:1884:3
    #23 0x7f0f77c1f298 in js::gc::GCRuntime::maybeCallGCCallback(JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3755:3
    #24 0x7f0f77c1fc6c in ~AutoCallGCCallbacks /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3728:32
    #25 0x7f0f77c1fc6c in js::gc::GCRuntime::gcCycle(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3845:1
    #26 0x7f0f77c21b20 in js::gc::GCRuntime::collect(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4027:9
    #27 0x7f0f77beca36 in js::gc::GCRuntime::gc(JS::GCOptions, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4104:3
    #28 0x7f0f7156ae49 in mozilla::dom::workerinternals::(anonymous namespace)::WorkerThreadPrimaryRunnable::Run() /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:2084:7
    #29 0x7f0f69e0193e in nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1199:16
    #30 0x7f0f69e0b594 in NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10
    #31 0x7f0f6b415c38 in mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:300:20
    #32 0x7f0f6b2b1361 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #33 0x7f0f6b2b1361 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #34 0x7f0f6b2b1361 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #35 0x7f0f69df8a94 in nsThread::ThreadFunc(void*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:384:10
    #36 0x7f0f8b5d7c0e in _pt_root /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:201:5
    #37 0x7f0f8bdb774c  (/usr/lib/libc.so.6+0x8674c) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)
    #38 0x7f0f8be396ff  (/usr/lib/libc.so.6+0x1086ff) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)

0x6030001a4f88 is located 24 bytes inside of 32-byte region [0x6030001a4f70,0x6030001a4f90)
freed by thread T231 here:
    #0 0x55ffcf465ef2 in __interceptor_free /builds/worker/fetches/llvm-project/compiler-rt/lib/asan/asan_malloc_linux.cpp:52:3
    #1 0x7f0f6c3ca782 in operator delete /builds/worker/workspace/obj-build/dist/include/mozilla/cxxalloc.h:51:10
    #2 0x7f0f6c3ca782 in gfxCharacterMap::NotifyMaybeReleased() /builds/worker/checkouts/gecko/gfx/thebes/gfxFontEntry.cpp:73:3
    #3 0x7f0f72342cd7 in Release /builds/worker/workspace/obj-build/dist/include/gfxFontEntry.h:84:14
    #4 0x7f0f72342cd7 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40
    #5 0x7f0f72342cd7 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36
    #6 0x7f0f72342cd7 in ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7
    #7 0x7f0f72342cd7 in mozilla::dom::FontFaceImpl::~FontFaceImpl() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:75:1
    #8 0x7f0f7233f976 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFaceImpl.h:37:3
    #9 0x7f0f7233f976 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40
    #10 0x7f0f7233f976 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36
    #11 0x7f0f7233f976 in ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7
    #12 0x7f0f7233f976 in mozilla::dom::FontFace::~FontFace() /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:83:1
    #13 0x7f0f7235f200 in DeleteCycleCollectable /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:73:1
    #14 0x7f0f7235f200 in mozilla::dom::FontFace::cycleCollection::DeleteCycleCollectable(void*) /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFace.h:44:3
    #15 0x7f0f69c1ded2 in SnowWhiteKiller::~SnowWhiteKiller() /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2406:7
    #16 0x7f0f69c1d46e in nsCycleCollector::FreeSnowWhite(bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2596:3
    #17 0x7f0f69c25424 in nsCycleCollector::BeginCollection(mozilla::CCReason, ccIsManual, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3585:3
    #18 0x7f0f69c24a4c in nsCycleCollector::Collect(mozilla::CCReason, ccIsManual, js::SliceBudget&, nsICycleCollectorListener*, bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3412:9
    #19 0x7f0f69c2813a in nsCycleCollector_collect(mozilla::CCReason, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3920:28
    #20 0x7f0f7156ca3d in mozilla::dom::workerinternals::(anonymous namespace)::WorkerJSRuntime::CustomGCCallback(JSGCStatus) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:816:11
    #21 0x7f0f69bd9338 in mozilla::CycleCollectedJSRuntime::OnGC(JSContext*, JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/xpcom/base/CycleCollectedJSRuntime.cpp:1884:3
    #22 0x7f0f77c1f298 in js::gc::GCRuntime::maybeCallGCCallback(JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3755:3
    #23 0x7f0f77c1fc6c in ~AutoCallGCCallbacks /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3728:32
    #24 0x7f0f77c1fc6c in js::gc::GCRuntime::gcCycle(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3845:1
    #25 0x7f0f77c21b20 in js::gc::GCRuntime::collect(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4027:9
    #26 0x7f0f77beca36 in js::gc::GCRuntime::gc(JS::GCOptions, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4104:3
    #27 0x7f0f7156ae49 in mozilla::dom::workerinternals::(anonymous namespace)::WorkerThreadPrimaryRunnable::Run() /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:2084:7
    #28 0x7f0f69e0193e in nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1199:16
    #29 0x7f0f69e0b594 in NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10
    #30 0x7f0f6b415c38 in mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:300:20
    #31 0x7f0f6b2b1361 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #32 0x7f0f6b2b1361 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #33 0x7f0f6b2b1361 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #34 0x7f0f69df8a94 in nsThread::ThreadFunc(void*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:384:10
    #35 0x7f0f8b5d7c0e in _pt_root /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:201:5
    #36 0x7f0f8bdb774c  (/usr/lib/libc.so.6+0x8674c) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)

previously allocated by thread T0 (Isolated Web Co) here:
    #0 0x55ffcf46619e in malloc /builds/worker/fetches/llvm-project/compiler-rt/lib/asan/asan_malloc_linux.cpp:69:3
    #1 0x55ffcf4aacb5 in moz_xmalloc /builds/worker/checkouts/gecko/memory/mozalloc/mozalloc.cpp:52:15
    #2 0x7f0f7234699c in operator new /builds/worker/workspace/obj-build/dist/include/mozilla/cxxalloc.h:33:10
    #3 0x7f0f7234699c in mozilla::dom::FontFaceImpl::GetUnicodeRangeAsCharacterMap() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:688:39
    #4 0x7f0f72354650 in mozilla::dom::FontFaceSetImpl::FindOrCreateUserFontEntryFromFontFace(nsTSubstring<char> const&, mozilla::dom::FontFaceImpl*, mozilla::StyleOrigin) /builds/worker/checkouts/gecko/layout/style/FontFaceSetImpl.cpp:458:47
    #5 0x7f0f72343fd1 in mozilla::dom::FontFaceSetImpl::FindOrCreateUserFontEntryFromFontFace(mozilla::dom::FontFaceImpl*) /builds/worker/checkouts/gecko/layout/style/FontFaceSetImpl.cpp:345:10
    #6 0x7f0f723440e1 in mozilla::dom::FontFaceImpl::CreateUserFontEntry() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:326:9
    #7 0x7f0f72343905 in mozilla::dom::FontFaceImpl::DoLoad() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:342:8
    #8 0x7f0f7236493f in operator() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:338:65
    #9 0x7f0f7236493f in mozilla::detail::RunnableFunction<mozilla::dom::FontFaceImpl::DoLoad()::$_9>::Run() /builds/worker/workspace/obj-build/dist/include/nsThreadUtils.h:531:5
    #10 0x7f0f69e1f6b2 in mozilla::RunnableTask::Run() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:538:16
    #11 0x7f0f69ddfdbd in mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:851:26
    #12 0x7f0f69ddcf28 in mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:683:15
    #13 0x7f0f69ddd650 in mozilla::TaskController::ProcessPendingMTTask(bool) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:461:36
    #14 0x7f0f69e28714 in operator() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:190:37
    #15 0x7f0f69e28714 in mozilla::detail::RunnableFunction<mozilla::TaskController::InitializeInternal()::$_1>::Run() /builds/worker/workspace/obj-build/dist/include/nsThreadUtils.h:531:5
    #16 0x7f0f69e01117 in nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1205:16
    #17 0x7f0f69e0b594 in NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10
    #18 0x7f0f6b414bfd in mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:107:5
    #19 0x7f0f6b2b1361 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #20 0x7f0f6b2b1361 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #21 0x7f0f6b2b1361 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #22 0x7f0f71ea4717 in nsBaseAppShell::Run() /builds/worker/checkouts/gecko/widget/nsBaseAppShell.cpp:150:27
    #23 0x7f0f76d0f307 in XRE_RunAppShell() /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:880:20
    #24 0x7f0f6b2b1361 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #25 0x7f0f6b2b1361 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #26 0x7f0f6b2b1361 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #27 0x7f0f76d0e22c in XRE_InitChildProcess(int, char**, XREChildData const*) /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:739:34
    #28 0x55ffcf4a3825 in content_process_main(mozilla::Bootstrap*, int, char**) /builds/worker/checkouts/gecko/browser/app/../../ipc/contentproc/plugin-container.cpp:57:28
    #29 0x55ffcf4a3c77 in main /builds/worker/checkouts/gecko/browser/app/nsBrowserApp.cpp:359:18
    #30 0x7f0f8bd5428f  (/usr/lib/libc.so.6+0x2328f) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)

Thread T228 created by T0 (Isolated Web Co) here:
    #0 0x55ffcf44f6fc in __interceptor_pthread_create /builds/worker/fetches/llvm-project/compiler-rt/lib/asan/asan_interceptors.cpp:208:3
    #1 0x7f0f8b5c7cbc in _PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:458:14
    #2 0x7f0f8b5b905e in PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:533:12
    #3 0x7f0f69dfba15 in nsThread::Init(nsTSubstring<char> const&) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:618:18
    #4 0x7f0f715baa3a in mozilla::dom::WorkerThread::Create(mozilla::dom::WorkerThreadFriendKey const&) /builds/worker/checkouts/gecko/dom/workers/WorkerThread.cpp:102:7
    #5 0x7f0f71545e65 in mozilla::dom::workerinternals::RuntimeService::ScheduleWorker(mozilla::dom::WorkerPrivate&) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:1323:37
    #6 0x7f0f71544f8e in mozilla::dom::workerinternals::RuntimeService::RegisterWorker(mozilla::dom::WorkerPrivate&) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:1205:19
    #7 0x7f0f7158e557 in mozilla::dom::WorkerPrivate::Constructor(JSContext*, nsTSubstring<char16_t> const&, bool, mozilla::dom::WorkerKind, nsTSubstring<char16_t> const&, nsTSubstring<char> const&, mozilla::dom::WorkerLoadInfo*, mozilla::ErrorResult&, nsTString<char16_t>) /builds/worker/checkouts/gecko/dom/workers/WorkerPrivate.cpp:2588:24
    #8 0x7f0f71555525 in mozilla::dom::Worker::Constructor(mozilla::dom::GlobalObject const&, nsTSubstring<char16_t> const&, mozilla::dom::WorkerOptions const&, mozilla::ErrorResult&) /builds/worker/checkouts/gecko/dom/workers/Worker.cpp:43:41
    #9 0x7f0f6e33f2f4 in mozilla::dom::Worker_Binding::_constructor(JSContext*, unsigned int, JS::Value*) /builds/worker/workspace/obj-build/dom/bindings/WorkerBinding.cpp:1107:52
    #10 0x7f0f7882e937 in CallJSNative /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:458:13
    #11 0x7f0f7882e937 in CallJSNativeConstructor /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:474:8
    #12 0x7f0f7882e937 in InternalConstruct(JSContext*, js::AnyConstructArgs const&, js::CallReason) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:693:10
    #13 0x7f0f7881a99e in Interpret(JSContext*, js::RunState&) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:3359:16
    #14 0x7f0f787ffffe in js::RunScript(JSContext*, js::RunState&) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:430:13
    #15 0x7f0f7882c165 in js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstruct, js::CallReason) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:578:13
    #16 0x7f0f7882dc0e in InternalCall /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:613:10
    #17 0x7f0f7882dc0e in js::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, js::AnyInvokeArgs const&, JS::MutableHandle<JS::Value>, js::CallReason) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:645:8
    #18 0x7f0f7717da05 in JS::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, JS::HandleValueArray const&, JS::MutableHandle<JS::Value>) /builds/worker/checkouts/gecko/js/src/vm/CallAndConstruct.cpp:117:10
    #19 0x7f0f6e7e05a7 in mozilla::dom::Function::Call(mozilla::dom::BindingCallContext&, JS::Handle<JS::Value>, nsTArray<JS::Value> const&, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&) /builds/worker/workspace/obj-build/dom/bindings/FunctionBinding.cpp:50:8
    #20 0x7f0f6cd8932c in void mozilla::dom::Function::Call<nsCOMPtr<nsIGlobalObject> >(nsCOMPtr<nsIGlobalObject> const&, nsTArray<JS::Value> const&, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&, char const*, mozilla::dom::CallbackObject::ExceptionHandling, JS::Realm*) /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FunctionBinding.h:71:12
    #21 0x7f0f6cd88f32 in mozilla::dom::CallbackTimeoutHandler::Call(char const*) /builds/worker/checkouts/gecko/dom/base/TimeoutHandler.cpp:167:29
    #22 0x7f0f6c9ae90b in nsGlobalWindowInner::RunTimeoutHandler(mozilla::dom::Timeout*, nsIScriptContext*) /builds/worker/checkouts/gecko/dom/base/nsGlobalWindowInner.cpp:6471:38
    #23 0x7f0f6cd852ab in mozilla::dom::TimeoutManager::RunTimeout(mozilla::TimeStamp const&, mozilla::TimeStamp const&, bool) /builds/worker/checkouts/gecko/dom/base/TimeoutManager.cpp:903:44
    #24 0x7f0f6cd8443a in mozilla::dom::TimeoutExecutor::MaybeExecute() /builds/worker/checkouts/gecko/dom/base/TimeoutExecutor.cpp:179:11
    #25 0x7f0f6cd86b1b in mozilla::dom::TimeoutExecutor::Run() /builds/worker/checkouts/gecko/dom/base/TimeoutExecutor.cpp:234:5
    #26 0x7f0f69e266b2 in mozilla::ThrottledEventQueue::Inner::ExecuteRunnable() /builds/worker/checkouts/gecko/xpcom/threads/ThrottledEventQueue.cpp:254:22
    #27 0x7f0f69e1922f in mozilla::ThrottledEventQueue::Inner::Executor::Run() /builds/worker/checkouts/gecko/xpcom/threads/ThrottledEventQueue.cpp:81:15
    #28 0x7f0f69e1f6b2 in mozilla::RunnableTask::Run() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:538:16
    #29 0x7f0f69ddfdbd in mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:851:26
    #30 0x7f0f69ddcf28 in mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:683:15
    #31 0x7f0f69ddd650 in mozilla::TaskController::ProcessPendingMTTask(bool) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:461:36
    #32 0x7f0f69e286e1 in operator() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:187:37
    #33 0x7f0f69e286e1 in mozilla::detail::RunnableFunction<mozilla::TaskController::InitializeInternal()::$_0>::Run() /builds/worker/workspace/obj-build/dist/include/nsThreadUtils.h:531:5
    #34 0x7f0f69e01117 in nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1205:16
    #35 0x7f0f69e0b594 in NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10
    #36 0x7f0f6b414a88 in mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:85:21
    #37 0x7f0f6b2b1361 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #38 0x7f0f6b2b1361 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #39 0x7f0f6b2b1361 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #40 0x7f0f71ea4717 in nsBaseAppShell::Run() /builds/worker/checkouts/gecko/widget/nsBaseAppShell.cpp:150:27
    #41 0x7f0f76d0f307 in XRE_RunAppShell() /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:880:20
    #42 0x7f0f6b2b1361 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #43 0x7f0f6b2b1361 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #44 0x7f0f6b2b1361 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #45 0x7f0f76d0e22c in XRE_InitChildProcess(int, char**, XREChildData const*) /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:739:34
    #46 0x55ffcf4a3825 in content_process_main(mozilla::Bootstrap*, int, char**) /builds/worker/checkouts/gecko/browser/app/../../ipc/contentproc/plugin-container.cpp:57:28
    #47 0x55ffcf4a3c77 in main /builds/worker/checkouts/gecko/browser/app/nsBrowserApp.cpp:359:18
    #48 0x7f0f8bd5428f  (/usr/lib/libc.so.6+0x2328f) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)

Thread T231 created by T0 (Isolated Web Co) here:
    #0 0x55ffcf44f6fc in __interceptor_pthread_create /builds/worker/fetches/llvm-project/compiler-rt/lib/asan/asan_interceptors.cpp:208:3
    #1 0x7f0f8b5c7cbc in _PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:458:14
    #2 0x7f0f8b5b905e in PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:533:12
    #3 0x7f0f69dfba15 in nsThread::Init(nsTSubstring<char> const&) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:618:18
    #4 0x7f0f715baa3a in mozilla::dom::WorkerThread::Create(mozilla::dom::WorkerThreadFriendKey const&) /builds/worker/checkouts/gecko/dom/workers/WorkerThread.cpp:102:7
    #5 0x7f0f71545e65 in mozilla::dom::workerinternals::RuntimeService::ScheduleWorker(mozilla::dom::WorkerPrivate&) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:1323:37
    #6 0x7f0f71544f8e in mozilla::dom::workerinternals::RuntimeService::RegisterWorker(mozilla::dom::WorkerPrivate&) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:1205:19
    #7 0x7f0f7158e557 in mozilla::dom::WorkerPrivate::Constructor(JSContext*, nsTSubstring<char16_t> const&, bool, mozilla::dom::WorkerKind, nsTSubstring<char16_t> const&, nsTSubstring<char> const&, mozilla::dom::WorkerLoadInfo*, mozilla::ErrorResult&, nsTString<char16_t>) /builds/worker/checkouts/gecko/dom/workers/WorkerPrivate.cpp:2588:24
    #8 0x7f0f71555525 in mozilla::dom::Worker::Constructor(mozilla::dom::GlobalObject const&, nsTSubstring<char16_t> const&, mozilla::dom::WorkerOptions const&, mozilla::ErrorResult&) /builds/worker/checkouts/gecko/dom/workers/Worker.cpp:43:41
    #9 0x7f0f6e33f2f4 in mozilla::dom::Worker_Binding::_constructor(JSContext*, unsigned int, JS::Value*) /builds/worker/workspace/obj-build/dom/bindings/WorkerBinding.cpp:1107:52
    #10 0x7f0f7882e937 in CallJSNative /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:458:13
    #11 0x7f0f7882e937 in CallJSNativeConstructor /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:474:8
    #12 0x7f0f7882e937 in InternalConstruct(JSContext*, js::AnyConstructArgs const&, js::CallReason) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:693:10
    #13 0x7f0f7881a99e in Interpret(JSContext*, js::RunState&) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:3359:16
    #14 0x7f0f787ffffe in js::RunScript(JSContext*, js::RunState&) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:430:13
    #15 0x7f0f7882c165 in js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstruct, js::CallReason) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:578:13
    #16 0x7f0f7882dc0e in InternalCall /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:613:10
    #17 0x7f0f7882dc0e in js::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, js::AnyInvokeArgs const&, JS::MutableHandle<JS::Value>, js::CallReason) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:645:8
    #18 0x7f0f7717da05 in JS::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, JS::HandleValueArray const&, JS::MutableHandle<JS::Value>) /builds/worker/checkouts/gecko/js/src/vm/CallAndConstruct.cpp:117:10
    #19 0x7f0f6e7e05a7 in mozilla::dom::Function::Call(mozilla::dom::BindingCallContext&, JS::Handle<JS::Value>, nsTArray<JS::Value> const&, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&) /builds/worker/workspace/obj-build/dom/bindings/FunctionBinding.cpp:50:8
    #20 0x7f0f6cd8932c in void mozilla::dom::Function::Call<nsCOMPtr<nsIGlobalObject> >(nsCOMPtr<nsIGlobalObject> const&, nsTArray<JS::Value> const&, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&, char const*, mozilla::dom::CallbackObject::ExceptionHandling, JS::Realm*) /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FunctionBinding.h:71:12
    #21 0x7f0f6cd88f32 in mozilla::dom::CallbackTimeoutHandler::Call(char const*) /builds/worker/checkouts/gecko/dom/base/TimeoutHandler.cpp:167:29
    #22 0x7f0f6c9ae90b in nsGlobalWindowInner::RunTimeoutHandler(mozilla::dom::Timeout*, nsIScriptContext*) /builds/worker/checkouts/gecko/dom/base/nsGlobalWindowInner.cpp:6471:38
    #23 0x7f0f6cd852ab in mozilla::dom::TimeoutManager::RunTimeout(mozilla::TimeStamp const&, mozilla::TimeStamp const&, bool) /builds/worker/checkouts/gecko/dom/base/TimeoutManager.cpp:903:44
    #24 0x7f0f6cd8443a in mozilla::dom::TimeoutExecutor::MaybeExecute() /builds/worker/checkouts/gecko/dom/base/TimeoutExecutor.cpp:179:11
    #25 0x7f0f6cd86b1b in mozilla::dom::TimeoutExecutor::Run() /builds/worker/checkouts/gecko/dom/base/TimeoutExecutor.cpp:234:5
    #26 0x7f0f69e266b2 in mozilla::ThrottledEventQueue::Inner::ExecuteRunnable() /builds/worker/checkouts/gecko/xpcom/threads/ThrottledEventQueue.cpp:254:22
    #27 0x7f0f69e1922f in mozilla::ThrottledEventQueue::Inner::Executor::Run() /builds/worker/checkouts/gecko/xpcom/threads/ThrottledEventQueue.cpp:81:15
    #28 0x7f0f69e1f6b2 in mozilla::RunnableTask::Run() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:538:16
    #29 0x7f0f69ddfdbd in mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:851:26
    #30 0x7f0f69ddcf28 in mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:683:15
    #31 0x7f0f69ddd650 in mozilla::TaskController::ProcessPendingMTTask(bool) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:461:36
    #32 0x7f0f69e286e1 in operator() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:187:37
    #33 0x7f0f69e286e1 in mozilla::detail::RunnableFunction<mozilla::TaskController::InitializeInternal()::$_0>::Run() /builds/worker/workspace/obj-build/dist/include/nsThreadUtils.h:531:5
    #34 0x7f0f69e01117 in nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1205:16
    #35 0x7f0f69e0b594 in NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10
    #36 0x7f0f6b414a88 in mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:85:21
    #37 0x7f0f6b2b1361 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #38 0x7f0f6b2b1361 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #39 0x7f0f6b2b1361 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #40 0x7f0f71ea4717 in nsBaseAppShell::Run() /builds/worker/checkouts/gecko/widget/nsBaseAppShell.cpp:150:27
    #41 0x7f0f76d0f307 in XRE_RunAppShell() /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:880:20
    #42 0x7f0f6b2b1361 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #43 0x7f0f6b2b1361 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #44 0x7f0f6b2b1361 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #45 0x7f0f76d0e22c in XRE_InitChildProcess(int, char**, XREChildData const*) /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:739:34
    #46 0x55ffcf4a3825 in content_process_main(mozilla::Bootstrap*, int, char**) /builds/worker/checkouts/gecko/browser/app/../../ipc/contentproc/plugin-container.cpp:57:28
    #47 0x55ffcf4a3c77 in main /builds/worker/checkouts/gecko/browser/app/nsBrowserApp.cpp:359:18
    #48 0x7f0f8bd5428f  (/usr/lib/libc.so.6+0x2328f) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)

SUMMARY: AddressSanitizer: heap-use-after-free /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/atomic_base.h:396:9 in load
Shadow bytes around the buggy address:
  0x0c068002c9a0: fd fd fd fd fa fa fd fd fd fd fa fa fd fd fd fd
  0x0c068002c9b0: fa fa fd fd fd fd fa fa fd fd fd fd fa fa fd fd
  0x0c068002c9c0: fd fd fa fa fd fd fd fd fa fa fd fd fd fd fa fa
  0x0c068002c9d0: fd fd fd fd fa fa fd fd fd fd fa fa fd fd fd fd
  0x0c068002c9e0: fa fa fd fd fd fd fa fa fd fd fd fd fa fa fd fd
=>0x0c068002c9f0: fd[fd]fa fa fd fd fd fa fa fa fd fd fd fd fa fa
  0x0c068002ca00: 00 00 00 00 fa fa 00 00 00 fa fa fa fd fd fd fd
  0x0c068002ca10: fa fa fd fd fd fd fa fa fd fd fd fd fa fa 00 00
  0x0c068002ca20: 00 00 fa fa fd fd fd fd fa fa fd fd fd fd fa fa
  0x0c068002ca30: fd fd fd fa fa fa fd fd fd fa fa fa fd fd fd fd
  0x0c068002ca40: fa fa fd fd fd fa fa fa fd fd fd fd fa fa fd fd
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
==521246==ABORTING

```
```
==392594==ERROR: AddressSanitizer: heap-use-after-free on address 0x7f5a9ca5f800 at pc 0x7f5ab8c17612 bp 0x7f5aa3b50110 sp 0x7f5aa3b50108
WRITE of size 4 at 0x7f5a9ca5f800 thread T357
    #0 0x7f5ab8c17611 in ClearAndRetainStorage /builds/worker/workspace/obj-build/dist/include/nsTArray.h:1478:30
    #1 0x7f5ab8c17611 in nsTArray_Impl<gfxSparseBitSet::Block, nsTArrayInfallibleAllocator>::~nsTArray_Impl() /builds/worker/workspace/obj-build/dist/include/nsTArray.h:1031:7
    #2 0x7f5ab8be5fe2 in ~gfxSparseBitSet /builds/worker/checkouts/gecko/gfx/thebes/gfxFontUtils.h:56:7
    #3 0x7f5ab8be5fe2 in gfxCharacterMap::NotifyMaybeReleased() /builds/worker/checkouts/gecko/gfx/thebes/gfxFontEntry.cpp:73:3
    #4 0x7f5abebc8377 in Release /builds/worker/workspace/obj-build/dist/include/gfxFontEntry.h:84:14
    #5 0x7f5abebc8377 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40
    #6 0x7f5abebc8377 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36
    #7 0x7f5abebc8377 in ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7
    #8 0x7f5abebc8377 in mozilla::dom::FontFaceImpl::~FontFaceImpl() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:75:1
    #9 0x7f5abebc5016 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFaceImpl.h:37:3
    #10 0x7f5abebc5016 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40
    #11 0x7f5abebc5016 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36
    #12 0x7f5abebc5016 in ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7
    #13 0x7f5abebc5016 in mozilla::dom::FontFace::~FontFace() /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:83:1
    #14 0x7f5abebe48a0 in DeleteCycleCollectable /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:73:1
    #15 0x7f5abebe48a0 in mozilla::dom::FontFace::cycleCollection::DeleteCycleCollectable(void*) /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFace.h:44:3
    #16 0x7f5ab642e2e2 in SnowWhiteKiller::~SnowWhiteKiller() /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2432:7
    #17 0x7f5ab642d87e in nsCycleCollector::FreeSnowWhite(bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2622:3
    #18 0x7f5ab6435834 in nsCycleCollector::BeginCollection(mozilla::CCReason, ccIsManual, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3611:3
    #19 0x7f5ab6434e5c in nsCycleCollector::Collect(mozilla::CCReason, ccIsManual, js::SliceBudget&, nsICycleCollectorListener*, bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3438:9
    #20 0x7f5ab643854a in nsCycleCollector_collect(mozilla::CCReason, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3946:28
    #21 0x7f5abddeb5fd in mozilla::dom::workerinternals::(anonymous namespace)::WorkerJSRuntime::CustomGCCallback(JSGCStatus) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:816:11
    #22 0x7f5ab63e95f8 in mozilla::CycleCollectedJSRuntime::OnGC(JSContext*, JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/xpcom/base/CycleCollectedJSRuntime.cpp:1884:3
    #23 0x7f5ac44a8cd8 in js::gc::GCRuntime::maybeCallGCCallback(JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3755:3
    #24 0x7f5ac44a96ac in ~AutoCallGCCallbacks /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3728:32
    #25 0x7f5ac44a96ac in js::gc::GCRuntime::gcCycle(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3845:1
    #26 0x7f5ac44ab560 in js::gc::GCRuntime::collect(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4027:9
    #27 0x7f5ac4476476 in js::gc::GCRuntime::gc(JS::GCOptions, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4104:3
    #28 0x7f5abdde9a09 in mozilla::dom::workerinternals::(anonymous namespace)::WorkerThreadPrimaryRunnable::Run() /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:2084:7
    #29 0x7f5ab6610a6e in nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1199:16
    #30 0x7f5ab661a6c4 in NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10
    #31 0x7f5ab7c27d49 in mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:330:5
    #32 0x7f5ab7ac42a1 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #33 0x7f5ab7ac42a1 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #34 0x7f5ab7ac42a1 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #35 0x7f5ab6607bc4 in nsThread::ThreadFunc(void*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:384:10
    #36 0x7f5ad7fd7c0e in _pt_root /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:201:5
    #37 0x7f5ad87b774c  (/usr/lib/libc.so.6+0x8674c) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)
    #38 0x7f5ad88396ff  (/usr/lib/libc.so.6+0x1086ff) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)

0x7f5a9ca5f800 is located 0 bytes inside of 139272-byte region [0x7f5a9ca5f800,0x7f5a9ca81808)
freed by thread T356 here:
    #0 0x55f5a6c02ef2 in __interceptor_free /builds/worker/fetches/llvm-project/compiler-rt/lib/asan/asan_malloc_linux.cpp:52:3
    #1 0x7f5ab8be5fe2 in ~gfxSparseBitSet /builds/worker/checkouts/gecko/gfx/thebes/gfxFontUtils.h:56:7
    #2 0x7f5ab8be5fe2 in gfxCharacterMap::NotifyMaybeReleased() /builds/worker/checkouts/gecko/gfx/thebes/gfxFontEntry.cpp:73:3
    #3 0x7f5abebc8377 in Release /builds/worker/workspace/obj-build/dist/include/gfxFontEntry.h:84:14
    #4 0x7f5abebc8377 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40
    #5 0x7f5abebc8377 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36
    #6 0x7f5abebc8377 in ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7
    #7 0x7f5abebc8377 in mozilla::dom::FontFaceImpl::~FontFaceImpl() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:75:1
    #8 0x7f5abebc5016 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFaceImpl.h:37:3
    #9 0x7f5abebc5016 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40
    #10 0x7f5abebc5016 in Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36
    #11 0x7f5abebc5016 in ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7
    #12 0x7f5abebc5016 in mozilla::dom::FontFace::~FontFace() /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:83:1
    #13 0x7f5abebe48a0 in DeleteCycleCollectable /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:73:1
    #14 0x7f5abebe48a0 in mozilla::dom::FontFace::cycleCollection::DeleteCycleCollectable(void*) /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFace.h:44:3
    #15 0x7f5ab642e2e2 in SnowWhiteKiller::~SnowWhiteKiller() /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2432:7
    #16 0x7f5ab642d87e in nsCycleCollector::FreeSnowWhite(bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2622:3
    #17 0x7f5ab6435834 in nsCycleCollector::BeginCollection(mozilla::CCReason, ccIsManual, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3611:3
    #18 0x7f5ab6434e5c in nsCycleCollector::Collect(mozilla::CCReason, ccIsManual, js::SliceBudget&, nsICycleCollectorListener*, bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3438:9
    #19 0x7f5ab643854a in nsCycleCollector_collect(mozilla::CCReason, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3946:28
    #20 0x7f5abddeb5fd in mozilla::dom::workerinternals::(anonymous namespace)::WorkerJSRuntime::CustomGCCallback(JSGCStatus) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:816:11
    #21 0x7f5ab63e95f8 in mozilla::CycleCollectedJSRuntime::OnGC(JSContext*, JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/xpcom/base/CycleCollectedJSRuntime.cpp:1884:3
    #22 0x7f5ac44a8cd8 in js::gc::GCRuntime::maybeCallGCCallback(JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3755:3
    #23 0x7f5ac44a96ac in ~AutoCallGCCallbacks /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3728:32
    #24 0x7f5ac44a96ac in js::gc::GCRuntime::gcCycle(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3845:1
    #25 0x7f5ac44ab560 in js::gc::GCRuntime::collect(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4027:9
    #26 0x7f5ac4476476 in js::gc::GCRuntime::gc(JS::GCOptions, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4104:3
    #27 0x7f5abdde9a09 in mozilla::dom::workerinternals::(anonymous namespace)::WorkerThreadPrimaryRunnable::Run() /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:2084:7
    #28 0x7f5ab6610a6e in nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1199:16
    #29 0x7f5ab661a6c4 in NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10
    #30 0x7f5ab7c27be8 in mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:300:20
    #31 0x7f5ab7ac42a1 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #32 0x7f5ab7ac42a1 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #33 0x7f5ab7ac42a1 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #34 0x7f5ab6607bc4 in nsThread::ThreadFunc(void*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:384:10
    #35 0x7f5ad7fd7c0e in _pt_root /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:201:5
    #36 0x7f5ad87b774c  (/usr/lib/libc.so.6+0x8674c) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)

previously allocated by thread T0 (Isolated Web Co) here:
    #0 0x55f5a6c03466 in __interceptor_realloc /builds/worker/fetches/llvm-project/compiler-rt/lib/asan/asan_malloc_linux.cpp:85:3
    #1 0x7f5ab74010d5 in Realloc /builds/worker/workspace/obj-build/dist/include/nsTArray.h:247:12
    #2 0x7f5ab74010d5 in nsTArray_base<nsTArrayInfallibleAllocator, nsTArray_RelocateUsingMemutils>::ShrinkCapacity(unsigned long, unsigned long) /builds/worker/workspace/obj-build/dist/include/nsTArray-inl.h:292:30
    #3 0x7f5abebcc275 in Compact /builds/worker/workspace/obj-build/dist/include/nsTArray.h:2340:5
    #4 0x7f5abebcc275 in Compact /builds/worker/workspace/obj-build/dist/include/gfxFontUtils.h:325:13
    #5 0x7f5abebcc275 in mozilla::dom::FontFaceImpl::GetUnicodeRangeAsCharacterMap() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:692:14
    #6 0x7f5abebd9cf0 in mozilla::dom::FontFaceSetImpl::FindOrCreateUserFontEntryFromFontFace(nsTSubstring<char> const&, mozilla::dom::FontFaceImpl*, mozilla::StyleOrigin) /builds/worker/checkouts/gecko/layout/style/FontFaceSetImpl.cpp:458:47
    #7 0x7f5abebc9671 in mozilla::dom::FontFaceSetImpl::FindOrCreateUserFontEntryFromFontFace(mozilla::dom::FontFaceImpl*) /builds/worker/checkouts/gecko/layout/style/FontFaceSetImpl.cpp:345:10
    #8 0x7f5abebc9781 in mozilla::dom::FontFaceImpl::CreateUserFontEntry() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:326:9
    #9 0x7f5abebc8fa5 in mozilla::dom::FontFaceImpl::DoLoad() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:342:8
    #10 0x7f5abebe9fdf in operator() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:338:65
    #11 0x7f5abebe9fdf in mozilla::detail::RunnableFunction<mozilla::dom::FontFaceImpl::DoLoad()::$_9>::Run() /builds/worker/workspace/obj-build/dist/include/nsThreadUtils.h:531:5
    #12 0x7f5ab662e7e2 in mozilla::RunnableTask::Run() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:538:16
    #13 0x7f5ab65eeeed in mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:851:26
    #14 0x7f5ab65ec058 in mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:683:15
    #15 0x7f5ab65ec780 in mozilla::TaskController::ProcessPendingMTTask(bool) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:461:36
    #16 0x7f5ab6637811 in operator() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:187:37
    #17 0x7f5ab6637811 in mozilla::detail::RunnableFunction<mozilla::TaskController::InitializeInternal()::$_0>::Run() /builds/worker/workspace/obj-build/dist/include/nsThreadUtils.h:531:5
    #18 0x7f5ab6610247 in nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1205:16
    #19 0x7f5ab661a6c4 in NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10
    #20 0x7f5ab7c26a38 in mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:85:21
    #21 0x7f5ab7ac42a1 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #22 0x7f5ab7ac42a1 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #23 0x7f5ab7ac42a1 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #24 0x7f5abe70d887 in nsBaseAppShell::Run() /builds/worker/checkouts/gecko/widget/nsBaseAppShell.cpp:150:27
    #25 0x7f5ac3596c37 in XRE_RunAppShell() /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:880:20
    #26 0x7f5ab7ac42a1 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #27 0x7f5ab7ac42a1 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #28 0x7f5ab7ac42a1 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #29 0x7f5ac3595b5c in XRE_InitChildProcess(int, char**, XREChildData const*) /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:739:34
    #30 0x55f5a6c40825 in content_process_main(mozilla::Bootstrap*, int, char**) /builds/worker/checkouts/gecko/browser/app/../../ipc/contentproc/plugin-container.cpp:57:28
    #31 0x55f5a6c40c77 in main /builds/worker/checkouts/gecko/browser/app/nsBrowserApp.cpp:359:18
    #32 0x7f5ad875428f  (/usr/lib/libc.so.6+0x2328f) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)

Thread T357 created by T0 (Isolated Web Co) here:
    #0 0x55f5a6bec6fc in __interceptor_pthread_create /builds/worker/fetches/llvm-project/compiler-rt/lib/asan/asan_interceptors.cpp:208:3
    #1 0x7f5ad7fc7cbc in _PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:458:14
    #2 0x7f5ad7fb905e in PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:533:12
    #3 0x7f5ab660ab45 in nsThread::Init(nsTSubstring<char> const&) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:618:18
    #4 0x7f5abde395fa in mozilla::dom::WorkerThread::Create(mozilla::dom::WorkerThreadFriendKey const&) /builds/worker/checkouts/gecko/dom/workers/WorkerThread.cpp:102:7
    (...)

Thread T356 created by T0 (Isolated Web Co) here:
    #0 0x55f5a6bec6fc in __interceptor_pthread_create /builds/worker/fetches/llvm-project/compiler-rt/lib/asan/asan_interceptors.cpp:208:3
    #1 0x7f5ad7fc7cbc in _PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:458:14
    #2 0x7f5ad7fb905e in PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:533:12
    #3 0x7f5ab660ab45 in nsThread::Init(nsTSubstring<char> const&) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:618:18
    #4 0x7f5abde395fa in mozilla::dom::WorkerThread::Create(mozilla::dom::WorkerThreadFriendKey const&) /builds/worker/checkouts/gecko/dom/workers/WorkerThread.cpp:102:7
    (...)

SUMMARY: AddressSanitizer: heap-use-after-free /builds/worker/workspace/obj-build/dist/include/nsTArray.h:1478:30 in ClearAndRetainStorage
Shadow bytes around the buggy address:
  0x0febd3943eb0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0febd3943ec0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0febd3943ed0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0febd3943ee0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x0febd3943ef0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
=>0x0febd3943f00:[fd]fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0febd3943f10: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0febd3943f20: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0febd3943f30: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0febd3943f40: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0febd3943f50: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
==392594==ABORTING

```
### Testcase

The UAF was triggered by loading mock user fonts on concurrent worker threads. Here's an initial testcase which crashes on debug builds as shown below.

```
<script>
new Worker("data:text/javascript,new FontFace('foo', new ArrayBuffer(100));");
</script>

```

(Because the font source is given as an `ArrayBuffer`, font loading is triggered implicitly, so no need to call `FontFace.load()`.

In either case the actual loading then gets delegated to the main thread in [`FontFaceImpl::DoLoad()`](https://searchfox.org/mozilla-central/rev/462f51927aaeb97447dd2a9f347ca42b1e6f9fa3/layout/style/FontFaceImpl.cpp#335).)

```
==869252==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000001 (pc 0x7f5825254c41 bp 0x7ffee1b91730 sp 0x7ffee1b91720 T0)
==869252==The signal is caused by a WRITE memory access.
==869252==Hint: address points to the zero page.
    #0 0x7f5825254c41 in MOZ_Crash /builds/worker/workspace/obj-build/dist/include/mozilla/Assertions.h:261:3
    #1 0x7f5825254c41 in nsAutoOwningThread::AssertCurrentThreadOwnsMe(char const*) const /builds/worker/checkouts/gecko/xpcom/base/nsISupportsImpl.cpp:43:5
    #2 0x7f5827afd010 in AssertOwnership<40> /builds/worker/workspace/obj-build/dist/include/nsISupportsImpl.h:60:5
    #3 0x7f5827afd010 in AddRef /builds/worker/checkouts/gecko/gfx/thebes/gfxUserFontSet.h:62:3
    #4 0x7f5827afd010 in AddRef /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:49:39
    #5 0x7f5827afd010 in AddRef /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:380:35
    #6 0x7f5827afd010 in RefPtr<gfxFontFaceBufferSource>::RefPtr(RefPtr<gfxFontFaceBufferSource> const&) /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:97:7
    #7 0x7f5827afccb6 in Construct<const gfxFontFaceSrc &> /builds/worker/workspace/obj-build/dist/include/nsTArray.h:628:34
    #8 0x7f5827afccb6 in void AssignRangeAlgorithm<false, true>::implementation<gfxFontFaceSrc, gfxFontFaceSrc, unsigned long, unsigned long>(gfxFontFaceSrc*, unsigned long, unsigned long, gfxFontFaceSrc const*) /builds/worker/workspace/obj-build/dist/include/nsTArray.h:661:7
    #9 0x7f5827afcb59 in AssignRange<gfxFontFaceSrc> /builds/worker/workspace/obj-build/dist/include/nsTArray.h:2418:5
    #10 0x7f5827afcb59 in nsTArrayInfallibleAllocator::ResultType nsTArray_Impl<gfxFontFaceSrc, nsTArrayInfallibleAllocator>::AssignInternal<nsTArrayInfallibleAllocator, gfxFontFaceSrc>(gfxFontFaceSrc const*, unsigned long) /builds/worker/workspace/obj-build/dist/include/nsTArray.h:2449:5
    #11 0x7f5827ac4fcd in Clone /builds/worker/workspace/obj-build/dist/include/nsTArray.h:2828:12
    #12 0x7f5827ac4fcd in gfxUserFontEntry::gfxUserFontEntry(gfxUserFontSet*, nsTArray<gfxFontFaceSrc> const&, mozilla::WeightRange, mozilla::StretchRange, mozilla::SlantStyleRange, nsTArray<gfxFontFeature> const&, nsTArray<mozilla::gfx::FontVariation> const&, unsigned int, gfxCharacterMap*, mozilla::StyleFontDisplay, gfxFontEntry::RangeFlags, float, float, float, float) /builds/worker/checkouts/gecko/gfx/thebes/gfxUserFontSet.cpp:58:31
    #13 0x7f582d9e0c7d in mozilla::dom::FontFaceImpl::Entry::Entry(gfxUserFontSet*, nsTArray<gfxFontFaceSrc> const&, mozilla::WeightRange, mozilla::StretchRange, mozilla::SlantStyleRange, nsTArray<gfxFontFeature> const&, nsTArray<mozilla::gfx::FontVariation> const&, unsigned int, gfxCharacterMap*, mozilla::StyleFontDisplay, gfxFontEntry::RangeFlags, float, float, float, float) /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFaceImpl.h:57:11
    #14 0x7f582d9e0c05 in mozilla::dom::FontFaceSetImpl::CreateUserFontEntry(nsTArray<gfxFontFaceSrc> const&, mozilla::WeightRange, mozilla::StretchRange, mozilla::SlantStyleRange, nsTArray<gfxFontFeature> const&, nsTArray<mozilla::gfx::FontVariation> const&, unsigned int, gfxCharacterMap*, mozilla::StyleFontDisplay, gfxFontEntry::RangeFlags, float, float, float, float) /builds/worker/checkouts/gecko/layout/style/FontFaceSetImpl.cpp:982:40
    #15 0x7f5827acd73e in gfxUserFontSet::FindOrCreateUserFontEntry(nsTSubstring<char> const&, nsTArray<gfxFontFaceSrc> const&, mozilla::WeightRange, mozilla::StretchRange, mozilla::SlantStyleRange, nsTArray<gfxFontFeature> const&, nsTArray<mozilla::gfx::FontVariation> const&, unsigned int, gfxCharacterMap*, mozilla::StyleFontDisplay, gfxFontEntry::RangeFlags, float, float, float, float) /builds/worker/checkouts/gecko/gfx/thebes/gfxUserFontSet.cpp:977:13
    #16 0x7f582d9da9f4 in mozilla::dom::FontFaceSetImpl::FindOrCreateUserFontEntryFromFontFace(nsTSubstring<char> const&, mozilla::dom::FontFaceImpl*, mozilla::StyleOrigin) /builds/worker/checkouts/gecko/layout/style/FontFaceSetImpl.cpp:633:41
    #17 0x7f582d9c9671 in mozilla::dom::FontFaceSetImpl::FindOrCreateUserFontEntryFromFontFace(mozilla::dom::FontFaceImpl*) /builds/worker/checkouts/gecko/layout/style/FontFaceSetImpl.cpp:345:10
    #18 0x7f582d9c9781 in mozilla::dom::FontFaceImpl::CreateUserFontEntry() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:326:9
    #19 0x7f582d9c8fa5 in mozilla::dom::FontFaceImpl::DoLoad() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:342:8
    #20 0x7f582d9e9fdf in operator() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:338:65
    #21 0x7f582d9e9fdf in mozilla::detail::RunnableFunction<mozilla::dom::FontFaceImpl::DoLoad()::$_9>::Run() /builds/worker/workspace/obj-build/dist/include/nsThreadUtils.h:531:5
    #22 0x7f582542e7e2 in mozilla::RunnableTask::Run() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:538:16
    #23 0x7f58253eeeed in mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:851:26
    #24 0x7f58253ec058 in mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:683:15
    #25 0x7f58253ec780 in mozilla::TaskController::ProcessPendingMTTask(bool) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:461:36
    #26 0x7f5825437811 in operator() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:187:37
    #27 0x7f5825437811 in mozilla::detail::RunnableFunction<mozilla::TaskController::InitializeInternal()::$_0>::Run() /builds/worker/workspace/obj-build/dist/include/nsThreadUtils.h:531:5
    #28 0x7f5825410247 in nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1205:16
    #29 0x7f582541a6c4 in NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10
    #30 0x7f5826a26a38 in mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:85:21
    #31 0x7f58268c42a1 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #32 0x7f58268c42a1 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #33 0x7f58268c42a1 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #34 0x7f582d50d887 in nsBaseAppShell::Run() /builds/worker/checkouts/gecko/widget/nsBaseAppShell.cpp:150:27
    #35 0x7f5832396c37 in XRE_RunAppShell() /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:880:20
    #36 0x7f58268c42a1 in RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10
    #37 0x7f58268c42a1 in RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3
    #38 0x7f58268c42a1 in MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3
    #39 0x7f5832395b5c in XRE_InitChildProcess(int, char**, XREChildData const*) /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:739:34
    #40 0x55fb6485b825 in content_process_main(mozilla::Bootstrap*, int, char**) /builds/worker/checkouts/gecko/browser/app/../../ipc/contentproc/plugin-container.cpp:57:28
    #41 0x55fb6485bc77 in main /builds/worker/checkouts/gecko/browser/app/nsBrowserApp.cpp:359:18
    #42 0x7f584763c28f  (/usr/lib/libc.so.6+0x2328f) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)
    #43 0x7f584763c349 in __libc_start_main (/usr/lib/libc.so.6+0x23349) (BuildId: 26c81e7e05ebaf40bac3523b7d76be0cd71fad82)
    #44 0x55fb6479bc80 in _start (/m-c-20220930214439-asan-opt/firefox+0x75c80) (BuildId: 299d2569dc538e4ecc6eab756f7d0eca461536c7)

AddressSanitizer can not provide additional info.
SUMMARY: AddressSanitizer: SEGV /builds/worker/workspace/obj-build/dist/include/mozilla/Assertions.h:261:3 in MOZ_Crash
==869252==ABORTING

```
Flags: sec-bounty?

|  | [Armin Ebert [:arminius]](/user_profile?user_id=526160)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a1013_526160)• 2 years ago |

Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---)

|  | [Armin Ebert [:arminius]](/user_profile?user_id=526160)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a83613_526160)• 2 years ago |

See Also: → [1793379](/show_bug.cgi?id=1793379 "VERIFIED FIXED - AddressSanitizer: SEGV /builds/worker/workspace/obj-build/dist/include/mozilla/Assertions.h:261:3 in MOZ_Crash (via FontFaceImpl::SetDescriptor on worker thread)")

|  | [Armin Ebert [:arminius]](/user_profile?user_id=526160)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1793314#c1)• 2 years ago |
|  | |

There's a couple of different crashes that may occur when using the `FontFace` API from workers, but I'm having some difficulty untangling them.

So I've filed [bug 1793379](/show_bug.cgi?id=1793379 "VERIFIED FIXED - AddressSanitizer: SEGV /builds/worker/workspace/obj-build/dist/include/mozilla/Assertions.h:261:3 in MOZ_Crash (via FontFaceImpl::SetDescriptor on worker thread)") separately because it seems like a distinct (probably non-security) issue, but I'm not sure.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a105793_1689)• 2 years ago |

Group: core-security → layout-core-securityKeywords: [crash](/buglist.cgi?keywords=crash&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1793314#c2)• 2 years ago |
|  | |

Possible regression from [bug 1072107](/show_bug.cgi?id=1072107 "RESOLVED FIXED - support the CSS Font Loading API in workers").

Flags: needinfo?(aosmond)Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a134672_406194)• 2 years ago |

See Also: → [1793127](/show_bug.cgi?id=1793127 "RESOLVED FIXED - AddressSanitizer: heap-use-after-free [@ Length] with READ of size 8")

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1793314#c3)• 2 years ago |
|  | |

[Tracking Requested - why for this release]: We've gotten a number of reports of UAF-ish issues with worker font things in the last few weeks. Somebody should figure out what is going on. I'm nominating this one for tracking because it has an actual test case.

[status-firefox107](/buglist.cgi?f1=cf_status_firefox107&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox107&o1=equals&v1=affected)
[tracking-firefox107](/buglist.cgi?f1=cf_tracking_firefox107&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox107&o1=equals&v1=%3F)

|  | [Donal Meehan [:dmeehan]](/user_profile?user_id=695136) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a137614_695136)• 2 years ago |

[tracking-firefox107](/buglist.cgi?f1=cf_tracking_firefox107&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox107&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox107&o1=equals&v1=%2B)

|  | [Armin Ebert [:arminius]](/user_profile?user_id=526160)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1793314#c4)• 2 years ago |
|  | |

This additional testcase might be useful. On my end, TSAN (`m-c-20221003212025-tsan-opt`) reliably reports a data race as shown below.

### Testcase 2

```
<script>
const code = `
  postMessage(1);
  (new FontFace("foo", "url('bar')")).load();
`;
const url = URL.createObjectURL(new Blob([code], {type: "text/javascript"}));
function spawn() {
    const worker = new Worker(url);
    worker.onmessage = () => { setTimeout(spawn); };
}
spawn();
setTimeout(()=> { location.reload() }, 1000);
</script>

```
```
WARNING: ThreadSanitizer: data race (pid=2217846)
  Write of size 8 at 0x7b080005cc18 by thread T43:
    #0 free /builds/worker/fetches/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:726:3 (firefox+0x5de14) (BuildId: 3981ec272af981d00b777c74226fc6a0d46bd2e5)
    #1 operator delete /builds/worker/workspace/obj-build/dist/include/mozilla/cxxalloc.h:51:10 (libxul.so+0x274b5a3) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #2 gfxCharacterMap::NotifyMaybeReleased() /builds/worker/checkouts/gecko/gfx/thebes/gfxFontEntry.cpp:73:3 (libxul.so+0x274b5a3)
    #3 Release /builds/worker/workspace/obj-build/dist/include/gfxFontEntry.h:84:14 (libxul.so+0x5f587c0) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #4 Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40 (libxul.so+0x5f587c0)
    #5 Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36 (libxul.so+0x5f587c0)
    #6 ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7 (libxul.so+0x5f587c0)
    #7 mozilla::dom::FontFaceImpl::~FontFaceImpl() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:75:1 (libxul.so+0x5f587c0)
    #8 Release /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFaceImpl.h:37:3 (libxul.so+0x5f5517d) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #9 Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40 (libxul.so+0x5f5517d)
    #10 Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36 (libxul.so+0x5f5517d)
    #11 ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7 (libxul.so+0x5f5517d)
    #12 mozilla::dom::FontFace::~FontFace() /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:83:1 (libxul.so+0x5f5517d)
    #13 DeleteCycleCollectable /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:73:1 (libxul.so+0x5f6ac15) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #14 mozilla::dom::FontFace::cycleCollection::DeleteCycleCollectable(void*) /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFace.h:44:3 (libxul.so+0x5f6ac15)
    #15 MaybeKillObject /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2445:29 (libxul.so+0x10ebd81) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #16 SnowWhiteKiller::~SnowWhiteKiller() /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2432:7 (libxul.so+0x10ebd81)
    #17 nsCycleCollector::FreeSnowWhite(bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2622:3 (libxul.so+0x10eb422) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #18 nsCycleCollector::BeginCollection(mozilla::CCReason, ccIsManual, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3611:3 (libxul.so+0x10f0b78) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #19 nsCycleCollector::Collect(mozilla::CCReason, ccIsManual, js::SliceBudget&, nsICycleCollectorListener*, bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3438:9 (libxul.so+0x10f0496) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #20 nsCycleCollector_collect(mozilla::CCReason, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3946:28 (libxul.so+0x10f2c75) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #21 mozilla::dom::workerinternals::(anonymous namespace)::WorkerJSRuntime::CustomGCCallback(JSGCStatus) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:816:11 (libxul.so+0x573061c) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #22 mozilla::CycleCollectedJSRuntime::OnGC(JSContext*, JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/xpcom/base/CycleCollectedJSRuntime.cpp:1884:3 (libxul.so+0x10c8557) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #23 mozilla::CycleCollectedJSRuntime::GCCallback(JSContext*, JSGCStatus, JS::GCReason, void*) /builds/worker/checkouts/gecko/xpcom/base/CycleCollectedJSRuntime.cpp:1036:9 (libxul.so+0x10c473e) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #24 callGCCallback /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:1305:3 (libxul.so+0x8fb80de) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #25 js::gc::GCRuntime::maybeCallGCCallback(JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3755:3 (libxul.so+0x8fb80de)
    #26 ~AutoCallGCCallbacks /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3728:32 (libxul.so+0x8fb8a0d) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #27 js::gc::GCRuntime::gcCycle(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3845:1 (libxul.so+0x8fb8a0d)
    #28 js::gc::GCRuntime::collect(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4027:9 (libxul.so+0x8fb9712) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #29 js::gc::GCRuntime::gc(JS::GCOptions, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4104:3 (libxul.so+0x8f95ffc) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #30 JS::NonIncrementalGC(JSContext*, JS::GCOptions, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GCAPI.cpp:297:21 (libxul.so+0x8fcbbcc) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #31 mozilla::dom::workerinternals::(anonymous namespace)::WorkerThreadPrimaryRunnable::Run() /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:2084:7 (libxul.so+0x572faff) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #32 nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1199:16 (libxul.so+0x11e28c8) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #33 NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10 (libxul.so+0x11e8d95) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #34 mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:300:20 (libxul.so+0x1e5b4de) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #35 RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10 (libxul.so+0x1d787fc) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #36 RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3 (libxul.so+0x1d787fc)
    #37 MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3 (libxul.so+0x1d787fc)
    #38 nsThread::ThreadFunc(void*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:384:10 (libxul.so+0x11ddc86) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #39 _pt_root /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:201:5 (libnspr4.so+0x4615d) (BuildId: ba017d6bb7040701e4d330ef3897619538d6a72a)

  Previous atomic read of size 8 at 0x7b080005cc18 by thread T22:
    #0 load /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/bits/atomic_base.h:396:9 (libxul.so+0x5f5879e) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #1 get /builds/worker/workspace/obj-build/dist/include/nsISupportsImpl.h:389:19 (libxul.so+0x5f5879e)
    #2 operator unsigned long /builds/worker/workspace/obj-build/dist/include/nsISupportsImpl.h:385:56 (libxul.so+0x5f5879e)
    #3 Release /builds/worker/workspace/obj-build/dist/include/gfxFontEntry.h:81:9 (libxul.so+0x5f5879e)
    #4 Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40 (libxul.so+0x5f5879e)
    #5 Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36 (libxul.so+0x5f5879e)
    #6 ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7 (libxul.so+0x5f5879e)
    #7 mozilla::dom::FontFaceImpl::~FontFaceImpl() /builds/worker/checkouts/gecko/layout/style/FontFaceImpl.cpp:75:1 (libxul.so+0x5f5879e)
    #8 Release /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFaceImpl.h:37:3 (libxul.so+0x5f5517d) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #9 Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:50:40 (libxul.so+0x5f5517d)
    #10 Release /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:381:36 (libxul.so+0x5f5517d)
    #11 ~RefPtr /builds/worker/workspace/obj-build/dist/include/mozilla/RefPtr.h:81:7 (libxul.so+0x5f5517d)
    #12 mozilla::dom::FontFace::~FontFace() /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:83:1 (libxul.so+0x5f5517d)
    #13 DeleteCycleCollectable /builds/worker/checkouts/gecko/layout/style/FontFace.cpp:73:1 (libxul.so+0x5f6ac15) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #14 mozilla::dom::FontFace::cycleCollection::DeleteCycleCollectable(void*) /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FontFace.h:44:3 (libxul.so+0x5f6ac15)
    #15 MaybeKillObject /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2445:29 (libxul.so+0x10ebd81) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #16 SnowWhiteKiller::~SnowWhiteKiller() /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2432:7 (libxul.so+0x10ebd81)
    #17 nsCycleCollector::FreeSnowWhite(bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:2622:3 (libxul.so+0x10eb422) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #18 nsCycleCollector::BeginCollection(mozilla::CCReason, ccIsManual, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3611:3 (libxul.so+0x10f0b78) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #19 nsCycleCollector::Collect(mozilla::CCReason, ccIsManual, js::SliceBudget&, nsICycleCollectorListener*, bool) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3438:9 (libxul.so+0x10f0496) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #20 nsCycleCollector_collect(mozilla::CCReason, nsICycleCollectorListener*) /builds/worker/checkouts/gecko/xpcom/base/nsCycleCollector.cpp:3946:28 (libxul.so+0x10f2c75) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #21 mozilla::dom::workerinternals::(anonymous namespace)::WorkerJSRuntime::CustomGCCallback(JSGCStatus) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:816:11 (libxul.so+0x573061c) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #22 mozilla::CycleCollectedJSRuntime::OnGC(JSContext*, JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/xpcom/base/CycleCollectedJSRuntime.cpp:1884:3 (libxul.so+0x10c8557) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #23 mozilla::CycleCollectedJSRuntime::GCCallback(JSContext*, JSGCStatus, JS::GCReason, void*) /builds/worker/checkouts/gecko/xpcom/base/CycleCollectedJSRuntime.cpp:1036:9 (libxul.so+0x10c473e) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #24 callGCCallback /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:1305:3 (libxul.so+0x8fb80de) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #25 js::gc::GCRuntime::maybeCallGCCallback(JSGCStatus, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3755:3 (libxul.so+0x8fb80de)
    #26 ~AutoCallGCCallbacks /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3728:32 (libxul.so+0x8fb8a0d) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #27 js::gc::GCRuntime::gcCycle(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:3845:1 (libxul.so+0x8fb8a0d)
    #28 js::gc::GCRuntime::collect(bool, js::SliceBudget const&, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4027:9 (libxul.so+0x8fb9712) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #29 js::gc::GCRuntime::gc(JS::GCOptions, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GC.cpp:4104:3 (libxul.so+0x8f95ffc) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #30 JS::NonIncrementalGC(JSContext*, JS::GCOptions, JS::GCReason) /builds/worker/checkouts/gecko/js/src/gc/GCAPI.cpp:297:21 (libxul.so+0x8fcbbcc) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #31 mozilla::dom::workerinternals::(anonymous namespace)::WorkerThreadPrimaryRunnable::Run() /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:2084:7 (libxul.so+0x572faff) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #32 nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1199:16 (libxul.so+0x11e28c8) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #33 NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10 (libxul.so+0x11e8d95) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #34 mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:300:20 (libxul.so+0x1e5b4de) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #35 RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10 (libxul.so+0x1d787fc) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #36 RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3 (libxul.so+0x1d787fc)
    #37 MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3 (libxul.so+0x1d787fc)
    #38 nsThread::ThreadFunc(void*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:384:10 (libxul.so+0x11ddc86) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #39 _pt_root /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:201:5 (libnspr4.so+0x4615d) (BuildId: ba017d6bb7040701e4d330ef3897619538d6a72a)

  Thread T43 'DOM Worker' (tid=2218036, running) created by main thread at:
    #0 pthread_create /builds/worker/fetches/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1022:3 (firefox+0x5efdd) (BuildId: 3981ec272af981d00b777c74226fc6a0d46bd2e5)
    #1 _PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:458:14 (libnspr4.so+0x3d1b5) (BuildId: ba017d6bb7040701e4d330ef3897619538d6a72a)
    #2 PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:533:12 (libnspr4.so+0x322a5) (BuildId: ba017d6bb7040701e4d330ef3897619538d6a72a)
    #3 nsThread::Init(nsTSubstring<char> const&) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:618:18 (libxul.so+0x11df805) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #4 mozilla::dom::WorkerThread::Create(mozilla::dom::WorkerThreadFriendKey const&) /builds/worker/checkouts/gecko/dom/workers/WorkerThread.cpp:102:7 (libxul.so+0x575fb71) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #5 mozilla::dom::workerinternals::RuntimeService::ScheduleWorker(mozilla::dom::WorkerPrivate&) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:1323:37 (libxul.so+0x5718ef2) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #6 mozilla::dom::workerinternals::RuntimeService::RegisterWorker(mozilla::dom::WorkerPrivate&) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:1205:19 (libxul.so+0x57183dd) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #7 mozilla::dom::WorkerPrivate::Constructor(JSContext*, nsTSubstring<char16_t> const&, bool, mozilla::dom::WorkerKind, nsTSubstring<char16_t> const&, nsTSubstring<char> const&, mozilla::dom::WorkerLoadInfo*, mozilla::ErrorResult&, nsTString<char16_t>) /builds/worker/checkouts/gecko/dom/workers/WorkerPrivate.cpp:2588:24 (libxul.so+0x5743062) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #8 mozilla::dom::Worker::Constructor(mozilla::dom::GlobalObject const&, nsTSubstring<char16_t> const&, mozilla::dom::WorkerOptions const&, mozilla::ErrorResult&) /builds/worker/checkouts/gecko/dom/workers/Worker.cpp:43:41 (libxul.so+0x5721f5e) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #9 mozilla::dom::Worker_Binding::_constructor(JSContext*, unsigned int, JS::Value*) /builds/worker/workspace/obj-build/dom/bindings/WorkerBinding.cpp:1107:52 (libxul.so+0x393919d) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #10 <null> <null> (0x7ff3f6d00162)
    #11 js::RunScript(JSContext*, js::RunState&) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:421:32 (libxul.so+0x983c59e) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #12 js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstruct, js::CallReason) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:579:13 (libxul.so+0x9853565) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #13 InternalCall /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:614:10 (libxul.so+0x985429c) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #14 js::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, js::AnyInvokeArgs const&, JS::MutableHandle<JS::Value>, js::CallReason) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:646:8 (libxul.so+0x985429c)
    #15 JS::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, JS::HandleValueArray const&, JS::MutableHandle<JS::Value>) /builds/worker/checkouts/gecko/js/src/vm/CallAndConstruct.cpp:117:10 (libxul.so+0x896a3f1) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #16 mozilla::dom::Function::Call(mozilla::dom::BindingCallContext&, JS::Handle<JS::Value>, nsTArray<JS::Value> const&, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&) /builds/worker/workspace/obj-build/dom/bindings/FunctionBinding.cpp:50:8 (libxul.so+0x3bf8e9a) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #17 void mozilla::dom::Function::Call<nsCOMPtr<nsIGlobalObject> >(nsCOMPtr<nsIGlobalObject> const&, nsTArray<JS::Value> const&, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&, char const*, mozilla::dom::CallbackObject::ExceptionHandling, JS::Realm*) /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FunctionBinding.h:71:12 (libxul.so+0x2cb4453) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #18 mozilla::dom::CallbackTimeoutHandler::Call(char const*) /builds/worker/checkouts/gecko/dom/base/TimeoutHandler.cpp:167:29 (libxul.so+0x2cb4239) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #19 nsGlobalWindowInner::RunTimeoutHandler(mozilla::dom::Timeout*, nsIScriptContext*) /builds/worker/checkouts/gecko/dom/base/nsGlobalWindowInner.cpp:6478:38 (libxul.so+0x2a9149e) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #20 mozilla::dom::TimeoutManager::RunTimeout(mozilla::TimeStamp const&, mozilla::TimeStamp const&, bool) /builds/worker/checkouts/gecko/dom/base/TimeoutManager.cpp:903:44 (libxul.so+0x2cb17fe) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #21 mozilla::dom::TimeoutExecutor::MaybeExecute() /builds/worker/checkouts/gecko/dom/base/TimeoutExecutor.cpp:179:11 (libxul.so+0x2cb0bc5) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #22 mozilla::dom::TimeoutExecutor::Run() /builds/worker/checkouts/gecko/dom/base/TimeoutExecutor.cpp:234:5 (libxul.so+0x2cb2903) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #23 mozilla::ThrottledEventQueue::Inner::ExecuteRunnable() /builds/worker/checkouts/gecko/xpcom/threads/ThrottledEventQueue.cpp:254:22 (libxul.so+0x11faf28) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #24 mozilla::ThrottledEventQueue::Inner::Executor::Run() /builds/worker/checkouts/gecko/xpcom/threads/ThrottledEventQueue.cpp:81:15 (libxul.so+0x11f3b6f) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #25 mozilla::RunnableTask::Run() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:538:16 (libxul.so+0x11f82c7) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #26 mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:851:26 (libxul.so+0x11cdff7) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #27 mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:683:15 (libxul.so+0x11cc466) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #28 mozilla::TaskController::ProcessPendingMTTask(bool) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:461:36 (libxul.so+0x11cc744) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #29 operator() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:187:37 (libxul.so+0x11fc0a7) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #30 mozilla::detail::RunnableFunction<mozilla::TaskController::InitializeInternal()::$_0>::Run() /builds/worker/workspace/obj-build/dist/include/nsThreadUtils.h:531:5 (libxul.so+0x11fc0a7)
    #31 nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1205:16 (libxul.so+0x11e26a2) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #32 NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10 (libxul.so+0x11e8d95) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #33 mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:85:21 (libxul.so+0x1e5a8bb) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #34 mozilla::ipc::MessagePumpForChildProcess::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:268:30 (libxul.so+0x1e5b3eb) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #35 RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10 (libxul.so+0x1d787fc) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #36 RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3 (libxul.so+0x1d787fc)
    #37 MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3 (libxul.so+0x1d787fc)
    #38 nsBaseAppShell::Run() /builds/worker/checkouts/gecko/widget/nsBaseAppShell.cpp:150:27 (libxul.so+0x5c6c486) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #39 XRE_RunAppShell() /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:880:20 (libxul.so+0x86c8809) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #40 mozilla::ipc::MessagePumpForChildProcess::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:235:9 (libxul.so+0x1e5b39d) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #41 RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10 (libxul.so+0x1d787fc) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #42 RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3 (libxul.so+0x1d787fc)
    #43 MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3 (libxul.so+0x1d787fc)
    #44 XRE_InitChildProcess(int, char**, XREChildData const*) /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:739:34 (libxul.so+0x86c7fac) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #45 mozilla::BootstrapImpl::XRE_InitChildProcess(int, char**, XREChildData const*) /builds/worker/checkouts/gecko/toolkit/xre/Bootstrap.cpp:67:12 (libxul.so+0x86d1572) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #46 content_process_main /builds/worker/checkouts/gecko/browser/app/../../ipc/contentproc/plugin-container.cpp:57:28 (firefox+0xdffa7) (BuildId: 3981ec272af981d00b777c74226fc6a0d46bd2e5)
    #47 main /builds/worker/checkouts/gecko/browser/app/nsBrowserApp.cpp:359:18 (firefox+0xdffa7)

  Thread T22 'DOM Worker' (tid=2218012, running) created by main thread at:
    #0 pthread_create /builds/worker/fetches/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1022:3 (firefox+0x5efdd) (BuildId: 3981ec272af981d00b777c74226fc6a0d46bd2e5)
    #1 _PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:458:14 (libnspr4.so+0x3d1b5) (BuildId: ba017d6bb7040701e4d330ef3897619538d6a72a)
    #2 PR_CreateThread /builds/worker/checkouts/gecko/nsprpub/pr/src/pthreads/ptthread.c:533:12 (libnspr4.so+0x322a5) (BuildId: ba017d6bb7040701e4d330ef3897619538d6a72a)
    #3 nsThread::Init(nsTSubstring<char> const&) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:618:18 (libxul.so+0x11df805) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #4 mozilla::dom::WorkerThread::Create(mozilla::dom::WorkerThreadFriendKey const&) /builds/worker/checkouts/gecko/dom/workers/WorkerThread.cpp:102:7 (libxul.so+0x575fb71) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #5 mozilla::dom::workerinternals::RuntimeService::ScheduleWorker(mozilla::dom::WorkerPrivate&) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:1323:37 (libxul.so+0x5718ef2) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #6 mozilla::dom::workerinternals::RuntimeService::RegisterWorker(mozilla::dom::WorkerPrivate&) /builds/worker/checkouts/gecko/dom/workers/RuntimeService.cpp:1205:19 (libxul.so+0x57183dd) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #7 mozilla::dom::WorkerPrivate::Constructor(JSContext*, nsTSubstring<char16_t> const&, bool, mozilla::dom::WorkerKind, nsTSubstring<char16_t> const&, nsTSubstring<char> const&, mozilla::dom::WorkerLoadInfo*, mozilla::ErrorResult&, nsTString<char16_t>) /builds/worker/checkouts/gecko/dom/workers/WorkerPrivate.cpp:2588:24 (libxul.so+0x5743062) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #8 mozilla::dom::Worker::Constructor(mozilla::dom::GlobalObject const&, nsTSubstring<char16_t> const&, mozilla::dom::WorkerOptions const&, mozilla::ErrorResult&) /builds/worker/checkouts/gecko/dom/workers/Worker.cpp:43:41 (libxul.so+0x5721f5e) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #9 mozilla::dom::Worker_Binding::_constructor(JSContext*, unsigned int, JS::Value*) /builds/worker/workspace/obj-build/dom/bindings/WorkerBinding.cpp:1107:52 (libxul.so+0x393919d) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #10 CallJSNative /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:459:13 (libxul.so+0x9854ba1) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #11 CallJSNativeConstructor /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:475:8 (libxul.so+0x9854ba1)
    #12 InternalConstruct(JSContext*, js::AnyConstructArgs const&, js::CallReason) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:694:10 (libxul.so+0x9854ba1)
    #13 ConstructFromStack /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:722:10 (libxul.so+0x984937e) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #14 Interpret(JSContext*, js::RunState&) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:3360:16 (libxul.so+0x984937e)
    #15 js::RunScript(JSContext*, js::RunState&) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:431:13 (libxul.so+0x983c694) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #16 js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstruct, js::CallReason) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:579:13 (libxul.so+0x9853565) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #17 InternalCall /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:614:10 (libxul.so+0x985429c) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #18 js::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, js::AnyInvokeArgs const&, JS::MutableHandle<JS::Value>, js::CallReason) /builds/worker/checkouts/gecko/js/src/vm/Interpreter.cpp:646:8 (libxul.so+0x985429c)
    #19 JS::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, JS::HandleValueArray const&, JS::MutableHandle<JS::Value>) /builds/worker/checkouts/gecko/js/src/vm/CallAndConstruct.cpp:117:10 (libxul.so+0x896a3f1) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #20 mozilla::dom::Function::Call(mozilla::dom::BindingCallContext&, JS::Handle<JS::Value>, nsTArray<JS::Value> const&, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&) /builds/worker/workspace/obj-build/dom/bindings/FunctionBinding.cpp:50:8 (libxul.so+0x3bf8e9a) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #21 void mozilla::dom::Function::Call<nsCOMPtr<nsIGlobalObject> >(nsCOMPtr<nsIGlobalObject> const&, nsTArray<JS::Value> const&, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&, char const*, mozilla::dom::CallbackObject::ExceptionHandling, JS::Realm*) /builds/worker/workspace/obj-build/dist/include/mozilla/dom/FunctionBinding.h:71:12 (libxul.so+0x2cb4453) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #22 mozilla::dom::CallbackTimeoutHandler::Call(char const*) /builds/worker/checkouts/gecko/dom/base/TimeoutHandler.cpp:167:29 (libxul.so+0x2cb4239) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #23 nsGlobalWindowInner::RunTimeoutHandler(mozilla::dom::Timeout*, nsIScriptContext*) /builds/worker/checkouts/gecko/dom/base/nsGlobalWindowInner.cpp:6478:38 (libxul.so+0x2a9149e) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #24 mozilla::dom::TimeoutManager::RunTimeout(mozilla::TimeStamp const&, mozilla::TimeStamp const&, bool) /builds/worker/checkouts/gecko/dom/base/TimeoutManager.cpp:903:44 (libxul.so+0x2cb17fe) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #25 mozilla::dom::TimeoutExecutor::MaybeExecute() /builds/worker/checkouts/gecko/dom/base/TimeoutExecutor.cpp:179:11 (libxul.so+0x2cb0bc5) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #26 mozilla::dom::TimeoutExecutor::Run() /builds/worker/checkouts/gecko/dom/base/TimeoutExecutor.cpp:234:5 (libxul.so+0x2cb2903) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #27 mozilla::ThrottledEventQueue::Inner::ExecuteRunnable() /builds/worker/checkouts/gecko/xpcom/threads/ThrottledEventQueue.cpp:254:22 (libxul.so+0x11faf28) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #28 mozilla::ThrottledEventQueue::Inner::Executor::Run() /builds/worker/checkouts/gecko/xpcom/threads/ThrottledEventQueue.cpp:81:15 (libxul.so+0x11f3b6f) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #29 mozilla::RunnableTask::Run() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:538:16 (libxul.so+0x11f82c7) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #30 mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:851:26 (libxul.so+0x11cdff7) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #31 mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:683:15 (libxul.so+0x11cc466) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #32 mozilla::TaskController::ProcessPendingMTTask(bool) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:461:36 (libxul.so+0x11cc744) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #33 operator() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:187:37 (libxul.so+0x11fc0a7) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #34 mozilla::detail::RunnableFunction<mozilla::TaskController::InitializeInternal()::$_0>::Run() /builds/worker/workspace/obj-build/dist/include/nsThreadUtils.h:531:5 (libxul.so+0x11fc0a7)
    #35 nsThread::ProcessNextEvent(bool, bool*) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1205:16 (libxul.so+0x11e26a2) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #36 NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:465:10 (libxul.so+0x11e8d95) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #37 mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:85:21 (libxul.so+0x1e5a8bb) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #38 mozilla::ipc::MessagePumpForChildProcess::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:268:30 (libxul.so+0x1e5b3eb) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #39 RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10 (libxul.so+0x1d787fc) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #40 RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3 (libxul.so+0x1d787fc)
    #41 MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3 (libxul.so+0x1d787fc)
    #42 nsBaseAppShell::Run() /builds/worker/checkouts/gecko/widget/nsBaseAppShell.cpp:150:27 (libxul.so+0x5c6c486) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #43 XRE_RunAppShell() /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:880:20 (libxul.so+0x86c8809) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #44 mozilla::ipc::MessagePumpForChildProcess::Run(base::MessagePump::Delegate*) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:235:9 (libxul.so+0x1e5b39d) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #45 RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:381:10 (libxul.so+0x1d787fc) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #46 RunHandler /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:374:3 (libxul.so+0x1d787fc)
    #47 MessageLoop::Run() /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:356:3 (libxul.so+0x1d787fc)
    #48 XRE_InitChildProcess(int, char**, XREChildData const*) /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:739:34 (libxul.so+0x86c7fac) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #49 mozilla::BootstrapImpl::XRE_InitChildProcess(int, char**, XREChildData const*) /builds/worker/checkouts/gecko/toolkit/xre/Bootstrap.cpp:67:12 (libxul.so+0x86d1572) (BuildId: efbadf4bffd58fa52084bd855b39edbed73a34ee)
    #50 content_process_main /builds/worker/checkouts/gecko/browser/app/../../ipc/contentproc/plugin-container.cpp:57:28 (firefox+0xdffa7) (BuildId: 3981ec272af981d00b777c74226fc6a0d46bd2e5)
    #51 main /builds/worker/checkouts/gecko/browser/app/nsBrowserApp.cpp:359:18 (firefox+0xdffa7)

SUMMARY: ThreadSanitizer: data race /builds/worker/workspace/obj-build/dist/include/mozilla/cxxalloc.h:51:10 in operator delete

```

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1793314#c5)• 2 years ago |
|  | |

The bug is marked as tracked for firefox107 (nightly). We have limited time to fix this, the soft freeze is in 9 days. However, the bug still isn't assigned.

:fgriffith, could you please find an assignee for this tracked bug? If you disagree with the tracking decision, please talk with the release managers.

For more information, please visit [auto\_nag documentation](https://wiki.mozilla.org/Release_Management/autonag#tracked_attention.py).

Flags: needinfo?(fgriffith)

|  | [Jason Kratzer [:jkratzer]](/user_profile?user_id=586683) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a216343_586683)• 2 years ago |

See Also: → [1791023](/show_bug.cgi?id=1791023 "VERIFIED FIXED - Hit MOZ_CRASH(gfxFontFaceBufferSource not thread-safe) at /xpcom/base/nsISupportsImpl.cpp:43")

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1793314#c6)• 2 years ago |
|  | |

(In reply to Andrew McCreight [:mccr8] from [comment #2](/show_bug.cgi?id=1793314#c2 "RESOLVED DUPLICATE - heap-use-after-free in font loading using FontFace from worker thread"))

> Possible regression from [bug 1072107](/show_bug.cgi?id=1072107 "RESOLVED FIXED - support the CSS Font Loading API in workers").

Possibly also related to [bug 1778711](/show_bug.cgi?id=1778711 "RESOLVED FIXED - gfxCharacterMap should use threadsafe refcounting"), which rewrote `gfxCharacterMap::NotifyMaybeReleased` to fix a TSAN failure; and that seems to be the cleanup function that we're in, in all of the backtraces here.

(In reply to Release mgmt bot [:suhaib / :marco/ :calixte] from [comment #5](/show_bug.cgi?id=1793314#c5 "RESOLVED DUPLICATE - heap-use-after-free in font loading using FontFace from worker thread"))

> The bug is marked as tracked for firefox107 (nightly) [...]
>
> :fgriffith, could you please find an assignee for this tracked bug? If you disagree with the tracking decision, please talk with the release managers.

[stealing needinfo]

I suspect aosmond or jfkthame would be the best folks to take a look here, given the bugs linked above. I suspect aosmond has the best picture of how lifetimes are supposed to work here, since it looks like he's author on the bugs that we've identified as likely-related so far, so hopefully he can take a look.

I'm setting ni=jfkthame to be sure it's on his radar as well, in case aosmond can't get to it.

Flags: needinfo?(fgriffith) → needinfo?(jfkthame)

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1793314#c7)• 2 years ago |
|  | |

This is a reminder regarding [comment #5](/show_bug.cgi?id=1793314#c5 "RESOLVED DUPLICATE - heap-use-after-free in font loading using FontFace from worker thread")!

The bug is marked as tracked for firefox107 (nightly). We have limited time to fix this, the soft freeze is in 3 days. However, the bug still isn't assigned.

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1793314#c8)• 2 years ago |
|  | |

This is a reminder regarding [comment #5](/show_bug.cgi?id=1793314#c5 "RESOLVED DUPLICATE - heap-use-after-free in font loading using FontFace from worker thread")!

The bug is marked as tracked for firefox107 (nightly). We have limited time to fix this, the soft freeze is in 2 days. However, the bug still isn't assigned.

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1793314#c9)• 2 years ago |
|  | |

This is a reminder regarding [comment #5](/show_bug.cgi?id=1793314#c5 "RESOLVED DUPLICATE - heap-use-after-free in font loading using FontFace from worker thread")!

The bug is marked as tracked for firefox107 (nightly). We have limited time to fix this, the soft freeze is in a day. However, the bug still isn't assigned.

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a926967_1689)• 2 years ago |

See Also: → [1794528](/show_bug.cgi?id=1794528 "RESOLVED DUPLICATE - AddressSanitizer: heap-use-after-free [@ gfxUserFontEntry::DoLoadNextSrc] with READ of size 4")

|  | [Frank Griffith Jr](/user_profile?user_id=679104) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a942537_679104)• 2 years ago |

Assignee: nobody → jfkthame

|  | [Andrew Osmond [:aosmond] (he/him)](/user_profile?user_id=505306) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1793314#c10)• 2 years ago |
|  | |

I believe this will be fixed by [bug 1793127](/show_bug.cgi?id=1793127 "RESOLVED FIXED - AddressSanitizer: heap-use-after-free [@ Length] with READ of size 8").

Flags: needinfo?(aosmond)

|  | [Andrew Osmond [:aosmond] (he/him)](/user_profile?user_id=505306) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a2027940_505306)• 2 years ago |

Flags: needinfo?(jfkthame)

|  | [Andrew Osmond [:aosmond] (he/him)](/user_profile?user_id=505306) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1793314#c11)• 2 years ago |
|  | |

Upon further review, I am now certain it will be fixed by the patch in [bug 1793127](/show_bug.cgi?id=1793127 "RESOLVED FIXED - AddressSanitizer: heap-use-after-free [@ Length] with READ of size 8").

Status: NEW → RESOLVEDClosed: 2 years agoDuplicate of bug: [1793127](/show_bug.cgi?id=1793127 "RESOLVED FIXED - AddressSanitizer: heap-use-after-free [@ Length] with READ of size 8")Resolution: --- → DUPLICATE

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1793314#c12)• 2 years ago |
|  | |

Thank you for reporting this severe bug. Although it turned out to be a duplicate report, it was filed only a day after the earliest report and therefore qualifies for our split-bounty for collisions. In addition we are adding a bonus for having a reproducible testcase

Flags: sec-bounty? → sec-bounty+

|  | [Donal Meehan [:dmeehan]](/user_profile?user_id=695136) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a2645491_695136)• 2 years ago |

[status-firefox107](/buglist.cgi?f1=cf_status_firefox107&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox107&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox107&o1=equals&v1=fixed)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a3413438_578488)• 2 years ago |

Whiteboard: [adv-main107+]

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1793314#c13)• 2 years ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9302909)
— [Details](attachment.cgi?id=9302909&action=edit)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a3766336_578488)• 2 years ago |

Alias: CVE-2022-45407

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a21956698_1689)• 2 years ago |

Group: layout-core-security

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1793314#a52409623_5898)• 8 months ago |

Keywords: [reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)
You need to [log in](/show_bug.cgi?id=1793314&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Tom Ritter [:tjr]](/user_profile?user_id=578488)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


