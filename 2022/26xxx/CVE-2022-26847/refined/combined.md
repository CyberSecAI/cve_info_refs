=== Content from git.spip.net_1782d14d_20250115_092547.html ===


[Skip to content](#content-body)
GitLab
[![](data:image/gif;base64...)](/ "Homepage")

* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Register](/users/sign_up)

**Commit
3014b845**

authored
Feb 22, 2022
by
**[![marcimat's avatar](https://secure.gravatar.com/avatar/d305ea7fe8db2d2180d08b4d80633654cc8c0d517e426469ae92731c4aef02f3?s=96&d=identicon "marcimat")](/marcimat)
[marcimat](/marcimat)**

[Browse files](/spip/medias/-/tree/3014b845da2dd8ad15ff04b50fd9dbba388a9ca2)

### DÃ©prÃ©cier et sÃ©curiser lâ€™insertion dâ€™une galerie dans le formulaires

```
dâ€™ajout de document. Ce mode nâ€™est plus utilisÃ© dans SPIP depuis SPIP 3.0.

Il faut dÃ©clarer les fichiers autorisÃ©s dans la globale (hum)
medias_deprecated_liste_galeries

(cherry picked from commit [483c11bd](/spip/medias/-/commit/483c11bd45cd22dfff0a94b94523e8a82c3ca4ca "DÃ©prÃ©cier et sÃ©curiser lâ€™insertion dâ€™une galerie dans le formulaires"))
```

parent
[72fb68d1](/spip/medias/-/commit/72fb68d19756532cc4f6d2bb63c2040fb939b7fc)

Loading

Loading

Loading

* [Changes
  2](/spip/medias/-/commit/3014b845da2dd8ad15ff04b50fd9dbba388a9ca2)

[Hide whitespace changes](/spip/medias/-/commit/3014b845da2dd8ad15ff04b50fd9dbba388a9ca2?action=show&controller=projects%2Fcommit&id=3014b845da2dd8ad15ff04b50fd9dbba388a9ca2&namespace_id=spip&project_id=medias&w=1)
[Inline](/spip/medias/-/commit/3014b845da2dd8ad15ff04b50fd9dbba388a9ca2?view=inline)
[Side-by-side](/spip/medias/-/commit/3014b845da2dd8ad15ff04b50fd9dbba388a9ca2?view=parallel)

Loading

Preview

0%
Loading

Try again

or
attach a new file

.

Cancel

You are about to add
**0
people**
to the discussion. Proceed with caution.

Finish editing this message first!

Save comment

Cancel

Please [register](/users/sign_up?redirect_to_referer=yes) or [sign in](/users/sign_in?redirect_to_referer=yes) to comment

Forge communautaire SPIP |Â [Charte d'utilisation](https://www.spip.net/fr_article6431.html) |Â [Signaler un problÃ¨me sur ce site](https://git.spip.net/spip-contrib-outils/gitea_to_gitlab_migration/-/issues)



=== Content from lists.debian.org_e509fed1_20250115_092549.html ===


---

[[Date Prev](msg00059.html)][[Date Next](msg00061.html)]
[[Thread Prev](msg00059.html)][[Thread Next](msg00061.html)]
[[Date Index](maillist.html#00060)]
[[Thread Index](threads.html#00060)]

# [SECURITY] [DSA 5093-1] spip security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 5093-1] spip security update
* *From*: Sebastien Delafond <seb@debian.org>
* *Date*: Tue, 08 Mar 2022 15:40:04 +0000
* *Message-id*: <[[ðŸ”Ž]](/msgid-search/E1nRbwS-00084v-3x%40seger.debian.org)Â [E1nRbwS-00084v-3x@seger.debian.org](msg00060.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-5093-1                   security@debian.org
<https://www.debian.org/security/>                       Sebastien Delafond
March 08, 2022                        <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : spip

It was discovered that SPIP, a website engine for publishing, would
allow a malicious user to execute arbitrary code.

For the oldstable distribution (buster), this problem has been fixed
in version 3.2.4-1+deb10u7.

For the stable distribution (bullseye), this problem has been fixed in
version 3.2.11-3+deb11u3.

We recommend that you upgrade your spip packages.

For the detailed security status of spip please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/spip>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQEzBAEBCgAdFiEEAqSkbVtrXP4xJMh3EL6Jg/PVnWQFAmIneEMACgkQEL6Jg/PV
nWTmtwf/elvZeq4j7byfvYbUCBPgrtv6qJEmuqD6pYAd3F2siK5RH0mn9LRnzsp2
VpFlhbEHtC5YD73ulqaUQk4SRX2AXfmYDxvj3H1xxhK/wCPrE+UajMGYo2/d4Ig+
2SUg1oeVqB3X6S5ePKmTafdTfMDTQmH7gOTW6f80ZhgbAbMz/832rGvjH7arYprW
8v0dokNWq37zo0TH6du+J30jrKGeoMuMHY0ACNr+4BlZLBcXYJPDvZsRv0tzLewK
trP4t/FqSh/Dr2v0+6o/f3Gk7J/f1VOv1plOf2PGh5xz7GRRR6cFPhw12Hvli+hY
A+rjnaDUUklXvQFWW45+T6uokfY8zQ==
=k7Wq
-----END PGP SIGNATURE-----

```

---



=== Content from lists.debian.org_7d645b10_20250115_092548.html ===


---

[[Date Prev](msg00019.html)][[Date Next](msg00021.html)]
[[Thread Prev](msg00019.html)][[Thread Next](msg00021.html)]
[[Date Index](maillist.html#00020)]
[[Thread Index](threads.html#00020)]

# [SECURITY] [DLA 2949-1] spip security update

---

* *To*: <debian-lts-announce@lists.debian.org>
* *Subject*: [SECURITY] [DLA 2949-1] spip security update
* *From*: Emilio Pozuelo Monfort <pochu@debian.org>
* *Date*: Tue, 15 Mar 2022 11:55:21 +0100 (CET)
* *Message-id*: <[[ðŸ”Ž]](/msgid-search/20220315105521.BED3B2A2618%40andromeda)Â [20220315105521.BED3B2A2618@andromeda](msg00020.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- -------------------------------------------------------------------------
Debian LTS Advisory DLA-2949-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>               Emilio Pozuelo Monfort
March 15, 2022                                <https://wiki.debian.org/LTS>
- -------------------------------------------------------------------------

Package        : spip
Version        : 3.1.4-4~deb9u5
CVE ID         : CVE-2022-26846 CVE-2022-26847

It was discovered that SPIP, a website engine for publishing, would
allow a malicious user to execute arbitrary code.

For Debian 9 stretch, these problems have been fixed in version
3.1.4-4~deb9u5.

We recommend that you upgrade your spip packages.

For the detailed security status of spip please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/spip>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEcJymx+vmJZxd92Q+nUbEiOQ2gwIFAmIwcJkACgkQnUbEiOQ2
gwKFHQ/8C4weeXk0iMnCbHJcn3CaJQgmg7UyTB46mHk5PrIsXQf4H1wHHButObfX
zeKKpk/TAehv4A5uBhwR7X4XBv2JlMyzYSSwRthHE7PDfBmHvml+1tBUhA/hOo5W
2eke5OdDxZ2lqSkIvp2XUFNlhv9mN5pDH3/Tev7Bs/1NM0hjsoUH37HP5O06UtO0
sq0IzWJYPZQf/wPBmlMeiJCBTReYuAHk+LxYFPd+aC2paRoJyTRQcmnHXgj5rV5t
/lNIyJ/OcC1/xoDtjyQcyFdD4USIEH1X3iqfOsLajonmZ41c5PyB3bc0nUeLu4QQ
W9P5UB3edHsRXWs+SDuqKHBsV8HMa8LoeeTqQW0ifh9yPFMtRARJc0rhzNW76teG
BEobkCY8W1Hxklft6xXrBayT2BsWFnqEeT/ybH0u3kUvHE2ftBr+ZGysNmogul6z
aLu5KwClkAJ+rFTbTAbH288f4HW27/8xNm1YY8abuGFucHolRjkkxfjf0NxV4wol
Q3AhrbQWSlpjl0GJitOYwRuvGxcYH8Nmrci20ibDu0DdkWZ2JUWSFxxYgk+b6lam
Q2fCNnvDFzplzRvhi/1H4qVt1hKHIn7f42ehxuasSAOKVuNeMeIGeygW2Ic3UShJ
f/DVeHgoRJ/wkxiPj2AUV0FXuUUjw5MgYgFyKJM8/mJWjdNwbmw=
=54XL
-----END PGP SIGNATURE-----

```

---



=== Content from blog.spip.net_f7e3468e_20250115_092546.html ===

**[![](local/cache-vignettes/L96xH96/siteon0-47b07.png?1666949430)SPIP Blog](https://blog.spip.net/ "Accueil")**

Du logiciel libre et de la tendresse

* [Gazette](-Gazette-.html)
* [Release](-Release-.html)
* [DÃ©veloppement](-Developpement-.html)
* [CommunautÃ©](-Communaute-.html)
* [Ailleurs](-Ailleurs-.html)

[Accueil](https://blog.spip.net/) > [Release](-Release-.html) > **Mise Ã  jour critique de sÃ©curitÃ©Â :â€¯ sorties de SPIPÂ 4.0.5 et SPIPÂ 3.2.14**

# Mise Ã  jour critique de sÃ©curitÃ©Â :â€¯ sorties de SPIPÂ 4.0.5 et SPIPÂ 3.2.14

samedi 5 mars 2022, par [La team](_La-team_.html)

Suite au signalement dâ€™une faille critique de sÃ©curitÃ©, nous publions une version 4.0.5 ainsi quâ€™une version 3.2.14.

## SPIPÂ 4.0.5

**Cette version SPIPÂ 4.0.5 corrige**

* **une faille critique** qui permettait une exÃ©cution arbitraire de code PHP (avec un accÃ¨s rÃ©dacteur au site). Merci Ã  g0uZ pour le signalementÂ :)
* **une faille** permettant un accÃ¨s non authentifiÃ© et non autorisÃ© Ã  des informations des objets Ã©ditoriaux. Merci Ã  g0uZ de nouveau.

Lâ€™Ã©cran de sÃ©curitÃ© ne couvre pas ces failles, il est donc indispensable de mettre Ã  jour.

**Autres corrections**

* Ne pas crÃ©er dâ€™erreur fatale en PHP 8 si ini\_set() est dÃ©sactivÃ©.
* Correction dâ€™Ã©chappements (avec SQLite)
* Quelques warnings corrigÃ©s
* MotsÂ : permettre dâ€™afficher les mots du groupe que lâ€™on souhaite dans un formulaire dâ€™association de mots clefs dans lâ€™espace public
* DistÂ : rÃ©tablir lâ€™affichage du message dâ€™erreur quand le lien de changement de mot de passe est invalide

**Changements**

La faille principale exploitait un code non utilisÃ© dans SPIP depuis SPIP 3.0 concernant un mode Galerie sur lâ€™ajout de documents du plugin MÃ©dias. Il Ã©tait encore prÃ©sent pour compatibilitÃ© ascendante. Il est extrÃªmement peu probable que des sites utilisaient encore cette fonctionnalitÃ© depuis SPIP 3.0.

NÃ©anmoins si tel Ã©tait le cas sur votre site (et que câ€™est encore utilisÃ©), il faut maintenant dÃ©clarer absolument le ou les fichiers de galerie autorisÃ©s Ã  SPIP en les indiquant dans la variable globale `medias_deprecated_liste_galeries` qui est un tableau listant ces fichiers.

Nous avons par ailleurs dÃ©prÃ©ciÃ© totalement ce code, qui sera donc supprimÃ© dans une prochaine version, probablement pour SPIP 5.0.

## SPIPÂ 3.2.14

**Cette version SPIPÂ 3.2.14 corrige une faille critique** qui permettait une exÃ©cution arbitraire de code PHP (avec un accÃ¨s rÃ©dacteur au site). Merci Ã  g0uZ pour le signalementÂ :)

**Autres corrections**

* MotsÂ : permettre dâ€™afficher les mots du groupe que lâ€™on souhaite dans un formulaire dâ€™association de mots clefs dans lâ€™espace public
* DistÂ : rÃ©tablir lâ€™affichage du message dâ€™erreur quand le lien de changement de mot de passe est invalide

**Changements**

MÃªme remarque (et adaptations Ã©ventuelles) que pour SPIP 4.0.5.

## Ã€ venir

Nous allons publier trÃ¨s rapidement une version SPIP 4.1.0-rc avec plus de changements que prÃ©vu initialementÂ !

## Mettre Ã  jour en utilisant le spip\_loader

Vous pouvez aussi mettre Ã  jour au moyen de la derniÃ¨re version du spip\_loader (**versionÂ 5.1.0**).

<https://www.spip.net/spip-dev/INSTALL/spip_loader.php>

## RÃ©sumÃ© des versions de SPIP

| Branche | Version | Suivi | CompatibilitÃ© PHP |
| --- | --- | --- | --- |
| SPIPÂ 4.1 | [SPIP 4.1.0-beta](https://files.spip.net/spip/dev/spip-v4.1.0-beta.zip) | Branche test | PHPÂ 7.4 Ã  PHPÂ 8.1 |
| SPIPÂ 4.0 | [SPIP 4.0.5](https://files.spip.net/spip/archives/spip-v4.0.5.zip) | Branche stable | PHPÂ 7.3 Ã  PHPÂ 8.0 |
| SPIPÂ 3.2 | [SPIP 3.2.14](https://files.spip.net/spip/archives/spip-v3.2.14.zip) | Branche stable | PHPÂ 5.4 Ã  PHPÂ 7.4 |

Les versions **SPIP 3.1 et antÃ©rieures** ne sont plus maintenues.

Pour connaÃ®tre le dÃ©tail des versions maintenuesÂ :

<https://www.spip.net/fr_article6500.html>

## Comment Ãªtre tenu au courant de ces annoncesÂ ?

Câ€™est simple, inscrivez-vous sur la mailing liste <https://discuter.spip.net/c/spip-ann/13>

Bien sÃ»r les rÃ©seaux sociaux sont de la partieÂ :

* SeenthisÂ : <https://seenthis.net/people/spip>
* TwitterÂ : <https://twitter.com/spip>
* FacebookÂ : <https://www.facebook.com/spip.net>
* MamotÂ : [https://mamot.fr/@spip](https://mamot.fr/%40spip)
## Une question, besoin dâ€™aideÂ ?

En cas de problÃ¨me ou de difficultÃ©s, il y aura certainement quelquâ€™un pour vous aider sur IRC, Nâ€™hÃ©sitez pas Ã  venir poser vos questions <https://irc.spip.net>

Vous pouvez aussi poster un message et Ã©changer surÂ :

* La liste des utilisateurs et utilisatrices <https://discuter.spip.net/c/spip/6>
* La liste du dÃ©veloppement spip-dev <https://discuter.spip.net/c/spip-dev/5>

Nous vous rappelons que pour signaler une faille, il suffit dâ€™envoyer un mail Ã  spip-team@rezo.net

## Messages

* [5 mars 2022, 12:26, par inaden](#forum6205 "Lien permanent vers le commentaire 6205")

  Bonjour,

  Le lien sur la page <https://www.spip.net/fr_download> ne permet pas de tÃ©lÃ©charger la version 4.0.5 mais la .0.4 contrairement Ã  ce qui est indiquÃ© dans le mail dâ€™alerte pour la faille de sÃ©curitÃ©.

  Nâ€™utilisant pas SPIP\_loader, merci dâ€™avance pour cette correction pour ajouter dans cette page un lien vers la version 5.

  Vous souhaitant malgrÃ© tout un agrÃ©able week-end.

  Cordialement,

  Denis
* [5 mars 2022, 13:33, par Marcimat](#forum6206 "Lien permanent vers le commentaire 6206")

  Merci @inaden,

  Câ€™Ã©tait en fait juste un petit problÃ¨me de cache de la page fr\_download. Câ€™est corrigÃ©.

  Merci.
* [6 mars 2022, 08:31, par inaden](#forum6207 "Lien permanent vers le commentaire 6207")

  Merci.

  Bon dimanche.
* [7 mars 2022, 15:33, par jfd](#forum6208 "Lien permanent vers le commentaire 6208")

  Bonjour,

  jâ€™ai rÃ©cupÃ©rÃ© la 3.2.14 pour remplacer une 3.2.11 en mode bourrin (on Ã©crase tout sauf img et connect)

  Contrairement Ã  dâ€™habitude, le NÂ°Â de version dans le privÃ©, est restÃ© en 3.2.11

  MÃªme aprÃ¨s avoir tuÃ© le local, le TMP et effacÃ© le cache.

  Câ€™est grave docteurÂ ?

  Clt
* [7 mars 2022, 18:19, par jfd](#forum6209 "Lien permanent vers le commentaire 6209")

  je me rÃ©pond Ã  moi-mÃªmeÂ :

  Je mettais Ã  jour un autre site, vraiment bourrin Ã  tous les niveaux...

  **â€“**Â Â :)

  dÃ©solÃ© pour le bruit inutile

  Clt
* [14 mars 2022, 12:28, par Anthony](#forum6211 "Lien permanent vers le commentaire 6211")

  Bonjour,

  Je viens de migrer de spip 3.2.12 (version 3.2.14 dispo) vers **Spip 4.0.5** avec

  **HTML5 UP Landed 1.2.2**.
  Changeant dâ€™hÃ©bergeur je suis parti sur une installation fraÃ®che.
  Tout semble bon pour le moment dans mon cas en mode **compatibilitÃ© forcÃ©e**.

  **\_ Passage Ã  spip 4.0.5**

  Pour migrer jâ€™ai faitÂ :

  **â€“**Â un dump sql via phpmyadmin (export sql de ma bd spip 3.2.12 puis import via phpmyadmin dans ma nouvelle base.

  **â€“**Â modifiÃ© le prÃ©fixe de table dans **config/connect.php** par celui de mes anciennes tables

  **â€“**Â retournÃ© sur **monsitespip/ecrire**

  **â€“**Â validÃ© la mise Ã  jour de la base de donnÃ©e proposÃ©e dans lâ€™espace privÃ©

  **\_ Intallation de HTML5 UP Landed 1.2.2**

  Jâ€™ai modifiÃ© le fichier **config/mes\_options.php** en ajoutant une ligne

  ```
  // compatibilitÃ© forcÃ©e pour plugin spip 3.2
  define('_DEV_VERSION_SPIP_COMPAT',"3.2.99");
  ```

  puis installÃ© HTML5 UP Landed 1.2.2 via lâ€™url

  <https://files.spip.org/spip-zone/spip-contrib-squelettes/html5up_landed-3b58e-v1.2.2.zip>

  Jâ€™ai installÃ© le plugin Saisies pour formulaires 4.3.2 (â‰¥ 3.23.2 nÃ©cessaire pour html5\_landed) compatible spip 4.0 via lâ€™urlÂ :

  [https://files.spip.org/spip-zone/sp...](https://files.spip.org/spip-zone/spip-contrib-extensions/saisies-222af-v4.3.2.zip)

  Et câ€™est tout bon.

  Cordialement, Anthony.
## Un message, un commentaireÂ ?

Qui Ãªtes-vousÂ ?
Veuillez laisser ce champ videÂ :

Votre nom

[Se connecter](spip.php?page=login&url=Mise-a-jour-critique-de-securite-sorties-de-SPIP-4-0-5-et-SPIP-3-2-14.html%3Flang%3Dfr)

Votre adresse email

Votre message

Texte de votre message (obligatoire)

Ce formulaire accepte les raccourcisÂ SPIP `[->url] {{gras}} {italique} <quote> <code>` et le codeÂ HTML `<q> <del> <ins>`. Pour crÃ©er des paragraphes, laissez simplement des lignes vides.

Veuillez laisser ce champ videÂ :

RechercherÂ :

## Dans la mÃªme rubrique

* [Mise Ã  jour de maintenanceÂ : sortie de SPIP 4.3.5](Mise-a-jour-de-maintenance-sortie-de-SPIP-4-3-5.html)
* [Mise Ã  jour de maintenanceÂ : sortie de SPIP 4.3.4](Mise-a-jour-de-maintenance-sortie-de-SPIP-4-3-4.html)
* [Mise Ã  jour de maintenanceÂ : sortie de SPIP 4.3.3](Mise-a-jour-de-maintenance-sortie-de-SPIP-4-3-3.html)
* [Mise Ã  jour critique de sÃ©curitÃ©Â : sortie de SPIPÂ 4.3.2, SPIPÂ 4.2.16, SPIPÂ 4.1.18](Mise-a-jour-critique-de-securite-sortie-de-SPIP-4-3-2-SPIP-4-2-16-SPIP-4-1-18.html)
* [Mise Ã  jour de maintenanceÂ : sortie de SPIP 4.3.1](Mise-a-jour-de-maintenance-sortie-de-SPIP-4-3-1.html)
* [Sortie de SPIPÂ 4.3.0](Sortie-de-SPIP-4-3-0.html)
* [Mise Ã  jour de maintenance et sÃ©curitÃ©Â : â€¯sortie de SPIPÂ 4.2.15](Mise-a-jour-de-maintenance-et-securite-sortie-de-SPIP-4-2-15.html)
* [Sortie de SPIPÂ 4.3.0-beta](Sortie-de-SPIP-4-3-0-beta.html)
* [Mise Ã  jour de maintenanceÂ : sortie de SPIPÂ 4.2.14, SPIPÂ 4.1.17](Mise-a-jour-de-maintenance-sortie-de-SPIP-4-2-14-SPIP-4-1-17.html)
* [Mise Ã  jour critique de sÃ©curitÃ©Â : sortie de SPIPÂ 4.3.0-alpha2, SPIPÂ 4.2.13, SPIPÂ 4.1.16](Mise-a-jour-critique-de-securite-sortie-de-SPIP-4-3-0-alpha2-SPIP-4-2-13-SPIP-4.html)

2005 - 2025 SPIP Blog

[![SPIP](spip.png)](https://www.spip.net/ "Site rÃ©alisÃ© avec SPIP")


