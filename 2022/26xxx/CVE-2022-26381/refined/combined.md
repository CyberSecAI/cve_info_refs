=== Content from www.mozilla.org_dff76c19_20250114_200807.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2022-11

## Security Vulnerabilities fixed in Firefox ESR 91.7

Announced
March 8, 2022
Impact
high
Products
Firefox ESR
Fixed in

* Firefox ESR 91.7

#### [#CVE-2022-26383: Browser window spoof using fullscreen mode](#CVE-2022-26383)

Reporter
Irvan Kurniawan
Impact
high
##### Description

When resizing a popup after requesting fullscreen access, the popup would not display the fullscreen notification.

##### References

* [Bug 1742421](https://bugzilla.mozilla.org/show_bug.cgi?id=1742421)

#### [#CVE-2022-26384: iframe allow-scripts sandbox bypass](#CVE-2022-26384)

Reporter
Ed McManus
Impact
high
##### Description

If an attacker could control the contents of an iframe sandboxed with `allow-popups` but not `allow-scripts`, they were able to craft a link that, when clicked, would lead to JavaScript execution in violation of the sandbox.

##### References

* [Bug 1744352](https://bugzilla.mozilla.org/show_bug.cgi?id=1744352)

#### [#CVE-2022-26387: Time-of-check time-of-use bug when verifying add-on signatures](#CVE-2022-26387)

Reporter
Armin Ebert
Impact
high
##### Description

When installing an add-on, Firefox verified the signature before prompting the user; but while the user was confirming the prompt, the underlying add-on file could have been modified and Firefox would not have noticed.

##### References

* [Bug 1752979](https://bugzilla.mozilla.org/show_bug.cgi?id=1752979)

#### [#CVE-2022-26381: Use-after-free in text reflows](#CVE-2022-26381)

Reporter
Mozilla Fuzzing Team and Hossein Lotfi of Trend Micro Zero Day Initiative
Impact
high
##### Description

An attacker could have caused a use-after-free by forcing a text reflow in an SVG object leading to a potentially exploitable crash.

##### References

* [Bug 1736243](https://bugzilla.mozilla.org/show_bug.cgi?id=1736243)

#### [#CVE-2022-26386: Temporary files downloaded to /tmp and accessible by other local users](#CVE-2022-26386)

Reporter
attila
Impact
low
##### Description

Previously Firefox for macOS and Linux would download temporary files to a user-specific directory in `/tmp`, but this behavior was changed to download them to `/tmp` where they could be affected by other local users. This behavior was reverted to the original, user-specific directory.
*This bug only affects Firefox for macOS and Linux. Other operating systems are unaffected.*

##### References

* [Bug 1752396](https://bugzilla.mozilla.org/show_bug.cgi?id=1752396)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from www.mozilla.org_32b21c23_20250114_200809.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2022-12

## Security Vulnerabilities fixed in Thunderbird 91.7

Announced
March 8, 2022
Impact
high
Products
Thunderbird
Fixed in

* Thunderbird 91.7

*In general, these flaws cannot be exploited through email in the Thunderbird product because scripting is disabled when reading mail, but are potentially risks in browser or browser-like contexts.*

#### [#CVE-2022-26383: Browser window spoof using fullscreen mode](#CVE-2022-26383)

Reporter
Irvan Kurniawan
Impact
high
##### Description

When resizing a popup after requesting fullscreen access, the popup would not display the fullscreen notification.

##### References

* [Bug 1742421](https://bugzilla.mozilla.org/show_bug.cgi?id=1742421)

#### [#CVE-2022-26384: iframe allow-scripts sandbox bypass](#CVE-2022-26384)

Reporter
Ed McManus
Impact
high
##### Description

If an attacker could control the contents of an iframe sandboxed with `allow-popups` but not `allow-scripts`, they were able to craft a link that, when clicked, would lead to JavaScript execution in violation of the sandbox.

##### References

* [Bug 1744352](https://bugzilla.mozilla.org/show_bug.cgi?id=1744352)

#### [#CVE-2022-26387: Time-of-check time-of-use bug when verifying add-on signatures](#CVE-2022-26387)

Reporter
Armin Ebert
Impact
high
##### Description

When installing an add-on, Thunderbird verified the signature before prompting the user; but while the user was confirming the prompt, the underlying add-on file could have been modified and Thunderbird would not have noticed.

##### References

* [Bug 1752979](https://bugzilla.mozilla.org/show_bug.cgi?id=1752979)

#### [#CVE-2022-26381: Use-after-free in text reflows](#CVE-2022-26381)

Reporter
Mozilla Fuzzing Team and Hossein Lotfi of Trend Micro Zero Day Initiative
Impact
high
##### Description

An attacker could have caused a use-after-free by forcing a text reflow in an SVG object leading to a potentially exploitable crash.

##### References

* [Bug 1736243](https://bugzilla.mozilla.org/show_bug.cgi?id=1736243)

#### [#CVE-2022-26386: Temporary files downloaded to /tmp and accessible by other local users](#CVE-2022-26386)

Reporter
attila
Impact
low
##### Description

Previously Thunderbird for macOS and Linux would download temporary files to a user-specific directory in `/tmp`, but this behavior was changed to download them to `/tmp` where they could be affected by other local users. This behavior was reverted to the original, user-specific directory.
*This bug only affects Thunderbird for macOS and Linux. Other operating systems are unaffected.*

##### References

* [Bug 1752396](https://bugzilla.mozilla.org/show_bug.cgi?id=1752396)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from www.mozilla.org_1c2f4f59_20250114_200806.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2022-10

## Security Vulnerabilities fixed in Firefox 98

Announced
March 8, 2022
Impact
high
Products
Firefox
Fixed in

* Firefox 98

#### [#CVE-2022-26383: Browser window spoof using fullscreen mode](#CVE-2022-26383)

Reporter
Irvan Kurniawan
Impact
high
##### Description

When resizing a popup after requesting fullscreen access, the popup would not display the fullscreen notification.

##### References

* [Bug 1742421](https://bugzilla.mozilla.org/show_bug.cgi?id=1742421)

#### [#CVE-2022-26384: iframe allow-scripts sandbox bypass](#CVE-2022-26384)

Reporter
Ed McManus
Impact
high
##### Description

If an attacker could control the contents of an iframe sandboxed with `allow-popups` but not `allow-scripts`, they were able to craft a link that, when clicked, would lead to JavaScript execution in violation of the sandbox.

##### References

* [Bug 1744352](https://bugzilla.mozilla.org/show_bug.cgi?id=1744352)

#### [#CVE-2022-26387: Time-of-check time-of-use bug when verifying add-on signatures](#CVE-2022-26387)

Reporter
Armin Ebert
Impact
high
##### Description

When installing an add-on, Firefox verified the signature before prompting the user; but while the user was confirming the prompt, the underlying add-on file could have been modified and Firefox would not have noticed.

##### References

* [Bug 1752979](https://bugzilla.mozilla.org/show_bug.cgi?id=1752979)

#### [#CVE-2022-26381: Use-after-free in text reflows](#CVE-2022-26381)

Reporter
Mozilla Fuzzing Team and Hossein Lotfi of Trend Micro Zero Day Initiative
Impact
high
##### Description

An attacker could have caused a use-after-free by forcing a text reflow in an SVG object leading to a potentially exploitable crash.

##### References

* [Bug 1736243](https://bugzilla.mozilla.org/show_bug.cgi?id=1736243)

#### [#CVE-2022-26382: Autofill Text could be exfiltrated via side-channel attacks](#CVE-2022-26382)

Reporter
Young Min Kim
Impact
moderate
##### Description

While the text displayed in Autofill tooltips cannot be directly read by JavaScript, the text was rendered using page fonts. Side-channel attacks on the text by using specially crafted fonts could have lead to this text being inferred by the webpage.

##### References

* [Bug 1741888](https://bugzilla.mozilla.org/show_bug.cgi?id=1741888)

#### [#CVE-2022-26385: Use-after-free in thread shutdown](#CVE-2022-26385)

Reporter
bo13oy of Cyber Kunlun Lab
Impact
moderate
##### Description

In unusual circumstances, an individual thread may outlive the thread's manager during shutdown. This could have led to a use-after-free causing a potentially exploitable crash.

##### References

* [Bug 1747526](https://bugzilla.mozilla.org/show_bug.cgi?id=1747526)

#### [#CVE-2022-0843: Memory safety bugs fixed in Firefox 98](#CVE-2022-0843)

Reporter
Mozilla developers
Impact
moderate
##### Description

Mozilla developers Kershaw Chang, Ryan VanderMeulen, and Randell Jesup reported memory safety bugs present in Firefox 97. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 98](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1746523%2C1749062%2C1749164%2C1749214%2C1749610%2C1750032%2C1752100%2C1752405%2C1753612%2C1754508)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_63f33c0a_20250114_200806.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1736243)
* [XML](/show_bug.cgi?ctype=xml&id=1736243)

Closed
[Bug 1736243](/show_bug.cgi?id=1736243)
(CVE-2022-26381)

Opened 3 years ago
Closed 3 years ago

# heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]

## Categories

### (Core :: SVG, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=SVG#SVG)

SVG
▾

Core :: SVG

Issues with the layout or rendering of SVG content and interacting with the SVG DOM.

Example bugs:

* SVG marker can not be clipped with clip-path
* x position adjustments of SVG vertical text on a path moves in the wrong direction

Specifications covered:

* SVG

[See Open Bugs in This Component](/buglist.cgi?product=Core&component=SVG&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=SVG&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=SVG)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

S2

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

99 Branch

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| a11y-review | --- |
| --- | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr91 | [98+](/buglist.cgi?f1=cf_tracking_firefox_esr91&o1=equals&v1=98%2B) | [verified](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=verified) |
| firefox95 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox95&o1=equals&v1=wontfix) |
| firefox97 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox97&o1=equals&v1=wontfix) |
| firefox98 | [+](/buglist.cgi?f1=cf_tracking_firefox98&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox98&o1=equals&v1=verified) |
| firefox99 | [+](/buglist.cgi?f1=cf_tracking_firefox99&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox99&o1=equals&v1=verified) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr91 | 98+ | verified |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox95 |  | wontfix |
| firefox97 |  | wontfix |
| firefox98 | + | verified |
| firefox99 | + | verified |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: tsmith, Assigned: emilio)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/1d91d22a4892f16f744b31fd4286144e?d=mm&size=40)  [emilio](/user_profile?user_id=546716)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/a2837b951fa7dc639a2568203478ff0a?d=mm&size=40)  [tsmith](/user_profile?user_id=486634)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](extensions/Gravatar/web/default.jpg)  [jwatt](/user_profile?user_id=32767)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

16 people

## References

### (Blocks 1 open bug)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[grizzly](/show_bug.cgi?id=1289609 "NEW - [meta] Bugs found while Fuzzing with Grizzly"), [1415551](/show_bug.cgi?id=1415551 "RESOLVED WORKSFORME - AddressSanitizer: heap-use-after-free [@ OnNonDOMMutationRenderingChange] [@ mozilla::SVGRenderingObserverSet::InvalidateAll] with WRITE of size 1")

Dependency [tree](/showdependencytree.cgi?id=1736243&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1736243)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[1756793](/show_bug.cgi?id=1756793 "RESOLVED DUPLICATE - ZDI-CAN-16716: Mozilla Firefox textPath Element Use-After-Free Remote Code Execution Vulnerability"), [1757715](/show_bug.cgi?id=1757715 "RESOLVED DUPLICATE - AddressSanitizer: heap-use-after-free [@ OnNonDOMMutationRenderingChange] with WRITE of size 1 through SVG")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1415551](/show_bug.cgi?id=1415551 "RESOLVED WORKSFORME - AddressSanitizer: heap-use-after-free [@ OnNonDOMMutationRenderingChange] [@ mozilla::SVGRenderingObserverSet::InvalidateAll] with WRITE of size 1")

## Details

### (4 keywords, Whiteboard: [adv-main98+r][sec-survey][adv-esr91.7+r])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2022-26381

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main98+r][sec-survey][adv-esr91.7+r]

QA Whiteboard:

[post-critsmash-triage] [qa-triaged]

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [tsmith](/user_profile?user_id=486634) | [in-testsuite](#c0 "3 years ago") | ? |
| --- | --- | --- |
| [tsmith](/user_profile?user_id=486634) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ mozilla::SVGRenderingObserverSet::InvalidateAll ]](https://crash-stats.mozilla.org/signature/?signature=mozilla%3A%3ASVGRenderingObserverSet%3A%3AInvalidateAll)

[[@ nsIFrame::SetParent ]](https://crash-stats.mozilla.org/signature/?signature=nsIFrame%3A%3ASetParent)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (5 files, 1 obsolete file)

| [testcase.html](/attachment.cgi?id=9246332)  [3 years ago](#c0)  [Tyson Smith [:tsmith]](/user_profile?user_id=486634)   256 bytes, text/html |  | [Details](/attachment.cgi?id=9246332&action=edit) |
| --- | --- | --- |
| [backtrace of fatal assertion failure](/attachment.cgi?id=9251427)  [3 years ago](#c8)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   10.23 KB, text/plain |  | [Details](/attachment.cgi?id=9251427&action=edit) |
| [backtrace of non-fatal assertion failure (from pernosco trace)](/attachment.cgi?id=9258985)  [3 years ago](#c15)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   20.51 KB, text/plain |  | [Details](/attachment.cgi?id=9258985&action=edit) |
| [strawman patch (avoids the crash, though it still triggers an assertion and maybe causes other problems [?])](/attachment.cgi?id=9259022)  [3 years ago](#c19)  [Daniel Holbert [:dholbert]](/user_profile?user_id=278074)   1.87 KB, patch |  | [Details](/attachment.cgi?id=9259022&action=edit) | [Diff](/attachment.cgi?id=9259022&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1736243&attachment=9259022) |
| [Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame](/attachment.cgi?id=9265271)  [3 years ago](#c24)  [Emilio Cobos Álvarez (:emilio)](/user_profile?user_id=546716)   48 bytes, text/x-phabricator-request | pascalc : [approval-mozilla-beta+](#a11378973_24572 "3 years ago")  pascalc : [approval-mozilla-esr91+](#c36 "3 years ago")  tjr : [sec-approval+](#c28 "3 years ago") | [Details](/attachment.cgi?id=9265271&action=edit) | [Review](/attachment.cgi?id=9265271) |
| [advisory.txt](/attachment.cgi?id=9266128)  [3 years ago](#c40)  [Tom Ritter [:tjr]](/user_profile?user_id=578488)   241 bytes, text/plain |  | [Details](/attachment.cgi?id=9266128&action=edit) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Tyson Smith [:tsmith]](/user_profile?user_id=486634)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1736243#c0)• 3 years ago |
|  | |

Attached file
[testcase.html](attachment.cgi?id=9246332)
— [Details](attachment.cgi?id=9246332&action=edit)

Found while fuzzing m-c 20211017-650d84a601ba (--enable-address-sanitizer --enable-fuzzing)

This might be a duplicate of [bug 1415551](/show_bug.cgi?id=1415551 "RESOLVED WORKSFORME - AddressSanitizer: heap-use-after-free [@ OnNonDOMMutationRenderingChange] [@ mozilla::SVGRenderingObserverSet::InvalidateAll] with WRITE of size 1"). The test case appears to only reproduce the issue on Windows and it is fairly reliable.

```
==9852==ERROR: AddressSanitizer: heap-use-after-free on address 0x11e0b8ee8f08 at pc 0x7ffa37b57ec1 bp 0x007b693f2b40 sp 0x007b693f2b88
WRITE of size 1 at 0x11e0b8ee8f08 thread T0
    #0 0x7ffa37b57ec0 in mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange /builds/worker/checkouts/gecko/layout/svg/SVGObserverUtils.cpp:246
    #1 0x7ffa37b57ec0 in mozilla::SVGRenderingObserverSet::InvalidateAll(void) /builds/worker/checkouts/gecko/layout/svg/SVGObserverUtils.cpp:1065
    #2 0x7ffa37b5271c in mozilla::SVGTextFrame::ReflowSVGNonDisplayText(void) /builds/worker/checkouts/gecko/layout/svg/SVGTextFrame.cpp:2844
    #3 0x7ffa37b05ae0 in mozilla::SVGContainerFrame::ReflowSVGNonDisplayText(class nsIFrame *) /builds/worker/checkouts/gecko/layout/svg/SVGContainerFrame.cpp:114
    #4 0x7ffa37b05b70 in mozilla::SVGContainerFrame::ReflowSVGNonDisplayText(class nsIFrame *) /builds/worker/checkouts/gecko/layout/svg/SVGContainerFrame.cpp:119
    #5 0x7ffa37b638e7 in mozilla::SVGOuterSVGFrame::Reflow(class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, class nsReflowStatus &) /builds/worker/checkouts/gecko/layout/svg/SVGOuterSVGFrame.cpp:456
    #6 0x7ffa378e055a in nsLineLayout::ReflowFrame(class nsIFrame *, class nsReflowStatus &, class mozilla::ReflowOutput *, bool &) /builds/worker/checkouts/gecko/layout/generic/nsLineLayout.cpp:875
    #7 0x7ffa37639487 in nsBlockFrame::ReflowInlineFrame(class mozilla::BlockReflowInput &, class nsLineLayout &, class nsLineList_iterator, class nsIFrame *, enum LineReflowStatus *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:4565
    #8 0x7ffa37637d42 in nsBlockFrame::DoReflowInlineFrames(class mozilla::BlockReflowInput &, class nsLineLayout &, class nsLineList_iterator, struct nsFlowAreaRect &, int &, struct nsFloatManager::SavedState *, bool *, enum LineReflowStatus *, bool) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:4367
    #9 0x7ffa376301ff in nsBlockFrame::ReflowInlineFrames(class mozilla::BlockReflowInput &, class nsLineList_iterator, bool *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:4252
    #10 0x7ffa37628509 in nsBlockFrame::ReflowLine(class mozilla::BlockReflowInput &, class nsLineList_iterator, bool *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:3229
    #11 0x7ffa3761b904 in nsBlockFrame::ReflowDirtyLines(class mozilla::BlockReflowInput &) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:2763
    #12 0x7ffa37611a8d in nsBlockFrame::Reflow(class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, class nsReflowStatus &) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:1394
    #13 0x7ffa37635988 in nsBlockReflowContext::ReflowBlock(class mozilla::LogicalRect const &, bool, struct nsCollapsingMargin &, int, bool, class nsLineBox *, struct mozilla::ReflowInput &, class nsReflowStatus &, class mozilla::BlockReflowInput &) /builds/worker/checkouts/gecko/layout/generic/nsBlockReflowContext.cpp:288
    #14 0x7ffa3762b68d in nsBlockFrame::ReflowBlockFrame(class mozilla::BlockReflowInput &, class nsLineList_iterator, bool *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:3886
    #15 0x7ffa376286b9 in nsBlockFrame::ReflowLine(class mozilla::BlockReflowInput &, class nsLineList_iterator, bool *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:3226
    #16 0x7ffa3761b904 in nsBlockFrame::ReflowDirtyLines(class mozilla::BlockReflowInput &) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:2763
    #17 0x7ffa37611a8d in nsBlockFrame::Reflow(class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, class nsReflowStatus &) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:1394
    #18 0x7ffa37661cac in nsContainerFrame::ReflowChild(class nsIFrame *, class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, class mozilla::WritingMode const &, class mozilla::LogicalPoint const &, struct nsSize const &, enum nsIFrame::ReflowChildFlags, class nsReflowStatus &, class nsOverflowContinuationTracker *) /builds/worker/checkouts/gecko/layout/generic/nsContainerFrame.cpp:1004
    #19 0x7ffa3765f639 in nsCanvasFrame::Reflow(class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, class nsReflowStatus &) /builds/worker/checkouts/gecko/layout/generic/nsCanvasFrame.cpp:787
    #20 0x7ffa37661cac in nsContainerFrame::ReflowChild(class nsIFrame *, class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, class mozilla::WritingMode const &, class mozilla::LogicalPoint const &, struct nsSize const &, enum nsIFrame::ReflowChildFlags, class nsReflowStatus &, class nsOverflowContinuationTracker *) /builds/worker/checkouts/gecko/layout/generic/nsContainerFrame.cpp:1004
    #21 0x7ffa3771fb72 in nsHTMLScrollFrame::ReflowScrolledFrame(struct mozilla::ScrollReflowInput *, bool, bool, class mozilla::ReflowOutput *) /builds/worker/checkouts/gecko/layout/generic/nsGfxScrollFrame.cpp:763
    #22 0x7ffa3772239a in nsHTMLScrollFrame::ReflowContents(struct mozilla::ScrollReflowInput *, class mozilla::ReflowOutput const &) /builds/worker/checkouts/gecko/layout/generic/nsGfxScrollFrame.cpp:884
    #23 0x7ffa3772f399 in nsHTMLScrollFrame::Reflow(class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, class nsReflowStatus &) /builds/worker/checkouts/gecko/layout/generic/nsGfxScrollFrame.cpp:1305
    #24 0x7ffa375f9b4e in nsContainerFrame::ReflowChild(class nsIFrame *, class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, int, int, enum nsIFrame::ReflowChildFlags, class nsReflowStatus &, class nsOverflowContinuationTracker *) /builds/worker/checkouts/gecko/layout/generic/nsContainerFrame.cpp:1044
    #25 0x7ffa375f898a in mozilla::ViewportFrame::Reflow(class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, class nsReflowStatus &) /builds/worker/checkouts/gecko/layout/generic/ViewportFrame.cpp:374
    #26 0x7ffa373a70aa in mozilla::PresShell::DoReflow(class nsIFrame *, bool, class mozilla::OverflowChangedTracker *) /builds/worker/checkouts/gecko/layout/base/PresShell.cpp:9598
    #27 0x7ffa373c0cb2 in mozilla::PresShell::ProcessReflowCommands(bool) /builds/worker/checkouts/gecko/layout/base/PresShell.cpp:9769
    #28 0x7ffa373be9c4 in mozilla::PresShell::DoFlushPendingNotifications(struct mozilla::ChangesToFlush) /builds/worker/checkouts/gecko/layout/base/PresShell.cpp:4259
    #29 0x7ffa3732354e in mozilla::PresShell::FlushPendingNotifications /builds/worker/workspace/obj-build/dist/include/mozilla/PresShell.h:1436
    #30 0x7ffa3732354e in nsRefreshDriver::Tick(struct mozilla::layers::BaseTransactionId<class mozilla::VsyncIdType>, class mozilla::TimeStamp, enum nsRefreshDriver::IsExtraTick) /builds/worker/checkouts/gecko/layout/base/nsRefreshDriver.cpp:2398
    #31 0x7ffa3733a173 in mozilla::RefreshDriverTimer::TickDriver /builds/worker/checkouts/gecko/layout/base/nsRefreshDriver.cpp:354
    #32 0x7ffa3733a173 in mozilla::RefreshDriverTimer::TickRefreshDrivers(struct mozilla::layers::BaseTransactionId<class mozilla::VsyncIdType>, class mozilla::TimeStamp, class nsTArray<class RefPtr<class nsRefreshDriver>> &) /builds/worker/checkouts/gecko/layout/base/nsRefreshDriver.cpp:331
    #33 0x7ffa37339d6a in mozilla::RefreshDriverTimer::Tick(struct mozilla::layers::BaseTransactionId<class mozilla::VsyncIdType>, class mozilla::TimeStamp) /builds/worker/checkouts/gecko/layout/base/nsRefreshDriver.cpp:347
    #34 0x7ffa37339883 in mozilla::VsyncRefreshDriverTimer::RunRefreshDrivers(struct mozilla::layers::BaseTransactionId<class mozilla::VsyncIdType>, class mozilla::TimeStamp) /builds/worker/checkouts/gecko/layout/base/nsRefreshDriver.cpp:782
    #35 0x7ffa37338b13 in mozilla::VsyncRefreshDriverTimer::RefreshDriverVsyncObserver::TickRefreshDriver(struct mozilla::layers::BaseTransactionId<class mozilla::VsyncIdType>, class mozilla::TimeStamp) /builds/worker/checkouts/gecko/layout/base/nsRefreshDriver.cpp:705
    #36 0x7ffa37337958 in mozilla::VsyncRefreshDriverTimer::RefreshDriverVsyncObserver::NotifyParentProcessVsync(void) /builds/worker/checkouts/gecko/layout/base/nsRefreshDriver.cpp:622
    #37 0x7ffa37336f1e in mozilla::VsyncRefreshDriverTimer::RefreshDriverVsyncObserver::NotifyVsync(struct mozilla::VsyncEvent const &) /builds/worker/checkouts/gecko/layout/base/nsRefreshDriver.cpp:543
    #38 0x7ffa35fe73d9 in mozilla::dom::VsyncChild::RecvNotify(struct mozilla::VsyncEvent const &, float const &) /builds/worker/checkouts/gecko/dom/ipc/VsyncChild.cpp:68
    #39 0x7ffa2f4d65b4 in mozilla::dom::PVsyncChild::OnMessageReceived(class IPC::Message const &) /builds/worker/workspace/obj-build/ipc/ipdl/PVsyncChild.cpp:178
    #40 0x7ffa2f25ebff in mozilla::ipc::PBackgroundChild::OnMessageReceived(class IPC::Message const &) /builds/worker/workspace/obj-build/ipc/ipdl/PBackgroundChild.cpp:6207
    #41 0x7ffa2ee1a514 in mozilla::ipc::MessageChannel::DispatchAsyncMessage(class mozilla::ipc::ActorLifecycleProxy *, class IPC::Message const &) /builds/worker/checkouts/gecko/ipc/glue/MessageChannel.cpp:2043
    #42 0x7ffa2ee1683f in mozilla::ipc::MessageChannel::DispatchMessage(class IPC::Message &&) /builds/worker/checkouts/gecko/ipc/glue/MessageChannel.cpp:1968
    #43 0x7ffa2ee186bc in mozilla::ipc::MessageChannel::RunMessage(class mozilla::ipc::MessageChannel::MessageTask &) /builds/worker/checkouts/gecko/ipc/glue/MessageChannel.cpp:1827
    #44 0x7ffa2ee18c68 in mozilla::ipc::MessageChannel::MessageTask::Run(void) /builds/worker/checkouts/gecko/ipc/glue/MessageChannel.cpp:1855
    #45 0x7ffa2da116ed in mozilla::RunnableTask::Run(void) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:467
    #46 0x7ffa2d9c7a23 in mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(class mozilla::detail::BaseAutoLock<class mozilla::Mutex &> const &) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:770
    #47 0x7ffa2d9c3e8c in mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(class mozilla::detail::BaseAutoLock<class mozilla::Mutex &> const &) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:606
    #48 0x7ffa2d9c484e in mozilla::TaskController::ProcessPendingMTTask(bool) /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:390
    #49 0x7ffa2da1b741 in mozilla::TaskController::InitializeInternal::<unnamed-tag>::operator() /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:123
    #50 0x7ffa2da1b741 in mozilla::detail::RunnableFunction<`lambda at /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:123:7'>::Run /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.h:531
    #51 0x7ffa2d9f1995 in nsThread::ProcessNextEvent(bool, bool *) /builds/worker/checkouts/gecko/xpcom/threads/nsThread.cpp:1151
    #52 0x7ffa2da02c2c in NS_ProcessNextEvent(class nsIThread *, bool) /builds/worker/checkouts/gecko/xpcom/threads/nsThreadUtils.cpp:467
    #53 0x7ffa2ee239ae in mozilla::ipc::MessagePump::Run(class base::MessagePump::Delegate *) /builds/worker/checkouts/gecko/ipc/glue/MessagePump.cpp:85
    #54 0x7ffa2ed2f415 in MessageLoop::RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:331
    #55 0x7ffa2ed2f415 in MessageLoop::RunHandler(void) /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:324
    #56 0x7ffa2ed2f1e5 in MessageLoop::Run(void) /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:306
    #57 0x7ffa36b1f78a in nsBaseAppShell::Run(void) /builds/worker/checkouts/gecko/widget/nsBaseAppShell.cpp:137
    #58 0x7ffa36d1e08b in nsAppShell::Run(void) /builds/worker/checkouts/gecko/widget/windows/nsAppShell.cpp:603
    #59 0x7ffa3b02d9b4 in XRE_RunAppShell(void) /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:917
    #60 0x7ffa2ed2f415 in MessageLoop::RunInternal /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:331
    #61 0x7ffa2ed2f415 in MessageLoop::RunHandler(void) /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:324
    #62 0x7ffa2ed2f1e5 in MessageLoop::Run(void) /builds/worker/checkouts/gecko/ipc/chromium/src/base/message_loop.cc:306
    #63 0x7ffa3b02cf19 in XRE_InitChildProcess(int, char **const, struct XREChildData const *) /builds/worker/checkouts/gecko/toolkit/xre/nsEmbedFunctions.cpp:749
    #64 0x7ff707b81d39 in content_process_main /builds/worker/checkouts/gecko/browser/app/../../ipc/contentproc/plugin-container.cpp:58
    #65 0x7ff707b81d39 in NS_internal_main(int, char **, char **) /builds/worker/checkouts/gecko/browser/app/nsBrowserApp.cpp:327
    #66 0x7ff707b814d4 in wmain /builds/worker/checkouts/gecko/toolkit/xre/nsWindowsWMain.cpp:131
    #67 0x7ff707c7e747 in invoke_main d:\agent\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl:90
    #68 0x7ff707c7e747 in __scrt_common_main_seh d:\agent\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl:288
    #69 0x7ffa72f37033  (C:\WINDOWS\System32\KERNEL32.DLL+0x180017033)
    #70 0x7ffa73642650  (C:\WINDOWS\SYSTEM32\ntdll.dll+0x180052650)

0x11e0b8ee8f08 is located 8 bytes inside of 120-byte region [0x11e0b8ee8f00,0x11e0b8ee8f78)
freed by thread T0 here:
    #0 0x7ffa43d55bdb in free Z:\task_163283270682301\fetches\llvm-project\llvm\projects\compiler-rt\lib\asan\asan_malloc_win.cpp:82
    #1 0x7ffa37bae2da in operator delete /builds/worker/workspace/obj-build/dist/include/mozilla/cxxalloc.h:51
    #2 0x7ffa37bae2da in mozilla::SVGTextPathObserver::`scalar deleting dtor'(unsigned int) /builds/worker/checkouts/gecko/layout/svg/SVGObserverUtils.cpp:967
    #3 0x7ffa3741d17d in mozilla::FrameProperties::PropertyValue::DestroyValueFor /builds/worker/checkouts/gecko/layout/base/FrameProperties.h:325
    #4 0x7ffa3741d17d in mozilla::FrameProperties::RemoveAll(class nsIFrame const *) /builds/worker/checkouts/gecko/layout/base/FrameProperties.h:256
    #5 0x7ffa373ab0fc in nsIFrame::RemoveAllProperties /builds/worker/workspace/obj-build/dist/include/nsIFrame.h:4224
    #6 0x7ffa373ab0fc in mozilla::PresShell::NotifyDestroyingFrame(class nsIFrame *) /builds/worker/checkouts/gecko/layout/base/PresShell.cpp:2216
    #7 0x7ffa377fd70e in nsIFrame::DestroyFrom(class nsIFrame *, struct mozilla::layout::PostFrameDestroyData &) /builds/worker/checkouts/gecko/layout/generic/nsIFrame.cpp:883
    #8 0x7ffa37607fe6 in nsContainerFrame::DestroyFrom(class nsIFrame *, struct mozilla::layout::PostFrameDestroyData &) /builds/worker/checkouts/gecko/layout/generic/nsContainerFrame.cpp:298
    #9 0x7ffa37645034 in nsBlockFrame::DoRemoveFrameInternal(class nsIFrame *, unsigned int, struct mozilla::layout::PostFrameDestroyData &) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:6336
    #10 0x7ffa37647441 in nsBlockFrame::DoRemoveFrame /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.h:544
    #11 0x7ffa37647441 in nsBlockFrame::DeleteNextInFlowChild(class nsIFrame *, bool) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:6557
    #12 0x7ffa378e1017 in nsLineLayout::ReflowFrame(class nsIFrame *, class nsReflowStatus &, class mozilla::ReflowOutput *, bool &) /builds/worker/checkouts/gecko/layout/generic/nsLineLayout.cpp:1016
    #13 0x7ffa37639487 in nsBlockFrame::ReflowInlineFrame(class mozilla::BlockReflowInput &, class nsLineLayout &, class nsLineList_iterator, class nsIFrame *, enum LineReflowStatus *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:4565
    #14 0x7ffa37637d42 in nsBlockFrame::DoReflowInlineFrames(class mozilla::BlockReflowInput &, class nsLineLayout &, class nsLineList_iterator, struct nsFlowAreaRect &, int &, struct nsFloatManager::SavedState *, bool *, enum LineReflowStatus *, bool) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:4367
    #15 0x7ffa376301ff in nsBlockFrame::ReflowInlineFrames(class mozilla::BlockReflowInput &, class nsLineList_iterator, bool *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:4252
    #16 0x7ffa37628509 in nsBlockFrame::ReflowLine(class mozilla::BlockReflowInput &, class nsLineList_iterator, bool *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:3229
    #17 0x7ffa3761b904 in nsBlockFrame::ReflowDirtyLines(class mozilla::BlockReflowInput &) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:2763
    #18 0x7ffa37611a8d in nsBlockFrame::Reflow(class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, class nsReflowStatus &) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:1394
    #19 0x7ffa37ba8c5c in mozilla::SVGTextFrame::DoReflow(void) /builds/worker/checkouts/gecko/layout/svg/SVGTextFrame.cpp:5122
    #20 0x7ffa37b8af48 in mozilla::SVGTextFrame::MaybeReflowAnonymousBlockChild(void) /builds/worker/checkouts/gecko/layout/svg/SVGTextFrame.cpp:5063
    #21 0x7ffa37b52584 in mozilla::SVGTextFrame::ReflowSVGNonDisplayText /builds/worker/checkouts/gecko/layout/svg/SVGTextFrame.cpp:2850
    #22 0x7ffa37b52584 in mozilla::SVGTextPathObserver::OnRenderingChange(void) /builds/worker/checkouts/gecko/layout/svg/SVGObserverUtils.cpp:502
    #23 0x7ffa37b57d79 in mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange /builds/worker/checkouts/gecko/layout/svg/SVGObserverUtils.cpp:247
    #24 0x7ffa37b57d79 in mozilla::SVGRenderingObserverSet::InvalidateAll(void) /builds/worker/checkouts/gecko/layout/svg/SVGObserverUtils.cpp:1066

previously allocated by thread T0 here:
    #0 0x7ffa43d55ceb in malloc Z:\task_163283270682301\fetches\llvm-project\llvm\projects\compiler-rt\lib\asan\asan_malloc_win.cpp:98
    #1 0x7ffa4bfc154d in moz_xmalloc /builds/worker/checkouts/gecko/memory/mozalloc/mozalloc.cpp:52
    #2 0x7ffa37b5c6c3 in operator new /builds/worker/workspace/obj-build/dist/include/mozilla/cxxalloc.h:33
    #3 0x7ffa37b5c6c3 in mozilla::GetEffectProperty /builds/worker/checkouts/gecko/layout/svg/SVGObserverUtils.cpp:1165
    #4 0x7ffa37b5c6c3 in mozilla::SVGObserverUtils::GetAndObserveTextPathsPath(class nsIFrame *) /builds/worker/checkouts/gecko/layout/svg/SVGObserverUtils.cpp:1420
    #5 0x7ffa37ba22f4 in mozilla::SVGTextFrame::GetTextPath(class nsIFrame *) /builds/worker/checkouts/gecko/layout/svg/SVGTextFrame.cpp:4542
    #6 0x7ffa37ba3276 in mozilla::SVGTextFrame::DoTextPathLayout(void) /builds/worker/checkouts/gecko/layout/svg/SVGTextFrame.cpp:4609
    #7 0x7ffa37ba7b3e in mozilla::SVGTextFrame::DoGlyphPositioning(void) /builds/worker/checkouts/gecko/layout/svg/SVGTextFrame.cpp:4954
    #8 0x7ffa37b05ae0 in mozilla::SVGContainerFrame::ReflowSVGNonDisplayText(class nsIFrame *) /builds/worker/checkouts/gecko/layout/svg/SVGContainerFrame.cpp:114
    #9 0x7ffa37b05b70 in mozilla::SVGContainerFrame::ReflowSVGNonDisplayText(class nsIFrame *) /builds/worker/checkouts/gecko/layout/svg/SVGContainerFrame.cpp:119
    #10 0x7ffa37b638e7 in mozilla::SVGOuterSVGFrame::Reflow(class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, class nsReflowStatus &) /builds/worker/checkouts/gecko/layout/svg/SVGOuterSVGFrame.cpp:456
    #11 0x7ffa378e055a in nsLineLayout::ReflowFrame(class nsIFrame *, class nsReflowStatus &, class mozilla::ReflowOutput *, bool &) /builds/worker/checkouts/gecko/layout/generic/nsLineLayout.cpp:875
    #12 0x7ffa37639487 in nsBlockFrame::ReflowInlineFrame(class mozilla::BlockReflowInput &, class nsLineLayout &, class nsLineList_iterator, class nsIFrame *, enum LineReflowStatus *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:4565
    #13 0x7ffa37637d42 in nsBlockFrame::DoReflowInlineFrames(class mozilla::BlockReflowInput &, class nsLineLayout &, class nsLineList_iterator, struct nsFlowAreaRect &, int &, struct nsFloatManager::SavedState *, bool *, enum LineReflowStatus *, bool) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:4367
    #14 0x7ffa376301ff in nsBlockFrame::ReflowInlineFrames(class mozilla::BlockReflowInput &, class nsLineList_iterator, bool *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:4252
    #15 0x7ffa37628509 in nsBlockFrame::ReflowLine(class mozilla::BlockReflowInput &, class nsLineList_iterator, bool *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:3229
    #16 0x7ffa3761b904 in nsBlockFrame::ReflowDirtyLines(class mozilla::BlockReflowInput &) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:2763
    #17 0x7ffa37611a8d in nsBlockFrame::Reflow(class nsPresContext *, class mozilla::ReflowOutput &, struct mozilla::ReflowInput const &, class nsReflowStatus &) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:1394
    #18 0x7ffa37635988 in nsBlockReflowContext::ReflowBlock(class mozilla::LogicalRect const &, bool, struct nsCollapsingMargin &, int, bool, class nsLineBox *, struct mozilla::ReflowInput &, class nsReflowStatus &, class mozilla::BlockReflowInput &) /builds/worker/checkouts/gecko/layout/generic/nsBlockReflowContext.cpp:288
    #19 0x7ffa3762b68d in nsBlockFrame::ReflowBlockFrame(class mozilla::BlockReflowInput &, class nsLineList_iterator, bool *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:3886
    #20 0x7ffa376286b9 in nsBlockFrame::ReflowLine(class mozilla::BlockReflowInput &, class nsLineList_iterator, bool *) /builds/worker/checkouts/gecko/layout/generic/nsBlockFrame.cpp:3226

```
Flags: in-testsuite?

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1736243#c1)• 3 years ago |
|  | |

I can reproduce it on linux:

<https://crash-stats.mozilla.org/report/index/4d76a195-4fe5-489f-b28c-7bc8f0211015#tab-details>

|  | [Jason Kratzer [:jkratzer]](/user_profile?user_id=586683) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a62069_586683)• 3 years ago |

Keywords: [bugmon](/buglist.cgi?keywords=bugmon&resolution=---)

|  | [Tyson Smith [:tsmith]](/user_profile?user_id=486634)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1736243#c2)• 3 years ago |
|  | |

(In reply to Sylvestre Ledru [:Sylvestre] from [comment #1](/show_bug.cgi?id=1736243#c1 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]"))

> I can reproduce it on linux:
>
> <https://crash-stats.mozilla.org/report/index/4d76a195-4fe5-489f-b28c-7bc8f0211015#tab-details>

I think this is a different bug.

Keywords: [bugmon](/buglist.cgi?keywords=bugmon&resolution=---)

|  | [Tyson Smith [:tsmith]](/user_profile?user_id=486634)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1736243#c3)• 3 years ago |
|  | |

Here is what I get (again on Windows):

<https://crash-stats.mozilla.org/report/index/0699a63a-0a46-4498-9635-a08d90211019>

This seems more like what I'd expect since it has a similar stack and the poison value (in rax).

Crash Signature: [@ mozilla::SVGRenderingObserverSet::InvalidateAll ]

|  | [Tyson Smith [:tsmith]](/user_profile?user_id=486634)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1736243#c4)• 3 years ago |
|  | |

Hmm I also get (on Linux)

<https://crash-stats.mozilla.org/report/index/b2c5df1f-59e6-426a-817a-636230210615>

This has what appears to be a frame poison value in rax.

Crash Signature: [@ mozilla::SVGRenderingObserverSet::InvalidateAll ] → [@ mozilla::SVGRenderingObserverSet::InvalidateAll ] [@ nsIFrame::SetParent ]

|  | [Tyson Smith [:tsmith]](/user_profile?user_id=486634)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1736243#c5)• 3 years ago |
|  | |

A Pernosco session is available here: <https://pernos.co/debug/-LQDdU8fLTbOpr7b7r96XQ/index.html>

|  | [Tyson Smith [:tsmith]](/user_profile?user_id=486634)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a111239_486634)• 3 years ago |

OS: Windows → Unspecified

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a268700_1689)• 3 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a680563_278074)• 3 years ago |

Flags: needinfo?(dholbert)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a1992694_278074)• 3 years ago |

Assignee: nobody → dholbert

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1736243#c6)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1736243&comment_id=15662693 "1 revision") |
|  | |

FWIW, when I load the attached testcase on linux (in Nightly with a fresh profile), I get an immediate content-process crash, with signature `mozilla::SVGRenderingObserverSet::InvalidateAll` (as ~expected, unlike sledru's different-looking crash in [comment 1](/show_bug.cgi?id=1736243#c1 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]")).

Crash report: [bp-fed810d5-7560-4495-bc0c-4158d0211118](https://crash-stats.mozilla.org/report/index/fed810d5-7560-4495-bc0c-4158d0211118)

In my case, it seems to have crashed with a null deref.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1736243#c7)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1736243&comment_id=15662758 "2 revisions") |
|  | |

Side note: I spun off [bug 1741956](/show_bug.cgi?id=1741956 "RESOLVED FIXED - Parent-process crash in [@ XGetImage]") for crashes in `XGetImage` (like sledru's in [comment 1](/show_bug.cgi?id=1736243#c1 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]")). I suspect that's not related to this bug at all -- I wonder if it might have been posted here by mistake? I notice that sledru's [comment 1](/show_bug.cgi?id=1736243#c1 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]") was posted on Oct 18th, but the crash report he linked was processed 3 days earlier (2021-10-15 06:15:08 UTC). So I wonder if that was a copypaste error when copying over the crash report link, just getting the wrong crash ID from about:crashes or something.

sledru: if you **can** somehow trigger parent-process `XGetImage`-signature crashes with this bug's testcase, let us know; otherwise, I'm guessing that was a copypaste error. Also: if your `about:crashes` seems to contain any more-related-looking[1] crash reports from around when you posted [comment 1](/show_bug.cgi?id=1736243#c1 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]"), that would help confirm that this is indeed what happened.)

[1] I'd expect your crash to look similar to my crash from [comment 6](/show_bug.cgi?id=1736243#c6 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]") or tyson's from [comment 4](/show_bug.cgi?id=1736243#c4 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]"); it should be a content-process crash with SVGTextFrame in the backtrace, probably.

Flags: needinfo?(dholbert) → needinfo?(sledru)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1736243#c8)• 3 years ago |
|  | |

Attached file
[backtrace of fatal assertion failure](attachment.cgi?id=9251427)
— [Details](attachment.cgi?id=9251427&action=edit)

In a debug build, the attached testcase aborts with this assertion-failure in `SVGRenderingObserver::DebugObserverSet()`:
```
Assertion failure: inObserverSet == mInObserverSet (failed to track whether we're in our referenced element's observer set!),
at layout/svg/SVGObserverUtils.cpp:1115
```
<https://searchfox.org/mozilla-central/rev/3881c4ca80d1b4b2f43be695438ecaf90ee4f86c/layout/svg/SVGObserverUtils.cpp#1113-1115>
Backtrace for this assertion-failure attached.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1736243#c9)• 3 years ago |
|  | |

In another debug-build load of the testcase, I got this additional non-fatal assertion, which appeared just before I hit the same fatal assertion-failure from [comment 8](/show_bug.cgi?id=1736243#c8 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]"):

```
[Child 62601, Main Thread] ###!!! ASSERTION: removing observer from an element we're not observing?: 'observers->Contains(aObserver)', file layout/svg/SVGObserverUtils.cpp:1625

```

I captured this run in rr and have submitted it to pernosco (along with the recording that we've already got in [comment 5](/show_bug.cgi?id=1736243#c5 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]")). I'll post the recording link when I've got it.

|  | [Robert Longson [:longsonr]](/user_profile?user_id=218550) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1736243#c10)• 3 years ago |
|  | |

There's an idea from jwatt in [bug 1539477](/show_bug.cgi?id=1539477 "RESOLVED INVALID - Stop setting mInObserverList too early in SVGRenderingObserver::NotifyEvictedFromRenderingObserverSet") not sure if it would fix this but we could give it a shot.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1736243#c11)• 3 years ago |
|  | |

Thanks! That's an interesting connection.

Here's the pernosco recording for the run in [comment 9](/show_bug.cgi?id=1736243#c9 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]"), at the moment we print the non-fatal assertion failure:

[https://pernos.co/debug/CkryXMa2GCmndAKMKmmkqg/index.html#f{m[Cx0y,AA\_,t[hw,9Ik\_,f{e[Cx0t,AUjo4w\_,s{af3y0oVAA,bDkA,uD/+9RQ,oEAjAXw\_\_\_/](https://pernos.co/debug/CkryXMa2GCmndAKMKmmkqg/index.html#f%7Bm%5BCx0y,AA_,t%5Bhw,9Ik_,f%7Be%5BCx0t,AUjo4w_,s%7Baf3y0oVAA,bDkA,uD/+9RQ,oEAjAXw___/)

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1736243#c12)• 3 years ago |
|  | |

I can still reproduce it:

<https://crash-stats.mozilla.org/report/index/571b8e59-fdf8-48cb-9fdb-80eb30211121>

Flags: needinfo?(sledru)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1736243#c13)• 3 years ago |
|  | |

So working backwards from the non-fatal assertion in [comment 9](/show_bug.cgi?id=1736243#c9 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]") (where we've gotten a `RemoveRenderingObserver` call for an element that we're not observing), we get this sequence of calls:

(1) `SVGObserverUtils::AddRenderingObserver` (to add a rendering observer)

(2) `SVGObserverUtils::InvalidateRenderingObservers` (which clears the set)

(3) `SVGObserverUtils::RemoveRenderingObserver` (to remove the rendering observer that we added in (1)).

In call #3 here, we trip over the non-fatal assertion because the rendering observer set is empty (it was emptied in call #2).

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1736243#c14)• 3 years ago |
|  | |

...and actually, call #3 happens **while we are inside of call #2**. We are, in fact, doing some reentrant reflow, which is why we're acting on the same data in a reentrant way.

Here's a pruned version of the backtrace, at the moment when the non-fatal assertion fails, in the afore-linked pernosco trace (I'll attach the full backtrace as an attachment):

```
#0 mozilla::SVGObserverUtils::RemoveRenderingObserver
#1 mozilla::SVGRenderingObserver::StopObserving
#2 mozilla::SVGIDRenderingObserver::~SVGIDRenderingObserver (this=0x7f7caa26a280)
#3 mozilla::SVGRenderingObserverProperty::~SVGRenderingObserverProperty
#6 mozilla::SVGRenderingObserverProperty::Release
[...SNIP...]
#10 mozilla::FrameProperties::RemoveAll
[...SNIP...]
#16 nsInlineFrame::DestroyFrom
#17 nsBlockFrame::DoRemoveFrameInternal
#18 nsBlockFrame::DoRemoveFrame
#19 nsBlockFrame::DeleteNextInFlowChild
#20 nsLineLayout::ReflowFrame
[...SNIP...]
#27 mozilla::SVGTextFrame::DoReflow
#28 mozilla::SVGTextFrame::MaybeReflowAnonymousBlockChild
#29 mozilla::SVGTextFrame::ReflowSVGNonDisplayText
#30 mozilla::SVGTextPathObserver::OnRenderingChange
#31 mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange
#32 mozilla::SVGRenderingObserverSet::InvalidateAll
#33 mozilla::SVGObserverUtils::InvalidateRenderingObservers
#34 mozilla::SVGTextFrame::ReflowSVGNonDisplayText
[...SNIP...]
58 mozilla::PresShell::DoReflow

```

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a7602102_278074)• 3 years ago |

[Attachment #9251427](/attachment.cgi?id=9251427&action=edit "backtrace of fatal assertion failure") -
Attachment description: backtrace of assertion failure → backtrace of fatal assertion failure

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1736243#c15)• 3 years ago |
|  | |

Attached file
[backtrace of non-fatal assertion failure (from pernosco trace)](attachment.cgi?id=9258985)
— [Details](attachment.cgi?id=9258985&action=edit)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1736243#c16)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1736243&comment_id=15732143 "2 revisions") |
|  | |

A bit more about what's happening here:

* We call ReflowSVGNonDisplayText for the SVG Text frame with id `a`.
* This invalidates its rendering observers (a collection of `SVGTextPathObserver` objects), pulling them into a local variable like so in [`SVGRenderingObserverSet::InvalidateAll`](https://searchfox.org/mozilla-central/rev/080e18fa4748456003164f58b0d925b8c3826a67/layout/svg/SVGObserverUtils.cpp#1058,1063-1067):

```
  const auto observers = std::move(mObservers);

  for (const auto& observer : observers) {
    observer->OnNonDOMMutationRenderingChange();
  }

```

* Its first rendering observer is the next SVG text frame. As part of invalidating there, we call ReflowSVGNonDisplayText() on that next text frame.
* That next text frame has two lines in its anonymous block. During this reflow, it deletes a no-longer-needed next-continuation for its textPath's inline-frame (deleting the part that was in the second line).
* While deleting this frame, we of course have to delete all of its frame-properties, including its SVGTextPathObserver. **This is bad since we are currently iterating over `observers` (many stack levels up) which includes a pointer to this object, which it hasn't yet reached in its iteration.**
* In the SVGTextPathObserver destructor, SVGTextPathObserver attempts to unregister from the observation target (for safety, so that it doesn't get a callback after it's been deleted). But this fails because the observation target doesn't have the observer in its `mObservers` collection anymore -- it has moved to the local `observers` variable, which we don't have access to modify.
* Later on, the above-quoted `for (const auto& observer : observers) {` loop presumably reaches the now-deleted `SVGTextPathObserver` (which still has a straggling pointer that was left behind in the `observers` collection). We use that pointer and trigger a use-after-free when using it, and we crash.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1736243#c17)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1736243&comment_id=15732169 "1 revision") |
|  | |

So, the short version of [comment 16](/show_bug.cgi?id=1736243#c16 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]") is:

* We're looping over some pointers and calling OnNonDOMMutationRenderingChange on each one.
* In one of these iterations, the `OnNonDOMMutationRenderingChange` call causes frame-deletion which deletes one of the objects that we're going to iterate over in a later iteration of the loop.
* So when we get to the iteration for that object, we're hosed.

I'm not yet sure what the right fix here is. Assuming that each individual operation is essentially correct here (i.e. our line-breaking is correct, we're correct to do frame deletion, etc), we could potentially work around this by changing how we iterate somehow so that the deleted `SVGTextPathObserver` is actually successful at unregistering itself. (We could do this by e.g. removing observers from mObservers one at a time as we process them; or by using some sort of weak-pointer setup instead of raw pointers, or maybe something else.)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1736243#c18)• 3 years ago |
|  | |

Alternate approach: we could probably just make SVGTextPathObserver (or rather its superclass SVGRenderingObserver) refcounted, so that it can be left alive (in some "inactivated" state) when the frame's property table is torn down.

It looks like a lot of other observer classes in SVGObserverUtils are refcounted (and we have other `mObservers;` collections there that store RefPtrs rather than raw pointers), so there's some prior-art for this approach being reasonable.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1736243#c19)• 3 years ago |
|  | |

Attached patch

[strawman patch (avoids the crash, though it still triggers an assertion and maybe causes other problems [?])](attachment.cgi?id=9259022&action=diff) (obsolete)
— [Details](attachment.cgi?id=9259022&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1736243&attachment=9259022)

Here's a strawman patch, which

(1) makes us use a RefPtr in `mObservers` (and the local `auto observers` var that copies its type). This prevents us from deleting the observer when the aforementioned continuation-frame-destruction happens.

(2) Makes the observer itself use a weak pointer to keep track of the frame, so that we'll safely be able to detect that it should be skipped when we get to it in the `observer : observers` loop (since its frame is destroyed at that point).

We still fail one assertion (`failed to track whether we're in our referenced element's observer set!`) for one of the observers, which is normally fatal but which this patch downgrades for convenience.

With this patch, I'm not seeing any crashes with the attached testcase, and I'm able to reload it over and over without issue (aside from the downgraded assertion-failure).

jwatt, I probably need to seek your advice here. There's a large comment above `SVGRenderingObserverSet`, from [bug 1495562](/show_bug.cgi?id=1495562 "RESOLVED FIXED - Rename SVGRenderingObserverList to SVGRenderingObserverSet"):

<https://searchfox.org/mozilla-central/rev/080e18fa4748456003164f58b0d925b8c3826a67/layout/svg/SVGObserverUtils.cpp#990-1016>

...which says (among other things) that it does not store strong references to the observers, and that becomes false with my attached strawman patch, of course (per (1) above). I wonder if this change risks introducing leaks or other issues somehow, or if we should just redesign how this invalidation works to simplify things somehow per your `XXXjwatt` comment there?

Flags: needinfo?(jwatt)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a7620892_278074)• 3 years ago |

[Attachment #9259022](/attachment.cgi?id=9259022&action=edit "strawman patch (avoids the crash, though it still triggers an assertion and maybe causes other problems [?])") -
Attachment description: strawman patch → strawman patch (avoids the crash, though it still triggers an assertion and maybe causes other problems [?])

|  | [Emilio Cobos Álvarez (:emilio)](/user_profile?user_id=546716)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1736243#c20)• 3 years ago |
|  | |

Pretty sure [bug 1756793](/show_bug.cgi?id=1756793 "RESOLVED DUPLICATE - ZDI-CAN-16716: Mozilla Firefox textPath Element Use-After-Free Remote Code Execution Vulnerability") is the same bug and the patch is the right way to fix this.

Depends on: [1756793](/show_bug.cgi?id=1756793 "RESOLVED DUPLICATE - ZDI-CAN-16716: Mozilla Firefox textPath Element Use-After-Free Remote Code Execution Vulnerability")

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1736243#c21)• 3 years ago |
|  | |

Thanks! That does indeed look like the same bug, yeah.

I'm glad the fix turned out to be simple; I hadn't considered that maybe we could just decline-to-observe-the-referenced-element on continuations, and I was worried that we'd have to rethink how this observer stuff is managed, per [comment 17](/show_bug.cgi?id=1736243#c17 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]") - 18.

(Coincidentally, I was meaning to circle back to look at this this week, though I'm glad you got to it and found a simpler fix first! :))

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1736243#c22)• 3 years ago |
|  | |

In a build with [bug 1756793](/show_bug.cgi?id=1756793 "RESOLVED DUPLICATE - ZDI-CAN-16716: Mozilla Firefox textPath Element Use-After-Free Remote Code Execution Vulnerability")'s patch (getting the FirstContinuation in GetAndObserveTextPathsPath), I verified that I can load the attached testcase on this bug here, without crashing or asserting.

(vs. in a build without that patch, the content process aborts with the assert mentioned in [comment 8](/show_bug.cgi?id=1736243#c8 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]").)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11161591_278074)• 3 years ago |

Flags: needinfo?(jwatt)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11163931_278074)• 3 years ago |

No longer depends on: [1756793](/show_bug.cgi?id=1756793 "RESOLVED DUPLICATE - ZDI-CAN-16716: Mozilla Firefox textPath Element Use-After-Free Remote Code Execution Vulnerability")

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11164085_278074)• 3 years ago |

Blocks: [1415551](/show_bug.cgi?id=1415551 "RESOLVED WORKSFORME - AddressSanitizer: heap-use-after-free [@ OnNonDOMMutationRenderingChange] [@ mozilla::SVGRenderingObserverSet::InvalidateAll] with WRITE of size 1")

|  | [Emilio Cobos Álvarez (:emilio)](/user_profile?user_id=546716)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1736243#c24)• 3 years ago |
|  | |

Attached file
[Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame](attachment.cgi?id=9265271)
— [Details](attachment.cgi?id=9265271&action=edit)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11164188_278074)• 3 years ago |

Assignee: dholbert → emilio

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1736243#c25)• 3 years ago |
|  | |

After discussion with emilio & dveditz, I've moved emilio's patch here and marked [bug 1756793](/show_bug.cgi?id=1756793 "RESOLVED DUPLICATE - ZDI-CAN-16716: Mozilla Firefox textPath Element Use-After-Free Remote Code Execution Vulnerability") as a dupe.

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11164353_278074)• 3 years ago |

[Attachment #9259022](/attachment.cgi?id=9259022&action=edit "strawman patch (avoids the crash, though it still triggers an assertion and maybe causes other problems [?])") -
Attachment is obsolete: true

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1736243#c26)• 3 years ago |
|  | |

Note: I'll port emilio's sec-approval request from [bug 1756793 comment 3](/show_bug.cgi?id=1756793#c3 "RESOLVED DUPLICATE - ZDI-CAN-16716: Mozilla Firefox textPath Element Use-After-Free Remote Code Execution Vulnerability") over to this bug, now that I've duped that bug over here.

(Also: [bug 1756793 comment 2](/show_bug.cgi?id=1756793#c2 "RESOLVED DUPLICATE - ZDI-CAN-16716: Mozilla Firefox textPath Element Use-After-Free Remote Code Execution Vulnerability") has some additional notes -- originally the extended commit message of the patch, later-redacted to avoid giving away too much -- explaining the patch a bit more.)

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1736243#c27)• 3 years ago |
|  | |

Comment on [attachment 9265271](/attachment.cgi?id=9265271 "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") [[details]](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame")

[Bug 1736243](/show_bug.cgi?id=1736243 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]") - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame

### Security Approval Request

* **How easily could an exploit be constructed based on the patch?**: Not super-easily, but easily enough for someone with deep layout knowledge.
* **Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?**: No
* **Which older supported branches are affected by this flaw?**: all
* **If not all supported branches, which bug introduced the flaw?**: None
* **Do you have backports for the affected branches?**: Yes
* **If not, how different, hard to create, and risky will they be?**: This patch should apply cleanly to all supported branches without needing any changes.
* **How likely is this patch to cause regressions; how much testing does it need?**: not very likely.
[Attachment #9265271](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") -
Flags: sec-approval?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11166468_75935)• 3 years ago |

[status-firefox95](/buglist.cgi?f1=cf_status_firefox95&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox95&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox95&o1=equals&v1=wontfix)
[status-firefox97](/buglist.cgi?f1=cf_status_firefox97&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox97&o1=equals&v1=wontfix)
[status-firefox98](/buglist.cgi?f1=cf_status_firefox98&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox98&o1=equals&v1=affected)
[status-firefox99](/buglist.cgi?f1=cf_status_firefox99&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox99&o1=equals&v1=affected)
[status-firefox-esr91](/buglist.cgi?f1=cf_status_firefox_esr91&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=affected)
[tracking-firefox98](/buglist.cgi?f1=cf_tracking_firefox98&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox98&o1=equals&v1=%2B)
[tracking-firefox99](/buglist.cgi?f1=cf_tracking_firefox99&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox99&o1=equals&v1=%2B)
[tracking-firefox-esr91](/buglist.cgi?f1=cf_tracking_firefox_esr91&o1=isnotempty):
--- → [98+](/buglist.cgi?f1=cf_tracking_firefox_esr91&o1=equals&v1=98%2B)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1736243#c28)• 3 years ago |
|  | |

Comment on [attachment 9265271](/attachment.cgi?id=9265271 "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") [[details]](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame")

[Bug 1736243](/show_bug.cgi?id=1736243 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]") - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame

Approved to land and uplift

[Attachment #9265271](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") -
Flags: sec-approval? → sec-approval+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1736243#c29)• 3 years ago |
|  | |

<https://hg.mozilla.org/integration/autoland/rev/cf5e6b2865d5e7a370446b0deb00e8ef86489bac>

Please go ahead and request Beta/ESR approval on this ASAP so we can get it uplifted before next week's RC builds.

Flags: needinfo?(emilio)

|  | [Emilio Cobos Álvarez (:emilio)](/user_profile?user_id=546716)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1736243#c30)• 3 years ago |
|  | |

Comment on [attachment 9265271](/attachment.cgi?id=9265271 "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") [[details]](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame")

[Bug 1736243](/show_bug.cgi?id=1736243 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]") - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame

### Beta/Release Uplift Approval Request

* **User impact if declined**: Sec-sensitive crashes.
* **Is this code covered by automated tests?**: No
* **Has the fix been verified in Nightly?**: No
* **Needs manual test from QE?**: Yes
* **If yes, steps to reproduce**: Test-case here or on dupe bugs.
* **List of other uplifts needed**: none
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: One-liner
* **String changes made/needed**: none
Flags: needinfo?(emilio)
[Attachment #9265271](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") -
Flags: approval-mozilla-release?
[Attachment #9265271](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") -
Flags: approval-mozilla-beta?

|  | [Emilio Cobos Álvarez (:emilio)](/user_profile?user_id=546716)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11313619_546716)• 3 years ago |

Flags: qe-verify+

|  | [Emilio Cobos Álvarez (:emilio)](/user_profile?user_id=546716)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1736243#c31)• 3 years ago |
|  | |

Comment on [attachment 9265271](/attachment.cgi?id=9265271 "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") [[details]](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame")

[Bug 1736243](/show_bug.cgi?id=1736243 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]") - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame

### ESR Uplift Approval Request

* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**:
* **User impact if declined**:
* **Fix Landed on Version**: 98
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: One-liner.
[Attachment #9265271](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") -
Flags: approval-mozilla-esr91?

|  | [Emilio Cobos Álvarez (:emilio)](/user_profile?user_id=546716)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1736243#c32)• 3 years ago |
|  | |

Comment on [attachment 9265271](/attachment.cgi?id=9265271 "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") [[details]](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame")

[Bug 1736243](/show_bug.cgi?id=1736243 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]") - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame

Err, wrong flag.

[Attachment #9265271](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") -
Flags: approval-mozilla-release?

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1736243#c33)• 3 years ago |
|  | |

Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=longsonr

<https://hg.mozilla.org/integration/autoland/rev/cf5e6b2865d5e7a370446b0deb00e8ef86489bac>

<https://hg.mozilla.org/mozilla-central/rev/cf5e6b2865d5>

Group: layout-core-security → core-security-releaseStatus: NEW → RESOLVEDClosed: 3 years ago
[status-firefox99](/buglist.cgi?f1=cf_status_firefox99&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox99&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox99&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → 99 Branch

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1736243#c34)• 3 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/fa541277dd40>

[status-firefox98](/buglist.cgi?f1=cf_status_firefox98&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox98&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox98&o1=equals&v1=fixed)

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11378973_24572)• 3 years ago |

[Attachment #9265271](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Mihai Boldan, Desktop QA [:mboldan]](/user_profile?user_id=551058) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11534375_551058)• 3 years ago |

QA Whiteboard: [post-critsmash-triage] [qa-triaged]

|  | [Ciprian Georgiu, Desktop QA](/user_profile?user_id=576182) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=1736243#c35)• 3 years ago |
|  | |

I've reproduced this crash using an affected Nightly asan build (2021-10-17), under Ubuntu 18.04 x64.

The crash is not reproducing anymore on the latest asan builds: Beta 98.0b10 and Nightly 99.0a1.

Status: RESOLVED → VERIFIED
[status-firefox98](/buglist.cgi?f1=cf_status_firefox98&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox98&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox98&o1=equals&v1=verified)
[status-firefox99](/buglist.cgi?f1=cf_status_firefox99&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox99&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox99&o1=equals&v1=verified)Flags: qe-verify+

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=1736243#c36)• 3 years ago |
|  | |

Comment on [attachment 9265271](/attachment.cgi?id=9265271 "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") [[details]](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame")

[Bug 1736243](/show_bug.cgi?id=1736243 "VERIFIED FIXED - heap-use-after-free [@ mozilla::SVGRenderingObserver::OnNonDOMMutationRenderingChange]") - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame

Approved for ESR.

[Attachment #9265271](/attachment.cgi?id=9265271&action=edit "Bug 1736243 - Make SVGObserverUtils::GetAndObserveTextPathsPath not observe on continuations. r=jwatt,jfkthame") -
Flags: approval-mozilla-esr91? → approval-mozilla-esr91+

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=1736243#c37)• 3 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr91/rev/3c51a47e58c2>

[status-firefox-esr91](/buglist.cgi?f1=cf_status_firefox_esr91&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=fixed)

|  | [Ciprian Georgiu, Desktop QA](/user_profile?user_id=576182) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=1736243#c38)• 3 years ago |
|  | |

This is also verified as fixed on 91.7.0esr asan build, with Ubuntu 18.04 x64.

|  | [Ciprian Georgiu, Desktop QA](/user_profile?user_id=576182) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11569116_576182)• 3 years ago |

[status-firefox-esr91](/buglist.cgi?f1=cf_status_firefox_esr91&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=verified)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11738966_578488)• 3 years ago |

Whiteboard: [adv-main98+r]

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=1736243#c39)• 3 years ago |
|  | |

As part of a security bug pattern analysis, we are requesting your help with a high level analysis of this bug. It is our hope to develop static analysis (or potentially runtime/dynamic analysis) in the future to identify classes of bugs.

Please visit [this google form](https://docs.google.com/forms/d/e/1FAIpQLSe9uRXuoMK6tRglbNL5fpXbun_oEb6_xC2zpuE_CKA_GUjrvA/viewform?usp=pp_url&entry.2124261401=https%3A%2F%2Fbugzilla.mozilla.org%2Fshow_bug.cgi%3Fid%3D1736243) to reply.

Flags: needinfo?(emilio)Whiteboard: [adv-main98+r] → [adv-main98+r][sec-survey]

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11752500_578488)• 3 years ago |

Whiteboard: [adv-main98+r][sec-survey] → [adv-main98+r][sec-survey][adv-esr91.7+r]

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=1736243#c40)• 3 years ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9266128)
— [Details](attachment.cgi?id=9266128&action=edit)

|  | [Emilio Cobos Álvarez (:emilio)](/user_profile?user_id=546716)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11815208_546716)• 3 years ago |

Flags: needinfo?(emilio)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a11828717_578488)• 3 years ago |

Alias: CVE-2022-26381

|  | [Frederik Braun [:freddy]](/user_profile?user_id=428608) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=1736243#c42)• 3 years ago |
|  | |

The ZDI plans to publish a blog post about their discovery of this bug (reported as the duplicate [bug 1756793](/show_bug.cgi?id=1756793 "RESOLVED DUPLICATE - ZDI-CAN-16716: Mozilla Firefox textPath Element Use-After-Free Remote Code Execution Vulnerability")) on April 7th, tomorrow.

Any objections to opening this bug to the public?

|  | [Daniel Holbert [:dholbert]](/user_profile?user_id=278074) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=1736243#c43)• 3 years ago |
|  | |

No objections from me; it looks like all supported releases have been verified as fixed, including ESR91 (with the fix included in 91.7.0esr released March 8th, nearly a month ago).

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=1736243#c44)• 3 years ago |
|  | |

The ZDI blog post is [here](https://www.zerodayinitiative.com/blog/2022/4/7/cve-2022-26381-gone-by-others-triggering-a-uaf-in-firefox).

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1736243#a27167171_1689)• 2 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1736243&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Tyson Smith [:tsmith]](/user_profile?user_id=486634)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


