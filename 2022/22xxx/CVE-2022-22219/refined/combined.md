=== Content from kb.juniper.net_91268352_20250114_223028.html ===
Loading×Sorry to interruptCSS ErrorRefresh

=== Content from www.juniper.net_43b2b8a9_20250114_223031.html ===


X

![](https://junipernetworks.allegiancetech.com/surveys/images/MRVCXM/juniper_logo.jpg)

Help us improve your experience.

Let us know what you think.

Do you have time for a two-minute survey?

Yes

Maybe Later

Â
##### ON THIS PAGE

* [Syntax](#id-evpn__d493693e24)
* [Hierarchy Level](#id-evpn__d493693e385)
* [Description](#id-evpn__d493693e403)
* [Options](#id-evpn__d493693e430)
* [Required Privilege Level](#id-evpn__d493693e634)
* [Release Information](#id-evpn__d493693e647)
Â
# evpn

## Syntax

```
evpn {
    [advertise-zero-ethernet-tag](advertise-zero-ethernet-tag-edit-protocols-evpn.html);
    [assisted-replication](assisted-replication-edit-routing-instances-protocols-evpn.html) {
        [leaf](leaf-edit-protocols-evpn-assisted-replication.html) {
            replicator-activation-delay seconds;
        }
        [replicator](replicator-edit-protocols-evpn-assisted-replication.html) {
            inet ip;
            vxlan-encapsulation-source-ip (assisted-replicator-ip | ingress-replication-ip | retain-incoming-source-ip);
        }
    }
    [default-gateway](default-gateway.html) {
        (advertise | do-not-advertise | no-gateway-community);
    }
    [designated-forwarder-election-hold-time](designated-forwarder-election-hold-time-evpn.html) seconds;
    (designated-forwarder-preference-highest | designated-forwarder-preference-least);
    duplicate-mac-detection {
        auto-recovery-time minutes;
        detection-threshold detection-threshold;
        detection-window seconds;
    }
    [encapsulation (protocols evpn)](enapsulation-vxlan-edit-routing-instances.html) encapslation-type;
    es-import-oldstyle;
    es-label-oldstyle;
    esi identifier;
    [esi-resolution-per-bridge-domain](esi-resolution-per-bridge-domain.html);
    evpn-etree;
    [extended-isid-list](extended-isid-list-edit-routing-instances.html) (all | single-isid | [isid-list] | isid-range);
    [extended-vlan-list](extended-vlan-list-edit-routing-instances.html) (vlan-id | [list of vlans]);
    [extended-vni-list](extended-vni-list.html) (all | [list of VNIs]);
    [interconnect](interconnect-edit-routing-instances-protocols-evpn.html) {
        [esi](esi-edit-interfaces.html) identifier {
            all-active;
            [df-election-type](dynamic-profiles-interfaces-esi-df-election-type.html) {
                mod;
                [preference](preference-edit-interfaces-esi-df-election-type.html) {
                    least;
                    non-revertive;
                    value value (0..65535);
                }
            }
        }
        [interconnected-vlan-list](interconnect-vlan-list.html) (vlan-list);
        [interconnected-vni-list](interconnected-vni-list-edit-routing-instances-protocols-evpn-interconnect.html) (all | [vni-list]);
        [route-distinguisher](route-distinguisher-edit-routing-instances-vp.html) (number:id | ip-address:id);
        [vrf-export](vrf-export-edit-routing-instances-vp.html) (policy-name | [policy-names]);
        [vrf-import](vrf-import-edit-routing-instances-vp.html) (policy-name | [policy-names]);
        [vrf-target](vrf-target-edit-routing-instances-vp.html) {
            community;
            import community;
            export community;
        }
    }
    [interconnect-multihoming-peer-gateways](interconnect-multihoming-peer-gateways-protocols-evpn.html) (multihoming-peer-gateway-IP-address | [multihoming-peer-gateway-IP-address ... ]);
    [interconnected-vlan-list](interconnect-vlan-list.html) (vlan-list);
    [interconnected-vni-list](interconnected-vni-list-edit-routing-instances-protocols-evpn-interconnect.html) (all | [vni-list]);
    [interface](interface-edit-routing-instances-evpn.html) interface-name {
        [ignore-encapsulation-mismatch](ignore-encapsulation-mismatch-edit-protocols-l2circuit.html);
        [interface-mac-limit](interface-mac-limit-edit-protocols-vpls.html) limit {
            [packet-action](packet-action-edit-bridge-domains-edit-protocols-l2-learning-edit-switch-options.html) drop;
        }
        [mac-pinning](mac-pinning-for-evpn.html) ;
        [no-mac-learning](no-mac-learning-edit-bridge-domains-edit-switch-options.html);
        [static-mac](static-mac-edit-bridge-domains.html) mac-address;
    }
    [interface-mac-limit](interface-mac-limit-edit-protocols-vpls.html) limit {
        [packet-action](packet-action-edit-bridge-domains-edit-protocols-l2-learning-edit-switch-options.html) drop;
    }
    [irb-symmetric-routing](irb-symmetric-routing-protocols-evpn.html) {
        vni vni;
    }
    leave-sync-route-oldstyle;
    [label-allocation](label-allocation-edit-routing-instances-protocols-evpn.html) per-instance;
    mac-list name {
        mac-addresses;
    }
    mac-mobility {
        no-sequence-numbers;
    }
    [mac-statistics](mac-statistics-edit-bridge-domains-edit-switch-options.html);
    [mac-table-size](mac-table-size-edit-protocols-vpls.html) limit {
        [packet-action](packet-action-edit-bridge-domains-edit-protocols-l2-learning-edit-switch-options.html) drop;
    }
    [multicast-mode](multicast-mode-evpn-edit-routing-instances.html) client | ingress-replication;
    no-core-isolation;
    [no-default-gateway-ext-comm](no-default-gateway-ext-comm-edit-routing-instances.html);
    [no-mac-learning](no-mac-learning-edit-bridge-domains-edit-switch-options.html);
    [oism](oism-routing-instances-protocols-evpn.html) {
        originate-smet-on-revenue-vlan-too;
        [pim-evpn-gateway](pim-evpn-gateway-protocols-evpn-oism.html) {
            external-irb name;
            [peg-df-election](peg-df-election-oism-pim-evpn-gateway.html) {
              delay-time seconds;
              mod;
              [preference](preference-peg-df-election-oism-pim-evpn-gateway.html) {
                use-least;
                value value;
              }
            }
        }
        supplemental-bridge-domain-irb supplemental-bridge-domain-irb;
    }
    p2mp-bud-support;
    [pbb-evpn-core](pbb-evpn-core-edit-routing-instances.html);
    peg-df-election-history num;
    pmsi-tunnel-endpoint pmsi-tunnel-endpoint;
    [remote-ip-host-routes](remote-ip-host-routes.html) {
        import [ import ... ];
        no-advertise-community;
    }
    smet-etag-carry-vid;
    [source-packet-routing](routing-instances-protocols-evpn-source-packet-routing.html) {
        srv6 locator loc-name (end-dt2-sid | micro-dt2-sid);
    }
    [static-multihoming-peer](static-multihoming-peer-edit-protocols-evpn.html) (static-multihoming-peer-IP-address | [static-multihoming-peer-IP-address ... ]);
    [traceoptions](traceoptions-edit-protocols-evpns.html) {
        file filename <files number> <sizeÂ size> <world-readableÂ | no-world-readable>;
        flag flag <flag-modifier>;
    }
    [vni-options](vni-routing-options.html) vni vxlan-network-identifier {
        designated-forwarder-election-hold-time seconds;
        [vrf-target](vrf-target-edit-routing-instances-vp.html) {
            community;
            auto;
            import community;
            export community;
        }
    }
}

```

## Hierarchy Level

```
[edit logical-systems logical-system-name routing-instances routing-instance-name protocols],
[edit protocols],
[edit routing-instances routing-instance-name protocols]

```

## Description

Enable an Ethernet VPN (EVPN) on the routing instance.

Note:

Starting in Junos OS Release 24.2R1, we renamed the
`interconnect-multihoming-peer-gateways` option to [multihoming-peer-gateways](interconnect-multihoming-peer-gateways-protocols-evpn.html) to support additional multihoming peer
feature use cases besides interconnect scenarios. You won't see the
`interconnect-multihoming-peer-gateways` statement in the
Junos CLI anymore; use the new option name
`multihoming-peer-gateways` for the same function.

## Options

| designated-forwarder-election-hold-time seconds | Time in seconds to wait before electing a designated forwarder (DF). Peer provider edge (PE) devices elect a designated forwarder (DF) when customer edge devices (CEs) are multihomed to more than one PE device. Without a designated forwarder, multihomed hosts would receive duplicate packets. The designated forwarder choice for an Ethernet segment identifier (ESI) is based on EVPN Type 4 route advertisements.   * **Range:** 1 through 1800 seconds |
| --- | --- |
| designated-forwarder-preference-highest | Use highest preference value for DF election for the EVPN instance (EVI). By default, the preference-based DF election is based on the highest preference value configured. |
| designated-forwarder-preference-least | Use least preference value for DF election for the EVPN instance (EVI). By default, the preference-based DF election is based on the highest preference value configured. |
| es-import-oldstyle | Enable non-compliant ES import route-target computation. |
| es-label-oldstyle | Enable devices to use the lower-order bits for the ESI label field. This non-compliant ESI 24-bit ESI label can be found in previous Junos OS versions. |
| esi | Ten octet value. Configure an ESI for the EVPN instance (EVI). Use this option when configuring `df-election-granularity` [per-evi](per-evi-edit-interfaces-esi.html) to support the ESI per EVI feature. |
| evpn-etree | Configure an Ethernet VPN E-TREE service. |
| leave-sync-route-oldstyle | Enable device to interoperate with devices that do not support the maximum response time attributes on EVPN Type 8 routes. |
| mac-mobility no-sequence-numbers | Disable MAC mobility. This feature is enabled by default. See [Overview of MAC Mobility](../../../../evpn/topics/concept/mac-mobility.html). |
| no-core-isolation | Disable the core isolation feature (enabled by default on supporting platforms), which is desirable in certain EVPN fabric use cases. See [Understanding When to Disable EVPN-VXLAN Core Isolation](../../../../evpn/topics/concept/evpn-vxlan-core-isolation-disabling.html) for details. |
| peg-df-election-history num | Number of PIM EVPN gateway (PEG) DF election history entries the device maintains per bridge domain (VLAN) on devices configured as PEG devices with optimized intersubnet multicast (OISM) . The device stores and displays up to this many entries in the output from the `show evpn oism peg-df-status extensive` command.   * **Range:** 0 through 255 |
| pmsi-tunnel-endpoint pmsi-tunnel-endpoint | Configure the PMSI tunnel endpoint on the ingress router to use the loopback address (router ID) that is the MPLS network PMSI tunnel endpoint for EVPN TypeÂ 3 routes. |
| smet-etag-carry-vid | Enable a device to interoperate with other devices in the EVPN network that use VNIs (VLAN ID) as the Ethernet Tag ID. |

The remaining statements are explained separately.

## Required Privilege Level

routingâTo view this statement in the configuration.

routing-controlâTo add this statement to the configuration.

## Release Information

Statement introduced in Junos OS Release 13.2.

`designated-forwarder-election-hold-time seconds`
statement introduced in Junos OS Release 14.1.

`extended-vlan-list vlan-id | [vlan-id
set]` statement introduced in Junos OS Release 14.1.

Note:

QFX10000 switches don't support the `extended-vlan-list`
statement.

`designated-forwarder-preference-least` and
`service-type` statements introduced in Junos OS Release 17.3 for
MX Series routers with MPC interfaces and MIC interfaces.

`no-core-isolation` statement added in Junos OS ReleasesÂ 17.3R3,
17.4R2, 18.1R3, 18.2R2, and 18.3R1.

Support for logical systems on MX Series routers added in Junos OS
ReleaseÂ 17.4R1.

`p2mp-bud-support` statement introduced in Junos OS Release
18.2R1.

`assisted-replication` statement introduced in Junos OS Release 18.4R2
and 19.4R1.

`pmsi-tunnel-endpoint` statement introduced in Junos OS Release
20.3R1.

`oism` statement hierarchy introduced in Junos OS Release 21.2R1.

`irb-symmetric-routing` statement introduced in Junos OS Release
21.4R1.

`peg-df-election-history` statement introduced in Junos OS Release
23.4R1 and Junos OS Evolved Release
23.4R1.

`designated-forwarder-preference-highest` statement introduced in
Junos OS Release 24.2R1.

### Related Documentation

* [Implementing EVPN-VXLAN for Data Centers](../../../../evpn/topics/concept/evpn-vxlan-implementing.html)
* [Configuring EVPN Routing Instances](../../../../evpn/topics/task/evpn-routing-instance-configuring.html)
* [Tracing EVPN Traffic and Operations](../../../../evpn/topics/task/evpn-traceoptions-configuring.html)
* [Provider Backbone Bridging (PBB) and EVPN Integration Overview](../../../../evpn/topics/concept/pbb-evpn-integration-for-dci-overview.html)
* [Optimized Inter-Subnet Multicast in EVPN Networks](../../../../evpn/topics/topic-map/oism-evpn-vxlan.html)
Â Â
