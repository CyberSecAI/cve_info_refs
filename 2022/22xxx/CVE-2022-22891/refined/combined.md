=== Content from github.com_aa6eaa0f_20250114_215001.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjerryscript-project%2Fjerryscript%2Fissues%2F4871)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjerryscript-project%2Fjerryscript%2Fissues%2F4871)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=jerryscript-project%2Fjerryscript)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jerryscript-project](/jerryscript-project)
/
**[jerryscript](/jerryscript-project/jerryscript)**
Public

* [Notifications](/login?return_to=%2Fjerryscript-project%2Fjerryscript) You must be signed in to change notification settings
* [Fork
  675](/login?return_to=%2Fjerryscript-project%2Fjerryscript)
* [Star
   7.1k](/login?return_to=%2Fjerryscript-project%2Fjerryscript)

* [Code](/jerryscript-project/jerryscript)
* [Issues
  139](/jerryscript-project/jerryscript/issues)
* [Pull requests
  23](/jerryscript-project/jerryscript/pulls)
* [Actions](/jerryscript-project/jerryscript/actions)
* [Wiki](/jerryscript-project/jerryscript/wiki)
* [Security](/jerryscript-project/jerryscript/security)
* [Insights](/jerryscript-project/jerryscript/pulse)

Additional navigation options

* [Code](/jerryscript-project/jerryscript)
* [Issues](/jerryscript-project/jerryscript/issues)
* [Pull requests](/jerryscript-project/jerryscript/pulls)
* [Actions](/jerryscript-project/jerryscript/actions)
* [Wiki](/jerryscript-project/jerryscript/wiki)
* [Security](/jerryscript-project/jerryscript/security)
* [Insights](/jerryscript-project/jerryscript/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fjerryscript-project%2Fjerryscript%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fjerryscript-project%2Fjerryscript%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# SEGV in ecma\_ref\_object\_inline of ecma-gc.c #4871

Closed

[hope-fly](/hope-fly) opened this issue
Dec 9, 2021
· 0 comments
 · Fixed by [#4885](https://github.com/jerryscript-project/jerryscript/pull/4885)

Closed

# [SEGV in ecma\_ref\_object\_inline of ecma-gc.c](#top) #4871

[hope-fly](/hope-fly) opened this issue
Dec 9, 2021
· 0 comments
 · Fixed by [#4885](https://github.com/jerryscript-project/jerryscript/pull/4885)

Assignees
[![@rerobika](https://avatars.githubusercontent.com/u/22135179?s=40&v=4)](/rerobika)

Labels
[bug](/jerryscript-project/jerryscript/labels/bug)
Undesired behaviour

## Comments

[![@hope-fly](https://avatars.githubusercontent.com/u/59732293?s=80&v=4)](/hope-fly)

Copy link

### **[hope-fly](/hope-fly)** commented [Dec 9, 2021](#issue-1075248187) • edited Loading

| JerryScript revision Commit: [51da1551](https://github.com/jerryscript-project/jerryscript/commit/51da15516e1436184be9914314f76d596f14cd27) Version: v3.0.0 Build platform Ubuntu 18.04.5 LTS (Linux 5.4.0-44-generic x86\_64) Build steps ``` ./tools/build.py --clean --debug --profile=es2015-subset --compile-flag=-fsanitize=address --compile-flag=-m32 --lto=off --logging=on --line-info=on --error-message=on --system-allocator=on --stack-limit=20 ``` Test case ``` function echo(str) {   console.log(str); }  function T(p, r, u) {   return Object.assign(p, {     then(onFulfilled, onRejected) {       if (u) {         onFulfilled(r);       } else {         onFulfilled();       }        return Promise.prototype.then.call(this, onFulfilled, onRejected);     }   }); }  function JSEtest(i) {   var ps = [T(Promise.resolve('success'))];   Promise.all(ps).then(res => {     echo(`Test #${i} - Success with '${res}' (length = ${res.length}) (isArray = ${Array.isArray(res)})`);   }).catch(err => {     echo(`Test #${i} - Catch with ${err}`);   }); }  JSEtest(1); ```  ​ Execution steps & Output ``` $ ./jerryscript/build/bin/jerry poc.js  ASAN:DEADLYSIGNAL ================================================================= ==95503==ERROR: AddressSanitizer: SEGV on unknown address 0x41b58ab0 (pc 0x566075cf bp 0x1ff7c4b0 sp 0xffbe2500 T0) ==95503==The signal is caused by a READ memory access.     #0 0x566075ce in ecma_ref_object_inline /root/jerryscript/jerry-core/ecma/base/ecma-gc.c:136     #1 0x56639c0c in ecma_copy_value /root/jerryscript/jerry-core/ecma/base/ecma-helpers-value.c:913     #2 0x56639c0c in ecma_fast_copy_value /root/jerryscript/jerry-core/ecma/base/ecma-helpers-value.c:940     #3 0x566cdd0b in ecma_op_object_find_own /root/jerryscript/jerry-core/ecma/operations/ecma-objects.c:647     #4 0x566d2ea0 in ecma_op_object_find_own /root/jerryscript/jerry-core/ecma/operations/ecma-objects.c:494     #5 0x566d2ea0 in ecma_op_object_get_with_receiver /root/jerryscript/jerry-core/ecma/operations/ecma-objects.c:879     #6 0x567ef0cf in ecma_op_array_get_to_string_at_index /root/jerryscript/jerry-core/ecma/builtin-objects/ecma-builtin-array-prototype.c:273     #7 0x567ef0cf in ecma_builtin_array_prototype_join /root/jerryscript/jerry-core/ecma/builtin-objects/ecma-builtin-array-prototype.c:322     #8 0x567ef0cf in ecma_builtin_array_prototype_dispatch_routine /root/jerryscript/jerry-core/ecma/builtin-objects/ecma-builtin-array-prototype.c:2940     #9 0x566731f1 in ecma_builtin_dispatch_routine /root/jerryscript/jerry-core/ecma/builtin-objects/ecma-builtins.c:1543     #10 0x566731f1 in ecma_builtin_dispatch_call /root/jerryscript/jerry-core/ecma/builtin-objects/ecma-builtins.c:1574     #11 0x566b48b4 in ecma_op_function_call_native_built_in /root/jerryscript/jerry-core/ecma/operations/ecma-function-object.c:1243     #12 0x566bae4d in ecma_op_function_call /root/jerryscript/jerry-core/ecma/operations/ecma-function-object.c:1444     #13 0x5668d365 in ecma_array_object_to_string /root/jerryscript/jerry-core/ecma/operations/ecma-array-object.c:1228     #14 0x5681e945 in ecma_builtin_intrinsic_dispatch_routine /root/jerryscript/jerry-core/ecma/builtin-objects/ecma-builtin-intrinsic.c:201     #15 0x566731f1 in ecma_builtin_dispatch_routine /root/jerryscript/jerry-core/ecma/builtin-objects/ecma-builtins.c:1543     #16 0x566731f1 in ecma_builtin_dispatch_call /root/jerryscript/jerry-core/ecma/builtin-objects/ecma-builtins.c:1574     #17 0x566b48b4 in ecma_op_function_call_native_built_in /root/jerryscript/jerry-core/ecma/operations/ecma-function-object.c:1243     #18 0x566bae4d in ecma_op_function_call /root/jerryscript/jerry-core/ecma/operations/ecma-function-object.c:1444     #19 0x566c9572 in ecma_op_general_object_ordinary_value /root/jerryscript/jerry-core/ecma/operations/ecma-objects-general.c:319     #20 0x566c976b in ecma_op_general_object_default_value /root/jerryscript/jerry-core/ecma/operations/ecma-objects-general.c:284     #21 0x566d6875 in ecma_op_object_default_value /root/jerryscript/jerry-core/ecma/operations/ecma-objects.c:1780     #22 0x566a905a in ecma_op_to_string /root/jerryscript/jerry-core/ecma/operations/ecma-conversion.c:456     #23 0x567b3433 in vm_loop /root/jerryscript/jerry-core/vm/vm.c:2820     #24 0x567e21da in vm_execute /root/jerryscript/jerry-core/vm/vm.c:5260     #25 0x567e7e7c in vm_run /root/jerryscript/jerry-core/vm/vm.c:5363     #26 0x566b4101 in ecma_op_function_call_simple /root/jerryscript/jerry-core/ecma/operations/ecma-function-object.c:1203     #27 0x566bae25 in ecma_op_function_call /root/jerryscript/jerry-core/ecma/operations/ecma-function-object.c:1439     #28 0x566c495e in ecma_process_promise_reaction_job /root/jerryscript/jerry-core/ecma/operations/ecma-jobqueue.c:221     #29 0x566c495e in ecma_process_all_enqueued_jobs /root/jerryscript/jerry-core/ecma/operations/ecma-jobqueue.c:563     #30 0x565d4dbc in jerry_run_jobs /root/jerryscript/jerry-core/api/jerryscript.c:1064     #31 0x565c004b in main /root/jerryscript/jerry-main/main-jerry.c:326     #32 0xf76f1f20 in __libc_start_main (/lib/i386-linux-gnu/libc.so.6+0x18f20)     #33 0x565c9359  (/root/jerryscript/build/bin/jerry+0x3b359)  AddressSanitizer can not provide additional info. SUMMARY: AddressSanitizer: SEGV /root/jerryscript/jerry-core/ecma/base/ecma-gc.c:136 in ecma_ref_object_inline ==95503==ABORTING  ```  Credits: Found by OWL337 team. |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@rerobika](https://avatars.githubusercontent.com/u/22135179?s=40&u=8254b032a06d4850b0a8201ca61026d834a5c328&v=4)](/rerobika)
[rerobika](/rerobika)
added
the
[bug](/jerryscript-project/jerryscript/labels/bug)
Undesired behaviour
label
[Dec 9, 2021](#event-5740697604)

[![@rerobika](https://avatars.githubusercontent.com/u/22135179?s=40&u=8254b032a06d4850b0a8201ca61026d834a5c328&v=4)](/rerobika)
[rerobika](/rerobika)
self-assigned this
[Dec 9, 2021](#event-5740785418)

[rerobika](/rerobika)
pushed a commit
to rerobika/jerryscript
that referenced
this issue
[Dec 9, 2021](#ref-commit-bf96d98)

`[Fix invalid argument reference in Promise.all executor](/rerobika/jerryscript/commit/bf96d98109be397c28266f53b34338f2e2b12db8 "Fix invalid argument reference in Promise.all executor

This patch fixes #4871.

JerryScript-DCO-1.0-Signed-off-by: Robert Fancsik robert.fancsik@h-lab.eu")`
…

`[bf96d98](/rerobika/jerryscript/commit/bf96d98109be397c28266f53b34338f2e2b12db8)`

```
This patch fixes [jerryscript-project#4871](https://github.com/jerryscript-project/jerryscript/issues/4871).

JerryScript-DCO-1.0-Signed-off-by: Robert Fancsik robert.fancsik@h-lab.eu
```

[![@rerobika](https://avatars.githubusercontent.com/u/22135179?s=40&u=8254b032a06d4850b0a8201ca61026d834a5c328&v=4)](/rerobika)
[rerobika](/rerobika)
mentioned this issue
[Dec 9, 2021](#ref-pullrequest-1075615928)

[Fix invalid argument reference in Promise.all executor
#4885](/jerryscript-project/jerryscript/pull/4885)
 Merged

[![@hope-fly](https://avatars.githubusercontent.com/u/59732293?s=40&v=4)](/hope-fly)
[hope-fly](/hope-fly)
mentioned this issue
[Dec 13, 2021](#ref-issue-1078289153)

[Assertion 'ecma\_is\_lexical\_environment (object\_p)' failed at ecma-helpers.c (ecma\_get\_lex\_env\_type).
#4902](/jerryscript-project/jerryscript/issues/4902)

Closed

[![@ossy-szeged](https://avatars.githubusercontent.com/u/1391143?s=40&u=cc8d6569e0d32025518373cbc3f225bb7eb2092c&v=4)](/ossy-szeged)
[ossy-szeged](/ossy-szeged)
closed this as [completed](/jerryscript-project/jerryscript/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
[#4885](/jerryscript-project/jerryscript/pull/4885)
[Dec 15, 2021](#event-5769949096)

[ossy-szeged](/ossy-szeged)
pushed a commit
that referenced
this issue
[Dec 15, 2021](#ref-commit-ee59c22)

`[Fix invalid argument reference in Promise.all executor (](/jerryscript-project/jerryscript/commit/ee59c226d974ceb6cbdf8a3e0c19fafc7ce6f279 "Fix invalid argument reference in Promise.all executor (#4885)

This patch fixes #4871.

JerryScript-DCO-1.0-Signed-off-by: Robert Fancsik robert.fancsik@h-lab.eu")[#4885](https://github.com/jerryscript-project/jerryscript/pull/4885)[)](/jerryscript-project/jerryscript/commit/ee59c226d974ceb6cbdf8a3e0c19fafc7ce6f279 "Fix invalid argument reference in Promise.all executor (#4885)

This patch fixes #4871.

JerryScript-DCO-1.0-Signed-off-by: Robert Fancsik robert.fancsik@h-lab.eu")`
…

`[ee59c22](/jerryscript-project/jerryscript/commit/ee59c226d974ceb6cbdf8a3e0c19fafc7ce6f279)`

```
This patch fixes [#4871](https://github.com/jerryscript-project/jerryscript/issues/4871).

JerryScript-DCO-1.0-Signed-off-by: Robert Fancsik robert.fancsik@h-lab.eu
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fjerryscript-project%2Fjerryscript%2Fissues%2F4871)

Assignees

[![@rerobika](https://avatars.githubusercontent.com/u/22135179?s=40&v=4)](/rerobika) [rerobika](/rerobika)

Labels

[bug](/jerryscript-project/jerryscript/labels/bug)
Undesired behaviour

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [Fix invalid argument reference in Promise.all executor](/jerryscript-project/jerryscript/pull/4885)
 [rerobika/jerryscript](/rerobika/jerryscript)

2 participants

[![@rerobika](https://avatars.githubusercontent.com/u/22135179?s=52&v=4)](/rerobika) [![@hope-fly](https://avatars.githubusercontent.com/u/59732293?s=52&v=4)](/hope-fly)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


