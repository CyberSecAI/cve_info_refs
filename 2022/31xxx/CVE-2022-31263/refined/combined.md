=== Content from github.com_94d96a89_20250114_223231.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmastodon%2Fmastodon%2Freleases%2Ftag%2Fv3.5.0)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmastodon%2Fmastodon%2Freleases%2Ftag%2Fv3.5.0)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=mastodon%2Fmastodon)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[mastodon](/mastodon)
/
**[mastodon](/mastodon/mastodon)**
Public

* [Notifications](/login?return_to=%2Fmastodon%2Fmastodon) You must be signed in to change notification settings
* [Fork
  7.1k](/login?return_to=%2Fmastodon%2Fmastodon)
* [Star
   47.5k](/login?return_to=%2Fmastodon%2Fmastodon)

* [Code](/mastodon/mastodon/tree/v3.5.0)
* [Issues
  3.8k](/mastodon/mastodon/issues)
* [Pull requests
  163](/mastodon/mastodon/pulls)
* [Discussions](/mastodon/mastodon/discussions)
* [Actions](/mastodon/mastodon/actions)
* [Projects
  1](/mastodon/mastodon/projects)
* [Security](/mastodon/mastodon/security)
* [Insights](/mastodon/mastodon/pulse)

Additional navigation options

* [Code](/mastodon/mastodon/tree/v3.5.0)
* [Issues](/mastodon/mastodon/issues)
* [Pull requests](/mastodon/mastodon/pulls)
* [Discussions](/mastodon/mastodon/discussions)
* [Actions](/mastodon/mastodon/actions)
* [Projects](/mastodon/mastodon/projects)
* [Security](/mastodon/mastodon/security)
* [Insights](/mastodon/mastodon/pulse)

1. [Releases](/mastodon/mastodon/releases)
2. [v3.5.0](/mastodon/mastodon/releases/tag/v3.5.0)

# v3.5.0

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/mastodon/mastodon/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v3.5.0)

 Loading

[View all tags](/mastodon/mastodon/tags)

![@Gargron](https://avatars.githubusercontent.com/u/184731?s=40&v=4)
[Gargron](/Gargron)
released this
30 Mar 13:28

·
[6661 commits](/mastodon/mastodon/compare/v3.5.0...main)
to main
since this release

[v3.5.0](/mastodon/mastodon/tree/v3.5.0)

[`8c7223f`](/mastodon/mastodon/commit/8c7223f4eac80b5725485be742d3fa2c984f4670)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

[![Mastodon](https://camo.githubusercontent.com/2874480f2d35b5568fe5df428e427f02e860aced95b69d1051e336fbeaeee502/68747470733a2f2f692e696d6775722e636f6d2f4e685a6334306c2e706e67)](https://camo.githubusercontent.com/2874480f2d35b5568fe5df428e427f02e860aced95b69d1051e336fbeaeee502/68747470733a2f2f692e696d6775722e636f6d2f4e685a6334306c2e706e67)

## Upgrade overview

This release contains upgrade notes that deviate from the norm:

ℹ️ Requires streaming API restart

ℹ️ Requires two-step database migration process for zero-downtime deployment

ℹ️ Systemd service files updated

⚠️ Elasticsearch requirement raised to at least 7

⚠️ PostgreSQL version in docker-compose.yml has been changed from 9.6 to 14, requires manual upgrade

For more information, scroll down to the upgrade instructions section.

## Changelog

### Added

* **Add support for incoming edited posts** ([Gargron](https://github.com/mastodon/mastodon/pull/16697), [Gargron](https://github.com/mastodon/mastodon/pull/17727), [Gargron](https://github.com/mastodon/mastodon/pull/17728), [Gargron](https://github.com/mastodon/mastodon/pull/17320), [Gargron](https://github.com/mastodon/mastodon/pull/17404), [Gargron](https://github.com/mastodon/mastodon/pull/17390), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17335), [Gargron](https://github.com/mastodon/mastodon/pull/17696), [Gargron](https://github.com/mastodon/mastodon/pull/17745), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17740), [Gargron](https://github.com/mastodon/mastodon/pull/17697), [Gargron](https://github.com/mastodon/mastodon/pull/17648), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17531), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17499), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17498), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17380), [Gargron](https://github.com/mastodon/mastodon/pull/17373), [Gargron](https://github.com/mastodon/mastodon/pull/17334), [Gargron](https://github.com/mastodon/mastodon/pull/17333), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17699), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17748))
  + Previous versions remain available for perusal and comparison
  + People who reblogged a post are notified when it's edited
  + New REST APIs:
    - `PUT /api/v1/statuses/:id`
    - `GET /api/v1/statuses/:id/history`
    - `GET /api/v1/statuses/:id/source`
  + New streaming API event:
    - `status.update`
* **Add appeals for moderator decisions** ([Gargron](https://github.com/mastodon/mastodon/pull/17364), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17725), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17566), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17652), [Gargron](https://github.com/mastodon/mastodon/pull/17616), [Gargron](https://github.com/mastodon/mastodon/pull/17615), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17554), [Gargron](https://github.com/mastodon/mastodon/pull/17523))
  + All default moderator decisions now notify the affected user by e-mail
  + They now link to an appeal page instead of suggesting replying to the e-mail
  + They can now be found in account settings and not just e-mail
  + Users can submit one appeal within 20 days of the decision
  + Moderators can approve or reject the appeal
* **Add notifications for posts deleted by moderators** ([Gargron](https://github.com/mastodon/mastodon/pull/17204), [Gargron](https://github.com/mastodon/mastodon/pull/17668), [Gargron](https://github.com/mastodon/mastodon/pull/17746), [Gargron](https://github.com/mastodon/mastodon/pull/17679), [Gargron](https://github.com/mastodon/mastodon/pull/17487))
  + New, redesigned report view in admin UI
  + Common report actions now only take one click to complete
  + Deleting posts or marking as sensitive from report now notifies user
  + Reports can be categorized by reason and specific rules violated
  + The reasons are automatically cited in the notifications, except for spam
  + Marking posts as sensitive now federates using post editing
* **Add explore page with trending posts and links** ([Gargron](https://github.com/mastodon/mastodon/pull/17123), [Gargron](https://github.com/mastodon/mastodon/pull/17431), [Gargron](https://github.com/mastodon/mastodon/pull/16917), [Gargron](https://github.com/mastodon/mastodon/pull/17677), [Gargron](https://github.com/mastodon/mastodon/pull/16938), [Gargron](https://github.com/mastodon/mastodon/pull/17044), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/16978), [Gargron](https://github.com/mastodon/mastodon/pull/16979), [tribela](https://github.com/mastodon/mastodon/pull/17066), [Gargron](https://github.com/mastodon/mastodon/pull/17072), [Gargron](https://github.com/mastodon/mastodon/pull/17403), [noiob](https://github.com/mastodon/mastodon/pull/17624), [mayaeh](https://github.com/mastodon/mastodon/pull/17755), [mayaeh](https://github.com/mastodon/mastodon/pull/17757), [Gargron](https://github.com/mastodon/mastodon/pull/17760), [mayaeh](https://github.com/mastodon/mastodon/pull/17762))
  + Hashtag trends algorithm is extended to work for posts and links
  + Links are only considered if they have an adequate preview card
  + Preview card generation has been improved to support structured data
  + Links can only trend if the publisher (domain) has been approved
  + Posts can only trend if the author has been approved
  + Individual approval and rejection for posts and links is also available
  + Moderators are notified about pending trends at most once every 2 hours
  + Posts and link trends are language-specific
  + Search page is redesigned into explore page in web UI
  + Discovery tab is coming soon in official iOS and Android apps
  + New REST APIs:
    - `GET /api/v1/trends/links`
    - `GET /api/v1/trends/statuses`
    - `GET /api/v1/trends/tags` (alias of `GET /api/v1/trends`)
    - `GET /api/v1/admin/trends/links`
    - `GET /api/v1/admin/trends/statuses`
    - `GET /api/v1/admin/trends/tags`
* **Add graphs and retention metrics to admin dashboard** ([Gargron](https://github.com/mastodon/mastodon/pull/16829), [Gargron](https://github.com/mastodon/mastodon/pull/17617), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17570), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/16910), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/16909), [mashirozx](https://github.com/mastodon/mastodon/pull/16884), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/16854))
  + Dashboard shows more numbers with development over time
  + Other data such as most used interface languages and sign-up sources
  + User retention graph shows how many new users stick around
  + New REST APIs:
    - `POST /api/v1/admin/measures`
    - `POST /api/v1/admin/dimensions`
    - `POST /api/v1/admin/retention`
* Add `GET /api/v1/accounts/familiar_followers` to REST API ([Gargron](https://github.com/mastodon/mastodon/pull/17700))
* Add `POST /api/v1/accounts/:id/remove_from_followers` to REST API ([noellabo](https://github.com/mastodon/mastodon/pull/16864))
* Add `category` and `rule_ids` params to `POST /api/v1/reports` IN REST API ([Gargron](https://github.com/mastodon/mastodon/pull/17492), [Gargron](https://github.com/mastodon/mastodon/pull/17682), [Gargron](https://github.com/mastodon/mastodon/pull/17713))
  + `category` can be one of: `spam`, `violation`, `other` (default)
  + `rule_ids` must reference `rules` returned in `GET /api/v1/instance`
* Add global `lang` param to REST API ([Gargron](https://github.com/mastodon/mastodon/pull/17464), [Gargron](https://github.com/mastodon/mastodon/pull/17592))
* Add `types` param to `GET /api/v1/notifications` in REST API ([Gargron](https://github.com/mastodon/mastodon/pull/17767))
* **Add notifications for moderators about new sign-ups** ([Gargron](https://github.com/mastodon/mastodon/pull/16953), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17629))
  + When a new user confirms e-mail, moderators receive a notification
  + New notification type:
    - `admin.sign_up`
* Add authentication history ([Gargron](https://github.com/mastodon/mastodon/pull/16408), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/16428), [baby-gnu](https://github.com/mastodon/mastodon/pull/16654))
* Add ability to automatically delete old posts ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16529), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17691), [tribela](https://github.com/mastodon/mastodon/pull/16653))
* Add ability to pin private posts ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16954), [tribela](https://github.com/mastodon/mastodon/pull/17326), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17304), [MitarashiDango](https://github.com/mastodon/mastodon/pull/17647))
* Add ability to filter search results by author using `from:` syntax ([tribela](https://github.com/mastodon/mastodon/pull/16526))
* Add ability to delete canonical email blocks in admin UI ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16644))
* Add ability to purge undeliverable domains in admin UI ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16686), [tribela](https://github.com/mastodon/mastodon/pull/17210), [tribela](https://github.com/mastodon/mastodon/pull/17741), [tribela](https://github.com/mastodon/mastodon/pull/17209))
* Add ability to disable e-mail token authentication for specific users in admin UI ([Gargron](https://github.com/mastodon/mastodon/pull/16427))
* **Add ability to suspend accounts in batches in admin UI** ([Gargron](https://github.com/mastodon/mastodon/pull/17009), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17301), [Gargron](https://github.com/mastodon/mastodon/pull/17444))
  + New, redesigned accounts list in admin UI
  + Batch suspensions are meant to help clean up spam and bot accounts
  + They do not generate notifications
* Add ability to filter reports by origin of target account in admin UI ([Gargron](https://github.com/mastodon/mastodon/pull/16487))
* Add support for login through OpenID Connect ([chandrn7](https://github.com/mastodon/mastodon/pull/16221))
* Add lazy loading for emoji picker in web UI ([mashirozx](https://github.com/mastodon/mastodon/pull/16907), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17011))
* Add single option votes tooltip in polls in web UI ([Brawaru](https://github.com/mastodon/mastodon/pull/16849))
* Add confirmation modal when closing media edit modal with unsaved changes in web UI ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16518))
* Add hint about missing media attachment description in web UI ([Gargron](https://github.com/mastodon/mastodon/pull/17845))
* Add support for fetching Create and Announce activities by URI in ActivityPub ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16383))
* Add `S3_FORCE_SINGLE_REQUEST` environment variable ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16866))
* Add `OMNIAUTH_ONLY` environment variable ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17288), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17345))
* Add `ES_USER` and `ES_PASS` environment variables for Elasticsearch authentication ([tribela](https://github.com/mastodon/mastodon/pull/16890))
* Add `CAS_SECURITY_ASSUME_EMAIL_IS_VERIFIED` environment variable ([baby-gnu](https://github.com/mastodon/mastodon/pull/16655))
* Add ability to pass specific domains to `tootctl accounts cull` ([tribela](https://github.com/mastodon/mastodon/pull/16511))
* Add `--by-uri` option to `tootctl domains purge` ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16434))
* Add `--batch-size` option to `tootctl search deploy` ([aquarla](https://github.com/mastodon/mastodon/pull/17049))
* Add `--remove-orphans` option to `tootctl statuses remove` ([noellabo](https://github.com/mastodon/mastodon/pull/17067))

### Changed

* Change design of federation pages in admin UI ([Gargron](https://github.com/mastodon/mastodon/pull/17704), [noellabo](https://github.com/mastodon/mastodon/pull/17735), [Gargron](https://github.com/mastodon/mastodon/pull/17765))
* Change design of account cards in web UI ([Gargron](https://github.com/mastodon/mastodon/pull/17689))
* Change `follow` scope to be covered by `read` and `write` scopes in REST API ([Gargron](https://github.com/mastodon/mastodon/pull/17678))
* Change design of authorized applications page ([Gargron](https://github.com/mastodon/mastodon/pull/17656), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17686))
* Change e-mail domain blocks to block IPs dynamically ([Gargron](https://github.com/mastodon/mastodon/pull/17635), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17650), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17649))
* Change report modal to include category selection in web UI ([Gargron](https://github.com/mastodon/mastodon/pull/17565), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17734), [Gargron](https://github.com/mastodon/mastodon/pull/17654), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17632))
* Change reblogs to not count towards hashtag trends anymore ([Gargron](https://github.com/mastodon/mastodon/pull/17501))
* Change languages to be listed under standard instead of native name in admin UI ([Gargron](https://github.com/mastodon/mastodon/pull/17485))
* Change routing paths to use usernames in web UI ([Gargron](https://github.com/mastodon/mastodon/pull/16171), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/16772), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/16773), [mashirozx](https://github.com/mastodon/mastodon/pull/16793), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17060))
* Change list title input design in web UI ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17092))
* Change "Opt-in to profile directory" preference to be general discoverability preference ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16637))
* Change API rate limits to use /64 masking on IPv6 addresses ([tribela](https://github.com/mastodon/mastodon/pull/17588), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17600), [zunda](https://github.com/mastodon/mastodon/pull/17590))
* Change allowed formats for locally uploaded custom emojis to include GIF ([rgroothuijsen](https://github.com/mastodon/mastodon/pull/17706), [Gargron](https://github.com/mastodon/mastodon/pull/17759))
* Change error message when chosen password is too long ([rgroothuijsen](https://github.com/mastodon/mastodon/pull/17082))
* Change minimum required Elasticsearch version from 6 to 7 ([noellabo](https://github.com/mastodon/mastodon/pull/16915))

### Removed

* Remove profile directory link from main navigation panel in web UI ([Gargron](https://github.com/mastodon/mastodon/pull/17688))
* **Remove language detection through cld3** ([Gargron](https://github.com/mastodon/mastodon/pull/17478), [ykzts](https://github.com/mastodon/mastodon/pull/17539), [Gargron](https://github.com/mastodon/mastodon/pull/17496), [Gargron](https://github.com/mastodon/mastodon/pull/17722))
  + cld3 is very inaccurate on short-form content even with unique alphabets
  + Post language can be overriden individually using `language` param
  + Otherwise, it defaults to the user's interface language
* Remove support for `OAUTH_REDIRECT_AT_SIGN_IN` ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17287))
  + Use `OMNIAUTH_ONLY` instead
* Remove Keybase integration ([Gargron](https://github.com/mastodon/mastodon/pull/17045))
* Remove old columns and indexes ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17245), [Gargron](https://github.com/mastodon/mastodon/pull/16409), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17191))
* Remove shortcodes from newly-created media attachments ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16730), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/16763))

### Deprecated

* `GET /api/v1/trends` → `GET /api/v1/trends/tags`
* OAuth `follow` scope → `read` and/or `write`
* `text` attribute on `DELETE /api/v1/statuses/:id` → `GET /api/v1/statuses/:id/source`

### Fixed

* Fix IDN domains not being rendered correctly in a few left-over places ([Gargron](https://github.com/mastodon/mastodon/pull/17848))
* Fix Sanskrit translation not being used in web UI ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17820))
* Fix Kurdish languages having the wrong language codes ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17812))
* Fix pghero making database schema suggestions ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17807))
* Fix encoding glitch in the OpenGraph description of a profile page ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17821))
* Fix web manifest not permitting PWA usage from alternate domains ([HolgerHuo](https://github.com/mastodon/mastodon/pull/16714))
* Fix not being able to edit media attachments for scheduled posts ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17690))
* Fix subscribed relay activities being recorded as boosts ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17571))
* Fix streaming API server error messages when JSON parsing fails not specifying the source ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17559))
* Fix browsers autofilling new password field with old password ([mashirozx](https://github.com/mastodon/mastodon/pull/17702))
* Fix text being invisible before fonts load in web UI ([tribela](https://github.com/mastodon/mastodon/pull/16330))
* Fix public profile pages of unconfirmed users being accessible ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17385), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17457))
* Fix nil error when trying to fetch key for signature verification ([Gargron](https://github.com/mastodon/mastodon/pull/17747))
* Fix null values being included in some indexes ([Gargron](https://github.com/mastodon/mastodon/pull/17711))
* Fix `POST /api/v1/emails/confirmations` not being available after sign-up ([Gargron](https://github.com/mastodon/mastodon/pull/17743))
* Fix rare race condition when reblogged post is deleted ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17693), [ClearlyClaire](https://github.com/mastodon/mastodon/pull/17730))
* Fix being able to add more than 4 hashtags to hashtag column in web UI ([Gargron](https://github.com/mastodon/mastodon/pull/17729))
* Fix data integrity of featured tags ([Gargron](https://github.com/mastodon/mastodon/pull/17712))
* Fix performance of account timelines ([Gargron](https://github.com/mastodon/mastodon/pull/17709))
* Fix returning empty `<p>` tag for blank account `note` in REST API ([Gargron](https://github.com/mastodon/mastodon/pull/17687))
* Fix leak of existence of otherwise inaccessible posts in REST API ([Gargron](https://github.com/mastodon/mastodon/pull/17684))
* Fix not showing loading indicator when searching in web UI ([Gargron](https://github.com/mastodon/mastodon/pull/17655))
* Fix media modal footer's “external link” not being a link ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17561))
* Fix reply button on media modal not giving focus to compose form ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17626))
* Fix some media attachments being converted with too high framerates ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17619))
* Fix sign in token and warning emails failing to send when contact e-mail address is malformed ([helloworldstack](https://github.com/mastodon/mastodon/pull/17589))
* Fix opening the emoji picker scrolling the single-column view to the top ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17579))
* Fix edge case where settings/admin page sidebar would be incorrectly hidden ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17580))
* Fix performance of server-side filtering ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17575))
* Fix privacy policy link not being visible on small screens ([Gargron](https://github.com/mastodon/mastodon/pull/17533))
* Fix duplicate accounts when searching by IP range in admin UI ([Gargron](https://github.com/mastodon/mastodon/pull/17524), [tribela](https://github.com/mastodon/mastodon/pull/17150))
* Fix error when performing a batch action on posts in admin UI ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17532))
* Fix deletes not being signed in authorized fetch mode ([Gargron](https://github.com/mastodon/mastodon/pull/17484))
* Fix Undo Announce sometimes inlining the originally Announced status ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17516))
* Fix localization of cold-start follow recommendations ([Gargron](https://github.com/mastodon/mastodon/pull/17479), [Gargron](https://github.com/mastodon/mastodon/pull/17486))
* Fix replies collection incorrectly looping ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17462))
* Fix errors when multiple Delete are received for a given actor ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17460))
* Fixed prototype pollution bug and only allow trusted origin ([r0hanSH](https://github.com/mastodon/mastodon/pull/17420))
* Fix text being incorrectly pre-selected in composer textarea on /share ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17339))
* Fix SMTP\_ENABLE\_STARTTLS\_AUTO/SMTP\_TLS/SMTP\_SSL environment variables don't work ([kgtkr](https://github.com/mastodon/mastodon/pull/17216))
* Fix media upload specific rate limits only being applied to v1 endpoint in REST API ([tribela](https://github.com/mastodon/mastodon/pull/17272))
* Fix media descriptions not being used for client-side filtering ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17206))
* Fix cold-start follow recommendation favouring older accounts due to wrong sorting ([noellabo](https://github.com/mastodon/mastodon/pull/17126))
* Fix not redirect to the right page after authenticating with WebAuthn ([heguro](https://github.com/mastodon/mastodon/pull/17098))
* Fix searching for additional hashtags in hashtag column ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17054))
* Fix color of hashtag column settings inputs ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17058))
* Fix performance of `tootctl statuses remove` ([noellabo](https://github.com/mastodon/mastodon/pull/17052))
* Fix `tootctl accounts cull` not excluding domains on timeouts and certificate issues ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16433))
* Fix 404 error when filtering admin action logs by non-existent target account ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16643))
* Fix error when accessing streaming API without any OAuth scopes ([Brawaru](https://github.com/mastodon/mastodon/pull/16823))
* Fix follow request count not updating when new follow requests arrive over streaming API in web UI ([matildepark](https://github.com/mastodon/mastodon/pull/16652))
* Fix error when unsuspending a local account ([HolgerHuo](https://github.com/mastodon/mastodon/pull/16605))
* Fix crash when a notification contains a not yet processed media attachment in web UI ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16573))
* Fix wrong color of download button in audio player in web UI ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16572))
* Fix notes for others accounts not being deleted when an account is deleted ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16579))
* Fix error when logging occurrence of unsupported video file ([noellabo](https://github.com/mastodon/mastodon/pull/16581))
* Fix wrong elements in trends widget being hidden on smaller screens in web UI ([tribela](https://github.com/mastodon/mastodon/pull/16570))
* Fix link to about page being displayed in limited federation mode ([weex](https://github.com/mastodon/mastodon/pull/16432))
* Fix styling of boost button in media modal not reflecting ability to boost ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16387))
* Fix OCR failure when erroneous lang data is in cache ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/16386))
* Fix downloading media from blocked domains in `tootctl media refresh` ([tribela](https://github.com/mastodon/mastodon/pull/16914))
* Fix login form being displayed on landing page when already logged in ([ClearlyClaire](https://github.com/mastodon/mastodon/pull/17348))
* Fix polling for media processing status too frequently in web UI ([tribela](https://github.com/mastodon/mastodon/pull/17271))
* Fix hashtag autocomplete overriding user-typed case ([weex](https://github.com/mastodon/mastodon/pull/16460))
* Fix WebAuthn authentication setup to not prompt for PIN ([truongnmt](https://github.com/mastodon/mastodon/pull/16545))

### Security

* Fix being able to post URLs longer than 4096 characters ([Gargron](https://github.com/mastodon/mastodon/pull/17908))
* Fix being able to bypass e-mail restrictions ([Gargron](https://github.com/mastodon/mastodon/pull/17909))

## Upgrade notes

To get the code for v3.5.0, use `git fetch && git checkout v3.5.0`.

> As always, **make sure you have backups of the database before performing any upgrades**. If you are using docker-compose, this is how a backup command might look: docker exec mastodon\_db\_1 pg\_dump -Fc -U postgres postgres > name\_of\_the\_backup.dump

ℹ️ Some S3-compatible storage providers (such as Tencent Cloud Object Storage) may require setting `S3_FORCE_SINGLE_REQUEST=true` to properly handle some requests.

ℹ️ `OAUTH_REDIRECT_AT_SIGN_IN`, which wasn't working as intended, has been replaced by an `OMNIAUTH_ONLY` environment variable that should address the same use case

ℹ️ The systemd service files `dist/mastodon-web.service`, `dist/mastodon-sidekiq.service` and `dist/mastodon-streaming.service` were updated. Make sure to update your installed service files, otherwise media uploads might fail to get processed correctly.

### Dependencies

Compatibility with Elasticsearch 6.x and earlier has been dropped, and Elasticsearch 7.x is now required for the optional full-text search feature. Other external dependencies have not changed, although the default Ruby version has changed if you are using `rbenv` (see below). To summarize, the dependency requirements for v3.5.0rc3 are:

* Ruby: 2.6 up to 3.1
* PostgreSQL: 9.5 or newer
* Elasticsearch (optional, for full-text search): 7.x
* Redis: 4 or newer
* Node: 12 or newer

### Update steps

The following instructions are for updating from 3.4.6.

If you are upgrading directly from an earlier release, please carefully read the upgrade notes for the skipped releases as well, as they often require extra steps such as database migrations or dependency updates.

**Docker-only**:

The PostgreSQL container version in our docker-compose.yml configuration has been changed from 9.6 to 14 due to EOL (End-of-Life) of 9.6. Detailed instructions on how to migrate your data is [available here](https://github.com/mastodon/mastodon/pull/16947).

**Non-Docker only:**

* If you are using `rbenv`, [update the list of available versions](https://github.com/rbenv/rbenv#updating-the-list-of-available-ruby-versions) and install Ruby 3.0.3 by doing `RUBY_CONFIGURE_OPTS=--with-jemalloc rbenv install 3.0.3`
* Install dependencies: `bundle install` and `yarn install`

**Both Docker and non-Docker:**

1. Run the *pre-deployment* database migrations by specifying the `SKIP_POST_DEPLOYMENT_MIGRATIONS=true` environment variable:
   * Non-Docker: `SKIP_POST_DEPLOYMENT_MIGRATIONS=true RAILS_ENV=production bundle exec rails db:migrate`
   * Docker: `docker-compose run --rm -e SKIP_POST_DEPLOYMENT_MIGRATIONS=true web rails db:migrate`
2. Precompile the assets:
   * Non-Docker: `RAILS_ENV=production bundle exec rails assets:precompile`
   * Docker: The assets are already precompiled during the build step
3. Restart all Mastodon processes
4. Clear cache:
   * Non-Docker: `RAILS_ENV=production bin/tootctl cache clear`
   * Docker: `docker-compose run --rm web bin/tootctl cache clear`
5. Now that the new code is running, we can finish the database migrations. This will run the *post-deployment* ones:
   * Non-Docker: `RAILS_ENV=production bundle exec rails db:migrate`
   * Docker: `docker-compose run --rm web rails db:migrate`
6. Restart all Mastodon processes

## Translators

* Kristaps\_M (*Latvian*)
* Cyax (Cyaxares) (*Kurmanji (Kurdish)*)
* Sveinn í Felli (sveinki) (*Icelandic*)
* Kimmo Kujansuu (mrkujansuu) (*Finnish*)
* Jeong Arm (Kjwon15) (*Spanish, Japanese, Korean, Esperanto*)
* xatier (*Chinese Traditional, Chinese Traditional, Hong Kong*)
* Thai Localization (thl10n) (*Thai*)
* spla (*Catalan*)
* NCAA (*French, Danish*)
* Emanuel Pina (emanuelpina) (*Portuguese*)
* GunChleoc (*Scottish Gaelic*)
* Xosé M. (XoseM) (*Galician*)
* Hồ Nhất Duy (honhatduy) (*Vietnamese*)
* T. E. Kalaycı (tekrei) (*Turkish*)
* ケインツロ 👾 (KNTRO) (*Spanish, Argentina*)
* e (diveedd) (*Kurmanji (Kurdish)*)
* Jeff Huang (s8321414) (*Chinese Traditional*)
* Besnik\_b (*Albanian*)
* Nurul Azeera Hidayah @ Muhammad Nur Hidayat Yasuyoshi (MNH48.moe) (mnh48) (*Malay*)
* koyu (*German*)
* Ramdziana F Y (rafeyu) (*Indonesian*)
* calypsoopenmail (*French*)
* Alessandro Levati (Oct326) (*Italian*)
* Bran\_Ruz (*Breton*)
* Tigran (tigransimonyan) (*Armenian*)
* Allen Zhong (AstroProfundis) (*Chinese Simplified*)
* Daniele Lira Mereb (danilmereb) (*Portuguese, Brazilian*)
* Zoltán Gera (gerazo) (*Hungarian*)
* Martin (miles) (*Slovenian*)
* Gearguy (*Finnish*)
* Marek Ľach (mareklach) (*Slovak*)
* Eshagh (eshagh79) (*Persian*)
* Asier Iturralde Sarasola (aldatsa) (*Basque*)
* Takeçi (polygoat) (*French, Italian*)
* Roboron (*Spanish*)
* Ihor Hordiichuk (ihor\_ck) (*Ukrainian*)
* xpil (*Polish*)
* Tagomago (tagomago) (*Spanish*)
* Rojdayek (*Kurmanji (Kurdish)*)
* Ondřej Pokorný (unextro) (*Czech*)
* Kristoffer Grundström (Umeaboy) (*Swedish*)
* Alexander Sorokin (Brawaru) (*Portuguese, Russian, Vietnamese*)
* Joene (joenepraat) (*Dutch*)
* ButterflyOfFire (BoFFire) (*French, Arabic, Kabyle*)
* Balázs Meskó (mesko.balazs) (*Czech, Hungarian*)
* Catalina (catalina.st) (*Romanian*)
* Manuel Viens (manuelviens) (*French*)
* LNDDYL (*Chinese Traditional*)
* Danial Behzadi (danialbehzadi) (*Persian*)
* Vik (ViktorOn) (*Danish, Russian*)
* GCardo (*Portuguese, Brazilian*)
* enolp (*Asturian*)
* NadieAishi (*Spanish, Mexico*)
* Just Spanish (7\_7) (*Spanish, Mexico*)
* bilfri (*Danish*)
* VaiTon (*Italian*)
* Frontier Translation Ltd. (frontier-translation) (*Chinese Simplified*)
* Mastodon 中文译者 (mastodon-linguist) (*Chinese Simplified*)
* rondnunes (*Portuguese, Brazilian*)
* Edward Navarro (EdwardNavarro) (*Spanish*)
* ClearlyClaire (*French*)
* Kahina Mess (K\_hina) (*Kabyle*)
* GiorgioHerbie (*Italian*)
* ManeraKai (*Arabic*)
* හෙළබස (HelaBasa) (*Sinhala*)
* retiolus (*Catalan*)
* stan ionut (stanionut12) (*Romanian*)
* Filbert Salim (gamesbert6) (*Indonesian*)
* ahangarha (*Persian*)
* Rex\_sa (rex07) (*Arabic*)
* Sokratis Alichanidis (alichani) (*Greek*)
* axi (*Finnish*)
* Delta (Delta-Time) (*Japanese*)
* Ali Demirtaş (alidemirtas) (*Turkish*)
* Michael Zeevi (maze88) (*Hebrew*)
* SarfarazAhmed (*Urdu (Pakistan)*)
* Mo\_der Steven (SakuraPuare) (*Chinese Simplified*)
* Remito (remitocat) (*Japanese*)
* Maya Minatsuki (mayaeh) (*Japanese*)
* Врабац (Slovorad) (*Serbian (Cyrillic)*)
* Dženan (Dzenan) (*Swedish*)
* FreddyG (*Esperanto*)
* Alix Rossi (palindromordnilap) (*Corsican*)
* cruz2020 (*Portuguese*)
* Adrián Graña (alaris83) (*Spanish*)
* vpei (*Chinese Simplified*)
* Ryo (DrRyo) (*Korean*)
* AlexKoala (alexkoala) (*Korean*)
* 1Alino (*Slovak*)
* Michał Sidor (michcioperz) (*Polish*)
* Vedran Serbu (SerenoXGen) (*Croatian*)
* Yi-Jyun Pan (pan93412) (*Chinese Traditional*)
* Y.Yamashiro (uist1idrju3i) (*Japanese*)
* al\_.\_ (*German, Russian*)
* Matthías Páll Gissurarson (icetritlo) (*Icelandic*)
* KcKcZi (*Chinese Simplified*)
* xsml (*Chinese Simplified*)
* cybergene (cyber-gene) (*Japanese*)
* mynameismonkey (*Welsh*)
* Rikard Linde (rikardlinde) (*Swedish*)
* strubbl (*German*)
* 北䑓如法 (Nyoho) (*Japanese*)
* Hexandcube (hexandcube) (*Polish*)
* abidin toumi (Zet24) (*Arabic*)
* serapolis (*Japanese, Chinese Simplified, Chinese Traditional, Chinese Traditional, Hong Kong*)
* Diluns (*Occitan*)
* 游荡 (MamaShip) (*Chinese Simplified*)
* megaleo (*Portuguese, Brazilian*)
* arielcostas3 (*Galician*)
* sanser (*Russian*)
* Imre Kristoffer Eilertsen (DandelionSprout) (*Norwegian*)
* Yamagishi Kazutoshi (ykzts) (*Japanese, Vietnamese, Icelandic*)
* MODcraft (*Chinese Simplified*)
* Marcus Myge (mygg-priv) (*Norwegian*)
* Yuval Nehemia (yuvalne) (*Hebrew*)
* Amir Reza (ElAmir) (*Persian*)
* Percy (kecrily) (*Chinese Simplified*)
* Marek Ľach (marek-lach) (*Slovak*)
* Nemuj (Dentrado) (*Japanese, Esperanto*)
* revarioba (*Spanish*)
* Oymate (*Bengali*)
* Ifnuth (*German*)
* 森の子リスのミーコの大冒険 (Phroneris) (*Japanese*)
* Algustionesa Yoshi (algustionesa) (*Indonesian*)
* Artem Mikhalitsin (artemmikhalitsin) (*Russian*)
* gnu-ewm (*Polish*)
* Tatsuto "Laminne" Yamamoto (laminne) (*Japanese*)
* filippodb (*Italian*)
* Maciej Błędkowski (mble) (*Polish*)
* tunisiano187 (*French*)
* Timur Seber (seber) (*Tatar*)
* Mélanie Chauvel (ariasuni) (*French, Esperanto*)
* Jona (88wcJoWl) (*Spanish*)
* Ka2n (kaanmetu) (*Turkish*)
* atriix (*Swedish*)
* eorn (*Breton*)
* Lagash (lagash) (*Esperanto*)
* Chine Sebastien (chine.sebastien) (*French*)
* Exbu (*Dutch*)
* A A (sebastien.chine) (*French*)
* Goudarz Jafari (Goudarz) (*Persian*)
* Cirelli (cirelli94) (*Italian*)
* ギャラ (gyara) (*Chinese Simplified*)
* siamano (*Thai*)
* Siddharastro Doraku (sidharastro) (*Spanish, Mexico*)
* asnomgtu (*Hungarian*)
* Saederup92 (*Danish*)
* damascene (*Arabic*)
* dbeaver (*German*)
* Overflow Cat (OverflowCat) (*Chinese Simplified, Chinese Traditional*)
* rikrise (*Swedish*)
* zordsdavini (*Lithuanian*)
* ThonyVezbe (*Breton*)
* Slimane Selyan AMIRI (SelyanKab) (*Kabyle*)
* coxde (*Chinese Simplified*)
* Maxine B. Vågnes (vagnes) (*Norwegian, Norwegian Nynorsk*)
* tzium (*Sardinian*)
* Umi (mtrumi) (*Chinese Simplified, Chinese Traditional, Hong Kong*)
* Youngeon Lee (YoungeonLee) (*Korean*)
* Nikita Epifanov (Nikets) (*Russian*)
* DAI JIE (daijie) (*Chinese Simplified*)
* X.M (kimonoki) (*Chinese Simplified*)
* ZQYD (*Chinese Simplified*)
* v4vachan (*Malayalam*)
* boni777 (*Chinese Simplified*)
* Rhys Harrison (rhedders) (*Esperanto*)
* Stanisław Jelnicki (JelNiSlaw) (*Polish*)
* iVampireSP (*Chinese Simplified*)
* nua\_kr (*Korean*)
* SteinarK (*Norwegian Nynorsk*)
* Paula SIMON (EncoreEutIlFalluQueJeLeSusse) (*French*)
* CloudSet (*Chinese Simplified*)
* Adam Sapiński (Adamos9898) (*Polish*)
* Zlr- (cZeler) (*French*)
* papayaisnotafood (*Chinese Traditional*)
* Linnéa (lesbian\_subnet) (*Swedish*)
* Parodper (*Galician*)
* César Daniel Cavanzo Quintero (LeinadCQ) (*Esperanto*)
* Artem (Artem4ik) (*Russian*)
* EzigboOmenana (*Cornish*)
* Mt Front (mtfront) (*Chinese Simplified*)
* mkljczk (*Polish*)
* Lalo Tafolla (lalotafo) (*Spanish, Mexico*)
* Yassine Aït-El-Mouden (yaitelmouden) (*Standard Moroccan Tamazight*)
* frumble (*German*)
* ronee (*Kurmanji (Kurdish)*)
* lokalisoija (*Finnish*)
* Jason Gibson (barberpike606) (*Slovenian, Chinese Simplified*)
* María José Vera (mjverap) (*Spanish*)
* codl (*French*)
* Tangcuyu (*Chinese Simplified*)
* Lilian Nabati (Lilounab49) (*French*)
* Kaede (kaedech) (*Japanese*)
* mawoka-myblock (mawoka) (*German*)
* Mohd Bilal (mdb571) (*Malayalam*)
* Ragnars Eggerts (rmegg1933) (*Latvian*)
* thisdudeisvegan (braydofficial) (*German*)
* liffon (*Swedish*)
* Holger Huo (holgerhuo) (*Chinese Simplified*)
* Pukima (Pukimaa) (*German*)
* HSD Channel (kvdbve34) (*Russian*)
* pullopen (*Chinese Simplified*)
* hud5634j (*Spanish*)
* Patrice Boivin (patriceboivin58) (*French*)
* Jill H. (kokakiwi) (*French*)
* maksutheam (*Finnish*)
* majorblazr (*Danish*)
* 江尚寒 (jiangshanghan) (*Chinese Simplified*)
* Balázs Meskó (meskobalazs) (*Hungarian*)
* soheilkhanalipur (*Persian*)
* Vanege (*Esperanto*)

 Assets
2

 Loading

 👍
8
 YuzuRyo61, piotrek-k, onkoe, Mennaruuk, hackermare, HolgerHuo, ansuz, and deadblackclover reacted with thumbs up emoji
 🎉
14
 MagicLike, ykzts, gemmaro, Candinya, svercl, 0xfeeddeadbeef, danrobi11, onkoe, Mennaruuk, hackermare, and 4 more reacted with hooray emoji
 ❤️
5
 hackermare, HolgerHuo, DrSkyfaR, scrollyclic, and ansuz reacted with heart emoji
 🚀
4
 hackermare, HolgerHuo, ansuz, and Krusty27 reacted with rocket emoji

All reactions

* 👍
  8 reactions
* 🎉
  14 reactions
* ❤️
  5 reactions
* 🚀
  4 reactions

 20 people reacted

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_5d000b4f_20250114_223229.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmastodon%2Fmastodon%2Fpull%2F17909)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmastodon%2Fmastodon%2Fpull%2F17909)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=mastodon%2Fmastodon)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[mastodon](/mastodon)
/
**[mastodon](/mastodon/mastodon)**
Public

* [Notifications](/login?return_to=%2Fmastodon%2Fmastodon) You must be signed in to change notification settings
* [Fork
  7.1k](/login?return_to=%2Fmastodon%2Fmastodon)
* [Star
   47.5k](/login?return_to=%2Fmastodon%2Fmastodon)

* [Code](/mastodon/mastodon)
* [Issues
  3.8k](/mastodon/mastodon/issues)
* [Pull requests
  163](/mastodon/mastodon/pulls)
* [Discussions](/mastodon/mastodon/discussions)
* [Actions](/mastodon/mastodon/actions)
* [Projects
  1](/mastodon/mastodon/projects)
* [Security](/mastodon/mastodon/security)
* [Insights](/mastodon/mastodon/pulse)

Additional navigation options

* [Code](/mastodon/mastodon)
* [Issues](/mastodon/mastodon/issues)
* [Pull requests](/mastodon/mastodon/pulls)
* [Discussions](/mastodon/mastodon/discussions)
* [Actions](/mastodon/mastodon/actions)
* [Projects](/mastodon/mastodon/projects)
* [Security](/mastodon/mastodon/security)
* [Insights](/mastodon/mastodon/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fmastodon%2Fmastodon%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fmastodon%2Fmastodon%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Fix being able to bypass e-mail restrictions #17909

 Merged

[Gargron](/Gargron)
merged 1 commit into
[main](/mastodon/mastodon/tree/main "mastodon/mastodon:main")
from
[security-fix-email-validation-after-sign-up](/mastodon/mastodon/tree/security-fix-email-validation-after-sign-up "mastodon/mastodon:security-fix-email-validation-after-sign-up")

Mar 30, 2022

 Merged

# [Fix being able to bypass e-mail restrictions](#top) #17909

[Gargron](/Gargron)
merged 1 commit into
[main](/mastodon/mastodon/tree/main "mastodon/mastodon:main")
from
[security-fix-email-validation-after-sign-up](/mastodon/mastodon/tree/security-fix-email-validation-after-sign-up "mastodon/mastodon:security-fix-email-validation-after-sign-up")

Mar 30, 2022

[Conversation
0](/mastodon/mastodon/pull/17909)
[Commits
1](/mastodon/mastodon/pull/17909/commits)
[Checks
0](/mastodon/mastodon/pull/17909/checks)
[Files changed](/mastodon/mastodon/pull/17909/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![Gargron](https://avatars.githubusercontent.com/u/184731?s=60&v=4)](/Gargron)

Copy link

Member

### @Gargron **[Gargron](/Gargron)** commented [Mar 30, 2022](#issue-1186393940) • edited Loading

Ref: MASTODON-3E6KKDHT

Sorry, something went wrong.

All reactions

[![@Gargron](https://avatars.githubusercontent.com/u/184731?s=40&v=4)](/Gargron)

`[Fix being able to bypass e-mail restrictions](/mastodon/mastodon/pull/17909/commits/e5e60033221a2db9fa5ee4352379583124fe9f0e "Fix being able to bypass e-mail restrictions")`

`[e5e6003](/mastodon/mastodon/pull/17909/commits/e5e60033221a2db9fa5ee4352379583124fe9f0e)`

[![@Gargron](https://avatars.githubusercontent.com/u/184731?s=40&u=694b33b28755b5c5c0493eba976035ac75e7080a&v=4)](/Gargron)
[Gargron](/Gargron)
added
the
[security](/mastodon/mastodon/labels/security)
Security issues and fixes, vulnerabilities
label
[Mar 30, 2022](#event-6334738219)

[![ClearlyClaire](https://avatars.githubusercontent.com/u/384364?s=60&v=4)](/ClearlyClaire)

**[ClearlyClaire](/ClearlyClaire)**
approved these changes
[Mar 30, 2022](#pullrequestreview-926053181)

 [View reviewed changes](/mastodon/mastodon/pull/17909/files/e5e60033221a2db9fa5ee4352379583124fe9f0e)

[![@Gargron](https://avatars.githubusercontent.com/u/184731?s=40&u=694b33b28755b5c5c0493eba976035ac75e7080a&v=4)](/Gargron)
[Gargron](/Gargron)
merged commit [`5554ff2`](/mastodon/mastodon/commit/5554ff2a1d6f451d63d03f4eb0a740d8c91455de)
into
main

[Mar 30, 2022](https://github.com/mastodon/mastodon/pull/17909#event-6334816297)

 [![@Gargron](https://avatars.githubusercontent.com/u/184731?s=40&u=694b33b28755b5c5c0493eba976035ac75e7080a&v=4)](/Gargron)
[Gargron](/Gargron)
deleted the
security-fix-email-validation-after-sign-up

branch
[March 30, 2022 12:45](#event-6334816590)

[koba-lab](/koba-lab)
added a commit
to koba-lab/mastodon
that referenced
this pull request
[Apr 12, 2022](#ref-commit-c6c78bb)
[![@koba-lab](https://avatars.githubusercontent.com/u/4122650?s=40&v=4)](/koba-lab)

`[Merge commit '8c7223f4eac80b5725485be742d3fa2c984f4670' into to_3.5.0](/koba-lab/mastodon/commit/c6c78bbc05858e9397b3ab2c6a16c90e5ab4a467 "Merge commit '8c7223f4eac80b5725485be742d3fa2c984f4670' into to_3.5.0

* commit '8c7223f4eac80b5725485be742d3fa2c984f4670': (887 commits)
  Bump version to 3.5.0 (#17911)
  Fix being able to post URLs longer than 4096 characters (#17908)
  Fix being able to bypass e-mail restrictions (#17909)
  Revert \"Split build image actions (#17793)\" (#17907)
  Refactor `response_to_recipient?` CTE (#17899)
  Fix regression of status colors in actions modal in web UI (#17903)
  caniuse-lite: add hash sum (#17902)
  Bump rubocop from 1.26.0 to 1.26.1 (#17891)
  Bump capistrano from 3.16.0 to 3.17.0 (#17774)
  Bump concurrent-ruby from 1.1.9 to 1.1.10 (#17889)
  Bump babel-loader from 8.2.3 to 8.2.4 (#17894)
  Bump @testing-library/jest-dom from 5.16.2 to 5.16.3 (#17895)
  Bump prettier from 2.6.0 to 2.6.1 (#17893)
  Bump devise-two-factor from 4.0.1 to 4.0.2 (#17892)
  Bump yargs from 17.3.1 to 17.4.0 (#17834)
  New Crowdin updates (#17864)
  Fix /api/v1/admin/accounts (#17887)
  Split build image actions (#17793)
  Fix test-related issues (#17888)
  Add `SMTP_RETURN_PATH` environment variable to set bounce domain (#17886)
  ...

# Conflicts:
#	.circleci/config.yml
#	.github/CODEOWNERS
#	.github/workflows/build-image.yml
#	CHANGELOG.md
#	Dockerfile
#	Gemfile.lock
#	README.md
#	app/controllers/admin/statuses_controller.rb
#	app/controllers/auth/sessions_controller.rb
#	app/controllers/concerns/sign_in_token_authentication_concern.rb
#	app/controllers/concerns/two_factor_authentication_concern.rb
#	app/helpers/context_helper.rb
#	app/javascript/mastodon/features/directory/index.js
#	app/javascript/mastodon/features/followers/index.js
#	app/javascript/mastodon/features/following/index.js
#	app/javascript/mastodon/features/ui/components/video_modal.js
#	app/javascript/mastodon/features/ui/containers/modal_container.js
#	app/javascript/mastodon/features/ui/index.js
#	app/javascript/mastodon/locales/ja.json
#	app/javascript/mastodon/reducers/modal.js
#	app/lib/activitypub/activity/create.rb
#	app/lib/formatter.rb
#	app/models/account.rb
#	app/services/notify_service.rb
#	app/services/resolve_account_service.rb
#	app/validators/status_length_validator.rb
#	app/views/admin/dashboard/index.html.haml
#	app/views/admin/instances/_instance.html.haml
#	app/views/admin/reports/show.html.haml
#	app/views/admin/tags/_tag.html.haml
#	app/views/directories/index.html.haml
#	config/brakeman.ignore
#	config/initializers/twitter_regex.rb
#	db/schema.rb
#	docker-compose.yml
#	lib/mastodon/version.rb
#	lib/tasks/tests.rake
#	package.json
#	spec/controllers/activitypub/followers_synchronizations_controller_spec.rb
#	spec/controllers/api/v1/accounts/notes_controller_spec.rb
#	spec/controllers/follower_accounts_controller_spec.rb
#	spec/controllers/following_accounts_controller_spec.rb
#	spec/models/account_spec.rb
#	spec/models/status_spec.rb
#	spec/services/notify_service_spec.rb")`
…

`[c6c78bb](/koba-lab/mastodon/commit/c6c78bbc05858e9397b3ab2c6a16c90e5ab4a467)`

```
* commit '8c7223f4eac80b5725485be742d3fa2c984f4670': (887 commits)
  Bump version to 3.5.0 ([mastodon#17911](https://github.com/mastodon/mastodon/pull/17911))
  Fix being able to post URLs longer than 4096 characters ([mastodon#17908](https://github.com/mastodon/mastodon/pull/17908))
  Fix being able to bypass e-mail restrictions ([mastodon#17909](https://github.com/mastodon/mastodon/pull/17909))
  Revert "Split build image actions ([mastodon#17793](https://github.com/mastodon/mastodon/pull/17793))" ([mastodon#17907](https://github.com/mastodon/mastodon/pull/17907))
  Refactor `response_to_recipient?` CTE ([mastodon#17899](https://github.com/mastodon/mastodon/pull/17899))
  Fix regression of status colors in actions modal in web UI ([mastodon#17903](https://github.com/mastodon/mastodon/pull/17903))
  caniuse-lite: add hash sum ([mastodon#17902](https://github.com/mastodon/mastodon/pull/17902))
  Bump rubocop from 1.26.0 to 1.26.1 ([mastodon#17891](https://github.com/mastodon/mastodon/pull/17891))
  Bump capistrano from 3.16.0 to 3.17.0 ([mastodon#17774](https://github.com/mastodon/mastodon/pull/17774))
  Bump concurrent-ruby from 1.1.9 to 1.1.10 ([mastodon#17889](https://github.com/mastodon/mastodon/pull/17889))
  Bump babel-loader from 8.2.3 to 8.2.4 ([mastodon#17894](https://github.com/mastodon/mastodon/pull/17894))
  Bump @testing-library/jest-dom from 5.16.2 to 5.16.3 ([mastodon#17895](https://github.com/mastodon/mastodon/pull/17895))
  Bump prettier from 2.6.0 to 2.6.1 ([mastodon#17893](https://github.com/mastodon/mastodon/pull/17893))
  Bump devise-two-factor from 4.0.1 to 4.0.2 ([mastodon#17892](https://github.com/mastodon/mastodon/pull/17892))
  Bump yargs from 17.3.1 to 17.4.0 ([mastodon#17834](https://github.com/mastodon/mastodon/pull/17834))
  New Crowdin updates ([mastodon#17864](https://github.com/mastodon/mastodon/pull/17864))
  Fix /api/v1/admin/accounts ([mastodon#17887](https://github.com/mastodon/mastodon/pull/17887))
  Split build image actions ([mastodon#17793](https://github.com/mastodon/mastodon/pull/17793))
  Fix test-related issues ([mastodon#17888](https://github.com/mastodon/mastodon/pull/17888))
  Add `SMTP_RETURN_PATH` environment variable to set bounce domain ([mastodon#17886](https://github.com/mastodon/mastodon/pull/17886))
  ...

# Conflicts:
#	.circleci/config.yml
#	.github/CODEOWNERS
#	.github/workflows/build-image.yml
#	CHANGELOG.md
#	Dockerfile
#	Gemfile.lock
#	README.md
#	app/controllers/admin/statuses_controller.rb
#	app/controllers/auth/sessions_controller.rb
#	app/controllers/concerns/sign_in_token_authentication_concern.rb
#	app/controllers/concerns/two_factor_authentication_concern.rb
#	app/helpers/context_helper.rb
#	app/javascript/mastodon/features/directory/index.js
#	app/javascript/mastodon/features/followers/index.js
#	app/javascript/mastodon/features/following/index.js
#	app/javascript/mastodon/features/ui/components/video_modal.js
#	app/javascript/mastodon/features/ui/containers/modal_container.js
#	app/javascript/mastodon/features/ui/index.js
#	app/javascript/mastodon/locales/ja.json
#	app/javascript/mastodon/reducers/modal.js
#	app/lib/activitypub/activity/create.rb
#	app/lib/formatter.rb
#	app/models/account.rb
#	app/services/notify_service.rb
#	app/services/resolve_account_service.rb
#	app/validators/status_length_validator.rb
#	app/views/admin/dashboard/index.html.haml
#	app/views/admin/instances/_instance.html.haml
#	app/views/admin/reports/show.html.haml
#	app/views/admin/tags/_tag.html.haml
#	app/views/directories/index.html.haml
#	config/brakeman.ignore
#	config/initializers/twitter_regex.rb
#	db/schema.rb
#	docker-compose.yml
#	lib/mastodon/version.rb
#	lib/tasks/tests.rake
#	package.json
#	spec/controllers/activitypub/followers_synchronizations_controller_spec.rb
#	spec/controllers/api/v1/accounts/notes_controller_spec.rb
#	spec/controllers/follower_accounts_controller_spec.rb
#	spec/controllers/following_accounts_controller_spec.rb
#	spec/models/account_spec.rb
#	spec/models/status_spec.rb
#	spec/services/notify_service_spec.rb
```

[atsu1125](/atsu1125)
pushed a commit
to atsu1125/mastodon
that referenced
this pull request
[Aug 28, 2022](#ref-commit-5f5a809)
[![@Gargron](https://avatars.githubusercontent.com/u/184731?s=40&u=694b33b28755b5c5c0493eba976035ac75e7080a&v=4)](/Gargron) [![@atsu1125](https://avatars.githubusercontent.com/u/83960488?s=40&v=4)](/atsu1125)

`[Fix being able to bypass e-mail restrictions (](/atsu1125/mastodon/commit/5f5a809823c82dac770daa335511bdf610d84222 "Fix being able to bypass e-mail restrictions (#17909)")[mastodon#17909](https://github.com/mastodon/mastodon/pull/17909)[)](/atsu1125/mastodon/commit/5f5a809823c82dac770daa335511bdf610d84222 "Fix being able to bypass e-mail restrictions (#17909)")`

`[5f5a809](/atsu1125/mastodon/commit/5f5a809823c82dac770daa335511bdf610d84222)`

[![@ahox](https://avatars.githubusercontent.com/u/401132?s=40&v=4)](/ahox)
[ahox](/ahox)
mentioned this pull request
[Nov 25, 2022](#ref-pullrequest-1464122139)

[merge 3.5.3
petit-rabbits/mastodon#6](/petit-rabbits/mastodon/pull/6)
 Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fmastodon%2Fmastodon%2Fpull%2F17909)

Reviewers

[![@ClearlyClaire](https://avatars.githubusercontent.com/u/384364?s=40&v=4)](/ClearlyClaire) [ClearlyClaire](/ClearlyClaire)

ClearlyClaire approved these changes

Assignees

No one assigned

Labels

[security](/mastodon/mastodon/labels/security)
Security issues and fixes, vulnerabilities

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@Gargron](https://avatars.githubusercontent.com/u/184731?s=52&v=4)](/Gargron) [![@ClearlyClaire](https://avatars.githubusercontent.com/u/384364?s=52&v=4)](/ClearlyClaire)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


