=== Content from github.com_7f9b6e1d_20250115_093048.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitblit-org%2Fgitblit%2Freleases%2Ftag%2Fv1.9.3)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitblit-org%2Fgitblit%2Freleases%2Ftag%2Fv1.9.3)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=gitblit-org%2Fgitblit)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gitblit-org](/gitblit-org)
/
**[gitblit](/gitblit-org/gitblit)**
Public

* [Notifications](/login?return_to=%2Fgitblit-org%2Fgitblit) You must be signed in to change notification settings
* [Fork
  671](/login?return_to=%2Fgitblit-org%2Fgitblit)
* [Star
   2.3k](/login?return_to=%2Fgitblit-org%2Fgitblit)

* [Code](/gitblit-org/gitblit/tree/v1.9.3)
* [Issues
  235](/gitblit-org/gitblit/issues)
* [Pull requests
  14](/gitblit-org/gitblit/pulls)
* [Discussions](/gitblit-org/gitblit/discussions)
* [Actions](/gitblit-org/gitblit/actions)
* [Projects
  0](/gitblit-org/gitblit/projects)
* [Security](/gitblit-org/gitblit/security)
* [Insights](/gitblit-org/gitblit/pulse)

Additional navigation options

* [Code](/gitblit-org/gitblit/tree/v1.9.3)
* [Issues](/gitblit-org/gitblit/issues)
* [Pull requests](/gitblit-org/gitblit/pulls)
* [Discussions](/gitblit-org/gitblit/discussions)
* [Actions](/gitblit-org/gitblit/actions)
* [Projects](/gitblit-org/gitblit/projects)
* [Security](/gitblit-org/gitblit/security)
* [Insights](/gitblit-org/gitblit/pulse)

1. [Releases](/gitblit-org/gitblit/releases)
2. [v1.9.3](/gitblit-org/gitblit/releases/tag/v1.9.3)

# 1.9.3

[Latest](/gitblit-org/gitblit/releases/latest)

[Latest](/gitblit-org/gitblit/releases/latest)

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/gitblit-org/gitblit/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v1.9.3)

 Loading

[View all tags](/gitblit-org/gitblit/tags)

![@flaix](https://avatars.githubusercontent.com/u/2362065?s=40&v=4)
[flaix](/flaix)
released this
09 Apr 17:03

¬∑
[122 commits](/gitblit-org/gitblit/compare/v1.9.3...master)
to master
since this release

[v1.9.3](/gitblit-org/gitblit/tree/v1.9.3)

[`c5e49ef`](/gitblit-org/gitblit/commit/c5e49ef3ee60b28c3f1db0a41e37da50efc41033)

### Update Note

The 1.9 minor version is the last to support Java 7. From 1.10 on Gitblit will require Java 8.

---

!! IMPORTANT SECURITY FIX FOR CONFIG USER SERVICE !!

There is a security vulnerability in version 1.9.2, which allows an attacker to gain

elevated access rights. This is present when the Config User Service is used as the

user service, which is the default.

Version 1.9.2 introduced a new implementation to store user data in the user config file

which holds user name, password, access rights etc. This was done to solve problems with

very large user bases (PR [#1364](https://github.com/gitblit-org/gitblit/pull/1364)). This new implementation does not properly escape all

control characters, like newline and tab. As a result, a normal user, when logged into

Gitblit, can edit his profile data and enter values in e.g. the email address that are

interpreted as control characters in the text file stored on disk. This allows the malicious

user to give themselves e.g. elevated access rights on their account.

This is fixed in 1.9.3. Updates of existing installations should be made to 1.9.3, not 1.9.2.

Many thanks to Github user [@YYHYlh](https://github.com/YYHYlh) for finding and reporting this issue (issue [#1410](https://github.com/gitblit-org/gitblit/issues/1410)).

### *Security*

* Fix escaping control characters in config user service, resolving a security vulnerability. (issue [#1410](https://github.com/gitblit-org/gitblit/issues/1410))

[Full release notes on gitblit.com](http://gitblit.github.io/gitblit/releases.html#1.9.3)

### Contributors

* [![@YYHYlh](https://avatars.githubusercontent.com/u/28374935?s=64&v=4)](https://github.com/YYHYlh)

YYHYlh

 Assets
8

 Loading

 üëç
1
 TDesjardins reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

 1 person reacted

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_cb2d8066_20250115_093047.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitblit-org%2Fgitblit%2Fissues%2F1410)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitblit-org%2Fgitblit%2Fissues%2F1410)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=gitblit-org%2Fgitblit)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gitblit-org](/gitblit-org)
/
**[gitblit](/gitblit-org/gitblit)**
Public

* [Notifications](/login?return_to=%2Fgitblit-org%2Fgitblit) You must be signed in to change notification settings
* [Fork
  671](/login?return_to=%2Fgitblit-org%2Fgitblit)
* [Star
   2.3k](/login?return_to=%2Fgitblit-org%2Fgitblit)

* [Code](/gitblit-org/gitblit)
* [Issues
  235](/gitblit-org/gitblit/issues)
* [Pull requests
  14](/gitblit-org/gitblit/pulls)
* [Discussions](/gitblit-org/gitblit/discussions)
* [Actions](/gitblit-org/gitblit/actions)
* [Projects
  0](/gitblit-org/gitblit/projects)
* [Security](/gitblit-org/gitblit/security)
* [Insights](/gitblit-org/gitblit/pulse)

Additional navigation options

* [Code](/gitblit-org/gitblit)
* [Issues](/gitblit-org/gitblit/issues)
* [Pull requests](/gitblit-org/gitblit/pulls)
* [Discussions](/gitblit-org/gitblit/discussions)
* [Actions](/gitblit-org/gitblit/actions)
* [Projects](/gitblit-org/gitblit/projects)
* [Security](/gitblit-org/gitblit/security)
* [Insights](/gitblit-org/gitblit/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fgitblit-org%2Fgitblit%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fgitblit-org%2Fgitblit%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# A user privilege elevation vulnerability in the latest version of gitblit #1410

Closed

[YYHYlh](/YYHYlh) opened this issue
Feb 28, 2022
¬∑ 7 comments
 ¬∑ Fixed by [#1411](https://github.com/gitblit-org/gitblit/pull/1411)

Closed

# [A user privilege elevation vulnerability in the latest version of gitblit](#top) #1410

[YYHYlh](/YYHYlh) opened this issue
Feb 28, 2022
¬∑ 7 comments
 ¬∑ Fixed by [#1411](https://github.com/gitblit-org/gitblit/pull/1411)

Labels
[üê± Defect](/gitblit-org/gitblit/labels/%3Acat%3A%20Defect)
[Status-Done](/gitblit-org/gitblit/labels/Status-Done)

## Comments

[![@YYHYlh](https://avatars.githubusercontent.com/u/28374935?s=80&u=64b7dbc5e2dc964e4a17d4cd9d4be21f64d1f39f&v=4)](/YYHYlh)

Copy link

### **[YYHYlh](/YYHYlh)** commented [Feb 28, 2022](#issue-1153776331)

| Hello, I tried to contact the developers of your product but did not get a response, so I decided to raise the vulnerability to you in the issue, hoping that you can fix it as soon as possible to avoid a wider impact of the vulnerability. Principle of the vulnerability Gitblit uses file storage to manage user information, passwords, account types, and permissions. When a user with low privileges modifies their information, if they use line breaks and space characters, they can create new users or assign higher higher privileges. The relevant code logic is in the `write` function of `com.gitblit.ConfigUserService`. The reason for the problem is that gitblit does not do a checksum on the characters entered by the user, and malicious characters are printed directly in the file, causing gitblit to parse the file incorrectly when reading it. The location where users are saved is in data/users.conf. The default users.conf is as follows.  ``` [user "admin"] ¬† ¬† password = admin ¬† ¬† role = "#admin" ¬† ¬† role = "#notfederated"  ```  The user name is admin, the password is admin, and the user's permissions are admin permissions, and the file will change as the user logs in. After logging in once the file reads  ``` [user "admin"] ¬† ¬† accountType = LOCAL ¬† ¬† cookie = aad70b95ca5ffe59c88cd567b91999b263acb659 ¬† ¬† emailMeOnMyTicketChanges = true ¬† ¬† password = PBKDF2:$0$33c135e0e31a085587920e0981401bc34169cc1460a321d8f748969939383ce76c403eda5015281d2ff3b2203c5c2397154662b3219ba979476d9e7bc47c29f9 ¬† ¬† role = "#admin" ¬† ¬† role = "#notfederated"  ```  If there is a new user, a new user will be created below the user, and which will be accompanied by the user's emailAddress information, if the attacker in the modification of their own emailAddress, the emailAddress set to `xxx.@qq.com\n\trole = "#admin"\n[user "other"]`,you can modify the permissions of their own user to admin. Vulnerability recurrence  1. The attacker has an account with no privileges, username `test`, password `test1`, and privileges `None`, and the current users.conf is.  ``` [user "admin"] ¬† ¬† accountType = LOCAL ¬† ¬† cookie = aad70b95ca5ffe59c88cd567b91999b263acb659 ¬† ¬† emailMeOnMyTicketChanges = true ¬† ¬† password = PBKDF2:$0$33c135e0e31a085587920e0981401bc34169cc1460a321d8f748969939383ce76c403eda5015281d2ff3b2203c5c2397154662b3219ba979476d9e7bc47c29f9 ¬† ¬† role = "#admin" ¬† ¬† role = "#notfederated" [user "test"] ¬† ¬† accountType = LOCAL ¬† ¬† cookie = 513b0430e84cbccad003a3b8e5c614797a311e70 ¬† ¬† emailAddress = 111@qq.com ¬† ¬† emailMeOnMyTicketChanges = true ¬† ¬† password = PBKDF2:$0$ec5a6828b39c0ec958c7f70861b0bbc7aa3b74e45ebfe8a0ffc0689923b517e96a8d8039392631369b6cd2d6742771d582f0e4cb24c254cdbdc126c7ebcd88f4 ¬† ¬† role = "#none"  ```  2. After logging in, click on Profile->Preferences in order    [image](https://user-images.githubusercontent.com/28374935/155945915-f245666d-04a3-4a47-9226-2c2940a5a303.png)    Turn on burpsuite's blocking feature, click Save, and block the request with burpsuite. 3. In burpsuite, make changes to the request.    [image](https://user-images.githubusercontent.com/28374935/155945970-baeb454b-407c-4d15-ab0c-cf029d91935d.png)   Modify the value of emailAddress%3Atext to `111@qq.com\n\trole = "#admin"\n[user "other"]` after url encoding. The`[user "other"]`at the end of the payload is to avoid the impact of the original role = "#none". The encoding can be done using burpsuite's Decode function  [image](https://user-images.githubusercontent.com/28374935/155946034-f6537156-8580-4919-90dd-8b57f703676f.png)   4. After modifying the request body and sending the request, users.conf changes to the following state.    [image](https://user-images.githubusercontent.com/28374935/155946061-354043ee-16ca-4e0f-9019-64afb6076e92.png)   You can see that the test user has become admin privileges. Refreshing the page, at this point the test user has full access to gitblit, and can see all Git repositories and manage all users and teams  [image](https://user-images.githubusercontent.com/28374935/155946088-aa21dee7-f359-456e-a5dc-2d2a952cab84.png) |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=80&u=d98c69859fdf932b849bb316abd4305bc9b36600&v=4)](/flaix)

Copy link

Member

### **[flaix](/flaix)** commented [Mar 1, 2022](#issuecomment-1055731431)

| Excellent. Thank you. Just for me to know, what ways did you try to contact the developers that were unsuccessful? |
| --- |

All reactions

Sorry, something went wrong.

[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=40&u=d98c69859fdf932b849bb316abd4305bc9b36600&v=4)](/flaix)
[flaix](/flaix)
added
[üê± Defect](/gitblit-org/gitblit/labels/%3Acat%3A%20Defect)
[Priority-Critical](/gitblit-org/gitblit/labels/Priority-Critical)
[Status-New](/gitblit-org/gitblit/labels/Status-New)
labels
[Mar 1, 2022](#event-6164049997)

[![@YYHYlh](https://avatars.githubusercontent.com/u/28374935?s=80&u=64b7dbc5e2dc964e4a17d4cd9d4be21f64d1f39f&v=4)](/YYHYlh)

Copy link

Author

### **[YYHYlh](/YYHYlh)** commented [Mar 2, 2022](#issuecomment-1056477235)

| Excellent. Thank you. Just for me to know, what ways did you try to contact the developers that were unsuccessful?  I found some contacts on your official website and in the Github Readme at   * google group (not used by anyone for a long time) * Official Twitter (not used by anyone for a long time) * A private tweet @jamesmoger (recently updated), but his tweet doesn't allow private messages, so I left a message for his latest tweet, but haven't received a reply yet.   I think you guys could update your latest contact information, preferably using a private email for receiving some of the more private security questions. |
| --- |

All reactions

Sorry, something went wrong.

[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=40&u=d98c69859fdf932b849bb316abd4305bc9b36600&v=4)](/flaix)
[flaix](/flaix)
added
[Status-Started](/gitblit-org/gitblit/labels/Status-Started)
and removed
[Status-New](/gitblit-org/gitblit/labels/Status-New)
labels
[Mar 13, 2022](#event-6231390690)

[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=40&u=d98c69859fdf932b849bb316abd4305bc9b36600&v=4)](/flaix)
[flaix](/flaix)
linked a pull request
[Mar 13, 2022](#event-6231398856)
that will
close
this issue

[Fix vulnerability in config user service backend
#1411](/gitblit-org/gitblit/pull/1411)
 Merged

[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=80&u=d98c69859fdf932b849bb316abd4305bc9b36600&v=4)](/flaix)

Copy link

Member

### **[flaix](/flaix)** commented [Mar 13, 2022](#issuecomment-1066147235)

| [@YYHYlh](https://github.com/YYHYlh) , would you like to review and test the pull request before a release? |
| --- |

All reactions

Sorry, something went wrong.

[flaix](/flaix)
added a commit
to flaix/gitblit
that referenced
this issue
[Mar 13, 2022](#ref-commit-006bfdc)
[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=40&u=d98c69859fdf932b849bb316abd4305bc9b36600&v=4)](/flaix)

`[fix: Fix StoredUserConfig not escaping control characters](/flaix/gitblit/commit/006bfdce6386be20ef65cf4a2bc61a92197bb24c "fix: Fix StoredUserConfig not escaping control characters

The `StoredUserConfig` only escaped the escape character, i.e. backslash.
But it does not escape control characters like tab or newline. This
introduces a vulnerability where an attacker can create new entries
in their user account and create new accounts.
In addition, other characters are also not properly handled. Field values
with a comment character need to be quoted. This only happens for the
`#` character and only when the value starts with it. Also the quote
is note escaped in values.

This change completely rewrites the `escape` method of `StoredUserConfig`.
It takes care of properly escaping characters that need escaping for the
git configuration file format.

This fixes #1410")`
‚Ä¶

`[006bfdc](/flaix/gitblit/commit/006bfdce6386be20ef65cf4a2bc61a92197bb24c)`

```
The `StoredUserConfig` only escaped the escape character, i.e. backslash.
But it does not escape control characters like tab or newline. This
introduces a vulnerability where an attacker can create new entries
in their user account and create new accounts.
In addition, other characters are also not properly handled. Field values
with a comment character need to be quoted. This only happens for the
`#` character and only when the value starts with it. Also the quote
is note escaped in values.

This change completely rewrites the `escape` method of `StoredUserConfig`.
It takes care of properly escaping characters that need escaping for the
git configuration file format.

This fixes [gitblit-org#1410](https://github.com/gitblit-org/gitblit/issues/1410)
```

[![@YYHYlh](https://avatars.githubusercontent.com/u/28374935?s=80&u=64b7dbc5e2dc964e4a17d4cd9d4be21f64d1f39f&v=4)](/YYHYlh)

Copy link

Author

### **[YYHYlh](/YYHYlh)** commented [Mar 14, 2022](#issuecomment-1066453819)

| [@YYHYlh](https://github.com/YYHYlh) , would you like to review and test the pull request before a release?  I don't think it's needed anymore, because I'm not quite sure how the project compiles. But I can't inject into the config file anymore without using the characters you disabled, and I think that part of the code is already safe. I will test again when your new version is released |
| --- |

All reactions

Sorry, something went wrong.

[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=40&u=d98c69859fdf932b849bb316abd4305bc9b36600&v=4)](/flaix)
[flaix](/flaix)
closed this as [completed](/gitblit-org/gitblit/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
`[9b4afad](/gitblit-org/gitblit/commit/9b4afad6f4be212474809533ec2c280cce86501a)`
[Mar 14, 2022](#event-6238246621)

[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=80&u=d98c69859fdf932b849bb316abd4305bc9b36600&v=4)](/flaix)

Copy link

Member

### **[flaix](/flaix)** commented [Mar 14, 2022](#issuecomment-1067220738) ‚Ä¢ edited Loading

| I have merged the fix into the master branch, which means it will be built with the next nightly build. Should you happen to use Docker images, you can use the latest nightly Docker image to test the fix. Otherwise you could use the artefact attached to the last [nightly build](https://github.com/gitblit/gitblit/actions/runs/1984300115). |
| --- |

All reactions

Sorry, something went wrong.

[![@YYHYlh](https://avatars.githubusercontent.com/u/28374935?s=80&u=64b7dbc5e2dc964e4a17d4cd9d4be21f64d1f39f&v=4)](/YYHYlh)

Copy link

Author

### **[YYHYlh](/YYHYlh)** commented [Mar 24, 2022](#issuecomment-1076997938)

| I have merged the fix into the master branch, which means it will be built with the next nightly build. Should you happen to use Docker images, you can use the latest nightly Docker image to test the fix. Otherwise you could use the artefact attached to the last [nightly build](https://github.com/gitblit/gitblit/actions/runs/1984300115).  I think the patch has fixed the vulnerability successfully. I will contact you promptly if I find any new vulnerabilities after that. |
| --- |

All reactions

Sorry, something went wrong.

[![@DonnyDong2008](https://avatars.githubusercontent.com/u/106590712?s=80&u=071f734e6dd3bbc1a9ff5fe8ff04e424a9fac708&v=4)](/DonnyDong2008)

Copy link

### **[DonnyDong2008](/DonnyDong2008)** commented [Jul 20, 2022](#issuecomment-1189996131)

| I met an issue today when I was trying to login Gitblit 1.9.2 using a local admin account. It failed login and prompt me invalid user name or password. Then I used another windows domain account logged in which was granted admin privilege. Then I found that the user list is empty. I logged into the server where gitblit is installed, and found that the users.conf is empty. I don't know why. Just found some exception in log about failed to read users.conf. I just upgraded to 1.9.3 right now. Hope this issue will never happen again. Please refer to below log: 2022-07-20 14:35:58 [ERROR] Failed to read D:\Program Files\gitblit-1.9.2\data\users.conf org.eclipse.jgit.errors.ConfigInvalidException: Cannot read file D:\Program Files\gitblit-1.9.2\data\users.conf at org.eclipse.jgit.storage.file.FileBasedConfig.load(FileBasedConfig.java:194) at com.gitblit.ConfigUserService.read(ConfigUserService.java:885) at com.gitblit.ConfigUserService.getUserModel(ConfigUserService.java:190) |
| --- |

All reactions

Sorry, something went wrong.

[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=40&u=d98c69859fdf932b849bb316abd4305bc9b36600&v=4)](/flaix)
[flaix](/flaix)
added
[Status-Done](/gitblit-org/gitblit/labels/Status-Done)
and removed
[Priority-Critical](/gitblit-org/gitblit/labels/Priority-Critical)
[Status-Started](/gitblit-org/gitblit/labels/Status-Started)
labels
[Nov 12, 2022](#event-7796741439)

[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=40&u=d98c69859fdf932b849bb316abd4305bc9b36600&v=4)](/flaix)
[flaix](/flaix)
mentioned this issue
[Nov 23, 2022](#ref-issue-1461260432)

[possibly corruption of user db
flaix/gitblit#30](/flaix/gitblit/issues/30)

Open

[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=40&u=d98c69859fdf932b849bb316abd4305bc9b36600&v=4)](/flaix)
[flaix](/flaix)
mentioned this issue
[Jan 11, 2024](#ref-issue-2076334289)

[Possible corruption of user.conf
#1469](/gitblit-org/gitblit/issues/1469)

Open

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitblit-org%2Fgitblit%2Fissues%2F1410)

Assignees

No one assigned

Labels

[üê± Defect](/gitblit-org/gitblit/labels/%3Acat%3A%20Defect)
[Status-Done](/gitblit-org/gitblit/labels/Status-Done)

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [Fix vulnerability in config user service backend](/gitblit-org/gitblit/pull/1411)
 [gitblit-org/gitblit](/gitblit-org/gitblit)

3 participants

[![@flaix](https://avatars.githubusercontent.com/u/2362065?s=52&v=4)](/flaix) [![@YYHYlh](https://avatars.githubusercontent.com/u/28374935?s=52&v=4)](/YYHYlh) [![@DonnyDong2008](https://avatars.githubusercontent.com/u/106590712?s=52&v=4)](/DonnyDong2008)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


