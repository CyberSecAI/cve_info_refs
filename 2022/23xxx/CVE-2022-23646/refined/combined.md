=== Content from github.com_1376b373_20250114_181253.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=vercel%2Fnext.js)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vercel](/vercel)
/
**[next.js](/vercel/next.js)**
Public

* [Notifications](/login?return_to=%2Fvercel%2Fnext.js) You must be signed in to change notification settings
* [Fork
  27.4k](/login?return_to=%2Fvercel%2Fnext.js)
* [Star
   129k](/login?return_to=%2Fvercel%2Fnext.js)

* [Code](/vercel/next.js)
* [Issues
  3.1k](/vercel/next.js/issues)
* [Pull requests
  604](/vercel/next.js/pulls)
* [Discussions](/vercel/next.js/discussions)
* [Actions](/vercel/next.js/actions)
* [Security](/vercel/next.js/security)
* [Insights](/vercel/next.js/pulse)

Additional navigation options

* [Code](/vercel/next.js)
* [Issues](/vercel/next.js/issues)
* [Pull requests](/vercel/next.js/pulls)
* [Discussions](/vercel/next.js/discussions)
* [Actions](/vercel/next.js/actions)
* [Security](/vercel/next.js/security)
* [Insights](/vercel/next.js/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fvercel%2Fnext.js%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fvercel%2Fnext.js%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Update to leverage response-cache for image-optimizer #34075

 Merged

[styfle](/styfle)
merged 20 commits into
[vercel:canary](/vercel/next.js/tree/canary "vercel/next.js:canary")
from
[ijjk:update/leverage-response-cache](/ijjk/next.js/tree/update/leverage-response-cache "ijjk/next.js:update/leverage-response-cache")

Feb 8, 2022

 Merged

# [Update to leverage response-cache for image-optimizer](#top) #34075

[styfle](/styfle)
merged 20 commits into
[vercel:canary](/vercel/next.js/tree/canary "vercel/next.js:canary")
from
[ijjk:update/leverage-response-cache](/ijjk/next.js/tree/update/leverage-response-cache "ijjk/next.js:update/leverage-response-cache")

Feb 8, 2022

[Conversation
29](/vercel/next.js/pull/34075)
[Commits
20](/vercel/next.js/pull/34075/commits)
[Checks
0](/vercel/next.js/pull/34075/checks)
[Files changed](/vercel/next.js/pull/34075/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![ijjk](https://avatars.githubusercontent.com/u/22380829?s=60&v=4)](/ijjk)

Copy link

Member

### @ijjk **[ijjk](/ijjk)** commented [Feb 7, 2022](#issue-1126620418) ‚Ä¢ edited by styfle Loading

This updates to leverage our `response-cache` used for ISR for our `image-optimizer` as well.

* Follow up to [Add `stale-while-revalidate` pattern to Image Optimization API¬†#33735](https://github.com/vercel/next.js/pull/33735)
* Follow up to [Fix image cache race condition¬†#33883](https://github.com/vercel/next.js/pull/33883)
* Related to ["ENOENT: no such file or directory" - next.js crashes, related to image caching?¬†#33860](https://github.com/vercel/next.js/issues/33860)
* Related to [Image Optimization should use the stale-while-revalidate pattern¬†#27208](https://github.com/vercel/next.js/issues/27208)
* Closes [Improve throughput of stale image requests¬†#33930](https://github.com/vercel/next.js/pull/33930)

Sorry, something went wrong.

 üëç
4
 styfle, gu-stav, bonesoul, and gogocharli reacted with thumbs up emoji

All reactions

* üëç
  4 reactions

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk) [![@styfle](https://avatars.githubusercontent.com/u/229881?s=40&v=4)](/styfle)

`[Update to leverage response-cache for image-optimizer](/vercel/next.js/pull/34075/commits/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be "Update to leverage response-cache for image-optimizer

Co-authored-by: Steven <steven@ceriously.com>")`
 ‚Ä¶

`[d81a88b](/vercel/next.js/pull/34075/commits/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be)`

```
Co-authored-by: Steven <steven@ceriously.com>
```

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)
[ijjk](/ijjk)
added
[created-by: Next.js team](/vercel/next.js/labels/created-by%3A%20Next.js%20team)
PRs by the Next.js team.
[type: next](/vercel/next.js/labels/type%3A%20next)
labels
[Feb 7, 2022](#event-6023007383)

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 7, 2022](#pullrequestreview-875370462)

 [View reviewed changes](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be)

[packages/next/server/base-server.ts](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be#diff-2b8e3503c1bebf856610a5551d9c5996435b99f45db389d4eeac1b671518875e)
Outdated

Show resolved

Hide resolved

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 7, 2022](#pullrequestreview-875380075)

 [View reviewed changes](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be)

[packages/next/server/incremental-cache.ts](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be#diff-aaa872d6d11669ea197d0696981330f0e98185690946f335a08326f52a004401)

Show resolved

Hide resolved

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 7, 2022](#pullrequestreview-875380498)

 [View reviewed changes](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be)

[packages/next/server/next-server.ts](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be#diff-ea09101c272788873ce720075e4839f0254179af0a07259a107752cafb193949)
Outdated

Show resolved

Hide resolved

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 8, 2022](#pullrequestreview-875381140)

 [View reviewed changes](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be)

[packages/next/server/response-cache.ts](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be#diff-8a37414c87fd57ba569599997e14b886f252f36c3d039db45c22b9d55c4f55bb)
Outdated

Show resolved

Hide resolved

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 8, 2022](#pullrequestreview-875382484)

 [View reviewed changes](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be)

[packages/next/server/image-optimizer.ts](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be#diff-a3946331c576661316d56e5451a449433371bff26e53937d45f3efbb5b472c02)
Outdated

Show resolved

Hide resolved

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 8, 2022](#pullrequestreview-875389766)

 [View reviewed changes](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be)

[packages/next/server/image-optimizer.ts](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be#diff-a3946331c576661316d56e5451a449433371bff26e53937d45f3efbb5b472c02)
Outdated

Show resolved

Hide resolved

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 8, 2022](#pullrequestreview-875390502)

 [View reviewed changes](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be)

[packages/next/server/image-optimizer.ts](/vercel/next.js/pull/34075/files/d81a88b84b61b15ed7fcab94b58ae4b4b31e46be#diff-a3946331c576661316d56e5451a449433371bff26e53937d45f3efbb5b472c02)
Outdated

Show resolved

Hide resolved

 [ijjk](/ijjk)
added 4 commits
[February 7, 2022 18:34](#commits-pushed-2bafaa1)

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[Apply suggestions](/vercel/next.js/pull/34075/commits/2bafaa1320f45fcb5f3d6e606562c526395af55d "Apply suggestions")`

`[2bafaa1](/vercel/next.js/pull/34075/commits/2bafaa1320f45fcb5f3d6e606562c526395af55d)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[Fix skipLibCheck: false with incremental-cache](/vercel/next.js/pull/34075/commits/bb1aab4044a851b9525b770ea7089baf70366839 "Fix skipLibCheck: false with incremental-cache")`

`[bb1aab4](/vercel/next.js/pull/34075/commits/bb1aab4044a851b9525b770ea7089baf70366839)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[update types and fix fs import error](/vercel/next.js/pull/34075/commits/41075a5e58543bca2e841caaf870aa8200b8bfcd "update types and fix fs import error")`

`[41075a5](/vercel/next.js/pull/34075/commits/41075a5e58543bca2e841caaf870aa8200b8bfcd)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[Revert "Fix skipLibCheck: false with incremental-cache"](/vercel/next.js/pull/34075/commits/e8c858b11f1527097da65613fb6eb52df119a1d4 "Revert \"Fix skipLibCheck: false with incremental-cache\"

This reverts commit bb1aab4044a851b9525b770ea7089baf70366839.")`
 ‚Ä¶

`[e8c858b](/vercel/next.js/pull/34075/commits/e8c858b11f1527097da65613fb6eb52df119a1d4)`

```
This reverts commit [bb1aab4](https://github.com/ijjk/next.js/commit/bb1aab4044a851b9525b770ea7089baf70366839).
```

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=80&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)

### This comment has been minimized.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075)

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[fix require](/vercel/next.js/pull/34075/commits/492c9408e0fda17c9b5210a4987d66d5ba355b54 "fix require")`

`[492c940](/vercel/next.js/pull/34075/commits/492c9408e0fda17c9b5210a4987d66d5ba355b54)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=80&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)

### This comment has been minimized.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075)

 [ijjk](/ijjk)
added 3 commits
[February 7, 2022 21:53](#commits-pushed-38b8439)

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[update test](/vercel/next.js/pull/34075/commits/38b8439abfdabf150fd197ef50584e062f0cd506 "update test")`

`[38b8439](/vercel/next.js/pull/34075/commits/38b8439abfdabf150fd197ef50584e062f0cd506)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[Merge branch 'canary' into update/leverage-response-cache](/vercel/next.js/pull/34075/commits/e67384920fc1f3f52c1f6b0ba4ff58afc7a1fbb9 "Merge branch 'canary' into update/leverage-response-cache

# Conflicts:
#	packages/next/server/response-cache.ts")`
 ‚Ä¶

`[e673849](/vercel/next.js/pull/34075/commits/e67384920fc1f3f52c1f6b0ba4ff58afc7a1fbb9)`

```
# Conflicts:
#	packages/next/server/response-cache.ts
```

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[fix type error](/vercel/next.js/pull/34075/commits/ff5a125f6908013231f05a2f7714703550a320a4 "fix type error")`

`[ff5a125](/vercel/next.js/pull/34075/commits/ff5a125f6908013231f05a2f7714703550a320a4)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=80&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)

### This comment has been minimized.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075)

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 8, 2022](#pullrequestreview-876088120)

 [View reviewed changes](/vercel/next.js/pull/34075/files/ff5a125f6908013231f05a2f7714703550a320a4)

[packages/next/server/response-cache.ts](/vercel/next.js/pull/34075/files/ff5a125f6908013231f05a2f7714703550a320a4#diff-8a37414c87fd57ba569599997e14b886f252f36c3d039db45c22b9d55c4f55bb)
Outdated

Show resolved

Hide resolved

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 8, 2022](#pullrequestreview-876155940)

 [View reviewed changes](/vercel/next.js/pull/34075/files/ff5a125f6908013231f05a2f7714703550a320a4)

[packages/next/server/image-optimizer.ts](/vercel/next.js/pull/34075/files/ff5a125f6908013231f05a2f7714703550a320a4#diff-a3946331c576661316d56e5451a449433371bff26e53937d45f3efbb5b472c02)
Outdated

Show resolved

Hide resolved

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 8, 2022](#pullrequestreview-876159579)

 [View reviewed changes](/vercel/next.js/pull/34075/files/ff5a125f6908013231f05a2f7714703550a320a4)

[packages/next/server/next-server.ts](/vercel/next.js/pull/34075/files/ff5a125f6908013231f05a2f7714703550a320a4#diff-ea09101c272788873ce720075e4839f0254179af0a07259a107752cafb193949)
Outdated

Show resolved

Hide resolved

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 8, 2022](#pullrequestreview-876165487)

 [View reviewed changes](/vercel/next.js/pull/34075/files/ff5a125f6908013231f05a2f7714703550a320a4)

[packages/next/server/image-optimizer.ts](/vercel/next.js/pull/34075/files/ff5a125f6908013231f05a2f7714703550a320a4#diff-a3946331c576661316d56e5451a449433371bff26e53937d45f3efbb5b472c02)

Show resolved

Hide resolved

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
reviewed
[Feb 8, 2022](#pullrequestreview-876170561)

 [View reviewed changes](/vercel/next.js/pull/34075/files/ff5a125f6908013231f05a2f7714703550a320a4)

[packages/next/server/image-optimizer.ts](/vercel/next.js/pull/34075/files/ff5a125f6908013231f05a2f7714703550a320a4#diff-a3946331c576661316d56e5451a449433371bff26e53937d45f3efbb5b472c02)

Show resolved

Hide resolved

 [ijjk](/ijjk)
added 4 commits
[February 8, 2022 10:06](#commits-pushed-3a42d76)

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[Merge branch 'canary' into update/leverage-response-cache](/vercel/next.js/pull/34075/commits/3a42d76ac229066ea735012af5340893fd5cbf55 "Merge branch 'canary' into update/leverage-response-cache")`

`[3a42d76](/vercel/next.js/pull/34075/commits/3a42d76ac229066ea735012af5340893fd5cbf55)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[update util](/vercel/next.js/pull/34075/commits/a44187b3791fa91ac40f3a9b87485588d00d5c4e "update util")`

`[a44187b](/vercel/next.js/pull/34075/commits/a44187b3791fa91ac40f3a9b87485588d00d5c4e)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[apply suggestions](/vercel/next.js/pull/34075/commits/cfb06f1e79ff38d23480adbe198d1fce4d7733ce "apply suggestions")`

`[cfb06f1](/vercel/next.js/pull/34075/commits/cfb06f1e79ff38d23480adbe198d1fce4d7733ce)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[update types](/vercel/next.js/pull/34075/commits/494fe2ef7e5f93e1e5afe1e656c4e05d8554e0ee "update types")`

`[494fe2e](/vercel/next.js/pull/34075/commits/494fe2ef7e5f93e1e5afe1e656c4e05d8554e0ee)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=80&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)

### This comment has been minimized.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075)

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
previously approved these changes
[Feb 8, 2022](#pullrequestreview-876372946)

 [View reviewed changes](/vercel/next.js/pull/34075/files/494fe2ef7e5f93e1e5afe1e656c4e05d8554e0ee)

Copy link

Member

### @styfle **[styfle](/styfle)** left a comment ‚Ä¢ edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Looks perfect, thanks! ü•á

Sorry, something went wrong.

All reactions

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=80&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)

### This comment has been minimized.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075)

 [![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)
[ijjk](/ijjk)
marked this pull request as ready for review
[February 8, 2022 17:17](#event-6028541434)

 [![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)
[ijjk](/ijjk)
requested review from
[huozhi](/huozhi),
[shuding](/shuding) and
[timneutkens](/timneutkens)
as [code owners](/vercel/next.js/blob/66062722f1fcb67ee1fbeb3a43c252a24c3dc92c/.github/CODEOWNERS#L4)
[February 8, 2022 17:17](#event-6028541496)

 [ijjk](/ijjk)
added 2 commits
[February 8, 2022 11:28](#commits-pushed-91d9634)

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[update test](/vercel/next.js/pull/34075/commits/91d963429215d63628810d2af08a9d6c9d54c5af "update test")`

`[91d9634](/vercel/next.js/pull/34075/commits/91d963429215d63628810d2af08a9d6c9d54c5af)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[Merge branch 'canary' into update/leverage-response-cache](/vercel/next.js/pull/34075/commits/72e150fc315596a34d688c428fee8a971131c70d "Merge branch 'canary' into update/leverage-response-cache")`

`[72e150f](/vercel/next.js/pull/34075/commits/72e150fc315596a34d688c428fee8a971131c70d)`

 [![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)
[ijjk](/ijjk)
dismissed
[styfle](/styfle)‚Äôs [stale review](#pullrequestreview-876372946)
via
`[72e150f](/vercel/next.js/commit/72e150fc315596a34d688c428fee8a971131c70d)`
[February 8, 2022 17:28](#event-6028618387)

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=80&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)

### This comment has been minimized.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075)

 [ijjk](/ijjk)
added 2 commits
[February 8, 2022 12:45](#commits-pushed-96290dd)

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[add logs and move cache cleaning](/vercel/next.js/pull/34075/commits/96290ddc4e12780350c8f08b3f199d69a08ad87f "add logs and move cache cleaning")`

`[96290dd](/vercel/next.js/pull/34075/commits/96290ddc4e12780350c8f08b3f199d69a08ad87f)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[Merge branch 'canary' into update/leverage-response-cache](/vercel/next.js/pull/34075/commits/4823198adba18065d14ef7e2920380ebb19b57db "Merge branch 'canary' into update/leverage-response-cache")`

`[4823198](/vercel/next.js/pull/34075/commits/4823198adba18065d14ef7e2920380ebb19b57db)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=80&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)

### This comment has been minimized.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075)

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[refactor test suite](/vercel/next.js/pull/34075/commits/4cd09ca257d082944815210a642cdeff3f342327 "refactor test suite")`

`[4cd09ca](/vercel/next.js/pull/34075/commits/4cd09ca257d082944815210a642cdeff3f342327)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=80&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)

### This comment has been minimized.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075)

[![styfle](https://avatars.githubusercontent.com/u/229881?s=60&v=4)](/styfle)

**[styfle](/styfle)**
approved these changes
[Feb 8, 2022](#pullrequestreview-876703723)

 [View reviewed changes](/vercel/next.js/pull/34075/files/4cd09ca257d082944815210a642cdeff3f342327)

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[Merge branch 'canary' into update/leverage-response-cache](/vercel/next.js/pull/34075/commits/20879956ac39191bb9d1a6edeacc530f2ee2b885 "Merge branch 'canary' into update/leverage-response-cache")`

`[2087995](/vercel/next.js/pull/34075/commits/20879956ac39191bb9d1a6edeacc530f2ee2b885)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=80&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)

### This comment has been minimized.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075)

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)](/ijjk)

`[Merge branch 'canary' into update/leverage-response-cache](/vercel/next.js/pull/34075/commits/a75a538a709a4cf239f529a8919d3b5ee0cd036b "Merge branch 'canary' into update/leverage-response-cache")`

`[a75a538](/vercel/next.js/pull/34075/commits/a75a538a709a4cf239f529a8919d3b5ee0cd036b)`

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=80&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)

Copy link

Member

Author

### **[ijjk](/ijjk)** commented [Feb 8, 2022](#issuecomment-1033162470)

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Stats from current PR **Default Build** (Decrease detected ‚úì)  **General** Overall increase ‚ö†Ô∏è  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | buildDuration | 19.7s | 19.8s | ‚ö†Ô∏è +131ms | | buildDurationCached | 7.8s | 7.6s | -221ms | | nodeModulesSize | 359 MB | 359 MB | ‚ö†Ô∏è +8.4 kB |    **Page Load Tests** Overall decrease ‚ö†Ô∏è  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | / failed reqs | 0 | 0 | ‚úì | | / total time (seconds) | 4.325 | 4.328 | 0 | | / avg req/sec | 578.09 | 577.65 | ‚ö†Ô∏è -0.44 | | /error-in-render failed reqs | 0 | 0 | ‚úì | | /error-in-render total time (seconds) | 2.122 | 2.18 | ‚ö†Ô∏è +0.06 | | /error-in-render avg req/sec | 1178.21 | 1146.65 | ‚ö†Ô∏è -31.56 |    **Client Bundles (main, webpack, commons)**  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | 450.HASH.js gzip | 179 B | 179 B | ‚úì | | framework-HASH.js gzip | 42 kB | 42 kB | ‚úì | | main-HASH.js gzip | 27.5 kB | 27.5 kB | ‚úì | | webpack-HASH.js gzip | 1.44 kB | 1.44 kB | ‚úì | | Overall change | 71.2 kB | 71.2 kB | ‚úì |    **Legacy Client Bundles (polyfills)**  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | polyfills-HASH.js gzip | 31 kB | 31 kB | ‚úì | | Overall change | 31 kB | 31 kB | ‚úì |    **Client Pages**  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | \_app-HASH.js gzip | 1.36 kB | 1.36 kB | ‚úì | | \_error-HASH.js gzip | 194 B | 194 B | ‚úì | | amp-HASH.js gzip | 312 B | 312 B | ‚úì | | css-HASH.js gzip | 326 B | 326 B | ‚úì | | dynamic-HASH.js gzip | 2.57 kB | 2.57 kB | ‚úì | | head-HASH.js gzip | 350 B | 350 B | ‚úì | | hooks-HASH.js gzip | 919 B | 919 B | ‚úì | | image-HASH.js gzip | 5.01 kB | 5.01 kB | ‚úì | | index-HASH.js gzip | 263 B | 263 B | ‚úì | | link-HASH.js gzip | 2.26 kB | 2.26 kB | ‚úì | | routerDirect..HASH.js gzip | 321 B | 321 B | ‚úì | | script-HASH.js gzip | 383 B | 383 B | ‚úì | | withRouter-HASH.js gzip | 318 B | 318 B | ‚úì | | 85e02e95b279..7e3.css gzip | 107 B | 107 B | ‚úì | | Overall change | 14.7 kB | 14.7 kB | ‚úì |    **Client Build Manifests**  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | \_buildManifest.js gzip | 458 B | 458 B | ‚úì | | Overall change | 458 B | 458 B | ‚úì |    **Rendered Page Sizes**  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | index.html gzip | 531 B | 531 B | ‚úì | | link.html gzip | 544 B | 544 B | ‚úì | | withRouter.html gzip | 525 B | 525 B | ‚úì | | Overall change | 1.6 kB | 1.6 kB | ‚úì |     ---   **Default Build with SWC** (Increase detected ‚ö†Ô∏è)  **General** Overall increase ‚ö†Ô∏è  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | buildDuration | 24.4s | 24.9s | ‚ö†Ô∏è +407ms | | buildDurationCached | 7.6s | 7.6s | -30ms | | nodeModulesSize | 359 MB | 359 MB | ‚ö†Ô∏è +8.4 kB |    **Page Load Tests** Overall increase ‚úì  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | / failed reqs | 0 | 0 | ‚úì | | / total time (seconds) | 4.269 | 4.4 | ‚ö†Ô∏è +0.13 | | / avg req/sec | 585.67 | 568.2 | ‚ö†Ô∏è -17.47 | | /error-in-render failed reqs | 0 | 0 | ‚úì | | /error-in-render total time (seconds) | 2.168 | 2.114 | -0.05 | | /error-in-render avg req/sec | 1153.28 | 1182.65 | +29.37 |    **Client Bundles (main, webpack, commons)**  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | 450.HASH.js gzip | 179 B | 179 B | ‚úì | | framework-HASH.js gzip | 42.1 kB | 42.1 kB | ‚úì | | main-HASH.js gzip | 27.5 kB | 27.5 kB | ‚úì | | webpack-HASH.js gzip | 1.44 kB | 1.44 kB | ‚úì | | Overall change | 71.3 kB | 71.3 kB | ‚úì |    **Legacy Client Bundles (polyfills)**  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | polyfills-HASH.js gzip | 31 kB | 31 kB | ‚úì | | Overall change | 31 kB | 31 kB | ‚úì |    **Client Pages**  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | \_app-HASH.js gzip | 1.35 kB | 1.35 kB | ‚úì | | \_error-HASH.js gzip | 180 B | 180 B | ‚úì | | amp-HASH.js gzip | 305 B | 305 B | ‚úì | | css-HASH.js gzip | 321 B | 321 B | ‚úì | | dynamic-HASH.js gzip | 2.56 kB | 2.56 kB | ‚úì | | head-HASH.js gzip | 342 B | 342 B | ‚úì | | hooks-HASH.js gzip | 911 B | 911 B | ‚úì | | image-HASH.js gzip | 5.05 kB | 5.05 kB | ‚úì | | index-HASH.js gzip | 256 B | 256 B | ‚úì | | link-HASH.js gzip | 2.28 kB | 2.28 kB | ‚úì | | routerDirect..HASH.js gzip | 314 B | 314 B | ‚úì | | script-HASH.js gzip | 375 B | 375 B | ‚úì | | withRouter-HASH.js gzip | 309 B | 309 B | ‚úì | | 85e02e95b279..7e3.css gzip | 107 B | 107 B | ‚úì | | Overall change | 14.7 kB | 14.7 kB | ‚úì |    **Client Build Manifests**  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | \_buildManifest.js gzip | 459 B | 459 B | ‚úì | | Overall change | 459 B | 459 B | ‚úì |    **Rendered Page Sizes**  |  | vercel/next.js canary | ijjk/next.js update/leverage-response-cache | Change | | --- | --- | --- | --- | | index.html gzip | 533 B | 533 B | ‚úì | | link.html gzip | 548 B | 548 B | ‚úì | | withRouter.html gzip | 527 B | 527 B | ‚úì | | Overall change | 1.61 kB | 1.61 kB | ‚úì |     Commit: [a75a538](https://github.com/vercel/next.js/commit/a75a538a709a4cf239f529a8919d3b5ee0cd036b) |

All reactions

Sorry, something went wrong.

[![@styfle](https://avatars.githubusercontent.com/u/229881?s=40&u=58675cc3f9993517e5f29209ccba960d79b719ad&v=4)](/styfle)
[styfle](/styfle)
merged commit [`130f864`](/vercel/next.js/commit/130f8645a2db18527142a7764eaa5e649183cc74)
into
vercel:canary

[Feb 8, 2022](https://github.com/vercel/next.js/pull/34075#event-6030564478)

 [![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk)
[ijjk](/ijjk)
deleted the
update/leverage-response-cache

branch
[February 8, 2022 23:47](#event-6030566657)

[![@jakejarvis](https://avatars.githubusercontent.com/u/1703673?s=40&v=4)](/jakejarvis)
[jakejarvis](/jakejarvis)
mentioned this pull request
[Feb 9, 2022](#ref-issue-1128771433)

[`Error: Cannot find module './image-optimizer'` from serverless functions (12.0.11-canary.10)
#34134](/vercel/next.js/issues/34134)

Closed

[natew](/natew)
pushed a commit
to natew/next.js
that referenced
this pull request
[Feb 16, 2022](#ref-commit-0fcdeba)
[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&u=0d3d36a4bef923933ffa54c609191dbae9988642&v=4)](/ijjk) [![@styfle](https://avatars.githubusercontent.com/u/229881?s=40&u=58675cc3f9993517e5f29209ccba960d79b719ad&v=4)](/styfle) [![@natew](https://avatars.githubusercontent.com/u/12100?s=40&v=4)](/natew)

`[Update to leverage response-cache for image-optimizer (](/natew/next.js/commit/0fcdebaff7b806368a7c4ccf0ef8b475cb3a19b4 "Update to leverage response-cache for image-optimizer (#34075)

This updates to leverage our `response-cache` used for ISR for our `image-optimizer` as well.

Co-authored-by: Steven <steven@ceriously.com>")[vercel#34075](https://github.com/vercel/next.js/pull/34075)[)](/natew/next.js/commit/0fcdebaff7b806368a7c4ccf0ef8b475cb3a19b4 "Update to leverage response-cache for image-optimizer (#34075)

This updates to leverage our `response-cache` used for ISR for our `image-optimizer` as well.

Co-authored-by: Steven <steven@ceriously.com>")`
‚Ä¶

`[0fcdeba](/natew/next.js/commit/0fcdebaff7b806368a7c4ccf0ef8b475cb3a19b4)`

```
This updates to leverage our `response-cache` used for ISR for our `image-optimizer` as well.

Co-authored-by: Steven <steven@ceriously.com>
```

[![@styfle](https://avatars.githubusercontent.com/u/229881?s=40&u=58675cc3f9993517e5f29209ccba960d79b719ad&v=4)](/styfle)
[styfle](/styfle)
mentioned this pull request
[Feb 17, 2022](#ref-issue-1120566676)

["ENOENT: no such file or directory" - next.js crashes, related to image caching?
#33860](/vercel/next.js/issues/33860)

Closed

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
locked as **resolved** and limited conversation to collaborators
[Mar 11, 2022](#event-6221592763)

[Sign up for free](/join?source=comment-repo)
**to subscribe to this conversation on GitHub**.
Already have an account?
[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fpull%2F34075).

Reviewers

[![@styfle](https://avatars.githubusercontent.com/u/229881?s=40&v=4)](/styfle) [styfle](/styfle)

styfle approved these changes

[![@huozhi](https://avatars.githubusercontent.com/u/4800338?s=40&v=4)](/huozhi) [huozhi](/huozhi)

 Awaiting requested review from huozhi

[![@shuding](https://avatars.githubusercontent.com/u/3676859?s=40&v=4)](/shuding) [shuding](/shuding)

 Awaiting requested review from shuding

[![@timneutkens](https://avatars.githubusercontent.com/u/6324199?s=40&v=4)](/timneutkens) [timneutkens](/timneutkens)

 Awaiting requested review from timneutkens

Assignees

No one assigned

Labels

[created-by: Next.js team](/vercel/next.js/labels/created-by%3A%20Next.js%20team)
PRs by the Next.js team.
[type: next](/vercel/next.js/labels/type%3A%20next)

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=52&v=4)](/ijjk) [![@styfle](https://avatars.githubusercontent.com/u/229881?s=52&v=4)](/styfle)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_7f33e888_20250114_181254.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Freleases%2Ftag%2Fv12.1.0)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Freleases%2Ftag%2Fv12.1.0)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=vercel%2Fnext.js)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vercel](/vercel)
/
**[next.js](/vercel/next.js)**
Public

* [Notifications](/login?return_to=%2Fvercel%2Fnext.js) You must be signed in to change notification settings
* [Fork
  27.4k](/login?return_to=%2Fvercel%2Fnext.js)
* [Star
   129k](/login?return_to=%2Fvercel%2Fnext.js)

* [Code](/vercel/next.js/tree/v12.1.0)
* [Issues
  3.1k](/vercel/next.js/issues)
* [Pull requests
  604](/vercel/next.js/pulls)
* [Discussions](/vercel/next.js/discussions)
* [Actions](/vercel/next.js/actions)
* [Security](/vercel/next.js/security)
* [Insights](/vercel/next.js/pulse)

Additional navigation options

* [Code](/vercel/next.js/tree/v12.1.0)
* [Issues](/vercel/next.js/issues)
* [Pull requests](/vercel/next.js/pulls)
* [Discussions](/vercel/next.js/discussions)
* [Actions](/vercel/next.js/actions)
* [Security](/vercel/next.js/security)
* [Insights](/vercel/next.js/pulse)

1. [Releases](/vercel/next.js/releases)
2. [v12.1.0](/vercel/next.js/releases/tag/v12.1.0)

# v12.1.0

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/vercel/next.js/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v12.1.0)

 Loading

[View all tags](/vercel/next.js/tags)

![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=40&v=4)
[ijjk](/ijjk)
released this
17 Feb 16:21

¬∑
[16092 commits](/vercel/next.js/compare/v12.1.0...canary)
to canary
since this release

[v12.1.0](/vercel/next.js/tree/v12.1.0)

[`8545fd1`](/vercel/next.js/commit/8545fd1bb02244ced9e8dc9584a764aeae296cd0)

### Core Changes

* Relay Support in Rust Compiler: [#33702](https://github.com/vercel/next.js/pull/33702)
* fix eslint link-passhref rule: [#33857](https://github.com/vercel/next.js/pull/33857)
* update webpack: [#33831](https://github.com/vercel/next.js/pull/33831)
* Flush buffered vitals metrics on page mount: [#33867](https://github.com/vercel/next.js/pull/33867)
* fix problem with HMR when middleware and page reference the same node\_module: [#33873](https://github.com/vercel/next.js/pull/33873)
* Refactor page component getter in web server: [#33759](https://github.com/vercel/next.js/pull/33759)
* update NextResponse default redirect status to 307 to match docs: [#33505](https://github.com/vercel/next.js/pull/33505)
* Bug fix: dynamic page should not be interpreted as predefined page: [#33808](https://github.com/vercel/next.js/pull/33808)
* Group streaming experimental apis: [#33878](https://github.com/vercel/next.js/pull/33878)
* Encapsulate routing and initial hydration: [#33875](https://github.com/vercel/next.js/pull/33875)
* Optimize offline condition judgment: [#33238](https://github.com/vercel/next.js/pull/33238)
* Ensure external beforeFiles rewrites are handled with next/link: [#33888](https://github.com/vercel/next.js/pull/33888)
* Fix parsing params for i18n optional route in minimal mode: [#33896](https://github.com/vercel/next.js/pull/33896)
* Ensure browserslist extends works properly: [#33890](https://github.com/vercel/next.js/pull/33890)
* Fix image cache race condition: [#33883](https://github.com/vercel/next.js/pull/33883)
* Add support for Relay projects without `artifactDirectory`: [#33918](https://github.com/vercel/next.js/pull/33918)
* fix: handle jsxspreadattribute in inline-script-id eslint rule: [#32421](https://github.com/vercel/next.js/pull/32421)
* feat(next-swc): Update swc: [#33724](https://github.com/vercel/next.js/pull/33724)
* Update to latest version of amphtml-validator: [#33967](https://github.com/vercel/next.js/pull/33967)
* Warn in dev mode when script tags are added with next/head: [#33968](https://github.com/vercel/next.js/pull/33968)
* Ensure optional chaining in swc matches babel: [#33995](https://github.com/vercel/next.js/pull/33995)
* Use `react-dom/server.browser` in Node.js: [#33950](https://github.com/vercel/next.js/pull/33950)
* Ensure external middleware rewrite is handled correctly: [#33962](https://github.com/vercel/next.js/pull/33962)
* Update Terser to v5.10.0, fix minification issues: [#33045](https://github.com/vercel/next.js/pull/33045)
* Warn in dev mode when stylesheets are added using next/head: [#34004](https://github.com/vercel/next.js/pull/34004)
* Use `ReadableStream` in `RenderResult`: [#34005](https://github.com/vercel/next.js/pull/34005)
* Fix suffix ordering while streaming: [#34011](https://github.com/vercel/next.js/pull/34011)
* Don't use yarn if a package-lock.json file is found: [#31926](https://github.com/vercel/next.js/pull/31926)
* Do not warn when application/ld+json scripts are used with next/head: [#34021](https://github.com/vercel/next.js/pull/34021)
* Babel & next-swc: Fix exporting page config with AsExpression: [#32702](https://github.com/vercel/next.js/pull/32702)
* Detect per page runtime config for functions manifest: [#33945](https://github.com/vercel/next.js/pull/33945)
* Add JSDoc to config options: [#32915](https://github.com/vercel/next.js/pull/32915)
* Update font-stylesheet-gathering-plugin.ts: [#30709](https://github.com/vercel/next.js/pull/30709)
* Add decoratorMetadata flag if enabled by tsconfig: [#32914](https://github.com/vercel/next.js/pull/32914)
* fix: data url handling in css-loader: [#34034](https://github.com/vercel/next.js/pull/34034)
* Place 'charset' element at the top of : [#28119](https://github.com/vercel/next.js/pull/28119)
* Fix detection of anchor click events inside svg: [#23272](https://github.com/vercel/next.js/pull/23272)
* Allow passing nothing as custom jest config: [#32328](https://github.com/vercel/next.js/pull/32328)
* Fixes [#31240](https://github.com/vercel/next.js/issues/31240): Adding a recursive addPackagePath function in webpack-config: [#31264](https://github.com/vercel/next.js/pull/31264)
* Require component rendered as child of `Link` to pass event to `onClick` handler: [#27723](https://github.com/vercel/next.js/pull/27723)
* Allow scroll prevention on hash change: [#31921](https://github.com/vercel/next.js/pull/31921)
* Add support for async fn / promise in next.config.js/.mjs: [#33662](https://github.com/vercel/next.js/pull/33662)
* Fix `lazyRoot` functionality for `next/image`: [#33933](https://github.com/vercel/next.js/pull/33933)
* Change SWC minify from beta to release candidate: [#34056](https://github.com/vercel/next.js/pull/34056)
* Make `Router` state immutable: [#33925](https://github.com/vercel/next.js/pull/33925)
* Stop exposing internal `render` and `renderError` methods from `next/client`: [#34069](https://github.com/vercel/next.js/pull/34069)
* Add api-utils helper for testing: [#34078](https://github.com/vercel/next.js/pull/34078)
* feat(next-swc): Update swc: [#34045](https://github.com/vercel/next.js/pull/34045)
* Deprecate `concurrentFeatures` with `runtime`: [#34068](https://github.com/vercel/next.js/pull/34068)
* Add check for resolveWeak to next/dynamic: [#33908](https://github.com/vercel/next.js/pull/33908)
* remove unneeded and broken plugin: [#34087](https://github.com/vercel/next.js/pull/34087)
* Remove experimental warning from next/jest: [#34096](https://github.com/vercel/next.js/pull/34096)
* fix: arrow function export in rsc client component: [#34105](https://github.com/vercel/next.js/pull/34105)
* Use `renderToStream` with React 18: [#34106](https://github.com/vercel/next.js/pull/34106)
* Fix static result being piped: [#34111](https://github.com/vercel/next.js/pull/34111)
* Polyfill pipeTo and pipeThrough: [#34112](https://github.com/vercel/next.js/pull/34112)
* Update to leverage response-cache for image-optimizer: [#34075](https://github.com/vercel/next.js/pull/34075)
* fix: `next/image` usage from `node_modules`: [#33559](https://github.com/vercel/next.js/pull/33559)
* Fix included flight manifest on node runtime: [#34113](https://github.com/vercel/next.js/pull/34113)
* Fix: Use `react-dom/server.browser` when `reactRoot: true`: [#34116](https://github.com/vercel/next.js/pull/34116)
* Fix image-optimizer requires in next-server: [#34141](https://github.com/vercel/next.js/pull/34141)
* Fix required files matching in rsc: [#34137](https://github.com/vercel/next.js/pull/34137)
* Throw error when ts file contains css.resolve: [#34149](https://github.com/vercel/next.js/pull/34149)
* Chore/stable swc compiler options: [#34074](https://github.com/vercel/next.js/pull/34074)
* Fix bug with "Circular Structure" error: [#23905](https://github.com/vercel/next.js/pull/23905)
* Add \_document and \_app pre-import: [#23261](https://github.com/vercel/next.js/pull/23261)
* Ensure standalone server handles SIGTERM: [#34151](https://github.com/vercel/next.js/pull/34151)
* Bump nft to 0.17.5: [#34190](https://github.com/vercel/next.js/pull/34190)
* feat: copy `.env` file in standalone mode: [#34143](https://github.com/vercel/next.js/pull/34143)
* Fix reuse of inline flight response and 404 for RSC in node runtime: [#34202](https://github.com/vercel/next.js/pull/34202)
* Use updated recursive rm fs method for image-optimizer: [#34210](https://github.com/vercel/next.js/pull/34210)
* Fix link for "Delete Query Params in Middleware" error message in `next-server.ts`: [#34230](https://github.com/vercel/next.js/pull/34230)
* Enable dynamic HTML in minimal mode: [#34222](https://github.com/vercel/next.js/pull/34222)
* Fix uncaught error in getInitialProps when `runtime` is set to `nodejs`: [#34228](https://github.com/vercel/next.js/pull/34228)
* Optimize the web server size: [#34242](https://github.com/vercel/next.js/pull/34242)
* feat: allow `node-sass@7` as peer dependency: [#34107](https://github.com/vercel/next.js/pull/34107)
* Adding step to build the app with docker in existing projects: [#34083](https://github.com/vercel/next.js/pull/34083)
* Changed all occurrences of etc to match: [#34280](https://github.com/vercel/next.js/pull/34280)
* Align reactRoot config between server and webpack config: [#34328](https://github.com/vercel/next.js/pull/34328)
* Fix `<RouteAnnouncer/>` shouldn't announce initial path under strict mode and React 18: [#34338](https://github.com/vercel/next.js/pull/34338)
* Fix flight root failed to hydrate in strict mode: [#34333](https://github.com/vercel/next.js/pull/34333)
* Allow dismissing full refresh warning for session: [#33868](https://github.com/vercel/next.js/pull/33868)
* Remove experimental image optimization feature: [#34349](https://github.com/vercel/next.js/pull/34349)
* Add support for "type": "module" in package.json: [#33637](https://github.com/vercel/next.js/pull/33637)
* feat(next-swc): Update swc: [#34355](https://github.com/vercel/next.js/pull/34355)
* Ensure invalid request to static page is handled correctly: [#34346](https://github.com/vercel/next.js/pull/34346)
* Add Error Handing section for ISR: [#34360](https://github.com/vercel/next.js/pull/34360)
* feat(next-swc): Update swc: [#34408](https://github.com/vercel/next.js/pull/34408)
* feat: improve opening a new issue flow: [#34434](https://github.com/vercel/next.js/pull/34434)
* Ensure we don't poll page in development when notFound: true is returned: [#34352](https://github.com/vercel/next.js/pull/34352)
* Add image config for `dangerouslyAllowSVG` and `contentSecurityPolicy`: [#34431](https://github.com/vercel/next.js/pull/34431)
* Revert swc css bump temporarily: [#34440](https://github.com/vercel/next.js/pull/34440)
* update webpack: [#34444](https://github.com/vercel/next.js/pull/34444)
* Update server-only changes HMR handling: [#34298](https://github.com/vercel/next.js/pull/34298)
* Fix `.svg` image optimization with a `loader` prop: [#34452](https://github.com/vercel/next.js/pull/34452)
* Allow reading request bodies in middlewares: [#34294](https://github.com/vercel/next.js/pull/34294)
* Revert "Allow reading request bodies in middlewares": [#34479](https://github.com/vercel/next.js/pull/34479)
* update webpack: [#34477](https://github.com/vercel/next.js/pull/34477)
* Fix chunk buffering for server components: [#34474](https://github.com/vercel/next.js/pull/34474)
* Remove deprecation for relative URL usage in middlewares: [#34461](https://github.com/vercel/next.js/pull/34461)

### Documentation Changes

* Building web forms with Next.js and Vercel: [#32525](https://github.com/vercel/next.js/pull/32525)
* Add Clarity About Downloading and Self-Hosting a Font File: [#33760](https://github.com/vercel/next.js/pull/33760)
* Correct pluralization in newly added Relay documentation: [#33880](https://github.com/vercel/next.js/pull/33880)
* Update MDX document: [#33916](https://github.com/vercel/next.js/pull/33916)
* Update info on how to process webhooks by disabling bodyParser: [#33909](https://github.com/vercel/next.js/pull/33909)
* Update deployment docs to fix oversized image.: [#33934](https://github.com/vercel/next.js/pull/33934)
* docs: recommend `.end` instead of `.send` when no body is being sent: [#33611](https://github.com/vercel/next.js/pull/33611)
* Update custom document docs to prepare for React 18.: [#33814](https://github.com/vercel/next.js/pull/33814)
* Fix typo in new experimental Relay support docs: [#33963](https://github.com/vercel/next.js/pull/33963)
* docs(isr): add missing key prop in jsx loop: [#33984](https://github.com/vercel/next.js/pull/33984)
* docs: use function for components in general: [#33990](https://github.com/vercel/next.js/pull/33990)
* Updated going-to-production with loading performance: [#33179](https://github.com/vercel/next.js/pull/33179)
* docs: fix variable name from `profileData` to `data` in CSR page: [#34018](https://github.com/vercel/next.js/pull/34018)
* Improve Form Guide Contents: [#33913](https://github.com/vercel/next.js/pull/33913)
* Add `async` to middleware docs.: [#31356](https://github.com/vercel/next.js/pull/31356)
* (docs): update i18n-routing.md: [#33123](https://github.com/vercel/next.js/pull/33123)
* Fix redirect url for prefixing the default locale: [#33762](https://github.com/vercel/next.js/pull/33762)
* Add note about dns-prefetch as fallback: [#30385](https://github.com/vercel/next.js/pull/30385)
* Update custom server docs for async methods: [#30521](https://github.com/vercel/next.js/pull/30521)
* Update multiple docs pages to follow Docs Content style guide: [#33855](https://github.com/vercel/next.js/pull/33855)
* fix: Change `url` to `nextUrl` inside delete-query-params-in-middlewa‚Ä¶: [#33796](https://github.com/vercel/next.js/pull/33796)
* Changing GitHub Actions cache documentation: [#28228](https://github.com/vercel/next.js/pull/28228)
* [docs] Add env var load order: [#32350](https://github.com/vercel/next.js/pull/32350)
* docs: add Ory vercel example to auth page: [#33029](https://github.com/vercel/next.js/pull/33029)
* Add note about crawlers and `fallback: true`: [#34114](https://github.com/vercel/next.js/pull/34114)
* docs(api-routes): fix node docs links: [#34125](https://github.com/vercel/next.js/pull/34125)
* add note to clarify use of Link when clearing preview cookies (issue [#34129](https://github.com/vercel/next.js/issues/34129)): [#34142](https://github.com/vercel/next.js/pull/34142)
* Re-render details if rewrites are used: [#34049](https://github.com/vercel/next.js/pull/34049)
* Add heading to `invalid-api-status-body` error: [#34150](https://github.com/vercel/next.js/pull/34150)
* Ensure /index route is redirected correctly for docs: [#34206](https://github.com/vercel/next.js/pull/34206)
* Update docs for image `lazyRoot` prop: [#34241](https://github.com/vercel/next.js/pull/34241)
* Update link for includeFiles glob reference: [#34269](https://github.com/vercel/next.js/pull/34269)
* Update Preview Mode docs.: [#34278](https://github.com/vercel/next.js/pull/34278)
* Update frequently asked questions in documentation: [#34252](https://github.com/vercel/next.js/pull/34252)
* Alphabetize auth docs providers.: [#34281](https://github.com/vercel/next.js/pull/34281)
* Replace babel with SWC & minor changes in `getting started`: [#34282](https://github.com/vercel/next.js/pull/34282)
* Update Middleware docs to add version history.: [#34302](https://github.com/vercel/next.js/pull/34302)
* Fix typo on `getInitialProps`: [#34309](https://github.com/vercel/next.js/pull/34309)
* Update missing curly brace in image.md: [#34307](https://github.com/vercel/next.js/pull/34307)
* docs: Add link to pageExtensions config in page-without-valid-component.md: [#34285](https://github.com/vercel/next.js/pull/34285)
* Add an example to Write server-side code directly section: [#34319](https://github.com/vercel/next.js/pull/34319)
* Few touch-ups to the docs on web forms in Next: [#34286](https://github.com/vercel/next.js/pull/34286)
* Update MDX Custom Elements setup: [#34175](https://github.com/vercel/next.js/pull/34175)
* Update image.md: [#34374](https://github.com/vercel/next.js/pull/34374)
* Updated failed to load error page to include info about node versions: [#34362](https://github.com/vercel/next.js/pull/34362)
* docs: react 18, streaming SSR, rsc with new apis: [#33986](https://github.com/vercel/next.js/pull/33986)
* Update MDX Guide config example: [#34405](https://github.com/vercel/next.js/pull/34405)
* Remove hello world RSC example.: [#34456](https://github.com/vercel/next.js/pull/34456)
* Fix typo: [#34480](https://github.com/vercel/next.js/pull/34480)

### Example Changes

* Update npm comment in Docker example: [#33881](https://github.com/vercel/next.js/pull/33881)
* Update Contentful example to add validations to solve graphql complexity errors.: [#33958](https://github.com/vercel/next.js/pull/33958)
* Update all CMS examples dependencies.: [#33580](https://github.com/vercel/next.js/pull/33580)
* Fix warning unknown prettier option when running `yarn lint`.: [#34019](https://github.com/vercel/next.js/pull/34019)
* [New Example] with docker - multiple deployment environments: [#34015](https://github.com/vercel/next.js/pull/34015)
* Fix ambiguous flags in Dockerfile example: [#33417](https://github.com/vercel/next.js/pull/33417)
* fix(examples/with-docker): update env comments: [#29972](https://github.com/vercel/next.js/pull/29972)
* Remove unused "start" script from with-docker/package.json: [#31053](https://github.com/vercel/next.js/pull/31053)
* Update remark in blog-starter-typescript: [#31393](https://github.com/vercel/next.js/pull/31393)
* Update \_document.js: [#29930](https://github.com/vercel/next.js/pull/29930)
* Docs: use the nextv12 example from the storybook-addon-next repo as the with-storybook example: [#33891](https://github.com/vercel/next.js/pull/33891)
* examples, update with new URL: [#34035](https://github.com/vercel/next.js/pull/34035)
* [with-typescript-graphql] fixes breaking changes in graphql-let v0.18.0: [#32681](https://github.com/vercel/next.js/pull/32681)
* fix(example): with-typescript-graphql graphql-let package migrate: [#29996](https://github.com/vercel/next.js/pull/29996)
* feat: update firebase in with-firebase: [#29581](https://github.com/vercel/next.js/pull/29581)
* progressive web app example converted to typescript : [#33100](https://github.com/vercel/next.js/pull/33100)
* Make adjustment to cache config of with-apollo example: [#32733](https://github.com/vercel/next.js/pull/32733)
* Fix error thrown by `next/image` in the Sanity example: [#34203](https://github.com/vercel/next.js/pull/34203)
* Update examples/active-class-name: [#34205](https://github.com/vercel/next.js/pull/34205)
* chore(example): update preact links in examples: [#34233](https://github.com/vercel/next.js/pull/34233)
* fix: don't wrap `profile` in firebase example: [#34457](https://github.com/vercel/next.js/pull/34457)

### Misc Changes

* Fix flakey image-optimizer test: [#33957](https://github.com/vercel/next.js/pull/33957)
* Update azure config: [#33999](https://github.com/vercel/next.js/pull/33999)
* Add types to nextConfig in default template : [#34029](https://github.com/vercel/next.js/pull/34029)
* docs(contributing): Search GitHub for an open or closed PR that relates to your submission: [#22533](https://github.com/vercel/next.js/pull/22533)
* fix(create-next-app): add default version: [#33006](https://github.com/vercel/next.js/pull/33006)
* chore: do not run lock/stale actions on forks: [#34053](https://github.com/vercel/next.js/pull/34053)
* Fix functions manifest test: [#34092](https://github.com/vercel/next.js/pull/34092)
* add pnpm debug file in gitignore templates: [#34091](https://github.com/vercel/next.js/pull/34091)
* Update failing tests from upstream resource: [#34110](https://github.com/vercel/next.js/pull/34110)
* Update version number in next.config.js API reference
* chore: log lock bot output: [#34168](https://github.com/vercel/next.js/pull/34168)
* chore: decrease lock action runs [#34180](https://github.com/vercel/next.js/pull/34180)
* Allow listening for page requests in tests: [#34204](https://github.com/vercel/next.js/pull/34204)
* Update code of conduct from v1.4 to v2.1: [#34208](https://github.com/vercel/next.js/pull/34208)
* Update contributing.md to link to walkthrough video.: [#34299](https://github.com/vercel/next.js/pull/34299)
* fix: typo in gitignore in typescript template: [#34372](https://github.com/vercel/next.js/pull/34372)
* test: add inline flight response reuse test: [#34364](https://github.com/vercel/next.js/pull/34364)
* Update 2.example\_bug\_report.yml
* Update 1.bug\_report.yml
* Update 2.example\_bug\_report.yml
* Update font-optimization test snapshot: [#34478](https://github.com/vercel/next.js/pull/34478)

### Credits

Huge thanks to [@MaedahBatool](https://github.com/MaedahBatool), [@mutebg](https://github.com/mutebg), [@sokra](https://github.com/sokra), [@huozhi](https://github.com/huozhi), [@hanford](https://github.com/hanford), [@shuding](https://github.com/shuding), [@sean6bucks](https://github.com/sean6bucks), [@jameshfisher](https://github.com/jameshfisher), [@devknoll](https://github.com/devknoll), [@yuta-ike](https://github.com/yuta-ike), [@zh-lx](https://github.com/zh-lx), [@amandeepmittal](https://github.com/amandeepmittal), [@alunyov](https://github.com/alunyov), [@stefanprobst](https://github.com/stefanprobst), [@leerob](https://github.com/leerob), [@balazsorban44](https://github.com/balazsorban44), [@kdy1](https://github.com/kdy1), [@brittanyrw](https://github.com/brittanyrw), [@jord1e](https://github.com/jord1e), [@kara](https://github.com/kara), [@vvo](https://github.com/vvo), [@ismaelrumzan](https://github.com/ismaelrumzan), [@dlindenkreuz](https://github.com/dlindenkreuz), [@mohammadxali](https://github.com/mohammadxali), [@nguyenyou](https://github.com/nguyenyou), [@thibautsabot](https://github.com/thibautsabot), [@hanneslund](https://github.com/hanneslund), [@vertti](https://github.com/vertti), [@KateKate](https://github.com/KateKate), [@stefee](https://github.com/stefee), [@mikinovation](https://github.com/mikinovation), [@Leticijak](https://github.com/Leticijak), [@mohsen1](https://github.com/mohsen1), [@ncphillips](https://github.com/ncphillips), [@ehowey](https://github.com/ehowey), [@lancechentw](https://github.com/lancechentw), [@krychaxp](https://github.com/krychaxp), [@fmacherey](https://github.com/fmacherey), [@pklawansky](https://github.com/pklawansky), [@RyanClementsHax](https://github.com/RyanClementsHax), [@lakbychance](https://github.com/lakbychance), [@sannajammeh](https://github.com/sannajammeh), [@oliviertassinari](https://github.com/oliviertassinari), [@alexander-akait](https://github.com/alexander-akait), [@u-yas](https://github.com/u-yas), [@Cheprer](https://github.com/Cheprer), [@msp5382](https://github.com/msp5382), [@chrispat](https://github.com/chrispat), [@getspooky](https://github.com/getspooky), [@Ryz0nd](https://github.com/Ryz0nd), [@klaasman](https://github.com/klaasman), [@midgleyc](https://github.com/midgleyc), [@kumard3](https://github.com/kumard3), [@jesstelford](https://github.com/jesstelford), [@neeraj3029](https://github.com/neeraj3029), [@glenngijsberts](https://github.com/glenngijsberts), [@pie6k](https://github.com/pie6k), [@wouterraateland](https://github.com/wouterraateland), [@timneutkens](https://github.com/timneutkens), [@11koukou](https://github.com/11koukou), [@thesyedbasim](https://github.com/thesyedbasim), [@aeneasr](https://github.com/aeneasr), [@ijjk](https://github.com/ijjk), [@lfades](https://github.com/lfades), [@JuniorTour](https://github.com/JuniorTour), [@xavhan](https://github.com/xavhan), [@mattyocode](https://github.com/mattyocode), [@padmaia](https://github.com/padmaia), [@Skn0tt](https://github.com/Skn0tt), [@gwer](https://github.com/gwer), [@Nutlope](https://github.com/Nutlope), [@styfle](https://github.com/styfle), [@stipsan](https://github.com/stipsan), [@xhoantran](https://github.com/xhoantran), [@eolme](https://github.com/eolme), [@sespinosa](https://github.com/sespinosa), [@zenorocha](https://github.com/zenorocha), [@hjaber](https://github.com/hjaber), [@benmvp](https://github.com/benmvp), @T-O-R-U-S, [@dburrows](https://github.com/dburrows), [@atcastle](https://github.com/atcastle), [@kiriny](https://github.com/kiriny), [@molebox](https://github.com/molebox), [@kitayoshi](https://github.com/kitayoshi), and [@Schniz](https://github.com/Schniz) for helping!

### Contributors

* [![@dburrows](https://avatars.githubusercontent.com/u/44306?s=64&v=4)](https://github.com/dburrows)
* [![@stipsan](https://avatars.githubusercontent.com/u/81981?s=64&v=4)](https://github.com/stipsan)
* [![@klaasman](https://avatars.githubusercontent.com/u/85814?s=64&v=4)](https://github.com/klaasman)
* [![@alunyov](https://avatars.githubusercontent.com/u/102968?s=64&v=4)](https://github.com/alunyov)
* [![@vvo](https://avatars.githubusercontent.com/u/123822?s=64&v=4)](https://github.com/vvo)
* [![@jameshfisher](https://avatars.githubusercontent.com/u/166966?s=64&v=4)](https://github.com/jameshfisher)
* [![@chrispat](https://avatars.githubusercontent.com/u/185122?s=64&v=4)](https://github.com/chrispat)
* [![@ehowey](https://avatars.githubusercontent.com/u/204841?s=64&v=4)](https://github.com/ehowey)
* [![@styfle](https://avatars.githubusercontent.com/u/229881?s=64&v=4)](https://github.com/styfle)
* [![@zenorocha](https://avatars.githubusercontent.com/u/398893?s=64&v=4)](https://github.com/zenorocha)
* [![@ismaelrumzan](https://avatars.githubusercontent.com/u/481891?s=64&v=4)](https://github.com/ismaelrumzan)
* [![@dlindenkreuz](https://avatars.githubusercontent.com/u/509681?s=64&v=4)](https://github.com/dlindenkreuz)
* [![@mohsen1](https://avatars.githubusercontent.com/u/543633?s=64&v=4)](https://github.com/mohsen1)
* [![@vertti](https://avatars.githubusercontent.com/u/557751?s=64&v=4)](https://github.com/vertti)
* [![@jesstelford](https://avatars.githubusercontent.com/u/612020?s=64&v=4)](https://github.com/jesstelford)
* [![@ncphillips](https://avatars.githubusercontent.com/u/824015?s=64&v=4)](https://github.com/ncphillips)
* [![@KateKate](https://avatars.githubusercontent.com/u/1299766?s=64&v=4)](https://github.com/KateKate)
* [![@xavhan](https://avatars.githubusercontent.com/u/1308790?s=64&v=4)](https://github.com/xavhan)
* [![@sokra](https://avatars.githubusercontent.com/u/1365881?s=64&v=4)](https://github.com/sokra)
* [![@devknoll](https://avatars.githubusercontent.com/u/1477230?s=64&v=4)](https://github.com/devknoll)
* [![@lancechentw](https://avatars.githubusercontent.com/u/1587305?s=64&v=4)](https://github.com/lancechentw)
* [![@sespinosa](https://avatars.githubusercontent.com/u/1615514?s=64&v=4)](https://github.com/sespinosa)
* [![@kitayoshi](https://avatars.githubusercontent.com/u/1732164?s=64&v=4)](https://github.com/kitayoshi)
* [![@Cheprer](https://avatars.githubusercontent.com/u/1775217?s=64&v=4)](https://github.com/Cheprer)
* [![@Schniz](https://avatars.githubusercontent.com/u/2054772?s=64&v=4)](https://github.com/Schniz)
* [![@hanford](https://avatars.githubusercontent.com/u/2148168?s=64&v=4)](https://github.com/hanford)
* [![@padmaia](https://avatars.githubusercontent.com/u/2865858?s=64&v=4)](https://github.com/padmaia)
* [![@oliviertassinari](https://avatars.githubusercontent.com/u/3165635?s=64&v=4)](https://github.com/oliviertassinari)
* [![@aeneasr](https://avatars.githubusercontent.com/u/3372410?s=64&v=4)](https://github.com/aeneasr)
* [![@mutebg](https://avatars.githubusercontent.com/u/3543332?s=64&v=4)](https://github.com/mutebg)
* [![@shuding](https://avatars.githubusercontent.com/u/3676859?s=64&v=4)](https://github.com/shuding)
* [![@kara](https://avatars.githubusercontent.com/u/3871688?s=64&v=4)](https://github.com/kara)
* [![@lfades](https://avatars.githubusercontent.com/u/4278345?s=64&v=4)](https://github.com/lfades)
* [![@wouterraateland](https://avatars.githubusercontent.com/u/4398809?s=64&v=4)](https://github.com/wouterraateland)
* [![@alexander-akait](https://avatars.githubusercontent.com/u/4567934?s=64&v=4)](https://github.com/alexander-akait)
* [![@huozhi](https://avatars.githubusercontent.com/u/4800338?s=64&v=4)](https://github.com/huozhi)
* [![@benmvp](https://avatars.githubusercontent.com/u/5714478?s=64&v=4)](https://github.com/benmvp)
* [![@sean6bucks](https://avatars.githubusercontent.com/u/5891258?s=64&v=4)](https://github.com/sean6bucks)
* [![@timneutkens](https://avatars.githubusercontent.com/u/6324199?s=64&v=4)](https://github.com/timneutkens)
* [![@gwer](https://avatars.githubusercontent.com/u/6529684?s=64&v=4)](https://github.com/gwer)
* [![@pie6k](https://avatars.githubusercontent.com/u/7311462?s=64&v=4)](https://github.com/pie6k)
* [![@atcastle](https://avatars.githubusercontent.com/u/8526945?s=64&v=4)](https://github.com/atcastle)
* [![@leerob](https://avatars.githubusercontent.com/u/9113740?s=64&v=4)](https://github.com/leerob)
* [![@thibautsabot](https://avatars.githubusercontent.com/u/9283289?s=64&v=4)](https://github.com/thibautsabot)
* [![@amandeepmittal](https://avatars.githubusercontent.com/u/10234615?s=64&v=4)](https://github.com/amandeepmittal)
* [![@eolme](https://avatars.githubusercontent.com/u/11076888?s=64&v=4)](https://github.com/eolme)
* [![@MaedahBatool](https://avatars.githubusercontent.com/u/12712988?s=64&v=4)](https://github.com/MaedahBatool)
* [![@JuniorTour](https://avatars.githubusercontent.com/u/14243906?s=64&v=4)](https://github.com/JuniorTour)
* [![@glenngijsberts](https://avatars.githubusercontent.com/u/14276144?s=64&v=4)](https://github.com/glenngijsberts)
* [![@Skn0tt](https://avatars.githubusercontent.com/u/14912729?s=64&v=4)](https://github.com/Skn0tt)
* [![@stefee](https://avatars.githubusercontent.com/u/18026180?s=64&v=4)](https://github.com/stefee)
* [![@balazsorban44](https://avatars.githubusercontent.com/u/18369201?s=64&v=4)](https://github.com/balazsorban44)
* [![@kiriny](https://avatars.githubusercontent.com/u/18412771?s=64&v=4)](https://github.com/kiriny)
* [![@pklawansky](https://avatars.githubusercontent.com/u/19386600?s=64&v=4)](https://github.com/pklawansky)
* [![@stefanprobst](https://avatars.githubusercontent.com/u/20753323?s=64&v=4)](https://github.com/stefanprobst)
* [![@RyanClementsHax](https://avatars.githubusercontent.com/u/20916810?s=64&v=4)](https://github.com/RyanClementsHax)
* [![@ijjk](https://avatars.githubusercontent.com/u/22380829?s=64&v=4)](https://github.com/ijjk)
* [![@molebox](https://avatars.githubusercontent.com/u/22930449?s=64&v=4)](https://github.com/molebox)
* [![@brittanyrw](https://avatars.githubusercontent.com/u/23530405?s=64&v=4)](https://github.com/brittanyrw)
* [![@mahmoud-moursy](https://avatars.githubusercontent.com/u/23533781?s=64&v=4)](https://github.com/mahmoud-moursy)
* [![@hanneslund](https://avatars.githubusercontent.com/u/25056922?s=64&v=4)](https://github.com/hanneslund)
* [![@midgleyc](https://avatars.githubusercontent.com/u/25565697?s=64&v=4)](https://github.com/midgleyc)
* [![@lakbychance](https://avatars.githubusercontent.com/u/29139815?s=64&v=4)](https://github.com/lakbychance)
* [![@kdy1](https://avatars.githubusercontent.com/u/29931815?s=64&v=4)](https://github.com/kdy1)
* [![@jord1e](https://avatars.githubusercontent.com/u/30464310?s=64&v=4)](https://github.com/jord1e)
* [![@neeraj3029](https://avatars.githubusercontent.com/u/31539812?s=64&v=4)](https://github.com/neeraj3029)
* [![@mikinovation](https://avatars.githubusercontent.com/u/33025073?s=64&v=4)](https://github.com/mikinovation)
* [![@msp5382](https://avatars.githubusercontent.com/u/35285106?s=64&v=4)](https://github.com/msp5382)
* [![@getspooky](https://avatars.githubusercontent.com/u/37160072?s=64&v=4)](https://github.com/getspooky)
* [![@yuta-ike](https://avatars.githubusercontent.com/u/38308823?s=64&v=4)](https://github.com/yuta-ike)
* [![@nguyenyou](https://avatars.githubusercontent.com/u/38455472?s=64&v=4)](https://github.com/nguyenyou)
* [![@hjaber](https://avatars.githubusercontent.com/u/41503068?s=64&v=4)](https://github.com/hjaber)
* [![@sannajammeh](https://avatars.githubusercontent.com/u/50969683?s=64&v=4)](https://github.com/sannajammeh)
* [![@u-yas](https://avatars.githubusercontent.com/u/52757302?s=64&v=4)](https://github.com/u-yas)
* [![@Ryz0nd](https://avatars.githubusercontent.com/u/53689198?s=64&v=4)](https://github.com/Ryz0nd)
* [![@krychaxp](https://avatars.githubusercontent.com/u/55843050?s=64&v=4)](https://github.com/krychaxp)
* [![@kumard3](https://avatars.githubusercontent.com/u/62591080?s=64&v=4)](https://github.com/kumard3)
* [![@Nutlope](https://avatars.githubusercontent.com/u/63742054?s=64&v=4)](https://github.com/Nutlope)
* [![@mattyocode](https://avatars.githubusercontent.com/u/63904102?s=64&v=4)](https://github.com/mattyocode)
* [![@Leticijak](https://avatars.githubusercontent.com/u/65724560?s=64&v=4)](https://github.com/Leticijak)
* [![@mohammadxali](https://avatars.githubusercontent.com/u/67554982?s=64&v=4)](https://github.com/mohammadxali)
* [![@thesyedbasim](https://avatars.githubusercontent.com/u/69994239?s=64&v=4)](https://github.com/thesyedbasim)
* [![@fmacherey](https://avatars.githubusercontent.com/u/72257175?s=64&v=4)](https://github.com/fmacherey)
* [![@zh-lx](https://avatars.githubusercontent.com/u/73059627?s=64&v=4)](https://github.com/zh-lx)
* [![@xhoantran](https://avatars.githubusercontent.com/u/76760622?s=64&v=4)](https://github.com/xhoantran)
* [![@11koukou](https://avatars.githubusercontent.com/u/97431276?s=64&v=4)](https://github.com/11koukou)

dburrows, stipsan, and 84 other contributors

 Assets
2

 Loading

 üëç
42
 tronikelis, JuandaGarcia, Vahor, Brooooooklyn, luke-h1, VladSez, tmaxim-gpsw, taraskhvyl, theoludwig, IRediTOTO, and 32 more reacted with thumbs up emoji
 üéâ
27
 michael-wallace-bv, casperiv0, JuandaGarcia, balazsorban44, Brooooooklyn, luke-h1, jakst, VladSez, IRediTOTO, mmaaaaz, and 17 more reacted with hooray emoji
 ‚ù§Ô∏è
23
 JuandaGarcia, Brooooooklyn, VladSez, IRediTOTO, mmaaaaz, mattcasey, yassinebridi, Nases, nag, Ashenbacken, and 13 more reacted with heart emoji
 üöÄ
25
 bennettdams, JuandaGarcia, balazsorban44, Brooooooklyn, VladSez, luke-h1, taraskhvyl, KInGATiLLa, IRediTOTO, mattcasey, and 15 more reacted with rocket emoji

All reactions

* üëç
  42 reactions
* üéâ
  27 reactions
* ‚ù§Ô∏è
  23 reactions
* üöÄ
  25 reactions

 62 people reacted

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_5189710f_20250114_181255.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fsecurity%2Fadvisories%2FGHSA-fmvm-x8mv-47mj)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fsecurity%2Fadvisories%2FGHSA-fmvm-x8mv-47mj)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=vercel%2Fnext.js)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vercel](/vercel)
/
**[next.js](/vercel/next.js)**
Public

* [Notifications](/login?return_to=%2Fvercel%2Fnext.js) You must be signed in to change notification settings
* [Fork
  27.4k](/login?return_to=%2Fvercel%2Fnext.js)
* [Star
   129k](/login?return_to=%2Fvercel%2Fnext.js)

* [Code](/vercel/next.js)
* [Issues
  3.1k](/vercel/next.js/issues)
* [Pull requests
  604](/vercel/next.js/pulls)
* [Discussions](/vercel/next.js/discussions)
* [Actions](/vercel/next.js/actions)
* [Security](/vercel/next.js/security)
* [Insights](/vercel/next.js/pulse)

Additional navigation options

* [Code](/vercel/next.js)
* [Issues](/vercel/next.js/issues)
* [Pull requests](/vercel/next.js/pulls)
* [Discussions](/vercel/next.js/discussions)
* [Actions](/vercel/next.js/actions)
* [Security](/vercel/next.js/security)
* [Insights](/vercel/next.js/pulse)

# Improper CSP in Image Optimization API for Next.js versions between 10.0.0 and 12.0.10

Moderate

[styfle](/styfle)
published
GHSA-fmvm-x8mv-47mj
Feb 17, 2022

## Package

npm

next
([npm](/advisories?query=ecosystem%3Anpm))

## Affected versions

10.0.0 <= 12.0.10

## Patched versions

12.1.0

## Description

### Impact

* **Affected**: All of the following must be true to be affected
  + Next.js between version 10.0.0 and 12.0.10
  + The `next.config.js` file has [images.domains](https://nextjs.org/docs/api-reference/next/image#domains) array assigned
  + The image host assigned in [images.domains](https://nextjs.org/docs/api-reference/next/image#domains) allows user-provided SVG
* **Not affected**: The `next.config.js` file has [images.loader](https://nextjs.org/docs/api-reference/next/image#loader-configuration) assigned to something other than default

### Patches

[Next.js 12.1.0](https://github.com/vercel/next.js/releases/tag/v12.1.0)

### Workarounds

Change `next.config.js` to use a different [loader configuration](https://nextjs.org/docs/api-reference/next/image#loader-configuration) other than the default, for example:

```
module.exports = {
  images: {
    loader: 'imgix',
    path: 'https://example.com/myaccount/',
  },
}
```

Or if you want to use the [`loader`](https://nextjs.org/docs/api-reference/next/image#loader) prop on the component, you can use `custom`:

```
module.exports = {
  images: {
    loader: 'custom',
  },
}
```

### Severity

Moderate

### CVE ID

CVE-2022-23646

### Weaknesses

[CWE-451](/advisories?query=cwe%3A451)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


