=== Content from github.com_a9731d3a_20250115_114155.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flibarchive%2Flibarchive%2Fcommit%2Ffd180c36036df7181a64931264732a10ad8cd024)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flibarchive%2Flibarchive%2Fcommit%2Ffd180c36036df7181a64931264732a10ad8cd024)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=libarchive%2Flibarchive)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[libarchive](/libarchive)
/
**[libarchive](/libarchive/libarchive)**
Public

* [Notifications](/login?return_to=%2Flibarchive%2Flibarchive) You must be signed in to change notification settings
* [Fork
  776](/login?return_to=%2Flibarchive%2Flibarchive)
* [Star
   3.1k](/login?return_to=%2Flibarchive%2Flibarchive)

* [Code](/libarchive/libarchive)
* [Issues
  450](/libarchive/libarchive/issues)
* [Pull requests
  35](/libarchive/libarchive/pulls)
* [Actions](/libarchive/libarchive/actions)
* [Projects
  0](/libarchive/libarchive/projects)
* [Wiki](/libarchive/libarchive/wiki)
* [Security](/libarchive/libarchive/security)
* [Insights](/libarchive/libarchive/pulse)

Additional navigation options

* [Code](/libarchive/libarchive)
* [Issues](/libarchive/libarchive/issues)
* [Pull requests](/libarchive/libarchive/pulls)
* [Actions](/libarchive/libarchive/actions)
* [Projects](/libarchive/libarchive/projects)
* [Wiki](/libarchive/libarchive/wiki)
* [Security](/libarchive/libarchive/security)
* [Insights](/libarchive/libarchive/pulse)

## Commit

[Permalink](/libarchive/libarchive/commit/fd180c36036df7181a64931264732a10ad8cd024)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#1759](https://github.com/libarchive/libarchive/pull/1759) from obiwac/fix-1754

[Browse files](/libarchive/libarchive/tree/fd180c36036df7181a64931264732a10ad8cd024)
Browse the repository at this point in the history

```
libarchive: Handle a `calloc` returning NULL (fixes [#1754](https://github.com/libarchive/libarchive/issues/1754))
```

* Loading branch information

[![@kientzle](https://avatars.githubusercontent.com/u/1398793?s=40&v=4)](/kientzle)

[kientzle](/libarchive/libarchive/commits?author=kientzle "View all commits by kientzle")
authored
Jul 24, 2022

2 parents
[1385cd9](/libarchive/libarchive/commit/1385cd9c5126d9b681b7396ad2f353779ad143ba)
+
[bff38ef](/libarchive/libarchive/commit/bff38efe8c110469c5080d387bec62a6ca15b1a5)

commit fd180c3

Showing
**1 changed file**
with
**8 additions**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

8 changes: 8 additions & 0 deletions

8
[libarchive/archive\_write.c](#diff-2e12fca029e4fa971ec0bba1b2469b1723755fd174c9301760d27cb44c355466 "libarchive/archive_write.c")

Show comments

[View file](/libarchive/libarchive/blob/fd180c36036df7181a64931264732a10ad8cd024/libarchive/archive_write.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -201,6 +201,10 @@ \_\_archive\_write\_allocate\_filter(struct archive \*\_a) |
|  |  | struct archive\_write\_filter \*f; |
|  |  |  |
|  |  | f = calloc(1, sizeof(\*f)); |
|  |  |  |
|  |  | if (f == NULL) |
|  |  | return (NULL); |
|  |  |  |
|  |  | f->archive = \_a; |
|  |  | f->state = ARCHIVE\_WRITE\_FILTER\_STATE\_NEW; |
|  |  | if (a->filter\_first == NULL) |
| Expand Down  Expand Up | | @@ -548,6 +552,10 @@ archive\_write\_open2(struct archive \*\_a, void \*client\_data, |
|  |  | a->client\_data = client\_data; |
|  |  |  |
|  |  | client\_filter = \_\_archive\_write\_allocate\_filter(\_a); |
|  |  |  |
|  |  | if (client\_filter == NULL) |
|  |  | return (ARCHIVE\_FATAL); |
|  |  |  |
|  |  | client\_filter->open = archive\_write\_client\_open; |
|  |  | client\_filter->write = archive\_write\_client\_write; |
|  |  | client\_filter->close = archive\_write\_client\_close; |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 1 comment on commit `fd180c3`

[![@ljavorsk](https://avatars.githubusercontent.com/u/52954689?s=80&v=4)](/ljavorsk)

Copy link

Contributor

### @ljavorsk **[ljavorsk](/ljavorsk)** commented on `[fd180c3](/libarchive/libarchive/commit/fd180c36036df7181a64931264732a10ad8cd024)` [Nov 23, 2022](#commitcomment-90856639)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Is this going to resolve in the new release (3.6.2)?

I'm asking to know if we should wait for the release or if we should backport just the patch.

Sorry, something went wrong.

All reactions

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flibarchive%2Flibarchive%2Fcommit%2Ffd180c36036df7181a64931264732a10ad8cd024) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from lists.fedoraproject.org_2f2181ae_20250114_191518.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/V67OO2UUQAUJS3IK4JZPF6F3LUCBU6IS/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/V67OO2UUQAUJS3IK4JZPF6F3LUCBU6IS/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/V67OO2UUQAUJS3IK4JZPF6F3LUCBU6IS/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/V67OO2UUQAUJS3IK4JZPF6F3LUCBU6IS/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-V67OO2UUQAUJS3IK4JZPF6F3LUCBU6IS.mbox.gz?message=V67OO2UUQAUJS3IK4JZPF6F3LUCBU6IS "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/V67OO2UUQAUJS3IK4JZPF6F3LUCBU6IS/#V67OO2UUQAUJS3IK4JZPF6F3LUCBU6IS)

# [SECURITY] Fedora 37 Update: libarchive-3.6.1-3.fc37

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

18 Dec
2022

18 Dec
'22

8:16 p.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2022-e15be0091f
2022-12-19 01:14:07.970062
--------------------------------------------------------------------------------

Name : libarchive
Product : Fedora 37
Version : 3.6.1
Release : 3.fc37
URL : <https://www.libarchive.org/>
Summary : A library for handling streaming archive formats
Description :
Libarchive is a programming library that can create and read several different
streaming archive formats, including most popular tar variants, several cpio
formats, and both BSD and GNU ar variants. It can also write shar archives and
read ISO9660 CDROM images and ZIP archives.

--------------------------------------------------------------------------------
Update Information:

Fix for CVE-2022-36227
--------------------------------------------------------------------------------
ChangeLog:

\* Fri Dec 2 2022 Lukas Javorsky ljavorsk@redhat.com - 3.6.1-3
- Resolves: CVE-2022-36227
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #2144974 - CVE-2022-36227 libarchive: Null pointer dereference in archive\_write.c [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2144974>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2022-e15be0091f' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/V67OO2UUQAUJS3IK4JZPF6F3LUCBU6IS/#V67OO2UUQAUJS3IK4JZPF6F3LUCBU6IS)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from bugs.gentoo.org_5542559a_20250115_114154.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 882521
<app-arch/libarchive-3.6.1-r1: null pointer dereference
Last modified: 2023-09-29 13:40:49 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=882521&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=882521&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 882521**](show_bug.cgi?id=882521)
(CVE-2022-36227)
- <app-arch/libarchive-3.6.1-r1: null pointer dereference

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
<app-arch/libarchive-3.6.1-r1: null pointer dereference

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2022-36227 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Security | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Security "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Vulnerabilities ([show other bugs](buglist.cgi?component=Vulnerabilities&product=Gentoo%20Security&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Security | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") | [https://github.com/libarchive/libarch...](https://github.com/libarchive/libarchive/issues/1754) | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | A3 [glsa+] | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") | PullRequest | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2022-11-22 15:47 UTC by John Helmert III | | --- | --- | | Modified: | 2023-09-29 13:40 UTC ([History](show_activity.cgi?id=882521)) | | CC List: | 1 user (show)  mgorny | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") | * <https://github.com/gentoo/gentoo/pull/28560> | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [Add an attachment](attachment.cgi?bugid=882521&action=enter) (proposed patch, testcase, etc.) | | |   | Note You need to [log in](show_bug.cgi?id=882521&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2022-11-22 15:47:04 UTC  ``` CVE-2022-36227:  In libarchive 3.6.1, the software does not check for an error after calling calloc function that can return with a NULL pointer if the function fails, which leads to a resultant NULL pointer dereference or, in some cases, even arbitrary code execution.  No idea how a null pointer dereference could lead to code execution. Unreleased patch is: <https://github.com/libarchive/libarchive/commit/fd180c36036df7181a64931264732a10ad8cd024> ```  [Comment 1](#c1)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2022-11-24 00:25:58 UTC  ``` The reporter alleges this can achieve code execution on platforms where privileged code actually reads from the 0x0 memory address. I don't know of that being the case anywhere Gentoo is supported. ```  [Comment 2](#c2)  Michał Górny   archtester Gentoo Infrastructure gentoo-dev Security  2022-12-06 04:49:59 UTC  ``` The fix looks trivial-ish, so I'll just put it straight to stable. ```  [Comment 3](#c3)  Larry the Git Cow   gentoo-dev  2022-12-06 06:02:29 UTC  ``` The bug has been closed via the following commit(s):  <https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=b618d6ec93c66f91c071c99c65775aaef2471bdf>  commit b618d6ec93c66f91c071c99c65775aaef2471bdf Author:     Meena Shanmugam <meenashanmugam@google.com> AuthorDate: 2022-12-06 00:32:30 +0000 Commit:     Michał Górny <mgorny@gentoo.org> CommitDate: 2022-12-06 06:02:16 +0000      app-arch/libarchive: Add patch to fix CVE-2022-36227.          New version is not released in libarchive with the CVE-2022-36227 fix.          Closes: <https://bugs.gentoo.org/882521>     Signed-off-by: Meena Shanmugam <meenashanmugam@google.com>     Closes: <https://github.com/gentoo/gentoo/pull/28560>     Signed-off-by: Michał Górny <mgorny@gentoo.org>   .../files/libarchive-3.6.1-CVE-2022-36227.patch    | 35 ++++++++++++++++++++++  ...ive-3.6.1.ebuild => libarchive-3.6.1-r1.ebuild} |  2 ++  2 files changed, 37 insertions(+) ```  [Comment 4](#c4)  Michał Górny   archtester Gentoo Infrastructure gentoo-dev Security  2022-12-06 14:26:31 UTC  ``` Sorry, didn't intend to close it.  Cleaned up now, anyway. ```  [Comment 5](#c5)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2022-12-08 01:23:59 UTC  ``` Thanks! ```  [Comment 6](#c6)  Parag    2023-02-21 07:42:45 UTC  ``` Hi, I am a beginner to CVEs vulnerability issues, So I want how to fix this issue in the Ubuntu 22.04 server.  I want to step in to fix this issue. ```  [Comment 7](#c7)  Parag    2023-02-21 07:45:33 UTC  ``` This package info is Package: libarchive13 Version: 3.6.0-1ubuntu1 ```  [Comment 8](#c8)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2023-02-22 00:07:37 UTC  ``` (In reply to Parag from [comment #6](show_bug.cgi?id=882521#c6)) > Hi, > I am a beginner to CVEs vulnerability issues, So I want how to fix this > issue in the Ubuntu 22.04 server. >  > I want to step in to fix this issue.  Why would you ask Gentoo about Ubuntu? ```  [Comment 9](#c9)  John Helmert III   archtester Gentoo Infrastructure gentoo-dev Security  2023-09-25 04:24:34 UTC  ``` GLSA request filed. ```  [Comment 10](#c10)  Larry the Git Cow   gentoo-dev  2023-09-29 13:39:37 UTC  ``` The bug has been referenced in the following commit(s):  <https://gitweb.gentoo.org/data/glsa.git/commit/?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8>  commit e05346e205e470b799ae6c0dafb506d6aa1cdae8 Author:     GLSAMaker <glsamaker@gentoo.org> AuthorDate: 2023-09-29 13:38:51 +0000 Commit:     Hans de Graaff <graaff@gentoo.org> CommitDate: 2023-09-29 13:39:30 +0000      [ GLSA 202309-14 ] libarchive: Multiple Vulnerabilities          Bug: <https://bugs.gentoo.org/882521>     Bug: <https://bugs.gentoo.org/911486>     Signed-off-by: GLSAMaker <glsamaker@gentoo.org>     Signed-off-by: Hans de Graaff <graaff@gentoo.org>   glsa-202309-14.xml | 43 +++++++++++++++++++++++++++++++++++++++++++  1 file changed, 43 insertions(+) ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=882521)
* - [XML](show_bug.cgi?ctype=xml&id=882521)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=882521)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=882521&product=Gentoo%20Security)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=882521&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=882521&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from gitweb.gentoo.org_4b4f729d_20250115_114151.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
GitWeb

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Gentoo Repository](/repo/gentoo.git)
* [Repositories](/repo/)
* [Projects](/proj/)
* [Developer Overlays](/dev/)
* [User Overlays](/user/)
* [Data](/data/)
* [Websites](/sites/)

| [cgit logo](/) | [index](/) : [repo/gentoo.git](/repo/gentoo.git/) | master |
| --- | --- | --- |
| Official Gentoo ebuild repository | Infrastructure team <infrastructure@gentoo.org> |

| [summary](/repo/gentoo.git/)[refs](/repo/gentoo.git/refs/?id=b618d6ec93c66f91c071c99c65775aaef2471bdf)[log](/repo/gentoo.git/log/)[tree](/repo/gentoo.git/tree/?id=b618d6ec93c66f91c071c99c65775aaef2471bdf)[commit](/repo/gentoo.git/commit/?id=b618d6ec93c66f91c071c99c65775aaef2471bdf)[diff](/repo/gentoo.git/diff/?id=b618d6ec93c66f91c071c99c65775aaef2471bdf) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Meena Shanmugam <meenashanmugam@google.com> | 2022-12-06 00:32:30 +0000 |
| --- | --- | --- |
| committer | Michał Górny <mgorny@gentoo.org> | 2022-12-06 07:02:16 +0100 |
| commit | [b618d6ec93c66f91c071c99c65775aaef2471bdf](/repo/gentoo.git/commit/?id=b618d6ec93c66f91c071c99c65775aaef2471bdf) ([patch](/repo/gentoo.git/patch/?id=b618d6ec93c66f91c071c99c65775aaef2471bdf)) | |
| tree | [4bf5174300da48b96519766b931beec38f6cd084](/repo/gentoo.git/tree/?id=b618d6ec93c66f91c071c99c65775aaef2471bdf) | |
| parent | [dev-python/starlette: Bump to 0.23.0](/repo/gentoo.git/commit/?id=c81bbeab4b5a76dbc6188a38c99410a57de131a5) ([diff](/repo/gentoo.git/diff/?id=b618d6ec93c66f91c071c99c65775aaef2471bdf&id2=c81bbeab4b5a76dbc6188a38c99410a57de131a5)) | |
| download | [gentoo-b618d6ec93c66f91c071c99c65775aaef2471bdf.tar.gz](/repo/gentoo.git/snapshot/gentoo-b618d6ec93c66f91c071c99c65775aaef2471bdf.tar.gz)[gentoo-b618d6ec93c66f91c071c99c65775aaef2471bdf.tar.bz2](/repo/gentoo.git/snapshot/gentoo-b618d6ec93c66f91c071c99c65775aaef2471bdf.tar.bz2)[gentoo-b618d6ec93c66f91c071c99c65775aaef2471bdf.zip](/repo/gentoo.git/snapshot/gentoo-b618d6ec93c66f91c071c99c65775aaef2471bdf.zip) | |

app-arch/libarchive: Add patch to fix CVE-2022-36227.New version is not released in libarchive with the CVE-2022-36227 fix.
Closes: https://bugs.gentoo.org/882521
Signed-off-by: Meena Shanmugam <meenashanmugam@google.com>
Closes: https://github.com/gentoo/gentoo/pull/28560
Signed-off-by: Michał Górny <mgorny@gentoo.org>
[Diffstat](/repo/gentoo.git/diff/?id=b618d6ec93c66f91c071c99c65775aaef2471bdf)

| -rw-r--r-- | [app-arch/libarchive/files/libarchive-3.6.1-CVE-2022-36227.patch](/repo/gentoo.git/diff/app-arch/libarchive/files/libarchive-3.6.1-CVE-2022-36227.patch?id=b618d6ec93c66f91c071c99c65775aaef2471bdf) | 35 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [app-arch/libarchive/libarchive-3.6.1-r1.ebuild](/repo/gentoo.git/diff/app-arch/libarchive/libarchive-3.6.1-r1.ebuild?id=b618d6ec93c66f91c071c99c65775aaef2471bdf) (renamed from app-arch/libarchive/libarchive-3.6.1.ebuild) | 2 | |  |  |  | | --- | --- | --- | |

2 files changed, 37 insertions, 0 deletions

| diff --git a/app-arch/libarchive/files/libarchive-3.6.1-CVE-2022-36227.patch b/app-arch/libarchive/files/libarchive-3.6.1-CVE-2022-36227.patchnew file mode 100644index 000000000000..da71a196b875--- /dev/null+++ b/[app-arch/libarchive/files/libarchive-3.6.1-CVE-2022-36227.patch](/repo/gentoo.git/tree/app-arch/libarchive/files/libarchive-3.6.1-CVE-2022-36227.patch?id=b618d6ec93c66f91c071c99c65775aaef2471bdf)@@ -0,0 +1,35 @@+From bff38efe8c110469c5080d387bec62a6ca15b1a5 Mon Sep 17 00:00:00 2001+From: obiwac <obiwac@gmail.com>+Date: Fri, 22 Jul 2022 22:41:10 +0200+Subject: [PATCH] libarchive: Handle a `calloc` returning NULL (fixes #1754)++---+ libarchive/archive\_write.c | 8 +++++++++ 1 file changed, 8 insertions(+)++diff --git a/libarchive/archive\_write.c b/libarchive/archive\_write.c+index 66592e826..27626b541 100644+--- a/libarchive/archive\_write.c++++ b/libarchive/archive\_write.c+@@ -201,6 +201,10 @@ \_\_archive\_write\_allocate\_filter(struct archive \*\_a)+ struct archive\_write\_filter \*f;+ + f = calloc(1, sizeof(\*f));++++ if (f == NULL)++ return (NULL);+++ f->archive = \_a;+ f->state = ARCHIVE\_WRITE\_FILTER\_STATE\_NEW;+ if (a->filter\_first == NULL)+@@ -548,6 +552,10 @@ archive\_write\_open2(struct archive \*\_a, void \*client\_data,+ a->client\_data = client\_data;+ + client\_filter = \_\_archive\_write\_allocate\_filter(\_a);++++ if (client\_filter == NULL)++ return (ARCHIVE\_FATAL);+++ client\_filter->open = archive\_write\_client\_open;+ client\_filter->write = archive\_write\_client\_write;+ client\_filter->close = archive\_write\_client\_close;diff --git a/app-arch/libarchive/libarchive-3.6.1.ebuild b/app-arch/libarchive/libarchive-3.6.1-r1.ebuildindex 2c65539abe4b..886252808767 100644--- a/[app-arch/libarchive/libarchive-3.6.1.ebuild](/repo/gentoo.git/tree/app-arch/libarchive/libarchive-3.6.1.ebuild?id=c81bbeab4b5a76dbc6188a38c99410a57de131a5)+++ b/[app-arch/libarchive/libarchive-3.6.1-r1.ebuild](/repo/gentoo.git/tree/app-arch/libarchive/libarchive-3.6.1-r1.ebuild?id=b618d6ec93c66f91c071c99c65775aaef2471bdf)@@ -47,6 +47,8 @@ BDEPEND="  PATCHES=( "${FILESDIR}"/${P}-glibc-2.36.patch+ # https://github.com/libarchive/libarchive/pull/1759+ "${FILESDIR}"/${P}-CVE-2022-36227.patch )  multilib\_src\_configure() { |
| --- |

### Questions or comments?

Please feel free to [contact us](https://www.gentoo.org/inside-gentoo/contact/).

**© 2001–2024 Gentoo Authors**

Gentoo is a trademark of the Gentoo Foundation, Inc. and of Förderverein Gentoo e.V.
The contents of this document, unless otherwise expressly stated, are licensed under the
[CC-BY-SA-4.0](https://creativecommons.org/licenses/by-sa/4.0/) license.
The [Gentoo Name and Logo Usage Guidelines](https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html) apply.



=== Content from lists.debian.org_e50b2537_20250114_191517.html ===


---

[[Date Prev](msg00033.html)][[Date Next](msg00035.html)]
[[Thread Prev](msg00033.html)][[Thread Next](msg00035.html)]
[[Date Index](maillist.html#00034)]
[[Thread Index](threads.html#00034)]

# [SECURITY] [DLA 3294-1] libarchive security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 3294-1] libarchive security update
* *From*: Thorsten Alteholz <debian@alteholz.de>
* *Date*: Mon, 30 Jan 2023 18:42:27 +0000 (UTC)
* *Message-id*: <[[🔎]](/msgid-search/alpine.DEB.2.21.2301301840050.8699%40postfach.intern.alteholz.me) [alpine.DEB.2.21.2301301840050.8699@postfach.intern.alteholz.me](msg00034.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian LTS Advisory DLA-3294-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                    Thorsten Alteholz
January 30, 2023                              <https://wiki.debian.org/LTS>
- -------------------------------------------------------------------------

Package        : libarchive
Version        : 3.3.3-4+deb10u3
CVE ID         : CVE-2022-36227

```
An issue has been found in libarchive, a multi-format archive and
compression library.
Due to missing checks after calloc, null pointer dereferences might
happen.
```

For Debian 10 buster, this problem has been fixed in version
3.3.3-4+deb10u3.

We recommend that you upgrade your libarchive packages.

For the detailed security status of libarchive please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/libarchive>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

-----BEGIN PGP SIGNATURE-----

iQKTBAEBCgB9FiEEYgH7/9u94Hgi6ruWlvysDTh7WEcFAmPYD5NfFIAAAAAALgAo
aXNzdWVyLWZwckBub3RhdGlvbnMub3BlbnBncC5maWZ0aGhvcnNlbWFuLm5ldDYy
MDFGQkZGREJCREUwNzgyMkVBQkI5Njk2RkNBQzBEMzg3QjU4NDcACgkQlvysDTh7
WEep6xAAhQOrA70r8Xq8la+3KoxJP+KYp36eGeAe22bpNY5BbG9LqiT4kCvY0RMG
+7Yd922djie5FeIL8Qj+3XuhUmYbyCrEGTPCA2geylJXw37PQkfYs/r8kiV+D3RJ
Wa0HJYvDQ8atp45yzIjjE2TvoCWVPX/wILVbgVtNDeA5a2kkxizMv+2ySkrIfVAp
lTN3S7rCKnhGlqdiMFY5PXIvlIZIjcJS/gIhR8LQU9OdEkp0p6WAJ0JPry6Sth32
WhhK+xDD7APq/mwmuhlN0sRLwe5/+EIdoQdOcMGLyfAnDP4aSOursnEs1nR+QUGy
imuCGk0+ZLLYnTrZfeaakO0O7VkNQPK9HROWbHy0AzW81kjVpvAN911NQjGa1bz3
iwDQPBjYHn+ZHkH232Ymziya4D/acvbkUbgfcZY4RecNqSqiC3CbGfnz7Ni3tc9g
orV/lJ464cPw5bmdxH+iIUqaTnGLA3aHlMlRFstXqBXm9DLzjFx5lBvee4LPqNBR
lA1NDT9dVrjI2KlqjQa/BIS6TgsZYxYLZTzIHHzdSgKRaPYEXf9xrMHcHS6SVeoP
KQIVwZPlkIROxrtuRJs6lc33fa2f7vB0JjA5cuSQA/Gw14bDbKD/x2XaiJz2mrwR
eD2iPSLlbsNj76jqdJQ5j/PA6GeEysEuixG3NHm0Z0/q2TpHoEA=
=Wj8A
-----END PGP SIGNATURE-----

```

---



=== Content from gitweb.gentoo.org_cd76b9e4_20250115_114150.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
GitWeb

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Gentoo Repository](/repo/gentoo.git)
* [Repositories](/repo/)
* [Projects](/proj/)
* [Developer Overlays](/dev/)
* [User Overlays](/user/)
* [Data](/data/)
* [Websites](/sites/)

| [cgit logo](/) | [index](/) : [data/glsa.git](/data/glsa.git/) | glsamakerdev master |
| --- | --- | --- |
| Gentoo Linux Security Advisories | Gentoo Security <security@gentoo.org> |

| [summary](/data/glsa.git/)[refs](/data/glsa.git/refs/?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8)[log](/data/glsa.git/log/)[tree](/data/glsa.git/tree/?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8)[commit](/data/glsa.git/commit/?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8)[diff](/data/glsa.git/diff/?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | GLSAMaker <glsamaker@gentoo.org> | 2023-09-29 13:38:51 +0000 |
| --- | --- | --- |
| committer | Hans de Graaff <graaff@gentoo.org> | 2023-09-29 15:39:30 +0200 |
| commit | [e05346e205e470b799ae6c0dafb506d6aa1cdae8](/data/glsa.git/commit/?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8) ([patch](/data/glsa.git/patch/?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8)) | |
| tree | [f404eab01ec587e8249f088a74366ec25064f6ef](/data/glsa.git/tree/?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8) | |
| parent | [[ GLSA 202309-13 ] GMP: Buffer Overflow Vulnerability](/data/glsa.git/commit/?id=17e5b5cf877ebf0127b18185375d03e4b07b3c43) ([diff](/data/glsa.git/diff/?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8&id2=17e5b5cf877ebf0127b18185375d03e4b07b3c43)) | |
| download | [glsa-e05346e205e470b799ae6c0dafb506d6aa1cdae8.tar.gz](/data/glsa.git/snapshot/glsa-e05346e205e470b799ae6c0dafb506d6aa1cdae8.tar.gz)[glsa-e05346e205e470b799ae6c0dafb506d6aa1cdae8.tar.bz2](/data/glsa.git/snapshot/glsa-e05346e205e470b799ae6c0dafb506d6aa1cdae8.tar.bz2)[glsa-e05346e205e470b799ae6c0dafb506d6aa1cdae8.zip](/data/glsa.git/snapshot/glsa-e05346e205e470b799ae6c0dafb506d6aa1cdae8.zip) | |

[ GLSA 202309-14 ] libarchive: Multiple VulnerabilitiesBug: https://bugs.gentoo.org/882521
Bug: https://bugs.gentoo.org/911486
Signed-off-by: GLSAMaker <glsamaker@gentoo.org>
Signed-off-by: Hans de Graaff <graaff@gentoo.org>
[Diffstat](/data/glsa.git/diff/?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8)

| -rw-r--r-- | [glsa-202309-14.xml](/data/glsa.git/diff/glsa-202309-14.xml?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8) | 43 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 43 insertions, 0 deletions

| diff --git a/glsa-202309-14.xml b/glsa-202309-14.xmlnew file mode 100644index 00000000..c9c51907--- /dev/null+++ b/[glsa-202309-14.xml](/data/glsa.git/tree/glsa-202309-14.xml?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8)@@ -0,0 +1,43 @@+<?xml version="1.0" encoding="UTF-8"?>+<!DOCTYPE glsa SYSTEM "http://www.gentoo.org/dtd/glsa.dtd">+<glsa id="202309-14">+ <title>libarchive: Multiple Vulnerabilities</title>+ <synopsis>Multiple vulnerabilities have been found in libarchive, the worst of which could result in denial of service.</synopsis>+ <product type="ebuild">libarchive</product>+ <announced>2023-09-29</announced>+ <revised count="1">2023-09-29</revised>+ <bug>882521</bug>+ <bug>911486</bug>+ <access>remote</access>+ <affected>+ <package name="app-arch/libarchive" auto="yes" arch="\*">+ <unaffected range="ge">3.7.1</unaffected>+ <vulnerable range="lt">3.7.1</vulnerable>+ </package>+ </affected>+ <background>+ <p>libarchive is a library for manipulating different streaming archive formats, including certain tar variants, several cpio formats, and both BSD and GNU ar variants.</p>+ </background>+ <description>+ <p>Multiple vulnerabilities have been discovered in libarchive. Please review the CVE identifiers referenced below for details.</p>+ </description>+ <impact type="normal">+ <p>Please review the referenced CVE identifiers for details.</p>+ </impact>+ <workaround>+ <p>There is no known workaround at this time.</p>+ </workaround>+ <resolution>+ <p>All libarchive users should upgrade to the latest version:</p>+ + <code>+ # emerge --sync+ # emerge --ask --oneshot --verbose ">=app-arch/libarchive-3.7.1"+ </code>+ </resolution>+ <references>+ <uri link="https://nvd.nist.gov/vuln/detail/CVE-2022-36227">CVE-2022-36227</uri>+ </references>+ <metadata tag="requester" timestamp="2023-09-29T13:38:51.852767Z">ajak</metadata>+ <metadata tag="submitter" timestamp="2023-09-29T13:38:51.855730Z">graaff</metadata>+</glsa> \ No newline at end of file |
| --- |

### Questions or comments?

Please feel free to [contact us](https://www.gentoo.org/inside-gentoo/contact/).

**© 2001–2024 Gentoo Authors**

Gentoo is a trademark of the Gentoo Foundation, Inc. and of Förderverein Gentoo e.V.
The contents of this document, unless otherwise expressly stated, are licensed under the
[CC-BY-SA-4.0](https://creativecommons.org/licenses/by-sa/4.0/) license.
The [Gentoo Name and Logo Usage Guidelines](https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html) apply.



=== Content from security.gentoo.org_3ca529b2_20250114_191519.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# libarchive: Multiple Vulnerabilities — GLSA **202309-14**

Multiple vulnerabilities have been found in libarchive, the worst of which could result in denial of service.

### Affected packages

| Package | **app-arch/libarchive** on all architectures |
| --- | --- |
| Affected versions | < **3.7.1** |
| Unaffected versions | >= **3.7.1** |

### Background

libarchive is a library for manipulating different streaming archive formats, including certain tar variants, several cpio formats, and both BSD and GNU ar variants.

### Description

Multiple vulnerabilities have been discovered in libarchive. Please review the CVE identifiers referenced below for details.

### Impact

Please review the referenced CVE identifiers for details.

### Workaround

There is no known workaround at this time.

### Resolution

All libarchive users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=app-arch/libarchive-3.7.1"

```
### References

* [CVE-2022-36227](https://nvd.nist.gov/vuln/detail/CVE-2022-36227)

**Release date**

September 29, 2023

**Latest revision**

September 29, 2023: 1

**Severity**

normal

**Exploitable**

remote

**Bugzilla entries**

* [882521](https://bugs.gentoo.org/show_bug.cgi?id=882521)
* [911486](https://bugs.gentoo.org/show_bug.cgi?id=911486)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from github.com_85a0799e_20250115_114149.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgentoo%2Fgentoo%2Fpull%2F28560)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgentoo%2Fgentoo%2Fpull%2F28560)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=gentoo%2Fgentoo)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gentoo](/gentoo)
/
**[gentoo](/gentoo/gentoo)**
Public

* [Notifications](/login?return_to=%2Fgentoo%2Fgentoo) You must be signed in to change notification settings
* [Fork
  2k](/login?return_to=%2Fgentoo%2Fgentoo)
* [Star
   2.1k](/login?return_to=%2Fgentoo%2Fgentoo)

* [Code](/gentoo/gentoo)
* [Pull requests
  890](/gentoo/gentoo/pulls)
* [Actions](/gentoo/gentoo/actions)
* [Projects
  0](/gentoo/gentoo/projects)
* [Security](/gentoo/gentoo/security)
* [Insights](/gentoo/gentoo/pulse)

Additional navigation options

* [Code](/gentoo/gentoo)
* [Pull requests](/gentoo/gentoo/pulls)
* [Actions](/gentoo/gentoo/actions)
* [Projects](/gentoo/gentoo/projects)
* [Security](/gentoo/gentoo/security)
* [Insights](/gentoo/gentoo/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fgentoo%2Fgentoo%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fgentoo%2Fgentoo%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# app-arch/libarchive: Add patch to fix CVE-2022-36227. #28560

 Closed

[meena-oss](/meena-oss)
wants to merge
1
commit into
[gentoo:master](/gentoo/gentoo/tree/master "gentoo/gentoo:master")
from
[meena-oss:master](/meena-oss/gentoo/tree/master "meena-oss/gentoo:master")

 Closed

# [app-arch/libarchive: Add patch to fix CVE-2022-36227.](#top) #28560

[meena-oss](/meena-oss)
wants to merge
1
commit into
[gentoo:master](/gentoo/gentoo/tree/master "gentoo/gentoo:master")
from
[meena-oss:master](/meena-oss/gentoo/tree/master "meena-oss/gentoo:master")

[Conversation
3](/gentoo/gentoo/pull/28560)
[Commits
1](/gentoo/gentoo/pull/28560/commits)
[Checks
0](/gentoo/gentoo/pull/28560/checks)
[Files changed](/gentoo/gentoo/pull/28560/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![meena-oss](https://avatars.githubusercontent.com/u/10124030?s=60&v=4)](/meena-oss)

Copy link

### @meena-oss **[meena-oss](/meena-oss)** commented [Dec 6, 2022](#issue-1477829860)

New version is not released in libarchive with the [CVE-2022-36227](https://github.com/advisories/GHSA-gpgf-w78r-4pvj "CVE-2022-36227") fix.

Closes: <https://bugs.gentoo.org/882521>

Signed-off-by: Meena Shanmugam meenashanmugam@google.com

Sorry, something went wrong.

All reactions

`[app-arch/libarchive: Add patch to fix](/gentoo/gentoo/pull/28560/commits/ddb42544b7d68a32811dc84ec46b7e381eb640e1 "app-arch/libarchive: Add patch to fix CVE-2022-36227.

New version is not released in libarchive with the CVE-2022-36227 fix.

Closes: https://bugs.gentoo.org/882521
Signed-off-by: Meena Shanmugam <meenashanmugam@google.com>") [CVE-2022-36227](https://github.com/advisories/GHSA-gpgf-w78r-4pvj "CVE-2022-36227")[.](/gentoo/gentoo/pull/28560/commits/ddb42544b7d68a32811dc84ec46b7e381eb640e1 "app-arch/libarchive: Add patch to fix CVE-2022-36227.

New version is not released in libarchive with the CVE-2022-36227 fix.

Closes: https://bugs.gentoo.org/882521
Signed-off-by: Meena Shanmugam <meenashanmugam@google.com>")`
 …

`[ddb4254](/gentoo/gentoo/pull/28560/commits/ddb42544b7d68a32811dc84ec46b7e381eb640e1)`

```
New version is not released in libarchive with the [CVE-2022-36227](https://github.com/advisories/GHSA-gpgf-w78r-4pvj "CVE-2022-36227") fix.

Closes: <https://bugs.gentoo.org/882521>
Signed-off-by: Meena Shanmugam <meenashanmugam@google.com>
```

[![@gentoo-bot](https://avatars.githubusercontent.com/u/14542386?s=80&u=a8b2bd18c0e6767e65a38d1ebcd45fddd44e7f7a&v=4)](/gentoo-bot)

Copy link

### **[gentoo-bot](/gentoo-bot)** commented [Dec 6, 2022](#issuecomment-1338495880)

| Pull Request assignment *Submitter*: [@meena-oss](https://github.com/meena-oss) *Areas affected*: ebuilds *Packages affected*: app-arch/libarchive  **app-arch/libarchive**: [@mgorny](https://github.com/mgorny) Linked bugs Bugs linked: [882521](https://bugs.gentoo.org/882521)   ---   In order to force reassignment and/or bug reference scan, please append `[please reassign]` to the pull request title.  *Docs*: [Code of Conduct](https://wiki.gentoo.org/wiki/Project%3ACouncil/Code_of_conduct) ● [Copyright policy](https://www.gentoo.org/glep/glep-0076.html) ([expl.](https://dev.gentoo.org/~mgorny/articles/new-gentoo-copyright-policy-explained.html)) ● [Devmanual](https://devmanual.gentoo.org/) ● [GitHub PRs](https://wiki.gentoo.org/wiki/Project%3AGitHub/Pull_requests) ● [Proxy-maint guide](https://wiki.gentoo.org/wiki/Project%3AProxy_Maintainers/User_Guide) |
| --- |

All reactions

Sorry, something went wrong.

[![@gentoo-bot](https://avatars.githubusercontent.com/u/14542386?s=40&u=a8b2bd18c0e6767e65a38d1ebcd45fddd44e7f7a&v=4)](/gentoo-bot)
[gentoo-bot](/gentoo-bot)
added
[assigned](/gentoo/gentoo/labels/assigned)
PR successfully assigned to the package maintainer(s).
[bug linked](/gentoo/gentoo/labels/bug%20linked)
Bug/Closes found in footer, and cross-linked with the PR.
[security](/gentoo/gentoo/labels/security)
PR that needs to be merged promptly as it addresses security issues
labels
[Dec 6, 2022](#event-7960648655)

[![@gentoo-repo-qa-bot](https://avatars.githubusercontent.com/u/12962539?s=80&u=173a589236873ee92f8074bb3a38b184a834420f&v=4)](/gentoo-repo-qa-bot)

Copy link

Collaborator

### **[gentoo-repo-qa-bot](/gentoo-repo-qa-bot)** commented [Dec 6, 2022](#issuecomment-1338503065)

| Pull request CI report *Report generated at*: 2022-12-06 00:53 UTC *Newest commit scanned*: [ddb4254](https://github.com/gentoo/gentoo/commit/ddb42544b7d68a32811dc84ec46b7e381eb640e1) *Status*: ✅ good  There are existing issues already. Please look into the report to make sure none of them affect the packages in question: <https://qa-reports.gentoo.org/output/gentoo-ci/c2822e6715/output.html> |
| --- |

All reactions

Sorry, something went wrong.

[![@mgorny](https://avatars.githubusercontent.com/u/110765?s=80&u=7386b9cb55c1973a510d2785832424bc80e7c265&v=4)](/mgorny)

Copy link

Member

### **[mgorny](/mgorny)** commented [Dec 6, 2022](#issuecomment-1338749482)

| Thank you! For the record, a security fix generally deserves a revbump, as otherwise people who built this version before won't get it — I'm going to add it while merging. |
| --- |

All reactions

Sorry, something went wrong.

[![@gentoo-bot](https://avatars.githubusercontent.com/u/14542386?s=40&u=a8b2bd18c0e6767e65a38d1ebcd45fddd44e7f7a&v=4)](/gentoo-bot)
[gentoo-bot](/gentoo-bot)
closed this
in
`[b618d6e](/gentoo/gentoo/commit/b618d6ec93c66f91c071c99c65775aaef2471bdf)`
[Dec 6, 2022](#event-7962689287)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fgentoo%2Fgentoo%2Fpull%2F28560)

Reviewers

No reviews

Assignees

No one assigned

Labels

[assigned](/gentoo/gentoo/labels/assigned)
PR successfully assigned to the package maintainer(s).
[bug linked](/gentoo/gentoo/labels/bug%20linked)
Bug/Closes found in footer, and cross-linked with the PR.
[security](/gentoo/gentoo/labels/security)
PR that needs to be merged promptly as it addresses security issues

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

4 participants

[![@meena-oss](https://avatars.githubusercontent.com/u/10124030?s=52&v=4)](/meena-oss) [![@gentoo-bot](https://avatars.githubusercontent.com/u/14542386?s=52&v=4)](/gentoo-bot) [![@gentoo-repo-qa-bot](https://avatars.githubusercontent.com/u/12962539?s=52&v=4)](/gentoo-repo-qa-bot) [![@mgorny](https://avatars.githubusercontent.com/u/110765?s=52&v=4)](/mgorny)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from bugs.gentoo.org_174bef77_20250115_114152.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 911486
<app-arch/libarchive-3.7.1: SEGV and stack buffer overflow in verbose mode of cpio
Last modified: 2023-09-29 13:41:27 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=911486&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=911486&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 911486**](show_bug.cgi?id=911486)
- <app-arch/libarchive-3.7.1: SEGV and stack buffer overflow in verbose mode of cpio

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
<app-arch/libarchive-3.7.1: SEGV and stack buffer overflow in verbose mode of...

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Security | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Security "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Vulnerabilities ([show other bugs](buglist.cgi?component=Vulnerabilities&product=Gentoo%20Security&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | Normal normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Security | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") | [https://github.com/libarchive/libarch...](https://github.com/libarchive/libarchive/releases/tag/v3.7.1) | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | A3 [glsa+] | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [911487](show_bug.cgi?id=911487 "RESOLVED FIXED - app-arch/libarchive-3.7.1: stablereq") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | Show dependency [tree](showdependencytree.cgi?id=911486&hide_resolved=1) | |  | | Reported: | 2023-07-30 03:04 UTC by Michał Górny | | --- | --- | | Modified: | 2023-09-29 13:41 UTC ([History](show_activity.cgi?id=911486)) | | CC List: | 1 user (show)  mgorny | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [Add an attachment](attachment.cgi?bugid=911486&action=enter) (proposed patch, testcase, etc.) | | |   | Note You need to [log in](show_bug.cgi?id=911486&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  Michał Górny   archtester Gentoo Infrastructure gentoo-dev Security  2023-07-30 03:04:55 UTC  ``` Libarchive 3.7.1 is a security, feature and bugfix release.  Security fixes:      SEGV and stack buffer overflow in verbose mode of cpio (#1934, #1935) ```  [Comment 1](#c1)  Larry the Git Cow   gentoo-dev  2023-09-29 13:39:36 UTC  ``` The bug has been referenced in the following commit(s):  <https://gitweb.gentoo.org/data/glsa.git/commit/?id=e05346e205e470b799ae6c0dafb506d6aa1cdae8>  commit e05346e205e470b799ae6c0dafb506d6aa1cdae8 Author:     GLSAMaker <glsamaker@gentoo.org> AuthorDate: 2023-09-29 13:38:51 +0000 Commit:     Hans de Graaff <graaff@gentoo.org> CommitDate: 2023-09-29 13:39:30 +0000      [ GLSA 202309-14 ] libarchive: Multiple Vulnerabilities          Bug: <https://bugs.gentoo.org/882521>     Bug: <https://bugs.gentoo.org/911486>     Signed-off-by: GLSAMaker <glsamaker@gentoo.org>     Signed-off-by: Hans de Graaff <graaff@gentoo.org>   glsa-202309-14.xml | 43 +++++++++++++++++++++++++++++++++++++++++++  1 file changed, 43 insertions(+) ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=911486)
* - [XML](show_bug.cgi?ctype=xml&id=911486)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=911486)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=911486&product=Gentoo%20Security)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=911486&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=911486&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from github.com_dbd2e12e_20250115_114150.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flibarchive%2Flibarchive%2Fissues%2F1754)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flibarchive%2Flibarchive%2Fissues%2F1754)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=libarchive%2Flibarchive)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[libarchive](/libarchive)
/
**[libarchive](/libarchive/libarchive)**
Public

* [Notifications](/login?return_to=%2Flibarchive%2Flibarchive) You must be signed in to change notification settings
* [Fork
  776](/login?return_to=%2Flibarchive%2Flibarchive)
* [Star
   3.1k](/login?return_to=%2Flibarchive%2Flibarchive)

* [Code](/libarchive/libarchive)
* [Issues
  450](/libarchive/libarchive/issues)
* [Pull requests
  35](/libarchive/libarchive/pulls)
* [Actions](/libarchive/libarchive/actions)
* [Projects
  0](/libarchive/libarchive/projects)
* [Wiki](/libarchive/libarchive/wiki)
* [Security](/libarchive/libarchive/security)
* [Insights](/libarchive/libarchive/pulse)

Additional navigation options

* [Code](/libarchive/libarchive)
* [Issues](/libarchive/libarchive/issues)
* [Pull requests](/libarchive/libarchive/pulls)
* [Actions](/libarchive/libarchive/actions)
* [Projects](/libarchive/libarchive/projects)
* [Wiki](/libarchive/libarchive/wiki)
* [Security](/libarchive/libarchive/security)
* [Insights](/libarchive/libarchive/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Flibarchive%2Flibarchive%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Flibarchive%2Flibarchive%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# There is a NULL pointer dereference vulnerability #1754

Closed

[wubonetcn](/wubonetcn) opened this issue
Jul 11, 2022
· 9 comments
 · Fixed by [#1759](https://github.com/libarchive/libarchive/pull/1759)

Closed

# [There is a NULL pointer dereference vulnerability](#top) #1754

[wubonetcn](/wubonetcn) opened this issue
Jul 11, 2022
· 9 comments
 · Fixed by [#1759](https://github.com/libarchive/libarchive/pull/1759)

## Comments

[![@wubonetcn](https://avatars.githubusercontent.com/u/14988652?s=80&u=35ca91ca4bec17945c0528bbb624e3a4463cbbf7&v=4)](/wubonetcn)

Copy link

### **[wubonetcn](/wubonetcn)** commented [Jul 11, 2022](#issue-1300264871) • edited Loading

| The software does not check for an error after calling `calloc` function that can return with a NULL pointer if the function fails, which leads to a resultant NULL pointer dereference or, in some cases, even arbitrary code execution.  The vulnerability is here:  ``` f = calloc(1, sizeof(*f)); f->archive = _a; f->state = ARCHIVE_WRITE_FILTER_STATE_NEW;  ```  In this file:  libarchive/archive\_write.c  ``` /*  * Allocate and return the next filter structure.  */ struct archive_write_filter * __archive_write_allocate_filter(struct archive *_a) { 	struct archive_write *a = (struct archive_write *)_a; 	struct archive_write_filter *f;  	f = calloc(1, sizeof(*f)); 	f->archive = _a; 	f->state = ARCHIVE_WRITE_FILTER_STATE_NEW; 	if (a->filter_first == NULL) 		a->filter_first = f; 	else 		a->filter_last->next_filter = f; 	a->filter_last = f; 	return f; }  ``` |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@kientzle](https://avatars.githubusercontent.com/u/1398793?s=80&v=4)](/kientzle)

Copy link

Contributor

### **[kientzle](/kientzle)** commented [Jul 13, 2022](#issuecomment-1182761589)

| A pull request to fix this would be appreciatd. |
| --- |

All reactions

Sorry, something went wrong.

[obiwac](/obiwac)
added a commit
to obiwac/libarchive
that referenced
this issue
[Jul 22, 2022](#ref-commit-bff38ef)
[![@obiwac](https://avatars.githubusercontent.com/u/11079650?s=40&u=7287938a61ba95736b40f05664edd638ad932772&v=4)](/obiwac)

`[libarchive: Handle a](/obiwac/libarchive/commit/bff38efe8c110469c5080d387bec62a6ca15b1a5 "libarchive: Handle a `calloc` returning NULL (fixes #1754)") [calloc](/obiwac/libarchive/commit/bff38efe8c110469c5080d387bec62a6ca15b1a5 "libarchive: Handle a `calloc` returning NULL (fixes #1754)") [returning NULL (](/obiwac/libarchive/commit/bff38efe8c110469c5080d387bec62a6ca15b1a5 "libarchive: Handle a `calloc` returning NULL (fixes #1754)")[fixes](/obiwac/libarchive/commit/bff38efe8c110469c5080d387bec62a6ca15b1a5 "libarchive: Handle a `calloc` returning NULL (fixes #1754)") [libarchive#1754](https://github.com/libarchive/libarchive/issues/1754)[)](/obiwac/libarchive/commit/bff38efe8c110469c5080d387bec62a6ca15b1a5 "libarchive: Handle a `calloc` returning NULL (fixes #1754)")`

`[bff38ef](/obiwac/libarchive/commit/bff38efe8c110469c5080d387bec62a6ca15b1a5)`

[![@obiwac](https://avatars.githubusercontent.com/u/11079650?s=40&u=7287938a61ba95736b40f05664edd638ad932772&v=4)](/obiwac)
[obiwac](/obiwac)
mentioned this issue
[Jul 22, 2022](#ref-pullrequest-1315400260)

[libarchive: Handle a `calloc` returning NULL (fixes #1754)
#1759](/libarchive/libarchive/pull/1759)
 Merged

[![@kientzle](https://avatars.githubusercontent.com/u/1398793?s=40&v=4)](/kientzle)
[kientzle](/kientzle)
closed this as [completed](/libarchive/libarchive/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
[#1759](/libarchive/libarchive/pull/1759)
[Jul 24, 2022](#event-7051034215)

[kientzle](/kientzle)
added a commit
that referenced
this issue
[Jul 24, 2022](#ref-commit-fd180c3)
[![@kientzle](https://avatars.githubusercontent.com/u/1398793?s=40&v=4)](/kientzle)

`[Merge pull request](/libarchive/libarchive/commit/fd180c36036df7181a64931264732a10ad8cd024 "Merge pull request #1759 from obiwac/fix-1754

libarchive: Handle a `calloc` returning NULL (fixes #1754)") [#1759](https://github.com/libarchive/libarchive/pull/1759) [from obiwac/fix-1754](/libarchive/libarchive/commit/fd180c36036df7181a64931264732a10ad8cd024 "Merge pull request #1759 from obiwac/fix-1754

libarchive: Handle a `calloc` returning NULL (fixes #1754)")`
…

`[fd180c3](/libarchive/libarchive/commit/fd180c36036df7181a64931264732a10ad8cd024)`

```
libarchive: Handle a `calloc` returning NULL (fixes [#1754](https://github.com/libarchive/libarchive/issues/1754))
```

[![@ajakk](https://avatars.githubusercontent.com/u/29188917?s=80&u=91af6311cbe2c838b9240b9b7afd099d1116d93b&v=4)](/ajakk)

Copy link

### **[ajakk](/ajakk)** commented [Nov 22, 2022](#issuecomment-1323878717)

| How can a null pointer dereference lead to code execution? |
| --- |

All reactions

Sorry, something went wrong.

[![@wubonetcn](https://avatars.githubusercontent.com/u/14988652?s=80&u=35ca91ca4bec17945c0528bbb624e3a4463cbbf7&v=4)](/wubonetcn)

Copy link

Author

### **[wubonetcn](/wubonetcn)** commented [Nov 23, 2022](#issuecomment-1324420372)

|  |  |  |
| --- | --- | --- |
| How can a null pointer dereference lead to code execution?  Please view the document <https://cwe.mitre.org/data/definitions/476.html>   | IntegrityConfidentialityAvailability | Technical Impact: Execute Unauthorized Code or Commands; Read Memory; Modify MemoryIn rare circumstances, when NULL is equivalent to the 0x0 memory address and privileged code can access it, then writing or reading memory is possible, which may lead to code execution | | --- | --- | |

All reactions

Sorry, something went wrong.

[![@jsonn](https://avatars.githubusercontent.com/u/296817?s=80&v=4)](/jsonn)

Copy link

Contributor

### **[jsonn](/jsonn)** commented [Nov 23, 2022](#issuecomment-1324450262)

| If you have a program that maps NULL, you are already asking for trouble. Seriously, a plain NULL pointer dereference is not a code execution bug. Classifications like that are why many people nowadays consider CVEs nearly useless. |
| --- |

 👍
3
 thesamesam, risicle, and liamnaddell reacted with thumbs up emoji

All reactions

* 👍
  3 reactions

Sorry, something went wrong.

[![@ajakk](https://avatars.githubusercontent.com/u/29188917?s=80&u=91af6311cbe2c838b9240b9b7afd099d1116d93b&v=4)](/ajakk)

Copy link

### **[ajakk](/ajakk)** commented [Nov 24, 2022](#issuecomment-1325794478) • edited Loading

| How can a null pointer dereference lead to code execution?  Please view the document <https://cwe.mitre.org/data/definitions/476.html> IntegrityConfidentialityAvailability Technical Impact: Execute Unauthorized Code or Commands; Read Memory; Modify MemoryIn rare circumstances, when NULL is equivalent to the 0x0 memory address and privileged code can access it, then writing or reading memory is possible, which may lead to code execution  If you're going to be reporting security bugs, alleging critical impact, and requesting CVEs that echo this alleged impact, please at *least* note that platforms where these prerequisites are met are exceedingly rare, and maybe even let us know which platforms that might be running libarchive actually meet these prerequisites.  Edit - I originally double-posted this comment thanks to a shoddy internet connection, I've since deleted the duplicate. |
| --- |

All reactions

Sorry, something went wrong.

[![@wubonetcn](https://avatars.githubusercontent.com/u/14988652?s=80&u=35ca91ca4bec17945c0528bbb624e3a4463cbbf7&v=4)](/wubonetcn)

Copy link

Author

### **[wubonetcn](/wubonetcn)** commented [Nov 24, 2022](#issuecomment-1325872798)

| How can a null pointer dereference lead to code execution?  Please view the document <https://cwe.mitre.org/data/definitions/476.html> IntegrityConfidentialityAvailability Technical Impact: Execute Unauthorized Code or Commands; Read Memory; Modify MemoryIn rare circumstances, when NULL is equivalent to the 0x0 memory address and privileged code can access it, then writing or reading memory is possible, which may lead to code execution  If you're going to be reporting security bugs, alleging critical impact, and requesting CVEs that echo this alleged impact, please at *least* note that platforms where these prerequisites are met are exceedingly rare, and maybe even let us know which platforms that might be running libarchive actually meet these prerequisites.  Edit - I originally double-posted this comment thanks to a shoddy internet connection, I've since deleted the duplicate.  Thank you very much for your attention. Because there is no reward for open source projects, I did not conduct in-depth research and reproduce code execution. However, it is true that there is a code vulnerability here. I reported it to the open source project and it has been fixed. If you can't reproduce it, you can only think it can lead to Dos. Because the calloc function may fail to execute and return a null pointer. |
| --- |

All reactions

Sorry, something went wrong.

[![@ajakk](https://avatars.githubusercontent.com/u/29188917?s=80&u=91af6311cbe2c838b9240b9b7afd099d1116d93b&v=4)](/ajakk)

Copy link

### **[ajakk](/ajakk)** commented [Nov 24, 2022](#issuecomment-1325897005)

| I'll ask MITRE to fix the description. Please note that despite your being a volunteer, I too am a volunteer putting time into this, and there are many others that have to act on CVEs and work around their bad descriptions. |
| --- |

 👍
2
 Cristian-Bejan and Thomas-Barbier-1A reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@wubonetcn](https://avatars.githubusercontent.com/u/14988652?s=80&u=35ca91ca4bec17945c0528bbb624e3a4463cbbf7&v=4)](/wubonetcn)

Copy link

Author

### **[wubonetcn](/wubonetcn)** commented [Nov 24, 2022](#issuecomment-1325905034)

| I'll ask MITRE to fix the description. Please note that despite your being a volunteer, I too am a volunteer putting time into this, and there are many others that have to act on CVEs and work around their bad descriptions.  OK, thank you very much for taking the time to confirm. In other future reports, I will try to provide poc to avoid wasting time. |
| --- |

 👍
1
 Cristian-Bejan reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@LeSuisse](https://avatars.githubusercontent.com/u/737767?s=40&v=4)](/LeSuisse)
[LeSuisse](/LeSuisse)
mentioned this issue
[Jan 13, 2023](#ref-pullrequest-1495083321)

[libarchive: 3.6.1 -> 3.6.2
NixOS/nixpkgs#205960](/NixOS/nixpkgs/pull/205960)
 Merged

[![@skupr-anaconda](https://avatars.githubusercontent.com/u/79282962?s=40&v=4)](/skupr-anaconda)
[skupr-anaconda](/skupr-anaconda)
mentioned this issue
[Jan 24, 2023](#ref-pullrequest-1554543433)

[libarchive 3.6.2
AnacondaRecipes/libarchive-feedstock#7](/AnacondaRecipes/libarchive-feedstock/pull/7)
 Merged

18 tasks

[![@paragiswalkar](https://avatars.githubusercontent.com/u/5757001?s=80&u=5c34957015fc3a642061b39521a78ac7560c2b5a&v=4)](/paragiswalkar)

Copy link

### **[paragiswalkar](/paragiswalkar)** commented [Feb 21, 2023](#issuecomment-1437980448) • edited Loading

| Hi, I am a beginner to fix CVEs vulnerability issues, So I want how to fix this issue in the Ubuntu 22.04 server. |
| --- |

All reactions

Sorry, something went wrong.

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Flibarchive%2Flibarchive%2Fissues%2F1754)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [libarchive: Handle a `calloc` returning NULL (fixes #1754)](/libarchive/libarchive/pull/1759)
 [obiwac/libarchive](/obiwac/libarchive)

5 participants

[![@jsonn](https://avatars.githubusercontent.com/u/296817?s=52&v=4)](/jsonn) [![@kientzle](https://avatars.githubusercontent.com/u/1398793?s=52&v=4)](/kientzle) [![@paragiswalkar](https://avatars.githubusercontent.com/u/5757001?s=52&v=4)](/paragiswalkar) [![@wubonetcn](https://avatars.githubusercontent.com/u/14988652?s=52&v=4)](/wubonetcn) [![@ajakk](https://avatars.githubusercontent.com/u/29188917?s=52&v=4)](/ajakk)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_3245bd1f_20250114_191514.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flibarchive%2Flibarchive%2Fblob%2Fv3.0.0a%2Flibarchive%2Farchive_write.c)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flibarchive%2Flibarchive%2Fblob%2Fv3.0.0a%2Flibarchive%2Farchive_write.c)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=libarchive%2Flibarchive)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[libarchive](/libarchive)
/
**[libarchive](/libarchive/libarchive)**
Public

* [Notifications](/login?return_to=%2Flibarchive%2Flibarchive) You must be signed in to change notification settings
* [Fork
  776](/login?return_to=%2Flibarchive%2Flibarchive)
* [Star
   3.1k](/login?return_to=%2Flibarchive%2Flibarchive)

* [Code](/libarchive/libarchive/tree/v3.0.0a)
* [Issues
  450](/libarchive/libarchive/issues)
* [Pull requests
  35](/libarchive/libarchive/pulls)
* [Actions](/libarchive/libarchive/actions)
* [Projects
  0](/libarchive/libarchive/projects)
* [Wiki](/libarchive/libarchive/wiki)
* [Security](/libarchive/libarchive/security)
* [Insights](/libarchive/libarchive/pulse)

Additional navigation options

* [Code](/libarchive/libarchive/tree/v3.0.0a)
* [Issues](/libarchive/libarchive/issues)
* [Pull requests](/libarchive/libarchive/pulls)
* [Actions](/libarchive/libarchive/actions)
* [Projects](/libarchive/libarchive/projects)
* [Wiki](/libarchive/libarchive/wiki)
* [Security](/libarchive/libarchive/security)
* [Insights](/libarchive/libarchive/pulse)

## Files

 v3.0.0a
## Breadcrumbs

1. [libarchive](/libarchive/libarchive/tree/v3.0.0a)
2. /[libarchive](/libarchive/libarchive/tree/v3.0.0a/libarchive)
/
# archive\_write.c

Copy path Blame  Blame
## Latest commit

## History

[History](/libarchive/libarchive/commits/v3.0.0a/libarchive/archive_write.c)709 lines (635 loc) · 20.1 KB v3.0.0a
## Breadcrumbs

1. [libarchive](/libarchive/libarchive/tree/v3.0.0a)
2. /[libarchive](/libarchive/libarchive/tree/v3.0.0a/libarchive)
/
# archive\_write.c

Top
## File metadata and controls

* Code
* Blame

709 lines (635 loc) · 20.1 KB[Raw](https://github.com/libarchive/libarchive/raw/refs/tags/v3.0.0a/libarchive/archive_write.c)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709/\*- \* Copyright (c) 2003-2010 Tim Kientzle \* All rights reserved. \* \* Redistribution and use in source and binary forms, with or without \* modification, are permitted provided that the following conditions \* are met: \* 1. Redistributions of source code must retain the above copyright \* notice, this list of conditions and the following disclaimer. \* 2. Redistributions in binary form must reproduce the above copyright \* notice, this list of conditions and the following disclaimer in the \* documentation and/or other materials provided with the distribution. \* \* THIS SOFTWARE IS PROVIDED BY THE AUTHOR(S) ``AS IS'' AND ANY EXPRESS OR \* IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES \* OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. \* IN NO EVENT SHALL THE AUTHOR(S) BE LIABLE FOR ANY DIRECT, INDIRECT, \* INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \* NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, \* DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY \* THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT \* (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF \* THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. \*/
#include "archive\_platform.h"\_\_FBSDID("$FreeBSD: head/lib/libarchive/archive\_write.c 201099 2009-12-28 03:03:00Z kientzle $");
/\* \* This file contains the "essential" portions of the write API, that \* is, stuff that will essentially always be used by any client that \* actually needs to write an archive. Optional pieces have been, as \* far as possible, separated out into separate files to reduce \* needlessly bloating statically-linked clients. \*/
#ifdef HAVE\_SYS\_WAIT\_H#include <sys/wait.h>#endif#ifdef HAVE\_ERRNO\_H#include <errno.h>#endif#ifdef HAVE\_LIMITS\_H#include <limits.h>#endif#include <stdio.h>#ifdef HAVE\_STDLIB\_H#include <stdlib.h>#endif#ifdef HAVE\_STRING\_H#include <string.h>#endif#include <time.h>#ifdef HAVE\_UNISTD\_H#include <unistd.h>#endif
#include "archive.h"#include "archive\_entry.h"#include "archive\_private.h"#include "archive\_write\_private.h"
static struct archive\_vtable \*archive\_write\_vtable(void);
static int \_archive\_filter\_code(struct archive \*, int);static const char \*\_archive\_filter\_name(struct archive \*, int);static int64\_t \_archive\_filter\_bytes(struct archive \*, int);static int \_archive\_write\_filter\_count(struct archive \*);static int \_archive\_write\_close(struct archive \*);static int \_archive\_write\_free(struct archive \*);static int \_archive\_write\_header(struct archive \*, struct archive\_entry \*);static int \_archive\_write\_finish\_entry(struct archive \*);static ssize\_t \_archive\_write\_data(struct archive \*, const void \*, size\_t);
struct archive\_none { size\_t buffer\_size; size\_t avail; char \*buffer; char \*next;};
static struct archive\_vtable \*archive\_write\_vtable(void){ static struct archive\_vtable av; static int inited = 0;
 if (!inited) { av.archive\_close = \_archive\_write\_close; av.archive\_filter\_bytes = \_archive\_filter\_bytes; av.archive\_filter\_code = \_archive\_filter\_code; av.archive\_filter\_name = \_archive\_filter\_name; av.archive\_filter\_count = \_archive\_write\_filter\_count; av.archive\_free = \_archive\_write\_free; av.archive\_write\_header = \_archive\_write\_header; av.archive\_write\_finish\_entry = \_archive\_write\_finish\_entry; av.archive\_write\_data = \_archive\_write\_data; inited = 1; } return (&av);}
/\* \* Allocate, initialize and return an archive object. \*/struct archive \*archive\_write\_new(void){ struct archive\_write \*a; unsigned char \*nulls;
 a = (struct archive\_write \*)malloc(sizeof(\*a)); if (a == NULL) return (NULL); memset(a, 0, sizeof(\*a)); a->archive.magic = ARCHIVE\_WRITE\_MAGIC; a->archive.state = ARCHIVE\_STATE\_NEW; a->archive.vtable = archive\_write\_vtable(); /\* \* The value 10240 here matches the traditional tar default, \* but is otherwise arbitrary. \* TODO: Set the default block size from the format selected. \*/ a->bytes\_per\_block = 10240; a->bytes\_in\_last\_block = -1; /\* Default \*/
 /\* Initialize a block of nulls for padding purposes. \*/ a->null\_length = 1024; nulls = (unsigned char \*)malloc(a->null\_length); if (nulls == NULL) { free(a); return (NULL); } memset(nulls, 0, a->null\_length); a->nulls = nulls; return (&a->archive);}
/\* \* Set the block size. Returns 0 if successful. \*/intarchive\_write\_set\_bytes\_per\_block(struct archive \*\_a, int bytes\_per\_block){ struct archive\_write \*a = (struct archive\_write \*)\_a; archive\_check\_magic(&a->archive, ARCHIVE\_WRITE\_MAGIC, ARCHIVE\_STATE\_NEW, "archive\_write\_set\_bytes\_per\_block"); a->bytes\_per\_block = bytes\_per\_block; return (ARCHIVE\_OK);}
/\* \* Get the current block size. -1 if it has never been set. \*/intarchive\_write\_get\_bytes\_per\_block(struct archive \*\_a){ struct archive\_write \*a = (struct archive\_write \*)\_a; archive\_check\_magic(&a->archive, ARCHIVE\_WRITE\_MAGIC, ARCHIVE\_STATE\_ANY, "archive\_write\_get\_bytes\_per\_block"); return (a->bytes\_per\_block);}
/\* \* Set the size for the last block. \* Returns 0 if successful. \*/intarchive\_write\_set\_bytes\_in\_last\_block(struct archive \*\_a, int bytes){ struct archive\_write \*a = (struct archive\_write \*)\_a; archive\_check\_magic(&a->archive, ARCHIVE\_WRITE\_MAGIC, ARCHIVE\_STATE\_ANY, "archive\_write\_set\_bytes\_in\_last\_block"); a->bytes\_in\_last\_block = bytes; return (ARCHIVE\_OK);}
/\* \* Return the value set above. -1 indicates it has not been set. \*/intarchive\_write\_get\_bytes\_in\_last\_block(struct archive \*\_a){ struct archive\_write \*a = (struct archive\_write \*)\_a; archive\_check\_magic(&a->archive, ARCHIVE\_WRITE\_MAGIC, ARCHIVE\_STATE\_ANY, "archive\_write\_get\_bytes\_in\_last\_block"); return (a->bytes\_in\_last\_block);}
/\* \* dev/ino of a file to be rejected. Used to prevent adding \* an archive to itself recursively. \*/intarchive\_write\_set\_skip\_file(struct archive \*\_a, int64\_t d, int64\_t i){ struct archive\_write \*a = (struct archive\_write \*)\_a; archive\_check\_magic(&a->archive, ARCHIVE\_WRITE\_MAGIC, ARCHIVE\_STATE\_ANY, "archive\_write\_set\_skip\_file"); a->skip\_file\_set = 1; a->skip\_file\_dev = d; a->skip\_file\_ino = i; return (ARCHIVE\_OK);}
/\* \* Allocate and return the next filter structure. \*/struct archive\_write\_filter \*\_\_archive\_write\_allocate\_filter(struct archive \*\_a){ struct archive\_write \*a = (struct archive\_write \*)\_a; struct archive\_write\_filter \*f;
 f = calloc(1, sizeof(\*f)); f->archive = \_a; if (a->filter\_first == NULL) a->filter\_first = f; else a->filter\_last->next\_filter = f; a->filter\_last = f; return f;}
/\* \* Write data to a particular filter. \*/int\_\_archive\_write\_filter(struct archive\_write\_filter \*f, const void \*buff, size\_t length){ int r; if (length == 0) return(ARCHIVE\_OK); r = (f->write)(f, buff, length); f->bytes\_written += length; return (r);}
/\* \* Open a filter. \*/int\_\_archive\_write\_open\_filter(struct archive\_write\_filter \*f){ if (f->open == NULL) return (ARCHIVE\_OK); return (f->open)(f);}
/\* \* Close a filter. \*/int\_\_archive\_write\_close\_filter(struct archive\_write\_filter \*f){ if (f->close != NULL) return (f->close)(f); if (f->next\_filter != NULL) return (\_\_archive\_write\_close\_filter(f->next\_filter)); return (ARCHIVE\_OK);}
int\_\_archive\_write\_output(struct archive\_write \*a, const void \*buff, size\_t length){ return (\_\_archive\_write\_filter(a->filter\_first, buff, length));}
int\_\_archive\_write\_nulls(struct archive\_write \*a, size\_t length){ if (length == 0) return (ARCHIVE\_OK);
 while (length > 0) { size\_t to\_write = length < a->null\_length ? length : a->null\_length; int r = \_\_archive\_write\_output(a, a->nulls, to\_write); if (r < ARCHIVE\_OK) return (r); length -= to\_write; } return (ARCHIVE\_OK);}
static intarchive\_write\_client\_open(struct archive\_write\_filter \*f){ struct archive\_write \*a = (struct archive\_write \*)f->archive; struct archive\_none \*state; void \*buffer; size\_t buffer\_size;
 f->bytes\_per\_block = archive\_write\_get\_bytes\_per\_block(f->archive); f->bytes\_in\_last\_block = archive\_write\_get\_bytes\_in\_last\_block(f->archive); buffer\_size = f->bytes\_per\_block;
 state = (struct archive\_none \*)calloc(1, sizeof(\*state)); buffer = (char \*)malloc(buffer\_size); if (state == NULL || buffer == NULL) { free(state); free(buffer); archive\_set\_error(f->archive, ENOMEM, "Can't allocate data for output buffering"); return (ARCHIVE\_FATAL); }
 state->buffer\_size = buffer\_size; state->buffer = buffer; state->next = state->buffer; state->avail = state->buffer\_size; f->data = state;
 if (a->client\_opener == NULL) return (ARCHIVE\_OK); return (a->client\_opener(f->archive, a->client\_data));}
static intarchive\_write\_client\_write(struct archive\_write\_filter \*f, const void \*\_buff, size\_t length){ struct archive\_write \*a = (struct archive\_write \*)f->archive; struct archive\_none \*state = (struct archive\_none \*)f->data; const char \*buff = (const char \*)\_buff; ssize\_t remaining, to\_copy; ssize\_t bytes\_written;
 remaining = length;
 /\* \* If there is no buffer for blocking, just pass the data \* straight through to the client write callback. In \* particular, this supports "no write delay" operation for \* special applications. Just set the block size to zero. \*/ if (state->buffer\_size == 0) { while (remaining > 0) { bytes\_written = (a->client\_writer)(&a->archive, a->client\_data, buff, remaining); if (bytes\_written <= 0) return (ARCHIVE\_FATAL); remaining -= bytes\_written; buff += bytes\_written; } return (ARCHIVE\_OK); }
 /\* If the copy buffer isn't empty, try to fill it. \*/ if (state->avail < state->buffer\_size) { /\* If buffer is not empty... \*/ /\* ... copy data into buffer ... \*/ to\_copy = ((size\_t)remaining > state->avail) ? state->avail : (size\_t)remaining; memcpy(state->next, buff, to\_copy); state->next += to\_copy; state->avail -= to\_copy; buff += to\_copy; remaining -= to\_copy; /\* ... if it's full, write it out. \*/ if (state->avail == 0) { char \*p = state->buffer; size\_t to\_write = state->buffer\_size; while (to\_write > 0) { bytes\_written = (a->client\_writer)(&a->archive, a->client\_data, p, to\_write); if (bytes\_written <= 0) return (ARCHIVE\_FATAL); if ((size\_t)bytes\_written > to\_write) { archive\_set\_error(&(a->archive), -1, "write overrun"); return (ARCHIVE\_FATAL); } p += bytes\_written; to\_write -= bytes\_written; } state->next = state->buffer; state->avail = state->buffer\_size; } }
 while ((size\_t)remaining > state->buffer\_size) { /\* Write out full blocks directly to client. \*/ bytes\_written = (a->client\_writer)(&a->archive, a->client\_data, buff, state->buffer\_size); if (bytes\_written <= 0) return (ARCHIVE\_FATAL); buff += bytes\_written; remaining -= bytes\_written; }
 if (remaining > 0) { /\* Copy last bit into copy buffer. \*/ memcpy(state->next, buff, remaining); state->next += remaining; state->avail -= remaining; } return (ARCHIVE\_OK);}
static intarchive\_write\_client\_close(struct archive\_write\_filter \*f){ struct archive\_write \*a = (struct archive\_write \*)f->archive; struct archive\_none \*state = (struct archive\_none \*)f->data; ssize\_t block\_length; ssize\_t target\_block\_length; ssize\_t bytes\_written; int ret = ARCHIVE\_OK;
 /\* If there's pending data, pad and write the last block \*/ if (state->next != state->buffer) { block\_length = state->buffer\_size - state->avail;
 /\* Tricky calculation to determine size of last block \*/ if (a->bytes\_in\_last\_block <= 0) /\* Default or Zero: pad to full block \*/ target\_block\_length = a->bytes\_per\_block; else /\* Round to next multiple of bytes\_in\_last\_block. \*/ target\_block\_length = a->bytes\_in\_last\_block \* ( (block\_length + a->bytes\_in\_last\_block - 1) / a->bytes\_in\_last\_block); if (target\_block\_length > a->bytes\_per\_block) target\_block\_length = a->bytes\_per\_block; if (block\_length < target\_block\_length) { memset(state->next, 0, target\_block\_length - block\_length); block\_length = target\_block\_length; } bytes\_written = (a->client\_writer)(&a->archive, a->client\_data, state->buffer, block\_length); ret = bytes\_written <= 0 ? ARCHIVE\_FATAL : ARCHIVE\_OK; } if (a->client\_closer) (\*a->client\_closer)(&a->archive, a->client\_data); free(state->buffer); free(state); a->client\_data = NULL; return (ret);}
/\* \* Open the archive using the current settings. \*/intarchive\_write\_open(struct archive \*\_a, void \*client\_data, archive\_open\_callback \*opener, archive\_write\_callback \*writer, archive\_close\_callback \*closer){ struct archive\_write \*a = (struct archive\_write \*)\_a; struct archive\_write\_filter \*client\_filter; int ret, r1;
 archive\_check\_magic(&a->archive, ARCHIVE\_WRITE\_MAGIC, ARCHIVE\_STATE\_NEW, "archive\_write\_open"); archive\_clear\_error(&a->archive);
 a->client\_writer = writer; a->client\_opener = opener; a->client\_closer = closer; a->client\_data = client\_data;
 client\_filter = \_\_archive\_write\_allocate\_filter(\_a); client\_filter->open = archive\_write\_client\_open; client\_filter->write = archive\_write\_client\_write; client\_filter->close = archive\_write\_client\_close;
 ret = \_\_archive\_write\_open\_filter(a->filter\_first); if (ret < ARCHIVE\_WARN) { r1 = \_\_archive\_write\_close\_filter(a->filter\_first); return (r1 < ret ? r1 : ret); }
 a->archive.state = ARCHIVE\_STATE\_HEADER; if (a->format\_init) ret = (a->format\_init)(a); return (ret);}
/\* \* Close out the archive. \*/static int\_archive\_write\_close(struct archive \*\_a){ struct archive\_write \*a = (struct archive\_write \*)\_a; int r = ARCHIVE\_OK, r1 = ARCHIVE\_OK;
 archive\_check\_magic(&a->archive, ARCHIVE\_WRITE\_MAGIC, ARCHIVE\_STATE\_ANY | ARCHIVE\_STATE\_FATAL, "archive\_write\_close"); if (a->archive.state == ARCHIVE\_STATE\_NEW || a->archive.state == ARCHIVE\_STATE\_CLOSED) return (ARCHIVE\_OK); /\* Okay to close() when not open. \*/
 archive\_clear\_error(&a->archive);
 /\* Finish the last entry. \*/ if (a->archive.state == ARCHIVE\_STATE\_DATA) r = ((a->format\_finish\_entry)(a));
 /\* Finish off the archive. \*/ /\* TODO: have format closers invoke compression close. \*/ if (a->format\_close != NULL) { r1 = (a->format\_close)(a); if (r1 < r) r = r1; }
 /\* Finish the compression and close the stream. \*/ r1 = \_\_archive\_write\_close\_filter(a->filter\_first); if (r1 < r) r = r1;
 if (a->archive.state != ARCHIVE\_STATE\_FATAL) a->archive.state = ARCHIVE\_STATE\_CLOSED; return (r);}
static int\_archive\_write\_filter\_count(struct archive \*\_a){ struct archive\_write \*a = (struct archive\_write \*)\_a; struct archive\_write\_filter \*p = a->filter\_first; int count = 0; while(p) { count++; p = p->next\_filter; } return count;}
void\_\_archive\_write\_filters\_free(struct archive \*\_a){ struct archive\_write \*a = (struct archive\_write \*)\_a; int r = ARCHIVE\_OK, r1;
 while (a->filter\_first != NULL) { struct archive\_write\_filter \*next = a->filter\_first->next\_filter; if (a->filter\_first->free != NULL) { r1 = (\*a->filter\_first->free)(a->filter\_first); if (r > r1) r = r1; } free(a->filter\_first); a->filter\_first = next; } a->filter\_last = NULL;}
/\* \* Destroy the archive structure. \* \* Be careful: user might just call write\_new and then write\_free. \* Don't assume we actually wrote anything or performed any non-trivial \* initialization. \*/static int\_archive\_write\_free(struct archive \*\_a){ struct archive\_write \*a = (struct archive\_write \*)\_a; int r = ARCHIVE\_OK, r1;
 if (\_a == NULL) return (ARCHIVE\_OK); /\* It is okay to call free() in state FATAL. \*/ archive\_check\_magic(&a->archive, ARCHIVE\_WRITE\_MAGIC, ARCHIVE\_STATE\_ANY | ARCHIVE\_STATE\_FATAL, "archive\_write\_free"); if (a->archive.state != ARCHIVE\_STATE\_FATAL) r = archive\_write\_close(&a->archive);
 /\* Release format resources. \*/ if (a->format\_free != NULL) { r1 = (a->format\_free)(a); if (r1 < r) r = r1; }
 \_\_archive\_write\_filters\_free(\_a);
 /\* Release various dynamic buffers. \*/ free((void \*)(uintptr\_t)(const void \*)a->nulls); archive\_string\_free(&a->archive.error\_string); a->archive.magic = 0; \_\_archive\_clean(&a->archive); free(a); return (r);}
/\* \* Write the appropriate header. \*/static int\_archive\_write\_header(struct archive \*\_a, struct archive\_entry \*entry){ struct archive\_write \*a = (struct archive\_write \*)\_a; int ret, r2;
 archive\_check\_magic(&a->archive, ARCHIVE\_WRITE\_MAGIC, ARCHIVE\_STATE\_DATA | ARCHIVE\_STATE\_HEADER, "archive\_write\_header"); archive\_clear\_error(&a->archive);
 if (a->format\_write\_header == NULL) { archive\_set\_error(&(a->archive), -1, "Format must be set before you can write to an archive."); a->archive.state = ARCHIVE\_STATE\_FATAL; return (ARCHIVE\_FATAL); }
 /\* In particular, "retry" and "fatal" get returned immediately. \*/ ret = archive\_write\_finish\_entry(&a->archive); if (ret == ARCHIVE\_FATAL) { a->archive.state = ARCHIVE\_STATE\_FATAL; return (ARCHIVE\_FATAL); } if (ret < ARCHIVE\_OK && ret != ARCHIVE\_WARN) return (ret);
 if (a->skip\_file\_set && archive\_entry\_dev\_is\_set(entry) && archive\_entry\_ino\_is\_set(entry) && archive\_entry\_dev(entry) == a->skip\_file\_dev && archive\_entry\_ino64(entry) == a->skip\_file\_ino) { archive\_set\_error(&a->archive, 0, "Can't add archive to itself"); return (ARCHIVE\_FAILED); }
 /\* Format and write header. \*/ r2 = ((a->format\_write\_header)(a, entry)); if (r2 == ARCHIVE\_FATAL) { a->archive.state = ARCHIVE\_STATE\_FATAL; return (ARCHIVE\_FATAL); } if (r2 < ret) ret = r2;
 a->archive.state = ARCHIVE\_STATE\_DATA; return (ret);}
static int\_archive\_write\_finish\_entry(struct archive \*\_a){ struct archive\_write \*a = (struct archive\_write \*)\_a; int ret = ARCHIVE\_OK;
 archive\_check\_magic(&a->archive, ARCHIVE\_WRITE\_MAGIC, ARCHIVE\_STATE\_HEADER | ARCHIVE\_STATE\_DATA, "archive\_write\_finish\_entry"); if (a->archive.state & ARCHIVE\_STATE\_DATA) ret = (a->format\_finish\_entry)(a); a->archive.state = ARCHIVE\_STATE\_HEADER; return (ret);}
/\* \* Note that the compressor is responsible for blocking. \*/static ssize\_t\_archive\_write\_data(struct archive \*\_a, const void \*buff, size\_t s){ struct archive\_write \*a = (struct archive\_write \*)\_a; archive\_check\_magic(&a->archive, ARCHIVE\_WRITE\_MAGIC, ARCHIVE\_STATE\_DATA, "archive\_write\_data"); archive\_clear\_error(&a->archive); return ((a->format\_write\_data)(a, buff, s));}
static struct archive\_write\_filter \*filter\_lookup(struct archive \*\_a, int n){ struct archive\_write \*a = (struct archive\_write \*)\_a; struct archive\_write\_filter \*f = a->filter\_first; if (n == -1) return a->filter\_last; if (n < 0) return NULL; while (n > 0 && f != NULL) { f = f->next\_filter; --n; } return f;}
static int\_archive\_filter\_code(struct archive \*\_a, int n){ struct archive\_write\_filter \*f = filter\_lookup(\_a, n); return f == NULL ? -1 : f->code;}
static const char \*\_archive\_filter\_name(struct archive \*\_a, int n){ struct archive\_write\_filter \*f = filter\_lookup(\_a, n); return f == NULL ? NULL : f->name;}
static int64\_t\_archive\_filter\_bytes(struct archive \*\_a, int n){ struct archive\_write\_filter \*f = filter\_lookup(\_a, n); return f == NULL ? -1 : f->bytes\_written;}

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


