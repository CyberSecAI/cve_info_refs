=== Content from www.mozilla.org_da77736f_20250114_230038.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2022-26

## Security Vulnerabilities fixed in Thunderbird 91.11 and Thunderbird 102

Announced
June 28, 2022
Impact
high
Products
Thunderbird
Fixed in

* Thunderbird 102
* Thunderbird 91.11

*In general, these flaws cannot be exploited through email in the Thunderbird product because scripting is disabled when reading mail, but are potentially risks in browser or browser-like contexts.*
*Note*: While [Bug 1771084](https://bugzilla.mozilla.org/show_bug.cgi?id=1771084) does not represent a specific vulnerability that was fixed, we recommend anyone rebasing patches to include it. 102 branch: Patch [1](https://hg.mozilla.org/releases/mozilla-beta/rev/82e3067ad2e7) and [2](https://hg.mozilla.org/releases/mozilla-beta/rev/6e4639dc3614). 91 Branch: Patch [1](https://hg.mozilla.org/releases/mozilla-esr91/rev/72bca7a337e4) and [2](https://hg.mozilla.org/releases/mozilla-esr91/rev/befef01949f2) (Despite saying Parts 2 and 3, there is no Part 1)

#### [#CVE-2022-34479: A popup window could be resized in a way to overlay the address bar with web content](#CVE-2022-34479)

Reporter
Irvan Kurniawan
Impact
high
##### Description

A malicious website that could create a popup could have resized the popup to overlay the address bar with its own content, resulting in potential user confusion or spoofing attacks.
*This bug only affects Thunderbird for Linux. Other operating systems are unaffected.*

##### References

* [Bug 1745595](https://bugzilla.mozilla.org/show_bug.cgi?id=1745595)

#### [#CVE-2022-34470: Use-after-free in nsSHistory](#CVE-2022-34470)

Reporter
Armin Ebert
Impact
high
##### Description

Session history navigations may have led to a use-after-free and potentially exploitable crash.

##### References

* [Bug 1765951](https://bugzilla.mozilla.org/show_bug.cgi?id=1765951)

#### [#CVE-2022-34468: CSP sandbox header without "allow-scripts" can be bypassed via retargeted javascript: URI](#CVE-2022-34468)

Reporter
Armin Ebert
Impact
high
##### Description

An iframe that was not permitted to run scripts could do so if the user clicked on a `javascript:` link.

##### References

* [Bug 1768537](https://bugzilla.mozilla.org/show_bug.cgi?id=1768537)

#### [#CVE-2022-2226: An email with a mismatching OpenPGP signature date was accepted as valid](#CVE-2022-2226)

Reporter
Nickolay Olshevsky
Impact
moderate
##### Description

An OpenPGP digital signature includes information about the date when the signature was created. When displaying an email that contains a digital signature, the email's date will be shown. If the dates were different, then Thunderbird didn't report the email as having an invalid signature. If an attacker performed a replay attack, in which an old email with old contents are resent at a later time, it could lead the victim to believe that the statements in the email are current. Fixed versions of Thunderbird will require that the signature's date roughly matches the displayed date of the email.

##### References

* [Bug 1775441](https://bugzilla.mozilla.org/show_bug.cgi?id=1775441)

#### [#CVE-2022-34481: Potential integer overflow in ReplaceElementsAt](#CVE-2022-34481)

Reporter
Ronald Crane
Impact
moderate
##### Description

In the `nsTArray_Impl::ReplaceElementsAt()` function, an integer overflow could have occurred when the number of elements to replace was too large for the container.

##### References

* [Bug 1497246](https://bugzilla.mozilla.org/show_bug.cgi?id=1497246)

#### [#CVE-2022-31744: CSP bypass enabling stylesheet injection](#CVE-2022-31744)

Reporter
Gertjan
Impact
moderate
##### Description

An attacker could have injected CSS into stylesheets accessible via internal URIs, such as resource:, and in doing so bypass a page's Content Security Policy.

##### References

* [Bug 1757604](https://bugzilla.mozilla.org/show_bug.cgi?id=1757604)

#### [#CVE-2022-34472: Unavailable PAC file resulted in OCSP requests being blocked](#CVE-2022-34472)

Reporter
Laurent Bigonville
Impact
moderate
##### Description

If there was a PAC URL set and the server that hosts the PAC was not reachable, OCSP requests would have been blocked, resulting in incorrect error pages being shown.

##### References

* [Bug 1770123](https://bugzilla.mozilla.org/show_bug.cgi?id=1770123)

#### [#CVE-2022-34478: Microsoft protocols can be attacked if a user accepts a prompt](#CVE-2022-34478)

Reporter
Gijs
Impact
moderate
##### Description

The `ms-msdt`, `search`, and `search-ms` protocols deliver content to Microsoft applications, bypassing the browser, when a user accepts a prompt. These applications have had known vulnerabilities, exploited in the wild (although we know of none exploited through Thunderbird), so in this release Thunderbird has blocked these protocols from prompting the user to open them.
*This bug only affects Thunderbird on Windows. Other operating systems are unaffected.*

##### References

* [Bug 1773717](https://bugzilla.mozilla.org/show_bug.cgi?id=1773717)

#### [#CVE-2022-2200: Undesired attributes could be set as part of prototype pollution](#CVE-2022-2200)

Reporter
Manfred Paul via Trend Micro's Zero Day Initiative
Impact
moderate
##### Description

If an object prototype was corrupted by an attacker, they would have been able to set undesired attributes on a JavaScript object, leading to privileged code execution.

##### References

* [Bug 1771381](https://bugzilla.mozilla.org/show_bug.cgi?id=1771381)

#### [#CVE-2022-34484: Memory safety bugs fixed in Thunderbird 91.11 and Thunderbird 102](#CVE-2022-34484)

Reporter
Mozilla developers and community
Impact
high
##### Description

The Mozilla Fuzzing Team reported potential vulnerabilities present in Thunderbird 91.10. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Thunderbird 91.11 and Thunderbird 102](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1763634%2C1772651)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from www.mozilla.org_5284e496_20250114_230037.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2022-25

## Security Vulnerabilities fixed in Firefox ESR 91.11

Announced
June 28, 2022
Impact
high
Products
Firefox ESR
Fixed in

* Firefox ESR 91.11

*Note*: While [Bug 1771084](https://bugzilla.mozilla.org/show_bug.cgi?id=1771084) does not represent a specific vulnerability that was fixed, we recommend anyone rebasing patches to include it. 102 branch: Patch [1](https://hg.mozilla.org/releases/mozilla-beta/rev/82e3067ad2e7) and [2](https://hg.mozilla.org/releases/mozilla-beta/rev/6e4639dc3614). 91 Branch: Patch [1](https://hg.mozilla.org/releases/mozilla-esr91/rev/72bca7a337e4) and [2](https://hg.mozilla.org/releases/mozilla-esr91/rev/befef01949f2) (Despite saying Parts 2 and 3, there is no Part 1)

#### [#CVE-2022-34479: A popup window could be resized in a way to overlay the address bar with web content](#CVE-2022-34479)

Reporter
Irvan Kurniawan
Impact
high
##### Description

A malicious website that could create a popup could have resized the popup to overlay the address bar with its own content, resulting in potential user confusion or spoofing attacks.
*This bug only affects Firefox for Linux. Other operating systems are unaffected.*

##### References

* [Bug 1745595](https://bugzilla.mozilla.org/show_bug.cgi?id=1745595)

#### [#CVE-2022-34470: Use-after-free in nsSHistory](#CVE-2022-34470)

Reporter
Armin Ebert
Impact
high
##### Description

Session history navigations may have led to a use-after-free and potentially exploitable crash.

##### References

* [Bug 1765951](https://bugzilla.mozilla.org/show_bug.cgi?id=1765951)

#### [#CVE-2022-34468: CSP sandbox header without "allow-scripts" can be bypassed via retargeted javascript: URI](#CVE-2022-34468)

Reporter
Armin Ebert
Impact
high
##### Description

An iframe that was not permitted to run scripts could do so if the user clicked on a `javascript:` link.

##### References

* [Bug 1768537](https://bugzilla.mozilla.org/show_bug.cgi?id=1768537)

#### [#CVE-2022-34481: Potential integer overflow in ReplaceElementsAt](#CVE-2022-34481)

Reporter
Ronald Crane
Impact
moderate
##### Description

In the `nsTArray_Impl::ReplaceElementsAt()` function, an integer overflow could have occurred when the number of elements to replace was too large for the container.

##### References

* [Bug 1497246](https://bugzilla.mozilla.org/show_bug.cgi?id=1497246)

#### [#CVE-2022-31744: CSP bypass enabling stylesheet injection](#CVE-2022-31744)

Reporter
Gertjan
Impact
moderate
##### Description

An attacker could have injected CSS into stylesheets accessible via internal URIs, such as resource:, and in doing so bypass a page's Content Security Policy.

##### References

* [Bug 1757604](https://bugzilla.mozilla.org/show_bug.cgi?id=1757604)

#### [#CVE-2022-34472: Unavailable PAC file resulted in OCSP requests being blocked](#CVE-2022-34472)

Reporter
Laurent Bigonville
Impact
moderate
##### Description

If there was a PAC URL set and the server that hosts the PAC was not reachable, OCSP requests would have been blocked, resulting in incorrect error pages being shown.

##### References

* [Bug 1770123](https://bugzilla.mozilla.org/show_bug.cgi?id=1770123)

#### [#CVE-2022-34478: Microsoft protocols can be attacked if a user accepts a prompt](#CVE-2022-34478)

Reporter
Gijs
Impact
moderate
##### Description

The `ms-msdt`, `search`, and `search-ms` protocols deliver content to Microsoft applications, bypassing the browser, when a user accepts a prompt. These applications have had known vulnerabilities, exploited in the wild (although we know of none exploited through Firefox), so in this release Firefox has blocked these protocols from prompting the user to open them.
*This bug only affects Firefox on Windows. Other operating systems are unaffected.*

##### References

* [Bug 1773717](https://bugzilla.mozilla.org/show_bug.cgi?id=1773717)

#### [#CVE-2022-2200: Undesired attributes could be set as part of prototype pollution](#CVE-2022-2200)

Reporter
Manfred Paul via Trend Micro's Zero Day Initiative
Impact
moderate
##### Description

If an object prototype was corrupted by an attacker, they would have been able to set undesired attributes on a JavaScript object, leading to privileged code execution.

##### References

* [Bug 1771381](https://bugzilla.mozilla.org/show_bug.cgi?id=1771381)

#### [#CVE-2022-34484: Memory safety bugs fixed in Firefox 102 and Firefox ESR 91.11](#CVE-2022-34484)

Reporter
Mozilla developers and community
Impact
high
##### Description

The Mozilla Fuzzing Team reported potential vulnerabilities present in Firefox 101 and Firefox ESR 91.10. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 102 and Firefox ESR 91.11](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1763634%2C1772651)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from www.mozilla.org_f096317f_20250114_230036.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2022-24

## Security Vulnerabilities fixed in Firefox 102

Announced
June 28, 2022
Impact
high
Products
Firefox
Fixed in

* Firefox 102

*Note*: While [Bug 1771084](https://bugzilla.mozilla.org/show_bug.cgi?id=1771084) does not represent a specific vulnerability that was fixed, we recommend anyone rebasing patches to include it. 102 branch: Patch [1](https://hg.mozilla.org/releases/mozilla-beta/rev/82e3067ad2e7) and [2](https://hg.mozilla.org/releases/mozilla-beta/rev/6e4639dc3614). 91 Branch: Patch [1](https://hg.mozilla.org/releases/mozilla-esr91/rev/72bca7a337e4) and [2](https://hg.mozilla.org/releases/mozilla-esr91/rev/befef01949f2) (Despite saying Parts 2 and 3, there is no Part 1)

#### [#CVE-2022-34479: A popup window could be resized in a way to overlay the address bar with web content](#CVE-2022-34479)

Reporter
Irvan Kurniawan
Impact
high
##### Description

A malicious website that could create a popup could have resized the popup to overlay the address bar with its own content, resulting in potential user confusion or spoofing attacks.
*This bug only affects Firefox for Linux. Other operating systems are unaffected.*

##### References

* [Bug 1745595](https://bugzilla.mozilla.org/show_bug.cgi?id=1745595)

#### [#CVE-2022-34470: Use-after-free in nsSHistory](#CVE-2022-34470)

Reporter
Armin Ebert
Impact
high
##### Description

Session history navigations may have led to a use-after-free and potentially exploitable crash.

##### References

* [Bug 1765951](https://bugzilla.mozilla.org/show_bug.cgi?id=1765951)

#### [#CVE-2022-34468: CSP sandbox header without "allow-scripts" can be bypassed via retargeted javascript: URI](#CVE-2022-34468)

Reporter
Armin Ebert
Impact
high
##### Description

An iframe that was not permitted to run scripts could do so if the user clicked on a `javascript:` link.

##### References

* [Bug 1768537](https://bugzilla.mozilla.org/show_bug.cgi?id=1768537)

#### [#CVE-2022-34482: Drag and drop of malicious image could have led to malicious executable and potential code execution](#CVE-2022-34482)

Reporter
Attila Suszter
Impact
moderate
##### Description

An attacker who could have convinced a user to drag and drop an image to a filesystem could have manipulated the resulting filename to contain an executable extension, and by extension potentially tricked the user into executing malicious code. While very similar, this is a separate issue from CVE-2022-34483.

##### References

* [Bug 845880](https://bugzilla.mozilla.org/show_bug.cgi?id=845880)

#### [#CVE-2022-34483: Drag and drop of malicious image could have led to malicious executable and potential code execution](#CVE-2022-34483)

Reporter
Eduardo Braun Prado
Impact
moderate
##### Description

An attacker who could have convinced a user to drag and drop an image to a filesystem could have manipulated the resulting filename to contain an executable extension, and by extension potentially tricked the user into executing malicious code. While very similar, this is a separate issue from CVE-2022-34482.

##### References

* [Bug 1335845](https://bugzilla.mozilla.org/show_bug.cgi?id=1335845)

#### [#CVE-2022-34476: ASN.1 parser could have been tricked into accepting malformed ASN.1](#CVE-2022-34476)

Reporter
Gustavo Grieco
Impact
moderate
##### Description

ASN.1 parsing of an indefinite SEQUENCE inside an indefinite GROUP could have resulted in the parser accepting malformed ASN.1.

##### References

* [Bug 1387919](https://bugzilla.mozilla.org/show_bug.cgi?id=1387919)

#### [#CVE-2022-34481: Potential integer overflow in ReplaceElementsAt](#CVE-2022-34481)

Reporter
Ronald Crane
Impact
moderate
##### Description

In the `nsTArray_Impl::ReplaceElementsAt()` function, an integer overflow could have occurred when the number of elements to replace was too large for the container.

##### References

* [Bug 1497246](https://bugzilla.mozilla.org/show_bug.cgi?id=1497246)
* [Bug 1483699](https://bugzilla.mozilla.org/show_bug.cgi?id=1483699)

#### [#CVE-2022-34474: Sandboxed iframes could redirect to external schemes](#CVE-2022-34474)

Reporter
Amazon Malvertising Team
Impact
moderate
##### Description

Even when an iframe was sandboxed with `allow-top-navigation-by-user-activation`, if it received a redirect header to an external protocol the browser would process the redirect and prompt the user as appropriate.

##### References

* [Bug 1677138](https://bugzilla.mozilla.org/show_bug.cgi?id=1677138)

#### [#CVE-2022-34469: TLS certificate errors on HSTS-protected domains could be bypassed by the user on Firefox for Android](#CVE-2022-34469)

Reporter
Peter Gerber
Impact
moderate
##### Description

When a TLS Certificate error occurs on a domain protected by the HSTS header, the browser should not allow the user to bypass the certificate error. On Firefox for Android, the user was presented with the option to bypass the error; this could only have been done by the user explicitly.
*This bug only affects Firefox for Android. Other operating systems are unaffected.*

##### References

* [Bug 1721220](https://bugzilla.mozilla.org/show_bug.cgi?id=1721220)

#### [#CVE-2022-34471: Compromised server could trick a browser into an addon downgrade](#CVE-2022-34471)

Reporter
Rob Wu
Impact
moderate
##### Description

When downloading an update for an addon, the downloaded addon update's version was not verified to match the version selected from the manifest. If the manifest had been tampered with on the server, an attacker could trick the browser into downgrading the addon to a prior version.

##### References

* [Bug 1766047](https://bugzilla.mozilla.org/show_bug.cgi?id=1766047)

#### [#CVE-2022-34472: Unavailable PAC file resulted in OCSP requests being blocked](#CVE-2022-34472)

Reporter
Laurent Bigonville
Impact
moderate
##### Description

If there was a PAC URL set and the server that hosts the PAC was not reachable, OCSP requests would have been blocked, resulting in incorrect error pages being shown.

##### References

* [Bug 1770123](https://bugzilla.mozilla.org/show_bug.cgi?id=1770123)

#### [#CVE-2022-34478: Microsoft protocols can be attacked if a user accepts a prompt](#CVE-2022-34478)

Reporter
Gijs
Impact
moderate
##### Description

The `ms-msdt`, `search`, and `search-ms` protocols deliver content to Microsoft applications, bypassing the browser, when a user accepts a prompt. These applications have had known vulnerabilities, exploited in the wild (although we know of none exploited through Firefox), so in this release Firefox has blocked these protocols from prompting the user to open them.
*This bug only affects Firefox on Windows. Other operating systems are unaffected.*

##### References

* [Bug 1773717](https://bugzilla.mozilla.org/show_bug.cgi?id=1773717)

#### [#CVE-2022-2200: Undesired attributes could be set as part of prototype pollution](#CVE-2022-2200)

Reporter
Manfred Paul via Trend Micro's Zero Day Initiative
Impact
moderate
##### Description

If an object prototype was corrupted by an attacker, they would have been able to set undesired attributes on a JavaScript object, leading to privileged code execution.

##### References

* [Bug 1771381](https://bugzilla.mozilla.org/show_bug.cgi?id=1771381)

#### [#CVE-2022-34480: Free of uninitialized pointer in lg\_init](#CVE-2022-34480)

Reporter
Ronald Crane
Impact
low
##### Description

Within the `lg_init()` function, if several allocations succeed but then one fails, an uninitialized pointer would have been freed despite never being allocated.

##### References

* [Bug 1454072](https://bugzilla.mozilla.org/show_bug.cgi?id=1454072)

#### [#CVE-2022-34477: MediaError message property leaked information on cross-origin same-site pages](#CVE-2022-34477)

Reporter
jannis
Impact
low
##### Description

The MediaError message property should be consistent to avoid leaking information about cross-origin resources; however for a same-site cross-origin resource, the message could have leaked information enabling XS-Leaks attacks.

##### References

* [Bug 1731614](https://bugzilla.mozilla.org/show_bug.cgi?id=1731614)

#### [#CVE-2022-34475: HTML Sanitizer could have been bypassed via same-origin script via use tags](#CVE-2022-34475)

Reporter
Gareth Heyes
Impact
low
##### Description

SVG `<use>` tags that referenced a same-origin document could have resulted in script execution if attacker input was sanitized via the HTML Sanitizer API. This would have required the attacker to reference a same-origin JavaScript file containing the script to be executed.

##### References

* [Bug 1757210](https://bugzilla.mozilla.org/show_bug.cgi?id=1757210)

#### [#CVE-2022-34473: HTML Sanitizer could have been bypassed via use tags](#CVE-2022-34473)

Reporter
Armin Ebert
Impact
low
##### Description

The HTML Sanitizer should have sanitized the `href` attribute of SVG `<use>` tags; however it incorrectly did not sanitize `xlink:href` attributes.

##### References

* [Bug 1770888](https://bugzilla.mozilla.org/show_bug.cgi?id=1770888)

#### [#CVE-2022-34484: Memory safety bugs fixed in Firefox 102 and Firefox ESR 91.11](#CVE-2022-34484)

Reporter
Mozilla developers and community
Impact
high
##### Description

The Mozilla Fuzzing Team reported potential vulnerabilities present in Firefox 101 and Firefox ESR 91.10. Some of these bugs showed evidence of JavaScript prototype or memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 102 and Firefox ESR 91.11](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1763634%2C1772651)

#### [#CVE-2022-34485: Memory safety bugs fixed in Firefox 102](#CVE-2022-34485)

Reporter
Mozilla developers and community
Impact
moderate
##### Description

Mozilla developers Bryce Seager van Dyk and the Mozilla Fuzzing Team reported potential vulnerabilities present in Firefox 101. Some of these bugs showed evidence of memory corruption and we presume that with enough effort some of these could have been exploited to run arbitrary code.

##### References

* [Memory safety bugs fixed in Firefox 102](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1768409%2C1768578)

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.1/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from bugzilla.mozilla.org_d3e93082_20250114_230035.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1745595)
* [XML](/show_bug.cgi?ctype=xml&id=1745595)

Closed
[Bug 1745595](/show_bug.cgi?id=1745595)
(CVE-2022-34479)

Opened 3 years ago
Closed 3 years ago

# Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing

## Categories

### (Core :: Widget: Gtk, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Widget%3A%20Gtk#Widget%3A%20Gtk)

Widget: Gtk
▾

Core :: Widget: Gtk
Mapping of cross platform widget interfaces to GTK platform APIs (both versions). Wayland bugs belong in this component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Widget%3A%20Gtk&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Widget%3A%20Gtk&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Widget%3A%20Gtk)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

S2

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

103 Branch

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr91 | [102+](/buglist.cgi?f1=cf_tracking_firefox_esr91&o1=equals&v1=102%2B) | [verified](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=verified) |
| firefox101 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox101&o1=equals&v1=wontfix) |
| firefox102 | [+](/buglist.cgi?f1=cf_tracking_firefox102&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox102&o1=equals&v1=verified) |
| firefox103 | [+](/buglist.cgi?f1=cf_tracking_firefox103&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox103&o1=equals&v1=verified) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr91 | 102+ | verified |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox101 |  | wontfix |
| firefox102 | + | verified |
| firefox103 | + | verified |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: sourc7, Assigned: karlt)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/15d034eb5ed480cb10a8a9e41e8b9f13?d=mm&size=40)  [karlt](/user_profile?user_id=274246)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/1f6e740893c5a41879a277dd0b0a0c4a?d=mm&size=40)  [sourc7](/user_profile?user_id=537720)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/1ad575baf124ff5058f4d44d5b066a29?d=mm&size=40)  [stransky](/user_profile?user_id=263117)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

24 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

[1771278](/show_bug.cgi?id=1771278 "RESOLVED FIXED - remove unused nsIRollupListener::NotifyGeometryChange()")

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[1602701](/show_bug.cgi?id=1602701 "RESOLVED FIXED - Improve handling for moving and resizing of windows on Linux"), [1702255](/show_bug.cgi?id=1702255 "RESOLVED FIXED - Intermittent /webdriver/tests/set_window_rect/set.py | <smth> - AssertionError: assert {'height': 600, 'width': 800, 'x': 100, 'y': 100} == {'height': 600, 'width': 800, 'x': 110, 'y': 100}"), [1723436](/show_bug.cgi?id=1723436 "RESOLVED DUPLICATE - Intermittent devtools/shared/commands/resource/tests/browser_resources_stylesheets.js | Test timed out -"), [1766919](/show_bug.cgi?id=1766919 "RESOLVED FIXED - Intermittent toolkit/components/pictureinpicture/tests/browser_fontSize_change.js | The medium font size is .06 of the PiP window height - 2.8667000000000016 <= 1 - JS frame :: chrome://mochitests/content/browser/toolkit/components/pictureinpicture/tests/"), [1766991](/show_bug.cgi?id=1766991 "RESOLVED FIXED - Intermittent toolkit/components/pictureinpicture/tests/browser_fontSize_change.js | The large font size is the max of 40px - 17.5 <= 1 - JS frame :: chrome://mochitests/content/browser/toolkit/components/pictureinpicture/tests/browser_fontSize_change.js :")

Dependency [tree](/showdependencytree.cgi?id=1745595&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1745595)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[304123](/show_bug.cgi?id=304123 "RESOLVED DUPLICATE - [Linux] scripts can make browser window larger than screen"), [1617506](/show_bug.cgi?id=1617506 "RESOLVED DUPLICATE - When starting Firefox with privacy.resistFingerprinting=true and layers.acceleration.force-enabled=true, half of the window is a black rectangle.")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1727653](/show_bug.cgi?id=1727653 "RESOLVED FIXED - Intermittent toolkit/content/tests/chrome/test_navigate_persist.html | Window width is persisted - got 136, expected 200")

## Details

### (4 keywords, Whiteboard: [reporter-external] [client-bounty-form] [verif?][adv-main102+][adv-esr91.11+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2022-34479

[Keywords:](/describekeywords.cgi)

[csectype-spoof](/buglist.cgi?keywords=csectype-spoof&resolution=---),
[perf-alert](/buglist.cgi?keywords=perf-alert&resolution=---),
[reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[reporter-external] [client-bounty-form] [verif?][adv-main102+][adv-esr91.11+]

QA Whiteboard:

[qa-triaged]

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [dveditz](/user_profile?user_id=1689) | [sec-bounty](#a15988856_1689 "3 years ago") | + |
| --- | --- | --- |
| [dveditz](/user_profile?user_id=1689) | sec-bounty | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (12 files)

| [spoof.bundle.html](/attachment.cgi?id=9254908)  [3 years ago](#c0)  [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)   61.12 KB, text/html |  | [Details](/attachment.cgi?id=9254908&action=edit) |
| --- | --- | --- |
| [Firefox - window.sizeToContent() resize leads to address bar spoofing.mp4](/attachment.cgi?id=9254909)  [3 years ago](#c1)  [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)   180.20 KB, video/mp4 |  | [Details](/attachment.cgi?id=9254909&action=edit) |
| [spoof.bundle2.html](/attachment.cgi?id=9270710)  [3 years ago](#c21)  [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)   61.25 KB, text/html |  | [Details](/attachment.cgi?id=9270710&action=edit) |
| [Screenshot\_20220404\_211041.png](/attachment.cgi?id=9270711)  [3 years ago](#c22)  [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)   117.04 KB, image/png |  | [Details](/attachment.cgi?id=9270711&action=edit) |
| [output from MOZ\_LOG=Widget:4 mozregression --launch 2022-04-01 --process-output stdout | grep -v expose](/attachment.cgi?id=9272783)  [3 years ago](#c26)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   22.81 KB, text/plain |  | [Details](/attachment.cgi?id=9272783&action=edit) |
| [Bug 1745595 - type ResizeInt() parameters to specify units r?stransky](/attachment.cgi?id=9278898)  [3 years ago](#c28)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   48 bytes, text/x-phabricator-request | pascalc : [approval-mozilla-beta+](#a15867799_24572 "3 years ago")  RyanVM : [approval-mozilla-esr91+](#c47 "3 years ago")  tjr : [sec-approval+](#a15458453_578488 "3 years ago") | [Details](/attachment.cgi?id=9278898&action=edit) | [Review](/attachment.cgi?id=9278898) |
| [Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky](/attachment.cgi?id=9278899)  [3 years ago](#c29)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   48 bytes, text/x-phabricator-request | pascalc : [approval-mozilla-beta+](#a15867803_24572 "3 years ago")  RyanVM : [approval-mozilla-esr91+](#a16251722_75935 "3 years ago")  tjr : [sec-approval+](#c34 "3 years ago") | [Details](/attachment.cgi?id=9278899&action=edit) | [Review](/attachment.cgi?id=9278899) |
| [Bug 1745595 wait for expected geometry after move or resize r?whimboo](/attachment.cgi?id=9278900)  [3 years ago](#c30)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   48 bytes, text/x-phabricator-request | pascalc : [approval-mozilla-beta+](#c37 "3 years ago")  RyanVM : [approval-mozilla-esr91+](#a16251725_75935 "3 years ago")  tjr : [sec-approval+](#a15458453_578488 "3 years ago") | [Details](/attachment.cgi?id=9278900&action=edit) | [Review](/attachment.cgi?id=9278900) |
| [Bug 1745595 - wait for resize to complete before getting font size r?niklas](/attachment.cgi?id=9278901)  [3 years ago](#c31)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   48 bytes, text/x-phabricator-request | pascalc : [approval-mozilla-beta+](#a15867807_24572 "3 years ago")  tjr : [sec-approval+](#a15458456_578488 "3 years ago") | [Details](/attachment.cgi?id=9278901&action=edit) | [Review](/attachment.cgi?id=9278901) |
| [Bug 1745595 - wait for resize to complete before adding media query r?daisuke](/attachment.cgi?id=9278902)  [3 years ago](#c32)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   48 bytes, text/x-phabricator-request | pascalc : [approval-mozilla-beta+](#a15867811_24572 "3 years ago")  RyanVM : [approval-mozilla-esr91+](#a16251727_75935 "3 years ago")  tjr : [sec-approval+](#a15458460_578488 "3 years ago") | [Details](/attachment.cgi?id=9278902&action=edit) | [Review](/attachment.cgi?id=9278902) |
| [Bug 1745595 wait for resize to complete before testing className (esr91-only) r?Mardak](/attachment.cgi?id=9281716)  [3 years ago](#c45)  [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)   48 bytes, text/x-phabricator-request | RyanVM : [approval-mozilla-esr91+](#a16251731_75935 "3 years ago") | [Details](/attachment.cgi?id=9281716&action=edit) | [Review](/attachment.cgi?id=9281716) |
| [advisory.txt](/attachment.cgi?id=9282677)  [3 years ago](#c52)  [Tom Ritter [:tjr]](/user_profile?user_id=578488)   376 bytes, text/plain |  | [Details](/attachment.cgi?id=9282677&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1745595#c0)• 3 years ago |
|  | |

Attached file
[spoof.bundle.html](attachment.cgi?id=9254908)
— [Details](attachment.cgi?id=9254908&action=edit)

After resize popup window using `window.sizeToContent()` on page with large margin top, surprisingly the address bar UI will pushed up and replaced with HTML5 page content, therefore it possible to spoof the address bar.

I can only reproduce this on Linux (X11 and Wayland) and WebRender enabled. But I couldn't reproduce this on WebRender (Software) or `gfx.webrender.software` set to `true`.

## Tested on:

* Firefox Nightly 97.0a1 (2021-12-11) (64-bit) using Arch Linux KDE (X11 and Wayland) on Intel i5-1035G1 (1920x1080 DPI 125% and DPI 100%)
* Firefox Nightly 97.0a1 (2021-12-11) (64-bit) using Arch Linux KDE (X11) on AMD Ryzen PRO 4650G (2560x1440 DPI 125%)
* Firefox ESR 91.4.0esr (64-bit) using Arch Linux KDE (X11) on AMD Ryzen PRO 4650G (2560x1440 DPI 125%)

## Steps to reproduce:

1. Visit attached spoof.bundle.html
2. Click "1920x1080" or "2560x1440"
3. Address bar is now spoofed with HTML5 page content

(Try to increase the `marginTop` on the testcase if Firefox popup address bar UI still appear on your display.)

Flags: sec-bounty?

|  | [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1745595#c1)• 3 years ago |
|  | |

Attached video
[Firefox - window.sizeToContent() resize leads to address bar spoofing.mp4](attachment.cgi?id=9254909)
— [Details](attachment.cgi?id=9254909&action=edit)

|  | [Sergey Galich [:serg]](/user_profile?user_id=691597) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a171445_691597)• 3 years ago |

Type: task → defectComponent: Security → Address Bar

|  | [:Gijs (he/him)](/user_profile?user_id=159069) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1745595#c2)• 3 years ago |
|  | |

Moving to graphics given this is behaving differently on webrender software vs. general webrender.

Group: firefox-core-security → gfx-core-securityComponent: Address Bar → GraphicsProduct: Firefox → Core

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1745595#c3)• 3 years ago |
|  | |

The popup is in an odd security state: even though the url is <https://bug1745595.bmoattachments.org/etc> -- there's a "document" icon (neither a locked lock, or a "not secure") and when clicked it claims the document is "about:blank" and no TLS/cert info. That would be independent of the graphics issue.

The above was on Mac where I can't reproduce the problem in this bug -- I see the real URL bar. Guess we should spin off a separate bug for that.

Tyson tried on Ubuntu Linux (Gnome) and couldn't reproduce. Unique to KDE? Unique to Arch linux? We need to narrow that down. Calling "moderate" for now because the target audience seems limited, but we can revise if we learn more.

Keywords: [csectype-spoof](/buglist.cgi?keywords=csectype-spoof&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a365294_1689)• 3 years ago |

Component: Graphics → Graphics: WebRender

|  | [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1745595#c4)• 3 years ago |
|  | |

(In reply to [Back in January] Daniel Veditz [:dveditz] from [comment #3](/show_bug.cgi?id=1745595#c3 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing"))

> Tyson tried on Ubuntu Linux (Gnome) and couldn't reproduce. Unique to KDE? Unique to Arch linux? We need to narrow that down. Calling "moderate" for now because the target audience seems limited, but we can revise if we learn more.

Thanks Dan for the update, it turns out it only affect window protocol `x11` and `xwayland`.

On Arch Linux KDE (Wayland) the Firefox window protocol default to `xwayland`, after set environment `MOZ_ENABLE_WAYLAND=1` and window protocol changed from `xwayland` to `wayland` I unable reproduce the issue.

I confirm I able to reproduce the issue on Ubuntu 21.10 after switch to "Ubuntu on Xorg" on user login or after logout.

(In reply to description)

> Firefox Nightly 97.0a1 (2021-12-11) (64-bit) using Arch Linux KDE (X11 and Wayland) on Intel i5-1035G1 (1920x1080 DPI 125% and DPI 100%)

Sorry I was mistakenly think that `xwayland` same as `wayland`, turns out it's different.

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1745595#c5)• 3 years ago |
|  | |

The severity field is not set for this bug.

:jimm, could you have a look please?

For more information, please visit [auto\_nag documentation](https://wiki.mozilla.org/Release_Management/autonag#workflow.2Fno_severity.py).

Flags: needinfo?(jmathies)

|  | [Jim Mathies [:jimm]](/user_profile?user_id=279663) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a4403916_279663)• 3 years ago |

Blocks: [gfx-triage](/show_bug.cgi?id=1632611 "NEW - [Meta] Graphics Triage Tracker")Flags: needinfo?(jmathies)

|  | [Jim Mathies [:jimm]](/user_profile?user_id=279663) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1745595#c6)• 3 years ago |
|  | |

sec-mod, and xwayland is not a popular config. Maybe the redhat folks can take a look?

No longer blocks: [gfx-triage](/show_bug.cgi?id=1632611 "NEW - [Meta] Graphics Triage Tracker")Component: Graphics: WebRender → Widget: GtkFlags: needinfo?(gpascutto)

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1745595#c7)• 3 years ago |
|  | |

Hmm, [comment 4](/show_bug.cgi?id=1745595#c4 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing") claims it affects `x11`, which is the default.

Flags: needinfo?(gpascutto)

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1745595#c8)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1745595&comment_id=15761999 "3 revisions") |
|  | |

I can reproduce this on my (K)Ubuntu 21.10 in X11. I don't know if that's the default for that release (it is what I'm using!), but surely current Ubuntu LTS is using X11?

If that's the case there may be an argument this is a sec-high? Alexandre, do you have stats of the distro usage and X11 vs Wayland?

Flags: needinfo?(lissyx+mozillians)

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1745595#c9)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1745595&comment_id=15762002 "2 revisions") |
|  | |

As for `Wayland` vs `XWayland`, our own builds only default to Wayland as of [bug 1749174](/show_bug.cgi?id=1749174 "RESOLVED FIXED - Consider enabling wayland if available").

Fedora and Ubuntu switched to Wayland a while ago, but I think that's after the Ubuntu LTS. ~~Fedora has no LTS so they're probably good~~ There's this thing called RHEL :-/

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1745595#c10)• 3 years ago |
|  | |

Martin, I know that this probably doesn't affect Fedora (but it likely affects RHEL!). Would you or someone from your team be willing to take this with the appropriate urgency? I think you're the most familiar with this code at this point.

Flags: needinfo?(stransky)

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a4721924_151147)• 3 years ago |

Severity: -- → S2

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a4721933_151147)• 3 years ago |

OS: Unspecified → LinuxHardware: Unspecified → x86\_64

|  | [Martin Stránský [:stransky] (ni? me)](/user_profile?user_id=263117) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1745595#c11)• 3 years ago |
|  | |

I'll try some RHEL.

|  | [Martin Stránský [:stransky] (ni? me)](/user_profile?user_id=263117) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a4723502_263117)• 3 years ago |

Flags: needinfo?(stransky)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a4729700_1689)• 3 years ago |

Keywords: [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---) → [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [:gerard-majax](/user_profile?user_id=41385) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1745595#c12)• 3 years ago |
|  | |

(In reply to Gian-Carlo Pascutto [:gcp] from [comment #8](/show_bug.cgi?id=1745595#c8 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing"))

> I can reproduce this on my (K)Ubuntu 21.10 in X11. I don't know if that's the default for that release (it is what I'm using!), but surely current Ubuntu LTS is using X11?
>
> If that's the case there may be an argument this is a sec-high? Alexandre, do you have stats of the distro usage and X11 vs Wayland?

as shared on matrix: <https://sql.telemetry.mozilla.org/queries/84095/source#208316>

Flags: needinfo?(lissyx+mozillians)

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1745595#c13)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1745595&comment_id=15766368 "1 revision") |
|  | |

FWIW we publicly shared these stats today: <https://www.phoronix.com/scan.php?page=news_item&px=Firefox-Wayland-X11-Stats>

|  | [Jan Horak [:jhorak]](/user_profile?user_id=328198) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1745595#c14)• 3 years ago |
|  | |

I'm unable to reproduce in RHEL 8.5/firefox 91.5.0esr. I got:

Compositing: Webrender (non software) - I had to set gfx.webrender.enabled to true to make it working

Intel driver

Window Protocol: xwayland

|  | [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)  Reporter |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1745595#c15)• 3 years ago |
|  | |

I recently checked this is still reproducible in Firefox Nightly 100.0a1 (2022-04-01) (64-bit) on Arch Linux (KDE x11). Is there any update on this?

|  | [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a9584121_537720)• 3 years ago |

Summary: Resize Popup Window Will Also Move the Address Bar leads to Address Bar Spoofing → Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing

|  | [:Gijs (he/him)](/user_profile?user_id=159069) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1745595#c16)• 3 years ago |
|  | |

(In reply to Irvan Kurniawan (:sourc7) from [comment #15](/show_bug.cgi?id=1745595#c15 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing"))

> I recently checked this is still reproducible in Firefox Nightly 100.0a1 (2022-04-01) (64-bit) on Arch Linux (KDE x11). Is there any update on this?

--> :gcp . Looks like this is now sec-high and it's been a few months. You could reproduce - do we know where to start looking for a fix?

Flags: needinfo?(gpascutto)

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1745595#c17)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1745595&comment_id=15840849 "2 revisions") |
|  | |

No. (I know this is sad, but we don't have a lot of GTK skill in house right now, let alone availability)

Flags: needinfo?(gpascutto)

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1745595#c18)• 3 years ago |
|  | |

Martin, does it affect RHEL? Are you able to assist here?

Flags: needinfo?(stransky)

|  | [Martin Stránský [:stransky] (ni? me)](/user_profile?user_id=263117) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1745595#c19)• 3 years ago |
|  | |

Hello Gian-Carlo,

we tested that on RHEL and it's not affected by this issue (see <https://bugzilla.mozilla.org/show_bug.cgi?id=1745595#c14>).

May that be something Ubuntu specific then?

Flags: needinfo?(stransky)

|  | [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)  Reporter |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1745595#c20)• 3 years ago |
|  | |

(In reply to Martin Stránský [:stransky] (ni? me) from [comment #19](/show_bug.cgi?id=1745595#c19 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing"))

> Hello Gian-Carlo,ww
>
> we tested that on RHEL and it's not affected by this issue (see <https://bugzilla.mozilla.org/show_bug.cgi?id=1745595#c14>).
>
> May that be something Ubuntu specific then?

I'm recently installed RHEL 8.5 on my machine, then set `gfx.webrender.enabled` to `true` on preinstalled Firefox 91.7.0esr.

After tweaking the testcase, finally I also able to reproduce this on RHEL 8.5, xwayland. I'll share the updated testcase soon.

|  | [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)  Reporter |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1745595#c21)• 3 years ago |
|  | |

Attached file
[spoof.bundle2.html](attachment.cgi?id=9270710)
— [Details](attachment.cgi?id=9270710&action=edit)

Alright here the updated testcase. I've tested this works on RHEL 8.5 on Laptop i5-1035G1 (1920x1080) and VirtualBox Guest (1920x1080 and 2560x1440) reproduced on Firefox 91.7.0esr and Firefox Nightly 100.0a1 (Compositing: WebRender and Window Protocol: xwayland).

Hi Martin can you try the updated testcase on your machine?

If it still doesn't work, try increase the `marginTop` and the `resize` function iteration. Thanks!

Flags: needinfo?(stransky)

|  | [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)  Reporter |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1745595#c22)• 3 years ago |
|  | |

Attached image
[Screenshot\_20220404\_211041.png](attachment.cgi?id=9270711)
— [Details](attachment.cgi?id=9270711&action=edit)

Attached screenshot demonstration reproduced in Firefox 91.7.0esr (64-bit) WebRender enabled on RHEL 8.5 using spoof.bundle2.html.

|  | [Jan Horak [:jhorak]](/user_profile?user_id=328198) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1745595#c23)• 3 years ago |
|  | |

With the `spoof.bundle2.html` I can reproduce the issue only when `gfx.webrender.enabled=true`. I've tried browser toolbox to locate the box with toolbar and it seems to be above the page content. I don't see any differences in position in the DOM in browser toolbox. I can do further debugging if desired, please let me know what more I can do for you.

Component: Widget: Gtk → Graphics: WebRenderFlags: needinfo?(stransky)

|  | [Jan Horak [:jhorak]](/user_profile?user_id=328198) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1745595#c24)• 3 years ago |
|  | |

I can also reproduce with upstream binary of Firefox 99.

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a10422173_151147)• 3 years ago |

Flags: needinfo?(karlt)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1745595#c25)• 3 years ago |
|  | |

I can reproduce on KDE with a single 3840x2160 monitor, `echo Xft.dpi: 192.0 | xrdb -merge`, and marginTop = 960 or 920 depending on whether the task bar is always visible or not.

This doesn't seem to be related to the invalidation bug often seen on presenting new windows as focus changes do not change the rendering.

This reproduces on 91.0a1 (2021-06-10), but tabs on earlier nightlies are crashing for me.

The effect is as if the window is sized too large for the display and then shrunk, but the content rendered by Firefox is not adjusted. Any subsequent resize of the window by window manager controls corrects the rendering and a scroll bar is presented.

The bug does not demonstrate the same symptoms with gfx.webrender.software:true, but the scroll bar is still not visible until a subsequent resize of the window. The difference may be that with non-software webrender the top of the window is clipped, but the bottom of the window is clipped with software webrender. Adding some text to the testcase and attempting to select the text indicates that hit testing is consistent with rendering when gfx.webrender.software:true but not when false.

Component: Graphics: WebRender → Widget: GtkFlags: needinfo?(karlt)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1745595#c26)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1745595&comment_id=15864069 "1 revision") |
|  | |

Attached file
[output from MOZ\_LOG=Widget:4 mozregression --launch 2022-04-01 --process-output stdout | grep -v expose](attachment.cgi?id=9272783)
— [Details](attachment.cgi?id=9272783&action=edit)

The problem can be seen at the end of the log.

Here, the size from the configure event is dispatched to layout correctly.

```
configure event 6,36 -> 3828 x 2118 scale 1'
GetScreenBounds 0,0 -> 3840 x 2190, unscaled 0,0 -> 3840 x 2190'
GetScreenBounds 0,0 -> 3840 x 2190, unscaled 0,0 -> 3840 x 2190'
GetScreenBounds 0,0 -> 3840 x 2190, unscaled 0,0 -> 3840 x 2190'
moz_container_size_allocate [7f2fea8c5400] 0,0 -> 3828 x 2118'
nsWindow::OnSizeAllocate 0,0 -> 3828 x 2118'
nsWindow::DispatchResized() size [3828, 2118]'
GetScreenBounds 0,0 -> 3828 x 2118, unscaled 0,0 -> 3828 x 2118'
GetScreenBounds 0,0 -> 3828 x 2118, unscaled 0,0 -> 3828 x 2118'
GetScreenBounds 0,0 -> 3828 x 2118, unscaled 0,0 -> 3828 x 2118'

```

The browser then requests that the window be made larger, and [optimistically tells layout that the window will be larger](https://searchfox.org/mozilla-central/rev/2c4522f76b23b024d9f29e140d41042853874c07/widget/gtk/nsWindow.cpp#963):

```
nsWindow::SetSizeMode 0'
    already set'
nsWindow::Resize 3840.000000 2190.000000'
nsWindow::ResizeInt x:0 y:0 -> w:3840 h:2190 aMove 0'
  ConstrainSize: w:3840 h;2190'
nsWindow::NativeMoveResize move 0 resize 1 to 0,0 -> 3840 x 2190'
nsWindow::DispatchResized() size [3840, 2190]'
GetScreenBounds 0,0 -> 3840 x 2190, unscaled 0,0 -> 3840 x 2190'
GetScreenBounds 0,0 -> 3840 x 2190, unscaled 0,0 -> 3840 x 2190'
GetScreenBounds 0,0 -> 3840 x 2190, unscaled 0,0 -> 3840 x 2190'

```

A configure event notifies the browser that the request for a larger window was denied, but this is not passed on to layout:

```
configure event 6,36 -> 3828 x 2118 scale 1'
GetScreenBounds 0,0 -> 3840 x 2190, unscaled 0,0 -> 3840 x 2190'
GetScreenBounds 0,0 -> 3840 x 2190, unscaled 0,0 -> 3840 x 2190'
GetScreenBounds 0,0 -> 3840 x 2190, unscaled 0,0 -> 3840 x 2190'
GetScreenBounds 0,0 -> 3840 x 2190, unscaled 0,0 -> 3840 x 2190'

```

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1745595#c27)• 3 years ago |
|  | |

This problem of ending up with an incorrect optimistic size from a request that is never effected [has shown up before](https://bugzilla.mozilla.org/show_bug.cgi?id=1489463#c68).

The [fix designed for that](https://phabricator.services.mozilla.com/D55941?id=206700) resolves the issue for [attachment 9270710](/attachment.cgi?id=9270710 "spoof.bundle2.html") [[details]](/attachment.cgi?id=9270710&action=edit "spoof.bundle2.html"), but does not address the whole problem: the same effect can still be produced by increasing the number and frequency of `sizeToContent()` calls. That's because GTK doesn't necessarily send a configure request from which to expect a configure notify event: ["If the configure request has not changed, we don't ever resend it, because it could mean fighting the user or window manager."](https://gitlab.gnome.org/GNOME/gtk/-/blob/3.24.31/gtk/gtkwindow.c#L9782)

Changing the behavior to only update widget sizes (`mBounds`) for managed windows after resizes are confirmed leads to [many test failures](https://treeherder.mozilla.org/jobs?repo=try&revision=3d69808aec41d5cbfad889a5d93497aa8c763222) in tests expecting synchronous application of sizes.

Keeping the behavior of optimistically and synchronously presuming resize sizes for resizes before the first size-allocate (but still changing behavior of later resizes) leads to a [much smaller set of failures](https://treeherder.mozilla.org/jobs?repo=try&revision=945df7d97fa4d5b6fcd040a4d78a73087677b810).

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a14746264_274246)• 3 years ago |

Assignee: nobody → karlt

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1745595#c28)• 3 years ago |
|  | |

Attached file
[Bug 1745595 - type ResizeInt() parameters to specify units r?stransky](attachment.cgi?id=9278898)
— [Details](attachment.cgi?id=9278898&action=edit)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1745595#c29)• 3 years ago |
|  | |

Attached file
[Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky](attachment.cgi?id=9278899)
— [Details](attachment.cgi?id=9278899&action=edit)

This provides a consistent order of bounds changes corresponding to resize

event notifications. Previously the size reported in bounds could bounce as

requested sizes were saved, then overwritten in OnSizeAllocate() with

previously queued sizes, and then usually eventually rewritten with the final

size in OnSizeAllocate() again.

Depends on D147727

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1745595#c30)• 3 years ago |
|  | |

Attached file
[Bug 1745595 wait for expected geometry after move or resize r?whimboo](attachment.cgi?id=9278900)
— [Details](attachment.cgi?id=9278900&action=edit)

The requestAnimationFrame() callback used in IdlePromise() may run sooner than

1/60 second, providing insufficient time for changes to be effected.

<https://searchfox.org/mozilla-central/rev/e567185fa464270f94430e7cf62d134f4df9a69f/layout/base/nsRefreshDriver.cpp#1730-1731>

Waiting for the "resize" and "MozUpdateWindowPos" events should provide

minimum wait in the common cases that the OS completes the changes requested.

This change should also resolve

<https://bugzilla.mozilla.org/show_bug.cgi?id=1702255>

Depends on D147728

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1745595#c31)• 3 years ago |
|  | |

Attached file
[Bug 1745595 - wait for resize to complete before getting font size r?niklas](attachment.cgi?id=9278901)
— [Details](attachment.cgi?id=9278901&action=edit)

With the associated widget/gtk/nsWindow.cpp changes, this should also resolve

<https://bugzilla.mozilla.org/show_bug.cgi?id=1766919> and

<https://bugzilla.mozilla.org/show_bug.cgi?id=1766991>

Depends on D147729

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1745595#c32)• 3 years ago |
|  | |

Attached file
[Bug 1745595 - wait for resize to complete before adding media query r?daisuke](attachment.cgi?id=9278902)
— [Details](attachment.cgi?id=9278902&action=edit)

This and the associated widget/gtk/nsWindow.cpp changes may also help with

<https://bugzilla.mozilla.org/show_bug.cgi?id=1723436>

Depends on D147730

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a14904370_274246)• 3 years ago |

Depends on: [1771278](/show_bug.cgi?id=1771278 "RESOLVED FIXED - remove unused nsIRollupListener::NotifyGeometryChange()")

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1745595#c33)• 3 years ago |
|  | |

Comment on [attachment 9278899](/attachment.cgi?id=9278899 "Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky") [[details]](/attachment.cgi?id=9278899&action=edit "Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky")

[Bug 1745595](/show_bug.cgi?id=1745595 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing") record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky

### Security Approval Request

* **How easily could an exploit be constructed based on the patch?**: There are some hints here about the resize not being honored by the OS.

  What is not mentioned is that the chrome can be missing in some such situations.
* **Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?**: Unknown
* **Which older supported branches are affected by this flaw?**: All
* **If not all supported branches, which bug introduced the flaw?**: None
* **Do you have backports for the affected branches?**: No
* **If not, how different, hard to create, and risky will they be?**: Backports will likely need hand crafting for at least some specific branches due to frequent/recent changes in the code.

  The same approaches should be generally applicable.
* **How likely is this patch to cause regressions; how much testing does it need?**: This is high risk. The code has seen high turnover due to many different edge cases.

Testing would focus on X11 and Wayland Linux platforms.

Popup sizing and positioning would be tested with different chrome UI popup windows, opened from different positions and resized where possible (e.g. bookmarks popup).

Changes to other platforms involve only Geckodriver, not typical usage, and are well covered by automated tests.

* **Is Android affected?**: No
[Attachment #9278899](/attachment.cgi?id=9278899&action=edit "Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky") -
Flags: sec-approval?

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15351362_274246)• 3 years ago |

[Attachment #9278898](/attachment.cgi?id=9278898&action=edit "Bug 1745595 - type ResizeInt() parameters to specify units r?stransky") -
Flags: sec-approval?
[Attachment #9278900](/attachment.cgi?id=9278900&action=edit "Bug 1745595 wait for expected geometry after move or resize r?whimboo") -
Flags: sec-approval?
[Attachment #9278901](/attachment.cgi?id=9278901&action=edit "Bug 1745595 - wait for resize to complete before getting font size r?niklas") -
Flags: sec-approval?
[Attachment #9278902](/attachment.cgi?id=9278902&action=edit "Bug 1745595 - wait for resize to complete before adding media query r?daisuke") -
Flags: sec-approval?

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1745595#c34)• 3 years ago |
|  | |

Comment on [attachment 9278899](/attachment.cgi?id=9278899 "Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky") [[details]](/attachment.cgi?id=9278899&action=edit "Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky")

[Bug 1745595](/show_bug.cgi?id=1745595 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing") record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky

Approved to land, and uplift if/when ready

[Attachment #9278899](/attachment.cgi?id=9278899&action=edit "Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15458453_578488)• 3 years ago |

[Attachment #9278898](/attachment.cgi?id=9278898&action=edit "Bug 1745595 - type ResizeInt() parameters to specify units r?stransky") -
Flags: sec-approval? → sec-approval+
[Attachment #9278900](/attachment.cgi?id=9278900&action=edit "Bug 1745595 wait for expected geometry after move or resize r?whimboo") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15458456_578488)• 3 years ago |

[Attachment #9278901](/attachment.cgi?id=9278901&action=edit "Bug 1745595 - wait for resize to complete before getting font size r?niklas") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15458460_578488)• 3 years ago |

[Attachment #9278902](/attachment.cgi?id=9278902&action=edit "Bug 1745595 - wait for resize to complete before adding media query r?daisuke") -
Flags: sec-approval? → sec-approval+

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15496822_600971)• 3 years ago |

[Attachment #9278899](/attachment.cgi?id=9278899&action=edit "Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky") -
Attachment description: Bug 1745595 - record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky → Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15497105_600971)• 3 years ago |

[Attachment #9278900](/attachment.cgi?id=9278900&action=edit "Bug 1745595 wait for expected geometry after move or resize r?whimboo") -
Attachment description: Bug 1745595 - wait for expected geometry after move or resize r?whimboo → Bug 1745595 wait for expected geometry after move or resize r?whimboo

|  | [Henrik Skupin [:whimboo][⌚️UTC+2]](/user_profile?user_id=76551) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15535334_76551)• 3 years ago |

Blocks: [1602701](/show_bug.cgi?id=1602701 "RESOLVED FIXED - Improve handling for moving and resizing of windows on Linux")

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=1745595#c35)• 3 years ago |
|  | |

type ResizeInt() parameters to specify units r=stransky

<https://hg.mozilla.org/integration/autoland/rev/051d496ee57d98518f98a4d45c17c797b79c0c11>

<https://hg.mozilla.org/mozilla-central/rev/051d496ee57d>

wait for resize to complete before getting font size r=niklas

<https://hg.mozilla.org/integration/autoland/rev/ce93361507ded340ce9404fe947d0d01dc26dca0>

<https://hg.mozilla.org/mozilla-central/rev/ce93361507de>

wait for resize to complete before adding media query r=daisuke

<https://hg.mozilla.org/integration/autoland/rev/a647c26f9139986bd8ce1a1c66c45990b79d121b>

<https://hg.mozilla.org/mozilla-central/rev/a647c26f9139>

record window size changes from app-initiated resizes asynchronously after the first size-allocate r=stransky

<https://hg.mozilla.org/integration/autoland/rev/4102176d73ef57acb388b80ccdd9af0686ec6f2d>

<https://hg.mozilla.org/mozilla-central/rev/4102176d73ef>

wait for expected geometry after move or resize r=whimboo,webdriver-reviewers

<https://hg.mozilla.org/integration/autoland/rev/c2cd1e58dd94f78e6ed04798669635259a546964>

<https://hg.mozilla.org/mozilla-central/rev/c2cd1e58dd94>

Group: gfx-core-security → core-security-releaseStatus: NEW → RESOLVEDClosed: 3 years ago
[status-firefox103](/buglist.cgi?f1=cf_status_firefox103&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox103&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → 103 Branch

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15590734_75935)• 3 years ago |

[status-firefox101](/buglist.cgi?f1=cf_status_firefox101&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox101&o1=equals&v1=wontfix)
[status-firefox102](/buglist.cgi?f1=cf_status_firefox102&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox102&o1=equals&v1=affected)
[status-firefox-esr91](/buglist.cgi?f1=cf_status_firefox_esr91&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=affected)
[tracking-firefox102](/buglist.cgi?f1=cf_tracking_firefox102&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox102&o1=equals&v1=%2B)
[tracking-firefox103](/buglist.cgi?f1=cf_tracking_firefox103&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox103&o1=equals&v1=%2B)
[tracking-firefox-esr91](/buglist.cgi?f1=cf_tracking_firefox_esr91&o1=isnotempty):
--- → [102+](/buglist.cgi?f1=cf_tracking_firefox_esr91&o1=equals&v1=102%2B)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=1745595#c36)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1745595&comment_id=15935932 "1 revision") |
|  | |

Comment on [attachment 9278900](/attachment.cgi?id=9278900 "Bug 1745595 wait for expected geometry after move or resize r?whimboo") [[details]](/attachment.cgi?id=9278900&action=edit "Bug 1745595 wait for expected geometry after move or resize r?whimboo")

[Bug 1745595](/show_bug.cgi?id=1745595 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing") wait for expected geometry after move or resize r?whimboo

### Beta/Release Uplift Approval Request

* **User impact if declined**: sec-high
* **Is this code covered by automated tests?**: Unknown
* **Has the fix been verified in Nightly?**: No
* **Needs manual test from QE?**: Yes
* **If yes, steps to reproduce**: Use [attachment 9270710](/attachment.cgi?id=9270710 "spoof.bundle2.html") [[details]](/attachment.cgi?id=9270710&action=edit "spoof.bundle2.html") with X11 Linux and 1920x1080 or 2560x1440 monitor.

Partial coverage in automated tests.

* **List of other uplifts needed**: None
* **Risk to taking this patch**: High
* **Why is the change risky/not risky? (and alternatives if risky)**: The code has seen high turnover due to many different edge cases.
* **String changes made/needed**: None
* **Is Android affected?**: No

Beta/102 needs all patches but needs older diffs of two revisions from before rebases across recent trunk changes:

<https://phabricator.services.mozilla.com/D147728?id=585997>

<https://phabricator.services.mozilla.com/D147729?id=587806>

The easiest way to get the complete set of five changesets is

```
% hg pull -r 1456543b113c https://hg.mozilla.org/try
% hg rebase --rev 7ca436eeed37..1456543b113c -d <dest>

```
[Attachment #9278900](/attachment.cgi?id=9278900&action=edit "Bug 1745595 wait for expected geometry after move or resize r?whimboo") -
Flags: approval-mozilla-beta?

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15605711_274246)• 3 years ago |

[Attachment #9278898](/attachment.cgi?id=9278898&action=edit "Bug 1745595 - type ResizeInt() parameters to specify units r?stransky") -
Flags: approval-mozilla-beta?
[Attachment #9278899](/attachment.cgi?id=9278899&action=edit "Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky") -
Flags: approval-mozilla-beta?
[Attachment #9278901](/attachment.cgi?id=9278901&action=edit "Bug 1745595 - wait for resize to complete before getting font size r?niklas") -
Flags: approval-mozilla-beta?
[Attachment #9278902](/attachment.cgi?id=9278902&action=edit "Bug 1745595 - wait for resize to complete before adding media query r?daisuke") -
Flags: approval-mozilla-beta?

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15605896_274246)• 3 years ago |

Whiteboard: [reporter-external] [client-bounty-form] [verif?] → [reporter-external] [client-bounty-form] [verif?][comment 36 for 102/beta uplift instructions]

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=1745595#c37)• 3 years ago |
|  | |

Comment on [attachment 9278900](/attachment.cgi?id=9278900 "Bug 1745595 wait for expected geometry after move or resize r?whimboo") [[details]](/attachment.cgi?id=9278900&action=edit "Bug 1745595 wait for expected geometry after move or resize r?whimboo")

[Bug 1745595](/show_bug.cgi?id=1745595 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing") wait for expected geometry after move or resize r?whimboo

Approved for 102 beta 8, thanks.

[Attachment #9278900](/attachment.cgi?id=9278900&action=edit "Bug 1745595 wait for expected geometry after move or resize r?whimboo") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15867799_24572)• 3 years ago |

[Attachment #9278898](/attachment.cgi?id=9278898&action=edit "Bug 1745595 - type ResizeInt() parameters to specify units r?stransky") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15867803_24572)• 3 years ago |

[Attachment #9278899](/attachment.cgi?id=9278899&action=edit "Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15867807_24572)• 3 years ago |

[Attachment #9278901](/attachment.cgi?id=9278901&action=edit "Bug 1745595 - wait for resize to complete before getting font size r?niklas") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15867811_24572)• 3 years ago |

[Attachment #9278902](/attachment.cgi?id=9278902&action=edit "Bug 1745595 - wait for resize to complete before adding media query r?daisuke") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=1745595#c38)• 3 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/713197083c4e>

<https://hg.mozilla.org/releases/mozilla-beta/rev/ce43ec4f4cf2>

<https://hg.mozilla.org/releases/mozilla-beta/rev/17768e09997f>

<https://hg.mozilla.org/releases/mozilla-beta/rev/8c8cf025c410>

<https://hg.mozilla.org/releases/mozilla-beta/rev/6f80f48a4c78>

[status-firefox102](/buglist.cgi?f1=cf_status_firefox102&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox102&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox102&o1=equals&v1=fixed)

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15867973_24572)• 3 years ago |

Flags: qe-verify+

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=1745595#c39)• 3 years ago |
|  | |

Karl, are you in contact with our QA team for the manual test or do you need me to loop in a Softvision Desktop QA person? Thanks

Flags: needinfo?(karlt)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=1745595#c40)• 3 years ago |
|  | |

We're also going to need rebased patches for ESR91 by this time next week.

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=1745595#c41)• 3 years ago |
|  | |

(In reply to Pascal Chevrel:pascalc from [comment #39](/show_bug.cgi?id=1745595#c39 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing"))

> Karl, are you in contact with our QA team for the manual test or do you need me to loop in a Softvision Desktop QA person? Thanks

I don't have a contact. If you are able to loop someone in, that would be great, thanks.

(In reply to Ryan VanderMeulen [:RyanVM] from [comment #40](/show_bug.cgi?id=1745595#c40 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing"))

> We're also going to need rebased patches for ESR91 by this time next week.

Thanks for the detail there. I'll get onto that.

Flags: needinfo?(karlt) → needinfo?(pascalc)

|  | [Pascal Chevrel:pascalc](/user_profile?user_id=24572) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15949401_24572)• 3 years ago |

Flags: needinfo?(pascalc)

|  | [Andrei Vaida [:avaida]](/user_profile?user_id=488993) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=1745595#c42)• 3 years ago |
|  | |

Cristian will handle the work here.

Flags: needinfo?(cristian.baica)

|  | [Camelia Badau [:cbadau], Desktop Test Engineering](/user_profile?user_id=500622) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15953713_500622)• 3 years ago |

QA Whiteboard: [qa-triaged]

|  | [Cristian Baica [:cbaica], Release Desktop QA](/user_profile?user_id=614785) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=1745595#c43)• 3 years ago |
|  | |

I've managed to reproduce the issue on Ubuntu 20.04 (1920x1080 and 2560x1440 resolutions) and Ubuntu 22.04 using the Fx 97.0a1 (2021-12-11 build).

The issue is verified fixed in the latest Fx103.0a1 build using Ubuntu 20.04 and Ubuntu 22.04 environments. For Ubuntu 20.04 the issue was verified on both 1080p and 1440p(2k resolution). This was tested with and without wayland and I'm happy to report the issue is fixed in both cases. For Ubuntu 22.04 I could only test the 1080p resolution and mentioned the issue is fixed there as well.

Waiting on Fx 102.0b8 to build and verify there as well.

[status-firefox103](/buglist.cgi?f1=cf_status_firefox103&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox103&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox103&o1=equals&v1=verified)Flags: needinfo?(cristian.baica)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a15988856_1689)• 3 years ago |

Flags: sec-bounty? → sec-bounty+

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16004584_274246)• 3 years ago |

See Also: → [1727653](/show_bug.cgi?id=1727653 "RESOLVED FIXED - Intermittent toolkit/content/tests/chrome/test_navigate_persist.html | Window width is persisted - got 136, expected 200")

|  | [Cristian Baica [:cbaica], Release Desktop QA](/user_profile?user_id=614785) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=1745595#c44)• 3 years ago |
|  | |

The issue is verified fixed in Fx102.0b8 on Ubuntu and Ubuntu Wayland (20.04). The address bar is no longer spoofed.

Status: RESOLVED → VERIFIED
[status-firefox102](/buglist.cgi?f1=cf_status_firefox102&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox102&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox102&o1=equals&v1=verified)

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=1745595#c45)• 3 years ago |
|  | |

Attached file
[Bug 1745595 wait for resize to complete before testing className (esr91-only) r?Mardak](attachment.cgi?id=9281716)
— [Details](attachment.cgi?id=9281716&action=edit)

This uses the same approach as in D147730.

The test was removed on newer branches by D127252.

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=1745595#c46)• 3 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1745595&comment_id=15946718 "1 revision") |
|  | |

Comment on [attachment 9278900](/attachment.cgi?id=9278900 "Bug 1745595 wait for expected geometry after move or resize r?whimboo") [[details]](/attachment.cgi?id=9278900&action=edit "Bug 1745595 wait for expected geometry after move or resize r?whimboo")

[Bug 1745595](/show_bug.cgi?id=1745595 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing") wait for expected geometry after move or resize r?whimboo

### ESR Uplift Approval Request

* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**: sec-high
* **User impact if declined**: sec-high
* **Fix Landed on Version**: 103
* **Risk to taking this patch**: High
* **Why is the change risky/not risky? (and alternatives if risky)**: The code has seen high turnover due to many different edge cases.

The easiest way to get the complete set of five changesets is

```
% hg pull -r e3f4c1155287 https://hg.mozilla.org/try
% hg rebase --rev c3b21017a41e..e3f4c1155287 -d <dest>

```

D147730 [attachment 9278901](/attachment.cgi?id=9278901 "Bug 1745595 - wait for resize to complete before getting font size r?niklas") [[details]](/attachment.cgi?id=9278901&action=edit "Bug 1745595 - wait for resize to complete before getting font size r?niklas") is not required (and not included in c3b21017a41e..e3f4c1155287), due to the test not existing on ESR91.

[Attachment #9278900](/attachment.cgi?id=9278900&action=edit "Bug 1745595 wait for expected geometry after move or resize r?whimboo") -
Flags: approval-mozilla-esr91?

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16188565_274246)• 3 years ago |

[Attachment #9278898](/attachment.cgi?id=9278898&action=edit "Bug 1745595 - type ResizeInt() parameters to specify units r?stransky") -
Flags: approval-mozilla-esr91?
[Attachment #9278899](/attachment.cgi?id=9278899&action=edit "Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky") -
Flags: approval-mozilla-esr91?
[Attachment #9278902](/attachment.cgi?id=9278902&action=edit "Bug 1745595 - wait for resize to complete before adding media query r?daisuke") -
Flags: approval-mozilla-esr91?
[Attachment #9281716](/attachment.cgi?id=9281716&action=edit "Bug 1745595 wait for resize to complete before testing className (esr91-only) r?Mardak") -
Flags: approval-mozilla-esr91?

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16208472_274246)• 3 years ago |

Blocks: [1766991](/show_bug.cgi?id=1766991 "RESOLVED FIXED - Intermittent toolkit/components/pictureinpicture/tests/browser_fontSize_change.js | The large font size is the max of 40px - 17.5 <= 1 - JS frame :: chrome://mochitests/content/browser/toolkit/components/pictureinpicture/tests/browser_fontSize_change.js :")

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16208501_274246)• 3 years ago |

Blocks: [1766919](/show_bug.cgi?id=1766919 "RESOLVED FIXED - Intermittent toolkit/components/pictureinpicture/tests/browser_fontSize_change.js | The medium font size is .06 of the PiP window height - 2.8667000000000016 <= 1 - JS frame :: chrome://mochitests/content/browser/toolkit/components/pictureinpicture/tests/")

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16208701_274246)• 3 years ago |

Blocks: [1723436](/show_bug.cgi?id=1723436 "RESOLVED DUPLICATE - Intermittent devtools/shared/commands/resource/tests/browser_resources_stylesheets.js | Test timed out -")

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16208823_274246)• 3 years ago |

Blocks: [1702255](/show_bug.cgi?id=1702255 "RESOLVED FIXED - Intermittent /webdriver/tests/set_window_rect/set.py | <smth> - AssertionError: assert {'height': 600, 'width': 800, 'x': 100, 'y': 100} == {'height': 600, 'width': 800, 'x': 110, 'y': 100}")

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=1745595#c47)• 3 years ago |
|  | |

Comment on [attachment 9278898](/attachment.cgi?id=9278898 "Bug 1745595 - type ResizeInt() parameters to specify units r?stransky") [[details]](/attachment.cgi?id=9278898&action=edit "Bug 1745595 - type ResizeInt() parameters to specify units r?stransky")

[Bug 1745595](/show_bug.cgi?id=1745595 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing") - type ResizeInt() parameters to specify units r?stransky

Approved for 91.11esr. Thanks for rebasing.

[Attachment #9278898](/attachment.cgi?id=9278898&action=edit "Bug 1745595 - type ResizeInt() parameters to specify units r?stransky") -
Flags: approval-mozilla-esr91? → approval-mozilla-esr91+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16251722_75935)• 3 years ago |

[Attachment #9278899](/attachment.cgi?id=9278899&action=edit "Bug 1745595 record window size changes from app-initiated resizes asynchronously after the first size-allocate r?stransky") -
Flags: approval-mozilla-esr91? → approval-mozilla-esr91+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16251725_75935)• 3 years ago |

[Attachment #9278900](/attachment.cgi?id=9278900&action=edit "Bug 1745595 wait for expected geometry after move or resize r?whimboo") -
Flags: approval-mozilla-esr91? → approval-mozilla-esr91+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16251727_75935)• 3 years ago |

[Attachment #9278902](/attachment.cgi?id=9278902&action=edit "Bug 1745595 - wait for resize to complete before adding media query r?daisuke") -
Flags: approval-mozilla-esr91? → approval-mozilla-esr91+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16251731_75935)• 3 years ago |

[Attachment #9281716](/attachment.cgi?id=9281716&action=edit "Bug 1745595 wait for resize to complete before testing className (esr91-only) r?Mardak") -
Flags: approval-mozilla-esr91? → approval-mozilla-esr91+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=1745595#c48)• 3 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr91/rev/e5a2f9e64dd4>

<https://hg.mozilla.org/releases/mozilla-esr91/rev/9ce6409adf88>

<https://hg.mozilla.org/releases/mozilla-esr91/rev/6a8bbdb2f763>

<https://hg.mozilla.org/releases/mozilla-esr91/rev/f3193a7893f3>

<https://hg.mozilla.org/releases/mozilla-esr91/rev/a183595253d2>

[status-firefox-esr91](/buglist.cgi?f1=cf_status_firefox_esr91&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=fixed)

|  | [Cristian Baica [:cbaica], Release Desktop QA](/user_profile?user_id=614785) |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=1745595#c49)• 3 years ago |
|  | |

The issue is verified fixed using the latest Fx 102.0 ESR and Fx91.11.0 ESR on Ubuntu 20.04. Both builds were tested on 1080p and 1440p, on both wayland and 'regular' Ubuntu, with webrender enabled. The address bar was no longer spoofed.

[status-firefox-esr91](/buglist.cgi?f1=cf_status_firefox_esr91&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox_esr91&o1=equals&v1=verified)Flags: qe-verify+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16596853_578488)• 3 years ago |

Whiteboard: [reporter-external] [client-bounty-form] [verif?][comment 36 for 102/beta uplift instructions] → [reporter-external] [client-bounty-form] [verif?][comment 36 for 102/beta uplift instructions][adv-main102+]

|  | [Karl Tomlinson (:karlt)](/user_profile?user_id=274246)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16623451_274246)• 3 years ago |

Whiteboard: [reporter-external] [client-bounty-form] [verif?][comment 36 for 102/beta uplift instructions][adv-main102+] → [reporter-external] [client-bounty-form] [verif?][adv-main102+]

|  | [Alexandru Ionescu (needinfo me) [:alexandrui]](/user_profile?user_id=634134) |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=1745595#c50)• 3 years ago |
|  | |

(In reply to Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout) from [comment #35](/show_bug.cgi?id=1745595#c35 "VERIFIED FIXED - Resize Popup Window Will Also Render Over the Address Bar leads to Address Bar Spoofing"))

> wait for expected geometry after move or resize r=whimboo,webdriver-reviewers
>
> <https://hg.mozilla.org/integration/autoland/rev/c2cd1e58dd94f78e6ed04798669635259a546964>
>
> <https://hg.mozilla.org/mozilla-central/rev/c2cd1e58dd94>

== Change summary for alert #34402 (as of Fri, 10 Jun 2022 13:12:12 GMT) ==

### Improvements:

| **Ratio** | **Test** | **Platform** | **Options** | **Absolute values (old vs new)** |
| --- | --- | --- | --- | --- |
| [8%](https://treeherder.mozilla.org/perfherder/graphs?timerange=1209600&series=autoland,4060651,1,13) | [reddit-billgates-post-2.hot](https://firefox-source-docs.mozilla.org/testing/perfdocs/raptor.html#reddit-billgates-post-2-i) fcp | linux1804-64-shippable-qr | cold fission webrender | 307.05 -> 283.75 |
| [8%](https://treeherder.mozilla.org/perfherder/graphs?timerange=1209600&series=autoland,4060655,1,13) | [reddit-billgates-post-2.top](https://firefox-source-docs.mozilla.org/testing/perfdocs/raptor.html#reddit-billgates-post-2-i) fcp | linux1804-64-shippable-qr | cold fission webrender | 307.05 -> 283.75 |
| [8%](https://treeherder.mozilla.org/perfherder/graphs?timerange=1209600&series=autoland,4060647,1,13) | [reddit-billgates-post-2.billg](https://firefox-source-docs.mozilla.org/testing/perfdocs/raptor.html#reddit-billgates-post-2-i) fcp | linux1804-64-shippable-qr | cold fission webrender | 307.05 -> 283.75 |

For up to date results, see: <https://treeherder.mozilla.org/perfherder/alerts?id=34402>

|  | [Alex Finder](/user_profile?user_id=691270) |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=1745595#c51)• 3 years ago |
|  | |

== Change summary for alert #34554 (as of Fri, 17 Jun 2022 15:12:47 GMT) ==

### Improvements:

| **Ratio** | **Test** | **Platform** | **Options** | **Absolute values (old vs new)** |
| --- | --- | --- | --- | --- |
| [4%](https://treeherder.mozilla.org/perfherder/graphs?timerange=7776000&series=mozilla-beta,3891462,1,13) | [twitter](https://firefox-source-docs.mozilla.org/testing/perfdocs/raptor.html#twitter-d) fcp | linux1804-64-shippable-qr | cold fission webrender | 228.89 -> 220.24 |

For up to date results, see: <https://treeherder.mozilla.org/perfherder/alerts?id=34554>

|  | [Alex Finder](/user_profile?user_id=691270) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16732448_691270)• 3 years ago |

Keywords: [perf-alert](/buglist.cgi?keywords=perf-alert&resolution=---)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=1745595#c52)• 3 years ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9282677)
— [Details](attachment.cgi?id=9282677&action=edit)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16841824_578488)• 3 years ago |

Alias: CVE-2022-34479

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a16848732_578488)• 3 years ago |

Whiteboard: [reporter-external] [client-bounty-form] [verif?][adv-main102+] → [reporter-external] [client-bounty-form] [verif?][adv-main102+][adv-esr91.11+]

|  | [Emilio Cobos Álvarez (:emilio)](/user_profile?user_id=546716) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a28490131_546716)• 2 years ago |

Duplicate of this bug: [1617506](/show_bug.cgi?id=1617506 "RESOLVED DUPLICATE - When starting Firefox with privacy.resistFingerprinting=true and layers.acceleration.force-enabled=true, half of the window is a black rectangle.")

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a34687721_1689)• 2 years ago |

Group: core-security-release

|  | [Gian-Carlo Pascutto [:gcp]](/user_profile?user_id=151147) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a45003532_151147)• 2 years ago |

Duplicate of this bug: [304123](/show_bug.cgi?id=304123 "RESOLVED DUPLICATE - [Linux] scripts can make browser window larger than screen")

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1745595#a77849298_5898)• 8 months ago |

Keywords: [reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)
You need to [log in](/show_bug.cgi?id=1745595&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Irvan Kurniawan (:sourc7)](/user_profile?user_id=537720)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


