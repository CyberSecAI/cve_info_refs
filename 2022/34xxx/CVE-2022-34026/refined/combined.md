=== Content from gist.github.com_ff353170_20250114_221731.html ===

[Skip to content](#start-of-content)

[All gists](/discover)
[Back to GitHub](https://github.com)
[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Fenferas%2F85cdbadf5cba32ec7c8db6ea9e6833bf)
[Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2Fenferas%2F85cdbadf5cba32ec7c8db6ea9e6833bf&source=header-gist)

[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Fenferas%2F85cdbadf5cba32ec7c8db6ea9e6833bf) [Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2Fenferas%2F85cdbadf5cba32ec7c8db6ea9e6833bf&source=header-gist)

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

Instantly share code, notes, and snippets.

[![@enferas](https://avatars.githubusercontent.com/u/10528985?s=64&v=4)](/enferas)

# [enferas](/enferas)/**[CVE-2022-34026.md](/enferas/85cdbadf5cba32ec7c8db6ea9e6833bf)**

Created
September 22, 2022 13:54

Show Gist options

* [Download ZIP](/enferas/85cdbadf5cba32ec7c8db6ea9e6833bf/archive/6b90a6d79f9156c0049346ed6677ea048eff12b2.zip)

* [Star
  (0)
  0](/login?return_to=https%3A%2F%2Fgist.github.com%2Fenferas%2F85cdbadf5cba32ec7c8db6ea9e6833bf)You must be signed in to star a gist
* [Fork
  (0)
  0](/login?return_to=https%3A%2F%2Fgist.github.com%2Fenferas%2F85cdbadf5cba32ec7c8db6ea9e6833bf)You must be signed in to fork a gist

* Embed

  + Embed
     Embed this gist in your website.
  + Share
     Copy sharable link for this gist.
  + Clone via HTTPS
     Clone using the web URL.
  + [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

  Clone this repository at &lt;script src=&quot;https://gist.github.com/enferas/85cdbadf5cba32ec7c8db6ea9e6833bf.js&quot;&gt;&lt;/script&gt;
* Save enferas/85cdbadf5cba32ec7c8db6ea9e6833bf to your computer and use it in GitHub Desktop.

[Code](/enferas/85cdbadf5cba32ec7c8db6ea9e6833bf)
[Revisions
1](/enferas/85cdbadf5cba32ec7c8db6ea9e6833bf/revisions)

Embed

* Embed
   Embed this gist in your website.
* Share
   Copy sharable link for this gist.
* Clone via HTTPS
   Clone using the web URL.
* [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

Clone this repository at &lt;script src=&quot;https://gist.github.com/enferas/85cdbadf5cba32ec7c8db6ea9e6833bf.js&quot;&gt;&lt;/script&gt;

Save enferas/85cdbadf5cba32ec7c8db6ea9e6833bf to your computer and use it in GitHub Desktop.

[Download ZIP](/enferas/85cdbadf5cba32ec7c8db6ea9e6833bf/archive/6b90a6d79f9156c0049346ed6677ea048eff12b2.zip)

directory traversal in ICEcoder

 [Raw](/enferas/85cdbadf5cba32ec7c8db6ea9e6833bf/raw/6b90a6d79f9156c0049346ed6677ea048eff12b2/CVE-2022-34026.md)

[**CVE-2022-34026.md**](#file-cve-2022-34026-md)

directory traversal in ICEcoder <https://github.com/icecoder/ICEcoder> version 8.1

In file <https://github.com/icecoder/ICEcoder/blob/master/lib/settings.php>

```
//line 62
if (true === isset($_POST['username']) && "" !== $_POST['username']) {$username = $_POST['username'] . "-";};
$settingsFile = 'config-' . $username . str_replace(".", "_", str_replace("www.", "", $_SERVER['SERVER_NAME'])) . '.php';
// line 110
$ICEcoderUserSettings = $settingsClass->getConfigUsersSettings($settingsFile);
```

In file <https://github.com/icecoder/ICEcoder/blob/master/classes/Settings.php>

```
//line 160
// Note: the source is in the $filename
public function getConfigUsersSettings($fileName)
    {
        // Get users config file details
        $fullPath = $this->getConfigUsersFileDetails($fileName)['fullPath']; // $fullPath is a source
        $settingsFromFile = $this->serializedFileData("get", $fullPath); // attacker control the loaded file in this function
        // Now return
        return $settingsFromFile;
    }

//line 142
// Note: the source is in the $filename
public function getConfigUsersFileDetails($fileName)
    {
        // Return details about the users config file
        $fullPath = dirname(__FILE__) . "/../data/" . $fileName;
        $exists = file_exists($fullPath);
        $readable = is_readable($fullPath);
        $writable = is_writable($fullPath);
        $filemtime = filemtime($fullPath);
        return [
            "fileName" => $fileName,
            "fullPath" => $fullPath,
            "exists" => $exists,
            "readable" => $readable,
            "writable" => $writable,
            "filemtime" => $filemtime,
        ];
    }

// line 226
public function serializedFileData($do, $fullPath, $output=null)
    {
        if ("get" === $do) {
            if (function_exists('opcache_invalidate')) {
                opcache_invalidate($fullPath, true);
            }
            $data = file_get_contents($fullPath); // Note: $fullPath is controlled by the user
            $data = str_replace("<"."?php\n/*\n\n", "", $data);
            $data = str_replace("\n\n*/\n?".">", "", $data);
            $data = unserialize($data);
            return $data;
        }
        if ("set" === $do) {
            if (true === is_array($output)) {
                $output = serialize($output);
            }
            return false !== file_put_contents($fullPath, "<"."?php\n/*\n\n" . $output . "\n\n*/\n?" . ">");
        }
    }
```

CVE-2022-34026 is assigned to this report.

[Sign up for free](/join?source=comment-gist)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgist.github.com%2Fenferas%2F85cdbadf5cba32ec7c8db6ea9e6833bf)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_b2579ae9_20250114_221733.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ficecoder%2FICEcoder)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ficecoder%2FICEcoder)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=icecoder%2FICEcoder)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

This repository has been archived by the owner on Dec 14, 2023. It is now read-only.

[icecoder](/icecoder)
/
**[ICEcoder](/icecoder/ICEcoder)**
Public archive

* [Notifications](/login?return_to=%2Ficecoder%2FICEcoder) You must be signed in to change notification settings
* [Fork
  347](/login?return_to=%2Ficecoder%2FICEcoder)
* [Star
   1.4k](/login?return_to=%2Ficecoder%2FICEcoder)

Browser code editor awesomeness

[icecoder.net](http://icecoder.net "http://icecoder.net")

### License

[View license](/icecoder/ICEcoder/blob/master/LICENSE.md)

[1.4k
stars](/icecoder/ICEcoder/stargazers) [347
forks](/icecoder/ICEcoder/forks) [Branches](/icecoder/ICEcoder/branches) [Tags](/icecoder/ICEcoder/tags) [Activity](/icecoder/ICEcoder/activity)
 [Star](/login?return_to=%2Ficecoder%2FICEcoder)

 [Notifications](/login?return_to=%2Ficecoder%2FICEcoder) You must be signed in to change notification settings

* [Code](/icecoder/ICEcoder)
* [Issues
  165](/icecoder/ICEcoder/issues)
* [Pull requests
  1](/icecoder/ICEcoder/pulls)
* [Actions](/icecoder/ICEcoder/actions)
* [Projects
  0](/icecoder/ICEcoder/projects)
* [Security](/icecoder/ICEcoder/security)
* [Insights](/icecoder/ICEcoder/pulse)

Additional navigation options

* [Code](/icecoder/ICEcoder)
* [Issues](/icecoder/ICEcoder/issues)
* [Pull requests](/icecoder/ICEcoder/pulls)
* [Actions](/icecoder/ICEcoder/actions)
* [Projects](/icecoder/ICEcoder/projects)
* [Security](/icecoder/ICEcoder/security)
* [Insights](/icecoder/ICEcoder/pulse)

# icecoder/ICEcoder

    master[Branches](/icecoder/ICEcoder/branches)[Tags](/icecoder/ICEcoder/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[2,999 Commits](/icecoder/ICEcoder/commits/master/) | | |
| [.github](/icecoder/ICEcoder/tree/master/.github ".github") | | [.github](/icecoder/ICEcoder/tree/master/.github ".github") |  |  |
| [assets](/icecoder/ICEcoder/tree/master/assets "assets") | | [assets](/icecoder/ICEcoder/tree/master/assets "assets") |  |  |
| [classes](/icecoder/ICEcoder/tree/master/classes "classes") | | [classes](/icecoder/ICEcoder/tree/master/classes "classes") |  |  |
| [data](/icecoder/ICEcoder/tree/master/data "data") | | [data](/icecoder/ICEcoder/tree/master/data "data") |  |  |
| [lang](/icecoder/ICEcoder/tree/master/lang "lang") | | [lang](/icecoder/ICEcoder/tree/master/lang "lang") |  |  |
| [lib](/icecoder/ICEcoder/tree/master/lib "lib") | | [lib](/icecoder/ICEcoder/tree/master/lib "lib") |  |  |
| [plugins](/icecoder/ICEcoder/tree/master/plugins "plugins") | | [plugins](/icecoder/ICEcoder/tree/master/plugins "plugins") |  |  |
| [server](/icecoder/ICEcoder/tree/master/server "server") | | [server](/icecoder/ICEcoder/tree/master/server "server") |  |  |
| [tmp](/icecoder/ICEcoder/tree/master/tmp "tmp") | | [tmp](/icecoder/ICEcoder/tree/master/tmp "tmp") |  |  |
| [.gitignore](/icecoder/ICEcoder/blob/master/.gitignore ".gitignore") | | [.gitignore](/icecoder/ICEcoder/blob/master/.gitignore ".gitignore") |  |  |
| [.htaccess](/icecoder/ICEcoder/blob/master/.htaccess ".htaccess") | | [.htaccess](/icecoder/ICEcoder/blob/master/.htaccess ".htaccess") |  |  |
| [LICENSE.md](/icecoder/ICEcoder/blob/master/LICENSE.md "LICENSE.md") | | [LICENSE.md](/icecoder/ICEcoder/blob/master/LICENSE.md "LICENSE.md") |  |  |
| [README.md](/icecoder/ICEcoder/blob/master/README.md "README.md") | | [README.md](/icecoder/ICEcoder/blob/master/README.md "README.md") |  |  |
| [SECURITY.md](/icecoder/ICEcoder/blob/master/SECURITY.md "SECURITY.md") | | [SECURITY.md](/icecoder/ICEcoder/blob/master/SECURITY.md "SECURITY.md") |  |  |
| [composer.json](/icecoder/ICEcoder/blob/master/composer.json "composer.json") | | [composer.json](/icecoder/ICEcoder/blob/master/composer.json "composer.json") |  |  |
| [editor.php](/icecoder/ICEcoder/blob/master/editor.php "editor.php") | | [editor.php](/icecoder/ICEcoder/blob/master/editor.php "editor.php") |  |  |
| [files.php](/icecoder/ICEcoder/blob/master/files.php "files.php") | | [files.php](/icecoder/ICEcoder/blob/master/files.php "files.php") |  |  |
| [index.php](/icecoder/ICEcoder/blob/master/index.php "index.php") | | [index.php](/icecoder/ICEcoder/blob/master/index.php "index.php") |  |  |
| [terminal.php](/icecoder/ICEcoder/blob/master/terminal.php "terminal.php") | | [terminal.php](/icecoder/ICEcoder/blob/master/terminal.php "terminal.php") |  |  |
| View all files | | |

## Repository files navigation

* README
* License
* Security
# ICEcoder is for sale! Please contact info@icecoder.net. Serious offers only.

---

# ICEcoder

## Code editor awesomeness ...in your browser

ICEcoder is a browser based code editor, which provides a modern approach to building websites. By allowing you to code directly within the web browser, online or offline, it means you only need one program (your browser) to develop sites, plus can test on actual web servers. After development, you can also maintain the website easily, all of which make for speedy and smart development.

[![ICEcoder code editor](https://camo.githubusercontent.com/42479412f0fafb9963b5a0fb82b33cc8d6d759f79348fc143d84dbf2caa359f7/68747470733a2f2f6173736574732e696365636f6465722e6e65742f696d616765732f696365636f6465722d382d312d62726f777365722d636f64652d656469746f722e706e67)](https://camo.githubusercontent.com/42479412f0fafb9963b5a0fb82b33cc8d6d759f79348fc143d84dbf2caa359f7/68747470733a2f2f6173736574732e696365636f6465722e6e65742f696d616765732f696365636f6465722d382d312d62726f777365722d636f64652d656469746f722e706e67)

### Requirements

You can run ICEcoder either online or locally, on Linux, Windows or Mac based platforms. The only requirement is to have PHP 7 available (7.4 recommended). You can have this either as a vanilla installation or via a program such as WAMP or XAMPP (for Windows) or MAMP (for Mac).

### Installation

#### Step 1: Get ICEcoder

Either download the zip or clone from Github into your wwwroot (document root) dir for your website (this is typically `/var/www/html/`) via:

```
$ git clone git@github.com:icecoder/icecoder /var/www/html/icecoder

```

#### Step 2: Set permissions on dirs & files

You'll need to ensure both the ICEcoder dir and the wwwroot dir have permissions to read, write and execute. This can be done by changing permissions (using `chmod`), but it it safer and so better, to use `chown`:

`chown -R www-data.www-data /var/www/html`

This will recursively set the `www-data` user as both the owner and group users for files on the `/var/www/html` dir (which ICEcoder dir is of course inside of, at say `/var/www/html/ICEcoder`).

#### Step 3: Start coding

Now you can visit `yoursite.com/ICEcoder` to view ICEcoder, sign in and start coding!

#### Tip: If using ICEcoder locally, you can use:

`php -S localhost:8080`

...to get PHP to start a simple web server. You can then visit `localhost:8080/ICEcoder`

#### Want to setup in other environments?

It's now possible to setup ICEcoder in a Docker container, via Composer, as an executable and more. Checkout <https://icecoder.net/downloads> for info on these setups!

#### It's free & open source for everyone!

Suitable for commercial & non-commercial projects, just let us know if it's useful to you and any cool customizations you make to it. We take no responsibility for anything, all usage is all down to you.

It's fully open source and MIT licensed. So we're happy for you to take it, make it your own and customize to your hearts content and/or contribute to this main repo! :)

Plenty of comments included in the code to assist with understanding, customizing etc.

Comments, improvements & feedback welcomed!

## About

Browser code editor awesomeness

[icecoder.net](http://icecoder.net "http://icecoder.net")

### Resources

[Readme](#readme-ov-file)
### License

[View license](#License-1-ov-file)
### Security policy

[Security policy](#security-ov-file)

[Activity](/icecoder/ICEcoder/activity)
[Custom properties](/icecoder/ICEcoder/custom-properties)
### Stars

[**1.4k**
stars](/icecoder/ICEcoder/stargazers)
### Watchers

[**102**
watching](/icecoder/ICEcoder/watchers)
### Forks

[**347**
forks](/icecoder/ICEcoder/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Ficecoder%2FICEcoder&report=icecoder+%28user%29)

## [Releases 4](/icecoder/ICEcoder/releases)

[Version 8.1
Latest

Jul 27, 2021](/icecoder/ICEcoder/releases/tag/8.1)
[+ 3 releases](/icecoder/ICEcoder/releases)

## [Packages 0](/orgs/icecoder/packages?repo_name=ICEcoder)

No packages published

## [Contributors 33](/icecoder/ICEcoder/graphs/contributors)

[+ 19 contributors](/icecoder/ICEcoder/graphs/contributors)

## Languages

* [PHP
  67.9%](/icecoder/ICEcoder/search?l=php)
* [JavaScript
  19.5%](/icecoder/ICEcoder/search?l=javascript)
* [CSS
  12.6%](/icecoder/ICEcoder/search?l=css)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_780cb55c_20250114_221735.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ficecoder%2FICEcoder%2Fblob%2Fmaster%2Fclasses%2FSettings.php)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ficecoder%2FICEcoder%2Fblob%2Fmaster%2Fclasses%2FSettings.php)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=icecoder%2FICEcoder)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

This repository has been archived by the owner on Dec 14, 2023. It is now read-only.

[icecoder](/icecoder)
/
**[ICEcoder](/icecoder/ICEcoder)**
Public archive

* [Notifications](/login?return_to=%2Ficecoder%2FICEcoder) You must be signed in to change notification settings
* [Fork
  347](/login?return_to=%2Ficecoder%2FICEcoder)
* [Star
   1.4k](/login?return_to=%2Ficecoder%2FICEcoder)

* [Code](/icecoder/ICEcoder)
* [Issues
  165](/icecoder/ICEcoder/issues)
* [Pull requests
  1](/icecoder/ICEcoder/pulls)
* [Actions](/icecoder/ICEcoder/actions)
* [Projects
  0](/icecoder/ICEcoder/projects)
* [Security](/icecoder/ICEcoder/security)
* [Insights](/icecoder/ICEcoder/pulse)

Additional navigation options

* [Code](/icecoder/ICEcoder)
* [Issues](/icecoder/ICEcoder/issues)
* [Pull requests](/icecoder/ICEcoder/pulls)
* [Actions](/icecoder/ICEcoder/actions)
* [Projects](/icecoder/ICEcoder/projects)
* [Security](/icecoder/ICEcoder/security)
* [Insights](/icecoder/ICEcoder/pulse)

## Files

 master
## Breadcrumbs

1. [ICEcoder](/icecoder/ICEcoder/tree/master)
2. /[classes](/icecoder/ICEcoder/tree/master/classes)
/
# Settings.php

Copy path Blame  Blame
## Latest commit

## History

[History](/icecoder/ICEcoder/commits/master/classes/Settings.php)245 lines (221 loc) · 8.43 KB master
## Breadcrumbs

1. [ICEcoder](/icecoder/ICEcoder/tree/master)
2. /[classes](/icecoder/ICEcoder/tree/master/classes)
/
# Settings.php

Top
## File metadata and controls

* Code
* Blame

245 lines (221 loc) · 8.43 KB[Raw](https://github.com/icecoder/ICEcoder/raw/refs/heads/master/classes/Settings.php)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245<?php declare(strict\_types=1);
namespace ICEcoder;
class Settings{ public function \_\_construct() { // Set version number and document root as core settings // Defaults to the right $this->versionNo = "8.1"; // "8.1"; $this->docRoot = $\_SERVER['DOCUMENT\_ROOT']; // $\_SERVER['DOCUMENT\_ROOT'] $this->assetsRoot = "assets"; // "assets" (relative or absolute) }
 public function getCoreDetails() { return [ "versionNo" => $this->versionNo, "docRoot" => $this->docRoot, "assetsRoot" => $this->assetsRoot, ]; }
 // ======== // DATA DIR // ========
 public function getDataDirDetails() { clearstatcache();
 // Return details about the data dir $fullPath = dirname(\_\_FILE\_\_) . "/../data/"; $exists = file\_exists($fullPath); $readable = is\_readable($fullPath); $writable = is\_writable($fullPath); return [ "fullPath" => $fullPath, "exists" => $exists, "readable" => $readable, "writable" => $writable, ]; }
 // ============= // GLOBAL CONFIG // =============
 public function getConfigGlobalTemplate($asArray) { // Return the serialized global config template $fileName = 'template-config-global.php'; $fullPath = dirname(\_\_FILE\_\_) . "/../lib/" . $fileName; if (function\_exists('opcache\_invalidate')) { opcache\_invalidate($fullPath, true); } $settings = file\_get\_contents($fullPath); if ($asArray) { $settings = $this->serializedFileData("get", $fullPath); } return $settings; }
 public function getConfigGlobalFileDetails() { clearstatcache();
 // Return details about the global config file $fileName = 'config-global.php'; $fullPath = dirname(\_\_FILE\_\_) . "/../data/" . $fileName; $exists = file\_exists($fullPath); $readable = is\_readable($fullPath); $writable = is\_writable($fullPath); $filemtime = filemtime($fullPath); return [ "fileName" => $fileName, "fullPath" => $fullPath, "exists" => $exists, "readable" => $readable, "writable" => $writable, "filemtime" => $filemtime ]; }
 public function getConfigGlobalSettings() { // Start an array with version number and document root $settings = $this->getCoreDetails(); // Get global config file details $fullPath = $this->getConfigGlobalFileDetails()['fullPath']; $settingsFromFile = $this->serializedFileData("get", $fullPath); // Merge that with the array we started with and return $settings = array\_merge($settings, $settingsFromFile); return $settings; }
 public function setConfigGlobalSettings($settings): bool { // Get the global config file details $fullPath = $this->getConfigGlobalFileDetails()['fullPath']; if ($fConfigSettings = fopen($fullPath, 'w')) { // If the settings we've received aren't in serialized format yet, do that now // As $settings could be a serialized string or array if (is\_array($settings)) { unset($settings['versionNo']); unset($settings['docRoot']); } return $this->serializedFileData("set", $fullPath, $settings); } else { return false; } }
 public function updateConfigGlobalSettings($array): bool { // Update global config settings file $settingsFromFile = $this->getConfigGlobalSettings(); $settings = array\_merge($settingsFromFile, $array); return $this->setConfigGlobalSettings($settings); }
 // ============ // USERS CONFIG // ============
 public function getConfigUsersTemplate($asArray) { // Return the serialized users config template $fileName = 'template-config-users.php'; $fullPath = dirname(\_\_FILE\_\_) . "/../lib/" . $fileName; if (function\_exists('opcache\_invalidate')) { opcache\_invalidate($fullPath, true); } $settings = file\_get\_contents($fullPath); if ($asArray) { $settings = $this->serializedFileData("get", $fullPath); } return $settings; }
 public function getConfigUsersFileDetails($fileName) { // Return details about the users config file $fullPath = dirname(\_\_FILE\_\_) . "/../data/" . $fileName; $exists = file\_exists($fullPath); $readable = is\_readable($fullPath); $writable = is\_writable($fullPath); $filemtime = filemtime($fullPath); return [ "fileName" => $fileName, "fullPath" => $fullPath, "exists" => $exists, "readable" => $readable, "writable" => $writable, "filemtime" => $filemtime, ]; }
 public function getConfigUsersSettings($fileName) { // Get users config file details $fullPath = $this->getConfigUsersFileDetails($fileName)['fullPath']; $settingsFromFile = $this->serializedFileData("get", $fullPath); // Now return return $settingsFromFile; }
 public function setConfigUsersSettings($fileName, $settings): bool { // Get the users config file details $fullPath = $this->getConfigUsersFileDetails($fileName)['fullPath']; if ($fConfigSettings = fopen($fullPath, 'w')) { return $this->serializedFileData("set", $fullPath, $settings); } else { return false; } }
 public function updateConfigUsersSettings($fileName, $array): bool { // Update users config settings file $settingsFromFile = $this->getConfigUsersSettings($fileName); $settings = array\_merge($settingsFromFile, $array); return $this->setConfigUsersSettings($fileName, $settings); }
 public function updateConfigUsersCreateDate($fileName) { global $ICEcoderUserSettings;
 // Get users config file details $filemtime = $this->getConfigUsersFileDetails($fileName)['filemtime']; // Make it a number (avoids null, undefined etc) $filemtime = intval($filemtime); // Set it to the epoch time now if we don't have a real value if (0 === $filemtime) { $filemtime = time(); } // Update users config settings file $ICEcoderSettingsFromFile = $this->getConfigUsersSettings($fileName); $ICEcoderSettingsFromFile['configCreateDate'] = $filemtime; $this->setConfigUsersSettings($fileName, $ICEcoderSettingsFromFile); // Set the new value in array $ICEcoderUserSettings['configCreateDate'] = $filemtime; }
 public function createIPSettingsFileIfNotExist() { global $username, $settingsFile, $settingsFileAddr;
 // Create a duplicate version for the IP address of the domain if it doesn't exist yet $serverAddr = $\_SERVER['SERVER\_ADDR'] ?? "1"; if ($serverAddr == "1" || $serverAddr == "::1") { $serverAddr = "127.0.0.1"; } $settingsFileAddr = 'config-' . $username . str\_replace(".", "\_", $serverAddr) . '.php'; if (false === file\_exists(dirname(\_\_FILE\_\_) . "/../data/" . $settingsFileAddr)) { if (false === copy(dirname(\_\_FILE\_\_) . "/../data/" . $settingsFile, dirname(\_\_FILE\_\_) . "/../data/" . $settingsFileAddr)) { $reqsFailures = ["phpCreateSettingsFileAddr"]; include dirname(\_\_FILE\_\_) . "/../lib/requirements.php"; } } }
 public function serializedFileData($do, $fullPath, $output=null) { if ("get" === $do) { if (function\_exists('opcache\_invalidate')) { opcache\_invalidate($fullPath, true); } $data = file\_get\_contents($fullPath); $data = str\_replace("<"."?php\n/\*\n\n", "", $data); $data = str\_replace("\n\n\*/\n?".">", "", $data); $data = unserialize($data); return $data; } if ("set" === $do) { if (true === is\_array($output)) { $output = serialize($output); } return false !== file\_put\_contents($fullPath, "<"."?php\n/\*\n\n" . $output . "\n\n\*/\n?" . ">"); } }}

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_eb032b40_20250114_221737.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ficecoder%2FICEcoder%2Fblob%2Fmaster%2Flib%2Fsettings.php)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ficecoder%2FICEcoder%2Fblob%2Fmaster%2Flib%2Fsettings.php)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=icecoder%2FICEcoder)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

This repository has been archived by the owner on Dec 14, 2023. It is now read-only.

[icecoder](/icecoder)
/
**[ICEcoder](/icecoder/ICEcoder)**
Public archive

* [Notifications](/login?return_to=%2Ficecoder%2FICEcoder) You must be signed in to change notification settings
* [Fork
  347](/login?return_to=%2Ficecoder%2FICEcoder)
* [Star
   1.4k](/login?return_to=%2Ficecoder%2FICEcoder)

* [Code](/icecoder/ICEcoder)
* [Issues
  165](/icecoder/ICEcoder/issues)
* [Pull requests
  1](/icecoder/ICEcoder/pulls)
* [Actions](/icecoder/ICEcoder/actions)
* [Projects
  0](/icecoder/ICEcoder/projects)
* [Security](/icecoder/ICEcoder/security)
* [Insights](/icecoder/ICEcoder/pulse)

Additional navigation options

* [Code](/icecoder/ICEcoder)
* [Issues](/icecoder/ICEcoder/issues)
* [Pull requests](/icecoder/ICEcoder/pulls)
* [Actions](/icecoder/ICEcoder/actions)
* [Projects](/icecoder/ICEcoder/projects)
* [Security](/icecoder/ICEcoder/security)
* [Insights](/icecoder/ICEcoder/pulse)

## Files

 master
## Breadcrumbs

1. [ICEcoder](/icecoder/ICEcoder/tree/master)
2. /[lib](/icecoder/ICEcoder/tree/master/lib)
/
# settings.php

Copy path Blame  Blame
## Latest commit

## History

[History](/icecoder/ICEcoder/commits/master/lib/settings.php)260 lines (223 loc) · 11.1 KB master
## Breadcrumbs

1. [ICEcoder](/icecoder/ICEcoder/tree/master)
2. /[lib](/icecoder/ICEcoder/tree/master/lib)
/
# settings.php

Top
## File metadata and controls

* Code
* Blame

260 lines (223 loc) · 11.1 KB[Raw](https://github.com/icecoder/ICEcoder/raw/refs/heads/master/lib/settings.php)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260<?phprequire\_once dirname(\_\_FILE\_\_) . "/../classes/\_ExtraProcesses.php";require\_once dirname(\_\_FILE\_\_) . "/../classes/Settings.php";require\_once dirname(\_\_FILE\_\_) . "/../classes/System.php";
use ICEcoder\ExtraProcesses;
$settingsClass = new \ICEcoder\Settings();$systemClass = new \ICEcoder\System();
// Check data dir exists, is readable and writableif (false === $settingsClass->getDataDirDetails()['exists']) { $reqsFailures = ["phpDataDirDoesntExist"]; include dirname(\_\_FILE\_\_) . "/requirements.php";}
if (false === $settingsClass->getDataDirDetails()['readable']) { $reqsFailures = ["phpDataDirNotReadable"]; include dirname(\_\_FILE\_\_) . "/requirements.php";}
if (false === $ICEcoder["demoMode"] && false === $settingsClass->getDataDirDetails()['writable']) { $reqsFailures = ["phpDataDirNotWritable"]; include dirname(\_\_FILE\_\_) . "/requirements.php";}
// Create a new global config file if it doesn't exist yet.// The reason we create it, is so it has PHP write permissions, meaning we can update it laterif (false === $settingsClass->getConfigGlobalFileDetails()['exists']) { if (false === $settingsClass->setConfigGlobalSettings($settingsClass->getConfigGlobalTemplate(false))) { $reqsFailures = ["phpGlobalConfigFileCreate"]; include dirname(\_\_FILE\_\_) . "/requirements.php"; }}
// Check global config settings file existsif (false === $settingsClass->getConfigGlobalFileDetails()['exists']) { $reqsFailures = ["phpGlobalConfigFileExists"]; include dirname(\_\_FILE\_\_) . "/requirements.php";}
// Check we can read global config settings fileif (false === $settingsClass->getConfigGlobalFileDetails()['readable']) { $reqsFailures = ["phpGlobalConfigReadFile"]; include dirname(\_\_FILE\_\_) . "/requirements.php";}
// Check we can write global config settings fileif (false === $ICEcoder["demoMode"] && false === $settingsClass->getConfigGlobalFileDetails()['writable']) { $reqsFailures = ["phpGlobalConfigWriteFile"]; include dirname(\_\_FILE\_\_) . "/requirements.php";}
// Load global config settings$ICEcoderSettings = $settingsClass->getConfigGlobalSettings();
// Load common functionsinclude\_once dirname(\_\_FILE\_\_) . "/settings-common.php";
$postUsername = true === isset($\_POST['username']) && is\_string($\_POST['username']) ? preg\_replace("/[^\w\_\-]/", "", $\_POST['username']) : "";
// Establish user settings file$username = "admin-";if ("" !== $postUsername) {$username = $postUsername . "-";};if (true === isset($\_SESSION['username']) && "" !== $\_SESSION['username']) {$username = $\_SESSION['username'] . "-";};$settingsFile = 'config-' . $username . str\_replace(".", "\_", str\_replace("www.", "", $\_SERVER['SERVER\_NAME'])) . '.php';
// Login is default$setPWorLogin = "login";
// Create user settings file if it doesn't existif (true === $ICEcoderSettings['enableRegistration'] && false === $settingsClass->getConfigUsersFileDetails($settingsFile)['exists']) { if (false === $settingsClass->setConfigUsersSettings($settingsFile, $settingsClass->getConfigUsersTemplate(false))) { $reqsFailures = ["phpUsersConfigCreateConfig"]; include dirname(\_\_FILE\_\_) . "/requirements.php"; } // Initial setup,triggered from index,php... if ("index.php" === basename($\_SERVER['SCRIPT\_NAME'])) { // Set bug reporting for ICEcoders error.log file $settingsClass->updateConfigUsersSettings($settingsFile, ["bugFilePaths" => [dirname($\_SERVER['SCRIPT\_NAME']) . "/data/logs/error/error.log"]]); $settingsClass->updateConfigUsersSettings($settingsFile, ["bugFileCheckTimer" => 10]); $settingsClass->updateConfigUsersSettings($settingsFile, ["bugFileMaxLines" => 10]); } $setPWorLogin = "set password";}
// Check users config settings file existsif (false === $settingsClass->getConfigUsersFileDetails($settingsFile)['exists']) { // If on the login page and we couldn't find the file, boot back to login page if ("login.php" === basename($\_SERVER['SCRIPT\_NAME'])) { header('Location: login.php'); echo "<script>window.location = 'login.php';</script>"; die('Redirecting to login...'); } $reqsFailures = ["phpUsersConfigFileExists"]; include dirname(\_\_FILE\_\_) . "/requirements.php";}
// Check we can read users config settings fileif (false === $settingsClass->getConfigUsersFileDetails($settingsFile)['readable']) { $reqsFailures = ["phpUsersConfigReadFile"]; include dirname(\_\_FILE\_\_) . "/requirements.php";}
// Check we can write users config settings fileif (false === $ICEcoder["demoMode"] && false === $settingsClass->getConfigUsersFileDetails($settingsFile)['writable']) { $reqsFailures = ["phpUsersConfigWriteFile"]; include dirname(\_\_FILE\_\_) . "/requirements.php";}
// Load users config settings$ICEcoderUserSettings = $settingsClass->getConfigUsersSettings($settingsFile);
// Remove any previous files that are no longer therefor ($i = 0; $i < count($ICEcoderUserSettings['previousFiles']); $i++) { if (false === file\_exists(str\_replace("|", "/", $ICEcoderUserSettings['previousFiles'][$i]))) { array\_splice($ICEcoderUserSettings['previousFiles'], $i, 1); }}
// Replace our config created date with the filemtime?if ("index.php" === basename($\_SERVER['SCRIPT\_NAME']) && 0 === $ICEcoderUserSettings['configCreateDate']) { $settingsClass->updateConfigUsersCreateDate($settingsFile);}
// On mismatch of settings file to system, rename to .old and reloadIf ($ICEcoderUserSettings["versionNo"] !== $ICEcoderSettings["versionNo"]) { $reqsFailures = ["phpUsersConfigVersionMismatch"]; include dirname(\_\_FILE\_\_) . "/requirements.php";}
// Set ICEcoder settings array to (global + user) template and layer ontop (global + user) from current settings$ICEcoder = array\_merge( $settingsClass->getConfigGlobalTemplate(true), $settingsClass->getConfigUsersTemplate(true), $ICEcoderSettings, $ICEcoderUserSettings);
// Include language file// Load base first as foundationinclude dirname(\_\_FILE\_\_) . "/../lang/" . basename($ICEcoder['languageBase']);$baseText = $text;
// Load chosen language ontop to replace baseinclude dirname(\_\_FILE\_\_) . "/../lang/" . basename($ICEcoder['languageUser']);$text = array\_replace\_recursive($baseText, $text);$\_SESSION['text'] = $text;
// Login not required, log us straight inif (false === $ICEcoder['loginRequired']) { $\_SESSION['loggedIn'] = true;};$demoMode = $ICEcoder['demoMode'];
// Update global config and users config files?include dirname(\_\_FILE\_\_) . "/settings-update.php";
// Set loggedIn and username to false if not set as yetif (false === isset($\_SESSION['loggedIn'])) {$\_SESSION['loggedIn'] = false;};if (false === isset($\_SESSION['username'])) {$\_SESSION['username'] = "";};
// Attempt a login with passwordif (true === isset($\_POST['submit']) && "login" === $setPWorLogin) { // On success, set username if multiUser, loggedIn to true and redirect if (verifyHash($\_POST['password'], $ICEcoder["password"]) === $ICEcoder["password"]) { session\_regenerate\_id(); if ($ICEcoder["multiUser"]) { $\_SESSION['username'] = $postUsername; } $\_SESSION['loggedIn'] = true; $extraProcessesClass = new ExtraProcesses(); $extraProcessesClass->onUserLogin($\_SESSION['username'] ?? ""); header('Location: ../'); echo "<script>window.location = '../';</script>"; die('Logging you in...'); } else { $extraProcessesClass = new ExtraProcesses(); $extraProcessesClass->onUserLoginFail($\_SESSION['username'] ?? ""); }};
// Define the serverType, docRoot & iceRoot$serverType = $systemClass->getOS();$docRoot = rtrim(str\_replace("\\", "/", $ICEcoder['docRoot']));$iceRoot = rtrim(str\_replace("\\", "/", $ICEcoder["root"]));
// Establish the dir ICEcoders running from$ICEcoderDirFullPath = rtrim(str\_replace("\\", "/", dirname($\_SERVER['SCRIPT\_FILENAME'])), "/lib");$rootPrefix = '/' . str\_replace("/", "\/", preg\_quote(str\_replace("\\", "/", $docRoot))) . '/';$ICEcoderDir = preg\_replace($rootPrefix, '', $ICEcoderDirFullPath, 1);
// Setup our file security vars$settingsArray = ["findFilesExclude", "bannedFiles", "allowedIPs"];for ($i = 0; $i < count($settingsArray); $i++) { if (false === isset($\_SESSION[$settingsArray[$i]])) { $\_SESSION[$settingsArray[$i]] = $ICEcoder[$settingsArray[$i]]; }}
// Check IP permissionsif (false === in\_array(getUserIP(), $\_SESSION['allowedIPs']) && false === in\_array("\*", $\_SESSION['allowedIPs'])) { header('Location: /'); $reqsFailures = ["systemIPRestriction"]; include(dirname(\_\_FILE\_\_) . "/requirements.php");};
// Save currently opened files in previousFiles and last10Files arraysinclude(dirname(\_\_FILE\_\_) . "/settings-save-current-files.php");
// Display the pluginsinclude(dirname(\_\_FILE\_\_) . "/plugins-display.php");
// If we require a login, loggedIn is false or we don't have a password set yet and we're not on login screen, boot user to thatif (true === $ICEcoder['loginRequired'] && false === isset($\_POST['password']) && (!$\_SESSION['loggedIn'] || "" === $ICEcoder["password"]) && false === strpos($\_SERVER['SCRIPT\_NAME'], "lib/login.php")) { if (file\_exists('lib/login.php')) { header('Location: ' . rtrim($\_SERVER['REQUEST\_URI'], "/") . '/lib/login.php'); echo "<script>window.location = 'lib/login.php';</script>"; } else { header('Location: login.php'); echo "<script>window.location = 'login.php';</script>"; } die('Redirecting to login...');
// If we are on the login screen and not logged in} elseif (!$\_SESSION['loggedIn']) { // If the password hasn't been set and we're setting it if ("" === $ICEcoder["password"] && true === isset($\_POST['submit']) && -1 < strpos($\_POST['submit'], "set password")) { $password = generateHash($\_POST['password']); $settingsClass->updateConfigUsersSettings($settingsFile, ["password" => $password, "checkUpdates" => isset($\_POST["checkUpdates"])]); $settingsClass->createIPSettingsFileIfNotExist(); if (true === isset($\_POST['disableFurtherRegistration'])) { $settingsClass->updateConfigGlobalSettings(['enableRegistration' => false]); } // Set the session user level if ($ICEcoder["multiUser"]) { $\_SESSION['username'] = $postUsername; } $\_SESSION['loggedIn'] = true; $extraProcessesClass = new ExtraProcesses(); $extraProcessesClass->onUserNew($\_SESSION['username'] ?? ""); // Finally, load again as now this file has changed and auto login header('Location: ../'); echo "<script>window.location = '../';</script>"; die('Logging you in...'); } // =================================================== // We're likely showing the login screen at this point // ===================================================} elseif ($ICEcoder['loginRequired'] && $\_SESSION['loggedIn'] && "" === $ICEcoder["password"]) { header("Location: ../?logout"); echo "<script>window.location = '../?logout';</script>"; die('Logging you out...');} else { // ================================== // Continue with whatever we're doing // ==================================}

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


