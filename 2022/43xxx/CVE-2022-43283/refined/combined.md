=== Content from github.com_bda1695b_20250114_200424.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FWebAssembly%2Fwabt%2Fissues%2F1985)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FWebAssembly%2Fwabt%2Fissues%2F1985)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=WebAssembly%2Fwabt)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[WebAssembly](/WebAssembly)
/
**[wabt](/WebAssembly/wabt)**
Public

* [Notifications](/login?return_to=%2FWebAssembly%2Fwabt) You must be signed in to change notification settings
* [Fork
  717](/login?return_to=%2FWebAssembly%2Fwabt)
* [Star
   7k](/login?return_to=%2FWebAssembly%2Fwabt)

* [Code](/WebAssembly/wabt)
* [Issues
  134](/WebAssembly/wabt/issues)
* [Pull requests
  27](/WebAssembly/wabt/pulls)
* [Actions](/WebAssembly/wabt/actions)
* [Security](/WebAssembly/wabt/security)
* [Insights](/WebAssembly/wabt/pulse)

Additional navigation options

* [Code](/WebAssembly/wabt)
* [Issues](/WebAssembly/wabt/issues)
* [Pull requests](/WebAssembly/wabt/pulls)
* [Actions](/WebAssembly/wabt/actions)
* [Security](/WebAssembly/wabt/security)
* [Insights](/WebAssembly/wabt/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FWebAssembly%2Fwabt%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FWebAssembly%2Fwabt%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Aborted in CWriter::Write at wasm2c #1985

Closed

[Q1IQ](/Q1IQ) opened this issue
Sep 5, 2022
· 1 comment
 · Fixed by [#1887](https://github.com/WebAssembly/wabt/pull/1887)

Closed

# [Aborted in CWriter::Write at wasm2c](#top) #1985

[Q1IQ](/Q1IQ) opened this issue
Sep 5, 2022
· 1 comment
 · Fixed by [#1887](https://github.com/WebAssembly/wabt/pull/1887)

## Comments

[![@Q1IQ](https://avatars.githubusercontent.com/u/52093495?s=80&u=7009866e22d1aa82a4f8d29d13cb52d2f186fdf5&v=4)](/Q1IQ)

Copy link

### **[Q1IQ](/Q1IQ)** commented [Sep 5, 2022](#issue-1361920430)

| Environment ``` OS      : Linux ubuntu 5.15.0-46-generic #49~20.04.1-Ubuntu SMP Thu Aug 4 19:15:44 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux Commit  : 3054d61f703d609995798f872fc86b462617c294 Version : 1.0.29 Build   : make clang-debug-asan  ``` Proof of concept poc\_wasm2c-1.wasm [poc\_wasm2c-1.wasm.zip](https://github.com/WebAssembly/wabt/files/9489964/poc_wasm2c-1.wasm.zip) Stack dump ``` gdb /wabt/out/clang/Debug/asan/wasm2c pwndbg> r  --enable-multi-memory ./poc_wasm2c-1.wasm context: LEGEND: STACK | HEAP | CODE | DATA | RWX | RODATA ─────────────────────────────────[ REGISTERS ]──────────────────────────────────  RAX  0x0 *RBX  0x7ffff7a357c0 ◂— 0x7ffff7a357c0 *RCX  0x7ffff7a7b00b (raise+203) —▸ 0x10824848b48 ◂— 0x0  RDX  0x0 *RDI  0x2 *RSI  0x7fffffff6990 ◂— 0x0  R8   0x0 *R9   0x7fffffff6990 ◂— 0x0 *R10  0x8 *R11  0x246 *R12  0x43e420 (_start) ◂— endbr64 *R13  0x7fffffffe070 ◂— 0x3  R14  0x0  R15  0x0 *RBP  0x7fffffff88f0 —▸ 0x7fffffff8930 —▸ 0x7fffffffa650 —▸ 0x7fffffffa690 —▸ 0x7fffffffc3c0 ◂— ... *RSP  0x7fffffff6990 ◂— 0x0 *RIP  0x7ffff7a7b00b (raise+203) —▸ 0x10824848b48 ◂— 0x0 ───────────────────────────────────[ DISASM ]───────────────────────────────────  ► 0x7ffff7a7b00b <raise+203>    mov    rax, qword ptr [rsp + 0x108]    0x7ffff7a7b013 <raise+211>    xor    rax, qword ptr fs:[0x28]    0x7ffff7a7b01c <raise+220>    jne    raise+260                <raise+260>     ↓    0x7ffff7a7b044 <raise+260>    call   __stack_chk_fail                <__stack_chk_fail>     0x7ffff7a7b049                nop    dword ptr [rax]    0x7ffff7a7b050 <killpg>       endbr64    0x7ffff7a7b054 <killpg+4>     test   edi, edi    0x7ffff7a7b056 <killpg+6>     js     killpg+16                <killpg+16>     0x7ffff7a7b058 <killpg+8>     neg    edi    0x7ffff7a7b05a <killpg+10>    jmp    kill                <kill>     0x7ffff7a7b05f <killpg+15>    nop ───────────────────────────────────[ STACK ]──────────────────────────────────── 00:0000│ rsi r9 rsp 0x7fffffff6990 ◂— 0x0 01:0008│            0x7fffffff6998 ◂— '(ut)(x))unimplemented: %' 02:0010│            0x7fffffff69a0 ◂— 'unimplemented: %' 03:0018│            0x7fffffff69a8 ◂— 'ented: %' 04:0020│            0x7fffffff69b0 ◂— 0x0 ... ↓               3 skipped ─────────────────────────────────[ BACKTRACE ]──────────────────────────────────  ► f 0   0x7ffff7a7b00b raise+203    f 1   0x7ffff7a5a859 abort+299    f 2         0x52769e    f 3         0x5315c3    f 4         0x52760d    f 5         0x5315c3    f 6         0x52760d    f 7         0x51dd51 ────────────────────────────────────────────────────────────────────────────────  backtrace_msg: #0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:50 #1  0x00007ffff7a5a859 in __GI_abort () at abort.c:79 #2  0x000000000052769e in wabt::(anonymous namespace)::CWriter::Write (this=0x7fffffffce30, exprs=...) at ../../../../src/c-writer.cc:1969 #3  0x00000000005315c3 in wabt::(anonymous namespace)::CWriter::Write<wabt::(anonymous namespace)::Newline, wabt::intrusive_list<wabt::Expr> const&> (this=0x7fffffffce30, t=..., u=...) at ../../../../src/c-writer.cc:205 #4  0x000000000052760d in wabt::(anonymous namespace)::CWriter::Write (this=0x7fffffffce30, exprs=...) at ../../../../src/c-writer.cc:1945 #5  0x00000000005315c3 in wabt::(anonymous namespace)::CWriter::Write<wabt::(anonymous namespace)::Newline, wabt::intrusive_list<wabt::Expr> const&> (this=0x7fffffffce30, t=..., u=...) at ../../../../src/c-writer.cc:205 #6  0x000000000052760d in wabt::(anonymous namespace)::CWriter::Write (this=0x7fffffffce30, exprs=...) at ../../../../src/c-writer.cc:1945 #7  0x000000000051dd51 in wabt::(anonymous namespace)::CWriter::Write<wabt::intrusive_list<wabt::Expr> const&, wabt::(anonymous namespace)::LabelDecl> (this=0x7fffffffce30, t=..., u=...) at ../../../../src/c-writer.cc:204 #8  0x000000000051bd15 in wabt::(anonymous namespace)::CWriter::Write (this=0x7fffffffce30, func=...) at ../../../../src/c-writer.cc:1423 #9  0x000000000051b647 in wabt::(anonymous namespace)::CWriter::Write<wabt::(anonymous namespace)::Newline, wabt::Func const&, wabt::(anonymous namespace)::Newline> (this=0x7fffffffce30, t=..., u=..., args=...) at ../../../../src/c-writer.cc:205 #10 0x000000000051182d in wabt::(anonymous namespace)::CWriter::WriteFuncs (this=0x7fffffffce30) at ../../../../src/c-writer.cc:1393 #11 0x0000000000500bf4 in wabt::(anonymous namespace)::CWriter::WriteCSource (this=0x7fffffffce30) at ../../../../src/c-writer.cc:2794 #12 0x00000000004ffcd7 in wabt::(anonymous namespace)::CWriter::WriteModule (this=0x7fffffffce30, module=...) at ../../../../src/c-writer.cc:2807 #13 0x00000000004ff48d in wabt::WriteC (c_stream=0x7fffffffdaa0, h_stream=0x7fffffffdaa0, header_name=0x7ccce0 <str> "wasm.h", module=0x7fffffffd2b0, options=...) at ../../../../src/c-writer.cc:2819 #14 0x00000000004f11b4 in ProgramMain (argc=3, argv=0x7fffffffe078) at ../../../../src/tools/wasm2c.cc:179 #15 0x00000000004f37f2 in main (argc=3, argv=0x7fffffffe078) at ../../../../src/tools/wasm2c.cc:190 #16 0x00007ffff7a5c083 in __libc_start_main (main=0x4f37d0 <main(int, char**)>, argc=3, argv=0x7fffffffe078, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7fffffffe068) at ../csu/libc-start.c:308 #17 0x000000000043e44e in _start ()  ``` |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@keithw](https://avatars.githubusercontent.com/u/208955?s=80&v=4)](/keithw)

Copy link

Member

### **[keithw](/keithw)** commented [Sep 17, 2022](#issuecomment-1250129828)

| This appears to be accurately (but clumsily) printing "unimplemented" because reference types are unimplemented in the current wasm2c (but wasm2c uses the default validator settings). Will be fixed by [#1887](https://github.com/WebAssembly/wabt/pull/1887) . |
| --- |

All reactions

Sorry, something went wrong.

[![@keithw](https://avatars.githubusercontent.com/u/208955?s=40&v=4)](/keithw)
[keithw](/keithw)
mentioned this issue
[Sep 17, 2022](#ref-pullrequest-1191648981)

[wasm2c: implement the reference-types proposal
#1887](/WebAssembly/wabt/pull/1887)
 Merged

[![@keithw](https://avatars.githubusercontent.com/u/208955?s=40&v=4)](/keithw)
[keithw](/keithw)
closed this as [completed](/WebAssembly/wabt/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
[#1887](/WebAssembly/wabt/pull/1887)
[Oct 3, 2022](#event-7504125507)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FWebAssembly%2Fwabt%2Fissues%2F1985)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [wasm2c: implement the reference-types proposal](/WebAssembly/wabt/pull/1887)
 [fix-project/wabt](/fix-project/wabt)

2 participants

[![@keithw](https://avatars.githubusercontent.com/u/208955?s=52&v=4)](/keithw) [![@Q1IQ](https://avatars.githubusercontent.com/u/52093495?s=52&v=4)](/Q1IQ)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


