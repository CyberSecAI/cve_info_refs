=== Content from github.com_b744ff9e_20250114_214619.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbtcsuite%2Fbtcd%2Fpull%2F1896)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbtcsuite%2Fbtcd%2Fpull%2F1896)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=btcsuite%2Fbtcd)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[btcsuite](/btcsuite)
/
**[btcd](/btcsuite/btcd)**
Public

* [Notifications](/login?return_to=%2Fbtcsuite%2Fbtcd) You must be signed in to change notification settings
* [Fork
  2.4k](/login?return_to=%2Fbtcsuite%2Fbtcd)
* [Star
   6.3k](/login?return_to=%2Fbtcsuite%2Fbtcd)

* [Code](/btcsuite/btcd)
* [Issues
  181](/btcsuite/btcd/issues)
* [Pull requests
  97](/btcsuite/btcd/pulls)
* [Discussions](/btcsuite/btcd/discussions)
* [Actions](/btcsuite/btcd/actions)
* [Projects
  0](/btcsuite/btcd/projects)
* [Wiki](/btcsuite/btcd/wiki)
* [Security](/btcsuite/btcd/security)
* [Insights](/btcsuite/btcd/pulse)

Additional navigation options

* [Code](/btcsuite/btcd)
* [Issues](/btcsuite/btcd/issues)
* [Pull requests](/btcsuite/btcd/pulls)
* [Discussions](/btcsuite/btcd/discussions)
* [Actions](/btcsuite/btcd/actions)
* [Projects](/btcsuite/btcd/projects)
* [Wiki](/btcsuite/btcd/wiki)
* [Security](/btcsuite/btcd/security)
* [Insights](/btcsuite/btcd/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fbtcsuite%2Fbtcd%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fbtcsuite%2Fbtcd%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# wire: remove erroneous witness size check in wire parsing #1896

 Merged

[Roasbeef](/Roasbeef)
merged 1 commit into
[btcsuite:master](/btcsuite/btcd/tree/master "btcsuite/btcd:master")
from
[Roasbeef:witness-wire-hot-fix](/Roasbeef/btcd/tree/witness-wire-hot-fix "Roasbeef/btcd:witness-wire-hot-fix")

Oct 10, 2022

 Merged

# [wire: remove erroneous witness size check in wire parsing](#top) #1896

[Roasbeef](/Roasbeef)
merged 1 commit into
[btcsuite:master](/btcsuite/btcd/tree/master "btcsuite/btcd:master")
from
[Roasbeef:witness-wire-hot-fix](/Roasbeef/btcd/tree/witness-wire-hot-fix "Roasbeef/btcd:witness-wire-hot-fix")

Oct 10, 2022

[Conversation
12](/btcsuite/btcd/pull/1896)
[Commits
1](/btcsuite/btcd/pull/1896/commits)
[Checks
0](/btcsuite/btcd/pull/1896/checks)
[Files changed](/btcsuite/btcd/pull/1896/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![Roasbeef](https://avatars.githubusercontent.com/u/998190?s=60&v=4)](/Roasbeef)

Copy link

Member

### @Roasbeef **[Roasbeef](/Roasbeef)** commented [Oct 10, 2022](#issue-1402446825)

In this commit, we fix a bug that would cause nodes to be unable to parse a given block from the wire. The block would be properly accepted if fed in via other mechanisms.

The issue here is that the old checks for the maximum witness size, circa segwit v0 where placed in the wire package *as well* as the tx engine. This check should only be in the engine, since it's properly gated by other related scrip validation flags.

The fix itself is simple: limit witnesses only based on the maximum block size in bytes, or ~4MB.

Sorry, something went wrong.

 üöÄ
8
 esneider, otech47, benthecarman, Rjected, saubyk, jblachly, diegokolling, and ziggie1984 reacted with rocket emoji

All reactions

* üöÄ
  8 reactions

[![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=40&v=4)](/Roasbeef)
[Roasbeef](/Roasbeef)
mentioned this pull request
[Oct 10, 2022](#ref-issue-1402375009)

[[bug]: Fail to chain sync on `testnet3` & `mainnet` errors relating to: script witness item is larger than the max allowed size
lightningnetwork/lnd#7002](/lightningnetwork/lnd/issues/7002)

Closed

[![@coveralls](https://avatars.githubusercontent.com/u/2354108?s=80&v=4)](/coveralls)

Copy link

### **[coveralls](/coveralls)** commented [Oct 10, 2022](#issuecomment-1272664769) ‚Ä¢ edited Loading

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Pull Request Test Coverage Report for [Build 3216248240](https://coveralls.io/builds/53124603)  * **3** of **3** **(100.0%)** changed or added relevant lines in **1** file are covered. * **4** unchanged lines in **2** files lost coverage. * Overall coverage decreased (**-17.5%**) to **54.763%**  ---   | Files with Coverage Reduction | New Missed Lines | % | | --- | --- | --- | | [connmgr/connmanager.go](https://coveralls.io/builds/53124603/source?filename=connmgr%2Fconnmanager.go#L387) | 2 | 86.79% | | [txscript/taproot.go](https://coveralls.io/builds/53124603/source?filename=txscript%2Ftaproot.go#L128) | 2 | 95.93% |   | Totals | [Coverage Status](https://coveralls.io/builds/53124603) | | --- | --- | | Change from base [Build 3045304354](https://coveralls.io/builds/52426705): | -17.5% | | Covered Lines: | 26001 | | Relevant Lines: | 47479 |   ---  üíõ - [Coveralls](https://coveralls.io) |

All reactions

Sorry, something went wrong.

[![otech47](https://avatars.githubusercontent.com/u/4914611?s=60&v=4)](/otech47)

**[otech47](/otech47)**
reviewed
[Oct 10, 2022](#pullrequestreview-1135413241)

 [View reviewed changes](/btcsuite/btcd/pull/1896/files)

[wire/msgtx.go](/btcsuite/btcd/pull/1896/files#diff-d90adfff2befe29fa72ab522be237f2565daf0abf0dc1069beff4563b13119fe)

Show resolved

Hide resolved

[![otech47](https://avatars.githubusercontent.com/u/4914611?s=60&v=4)](/otech47)

**[otech47](/otech47)**
approved these changes
[Oct 10, 2022](#pullrequestreview-1135414892)

 [View reviewed changes](/btcsuite/btcd/pull/1896/files)

[![@otech47](https://avatars.githubusercontent.com/u/4914611?s=40&v=4)](/otech47)
[otech47](/otech47)
mentioned this pull request
[Oct 10, 2022](#ref-issue-1402455756)

[REF: lnd major bug reported #7002 (affecting all nodes) - Unable to deserialize block: readScript: script witness item is larger than the max allowed size [count 33970, max 11000]`
mynodebtc/mynode#702](/mynodebtc/mynode/issues/702)

Closed

[![@kaloudis](https://avatars.githubusercontent.com/u/1878621?s=80&u=113b49d841f78df9a25769a5316f34b58816b0aa&v=4)](/kaloudis)

Copy link

### **[kaloudis](/kaloudis)** commented [Oct 10, 2022](#issuecomment-1272675800)

| tACK |
| --- |

 üëç
1
 vicariousdrama reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=40&v=4)](/Roasbeef)

`[wire: remove erroneous witness size check in wire parsing](/btcsuite/btcd/pull/1896/commits/f523d4ccaa5f34a2f761f16a05f5d6e6665b1168 "wire: remove erroneous witness size check in wire parsing

In this commit, we fix a bug that would cause nodes to be unable to
parse a given block from the wire. The block would be properly accepted
if fed in via other mechanisms.

The issue here is that the old checks for the maximum witness size,
circa segwit v0 where placed in the wire package _as well_ as the tx
engine. This check should only be in the engine, since it's properly
gated by other related scrip validation flags.

The fix itself is simple: limit witnesses only based on the maximum
block size in bytes, or ~4MB.")`
 ‚Ä¶

`[f523d4c](/btcsuite/btcd/pull/1896/commits/f523d4ccaa5f34a2f761f16a05f5d6e6665b1168)`

```
In this commit, we fix a bug that would cause nodes to be unable to
parse a given block from the wire. The block would be properly accepted
if fed in via other mechanisms.

The issue here is that the old checks for the maximum witness size,
circa segwit v0 where placed in the wire package _as well_ as the tx
engine. This check should only be in the engine, since it's properly
gated by other related scrip validation flags.

The fix itself is simple: limit witnesses only based on the maximum
block size in bytes, or ~4MB.
```

 [![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=40&v=4)](/Roasbeef)
[Roasbeef](/Roasbeef)
[force-pushed](/btcsuite/btcd/compare/7fdaf6958781df46fffee4bc8bee38801c066da8..f523d4ccaa5f34a2f761f16a05f5d6e6665b1168)
the
witness-wire-hot-fix

branch
from
[`7fdaf69`](/btcsuite/btcd/commit/7fdaf6958781df46fffee4bc8bee38801c066da8) to
[`f523d4c`](/btcsuite/btcd/commit/f523d4ccaa5f34a2f761f16a05f5d6e6665b1168)  [Compare](/btcsuite/btcd/compare/7fdaf6958781df46fffee4bc8bee38801c066da8..f523d4ccaa5f34a2f761f16a05f5d6e6665b1168)
[October 10, 2022 01:09](#event-7550235357)

[![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=40&v=4)](/Roasbeef)
[Roasbeef](/Roasbeef)
merged commit [`d0aa747`](/btcsuite/btcd/commit/d0aa7473a6b593c807842888dc9fe781a5984a78)
into
btcsuite:master

[Oct 10, 2022](https://github.com/btcsuite/btcd/pull/1896#event-7550262437)

[![@chappjc](https://avatars.githubusercontent.com/u/9373513?s=40&v=4)](/chappjc)
[chappjc](/chappjc)
mentioned this pull request
[Oct 10, 2022](#ref-pullrequest-1402515830)

[btc: update btcd to fix critical block parsing failure
decred/dcrdex#1896](/decred/dcrdex/pull/1896)
 Merged

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&v=4)](/guggero)
[guggero](/guggero)
mentioned this pull request
[Oct 10, 2022](#ref-issue-1402454684)

[maxWitnessItemSize too low for TX 7393096d97bfee8660f4100ffd61874d62f9a65de9fb6acf740c4c386990ef73
#1897](/btcsuite/btcd/issues/1897)

Closed

This was referenced Oct 10, 2022

[build(deps): Bump github.com/btcsuite/btcd from 0.22.1 to 0.23.1
cosmos/cosmos-sdk#12197](/cosmos/cosmos-sdk/pull/12197)
 Closed

[Bump github.com/btcsuite/btcd/btcec to github.com/btcsuite/btcd/btcec/v2
cosmos/cosmos-sdk#13423](/cosmos/cosmos-sdk/issues/13423)

Closed

[![ziggie1984](https://avatars.githubusercontent.com/u/90319354?s=60&v=4)](/ziggie1984)

**[ziggie1984](/ziggie1984)**
reviewed
[Oct 10, 2022](#pullrequestreview-1135651359)

 [View reviewed changes](/btcsuite/btcd/pull/1896/files/f523d4ccaa5f34a2f761f16a05f5d6e6665b1168)

[wire/msgtx.go](/btcsuite/btcd/pull/1896/files/f523d4ccaa5f34a2f761f16a05f5d6e6665b1168#diff-d90adfff2befe29fa72ab522be237f2565daf0abf0dc1069beff4563b13119fe)

|  |  | @@ -586,8 +587,9 @@ func (msg \*MsgTx) BtcDecode(r io.Reader, pver uint32, enc MessageEncoding) error | |
| --- | --- | --- | --- |
|  |  | // item itself. |
|  |  | txin.Witness = make([][]byte, witCount) |
|  |  | for j := uint64(0); j < witCount; j++ { |
|  |  | txin.Witness[j], err = readScript(r, pver, |
|  |  | maxWitnessItemSize, "script witness item") |
|  |  | txin.Witness[j], err = readScript( |

Copy link

Contributor

### @ziggie1984 **[ziggie1984](/ziggie1984)** [Oct 10, 2022](#discussion_r991033001) ‚Ä¢ edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

I am wondering why we do not enforce the different size limits for the different segwit version here ? For v\_0 we stay with 11kb and for v\_1 4MB ?

Sorry, something went wrong.

All reactions

Copy link

Member

Author

### @Roasbeef **[Roasbeef](/Roasbeef)** [Oct 13, 2022](#discussion_r994894664)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

So that check is deeper in the consensus validation logic, this is a wire level DDoS defense limit/value.

Sorry, something went wrong.

All reactions

[![@satsie](https://avatars.githubusercontent.com/u/1823216?s=40&v=4)](/satsie)
[satsie](/satsie)
mentioned this pull request
[Oct 10, 2022](#ref-issue-1368465779)

[Socratic Seminar 10 Reading List (October)
0xBEEFCAF3/bostonbitdevs#4](/0xBEEFCAF3/bostonbitdevs/issues/4)

Closed

[nepet](/nepet)
added a commit
to nepet/peerswap
that referenced
this pull request
[Oct 10, 2022](#ref-commit-d88023c)
[![@nepet](https://avatars.githubusercontent.com/u/13177364?s=40&v=4)](/nepet)

`[gomod: Update to lnd v0.15.2-beta](/nepet/peerswap/commit/d88023caabb3e45bf80f02016b3c84794c38c0d7 "gomod: Update to lnd v0.15.2-beta

We need a fast update to the newest lnd version as there was a
security issue detected.
https://github.com/lightningnetwork/lnd/issues/7002

As the bug was part of the btcd dependencies the fix applied in
https://github.com/btcsuite/btcd/pull/1896 brings a long tail
of dependency updates.

This commit updates the dependencies and adapts for all changes
that are introduced by this new dependencies.")`
‚Ä¶

`[d88023c](/nepet/peerswap/commit/d88023caabb3e45bf80f02016b3c84794c38c0d7)`

```
We need a fast update to the newest lnd version as there was a
security issue detected.
[lightningnetwork/lnd#7002](https://github.com/lightningnetwork/lnd/issues/7002)

As the bug was part of the btcd dependencies the fix applied in
[btcsuite/btcd#1896](https://github.com/btcsuite/btcd/pull/1896) brings a long tail
of dependency updates.

This commit updates the dependencies and adapts for all changes
that are introduced by this new dependencies.
```

[![@nepet](https://avatars.githubusercontent.com/u/13177364?s=40&v=4)](/nepet)
[nepet](/nepet)
mentioned this pull request
[Oct 10, 2022](#ref-pullrequest-1403565581)

[gomod: Update to lnd v0.15.2-beta
ElementsProject/peerswap#142](/ElementsProject/peerswap/pull/142)
 Merged

[![@vitsalis](https://avatars.githubusercontent.com/u/1957592?s=40&v=4)](/vitsalis)
[vitsalis](/vitsalis)
mentioned this pull request
[Oct 26, 2022](#ref-pullrequest-1423694500)

[Bump btcd version to v0.23.2
btcsuite/btcwallet#823](/btcsuite/btcwallet/pull/823)
 Merged

[![@otech47](https://avatars.githubusercontent.com/u/4914611?s=40&v=4)](/otech47)
[otech47](/otech47)
mentioned this pull request
[Nov 3, 2022](#ref-issue-1433946655)

[Explore possible refactors or additional test cases in btcd/wire/msgtx.go
#1915](/btcsuite/btcd/issues/1915)

Open

[![@GoVulnBot](https://avatars.githubusercontent.com/u/96493708?s=40&v=4)](/GoVulnBot)
[GoVulnBot](/GoVulnBot)
mentioned this pull request
[Nov 7, 2022](#ref-issue-1437766587)

[x/vulndb: potential Go vuln in github.com/btcsuite/btcd: CVE-2022-44797, GHSA-2chg-86hq-7w38
golang/vulndb#1098](/golang/vulndb/issues/1098)

Closed

[![@zhenyuzhao-cb](https://avatars.githubusercontent.com/u/98498793?s=40&v=4)](/zhenyuzhao-cb)
[zhenyuzhao-cb](/zhenyuzhao-cb)
mentioned this pull request
[Feb 20, 2023](#ref-issue-1590947752)

[Error: script witness item is larger than the max allowed size [count 57628, max 11000]
ltcsuite/ltcd#24](/ltcsuite/ltcd/issues/24)

Closed

[![@oroblu](https://avatars.githubusercontent.com/u/38748972?s=40&v=4)](/oroblu)
[oroblu](/oroblu)
mentioned this pull request
[Mar 13, 2023](#ref-issue-1620887427)

[script witness item is larger than the max allowed size
ltcsuite/lnd#6](/ltcsuite/lnd/issues/6)

Closed

[![@coveralls](https://avatars.githubusercontent.com/u/2354108?s=80&v=4)](/coveralls)

Copy link

### **[coveralls](/coveralls)** commented [Dec 2, 2024](#issuecomment-2512520049) ‚Ä¢ edited Loading

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Pull Request Test Coverage Report for [Build 3216112589](https://coveralls.io/builds/53124208)Warning: This coverage report may be inaccurate. This pull request's base commit is no longer the HEAD commit of its target branch. This means it includes changes from outside the original pull request, including, potentially, unrelated coverage changes.   * For more information on this, see [Tracking coverage changes with pull request builds](https://docs.coveralls.io/build-types#tracking-coverage-changes-with-pull_request-builds). * To avoid this issue with future PRs, see these [Recommended CI Configurations](https://docs.coveralls.io/build-types#recommended-ci-configurations). * For a quick fix, [rebase this PR at GitHub](https://github.blog/changelog/2022-02-03-more-ways-to-keep-your-pull-request-branch-up-to-date/#update-your-pull-request-branch-by-rebasing). Your next report should be accurate.  Details  * **3** of **3** **(100.0%)** changed or added relevant lines in **1** file are covered. * **17** unchanged lines in **3** files lost coverage. * Overall coverage decreased (**-0.007%**) to **55.128%**  ---   | Files with Coverage Reduction | New Missed Lines | % | | --- | --- | --- | | [connmgr/connmanager.go](https://coveralls.io/builds/53124208/source?filename=connmgr%2Fconnmanager.go#L387) | 2 | 86.07% | | [txscript/taproot.go](https://coveralls.io/builds/53124208/source?filename=txscript%2Ftaproot.go#L128) | 2 | 95.93% | | [wire/msgtx.go](https://coveralls.io/builds/53124208/source?filename=wire%2Fmsgtx.go#L194) | 13 | 94.46% |   | Totals | [Coverage Status](https://coveralls.io/builds/53124208) | | --- | --- | | Change from base [Build 3045304354](https://coveralls.io/builds/52426705): | -0.007% | | Covered Lines: | 26517 | | Relevant Lines: | 48101 |   ---  üíõ - [Coveralls](https://coveralls.io) |

All reactions

Sorry, something went wrong.

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fbtcsuite%2Fbtcd%2Fpull%2F1896)

Reviewers

[![@ziggie1984](https://avatars.githubusercontent.com/u/90319354?s=40&v=4)](/ziggie1984) [ziggie1984](/ziggie1984)

ziggie1984 left review comments

[![@hieblmi](https://avatars.githubusercontent.com/u/18631614?s=40&v=4)](/hieblmi) [hieblmi](/hieblmi)

hieblmi left review comments

[![@bordalix](https://avatars.githubusercontent.com/u/9318412?s=40&v=4)](/bordalix) [bordalix](/bordalix)

bordalix left review comments

[![@otech47](https://avatars.githubusercontent.com/u/4914611?s=40&v=4)](/otech47) [otech47](/otech47)

otech47 approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

7 participants

[![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=52&v=4)](/Roasbeef) [![@coveralls](https://avatars.githubusercontent.com/u/2354108?s=52&v=4)](/coveralls) [![@kaloudis](https://avatars.githubusercontent.com/u/1878621?s=52&v=4)](/kaloudis) [![@otech47](https://avatars.githubusercontent.com/u/4914611?s=52&v=4)](/otech47) [![@bordalix](https://avatars.githubusercontent.com/u/9318412?s=52&v=4)](/bordalix) [![@hieblmi](https://avatars.githubusercontent.com/u/18631614?s=52&v=4)](/hieblmi) [![@ziggie1984](https://avatars.githubusercontent.com/u/90319354?s=52&v=4)](/ziggie1984)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_a3636f7e_20250114_214627.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Freleases%2Ftag%2Fv0.15.2-beta)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Freleases%2Ftag%2Fv0.15.2-beta)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=lightningnetwork%2Flnd)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightningnetwork](/lightningnetwork)
/
**[lnd](/lightningnetwork/lnd)**
Public

* [Notifications](/login?return_to=%2Flightningnetwork%2Flnd) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Flightningnetwork%2Flnd)
* [Star
   7.8k](/login?return_to=%2Flightningnetwork%2Flnd)

* [Code](/lightningnetwork/lnd/tree/v0.15.2-beta)
* [Issues
  567](/lightningnetwork/lnd/issues)
* [Pull requests
  188](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects
  3](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

Additional navigation options

* [Code](/lightningnetwork/lnd/tree/v0.15.2-beta)
* [Issues](/lightningnetwork/lnd/issues)
* [Pull requests](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

1. [Releases](/lightningnetwork/lnd/releases)
2. [v0.15.2-beta](/lightningnetwork/lnd/releases/tag/v0.15.2-beta)

# lnd v0.15.2-beta

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/lightningnetwork/lnd/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v0.15.2-beta)

 Loading

[View all tags](/lightningnetwork/lnd/tags)

![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)
[github-actions](/apps/github-actions)
released this
10 Oct 03:37

¬∑
[4817 commits](/lightningnetwork/lnd/compare/v0.15.2-beta...master)
to master
since this release

[v0.15.2-beta](/lightningnetwork/lnd/tree/v0.15.2-beta)

[`aff2ed3`](/lightningnetwork/lnd/commit/aff2ed3a6a118d664049835c325a5b69e977172f)

This is an emergency hot fix release to fix a bug that can cause lnd nodes to be unable to parse certain large blocks.

This release contains no major features, and is instead just a hotfix applied on top of v0.15.1.

# Verifying the Release

In order to verify the release, you'll need to have `gpg` or `gpg2` installed on your system. Once you've obtained a copy (and hopefully verified that as well), you'll first need to import the keys that have signed this release if you haven't done so already:

```
curl https://raw.githubusercontent.com/lightningnetwork/lnd/master/scripts/keys/roasbeef.asc | gpg --import

```

Once you have the required PGP keys, you can verify the release (assuming `manifest-roasbeef-v0.15.2-beta.sig` and `manifest-v0.15.2-beta.txt` are in the current directory) with:

```
gpg --verify manifest-roasbeef-v0.15.2-beta.sig manifest-v0.15.2-beta.txt

```

You should see the following if the verification was successful:

```
gpg: Signature made Sun Oct  9 20:36:23 2022 PDT
gpg:                using RSA key 60A1FA7DA5BFF08BDCBBE7903BBD59E99B280306
gpg: Good signature from "Olaoluwa Osuntokun <laolu32@gmail.com>" [ultimate]

```

That will verify the signature of the manifest file, which ensures integrity and authenticity of the archive you've downloaded locally containing the binaries. Next, depending on your operating system, you should then re-compute the `sha256` hash of the archive with `shasum -a 256 <filename>`, compare it with the corresponding one in the manifest file, and ensure they match *exactly*.

## Verifying the Release Timestamp

From this new version onwards, in addition time-stamping the *git tag* with [OpenTimeStamps](https://opentimestamps.org/), we'll also now timestamp the manifest file along with its signature. Two new files are now included along with the rest of our release artifacts:  `manifest-roasbeef-v0.15.2-beta.txt.asc.ots`.

Assuming you have the opentimestamps client installed locally, the timestamps can be verified with the following commands:

```
ots verify manifest-roasbeef-v0.15.2-beta.sig.ots -f manifest-roasbeef-v0.15.2-beta.sig

```

Alternatively, [the open timestamps website](https://opentimestamps.org/) can be used to verify timestamps if one doesn't have a `bitcoind` instance accessible locally.

These timestamps should give users confidence in the integrity of this release even after the key that signed the release expires.

## Verifying the Release Binaries

Our release binaries are fully reproducible. Third parties are able to verify that the release binaries were produced properly without having to trust the release manager(s). See our [reproducible builds guide](https://github.com/lightningnetwork/lnd/tree/master/build/release) for how this can be achieved.

The release binaries are compiled with `go1.18.2`, which is required by verifiers to arrive at the same ones.

They include the following build tags: `autopilotrpc`, `signrpc`, `walletrpc`, `chainrpc`, `invoicesrpc`, `neutrinorpc`, `routerrpc`, `watchtowerrpc`, `monitoring`, `peersrpc`, `kvdb_postrgres`, and `kvdb_etcd`. Note that these are already included in the release script, so they do not need to be provided.

The `make release` command can be used to ensure one rebuilds with all the same flags used for the release. If one wishes to build for only a single platform, then `make release sys=<OS-ARCH> tag=<tag>` can be used.

Finally, you can also verify the *tag* itself with the following command:

```
$ git verify-tag v0.15.2-beta
gpg: Signature made Mon 10 Oct 2022 02:35:30 AM UTC using RSA key ID 9B280306
gpg: Good signature from "Olaoluwa Osuntokun <laolu32@gmail.com>"

```
## Verifying the Docker Images

To verify the `lnd` and `lncli` binaries inside the docker images against the signed, reproducible release binaries, there is a verification script in the image that can be called (before starting the container for example):

```
$ docker run --rm --entrypoint="" lightninglabs/lnd:v0.15.2-beta /verify-install.sh v0.15.2-beta
$ OK=$?
$ if [ "$OK" -ne "0" ]; then echo "Verification failed!"; exit 1; done
$ docker run lightninglabs/lnd [command-line options]
```
# Building the Contained Release

Users are able to rebuild the target release themselves without having to fetch any of the dependencies. In order to do so, assuming

that `vendor.tar.gz` and `lnd-source-v0.15.2-beta.tar.gz` are in the current directory, follow these steps:

```
tar -xvzf vendor.tar.gz
tar -xvzf lnd-source-v0.15.2-beta.tar.gz
GO111MODULE=on go install -v -mod=vendor -ldflags "-X github.com/lightningnetwork/lnd/build.Commit=v0.15.2-beta" ./cmd/lnd
GO111MODULE=on go install -v -mod=vendor -ldflags "-X github.com/lightningnetwork/lnd/build.Commit=v0.15.2-beta" ./cmd/lncli

```

The `-mod=vendor` flag tells the `go build` command that it doesn't need to fetch the dependencies, and instead, they're all enclosed in the local vendor directory.

Additionally, it's now possible to use the [enclosed `release.sh` script to bundle a release for a *specific* system like so](https://github.com/lightningnetwork/lnd/pull/2191):

```
make release sys="linux-arm64 darwin-amd64"

```

‚ö°Ô∏è‚ö°Ô∏è‚ö°Ô∏è OK, now to the rest of the release notes! ‚ö°Ô∏è‚ö°Ô∏è‚ö°Ô∏è

# Release Notes

<https://github.com/lightningnetwork/lnd/blob/v0-15-2-branch/docs/release-notes/release-notes-0.15.2.md>

 Assets
38

 Loading

 üëç
9
 kajoseph, xjmzx, openoms, 22388o, hsjoberg, wuergesFC, saubyk, djkarmi, and RandyMcMillan reacted with thumbs up emoji
 üéâ
1
 djkarmi reacted with hooray emoji
 ‚ù§Ô∏è
1
 djkarmi reacted with heart emoji

All reactions

* üëç
  9 reactions
* üéâ
  1 reaction
* ‚ù§Ô∏è
  1 reaction

 9 people reacted

2

 [Join discussion](/lightningnetwork/lnd/discussions/7007)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_59ca3596_20250114_214620.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbtcsuite%2Fbtcd%2Freleases%2Ftag%2Fv0.23.2)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbtcsuite%2Fbtcd%2Freleases%2Ftag%2Fv0.23.2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=btcsuite%2Fbtcd)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[btcsuite](/btcsuite)
/
**[btcd](/btcsuite/btcd)**
Public

* [Notifications](/login?return_to=%2Fbtcsuite%2Fbtcd) You must be signed in to change notification settings
* [Fork
  2.4k](/login?return_to=%2Fbtcsuite%2Fbtcd)
* [Star
   6.3k](/login?return_to=%2Fbtcsuite%2Fbtcd)

* [Code](/btcsuite/btcd/tree/v0.23.2)
* [Issues
  181](/btcsuite/btcd/issues)
* [Pull requests
  97](/btcsuite/btcd/pulls)
* [Discussions](/btcsuite/btcd/discussions)
* [Actions](/btcsuite/btcd/actions)
* [Projects
  0](/btcsuite/btcd/projects)
* [Wiki](/btcsuite/btcd/wiki)
* [Security](/btcsuite/btcd/security)
* [Insights](/btcsuite/btcd/pulse)

Additional navigation options

* [Code](/btcsuite/btcd/tree/v0.23.2)
* [Issues](/btcsuite/btcd/issues)
* [Pull requests](/btcsuite/btcd/pulls)
* [Discussions](/btcsuite/btcd/discussions)
* [Actions](/btcsuite/btcd/actions)
* [Projects](/btcsuite/btcd/projects)
* [Wiki](/btcsuite/btcd/wiki)
* [Security](/btcsuite/btcd/security)
* [Insights](/btcsuite/btcd/pulse)

1. [Releases](/btcsuite/btcd/releases)
2. [v0.23.2](/btcsuite/btcd/releases/tag/v0.23.2)

# btcd v0.23.2

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/btcsuite/btcd/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v0.23.2)

 Loading

[View all tags](/btcsuite/btcd/tags)

![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=40&v=4)
[Roasbeef](/Roasbeef)
released this
10 Oct 01:38

¬∑
[435 commits](/btcsuite/btcd/compare/v0.23.2...master)
to master
since this release

[v0.23.2](/btcsuite/btcd/tree/v0.23.2)

[`6b5418d`](/btcsuite/btcd/commit/6b5418d5850f5b9977c9b13725d79c5c81d0c1db)

This commit was created on GitHub.com and signed with GitHub‚Äôs **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

## What's Changed

* MuSig2: Catch up to 0.4.0 by [@sputn1ck](https://github.com/sputn1ck) in [#1865](https://github.com/btcsuite/btcd/pull/1865)
* Bump btcd version in btcutil package by [@darioush](https://github.com/darioush) in [#1866](https://github.com/btcsuite/btcd/pull/1866)
* doc: fix Tor hidden service setup link by [@shyba](https://github.com/shyba) in [#1883](https://github.com/btcsuite/btcd/pull/1883)
* build: bump golang base image version to 1.17 by [@tochicool](https://github.com/tochicool) in [#1882](https://github.com/btcsuite/btcd/pull/1882)
* wire: remove erroneous witness size check in wire parsing by [@Roasbeef](https://github.com/Roasbeef) in [#1896](https://github.com/btcsuite/btcd/pull/1896)
* build: bump version to v0.23.2 by [@Roasbeef](https://github.com/Roasbeef) in [#1898](https://github.com/btcsuite/btcd/pull/1898)

## New Contributors

* [@sputn1ck](https://github.com/sputn1ck) made their first contribution in [#1865](https://github.com/btcsuite/btcd/pull/1865)
* [@darioush](https://github.com/darioush) made their first contribution in [#1866](https://github.com/btcsuite/btcd/pull/1866)
* [@shyba](https://github.com/shyba) made their first contribution in [#1883](https://github.com/btcsuite/btcd/pull/1883)
* [@tochicool](https://github.com/tochicool) made their first contribution in [#1882](https://github.com/btcsuite/btcd/pull/1882)

**Full Changelog**: [v0.23.1...v0.23.2](https://github.com/btcsuite/btcd/compare/v0.23.1...v0.23.2)

### Contributors

* [![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=64&v=4)](https://github.com/Roasbeef)
* [![@shyba](https://avatars.githubusercontent.com/u/1302078?s=64&v=4)](https://github.com/shyba)
* [![@tochicool](https://avatars.githubusercontent.com/u/4491786?s=64&v=4)](https://github.com/tochicool)
* [![@darioush](https://avatars.githubusercontent.com/u/4575758?s=64&v=4)](https://github.com/darioush)
* [![@sputn1ck](https://avatars.githubusercontent.com/u/8904314?s=64&v=4)](https://github.com/sputn1ck)

Roasbeef, shyba, and 3 other contributors

 Assets
2

 Loading

 üëç
6
 kaloudis, tkthundr, Rjected, vicariousdrama, houseme, and pcharest reacted with thumbs up emoji

All reactions

* üëç
  6 reactions

 6 people reacted

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_2a495af4_20250114_214624.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fissues%2F7002)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fissues%2F7002)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=lightningnetwork%2Flnd)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightningnetwork](/lightningnetwork)
/
**[lnd](/lightningnetwork/lnd)**
Public

* [Notifications](/login?return_to=%2Flightningnetwork%2Flnd) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Flightningnetwork%2Flnd)
* [Star
   7.8k](/login?return_to=%2Flightningnetwork%2Flnd)

* [Code](/lightningnetwork/lnd)
* [Issues
  567](/lightningnetwork/lnd/issues)
* [Pull requests
  188](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects
  3](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

Additional navigation options

* [Code](/lightningnetwork/lnd)
* [Issues](/lightningnetwork/lnd/issues)
* [Pull requests](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Flightningnetwork%2Flnd%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Flightningnetwork%2Flnd%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [bug]: Fail to chain sync on `testnet3` & `mainnet` errors relating to: script witness item is larger than the max allowed size #7002

Closed

[rsafier](/rsafier) opened this issue
Oct 9, 2022
¬∑ 24 comments
 ¬∑ Fixed by [#7004](https://github.com/lightningnetwork/lnd/pull/7004)

Closed

# [[bug]: Fail to chain sync on `testnet3` & `mainnet` errors relating to: script witness item is larger than the max allowed size](#top) #7002

[rsafier](/rsafier) opened this issue
Oct 9, 2022
¬∑ 24 comments
 ¬∑ Fixed by [#7004](https://github.com/lightningnetwork/lnd/pull/7004)

Labels
[bug](/lightningnetwork/lnd/labels/bug)
Unintended code behaviour
[P0](/lightningnetwork/lnd/labels/P0)
very high priority issue/PR, blocker on all others

## Comments

[![@rsafier](https://avatars.githubusercontent.com/u/645964?s=80&u=80869a2d80417569ec0b3427cef5f889c5bfee33&v=4)](/rsafier)

Copy link

### **[rsafier](/rsafier)** commented [Oct 9, 2022](#issue-1402375009) ‚Ä¢ edited Loading

| Background Fail to chain sync on `testnet3`. The node does show it is up to the tip of the chain , but remains unsynced due to errors  ``` 2022-10-09 18:42:39.886 [ERR] LNWL: Unable to process chain reorg: unable to get block 0000000000000032fcf519b61aad2b966348e3f2d27687b26277933cc9881965: readScript: script witness item is larger than the max allowed size [count 396669, max 11000] .... 2022-10-09 18:46:18.715 [ERR] LNWL: Unable to complete chain rescan: readScript: script witness item is larger than the max allowed size [count 396669, max 11000] ...  2022-10-09 21:36:23.272 [ERR] LNWL: Unable to process chain reorg: unable to get block 0000000000000014820a254fbcdccce582df2194014c1e3b3f5ecd9259fce663: readScript: script witness item is larger than the max allowed size [count 33970, max 11000]   ``` Your environment  * `0.15.0-beta commit=v0.15.0-beta` * `Linux ip-10-21-2-70 5.13.0-1031-aws #35~20.04.1-Ubuntu SMP Mon Jun 13 22:30:30 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux` * backend `bitcoind v23.0.0`  Steps to reproduce Unknown Expected behaviour "synced\_to\_chain": true Actual behaviour "synced\_to\_chain": false with following errors in logs:  ``` 2022-10-09 18:42:39.886 [ERR] LNWL: Unable to process chain reorg: unable to get block 0000000000000032fcf519b61aad2b966348e3f2d27687b26277933cc9881965: readScript: script witness item is larger than the max allowed size [count 396669, max 11000] .... 2022-10-09 18:46:18.715 [ERR] LNWL: Unable to complete chain rescan: readScript: script witness item is larger than the max allowed size [count 396669, max 11000] ...  2022-10-09 21:36:23.272 [ERR] LNWL: Unable to process chain reorg: unable to get block 0000000000000014820a254fbcdccce582df2194014c1e3b3f5ecd9259fce663: readScript: script witness item is larger than the max allowed size [count 33970, max 11000]   ``` |
| --- |
| The text was updated successfully, but these errors were encountered: |

 üëÄ
6
 jblachly, jaonoctus, bliotti, h0jeZvgoxFepBQ2C, raelschiffler, and morrisonbrett reacted with eyes emoji

All reactions

* üëÄ
  6 reactions

[![@rsafier](https://avatars.githubusercontent.com/u/645964?s=40&u=80869a2d80417569ec0b3427cef5f889c5bfee33&v=4)](/rsafier)
[rsafier](/rsafier)
added
[bug](/lightningnetwork/lnd/labels/bug)
Unintended code behaviour
[needs triage](/lightningnetwork/lnd/labels/needs%20triage)
labels
[Oct 9, 2022](#event-7549828560)

[![@RandyMcMillan](https://avatars.githubusercontent.com/u/152159?s=80&u=6b2cf3d32fa402270a12818a5a710ad678110e60&v=4)](/RandyMcMillan)

Copy link

Contributor

### **[RandyMcMillan](/RandyMcMillan)** commented [Oct 9, 2022](#issuecomment-1272616997)

| üò¨ |
| --- |

All reactions

Sorry, something went wrong.

[![@benthecarman](https://avatars.githubusercontent.com/u/15256660?s=80&u=16125ad91f8a52465fa201457cf25ac1b6ccac55&v=4)](/benthecarman)

Copy link

Contributor

### **[benthecarman](/benthecarman)** commented [Oct 9, 2022](#issuecomment-1272618085)

| Looks like lnd/btcd has a bug in their taproot implementation. In BIP342:  Script size limit The maximum script size of 10000 bytes does not apply. Their size is only implicitly bounded by the block weight limit.[[9](https://github.com/bitcoin/bips/blob/master/bip-0342.mediawiki#cite_note-9)]  I am surprised this wasn't caught by tests. Are they not using the [static test vectors](https://github.com/bitcoin-core/qa-assets/blob/main/unit_test_data/script_assets_test.json)? |
| --- |

 üëÄ
10
 rsafier, a-mpch, nickfarrow, evanlinjin, jaonoctus, GlenCooper, immartian, C-Otto, okeygo, and Mae1978 reacted with eyes emoji

All reactions

* üëÄ
  10 reactions

Sorry, something went wrong.

[![@HamishMacEwan](https://avatars.githubusercontent.com/u/388061?s=80&u=eec6bc3f8d8c13b3542df83451b7e80f90ea17d6&v=4)](/HamishMacEwan)

Copy link

### **[HamishMacEwan](/HamishMacEwan)** commented [Oct 9, 2022](#issuecomment-1272634303)

| Having this with LND Version v0.15.1 on mainnet:  ``` 2022-10-10 10:27:48.835 [INF] LTND: Waiting for chain backend to finish sync, start_height=757924 2022-10-10 10:27:49.535 [ERR] LNWL: Unable to complete chain rescan: readScript: script witness item is larger than the max allowed size [count 33970, max 11000]  ``` |
| --- |

 üëç
1
 crywolf reacted with thumbs up emoji
 üëÄ
7
 benthecarman, rsafier, ExImpius, jblachly, spyhuntergenral, a-mpch, and Emzy reacted with eyes emoji

All reactions

* üëç
  1 reaction
* üëÄ
  7 reactions

Sorry, something went wrong.

[![@benthecarman](https://avatars.githubusercontent.com/u/15256660?s=80&u=16125ad91f8a52465fa201457cf25ac1b6ccac55&v=4)](/benthecarman)

Copy link

Contributor

### **[benthecarman](/benthecarman)** commented [Oct 9, 2022](#issuecomment-1272637217)

| Got the same error on mainnet:  ``` 2022-10-09 16:56:50.707 [ERR] LNWL: Unable to process chain reorg: unable to get block 0000000000000000000400a35a007e223a7fb8a622dc7b5aa5eaace6824291fb: readScript: script witness item is larger than the max allowed size [count 33970, max 11000]   ``` |
| --- |

 üëç
1
 crywolf reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@rsafier](https://avatars.githubusercontent.com/u/645964?s=80&u=80869a2d80417569ec0b3427cef5f889c5bfee33&v=4)](/rsafier)

Copy link

Author

### **[rsafier](/rsafier)** commented [Oct 9, 2022](#issuecomment-1272637888)

| I also also seeing on mainnet v0.15.0:  ``` 2022-10-09 21:56:48.549 [ERR] LNWL: Unable to process chain reorg: unable to get block 0000000000000000000400a35a007e223a7fb8a622dc7b5aa5eaace6824291fb: readScript: script witness item is larger than the max allowed size [count 33970, max 11000]  ``` |
| --- |

 üëç
4
 crywolf, pinheadmz, kevkevinpal, and GlenCooper reacted with thumbs up emoji

All reactions

* üëç
  4 reactions

Sorry, something went wrong.

[![@ExImpius](https://avatars.githubusercontent.com/u/80134426?s=80&v=4)](/ExImpius)

Copy link

### **[ExImpius](/ExImpius)** commented [Oct 9, 2022](#issuecomment-1272638241)

| Same |
| --- |

All reactions

Sorry, something went wrong.

[![@fotongit](https://avatars.githubusercontent.com/u/115431440?s=80&v=4)](/fotongit)

Copy link

### **[fotongit](/fotongit)** commented [Oct 9, 2022](#issuecomment-1272638293) ‚Ä¢ edited Loading

| Same here. Why it suddenly happened to all of us?  Answer: a transaction came in the Blockchain that LND was not able to manage, thus all nodes went down at the same block |
| --- |

All reactions

Sorry, something went wrong.

[![@hieblmi](https://avatars.githubusercontent.com/u/18631614?s=80&u=78b8d02d12bd598de499b1cee252214d1bfb5f47&v=4)](/hieblmi)

Copy link

Collaborator

### **[hieblmi](/hieblmi)** commented [Oct 9, 2022](#issuecomment-1272638533) ‚Ä¢ edited Loading

| See this on v0.15.1/mainnet  ```  2022-10-09 21:56:55.488 [ERR] LNWL: Unable to process chain reorg: unable to get block 0000000000000000000400a35a007e223a7fb8a622dc7b5aa5eaace6824291fb: readScript: script witness item is larger than the max allowed size [count 33970, max 11000]  ``` |
| --- |

 üëç
1
 crywolf reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@benthecarman](https://avatars.githubusercontent.com/u/15256660?s=80&u=16125ad91f8a52465fa201457cf25ac1b6ccac55&v=4)](/benthecarman)

Copy link

Contributor

### **[benthecarman](/benthecarman)** commented [Oct 9, 2022](#issuecomment-1272639839)

| This seems to be the tx that can't be parsed  <https://mempool.space/tx/7393096d97bfee8660f4100ffd61874d62f9a65de9fb6acf740c4c386990ef73> |
| --- |

All reactions

Sorry, something went wrong.

[![@hieblmi](https://avatars.githubusercontent.com/u/18631614?s=80&u=78b8d02d12bd598de499b1cee252214d1bfb5f47&v=4)](/hieblmi)

Copy link

Collaborator

### **[hieblmi](/hieblmi)** commented [Oct 9, 2022](#issuecomment-1272640373)

| This seems to be the tx that can't be parsed  <https://mempool.space/tx/7393096d97bfee8660f4100ffd61874d62f9a65de9fb6acf740c4c386990ef73>  Posted about here: <https://twitter.com/brqgoo/status/1579216353780957185> |
| --- |

 üëç
3
 crywolf, fotongit, and bnonni reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@bnonni](https://avatars.githubusercontent.com/u/19941207?s=80&u=2063cac611dc358bf5e0adce31c1bf6b139312ae&v=4)](/bnonni)

Copy link

### **[bnonni](/bnonni)** commented [Oct 9, 2022](#issuecomment-1272642611)

| Same here. Running on testnet. bitcoind v22.0, lnd v0.15.1.  ``` 2022-10-09 22:20:06.866 [INF] LTND: Waiting for chain backend to finish sync, start_height=2350195 2022-10-09 22:20:07.828 [INF] LNWL: Started rescan from block 0000000000000027e44f015d141df1aeff3794ac4b0b7303ca1039c6baa35a4c (height 2350075) for 0 addresses 2022-10-09 22:20:08.093 [ERR] LNWL: Unable to complete chain rescan: readScript: script witness item is larger than the max allowed size [count 396669, max 11000]  ```  seeing this printed over and over in bitcoind debug.log  ``` 2022-10-09T22:30:27Z ThreadRPCServer method=getblockheader user=bitcoinrpc 2022-10-09T22:30:28Z ThreadRPCServer method=getblockchaininfo user=bitcoinrpc  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@bnonni](https://avatars.githubusercontent.com/u/19941207?s=80&u=2063cac611dc358bf5e0adce31c1bf6b139312ae&v=4)](/bnonni)

Copy link

### **[bnonni](/bnonni)** commented [Oct 9, 2022](#issuecomment-1272642650)

| This seems to be the tx that can't be parsed <https://mempool.space/tx/7393096d97bfee8660f4100ffd61874d62f9a65de9fb6acf740c4c386990ef73>  Posted about here: <https://twitter.com/brqgoo/status/1579216353780957185>  if this is a mainnet tx, why is it impacting nodes running on testnet? |
| --- |

All reactions

Sorry, something went wrong.

[![@benthecarman](https://avatars.githubusercontent.com/u/15256660?s=40&u=16125ad91f8a52465fa201457cf25ac1b6ccac55&v=4)](/benthecarman)
[benthecarman](/benthecarman)
mentioned this issue
[Oct 9, 2022](#ref-issue-1376786037)

[October topics
austinbitdevs/austinbitdevs.com#11](/austinbitdevs/austinbitdevs.com/issues/11)

Closed

[![@benthecarman](https://avatars.githubusercontent.com/u/15256660?s=80&u=16125ad91f8a52465fa201457cf25ac1b6ccac55&v=4)](/benthecarman)

Copy link

Contributor

### **[benthecarman](/benthecarman)** commented [Oct 9, 2022](#issuecomment-1272643370)

| This seems to be the tx that can't be parsed [mempool.space/tx/7393096d97bfee8660f4100ffd61874d62f9a65de9fb6acf740c4c386990ef73](https://mempool.space/tx/7393096d97bfee8660f4100ffd61874d62f9a65de9fb6acf740c4c386990ef73)  Posted about here: [twitter.com/brqgoo/status/1579216353780957185](https://twitter.com/brqgoo/status/1579216353780957185)  if this is a mainnet tx, why is it impacting nodes running on testnet?  A similar transcation happened on testnet |
| --- |

All reactions

Sorry, something went wrong.

[![@rsafier](https://avatars.githubusercontent.com/u/645964?s=40&u=80869a2d80417569ec0b3427cef5f889c5bfee33&v=4)](/rsafier)
[rsafier](/rsafier)
changed the title
~~[bug]: Fail to chain sync on `testnet3` errors relating to: script witness item is larger than the max allowed size~~
[bug]: Fail to chain sync on `testnet3` & `mainnet` errors relating to: script witness item is larger than the max allowed size
[Oct 9, 2022](#event-7550030243)

[![@bnonni](https://avatars.githubusercontent.com/u/19941207?s=80&u=2063cac611dc358bf5e0adce31c1bf6b139312ae&v=4)](/bnonni)

Copy link

### **[bnonni](/bnonni)** commented [Oct 9, 2022](#issuecomment-1272644583)

| This seems to be the tx that can't be parsed [mempool.space/tx/7393096d97bfee8660f4100ffd61874d62f9a65de9fb6acf740c4c386990ef73](https://mempool.space/tx/7393096d97bfee8660f4100ffd61874d62f9a65de9fb6acf740c4c386990ef73)  Posted about here: [twitter.com/brqgoo/status/1579216353780957185](https://twitter.com/brqgoo/status/1579216353780957185)  if this is a mainnet tx, why is it impacting nodes running on testnet?  A similar transcation happened on testnet  makes sense. figured he must have tried it on testnet first. but the testnet block referenced doesn't appear to have a tx at the same scale as the one on mainnet <https://mempool.space/testnet/block/0000000000000027e44f015d141df1aeff3794ac4b0b7303ca1039c6baa35a4c> |
| --- |

All reactions

Sorry, something went wrong.

[![@spyhuntergenral](https://avatars.githubusercontent.com/u/41215704?s=80&u=09af548cd9f1782c73fc259e15092d19723a9102&v=4)](/spyhuntergenral)

Copy link

### **[spyhuntergenral](/spyhuntergenral)** commented [Oct 9, 2022](#issuecomment-1272644782)

| ahh, few, thought i broke my node for a second . |
| --- |

All reactions

Sorry, something went wrong.

[![@benthecarman](https://avatars.githubusercontent.com/u/15256660?s=80&u=16125ad91f8a52465fa201457cf25ac1b6ccac55&v=4)](/benthecarman)

Copy link

Contributor

### **[benthecarman](/benthecarman)** commented [Oct 9, 2022](#issuecomment-1272644832)

| The bad tx on testnet is  <https://mempool.space/testnet/tx/44692bc2da73192cd0b89bc7a43c0ce43578f6b3567bc945e46e6952e8ec5ca5> |
| --- |

All reactions

Sorry, something went wrong.

[![@bnonni](https://avatars.githubusercontent.com/u/19941207?s=80&u=2063cac611dc358bf5e0adce31c1bf6b139312ae&v=4)](/bnonni)

Copy link

### **[bnonni](/bnonni)** commented [Oct 9, 2022](#issuecomment-1272645195)

| Ahh, thanks. I see, its rescanning starting at block height 2350075 meaning the tx is in the next block. Got it. Well damn, I finally got my testnet node up-and-running and was about to make some taro assets and now this üòû |
| --- |

All reactions

Sorry, something went wrong.

[![@jblachly](https://avatars.githubusercontent.com/u/5987153?s=80&v=4)](/jblachly)

Copy link

Contributor

### **[jblachly](/jblachly)** commented [Oct 9, 2022](#issuecomment-1272646635)

| Bug is actually in btcd code:  <https://github.com/btcsuite/btcd/blob/fc36cb25a4bdc6d989f9161552e7b0fe08b02939/wire/msgtx.go#L105-L109> |
| --- |

 üëç
4
 brqgoo, rsafier, bnonni, and diegokolling reacted with thumbs up emoji

All reactions

* üëç
  4 reactions

Sorry, something went wrong.

[![@saubyk](https://avatars.githubusercontent.com/u/39208279?s=40&u=393cf55b8befb6673d7c3df73e4eccd90c0fedc9&v=4)](/saubyk)
[saubyk](/saubyk)
added
the
[P0](/lightningnetwork/lnd/labels/P0)
very high priority issue/PR, blocker on all others
label
[Oct 9, 2022](#event-7550046700)

[![@brqgoo](https://avatars.githubusercontent.com/u/100725376?s=80&u=1a2f0aa4b868408b2de0b6a83449fdae6ca64380&v=4)](/brqgoo)

Copy link

### **[brqgoo](/brqgoo)** commented [Oct 9, 2022](#issuecomment-1272649324) ‚Ä¢ edited Loading

| With BIP-342, the maximum script size limit of 10000 bytes no longer applies. The witness script size is only implicitly bounded by the block weight limit. <https://github.com/bitcoin/bips/blob/master/bip-0342.mediawiki#cite_ref-9-0> |
| --- |

All reactions

Sorry, something went wrong.

[![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=80&v=4)](/Roasbeef)

Copy link

Member

### **[Roasbeef](/Roasbeef)** commented [Oct 9, 2022](#issuecomment-1272654613)

| Hey y'all, thanks for bringing this to our attention. I've identified the issue in the `btcd` wire parsing library, which led to this incident.  AFAICT, the consensus code wasn't the issue here, it was instead that the wire parsing library was erroneously still enforcing a prior check to limit witness sizing left over from segwit v0.  I am surprised this wasn't caught by tests. Are they not using the [static test vectors](https://github.com/bitcoin-core/qa-assets/blob/main/unit_test_data/script_assets_test.json)?  btcd is/was using this test vectors. The issue here is that the code the parsed the witnesses for these test vectors isn't the same code that's used to read blocks off the *wire*. When a new block comes in, we fetch the raw block then attempt to decode it, which triggered this issue. |
| --- |

 üëç
29
 sanket1729, dannydeezy, jblachly, hieblmi, kpshukla, wdstorer, spyhuntergenral, indomitorum, vilm3r, vicariousdrama, and 19 more reacted with thumbs up emoji

All reactions

* üëç
  29 reactions

Sorry, something went wrong.

[![@indomitorum](https://avatars.githubusercontent.com/u/91600997?s=80&u=a4eaa3e14f4465fca6cdd8629d9337442d45f2cb&v=4)](/indomitorum)

Copy link

### **[indomitorum](/indomitorum)** commented [Oct 9, 2022](#issuecomment-1272655912) ‚Ä¢ edited Loading

| Same problem. Have stopped the node now until further notice. 0.15.1  Logs when starting the node  Oct 10 00:34:36 indomitusbtc lnd[1922]: 2022-10-10 00:34:36.014 [INF] LTND: Waiting for chain backend to finish sync, start\_height=757941  Oct 10 00:34:36 indomitusbtc lnd[1922]: 2022-10-10 00:34:36.399 [INF] LNWL: Started rescan from block 00000000000000000007477b90ff0ea53cdd1db88e03799af18ff58df0cebaa7 (height 757921) for 2056 addresses  Oct 10 00:34:36 indomitusbtc lnd[1922]: 2022-10-10 00:34:36.685 [ERR] LNWL: Unable to complete chain rescan: readScript: script witness item is larger than the max allowed size [count 33970, max 11000] |
| --- |

All reactions

Sorry, something went wrong.

[![@saubyk](https://avatars.githubusercontent.com/u/39208279?s=40&u=393cf55b8befb6673d7c3df73e4eccd90c0fedc9&v=4)](/saubyk)
[saubyk](/saubyk)
removed
the
[needs triage](/lightningnetwork/lnd/labels/needs%20triage)
label
[Oct 10, 2022](#event-7550126758)

[![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=80&v=4)](/Roasbeef)

Copy link

Member

### **[Roasbeef](/Roasbeef)** commented [Oct 10, 2022](#issuecomment-1272664543) ‚Ä¢ edited Loading

| The fix to the btcd wire parsing logic can be found here: [btcsuite/btcd#1896](https://github.com/btcsuite/btcd/pull/1896)  This should be safe to apply to those running *btcd* nodes, which'll allow them to resume validating the main chain (the block was accepted as this wasn't a *consensus* issue persay).  Once this passes CI and a few more sniff checks, we'll issue a hotfix release for lnd: 0.15.2. This release will *only* contain the dependency update to the wire parsing library. |
| --- |

 üëç
19
 hieblmi, rsafier, spyhuntergenral, affektde, adamteale, faket0shi, hsjoberg, NilByte, cercatrova21, otech47, and 9 more reacted with thumbs up emoji
 üöÄ
9
 bnonni, affektde, saubyk, bliotti, acrespo, ErikEk, FelixWeis, a5an0, and curly60e reacted with rocket emoji

All reactions

* üëç
  19 reactions
* üöÄ
  9 reactions

Sorry, something went wrong.

[![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=40&v=4)](/Roasbeef)
[Roasbeef](/Roasbeef)
mentioned this issue
[Oct 10, 2022](#ref-pullrequest-1402449316)

[build: update to version of btcd with wire parsing bug fix
#7004](/lightningnetwork/lnd/pull/7004)
 Merged

[![@LightningLuke](https://avatars.githubusercontent.com/u/108159995?s=40&v=4)](/LightningLuke)
[LightningLuke](/LightningLuke)
mentioned this issue
[Oct 10, 2022](#ref-issue-1402455756)

[REF: lnd major bug reported #7002 (affecting all nodes) - Unable to deserialize block: readScript: script witness item is larger than the max allowed size [count 33970, max 11000]`
mynodebtc/mynode#702](/mynodebtc/mynode/issues/702)

Closed

[Roasbeef](/Roasbeef)
added a commit
to Roasbeef/lnd
that referenced
this issue
[Oct 10, 2022](#ref-commit-b3dc56f)
[![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=40&v=4)](/Roasbeef)

`[build: update to version of btcd with wire parsing bug fix](/Roasbeef/lnd/commit/b3dc56fd9eaa33fbc1bbbcc5dd6f2a4b1a6c4cf0 "build: update to version of btcd with wire parsing bug fix

Fixes https://github.com/lightningnetwork/lnd/issues/7002")`
‚Ä¶

`[b3dc56f](/Roasbeef/lnd/commit/b3dc56fd9eaa33fbc1bbbcc5dd6f2a4b1a6c4cf0)`

```
Fixes [lightningnetwork#7002](https://github.com/lightningnetwork/lnd/issues/7002)
```

[Roasbeef](/Roasbeef)
added a commit
to Roasbeef/lnd
that referenced
this issue
[Oct 10, 2022](#ref-commit-a502c38)
[![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=40&v=4)](/Roasbeef)

`[build: update to version of btcd with wire parsing bug fix](/Roasbeef/lnd/commit/a502c386cdec907cd5a8bbc7670dfaf301814640 "build: update to version of btcd with wire parsing bug fix

Fixes https://github.com/lightningnetwork/lnd/issues/7002")`
‚Ä¶

`[a502c38](/Roasbeef/lnd/commit/a502c386cdec907cd5a8bbc7670dfaf301814640)`

```
Fixes [lightningnetwork#7002](https://github.com/lightningnetwork/lnd/issues/7002)
```

[![@chappjc](https://avatars.githubusercontent.com/u/9373513?s=80&u=e78e21f230dd575a53a060c37dee051806ae0572&v=4)](/chappjc)

Copy link

### **[chappjc](/chappjc)** commented [Oct 10, 2022](#issuecomment-1272718698) ‚Ä¢ edited Loading

| Is a bump for neutrino needed too? I think a consumer can hoist the required version themselves, but they might have to require btc directly to do so. |
| --- |

All reactions

Sorry, something went wrong.

[![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=40&v=4)](/Roasbeef)
[Roasbeef](/Roasbeef)
closed this as [completed](/lightningnetwork/lnd/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
[#7004](/lightningnetwork/lnd/pull/7004)
[Oct 10, 2022](#event-7550457692)

[![@ZeroPointEnergy](https://avatars.githubusercontent.com/u/16792?s=40&v=4)](/ZeroPointEnergy)
[ZeroPointEnergy](/ZeroPointEnergy)
mentioned this issue
[Oct 10, 2022](#ref-issue-1402060197)

[LND suddenly inactive
raspiblitz/raspiblitz#3350](/raspiblitz/raspiblitz/issues/3350)

Closed

[![@VajraOfIndra](https://avatars.githubusercontent.com/u/86242283?s=40&v=4)](/VajraOfIndra)
[VajraOfIndra](/VajraOfIndra)
mentioned this issue
[Oct 10, 2022](#ref-pullrequest-1359842795)

[Update LND to v0.15.2 (URGENT - hot fix)
raspibolt/raspibolt#1083](/raspibolt/raspibolt/pull/1083)
 Merged

4 tasks

[![@seberm](https://avatars.githubusercontent.com/u/212597?s=40&v=4)](/seberm)
[seberm](/seberm)
mentioned this issue
[Oct 10, 2022](#ref-issue-1402696715)

[LND not syncing due to a bug (urgent hotfix)
mynodebtc/mynode#704](/mynodebtc/mynode/issues/704)

Closed

[![@okeygo](https://avatars.githubusercontent.com/u/34808913?s=80&u=3ceba2552a09a6ca35301bbc8954966ba073ef7e&v=4)](/okeygo)

Copy link

### **[okeygo](/okeygo)** commented [Oct 10, 2022](#issuecomment-1272955295) ‚Ä¢ edited Loading

| I confirm that my LND nodes are stuck at block 757921 despite I can send and receive Stas normally through established channels, I am proceeding to implement fix.  ``` 2022-10-10 08:19:21.786 [ERR] LNWL: Unable to process chain reorg: unable to get block 0000000000000000000400a35a007e223a7fb8a622dc7b5aa5eaace6824291fb: readScript: script witness item is larger than the max allowed size [count 33970, max 11000] 2022-10-10 08:19:22.258 [ERR] LNWL: Unable to process chain reorg: unable to get block 0000000000000000000400a35a007e223a7fb8a622dc7b5aa5eaace6824291fb: readScript: script witness item is larger than the max allowed size [count 33970, max 11000] 2022-10-10 08:20:02.063 [INF] CRTR: Processed channels=0 updates=198 nodes=11 in last 1m0.000466268s 2022-10-10 08:20:22.643 [INF] DISC: Broadcasting 321 new announcements in 18 sub batches 2022-10-10 08:21:02.063 [INF] CRTR: Processed channels=0 updates=234 nodes=8 in last 59.999372778s  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&v=4)](/guggero)
[guggero](/guggero)
mentioned this issue
[Oct 10, 2022](#ref-issue-1402801243)

[[bug]: Unable to complete chain rescan: readScript: script witness item is larger than the max allowed
#7009](/lightningnetwork/lnd/issues/7009)

Closed

[![@seberm](https://avatars.githubusercontent.com/u/212597?s=40&v=4)](/seberm)
[seberm](/seberm)
mentioned this issue
[Oct 10, 2022](#ref-pullrequest-1402816417)

[lnd: 0.15.1-beta -> 0.15.2-beta
NixOS/nixpkgs#195337](/NixOS/nixpkgs/pull/195337)
 Merged

[![@vertiond](https://avatars.githubusercontent.com/u/35286924?s=40&v=4)](/vertiond)
[vertiond](/vertiond)
mentioned this issue
[Oct 10, 2022](#ref-issue-1403407433)

[Update LND to v0.15.2-beta to fix stopped mainnet nodes
getumbrel/umbrel#1519](/getumbrel/umbrel/issues/1519)

Closed

[![@a5an0](https://avatars.githubusercontent.com/u/207713?s=40&v=4)](/a5an0)
[a5an0](/a5an0)
mentioned this issue
[Oct 10, 2022](#ref-issue-1403459518)

[new fun transaction
janoside/btc-rpc-explorer#477](/janoside/btc-rpc-explorer/issues/477)

Closed

[![@brh28](https://avatars.githubusercontent.com/u/31115595?s=40&v=4)](/brh28)
[brh28](/brh28)
mentioned this issue
[Oct 10, 2022](#ref-issue-1385162387)

[Socratic Seminar #0 Topics
NashBitDevs/nashbitdevs.org#1](/NashBitDevs/nashbitdevs.org/issues/1)

Closed

[nepet](/nepet)
added a commit
to nepet/peerswap
that referenced
this issue
[Oct 10, 2022](#ref-commit-d88023c)
[![@nepet](https://avatars.githubusercontent.com/u/13177364?s=40&v=4)](/nepet)

`[gomod: Update to lnd v0.15.2-beta](/nepet/peerswap/commit/d88023caabb3e45bf80f02016b3c84794c38c0d7 "gomod: Update to lnd v0.15.2-beta

We need a fast update to the newest lnd version as there was a
security issue detected.
https://github.com/lightningnetwork/lnd/issues/7002

As the bug was part of the btcd dependencies the fix applied in
https://github.com/btcsuite/btcd/pull/1896 brings a long tail
of dependency updates.

This commit updates the dependencies and adapts for all changes
that are introduced by this new dependencies.")`
‚Ä¶

`[d88023c](/nepet/peerswap/commit/d88023caabb3e45bf80f02016b3c84794c38c0d7)`

```
We need a fast update to the newest lnd version as there was a
security issue detected.
[lightningnetwork/lnd#7002](https://github.com/lightningnetwork/lnd/issues/7002)

As the bug was part of the btcd dependencies the fix applied in
[btcsuite/btcd#1896](https://github.com/btcsuite/btcd/pull/1896) brings a long tail
of dependency updates.

This commit updates the dependencies and adapts for all changes
that are introduced by this new dependencies.
```

[![@nepet](https://avatars.githubusercontent.com/u/13177364?s=40&v=4)](/nepet)
[nepet](/nepet)
mentioned this issue
[Oct 10, 2022](#ref-pullrequest-1403565581)

[gomod: Update to lnd v0.15.2-beta
ElementsProject/peerswap#142](/ElementsProject/peerswap/pull/142)
 Merged

[![@VajraOfIndra](https://avatars.githubusercontent.com/u/86242283?s=40&v=4)](/VajraOfIndra)
[VajraOfIndra](/VajraOfIndra)
mentioned this issue
[Oct 11, 2022](#ref-issue-1404178581)

[[FEATURE REQUEST] Add a LND chain/graph sync status
raspibolt/raspibolt-pulse#6](/raspibolt/raspibolt-pulse/issues/6)

Closed

[![@sputn1ck](https://avatars.githubusercontent.com/u/8904314?s=40&v=4)](/sputn1ck)
[sputn1ck](/sputn1ck)
mentioned this issue
[Oct 11, 2022](#ref-issue-1404838280)

[not enough witness outputs to create funding transaction, need xxx BTC only have 0 BTC available
#7023](/lightningnetwork/lnd/issues/7023)

Closed

[![@fiatjaf](https://avatars.githubusercontent.com/u/1653275?s=40&v=4)](/fiatjaf)
[fiatjaf](/fiatjaf)
mentioned this issue
[Oct 12, 2022](#ref-issue-1405450479)

[plugin-trustedcoin getblock error
nbd-wtf/trustedcoin#14](/nbd-wtf/trustedcoin/issues/14)

Closed

This was referenced Oct 13, 2022

[[feature]: Remove ErrSynchronizingChain from returned error whitelist
#7034](/lightningnetwork/lnd/issues/7034)

Closed

[Remove ErrSynchronizingChain
#7039](/lightningnetwork/lnd/pull/7039)
 Merged

[![@reez](https://avatars.githubusercontent.com/u/6657488?s=40&v=4)](/reez)
[reez](/reez)
mentioned this issue
[Oct 15, 2022](#ref-issue-1409968038)

[Socratic Seminar #1 Topics
NashBitDevs/nashbitdevs.org#2](/NashBitDevs/nashbitdevs.org/issues/2)

Closed

[![@otech47](https://avatars.githubusercontent.com/u/4914611?s=40&v=4)](/otech47)
[otech47](/otech47)
mentioned this issue
[Nov 3, 2022](#ref-issue-1433946655)

[Explore possible refactors or additional test cases in btcd/wire/msgtx.go
btcsuite/btcd#1915](/btcsuite/btcd/issues/1915)

Open

[![@GoVulnBot](https://avatars.githubusercontent.com/u/96493708?s=40&v=4)](/GoVulnBot)
[GoVulnBot](/GoVulnBot)
mentioned this issue
[Nov 7, 2022](#ref-issue-1437766587)

[x/vulndb: potential Go vuln in github.com/btcsuite/btcd: CVE-2022-44797, GHSA-2chg-86hq-7w38
golang/vulndb#1098](/golang/vulndb/issues/1098)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fissues%2F7002)

Assignees

No one assigned

Labels

[bug](/lightningnetwork/lnd/labels/bug)
Unintended code behaviour
[P0](/lightningnetwork/lnd/labels/P0)
very high priority issue/PR, blocker on all others

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [build: update to version of btcd with wire parsing bug fix](/lightningnetwork/lnd/pull/7004)
 [Roasbeef/lnd](/Roasbeef/lnd)

16 participants

[![@RandyMcMillan](https://avatars.githubusercontent.com/u/152159?s=52&v=4)](/RandyMcMillan) [![@HamishMacEwan](https://avatars.githubusercontent.com/u/388061?s=52&v=4)](/HamishMacEwan) [![@rsafier](https://avatars.githubusercontent.com/u/645964?s=52&v=4)](/rsafier) [![@Roasbeef](https://avatars.githubusercontent.com/u/998190?s=52&v=4)](/Roasbeef) [![@jblachly](https://avatars.githubusercontent.com/u/5987153?s=52&v=4)](/jblachly) [![@chappjc](https://avatars.githubusercontent.com/u/9373513?s=52&v=4)](/chappjc) [![@benthecarman](https://avatars.githubusercontent.com/u/15256660?s=52&v=4)](/benthecarman) [![@hieblmi](https://avatars.githubusercontent.com/u/18631614?s=52&v=4)](/hieblmi) [![@bnonni](https://avatars.githubusercontent.com/u/19941207?s=52&v=4)](/bnonni) [![@okeygo](https://avatars.githubusercontent.com/u/34808913?s=52&v=4)](/okeygo) [![@saubyk](https://avatars.githubusercontent.com/u/39208279?s=52&v=4)](/saubyk) [![@spyhuntergenral](https://avatars.githubusercontent.com/u/41215704?s=52&v=4)](/spyhuntergenral) [![@ExImpius](https://avatars.githubusercontent.com/u/80134426?s=52&v=4)](/ExImpius) [![@indomitorum](https://avatars.githubusercontent.com/u/91600997?s=52&v=4)](/indomitorum) [![@brqgoo](https://avatars.githubusercontent.com/u/100725376?s=52&v=4)](/brqgoo) [![@fotongit](https://avatars.githubusercontent.com/u/115431440?s=52&v=4)](/fotongit)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


