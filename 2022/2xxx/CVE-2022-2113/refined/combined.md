=== Content from github.com_a93333df_20250114_203303.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Finventree%2Finventree%2Fcommit%2F26bf51c20a1c9b3130ac5dd2e17649bece5ff84f)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Finventree%2Finventree%2Fcommit%2F26bf51c20a1c9b3130ac5dd2e17649bece5ff84f)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=inventree%2FInvenTree)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[inventree](/inventree)
/
**[InvenTree](/inventree/InvenTree)**
Public

* [Notifications](/login?return_to=%2Finventree%2FInvenTree) You must be signed in to change notification settings
* [Fork
  822](/login?return_to=%2Finventree%2FInvenTree)
* [Star
   4.6k](/login?return_to=%2Finventree%2FInvenTree)

* [Code](/inventree/InvenTree)
* [Issues
  210](/inventree/InvenTree/issues)
* [Pull requests
  18](/inventree/InvenTree/pulls)
* [Discussions](/inventree/InvenTree/discussions)
* [Actions](/inventree/InvenTree/actions)
* [Security](/inventree/InvenTree/security)
* [Insights](/inventree/InvenTree/pulse)

Additional navigation options

* [Code](/inventree/InvenTree)
* [Issues](/inventree/InvenTree/issues)
* [Pull requests](/inventree/InvenTree/pulls)
* [Discussions](/inventree/InvenTree/discussions)
* [Actions](/inventree/InvenTree/actions)
* [Security](/inventree/InvenTree/security)
* [Insights](/inventree/InvenTree/pulse)

## Commit

[Permalink](/inventree/InvenTree/commit/26bf51c20a1c9b3130ac5dd2e17649bece5ff84f)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Back porting of security patches ([#3197](https://github.com/inventree/InvenTree/pull/3197))

[Browse files](/inventree/InvenTree/tree/26bf51c20a1c9b3130ac5dd2e17649bece5ff84f)
Browse the repository at this point in the history

```
* Merge pull request from [GHSA-fr2w-mp56-g4xp](https://github.com/advisories/GHSA-fr2w-mp56-g4xp "GHSA-fr2w-mp56-g4xp")

* Enforce file download for attachments table(s)

* Enforce file download for attachment in 'StockItemTestResult' table

(cherry picked from commit [76aa3a7](https://github.com/inventree/InvenTree/commit/76aa3a75f2e5b93877a229e29326b8b4ea815aea))

* Merge pull request from [GHSA-7rq4-qcpw-74gq](https://github.com/advisories/GHSA-7rq4-qcpw-74gq "GHSA-7rq4-qcpw-74gq")

* Merge pull request from [GHSA-rm89-9g65-4ffr](https://github.com/advisories/GHSA-rm89-9g65-4ffr "GHSA-rm89-9g65-4ffr")

* Enable HTML escaping for all tables by default

* Enable HTML escaping for all tables by default

* Adds automatic escaping for bootstrap tables where custom formatter function is specified

- Intercept the row data *before* it is provided to the renderer function
- Adds a function for sanitizing nested data structure

* Sanitize form data before processing

(cherry picked from commit [cd418d6](https://github.com/inventree/InvenTree/commit/cd418d6948e6bf5f428cec5b4a7a1f0618a482a3))

* Increment version number for release

* Fix sanitization for array case - was missing a return value
```

* Loading branch information

[![@SchrodingersGat](https://avatars.githubusercontent.com/u/10080325?s=40&v=4)](/SchrodingersGat)

[SchrodingersGat](/inventree/InvenTree/commits?author=SchrodingersGat "View all commits by SchrodingersGat")
authored
Jun 15, 2022

1 parent
[f9c28ee](/inventree/InvenTree/commit/f9c28eedafb8dc6525ef4f61534b2cde6f5b15fa)

commit 26bf51c

 Show file tree

 Hide file tree

Showing
**12 changed files**
with
**195 additions**
and
**63 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* InvenTree

  + InvenTree

    - InvenTree/InvenTree/admin.py
      [admin.py](#diff-2fbb16acf7768b787d7a50206024eb559fa7cf57bee4ddf36b0b88c9c6bbcaca)
    - static/script/inventree

      * InvenTree/InvenTree/static/script/inventree/inventree.js
        [inventree.js](#diff-4c8fda7efba0fa8c3535a65e73e7501c1e2f186ef3169f0e10cb232b1dee3e16)
    - InvenTree/InvenTree/version.py
      [version.py](#diff-39ac6e7b278f37cffbe528763af0e981c35fadf2e225d429b785ba260f7a1adc)
  + build

    - InvenTree/build/admin.py
      [admin.py](#diff-a5d2b0b07a9e6344d13fae0d164447d67897bd8d3725291d96205b83361eb5dd)
  + company

    - InvenTree/company/admin.py
      [admin.py](#diff-08d9c18527341c758502c8b4734958ddd63087cb7742919a323279fe796aef39)
  + order

    - InvenTree/order/admin.py
      [admin.py](#diff-e1a1df0f51e2e1cb0a4e386483b452231bba8d87cc349f180a0282743265040e)
  + part

    - InvenTree/part/admin.py
      [admin.py](#diff-fa00795e64fad71d48c1a20520cb7c85ada2b09105fc5324898124833509a163)
  + stock

    - InvenTree/stock/admin.py
      [admin.py](#diff-e9222d1a1cdfc1e31c505fa6edb887502486c9f65967ab4b4188e1f8657b4e9b)
  + templates/js/translated

    - InvenTree/templates/js/translated/attachment.js
      [attachment.js](#diff-f7cced09adca757978dc535bcf463cbac732a7b4040e0ac322d3eb71645505c6)
    - InvenTree/templates/js/translated/forms.js
      [forms.js](#diff-bc2fefc6affb6d57748cb1c1b2a021fb26f4e6ddae6cadbae680cb489d95de10)
    - InvenTree/templates/js/translated/stock.js
      [stock.js](#diff-e2a891171ea6b95f464d196efbc13b909c529820cb4de46606259f1c3564183a)
    - InvenTree/templates/js/translated/tables.js
      [tables.js](#diff-66f2a248f974ce38baa78c7df38735085b887d7dfa698fdc742b833d10969fd4)

## There are no files selected for viewing

33 changes: 33 additions & 0 deletions

33
[InvenTree/InvenTree/admin.py](#diff-2fbb16acf7768b787d7a50206024eb559fa7cf57bee4ddf36b0b88c9c6bbcaca "InvenTree/InvenTree/admin.py")

Show comments

[View file](/inventree/InvenTree/blob/26bf51c20a1c9b3130ac5dd2e17649bece5ff84f/InvenTree/InvenTree/admin.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,33 @@ |
|  |  | """Admin classes""" |
|  |  |  |
|  |  | from import\_export.resources import ModelResource |
|  |  |  |
|  |  |  |
|  |  | class InvenTreeResource(ModelResource): |
|  |  | """Custom subclass of the ModelResource class provided by django-import-export" |
|  |  |  |
|  |  | Ensures that exported data are escaped to prevent malicious formula injection. |
|  |  | Ref: https://owasp.org/www-community/attacks/CSV\_Injection |
|  |  | """ |
|  |  |  |
|  |  | def export\_resource(self, obj): |
|  |  | """Custom function to override default row export behaviour. |
|  |  |  |
|  |  | Specifically, strip illegal leading characters to prevent formula injection |
|  |  | """ |
|  |  | row = super().export\_resource(obj) |
|  |  |  |
|  |  | illegal\_start\_vals = ['@', '=', '+', '-', '@', '\t', '\r', '\n'] |
|  |  |  |
|  |  | for idx, val in enumerate(row): |
|  |  | if type(val) is str: |
|  |  | val = val.strip() |
|  |  |  |
|  |  | # If the value starts with certain 'suspicious' values, remove it! |
|  |  | while len(val) > 0 and val[0] in illegal\_start\_vals: |
|  |  | # Remove the first character |
|  |  | val = val[1:] |
|  |  |  |
|  |  | row[idx] = val |
|  |  |  |
|  |  | return row |

37 changes: 37 additions & 0 deletions

37
[InvenTree/InvenTree/static/script/inventree/inventree.js](#diff-4c8fda7efba0fa8c3535a65e73e7501c1e2f186ef3169f0e10cb232b1dee3e16 "InvenTree/InvenTree/static/script/inventree/inventree.js")

Show comments

[View file](/inventree/InvenTree/blob/26bf51c20a1c9b3130ac5dd2e17649bece5ff84f/InvenTree/InvenTree/static/script/inventree/inventree.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -13,6 +13,7 @@ |
|  |  | inventreeDocReady, |
|  |  | inventreeLoad, |
|  |  | inventreeSave, |
|  |  | sanitizeData, |
|  |  | \*/ |
|  |  |  |
|  |  | function attachClipboard(selector, containerselector, textElement) { |
| Expand Down  Expand Up | | @@ -273,6 +274,42 @@ function loadBrandIcon(element, name) { |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  |  |
|  |  | /\* |
|  |  | \* Function to sanitize a (potentially nested) object. |
|  |  | \* Iterates through all levels, and sanitizes each primitive string. |
|  |  | \* |
|  |  | \* Note that this function effectively provides a "deep copy" of the provided data, |
|  |  | \* and the original data structure is unaltered. |
|  |  | \*/ |
|  |  | function sanitizeData(data) { |
|  |  | if (data == null) { |
|  |  | return null; |
|  |  | } else if (Array.isArray(data)) { |
|  |  | // Handle arrays |
|  |  | var arr = []; |
|  |  | data.forEach(function(val) { |
|  |  | arr.push(sanitizeData(val)); |
|  |  | }); |
|  |  |  |
|  |  | return arr; |
|  |  | } else if (typeof(data) === 'object') { |
|  |  | // Handle nested structures |
|  |  | var nested = {}; |
|  |  | $.each(data, function(k, v) { |
|  |  | nested[k] = sanitizeData(v); |
|  |  | }); |
|  |  |  |
|  |  | return nested; |
|  |  | } else if (typeof(data) === 'string') { |
|  |  | // Perform string replacement |
|  |  | return data.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#039;').replace(/`/g, '&#x60;'); |
|  |  | } else { |
|  |  | return data; |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  |  |
|  |  | // Convenience function to determine if an element exists |
|  |  | $.fn.exists = function() { |
|  |  | return this.length !== 0; |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[InvenTree/InvenTree/version.py](#diff-39ac6e7b278f37cffbe528763af0e981c35fadf2e225d429b785ba260f7a1adc "InvenTree/InvenTree/version.py")

Show comments

[View file](/inventree/InvenTree/blob/26bf51c20a1c9b3130ac5dd2e17649bece5ff84f/InvenTree/InvenTree/version.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -12,7 +12,7 @@ |
|  |  | from InvenTree.api\_version import INVENTREE\_API\_VERSION |
|  |  |  |
|  |  | # InvenTree software version |
|  |  | INVENTREE\_SW\_VERSION = "0.7.1" |
|  |  | INVENTREE\_SW\_VERSION = "0.7.2" |
|  |  |  |
|  |  |  |
|  |  | def inventreeInstanceName(): |
| Expand Down | |  |

7 changes: 3 additions & 4 deletions

7
[InvenTree/build/admin.py](#diff-a5d2b0b07a9e6344d13fae0d164447d67897bd8d3725291d96205b83361eb5dd "InvenTree/build/admin.py")

Show comments

[View file](/inventree/InvenTree/blob/26bf51c20a1c9b3130ac5dd2e17649bece5ff84f/InvenTree/build/admin.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2,16 +2,15 @@ |
|  |  |  |
|  |  | from import\_export.admin import ImportExportModelAdmin |
|  |  | from import\_export.fields import Field |
|  |  | from import\_export.resources import ModelResource |
|  |  | import import\_export.widgets as widgets |
|  |  |  |
|  |  | from build.models import Build, BuildItem |
|  |  |  |
|  |  | from InvenTree.admin import InvenTreeResource |
|  |  | import part.models |
|  |  |  |
|  |  |  |
|  |  | class BuildResource(ModelResource): |
|  |  | """Class for managing import/export of Build data""" |
|  |  | class BuildResource(InvenTreeResource): |
|  |  | """Class for managing import/export of Build data.""" |
|  |  | # For some reason, we need to specify the fields individually for this ModelResource, |
|  |  | # but we don't for other ones. |
|  |  | # TODO: 2022-05-12 - Need to investigate why this is the case! |
| Expand Down | |  |

28 changes: 11 additions & 17 deletions

28
[InvenTree/company/admin.py](#diff-08d9c18527341c758502c8b4734958ddd63087cb7742919a323279fe796aef39 "InvenTree/company/admin.py")

Show comments

[View file](/inventree/InvenTree/blob/26bf51c20a1c9b3130ac5dd2e17649bece5ff84f/InvenTree/company/admin.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -3,17 +3,17 @@ |
|  |  | import import\_export.widgets as widgets |
|  |  | from import\_export.admin import ImportExportModelAdmin |
|  |  | from import\_export.fields import Field |
|  |  | from import\_export.resources import ModelResource |
|  |  |  |
|  |  | from InvenTree.admin import InvenTreeResource |
|  |  | from part.models import Part |
|  |  |  |
|  |  | from .models import (Company, ManufacturerPart, ManufacturerPartAttachment, |
|  |  | ManufacturerPartParameter, SupplierPart, |
|  |  | SupplierPriceBreak) |
|  |  |  |
|  |  |  |
|  |  | class CompanyResource(ModelResource): |
|  |  | """ Class for managing Company data import/export """ |
|  |  | class CompanyResource(InvenTreeResource): |
|  |  | """Class for managing Company data import/export.""" |
|  |  |  |
|  |  | class Meta: |
|  |  | model = Company |
| Expand All | | @@ -34,10 +34,8 @@ class CompanyAdmin(ImportExportModelAdmin): |
|  |  | ] |
|  |  |  |
|  |  |  |
|  |  | class SupplierPartResource(ModelResource): |
|  |  | """ |
|  |  | Class for managing SupplierPart data import/export |
|  |  | """ |
|  |  | class SupplierPartResource(InvenTreeResource): |
|  |  | """Class for managing SupplierPart data import/export.""" |
|  |  |  |
|  |  | part = Field(attribute='part', widget=widgets.ForeignKeyWidget(Part)) |
|  |  |  |
| Expand Down  Expand Up | | @@ -70,10 +68,8 @@ class SupplierPartAdmin(ImportExportModelAdmin): |
|  |  | autocomplete\_fields = ('part', 'supplier', 'manufacturer\_part',) |
|  |  |  |
|  |  |  |
|  |  | class ManufacturerPartResource(ModelResource): |
|  |  | """ |
|  |  | Class for managing ManufacturerPart data import/export |
|  |  | """ |
|  |  | class ManufacturerPartResource(InvenTreeResource): |
|  |  | """Class for managing ManufacturerPart data import/export.""" |
|  |  |  |
|  |  | part = Field(attribute='part', widget=widgets.ForeignKeyWidget(Part)) |
|  |  |  |
| Expand Down  Expand Up | | @@ -118,10 +114,8 @@ class ManufacturerPartAttachmentAdmin(ImportExportModelAdmin): |
|  |  | autocomplete\_fields = ('manufacturer\_part',) |
|  |  |  |
|  |  |  |
|  |  | class ManufacturerPartParameterResource(ModelResource): |
|  |  | """ |
|  |  | Class for managing ManufacturerPartParameter data import/export |
|  |  | """ |
|  |  | class ManufacturerPartParameterResource(InvenTreeResource): |
|  |  | """Class for managing ManufacturerPartParameter data import/export.""" |
|  |  |  |
|  |  | class Meta: |
|  |  | model = ManufacturerPartParameter |
| Expand All | | @@ -148,8 +142,8 @@ class ManufacturerPartParameterAdmin(ImportExportModelAdmin): |
|  |  | autocomplete\_fields = ('manufacturer\_part',) |
|  |  |  |
|  |  |  |
|  |  | class SupplierPriceBreakResource(ModelResource): |
|  |  | """ Class for managing SupplierPriceBreak data import/export """ |
|  |  | class SupplierPriceBreakResource(InvenTreeResource): |
|  |  | """Class for managing SupplierPriceBreak data import/export.""" |
|  |  |  |
|  |  | part = Field(attribute='part', widget=widgets.ForeignKeyWidget(SupplierPart)) |
|  |  |  |
| Expand Down | |  |

61 changes: 37 additions & 24 deletions

61
[InvenTree/order/admin.py](#diff-e1a1df0f51e2e1cb0a4e386483b452231bba8d87cc349f180a0282743265040e "InvenTree/order/admin.py")

Show comments

[View file](/inventree/InvenTree/blob/26bf51c20a1c9b3130ac5dd2e17649bece5ff84f/InvenTree/order/admin.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,9 +1,12 @@ |
|  |  | """Admin functionality for the 'order' app""" |
|  |  |  |
|  |  | from django.contrib import admin |
|  |  |  |
|  |  | import import\_export.widgets as widgets |
|  |  | from import\_export.admin import ImportExportModelAdmin |
|  |  | from import\_export.fields import Field |
|  |  | from import\_export.resources import ModelResource |
|  |  |  |
|  |  | from InvenTree.admin import InvenTreeResource |
|  |  |  |
|  |  | from .models import (PurchaseOrder, PurchaseOrderExtraLine, |
|  |  | PurchaseOrderLineItem, SalesOrder, SalesOrderAllocation, |
| Expand All | | @@ -13,6 +16,7 @@ |
|  |  |  |
|  |  | # region general classes |
|  |  | class GeneralExtraLineAdmin: |
|  |  | """Admin class template for the 'ExtraLineItem' models""" |
|  |  | list\_display = ( |
|  |  | 'order', |
|  |  | 'quantity', |
| Expand All | | @@ -29,18 +33,21 @@ class GeneralExtraLineAdmin: |
|  |  |  |
|  |  |  |
|  |  | class GeneralExtraLineMeta: |
|  |  | """Metaclass template for the 'ExtraLineItem' models""" |
|  |  | skip\_unchanged = True |
|  |  | report\_skipped = False |
|  |  | clean\_model\_instances = True |
|  |  | # endregion |
|  |  |  |
|  |  |  |
|  |  | class PurchaseOrderLineItemInlineAdmin(admin.StackedInline): |
|  |  | """Inline admin class for the PurchaseOrderLineItem model""" |
|  |  | model = PurchaseOrderLineItem |
|  |  | extra = 0 |
|  |  |  |
|  |  |  |
|  |  | class PurchaseOrderAdmin(ImportExportModelAdmin): |
|  |  | """Admin class for the PurchaseOrder model""" |
|  |  |  |
|  |  | exclude = [ |
|  |  | 'reference\_int', |
| Expand Down  Expand Up | | @@ -68,6 +75,7 @@ class PurchaseOrderAdmin(ImportExportModelAdmin): |
|  |  |  |
|  |  |  |
|  |  | class SalesOrderAdmin(ImportExportModelAdmin): |
|  |  | """Admin class for the SalesOrder model""" |
|  |  |  |
|  |  | exclude = [ |
|  |  | 'reference\_int', |
| Expand All | | @@ -90,10 +98,8 @@ class SalesOrderAdmin(ImportExportModelAdmin): |
|  |  | autocomplete\_fields = ('customer',) |
|  |  |  |
|  |  |  |
|  |  | class PurchaseOrderResource(ModelResource): |
|  |  | """ |
|  |  | Class for managing import / export of PurchaseOrder data |
|  |  | """ |
|  |  | class PurchaseOrderResource(InvenTreeResource): |
|  |  | """Class for managing import / export of PurchaseOrder data.""" |
|  |  |  |
|  |  | # Add number of line items |
|  |  | line\_items = Field(attribute='line\_count', widget=widgets.IntegerWidget(), readonly=True) |
| Expand All | | @@ -102,6 +108,7 @@ class PurchaseOrderResource(ModelResource): |
|  |  | overdue = Field(attribute='is\_overdue', widget=widgets.BooleanWidget(), readonly=True) |
|  |  |  |
|  |  | class Meta: |
|  |  | """Metaclass""" |
|  |  | model = PurchaseOrder |
|  |  | skip\_unchanged = True |
|  |  | clean\_model\_instances = True |
| Expand All | | @@ -110,8 +117,8 @@ class Meta: |
|  |  | ] |
|  |  |  |
|  |  |  |
|  |  | class PurchaseOrderLineItemResource(ModelResource): |
|  |  | """ Class for managing import / export of PurchaseOrderLineItem data """ |
|  |  | class PurchaseOrderLineItemResource(InvenTreeResource): |
|  |  | """Class for managing import / export of PurchaseOrderLineItem data.""" |
|  |  |  |
|  |  | part\_name = Field(attribute='part\_\_part\_\_name', readonly=True) |
|  |  |  |
| Expand All | | @@ -122,23 +129,24 @@ class PurchaseOrderLineItemResource(ModelResource): |
|  |  | SKU = Field(attribute='part\_\_SKU', readonly=True) |
|  |  |  |
|  |  | class Meta: |
|  |  | """Metaclass""" |
|  |  | model = PurchaseOrderLineItem |
|  |  | skip\_unchanged = True |
|  |  | report\_skipped = False |
|  |  | clean\_model\_instances = True |
|  |  |  |
|  |  |  |
|  |  | class PurchaseOrderExtraLineResource(ModelResource): |
|  |  | """ Class for managing import / export of PurchaseOrderExtraLine data """ |
|  |  | class PurchaseOrderExtraLineResource(InvenTreeResource): |
|  |  | """Class for managing import / export of PurchaseOrderExtraLine data.""" |
|  |  |  |
|  |  | class Meta(GeneralExtraLineMeta): |
|  |  | """Metaclass options.""" |
|  |  |  |
|  |  | model = PurchaseOrderExtraLine |
|  |  |  |
|  |  |  |
|  |  | class SalesOrderResource(ModelResource): |
|  |  | """ |
|  |  | Class for managing import / export of SalesOrder data |
|  |  | """ |
|  |  | class SalesOrderResource(InvenTreeResource): |
|  |  | """Class for managing import / export of SalesOrder data.""" |
|  |  |  |
|  |  | # Add number of line items |
|  |  | line\_items = Field(attribute='line\_count', widget=widgets.IntegerWidget(), readonly=True) |
| Expand All | | @@ -147,6 +155,7 @@ class SalesOrderResource(ModelResource): |
|  |  | overdue = Field(attribute='is\_overdue', widget=widgets.BooleanWidget(), readonly=True) |
|  |  |  |
|  |  | class Meta: |
|  |  | """Metaclass options""" |
|  |  | model = SalesOrder |
|  |  | skip\_unchanged = True |
|  |  | clean\_model\_instances = True |
| Expand All | | @@ -155,10 +164,8 @@ class Meta: |
|  |  | ] |
|  |  |  |
|  |  |  |
|  |  | class SalesOrderLineItemResource(ModelResource): |
|  |  | """ |
|  |  | Class for managing import / export of SalesOrderLineItem data |
|  |  | """ |
|  |  | class SalesOrderLineItemResource(InvenTreeResource): |
|  |  | """Class for managing import / export of SalesOrderLineItem data.""" |
|  |  |  |
|  |  | part\_name = Field(attribute='part\_\_name', readonly=True) |
|  |  |  |
| Expand All | | @@ -169,31 +176,34 @@ class SalesOrderLineItemResource(ModelResource): |
|  |  | fulfilled = Field(attribute='fulfilled\_quantity', readonly=True) |
|  |  |  |
|  |  | def dehydrate\_sale\_price(self, item): |
|  |  | """ |
|  |  | Return a string value of the 'sale\_price' field, rather than the 'Money' object. |
|  |  | """Return a string value of the 'sale\_price' field, rather than the 'Money' object. |
|  |  |  |
|  |  | Ref: https://github.com/inventree/InvenTree/issues/2207 |
|  |  | """ |
|  |  |  |
|  |  | if item.sale\_price: |
|  |  | return str(item.sale\_price) |
|  |  | else: |
|  |  | return '' |
|  |  |  |
|  |  | class Meta: |
|  |  | """Metaclass options""" |
|  |  | model = SalesOrderLineItem |
|  |  | skip\_unchanged = True |
|  |  | report\_skipped = False |
|  |  | clean\_model\_instances = True |
|  |  |  |
|  |  |  |
|  |  | class SalesOrderExtraLineResource(ModelResource): |
|  |  | """ Class for managing import / export of SalesOrderExtraLine data """ |
|  |  | class SalesOrderExtraLineResource(InvenTreeResource): |
|  |  | """Class for managing import / export of SalesOrderExtraLine data.""" |
|  |  |  |
|  |  | class Meta(GeneralExtraLineMeta): |
|  |  | """Metaclass options.""" |
|  |  |  |
|  |  | model = SalesOrderExtraLine |
|  |  |  |
|  |  |  |
|  |  | class PurchaseOrderLineItemAdmin(ImportExportModelAdmin): |
|  |  | """Admin class for the PurchaseOrderLine model""" |
|  |  |  |
|  |  | resource\_class = PurchaseOrderLineItemResource |
|  |  |  |
| Expand All | | @@ -210,11 +220,12 @@ class PurchaseOrderLineItemAdmin(ImportExportModelAdmin): |
|  |  |  |
|  |  |  |
|  |  | class PurchaseOrderExtraLineAdmin(GeneralExtraLineAdmin, ImportExportModelAdmin): |
|  |  |  |
|  |  | """Admin class for the PurchaseOrderExtraLine model""" |
|  |  | resource\_class = PurchaseOrderExtraLineResource |
|  |  |  |
|  |  |  |
|  |  | class SalesOrderLineItemAdmin(ImportExportModelAdmin): |
|  |  | """Admin class for the SalesOrderLine model""" |
|  |  |  |
|  |  | resource\_class = SalesOrderLineItemResource |
|  |  |  |
| Expand All | | @@ -236,11 +247,12 @@ class SalesOrderLineItemAdmin(ImportExportModelAdmin): |
|  |  |  |
|  |  |  |
|  |  | class SalesOrderExtraLineAdmin(GeneralExtraLineAdmin, ImportExportModelAdmin): |
|  |  |  |
|  |  | """Admin class for the SalesOrderExtraLine model""" |
|  |  | resource\_class = SalesOrderExtraLineResource |
|  |  |  |
|  |  |  |
|  |  | class SalesOrderShipmentAdmin(ImportExportModelAdmin): |
|  |  | """Admin class for the SalesOrderShipment model""" |
|  |  |  |
|  |  | list\_display = [ |
|  |  | 'order', |
| Expand All | | @@ -258,6 +270,7 @@ class SalesOrderShipmentAdmin(ImportExportModelAdmin): |
|  |  |  |
|  |  |  |
|  |  | class SalesOrderAllocationAdmin(ImportExportModelAdmin): |
|  |  | """Admin class for the SalesOrderAllocation model""" |
|  |  |  |
|  |  | list\_display = ( |
|  |  | 'line', |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `26bf51c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Finventree%2Finventree%2Fcommit%2F26bf51c20a1c9b3130ac5dd2e17649bece5ff84f) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from huntr.dev_5c47dcad_20250114_203304.html ===


* [![logo](/horizontal-logo-wh.svg)](/)
* [Bounties](/bounties)
* [Partners](/partners)
* Community
* Info
[SUBMIT REPORT](/bounties/disclose)

Supported by [Protect AI](https://protectai.com/) and leading the way to [MLSecOps](https://mlsecops.com) and greater AI security.

© 2024

[Privacy Policy](/privacy)[Terms of Service](/terms)[Code of Conduct](/code-of-conduct)Cookie Preferences[Contact Us](/contact-us)
