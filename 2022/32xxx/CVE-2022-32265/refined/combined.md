=== Content from github.com_8a646d40_20250114_181133.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwolkykim%2Fqdecoder%2Freleases%2Ftag%2Fv12.1.0)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwolkykim%2Fqdecoder%2Freleases%2Ftag%2Fv12.1.0)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=wolkykim%2Fqdecoder)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[wolkykim](/wolkykim)
/
**[qdecoder](/wolkykim/qdecoder)**
Public

* [Notifications](/login?return_to=%2Fwolkykim%2Fqdecoder) You must be signed in to change notification settings
* [Fork
  23](/login?return_to=%2Fwolkykim%2Fqdecoder)
* [Star
   43](/login?return_to=%2Fwolkykim%2Fqdecoder)

* [Code](/wolkykim/qdecoder/tree/v12.1.0)
* [Issues
  1](/wolkykim/qdecoder/issues)
* [Pull requests
  0](/wolkykim/qdecoder/pulls)
* [Actions](/wolkykim/qdecoder/actions)
* [Projects
  0](/wolkykim/qdecoder/projects)
* [Security](/wolkykim/qdecoder/security)
* [Insights](/wolkykim/qdecoder/pulse)

Additional navigation options

* [Code](/wolkykim/qdecoder/tree/v12.1.0)
* [Issues](/wolkykim/qdecoder/issues)
* [Pull requests](/wolkykim/qdecoder/pulls)
* [Actions](/wolkykim/qdecoder/actions)
* [Projects](/wolkykim/qdecoder/projects)
* [Security](/wolkykim/qdecoder/security)
* [Insights](/wolkykim/qdecoder/pulse)

1. [Releases](/wolkykim/qdecoder/releases)
2. [v12.1.0](/wolkykim/qdecoder/releases/tag/v12.1.0)

# qDecoder 12.1.0 Release

[Latest](/wolkykim/qdecoder/releases/latest)

[Latest](/wolkykim/qdecoder/releases/latest)

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/wolkykim/qdecoder/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v12.1.0)

 Loading

[View all tags](/wolkykim/qdecoder/tags)

![@wolkykim](https://avatars.githubusercontent.com/u/6858801?s=40&v=4)
[wolkykim](/wolkykim)
released this
02 Jun 04:57

[v12.1.0](/wolkykim/qdecoder/tree/v12.1.0)

[`2083ed4`](/wolkykim/qdecoder/commit/2083ed4a8ea4d0250899ad0f254f71534fd4318b)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

Hello qDecoder users!!!

I'm pleased to announce qDecoder 12.1.0 release.

This is a maintenance release includes important security updates that fixes possible vulnerability in URL decoding (see the report attached below). All the qDecoder users are **recommended to upgrade to this version as soon as possible**.

Best,

Seungyoung Kim

## What's Changed

* Security update: add check on improperly encoded input by [@wolkykim](https://github.com/wolkykim) in [#29](https://github.com/wolkykim/qdecoder/pull/29)
* Fix crash when multipart boundary is missing. by [@MelanieRed](https://github.com/MelanieRed) in [#26](https://github.com/wolkykim/qdecoder/pull/26)
* Add unit test framework and tests by [@wolkykim](https://github.com/wolkykim) in [#29](https://github.com/wolkykim/qdecoder/pull/29)
* Other minor updates and improvements
  + Build compatibility updates for Mac
  + Relocate Windows MinGW build codes under src/compat folder
  + Document updates

**Full Changelog**: [v12.0.8...v12.1.0](https://github.com/wolkykim/qdecoder/compare/v12.0.8...v12.1.0)

## qDecoder Vulnerability Report Details

**Software:** qDecoder

**Software URL:** <https://github.com/wolkykim/qdecoder>

**Version Reviewed:** Latest git revision as of 30/05/2022, commit [e43f6cc](https://github.com/wolkykim/qdecoder/commit/e43f6cc687b8f7ca10a966ffc22ca3f3b2f9e15f)

**Bug Type:** Heap Overflow

**Vector:** Protocol, network request parsing

**Impact:** Remote Code Execution

**Discovery Date:** 17/05/2022

**Discovered By:** Giulio De Pasquale and Jesse Hertz of Apple Information Security

**Summary:**

It is possible to corrupt and control the heap chunks by sending a request ending with the "%" character. QDecoder does not perform a sanity check on the bytes appended after the "%" character, leading to a buffer overflow and possible remote code execution, dependent on the usage of the library.

**Technical Details:**

QDecoder parses potentially untrusted network requests passed through GET and POST requests or HTML Cookies. HTTP clients tend to send the requests encoded with the standard URL encoding, which QDecoder supports.

As part of the parsing process, QDecoder decodes a request's data from its URL encoded form [1]. URL encoded strings use the character "%" to represent the beginning of special two bytes long character sequences.

When QDecoder encounters the escaping character, it attempts to decode the following two bytes, subsequently advancing the buffer pointer forward by two bytes [2]. When the data buffer is fully traversed, the parser will place a null character at the end of the decoded request [3] to signify the end of the request string.

Unfortunately, the parser does not check the buffer's boundaries, causing a corruption if the request URL ends in a "%" character. When no data is present after the escaping character, the buffer pointer would be advanced by two bytes, effectively jumping over the expected boundary. At this point, the loop would keep reading past the request data until it encounters a null byte, leading to a heap overflow. Additionally, the overflow overwrites the original null byte, creating an overlong string that spans more than one heap chunk. The overflow corrupts the heap chunks when the buffer is reused subsequently by QDecoder [4], which would keep reading until the erroneously placed null byte.

**Conclusion and impact:**

An attacker can trigger the overflow by sending a request ending with the "%" character. The vulnerability allows controlling the heap chunks' previous size, bk, and fd pointers [5]. By carefully setting the bk and fd pointers, the chunks could be used to write anywhere in the process memory and, finally, lead to remote code execution.

**Mitigations/Workarounds:**

We propose to add a sanity check for the bytes following the "%" escape character in the `_q_urldecode` function in `internal.c`.

**References:**

```
[1]: https://github.com/wolkykim/qdecoder/blob/8cef3e8040b73cdaff31469f2e6c1a97d0d7c9c7/src/internal.c#L131
[2]: https://github.com/wolkykim/qdecoder/blob/8cef3e8040b73cdaff31469f2e6c1a97d0d7c9c7/src/internal.c#L146
[3]: https://github.com/wolkykim/qdecoder/blob/8cef3e8040b73cdaff31469f2e6c1a97d0d7c9c7/src/internal.c#L155
[4]: https://github.com/wolkykim/qdecoder/blob/8cef3e8040b73cdaff31469f2e6c1a97d0d7c9c7/src/qcgireq.c#L818
[5]: https://sourceware.org/git/?p=glibc.git;a=blob;f=malloc/malloc.c;h=96149549758dd424f5c08bed3b7ed1259d5d5664;hb=bdc3009b8ff0effdbbfb05eb6b10966753cbf9b8#l1060

```

### Contributors

* [![@wolkykim](https://avatars.githubusercontent.com/u/6858801?s=64&v=4)](https://github.com/wolkykim)
* [![@MelanieRed](https://avatars.githubusercontent.com/u/61460253?s=64&v=4)](https://github.com/MelanieRed)

wolkykim and MelanieRed

 Assets
2

 Loading

 👍
1
 laoshaw reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

 1 person reacted

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_c5840631_20250114_181129.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwolkykim%2Fqdecoder%2Fpull%2F29)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwolkykim%2Fqdecoder%2Fpull%2F29)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=wolkykim%2Fqdecoder)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[wolkykim](/wolkykim)
/
**[qdecoder](/wolkykim/qdecoder)**
Public

* [Notifications](/login?return_to=%2Fwolkykim%2Fqdecoder) You must be signed in to change notification settings
* [Fork
  23](/login?return_to=%2Fwolkykim%2Fqdecoder)
* [Star
   43](/login?return_to=%2Fwolkykim%2Fqdecoder)

* [Code](/wolkykim/qdecoder)
* [Issues
  1](/wolkykim/qdecoder/issues)
* [Pull requests
  0](/wolkykim/qdecoder/pulls)
* [Actions](/wolkykim/qdecoder/actions)
* [Projects
  0](/wolkykim/qdecoder/projects)
* [Security](/wolkykim/qdecoder/security)
* [Insights](/wolkykim/qdecoder/pulse)

Additional navigation options

* [Code](/wolkykim/qdecoder)
* [Issues](/wolkykim/qdecoder/issues)
* [Pull requests](/wolkykim/qdecoder/pulls)
* [Actions](/wolkykim/qdecoder/actions)
* [Projects](/wolkykim/qdecoder/projects)
* [Security](/wolkykim/qdecoder/security)
* [Insights](/wolkykim/qdecoder/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fwolkykim%2Fqdecoder%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fwolkykim%2Fqdecoder%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# security update: add check on improperly encoded input #29

 Merged

[wolkykim](/wolkykim)
merged 6 commits into
[master](/wolkykim/qdecoder/tree/master "wolkykim/qdecoder:master")
from
[secfix](/wolkykim/qdecoder/tree/secfix "wolkykim/qdecoder:secfix")

Jun 2, 2022

 Merged

# [security update: add check on improperly encoded input](#top) #29

[wolkykim](/wolkykim)
merged 6 commits into
[master](/wolkykim/qdecoder/tree/master "wolkykim/qdecoder:master")
from
[secfix](/wolkykim/qdecoder/tree/secfix "wolkykim/qdecoder:secfix")

Jun 2, 2022

[Conversation
0](/wolkykim/qdecoder/pull/29)
[Commits
6](/wolkykim/qdecoder/pull/29/commits)
[Checks
0](/wolkykim/qdecoder/pull/29/checks)
[Files changed](/wolkykim/qdecoder/pull/29/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![wolkykim](https://avatars.githubusercontent.com/u/6858801?s=60&v=4)](/wolkykim)

Copy link

Owner

### @wolkykim **[wolkykim](/wolkykim)** commented [Jun 1, 2022](#issue-1254754841) • edited Loading

* improve sanity check on url encoded string input which fixes possible security issue reported recently
* added unit tests for the cases

Details in regard to who found it and reported will be released if they are ok with it in the future release announcement.

Great thanks to whom kindly reported this issue to us.

---[Test Output]---

```
$ make test
gcc -Wall -fPIC -g -I./ -D_GNU_SOURCE -I/usr/include -I/usr/local/include -I../src -c -o test_q_urldecode.o test_q_urldecode.c
gcc -Wall -fPIC -g -I./ -D_GNU_SOURCE -I/usr/include -I/usr/local/include -I../src -c -o qunit.o qunit.c
gcc -Wall -fPIC -g -I./ -D_GNU_SOURCE -I/usr/include -I/usr/local/include -I../src -o test_q_urldecode test_q_urldecode.o qunit.o ../src/libqdecoder.a
Test internal.c/_q_urldecode
======================================================================
* TEST : Test plain strings . OK (1 assertions, 0ms)
* TEST : Test urlencoded strings ... OK (3 assertions, 0ms)
* TEST : Test exceptions ....... OK (7 assertions, 0ms)
======================================================================
PASS - 3/3 tests passed.

======================================================================
****             Good job! All tests are successful               ****
======================================================================
*   ____                 _     All tests have finished successfully. *
*  / ___| ___   ___   __| |     | | ___ | |__   | |                  *
* | |  _ / _ \ / _ \ / _` |  _  | |/ _ \| '_ \  | |                  *
* | |_| | (_) | (_) | (_| | | |_| | (_) | |_) | |_|                  *
*  \____|\___/ \___/ \__,_|  \___/ \___/|_.__/  (_)                  *
======================================================================

```

Sorry, something went wrong.

All reactions

 Steve Kim
added 6 commits
[May 31, 2022 19:40](#commits-pushed-ce7c8a7)

`[security update: add check on improperly encoded input](/wolkykim/qdecoder/pull/29/commits/ce7c8a7ac450a823a11b06508ef1eb7441241f81 "security update: add check on improperly encoded input")`

`[ce7c8a7](/wolkykim/qdecoder/pull/29/commits/ce7c8a7ac450a823a11b06508ef1eb7441241f81)`

`[code style](/wolkykim/qdecoder/pull/29/commits/f9649415f22ed8c36f98f5498575cf3b4101f73c "code style")`

`[f964941](/wolkykim/qdecoder/pull/29/commits/f9649415f22ed8c36f98f5498575cf3b4101f73c)`

`[remove unnecessary -f option on rm command](/wolkykim/qdecoder/pull/29/commits/4c373fac01f476bd9232c24a7b4f954687542e06 "remove unnecessary -f option on rm command")`

`[4c373fa](/wolkykim/qdecoder/pull/29/commits/4c373fac01f476bd9232c24a7b4f954687542e06)`

`[code style update](/wolkykim/qdecoder/pull/29/commits/78a17918d2df09a6135048a289b225bd343b648f "code style update")`

`[78a1791](/wolkykim/qdecoder/pull/29/commits/78a17918d2df09a6135048a289b225bd343b648f)`

`[code style update](/wolkykim/qdecoder/pull/29/commits/68537b6dae03063c6a4fba5a34af5080e777d1f3 "code style update")`

`[68537b6](/wolkykim/qdecoder/pull/29/commits/68537b6dae03063c6a4fba5a34af5080e777d1f3)`

`[update comments](/wolkykim/qdecoder/pull/29/commits/070d6bbb58f4c4fc36919ee810b17daf95383277 "update comments")`

`[070d6bb](/wolkykim/qdecoder/pull/29/commits/070d6bbb58f4c4fc36919ee810b17daf95383277)`

[![@wolkykim](https://avatars.githubusercontent.com/u/6858801?s=40&u=82f9bca618e3a9e2d3652fbd426c2a5f96f07048&v=4)](/wolkykim)
[wolkykim](/wolkykim)
merged commit [`40d8718`](/wolkykim/qdecoder/commit/40d87189e2e33431a515d9327819f5410d7eb5dd)
into
master

[Jun 2, 2022](https://github.com/wolkykim/qdecoder/pull/29#event-6725016930)

 [![@wolkykim](https://avatars.githubusercontent.com/u/6858801?s=40&u=82f9bca618e3a9e2d3652fbd426c2a5f96f07048&v=4)](/wolkykim)
[wolkykim](/wolkykim)
deleted the
secfix

branch
[June 2, 2022 03:18](#event-6725017066)

[![@sei-vsarvepalli](https://avatars.githubusercontent.com/u/19911912?s=40&v=4)](/sei-vsarvepalli)
[sei-vsarvepalli](/sei-vsarvepalli)
mentioned this pull request
[Aug 26, 2022](#ref-issue-1352610939)

[get a CVE for fixed security vulnerability
#31](/wolkykim/qdecoder/issues/31)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fwolkykim%2Fqdecoder%2Fpull%2F29)

Reviewers

No reviews

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

1 participant

[![@wolkykim](https://avatars.githubusercontent.com/u/6858801?s=52&v=4)](/wolkykim)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_d3bcbdaa_20250114_181132.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwolkykim%2Fqdecoder%2Fpull%2F29%2Fcommits%2Fce7c8a7ac450a823a11b06508ef1eb7441241f81)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwolkykim%2Fqdecoder%2Fpull%2F29%2Fcommits%2Fce7c8a7ac450a823a11b06508ef1eb7441241f81)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fpull_requests%2Fshow%2Fcommits&source=header-repo&source_repo=wolkykim%2Fqdecoder)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[wolkykim](/wolkykim)
/
**[qdecoder](/wolkykim/qdecoder)**
Public

* [Notifications](/login?return_to=%2Fwolkykim%2Fqdecoder) You must be signed in to change notification settings
* [Fork
  23](/login?return_to=%2Fwolkykim%2Fqdecoder)
* [Star
   43](/login?return_to=%2Fwolkykim%2Fqdecoder)

* [Code](/wolkykim/qdecoder)
* [Issues
  1](/wolkykim/qdecoder/issues)
* [Pull requests
  0](/wolkykim/qdecoder/pulls)
* [Actions](/wolkykim/qdecoder/actions)
* [Projects
  0](/wolkykim/qdecoder/projects)
* [Security](/wolkykim/qdecoder/security)
* [Insights](/wolkykim/qdecoder/pulse)

Additional navigation options

* [Code](/wolkykim/qdecoder)
* [Issues](/wolkykim/qdecoder/issues)
* [Pull requests](/wolkykim/qdecoder/pulls)
* [Actions](/wolkykim/qdecoder/actions)
* [Projects](/wolkykim/qdecoder/projects)
* [Security](/wolkykim/qdecoder/security)
* [Insights](/wolkykim/qdecoder/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fwolkykim%2Fqdecoder%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fwolkykim%2Fqdecoder%2Fissues%2Fnew%2Fchoose)
to your account

# security update: add check on improperly encoded input #29

 Merged

[wolkykim](/wolkykim)
merged 6 commits into
[master](/wolkykim/qdecoder/tree/master "wolkykim/qdecoder:master")
from
[secfix](/wolkykim/qdecoder/tree/secfix "wolkykim/qdecoder:secfix")

Jun 2, 2022

[Conversation
0](/wolkykim/qdecoder/pull/29)
[Commits
6](/wolkykim/qdecoder/pull/29/commits)
[Checks
0](/wolkykim/qdecoder/pull/29/checks)
[Files changed](/wolkykim/qdecoder/pull/29/files)

 Merged

# [security update: add check on improperly encoded input](#top) #29

 Show file tree

 Hide file tree

Changes from **1 commit**

Commits

[Show all changes

6 commits](/wolkykim/qdecoder/pull/29/files)
Select commit
Hold shift + click to select a range

[`ce7c8a7`
security update: add check on improperly encoded input

Jun 1, 2022](/wolkykim/qdecoder/pull/29/commits/ce7c8a7ac450a823a11b06508ef1eb7441241f81)
[`f964941`
code style

Jun 1, 2022](/wolkykim/qdecoder/pull/29/commits/f9649415f22ed8c36f98f5498575cf3b4101f73c)
[`4c373fa`
remove unnecessary -f option on rm command

Jun 1, 2022](/wolkykim/qdecoder/pull/29/commits/4c373fac01f476bd9232c24a7b4f954687542e06)
[`78a1791`
code style update

Jun 1, 2022](/wolkykim/qdecoder/pull/29/commits/78a17918d2df09a6135048a289b225bd343b648f)
[`68537b6`
code style update

Jun 1, 2022](/wolkykim/qdecoder/pull/29/commits/68537b6dae03063c6a4fba5a34af5080e777d1f3)
[`070d6bb`
update comments

Jun 1, 2022](/wolkykim/qdecoder/pull/29/commits/070d6bbb58f4c4fc36919ee810b17daf95383277)

**File filter**

### Filter by extension

Filter by extension

.ac
(1)

.c
(3)

.h
(1)

.in
(2)

.md
(1)

.sh
(1)

No extension
(1)

All 7 file types selected

---

Viewed files

[Clear filters](/wolkykim/qdecoder/pull/29/commits/ce7c8a7ac450a823a11b06508ef1eb7441241f81)

 **Conversations**

Failed to load comments.  Retry

 Loading

 **Jump to**

Jump to file

Failed to load files.  Retry

 Loading

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

Show whitespace

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

* Makefile.in
  [Makefile.in](#diff-b48650cabc0f502b52865f525765f2d688198f06e0ffb5456c76fabab7f2bfb2)
* configure
  [configure](#diff-90d08e583c4c9c6f391b2ae90f819f600a6326928ea9512c9e0c6d98e9f29ac2)
* configure.ac
  [configure.ac](#diff-49473dca262eeab3b4a43002adb08b4db31020d190caaad1594b47f1d5daa810)
* src

  + src/internal.c
    [internal.c](#diff-1c4e2f5adfa1ad30618e78ff459b2c0758ecf34278459ad0a8d58db4fec622ea)
* tests

  + tests/Makefile.in
    [Makefile.in](#diff-64e440652669c4af0d6b599e9812e10d6984d8baa15b3a53e36b613a6dff0dee)
  + tests/README.md
    [README.md](#diff-dacac2ebf9792f0d23c0f922a744486ded01901957d5281290925acd89cf83ac)
  + tests/launcher.sh
    [launcher.sh](#diff-7d324180d573da911800d6f07d705a0bb51eb467db0d54c35b6be4e1c8545649)
  + tests/qunit.c
    [qunit.c](#diff-b72df6c8d71e64e4d1d524ce34282a80b24e563bfa065ca6f1fbad5fc372c067)
  + tests/qunit.h
    [qunit.h](#diff-b7b8b0a687103457d86e0edde2ef9a838317e25207047d2678c7a9393989ed32)
  + tests/test\_q\_urldecode.c
    [test\_q\_urldecode.c](#diff-39eaab005975f45acb71a32e4f23f3c4d8e89ce16881ff05cb11b3cc2fbb3108)

Prev

 [Next](/wolkykim/qdecoder/pull/29/commits/f9649415f22ed8c36f98f5498575cf3b4101f73c)Next commit

security update: add check on improperly encoded input

* Loading branch information

Steve Kim
committed
Jun 1, 2022

commit ce7c8a7ac450a823a11b06508ef1eb7441241f81

## There are no files selected for viewing

4 changes: 2 additions & 2 deletions

4
[Makefile.in](#diff-b48650cabc0f502b52865f525765f2d688198f06e0ffb5456c76fabab7f2bfb2 "Makefile.in")

Show comments

[View file](/wolkykim/qdecoder/blob/ce7c8a7ac450a823a11b06508ef1eb7441241f81/Makefile.in)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -50,9 +50,9 @@ clean: |
|  |  | done |
|  |  |  |
|  |  | distclean: clean |
|  |  | @for DIR in src examples; do \ |
|  |  | @for DIR in src examples tests; do \ |
|  |  | echo "===> $${DIR}"; \ |
|  |  | (cd $${DIR}; make clean; ${RM} -f Makefile); \ |
|  |  | (cd $${DIR}; make clean; ${RM} Makefile); \ |
|  |  | echo "<=== $${DIR}"; \ |
|  |  | done |
|  |  | ${RM} -rf autom4te.cache |
| Expand Down | |  |

3 changes: 2 additions & 1 deletion

3
[configure](#diff-90d08e583c4c9c6f391b2ae90f819f600a6326928ea9512c9e0c6d98e9f29ac2 "configure")

Show comments

[View file](/wolkykim/qdecoder/blob/ce7c8a7ac450a823a11b06508ef1eb7441241f81/configure)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2065,7 +2065,7 @@ ac\_compiler\_gnu=$ac\_cv\_c\_compiler\_gnu |
|  |  |  |
|  |  | ac\_config\_headers="$ac\_config\_headers config.h" |
|  |  |  |
|  |  | ac\_config\_files="$ac\_config\_files Makefile src/qdecoder.pc src/Makefile examples/Makefile" |
|  |  | ac\_config\_files="$ac\_config\_files Makefile src/qdecoder.pc src/Makefile examples/Makefile tests/Makefile" |
|  |  |  |
|  |  |  |
|  |  | ## Set path |
| Expand Down  Expand Up | | @@ -5006,6 +5006,7 @@ do |
|  |  | "src/qdecoder.pc") CONFIG\_FILES="$CONFIG\_FILES src/qdecoder.pc" ;; |
|  |  | "src/Makefile") CONFIG\_FILES="$CONFIG\_FILES src/Makefile" ;; |
|  |  | "examples/Makefile") CONFIG\_FILES="$CONFIG\_FILES examples/Makefile" ;; |
|  |  | "tests/Makefile") CONFIG\_FILES="$CONFIG\_FILES tests/Makefile" ;; |
|  |  |  |
|  |  | \*) as\_fn\_error $? "invalid argument: \`$ac\_config\_target'" "$LINENO" 5;; |
|  |  | esac |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[configure.ac](#diff-49473dca262eeab3b4a43002adb08b4db31020d190caaad1594b47f1d5daa810 "configure.ac")

Show comments

[View file](/wolkykim/qdecoder/blob/ce7c8a7ac450a823a11b06508ef1eb7441241f81/configure.ac)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -77,7 +77,7 @@ AC\_DEFUN([Q\_ARG\_DISABLE], [ |
|  |  | AC\_INIT([qDecoder], [12 RELEASE], [http://www.qdecoder.org/]) |
|  |  | AC\_CONFIG\_SRCDIR([config.h.in]) |
|  |  | AC\_CONFIG\_HEADER([config.h]) |
|  |  | AC\_CONFIG\_FILES([Makefile src/qdecoder.pc src/Makefile examples/Makefile]) |
|  |  | AC\_CONFIG\_FILES([Makefile src/qdecoder.pc src/Makefile examples/Makefile tests/Makefile]) |
|  |  |  |
|  |  | ## Set path |
|  |  | PATH="$PATH:/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin" |
| Expand Down | |  |

12 changes: 9 additions & 3 deletions

12
[src/internal.c](#diff-1c4e2f5adfa1ad30618e78ff459b2c0758ecf34278459ad0a8d58db4fec622ea "src/internal.c")

Show comments

[View file](/wolkykim/qdecoder/blob/ce7c8a7ac450a823a11b06508ef1eb7441241f81/src/internal.c)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -34,6 +34,7 @@ |
|  |  | #include <stdlib.h> |
|  |  | #include <stdbool.h> |
|  |  | #include <stdarg.h> |
|  |  | #include <ctype.h> |
|  |  | #include <string.h> |
|  |  | #include <unistd.h> |
|  |  | #include <libgen.h> |
| Expand All | | @@ -49,7 +50,7 @@ |
|  |  | #include "compat/msw\_missing.h" |
|  |  | #endif |
|  |  |  |
|  |  | // Change two hex character to one hex value. |
|  |  | // Change two hex characters to one hex value. |
|  |  | char \_q\_x2c(char hex\_up, char hex\_low) |
|  |  | { |
|  |  | char digit; |
| Expand Down  Expand Up | | @@ -140,8 +141,13 @@ size\_t \_q\_urldecode(char \*str) |
|  |  | break; |
|  |  | } |
|  |  | case '%': { |
|  |  | \*pBinPt++ = \_q\_x2c(\*(pEncPt + 1), \*(pEncPt + 2)); |
|  |  | pEncPt += 2; |
|  |  | if (\*(pEncPt + 1) != '\0' && isxdigit(\*(pEncPt + 1)) \ |
|  |  | && \*(pEncPt + 2) != '\0' && isxdigit(\*(pEncPt + 2))) { |
|  |  | \*pBinPt++ = \_q\_x2c(\*(pEncPt + 1), \*(pEncPt + 2)); |
|  |  | pEncPt += 2; |
|  |  | } else { |
|  |  | \*pBinPt++ = \*pEncPt; |
|  |  | } |
|  |  | break; |
|  |  | } |
|  |  | default: { |
| Expand Down | |  |

62 changes: 62 additions & 0 deletions

62
[tests/Makefile.in](#diff-64e440652669c4af0d6b599e9812e10d6984d8baa15b3a53e36b613a6dff0dee "tests/Makefile.in")

Show comments

[View file](/wolkykim/qdecoder/blob/ce7c8a7ac450a823a11b06508ef1eb7441241f81/tests/Makefile.in)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,62 @@ |
|  |  | ################################################################################ |
|  |  | ## qDecoder - http://www.qdecoder.org |
|  |  | ## |
|  |  | ## Copyright (c) 2000-2022 Seungyoung Kim. |
|  |  | ## All rights reserved. |
|  |  | ## |
|  |  | ## Redistribution and use in source and binary forms, with or without |
|  |  | ## modification, are permitted provided that the following conditions are met: |
|  |  | ## |
|  |  | ## 1. Redistributions of source code must retain the above copyright notice, |
|  |  | ## this list of conditions and the following disclaimer. |
|  |  | ## 2. Redistributions in binary form must reproduce the above copyright notice, |
|  |  | ## this list of conditions and the following disclaimer in the documentation |
|  |  | ## and/or other materials provided with the distribution. |
|  |  | ## |
|  |  | ## THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" |
|  |  | ## AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE |
|  |  | ## IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE |
|  |  | ## ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE |
|  |  | ## LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR |
|  |  | ## CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF |
|  |  | ## SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS |
|  |  | ## INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN |
|  |  | ## CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) |
|  |  | ## ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE |
|  |  | ## POSSIBILITY OF SUCH DAMAGE. |
|  |  | ################################################################################ |
|  |  |  |
|  |  | prefix = @prefix@ |
|  |  | exec\_prefix = @exec\_prefix@ |
|  |  |  |
|  |  | ## qDecoder definitions |
|  |  | QDECODER\_INCDIR = ../src |
|  |  | QDECODER\_LIBDIR = ../src |
|  |  |  |
|  |  | ## Compiler options |
|  |  | CC = @CC@ |
|  |  | CFLAGS = @CFLAGS@ |
|  |  | CPPFLAGS = @CPPFLAGS@ -I${QDECODER\_INCDIR} |
|  |  |  |
|  |  | TARGETS = \ |
|  |  | test\_q\_urldecode |
|  |  | QUNIT\_OBJ = qunit.o |
|  |  | LIBQDECODER = ${QDECODER\_LIBDIR}/libqdecoder.a |
|  |  |  |
|  |  | ## Main |
|  |  | all: ${TARGETS} |
|  |  |  |
|  |  | run: test |
|  |  | test: all |
|  |  | @./launcher.sh ${TARGETS} |
|  |  |  |
|  |  | test\_q\_urldecode: test\_q\_urldecode.o ${QUNIT\_OBJ} |
|  |  | ${CC} ${CFLAGS} ${CPPFLAGS} -o $@ test\_q\_urldecode.o ${QUNIT\_OBJ} ${LIBQDECODER} |
|  |  |  |
|  |  | ## Clear Module |
|  |  | clean: |
|  |  | ${RM} -f \*.o ${TARGETS} |
|  |  |  |
|  |  | ## Compile Module |
|  |  | .c.o: |
|  |  | ${CC} ${CFLAGS} ${CPPFLAGS} -c -o $@ $< |

37 changes: 37 additions & 0 deletions

37
[tests/README.md](#diff-dacac2ebf9792f0d23c0f922a744486ded01901957d5281290925acd89cf83ac "tests/README.md")

Show comments

[View file](/wolkykim/qdecoder/blob/ce7c8a7ac450a823a11b06508ef1eb7441241f81/tests/README.md)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,37 @@ |
|  |  | qDecoder Unit Tests |
|  |  | =================== |
|  |  |  |
|  |  | # How to run unit tests. |
|  |  |  |
|  |  | ``` |
|  |  | $ make test |
|  |  | Test internal.c/\_q\_urldecode |
|  |  | ====================================================================== |
|  |  | \* TEST : Test plain string . OK (1 assertions, 0ms) |
|  |  | \* TEST : Test urlencoded string . OK (1 assertions, 0ms) |
|  |  | \* TEST : Test urlencoded string exceptions .. OK (2 assertions, 0ms) |
|  |  | ====================================================================== |
|  |  | PASS - 3/3 tests passed. |
|  |  | ``` |
|  |  |  |
|  |  | # How to write unit tests |
|  |  |  |
|  |  | We need your help in writing unit tests. Please refer qunit.h for your reference. |
|  |  |  |
|  |  | ```C |
|  |  | #include "qunit.h" |
|  |  | #include "qdecoder.h" |
|  |  |  |
|  |  | QUNIT\_START("Test title"); |
|  |  |  |
|  |  | TEST("Test name1") { |
|  |  | ASSERT\_EQUAL\_STR("abc", "abc"); |
|  |  | ASSERT\_EQUAL\_INT(8, 8); |
|  |  | } |
|  |  |  |
|  |  | TEST("Test name2") { |
|  |  | ASSERT\_EQUAL\_PT(NULL == NULL); |
|  |  | } |
|  |  |  |
|  |  | QUNIT\_END(); |
|  |  | ``` |

37 changes: 37 additions & 0 deletions

37
[tests/launcher.sh](#diff-7d324180d573da911800d6f07d705a0bb51eb467db0d54c35b6be4e1c8545649 "tests/launcher.sh")

Show comments

[View file](/wolkykim/qdecoder/blob/ce7c8a7ac450a823a11b06508ef1eb7441241f81/tests/launcher.sh)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,37 @@ |
|  |  | #!/bin/sh |
|  |  |  |
|  |  | if [ $# = 0 ]; then |
|  |  | echo "This program is called by make. Please use \"make test\" command instead." |
|  |  | exit 1 |
|  |  | fi |
|  |  |  |
|  |  | FAIL=0 |
|  |  | FAILDESC="" |
|  |  | for EXECUTABLE in $\*; do |
|  |  | ./$EXECUTABLE |
|  |  | if [ $? != 0 ]; then |
|  |  | FAIL=1 |
|  |  | FAILDESC="$FAILDESC $EXECUTABLE" |
|  |  | fi |
|  |  | echo "" |
|  |  | done |
|  |  |  |
|  |  | if [ $FAIL != 0 ]; then |
|  |  | echo "======================================================================" |
|  |  | echo "\*\*\*\* OOOOOPS!!! UNSUCESSFUL UNIT TEST FOUND. PLEASE FIX AND RERUN \*\*\*\*" |
|  |  | echo "======================================================================" |
|  |  | echo "Fails in =>$FAILDESC" |
|  |  | exit 1 |
|  |  | fi |
|  |  |  |
|  |  | echo "======================================================================" |
|  |  | echo "\*\*\*\* Good job! All tests are successful \*\*\*\*" |
|  |  | echo "======================================================================" |
|  |  | echo "\* \_\_\_\_ \_ All tests have finished successfully. \*" |
|  |  | echo "\* / \_\_\_| \_\_\_ \_\_\_ \_\_| | | | \_\_\_ | |\_\_ | | \*" |
|  |  | echo "\* | | \_ / \_ \ / \_ \ / \_\` | \_ | |/ \_ \| '\_ \ | | \*" |
|  |  | echo "\* | |\_| | (\_) | (\_) | (\_| | | |\_| | (\_) | |\_) | |\_| \*" |
|  |  | echo "\* \\_\_\_\_|\\_\_\_/ \\_\_\_/ \\_\_,\_| \\_\_\_/ \\_\_\_/|\_.\_\_/ (\_) \*" |
|  |  | echo "======================================================================" |
|  |  | echo "Tested: $\*" |
|  |  | exit 0 |

42 changes: 42 additions & 0 deletions

42
[tests/qunit.c](#diff-b72df6c8d71e64e4d1d524ce34282a80b24e563bfa065ca6f1fbad5fc372c067 "tests/qunit.c")

Show comments

[View file](/wolkykim/qdecoder/blob/ce7c8a7ac450a823a11b06508ef1eb7441241f81/tests/qunit.c)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,42 @@ |
|  |  | /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* |
|  |  | \* qunit - C Unit Test Framework |
|  |  | \* |
|  |  | \* Copyright (c) 2014-2022 Seungyoung Kim. |
|  |  | \* All rights reserved. |
|  |  | \* |
|  |  | \* Redistribution and use in source and binary forms, with or without |
|  |  | \* modification, are permitted provided that the following conditions are met: |
|  |  | \* |
|  |  | \* 1. Redistributions of source code must retain the above copyright notice, |
|  |  | \* this list of conditions and the following disclaimer. |
|  |  | \* 2. Redistributions in binary form must reproduce the above copyright notice, |
|  |  | \* this list of conditions and the following disclaimer in the documentation |
|  |  | \* and/or other materials provided with the distribution. |
|  |  | \* |
|  |  | \* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" |
|  |  | \* AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE |
|  |  | \* IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE |
|  |  | \* ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE |
|  |  | \* LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR |
|  |  | \* CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF |
|  |  | \* SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS |
|  |  | \* INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN |
|  |  | \* CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) |
|  |  | \* ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE |
|  |  | \* POSSIBILITY OF SUCH DAMAGE. |
|  |  | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ |
|  |  |  |
|  |  | #include <stdio.h> |
|  |  | #include <sys/time.h> |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Returns the current time in milliseconds. |
|  |  | \* |
|  |  | \* @return current time in milliseconds. |
|  |  | \*/ |
|  |  | long \_qunit\_current\_milli(void) { |
|  |  | struct timeval tv; |
|  |  | gettimeofday(&tv, NULL); |
|  |  | long time = (tv.tv\_sec \* 1000) + (tv.tv\_usec / 1000); |
|  |  | return time; |
|  |  | } |

127 changes: 127 additions & 0 deletions

127
[tests/qunit.h](#diff-b7b8b0a687103457d86e0edde2ef9a838317e25207047d2678c7a9393989ed32 "tests/qunit.h")

Show comments

[View file](/wolkykim/qdecoder/blob/ce7c8a7ac450a823a11b06508ef1eb7441241f81/tests/qunit.h)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,127 @@ |
|  |  | /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* |
|  |  | \* qunit - C Unit Test Framework |
|  |  | \* |
|  |  | \* Copyright (c) 2014-2022 Seungyoung Kim. |
|  |  | \* All rights reserved. |
|  |  | \* |
|  |  | \* Redistribution and use in source and binary forms, with or without |
|  |  | \* modification, are permitted provided that the following conditions are met: |
|  |  | \* |
|  |  | \* 1. Redistributions of source code must retain the above copyright notice, |
|  |  | \* this list of conditions and the following disclaimer. |
|  |  | \* 2. Redistributions in binary form must reproduce the above copyright notice, |
|  |  | \* this list of conditions and the following disclaimer in the documentation |
|  |  | \* and/or other materials provided with the distribution. |
|  |  | \* |
|  |  | \* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" |
|  |  | \* AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE |
|  |  | \* IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE |
|  |  | \* ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE |
|  |  | \* LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR |
|  |  | \* CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF |
|  |  | \* SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS |
|  |  | \* INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN |
|  |  | \* CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) |
|  |  | \* ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE |
|  |  | \* POSSIBILITY OF SUCH DAMAGE. |
|  |  | \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/ |
|  |  |  |
|  |  | /\*\* |
|  |  | \* qunit C Unit Test Framework. |
|  |  | \* |
|  |  | \* @file qunit.h |
|  |  | \*/ |
|  |  |  |
|  |  | #ifndef QUNIT\_H |
|  |  | #define QUNIT\_H |
|  |  |  |
|  |  | #include <stdio.h> |
|  |  | #include <stdlib.h> |
|  |  | #include <string.h> |
|  |  | #include <stdbool.h> |
|  |  | #include <sys/time.h> |
|  |  |  |
|  |  | #ifdef \_\_cplusplus |
|  |  | extern "C" { |
|  |  | #endif |
|  |  |  |
|  |  | extern long \_qunit\_current\_milli(void); |
|  |  |  |
|  |  | #define OUTSTREAM (stdout) |
|  |  | #define PRINT(fmt, args...) do { \ |
|  |  | fprintf(OUTSTREAM, "" fmt, ##args); \ |
|  |  | } while(0) |
|  |  | #define PRINTLN(fmt, args...) do { \ |
|  |  | fprintf(OUTSTREAM, "" fmt "\n", ##args); \ |
|  |  | } while(0) |
|  |  |  |
|  |  | #define QUNIT\_START(title) \ |
|  |  | char \*\_q\_title = title; \ |
|  |  | int \_q\_tot\_tests = 0; \ |
|  |  | int \_q\_tot\_failed = 0; \ |
|  |  | int \_q\_this\_failed = 0; \ |
|  |  | int \_q\_errcnt = 0; \ |
|  |  | int \_q\_assert\_cnt = 0; /\* number of assert test in a test \*/ \ |
|  |  | int \_q\_assert\_dot\_cnt = 0; /\* number of dots printed out in a test. \*/ \ |
|  |  | long \_q\_timer; \ |
|  |  | int main(int argc, char \*\*argv) { \ |
|  |  | PRINTLN("%s", \_q\_title); \ |
|  |  | PRINTLN("======================================================================"); \ |
|  |  |  |
|  |  | #define QUNIT\_END() \ |
|  |  | \_TEST\_RESULT(); \ |
|  |  | PRINTLN("======================================================================"); \ |
|  |  | PRINTLN("%s - %d/%d tests passed.", \ |
|  |  | ((\_q\_tot\_failed == 0) ? "PASS" : "FAIL"), \ |
|  |  | (\_q\_tot\_tests - \_q\_tot\_failed), \_q\_tot\_tests); \ |
|  |  | return \_q\_tot\_failed; \ |
|  |  | } |
|  |  |  |
|  |  | #define TEST(name) \ |
|  |  | \_TEST\_RESULT(); \ |
|  |  | \_q\_tot\_tests++; \ |
|  |  | \_q\_assert\_cnt = 0; \ |
|  |  | \_q\_assert\_dot\_cnt = 0; \ |
|  |  | PRINT("\* TEST : %s ", name); \ |
|  |  | TIMER\_START(\_q\_timer); |
|  |  |  |
|  |  | #define \_TEST\_RESULT() \ |
|  |  | TIMER\_STOP(\_q\_timer); \ |
|  |  | if (\_q\_tot\_tests ) PRINTLN(" %s (%d assertions, %ldms)", \ |
|  |  | (\_q\_this\_failed) ? "FAIL" : "OK", \_q\_assert\_cnt, \_q\_timer); \ |
|  |  | \_q\_tot\_failed += (\_q\_this\_failed) ? 1 : 0; \ |
|  |  | \_q\_this\_failed = 0; |
|  |  |  |
|  |  | #define ASSERT(expr) \ |
|  |  | \_q\_assert\_cnt++; \ |
|  |  | if (! (expr)) { \ |
|  |  | \_q\_this\_failed++; \ |
|  |  | PRINTLN("\nAssertion '%s' failed (%s:%d)", #expr, \_\_FILE\_\_, \_\_LINE\_\_); \ |
|  |  | } else if (\_q\_assert\_dot\_cnt < 30) { \ |
|  |  | PRINT("."); \ |
|  |  | \_q\_assert\_dot\_cnt++; \ |
|  |  | } |
|  |  |  |
|  |  | #define ASSERT\_EQUAL\_STR(s1, s2) ASSERT(!strcmp(s1, s2)) |
|  |  | #define ASSERT\_EQUAL\_INT(d1, d2) ASSERT(d1 == d2) |
|  |  | #define ASSERT\_EQUAL\_BOOL(d1, d2) ASSERT(d1 == d2) |
|  |  | #define ASSERT\_EQUAL\_PT(p1, p2) ASSERT(p1 == p2) |
|  |  | #define ASSERT\_EQUAL\_MEM(p1, p2, n) ASSERT(!memcmp(p1, p2, n)) |
|  |  | #define ASSERT\_NULL(p) ASSERT(NULL == p) |
|  |  | #define ASSERT\_NOT\_NULL(p) ASSERT(NULL != p) |
|  |  | #define ASSERT\_TRUE(b) ASSERT(b) |
|  |  | #define ASSERT\_FALSE(b) ASSERT(!(b)) |
|  |  |  |
|  |  | #define TIMER\_START(x) do { \ |
|  |  | x = \_qunit\_current\_milli(); \ |
|  |  | } while(0) |
|  |  |  |
|  |  | #define TIMER\_STOP(x) do { \ |
|  |  | x = \_qunit\_current\_milli() - x; \ |
|  |  | } while(0) |
|  |  |  |
|  |  | #ifdef \_\_cplusplus |
|  |  | } |
|  |  | #endif |
|  |  |  |
|  |  | #endif /\* QUNIT\_H \*/ |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


