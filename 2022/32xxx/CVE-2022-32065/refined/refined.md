Based on the provided content, here's the breakdown of the vulnerability:

**Vulnerability:** Stored Cross-Site Scripting (XSS)

**Root Cause:** The application allows uploading of HTML files as user avatars without properly validating the file type or sanitizing the content, leading to stored XSS.

**Weaknesses/Vulnerabilities:**
*   **Inadequate File Type Validation:** The system does not restrict the file types that can be uploaded as avatars. This allows an attacker to upload a malicious HTML file disguised as an image file.
*   **Lack of Content Sanitization:** The application does not sanitize the content of uploaded HTML files, allowing an attacker to inject arbitrary JavaScript code that will be executed by other users.
*   **Mime Type Spoofing:** The attacker can upload a malicious HTML file with a `Content-Type: image/png` header, tricking the server into accepting the malicious file as if it was a valid image file.

**Impact of Exploitation:**
*   **Stored XSS:** The attacker can inject malicious JavaScript code into the system, which is then stored and executed in the browsers of other users when they view the profile containing the malicious avatar.
*   **Arbitrary Code Execution:** The injected JavaScript code can perform various malicious actions, including:
    *   Stealing cookies or session tokens.
    *   Redirecting users to malicious websites.
    *   Performing actions on behalf of the user, potentially escalating privileges.
    *   Defacing the application interface.

**Attack Vectors:**
*   **File Upload:** The attacker exploits the avatar upload functionality within the user profile settings.
*   **Multipart/form-data Request:** The attacker crafts a multipart/form-data HTTP request to upload the malicious HTML file, using a tool like Burp Suite to intercept and modify the request.
*   **HTML File disguised as Image:** The attacker uploads an HTML file with a `.html` extension, while setting the `Content-Type` header to `image/png` to bypass basic file type checks.

**Required Attacker Capabilities/Position:**
*   **Authenticated User:** The attacker must have a valid user account on the RuoYi CMS system.
*   **User Management Rights (for broader impact):** If the attacker has user management permissions, the attacker can inject the malicious code which can then be triggered by other users accessing the user management page.
*   **Network Access:** The attacker needs to have network access to the RuoYi application server to upload the malicious HTML file through a web request.
*   **Burp Suite or similar Tool (optional):** While not strictly required, a tool like Burp Suite helps in intercepting and modifying the upload request and file content.

**Additional Details from Content:**
*   The vulnerability was found in RuoYi CMS version 4.7.3.
*   The vulnerability was discovered on 2022-05-16 by user "solarpeng502".
*   A proof-of-concept (POC) HTTP request is provided which demonstrates how to upload the malicious HTML file.
*   The vulnerability has been fixed by the developers, which included:
    *   Verifying the file suffix and not allowing HTML files upload.
    *   Checking the content in HTML files to filter XSS payloads.

The provided content gives more technical detail and a full attack vector compared to a typical CVE description.