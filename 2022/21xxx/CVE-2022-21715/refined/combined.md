=== Content from github.com_523df455_20250115_090915.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcodeigniter4%2FCodeIgniter4%2Fcommit%2F70d881cf5322b7c32e69516aebd2273ac6a1e8dd)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcodeigniter4%2FCodeIgniter4%2Fcommit%2F70d881cf5322b7c32e69516aebd2273ac6a1e8dd)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=codeigniter4%2FCodeIgniter4)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[codeigniter4](/codeigniter4)
/
**[CodeIgniter4](/codeigniter4/CodeIgniter4)**
Public

* [Notifications](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4) You must be signed in to change notification settings
* [Fork
  1.9k](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4)
* [Star
   5.5k](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4)

* [Code](/codeigniter4/CodeIgniter4)
* [Issues
  72](/codeigniter4/CodeIgniter4/issues)
* [Pull requests
  13](/codeigniter4/CodeIgniter4/pulls)
* [Actions](/codeigniter4/CodeIgniter4/actions)
* [Projects
  0](/codeigniter4/CodeIgniter4/projects)
* [Security](/codeigniter4/CodeIgniter4/security)
* [Insights](/codeigniter4/CodeIgniter4/pulse)

Additional navigation options

* [Code](/codeigniter4/CodeIgniter4)
* [Issues](/codeigniter4/CodeIgniter4/issues)
* [Pull requests](/codeigniter4/CodeIgniter4/pulls)
* [Actions](/codeigniter4/CodeIgniter4/actions)
* [Projects](/codeigniter4/CodeIgniter4/projects)
* [Security](/codeigniter4/CodeIgniter4/security)
* [Insights](/codeigniter4/CodeIgniter4/pulse)

## Commit

[Permalink](/codeigniter4/CodeIgniter4/commit/70d881cf5322b7c32e69516aebd2273ac6a1e8dd)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-7528-7jg5-6g62](https://github.com/advisories/GHSA-7528-7jg5-6g62 "GHSA-7528-7jg5-6g62")

[Browse files](/codeigniter4/CodeIgniter4/tree/70d881cf5322b7c32e69516aebd2273ac6a1e8dd)
Browse the repository at this point in the history

```
Hotfix 4.1.8
```

* Loading branch information

[![@MGatner](https://avatars.githubusercontent.com/u/17572847?s=40&v=4)](/MGatner)

[MGatner](/codeigniter4/CodeIgniter4/commits?author=MGatner "View all commits by MGatner")
authored
Jan 24, 2022

2 parents
[99e0797](/codeigniter4/CodeIgniter4/commit/99e0797d0aac396733e5ed6999a6afd71708adcd)
+
[2dd3968](/codeigniter4/CodeIgniter4/commit/2dd39684d6538ab1485e30b7259137649f408ba5)

commit 70d881c

 Show file tree

 Hide file tree

Showing
**10 changed files**
with
**154 additions**
and
**79 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* CHANGELOG.md
  [CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
* admin/framework

  + admin/framework/composer.json
    [composer.json](#diff-3e672bbcd4a0770a91591fe6b94544fa266585b899bd74a1f6429038350ae2d5)
* system

  + API

    - system/API/ResponseTrait.php
      [ResponseTrait.php](#diff-16ec0120116e86c25dfa8e44907b692794ef4d32589fcf2d55f8958aa5430aa7)
  + system/CodeIgniter.php
    [CodeIgniter.php](#diff-d913ae68414ad947e24e588e6ee68d68194142a8aae52e61e0aab2cc7f120e0c)
* tests/system

  + API

    - tests/system/API/ResponseTraitTest.php
      [ResponseTraitTest.php](#diff-bb2931864a3b0e4b6d1910265793b972f104dbe065456bace87cef9c3f83e295)
  + RESTful

    - tests/system/RESTful/ResourceControllerTest.php
      [ResourceControllerTest.php](#diff-e9a48e83727d8c99ca5ac0e6561976be2941f5dfdff83ddbcb9989ffb65254a6)
* user\_guide\_src/source

  + changelogs

    - user\_guide\_src/source/changelogs/index.rst
      [index.rst](#diff-381d2d09886543d18722e3aebb52071b41458d4659cc490ef63cb793d568b7e8)
    - user\_guide\_src/source/changelogs/v4.1.8.rst
      [v4.1.8.rst](#diff-d4927a9636d028f19b049440928a5d4a420e118352721e03a3d3aa0ff2299ce4)
  + user\_guide\_src/source/conf.py
    [conf.py](#diff-1d42eb797d6467fc2f375c9d9083d4c75d3e6fb8cf34644aa20897401dffea83)
  + installation

    - user\_guide\_src/source/installation/upgrade\_418.rst
      [upgrade\_418.rst](#diff-2f5bf468fc94568c180b8fbadc0500806ca5a427278162206f19a113d9c7729c)

## There are no files selected for viewing

8 changes: 8 additions & 0 deletions

8
[CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed "CHANGELOG.md")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/70d881cf5322b7c32e69516aebd2273ac6a1e8dd/CHANGELOG.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -1,5 +1,13 @@ |
|  |  | # Changelog |
|  |  |  |
|  |  | ## [v4.1.8](https://github.com/codeigniter4/CodeIgniter4/tree/v4.1.8) (2022-01-24) |
|  |  |  |
|  |  | [Full Changelog](https://github.com/codeigniter4/CodeIgniter4/compare/v4.1.7...v4.1.8) |
|  |  |  |
|  |  | \*\*SECURITY\*\* |
|  |  |  |
|  |  | \* \*XSS Vulnerability\* in the `API\ResponseTrait` was fixed. See the [Security advisory](https://github.com/codeigniter4/CodeIgniter4/security/advisories/GHSA-7528-7jg5-6g62) for more information. |
|  |  |  |
|  |  | ## [v4.1.7](https://github.com/codeigniter4/CodeIgniter4/tree/v4.1.7) (2022-01-09) |
|  |  |  |
|  |  | [Full Changelog](https://github.com/codeigniter4/CodeIgniter4/compare/v4.1.6...v4.1.7) |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[admin/framework/composer.json](#diff-3e672bbcd4a0770a91591fe6b94544fa266585b899bd74a1f6429038350ae2d5 "admin/framework/composer.json")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/70d881cf5322b7c32e69516aebd2273ac6a1e8dd/admin/framework/composer.json)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -10,7 +10,7 @@ |
|  |  | "ext-intl": "\*", |
|  |  | "ext-json": "\*", |
|  |  | "ext-mbstring": "\*", |
|  |  | "kint-php/kint": "^3.3", |
|  |  | "kint-php/kint": "^4.0", |
|  |  | "laminas/laminas-escaper": "^2.9", |
|  |  | "psr/log": "^1.1" |
|  |  | }, |
| Expand Down | |  |

60 changes: 30 additions & 30 deletions

60
[system/API/ResponseTrait.php](#diff-16ec0120116e86c25dfa8e44907b692794ef4d32589fcf2d55f8958aa5430aa7 "system/API/ResponseTrait.php")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/70d881cf5322b7c32e69516aebd2273ac6a1e8dd/system/API/ResponseTrait.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -85,9 +85,9 @@ trait ResponseTrait |
|  |  | \* |
|  |  | \* @param array|string|null $data |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function respond($data = null, ?int $status = null, string $message = '') |
|  |  | protected function respond($data = null, ?int $status = null, string $message = '') |
|  |  | { |
|  |  | if ($data === null && $status === null) { |
|  |  | $status = 404; |
| Expand Down  Expand Up | | @@ -119,9 +119,9 @@ public function respond($data = null, ?int $status = null, string $message = '') |
|  |  | \* @param int $status HTTP status code |
|  |  | \* @param string|null $code Custom, API-specific, error code |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function fail($messages, int $status = 400, ?string $code = null, string $customMessage = '') |
|  |  | protected function fail($messages, int $status = 400, ?string $code = null, string $customMessage = '') |
|  |  | { |
|  |  | if (! is\_array($messages)) { |
|  |  | $messages = ['error' => $messages]; |
| Expand All | | @@ -145,9 +145,9 @@ public function fail($messages, int $status = 400, ?string $code = null, string |
|  |  | \* |
|  |  | \* @param mixed $data |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function respondCreated($data = null, string $message = '') |
|  |  | protected function respondCreated($data = null, string $message = '') |
|  |  | { |
|  |  | return $this->respond($data, $this->codes['created'], $message); |
|  |  | } |
| Expand All | | @@ -157,9 +157,9 @@ public function respondCreated($data = null, string $message = '') |
|  |  | \* |
|  |  | \* @param mixed $data |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function respondDeleted($data = null, string $message = '') |
|  |  | protected function respondDeleted($data = null, string $message = '') |
|  |  | { |
|  |  | return $this->respond($data, $this->codes['deleted'], $message); |
|  |  | } |
| Expand All | | @@ -169,9 +169,9 @@ public function respondDeleted($data = null, string $message = '') |
|  |  | \* |
|  |  | \* @param mixed $data |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function respondUpdated($data = null, string $message = '') |
|  |  | protected function respondUpdated($data = null, string $message = '') |
|  |  | { |
|  |  | return $this->respond($data, $this->codes['updated'], $message); |
|  |  | } |
| Expand All | | @@ -180,9 +180,9 @@ public function respondUpdated($data = null, string $message = '') |
|  |  | \* Used after a command has been successfully executed but there is no |
|  |  | \* meaningful reply to send back to the client. |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function respondNoContent(string $message = 'No Content') |
|  |  | protected function respondNoContent(string $message = 'No Content') |
|  |  | { |
|  |  | return $this->respond(null, $this->codes['no\_content'], $message); |
|  |  | } |
| Expand All | | @@ -192,9 +192,9 @@ public function respondNoContent(string $message = 'No Content') |
|  |  | \* or had bad authorization credentials. User is encouraged to try again |
|  |  | \* with the proper information. |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function failUnauthorized(string $description = 'Unauthorized', ?string $code = null, string $message = '') |
|  |  | protected function failUnauthorized(string $description = 'Unauthorized', ?string $code = null, string $message = '') |
|  |  | { |
|  |  | return $this->fail($description, $this->codes['unauthorized'], $code, $message); |
|  |  | } |
| Expand All | | @@ -203,31 +203,31 @@ public function failUnauthorized(string $description = 'Unauthorized', ?string $ |
|  |  | \* Used when access is always denied to this resource and no amount |
|  |  | \* of trying again will help. |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function failForbidden(string $description = 'Forbidden', ?string $code = null, string $message = '') |
|  |  | protected function failForbidden(string $description = 'Forbidden', ?string $code = null, string $message = '') |
|  |  | { |
|  |  | return $this->fail($description, $this->codes['forbidden'], $code, $message); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Used when a specified resource cannot be found. |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function failNotFound(string $description = 'Not Found', ?string $code = null, string $message = '') |
|  |  | protected function failNotFound(string $description = 'Not Found', ?string $code = null, string $message = '') |
|  |  | { |
|  |  | return $this->fail($description, $this->codes['resource\_not\_found'], $code, $message); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Used when the data provided by the client cannot be validated. |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \* |
|  |  | \* @deprecated Use failValidationErrors instead |
|  |  | \*/ |
|  |  | public function failValidationError(string $description = 'Bad Request', ?string $code = null, string $message = '') |
|  |  | protected function failValidationError(string $description = 'Bad Request', ?string $code = null, string $message = '') |
|  |  | { |
|  |  | return $this->fail($description, $this->codes['invalid\_data'], $code, $message); |
|  |  | } |
| Expand All | | @@ -237,19 +237,19 @@ public function failValidationError(string $description = 'Bad Request', ?string |
|  |  | \* |
|  |  | \* @param string|string[] $errors |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function failValidationErrors($errors, ?string $code = null, string $message = '') |
|  |  | protected function failValidationErrors($errors, ?string $code = null, string $message = '') |
|  |  | { |
|  |  | return $this->fail($errors, $this->codes['invalid\_data'], $code, $message); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Use when trying to create a new resource and it already exists. |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function failResourceExists(string $description = 'Conflict', ?string $code = null, string $message = '') |
|  |  | protected function failResourceExists(string $description = 'Conflict', ?string $code = null, string $message = '') |
|  |  | { |
|  |  | return $this->fail($description, $this->codes['resource\_exists'], $code, $message); |
|  |  | } |
| Expand All | | @@ -259,19 +259,19 @@ public function failResourceExists(string $description = 'Conflict', ?string $co |
|  |  | \* Not Found, because here we know the data previously existed, but is now gone, |
|  |  | \* where Not Found means we simply cannot find any information about it. |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function failResourceGone(string $description = 'Gone', ?string $code = null, string $message = '') |
|  |  | protected function failResourceGone(string $description = 'Gone', ?string $code = null, string $message = '') |
|  |  | { |
|  |  | return $this->fail($description, $this->codes['resource\_gone'], $code, $message); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Used when the user has made too many requests for the resource recently. |
|  |  | \* |
|  |  | \* @return mixed |
|  |  | \* @return Response |
|  |  | \*/ |
|  |  | public function failTooManyRequests(string $description = 'Too Many Requests', ?string $code = null, string $message = '') |
|  |  | protected function failTooManyRequests(string $description = 'Too Many Requests', ?string $code = null, string $message = '') |
|  |  | { |
|  |  | return $this->fail($description, $this->codes['too\_many\_requests'], $code, $message); |
|  |  | } |
| Expand All | | @@ -285,7 +285,7 @@ public function failTooManyRequests(string $description = 'Too Many Requests', ? |
|  |  | \* |
|  |  | \* @return Response The value of the Response's send() method. |
|  |  | \*/ |
|  |  | public function failServerError(string $description = 'Internal Server Error', ?string $code = null, string $message = ''): Response |
|  |  | protected function failServerError(string $description = 'Internal Server Error', ?string $code = null, string $message = ''): Response |
|  |  | { |
|  |  | return $this->fail($description, $this->codes['server\_error'], $code, $message); |
|  |  | } |
| Expand Down  Expand Up | | @@ -346,7 +346,7 @@ protected function format($data = null) |
|  |  | \* |
|  |  | \* @return $this |
|  |  | \*/ |
|  |  | public function setResponseFormat(?string $format = null) |
|  |  | protected function setResponseFormat(?string $format = null) |
|  |  | { |
|  |  | $this->format = strtolower($format); |
|  |  |  |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[system/CodeIgniter.php](#diff-d913ae68414ad947e24e588e6ee68d68194142a8aae52e61e0aab2cc7f120e0c "system/CodeIgniter.php")

Show comments

[View file](/codeigniter4/CodeIgniter4/blob/70d881cf5322b7c32e69516aebd2273ac6a1e8dd/system/CodeIgniter.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -45,7 +45,7 @@ class CodeIgniter |
|  |  | /\*\* |
|  |  | \* The current version of CodeIgniter Framework |
|  |  | \*/ |
|  |  | public const CI\_VERSION = '4.1.7'; |
|  |  | public const CI\_VERSION = '4.1.8'; |
|  |  |  |
|  |  | private const MIN\_PHP\_VERSION = '7.3'; |
|  |  |  |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `70d881c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcodeigniter4%2FCodeIgniter4%2Fcommit%2F70d881cf5322b7c32e69516aebd2273ac6a1e8dd) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_1b37fdb1_20250115_090916.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcodeigniter4%2FCodeIgniter4%2Fsecurity%2Fadvisories%2FGHSA-7528-7jg5-6g62)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcodeigniter4%2FCodeIgniter4%2Fsecurity%2Fadvisories%2FGHSA-7528-7jg5-6g62)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=codeigniter4%2FCodeIgniter4)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[codeigniter4](/codeigniter4)
/
**[CodeIgniter4](/codeigniter4/CodeIgniter4)**
Public

* [Notifications](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4) You must be signed in to change notification settings
* [Fork
  1.9k](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4)
* [Star
   5.5k](/login?return_to=%2Fcodeigniter4%2FCodeIgniter4)

* [Code](/codeigniter4/CodeIgniter4)
* [Issues
  72](/codeigniter4/CodeIgniter4/issues)
* [Pull requests
  13](/codeigniter4/CodeIgniter4/pulls)
* [Actions](/codeigniter4/CodeIgniter4/actions)
* [Projects
  0](/codeigniter4/CodeIgniter4/projects)
* [Security](/codeigniter4/CodeIgniter4/security)
* [Insights](/codeigniter4/CodeIgniter4/pulse)

Additional navigation options

* [Code](/codeigniter4/CodeIgniter4)
* [Issues](/codeigniter4/CodeIgniter4/issues)
* [Pull requests](/codeigniter4/CodeIgniter4/pulls)
* [Actions](/codeigniter4/CodeIgniter4/actions)
* [Projects](/codeigniter4/CodeIgniter4/projects)
* [Security](/codeigniter4/CodeIgniter4/security)
* [Insights](/codeigniter4/CodeIgniter4/pulse)

# XSS Vulnerability in API\ResponseTrait in CodeIgniter4

Moderate

[MGatner](/MGatner)
published
GHSA-7528-7jg5-6g62
Jan 24, 2022

## Package

composer

codeigniter4/framework
([Composer](/advisories?query=ecosystem%3Acomposer))

## Affected versions

< 4.1.8

## Patched versions

4.1.8

## Description

### Impact

Cross-Site Scripting (XSS) vulnerability was found in `API\ResponseTrait` in Codeigniter4.

Attackers can do XSS attacks if you are using `API\ResponseTrait`.

### Patches

Upgrade to v4.1.8 or later.

### Workarounds

Do one of the following:

1. Do not use `API\ResponseTrait` nor `ResourceController`
2. Disable Auto Route and [Use Defined Routes Only](https://codeigniter4.github.io/userguide/incoming/routing.html#use-defined-routes-only)

### References

* [Cross Site Scripting (XSS) Software Attack | OWASP Foundation](https://owasp.org/www-community/attacks/xss/)

### For more information

If you have any questions or comments about this advisory:

* Open an issue in [codeigniter4/CodeIgniter4](https://github.com/codeigniter4/CodeIgniter4/issues)
* Email us at [SECURITY.md](https://github.com/codeigniter4/CodeIgniter4/blob/develop/SECURITY.md)

### Severity

Moderate

5.4

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
Required

Scope
Unchanged

Confidentiality
Low

Integrity
Low

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:L/I:L/A:N

### CVE ID

CVE-2022-21715

### Weaknesses

[CWE-79](/advisories?query=cwe%3A79)

### Credits

* [![@kenjis](https://avatars.githubusercontent.com/u/87955?s=40&v=4)](/kenjis)
  [kenjis](/kenjis)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from codeigniter4.github.io_f1bda442_20250115_090912.html ===

[![Logo](../_static/ci-logo-text.svg)](../index.html)

* [Welcome to CodeIgniter4](../intro/index.html)
  + [Welcome to CodeIgniter4](../intro/index.html)
  + [Server Requirements](../intro/requirements.html)
  + [Credits](../intro/credits.html)
  + [PSR Compliance](../intro/psr.html)
  + [License Agreement](../license.html)

* [Installation](../installation/index.html)
  + [Composer Installation](../installation/installing_composer.html)
  + [Manual Installation](../installation/installing_manual.html)
  + [Running Your App](../installation/running.html)
  + [Troubleshooting](../installation/troubleshooting.html)
  + [Deployment](../installation/deployment.html)
  + [Change Logs](../changelogs/index.html)
  + [Upgrading From a Previous Version](../installation/upgrading.html)
  + [CodeIgniter Repositories](../installation/repositories.html)

* [Build Your First Application](../tutorial/index.html)
  + [Static Pages](../tutorial/static_pages.html)
  + [News Section](../tutorial/news_section.html)
  + [Create News Items](../tutorial/create_news_items.html)
  + [Conclusion](../tutorial/conclusion.html)

* [CodeIgniter4 Overview](../concepts/index.html)
  + [Application Structure](../concepts/structure.html)
  + [Models, Views, and Controllers](../concepts/mvc.html)
  + [Autoloading Files](../concepts/autoloader.html)
  + [Services](../concepts/services.html)
  + [Factories](../concepts/factories.html)
  + [Working with HTTP Requests](../concepts/http.html)
  + [Security Guidelines](../concepts/security.html)
  + [Design and Architectural Goals](../concepts/goals.html)

* [General Topics](../general/index.html)
  + [Configuration](../general/configuration.html)
  + [CodeIgniter URLs](../general/urls.html)
  + [Helper Functions](../general/helpers.html)
  + [Global Functions and Constants](../general/common_functions.html)
  + [Logging Information](../general/logging.html)
  + [Error Handling](../general/errors.html)
  + [Web Page Caching](../general/caching.html)
  + [AJAX Requests](../general/ajax.html)
  + [Code Modules](../general/modules.html)
  + [Managing your Applications](../general/managing_apps.html)
  + [Handling Multiple Environments](../general/environments.html)

* [Controllers and Routing](index.html)
  + URI Routing
  + [Controllers](controllers.html)
  + [Controller Filters](filters.html)
  + [HTTP Messages](message.html)
  + [Request Class](request.html)
  + [IncomingRequest Class](incomingrequest.html)
  + [Content Negotiation](content_negotiation.html)
  + [HTTP Method Spoofing](methodspoofing.html)
  + [RESTful Resource Handling](restful.html)

* [Building Responses](../outgoing/index.html)
  + [Views](../outgoing/views.html)
  + [View Renderer](../outgoing/view_renderer.html)
  + [View Layouts](../outgoing/view_layouts.html)
  + [View Cells](../outgoing/view_cells.html)
  + [View Parser](../outgoing/view_parser.html)
  + [View Decorators](../outgoing/view_decorators.html)
  + [HTML Table Class](../outgoing/table.html)
  + [HTTP Responses](../outgoing/response.html)
  + [API Response Trait](../outgoing/api_responses.html)
  + [Content Security Policy](../outgoing/csp.html)
  + [Localization](../outgoing/localization.html)
  + [Alternate PHP Syntax for View Files](../outgoing/alternative_php.html)

* [Working with Databases](../database/index.html)
  + [Quick Start: Usage Examples](../database/examples.html)
  + [Database Configuration](../database/configuration.html)
  + [Connecting to a Database](../database/connecting.html)
  + [Running Queries](../database/queries.html)
  + [Generating Query Results](../database/results.html)
  + [Query Helper Methods](../database/helpers.html)
  + [Query Builder Class](../database/query_builder.html)
  + [Transactions](../database/transactions.html)
  + [Getting Metadata](../database/metadata.html)
  + [Custom Function Calls](../database/call_function.html)
  + [Database Events](../database/events.html)
  + [Database Utilities](../database/utilities.html)

* [Modeling Data](../models/index.html)
  + [Using CodeIgniter's Model](../models/model.html)
  + [Using Entity Classes](../models/entities.html)

* [Managing Databases](../dbmgmt/index.html)
  + [Database Forge](../dbmgmt/forge.html)
  + [Database Migrations](../dbmgmt/migration.html)
  + [Database Seeding](../dbmgmt/seeds.html)
  + [Database Commands](../dbmgmt/db_commands.html)

* [Library Reference](../libraries/index.html)
  + [Caching Driver](../libraries/caching.html)
  + [Cookies](../libraries/cookies.html)
  + [Cross-Origin Resource Sharing (CORS)](../libraries/cors.html)
  + [CURLRequest Class](../libraries/curlrequest.html)
  + [Email Class](../libraries/email.html)
  + [Encryption Service](../libraries/encryption.html)
  + [Working with Files](../libraries/files.html)
  + [File Collections](../libraries/file_collections.html)
  + [Honeypot Class](../libraries/honeypot.html)
  + [Image Manipulation Class](../libraries/images.html)
  + [Pagination](../libraries/pagination.html)
  + [Publisher](../libraries/publisher.html)
  + [Security](../libraries/security.html)
  + [Session Library](../libraries/sessions.html)
  + [Throttler](../libraries/throttler.html)
  + [Times and Dates](../libraries/time.html)
  + [Typography](../libraries/typography.html)
  + [Working with Uploaded Files](../libraries/uploaded_files.html)
  + [Working with URIs](../libraries/uri.html)
  + [User Agent Class](../libraries/user_agent.html)
  + [Validation](../libraries/validation.html)

* [Helpers](../helpers/index.html)
  + [Array Helper](../helpers/array_helper.html)
  + [Cookie Helper](../helpers/cookie_helper.html)
  + [Date Helper](../helpers/date_helper.html)
  + [Filesystem Helper](../helpers/filesystem_helper.html)
  + [Form Helper](../helpers/form_helper.html)
  + [HTML Helper](../helpers/html_helper.html)
  + [Inflector Helper](../helpers/inflector_helper.html)
  + [Number Helper](../helpers/number_helper.html)
  + [Security Helper](../helpers/security_helper.html)
  + [Test Helper](../helpers/test_helper.html)
  + [Text Helper](../helpers/text_helper.html)
  + [URL Helper](../helpers/url_helper.html)
  + [XML Helper](../helpers/xml_helper.html)

* [Testing](../testing/index.html)
  + [Getting Started](../testing/overview.html)
  + [Database](../testing/database.html)
  + [Generating Data](../testing/fabricator.html)
  + [Controller Testing](../testing/controllers.html)
  + [HTTP Testing](../testing/feature.html)
  + [Testing Responses](../testing/response.html)
  + [Testing CLI Commands](../testing/cli.html)
  + [Mocking](../testing/mocking.html)
  + [Benchmarking](../testing/benchmark.html)
  + [Debugging Your Application](../testing/debugging.html)

* [Command Line Usage](../cli/index.html)
  + [CLI Overview](../cli/cli_overview.html)
  + [Running Controllers via CLI](../cli/cli_controllers.html)
  + [Spark Commands](../cli/spark_commands.html)
  + [Creating Spark Commands](../cli/cli_commands.html)
  + [CLI Generators](../cli/cli_generators.html)
  + [CLI Library](../cli/cli_library.html)
  + [CLIRequest Class](../cli/cli_request.html)

* [Extending CodeIgniter](../extending/index.html)
  + [Creating Core System Classes](../extending/core_classes.html)
  + [Replacing Common Functions](../extending/common.html)
  + [Events](../extending/events.html)
  + [Extending the Controller](../extending/basecontroller.html)
  + [Authentication](../extending/authentication.html)
  + [Creating Composer Packages](../extending/composer_packages.html)
  + [Contributing to CodeIgniter](../extending/contributing.html)

* [Official Packages](../libraries/official_packages.html)

[CodeIgniter](../index.html)

* [Controllers and Routing](index.html)
* URI Routing

---

# URI Routing[](#uri-routing "Permalink to this heading")

* [What is URI Routing?](#what-is-uri-routing)
* [Setting Routing Rules](#setting-routing-rules)

  + [Examples](#examples)
  + [HTTP verb Routes](#http-verb-routes)
  + [Specifying Route Handlers](#specifying-route-handlers)

    - [Controller’s Namespace](#controller-s-namespace)
    - [Array Callable Syntax](#array-callable-syntax)
    - [Using Closures](#using-closures)
  + [Specifying Route Paths](#specifying-route-paths)

    - [Placeholders](#placeholders)
    - [Custom Placeholders](#custom-placeholders)
    - [Regular Expressions](#regular-expressions)
  + [View Routes](#view-routes)
  + [Redirecting Routes](#redirecting-routes)
  + [Environment Restrictions](#environment-restrictions)
  + [Routes with any HTTP verbs](#routes-with-any-http-verbs)
  + [Mapping Multiple Routes](#mapping-multiple-routes)
  + [Command-Line Only Routes](#command-line-only-routes)
* [Global Options](#global-options)

  + [Applying Filters](#applying-filters)

    - [Alias Filter](#alias-filter)
    - [Classname Filter](#classname-filter)
    - [Multiple Filters](#multiple-filters)
  + [Assigning Namespace](#assigning-namespace)
  + [Limit to Hostname](#limit-to-hostname)
  + [Limit to Subdomains](#limit-to-subdomains)
  + [Offsetting the Matched Parameters](#offsetting-the-matched-parameters)
* [Reverse Routing](#reverse-routing)
* [Named Routes](#named-routes)
* [Grouping Routes](#grouping-routes)

  + [Setting Namespace](#setting-namespace)
  + [Setting Filters](#setting-filters)
  + [Setting Other Options](#setting-other-options)
  + [Nesting Groups](#nesting-groups)
* [Route Priority](#route-priority)

  + [Changing Route Priority](#changing-route-priority)
* [Routes Configuration Options](#routes-configuration-options)

  + [Default Namespace](#default-namespace)
  + [Default Method](#default-method)
  + [Translate URI Dashes](#translate-uri-dashes)
  + [Use Defined Routes Only](#use-defined-routes-only)
  + [404 Override](#override)
  + [Route Processing by Priority](#route-processing-by-priority)
  + [Multiple URI Segments as One Parameter](#multiple-uri-segments-as-one-parameter)
* [Auto Routing (Improved)](#auto-routing-improved)

  + [Enable Auto Routing](#enable-auto-routing)
  + [URI Segments](#uri-segments)
  + [Configuration Options](#configuration-options)

    - [Default Controller](#default-controller)
    - [Default Method](#routing-auto-routing-improved-default-method)
  + [Module Routing](#module-routing)
* [Auto Routing (Legacy)](#auto-routing-legacy)

  + [Enable Auto Routing (Legacy)](#enable-auto-routing-legacy)
  + [URI Segments (Legacy)](#uri-segments-legacy)
  + [Configuration Options (Legacy)](#configuration-options-legacy)

    - [Default Controller (Legacy)](#default-controller-legacy)
    - [Default Method (Legacy)](#default-method-legacy)
* [Confirming Routes](#confirming-routes)

  + [spark routes](#spark-routes)

    - [Auto Routing (Improved)](#id15)
    - [Auto Routing (Legacy)](#id16)
    - [Sort by Handler](#sort-by-handler)
    - [Specify Host](#specify-host)
* [Getting Routing Information](#getting-routing-information)

  + [Retrieving the Current Controller/Method Names](#retrieving-the-current-controller-method-names)
  + [Getting Active Filters for the Current Route](#getting-active-filters-for-the-current-route)

## [What is URI Routing?](#id17)[](#what-is-uri-routing "Permalink to this heading")

URI Routing associates a URI with a controller’s method.

CodeIgniter has two kinds of routing. One is **Defined Route Routing**, and the other is **Auto Routing**.
With Defined Route Routing, you can define routes manually. It allows flexible URL.
Auto Routing automatically routes HTTP requests based on conventions and execute the corresponding controller methods. There is no need to define routes manually.

First, let’s look at Defined Route Routing. If you want to use Auto Routing, see [Auto Routing (Improved)](#auto-routing-improved).

## [Setting Routing Rules](#id18)[](#setting-routing-rules "Permalink to this heading")

Routing rules are defined in the **app/Config/Routes.php** file. In it you’ll see that
it creates an instance of the RouteCollection class (`$routes`) that permits you to specify your own routing criteria.
Routes can be specified using placeholders or Regular Expressions.

When you specify a route, you choose a method to corresponding to HTTP verbs (request method).
If you expect a GET request, you use the `get()` method:

```
<?php

$routes->get('/', 'Home::index');

```

A route takes the **Route Path** (URI path relative to the BaseURL. `/`) on the left,
and maps it to the **Route Handler** (controller and method `Home::index`) on the right,
along with any parameters that should be passed to the controller.

The controller and method should
be listed in the same way that you would use a static method, by separating the class
and its method with a double-colon, like `Users::list`.

If that method requires parameters to be
passed to it, then they would be listed after the method name, separated by forward-slashes:

```
<?php

// Calls $Users->list()
$routes->get('users', 'Users::list');

// Calls $Users->list(1, 23)
$routes->get('users/1/23', 'Users::list/1/23');

```

### [Examples](#id19)[](#examples "Permalink to this heading")

Here are a few basic routing examples.

A URL containing the word **journals** in the first segment will be mapped to the `\App\Controllers\Blogs` class,
and the [default method](#routing-default-method), which is usually `index()`:

```
<?php

$routes->get('journals', 'Blogs');

```

A URL containing the segments **blog/joe** will be mapped to the `\App\Controllers\Blogs` class and the `users()` method.
The ID will be set to `34`:

```
<?php

$routes->get('blog/joe', 'Blogs::users/34');

```

A URL with **product** as the first segment, and anything in the second will be mapped to the `\App\Controllers\Catalog` class
and the `productLookup()` method:

```
<?php

$routes->get('product/(:segment)', 'Catalog::productLookup');

```

A URL with **product** as the first segment, and a number in the second will be mapped to the `\App\Controllers\Catalog` class
and the `productLookupByID()` method passing in the match as a variable to the method:

```
<?php

$routes->get('product/(:num)', 'Catalog::productLookupByID/$1');

```

### [HTTP verb Routes](#id20)[](#http-verb-routes "Permalink to this heading")

You can use any standard HTTP verb (GET, POST, PUT, DELETE, OPTIONS, etc):

```
<?php

$routes->post('products', 'Product::feature');
$routes->put('products/1', 'Product::feature');
$routes->delete('products/1', 'Product::feature');

```

You can supply multiple verbs that a route should match by passing them in as an array to the `match()` method:

```
<?php

$routes->match(['GET', 'PUT'], 'products', 'Product::feature');

```

### [Specifying Route Handlers](#id21)[](#specifying-route-handlers "Permalink to this heading")

#### [Controller’s Namespace](#id22)[](#controller-s-namespace "Permalink to this heading")

When you specify a controller and method name as a string, if a controller is
written without a leading `\`, the [Default Namespace](#routing-default-namespace) will be
prepended:

```
<?php

// Routes to \App\Controllers\Api\Users::update()
$routes->post('api/users', 'Api\Users::update');

```

If you put `\` at the beginning, it is treated as a fully qualified class name:

```
<?php

// Routes to \Acme\Blog\Controllers\Home::list()
$routes->get('blog', '\Acme\Blog\Controllers\Home::list');

```

You can also specify the namespace with the `namespace` option:

```
<?php

// Routes to \Admin\Users::index()
$routes->get('admin/users', 'Users::index', ['namespace' => 'Admin']);

```

See [Assigning Namespace](#assigning-namespace) for details.

#### [Array Callable Syntax](#id23)[](#array-callable-syntax "Permalink to this heading")

New in version 4.2.0.

Since v4.2.0, you can use array callable syntax to specify the controller:

```
$routes->get('/', [\App\Controllers\Home::class, 'index']);

```

Or using `use` keyword:

```
use App\Controllers\Home;

$routes->get('/', [Home::class, 'index']);

```

If you forget to add `use App\Controllers\Home;`, the controller classname is
interpreted as `\Home`, not `App\Controllers\Home`.

Note

When you use Array Callable Syntax, the classname is always interpreted
as a fully qualified classname. So [Default Namespace](#routing-default-namespace) and
[namespace option](#assigning-namespace) have no effect.

##### Array Callable Syntax and Placeholders[](#array-callable-syntax-and-placeholders "Permalink to this heading")

If there are placeholders, it will automatically set the parameters in the specified order:

```
use App\Controllers\Product;

$routes->get('product/(:num)/(:num)', [Product::class, 'index']);

// The above code is the same as the following:
$routes->get('product/(:num)/(:num)', 'Product::index/$1/$2');

```

But the auto-configured parameters may not be correct if you use regular expressions in routes.
In such a case, you can specify the parameters manually:

```
use App\Controllers\Product;

$routes->get('product/(:num)/(:num)', [[Product::class, 'index'], '$2/$1']);

// The above code is the same as the following:
$routes->get('product/(:num)/(:num)', 'Product::index/$2/$1');

```

#### [Using Closures](#id24)[](#using-closures "Permalink to this heading")

You can use an anonymous function, or Closure, as the destination that a route maps to. This function will be
executed when the user visits that URI. This is handy for quickly executing small tasks, or even just showing
a simple view:

```
<?php

use App\Libraries\RSSFeeder;

$routes->get('feed', static function () {
    $rss = new RSSFeeder();

    return $rss->feed('general');
});

```

### [Specifying Route Paths](#id25)[](#specifying-route-paths "Permalink to this heading")

#### [Placeholders](#id26)[](#placeholders "Permalink to this heading")

A typical route might look something like this:

```
<?php

$routes->get('product/(:num)', 'Catalog::productLookup');

```

In a route, the first parameter contains the URI to be matched, while the second parameter
contains the destination it should be routed to. In the above example, if the literal word
“product” is found in the first segment of the URL path, and a number is found in the second segment,
the `Catalog` class and the `productLookup` method are used instead.

Placeholders are simply strings that represent a Regular Expression pattern. During the routing
process, these placeholders are replaced with the value of the Regular Expression. They are primarily
used for readability.

The following placeholders are available for you to use in your routes:

| Placeholders | Description |
| --- | --- |
| (:any) | will match all characters from that point to the end of the URI. This may include multiple URI segments. |
| (:segment) | will match any character except for a forward slash (`/`) restricting the result to a single segment. |
| (:num) | will match any integer. |
| (:alpha) | will match any string of alphabetic characters |
| (:alphanum) | will match any string of alphabetic characters or integers, or any combination of the two. |
| (:hash) | is the same as `(:segment)`, but can be used to easily see which routes use hashed ids. |

Note

`{locale}` cannot be used as a placeholder or other part of the route, as it is reserved for use
in [localization](../outgoing/localization.html).

##### The Behavior of (:any)[](#the-behavior-of-any "Permalink to this heading")

Note that a single `(:any)` will match multiple segments in the URL if present.

For example the route:

```
<?php

$routes->get('product/(:any)', 'Catalog::productLookup/$1');

```

will match **product/123**, **product/123/456**, **product/123/456/789** and so on.

By default, in the above example, if the `$1` placeholder contains a slash
(`/`), it will still be split into multiple parameters when passed to
`Catalog::productLookup()`.

Note

Since v4.5.0, you can change the behavior with the config option.
See [Multiple URI Segments as One Parameter](#multiple-uri-segments-as-one-parameter) for details.

The implementation in the
Controller should take into account the maximum parameters:

```
<?php

namespace App\Controllers;

class Catalog extends BaseController
{
    public function productLookup($seg1 = false, $seg2 = false, $seg3 = false)
    {
        echo $seg1; // Will be 123 in all examples
        echo $seg2; // false in first, 456 in second and third example
        echo $seg3; // false in first and second, 789 in third
    }
}

```

Or you can use [variable-length argument lists](https://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-list):

```
<?php

namespace App\Controllers;

class Catalog extends BaseController
{
    public function productLookup(...$params)
    {
        echo $params[0] ?? null; // Will be 123 in all examples
        echo $params[1] ?? null; // null in first, 456 in second and third example
        echo $params[2] ?? null; // null in first and second, 789 in third
    }
}

```

Important

Do not put any placeholder after `(:any)`. Because the number of
parameters passed to the controller method may change.

If matching multiple segments is not the intended behavior, `(:segment)` should be used when defining the
routes. With the examples URLs from above:

```
<?php

$routes->get('product/(:segment)', 'Catalog::productLookup/$1');

```

will only match **product/123** and generate 404 errors for other example.

#### [Custom Placeholders](#id27)[](#custom-placeholders "Permalink to this heading")

You can create your own placeholders that can be used in your routes file to fully customize the experience
and readability.

You add new placeholders with the `addPlaceholder()` method. The first parameter is the string to be used as
the placeholder. The second parameter is the Regular Expression pattern it should be replaced with.
This must be called before you add the route:

```
<?php

$routes->addPlaceholder('uuid', '[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}');
$routes->get('users/(:uuid)', 'Users::show/$1');

```

#### [Regular Expressions](#id28)[](#regular-expressions "Permalink to this heading")

If you prefer you can use regular expressions to define your routing rules. Any valid regular expression
is allowed, as are back-references.

Important

Note: If you use back-references you must use the dollar syntax rather than the double backslash syntax.
A typical RegEx route might look something like this:

```
<?php

$routes->get('products/([a-z]+)/(\d+)', 'Products::show/$1/id_$2');

```

In the above example, a URI similar to **products/shirts/123** would instead call the `show()` method
of the `Products` controller class, with the original first and second segment passed as arguments to it.

With regular expressions, you can also catch a segment containing a forward slash (`/`), which would usually
represent the delimiter between multiple segments.

For example, if a user accesses a password protected area of your web application and you wish to be able to
redirect them back to the same page after they log in, you may find this example useful:

```
<?php

$routes->get('login/(.+)', 'Auth::login/$1');

```

By default, in the above example, if the `$1` placeholder contains a slash
(`/`), it will still be split into multiple parameters when passed to
`Auth::login()`.

Note

Since v4.5.0, you can change the behavior with the config option.
See [Multiple URI Segments as One Parameter](#multiple-uri-segments-as-one-parameter) for details.

For those of you who don’t know regular expressions and want to learn more about them,
[regular-expressions.info](https://www.regular-expressions.info/) might be a good starting point.

Note

You can also mix and match placeholders with regular expressions.

### [View Routes](#id29)[](#view-routes "Permalink to this heading")

New in version 4.3.0.

If you just want to render a view out that has no logic associated with it, you can use the `view()` method.
This is always treated as GET request.
This method accepts the name of the view to load as the second parameter.

```
<?php

// Displays the view in /app/Views/pages/about.php
$routes->view('about', 'pages/about');

```

If you use placeholders within your route, you can access them within the view in a special variable, `$segments`.
They are available as an array, indexed in the order they appear in the route.

```
<?php

// Displays the view in /app/Views/map.php
$routes->view('map/(:segment)/(:segment)', 'map');

// Within the view, you can access the segments with
// $segments[0] and $segments[1] respectively.

```

### [Redirecting Routes](#id30)[](#redirecting-routes "Permalink to this heading")

Any site that lives long enough is bound to have pages that move. You can specify routes that should redirect
to other routes with the `addRedirect()` method. The first parameter is the URI pattern for the old route. The
second parameter is either the new URI to redirect to, or the name of a named route. The third parameter is
the HTTP status code that should be sent along with the redirect. The default value is `302` which is a temporary
redirect and is recommended in most cases:

```
<?php

$routes->get('users/profile', 'Users::profile', ['as' => 'profile']);

// Redirect to a named route
$routes->addRedirect('users/about', 'profile');
// Redirect to a URI
$routes->addRedirect('users/about', 'users/profile');

// Redirect with placeholder
$routes->get('post/(:num)/comment/(:num)', 'PostsComments::index', ['as' => 'post.comment']);

// Redirect to a URI
$routes->addRedirect('article/(:num)/(:num)', 'post/$1/comment/$2');
// Redirect to a named route
$routes->addRedirect('article/(:num)/(:num)', 'post.comment');

```

Note

Since v4.2.0, `addRedirect()` can use placeholders.

If a redirect route is matched during a page load, the user will be immediately redirected to the new page before a
controller can be loaded.

### [Environment Restrictions](#id31)[](#environment-restrictions "Permalink to this heading")

You can create a set of routes that will only be viewable in a certain environment. This allows you to create
tools that only the developer can use on their local machines that are not reachable on testing or production servers.
This can be done with the `environment()` method. The first parameter is the name of the environment. Any
routes defined within this closure are only accessible from the given environment:

```
<?php

$routes->environment('development', static function ($routes) {
    $routes->get('builder', 'Tools\Builder::index');
});

```

### [Routes with any HTTP verbs](#id32)[](#routes-with-any-http-verbs "Permalink to this heading")

Important

This method exists only for backward compatibility. Do not use it
in new projects. Even if you are already using it, we recommend that you use
another, more appropriate method.

Warning

While the `add()` method seems to be convenient, it is recommended to always use the HTTP-verb-based
routes, described above, as it is more secure. If you use the [CSRF protection](../libraries/security.html), it does not protect **GET**
requests. If the URI specified in the `add()` method is accessible by the GET method, the CSRF protection
will not work.

It is possible to define a route with any HTTP verbs.
You can use the `add()` method:

```
<?php

$routes->add('products', 'Product::feature');

```

Note

Using the HTTP-verb-based routes will also provide a slight performance increase, since
only routes that match the current request method are stored, resulting in fewer routes to scan through
when trying to find a match.

### [Mapping Multiple Routes](#id33)[](#mapping-multiple-routes "Permalink to this heading")

Important

This method exists only for backward compatibility. Do not use it
in new projects. Even if you are already using it, we recommend that you use
another, more appropriate method.

Warning

The `map()` method is not recommended as well as `add()`
because it calls `add()` internally.

While the `add()` method is simple to use, it is often handier to work with multiple routes at once, using
the `map()` method. Instead of calling the `add()` method for each route that you need to add, you can
define an array of routes and then pass it as the first parameter to the `map()` method:

```
<?php

$multipleRoutes = [
    'product/(:num)'      => 'Catalog::productLookupById',
    'product/(:alphanum)' => 'Catalog::productLookupByName',
];

$routes->map($multipleRoutes);

```

### [Command-Line Only Routes](#id34)[](#command-line-only-routes "Permalink to this heading")

Note

It is recommended to use Spark Commands for CLI scripts instead of calling controllers via CLI.
See the [Creating Spark Commands](../cli/cli_commands.html) page for detailed information.

Any route created by any of the HTTP-verb-based
route methods will also be inaccessible from the CLI, but routes created by the `add()` method will still be
available from the command line.

You can create routes that work only from the command-line, and are inaccessible from the web browser, with the
`cli()` method:

```
<?php

$routes->cli('migrate', 'App\Database::migrate');

```

Warning

If you enable [Auto Routing (Legacy)](#auto-routing-legacy) and place the command file in **app/Controllers**,
anyone could access the command with the help of Auto Routing (Legacy) via HTTP.

## [Global Options](#id35)[](#global-options "Permalink to this heading")

All of the methods for creating a route (`get()`, `post()`, [resource()](restful.html) etc) can take an array of options that
can modify the generated routes, or further restrict them. The `$options` array is always the last parameter:

```
<?php

$routes->add('from', 'to', $options);
$routes->get('from', 'to', $options);
$routes->post('from', 'to', $options);
$routes->put('from', 'to', $options);
$routes->head('from', 'to', $options);
$routes->options('from', 'to', $options);
$routes->delete('from', 'to', $options);
$routes->patch('from', 'to', $options);
$routes->match(['GET', 'PUT'], 'from', 'to', $options);
$routes->resource('photos', $options);
$routes->map($array, $options);
$routes->group('name', $options, static function () {});

```

### [Applying Filters](#id36)[](#applying-filters "Permalink to this heading")

You can alter the behavior of specific routes by supplying filters to run before or after the controller. This is especially handy during authentication or api logging.

The value for the filter can be a string or an array of strings:

* matching the aliases defined in **app/Config/Filters.php**.
* filter classnames

See [Controller Filters](filters.html#filters-aliases) for more information on defining aliases.

Warning

If you set filters to routes in **app/Config/Routes.php**
(not in **app/Config/Filters.php**), it is recommended to disable Auto Routing (Legacy).
When [Auto Routing (Legacy)](#auto-routing-legacy) is enabled, it may be possible that a controller can be accessed
via a different URL than the configured route,
in which case the filter you specified to the route will not be applied.
See [Use Defined Routes Only](#use-defined-routes-only) to disable auto-routing.

#### [Alias Filter](#id37)[](#alias-filter "Permalink to this heading")

You specify an alias [defined in app/Config/Filters.php](filters.html#filters-aliases) for the filter value:

```
<?php

$routes->get('admin', ' AdminController::index', ['filter' => 'admin-auth']);

```

You may also supply arguments to be passed to the alias filter’s `before()` and `after()` methods:

```
<?php

$routes->post('users/delete/(:segment)', 'AdminController::index', ['filter' => 'admin-auth:dual,noreturn']);

```

#### [Classname Filter](#id38)[](#classname-filter "Permalink to this heading")

New in version 4.1.5.

You can specify a filter classname for the filter value:

```
<?php

$routes->get('admin', ' AdminController::index', ['filter' => \App\Filters\SomeFilter::class]);

```

#### [Multiple Filters](#id39)[](#multiple-filters "Permalink to this heading")

New in version 4.1.5.

Important

Since v4.5.0, *Multiple Filters* are always enabled.
Prior to v4.5.0, *Multiple Filters* were disabled by default.
If you want to use with prior to v4.5.0, See
[Upgrading from 4.1.4 to 4.1.5](../installation/upgrade_415.html#upgrade-415-multiple-filters-for-a-route)
for the details.

You can specify an array for the filter value:

```
<?php

$routes->get('admin', ' AdminController::index', ['filter' => ['admin-auth', \App\Filters\SomeFilter::class]]);

```

##### Filter Arguments[](#filter-arguments "Permalink to this heading")

Additional arguments may be passed to a filter:

```
<?php

$routes->add('users/delete/(:segment)', 'AdminController::index', ['filter' => 'admin-auth:dual,noreturn']);

```

In this example, the array `['dual', 'noreturn']` will be passed in `$arguments`
to the filter’s `before()` and `after()` implementation methods.

### [Assigning Namespace](#id40)[](#assigning-namespace "Permalink to this heading")

While a [Default Namespace](#routing-default-namespace) will be prepended to the generated controllers, you can also specify
a different namespace to be used in any options array, with the `namespace` option. The value should be the
namespace you want modified:

```
<?php

// Routes to \Admin\Users::index()
$routes->get('admin/users', 'Users::index', ['namespace' => 'Admin']);

```

The new namespace is only applied during that call for any methods that create a single route, like get, post, etc.
For any methods that create multiple routes, the new namespace is attached to all routes generated by that function
or, in the case of `group()`, all routes generated while in the closure.

### [Limit to Hostname](#id41)[](#limit-to-hostname "Permalink to this heading")

You can restrict groups of routes to function only in certain domain or sub-domains of your application
by passing the “hostname” option along with the desired domain to allow it on as part of the options array:

```
<?php

$routes->get('from', 'to', ['hostname' => 'accounts.example.com']);

```

This example would only allow the specified hosts to work if the domain exactly matched **accounts.example.com**.
It would not work under the main site at **example.com**.

### [Limit to Subdomains](#id42)[](#limit-to-subdomains "Permalink to this heading")

When the `subdomain` option is present, the system will restrict the routes to only be available on that
sub-domain. The route will only be matched if the subdomain is the one the application is being viewed through:

```
<?php

// Limit to media.example.com
$routes->get('from', 'to', ['subdomain' => 'media']);

```

You can restrict it to any subdomain by setting the value to an asterisk, (`*`). If you are viewing from a URL
that does not have any subdomain present, this will not be matched:

```
<?php

// Limit to any sub-domain
$routes->get('from', 'to', ['subdomain' => '*']);

```

Important

The system is not perfect and should be tested for your specific domain before being used in production.
Most domains should work fine but some edge case ones, especially with a period in the domain itself (not used
to separate suffixes or www) can potentially lead to false positives.

### [Offsetting the Matched Parameters](#id43)[](#offsetting-the-matched-parameters "Permalink to this heading")

You can offset the matched parameters in your route by any numeric value with the `offset` option, with the
value being the number of segments to offset.

This can be beneficial when developing APIs with the first URI segment being the version number. It can also
be used when the first parameter is a language string:

```
<?php

$routes->get('users/(:num)', 'users/show/$1', ['offset' => 1]);

// Creates:
$routes['users/(:num)'] = 'users/show/$2';

```

## [Reverse Routing](#id44)[](#reverse-routing "Permalink to this heading")

Reverse routing allows you to define the controller and method, as well as any parameters, that a link should go
to, and have the router lookup the current route to it. This allows route definitions to change without you having
to update your application code. This is typically used within views to create links.

For example, if you have a route to a photo gallery that you want to link to, you can use the [`url_to()`](../helpers/url_helper.html#url_to "url_to") helper
function to get the route that should be used. The first parameter is the fully qualified Controller and method,
separated by a double colon (`::`), much like you would use when writing the initial route itself. Any parameters that
should be passed to the route are passed in next:

```
<?php

// The route is defined as:
$routes->get('users/(:num)/gallery/(:num)', 'Galleries::showUserGallery/$1/$2');

?>

<!-- Generate the URI to link to user ID 15, gallery 12: -->
<a href="<?= url_to('Galleries::showUserGallery', 15, 12) ?>">View Gallery</a>
<!-- Result: 'http://example.com/users/15/gallery/12' -->

```

## [Named Routes](#id45)[](#named-routes "Permalink to this heading")

You can name routes to make your application less fragile. This applies a name to a route that can be called
later, and even if the route definition changes, all of the links in your application built with [`url_to()`](../helpers/url_helper.html#url_to "url_to")
will still work without you having to make any changes. A route is named by passing in the `as` option
with the name of the route:

```
<?php

// The route is defined as:
$routes->get('users/(:num)/gallery/(:num)', 'Galleries::showUserGallery/$1/$2', ['as' => 'user_gallery']);

?>

<!-- Generate the URI to link to user ID 15, gallery 12: -->
<a href="<?= url_to('user_gallery', 15, 12) ?>">View Gallery</a>
<!-- Result: 'http://example.com/users/15/gallery/12' -->

```

This has the added benefit of making the views more readable, too.

## [Grouping Routes](#id46)[](#grouping-routes "Permalink to this heading")

You can group your routes under a common name with the `group()` method. The group name becomes a segment that
appears prior to the routes defined inside of the group. This allows you to reduce the typing needed to build out an
extensive set of routes that all share the opening string, like when building an admin area:

```
<?php

$routes->group('admin', static function ($routes) {
    $routes->get('users', 'Admin\Users::index');
    $routes->get('blog', 'Admin\Blog::index');
});

```

This would prefix the **users** and **blog** URIs with **admin**, handling URLs like **admin/users** and **admin/blog**.

### [Setting Namespace](#id47)[](#setting-namespace "Permalink to this heading")

If you need to assign options to a group, like a [Assigning Namespace](#assigning-namespace), do it before the callback:

```
<?php

$routes->group('api', ['namespace' => 'App\API\v1'], static function ($routes) {
    $routes->resource('users');
});

```

This would handle a resource route to the `App\API\v1\Users` controller with the **api/users** URI.

### [Setting Filters](#id48)[](#setting-filters "Permalink to this heading")

You can also use a specific [filter](filters.html) for a group of routes. This will always
run the filter before or after the controller. This is especially handy during authentication or api logging:

```
<?php

$routes->group('api', ['filter' => 'api-auth'], static function ($routes) {
    $routes->resource('users');
});

```

The value for the filter must match one of the aliases defined within **app/Config/Filters.php**.

Note

Prior to v4.5.4, due to a bug, filters passed to the `group()` were
not merged into the filters passed to the inner routes.

### [Setting Other Options](#id49)[](#setting-other-options "Permalink to this heading")

At some point, you may want to group routes for the purpose of applying filters or other route
config options like namespace, subdomain, etc. Without necessarily needing to add a prefix to the group, you can pass
an empty string in place of the prefix and the routes in the group will be routed as though the group never existed but with the
given route config options:

```
<?php

$routes->group('', ['namespace' => 'Myth\Auth\Controllers'], static function ($routes) {
    $routes->get('login', 'AuthController::login', ['as' => 'login']);
    $routes->post('login', 'AuthController::attemptLogin');
    $routes->get('logout', 'AuthController::logout');
});

```

### [Nesting Groups](#id50)[](#nesting-groups "Permalink to this heading")

It is possible to nest groups within groups for finer organization if you need it:

```
<?php

$routes->group('admin', ['filter' => 'myfilter1:config'], static function ($routes) {
    $routes->get('/', 'Admin\Admin::index');

    $routes->group('users', ['filter' => 'myfilter2:region'], static function ($routes) {
        $routes->get('list', 'Admin\Users::list');
    });
});

```

This would handle the URL at **admin/users/list**.

The `filter` option passed to the outer `group()` are merged with the inner
`group()` filter option.
The above code runs `myfilter1:config` for the route `admin`, and `myfilter1:config`
and `myfilter2:region` for the route `admin/users/list`.

Note

The same filter cannot be run multiple times with different arguments.

Any other overlapping options passed to the inner `group()` will overwrite their values.

Note

Prior to v4.5.0, due to a bug, options passed to the outer `group()`
are not merged with the inner `group()` options.

## [Route Priority](#id51)[](#route-priority "Permalink to this heading")

Routes are registered in the routing table in the order in which they are defined. This means that when a URI is accessed, the first matching route will be executed.

Warning

If a route path is defined more than once with different handlers, only the first defined route is registered.

You can check registered routes in the routing table by running the [spark routes](#routing-spark-routes) command.

### [Changing Route Priority](#id52)[](#changing-route-priority "Permalink to this heading")

When working with modules, it can be a problem if the routes in the application contain wildcards.
Then the module routes will not be processed correctly.
You can solve this problem by lowering the priority of route processing using the `priority` option. The parameter
accepts positive integers and zero. The higher the number specified in the `priority`, the lower
route priority in the processing queue:

```
<?php

// First you need to enable processing of the routes queue by priority.
$routes->setPrioritize();

// Config\Routes
$routes->get('(.*)', 'Posts::index', ['priority' => 1]);

// Modules\Acme\Config\Routes
$routes->get('admin', 'Admin::index');

// The "admin" route will now be processed before the wildcard route.

```

To disable this functionality, you must call the method with the parameter `false`:

```
<?php

$routes->setPrioritize(false);

```

Note

By default, all routes have a priority of 0.
Negative integers will be cast to the absolute value.

## [Routes Configuration Options](#id53)[](#routes-configuration-options "Permalink to this heading")

The RoutesCollection class provides several options that affect all routes, and can be modified to meet your
application’s needs. These options are available in **app/Config/Routing.php**.

Note

The config file **app/Config/Routing.php** has been added since v4.4.0.
In previous versions, the setter methods were used in **app/Config/Routes.php**
to change settings.

### [Default Namespace](#id54)[](#default-namespace "Permalink to this heading")

When matching a controller to a route, the router will add the default namespace value to the front of the controller
specified by the route. By default, this value is `App\Controllers`.

If you set the value empty string (`''`), it leaves each route to specify the fully namespaced
controller:

```
<?php

// In app/Config/Routing.php
use CodeIgniter\Config\Routing as BaseRouting;

// ...
class Routing extends BaseRouting
{
    // ...
    public string $defaultNamespace = '';
    // ...
}

// In app/Config/Routes.php
// Controller is \Users
$routes->get('users', 'Users::index');

// Controller is \Admin\Users
$routes->get('users', 'Admin\Users::index');

```

If your controllers are not explicitly namespaced, there is no need to change this. If you namespace your controllers,
then you can change this value to save typing:

```
<?php

// This can be overridden in app/Config/Routes.php
$routes->setDefaultNamespace('App');

// Controller is \App\Users
$routes->get('users', 'Users::index');

// Controller is \App\Admin\Users
$routes->get('users', 'Admin\Users::index');

```

### [Default Method](#id55)[](#default-method "Permalink to this heading")

This setting is used when the route handler only has the controller name and no
method name listed. The default value is `index`.

```
// In app/Config/Routing.php
public string $defaultMethod = 'index';

```

Note

The `$defaultMethod` is also common with Auto Routing.
See [Auto Routing (Improved)](#routing-auto-routing-improved-default-method)
or [Auto Routing (Legacy)](#routing-auto-routing-legacy-default-method).

If you define the following route:

```
$routes->get('/', 'Home');

```

the `index()` method of the `App\Controllers\Home` controller is executed
when the route matches.

Note

Method names beginning with `_` cannot be used as the default method.
However, starting with v4.5.0, `__invoke` method is allowed.

### [Translate URI Dashes](#id56)[](#translate-uri-dashes "Permalink to this heading")

This option enables you to automatically replace dashes (`-`) with underscores in the controller and method
URI segments when used in Auto Routing, thus saving you additional route entries if you need to do that. This is required because the dash isn’t a valid class or method name character and would cause a fatal error if you try to use it:

```
<?php

// In app/Config/Routing.php
use CodeIgniter\Config\Routing as BaseRouting;

// ...
class Routing extends BaseRouting
{
    // ...
    public bool $translateURIDashes = true;
    // ...
}

// This can be overridden in app/Config/Routes.php
$routes->setTranslateURIDashes(true);

```

Note

When using Auto Routing (Improved), prior to v4.4.0, if
`$translateURIDashes` is true, two URIs correspond to a single controller
method, one URI for dashes (e.g., **foo-bar**) and one URI for underscores
(e.g., **foo\_bar**). This was incorrect behavior. Since v4.4.0, the URI for
underscores (**foo\_bar**) is not accessible.

### [Use Defined Routes Only](#id57)[](#use-defined-routes-only "Permalink to this heading")

Since v4.2.0, the auto-routing is disabled by default.

When no defined route is found that matches the URI, the system will attempt to match that URI against the
controllers and methods when Auto Routing is enabled.

You can disable this automatic matching, and restrict routes
to only those defined by you, by setting the `$autoRoute` property to false:

```
<?php

// In app/Config/Routing.php
use CodeIgniter\Config\Routing as BaseRouting;

// ...
class Routing extends BaseRouting
{
    // ...
    public bool $autoRoute = false;
    // ...
}

// This can be overridden in app/Config/Routes.php
$routes->setAutoRoute(false);

```

Warning

If you use the [CSRF protection](../libraries/security.html), it does not protect **GET**
requests. If the URI is accessible by the GET method, the CSRF protection will not work.

### [404 Override](#id58)[](#override "Permalink to this heading")

When a page is not found that matches the current URI, the system will show a
generic 404 view. Using the `$override404` property within the routing config
file, you can define controller class/method for 404 routes.

```
<?php

// In app/Config/Routing.php
use CodeIgniter\Config\Routing as BaseRouting;

// ...
class Routing extends BaseRouting
{
    // ...
    public ?string $override404 = 'App\Errors::show404';
    // ...
}

```

You can also change what happens by specifying an action to happen with the
`set404Override()` method in Routes config file. The value can be either a
valid class/method pair, or a Closure:

```
<?php

// In app/Config/Routes.php
// Would execute the show404 method of the App\Errors class
$routes->set404Override('App\Errors::show404');

// Will display a custom view.
$routes->set404Override(static function () {
    // If you want to get the URI segments.
    $segments = request()->getUri()->getSegments();

    return view('my_errors/not_found.html');
});

```

Note

Starting with v4.5.0, the 404 Override feature sets the Response status
code to `404` by default. In previous versions, the code was `200`.
If you want to change the status code in the controller, see
[`CodeIgniter\HTTP\Response::setStatusCode()`](../outgoing/response.html#CodeIgniter\HTTP\Response::setStatusCode "CodeIgniter\HTTP\Response::setStatusCode") for information on
how to set the status code.

### [Route Processing by Priority](#id59)[](#route-processing-by-priority "Permalink to this heading")

Enables or disables processing of the routes queue by priority. Lowering the priority is defined in the route option.
Disabled by default. This functionality affects all routes.
For an example use of lowering the priority see [Route Priority](#routing-priority):

```
<?php

// In app/Config/Routing.php
use CodeIgniter\Config\Routing as BaseRouting;

// ...
class Routing extends BaseRouting
{
    // ...
    public bool $prioritize = true;
    // ...
}

// In app/Config/Routes.php
// to enable
$routes->setPrioritize();

// to disable
$routes->setPrioritize(false);

```

### [Multiple URI Segments as One Parameter](#id60)[](#multiple-uri-segments-as-one-parameter "Permalink to this heading")

New in version 4.5.0.

When this option is enabled, a placeholder that matches multiple segments, such
as `(:any)`, will be passed directly as it is to one parameter, even if it
contains multiple segments.

```
<?php

// In app/Config/Routing.php
use CodeIgniter\Config\Routing as BaseRouting;

class Routing extends BaseRouting
{
    // ...
    public bool $multipleSegmentsOneParam = true;
    // ...
}

```

For example the route:

```
<?php

$routes->get('product/(:any)', 'Catalog::productLookup/$1');

```

will match **product/123**, **product/123/456**, **product/123/456/789** and so on.
And if the URI is **product/123/456**, `123/456` will be passed to the first
parameter of the `Catalog::productLookup()` method.

## [Auto Routing (Improved)](#id61)[](#auto-routing-improved "Permalink to this heading")

New in version 4.2.0.

Since v4.2.0, the new more secure Auto Routing has been introduced.

Note

If you are familiar with Auto Routing, which was enabled by default
from CodeIgniter 3.x through 4.1.x, you can see the differences in
[ChangeLog v4.2.0](../changelogs/v4.2.0.html#v420-new-improved-auto-routing).

When no defined route is found that matches the URI, the system will attempt to match that URI against the controllers and methods when Auto Routing is enabled.

Important

For security reasons, if a controller is used in the defined routes, Auto Routing (Improved) does not route to the controller.

Auto Routing can automatically route HTTP requests based on conventions
and execute the corresponding controller methods.

Note

Auto Routing (Improved) is disabled by default. To use it, see below.

### [Enable Auto Routing](#id62)[](#enable-auto-routing "Permalink to this heading")

To use it, you need to change the setting `$autoRoute` option to `true` in **app/Config/Routing.php**:

```
public bool $autoRoute = true;

```

And you need to change the property `$autoRoutesImproved` to `true` in **app/Config/Feature.php**:

```
public bool $autoRoutesImproved = true;

```

### [URI Segments](#id63)[](#uri-segments "Permalink to this heading")

The segments in the URL, in following with the Model-View-Controller approach, usually represent:

```
example.com/class/method/ID

```

1. The first segment represents the controller **class** that should be invoked.
2. The second segment represents the class **method** that should be called.
3. The third, and any additional segments, represent the ID and any variables that will be passed to the controller.

Consider this URI:

```
example.com/index.php/helloworld/hello/1

```

In the above example, when you send an HTTP request with **GET** method,
Auto Routing would attempt to find a controller named `App\Controllers\Helloworld`
and executes `getHello()` method with passing `'1'` as the first argument.

Note

A controller method that will be executed by Auto Routing (Improved) needs HTTP verb (`get`, `post`, `put`, etc.) prefix like `getIndex()`, `postCreate()`.

See [Auto Routing in Controllers](controllers.html#controller-auto-routing-improved) for more info.

### [Configuration Options](#id64)[](#configuration-options "Permalink to this heading")

These options are available in the **app/Config/Routing.php** file.

#### [Default Controller](#id65)[](#default-controller "Permalink to this heading")

##### For Site Root URI[](#for-site-root-uri "Permalink to this heading")

When a user visits the root of your site (i.e., **example.com**) the controller
to use is determined by the value set to the `$defaultController` property,
unless a route exists for it explicitly.

The default value for this is `Home` which matches the controller at
**app/Controllers/Home.php**:

```
public string $defaultController = 'Home';

```

##### For Directory URI[](#for-directory-uri "Permalink to this heading")

The default controller is also used when no matching route has been found, and the URI would point to a directory
in the controllers directory. For example, if the user visits **example.com/admin**, if a controller was found at
**app/Controllers/Admin/Home.php**, it would be used.

Important

You cannot access the default controller with the URI of the controller name.
When the default controller is `Home`, you can access **example.com/**, but if you access **example.com/home**, it will be not found.

See [Auto Routing in Controllers](controllers.html#controller-auto-routing-improved) for more info.

#### [Default Method](#id66)[](#routing-auto-routing-improved-default-method "Permalink to this heading")

This works similar to the default controller setting, but is used to determine the default method that is used
when a controller is found that matches the URI, but no segment exists for the method. The default value is
`index`.

In this example, if the user were to visit **example.com/products**, and a `Products`
controller existed, the `Products::getListAll()` method would be executed:

```
public string $defaultMethod = 'listAll';

```

Important

You cannot access the controller with the URI of the default method name.
In the example above, you can access **example.com/products**, but if you access **example.com/products/listall**, it will be not found.

### [Module Routing](#id67)[](#module-routing "Permalink to this heading")

New in version 4.4.0.

You can use auto routing even if you use [Code Modules](../general/modules.html) and place
the controllers in a different namespace.

To route to a module, the `$moduleRoutes` property in **app/Config/Routing.php**
must be set:

```
public array $moduleRoutes = [
    'blog' => 'Acme\Blog\Controllers',
];

```

The key is the first URI segment for the module, and the value is the controller
namespace. In the above configuration, **http://localhost:8080/blog/foo/bar**
will be routed to `Acme\Blog\Controllers\Foo::getBar()`.

Note

If you define `$moduleRoutes`, the routing for the module takes
precedence. In the above example, even if you have the `App\Controllers\Blog`
controller, **http://localhost:8080/blog** will be routed to the default
controller `Acme\Blog\Controllers\Home`.

## [Auto Routing (Legacy)](#id68)[](#auto-routing-legacy "Permalink to this heading")

Important

This feature exists only for backward compatibility. Do not use it
in new projects. Even if you are already using it, we recommend that you use
the [Auto Routing (Improved)](#auto-routing-improved) instead.

Auto Routing (Legacy) is a routing system from CodeIgniter 3.
It can automatically route HTTP requests based on conventions and execute the corresponding controller methods.

It is recommended that all routes are defined in the **app/Config/Routes.php** file,
or to use [Auto Routing (Improved)](#auto-routing-improved),

Warning

To prevent misconfiguration and miscoding, we recommend that you do not use
Auto Routing (Legacy) feature. It is easy to create vulnerable apps where controller filters
or CSRF protection are bypassed.

Important

Auto Routing (Legacy) routes an HTTP request with **any** HTTP method to a controller method.

### [Enable Auto Routing (Legacy)](#id69)[](#enable-auto-routing-legacy "Permalink to this heading")

Since v4.2.0, the auto-routing is disabled by default.

To use it, you need to change the setting `$autoRoute` option to `true` in **app/Config/Routing.php**:

```
public bool $autoRoute = true;

```

And set the property `$autoRoutesImproved` to `false` in **app/Config/Feature.php**:

```
public bool $autoRoutesImproved = false;

```

### [URI Segments (Legacy)](#id70)[](#uri-segments-legacy "Permalink to this heading")

The segments in the URL, in following with the Model-View-Controller approach, usually represent:

```
example.com/class/method/ID

```

1. The first segment represents the controller **class** that should be invoked.
2. The second segment represents the class **method** that should be called.
3. The third, and any additional segments, represent the ID and any variables that will be passed to the controller.

Consider this URI:

```
example.com/index.php/helloworld/index/1

```

In the above example, CodeIgniter would attempt to find a controller named **Helloworld.php**
and executes `index()` method with passing `'1'` as the first argument.

See [Auto Routing (Legacy) in Controllers](controllers.html#controller-auto-routing-legacy) for more info.

### [Configuration Options (Legacy)](#id71)[](#configuration-options-legacy "Permalink to this heading")

These options are available in the **app/Config/Routing.php** file.

#### [Default Controller (Legacy)](#id72)[](#default-controller-legacy "Permalink to this heading")

##### For Site Root URI (Legacy)[](#for-site-root-uri-legacy "Permalink to this heading")

When a user visits the root of your site (i.e., **example.com**) the controller
to use is determined by the value set to the `$defaultController` property,
unless a route exists for it explicitly.

The default value for this is `Home` which matches the controller at
**app/Controllers/Home.php**:

```
public string $defaultController = 'Home';

```

##### For Directory URI (Legacy)[](#for-directory-uri-legacy "Permalink to this heading")

The default controller is also used when no matching route has been found, and the URI would point to a directory
in the controllers directory. For example, if the user visits **example.com/admin**, if a controller was found at
**app/Controllers/Admin/Home.php**, it would be used.

See [Auto Routing (Legacy) in Controllers](controllers.html#controller-auto-routing-legacy) for more info.

#### [Default Method (Legacy)](#id73)[](#default-method-legacy "Permalink to this heading")

This works similar to the default controller setting, but is used to determine the default method that is used
when a controller is found that matches the URI, but no segment exists for the method. The default value is
`index`.

In this example, if the user were to visit **example.com/products**, and a `Products`
controller existed, the `Products::listAll()` method would be executed:

```
public string $defaultMethod = 'listAll';

```

## [Confirming Routes](#id74)[](#confirming-routes "Permalink to this heading")

CodeIgniter has the following [command](../cli/spark_commands.html) to display all routes.

### [spark routes](#id75)[](#spark-routes "Permalink to this heading")

Displays all routes and filters:

```
php spark routes

```

The output is like the following:

```
+---------+---------+---------------+-------------------------------+----------------+---------------+
| Method  | Route   | Name          | Handler                       | Before Filters | After Filters |
+---------+---------+---------------+-------------------------------+----------------+---------------+
| GET     | /       | »             | \App\Controllers\Home::index  |                | toolbar       |
| GET     | feed    | »             | (Closure)                     |                | toolbar       |
+---------+---------+---------------+-------------------------------+----------------+---------------+

```

The *Method* column shows the HTTP method that the route is listening for.

The *Route* column shows the route path to match. The route of a defined route is expressed as a regular expression.

Since v4.3.0, the *Name* column shows the route name. `»` indicates the name is the same as the route path.

Important

The system is not perfect.
For routes containing regular expression patterns like `([^/]+)` or `{locale}`,
the *Filters* displayed might not be correct (if you set complicated URI pattern
for the filters in **app/Config/Filters.php**), or it is displayed as `<unknown>`.

The [spark filter:check](filters.html#spark-filter-check) command can be used to check
for 100% accurate filters.

#### [Auto Routing (Improved)](#id76)[](#id15 "Permalink to this heading")

When you use Auto Routing (Improved), the output is like the following:

```
+-----------+-------------------------+---------------+-----------------------------------+----------------+---------------+
| Method    | Route                   | Name          | Handler                           | Before Filters | After Filters |
+-----------+-------------------------+---------------+-----------------------------------+----------------+---------------+
| GET(auto) | product/list/../..[/..] |               | \App\Controllers\Product::getList |                | toolbar       |
+-----------+-------------------------+---------------+-----------------------------------+----------------+---------------+

```

The *Method* will be like `GET(auto)`.

`/..` in the *Route* column indicates one segment. `[/..]` indicates it is optional.

Note

When auto-routing is enabled and you have the route `home`, it can be also accessed by `Home`, or maybe by `hOme`, `hoMe`, `HOME`, etc. but the command will show only `home`.

If you see a route starting with `x` like the following, it indicates an invalid
route that won’t be routed, but the controller has a public method for routing.

```
+-----------+----------------+------+-------------------------------------+----------------+---------------+
| Method    | Route          | Name | Handler                             | Before Filters | After Filters |
+-----------+----------------+------+-------------------------------------+----------------+---------------+
| GET(auto) | x home/foo     |      | \App\Controllers\Home::getFoo       | <unknown>      | <unknown>     |
+-----------+----------------+------+-------------------------------------+----------------+---------------+

```

The above example shows you have the `\App\Controllers\Home::getFoo()` method,
but it is not routed because it is the default controller (`Home` by default)
and the default controller name must be omitted in the URI. You should delete
the `getFoo()` method.

Note

Prior to v4.3.4, the invalid route is displayed as a normal route
due to a bug.

#### [Auto Routing (Legacy)](#id77)[](#id16 "Permalink to this heading")

When you use Auto Routing (Legacy), the output is like the following:

```
+--------+--------------------+---------------+-----------------------------------+----------------+---------------+
| Method | Route              | Name          | Handler                           | Before Filters | After Filters |
+--------+--------------------+---------------+-----------------------------------+----------------+---------------+
| auto   | product/list[/...] |               | \App\Controllers\Product::getList |                | toolbar       |
+--------+--------------------+---------------+-----------------------------------+----------------+---------------+

```

The *Method* will be `auto`.

`[/...]` in the *Route* column indicates any number of segments.

Note

When auto-routing is enabled and you have the route `home`, it can be also accessed by `Home`, or maybe by `hOme`, `hoMe`, `HOME`, etc. but the command will show only `home`.

#### [Sort by Handler](#id78)[](#sort-by-handler "Permalink to this heading")

New in version 4.3.0.

You can sort the routes by *Handler*:

```
php spark routes -h

```

#### [Specify Host](#id79)[](#specify-host "Permalink to this heading")

New in version 4.4.0.

You can specify the host in the request URL with the `--host` option:

```
php spark routes --host accounts.example.com

```

## [Getting Routing Information](#id80)[](#getting-routing-information "Permalink to this heading")

In CodeIgniter 4, understanding and managing routing information is crucial for handling HTTP requests effectively.
This involves retrieving details about the active controller and method, as well as the filters applied to a specific route.
Below, we explore how to access this routing information to assist in tasks such as logging, debugging, or implementing conditional logic.

### [Retrieving the Current Controller/Method Names](#id81)[](#retrieving-the-current-controller-method-names "Permalink to this heading")

In some cases, you might need to determine which controller and method have been triggered by the current HTTP request.
This can be useful for logging, debugging, or conditional logic based on the active controller method.

CodeIgniter 4 provides a simple way to access the current route’s controller and method names using the `Router` class. Here is an example:

```
<?php

// Get the router instance.
/** @var \CodeIgniter\Router\Router $router */
$router = service('router');

// Retrieve the fully qualified class name of the controller handling the current request.
$controller = $router->controllerName();

// Retrieve the method name being executed in the controller for the current request.
$method = $router->methodName();

echo 'Current Controller: ' . $controller . '<br>';
echo 'Current Method: ' . $method;

```

This functionality is particularly useful when you need to dynamically interact with your controller or log which method is handling a particular request.

### [Getting Active Filters for the Current Route](#id82)[](#getting-active-filters-for-the-current-route "Permalink to this heading")

[Filters](filters.html) are a powerful feature that enables you to perform operations such as authentication, logging, and security checks before or after processing HTTP requests.
To access the active filters for a specific route, you can use the `CodeIgniter\Router\Router::getFilters()` method from the `Router` class.

This method returns a list of filters that are currently active for the route being processed:

```
<?php

// Get the router instance.
/** @var \CodeIgniter\Router\Router $router */
$router  = service('router');
$filters = $router->getFilters();

echo 'Active Filters for the Route: ' . implode(', ', $filters);

```

Note

The `getFilters()` method returns only the filters defined for the specific route.
It does not include global filters or those specified in the **app/Config/Filters.php** file.

 [Previous](index.html "Controllers and Routing")
[Next](controllers.html "Controllers")

---

© Copyright 2019-2024 CodeIgniter Foundation.
Last updated on Dec 31, 2024.

Built with [Sphinx](https://www.sphinx-doc.org/) using a
[theme](https://github.com/readthedocs/sphinx_rtd_theme)
provided by [Read the Docs](https://readthedocs.org).


