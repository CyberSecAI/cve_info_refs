=== Content from github.com_044f4e62_20250115_094446.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicronaut-projects%2Fmicronaut-core%2Fcommit%2Fb8ec32c311689667c69ae7d9f9c3b3a8abc96fe3)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicronaut-projects%2Fmicronaut-core%2Fcommit%2Fb8ec32c311689667c69ae7d9f9c3b3a8abc96fe3)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=micronaut-projects%2Fmicronaut-core)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[micronaut-projects](/micronaut-projects)
/
**[micronaut-core](/micronaut-projects/micronaut-core)**
Public

* [Notifications](/login?return_to=%2Fmicronaut-projects%2Fmicronaut-core) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2Fmicronaut-projects%2Fmicronaut-core)
* [Star
   6.1k](/login?return_to=%2Fmicronaut-projects%2Fmicronaut-core)

* [Code](/micronaut-projects/micronaut-core)
* [Issues
  697](/micronaut-projects/micronaut-core/issues)
* [Pull requests
  88](/micronaut-projects/micronaut-core/pulls)
* [Discussions](/micronaut-projects/micronaut-core/discussions)
* [Actions](/micronaut-projects/micronaut-core/actions)
* [Projects
  0](/micronaut-projects/micronaut-core/projects)
* [Wiki](/micronaut-projects/micronaut-core/wiki)
* [Security](/micronaut-projects/micronaut-core/security)
* [Insights](/micronaut-projects/micronaut-core/pulse)

Additional navigation options

* [Code](/micronaut-projects/micronaut-core)
* [Issues](/micronaut-projects/micronaut-core/issues)
* [Pull requests](/micronaut-projects/micronaut-core/pulls)
* [Discussions](/micronaut-projects/micronaut-core/discussions)
* [Actions](/micronaut-projects/micronaut-core/actions)
* [Projects](/micronaut-projects/micronaut-core/projects)
* [Wiki](/micronaut-projects/micronaut-core/wiki)
* [Security](/micronaut-projects/micronaut-core/security)
* [Insights](/micronaut-projects/micronaut-core/pulse)

## Commit

[Permalink](/micronaut-projects/micronaut-core/commit/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Use ConversionContext constants where possible instead of class ([#2356](https://github.com/micronaut-projects/micronaut-core/pull/2356))

[Browse files](/micronaut-projects/micronaut-core/tree/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3)
Browse the repository at this point in the history

```
Changes
-------
 * Added ArgumentConversionContext constants in ConversionContext
 * Replaced Argument.of and use of argument classes with
ConversionContext constants where possible
 * Added getFirst method in ConvertibleMultiValues that accepts
ArgumentConversionContent parameter

Partially addresses issue [#2355](https://github.com/micronaut-projects/micronaut-core/issues/2355)
```

* Loading branch information

[![@fabienrenaud](https://avatars.githubusercontent.com/u/3112233?s=40&v=4)](/fabienrenaud) [![@graemerocher](https://avatars.githubusercontent.com/u/66626?s=40&v=4)](/graemerocher)

[fabienrenaud](/micronaut-projects/micronaut-core/commits?author=fabienrenaud "View all commits by fabienrenaud")
authored and
[graemerocher](/micronaut-projects/micronaut-core/commits?author=graemerocher "View all commits by graemerocher")
committed
Nov 18, 2019

1 parent
[07424ba](/micronaut-projects/micronaut-core/commit/07424ba01bf87d7383cef6d15e12d240da7918b0)

commit b8ec32c

 Show file tree

 Hide file tree

Showing
**18 changed files**
with
**145 additions**
and
**59 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* core/src/main/java/io/micronaut/core

  + convert

    - core/src/main/java/io/micronaut/core/convert/ConversionContext.java
      [ConversionContext.java](#diff-3ce78b1192e8710ab02b16b68c1e120120e4ccb5df976a8d1d19e445c2debe9d)
    - core/src/main/java/io/micronaut/core/convert/DefaultArgumentConversionContext.java
      [DefaultArgumentConversionContext.java](#diff-ab8c7cd9ded63d62645b7905f96fb8cef5bb391b8dff10fcb00204a5f4062b12)
    - value

      * core/src/main/java/io/micronaut/core/convert/value/ConvertibleMultiValues.java
        [ConvertibleMultiValues.java](#diff-aab7e98ea1615fab48a673a5456edc5b1c90088c2107ab105f39512474b86c72)
      * core/src/main/java/io/micronaut/core/convert/value/ConvertibleValues.java
        [ConvertibleValues.java](#diff-9d1a9f7aa3bf1daeb2e2249ab464e1a3d2ebe2db1cc5ff7b22d92e2b87230599)
  + type

    - core/src/main/java/io/micronaut/core/type/Argument.java
      [Argument.java](#diff-081ad354c5a58f534d1efc6fbe86d26348354b001169594b1e37c163f8fac041)
    - core/src/main/java/io/micronaut/core/type/DefaultArgument.java
      [DefaultArgument.java](#diff-3bac54cadac75c066e87926e64a429782990905d250c34f986209f102973f339)
* http-client/src/main/java/io/micronaut/http/client/exceptions

  + http-client/src/main/java/io/micronaut/http/client/exceptions/HttpClientErrorDecoder.java
    [HttpClientErrorDecoder.java](#diff-2909519d06e1d3e11221291753530cec886bfaec6a4633c70ad28bc499f85225)
* http-server-netty/src

  + main/java/io/micronaut/http/server/netty

    - http-server-netty/src/main/java/io/micronaut/http/server/netty/RoutingInBoundHandler.java
      [RoutingInBoundHandler.java](#diff-9af0f6dd8d3c36389a0ff250f900fd204afbe901b57f4e2d23028ecdad048c56)
    - binders

      * http-server-netty/src/main/java/io/micronaut/http/server/netty/binders/CompletableFutureBodyBinder.java
        [CompletableFutureBodyBinder.java](#diff-a2ecf8ef2d9ec57a1546e24cba10a84c93f154ff69630aa040054395df4533cd)
      * http-server-netty/src/main/java/io/micronaut/http/server/netty/binders/PublisherBodyBinder.java
        [PublisherBodyBinder.java](#diff-f38a3b7f216b8754ad50e45527ddb7d2fad41d37fa31936e2e819fa12b30a758)
  + test/groovy/io/micronaut/http/server/netty/cors

    - http-server-netty/src/test/groovy/io/micronaut/http/server/netty/cors/CorsFilterSpec.groovy
      [CorsFilterSpec.groovy](#diff-2434f3d2cd81009a815df4306cf69e0147ae32204880e65168a28951a68fea0c)
* http-server/src/main/java/io/micronaut/http/server/cors

  + http-server/src/main/java/io/micronaut/http/server/cors/CorsFilter.java
    [CorsFilter.java](#diff-4a992972d4ce540a85ead6f3d6d6d4a5588379b6d6d64956f954ae5931570a79)
  + http-server/src/main/java/io/micronaut/http/server/cors/CorsOriginConverter.java
    [CorsOriginConverter.java](#diff-82f290502cef272a5586abea854ecbebb0f1636b19fbb77ccc85f5656ff5e732)
* http/src/main/java/io/micronaut/http

  + http/src/main/java/io/micronaut/http/HttpHeaders.java
    [HttpHeaders.java](#diff-24b1946305bc2a888690e802b4124d050759942662fdb0f14681bffc4fdb8e49)
  + http/src/main/java/io/micronaut/http/MediaType.java
    [MediaType.java](#diff-89f8397003a2d97f4903084917ee32e6bacab8ac61f1e624b499d1f7c310487a)
* runtime/src/main/java/io/micronaut

  + cache/interceptor

    - runtime/src/main/java/io/micronaut/cache/interceptor/CacheInterceptor.java
      [CacheInterceptor.java](#diff-a6932599d3084ea7ab85789a8f81fecb0cafd912a5c810b21ed6fb8cf0925443)
  + scheduling/io/watch

    - runtime/src/main/java/io/micronaut/scheduling/io/watch/FileWatchCondition.java
      [FileWatchCondition.java](#diff-f5cd3db148796fe6bc7a303bdd6b1925116d7f84b0388f032c13266ef697a100)
* session/src/main/java/io/micronaut/session/binder

  + session/src/main/java/io/micronaut/session/binder/SessionArgumentBinder.java
    [SessionArgumentBinder.java](#diff-a61bcc3fcab196071873d18677fee140a3bcf0411fe654cf35f828fd59973a02)

## There are no files selected for viewing

25 changes: 25 additions & 0 deletions

25
[core/src/main/java/io/micronaut/core/convert/ConversionContext.java](#diff-3ce78b1192e8710ab02b16b68c1e120120e4ccb5df976a8d1d19e445c2debe9d "core/src/main/java/io/micronaut/core/convert/ConversionContext.java")

Show comments

[View file](/micronaut-projects/micronaut-core/blob/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3/core/src/main/java/io/micronaut/core/convert/ConversionContext.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -41,6 +41,31 @@ public interface ConversionContext extends AnnotationMetadataProvider, TypeVaria |
|  |  | ConversionContext DEFAULT = new ConversionContext() { |
|  |  | }; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for Boolean argument. |
|  |  | \*/ |
|  |  | ArgumentConversionContext<Boolean> BOOLEAN = ConversionContext.of(Argument.BOOLEAN); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for Integer argument. |
|  |  | \*/ |
|  |  | ArgumentConversionContext<Integer> INT = ConversionContext.of(Argument.INT); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for Long argument. |
|  |  | \*/ |
|  |  | ArgumentConversionContext<Long> LONG = ConversionContext.of(Argument.LONG); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for String argument. |
|  |  | \*/ |
|  |  | ArgumentConversionContext<String> STRING = ConversionContext.of(Argument.STRING); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for List<String> argument. |
|  |  | \*/ |
|  |  | ArgumentConversionContext<List<String>> LIST\_OF\_STRING = ConversionContext.of(Argument.LIST\_OF\_STRING); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* In the case where the type to be converted contains generic type arguments this map will return |
|  |  | \* the concrete types of those arguments. For example for the {@link Map} type two keys will be present |
| Expand Down | |  |

27 changes: 20 additions & 7 deletions

27
[core/src/main/java/io/micronaut/core/convert/DefaultArgumentConversionContext.java](#diff-ab8c7cd9ded63d62645b7905f96fb8cef5bb391b8dff10fcb00204a5f4062b12 "core/src/main/java/io/micronaut/core/convert/DefaultArgumentConversionContext.java")

Show comments

[View file](/micronaut-projects/micronaut-core/blob/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3/core/src/main/java/io/micronaut/core/convert/DefaultArgumentConversionContext.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -19,13 +19,7 @@ |
|  |  | import io.micronaut.core.type.Argument; |
|  |  |  |
|  |  | import java.nio.charset.Charset; |
|  |  | import java.util.ArrayList; |
|  |  | import java.util.Collections; |
|  |  | import java.util.Iterator; |
|  |  | import java.util.List; |
|  |  | import java.util.Locale; |
|  |  | import java.util.Map; |
|  |  | import java.util.Optional; |
|  |  | import java.util.\*; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Default implementation of the {@link ConversionContext} interface. |
| Expand Down  Expand Up | | @@ -114,6 +108,25 @@ public Argument<T> getArgument() { |
|  |  | return argument; |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public boolean equals(Object o) { |
|  |  | if (this == o) { |
|  |  | return true; |
|  |  | } |
|  |  | if (o == null || getClass() != o.getClass()) { |
|  |  | return false; |
|  |  | } |
|  |  | DefaultArgumentConversionContext<?> that = (DefaultArgumentConversionContext<?>) o; |
|  |  | return Objects.equals(getArgument(), that.getArgument()) && |
|  |  | Objects.equals(finalLocale, that.finalLocale) && |
|  |  | Objects.equals(finalCharset, that.finalCharset); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public int hashCode() { |
|  |  | return Objects.hash(argument, finalLocale, finalCharset); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public String toString() { |
|  |  | return argument.toString(); |
| Expand Down | |  |

17 changes: 17 additions & 0 deletions

17
[core/src/main/java/io/micronaut/core/convert/value/ConvertibleMultiValues.java](#diff-aab7e98ea1615fab48a673a5456edc5b1c90088c2107ab105f39512474b86c72 "core/src/main/java/io/micronaut/core/convert/value/ConvertibleMultiValues.java")

Show comments

[View file](/micronaut-projects/micronaut-core/blob/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3/core/src/main/java/io/micronaut/core/convert/value/ConvertibleMultiValues.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -15,6 +15,7 @@ |
|  |  | \*/ |
|  |  | package io.micronaut.core.convert.value; |
|  |  |  |
|  |  | import io.micronaut.core.convert.ArgumentConversionContext; |
|  |  | import io.micronaut.core.convert.ConversionContext; |
|  |  | import io.micronaut.core.convert.ConversionService; |
|  |  | import io.micronaut.core.reflect.GenericTypeUtils; |
| Expand Down  Expand Up | | @@ -170,6 +171,22 @@ default <T> Optional<T> getFirst(CharSequence name, Argument<T> requiredType) { |
|  |  | return Optional.empty(); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Find a header and convert it to the given type. |
|  |  | \* |
|  |  | \* @param name The name of the header |
|  |  | \* @param conversionContext The conversion context |
|  |  | \* @param <T> The generic type |
|  |  | \* @return If the header is presented and can be converted an optional of the value otherwise {@link Optional#empty()} |
|  |  | \*/ |
|  |  | default <T> Optional<T> getFirst(CharSequence name, ArgumentConversionContext<T> conversionContext) { |
|  |  | V v = get(name); |
|  |  | if (v != null) { |
|  |  | return ConversionService.SHARED.convert(v, conversionContext); |
|  |  | } |
|  |  | return Optional.empty(); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Find a header and convert it to the given type. |
|  |  | \* |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[core/src/main/java/io/micronaut/core/convert/value/ConvertibleValues.java](#diff-9d1a9f7aa3bf1daeb2e2249ab464e1a3d2ebe2db1cc5ff7b22d92e2b87230599 "core/src/main/java/io/micronaut/core/convert/value/ConvertibleValues.java")

Show comments

[View file](/micronaut-projects/micronaut-core/blob/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3/core/src/main/java/io/micronaut/core/convert/value/ConvertibleValues.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -70,7 +70,7 @@ default Class<V> getValueType() { |
|  |  | \* @return True if it is |
|  |  | \*/ |
|  |  | default boolean contains(String name) { |
|  |  | return get(name, Object.class).isPresent(); |
|  |  | return get(name, Argument.OBJECT\_ARGUMENT).isPresent(); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
| Expand Down | |  |

28 changes: 19 additions & 9 deletions

28
[core/src/main/java/io/micronaut/core/type/Argument.java](#diff-081ad354c5a58f534d1efc6fbe86d26348354b001169594b1e37c163f8fac041 "core/src/main/java/io/micronaut/core/type/Argument.java")

Show comments

[View file](/micronaut-projects/micronaut-core/blob/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3/core/src/main/java/io/micronaut/core/type/Argument.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -40,59 +40,64 @@ |
|  |  | \*/ |
|  |  | public interface Argument<T> extends TypeVariableResolver, AnnotatedElement, Type { |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for string argument. |
|  |  | \*/ |
|  |  | Argument<String> STRING = Argument.of(String.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for int argument. Used by generated code, do not remove. |
|  |  | \*/ |
|  |  | @SuppressWarnings("unused") |
|  |  | Argument INT = Argument.of(int.class); |
|  |  | Argument<Integer> INT = Argument.of(int.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for long argument. Used by generated code, do not remove. |
|  |  | \*/ |
|  |  | @SuppressWarnings("unused") |
|  |  | Argument LONG = Argument.of(long.class); |
|  |  | Argument<Long> LONG = Argument.of(long.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for float argument. Used by generated code, do not remove. |
|  |  | \*/ |
|  |  | @SuppressWarnings("unused") |
|  |  | Argument FLOAT = Argument.of(float.class); |
|  |  | Argument<Float> FLOAT = Argument.of(float.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for double argument. Used by generated code, do not remove. |
|  |  | \*/ |
|  |  | @SuppressWarnings("unused") |
|  |  | Argument DOUBLE = Argument.of(double.class); |
|  |  | Argument<Double> DOUBLE = Argument.of(double.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for void argument. Used by generated code, do not remove. |
|  |  | \*/ |
|  |  | @SuppressWarnings("unused") |
|  |  | Argument VOID = Argument.of(void.class); |
|  |  | Argument<Void> VOID = Argument.of(void.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for byte argument. Used by generated code, do not remove. |
|  |  | \*/ |
|  |  | @SuppressWarnings("unused") |
|  |  | Argument BYTE = Argument.of(byte.class); |
|  |  | Argument<Byte> BYTE = Argument.of(byte.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for boolean argument. Used by generated code, do not remove. |
|  |  | \*/ |
|  |  | @SuppressWarnings("unused") |
|  |  | Argument BOOLEAN = Argument.of(boolean.class); |
|  |  | Argument<Boolean> BOOLEAN = Argument.of(boolean.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant char argument. Used by generated code, do not remove. |
|  |  | \*/ |
|  |  | @SuppressWarnings("unused") |
|  |  | Argument CHAR = Argument.of(char.class); |
|  |  | Argument<Character> CHAR = Argument.of(char.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant short argument. Used by generated code, do not remove. |
|  |  | \*/ |
|  |  | @SuppressWarnings("unused") |
|  |  | Argument SHORT = Argument.of(short.class); |
|  |  | Argument<Short> SHORT = Argument.of(short.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant representing zero arguments. Used by generated code, do not remove. |
| Expand All | | @@ -107,6 +112,11 @@ public interface Argument<T> extends TypeVariableResolver, AnnotatedElement, Typ |
|  |  | @SuppressWarnings("unused") |
|  |  | Argument<Object> OBJECT\_ARGUMENT = of(Object.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Constant for List<String> argument. |
|  |  | \*/ |
|  |  | Argument<List<String>> LIST\_OF\_STRING = Argument.listOf(String.class); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* @return The name of the argument |
|  |  | \*/ |
| Expand Down | |  |

8 changes: 2 additions & 6 deletions

8
[core/src/main/java/io/micronaut/core/type/DefaultArgument.java](#diff-3bac54cadac75c066e87926e64a429782990905d250c34f986209f102973f339 "core/src/main/java/io/micronaut/core/type/DefaultArgument.java")

Show comments

[View file](/micronaut-projects/micronaut-core/blob/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3/core/src/main/java/io/micronaut/core/type/DefaultArgument.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -47,11 +47,7 @@ public class DefaultArgument<T> implements Argument<T> { |
|  |  | \* @param genericTypes The generic types |
|  |  | \*/ |
|  |  | public DefaultArgument(Class<T> type, String name, AnnotationMetadata annotationMetadata, Argument... genericTypes) { |
|  |  | this.type = type; |
|  |  | this.name = name; |
|  |  | this.annotationMetadata = annotationMetadata != null ? annotationMetadata : AnnotationMetadata.EMPTY\_METADATA; |
|  |  | this.typeParameters = initializeTypeParameters(genericTypes); |
|  |  | this.typeParameterArray = genericTypes; |
|  |  | this(type, name, annotationMetadata, initializeTypeParameters(genericTypes), genericTypes); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
| Expand Down  Expand Up | | @@ -184,7 +180,7 @@ public int hashCode() { |
|  |  | return Objects.hash(type, name, typeParameters); |
|  |  | } |
|  |  |  |
|  |  | private Map<String, Argument<?>> initializeTypeParameters(Argument[] genericTypes) { |
|  |  | private static Map<String, Argument<?>> initializeTypeParameters(Argument[] genericTypes) { |
|  |  | Map<String, Argument<?>> typeParameters; |
|  |  | if (genericTypes != null && genericTypes.length > 0) { |
|  |  | typeParameters = new LinkedHashMap<>(genericTypes.length); |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[http-client/src/main/java/io/micronaut/http/client/exceptions/HttpClientErrorDecoder.java](#diff-2909519d06e1d3e11221291753530cec886bfaec6a4633c70ad28bc499f85225 "http-client/src/main/java/io/micronaut/http/client/exceptions/HttpClientErrorDecoder.java")

Show comments

[View file](/micronaut-projects/micronaut-core/blob/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3/http-client/src/main/java/io/micronaut/http/client/exceptions/HttpClientErrorDecoder.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -71,7 +71,7 @@ default Argument<?> getErrorType(MediaType mediaType) { |
|  |  | } else if (mediaType.equals(MediaType.APPLICATION\_VND\_ERROR\_TYPE)) { |
|  |  | return Argument.of(VndError.class); |
|  |  | } else { |
|  |  | return Argument.of(String.class); |
|  |  | return Argument.STRING; |
|  |  | } |
|  |  | } |
|  |  | } |

5 changes: 3 additions & 2 deletions

5
[http-server-netty/src/main/java/io/micronaut/http/server/netty/RoutingInBoundHandler.java](#diff-9af0f6dd8d3c36389a0ff250f900fd204afbe901b57f4e2d23028ecdad048c56 "http-server-netty/src/main/java/io/micronaut/http/server/netty/RoutingInBoundHandler.java")

Show comments

[View file](/micronaut-projects/micronaut-core/blob/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3/http-server-netty/src/main/java/io/micronaut/http/server/netty/RoutingInBoundHandler.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -141,6 +141,7 @@ class RoutingInBoundHandler extends SimpleChannelInboundHandler<io.micronaut.htt |
|  |  | private static final Logger LOG = LoggerFactory.getLogger(RoutingInBoundHandler.class); |
|  |  | private static final Pattern IGNORABLE\_ERROR\_MESSAGE = Pattern.compile( |
|  |  | "^.\*(?:connection.\*(?:reset|closed|abort|broken)|broken.\*pipe).\*$", Pattern.CASE\_INSENSITIVE); |
|  |  | private static final Argument ARGUMENT\_PART\_DATA = Argument.of(PartData.class); |
|  |  |  |
|  |  | private final Router router; |
|  |  | private final ExecutorSelector executorSelector; |
| Expand Down  Expand Up | | @@ -769,7 +770,7 @@ protected void doOnNext(Object message) { |
|  |  | Argument typeVariable; |
|  |  |  |
|  |  | if (StreamingFileUpload.class.isAssignableFrom(argument.getType())) { |
|  |  | typeVariable = Argument.of(PartData.class); |
|  |  | typeVariable = ARGUMENT\_PART\_DATA; |
|  |  | } else { |
|  |  | typeVariable = argument.getFirstTypeVariable().orElse(Argument.OBJECT\_ARGUMENT); |
|  |  | } |
| Expand All | | @@ -784,7 +785,7 @@ protected void doOnNext(Object message) { |
|  |  | if (Publishers.isConvertibleToPublisher(typeVariableType)) { |
|  |  | boolean streamingFileUpload = StreamingFileUpload.class.isAssignableFrom(typeVariableType); |
|  |  | if (streamingFileUpload) { |
|  |  | typeVariable = Argument.of(PartData.class); |
|  |  | typeVariable = ARGUMENT\_PART\_DATA; |
|  |  | } else { |
|  |  | typeVariable = typeVariable.getFirstTypeVariable().orElse(Argument.OBJECT\_ARGUMENT); |
|  |  | } |
| Expand Down | |  |

4 changes: 3 additions & 1 deletion

4
[...tty/src/main/java/io/micronaut/http/server/netty/binders/CompletableFutureBodyBinder.java](#diff-a2ecf8ef2d9ec57a1546e24cba10a84c93f154ff69630aa040054395df4533cd "http-server-netty/src/main/java/io/micronaut/http/server/netty/binders/CompletableFutureBodyBinder.java")

Show comments

[View file](/micronaut-projects/micronaut-core/blob/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3/http-server-netty/src/main/java/io/micronaut/http/server/netty/binders/CompletableFutureBodyBinder.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -49,6 +49,8 @@ |
|  |  | public class CompletableFutureBodyBinder extends DefaultBodyAnnotationBinder<CompletableFuture> |
|  |  | implements NonBlockingBodyArgumentBinder<CompletableFuture> { |
|  |  |  |
|  |  | private static final Argument<CompletableFuture> TYPE = Argument.of(CompletableFuture.class); |
|  |  |  |
|  |  | private final BeanLocator beanLocator; |
|  |  | private final HttpServerConfiguration httpServerConfiguration; |
|  |  |  |
| Expand All | | @@ -65,7 +67,7 @@ public CompletableFutureBodyBinder(BeanLocator beanLocator, HttpServerConfigurat |
|  |  |  |
|  |  | @Override |
|  |  | public Argument<CompletableFuture> argumentType() { |
|  |  | return Argument.of(CompletableFuture.class); |
|  |  | return TYPE; |
|  |  | } |
|  |  |  |
|  |  | @Override |
| Expand Down | |  |

3 changes: 2 additions & 1 deletion

3
[...erver-netty/src/main/java/io/micronaut/http/server/netty/binders/PublisherBodyBinder.java](#diff-f38a3b7f216b8754ad50e45527ddb7d2fad41d37fa31936e2e819fa12b30a758 "http-server-netty/src/main/java/io/micronaut/http/server/netty/binders/PublisherBodyBinder.java")

Show comments

[View file](/micronaut-projects/micronaut-core/blob/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3/http-server-netty/src/main/java/io/micronaut/http/server/netty/binders/PublisherBodyBinder.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -54,6 +54,7 @@ |
|  |  | public class PublisherBodyBinder extends DefaultBodyAnnotationBinder<Publisher> implements NonBlockingBodyArgumentBinder<Publisher> { |
|  |  |  |
|  |  | private static final Logger LOG = LoggerFactory.getLogger(NettyHttpServer.class); |
|  |  | private static final Argument<Publisher> TYPE = Argument.of(Publisher.class); |
|  |  |  |
|  |  | private final BeanLocator beanLocator; |
|  |  | private final HttpServerConfiguration httpServerConfiguration; |
| Expand All | | @@ -71,7 +72,7 @@ public PublisherBodyBinder(ConversionService conversionService, BeanLocator bean |
|  |  |  |
|  |  | @Override |
|  |  | public Argument<Publisher> argumentType() { |
|  |  | return Argument.of(Publisher.class); |
|  |  | return TYPE; |
|  |  | } |
|  |  |  |
|  |  | @Override |
| Expand Down | |  |

19 changes: 10 additions & 9 deletions

19
[http-server-netty/src/test/groovy/io/micronaut/http/server/netty/cors/CorsFilterSpec.groovy](#diff-2434f3d2cd81009a815df4306cf69e0147ae32204880e65168a28951a68fea0c "http-server-netty/src/test/groovy/io/micronaut/http/server/netty/cors/CorsFilterSpec.groovy")

Show comments

[View file](/micronaut-projects/micronaut-core/blob/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3/http-server-netty/src/test/groovy/io/micronaut/http/server/netty/cors/CorsFilterSpec.groovy)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -15,6 +15,7 @@ |
|  |  | \*/ |
|  |  | package io.micronaut.http.server.netty.cors |
|  |  |  |
|  |  | import io.micronaut.core.convert.ConversionContext |
|  |  | import io.micronaut.core.type.Argument |
|  |  | import io.micronaut.http.HttpHeaders |
|  |  | import io.micronaut.http.HttpMethod |
| Expand Down  Expand Up | | @@ -146,7 +147,7 @@ class CorsFilterSpec extends Specification { |
|  |  | 2 \* headers.getOrigin() >> Optional.of('http://www.foo.com') |
|  |  | 1 \* request.getMethod() >> HttpMethod.GET |
|  |  | !result.isPresent() |
|  |  | 0 \* headers.get(ACCESS\_CONTROL\_REQUEST\_HEADERS, Argument.of(List,String)) |
|  |  | 0 \* headers.get(ACCESS\_CONTROL\_REQUEST\_HEADERS, ConversionContext.of(Argument.of(List,String))) |
|  |  | } |
|  |  |  |
|  |  | void "test preflight handleRequest with disallowed header"() { |
| Expand All | | @@ -170,8 +171,8 @@ class CorsFilterSpec extends Specification { |
|  |  |  |
|  |  | then: "the request is rejected because bar is not allowed" |
|  |  | 2 \* headers.getOrigin() >> Optional.of('http://www.foo.com') |
|  |  | 1 \* headers.getFirst(ACCESS\_CONTROL\_REQUEST\_METHOD, HttpMethod.class) >> Optional.of(HttpMethod.GET) |
|  |  | 1 \* headers.get(ACCESS\_CONTROL\_REQUEST\_HEADERS, Argument.of(List,String)) >> ['foo', 'bar'] |
|  |  | 1 \* headers.getFirst(ACCESS\_CONTROL\_REQUEST\_METHOD, ConversionContext.of(HttpMethod.class)) >> Optional.of(HttpMethod.GET) |
|  |  | 1 \* headers.get(ACCESS\_CONTROL\_REQUEST\_HEADERS, ConversionContext.of(Argument.of(List,String))) >> ['foo', 'bar'] |
|  |  | result.get().status == HttpStatus.FORBIDDEN |
|  |  | } |
|  |  |  |
| Expand All | | @@ -196,8 +197,8 @@ class CorsFilterSpec extends Specification { |
|  |  |  |
|  |  | then: "the request is successful" |
|  |  | 4 \* headers.getOrigin() >> Optional.of('http://www.foo.com') |
|  |  | 2 \* headers.getFirst(ACCESS\_CONTROL\_REQUEST\_METHOD, HttpMethod.class) >> Optional.of(HttpMethod.GET) |
|  |  | 2 \* headers.get(ACCESS\_CONTROL\_REQUEST\_HEADERS, Argument.of(List,String)) >> Optional.of(['foo']) |
|  |  | 2 \* headers.getFirst(ACCESS\_CONTROL\_REQUEST\_METHOD, ConversionContext.of(HttpMethod.class)) >> Optional.of(HttpMethod.GET) |
|  |  | 2 \* headers.get(ACCESS\_CONTROL\_REQUEST\_HEADERS, ConversionContext.of(Argument.of(List,String))) >> Optional.of(['foo']) |
|  |  | result.get().status == HttpStatus.OK |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -274,8 +275,8 @@ class CorsFilterSpec extends Specification { |
|  |  | HttpResponse response = corsHandler.handleRequest(request).get() |
|  |  |  |
|  |  | then: "the response is not modified" |
|  |  | 2 \* headers.get(ACCESS\_CONTROL\_REQUEST\_HEADERS, Argument.of(List,String)) >> Optional.of(['X-Header', 'Y-Header']) |
|  |  | 1 \* headers.getFirst(ACCESS\_CONTROL\_REQUEST\_METHOD, HttpMethod.class) >> Optional.of(HttpMethod.GET) |
|  |  | 2 \* headers.get(ACCESS\_CONTROL\_REQUEST\_HEADERS, ConversionContext.of(Argument.of(List,String))) >> Optional.of(['X-Header', 'Y-Header']) |
|  |  | 1 \* headers.getFirst(ACCESS\_CONTROL\_REQUEST\_METHOD, ConversionContext.of(HttpMethod.class)) >> Optional.of(HttpMethod.GET) |
|  |  | response.getHeaders().get(ACCESS\_CONTROL\_ALLOW\_METHODS) == 'GET' |
|  |  | response.getHeaders().get(ACCESS\_CONTROL\_ALLOW\_ORIGIN) == 'http://www.foo.com' // The origin is echo'd |
|  |  | response.getHeaders().get(VARY) == 'Origin' // The vary header is set |
| Expand Down  Expand Up | | @@ -305,8 +306,8 @@ class CorsFilterSpec extends Specification { |
|  |  | HttpResponse response = corsHandler.handleRequest(request).get() |
|  |  |  |
|  |  | then: "the response is not modified" |
|  |  | 2 \* headers.get(ACCESS\_CONTROL\_REQUEST\_HEADERS, Argument.of(List,String)) >> Optional.of(['X-Header', 'Y-Header']) |
|  |  | 1 \* headers.getFirst(ACCESS\_CONTROL\_REQUEST\_METHOD, HttpMethod.class) >> Optional.of(HttpMethod.GET) |
|  |  | 2 \* headers.get(ACCESS\_CONTROL\_REQUEST\_HEADERS, ConversionContext.of(Argument.of(List,String))) >> Optional.of(['X-Header', 'Y-Header']) |
|  |  | 1 \* headers.getFirst(ACCESS\_CONTROL\_REQUEST\_METHOD, ConversionContext.of(HttpMethod.class)) >> Optional.of(HttpMethod.GET) |
|  |  | response.getHeaders().get(ACCESS\_CONTROL\_ALLOW\_METHODS) == 'GET' |
|  |  | response.getHeaders().get(ACCESS\_CONTROL\_ALLOW\_ORIGIN) == 'http://www.foo.com' // The origin is echo'd |
|  |  | response.getHeaders().get(VARY) == 'Origin' // The vary header is set |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `b8ec32c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicronaut-projects%2Fmicronaut-core%2Fcommit%2Fb8ec32c311689667c69ae7d9f9c3b3a8abc96fe3) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_69fda209_20250115_094446.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicronaut-projects%2Fmicronaut-core%2Fsecurity%2Fadvisories%2FGHSA-2457-2263-mm9f)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicronaut-projects%2Fmicronaut-core%2Fsecurity%2Fadvisories%2FGHSA-2457-2263-mm9f)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=micronaut-projects%2Fmicronaut-core)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[micronaut-projects](/micronaut-projects)
/
**[micronaut-core](/micronaut-projects/micronaut-core)**
Public

* [Notifications](/login?return_to=%2Fmicronaut-projects%2Fmicronaut-core) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2Fmicronaut-projects%2Fmicronaut-core)
* [Star
   6.1k](/login?return_to=%2Fmicronaut-projects%2Fmicronaut-core)

* [Code](/micronaut-projects/micronaut-core)
* [Issues
  697](/micronaut-projects/micronaut-core/issues)
* [Pull requests
  88](/micronaut-projects/micronaut-core/pulls)
* [Discussions](/micronaut-projects/micronaut-core/discussions)
* [Actions](/micronaut-projects/micronaut-core/actions)
* [Projects
  0](/micronaut-projects/micronaut-core/projects)
* [Wiki](/micronaut-projects/micronaut-core/wiki)
* [Security](/micronaut-projects/micronaut-core/security)
* [Insights](/micronaut-projects/micronaut-core/pulse)

Additional navigation options

* [Code](/micronaut-projects/micronaut-core)
* [Issues](/micronaut-projects/micronaut-core/issues)
* [Pull requests](/micronaut-projects/micronaut-core/pulls)
* [Discussions](/micronaut-projects/micronaut-core/discussions)
* [Actions](/micronaut-projects/micronaut-core/actions)
* [Projects](/micronaut-projects/micronaut-core/projects)
* [Wiki](/micronaut-projects/micronaut-core/wiki)
* [Security](/micronaut-projects/micronaut-core/security)
* [Insights](/micronaut-projects/micronaut-core/pulse)

# DoS attack via array heap polution when sending invalid content type header

High

[jameskleeh](/jameskleeh)
published
GHSA-2457-2263-mm9f
Jan 18, 2022

## Package

maven

io.micronaut:micronaut-http
([Maven](/advisories?query=ecosystem%3Amaven))

## Affected versions

< 1.2.7

## Patched versions

3.2.7

## Description

### Impact

Sending an invalid Content Type header leads to memory leak in `DefaultArgumentConversionContext` as this type is erroneously used in static state.

### Patches

The problem is patched in Micronaut 3.2.7 and above.

### Workarounds

The default content type binder can be replaced in an existing Micronaut application to mitigate the issue:

```
package example;

import java.util.List;
import io.micronaut.context.annotation.Replaces;
import io.micronaut.core.convert.ConversionService;
import io.micronaut.http.MediaType;
import io.micronaut.http.bind.DefaultRequestBinderRegistry;
import io.micronaut.http.bind.binders.RequestArgumentBinder;
import jakarta.inject.Singleton;

@Singleton
@Replaces(DefaultRequestBinderRegistry.class)
class FixedRequestBinderRegistry extends DefaultRequestBinderRegistry {

    public FixedRequestBinderRegistry(ConversionService conversionService,
                                      List<RequestArgumentBinder> binders) {
        super(conversionService, binders);
    }

    @Override
    protected void registerDefaultConverters(ConversionService<?> conversionService) {
        super.registerDefaultConverters(conversionService);
        conversionService.addConverter(CharSequence.class, MediaType.class, charSequence -> {
            try {
                return MediaType.of(charSequence);
            } catch (IllegalArgumentException e) {
                return null;
            }
        });
    }
}
```
### References

Commit that introduced the vulnerability [b8ec32c](https://github.com/micronaut-projects/micronaut-core/commit/b8ec32c311689667c69ae7d9f9c3b3a8abc96fe3)

### For more information

If you have any questions or comments about this advisory:

* Open an issue in [Micronaut Core](https://github.com/micronaut-projects/micronaut-core/issues)
* Email us at info@micronaut.io

### Severity

High

### CVE ID

CVE-2022-21700

### Weaknesses

No CWEs

### Credits

* [![@chrischiappe](https://avatars.githubusercontent.com/u/61155993?s=40&v=4)](/chrischiappe)
  [chrischiappe](/chrischiappe)
  Analyst
* [![@larrycarasco](https://avatars.githubusercontent.com/u/72867672?s=40&v=4)](/larrycarasco)
  [larrycarasco](/larrycarasco)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


