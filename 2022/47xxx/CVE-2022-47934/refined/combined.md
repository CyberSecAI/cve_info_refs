=== Content from github.com_651808a3_20250114_180509.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrave%2Fbrave-core%2Fcommit%2F82d8e39043e691e0492519126437275511ee87e8)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrave%2Fbrave-core%2Fcommit%2F82d8e39043e691e0492519126437275511ee87e8)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=brave%2Fbrave-core)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[brave](/brave)
/
**[brave-core](/brave/brave-core)**
Public

* [Notifications](/login?return_to=%2Fbrave%2Fbrave-core) You must be signed in to change notification settings
* [Fork
  894](/login?return_to=%2Fbrave%2Fbrave-core)
* [Star
   2.5k](/login?return_to=%2Fbrave%2Fbrave-core)

* [Code](/brave/brave-core)
* [Pull requests
  230](/brave/brave-core/pulls)
* [Actions](/brave/brave-core/actions)
* [Security](/brave/brave-core/security)
* [Insights](/brave/brave-core/pulse)

Additional navigation options

* [Code](/brave/brave-core)
* [Pull requests](/brave/brave-core/pulls)
* [Actions](/brave/brave-core/actions)
* [Security](/brave/brave-core/security)
* [Insights](/brave/brave-core/pulse)

## Commit

[Permalink](/brave/brave-core/commit/82d8e39043e691e0492519126437275511ee87e8)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#14484](https://github.com/brave/brave-core/pull/14484) from brave/pr14313\_brave\_24211\_1.43.x

[Browse files](/brave/brave-core/tree/82d8e39043e691e0492519126437275511ee87e8)
Browse the repository at this point in the history

```
Do not commit subframe navigations for ipfs (uplift to 1.43.x)
```

* Loading branch information

[![@LaurenWags](https://avatars.githubusercontent.com/u/28145373?s=40&v=4)](/LaurenWags)

[LaurenWags](/brave/brave-core/commits?author=LaurenWags "View all commits by LaurenWags")
authored
Aug 8, 2022

2 parents
[53d4128](/brave/brave-core/commit/53d4128e0daf67488e0d937f4b88eb5db2e0c274)
+
[213f1ea](/brave/brave-core/commit/213f1ea364ff3d6b18209a4d350d27acc262fc7e)

commit 82d8e39

 Show file tree

 Hide file tree

Showing
**7 changed files**
with
**212 additions**
and
**14 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* browser

  + browser/brave\_content\_browser\_client.cc
    [brave\_content\_browser\_client.cc](#diff-594631d3a40b383b831cd6c6c401ff278c4b259ec7f1b321808e868ccfb06f2b)
  + ipfs

    - browser/ipfs/ipfs\_subframe\_navigation\_throttle.cc
      [ipfs\_subframe\_navigation\_throttle.cc](#diff-b6771227d31827ef075b16abe46d8c5be4b4342e85f2edd01ddff69631fbc512)
    - browser/ipfs/ipfs\_subframe\_navigation\_throttle.h
      [ipfs\_subframe\_navigation\_throttle.h](#diff-8d0050608fbf409a03a2f3c3c844a1fa749d888a538bd8cdaabfef3332d52852)
    - browser/ipfs/sources.gni
      [sources.gni](#diff-5a1def418fe4a60c244b8b3e9f355aebf361c47a4d811539c324de5972648f7d)
    - test

      * browser/ipfs/test/ipfs\_service\_browsertest.cc
        [ipfs\_service\_browsertest.cc](#diff-19fd6b7d10b9240708e2b78d2a22e0c20277440295b2ee8592f28d23c7467fae)
  + net

    - browser/net/ipfs\_redirect\_network\_delegate\_helper.cc
      [ipfs\_redirect\_network\_delegate\_helper.cc](#diff-5a208de77796edde3a97ada956a4cd34b8b55426786d2920c14931553653ed2d)
    - browser/net/ipfs\_redirect\_network\_delegate\_helper\_unittest.cc
      [ipfs\_redirect\_network\_delegate\_helper\_unittest.cc](#diff-974e62b1d9bf2db1c12b395b9f0f78a1a018939e599971fcb6834c7f6c67fc5a)

## There are no files selected for viewing

4 changes: 4 additions & 0 deletions

4
[browser/brave\_content\_browser\_client.cc](#diff-594631d3a40b383b831cd6c6c401ff278c4b259ec7f1b321808e868ccfb06f2b "browser/brave_content_browser_client.cc")

Show comments

[View file](/brave/brave-core/blob/82d8e39043e691e0492519126437275511ee87e8/browser/brave_content_browser_client.cc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -139,6 +139,7 @@ using extensions::ChromeContentBrowserClientExtensionsPart; |
|  |  | #if BUILDFLAG(ENABLE\_IPFS) |
|  |  | #include "brave/browser/ipfs/content\_browser\_client\_helper.h" |
|  |  | #include "brave/browser/ipfs/ipfs\_service\_factory.h" |
|  |  | #include "brave/browser/ipfs/ipfs\_subframe\_navigation\_throttle.h" |
|  |  | #include "brave/components/ipfs/ipfs\_constants.h" |
|  |  | #include "brave/components/ipfs/ipfs\_navigation\_throttle.h" |
|  |  | #endif |
| Expand Down  Expand Up | | @@ -965,6 +966,9 @@ BraveContentBrowserClient::CreateThrottlesForNavigation( |
|  |  | #endif |
|  |  |  |
|  |  | #if BUILDFLAG(ENABLE\_IPFS) |
|  |  | throttles.insert( |
|  |  | throttles.begin(), |
|  |  | ipfs::IpfsSubframeNavigationThrottle::CreateThrottleFor(handle)); |
|  |  | std::unique\_ptr<content::NavigationThrottle> ipfs\_navigation\_throttle = |
|  |  | ipfs::IpfsNavigationThrottle::MaybeCreateThrottleFor( |
|  |  | handle, ipfs::IpfsServiceFactory::GetForContext(context), |
| Expand Down | |  |

43 changes: 43 additions & 0 deletions

43
[browser/ipfs/ipfs\_subframe\_navigation\_throttle.cc](#diff-b6771227d31827ef075b16abe46d8c5be4b4342e85f2edd01ddff69631fbc512 "browser/ipfs/ipfs_subframe_navigation_throttle.cc")

Show comments

[View file](/brave/brave-core/blob/82d8e39043e691e0492519126437275511ee87e8/browser/ipfs/ipfs_subframe_navigation_throttle.cc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,43 @@ |
|  |  | /\* Copyright (c) 2022 The Brave Authors. All rights reserved. |
|  |  | \* This Source Code Form is subject to the terms of the Mozilla Public |
|  |  | \* License, v. 2.0. If a copy of the MPL was not distributed with this file, |
|  |  | \* You can obtain one at http://mozilla.org/MPL/2.0/. \*/ |
|  |  |  |
|  |  | #include "brave/browser/ipfs/ipfs\_subframe\_navigation\_throttle.h" |
|  |  |  |
|  |  | #include "brave/components/ipfs/ipfs\_constants.h" |
|  |  |  |
|  |  | namespace ipfs { |
|  |  |  |
|  |  | // static |
|  |  | std::unique\_ptr<IpfsSubframeNavigationThrottle> |
|  |  | IpfsSubframeNavigationThrottle::CreateThrottleFor( |
|  |  | content::NavigationHandle\* navigation\_handle) { |
|  |  | return std::make\_unique<IpfsSubframeNavigationThrottle>(navigation\_handle); |
|  |  | } |
|  |  |  |
|  |  | IpfsSubframeNavigationThrottle::IpfsSubframeNavigationThrottle( |
|  |  | content::NavigationHandle\* navigation\_handle) |
|  |  | : content::NavigationThrottle(navigation\_handle) {} |
|  |  |  |
|  |  | IpfsSubframeNavigationThrottle::~IpfsSubframeNavigationThrottle() {} |
|  |  |  |
|  |  | // content::NavigationThrottle implementation: |
|  |  | content::NavigationThrottle::ThrottleCheckResult |
|  |  | IpfsSubframeNavigationThrottle::WillFailRequest() { |
|  |  | // Ignores subframe ipfs:// navigation. It is ok to commit toplevel |
|  |  | // navigation. |
|  |  | if (!navigation\_handle()->IsInMainFrame() && |
|  |  | (navigation\_handle()->GetURL().SchemeIs(ipfs::kIPFSScheme) || |
|  |  | navigation\_handle()->GetURL().SchemeIs(ipfs::kIPNSScheme))) { |
|  |  | return {content::NavigationThrottle::CANCEL\_AND\_IGNORE, |
|  |  | navigation\_handle()->GetNetErrorCode()}; |
|  |  | } |
|  |  | return content::NavigationThrottle::PROCEED; |
|  |  | } |
|  |  |  |
|  |  | const char\* IpfsSubframeNavigationThrottle::GetNameForLogging() { |
|  |  | return "IpfsSubframeNavigationThrottle"; |
|  |  | } |
|  |  |  |
|  |  | } // namespace ipfs |

42 changes: 42 additions & 0 deletions

42
[browser/ipfs/ipfs\_subframe\_navigation\_throttle.h](#diff-8d0050608fbf409a03a2f3c3c844a1fa749d888a538bd8cdaabfef3332d52852 "browser/ipfs/ipfs_subframe_navigation_throttle.h")

Show comments

[View file](/brave/brave-core/blob/82d8e39043e691e0492519126437275511ee87e8/browser/ipfs/ipfs_subframe_navigation_throttle.h)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,42 @@ |
|  |  | /\* Copyright (c) 2022 The Brave Authors. All rights reserved. |
|  |  | \* This Source Code Form is subject to the terms of the Mozilla Public |
|  |  | \* License, v. 2.0. If a copy of the MPL was not distributed with this file, |
|  |  | \* You can obtain one at http://mozilla.org/MPL/2.0/. \*/ |
|  |  |  |
|  |  | #ifndef BRAVE\_BROWSER\_IPFS\_IPFS\_SUBFRAME\_NAVIGATION\_THROTTLE\_H\_ |
|  |  | #define BRAVE\_BROWSER\_IPFS\_IPFS\_SUBFRAME\_NAVIGATION\_THROTTLE\_H\_ |
|  |  |  |
|  |  | #include <memory> |
|  |  |  |
|  |  | #include "content/public/browser/navigation\_handle.h" |
|  |  | #include "content/public/browser/navigation\_throttle.h" |
|  |  |  |
|  |  | namespace ipfs { |
|  |  |  |
|  |  | // Prevents commiting of subframe IPFS navigations. |
|  |  | // IPFS urls must be changed to proper gateway urls. |
|  |  | // See ipfs\_redirect\_network\_delegate\_helper.h for example. |
|  |  | class IpfsSubframeNavigationThrottle : public content::NavigationThrottle { |
|  |  | public: |
|  |  | static std::unique\_ptr<IpfsSubframeNavigationThrottle> CreateThrottleFor( |
|  |  | content::NavigationHandle\* navigation\_handle); |
|  |  |  |
|  |  | explicit IpfsSubframeNavigationThrottle( |
|  |  | content::NavigationHandle\* navigation\_handle); |
|  |  | ~IpfsSubframeNavigationThrottle() override; |
|  |  |  |
|  |  | IpfsSubframeNavigationThrottle(const IpfsSubframeNavigationThrottle&) = |
|  |  | delete; |
|  |  | IpfsSubframeNavigationThrottle& operator=( |
|  |  | const IpfsSubframeNavigationThrottle&) = delete; |
|  |  |  |
|  |  | // content::NavigationThrottle implementation: |
|  |  | // This is called before navigation commits with error. |
|  |  | // Here we can cancel subframe navigation for ipfs:// urls. |
|  |  | content::NavigationThrottle::ThrottleCheckResult WillFailRequest() override; |
|  |  | const char\* GetNameForLogging() override; |
|  |  | }; |
|  |  |  |
|  |  | } // namespace ipfs |
|  |  |  |
|  |  | #endif // BRAVE\_BROWSER\_IPFS\_IPFS\_SUBFRAME\_NAVIGATION\_THROTTLE\_H\_ |

2 changes: 2 additions & 0 deletions

2
[browser/ipfs/sources.gni](#diff-5a1def418fe4a60c244b8b3e9f355aebf361c47a4d811539c324de5972648f7d "browser/ipfs/sources.gni")

Show comments

[View file](/brave/brave-core/blob/82d8e39043e691e0492519126437275511ee87e8/browser/ipfs/sources.gni)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -25,6 +25,8 @@ if (enable\_ipfs) { |
|  |  | "//brave/browser/ipfs/ipfs\_host\_resolver.h", |
|  |  | "//brave/browser/ipfs/ipfs\_service\_factory.cc", |
|  |  | "//brave/browser/ipfs/ipfs\_service\_factory.h", |
|  |  | "//brave/browser/ipfs/ipfs\_subframe\_navigation\_throttle.cc", |
|  |  | "//brave/browser/ipfs/ipfs\_subframe\_navigation\_throttle.h", |
|  |  | "//brave/browser/ipfs/ipfs\_tab\_helper.cc", |
|  |  | "//brave/browser/ipfs/ipfs\_tab\_helper.h", |
|  |  | ] |
| Expand Down | |  |

112 changes: 100 additions & 12 deletions

112
[browser/ipfs/test/ipfs\_service\_browsertest.cc](#diff-19fd6b7d10b9240708e2b78d2a22e0c20277440295b2ee8592f28d23c7467fae "browser/ipfs/test/ipfs_service_browsertest.cc")

Show comments

[View file](/brave/brave-core/blob/82d8e39043e691e0492519126437275511ee87e8/browser/ipfs/test/ipfs_service_browsertest.cc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -431,6 +431,15 @@ class IpfsServiceBrowserTest : public InProcessBrowserTest { |
|  |  | http\_response->set\_content( |
|  |  | "<iframe " |
|  |  | "src='ipfs://Qmc2JTQo4iXf24g98otZmGFQq176eQ2Cdbb88qA5ToMEvC/2'>" |
|  |  | "</iframe>" |
|  |  | "<iframe " |
|  |  | "src='ipfs://10.10.1.1'>" |
|  |  | "</iframe>" |
|  |  | "<iframe " |
|  |  | "src='ipns://10.10.1.1'>" |
|  |  | "</iframe>" |
|  |  | "<iframe " |
|  |  | "src='ipfs://'>" |
|  |  | "</iframe>"); |
|  |  | http\_response->set\_code(net::HTTP\_OK); |
|  |  | } else if (request\_path == |
| Expand Down  Expand Up | | @@ -840,8 +849,49 @@ IN\_PROC\_BROWSER\_TEST\_F(IpfsServiceBrowserTest, CanFetchIPFSResourcesFromIPFS) { |
|  |  | EXPECT\_EQ(base::Value(true), got\_fetch.value); |
|  |  | } |
|  |  |  |
|  |  | // Make sure an <iframe src="ipfs://..."> cannot load within http:// scheme in |
|  |  | // incognito |
|  |  | IN\_PROC\_BROWSER\_TEST\_F(IpfsServiceBrowserTest, |
|  |  | CannotLoadIframeFromHTTP\_Incognito) { |
|  |  | browser()->profile()->GetPrefs()->SetInteger( |
|  |  | kIPFSResolveMethod, |
|  |  | static\_cast<int>(ipfs::IPFSResolveMethodTypes::IPFS\_LOCAL)); |
|  |  |  |
|  |  | ResetTestServer( |
|  |  | base::BindRepeating(&IpfsServiceBrowserTest::HandleEmbeddedSrvrRequest, |
|  |  | base::Unretained(this))); |
|  |  | SetIPFSDefaultGatewayForTest(GetURL("b.com", "/")); |
|  |  | Browser\* private\_browser = CreateIncognitoBrowser(nullptr); |
|  |  |  |
|  |  | ASSERT\_TRUE(ui\_test\_utils::NavigateToURL(private\_browser, |
|  |  | GetURL("b.com", "/iframe.html"))); |
|  |  | content::WebContents\* contents = |
|  |  | private\_browser->tab\_strip\_model()->GetActiveWebContents(); |
|  |  |  |
|  |  | int child\_index = 0; |
|  |  | while (auto\* child\_frame = |
|  |  | ChildFrameAt(contents->GetMainFrame(), child\_index++)) { |
|  |  | auto location = |
|  |  | EvalJs(child\_frame, |
|  |  | "const timer = setInterval(function () {" |
|  |  | " if (document.readyState == 'complete') {" |
|  |  | " clearInterval(timer);" |
|  |  | " window.domAutomationController.send(window.location.href);" |
|  |  | " }" |
|  |  | "}, 100);", |
|  |  | content::EXECUTE\_SCRIPT\_USE\_MANUAL\_REPLY); |
|  |  |  |
|  |  | ASSERT\_TRUE(location.error.empty()); |
|  |  | EXPECT\_EQ(base::Value("chrome-error://chromewebdata/"), location.value); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // Make sure an <iframe src="ipfs://..."> cannot load within http:// scheme |
|  |  | IN\_PROC\_BROWSER\_TEST\_F(IpfsServiceBrowserTest, CannotLoadIframeFromHTTP) { |
|  |  | browser()->profile()->GetPrefs()->SetInteger( |
|  |  | kIPFSResolveMethod, |
|  |  | static\_cast<int>(ipfs::IPFSResolveMethodTypes::IPFS\_ASK)); |
|  |  |  |
|  |  | ResetTestServer( |
|  |  | base::BindRepeating(&IpfsServiceBrowserTest::HandleEmbeddedSrvrRequest, |
|  |  | base::Unretained(this))); |
| Expand All | | @@ -851,19 +901,57 @@ IN\_PROC\_BROWSER\_TEST\_F(IpfsServiceBrowserTest, CannotLoadIframeFromHTTP) { |
|  |  | content::WebContents\* contents = |
|  |  | browser()->tab\_strip\_model()->GetActiveWebContents(); |
|  |  |  |
|  |  | auto\* child\_frame = ChildFrameAt(contents->GetMainFrame(), 0); |
|  |  | auto location = |
|  |  | EvalJs(child\_frame, |
|  |  | "const timer = setInterval(function () {" |
|  |  | " if (document.readyState == 'complete') {" |
|  |  | " clearInterval(timer);" |
|  |  | " window.domAutomationController.send(window.location.href);" |
|  |  | " }" |
|  |  | "}, 100);", |
|  |  | content::EXECUTE\_SCRIPT\_USE\_MANUAL\_REPLY); |
|  |  | int child\_index = 0; |
|  |  | while (auto\* child\_frame = |
|  |  | ChildFrameAt(contents->GetMainFrame(), child\_index++)) { |
|  |  | auto location = |
|  |  | EvalJs(child\_frame, |
|  |  | "const timer = setInterval(function () {" |
|  |  | " if (document.readyState == 'complete') {" |
|  |  | " clearInterval(timer);" |
|  |  | " window.domAutomationController.send(window.location.href);" |
|  |  | " }" |
|  |  | "}, 100);", |
|  |  | content::EXECUTE\_SCRIPT\_USE\_MANUAL\_REPLY); |
|  |  |  |
|  |  | ASSERT\_TRUE(location.error.empty()); |
|  |  | EXPECT\_EQ(base::Value("chrome-error://chromewebdata/"), location.value); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // Make sure an <iframe src="ipfs://..."> cannot load within http:// scheme when |
|  |  | // ipfs is disabled |
|  |  | IN\_PROC\_BROWSER\_TEST\_F(IpfsServiceBrowserTest, |
|  |  | CannotLoadIframeFromHTTP\_IPFSDisabled) { |
|  |  | browser()->profile()->GetPrefs()->SetInteger( |
|  |  | kIPFSResolveMethod, |
|  |  | static\_cast<int>(ipfs::IPFSResolveMethodTypes::IPFS\_DISABLED)); |
|  |  |  |
|  |  | ASSERT\_TRUE(location.error.empty()); |
|  |  | EXPECT\_EQ(base::Value("chrome-error://chromewebdata/"), location.value); |
|  |  | ResetTestServer( |
|  |  | base::BindRepeating(&IpfsServiceBrowserTest::HandleEmbeddedSrvrRequest, |
|  |  | base::Unretained(this))); |
|  |  | SetIPFSDefaultGatewayForTest(GetURL("b.com", "/")); |
|  |  | ASSERT\_TRUE( |
|  |  | ui\_test\_utils::NavigateToURL(browser(), GetURL("b.com", "/iframe.html"))); |
|  |  | content::WebContents\* contents = |
|  |  | browser()->tab\_strip\_model()->GetActiveWebContents(); |
|  |  |  |
|  |  | int child\_index = 0; |
|  |  | while (auto\* child\_frame = |
|  |  | ChildFrameAt(contents->GetMainFrame(), child\_index++)) { |
|  |  | auto location = |
|  |  | EvalJs(child\_frame, |
|  |  | "const timer = setInterval(function () {" |
|  |  | " if (document.readyState == 'complete') {" |
|  |  | " clearInterval(timer);" |
|  |  | " window.domAutomationController.send(window.location.href);" |
|  |  | " }" |
|  |  | "}, 100);", |
|  |  | content::EXECUTE\_SCRIPT\_USE\_MANUAL\_REPLY); |
|  |  |  |
|  |  | ASSERT\_TRUE(location.error.empty()); |
|  |  | EXPECT\_EQ(base::Value("chrome-error://chromewebdata/"), location.value); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // Make sure an <iframe src="ipfs://..."> can load within another ipfs:// scheme |
| Expand Down | |  |

5 changes: 4 additions & 1 deletion

5
[browser/net/ipfs\_redirect\_network\_delegate\_helper.cc](#diff-5a208de77796edde3a97ada956a4cd34b8b55426786d2920c14931553653ed2d "browser/net/ipfs_redirect_network_delegate_helper.cc")

Show comments

[View file](/brave/brave-core/blob/82d8e39043e691e0492519126437275511ee87e8/browser/net/ipfs_redirect_network_delegate_helper.cc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -40,7 +40,10 @@ int OnBeforeURLRequest\_IPFSRedirectWork( |
|  |  | if (has\_ipfs\_scheme && !brave::IsRegularProfile(ctx->browser\_context)) { |
|  |  | // Don't allow IPFS requests without translation of IPFS urls. |
|  |  | ctx->blocked\_by = brave::kOtherBlocked; |
|  |  | return net::ERR\_INCOGNITO\_IPFS\_NOT\_ALLOWED; |
|  |  | // Only net::OK navigation will be actually blocked without commit. |
|  |  | return ctx->resource\_type == blink::mojom::ResourceType::kMainFrame |
|  |  | ? net::ERR\_INCOGNITO\_IPFS\_NOT\_ALLOWED |
|  |  | : net::OK; |
|  |  | } |
|  |  |  |
|  |  | GURL new\_url; |
| Expand Down | |  |

18 changes: 17 additions & 1 deletion

18
[browser/net/ipfs\_redirect\_network\_delegate\_helper\_unittest.cc](#diff-974e62b1d9bf2db1c12b395b9f0f78a1a018939e599971fcb6834c7f6c67fc5a "browser/net/ipfs_redirect_network_delegate_helper_unittest.cc")

Show comments

[View file](/brave/brave-core/blob/82d8e39043e691e0492519126437275511ee87e8/browser/net/ipfs_redirect_network_delegate_helper_unittest.cc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -108,7 +108,7 @@ TEST\_F(IPFSRedirectNetworkDelegateHelperTest, |
|  |  |  |
|  |  | GURL url("ipfs://QmfM2r8seH2GiRaC4esTjeraXEachRt8ZsSeGaWTPLyMoG"); |
|  |  | auto brave\_request\_info = std::make\_shared<brave::BraveRequestInfo>(url); |
|  |  | brave\_request\_info->resource\_type = blink::mojom::ResourceType::kSubFrame; |
|  |  | brave\_request\_info->resource\_type = blink::mojom::ResourceType::kMainFrame; |
|  |  | brave\_request\_info->browser\_context = profile()->GetOffTheRecordProfile( |
|  |  | Profile::OTRProfileID::CreateUnique("incognito"), true); |
|  |  | int rc = ipfs::OnBeforeURLRequest\_IPFSRedirectWork(brave::ResponseCallback(), |
| Expand All | | @@ -117,6 +117,22 @@ TEST\_F(IPFSRedirectNetworkDelegateHelperTest, |
|  |  | EXPECT\_EQ(brave\_request\_info->blocked\_by, brave::kOtherBlocked); |
|  |  | } |
|  |  |  |
|  |  | TEST\_F(IPFSRedirectNetworkDelegateHelperTest, |
|  |  | SubFrameRequestDisabledWhenIPFSDisabled\_Incognito\_Subframe) { |
|  |  | profile()->GetPrefs()->SetInteger( |
|  |  | kIPFSResolveMethod, static\_cast<int>(IPFSResolveMethodTypes::IPFS\_LOCAL)); |
|  |  |  |
|  |  | GURL url("ipfs://QmfM2r8seH2GiRaC4esTjeraXEachRt8ZsSeGaWTPLyMoG"); |
|  |  | auto brave\_request\_info = std::make\_shared<brave::BraveRequestInfo>(url); |
|  |  | brave\_request\_info->resource\_type = blink::mojom::ResourceType::kSubFrame; |
|  |  | brave\_request\_info->browser\_context = profile()->GetOffTheRecordProfile( |
|  |  | Profile::OTRProfileID::CreateUnique("incognito"), true); |
|  |  | int rc = ipfs::OnBeforeURLRequest\_IPFSRedirectWork(brave::ResponseCallback(), |
|  |  | brave\_request\_info); |
|  |  | EXPECT\_EQ(rc, net::OK); |
|  |  | EXPECT\_EQ(brave\_request\_info->blocked\_by, brave::kOtherBlocked); |
|  |  | } |
|  |  |  |
|  |  | TEST\_F(IPFSRedirectNetworkDelegateHelperTest, |
|  |  | LoadDisabledWhenIPFS\_WhenWrongIPFSUrl) { |
|  |  | profile()->GetPrefs()->SetInteger( |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `82d8e39`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrave%2Fbrave-core%2Fcommit%2F82d8e39043e691e0492519126437275511ee87e8) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_3b1d933b_20250114_180507.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrave%2Fbrave-browser%2Fissues%2F24211)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrave%2Fbrave-browser%2Fissues%2F24211)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=brave%2Fbrave-browser)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[brave](/brave)
/
**[brave-browser](/brave/brave-browser)**
Public

* [Notifications](/login?return_to=%2Fbrave%2Fbrave-browser) You must be signed in to change notification settings
* [Fork
  2.4k](/login?return_to=%2Fbrave%2Fbrave-browser)
* [Star
   18.3k](/login?return_to=%2Fbrave%2Fbrave-browser)

* [Code](/brave/brave-browser)
* [Issues
  5k+](/brave/brave-browser/issues)
* [Pull requests
  0](/brave/brave-browser/pulls)
* [Actions](/brave/brave-browser/actions)
* [Projects
  13](/brave/brave-browser/projects)
* [Wiki](/brave/brave-browser/wiki)
* [Security](/brave/brave-browser/security)
* [Insights](/brave/brave-browser/pulse)

Additional navigation options

* [Code](/brave/brave-browser)
* [Issues](/brave/brave-browser/issues)
* [Pull requests](/brave/brave-browser/pulls)
* [Actions](/brave/brave-browser/actions)
* [Projects](/brave/brave-browser/projects)
* [Wiki](/brave/brave-browser/wiki)
* [Security](/brave/brave-browser/security)
* [Insights](/brave/brave-browser/pulse)

# [hackerone] another IPFS crash bypass #24211

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosed[brave/brave-core#14313](https://github.com/brave/brave-core/pull/14313)brave/brave-core#14313Closed[[hackerone] another IPFS crash bypass](#top)#24211[brave/brave-core#14313](https://github.com/brave/brave-core/pull/14313)Copy linkAssignees [![cypt4](https://avatars.githubusercontent.com/u/106654560?s=64&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)](/cypt4)Labels[OS/Desktop](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22OS%2FDesktop%22)[QA Pass-macOS](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22QA%20Pass-macOS%22)[QA/Yes](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22QA%2FYes%22)[feature/web3/ipfs](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22feature%2Fweb3%2Fipfs%22)[priority/P3The next thing for us to work on. It'll ride the trains.](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22priority%2FP3%22)The next thing for us to work on. It'll ride the trains.[release-notes/include](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22release-notes%2Finclude%22)[security](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22security%22)Milestone[1.43.x - Release](https://github.com/brave/brave-browser/milestone/304)![@diracdeltas](https://avatars.githubusercontent.com/u/549654?u=04bd895abbafff00171f2d25819df51d6e7fe621&v=4&size=80)
## Description

![@diracdeltas](https://avatars.githubusercontent.com/u/549654?u=04bd895abbafff00171f2d25819df51d6e7fe621&v=4&size=48)[diracdeltas](https://github.com/diracdeltas)opened [on Jul 22, 2022](https://github.com/brave/brave-browser/issues/24211#issue-1314835338)

<https://hackerone.com/reports/1646204>

credit: [neeythann](https://hackerone.com/neeythann)

## Metadata

### Assignees

* [![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=64&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)cypt4](/cypt4)
### Labels

[OS/Desktop](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22OS%2FDesktop%22)[QA Pass-macOS](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22QA%20Pass-macOS%22)[QA/Yes](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22QA%2FYes%22)[feature/web3/ipfs](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22feature%2Fweb3%2Fipfs%22)[priority/P3The next thing for us to work on. It'll ride the trains.](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22priority%2FP3%22)The next thing for us to work on. It'll ride the trains.[release-notes/include](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22release-notes%2Finclude%22)[security](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22security%22)
### Type

No type
### Projects

No projects
### Milestone

* [1.43.x - Release](https://github.com/brave/brave-browser/milestone/304)
### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_da68d565_20250114_180510.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrave%2Fbrave-core%2Fpull%2F14313)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrave%2Fbrave-core%2Fpull%2F14313)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=brave%2Fbrave-core)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[brave](/brave)
/
**[brave-core](/brave/brave-core)**
Public

* [Notifications](/login?return_to=%2Fbrave%2Fbrave-core) You must be signed in to change notification settings
* [Fork
  894](/login?return_to=%2Fbrave%2Fbrave-core)
* [Star
   2.5k](/login?return_to=%2Fbrave%2Fbrave-core)

* [Code](/brave/brave-core)
* [Pull requests
  230](/brave/brave-core/pulls)
* [Actions](/brave/brave-core/actions)
* [Security](/brave/brave-core/security)
* [Insights](/brave/brave-core/pulse)

Additional navigation options

* [Code](/brave/brave-core)
* [Pull requests](/brave/brave-core/pulls)
* [Actions](/brave/brave-core/actions)
* [Security](/brave/brave-core/security)
* [Insights](/brave/brave-core/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fbrave%2Fbrave-core%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fbrave%2Fbrave-core%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Do not commit subframe navigations for ipfs #14313

 Merged

[cypt4](/cypt4)
merged 1 commit into
[master](/brave/brave-core/tree/master "brave/brave-core:master")
from
[brave\_24211](/brave/brave-core/tree/brave_24211 "brave/brave-core:brave_24211")

Aug 3, 2022

 Merged

# [Do not commit subframe navigations for ipfs](#top) #14313

[cypt4](/cypt4)
merged 1 commit into
[master](/brave/brave-core/tree/master "brave/brave-core:master")
from
[brave\_24211](/brave/brave-core/tree/brave_24211 "brave/brave-core:brave_24211")

Aug 3, 2022

[Conversation
7](/brave/brave-core/pull/14313)
[Commits
1](/brave/brave-core/pull/14313/commits)
[Checks
0](/brave/brave-core/pull/14313/checks)
[Files changed](/brave/brave-core/pull/14313/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![cypt4](https://avatars.githubusercontent.com/u/106654560?s=60&v=4)](/cypt4)

Copy link

Collaborator

### @cypt4 **[cypt4](/cypt4)** commented [Jul 25, 2022](#issue-1316425736) • edited Loading

Fixes [brave/brave-browser#24211](https://github.com/brave/brave-browser/issues/24211)

## Submitter Checklist:

* I confirm that no security/privacy review [is needed](https://github.com/brave/brave-browser/wiki/Security-reviews), or that I have [requested](https://github.com/brave/security/issues/new/choose) one
* There is a [ticket](https://github.com/brave/brave-browser/issues) for my issue
* Used Github [auto-closing keywords](https://docs.github.com/en/github/managing-your-work-on-github/linking-a-pull-request-to-an-issue) in the PR description above
* Wrote a good [PR/commit description](https://google.github.io/eng-practices/review/developer/cl-descriptions.html)
* Squashed any review feedback or "fixup" commits before merge, so that history is a record of what happened in the repo, not your PR
* Added appropriate labels (`QA/Yes` or `QA/No`; `release-notes/include` or `release-notes/exclude`; `OS/...`) to the associated issue
* Checked the PR locally: `npm run test -- brave_browser_tests`, `npm run test -- brave_unit_tests`, `npm run lint`, `npm run gn_check`, `npm run tslint`
* Ran `git rebase master` (if needed)

## Reviewer Checklist:

* A security review [is not needed](https://github.com/brave/brave-browser/wiki/Security-reviews), or a link to one is included in the PR description
* New files have MPL-2.0 license header
* Adequate test coverage exists to prevent regressions
* Major classes, functions and non-trivial code blocks are well-commented
* Changes in component dependencies are properly reflected in `gn`
* Code follows the [style guide](https://chromium.googlesource.com/chromium/src/%2B/HEAD/styleguide/c%2B%2B/c%2B%2B.md)
* Test plan is specified in PR before merging

## After-merge Checklist:

* The associated issue milestone is set to the smallest version that the

  changes has landed on
* All relevant documentation has been updated, for instance:
  + [https://github.com/brave/brave-browser/wiki/Deviations-from-Chromium-(features-we-disable-or-remove)](https://github.com/brave/brave-browser/wiki/Deviations-from-Chromium-%28features-we-disable-or-remove%29)
  + <https://github.com/brave/brave-browser/wiki/Proxy-redirected-URLs>
  + <https://github.com/brave/brave-browser/wiki/Fingerprinting-Protections>
  + <https://github.com/brave/brave-browser/wiki/Brave%E2%80%99s-Use-of-Referral-Codes>
  + <https://github.com/brave/brave-browser/wiki/Custom-Headers>
  + <https://github.com/brave/brave-browser/wiki/Web-Compatibility-Exceptions-in-Brave>
  + <https://github.com/brave/brave-browser/wiki/QA-Guide>
  + <https://github.com/brave/brave-browser/wiki/P3A>

Sorry, something went wrong.

All reactions

 [![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=40&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)](/cypt4)
[cypt4](/cypt4)
requested review from
[iefremov](/iefremov) and
a team
as [code owners](/brave/brave-core/blob/ca22984c3bec9f5b5853aa8841a6928b8af5532f/.github/CODEOWNERS#L51)
[July 25, 2022 08:00](#event-7054075408)

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
assigned [cypt4](/cypt4)
[Jul 25, 2022](#event-7054076992)

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
added
the
[CI/run-network-audit](/brave/brave-core/labels/CI/run-network-audit)
Run network-audit
label
[Jul 25, 2022](#event-7054077061)

 [![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=40&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)](/cypt4)
[cypt4](/cypt4)
[force-pushed](/brave/brave-core/compare/01e5662c1ff03ab27d9060a2f435bffaadd68d64..8e373d06fa746809efe540f1ff9f5541e81367db)
the
brave\_24211

branch
2 times, most recently
from
[`01e5662`](/brave/brave-core/commit/01e5662c1ff03ab27d9060a2f435bffaadd68d64) to
[`8e373d0`](/brave/brave-core/commit/8e373d06fa746809efe540f1ff9f5541e81367db)  [Compare](/brave/brave-core/compare/01e5662c1ff03ab27d9060a2f435bffaadd68d64..8e373d06fa746809efe540f1ff9f5541e81367db)
[July 25, 2022 17:55](#event-7058598382)

[![iefremov](https://avatars.githubusercontent.com/u/3109556?s=60&v=4)](/iefremov)

**[iefremov](/iefremov)**
reviewed
[Jul 29, 2022](#pullrequestreview-1055898725)

 [View reviewed changes](/brave/brave-core/pull/14313/files)

[patches/content-browser-renderer\_host-navigation\_request.cc.patch](/brave/brave-core/pull/14313/files#diff-53e0945aa6040b88fc2cf47108f584e54d737b9484e5f608fed3914b80f13c39)
Outdated

|  |  | // account as well. |
| --- | --- | --- |
|  |  | // If the request was canceled by the user, do not show an error page. |
|  |  | if (net::ERR\_ABORTED == net\_error\_ || |
|  |  | + BRAVE\_ONIPFSIPNS\_MAYBE\_CANCEL\_NAVIGATION |

Copy link

Contributor

### @iefremov **[iefremov](/iefremov)** [Jul 29, 2022](#discussion_r933501892)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

can't we do that via NavigationThrottle ?

Sorry, something went wrong.

All reactions

 [![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=40&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)](/cypt4)
[cypt4](/cypt4)
[force-pushed](/brave/brave-core/compare/86adb1b14ac8e7e57374d497687778dd809c93b1..acf4234dace19edf938136a32e0768cde76eb815)
the
brave\_24211

branch
5 times, most recently
from
[`86adb1b`](/brave/brave-core/commit/86adb1b14ac8e7e57374d497687778dd809c93b1) to
[`acf4234`](/brave/brave-core/commit/acf4234dace19edf938136a32e0768cde76eb815)  [Compare](/brave/brave-core/compare/86adb1b14ac8e7e57374d497687778dd809c93b1..acf4234dace19edf938136a32e0768cde76eb815)
[August 2, 2022 07:08](#event-7107228303)

 [![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=40&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)](/cypt4)
[cypt4](/cypt4)
requested a review
from a team
as a [code owner](/brave/brave-core/blob/1a0c319b894f8943e92ae3885c3e44e904232e0b/.github/CODEOWNERS#L72)
[August 2, 2022 07:08](#event-7107228309)

 [![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=40&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)](/cypt4)
[cypt4](/cypt4)
[force-pushed](/brave/brave-core/compare/714c02eecd33d303067eba55738fb519146d2235..f3d08582e5b8632b71fea0d4cbb24e0468b11446)
the
brave\_24211

branch
3 times, most recently
from
[`714c02e`](/brave/brave-core/commit/714c02eecd33d303067eba55738fb519146d2235) to
[`f3d0858`](/brave/brave-core/commit/f3d08582e5b8632b71fea0d4cbb24e0468b11446)  [Compare](/brave/brave-core/compare/714c02eecd33d303067eba55738fb519146d2235..f3d08582e5b8632b71fea0d4cbb24e0468b11446)
[August 2, 2022 09:25](#event-7108233046)

[![iefremov](https://avatars.githubusercontent.com/u/3109556?s=60&v=4)](/iefremov)

**[iefremov](/iefremov)**
reviewed
[Aug 2, 2022](#pullrequestreview-1058437358)

 [View reviewed changes](/brave/brave-core/pull/14313/files)

[browser/brave\_content\_browser\_client.cc](/brave/brave-core/pull/14313/files#diff-594631d3a40b383b831cd6c6c401ff278c4b259ec7f1b321808e868ccfb06f2b)
Outdated

|  |  | @@ -965,6 +966,8 @@ BraveContentBrowserClient::CreateThrottlesForNavigation( | |
| --- | --- | --- | --- |
|  |  | #endif |
|  |  |  |
|  |  | #if BUILDFLAG(ENABLE\_IPFS) |
|  |  | throttles.push\_back( |

Copy link

Contributor

### @iefremov **[iefremov](/iefremov)** [Aug 2, 2022](#discussion_r935334226)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

don't you want to `push_front` it?

Sorry, something went wrong.

All reactions

[![iefremov](https://avatars.githubusercontent.com/u/3109556?s=60&v=4)](/iefremov)

**[iefremov](/iefremov)**
reviewed
[Aug 2, 2022](#pullrequestreview-1058527633)

 [View reviewed changes](/brave/brave-core/pull/14313/files)

[browser/ipfs/ipfs\_subframe\_navigation\_throttle.h](/brave/brave-core/pull/14313/files#diff-8d0050608fbf409a03a2f3c3c844a1fa749d888a538bd8cdaabfef3332d52852)

|  |  | const IpfsSubframeNavigationThrottle&) = delete; |
| --- | --- | --- |
|  |  |  |
|  |  | // content::NavigationThrottle implementation: |
|  |  | content::NavigationThrottle::ThrottleCheckResult WillFailRequest() override; |

Copy link

Contributor

### @iefremov **[iefremov](/iefremov)** [Aug 2, 2022](#discussion_r935385951)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

add comments pls

Sorry, something went wrong.

All reactions

[![iefremov](https://avatars.githubusercontent.com/u/3109556?s=60&v=4)](/iefremov)

**[iefremov](/iefremov)**
reviewed
[Aug 2, 2022](#pullrequestreview-1058527794)

 [View reviewed changes](/brave/brave-core/pull/14313/files)

[browser/ipfs/ipfs\_subframe\_navigation\_throttle.h](/brave/brave-core/pull/14313/files#diff-8d0050608fbf409a03a2f3c3c844a1fa749d888a538bd8cdaabfef3332d52852)

|  |  |  |
| --- | --- | --- |
|  |  | namespace ipfs { |
|  |  |  |
|  |  | class IpfsSubframeNavigationThrottle : public content::NavigationThrottle { |

Copy link

Contributor

### @iefremov **[iefremov](/iefremov)** [Aug 2, 2022](#discussion_r935386095)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

class-level comment

Sorry, something went wrong.

All reactions

[![iefremov](https://avatars.githubusercontent.com/u/3109556?s=60&v=4)](/iefremov)

**[iefremov](/iefremov)**
approved these changes
[Aug 2, 2022](#pullrequestreview-1058528310)

 [View reviewed changes](/brave/brave-core/pull/14313/files)

 [![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=40&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)](/cypt4)
[cypt4](/cypt4)
[force-pushed](/brave/brave-core/compare/f3d08582e5b8632b71fea0d4cbb24e0468b11446..965fdbe81b886186f1ae212bd91c52fc4fcf76d5)
the
brave\_24211

branch
from
[`f3d0858`](/brave/brave-core/commit/f3d08582e5b8632b71fea0d4cbb24e0468b11446) to
[`965fdbe`](/brave/brave-core/commit/965fdbe81b886186f1ae212bd91c52fc4fcf76d5)  [Compare](/brave/brave-core/compare/f3d08582e5b8632b71fea0d4cbb24e0468b11446..965fdbe81b886186f1ae212bd91c52fc4fcf76d5)
[August 2, 2022 11:46](#event-7109198736)

[![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=40&v=4)](/cypt4)

`[Do not commit subframe navigations for ipfs](/brave/brave-core/pull/14313/commits/73304545a3e1f7897114258867996dd02d26fc51 "Do not commit subframe navigations for ipfs
Fixes https://github.com/brave/brave-browser/issues/24211")`
 …

`[7330454](/brave/brave-core/pull/14313/commits/73304545a3e1f7897114258867996dd02d26fc51)`

```
Fixes [brave/brave-browser#24211](https://github.com/brave/brave-browser/issues/24211)
```

 [![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=40&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)](/cypt4)
[cypt4](/cypt4)
[force-pushed](/brave/brave-core/compare/965fdbe81b886186f1ae212bd91c52fc4fcf76d5..73304545a3e1f7897114258867996dd02d26fc51)
the
brave\_24211

branch
from
[`965fdbe`](/brave/brave-core/commit/965fdbe81b886186f1ae212bd91c52fc4fcf76d5) to
[`7330454`](/brave/brave-core/commit/73304545a3e1f7897114258867996dd02d26fc51)  [Compare](/brave/brave-core/compare/965fdbe81b886186f1ae212bd91c52fc4fcf76d5..73304545a3e1f7897114258867996dd02d26fc51)
[August 2, 2022 12:08](#event-7109362154)

[![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=80&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)](/cypt4)

Copy link

Collaborator

Author

### **[cypt4](/cypt4)** commented [Aug 2, 2022](#issuecomment-1202550837)

| /build linux |
| --- |

All reactions

Sorry, something went wrong.

[![yrliou](https://avatars.githubusercontent.com/u/4730197?s=60&v=4)](/yrliou)

**[yrliou](/yrliou)**
approved these changes
[Aug 2, 2022](#pullrequestreview-1059497814)

 [View reviewed changes](/brave/brave-core/pull/14313/files/73304545a3e1f7897114258867996dd02d26fc51)

[![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=40&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)](/cypt4)
[cypt4](/cypt4)
merged commit [`50ca5d2`](/brave/brave-core/commit/50ca5d23cd817aa49e9a275509edeae2443e3c41)
into
master

[Aug 3, 2022](https://github.com/brave/brave-core/pull/14313#event-7115573882)

 [![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=40&u=691b40f9a08d0bf3f7805ac2f68cd5893f41dfcb&v=4)](/cypt4)
[cypt4](/cypt4)
deleted the
brave\_24211

branch
[August 3, 2022 06:03](#event-7115573951)

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
added this to the [1.44.x - Nightly](/brave/brave-core/milestone/225) milestone
[Aug 3, 2022](#event-7115575235)

[![@stephendonner](https://avatars.githubusercontent.com/u/387249?s=80&u=e9ae7d4e0e156a9cb3e041c46d7004327e6e6aff&v=4)](/stephendonner)

Copy link

Contributor

### **[stephendonner](/stephendonner)** commented [Aug 4, 2022](#issuecomment-1205835550) • edited Loading

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Verified `PASSED` using  | Brave | 1.44.21 Chromium: 104.0.5112.81 (Official Build) nightly (x86\_64) | | --- | --- | | Revision | 5b7b76419d50f583022568b6764b630f6ddc9208-refs/branch-heads/5112@{[#1309](https://github.com/brave/brave-core/pull/1309)} | | OS | macOS Version 13.0 (Build 22A5311f) |   Reproduced the crash using `1.42.86`, and the privately-provided minimized testcase.  Worked with [@cypt4](https://github.com/cypt4) and used the minimal testcases from both this issue and these others, collected from HackerOne in [brave/brave-browser#24093](https://github.com/brave/brave-browser/issues/24093). Confirmed I was able to open the following HTML testcases in both Private and regular windows, without crashes.  | minimized testcase | testcase 1 | testcase 2 | testcase 3 | testcase 4 | testcase 5 | testcase 6 | | --- | --- | --- | --- | --- | --- | --- | | [Screenshot 2022-08-04 at 3 33 10 PM](https://user-images.githubusercontent.com/387249/182964105-d47e44ec-2881-4f16-9b13-a896c55758cf.png) | [Screenshot 2022-08-04 at 3 29 13 PM](https://user-images.githubusercontent.com/387249/182963591-a8d00159-558a-42ae-8211-ff2ae94ffb66.png) | [Screenshot 2022-08-04 at 3 29 20 PM](https://user-images.githubusercontent.com/387249/182963596-1b9d8a8f-bc19-40f5-8995-d2c0ea74fe0f.png) | [Screenshot 2022-08-04 at 3 29 28 PM](https://user-images.githubusercontent.com/387249/182963602-8fd2fd1b-2179-4a56-b72a-bbf1cfd8a4a7.png) | [Screenshot 2022-08-04 at 3 29 37 PM](https://user-images.githubusercontent.com/387249/182963607-162ea329-3262-421a-bcd2-cd4ece034c9b.png) | [Screenshot 2022-08-04 at 3 29 44 PM](https://user-images.githubusercontent.com/387249/182963611-c601636d-c2e0-458c-bb00-df1dc5cbfb5f.png) | [Screenshot 2022-08-04 at 3 29 50 PM](https://user-images.githubusercontent.com/387249/182963614-35c1f7b6-15c8-4447-9678-ae5b690d83a9.png) | |

All reactions

Sorry, something went wrong.

[![@stephendonner](https://avatars.githubusercontent.com/u/387249?s=80&u=e9ae7d4e0e156a9cb3e041c46d7004327e6e6aff&v=4)](/stephendonner)

Copy link

Contributor

### **[stephendonner](/stephendonner)** commented [Aug 4, 2022](#issuecomment-1205842589)

| [@cypt4](https://github.com/cypt4) [@spylogsster](https://github.com/spylogsster) can we get an uplift for this started? Am assuming we'll want it at least in 1.43.x, if not also 1.42.x, via a hotfix/maintenance release? |
| --- |

All reactions

Sorry, something went wrong.

[![@stephendonner](https://avatars.githubusercontent.com/u/387249?s=40&u=e9ae7d4e0e156a9cb3e041c46d7004327e6e6aff&v=4)](/stephendonner)
[stephendonner](/stephendonner)
mentioned this pull request
[Aug 5, 2022](#ref-issue-1307215298)

[[hackerone] IPFS crash
brave/brave-browser#24093](/brave/brave-browser/issues/24093)

Closed

[brave-builds](/brave-builds)
pushed a commit
that referenced
this pull request
[Aug 5, 2022](#ref-commit-213f1ea)
[![@brave-browser-releases](https://avatars.githubusercontent.com/u/39539223?s=40&u=f213f82c027815991ef5ad42ae0fdb49e80e22c3&v=4)](/brave-browser-releases)

`[Uplift of](/brave/brave-core/commit/213f1ea364ff3d6b18209a4d350d27acc262fc7e "Uplift of #14313 (squashed) to beta") [#14313](https://github.com/brave/brave-core/pull/14313) [(squashed) to beta](/brave/brave-core/commit/213f1ea364ff3d6b18209a4d350d27acc262fc7e "Uplift of #14313 (squashed) to beta")`

`[213f1ea](/brave/brave-core/commit/213f1ea364ff3d6b18209a4d350d27acc262fc7e)`

[![@brave-builds](https://avatars.githubusercontent.com/u/45370463?s=40&u=3be836715d815c35a07da7aa894253ba5ea126bf&v=4)](/brave-builds)
[brave-builds](/brave-builds)
mentioned this pull request
[Aug 5, 2022](#ref-pullrequest-1329470298)

[Do not commit subframe navigations for ipfs (uplift to 1.43.x)
#14484](/brave/brave-core/pull/14484)
 Merged

7 tasks

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrave%2Fbrave-core%2Fpull%2F14313)

Reviewers

[![@yrliou](https://avatars.githubusercontent.com/u/4730197?s=40&v=4)](/yrliou) [yrliou](/yrliou)

yrliou approved these changes

[![@iefremov](https://avatars.githubusercontent.com/u/3109556?s=40&v=4)](/iefremov) [iefremov](/iefremov)

iefremov approved these changes

Assignees

[![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=40&v=4)](/cypt4) [cypt4](/cypt4)

Labels

[CI/run-network-audit](/brave/brave-core/labels/CI/run-network-audit)
Run network-audit

Projects

None yet

Milestone

 [**1.44.x - Release**](/brave/brave-core/milestone/225 "1.44.x - Release")

Development

Successfully merging this pull request may close these issues.

 [[hackerone] another IPFS crash bypass](https://github.com/brave/brave-browser/issues/24211)

4 participants

[![@cypt4](https://avatars.githubusercontent.com/u/106654560?s=52&v=4)](/cypt4) [![@stephendonner](https://avatars.githubusercontent.com/u/387249?s=52&v=4)](/stephendonner) [![@iefremov](https://avatars.githubusercontent.com/u/3109556?s=52&v=4)](/iefremov) [![@yrliou](https://avatars.githubusercontent.com/u/4730197?s=52&v=4)](/yrliou)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_094d103e_20250114_180508.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrave%2Fbrave-browser%2Fissues%2F25106)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fbrave%2Fbrave-browser%2Fissues%2F25106)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=brave%2Fbrave-browser)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[brave](/brave)
/
**[brave-browser](/brave/brave-browser)**
Public

* [Notifications](/login?return_to=%2Fbrave%2Fbrave-browser) You must be signed in to change notification settings
* [Fork
  2.4k](/login?return_to=%2Fbrave%2Fbrave-browser)
* [Star
   18.3k](/login?return_to=%2Fbrave%2Fbrave-browser)

* [Code](/brave/brave-browser)
* [Issues
  5k+](/brave/brave-browser/issues)
* [Pull requests
  0](/brave/brave-browser/pulls)
* [Actions](/brave/brave-browser/actions)
* [Projects
  13](/brave/brave-browser/projects)
* [Wiki](/brave/brave-browser/wiki)
* [Security](/brave/brave-browser/security)
* [Insights](/brave/brave-browser/pulse)

Additional navigation options

* [Code](/brave/brave-browser)
* [Issues](/brave/brave-browser/issues)
* [Pull requests](/brave/brave-browser/pulls)
* [Actions](/brave/brave-browser/actions)
* [Projects](/brave/brave-browser/projects)
* [Wiki](/brave/brave-browser/wiki)
* [Security](/brave/brave-browser/security)
* [Insights](/brave/brave-browser/pulse)

# Desktop Release Notes for 1.43.x - Release #25106

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosed[#25137](https://github.com/brave/brave-browser/pull/25137)Closed[Desktop Release Notes for 1.43.x - Release](#top)#25106[#25137](https://github.com/brave/brave-browser/pull/25137)Copy linkLabels[OS/Desktop](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22OS%2FDesktop%22)[QA/No](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22QA%2FNo%22)[release-notes/exclude](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22release-notes%2Fexclude%22)Milestone[1.43.x - Release](https://github.com/brave/brave-browser/milestone/304)![@LaurenWags](https://avatars.githubusercontent.com/u/28145373?u=c0a0b50367c4f2269a89c9aec31a720cf2a3888c&v=4&size=80)
## Description

![@LaurenWags](https://avatars.githubusercontent.com/u/28145373?u=c0a0b50367c4f2269a89c9aec31a720cf2a3888c&v=4&size=48)[LaurenWags](https://github.com/LaurenWags)opened [on Aug 31, 2022](https://github.com/brave/brave-browser/issues/25106#issue-1357659627)
#### Release Notes

* Window.ethereum.send should be writable. ([#25078](https://github.com/brave/brave-browser/issues/25078))
* Upgrade from Chromium 105.0.5195.58 to Chromium 105.0.5195.68. ([#25009](https://github.com/brave/brave-browser/issues/25009))
* Sending from HW filecoin acc doesn't work. ([#24824](https://github.com/brave/brave-browser/issues/24824))
* Remove DNS.Resolvers IPNS config property if user disables DOH. ([#24678](https://github.com/brave/brave-browser/issues/24678))
* Crash returning to page with speedreader enabled. ([#24588](https://github.com/brave/brave-browser/issues/24588))
* DOH Ipfs override may cause high cpu usage. ([#24461](https://github.com/brave/brave-browser/issues/24461))
* Cert pinning is not enforced on Desktop. ([#24451](https://github.com/brave/brave-browser/issues/24451))
* Implement Bridge to Aurora button. ([#24377](https://github.com/brave/brave-browser/issues/24377))
* Unable to import saved passwords from Edge (Chromium, macOS, Linux). ([#24343](https://github.com/brave/brave-browser/issues/24343))
* Importing from Chromium browsers will import (and enable) disabled extensions. ([#24250](https://github.com/brave/brave-browser/issues/24250))
* Guest windows brave://settings page is blank. ([#24242](https://github.com/brave/brave-browser/issues/24242))
* [hackerone] another IPFS crash bypass. ([#24211](https://github.com/brave/brave-browser/issues/24211))
* Add Filecoin to list of buy options on Ramp. ([#24123](https://github.com/brave/brave-browser/issues/24123))
* `For quick access....` text is invisible with white background in the bookmarks bar for a newly created profile . ([#24110](https://github.com/brave/brave-browser/issues/24110))
* Tab group outline is not rendered properly with light theme. ([#24095](https://github.com/brave/brave-browser/issues/24095))
* Split out default wallet prefs for Ethereum and Solana. ([#24079](https://github.com/brave/brave-browser/issues/24079))
* SOL should be default asset on BUY when solana chain is picked. ([#24066](https://github.com/brave/brave-browser/issues/24066))
* Display full RPC URL in add network panel screen. ([#23935](https://github.com/brave/brave-browser/issues/23935))
* Interacting with Solana Dapp without Solana Account should initiate account creation on the panel. ([#23898](https://github.com/brave/brave-browser/issues/23898))
* Add translation service to Brave. ([#23813](https://github.com/brave/brave-browser/issues/23813))
* Select purchase method for Testnets doesn't list anything. Consider hiding Buy Tab for testnets. ([#23773](https://github.com/brave/brave-browser/issues/23773))
* Import from Opera. ([#23738](https://github.com/brave/brave-browser/issues/23738))
* Implement feature policy for Ethereum and Solana for iframes. ([#23710](https://github.com/brave/brave-browser/issues/23710))
* Import from Vivaldi. ([#23704](https://github.com/brave/brave-browser/issues/23704))
* Wallet networks suggestion UI. ([#23628](https://github.com/brave/brave-browser/issues/23628))
* Brave Extension high memory usage with WDP enabled. ([#23573](https://github.com/brave/brave-browser/issues/23573))
* "Automatically redirect .onion sites" setting is not disabled with Tor. ([#23560](https://github.com/brave/brave-browser/issues/23560))
* Implement fetch Payout Status . ([#23429](https://github.com/brave/brave-browser/issues/23429))
* Add filecoin network chooser. ([#23368](https://github.com/brave/brave-browser/issues/23368))
* Use separate keyrings and correct root paths for filecoin mainnet and non-mainnet accounts. ([#23241](https://github.com/brave/brave-browser/issues/23241))
* Persist "Advanced Controls" section in Shields v2 panel. ([#23188](https://github.com/brave/brave-browser/issues/23188))
* Need a better way to copy addresses on wallet. ([#22740](https://github.com/brave/brave-browser/issues/22740))
* The content on `brave://settings/braveHelpTips` disappears upon reload and direct access via the address bar. ([#22736](https://github.com/brave/brave-browser/issues/22736))
* Solana connected status. ([#22184](https://github.com/brave/brave-browser/issues/22184))
* Introduce "You've set up a pending tip" messaging for pending tip cases. ([#20748](https://github.com/brave/brave-browser/issues/20748))
* Make tipping banner response depend on success/error from server: Follow up to 15543. ([#19071](https://github.com/brave/brave-browser/issues/19071))
* Setting "Allow Google login for extensions" does not work. ([#15754](https://github.com/brave/brave-browser/issues/15754))
* When Autoplay is off, certain interactions with video player halts playback. ([#13586](https://github.com/brave/brave-browser/issues/13586))
* Windows Shares Deleted Browsing History. ([#9820](https://github.com/brave/brave-browser/issues/9820))
* Add ability to customize number of top sites shown on Dashboard (new tab page). ([#6619](https://github.com/brave/brave-browser/issues/6619))
* Closing last tab should open a new tab (not exit browser). ([#1002](https://github.com/brave/brave-browser/issues/1002))
## Metadata

### Assignees

No one assigned

### Labels

[OS/Desktop](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22OS%2FDesktop%22)[QA/No](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22QA%2FNo%22)[release-notes/exclude](https://github.com/brave/brave-browser/issues?q=state%3Aopen%20label%3A%22release-notes%2Fexclude%22)
### Type

No type
### Projects

No projects
### Milestone

* [1.43.x - Release](https://github.com/brave/brave-browser/milestone/304)
### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


