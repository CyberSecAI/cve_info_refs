=== Content from security.gentoo.org_9983c99f_20250115_082904.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Git: Multiple Vulnerabilities — GLSA **202312-15**

Several vulnerabilities have been found in Git, the worst of which could lead to remote code execution.

### Affected packages

| Package | **dev-vcs/git** on all architectures |
| --- | --- |
| Affected versions | < **2.39.3** |
| Unaffected versions | >= **2.39.3** |

### Background

Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.

### Description

Multiple vulnerabilities have been discovered in Git. Please review the CVE identifiers referenced below for details.

### Impact

Please review the referenced CVE identifiers for details.

### Workaround

There is no known workaround at this time.

### Resolution

All Git users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=dev-vcs/git-2.39.3"

```
### References

* [CVE-2022-23521](https://nvd.nist.gov/vuln/detail/CVE-2022-23521)
* [CVE-2022-24765](https://nvd.nist.gov/vuln/detail/CVE-2022-24765)
* [CVE-2022-29187](https://nvd.nist.gov/vuln/detail/CVE-2022-29187)
* [CVE-2022-39253](https://nvd.nist.gov/vuln/detail/CVE-2022-39253)
* [CVE-2022-39260](https://nvd.nist.gov/vuln/detail/CVE-2022-39260)
* [CVE-2022-41903](https://nvd.nist.gov/vuln/detail/CVE-2022-41903)
* [CVE-2023-22490](https://nvd.nist.gov/vuln/detail/CVE-2023-22490)
* [CVE-2023-23946](https://nvd.nist.gov/vuln/detail/CVE-2023-23946)
* [CVE-2023-25652](https://nvd.nist.gov/vuln/detail/CVE-2023-25652)
* [CVE-2023-25815](https://nvd.nist.gov/vuln/detail/CVE-2023-25815)
* [CVE-2023-29007](https://nvd.nist.gov/vuln/detail/CVE-2023-29007)

**Release date**

December 27, 2023

**Latest revision**

December 27, 2023: 1

**Severity**

high

**Exploitable**

remote

**Bugzilla entries**

* [838127](https://bugs.gentoo.org/show_bug.cgi?id=838127)
* [857831](https://bugs.gentoo.org/show_bug.cgi?id=857831)
* [877565](https://bugs.gentoo.org/show_bug.cgi?id=877565)
* [891221](https://bugs.gentoo.org/show_bug.cgi?id=891221)
* [894472](https://bugs.gentoo.org/show_bug.cgi?id=894472)
* [905088](https://bugs.gentoo.org/show_bug.cgi?id=905088)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from github.com_15a290fc_20250115_082902.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgit%2Fgit%2Fcommit%2F508386c6c5857b4faa2c3e491f422c98cc69ae76)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgit%2Fgit%2Fcommit%2F508386c6c5857b4faa2c3e491f422c98cc69ae76)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=git%2Fgit)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[git](/git)
/
**[git](/git/git)**
Public

* [Notifications](/login?return_to=%2Fgit%2Fgit) You must be signed in to change notification settings
* [Fork
  25.8k](/login?return_to=%2Fgit%2Fgit)
* [Star
   53.2k](/login?return_to=%2Fgit%2Fgit)

* [Code](/git/git)
* [Pull requests
  194](/git/git/pulls)
* [Actions](/git/git/actions)
* [Security](/git/git/security)
* [Insights](/git/git/pulse)

Additional navigation options

* [Code](/git/git)
* [Pull requests](/git/git/pulls)
* [Actions](/git/git/actions)
* [Security](/git/git/security)
* [Insights](/git/git/pulse)

## Commit

[Permalink](/git/git/commit/508386c6c5857b4faa2c3e491f422c98cc69ae76)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Sync with 2.39.1

[Browse files](/git/git/tree/508386c6c5857b4faa2c3e491f422c98cc69ae76)
Browse the repository at this point in the history

* Loading branch information

[![@gitster](https://avatars.githubusercontent.com/u/54884?s=40&v=4)](/gitster)

[gitster](/git/git/commits?author=gitster "View all commits by gitster")
committed
Jan 16, 2023

2 parents
[262c45b](/git/git/commit/262c45b6a17d971cd440c6cd2fdeff1e0d081e47)
+
[01443f0](/git/git/commit/01443f01b7c6a3c6ef03268b649b119027743115)

commit 508386c

 Show file tree

 Hide file tree

Showing
**22 changed files**
with
**572 additions**
and
**125 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* Documentation/RelNotes

  + Documentation/RelNotes/2.30.7.txt
    [2.30.7.txt](#diff-86faf135f2fa1508e172f761a5eebb0fa95b2c479c20ce27b94e6864de2a6eaa)
  + Documentation/RelNotes/2.31.6.txt
    [2.31.6.txt](#diff-e69252a778f5921660de68faeebba6ddc902759a28d15bb898297b0395c850ff)
  + Documentation/RelNotes/2.32.5.txt
    [2.32.5.txt](#diff-dc25c268c7abfd166cada33ec4e1a4db4bc096107e1a5bccd3abeec40c2edb7e)
  + Documentation/RelNotes/2.33.6.txt
    [2.33.6.txt](#diff-ac634d03d1736c51d68b93eda85b54c8f6230eb61c95c1589744c099a1766097)
  + Documentation/RelNotes/2.34.6.txt
    [2.34.6.txt](#diff-716536a2a4a2fb67d9667326b9a6bf0d08020771fc2c46e9aba0e7ed16410016)
  + Documentation/RelNotes/2.35.6.txt
    [2.35.6.txt](#diff-2b5faac7ebf613326d1a78206c0d6309432f6eba3161ac60247475388420ebb0)
  + Documentation/RelNotes/2.36.4.txt
    [2.36.4.txt](#diff-42780d271ba33d0aed8777155c4da30358f9e5bb2741a26d2a6baef9142f4948)
  + Documentation/RelNotes/2.37.5.txt
    [2.37.5.txt](#diff-943f3b9376ade541445e12551b9ca3314ae32584d3d1b2c4649c93de7a2762aa)
  + Documentation/RelNotes/2.38.3.txt
    [2.38.3.txt](#diff-c2895098c5f44e08756a815ac1918fc4fb2d2688e38335830a82ad1d45a279b4)
  + Documentation/RelNotes/2.39.1.txt
    [2.39.1.txt](#diff-26168b39fb80aadc099bcd25b83d321101a691e99947bd04edd5ac559907be53)
* attr.c
  [attr.c](#diff-f89b08f027f583c8719c7a22dba3ccc888b98aafc084c40df006c4e82a0ca278)
* attr.h
  [attr.h](#diff-3e5dce4801948fa3b9609714ca6b4c316c1ca143ed8430eb2809e8bda157a760)
* column.c
  [column.c](#diff-868b9634a3981e8547a828d2889775a7e433aa1af21145793f8d3bbf37ec37dc)
* fsck.c
  [fsck.c](#diff-49f47cb6112cfe90a35e275fb4c710b2ba22d56a54852ca38c2deac4f03610e5)
* fsck.h
  [fsck.h](#diff-0c527f5aa9b4d2d8876f28037c71ca96599198f3cdbb42394f456d864d8df941)
* git-compat-util.h
  [git-compat-util.h](#diff-1c67f843ddfdfea5499e634c6f3e9ee34fabb6e020aaad9188ba38771edd833d)
* pretty.c
  [pretty.c](#diff-63ca34c353f87c64f48647510e1499ed7236038c676ede8fa05ecc0d1c0ee804)
* t

  + t/t0003-attributes.sh
    [t0003-attributes.sh](#diff-3aa67fd2d1f7355ac7c67730df01f417756bf1f102a315d342ae4df83d6bfec6)
  + t/t1450-fsck.sh
    [t1450-fsck.sh](#diff-d168505dfc8af343da7b379e9a9a07f299143b0b6f5c7159586b38449b875d1a)
  + t/t4205-log-pretty-formats.sh
    [t4205-log-pretty-formats.sh](#diff-f77d2ab096233eaf58f4eb2e3d09428f4439c93c82a7d4782a952433d15f3349)
* utf8.c
  [utf8.c](#diff-5c08b53d950774a1e69852de5ba0662b178f6811e52db817fbd794fa519b619d)
* utf8.h
  [utf8.h](#diff-8bee4b28f81f3f2704b86c9bfba5b7f3c4edff3864898ecc9e48e445ceac982c)

## There are no files selected for viewing

86 changes: 86 additions & 0 deletions

86
[Documentation/RelNotes/2.30.7.txt](#diff-86faf135f2fa1508e172f761a5eebb0fa95b2c479c20ce27b94e6864de2a6eaa "Documentation/RelNotes/2.30.7.txt")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/Documentation/RelNotes/2.30.7.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,86 @@ |
|  |  | Git v2.30.7 Release Notes |
|  |  | ========================= |
|  |  |  |
|  |  | This release addresses the security issues CVE-2022-41903 and |
|  |  | CVE-2022-23521. |
|  |  |  |
|  |  |  |
|  |  | Fixes since v2.30.6 |
|  |  | ------------------- |
|  |  |  |
|  |  | \* CVE-2022-41903: |
|  |  |  |
|  |  | git log has the ability to display commits using an arbitrary |
|  |  | format with its --format specifiers. This functionality is also |
|  |  | exposed to git archive via the export-subst gitattribute. |
|  |  |  |
|  |  | When processing the padding operators (e.g., %<(, %<|(, %>(, |
|  |  | %>>(, or %><( ), an integer overflow can occur in |
|  |  | pretty.c::format\_and\_pad\_commit() where a size\_t is improperly |
|  |  | stored as an int, and then added as an offset to a subsequent |
|  |  | memcpy() call. |
|  |  |  |
|  |  | This overflow can be triggered directly by a user running a |
|  |  | command which invokes the commit formatting machinery (e.g., git |
|  |  | log --format=...). It may also be triggered indirectly through |
|  |  | git archive via the export-subst mechanism, which expands format |
|  |  | specifiers inside of files within the repository during a git |
|  |  | archive. |
|  |  |  |
|  |  | This integer overflow can result in arbitrary heap writes, which |
|  |  | may result in remote code execution. |
|  |  |  |
|  |  | \* CVE-2022-23521: |
|  |  |  |
|  |  | gitattributes are a mechanism to allow defining attributes for |
|  |  | paths. These attributes can be defined by adding a `.gitattributes` |
|  |  | file to the repository, which contains a set of file patterns and |
|  |  | the attributes that should be set for paths matching this pattern. |
|  |  |  |
|  |  | When parsing gitattributes, multiple integer overflows can occur |
|  |  | when there is a huge number of path patterns, a huge number of |
|  |  | attributes for a single pattern, or when the declared attribute |
|  |  | names are huge. |
|  |  |  |
|  |  | These overflows can be triggered via a crafted `.gitattributes` file |
|  |  | that may be part of the commit history. Git silently splits lines |
|  |  | longer than 2KB when parsing gitattributes from a file, but not when |
|  |  | parsing them from the index. Consequentially, the failure mode |
|  |  | depends on whether the file exists in the working tree, the index or |
|  |  | both. |
|  |  |  |
|  |  | This integer overflow can result in arbitrary heap reads and writes, |
|  |  | which may result in remote code execution. |
|  |  |  |
|  |  | Credit for finding CVE-2022-41903 goes to Joern Schneeweisz of GitLab. |
|  |  | An initial fix was authored by Markus Vervier of X41 D-Sec. Credit for |
|  |  | finding CVE-2022-23521 goes to Markus Vervier and Eric Sesterhenn of X41 |
|  |  | D-Sec. This work was sponsored by OSTIF. |
|  |  |  |
|  |  | The proposed fixes have been polished and extended to cover additional |
|  |  | findings by Patrick Steinhardt of GitLab, with help from others on the |
|  |  | Git security mailing list. |
|  |  |  |
|  |  | Patrick Steinhardt (21): |
|  |  | attr: fix overflow when upserting attribute with overly long name |
|  |  | attr: fix out-of-bounds read with huge attribute names |
|  |  | attr: fix integer overflow when parsing huge attribute names |
|  |  | attr: fix out-of-bounds write when parsing huge number of attributes |
|  |  | attr: fix out-of-bounds read with unreasonable amount of patterns |
|  |  | attr: fix integer overflow with more than INT\_MAX macros |
|  |  | attr: harden allocation against integer overflows |
|  |  | attr: fix silently splitting up lines longer than 2048 bytes |
|  |  | attr: ignore attribute lines exceeding 2048 bytes |
|  |  | attr: ignore overly large gitattributes files |
|  |  | pretty: fix out-of-bounds write caused by integer overflow |
|  |  | pretty: fix out-of-bounds read when left-flushing with stealing |
|  |  | pretty: fix out-of-bounds read when parsing invalid padding format |
|  |  | pretty: fix adding linefeed when placeholder is not expanded |
|  |  | pretty: fix integer overflow in wrapping format |
|  |  | utf8: fix truncated string lengths in `utf8\_strnwidth()` |
|  |  | utf8: fix returning negative string width |
|  |  | utf8: fix overflow when returning string width |
|  |  | utf8: fix checking for glyph width in `strbuf\_utf8\_replace()` |
|  |  | utf8: refactor `strbuf\_utf8\_replace` to not rely on preallocated buffer |
|  |  | pretty: restrict input lengths for padding and wrapping formats |
|  |  |  |

5 changes: 5 additions & 0 deletions

5
[Documentation/RelNotes/2.31.6.txt](#diff-e69252a778f5921660de68faeebba6ddc902759a28d15bb898297b0395c850ff "Documentation/RelNotes/2.31.6.txt")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/Documentation/RelNotes/2.31.6.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,5 @@ |
|  |  | Git v2.31.6 Release Notes |
|  |  | ========================= |
|  |  |  |
|  |  | This release merges the security fix that appears in v2.30.7; see |
|  |  | the release notes for that version for details. |

8 changes: 8 additions & 0 deletions

8
[Documentation/RelNotes/2.32.5.txt](#diff-dc25c268c7abfd166cada33ec4e1a4db4bc096107e1a5bccd3abeec40c2edb7e "Documentation/RelNotes/2.32.5.txt")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/Documentation/RelNotes/2.32.5.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,8 @@ |
|  |  | Git v2.32.5 Release Notes |
|  |  | ========================= |
|  |  |  |
|  |  | This release merges the security fix that appears in v2.30.7; see |
|  |  | the release notes for that version for details. |
|  |  |  |
|  |  | In addition, included are additional code for "git fsck" to check |
|  |  | for questionable .gitattributes files. |

5 changes: 5 additions & 0 deletions

5
[Documentation/RelNotes/2.33.6.txt](#diff-ac634d03d1736c51d68b93eda85b54c8f6230eb61c95c1589744c099a1766097 "Documentation/RelNotes/2.33.6.txt")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/Documentation/RelNotes/2.33.6.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,5 @@ |
|  |  | Git v2.33.6 Release Notes |
|  |  | ========================= |
|  |  |  |
|  |  | This release merges the security fix that appears in v2.30.7; see |
|  |  | the release notes for that version for details. |

5 changes: 5 additions & 0 deletions

5
[Documentation/RelNotes/2.34.6.txt](#diff-716536a2a4a2fb67d9667326b9a6bf0d08020771fc2c46e9aba0e7ed16410016 "Documentation/RelNotes/2.34.6.txt")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/Documentation/RelNotes/2.34.6.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,5 @@ |
|  |  | Git v2.34.6 Release Notes |
|  |  | ========================= |
|  |  |  |
|  |  | This release merges the security fix that appears in v2.30.7; see |
|  |  | the release notes for that version for details. |

5 changes: 5 additions & 0 deletions

5
[Documentation/RelNotes/2.35.6.txt](#diff-2b5faac7ebf613326d1a78206c0d6309432f6eba3161ac60247475388420ebb0 "Documentation/RelNotes/2.35.6.txt")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/Documentation/RelNotes/2.35.6.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,5 @@ |
|  |  | Git v2.35.6 Release Notes |
|  |  | ========================= |
|  |  |  |
|  |  | This release merges the security fix that appears in v2.30.7; see |
|  |  | the release notes for that version for details. |

5 changes: 5 additions & 0 deletions

5
[Documentation/RelNotes/2.36.4.txt](#diff-42780d271ba33d0aed8777155c4da30358f9e5bb2741a26d2a6baef9142f4948 "Documentation/RelNotes/2.36.4.txt")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/Documentation/RelNotes/2.36.4.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,5 @@ |
|  |  | Git v2.36.4 Release Notes |
|  |  | ========================= |
|  |  |  |
|  |  | This release merges the security fix that appears in v2.30.7; see |
|  |  | the release notes for that version for details. |

5 changes: 5 additions & 0 deletions

5
[Documentation/RelNotes/2.37.5.txt](#diff-943f3b9376ade541445e12551b9ca3314ae32584d3d1b2c4649c93de7a2762aa "Documentation/RelNotes/2.37.5.txt")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/Documentation/RelNotes/2.37.5.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,5 @@ |
|  |  | Git v2.37.5 Release Notes |
|  |  | ========================= |
|  |  |  |
|  |  | This release merges the security fix that appears in v2.30.7; see |
|  |  | the release notes for that version for details. |

5 changes: 5 additions & 0 deletions

5
[Documentation/RelNotes/2.38.3.txt](#diff-c2895098c5f44e08756a815ac1918fc4fb2d2688e38335830a82ad1d45a279b4 "Documentation/RelNotes/2.38.3.txt")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/Documentation/RelNotes/2.38.3.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,5 @@ |
|  |  | Git v2.38.3 Release Notes |
|  |  | ========================= |
|  |  |  |
|  |  | This release merges the security fix that appears in v2.30.7; see |
|  |  | the release notes for that version for details. |

5 changes: 5 additions & 0 deletions

5
[Documentation/RelNotes/2.39.1.txt](#diff-26168b39fb80aadc099bcd25b83d321101a691e99947bd04edd5ac559907be53 "Documentation/RelNotes/2.39.1.txt")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/Documentation/RelNotes/2.39.1.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,5 @@ |
|  |  | Git v2.39.1 Release Notes |
|  |  | ========================= |
|  |  |  |
|  |  | This release merges the security fix that appears in v2.30.7; see |
|  |  | the release notes for that version for details. |

91 changes: 56 additions & 35 deletions

91
[attr.c](#diff-f89b08f027f583c8719c7a22dba3ccc888b98aafc084c40df006c4e82a0ca278 "attr.c")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/attr.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -24,7 +24,7 @@ static const char git\_attr\_\_unknown[] = "(builtin)unknown"; |
|  |  | #define ATTR\_\_UNKNOWN git\_attr\_\_unknown |
|  |  |  |
|  |  | struct git\_attr { |
|  |  | int attr\_nr; /\* unique attribute number \*/ |
|  |  | unsigned int attr\_nr; /\* unique attribute number \*/ |
|  |  | char name[FLEX\_ARRAY]; /\* attribute name \*/ |
|  |  | }; |
|  |  |  |
| Expand Down  Expand Up | | @@ -206,7 +206,7 @@ static void report\_invalid\_attr(const char \*name, size\_t len, |
|  |  | \* dictionary. If no entry is found, create a new attribute and store it in |
|  |  | \* the dictionary. |
|  |  | \*/ |
|  |  | static const struct git\_attr \*git\_attr\_internal(const char \*name, int namelen) |
|  |  | static const struct git\_attr \*git\_attr\_internal(const char \*name, size\_t namelen) |
|  |  | { |
|  |  | struct git\_attr \*a; |
|  |  |  |
| Expand All | | @@ -222,8 +222,8 @@ static const struct git\_attr \*git\_attr\_internal(const char \*name, int namelen) |
|  |  | a->attr\_nr = hashmap\_get\_size(&g\_attr\_hashmap.map); |
|  |  |  |
|  |  | attr\_hashmap\_add(&g\_attr\_hashmap, a->name, namelen, a); |
|  |  | assert(a->attr\_nr == |
|  |  | (hashmap\_get\_size(&g\_attr\_hashmap.map) - 1)); |
|  |  | if (a->attr\_nr != hashmap\_get\_size(&g\_attr\_hashmap.map) - 1) |
|  |  | die(\_("unable to add additional attribute")); |
|  |  | } |
|  |  |  |
|  |  | hashmap\_unlock(&g\_attr\_hashmap); |
| Expand Down  Expand Up | | @@ -268,7 +268,7 @@ struct match\_attr { |
|  |  | const struct git\_attr \*attr; |
|  |  | } u; |
|  |  | char is\_macro; |
|  |  | unsigned num\_attr; |
|  |  | size\_t num\_attr; |
|  |  | struct attr\_state state[FLEX\_ARRAY]; |
|  |  | }; |
|  |  |  |
| Expand All | | @@ -289,7 +289,7 @@ static const char \*parse\_attr(const char \*src, int lineno, const char \*cp, |
|  |  | struct attr\_state \*e) |
|  |  | { |
|  |  | const char \*ep, \*equals; |
|  |  | int len; |
|  |  | size\_t len; |
|  |  |  |
|  |  | ep = cp + strcspn(cp, blank); |
|  |  | equals = strchr(cp, '='); |
| Expand Down  Expand Up | | @@ -333,8 +333,7 @@ static const char \*parse\_attr(const char \*src, int lineno, const char \*cp, |
|  |  | static struct match\_attr \*parse\_attr\_line(const char \*line, const char \*src, |
|  |  | int lineno, unsigned flags) |
|  |  | { |
|  |  | int namelen; |
|  |  | int num\_attr, i; |
|  |  | size\_t namelen, num\_attr, i; |
|  |  | const char \*cp, \*name, \*states; |
|  |  | struct match\_attr \*res = NULL; |
|  |  | int is\_macro; |
| Expand All | | @@ -345,6 +344,11 @@ static struct match\_attr \*parse\_attr\_line(const char \*line, const char \*src, |
|  |  | return NULL; |
|  |  | name = cp; |
|  |  |  |
|  |  | if (strlen(line) >= ATTR\_MAX\_LINE\_LENGTH) { |
|  |  | warning(\_("ignoring overly long attributes line %d"), lineno); |
|  |  | return NULL; |
|  |  | } |
|  |  |  |
|  |  | if (\*cp == '"' && !unquote\_c\_style(&pattern, name, &states)) { |
|  |  | name = pattern.buf; |
|  |  | namelen = pattern.len; |
| Expand Down  Expand Up | | @@ -381,10 +385,9 @@ static struct match\_attr \*parse\_attr\_line(const char \*line, const char \*src, |
|  |  | goto fail\_return; |
|  |  | } |
|  |  |  |
|  |  | res = xcalloc(1, |
|  |  | sizeof(\*res) + |
|  |  | sizeof(struct attr\_state) \* num\_attr + |
|  |  | (is\_macro ? 0 : namelen + 1)); |
|  |  | res = xcalloc(1, st\_add3(sizeof(\*res), |
|  |  | st\_mult(sizeof(struct attr\_state), num\_attr), |
|  |  | is\_macro ? 0 : namelen + 1)); |
|  |  | if (is\_macro) { |
|  |  | res->u.attr = git\_attr\_internal(name, namelen); |
|  |  | } else { |
| Expand Down  Expand Up | | @@ -447,11 +450,12 @@ struct attr\_stack { |
|  |  |  |
|  |  | static void attr\_stack\_free(struct attr\_stack \*e) |
|  |  | { |
|  |  | int i; |
|  |  | unsigned i; |
|  |  | free(e->origin); |
|  |  | for (i = 0; i < e->num\_matches; i++) { |
|  |  | struct match\_attr \*a = e->attrs[i]; |
|  |  | int j; |
|  |  | size\_t j; |
|  |  |  |
|  |  | for (j = 0; j < a->num\_attr; j++) { |
|  |  | const char \*setto = a->state[j].setto; |
|  |  | if (setto == ATTR\_\_TRUE || |
| Expand Down  Expand Up | | @@ -660,8 +664,8 @@ static void handle\_attr\_line(struct attr\_stack \*res, |
|  |  | a = parse\_attr\_line(line, src, lineno, flags); |
|  |  | if (!a) |
|  |  | return; |
|  |  | ALLOC\_GROW(res->attrs, res->num\_matches + 1, res->alloc); |
|  |  | res->attrs[res->num\_matches++] = a; |
|  |  | ALLOC\_GROW\_BY(res->attrs, res->num\_matches, 1, res->alloc); |
|  |  | res->attrs[res->num\_matches - 1] = a; |
|  |  | } |
|  |  |  |
|  |  | static struct attr\_stack \*read\_attr\_from\_array(const char \*\*list) |
| Expand Down  Expand Up | | @@ -701,11 +705,12 @@ void git\_attr\_set\_direction(enum git\_attr\_direction new\_direction) |
|  |  |  |
|  |  | static struct attr\_stack \*read\_attr\_from\_file(const char \*path, unsigned flags) |
|  |  | { |
|  |  | struct strbuf buf = STRBUF\_INIT; |
|  |  | int fd; |
|  |  | FILE \*fp; |
|  |  | struct attr\_stack \*res; |
|  |  | char buf[2048]; |
|  |  | int lineno = 0; |
|  |  | struct stat st; |
|  |  |  |
|  |  | if (flags & READ\_ATTR\_NOFOLLOW) |
|  |  | fd = open\_nofollow(path, O\_RDONLY); |
| Expand All | | @@ -717,15 +722,26 @@ static struct attr\_stack \*read\_attr\_from\_file(const char \*path, unsigned flags) |
|  |  | return NULL; |
|  |  | } |
|  |  | fp = xfdopen(fd, "r"); |
|  |  | if (fstat(fd, &st)) { |
|  |  | warning\_errno(\_("cannot fstat gitattributes file '%s'"), path); |
|  |  | fclose(fp); |
|  |  | return NULL; |
|  |  | } |
|  |  | if (st.st\_size >= ATTR\_MAX\_FILE\_SIZE) { |
|  |  | warning(\_("ignoring overly large gitattributes file '%s'"), path); |
|  |  | fclose(fp); |
|  |  | return NULL; |
|  |  | } |
|  |  |  |
|  |  | CALLOC\_ARRAY(res, 1); |
|  |  | while (fgets(buf, sizeof(buf), fp)) { |
|  |  | char \*bufp = buf; |
|  |  | if (!lineno) |
|  |  | skip\_utf8\_bom(&bufp, strlen(bufp)); |
|  |  | handle\_attr\_line(res, bufp, path, ++lineno, flags); |
|  |  | while (strbuf\_getline(&buf, fp) != EOF) { |
|  |  | if (!lineno && starts\_with(buf.buf, utf8\_bom)) |
|  |  | strbuf\_remove(&buf, 0, strlen(utf8\_bom)); |
|  |  | handle\_attr\_line(res, buf.buf, path, ++lineno, flags); |
|  |  | } |
|  |  |  |
|  |  | fclose(fp); |
|  |  | strbuf\_release(&buf); |
|  |  | return res; |
|  |  | } |
|  |  |  |
| Expand All | | @@ -736,6 +752,7 @@ static struct attr\_stack \*read\_attr\_from\_index(struct index\_state \*istate, |
|  |  | struct attr\_stack \*res; |
|  |  | char \*buf, \*sp; |
|  |  | int lineno = 0; |
|  |  | size\_t size; |
|  |  |  |
|  |  | if (!istate) |
|  |  | return NULL; |
| Expand All | | @@ -754,9 +771,13 @@ static struct attr\_stack \*read\_attr\_from\_index(struct index\_state \*istate, |
|  |  | if (!path\_in\_cone\_mode\_sparse\_checkout(path, istate)) |
|  |  | return NULL; |
|  |  |  |
|  |  | buf = read\_blob\_data\_from\_index(istate, path, NULL); |
|  |  | buf = read\_blob\_data\_from\_index(istate, path, &size); |
|  |  | if (!buf) |
|  |  | return NULL; |
|  |  | if (size >= ATTR\_MAX\_FILE\_SIZE) { |
|  |  | warning(\_("ignoring overly large gitattributes blob '%s'"), path); |
|  |  | return NULL; |
|  |  | } |
|  |  |  |
|  |  | CALLOC\_ARRAY(res, 1); |
|  |  | for (sp = buf; \*sp; ) { |
| Expand Down  Expand Up | | @@ -999,12 +1020,12 @@ static int macroexpand\_one(struct all\_attrs\_item \*all\_attrs, int nr, int rem); |
|  |  | static int fill\_one(struct all\_attrs\_item \*all\_attrs, |
|  |  | const struct match\_attr \*a, int rem) |
|  |  | { |
|  |  | int i; |
|  |  | size\_t i; |
|  |  |  |
|  |  | for (i = a->num\_attr - 1; rem > 0 && i >= 0; i--) { |
|  |  | const struct git\_attr \*attr = a->state[i].attr; |
|  |  | for (i = a->num\_attr; rem > 0 && i > 0; i--) { |
|  |  | const struct git\_attr \*attr = a->state[i - 1].attr; |
|  |  | const char \*\*n = &(all\_attrs[attr->attr\_nr].value); |
|  |  | const char \*v = a->state[i].setto; |
|  |  | const char \*v = a->state[i - 1].setto; |
|  |  |  |
|  |  | if (\*n == ATTR\_\_UNKNOWN) { |
|  |  | \*n = v; |
| Expand All | | @@ -1020,11 +1041,11 @@ static int fill(const char \*path, int pathlen, int basename\_offset, |
|  |  | struct all\_attrs\_item \*all\_attrs, int rem) |
|  |  | { |
|  |  | for (; rem > 0 && stack; stack = stack->prev) { |
|  |  | int i; |
|  |  | unsigned i; |
|  |  | const char \*base = stack->origin ? stack->origin : ""; |
|  |  |  |
|  |  | for (i = stack->num\_matches - 1; 0 < rem && 0 <= i; i--) { |
|  |  | const struct match\_attr \*a = stack->attrs[i]; |
|  |  | for (i = stack->num\_matches; 0 < rem && 0 < i; i--) { |
|  |  | const struct match\_attr \*a = stack->attrs[i - 1]; |
|  |  | if (a->is\_macro) |
|  |  | continue; |
|  |  | if (path\_matches(path, pathlen, basename\_offset, |
| Expand Down  Expand Up | | @@ -1055,11 +1076,11 @@ static void determine\_macros(struct all\_attrs\_item \*all\_attrs, |
|  |  | const struct attr\_stack \*stack) |
|  |  | { |
|  |  | for (; stack; stack = stack->prev) { |
|  |  | int i; |
|  |  | for (i = stack->num\_matches - 1; i >= 0; i--) { |
|  |  | const struct match\_attr \*ma = stack->attrs[i]; |
|  |  | unsigned i; |
|  |  | for (i = stack->num\_matches; i > 0; i--) { |
|  |  | const struct match\_attr \*ma = stack->attrs[i - 1]; |
|  |  | if (ma->is\_macro) { |
|  |  | int n = ma->u.attr->attr\_nr; |
|  |  | unsigned int n = ma->u.attr->attr\_nr; |
|  |  | if (!all\_attrs[n].macro) { |
|  |  | all\_attrs[n].macro = ma; |
|  |  | } |
| Expand Down  Expand Up | | @@ -1111,7 +1132,7 @@ void git\_check\_attr(struct index\_state \*istate, |
|  |  | collect\_some\_attrs(istate, path, check); |
|  |  |  |
|  |  | for (i = 0; i < check->nr; i++) { |
|  |  | size\_t n = check->items[i].attr->attr\_nr; |
|  |  | unsigned int n = check->items[i].attr->attr\_nr; |
|  |  | const char \*value = check->all\_attrs[n].value; |
|  |  | if (value == ATTR\_\_UNKNOWN) |
|  |  | value = ATTR\_\_UNSET; |
| Expand Down | |  |

12 changes: 12 additions & 0 deletions

12
[attr.h](#diff-3e5dce4801948fa3b9609714ca6b4c316c1ca143ed8430eb2809e8bda157a760 "attr.h")

Show comments

[View file](/git/git/blob/508386c6c5857b4faa2c3e491f422c98cc69ae76/attr.h)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -107,6 +107,18 @@ |
|  |  | \* - Free the `attr\_check` struct by calling `attr\_check\_free()`. |
|  |  | \*/ |
|  |  |  |
|  |  | /\*\* |
|  |  | \* The maximum line length for a gitattributes file. If the line exceeds this |
|  |  | \* length we will ignore it. |
|  |  | \*/ |
|  |  | #define ATTR\_MAX\_LINE\_LENGTH 2048 |
|  |  |  |
|  |  | /\*\* |
|  |  | \* The maximum size of the giattributes file. If the file exceeds this size we |
|  |  | \* will ignore it. |
|  |  | \*/ |
|  |  | #define ATTR\_MAX\_FILE\_SIZE (100 \* 1024 \* 1024) |
|  |  |  |
|  |  | struct index\_state; |
|  |  |  |
|  |  | /\*\* |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `508386c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgit%2Fgit%2Fcommit%2F508386c6c5857b4faa2c3e491f422c98cc69ae76) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from git-scm.com_cac314d0_20250115_082859.html ===

[![Git](/images/logo@2x.png)](/)

* [About](/about)
* [Documentation](/doc)
  + [Reference](/docs)
  + [Book](/book)
  + [Videos](/videos)
  + [External Links](/doc/ext)
* [Downloads](/downloads)
  + [GUI Clients](/downloads/guis)
  + [Logos](/downloads/logos)
* [Community](/community)

---

This book is available in
[English](/book/en/v2/Customizing-Git-Git-Attributes).

Full translation available in

| [azərbaycan dili](/book/az/v2/Git%E2%80%99i-F%C9%99rdil%C9%99%C5%9Fdirm%C9%99k-Git-Atributlar%C4%B1), |
| --- |
| [български език](/book/bg/v2/Git-%D0%BD%D0%B0-%D0%BD%D0%B8%D1%81%D0%BA%D0%BE-%D0%BD%D0%B8%D0%B2%D0%BE-Git-%D0%BE%D0%B1%D0%B5%D0%BA%D1%82%D0%B8), |
| [Deutsch](/book/de/v2/Git-einrichten-Git-Attribute), |
| [Español](/book/es/v2/Personalizaci%C3%B3n-de-Git-Git-Attributes), |
| [Français](/book/fr/v2/Personnalisation-de-Git-Attributs-Git), |
| [Ελληνικά](/book/gr), |
| [日本語](/book/ja/v2/Git-%E3%81%AE%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA-Git-%E3%81%AE%E5%B1%9E%E6%80%A7), |
| [한국어](/book/ko/v2/Git%EB%A7%9E%EC%B6%A4-Git-Attributes), |
| [Nederlands](/book/nl/v2/Git-aanpassen-Git-attributen), |
| [Русский](/book/ru/v2/%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-Git-%D0%90%D1%82%D1%80%D0%B8%D0%B1%D1%83%D1%82%D1%8B-Git), |
| [Slovenščina](/book/sl/v2/Prilagoditev-Gita-Atributi-Git), |
| [Tagalog](/book/tl/v2/Pag-aangkop-sa-Sariling-Pangangailagan-ng-Git-Mga-Katangian-ng-Git), |
| [Українська](/book/uk/v2/%D0%9D%D0%B0%D0%BB%D0%B0%D1%88%D1%82%D1%83%D0%B2%D0%B0%D0%BD%D0%BD%D1%8F-Git-%D0%90%D1%82%D1%80%D0%B8%D0%B1%D1%83%D1%82%D0%B8-Git) |
| [简体中文](/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E5%B1%9E%E6%80%A7), |

Partial translations available in

| [Čeština](/book/cs/v2/Customizing-Git-Atributy-Git), |
| --- |
| [Македонски](/book/mk/v2/%D0%9F%D0%B5%D1%80%D1%81%D0%BE%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%98%D0%B0-%D0%BD%D0%B0-Git-Git-%D0%90%D1%82%D1%80%D0%B8%D0%B1%D1%83%D1%82%D0%B8), |
| [Polski](/book/pl/v2/Dostosowywanie-Gita-Git-Attributes), |
| [Српски](/book/sr/v2/%D0%9F%D1%80%D0%B8%D0%BB%D0%B0%D0%B3%D0%BE%D1%92%D0%B0%D0%B2%D0%B0%D1%9A%D0%B5-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%B0-%D0%93%D0%B8%D1%82-%D0%93%D0%B8%D1%82-%D0%B0%D1%82%D1%80%D0%B8%D0%B1%D1%83%D1%82%D0%B8), |
| [Ўзбекча](/book/uz/v2/Customizing-Git-Git-Attributes), |
| [繁體中文](/book/zh-tw/v2/Customizing-Git-Git-Attributes), |

Translations started for

| [Беларуская](/book/be/v2/Customizing-Git-Git-Attributes), |
| --- |
| [فارسی](/book/fa/v2/Customizing-Git-Git-Attributes), |
| [Indonesian](/book/id/v2/Kostumisasi-Git-Git-Attributes), |
| [Italiano](/book/it/v2/Customizing-Git-Git-Attributes), |
| [Bahasa Melayu](/book/ms/v2/Customizing-Git-Git-Attributes), |
| [Português (Brasil)](/book/pt-br/v2/Customizing-Git-Git-Attributes), |
| [Português (Portugal)](/book/pt-pt/v2/Personalizar-o-Git-Git-Attributes), |
| [Svenska](/book/sv/v2/Customizing-Git-Git-Attributes), |
| [Türkçe](/book/tr/v2/Git%E2%80%99i-%C3%96zelle%C5%9Ftirmek-Git-Nitelikleri). |

---

Chapters ▾

1. ## 1. [Getting Started](/book/en/v2/Getting-Started-About-Version-Control)

   1. 1.1
      [About Version Control](/book/en/v2/Getting-Started-About-Version-Control)
   2. 1.2
      [A Short History of Git](/book/en/v2/Getting-Started-A-Short-History-of-Git)
   3. 1.3
      [What is Git?](/book/en/v2/Getting-Started-What-is-Git%3F)
   4. 1.4
      [The Command Line](/book/en/v2/Getting-Started-The-Command-Line)
   5. 1.5
      [Installing Git](/book/en/v2/Getting-Started-Installing-Git)
   6. 1.6
      [First-Time Git Setup](/book/en/v2/Getting-Started-First-Time-Git-Setup)
   7. 1.7
      [Getting Help](/book/en/v2/Getting-Started-Getting-Help)
   8. 1.8
      [Summary](/book/en/v2/Getting-Started-Summary)
2. ## 2. [Git Basics](/book/en/v2/Git-Basics-Getting-a-Git-Repository)

   1. 2.1
      [Getting a Git Repository](/book/en/v2/Git-Basics-Getting-a-Git-Repository)
   2. 2.2
      [Recording Changes to the Repository](/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository)
   3. 2.3
      [Viewing the Commit History](/book/en/v2/Git-Basics-Viewing-the-Commit-History)
   4. 2.4
      [Undoing Things](/book/en/v2/Git-Basics-Undoing-Things)
   5. 2.5
      [Working with Remotes](/book/en/v2/Git-Basics-Working-with-Remotes)
   6. 2.6
      [Tagging](/book/en/v2/Git-Basics-Tagging)
   7. 2.7
      [Git Aliases](/book/en/v2/Git-Basics-Git-Aliases)
   8. 2.8
      [Summary](/book/en/v2/Git-Basics-Summary)
3. ## 3. [Git Branching](/book/en/v2/Git-Branching-Branches-in-a-Nutshell)

   1. 3.1
      [Branches in a Nutshell](/book/en/v2/Git-Branching-Branches-in-a-Nutshell)
   2. 3.2
      [Basic Branching and Merging](/book/en/v2/Git-Branching-Basic-Branching-and-Merging)
   3. 3.3
      [Branch Management](/book/en/v2/Git-Branching-Branch-Management)
   4. 3.4
      [Branching Workflows](/book/en/v2/Git-Branching-Branching-Workflows)
   5. 3.5
      [Remote Branches](/book/en/v2/Git-Branching-Remote-Branches)
   6. 3.6
      [Rebasing](/book/en/v2/Git-Branching-Rebasing)
   7. 3.7
      [Summary](/book/en/v2/Git-Branching-Summary)
4. ## 4. [Git on the Server](/book/en/v2/Git-on-the-Server-The-Protocols)

   1. 4.1
      [The Protocols](/book/en/v2/Git-on-the-Server-The-Protocols)
   2. 4.2
      [Getting Git on a Server](/book/en/v2/Git-on-the-Server-Getting-Git-on-a-Server)
   3. 4.3
      [Generating Your SSH Public Key](/book/en/v2/Git-on-the-Server-Generating-Your-SSH-Public-Key)
   4. 4.4
      [Setting Up the Server](/book/en/v2/Git-on-the-Server-Setting-Up-the-Server)
   5. 4.5
      [Git Daemon](/book/en/v2/Git-on-the-Server-Git-Daemon)
   6. 4.6
      [Smart HTTP](/book/en/v2/Git-on-the-Server-Smart-HTTP)
   7. 4.7
      [GitWeb](/book/en/v2/Git-on-the-Server-GitWeb)
   8. 4.8
      [GitLab](/book/en/v2/Git-on-the-Server-GitLab)
   9. 4.9
      [Third Party Hosted Options](/book/en/v2/Git-on-the-Server-Third-Party-Hosted-Options)
   10. 4.10
       [Summary](/book/en/v2/Git-on-the-Server-Summary)
5. ## 5. [Distributed Git](/book/en/v2/Distributed-Git-Distributed-Workflows)

   1. 5.1
      [Distributed Workflows](/book/en/v2/Distributed-Git-Distributed-Workflows)
   2. 5.2
      [Contributing to a Project](/book/en/v2/Distributed-Git-Contributing-to-a-Project)
   3. 5.3
      [Maintaining a Project](/book/en/v2/Distributed-Git-Maintaining-a-Project)
   4. 5.4
      [Summary](/book/en/v2/Distributed-Git-Summary)

1. ## 6. [GitHub](/book/en/v2/GitHub-Account-Setup-and-Configuration)

   1. 6.1
      [Account Setup and Configuration](/book/en/v2/GitHub-Account-Setup-and-Configuration)
   2. 6.2
      [Contributing to a Project](/book/en/v2/GitHub-Contributing-to-a-Project)
   3. 6.3
      [Maintaining a Project](/book/en/v2/GitHub-Maintaining-a-Project)
   4. 6.4
      [Managing an organization](/book/en/v2/GitHub-Managing-an-organization)
   5. 6.5
      [Scripting GitHub](/book/en/v2/GitHub-Scripting-GitHub)
   6. 6.6
      [Summary](/book/en/v2/GitHub-Summary)
2. ## 7. [Git Tools](/book/en/v2/Git-Tools-Revision-Selection)

   1. 7.1
      [Revision Selection](/book/en/v2/Git-Tools-Revision-Selection)
   2. 7.2
      [Interactive Staging](/book/en/v2/Git-Tools-Interactive-Staging)
   3. 7.3
      [Stashing and Cleaning](/book/en/v2/Git-Tools-Stashing-and-Cleaning)
   4. 7.4
      [Signing Your Work](/book/en/v2/Git-Tools-Signing-Your-Work)
   5. 7.5
      [Searching](/book/en/v2/Git-Tools-Searching)
   6. 7.6
      [Rewriting History](/book/en/v2/Git-Tools-Rewriting-History)
   7. 7.7
      [Reset Demystified](/book/en/v2/Git-Tools-Reset-Demystified)
   8. 7.8
      [Advanced Merging](/book/en/v2/Git-Tools-Advanced-Merging)
   9. 7.9
      [Rerere](/book/en/v2/Git-Tools-Rerere)
   10. 7.10
       [Debugging with Git](/book/en/v2/Git-Tools-Debugging-with-Git)
   11. 7.11
       [Submodules](/book/en/v2/Git-Tools-Submodules)
   12. 7.12
       [Bundling](/book/en/v2/Git-Tools-Bundling)
   13. 7.13
       [Replace](/book/en/v2/Git-Tools-Replace)
   14. 7.14
       [Credential Storage](/book/en/v2/Git-Tools-Credential-Storage)
   15. 7.15
       [Summary](/book/en/v2/Git-Tools-Summary)
3. ## 8. [Customizing Git](/book/en/v2/Customizing-Git-Git-Configuration)

   1. 8.1
      [Git Configuration](/book/en/v2/Customizing-Git-Git-Configuration)
   2. 8.2
      [Git Attributes](/book/en/v2/Customizing-Git-Git-Attributes)
   3. 8.3
      [Git Hooks](/book/en/v2/Customizing-Git-Git-Hooks)
   4. 8.4
      [An Example Git-Enforced Policy](/book/en/v2/Customizing-Git-An-Example-Git-Enforced-Policy)
   5. 8.5
      [Summary](/book/en/v2/Customizing-Git-Summary)
4. ## 9. [Git and Other Systems](/book/en/v2/Git-and-Other-Systems-Git-as-a-Client)

   1. 9.1
      [Git as a Client](/book/en/v2/Git-and-Other-Systems-Git-as-a-Client)
   2. 9.2
      [Migrating to Git](/book/en/v2/Git-and-Other-Systems-Migrating-to-Git)
   3. 9.3
      [Summary](/book/en/v2/Git-and-Other-Systems-Summary)
5. ## 10. [Git Internals](/book/en/v2/Git-Internals-Plumbing-and-Porcelain)

   1. 10.1
      [Plumbing and Porcelain](/book/en/v2/Git-Internals-Plumbing-and-Porcelain)
   2. 10.2
      [Git Objects](/book/en/v2/Git-Internals-Git-Objects)
   3. 10.3
      [Git References](/book/en/v2/Git-Internals-Git-References)
   4. 10.4
      [Packfiles](/book/en/v2/Git-Internals-Packfiles)
   5. 10.5
      [The Refspec](/book/en/v2/Git-Internals-The-Refspec)
   6. 10.6
      [Transfer Protocols](/book/en/v2/Git-Internals-Transfer-Protocols)
   7. 10.7
      [Maintenance and Data Recovery](/book/en/v2/Git-Internals-Maintenance-and-Data-Recovery)
   8. 10.8
      [Environment Variables](/book/en/v2/Git-Internals-Environment-Variables)
   9. 10.9
      [Summary](/book/en/v2/Git-Internals-Summary)

1. ## A1. [Appendix A: Git in Other Environments](/book/en/v2/Appendix-A%3A-Git-in-Other-Environments-Graphical-Interfaces)

   1. A1.1
      [Graphical Interfaces](/book/en/v2/Appendix-A%3A-Git-in-Other-Environments-Graphical-Interfaces)
   2. A1.2
      [Git in Visual Studio](/book/en/v2/Appendix-A%3A-Git-in-Other-Environments-Git-in-Visual-Studio)
   3. A1.3
      [Git in Visual Studio Code](/book/en/v2/Appendix-A%3A-Git-in-Other-Environments-Git-in-Visual-Studio-Code)
   4. A1.4
      [Git in IntelliJ / PyCharm / WebStorm / PhpStorm / RubyMine](/book/en/v2/Appendix-A%3A-Git-in-Other-Environments-Git-in-IntelliJ-/-PyCharm-/-WebStorm-/-PhpStorm-/-RubyMine)
   5. A1.5
      [Git in Sublime Text](/book/en/v2/Appendix-A%3A-Git-in-Other-Environments-Git-in-Sublime-Text)
   6. A1.6
      [Git in Bash](/book/en/v2/Appendix-A%3A-Git-in-Other-Environments-Git-in-Bash)
   7. A1.7
      [Git in Zsh](/book/en/v2/Appendix-A%3A-Git-in-Other-Environments-Git-in-Zsh)
   8. A1.8
      [Git in PowerShell](/book/en/v2/Appendix-A%3A-Git-in-Other-Environments-Git-in-PowerShell)
   9. A1.9
      [Summary](/book/en/v2/Appendix-A%3A-Git-in-Other-Environments-Summary)
2. ## A2. [Appendix B: Embedding Git in your Applications](/book/en/v2/Appendix-B%3A-Embedding-Git-in-your-Applications-Command-line-Git)

   1. A2.1
      [Command-line Git](/book/en/v2/Appendix-B%3A-Embedding-Git-in-your-Applications-Command-line-Git)
   2. A2.2
      [Libgit2](/book/en/v2/Appendix-B%3A-Embedding-Git-in-your-Applications-Libgit2)
   3. A2.3
      [JGit](/book/en/v2/Appendix-B%3A-Embedding-Git-in-your-Applications-JGit)
   4. A2.4
      [go-git](/book/en/v2/Appendix-B%3A-Embedding-Git-in-your-Applications-go-git)
   5. A2.5
      [Dulwich](/book/en/v2/Appendix-B%3A-Embedding-Git-in-your-Applications-Dulwich)
3. ## A3. [Appendix C: Git Commands](/book/en/v2/Appendix-C%3A-Git-Commands-Setup-and-Config)

   1. A3.1
      [Setup and Config](/book/en/v2/Appendix-C%3A-Git-Commands-Setup-and-Config)
   2. A3.2
      [Getting and Creating Projects](/book/en/v2/Appendix-C%3A-Git-Commands-Getting-and-Creating-Projects)
   3. A3.3
      [Basic Snapshotting](/book/en/v2/Appendix-C%3A-Git-Commands-Basic-Snapshotting)
   4. A3.4
      [Branching and Merging](/book/en/v2/Appendix-C%3A-Git-Commands-Branching-and-Merging)
   5. A3.5
      [Sharing and Updating Projects](/book/en/v2/Appendix-C%3A-Git-Commands-Sharing-and-Updating-Projects)
   6. A3.6
      [Inspection and Comparison](/book/en/v2/Appendix-C%3A-Git-Commands-Inspection-and-Comparison)
   7. A3.7
      [Debugging](/book/en/v2/Appendix-C%3A-Git-Commands-Debugging)
   8. A3.8
      [Patching](/book/en/v2/Appendix-C%3A-Git-Commands-Patching)
   9. A3.9
      [Email](/book/en/v2/Appendix-C%3A-Git-Commands-Email)
   10. A3.10
       [External Systems](/book/en/v2/Appendix-C%3A-Git-Commands-External-Systems)
   11. A3.11
       [Administration](/book/en/v2/Appendix-C%3A-Git-Commands-Administration)
   12. A3.12
       [Plumbing Commands](/book/en/v2/Appendix-C%3A-Git-Commands-Plumbing-Commands)

2nd Edition

# 8.2 Customizing Git - Git Attributes

## Git Attributes

Some of these settings can also be specified for a path, so that Git applies those settings only for a subdirectory or subset of files.
These path-specific settings are called Git attributes and are set either in a `.gitattributes` file in one of your directories (normally the root of your project) or in the `.git/info/attributes` file if you don’t want the attributes file committed with your project.

Using attributes, you can do things like specify separate merge strategies for individual files or directories in your project, tell Git how to diff non-text files, or have Git filter content before you check it into or out of Git.
In this section, you’ll learn about some of the attributes you can set on your paths in your Git project and see a few examples of using this feature in practice.

### Binary Files

One cool trick for which you can use Git attributes is telling Git which files are binary (in cases it otherwise may not be able to figure out) and giving Git special instructions about how to handle those files.
For instance, some text files may be machine generated and not diffable, whereas some binary files can be diffed.
You’ll see how to tell Git which is which.

#### Identifying Binary Files

Some files look like text files but for all intents and purposes are to be treated as binary data.
For instance, Xcode projects on macOS contain a file that ends in `.pbxproj`, which is basically a JSON (plain-text JavaScript data format) dataset written out to disk by the IDE, which records your build settings and so on.
Although it’s technically a text file (because it’s all UTF-8), you don’t want to treat it as such because it’s really a lightweight database – you can’t merge the contents if two people change it, and diffs generally aren’t helpful.
The file is meant to be consumed by a machine.
In essence, you want to treat it like a binary file.

To tell Git to treat all `pbxproj` files as binary data, add the following line to your `.gitattributes` file:

```
*.pbxproj binary
```

Now, Git won’t try to convert or fix CRLF issues; nor will it try to compute or print a diff for changes in this file when you run `git show` or `git diff` on your project.

#### Diffing Binary Files

You can also use the Git attributes functionality to effectively diff binary files.
You do this by telling Git how to convert your binary data to a text format that can be compared via the normal diff.

First, you’ll use this technique to solve one of the most annoying problems known to humanity: version-controlling Microsoft Word documents.
If you want to version-control Word documents, you can stick them in a Git repository and commit every once in a while; but what good does that do?
If you run `git diff` normally, you only see something like this:

```
$ git diff
diff --git a/chapter1.docx b/chapter1.docx
index 88839c4..4afcb7c 100644
Binary files a/chapter1.docx and b/chapter1.docx differ
```

You can’t directly compare two versions unless you check them out and scan them manually, right?
It turns out you can do this fairly well using Git attributes.
Put the following line in your `.gitattributes` file:

```
*.docx diff=word
```

This tells Git that any file that matches this pattern (`.docx`) should use the “word” filter when you try to view a diff that contains changes.
What is the “word” filter?
You have to set it up.
Here you’ll configure Git to use the `docx2txt` program to convert Word documents into readable text files, which it will then diff properly.

First, you’ll need to install `docx2txt`; you can download it from <https://sourceforge.net/projects/docx2txt>.
Follow the instructions in the `INSTALL` file to put it somewhere your shell can find it.
Next, you’ll write a wrapper script to convert output to the format Git expects.
Create a file that’s somewhere in your path called `docx2txt`, and add these contents:

```
#!/bin/bash
docx2txt.pl "$1" -
```

Don’t forget to `chmod a+x` that file.
Finally, you can configure Git to use this script:

```
$ git config diff.word.textconv docx2txt
```

Now Git knows that if it tries to do a diff between two snapshots, and any of the files end in `.docx`, it should run those files through the “word” filter, which is defined as the `docx2txt` program.
This effectively makes nice text-based versions of your Word files before attempting to diff them.

Here’s an example: Chapter 1 of this book was converted to Word format and committed in a Git repository.
Then a new paragraph was added.
Here’s what `git diff` shows:

```
$ git diff
diff --git a/chapter1.docx b/chapter1.docx
index 0b013ca..ba25db5 100644
--- a/chapter1.docx
+++ b/chapter1.docx
@@ -2,6 +2,7 @@
 This chapter will be about getting started with Git. We will begin at the beginning by explaining some background on version control tools, then move on to how to get Git running on your system and finally how to get it setup to start working with. At the end of this chapter you should understand why Git is around, why you should use it and you should be all setup to do so.
 1.1. About Version Control
 What is "version control", and why should you care? Version control is a system that records changes to a file or set of files over time so that you can recall specific versions later. For the examples in this book you will use software source code as the files being version controlled, though in reality you can do this with nearly any type of file on a computer.
+Testing: 1, 2, 3.
 If you are a graphic or web designer and want to keep every version of an image or layout (which you would most certainly want to), a Version Control System (VCS) is a very wise thing to use. It allows you to revert files back to a previous state, revert the entire project back to a previous state, compare changes over time, see who last modified something that might be causing a problem, who introduced an issue and when, and more. Using a VCS also generally means that if you screw things up or lose files, you can easily recover. In addition, you get all this for very little overhead.
 1.1.1. Local Version Control Systems
 Many people's version-control method of choice is to copy files into another directory (perhaps a time-stamped directory, if they're clever). This approach is very common because it is so simple, but it is also incredibly error prone. It is easy to forget which directory you're in and accidentally write to the wrong file or copy over files you don't mean to.
```

Git successfully and succinctly tells us that we added the string “Testing: 1, 2, 3.”, which is correct.
It’s not perfect – formatting changes wouldn’t show up here – but it certainly works.

Another interesting problem you can solve this way involves diffing image files.
One way to do this is to run image files through a filter that extracts their EXIF information – metadata that is recorded with most image formats.
If you download and install the `exiftool` program, you can use it to convert your images into text about the metadata, so at least the diff will show you a textual representation of any changes that happened.
Put the following line in your `.gitattributes` file:

```
*.png diff=exif
```

Configure Git to use this tool:

```
$ git config diff.exif.textconv exiftool
```

If you replace an image in your project and run `git diff`, you see something like this:

```
diff --git a/image.png b/image.png
index 88839c4..4afcb7c 100644
--- a/image.png
+++ b/image.png
@@ -1,12 +1,12 @@
 ExifTool Version Number         : 7.74
-File Size                       : 70 kB
-File Modification Date/Time     : 2009:04:21 07:02:45-07:00
+File Size                       : 94 kB
+File Modification Date/Time     : 2009:04:21 07:02:43-07:00
 File Type                       : PNG
 MIME Type                       : image/png
-Image Width                     : 1058
-Image Height                    : 889
+Image Width                     : 1056
+Image Height                    : 827
 Bit Depth                       : 8
 Color Type                      : RGB with Alpha
```

You can easily see that the file size and image dimensions have both changed.

### Keyword Expansion

SVN- or CVS-style keyword expansion is often requested by developers used to those systems.
The main problem with this in Git is that you can’t modify a file with information about the commit after you’ve committed, because Git checksums the file first.
However, you can inject text into a file when it’s checked out and remove it again before it’s added to a commit.
Git attributes offers you two ways to do this.

First, you can inject the SHA-1 checksum of a blob into an `$Id$` field in the file automatically.
If you set this attribute on a file or set of files, then the next time you check out that branch, Git will replace that field with the SHA-1 of the blob.
It’s important to notice that it isn’t the SHA-1 of the commit, but of the blob itself.
Put the following line in your `.gitattributes` file:

```
*.txt ident
```

Add an `$Id$` reference to a test file:

```
$ echo '$Id$' > test.txt
```

The next time you check out this file, Git injects the SHA-1 of the blob:

```
$ rm test.txt
$ git checkout -- test.txt
$ cat test.txt
$Id: 42812b7653c7b88933f8a9d6cad0ca16714b9bb3 $
```

However, that result is of limited use.
If you’ve used keyword substitution in CVS or Subversion, you can include a datestamp – the SHA-1 isn’t all that helpful, because it’s fairly random and you can’t tell if one SHA-1 is older or newer than another just by looking at them.

It turns out that you can write your own filters for doing substitutions in files on commit/checkout.
These are called “clean” and “smudge” filters.
In the `.gitattributes` file, you can set a filter for particular paths and then set up scripts that will process files just before they’re checked out (“smudge”, see [The “smudge” filter is run on checkout](/book/en/v2/ch00/filters_a)) and just before they’re staged (“clean”, see [The “clean” filter is run when files are staged](/book/en/v2/ch00/filters_b)).
These filters can be set to do all sorts of fun things.

![The “smudge” filter is run on checkout](/book/en/v2/images/smudge.png)

Figure 169. The “smudge” filter is run on checkout

![The “clean” filter is run when files are staged](/book/en/v2/images/clean.png)

Figure 170. The “clean” filter is run when files are staged

The original commit message for this feature gives a simple example of running all your C source code through the `indent` program before committing.
You can set it up by setting the filter attribute in your `.gitattributes` file to filter `\*.c` files with the “indent” filter:

```
*.c filter=indent
```

Then, tell Git what the “indent” filter does on smudge and clean:

```
$ git config --global filter.indent.clean indent
$ git config --global filter.indent.smudge cat
```

In this case, when you commit files that match `*.c`, Git will run them through the indent program before it stages them and then run them through the `cat` program before it checks them back out onto disk.
The `cat` program does essentially nothing: it spits out the same data that it comes in.
This combination effectively filters all C source code files through `indent` before committing.

Another interesting example gets `$Date$` keyword expansion, RCS style.
To do this properly, you need a small script that takes a filename, figures out the last commit date for this project, and inserts the date into the file.
Here is a small Ruby script that does that:

```
#! /usr/bin/env ruby
data = STDIN.read
last_date = `git log --pretty=format:"%ad" -1`
puts data.gsub('$Date$', '$Date: ' + last_date.to_s + '$')
```

All the script does is get the latest commit date from the `git log` command, stick that into any `$Date$` strings it sees in stdin, and print the results – it should be simple to do in whatever language you’re most comfortable in.
You can name this file `expand_date` and put it in your path.
Now, you need to set up a filter in Git (call it `dater`) and tell it to use your `expand_date` filter to smudge the files on checkout.
You’ll use a Perl expression to clean that up on commit:

```
$ git config filter.dater.smudge expand_date
$ git config filter.dater.clean 'perl -pe "s/\\\$Date[^\\\$]*\\\$/\\\$Date\\\$/"'
```

This Perl snippet strips out anything it sees in a `$Date$` string, to get back to where you started.
Now that your filter is ready, you can test it by setting up a Git attribute for that file that engages the new filter and creating a file with your `$Date$` keyword:

```
date*.txt filter=dater
```

```
$ echo '# $Date$' > date_test.txt
```

If you commit those changes and check out the file again, you see the keyword properly substituted:

```
$ git add date_test.txt .gitattributes
$ git commit -m "Test date expansion in Git"
$ rm date_test.txt
$ git checkout date_test.txt
$ cat date_test.txt
# $Date: Tue Apr 21 07:26:52 2009 -0700$
```

You can see how powerful this technique can be for customized applications.
You have to be careful, though, because the `.gitattributes` file is committed and passed around with the project, but the driver (in this case, `dater`) isn’t, so it won’t work everywhere.
When you design these filters, they should be able to fail gracefully and have the project still work properly.

### Exporting Your Repository

Git attribute data also allows you to do some interesting things when exporting an archive of your project.

#### `export-ignore`

You can tell Git not to export certain files or directories when generating an archive.
If there is a subdirectory or file that you don’t want to include in your archive file but that you do want checked into your project, you can determine those files via the `export-ignore` attribute.

For example, say you have some test files in a `test/` subdirectory, and it doesn’t make sense to include them in the tarball export of your project.
You can add the following line to your Git attributes file:

```
test/ export-ignore
```

Now, when you run `git archive` to create a tarball of your project, that directory won’t be included in the archive.

#### `export-subst`

When exporting files for deployment you can apply `git log`’s formatting and keyword-expansion processing to selected portions of files marked with the `export-subst` attribute.

For instance, if you want to include a file named `LAST_COMMIT` in your project, and have metadata about the last commit automatically injected into it when `git archive` runs, you can for example set up your `.gitattributes` and `LAST_COMMIT` files like this:

```
LAST_COMMIT export-subst
```

```
$ echo 'Last commit date: $Format:%cd by %aN$' > LAST_COMMIT
$ git add LAST_COMMIT .gitattributes
$ git commit -am 'adding LAST_COMMIT file for archives'
```

When you run `git archive`, the contents of the archived file will look like this:

```
$ git archive HEAD | tar xCf ../deployment-testing -
$ cat ../deployment-testing/LAST_COMMIT
Last commit date: Tue Apr 21 08:38:48 2009 -0700 by Scott Chacon
```

The substitutions can include for example the commit message and any `git notes`, and `git log` can do simple word wrapping:

```
$ echo '$Format:Last commit: %h by %aN at %cd%n%+w(76,6,9)%B$' > LAST_COMMIT
$ git commit -am 'export-subst uses git log'\''s custom formatter

git archive uses git log'\''s `pretty=format:` processor
directly, and strips the surrounding `$Format:` and `$`
markup from the output.
'
$ git archive @ | tar xfO - LAST_COMMIT
Last commit: 312ccc8 by Jim Hill at Fri May 8 09:14:04 2015 -0700
       export-subst uses git log's custom formatter

         git archive uses git log's `pretty=format:` processor directly, and
         strips the surrounding `$Format:` and `$` markup from the output.
```

The resulting archive is suitable for deployment work, but like any exported archive it isn’t suitable for further development work.

### Merge Strategies

You can also use Git attributes to tell Git to use different merge strategies for specific files in your project.
One very useful option is to tell Git to not try to merge specific files when they have conflicts, but rather to use your side of the merge over someone else’s.

This is helpful if a branch in your project has diverged or is specialized, but you want to be able to merge changes back in from it, and you want to ignore certain files.
Say you have a database settings file called `database.xml` that is different in two branches, and you want to merge in your other branch without messing up the database file.
You can set up an attribute like this:

```
database.xml merge=ours
```

And then define a dummy `ours` merge strategy with:

```
$ git config --global merge.ours.driver true
```

If you merge in the other branch, instead of having merge conflicts with the `database.xml` file, you see something like this:

```
$ git merge topic
Auto-merging database.xml
Merge made by recursive.
```

In this case, `database.xml` stays at whatever version you originally had.

[prev](/book/en/v2/Customizing-Git-Git-Configuration) | [next](/book/en/v2/Customizing-Git-Git-Hooks)

[About this site](/site)

Patches, suggestions, and comments are welcome.

Git is a member of [Software Freedom Conservancy](/sfc)

[![scroll-to-top](/images/icons/chevron-up@2x.png)](#top)



=== Content from git-scm.com_1228e433_20250115_082900.html ===

[![Git](/images/logo@2x.png)](/)

* [About](/about)
* [Documentation](/doc)
  + [Reference](/docs)
  + [Book](/book)
  + [Videos](/videos)
  + [External Links](/doc/ext)
* [Downloads](/downloads)
  + [GUI Clients](/downloads/guis)
  + [Logos](/downloads/logos)
* [Community](/community)

English ▾
Localized versions of **pretty-formats** manual

1. [English](/docs/pretty-formats)

Want to read in your language or fix typos?
 [You can help translate this page](https://github.com/jnavila/git-manpages-l10n).

Topics ▾
### Setup and Config

* [git](/docs/git)
* [config](/docs/git-config)
* [help](/docs/git-help)
* [bugreport](/docs/git-bugreport)
* [Credential helpers](/doc/credential-helpers)

### Getting and Creating Projects

* [init](/docs/git-init)
* [clone](/docs/git-clone)

### Basic Snapshotting

* [add](/docs/git-add)
* [status](/docs/git-status)
* [diff](/docs/git-diff)
* [commit](/docs/git-commit)
* [notes](/docs/git-notes)
* [restore](/docs/git-restore)
* [reset](/docs/git-reset)
* [rm](/docs/git-rm)
* [mv](/docs/git-mv)

### Branching and Merging

* [branch](/docs/git-branch)
* [checkout](/docs/git-checkout)
* [switch](/docs/git-switch)
* [merge](/docs/git-merge)
* [mergetool](/docs/git-mergetool)
* [log](/docs/git-log)
* [stash](/docs/git-stash)
* [tag](/docs/git-tag)
* [worktree](/docs/git-worktree)

### Sharing and Updating Projects

* [fetch](/docs/git-fetch)
* [pull](/docs/git-pull)
* [push](/docs/git-push)
* [remote](/docs/git-remote)
* [submodule](/docs/git-submodule)

### Inspection and Comparison

* [show](/docs/git-show)
* [log](/docs/git-log)
* [diff](/docs/git-diff)
* [difftool](/docs/git-difftool)
* [range-diff](/docs/git-range-diff)
* [shortlog](/docs/git-shortlog)
* [describe](/docs/git-describe)

### Patching

* [apply](/docs/git-apply)
* [cherry-pick](/docs/git-cherry-pick)
* [diff](/docs/git-diff)
* [rebase](/docs/git-rebase)
* [revert](/docs/git-revert)

### Debugging

* [bisect](/docs/git-bisect)
* [blame](/docs/git-blame)
* [grep](/docs/git-grep)

### Email

* [am](/docs/git-am)
* [apply](/docs/git-apply)
* [format-patch](/docs/git-format-patch)
* [send-email](/docs/git-send-email)
* [request-pull](/docs/git-request-pull)

### External Systems

* [svn](/docs/git-svn)
* [fast-import](/docs/git-fast-import)

### Server Admin

* [daemon](/docs/git-daemon)
* [update-server-info](/docs/git-update-server-info)

### Guides

* [gitattributes](/docs/gitattributes)
* [Command-line interface conventions](/docs/gitcli)
* [Everyday Git](/docs/giteveryday)
* [Frequently Asked Questions (FAQ)](/docs/gitfaq)
* [Glossary](/docs/gitglossary)
* [Hooks](/docs/githooks)
* [gitignore](/docs/gitignore)
* [gitmodules](/docs/gitmodules)
* [Revisions](/docs/gitrevisions)
* [Submodules](/docs/gitsubmodules)
* [Tutorial](/docs/gittutorial)
* [Workflows](/docs/gitworkflows)
* [All guides...](/docs/git#_guides)

### Administration

* [clean](/docs/git-clean)
* [gc](/docs/git-gc)
* [fsck](/docs/git-fsck)
* [reflog](/docs/git-reflog)
* [filter-branch](/docs/git-filter-branch)
* [instaweb](/docs/git-instaweb)
* [archive](/docs/git-archive)
* [bundle](/docs/git-bundle)

### Plumbing Commands

* [cat-file](/docs/git-cat-file)
* [check-ignore](/docs/git-check-ignore)
* [checkout-index](/docs/git-checkout-index)
* [commit-tree](/docs/git-commit-tree)
* [count-objects](/docs/git-count-objects)
* [diff-index](/docs/git-diff-index)
* [for-each-ref](/docs/git-for-each-ref)
* [hash-object](/docs/git-hash-object)
* [ls-files](/docs/git-ls-files)
* [ls-tree](/docs/git-ls-tree)
* [merge-base](/docs/git-merge-base)
* [read-tree](/docs/git-read-tree)
* [rev-list](/docs/git-rev-list)
* [rev-parse](/docs/git-rev-parse)
* [show-ref](/docs/git-show-ref)
* [symbolic-ref](/docs/git-symbolic-ref)
* [update-index](/docs/git-update-index)
* [update-ref](/docs/git-update-ref)
* [verify-pack](/docs/git-verify-pack)
* [write-tree](/docs/git-write-tree)

Latest version
▾
pretty-formats last updated in 2.45.0
Changes in the **pretty-formats** manual

1. 2.45.1 → 2.48.0 no changes
2. [2.45.0
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/grey-dot.png)
   ![](/images/icons/grey-dot.png)

   *04/29/24*](/docs/pretty-formats/2.45.0)
3. 2.43.1 → 2.44.2 no changes
4. [2.43.0
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/grey-dot.png)
   ![](/images/icons/grey-dot.png)

   *11/20/23*](/docs/pretty-formats/2.43.0)
5. 2.40.1 → 2.42.3 no changes
6. [2.40.0
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/grey-dot.png)
   ![](/images/icons/grey-dot.png)

   *03/12/23*](/docs/pretty-formats/2.40.0)
7. 2.35.1 → 2.39.5 no changes
8. [2.35.0
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/green-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/red-dot.png)
   ![](/images/icons/grey-dot.png)
   ![](/images/icons/grey-dot.png)

   *01/24/22*](/docs/pretty-formats/2.35.0)
9. 2.32.1 → 2.34.8 no changes
10. [2.32.0
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *06/06/21*](/docs/pretty-formats/2.32.0)
11. 2.31.1 → 2.31.8 no changes
12. [2.31.0
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *03/15/21*](/docs/pretty-formats/2.31.0)
13. 2.28.1 → 2.30.9 no changes
14. [2.28.0
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *07/27/20*](/docs/pretty-formats/2.28.0)
15. 2.27.1 no changes
16. [2.27.0
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *06/01/20*](/docs/pretty-formats/2.27.0)
17. 2.26.1 → 2.26.3 no changes
18. [2.26.0
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *03/22/20*](/docs/pretty-formats/2.26.0)
19. 2.25.1 → 2.25.5 no changes
20. [2.25.0
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *01/13/20*](/docs/pretty-formats/2.25.0)
21. 2.24.1 → 2.24.4 no changes
22. [2.24.0
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *11/04/19*](/docs/pretty-formats/2.24.0)
23. 2.22.1 → 2.23.4 no changes
24. [2.22.0
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *06/07/19*](/docs/pretty-formats/2.22.0)
25. 2.21.1 → 2.21.4 no changes
26. [2.21.0
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *02/24/19*](/docs/pretty-formats/2.21.0)
27. 2.20.1 → 2.20.5 no changes
28. [2.20.0
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *12/09/18*](/docs/pretty-formats/2.20.0)
29. 2.17.1 → 2.19.6 no changes
30. [2.17.0
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *04/02/18*](/docs/pretty-formats/2.17.0)
31. [2.16.6
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *12/06/19*](/docs/pretty-formats/2.16.6)
32. [2.15.4
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *12/06/19*](/docs/pretty-formats/2.15.4)
33. [2.14.6
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *12/06/19*](/docs/pretty-formats/2.14.6)
34. [2.13.7
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *05/22/18*](/docs/pretty-formats/2.13.7)
35. [2.12.5
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *09/22/17*](/docs/pretty-formats/2.12.5)
36. [2.11.4
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *09/22/17*](/docs/pretty-formats/2.11.4)
37. [2.10.5
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *09/22/17*](/docs/pretty-formats/2.10.5)
38. [2.9.5
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *07/30/17*](/docs/pretty-formats/2.9.5)
39. [2.8.6
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *07/30/17*](/docs/pretty-formats/2.8.6)
40. 2.6.7 → 2.7.6 no changes
41. [2.5.6
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *05/05/17*](/docs/pretty-formats/2.5.6)
42. [2.4.12
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *05/05/17*](/docs/pretty-formats/2.4.12)
43. 2.3.10 no changes
44. [2.2.3
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *09/04/15*](/docs/pretty-formats/2.2.3)
45. [2.1.4
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *12/17/14*](/docs/pretty-formats/2.1.4)
46. [2.0.5
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/green-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/red-dot.png)
    ![](/images/icons/grey-dot.png)
    ![](/images/icons/grey-dot.png)

    *12/17/14*](/docs/pretty-formats/2.0.5)

Check your version of git by running

`git --version`

## PRETTY FORMATS

If the commit is a merge, and if the pretty-format
is not *oneline*, *email* or *raw*, an additional line is
inserted before the *Author:* line. This line begins with
"Merge: " and the hashes of ancestral commits are printed,
separated by spaces. Note that the listed commits may not
necessarily be the list of the **direct** parent commits if you
have limited your view of history: for example, if you are
only interested in changes related to a certain directory or
file.

There are several built-in formats, and you can define
additional formats by setting a pretty.<name>
config option to either another format name, or a
*format:* string, as described below (see
[git-config[1]](/docs/git-config)). Here are the details of the
built-in formats:

* *oneline*

  ```
  <hash> <title-line>
  ```

  This is designed to be as compact as possible.
* *short*

  ```
  commit <hash>
  Author: <author>
  ```

  ```
  <title-line>
  ```
* *medium*

  ```
  commit <hash>
  Author: <author>
  Date:   <author-date>
  ```

  ```
  <title-line>
  ```

  ```
  <full-commit-message>
  ```
* *full*

  ```
  commit <hash>
  Author: <author>
  Commit: <committer>
  ```

  ```
  <title-line>
  ```

  ```
  <full-commit-message>
  ```
* *fuller*

  ```
  commit <hash>
  Author:     <author>
  AuthorDate: <author-date>
  Commit:     <committer>
  CommitDate: <committer-date>
  ```

  ```
  <title-line>
  ```

  ```
  <full-commit-message>
  ```
* *reference*

  ```
  <abbrev-hash> (<title-line>, <short-author-date>)
  ```

  This format is used to refer to another commit in a commit message and
  is the same as `--pretty='format:%C(auto)%h (%s, %ad)'`. By default,
  the date is formatted with `--date=short` unless another `--date` option
  is explicitly specified. As with any `format:` with format
  placeholders, its output is not affected by other options like
  `--decorate` and `--walk-reflogs`.
* *email*

  ```
  From <hash> <date>
  From: <author>
  Date: <author-date>
  Subject: [PATCH] <title-line>
  ```

  ```
  <full-commit-message>
  ```
* *mboxrd*

  Like *email*, but lines in the commit message starting with "From "
  (preceded by zero or more ">") are quoted with ">" so they aren’t
  confused as starting a new commit.
* *raw*

  The *raw* format shows the entire commit exactly as
  stored in the commit object. Notably, the hashes are
  displayed in full, regardless of whether --abbrev or
  --no-abbrev are used, and *parents* information show the
  true parent commits, without taking grafts or history
  simplification into account. Note that this format affects the way
  commits are displayed, but not the way the diff is shown e.g. with
  `git log --raw`. To get full object names in a raw diff format,
  use `--no-abbrev`.
* *format:<format-string>*

  The *format:<format-string>* format allows you to specify which information
  you want to show. It works a little bit like printf format,
  with the notable exception that you get a newline with *%n*
  instead of *\n*.

  E.g, *format:"The author of %h was %an, %ar%nThe title was >>%s<<%n"*
  would show something like this:

  ```
  The author of fe6e0ee was Junio C Hamano, 23 hours ago
  The title was >>t4119: test autocomputing -p<n> for traditional diff input.<<
  ```

  The placeholders are:

  + Placeholders that expand to a single literal character:

     *%n*

    newline

     *%%*

    a raw *%*

     *%x00*

    *%x* followed by two hexadecimal digits is replaced with a
    byte with the hexadecimal digits' value (we will call this
    "literal formatting code" in the rest of this document).
  + Placeholders that affect formatting of later placeholders:

     *%Cred*

    switch color to red

     *%Cgreen*

    switch color to green

     *%Cblue*

    switch color to blue

     *%Creset*

    reset color

     *%C(…​)*

    color specification, as described under Values in the
    "CONFIGURATION FILE" section of [git-config[1]](/docs/git-config). By
    default, colors are shown only when enabled for log output
    (by `color.diff`, `color.ui`, or `--color`, and respecting
    the `auto` settings of the former if we are going to a
    terminal). `%C(auto,...)` is accepted as a historical
    synonym for the default (e.g., `%C(auto,red)`). Specifying
    `%C(always,...)` will show the colors even when color is
    not otherwise enabled (though consider just using
    `--color=always` to enable color for the whole output,
    including this format and anything else git might color).
    `auto` alone (i.e. `%C(auto)`) will turn on auto coloring
    on the next placeholders until the color is switched
    again.

     *%m*

    left (`<`), right (`>`) or boundary (`-`) mark

     *%w([<w>[,<i1>[,<i2>]]])*

    switch line wrapping, like the -w option of
    [git-shortlog[1]](/docs/git-shortlog).

     *%<( <N> [,trunc|ltrunc|mtrunc])*

    make the next placeholder take at
    least N column widths, padding spaces on
    the right if necessary. Optionally
    truncate (with ellipsis *..*) at the left (ltrunc) `..ft`,
    the middle (mtrunc) `mi..le`, or the end
    (trunc) `rig..`, if the output is longer than
    N columns.
    Note 1: that truncating
    only works correctly with N >= 2.
    Note 2: spaces around the N and M (see below)
    values are optional.
    Note 3: Emojis and other wide characters
    will take two display columns, which may
    over-run column boundaries.
    Note 4: decomposed character combining marks
    may be misplaced at padding boundaries.

     *%<|( <M> )*

    make the next placeholder take at least until Mth
    display column, padding spaces on the right if necessary.
    Use negative M values for column positions measured
    from the right hand edge of the terminal window.

     *%>( <N> )*, *%>|( <M> )*

    similar to *%<( <N> )*, *%<|( <M> )* respectively,
    but padding spaces on the left

     *%>>( <N> )*, *%>>|( <M> )*

    similar to *%>( <N> )*, *%>|( <M> )*
    respectively, except that if the next
    placeholder takes more spaces than given and
    there are spaces on its left, use those
    spaces

     *%><( <N> )*, *%><|( <M> )*

    similar to *%<( <N> )*, *%<|( <M> )*
    respectively, but padding both sides
    (i.e. the text is centered)
  + Placeholders that expand to information extracted from the commit:

     *%H*

    commit hash

     *%h*

    abbreviated commit hash

     *%T*

    tree hash

     *%t*

    abbreviated tree hash

     *%P*

    parent hashes

     *%p*

    abbreviated parent hashes

     *%an*

    author name

     *%aN*

    author name (respecting .mailmap, see [git-shortlog[1]](/docs/git-shortlog)
    or [git-blame[1]](/docs/git-blame))

     *%ae*

    author email

     *%aE*

    author email (respecting .mailmap, see [git-shortlog[1]](/docs/git-shortlog)
    or [git-blame[1]](/docs/git-blame))

     *%al*

    author email local-part (the part before the *@* sign)

     *%aL*

    author local-part (see *%al*) respecting .mailmap, see
    [git-shortlog[1]](/docs/git-shortlog) or [git-blame[1]](/docs/git-blame))

     *%ad*

    author date (format respects --date= option)

     *%aD*

    author date, RFC2822 style

     *%ar*

    author date, relative

     *%at*

    author date, UNIX timestamp

     *%ai*

    author date, ISO 8601-like format

     *%aI*

    author date, strict ISO 8601 format

     *%as*

    author date, short format (`YYYY-MM-DD`)

     *%ah*

    author date, human style (like the `--date=human` option of
    [git-rev-list[1]](/docs/git-rev-list))

     *%cn*

    committer name

     *%cN*

    committer name (respecting .mailmap, see
    [git-shortlog[1]](/docs/git-shortlog) or [git-blame[1]](/docs/git-blame))

     *%ce*

    committer email

     *%cE*

    committer email (respecting .mailmap, see
    [git-shortlog[1]](/docs/git-shortlog) or [git-blame[1]](/docs/git-blame))

     *%cl*

    committer email local-part (the part before the *@* sign)

     *%cL*

    committer local-part (see *%cl*) respecting .mailmap, see
    [git-shortlog[1]](/docs/git-shortlog) or [git-blame[1]](/docs/git-blame))

     *%cd*

    committer date (format respects --date= option)

     *%cD*

    committer date, RFC2822 style

     *%cr*

    committer date, relative

     *%ct*

    committer date, UNIX timestamp

     *%ci*

    committer date, ISO 8601-like format

     *%cI*

    committer date, strict ISO 8601 format

     *%cs*

    committer date, short format (`YYYY-MM-DD`)

     *%ch*

    committer date, human style (like the `--date=human` option of
    [git-rev-list[1]](/docs/git-rev-list))

     *%d*

    ref names, like the --decorate option of [git-log[1]](/docs/git-log)

     *%D*

    ref names without the " (", ")" wrapping.

     *%(decorate[:<options>])*

    ref names with custom decorations. The `decorate` string may be followed by a
    colon and zero or more comma-separated options. Option values may contain
    literal formatting codes. These must be used for commas (`%x2C`) and closing
    parentheses (`%x29`), due to their role in the option syntax.

    - *prefix=<value>*: Shown before the list of ref names. Defaults to " `(`".
    - *suffix=<value>*: Shown after the list of ref names. Defaults to "`)`".
    - *separator=<value>*: Shown between ref names. Defaults to "`,` ".
    - *pointer=<value>*: Shown between HEAD and the branch it points to, if any.
      Defaults to " `->` ".
    - *tag=<value>*: Shown before tag names. Defaults to "`tag:` ".

  For example, to produce decorations with no wrapping
  or tag annotations, and spaces as separators:

  +
  `%(decorate:prefix=,suffix=,tag=,separator= )`

   *%(describe[:<options>])*

  human-readable name, like [git-describe[1]](/docs/git-describe); empty string for
  undescribable commits. The `describe` string may be followed by a colon and
  zero or more comma-separated options. Descriptions can be inconsistent when
  tags are added or removed at the same time.

  + *tags[=<bool-value>]*: Instead of only considering annotated tags,
    consider lightweight tags as well.
  + *abbrev=<number>*: Instead of using the default number of hexadecimal digits
    (which will vary according to the number of objects in the repository with a
    default of 7) of the abbreviated object name, use <number> digits, or as many
    digits as needed to form a unique object name.
  + *match=<pattern>*: Only consider tags matching the given
    `glob(7)` pattern, excluding the "refs/tags/" prefix.
  + *exclude=<pattern>*: Do not consider tags matching the given
    `glob(7)` pattern, excluding the "refs/tags/" prefix.

   *%S*

  ref name given on the command line by which the commit was reached
  (like `git log --source`), only works with `git log`

   *%e*

  encoding

   *%s*

  subject

   *%f*

  sanitized subject line, suitable for a filename

   *%b*

  body

   *%B*

  raw body (unwrapped subject and body)

   *%N*

  commit notes

   *%GG*

  raw verification message from GPG for a signed commit

   *%G?*

  show "G" for a good (valid) signature,
  "B" for a bad signature,
  "U" for a good signature with unknown validity,
  "X" for a good signature that has expired,
  "Y" for a good signature made by an expired key,
  "R" for a good signature made by a revoked key,
  "E" if the signature cannot be checked (e.g. missing key)
  and "N" for no signature

   *%GS*

  show the name of the signer for a signed commit

   *%GK*

  show the key used to sign a signed commit

   *%GF*

  show the fingerprint of the key used to sign a signed commit

   *%GP*

  show the fingerprint of the primary key whose subkey was used
  to sign a signed commit

   *%GT*

  show the trust level for the key used to sign a signed commit

   *%gD*

  reflog selector, e.g., `refs/stash@{1}` or `refs/stash@{2
  minutes ago}`; the format follows the rules described for the
  `-g` option. The portion before the `@` is the refname as
  given on the command line (so `git log -g refs/heads/master`
  would yield `refs/heads/master@{0}`).

   *%gd*

  shortened reflog selector; same as `%gD`, but the refname
  portion is shortened for human readability (so
  `refs/heads/master` becomes just `master`).

   *%gn*

  reflog identity name

   *%gN*

  reflog identity name (respecting .mailmap, see
  [git-shortlog[1]](/docs/git-shortlog) or [git-blame[1]](/docs/git-blame))

   *%ge*

  reflog identity email

   *%gE*

  reflog identity email (respecting .mailmap, see
  [git-shortlog[1]](/docs/git-shortlog) or [git-blame[1]](/docs/git-blame))

   *%gs*

  reflog subject

   *%(trailers[:<options>])*

  display the trailers of the body as interpreted by
  [git-interpret-trailers[1]](/docs/git-interpret-trailers). The `trailers` string may be followed by
  a colon and zero or more comma-separated options. If any option is provided
  multiple times, the last occurrence wins.

  + *key=<key>*: only show trailers with specified <key>. Matching is done
    case-insensitively and trailing colon is optional. If option is
    given multiple times trailer lines matching any of the keys are
    shown. This option automatically enables the `only` option so that
    non-trailer lines in the trailer block are hidden. If that is not
    desired it can be disabled with `only=false`. E.g.,
    `%(trailers:key=Reviewed-by)` shows trailer lines with key
    `Reviewed-by`.
  + *only[=<bool>]*: select whether non-trailer lines from the trailer
    block should be included.
  + *separator=<sep>*: specify the separator inserted between trailer
    lines. Defaults to a line feed character. The string <sep> may contain
    the literal formatting codes described above. To use comma as
    separator one must use `%x2C` as it would otherwise be parsed as
    next option. E.g., `%(trailers:key=Ticket,separator=%x2C )`
    shows all trailer lines whose key is "Ticket" separated by a comma
    and a space.
  + *unfold[=<bool>]*: make it behave as if interpret-trailer’s `--unfold`
    option was given. E.g.,
    `%(trailers:only,unfold=true)` unfolds and shows all trailer lines.
  + *keyonly[=<bool>]*: only show the key part of the trailer.
  + *valueonly[=<bool>]*: only show the value part of the trailer.
  + *key\_value\_separator=<sep>*: specify the separator inserted between
    the key and value of each trailer. Defaults to ": ". Otherwise it
    shares the same semantics as *separator=<sep>* above.

| Note | Some placeholders may depend on other options given to the revision traversal engine. For example, the `%g*` reflog options will insert an empty string unless we are traversing reflog entries (e.g., by `git log -g`). The `%d` and `%D` placeholders will use the "short" decoration format if `--decorate` was not already provided on the command line. |
| --- | --- |

The boolean options accept an optional value `[=<bool-value>]`. The values
`true`, `false`, `on`, `off` etc. are all accepted. See the "boolean"
sub-section in "EXAMPLES" in [git-config[1]](/docs/git-config). If a boolean
option is given with no value, it’s enabled.

If you add a `+` (plus sign) after *%* of a placeholder, a line-feed
is inserted immediately before the expansion if and only if the
placeholder expands to a non-empty string.

If you add a `-` (minus sign) after *%* of a placeholder, all consecutive
line-feeds immediately preceding the expansion are deleted if and only if the
placeholder expands to an empty string.

If you add a ` ` (space) after *%* of a placeholder, a space
is inserted immediately before the expansion if and only if the
placeholder expands to a non-empty string.

* *tformat:*

  The *tformat:* format works exactly like *format:*, except that it
  provides "terminator" semantics instead of "separator" semantics. In
  other words, each commit has the message terminator character (usually a
  newline) appended, rather than a separator placed between entries.
  This means that the final entry of a single-line format will be properly
  terminated with a new line, just as the "oneline" format does.
  For example:

  ```
  $ git log -2 --pretty=format:%h 4da45bef \
    | perl -pe '$_ .= " -- NO NEWLINE\n" unless /\n/'
  4da45be
  7134973 -- NO NEWLINE

  $ git log -2 --pretty=tformat:%h 4da45bef \
    | perl -pe '$_ .= " -- NO NEWLINE\n" unless /\n/'
  4da45be
  7134973
  ```

  In addition, any unrecognized string that has a `%` in it is interpreted
  as if it has `tformat:` in front of it. For example, these two are
  equivalent:

  ```
  $ git log -2 --pretty=tformat:%h 4da45bef
  $ git log -2 --pretty=%h 4da45bef
  ```

[About this site](/site)

Patches, suggestions, and comments are welcome.

Git is a member of [Software Freedom Conservancy](/sfc)

[![scroll-to-top](/images/icons/chevron-up@2x.png)](#top)



=== Content from github.com_fef2adcc_20250115_082903.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgit%2Fgit%2Fsecurity%2Fadvisories%2FGHSA-475x-2q3q-hvwq)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgit%2Fgit%2Fsecurity%2Fadvisories%2FGHSA-475x-2q3q-hvwq)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=git%2Fgit)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[git](/git)
/
**[git](/git/git)**
Public

* [Notifications](/login?return_to=%2Fgit%2Fgit) You must be signed in to change notification settings
* [Fork
  25.8k](/login?return_to=%2Fgit%2Fgit)
* [Star
   53.2k](/login?return_to=%2Fgit%2Fgit)

* [Code](/git/git)
* [Pull requests
  194](/git/git/pulls)
* [Actions](/git/git/actions)
* [Security](/git/git/security)
* [Insights](/git/git/pulse)

Additional navigation options

* [Code](/git/git)
* [Pull requests](/git/git/pulls)
* [Actions](/git/git/actions)
* [Security](/git/git/security)
* [Insights](/git/git/pulse)

# Heap overflow in `git archive`, `git log --format` leading to RCE

Critical

[ttaylorr](/ttaylorr)
published
GHSA-475x-2q3q-hvwq
Jan 17, 2023

## Package

No package listed

## Affected versions

<= v2.30.6, v2.31.5, v2.32.4, v2.33.5, v2.34.5, v2.35.5, v2.36.3, v2.37.4, v2.38.2, v2.39.0

## Patched versions

>= v2.30.7, v2.31.6, v2.32.5, v2.33.6, v2.34.6, v2.35.6, v2.36.4, v2.37.5, v2.38.3, v2.39.1

## Description

### Impact

`git log` has the ability to display commits using an arbitrary format with its `--format` specifiers. This functionality is also exposed to `git archive` via the [`export-subst`](https://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes#_export_subst) gitattribute.

When processing the [padding operators](https://git-scm.com/docs/pretty-formats#Documentation/pretty-formats.txt-emltltNgttruncltruncmtruncem) (e.g., `%<(`, `%<|(`, `%>(`, `%>>(`, or `%><(` ), an integer overflow can occur in `pretty.c::format_and_pad_commit()` where a `size_t` is improperly stored as an `int`, and then added as an offset to a subsequent `memcpy()` call.

This overflow can be triggered directly by a user running a command which invokes the commit formatting machinery (e.g., `git log --format=...`). It may also be triggered indirectly through `git archive` via the `export-subst` mechanism, which expands format specifiers inside of files within the repository during a `git archive`.

This integer overflow can result in arbitrary heap writes, which may result in remote code execution.

### Patches

The problem has been patched in the versions published on 2023-01-17, going back to v2.30.7.

### Workarounds

The most complete workaround is upgrading to the most recent patched version published.

If doing so is impractical, disable `git archive` in untrusted repositories. If you expose `git archive` via `git daemon`, disable it by running `git config --global daemon.uploadArch false`. If you do not, avoid running `git archive` directly on untrusted repositories.

### Credit

Credit for finding this vulnerability goes to Joern Schneeweisz of GitLab. An early patch was authored by Markus Vervier of X41 D-Sec. Both of their work was on behalf of the OSTIF. The patches that appear in the releases have further been polished and extended by Patrick Steinhardt of GitLab.

### Severity

Critical

### CVE ID

CVE-2022-41903

### Weaknesses

[CWE-122](/advisories?query=cwe%3A122)

### Credits

* [![@markusx41](https://avatars.githubusercontent.com/u/48803024?s=40&v=4)](/markusx41)
  [markusx41](/markusx41)
  Analyst
* [![@joernchen](https://avatars.githubusercontent.com/u/1334559?s=40&v=4)](/joernchen)
  [joernchen](/joernchen)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


