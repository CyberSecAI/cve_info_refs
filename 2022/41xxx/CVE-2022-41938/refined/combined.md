=== Content from discuss.flarum.org_9c89bde9_20250114_185212.html ===


[![Flarum Community](https://discuss.flarum.org/assets/logo-2q2rcevl.png)](https://discuss.flarum.org)

Loading...

This site is best viewed in a modern browser with JavaScript enabled.

Something went wrong while trying to load the full version of this site. Try hard-refreshing this page to fix the error.

# Critical security update to Flarum core, with new incident write-up (v1.0.2)

### davwheat

This post was edited 2021-06-07 at 20:50 UTC to include a full write-up of the security incident. The original announcement is still available at the bottom of this post.

**If you have not yet updated to v1.0.2 or later, do so immediately. The details of the vulnerability are public, and your forum could be maliciously exploited.**

**Affected versions:**

* **v1.0.0** - ⚠️ Affected
* **v1.0.1** - ⚠️ Affected
* **<= v0.1.0-beta.16** - ✅ Not affected

**Upgrade instructions:**

```
# Update to latest version
composer update --prefer-dist --no-dev -a -W

# Verify that you're on v1.0.2
composer show flarum/core

# Clear cache
php flarum cache:clear
```

---

### Preface

On Saturday 5 June 2021 at 23:02 UTC, I ([@davwheat](https://discuss.flarum.org/u/davwheat)) discovered a critical cross-site scripting (XSS) vulnerability in Flarum core, affecting versions v1.0.0 and v1.0.1.

This vulnerability related to the handling of variables passed to core's translator, and the possible conversion of strings into HTML DOM nodes.

The details of this vulnerability were disclosed on the Flarum Discord's `#devs-security` channel at 23:05 UTC (3 mins after discovery). The vulnerability's CVE score was 10.0, which is the highest CVE score possible.

The vulnerability was initially found while performing some local testing on an unrelated area of core's code, before noticing that HTML strings entered into the search box would be parsed and inserted into the DOM as HTML instead of text.

This was patched through a combination of efforts from multiple developers, and swiftly pushed to core's master branch at 01:47 UTC the next day (2021-06-06). Matt ( [@tankerkiller125](https://discuss.flarum.org/u/tankerkiller125)) manually pushed the update to demo.flarum.site and nightly.flarum.site for testing purposes and to patch the vulnerability. After verifying that the patch worked as expected and didn't have noticeable effects on other areas of core and bundled extensions, it was released as v1.0.2 at 02:26 UTC.

Posts were made on Discuss involving the creation a new discussion (<https://discuss.flarum.org/d/27558>) and posts on the v1.0.0 and v1.0.1 release discussions. Jordan ([@jordanjay29](https://discuss.flarum.org/u/jordanjay29)) sent an announcement in Discord a few minutes later at 02:32 UTC.

### What caused the vulnerability?

Flarum's translation system allowed for string inputs to be converted into HTML DOM nodes when rendered. This change was made between v0.1.0-beta.16 and v1.0.0 and was not noticed or documented.

This allowed for any user to type malicious HTML markup within certain user input fields and have this execute on client browsers. The example which led to the discovery of this vulnerability was in the forum search box. Entering faux-malicious HTML markup, such as `<script>alert('test')</script>` resulted in an alert box appearing on the forum. This attack could also be modified to perform AJAX requests on behalf of a user, possibly deleting discussions, modifying their settings or profile, or even modifying settings on the Admin panel if the attack was targeted towards a privileged user.

The estimated CVSS vector for this vulnerability is `CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:H/I:H/A:H`, resulting in a CVE score of 10, the highest possible. [See the CVSS score breakdown](https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=AV:N/AC:L/PR:N/UI:N/S:C/C:H/I:H/A:H&version=3.1).

A [security advisory](https://docs.github.com/en/code-security/security-advisories/publishing-a-security-advisory) has been published on GitHub detailing information of the vulnerability: <https://github.com/flarum/core/security/advisories/GHSA-5qjq-69w6-fg57>. We have been issued with a CVE (`CVE-2021-32671`) that will be published on the official CVE list at mitre.org: <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32671>

#### CVSS breakdown

**Attack vector: network**

This attack is performed over a network without physical or local access required. The network does not have to be adjacent.

**Attack complexity: low**

The attack can be performed relatively simply and affected all forums, despite their individual configurations. It is repeatable under all conditions.

**User interaction: none**

The example that led to the discovery of this vulnerability does require user interaction: a malicious link must be clicked and then the search box must be entered. However, we believe there is a high chance that it may be possible to perform an attack due to this vulnerability without any user interaction

**Scope: changed**

The vulnerable component is the Flarum forum. The impacted component is the user's browser, therefore the scope has changed.

**Confidentiality impact: high**

An impacted user's details could be fully retrieved by the attacker via a malicious AJAX request.

**Integrity impact: high**

An impacted user's details could be changed by the attacker via a malicious AJAX request.

**Availability impact: high**

If a forum administrator was impacted, a malicious AJAX request could modify forum settings on the Admin dashboard and result in a full forum denial of service. This could be by injecting broken Javascript code into the custom header resulting in a broken forum frontend.

### How was the vulnerability fixed?

When passing variables to the translator, we now perform some extra checks.

Now, if the passed variable is a string, we will wrap it in a Mithril fragment (a VDOM node that does not get converted into an actual node when rendered), and then use that instead. Mithril will ensure that the contents of this fragment are rendered as a string only, and not as HTML markup.

For more info, please see the commit that fixes this vulnerability: [flarum/core`440bed8`](https://github.com/flarum/core/commit/440bed81b8019dff00642c8f493b4909d505a28a)

### What did we do right?

The quick disclosure and reaction time of multiple developers allowed for the rapid patching of core. This vulnerability was patched in 3 hours and 24 minutes, which is incredible.

All available members of the core team dropped what they were working on to patch the vulnerability together. Over 630 messages were sent between developers, QA testers and the Foundation board members during the discovery, verification and patching of this vulnerability. We couldn't have asked for anything more from the entire Flarum team when we needed them.

### What could we improve?

At the time of the discovery, no online developers had the ability to draft a security disclosure on GitHub. This would have provided us with a secure way to attempt to develop a patch together and review the code more easily. Instead, we needed to send screenshots of code and write suggestions in Discord. This also meant we could only easily test the patch on one device (mine) before pushing to master and then testing on other deployments.

### How can we prevent this happening again?

Our rich text formatter is currently located outside of the Flarum organisation. This package was developed independently from the Flarum team, so code reviews by multiple core developers never took place. Despite this, however, our organisation code reviews often look more closely at code style, correctness and readability as opposed to searching for all possible exploits.

This vulnerability was discovered purely by luck. There is no telling how long this could have remained in Flarum if it was not caught. We need to work towards having Javascript tests as standard for Flarum core. We currently have PHP tests which check that users cannot perform dangerous actions if they do not have permission, but we don't have any way to automatically check the forum frontend for possible vulnerabilities and bugs. This would be extremely helpful for future release cycles, bug detection and vulnerability scanning.

### Original announcement

**[Recently](https://github.com/flarum/core/releases/tag/v1.0.2) we released a critical security fix for Flarum core. We urge all forums running versions v1.0.0 and v1.0.1 to update immediately to v1.0.2.**

### Affected versions

* **v1.0.0** - ⚠️ Affected
* **v1.0.1** - ⚠️ Affected
* **<= v0.1.0-beta.16** - ✅ Not affected

### Impact

This critical vulnerability allows any user to perform a cross-site scripting (XSS) attack, which could result in escalation of privilege and denial of service for forums running the affected versions.

We estimate this to have a CVE score of 10, which is the highest possible severity.

Full details will be available in the near future as forums running on affected versions update.

### Patches

All forums running Flarum core v1.0.0 or v1.0.1 should immediately update to v1.0.2.

### References

A security advisory has been published on GitHub detailing this vulnerability: <https://github.com/flarum/core/security/advisories/GHSA-5qjq-69w6-fg57>.

Full details will be available in the near future as forums running on affected versions update.

### Credit

Thank you to [@davwheat](https://discuss.flarum.org/u/davwheat) for identifying the vulnerability and providing the patch.

> A reminder that if you ever become aware of a security issue in Flarum, please report it to us privately by emailing security@flarum.org, and we will address it promptly.
>
> You can find our [full security policy](https://github.com/flarum/core/security/policy) on GitHub.

### How to update

Update immediately to Flarum core v1.0.2.

```
# Update to latest version
composer update --prefer-dist --no-dev -a -W

# Verify that you're on v1.0.2
composer show flarum/core

# Clear cache
php flarum cache:clear
```
### Follow-up

Full details will be available in the near future as forums running on affected versions update.

### Support

As always, for support, please create a new discussion in the [Support tag](https://discuss.flarum.org/t/support).

---

### pupsik

After update, problem with extensions:

`Fatal error: Declaration of FoF\Gamification\Gambit\HotGambit::conditions(Flarum\Query\AbstractQueryState $search, array $matches, $negate) must be compatible with Flarum\Search\AbstractRegexGambit::conditions(Flarum\Search\SearchState $search, array $matches, $negate) in \vendor\fof\gamification\src\Gambit\HotGambit.php on line 33`

---

### Ralkage

[pupsik](https://discuss.flarum.org/d/27558-critical-security-update-to-flarum-core-with-new-incident-write-up-v102/3) which PHP version are you running?

---

### peopleinside

[pupsik](https://discuss.flarum.org/d/27558-critical-security-update-to-flarum-core-with-new-incident-write-up-v102/3) you should ask help to the Gamification developer extension 🙂

[Prcek](https://discuss.flarum.org/d/27558-critical-security-update-to-flarum-core-with-new-incident-write-up-v102/11) this is maybe because you need run `php flarum migrate` after the SSH update command or simply insert the database password for end up the update 😄 I don't think this is related to the security issue that has been fixed.

[@davwheat](https://discuss.flarum.org/u/davwheat) you may need add the security alert also on GitHub <https://github.com/flarum/core/security/advisories>

---

### pupsik

Never mind. I have a backup of v0.1.0-beta.16. I will use that and sleep well.

---

### pupsik

7.4.16

---

### Hari

Successfully upgraded, thanks for the bug fix 🙂 🎉

it would be great if we get notified in our own flarum dashboard about the updates like Wordpress does 😄

for now subscribed @ github core & receiving email notifications 🙂

---

### tankerkiller125

[Hari](https://discuss.flarum.org/d/27558-critical-security-update-to-flarum-core-with-new-incident-write-up-v102/7) this is something we've discussed a little bit internally, but always got pushed off/back it order to get stable out. Now that stable is out we'll probably revisit this kind of thing.

---

### [deleted]

I upgraded [![](https://i.ibb.co/Q8PKqWW/image.png)](https://i.ibb.co/Q8PKqWW/image.png) But still I am really afraid. 😨

---

### Hari

[[deleted]](https://discuss.flarum.org/d/27558-critical-security-update-to-flarum-core-with-new-incident-write-up-v102/8) you are grownup now, do not be afraid of anything .. just save the backup in the vault 😋

---

### Prcek

**Update:** As [@peopleinside](https://discuss.flarum.org/u/peopleinside) note, don't forget `php flarum migrate` after update 🙈

---

### Prcek

[peopleinside](https://discuss.flarum.org/d/27558-critical-security-update-to-flarum-core-with-new-incident-write-up-v102/12) Yeah, you are absolutely right 👍 This is the first time I forgot to run `php flarum migrate` after upgrade. So I wondered what my eyes saw 😁

---

### luceos

> [peopleinside](https://discuss.flarum.org/d/27558-critical-security-update-to-flarum-core-with-new-incident-write-up-v102/12) [@davwheat](https://discuss.flarum.org/u/davwheat) you may need add the security alert also on GitHub <https://github.com/flarum/core/security/advisories>

Yeah we are working on that.

---

### davwheat

[peopleinside](https://discuss.flarum.org/d/27558-critical-security-update-to-flarum-core-with-new-incident-write-up-v102/12)

A security advisory for this vulnerability has been published on GitHub: <https://github.com/flarum/core/security/advisories/GHSA-5qjq-69w6-fg57>

---

### Justoverclock

flarum.it, update ok 🙂

---

### Zeokat

First Stable first CVE with score 10 😅

---

### luceos

[Zeokat](https://discuss.flarum.org/d/27558-critical-security-update-to-flarum-core-with-new-incident-write-up-v102/17) it was quite a challenge, but I think we nailed it 🙈🤯

---

### pupsik

I fixed my error, by uninstalling gamification, and installing it back on 1.0.2.

---

### Star

Isn't there any extension can be used for rss now?

---

### [deleted]

> [Star](https://discuss.flarum.org/d/27558-critical-security-update-to-flarum-core-with-new-incident-write-up-v102/21) Isn't there any extension can be used for rss now?

Try this: <https://discuss.flarum.org/d/27569-rss-feed>

---

[Next Page »](https://discuss.flarum.org/d/27558-critical-security-update-to-flarum-core-with-new-incident-write-up-v102?page=2)



=== Content from github.com_c3572ce2_20250114_185214.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fframework%2Fsecurity%2Fadvisories%2FGHSA-7x4w-j98p-854x)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fframework%2Fsecurity%2Fadvisories%2FGHSA-7x4w-j98p-854x)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=flarum%2Fframework)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[flarum](/flarum)
/
**[framework](/flarum/framework)**
Public

* [Notifications](/login?return_to=%2Fflarum%2Fframework) You must be signed in to change notification settings
* [Fork
  838](/login?return_to=%2Fflarum%2Fframework)
* [Star
   6.4k](/login?return_to=%2Fflarum%2Fframework)

* [Code](/flarum/framework)
* [Issues
  43](/flarum/framework/issues)
* [Pull requests
  9](/flarum/framework/pulls)
* [Actions](/flarum/framework/actions)
* [Security](/flarum/framework/security)
* [Insights](/flarum/framework/pulse)

Additional navigation options

* [Code](/flarum/framework)
* [Issues](/flarum/framework/issues)
* [Pull requests](/flarum/framework/pulls)
* [Actions](/flarum/framework/actions)
* [Security](/flarum/framework/security)
* [Insights](/flarum/framework/pulse)

# XSS vulnerability with discussion titles

Critical

[SychO9](/SychO9)
published
GHSA-7x4w-j98p-854x
Nov 18, 2022

## Package

composer

flarum/core
([Composer](/advisories?query=ecosystem%3Acomposer))

## Affected versions

>=1.5.0, <1.6.2

## Patched versions

1.6.2

## Description

Flarum's page title system allowed for page titles to be converted into HTML DOM nodes when pages were rendered. The change was made after `v1.5` and was not noticed.

This allowed an attacker to inject malicious HTML markup using a discussion title input, either by creating a new discussion or renaming one. The XSS attack occurs after a visitor opens the relevant discussion page.

### Impact

All communities running Flarum from `v1.5.0` to `v1.6.1` are impacted.

### Patches

The vulnerability has been fixed and published as flarum/core `v1.6.2`. All communities running Flarum from `v1.5.0` to `v1.6.1` have to upgrade as soon as possible to v1.6.2 using:

```
composer update --prefer-dist --no-dev -a -W

```

You can then confirm you run the latest version using:

```
composer show flarum/core

```
### Workarounds

**None.**

### For more information

For any questions or comments on this vulnerability please visit <https://discuss.flarum.org/d/27558>.

For support questions create a discussion at <https://discuss.flarum.org/t/support>.

A reminder that if you ever become aware of a security issue in Flarum, please report it to us privately by emailing security@flarum.org, and we will address it promptly.

### Severity

Critical

9.1

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
Low

User interaction
Required

Scope
Changed

Confidentiality
High

Integrity
High

Availability
High

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:L/UI:R/S:C/C:H/I:H/A:H

### CVE ID

CVE-2022-41938

### Weaknesses

[CWE-79](/advisories?query=cwe%3A79)

### Credits

* [![@dangzed](https://avatars.githubusercontent.com/u/53900447?s=40&v=4)](/dangzed)
  [dangzed](/dangzed)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_4da1b5ba_20250114_185214.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fframework%2Fcommit%2F690de9ce0ffe7ac4d45b73e303f44340c3433138)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fframework%2Fcommit%2F690de9ce0ffe7ac4d45b73e303f44340c3433138)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=flarum%2Fframework)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[flarum](/flarum)
/
**[framework](/flarum/framework)**
Public

* [Notifications](/login?return_to=%2Fflarum%2Fframework) You must be signed in to change notification settings
* [Fork
  838](/login?return_to=%2Fflarum%2Fframework)
* [Star
   6.4k](/login?return_to=%2Fflarum%2Fframework)

* [Code](/flarum/framework)
* [Issues
  43](/flarum/framework/issues)
* [Pull requests
  9](/flarum/framework/pulls)
* [Actions](/flarum/framework/actions)
* [Security](/flarum/framework/security)
* [Insights](/flarum/framework/pulse)

Additional navigation options

* [Code](/flarum/framework)
* [Issues](/flarum/framework/issues)
* [Pull requests](/flarum/framework/pulls)
* [Actions](/flarum/framework/actions)
* [Security](/flarum/framework/security)
* [Insights](/flarum/framework/pulse)

## Commit

[Permalink](/flarum/framework/commit/690de9ce0ffe7ac4d45b73e303f44340c3433138)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

fix: evaluated page title content ([#3684](https://github.com/flarum/framework/pull/3684))

[Browse files](/flarum/framework/tree/690de9ce0ffe7ac4d45b73e303f44340c3433138)
Browse the repository at this point in the history

```
* fix: evaluated page title content
* chore: add comment
* chore: use DOMParser instead
* fix: use `innerHTML` for the actual value

Signed-off-by: Sami Mazouz <sychocouldy@gmail.com>
Co-authored-by: David Wheatley <hi@davwheat.dev>
```

* Loading branch information

[![@SychO9](https://avatars.githubusercontent.com/u/20267363?s=40&v=4)](/SychO9) [![@davwheat](https://avatars.githubusercontent.com/u/7406822?s=40&v=4)](/davwheat)

[SychO9](/flarum/framework/commits?author=SychO9 "View all commits by SychO9")
and
[davwheat](/flarum/framework/commits?author=davwheat "View all commits by davwheat")
authored
Nov 18, 2022

1 parent
[50253a2](/flarum/framework/commit/50253a2eb81058cbc3eaf6aaa193546349d5cdbd)

commit 690de9c

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**12 additions**
and
**6 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* framework/core

  + js/src/common

    - framework/core/js/src/common/Application.tsx
      [Application.tsx](#diff-7c73b6091b8d93b8af5f890a9c0ce85fc22be5c468fe925d34681653dc7f721e)
  + views/frontend

    - framework/core/views/frontend/app.blade.php
      [app.blade.php](#diff-13351cc3ad3e855a164e643139ca223b3b618aa97a8901776ff68ac5ae25ecea)

## There are no files selected for viewing

16 changes: 11 additions & 5 deletions

16
[framework/core/js/src/common/Application.tsx](#diff-7c73b6091b8d93b8af5f890a9c0ce85fc22be5c468fe925d34681653dc7f721e "framework/core/js/src/common/Application.tsx")

Show comments

[View file](/flarum/framework/blob/690de9ce0ffe7ac4d45b73e303f44340c3433138/framework/core/js/src/common/Application.tsx)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -410,16 +410,22 @@ export default class Application { |
|  |  | pageNumber: 1, |
|  |  | }; |
|  |  |  |
|  |  | const title = |
|  |  | let title = |
|  |  | onHomepage || !this.title |
|  |  | ? extractText(app.translator.trans('core.lib.meta\_titles.without\_page\_title', params)) |
|  |  | : extractText(app.translator.trans('core.lib.meta\_titles.with\_page\_title', params)); |
|  |  |  |
|  |  | const tempEl = document.createElement('div'); |
|  |  | tempEl.innerHTML = title; |
|  |  | const decodedTitle = tempEl.innerText; |
|  |  | title = count + title; |
|  |  |  |
|  |  | document.title = count + decodedTitle; |
|  |  | // We pass the title through a DOMParser to allow HTML entities |
|  |  | // to be rendered correctly, while still preventing XSS attacks |
|  |  | // from user input by using a script-disabled environment. |
|  |  | // https://github.com/flarum/framework/issues/3514 |
|  |  | // https://github.com/flarum/framework/pull/3684 |
|  |  | const parser = new DOMParser(); |
|  |  | const safeTitle = parser.parseFromString(title, 'text/html').body.innerHTML; |
|  |  |  |
|  |  | document.title = safeTitle; |
|  |  | } |
|  |  |  |
|  |  | protected transformRequestOptions<ResponseType>(flarumOptions: FlarumRequestOptions<ResponseType>): InternalFlarumRequestOptions<ResponseType> { |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[framework/core/views/frontend/app.blade.php](#diff-13351cc3ad3e855a164e643139ca223b3b618aa97a8901776ff68ac5ae25ecea "framework/core/views/frontend/app.blade.php")

Show comments

[View file](/flarum/framework/blob/690de9ce0ffe7ac4d45b73e303f44340c3433138/framework/core/views/frontend/app.blade.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -3,7 +3,7 @@ |
|  |  | @if ($language) lang="{{ $language }}" @endif> |
|  |  | <head> |
|  |  | <meta charset="utf-8"> |
|  |  | <title>{!! $title !!}</title> |
|  |  | <title>{{ $title }}</title> |
|  |  |  |
|  |  | {!! $head !!} |
|  |  | </head> |
| This comment has been minimized. [Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fframework%2Fcommit%2F690de9ce0ffe7ac4d45b73e303f44340c3433138)       Sorry, something went wrong.           Copy link    Quote reply     @KevinD313 **[KevinD313](/KevinD313)** [Nov 22, 2022](#r90675372)  Kevin      All reactions | | |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `690de9c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fframework%2Fcommit%2F690de9ce0ffe7ac4d45b73e303f44340c3433138) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


