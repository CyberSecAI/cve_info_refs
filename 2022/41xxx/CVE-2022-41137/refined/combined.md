=== Content from lists.apache.org_77a13282_20250114_224545.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from www.openwall.com_f780c02d_20250114_224540.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](3) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <d9ad5b1e-d9a8-ec57-82ef-dfbfbfb59e37@apache.org>
Date: Wed, 04 Dec 2024 13:28:56 +0000
From: Stamatis Zampetakis <zabetak@...che.org>
To: oss-security@...ts.openwall.com
Subject: CVE-2022-41137: Apache Hive: Deserialization of untrusted data
 when fetching partitions from the Metastore

Severity: moderate

Affected versions:

- Apache Hive 4.0.0-alpha-1 before 4.0.0

Description:

Apache Hive Metastore (HMS) uses SerializationUtilities#deserializeObjectWithTypeInformation method when filtering and fetching partitions that is unsafe and can lead to Remote Code Execution (RCE) since it allows the deserialization of arbitrary data.

In real deployments, the vulnerability can be exploited only by authenticated users/clients that were able to successfully establish a connection to the Metastore. From an API perspective any code that calls the unsafe method may be vulnerable unless it performs additional prerechecks on the input arguments.

This issue is being tracked as HIVE-26539

Credit:

Junjie Liao (reporter)

References:

<https://github.com/apache/hive>
<https://issues.apache.org/jira/browse/HIVE-26539>
<https://github.com/apache/hive/commit/60027bb9c91a93affcfebd9068f064bc1f2a74c9>
<https://hive.apache.org/>
<https://www.cve.org/CVERecord?id=CVE-2022-41137>
<https://issues.apache.org/jira/browse/HIVE-26539>

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from github.com_93f1ca99_20250114_224544.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fhive%2Fcommit%2F60027bb9c91a93affcfebd9068f064bc1f2a74c9)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fhive%2Fcommit%2F60027bb9c91a93affcfebd9068f064bc1f2a74c9)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=apache%2Fhive)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[apache](/apache)
/
**[hive](/apache/hive)**
Public

* [Notifications](/login?return_to=%2Fapache%2Fhive) You must be signed in to change notification settings
* [Fork
  4.7k](/login?return_to=%2Fapache%2Fhive)
* [Star
   5.6k](/login?return_to=%2Fapache%2Fhive)

* [Code](/apache/hive)
* [Pull requests
  62](/apache/hive/pulls)
* [Actions](/apache/hive/actions)
* [Security](/apache/hive/security)
* [Insights](/apache/hive/pulse)

Additional navigation options

* [Code](/apache/hive)
* [Pull requests](/apache/hive/pulls)
* [Actions](/apache/hive/actions)
* [Security](/apache/hive/security)
* [Insights](/apache/hive/pulse)

## Commit

[Permalink](/apache/hive/commit/60027bb9c91a93affcfebd9068f064bc1f2a74c9)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

[HIVE-26539](https://issues.apache.org/jira/browse/HIVE-26539): Prevent unsafe deserialization in PartitionExpressionForM…

[Browse files](/apache/hive/tree/60027bb9c91a93affcfebd9068f064bc1f2a74c9)
Browse the repository at this point in the history

```
…etastore ([#3605](https://github.com/apache/hive/pull/3605))
```

* Loading branch information

[![@dengzhhu653](https://avatars.githubusercontent.com/u/4394480?s=40&v=4)](/dengzhhu653)

[dengzhhu653](/apache/hive/commits?author=dengzhhu653 "View all commits by dengzhhu653")
authored
Oct 18, 2022

1 parent
[88fb576](/apache/hive/commit/88fb57621eead67f94d8fb12187187c01bc26abb)

commit 60027bb

 Show file tree

 Hide file tree

Showing
**4 changed files**
with
**64 additions**
and
**25 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* ql/src

  + java/org/apache/hadoop/hive/ql

    - exec

      * ql/src/java/org/apache/hadoop/hive/ql/exec/SerializationUtilities.java
        [SerializationUtilities.java](#diff-fc88a6b692ef34c3f06ade02a1c4528f1ddb2811fc59718702bd51ff84e985c2)
    - optimizer/ppr

      * ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionExpressionForMetastore.java
        [PartitionExpressionForMetastore.java](#diff-a64d50041a4d40fb64e66f99ee1929f48e7079c02ad0d276f98d6b7da88e12e5)
  + test/org/apache/hadoop/hive/ql/exec

    - ql/src/test/org/apache/hadoop/hive/ql/exec/TestSerializationUtilities.java
      [TestSerializationUtilities.java](#diff-06f1ef89698b92cc5b3fe4146af9e96f39be07ddb8a2fbb2bfc65f8afb16c763)
* standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore

  + standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/ObjectStore.java
    [ObjectStore.java](#diff-ddc1cac0afb55312b1d426288dbb7c32611ea996d2224f1692f3a53134fd9a80)

## There are no files selected for viewing

39 changes: 36 additions & 3 deletions

39
[ql/src/java/org/apache/hadoop/hive/ql/exec/SerializationUtilities.java](#diff-fc88a6b692ef34c3f06ade02a1c4528f1ddb2811fc59718702bd51ff84e985c2 "ql/src/java/org/apache/hadoop/hive/ql/exec/SerializationUtilities.java")

Show comments

[View file](/apache/hive/blob/60027bb9c91a93affcfebd9068f064bc1f2a74c9/ql/src/java/org/apache/hadoop/hive/ql/exec/SerializationUtilities.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -124,6 +124,10 @@ private static class KryoWithHooks extends Kryo implements Configurable { |
|  |  | private Hook globalHook; |
|  |  | // this should be set on-the-fly after borrowing this instance and needs to be reset on release |
|  |  | private Configuration configuration; |
|  |  | // default false, should be reset on release |
|  |  | private boolean isExprNodeFirst = false; |
|  |  | // total classes we have met during (de)serialization, should be reset on release |
|  |  | private long classCounter = 0; |
|  |  |  |
|  |  | @SuppressWarnings({"unchecked", "rawtypes"}) |
|  |  | private static final class SerializerWithHook extends com.esotericsoftware.kryo.Serializer { |
| Expand Down  Expand Up | | @@ -228,6 +232,32 @@ public void setConf(Configuration conf) { |
|  |  | public Configuration getConf() { |
|  |  | return configuration; |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public com.esotericsoftware.kryo.Registration getRegistration(Class type) { |
|  |  | // If PartitionExpressionForMetastore performs deserialization at remote HMS, |
|  |  | // the first class encountered during deserialization must be an ExprNodeDesc, |
|  |  | // throw exception to avoid potential security problem if it is not. |
|  |  | if (isExprNodeFirst && classCounter == 0) { |
|  |  | if (!ExprNodeDesc.class.isAssignableFrom(type)) { |
|  |  | throw new UnsupportedOperationException( |
|  |  | "The object to be deserialized must be an ExprNodeDesc, but encountered: " + type); |
|  |  | } |
|  |  | } |
|  |  | classCounter++; |
|  |  | return super.getRegistration(type); |
|  |  | } |
|  |  |  |
|  |  | public void setExprNodeFirst(boolean isPartFilter) { |
|  |  | this.isExprNodeFirst = isPartFilter; |
|  |  | } |
|  |  |  |
|  |  | // reset the fields on release |
|  |  | public void restore() { |
|  |  | setConf(null); |
|  |  | isExprNodeFirst = false; |
|  |  | classCounter = 0; |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | private static final Object FAKE\_REFERENCE = new Object(); |
| Expand Down  Expand Up | | @@ -294,7 +324,7 @@ public static Kryo borrowKryo(Configuration configuration) { |
|  |  | \*/ |
|  |  | public static void releaseKryo(Kryo kryo) { |
|  |  | if (kryo != null){ |
|  |  | ((KryoWithHooks) kryo).setConf(null); |
|  |  | ((KryoWithHooks) kryo).restore(); |
|  |  | } |
|  |  | kryoPool.free(kryo); |
|  |  | } |
| Expand Down  Expand Up | | @@ -830,10 +860,13 @@ public static byte[] serializeObjectWithTypeInformation(Serializable object) { |
|  |  | /\*\* |
|  |  | \* Deserializes expression from Kryo. |
|  |  | \* @param bytes Bytes containing the expression. |
|  |  | \* @param isPartFilter ture if it is a partition filter |
|  |  | \* @return Expression; null if deserialization succeeded, but the result type is incorrect. |
|  |  | \*/ |
|  |  | public static <T> T deserializeObjectWithTypeInformation(byte[] bytes) { |
|  |  | Kryo kryo = borrowKryo(); |
|  |  | public static <T> T deserializeObjectWithTypeInformation(byte[] bytes, |
|  |  | boolean isPartFilter) { |
|  |  | KryoWithHooks kryo = (KryoWithHooks) borrowKryo(); |
|  |  | kryo.setExprNodeFirst(isPartFilter); |
|  |  | try (Input inp = new Input(new ByteArrayInputStream(bytes))) { |
|  |  | return (T) kryo.readClassAndObject(inp); |
|  |  | } finally { |
| Expand Down | |  |

3 changes: 1 addition & 2 deletions

3
[ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionExpressionForMetastore.java](#diff-a64d50041a4d40fb64e66f99ee1929f48e7079c02ad0d276f98d6b7da88e12e5 "ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionExpressionForMetastore.java")

Show comments

[View file](/apache/hive/blob/60027bb9c91a93affcfebd9068f064bc1f2a74c9/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionExpressionForMetastore.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -37,7 +37,6 @@ |
|  |  | import org.apache.hadoop.hive.ql.parse.SemanticException; |
|  |  | import org.apache.hadoop.hive.ql.plan.ExprNodeDesc; |
|  |  | import org.apache.hadoop.hive.ql.plan.ExprNodeDescUtils; |
|  |  | import org.apache.hadoop.hive.ql.plan.ExprNodeGenericFuncDesc; |
|  |  | import org.apache.hadoop.hive.serde2.typeinfo.PrimitiveTypeInfo; |
|  |  | import org.apache.hadoop.hive.serde2.typeinfo.TypeInfoFactory; |
|  |  | import org.slf4j.Logger; |
| Expand Down  Expand Up | | @@ -108,7 +107,7 @@ public boolean filterPartitionsByExpr(List<FieldSchema> partColumns, |
|  |  | private ExprNodeDesc deserializeExpr(byte[] exprBytes) throws MetaException { |
|  |  | ExprNodeDesc expr = null; |
|  |  | try { |
|  |  | expr = SerializationUtilities.deserializeObjectWithTypeInformation(exprBytes); |
|  |  | expr = SerializationUtilities.deserializeObjectWithTypeInformation(exprBytes, true); |
|  |  | } catch (Exception ex) { |
|  |  | LOG.error("Failed to deserialize the expression", ex); |
|  |  | throw new MetaException(ex.getMessage()); |
| Expand Down | |  |

26 changes: 26 additions & 0 deletions

26
[ql/src/test/org/apache/hadoop/hive/ql/exec/TestSerializationUtilities.java](#diff-06f1ef89698b92cc5b3fe4146af9e96f39be07ddb8a2fbb2bfc65f8afb16c763 "ql/src/test/org/apache/hadoop/hive/ql/exec/TestSerializationUtilities.java")

Show comments

[View file](/apache/hive/blob/60027bb9c91a93affcfebd9068f064bc1f2a74c9/ql/src/test/org/apache/hadoop/hive/ql/exec/TestSerializationUtilities.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -22,6 +22,7 @@ |
|  |  | import java.io.IOException; |
|  |  | import java.io.InputStream; |
|  |  | import java.util.ArrayList; |
|  |  | import java.util.Arrays; |
|  |  | import java.util.LinkedHashMap; |
|  |  | import java.util.List; |
|  |  | import java.util.Map; |
| Expand All | | @@ -32,10 +33,16 @@ |
|  |  | import org.apache.hadoop.hive.conf.HiveConf; |
|  |  | import org.apache.hadoop.hive.ql.io.orc.OrcInputFormat; |
|  |  | import org.apache.hadoop.hive.ql.io.orc.OrcOutputFormat; |
|  |  | import org.apache.hadoop.hive.ql.plan.ExprNodeColumnDesc; |
|  |  | import org.apache.hadoop.hive.ql.plan.ExprNodeDesc; |
|  |  | import org.apache.hadoop.hive.ql.plan.ExprNodeDescUtils; |
|  |  | import org.apache.hadoop.hive.ql.plan.ExprNodeGenericFuncDesc; |
|  |  | import org.apache.hadoop.hive.ql.plan.MapWork; |
|  |  | import org.apache.hadoop.hive.ql.plan.PartitionDesc; |
|  |  | import org.apache.hadoop.hive.ql.plan.TableDesc; |
|  |  | import org.apache.hadoop.hive.ql.plan.VectorPartitionDesc; |
|  |  | import org.apache.hadoop.hive.ql.udf.generic.GenericUDFOPNull; |
|  |  | import org.apache.hadoop.hive.serde2.typeinfo.TypeInfoFactory; |
|  |  | import org.junit.Assert; |
|  |  | import org.junit.Test; |
|  |  |  |
| Expand Down  Expand Up | | @@ -127,6 +134,25 @@ public void testSkippingAppliesToAllPartitions() throws Exception { |
|  |  | assertPartitionDescPropertyPresence(mapWork, "/warehouse/test\_table/p=1", "serialization.ddl", false); |
|  |  | } |
|  |  |  |
|  |  | @Test |
|  |  | public void testUnsupportedDeserialization() throws Exception { |
|  |  | ArrayList<Long> invalidExpr = new ArrayList<>(); |
|  |  | invalidExpr.add(1L); |
|  |  | byte[] buf = SerializationUtilities.serializeObjectWithTypeInformation(invalidExpr); |
|  |  | try { |
|  |  | SerializationUtilities.deserializeObjectWithTypeInformation(buf, true); |
|  |  | Assert.fail("Should throw exception as the input is not a valid filter"); |
|  |  | } catch (UnsupportedOperationException e) { |
|  |  | // ignore |
|  |  | } |
|  |  |  |
|  |  | ExprNodeDesc validExpr = ExprNodeGenericFuncDesc.newInstance(new GenericUDFOPNull(), |
|  |  | Arrays.asList(new ExprNodeColumnDesc(new ColumnInfo("\_c0", TypeInfoFactory.stringTypeInfo, "a", false)))); |
|  |  | buf = SerializationUtilities.serializeObjectWithTypeInformation(validExpr); |
|  |  | ExprNodeDesc desc = SerializationUtilities.deserializeObjectWithTypeInformation(buf, true); |
|  |  | Assert.assertTrue(ExprNodeDescUtils.isSame(validExpr, desc)); |
|  |  | } |
|  |  |  |
|  |  | private MapWork doSerDeser(Configuration configuration) throws Exception, IOException { |
|  |  | MapWork mapWork = mockMapWorkWithSomePartitionDescProperties(); |
|  |  | ByteArrayOutputStream baos = new ByteArrayOutputStream(); |
| Expand Down | |  |

21 changes: 1 addition & 20 deletions

21
[...etastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/ObjectStore.java](#diff-ddc1cac0afb55312b1d426288dbb7c32611ea996d2224f1692f3a53134fd9a80 "standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/ObjectStore.java")

Show comments

[View file](/apache/hive/blob/60027bb9c91a93affcfebd9068f064bc1f2a74c9/standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/ObjectStore.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -422,7 +422,7 @@ private void initialize() { |
|  |  | isInitialized = pm != null; |
|  |  | if (isInitialized) { |
|  |  | dbType = determineDatabaseProduct(); |
|  |  | expressionProxy = createExpressionProxy(conf); |
|  |  | expressionProxy = PartFilterExprUtil.createExpressionProxy(conf); |
|  |  | if (MetastoreConf.getBoolVar(getConf(), ConfVars.TRY\_DIRECT\_SQL)) { |
|  |  | String schema = PersistenceManagerProvider.getProperty("javax.jdo.mapping.Schema"); |
|  |  | schema = org.apache.commons.lang3.StringUtils.defaultIfBlank(schema, null); |
| Expand All | | @@ -447,25 +447,6 @@ private static String getProductName(PersistenceManager pm) { |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Creates the proxy used to evaluate expressions. This is here to prevent circular |
|  |  | \* dependency - ql -&gt; metastore client &lt;-&gt metastore server -&gt ql. If server and |
|  |  | \* client are split, this can be removed. |
|  |  | \* @param conf Configuration. |
|  |  | \* @return The partition expression proxy. |
|  |  | \*/ |
|  |  | private static PartitionExpressionProxy createExpressionProxy(Configuration conf) { |
|  |  | String className = MetastoreConf.getVar(conf, ConfVars.EXPRESSION\_PROXY\_CLASS); |
|  |  | try { |
|  |  | Class<? extends PartitionExpressionProxy> clazz = |
|  |  | JavaUtils.getClass(className, PartitionExpressionProxy.class); |
|  |  | return JavaUtils.newInstance(clazz, new Class<?>[0], new Object[0]); |
|  |  | } catch (MetaException e) { |
|  |  | LOG.error("Error loading PartitionExpressionProxy", e); |
|  |  | throw new RuntimeException("Error loading PartitionExpressionProxy: " + e.getMessage()); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Configure SSL encryption to the database store. |
|  |  | \* |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `60027bb`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fhive%2Fcommit%2F60027bb9c91a93affcfebd9068f064bc1f2a74c9) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from issues.apache.org_092b35b0_20250114_224544.html ===


[Log in](/jira/login.jsp?os_destination=%2Fbrowse%2FHIVE-26539)[Skip to main content](#main)[Skip to sidebar](#sidebar)Linked ApplicationsLoading…[![ASF JIRA](/jira/s/xd97tr/820010/13pdxe5/_/jira-logo-scaled.png)](https://issues.apache.org/jira/secure/MyJiraHome.jspa)

* [Dashboards](/jira/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/jira/browse/HIVE "View recent projects and browse a list of projects")
* [Issues](/jira/issues/ "Search for issues and view recent issues")

* [Help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Help")
  + [Jira Core help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Go to the online documentation for Jira Core")
  + [Keyboard Shortcuts](/jira/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [About Jira](/jira/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/jira/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/jira/login.jsp?os_destination=%2Fbrowse%2FHIVE-26539)

Public signup for this instance is **disabled**. Go to our [Self serve sign up page](https://selfserve.apache.org/jira-account.html) to request an account. Report potential security issues [privately](https://apache.org/security/#reporting-a-vulnerability)

![Uploaded image for project: 'Hive'](https://issues.apache.org/jira/secure/projectavatar?pid=12310843&avatarId=11935)

1. [Hive](/jira/browse/HIVE)
2. [HIVE-26539](/jira/browse/HIVE-26539)

# Kryo deserialization improvements

[Log In](/jira/login.jsp?os_destination=%2Fbrowse%2FHIVE-26539 "Log In")Export

XMLWordPrintableJSON
#### Details

* **Type:**
  ![](/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype "Improvement - An improvement or enhancement to an existing feature or task.") Improvement
* **Status:**
  Closed
* **Priority:**
  ![](/jira/images/icons/priorities/major.svg "Major - Major loss of function.") Major
* **Resolution:**
  Fixed
* **Affects Version/s:**
  None
* **Fix Version/s:**
  [4.0.0-alpha-2](/jira/issues/?jql=project+%3D+HIVE+AND+fixVersion+%3D+4.0.0-alpha-2 "4.0.0-alpha-2 ")
* **Component/s:**
  None
* **Labels:**
  + [pull-request-available](/jira/issues/?jql=labels+%3D+pull-request-available "pull-request-available")
#### Attachments

#### Issue Links

links to

![Web Link](https://github.com/favicon.ico "Web Link")
[GitHub Pull Request #3605](https://github.com/apache/hive/pull/3605)

#### Activity

#### People

Assignee:

![dengzh](https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452)
Zhihua Deng

Reporter:

![dengzh](https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452)
Zhihua Deng

Votes:
0
Vote for this issue

Watchers:
2
Start watching this issue

#### Dates

Created:

16/Sep/22 03:38

Updated:

16/Nov/22 13:50

Resolved:

18/Oct/22 11:57

#### Time Tracking

Estimated:

| Original Estimate - Not Specified |
| --- |

Not Specified

Remaining:

| Remaining Estimate - 0h |
| --- |

0h

Logged:

| Time Spent - 1.5h |
| --- |

1.5h

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/jira/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/jira/secure/CreateIssue%21default.jspa)

Powered by a free Atlassian [Jira](http://www.atlassian.com/software/jira) open source license for Apache Software Foundation. Try Jira - [bug tracking software](http://www.atlassian.com/software/jira) for *your* team.

[Atlassian](http://www.atlassian.com/)



=== Content from github.com_4d2dfe30_20250114_224542.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fhive)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fhive)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=apache%2Fhive)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[apache](/apache)
/
**[hive](/apache/hive)**
Public

* [Notifications](/login?return_to=%2Fapache%2Fhive) You must be signed in to change notification settings
* [Fork
  4.7k](/login?return_to=%2Fapache%2Fhive)
* [Star
   5.6k](/login?return_to=%2Fapache%2Fhive)

Apache Hive

[hive.apache.org/](https://hive.apache.org/ "https://hive.apache.org/")

### License

Apache-2.0, Unknown licenses found

### Licenses found

[Apache-2.0
LICENSE](/apache/hive/blob/master/./LICENSE) [Unknown
LICENSE-binary](/apache/hive/blob/master/./LICENSE-binary)

[5.6k
stars](/apache/hive/stargazers) [4.7k
forks](/apache/hive/forks) [Branches](/apache/hive/branches) [Tags](/apache/hive/tags) [Activity](/apache/hive/activity)
 [Star](/login?return_to=%2Fapache%2Fhive)

 [Notifications](/login?return_to=%2Fapache%2Fhive) You must be signed in to change notification settings

* [Code](/apache/hive)
* [Pull requests
  62](/apache/hive/pulls)
* [Actions](/apache/hive/actions)
* [Security](/apache/hive/security)
* [Insights](/apache/hive/pulse)

Additional navigation options

* [Code](/apache/hive)
* [Pull requests](/apache/hive/pulls)
* [Actions](/apache/hive/actions)
* [Security](/apache/hive/security)
* [Insights](/apache/hive/pulse)

# apache/hive

    master[Branches](/apache/hive/branches)[Tags](/apache/hive/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[17,519 Commits](/apache/hive/commits/master/) | | |
| [.github](/apache/hive/tree/master/.github ".github") | | [.github](/apache/hive/tree/master/.github ".github") |  |  |
| [.mvn](/apache/hive/tree/master/.mvn ".mvn") | | [.mvn](/apache/hive/tree/master/.mvn ".mvn") |  |  |
| [accumulo-handler](/apache/hive/tree/master/accumulo-handler "accumulo-handler") | | [accumulo-handler](/apache/hive/tree/master/accumulo-handler "accumulo-handler") |  |  |
| [beeline](/apache/hive/tree/master/beeline "beeline") | | [beeline](/apache/hive/tree/master/beeline "beeline") |  |  |
| [bin](/apache/hive/tree/master/bin "bin") | | [bin](/apache/hive/tree/master/bin "bin") |  |  |
| [checkstyle](/apache/hive/tree/master/checkstyle "checkstyle") | | [checkstyle](/apache/hive/tree/master/checkstyle "checkstyle") |  |  |
| [classification](/apache/hive/tree/master/classification "classification") | | [classification](/apache/hive/tree/master/classification "classification") |  |  |
| [cli](/apache/hive/tree/master/cli "cli") | | [cli](/apache/hive/tree/master/cli "cli") |  |  |
| [common](/apache/hive/tree/master/common "common") | | [common](/apache/hive/tree/master/common "common") |  |  |
| [conf](/apache/hive/tree/master/conf "conf") | | [conf](/apache/hive/tree/master/conf "conf") |  |  |
| [contrib](/apache/hive/tree/master/contrib "contrib") | | [contrib](/apache/hive/tree/master/contrib "contrib") |  |  |
| [data](/apache/hive/tree/master/data "data") | | [data](/apache/hive/tree/master/data "data") |  |  |
| [dev-support](/apache/hive/tree/master/dev-support "dev-support") | | [dev-support](/apache/hive/tree/master/dev-support "dev-support") |  |  |
| [druid-handler](/apache/hive/tree/master/druid-handler "druid-handler") | | [druid-handler](/apache/hive/tree/master/druid-handler "druid-handler") |  |  |
| [hbase-handler](/apache/hive/tree/master/hbase-handler "hbase-handler") | | [hbase-handler](/apache/hive/tree/master/hbase-handler "hbase-handler") |  |  |
| [hcatalog](/apache/hive/tree/master/hcatalog "hcatalog") | | [hcatalog](/apache/hive/tree/master/hcatalog "hcatalog") |  |  |
| [hplsql](/apache/hive/tree/master/hplsql "hplsql") | | [hplsql](/apache/hive/tree/master/hplsql "hplsql") |  |  |
| [iceberg](/apache/hive/tree/master/iceberg "iceberg") | | [iceberg](/apache/hive/tree/master/iceberg "iceberg") |  |  |
| [itests](/apache/hive/tree/master/itests "itests") | | [itests](/apache/hive/tree/master/itests "itests") |  |  |
| [jdbc-handler](/apache/hive/tree/master/jdbc-handler "jdbc-handler") | | [jdbc-handler](/apache/hive/tree/master/jdbc-handler "jdbc-handler") |  |  |
| [jdbc](/apache/hive/tree/master/jdbc "jdbc") | | [jdbc](/apache/hive/tree/master/jdbc "jdbc") |  |  |
| [kafka-handler](/apache/hive/tree/master/kafka-handler "kafka-handler") | | [kafka-handler](/apache/hive/tree/master/kafka-handler "kafka-handler") |  |  |
| [kudu-handler](/apache/hive/tree/master/kudu-handler "kudu-handler") | | [kudu-handler](/apache/hive/tree/master/kudu-handler "kudu-handler") |  |  |
| [lib](/apache/hive/tree/master/lib "lib") | | [lib](/apache/hive/tree/master/lib "lib") |  |  |
| [llap-client](/apache/hive/tree/master/llap-client "llap-client") | | [llap-client](/apache/hive/tree/master/llap-client "llap-client") |  |  |
| [llap-common](/apache/hive/tree/master/llap-common "llap-common") | | [llap-common](/apache/hive/tree/master/llap-common "llap-common") |  |  |
| [llap-ext-client](/apache/hive/tree/master/llap-ext-client "llap-ext-client") | | [llap-ext-client](/apache/hive/tree/master/llap-ext-client "llap-ext-client") |  |  |
| [llap-server](/apache/hive/tree/master/llap-server "llap-server") | | [llap-server](/apache/hive/tree/master/llap-server "llap-server") |  |  |
| [llap-tez](/apache/hive/tree/master/llap-tez "llap-tez") | | [llap-tez](/apache/hive/tree/master/llap-tez "llap-tez") |  |  |
| [metastore](/apache/hive/tree/master/metastore "metastore") | | [metastore](/apache/hive/tree/master/metastore "metastore") |  |  |
| [packaging](/apache/hive/tree/master/packaging "packaging") | | [packaging](/apache/hive/tree/master/packaging "packaging") |  |  |
| [parser](/apache/hive/tree/master/parser "parser") | | [parser](/apache/hive/tree/master/parser "parser") |  |  |
| [ql](/apache/hive/tree/master/ql "ql") | | [ql](/apache/hive/tree/master/ql "ql") |  |  |
| [serde](/apache/hive/tree/master/serde "serde") | | [serde](/apache/hive/tree/master/serde "serde") |  |  |
| [service-rpc](/apache/hive/tree/master/service-rpc "service-rpc") | | [service-rpc](/apache/hive/tree/master/service-rpc "service-rpc") |  |  |
| [service](/apache/hive/tree/master/service "service") | | [service](/apache/hive/tree/master/service "service") |  |  |
| [shims](/apache/hive/tree/master/shims "shims") | | [shims](/apache/hive/tree/master/shims "shims") |  |  |
| [spotbugs](/apache/hive/tree/master/spotbugs "spotbugs") | | [spotbugs](/apache/hive/tree/master/spotbugs "spotbugs") |  |  |
| [standalone-metastore](/apache/hive/tree/master/standalone-metastore "standalone-metastore") | | [standalone-metastore](/apache/hive/tree/master/standalone-metastore "standalone-metastore") |  |  |
| [storage-api](/apache/hive/tree/master/storage-api "storage-api") | | [storage-api](/apache/hive/tree/master/storage-api "storage-api") |  |  |
| [streaming](/apache/hive/tree/master/streaming "streaming") | | [streaming](/apache/hive/tree/master/streaming "streaming") |  |  |
| [testutils](/apache/hive/tree/master/testutils "testutils") | | [testutils](/apache/hive/tree/master/testutils "testutils") |  |  |
| [udf](/apache/hive/tree/master/udf "udf") | | [udf](/apache/hive/tree/master/udf "udf") |  |  |
| [vector-code-gen](/apache/hive/tree/master/vector-code-gen "vector-code-gen") | | [vector-code-gen](/apache/hive/tree/master/vector-code-gen "vector-code-gen") |  |  |
| [.asf.yaml](/apache/hive/blob/master/.asf.yaml ".asf.yaml") | | [.asf.yaml](/apache/hive/blob/master/.asf.yaml ".asf.yaml") |  |  |
| [.checkstyle](/apache/hive/blob/master/.checkstyle ".checkstyle") | | [.checkstyle](/apache/hive/blob/master/.checkstyle ".checkstyle") |  |  |
| [.gitattributes](/apache/hive/blob/master/.gitattributes ".gitattributes") | | [.gitattributes](/apache/hive/blob/master/.gitattributes ".gitattributes") |  |  |
| [.gitignore](/apache/hive/blob/master/.gitignore ".gitignore") | | [.gitignore](/apache/hive/blob/master/.gitignore ".gitignore") |  |  |
| [.reviewboardrc](/apache/hive/blob/master/.reviewboardrc ".reviewboardrc") | | [.reviewboardrc](/apache/hive/blob/master/.reviewboardrc ".reviewboardrc") |  |  |
| [Jenkinsfile](/apache/hive/blob/master/Jenkinsfile "Jenkinsfile") | | [Jenkinsfile](/apache/hive/blob/master/Jenkinsfile "Jenkinsfile") |  |  |
| [LICENSE](/apache/hive/blob/master/LICENSE "LICENSE") | | [LICENSE](/apache/hive/blob/master/LICENSE "LICENSE") |  |  |
| [LICENSE-binary](/apache/hive/blob/master/LICENSE-binary "LICENSE-binary") | | [LICENSE-binary](/apache/hive/blob/master/LICENSE-binary "LICENSE-binary") |  |  |
| [NOTICE](/apache/hive/blob/master/NOTICE "NOTICE") | | [NOTICE](/apache/hive/blob/master/NOTICE "NOTICE") |  |  |
| [README.md](/apache/hive/blob/master/README.md "README.md") | | [README.md](/apache/hive/blob/master/README.md "README.md") |  |  |
| [RELEASE\_NOTES.txt](/apache/hive/blob/master/RELEASE_NOTES.txt "RELEASE_NOTES.txt") | | [RELEASE\_NOTES.txt](/apache/hive/blob/master/RELEASE_NOTES.txt "RELEASE_NOTES.txt") |  |  |
| [errata.txt](/apache/hive/blob/master/errata.txt "errata.txt") | | [errata.txt](/apache/hive/blob/master/errata.txt "errata.txt") |  |  |
| [pom.xml](/apache/hive/blob/master/pom.xml "pom.xml") | | [pom.xml](/apache/hive/blob/master/pom.xml "pom.xml") |  |  |
| View all files | | |

## Repository files navigation

* README
* Code of conduct
* Apache-2.0 license
* License
* Security
# Apache Hive (TM)

[![Master Build Status](https://camo.githubusercontent.com/6a6b4deb4a72ed56c112ba9ecdf819052143137d8b03012502a655f97e57f444/68747470733a2f2f7472617669732d63692e6f72672f6170616368652f686976652e7376673f6272616e63683d6d6173746572)](https://travis-ci.org/apache/hive/branches)
[![Maven Central](https://camo.githubusercontent.com/6c9688c5143a69b4ae9b34b870900e25979f40af55d219ee4b032481486941f4/68747470733a2f2f6d6176656e2d6261646765732e6865726f6b756170702e636f6d2f6d6176656e2d63656e7472616c2f6f72672e6170616368652e686976652f686976652f62616467652e737667)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.apache.hive%22)

The Apache Hive (TM) data warehouse software facilitates reading,
writing, and managing large datasets residing in distributed storage
using SQL. Built on top of Apache Hadoop (TM), it provides:

* Tools to enable easy access to data via SQL, thus enabling data
  warehousing tasks such as extract/transform/load (ETL), reporting,
  and data analysis
* A mechanism to impose structure on a variety of data formats
* Access to files stored either directly in Apache HDFS (TM) or in other
  data storage systems such as Apache HBase (TM)
* Query execution using Apache Hadoop MapReduce or Apache Tez frameworks.

Hive provides standard SQL functionality, including many of the later
2003 and 2011 features for analytics. These include OLAP functions,
subqueries, common table expressions, and more. Hive's SQL can also be
extended with user code via user defined functions (UDFs), user defined
aggregates (UDAFs), and user defined table functions (UDTFs).

Hive users can choose between Apache Hadoop MapReduce or Apache Tez
frameworks as their execution backend. Note that MapReduce framework
has been deprecated since Hive 2, and Apache Tez is recommended. MapReduce
is a mature framework that is proven at large scales. However, MapReduce
is a purely batch framework, and queries using it may experience
higher latencies (tens of seconds), even over small datasets. Apache
Tez is designed for interactive query, and has substantially reduced
overheads versus MapReduce.

Users are free to switch back and forth between these frameworks
at any time. In each case, Hive is best suited for use cases
where the amount of data processed is large enough to require a
distributed system.

Hive is not designed for online transaction processing. It is best used
for traditional data warehousing tasks. Hive is designed to maximize
scalability (scale out with more machines added dynamically to the Hadoop
cluster), performance, extensibility, fault-tolerance, and
loose-coupling with its input formats.

# General Info

For the latest information about Hive, please visit out website at:

<http://hive.apache.org/>

# Getting Started

* Installation Instructions and a quick tutorial:
  <https://cwiki.apache.org/confluence/display/Hive/GettingStarted>
* Instructions to build Hive from source:
  <https://cwiki.apache.org/confluence/display/Hive/GettingStarted#GettingStarted-BuildingHivefromSource>
* A longer tutorial that covers more features of HiveQL:
  <https://cwiki.apache.org/confluence/display/Hive/Tutorial>
* The HiveQL Language Manual:
  <https://cwiki.apache.org/confluence/display/Hive/LanguageManual>

# Requirements

## Java

| Hive Version | Java Version |
| --- | --- |
| Hive 1.0 | Java 6 |
| Hive 1.1 | Java 6 |
| Hive 1.2 | Java 7 |
| Hive 2.x | Java 7 |
| Hive 3.x | Java 8 |
| Hive 4.x | Java 8 |

## Hadoop

* Hadoop 1.x, 2.x
* Hadoop 3.x (Hive 3.x)

# Upgrading from older versions of Hive

* Hive includes changes to the MetaStore schema. If
  you are upgrading from an earlier version of Hive it is imperative
  that you upgrade the MetaStore schema by running the appropriate
  schema upgrade scripts located in the scripts/metastore/upgrade
  directory.
* We have provided upgrade scripts for MySQL, PostgreSQL, Oracle,
  Microsoft SQL Server, and Derby databases. If you are using a
  different database for your MetaStore you will need to provide
  your own upgrade script.

# Useful mailing lists

1. user@hive.apache.org - To discuss and ask usage questions. Send an
   empty email to user-subscribe@hive.apache.org in order to subscribe
   to this mailing list.
2. dev@hive.apache.org - For discussions about code, design and features.
   Send an empty email to dev-subscribe@hive.apache.org in order to
   subscribe to this mailing list.
3. commits@hive.apache.org - In order to monitor commits to the source
   repository. Send an empty email to commits-subscribe@hive.apache.org
   in order to subscribe to this mailing list.

## About

Apache Hive

[hive.apache.org/](https://hive.apache.org/ "https://hive.apache.org/")

### Topics

[java](/topics/java "Topic: java")
[sql](/topics/sql "Topic: sql")
[database](/topics/database "Topic: database")
[big-data](/topics/big-data "Topic: big-data")
[hive](/topics/hive "Topic: hive")
[hadoop](/topics/hadoop "Topic: hadoop")
[apache](/topics/apache "Topic: apache")

### Resources

[Readme](#readme-ov-file)
### License

Apache-2.0, Unknown licenses found

### Licenses found

[Apache-2.0
LICENSE](/apache/hive/blob/master/./LICENSE) [Unknown
LICENSE-binary](/apache/hive/blob/master/./LICENSE-binary)
### Code of conduct

[Code of conduct](#coc-ov-file)
### Security policy

[Security policy](#security-ov-file)

[Activity](/apache/hive/activity)
[Custom properties](/apache/hive/custom-properties)
### Stars

[**5.6k**
stars](/apache/hive/stargazers)
### Watchers

[**324**
watching](/apache/hive/watchers)
### Forks

[**4.7k**
forks](/apache/hive/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fapache%2Fhive&report=apache+%28user%29)

## [Releases](/apache/hive/releases)

[90
tags](/apache/hive/tags)

## [Packages 0](/orgs/apache/packages?repo_name=hive)

No packages published

## [Contributors 399](/apache/hive/graphs/contributors)

* [![@ashutoshc](https://avatars.githubusercontent.com/u/370430?s=64&v=4)](https://github.com/ashutoshc)
* [![@sershe-apache](https://avatars.githubusercontent.com/u/21018151?s=64&v=4)](https://github.com/sershe-apache)
* [![@prasanthj](https://avatars.githubusercontent.com/u/1147442?s=64&v=4)](https://github.com/prasanthj)
* [![@hagleitn](https://avatars.githubusercontent.com/u/388702?s=64&v=4)](https://github.com/hagleitn)
* [![@jcamachor](https://avatars.githubusercontent.com/u/222949?s=64&v=4)](https://github.com/jcamachor)
* [![@kgyrtkirk](https://avatars.githubusercontent.com/u/1902540?s=64&v=4)](https://github.com/kgyrtkirk)
* [![@zshao](https://avatars.githubusercontent.com/u/160204?s=64&v=4)](https://github.com/zshao)
* [![@kasakrisz](https://avatars.githubusercontent.com/u/33458261?s=64&v=4)](https://github.com/kasakrisz)
* [![@t3rmin4t0r](https://avatars.githubusercontent.com/u/348515?s=64&v=4)](https://github.com/t3rmin4t0r)
* [![@cwsteinbach](https://avatars.githubusercontent.com/u/229846?s=64&v=4)](https://github.com/cwsteinbach)
* [![@sidseth](https://avatars.githubusercontent.com/u/1817602?s=64&v=4)](https://github.com/sidseth)
* [![@belugabehr](https://avatars.githubusercontent.com/u/12578579?s=64&v=4)](https://github.com/belugabehr)
* [![@pengchengxiong](https://avatars.githubusercontent.com/u/13738979?s=64&v=4)](https://github.com/pengchengxiong)
* [![@miklosgergely](https://avatars.githubusercontent.com/u/17640179?s=64&v=4)](https://github.com/miklosgergely)

[+ 385 contributors](/apache/hive/graphs/contributors)

## Languages

* [Java
  85.4%](/apache/hive/search?l=java)
* [HiveQL
  12.3%](/apache/hive/search?l=hiveql)
* [Python
  0.5%](/apache/hive/search?l=python)
* [Perl
  0.4%](/apache/hive/search?l=perl)
* [Shell
  0.4%](/apache/hive/search?l=shell)
* [GAP
  0.3%](/apache/hive/search?l=gap)
* Other
  0.7%

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


