=== Content from gitlab.com_68f9cc94_20250115_114720.html ===


[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# samba-bgqd aborts with 'GnuTLS could not generate a random buffer'

Code

* Review changes
* Check out branch
* ---
* Download
* [Patches](/samba-team/samba/-/merge_requests/2778.patch)
* [Plain diff](/samba-team/samba/-/merge_requests/2778.diff)

[David Mulder](/davidmmulder) requested to merge  [samba-team/devel/samba:dmulder/samba-bgqd\_crash](/samba-team/devel/samba/-/tree/dmulder/samba-bgqd_crash "samba-team/devel/samba:dmulder/samba-bgqd_crash")
 into [master](/samba-team/samba/-/tree/master "master") Oct 28, 2022

* [Overview
  19](/samba-team/samba/-/merge_requests/2778)
* [Commits
  2](/samba-team/samba/-/merge_requests/2778/commits)
* [Pipelines
  6](/samba-team/samba/-/merge_requests/2778/pipelines)
* [Changes
  2](/samba-team/samba/-/merge_requests/2778/diffs)

Expand

This is related to the fix for <https://bugzilla.samba.org/show_bug.cgi?id=15103>
samba-bgqd is aborting and preventing samba printing from working. We've gotten lots of reports of this.

The fix, as suggested by [@abartlet](/abartlet "Andrew Bartlett")

## Checklist

* Commits have `Signed-off-by:` with name/author being identical to the
  commit author
* (optional) This MR is just one part towards a larger feature.
* (optional, if backport required) [Bugzilla bug filed](https://bugzilla.samba.org/enter_bug.cgi) and `BUG:`  tag added
* Test suite updated with functionality tests
* Test suite updated with negative tests
* Documentation updated
* CI timeout is [3h or higher](https://wiki.samba.org/index.php/Contribute#Change_the_1hr_default_CI_timeout) (see [Settings/CICD/General pipelines/
  Timeout](https://docs.gitlab.com/ee/ci/pipelines/settings.html#timeout))

## Reviewer's checklist:

* There is a test suite reasonably covering new functionality or
  modifications
* Function naming, parameters, return values, types, etc., are consistent
  and according to [`README.Coding.md`](https://gitlab.com/samba-team/samba/-/blob/master/README.Coding.md)
* This feature/change has adequate documentation added
* No obvious mistakes in the code

Edited Oct 28, 2022 by [David Mulder](/davidmmulder)

## Merge request reports

Assignee
Loading

Reviewers
Loading

Select reviewersRequest review fromLoading

Time tracking
Loading

Loading



=== Content from security.gentoo.org_d0636a05_20250114_193459.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Samba: Multiple Vulnerabilities — GLSA **202309-06**

Multiple vulnerabilities have been discovered in Samba, the worst of which could result in root remote code execution.

### Affected packages

| Package | **net-fs/samba** on all architectures |
| --- | --- |
| Affected versions | < **4.18.4** |
| Unaffected versions | >= **4.18.4** |

### Background

Samba is a suite of SMB and CIFS client/server programs.

### Description

Multiple vulnerabilities have been discovered in Samba. Please review the CVE identifiers referenced below for details.

### Impact

Please review the referenced CVE identifiers for details.

### Workaround

There is no known workaround at this time.

### Resolution

All Samba users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=net-fs/samba-4.18.4"

```
### References

* [CVE-2007-4559](https://nvd.nist.gov/vuln/detail/CVE-2007-4559)
* [CVE-2016-2124](https://nvd.nist.gov/vuln/detail/CVE-2016-2124)
* [CVE-2020-17049](https://nvd.nist.gov/vuln/detail/CVE-2020-17049)
* [CVE-2020-25717](https://nvd.nist.gov/vuln/detail/CVE-2020-25717)
* [CVE-2020-25718](https://nvd.nist.gov/vuln/detail/CVE-2020-25718)
* [CVE-2020-25719](https://nvd.nist.gov/vuln/detail/CVE-2020-25719)
* [CVE-2020-25721](https://nvd.nist.gov/vuln/detail/CVE-2020-25721)
* [CVE-2020-25722](https://nvd.nist.gov/vuln/detail/CVE-2020-25722)
* [CVE-2021-3670](https://nvd.nist.gov/vuln/detail/CVE-2021-3670)
* [CVE-2021-3738](https://nvd.nist.gov/vuln/detail/CVE-2021-3738)
* [CVE-2021-20251](https://nvd.nist.gov/vuln/detail/CVE-2021-20251)
* [CVE-2021-20316](https://nvd.nist.gov/vuln/detail/CVE-2021-20316)
* [CVE-2021-23192](https://nvd.nist.gov/vuln/detail/CVE-2021-23192)
* [CVE-2021-44141](https://nvd.nist.gov/vuln/detail/CVE-2021-44141)
* [CVE-2021-44142](https://nvd.nist.gov/vuln/detail/CVE-2021-44142)
* [CVE-2022-0336](https://nvd.nist.gov/vuln/detail/CVE-2022-0336)
* [CVE-2022-1615](https://nvd.nist.gov/vuln/detail/CVE-2022-1615)
* [CVE-2022-2031](https://nvd.nist.gov/vuln/detail/CVE-2022-2031)
* [CVE-2022-3437](https://nvd.nist.gov/vuln/detail/CVE-2022-3437)
* [CVE-2022-3592](https://nvd.nist.gov/vuln/detail/CVE-2022-3592)
* [CVE-2022-32742](https://nvd.nist.gov/vuln/detail/CVE-2022-32742)
* [CVE-2022-32743](https://nvd.nist.gov/vuln/detail/CVE-2022-32743)
* [CVE-2022-32744](https://nvd.nist.gov/vuln/detail/CVE-2022-32744)
* [CVE-2022-32745](https://nvd.nist.gov/vuln/detail/CVE-2022-32745)
* [CVE-2022-32746](https://nvd.nist.gov/vuln/detail/CVE-2022-32746)
* [CVE-2022-37966](https://nvd.nist.gov/vuln/detail/CVE-2022-37966)
* [CVE-2022-37967](https://nvd.nist.gov/vuln/detail/CVE-2022-37967)
* [CVE-2022-38023](https://nvd.nist.gov/vuln/detail/CVE-2022-38023)
* [CVE-2022-42898](https://nvd.nist.gov/vuln/detail/CVE-2022-42898)
* [CVE-2022-45141](https://nvd.nist.gov/vuln/detail/CVE-2022-45141)
* [CVE-2023-0225](https://nvd.nist.gov/vuln/detail/CVE-2023-0225)
* [CVE-2023-0614](https://nvd.nist.gov/vuln/detail/CVE-2023-0614)
* [CVE-2023-0922](https://nvd.nist.gov/vuln/detail/CVE-2023-0922)

**Release date**

September 17, 2023

**Latest revision**

September 17, 2023: 1

**Severity**

high

**Exploitable**

remote

**Bugzilla entries**

* [820566](https://bugs.gentoo.org/show_bug.cgi?id=820566)
* [821688](https://bugs.gentoo.org/show_bug.cgi?id=821688)
* [830983](https://bugs.gentoo.org/show_bug.cgi?id=830983)
* [832433](https://bugs.gentoo.org/show_bug.cgi?id=832433)
* [861512](https://bugs.gentoo.org/show_bug.cgi?id=861512)
* [866225](https://bugs.gentoo.org/show_bug.cgi?id=866225)
* [869122](https://bugs.gentoo.org/show_bug.cgi?id=869122)
* [878273](https://bugs.gentoo.org/show_bug.cgi?id=878273)
* [880437](https://bugs.gentoo.org/show_bug.cgi?id=880437)
* [886153](https://bugs.gentoo.org/show_bug.cgi?id=886153)
* [903621](https://bugs.gentoo.org/show_bug.cgi?id=903621)
* [905320](https://bugs.gentoo.org/show_bug.cgi?id=905320)
* [910334](https://bugs.gentoo.org/show_bug.cgi?id=910334)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from gitlab.com_08496bf9_20250115_114721.html ===


[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# CVE-2022-1615 util/genrand: don't ignore errors in random number generation

Code

* Review changes
* Check out branch
* ---
* Download
* [Patches](/samba-team/samba/-/merge_requests/2644.patch)
* [Plain diff](/samba-team/samba/-/merge_requests/2644.diff)

[Douglas Bagnall](/douglasbagnall) requested to merge  [samba-team/devel/samba:douglas-bug-15103](/samba-team/devel/samba/-/tree/douglas-bug-15103 "samba-team/devel/samba:douglas-bug-15103")
 into [master](/samba-team/samba/-/tree/master "master") Jul 27, 2022

* [Overview
  3](/samba-team/samba/-/merge_requests/2644)
* [Commits
  2](/samba-team/samba/-/merge_requests/2644/commits)
* [Pipelines
  1](/samba-team/samba/-/merge_requests/2644/pipelines)
* [Changes
  3](/samba-team/samba/-/merge_requests/2644/diffs)

Expand

Since we began using GnuTLS in genrand.c, we have ignored return values.

A failure of randomness is a very bad thing, and we have no option but to abort.

In <https://bugzilla.samba.org/show_bug.cgi?id=15103> we considered whether this is a security issue, but ultimately decided the cases where this fails belong in the "already completely screwed" basket.

There's also a piggybacking patch for better reporting of uptodateness errors in samba-tool.

## Checklist

* Commits have `Signed-off-by:` with name/author being identical to the
  commit author
* (optional, if backport required) [Bugzilla bug filed](https://bugzilla.samba.org/enter_bug.cgi) and `BUG:`  tag added
* CI timeout is [3h or higher](https://wiki.samba.org/index.php/Contribute#Change_the_1hr_default_CI_timeout) (see [Settings/CICD/General pipelines/
  Timeout](https://docs.gitlab.com/ee/ci/pipelines/settings.html#timeout))

## Reviewer's checklist:

* There is a test suite reasonably covering new functionality or
  modifications
* Function naming, parameters, return values, types, etc., are consistent
  and according to [`README.Coding.md`](https://gitlab.com/samba-team/samba/-/blob/master/README.Coding.md)
* This feature/change has adequate documentation added
* No obvious mistakes in the code

Edited Jul 28, 2022 by [Andrew Bartlett](/abartlet)

## Merge request reports

Assignee
Loading

Reviewers
Loading

Select reviewersRequest review fromLoading

Time tracking
Loading

Loading



=== Content from gitlab.com_1d74fcdf_20250115_114722.html ===


[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# bootstrap: Use quay.io to download fedora images

Code

* Review changes
* Check out branch
* ---
* Download
* [Patches](/samba-team/samba/-/merge_requests/2589.patch)
* [Plain diff](/samba-team/samba/-/merge_requests/2589.diff)

[Andreas Schneider](/cryptomilk) requested to merge  [samba-team/devel/samba:asn-fedora](/samba-team/devel/samba/-/tree/asn-fedora "samba-team/devel/samba:asn-fedora")
 into [master](/samba-team/samba/-/tree/master "master") Jun 20, 2022

* [Overview
  6](/samba-team/samba/-/merge_requests/2589)
* [Commits
  1](/samba-team/samba/-/merge_requests/2589/commits)
* [Pipelines
  4](/samba-team/samba/-/merge_requests/2589/pipelines)
* [Changes
  5](/samba-team/samba/-/merge_requests/2589/diffs)

Expand

Add a description of the new feature/bug fix. Reference any relevant bugs.

## Checklist

* Commits have `Signed-off-by:` with name/author being identical to the
  commit author
* (optional) This MR is just one part towards a larger feature.
* (optional, if backport required) [Bugzilla bug filed](https://bugzilla.samba.org/enter_bug.cgi) and `BUG:`  tag added
* Test suite updated with functionality tests
* Test suite updated with negative tests
* Documentation updated
* CI timeout is [3h or higher](https://wiki.samba.org/index.php/Contribute#Change_the_1hr_default_CI_timeout) (see [Settings/CICD/General pipelines/
  Timeout](https://docs.gitlab.com/ee/ci/pipelines/settings.html#timeout))

## Reviewer's checklist:

* There is a test suite reasonably covering new functionality or
  modifications
* Function naming, parameters, return values, types, etc., are consistent
  and according to [`README.Coding.md`](https://gitlab.com/samba-team/samba/-/blob/master/README.Coding.md)
* This feature/change has adequate documentation added
* No obvious mistakes in the code

## Merge request reports

Assignee
Loading

Reviewers
Loading

Select reviewersRequest review fromLoading

Time tracking
Loading

Loading



=== Content from gitlab.com_3347f321_20250115_114721.html ===


[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)



=== Content from lists.fedoraproject.org_7e56495c_20250114_193458.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ZTTOLTHUHOV4SHCHCB5TAA4FQVJAWN4P/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ZTTOLTHUHOV4SHCHCB5TAA4FQVJAWN4P/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ZTTOLTHUHOV4SHCHCB5TAA4FQVJAWN4P/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ZTTOLTHUHOV4SHCHCB5TAA4FQVJAWN4P/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-ZTTOLTHUHOV4SHCHCB5TAA4FQVJAWN4P.mbox.gz?message=ZTTOLTHUHOV4SHCHCB5TAA4FQVJAWN4P "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/ZTTOLTHUHOV4SHCHCB5TAA4FQVJAWN4P/#ZTTOLTHUHOV4SHCHCB5TAA4FQVJAWN4P)

# [SECURITY] Fedora 37 Update: freeipa-4.10.0-6.fc37

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

15 Sep
2022

15 Sep
'22

5:18 p.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2022-4555909843
2022-09-16 00:15:48.446101
--------------------------------------------------------------------------------

Name : freeipa
Product : Fedora 37
Version : 4.10.0
Release : 6.fc37
URL : <http://www.freeipa.org/>
Summary : The Identity, Policy and Audit system
Description :
IPA is an integrated solution to provide centrally managed Identity (users,
hosts, services), Authentication (SSO, 2FA), and Authorization
(host access control, SELinux user roles, services). The solution provides
features for further integration with Linux based clients (SUDO, automount)
and integration with Active Directory based infrastructures (Trusts).

--------------------------------------------------------------------------------
Update Information:

Update to version 4.17.0
--------------------------------------------------------------------------------
ChangeLog:

\* Wed Sep 14 2022 Alexander Bokovoy abokovoy@redhat.com - 4.10.0-6
- Rebuild against final samba 4.17.0 release
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #2096405 - Manual configuration in root partition required before Samba shares can be created
<https://bugzilla.redhat.com/show_bug.cgi?id=2096405>
[ 2 ] Bug #2118818 - samba-4.17.0rc5 is available
<https://bugzilla.redhat.com/show_bug.cgi?id=2118818>
[ 3 ] Bug #2121138 - CVE-2022-32743 samba: Validated dnsHostname write right needs to be implemented [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2121138>
[ 4 ] Bug #2122650 - CVE-2022-1615 samba: GnuTLS gnutls\_rnd() can fail and give predictable random values [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=2122650>
[ 5 ] Bug #2126548 - samba-4.17.0 is available
<https://bugzilla.redhat.com/show_bug.cgi?id=2126548>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2022-4555909843' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/ZTTOLTHUHOV4SHCHCB5TAA4FQVJAWN4P/#ZTTOLTHUHOV4SHCHCB5TAA4FQVJAWN4P)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from bugzilla.samba.org_b28c72f3_20250114_193457.html ===


The Samba-Bugzilla – Bug 15103
CVE-2022-1615 [SECURITY] GnuTLS gnutls\_rnd() can fail and give predictable random values
Last modified: 2024-04-28 21:25:11 UTC

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=15103&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=15103&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 15103**](show_bug.cgi?id=15103)
(CVE-2022-1615)
- CVE-2022-1615 [SECURITY] GnuTLS gnutls\_rnd() can fail and give predictable random values

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2022-1615 [SECURITY] GnuTLS gnutls\_rnd() can fail and give predictable ra...

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2022-1615 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Samba 4.1 and newer | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Samba 4.1 and newer "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Other ([show other bugs](buglist.cgi?component=Other&product=Samba%204.1%20and%20newer&bug_status=__open__)) | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 4.16.2 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All All | |  | | | [Importance](page.cgi?id=fields.html#importance): | P5 normal ([vote](page.cgi?id=voting/user.html&bug_id=15103#vote_15103)) | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Andreas Schneider | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Samba QA Contact | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2022-06-21 22:38 UTC by Andrew Bartlett | | --- | --- | | Modified: | 2024-04-28 21:25 UTC ([History](show_activity.cgi?id=15103)) | | CC List: | 4 users (show)  abartlet asn dbagnall huzaifas | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") | * <https://gitlab.com/samba-team/samba/-/merge_requests/2589> * <https://gitlab.com/samba-team/samba/-/merge_requests/2778> | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [**patch to turn gnutls\_rnd failure into smb\_panic**](attachment.cgi?id=17386 "View the content of the attachment") (1.37 KB, patch)  [2022-06-21 22:42 UTC](#attach_17386 "Go to the comment associated with the attachment"), Douglas Bagnall | *no flags* | [Details](attachment.cgi?id=17386&action=edit) | | [**v2 patch with amended message, fixes generate\_nonce\_buffer()**](attachment.cgi?id=17389 "View the content of the attachment") (1.82 KB, patch)  [2022-06-22 22:24 UTC](#attach_17389 "Go to the comment associated with the attachment"), Douglas Bagnall | *no flags* | [Details](attachment.cgi?id=17389&action=edit) | | [**v3 patch, includes gnutls errno and strerror, compilation deps**](attachment.cgi?id=17390 "View the content of the attachment") (2.64 KB, patch)  [2022-06-23 02:51 UTC](#attach_17390 "Go to the comment associated with the attachment"), Douglas Bagnall | asn: review+ | [Details](attachment.cgi?id=17390&action=edit) | | [**Backport patch for 4.15**](attachment.cgi?id=17609 "View the content of the attachment") (2.91 KB, patch)  [2022-11-01 19:18 UTC](#attach_17609 "Go to the comment associated with the attachment"), David Mulder | *no flags* | [Details](attachment.cgi?id=17609&action=edit) | | [Show Obsolete](#a0) (2) [View All](attachment.cgi?bugid=15103&action=viewall&hide_obsolete=1)  [Add an attachment](attachment.cgi?bugid=15103&action=enter) (proposed patch, testcase, etc.) | | |   | Note You need to [log in](show_bug.cgi?id=15103&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=15103#c0)  Andrew Bartlett    2022-06-21 22:38:57 UTC  ``` Found because the Samba AD DC would not provision due to a duplicate GUID error on LMDB when we updated our docker image for Fedora 36 FIPS build.  <https://gitlab.com/samba-team/devel/samba/-/jobs/2614337241>  Evidence:  Getting into this with a debugger shows the provision looping attempting to make the not-random buffer pass our password quality check.   generate_secret_buffer (out=0x563af6a0de30 'D' <repeats 188 times>, len=188) at ../../lib/util/genrand.c:52 #1  0x00007f88f0b2b743 in generate_random_str_list (mem_ctx=0x0, len=188, list=0x7f88f0b7f798 "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+_-#.,@$%&!?:;<=>()[]~")     at ../../lib/util/genrand_util.c:209 #2  0x00007f88f0b2b8c5 in generate_random_password (mem_ctx=0x0, min=128, max=255) at ../../lib/util/genrand_util.c:279 #3  0x00007f88edcb9343 in py_generate_random_password (self=0x7f88f0d6dbc0, args=0x7f88ec360800) at ../../python/pyglue.c:57   This shows the deterministic secret: #1  0x00007f88f0b2b743 in generate_random_str_list (mem_ctx=0x0, len=188, list=0x7f88f0b7f798 "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+_-#.,@$%&!?:;<=>()[]~")     at ../../lib/util/genrand_util.c:209 209		generate_secret_buffer((uint8_t *)retstr, len); (gdb) p retstr $8 = 0x563af6a0de30 'j' <repeats 188 times>   This shows the failure: Breakpoint 4, gnutls_rnd (level=GNUTLS_RND_KEY, data=0x563af6a0de30, len=188) at random.c:167 167	{ (gdb) finish Run till exit from #0  gnutls_rnd (level=GNUTLS_RND_KEY, data=0x563af6a0de30, len=188) at random.c:167 generate_secret_buffer (out=0x563af6a0de30 'D' <repeats 188 times>, len=188) at ../../lib/util/genrand.c:52 52	} Value returned is $9 = -402 ```  [Comment 1](show_bug.cgi?id=15103#c1)  Douglas Bagnall    2022-06-21 22:42:56 UTC  ``` Created [attachment 17386](attachment.cgi?id=17386 "patch to turn gnutls_rnd failure into smb_panic") [[details]](attachment.cgi?id=17386&action=edit "patch to turn gnutls_rnd failure into smb_panic") patch to turn gnutls_rnd failure into smb_panic  This is a patch I wrote and ignored in 2019, that turns an RNG failure into an smb_panic.  I don't remember why I forgot it. Perhaps I thought we should pass the error up, but at the end of the chain, what else can we do? ```  [Comment 2](show_bug.cgi?id=15103#c2)  Andreas Schneider    2022-06-22 06:46:15 UTC  ``` The patch looks fine for me, I would just improve the error message:  smb_panic("GnuTLS could not generate a random buffer"); ```  [Comment 3](show_bug.cgi?id=15103#c3)  Douglas Bagnall    2022-06-22 22:24:59 UTC  ``` Created [attachment 17389](attachment.cgi?id=17389 "v2 patch with amended message, fixes generate_nonce_buffer()") [[details]](attachment.cgi?id=17389&action=edit "v2 patch with amended message, fixes generate_nonce_buffer()") v2 patch with amended message, fixes generate_nonce_buffer()  The old patch also ignored generate_nonce_buffer(), which perhaps didn't exist then.   The questions I wonder about, regarding severity, are:  1. can we know it is only recent Fedora in FIPS mode that is affected?  2. is it practically possible that Samba will run with repeated deterministic secrets? I mean, we see that provision fails, but what happens with an in-place upgrade? ```  [Comment 4](show_bug.cgi?id=15103#c4)  Andrew Bartlett    2022-06-22 22:42:16 UTC  ``` The in-place risk is real, Fedora 36 was working, and now fails.  The biggest risk is to NTLM challenge/response because it would allow replay of observed challenges, but also the fortnightly password change might select a weak password.  The 'password quality' checks that happen in the AD DC provision don't apply to the winbindd password change in generate_random_machine_password(), so the impact would be silent and catastrophic for security (allow forging of incoming Kerberos tickets). ```  [Comment 5](show_bug.cgi?id=15103#c5)  Andrew Bartlett    2022-06-22 23:08:01 UTC  ``` We should print the GnuTLS error, numerically and via gnutls_strerror_name(), so folks have a hope of working out why.  For reference the -402 we got is  GNUTLS_E_LIB_IN_ERROR_STATE ```  [Comment 6](show_bug.cgi?id=15103#c6)  Andrew Bartlett    2022-06-23 01:44:15 UTC  ``` (In reply to Andrew Bartlett from [comment #4](show_bug.cgi?id=15103#c4)) My comment was not clear (I realised the second point after writing the first).   The in-place risk is real, Fedora 36 was working, and now fails.  One risk is to NTLM challenge/response because it would allow replay of observed challenges, but also the fortnightly password change might select a weak password.  However the biggest risk is that the winbindd password change in generate_random_machine_password() could return a weak password.  The impact would be silent and catastrophic for security (allow forging of incoming Kerberos tickets). ```  [Comment 7](show_bug.cgi?id=15103#c7)  Douglas Bagnall    2022-06-23 02:51:18 UTC  ``` Created [attachment 17390](attachment.cgi?id=17390 "v3 patch, includes gnutls errno and strerror, compilation deps") [[details]](attachment.cgi?id=17390&action=edit "v3 patch, includes gnutls errno and strerror, compilation deps") v3 patch, includes gnutls errno and strerror, compilation deps ```  [Comment 8](show_bug.cgi?id=15103#c8)  Andreas Schneider    2022-06-23 08:07:53 UTC  ``` The questions is why on quay.io images it fails the gnutls fips selfcheck. ```  [Comment 9](show_bug.cgi?id=15103#c9)  Andreas Schneider    2022-06-23 09:21:07 UTC  ``` The CI runner failed, because the gnutls selfcheck failed.  gnutls[2]: Calculated MAC for /lib64/libnettle.so.8 does not match  If the selfcheck fails the library is non working. You wont be able to do any crypto operations, they would just all fail. As we did not check the return value of the rand function, we did not catch it when created random buffers.  However the rest of Samba should just not work in this case. ```  [Comment 10](show_bug.cgi?id=15103#c10)  Andrew Bartlett    2022-06-28 07:25:56 UTC  ``` (In reply to Andreas Schneider from [comment #9](show_bug.cgi?id=15103#c9)) Is there any other way, in a different situation, where only the RNG could fail?  If so, this needs to be pushed out as a security release, ideally.  Do you have the time to run that process?  Otherwise if an RNG-only failure is unlikely outside FIPS mode and so we just think this is too niche (FIPS use is rare, presumably) we could just un-embargo and move on, possible with a CVE assigned.  What do you want to do? ```  [Comment 11](show_bug.cgi?id=15103#c11)  Andreas Schneider    2022-06-28 13:52:15 UTC  ``` I've discussed it with Huzaifa and we do not think it is very serious or security hardening. On modern Linux this uses either getentropy() or getrandom(). If those fails you have a serious problem on your system.  The issue we see is becaus of the failing FIPS selfcheck of GnuTLS, but that means GnuTLS wont work at all. Every function would return an error.  I'm for getting a CVE and just fixing it. Put it in git and it will be released with the next security or maintenance update. ```  [Comment 12](show_bug.cgi?id=15103#c12)  Stefan Metzmacher    2022-07-22 12:26:46 UTC  ``` Comment on [attachment 17390](attachment.cgi?id=17390 "v3 patch, includes gnutls errno and strerror, compilation deps") [[details]](attachment.cgi?id=17390&action=edit "v3 patch, includes gnutls errno and strerror, compilation deps") v3 patch, includes gnutls errno and strerror, compilation deps  >  >+ >+ _NORETURN_ static void genrand_panic(int err)  This should also get __func__ and __location__  >+{ >+	char buf[200]; >+	snprintf(buf, sizeof(buf), >+		 "GnuTLS could not generate a random buffer: %s [%d]\n", >+		 gnutls_strerror_name(err), err); >+	smb_panic(buf); >+} ```  [Comment 13](show_bug.cgi?id=15103#c13)  Douglas Bagnall    2022-07-26 02:00:42 UTC  ``` (In reply to Stefan Metzmacher from [comment #12](show_bug.cgi?id=15103#c12)) Thanks Metze,  If nobody disagrees with the Andreas/Huzaifa security assessment, I will make a gitlab MR with that change in a day or two. ```  [Comment 14](show_bug.cgi?id=15103#c14)  Douglas Bagnall    2022-07-28 00:00:25 UTC  ``` <https://gitlab.com/samba-team/samba/-/merge_requests/2644>  I realised halfway through that I forgot the "get a CVE" part of "get a CVE and release it anyway". So too bad there. ```  [Comment 15](show_bug.cgi?id=15103#c15)  Douglas Bagnall    2022-07-28 00:02:06 UTC  ``` (In reply to Douglas Bagnall from [comment #14](show_bug.cgi?id=15103#c14)) > So too bad there.  Well, we could still do that of course. ```  [Comment 16](show_bug.cgi?id=15103#c16)  Andrew Bartlett    2022-07-28 05:11:20 UTC  ``` CVE-2022-1615 was allocated to us in the past and RH didn't reply when we tried to return it, so lets just use it instead. ```  [Comment 17](show_bug.cgi?id=15103#c17)  Samba QA Contact    2022-07-28 06:19:03 UTC  ``` This bug was referenced in samba master:  9849e7440e30853c61a80ce1f11b7b244ed766fe ```  [Comment 18](show_bug.cgi?id=15103#c18)  Samba QA Contact    2022-08-08 14:32:39 UTC  ``` This bug was referenced in samba v4-17-test:  9849e7440e30853c61a80ce1f11b7b244ed766fe ```  [Comment 19](show_bug.cgi?id=15103#c19)  Samba QA Contact    2022-08-08 14:36:19 UTC  ``` This bug was referenced in samba v4-17-stable (Release samba-4.17.0rc1):  9849e7440e30853c61a80ce1f11b7b244ed766fe ```  [Comment 20](show_bug.cgi?id=15103#c20)  Stefan Metzmacher    2022-09-06 08:25:43 UTC  ``` (In reply to Samba QA Contact from [comment #19](show_bug.cgi?id=15103#c19))  Andreas, do you want to backport this, or should we close the bug report? ```  [Comment 21](show_bug.cgi?id=15103#c21)  Andrew Bartlett    2022-10-29 08:01:20 UTC  ``` Once we work out <https://gitlab.com/samba-team/samba/-/merge_requests/2778> which will need its own bug, we should backport this to 4.16 and 4.15 also, as we have good reason to think this can fail 'in the wild'. ```  [Comment 22](show_bug.cgi?id=15103#c22)  David Mulder    2022-11-01 19:18:23 UTC  ``` Created [attachment 17609](attachment.cgi?id=17609 "Backport patch for 4.15") [[details]](attachment.cgi?id=17609&action=edit "Backport patch for 4.15") Backport patch for 4.15  SUSE backported this patch a couple months ago. Sorry for failing to mention this before. ```  [Comment 23](show_bug.cgi?id=15103#c23)  Björn Jacke    2024-04-28 20:22:52 UTC  ``` Those old versions will not receive a backort anymore. Closing now. Hope that's okay for everyone. ```  [Comment 24](show_bug.cgi?id=15103#c24)  Andrew Bartlett    2024-04-28 21:25:11 UTC  ``` (In reply to Björn Jacke from [comment #23](show_bug.cgi?id=15103#c23)) Thanks, and to clarify for history, the 'in the wild' mentioned in [comment #21](show_bug.cgi?id=15103#c21) turned out only to be when other patches were backported, closing the random FD.  That is why <https://gitlab.com/samba-team/samba/-/merge_requests/2778> never got merged, as really we needed a broader MR that was more selective in what reinit_after_fork() did, not this narrow patch. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=15103)
* - [XML](show_bug.cgi?ctype=xml&id=15103)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=15103)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=15103&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=15103&GoAheadAndLogIn=1#forgot)
    Login:

    [x]


