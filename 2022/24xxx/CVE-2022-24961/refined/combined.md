=== Content from github.com_cdb685c4_20250114_234120.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fportainer%2Fagent%2Fpull%2F225%2Fcommits%2Fa66977c76043fcff4a8f69c4b65988272d27c01f)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fportainer%2Fagent%2Fpull%2F225%2Fcommits%2Fa66977c76043fcff4a8f69c4b65988272d27c01f)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fpull_requests%2Fshow%2Fcommits&source=header-repo&source_repo=portainer%2Fagent)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[portainer](/portainer)
/
**[agent](/portainer/agent)**
Public

* [Notifications](/login?return_to=%2Fportainer%2Fagent) You must be signed in to change notification settings
* [Fork
  72](/login?return_to=%2Fportainer%2Fagent)
* [Star
   331](/login?return_to=%2Fportainer%2Fagent)

* [Code](/portainer/agent)
* [Issues
  44](/portainer/agent/issues)
* [Pull requests
  31](/portainer/agent/pulls)
* [Projects
  0](/portainer/agent/projects)
* [Security](/portainer/agent/security)
* [Insights](/portainer/agent/pulse)

Additional navigation options

* [Code](/portainer/agent)
* [Issues](/portainer/agent/issues)
* [Pull requests](/portainer/agent/pulls)
* [Projects](/portainer/agent/projects)
* [Security](/portainer/agent/security)
* [Insights](/portainer/agent/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fportainer%2Fagent%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fportainer%2Fagent%2Fissues%2Fnew%2Fchoose)
to your account

# feat(server): stop if not associated [EE-1610] #225

 Merged

[hookenz](/hookenz)
merged 7 commits into
[develop](/portainer/agent/tree/develop "portainer/agent:develop")
from
[feat/EE-1610/stop-if-unassociated](/portainer/agent/tree/feat/EE-1610/stop-if-unassociated "portainer/agent:feat/EE-1610/stop-if-unassociated")

Jan 18, 2022

[Conversation
13](/portainer/agent/pull/225)
[Commits
7](/portainer/agent/pull/225/commits)
[Checks
0](/portainer/agent/pull/225/checks)
[Files changed](/portainer/agent/pull/225/files)

 Merged

# [feat(server): stop if not associated [EE-1610]](#top) #225

 Show file tree

 Hide file tree

Changes from **1 commit**

Commits

[Show all changes

7 commits](/portainer/agent/pull/225/files)
Select commit
Hold shift + click to select a range

[`a66977c`
feat(server): stop if not associated

chiptus Jan 12, 2022](/portainer/agent/pull/225/commits/a66977c76043fcff4a8f69c4b65988272d27c01f)
[`9e860a6`
refactor(agent): get duration from env var

chiptus Jan 12, 2022](/portainer/agent/pull/225/commits/9e860a67298991f6d92ab437db192a109da19028)
[`9c49616`
chore(docs): document `AGENT\_SECURITY\_SHUTDOWN`

chiptus Jan 12, 2022](/portainer/agent/pull/225/commits/9c49616041284117804a48f2d960a9ad17dd9d55)
[`eeccfb9`
fix(security): change default shutdown to 72h

chiptus Jan 16, 2022](/portainer/agent/pull/225/commits/eeccfb94cddc278bfc1cbd728f669ad2268e118f)
[`0a16697`
refactor(options): rename to AGENT\_SECRET\_TIMEOUT

chiptus Jan 17, 2022](/portainer/agent/pull/225/commits/0a166972d7b0c36f7cbce124158f8b5f6171115c)
[`7b1e823`
refactor(server): use sleep instead of timer

chiptus Jan 17, 2022](/portainer/agent/pull/225/commits/7b1e82389cd4b49b24d9136fa14760813b3c0106)
[`336ea37`
fix(server): wait for signal to shutdown

chiptus Jan 17, 2022](/portainer/agent/pull/225/commits/336ea37910d3f7199db21d7d368b9cdc452d4c88)

**File filter**

### Filter by extension

Filter by extension

.go
(4)

All 1 file type selected

---

Viewed files

[Clear filters](/portainer/agent/pull/225/commits/a66977c76043fcff4a8f69c4b65988272d27c01f)

 **Conversations**

Failed to load comments.  Retry

 Loading

 **Jump to**

Jump to file

Failed to load files.  Retry

 Loading

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

Show whitespace

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

* agent.go
  [agent.go](#diff-07afbb40d3dc2699797d28c0689ba544f67ca642d0d3efcff3c02a0bbb3604fd)
* cmd/agent

  + cmd/agent/main.go
    [main.go](#diff-61358711e980ccf505246fd3915f97cbd3a380e9b66f6fa5aad46749968c5ca3)
* crypto

  + crypto/ecdsa.go
    [ecdsa.go](#diff-554210d4f44afafaa3b5a9b5005b0607ed1dc518dd2b48c4344f72e41d8bacfd)
* http

  + http/server.go
    [server.go](#diff-9cdb0ee2b48996738ec1fc3037630e10eb388ebc30fb400df2e627590f0148c6)

Prev

 [Next](/portainer/agent/pull/225/commits/9e860a67298991f6d92ab437db192a109da19028)Next commit

feat(server): stop if not associated

* Loading branch information

[![@chiptus](https://avatars.githubusercontent.com/u/1381655?s=40&v=4)](/chiptus)

[chiptus](/portainer/agent/commits?author=chiptus "View all commits by chiptus")
committed
Jan 12, 2022

commit a66977c76043fcff4a8f69c4b65988272d27c01f

## There are no files selected for viewing

3 changes: 3 additions & 0 deletions

3
[agent.go](#diff-07afbb40d3dc2699797d28c0689ba544f67ca642d0d3efcff3c02a0bbb3604fd "agent.go")

Show comments

[View file](/portainer/agent/blob/a66977c76043fcff4a8f69c4b65988272d27c01f/agent.go)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -122,6 +122,7 @@ type ( |
|  |  |  |
|  |  | // DigitalSignatureService is used to validate digital signatures. |
|  |  | DigitalSignatureService interface { |
|  |  | IsAssociated() bool |
|  |  | VerifySignature(signature, key string) (bool, error) |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -178,6 +179,8 @@ const ( |
|  |  | DefaultAgentPort = "9001" |
|  |  | // DefaultLogLevel is the default logging level. |
|  |  | DefaultLogLevel = "INFO" |
|  |  | // DefaultAgentSecurityShutdown is the default time after which the API server will shutdown if not associated with a Portainer instance |
|  |  | DefaultAgentSecurityShutdown = "3d" |
|  |  | // DefaultEdgeSecurityShutdown is the default time after which the Edge server will shutdown if no key is specified |
|  |  | DefaultEdgeSecurityShutdown = 15 |
|  |  | // DefaultEdgeServerAddr is the default address used by the Edge server. |
| Expand Down | |  |

7 changes: 6 additions & 1 deletion

7
[cmd/agent/main.go](#diff-61358711e980ccf505246fd3915f97cbd3a380e9b66f6fa5aad46749968c5ca3 "cmd/agent/main.go")

Show comments

[View file](/portainer/agent/blob/a66977c76043fcff4a8f69c4b65988272d27c01f/cmd/agent/main.go)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,8 +1,11 @@ |
|  |  | package main |
|  |  |  |
|  |  | import ( |
|  |  | "errors" |
|  |  | "fmt" |
|  |  | "log" |
|  |  | gohttp "net/http" |
|  |  | "runtime" |
|  |  | "time" |
|  |  |  |
|  |  | "github.com/portainer/agent" |
| Expand Down  Expand Up | | @@ -232,10 +235,12 @@ func main() { |
|  |  | } |
|  |  |  |
|  |  | err = startAPIServer(config) |
|  |  | if err != nil { |
|  |  | if err != nil && !errors.Is(err, gohttp.ErrServerClosed) { |
|  |  | log.Fatalf("[ERROR] [main,http] [message: Unable to start Agent API server] [error: %s]", err) |
|  |  | } |
|  |  |  |
|  |  | runtime.Goexit() |
| **chiptus** marked this conversation as resolved.   Show resolved  Hide resolved | | |
|  |  |  |
|  |  | // !API |
|  |  | } |
|  |  |  |
| Expand Down | |  |

6 changes: 6 additions & 0 deletions

6
[crypto/ecdsa.go](#diff-554210d4f44afafaa3b5a9b5005b0607ed1dc518dd2b48c4344f72e41d8bacfd "crypto/ecdsa.go")

Show comments

[View file](/portainer/agent/blob/a66977c76043fcff4a8f69c4b65988272d27c01f/crypto/ecdsa.go)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -26,6 +26,12 @@ func NewECDSAService(secret string) \*ECDSAService { |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // IsAssociated tells if the service is associated with a public key |
|  |  | // or if it's secured behind a secret |
|  |  | func (service \*ECDSAService) IsAssociated() bool { |
|  |  | return service.publicKey != nil || service.secret != "" |
|  |  | } |
|  |  |  |
|  |  | // VerifySignature is used to verify a digital signature using a specified public |
|  |  | // key. The public key specified as a parameter must be hexadecimal encoded. |
|  |  | // The public key will be decoded and parsed as DER data. If the service is not |
| Expand Down | |  |

22 changes: 22 additions & 0 deletions

22
[http/server.go](#diff-9cdb0ee2b48996738ec1fc3037630e10eb388ebc30fb400df2e627590f0148c6 "http/server.go")

Show comments

[View file](/portainer/agent/blob/a66977c76043fcff4a8f69c4b65988272d27c01f/http/server.go)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,6 +1,7 @@ |
|  |  | package http |
|  |  |  |
|  |  | import ( |
|  |  | "context" |
|  |  | "crypto/tls" |
|  |  | "log" |
|  |  | "net/http" |
| Expand Down  Expand Up | | @@ -134,5 +135,26 @@ func (server \*APIServer) StartSecured() error { |
|  |  | WriteTimeout: 30 \* time.Minute, |
|  |  | } |
|  |  |  |
|  |  | go func() { |
|  |  | agentSecurityShutdown := 10 |
|  |  |  |
|  |  | timer1 := time.NewTimer(time.Duration(agentSecurityShutdown) \* time.Second) |
|  |  | <-timer1.C |
| **chiptus** marked this conversation as resolved.   Show resolved  Hide resolved | | |
|  |  |  |
|  |  | if !server.signatureService.IsAssociated() { |
|  |  | log.Printf("[INFO] [main,http] [message: Shutting down API server as no client was associated after %d minutes , keeping alive to prevent restart by docker/kubernetes]", agentSecurityShutdown) |
|  |  |  |
|  |  | err := httpServer.Shutdown(context.Background()) |
|  |  | if err != nil { |
|  |  | log.Fatalf("[ERROR] [server] [message: failed shutting down server] [error: %s]", err) |
|  |  | } |
|  |  |  |
|  |  | // Keep alive |
|  |  | for { |
|  |  | time.Sleep(time.Second) |
|  |  | } |
| **chiptus** marked this conversation as resolved.   Show resolved  Hide resolved | | |
|  |  | } |
|  |  | }() |
|  |  |  |
|  |  | return httpServer.ListenAndServeTLS(agent.TLSCertPath, agent.TLSKeyPath) |
|  |  | } |

Toggle all file notes
Toggle all file annotations

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_84050a7f_20250114_234115.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fportainer%2Fagent%2Fcompare%2F2.11.0...2.11.1)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fportainer%2Fagent%2Fcompare%2F2.11.0...2.11.1)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fcompare%2Fshow&source=header-repo&source_repo=portainer%2Fagent)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[portainer](/portainer)
/
**[agent](/portainer/agent)**
Public

* [Notifications](/login?return_to=%2Fportainer%2Fagent) You must be signed in to change notification settings
* [Fork
  72](/login?return_to=%2Fportainer%2Fagent)
* [Star
   331](/login?return_to=%2Fportainer%2Fagent)

* [Code](/portainer/agent)
* [Issues
  44](/portainer/agent/issues)
* [Pull requests
  31](/portainer/agent/pulls)
* [Projects
  0](/portainer/agent/projects)
* [Security](/portainer/agent/security)
* [Insights](/portainer/agent/pulse)

Additional navigation options

* [Code](/portainer/agent)
* [Issues](/portainer/agent/issues)
* [Pull requests](/portainer/agent/pulls)
* [Projects](/portainer/agent/projects)
* [Security](/portainer/agent/security)
* [Insights](/portainer/agent/pulse)

[Permalink](https://github.com/portainer/agent/compare/portainer%3A6c6d4f6...portainer%3A824937e)
# Comparing changes

 Choose two branches to see what’s changed or to start a new pull request.
If you need to, you can also  compare across forks
 or
[learn more about diff comparisons](https://docs.github.com/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-comparing-branches-in-pull-requests#three-dot-and-two-dot-git-diff-comparisons).

# Open a pull request

 Create a new pull request by comparing changes across two branches. If you need to, you can also  compare across forks
.
[Learn more about diff comparisons here](https://docs.github.com/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-comparing-branches-in-pull-requests#three-dot-and-two-dot-git-diff-comparisons).

*base repository:*
portainer/agent

Failed to load repositories. Confirm that selected base ref is valid, then try again.

 Loading

*base:*
2.11.0

Choose a base ref

Branches
Tags

Could not load branches

Nothing to show

 Loading

[{{ refName }}
default](/portainer/agent/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...2.11.1)

Could not load tags

Nothing to show

[{{ refName }}
default](/portainer/agent/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...2.11.1)

 Loading

...

*head repository:*
portainer/agent

Failed to load repositories. Confirm that selected head ref is valid, then try again.

 Loading

*compare:*
2.11.1

Choose a head ref

Branches
Tags

Could not load branches

Nothing to show

 Loading

[{{ refName }}
default](/portainer/agent/compare/2.11.0...%7B%7B%20urlEncodedRefName%20%7D%7D)

Could not load tags

Nothing to show

[{{ refName }}
default](/portainer/agent/compare/2.11.0...%7B%7B%20urlEncodedRefName%20%7D%7D)

 Loading

* 6

  commits
* 10

  files changed
* 6

  contributors

### Commits on Dec 15, 2021

1. [chore(github): add label conflicts workflow (](/portainer/agent/commit/ad3895229f8a606b95f1a9d69ad462a331c2a88c)[#190](https://github.com/portainer/agent/pull/190)[)](/portainer/agent/commit/ad3895229f8a606b95f1a9d69ad462a331c2a88c)

   [![@chiptus](https://avatars.githubusercontent.com/u/1381655?s=40&v=4)](/chiptus)

   [chiptus](/portainer/agent/commits?author=chiptus "View all commits by chiptus")
   authored
   Dec 15, 2021

   Configuration menu

   * [View commit details](/portainer/agent/commit/ad3895229f8a606b95f1a9d69ad462a331c2a88c)
   * Copy full SHA for ad38952
   * [Browse repository at this point](/portainer/agent/tree/ad3895229f8a606b95f1a9d69ad462a331c2a88c)

   Copy the full SHA

    [ad38952](/portainer/agent/commit/ad3895229f8a606b95f1a9d69ad462a331c2a88c)View commit details

   Browse the repository at this point in the history

### Commits on Dec 20, 2021

1. [fix(upload):Fix agent issue for big file (](/portainer/agent/commit/ee566638e62d0da93d79340f92da11c49d18834a)[#219](https://github.com/portainer/agent/pull/219)[)](/portainer/agent/commit/ee566638e62d0da93d79340f92da11c49d18834a)
    …

   ```
   * fix(upload):Fix agent issue for big file
   ```

   [![@sunportainer](https://avatars.githubusercontent.com/u/93502624?s=40&v=4)](/sunportainer)

   [sunportainer](/portainer/agent/commits?author=sunportainer "View all commits by sunportainer")
   authored
   Dec 20, 2021

   Configuration menu

   * [View commit details](/portainer/agent/commit/ee566638e62d0da93d79340f92da11c49d18834a)
   * Copy full SHA for ee56663
   * [Browse repository at this point](/portainer/agent/tree/ee566638e62d0da93d79340f92da11c49d18834a)

   Copy the full SHA

    [ee56663](/portainer/agent/commit/ee566638e62d0da93d79340f92da11c49d18834a)View commit details

   Browse the repository at this point in the history

### Commits on Jan 10, 2022

1. [feat: bump golang to 1.17 (](/portainer/agent/commit/9136a2945583b7d56b40a0588c35cf3782240878)[#224](https://github.com/portainer/agent/pull/224)[)](/portainer/agent/commit/9136a2945583b7d56b40a0588c35cf3782240878)

   [![@DimaSalakhov](https://avatars.githubusercontent.com/u/841685?s=40&v=4)](/DimaSalakhov)

   [DimaSalakhov](/portainer/agent/commits?author=DimaSalakhov "View all commits by DimaSalakhov")
   authored
   Jan 10, 2022

   Configuration menu

   * [View commit details](/portainer/agent/commit/9136a2945583b7d56b40a0588c35cf3782240878)
   * Copy full SHA for 9136a29
   * [Browse repository at this point](/portainer/agent/tree/9136a2945583b7d56b40a0588c35cf3782240878)

   Copy the full SHA

    [9136a29](/portainer/agent/commit/9136a2945583b7d56b40a0588c35cf3782240878)View commit details

   Browse the repository at this point in the history

### Commits on Jan 18, 2022

1. [feat(server): stop if not associated [EE-1610] (](/portainer/agent/commit/e39fe0173fc4e63da02c56d10ca11f9967ed2e07)[#225](https://github.com/portainer/agent/pull/225)[)](/portainer/agent/commit/e39fe0173fc4e63da02c56d10ca11f9967ed2e07)
    …

   ```
   * feat(server): stop if not associated

   * refactor(agent): get duration from env var

   * chore(docs): document `AGENT_SECURITY_SHUTDOWN`

   * fix(security): change default shutdown to 72h

   * refactor(options): rename to AGENT_SECRET_TIMEOUT

   * refactor(server): use sleep instead of timer

   * fix(server): wait for signal to shutdown
   ```

   [![@chiptus](https://avatars.githubusercontent.com/u/1381655?s=40&v=4)](/chiptus)

   [chiptus](/portainer/agent/commits?author=chiptus "View all commits by chiptus")
   authored
   Jan 18, 2022

   Configuration menu

   * [View commit details](/portainer/agent/commit/e39fe0173fc4e63da02c56d10ca11f9967ed2e07)
   * Copy full SHA for e39fe01
   * [Browse repository at this point](/portainer/agent/tree/e39fe0173fc4e63da02c56d10ca11f9967ed2e07)

   Copy the full SHA

    [e39fe01](/portainer/agent/commit/e39fe0173fc4e63da02c56d10ca11f9967ed2e07)View commit details

   Browse the repository at this point in the history
2. [bump version to 2.11.1](/portainer/agent/commit/c6432da1c9b822525e05ccc65e4d495f4bbe635f)

   [![@ArrisLee](https://avatars.githubusercontent.com/u/20032458?s=40&v=4)](/ArrisLee)

   [ArrisLee](/portainer/agent/commits?author=ArrisLee "View all commits by ArrisLee")
   committed
   Jan 18, 2022

   Configuration menu

   * [View commit details](/portainer/agent/commit/c6432da1c9b822525e05ccc65e4d495f4bbe635f)
   * Copy full SHA for c6432da
   * [Browse repository at this point](/portainer/agent/tree/c6432da1c9b822525e05ccc65e4d495f4bbe635f)

   Copy the full SHA

    [c6432da](/portainer/agent/commit/c6432da1c9b822525e05ccc65e4d495f4bbe635f)View commit details

   Browse the repository at this point in the history

### Commits on Jan 24, 2022

1. [fix(main): stop service only on kill or interrupt [EE-2422] (](/portainer/agent/commit/824937ea222f6f002bb060f0a7fc33681c0c946c)[#227](https://github.com/portainer/agent/pull/227)[)](/portainer/agent/commit/824937ea222f6f002bb060f0a7fc33681c0c946c)
    …

   ```
   Co-authored-by: Prabhat Khera <prabhat.khera@gmail.com>
   ```

   [![@prabhat83](https://avatars.githubusercontent.com/u/91852476?s=40&v=4)](/prabhat83)

   [prabhat83](/portainer/agent/commits?author=prabhat83 "View all commits by prabhat83")
   and
   [prabhat83](/portainer/agent/commits?author=prabhat83 "View all commits by prabhat83")
   authored
   Jan 24, 2022

   Configuration menu

   * [View commit details](/portainer/agent/commit/824937ea222f6f002bb060f0a7fc33681c0c946c)
   * Copy full SHA for 824937e
   * [Browse repository at this point](/portainer/agent/tree/824937ea222f6f002bb060f0a7fc33681c0c946c)

   Copy the full SHA

    [824937e](/portainer/agent/commit/824937ea222f6f002bb060f0a7fc33681c0c946c)View commit details

   Browse the repository at this point in the history

 Loading

### This comparison is taking too long to generate.

Unfortunately it looks like we can’t render this comparison for you right now. It might be too big, or there might be something weird with your repository.

You can try running this command locally to see the comparison on your machine:

`git diff 2.11.0...2.11.1`

  Retry

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.portainer.io_4a45b33e_20250114_234127.html ===


[Skip to content](#main-content)

Close

* Product
  + [Portainer Platform](https://www.portainer.io/products/portainer-platform-universal-container-management-platform)
    - [Features](https://www.portainer.io/features)
    - [Kubernetes](https://www.portainer.io/kubernetes-management-platform)
    - [Docker and Docker Swarm](https://www.portainer.io/docker-swarm-container-management-platform-gui)
  + [Portainer Platform for Edge/IIoT](https://www.portainer.io/products/portainer-platform-for-edge)
    - [Edge Features](https://www.portainer.io/features?section=edgeFeatures&tab=arm32Support)
  + [Portainer Managed Platform Services](https://www.portainer.io/products/portainer-managed-platform-services)
* Solutions
  + [For Multi-Cluster Management](https://www.portainer.io/solutions/multi-cluster-management-for-enterprise-it)
    - Common Use Cases
      * [Deploy Containers](https://www.portainer.io/deploy-containers)
      * [Triage and Remediate](https://www.portainer.io/triage-remediation)
      * [Lifecycle Management](https://www.portainer.io/lifecycle-management)
      * [Platform Management](https://www.portainer.io/platform-management)
      * [Security & Compliance](https://www.portainer.io/security-and-compliance)
      * [GitOps Automation](https://www.portainer.io/gitops-automation)
      * [Developer Self Service](https://www.portainer.io/developer-self-service)
  + [For Platform Engineering](https://www.portainer.io/solutions/for-platform-engineering)
  + [For Small Business IT Operations](https://www.portainer.io/solutions/small-business-it-operations)
  + [For Industrial IoT](https://www.portainer.io/solutions/industrial-iot-management)
    - Deployment Scenarios
      * [Smart Manufacturing](https://www.portainer.io/iiot-edge/deployment/smart-manufacturing)
      * [Smart Buildings and Cities](https://www.portainer.io/iiot-edge/deployment/smart-buildings-cities)
      * [Network Edge](https://www.portainer.io/iiot-edge/deployment/network-edge)
    - Partner Solutions
      * [Wago + Portainer](https://www.portainer.io/wago-portainer-solution)
      * [inray + Portainer](https://www.portainer.io/inray-portainer-solution)
      * [Innocens + Portainer](https://www.portainer.io/innocens-portainer-partner)
      * [40Factory + Portainer](https://www.portainer.io/40factory-portainer-solution)
  + [For Edge Compute Management](https://www.portainer.io/solutions/edge-compute-management)
* Resources
  + Learn
    - [Academy](https://www.portainer.io/academy)
    - [Blog](https://www.portainer.io/blog)
    - [Documentation](https://docs.portainer.io)
    - [Knowledge Base](https://portal.portainer.io/knowledge)
    - [Get a Demo](https://www.portainer.io/get-demo)
    - [Videos](https://www.youtube.com/c/PortainerIO)
    - [Reference Architecture](https://academy.portainer.io/architecture/#/)
  + Connect
    - [Contact Us](https://www.portainer.io/contact-us)
    - [Get Support](https://www.portainer.io/get-support-for-portainer)
    - [Install](https://www.portainer.io/install)
    - [Renew](https://www.portainer.io/renew)
    - [Portainer CE](https://github.com/portainer/portainer)
  + Company
    - [About Us](https://www.portainer.io/about-us)
    - [Careers](https://apply.workable.com/portainer/)
    - [Become a Partner](https://www.portainer.io/become-a-partner)
* [Customers](https://www.portainer.io/customers)
* Pricing
  + For
    - [Business / Enterprise IT](https://www.portainer.io/business-enterprise-pricing)
    - [IIoT / Edge](https://www.portainer.io/pricing-iiot-edge)
    - [Home & Student](https://www.portainer.io/homeandstudent-payment)
  + Buyer Guides
    - [Building a Business Case for Portainer](https://www.portainer.io/building-a-business-case-for-portainer)
    - [Customer Stories](https://www.portainer.io/customers)
    - [Containerization Operational Readiness Assessment](https://www.portainer.io/containerization-operational-maturity-framework)
    - [Portainer vs Rancher vs Openshift](https://www.portainer.io/portainer-vs-rancher-vs-openshift)
    - [Portainer Proof of Concept Test Plan](https://www.portainer.io/portainer-proof-of-concept-test-plan)
SEARCH

[Get Started](https://www.portainer.io/get-started)
[Contact Us](https://www.portainer.io/contact)

[![logo](https://www.portainer.io/hubfs/portainer-logo-black.svg "logo")](/)

* Product
  + [Portainer Platform](https://www.portainer.io/products/portainer-platform-universal-container-management-platform)
    - [Features](https://www.portainer.io/features)
    - [Kubernetes](https://www.portainer.io/kubernetes-management-platform)
    - [Docker and Docker Swarm](https://www.portainer.io/docker-swarm-container-management-platform-gui)
  + [Portainer Platform for Edge/IIoT](https://www.portainer.io/products/portainer-platform-for-edge)
    - [Edge Features](https://www.portainer.io/features?section=edgeFeatures&tab=arm32Support)
  + [Portainer Managed Platform Services](https://www.portainer.io/products/portainer-managed-platform-services)
* Solutions
  + [For Multi-Cluster Management](https://www.portainer.io/solutions/multi-cluster-management-for-enterprise-it)
    - Common Use Cases
      * [Deploy Containers](https://www.portainer.io/deploy-containers)
      * [Triage and Remediate](https://www.portainer.io/triage-remediation)
      * [Lifecycle Management](https://www.portainer.io/lifecycle-management)
      * [Platform Management](https://www.portainer.io/platform-management)
      * [Security & Compliance](https://www.portainer.io/security-and-compliance)
      * [GitOps Automation](https://www.portainer.io/gitops-automation)
      * [Developer Self Service](https://www.portainer.io/developer-self-service)
  + [For Platform Engineering](https://www.portainer.io/solutions/for-platform-engineering)
  + [For Small Business IT Operations](https://www.portainer.io/solutions/small-business-it-operations)
  + [For Industrial IoT](https://www.portainer.io/solutions/industrial-iot-management)
    - Deployment Scenarios
      * [Smart Manufacturing](https://www.portainer.io/iiot-edge/deployment/smart-manufacturing)
      * [Smart Buildings and Cities](https://www.portainer.io/iiot-edge/deployment/smart-buildings-cities)
      * [Network Edge](https://www.portainer.io/iiot-edge/deployment/network-edge)
    - Partner Solutions
      * [Wago + Portainer](https://www.portainer.io/wago-portainer-solution)
      * [inray + Portainer](https://www.portainer.io/inray-portainer-solution)
      * [Innocens + Portainer](https://www.portainer.io/innocens-portainer-partner)
      * [40Factory + Portainer](https://www.portainer.io/40factory-portainer-solution)
  + [For Edge Compute Management](https://www.portainer.io/solutions/edge-compute-management)
* Resources
  + Learn
    - [Academy](https://www.portainer.io/academy)
    - [Blog](https://www.portainer.io/blog)
    - [Documentation](https://docs.portainer.io)
    - [Knowledge Base](https://portal.portainer.io/knowledge)
    - [Get a Demo](https://www.portainer.io/get-demo)
    - [Videos](https://www.youtube.com/c/PortainerIO)
    - [Reference Architecture](https://academy.portainer.io/architecture/#/)
  + Connect
    - [Contact Us](https://www.portainer.io/contact-us)
    - [Get Support](https://www.portainer.io/get-support-for-portainer)
    - [Install](https://www.portainer.io/install)
    - [Renew](https://www.portainer.io/renew)
    - [Portainer CE](https://github.com/portainer/portainer)
  + Company
    - [About Us](https://www.portainer.io/about-us)
    - [Careers](https://apply.workable.com/portainer/)
    - [Become a Partner](https://www.portainer.io/become-a-partner)
* [Customers](https://www.portainer.io/customers)
* Pricing
  + For
    - [Business / Enterprise IT](https://www.portainer.io/business-enterprise-pricing)
    - [IIoT / Edge](https://www.portainer.io/pricing-iiot-edge)
    - [Home & Student](https://www.portainer.io/homeandstudent-payment)
  + Buyer Guides
    - [Building a Business Case for Portainer](https://www.portainer.io/building-a-business-case-for-portainer)
    - [Customer Stories](https://www.portainer.io/customers)
    - [Containerization Operational Readiness Assessment](https://www.portainer.io/containerization-operational-maturity-framework)
    - [Portainer vs Rancher vs Openshift](https://www.portainer.io/portainer-vs-rancher-vs-openshift)
    - [Portainer Proof of Concept Test Plan](https://www.portainer.io/portainer-proof-of-concept-test-plan)

[Get Started](https://www.portainer.io/get-started)
[Contact Us](https://www.portainer.io/contact)

Quick results for "{search\_term}"

**[The Portainer Platform](https://www.portainer.io/products/portainer-platform-universal-container-management-platform)**Securely manage Docker, Swarm, Kubernetes and Podman clusters in the cloud, on-premise, and in the data center.
[Features](https://www.portainer.io/features "Button Features")
[Kubernetes](https://www.portainer.io/kubernetes-management-platform "Button Kubernetes")
[Docker / Swarm](https://www.portainer.io/docker-swarm-container-management-platform-gui "Button Docker / Swarm")

**[Portainer for Edge](https://www.portainer.io/products/portainer-platform-for-edge)**Secure app deployment and device management for your Industrial IoT, IoT and Edge devices.
[Edge-Specific Features](https://www.portainer.io/features#edge "Button Edge-Specific Features")
**[Managed Platform Services](https://www.portainer.io/products/portainer-managed-platform-services)**Let Portainer's Managed Platform Services accelerate your containerization journey.

**[For Multi-Cluster Management](https://www.portainer.io/solutions/multi-cluster-management-for-enterprise-it)**Manage all your Docker, Swarm, Kubernetes and Podman clusters from a single secure interface.**[For Platform Engineering](https://www.portainer.io/solutions/for-platform-engineering)**Portainer empowers Platform Engineering teams to deliver efficient, user-centric services.**[For Small Business IT Operations](https://www.portainer.io/solutions/small-business-it-operations)**Empower your business by adopting containerization the easy way with Portainer.**[For Edge Compute](https://www.portainer.io/solutions/edge-compute-management)**Deploy to and manage your fleet of remote devices centrally and securely.

**[For Industrial IoT](https://www.portainer.io/solutions/industrial-iot-management)**Onboard, manage and deploy workloads across hundreds of devices securely with Portainer.
Deployment scenarios
[Smart Buildings and Cities](https://www.portainer.io/iiot-edge/deployment/smart-buildings-cities "Button Smart Buildings and Cities")
[Smart Manufacturing](https://www.portainer.io/iiot-edge/deployment/smart-manufacturing "Button Smart Manufacturing")
[Network Edge](https://www.portainer.io/iiot-edge/deployment/network-edge "Button Network Edge")
Partner Solutions
[WAGO + Portainer](https://www.portainer.io/wago-portainer-solution "Button WAGO + Portainer")
[inray + Portainer](https://www.portainer.io/inray-portainer-solution "Button inray + Portainer")
[40Factory + Portainer](https://www.portainer.io/40factory-portainer-solution "Button 40Factory + Portainer")
[Innocens + Portainer](https://www.portainer.io/innocens-portainer-partner "Button Innocens + Portainer")
[Softing + Portainer](https://www.portainer.io/softing-portainer-solution "Button Softing + Portainer")

Common Use Cases
[Deploy Containers](https://www.portainer.io/deploy-containers "Button Deploy Containers")
[Triage & Remediate](https://www.portainer.io/triage-remediation "Button Triage & Remediate")
[Lifecycle Management](https://www.portainer.io/lifecycle-management "Button Lifecycle Management")
[Platform Management](https://www.portainer.io/platform-management "Button Platform Management")
[Security and Compliance](https://www.portainer.io/security-and-compliance "Button Security and Compliance")
[GitOps Automation](https://www.portainer.io/gitops-automation "Button GitOps Automation")
[Developer Self-Service](https://www.portainer.io/developer-self-service "Button Developer Self-Service")

Learn
[Academy](https://www.portainer.io/academy "Button Academy")
[Blog](https://www.portainer.io/blog "Button Blog")
[Documentation](https://docs.portainer.io "Button Documentation")
[Knowledge Base](https://portal.portainer.io/knowledge "Button Knowledge Base")
[Get a Demo](https://www.portainer.io/get-demo "Button Get a Demo")
[Videos](https://www.youtube.com/c/PortainerIO "Button Videos")
[Reference Architecture](https://academy.portainer.io/architecture/#/ "Button Reference Architecture")

Connect
[Contact Us](https://www.portainer.io/contact "Button Contact Us")
[Get Support](https://www.portainer.io/get-support-for-portainer "Button Get Support")
[Install](https://www.portainer.io/install "Button Install")
[Renew](https://www.portainer.io/renew "Button Renew")
[Portainer CE](https://github.com/portainer/portainer "Button Portainer CE")
[Events](https://www.portainer.io/events "Button Events")

Company
[About Us](https://www.portainer.io/about-us "Button About Us")
[Become a Partner](https://www.portainer.io/become-a-partner "Button Become a Partner")
[Meet Our Ambassadors](https://www.portainer.io/meet-our-ambassadors "Button Meet Our Ambassadors")
[Careers](https://apply.workable.com/portainer/ "Button Careers")

Get Pricing For
[Business / Enterprise IT](https://www.portainer.io/business-enterprise-pricing "Button Business / Enterprise IT")
[IIoT / Edge](https://www.portainer.io/pricing-iiot-edge "Button IIoT / Edge")
[Home & Student](https://www.portainer.io/homeandstudent-payment "Button Home & Student")
[Contact Sales](https://www.portainer.io/contact-sales "Button Contact Sales")

Buyer Guides
[Top Questions We Get Asked By Enterprises](https://www.portainer.io/top-questions-we-get-asked-by-enterprises "Button Top Questions We Get Asked By Enterprises")
[Building a Business Case for Portainer](https://www.portainer.io/building-a-business-case-for-portainer "Button Building a Business Case for Portainer")
[Containerization Operational Maturity Framework](https://www.portainer.io/containerization-operational-maturity-framework "Button Containerization Operational Maturity Framework")
[Portainer vs Rancher vs OpenShift](https://www.portainer.io/portainer-vs-rancher-vs-openshift "Button Portainer vs Rancher vs OpenShift")
[Proof of Concept Test Plan](https://www.portainer.io/portainer-proof-of-concept-test-plan "Button Proof of Concept Test Plan")

![blog-banner](https://www.portainer.io/hubfs/blog-banner.svg)

[Neil Cresswell, CEO](https://www.portainer.io/blog/author/neil-cresswell)December 19, 20212 min read
# Should you expose Portainer (or Agent) to the Internet??

This is a question we get asked over and over, and its likely that for the 10 that ask the question, there are another 1000 that dont ask, and just do..

So, should you expose Portainer (or our agent) to the Internet..

Well, if you want the short answer, its NO... but for the longer answer, read on.

Portainer is an administrative tool with a very high degree of privilege and access to your container environent; as a result, access TO Portainer itself should be strictly controlled. If you are familiar with VMware, ask yourself, would you expose vCenter direct to the internet? I think not. How about your Cloud Provider portals, would you expect the cloud provider to allow logins without some form of 2 factor authentication in front of their UI or API? Nope..

Its with shock that we note the Shodan.io tool lists 5,710 instances of the Portainer Agent exposed to the internet, and a staggering 31,677 instances of Portainer itself. Remember this tool also shows the IP addresses listening on these Ports, so think long and hard as to whether you want/need your instances public.

Portainer has two agents; our standard agent, and our edge agent (as shown below). ![](https://www.portainer.io/hubfs/image-png-Dec-19-2021-10-45-42-05-PM.png)

The standard Agent is designed for use WITHIN YOUR LAN/WAN, and the Edge Agent is designed to manage container environments connected to the public internet. If you are using our standard agent, and you have exposed it to the internet (by publishing port 9001 publically), then might we suggest that you rethink this strategy. If nothing else, you should have a firewall ACL in place that only allows access to port 9001 from trusted IPs (namely, the public IP of your Portainer instance). If you have 9001 exposed to the internet without any form of protection, you need to reconsider.

The Edge agent does not require ANY inbound ports, as it connects back to Portainer over the internet using a secure tunnel.. This is why its recommended whenever you have container environments remote that you need to connect to over the internet.

Now, in regards to exposing Portainer (HTTP:9000 / HTTPS:9443); please make sure you are using our External Authentication capability and integrate Portainer with a trusted authentication provider that includes 2FA (eg Github Auth, Google Auth, Azure Auth).. you should never rely on JUST a password for something as critical as Portainer. This external auth is included for free in Portainer CE (oAUTH, Custom) - see docs.portainer.io if you need guidance on how to configure this.

In an upcoming version of Portainer (2.11.1) we will be making (likely breaking) changes to the regular agent to bolster its security, as we need to provide additional protection for those not following the above recommendations.

Neil

![avatar]()

[#### Neil Cresswell, CEO](https://www.portainer.io/blog/author/neil-cresswell)Neil brings more than twenty years’ experience in advanced technology including virtualization, storage and containerization.

#### COMMENTS

## Related articles

[![portainer-logo-white]()](/)

* Product
  + [Portainer Platform](https://www.portainer.io/products/portainer-platform-universal-container-management-platform)
  + [- Features](https://www.portainer.io/features)
  + [- Kubernetes](https://www.portainer.io/kubernetes-management-platform)
  + [- Docker / Swarm](https://www.portainer.io/docker-swarm-container-management-platform-gui)
  + [Portainer Platform for Edge](https://www.portainer.io/products/portainer-platform-for-edge)
  + [- Edge/IIoT Specific Features](https://www.portainer.io/features#edge)
  + [Managed Platform Services](https://www.portainer.io/products/portainer-managed-platform-services)
* Solutions
  + [For Multi-Cluster Management](https://www.portainer.io/solutions/multi-cluster-management-for-enterprise-it)
  + [For Platform Engineering](https://www.portainer.io/solutions/for-platform-engineering)
  + [For Small Business IT Operations](https://www.portainer.io/solutions/small-business-it-operations)
  + [For Industrial IoT Management](https://www.portainer.io/solutions/industrial-iot-management)
  + [For Edge Compute](https://www.portainer.io/solutions/edge-compute-management)
* Resources
  + [Docs](https://docs.portainer.io/)
  + [Knowledge Base](https://portal.portainer.io/knowledge)
  + [Portainer Academy](https://www.portainer.io/academy)
  + [Get Support](https://www.portainer.io/get-support-for-portainer)
  + [Install Portainer](https://www.portainer.io/install)
* Quick Links
  + [Get 3 Nodes Free](https://www.portainer.io/take-3)
  + [Pricing](https://www.portainer.io/pricing)
  + [Contact Sales](https://www.portainer.io/contact-sales)
  + [Customer Stories](https://www.portainer.io/customers)
  + [Contact Us](https://www.portainer.io/contact-us)
  + [Get a Demo](https://www.portainer.io/get-demo)

All rights reserved - Reg. U.S. Pat. & TM Office

* [Privacy Policy](https://www.portainer.io/privacy-policy)
* [License Agreements](https://www.portainer.io/terms-and-license-agreements)
* [Support Terms](https://www.portainer.io/support-terms)

![](https://tracking.g2crowd.com/attribution_tracking/conversions/5416.gif?e=)
![websights](https://ws.zoominfo.com/pixel/6348a9728d04b28e7b6441b6)



=== Content from github.com_f803760f_20250114_234123.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fportainer%2Fportainer%2Fissues%2F6420)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fportainer%2Fportainer%2Fissues%2F6420)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=portainer%2Fportainer)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[portainer](/portainer)
/
**[portainer](/portainer/portainer)**
Public

* [Notifications](/login?return_to=%2Fportainer%2Fportainer) You must be signed in to change notification settings
* [Fork
  2.5k](/login?return_to=%2Fportainer%2Fportainer)
* [Star
   31.6k](/login?return_to=%2Fportainer%2Fportainer)

* [Code](/portainer/portainer)
* [Issues
  520](/portainer/portainer/issues)
* [Pull requests
  174](/portainer/portainer/pulls)
* [Discussions](/portainer/portainer/discussions)
* [Projects
  0](/portainer/portainer/projects)
* [Security](/portainer/portainer/security)
* [Insights](/portainer/portainer/pulse)

Additional navigation options

* [Code](/portainer/portainer)
* [Issues](/portainer/portainer/issues)
* [Pull requests](/portainer/portainer/pulls)
* [Discussions](/portainer/portainer/discussions)
* [Projects](/portainer/portainer/projects)
* [Security](/portainer/portainer/security)
* [Insights](/portainer/portainer/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fportainer%2Fportainer%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fportainer%2Fportainer%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Added behavior for Edge agents to reject connections if not connected to within 72hrs #6420

Closed

[joshua-portainer](/joshua-portainer) opened this issue
Jan 19, 2022
· 0 comments

Closed

# [Added behavior for Edge agents to reject connections if not connected to within 72hrs](#top) #6420

[joshua-portainer](/joshua-portainer) opened this issue
Jan 19, 2022
· 0 comments

Labels
[area/edge-agent](/portainer/portainer/labels/area/edge-agent)
[internal/jira](/portainer/portainer/labels/internal/jira)

Milestone
[CE-2.11.1](/portainer/portainer/milestone/109 "CE-2.11.1")

## Comments

[![@joshua-portainer](https://avatars.githubusercontent.com/u/82781759?s=80&u=1f0221804a89972cf28f072c8091063f77f2c38c&v=4)](/joshua-portainer)

Copy link

### **[joshua-portainer](/joshua-portainer)** commented [Jan 19, 2022](#issue-1107603756) • edited by jira bot Loading

| If an agent is running for more than 3 days, and is not associated with a Portainer instance by then, it should start rejecting any incoming connections.  This mechanism does not apply when using agent secret.  [EE-2421](https://portainer.atlassian.net/browse/EE-2421?atlOrigin=eyJpIjoiNWRkNTljNzYxNjVmNDY3MDlhMDU5Y2ZhYzA5YTRkZjUiLCJwIjoiZ2l0aHViLWNvbS1KU1cifQ) |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@joshua-portainer](https://avatars.githubusercontent.com/u/82781759?s=40&u=1f0221804a89972cf28f072c8091063f77f2c38c&v=4)](/joshua-portainer)
[joshua-portainer](/joshua-portainer)
added this to the [CE-2.11.1](/portainer/portainer/milestone/109) milestone
[Jan 21, 2022](#event-5929301954)

[![@joshua-portainer](https://avatars.githubusercontent.com/u/82781759?s=40&u=1f0221804a89972cf28f072c8091063f77f2c38c&v=4)](/joshua-portainer)
[joshua-portainer](/joshua-portainer)
added
[area/edge-agent](/portainer/portainer/labels/area/edge-agent)
[internal/jira](/portainer/portainer/labels/internal/jira)
labels
[Jan 21, 2022](#event-5929302771)

[![@huib-portainer](https://avatars.githubusercontent.com/u/77944876?s=40&u=32439b8e3977ec158db56ee4d9eb112b12d157d3&v=4)](/huib-portainer)
[huib-portainer](/huib-portainer)
mentioned this issue
[Feb 1, 2022](#ref-pullrequest-1099989765)

[feat(server): stop if not associated [EE-1610]
portainer/agent#225](/portainer/agent/pull/225)
 Merged

[![@huib-portainer](https://avatars.githubusercontent.com/u/77944876?s=40&u=32439b8e3977ec158db56ee4d9eb112b12d157d3&v=4)](/huib-portainer)
[huib-portainer](/huib-portainer)
closed this as [completed](/portainer/portainer/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Feb 1, 2022](#event-5991711790)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fportainer%2Fportainer%2Fissues%2F6420)

Assignees

No one assigned

Labels

[area/edge-agent](/portainer/portainer/labels/area/edge-agent)
[internal/jira](/portainer/portainer/labels/internal/jira)

Projects

None yet

Milestone

 [**CE-2.11.1**](/portainer/portainer/milestone/109 "CE-2.11.1")

Development

No branches or pull requests

2 participants

[![@huib-portainer](https://avatars.githubusercontent.com/u/77944876?s=52&v=4)](/huib-portainer) [![@joshua-portainer](https://avatars.githubusercontent.com/u/82781759?s=52&v=4)](/joshua-portainer)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


