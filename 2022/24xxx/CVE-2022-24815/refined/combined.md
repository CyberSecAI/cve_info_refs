=== Content from github.com_62546438_20250114_202225.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjhipster%2Fgenerator-jhipster%2Fsecurity%2Fadvisories%2FGHSA-qjmq-8hjr-qcv6)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjhipster%2Fgenerator-jhipster%2Fsecurity%2Fadvisories%2FGHSA-qjmq-8hjr-qcv6)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=jhipster%2Fgenerator-jhipster)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jhipster](/jhipster)
/
**[generator-jhipster](/jhipster/generator-jhipster)**
Public

* [Notifications](/login?return_to=%2Fjhipster%2Fgenerator-jhipster) You must be signed in to change notification settings
* [Fork
  4k](/login?return_to=%2Fjhipster%2Fgenerator-jhipster)
* [Star
   21.7k](/login?return_to=%2Fjhipster%2Fgenerator-jhipster)

* [Code](/jhipster/generator-jhipster)
* [Issues
  105](/jhipster/generator-jhipster/issues)
* [Pull requests
  23](/jhipster/generator-jhipster/pulls)
* [Discussions](/jhipster/generator-jhipster/discussions)
* [Actions](/jhipster/generator-jhipster/actions)
* [Projects
  0](/jhipster/generator-jhipster/projects)
* [Security](/jhipster/generator-jhipster/security)
* [Insights](/jhipster/generator-jhipster/pulse)

Additional navigation options

* [Code](/jhipster/generator-jhipster)
* [Issues](/jhipster/generator-jhipster/issues)
* [Pull requests](/jhipster/generator-jhipster/pulls)
* [Discussions](/jhipster/generator-jhipster/discussions)
* [Actions](/jhipster/generator-jhipster/actions)
* [Projects](/jhipster/generator-jhipster/projects)
* [Security](/jhipster/generator-jhipster/security)
* [Insights](/jhipster/generator-jhipster/pulse)

# SQL Injection when creating an application with Reactive SQL backend

High

[deepu105](/deepu105)
published
GHSA-qjmq-8hjr-qcv6
Apr 7, 2022

## Package

npm

generator-jhipster
([npm](/advisories?query=ecosystem%3Anpm))

## Affected versions

> v7.0.0 < v7.8.1

## Patched versions

v7.8.1

## Description

### Impact

SQL Injection vulnerability in entities for applications generated with the option "reactive with Spring WebFlux" enabled and an SQL database using r2dbc. Applications created without "reactive with Spring WebFlux" and applications with NoSQL databases are not affected.

If you have generated a microservice Gateway using the affected version, you might be impacted as Gateways are reactive by default.

Currently, SQL injection is possible in the `findAllBy(Pageable pageable, Criteria criteria)` method of an entity repository class generated in these applications as the where clause using Criteria for queries are not sanitized and user input is passed on as it is by the criteria.

## Impacted applications

* Monolith and microservice applications with SQL database and reactive with Spring WebFlux combination (other combinations are not affected and the issue is only present when you generate entities)
* Gateway applications with SQL database (issue will appear only when generating entities)

### Patches

Patched in v7.8.1

The `findAllBy(Pageable pageable, Criteria criteria)` method has been removed from the entity repositories and `org.springframework.data.relational.core.query.Criteria` support in the underlying methods has been replaced with `org.springframework.data.relational.core.sql.Condition`. This means you won't be able to do custom filtering in the generated applications.

If you have existing reactive applications generated by the impacted version, we advise you to audit for use of `Criteria` and take appropriate actions.

### Workarounds

The problem lies in the `EntityManager.java` class when creating the where clause via `Conditions.just(criteria.toString())`.

`just` accepts the literal string provided. Criteria's `toString` method returns a plain string and this combination is vulnerable to sql injection as the string is not sanitized and will contain whatever used passed as input using any plain SQL

So be careful when combining criterias and conditions. As a workaround we have removed the possibility to pass any user-provided criteria to the `createSelect` method of `EntityManager`.

### Example

```
Criteria criteria = Criteria.where("name").is("foobar';DROP TABLE example;--"); // parameter is user provided input
criteria.toString(); // --> "'foobar';DROP TABLE example;--'"
```
### References

[More details in this Issue report](https://github.com/jhipster/generator-jhipster/issues/18269)

### For more information

If you have any questions or comments about this advisory:

* Open an issue in [JHipster issue tracker](https://github.com/jhipster/generator-jhipster/issues)

### Severity

High

### CVE ID

CVE-2022-24815

### Weaknesses

No CWEs

### Credits

* [![@atomfrede](https://avatars.githubusercontent.com/u/203401?s=40&v=4)](/atomfrede)
  [atomfrede](/atomfrede)
  Analyst
* [![@pascalgrimaud](https://avatars.githubusercontent.com/u/9156882?s=40&v=4)](/pascalgrimaud)
  [pascalgrimaud](/pascalgrimaud)
  Analyst
* [![@appkr](https://avatars.githubusercontent.com/u/6471947?s=40&v=4)](/appkr)
  [appkr](/appkr)
  Analyst
* [![@OmarHawk](https://avatars.githubusercontent.com/u/2911492?s=40&v=4)](/OmarHawk)
  [OmarHawk](/OmarHawk)
  Analyst

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_5ff340df_20250114_202224.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjhipster%2Fgenerator-jhipster%2Fissues%2F18269)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjhipster%2Fgenerator-jhipster%2Fissues%2F18269)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=jhipster%2Fgenerator-jhipster)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jhipster](/jhipster)
/
**[generator-jhipster](/jhipster/generator-jhipster)**
Public

* [Notifications](/login?return_to=%2Fjhipster%2Fgenerator-jhipster) You must be signed in to change notification settings
* [Fork
  4k](/login?return_to=%2Fjhipster%2Fgenerator-jhipster)
* [Star
   21.7k](/login?return_to=%2Fjhipster%2Fgenerator-jhipster)

* [Code](/jhipster/generator-jhipster)
* [Issues
  105](/jhipster/generator-jhipster/issues)
* [Pull requests
  23](/jhipster/generator-jhipster/pulls)
* [Discussions](/jhipster/generator-jhipster/discussions)
* [Actions](/jhipster/generator-jhipster/actions)
* [Projects
  0](/jhipster/generator-jhipster/projects)
* [Security](/jhipster/generator-jhipster/security)
* [Insights](/jhipster/generator-jhipster/pulse)

Additional navigation options

* [Code](/jhipster/generator-jhipster)
* [Issues](/jhipster/generator-jhipster/issues)
* [Pull requests](/jhipster/generator-jhipster/pulls)
* [Discussions](/jhipster/generator-jhipster/discussions)
* [Actions](/jhipster/generator-jhipster/actions)
* [Projects](/jhipster/generator-jhipster/projects)
* [Security](/jhipster/generator-jhipster/security)
* [Insights](/jhipster/generator-jhipster/pulse)

# SQL Injection in Reactive project¬†#18269

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosed[#18294](https://github.com/jhipster/generator-jhipster/pull/18294)Closed[SQL Injection in Reactive project](#top)#18269[#18294](https://github.com/jhipster/generator-jhipster/pull/18294)Copy linkLabels[$$ bug-bounty $$https://www.jhipster.tech/bug-bounties/](https://github.com/jhipster/generator-jhipster/issues?q=state%3Aopen%20label%3A%22%24%24%20bug-bounty%20%24%24%22)https://www.jhipster.tech/bug-bounties/[$500https://www.jhipster.tech/bug-bounties/](https://github.com/jhipster/generator-jhipster/issues?q=state%3Aopen%20label%3A%22%24500%22)https://www.jhipster.tech/bug-bounties/[area: bug üêõ](https://github.com/jhipster/generator-jhipster/issues?q=state%3Aopen%20label%3A%22area%3A%20bug%20%3Abug%3A%22)[theme: reactive ‚öõÔ∏èSpring WebFlux](https://github.com/jhipster/generator-jhipster/issues?q=state%3Aopen%20label%3A%22theme%3A%20reactive%20%E2%9A%9B%EF%B8%8F%22)Spring WebFlux[theme: security](https://github.com/jhipster/generator-jhipster/issues?q=state%3Aopen%20label%3A%22theme%3A%20security%22)Milestone[7.8.1](https://github.com/jhipster/generator-jhipster/milestone/205)![@appkr](https://avatars.githubusercontent.com/u/6471947?u=512801a77b0013e0c34738eed258f3b4a8211247&v=4&size=80)
## Description

![@appkr](https://avatars.githubusercontent.com/u/6471947?u=512801a77b0013e0c34738eed258f3b4a8211247&v=4&size=48)[appkr](https://github.com/appkr)opened [on Apr 3, 2022](https://github.com/jhipster/generator-jhipster/issues/18269#issue-1191074778)

I don't know whether this is the right place to ask this though...

In a reactive spring project with r2dbc, I found that SQL injection is actually possible. This may happen because of me, lacking knowledge on how to use r2dbc correctly. If it is case please let me know the correct usage.

#### Setup

* Jhipster 7.7.0
* reactive with Spring WebFlux? Yes
* type of database? SQL

#### JDL

```
entity Example {
	id String
  name String
}

```
#### Change I made

* Make /api/\*\* be accessible without authorization header
* Make GET /api/examples accept query parameter of `name`, and bind the parameter to the `findAllBy(Pageable pageable, Criteria criteria)` repository method
* Make a request to `GET /api/examples?name=foobar';DROP TABLE example;--`

#### Result

* The sql rendered was `SELECT e.id AS e_id, e.name AS e_name FROM example e WHERE name = 'foobar';DROP TABLE example;--'`
* That actually dropped the table

[![·Ñâ·Ö≥·Ñè·Ö≥·ÑÖ·Öµ·Ü´·Ñâ·Ö£·Ü∫ 2022-04-04 ·Ñã·Ö©·Ñå·Ö•·Ü´ 7 53 32](https://user-images.githubusercontent.com/6471947/161452719-c6ac2e4b-d5ab-4f8e-868e-2de9a710f040.png)](https://user-images.githubusercontent.com/6471947/161452719-c6ac2e4b-d5ab-4f8e-868e-2de9a710f040.png)

## Metadata

### Assignees

No one assigned

### Labels

[$$ bug-bounty $$https://www.jhipster.tech/bug-bounties/](https://github.com/jhipster/generator-jhipster/issues?q=state%3Aopen%20label%3A%22%24%24%20bug-bounty%20%24%24%22)https://www.jhipster.tech/bug-bounties/[$500https://www.jhipster.tech/bug-bounties/](https://github.com/jhipster/generator-jhipster/issues?q=state%3Aopen%20label%3A%22%24500%22)https://www.jhipster.tech/bug-bounties/[area: bug üêõ](https://github.com/jhipster/generator-jhipster/issues?q=state%3Aopen%20label%3A%22area%3A%20bug%20%3Abug%3A%22)[theme: reactive ‚öõÔ∏èSpring WebFlux](https://github.com/jhipster/generator-jhipster/issues?q=state%3Aopen%20label%3A%22theme%3A%20reactive%20%E2%9A%9B%EF%B8%8F%22)Spring WebFlux[theme: security](https://github.com/jhipster/generator-jhipster/issues?q=state%3Aopen%20label%3A%22theme%3A%20security%22)
### Type

No type
### Projects

No projects
### Milestone

* [7.8.1](https://github.com/jhipster/generator-jhipster/milestone/205)
### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_ca2f250f_20250114_202223.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjhipster%2Fgenerator-jhipster%2Fcommit%2Fc220a210fd7742c53eea72bd5fadbb96220faa98)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjhipster%2Fgenerator-jhipster%2Fcommit%2Fc220a210fd7742c53eea72bd5fadbb96220faa98)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=jhipster%2Fgenerator-jhipster)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jhipster](/jhipster)
/
**[generator-jhipster](/jhipster/generator-jhipster)**
Public

* [Notifications](/login?return_to=%2Fjhipster%2Fgenerator-jhipster) You must be signed in to change notification settings
* [Fork
  4k](/login?return_to=%2Fjhipster%2Fgenerator-jhipster)
* [Star
   21.7k](/login?return_to=%2Fjhipster%2Fgenerator-jhipster)

* [Code](/jhipster/generator-jhipster)
* [Issues
  105](/jhipster/generator-jhipster/issues)
* [Pull requests
  23](/jhipster/generator-jhipster/pulls)
* [Discussions](/jhipster/generator-jhipster/discussions)
* [Actions](/jhipster/generator-jhipster/actions)
* [Projects
  0](/jhipster/generator-jhipster/projects)
* [Security](/jhipster/generator-jhipster/security)
* [Insights](/jhipster/generator-jhipster/pulse)

Additional navigation options

* [Code](/jhipster/generator-jhipster)
* [Issues](/jhipster/generator-jhipster/issues)
* [Pull requests](/jhipster/generator-jhipster/pulls)
* [Discussions](/jhipster/generator-jhipster/discussions)
* [Actions](/jhipster/generator-jhipster/actions)
* [Projects](/jhipster/generator-jhipster/projects)
* [Security](/jhipster/generator-jhipster/security)
* [Insights](/jhipster/generator-jhipster/pulse)

## Commit

[Permalink](/jhipster/generator-jhipster/commit/c220a210fd7742c53eea72bd5fadbb96220faa98)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

use conditions instead of criteria as workaround

[Browse files](/jhipster/generator-jhipster/tree/c220a210fd7742c53eea72bd5fadbb96220faa98)
Browse the repository at this point in the history

```
closes [#18269](https://github.com/jhipster/generator-jhipster/issues/18269)
```

* Loading branch information

[![@atomfrede](https://avatars.githubusercontent.com/u/203401?s=40&v=4)](/atomfrede)

[atomfrede](/jhipster/generator-jhipster/commits?author=atomfrede "View all commits by atomfrede")
committed
Apr 5, 2022

1 parent
[eae21e4](/jhipster/generator-jhipster/commit/eae21e400e2a0daf1bde06c3bfbd4bab5de6a105)

commit c220a21

 Show file tree

 Hide file tree

Showing
**3 changed files**
with
**27 additions**
and
**35 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* generators

  + entity-server/templates/src/main/java/package/repository

    - generators/entity-server/templates/src/main/java/package/repository/EntityRepositoryInternalImpl\_reactive.java.ejs
      [EntityRepositoryInternalImpl\_reactive.java.ejs](#diff-6ccd99dc337a9e6b568fe9296ec1ebf39f633911c171a4a3a6a0730b557ab047)
    - generators/entity-server/templates/src/main/java/package/repository/EntityRepository\_reactive.java.ejs
      [EntityRepository\_reactive.java.ejs](#diff-349b6fe3741c04b965b0e33a751afb66e3cdfb5436ca52ef488ec395c640aed3)
  + server/templates/src/main/java/package/repository

    - generators/server/templates/src/main/java/package/repository/EntityManager.java.ejs
      [EntityManager.java.ejs](#diff-09488f8bea85823e74c44ef2f4d38d8e70b7cddf94da4e8bc9c0d91cabf79147)

## There are no files selected for viewing

21 changes: 10 additions & 11 deletions

21
[...templates/src/main/java/package/repository/EntityRepositoryInternalImpl\_reactive.java.ejs](#diff-6ccd99dc337a9e6b568fe9296ec1ebf39f633911c171a4a3a6a0730b557ab047 "generators/entity-server/templates/src/main/java/package/repository/EntityRepositoryInternalImpl_reactive.java.ejs")

Show comments

[View file](/jhipster/generator-jhipster/blob/c220a210fd7742c53eea72bd5fadbb96220faa98/generators/entity-server/templates/src/main/java/package/repository/EntityRepositoryInternalImpl_reactive.java.ejs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -50,6 +50,9 @@ import org.springframework.data.r2dbc.core.R2dbcEntityTemplate; |
|  |  | import org.springframework.data.r2dbc.repository.support.SimpleR2dbcRepository; |
|  |  | import org.springframework.data.relational.core.query.Criteria; |
|  |  | import org.springframework.data.relational.core.sql.Column; |
|  |  | import org.springframework.data.relational.core.sql.Comparison; |
|  |  | import org.springframework.data.relational.core.sql.Condition; |
|  |  | import org.springframework.data.relational.core.sql.Conditions; |
|  |  | import org.springframework.data.relational.core.sql.Expression; |
|  |  | import org.springframework.data.relational.core.sql.Select; |
|  |  | import org.springframework.data.relational.core.sql.SelectBuilder.SelectFromAndJoin<% if (reactiveEagerRelations.length > 0) { %>Condition<% } %>; |
| Expand Down  Expand Up | | @@ -121,15 +124,10 @@ \_%> |
|  |  |  |
|  |  | @Override |
|  |  | public Flux<<%= persistClass %>> findAllBy(Pageable pageable) { |
|  |  | return findAllBy(pageable, null); |
|  |  | return createQuery(pageable, null).all(); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public Flux<<%= persistClass %>> findAllBy(Pageable pageable, Criteria criteria) { |
|  |  | return createQuery(pageable, criteria).all(); |
|  |  | } |
|  |  |  |
|  |  | RowsFetchSpec<<%= persistClass %>> createQuery(Pageable pageable, Criteria criteria) { |
|  |  | RowsFetchSpec<<%= persistClass %>> createQuery(Pageable pageable, Condition whereClause) { |
|  |  | List<Expression> columns = <%= entityClass %>SqlHelper.getColumns(entityTable, EntityManager.ENTITY\_ALIAS); |
|  |  | <%\_ reactiveEagerRelations.forEach(function(rel) { \_%> |
|  |  | columns.addAll(<%= rel.otherEntityNameCapitalized %>SqlHelper.getColumns(<%= rel.relationshipName %>Table, "<%= rel.relationshipName %>")); |
| Expand All | | @@ -138,19 +136,20 @@ \_%> |
|  |  | <%\_ reactiveEagerRelations.forEach(function(rel) { \_%> |
|  |  | .leftOuterJoin(<%= rel.relationshipName %>Table).on(Column.create("<%= rel.joinColumnNames[0] %>", entityTable)).equals(Column.create("<%= rel.otherEntity.primaryKey.fields[0].columnName %>", <%= rel.relationshipName %>Table )) |
|  |  | <%\_ }); \_%>; |
|  |  |  |
|  |  | String select = entityManager.createSelect(selectFrom, <%= persistClass %>.class, pageable, criteria); |
|  |  | // we do not support Criteria here for now as of https://github.com/jhipster/generator-jhipster/issues/18269 |
|  |  | String select = entityManager.createSelect(selectFrom, <%= persistClass %>.class, pageable, whereClause); |
|  |  | return db.sql(select).map(this::process); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public Flux<<%= persistClass %>> findAll() { |
|  |  | return findAllBy(null, null); |
|  |  | return findAllBy(null); |
|  |  | } |
|  |  |  |
|  |  | @Override |
|  |  | public Mono<<%= persistClass %>> findById(<%= primaryKey.type %> id) { |
|  |  | return createQuery(null, where(EntityManager.ENTITY\_ALIAS + ".<%= primaryKey.fields[0].columnName %>").is(id)).one(); |
|  |  | Comparison whereClause = Conditions.isEqual(entityTable.column("<%= primaryKey.fields[0].columnName %>"), Conditions.just(id.toString())); |
|  |  | return createQuery(null, whereClause).one(); |
|  |  | } |
|  |  |  |
|  |  | <%\_ if (implementsEagerLoadApis) { \_%> |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[...tity-server/templates/src/main/java/package/repository/EntityRepository\_reactive.java.ejs](#diff-349b6fe3741c04b965b0e33a751afb66e3cdfb5436ca52ef488ec395c640aed3 "generators/entity-server/templates/src/main/java/package/repository/EntityRepository_reactive.java.ejs")

Show comments

[View file](/jhipster/generator-jhipster/blob/c220a210fd7742c53eea72bd5fadbb96220faa98/generators/entity-server/templates/src/main/java/package/repository/EntityRepository_reactive.java.ejs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -144,8 +144,8 @@ interface <%= entityClass %>RepositoryInternal { |
|  |  | Flux<<%= persistClass %>> findAll(); |
|  |  |  |
|  |  | Mono<<%= persistClass %>> findById(<%= primaryKey.type %> id); |
|  |  |  |
|  |  | Flux<<%= persistClass %>> findAllBy(Pageable pageable, Criteria criteria); |
|  |  | // this is not supported at the moment because of https://github.com/jhipster/generator-jhipster/issues/18269 |
|  |  | // Flux<<%= persistClass %>> findAllBy(Pageable pageable, Criteria criteria); |
|  |  |  |
|  |  | <%\_ if (implementsEagerLoadApis) { \_%> |
|  |  |  |
| Expand Down | |  |

37 changes: 15 additions & 22 deletions

37
[generators/server/templates/src/main/java/package/repository/EntityManager.java.ejs](#diff-09488f8bea85823e74c44ef2f4d38d8e70b7cddf94da4e8bc9c0d91cabf79147 "generators/server/templates/src/main/java/package/repository/EntityManager.java.ejs")

Show comments

[View file](/jhipster/generator-jhipster/blob/c220a210fd7742c53eea72bd5fadbb96220faa98/generators/server/templates/src/main/java/package/repository/EntityManager.java.ejs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -33,6 +33,7 @@ import org.springframework.data.r2dbc.core.StatementMapper; |
|  |  | import org.springframework.data.r2dbc.mapping.OutboundRow; |
|  |  | import org.springframework.data.r2dbc.query.UpdateMapper; |
|  |  | import org.springframework.data.relational.core.query.Criteria; |
|  |  | import org.springframework.data.relational.core.sql.Condition; |
|  |  | import org.springframework.data.relational.core.mapping.RelationalPersistentEntity; |
|  |  | import org.springframework.data.relational.core.sql.Conditions; |
|  |  | import org.springframework.data.relational.core.sql.OrderByField; |
| Expand Down  Expand Up | | @@ -93,19 +94,11 @@ public class EntityManager { |
|  |  | \* @param pageable page parameter, or null, if everything needs to be returned |
|  |  | \* @return sql select statement |
|  |  | \*/ |
|  |  | public String createSelect(SelectFromAndJoin selectFrom, Class<?> entityType, Pageable pageable, Criteria criteria) { |
|  |  | public String createSelect(SelectFromAndJoin selectFrom, Class<?> entityType, Pageable pageable) { |
|  |  | if (pageable != null) { |
|  |  | if (criteria != null) { |
|  |  | return createSelectImpl(selectFrom.limitOffset(pageable.getPageSize(), pageable.getOffset()).where(Conditions.just(criteria.toString())), entityType, pageable.getSort()); |
|  |  | } else { |
|  |  | return createSelectImpl(selectFrom.limitOffset(pageable.getPageSize(), pageable.getOffset()), entityType, pageable.getSort()); |
|  |  | } |
|  |  | return createSelectImpl(selectFrom.limitOffset(pageable.getPageSize(), pageable.getOffset()), entityType, pageable.getSort()); |
|  |  | } else { |
|  |  | if (criteria != null) { |
|  |  | return createSelectImpl(selectFrom.where(Conditions.just(criteria.toString())), entityType, null); |
|  |  | } else { |
|  |  | return createSelectImpl(selectFrom, entityType, null); |
|  |  | } |
|  |  | return createSelectImpl(selectFrom, entityType, null); |
|  |  | } |
|  |  | } |
|  |  |  |
| Expand All | | @@ -116,19 +109,19 @@ public class EntityManager { |
|  |  | \* @param pageable page parameter, or null, if everything needs to be returned |
|  |  | \* @return sql select statement |
|  |  | \*/ |
|  |  | public String createSelect(SelectFromAndJoinCondition selectFrom, Class<?> entityType, Pageable pageable, Criteria criteria) { |
|  |  | public String createSelect(SelectFromAndJoinCondition selectFrom, Class<?> entityType, Pageable pageable, Condition where) { |
|  |  | if (pageable != null) { |
|  |  | if (criteria != null) { |
|  |  | return createSelectImpl(selectFrom.limitOffset(pageable.getPageSize(), pageable.getOffset()).where(Conditions.just(criteria.toString())), entityType, pageable.getSort()); |
|  |  | } else { |
|  |  | return createSelectImpl(selectFrom.limitOffset(pageable.getPageSize(), pageable.getOffset()), entityType, pageable.getSort()); |
|  |  | } |
|  |  | return createSelectImpl(selectFrom.limitOffset(pageable.getPageSize(), pageable.getOffset()), entityType, pageable.getSort()); |
|  |  | } else { |
|  |  | if (criteria != null) { |
|  |  | return createSelectImpl(selectFrom.where(Conditions.just(criteria.toString())), entityType, null); |
|  |  | } else { |
|  |  | return createSelectImpl(selectFrom, entityType, null); |
|  |  | } |
|  |  | return createSelectImpl(selectFrom.where(where), entityType, null); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | public String createSelect(SelectFromAndJoin selectFrom, Class<?> entityType, Pageable pageable, Condition where) { |
|  |  | if (pageable != null) { |
|  |  | return createSelectImpl(selectFrom.limitOffset(pageable.getPageSize(), pageable.getOffset()).where(where), entityType, pageable.getSort()); |
|  |  | } else { |
|  |  | return createSelectImpl(selectFrom.where(where), entityType, null); |
|  |  | } |
|  |  | } |
|  |  |  |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `c220a21`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjhipster%2Fgenerator-jhipster%2Fcommit%2Fc220a210fd7742c53eea72bd5fadbb96220faa98) to comment.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


