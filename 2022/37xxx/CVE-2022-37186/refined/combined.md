=== Content from lists.debian.org_51fb927c_20250115_090511.html ===


---

[[Date Prev](msg00026.html)][[Date Next](msg00028.html)]
[[Thread Prev](msg00026.html)][[Thread Next](msg00028.html)]
[[Date Index](maillist.html#00027)]
[[Thread Index](threads.html#00027)]

# [SECURITY] [DLA 3287-1] lemonldap-ng security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 3287-1] lemonldap-ng security update
* *From*: Guilhem Moulin <guilhem@debian.org>
* *Date*: Sat, 28 Jan 2023 16:38:58 +0100
* *Message-id*: <[[ðŸ”Ž]](/msgid-search/Y9VBknECLVeWFl3E%40debian.org)Â [Y9VBknECLVeWFl3E@debian.org](msg00027.html)>
* *Mail-followup-to*: Guilhem Moulin <guilhem@debian.org>, debian-lts-announce@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-------------------------------------------------------------------------
Debian LTS Advisory DLA-3287-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                       Guilhem Moulin
January 28, 2023                              <https://wiki.debian.org/LTS>
-------------------------------------------------------------------------

Package        : lemonldap-ng
Version        : 2.0.2+ds-7+deb10u8
CVE ID         : CVE-2020-16093 CVE-2022-37186

Two vulnerabilities were found in lemonldap-ng, an OpenID-Connect, CAS
and SAML compatible Web-SSO system, that could result in information
disclosure or impersonation.

CVE-2020-16093

    Maxime Besson discovered that LemonLDAP::NG before 2.0.9 did not
    check validity of the X.509 certificate by default when connecting
    to remote LDAP backends, because the default configuration of the
    Net::LDAPS module for Perl is used.

    This update changes the default behavior to require X.509 validation
    against the distribution bundle /etc/ssl/certs/ca-certificates.crt.
    Previous behavior can reverted by running
    `/usr/share/lemonldap-ng/bin/lemonldap-ng-cli set ldapVerify none`.

    If a session backend is set to Apache::Session::LDAP or
    Apache::Session::Browseable::LDAP, then the complete fix involves
    upgrading the corresponding Apache::Session module
    (libapache-session-ldap-perl resp. libapache-session-browseable-perl)
    to 0.4-1+deb10u1 (or â‰¥0.5) resp. 1.3.0-1+deb10u1 (or â‰¥1.3.8).  See
    related advisories DLA-3284-1 and DLA-3285-1 for details.

CVE-2022-37186

    Mickael Bride discovered that under certain conditions the session
    remained valid on handlers after being destroyed on portal.

For Debian 10 buster, these problems have been fixed in version
2.0.2+ds-7+deb10u8.

We recommend that you upgrade your lemonldap-ng packages.

For the detailed security status of lemonldap-ng please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/lemonldap-ng>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

```

**Attachment:
[signature.asc](pgpi3tFf1vXqh.pgp)**

*Description:* PGP signature

---



=== Content from gitlab.ow2.org_8f191899_20250115_090510.html ===


[Skip to content](#content-body)
GitLab
[![](data:image/gif;base64...)](/ "Homepage")

* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)

# [CVE-2022-37186] Session destroyed on portal but still valid on handlers while there is activity

### Concerned version

Version: [%2.0.13](/lemonldap-ng/lemonldap-ng/-/milestones/77)

Platform: Apache

### Summary

I have activated "One session per user" option.
If I log in a second time with the same account, the 1st session is well destroyed on portal, but on handler, the session is still valid even after the cache expiration (600s). Session expires on handler only after 600s of inactivity (no request), while it should expire after 600s (with or without activity)

### Logs

When query is accepted by handler (just after the session was destroyed on session backend):

```
[Fri May 13 13:49:22.382959 2022] [perl:debug] [pid 21187] Apache2.pm(14): Get session 6e29421e589869bc4124bc05aa62bdb20da615f2be290a6e48 from Handler::Main::Run
[Fri May 13 13:49:22.383085 2022] [perl:debug] [pid 21187] Apache2.pm(14): Check session validity from Handler
[Fri May 13 13:49:22.383184 2022] [perl:debug] [pid 21187] Apache2.pm(14): Session timeout -> 72000
[Fri May 13 13:49:22.383288 2022] [perl:debug] [pid 21187] Apache2.pm(14): Session timeoutActivity -> 900s
[Fri May 13 13:49:22.383380 2022] [perl:debug] [pid 21187] Apache2.pm(14): Session _utime -> 1652449119
[Fri May 13 13:49:22.383465 2022] [perl:debug] [pid 21187] Apache2.pm(14): now -> 1652449762
[Fri May 13 13:49:22.383551 2022] [perl:debug] [pid 21187] Apache2.pm(14): _lastSeen -> 1652449119
[Fri May 13 13:49:22.383638 2022] [perl:debug] [pid 21187] Apache2.pm(14): now - _lastSeen = 643
[Fri May 13 13:49:22.383732 2022] [perl:debug] [pid 21187] Apache2.pm(14): Session timeoutActivityInterval -> 250
[Fri May 13 13:49:22.383822 2022] [perl:debug] [pid 21187] Apache2.pm(14): Session TTL = 71357
[Fri May 13 13:49:22.407127 2022] [perl:debug] [pid 21187] Apache2.pm(14): Update _lastSeen with 1652449762
[Fri May 13 13:49:22.407431 2022] [perl:debug] [pid 21187] Apache2.pm(14): No URL authentication level found...
[Fri May 13 13:49:22.407566 2022] [perl:debug] [pid 21187] Apache2.pm(14): api-mediation.dev.flexiblecontactcenter.orange-business.com: Apply default rule
```

After 600 seconds of inactivity:

```
[Fri May 13 14:16:08.247736 2022] [perl:info] [pid 21397] Session 6e29421e589869bc4124bc05aa62bdb20da615f2be290a6e48 can't be retrieved
[Fri May 13 14:16:08.247859 2022] [perl:info] [pid 21397] Session cannot be tied: Object does not exist in the data store at /usr/share/perl5/vendor_perl/Apache/Session/Store/DBI.pm line 93.\n
```

### Backends used

I have the following settings:

* Session timeout: 72000
* Sessions activity timeout: 900
* Sessions update interval: 250
* Sessions Storage / cache module options / default\_expires\_in: 600

### Possible fixes

Edited Aug 30, 2022 by [Maxime Besson](/maxbes)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.



=== Content from gitlab.ow2.org_772541b4_20250115_090511.html ===


[Skip to content](#content-body)
GitLab
[![](data:image/gif;base64...)](/ "Homepage")

* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)



=== Content from gitlab.ow2.org_2ee9e22c_20250115_090508.html ===


[Skip to content](#content-body)
GitLab
[![](data:image/gif;base64...)](/ "Homepage")

* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)

**Commit
59c781b3**

authored
Jul 28, 2022
by
**[![Yadd's avatar](/uploads/-/system/user/avatar/418/avatar.png?width=48 "Yadd")](/guimard)
[Yadd](/guimard)**

[Browse files](/lemonldap-ng/lemonldap-ng/-/tree/59c781b393947663ad3bf26bad0581413dd6fae4)

### Improve session destroy propagation (#2758)

parent
[61a913b8](/lemonldap-ng/lemonldap-ng/-/commit/61a913b8c0450de12043f04f593719adf57b296a)

Loading

Loading

Loading

Loading

* [Changes
  2](/lemonldap-ng/lemonldap-ng/-/commit/59c781b393947663ad3bf26bad0581413dd6fae4)
* [Pipelines
  1](/lemonldap-ng/lemonldap-ng/-/commit/59c781b393947663ad3bf26bad0581413dd6fae4/pipelines)

[Hide whitespace changes](/lemonldap-ng/lemonldap-ng/-/commit/59c781b393947663ad3bf26bad0581413dd6fae4?action=show&controller=projects%2Fcommit&id=59c781b393947663ad3bf26bad0581413dd6fae4&namespace_id=lemonldap-ng&project_id=lemonldap-ng&w=1)
[Inline](/lemonldap-ng/lemonldap-ng/-/commit/59c781b393947663ad3bf26bad0581413dd6fae4?view=inline)
[Side-by-side](/lemonldap-ng/lemonldap-ng/-/commit/59c781b393947663ad3bf26bad0581413dd6fae4?view=parallel)

Loading

Preview

0%
Loading

Try again

or
attach a new file

.

Cancel

You are about to add
**0
people**
to the discussion. Proceed with caution.

Finish editing this message first!

Save comment

Cancel

Please [register](/users/sign_up?redirect_to_referer=yes) or [sign in](/users/sign_in?redirect_to_referer=yes) to comment


