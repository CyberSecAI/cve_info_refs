=== Content from lists.fedoraproject.org_ce538783_20250115_095849.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/FXSREJKTT6RNE3GXQENQ4R4HS37UNSPX/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/FXSREJKTT6RNE3GXQENQ4R4HS37UNSPX/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/FXSREJKTT6RNE3GXQENQ4R4HS37UNSPX/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/FXSREJKTT6RNE3GXQENQ4R4HS37UNSPX/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-FXSREJKTT6RNE3GXQENQ4R4HS37UNSPX.mbox.gz?message=FXSREJKTT6RNE3GXQENQ4R4HS37UNSPX "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/FXSREJKTT6RNE3GXQENQ4R4HS37UNSPX/#FXSREJKTT6RNE3GXQENQ4R4HS37UNSPX)

# [SECURITY] Fedora 36 Update: pdns-recursor-4.6.3-1.fc36

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

1 Sep
2022

1 Sep
'22

11:41 a.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2022-d1dcd9b046
2022-09-01 09:39:28.776586
--------------------------------------------------------------------------------

Name : pdns-recursor
Product : Fedora 36
Version : 4.6.3
Release : 1.fc36
URL : <https://powerdns.com>
Summary : Modern, advanced and high performance recursing/non authoritative name server
Description :
PowerDNS Recursor is a non authoritative/recursing DNS server. Use this
package if you need a dns cache for your network.

--------------------------------------------------------------------------------
Update Information:

Security fix for CVE-2022-37428
--------------------------------------------------------------------------------
ChangeLog:

\* Wed Aug 24 2022 Sander Hoentjen sander@hoentjen.eu - 4.6.3-1
- Update to 4.6.3
- Fixes #2120864,#2120866
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #2120864 - CVE-2022-37428 pdns-recursor: DoS when protobuf logging is enabled
<https://bugzilla.redhat.com/show_bug.cgi?id=2120864>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2022-d1dcd9b046' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/FXSREJKTT6RNE3GXQENQ4R4HS37UNSPX/#FXSREJKTT6RNE3GXQENQ4R4HS37UNSPX)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from docs.powerdns.com_5aef2579_20250115_095848.html ===

### Navigation

* [index](../genindex.html "General Index")
* [routing table](../http-routingtable.html "HTTP Routing Table") |
* [next](rpz.html "Response Policy Zones (RPZ)") |
* [previous](dnssec.html "Managing DNSSEC Trust Anchors in the Lua Configuration") |
* [PowerDNS Recursor documentation](../indexTOC.html) »
* [Advanced Configuration Using Lua](index.html) »

[PowerDNS Recursor](../indexTOC.html)

#### Previous topic

[Managing DNSSEC Trust Anchors in the Lua Configuration](dnssec.html "previous chapter")

#### Next topic

[Response Policy Zones (RPZ)](rpz.html "next chapter")

## Contents

* [Introduction](../index.html)
* [Getting Started](../getting-started.html)
* [Operating PowerDNS Recursor](../running.html)
* [DNSSEC in the PowerDNS Recursor](../dnssec.html)
* [PowerDNS Recursor Settings](../settings.html)
* [PowerDNS Recursor New Style (YAML) Settings](../yamlsettings.html)
* [Advanced Configuration Using Lua](index.html)
  + [Managing DNSSEC Trust Anchors in the Lua Configuration](dnssec.html)
  + Logging DNS messages with Protocol Buffers
    - [Configuring Protocol Buffer logs](#configuring-protocol-buffer-logs)
    - [Logging outgoing queries and responses](#logging-outgoing-queries-and-responses)
    - [Protocol Buffers Definition](#protocol-buffers-definition)
    - [Logging in `dnstap` format using framestreams](#logging-in-dnstap-format-using-framestreams)
  + [Response Policy Zones (RPZ)](rpz.html)
  + [Evaluation order](rpz.html#evaluation-order)
  + [Configuring RPZ](rpz.html#configuring-rpz)
  + [RPZ Configuration Functions](rpz.html#rpz-configuration-functions)
  + [RPZ settings](rpz.html#rpz-settings)
  + [Extra settings for rpzPrimary](rpz.html#extra-settings-for-rpzprimary)
  + [Policy Actions](rpz.html#policy-actions)
  + [Using Sortlist](sortlist.html)
  + [Zone to Cache](ztc.html)
  + [Adding Additional Records to Results](additionals.html)
  + [Table Based Proxy Mapping](proxymapping.html)
* [Scripting PowerDNS Recursor](../lua-scripting/index.html)
* [DNS64 support](../dns64.html)
* [Metrics and Statistics](../metrics.html)
* [Performance Guide](../performance.html)
* [Manual Pages](../manpages/index.html)
* [Built-in Webserver and HTTP API](../http-api/index.html)
* [Security of the PowerDNS Recursor](../security.html)
* [Security Advisories](../security-advisories/index.html)
* [Upgrade Guide](../upgrade.html)
* [Changelogs](../changelog/index.html)
* [Newly Observed Domain Tracking](../nod_udr.html)
* [Unique Domain Response](../nod_udr.html#unique-domain-response)
* [End of life statements](../appendices/EOL.html)
* [Frequently Asked Questions](../appendices/FAQ.html)
* [Compiling **PowerDNS Recursor**](../appendices/compiling.html)
* [Cryptographic software and export control](../appendices/crypto-export.html)
* [Internals of the PowerDNS Recursor](../appendices/internals.html)
* [Structured Logging Dictionary](../appendices/structuredlogging.html)
* [Conversion of old-style settings to YAML format](../appendices/yamlconversion.html)
* [PowerDNS/dnsdist license](../common/license.html)

### This Page

* [Show Source](../_sources/lua-config/protobuf.rst.txt)

1. [Docs](../indexTOC.html)
2. [Advanced Configuration Using Lua](index.html)
3. Logging DNS messages with Protocol Buffers

# Logging DNS messages with Protocol Buffers[Â¶](#logging-dns-messages-with-protocol-buffers "Permalink to this headline")

The PowerDNS Recursor has the ability to emit a stream of protocol buffers messages over TCP, containing information about queries, answers and policy decisions.

Messages contain the IP address of the client initiating the query, the one on which the message was received, whether it was received over UDP or TCP, a timestamp and the qname, qtype and qclass of the question.
In addition, messages related to responses contain the name, type, class and rdata of A, AAAA and CNAME records present in the response, as well as the response code.

Finally, if a RPZ or custom Lua policy has been applied, response messages also contain the applied policy name and some tags.
This is particularly useful to detect and act on infected hosts.

## Configuring Protocol Buffer logs[Â¶](#configuring-protocol-buffer-logs "Permalink to this headline")

Protobuf export to a server is enabled using the `protobufServer()` directive:

`protobufServer`(*servers [, options])*)[Â¶](#protobufServer "Permalink to this definition")

New in version 4.2.0.

New in version 5.1.0: Alternative equivalent YAML setting: [logging.protobuf\_servers](../yamlsettings.html#setting-yaml-logging-protobuf-servers).

Send protocol buffer messages to one or more servers for incoming queries and/or outgoing responses. The client address may be masked using [`setProtobufMasks()`](#setProtobufMasks "setProtobufMasks"), for anonymization purposes.

| Parameters: | * **servers** (*string or list of strings*) â The IP and port to connect to, or a list of those. If more than one server is configured, all messages are sent to every server. * **options** (*table*) â A table with `key=value` pairs with options. |
| --- | --- |

Options:

* `timeout=2`: int - Time in seconds to wait when sending a message
* `maxQueuedEntries=100`: int - How many entries will be kept in memory if the server becomes unreachable
* `reconnectWaitTime=1`: int - How long to wait, in seconds, between two reconnection attempts
* `taggedOnly=false`: bool - Only entries with a policy or a policy tag set will be sent
* `asyncConnect`: bool - When set to false (default) the first connection to the server during startup will block up to `timeout` seconds, otherwise the connection is done in a separate thread, after the first message has been queued
* `logQueries=true`: bool - Whether to export queries
* `logResponses=true`: bool - Whether to export responses
* `exportTypes={'A', 'AAAA', 'CNAME'}`: list of strings - The list of record types found in the answer section to export. Record types A, AAAA, CNAME, MX, NS, PTR, SPF, SRV and TXT are supported.

Changed in version 4.7.0.

The values in `exportTypes` can be numeric as well as strings. Symbolic names from `pdns` can be used, e.g. `exportTypes = { pdns.A, pdns.AAAA, pdns.CNAME }`

New in version 4.7.0.

* `logMappedFrom=false`: bool - whether to log the remote address before substitution by [Table Based Proxy Mapping](proxymapping.html#proxymapping) (the default) or after

Changed in version 5.1.0: Added support for the HTTPS, SVCB and NAPTR record types.

`protobufServer`(*server*[[[[[[[, *timeout=2*], *maxQueuedEntries=100*], *reconnectWaitTime=1*], *maskV4=32*], *maskV6=128*], *asyncConnect=false*], *taggedOnly=false*])

Deprecated since version 4.2.0.

| Parameters: | * **server** (*string*) â The IP and port to connect to * **timeout** (*int*) â Time in seconds to wait when sending a message * **maxQueuedEntries** (*int*) â How many entries will be kept in memory if the server becomes unreachable * **reconnectWaitTime** (*int*) â How long to wait, in seconds, between two reconnection attempts * **maskV4** (*int*) â network mask to apply to the client IPv4 addresses, for anonymization purposes. The default of 32 means no anonymization. * **maskV6** (*int*) â Same as maskV4, but for IPv6. Defaults to 128. * **taggedOnly** (*bool*) â Only entries with a policy or a policy tag set will be sent. * **asyncConnect** (*bool*) â When set to false (default) the first connection to the server during startup will block up to `timeout` seconds, otherwise the connection is done in a separate thread, after the first message has been queued.. |
| --- | --- |

`setProtobufMasks`(*maskv4*, *maskV6*)[Â¶](#setProtobufMasks "Permalink to this definition")

New in version 4.2.0.

New in version 5.1.0: Alternative equivalent YAML setting: [logging.protobuf\_mask\_v4](../yamlsettings.html#setting-yaml-logging-protobuf-mask-v4) and [logging.protobuf\_mask\_v6](../yamlsettings.html#setting-yaml-logging-protobuf-mask-v6).

| Parameters: | * **maskV4** (*int*) â network mask to apply to the client IPv4 addresses, for anonymization purposes. The default of 32 means no anonymization. * **maskV6** (*int*) â Same as maskV4, but for IPv6. Defaults to 128. |
| --- | --- |

## Logging outgoing queries and responses[Â¶](#logging-outgoing-queries-and-responses "Permalink to this headline")

While [`protobufServer()`](#protobufServer "protobufServer") only exports the queries sent to the recursor from clients, with the corresponding responses, `outgoingProtobufServer()` can be used to export outgoing queries sent by the recursor to authoritative servers, along with the corresponding responses.

`outgoingProtobufServer`(*servers*[, *options*])[Â¶](#outgoingProtobufServer "Permalink to this definition")

New in version 4.2.0.

New in version 5.1.0: Alternative equivalent YAML setting: [logging.outgoing\_protobuf\_servers](../yamlsettings.html#setting-yaml-logging-outgoing-protobuf-servers).

Send protocol buffer messages to one or more servers for outgoing queries and/or incoming responses.

| Parameters: | * **servers** (*string or list of strings*) â The IP and port to connect to, or a list of those. If more than one server is configured, all messages are sent to every server. * **options** (*table*) â A table with `key=value` pairs with options. |
| --- | --- |

Options:

* `timeout=2`: int - Time in seconds to wait when sending a message
* `maxQueuedEntries=100`: int - How many entries will be kept in memory if the server becomes unreachable
* `reconnectWaitTime=1`: int - How long to wait, in seconds, between two reconnection attempts
* `asyncConnect`: bool - When set to false (default) the first connection to the server during startup will block up to `timeout` seconds, otherwise the connection is done in a separate thread, after the first message has been queued
* `logQueries=true`: bool - Whether to export queries
* `logResponses=true`: bool - Whether to export responses
* `exportTypes={'A', 'AAAA', 'CNAME'}`: list of strings or qtypes - The list of record types found in the answer section to export. Record types A, AAAA, CNAME, MX, NS, PTR, SPF, SRV and TXT are supported

Changed in version 4.7.0.

The values in `exportTypes` can be numeric as well as strings. Symbolic names from `pdns` can be used, e.g. `exportTypes = { pdns.A, pdns.AAAA, pdns.CNAME }`

Changed in version 5.1.0: Added support for the HTTPS, SVCB and NAPTR records types.

`outgoingProtobufServer`(*server*[[[[, *timeout=2*], *maxQueuedEntries=100*], *reconnectWaitTime=1*], *asyncConnect=false*])

Deprecated since version 4.2.0.

| Parameters: | * **server** (*string*) â The IP and port to connect to * **timeout** (*int*) â Time in seconds to wait when sending a message * **maxQueuedEntries** (*int*) â How many entries will be kept in memory if the server becomes unreachable * **reconnectWaitTime** (*int*) â How long to wait, in seconds, between two reconnection attempts * **asyncConnect** (*bool*) â When set to false (default) the first connection to the server during startup will block up to `timeout` seconds, otherwise the connection is done in a separate thread, after the first message has been queued.. |
| --- | --- |

## Protocol Buffers Definition[Â¶](#protocol-buffers-definition "Permalink to this headline")

The protocol buffers message types can be found in the [dnsmessage.proto](https://github.com/PowerDNS/pdns/blob/master/pdns/dnsmessage.proto) file and is included here:

```
/*
 * This file describes the message format used by the protobuf logging feature in PowerDNS and dnsdist.
 *
 * MIT License
 *
 * Copyright (c) 2016-now PowerDNS.COM B.V. and its contributors.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
syntax = "proto2";

message PBDNSMessage {
  enum Type {
    DNSQueryType = 1;                           // Query received by the service
    DNSResponseType = 2;                        // Response returned by the service
    DNSOutgoingQueryType = 3;                   // Query sent out by the service to a remote server
    DNSIncomingResponseType = 4;                // Response returned by the remote server
  }
  enum SocketFamily {
    INET = 1;                                   // IPv4 (RFC 791)
    INET6 = 2;                                  // IPv6 (RFC 2460)
  }
  enum SocketProtocol {
    UDP = 1;                                    // User Datagram Protocol (RFC 768)
    TCP = 2;                                    // Transmission Control Protocol (RFC 793)
    DOT = 3;                                    // DNS over TLS (RFC 7858)
    DOH = 4;                                    // DNS over HTTPS (RFC 8484)
    DNSCryptUDP = 5;                            // DNSCrypt over UDP (https://dnscrypt.info/protocol)
    DNSCryptTCP = 6;                            // DNSCrypt over TCP (https://dnscrypt.info/protocol)
    DOQ = 7;                                    // DNS over QUIC (RFC 9250)
  }
  enum HTTPVersion {
    HTTP1 = 1;                                  // HTTP/1.1
    HTTP2 = 2;                                  // HTTP/2
    HTTP3 = 3;                                  // HTTP/3
  }
  enum PolicyType {
    UNKNOWN = 1;                                // No RPZ policy applied, or unknown type
    QNAME = 2;                                  // Policy matched on the QName
    CLIENTIP = 3;                               // Policy matched on the client IP
    RESPONSEIP = 4;                             // Policy matched on one of the IPs contained in the answer
    NSDNAME = 5;                                // Policy matched on the name of one nameserver involved
    NSIP = 6;                                   // Policy matched on the IP of one nameserver involved
  }
  enum PolicyKind {
    NoAction = 1;                               // No action taken
    Drop = 2;                                   // https://tools.ietf.org/html/draft-vixie-dns-rpz-04 3.4
    NXDOMAIN = 3;                               // https://tools.ietf.org/html/draft-vixie-dns-rpz-04 3.1
    NODATA = 4;                                 // https://tools.ietf.org/html/draft-vixie-dns-rpz-04 3.2
    Truncate= 5;                                // https://tools.ietf.org/html/draft-vixie-dns-rpz-04 3.5
    Custom = 6;                                 // https://tools.ietf.org/html/draft-vixie-dns-rpz-04 3.6
  }
  enum VState {
    Indeterminate = 1;
    Insecure = 2;
    Secure = 3;
    BogusNoValidDNSKEY = 4;
    BogusInvalidDenial = 5;
    BogusUnableToGetDSs = 6;
    BogusUnableToGetDNSKEYs = 7;
    BogusSelfSignedDS = 8;
    BogusNoRRSIG = 9;
    BogusNoValidRRSIG = 10;
    BogusMissingNegativeIndication = 11;
    BogusSignatureNotYetValid = 12;
    BogusSignatureExpired = 13;
    BogusUnsupportedDNSKEYAlgo = 14;
    BogusUnsupportedDSDigestType = 15;
    BogusNoZoneKeyBitSet = 16;
    BogusRevokedDNSKEY = 17;
    BogusInvalidDNSKEYProtocol = 18;
  }
  required Type type = 1;                       // Type of event
  optional bytes messageId = 2;                 // UUID, shared by the query and the response
  optional bytes serverIdentity = 3;            // ID of the server emitting the protobuf message
  optional SocketFamily socketFamily = 4;
  optional SocketProtocol socketProtocol = 5;
  optional bytes from = 6;                      // DNS requestor (client) as 4 (IPv4) or 16 (IPv6) raw bytes in network byte order
  optional bytes to = 7;                        // DNS responder (server) as 4 (IPv4) or 16 (IPv6) raw bytes in network byte order
  optional uint64 inBytes = 8;                  // Size of the query or response on the wire
  optional uint32 timeSec = 9;                  // Time of message reception (seconds since epoch)
  optional uint32 timeUsec = 10;                // Time of message reception (additional micro-seconds)
  optional uint32 id = 11;                      // ID of the query/response as found in the DNS header

  message DNSQuestion {
    optional string qName = 1;                  // Fully qualified DNS name (with trailing dot)
    optional uint32 qType = 2;                  // https://www.iana.org/assignments/dns-parameters/dns-parameters.xhtml#dns-parameters-4
    optional uint32 qClass = 3;                 // Typically 1 (IN), see https://www.iana.org/assignments/dns-parameters/dns-parameters.xhtml#dns-parameters-2
  }
  optional DNSQuestion question = 12;           // DNS query received from client

  message DNSResponse {
    // See exportTypes in https://docs.powerdns.com/recursor/lua-config/protobuf.html#protobufServer
    // for the list of supported resource record types.
    message DNSRR {
      optional string name = 1;                 // Fully qualified DNS name (with trailing dot)
      optional uint32 type = 2;                 // https://www.iana.org/assignments/dns-parameters/dns-parameters.xhtml#dns-parameters-4
      optional uint32 class = 3;                // Typically 1 (IN), see https://www.iana.org/assignments/dns-parameters/dns-parameters.xhtml#dns-parameters-2
      optional uint32 ttl = 4;                  // TTL in seconds
      optional bytes rdata = 5;                 // raw address bytes in network byte order for A & AAAA; text representation for others, with fully qualified (trailing dot) domain names
      optional bool  udr = 6;                   // True if this is the first time this RR has been seen for this question
    }
    optional uint32 rcode = 1;                  // DNS Response code, or 65536 for a network error including a timeout
    repeated DNSRR rrs = 2;                     // DNS resource records in response
    optional string appliedPolicy = 3;          // Filtering policy (RPZ or Lua) applied
    repeated string tags = 4;                   // Additional tags applied
    optional uint32 queryTimeSec = 5;           // Time of the corresponding query reception (seconds since epoch)
    optional uint32 queryTimeUsec = 6;          // Time of the corresponding query reception (additional micro-seconds)
    optional PolicyType appliedPolicyType = 7;  // Type of the filtering policy (RPZ or Lua) applied
    optional string appliedPolicyTrigger = 8;   // The RPZ trigger
    optional string appliedPolicyHit = 9;       // The value (qname or IP) that caused the hit
    optional PolicyKind appliedPolicyKind = 10; // The Kind (RPZ action) applied by the hit
    optional VState validationState = 11;       // The DNSSEC Validation State
  }

  optional DNSResponse response = 13;
  optional bytes originalRequestorSubnet = 14;  // EDNS Client Subnet value (4 or 16 raw bytes in network byte order)
  optional string requestorId = 15;             // Username of the requestor
  optional bytes initialRequestId = 16;         // UUID of the incoming query that initiated this outgoing query or incoming response
  optional bytes deviceId = 17;                 // Device ID of the requestor (could be mac address IP address or e.g. IMEI, format implementation dependent)
  optional bool  newlyObservedDomain = 18;      // True if the domain has not been seen before
  optional string deviceName = 19;              // Device name of the requestor
  optional uint32 fromPort = 20;                // Source port of the DNS query (client)
  optional uint32 toPort = 21;                  // Destination port of the DNS query (server)

  message MetaValue {
    repeated string stringVal = 1;
    repeated int64 intVal = 2;
  }

  message Meta {
    required string key = 1;                    // MUST be unique, so if you have multiple values they must be aggregated into one Meta
    required MetaValue value = 2;
  }
  repeated Meta meta = 22;                      // Arbitrary meta-data - to be used in future rather than adding new fields all the time

  // The well known EventTrace event numbers
  enum EventType {
                                                // Range 0..99: Generic events
    CustomEvent = 0;                            // A custom event
    ReqRecv = 1;                                // A request was received
    PCacheCheck = 2;                            // A packet cache check was initiated or completed; value: bool cacheHit
    AnswerSent = 3;                             // An answer was sent to the client

                                                // Range 100: Recursor events
    SyncRes = 100;                              // Recursor Syncres main function has started or completed; value: int rcode
    LuaGetTag = 101;                            // Events below mark start or end of Lua hook calls; value: return value of hook
    LuaGetTagFFI = 102;
    LuaIPFilter = 103;
    LuaPreRPZ = 104;
    LuaPreResolve = 105;
    LuaPreOutQuery = 106;
    LuaPostResolve = 107;
    LuaNoData = 108;
    LuaNXDomain = 109;
    LuaPostResolveFFI = 110;
  }

  message Event {
    required int64 ts = 1;                      // Timestamp in ns relative to time of creation of event trace data structure
    required EventType event = 2;               // Type of event
    required bool start = 3;                    // true for "start" events, false for "completed" events
    optional bool boolVal = 4;                  // Below are optional values associated with events
    optional int64 intVal = 5;
    optional string stringVal = 6;
    optional bytes bytesVal = 7;
    optional string custom = 8;                 // The name of the event for custom events
  }
  repeated Event trace = 23;

  optional HTTPVersion httpVersion = 24;        // HTTP version used for DNS over HTTP
  optional uint64 workerId = 25;                // Thread id
  optional bool packetCacheHit = 26;            // Was it a packet cache hit?
  optional uint32 outgoingQueries = 27;         // Number of outgoing queries used to answer the query
  optional uint32 headerFlags = 28;             // Flags field in wire format, 16 bits used
  optional uint32 ednsVersion = 29;             // EDNS version and flags in wire format, see https://www.rfc-editor.org/rfc/rfc6891.html#section-6.1.3
}

message PBDNSMessageList {
  repeated PBDNSMessage msg = 1;
}

```

## Logging in `dnstap` format using framestreams[Â¶](#logging-in-dnstap-format-using-framestreams "Permalink to this headline")

Define the following function to enable logging of outgoing queries and/or responses in `dnstap` format.
The recursor must have been built with configure `--enable-dnstap` to make this feature available.

`dnstapFrameStreamServer`(*servers*[, *options*])[Â¶](#dnstapFrameStreamServer "Permalink to this definition")

New in version 4.3.0.

New in version 5.1.0: Alternative equivalent YAML setting: [logging.dnstap\_framestream\_servers](../yamlsettings.html#setting-yaml-logging-dnstap-framestream-servers).

Send dnstap formatted message to one or more framestream servers for outgoing queries and/or incoming responses.

| Parameters: | * **servers** (*string or list of strings*) â Either a pathname of a unix domain socket starting with a slash or the IP:port to connect to, or a list of those. If more than one server is configured, all messages are sent to every server. * **options** (*table*) â A table with `key=value` pairs with options. |
| --- | --- |

Options:

* `logQueries=true`: bool - log outgoing queries
* `logResponses=true`: bool - log incoming responses

The following options apply to the settings of the framestream library
<https://github.com/farsightsec/fstrm>. Refer to the documentation of that library for the default
values, exact description and allowable values for these options. For all these options, absence or a zero
value has the effect of using the library-provided default value.

* `bufferHint=0`: unsigned
* `flushTimeout=0`: unsigned
* `inputQueueSize=0`: unsigned
* `outputQueueSize=0`: unsigned
* `queueNotifyThreshold=0`: unsigned
* `reopenInterval=0`: unsigned

`dnstapNODFrameStreamServer`(*servers*[, *options*])[Â¶](#dnstapNODFrameStreamServer "Permalink to this definition")

New in version 4.8.0.

New in version 5.1.0: Alternative equivalent YAML setting: [logging.dnstap\_nod\_framestream\_servers](../yamlsettings.html#setting-yaml-logging-dnstap-nod-framestream-servers).

Send dnstap formatted message for [Newly Observed Domain Tracking](../nod_udr.html#newly-observed-domain) and [Unique Domain Response](../nod_udr.html#unique-domain-response).
`Message.type` will be set to `CLIENT_QUERY` for NOD and `RESOLVER_RESPONSE` for UDR. The concerned domain name will be attached in the `Message.query_zone` field.
UDR notifications will get the reply attached to the `response_message` field.

| Parameters: | * **servers** (*string or list of strings*) â Either a pathname of a unix domain socket starting with a slash or the IP:port to connect to, or a list of those. If more than one server is configured, all messages are sent to every server. * **options** (*table*) â A table with `key=value` pairs with options. |
| --- | --- |

Options:

* `logNODs=true`: bool - log NODs
* `logUDRs=false`: bool - log UDRs

The following options apply to the settings of the framestream library
<https://github.com/farsightsec/fstrm>. Refer to the documentation of that library for the default
values, exact description and allowable values for these options. For all these options, absence or a zero
value has the effect of using the library-provided default value.

* `bufferHint=0`: unsigned
* `flushTimeout=0`: unsigned
* `inputQueueSize=0`: unsigned
* `outputQueueSize=0`: unsigned
* `queueNotifyThreshold=0`: unsigned
* `reopenInterval=0`: unsigned

[Managing DNSSEC Trust Anchors in the Lua Configuration](dnssec.html "previous chapter (use the left arrow)")

[Response Policy Zones (RPZ)](rpz.html "next chapter (use the right arrow)")

### Navigation

* [index](../genindex.html "General Index")
* [routing table](../http-routingtable.html "HTTP Routing Table") |
* [next](rpz.html "Response Policy Zones (RPZ)") |
* [previous](dnssec.html "Managing DNSSEC Trust Anchors in the Lua Configuration") |
* [PowerDNS Recursor documentation](../indexTOC.html) »
* [Advanced Configuration Using Lua](index.html) »

© Copyright PowerDNS.COM BV. Created using [Sphinx](http://sphinx.pocoo.org/).



=== Content from docs.powerdns.com_f9efad73_20250115_095849.html ===

### Navigation

* [index](../genindex.html "General Index")
* [routing table](../http-routingtable.html "HTTP Routing Table") |
* [next](powerdns-advisory-2023-01.html "PowerDNS Security Advisory 2023-01: unbounded recursion results in program termination") |
* [previous](powerdns-advisory-2022-01.html "PowerDNS Security Advisory 2022-01: incomplete validation of incoming IXFR transfer in Authoritative Server and Recursor") |
* [PowerDNS Recursor documentation](../indexTOC.html) »
* [Security Advisories](index.html) »

[PowerDNS Recursor](../indexTOC.html)

#### Previous topic

[PowerDNS Security Advisory 2022-01: incomplete validation of incoming IXFR transfer in Authoritative Server and Recursor](powerdns-advisory-2022-01.html "previous chapter")

#### Next topic

[PowerDNS Security Advisory 2023-01: unbounded recursion results in program termination](powerdns-advisory-2023-01.html "next chapter")

## Contents

* [Introduction](../index.html)
* [Getting Started](../getting-started.html)
* [Operating PowerDNS Recursor](../running.html)
* [DNSSEC in the PowerDNS Recursor](../dnssec.html)
* [PowerDNS Recursor Settings](../settings.html)
* [PowerDNS Recursor New Style (YAML) Settings](../yamlsettings.html)
* [Advanced Configuration Using Lua](../lua-config/index.html)
* [Scripting PowerDNS Recursor](../lua-scripting/index.html)
* [DNS64 support](../dns64.html)
* [Metrics and Statistics](../metrics.html)
* [Performance Guide](../performance.html)
* [Manual Pages](../manpages/index.html)
* [Built-in Webserver and HTTP API](../http-api/index.html)
* [Security of the PowerDNS Recursor](../security.html)
* [Security Advisories](index.html)
  + [PowerDNS Security Advisory 2024-04: Crafted responses can lead to a denial of service due to cache inefficiencies in the Recursor](powerdns-advisory-2024-04.html)
  + [PowerDNS Security Advisory 2024-02: if recursive forwarding is configured, crafted responses can lead to a denial of service in Recursor](powerdns-advisory-2024-02.html)
  + [PowerDNS Security Advisory 2024-01: crafted DNSSEC records in a zone can lead to a denial of service in Recursor](powerdns-advisory-2024-01.html)
  + [PowerDNS Security Advisory 2023-02: Deterred spoofing attempts can lead to authoritative servers being marked unavailable](powerdns-advisory-2023-02.html)
  + [PowerDNS Security Advisory 2023-01: unbounded recursion results in program termination](powerdns-advisory-2023-01.html)
  + PowerDNS Security Advisory 2022-02: incomplete exception handling related to protobuf message generation
  + [PowerDNS Security Advisory 2022-01: incomplete validation of incoming IXFR transfer in Authoritative Server and Recursor](powerdns-advisory-2022-01.html)
  + [PowerDNS Security Advisory 2020-07: Cache pollution](powerdns-advisory-2020-07.html)
  + [PowerDNS Security Advisory 2020-04: Access restriction bypass](powerdns-advisory-2020-04.html)
  + [PowerDNS Security Advisory 2020-03: Information disclosure](powerdns-advisory-2020-03.html)
  + [PowerDNS Security Advisory 2020-02: Insufficient validation of DNSSEC signatures](powerdns-advisory-2020-02.html)
  + [PowerDNS Security Advisory 2020-01: Denial of Service](powerdns-advisory-2020-01.html)
  + [PowerDNS Security Advisory 2019-02: Insufficient validation of DNSSEC signatures](powerdns-advisory-2019-02.html)
  + [PowerDNS Security Advisory 2019-01: Lua hooks are not applied in certain configurations](powerdns-advisory-2019-01.html)
  + [PowerDNS Security Advisory 2018-09: Crafted query can cause a denial of service](powerdns-advisory-2018-09.html)
  + [PowerDNS Security Advisory 2018-07: Crafted query for meta-types can cause a denial of service](powerdns-advisory-2018-07.html)
  + [PowerDNS Security Advisory 2018-06: Packet cache pollution via crafted query](powerdns-advisory-2018-06.html)
  + [PowerDNS Security Advisory 2018-04: Crafted answer can cause a denial of service](powerdns-advisory-2018-04.html)
  + [PowerDNS Security Advisory 2018-01: Insufficient validation of DNSSEC signatures](powerdns-advisory-2018-01.html)
  + [PowerDNS Security Advisory 2017-08: Crafted CNAME answer can cause a denial of service](powerdns-advisory-2017-08.html)
  + [PowerDNS Security Advisory 2017-07: Memory leak in DNSSEC parsing](powerdns-advisory-2017-07.html)
  + [PowerDNS Security Advisory 2017-06: Configuration file injection in the API](powerdns-advisory-2017-06.html)
  + [PowerDNS Security Advisory 2017-05: Cross-Site Scripting in the web interface](powerdns-advisory-2017-05.html)
  + [PowerDNS Security Advisory 2017-03: Insufficient validation of DNSSEC signatures](powerdns-advisory-2017-03.html)
  + [PowerDNS Security Advisory 2016-04: Insufficient validation of TSIG signatures](powerdns-advisory-2016-04.html)
  + [PowerDNS Security Advisory 2016-02: Crafted queries can cause abnormal CPU usage](powerdns-advisory-2016-02.html)
  + [PowerDNS Security Advisory 2015-01: Label decompression bug can cause crashes or CPU spikes](powerdns-advisory-2015-01.html)
  + [PowerDNS Security Advisory 2014-02: PowerDNS Recursor 3.6.1 and earlier can be made to provide bad service](powerdns-advisory-2014-02.html)
  + [PowerDNS Security Advisory 2014-01: PowerDNS Recursor 3.6.0 can be crashed remotely](powerdns-advisory-2014-01.html)
  + [PowerDNS Security Advisory 2010-02: PowerDNS Recursor up to and including 3.1.7.1 can be spoofed into accepting bogus data](powerdns-advisory-2010-02.html)
  + [PowerDNS Security Advisory 2010-01: PowerDNS Recursor up to and including 3.1.7.1 can be brought down and probably exploited](powerdns-advisory-2010-01.html)
  + [PowerDNS Security Advisory 2008-01: System random generator can be predicted, leading to the potential to âspoofâ PowerDNS Recursor](powerdns-advisory-2008-01.html)
  + [PowerDNS Security Advisory 2006-02: Zero second CNAME TTLs can make PowerDNS exhaust allocated stack space, and crash](powerdns-advisory-2006-02.html)
  + [PowerDNS Security Advisory 2006-01: Malformed TCP queries can lead to a buffer overflow which might be exploitable](powerdns-advisory-2006-01.html)
  + [Older security advisories](index.html#older-security-advisories)
* [Upgrade Guide](../upgrade.html)
* [Changelogs](../changelog/index.html)
* [Newly Observed Domain Tracking](../nod_udr.html)
* [Unique Domain Response](../nod_udr.html#unique-domain-response)
* [End of life statements](../appendices/EOL.html)
* [Frequently Asked Questions](../appendices/FAQ.html)
* [Compiling **PowerDNS Recursor**](../appendices/compiling.html)
* [Cryptographic software and export control](../appendices/crypto-export.html)
* [Internals of the PowerDNS Recursor](../appendices/internals.html)
* [Structured Logging Dictionary](../appendices/structuredlogging.html)
* [Conversion of old-style settings to YAML format](../appendices/yamlconversion.html)
* [PowerDNS/dnsdist license](../common/license.html)

### This Page

* [Show Source](../_sources/security-advisories/powerdns-advisory-2022-02.rst.txt)

1. [Docs](../indexTOC.html)
2. [Security Advisories](index.html)
3. PowerDNS Security Advisory 2022-02: incomplete exception handling related to protobuf message generation

# PowerDNS Security Advisory 2022-02: incomplete exception handling related to protobuf message generation[Â¶](#powerdns-security-advisory-2022-02-incomplete-exception-handling-related-to-protobuf-message-generation "Permalink to this headline")

* CVE: CVE-2022-37428
* Date: 23th of August 2022.
* Affects: PowerDNS Recursor up to and including 4.5.9, 4.6.2 and 4.7.1
* Not affected: PowerDNS Recursor 4.5.10, 4.6.3 and 4.7.2
* Severity: Medium
* Impact: Denial of service
* Exploit: This problem can be triggered by a remote attacker with access to the recursor if protobuf logging is enabled
* Risk of system compromise: None
* Solution: Upgrade to patched version, disable protobuf logging of responses

This issue only affects recursors which have protobuf logging enabled using the

* `protobufServer` function with `logResponses=true` or
* `outgoingProtobufServer` function with `logResponses=true`

If either of these functions is used without specifying `logResponses`, its value is `true`.
An attacker needs to have access to the recursor, i.e. the remote IP must be in the access control list.
If an attacker queries a name that leads to an answer with specific properties, a protobuf message might be generated that causes an exception. The code does not handle this exception correctly, causing a denial of service.

[PowerDNS Security Advisory 2022-01: incomplete validation of incoming IXFR transfer in Authoritative Server and Recursor](powerdns-advisory-2022-01.html "previous chapter (use the left arrow)")

[PowerDNS Security Advisory 2023-01: unbounded recursion results in program termination](powerdns-advisory-2023-01.html "next chapter (use the right arrow)")

### Navigation

* [index](../genindex.html "General Index")
* [routing table](../http-routingtable.html "HTTP Routing Table") |
* [next](powerdns-advisory-2023-01.html "PowerDNS Security Advisory 2023-01: unbounded recursion results in program termination") |
* [previous](powerdns-advisory-2022-01.html "PowerDNS Security Advisory 2022-01: incomplete validation of incoming IXFR transfer in Authoritative Server and Recursor") |
* [PowerDNS Recursor documentation](../indexTOC.html) »
* [Security Advisories](index.html) »

© Copyright PowerDNS.COM BV. Created using [Sphinx](http://sphinx.pocoo.org/).


