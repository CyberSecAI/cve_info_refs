=== Content from github.com_f8a0a13d_20250114_234631.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fsecurity%2Fadvisories%2FGHSA-hc82-w9v8-83pr)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fsecurity%2Fadvisories%2FGHSA-hc82-w9v8-83pr)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=lightningnetwork%2Flnd)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightningnetwork](/lightningnetwork)
/
**[lnd](/lightningnetwork/lnd)**
Public

* [Notifications](/login?return_to=%2Flightningnetwork%2Flnd) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Flightningnetwork%2Flnd)
* [Star
   7.8k](/login?return_to=%2Flightningnetwork%2Flnd)

* [Code](/lightningnetwork/lnd)
* [Issues
  567](/lightningnetwork/lnd/issues)
* [Pull requests
  188](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects
  3](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

Additional navigation options

* [Code](/lightningnetwork/lnd)
* [Issues](/lightningnetwork/lnd/issues)
* [Pull requests](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

# Witness Block Parsing DoS Vulnerability

High

[Roasbeef](/Roasbeef)
published
GHSA-hc82-w9v8-83pr
Nov 17, 2022

## Package

gomod

btcd
([Go](/advisories?query=ecosystem%3Ago))

## Affected versions

< v0.23.3

## Patched versions

v0.23.3

gomod

lnd
([Go](/advisories?query=ecosystem%3Ago))

< v0.15.4-beta

v0.15.4-beta

## Description

### Impact

All lnd nodes before version `v0.15.4` are vulnerable to a block parsing bug that can cause a node to enter a degraded state once encountered. In this degraded state, nodes can continue to make payments and forward HTLCs, and close out channels. Opening channels is prohibited, and also on chain transaction events will be undetected.

This can cause loss of funds if a CSV expiry is researched during a breach attempt or a CLTV delta expires forgetting the funds in the HTLC.

### Patches

A patch is available starting with lnd `v0.15.4`.

### Workarounds

Nodes can use the `lncli updatechanpolicy` RPC call to increase their CLTV value to a very high amount or increase their fee policies. This will prevent nodes from routing through your node, meaning that no pending HTLCs can be present.

### References

[#7096](https://github.com/lightningnetwork/lnd/issues/7096)

<https://github.com/lightningnetwork/lnd/releases/tag/v0.15.4-beta>

### Severity

High

8.1

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
High

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
High

Availability
High

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:H

### CVE ID

CVE-2022-39389

### Weaknesses

[CWE-20](/advisories?query=cwe%3A20)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_f2c74d3e_20250114_234629.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Freleases%2Ftag%2Fv0.15.4-beta)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Freleases%2Ftag%2Fv0.15.4-beta)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=lightningnetwork%2Flnd)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightningnetwork](/lightningnetwork)
/
**[lnd](/lightningnetwork/lnd)**
Public

* [Notifications](/login?return_to=%2Flightningnetwork%2Flnd) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Flightningnetwork%2Flnd)
* [Star
   7.8k](/login?return_to=%2Flightningnetwork%2Flnd)

* [Code](/lightningnetwork/lnd/tree/v0.15.4-beta)
* [Issues
  567](/lightningnetwork/lnd/issues)
* [Pull requests
  188](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects
  3](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

Additional navigation options

* [Code](/lightningnetwork/lnd/tree/v0.15.4-beta)
* [Issues](/lightningnetwork/lnd/issues)
* [Pull requests](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

1. [Releases](/lightningnetwork/lnd/releases)
2. [v0.15.4-beta](/lightningnetwork/lnd/releases/tag/v0.15.4-beta)

# lnd v0.15.4-beta

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/lightningnetwork/lnd/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v0.15.4-beta)

 Loading

[View all tags](/lightningnetwork/lnd/tags)

![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&v=4)
[guggero](/guggero)
released this
01 Nov 13:08

¬∑
[4817 commits](/lightningnetwork/lnd/compare/v0.15.4-beta...master)
to master
since this release

[v0.15.4-beta](/lightningnetwork/lnd/tree/v0.15.4-beta)

This tag was signed with the committer‚Äôs **verified signature**.

[![](https://avatars.githubusercontent.com/u/1008879?s=64&v=4)](/guggero)
[guggero](/guggero)
Oliver Gugger

GPG key ID: 8E4256593F177720

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

[`96fe51e`](/lightningnetwork/lnd/commit/96fe51e2e5c2ee0c97909499e0e96a3d3755757e)

This commit was created on GitHub.com and signed with GitHub‚Äôs **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

This is an emergency hot fix release to fix a bug that can cause lnd nodes to be unable to parse certain transactions that have a very large number of witness inputs.

This release contains no major features, and is instead just a hotfix applied on top of v0.15.3.

# Verifying the Release

In order to verify the release, you'll need to have `gpg` or `gpg2` installed on your system. Once you've obtained a copy (and hopefully verified that as well), you'll first need to import the keys that have signed this release if you haven't done so already:

```
curl https://raw.githubusercontent.com/lightningnetwork/lnd/master/scripts/keys/guggero.asc | gpg --import

```

Once you have the required PGP keys, you can verify the release (assuming `manifest-guggero-v0.15.4-beta.sig` and `manifest-v0.15.4-beta.txt` are in the current directory) with:

```
gpg --verify manifest-guggero-v0.15.4-beta.sig manifest-v0.15.4-beta.txt

```

You should see the following if the verification was successful:

```
gpg: Signature made Di 01 Nov 2022 14:00:20 CET
gpg:                using RSA key F4FC70F07310028424EFC20A8E4256593F177720
gpg: Good signature from "Oliver Gugger <gugger@gmail.com>" [ultimate]

```

That will verify the signature of the manifest file, which ensures integrity and authenticity of the archive you've downloaded locally containing the binaries. Next, depending on your operating system, you should then re-compute the `sha256` hash of the archive with `shasum -a 256 <filename>`, compare it with the corresponding one in the manifest file, and ensure they match *exactly*.

## Verifying the Release Timestamp

From this new version onwards, in addition time-stamping the *git tag* with [OpenTimeStamps](https://opentimestamps.org/), we'll also now timestamp the manifest file along with its signature. Two new files are now included along with the rest of our release artifacts:  `manifest-guggero-v0.15.4-beta.txt.asc.ots`.

Assuming you have the opentimestamps client installed locally, the timestamps can be verified with the following commands:

```
ots verify manifest-guggero-v0.15.4-beta.sig.ots -f manifest-guggero-v0.15.4-beta.sig

```

Alternatively, [the open timestamps website](https://opentimestamps.org/) can be used to verify timestamps if one doesn't have a `bitcoind` instance accessible locally.

These timestamps should give users confidence in the integrity of this release even after the key that signed the release expires.

## Verifying the Release Binaries

Our release binaries are fully reproducible. Third parties are able to verify that the release binaries were produced properly without having to trust the release manager(s). See our [reproducible builds guide](https://github.com/lightningnetwork/lnd/tree/master/build/release) for how this can be achieved.

The release binaries are compiled with `go1.18.2`, which is required by verifiers to arrive at the same ones.

They include the following build tags: `autopilotrpc`, `signrpc`, `walletrpc`, `chainrpc`, `invoicesrpc`, `neutrinorpc`, `routerrpc`, `watchtowerrpc`, `monitoring`, `peersrpc`, `kvdb_postrgres`, and `kvdb_etcd`. Note that these are already included in the release script, so they do not need to be provided.

The `make release` command can be used to ensure one rebuilds with all the same flags used for the release. If one wishes to build for only a single platform, then `make release sys=<OS-ARCH> tag=<tag>` can be used.

Finally, you can also verify the *tag* itself with the following command:

```
$ git verify-tag v0.15.4-beta
gpg: Signature made Di 01 Nov 2022 13:45:40 CET
gpg:                using RSA key F4FC70F07310028424EFC20A8E4256593F177720
gpg: Good signature from "Oliver Gugger <gugger@gmail.com>"

```
## Verifying the Docker Images

To verify the `lnd` and `lncli` binaries inside the docker images against the signed, reproducible release binaries, there is a verification script in the image that can be called (before starting the container for example):

```
$ docker run --rm --entrypoint="" lightninglabs/lnd:v0.15.4-beta /verify-install.sh v0.15.4-beta
$ OK=$?
$ if [ "$OK" -ne "0" ]; then echo "Verification failed!"; exit 1; done
$ docker run lightninglabs/lnd [command-line options]
```
# Building the Contained Release

Users are able to rebuild the target release themselves without having to fetch any of the dependencies. In order to do so, assuming

that `vendor.tar.gz` and `lnd-source-v0.15.4-beta.tar.gz` are in the current directory, follow these steps:

```
tar -xvzf vendor.tar.gz
tar -xvzf lnd-source-v0.15.4-beta.tar.gz
GO111MODULE=on go install -v -mod=vendor -ldflags "-X github.com/lightningnetwork/lnd/build.Commit=v0.15.4-beta" ./cmd/lnd
GO111MODULE=on go install -v -mod=vendor -ldflags "-X github.com/lightningnetwork/lnd/build.Commit=v0.15.4-beta" ./cmd/lncli

```

The `-mod=vendor` flag tells the `go build` command that it doesn't need to fetch the dependencies, and instead, they're all enclosed in the local vendor directory.

Additionally, it's now possible to use the [enclosed `release.sh` script to bundle a release for a *specific* system like so](https://github.com/lightningnetwork/lnd/pull/2191):

```
make release sys="linux-arm64 darwin-amd64"

```

‚ö°Ô∏è‚ö°Ô∏è‚ö°Ô∏è OK, now to the rest of the release notes! ‚ö°Ô∏è‚ö°Ô∏è‚ö°Ô∏è

# Release Notes

<https://github.com/lightningnetwork/lnd/blob/v0-15-4-branch/docs/release-notes/release-notes-0.15.4.md>

 Assets
36

 Loading

 üëç
3
 vafanassieff, soulBit, and 22388o reacted with thumbs up emoji
 üéâ
5
 seberm, 22388o, jamesonev, ellemouton, and kravens reacted with hooray emoji
 üëÄ
1
 rofra reacted with eyes emoji

All reactions

* üëç
  3 reactions
* üéâ
  5 reactions
* üëÄ
  1 reaction

 8 people reacted

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_e66366af_20250114_234627.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fpull%2F7098)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fpull%2F7098)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=lightningnetwork%2Flnd)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightningnetwork](/lightningnetwork)
/
**[lnd](/lightningnetwork/lnd)**
Public

* [Notifications](/login?return_to=%2Flightningnetwork%2Flnd) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Flightningnetwork%2Flnd)
* [Star
   7.8k](/login?return_to=%2Flightningnetwork%2Flnd)

* [Code](/lightningnetwork/lnd)
* [Issues
  567](/lightningnetwork/lnd/issues)
* [Pull requests
  188](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects
  3](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

Additional navigation options

* [Code](/lightningnetwork/lnd)
* [Issues](/lightningnetwork/lnd/issues)
* [Pull requests](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Flightningnetwork%2Flnd%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Flightningnetwork%2Flnd%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# mod+build: bump btcd version to v0.23.3 and bump lnd version to v0.15.4-beta #7098

 Merged

[guggero](/guggero)
merged 4 commits into
[v0-15-4-branch](/lightningnetwork/lnd/tree/v0-15-4-branch "lightningnetwork/lnd:v0-15-4-branch")
from
[btcd-bump-23-3](/lightningnetwork/lnd/tree/btcd-bump-23-3 "lightningnetwork/lnd:btcd-bump-23-3")

Nov 1, 2022

 Merged

# [mod+build: bump btcd version to v0.23.3 and bump lnd version to v0.15.4-beta](#top) #7098

[guggero](/guggero)
merged 4 commits into
[v0-15-4-branch](/lightningnetwork/lnd/tree/v0-15-4-branch "lightningnetwork/lnd:v0-15-4-branch")
from
[btcd-bump-23-3](/lightningnetwork/lnd/tree/btcd-bump-23-3 "lightningnetwork/lnd:btcd-bump-23-3")

Nov 1, 2022

[Conversation
4](/lightningnetwork/lnd/pull/7098)
[Commits
4](/lightningnetwork/lnd/pull/7098/commits)
[Checks
0](/lightningnetwork/lnd/pull/7098/checks)
[Files changed](/lightningnetwork/lnd/pull/7098/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![guggero](https://avatars.githubusercontent.com/u/1008879?s=60&v=4)](/guggero)

Copy link

Collaborator

### @guggero **[guggero](/guggero)** commented [Nov 1, 2022](#issue-1431340659)

Fixes [#7096](https://github.com/lightningnetwork/lnd/issues/7096).

Sorry, something went wrong.

 üöÄ
6
 muraschal, sangaman, itme-brain, MaxHillebrand, GeorgeTsagk, and pang422 reacted with rocket emoji

All reactions

* üöÄ
  6 reactions

 [guggero](/guggero)
added 3 commits
[November 1, 2022 13:18](#commits-pushed-d65833f)

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&v=4)](/guggero)

`[mod: bump btcd to v0.23.3](/lightningnetwork/lnd/pull/7098/commits/d65833fca4a4278bee0b39b57cf0713ea07894b8 "mod: bump btcd to v0.23.3")`

`[d65833f](/lightningnetwork/lnd/pull/7098/commits/d65833fca4a4278bee0b39b57cf0713ea07894b8)`

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&v=4)](/guggero)

`[docs: add release notes for 0.15.4-beta](/lightningnetwork/lnd/pull/7098/commits/77cd2bf5e491b67b94674db50794df33be53d630 "docs: add release notes for 0.15.4-beta")`

`[77cd2bf](/lightningnetwork/lnd/pull/7098/commits/77cd2bf5e491b67b94674db50794df33be53d630)`

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&v=4)](/guggero)

`[build: bump version to v0.15.4-beta](/lightningnetwork/lnd/pull/7098/commits/64f20b6b5b408c32e49ea2d432e2f8ec866e0b8e "build: bump version to v0.15.4-beta")`

`[64f20b6](/lightningnetwork/lnd/pull/7098/commits/64f20b6b5b408c32e49ea2d432e2f8ec866e0b8e)`

[![bhandras](https://avatars.githubusercontent.com/u/554360?s=60&v=4)](/bhandras)

**[bhandras](/bhandras)**
approved these changes
[Nov 1, 2022](#pullrequestreview-1163245232)

 [View reviewed changes](/lightningnetwork/lnd/pull/7098/files/64f20b6b5b408c32e49ea2d432e2f8ec866e0b8e)

[![GeorgeTsagk](https://avatars.githubusercontent.com/u/34623190?s=60&v=4)](/GeorgeTsagk)

**[GeorgeTsagk](/GeorgeTsagk)**
approved these changes
[Nov 1, 2022](#pullrequestreview-1163245637)

 [View reviewed changes](/lightningnetwork/lnd/pull/7098/files/64f20b6b5b408c32e49ea2d432e2f8ec866e0b8e)

[![ellemouton](https://avatars.githubusercontent.com/u/25280249?s=60&v=4)](/ellemouton)

**[ellemouton](/ellemouton)**
approved these changes
[Nov 1, 2022](#pullrequestreview-1163245665)

 [View reviewed changes](/lightningnetwork/lnd/pull/7098/files/64f20b6b5b408c32e49ea2d432e2f8ec866e0b8e)

[![positiveblue](https://avatars.githubusercontent.com/u/3369356?s=60&v=4)](/positiveblue)

**[positiveblue](/positiveblue)**
approved these changes
[Nov 1, 2022](#pullrequestreview-1163245845)

 [View reviewed changes](/lightningnetwork/lnd/pull/7098/files/64f20b6b5b408c32e49ea2d432e2f8ec866e0b8e)

[![Crypt-iQ](https://avatars.githubusercontent.com/u/15145615?s=60&v=4)](/Crypt-iQ)

**[Crypt-iQ](/Crypt-iQ)**
approved these changes
[Nov 1, 2022](#pullrequestreview-1163246750)

 [View reviewed changes](/lightningnetwork/lnd/pull/7098/files/64f20b6b5b408c32e49ea2d432e2f8ec866e0b8e)

[![@pinheadmz](https://avatars.githubusercontent.com/u/2084648?s=80&u=8b3acfaf5f6b5d51d1a3ee1a427e4489e9874bb1&v=4)](/pinheadmz)

Copy link

### **[pinheadmz](/pinheadmz)** commented [Nov 1, 2022](#issuecomment-1298442618)

| ACK thanks and thanks [@ellemouton](https://github.com/ellemouton)  ```     "version": "0.15.4-beta commit=v0.15.3-beta-3-g64f20b6b5",     "commit_hash": "64f20b6b5b408c32e49ea2d432e2f8ec866e0b8e", ...     "block_height": 761262,     "block_hash": "00000000000000000001e5923f47b41c9f3f0daac869b0e37442a1bdc4ca39bc",     "best_header_timestamp": "1667304928",     "synced_to_chain": true,     "synced_to_graph": true,  ``` |
| --- |

 üëç
3
 C-Otto, GeorgeTsagk, and guggero reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&v=4)](/guggero)

`[funding: fix linter error](/lightningnetwork/lnd/pull/7098/commits/c8a3fbe265c671a8b263fd9148d54ceea1f3b355 "funding: fix linter error")`

`[c8a3fbe](/lightningnetwork/lnd/pull/7098/commits/c8a3fbe265c671a8b263fd9148d54ceea1f3b355)`

[![@renepickhardt](https://avatars.githubusercontent.com/u/1926816?s=40&v=4)](/renepickhardt)
[renepickhardt](/renepickhardt)
mentioned this pull request
[Nov 1, 2022](#ref-pullrequest-1428148368)

[Newsletters: add 224 (2022-11-02)
bitcoinops/bitcoinops.github.io#909](/bitcoinops/bitcoinops.github.io/pull/909)
 Merged

4 tasks

[![sangaman](https://avatars.githubusercontent.com/u/3440835?s=60&v=4)](/sangaman)

**[sangaman](/sangaman)**
approved these changes
[Nov 1, 2022](#pullrequestreview-1163259652)

 [View reviewed changes](/lightningnetwork/lnd/pull/7098/files/64f20b6b5b408c32e49ea2d432e2f8ec866e0b8e)

Copy link

Contributor

### @sangaman **[sangaman](/sangaman)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Chain sync works for me on testnet using `64f20b6b5b408c32e49ea2d432e2f8ec866e0b8e` on linux

Sorry, something went wrong.

 üëç
3
 lnplus, GeorgeTsagk, and 22388o reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

[![@C-Otto](https://avatars.githubusercontent.com/u/344948?s=80&u=4e2756743325284f61ec97b10bd72398af7b6f05&v=4)](/C-Otto)

Copy link

Contributor

### **[C-Otto](/C-Otto)** commented [Nov 1, 2022](#issuecomment-1298447107)

| Can confirm, btcd 0.23.3 fixed it for me (which I added manually, unrelated to this PR). |
| --- |

 üëç
5
 lnplus, ellemouton, renepickhardt, 22388o, and mutatrum reacted with thumbs up emoji

All reactions

* üëç
  5 reactions

Sorry, something went wrong.

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&u=2c337f92b7dbc69b8aaff7885926f2bc1865db0d&v=4)](/guggero)
[guggero](/guggero)
merged commit [`96fe51e`](/lightningnetwork/lnd/commit/96fe51e2e5c2ee0c97909499e0e96a3d3755757e)
into
v0-15-4-branch

[Nov 1, 2022](https://github.com/lightningnetwork/lnd/pull/7098#event-7712964859)

 [![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&u=2c337f92b7dbc69b8aaff7885926f2bc1865db0d&v=4)](/guggero)
[guggero](/guggero)
deleted the
btcd-bump-23-3

branch
[November 1, 2022 12:44](#event-7712965509)

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&u=2c337f92b7dbc69b8aaff7885926f2bc1865db0d&v=4)](/guggero)
[guggero](/guggero)
mentioned this pull request
[Nov 1, 2022](#ref-issue-1431260386)

[[bug]: CRITICAL! Unable to process chain reorg / too many witness items to fit into max message size
#7096](/lightningnetwork/lnd/issues/7096)

Closed

[![@C-Otto](https://avatars.githubusercontent.com/u/344948?s=80&u=4e2756743325284f61ec97b10bd72398af7b6f05&v=4)](/C-Otto)

Copy link

Contributor

### **[C-Otto](/C-Otto)** commented [Nov 1, 2022](#issuecomment-1298489789)

| Fixed version is available here: <https://github.com/lightningnetwork/lnd/releases/tag/v0.15.4-beta> |
| --- |

All reactions

Sorry, something went wrong.

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&u=2c337f92b7dbc69b8aaff7885926f2bc1865db0d&v=4)](/guggero)
[guggero](/guggero)
mentioned this pull request
[Nov 1, 2022](#ref-pullrequest-1431648926)

[mod+docs: bump btcd version to v0.23.3 on master branch
#7100](/lightningnetwork/lnd/pull/7100)
 Merged

[![@GoVulnBot](https://avatars.githubusercontent.com/u/96493708?s=40&v=4)](/GoVulnBot)
[GoVulnBot](/GoVulnBot)
mentioned this pull request
[Nov 17, 2022](#ref-issue-1454057866)

[x/vulndb: potential Go vuln in github.com/lightningnetwork/lnd: CVE-2022-39389
golang/vulndb#1115](/golang/vulndb/issues/1115)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fpull%2F7098)

Reviewers

[![@GeorgeTsagk](https://avatars.githubusercontent.com/u/34623190?s=40&v=4)](/GeorgeTsagk) [GeorgeTsagk](/GeorgeTsagk)

GeorgeTsagk approved these changes

[![@ellemouton](https://avatars.githubusercontent.com/u/25280249?s=40&v=4)](/ellemouton) [ellemouton](/ellemouton)

ellemouton approved these changes

[![@Crypt-iQ](https://avatars.githubusercontent.com/u/15145615?s=40&v=4)](/Crypt-iQ) [Crypt-iQ](/Crypt-iQ)

Crypt-iQ approved these changes

[![@sangaman](https://avatars.githubusercontent.com/u/3440835?s=40&v=4)](/sangaman) [sangaman](/sangaman)

sangaman approved these changes

[![@positiveblue](https://avatars.githubusercontent.com/u/3369356?s=40&v=4)](/positiveblue) [positiveblue](/positiveblue)

positiveblue approved these changes

[![@bhandras](https://avatars.githubusercontent.com/u/554360?s=40&v=4)](/bhandras) [bhandras](/bhandras)

bhandras approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

9 participants

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=52&v=4)](/guggero) [![@pinheadmz](https://avatars.githubusercontent.com/u/2084648?s=52&v=4)](/pinheadmz) [![@C-Otto](https://avatars.githubusercontent.com/u/344948?s=52&v=4)](/C-Otto) [![@bhandras](https://avatars.githubusercontent.com/u/554360?s=52&v=4)](/bhandras) [![@positiveblue](https://avatars.githubusercontent.com/u/3369356?s=52&v=4)](/positiveblue) [![@sangaman](https://avatars.githubusercontent.com/u/3440835?s=52&v=4)](/sangaman) [![@Crypt-iQ](https://avatars.githubusercontent.com/u/15145615?s=52&v=4)](/Crypt-iQ) [![@ellemouton](https://avatars.githubusercontent.com/u/25280249?s=52&v=4)](/ellemouton) [![@GeorgeTsagk](https://avatars.githubusercontent.com/u/34623190?s=52&v=4)](/GeorgeTsagk)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_05eec0c0_20250114_234623.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fissues%2F7096)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fissues%2F7096)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=lightningnetwork%2Flnd)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[lightningnetwork](/lightningnetwork)
/
**[lnd](/lightningnetwork/lnd)**
Public

* [Notifications](/login?return_to=%2Flightningnetwork%2Flnd) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Flightningnetwork%2Flnd)
* [Star
   7.8k](/login?return_to=%2Flightningnetwork%2Flnd)

* [Code](/lightningnetwork/lnd)
* [Issues
  567](/lightningnetwork/lnd/issues)
* [Pull requests
  188](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects
  3](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

Additional navigation options

* [Code](/lightningnetwork/lnd)
* [Issues](/lightningnetwork/lnd/issues)
* [Pull requests](/lightningnetwork/lnd/pulls)
* [Discussions](/lightningnetwork/lnd/discussions)
* [Actions](/lightningnetwork/lnd/actions)
* [Projects](/lightningnetwork/lnd/projects)
* [Wiki](/lightningnetwork/lnd/wiki)
* [Security](/lightningnetwork/lnd/security)
* [Insights](/lightningnetwork/lnd/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Flightningnetwork%2Flnd%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Flightningnetwork%2Flnd%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [bug]: CRITICAL! Unable to process chain reorg / too many witness items to fit into max message size #7096

Closed

[C-Otto](/C-Otto) opened this issue
Nov 1, 2022
¬∑ 19 comments

Closed

# [[bug]: CRITICAL! Unable to process chain reorg / too many witness items to fit into max message size](#top) #7096

[C-Otto](/C-Otto) opened this issue
Nov 1, 2022
¬∑ 19 comments

Labels
[bug](/lightningnetwork/lnd/labels/bug)
Unintended code behaviour
[needs triage](/lightningnetwork/lnd/labels/needs%20triage)

## Comments

[![@C-Otto](https://avatars.githubusercontent.com/u/344948?s=80&u=4e2756743325284f61ec97b10bd72398af7b6f05&v=4)](/C-Otto)

Copy link

Contributor

### **[C-Otto](/C-Otto)** commented [Nov 1, 2022](#issue-1431260386) ‚Ä¢ edited Loading

| Background lnd does not process new blocks.  lnd:  ``` 2022-11-01 12:02:54.658 [ERR] LNWL: Unable to process chain reorg: unable to get block 000000000000000000070742427fa10ec3c66d006160155a704d9f56d090a3ea: MsgTx.BtcDecode: too many witness items to fit into max message size [count 500003, max 500000]  ```  bitcoind:  ``` 2022-11-01T10:44:23Z UpdateTip: new best=000000000000000000070742427fa10ec3c66d006160155a704d9f56d090a3ea height=761249 version=0x20a00000 log2_work=93.818550 tx=776743287 date='2022-11-01T10:44:19Z' progress=1.000000 cache=21.2MiB(82459txo)  ```  My bitcoind knows about block height 761255, but lnd and mempool.space are stuck at 761248.   * lnd v0.15.3-beta * bitcoind v23   <https://twitter.com/c_otto83/status/1587400648366202880> |
| --- |
| The text was updated successfully, but these errors were encountered: |

 üëÄ
19
 jimmydjabali, faket0shi, 22388o, fiksn, gonzaloaune, mutatrum, 0xB10C, Jossec101, apotdevin, dannmat, and 9 more reacted with eyes emoji

All reactions

* üëÄ
  19 reactions

[![@C-Otto](https://avatars.githubusercontent.com/u/344948?s=40&u=4e2756743325284f61ec97b10bd72398af7b6f05&v=4)](/C-Otto)
[C-Otto](/C-Otto)
added
[bug](/lightningnetwork/lnd/labels/bug)
Unintended code behaviour
[needs triage](/lightningnetwork/lnd/labels/needs%20triage)
labels
[Nov 1, 2022](#event-7712368793)

[![@C-Otto](https://avatars.githubusercontent.com/u/344948?s=40&u=4e2756743325284f61ec97b10bd72398af7b6f05&v=4)](/C-Otto)
[C-Otto](/C-Otto)
changed the title
~~[bug]: CRITICAL! Unable to process chain reorg~~
[bug]: CRITICAL! Unable to process chain reorg / too many witness items to fit into max message size
[Nov 1, 2022](#event-7712387636)

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&u=2c337f92b7dbc69b8aaff7885926f2bc1865db0d&v=4)](/guggero)
[guggero](/guggero)
mentioned this issue
[Nov 1, 2022](#ref-issue-1431264921)

[[bug]: MsgTx.BtcDecode: too many witness items to fit into max message size [count 500003, max 500000]
#7097](/lightningnetwork/lnd/issues/7097)

Closed

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=80&u=2c337f92b7dbc69b8aaff7885926f2bc1865db0d&v=4)](/guggero)

Copy link

Collaborator

### **[guggero](/guggero)** commented [Nov 1, 2022](#issuecomment-1298372900)

| On it. |
| --- |

 ‚ù§Ô∏è
35
 C-Otto, 22388o, jimmydjabali, faket0shi, ellemouton, silenzara, hieblmi, fiksn, zehks, Seccour, and 25 more reacted with heart emoji

All reactions

* ‚ù§Ô∏è
  35 reactions

Sorry, something went wrong.

[![@indomitorum](https://avatars.githubusercontent.com/u/91600997?s=80&u=a4eaa3e14f4465fca6cdd8629d9337442d45f2cb&v=4)](/indomitorum)

Copy link

### **[indomitorum](/indomitorum)** commented [Nov 1, 2022](#issuecomment-1298375518)

| Same here.  2022-11-01 11:10:13.912 [ERR] LNWL: Unable to process chain reorg: unable to get block 000000000000000000070742427fa10ec3c66d006160155a704d9f56d090a3ea: MsgTx.BtcDecode: too many witness items to fit into max message size [count 500003, max 500000]  lnd@indomitusbtc:~$ lncli getinfo | grep synced "synced\_to\_chain": false, "synced\_to\_graph": true, |
| --- |

All reactions

Sorry, something went wrong.

[![@C-Otto](https://avatars.githubusercontent.com/u/344948?s=80&u=4e2756743325284f61ec97b10bd72398af7b6f05&v=4)](/C-Otto)

Copy link

Contributor

Author

### **[C-Otto](/C-Otto)** commented [Nov 1, 2022](#issuecomment-1298376216)

| I'm pretty sure all (recent) lnd installations are affected by this. |
| --- |

 üëç
2
 PhilippWa and mutatrum reacted with thumbs up emoji

All reactions

* üëç
  2 reactions

Sorry, something went wrong.

[![@daywalker90](https://avatars.githubusercontent.com/u/8257956?s=80&u=1aadd64076b78498fd9cb4c3303590ec638d6ff0&v=4)](/daywalker90)

Copy link

### **[daywalker90](/daywalker90)** commented [Nov 1, 2022](#issuecomment-1298378922)

| <https://twitter.com/brqgoo/status/1587397646125260802> he's back |
| --- |

 üòÑ
9
 C-Otto, indomitorum, 0xB10C, apotdevin, 22388o, Seccour, eupn, Jossec101, and LNBIG-COM reacted with laugh emoji
 üëÄ
3
 apotdevin, 22388o, and itme-brain reacted with eyes emoji

All reactions

* üòÑ
  9 reactions
* üëÄ
  3 reactions

Sorry, something went wrong.

[![@mutatrum](https://avatars.githubusercontent.com/u/56344102?s=80&u=02e12c9d934ec33f83b097c8c555da2fc5c6210f&v=4)](/mutatrum)

Copy link

### **[mutatrum](/mutatrum)** commented [Nov 1, 2022](#issuecomment-1298378979) ‚Ä¢ edited Loading

| btcd issue: [btcsuite/btcd#1906](https://github.com/btcsuite/btcd/issues/1906) |
| --- |

 üëç
6
 PhilippWa, C-Otto, 22388o, guggero, jimmymsaliba, and praeluceo reacted with thumbs up emoji

All reactions

* üëç
  6 reactions

Sorry, something went wrong.

[![@RandyMcMillan](https://avatars.githubusercontent.com/u/152159?s=80&u=6b2cf3d32fa402270a12818a5a710ad678110e60&v=4)](/RandyMcMillan)

Copy link

Contributor

### **[RandyMcMillan](/RandyMcMillan)** commented [Nov 1, 2022](#issuecomment-1298401729)

| üò¨ |
| --- |

All reactions

Sorry, something went wrong.

[![@Sep21-2009](https://avatars.githubusercontent.com/u/104714997?s=80&v=4)](/Sep21-2009)

Copy link

### **[Sep21-2009](/Sep21-2009)** commented [Nov 1, 2022](#issuecomment-1298405052)

| <https://twitter.com/brqgoo/status/1587397646125260802?t=4Dn-tAdekbGilSd7TCXeKA&s=19>  ? |
| --- |

All reactions

Sorry, something went wrong.

[![@C-Otto](https://avatars.githubusercontent.com/u/344948?s=80&u=4e2756743325284f61ec97b10bd72398af7b6f05&v=4)](/C-Otto)

Copy link

Contributor

Author

### **[C-Otto](/C-Otto)** commented [Nov 1, 2022](#issuecomment-1298405822)

| Yes, see above. |
| --- |

All reactions

Sorry, something went wrong.

[![@b3h3rkz](https://avatars.githubusercontent.com/u/9025305?s=80&u=cfd6615557d3f2a68a2d8d6c1d4a9edcb3c42299&v=4)](/b3h3rkz)

Copy link

### **[b3h3rkz](/b3h3rkz)** commented [Nov 1, 2022](#issuecomment-1298406363)

| I'm guessing this is a btcd issue? Everything seems to be fine on bitcoin |
| --- |

All reactions

Sorry, something went wrong.

[![@seberm](https://avatars.githubusercontent.com/u/212597?s=40&v=4)](/seberm)
[seberm](/seberm)
mentioned this issue
[Nov 1, 2022](#ref-issue-1431308406)

[[urgent] Update LND due to a critical bug
fort-nix/nix-bitcoin#564](/fort-nix/nix-bitcoin/issues/564)

Closed

[![@C-Otto](https://avatars.githubusercontent.com/u/344948?s=80&u=4e2756743325284f61ec97b10bd72398af7b6f05&v=4)](/C-Otto)

Copy link

Contributor

Author

### **[C-Otto](/C-Otto)** commented [Nov 1, 2022](#issuecomment-1298406900)

| Yes, the btcd issue is linked above. |
| --- |

 üëç
2
 b3h3rkz and 22388o reacted with thumbs up emoji

All reactions

* üëç
  2 reactions

Sorry, something went wrong.

[![@seberm](https://avatars.githubusercontent.com/u/212597?s=40&v=4)](/seberm)
[seberm](/seberm)
mentioned this issue
[Nov 1, 2022](#ref-issue-1431324603)

[[urgent] Update LND and electrs due to a critical bug as soon as the fix is available
mynodebtc/mynode#718](/mynodebtc/mynode/issues/718)

Open

[![@Stronzo-sky](https://avatars.githubusercontent.com/u/22100648?s=80&u=43e05e8b4dd6a08c66fe0f1fbd600a0679f825e0&v=4)](/Stronzo-sky)

Copy link

### **[Stronzo-sky](/Stronzo-sky)** commented [Nov 1, 2022](#issuecomment-1298427905) ‚Ä¢ edited Loading

| also got hte same bug, running lnd-15.3 and bitcoin-22.0: [ERR] LNWL: Unable to complete chain rescan: MsgTx.BtcDecode: too many witness items to fit into max message size [count 500003, max 500000]  fixed with updating lnd to 0.15.4. Thanks! |
| --- |

All reactions

Sorry, something went wrong.

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&u=2c337f92b7dbc69b8aaff7885926f2bc1865db0d&v=4)](/guggero)
[guggero](/guggero)
mentioned this issue
[Nov 1, 2022](#ref-pullrequest-1431340659)

[mod+build: bump btcd version to v0.23.3 and bump lnd version to v0.15.4-beta
#7098](/lightningnetwork/lnd/pull/7098)
 Merged

[![@Perlover](https://avatars.githubusercontent.com/u/574333?s=40&u=0a68264c14cfbe8fb1796532b068bbfcf72fbfc1&v=4)](/Perlover)
[Perlover](/Perlover)
mentioned this issue
[Nov 1, 2022](#ref-issue-1431345606)

[[Bug]: LND hanging: Unable to complete chain rescan: MsgTx.BtcDecode: too many witness items to fit into max message size
btcpayserver/btcpayserver#4256](/btcpayserver/btcpayserver/issues/4256)

Closed

1 task

[![@Perlover](https://avatars.githubusercontent.com/u/574333?s=80&u=0a68264c14cfbe8fb1796532b068bbfcf72fbfc1&v=4)](/Perlover)

Copy link

### **[Perlover](/Perlover)** commented [Nov 1, 2022](#issuecomment-1298442674)

| Same problem (BTCPay installation)  [btcpayserver/btcpayserver#4256](https://github.com/btcpayserver/btcpayserver/issues/4256) |
| --- |

All reactions

Sorry, something went wrong.

[![@LNBIG-COM](https://avatars.githubusercontent.com/u/45394848?s=80&u=753f08fb88a6d88181eb3f9d73fd8d2d4563019f&v=4)](/LNBIG-COM)

Copy link

### **[LNBIG-COM](/LNBIG-COM)** commented [Nov 1, 2022](#issuecomment-1298449258) ‚Ä¢ edited Loading

| Hi,  My all nodes are in a state:  ``` l getinfo|grep synced     "synced_to_chain": false,     "synced_to_graph": true,  ```  CRITICAL bug is number # 2 ? :))) |
| --- |

 üòï
2
 lnplus and C-Otto reacted with confused emoji

All reactions

* üòï
  2 reactions

Sorry, something went wrong.

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=80&u=2c337f92b7dbc69b8aaff7885926f2bc1865db0d&v=4)](/guggero)

Copy link

Collaborator

### **[guggero](/guggero)** commented [Nov 1, 2022](#issuecomment-1298461909)

| Fixed by [#7098](https://github.com/lightningnetwork/lnd/pull/7098), release binaries and docker images for `v0.15.4-beta` are going to be available soon (building right now). |
| --- |

 üéâ
6
 C-Otto, hieblmi, lnplus, BabyDino, LazyRay, and MiguelMedeiros reacted with hooray emoji
 üöÄ
1
 itme-brain reacted with rocket emoji

All reactions

* üéâ
  6 reactions
* üöÄ
  1 reaction

Sorry, something went wrong.

[![@guggero](https://avatars.githubusercontent.com/u/1008879?s=40&u=2c337f92b7dbc69b8aaff7885926f2bc1865db0d&v=4)](/guggero)
[guggero](/guggero)
closed this as [completed](/lightningnetwork/lnd/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Nov 1, 2022](#event-7713010281)

[![@Stronzo-sky](https://avatars.githubusercontent.com/u/22100648?s=80&u=43e05e8b4dd6a08c66fe0f1fbd600a0679f825e0&v=4)](/Stronzo-sky)

Copy link

### **[Stronzo-sky](/Stronzo-sky)** commented [Nov 1, 2022](#issuecomment-1298462073)

| I'm guessing this is a btcd issue? Everything seems to be fine on bitcoin  no, i`m running bitcoin core v22.0 and having the same issue. |
| --- |

 üëç
2
 lnplus and petrkr reacted with thumbs up emoji

All reactions

* üëç
  2 reactions

Sorry, something went wrong.

[![@WalterSmuts](https://avatars.githubusercontent.com/u/17950515?s=80&u=5d5eabd3a284ababd216c72abaac328bbc4e2e7b&v=4)](/WalterSmuts)

Copy link

### **[WalterSmuts](/WalterSmuts)** commented [Nov 1, 2022](#issuecomment-1298463944)

| I'm running neutrino, and not seeing the issue:  ``` walter@fluffy:~$ lncli  getinfo | grep synced     "synced_to_chain": true,     "synced_to_graph": true, walter@fluffy:~$ lncli  getinfo | grep block     "block_height": 761264,     "block_hash": "000000000000000000072cabab0aac7c6b00db0664b82edc77d3252634fcba8a",  ``` |
| --- |

 üëç
3
 lnplus, ellemouton, and guggero reacted with thumbs up emoji
 ‚ù§Ô∏è
1
 ellemouton reacted with heart emoji

All reactions

* üëç
  3 reactions
* ‚ù§Ô∏è
  1 reaction

Sorry, something went wrong.

[![@C-Otto](https://avatars.githubusercontent.com/u/344948?s=80&u=4e2756743325284f61ec97b10bd72398af7b6f05&v=4)](/C-Otto)

Copy link

Contributor

Author

### **[C-Otto](/C-Otto)** commented [Nov 1, 2022](#issuecomment-1298490101)

| Fixed version is available here: <https://github.com/lightningnetwork/lnd/releases/tag/v0.15.4-beta> |
| --- |

 üëç
5
 Stronzo-sky, mutatrum, lampiran, yuvadm, and felipebrunet reacted with thumbs up emoji

All reactions

* üëç
  5 reactions

Sorry, something went wrong.

[![@NicolasDorier](https://avatars.githubusercontent.com/u/3020646?s=80&u=256d78207f88d303d61b62060a309657276cf6cb&v=4)](/NicolasDorier)

Copy link

Contributor

### **[NicolasDorier](/NicolasDorier)** commented [Nov 1, 2022](#issuecomment-1298505275)

| I bumped to 0.15.4, it fixed the issue. (our own build) |
| --- |

 üéâ
2
 guggero and petrkr reacted with hooray emoji

All reactions

* üéâ
  2 reactions

Sorry, something went wrong.

[![@prusnak](https://avatars.githubusercontent.com/u/42201?s=40&v=4)](/prusnak)
[prusnak](/prusnak)
mentioned this issue
[Nov 1, 2022](#ref-pullrequest-1431667717)

[lnd: 0.15.2-beta -> 0.15.4-beta
NixOS/nixpkgs#199002](/NixOS/nixpkgs/pull/199002)
 Merged

13 tasks

[![@joostjager](https://avatars.githubusercontent.com/u/4638168?s=80&u=259e3196de0230149aafbecabfff5354dc700598&v=4)](/joostjager)

Copy link

Contributor

### **[joostjager](/joostjager)** commented [Nov 2, 2022](#issuecomment-1300013493)

| Would it be possible to modify lnd so that it skips validation on blocks received from the chain backend? Just reading about Eclair's exposure to this class of bugs: [ACINQ/eclair#2473 (comment)](https://github.com/ACINQ/eclair/pull/2473#discussion_r1011530186) |
| --- |

 üëç
1
 C-Otto reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@mutatrum](https://avatars.githubusercontent.com/u/56344102?s=40&u=02e12c9d934ec33f83b097c8c555da2fc5c6210f&v=4)](/mutatrum)
[mutatrum](/mutatrum)
mentioned this issue
[Nov 2, 2022](#ref-issue-1433251900)

[[bug]: SCB created after desync bug is not usable
#7105](/lightningnetwork/lnd/issues/7105)

Closed

[twofaktor](/twofaktor)
added a commit
to minibolt-guide/minibolt
that referenced
this issue
[Nov 2, 2022](#ref-commit-e7beabe)
[![@twofaktor](https://avatars.githubusercontent.com/u/89636253?s=40&u=735c6fba95b5bae55b18f3d461b5e3dff9e499a8&v=4)](/twofaktor)

`[LND guide updated to the last release](/minibolt-guide/minibolt/commit/e7beabe3e37b9585c7d9a28ac3e396087485c1c5 "LND guide updated to the last release

Updated LND guide to the last release due to bug found:
https://github.com/lightningnetwork/lnd/issues/7096")`
‚Ä¶

`[e7beabe](/minibolt-guide/minibolt/commit/e7beabe3e37b9585c7d9a28ac3e396087485c1c5)`

```
Updated LND guide to the last release due to bug found:
[lightningnetwork/lnd#7096](https://github.com/lightningnetwork/lnd/issues/7096)
```

[![@otech47](https://avatars.githubusercontent.com/u/4914611?s=40&v=4)](/otech47)
[otech47](/otech47)
mentioned this issue
[Nov 3, 2022](#ref-issue-1433946655)

[Explore possible refactors or additional test cases in btcd/wire/msgtx.go
btcsuite/btcd#1915](/btcsuite/btcd/issues/1915)

Open

[![@GoVulnBot](https://avatars.githubusercontent.com/u/96493708?s=40&v=4)](/GoVulnBot)
[GoVulnBot](/GoVulnBot)
mentioned this issue
[Nov 17, 2022](#ref-issue-1454057866)

[x/vulndb: potential Go vuln in github.com/lightningnetwork/lnd: CVE-2022-39389
golang/vulndb#1115](/golang/vulndb/issues/1115)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Flightningnetwork%2Flnd%2Fissues%2F7096)

Assignees

No one assigned

Labels

[bug](/lightningnetwork/lnd/labels/bug)
Unintended code behaviour
[needs triage](/lightningnetwork/lnd/labels/needs%20triage)

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

15 participants

[![@RandyMcMillan](https://avatars.githubusercontent.com/u/152159?s=52&v=4)](/RandyMcMillan) [![@C-Otto](https://avatars.githubusercontent.com/u/344948?s=52&v=4)](/C-Otto) [![@Perlover](https://avatars.githubusercontent.com/u/574333?s=52&v=4)](/Perlover) [![@guggero](https://avatars.githubusercontent.com/u/1008879?s=52&v=4)](/guggero) [![@NicolasDorier](https://avatars.githubusercontent.com/u/3020646?s=52&v=4)](/NicolasDorier) [![@joostjager](https://avatars.githubusercontent.com/u/4638168?s=52&v=4)](/joostjager) [![@daywalker90](https://avatars.githubusercontent.com/u/8257956?s=52&v=4)](/daywalker90) [![@b3h3rkz](https://avatars.githubusercontent.com/u/9025305?s=52&v=4)](/b3h3rkz) [![@WalterSmuts](https://avatars.githubusercontent.com/u/17950515?s=52&v=4)](/WalterSmuts) [![@Stronzo-sky](https://avatars.githubusercontent.com/u/22100648?s=52&v=4)](/Stronzo-sky) [![@LNBIG-COM](https://avatars.githubusercontent.com/u/45394848?s=52&v=4)](/LNBIG-COM) [![@mutatrum](https://avatars.githubusercontent.com/u/56344102?s=52&v=4)](/mutatrum) [![@indomitorum](https://avatars.githubusercontent.com/u/91600997?s=52&v=4)](/indomitorum) [![@Sep21-2009](https://avatars.githubusercontent.com/u/104714997?s=52&v=4)](/Sep21-2009) and others

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


