=== Content from github.com_28e705cc_20250114_223335.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Factions%2Frunner%2Fpull%2F2108)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Factions%2Frunner%2Fpull%2F2108)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=actions%2Frunner)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[actions](/actions)
/
**[runner](/actions/runner)**
Public

* [Notifications](/login?return_to=%2Factions%2Frunner) You must be signed in to change notification settings
* [Fork
  993](/login?return_to=%2Factions%2Frunner)
* [Star
   5k](/login?return_to=%2Factions%2Frunner)

* [Code](/actions/runner)
* [Issues
  400](/actions/runner/issues)
* [Pull requests
  102](/actions/runner/pulls)
* [Discussions](/actions/runner/discussions)
* [Actions](/actions/runner/actions)
* [Security](/actions/runner/security)
* [Insights](/actions/runner/pulse)

Additional navigation options

* [Code](/actions/runner)
* [Issues](/actions/runner/issues)
* [Pull requests](/actions/runner/pulls)
* [Discussions](/actions/runner/discussions)
* [Actions](/actions/runner/actions)
* [Security](/actions/runner/security)
* [Insights](/actions/runner/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Factions%2Frunner%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Factions%2Frunner%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Port hotfix to main branch #2108

 Merged

[thboop](/thboop)
merged 4 commits into
[main](/actions/runner/tree/main "actions/runner:main")
from
[thboop/fixContainerInvocation](/actions/runner/tree/thboop/fixContainerInvocation "actions/runner:thboop/fixContainerInvocation")

Sep 9, 2022

 Merged

# [Port hotfix to main branch](#top) #2108

[thboop](/thboop)
merged 4 commits into
[main](/actions/runner/tree/main "actions/runner:main")
from
[thboop/fixContainerInvocation](/actions/runner/tree/thboop/fixContainerInvocation "actions/runner:thboop/fixContainerInvocation")

Sep 9, 2022

[Conversation
0](/actions/runner/pull/2108)
[Commits
4](/actions/runner/pull/2108/commits)
[Checks
0](/actions/runner/pull/2108/checks)
[Files changed](/actions/runner/pull/2108/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![thboop](https://avatars.githubusercontent.com/u/52323235?s=60&v=4)](/thboop)

Copy link

Collaborator

### @thboop **[thboop](/thboop)** commented [Sep 7, 2022](#issue-1363976969)

Port of [#2107](https://github.com/actions/runner/pull/2107) to main

Sorry, something went wrong.

All reactions

 [thboop](/thboop)
added 2 commits
[September 6, 2022 21:34](#commits-pushed-ac4119f)

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&v=4)](/thboop)

`[fix issue with env's overwriting environment](/actions/runner/pull/2108/commits/ac4119f42bead4e968c047d6fcf6dd84556821e2 "fix issue with env's overwriting environment")`

`[ac4119f](/actions/runner/pull/2108/commits/ac4119f42bead4e968c047d6fcf6dd84556821e2)`

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&v=4)](/thboop)

`[add release notes](/actions/runner/pull/2108/commits/328f14862b8175d6531204931b7523ef393f7e50 "add release notes")`

`[328f148](/actions/runner/pull/2108/commits/328f14862b8175d6531204931b7523ef393f7e50)`

 [![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop)
[thboop](/thboop)
requested a review
from a team
as a [code owner](/actions/runner/blob/75786756bbe951b2a1ee3ca9e506888e61af7428/CODEOWNERS#L1)
[September 7, 2022 01:35](#event-7334768909)

[![nikola-jokic](https://avatars.githubusercontent.com/u/97525037?s=60&v=4)](/nikola-jokic)

**[nikola-jokic](/nikola-jokic)**
previously approved these changes
[Sep 7, 2022](#pullrequestreview-1099095461)

 [View reviewed changes](/actions/runner/pull/2108/files/328f14862b8175d6531204931b7523ef393f7e50)

 [![@nikola-jokic](https://avatars.githubusercontent.com/u/97525037?s=40&u=880decff6b744385148dba851b7673d43877d417&v=4)](/nikola-jokic)
[nikola-jokic](/nikola-jokic)
self-requested a review
[September 7, 2022 13:30](#event-7338938909)

 [![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop)
[thboop](/thboop)
dismissed
[nikola-jokic](/nikola-jokic)’s [stale review](#pullrequestreview-1099095461)
via
`[8a83f82](/actions/runner/commit/8a83f824fb6964a1fd62df84f591ccc3fe544ead)`
[September 7, 2022 18:51](#event-7341387952)

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&v=4)](/thboop)

`[handle value escaping](/actions/runner/pull/2108/commits/3c249b315df700900e2915a90b45a0ed9c6ad4ba "handle value escaping")`

`[3c249b3](/actions/runner/pull/2108/commits/3c249b315df700900e2915a90b45a0ed9c6ad4ba)`

 [![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop)
[thboop](/thboop)
[force-pushed](/actions/runner/compare/8a83f824fb6964a1fd62df84f591ccc3fe544ead..3c249b315df700900e2915a90b45a0ed9c6ad4ba)
the
thboop/fixContainerInvocation

branch
from
[`8a83f82`](/actions/runner/commit/8a83f824fb6964a1fd62df84f591ccc3fe544ead) to
[`3c249b3`](/actions/runner/commit/3c249b315df700900e2915a90b45a0ed9c6ad4ba)  [Compare](/actions/runner/compare/8a83f824fb6964a1fd62df84f591ccc3fe544ead..3c249b315df700900e2915a90b45a0ed9c6ad4ba)
[September 7, 2022 19:09](#event-7341507417)

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&v=4)](/thboop)

`[compile regex for runtime perf improvements](/actions/runner/pull/2108/commits/d4130522f36eb41a77b401f71c3f2d4c393b224b "compile regex for runtime perf improvements")`

`[d413052](/actions/runner/pull/2108/commits/d4130522f36eb41a77b401f71c3f2d4c393b224b)`

[![TingluoHuang](https://avatars.githubusercontent.com/u/1750815?s=60&v=4)](/TingluoHuang)

**[TingluoHuang](/TingluoHuang)**
approved these changes
[Sep 9, 2022](#pullrequestreview-1102745632)

 [View reviewed changes](/actions/runner/pull/2108/files/d4130522f36eb41a77b401f71c3f2d4c393b224b)

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop)
[thboop](/thboop)
merged commit [`ed191b7`](/actions/runner/commit/ed191b78ae33fb3dbc23b0135a9c4e355163dd31)
into
main

[Sep 9, 2022](https://github.com/actions/runner/pull/2108#event-7358565342)

 [![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop)
[thboop](/thboop)
deleted the
thboop/fixContainerInvocation

branch
[September 9, 2022 18:32](#event-7358565426)

[![@redlizard](https://avatars.githubusercontent.com/u/374672?s=40&v=4)](/redlizard)
[redlizard](/redlizard)
mentioned this pull request
[Sep 14, 2022](#ref-issue-1356022534)

[Runner corrupts secrets containing backslashes
#2089](/actions/runner/issues/2089)

Closed

This was referenced Sep 19, 2022

[M289 hotfix for container escaping
#2135](/actions/runner/pull/2135)
 Merged

[M285 Hotfix for container escaping
#2137](/actions/runner/pull/2137)
 Merged

[M283 Hotfix for container env escaping
#2138](/actions/runner/pull/2138)
 Merged

[fhammerl](/fhammerl)
added a commit
that referenced
this pull request
[Oct 5, 2022](#ref-commit-f8b95ee)
[![@fhammerl](https://avatars.githubusercontent.com/u/31069338?s=40&u=b38cd175247f4b8234d3e0499b51c0633ad8c3c7&v=4)](/fhammerl) [![@nikola-jokic](https://avatars.githubusercontent.com/u/97525037?s=40&u=880decff6b744385148dba851b7673d43877d417&v=4)](/nikola-jokic)
[![@AvaStancu](https://avatars.githubusercontent.com/u/11218015?s=40&u=cab04f0eecdc3a2874ddbc77c85af34503b26580&v=4)](/AvaStancu) [![@konradpabjan](https://avatars.githubusercontent.com/u/16109154?s=40&u=c6d1ef78c59a09b18d7392beccb339d632bba92e&v=4)](/konradpabjan) [![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop) [![@ruvceskistefan](https://avatars.githubusercontent.com/u/96768603?s=40&v=4)](/ruvceskistefan) [![@rentziass](https://avatars.githubusercontent.com/u/6207785?s=40&u=d38f78353505b595c9f6f0e6e276da4d8350c362&v=4)](/rentziass) [![@JoannaaKL](https://avatars.githubusercontent.com/u/67866556?s=40&u=54dc91de3b1e0d7ba8f8312dc6b65993f1bc14d1&v=4)](/JoannaaKL) [![@takost](https://avatars.githubusercontent.com/u/32135588?s=40&u=4e845428cd3d4325929d2dd2b7d10e889cb1c165&v=4)](/takost) [![@tauhid621](https://avatars.githubusercontent.com/u/17411453?s=40&u=41fed400ec13dfc02d1fbf780dc6b2e4a26ffa1c&v=4)](/tauhid621) [![@TingluoHuang](https://avatars.githubusercontent.com/u/1750815?s=40&u=cdd7878e6f4a8b8cce3a5137a3768bb9828d963a&v=4)](/TingluoHuang)

`[Pull upstream (](/actions/runner/commit/f8b95ee21ccec139169df81026f9718fbc211576 "Pull upstream (#2178)

* Escaping key and quoting it to avoid key based command injection (#2062)

* escaping key and quoting it to avoid key based command injection

* extracted creation of flags to DockerUtil, with testing included

* Release notes for 2.296.0 (#2078)

* Update releaseNote.md

* Update runnerversion

* Validate lines and columns for Annotations (#2082)

* docker: escape key-value pair as -e KEY and VALUE being environment var (#2091)

* docker: escape key-value pair as -e KEY and VALUE being environment var

* removed code duplication, removed unused method and test

* 2.296.1 Release (#2092) (#2099)

* docker: escape key-value pair as -e KEY and VALUE being environment var

* removed code duplication, removed unused method and test

* add release notes

Co-authored-by: Nikola Jokic <nikola-jokic@github.com>

Co-authored-by: Thomas Boop <52323235+thboop@users.noreply.github.com>
Co-authored-by: Nikola Jokic <nikola-jokic@github.com>

* fix ACTIONS_RUNNER_CONTAINER_HOOKS name in ADR (#2098)

* Port hotfix to main branch (#2108)

* fix issue with env's overwriting environment

* add release notes

* handle value escaping

* compile regex for runtime perf improvements

* fix for issue #2009 - composite summary file (#2077)

* Bump @actions/core from 1.2.6 to 1.9.1 in /src/Misc/expressionFunc/hashFiles (#2123)

* Remove unused imports (#2124)

* Remove unused imports (#2126)

* Add Release branches to pull request spec (#2134)

* Add file commands for save-state and set-output (#2118)

* POC: Windows arm64 runner build (#2022)

Prerelease for windows-arm64 runner build

* Add link to blog post to node 12 warn (#2156)

* 2.297.0 release notes (#2155)

* 2.297.0 release notes

* Adding a new vars context for non-secret variables (#2096)

* Adding a new vars context for non-secret variables

* Fix test case

* Trigger checks

* Remove variables from env context and environment varibale

* remove extra references

* Add prefix handling to configuration variables

* Fix test cases

* Consume variables using vars in context data

* removed action_yaml changes

* Avastancu/joannaakl/service container error log (#2110)

* adding support for a service container docker logs

* Adding Unit test to ContainerOperationProvider

* Adding another test to ContainerOperationProvider

* placed the docker logs output in dedicated ##group section

* Removed the exception thrown if the service container was not healthy

* Removed duplicated logging to the executionContext

* Updated the container logs sub-section message

* Print service containers only if they were healthy
Unhealthy service logs are printed in ContainerHealthCheckLogs called prior to this step.

* Removed recently added method to inspect docker logs
The method was doing the same thing as the existing DockerLogs method.

* Added execution context error
This will make a failed health check more visible in the UI without disrupting the execution of the program.

* Removing the section 'Waiting for all services to be ready'

Since nested subsections are not being displayed properly and we already need one subsection per service error.

* Update src/Runner.Worker/Container/DockerCommandManager.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/TestHostContext.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Change the logic for printing Service Containers logs

Service container logs will be printed in the 'Start containers' section only if there is an error.
Healthy services will have their logs printed in the 'Stop Containers' section.

* Removed unused import

* Added back section group.

* Moved service containers error logs to separate group sections

* Removed the test testing the old logic flow.

* Remove unnecessary 'IsAnyUnhealthy' flag

* Remove printHello() function

* Add newline to TestHostContext

* Remove unnecessary field 'UnhealthyContainers'

* Rename boolean flag indicating service container failure

* Refactor healthcheck logic to separate method to enable unit testing.

* Remove the default value for bool variable

* Update src/Runner.Worker/ContainerOperationProvider.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Runner.Worker/ContainerOperationProvider.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Rename Healthcheck back to ContainerHealthcheck

* Make test sequential

* Unextract the container error logs method

* remove test asserting thrown exception

* Add configure await

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Add back test asserting exception

* Check service exit code if there is no healtcheck configured

* Remove unnecessary healthcheck for healthy service container

* Revert \"Check service exit code if there is no healtcheck configured\"

This reverts commit fec24e834137afe2dc751a38707d0e399c10f8fb.

Co-authored-by: Ava S <avastancu@github.com>
Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Add warning for users using deprecated commands (#2164)

* Prepare release notes for v2.298.0 (#2169)

* Fix incorrect template vars to show SHA for WIN-ARM64 (#2171)

* Backport 2.298.1 (#2175)

* Update releaseNote.md

* Update runnerversion

Co-authored-by: Nikola Jokic <97525037+nikola-jokic@users.noreply.github.com>
Co-authored-by: Ava Stancu <avastancu@github.com>
Co-authored-by: Konrad Pabjan <konradpabjan@github.com>
Co-authored-by: Thomas Boop <52323235+thboop@users.noreply.github.com>
Co-authored-by: Nikola Jokic <nikola-jokic@github.com>
Co-authored-by: Stefan Ruvceski <96768603+ruvceskistefan@users.noreply.github.com>
Co-authored-by: Francesco Renzi <rentziass@github.com>
Co-authored-by: JoannaaKL <joannaakl@github.com>
Co-authored-by: Tatyana Kostromskaya <32135588+takost@users.noreply.github.com>
Co-authored-by: Tauhid Anjum <tauhidanjum@gmail.com>
Co-authored-by: Tingluo Huang <tingluohuang@github.com>")[#2178](https://github.com/actions/runner/pull/2178)[)](/actions/runner/commit/f8b95ee21ccec139169df81026f9718fbc211576 "Pull upstream (#2178)

* Escaping key and quoting it to avoid key based command injection (#2062)

* escaping key and quoting it to avoid key based command injection

* extracted creation of flags to DockerUtil, with testing included

* Release notes for 2.296.0 (#2078)

* Update releaseNote.md

* Update runnerversion

* Validate lines and columns for Annotations (#2082)

* docker: escape key-value pair as -e KEY and VALUE being environment var (#2091)

* docker: escape key-value pair as -e KEY and VALUE being environment var

* removed code duplication, removed unused method and test

* 2.296.1 Release (#2092) (#2099)

* docker: escape key-value pair as -e KEY and VALUE being environment var

* removed code duplication, removed unused method and test

* add release notes

Co-authored-by: Nikola Jokic <nikola-jokic@github.com>

Co-authored-by: Thomas Boop <52323235+thboop@users.noreply.github.com>
Co-authored-by: Nikola Jokic <nikola-jokic@github.com>

* fix ACTIONS_RUNNER_CONTAINER_HOOKS name in ADR (#2098)

* Port hotfix to main branch (#2108)

* fix issue with env's overwriting environment

* add release notes

* handle value escaping

* compile regex for runtime perf improvements

* fix for issue #2009 - composite summary file (#2077)

* Bump @actions/core from 1.2.6 to 1.9.1 in /src/Misc/expressionFunc/hashFiles (#2123)

* Remove unused imports (#2124)

* Remove unused imports (#2126)

* Add Release branches to pull request spec (#2134)

* Add file commands for save-state and set-output (#2118)

* POC: Windows arm64 runner build (#2022)

Prerelease for windows-arm64 runner build

* Add link to blog post to node 12 warn (#2156)

* 2.297.0 release notes (#2155)

* 2.297.0 release notes

* Adding a new vars context for non-secret variables (#2096)

* Adding a new vars context for non-secret variables

* Fix test case

* Trigger checks

* Remove variables from env context and environment varibale

* remove extra references

* Add prefix handling to configuration variables

* Fix test cases

* Consume variables using vars in context data

* removed action_yaml changes

* Avastancu/joannaakl/service container error log (#2110)

* adding support for a service container docker logs

* Adding Unit test to ContainerOperationProvider

* Adding another test to ContainerOperationProvider

* placed the docker logs output in dedicated ##group section

* Removed the exception thrown if the service container was not healthy

* Removed duplicated logging to the executionContext

* Updated the container logs sub-section message

* Print service containers only if they were healthy
Unhealthy service logs are printed in ContainerHealthCheckLogs called prior to this step.

* Removed recently added method to inspect docker logs
The method was doing the same thing as the existing DockerLogs method.

* Added execution context error
This will make a failed health check more visible in the UI without disrupting the execution of the program.

* Removing the section 'Waiting for all services to be ready'

Since nested subsections are not being displayed properly and we already need one subsection per service error.

* Update src/Runner.Worker/Container/DockerCommandManager.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/TestHostContext.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Change the logic for printing Service Containers logs

Service container logs will be printed in the 'Start containers' section only if there is an error.
Healthy services will have their logs printed in the 'Stop Containers' section.

* Removed unused import

* Added back section group.

* Moved service containers error logs to separate group sections

* Removed the test testing the old logic flow.

* Remove unnecessary 'IsAnyUnhealthy' flag

* Remove printHello() function

* Add newline to TestHostContext

* Remove unnecessary field 'UnhealthyContainers'

* Rename boolean flag indicating service container failure

* Refactor healthcheck logic to separate method to enable unit testing.

* Remove the default value for bool variable

* Update src/Runner.Worker/ContainerOperationProvider.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Runner.Worker/ContainerOperationProvider.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Rename Healthcheck back to ContainerHealthcheck

* Make test sequential

* Unextract the container error logs method

* remove test asserting thrown exception

* Add configure await

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Add back test asserting exception

* Check service exit code if there is no healtcheck configured

* Remove unnecessary healthcheck for healthy service container

* Revert \"Check service exit code if there is no healtcheck configured\"

This reverts commit fec24e834137afe2dc751a38707d0e399c10f8fb.

Co-authored-by: Ava S <avastancu@github.com>
Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Add warning for users using deprecated commands (#2164)

* Prepare release notes for v2.298.0 (#2169)

* Fix incorrect template vars to show SHA for WIN-ARM64 (#2171)

* Backport 2.298.1 (#2175)

* Update releaseNote.md

* Update runnerversion

Co-authored-by: Nikola Jokic <97525037+nikola-jokic@users.noreply.github.com>
Co-authored-by: Ava Stancu <avastancu@github.com>
Co-authored-by: Konrad Pabjan <konradpabjan@github.com>
Co-authored-by: Thomas Boop <52323235+thboop@users.noreply.github.com>
Co-authored-by: Nikola Jokic <nikola-jokic@github.com>
Co-authored-by: Stefan Ruvceski <96768603+ruvceskistefan@users.noreply.github.com>
Co-authored-by: Francesco Renzi <rentziass@github.com>
Co-authored-by: JoannaaKL <joannaakl@github.com>
Co-authored-by: Tatyana Kostromskaya <32135588+takost@users.noreply.github.com>
Co-authored-by: Tauhid Anjum <tauhidanjum@gmail.com>
Co-authored-by: Tingluo Huang <tingluohuang@github.com>")`
…

`[f8b95ee](/actions/runner/commit/f8b95ee21ccec139169df81026f9718fbc211576)`

```
* Escaping key and quoting it to avoid key based command injection ([#2062](https://github.com/actions/runner/pull/2062))

* escaping key and quoting it to avoid key based command injection

* extracted creation of flags to DockerUtil, with testing included

* Release notes for 2.296.0 ([#2078](https://github.com/actions/runner/pull/2078))

* Update releaseNote.md

* Update runnerversion

* Validate lines and columns for Annotations ([#2082](https://github.com/actions/runner/pull/2082))

* docker: escape key-value pair as -e KEY and VALUE being environment var ([#2091](https://github.com/actions/runner/pull/2091))

* docker: escape key-value pair as -e KEY and VALUE being environment var

* removed code duplication, removed unused method and test

* 2.296.1 Release ([#2092](https://github.com/actions/runner/pull/2092)) ([#2099](https://github.com/actions/runner/pull/2099))

* docker: escape key-value pair as -e KEY and VALUE being environment var

* removed code duplication, removed unused method and test

* add release notes

Co-authored-by: Nikola Jokic <nikola-jokic@github.com>

Co-authored-by: Thomas Boop <52323235+thboop@users.noreply.github.com>
Co-authored-by: Nikola Jokic <nikola-jokic@github.com>

* fix ACTIONS_RUNNER_CONTAINER_HOOKS name in ADR ([#2098](https://github.com/actions/runner/pull/2098))

* Port hotfix to main branch ([#2108](https://github.com/actions/runner/pull/2108))

* fix issue with env's overwriting environment

* add release notes

* handle value escaping

* compile regex for runtime perf improvements

* fix for issue [#2009](https://github.com/actions/runner/issues/2009) - composite summary file ([#2077](https://github.com/actions/runner/pull/2077))

* Bump @actions/core from 1.2.6 to 1.9.1 in /src/Misc/expressionFunc/hashFiles ([#2123](https://github.com/actions/runner/pull/2123))

* Remove unused imports ([#2124](https://github.com/actions/runner/pull/2124))

* Remove unused imports ([#2126](https://github.com/actions/runner/pull/2126))

* Add Release branches to pull request spec ([#2134](https://github.com/actions/runner/pull/2134))

* Add file commands for save-state and set-output ([#2118](https://github.com/actions/runner/pull/2118))

* POC: Windows arm64 runner build ([#2022](https://github.com/actions/runner/pull/2022))

Prerelease for windows-arm64 runner build

* Add link to blog post to node 12 warn ([#2156](https://github.com/actions/runner/pull/2156))

* 2.297.0 release notes ([#2155](https://github.com/actions/runner/pull/2155))

* 2.297.0 release notes

* Adding a new vars context for non-secret variables ([#2096](https://github.com/actions/runner/pull/2096))

* Adding a new vars context for non-secret variables

* Fix test case

* Trigger checks

* Remove variables from env context and environment varibale

* remove extra references

* Add prefix handling to configuration variables

* Fix test cases

* Consume variables using vars in context data

* removed action_yaml changes

* Avastancu/joannaakl/service container error log ([#2110](https://github.com/actions/runner/pull/2110))

* adding support for a service container docker logs

* Adding Unit test to ContainerOperationProvider

* Adding another test to ContainerOperationProvider

* placed the docker logs output in dedicated ##group section

* Removed the exception thrown if the service container was not healthy

* Removed duplicated logging to the executionContext

* Updated the container logs sub-section message

* Print service containers only if they were healthy
Unhealthy service logs are printed in ContainerHealthCheckLogs called prior to this step.

* Removed recently added method to inspect docker logs
The method was doing the same thing as the existing DockerLogs method.

* Added execution context error
This will make a failed health check more visible in the UI without disrupting the execution of the program.

* Removing the section 'Waiting for all services to be ready'

Since nested subsections are not being displayed properly and we already need one subsection per service error.

* Update src/Runner.Worker/Container/DockerCommandManager.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/TestHostContext.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Change the logic for printing Service Containers logs

Service container logs will be printed in the 'Start containers' section only if there is an error.
Healthy services will have their logs printed in the 'Stop Containers' section.

* Removed unused import

* Added back section group.

* Moved service containers error logs to separate group sections

* Removed the test testing the old logic flow.

* Remove unnecessary 'IsAnyUnhealthy' flag

* Remove printHello() function

* Add newline to TestHostContext

* Remove unnecessary field 'UnhealthyContainers'

* Rename boolean flag indicating service container failure

* Refactor healthcheck logic to separate method to enable unit testing.

* Remove the default value for bool variable

* Update src/Runner.Worker/ContainerOperationProvider.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Runner.Worker/ContainerOperationProvider.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Rename Healthcheck back to ContainerHealthcheck

* Make test sequential

* Unextract the container error logs method

* remove test asserting thrown exception

* Add configure await

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Add back test asserting exception

* Check service exit code if there is no healtcheck configured

* Remove unnecessary healthcheck for healthy service container

* Revert "Check service exit code if there is no healtcheck configured"

This reverts commit [fec24e8](https://github.com/actions/runner/commit/fec24e834137afe2dc751a38707d0e399c10f8fb).

Co-authored-by: Ava S <avastancu@github.com>
Co-authored-by: Tingluo Huang <tingluohuang@github.com>

* Add warning for users using deprecated commands ([#2164](https://github.com/actions/runner/pull/2164))

* Prepare release notes for v2.298.0 ([#2169](https://github.com/actions/runner/pull/2169))

* Fix incorrect template vars to show SHA for WIN-ARM64 ([#2171](https://github.com/actions/runner/pull/2171))

* Backport 2.298.1 ([#2175](https://github.com/actions/runner/pull/2175))

* Update releaseNote.md

* Update runnerversion

Co-authored-by: Nikola Jokic <97525037+nikola-jokic@users.noreply.github.com>
Co-authored-by: Ava Stancu <avastancu@github.com>
Co-authored-by: Konrad Pabjan <konradpabjan@github.com>
Co-authored-by: Thomas Boop <52323235+thboop@users.noreply.github.com>
Co-authored-by: Nikola Jokic <nikola-jokic@github.com>
Co-authored-by: Stefan Ruvceski <96768603+ruvceskistefan@users.noreply.github.com>
Co-authored-by: Francesco Renzi <rentziass@github.com>
Co-authored-by: JoannaaKL <joannaakl@github.com>
Co-authored-by: Tatyana Kostromskaya <32135588+takost@users.noreply.github.com>
Co-authored-by: Tauhid Anjum <tauhidanjum@gmail.com>
Co-authored-by: Tingluo Huang <tingluohuang@github.com>
```

[fhammerl](/fhammerl)
added a commit
that referenced
this pull request
[Oct 7, 2022](#ref-commit-04e7288)
[![@fhammerl](https://avatars.githubusercontent.com/u/31069338?s=40&u=b38cd175247f4b8234d3e0499b51c0633ad8c3c7&v=4)](/fhammerl)

`[Squashed commit of the following:](/actions/runner/commit/04e7288bb27af50893480e00dbec8b5060b26674 "Squashed commit of the following:

commit f8b95ee21ccec139169df81026f9718fbc211576
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Wed Oct 5 12:16:30 2022 +0200

    Pull upstream (#2178)

    * Escaping key and quoting it to avoid key based command injection (#2062)

    * escaping key and quoting it to avoid key based command injection

    * extracted creation of flags to DockerUtil, with testing included

    * Release notes for 2.296.0 (#2078)

    * Update releaseNote.md

    * Update runnerversion

    * Validate lines and columns for Annotations (#2082)

    * docker: escape key-value pair as -e KEY and VALUE being environment var (#2091)

    * docker: escape key-value pair as -e KEY and VALUE being environment var

    * removed code duplication, removed unused method and test

    * 2.296.1 Release (#2092) (#2099)

    * docker: escape key-value pair as -e KEY and VALUE being environment var

    * removed code duplication, removed unused method and test

    * add release notes

    Co-authored-by: Nikola Jokic <nikola-jokic@github.com>

    Co-authored-by: Thomas Boop <52323235+thboop@users.noreply.github.com>
    Co-authored-by: Nikola Jokic <nikola-jokic@github.com>

    * fix ACTIONS_RUNNER_CONTAINER_HOOKS name in ADR (#2098)

    * Port hotfix to main branch (#2108)

    * fix issue with env's overwriting environment

    * add release notes

    * handle value escaping

    * compile regex for runtime perf improvements

    * fix for issue #2009 - composite summary file (#2077)

    * Bump @actions/core from 1.2.6 to 1.9.1 in /src/Misc/expressionFunc/hashFiles (#2123)

    * Remove unused imports (#2124)

    * Remove unused imports (#2126)

    * Add Release branches to pull request spec (#2134)

    * Add file commands for save-state and set-output (#2118)

    * POC: Windows arm64 runner build (#2022)

    Prerelease for windows-arm64 runner build

    * Add link to blog post to node 12 warn (#2156)

    * 2.297.0 release notes (#2155)

    * 2.297.0 release notes

    * Adding a new vars context for non-secret variables (#2096)

    * Adding a new vars context for non-secret variables

    * Fix test case

    * Trigger checks

    * Remove variables from env context and environment varibale

    * remove extra references

    * Add prefix handling to configuration variables

    * Fix test cases

    * Consume variables using vars in context data

    * removed action_yaml changes

    * Avastancu/joannaakl/service container error log (#2110)

    * adding support for a service container docker logs

    * Adding Unit test to ContainerOperationProvider

    * Adding another test to ContainerOperationProvider

    * placed the docker logs output in dedicated ##group section

    * Removed the exception thrown if the service container was not healthy

    * Removed duplicated logging to the executionContext

    * Updated the container logs sub-section message

    * Print service containers only if they were healthy
    Unhealthy service logs are printed in ContainerHealthCheckLogs called prior to this step.

    * Removed recently added method to inspect docker logs
    The method was doing the same thing as the existing DockerLogs method.

    * Added execution context error
    This will make a failed health check more visible in the UI without disrupting the execution of the program.

    * Removing the section 'Waiting for all services to be ready'

    Since nested subsections are not being displayed properly and we already need one subsection per service error.

    * Update src/Runner.Worker/Container/DockerCommandManager.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Test/L0/TestHostContext.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Change the logic for printing Service Containers logs

    Service container logs will be printed in the 'Start containers' section only if there is an error.
    Healthy services will have their logs printed in the 'Stop Containers' section.

    * Removed unused import

    * Added back section group.

    * Moved service containers error logs to separate group sections

    * Removed the test testing the old logic flow.

    * Remove unnecessary 'IsAnyUnhealthy' flag

    * Remove printHello() function

    * Add newline to TestHostContext

    * Remove unnecessary field 'UnhealthyContainers'

    * Rename boolean flag indicating service container failure

    * Refactor healthcheck logic to separate method to enable unit testing.

    * Remove the default value for bool variable

    * Update src/Runner.Worker/ContainerOperationProvider.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Runner.Worker/ContainerOperationProvider.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Rename Healthcheck back to ContainerHealthcheck

    * Make test sequential

    * Unextract the container error logs method

    * remove test asserting thrown exception

    * Add configure await

    * Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Add back test asserting exception

    * Check service exit code if there is no healtcheck configured

    * Remove unnecessary healthcheck for healthy service container

    * Revert \"Check service exit code if there is no healtcheck configured\"

    This reverts commit fec24e834137afe2dc751a38707d0e399c10f8fb.

    Co-authored-by: Ava S <avastancu@github.com>
    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Add warning for users using deprecated commands (#2164)

    * Prepare release notes for v2.298.0 (#2169)

    * Fix incorrect template vars to show SHA for WIN-ARM64 (#2171)

    * Backport 2.298.1 (#2175)

    * Update releaseNote.md

    * Update runnerversion

    Co-authored-by: Nikola Jokic <97525037+nikola-jokic@users.noreply.github.com>
    Co-authored-by: Ava Stancu <avastancu@github.com>
    Co-authored-by: Konrad Pabjan <konradpabjan@github.com>
    Co-authored-by: Thomas Boop <52323235+thboop@users.noreply.github.com>
    Co-authored-by: Nikola Jokic <nikola-jokic@github.com>
    Co-authored-by: Stefan Ruvceski <96768603+ruvceskistefan@users.noreply.github.com>
    Co-authored-by: Francesco Renzi <rentziass@github.com>
    Co-authored-by: JoannaaKL <joannaakl@github.com>
    Co-authored-by: Tatyana Kostromskaya <32135588+takost@users.noreply.github.com>
    Co-authored-by: Tauhid Anjum <tauhidanjum@gmail.com>
    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

commit 416548c921c18bbe1ec8432092b5e20fa2f35bdb
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 09:50:33 2022 +0000

    No quotes or double lines in frn

commit 3cc465d610c228769450f42ae6120575119500be
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 09:45:10 2022 +0000

    Echo in init.sh

commit f6751205e4cb38a8c0f77592f4eda8b5b69a6547
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 09:35:58 2022 +0000

    Init as sudo

commit b4ebe66d39e499f167fe4e1fe977bf4d2f41b02c
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 09:12:12 2022 +0000

    Use vscode user

commit 489071e64f47da8e76e8c871fee52af06cb8ce67
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 09:02:54 2022 +0000

    Comment waitFor to explain it

commit 27686b57a5496ca724d1d0401c168ebd42306b12
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 08:53:50 2022 +0000

    Better first run, wait for init

commit 40d1650a18681d8fa7e5da99ae84739ad5cb404c
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 08:41:29 2022 +0000

    Better init message

commit 1875c95e044aaaf8a4056a3fd7ff30929cef87d0
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 10:21:17 2022 +0200

    Add frn

commit f33a3ce1187cdfc4cca56541270a4e6b3e114ee5
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Wed Sep 14 14:08:07 2022 +0000

    Use locally built dockerfile

commit 4f993992b1c728a6a86b5f95836e182d83319ac2
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Wed Sep 14 14:23:07 2022 +0200

    Bring first run cpy up

commit cda6c688de6c14f2e49289e31e55fb04453a5aeb
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Wed Sep 14 14:08:50 2022 +0200

    Use base.dockerfile for now

commit 262ade66677d8c79a134fd704ca9be45417be4ca
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Wed Sep 14 14:05:12 2022 +0200

    Update init.sh

commit bb1d080087bd3f0661e155f47f3684afe96d6240
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Mon Sep 12 16:38:56 2022 +0200

    Don't open dev.sh

commit a04569f86bc05081a2e001d76ca511805114c036
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 12:47:03 2022 +0000

    Copy firstrun elsewhere

commit 40ab9cd24d33075d0cb6b720ecbd238b13d2d968
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 12:26:08 2022 +0000

    Try first run notce

commit d773599c42ad22cf46174498155ce59aaa0d902d
Merge: 1575074 2f9271a
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 12:18:06 2022 +0000

    Merge branch 'fhammerl/try-ghcs' of https://github.com/actions/runner into fhammerl/try-ghcs

commit 15750743096e5bfaf302d4c5a44f9baaa3a9c575
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 12:17:55 2022 +0000

    Forgot 'init.sh' lives in source, meaning postCreateCommand has no access to it

commit 2f9271a28845f54fcb44e11ae81fc623e345155f
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 12:12:09 2022 +0000

    Run init.sh from source instead of docker img

commit 410e303c5f8e332c99736de7bed88534cc3cd398
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Mon Sep 12 12:05:25 2022 +0000

    Better init (no restore + rerunnable)

commit 1ff0cdc3a0a4e0e7b01e6fa0cd0f6a2225a65d7d
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 11:41:03 2022 +0000

    Use prebuilt image

commit 1cfd869469b6177bed3e92afc104f4f88b3bb507
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Mon Sep 12 13:29:55 2022 +0200

    Add gitlens and default container makefile

commit 7b1f2f0704507be486f621d0a5f11c44ea8493ec
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Tue Sep 6 16:10:30 2022 +0000

    Better init

commit d3377984923fd37ef0d1eefccc8fc079c568e4c0
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Tue Sep 6 16:13:00 2022 +0200

    Use dind devcontainer with correct dotnet sdk

commit 24b087d364e35291f9944eb88926ca1c73a80a99
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Mon Sep 5 16:16:20 2022 +0200

    Try codespaces

commit 49e808a89420b024be8b59c3716cae5d801209f8
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Tue Aug 23 15:39:43 2022 +0200

    Update init.sh

commit 90b99d31594bc9a7f4ef3e9025e845251b3f6cfd
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Tue Aug 23 12:59:20 2022 +0000

    Update to 300

commit 2284a759017d8f0bcf6e6a1e0e885006f3259ff5
Merge: d28fe56 1cb1779
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Tue Aug 23 12:58:21 2022 +0000

    giMerge branch 'main' of https://github.com/actions/runner into fhammerl/devcontainers

commit d28fe56367d243b02960a7c01c90864921b934d6
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 21:26:23 2022 +0000

    Restore symlink

commit d6a244fc25fd5b10769fa241a982b7e9a726b40a
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 21:23:19 2022 +0000

    No need for service restore

commit 0668503fb355ebf219a93e2eeabd071b159f28ab
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 21:19:01 2022 +0000

    More setup

commit 4ddedf531573bde11e9db2622f25aa2eda9066fd
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 22:08:27 2022 +0100

    Update devcontainer.json

commit bcc667a1a10c46d65e4801573b709cba99e08691
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 22:03:10 2022 +0100

    Delete Dockerfile

commit 994ff0449fd62c7923fc333ca2dff9b65b67d5de
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 21:45:24 2022 +0100

    Define dockerfile

commit 58de023cbd95ac92ca137ef3e2ef8977c50cfe68
Merge: fd09b83 00e5825
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 21:43:10 2022 +0100

    Merge branch 'fhammerl/devcontainers' of https://github.com/actions/runner into fhammerl/devcontainers

commit fd09b831bf613beca337a1084dee2270b01ebe5c
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 21:42:01 2022 +0100

    Use slimmer image

commit 00e5825f1bbd6dd944fcaa14b052b57192bee363
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 10:30:06 2022 +0000

    Symlink more .net stuff

commit c21469cfc1091f701c4734e3fbca7bddb0ca1ded
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 10:13:18 2022 +0000

    Create symlink

commit 206d50dac872c0c30c7a7d83ad017207bd5942a2
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 09:58:52 2022 +0000

    Remove Dockerfile

commit 6a43245cef08f39b9a7393296150041d4c94bd99
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 09:58:29 2022 +0000

    Add extension and exclude path

commit e3e3c81e2eb2b4b2943d9cf9e528363c05b55f61
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 09:56:01 2022 +0000

    Add default

commit 4d76eb4a4ab4de3f6ffca04cbd3cdeede7dbd124
Merge: 4c5730f ddc700e
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 10:12:43 2022 +0100

    Merge branch 'main' of https://github.com/actions/runner into fhammerl/devcontainers

commit 4c5730fe6ca77158debfbc6e881ddd57fe4aa2ef
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Fri Mar 11 14:19:30 2022 +0100

    Add default codespace settings")`
…

`[04e7288](/actions/runner/commit/04e7288bb27af50893480e00dbec8b5060b26674)`

```
commit [f8b95ee](https://github.com/actions/runner/commit/f8b95ee21ccec139169df81026f9718fbc211576)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Wed Oct 5 12:16:30 2022 +0200

    Pull upstream ([#2178](https://github.com/actions/runner/pull/2178))

    * Escaping key and quoting it to avoid key based command injection ([#2062](https://github.com/actions/runner/pull/2062))

    * escaping key and quoting it to avoid key based command injection

    * extracted creation of flags to DockerUtil, with testing included

    * Release notes for 2.296.0 ([#2078](https://github.com/actions/runner/pull/2078))

    * Update releaseNote.md

    * Update runnerversion

    * Validate lines and columns for Annotations ([#2082](https://github.com/actions/runner/pull/2082))

    * docker: escape key-value pair as -e KEY and VALUE being environment var ([#2091](https://github.com/actions/runner/pull/2091))

    * docker: escape key-value pair as -e KEY and VALUE being environment var

    * removed code duplication, removed unused method and test

    * 2.296.1 Release ([#2092](https://github.com/actions/runner/pull/2092)) ([#2099](https://github.com/actions/runner/pull/2099))

    * docker: escape key-value pair as -e KEY and VALUE being environment var

    * removed code duplication, removed unused method and test

    * add release notes

    Co-authored-by: Nikola Jokic <nikola-jokic@github.com>

    Co-authored-by: Thomas Boop <52323235+thboop@users.noreply.github.com>
    Co-authored-by: Nikola Jokic <nikola-jokic@github.com>

    * fix ACTIONS_RUNNER_CONTAINER_HOOKS name in ADR ([#2098](https://github.com/actions/runner/pull/2098))

    * Port hotfix to main branch ([#2108](https://github.com/actions/runner/pull/2108))

    * fix issue with env's overwriting environment

    * add release notes

    * handle value escaping

    * compile regex for runtime perf improvements

    * fix for issue [#2009](https://github.com/actions/runner/issues/2009) - composite summary file ([#2077](https://github.com/actions/runner/pull/2077))

    * Bump @actions/core from 1.2.6 to 1.9.1 in /src/Misc/expressionFunc/hashFiles ([#2123](https://github.com/actions/runner/pull/2123))

    * Remove unused imports ([#2124](https://github.com/actions/runner/pull/2124))

    * Remove unused imports ([#2126](https://github.com/actions/runner/pull/2126))

    * Add Release branches to pull request spec ([#2134](https://github.com/actions/runner/pull/2134))

    * Add file commands for save-state and set-output ([#2118](https://github.com/actions/runner/pull/2118))

    * POC: Windows arm64 runner build ([#2022](https://github.com/actions/runner/pull/2022))

    Prerelease for windows-arm64 runner build

    * Add link to blog post to node 12 warn ([#2156](https://github.com/actions/runner/pull/2156))

    * 2.297.0 release notes ([#2155](https://github.com/actions/runner/pull/2155))

    * 2.297.0 release notes

    * Adding a new vars context for non-secret variables ([#2096](https://github.com/actions/runner/pull/2096))

    * Adding a new vars context for non-secret variables

    * Fix test case

    * Trigger checks

    * Remove variables from env context and environment varibale

    * remove extra references

    * Add prefix handling to configuration variables

    * Fix test cases

    * Consume variables using vars in context data

    * removed action_yaml changes

    * Avastancu/joannaakl/service container error log ([#2110](https://github.com/actions/runner/pull/2110))

    * adding support for a service container docker logs

    * Adding Unit test to ContainerOperationProvider

    * Adding another test to ContainerOperationProvider

    * placed the docker logs output in dedicated ##group section

    * Removed the exception thrown if the service container was not healthy

    * Removed duplicated logging to the executionContext

    * Updated the container logs sub-section message

    * Print service containers only if they were healthy
    Unhealthy service logs are printed in ContainerHealthCheckLogs called prior to this step.

    * Removed recently added method to inspect docker logs
    The method was doing the same thing as the existing DockerLogs method.

    * Added execution context error
    This will make a failed health check more visible in the UI without disrupting the execution of the program.

    * Removing the section 'Waiting for all services to be ready'

    Since nested subsections are not being displayed properly and we already need one subsection per service error.

    * Update src/Runner.Worker/Container/DockerCommandManager.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Test/L0/TestHostContext.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Change the logic for printing Service Containers logs

    Service container logs will be printed in the 'Start containers' section only if there is an error.
    Healthy services will have their logs printed in the 'Stop Containers' section.

    * Removed unused import

    * Added back section group.

    * Moved service containers error logs to separate group sections

    * Removed the test testing the old logic flow.

    * Remove unnecessary 'IsAnyUnhealthy' flag

    * Remove printHello() function

    * Add newline to TestHostContext

    * Remove unnecessary field 'UnhealthyContainers'

    * Rename boolean flag indicating service container failure

    * Refactor healthcheck logic to separate method to enable unit testing.

    * Remove the default value for bool variable

    * Update src/Runner.Worker/ContainerOperationProvider.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Runner.Worker/ContainerOperationProvider.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Rename Healthcheck back to ContainerHealthcheck

    * Make test sequential

    * Unextract the container error logs method

    * remove test asserting thrown exception

    * Add configure await

    * Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Update src/Test/L0/Worker/ContainerOperationProviderL0.cs

    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Add back test asserting exception

    * Check service exit code if there is no healtcheck configured

    * Remove unnecessary healthcheck for healthy service container

    * Revert "Check service exit code if there is no healtcheck configured"

    This reverts commit [fec24e8](https://github.com/actions/runner/commit/fec24e834137afe2dc751a38707d0e399c10f8fb).

    Co-authored-by: Ava S <avastancu@github.com>
    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

    * Add warning for users using deprecated commands ([#2164](https://github.com/actions/runner/pull/2164))

    * Prepare release notes for v2.298.0 ([#2169](https://github.com/actions/runner/pull/2169))

    * Fix incorrect template vars to show SHA for WIN-ARM64 ([#2171](https://github.com/actions/runner/pull/2171))

    * Backport 2.298.1 ([#2175](https://github.com/actions/runner/pull/2175))

    * Update releaseNote.md

    * Update runnerversion

    Co-authored-by: Nikola Jokic <97525037+nikola-jokic@users.noreply.github.com>
    Co-authored-by: Ava Stancu <avastancu@github.com>
    Co-authored-by: Konrad Pabjan <konradpabjan@github.com>
    Co-authored-by: Thomas Boop <52323235+thboop@users.noreply.github.com>
    Co-authored-by: Nikola Jokic <nikola-jokic@github.com>
    Co-authored-by: Stefan Ruvceski <96768603+ruvceskistefan@users.noreply.github.com>
    Co-authored-by: Francesco Renzi <rentziass@github.com>
    Co-authored-by: JoannaaKL <joannaakl@github.com>
    Co-authored-by: Tatyana Kostromskaya <32135588+takost@users.noreply.github.com>
    Co-authored-by: Tauhid Anjum <tauhidanjum@gmail.com>
    Co-authored-by: Tingluo Huang <tingluohuang@github.com>

commit [416548c](https://github.com/actions/runner/commit/416548c921c18bbe1ec8432092b5e20fa2f35bdb)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 09:50:33 2022 +0000

    No quotes or double lines in frn

commit [3cc465d](https://github.com/actions/runner/commit/3cc465d610c228769450f42ae6120575119500be)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 09:45:10 2022 +0000

    Echo in init.sh

commit [f675120](https://github.com/actions/runner/commit/f6751205e4cb38a8c0f77592f4eda8b5b69a6547)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 09:35:58 2022 +0000

    Init as sudo

commit [b4ebe66](https://github.com/actions/runner/commit/b4ebe66d39e499f167fe4e1fe977bf4d2f41b02c)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 09:12:12 2022 +0000

    Use vscode user

commit [489071e](https://github.com/actions/runner/commit/489071e64f47da8e76e8c871fee52af06cb8ce67)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 09:02:54 2022 +0000

    Comment waitFor to explain it

commit [27686b5](https://github.com/actions/runner/commit/27686b57a5496ca724d1d0401c168ebd42306b12)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 08:53:50 2022 +0000

    Better first run, wait for init

commit [40d1650](https://github.com/actions/runner/commit/40d1650a18681d8fa7e5da99ae84739ad5cb404c)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 08:41:29 2022 +0000

    Better init message

commit [1875c95](https://github.com/actions/runner/commit/1875c95e044aaaf8a4056a3fd7ff30929cef87d0)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Sep 15 10:21:17 2022 +0200

    Add frn

commit [f33a3ce](https://github.com/actions/runner/commit/f33a3ce1187cdfc4cca56541270a4e6b3e114ee5)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Wed Sep 14 14:08:07 2022 +0000

    Use locally built dockerfile

commit [4f99399](https://github.com/actions/runner/commit/4f993992b1c728a6a86b5f95836e182d83319ac2)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Wed Sep 14 14:23:07 2022 +0200

    Bring first run cpy up

commit [cda6c68](https://github.com/actions/runner/commit/cda6c688de6c14f2e49289e31e55fb04453a5aeb)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Wed Sep 14 14:08:50 2022 +0200

    Use base.dockerfile for now

commit [262ade6](https://github.com/actions/runner/commit/262ade66677d8c79a134fd704ca9be45417be4ca)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Wed Sep 14 14:05:12 2022 +0200

    Update init.sh

commit [bb1d080](https://github.com/actions/runner/commit/bb1d080087bd3f0661e155f47f3684afe96d6240)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Mon Sep 12 16:38:56 2022 +0200

    Don't open dev.sh

commit [a04569f](https://github.com/actions/runner/commit/a04569f86bc05081a2e001d76ca511805114c036)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 12:47:03 2022 +0000

    Copy firstrun elsewhere

commit [40ab9cd](https://github.com/actions/runner/commit/40ab9cd24d33075d0cb6b720ecbd238b13d2d968)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 12:26:08 2022 +0000

    Try first run notce

commit [d773599](https://github.com/actions/runner/commit/d773599c42ad22cf46174498155ce59aaa0d902d)
Merge: [1575074](https://github.com/actions/runner/commit/15750743096e5bfaf302d4c5a44f9baaa3a9c575) [2f9271a](https://github.com/actions/runner/commit/2f9271a28845f54fcb44e11ae81fc623e345155f)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 12:18:06 2022 +0000

    Merge branch 'fhammerl/try-ghcs' of <https://github.com/actions/runner> into fhammerl/try-ghcs

commit [1575074](https://github.com/actions/runner/commit/15750743096e5bfaf302d4c5a44f9baaa3a9c575)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 12:17:55 2022 +0000

    Forgot 'init.sh' lives in source, meaning postCreateCommand has no access to it

commit [2f9271a](https://github.com/actions/runner/commit/2f9271a28845f54fcb44e11ae81fc623e345155f)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 12:12:09 2022 +0000

    Run init.sh from source instead of docker img

commit [410e303](https://github.com/actions/runner/commit/410e303c5f8e332c99736de7bed88534cc3cd398)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Mon Sep 12 12:05:25 2022 +0000

    Better init (no restore + rerunnable)

commit [1ff0cdc](https://github.com/actions/runner/commit/1ff0cdc3a0a4e0e7b01e6fa0cd0f6a2225a65d7d)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Mon Sep 12 11:41:03 2022 +0000

    Use prebuilt image

commit [1cfd869](https://github.com/actions/runner/commit/1cfd869469b6177bed3e92afc104f4f88b3bb507)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Mon Sep 12 13:29:55 2022 +0200

    Add gitlens and default container makefile

commit [7b1f2f0](https://github.com/actions/runner/commit/7b1f2f0704507be486f621d0a5f11c44ea8493ec)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Tue Sep 6 16:10:30 2022 +0000

    Better init

commit [d337798](https://github.com/actions/runner/commit/d3377984923fd37ef0d1eefccc8fc079c568e4c0)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Tue Sep 6 16:13:00 2022 +0200

    Use dind devcontainer with correct dotnet sdk

commit [24b087d](https://github.com/actions/runner/commit/24b087d364e35291f9944eb88926ca1c73a80a99)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Mon Sep 5 16:16:20 2022 +0200

    Try codespaces

commit [49e808a](https://github.com/actions/runner/commit/49e808a89420b024be8b59c3716cae5d801209f8)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Tue Aug 23 15:39:43 2022 +0200

    Update init.sh

commit [90b99d3](https://github.com/actions/runner/commit/90b99d31594bc9a7f4ef3e9025e845251b3f6cfd)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Tue Aug 23 12:59:20 2022 +0000

    Update to 300

commit [2284a75](https://github.com/actions/runner/commit/2284a759017d8f0bcf6e6a1e0e885006f3259ff5)
Merge: [d28fe56](https://github.com/actions/runner/commit/d28fe56367d243b02960a7c01c90864921b934d6) [1cb1779](https://github.com/actions/runner/commit/1cb1779d6bd8a04a02b330869e753f042fd922f6)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Tue Aug 23 12:58:21 2022 +0000

    giMerge branch 'main' of <https://github.com/actions/runner> into fhammerl/devcontainers

commit [d28fe56](https://github.com/actions/runner/commit/d28fe56367d243b02960a7c01c90864921b934d6)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 21:26:23 2022 +0000

    Restore symlink

commit [d6a244f](https://github.com/actions/runner/commit/d6a244fc25fd5b10769fa241a982b7e9a726b40a)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 21:23:19 2022 +0000

    No need for service restore

commit [0668503](https://github.com/actions/runner/commit/0668503fb355ebf219a93e2eeabd071b159f28ab)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 21:19:01 2022 +0000

    More setup

commit [4ddedf5](https://github.com/actions/runner/commit/4ddedf531573bde11e9db2622f25aa2eda9066fd)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 22:08:27 2022 +0100

    Update devcontainer.json

commit [bcc667a](https://github.com/actions/runner/commit/bcc667a1a10c46d65e4801573b709cba99e08691)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 22:03:10 2022 +0100

    Delete Dockerfile

commit [994ff04](https://github.com/actions/runner/commit/994ff0449fd62c7923fc333ca2dff9b65b67d5de)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 21:45:24 2022 +0100

    Define dockerfile

commit [58de023](https://github.com/actions/runner/commit/58de023cbd95ac92ca137ef3e2ef8977c50cfe68)
Merge: [fd09b83](https://github.com/actions/runner/commit/fd09b831bf613beca337a1084dee2270b01ebe5c) [00e5825](https://github.com/actions/runner/commit/00e5825f1bbd6dd944fcaa14b052b57192bee363)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 21:43:10 2022 +0100

    Merge branch 'fhammerl/devcontainers' of <https://github.com/actions/runner> into fhammerl/devcontainers

commit [fd09b83](https://github.com/actions/runner/commit/fd09b831bf613beca337a1084dee2270b01ebe5c)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 21:42:01 2022 +0100

    Use slimmer image

commit [00e5825](https://github.com/actions/runner/commit/00e5825f1bbd6dd944fcaa14b052b57192bee363)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 10:30:06 2022 +0000

    Symlink more .net stuff

commit [c21469c](https://github.com/actions/runner/commit/c21469cfc1091f701c4734e3fbca7bddb0ca1ded)
Author: Ferenc Hammerl <31069338+fhammerl@users.noreply.github.com>
Date:   Thu Mar 17 10:13:18 2022 +0000

    Create symlink

commit [206d50d](https://github.com/actions/runner/commit/206d50dac872c0c30c7a7d83ad017207bd5942a2)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 09:58:52 2022 +0000

    Remove Dockerfile

commit [6a43245](https://github.com/actions/runner/commit/6a43245cef08f39b9a7393296150041d4c94bd99)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 09:58:29 2022 +0000

    Add extension and exclude path

commit [e3e3c81](https://github.com/actions/runner/commit/e3e3c81e2eb2b4b2943d9cf9e528363c05b55f61)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 09:56:01 2022 +0000

    Add default

commit [4d76eb4](https://github.com/actions/runner/commit/4d76eb4a4ab4de3f6ffca04cbd3cdeede7dbd124)
Merge: [4c5730f](https://github.com/actions/runner/commit/4c5730fe6ca77158debfbc6e881ddd57fe4aa2ef) [ddc700e](https://github.com/actions/runner/commit/ddc700e9eb2fe4ac88214841c15e1384bc7b64be)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Thu Mar 17 10:12:43 2022 +0100

    Merge branch 'main' of <https://github.com/actions/runner> into fhammerl/devcontainers

commit [4c5730f](https://github.com/actions/runner/commit/4c5730fe6ca77158debfbc6e881ddd57fe4aa2ef)
Author: Ferenc Hammerl <fhammerl@github.com>
Date:   Fri Mar 11 14:19:30 2022 +0100

    Add default codespace settings
```

[nikola-jokic](/nikola-jokic)
pushed a commit
to nikola-jokic/runner
that referenced
this pull request
[May 12, 2023](#ref-commit-43853e5)
[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop) [![@nikola-jokic](https://avatars.githubusercontent.com/u/97525037?s=40&v=4)](/nikola-jokic)

`[Port hotfix to main branch (](/nikola-jokic/runner/commit/43853e5c97e1f125e362561e5e6f44cc2f70e157 "Port hotfix to main branch (#2108)

* fix issue with env's overwriting environment

* add release notes

* handle value escaping

* compile regex for runtime perf improvements")[actions#2108](https://github.com/actions/runner/pull/2108)[)](/nikola-jokic/runner/commit/43853e5c97e1f125e362561e5e6f44cc2f70e157 "Port hotfix to main branch (#2108)

* fix issue with env's overwriting environment

* add release notes

* handle value escaping

* compile regex for runtime perf improvements")`
…

`[43853e5](/nikola-jokic/runner/commit/43853e5c97e1f125e362561e5e6f44cc2f70e157)`

```
* fix issue with env's overwriting environment

* add release notes

* handle value escaping

* compile regex for runtime perf improvements
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Factions%2Frunner%2Fpull%2F2108)

Reviewers

[![@TingluoHuang](https://avatars.githubusercontent.com/u/1750815?s=40&v=4)](/TingluoHuang) [TingluoHuang](/TingluoHuang)

TingluoHuang approved these changes

[![@nikola-jokic](https://avatars.githubusercontent.com/u/97525037?s=40&v=4)](/nikola-jokic) [nikola-jokic](/nikola-jokic)

 Awaiting requested review from nikola-jokic

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=52&v=4)](/thboop) [![@TingluoHuang](https://avatars.githubusercontent.com/u/1750815?s=52&v=4)](/TingluoHuang) [![@nikola-jokic](https://avatars.githubusercontent.com/u/97525037?s=52&v=4)](/nikola-jokic)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_44f33e67_20250114_223334.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Factions%2Frunner%2Fpull%2F2107)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Factions%2Frunner%2Fpull%2F2107)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=actions%2Frunner)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[actions](/actions)
/
**[runner](/actions/runner)**
Public

* [Notifications](/login?return_to=%2Factions%2Frunner) You must be signed in to change notification settings
* [Fork
  993](/login?return_to=%2Factions%2Frunner)
* [Star
   5k](/login?return_to=%2Factions%2Frunner)

* [Code](/actions/runner)
* [Issues
  400](/actions/runner/issues)
* [Pull requests
  102](/actions/runner/pulls)
* [Discussions](/actions/runner/discussions)
* [Actions](/actions/runner/actions)
* [Security](/actions/runner/security)
* [Insights](/actions/runner/pulse)

Additional navigation options

* [Code](/actions/runner)
* [Issues](/actions/runner/issues)
* [Pull requests](/actions/runner/pulls)
* [Discussions](/actions/runner/discussions)
* [Actions](/actions/runner/actions)
* [Security](/actions/runner/security)
* [Insights](/actions/runner/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Factions%2Frunner%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Factions%2Frunner%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# 2.296.2 Release notes #2107

 Merged

[thboop](/thboop)
merged 4 commits into
[releases/m296](/actions/runner/tree/releases/m296 "actions/runner:releases/m296")
from
[thboop/hotfix](/actions/runner/tree/thboop/hotfix "actions/runner:thboop/hotfix")

Sep 8, 2022

 Merged

# [2.296.2 Release notes](#top) #2107

[thboop](/thboop)
merged 4 commits into
[releases/m296](/actions/runner/tree/releases/m296 "actions/runner:releases/m296")
from
[thboop/hotfix](/actions/runner/tree/thboop/hotfix "actions/runner:thboop/hotfix")

Sep 8, 2022

+64

−21

[Conversation
5](/actions/runner/pull/2107)
[Commits
4](/actions/runner/pull/2107/commits)
[Checks
0](/actions/runner/pull/2107/checks)
[Files changed
5](/actions/runner/pull/2107/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![thboop](https://avatars.githubusercontent.com/u/52323235?s=60&v=4)](/thboop)

Copy link

Collaborator

### @thboop **[thboop](/thboop)** commented [Sep 7, 2022](#issue-1363974741)

Resolves [#2104](https://github.com/actions/runner/issues/2104) and [#2103](https://github.com/actions/runner/issues/2103)

Sorry, something went wrong.

All reactions

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&v=4)](/thboop)

`[fix issue with env's overwriting environment](/actions/runner/pull/2107/commits/96b2c25f0d018d5f599b8fa272fd75cf9a2f8291 "fix issue with env's overwriting environment")`

`[96b2c25](/actions/runner/pull/2107/commits/96b2c25f0d018d5f599b8fa272fd75cf9a2f8291)`

 [![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop)
[thboop](/thboop)
requested a review
from a team
as a [code owner](/actions/runner/blob/219852abcb49cb096136f5b0a807e512765647d5/CODEOWNERS#L1)
[September 7, 2022 01:31](#event-7334755141)

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&v=4)](/thboop)

`[add release notes](/actions/runner/pull/2107/commits/1ceed23e0cce79688fcf5f8bdb6c71009bddd4b8 "add release notes")`

`[1ceed23](/actions/runner/pull/2107/commits/1ceed23e0cce79688fcf5f8bdb6c71009bddd4b8)`

 [![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop)
[thboop](/thboop)
[force-pushed](/actions/runner/compare/374a7e3795c3a83d2042a531f7c65344c304196c..1ceed23e0cce79688fcf5f8bdb6c71009bddd4b8)
the
thboop/hotfix

branch
from
[`374a7e3`](/actions/runner/commit/374a7e3795c3a83d2042a531f7c65344c304196c) to
[`1ceed23`](/actions/runner/commit/1ceed23e0cce79688fcf5f8bdb6c71009bddd4b8)  [Compare](/actions/runner/compare/374a7e3795c3a83d2042a531f7c65344c304196c..1ceed23e0cce79688fcf5f8bdb6c71009bddd4b8)
[September 7, 2022 01:33](#event-7334763469)

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop)
[thboop](/thboop)
mentioned this pull request
[Sep 7, 2022](#ref-pullrequest-1363976969)

[Port hotfix to main branch
#2108](/actions/runner/pull/2108)
 Merged

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&v=4)](/thboop)

`[handle value escaping](/actions/runner/pull/2107/commits/e7e4f21214195aefa1d88426a6a44737c8f615ab "handle value escaping")`

`[e7e4f21](/actions/runner/pull/2107/commits/e7e4f21214195aefa1d88426a6a44737c8f615ab)`

 [![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop)
[thboop](/thboop)
[force-pushed](/actions/runner/compare/b6b210e4fcdd10468bbc7af07fdae7db61cb7590..e7e4f21214195aefa1d88426a6a44737c8f615ab)
the
thboop/hotfix

branch
from
[`b6b210e`](/actions/runner/commit/b6b210e4fcdd10468bbc7af07fdae7db61cb7590) to
[`e7e4f21`](/actions/runner/commit/e7e4f21214195aefa1d88426a6a44737c8f615ab)  [Compare](/actions/runner/compare/b6b210e4fcdd10468bbc7af07fdae7db61cb7590..e7e4f21214195aefa1d88426a6a44737c8f615ab)
[September 7, 2022 19:08](#event-7341501909)

[![fhammerl](https://avatars.githubusercontent.com/u/31069338?s=60&v=4)](/fhammerl)

**[fhammerl](/fhammerl)**
reviewed
[Sep 8, 2022](#pullrequestreview-1100627053)

 [View reviewed changes](/actions/runner/pull/2107/files/e7e4f21214195aefa1d88426a6a44737c8f615ab)

[src/Runner.Worker/Container/DockerUtil.cs](/actions/runner/pull/2107/files/1ceed23e0cce79688fcf5f8bdb6c71009bddd4b8..e7e4f21214195aefa1d88426a6a44737c8f615ab#diff-ffbd563fd8da0613bfd743427b4f1b94cceefd9cb67e827ab8f800c5557c3748)
Outdated

|  |  | // https://docs.microsoft.com/en-us/dotnet/api/system.environment.getcommandlineargs?redirectedfrom=MSDN&view=net-6.0#remarks |
| --- | --- | --- |
|  |  |  |
|  |  | // First, find any \ followed by a " and double the number of \ + 1. |
|  |  | value = Regex.Replace(value, @"(\\\*)" + "\"", @"$1$1\" + "\""); |

Copy link

Contributor

### @fhammerl **[fhammerl](/fhammerl)** [Sep 8, 2022](#discussion_r965873597)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

NIT: formatting

Sorry, something went wrong.

All reactions

[![fhammerl](https://avatars.githubusercontent.com/u/31069338?s=60&v=4)](/fhammerl)

**[fhammerl](/fhammerl)**
approved these changes
[Sep 8, 2022](#pullrequestreview-1100635460)

 [View reviewed changes](/actions/runner/pull/2107/files/e7e4f21214195aefa1d88426a6a44737c8f615ab)

Copy link

Contributor

### @fhammerl **[fhammerl](/fhammerl)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

LGTM'

Sorry, something went wrong.

All reactions

[![TingluoHuang](https://avatars.githubusercontent.com/u/1750815?s=60&v=4)](/TingluoHuang)

**[TingluoHuang](/TingluoHuang)**
reviewed
[Sep 8, 2022](#pullrequestreview-1100889860)

 [View reviewed changes](/actions/runner/pull/2107/files/e7e4f21214195aefa1d88426a6a44737c8f615ab)

[src/Runner.Worker/Container/DockerUtil.cs](/actions/runner/pull/2107/files/e7e4f21214195aefa1d88426a6a44737c8f615ab#diff-ffbd563fd8da0613bfd743427b4f1b94cceefd9cb67e827ab8f800c5557c3748)
Outdated

|  |  | value = Regex.Replace(value, @"(\\\*)" + "\"", @"$1$1\" + "\""); |
| --- | --- | --- |
|  |  | // Next, what if it ends in `\`, it would escape the end quote. So, we need to detect that at the end of the string and perform the same escape |
|  |  | // Luckily, we can just use the $ character with detects the end of string in regex |
|  |  | value = Regex.Replace(value, @"(\\+)$", @"$1$1"); |

Copy link

Member

### @TingluoHuang **[TingluoHuang](/TingluoHuang)** [Sep 8, 2022](#discussion_r966067090)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

can we compile these regexes?

Sorry, something went wrong.

All reactions

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&v=4)](/thboop)

`[compile regex for runtime perf improvements](/actions/runner/pull/2107/commits/b3771255ac1becbf0a0e3759f7c47c87b7065b69 "compile regex for runtime perf improvements")`

`[b377125](/actions/runner/pull/2107/commits/b3771255ac1becbf0a0e3759f7c47c87b7065b69)`

[![TingluoHuang](https://avatars.githubusercontent.com/u/1750815?s=60&v=4)](/TingluoHuang)

**[TingluoHuang](/TingluoHuang)**
reviewed
[Sep 8, 2022](#pullrequestreview-1101106777)

 [View reviewed changes](/actions/runner/pull/2107/files/b3771255ac1becbf0a0e3759f7c47c87b7065b69)

[src/Runner.Worker/Container/DockerUtil.cs](/actions/runner/pull/2107/files/b3771255ac1becbf0a0e3759f7c47c87b7065b69#diff-ffbd563fd8da0613bfd743427b4f1b94cceefd9cb67e827ab8f800c5557c3748)

|  |  | @@ -6,6 +6,9 @@ namespace GitHub.Runner.Worker.Container | |
| --- | --- | --- | --- |
|  |  | { |
|  |  | public class DockerUtil |
|  |  | { |
|  |  | private static readonly Regex QuoteEscape = new Regex(@"(\\\*)" + "\"", RegexOptions.Compiled); |

Copy link

Member

### @TingluoHuang **[TingluoHuang](/TingluoHuang)** [Sep 8, 2022](#discussion_r966214287)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Suggested change

|  | private static readonly Regex QuoteEscape = new Regex(@"(\\\*)" + "\"", RegexOptions.Compiled); |
| --- | --- |
|  | private static readonly Regex QuoteEscape = new Regex(@"(\\\*)\"", RegexOptions.Compiled); |

Sorry, something went wrong.

All reactions

Copy link

Member

### @TingluoHuang **[TingluoHuang](/TingluoHuang)** [Sep 8, 2022](#discussion_r966216063)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

you can ignore me if the original way was for readability.

Sorry, something went wrong.

All reactions

[![TingluoHuang](https://avatars.githubusercontent.com/u/1750815?s=60&v=4)](/TingluoHuang)

**[TingluoHuang](/TingluoHuang)**
approved these changes
[Sep 8, 2022](#pullrequestreview-1101108030)

 [View reviewed changes](/actions/runner/pull/2107/files/b3771255ac1becbf0a0e3759f7c47c87b7065b69)

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop)
[thboop](/thboop)
merged commit [`96f4f5e`](/actions/runner/commit/96f4f5e76e5b033ee874429f2df541a343ade3c8)
into
releases/m296

[Sep 8, 2022](https://github.com/actions/runner/pull/2107#event-7349988951)

 [![@thboop](https://avatars.githubusercontent.com/u/52323235?s=40&u=a3fd80e41b3278e70bcbfde45d6ca54b63354cc9&v=4)](/thboop)
[thboop](/thboop)
deleted the
thboop/hotfix

branch
[September 8, 2022 17:36](#event-7349989099)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Factions%2Frunner%2Fpull%2F2107)

Reviewers

[![@TingluoHuang](https://avatars.githubusercontent.com/u/1750815?s=40&v=4)](/TingluoHuang) [TingluoHuang](/TingluoHuang)

TingluoHuang approved these changes

[![@fhammerl](https://avatars.githubusercontent.com/u/31069338?s=40&v=4)](/fhammerl) [fhammerl](/fhammerl)

fhammerl approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@thboop](https://avatars.githubusercontent.com/u/52323235?s=52&v=4)](/thboop) [![@TingluoHuang](https://avatars.githubusercontent.com/u/1750815?s=52&v=4)](/TingluoHuang) [![@fhammerl](https://avatars.githubusercontent.com/u/31069338?s=52&v=4)](/fhammerl)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_79ec9c4e_20250114_223336.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Factions%2Frunner%2Fsecurity%2Fadvisories%2FGHSA-2c6m-6gqh-6qg3)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Factions%2Frunner%2Fsecurity%2Fadvisories%2FGHSA-2c6m-6gqh-6qg3)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=actions%2Frunner)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[actions](/actions)
/
**[runner](/actions/runner)**
Public

* [Notifications](/login?return_to=%2Factions%2Frunner) You must be signed in to change notification settings
* [Fork
  993](/login?return_to=%2Factions%2Frunner)
* [Star
   5k](/login?return_to=%2Factions%2Frunner)

* [Code](/actions/runner)
* [Issues
  400](/actions/runner/issues)
* [Pull requests
  102](/actions/runner/pulls)
* [Discussions](/actions/runner/discussions)
* [Actions](/actions/runner/actions)
* [Security](/actions/runner/security)
* [Insights](/actions/runner/pulse)

Additional navigation options

* [Code](/actions/runner)
* [Issues](/actions/runner/issues)
* [Pull requests](/actions/runner/pulls)
* [Discussions](/actions/runner/discussions)
* [Actions](/actions/runner/actions)
* [Security](/actions/runner/security)
* [Insights](/actions/runner/pulse)

# Docker Command Escaping in the GitHub Actions Runner

Moderate

[thboop](/thboop)
published
GHSA-2c6m-6gqh-6qg3
Oct 24, 2022

## Package

Actions Runner
(GitHub)

## Affected versions

< 2.296.1

## Patched versions

2.296.2, 2.293.1, 2.289.4, 2.285.2, 2.283.4

## Description

### Impact

The actions runner invokes the docker cli directly in order to run job containers, service containers, or container actions. A bug in the logic for how the environment is encoded into these docker commands was discovered that allows an input to escape the environment variable and modify that docker command invocation directly. Jobs that use [container actions](https://docs.github.com/en/actions/creating-actions/creating-a-docker-container-action), [job containers](https://docs.github.com/en/actions/using-jobs/running-jobs-in-a-container), or [service containers](https://docs.github.com/en/actions/using-containerized-services/about-service-containers) alongside untrusted user inputs in environment variables may be vulnerable.

### Patches

The Actions Runner has been patched, both on `github.com` and hotfixes for GHES and GHAE customers. Please update to one of the following versions of the runner:

* 2.296.2
* 2.293.1
* 2.289.4
* 2.285.2
* 2.283.4

GHES and GHAE customers may want to patch their instance in order to have their runners automatically upgrade to these new runner versions.

### Workarounds

You may want to consider removing any container actions, job containers, or service containers from your jobs until you are able to upgrade your runner versions.

### For more information

If you have any questions or comments about this advisory:

* Open an issue in [the actions runner](https://github.com/actions/runner)

### Severity

Moderate

### CVE ID

CVE-2022-39321

### Weaknesses

No CWEs

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


