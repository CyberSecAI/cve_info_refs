=== Content from www.openmicroscopy.org_072d4d39_20250114_181306.html ===


* [![OME logo](/img/logos/ome-main-nav.svg)](/index.html)
* [![OME logo](/img/logos/ome-logomark.svg)](/index.html)
* [About Us](/about/)
  + [Overview](/about/)
  + [OME Teams](/teams/)
  + [Contributors](/contributors/)
  + [Commercial Partners](/commercial-partners/)
  + [Licensing](/licensing/)
  + [Citing OME](/citing-ome/)
  + [Artwork](/artwork/)
  + [Training](/training/)
  + [OME 2024](/events/ome-community-meeting-2024/)
* [News](/news/)
  + [Overview](/news/)
  + [Announcements](/announcements/)
  + [Events](/events/)
  + [Minutes](/minutes/)
  + [Security](/security/)
  + [Careers](/careers/)
  + [Blog](/blog/)

* [Products](/products/)
  + [Overview](/products/)
  + [OMERO](/omero/)
  + [Bio-Formats](/bio-formats/)
  + [OME Files](/ome-files/)
* [Support](/support/)
  + [Overview](/support/)
  + [Security](/security/)
  + [Training](/training/)
* [Docs](/docs/)
* [Explore](/explore/)
* [Explore](/explore/)

# 2021-SV3 XSS vectors

affects OMERO.web versions prior to 5.11.0, OMERO.figure versions prior to 4.4.1

---

 [back to Advisories](/security/advisories/)

---

### Synopsis

Inconsistent input sanitization leads to XSS vectors.

### Background

A variety of templates do not perform proper sanitization through HTML escaping.
Due to the lack of sanitization and use of jQuery.html(), there are a whole host of XSS possibilities with specially crafted input to a variety of fields.
 setting.

This vulnerability is identified as [CVE-2021-41132](https://nvd.nist.gov/vuln/detail/CVE-2021-41132) and
[GHSA-g67g-hvc3-xmvf](https://github.com/advisories/GHSA-g67g-hvc3-xmvf).

### Affected Packages

OMERO.web before 5.11.0 and OMERO.figure before 4.4.1.

### Impact

Low severity.

### Resolution

All OMERO.web deployments should be upgraded to at least 5.11.0. All OMERO.figure deployments should be upgraded to at least 4.4.1.

### Thanks

Lachlan Horsey, Security Engineer at Griffith Cybersec team for notifying the OME team of this security issue via `security@openmicroscopy.org`.

---

 [back to top](#top-of-page)

---

[![OME logo](/img/logos/ome-main-nav.svg)](/index.html)

© 2005-2025 University of Dundee & Open Microscopy Environment. [Creative Commons Attribution 4.0 International License](https://creativecommons.org/licenses/by/4.0/)

OME source code is available under the [GNU General public license](https://www.gnu.org/copyleft/gpl.html) or more permissive open source licenses, or through commercial license from [Glencoe Software Inc.](https://www.glencoesoftware.com)
OME, Bio-Formats, OMERO, IDR and their associated logos are trademarks of [Glencoe Software Inc.](https://www.glencoesoftware.com), which holds these marks to protect them on behalf of the OME community.

[ [Site Map](/site-map/) ]

Version: 2025.01.08

###### Learn About Us

* [Who We Are](/about/)
* [Our Team](/teams/)
* [What We Can Do](/explore/)
* [What Weâre Up To](/news/)
* [OME 2024](/events/ome-community-meeting-2024/)

###### Try Our Products

* [OMERO Download](/omero/downloads/)
* [Bio-Formats Download](/bio-formats/downloads)
* [OME Files Download](/ome-files/downloads)

###### Knowledge Base

* [Support](/support/)
* [Documentation](/docs/)
* [User Guides](https://omero-guides.readthedocs.io/)
* [Forum](https://www.openmicroscopy.org/forums)
* [Security Advisories](https://www.openmicroscopy.org/security/advisories/)

###### OME Public

* [Twitter](https://twitter.com/openmicroscopy)
* [LinkedIn](https://www.linkedin.com/company/ome---open-microscopy-environment)
* [Facebook](https://www.facebook.com/openmicroscopy)
* [On the Web](/on-the-web/)



=== Content from github.com_8ff599b4_20250114_181305.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fome%2Fomero-web%2Fsecurity%2Fadvisories%2FGHSA-g67g-hvc3-xmvf)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fome%2Fomero-web%2Fsecurity%2Fadvisories%2FGHSA-g67g-hvc3-xmvf)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=ome%2Fomero-web)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ome](/ome)
/
**[omero-web](/ome/omero-web)**
Public

* [Notifications](/login?return_to=%2Fome%2Fomero-web) You must be signed in to change notification settings
* [Fork
  31](/login?return_to=%2Fome%2Fomero-web)
* [Star
   17](/login?return_to=%2Fome%2Fomero-web)

* [Code](/ome/omero-web)
* [Issues
  127](/ome/omero-web/issues)
* [Pull requests
  10](/ome/omero-web/pulls)
* [Actions](/ome/omero-web/actions)
* [Projects
  0](/ome/omero-web/projects)
* [Security](/ome/omero-web/security)
* [Insights](/ome/omero-web/pulse)

Additional navigation options

* [Code](/ome/omero-web)
* [Issues](/ome/omero-web/issues)
* [Pull requests](/ome/omero-web/pulls)
* [Actions](/ome/omero-web/actions)
* [Projects](/ome/omero-web/projects)
* [Security](/ome/omero-web/security)
* [Insights](/ome/omero-web/pulse)

# Inconsistent input sanitization leads to XSS vectors

Low

[sbesson](/sbesson)
published
GHSA-g67g-hvc3-xmvf
Oct 14, 2021

## Package

pip

 omero-web
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

< 5.11.0

## Patched versions

5.11.0

## Description

### Background

A variety of templates do not perform proper sanitization through HTML escaping.

Due to the lack of sanitization and use of `jQuery.html()`, there are a whole host of XSS possibilities with specially crafted input to a variety of fields.

### Impact

OMERO.web before 5.11.0 and OMERO.figure before 4.4.1.

### Patches

Users should upgrade OMERO.web to 5.11.0 or higher and OMERO.figure to 4.4.1 or higher.

### Workarounds

None

## Credit

Lachlan Horsey, Security Engineer at Griffith Cybersec team

### References

* <https://www.openmicroscopy.org/security/advisories/2021-SV3/>

### For more information

If you have any questions or comments about this advisory:

* Open an issue in [omero-web](https://github.com/ome/omero-web)
* Email us at security@openmicroscopy.org

### Severity

Low

### CVE ID

CVE-2021-41132

### Weaknesses

No CWEs

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_a6e1b2b5_20250114_181304.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fome%2Fomero-web%2Fcommit%2F0168067accde5e635341b3c714b1d53ae92ba424)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fome%2Fomero-web%2Fcommit%2F0168067accde5e635341b3c714b1d53ae92ba424)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=ome%2Fomero-web)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ome](/ome)
/
**[omero-web](/ome/omero-web)**
Public

* [Notifications](/login?return_to=%2Fome%2Fomero-web) You must be signed in to change notification settings
* [Fork
  31](/login?return_to=%2Fome%2Fomero-web)
* [Star
   17](/login?return_to=%2Fome%2Fomero-web)

* [Code](/ome/omero-web)
* [Issues
  127](/ome/omero-web/issues)
* [Pull requests
  10](/ome/omero-web/pulls)
* [Actions](/ome/omero-web/actions)
* [Projects
  0](/ome/omero-web/projects)
* [Security](/ome/omero-web/security)
* [Insights](/ome/omero-web/pulse)

Additional navigation options

* [Code](/ome/omero-web)
* [Issues](/ome/omero-web/issues)
* [Pull requests](/ome/omero-web/pulls)
* [Actions](/ome/omero-web/actions)
* [Projects](/ome/omero-web/projects)
* [Security](/ome/omero-web/security)
* [Insights](/ome/omero-web/pulse)

## Commit

[Permalink](/ome/omero-web/commit/0168067accde5e635341b3c714b1d53ae92ba424)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Fix issues with inconsistency in input sanitisation leading to XSS ve…

[Browse files](/ome/omero-web/tree/0168067accde5e635341b3c714b1d53ae92ba424)
Browse the repository at this point in the history

```
…ctors
```

* Loading branch information

[![@chris-allan](https://avatars.githubusercontent.com/u/487082?s=40&v=4)](/chris-allan) [![@jburel](https://avatars.githubusercontent.com/u/1022396?s=40&v=4)](/jburel)

[chris-allan](/ome/omero-web/commits?author=chris-allan "View all commits by chris-allan")
authored and
[jburel](/ome/omero-web/commits?author=jburel "View all commits by jburel")
committed
Oct 7, 2021

1 parent
[60bcdd9](/ome/omero-web/commit/60bcdd9cce315169811ea3f8c72fc8228e9174ad)

commit 0168067

 Show file tree

 Hide file tree

Showing
**26 changed files**
with
**156 additions**
and
**162 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* CHANGELOG.md
  [CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
* omeroweb

  + webadmin/templates/webadmin/includes

    - omeroweb/webadmin/templates/webadmin/includes/drivespaceStats.js
      [drivespaceStats.js](#diff-cf880d92c0e4e4e1757989b6b5af2cf41707b414cb43d666c98bcbfbc1d59350)
  + webclient

    - static/webclient/javascript

      * omeroweb/webclient/static/webclient/javascript/ome.chgrp.js
        [ome.chgrp.js](#diff-7ca90ed436a2e8575c6f6156bf17382387decf4ea05511d3e5f0b5d5742c4a26)
      * omeroweb/webclient/static/webclient/javascript/ome.chown.js
        [ome.chown.js](#diff-57edb94a3745c0a62eb042812f8e2bef7bcbbd6f0928fb30f3b2be693dad5052)
      * omeroweb/webclient/static/webclient/javascript/ome.right\_panel\_comments\_pane.js
        [ome.right\_panel\_comments\_pane.js](#diff-60eec05dedbecd4ed9e2f9ec8be082a11eb8dda6fd77c15cc7df40c5bba3194e)
      * omeroweb/webclient/static/webclient/javascript/ome.right\_panel\_customanns\_pane.js
        [ome.right\_panel\_customanns\_pane.js](#diff-4f4f1e791c3e1574bfe658ac942d8a03c4732df8f34917eb6e945e0620a8164b)
      * omeroweb/webclient/static/webclient/javascript/ome.right\_panel\_fileanns\_pane.js
        [ome.right\_panel\_fileanns\_pane.js](#diff-09c2221f74a15270438ec7c14c1fe74aac60a3a51101a042ede1d5c9362dc48e)
      * omeroweb/webclient/static/webclient/javascript/ome.right\_panel\_tags\_pane.js
        [ome.right\_panel\_tags\_pane.js](#diff-90dab1ea486891758c9bf45b365c11846205ebd50365bec3698a0a011cf7de53)
      * omeroweb/webclient/static/webclient/javascript/ome.tagging\_form.js
        [ome.tagging\_form.js](#diff-f44bc0d2fd603949da5bd0cf9aa0331262682f30f486c190ac1c65cf57f1264e)
      * omeroweb/webclient/static/webclient/javascript/ome.thumbnail\_figure.js
        [ome.thumbnail\_figure.js](#diff-81c28de02fd30e75b6499d5b70d2b212508e7297a8eebd3d8c6445e277b4294b)
    - templates/webclient

      * annotations

        + omeroweb/webclient/templates/webclient/annotations/comments\_underscore.html
          [comments\_underscore.html](#diff-3a870a64ab99b38673b6547644e9d71a3b13aadc922c8a7a4406cd38e9e56b42)
        + omeroweb/webclient/templates/webclient/annotations/customanns\_underscore.html
          [customanns\_underscore.html](#diff-3254678eecc58062bcc507e084ca6259b9a68be20827a9e7505d9b3acedfbd07)
        + omeroweb/webclient/templates/webclient/annotations/fileanns\_underscore.html
          [fileanns\_underscore.html](#diff-0bf206c54e68148aa77806a258c386c0d20b38f5dc14f5ad3ce3ffb982b308ac)
        + omeroweb/webclient/templates/webclient/annotations/mapanns\_underscore.html
          [mapanns\_underscore.html](#diff-0db0be1b0d05b28934b8121eed483177d40b457d799c773e3e1c51d76cc95327)
        + omeroweb/webclient/templates/webclient/annotations/metadata\_general.html
          [metadata\_general.html](#diff-802a198856e11df68fbc36daff7553368cc0701cbe139dff12fed464c43d5149)
        + omeroweb/webclient/templates/webclient/annotations/tags\_underscore.html
          [tags\_underscore.html](#diff-0cb40442eb6398aa12e0da497648c5509537097d4a043415808f384249b7ccdd)
      * data

        + omeroweb/webclient/templates/webclient/data/icon\_thumbnails\_underscore.html
          [icon\_thumbnails\_underscore.html](#diff-f2c0d8e6ce1e1664c64a3300adfe5a6f28d33aead445d092e546b4feef65be1d)
        + includes

          - omeroweb/webclient/templates/webclient/data/includes/center\_plugin.thumbs.js.html
            [center\_plugin.thumbs.js.html](#diff-2db39e7765c6489f95ee8ee135fbcc86f8014b139f70c30d0aa79a7a95e669e3)
        + omeroweb/webclient/templates/webclient/data/plate.html
          [plate.html](#diff-a2fcfe8f011c64e23bfdbe6d57166c4ec69e09deca143358cd0db97a1e9cf694)
      * scripts

        + omeroweb/webclient/templates/webclient/scripts/upload\_script.html
          [upload\_script.html](#diff-77a5b4327a4ee9904d47baf97505a6017d811e62cce5cf7cdc07db760e2047dd)
    - omeroweb/webclient/views.py
      [views.py](#diff-cf868df601772fb3f526d84f7dd4465d99e99d5d9e8ac75b6ac0ef267a4f67e9)
  + webgateway

    - static/webgateway/js

      * omeroweb/webgateway/static/webgateway/js/ome.popup.js
        [ome.popup.js](#diff-e0a07a7b28354226243a09f6a1f61248525485b975495ae580e23fa144af96b4)
      * omeroweb/webgateway/static/webgateway/js/ome.roidisplay.js
        [ome.roidisplay.js](#diff-f66e5a242e493ebfc2b58b6a8f4e3562d98a61b22c3c6a9b8bfdaa1dc81bc6d8)
      * omeroweb/webgateway/static/webgateway/js/ome.spwgridview.js
        [ome.spwgridview.js](#diff-286d9e668f1eb9bb5b154981b59be80e5aedf799ae60b98849a6139e4efe9377)
      * omeroweb/webgateway/static/webgateway/js/omero\_image.js
        [omero\_image.js](#diff-78bb78814d4e250a6d852ced7f64d3bac6109fdf4339237aeb6a8892167e70ab)
    - templates/webgateway/viewport

      * omeroweb/webgateway/templates/webgateway/viewport/omero\_image.html
        [omero\_image.html](#diff-f43695a18f62af3e54604a5f4f1934a14928f7451dfc896e8ecdfaf30f02e135)

## There are no files selected for viewing

6 changes: 6 additions & 0 deletions

6
[CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed "CHANGELOG.md")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/CHANGELOG.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -1,4 +1,10 @@ |
|  |  |  |
|  |  | 5.11.0 (October 2021) |
|  |  | --------------------- |
|  |  |  |
|  |  | - Security vulnerability fixes for |
|  |  | [2021-SV3](https://www.openmicroscopy.org/security/advisories/2021-SV3) |
|  |  |  |
|  |  | 5.11.0.rc1 (September 2021) |
|  |  | --------------------------- |
|  |  |  |
| Expand Down | |  |

3 changes: 2 additions & 1 deletion

3
[omeroweb/webadmin/templates/webadmin/includes/drivespaceStats.js](#diff-cf880d92c0e4e4e1757989b6b5af2cf41707b414cb43d666c98bcbfbc1d59350 "omeroweb/webadmin/templates/webadmin/includes/drivespaceStats.js")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/omeroweb/webadmin/templates/webadmin/includes/drivespaceStats.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -18,7 +18,7 @@ |
|  |  | for(i=0; i<chart\_data.length; i++) { |
|  |  | rowData = chart\_data[i]; |
|  |  | rowId = typeof rowData.userId != 'undefined' ? rowData.userId : rowData.groupId; |
|  |  | tableRows.push('<tr><td class="link">' + rowData.label + '(id:'+ rowId +')</td>'); |
|  |  | tableRows.push('<tr><td class="link">' + rowData.label.escapeHTML() + '(id:'+ rowId +')</td>'); |
|  |  | tableRows.push('<td class="link">' + rowData.data.filesizeformat() + '</td></tr>'); |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -50,6 +50,7 @@ |
|  |  |  |
|  |  | for(i=0; i<data.length; i++) { |
|  |  | var slice = data[i]; |
|  |  | slice.label = slice.label.escapeHTML(); |
|  |  | if(i === MAX\_SLICES){ |
|  |  | chart\_data.push({label:'Others', data:slice.data}); |
|  |  | } else if (i > MAX\_SLICES) { |
| Expand Down | |  |

6 changes: 3 additions & 3 deletions

6
[omeroweb/webclient/static/webclient/javascript/ome.chgrp.js](#diff-7ca90ed436a2e8575c6f6156bf17382387decf4ea05511d3e5f0b5d5742c4a26 "omeroweb/webclient/static/webclient/javascript/ome.chgrp.js")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/omeroweb/webclient/static/webclient/javascript/ome.chgrp.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -62,7 +62,7 @@ $(function() { |
|  |  | data\_owners = data.owners; // save for later |
|  |  | var ownernames = []; |
|  |  | for (var o=0; o<data.owners.length; o++) {ownernames.push(data.owners[o][1]);} |
|  |  | var headerTxt = "<p>Move data owned by " + ownernames.join(", ") + ".</p>" + |
|  |  | var headerTxt = "<p>Move data owned by " + ownernames.join(", ").escapeHTML() + ".</p>" + |
|  |  | "<h1>Please choose target group below:</h1>"; |
|  |  | $group\_chooser.append(headerTxt); |
|  |  |  |
| Expand All | | @@ -72,7 +72,7 @@ $(function() { |
|  |  | var g = data.groups[i]; |
|  |  | html += "<div class='chgrpGroup' data-gid='"+ g.id + "'>"; |
|  |  | html += "<img src='" + permsIcon(g.perms) + "'/>"; |
|  |  | html += g.name + "<hr></div>"; |
|  |  | html += g.name.escapeHTML() + "<hr></div>"; |
|  |  | } |
|  |  | // If no target groups found... |
|  |  | if (data.groups.length === 0) { |
| Expand Down  Expand Up | | @@ -407,7 +407,7 @@ $(function() { |
|  |  | if (count === 1) otype = otype.slice(0, -1); // remove s |
|  |  | var namesList = [], names; |
|  |  | unlinked.forEach(function (u) { |
|  |  | namesList.push(u.name); |
|  |  | namesList.push(u.name.escapeHTML()); |
|  |  | }); |
|  |  | names = namesList.join(", "); |
|  |  | names = " <i title='" + namesList.join("\n") + "'>(" + names.slice(0, 40) + (names.length > 40 ? "..." : "") + ")</i>"; |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[omeroweb/webclient/static/webclient/javascript/ome.chown.js](#diff-57edb94a3745c0a62eb042812f8e2bef7bcbbd6f0928fb30f3b2be693dad5052 "omeroweb/webclient/static/webclient/javascript/ome.chown.js")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/omeroweb/webclient/static/webclient/javascript/ome.chown.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -37,7 +37,7 @@ $(function() { |
|  |  | var templateText = ` |
|  |  | <!-- Hidden fields for objects. e.g. name='Image' value='1,2,3' --> |
|  |  | <% \_.each(selobjs, function(obj, idx) { %> |
|  |  | <input name='<%= obj.split("=")[0] %>' value='<%= obj.split("=")[1] %>' hidden/> |
|  |  | <input name='<%- obj.split("=")[0] %>' value='<%- obj.split("=")[1] %>' hidden/> |
|  |  | <% }) %> |
|  |  |  |
|  |  | <!-- List target new owners --> |
| Expand All | | @@ -50,7 +50,7 @@ $(function() { |
|  |  | <% \_.each(exps, function(exp, idx) { %> |
|  |  | <label> |
|  |  | <input name='owner\_id' type='radio' value='<%= exp['@id'] %>'/> |
|  |  | <%= exp.FirstName%> <%= exp.LastName %> |
|  |  | <%- exp.FirstName%> <%- exp.LastName %> |
|  |  | </label> |
|  |  | <br/> |
|  |  | <% }) %> |
| Expand Down | |  |

1 change: 0 additions & 1 deletion

1
[omeroweb/webclient/static/webclient/javascript/ome.right\_panel\_comments\_pane.js](#diff-60eec05dedbecd4ed9e2f9ec8be082a11eb8dda6fd77c15cc7df40c5bba3194e "omeroweb/webclient/static/webclient/javascript/ome.right_panel_comments_pane.js")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/omeroweb/webclient/static/webclient/javascript/ome.right_panel_comments_pane.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -110,7 +110,6 @@ var CommentsPane = function CommentsPane($element, opts) { |
|  |  | ann.link.owner = experimenters[ann.link.owner.id]; |
|  |  | } |
|  |  | ann.addedBy = [ann.link.owner.id]; |
|  |  | ann.textValue = \_.escape(ann.textValue); |
|  |  | return ann; |
|  |  | }); |
|  |  |  |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[omeroweb/webclient/static/webclient/javascript/ome.right\_panel\_customanns\_pane.js](#diff-4f4f1e791c3e1574bfe658ac942d8a03c4732df8f34917eb6e945e0620a8164b "omeroweb/webclient/static/webclient/javascript/ome.right_panel_customanns_pane.js")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/omeroweb/webclient/static/webclient/javascript/ome.right_panel_customanns_pane.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -88,7 +88,7 @@ var CustomAnnsPane = function CustomAnnsPane($element, opts) { |
|  |  | var attrs = ['textValue', 'timeValue', 'termValue', 'longValue', 'doubleValue', 'boolValue']; |
|  |  | attrs.forEach(function(a){ |
|  |  | if (ann[a] !== undefined){ |
|  |  | ann.value = \_.escape(ann[a]); |
|  |  | ann.value = ann[a]; |
|  |  | } |
|  |  | }); |
|  |  | if (objects.length > 1) { |
| Expand Down | |  |

1 change: 0 additions & 1 deletion

1
[omeroweb/webclient/static/webclient/javascript/ome.right\_panel\_fileanns\_pane.js](#diff-09c2221f74a15270438ec7c14c1fe74aac60a3a51101a042ede1d5c9362dc48e "omeroweb/webclient/static/webclient/javascript/ome.right_panel_fileanns_pane.js")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/omeroweb/webclient/static/webclient/javascript/ome.right_panel_fileanns_pane.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -164,7 +164,6 @@ var FileAnnsPane = function FileAnnsPane($element, opts) { |
|  |  | } |
|  |  | // AddedBy IDs for filtering |
|  |  | ann.addedBy = [ann.link.owner.id]; |
|  |  | ann.description = \_.escape(ann.description); |
|  |  | ann.file.size = ann.file.size !== null ? ann.file.size.filesizeformat() : ""; |
|  |  | return ann; |
|  |  | }); |
| Expand Down | |  |

6 changes: 3 additions & 3 deletions

6
[omeroweb/webclient/static/webclient/javascript/ome.right\_panel\_tags\_pane.js](#diff-90dab1ea486891758c9bf45b365c11846205ebd50365bec3698a0a011cf7de53 "omeroweb/webclient/static/webclient/javascript/ome.right_panel_tags_pane.js")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/omeroweb/webclient/static/webclient/javascript/ome.right_panel_tags_pane.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -143,8 +143,8 @@ var TagPane = function TagPane($element, opts) { |
|  |  | } |
|  |  | // AddedBy IDs for filtering |
|  |  | tag.addedBy = [tag.link.owner.id]; |
|  |  | tag.textValue = \_.escape(tag.textValue); |
|  |  | tag.description = \_.escape(tag.description); |
|  |  | tag.textValue = tag.textValue; |
|  |  | tag.description = tag.description; |
|  |  | tag.canRemove = tag.link.permissions.canDelete; |
|  |  | return tag; |
|  |  | }); |
| Expand All | | @@ -158,7 +158,7 @@ var TagPane = function TagPane($element, opts) { |
|  |  | var tagId = tag.id, |
|  |  | linkOwner = tag.link.owner.id; |
|  |  | if (summary[tagId] === undefined) { |
|  |  | summary[tagId] = {'textValue': tag.textValue, |
|  |  | summary[tagId] = {'textValue': \_.escape(tag.textValue), |
|  |  | 'id': tag.id, |
|  |  | 'canRemove': false, |
|  |  | 'canRemoveCount': 0, |
| Expand Down | |  |

60 changes: 23 additions & 37 deletions

60
[omeroweb/webclient/static/webclient/javascript/ome.tagging\_form.js](#diff-f44bc0d2fd603949da5bd0cf9aa0331262682f30f486c190ac1c65cf57f1264e "omeroweb/webclient/static/webclient/javascript/ome.tagging_form.js")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/omeroweb/webclient/static/webclient/javascript/ome.tagging_form.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -98,8 +98,9 @@ var tagging\_form = function( |
|  |  | for (var id in all\_tags) { |
|  |  | var tag = all\_tags[id]; |
|  |  | if (tag && !(id in child\_tags)) { |
|  |  | html += create\_tag\_html(tag.t, tag.d, owners[tag.o], tag.i, |
|  |  | null, tag.s !== 0); |
|  |  | html += create\_tag\_html( |
|  |  | tag.t, tag.d, tag.i, null, tag.s !== 0 |
|  |  | ); |
|  |  | tag.sort\_key = tag.t.toLowerCase(); |
|  |  | if (tag.s) { |
|  |  | for (var sid in tag.s) { |
| Expand All | | @@ -108,8 +109,8 @@ var tagging\_form = function( |
|  |  | child.sort\_key = (tag.t.toLowerCase() + |
|  |  | child.t.toLowerCase()); |
|  |  | html += create\_tag\_html( |
|  |  | child.t, child.d, owners[child.o], child.i, |
|  |  | tag.i); |
|  |  | child.t, child.d, child.i, tag.i |
|  |  | ); |
|  |  | } |
|  |  | } |
|  |  | } |
| Expand All | | @@ -118,15 +119,7 @@ var tagging\_form = function( |
|  |  | div\_all\_tags.append(html); |
|  |  | // TODO This tooltip application is used until the extra data has loaded |
|  |  | // at which point the tooltips are updated and this handler is replaced? |
|  |  | $(".tag\_selection div").on('click', tag\_click).tooltip({ |
|  |  | track: false, |
|  |  | show: false, |
|  |  | hide: false, |
|  |  | items: '[data-content]', |
|  |  | content: function() { |
|  |  | return $(this).data('content'); |
|  |  | } |
|  |  | }); |
|  |  | $(".tag\_selection div").on('click', tag\_click); |
|  |  | }; |
|  |  |  |
|  |  | var update\_selected\_labels = function() { |
| Expand All | | @@ -145,7 +138,7 @@ var tagging\_form = function( |
|  |  | if (tagset) { |
|  |  | $("#id\_selected\_tag\_set").html( |
|  |  | "Add a new tag in <span class='tagset-title'>" + |
|  |  | tagset.text() + "</span> tag set and select it immediately:"); |
|  |  | tagset.text().escapeHTML() + "</span> tag set and select it immediately:"); |
|  |  | } else { |
|  |  | $("#id\_selected\_tag\_set").text( |
|  |  | "Add a new tag and select it immediately:"); |
| Expand All | | @@ -169,6 +162,7 @@ var tagging\_form = function( |
|  |  | track: false, |
|  |  | show: false, |
|  |  | hide: false, |
|  |  | items: '[data-id]', // Just needs an attribute that exists |
|  |  | content: title |
|  |  | }); |
|  |  | }; |
| Expand Down  Expand Up | | @@ -369,45 +363,35 @@ var tagging\_form = function( |
|  |  | } |
|  |  | }; |
|  |  |  |
|  |  | var encode\_html = function(text) { |
|  |  | return $('<div/>').text(text).html(); |
|  |  | }; |
|  |  |  |
|  |  | var create\_tag\_title = function(description, owner, tagset, link\_owner) { |
|  |  | var title = ""; |
|  |  | if (owner) { |
|  |  | title += "<b>Owner:</b> " + owner + "<br />"; |
|  |  | title += "<b>Owner:</b> " + owner.escapeHTML() + "<br />"; |
|  |  | } |
|  |  | if (link\_owner) { |
|  |  | title += "<b>Linked by:</b> " + link\_owner + "<br />"; |
|  |  | title += "<b>Linked by:</b> " + link\_owner.escapeHTML() + "<br />"; |
|  |  | } |
|  |  | if (description) { |
|  |  | title += "<b>Description:</b> " + description + "<br />"; |
|  |  | title += "<b>Description:</b> " + description.escapeHTML() + "<br />"; |
|  |  | } |
|  |  | if (tagset) { |
|  |  | title += "<b>Tag set:</b> " + tagset + "<br />"; |
|  |  | title += "<b>Tag set:</b> " + tagset.escapeHTML() + "<br />"; |
|  |  | } |
|  |  | return title; |
|  |  | }; |
|  |  |  |
|  |  | var create\_tag\_html = function(text, description, owner, id, parent\_id, |
|  |  | var create\_tag\_html = function(text, description, id, parent\_id, |
|  |  | is\_tagset) { |
|  |  | var cls = is\_tagset ? "alltags-tagset" : |
|  |  | (parent\_id ? "alltags-childtag" : "alltags-tag"); |
|  |  | var html = "<div class='" + cls + "' data-id='" + id + "'"; |
|  |  | var tagset; |
|  |  | if (parent\_id) { |
|  |  | html += " data-set='" + parent\_id + "'"; |
|  |  | tagset = all\_tags[parent\_id].t; |
|  |  | } |
|  |  | if (id < 0) { // new tag, save description |
|  |  | html += " data-description='" + encode\_html(description) + "'"; |
|  |  | html += " data-description='" + description.escapeHTML() + "'"; |
|  |  | } |
|  |  | var title = create\_tag\_title(description, owner, tagset); |
|  |  | // Add content even if it is empty |
|  |  | // and handle case for no tooltip in the tooltip code |
|  |  | html += " data-content='" + title.replace(/'/g, "&#39;") + "'"; |
|  |  | html += ">" + encode\_html(text) + "</div>"; |
|  |  | html += ">" + text.escapeHTML() + "</div>"; |
|  |  | return html; |
|  |  | }; |
|  |  |  |
| Expand Down  Expand Up | | @@ -633,7 +617,7 @@ var tagging\_form = function( |
|  |  | new\_tag\_counter -= 1; |
|  |  | var tagset\_id = (tagset ? parseInt(tagset.attr('data-id'), 10) : |
|  |  | false); |
|  |  | owners[me] = owners[me] || my\_name; |
|  |  | owners[me] = owners[me] || \_.unescape(my\_name); |
|  |  | all\_tags[new\_tag\_counter] = { |
|  |  | i: new\_tag\_counter, |
|  |  | d: description, |
| Expand All | | @@ -644,16 +628,18 @@ var tagging\_form = function( |
|  |  | '') + text.toLowerCase() |
|  |  | }; |
|  |  | var div = $(create\_tag\_html( |
|  |  | text, description, my\_name, new\_tag\_counter, |
|  |  | text, description, new\_tag\_counter, |
|  |  | tagset ? tagset.attr('data-id') : null)); |
|  |  | var title = create\_tag\_title( |
|  |  | description, \_.unescape(my\_name), |
|  |  | tagset\_id? all\_tags[tagset\_id].t : null |
|  |  | ); |
|  |  | div.addClass('ui-selected').on('click', tag\_click).tooltip({ |
|  |  | track: true, |
|  |  | show: false, |
|  |  | hide: false, |
|  |  | items: '[data-content]', |
|  |  | content: function() { |
|  |  | return $(this).data('content'); |
|  |  | } |
|  |  | items: '[data-id]', // Just needs an attribute that exists |
|  |  | content: title |
|  |  | }); |
|  |  | $("div.ui-selected", div\_selected\_tags).removeClass('ui-selected'); |
|  |  | div\_selected\_tags.append(div); |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[omeroweb/webclient/static/webclient/javascript/ome.thumbnail\_figure.js](#diff-81c28de02fd30e75b6499d5b70d2b212508e7297a8eebd3d8c6445e277b4294b "omeroweb/webclient/static/webclient/javascript/ome.thumbnail_figure.js")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/omeroweb/webclient/static/webclient/javascript/ome.thumbnail_figure.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -201,7 +201,7 @@ $(document).ready(function() { |
|  |  | // start a new container... |
|  |  | topLevelTag = tagData.tags[0] || tagsText; // Group under 1st tag (unless we have no tags) |
|  |  |  |
|  |  | $tr = $('<tr><th><h2>' + topLevelTag + '</h2></th></tr>'); |
|  |  | $tr = $('<tr><th><h2>' + topLevelTag.escapeHTML() + '</h2></th></tr>'); |
|  |  | $tr.appendTo($this); |
|  |  | $td = $('<td></td>').appendTo($tr); |
|  |  | } |
| Expand Down  Expand Up | | @@ -263,4 +263,4 @@ $(document).ready(function() { |
|  |  | } |
|  |  | }); |
|  |  |  |
|  |  | }); |
|  |  | }); |

26 changes: 13 additions & 13 deletions

26
[omeroweb/webclient/templates/webclient/annotations/comments\_underscore.html](#diff-3a870a64ab99b38673b6547644e9d71a3b13aadc922c8a7a4406cd38e9e56b42 "omeroweb/webclient/templates/webclient/annotations/comments_underscore.html")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/omeroweb/webclient/templates/webclient/annotations/comments_underscore.html)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,36 +1,36 @@ |
|  |  | <% \_.each(anns, function(ann) { %> |
|  |  | <div class="ann\_comment\_wrapper" data-added-by="<% print (ann.addedBy.join(',')) %>"> |
|  |  | <div class="ann\_comment\_wrapper" data-added-by="<% print(\_.escape(ann.addedBy.join(','))) %>"> |
|  |  |  |
|  |  | <div class="avatar"> |
|  |  | <img src="<%= webindex %>avatar/<%= ann.owner.id %>/" |
|  |  | alt="<%= ann.owner.firstName %> <%= ann.owner.lastName %>" |
|  |  | title="<%= ann.owner.firstName %> <%= ann.owner.lastName %>" /> |
|  |  | <img src="<%= webindex %>avatar/<%- ann.owner.id %>/" |
|  |  | alt="<%- ann.owner.firstName %> <%- ann.owner.lastName %>" |
|  |  | title="<%- ann.owner.firstName %> <%- ann.owner.lastName %>" /> |
|  |  | </div> |
|  |  |  |
|  |  | <div class="ann\_comment\_text tooltip"> |
|  |  | <div class="ann\_comment\_header"> |
|  |  | <strong> |
|  |  | <%= ann.owner.firstName %> <%= ann.owner.lastName %> |
|  |  | </strong> |
|  |  | <%- ann.owner.firstName %> <%- ann.owner.lastName %> |
|  |  | </strong> |
|  |  | at |
|  |  | <% print(OME.formatDate(ann.link.date)) %> |
|  |  | </div> |
|  |  |  |
|  |  |  |
|  |  | <% if (ann.permissions.canDelete) { %> |
|  |  | <img class='removeComment' id="<%= ann.id %>-comment" |
|  |  | <img class='removeComment' id="<%- ann.id %>-comment" |
|  |  | src="<%= static %>image/icon\_basic\_delete.png" |
|  |  | url='<%= webindex %>action/remove/comment/<%= ann.id %>/' |
|  |  | url='<%= webindex %>action/remove/comment/<%- ann.id %>/' |
|  |  | title="Delete comment"/> |
|  |  | <% } %> |
|  |  |  |
|  |  | <div class='commentText'><%= ann.textValue %></div> |
|  |  | <div class='commentText'><%- ann.textValue %></div> |
|  |  | </div> |
|  |  |  |
|  |  | <% if (ann.ns || ann.description) { %> |
|  |  | <span class="tooltip\_html" style='display:none'> |
|  |  | <b>ID:</b> <%= ann.id %><br /> |
|  |  | <% if (ann.ns) { %><b>Namespace:</b> <%= ann.ns %><br /><% } %> |
|  |  | <% if (ann.description) { %><b>Description:</b> <%= ann.description %><br /><% } %> |
|  |  | <b>ID:</b> <%- ann.id %><br /> |
|  |  | <% if (ann.ns) { %><b>Namespace:</b> <%- ann.ns %><br /><% } %> |
|  |  | <% if (ann.description) { %><b>Description:</b> <%- ann.description %><br /><% } %> |
|  |  | </span> |
|  |  | <% } %> |
|  |  |  |
| Expand Down | |  |

24 changes: 12 additions & 12 deletions

24
[omeroweb/webclient/templates/webclient/annotations/customanns\_underscore.html](#diff-3254678eecc58062bcc507e084ca6259b9a68be20827a9e7505d9b3acedfbd07 "omeroweb/webclient/templates/webclient/annotations/customanns_underscore.html")

Show comments

[View file](/ome/omero-web/blob/0168067accde5e635341b3c714b1d53ae92ba424/omeroweb/webclient/templates/webclient/annotations/customanns_underscore.html)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,31 +1,31 @@ |
|  |  |  |
|  |  | <% \_.each(anns, function(ann) { %> |
|  |  |  |
|  |  | <tr data-added-by="<% print (ann.addedBy.join(',')) %>"> |
|  |  | <th><%= ann.type %></th> |
|  |  | <tr data-added-by="<% print(\_.escape(ann.addedBy.join(','))) %>"> |
|  |  | <th><%- ann.type %></th> |
|  |  | <td> |
|  |  | <div class="tooltip"> |
|  |  | <% if (ann.type === 'Xml') { %> |
|  |  | <div><% print((ann.value + "").slice(0, 20)) %>...</div> |
|  |  | <div><% print(\_.escape((ann.value + "").slice(0, 20))) %>...</div> |
|  |  | <div class="show\_xml">Open in new window</div> |
|  |  | <div style="display: none"><%= ann.value %></div> |
|  |  | <div style="display: none"><%- ann.value %></div> |
|  |  | <% } else { %> |
|  |  | <div><%= ann.value %></div> |
|  |  | <div><%- ann.value %></div> |
|  |  | <% } %> |
|  |  | </div> |
|  |  |  |
|  |  |  |
|  |  | <span class="tooltip\_html" style='display:none'> |
|  |  | <b>ID:</b> <%= ann.id %><br /> |
|  |  | <% if (ann.ns) { %><b>Namespace:</b> <%= ann.ns %><br /><% } %> |
|  |  | <% if (ann.description) { %><b>Description:</b> <%= ann.description %><br /><% } %> |
|  |  | <b>Owner:</b> <%= ann.owner.firstName %> <%= ann.owner.lastName %><br /> |
|  |  | <b>ID:</b> <%- ann.id %><br /> |
|  |  | <% if (ann.ns) { %><b>Namespace:</b> <%- ann.ns %><br /><% } %> |
|  |  | <% if (ann.description) { %><b>Description:</b> <%- ann.description %><br /><% } %> |
|  |  | <b>Owner:</b> <%- ann.owner.firstName %> <%- ann.owner.lastName %><br /> |
|  |  | <b>Date:</b> <% print(OME.formatDate(ann.date)) %> |
|  |  |  |
|  |  | <% if (ann.parent) { %> |
|  |  | <br /> |
|  |  | <b>Linked to:</b> <%= ann.parent.class %> <%= ann.parent.id %> |
|  |  | <b>Linked to:</b> <%- ann.parent.class %> <%- ann.parent.id %> |
|  |  | <% } %> |
|  |  | </span> |
|  |  | </td> |
|  |  | </tr> |
|  |  | <% }) %> |
|  |  | <% }) %> |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `0168067`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fome%2Fomero-web%2Fcommit%2F0168067accde5e635341b3c714b1d53ae92ba424) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


