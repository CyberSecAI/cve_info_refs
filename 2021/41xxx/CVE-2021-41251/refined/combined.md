=== Content from github.com_12c8c07f_20250115_093441.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FSAP%2Fcloud-sdk-js%2Fsecurity%2Fadvisories%2FGHSA-gp2f-254m-rh32)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FSAP%2Fcloud-sdk-js%2Fsecurity%2Fadvisories%2FGHSA-gp2f-254m-rh32)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=SAP%2Fcloud-sdk-js)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[SAP](/SAP)
/
**[cloud-sdk-js](/SAP/cloud-sdk-js)**
Public

* [Notifications](/login?return_to=%2FSAP%2Fcloud-sdk-js) You must be signed in to change notification settings
* [Fork
  57](/login?return_to=%2FSAP%2Fcloud-sdk-js)
* [Star
   168](/login?return_to=%2FSAP%2Fcloud-sdk-js)

* [Code](/SAP/cloud-sdk-js)
* [Issues
  27](/SAP/cloud-sdk-js/issues)
* [Pull requests
  5](/SAP/cloud-sdk-js/pulls)
* [Discussions](/SAP/cloud-sdk-js/discussions)
* [Actions](/SAP/cloud-sdk-js/actions)
* [Projects
  0](/SAP/cloud-sdk-js/projects)
* [Security](/SAP/cloud-sdk-js/security)
* [Insights](/SAP/cloud-sdk-js/pulse)

Additional navigation options

* [Code](/SAP/cloud-sdk-js)
* [Issues](/SAP/cloud-sdk-js/issues)
* [Pull requests](/SAP/cloud-sdk-js/pulls)
* [Discussions](/SAP/cloud-sdk-js/discussions)
* [Actions](/SAP/cloud-sdk-js/actions)
* [Projects](/SAP/cloud-sdk-js/projects)
* [Security](/SAP/cloud-sdk-js/security)
* [Insights](/SAP/cloud-sdk-js/pulse)

# Possibility to elevate privileges or get unauthorized access to data

Moderate

[marikaner](/marikaner)
published
GHSA-gp2f-254m-rh32
Nov 5, 2021

## Package

npm

@sap-cloud-sdk/core
([npm](/advisories?query=ecosystem%3Anpm))

## Affected versions

< 1.52.0

## Patched versions

1.52.0

## Description

### Impact

This affects applications on SAP Business Technology Platform that use the SAP Cloud SDK and enabled caching of destinations.

In some cases, when user information was missing, destinations were cached without user information, allowing other users to retrieve the same destination with its permissions.

By default, destination caching is disabled. If it is enabled the maximum lifetime is 5 minutes which limits the attack vector.

### Patches

The problem was fixed by [#1769](https://github.com/SAP/cloud-sdk-js/pull/1769) and [#1770](https://github.com/SAP/cloud-sdk-js/pull/1770). The security for caching has been increased. The changes are released in version 1.52.0.

### Workarounds

Disable destination caching (it is disabled by default).

### References

[destination cache API docs](https://sap.github.io/cloud-sdk/api/1.51.0/modules/sap_cloud_sdk_core#destinationCache)

### For more information

If you have any questions or comments about this advisory:

* Open an issue in <https://github.com/SAP/cloud-sdk-js>

### Severity

Moderate

### CVE ID

CVE-2021-41251

### Weaknesses

No CWEs

### Credits

* [![@johenning](https://avatars.githubusercontent.com/u/3907965?s=40&v=4)](/johenning)
  [johenning](/johenning)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_2e3df4e5_20250115_093440.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FSAP%2Fcloud-sdk-js%2Fpull%2F1770)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FSAP%2Fcloud-sdk-js%2Fpull%2F1770)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=SAP%2Fcloud-sdk-js)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[SAP](/SAP)
/
**[cloud-sdk-js](/SAP/cloud-sdk-js)**
Public

* [Notifications](/login?return_to=%2FSAP%2Fcloud-sdk-js) You must be signed in to change notification settings
* [Fork
  57](/login?return_to=%2FSAP%2Fcloud-sdk-js)
* [Star
   168](/login?return_to=%2FSAP%2Fcloud-sdk-js)

* [Code](/SAP/cloud-sdk-js)
* [Issues
  27](/SAP/cloud-sdk-js/issues)
* [Pull requests
  5](/SAP/cloud-sdk-js/pulls)
* [Discussions](/SAP/cloud-sdk-js/discussions)
* [Actions](/SAP/cloud-sdk-js/actions)
* [Projects
  0](/SAP/cloud-sdk-js/projects)
* [Security](/SAP/cloud-sdk-js/security)
* [Insights](/SAP/cloud-sdk-js/pulse)

Additional navigation options

* [Code](/SAP/cloud-sdk-js)
* [Issues](/SAP/cloud-sdk-js/issues)
* [Pull requests](/SAP/cloud-sdk-js/pulls)
* [Discussions](/SAP/cloud-sdk-js/discussions)
* [Actions](/SAP/cloud-sdk-js/actions)
* [Projects](/SAP/cloud-sdk-js/projects)
* [Security](/SAP/cloud-sdk-js/security)
* [Insights](/SAP/cloud-sdk-js/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FSAP%2Fcloud-sdk-js%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FSAP%2Fcloud-sdk-js%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Fix: destination cache vulnerablity #1770

 Merged

[jjtang1985](/jjtang1985)
merged 4 commits into
[main](/SAP/cloud-sdk-js/tree/main "SAP/cloud-sdk-js:main")
from
[fix-dest-cache-vul](/SAP/cloud-sdk-js/tree/fix-dest-cache-vul "SAP/cloud-sdk-js:fix-dest-cache-vul")

Nov 5, 2021

 Merged

# [Fix: destination cache vulnerablity](#top) #1770

[jjtang1985](/jjtang1985)
merged 4 commits into
[main](/SAP/cloud-sdk-js/tree/main "SAP/cloud-sdk-js:main")
from
[fix-dest-cache-vul](/SAP/cloud-sdk-js/tree/fix-dest-cache-vul "SAP/cloud-sdk-js:fix-dest-cache-vul")

Nov 5, 2021

+177

−18

[Conversation
1](/SAP/cloud-sdk-js/pull/1770)
[Commits
4](/SAP/cloud-sdk-js/pull/1770/commits)
[Checks
0](/SAP/cloud-sdk-js/pull/1770/checks)
[Files changed
7](/SAP/cloud-sdk-js/pull/1770/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=60&v=4)](/jjtang1985)

Copy link

Contributor

### @jjtang1985 **[jjtang1985](/jjtang1985)** commented [Nov 5, 2021](#issue-1045845401) • edited Loading

* Switch the default isolation strategy from `IsolationStrategy.Tenant` to `IsolationStrategy.Tenant_User`, when setting `useCache` to true for destination lookup functions like `getDestination`.
* Disable destination cache, when the JWT does not contain necessary information. For example, when using `IsolationStrategy.Tenant_User`, the JWT has to contain both tenant id and user id.

Closes SAP/cloud-sdk-backlog#438

Closes SAP/cloud-sdk-backlog#439

Sorry, something went wrong.

All reactions

 [jjtang1985](/jjtang1985)
added 3 commits
[November 5, 2021 12:47](#commits-pushed-427bdfa)

[![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&v=4)](/jjtang1985)

`[default strategy](/SAP/cloud-sdk-js/pull/1770/commits/427bdfa18380d57faba7b7ea4c4ef55605fe858a "default strategy")`

`[427bdfa](/SAP/cloud-sdk-js/pull/1770/commits/427bdfa18380d57faba7b7ea4c4ef55605fe858a)`

[![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&v=4)](/jjtang1985)

`[strict cache key](/SAP/cloud-sdk-js/pull/1770/commits/ce2b5d405004ddd285ae4357c30244b04115c1a3 "strict cache key")`

`[ce2b5d4](/SAP/cloud-sdk-js/pull/1770/commits/ce2b5d405004ddd285ae4357c30244b04115c1a3)`

[![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&v=4)](/jjtang1985)

`[lint](/SAP/cloud-sdk-js/pull/1770/commits/85aafdf3c0850efd1203d75e9b08ccb1ae423b42 "lint")`

`[85aafdf](/SAP/cloud-sdk-js/pull/1770/commits/85aafdf3c0850efd1203d75e9b08ccb1ae423b42)`

 [![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&u=be6dc777536ae75ef5db92a0450af74fa964c711&v=4)](/jjtang1985)
[jjtang1985](/jjtang1985)
requested review from
[marikaner](/marikaner) and
[FrankEssenberger](/FrankEssenberger)
[November 5, 2021 13:24](#event-5574387546)

[![FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=60&v=4)](/FrankEssenberger)

**[FrankEssenberger](/FrankEssenberger)**
approved these changes
[Nov 5, 2021](#pullrequestreview-798905864)

 [View reviewed changes](/SAP/cloud-sdk-js/pull/1770/files/85aafdf3c0850efd1203d75e9b08ccb1ae423b42)

Copy link

Contributor

### @FrankEssenberger **[FrankEssenberger](/FrankEssenberger)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

LGTM

Sorry, something went wrong.

All reactions

 [![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&u=be6dc777536ae75ef5db92a0450af74fa964c711&v=4)](/jjtang1985)
[jjtang1985](/jjtang1985)
marked this pull request as ready for review
[November 5, 2021 13:50](#event-5574527991)

[![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&v=4)](/jjtang1985)

`[clean tests](/SAP/cloud-sdk-js/pull/1770/commits/83fec1b393d4022ec7893b0c0cbbfb5718122895 "clean tests")`

`[83fec1b](/SAP/cloud-sdk-js/pull/1770/commits/83fec1b393d4022ec7893b0c0cbbfb5718122895)`

[![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&u=be6dc777536ae75ef5db92a0450af74fa964c711&v=4)](/jjtang1985)
[jjtang1985](/jjtang1985)
enabled auto-merge (squash)
[November 5, 2021 13:57](#event-5574570131)

[![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&v=4)](/FrankEssenberger)
[FrankEssenberger](/FrankEssenberger)
mentioned this pull request
[Nov 5, 2021](#ref-issue-1043516090)

[getDestination with `useCache: true` returns valid grant token when it should not
#1765](/SAP/cloud-sdk-js/issues/1765)

Closed

[![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&u=be6dc777536ae75ef5db92a0450af74fa964c711&v=4)](/jjtang1985)
[jjtang1985](/jjtang1985)
merged commit [`fe1ba94`](/SAP/cloud-sdk-js/commit/fe1ba94ad0c2dae306634725bbd4fe525f81c77d)
into
main

[Nov 5, 2021](https://github.com/SAP/cloud-sdk-js/pull/1770#event-5574617522)

 [![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&u=be6dc777536ae75ef5db92a0450af74fa964c711&v=4)](/jjtang1985)
[jjtang1985](/jjtang1985)
deleted the
fix-dest-cache-vul

branch
[November 5, 2021 14:05](#event-5574617603)

[![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&u=be6dc777536ae75ef5db92a0450af74fa964c711&v=4)](/jjtang1985)
[jjtang1985](/jjtang1985)
mentioned this pull request
[Nov 8, 2021](#ref-pullrequest-1047132846)

[Fix: destination cache vulnerablity #1770
#1779](/SAP/cloud-sdk-js/pull/1779)
 Merged

[marikaner](/marikaner)
pushed a commit
that referenced
this pull request
[Nov 8, 2021](#ref-commit-6f0fcb9)
[![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&u=be6dc777536ae75ef5db92a0450af74fa964c711&v=4)](/jjtang1985) [![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&u=a91ecdde65547d9c481093ce9c08a5b994c4a9a3&v=4)](/FrankEssenberger)

`[Fix: destination cache vulnerablity](/SAP/cloud-sdk-js/commit/6f0fcb95ee9c6781bace267442b39375044eb9a2 "Fix: destination cache vulnerablity #1770 (#1779)

* cherry pick + remove deprecated functions

* missing changelog

* fix tests

* fix tests 2

Co-authored-by: d068544 <frank.essenberger@sap.com>") [#1770](https://github.com/SAP/cloud-sdk-js/pull/1770) [(](/SAP/cloud-sdk-js/commit/6f0fcb95ee9c6781bace267442b39375044eb9a2 "Fix: destination cache vulnerablity #1770 (#1779)

* cherry pick + remove deprecated functions

* missing changelog

* fix tests

* fix tests 2

Co-authored-by: d068544 <frank.essenberger@sap.com>")[#1779](https://github.com/SAP/cloud-sdk-js/pull/1779)[)](/SAP/cloud-sdk-js/commit/6f0fcb95ee9c6781bace267442b39375044eb9a2 "Fix: destination cache vulnerablity #1770 (#1779)

* cherry pick + remove deprecated functions

* missing changelog

* fix tests

* fix tests 2

Co-authored-by: d068544 <frank.essenberger@sap.com>")`
…

`[6f0fcb9](/SAP/cloud-sdk-js/commit/6f0fcb95ee9c6781bace267442b39375044eb9a2)`

```
* cherry pick + remove deprecated functions

* missing changelog

* fix tests

* fix tests 2

Co-authored-by: d068544 <frank.essenberger@sap.com>
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FSAP%2Fcloud-sdk-js%2Fpull%2F1770)

Reviewers

[![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&v=4)](/FrankEssenberger) [FrankEssenberger](/FrankEssenberger)

FrankEssenberger approved these changes

[![@marikaner](https://avatars.githubusercontent.com/u/868536?s=40&v=4)](/marikaner) [marikaner](/marikaner)

 Awaiting requested review from marikaner

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=52&v=4)](/jjtang1985) [![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=52&v=4)](/FrankEssenberger)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_c92c879a_20250115_093439.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FSAP%2Fcloud-sdk-js%2Fpull%2F1769)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FSAP%2Fcloud-sdk-js%2Fpull%2F1769)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=SAP%2Fcloud-sdk-js)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[SAP](/SAP)
/
**[cloud-sdk-js](/SAP/cloud-sdk-js)**
Public

* [Notifications](/login?return_to=%2FSAP%2Fcloud-sdk-js) You must be signed in to change notification settings
* [Fork
  57](/login?return_to=%2FSAP%2Fcloud-sdk-js)
* [Star
   168](/login?return_to=%2FSAP%2Fcloud-sdk-js)

* [Code](/SAP/cloud-sdk-js)
* [Issues
  27](/SAP/cloud-sdk-js/issues)
* [Pull requests
  5](/SAP/cloud-sdk-js/pulls)
* [Discussions](/SAP/cloud-sdk-js/discussions)
* [Actions](/SAP/cloud-sdk-js/actions)
* [Projects
  0](/SAP/cloud-sdk-js/projects)
* [Security](/SAP/cloud-sdk-js/security)
* [Insights](/SAP/cloud-sdk-js/pulse)

Additional navigation options

* [Code](/SAP/cloud-sdk-js)
* [Issues](/SAP/cloud-sdk-js/issues)
* [Pull requests](/SAP/cloud-sdk-js/pulls)
* [Discussions](/SAP/cloud-sdk-js/discussions)
* [Actions](/SAP/cloud-sdk-js/actions)
* [Projects](/SAP/cloud-sdk-js/projects)
* [Security](/SAP/cloud-sdk-js/security)
* [Insights](/SAP/cloud-sdk-js/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FSAP%2Fcloud-sdk-js%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FSAP%2Fcloud-sdk-js%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# fix: wrong token for cache #1769

 Merged

[FrankEssenberger](/FrankEssenberger)
merged 6 commits into
[main](/SAP/cloud-sdk-js/tree/main "SAP/cloud-sdk-js:main")
from
[fix-tenant-isloation](/SAP/cloud-sdk-js/tree/fix-tenant-isloation "SAP/cloud-sdk-js:fix-tenant-isloation")

Nov 5, 2021

 Merged

# [fix: wrong token for cache](#top) #1769

[FrankEssenberger](/FrankEssenberger)
merged 6 commits into
[main](/SAP/cloud-sdk-js/tree/main "SAP/cloud-sdk-js:main")
from
[fix-tenant-isloation](/SAP/cloud-sdk-js/tree/fix-tenant-isloation "SAP/cloud-sdk-js:fix-tenant-isloation")

Nov 5, 2021

[Conversation
4](/SAP/cloud-sdk-js/pull/1769)
[Commits
6](/SAP/cloud-sdk-js/pull/1769/commits)
[Checks
0](/SAP/cloud-sdk-js/pull/1769/checks)
[Files changed](/SAP/cloud-sdk-js/pull/1769/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=60&v=4)](/FrankEssenberger)

Copy link

Contributor

### @FrankEssenberger **[FrankEssenberger](/FrankEssenberger)** commented [Nov 5, 2021](#issue-1045789872) • edited Loading

Please provide a description of what your change does and why it is needed.

Closes SAP/cloud-sdk-backlog#437.

Under some condition the wrong token was used to build the cache. The removed tests were misleading because the passed token from the user can be from the subscriber or provider account.

Sorry, something went wrong.

All reactions

 [FrankEssenberger](/FrankEssenberger)
added 2 commits
[November 5, 2021 13:22](#commits-pushed-bddbe36)

[![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&v=4)](/FrankEssenberger)

`[fix wrong token used](/SAP/cloud-sdk-js/pull/1769/commits/bddbe3643731374d77d7b2f6ec057ab801cc527f "fix wrong token used")`

`[bddbe36](/SAP/cloud-sdk-js/pull/1769/commits/bddbe3643731374d77d7b2f6ec057ab801cc527f)`

[![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&v=4)](/FrankEssenberger)

`[linter](/SAP/cloud-sdk-js/pull/1769/commits/24d001a80f9c12127623b4cf9740dde3815a33ea "linter")`

`[24d001a](/SAP/cloud-sdk-js/pull/1769/commits/24d001a80f9c12127623b4cf9740dde3815a33ea)`

 [![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&u=a91ecdde65547d9c481093ce9c08a5b994c4a9a3&v=4)](/FrankEssenberger)
[FrankEssenberger](/FrankEssenberger)
requested review from
[marikaner](/marikaner) and
[jjtang1985](/jjtang1985)
[November 5, 2021 12:26](#event-5574114476)

[![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&u=a91ecdde65547d9c481093ce9c08a5b994c4a9a3&v=4)](/FrankEssenberger)
[FrankEssenberger](/FrankEssenberger)
mentioned this pull request
[Nov 5, 2021](#ref-issue-1043516090)

[getDestination with `useCache: true` returns valid grant token when it should not
#1765](/SAP/cloud-sdk-js/issues/1765)

Closed

[![jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=60&v=4)](/jjtang1985)

**[jjtang1985](/jjtang1985)**
requested changes
[Nov 5, 2021](#pullrequestreview-798920810)

 [View reviewed changes](/SAP/cloud-sdk-js/pull/1769/files/24d001a80f9c12127623b4cf9740dde3815a33ea)

Copy link

Contributor

### @jjtang1985 **[jjtang1985](/jjtang1985)** left a comment • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

LGTM

You have to update a function as I deprecated one.

Please update the change log.

As a test driven fix, maybe you can share, without the fix, which tests failed?

Sorry, something went wrong.

All reactions

[packages/core/src/connectivity/scp-cf/destination/destination-cache.spec.ts](/SAP/cloud-sdk-js/pull/1769/files/24d001a80f9c12127623b4cf9740dde3815a33ea#diff-29b3b4327aade5495bee2c4e5bef08594740110be10f73e28a930476aa31131f)
Outdated

Show resolved

Hide resolved

[packages/core/src/connectivity/scp-cf/destination/destination-from-service.ts](/SAP/cloud-sdk-js/pull/1769/files/24d001a80f9c12127623b4cf9740dde3815a33ea#diff-9170db9d445cdd3d3fd227f8a30d1fe97bef51c6e7317e7c893802dff52bf346)

|  |  | @@ -570,10 +570,6 @@ class DestinationFromServiceRetriever { | |
| --- | --- | --- | --- |
|  |  | return false; |
|  |  | } |
|  |  |  |
|  |  | if (this.isProviderAndSubscriberSameTenant()) { |

Copy link

Contributor

### @jjtang1985 **[jjtang1985](/jjtang1985)** [Nov 5, 2021](#discussion_r743683279)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

🐛 !

Sorry, something went wrong.

All reactions

[![FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=60&v=4)](/FrankEssenberger)

**[FrankEssenberger](/FrankEssenberger)**
commented
[Nov 5, 2021](#pullrequestreview-798946406)

 [View reviewed changes](/SAP/cloud-sdk-js/pull/1769/files/24d001a80f9c12127623b4cf9740dde3815a33ea)

[packages/core/src/connectivity/scp-cf/destination/destination-cache.spec.ts](/SAP/cloud-sdk-js/pull/1769/files/24d001a80f9c12127623b4cf9740dde3815a33ea#diff-29b3b4327aade5495bee2c4e5bef08594740110be10f73e28a930476aa31131f)

Show resolved

Hide resolved

 [FrankEssenberger](/FrankEssenberger)
added 2 commits
[November 5, 2021 15:20](#commits-pushed-e270901)

[![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&v=4)](/FrankEssenberger)

`[Merge remote-tracking branch 'origin/main' into fix-tenant-isloation](/SAP/cloud-sdk-js/pull/1769/commits/e270901975067fe512ca94edf0566754519a8f07 "Merge remote-tracking branch 'origin/main' into fix-tenant-isloation

# Conflicts:
#	packages/core/src/connectivity/scp-cf/destination/destination-cache.spec.ts")`
 …

`[e270901](/SAP/cloud-sdk-js/pull/1769/commits/e270901975067fe512ca94edf0566754519a8f07)`

```
# Conflicts:
#	packages/core/src/connectivity/scp-cf/destination/destination-cache.spec.ts
```

[![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&v=4)](/FrankEssenberger)

`[deprecate method not used](/SAP/cloud-sdk-js/pull/1769/commits/7d1b869726cd8bab19f93bf34a55023a18fb32ee "deprecate method not used")`

`[7d1b869](/SAP/cloud-sdk-js/pull/1769/commits/7d1b869726cd8bab19f93bf34a55023a18fb32ee)`

[![jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=60&v=4)](/jjtang1985)

**[jjtang1985](/jjtang1985)**
approved these changes
[Nov 5, 2021](#pullrequestreview-798970058)

 [View reviewed changes](/SAP/cloud-sdk-js/pull/1769/files/7d1b869726cd8bab19f93bf34a55023a18fb32ee)

 [FrankEssenberger](/FrankEssenberger)
added 2 commits
[November 5, 2021 16:04](#commits-pushed-974c67f)

[![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&v=4)](/FrankEssenberger)

`[fix one test](/SAP/cloud-sdk-js/pull/1769/commits/974c67f6c0a755fb1526afd74dfe013fb4d9ee2b "fix one test")`

`[974c67f](/SAP/cloud-sdk-js/pull/1769/commits/974c67f6c0a755fb1526afd74dfe013fb4d9ee2b)`

[![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&v=4)](/FrankEssenberger)

`[linter](/SAP/cloud-sdk-js/pull/1769/commits/602d79c70b68a0a03c3dd9326715dd90083f4d92 "linter")`

`[602d79c](/SAP/cloud-sdk-js/pull/1769/commits/602d79c70b68a0a03c3dd9326715dd90083f4d92)`

[![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&u=a91ecdde65547d9c481093ce9c08a5b994c4a9a3&v=4)](/FrankEssenberger)
[FrankEssenberger](/FrankEssenberger)
merged commit [`fbef1d2`](/SAP/cloud-sdk-js/commit/fbef1d2eefe3744a55aebe6d45923e8a07eeca3f)
into
main

[Nov 5, 2021](https://github.com/SAP/cloud-sdk-js/pull/1769#event-5575113705)

 [![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=40&u=a91ecdde65547d9c481093ce9c08a5b994c4a9a3&v=4)](/FrankEssenberger)
[FrankEssenberger](/FrankEssenberger)
deleted the
fix-tenant-isloation

branch
[November 5, 2021 15:23](#event-5575113799)

This was referenced Nov 5, 2021

[chore: transfer #1769 to 2.0
#1772](/SAP/cloud-sdk-js/pull/1772)
 Merged

[Fix: destination cache vulnerablity #1770
#1779](/SAP/cloud-sdk-js/pull/1779)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FSAP%2Fcloud-sdk-js%2Fpull%2F1769)

Reviewers

[![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=40&v=4)](/jjtang1985) [jjtang1985](/jjtang1985)

jjtang1985 approved these changes

[![@marikaner](https://avatars.githubusercontent.com/u/868536?s=40&v=4)](/marikaner) [marikaner](/marikaner)

 Awaiting requested review from marikaner

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@FrankEssenberger](https://avatars.githubusercontent.com/u/56544999?s=52&v=4)](/FrankEssenberger) [![@jjtang1985](https://avatars.githubusercontent.com/u/33489572?s=52&v=4)](/jjtang1985)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


