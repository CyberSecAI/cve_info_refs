=== Content from github.com_b85b1239_20250115_084525.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FExrick%2Fxmall%2Fblob%2Fb146cceb21ca42d4237f31dbd7af5ced49048a56%2Fxmall-manager-web%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjsp%2Fproduct-add.jsp)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FExrick%2Fxmall%2Fblob%2Fb146cceb21ca42d4237f31dbd7af5ced49048a56%2Fxmall-manager-web%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjsp%2Fproduct-add.jsp)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=Exrick%2Fxmall)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[Exrick](/Exrick)
/
**[xmall](/Exrick/xmall)**
Public

* [Notifications](/login?return_to=%2FExrick%2Fxmall) You must be signed in to change notification settings
* [Fork
  2.6k](/login?return_to=%2FExrick%2Fxmall)
* [Star
   7.2k](/login?return_to=%2FExrick%2Fxmall)

* [Code](/Exrick/xmall)
* [Issues
  24](/Exrick/xmall/issues)
* [Pull requests
  15](/Exrick/xmall/pulls)
* [Actions](/Exrick/xmall/actions)
* [Projects
  0](/Exrick/xmall/projects)
* [Wiki](/Exrick/xmall/wiki)
* [Security](/Exrick/xmall/security)
* [Insights](/Exrick/xmall/pulse)

Additional navigation options

* [Code](/Exrick/xmall)
* [Issues](/Exrick/xmall/issues)
* [Pull requests](/Exrick/xmall/pulls)
* [Actions](/Exrick/xmall/actions)
* [Projects](/Exrick/xmall/projects)
* [Wiki](/Exrick/xmall/wiki)
* [Security](/Exrick/xmall/security)
* [Insights](/Exrick/xmall/pulse)

## Files

 b146cce
## Breadcrumbs

1. [xmall](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56)
2. /[xmall-manager-web](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web)
3. /[src](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src)
4. /[main](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main)
5. /[webapp](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp)
6. /[WEB-INF](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF)
7. /[jsp](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF/jsp)
/
# product-add.jsp

Copy path Blame  Blame
## Latest commit

## History

[History](/Exrick/xmall/commits/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF/jsp/product-add.jsp)862 lines (739 loc) · 33 KB b146cce
## Breadcrumbs

1. [xmall](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56)
2. /[xmall-manager-web](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web)
3. /[src](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src)
4. /[main](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main)
5. /[webapp](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp)
6. /[WEB-INF](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF)
7. /[jsp](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF/jsp)
/
# product-add.jsp

Top
## File metadata and controls

* Code
* Blame

862 lines (739 loc) · 33 KB[Raw](https://github.com/Exrick/xmall/raw/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF/jsp/product-add.jsp)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709710711712713714715716717718719720721722723724725726727728729730731732733734735736737738739740741742743744745746747748749750751752753754755756757758759760761762763764765766767768769770771772773774775776777778779780781782783784785786787788789790791792793794795796797798799800801802803804805806807808809810811812813814815816817818819820821822823824825826827828829830831832833834835836837838839840841842843844845846847848849850851852853854855856857858859860861862<%@ page contentType="text/html;charset=UTF-8" language="java" %><% request.setCharacterEncoding("UTF-8"); String htmlData = request.getParameter("detail") != null ? request.getParameter("detail") : "";%><!--\_meta 作为公共模版分离出去--><!DOCTYPE HTML><html><head> <meta charset="utf-8"> <meta name="renderer" content="webkit|ie-comp|ie-stand"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" /> <meta http-equiv="Cache-Control" content="no-siteapp" /> <link rel="Bookmark" href="/icon/favicon.ico" > <link rel="Shortcut Icon" href="/icon/favicon.ico" /> <!--[if lt IE 9]> <script type="text/javascript" src="lib/html5shiv.js"></script> <script type="text/javascript" src="lib/respond.min.js"></script>
 <![endif]--> <link rel="stylesheet" type="text/css" href="static/h-ui/css/H-ui.min.css" /> <link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/H-ui.admin.css" /> <link rel="stylesheet" type="text/css" href="lib/Hui-iconfont/1.0.8/iconfont.css" />
 <link rel="stylesheet" type="text/css" href="static/h-ui.admin/skin/default/skin.css" id="skin" /> <link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/style.css" /> <!--[if IE 6]> <script type="text/javascript" src="lib/DD\_belatedPNG\_0.0.8a-min.js" ></script> <script>DD\_belatedPNG.fix('\*');</script> <![endif]--> <!--/meta 作为公共模版分离出去-->
 <link href="lib/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css" /></head><body><div class="page-container"> <%=htmlData%> <form name="product-add" action="" method="post" class="form form-horizontal" id="product-add"> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>产品标题：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" class="input-text" value="" placeholder="" name="title"> </div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>简介描述：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" class="input-text" value="" placeholder="" name="sellPoint"> </div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>商品分类：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" hidden class="input-text" id="cid" name="cid" > <input type="text" onclick="chooseCategory()" readonly class="input-text" value="" placeholder="请点击选择按钮选择商品分类" id="cname" name="cname" style="width:50%"> <input type="button" onclick="chooseCategory()" class="btn btn-secondary radius" value="选择类别"> </div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>产品展示价格：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" name="price" placeholder="请输入正确金额" value="" class="input-text" style="width:50%"> 元</div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>库存数量：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" name="num" id="num" placeholder="0~99999" value="" class="input-text" style="width:50%"> 件</div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>购买限制数量：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" name="limitNum" id="limitNum" placeholder="0~9999" value="" class="input-text" style="width:50%"> 件</div> </div> <input type="text" name="image" id="image" hidden/> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>展示缩略图片上传：</label> <div class="formControls col-xs-8 col-sm-9"> <div class="uploader-list-container"> <div class="queueList"> <div id="dndArea" class="placeholder"> <div name="filePicker" id="filePicker-2"></div> <p>或将照片拖到这里，最多可选5张</p> </div> </div> <div class="statusBar" style="display:none;"> <div class="progress"> <span class="text">0%</span> <span class="percentage"></span> </div> <div class="info"></div> <div class="btns"> <div id="filePicker2"></div> <div class="uploadBtn">开始上传</div> </div> </div> </div> </div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2">商品详情：</label> <div class="formControls col-xs-8 col-sm-9"> <textarea name="detail" style="width:100%;visibility:hidden;"><%=htmlspecialchars(htmlData)%></textarea> </div> </div> <div class="row cl"> <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2"> <button id="saveButton" class="btn btn-primary radius" type="submit"><i class="Hui-iconfont">&#xe632;</i> 保存并发布</button> <button onClick="layer\_close();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button> </div> </div> </form></div>
<!--\_footer 作为公共模版分离出去--><script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script><script type="text/javascript" src="lib/layer/2.4/layer.js"></script><script type="text/javascript" src="static/h-ui/js/H-ui.min.js"></script><script type="text/javascript" src="static/h-ui.admin/js/H-ui.admin.js"></script> <!--/\_footer 作为公共模版分离出去-->
<!--请在下方写此页面业务相关的脚本--><script type="text/javascript" src="lib/My97DatePicker/4.8/WdatePicker.js"></script><script type="text/javascript" src="lib/jquery.validation/1.14.0/jquery.validate.js"></script><script type="text/javascript" src="lib/jquery.validation/1.14.0/validate-methods.js"></script><script type="text/javascript" src="lib/jquery.validation/1.14.0/messages\_zh.js"></script><script type="text/javascript" src="lib/webuploader/0.1.5/webuploader.min.js"></script><link rel="stylesheet" href="lib/kindeditor/themes/default/default.css" /><link rel="stylesheet" href="lib/kindeditor/plugins/code/prettify.css" /><script charset="utf-8" src="lib/kindeditor/kindeditor.js"></script><script charset="utf-8" src="lib/kindeditor/lang/zh-CN.js"></script><script charset="utf-8" src="lib/kindeditor/plugins/code/prettify.js"></script><script type="text/javascript"> var editor;
 jQuery.validator.addMethod("decimalsValue",function(value, element) { var decimalsValue =/^(?!0+(?:\.0+)?$)(?:[1-9]\d\*|0)(?:\.\d{1,2})?$/ ; return this.optional(element) || (decimalsValue.test(value)); }, "金额必须大于0并且只能精确到分");
 function giveCid(cid){ $("#cid").val(cid); }
 function giveCName(cname){ $("#cname").val(cname); }
 function chooseCategory(){ layer\_show("选择商品分类","choose-category",300,510); }
 //保存发布 $("#product-add").validate({ rules:{ title:{ required:true, }, sellPoint:{ required:true, }, cname:{ required:true, }, price:{ decimalsValue:true, required:true, maxlength:10, }, num:{ digits:true, required:true, maxlength:5, }, limitNum:{ digits:true, required:true, maxlength:4, }, }, onkeyup:false, focusCleanup:false, success:"valid", submitHandler:function(form){ if(images==null){ layer.alert('请上传商品展示缩略图! ', {title: '错误信息',icon: 0}); return; } var index = layer.load(3); editor.sync(); $(form).ajaxSubmit({ url: "/item/add", type: "POST", success: function(data) { layer.close(index); if(data.success==true){ if(parent.location.pathname!='/'){ parent.productCount(); parent.refresh(); parent.msgSuccess("添加成功!"); var index = parent.layer.getFrameIndex(window.name); parent.layer.close(index); }else{ layer.confirm('添加成功!', { btn: ['确认'],icon: 1 }, function(){ var index = parent.layer.getFrameIndex(window.name); parent.layer.close(index); }); } }else{ layer.alert(data.message, {title: '错误信息',icon: 2}); } }, error:function(XMLHttpRequest) { layer.close(index); layer.alert('数据处理失败! 错误码:'+XMLHttpRequest.status,{title: '错误信息',icon: 2}); } }); } });
 KindEditor.ready(function(K) { editor = K.create('textarea[name="detail"]', { cssPath : 'lib/kindeditor/plugins/code/prettify.css', uploadJson : '/kindeditor/imageUpload', fileManagerJson : '/kindeditor/imageUpload', allowFileManager : false, height : '400px', afterCreate : function() { var self = this; K.ctrl(document, 13, function() { self.sync(); document.forms['product-add'].submit(); }); K.ctrl(self.edit.doc, 13, function() { self.sync(); document.forms['product-add'].submit(); }); } }); prettyPrint(); });
 var images=null;
 (function ($) { $('.skin-minimal input').iCheck({ checkboxClass: 'icheckbox-blue', radioClass: 'iradio-blue', increaseArea: '20%' });
 // 当domReady的时候开始初始化 $(function () { var $wrap = $('.uploader-list-container'),
 // 图片容器 $queue = $('<ul class="filelist"></ul>') .appendTo($wrap.find('.queueList')),
 // 状态栏，包括进度和控制按钮 $statusBar = $wrap.find('.statusBar'),
 // 文件总体选择信息。 $info = $statusBar.find('.info'),
 // 上传按钮 $upload = $wrap.find('.uploadBtn'),
 // 没选择文件之前的内容。 $placeHolder = $wrap.find('.placeholder'),
 $progress = $statusBar.find('.progress').hide(),
 // 添加的文件数量 fileCount = 0,
 // 添加的文件总大小 fileSize = 0,
 // 优化retina, 在retina下这个值是2 ratio = window.devicePixelRatio || 1,
 // 缩略图大小 thumbnailWidth = 110 \* ratio, thumbnailHeight = 110 \* ratio,
 // 可能有pedding, ready, uploading, confirm, done. state = 'pedding',
 // 所有文件的进度信息，key为file id percentages = {}, // 判断浏览器是否支持图片的base64 isSupportBase64 = (function () { var data = new Image(); var support = true; data.onload = data.onerror = function () { if (this.width != 1 || this.height != 1) { support = false; } } data.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="; return support; })(),
 // 检测是否已经安装flash，检测flash的版本 flashVersion = (function () { var version;
 try { version = navigator.plugins['Shockwave Flash']; version = version.description; } catch (ex) { try { version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash') .GetVariable('$version'); } catch (ex2) { version = '0.0'; } } version = version.match(/\d+/g); return parseFloat(version[0] + '.' + version[1], 10); })(),
 supportTransition = (function () { var s = document.createElement('p').style, r = 'transition' in s || 'WebkitTransition' in s || 'MozTransition' in s || 'msTransition' in s || 'OTransition' in s; s = null; return r; })(),
 // WebUploader实例 uploader;
 if (!WebUploader.Uploader.support('flash') && WebUploader.browser.ie) {
 // flash 安装了但是版本过低。 if (flashVersion) { (function (container) { window['expressinstallcallback'] = function (state) { switch (state) { case 'Download.Cancelled': alert('您取消了更新！') break;
 case 'Download.Failed': alert('安装失败') break;
 default: alert('安装已成功，请刷新！'); break; } delete window['expressinstallcallback']; };
 var swf = 'expressInstall.swf'; // insert flash object var html = '<object type="application/' + 'x-shockwave-flash" data="' + swf + '" ';
 if (WebUploader.browser.ie) { html += 'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '; }
 html += 'width="100%" height="100%" style="outline:0">' + '<param name="movie" value="' + swf + '" />' + '<param name="wmode" value="transparent" />' + '<param name="allowscriptaccess" value="always" />' + '</object>';
 container.html(html);
 })($wrap);
 // 压根就没有安转。 } else { $wrap.html('<a href="http://www.adobe.com/go/getflashplayer" target="\_blank" border="0"><img alt="get flash player" src="http://www.adobe.com/macromedia/style\_guide/images/160x41\_Get\_Flash\_Player.jpg" /></a>'); }
 return; } else if (!WebUploader.Uploader.support()) { alert('Web Uploader 不支持您的浏览器！'); return; }
 // 实例化 uploader = WebUploader.create({ pick: { id: '#filePicker-2', label: '点击选择图片' }, formData: { uid: 123 }, dnd: '#dndArea', paste: '#uploader', swf: 'lib/webuploader/0.1.5/Uploader.swf', chunked: false, chunkSize: 512 \* 1024, server: '/image/imageUpload', // runtimeOrder: 'flash',
 accept: { title: 'Images', extensions: 'gif,jpg,jpeg,bmp,png', //mimeTypes: 'image/\*' },
 // 禁掉全局的拖拽功能。这样不会出现图片拖进页面的时候，把图片打开。 disableGlobalDnd: true, fileNumLimit: 5, fileSizeLimit: 25 \* 1024 \* 1024, // 25 M fileSingleSizeLimit: 5 \* 1024 \* 1024 // 5 M });
 // 拖拽时不接受 js, txt 文件。 uploader.on('dndAccept', function (items) { var denied = false, len = items.length, i = 0, // 修改js类型 unAllowed = 'text/plain;application/javascript ';
 for (; i < len; i++) { // 如果在列表里面 if (~unAllowed.indexOf(items[i].type)) { denied = true; break; } }
 return !denied; });
 uploader.on('dialogOpen', function () { console.log('here'); });
 // uploader.on('filesQueued', function() { // uploader.sort(function( a, b ) { // if ( a.name < b.name ) // return -1; // if ( a.name > b.name ) // return 1; // return 0; // }); // });
 // 添加“添加文件”的按钮， uploader.addButton({ id: '#filePicker2', label: '继续添加' });
 uploader.on('ready', function () { window.uploader = uploader; });
 // 当有文件添加进来时执行，负责view的创建 function addFile(file) { var $li = $('<li id="' + file.id + '">' + '<p class="title">' + file.name + '</p>' + '<p class="imgWrap"></p>' + '<p class="progress"><span></span></p>' + '</li>'),
 $btns = $('<div class="file-panel">' + '<span class="cancel">删除</span>' + '<span class="rotateRight">向右旋转</span>' + '<span class="rotateLeft">向左旋转</span></div>').appendTo($li), $prgress = $li.find('p.progress span'), $wrap = $li.find('p.imgWrap'), $info = $('<p class="error"></p>'),
 showError = function (code) { switch (code) { case 'exceed\_size': text = '文件大小超出'; break;
 case 'interrupt': text = '上传暂停'; break;
 default: text = '上传失败，请重试'; break; }
 $info.text(text).appendTo($li); };
 if (file.getStatus() === 'invalid') { showError(file.statusText); } else { // @todo lazyload $wrap.text('预览中'); uploader.makeThumb(file, function (error, src) { var img;
 if (error) { $wrap.text('不能预览'); return; }
 if (isSupportBase64) { img = $('<img src="' + src + '">'); $wrap.empty().append(img); } else { $.ajax('lib/webuploader/0.1.5/server/preview.php', { method: 'POST', data: src, dataType: 'json' }).done(function (response) { if (response.result) { img = $('<img src="' + response.result + '">'); $wrap.empty().append(img); } else { $wrap.text("预览出错"); } }); } }, thumbnailWidth, thumbnailHeight);
 percentages[file.id] = [file.size, 0]; file.rotation = 0; }
 file.on('statuschange', function (cur, prev) { if (prev === 'progress') { $prgress.hide().width(0); } else if (prev === 'queued') { $li.off('mouseenter mouseleave'); $btns.remove(); }
 // 成功 if (cur === 'error' || cur === 'invalid') { console.log(file.statusText); showError(file.statusText); percentages[file.id][1] = 1; } else if (cur === 'interrupt') { showError('interrupt'); } else if (cur === 'queued') { percentages[file.id][1] = 0; } else if (cur === 'progress') { $info.remove(); $prgress.css('display', 'block'); } else if (cur === 'complete') { $li.append('<span class="success"></span>'); }
 $li.removeClass('state-' + prev).addClass('state-' + cur); });
 $li.on('mouseenter', function () { $btns.stop().animate({height: 30}); });
 $li.on('mouseleave', function () { $btns.stop().animate({height: 0}); });
 $btns.on('click', 'span', function () { var index = $(this).index(), deg;
 switch (index) { case 0: uploader.removeFile(file); return;
 case 1: file.rotation += 90; break;
 case 2: file.rotation -= 90; break; }
 if (supportTransition) { deg = 'rotate(' + file.rotation + 'deg)'; $wrap.css({ '-webkit-transform': deg, '-mos-transform': deg, '-o-transform': deg, 'transform': deg }); } else { $wrap.css('filter', 'progid:DXImageTransform.Microsoft.BasicImage(rotation=' + (~~((file.rotation / 90) % 4 + 4) % 4) + ')'); // use jquery animate to rotation // $({ // rotation: rotation // }).animate({ // rotation: file.rotation // }, { // easing: 'linear', // step: function( now ) { // now = now \* Math.PI / 180;
 // var cos = Math.cos( now ), // sin = Math.sin( now );
 // $wrap.css( 'filter', "progid:DXImageTransform.Microsoft.Matrix(M11=" + cos + ",M12=" + (-sin) + ",M21=" + sin + ",M22=" + cos + ",SizingMethod='auto expand')"); // } // }); }
 });
 $li.appendTo($queue); }
 // 负责view的销毁 function removeFile(file) { var $li = $('#' + file.id);
 delete percentages[file.id]; updateTotalProgress(); $li.off().find('.file-panel').off().end().remove(); }
 function updateTotalProgress() { var loaded = 0, total = 0, spans = $progress.children(), percent;
 $.each(percentages, function (k, v) { total += v[0]; loaded += v[0] \* v[1]; });
 percent = total ? loaded / total : 0;
 spans.eq(0).text(Math.round(percent \* 100) + '%'); spans.eq(1).css('width', Math.round(percent \* 100) + '%'); updateStatus(); }
 function updateStatus() { var text = '', stats;
 if (state === 'ready') { text = '选中' + fileCount + '张图片，共' + WebUploader.formatSize(fileSize) + '。'; } else if (state === 'confirm') { stats = uploader.getStats(); if (stats.uploadFailNum) { text = '已成功上传' + stats.successNum + '张照片，' + stats.uploadFailNum + '张照片上传失败，<a class="retry" href="#">重新上传</a>失败图片或<a class="ignore" href="#">忽略</a>' }
 } else { stats = uploader.getStats(); text = '共' + fileCount + '张（' + WebUploader.formatSize(fileSize) + '），已上传' + stats.successNum + '张';
 if (stats.uploadFailNum) { text += '，失败' + stats.uploadFailNum + '张'; } }
 $info.html(text); }
 function setState(val) { var file, stats;
 if (val === state) { return; }
 $upload.removeClass('state-' + state); $upload.addClass('state-' + val); state = val;
 switch (state) { case 'pedding': $placeHolder.removeClass('element-invisible'); $queue.hide(); $statusBar.addClass('element-invisible'); uploader.refresh(); break;
 case 'ready': $placeHolder.addClass('element-invisible'); $('#filePicker2').removeClass('element-invisible'); $queue.show(); $statusBar.removeClass('element-invisible'); uploader.refresh(); break;
 case 'uploading': $('#filePicker2').addClass('element-invisible'); $progress.show(); $upload.text('暂停上传'); break;
 case 'paused': $progress.show(); $upload.text('继续上传'); break;
 case 'confirm': $progress.hide(); $('#filePicker2').removeClass('element-invisible'); $upload.text('开始上传');
 stats = uploader.getStats(); if (stats.successNum && !stats.uploadFailNum) { setState('finish'); return; } break; case 'finish': stats = uploader.getStats(); if (stats.successNum) { //alert('上传成功'); } else { // 没有成功的图片，重设 state = 'done'; location.reload(); } break; }
 updateStatus(); }
 uploader.onUploadProgress = function (file, percentage) { var $li = $('#' + file.id), $percent = $li.find('.progress span');
 $percent.css('width', percentage \* 100 + '%'); percentages[file.id][1] = percentage; updateTotalProgress(); };
 uploader.onFileQueued = function (file) { fileCount++; fileSize += file.size;
 if (fileCount === 1) { $placeHolder.addClass('element-invisible'); $statusBar.show(); }
 addFile(file); setState('ready'); updateTotalProgress(); };
 uploader.onFileDequeued = function (file) { fileCount--; fileSize -= file.size;
 if (!fileCount) { setState('pedding'); }
 removeFile(file); updateTotalProgress();
 }; // 文件上传成功 uploader.on( 'uploadSuccess', function( file,data ) {
 if(data.success==true){ if(images==null){ images=data.result; }else{ images+=","+data.result; } $("#image").val(images); }else{ alert("上传失败:"+data.message) }
 });
 uploader.on('all', function (type) { var stats; switch (type) { case 'uploadFinished': setState('confirm'); break;
 case 'startUpload': setState('uploading'); break;
 case 'stopUpload': setState('paused'); break;
 } });
 uploader.onError = function (code) { if(code=="Q\_TYPE\_DENIED"){ alert("文件类型不支持，仅支持gif,jpg,jpeg,bmp,png格式图片"); }else if(code=="F\_DUPLICATE"){ alert("文件已选中，请勿重复上传"); }else if(code="F\_EXCEED\_SIZE"){ alert("文件大小超出限制，单张图片不得超过5MB"); } else{ alert('Error: ' + code); }
 };
 $upload.on('click', function () { if ($(this).hasClass('disabled')) { return false; }
 if (state === 'ready') { uploader.upload(); } else if (state === 'paused') { uploader.upload(); } else if (state === 'uploading') { uploader.stop(); } });
 $info.on('click', '.retry', function () { uploader.retry(); });
 $info.on('click', '.ignore', function () { alert('已忽略'); });
 $upload.addClass('state-' + state); updateTotalProgress(); });
 })(jQuery);</script></body></html><%! private String htmlspecialchars(String str) { str = str.replaceAll("&", "&amp;"); str = str.replaceAll("<", "&lt;"); str = str.replaceAll(">", "&gt;"); str = str.replaceAll("\"", "&quot;"); return str; }%>

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_b4e38412_20250115_084520.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FExrick%2Fxmall)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FExrick%2Fxmall)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=Exrick%2Fxmall)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[Exrick](/Exrick)
/
**[xmall](/Exrick/xmall)**
Public

* [Notifications](/login?return_to=%2FExrick%2Fxmall) You must be signed in to change notification settings
* [Fork
  2.6k](/login?return_to=%2FExrick%2Fxmall)
* [Star
   7.2k](/login?return_to=%2FExrick%2Fxmall)

基于SOA架构的分布式电商购物商城 前后端分离 前台商城:Vue全家桶 后台管理系统:Dubbo/SSM/Elasticsearch/Redis/MySQL/ActiveMQ/Shiro/Zookeeper等

[xmall.exrick.cn](http://xmall.exrick.cn "http://xmall.exrick.cn")

### License

[GPL-3.0 license](/Exrick/xmall/blob/master/License)

[7.2k
stars](/Exrick/xmall/stargazers) [2.6k
forks](/Exrick/xmall/forks) [Branches](/Exrick/xmall/branches) [Tags](/Exrick/xmall/tags) [Activity](/Exrick/xmall/activity)
 [Star](/login?return_to=%2FExrick%2Fxmall)

 [Notifications](/login?return_to=%2FExrick%2Fxmall) You must be signed in to change notification settings

* [Code](/Exrick/xmall)
* [Issues
  24](/Exrick/xmall/issues)
* [Pull requests
  15](/Exrick/xmall/pulls)
* [Actions](/Exrick/xmall/actions)
* [Projects
  0](/Exrick/xmall/projects)
* [Wiki](/Exrick/xmall/wiki)
* [Security](/Exrick/xmall/security)
* [Insights](/Exrick/xmall/pulse)

Additional navigation options

* [Code](/Exrick/xmall)
* [Issues](/Exrick/xmall/issues)
* [Pull requests](/Exrick/xmall/pulls)
* [Actions](/Exrick/xmall/actions)
* [Projects](/Exrick/xmall/projects)
* [Wiki](/Exrick/xmall/wiki)
* [Security](/Exrick/xmall/security)
* [Insights](/Exrick/xmall/pulse)

# Exrick/xmall

    master[Branches](/Exrick/xmall/branches)[Tags](/Exrick/xmall/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[178 Commits](/Exrick/xmall/commits/master/) | | |
| [.idea](/Exrick/xmall/tree/master/.idea ".idea") | | [.idea](/Exrick/xmall/tree/master/.idea ".idea") |  |  |
| [generatorSqlmapCustom](/Exrick/xmall/tree/master/generatorSqlmapCustom "generatorSqlmapCustom") | | [generatorSqlmapCustom](/Exrick/xmall/tree/master/generatorSqlmapCustom "generatorSqlmapCustom") |  |  |
| [screenshot](/Exrick/xmall/tree/master/screenshot "screenshot") | | [screenshot](/Exrick/xmall/tree/master/screenshot "screenshot") |  |  |
| [study](/Exrick/xmall/tree/master/study "study") | | [study](/Exrick/xmall/tree/master/study "study") |  |  |
| [xmall-common](/Exrick/xmall/tree/master/xmall-common "xmall-common") | | [xmall-common](/Exrick/xmall/tree/master/xmall-common "xmall-common") |  |  |
| [xmall-content](/Exrick/xmall/tree/master/xmall-content "xmall-content") | | [xmall-content](/Exrick/xmall/tree/master/xmall-content "xmall-content") |  |  |
| [xmall-front-web](/Exrick/xmall/tree/master/xmall-front-web "xmall-front-web") | | [xmall-front-web](/Exrick/xmall/tree/master/xmall-front-web "xmall-front-web") |  |  |
| [xmall-manager-web](/Exrick/xmall/tree/master/xmall-manager-web "xmall-manager-web") | | [xmall-manager-web](/Exrick/xmall/tree/master/xmall-manager-web "xmall-manager-web") |  |  |
| [xmall-manager](/Exrick/xmall/tree/master/xmall-manager "xmall-manager") | | [xmall-manager](/Exrick/xmall/tree/master/xmall-manager "xmall-manager") |  |  |
| [xmall-parent](/Exrick/xmall/tree/master/xmall-parent "xmall-parent") | | [xmall-parent](/Exrick/xmall/tree/master/xmall-parent "xmall-parent") |  |  |
| [xmall-search](/Exrick/xmall/tree/master/xmall-search "xmall-search") | | [xmall-search](/Exrick/xmall/tree/master/xmall-search "xmall-search") |  |  |
| [xmall-sso](/Exrick/xmall/tree/master/xmall-sso "xmall-sso") | | [xmall-sso](/Exrick/xmall/tree/master/xmall-sso "xmall-sso") |  |  |
| [xmall](/Exrick/xmall/tree/master/xmall "xmall") | | [xmall](/Exrick/xmall/tree/master/xmall "xmall") |  |  |
| [.gitattributes](/Exrick/xmall/blob/master/.gitattributes ".gitattributes") | | [.gitattributes](/Exrick/xmall/blob/master/.gitattributes ".gitattributes") |  |  |
| [.gitignore](/Exrick/xmall/blob/master/.gitignore ".gitignore") | | [.gitignore](/Exrick/xmall/blob/master/.gitignore ".gitignore") |  |  |
| [License](/Exrick/xmall/blob/master/License "License") | | [License](/Exrick/xmall/blob/master/License "License") |  |  |
| [README.md](/Exrick/xmall/blob/master/README.md "README.md") | | [README.md](/Exrick/xmall/blob/master/README.md "README.md") |  |  |
| View all files | | |

## Repository files navigation

* README
* GPL-3.0 license
# XMall

[![AUR](https://camo.githubusercontent.com/360468bc93c3ff2d066606733af0fa0e140f3fb42f40e9e0588f8fcdfd0e5ba8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f47504c2d76332d726564)](https://github.com/Exrick/xmall/blob/master/License)
[![](https://camo.githubusercontent.com/1f5fa28a692d55d13332d577a220f612a3eec74057c216261f6b6f1c770a5a29/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f417574686f722d45787269636b2d6f72616e67652e737667)](http://blog.exrick.cn)
[![](https://camo.githubusercontent.com/964101971bca7923dd09fdc126ec6a2af1a52b2c66767af2179dd3f3b6c2a9cc/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f76657273696f6e2d312e312d627269676874677265656e)](https://github.com/Exrick/xmall)
[![GitHub stars](https://camo.githubusercontent.com/85d5b6c022fbe1942ec74983ba4cd6b4760acc3271ae3d50970c3959426caf10/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f45787269636b2f786d616c6c2e7376673f7374796c653d736f6369616c266c6162656c3d5374617273)](https://github.com/Exrick/xmall)
[![GitHub forks](https://camo.githubusercontent.com/13ddff209e8443fb7d9f6acf7787b716b2af42d1d6ef09c2503a5131815b6b46/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f666f726b732f45787269636b2f786d616c6c2e7376673f7374796c653d736f6369616c266c6162656c3d466f726b)](https://github.com/Exrick/xmall)

> 作者本科毕业设计项目 期待您的捐赠支持

### [X系列项目宣传视频](https://www.bilibili.com/video/av23121122/)

* 作者亲自制作 [点我观看](https://www.bilibili.com/video/av23121122/)

### 项目已部署，在线Demo

* 前台商城：<http://xmall.exrick.cn/>
* 后台管理系统：<http://xmadmin.exrick.cn/>

### 单体版获取

* 单体XMall系统 非分布式 可跑在1g1核服务器上
* 获取方式：进入商城 <http://xmall.exrick.cn/> 登陆后随意测试支付商品 填写捐赠信息 支付成功后将自动发至您填写的邮箱

### 前台页面为基于Vue的独立项目 请跳转至 [xmall-front](https://github.com/Exrick/xmall-front) 项目仓库查看

### 作者其他项目推荐

* [XPay个人免签收款支付系统](https://github.com/Exrick/xpay) 无需挂机App 自动回调
* [XMall微信小程序APP前端 现已开源！](https://github.com/Exrick/xmall-weapp)

  [![WX20190924-234416@2x.png](https://camo.githubusercontent.com/372c8850246df13f9f786ef035b77d326a6188b12d84893cdbf135ecfb3a950f/68747470733a2f2f73322e617831782e636f6d2f323031392f31302f30362f7563457342442e6d642e706e67)](https://www.bilibili.com/video/av70226175)
* [X-Boot前后端分离开发平台](https://github.com/Exrick/x-boot)

  [![](https://camo.githubusercontent.com/ff07f2aa3a0b2b41e27c97583ab10c97dd5ac4b46e30b2150b3f550d89909300/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323032302f30332f31332f725147415776316838564d654964692e706e67)](https://camo.githubusercontent.com/ff07f2aa3a0b2b41e27c97583ab10c97dd5ac4b46e30b2150b3f550d89909300/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323032302f30332f31332f725147415776316838564d654964692e706e67)
* 个人机器学习笔记

  + [Machine-Learning](https://github.com/Exrick/Machine-Learning)
* Spring Cloud版

  + [X-Cloud](https://github.com/Exrick/x-cloud) 框架开发中

### 基于SOA架构的分布式购物电商商城

* 后台管理系统：管理商品、订单、类目、商品规格属性、用户、权限、系统统计、系统日志以及前台内容等功能
* 前台系统：用户可以在前台系统中进行注册、登录、浏览商品、首页、下单等操作
* 会员系统：用户可以在该系统中查询已下的订单、管理订单、我的优惠券等信息
* 订单系统：提供下单、查询订单、修改订单状态、定时处理订单
* 搜索系统：提供商品的搜索功能
* 单点登录系统：为多个系统之间提供用户登录凭证以及查询登录用户的信息

### v1.1更新日志(需更新前后台代码及SQL)

* 接入自己开源的[XPay个人免签收款支付系统](https://github.com/Exrick/xpay)
* 更新Dubbo(2.6.1)、ES(6.2.3)等依赖版本
* 取消ES需在页面中配置及跨域问题，ES默认配置集群名改为原elasticsearch
* 修复后台统计热卖商品SQL错误，xmall-front-web模块支持SpringMVC文件上传配置
* 修改金额字段类型优化SQL与备注
* 优化后台页面 修复用户修改BUG 优化批量删除 优化商品分类添加
* 重构首页，后台可配置，包括3D轮播图
* 后台新增缓存管理功能菜单 完成订单打印发货等功能，实现快递管理
* 增添订单统计报表
* 修复前后端分离极验验证码session存储问题
* 实现ES IK分词插件扩展词典库管理 增添限流
* 2018.7.22 取消快速搜索接口需前端配置 发送邮件端口改为465
* 2018.7.27 首页导航栏可后台配置
* 2019.10.06 修复分类管理BUG 开源小程序前端
* 注：SKU设计预计将在小程序后台实现
* [极验验证码移除文档](https://github.com/Exrick/xmall/wiki/%E6%9E%81%E9%AA%8C%E7%A7%BB%E9%99%A4%E6%96%87%E6%A1%A3)

[![](https://camo.githubusercontent.com/78d06cc90cfcc3aadc1ee8d506ff87e331f7745d666ebdc73c94c0497498b8cf/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631303939303339652e6a7067 "后台首页")](https://camo.githubusercontent.com/78d06cc90cfcc3aadc1ee8d506ff87e331f7745d666ebdc73c94c0497498b8cf/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631303939303339652e6a7067)

[![](https://camo.githubusercontent.com/18d2e6549052125981992244661cf25eece6c33337dba6cccc2f53c483d33367/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631323538383663612e6a7067 "商品管理")](https://camo.githubusercontent.com/18d2e6549052125981992244661cf25eece6c33337dba6cccc2f53c483d33367/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631323538383663612e6a7067)

[![](https://camo.githubusercontent.com/b60161040af55f7c8fee4f7050fe14a7e1704661030c626300a4609c83f2ae62/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631336263383636662e6a7067 "管理员编辑")](https://camo.githubusercontent.com/b60161040af55f7c8fee4f7050fe14a7e1704661030c626300a4609c83f2ae62/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631336263383636662e6a7067)

[![](https://camo.githubusercontent.com/7d9a6f05b74d91e4828b4b9aae31a4f5211297631378d3c28b795b1506a37503/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631356239353738382e6a7067 "前台首页")](https://camo.githubusercontent.com/7d9a6f05b74d91e4828b4b9aae31a4f5211297631378d3c28b795b1506a37503/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631356239353738382e6a7067)

[![](https://camo.githubusercontent.com/608921e9be83e951314a38ee34dd71fde9dcc7c67d9a361cf11b5633d3b78800/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631373536623262302e6a7067 "ES分词搜索")](https://camo.githubusercontent.com/608921e9be83e951314a38ee34dd71fde9dcc7c67d9a361cf11b5633d3b78800/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631373536623262302e6a7067)

### 项目架构及功能模块图

[![](https://camo.githubusercontent.com/599d4edd8afe8e8a7f7ac0c71baa104211c035bb10ae9c50b8985fe5596604a4/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631393236393639622e706e67)](https://camo.githubusercontent.com/599d4edd8afe8e8a7f7ac0c71baa104211c035bb10ae9c50b8985fe5596604a4/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631393236393639622e706e67)

[![](https://camo.githubusercontent.com/0f52fc08cfca54da03494b389b8ada7aed32598cc822af1c703669b322d6c0cd/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631616132666465652e6a7067)](https://camo.githubusercontent.com/0f52fc08cfca54da03494b389b8ada7aed32598cc822af1c703669b322d6c0cd/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631616132666465652e6a7067)

[![](https://camo.githubusercontent.com/55bda66470d472a6410b0e4b527756b3ea239d53c02a6166d5390c3ff14c549c/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631633534636235352e6a7067)](https://camo.githubusercontent.com/55bda66470d472a6410b0e4b527756b3ea239d53c02a6166d5390c3ff14c549c/68747470733a2f2f6f6f6f2e306f302e6f6f6f2f323031382f30372f32322f356235343631633534636235352e6a7067)

### 前端所用技术

* 后台页面
  + 感谢 [H-ui](http://www.h-ui.net/)、[FlatLab](https://github.com/Exrick/xmall/blob/master/study/FlatLab.md) 提供静态页面支持
  + [Ztree](http://www.treejs.cn/v3/main.php#_zTreeInfo)：jQuery树插件
  + [DataTables](http://www.datatables.club/)：jQuery表格插件
  + [Layer](http://layer.layui.com/)：web弹层组件
  + [Distpicker](https://github.com/fengyuanchen/distpicker)：中国省市区地址三级联动插件
  + [KindEditor](https://github.com/kindsoft/kindeditor)：富文本编辑器 简洁方便 没UEditor那么多坑
  + [WebUploader](http://fex.baidu.com/webuploader/getting-started.html)：百度文件上传插件
  + [HighCharts](http://www.hcharts.cn/)：图表库
  + [不蒜子](http://busuanzi.ibruce.info/)：极简网页计数器
* 前台页面
  + 详情请跳转至 [xmall-front](https://github.com/Exrick/xmall-front) 项目仓库
  + 感谢 [yucccc](https://github.com/yucccc) 的开源 [vue-mall](https://github.com/yucccc/vue-mall) 项目提供前端页面及框架支持
  + Vue2 + Vuex + Vue Router + Element UI + ES6 + webpack + axios + Node.js

### 后端所用技术

##### 各框架依赖版本皆使用目前最新版本 可进入xmall-parent中 [pom.xml](https://github.com/Exrick/xmall/blob/master/xmall-parent/pom.xml) 查看

* Spring
* [SpringMVC](https://github.com/Exrick/xmall/blob/master/study/SpringMVC.md)
* MyBatis
* [Dubbo](https://github.com/Exrick/xmall/blob/master/study/Dubbo.md)
* [ZooKeeper](https://github.com/Exrick/xmall/blob/master/study/Zookeeper.md)
* MySQL
* Mycat：数据库分库分表中间件
* [Redis](https://github.com/Exrick/xmall/blob/master/study/Redis.md)：缓存
* [Elasticsearch](https://github.com/Exrick/xmall/blob/master/study/Elasticsearch.md)：基于Lucene分布式搜索引擎
* [ActiveMQ](https://github.com/Exrick/xmall/blob/master/study/ActiveMQ.md)：消息队列
* [Druid](http://druid.io/)：阿里高性能数据库连接池
* Shiro：安全框架
* [Swagger2](https://github.com/Exrick/xmall/blob/master/study/Swagger2.md)：Api文档生成
* Docker
* [Nginx](https://github.com/Exrick/xmall/blob/master/study/Nginx.md)
* Tomcat
* [Maven](https://github.com/Exrick/xmall/blob/master/study/Maven.md)
* 第三方SDK
  + [七牛云文件存储服务](https://developer.qiniu.com/kodo/sdk/1239/java)
  + ~~[极验Test-button人机验证码](http://www.geetest.com/Test-button.html)~~ 因其收费见[极验验证码移除文档](https://github.com/Exrick/xmall/wiki/%E6%9E%81%E9%AA%8C%E7%A7%BB%E9%99%A4%E6%96%87%E6%A1%A3)
* 第三方插件
  + [hotjar](https://github.com/Exrick/xmall/blob/master/study/hotjar.md)：一体化分析和反馈
  + [搜狐畅言评论插件](http://changyan.kuaizhan.com/)
* 第三方接口
  + [Mob全国天气预报接口](http://api.mob.com/#/apiwiki/weather)：需注册账号创建应用后申请填入AppKey
* 其它开发工具
  + Jenkins：持续集成
  + [JRebel](https://github.com/Exrick/xmall/blob/master/study/JRebel.md)：开发热更新
  + [阿里JAVA开发规约插件](https://github.com/alibaba/p3c)

### 文件说明

* `xmall` 文件夹提供部分依赖与sql文件
  + xmall.sql：数据库文件
  + dubbo.xsd：需手动配置避免报错
  + redis-3.0.0.gem：Redis集群搭建所需Ruby库
* `generatorSqlmapCustom` 文件夹为 [Mybatis Generator](http://www.mybatis.org/generator/) 逆向生成工具，且已配置好maven插件

### 本地开发运行部署

* 下载zip直接解压或安装git后执行克隆命令 `git clone https://github.com/Exrick/xmall.git`
* 安装各中间件并启动：[ZooKeeper](https://github.com/Exrick/xmall/blob/master/study/Zookeeper.md)、[Redis](https://github.com/Exrick/xmall/blob/master/study/Redis.md)、[ActiveMQ](https://github.com/Exrick/xmall/blob/master/study/ActiveMQ.md)、[Elasticsearch](https://github.com/Exrick/xmall/blob/master/study/Elasticsearch.md)
* 修改各配置文件相应依赖IP配置(默认本地127.0.0.1)，以及七牛云、极验配置、天气接口在 `xmall-common - utils` 中找到修改，XPay邮箱配置在 `manager-service与sso-service` 中
* [Maven安装和在IDEA中配置](https://github.com/Exrick/xmall/blob/master/study/Maven.md)
* 使用IDEA([破解/免费注册](http://idea.lanyus.com/)) `File-Open` 直接打开xmall项目，点击右下角 `Import Changes` 等待安装完依赖即可
* MySQL数据库新建 `xmall` 数据库，运行sql文件，注意在有 `db.properties` 的模块中修改你的数据库连接配置
* 按照依赖顺序分别在每个模块文件夹根目录执行 `mvn install` 命令
* 项目需运行除 `xmall-parent` `xmall-common` 以外其它所有6个服务，且都已配置好Tomcat插件, 执行命令 `mvn tomcat7:run` 或在IDEA中使用插件(`View - Tool Buttons - 右侧菜单Maven Projects - tomcat7 - tomcat7:run`)运行即可，当然可自行配置
* 后端管理系统默认端口8888 <http://localhost:8888> 管理员账密admin|123456
* 前端项目接口默认端口7777 前台页面请启动基于Vue的 [xmall-front](https://github.com/Exrick/xmall-front) 项目，并修改其接口配置

### 相关技术点说明

* ES-IK分词插件词典库扩展

  + 详见 [elasticsearch-analysis-ik插件作者项目README说明](https://github.com/medcl/elasticsearch-analysis-ik)
  + 本项目中扩展接口和禁用词接口分别为 `http://localhost:8888/getDictList` 和 `http://localhost:8888/getStopDictList`，将以上2个接口配置进IK插件扩展配置文件{conf}/analysis-ik/config/IKAnalyzer.cfg.xml 或者 {plugins}/elasticsearch-analysis-ik-\*/config/IKAnalyzer.cfg.xml中即可，示例：
  ```
  <?xml version="1.0" encoding="UTF-8"?>
  <!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
  <properties>
      <comment>IK Analyzer 扩展配置</comment>
      <!--用户可以在这里配置远程扩展字典 -->
      <entry key="remote_ext_dict">http://localhost:8888/getDictList</entry>
      <!--用户可以在这里配置远程扩展停止词字典-->
      <entry key="remote_ext_stopwords">http://localhost:8888/getStopDictList</entry>
  </properties>
  ```
* 限流

  + `xmall-front-web` 中已配置限流，配置文件 `resource.properties` 中可配置全局限流，示例：

    ```
    #启用全局限流
    xmall.rateLimit.enable=true
    #每1秒内
    xmall.rateLimit.timeout=1000
    #限制10个请求
    xmall.rateLimit.limit=10
    ```
  + 指定方法限流注解

    ```
    @RateLimiter(limit = 1, timeout = 5000)
    ```
  + 支持多维度IP、uid等限流 详见代码

### 技术疑问交流

* QQ交流群 `475743731(付费)`，可获取各项目详细图文文档、xmall毕设PPT [![](https://camo.githubusercontent.com/103b8e4a6b0dd6e2e24dab3c52d43b1e0485cb306c2cbf5b5b278c78d49e6be7/687474703a2f2f7075622e69647171696d672e636f6d2f7770612f696d616765732f67726f75702e706e67)](http://shang.qq.com/wpa/qunwpa?idkey=7b60cec12ba93ebed7568b0a63f22e6e034c0d1df33125ac43ed753342ec6ce7)
* 免费交流群 `562962309` [![](https://camo.githubusercontent.com/103b8e4a6b0dd6e2e24dab3c52d43b1e0485cb306c2cbf5b5b278c78d49e6be7/687474703a2f2f7075622e69647171696d672e636f6d2f7770612f696d616765732f67726f75702e706e67)](http://shang.qq.com/wpa/qunwpa?idkey=52f6003e230b26addeed0ba6cf343fcf3ba5d97829d17f5b8fa5b151dba7e842)
* 作者博客：<http://blog.exrick.cn>

### 商用授权

* 个人学习使用遵循GPL开源协议
* 商用需联系作者低价授权

### [捐赠](http://xmall.exrick.cn)

## About

基于SOA架构的分布式电商购物商城 前后端分离 前台商城:Vue全家桶 后台管理系统:Dubbo/SSM/Elasticsearch/Redis/MySQL/ActiveMQ/Shiro/Zookeeper等

[xmall.exrick.cn](http://xmall.exrick.cn "http://xmall.exrick.cn")

### Topics

[redis](/topics/redis "Topic: redis")
[elasticsearch](/topics/elasticsearch "Topic: elasticsearch")
[vue](/topics/vue "Topic: vue")
[soa](/topics/soa "Topic: soa")
[shiro](/topics/shiro "Topic: shiro")
[dubbo](/topics/dubbo "Topic: dubbo")
[ssm](/topics/ssm "Topic: ssm")
[mq](/topics/mq "Topic: mq")

### Resources

[Readme](#readme-ov-file)
### License

[GPL-3.0 license](#GPL-3.0-1-ov-file)

[Activity](/Exrick/xmall/activity)
### Stars

[**7.2k**
stars](/Exrick/xmall/stargazers)
### Watchers

[**370**
watching](/Exrick/xmall/watchers)
### Forks

[**2.6k**
forks](/Exrick/xmall/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2FExrick%2Fxmall&report=Exrick+%28user%29)

## [Releases](/Exrick/xmall/releases)

No releases published

## [Packages 0](/users/Exrick/packages?repo_name=xmall)

No packages published

## Languages

* [Java
  95.4%](/Exrick/xmall/search?l=java)
* [HTML
  4.5%](/Exrick/xmall/search?l=html)
* Other
  0.1%

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_7ca27693_20250115_084530.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FExrick%2Fxmall%2Fblob%2Fb146cceb21ca42d4237f31dbd7af5ced49048a56%2Fxmall-manager-web%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjsp%2Fproduct-add.jsp)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FExrick%2Fxmall%2Fblob%2Fb146cceb21ca42d4237f31dbd7af5ced49048a56%2Fxmall-manager-web%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fjsp%2Fproduct-add.jsp)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=Exrick%2Fxmall)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[Exrick](/Exrick)
/
**[xmall](/Exrick/xmall)**
Public

* [Notifications](/login?return_to=%2FExrick%2Fxmall) You must be signed in to change notification settings
* [Fork
  2.6k](/login?return_to=%2FExrick%2Fxmall)
* [Star
   7.2k](/login?return_to=%2FExrick%2Fxmall)

* [Code](/Exrick/xmall)
* [Issues
  24](/Exrick/xmall/issues)
* [Pull requests
  15](/Exrick/xmall/pulls)
* [Actions](/Exrick/xmall/actions)
* [Projects
  0](/Exrick/xmall/projects)
* [Wiki](/Exrick/xmall/wiki)
* [Security](/Exrick/xmall/security)
* [Insights](/Exrick/xmall/pulse)

Additional navigation options

* [Code](/Exrick/xmall)
* [Issues](/Exrick/xmall/issues)
* [Pull requests](/Exrick/xmall/pulls)
* [Actions](/Exrick/xmall/actions)
* [Projects](/Exrick/xmall/projects)
* [Wiki](/Exrick/xmall/wiki)
* [Security](/Exrick/xmall/security)
* [Insights](/Exrick/xmall/pulse)

## Files

 b146cce
## Breadcrumbs

1. [xmall](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56)
2. /[xmall-manager-web](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web)
3. /[src](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src)
4. /[main](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main)
5. /[webapp](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp)
6. /[WEB-INF](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF)
7. /[jsp](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF/jsp)
/
# product-add.jsp

Copy path Blame  Blame
## Latest commit

## History

[History](/Exrick/xmall/commits/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF/jsp/product-add.jsp)862 lines (739 loc) · 33 KB b146cce
## Breadcrumbs

1. [xmall](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56)
2. /[xmall-manager-web](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web)
3. /[src](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src)
4. /[main](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main)
5. /[webapp](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp)
6. /[WEB-INF](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF)
7. /[jsp](/Exrick/xmall/tree/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF/jsp)
/
# product-add.jsp

Top
## File metadata and controls

* Code
* Blame

862 lines (739 loc) · 33 KB[Raw](https://github.com/Exrick/xmall/raw/b146cceb21ca42d4237f31dbd7af5ced49048a56/xmall-manager-web/src/main/webapp/WEB-INF/jsp/product-add.jsp)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709710711712713714715716717718719720721722723724725726727728729730731732733734735736737738739740741742743744745746747748749750751752753754755756757758759760761762763764765766767768769770771772773774775776777778779780781782783784785786787788789790791792793794795796797798799800801802803804805806807808809810811812813814815816817818819820821822823824825826827828829830831832833834835836837838839840841842843844845846847848849850851852853854855856857858859860861862<%@ page contentType="text/html;charset=UTF-8" language="java" %><% request.setCharacterEncoding("UTF-8"); String htmlData = request.getParameter("detail") != null ? request.getParameter("detail") : "";%><!--\_meta 作为公共模版分离出去--><!DOCTYPE HTML><html><head> <meta charset="utf-8"> <meta name="renderer" content="webkit|ie-comp|ie-stand"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" /> <meta http-equiv="Cache-Control" content="no-siteapp" /> <link rel="Bookmark" href="/icon/favicon.ico" > <link rel="Shortcut Icon" href="/icon/favicon.ico" /> <!--[if lt IE 9]> <script type="text/javascript" src="lib/html5shiv.js"></script> <script type="text/javascript" src="lib/respond.min.js"></script>
 <![endif]--> <link rel="stylesheet" type="text/css" href="static/h-ui/css/H-ui.min.css" /> <link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/H-ui.admin.css" /> <link rel="stylesheet" type="text/css" href="lib/Hui-iconfont/1.0.8/iconfont.css" />
 <link rel="stylesheet" type="text/css" href="static/h-ui.admin/skin/default/skin.css" id="skin" /> <link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/style.css" /> <!--[if IE 6]> <script type="text/javascript" src="lib/DD\_belatedPNG\_0.0.8a-min.js" ></script> <script>DD\_belatedPNG.fix('\*');</script> <![endif]--> <!--/meta 作为公共模版分离出去-->
 <link href="lib/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css" /></head><body><div class="page-container"> <%=htmlData%> <form name="product-add" action="" method="post" class="form form-horizontal" id="product-add"> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>产品标题：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" class="input-text" value="" placeholder="" name="title"> </div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>简介描述：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" class="input-text" value="" placeholder="" name="sellPoint"> </div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>商品分类：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" hidden class="input-text" id="cid" name="cid" > <input type="text" onclick="chooseCategory()" readonly class="input-text" value="" placeholder="请点击选择按钮选择商品分类" id="cname" name="cname" style="width:50%"> <input type="button" onclick="chooseCategory()" class="btn btn-secondary radius" value="选择类别"> </div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>产品展示价格：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" name="price" placeholder="请输入正确金额" value="" class="input-text" style="width:50%"> 元</div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>库存数量：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" name="num" id="num" placeholder="0~99999" value="" class="input-text" style="width:50%"> 件</div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>购买限制数量：</label> <div class="formControls col-xs-8 col-sm-9"> <input type="text" name="limitNum" id="limitNum" placeholder="0~9999" value="" class="input-text" style="width:50%"> 件</div> </div> <input type="text" name="image" id="image" hidden/> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2"><span class="c-red">\*</span>展示缩略图片上传：</label> <div class="formControls col-xs-8 col-sm-9"> <div class="uploader-list-container"> <div class="queueList"> <div id="dndArea" class="placeholder"> <div name="filePicker" id="filePicker-2"></div> <p>或将照片拖到这里，最多可选5张</p> </div> </div> <div class="statusBar" style="display:none;"> <div class="progress"> <span class="text">0%</span> <span class="percentage"></span> </div> <div class="info"></div> <div class="btns"> <div id="filePicker2"></div> <div class="uploadBtn">开始上传</div> </div> </div> </div> </div> </div> <div class="row cl"> <label class="form-label col-xs-4 col-sm-2">商品详情：</label> <div class="formControls col-xs-8 col-sm-9"> <textarea name="detail" style="width:100%;visibility:hidden;"><%=htmlspecialchars(htmlData)%></textarea> </div> </div> <div class="row cl"> <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2"> <button id="saveButton" class="btn btn-primary radius" type="submit"><i class="Hui-iconfont">&#xe632;</i> 保存并发布</button> <button onClick="layer\_close();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button> </div> </div> </form></div>
<!--\_footer 作为公共模版分离出去--><script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script><script type="text/javascript" src="lib/layer/2.4/layer.js"></script><script type="text/javascript" src="static/h-ui/js/H-ui.min.js"></script><script type="text/javascript" src="static/h-ui.admin/js/H-ui.admin.js"></script> <!--/\_footer 作为公共模版分离出去-->
<!--请在下方写此页面业务相关的脚本--><script type="text/javascript" src="lib/My97DatePicker/4.8/WdatePicker.js"></script><script type="text/javascript" src="lib/jquery.validation/1.14.0/jquery.validate.js"></script><script type="text/javascript" src="lib/jquery.validation/1.14.0/validate-methods.js"></script><script type="text/javascript" src="lib/jquery.validation/1.14.0/messages\_zh.js"></script><script type="text/javascript" src="lib/webuploader/0.1.5/webuploader.min.js"></script><link rel="stylesheet" href="lib/kindeditor/themes/default/default.css" /><link rel="stylesheet" href="lib/kindeditor/plugins/code/prettify.css" /><script charset="utf-8" src="lib/kindeditor/kindeditor.js"></script><script charset="utf-8" src="lib/kindeditor/lang/zh-CN.js"></script><script charset="utf-8" src="lib/kindeditor/plugins/code/prettify.js"></script><script type="text/javascript"> var editor;
 jQuery.validator.addMethod("decimalsValue",function(value, element) { var decimalsValue =/^(?!0+(?:\.0+)?$)(?:[1-9]\d\*|0)(?:\.\d{1,2})?$/ ; return this.optional(element) || (decimalsValue.test(value)); }, "金额必须大于0并且只能精确到分");
 function giveCid(cid){ $("#cid").val(cid); }
 function giveCName(cname){ $("#cname").val(cname); }
 function chooseCategory(){ layer\_show("选择商品分类","choose-category",300,510); }
 //保存发布 $("#product-add").validate({ rules:{ title:{ required:true, }, sellPoint:{ required:true, }, cname:{ required:true, }, price:{ decimalsValue:true, required:true, maxlength:10, }, num:{ digits:true, required:true, maxlength:5, }, limitNum:{ digits:true, required:true, maxlength:4, }, }, onkeyup:false, focusCleanup:false, success:"valid", submitHandler:function(form){ if(images==null){ layer.alert('请上传商品展示缩略图! ', {title: '错误信息',icon: 0}); return; } var index = layer.load(3); editor.sync(); $(form).ajaxSubmit({ url: "/item/add", type: "POST", success: function(data) { layer.close(index); if(data.success==true){ if(parent.location.pathname!='/'){ parent.productCount(); parent.refresh(); parent.msgSuccess("添加成功!"); var index = parent.layer.getFrameIndex(window.name); parent.layer.close(index); }else{ layer.confirm('添加成功!', { btn: ['确认'],icon: 1 }, function(){ var index = parent.layer.getFrameIndex(window.name); parent.layer.close(index); }); } }else{ layer.alert(data.message, {title: '错误信息',icon: 2}); } }, error:function(XMLHttpRequest) { layer.close(index); layer.alert('数据处理失败! 错误码:'+XMLHttpRequest.status,{title: '错误信息',icon: 2}); } }); } });
 KindEditor.ready(function(K) { editor = K.create('textarea[name="detail"]', { cssPath : 'lib/kindeditor/plugins/code/prettify.css', uploadJson : '/kindeditor/imageUpload', fileManagerJson : '/kindeditor/imageUpload', allowFileManager : false, height : '400px', afterCreate : function() { var self = this; K.ctrl(document, 13, function() { self.sync(); document.forms['product-add'].submit(); }); K.ctrl(self.edit.doc, 13, function() { self.sync(); document.forms['product-add'].submit(); }); } }); prettyPrint(); });
 var images=null;
 (function ($) { $('.skin-minimal input').iCheck({ checkboxClass: 'icheckbox-blue', radioClass: 'iradio-blue', increaseArea: '20%' });
 // 当domReady的时候开始初始化 $(function () { var $wrap = $('.uploader-list-container'),
 // 图片容器 $queue = $('<ul class="filelist"></ul>') .appendTo($wrap.find('.queueList')),
 // 状态栏，包括进度和控制按钮 $statusBar = $wrap.find('.statusBar'),
 // 文件总体选择信息。 $info = $statusBar.find('.info'),
 // 上传按钮 $upload = $wrap.find('.uploadBtn'),
 // 没选择文件之前的内容。 $placeHolder = $wrap.find('.placeholder'),
 $progress = $statusBar.find('.progress').hide(),
 // 添加的文件数量 fileCount = 0,
 // 添加的文件总大小 fileSize = 0,
 // 优化retina, 在retina下这个值是2 ratio = window.devicePixelRatio || 1,
 // 缩略图大小 thumbnailWidth = 110 \* ratio, thumbnailHeight = 110 \* ratio,
 // 可能有pedding, ready, uploading, confirm, done. state = 'pedding',
 // 所有文件的进度信息，key为file id percentages = {}, // 判断浏览器是否支持图片的base64 isSupportBase64 = (function () { var data = new Image(); var support = true; data.onload = data.onerror = function () { if (this.width != 1 || this.height != 1) { support = false; } } data.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="; return support; })(),
 // 检测是否已经安装flash，检测flash的版本 flashVersion = (function () { var version;
 try { version = navigator.plugins['Shockwave Flash']; version = version.description; } catch (ex) { try { version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash') .GetVariable('$version'); } catch (ex2) { version = '0.0'; } } version = version.match(/\d+/g); return parseFloat(version[0] + '.' + version[1], 10); })(),
 supportTransition = (function () { var s = document.createElement('p').style, r = 'transition' in s || 'WebkitTransition' in s || 'MozTransition' in s || 'msTransition' in s || 'OTransition' in s; s = null; return r; })(),
 // WebUploader实例 uploader;
 if (!WebUploader.Uploader.support('flash') && WebUploader.browser.ie) {
 // flash 安装了但是版本过低。 if (flashVersion) { (function (container) { window['expressinstallcallback'] = function (state) { switch (state) { case 'Download.Cancelled': alert('您取消了更新！') break;
 case 'Download.Failed': alert('安装失败') break;
 default: alert('安装已成功，请刷新！'); break; } delete window['expressinstallcallback']; };
 var swf = 'expressInstall.swf'; // insert flash object var html = '<object type="application/' + 'x-shockwave-flash" data="' + swf + '" ';
 if (WebUploader.browser.ie) { html += 'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '; }
 html += 'width="100%" height="100%" style="outline:0">' + '<param name="movie" value="' + swf + '" />' + '<param name="wmode" value="transparent" />' + '<param name="allowscriptaccess" value="always" />' + '</object>';
 container.html(html);
 })($wrap);
 // 压根就没有安转。 } else { $wrap.html('<a href="http://www.adobe.com/go/getflashplayer" target="\_blank" border="0"><img alt="get flash player" src="http://www.adobe.com/macromedia/style\_guide/images/160x41\_Get\_Flash\_Player.jpg" /></a>'); }
 return; } else if (!WebUploader.Uploader.support()) { alert('Web Uploader 不支持您的浏览器！'); return; }
 // 实例化 uploader = WebUploader.create({ pick: { id: '#filePicker-2', label: '点击选择图片' }, formData: { uid: 123 }, dnd: '#dndArea', paste: '#uploader', swf: 'lib/webuploader/0.1.5/Uploader.swf', chunked: false, chunkSize: 512 \* 1024, server: '/image/imageUpload', // runtimeOrder: 'flash',
 accept: { title: 'Images', extensions: 'gif,jpg,jpeg,bmp,png', //mimeTypes: 'image/\*' },
 // 禁掉全局的拖拽功能。这样不会出现图片拖进页面的时候，把图片打开。 disableGlobalDnd: true, fileNumLimit: 5, fileSizeLimit: 25 \* 1024 \* 1024, // 25 M fileSingleSizeLimit: 5 \* 1024 \* 1024 // 5 M });
 // 拖拽时不接受 js, txt 文件。 uploader.on('dndAccept', function (items) { var denied = false, len = items.length, i = 0, // 修改js类型 unAllowed = 'text/plain;application/javascript ';
 for (; i < len; i++) { // 如果在列表里面 if (~unAllowed.indexOf(items[i].type)) { denied = true; break; } }
 return !denied; });
 uploader.on('dialogOpen', function () { console.log('here'); });
 // uploader.on('filesQueued', function() { // uploader.sort(function( a, b ) { // if ( a.name < b.name ) // return -1; // if ( a.name > b.name ) // return 1; // return 0; // }); // });
 // 添加“添加文件”的按钮， uploader.addButton({ id: '#filePicker2', label: '继续添加' });
 uploader.on('ready', function () { window.uploader = uploader; });
 // 当有文件添加进来时执行，负责view的创建 function addFile(file) { var $li = $('<li id="' + file.id + '">' + '<p class="title">' + file.name + '</p>' + '<p class="imgWrap"></p>' + '<p class="progress"><span></span></p>' + '</li>'),
 $btns = $('<div class="file-panel">' + '<span class="cancel">删除</span>' + '<span class="rotateRight">向右旋转</span>' + '<span class="rotateLeft">向左旋转</span></div>').appendTo($li), $prgress = $li.find('p.progress span'), $wrap = $li.find('p.imgWrap'), $info = $('<p class="error"></p>'),
 showError = function (code) { switch (code) { case 'exceed\_size': text = '文件大小超出'; break;
 case 'interrupt': text = '上传暂停'; break;
 default: text = '上传失败，请重试'; break; }
 $info.text(text).appendTo($li); };
 if (file.getStatus() === 'invalid') { showError(file.statusText); } else { // @todo lazyload $wrap.text('预览中'); uploader.makeThumb(file, function (error, src) { var img;
 if (error) { $wrap.text('不能预览'); return; }
 if (isSupportBase64) { img = $('<img src="' + src + '">'); $wrap.empty().append(img); } else { $.ajax('lib/webuploader/0.1.5/server/preview.php', { method: 'POST', data: src, dataType: 'json' }).done(function (response) { if (response.result) { img = $('<img src="' + response.result + '">'); $wrap.empty().append(img); } else { $wrap.text("预览出错"); } }); } }, thumbnailWidth, thumbnailHeight);
 percentages[file.id] = [file.size, 0]; file.rotation = 0; }
 file.on('statuschange', function (cur, prev) { if (prev === 'progress') { $prgress.hide().width(0); } else if (prev === 'queued') { $li.off('mouseenter mouseleave'); $btns.remove(); }
 // 成功 if (cur === 'error' || cur === 'invalid') { console.log(file.statusText); showError(file.statusText); percentages[file.id][1] = 1; } else if (cur === 'interrupt') { showError('interrupt'); } else if (cur === 'queued') { percentages[file.id][1] = 0; } else if (cur === 'progress') { $info.remove(); $prgress.css('display', 'block'); } else if (cur === 'complete') { $li.append('<span class="success"></span>'); }
 $li.removeClass('state-' + prev).addClass('state-' + cur); });
 $li.on('mouseenter', function () { $btns.stop().animate({height: 30}); });
 $li.on('mouseleave', function () { $btns.stop().animate({height: 0}); });
 $btns.on('click', 'span', function () { var index = $(this).index(), deg;
 switch (index) { case 0: uploader.removeFile(file); return;
 case 1: file.rotation += 90; break;
 case 2: file.rotation -= 90; break; }
 if (supportTransition) { deg = 'rotate(' + file.rotation + 'deg)'; $wrap.css({ '-webkit-transform': deg, '-mos-transform': deg, '-o-transform': deg, 'transform': deg }); } else { $wrap.css('filter', 'progid:DXImageTransform.Microsoft.BasicImage(rotation=' + (~~((file.rotation / 90) % 4 + 4) % 4) + ')'); // use jquery animate to rotation // $({ // rotation: rotation // }).animate({ // rotation: file.rotation // }, { // easing: 'linear', // step: function( now ) { // now = now \* Math.PI / 180;
 // var cos = Math.cos( now ), // sin = Math.sin( now );
 // $wrap.css( 'filter', "progid:DXImageTransform.Microsoft.Matrix(M11=" + cos + ",M12=" + (-sin) + ",M21=" + sin + ",M22=" + cos + ",SizingMethod='auto expand')"); // } // }); }
 });
 $li.appendTo($queue); }
 // 负责view的销毁 function removeFile(file) { var $li = $('#' + file.id);
 delete percentages[file.id]; updateTotalProgress(); $li.off().find('.file-panel').off().end().remove(); }
 function updateTotalProgress() { var loaded = 0, total = 0, spans = $progress.children(), percent;
 $.each(percentages, function (k, v) { total += v[0]; loaded += v[0] \* v[1]; });
 percent = total ? loaded / total : 0;
 spans.eq(0).text(Math.round(percent \* 100) + '%'); spans.eq(1).css('width', Math.round(percent \* 100) + '%'); updateStatus(); }
 function updateStatus() { var text = '', stats;
 if (state === 'ready') { text = '选中' + fileCount + '张图片，共' + WebUploader.formatSize(fileSize) + '。'; } else if (state === 'confirm') { stats = uploader.getStats(); if (stats.uploadFailNum) { text = '已成功上传' + stats.successNum + '张照片，' + stats.uploadFailNum + '张照片上传失败，<a class="retry" href="#">重新上传</a>失败图片或<a class="ignore" href="#">忽略</a>' }
 } else { stats = uploader.getStats(); text = '共' + fileCount + '张（' + WebUploader.formatSize(fileSize) + '），已上传' + stats.successNum + '张';
 if (stats.uploadFailNum) { text += '，失败' + stats.uploadFailNum + '张'; } }
 $info.html(text); }
 function setState(val) { var file, stats;
 if (val === state) { return; }
 $upload.removeClass('state-' + state); $upload.addClass('state-' + val); state = val;
 switch (state) { case 'pedding': $placeHolder.removeClass('element-invisible'); $queue.hide(); $statusBar.addClass('element-invisible'); uploader.refresh(); break;
 case 'ready': $placeHolder.addClass('element-invisible'); $('#filePicker2').removeClass('element-invisible'); $queue.show(); $statusBar.removeClass('element-invisible'); uploader.refresh(); break;
 case 'uploading': $('#filePicker2').addClass('element-invisible'); $progress.show(); $upload.text('暂停上传'); break;
 case 'paused': $progress.show(); $upload.text('继续上传'); break;
 case 'confirm': $progress.hide(); $('#filePicker2').removeClass('element-invisible'); $upload.text('开始上传');
 stats = uploader.getStats(); if (stats.successNum && !stats.uploadFailNum) { setState('finish'); return; } break; case 'finish': stats = uploader.getStats(); if (stats.successNum) { //alert('上传成功'); } else { // 没有成功的图片，重设 state = 'done'; location.reload(); } break; }
 updateStatus(); }
 uploader.onUploadProgress = function (file, percentage) { var $li = $('#' + file.id), $percent = $li.find('.progress span');
 $percent.css('width', percentage \* 100 + '%'); percentages[file.id][1] = percentage; updateTotalProgress(); };
 uploader.onFileQueued = function (file) { fileCount++; fileSize += file.size;
 if (fileCount === 1) { $placeHolder.addClass('element-invisible'); $statusBar.show(); }
 addFile(file); setState('ready'); updateTotalProgress(); };
 uploader.onFileDequeued = function (file) { fileCount--; fileSize -= file.size;
 if (!fileCount) { setState('pedding'); }
 removeFile(file); updateTotalProgress();
 }; // 文件上传成功 uploader.on( 'uploadSuccess', function( file,data ) {
 if(data.success==true){ if(images==null){ images=data.result; }else{ images+=","+data.result; } $("#image").val(images); }else{ alert("上传失败:"+data.message) }
 });
 uploader.on('all', function (type) { var stats; switch (type) { case 'uploadFinished': setState('confirm'); break;
 case 'startUpload': setState('uploading'); break;
 case 'stopUpload': setState('paused'); break;
 } });
 uploader.onError = function (code) { if(code=="Q\_TYPE\_DENIED"){ alert("文件类型不支持，仅支持gif,jpg,jpeg,bmp,png格式图片"); }else if(code=="F\_DUPLICATE"){ alert("文件已选中，请勿重复上传"); }else if(code="F\_EXCEED\_SIZE"){ alert("文件大小超出限制，单张图片不得超过5MB"); } else{ alert('Error: ' + code); }
 };
 $upload.on('click', function () { if ($(this).hasClass('disabled')) { return false; }
 if (state === 'ready') { uploader.upload(); } else if (state === 'paused') { uploader.upload(); } else if (state === 'uploading') { uploader.stop(); } });
 $info.on('click', '.retry', function () { uploader.retry(); });
 $info.on('click', '.ignore', function () { alert('已忽略'); });
 $upload.addClass('state-' + state); updateTotalProgress(); });
 })(jQuery);</script></body></html><%! private String htmlspecialchars(String str) { str = str.replaceAll("&", "&amp;"); str = str.replaceAll("<", "&lt;"); str = str.replaceAll(">", "&gt;"); str = str.replaceAll("\"", "&quot;"); return str; }%>

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


