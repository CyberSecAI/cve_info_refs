=== Content from github.com_2e899fc9_20250114_184855.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdrogonframework%2Fdrogon%2Fwiki%2FENG-02-Installation)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdrogonframework%2Fdrogon%2Fwiki%2FENG-02-Installation)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fwiki%2Fshow&source=header-repo&source_repo=drogonframework%2Fdrogon)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[drogonframework](/drogonframework)
/
**[drogon](/drogonframework/drogon)**
Public

* [Notifications](/login?return_to=%2Fdrogonframework%2Fdrogon) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2Fdrogonframework%2Fdrogon)
* [Star
   11.8k](/login?return_to=%2Fdrogonframework%2Fdrogon)

* [Code](/drogonframework/drogon)
* [Issues
  279](/drogonframework/drogon/issues)
* [Pull requests
  28](/drogonframework/drogon/pulls)
* [Discussions](/drogonframework/drogon/discussions)
* [Actions](/drogonframework/drogon/actions)
* [Projects
  0](/drogonframework/drogon/projects)
* [Wiki](/drogonframework/drogon/wiki)
* [Security](/drogonframework/drogon/security)
* [Insights](/drogonframework/drogon/pulse)

Additional navigation options

* [Code](/drogonframework/drogon)
* [Issues](/drogonframework/drogon/issues)
* [Pull requests](/drogonframework/drogon/pulls)
* [Discussions](/drogonframework/drogon/discussions)
* [Actions](/drogonframework/drogon/actions)
* [Projects](/drogonframework/drogon/projects)
* [Wiki](/drogonframework/drogon/wiki)
* [Security](/drogonframework/drogon/security)
* [Insights](/drogonframework/drogon/pulse)

# ENG 02 Installation

[Jump to bottom](#wiki-pages-box)

ProTankerAlfa edited this page May 20, 2024
·
[25 revisions](/drogonframework/drogon/wiki/ENG-02-Installation/_history)

##### Other languages: [简体中文](CHN-02-%E5%AE%89%E8%A3%85)

This section takes Ubuntu 18.04, CentOS 7.5, MacOS 12.2 as an example to introduce the installation process. Other systems are similar;

## System Requirements

* The Linux kernel should be not lower than 2.6.9, 64-bit version;
* The gcc version is not less than 5.4.0, suggest to use version 11 or above;
* Use cmake as the build tool, and the cmake version should be not less than 3.5;
* Use git as the version management tool;

## Library Dependencies

* Built-in
  + trantor, a non-blocking I/O C++ network library, also developed by the author of Drogon, has been used as a git repository submodule, no need to install in advance;
* Mandatory
  + jsoncpp, JSON's c++ library, the version should be **no less than 1.7**;
  + libuuid, generating c library of uuid;
  + zlib, used to support compressed transmission;
* Optional
  + boost, the version should be **no less than 1.61**, is required only if the C++ compiler does not support C++ 17 and if the STL doesn't fully support `std::filesystem`.
  + OpenSSL, after installed, drogon will support HTTPS as well, otherwise drogon only supports HTTP.
  + c-ares, after installed, drogon will be more efficient with DNS;
  + libbrotli, after installed, drogon will support brotli compression when sending HTTP responses;
  + the client development libraries of postgreSQL, mariadb and sqlite3, if one or more of them is installed, drogon will support access to the according database.
  + hiredis, after installed, drogon will support access to redis.
  + gtest, after installed, the unit tests can be compiled.
  + yaml-cpp, after installed, drogon will support config file with yaml format.

## System Preparation Examples

#### Ubuntu 18.04

* Environment

  ```
  sudo apt install git
  sudo apt install gcc
  sudo apt install g++
  sudo apt install cmake
  ```
* jsoncpp

  ```
  sudo apt install libjsoncpp-dev
  ```
* uuid

  ```
  sudo apt install uuid-dev
  ```
* zlib

  ```
  sudo apt install zlib1g-dev
  ```
* OpenSSL (Optional, if you want to support HTTPS)

  ```
  sudo apt install openssl
  sudo apt install libssl-dev
  ```

#### CentOS 7.5

* Environment

  ```
  yum install git
  yum install gcc
  yum install gcc-c++
  ```

  ```
  # The default installed cmake version is too low, use source installation
  git clone https://github.com/Kitware/CMake
  cd CMake/
  ./bootstrap && make && make install
  ```

  ```
  # Upgrade gcc
  yum install centos-release-scl
  yum install devtoolset-11
  scl enable devtoolset-11 bash
  ```
  > **Note: Command `scl enable devtoolset-11 bash` only activate the new gcc temporarily until the session is end. If you want to always use the new gcc, you could run command `echo "scl enable devtoolset-11 bash" >> ~/.bash_profile`, system will automatically activate the new gcc after restarting.**
* jsoncpp

  ```
  git clone https://github.com/open-source-parsers/jsoncpp
  cd jsoncpp/
  mkdir build
  cd build
  cmake ..
  make && make install
  ```
* uuid

  ```
  yum install libuuid-devel
  ```
* zlib

  ```
  yum install zlib-devel
  ```
* OpenSSL (Optional, if you want to support HTTPS)

  ```
  yum install openssl-devel
  ```

#### MacOS 12.2

* Environment

  All the essentials are inherent in MacOS, you only need to upgrade it.

  ```
  # upgrade gcc
  brew upgrade
  ```
* jsoncpp

  ```
  brew install jsoncpp
  ```
* uuid

  ```
  brew install ossp-uuid
  ```
* zlib

  ```
  yum install zlib-devel
  ```
* OpenSSL (Optional, if you want to support HTTPS)

  ```
  brew install openssl
  ```

#### Windows

* Environment (Visual Studio 2019)
  Install Visual Studio 2019 professional 2019, at least included these options:
  + MSVC C++ building tools
  + Windows 10 SDK
  + C++ CMake tools for windows
  + Test adaptor for Google Test

`conan` package manager could provide all dependencies that Drogon projector needs。If python is installed on system, you could install `conan` package manager via pip.

```
pip install conan

```
> of course you can download the installation file from `connan` [official website](https://conan.io/) to install it also.

Create`conanfile.txt`and add the following content to it:

* jsoncpp

  ```
  [requires]
  jsoncpp/1.9.4
  ```
* uuid

  No installation is required, the Windows 10 SDK already includes the uuid library.
* zlib

  ```
  [requires]
  zlib/1.2.11
  ```
* OpenSSL (Optional, if you want to support HTTPS)

  ```
  [requires]
  openssl/1.1.1t
  ```

## Database Environment (Optional)

> **Note: These libraries below are not mandatory. You could choose to install one or more database according to your actual needs.**

> **Note: If you want to develop your webapp with database, please install the database develop environment first, then install drogon, otherwise you will encounter a `NO DATABASE FOUND` issue.**

* #### PostgreSQL

  PostgreSQL's native C library libpq needs to be installed. The installation is as follows:

  + `ubuntu 16`: `sudo apt-get install postgresql-server-dev-all`
  + `ubuntu 18`: `sudo apt-get install postgresql-all`
  + `centOS 7`: `yum install postgresql-devel`
  + `MacOS`: `brew install postgresql`
  + `Windows conanfile`: `libpq/13.4`
* #### MySQL

  MySQL's native library does not support asynchronous read and write. Fortunately, MySQL also has a version of MariaDB maintained by the original developer community. This version is compatible with MySQL, and its development library supports asynchronous read and write. Therefore, Drogon uses the MariaDB development library to provide the right MySQL support, as a best practice，your operating system shouldn't install both Mysql and MariaDB at the same time.

  MariaDB installation is as follows：

  + `ubuntu`: `sudo apt install libmariadbclient-dev`
  + `centOS 7`: `yum install mariadb-devel`
  + `MacOS`: `brew install mariadb`
  + `Windows conanfile`: `libmariadb/3.1.13`
* #### Sqlite3

  + `ubuntu`: `sudo apt-get install libsqlite3-dev`
  + `centOS`: `yum install sqlite-devel`
  + `MacOS`: `brew install sqlite3`
  + `Windows conanfile`: `sqlite3/3.36.0`
* #### Redis

  + `ubuntu`: `sudo apt-get install libhiredis-dev`
  + `centOS`: `yum install hiredis-devel`
  + `MacOS`: `brew install hiredis`
  + `Windows conanfile`: `hiredis/1.0.0`

> **Note: Some of the above commands only install the development library. If you want to install a server also, please use Google search yourself.**

## Drogon Installation

Assuming that the above environment and library dependencies are all ready, the installation process is very simple;

* #### Install by source in Linux

  ```
  cd $WORK_PATH
  git clone https://github.com/drogonframework/drogon
  cd drogon
  git submodule update --init
  mkdir build
  cd build
  cmake ..
  make && sudo make install
  ```
  > The default is to compile the debug version. If you want to compile the release version, the cmake command should take the following parameters:

  ```
  cmake -DCMAKE_BUILD_TYPE=Release ..
  ```

  After the installation is complete, the following files will be installed in the system（One can change the installation location with the CMAKE\_INSTALL\_PREFIX option）:

  + The header file of drogon is installed into /usr/local/include/drogon;
  + The drogon library file libdrogon.a is installed into /usr/local/lib;
  + Drogon's command line tool drogon\_ctl is installed into /usr/local/bin;
  + The trantor header file is installed into /usr/local/include/trantor;
  + The trantor library file libtrantor.a is installed into /usr/local/lib;
* #### Install by source in Windows

  1. Download drogon source

     ```
     cd $WORK_PATH
     git clone https://github.com/drogonframework/drogon
     cd drogon
     git submodule update --init

     ```
  2. Install dependencies

     install dependencies via `conan`:

     ```
     mkdir build
     cd build
     conan profile detect --force
     conan install .. -s compiler="msvc" -s compiler.version=193  -s compiler.cppstd=17 -s build_type=Debug  --output-folder . --build=missing

     ```
     > Modify `conanfile.txt` to change the version of dependencies.
  3. Compile and install

     ```
     cmake ..  -DCMAKE_BUILD_TYPE=Debug -DCMAKE_TOOLCHAIN_FILE="conan_toolchain.cmake" -DCMAKE_POLICY_DEFAULT_CMP0091=NEW -DCMAKE_INSTALL_PREFIX="D:"
     cmake --build . --parallel --target install

     ```
  > **Note: Must keep build type same in conan and cmake.**

  After the installation is complete, the following files will be installed in the system（One can change the installation location with the `CMAKE_INSTALL_PREFIX` option）:

  + The header file of drogon is installed into `D:/include/drogon`;
  + The drogon library file drogon.dll is installed into `D:/bin`;
  + Drogon's command line tool drogon\_ctl.exe is installed into `D:/bin`;
  + The trantor header file is installed into `D:/include/trantor`;
  + The trantor library file trantor.dll is installed into `D:/lib`;

  Add `bin` and `cmake` directory to `path`：

  ```
  D:\bin

  ```

  ```
  D:\lib\cmake\Drogon

  ```

  ```
  D:\lib\cmake\Trantor

  ```
* #### Install by vcpkg in Windows

  [Lazzy to read](https://www.youtube.com/watch?v=0ojHvu0Is6A)

  **Install vcpkg:**

  1. Install `vcpkg` by `git`.

     ```
     git clone https://github.com/microsoft/vcpkg
     cd vcpkg
     ./bootstrap-vcpkg.bat

     ```
     > note: to update your vcpkg, you just need to type `git pull`
  2. add `vpckg` to your windows environment variables ***path***.
  3. Now check if vcpkg already installed properly, just type `vcpkg` or `vcpkg.exe`

  **Now Install Drogon:**

  1. To install drogon framework. Type:

     + 32-Bit: `vcpkg install drogon`
     + 64-Bit: `vcpkg install drogon:x64-windows`
     + extra : `vcpkg install jsoncpp:x64-windows zlib:x64-windows openssl:x64-windows sqlite3:x64-windows libpq:x64-windows libpqxx:x64-windows drogon[core,ctl,sqlite3,postgres,orm]:x64-windows`

     note:

     + if there's any package is/are uninstalled and you got error, just install that package. e.g.:

       zlib : `vcpkg install zlib` or `vcpkg install zlib:x64-windows` for 64-Bit
     + to check what already installed:

       `vcpkg list`
     + use `vcpkg search` for what available.
  2. To add ***drogon\_ctl*** command and dependencies, you need to add some variables. By following this guide, you just need to add:

     ```
     C:\dev\vcpkg\installed\x64-windows\tools\drogon

     ```

     ```
     C:\dev\vcpkg\installed\x64-windows\bin

     ```

     ```
     C:\dev\vcpkg\installed\x64-windows\lib

     ```

     ```
     C:\dev\vcpkg\installed\x64-windows\include

     ```

     ```
     C:\dev\vcpkg\installed\x64-windows\share

     ```

     ```
     C:\dev\vcpkg\installed\x64-windows\debug\bin

     ```

     ```
     C:\dev\vcpkg\installed\x64-windows\debug\lib

     ```

     to your windows ***environment variables***. Then restart/re-open your ***powershell***.
  3. reload/re-open your ***powershell***, then type: `drogon_ctl` or `drogon_ctl.exe` if:

     ```
     usage: drogon_ctl [-v | --version] [-h | --help] <command> [<args>]
     commands list:
     create                  create some source files(Use 'drogon_ctl help create' for more information)
     help                    display this message
     press                   Do stress testing(Use 'drogon_ctl help press' for more information)
     version                 display version of this tool

     ```

     showed up, you are good to go.
  > Note:
  > you need to be familiar with building cpp libraries by using: independent `gcc` or `g++` (***[msys2](https://www.msys2.org/), [mingw-w64](https://www.mingw-w64.org/), [tdm-gcc](https://jmeubank.github.io/tdm-gcc/download/)***) or Microsoft Visual Studio compiler

  > consider use ***make.exe/nmake.exe/ninja.exe*** as cmake generator since configuration and build behavior is same as \_make\* linux, if some devs using Linux/Windows and you are planning to deploy on Linux environment, it's less prone error when switching operating-system.
* #### Use Docker Image

  We also provide a pre-build docker image on the [docker hub](https://hub.docker.com/r/drogonframework/drogon). All dependencies of Drogon and Drogon itself are already installed in the docker environment, where users can build Drogon-based applications directly.
* #### Use Nix Package

  There is a Nix package for Drogon which was released in version 21.11.

  > **if you haven't installed Nix:** You can follow the instructions on the [NixOS website](https://nixos.org/download.html).

  You can use the package by adding the following `shell.nix` to your project root:

  ```
  { pkgs ? import <nixpkgs> {} }:
  pkgs.mkShell {
    nativeBuildInputs = with pkgs; [
      cmake
    ];

    buildInputs = with pkgs; [
      drogon
    ];
  }

  ```

  Enter the shell by running `nix-shell`. This will install Drogon and enter you into an environment with all its dependencies.

  The Nix package has a few options which you can configure according to your needs:

  | option | default value |
  | --- | --- |
  | sqliteSupport | true |
  | postgresSupport | false |
  | redisSupport | false |
  | mysqlSupport | false |

  Here is an example of how you can change their values:

  ```
    buildInputs = with pkgs; [
      (drogon.override {
        sqliteSupport = false;
      })
    ];

  ```
* #### Use CPM.cmake

  You can use [CPM.cmake](https://github.com/cpm-cmake/CPM.cmake) to include the drogon source code:

  ```
  include(cmake/CPM.cmake)

  CPMAddPackage(
      NAME drogon
      VERSION 1.7.5
      GITHUB_REPOSITORY drogonframework/drogon
      GIT_TAG v1.7.5
  )

  target_link_libraries(${PROJECT_NAME} PRIVATE drogon)
  ```
* #### Include drogon source code locally

  Of course, you can also include the drogon source in your project. Suppose you put the drogon under the third\_party of your project directory (don't forget to update submodule in the drogon source directory). Then, you only need to add the following two lines to your project's cmake file:

  ```
  add_subdirectory(third_party/drogon)
  target_link_libraries(${PROJECT_NAME} PRIVATE drogon)
  ```

# Next: [Quick Start](ENG-03-Quick-Start)

![](images/drogon-white17.jpg)

### Toggle table of contents Pages 61

* Loading

  [Home](/drogonframework/drogon/wiki)
* Loading

  [CHN 01 概述](/drogonframework/drogon/wiki/CHN-01-%E6%A6%82%E8%BF%B0)
* Loading

  [CHN 02 安装](/drogonframework/drogon/wiki/CHN-02-%E5%AE%89%E8%A3%85)
* Loading

  [CHN 03 快速开始](/drogonframework/drogon/wiki/CHN-03-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B)
* Loading

  [CHN 04 0 控制器 简介](/drogonframework/drogon/wiki/CHN-04-0-%E6%8E%A7%E5%88%B6%E5%99%A8-%E7%AE%80%E4%BB%8B)
* Loading

  [CHN 04 1 控制器 HttpSimpleController](/drogonframework/drogon/wiki/CHN-04-1-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpSimpleController)
* Loading

  [CHN 04 2 控制器 HttpController](/drogonframework/drogon/wiki/CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController)
* Loading

  [CHN 04 3 控制器 WebSocketController](/drogonframework/drogon/wiki/CHN-04-3-%E6%8E%A7%E5%88%B6%E5%99%A8-WebSocketController)
* Loading

  [CHN 05 中间件和过滤器](/drogonframework/drogon/wiki/CHN-05-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8)
* Loading

  [CHN 06 视图](/drogonframework/drogon/wiki/CHN-06-%E8%A7%86%E5%9B%BE)
* Loading

  [CHN 07 会话](/drogonframework/drogon/wiki/CHN-07-%E4%BC%9A%E8%AF%9D)
* Loading

  [CHN 08 0 数据库 概述](/drogonframework/drogon/wiki/CHN-08-0-%E6%95%B0%E6%8D%AE%E5%BA%93-%E6%A6%82%E8%BF%B0)
* Loading

  [CHN 08 1 数据库 DbClient](/drogonframework/drogon/wiki/CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient)
* Loading

  [CHN 08 2 数据库 事务](/drogonframework/drogon/wiki/CHN-08-2-%E6%95%B0%E6%8D%AE%E5%BA%93-%E4%BA%8B%E5%8A%A1)
* Loading

  [CHN 08 3 数据库 ORM](/drogonframework/drogon/wiki/CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM)
* Loading

  [CHN 08 4 数据库 FastDbClient](/drogonframework/drogon/wiki/CHN-08-4-%E6%95%B0%E6%8D%AE%E5%BA%93-FastDbClient)
* Loading

  [CHN 08 5 数据库 自动批处理](/drogonframework/drogon/wiki/CHN-08-5-%E6%95%B0%E6%8D%AE%E5%BA%93-%E8%87%AA%E5%8A%A8%E6%89%B9%E5%A4%84%E7%90%86)
* Loading

  [CHN 09 插件](/drogonframework/drogon/wiki/CHN-09-%E6%8F%92%E4%BB%B6)
* Loading

  [CHN 10 配置文件](/drogonframework/drogon/wiki/CHN-10-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6)
* Loading

  [CHN 11 drogon\_ctl命令](/drogonframework/drogon/wiki/CHN-11-drogon_ctl%E5%91%BD%E4%BB%A4)
* Loading

  [CHN 12 AOP面向切面编程](/drogonframework/drogon/wiki/CHN-12-AOP%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B)
* Loading

  [CHN 13 性能测试](/drogonframework/drogon/wiki/CHN-13-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95)
* Loading

  [CHN 14 Coz分析](/drogonframework/drogon/wiki/CHN-14-Coz%E5%88%86%E6%9E%90)
* Loading

  [CHN 15 Brotli压缩](/drogonframework/drogon/wiki/CHN-15-Brotli%E5%8E%8B%E7%BC%A9)
* Loading

  [CHN 16 协程](/drogonframework/drogon/wiki/CHN-16-%E5%8D%8F%E7%A8%8B)
* Loading

  [CHN 17 Redis](/drogonframework/drogon/wiki/CHN-17-Redis)
* Loading

  [CHN 18 测试框架](/drogonframework/drogon/wiki/CHN-18-%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6)
* Loading

  [CHN FAQ](/drogonframework/drogon/wiki/CHN-FAQ)
* Loading

  [CHN FAQ 1 线程模型](/drogonframework/drogon/wiki/CHN-FAQ-1-%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B)
* Loading

  [ENG 01 Overview](/drogonframework/drogon/wiki/ENG-01-Overview)
* Loading

  [ENG 02 Installation](/drogonframework/drogon/wiki/ENG-02-Installation)

  + [Other languages: 简体中文](/drogonframework/drogon/wiki/ENG-02-Installation#other-languages-简体中文)
  + [System Requirements](/drogonframework/drogon/wiki/ENG-02-Installation#system-requirements)
  + [Library Dependencies](/drogonframework/drogon/wiki/ENG-02-Installation#library-dependencies)
  + [System Preparation Examples](/drogonframework/drogon/wiki/ENG-02-Installation#system-preparation-examples)
  + [Ubuntu 18.04](/drogonframework/drogon/wiki/ENG-02-Installation#ubuntu-1804)
  + [CentOS 7.5](/drogonframework/drogon/wiki/ENG-02-Installation#centos-75)
  + [MacOS 12.2](/drogonframework/drogon/wiki/ENG-02-Installation#macos-122)
  + [Windows](/drogonframework/drogon/wiki/ENG-02-Installation#windows)
  + [Database Environment (Optional)](/drogonframework/drogon/wiki/ENG-02-Installation#database-environment-optional)
  + [PostgreSQL](/drogonframework/drogon/wiki/ENG-02-Installation#postgresql)
  + [MySQL](/drogonframework/drogon/wiki/ENG-02-Installation#mysql)
  + [Sqlite3](/drogonframework/drogon/wiki/ENG-02-Installation#sqlite3)
  + [Redis](/drogonframework/drogon/wiki/ENG-02-Installation#redis)
  + [Drogon Installation](/drogonframework/drogon/wiki/ENG-02-Installation#drogon-installation)
  + [Install by source in Linux](/drogonframework/drogon/wiki/ENG-02-Installation#install-by-source-in-linux)
  + [Install by source in Windows](/drogonframework/drogon/wiki/ENG-02-Installation#install-by-source-in-windows)
  + [Install by vcpkg in Windows](/drogonframework/drogon/wiki/ENG-02-Installation#install-by-vcpkg-in-windows)
  + [Use Docker Image](/drogonframework/drogon/wiki/ENG-02-Installation#use-docker-image)
  + [Use Nix Package](/drogonframework/drogon/wiki/ENG-02-Installation#use-nix-package)
  + [Use CPM.cmake](/drogonframework/drogon/wiki/ENG-02-Installation#use-cpmcmake)
  + [Include drogon source code locally](/drogonframework/drogon/wiki/ENG-02-Installation#include-drogon-source-code-locally)
  + [Next: Quick Start](/drogonframework/drogon/wiki/ENG-02-Installation#next-quick-start)
* Loading

  [ENG 03 Quick Start](/drogonframework/drogon/wiki/ENG-03-Quick-Start)
* Loading

  [ENG 04 0 Controller Introduction](/drogonframework/drogon/wiki/ENG-04-0-Controller-Introduction)
* Loading

  [ENG 04 1 Controller HttpSimpleController](/drogonframework/drogon/wiki/ENG-04-1-Controller-HttpSimpleController)
* Loading

  [ENG 04 2 Controller HttpController](/drogonframework/drogon/wiki/ENG-04-2-Controller-HttpController)
* Loading

  [ENG 04 3 Controller WebSocketController](/drogonframework/drogon/wiki/ENG-04-3-Controller-WebSocketController)
* Loading

  [ENG 05 Middleware and Filter](/drogonframework/drogon/wiki/ENG-05-Middleware-and-Filter)
* Loading

  [ENG 06 View](/drogonframework/drogon/wiki/ENG-06-View)
* Loading

  [ENG 07 Session](/drogonframework/drogon/wiki/ENG-07-Session)
* Loading

  [ENG 08 0 Database General](/drogonframework/drogon/wiki/ENG-08-0-Database-General)
* Loading

  [ENG 08 1 Database DbClient](/drogonframework/drogon/wiki/ENG-08-1-Database-DbClient)
* Loading

  [ENG 08 2 Database Transaction](/drogonframework/drogon/wiki/ENG-08-2-Database-Transaction)
* Loading

  [ENG 08 3 Database ORM](/drogonframework/drogon/wiki/ENG-08-3-Database-ORM)
* Loading

  [ENG 08 4 Database FastDbClient](/drogonframework/drogon/wiki/ENG-08-4-Database-FastDbClient)
* Loading

  [ENG 08 5 Database auto\_batch](/drogonframework/drogon/wiki/ENG-08-5-Database-auto_batch)
* Loading

  [ENG 09 0 References request](/drogonframework/drogon/wiki/ENG-09-0-References-request)
* Loading

  [ENG 09 1 File Handler](/drogonframework/drogon/wiki/ENG-09-1-File-Handler)
* Loading

  [ENG 10 Plugins](/drogonframework/drogon/wiki/ENG-10-Plugins)
* Loading

  [ENG 11 Configuration File](/drogonframework/drogon/wiki/ENG-11-Configuration-File)
* Loading

  [ENG 12 drogon\_ctl Command](/drogonframework/drogon/wiki/ENG-12-drogon_ctl-Command)
* Loading

  [ENG 13 AOP Aspect Oriented Programming](/drogonframework/drogon/wiki/ENG-13-AOP-Aspect-Oriented-Programming)
* Loading

  [ENG 14 Benchmarks](/drogonframework/drogon/wiki/ENG-14-Benchmarks)
* Loading

  [ENG 15 Coz](/drogonframework/drogon/wiki/ENG-15-Coz)
* Loading

  [ENG 16 Brotli](/drogonframework/drogon/wiki/ENG-16-Brotli)
* Loading

  [ENG 17 Coroutines](/drogonframework/drogon/wiki/ENG-17-Coroutines)
* Loading

  [ENG 18 Redis](/drogonframework/drogon/wiki/ENG-18-Redis)
* Loading

  [ENG 19 Testing Framework](/drogonframework/drogon/wiki/ENG-19-Testing-Framework)
* Loading

  [ENG FAQ](/drogonframework/drogon/wiki/ENG-FAQ)
* Loading

  [ENG FAQ 1 Understanding drogon threading model](/drogonframework/drogon/wiki/ENG-FAQ-1-Understanding-drogon-threading-model)
* Loading

  [Home.zh CN](/drogonframework/drogon/wiki/Home.zh-CN)
* Loading

  [README](/drogonframework/drogon/wiki/README)
* Show 46 more pages…

## Document

### Tutorial

* [Overview](ENG-01-Overview)
* [Install drogon](ENG-02-Installation)
  + [System Requirements](ENG-02-Installation#System-Requirements)
  + [Library Dependencies](ENG-02-Installation#Library-Dependencies)
  + [System Preparation Examples](ENG-02-Installation#System-Preparation-Examples)
    - [Ubuntu](ENG-02-Installation#Ubuntu-1804)
    - [CentOS](ENG-02-Installation#CentOS-75)
    - [MacOS](ENG-02-Installation#MacOS-122)
    - [Windows](ENG-02-Installation#Windows)
  + [Database Environment](ENG-02-Installation#Database-Environment)
    - [PostgreSQL](ENG-02-Installation#PostgreSQL)
    - [MySQL](ENG-02-Installation#MySQL)
    - [SQLite3](ENG-02-Installation#SQLite3)
    - [Redis](ENG-02-Installation#Redis)
  + [Drogon Installation](ENG-02-Installation#Drogon-Installation)
    - [Install by source in Linux](ENG-02-Installation#Install-by-source-in-Linux)
    - [Install by source in Windows](ENG-02-Installation#Install-by-source-in-Windows)
    - [Install by vcpkg in Windows](ENG-02-Installation#Install-by-vcpkg-in-Windows)
    - [Use Docker Image](ENG-02-Installation#Use-Docker-Image)
    - [Use Nix Package](ENG-02-Installation#Use-Nix-Package)
    - [Use CPM.cmake](ENG-02-Installation#Use-CPM.cmake)
    - [Include drogon source code locally](ENG-02-Installation#Include-drogon-source-code-locally)
* [Quick Start](ENG-03-Quick-Start)
  + [Static Site](ENG-03-Quick-Start#Static-Site)
  + [Dynamic Site](ENG-03-Quick-Start#Dynamic-Site)
* [Controller](ENG-04-0-Controller-Introduction)
  + [HttpSimpleController](ENG-04-1-Controller-HttpSimpleController)
  + [HttpController](ENG-04-2-Controller-HttpController)
    - [Path Mapping](ENG-04-2-Controller-HttpController#Path-Mapping)
    - [Parameter Mapping](ENG-04-2-Controller-HttpController#Parameter-Mapping)
    - [Multiple Path Mapping](ENG-04-2-Controller-HttpController#Multiple-Path-Mapping)
    - [Regular Expressions Mapping](ENG-04-2-Controller-HttpController#Regular-Expressions-Mapping)
  + [WebSocketController](ENG-04-3-Controller-WebSocketController)
    - [Path Mapping](ENG-04-3-Controller-WebSocketController#Path-Mapping)
    - [Interface](ENG-04-3-Controller-WebSocketController#Interface)
* [Middleware and Filter](ENG-05-Middleware-and-Filter)
  + [Build-in Middleware/Filter](ENG-05-Middleware-and-Filter#Built-in-Middleware/Filter)
  + [Custom Middleware/Filter](ENG-05-Middleware-and-Filter#Custom-Middleware/Filter)
* [View](ENG-06-View)
  + [Drogon's CSP](ENG-06-View#Drogon's-CSP)
  + [Automated processing of csp files](ENG-06-View#Automated-processing-of-csp-files)
  + [Dynamic compilation and loading of views](ENG-06-View#Dynamic-compilation-and-loading-of-views)
* [Session](ENG-07-Session)
* [Database](ENG-08-0-Database-General)
  + [DbClient](ENG-08-1-Database-DbClient)
    - [Execution Interface](ENG-08-1-Database-DbClient#Execution-Interface)
      * [execSqlAsync](ENG-08-1-Database-DbClient#execSqlAsync)
      * [execSqlAsyncFuture](ENG-08-1-Database-DbClient#execSqlAsyncFuture)
      * [execSqlSync](ENG-08-1-Database-DbClient#execSqlSync)
      * [operator<<](ENG-08-1-Database-DbClient#operator%3C%3C)
  + [Transaction](ENG-08-2-Database-Transaction)
  + [ORM](ENG-08-3-Database-ORM)
    - [Model Class Interface](ENG-08-3-Database-ORM#Model-Class-Interface)
    - [Mapper Class Template](ENG-08-3-Database-ORM#Mapper-Class-Template)
    - [Criteria](ENG-08-3-Database-ORM#Criteria)
    - [Mapper's Chain Interface](ENG-08-3-Database-ORM#Mapper's-Chain-Interface)
    - [Convert](ENG-08-3-Database-ORM#Convert)
    - [Relationships](ENG-08-3-Database-ORM#Relationships)
      * [has one](ENG-08-3-Database-ORM#has-one)
      * [has many](ENG-08-3-Database-ORM#has-many)
      * [many to many](ENG-08-3-Database-ORM#many-to-many)
  + [FastDbClient](ENG-08-4-Database-FastDbClient)
  + [Automatic batch mode](ENG-08-5-Database-auto_batch)
* [References](ENG-09-0-References-request)
  + [Request References](ENG-09-0-References-request)
  + [File Handler](ENG-09-1-File-Handler)
* [Plugins](ENG-10-Plugins)
* [Configuration File](ENG-11-Configuration-File)
* [drogon\_ctl Command](ENG-12-drogon_ctl-Command)
* [AOP](ENG-13-AOP-Aspect-Oriented-Programming)
* [Benchmarks](ENG-14-Benchmarks)
* [Coz profiling](ENG-15-Coz)
* [Brotli info](ENG-16-Brotli)
* [Coroutines](ENG-17-Coroutines)
* [Redis](ENG-18-Redis)
* [Testing Framework](ENG-19-Testing-Framework)
* [FAQ](ENG-FAQ)
  + [Understanding drogon's threading model](ENG-FAQ-1-Understanding-drogon-threading-model)

## 中文文档

### 教程

* [概述](CHN-01-%E6%A6%82%E8%BF%B0)
* [安装 drogon](CHN-02-%E5%AE%89%E8%A3%85)
  + [系统要求](CHN-02-%E5%AE%89%E8%A3%85#%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82)
  + [依赖库](CHN-02-%E5%AE%89%E8%A3%85#%E4%BE%9D%E8%B5%96%E5%BA%93)
  + [系统准备范例](CHN-02-%E5%AE%89%E8%A3%85#%E7%B3%BB%E7%BB%9F%E5%87%86%E5%A4%87%E8%8C%83%E4%BE%8B)
    - [Ubuntu](CHN-02-%E5%AE%89%E8%A3%85#Ubuntu-1804)
    - [CentOS](CHN-02-%E5%AE%89%E8%A3%85#CentOS-75)
    - [MacOS](CHN-02-%E5%AE%89%E8%A3%85#MacOS-122)
    - [Windows](CHN-02-%E5%AE%89%E8%A3%85#Windows)
  + [数据库环境](CHN-02-%E5%AE%89%E8%A3%85#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%8E%AF%E5%A2%83)
    - [PostgreSQL](CHN-02-%E5%AE%89%E8%A3%85#PostgreSQL)
    - [MySQL](CHN-02-%E5%AE%89%E8%A3%85#MySQL)
    - [SQLite3](CHN-02-%E5%AE%89%E8%A3%85#SQLite3)
    - [Redis](CHN-02-%E5%AE%89%E8%A3%85#Redis)
  + [安装 drogon](CHN-02-%E5%AE%89%E8%A3%85#%E5%AE%89%E8%A3%85drogon)
    - [Linux源码安装](CHN-02-%E5%AE%89%E8%A3%85#Linux%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85)
    - [Windows源码安装](CHN-02-%E5%AE%89%E8%A3%85#Windows%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85)
    - [Windows vcpkg安装](CHN-02-%E5%AE%89%E8%A3%85#Windows-vcpkg%E5%AE%89%E8%A3%85)
    - [使用docker镜像](CHN-02-%E5%AE%89%E8%A3%85#%E4%BD%BF%E7%94%A8docker%E9%95%9C%E5%83%8F)
    - [使用Nix包](CHN-02-%E5%AE%89%E8%A3%85#%E4%BD%BF%E7%94%A8Nix%E5%8C%85)
    - [使用CPM.cmake](CHN-02-%E5%AE%89%E8%A3%85#%E4%BD%BF%E7%94%A8CPM.cmake)
    - [直接包含drogon源码](CHN-02-%E5%AE%89%E8%A3%85#%E7%9B%B4%E6%8E%A5%E5%8C%85%E5%90%ABdrogon%E6%BA%90%E7%A0%81)
* [快速开始](CHN-03-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B)
  + [静态网站](CHN-03-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B#%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99)
  + [动态网站](CHN-03-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B#%E5%8A%A8%E6%80%81%E7%BD%91%E7%AB%99)
* [控制器](CHN-04-0-%E6%8E%A7%E5%88%B6%E5%99%A8-%E7%AE%80%E4%BB%8B)
  + [HttpSimpleController](CHN-04-1-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpSimpleController)
  + [HttpController](CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController)
    - [路径映射](CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController#%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84)
    - [参数映射](CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController#%E5%8F%82%E6%95%B0%E6%98%A0%E5%B0%84)
    - [多路径映射](CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController#%E5%A4%9A%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84)
    - [正则表达式映射](CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%98%A0%E5%B0%84)
  + [WebSocketController](CHN-04-3-%E6%8E%A7%E5%88%B6%E5%99%A8-WebSocketController)
    - [路径映射](CHN-04-3-%E6%8E%A7%E5%88%B6%E5%99%A8-WebSocketController#%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84)
    - [接口](CHN-04-3-%E6%8E%A7%E5%88%B6%E5%99%A8-WebSocketController#%E6%8E%A5%E5%8F%A3)
* [中间件和过滤器](CHN-05-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8)
  + [内置中间件/过滤器](CHN-05-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8#%E5%86%85%E7%BD%AE%E4%B8%AD%E9%97%B4%E4%BB%B6/%E8%BF%87%E6%BB%A4%E5%99%A8)
  + [自定义中间件/过滤器](CHN-05-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%AD%E9%97%B4%E4%BB%B6/%E8%BF%87%E6%BB%A4%E5%99%A8)
* [视图](CHN-06-%E8%A7%86%E5%9B%BE)
  + [Drogon的csp](CHN-06-%E8%A7%86%E5%9B%BE#Drogon%E7%9A%84csp)
  + [csp文件的自动化处理](CHN-06-%E8%A7%86%E5%9B%BE#csp%E6%96%87%E4%BB%B6%E7%9A%84%E8%87%AA%E5%8A%A8%E5%8C%96%E5%A4%84%E7%90%86)
  + [视图的动态编译和加载](CHN-06-%E8%A7%86%E5%9B%BE#%E8%A7%86%E5%9B%BE%E7%9A%84%E5%8A%A8%E6%80%81%E7%BC%96%E8%AF%91%E5%92%8C%E5%8A%A0%E8%BD%BD)
* [会话](CHN-07-%E4%BC%9A%E8%AF%9D)
* [数据库](CHN-08-0-%E6%95%B0%E6%8D%AE%E5%BA%93-%E6%A6%82%E8%BF%B0)
  + [DbClient](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient)
    - [执行接口](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient#%E6%89%A7%E8%A1%8C%E6%8E%A5%E5%8F%A3)
      * [execSqlAsync](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient#execSqlAsync)
      * [execSqlAsyncFuture](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient#execSqlAsyncFuture)
      * [execSqlSync](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient#execSqlSync)
      * [operator<<](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient#operator%3C%3C)
  + [事务](CHN-08-2-%E6%95%B0%E6%8D%AE%E5%BA%93-%E4%BA%8B%E5%8A%A1)
  + [ORM](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM)
    - [Model类的接口](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#Model%E7%B1%BB%E7%9A%84%E6%8E%A5%E5%8F%A3)
    - [Mapper类模板](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#Mapper%E7%B1%BB%E6%A8%A1%E6%9D%BF)
    - [条件对象](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#%E6%9D%A1%E4%BB%B6%E5%AF%B9%E8%B1%A1)
    - [Mapper 的链式接口](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#Mapper%E7%9A%84%E9%93%BE%E5%BC%8F%E6%8E%A5%E5%8F%A3)
    - [转换](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#%E8%BD%AC%E6%8D%A2)
    - [关系](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#%E5%85%B3%E7%B3%BB)
      * [has one](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#has-one)
      * [has many](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#has-many)
      * [many to many](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#many-to-many)
  + [FastDbClient](CHN-08-4-%E6%95%B0%E6%8D%AE%E5%BA%93-FastDbClient)
  + [自动批处理模式](CHN-08-5-%E6%95%B0%E6%8D%AE%E5%BA%93-%E8%87%AA%E5%8A%A8%E6%89%B9%E5%A4%84%E7%90%86)
* [插件](CHN-09-%E6%8F%92%E4%BB%B6)
* [配置文件](CHN-10-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6)
* [drogon\_ctl命令](CHN-11-drogon_ctl%E5%91%BD%E4%BB%A4)
* [AOP面向切面编程](CHN-12-AOP%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B)
* [性能测试](CHN-13-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95)
* [协程](CHN-16-%E5%8D%8F%E7%A8%8B)
* [Redis](CHN-17-Redis)
* [测试框架](CHN-18-%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6)
* [FAQ](CHN-FAQ)
  + [drogon的线程模型](CHN-FAQ-1-%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B)

##### Clone this wiki locally

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_4e04b1d7_20250114_184848.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdrogonframework%2Fdrogon)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdrogonframework%2Fdrogon)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=drogonframework%2Fdrogon)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[drogonframework](/drogonframework)
/
**[drogon](/drogonframework/drogon)**
Public

* [Notifications](/login?return_to=%2Fdrogonframework%2Fdrogon) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2Fdrogonframework%2Fdrogon)
* [Star
   11.8k](/login?return_to=%2Fdrogonframework%2Fdrogon)

Drogon: A C++14/17/20 based HTTP web application framework running on Linux/macOS/Unix/Windows

### License

[MIT license](/drogonframework/drogon/blob/master/LICENSE)

[11.8k
stars](/drogonframework/drogon/stargazers) [1.1k
forks](/drogonframework/drogon/forks) [Branches](/drogonframework/drogon/branches) [Tags](/drogonframework/drogon/tags) [Activity](/drogonframework/drogon/activity)
 [Star](/login?return_to=%2Fdrogonframework%2Fdrogon)

 [Notifications](/login?return_to=%2Fdrogonframework%2Fdrogon) You must be signed in to change notification settings

* [Code](/drogonframework/drogon)
* [Issues
  279](/drogonframework/drogon/issues)
* [Pull requests
  28](/drogonframework/drogon/pulls)
* [Discussions](/drogonframework/drogon/discussions)
* [Actions](/drogonframework/drogon/actions)
* [Projects
  0](/drogonframework/drogon/projects)
* [Wiki](/drogonframework/drogon/wiki)
* [Security](/drogonframework/drogon/security)
* [Insights](/drogonframework/drogon/pulse)

Additional navigation options

* [Code](/drogonframework/drogon)
* [Issues](/drogonframework/drogon/issues)
* [Pull requests](/drogonframework/drogon/pulls)
* [Discussions](/drogonframework/drogon/discussions)
* [Actions](/drogonframework/drogon/actions)
* [Projects](/drogonframework/drogon/projects)
* [Wiki](/drogonframework/drogon/wiki)
* [Security](/drogonframework/drogon/security)
* [Insights](/drogonframework/drogon/pulse)

# drogonframework/drogon

    master[Branches](/drogonframework/drogon/branches)[Tags](/drogonframework/drogon/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[1,915 Commits](/drogonframework/drogon/commits/master/) | | |
| [.github](/drogonframework/drogon/tree/master/.github ".github") | | [.github](/drogonframework/drogon/tree/master/.github ".github") |  |  |
| [cmake](/drogonframework/drogon/tree/master/cmake "cmake") | | [cmake](/drogonframework/drogon/tree/master/cmake "cmake") |  |  |
| [cmake\_modules](/drogonframework/drogon/tree/master/cmake_modules "cmake_modules") | | [cmake\_modules](/drogonframework/drogon/tree/master/cmake_modules "cmake_modules") |  |  |
| [docker](/drogonframework/drogon/tree/master/docker "docker") | | [docker](/drogonframework/drogon/tree/master/docker "docker") |  |  |
| [drogon\_ctl](/drogonframework/drogon/tree/master/drogon_ctl "drogon_ctl") | | [drogon\_ctl](/drogonframework/drogon/tree/master/drogon_ctl "drogon_ctl") |  |  |
| [examples](/drogonframework/drogon/tree/master/examples "examples") | | [examples](/drogonframework/drogon/tree/master/examples "examples") |  |  |
| [lib](/drogonframework/drogon/tree/master/lib "lib") | | [lib](/drogonframework/drogon/tree/master/lib "lib") |  |  |
| [nosql\_lib/redis](/drogonframework/drogon/tree/master/nosql_lib/redis "This path skips through empty directories") | | [nosql\_lib/redis](/drogonframework/drogon/tree/master/nosql_lib/redis "This path skips through empty directories") |  |  |
| [orm\_lib](/drogonframework/drogon/tree/master/orm_lib "orm_lib") | | [orm\_lib](/drogonframework/drogon/tree/master/orm_lib "orm_lib") |  |  |
| [third\_party/mman-win32](/drogonframework/drogon/tree/master/third_party/mman-win32 "This path skips through empty directories") | | [third\_party/mman-win32](/drogonframework/drogon/tree/master/third_party/mman-win32 "This path skips through empty directories") |  |  |
| [trantor @ 8bf280b](/an-tao/trantor/tree/8bf280ba043eb77c3eb02121065e0891a9a4f431 "trantor") | | [trantor @ 8bf280b](/an-tao/trantor/tree/8bf280ba043eb77c3eb02121065e0891a9a4f431 "trantor") |  |  |
| [.Doxyfile](/drogonframework/drogon/blob/master/.Doxyfile ".Doxyfile") | | [.Doxyfile](/drogonframework/drogon/blob/master/.Doxyfile ".Doxyfile") |  |  |
| [.clang-format](/drogonframework/drogon/blob/master/.clang-format ".clang-format") | | [.clang-format](/drogonframework/drogon/blob/master/.clang-format ".clang-format") |  |  |
| [.gitignore](/drogonframework/drogon/blob/master/.gitignore ".gitignore") | | [.gitignore](/drogonframework/drogon/blob/master/.gitignore ".gitignore") |  |  |
| [.gitmodules](/drogonframework/drogon/blob/master/.gitmodules ".gitmodules") | | [.gitmodules](/drogonframework/drogon/blob/master/.gitmodules ".gitmodules") |  |  |
| [CMakeLists.txt](/drogonframework/drogon/blob/master/CMakeLists.txt "CMakeLists.txt") | | [CMakeLists.txt](/drogonframework/drogon/blob/master/CMakeLists.txt "CMakeLists.txt") |  |  |
| [CONTRIBUTING.md](/drogonframework/drogon/blob/master/CONTRIBUTING.md "CONTRIBUTING.md") | | [CONTRIBUTING.md](/drogonframework/drogon/blob/master/CONTRIBUTING.md "CONTRIBUTING.md") |  |  |
| [CPPLINT.cfg](/drogonframework/drogon/blob/master/CPPLINT.cfg "CPPLINT.cfg") | | [CPPLINT.cfg](/drogonframework/drogon/blob/master/CPPLINT.cfg "CPPLINT.cfg") |  |  |
| [ChangeLog.md](/drogonframework/drogon/blob/master/ChangeLog.md "ChangeLog.md") | | [ChangeLog.md](/drogonframework/drogon/blob/master/ChangeLog.md "ChangeLog.md") |  |  |
| [LICENSE](/drogonframework/drogon/blob/master/LICENSE "LICENSE") | | [LICENSE](/drogonframework/drogon/blob/master/LICENSE "LICENSE") |  |  |
| [README.md](/drogonframework/drogon/blob/master/README.md "README.md") | | [README.md](/drogonframework/drogon/blob/master/README.md "README.md") |  |  |
| [README.zh-CN.md](/drogonframework/drogon/blob/master/README.zh-CN.md "README.zh-CN.md") | | [README.zh-CN.md](/drogonframework/drogon/blob/master/README.zh-CN.md "README.zh-CN.md") |  |  |
| [README.zh-TW.md](/drogonframework/drogon/blob/master/README.zh-TW.md "README.zh-TW.md") | | [README.zh-TW.md](/drogonframework/drogon/blob/master/README.zh-TW.md "README.zh-TW.md") |  |  |
| [build.sh](/drogonframework/drogon/blob/master/build.sh "build.sh") | | [build.sh](/drogonframework/drogon/blob/master/build.sh "build.sh") |  |  |
| [conanfile.txt](/drogonframework/drogon/blob/master/conanfile.txt "conanfile.txt") | | [conanfile.txt](/drogonframework/drogon/blob/master/conanfile.txt "conanfile.txt") |  |  |
| [config.example.json](/drogonframework/drogon/blob/master/config.example.json "config.example.json") | | [config.example.json](/drogonframework/drogon/blob/master/config.example.json "config.example.json") |  |  |
| [config.example.yaml](/drogonframework/drogon/blob/master/config.example.yaml "config.example.yaml") | | [config.example.yaml](/drogonframework/drogon/blob/master/config.example.yaml "config.example.yaml") |  |  |
| [drogon.jpg](/drogonframework/drogon/blob/master/drogon.jpg "drogon.jpg") | | [drogon.jpg](/drogonframework/drogon/blob/master/drogon.jpg "drogon.jpg") |  |  |
| [format.sh](/drogonframework/drogon/blob/master/format.sh "format.sh") | | [format.sh](/drogonframework/drogon/blob/master/format.sh "format.sh") |  |  |
| [package.xml](/drogonframework/drogon/blob/master/package.xml "package.xml") | | [package.xml](/drogonframework/drogon/blob/master/package.xml "package.xml") |  |  |
| [test.sh](/drogonframework/drogon/blob/master/test.sh "test.sh") | | [test.sh](/drogonframework/drogon/blob/master/test.sh "test.sh") |  |  |
| View all files | | |

## Repository files navigation

* README
* MIT license

[![](https://github.com/an-tao/drogon/wiki/images/drogon-white17.jpg)](https://github.com/an-tao/drogon/wiki/images/drogon-white17.jpg)

[![Build Status](https://github.com/an-tao/drogon/workflows/Build%20Drogon/badge.svg?branch=master)](https://github.com/drogonframework/drogon/actions)
[![Conan Center](https://camo.githubusercontent.com/1c19667977363d1888c2b8fcd9fc9638bdb788541bf34a08fac3f0e7cd985f86/68747470733a2f2f696d672e736869656c64732e696f2f636f6e616e2f762f64726f676f6e)](https://conan.io/center/recipes/drogon)
[![Join the telegram group at https://t.me/joinchat/_mMNGv0748ZkMDAx](https://camo.githubusercontent.com/55a96893f17565fbcf2f60289f67a14d49ae303ffb880167a102560a176f617a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f54656c656772616d2d3243413545303f7374796c653d666c6174266c6f676f3d74656c656772616d266c6f676f436f6c6f723d7768697465)](https://t.me/joinchat/_mMNGv0748ZkMDAx)
[![Join our Discord](https://camo.githubusercontent.com/d3fac8bacf279635d87b0d1ceb3c291a577404b581829142ae5e0ce994a63b28/68747470733a2f2f646362616467652e76657263656c2e6170702f6170692f7365727665722f3344764859364577756a3f7374796c653d666c6174)](https://discord.gg/3DvHY6Ewuj)
[![Docker image](https://camo.githubusercontent.com/d5bde15eb7aeb62371c518b6ee7cf0fd3bf4af1b38251194ad345fc8eb887ea4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f446f636b65722d696d6167652d626c75652e737667)](https://cloud.docker.com/u/drogonframework/repository/docker/drogonframework/drogon)

English | [简体中文](/drogonframework/drogon/blob/master/README.zh-CN.md) | [繁體中文](/drogonframework/drogon/blob/master/README.zh-TW.md)

### Overview

**Drogon** is a C++17/20 based HTTP application framework. Drogon can be used to easily build various types of web application server programs using C++. **Drogon** is the name of a dragon from the American TV series *Game of Thrones*, which I really enjoy.

Drogon is a cross-platform framework, It supports Linux, macOS, FreeBSD, OpenBSD, HaikuOS, and Windows. Its main features are as follows:

* Use a non-blocking I/O network lib based on epoll (kqueue under macOS/FreeBSD) to provide high-concurrency, high-performance network IO, please visit the [TFB Tests Results](https://www.techempower.com/benchmarks/#section=data-r19&hw=ph&test=composite) for more details;
* Provide a completely asynchronous programming mode;
* Support Http1.0/1.1 (server side and client side);
* Based on template, a simple reflection mechanism is implemented to completely decouple the main program framework, controllers and views.
* Support cookies and built-in sessions;
* Support back-end rendering, the controller generates the data to the view to generate the Html page. Views are described by CSP template files, C++ codes are embedded into Html pages through CSP tags. And the drogon command-line tool automatically generates the C++ code files for compilation;
* Support view page dynamic loading (dynamic compilation and loading at runtime);
* Provide a convenient and flexible routing solution from the path to the controller handler;
* Support filter chains to facilitate the execution of unified logic (such as login verification, Http Method constraint verification, etc.) before handling HTTP requests;
* Support https (based on OpenSSL);
* Support WebSocket (server side and client side);
* Support JSON format request and response, very friendly to the Restful API application development;
* Support file download and upload;
* Support gzip, brotli compression transmission;
* Support pipelining;
* Provide a lightweight command line tool, drogon\_ctl, to simplify the creation of various classes in Drogon and the generation of view code;
* Support non-blocking I/O based asynchronously reading and writing database (PostgreSQL and MySQL(MariaDB) database);
* Support asynchronously reading and writing sqlite3 database based on thread pool;
* Support Redis with asynchronous reading and writing;
* Support ARM Architecture;
* Provide a convenient lightweight ORM implementation that supports for regular object-to-database bidirectional mapping;
* Support plugins which can be installed by the configuration file at load time;
* Support AOP with built-in joinpoints.
* Support C++ coroutines

## A very simple example

Unlike most C++ frameworks, the main program of the drogon application can be kept clean and simple. Drogon uses a few tricks to decouple controllers from the main program. The routing settings of controllers can be done through macros or configuration file.

Below is the main program of a typical drogon application:

```
#include <drogon/drogon.h>
using namespace drogon;
int main()
{
    app().setLogPath("./")
         .setLogLevel(trantor::Logger::kWarn)
         .addListener("0.0.0.0", 80)
         .setThreadNum(16)
         .enableRunAsDaemon()
         .run();
}
```

It can be further simplified by using configuration file as follows:

```
#include <drogon/drogon.h>
using namespace drogon;
int main()
{
    app().loadConfigFile("./config.json").run();
}
```

Drogon provides some interfaces for adding controller logic directly in the main() function, for example, user can register a handler like this in Drogon:

```
app().registerHandler("/test?username={name}",
                    [](const HttpRequestPtr& req,
                       std::function<void (const HttpResponsePtr &)> &&callback,
                       const std::string &name)
                    {
                        Json::Value json;
                        json["result"]="ok";
                        json["message"]=std::string("hello,")+name;
                        auto resp=HttpResponse::newHttpJsonResponse(json);
                        callback(resp);
                    },
                    {Get,"LoginFilter"});
```

While such interfaces look intuitive, they are not suitable for complex business logic scenarios. Assuming there are tens or even hundreds of handlers that need to be registered in the framework, isn't it a better practice to implement them separately in their respective classes? So unless your logic is very simple, we don't recommend using above interfaces. Instead, we can create an HttpSimpleController as follows:

```
/// The TestCtrl.h file
#pragma once
#include <drogon/HttpSimpleController.h>
using namespace drogon;
class TestCtrl:public drogon::HttpSimpleController<TestCtrl>
{
public:
    void asyncHandleHttpRequest(const HttpRequestPtr& req, std::function<void (const HttpResponsePtr &)> &&callback) override;
    PATH_LIST_BEGIN
    PATH_ADD("/test",Get);
    PATH_LIST_END
};

/// The TestCtrl.cc file
#include "TestCtrl.h"
void TestCtrl::asyncHandleHttpRequest(const HttpRequestPtr& req,
                                      std::function<void (const HttpResponsePtr &)> &&callback)
{
    //write your application logic here
    auto resp = HttpResponse::newHttpResponse();
    resp->setBody("<p>Hello, world!</p>");
    resp->setExpiredTime(0);
    callback(resp);
}
```

**Most of the above programs can be automatically generated by the command line tool `drogon_ctl` provided by drogon** (The command is `drogon_ctl create controller TestCtrl`). All the user needs to do is add their own business logic. In the example, the controller returns a `Hello, world!` string when the client accesses the `http://ip/test` URL.

For JSON format response, we create the controller as follows:

```
/// The header file
#pragma once
#include <drogon/HttpSimpleController.h>
using namespace drogon;
class JsonCtrl : public drogon::HttpSimpleController<JsonCtrl>
{
  public:
    void asyncHandleHttpRequest(const HttpRequestPtr &req, std::function<void(const HttpResponsePtr &)> &&callback) override;
    PATH_LIST_BEGIN
    //list path definitions here;
    PATH_ADD("/json", Get);
    PATH_LIST_END
};

/// The source file
#include "JsonCtrl.h"
void JsonCtrl::asyncHandleHttpRequest(const HttpRequestPtr &req,
                                      std::function<void(const HttpResponsePtr &)> &&callback)
{
    Json::Value ret;
    ret["message"] = "Hello, World!";
    auto resp = HttpResponse::newHttpJsonResponse(ret);
    callback(resp);
}
```

Let's go a step further and create a demo RESTful API with the HttpController class, as shown below (Omit the source file):

```
/// The header file
#pragma once
#include <drogon/HttpController.h>
using namespace drogon;
namespace api
{
namespace v1
{
class User : public drogon::HttpController<User>
{
  public:
    METHOD_LIST_BEGIN
    //use METHOD_ADD to add your custom processing function here;
    METHOD_ADD(User::getInfo, "/{id}", Get);                  //path is /api/v1/User/{arg1}
    METHOD_ADD(User::getDetailInfo, "/{id}/detailinfo", Get);  //path is /api/v1/User/{arg1}/detailinfo
    METHOD_ADD(User::newUser, "/{name}", Post);                 //path is /api/v1/User/{arg1}
    METHOD_LIST_END
    //your declaration of processing function maybe like this:
    void getInfo(const HttpRequestPtr &req, std::function<void(const HttpResponsePtr &)> &&callback, int userId) const;
    void getDetailInfo(const HttpRequestPtr &req, std::function<void(const HttpResponsePtr &)> &&callback, int userId) const;
    void newUser(const HttpRequestPtr &req, std::function<void(const HttpResponsePtr &)> &&callback, std::string &&userName);
  public:
    User()
    {
        LOG_DEBUG << "User constructor!";
    }
};
} // namespace v1
} // namespace api
```

As you can see, users can use the `HttpController` to map paths and parameters at the same time. This is a very convenient way to create a RESTful API application.

In addition, you can also find that all handler interfaces are in asynchronous mode, where the response is returned by a callback object. This design is for performance reasons because in asynchronous mode the drogon application can handle a large number of concurrent requests with a small number of threads.

After compiling all of the above source files, we get a very simple web application. This is a good start. **For more information, please visit the [documentation](https://drogonframework.github.io/drogon-docs/#/) on GitHub**.

## Cross-compilation

Drogon supports cross-compilation, you should define the `CMAKE_SYSTEM_NAME` in toolchain file, for example:

```
set(CMAKE_SYSTEM_NAME Linux)
set(CMAKE_SYSTEM_PROCESSOR arm)
```

You can disable building options for examples and drogon\_ctl by settings `BUILD_EXAMPLES` and `BUILD_CTL` to `OFF` in the toolchain file.

## Building options

Drogon provides some building options, you can enable or disable them by setting the corresponding variables to `ON` or `OFF` in the cmake command line, cmake file etc...

| Option name | Description | Default value |
| --- | --- | --- |
| BUILD\_CTL | Build drogon\_ctl | ON |
| BUILD\_EXAMPLES | Build examples | ON |
| BUILD\_ORM | Build orm | ON |
| COZ\_PROFILING | Use coz for profiling | OFF |
| BUILD\_SHARED\_LIBS | Build drogon as a shared lib | OFF |
| BUILD\_DOC | Build Doxygen documentation | OFF |
| BUILD\_BROTLI | Build Brotli | ON |
| BUILD\_YAML\_CONFIG | Build yaml config | ON |
| USE\_SUBMODULE | Use trantor as a submodule | ON |

## Contributions

This project exists thanks to all the people who contribute code.

[![Code contributors](https://camo.githubusercontent.com/5e6a90f42441e0601582d6d735a784e3ff6712210b099bc6075be79604b67197/68747470733a2f2f636f6e7472696275746f72732d7376672e6f70656e636f6c6c6563746976652e636f6d2f64726f676f6e2f636f6e7472696275746f72732e7376673f77696474683d38393026627574746f6e3d66616c7365)](https://github.com/drogonframework/drogon/graphs/contributors)

Every contribution is welcome. Please refer to the [contribution guidelines](/drogonframework/drogon/blob/master/CONTRIBUTING.md) for more information.

## About

Drogon: A C++14/17/20 based HTTP web application framework running on Linux/macOS/Unix/Windows

### Topics

[linux](/topics/linux "Topic: linux")
[http](/topics/http "Topic: http")
[http-server](/topics/http-server "Topic: http-server")
[asynchronous-programming](/topics/asynchronous-programming "Topic: asynchronous-programming")
[non-blocking-io](/topics/non-blocking-io "Topic: non-blocking-io")
[drogon](/topics/drogon "Topic: drogon")
[http-framework](/topics/http-framework "Topic: http-framework")

### Resources

[Readme](#readme-ov-file)
### License

[MIT license](#MIT-1-ov-file)

[Activity](/drogonframework/drogon/activity)
[Custom properties](/drogonframework/drogon/custom-properties)
### Stars

[**11.8k**
stars](/drogonframework/drogon/stargazers)
### Watchers

[**216**
watching](/drogonframework/drogon/watchers)
### Forks

[**1.1k**
forks](/drogonframework/drogon/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fdrogonframework%2Fdrogon&report=drogonframework+%28user%29)

## [Releases 58](/drogonframework/drogon/releases)

[v1.9.9
Latest

Jan 1, 2025](/drogonframework/drogon/releases/tag/v1.9.9)
[+ 57 releases](/drogonframework/drogon/releases)

## Sponsor this project

 Sponsor

[Learn more about GitHub Sponsors](/sponsors)

## [Packages 0](/orgs/drogonframework/packages?repo_name=drogon)

No packages published

## [Contributors 152](/drogonframework/drogon/graphs/contributors)

* [![@an-tao](https://avatars.githubusercontent.com/u/21002501?s=64&v=4)](https://github.com/an-tao)
* [![@marty1885](https://avatars.githubusercontent.com/u/8792393?s=64&v=4)](https://github.com/marty1885)
* [![@taoan](https://avatars.githubusercontent.com/u/12710452?s=64&v=4)](https://github.com/taoan)
* [![@hwc0919](https://avatars.githubusercontent.com/u/47619675?s=64&v=4)](https://github.com/hwc0919)
* [![@ken-matsui](https://avatars.githubusercontent.com/u/26405363?s=64&v=4)](https://github.com/ken-matsui)
* [![@Mis1eader-dev](https://avatars.githubusercontent.com/u/73486659?s=64&v=4)](https://github.com/Mis1eader-dev)
* [![@rbugajewski](https://avatars.githubusercontent.com/u/24480?s=64&v=4)](https://github.com/rbugajewski)
* [![@fantasy-peak](https://avatars.githubusercontent.com/u/82742316?s=64&v=4)](https://github.com/fantasy-peak)
* [![@Greisby](https://avatars.githubusercontent.com/u/844924?s=64&v=4)](https://github.com/Greisby)
* [![@ihmc3jn09hk](https://avatars.githubusercontent.com/u/13495525?s=64&v=4)](https://github.com/ihmc3jn09hk)
* [![@interfector18](https://avatars.githubusercontent.com/u/21020737?s=64&v=4)](https://github.com/interfector18)
* [![@omar-mohamed-khallaf](https://avatars.githubusercontent.com/u/51155980?s=64&v=4)](https://github.com/omar-mohamed-khallaf)
* [![@tanglong3bf](https://avatars.githubusercontent.com/u/25204871?s=64&v=4)](https://github.com/tanglong3bf)
* [![@HadesD](https://avatars.githubusercontent.com/u/11664992?s=64&v=4)](https://github.com/HadesD)

[+ 138 contributors](/drogonframework/drogon/graphs/contributors)

## Languages

* [C++
  95.9%](/drogonframework/drogon/search?l=c%2B%2B)
* [CMake
  2.9%](/drogonframework/drogon/search?l=cmake)
* Other
  1.2%

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_f7c3a145_20250114_184858.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdrogonframework%2Fdrogon%2Fwiki%2FENG-03-Quick-Start)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdrogonframework%2Fdrogon%2Fwiki%2FENG-03-Quick-Start)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fwiki%2Fshow&source=header-repo&source_repo=drogonframework%2Fdrogon)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[drogonframework](/drogonframework)
/
**[drogon](/drogonframework/drogon)**
Public

* [Notifications](/login?return_to=%2Fdrogonframework%2Fdrogon) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2Fdrogonframework%2Fdrogon)
* [Star
   11.8k](/login?return_to=%2Fdrogonframework%2Fdrogon)

* [Code](/drogonframework/drogon)
* [Issues
  279](/drogonframework/drogon/issues)
* [Pull requests
  28](/drogonframework/drogon/pulls)
* [Discussions](/drogonframework/drogon/discussions)
* [Actions](/drogonframework/drogon/actions)
* [Projects
  0](/drogonframework/drogon/projects)
* [Wiki](/drogonframework/drogon/wiki)
* [Security](/drogonframework/drogon/security)
* [Insights](/drogonframework/drogon/pulse)

Additional navigation options

* [Code](/drogonframework/drogon)
* [Issues](/drogonframework/drogon/issues)
* [Pull requests](/drogonframework/drogon/pulls)
* [Discussions](/drogonframework/drogon/discussions)
* [Actions](/drogonframework/drogon/actions)
* [Projects](/drogonframework/drogon/projects)
* [Wiki](/drogonframework/drogon/wiki)
* [Security](/drogonframework/drogon/security)
* [Insights](/drogonframework/drogon/pulse)

# ENG 03 Quick Start

[Jump to bottom](#wiki-pages-box)

ProTankerAlfa edited this page May 20, 2024
·
[9 revisions](/drogonframework/drogon/wiki/ENG-03-Quick-Start/_history)

##### Other languages: [简体中文](CHN-03-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B)

## Static Site

Let's start with a simple example that introduces the usage of drogon. In this example we create a project using the command line tool `drogon_ctl`:

```
drogon_ctl create project your_project_name
```

There are several useful folders in the project directory already:

```
├── build                         Build folder
├── CMakeLists.txt                Project cmake configuration file
├── config.json                   Drogon application configuration file
├── controllers                   The folder where the controller source files are stored
├── filters                       The folder where the filter files are stored
├── main.cc                       Main program
├── models                        The folder of the database model file
│   └── model.json
└── views                         The folder where view csp files are stored
```

Users can put various files (such as controllers, filters, views, etc.) into the corresponding folders. For more convenience and less error, we strongly recommend that users create their own web application projects using the `drogon_ctl` command. See [drogon\_ctl](ENG-11-drogon_ctl-Command) for more details.

Let's look at the main.cc file:

```
#include <drogon/HttpAppFramework.h>
int main() {
    //Set HTTP listener address and port
    drogon::app().addListener("0.0.0.0",80);
    //Load config file
    //drogon::app().loadConfigFile("../config.json");
    //Run HTTP framework,the method will block in the internal event loop
    drogon::app().run();
    return 0;
}
```

Then build your project as below:

```
cd build
cmake ..
make
```

After the compilation is complete, run the target `./your_project_name`.

Now, we simply add one static file index.html to the Http root path:

```
echo '<h1>Hello Drogon!</h1>' >>index.html
```

The default root path is `"./"`, but could also be modified by config.json. See [Configuration File](ENG-10-Configuration-File) for more details. Then you can visit this page by URL `"http://localhost"` or`"http://localhost/index.html"` (or the IP of the server where your wepapp is running).

![Hello Drogon!](images/hellodrogon.png)

If the server cannot find the the page you have requested, it returns a 404 page:
![404 page](images/notfound.png)

> **Note: Make sure your server firewall has allowed the 80 port. Otherwise, you won't see these pages.(Another way is to change your port from 80 to 1024(or above) in case you get the error message below):**

```
FATAL Permission denied (errno=13) , Bind address failed at 0.0.0.0:80 - Socket.cc:67
```

We could copy the directory and files of a static website to the startup directory of this running webapp, then we can access them from the browser. The file types supported by drogon by default are

* html
* js
* css
* xml
* xsl
* txt
* svg
* ttf
* otf
* woff2
* woff
* eot
* png
* jpg
* jpeg
* gif
* bmp
* ico
* icns

Drogon also provides interfaces to change these file types. For details, please refer to the [HttpAppFramework API](API-HttpAppFramework).

## Dynamic Site

Let's see how to add controllers to this application， and let the controller respond with content.

One can use the drogon\_ctl command line tool to generate controller source files. Let's run it in the `controllers` directory:

```
drogon_ctl create controller TestCtrl
```

As you can see, there are two new files, TestCtrl.h and TestCtrl.cc：

TestCtrl.h is as follows:

```
#pragma once
#include <drogon/HttpSimpleController.h>
using namespace drogon;
class TestCtrl:public drogon::HttpSimpleController<TestCtrl>
{
public:
    virtual void asyncHandleHttpRequest(const HttpRequestPtr &req,
                                        std::function<void (const HttpResponsePtr &)> &&callback)override;
    PATH_LIST_BEGIN
    //list path definitions here;
    //PATH_ADD("/path","filter1","filter2",HttpMethod1,HttpMethod2...);
    PATH_LIST_END
};
```

TestCtrl.cc is as follows:

```
#include "TestCtrl.h"
void TestCtrl::asyncHandleHttpRequest(const HttpRequestPtr &req,
                                      std::function<void (const HttpResponsePtr &)> &&callback)
{
    //write your application logic here
}
```

Let's edit the two files and let the controller handle the function response to a simple "Hello World!"

TestCtrl.h is as follows:

```
#pragma once
#include <drogon/HttpSimpleController.h>
using namespace drogon;
class TestCtrl:public drogon::HttpSimpleController<TestCtrl>
{
public:
    virtual void asyncHandleHttpRequest(const HttpRequestPtr &req,
                                        std::function<void (const HttpResponsePtr &)> &&callback)override;
    PATH_LIST_BEGIN
    //list path definitions here

    //example
    //PATH_ADD("/path","filter1","filter2",HttpMethod1,HttpMethod2...);

    PATH_ADD("/",Get,Post);
    PATH_ADD("/test",Get);
    PATH_LIST_END
};
```

Use PATH\_ADD to map the two paths '/' and '/test' to handler functions and add optional path constraints (here, the allowed HTTP methods).

TestCtrl.cc is as follows:

```
#include "TestCtrl.h"
void TestCtrl::asyncHandleHttpRequest(const HttpRequestPtr &req,
                                      std::function<void (const HttpResponsePtr &)> &&callback)
{
    //write your application logic here
    auto resp=HttpResponse::newHttpResponse();
    //NOTE: The enum constant below is named "k200OK" (as in 200 OK), not "k2000K".
    resp->setStatusCode(k200OK);
    resp->setContentTypeCode(CT_TEXT_HTML);
    resp->setBody("Hello World!");
    callback(resp);
}
```

Recompile this project with CMake, then run the target `./your_project_name`:

```
cd ../build
cmake ..
make
./your_project_name
```

Type `"http://localhost/"` or `"http://localhost/test"` in the browser address bar, and you will see "Hello World!" in the browser.

> **Note: If your server has both static and dynamic resources, Drogon uses dynamic resources first. In this example，the response to `GET http://localhost/` is `Hello World!` (from the `TestCtrl` controller file) instead of `Hello Drogon!` (from the static file index.html).**

We see that adding a controller to an application is very simple. You only need to add the corresponding source file. Even the main file does not need to be modified. This loosely coupled design is very effective for web application development.

> **Note: Drogon has no restrictions on the location of the controller source files. You could also save them in "./" (the project root directory), or you could even define a new directory in `CMakeLists.txt`. It is recommended to use the controllers directory for the convenience of management.**

# Next: [drogon\_ctl Command](ENG-04-0-Controller-Introduction)

![](images/drogon-white17.jpg)

### Toggle table of contents Pages 61

* Loading

  [Home](/drogonframework/drogon/wiki)
* Loading

  [CHN 01 概述](/drogonframework/drogon/wiki/CHN-01-%E6%A6%82%E8%BF%B0)
* Loading

  [CHN 02 安装](/drogonframework/drogon/wiki/CHN-02-%E5%AE%89%E8%A3%85)
* Loading

  [CHN 03 快速开始](/drogonframework/drogon/wiki/CHN-03-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B)
* Loading

  [CHN 04 0 控制器 简介](/drogonframework/drogon/wiki/CHN-04-0-%E6%8E%A7%E5%88%B6%E5%99%A8-%E7%AE%80%E4%BB%8B)
* Loading

  [CHN 04 1 控制器 HttpSimpleController](/drogonframework/drogon/wiki/CHN-04-1-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpSimpleController)
* Loading

  [CHN 04 2 控制器 HttpController](/drogonframework/drogon/wiki/CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController)
* Loading

  [CHN 04 3 控制器 WebSocketController](/drogonframework/drogon/wiki/CHN-04-3-%E6%8E%A7%E5%88%B6%E5%99%A8-WebSocketController)
* Loading

  [CHN 05 中间件和过滤器](/drogonframework/drogon/wiki/CHN-05-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8)
* Loading

  [CHN 06 视图](/drogonframework/drogon/wiki/CHN-06-%E8%A7%86%E5%9B%BE)
* Loading

  [CHN 07 会话](/drogonframework/drogon/wiki/CHN-07-%E4%BC%9A%E8%AF%9D)
* Loading

  [CHN 08 0 数据库 概述](/drogonframework/drogon/wiki/CHN-08-0-%E6%95%B0%E6%8D%AE%E5%BA%93-%E6%A6%82%E8%BF%B0)
* Loading

  [CHN 08 1 数据库 DbClient](/drogonframework/drogon/wiki/CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient)
* Loading

  [CHN 08 2 数据库 事务](/drogonframework/drogon/wiki/CHN-08-2-%E6%95%B0%E6%8D%AE%E5%BA%93-%E4%BA%8B%E5%8A%A1)
* Loading

  [CHN 08 3 数据库 ORM](/drogonframework/drogon/wiki/CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM)
* Loading

  [CHN 08 4 数据库 FastDbClient](/drogonframework/drogon/wiki/CHN-08-4-%E6%95%B0%E6%8D%AE%E5%BA%93-FastDbClient)
* Loading

  [CHN 08 5 数据库 自动批处理](/drogonframework/drogon/wiki/CHN-08-5-%E6%95%B0%E6%8D%AE%E5%BA%93-%E8%87%AA%E5%8A%A8%E6%89%B9%E5%A4%84%E7%90%86)
* Loading

  [CHN 09 插件](/drogonframework/drogon/wiki/CHN-09-%E6%8F%92%E4%BB%B6)
* Loading

  [CHN 10 配置文件](/drogonframework/drogon/wiki/CHN-10-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6)
* Loading

  [CHN 11 drogon\_ctl命令](/drogonframework/drogon/wiki/CHN-11-drogon_ctl%E5%91%BD%E4%BB%A4)
* Loading

  [CHN 12 AOP面向切面编程](/drogonframework/drogon/wiki/CHN-12-AOP%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B)
* Loading

  [CHN 13 性能测试](/drogonframework/drogon/wiki/CHN-13-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95)
* Loading

  [CHN 14 Coz分析](/drogonframework/drogon/wiki/CHN-14-Coz%E5%88%86%E6%9E%90)
* Loading

  [CHN 15 Brotli压缩](/drogonframework/drogon/wiki/CHN-15-Brotli%E5%8E%8B%E7%BC%A9)
* Loading

  [CHN 16 协程](/drogonframework/drogon/wiki/CHN-16-%E5%8D%8F%E7%A8%8B)
* Loading

  [CHN 17 Redis](/drogonframework/drogon/wiki/CHN-17-Redis)
* Loading

  [CHN 18 测试框架](/drogonframework/drogon/wiki/CHN-18-%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6)
* Loading

  [CHN FAQ](/drogonframework/drogon/wiki/CHN-FAQ)
* Loading

  [CHN FAQ 1 线程模型](/drogonframework/drogon/wiki/CHN-FAQ-1-%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B)
* Loading

  [ENG 01 Overview](/drogonframework/drogon/wiki/ENG-01-Overview)
* Loading

  [ENG 02 Installation](/drogonframework/drogon/wiki/ENG-02-Installation)
* Loading

  [ENG 03 Quick Start](/drogonframework/drogon/wiki/ENG-03-Quick-Start)

  + [Other languages: 简体中文](/drogonframework/drogon/wiki/ENG-03-Quick-Start#other-languages-简体中文)
  + [Static Site](/drogonframework/drogon/wiki/ENG-03-Quick-Start#static-site)
  + [Dynamic Site](/drogonframework/drogon/wiki/ENG-03-Quick-Start#dynamic-site)
  + [Next: drogon\_ctl Command](/drogonframework/drogon/wiki/ENG-03-Quick-Start#next-drogon_ctl-command)
* Loading

  [ENG 04 0 Controller Introduction](/drogonframework/drogon/wiki/ENG-04-0-Controller-Introduction)
* Loading

  [ENG 04 1 Controller HttpSimpleController](/drogonframework/drogon/wiki/ENG-04-1-Controller-HttpSimpleController)
* Loading

  [ENG 04 2 Controller HttpController](/drogonframework/drogon/wiki/ENG-04-2-Controller-HttpController)
* Loading

  [ENG 04 3 Controller WebSocketController](/drogonframework/drogon/wiki/ENG-04-3-Controller-WebSocketController)
* Loading

  [ENG 05 Middleware and Filter](/drogonframework/drogon/wiki/ENG-05-Middleware-and-Filter)
* Loading

  [ENG 06 View](/drogonframework/drogon/wiki/ENG-06-View)
* Loading

  [ENG 07 Session](/drogonframework/drogon/wiki/ENG-07-Session)
* Loading

  [ENG 08 0 Database General](/drogonframework/drogon/wiki/ENG-08-0-Database-General)
* Loading

  [ENG 08 1 Database DbClient](/drogonframework/drogon/wiki/ENG-08-1-Database-DbClient)
* Loading

  [ENG 08 2 Database Transaction](/drogonframework/drogon/wiki/ENG-08-2-Database-Transaction)
* Loading

  [ENG 08 3 Database ORM](/drogonframework/drogon/wiki/ENG-08-3-Database-ORM)
* Loading

  [ENG 08 4 Database FastDbClient](/drogonframework/drogon/wiki/ENG-08-4-Database-FastDbClient)
* Loading

  [ENG 08 5 Database auto\_batch](/drogonframework/drogon/wiki/ENG-08-5-Database-auto_batch)
* Loading

  [ENG 09 0 References request](/drogonframework/drogon/wiki/ENG-09-0-References-request)
* Loading

  [ENG 09 1 File Handler](/drogonframework/drogon/wiki/ENG-09-1-File-Handler)
* Loading

  [ENG 10 Plugins](/drogonframework/drogon/wiki/ENG-10-Plugins)
* Loading

  [ENG 11 Configuration File](/drogonframework/drogon/wiki/ENG-11-Configuration-File)
* Loading

  [ENG 12 drogon\_ctl Command](/drogonframework/drogon/wiki/ENG-12-drogon_ctl-Command)
* Loading

  [ENG 13 AOP Aspect Oriented Programming](/drogonframework/drogon/wiki/ENG-13-AOP-Aspect-Oriented-Programming)
* Loading

  [ENG 14 Benchmarks](/drogonframework/drogon/wiki/ENG-14-Benchmarks)
* Loading

  [ENG 15 Coz](/drogonframework/drogon/wiki/ENG-15-Coz)
* Loading

  [ENG 16 Brotli](/drogonframework/drogon/wiki/ENG-16-Brotli)
* Loading

  [ENG 17 Coroutines](/drogonframework/drogon/wiki/ENG-17-Coroutines)
* Loading

  [ENG 18 Redis](/drogonframework/drogon/wiki/ENG-18-Redis)
* Loading

  [ENG 19 Testing Framework](/drogonframework/drogon/wiki/ENG-19-Testing-Framework)
* Loading

  [ENG FAQ](/drogonframework/drogon/wiki/ENG-FAQ)
* Loading

  [ENG FAQ 1 Understanding drogon threading model](/drogonframework/drogon/wiki/ENG-FAQ-1-Understanding-drogon-threading-model)
* Loading

  [Home.zh CN](/drogonframework/drogon/wiki/Home.zh-CN)
* Loading

  [README](/drogonframework/drogon/wiki/README)
* Show 46 more pages…

## Document

### Tutorial

* [Overview](ENG-01-Overview)
* [Install drogon](ENG-02-Installation)
  + [System Requirements](ENG-02-Installation#System-Requirements)
  + [Library Dependencies](ENG-02-Installation#Library-Dependencies)
  + [System Preparation Examples](ENG-02-Installation#System-Preparation-Examples)
    - [Ubuntu](ENG-02-Installation#Ubuntu-1804)
    - [CentOS](ENG-02-Installation#CentOS-75)
    - [MacOS](ENG-02-Installation#MacOS-122)
    - [Windows](ENG-02-Installation#Windows)
  + [Database Environment](ENG-02-Installation#Database-Environment)
    - [PostgreSQL](ENG-02-Installation#PostgreSQL)
    - [MySQL](ENG-02-Installation#MySQL)
    - [SQLite3](ENG-02-Installation#SQLite3)
    - [Redis](ENG-02-Installation#Redis)
  + [Drogon Installation](ENG-02-Installation#Drogon-Installation)
    - [Install by source in Linux](ENG-02-Installation#Install-by-source-in-Linux)
    - [Install by source in Windows](ENG-02-Installation#Install-by-source-in-Windows)
    - [Install by vcpkg in Windows](ENG-02-Installation#Install-by-vcpkg-in-Windows)
    - [Use Docker Image](ENG-02-Installation#Use-Docker-Image)
    - [Use Nix Package](ENG-02-Installation#Use-Nix-Package)
    - [Use CPM.cmake](ENG-02-Installation#Use-CPM.cmake)
    - [Include drogon source code locally](ENG-02-Installation#Include-drogon-source-code-locally)
* [Quick Start](ENG-03-Quick-Start)
  + [Static Site](ENG-03-Quick-Start#Static-Site)
  + [Dynamic Site](ENG-03-Quick-Start#Dynamic-Site)
* [Controller](ENG-04-0-Controller-Introduction)
  + [HttpSimpleController](ENG-04-1-Controller-HttpSimpleController)
  + [HttpController](ENG-04-2-Controller-HttpController)
    - [Path Mapping](ENG-04-2-Controller-HttpController#Path-Mapping)
    - [Parameter Mapping](ENG-04-2-Controller-HttpController#Parameter-Mapping)
    - [Multiple Path Mapping](ENG-04-2-Controller-HttpController#Multiple-Path-Mapping)
    - [Regular Expressions Mapping](ENG-04-2-Controller-HttpController#Regular-Expressions-Mapping)
  + [WebSocketController](ENG-04-3-Controller-WebSocketController)
    - [Path Mapping](ENG-04-3-Controller-WebSocketController#Path-Mapping)
    - [Interface](ENG-04-3-Controller-WebSocketController#Interface)
* [Middleware and Filter](ENG-05-Middleware-and-Filter)
  + [Build-in Middleware/Filter](ENG-05-Middleware-and-Filter#Built-in-Middleware/Filter)
  + [Custom Middleware/Filter](ENG-05-Middleware-and-Filter#Custom-Middleware/Filter)
* [View](ENG-06-View)
  + [Drogon's CSP](ENG-06-View#Drogon's-CSP)
  + [Automated processing of csp files](ENG-06-View#Automated-processing-of-csp-files)
  + [Dynamic compilation and loading of views](ENG-06-View#Dynamic-compilation-and-loading-of-views)
* [Session](ENG-07-Session)
* [Database](ENG-08-0-Database-General)
  + [DbClient](ENG-08-1-Database-DbClient)
    - [Execution Interface](ENG-08-1-Database-DbClient#Execution-Interface)
      * [execSqlAsync](ENG-08-1-Database-DbClient#execSqlAsync)
      * [execSqlAsyncFuture](ENG-08-1-Database-DbClient#execSqlAsyncFuture)
      * [execSqlSync](ENG-08-1-Database-DbClient#execSqlSync)
      * [operator<<](ENG-08-1-Database-DbClient#operator%3C%3C)
  + [Transaction](ENG-08-2-Database-Transaction)
  + [ORM](ENG-08-3-Database-ORM)
    - [Model Class Interface](ENG-08-3-Database-ORM#Model-Class-Interface)
    - [Mapper Class Template](ENG-08-3-Database-ORM#Mapper-Class-Template)
    - [Criteria](ENG-08-3-Database-ORM#Criteria)
    - [Mapper's Chain Interface](ENG-08-3-Database-ORM#Mapper's-Chain-Interface)
    - [Convert](ENG-08-3-Database-ORM#Convert)
    - [Relationships](ENG-08-3-Database-ORM#Relationships)
      * [has one](ENG-08-3-Database-ORM#has-one)
      * [has many](ENG-08-3-Database-ORM#has-many)
      * [many to many](ENG-08-3-Database-ORM#many-to-many)
  + [FastDbClient](ENG-08-4-Database-FastDbClient)
  + [Automatic batch mode](ENG-08-5-Database-auto_batch)
* [References](ENG-09-0-References-request)
  + [Request References](ENG-09-0-References-request)
  + [File Handler](ENG-09-1-File-Handler)
* [Plugins](ENG-10-Plugins)
* [Configuration File](ENG-11-Configuration-File)
* [drogon\_ctl Command](ENG-12-drogon_ctl-Command)
* [AOP](ENG-13-AOP-Aspect-Oriented-Programming)
* [Benchmarks](ENG-14-Benchmarks)
* [Coz profiling](ENG-15-Coz)
* [Brotli info](ENG-16-Brotli)
* [Coroutines](ENG-17-Coroutines)
* [Redis](ENG-18-Redis)
* [Testing Framework](ENG-19-Testing-Framework)
* [FAQ](ENG-FAQ)
  + [Understanding drogon's threading model](ENG-FAQ-1-Understanding-drogon-threading-model)

## 中文文档

### 教程

* [概述](CHN-01-%E6%A6%82%E8%BF%B0)
* [安装 drogon](CHN-02-%E5%AE%89%E8%A3%85)
  + [系统要求](CHN-02-%E5%AE%89%E8%A3%85#%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82)
  + [依赖库](CHN-02-%E5%AE%89%E8%A3%85#%E4%BE%9D%E8%B5%96%E5%BA%93)
  + [系统准备范例](CHN-02-%E5%AE%89%E8%A3%85#%E7%B3%BB%E7%BB%9F%E5%87%86%E5%A4%87%E8%8C%83%E4%BE%8B)
    - [Ubuntu](CHN-02-%E5%AE%89%E8%A3%85#Ubuntu-1804)
    - [CentOS](CHN-02-%E5%AE%89%E8%A3%85#CentOS-75)
    - [MacOS](CHN-02-%E5%AE%89%E8%A3%85#MacOS-122)
    - [Windows](CHN-02-%E5%AE%89%E8%A3%85#Windows)
  + [数据库环境](CHN-02-%E5%AE%89%E8%A3%85#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%8E%AF%E5%A2%83)
    - [PostgreSQL](CHN-02-%E5%AE%89%E8%A3%85#PostgreSQL)
    - [MySQL](CHN-02-%E5%AE%89%E8%A3%85#MySQL)
    - [SQLite3](CHN-02-%E5%AE%89%E8%A3%85#SQLite3)
    - [Redis](CHN-02-%E5%AE%89%E8%A3%85#Redis)
  + [安装 drogon](CHN-02-%E5%AE%89%E8%A3%85#%E5%AE%89%E8%A3%85drogon)
    - [Linux源码安装](CHN-02-%E5%AE%89%E8%A3%85#Linux%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85)
    - [Windows源码安装](CHN-02-%E5%AE%89%E8%A3%85#Windows%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85)
    - [Windows vcpkg安装](CHN-02-%E5%AE%89%E8%A3%85#Windows-vcpkg%E5%AE%89%E8%A3%85)
    - [使用docker镜像](CHN-02-%E5%AE%89%E8%A3%85#%E4%BD%BF%E7%94%A8docker%E9%95%9C%E5%83%8F)
    - [使用Nix包](CHN-02-%E5%AE%89%E8%A3%85#%E4%BD%BF%E7%94%A8Nix%E5%8C%85)
    - [使用CPM.cmake](CHN-02-%E5%AE%89%E8%A3%85#%E4%BD%BF%E7%94%A8CPM.cmake)
    - [直接包含drogon源码](CHN-02-%E5%AE%89%E8%A3%85#%E7%9B%B4%E6%8E%A5%E5%8C%85%E5%90%ABdrogon%E6%BA%90%E7%A0%81)
* [快速开始](CHN-03-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B)
  + [静态网站](CHN-03-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B#%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99)
  + [动态网站](CHN-03-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B#%E5%8A%A8%E6%80%81%E7%BD%91%E7%AB%99)
* [控制器](CHN-04-0-%E6%8E%A7%E5%88%B6%E5%99%A8-%E7%AE%80%E4%BB%8B)
  + [HttpSimpleController](CHN-04-1-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpSimpleController)
  + [HttpController](CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController)
    - [路径映射](CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController#%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84)
    - [参数映射](CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController#%E5%8F%82%E6%95%B0%E6%98%A0%E5%B0%84)
    - [多路径映射](CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController#%E5%A4%9A%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84)
    - [正则表达式映射](CHN-04-2-%E6%8E%A7%E5%88%B6%E5%99%A8-HttpController#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%98%A0%E5%B0%84)
  + [WebSocketController](CHN-04-3-%E6%8E%A7%E5%88%B6%E5%99%A8-WebSocketController)
    - [路径映射](CHN-04-3-%E6%8E%A7%E5%88%B6%E5%99%A8-WebSocketController#%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84)
    - [接口](CHN-04-3-%E6%8E%A7%E5%88%B6%E5%99%A8-WebSocketController#%E6%8E%A5%E5%8F%A3)
* [中间件和过滤器](CHN-05-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8)
  + [内置中间件/过滤器](CHN-05-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8#%E5%86%85%E7%BD%AE%E4%B8%AD%E9%97%B4%E4%BB%B6/%E8%BF%87%E6%BB%A4%E5%99%A8)
  + [自定义中间件/过滤器](CHN-05-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%AD%E9%97%B4%E4%BB%B6/%E8%BF%87%E6%BB%A4%E5%99%A8)
* [视图](CHN-06-%E8%A7%86%E5%9B%BE)
  + [Drogon的csp](CHN-06-%E8%A7%86%E5%9B%BE#Drogon%E7%9A%84csp)
  + [csp文件的自动化处理](CHN-06-%E8%A7%86%E5%9B%BE#csp%E6%96%87%E4%BB%B6%E7%9A%84%E8%87%AA%E5%8A%A8%E5%8C%96%E5%A4%84%E7%90%86)
  + [视图的动态编译和加载](CHN-06-%E8%A7%86%E5%9B%BE#%E8%A7%86%E5%9B%BE%E7%9A%84%E5%8A%A8%E6%80%81%E7%BC%96%E8%AF%91%E5%92%8C%E5%8A%A0%E8%BD%BD)
* [会话](CHN-07-%E4%BC%9A%E8%AF%9D)
* [数据库](CHN-08-0-%E6%95%B0%E6%8D%AE%E5%BA%93-%E6%A6%82%E8%BF%B0)
  + [DbClient](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient)
    - [执行接口](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient#%E6%89%A7%E8%A1%8C%E6%8E%A5%E5%8F%A3)
      * [execSqlAsync](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient#execSqlAsync)
      * [execSqlAsyncFuture](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient#execSqlAsyncFuture)
      * [execSqlSync](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient#execSqlSync)
      * [operator<<](CHN-08-1-%E6%95%B0%E6%8D%AE%E5%BA%93-DbClient#operator%3C%3C)
  + [事务](CHN-08-2-%E6%95%B0%E6%8D%AE%E5%BA%93-%E4%BA%8B%E5%8A%A1)
  + [ORM](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM)
    - [Model类的接口](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#Model%E7%B1%BB%E7%9A%84%E6%8E%A5%E5%8F%A3)
    - [Mapper类模板](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#Mapper%E7%B1%BB%E6%A8%A1%E6%9D%BF)
    - [条件对象](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#%E6%9D%A1%E4%BB%B6%E5%AF%B9%E8%B1%A1)
    - [Mapper 的链式接口](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#Mapper%E7%9A%84%E9%93%BE%E5%BC%8F%E6%8E%A5%E5%8F%A3)
    - [转换](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#%E8%BD%AC%E6%8D%A2)
    - [关系](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#%E5%85%B3%E7%B3%BB)
      * [has one](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#has-one)
      * [has many](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#has-many)
      * [many to many](CHN-08-3-%E6%95%B0%E6%8D%AE%E5%BA%93-ORM#many-to-many)
  + [FastDbClient](CHN-08-4-%E6%95%B0%E6%8D%AE%E5%BA%93-FastDbClient)
  + [自动批处理模式](CHN-08-5-%E6%95%B0%E6%8D%AE%E5%BA%93-%E8%87%AA%E5%8A%A8%E6%89%B9%E5%A4%84%E7%90%86)
* [插件](CHN-09-%E6%8F%92%E4%BB%B6)
* [配置文件](CHN-10-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6)
* [drogon\_ctl命令](CHN-11-drogon_ctl%E5%91%BD%E4%BB%A4)
* [AOP面向切面编程](CHN-12-AOP%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B)
* [性能测试](CHN-13-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95)
* [协程](CHN-16-%E5%8D%8F%E7%A8%8B)
* [Redis](CHN-17-Redis)
* [测试框架](CHN-18-%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6)
* [FAQ](CHN-FAQ)
  + [drogon的线程模型](CHN-FAQ-1-%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B)

##### Clone this wiki locally

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_0fc2a380_20250114_184853.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdrogonframework%2Fdrogon%2Fblob%2F834e3eabdd0441ad2bc80c02e8bbfc3b8312c213%2Flib%2Fsrc%2FStaticFileRouter.cc)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdrogonframework%2Fdrogon%2Fblob%2F834e3eabdd0441ad2bc80c02e8bbfc3b8312c213%2Flib%2Fsrc%2FStaticFileRouter.cc)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=drogonframework%2Fdrogon)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[drogonframework](/drogonframework)
/
**[drogon](/drogonframework/drogon)**
Public

* [Notifications](/login?return_to=%2Fdrogonframework%2Fdrogon) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2Fdrogonframework%2Fdrogon)
* [Star
   11.8k](/login?return_to=%2Fdrogonframework%2Fdrogon)

* [Code](/drogonframework/drogon)
* [Issues
  279](/drogonframework/drogon/issues)
* [Pull requests
  28](/drogonframework/drogon/pulls)
* [Discussions](/drogonframework/drogon/discussions)
* [Actions](/drogonframework/drogon/actions)
* [Projects
  0](/drogonframework/drogon/projects)
* [Wiki](/drogonframework/drogon/wiki)
* [Security](/drogonframework/drogon/security)
* [Insights](/drogonframework/drogon/pulse)

Additional navigation options

* [Code](/drogonframework/drogon)
* [Issues](/drogonframework/drogon/issues)
* [Pull requests](/drogonframework/drogon/pulls)
* [Discussions](/drogonframework/drogon/discussions)
* [Actions](/drogonframework/drogon/actions)
* [Projects](/drogonframework/drogon/projects)
* [Wiki](/drogonframework/drogon/wiki)
* [Security](/drogonframework/drogon/security)
* [Insights](/drogonframework/drogon/pulse)

## Files

 834e3ea
## Breadcrumbs

1. [drogon](/drogonframework/drogon/tree/834e3eabdd0441ad2bc80c02e8bbfc3b8312c213)
2. /[lib](/drogonframework/drogon/tree/834e3eabdd0441ad2bc80c02e8bbfc3b8312c213/lib)
3. /[src](/drogonframework/drogon/tree/834e3eabdd0441ad2bc80c02e8bbfc3b8312c213/lib/src)
/
# StaticFileRouter.cc

Copy path Blame  Blame
## Latest commit

## History

[History](/drogonframework/drogon/commits/834e3eabdd0441ad2bc80c02e8bbfc3b8312c213/lib/src/StaticFileRouter.cc)452 lines (437 loc) · 15.4 KB 834e3ea
## Breadcrumbs

1. [drogon](/drogonframework/drogon/tree/834e3eabdd0441ad2bc80c02e8bbfc3b8312c213)
2. /[lib](/drogonframework/drogon/tree/834e3eabdd0441ad2bc80c02e8bbfc3b8312c213/lib)
3. /[src](/drogonframework/drogon/tree/834e3eabdd0441ad2bc80c02e8bbfc3b8312c213/lib/src)
/
# StaticFileRouter.cc

Top
## File metadata and controls

* Code
* Blame

452 lines (437 loc) · 15.4 KB[Raw](https://github.com/drogonframework/drogon/raw/834e3eabdd0441ad2bc80c02e8bbfc3b8312c213/lib/src/StaticFileRouter.cc)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452/\*\* \* \* StaticFileRouter.cc \* An Tao \* \* Copyright 2018, An Tao. All rights reserved. \* https://github.com/an-tao/drogon \* Use of this source code is governed by a MIT license \* that can be found in the License file. \* \* Drogon \* \*/
#include "StaticFileRouter.h"#include "HttpAppFrameworkImpl.h"#include "HttpRequestImpl.h"#include "HttpResponseImpl.h"#include <fstream>#include <iostream>#include <algorithm>#include <fcntl.h>#ifndef \_WIN32#include <sys/file.h>#else#define stat \_stati64#define S\_ISREG(m) (((m)&0170000) == (0100000))#define S\_ISDIR(m) (((m)&0170000) == (0040000))#endif#include <sys/stat.h>
using namespace drogon;
void StaticFileRouter::init(const std::vector<trantor::EventLoop \*> &ioloops){ // Max timeout up to about 70 days; staticFilesCacheMap\_ = decltype(staticFilesCacheMap\_)( new IOThreadStorage<std::unique\_ptr<CacheMap<std::string, char>>>); staticFilesCacheMap\_->init( [&ioloops](std::unique\_ptr<CacheMap<std::string, char>> &mapPtr, size\_t i) { assert(i == ioloops[i]->index()); mapPtr = std::unique\_ptr<CacheMap<std::string, char>>( new CacheMap<std::string, char>(ioloops[i], 1.0, 4, 50)); }); staticFilesCache\_ = decltype(staticFilesCache\_)( new IOThreadStorage< std::unordered\_map<std::string, HttpResponsePtr>>{}); ioLocationsPtr\_ = decltype(ioLocationsPtr\_)(new IOThreadStorage<std::vector<Location>>); for (auto \*loop : ioloops) { loop->queueInLoop([this] { \*\*ioLocationsPtr\_ = locations\_; }); }}
void StaticFileRouter::route( const HttpRequestImplPtr &req, std::function<void(const HttpResponsePtr &)> &&callback){ const std::string &path = req->path(); if (path.find("/../") != std::string::npos) { // Downloading files from the parent folder is forbidden. callback(app().getCustomErrorHandler()(k403Forbidden)); return; }
 auto lPath = path; std::transform(lPath.begin(), lPath.end(), lPath.begin(), tolower);
 for (auto &location : \*\*ioLocationsPtr\_) { auto &URI = location.uriPrefix\_; if (location.realLocation\_.empty()) { if (!location.alias\_.empty()) { if (location.alias\_[0] == '/') { location.realLocation\_ = location.alias\_; } else { location.realLocation\_ = HttpAppFrameworkImpl::instance().getDocumentRoot() + location.alias\_; } } else { location.realLocation\_ = HttpAppFrameworkImpl::instance().getDocumentRoot() + location.uriPrefix\_; } if (location.realLocation\_[location.realLocation\_.length() - 1] != '/') { location.realLocation\_.append(1, '/'); } if (!location.isCaseSensitive\_) { std::transform(URI.begin(), URI.end(), URI.begin(), tolower); } } auto &tmpPath = location.isCaseSensitive\_ ? path : lPath; if (tmpPath.length() >= URI.length() && std::equal(tmpPath.begin(), tmpPath.begin() + URI.length(), URI.begin())) { string\_view restOfThePath{path.data() + URI.length(), path.length() - URI.length()}; auto pos = restOfThePath.rfind('/'); if (pos != 0 && pos != string\_view::npos && !location.isRecursive\_) { callback(app().getCustomErrorHandler()(k403Forbidden)); return; } std::string filePath = location.realLocation\_ + std::string{restOfThePath.data(), restOfThePath.length()}; struct stat fileStat; if (stat(filePath.c\_str(), &fileStat) != 0) { defaultHandler\_(req, std::move(callback)); return; } if (S\_ISDIR(fileStat.st\_mode)) { // Check if path is eligible for an implicit index.html if (implicitPageEnable\_) { filePath = filePath + "/" + implicitPage\_; } else { callback(app().getCustomErrorHandler()(k403Forbidden)); return; } } else { if (!location.allowAll\_) { pos = restOfThePath.rfind('.'); if (pos == string\_view::npos) { callback(app().getCustomErrorHandler()(k403Forbidden)); return; } std::string extension{restOfThePath.data() + pos + 1, restOfThePath.length() - pos - 1}; std::transform(extension.begin(), extension.end(), extension.begin(), tolower); if (fileTypeSet\_.find(extension) == fileTypeSet\_.end()) { callback(app().getCustomErrorHandler()(k403Forbidden)); return; } } }
 if (location.filters\_.empty()) { sendStaticFileResponse(filePath, req, std::move(callback), string\_view{ location.defaultContentType\_}); } else { auto callbackPtr = std::make\_shared< std::function<void(const drogon::HttpResponsePtr &)>>( std::move(callback)); filters\_function::doFilters( location.filters\_, req, callbackPtr, [callbackPtr, this, req, filePath = std::move(filePath), &contentType = location.defaultContentType\_]() { sendStaticFileResponse(filePath, req, std::move(\*callbackPtr), string\_view{contentType}); }); }
 return; } }
 std::string directoryPath = HttpAppFrameworkImpl::instance().getDocumentRoot() + path; struct stat fileStat; if (stat(directoryPath.c\_str(), &fileStat) == 0) { if (S\_ISDIR(fileStat.st\_mode)) { // Check if path is eligible for an implicit index.html if (implicitPageEnable\_) { std::string filePath = directoryPath + "/" + implicitPage\_; sendStaticFileResponse(filePath, req, std::move(callback), ""); return; } else { callback(app().getCustomErrorHandler()(k403Forbidden)); return; } } else { // This is a normal page auto pos = path.rfind('.'); if (pos == std::string::npos) { callback(app().getCustomErrorHandler()(k403Forbidden)); return; } std::string filetype = lPath.substr(pos + 1); if (fileTypeSet\_.find(filetype) != fileTypeSet\_.end()) { // LOG\_INFO << "file query!" << path; std::string filePath = directoryPath; sendStaticFileResponse(filePath, req, std::move(callback), ""); return; } } } defaultHandler\_(req, std::move(callback));}
void StaticFileRouter::sendStaticFileResponse( const std::string &filePath, const HttpRequestImplPtr &req, std::function<void(const HttpResponsePtr &)> &&callback, const string\_view &defaultContentType){ // find cached response HttpResponsePtr cachedResp; auto &cacheMap = staticFilesCache\_->getThreadData(); auto iter = cacheMap.find(filePath); if (iter != cacheMap.end()) { cachedResp = iter->second; }
 // check last modified time,rfc2616-14.25 // If-Modified-Since: Mon, 15 Oct 2018 06:26:33 GMT
 std::string timeStr; bool fileExists{false}; if (enableLastModify\_) { if (cachedResp) { if (req->method() != Get) { callback(app().getCustomErrorHandler()(k405MethodNotAllowed)); return; } if (static\_cast<HttpResponseImpl \*>(cachedResp.get()) ->getHeaderBy("last-modified") == req->getHeaderBy("if-modified-since")) { std::shared\_ptr<HttpResponseImpl> resp = std::make\_shared<HttpResponseImpl>(); resp->setStatusCode(k304NotModified); resp->setContentTypeCode(CT\_NONE); HttpAppFrameworkImpl::instance().callCallback(req, resp, callback); return; } } else { struct stat fileStat; LOG\_TRACE << "enabled LastModify"; if (stat(filePath.c\_str(), &fileStat) == 0 && S\_ISREG(fileStat.st\_mode)) { fileExists = true; LOG\_TRACE << "last modify time:" << fileStat.st\_mtime; if (req->method() != Get) { callback( app().getCustomErrorHandler()(k405MethodNotAllowed)); return; } struct tm tm1;#ifdef \_WIN32 gmtime\_s(&tm1, &fileStat.st\_mtime);#else gmtime\_r(&fileStat.st\_mtime, &tm1);#endif timeStr.resize(64); auto len = strftime((char \*)timeStr.data(), timeStr.size(), "%a, %d %b %Y %H:%M:%S GMT", &tm1); timeStr.resize(len); const std::string &modiStr = req->getHeaderBy("if-modified-since"); if (modiStr == timeStr && !modiStr.empty()) { LOG\_TRACE << "not Modified!"; std::shared\_ptr<HttpResponseImpl> resp = std::make\_shared<HttpResponseImpl>(); resp->setStatusCode(k304NotModified); resp->setContentTypeCode(CT\_NONE); HttpAppFrameworkImpl::instance().callCallback(req, resp, callback); return; } } else { defaultHandler\_(req, std::move(callback)); return; } } } if (cachedResp) { if (req->method() != Get) { callback(app().getCustomErrorHandler()(k405MethodNotAllowed)); return; } LOG\_TRACE << "Using file cache"; HttpAppFrameworkImpl::instance().callCallback(req, cachedResp, callback); return; } if (!fileExists) { struct stat fileStat; if (stat(filePath.c\_str(), &fileStat) != 0 || !S\_ISREG(fileStat.st\_mode)) { defaultHandler\_(req, std::move(callback)); return; } }
 if (req->method() != Get) { callback(app().getCustomErrorHandler()(k405MethodNotAllowed)); return; }
 HttpResponsePtr resp; auto &acceptEncoding = req->getHeaderBy("accept-encoding");
 if (brStaticFlag\_ && acceptEncoding.find("br") != std::string::npos) { // Find compressed file first. auto brFileName = filePath + ".br"; struct stat filestat; if (stat(brFileName.c\_str(), &filestat) == 0 && S\_ISREG(filestat.st\_mode)) { resp = HttpResponse::newFileResponse(brFileName, "", drogon::getContentType(filePath)); resp->addHeader("Content-Encoding", "br"); } } if (!resp && gzipStaticFlag\_ && acceptEncoding.find("gzip") != std::string::npos) { // Find compressed file first. auto gzipFileName = filePath + ".gz"; struct stat filestat; if (stat(gzipFileName.c\_str(), &filestat) == 0 && S\_ISREG(filestat.st\_mode)) { resp = HttpResponse::newFileResponse(gzipFileName, "", drogon::getContentType(filePath)); resp->addHeader("Content-Encoding", "gzip"); } } if (!resp) resp = HttpResponse::newFileResponse(filePath); if (resp->statusCode() != k404NotFound) { if (resp->getContentType() == CT\_APPLICATION\_OCTET\_STREAM && !defaultContentType.empty()) { resp->setContentTypeCodeAndCustomString(CT\_CUSTOM, defaultContentType); } if (!timeStr.empty()) { resp->addHeader("Last-Modified", timeStr); resp->addHeader("Expires", "Thu, 01 Jan 1970 00:00:00 GMT"); } if (!headers\_.empty()) { for (auto &header : headers\_) { resp->addHeader(header.first, header.second); } } // cache the response for 5 seconds by default if (staticFilesCacheTime\_ >= 0) { LOG\_TRACE << "Save in cache for " << staticFilesCacheTime\_ << " seconds"; resp->setExpiredTime(staticFilesCacheTime\_); staticFilesCache\_->getThreadData()[filePath] = resp; staticFilesCacheMap\_->getThreadData()->insert( filePath, 0, staticFilesCacheTime\_, [this, filePath]() { LOG\_TRACE << "Erase cache"; assert(staticFilesCache\_->getThreadData().find(filePath) != staticFilesCache\_->getThreadData().end()); staticFilesCache\_->getThreadData().erase(filePath); }); } HttpAppFrameworkImpl::instance().callCallback(req, resp, callback); return; } callback(resp); return;}void StaticFileRouter::setFileTypes(const std::vector<std::string> &types){ fileTypeSet\_.clear(); for (auto const &type : types) { fileTypeSet\_.insert(type); }}void StaticFileRouter::defaultHandler( const HttpRequestPtr & /\*req\*/, std::function<void(const HttpResponsePtr &)> &&callback){ callback(HttpResponse::newNotFoundResponse());}

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


