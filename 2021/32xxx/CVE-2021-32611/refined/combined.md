=== Content from git.savannah.nongnu.org_55da46f5_20250114_210433.html ===


| [cgit logo](/cgit/) | [index](/cgit/) : [exosip.git](/cgit/exosip.git/ "exosip.git") | bugfix/multiple-authentications bugfix/nict-multi-auth bugfix/transport-errors exosip-3.X.X feature/improve-randomness master |
| --- | --- | --- |
| exosip |  |

| [summary](/cgit/exosip.git/)[refs](/cgit/exosip.git/refs/?id=f2ed389fe84613512cc560127883e51e6cf8c054)[log](/cgit/exosip.git/log/)[tree](/cgit/exosip.git/tree/?id=f2ed389fe84613512cc560127883e51e6cf8c054)[commit](/cgit/exosip.git/commit/?id=f2ed389fe84613512cc560127883e51e6cf8c054)[diff](/cgit/exosip.git/diff/?id=f2ed389fe84613512cc560127883e51e6cf8c054) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aymeric Moizard <amoizard@gmail.com> | 2021-05-10 15:50:07 +0200 |
| --- | --- | --- |
| committer | Aymeric Moizard <amoizard@gmail.com> | 2021-05-10 15:50:07 +0200 |
| commit | [f2ed389fe84613512cc560127883e51e6cf8c054](/cgit/exosip.git/commit/?id=f2ed389fe84613512cc560127883e51e6cf8c054) ([patch](/cgit/exosip.git/patch/?id=f2ed389fe84613512cc560127883e51e6cf8c054)) | |
| tree | [246d7eafed172d17078049fded1b422589bb0cd0](/cgit/exosip.git/tree/?id=f2ed389fe84613512cc560127883e51e6cf8c054) | |
| parent | [4e7ee0f98e0290f6b34ce233f1eea7d5d53d2dde](/cgit/exosip.git/commit/?id=4e7ee0f98e0290f6b34ce233f1eea7d5d53d2dde) ([diff](/cgit/exosip.git/diff/?id=f2ed389fe84613512cc560127883e51e6cf8c054&id2=4e7ee0f98e0290f6b34ce233f1eea7d5d53d2dde)) | |
| download | [exosip-f2ed389fe84613512cc560127883e51e6cf8c054.tar.gz](/cgit/exosip.git/snapshot/exosip-f2ed389fe84613512cc560127883e51e6cf8c054.tar.gz) | |

[crash] check scheme upon processing 3xx[Diffstat](/cgit/exosip.git/diff/?id=f2ed389fe84613512cc560127883e51e6cf8c054)

| -rw-r--r-- | [src/eXcall\_api.c](/cgit/exosip.git/diff/src/eXcall_api.c?id=f2ed389fe84613512cc560127883e51e6cf8c054) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 3 deletions

| diff --git a/src/eXcall\_api.c b/src/eXcall\_api.cindex ba72a4d..6108c2d 100644--- a/[src/eXcall\_api.c](/cgit/exosip.git/tree/src/eXcall_api.c?id=4e7ee0f98e0290f6b34ce233f1eea7d5d53d2dde)+++ b/[src/eXcall\_api.c](/cgit/exosip.git/tree/src/eXcall_api.c?id=f2ed389fe84613512cc560127883e51e6cf8c054)@@ -1335,7 +1335,7 @@ int \_eXosip\_call\_retry\_request(struct eXosip\_t \*excontext, eXosip\_call\_t \*jc, eX co = (osip\_contact\_t \*) osip\_list\_get\_first(&out\_tr->last\_response->contacts, &it);  while (co != NULL) {- if (co->url != NULL && (osip\_strcasestr(co->url->scheme, "sip") != NULL || osip\_strcasestr(co->url->scheme, "tel") != NULL)) {+ if (co->url != NULL && co->url->scheme != NULL && (osip\_strcasestr(co->url->scheme, "sip") != NULL || osip\_strcasestr(co->url->scheme, "tel") != NULL)) { /\* check tranport? \*/ osip\_uri\_param\_t \*u\_param; @@ -1357,12 +1357,12 @@ int \_eXosip\_call\_retry\_request(struct eXosip\_t \*excontext, eXosip\_call\_t \*jc, eX co = (osip\_contact\_t \*) osip\_list\_get\_next(&it); } - if (co == NULL || co->url == NULL) {+ if (co == NULL || co->url == NULL || co->url->scheme == NULL) { /\* revert anyway to first(tel/sip/sips) contact // we don't care: we use our own transport with proxy \*/ co = co\_usable; } - if (co == NULL || co->url == NULL) {+ if (co == NULL || co->url == NULL || co->url->scheme == NULL) { osip\_message\_free(msg); OSIP\_TRACE(osip\_trace(\_\_FILE\_\_, \_\_LINE\_\_, OSIP\_WARNING, NULL, "[eXosip] no contact header usable for SIP redirection\n")); return OSIP\_SYNTAXERROR; |
| --- |

generated by [cgit v1.1](https://git.zx2c4.com/cgit/about/) at 2025-01-14 21:04:32 +0000


