=== Content from community.sonarsource.com_3e0d047d_20250114_183148.html ===


[Sonar Community](/)

# [[Tech Story] OpenEMR 5.0.2.1: Command Injection vulnerability puts health records at risk](/t/tech-story-openemr-5-0-2-1-command-injection-vulnerability-puts-health-records-at-risk/33592)

[Clean Code](/c/clean-code/announce/20)

[Sonar Updates](/c/clean-code/announce/20)

[security](https://community.sonarsource.com/tag/security),
[php](https://community.sonarsource.com/tag/php)

[Johannes.Dahse](https://community.sonarsource.com/u/Johannes.Dahse)
(Johannes Dahse)

October 28, 2020, 3:30pm

1

OpenEMR is the most popular open source software for electronic health record and medical practice management. It is used world-wide to manage sensitive patient data, including information about medications, laboratory values, and diseases. Patients use OpenEMR to schedule appointments, communicate with physicians, and pay online invoices. Specifically in these tumultuous times of an ongoing pandemic, this is highly sensitive data that needs protection.

During our security research of popular web applications, we discovered several critical code vulnerabilities in OpenEMR 5.0.2.1:

* Command Injection (admin privileges)
* Persistent XSS (admin privileges)
* Insecure API permissions (unauthenticated)
* SQL Injection (user privileges)

A combination of these vulnerabilities allowed remote attackers to execute arbitrary system commands on any OpenEMR server that uses the Patient Portal component. This can lead to the compromise of sensitive patient data, or worse, to a compromise of critical infrastructure. We reported all issues responsibly to the affected vendor who rated the fixes as critical and released a [security patch](https://www.open-emr.org/wiki/index.php/OpenEMR_Patches) in August immediately to protect all users.

We have published a blog post with a technical root cause analysis of three code vulnerabilities, how these could be chained by an attacker during exploitation (including a video), and how the vulnerable code was patched.

[Read the blog post](https://blog.sonarsource.com/openemr-5-0-2-1-command-injection-vulnerability)

4 Likes

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](https://www.sonarsource.com/legal/website-terms-of-use/)
* [Privacy Policy](https://www.sonarsource.com/company/privacy/)

Powered by [Discourse](https://www.discourse.org), best viewed with JavaScript enabled

[The new SonarQube free tier is here! Sign up to scan your private projects for free.](https://www.sonarsource.com/products/sonarcloud/signup-free/)



=== Content from community.open-emr.org_1992ba79_20250114_183148.html ===


![OpenEMR Community](data:image/svg;base64...)
Loading

[OpenEMR Community](/)

# [OpenEMR 5.0.2 Patch 5 has been released](/t/openemr-5-0-2-patch-5-has-been-released/15431)

[News](/c/news/14)

[brady.miller](https://community.open-emr.org/u/brady.miller)
(Brady Miller)

November 5, 2020, 3:26am

1

The 5th patch for OpenEMR 5.0.2 has been released:

<https://www.open-emr.org/wiki/index.php/OpenEMR_Patches>

This patch includes a security fix (since this vulnerability was made public recently, decided to get out a quick patch) :

* Security fix - reported by Dennis Brinkrolf (RIPS Technologies) and fixed by Brady Miller

1 Like

[murugappan](https://community.open-emr.org/u/murugappan)
(Murugappan Ramanathan)

August 18, 2021, 1:58pm

2

Hi,

I clicked the link for the patch but was directed to Version 6.0.0 patch instead. Where is the patches for version 5.0.2, please?

[stephenwaite](https://community.open-emr.org/u/stephenwaite)
(Stephen Waite)

August 18, 2021, 2:26pm

3

further down that [page](https://www.open-emr.org/wiki/index.php/Old_Outdated_OpenEMR_Patches)

[murugappan](https://community.open-emr.org/u/murugappan)
(Murugappan Ramanathan)

August 18, 2021, 8:24pm

4

I am so sorry i did not see it. Thank you so much.

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](/tos)
* [Privacy Policy](/privacy)

Powered by [Discourse](https://www.discourse.org), best viewed with JavaScript enabled



=== Content from www.open-emr.org_01278b18_20250114_183150.html ===

[![](/wiki/skins/Openemr/images/openemr-logo-wiki.svg)](/)

* [Features](/wiki/index.php/OpenEMR_Features)
* [Demo](/demo)
* [Download](/wiki/index.php/OpenEMR_Downloads)
* [Modules](/modules)
* [Blog](/blog)
* [Docs](/wiki)
* [Forum](https://community.open-emr.org/)
* [Chat](/chat)
* Support
  [Professional Support Vendors](/wiki/index.php/Professional_Support)
  [Costs and Support Options](/support)
  [Community Support](https://community.open-emr.org/)
  [Free Basic Live Chat Support](/chat)

# Old Outdated OpenEMR Patches

From OpenEMR Project Wiki

## Contents

* [1 7.0.1 Patch (5/30/23)](#7.0.1_Patch_.285.2F30.2F23.29)
  + [1.1 Download link](#Download_link)
  + [1.2 Description](#Description)
  + [1.3 Installation instructions](#Installation_instructions)
    - [1.3.1 Windows](#Windows)
    - [1.3.2 Linux](#Linux)
  + [1.4 Fixes and New Features](#Fixes_and_New_Features)
  + [1.5 List of files (7.0.1) Patch 1](#List_of_files_.287.0.1.29_Patch_1)
* [2 7.0.0 Patch (11/30/22)](#7.0.0_Patch_.2811.2F30.2F22.29)
  + [2.1 Download link](#Download_link_2)
  + [2.2 Description](#Description_2)
  + [2.3 Installation instructions](#Installation_instructions_2)
    - [2.3.1 Windows](#Windows_2)
    - [2.3.2 Linux](#Linux_2)
  + [2.4 Fixes and New Features](#Fixes_and_New_Features_2)
  + [2.5 List of files (7.0.0) Patch 2](#List_of_files_.287.0.0.29_Patch_2)
* [3 6.1.0 Patch (4/24/22)](#6.1.0_Patch_.284.2F24.2F22.29)
  + [3.1 Download link](#Download_link_3)
  + [3.2 Description](#Description_3)
  + [3.3 Installation instructions](#Installation_instructions_3)
    - [3.3.1 Windows](#Windows_3)
    - [3.3.2 Linux](#Linux_3)
  + [3.4 Fixes and New Features](#Fixes_and_New_Features_3)
  + [3.5 List of files (6.1.0) Patch 1](#List_of_files_.286.1.0.29_Patch_1)
* [4 6.0.0 Patch (2/20/22)](#6.0.0_Patch_.282.2F20.2F22.29)
  + [4.1 Download link](#Download_link_4)
  + [4.2 Description](#Description_4)
  + [4.3 Installation instructions](#Installation_instructions_4)
    - [4.3.1 Windows](#Windows_4)
    - [4.3.2 Linux](#Linux_4)
  + [4.4 Fixes and New Features](#Fixes_and_New_Features_4)
  + [4.5 List of files (6.0.0) Patch 4](#List_of_files_.286.0.0.29_Patch_4)
* [5 5.0.2 Patch (11/4/20)](#5.0.2_Patch_.2811.2F4.2F20.29)
  + [5.1 Download link](#Download_link_5)
  + [5.2 Description](#Description_5)
  + [5.3 Installation instructions](#Installation_instructions_5)
    - [5.3.1 Windows](#Windows_5)
    - [5.3.2 Linux](#Linux_5)
  + [5.4 Fixes and New Features](#Fixes_and_New_Features_5)
  + [5.5 List of files (5.0.2)](#List_of_files_.285.0.2.29)
* [6 5.0.1 Patch (1/19/19)](#5.0.1_Patch_.281.2F19.2F19.29)
  + [6.1 Download link](#Download_link_6)
  + [6.2 Description](#Description_6)
  + [6.3 Installation instructions](#Installation_instructions_6)
    - [6.3.1 Windows](#Windows_6)
    - [6.3.2 Linux](#Linux_6)
  + [6.4 Fixes and New Features](#Fixes_and_New_Features_6)
  + [6.5 List of files (5.0.1)](#List_of_files_.285.0.1.29)
* [7 5.0.0 Patch (3/24/17)](#5.0.0_Patch_.283.2F24.2F17.29)
  + [7.1 Download link](#Download_link_7)
  + [7.2 Description](#Description_7)
  + [7.3 Installation instructions](#Installation_instructions_7)
    - [7.3.1 Windows](#Windows_7)
    - [7.3.2 Linux](#Linux_7)
  + [7.4 Fixes and New Features](#Fixes_and_New_Features_7)
  + [7.5 List of files (5.0.0)](#List_of_files_.285.0.0.29)
* [8 4.2.2 Patch](#4.2.2_Patch)
* [9 4.2.1 Patch](#4.2.1_Patch)
* [10 4.2.0 Patch (9/2/15)](#4.2.0_Patch_.289.2F2.2F15.29)
  + [10.1 Download link](#Download_link_8)
  + [10.2 Description](#Description_8)
  + [10.3 Installation instructions](#Installation_instructions_8)
    - [10.3.1 Windows](#Windows_8)
    - [10.3.2 Linux](#Linux_8)
  + [10.4 Special Issues](#Special_Issues)
  + [10.5 Fixes and New Features](#Fixes_and_New_Features_8)
  + [10.6 List of files (4.2.0)](#List_of_files_.284.2.0.29)
* [11 4.1.2 Patch (6/19/2014)](#4.1.2_Patch_.286.2F19.2F2014.29)
  + [11.1 Download link](#Download_link_9)
  + [11.2 Description](#Description_9)
  + [11.3 Installation instructions](#Installation_instructions_9)
    - [11.3.1 Windows](#Windows_9)
    - [11.3.2 Linux](#Linux_9)
  + [11.4 Fixes and New Features](#Fixes_and_New_Features_9)
  + [11.5 List of files (4.1.2)](#List_of_files_.284.1.2.29)
* [12 4.1.1 Patch (07/27/2013)](#4.1.1_Patch_.2807.2F27.2F2013.29)
  + [12.1 Download link](#Download_link_10)
  + [12.2 Description](#Description_10)
  + [12.3 Installation instructions](#Installation_instructions_10)
    - [12.3.1 Windows](#Windows_10)
    - [12.3.2 Linux](#Linux_10)
  + [12.4 Fixes and New Features](#Fixes_and_New_Features_10)
  + [12.5 List of files (4.1.1)](#List_of_files_.284.1.1.29)
* [13 4.1.0 Patch (7/26/2012)](#4.1.0_Patch_.287.2F26.2F2012.29)
  + [13.1 Download link](#Download_link_11)
  + [13.2 Description](#Description_11)
  + [13.3 Installation instructions](#Installation_instructions_11)
    - [13.3.1 Windows](#Windows_11)
    - [13.3.2 Linux](#Linux_11)
  + [13.4 Fixes and New Features](#Fixes_and_New_Features_11)
  + [13.5 List of files (4.1)](#List_of_files_.284.1.29)
* [14 4.0.0 Patch (04/15/2011)](#4.0.0_Patch_.2804.2F15.2F2011.29)
  + [14.1 Download link](#Download_link_12)
  + [14.2 Description](#Description_12)
  + [14.3 Installation instructions](#Installation_instructions_12)
    - [14.3.1 Windows](#Windows_12)
    - [14.3.2 Linux](#Linux_12)
  + [14.4 Fixes and New Features](#Fixes_and_New_Features_12)
  + [14.5 List of files (4.0)](#List_of_files_.284.0.29)
* [15 3.2.0 Patch (10/05/2010)](#3.2.0_Patch_.2810.2F05.2F2010.29)
  + [15.1 Download link](#Download_link_13)
  + [15.2 Description](#Description_13)
  + [15.3 Installation instructions](#Installation_instructions_13)
    - [15.3.1 Windows](#Windows_13)
    - [15.3.2 Linux](#Linux_13)
  + [15.4 Fixes and New Features](#Fixes_and_New_Features_13)
  + [15.5 List of files (3.2)](#List_of_files_.283.2.29)
* [16 3.1.0 Patch (12/17/2009)](#3.1.0_Patch_.2812.2F17.2F2009.29)
  + [16.1 Download link](#Download_link_14)
  + [16.2 Description](#Description_14)
  + [16.3 Installation instructions](#Installation_instructions_14)
    - [16.3.1 Windows](#Windows_14)
    - [16.3.2 Linux](#Linux_14)
  + [16.4 Fixes and New Features](#Fixes_and_New_Features_14)
  + [16.5 List of files (3.1)](#List_of_files_.283.1.29)

**Security Update(10/01/2017) - For OpenEMR 4.2.2 and lower, ensure you REMOVE the setup.php file from your OpenEMR package after you complete the installation**

**Security Update(02/13/2013) - REMOVE the following file and directory from your OpenEMR installation:**

* **FILE: openemr/library/openflashchart/php-ofc-library/ofc\_upload\_image.php**
* **DIRECTORY: openemr/library/openflashchart/tmp-upload-images/**

* **(the directory should not exist, but if it does, then remove it)**

# 7.0.1 Patch (5/30/23)

### Download link

[7-0-1-Patch-1.zip](https://www.open-emr.org/patch/7-0-1-Patch-1.zip "https://www.open-emr.org/patch/7-0-1-Patch-1.zip") (MD5 sum: 155eeeef42c33dd5b043c0e0c7ac71ac)

### Description

This is the 1st patch. **Please read through the [list of modified files](/wiki/index.php/OpenEMR_Patches#List_of_files_.287.0.1.29_Patch_1 "OpenEMR Patches") to ensure you haven't customized any of these, since this will copy over this.**

### Installation instructions

#### Windows

1. Extract the zipped file into the openemr web directory, and say yes to copying over files
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory
#### Linux

1. Move the patch file to the openemr web directory, then type 'unzip 7-0-1-Patch-1.zip', and confirm ok to copy over files.
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory

### Fixes and New Features

* Security fixes (by Stephen Waite and Brady Miller)
* [Billing Claim Submissions Module Improvements](/wiki/index.php/ClaimRev_Clearinghouse_Module "ClaimRev Clearinghouse Module") ([Video Presentation](https://community.open-emr.org/t/openemr-lecture-series-medical-billing-clearinghouse-and-eligibility-verification-in-openemr/20474/2)) (by Brad Sharp)
* [Telehealth Module Improvements](/wiki/index.php/Comlink_Telehealth_Module_Admin_Instructions "Comlink Telehealth Module Admin Instructions") ([Blog Article](https://www.open-emr.org/blog/openemr-comlink-telehealth-release-7-0-1-2023-04-25)) (by Stephen Nielson)
* [Maximum Failed Login Mechanism Improvements](/wiki/index.php/Brute_Force_Login_Prevention "Brute Force Login Prevention") (by Brady Miller)
* Billing Fixes (by Stephen Waite)
* Patient Dashboard Prescription Fix (by Stephen Waite)
* Growth Chart Fixes (by Stephen Waite)
* Encounter Fixes (by Stephen Waite)
* Eye Form Fixes (by Stephen Waite)
* Dated Reminders Fix (by Jerry Padgett)
* PHP 8.1 and 8.2 Fixes (by Stephen Waite)
* Documentation Fixes (by Myles Penner)
* New Background Service to Manage Outgoing Emails (by Brady Miller)

### List of files (7.0.1) Patch 1

```
controllers/C_InsuranceCompany.class.php
controllers/C_Prescription.class.php
docker/production/docker-compose.yml
Documentation/Direct_Messaging_README.txt
Documentation/INSTALL
Documentation/README.phpgacl
interface/forms/eye_mag/js/eye_base.php
interface/forms/eye_mag/php/eye_mag_functions.php
interface/forms/newpatient/common.php
interface/forms/vitals/growthchart/chart.php
interface/globals.php
interface/main/calendar/add_edit_event.php
interface/main/dated_reminders/dated_reminders.php
interface/main/tabs/menu/menus/standard.json
interface/modules/custom_modules/oe-module-claimrev-connect/composer.json
interface/modules/custom_modules/oe-module-claimrev-connect/public/EraDownload.php
interface/modules/custom_modules/oe-module-claimrev-connect/public/era.php
interface/modules/custom_modules/oe-module-claimrev-connect/src/ClaimRevApi.php
interface/modules/custom_modules/oe-module-claimrev-connect/src/EligibilityData.php
interface/modules/custom_modules/oe-module-claimrev-connect/src/EraPage.php
interface/modules/custom_modules/oe-module-claimrev-connect/src/EraSearch.php
interface/modules/custom_modules/oe-module-claimrev-connect/src/FileSearchModel.php
interface/modules/custom_modules/oe-module-claimrev-connect/src/GlobalConfig.php
interface/modules/custom_modules/oe-module-claimrev-connect/src/ReportDownload.php
interface/modules/custom_modules/oe-module-claimrev-connect/templates/navbar.php
interface/modules/custom_modules/oe-module-claimrev-connect/templates/quick_info.php
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/dist/telehealth.js
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/dist/telehealth.min.js
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/src/conference-room.js
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/src/cvb.min.js
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/src/patient-conference-room.js
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/src/telehealth-bridge.js
interface/modules/custom_modules/oe-module-comlink-telehealth/src/TelehealthGlobalConfig.php
interface/patient_file/reminder/patient_reminders.php
interface/patient_file/summary/demographics.php
interface/reports/ip_tracker.php
interface/usergroup/usergroup_admin.php
library/ajax/addlistitem.php
library/ajax/login_counter_ip_tracker.php
library/classes/Controller.class.php
library/classes/InsuranceCompany.class.php
library/classes/postmaster.php
library/classes/X12Partner.class.php
library/email_service_run.php
library/formatting.inc.php
library/globals.inc.php
library/patient.inc.php
setup.php
sites/default/documents/custom_menus/Custom.json
sql/database.sql
sql_patch.php
sql/patch.sql
src/Billing/BillingProcessor/Tasks/GeneratorX12Direct.php
src/Billing/BillingProcessor/Tasks/GeneratorX12.php
src/Billing/Claim.php
src/Billing/X125010837P.php
src/Common/Auth/AuthUtils.php
templates/x12_partners/general_edit.html
version.php
```

# 7.0.0 Patch (11/30/22)

### Download link

[7-0-0-Patch-2.zip](https://www.open-emr.org/patch/7-0-0-Patch-2.zip "https://www.open-emr.org/patch/7-0-0-Patch-2.zip") (MD5 sum: 45cdbf587feece20de0145f98a871f92)

### Description

This is the 2nd patch and also includes changes from prior patches. **Please read through the [list of modified files](/wiki/index.php/OpenEMR_Patches#List_of_files_.287.0.0.29_Patch_2 "OpenEMR Patches") to ensure you haven't customized any of these, since this will copy over this.**

### Installation instructions

#### Windows

1. Extract the zipped file into the openemr web directory, and say yes to copying over files
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory
4. Delete the following files (if they exist) from the openemr web directory:
'contrib/icd10/Zip File 3 2022 ICD-10-PCS Codes File.zip'
'contrib/icd10/2022-Code Descriptions.zip'
#### Linux

1. Move the patch file to the openemr web directory, then type 'unzip 7-0-0-Patch-2.zip', and confirm ok to copy over files.
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory
4. Delete the following files (if they exist) from the openemr web directory:
'contrib/icd10/Zip File 3 2022 ICD-10-PCS Codes File.zip'
'contrib/icd10/2022-Code Descriptions.zip'

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Security fixes reported by Dennis Brinkrolf, Sonar (<https://sonarsource.com>) (fixed by Brady Miller)\*\*
* Security fixes reported via huntr.dev (fixed by Brady Miller and Stephen Waite)\*\*
* [New Form Builder](https://www.open-emr.org/lectures/#openemr-form-builder-new-feature-quick-and-easy-form-builder) (by Jerry Padgett)\*\*
* [New Telehealth Module](https://github.com/openemr/openemr/blob/rel-700/interface/modules/custom_modules/oe-module-comlink-telehealth/Readme.md) (by Stephen Nielson and Sherwin Gaddis)\*\*
* New PKCE support for Oauth2 (by Stephen Nielson)\*\*
* CCDA improvements and fixes (by Jerry Padgett)\*\*
* FHIR improvements and fixes (by Stephen Nielson)\*\*
* Prescription and medication improvements and fixes (by Simon Quigley and Jerry Padgett)\*\*
* Patient portal improvements (by Jerry Padgett and Stephen Waite)\*\*
* Vitals form improvement and fixes (by Stephen Nielson and Stephen Waite)\*\*
* ICD10 codes update (by Stephen Waite)\*\*
* ICD10 import improvements (by Stephen Waite)\*\*
* Google sign-in module fixes (by Saparbek-Nagashibekov)\*\*
* Billing fixes (by Stephen Waite)\*\*
* Payment fixes (by Stephen Waite)\*\*
* Encounter fixes (by Jerry Padgett and Sherwin Gaddis)\*\*
* Track anything module fix (by Stephen Waite)\*\*
* File white listing fixes (by Stephen Waite and Brady Miller)\*\*
* Login screen fixes (by Tyler Wrenn)\*\*
* Patient portal registration fix (by Tyler Wrenn)\*\*
* GAD7 form improvements (by ruthkonyn)\*\*
* New Real World Testing report (by Brady Miller)\*\*
* PHP 8.1 fixes (by Stephen Waite)\*\*
* PHP 7.4 fixes (by Brady Miller)\*\*
* Security fixes (fixes by Brady Miller and Stephen Waite)
* Vitals form fix (fix by Stephen Waite)
* Patient search fix (fix by David Eschelbacher)
* CCDA fix for large amount of data (fix by Jerry Padgett)
* Patient history form fix (fix by Rod Roark)
* Patient portal EASIPRO fix (fix by Jerry Padgett)
* Patient portal history form fix (fix by Brady Miller)
* Added voided claim to misc billing options and 837 file (by Stephen Waite)
* PHP 8.1 fixes (fixes by Stephen Waite)

### List of files (7.0.0) Patch 2

```
API_README.md
apis/dispatch.php
ccdaservice/oe-blue-button-generate/index.js
ccdaservice/oe-blue-button-generate/lib/documentLevel.js
ccdaservice/oe-blue-button-generate/lib/htmlHeaders.js
ccdaservice/oe-blue-button-generate/lib/translate.js
ccdaservice/oe-blue-button-meta/lib/oids.js
ccdaservice/serveccda.js
contrib/icd10/2023 Code Descriptions in Tabular Order.zip
contrib/icd10/Zip File 3 2023 ICD-10-PCS Codes File.zip
controllers/C_Document.class.php
custom/zutil.cli.doc_import.php
docker/library/api-scope-listing
FHIR_README.md
.gitignore
interface/billing/edi_271.php
interface/billing/edit_payment.php
interface/billing/payment_pat_sel.inc.php
interface/billing/search_payments.php
interface/billing/sl_eob_invoice.php
interface/code_systems/dataloads_ajax.php
interface/code_systems/list_staged.php
interface/forms/care_plan/report.php
interface/forms/eye_mag/php/eye_mag_functions.php
interface/forms/eye_mag/php/taskman_functions.php
interface/forms/fee_sheet/new.php
interface/forms/fee_sheet/review/fee_sheet_ajax.php
interface/forms/fee_sheet/review/fee_sheet_options_ajax.php
interface/forms/fee_sheet/review/fee_sheet_review_view_model.js
interface/forms/fee_sheet/review/initialize_review.php
interface/forms/gad7/gad7.inc.php
interface/forms/gad7/gad7_javasrc.js
interface/forms/gad7/new.php
interface/forms/gad7/report.php
interface/forms/gad7/view.php
interface/forms/LBF/new.php
interface/forms/LBF/printable.php
interface/forms/misc_billing_options/new.php
interface/forms/misc_billing_options/report.php
interface/forms/newpatient/save.php
interface/forms/questionnaire_assessments/info.txt
interface/forms/questionnaire_assessments/lforms/fhir/lformsFHIRAll.min.js
interface/forms/questionnaire_assessments/lforms/fhir/lformsFHIRAll.min.js.map
interface/forms/questionnaire_assessments/lforms/fhir/R4/lformsFHIR.min.js
interface/forms/questionnaire_assessments/lforms/fhir/R4/lformsFHIR.min.js.map
interface/forms/questionnaire_assessments/lforms/fhir/STU3/lformsFHIR.min.js
interface/forms/questionnaire_assessments/lforms/fhir/STU3/lformsFHIR.min.js.map
interface/forms/questionnaire_assessments/lforms/LICENSE.md
interface/forms/questionnaire_assessments/lforms/README.md
interface/forms/questionnaire_assessments/lforms/webcomponent/assets/lib/zone.min.js
interface/forms/questionnaire_assessments/lforms/webcomponent/down_arrow_gray_10_10.png
interface/forms/questionnaire_assessments/lforms/webcomponent/lhc-forms.es2015.js
interface/forms/questionnaire_assessments/lforms/webcomponent/lhc-forms.es5.js
interface/forms/questionnaire_assessments/lforms/webcomponent/magnifying_glass.png
interface/forms/questionnaire_assessments/lforms/webcomponent/main-es2015.js
interface/forms/questionnaire_assessments/lforms/webcomponent/main-es2015.js.map
interface/forms/questionnaire_assessments/lforms/webcomponent/main-es5.js
interface/forms/questionnaire_assessments/lforms/webcomponent/main-es5.js.map
interface/forms/questionnaire_assessments/lforms/webcomponent/polyfills-es2015.js
interface/forms/questionnaire_assessments/lforms/webcomponent/polyfills-es2015.js.map
interface/forms/questionnaire_assessments/lforms/webcomponent/polyfills-es5.js
interface/forms/questionnaire_assessments/lforms/webcomponent/polyfills-es5.js.map
interface/forms/questionnaire_assessments/lforms/webcomponent/runtime-es2015.js
interface/forms/questionnaire_assessments/lforms/webcomponent/runtime-es2015.js.map
interface/forms/questionnaire_assessments/lforms/webcomponent/runtime-es5.js
interface/forms/questionnaire_assessments/lforms/webcomponent/runtime-es5.js.map
interface/forms/questionnaire_assessments/lforms/webcomponent/scripts.js
interface/forms/questionnaire_assessments/lforms/webcomponent/styles.css
interface/forms/questionnaire_assessments/lform_webcomponents.php
interface/forms/questionnaire_assessments/new.php
interface/forms/questionnaire_assessments/patient_portal.php
interface/forms/questionnaire_assessments/questionnaire_assessments.php
interface/forms/questionnaire_assessments/report.php
interface/forms/questionnaire_assessments/save.php
interface/forms/questionnaire_assessments/view.php
interface/forms/track_anything/create.php
interface/forms/track_anything/history.php
interface/forms/track_anything/new.php
interface/forms/vitals/C_FormVitals.class.php
interface/forms/vitals/growthchart/chart.php
interface/forms/vitals/templates/vitals/vitals_actions.html.twig
interface/forms/vitals/templates/vitals/vitals_bmi.html.twig
interface/forms/vitals/templates/vitals/vitals_bmi_status.html.twig
interface/forms/vitals/templates/vitals/vitals_growthchart_actions.html.twig
interface/forms/vitals/templates/vitals/vitals_historical_values_complete.html.twig
interface/forms/vitals/templates/vitals/vitals_historical_values.html.twig
interface/forms/vitals/templates/vitals/vitals.html.twig
interface/forms/vitals/templates/vitals/vitals_interpretation_selector.html.twig
interface/forms/vitals/templates/vitals/vitals_notes.html.twig
interface/forms/vitals/templates/vitals/vitals_reason_row.html.twig
interface/forms/vitals/templates/vitals/vitals_temp_method.html.twig
interface/forms/vitals/templates/vitals/vitals_textbox_conversion.html.twig
interface/forms/vitals/templates/vitals/vitals_textbox.html.twig
interface/forms/vitals/vitals.css
interface/login/login.php
interface/main/backup.php
interface/main/calendar/modules/PostCalendar/pnuserapi.php
interface/main/finder/dynamic_finder_ajax.php
interface/main/messages/messages.php
interface/main/messages/save.php
interface/main/tabs/menu/menus/standard.json
interface/modules/custom_modules/oe-module-comlink-telehealth/CHANGELOG.md
interface/modules/custom_modules/oe-module-comlink-telehealth/cleanup.sql
interface/modules/custom_modules/oe-module-comlink-telehealth/info.txt
interface/modules/custom_modules/oe-module-comlink-telehealth/moduleConfig.php
interface/modules/custom_modules/oe-module-comlink-telehealth/openemr.bootstrap.php
interface/modules/custom_modules/oe-module-comlink-telehealth/phpunit.xml
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/css/telehealth.css
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/cvb.min.js
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/telehealth-appointment.js
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/telehealth-calendar.js
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/telehealth.js
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/telehealth-patient.js
interface/modules/custom_modules/oe-module-comlink-telehealth/public/assets/js/telehealth-provider.js
interface/modules/custom_modules/oe-module-comlink-telehealth/public/index.php
interface/modules/custom_modules/oe-module-comlink-telehealth/public/index-portal.php
interface/modules/custom_modules/oe-module-comlink-telehealth/Readme.md
interface/modules/custom_modules/oe-module-comlink-telehealth/sql/table.sql
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Bootstrap.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Controller/Admin/TeleHealthPatientAdminController.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Controller/Admin/TeleHealthUserAdminController.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Controller/TeleconferenceRoomController.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Controller/TeleHealthCalendarController.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Controller/TeleHealthFrontendSettingsController.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Controller/TeleHealthPatientPortalController.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Controller/TeleHealthVideoRegistrationController.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Exception/TelehealthProviderNotEnrolledException.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Exception/TeleHealthProviderSuspendedException.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Models/TeleHealthPersonSettings.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Models/TeleHealthUser.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Models/UserVideoRegistrationRequest.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Repository/CalendarEventCategoryRepository.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Repository/TeleHealthPersonSettingsRepository.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Repository/TeleHealthProviderRepository.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Repository/TeleHealthSessionRepository.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Repository/TeleHealthUserRepository.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Services/TelehealthRegistrationCodeService.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Services/TeleHealthRemoteRegistrationService.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/TelehealthGlobalConfig.php
interface/modules/custom_modules/oe-module-comlink-telehealth/src/Util/CalendarUtils.php
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/comlink/admin/user_admin-extension.html.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/comlink/appointment/add_edit_event.js.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/comlink/conference-room.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/comlink/patient-portal.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/comlink/telehealth-frontend-settings.js.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/comlink/video-control-bar.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/comlink/waiting-room-patient.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/comlink/waiting-room-provider.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/comlink/waiting-room.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/emails/partials/patient/email-message-fhir-access.html.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/emails/partials/patient/email-message-fhir-access.text.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/patient/partials/registration-code.html.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/templates/portal/appointment-item.html.twig
interface/modules/custom_modules/oe-module-comlink-telehealth/tests/bootstrap.php
interface/modules/custom_modules/oe-module-comlink-telehealth/tests/Tests/Unit/TeleconferenceRoomControllerTest.php
interface/modules/custom_modules/oe-module-comlink-telehealth/tests/Tests/Unit/TeleHealthUserRepositoryTest.php
interface/modules/custom_modules/oe-module-comlink-telehealth/tests/Tests/Unit/TeleHealthVideoRegistrationControllerTest.php
interface/modules/custom_modules/oe-module-comlink-telehealth/welcome.php
interface/modules/zend_modules/module/Application/src/Application/Model/ApplicationTable.php
interface/modules/zend_modules/module/Application/src/Application/Plugin/CommonPlugin.php
interface/modules/zend_modules/module/Application/view/application/sendto/send.phtml
interface/modules/zend_modules/module/Carecoordination/src/Carecoordination/Controller/CarecoordinationController.php
interface/modules/zend_modules/module/Carecoordination/src/Carecoordination/Controller/EncounterccdadispatchController.php
interface/modules/zend_modules/module/Carecoordination/src/Carecoordination/Controller/EncountermanagerController.php
interface/modules/zend_modules/module/Carecoordination/src/Carecoordination/Model/CarecoordinationTable.php
interface/modules/zend_modules/module/Carecoordination/src/Carecoordination/Model/CcdaGenerator.php
interface/modules/zend_modules/module/Carecoordination/src/Carecoordination/Model/CcdaServiceDocumentRequestor.php
interface/modules/zend_modules/module/Carecoordination/src/Carecoordination/Model/CcdaServiceRequestModelGenerator.php
interface/modules/zend_modules/module/Carecoordination/src/Carecoordination/Model/EncounterccdadispatchTable.php
interface/modules/zend_modules/module/Carecoordination/src/Carecoordination/Model/EncountermanagerTable.php
interface/modules/zend_modules/module/Carecoordination/view/carecoordination/carecoordination/upload.phtml
interface/modules/zend_modules/module/Carecoordination/view/carecoordination/encountermanager/index.phtml
interface/modules/zend_modules/public/index.php
interface/orders/receive_hl7_results.inc.php
interface/orders/single_order_results.inc.php
interface/patient_file/deleter.php
interface/patient_file/education.php
interface/patient_file/encounter/forms.php
interface/patient_file/front_payment_cc.php
interface/patient_file/history/encounters.php
interface/patient_file/printed_fee_sheet.php
interface/patient_file/report/custom_report.php
interface/patient_file/summary/add_edit_amendments.php
interface/patient_file/summary/create_portallogin.php
interface/patient_file/summary/demographics.php
interface/patient_file/summary/demographics_print.php
interface/patient_file/summary/demographics_save.php
interface/patient_file/summary/list_amendments.php
interface/patient_file/summary/print_amendments.php
interface/patient_file/summary/stats.php
interface/patient_file/summary/track_anything_fragment.php
interface/patient_file/transaction/print_referral.php
interface/patient_tracker/patient_tracker.php
interface/reports/rwt_2023_report.php
interface/smart/register-app.php
interface/super/edit_globals.php
interface/super/edit_layout.php
interface/super/manage_document_templates.php
interface/super/manage_site_files.php
interface/usergroup/facility_admin.php
interface/usergroup/user_admin.php
interface/usergroup/usergroup_admin_add.php
library/ajax/billing_tracker_ajax.php
library/classes/Controller.class.php
library/classes/Document.class.php
library/classes/Installer.class.php
library/classes/InsuranceNumbers.class.php
library/classes/Prescription.class.php
library/classes/rulesets/Amc/library/AmcItemizedActionData.php
library/classes/TreeMenu.php
library/classes/X12Partner.class.php
library/clinical_rules.php
library/dialog.js
library/direct_message_check.inc
library/documents.php
library/globals.inc.php
library/htmlspecialchars.inc.php
library/js/ajtooltip.js
library/MedEx/API.php
library/options.inc.php
library/patient.inc
library/payment.inc.php
library/pnotes.inc
library/standard_tables_capture.inc
portal/account/register.php
portal/add_edit_event_user.php
portal/get_patient_info.php
portal/get_pro.php
portal/home.php
portal/import_template.php
portal/import_template_ui.php
portal/index.php
portal/lib/appsql.class.php
portal/lib/download_template.php
portal/messaging/secure_chat.php
portal/patient/fwk/libs/verysimple/Phreeze/Criteria.php
portal/patient/fwk/libs/verysimple/Phreeze/DataPage.php
portal/patient/fwk/libs/verysimple/Phreeze/DataSet.php
portal/patient/fwk/libs/verysimple/Phreeze/Phreezable.php
portal/patient/fwk/libs/verysimple/Phreeze/Reporter.php
portal/patient/libs/Controller/PortalPatientController.php
portal/patient/scripts/app/onsitedocuments.js
portal/patient/templates/OnsiteActivityViewListView.tpl.php
portal/patient/templates/OnsiteDocumentListView.tpl.php
portal/patient/templates/ProviderHome.tpl.php
portal/questionnaire_render.php
portal/report/portal_patient_report.php
portal/sign/lib/save-signature.php
portal/sign/lib/show-signature.php
_rest_config.php
_rest_routes.inc.php
setup.php
sites/default/documents/custom_menus/Custom.json
sql/database.sql
sql_patch.php
sql/patch.sql
src/Billing/BillingProcessor/BillingClaim.php
src/Billing/BillingProcessor/Tasks/GeneratorHCFA_PDF_IMG.php
src/Billing/BillingProcessor/Tasks/GeneratorX12.php
src/Billing/BillingProcessor/X12RemoteTracker.php
src/Billing/BillingReport.php
src/Billing/Claim.php
src/Billing/Hcfa1500.php
src/Billing/X125010837P.php
src/Common/Auth/OpenIDConnect/Grant/CustomAuthCodeGrant.php
src/Common/Auth/OpenIDConnect/Grant/CustomPasswordGrant.php
src/Common/Auth/OpenIDConnect/Grant/CustomRefreshTokenGrant.php
src/Common/Auth/OpenIDConnect/Repositories/ScopeRepository.php
src/Common/Auth/OpenIDConnect/SMARTSessionTokenContextBuilder.php
src/Common/Command/CreateClientCredentialsAssertionCommand.php
src/Common/Forms/CoreFormToPortalUtility.php
src/Common/Http/HttpRestRequest.php
src/Common/Http/HttpRestRouteHandler.php
src/Common/Logging/EventAuditLogger.php
src/Common/ORDataObject/Address.php
src/Common/ORDataObject/ContactAddress.php
src/Common/Session/SessionUtil.php
src/Common/Twig/TwigExtension.php
src/Common/Utils/CacheUtils.php
src/Common/Uuid/UuidRegistry.php
src/Core/Header.php
src/Core/ModulesApplication.php
src/Core/ModulesClassLoader.php
src/Cqm/Qdm/BaseTypes/AbstractType.php
src/Cqm/Qdm/BaseTypes/DateTime.php
src/Cqm/QrdaControllers/QrdaReportController.php
src/Events/Core/TemplatePageEvent.php
src/Events/Patient/Summary/PortalCredentialsTemplateDataFilterEvent.php
src/Events/Patient/Summary/PortalCredentialsUpdatedEvent.php
src/Events/User/UserEditRenderEvent.php
src/FHIR/SMART/Capability.php
src/FHIR/SMART/SMARTLaunchToken.php
src/Gacl/Gacl.php
src/Patient/Cards/PortalCard.php
src/PatientPortal/Chat/ChatController.php
src/Reports/RealWorldTesting.php
src/RestControllers/AppointmentRestController.php
src/RestControllers/AuthorizationController.php
src/RestControllers/FHIR/FhirAppointmentRestController.php
src/RestControllers/FHIR/FhirDocumentRestController.php
src/RestControllers/FHIR/FhirMetaDataRestController.php
src/RestControllers/FHIR/Operations/FhirOperationDefinitionRestController.php
src/RestControllers/FHIR/Operations/FhirOperationExportRestController.php
src/RestControllers/RestControllerHelper.php
src/RestControllers/SMART/SMARTConfigurationController.php
src/Rx/RxList.php
src/Services/AppointmentService.php
src/Services/BaseService.php
src/Services/Cda/CdaTemplateImportDispose.php
src/Services/Cda/CdaTemplateParse.php
src/Services/Cda/CdaValidateDocuments.php
src/Services/Cda/XmlExtended.php
src/Services/ClinicalNotesService.php
src/Services/DocumentService.php
src/Services/DocumentTemplates/DocumentTemplateService.php
src/Services/FHIR/DiagnosticReport/FhirDiagnosticReportClinicalNotesService.php
src/Services/FHIR/DiagnosticReport/FhirDiagnosticReportLaboratoryService.php
src/Services/FHIR/DocumentReference/FhirClinicalNotesService.php
src/Services/FHIR/DocumentReference/FhirPatientDocumentReferenceService.php
src/Services/FHIR/FhirAllergyIntoleranceService.php
src/Services/FHIR/FhirAppointmentService.php
src/Services/FHIR/FhirCarePlanService.php
src/Services/FHIR/FhirCareTeamService.php
src/Services/FHIR/FhirConditionService.php
src/Services/FHIR/FhirCoverageService.php
src/Services/FHIR/FhirDeviceService.php
src/Services/FHIR/FhirEncounterService.php
src/Services/FHIR/FhirGoalService.php
src/Services/FHIR/FhirImmunizationService.php
src/Services/FHIR/FhirLocationService.php
src/Services/FHIR/FhirMedicationRequestService.php
src/Services/FHIR/FhirMedicationService.php
src/Services/FHIR/FhirPatientService.php
src/Services/FHIR/FhirPersonService.php
src/Services/FHIR/FhirPractitionerRoleService.php
src/Services/FHIR/FhirPractitionerService.php
src/Services/FHIR/Group/FhirPatientProviderGroupService.php
src/Services/FHIR/Observation/FhirObservationLaboratoryService.php
src/Services/FHIR/Observation/FhirObservationSocialHistoryService.php
src/Services/FHIR/Observation/FhirObservationVitalsService.php
src/Services/FHIR/Organization/FhirOrganizationFacilityService.php
src/Services/FHIR/Organization/FhirOrganizationInsuranceService.php
src/Services/FHIR/Organization/FhirOrganizationProcedureProviderService.php
src/Services/FHIR/Procedure/FhirProcedureOEProcedureService.php
src/Services/FHIR/Procedure/FhirProcedureSurgeryService.php
src/Services/FHIR/Traits/FhirBulkExportDomainResourceTrait.php
src/Services/FHIR/UtilsService.php
src/Services/LocationService.php
src/Services/PatientService.php
src/Services/PatientTrackerService.php
src/Services/Qdm/Services/ImmunizationAdministeredService.php
src/Services/QuestionnaireResponseService.php
src/Services/QuestionnaireService.php
src/Services/QuestionnaireTraits.php
src/Services/Search/DateSearchField.php
src/Services/Search/SearchFieldStatementResolver.php
src/Services/SurgeryService.php
src/Services/UserService.php
.stylelintrc.json
swagger/index.html
swagger/openemr-api.yaml
templates/core/about.html.twig
templates/emails/partials/patient/email-message-fhir-access.html.twig
templates/login/login_core.html.twig
templates/patient/card/medication.html.twig
templates/patient/partials/portal.html.twig
templates/patient/portal_login/print.html.twig
templates/portal/home.html.twig
tests/bootstrap.php
tests/Tests/Api/ApiTestClient.php
tests/Tests/Api/CapabilityFhirTest.php
tests/Tests/Unit/Common/Http/HttpRestParsedRouteTest.php
version.php
```

# 6.1.0 Patch (4/24/22)

### Download link

[6-1-0-Patch-1.zip](https://www.open-emr.org/patch/6-1-0-Patch-1.zip "https://www.open-emr.org/patch/6-1-0-Patch-1.zip") (MD5 sum: 35e4680406294c4bed9b5a008fbbca30)

### Description

This is the 1st patch. **Please read through the [list of modified files](/wiki/index.php/OpenEMR_Patches#List_of_files_.286.1.0.29_Patch_1 "OpenEMR Patches") to ensure you haven't customized any of these, since this will copy over this.**

### Installation instructions

#### Windows

1. Extract the zipped file into the openemr web directory, and say yes to copying over files
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory
#### Linux

1. Move the patch file to the openemr web directory, then type 'unzip 6-1-0-Patch-1.zip', and confirm ok to copy over files.
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory

### Fixes and New Features

* Security fixes (fixes by Brady Miller, Stephen Waite)
* LBF printing fix (fix by Brady Miller)
* Various demographics fixes for twig overhaul including WENO Rx(fixes by Stephen Waite)
* PHP8 for Eye form and miscellaneous php8 bug fixes (by Stephen Waite)
* Billing fix for submitter name (by Daniel Pflieger)
* Patient portal registration bug fix (by Brady Miller)
* Multi site install fixes (by Stephen Waite)
* Backup bug fix (by Brady Miller)
* Save appointment fix in calendar lookup (by infeg-khaleela)
* OpenEMR API Create Transaction (by Jonathan Moore)
* FHIR API Bug fixes (by Stephen Nielson)
* API Medication bug fix (by Natarajan MS)
* Code type selector bug (fixed by Stephen Nielson)

### List of files (6.1.0) Patch 1

```
API_README.md
_rest_routes.inc.php
ci/ciLibrary.source
controllers/C_Document.class.php
docker/library/api-scope-listing
interface/billing/get_claim_file.php
interface/billing/sl_eob_invoice.php
interface/drugs/add_edit_lot.php
interface/fax/fax_dispatch.php
interface/forms/CAMOS/content_parser.php
interface/forms/LBF/printable.php
interface/forms/aftercare_plan/new.php
interface/forms/aftercare_plan/save.php
interface/forms/care_plan/save.php
interface/forms/clinical_instructions/new.php
interface/forms/clinical_instructions/save.php
interface/forms/clinical_notes/new.php
interface/forms/clinical_notes/save.php
interface/forms/eye_mag/SpectacleRx.php
interface/forms/eye_mag/a_issue.php
interface/forms/eye_mag/php/eye_mag_functions.php
interface/forms/eye_mag/php/taskman_functions.php
interface/forms/eye_mag/report.php
interface/forms/eye_mag/save.php
interface/forms/eye_mag/view.php
interface/forms/fee_sheet/new.php
interface/forms/functional_cognitive_status/new.php
interface/forms/functional_cognitive_status/save.php
interface/forms/misc_billing_options/new.php
interface/forms/observation/new.php
interface/forms/requisition/new.php
interface/forms/transfer_summary/new.php
interface/forms/transfer_summary/save.php
interface/forms/treatment_plan/new.php
interface/forms/treatment_plan/save.php
interface/forms/vitals/templates/vitals/vitals_textbox.tpl
interface/forms/vitals/templates/vitals/vitals_textbox_conversion.tpl
interface/main/backup.php
interface/main/calendar/add_edit_event.php
interface/main/main_screen.php
interface/main/messages/messages.php
interface/modules/zend_modules/module/Installer/src/Installer/Controller/InstallerController.php
interface/orders/find_order_popup.php
interface/patient_file/deleter.php
interface/patient_file/encounter/find_code_popup.php
interface/patient_file/history/encounters.php
interface/patient_file/pos_checkout_ippf.php
interface/patient_file/rules/patient_data.php
interface/patient_file/summary/add_edit_issue.php
interface/patient_file/summary/advancedirectives.php
interface/patient_file/summary/demographics.php
interface/patient_file/summary/demographics_print.php
interface/patient_file/summary/disclosure_full.php
interface/patient_file/summary/record_disclosure.php
interface/patient_file/summary/stats.php
interface/patient_tracker/patient_tracker.php
interface/practice/ins_search.php
interface/reports/inventory_list.php
interface/reports/pat_ledger.php
interface/super/manage_document_templates.php
library/FeeSheet.class.php
library/classes/Installer.class.php
library/custom_template/custom_template.php
library/edihistory/codes/edih_835_code_class.php
library/globals.inc.php
library/options.inc.php
portal/account/verify.php
sql/example_patient_data.sql
src/Billing/BillingProcessor/BillingClaim.php
src/Billing/BillingProcessor/BillingClaimBatch.php
src/Billing/BillingProcessor/BillingProcessor.php
src/Billing/BillingProcessor/Tasks/AbstractGenerator.php
src/Billing/BillingProcessor/Tasks/GeneratorHCFA.php
src/Billing/BillingProcessor/Tasks/GeneratorHCFA_PDF.php
src/Billing/BillingProcessor/Tasks/GeneratorHCFA_PDF_IMG.php
src/Billing/BillingProcessor/Tasks/GeneratorX12.php
src/Billing/BillingUtilities.php
src/Billing/Claim.php
src/Billing/EDI270.php
src/Billing/InvoiceSummary.php
src/Billing/X125010837P.php
src/Common/Auth/OpenIDConnect/Repositories/ScopeRepository.php
src/Common/Crypto/CryptoGen.php
src/Common/Forms/FormVitals.php
src/Common/Uuid/UuidMapping.php
src/Common/Uuid/UuidRegistry.php
src/RestControllers/TransactionRestController.php
src/Rx/Weno/LogProperties.php
src/Rx/Weno/TransmitProperties.php
src/Services/AddressService.php
src/Services/CarePlanService.php
src/Services/ConditionService.php
src/Services/FHIR/DocumentReference/FhirClinicalNotesService.php
src/Services/FHIR/DocumentReference/FhirPatientDocumentReferenceService.php
src/Services/FHIR/FhirCarePlanService.php
src/Services/FHIR/FhirImmunizationService.php
src/Services/FHIR/FhirMedicationRequestService.php
src/Services/FHIR/FhirOrganizationService.php
src/Services/FHIR/FhirProvenanceService.php
src/Services/FHIR/Procedure/FhirProcedureOEProcedureService.php
src/Services/ImmunizationService.php
src/Services/InsuranceCompanyService.php
src/Services/PatientIssuesService.php
src/Services/PatientService.php
src/Services/PatientTransactionService.php
src/Services/SurgeryService.php
swagger/openemr-api.yaml
templates/documents/general_view.html
templates/patient/card/rx.html.twig
templates/x12_partners/general_edit.html
tests/Tests/Services/CarePlanServiceTest.php
version.php
```

# 6.0.0 Patch (2/20/22)

### Download link

[6-0-0-Patch-4.zip](https://www.open-emr.org/patch/6-0-0-Patch-4.zip "https://www.open-emr.org/patch/6-0-0-Patch-4.zip") (MD5 sum: f98646209434b8c84a950256671649af)

### Description

This is the 4th patch and also includes changes from prior patches. **Please read through the [list of modified files](/wiki/index.php/OpenEMR_Patches#List_of_files_.286.0.0.29_Patch_4 "OpenEMR Patches") to ensure you haven't customized any of these, since this will copy over this.**

### Installation instructions

#### Windows

1. Extract the zipped file into the openemr web directory, and say yes to copying over files
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory
4. Then follow these special instructions: [6-0-0-4 Patch Special Instructions](/wiki/index.php/6-0-0-4_Patch_Special_Instructions "6-0-0-4 Patch Special Instructions")
#### Linux

1. Move the patch file to the openemr web directory, then type 'unzip 6-0-0-Patch-4.zip', and confirm ok to copy over files.
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory
4. Then follow these special instructions: [6-0-0-4 Patch Special Instructions](/wiki/index.php/6-0-0-4_Patch_Special_Instructions "6-0-0-4 Patch Special Instructions")

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Patient Portal improvements (by Jerry Padgett)\*\*

* User interface improvements
* Patient form improvements with support for template profiles and patient groups
* Forum post covering new Patient Portal features at: <https://community.open-emr.org/t/newly-revamped-patient-portal-v6-0-4-and-future-v6-1-0/17776>
* Video covering new Patient Portal features at: <https://youtu.be/UnYBr0wlAZk>
* Documentation covering new Patient Portal features at: <https://www.open-emr.org/wiki/index.php/6-0-0-4_Patch_Special_Instructions>

* Critical security fixes (by Brady Miller)\*\*
* [New Support for Fully Integrated Payment Processing](/wiki/index.php/Sphere_Payment_Processing_Module "Sphere Payment Processing Module") (by Brady Miller)\*\*
* Clinical decision rules editor fix (reported by Sherwin Gaddis, fixed by Jerry Padgett)\*\*
* Calendar find available appointment fix (by Stephen Waite)\*\*
* Newcrop eRX fix (by Stephen Waite)\*\*
* Percentage discount fix (by surfacehazard)\*\*
* Added Support for Fully Integrated Telehealth Modules; see [Lifemesh Telehealth Module](/wiki/index.php/OpenEMR_Modules#Lifemesh_Telehealth_Module "OpenEMR Modules") for the first integrated third party Telehealth Module (by Sherwin Gaddis)
* Patient Portal improvements (by Jerry Padgett)
* Security fixes (fixes by Brady Miller)
* PHP8 bug fixes (fixes by Jerry Padgett and Stephen Waite)
* Patient finder fix (fix by Stephen Waite)
* Billing fixes (fixes by Stephen Waite)
* EDI history fixes (fixes by Stephen Waite)
* Fee sheet fix (fix by Stephen Waite)
* Billing daysheet fix (fix by Stephen Waite)
* Collection report fix (fix by Stephen Waite)
* Demographics fixes (fixes by Stephen Waite)
* Vitals form fix (fix by Jerry Padgett)
* Unique installation ID fix (fix by Brady Miller)
* Code types fix (fix by Stephen Waite)
* Pnote fix (fix by Jerry Padgett)
* Added setting to turn on/off input of onset/hospitalization date for each visit (by Rod Roark)
* Security fix (reported by Hagai Wechsler at <https://www.whitesourcesoftware.com>, fix by Brady Miller)
* WENO Exchange ePrescribing fixes (fixes by Sherwin Gaddis)
* Session and timeout fixes (fixes by Rod Roark, Stephen Waite, Jerry Padgett and Brady Miller)
* Patient portal improvements (by Jerry Padgett)
* Eye form fixes (fixes by Ray Magauran)
* Billing fixes (fixes by Stephen Waite)
* New GAD-7 form (by Ruth Moulton)
* Layout Based Form fix (fix by Rod Roark)
* Backup fixes (fixes by Rod Roark)
* Demographics fix (fix by Ken Chapple)
* Messaging improvement (by Stephen Waite)
* PHP 8 fixes (fixes by Stephen Waite)
* MySQL 8 fix (fix by Rod Roark)
* Security fixes (reported by Hagai Wechsler at <https://www.whitesourcesoftware.com>, fixes by Brady Miller)
* Eye form fixes (fixes by Ray Magauran)
* Patient portal registration fix (fix by Jerry Padgett)
* WENO Exchange ePrescribing (by Sherwin Gaddis)
* UUID creation optimizations (by Brady Miller)
* Billing fixes (fixes by Stephen Waite)
* sql upgrade optimizations (by Stephen Waite)
* Addition of Johnson & Johnson COVID-19 vaccine (by Stephen Waite)

### List of files (6.0.0) Patch 4

```
.github/workflows/styling.yml
.gitignore
Documentation/help_files/template_maintenance_help.php
acknowledge_license_cert.html
ccdaservice/serveccda.js
ccr/stylesheet/ccr.xsl
ci/apache_73_103/docker-compose.yml
ci/apache_73_104/docker-compose.yml
ci/apache_73_105/docker-compose.yml
ci/apache_73_57/docker-compose.yml
ci/apache_73_8/docker-compose.yml
config/config.yaml
contrib/weno/WenoPharmacyDirectory2020-12-13.csv
controllers/C_Document.class.php
controllers/C_Pharmacy.class.php
custom/code_types.inc.php
gacl/Cache_Lite/Lite.php
interface/billing/billing_report.php
interface/billing/edih_view.php
interface/billing/edit_payment.php
interface/billing/new_payment.php
interface/billing/payment_pat_sel.inc.php
interface/billing/search_payments.php
interface/billing/sl_eob_invoice.php
interface/billing/sl_eob_process.php
interface/billing/sl_eob_search.php
interface/eRxStore.php
interface/eRxXMLBuilder.php
interface/forms/CAMOS/help.html
interface/forms/CAMOS/new.php
interface/forms/CAMOS/notegen.php
interface/forms/LBF/new.php
interface/forms/LBF/printable.php
interface/forms/eye_mag/SpectacleRx.php
interface/forms/eye_mag/a_issue.php
interface/forms/eye_mag/css/style.css
interface/forms/eye_mag/js/eye_base.php
interface/forms/eye_mag/js/jquery-1-10-2/jquery.min.js
interface/forms/eye_mag/js/jquery-panelslider/jquery.panelslider.min.js
interface/forms/eye_mag/js/jquery-ui-1-11-4/jquery-ui.min.js
interface/forms/eye_mag/js/shortcut.js-2-01-B/shortcut.js
interface/forms/eye_mag/php/eye_mag_functions.php
interface/forms/eye_mag/php/taskman_functions.php
interface/forms/eye_mag/report.php
interface/forms/eye_mag/save.php
interface/forms/eye_mag/view.php
interface/forms/fee_sheet/code_choice/css/code_choices.css
interface/forms/fee_sheet/code_choice/templates/code_choices.php
interface/forms/fee_sheet/new.php
interface/forms/gad7/gad7.inc.php
interface/forms/gad7/gad7_javasrc.js
interface/forms/gad7/info.txt
interface/forms/gad7/new.php
interface/forms/gad7/report.php
interface/forms/gad7/save.php
interface/forms/gad7/table.sql
interface/forms/gad7/view.php
interface/forms/misc_billing_options/new.php
interface/forms/newpatient/common.php
interface/forms/newpatient/new.php
interface/forms/vitals/templates/vitals/general_new.html
interface/globals.php
interface/login/login.php
interface/main/about_page.php
interface/main/authorizations/authorizations.php
interface/main/backup.php
interface/main/calendar/add_edit_event.php
interface/main/calendar/find_appt_popup.php
interface/main/calendar/find_patient_popup.php
interface/main/calendar/modules/PostCalendar/pnadmin.php
interface/main/calendar/modules/PostCalendar/pnincludes/Date/Calc.php
interface/main/calendar/modules/PostCalendar/pnuserapi.php
interface/main/dated_reminders/dated_reminders.php
interface/main/finder/dynamic_finder.php
interface/main/finder/dynamic_finder_ajax.php
interface/main/finder/patient_select.php
interface/main/messages/css/reminder_style.css
interface/main/messages/js/reminder_appts.js
interface/main/messages/messages.php
interface/main/messages/save.php
interface/main/onotes/office_comments.php
interface/main/onotes/office_comments_full.php
interface/main/tabs/js/tabs_view_model.js
interface/main/tabs/js/user_data_view_model.js
interface/main/tabs/main.php
interface/main/tabs/menu/menus/standard.json
interface/main/tabs/templates/tabs_template.php
interface/modules/zend_modules/module/Installer/view/installer/installer/index.phtml
interface/new/new_comprehensive.php
interface/new/new_comprehensive_save.php
interface/orders/orders_results.php
interface/orders/patient_match_dialog.php
interface/patient_file/download_template.php
interface/patient_file/encounter/diagnosis.php
interface/patient_file/encounter/forms.php
interface/patient_file/front_payment.php
interface/patient_file/front_payment_cc.php
interface/patient_file/history/edit_billnote.php
interface/patient_file/history/encounters.php
interface/patient_file/merge_patients.php
interface/patient_file/pos_checkout.php
interface/patient_file/report/custom_report.php
interface/patient_file/report/patient_report.php
interface/patient_file/summary/dashboard_header.php
interface/patient_file/summary/demographics.php
interface/patient_file/summary/demographics_full.php
interface/patient_file/summary/demographics_save.php
interface/patient_file/summary/pnotes_fragment.php
interface/patient_file/summary/stats.php
interface/patient_tracker/patient_tracker.php
interface/practice/ins_list.php
interface/reports/audit_log_tamper_report.php
interface/reports/clinical_reports.php
interface/reports/collections_report.php
interface/reports/criteria.tab.php
interface/reports/pat_ledger.php
interface/reports/patient_list_creation.php
interface/reports/payment_processing_report.php
interface/super/edit_globals.php
interface/super/edit_layout.php
interface/super/edit_list.php
interface/super/rules/controllers/browse/view/plans_config.php
interface/super/rules/library/RuleManager.php
interface/super/rules/www/js/cdr-multiselect/ui.multiselect.js
interface/themes/colors/utilities/tabs-full.scss
interface/themes/core/patient/demographics.scss
interface/themes/core/tabs.scss
interface/themes/oe-styles/style_manila.scss
interface/themes/patientportal-style.scss
interface/themes/rtl_style_pdf.css
interface/themes/style.scss
interface/themes/tabs_style_compact.scss
interface/themes/tabs_style_full.scss
interface/usergroup/addrbook_list.php
interface/usergroup/facilities.php
interface/usergroup/mfa_registrations.php
interface/usergroup/mfa_totp.php
interface/usergroup/mfa_u2f.php
interface/usergroup/usergroup_admin.php
interface/weno/facilities.php
interface/weno/indexrx.php
interface/weno/rxlogmanager.php
interface/weno/weno.js
interface/weno/wenoconnected.php
library/ESign/ESign.php
library/ESign/Form/Signable.php
library/FeeSheet.class.php
library/MedEx/API.php
library/MedEx/MedEx.php
library/MedEx/MedEx_background.php
library/ajax/dated_reminders_counter.php
library/ajax/payment_ajax.php
library/ajax/sql_server_status.php
library/ajax/template_context_search.php
library/api.inc
library/auth.inc
library/classes/Address.class.php
library/classes/Installer.class.php
library/classes/InsuranceCompany.class.php
library/classes/Note.class.php
library/classes/Pharmacy.class.php
library/classes/Prescription.class.php
library/classes/TreeMenu.php
library/custom_template/ajax_code.php
library/custom_template/custom_template.php
library/custom_template/personalize.php
library/dialog.js
library/edihistory/edih_271_html.php
library/edihistory/edih_277_html.php
library/edihistory/edih_835_html.php
library/edihistory/edih_csv_inc.php
library/edihistory/edih_io.php
library/edihistory/edih_segments.php
library/globals.inc.php
library/js/CustomTemplateApi.js
library/js/CustomTemplateLoader.js
library/js/ajax_functions_writer.js
library/js/common.js
library/js/report_helper.js
library/js/utility.js
library/js/xl/jquery-datetimepicker-2-5-4-alternate.js.php
library/js/xl/jquery-datetimepicker-2-5-4.js.php
library/options.inc.php
library/options.js.php
library/patient.inc
library/payment.inc.php
library/payment_jav.inc.php
library/report.inc
library/restoreSession.php
library/sql_upgrade_fx.php
library/uuid.php
library/weno_log_sync.php
portal/account/account.lib.php
portal/account/account.php
portal/account/index_reset.php
portal/account/register.php
portal/account/verify.php
portal/add_edit_event_user.php
portal/find_appt_popup_user.php
portal/get_patient_documents.php
portal/get_profile.php
portal/home.php
portal/import_template.php
portal/import_template_ui.php
portal/index.php
portal/lib/appsql.class.php
portal/lib/doc_lib.php
portal/lib/download_template.php
portal/lib/patient_groups.php
portal/lib/paylib.php
portal/lib/persist.php
portal/lib/template_menu.php
portal/messaging/handle_note.php
portal/messaging/messages.php
portal/messaging/secure_chat.php
portal/patient/_app_config.php
portal/patient/_global_config.php
portal/patient/_machine_config.php
portal/patient/fwk/libs/verysimple/IO/Includer.php
portal/patient/fwk/libs/verysimple/Phreeze/Dispatcher.php
portal/patient/fwk/libs/verysimple/Phreeze/GenericRouter.php
portal/patient/fwk/libs/verysimple/Phreeze/PortalController.php
portal/patient/fwk/libs/verysimple/Util/ExceptionThrower.php
portal/patient/index.php
portal/patient/libs/Controller/AppBasePortalController.php
portal/patient/libs/Controller/DefaultController.php
portal/patient/libs/Controller/OnsiteActivityViewController.php
portal/patient/libs/Controller/OnsiteDocumentController.php
portal/patient/libs/Controller/OnsitePortalActivityController.php
portal/patient/libs/Controller/PatientController.php
portal/patient/libs/Controller/PortalPatientController.php
portal/patient/libs/Controller/ProviderController.php
portal/patient/libs/Model/DAO/OnsiteActivityViewCriteriaDAO.php
portal/patient/libs/Model/DAO/OnsiteDocumentCriteriaDAO.php
portal/patient/libs/Model/DAO/OnsiteDocumentMap.php
portal/patient/libs/Model/DAO/OnsitePortalActivityCriteriaDAO.php
portal/patient/libs/Model/DAO/OnsitePortalActivityMap.php
portal/patient/libs/Model/DAO/PatientCriteriaDAO.php
portal/patient/libs/Model/DAO/PatientDAO.php
portal/patient/libs/Model/DAO/PatientMap.php
portal/patient/libs/Model/DAO/UserCriteriaDAO.php
portal/patient/libs/Model/DAO/UserMap.php
portal/patient/libs/Model/OnsiteActivityView.php
portal/patient/libs/Model/OnsiteActivityViewCriteria.php
portal/patient/libs/Model/OnsiteDocument.php
portal/patient/libs/Model/OnsiteDocumentCriteria.php
portal/patient/libs/Model/OnsitePortalActivity.php
portal/patient/libs/Model/OnsitePortalActivityCriteria.php
portal/patient/libs/Model/PatientCriteria.php
portal/patient/libs/Model/User.php
portal/patient/libs/Model/UserCriteria.php
portal/patient/libs/Reporter/OnsiteActivityViewReporter-query.php
portal/patient/libs/Reporter/OnsiteActivityViewReporter.php
portal/patient/libs/Reporter/OnsiteDocumentReporter.php
portal/patient/libs/Reporter/OnsitePortalActivityReporter.php
portal/patient/libs/Reporter/PatientReporter.php
portal/patient/scripts/app.js
portal/patient/scripts/app/onsitedocuments.js
portal/patient/scripts/app/onsiteportalactivities.js
portal/patient/scripts/app/patientdata.js
portal/patient/scripts/model.js
portal/patient/templates/OnsiteDocumentListView.tpl.php
portal/patient/templates/PatientListView.tpl.php
portal/patient/templates/ProviderHome.tpl.php
portal/patient/templates/_Footer.tpl.php
portal/patient/templates/_modalFormHeader.tpl.php
portal/portal_payment.php
portal/public/assets/sortablejs/LICENSE
portal/public/assets/sortablejs/README.md
portal/public/assets/sortablejs/Sortable.js
portal/public/assets/sortablejs/Sortable.min.js
portal/public/assets/sortablejs/modular/sortable.complete.esm.js
portal/public/assets/sortablejs/modular/sortable.core.esm.js
portal/public/assets/sortablejs/modular/sortable.esm.js
portal/public/assets/sortablejs/package.json
portal/sign/assets/signer_api.js
portal/sign/assets/signer_modal.php
portal/sign/css/signer_modal.css
portal/sign/lib/save-signature.php
portal/sign/lib/show-signature.php
portal/verify_session.php
public/themes/ajax_calendar_ie.css
public/themes/compact_style_ash_blue.css
public/themes/compact_style_burgundy.css
public/themes/compact_style_cadmium_yellow.css
public/themes/compact_style_chocolate.css
public/themes/compact_style_cobalt_blue.css
public/themes/compact_style_coral.css
public/themes/compact_style_dark.css
public/themes/compact_style_deep_purple.css
public/themes/compact_style_dune.css
public/themes/compact_style_emerald.css
public/themes/compact_style_forest_green.css
public/themes/compact_style_light.css
public/themes/compact_style_manila.css
public/themes/compact_style_mauve.css
public/themes/compact_style_mustard_green.css
public/themes/compact_style_olive.css
public/themes/compact_style_pink.css
public/themes/compact_style_powder_blue.css
public/themes/compact_style_red.css
public/themes/compact_style_sienna.css
public/themes/compact_style_solar.css
public/themes/compact_style_tangerine.css
public/themes/jquery.autocomplete.css
public/themes/misc/bootstrap_navbar.css
public/themes/misc/edi_history_v2.css
public/themes/misc/encounters.css
public/themes/misc/labdata.css
public/themes/misc/rtl_bootstrap_navbar.css
public/themes/misc/rtl_edi_history_v2.css
public/themes/misc/rtl_encounters.css
public/themes/misc/rtl_labdata.css
public/themes/misc/rtl_rules.css
public/themes/misc/rules.css
public/themes/patientportal-base.css
public/themes/patientportal-register.css
public/themes/patientportal-style.css
public/themes/rtl_compact_style_ash_blue.css
public/themes/rtl_compact_style_burgundy.css
public/themes/rtl_compact_style_cadmium_yellow.css
public/themes/rtl_compact_style_chocolate.css
public/themes/rtl_compact_style_cobalt_blue.css
public/themes/rtl_compact_style_coral.css
public/themes/rtl_compact_style_dark.css
public/themes/rtl_compact_style_deep_purple.css
public/themes/rtl_compact_style_dune.css
public/themes/rtl_compact_style_emerald.css
public/themes/rtl_compact_style_forest_green.css
public/themes/rtl_compact_style_light.css
public/themes/rtl_compact_style_manila.css
public/themes/rtl_compact_style_mauve.css
public/themes/rtl_compact_style_mustard_green.css
public/themes/rtl_compact_style_olive.css
public/themes/rtl_compact_style_pink.css
public/themes/rtl_compact_style_powder_blue.css
public/themes/rtl_compact_style_red.css
public/themes/rtl_compact_style_sienna.css
public/themes/rtl_compact_style_solar.css
public/themes/rtl_compact_style_tangerine.css
public/themes/rtl_patientportal-base.css
public/themes/rtl_patientportal-register.css
public/themes/rtl_patientportal-style.css
public/themes/rtl_style_ash_blue.css
public/themes/rtl_style_burgundy.css
public/themes/rtl_style_cadmium_yellow.css
public/themes/rtl_style_chocolate.css
public/themes/rtl_style_cobalt_blue.css
public/themes/rtl_style_coral.css
public/themes/rtl_style_dark.css
public/themes/rtl_style_deep_purple.css
public/themes/rtl_style_dune.css
public/themes/rtl_style_emerald.css
public/themes/rtl_style_forest_green.css
public/themes/rtl_style_light.css
public/themes/rtl_style_manila.css
public/themes/rtl_style_mauve.css
public/themes/rtl_style_mustard_green.css
public/themes/rtl_style_olive.css
public/themes/rtl_style_pdf.css
public/themes/rtl_style_pink.css
public/themes/rtl_style_powder_blue.css
public/themes/rtl_style_red.css
public/themes/rtl_style_sienna.css
public/themes/rtl_style_solar.css
public/themes/rtl_style_tangerine.css
public/themes/rtl_tabs_style_compact.css
public/themes/rtl_tabs_style_full.css
public/themes/style_ash_blue.css
public/themes/style_burgundy.css
public/themes/style_cadmium_yellow.css
public/themes/style_chocolate.css
public/themes/style_cobalt_blue.css
public/themes/style_coral.css
public/themes/style_dark.css
public/themes/style_deep_purple.css
public/themes/style_dune.css
public/themes/style_emerald.css
public/themes/style_forest_green.css
public/themes/style_light.css
public/themes/style_manila.css
public/themes/style_mauve.css
public/themes/style_mustard_green.css
public/themes/style_olive.css
public/themes/style_pink.css
public/themes/style_powder_blue.css
public/themes/style_red.css
public/themes/style_sienna.css
public/themes/style_solar.css
public/themes/style_tangerine.css
public/themes/tabs_style_compact.css
public/themes/tabs_style_full.css
setup.php
sites/default/documents/custom_menus/Custom.json
sites/default/documents/onsite_portal_documents/templates/Help.tpl
sphere/initial_response.php
sphere/process_response.php
sphere/process_revert_response.php
sphere/token.php
sql/5_0_2-to-6_0_0_upgrade.sql
sql/cvx_codes.sql
sql/database.sql
sql/patch.sql
sql_patch.php
sql_upgrade.php
src/Billing/BillingReport.php
src/Billing/BillingUtilities.php
src/Billing/Claim.php
src/Billing/InvoiceSummary.php
src/Billing/X125010837P.php
src/Common/Auth/AuthGlobal.php
src/Common/Auth/AuthUtils.php
src/Common/Logging/EventAuditLogger.php
src/Common/Session/SessionTracker.php
src/Common/Session/SessionUtil.php
src/Common/Twig/TwigContainer.php
src/Common/Twig/TwigExtension.php
src/Common/Uuid/UniqueInstallationUuid.php
src/Common/Uuid/UuidRegistry.php
src/Core/Header.php
src/Core/Kernel.php
src/Core/ModulesApplication.php
src/Core/TwigExtension.php
src/Events/Appointments/AppointmentRenderEvent.php
src/Events/Appointments/AppointmentSetEvent.php
src/Events/Appointments/CalendarUserGetEventsFilter.php
src/Events/Core/ScriptFilterEvent.php
src/Events/Core/StyleFilterEvent.php
src/Events/Core/TemplatePageEvent.php
src/Events/Core/TwigEnvironmentEvent.php
src/Events/Main/Tabs/RenderEvent.php
src/Events/Messaging/SendSmsEvent.php
src/Events/PatientPortal/AppointmentFilterEvent.php
src/Events/PatientPortal/RenderEvent.php
src/Events/User/UserCreatedEvent.php
src/Events/User/UserUpdatedEvent.php
src/Menu/PatientMenuEvent.php
src/Menu/PatientMenuRole.php
src/OeUI/OemrUI.php
src/PatientPortal/Chat/ChatController.php
src/PatientPortal/Chat/ChatDispatcher.php
src/PatientPortal/Chat/ChatModel.php
src/PaymentProcessing/PaymentProcessing.php
src/PaymentProcessing/Sphere/Sphere.php
src/PaymentProcessing/Sphere/SpherePayment.php
src/PaymentProcessing/Sphere/SphereRevert.php
src/Rx/Weno/Container.php
src/Rx/Weno/FacilityProperties.php
src/Rx/Weno/LogDataInsert.php
src/Rx/Weno/LogImportBuild.php
src/Rx/Weno/LogProperties.php
src/Rx/Weno/TransmitProperties.php
src/Rx/Weno/wenoPharmaciesImport.php
src/Services/AppointmentService.php
src/Services/DocumentTemplates/DocumentTemplateService.php
src/Services/PrescriptionService.php
src/Services/VersionService.php
templates/documents/general_list.html
templates/documents/general_view.html
templates/insurance_companies/general_list.html
templates/pharmacies/general_list.html
templates/portal/appointment-item.html.twig
templates/portal/base.html.twig
templates/portal/header.html.twig
templates/portal/home.html.twig
templates/practice_settings/general_list.html
templates/prescription/general_fragment.html
templates/prescription/general_list.html
tests/Tests/E2e/Pages/MainPage.php
tests/eventdispatcher/oe-modify-patient-menu-example/README.md
tests/eventdispatcher/oe-modify-patient-menu-example/composer.json
tests/eventdispatcher/oe-modify-patient-menu-example/custom_patient_menu.json
tests/eventdispatcher/oe-modify-patient-menu-example/openemr.bootstrap.php
tests/old_unit_dir/BaseHarness.class.php
version.php
```

# 5.0.2 Patch (11/4/20)

### Download link

[5-0-2-Patch-5.zip](https://www.open-emr.org/patch/5-0-2-Patch-5.zip "https://www.open-emr.org/patch/5-0-2-Patch-5.zip")

### Description

This is the 5th patch and also includes changes from prior patches. **Please read through the [list of modified files](/wiki/index.php/OpenEMR_Patches#List_of_files_.285.0.2.29 "OpenEMR Patches") to ensure you haven't customized any of these, since this will copy over this.**

### Installation instructions

#### Windows

1. Extract the zipped file into the openemr web directory, and say yes to copying over files
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory
#### Linux

1. Move the patch file to the openemr web directory, then type 'unzip 5-0-2-Patch-5.zip', and confirm ok to copy over files.
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Security fix - reported by Dennis Brinkrolf (RIPS Technologies) and fixed by Brady Miller\*\*
* Patient portal improvements - by Jerry Padgett
* Dicom viewer improvements - by Jerry Padgett
* Performance improvements - by Jerry Padgett
* PHP 7.4 fixes - fixed by Jerry Padgett
* Document module fix - reported by Pete Boyd and fixed by Tyler Wrenn
* Calendar fixes - fixed by Jerry Padgett
* Encounter fixes - fixed by Jerry Padgett
* Billing fixes - fixed by Jerry Padgett and Stephen Waite
* API fix - fixed by by Stephen Waite
* ICD10 and RxNorm import fixes - fixed by by Stephen Waite
* SameSite browser warning fixes - fixed by Brady Miller
* Patient Portal fixes - reported by and fixed by Jerry Padgett
* MariaDB 10.4 compatibility fix - reported by travis and fixed by Brady Miller
* Encounter improvements - by Jerry Padgett
* Calendar improvement - by Stephen Waite
* Billing fix - reported by and fixed by Stephen Waite
* Pharmacy import fix - reported by and fixed by Stephen Waite
* Critical security fix - reported by Dennis Brinkrolf (RIPS Technologies), fixed by Jerry Padgett and Brady Miller
* Security fixes - reported by Dennis Brinkrolf (RIPS Technologies), Daniel Pflieger, and Visolve, fixed by Jerry Padgett and Brady Miller
* COVID19 ICD10 codes added - by Stephen Waite
* Patient portal security improvements, updates and fixes - by Jerry Padgett
* API security improvements and updates - by Brady Miller and Stephen Waite
* Payment improvements - by Jerry Padgett
* MySQL 8 fix, part 1 - reported by Sanjeev Kumar, fixed by Brady Miller
* MySQL 8 fix, part 2 - reported by Tman and fixed by Amit Meena
* Calendar styling improvements - by Jerry Padgett
* Patient Portal styling improvements - by Jerry Padgett and Tyler Wrenn
* Referral form improvements - by Stephen Waite and Visolve
* Added diagnosis history finder for procedure order form - by Jerry Padgett
* Newcrop Rx improvements - by Ken Chapple
* Rx improvements - by Sherwin Gaddis
* MedEx fixes - by ophthal
* PDF fix - reported by Tyler Wrenn, fixed by Jerry Padgett
* Merge patient fix - reported by APerez, fixed by Brady Miller
* Date of birth autocomplete fix - reported by Philip Herrick, fixed by Stephen Waite
* ICD10 import fix - reported and fixed by Stephen Waite
* Fees checkout fix - reported by Evgenios, fixed by Stephen Waite
* Calendar fix - reported by and fixed by Stephen Waite
* Billing fix - reported by and fixed by Stephen Waite
* Billing statement fixes - reported by Stephen Waite, fixed by Jerry Padgett
* Billing fix in billing/service facility - reported by and fixed by Daniel Pflieger
* Messaging fix - reported by syedyawar and fixed by Visolve and Stephen Waite
* Modules fix - reported by and fixed by Jerry Padgett
* Zip code fix - reported by and fixed by Stephen Waite
* Transaction date fix - reported by and fixed by Sherwin Gaddis
* Fix functional and cognitive status form - reported by Pete Boyd and fixed by Stephen Waite
* Fix pharmacy import - reported by and fixed by Robert Hausam\*\*
* Security fixes - reports by Will Porter ([from Lodestone Security](https://lodestonesecurity.com/)), Mera, Mirna Bassaly, and Brady Miller; fixes by Will Porter ([from \*Lodestone Security](https://lodestonesecurity.com/)) and Brady Miller
* Added custom modules support - by Jerry Padgett
* MariaDB critical fix for install/upgrade - reported by Robert Down, fixed by Brady Miller
* Cookie and session fixes - reported by Jerry Padgett, fixed by Brady Miller
* Clear billing log feature added - by Sherwin Gaddis
* Billing manager updates - by Jerry Padgett
* Patient portal fixes - reported and fixed by Jerry Padgett
* CCDA fix - reported and fixed by Jerry Padgett
* Eye form fixes - reported and fixed by Ray Magauran
* User editing fix - reported and fixed by Sherwin Gaddis
* Patient history save fix - reported by CodderEMR, fixed by Stephen Waite
* Patient history fix - reported by Stephen Waite, fixed by Jerry Padgett
* Batch payment fixes - reported by Stephen Waite, fixed by zbig01
* 837 claim fix - reported by Ray Magauran, fixed by Stephen Waite
* X12 fix - reported and fixed by Derrik Milligan
* Another X12 fix - reported by Ray Magauran, fixed by Stephen Waite
* Fee sheet fixes - reported by Stephen Waite and Ray Magauran, fixed by Jerry Padgett
* EOB invoice last bill date - reported and fixed by Stephen Waite
* API (patient service) fix - reported and fixed by Stephen Waite
* Code styling fix - reported and fixed by Brady Miller
* MedEx fix - reported and fixed by Jerry Padgett
* New patient add fix - reported by Jeremiah Ocasio, fixed by Stephen Waite
* Calendar scrolling fix - reported and fixed by Aaron Chantrill
* eRX fix - reported by Harley Tuck, fixed by Ken Chapple
* Save and dispense rx fix - reported and fixed by Dimitry Remish

### List of files (5.0.2)

```
acknowledge_license_cert.html
apis/dispatch.php
ci/ci.sh
composer.json
contrib/util/installScripts/InstallerAuto.php
controllers/C_Document.class.php
controllers/C_DocumentCategory.class.php
gacl/gacl_api.class.php
interface/batchcom/batchcom.inc.php
interface/billing/billing_process.php
interface/billing/billing_report.php
interface/billing/clear_log.php
interface/billing/edit_payment.php
interface/billing/new_payment.php
interface/billing/payment_master.inc.php
interface/billing/payment_pat_sel.inc.php
interface/billing/search_payments.php
interface/billing/sl_eob_invoice.php
interface/billing/sl_eob_search.php
interface/eRxStore.php
interface/eRxXMLBuilder.php
interface/forms/LBF/new.php
interface/forms/eye_mag/SpectacleRx.php
interface/forms/eye_mag/a_issue.php
interface/forms/eye_mag/css/style.css
interface/forms/eye_mag/js/eye_base.php
interface/forms/eye_mag/php/eye_mag_functions.php
interface/forms/eye_mag/save.php
interface/forms/eye_mag/view.php
interface/forms/fee_sheet/new.php
interface/forms/fee_sheet/review/fee_sheet_justify_view_model.js
interface/forms/fee_sheet/review/initialize_review.js
interface/forms/fee_sheet/review/initialize_review.php
interface/forms/fee_sheet/review/js/fee_sheet_core.js
interface/forms/functional_cognitive_status/save.php
interface/forms/newpatient/common.php
interface/forms/newpatient/save.php
interface/forms/procedure_order/new.php
interface/globals.php
interface/login/login.php
interface/main/backup.php
interface/main/calendar/add_edit_event.php
interface/main/calendar/find_patient_popup.php
interface/main/calendar/modules/PostCalendar/pntemplates/default/user/ajax_search.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/header.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week/ajax_template.html
interface/main/calendar/modules/PostCalendar/pnuserapi.php
interface/main/dated_reminders/dated_reminders.php
interface/main/main_info.php
interface/main/messages/css/reminder_style.css
interface/main/messages/js/reminder_appts.js
interface/main/messages/messages.php
interface/main/messages/save.php
interface/main/tabs/js/include_opener.js
interface/main/tabs/main.php
interface/main/tabs/menu/menus/standard.json
interface/main/tabs/templates/patient_data_template.php
interface/modules/zend_modules/config/application.config.php
interface/modules/zend_modules/module/Carecoordination/config/module.config.php
interface/modules/zend_modules/module/Installer/src/Installer/Controller/InstallerController.php
interface/modules/zend_modules/module/Installer/src/Installer/Model/InstModuleTable.php
interface/modules/zend_modules/module/Installer/view/installer/installer/configure.phtml
interface/modules/zend_modules/module/Installer/view/installer/installer/index.phtml
interface/modules/zend_modules/public/js/installer/action.js
interface/new/new_comprehensive.php
interface/orders/pending_followup.php
interface/orders/pending_orders.php
interface/orders/procedure_provider_edit.php
interface/orders/receive_hl7_results.inc.php
interface/orders/single_order_results.inc.php
interface/patient_file/download_template.php
interface/patient_file/encounter/find_code_history.php
interface/patient_file/encounter/forms.php
interface/patient_file/front_payment.php
interface/patient_file/front_payment_cc.php
interface/patient_file/history/encounters.php
interface/patient_file/history/history.php
interface/patient_file/history/history_save.php
interface/patient_file/merge_patients.php
interface/patient_file/pos_checkout.php
interface/patient_file/report/custom_report.php
interface/patient_file/report/patient_report.php
interface/patient_file/summary/clinical_reminders_fragment.php
interface/patient_file/summary/create_portallogin.php
interface/patient_file/summary/demographics.php
interface/patient_file/summary/disc_fragment.php
interface/patient_file/summary/labdata_fragment.php
interface/patient_file/summary/lbf_fragment.php
interface/patient_file/summary/patient_reminders_fragment.php
interface/patient_file/summary/pnotes_fragment.php
interface/patient_file/summary/pnotes_full.php
interface/patient_file/summary/stats.php
interface/patient_file/summary/vitals_fragment.php
interface/patient_file/transaction/print_referral.php
interface/patient_file/transaction/record_request.php
interface/patient_file/transaction/transactions.php
interface/patient_tracker/patient_tracker.php
interface/reports/collections_report.php
interface/reports/insurance_allocation_report.php
interface/reports/ippf_cyp_report.php
interface/reports/pat_ledger.php
interface/reports/patient_list.php
interface/reports/receipts_by_method_report.php
interface/reports/sales_by_item.php
interface/reports/svc_code_financial_report.php
interface/super/edit_layout.php
interface/super/edit_list.php
interface/themes/ajax_calendar.css
interface/themes/tabs_style_compact.css
interface/themes/tabs_style_full.css
interface/usergroup/user_admin.php
interface/usergroup/user_info.php
interface/usergroup/usergroup_admin.php
interface/usergroup/usergroup_admin_add.php
interface/weno/admin.php
interface/weno/import_pharmacies.php
interface/weno/pharmacyHelper.php
library/MedEx/API.php
library/MedEx/MedEx.php
library/MedEx/MedEx_background.php
library/ajax/dated_reminders_counter.php
library/ajax/facility_ajax_code.php
library/ajax/upload.php
library/amc.php
library/authentication/common_operations.php
library/authentication/login_operations.php
library/authentication/password_hashing.php
library/billrep.inc
library/classes/Installer.class.php
library/classes/TreeMenu.php
library/clinical_rules.php
library/custom_template/add_template.php
library/custom_template/ajax_code.php
library/dated_reminder_functions.php
library/dialog.js
library/dicom_frame.php
library/edihistory/edih_835_html.php
library/encounter_events.inc.php
library/formdata.inc.php
library/globals.inc.php
library/htmlspecialchars.inc.php
library/invoice_summary.inc.php
library/js/dwv/assets/dwv/decoders/dwv/decode-rle.js
library/js/dwv/assets/dwv/decoders/dwv/rle.js
library/js/dwv/assets/dwv/decoders/pdfjs/arithmetic_decoder.js
library/js/dwv/assets/dwv/decoders/pdfjs/decode-jpeg2000.js
library/js/dwv/assets/dwv/decoders/pdfjs/decode-jpegbaseline.js
library/js/dwv/assets/dwv/decoders/pdfjs/jpg.js
library/js/dwv/assets/dwv/decoders/pdfjs/jpx.js
library/js/dwv/assets/dwv/decoders/pdfjs/readme.md
library/js/dwv/assets/dwv/decoders/pdfjs/util.js
library/js/dwv/assets/dwv/decoders/rii-mango/decode-jpegloss.js
library/js/dwv/assets/dwv/decoders/rii-mango/lossless-min.js
library/js/dwv/assets/dwv/decoders/rii-mango/lossless.js
library/js/dwv/assets/dwv/decoders/rii-mango/readme.md
library/js/dwv/assets/dwv/dist/dwv.js
library/js/dwv/assets/dwv/dist/dwv.min.js
library/js/dwv/assets/dwv/locales/de/overlays.json
library/js/dwv/assets/dwv/locales/de/translation.json
library/js/dwv/assets/dwv/locales/en/overlays.json
library/js/dwv/assets/dwv/locales/en/translation.json
library/js/dwv/assets/dwv/locales/es/overlays.json
library/js/dwv/assets/dwv/locales/es/translation.json
library/js/dwv/assets/dwv/locales/fr/overlays.json
library/js/dwv/assets/dwv/locales/fr/translation.json
library/js/dwv/assets/dwv/locales/it/overlays.json
library/js/dwv/assets/dwv/locales/it/translation.json
library/js/dwv/assets/dwv/locales/jp/overlays.json
library/js/dwv/assets/dwv/locales/jp/translation.json
library/js/dwv/assets/dwv/locales/ro/overlays.json
library/js/dwv/assets/dwv/locales/ro/translation.json
library/js/dwv/assets/dwv/locales/ru/overlays.json
library/js/dwv/assets/dwv/locales/ru/translation.json
library/js/dwv/assets/dwv/locales/zh/overlays.json
library/js/dwv/assets/dwv/locales/zh/translation.json
library/js/dwv/assets/jszip/dist/jszip.js
library/js/dwv/assets/jszip/dist/jszip.min.js
library/js/dwv/dicom_gui.js
library/js/dwv/dicom_launcher.js
library/js/dwv/gui/resources/help/click.png
library/js/dwv/gui/resources/help/double_click.png
library/js/dwv/gui/resources/help/mouse_drag.png
library/js/dwv/gui/resources/help/mouse_wheel.png
library/options.inc.php
library/options.js.php
library/patient.inc
library/payment.inc.php
library/payment_jav.inc.php
library/pid.inc
library/sanitize.inc.php
library/smarty/plugins/function.dispatchPatientDocumentEvent.php
library/standard_tables_capture.inc
library/translation.inc.php
portal/_header.php
portal/account/account.lib.php
portal/account/account.php
portal/account/index_reset.php
portal/account/register.php
portal/add_edit_event_user.php
portal/assets/css/base.css
portal/assets/css/register.css
portal/assets/css/style.css
portal/get_patient_info.php
portal/home.php
portal/import_template_ui.php
portal/index.php
portal/lib/doc_lib.php
portal/lib/download_template.php
portal/messaging/messages.php
portal/patient/_app_config.php
portal/patient/_machine_config.php
portal/patient/fwk/libs/verysimple/Phreeze/GenericRouter.php
portal/patient/fwk/libs/verysimple/Phreeze/Phreezer.php
portal/patient/index.php
portal/patient/libs/Controller/OnsiteActivityViewController.php
portal/patient/libs/Controller/OnsiteDocumentController.php
portal/patient/libs/Controller/OnsitePortalActivityController.php
portal/patient/libs/Controller/PatientController.php
portal/patient/libs/Controller/PortalPatientController.php
portal/patient/libs/Controller/UserController.php
portal/patient/libs/Model/DAO/UserCriteriaDAO.php
portal/patient/libs/Model/DAO/UserDAO.php
portal/patient/libs/Model/DAO/UserMap.php
portal/patient/libs/Reporter/UserReporter.php
portal/patient/scripts/app.js
portal/patient/scripts/app/onsiteactivityviews.js
portal/patient/scripts/app/onsitedocuments.js
portal/patient/scripts/app/onsiteportalactivities.js
portal/patient/scripts/app/patientdata.js
portal/patient/scripts/model.js
portal/patient/templates/DefaultError404.tpl.php
portal/patient/templates/DefaultErrorFatal.tpl.php
portal/patient/templates/OnsiteDocumentListView.tpl.php
portal/patient/templates/PatientListView.tpl.php
portal/patient/templates/ProviderHome.tpl.php
portal/patient/templates/_Footer.tpl.php
portal/patient/templates/_FormsHeader.tpl.php
portal/report/pat_ledger.php
portal/sign/assets/signer_api.js
portal/sign/assets/signer_modal.php
portal/sign/assets/signer_modal.tpl.php
portal/sign/assets/signit.php
portal/sign/css/signer_modal.css
portal/sign/lib/save-signature.php
portal/sign/lib/show-signature.php
sites/default/referral_template.html
sites/default/statement.inc.php
sql/5_0_1-to-5_0_2_upgrade.sql
sql/database.sql
sql/patch.sql
src/Billing/Claim.php
src/Billing/X12_5010_837P.php
src/Common/Crypto/CryptoGen.php
src/Common/Http/oeHttpRequest.php
src/Common/Session/SessionUtil.php
src/Common/Utils/RandomGenUtils.php
src/Core/ModulesApplication.php
src/Events/PatientDocuments/PatientDocumentEvent.php
src/Events/PatientReport/PatientReportEvent.php
src/Pharmacy/Services/ImportPharmacies.php
src/RestControllers/AuthRestController.php
src/Services/Globals/GlobalSetting.php
src/Services/InsuranceCompanyService.php
src/Services/PatientService.php
templates/documents/general_list.html
templates/documents/general_upload.html
templates/documents/general_view.html
templates/prescription/general_edit.html
version.php
```

# 5.0.1 Patch (1/19/19)

### Download link

[5-0-1-Patch-7.zip](https://www.open-emr.org/patch/5-0-1-Patch-7.zip "https://www.open-emr.org/patch/5-0-1-Patch-7.zip")

### Description

This is the 7th patch. It also contains all changes from prior patches. **Please read through the [list of modified files](/wiki/index.php/OpenEMR_Patches#List_of_files_.285.0.1.29 "OpenEMR Patches") to ensure you haven't customized any of these, since this will copy over this.**

### Installation instructions

#### Windows

1. Extract the zipped file into the openemr web directory, and say yes to copying over files
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory
#### Linux

1. Move the patch file to the openemr web directory, then type 'unzip 5-0-1-Patch-7.zip', and confirm ok to copy over files.
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Delete the sql\_patch.php file from the openemr web directory

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Allow individual portal features ledger, secure chat and appointments disable in globals. - Jerry Padgett\*\*
* Added Portal alerts to companion with Messages alerts on main header - Jerry Padgett\*\*
* Fix encounter incorrectly populating Billing location - Jerry Padgett\*\*
* Add Telemedicine POS - Jerry Padgett\*\*
* Fix POS default logic. POS now reflects service location and not billing location by default - Jerry Padgett\*\*
* Fix not selecting saved POS on encounter view(chance of selecting multiple POS on list init) - Jerry Padgett\*\*
* Encounters Service and Billing locations track when POS, billing and/or service location are selected - Jerry Padgett\*\*
* Update selected facility default POS code when facility is changed in encounter. - Jerry Padgett\*\*
* Invoice statement reflects service and billing locations from encounter. - by Daniel Pflieger and Jerry Padgett\*\*
* Select statement logo file location in Globals - by Daniel Pflieger\*\*
* Change statement insurance reference to indicate type ie. primary secondary etc. - Jerry Padgett\*\*
* LBF Option bug fix where Read Only, Write Once and Billing description modifiers (options) not invoked. - Reported by Sherwin Gaddis fixed by Jerry Padgett\*\*
* QRDA reporting fixes for php 7.1 - fixed by Brady Miller\*\*
* rxnorm fix - reported by Craig Sparks, fixed by Stephen Waite\*\*
* Security fixes - reported by Jasper Yu and Purplemet team, fixed by Brady Miller
* CAMOS form fix - reported by Michael Farina and Richard Burt, fixed by Brady Miller
* Security fixes - reported by Cyku, Project Insecurity, AZ Kuo, SunNn11 and l00ph0le, fixed by Brady Miller
* Backup fix - fixed by Jerry Padgett
* Tab fix - fixed by Amiel Elboim (Matrix)
* privDB fix - reported by Sandra Gutierrez, fixed by Brady Miller
* Billing fixes - reported by luminosity, fixed by Stephen Waite
* Fax fix - reported by Venu Julapalli, fixed by Jerry Padgett
* Main dialogue fixes - fixed by Jerry Padgett
* SBR fixes - fixed by Stephen Waite
* Encounter fix - fixed by mdsupport
* Scheduling date formatting fix - reported by Brian Elcock, fixex by epsdky
* Charges panel fix - reported by Venu Julapalli, fixed by epsdky
* Miscellaneous fixes - fixed by Jerry Padgett
* Security fixes - reported by Project Insecurity - insecurity.sh, fixed by Jerry Padgett and Brady Miller
* Patient portal improvements and fixes - fixed by Jerry Padgett
* Patient image fix - reported by Luis Angel Uriarte, fixed by Brady Miller
* Redis bug fix - fixed by Brady Miller
* Session fixes - reported by htuck and cornutaurus, fixed by Brady Miller
* Backup download fix- reported by Jack Chan, fixed by Jerry Padgett
* Mysql 8 fixes - reported by Nick Igbinosa, fixed by Brady Miller and zbig01
* CCDA fixes - fixed by Jerry Padget
* WENO erx updates and fixes - fixed by Sherwin Gaddis
* Patient portal fix - fixed by Jerry Padgett
* Recurring appointments fix - fixed by epsdky
* Appointments fix - fixed by Jerry Padgett
* Couchdb fix - fixed by Brady Miller
* Acl username fix - fixed by Santiago Semhan
* Fix for prepayment in payment validation - reported by Sherwin Gaddis, fixed by Jerry Padgett
* Fix for encounter history - reported by Roland, fixed by Stephen Waite
* Fix to show text files in document viewer - fixed by Stephen Waite
* Fix in fax module - reported by Venu Julapalli, fixed by Jerry Padgett
* Fix in misc\_billing form - reported by Mouse55, fixed by Stephen Waite
* Fix in MedEx - fixed by Ray Magauran
* Patient summary menu fixes - reported by luisuriarte, fixed by Brady Miller
* Security fixes - reported by Gloomywind, fixed by Brady
* Fix display of text files in patient report - fixed by Stephen Waite

### List of files (5.0.1)

(note the ones prepended with \* have new changes with this patch)

```
ccdaservice/ccda_gateway.php
ccdaservice/package.json
ccdaservice/README.md
ccdaservice/serveccda.js
common/database/Connector.php
contrib/util/docker/README.md
contrib/util/express.php
contrib/util/ubuntu_package_scripts/production/changelog.Debian
contrib/util/ubuntu_package_scripts/production/control-php5
contrib/util/ubuntu_package_scripts/production/control-php7
contrib/util/ubuntu_package_scripts/production/copyright
contrib/util/ubuntu_package_scripts/production/README.Debian
docker-compose.yml
*interface/billing/sl_eob_search.php
interface/de_identification_forms/de_identification_screen2.php
interface/de_identification_forms/find_code_popup.php
interface/de_identification_forms/find_drug_popup.php
interface/de_identification_forms/find_immunization_popup.php
*interface/eRx.php
*interface/eRxXMLBuilder.php
interface/fax/faxq.php
interface/fax/fax_dispatch.php
interface/fax/fax_view.php
interface/forms/CAMOS/ajax_save.php  = <center>5.0.2 Patch (11/4/20)</center> =
<br>
=== Download link ===
<googa>https://www.open-emr.org/patch/5-0-2-Patch-5.zip|5-0-2-Patch-5.zip|/download/file/patch_5_0_2</googa>
<br>
<br>

=== Description ===
This is the 5th patch and also includes changes from prior patches. '''Please read through the [[OpenEMR_Patches#List_of_files_(5.0.2)|list of modified files]] to ensure you haven't customized any of these, since this will copy over this.'''
<br>
<br>

=== Installation instructions ===
==== Windows ====
:1. Extract the zipped file into the openemr web directory, and say yes to copying over files
:2. Open web browser and go to http://your_server_name_or_ip/openemr/sql_patch.php
:::(this script will run automatically and patch the database)
:::(if you are using the [[OpenEMR_Multiple_Sites_Module|Multisite Module]], then skip step 2 and [[OpenEMR_Multiple_Sites_Module#Patches|follow these instructions]])
:3. Delete the sql_patch.php file from the openemr web directory

==== Linux ====
:1. Move the patch file to the openemr web directory, then type 'unzip 5-0-2-Patch-5.zip', and confirm ok to copy over files.
:2. Open web browser and go to http://your_server_name_or_ip/openemr/sql_patch.php
:::(this script will run automatically and patch the database)
:::(if you are using the [[OpenEMR_Multiple_Sites_Module|Multisite Module]], then skip step 2 and [[OpenEMR_Multiple_Sites_Module#Patches|follow these instructions]])
:3. Delete the sql_patch.php file from the openemr web directory
<br>

=== Fixes and New Features ===
(note the ones with ** are new with this patch):
*Security fix - reported by Dennis Brinkrolf (RIPS Technologies) and fixed by Brady Miller**
*Patient portal improvements - by Jerry Padgett
*Dicom viewer improvements  - by Jerry Padgett
*Performance improvements -  by Jerry Padgett
*PHP 7.4 fixes - fixed by Jerry Padgett
*Document module fix - reported by Pete Boyd and fixed by Tyler Wrenn
*Calendar fixes - fixed by Jerry Padgett
*Encounter fixes - fixed by Jerry Padgett
*Billing fixes - fixed by Jerry Padgett and Stephen Waite
*API fix - fixed by by Stephen Waite
*ICD10 and RxNorm import fixes - fixed by by Stephen Waite
*SameSite browser warning fixes - fixed by Brady Miller
*Patient Portal fixes - reported by and fixed by Jerry Padgett
*MariaDB 10.4 compatibility fix - reported by travis and fixed by Brady Miller
*Encounter improvements -  by Jerry Padgett
*Calendar improvement - by Stephen Waite
*Billing fix - reported by and fixed by Stephen Waite
*Pharmacy import fix - reported by and fixed by Stephen Waite
*Critical security fix - reported by Dennis Brinkrolf (RIPS Technologies), fixed by Jerry Padgett and Brady Miller
*Security fixes - reported by Dennis Brinkrolf (RIPS Technologies), Daniel Pflieger, and Visolve, fixed by Jerry Padgett and Brady Miller
*COVID19 ICD10 codes added - by Stephen Waite
*Patient portal security improvements, updates and fixes - by Jerry Padgett
*API security improvements and updates - by Brady Miller and Stephen Waite
*Payment improvements - by Jerry Padgett
*MySQL 8 fix, part 1 - reported by Sanjeev Kumar, fixed by Brady Miller
*MySQL 8 fix, part 2 - reported by Tman and fixed by Amit Meena
*Calendar styling improvements - by Jerry Padgett
*Patient Portal styling improvements - by Jerry Padgett and Tyler Wrenn
*Referral form improvements - by Stephen Waite and Visolve
*Added diagnosis history finder for procedure order form - by Jerry Padgett
*Newcrop Rx improvements - by Ken Chapple
*Rx improvements - by Sherwin Gaddis
*MedEx fixes - by ophthal
*PDF fix - reported by Tyler Wrenn, fixed by Jerry Padgett
*Merge patient fix - reported by APerez, fixed by Brady Miller
*Date of birth autocomplete fix - reported by Philip Herrick, fixed by Stephen Waite
*ICD10 import fix - reported and fixed by Stephen Waite
*Fees checkout fix - reported by Evgenios, fixed by Stephen Waite
*Calendar fix - reported by and fixed by Stephen Waite
*Billing fix - reported by and fixed by Stephen Waite
*Billing statement fixes - reported by Stephen Waite, fixed by Jerry Padgett
*Billing fix in billing/service facility - reported by and fixed by Daniel Pflieger
*Messaging fix - reported by syedyawar and fixed by Visolve and Stephen Waite
*Modules fix - reported by and fixed by Jerry Padgett
*Zip code fix - reported by and fixed by Stephen Waite
*Transaction date fix - reported by and fixed by Sherwin Gaddis
*Fix functional and cognitive status form - reported by Pete Boyd and fixed by Stephen Waite
*Fix pharmacy import - reported by and fixed by Robert Hausam**
*Security fixes - reports by Will Porter ([https://lodestonesecurity.com/ from Lodestone Security]), Mera, Mirna Bassaly, and Brady Miller; fixes by Will Porter ([https://lodestonesecurity.com/ from *Lodestone Security]) and Brady Miller
*Added custom modules support - by Jerry Padgett
*MariaDB critical fix for install/upgrade - reported by Robert Down, fixed by Brady Miller
*Cookie and session fixes - reported by Jerry Padgett, fixed by Brady Miller
*Clear billing log feature added - by Sherwin Gaddis
*Billing manager updates - by Jerry Padgett
*Patient portal fixes - reported and fixed by Jerry Padgett
*CCDA fix - reported and fixed by Jerry Padgett
*Eye form fixes - reported and fixed by Ray Magauran
*User editing fix - reported and fixed by Sherwin Gaddis
*Patient history save fix - reported by CodderEMR, fixed by Stephen Waite
*Patient history fix - reported by Stephen Waite, fixed by Jerry Padgett
*Batch payment fixes - reported by Stephen Waite, fixed by zbig01
*837 claim fix - reported by Ray Magauran, fixed by Stephen Waite
*X12 fix - reported and fixed by Derrik Milligan
*Another X12 fix - reported by Ray Magauran, fixed by Stephen Waite
*Fee sheet fixes - reported by Stephen Waite and Ray Magauran, fixed by Jerry Padgett
*EOB invoice last bill date - reported and fixed by Stephen Waite
*API (patient service) fix - reported and fixed by Stephen Waite
*Code styling fix - reported and fixed by Brady Miller
*MedEx fix - reported and fixed by Jerry Padgett
*New patient add fix - reported by Jeremiah Ocasio, fixed by Stephen Waite
*Calendar scrolling fix - reported and fixed by Aaron Chantrill
*eRX fix - reported by Harley Tuck, fixed by Ken Chapple
*Save and dispense rx  fix - reported and fixed by Dimitry Remish
<br>

=== List of files (5.0.2) ===
<pre>acknowledge_license_cert.html
apis/dispatch.php
ci/ci.sh
composer.json
contrib/util/installScripts/InstallerAuto.php
controllers/C_Document.class.php
controllers/C_DocumentCategory.class.php
gacl/gacl_api.class.php
interface/batchcom/batchcom.inc.php
interface/billing/billing_process.php
interface/billing/billing_report.php
interface/billing/clear_log.php
interface/billing/edit_payment.php
interface/billing/new_payment.php
interface/billing/payment_master.inc.php
interface/billing/payment_pat_sel.inc.php
interface/billing/search_payments.php
interface/billing/sl_eob_invoice.php
interface/billing/sl_eob_search.php
interface/eRxStore.php
interface/eRxXMLBuilder.php
interface/forms/LBF/new.php
interface/forms/eye_mag/SpectacleRx.php
interface/forms/eye_mag/a_issue.php
interface/forms/eye_mag/css/style.css
interface/forms/eye_mag/js/eye_base.php
interface/forms/eye_mag/php/eye_mag_functions.php
interface/forms/eye_mag/save.php
interface/forms/eye_mag/view.php
interface/forms/fee_sheet/new.php
interface/forms/fee_sheet/review/fee_sheet_justify_view_model.js
interface/forms/fee_sheet/review/initialize_review.js
interface/forms/fee_sheet/review/initialize_review.php
interface/forms/fee_sheet/review/js/fee_sheet_core.js
interface/forms/functional_cognitive_status/save.php
interface/forms/newpatient/common.php
interface/forms/newpatient/save.php
interface/forms/procedure_order/new.php
interface/globals.php
interface/login/login.php
interface/main/backup.php
interface/main/calendar/add_edit_event.php
interface/main/calendar/find_patient_popup.php
interface/main/calendar/modules/PostCalendar/pntemplates/default/user/ajax_search.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/header.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week/ajax_template.html
interface/main/calendar/modules/PostCalendar/pnuserapi.php
interface/main/dated_reminders/dated_reminders.php
interface/main/main_info.php
interface/main/messages/css/reminder_style.css
interface/main/messages/js/reminder_appts.js
interface/main/messages/messages.php
interface/main/messages/save.php
interface/main/tabs/js/include_opener.js
interface/main/tabs/main.php
interface/main/tabs/menu/menus/standard.json
interface/main/tabs/templates/patient_data_template.php
interface/modules/zend_modules/config/application.config.php
interface/modules/zend_modules/module/Carecoordination/config/module.config.php
interface/modules/zend_modules/module/Installer/src/Installer/Controller/InstallerController.php
interface/modules/zend_modules/module/Installer/src/Installer/Model/InstModuleTable.php
interface/modules/zend_modules/module/Installer/view/installer/installer/configure.phtml
interface/modules/zend_modules/module/Installer/view/installer/installer/index.phtml
interface/modules/zend_modules/public/js/installer/action.js
interface/new/new_comprehensive.php
interface/orders/pending_followup.php
interface/orders/pending_orders.php
interface/orders/procedure_provider_edit.php
interface/orders/receive_hl7_results.inc.php
interface/orders/single_order_results.inc.php
interface/patient_file/download_template.php
interface/patient_file/encounter/find_code_history.php
interface/patient_file/encounter/forms.php
interface/patient_file/front_payment.php
interface/patient_file/front_payment_cc.php
interface/patient_file/history/encounters.php
interface/patient_file/history/history.php
interface/patient_file/history/history_save.php
interface/patient_file/merge_patients.php
interface/patient_file/pos_checkout.php
interface/patient_file/report/custom_report.php
interface/patient_file/report/patient_report.php
interface/patient_file/summary/clinical_reminders_fragment.php
interface/patient_file/summary/create_portallogin.php
interface/patient_file/summary/demographics.php
interface/patient_file/summary/disc_fragment.php
interface/patient_file/summary/labdata_fragment.php
interface/patient_file/summary/lbf_fragment.php
interface/patient_file/summary/patient_reminders_fragment.php
interface/patient_file/summary/pnotes_fragment.php
interface/patient_file/summary/pnotes_full.php
interface/patient_file/summary/stats.php
interface/patient_file/summary/vitals_fragment.php
interface/patient_file/transaction/print_referral.php
interface/patient_file/transaction/record_request.php
interface/patient_file/transaction/transactions.php
interface/patient_tracker/patient_tracker.php
interface/reports/collections_report.php
interface/reports/insurance_allocation_report.php
interface/reports/ippf_cyp_report.php
interface/reports/pat_ledger.php
interface/reports/patient_list.php
interface/reports/receipts_by_method_report.php
interface/reports/sales_by_item.php
interface/reports/svc_code_financial_report.php
interface/super/edit_layout.php
interface/super/edit_list.php
interface/themes/ajax_calendar.css
interface/themes/tabs_style_compact.css
interface/themes/tabs_style_full.css
interface/usergroup/user_admin.php
interface/usergroup/user_info.php
interface/usergroup/usergroup_admin.php
interface/usergroup/usergroup_admin_add.php
interface/weno/admin.php
interface/weno/import_pharmacies.php
interface/weno/pharmacyHelper.php
library/MedEx/API.php
library/MedEx/MedEx.php
library/MedEx/MedEx_background.php
library/ajax/dated_reminders_counter.php
library/ajax/facility_ajax_code.php
library/ajax/upload.php
library/amc.php
library/authentication/common_operations.php
library/authentication/login_operations.php
library/authentication/password_hashing.php
library/billrep.inc
library/classes/Installer.class.php
library/classes/TreeMenu.php
library/clinical_rules.php
library/custom_template/add_template.php
library/custom_template/ajax_code.php
library/dated_reminder_functions.php
library/dialog.js
library/dicom_frame.php
library/edihistory/edih_835_html.php
library/encounter_events.inc.php
library/formdata.inc.php
library/globals.inc.php
library/htmlspecialchars.inc.php
library/invoice_summary.inc.php
library/js/dwv/assets/dwv/decoders/dwv/decode-rle.js
library/js/dwv/assets/dwv/decoders/dwv/rle.js
library/js/dwv/assets/dwv/decoders/pdfjs/arithmetic_decoder.js
library/js/dwv/assets/dwv/decoders/pdfjs/decode-jpeg2000.js
library/js/dwv/assets/dwv/decoders/pdfjs/decode-jpegbaseline.js
library/js/dwv/assets/dwv/decoders/pdfjs/jpg.js
library/js/dwv/assets/dwv/decoders/pdfjs/jpx.js
library/js/dwv/assets/dwv/decoders/pdfjs/readme.md
library/js/dwv/assets/dwv/decoders/pdfjs/util.js
library/js/dwv/assets/dwv/decoders/rii-mango/decode-jpegloss.js
library/js/dwv/assets/dwv/decoders/rii-mango/lossless-min.js
library/js/dwv/assets/dwv/decoders/rii-mango/lossless.js
library/js/dwv/assets/dwv/decoders/rii-mango/readme.md
library/js/dwv/assets/dwv/dist/dwv.js
library/js/dwv/assets/dwv/dist/dwv.min.js
library/js/dwv/assets/dwv/locales/de/overlays.json
library/js/dwv/assets/dwv/locales/de/translation.json
library/js/dwv/assets/dwv/locales/en/overlays.json
library/js/dwv/assets/dwv/locales/en/translation.json
library/js/dwv/assets/dwv/locales/es/overlays.json
library/js/dwv/assets/dwv/locales/es/translation.json
library/js/dwv/assets/dwv/locales/fr/overlays.json
library/js/dwv/assets/dwv/locales/fr/translation.json
library/js/dwv/assets/dwv/locales/it/overlays.json
library/js/dwv/assets/dwv/locales/it/translation.json
library/js/dwv/assets/dwv/locales/jp/overlays.json
library/js/dwv/assets/dwv/locales/jp/translation.json
library/js/dwv/assets/dwv/locales/ro/overlays.json
library/js/dwv/assets/dwv/locales/ro/translation.json
library/js/dwv/assets/dwv/locales/ru/overlays.json
library/js/dwv/assets/dwv/locales/ru/translation.json
library/js/dwv/assets/dwv/locales/zh/overlays.json
library/js/dwv/assets/dwv/locales/zh/translation.json
library/js/dwv/assets/jszip/dist/jszip.js
library/js/dwv/assets/jszip/dist/jszip.min.js
library/js/dwv/dicom_gui.js
library/js/dwv/dicom_launcher.js
library/js/dwv/gui/resources/help/click.png
library/js/dwv/gui/resources/help/double_click.png
library/js/dwv/gui/resources/help/mouse_drag.png
library/js/dwv/gui/resources/help/mouse_wheel.png
library/options.inc.php
library/options.js.php
library/patient.inc
library/payment.inc.php
library/payment_jav.inc.php
library/pid.inc
library/sanitize.inc.php
library/smarty/plugins/function.dispatchPatientDocumentEvent.php
library/standard_tables_capture.inc
library/translation.inc.php
portal/_header.php
portal/account/account.lib.php
portal/account/account.php
portal/account/index_reset.php
portal/account/register.php
portal/add_edit_event_user.php
portal/assets/css/base.css
portal/assets/css/register.css
portal/assets/css/style.css
portal/get_patient_info.php
portal/home.php
portal/import_template_ui.php
portal/index.php
portal/lib/doc_lib.php
portal/lib/download_template.php
portal/messaging/messages.php
portal/patient/_app_config.php
portal/patient/_machine_config.php
portal/patient/fwk/libs/verysimple/Phreeze/GenericRouter.php
portal/patient/fwk/libs/verysimple/Phreeze/Phreezer.php
portal/patient/index.php
portal/patient/libs/Controller/OnsiteActivityViewController.php
portal/patient/libs/Controller/OnsiteDocumentController.php
portal/patient/libs/Controller/OnsitePortalActivityController.php
portal/patient/libs/Controller/PatientController.php
portal/patient/libs/Controller/PortalPatientController.php
portal/patient/libs/Controller/UserController.php
portal/patient/libs/Model/DAO/UserCriteriaDAO.php
portal/patient/libs/Model/DAO/UserDAO.php
portal/patient/libs/Model/DAO/UserMap.php
portal/patient/libs/Reporter/UserReporter.php
portal/patient/scripts/app.js
portal/patient/scripts/app/onsiteactivityviews.js
portal/patient/scripts/app/onsitedocuments.js
portal/patient/scripts/app/onsiteportalactivities.js
portal/patient/scripts/app/patientdata.js
portal/patient/scripts/model.js
portal/patient/templates/DefaultError404.tpl.php
portal/patient/templates/DefaultErrorFatal.tpl.php
portal/patient/templates/OnsiteDocumentListView.tpl.php
portal/patient/templates/PatientListView.tpl.php
portal/patient/templates/ProviderHome.tpl.php
portal/patient/templates/_Footer.tpl.php
portal/patient/templates/_FormsHeader.tpl.php
portal/report/pat_ledger.php
portal/sign/assets/signer_api.js
portal/sign/assets/signer_modal.php
portal/sign/assets/signer_modal.tpl.php
portal/sign/assets/signit.php
portal/sign/css/signer_modal.css
portal/sign/lib/save-signature.php
portal/sign/lib/show-signature.php
sites/default/referral_template.html
sites/default/statement.inc.php
sql/5_0_1-to-5_0_2_upgrade.sql
sql/database.sql
sql/patch.sql
src/Billing/Claim.php
src/Billing/X12_5010_837P.php
src/Common/Crypto/CryptoGen.php
src/Common/Http/oeHttpRequest.php
src/Common/Session/SessionUtil.php
src/Common/Utils/RandomGenUtils.php
src/Core/ModulesApplication.php
src/Events/PatientDocuments/PatientDocumentEvent.php
src/Events/PatientReport/PatientReportEvent.php
src/Pharmacy/Services/ImportPharmacies.php
src/RestControllers/AuthRestController.php
src/Services/Globals/GlobalSetting.php
src/Services/InsuranceCompanyService.php
src/Services/PatientService.php
templates/documents/general_list.html
templates/documents/general_upload.html
templates/documents/general_view.html
templates/prescription/general_edit.html
version.php
```

interface/forms/CAMOS/content\_parser.php
interface/forms/eye\_mag/php/taskman\_functions.php
interface/forms/eye\_mag/taskman.php
interface/forms/misc\_billing\_options/new.php

* interface/forms/newpatient/common.php

interface/forms/newpatient/report.php
interface/globals.php
interface/login/login.php
interface/main/backup.php
interface/main/calendar/add\_edit\_event.php
interface/main/calendar/includes/pnAPI.php
interface/main/calendar/modules/PostCalendar/pntemplates/default/user/ajax\_search.html
interface/main/calendar/modules/PostCalendar/pnuser.php
interface/main/calendar/modules/PostCalendar/pnuserapi.php
interface/main/daemon\_frame.php
interface/main/main\_screen.php

* interface/main/tabs/js/custom\_bindings.js

interface/main/tabs/js/patient\_data\_view\_model.js

* interface/main/tabs/js/tabs\_view\_model.js
* interface/main/tabs/js/user\_data\_view\_model.js
* interface/main/tabs/main.php
* interface/main/tabs/templates/patient\_data\_template.php

interface/modules/zend\_modules/module/Carecoordination/src/Carecoordination/Controller/EncounterccdadispatchController.php
interface/modules/zend\_modules/module/Carecoordination/src/Carecoordination/Model/EncounterccdadispatchTable.php
interface/patient\_file/encounter/diagnosis\_full.php
interface/patient\_file/encounter/forms.php
interface/patient\_file/encounter/search\_code.php
interface/patient\_file/front\_payment.php
interface/patient\_file/history/encounters.php
interface/patient\_file/letter.php
interface/patient\_file/printed\_fee\_sheet.php
interface/patient\_file/report/custom\_report.php
interface/patient\_file/summary/demographics.php
interface/patient\_file/summary/pnotes\_fragment.php
interface/patient\_tracker/patient\_tracker.php
interface/super/edit\_list.php
interface/super/manage\_document\_templates.php
interface/super/manage\_site\_files.php
interface/super/rules/library/RulesPlanMappingEventHandlers\_ajax.php
interface/usergroup/addrbook\_list.php
interface/usergroup/adminacl.php
interface/usergroup/usergroup\_admin.php
interface/usergroup/usergroup\_admin\_add.php
interface/weno/admin.php
interface/weno/validate.php
library/ajax/addlistitem.php
library/ajax/adminacl\_ajax.php

* library/ajax/dated\_reminders\_counter.php
* library/ajax/facility\_ajax\_code.php

library/appointments.inc.php
library/auth.inc
library/authentication/login\_operations.php
library/authentication/privDB.php
library/classes/CouchDB.class.php
library/classes/Installer.class.php

* library/classes/POSRef.class.php
* library/classes/QRDAXml.class.php
* library/dated\_reminder\_functions.php
* library/dialog.js

library/encounter\_events.inc.php
library/ESign/js/jquery.esign.js
library/forms.inc
library/gen\_hcfa\_1500.inc.php
library/gen\_hcfa\_1500\_02\_12.inc.php
library/gen\_x12\_837.inc.php

* library/globals.inc.php
* library/invoice\_summary.inc.php

library/log.inc
library/MedEx/API.php
library/menu/src/MenuRole.php

* library/options.inc.php

library/options\_listadd.inc
library/registry.inc
library/sanitize.inc.php
library/tabs/src/TabsWrapper.php
patients/add\_edit\_event\_user.php
patients/find\_appt\_popup\_user.php
portal/account/account.php
portal/account/register.php
portal/add\_edit\_event\_user.php
portal/find\_appt\_popup\_user.php
portal/get\_patient\_info.php

* portal/home.php

portal/import\_template.php

* portal/import\_template\_ui.php

portal/index.php
portal/lib/appsql.class.php

* portal/lib/doc\_lib.php
* portal/lib/download\_template.php
* portal/lib/portal\_mail.inc
* portal/messaging/messages.php
* portal/messaging/secure\_chat.php
* portal/patient/libs/Controller/ProviderController.php
* portal/patient/scripts/app/onsitedocuments.js
* portal/patient/templates/OnsiteDocumentListView.tpl.php
* portal/patient/templates/\_Footer.tpl.php

portal/patient/\_machine\_config.php

* portal/portal\_payment.php
* portal/sign/assets/flashcanvas.js
* portal/sign/assets/flashcanvas.swf
* portal/sign/assets/signpad.css
* portal/sign/css/signer.css
* portal/\_header.php
* setup.php
* sites/default/statement.inc.php
* sql/database.sql
* sql/patch.sql
* sql\_patch.php

templates/documents/general\_list.html
templates/documents/general\_view.html

* version.php

# 5.0.0 Patch (3/24/17)

### Download link

[5-0-0-Patch-8.zip](https://www.open-emr.org/patch/5-0-0-Patch-8.zip "https://www.open-emr.org/patch/5-0-0-Patch-8.zip")

### Description

This is the 8th patch. This patch also includes the changes from prior patches. **Please read through the [list of modified files](/wiki/index.php/OpenEMR_Patches#List_of_files_.285.0.0.29 "OpenEMR Patches") to ensure you haven't customized any of these, since this will copy over this.**

### Installation instructions

#### Windows

1. Extract the zipped file into the openemr web directory, and say yes to copying over files
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Remove the setup.php file from the openemr web directory (if you need this file in the future, then can download it at [setup.php](https://raw.githubusercontent.com/openemr/openemr/rel-500/setup.php)).
4. Remove the library/openflashchart/open-flash-chart.swf file.
#### Linux

1. Move the patch file to the openemr web directory, then type 'unzip 5-0-0-Patch-8.zip', and confirm ok to copy over files.
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. Remove the setup.php file from the openemr web directory (if you need this file in the future, then can download it at [setup.php](https://raw.githubusercontent.com/openemr/openemr/rel-500/setup.php)).
4. Remove the library/openflashchart/open-flash-chart.swf file.

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Added PACS Imaging Viewer - by Victor, Jerry, and Matthew\*\*
* Added Support for MySQL/MariaDB SSL Connection - by Brady\*\*
* Upgraded graphing to dygraphs that was necessary for a security fix, reported by SEC Consult Vulnerability Lab, fixed by Brady
* Security fix - reported by ADLab of Venustech, fixed by Brady
* Security fixes - fixed by Alfie
* Fix view 835 html report in edihistory - fixed by Stephen
* Fix patient delete bug for tabs layout - fixed by Brady
* Added back the close patient note shortcut - reported by Jeff, fixed by Brady
* Added service location to 2310B for same npi, different address - reported by Carlos, fixed by Stephen
* Fix for box 32b for hfca billing form - reported by Henry, fixed by Stephen
* Fix for modifying external codes - fixed by Brady
* Fix for inventory module destroyed menu link - reported by Nzube, fixed by Brady
* Fixed encounter menu - reported by Daniel, fixed by Ray
* Fixes for calendar - reported by Morten, fixed by epsdky
* Fix nation notes report - fixed by Frankie
* Fix insurance popup in demographics user interface - fixed by Visolve
* [Critical security fix](/wiki/index.php/Critical_Security_Fix_for_OpenEMR_setup.php "Critical Security Fix for OpenEMR setup.php") - reported by Sven Krewitt, fixed by Brady
* Fix backup module - fixed by Brady
* [Critical security fix](/wiki/index.php/Critical_Security_Fix_for_CVE-2017-16540 "Critical Security Fix for CVE-2017-16540") - reported by Isaac Sears, fixed by Brady
* Fix in Patient PDF report regarding vital signs - reported by Arnab, fixed by Jerry
* Support all diagnostic codes (including ICD10) in post payments - reported by Kim, fixed by Stephen
* Fix delete patient- reported by Terry and APerez; fixed by Stephen
* Fix for duplicate procedures in the procedure order edit form - reported by Sherwin and A1Gard, fixed by Sunset systems
* Fix for tabs layout in Edge browser - reported by Sunset Systems, fixed by Jerry
* Fix to allow multiple codes of same code type on the layout billing code widget - reported by Alfonso, fixed by Brady
* Fix dated reminders to show message when forward it - fixed by Matrix
* Fix to prevent unnecessary encoding errors during upgrade and globals editing - fixed by Brady
* Fix drawable images in layout based forms with larger image sizes - reported by aperez, fixed by Sunset Systems
* Fixes for Eye form - fixed by Ray
* Fix patient report tool for code\_text. - fixed by Daniel
* Fix patient report tool for vitals - reported by Arnab, fixed by Arnab, Jerry and Matthew
* Fix fee sheet - reported by Carlos, fixed by Terry
* Fix past appointments widget in patient summary screen - fixed by epsdky
* Fix registration feature - reported by Arnab, fixed by Jerry
* Security fixes - reported by SEC Consult Vulnerability Lab, fixed by Brady. The OpenEMR team thanks Wan Ikram, Fikri Fadzil and Jasveer Singh from SEC Consult Vulnerability Lab (<https://www.sec-consult.com/>) for responsibly reporting the identified issues and working with us as we addressed them.
* Fix to patient PDF report - reported by Arnab Naha, fixed by Brady Miller and epsdky

### List of files (5.0.0)

(note the ones prepended with \* have new changes with this patch)

```
*.bowerrc
acknowledge_license_cert.html
*bower.json
*controllers/C_Document.class.php
*gacl/gacl.class.php
*gacl/setup.php
interface/billing/payment_pat_sel.inc.php
interface/fax/fax_dispatch.php
interface/forms/eye_mag/SpectacleRx.php
interface/forms/eye_mag/a_issue.php
interface/forms/eye_mag/css/style.css
interface/forms/eye_mag/help.php
interface/forms/eye_mag/js/eye_base.php
interface/forms/LBF/new.php
interface/forms/LBF/report.php
interface/forms/procedure_order/new.php
interface/forms/track_anything/history.php
interface/forms/track_anything/report.js
interface/forms/track_anything/report.php
interface/forms/vitals/report.php
interface/forms/vitals/templates/vitals/general_new.html
*interface/globals.php
*interface/main/backup.php
interface/main/backuplog.php
interface/main/backuplog.sh
*interface/main/calendar/config.php
*interface/main/calendar/includes/pnAPI.php
interface/main/calendar/modules/PostCalendar/pnincludes/Date/Calc.php
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/header.html
interface/main/dated_reminders/dated_reminders_add.php
interface/main/tabs/menu/menu_data.php
*interface/modules/zend_modules/config/autoload/global.php
*interface/modules/zend_modules/module/Application/src/Application/Model/ApplicationTable.php
interface/new/new_comprehensive.php
interface/patient_file/encounter/forms.php
interface/patient_file/encounter/superbill_custom_full.php
interface/patient_file/encounter/trend_form.php
interface/patient_file/report/custom_report.php
interface/patient_file/summary/demographics.php
interface/patient_file/summary/demographics_full.php
interface/patient_file/summary/labdata.php
interface/patient_file/summary/pnotes_full_add.php
interface/product_registration/product_registration_service.php
interface/themes/ajax_calendar.css
interface/themes/style_babyblu.css
interface/themes/style_metal.css
interface/themes/style_oemr.css
interface/themes/style_pdf.css
interface/themes/style_purple.css
interface/themes/style_sky_blue.css
interface/themes/style_tan.css
interface/themes/tabs_style_compact.css
interface/themes/tabs_style_full.css
*library/acl.inc
*library/ADODB_mysqli_log.php
*library/ADODB_mysqli_mod.php
library/ajax/graph_track_anything.php
library/ajax/graphs.php
library/appointments.inc.php
library/calendar.inc
*library/classes/Document.class.php
library/classes/Installer.class.php
library/custom_template/ckeditor/_samples/assets/_posteddata.php
*library/dicom_frame.php
library/edihistory/edih_csv_inc.php
library/edihistory/edih_x12file_class.php
library/encounter_events.inc.php
library/FeeSheet.class.php
library/globals.inc.php
library/gen_hcfa_1500.inc.php
library/gen_x12_837.inc.php
*library/js/dwv/dicom_gui.js
*library/js/dwv/dicom_launcher.js
*library/js/dwv/dwv_i18n.js
library/js/xl/dygraphs.js.php
library/openflashchart/open-flash-chart.swf
library/options.inc.php
library/patient_tracker.inc.php
library/report.inc
library/sanitize.inc.php
*library/sql.inc
public/assets/modified/dygraphs-2-0-0/README.md
public/assets/modified/dygraphs-2-0-0/dygraph.css
public/assets/modified/dygraphs-2-0-0/dygraph.js
setup.php
*sites/default/documents/certificates/README.md
sql/database.sql
sql/patch.sql
*templates/documents/general_list.html
*templates/documents/general_view.html
templates/prescription/general_fragment.html
templates/prescription/general_list.html
*version.php
*public/assets/dwv-0-21-0
*public/assets/flot-0-8-3
*public/assets/i18next-9-0-1
*public/assets/i18next-browser-languagedetector-2-0-0
*public/assets/i18next-xhr-backend-1-4-3
*public/assets/jquery-ui-1-12-1
*public/assets/jszip-3-1-5
*public/assets/konva-1-6-8
*public/assets/magic-wand-js
*public/assets/modernizr-3-5-0
```

# 4.2.2 Patch

There were no patches for OpenEMR 4.2.2.

# 4.2.1 Patch

There were no patches for OpenEMR 4.2.1.

# 4.2.0 Patch (9/2/15)

### Download link

[4-2-0-Patch-4.zip](http://www.open-emr.org/patch/4-2-0-Patch-4.zip "http://www.open-emr.org/patch/4-2-0-Patch-4.zip")

### Description

This is the 4th patch, and it includes the fixes from previous patches. There are 35 files that are changed. **Please read through the modified 'list of files' below to ensure you haven't customized any of these, since this will copy over this.**

(Warning: see [Special Issues](/wiki/index.php/OpenEMR_Patches#Special_Issues "OpenEMR Patches") section below)
(Warning: if you have modified the **interface/globals.php** script to manually set the $webserver\_root and $web\_root variables, then you will need to set this again after step 1 but before step 2 of the patch instructions below)

### Installation instructions

#### Windows

1. Extract the zipped file into the openemr web directory, and say yes to copying over files
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
#### Linux

1. Move the patch file to the openemr web directory, then type 'unzip 4-2-0-Patch-4.zip', and confirm ok to copy over files.
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))

### Special Issues

1. The 3rd patch included a critical patch to fix the login authentication process. If you are locked out of OpenEMR with this patch (the only OS we know at this time that will lock out users is OpenSuse) there are instructions to fix your login at [Fix Lock Out](/wiki/index.php/FAQ#What_do_I_do_if_I_am_locked_out_of_OpenEMR.3F "FAQ"); those users that are locked out will see the following error "FATAL ERROR: crypt() function is not working correctly in OpenEMR" which is discussed in more detail at  [Fatal Crypt Error](/wiki/index.php/FAQ#What_is_.22FATAL_ERROR:_crypt.28.29_function_is_not_working_correctly_in_OpenEMR.22.3F "FAQ"). Even if your users are not locked out with this patch, do recommend changing all passwords (not for security reasons, but to prevent lock out errors in the future).

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Fixes to support ICD10 billing - contributed by Terry Hill and Jerry Padgett\*\*
* Critical security fix - reported by Dr. Carsten Bartling
* Critical security fix - reported by Brian Hysell
* Security fixes - contributed by Brady Miller and Sunset Systems
* New feature for DaySheet report (end of day report) - contributed by Terry Hill
* New feature to either Amend or Overwrite the Billing log file - contributed by Brady Miller
* LBF form improvements and fixes - contributed by Sunset Systems
* Fix for inappropriate "Fix this!" messages for some layout data types. - contributed by Sunset Systems and Arnab Naha
* Fix for the IMPORT button to fix CCD import - contributed by ZH Healthcare
* Offsite patient portal fixes - contributed by ZH Healthcare
* Fix for javascript validation of policy and group numbers. - contributed by Kevin Yeh
* Fix for patient notes when showing all notes - contributed by epsdky

### List of files (4.2.0)

(note the ones prepended with \* have new changes with this patch)

```
contrib/util/ubuntu_package_scripts/production/README.Debian
contrib/util/ubuntu_package_scripts/production/changelog.Debian
contrib/util/ubuntu_package_scripts/production/control
contrib/util/ubuntu_package_scripts/production/copyright
Documentation/Using The End of Day Report in OpenEmr.pdf
interface/billing/billing_process.php
interface/billing/billing_report.php
interface/billing/print_daysheet_report_num1.php
interface/billing/print_daysheet_report_num2.php
interface/billing/print_daysheet_report_num3.php
interface/forms/fee_sheet/new.php
interface/forms/fee_sheet/review/initialize_review.php
interface/forms/fee_sheet/review/js/fee_sheet_core.js
interface/forms/LBF/new.php
interface/globals.php
interface/new/new_comprehensive.php
interface/patient_file/summary/demographics_full.php
interface/patient_file/summary/pnotes_full.php
interface/reports/appointments_report.php
interface/reports/appt_encounter_report.php
interface/reports/patient_list.php
interface/super/edit_layout.php
interface/usergroup/facility_admin.php
interface/usergroup/user_admin.php
library/appointments.inc.php
library/authentication/password_hashing.php
library/daysheet.inc.php
*library/gen_hfca_1500_02_12.inc.php
*library/gen_x12_837.inc.php
library/globals.inc.php
library/options.inc.php
myportal/soap_service/server_existingpatient.php
myportal/soap_service/server_side.php
templates/documents/general_view.html
*version.php
```

# 4.1.2 Patch (6/19/2014)

### Download link

[4-1-2-Patch-7.zip](http://www.open-emr.org/patch/4-1-2-Patch-7.zip "http://www.open-emr.org/patch/4-1-2-Patch-7.zip")

### Description

This is the 7th patch, and it includes the fixes from previous patches. There are 68 files that are changed. **Please read through the modified 'list of files' below to ensure you haven't customized any of these, since this will copy over this.** (Warning: if you have modified the **interface/globals.php** script to manually set the $webserver\_root and $web\_root variables, then you will need to set this again after step 1 but before step 2 of the patch instructions below)

### Installation instructions

#### Windows

1. Extract the zipped file into the openemr web directory, and say yes to copying over files
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. If using the Offsite Patient Portal, then also follow [these instructions](/wiki/index.php/Offsite_portal_patch_1 "Offsite portal patch 1").
#### Linux

1. Move the patch file to the openemr web directory, then type 'unzip 4-1-2-Patch-7.zip', and confirm ok to copy over files.
2. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 2 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
3. If using the Offsite Patient Portal, then also follow [these instructions](/wiki/index.php/Offsite_portal_patch_1 "Offsite portal patch 1").

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Upgrading mechanism fix - contributed by Brady Miller\*\*
* Security fixes - contributed by Brady Miller
* Bug fix of immunization expiration date - contributed by Stephen Waite
* Bug fix for billing HCFA 1500 - contributed by Kevin Yeh
* Bug fix for billing CMS 1500 - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Support CMS-1500 02/12 new format - contributed by Kevin Yeh
* Security fixes - contributed by Fikri Fadzil and bradymiller
* Fixed color for facility style calendar - contributed by Stephen Waite
* Fix for pharmacy dispensory access controls - contributed by Brady Miller
* Typo fix for subscriber phone - contributed by cverk
* Critical security fix - contributed by Patrick Smith and Kevin Yeh
* Critical PHP 5.5 compatibility fixes - contributed by Kevin Yeh
* Critical security fix in multisite module - contributed by Brady Miller
* Security fix to ensure user is active and credentials are current - contributed by Kevin Yeh
* Offsite Patient Portal support for secure vpn connectivity. - contributed by [ZH Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Direct Messaging Module updates for improved reliability, security, and useability - contributed by EMR Direct
* Bug fix when password strength is set - contributed by Kevin Yeh
* Bug fix to assign an imported document owner id correctly - contributed by Brady Miller
* Bug fix for OUT event calendar bug - contributed by Robert Down
* Bug fix in log viewer bug that caused some entries to go missing from the dropdown of event names. - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Bug Fix to update BMI in vitals form when editing in pounds field - contributed by Kevin Yeh
* Critical bug fix in the vitals form module (date/time entry) - contributed by Kevin Yeh

### List of files (4.1.2)

(note the ones prepended with \* have new changes with this patch)

```
ccr/transmitCCD.php
contrib/util/ubuntu_package_scripts/development/changelog.Debian
contrib/util/ubuntu_package_scripts/development/control
contrib/util/ubuntu_package_scripts/development/copyright
contrib/util/ubuntu_package_scripts/development/git-openemr.conf
contrib/util/ubuntu_package_scripts/development/postinst
contrib/util/ubuntu_package_scripts/development/prerm
contrib/util/ubuntu_package_scripts/development/README.Debian
*contrib/util/ubuntu_package_scripts/production/changelog.Debian
contrib/util/ubuntu_package_scripts/production/control
contrib/util/ubuntu_package_scripts/production/copyright
contrib/util/ubuntu_package_scripts/production/openemr.conf
contrib/util/ubuntu_package_scripts/production/postinst
contrib/util/ubuntu_package_scripts/production/prerm
contrib/util/ubuntu_package_scripts/production/README.Debian
contrib/util/ubuntu_package_scripts/README
controllers/C_Document.class.php
index.php
interface/forms/misc_billing_options/date_qualifier_options.php
interface/forms/misc_billing_options/new.php
interface/forms/misc_billing_options/report.php
interface/forms/misc_billing_options/save.php
interface/forms/misc_billing_options/table.sql
interface/forms/vitals/templates/vitals/general_new.html
interface/globals.php
interface/main/left_nav.php
interface/logview/logview.php
interface/new/new_comprehensive_save.php
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day/ajax_template.html
interface/main/finder/dynamic_finder_ajax.php
interface/patient_file/deleter.php
interface/patient_file/letter.php
interface/patient_file/summary/create_portallogin.php
interface/patient_file/summary/shot_record.php
interface/reports/direct_message_log.php
interface/super/edit_globals.php
interface/themes/ajax_calendar.css
library/adodb/tests/testsessions.php
library/ajax/offsite_portal_ajax.php
library/auth.inc
library/authentication/common_operations.php
library/authentication/login_operations.php
library/authentication/password_change.php
library/authentication/password_hashing.php
library/Claim.class.php
library/classes/Installer.class.php
library/clinical_rules.php
library/direct_message_check.inc
library/documents.php
library/gen_hcfa_1500.inc.php
library/gen_hfca_1500_02_12.inc.php
library/globals.inc.php
library/immunization_helper.php
library/log.inc
library/pid.inc
library/plugins/shared.make_timestamp.php
library/report.inc
library/translation.inc.php
myportal/index.php
myportal/soap_service/portal_connectivity.php
myportal/soap_service/server_side.php
patients/get_patient_info.php
patients/index.php
setup.php
*sql_upgrade.php
sql/database.sql
sql/patch.sql
*version.php
```

# 4.1.1 Patch (07/27/2013)

### Download link

[4-1-1-Patch-14.zip](http://www.open-emr.org/patch/4-1-1-Patch-14.zip "http://www.open-emr.org/patch/4-1-1-Patch-14.zip")

### Description

This is the 14th patch, and it includes the fixes from previous patches. There are 80 files that are changed. **Please read through the [list of modified files](/wiki/index.php/OpenEMR_Patches#List_of_files_.284.1.1.29 "OpenEMR Patches") to ensure you haven't customized any of these, since this will copy over this.** (Warning: if you have modified the **interface/globals.php** script to manually set the $webserver\_root and $web\_root variables, then you will need to set this again after step 2 but before step 3 of the patch instructions below)

### Installation instructions

#### Windows

1. Extract the zipped file into the openemr web directory, and say yes to copying over files
2. If the following directory openemr/library/openflashchart/tmp-upload-images/ exists within your openemr installation, then remove it.
3. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 3 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
#### Linux

1. Move the patch file to the openemr web directory, then type 'unzip 4-1-1-Patch-14.zip', and confirm ok to copy over files.
2. If the following directory openemr/library/openflashchart/tmp-upload-images/ exists within your openemr installation, then remove it.
3. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 3 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Critical bug fix in the immunization module - contributed by bradymiller\*\*
* Security fixes - contributed by bradymiller
* Bug fixes and improvements to Date of Birth calculations, formatting and options - contributed by yehster
* Security fixes - contributed by bradymiller
* Bug fix in billing report - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Bug fix in scanned documents module - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Minor improvement in fee sheet - contributed by bradymiller
* Bug Fix for deleting payments via the Front Office Receipts report - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Bug fix for [security vulnerability](http://packetstormsecurity.com/files/120274/ZSL-2013-5126.txt) - contributed by bradymiller
* Bug fix for copays in appointment encounter report - contributed by [ZH Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Bug fix and improvements to lab display in then onsite patient portal - contributed by bradymiller
* Added feature to show lab results in the offsite patient portal - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")\*\*[ZH Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Added feature to save new patient data to audit tables in the offsite patient portal - contributed by [ZH Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Bug fix for emailing reminders - contributed by arnabnaha
* Bug fix in AMC reporting - contributed by pfwilliams
* Improvement to fee sheet code set search selector - contributed by bradymiller
* Bug fix in codes import module - contributed by pfwilliams
* Added feature to focus on field when searching for billing/diagnosis codes - contributed by yehster
* Bug fix in user add/modify gui - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Patient portal (offsite) bug fixes and improvements - contributed by [ZH Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Bug fixes and improvements of social security form items in demographics/insurance - contributed by yehster
* Bug fix to include Newcrop eRx module medications in AMC report - contributed by [ZH Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Bug fix for incorrect syntax in disc\_fragment.php script - contributed by yehster
* Bug fix to correctly show patient form/note authors - contributed by bradymiller
* Security fix in the chart location module - contributed by yehster
* Bug fix in the code search popup - contributed by bradymiller
* Bug fix in the patient finder - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Bug fix to show correct balance in Payment screen - contributed by [ZH Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Bug fix in offsite patient portal mail - contributed by [ZH Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Bug fix for apostrophe in facility name in encounter screen - contributed by bradymiller
* Bug fix for provider Insurance Numbers - contributed by bradymiller
* Major enhancements in CDR based reports (standard rules, CQM, AMC and creation of clinical reminders) that allow tracking and saving of these reports - contributed by bradymiller
* Bug fixes in patient portal - contributed by [ZH Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Bug fix in claim submission - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Bug fix to show sql errors - contributed by bradymiller
* Removal of a debugging log statement - contributed by [MI-Squared](/wiki/index.php/OpenEMR_Professional_Support#Medical_Information_Integration.2C_LLC_-_MI2 "OpenEMR Professional Support")
* Bug fix of HCFA/X12 output - contributed by bradymiller
* Processing animation added to the CQM/ACM/Rules reports - contributed by bradymiller
* Bug fix to add multi-provider appointments - contributed by bradymiller
* Improved performance and memory management of Clinical Decision Rules (CDR) engine and reporting - contributed by bradymiller
* Bug fix in billing module patient name filter (bug reported by Jeff) - contributed by bradymiller
* Bug fix in the Add/Edit appointments module - contributed by lullu
* Bug fix in the Access Controls - contributed by bradymiller
* Bug fix to show medical problems correctly in the CCR/CCD reports - contributed by bradymiller
* Bug fix so the External Data Loads feature works in Ubuntu 12.04 - contributed by bradymiller
* Bug fix when setting an appointment as No Show - contributed by bradymiller

### List of files (4.1.1)

(note the ones prepended with \*\* have new changes with this patch)

```
ccr/createCCRProblem.php
ccr/createCCR.php
custom/chart_tracker.php
custom/code_types.inc.php
custom/export_registry_xml.php
interface/batchcom/batch_reminders.php
interface/code_systems/list_staged.php
interface/fax/fax_dispatch.php
interface/forms/fee_sheet/new.php
interface/forms/newpatient/save.php
interface/forms/vitals/C_FormVitals.class.php
interface/forms/vitals/growthchart/chart.php
interface/forms/vitals/templates/vitals/general_new.html
interface/globals.php
interface/main/calendar/add_edit_event.php
interface/main/finder/dynamic_finder_ajax.php
interface/main/left_nav.php
interface/main/messages/messages.php
interface/main/onotes/office_comments.php
interface/main/onotes/office_comments_full.php
interface/new/new_comprehensive.php
interface/patient_file/deleter.php
interface/patient_file/encounter/find_code_popup.php
interface/patient_file/encounter/forms.php
interface/patient_file/front_payment.php
interface/patient_file/reminder/patient_reminders.php
interface/patient_file/report/custom_report.php
interface/patient_file/summary/clinical_reminders_fragment.php
interface/patient_file/summary/create_portallogin.php
interface/patient_file/summary/demographics_full.php
interface/patient_file/summary/demographics.php
interface/patient_file/summary/disc_fragment.php
interface/patient_file/summary/patient_reminders_fragment.php
interface/reports/appt_encounter_report.php
interface/reports/chart_location_activity.php
interface/reports/cqm.php
interface/reports/custom_report_range.php
interface/reports/report.inc.php
interface/reports/report_results.php
interface/soap_functions/soap_patientfullmedication.php
**interface/super/edit_list.php
interface/usergroup/user_admin.php
library/acl.inc
library/ajax/collect_new_report_id.php
library/ajax/execute_cdr_report.php
library/ajax/execute_pat_reminder.php
library/ajax/status_report.php
library/billrep.inc
library/classes/Provider.class.php
library/classes/rulesets/Amc/library/AbstractAmcReport.php
library/classes/rulesets/Amc/reports/AMC_302d/Numerator.php
library/classes/rulesets/library/RsPatient.php
library/clinical_rules.php
library/formdata.inc.php
library/gen_x12_837.inc.php
library/globals.inc.php
library/htmlspecialchars.inc.php
library/jsonwrapper/JSON/JSON.php
library/jsonwrapper/JSON/LICENSE
library/jsonwrapper/jsonwrapper.php
library/jsonwrapper/jsonwrapper_inner.php
library/lists.inc
library/onotes.inc
library/openflashchart/php-ofc-library/ofc_upload_image.php
library/patient.inc
library/pnotes.inc
library/reminders.php
library/report_database.inc
library/sql-ccr.inc
library/sql.inc
myportal/soap_service/server_audit.php
myportal/soap_service/server_existingpatient.php
myportal/soap_service/server_newpatient.php
myportal/soap_service/server_newpatienttoapprove.php
myportal/soap_service/server_oemruser.php
myportal/soap_service/server_side.php
patients/get_lab_results.php
sql/database.sql
sql/patch.sql
**version.php
```

# 4.1.0 Patch (7/26/2012)

### Download link

[4-1-0-Patch-13.zip](http://www.open-emr.org/patch/4-1-0-Patch-13.zip "http://www.open-emr.org/patch/4-1-0-Patch-13.zip")

### Description

This is the 13th patch, and it includes the fixes from previous patches. There are 133 files that are changed. **Please read through the [list of modified files](/wiki/index.php/OpenEMR_Patches#List_of_files_.284.1.29 "OpenEMR Patches") to ensure you haven't customized any of these, since this will copy over this.** (Warning: if you have modified the **interface/globals.php** script to manually set the $webserver\_root and $web\_root variables, then you will need to set this again after step 1 but before step 3 of the patch instructions below)

### Installation instructions

#### Windows

1. Extract the zipped file into the openemr web directory, and say yes to copying over files
2. Remove all files and directories in the *openemr/interface/main/calendar/modules/PostCalendar/pntemplates/compiled/* directory.
3. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 3 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))
#### Linux

1. Move the patch file to the openemr web directory, then type 'unzip 4-1-0-Patch-13.zip', and confirm ok to copy over files.
2. Remove all files and directories in the *openemr/interface/main/calendar/modules/PostCalendar/pntemplates/compiled/* directory.
3. Open web browser and go to http://your\_server\_name\_or\_ip/openemr/sql\_patch.php
(this script will run automatically and patch the database)
(if you are using the [Multisite Module](/wiki/index.php/OpenEMR_Multiple_Sites_Module "OpenEMR Multiple Sites Module"), then skip step 3 and [follow these instructions](/wiki/index.php/OpenEMR_Multiple_Sites_Module#Patches "OpenEMR Multiple Sites Module"))

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Bug fix in access controls from patch 12.\*\*
* Bug fix to ensure new patient names with UTF8 encoded characters works. - contributed by bradymiller
* Patch script improvements - contributed by [TajEmo Enterprises](/wiki/index.php/OpenEMR_Professional_Support#TajEmo_Enterprises "OpenEMR Professional Support")
* Bug fix to make CAMOS form installation work with MySQL 5.5 - contributed by James Stone
* Bug fix to show the correct DOB date on CCR report - contributed by [TajEmo Enterprises](/wiki/index.php/OpenEMR_Professional_Support#TajEmo_Enterprises "OpenEMR Professional Support")
* Bug fix to ensure correct display of UTF8 encoded characters - contributed by bradymiller
* Bug fix to allow display of more than one word for translated Login label on the login page - contributed by bradymiller
* Bug fix in access controls - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Bug fix of offsite patient portal when creating a new patient - contributed by [Z&H Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Bug fix for PHP version 5.4 compatibility - contributed by yehster
* Bug fix to stop time out of AMC/CQM/CDR reports - contributed by bradymiller
* Dated Reminders module bug fixes - contributed by [TajEmo Enterprises](/wiki/index.php/OpenEMR_Professional_Support#TajEmo_Enterprises "OpenEMR Professional Support")
* Patient portal SOAP API bug fixes - contributed by [Z&H Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Bug fix for immunization when using sql collation other than utf8\_general\_ci - contributed by bradymiller
* SNOMED import script now works with most recent SNOMED release - contributed by bradymiller
* Added access control to viewing vital signs on the patient summary screen - contributed by bradymiller
* Strip spaces or dashes in zip code of X12 - contributed by yehster
* Bug fixes in the find code popup\*\* - contributed by bradymiller
* Critical bug fix to create X12 claims - contributed by yehster
* Bug fix for ERA check number - contributed by [Z&H Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Dated Reminders feature - contributed by [TajEmo Enterprises](/wiki/index.php/OpenEMR_Professional_Support#TajEmo_Enterprises "OpenEMR Professional Support")
* Vitals Form modify observation date/time feature - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Implemented tooltips to show encounter form data from the encounters list - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Bug fix to stop calendar from reseting to show all users - contributed by yehster
* Bug fix to display patient photo if extension is uppercase - contributed by [TajEmo Enterprises](/wiki/index.php/OpenEMR_Professional_Support#TajEmo_Enterprises "OpenEMR Professional Support")
* Ensure proper date formatting for X12 5010 - contributed by [MI-Squared](/wiki/index.php/OpenEMR_Professional_Support#Medical_Information_Integration.2C_LLC_-_MI2 "OpenEMR Professional Support") and yehster
* Billing skip segment 2310B when applicable - contributed by yehster
* Bug fix to pass correct appt category when new encounter is autocreated - contributed by [MI-Squared](/wiki/index.php/OpenEMR_Professional_Support#Medical_Information_Integration.2C_LLC_-_MI2 "OpenEMR Professional Support")
* Bug fix to pass correct Onset Date when new encounter is autocreated - contributed by [MI-Squared](/wiki/index.php/OpenEMR_Professional_Support#Medical_Information_Integration.2C_LLC_-_MI2 "OpenEMR Professional Support")
* [Security fix](http://www.htbridge.ch/advisory/multiple_vulnerabilities_in_openemr.html) - contributed by bradymiller
* X12 Billing bug fix - contributed by yehster and [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Addition of default patient country code to the eRx Newcrop module - contributed by [Z&H Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Fix for javascript error triggered when mouse moved over provider name in day view - contributed by yehster
* Bug fix for lists module to add codes to fee sheet - contributed by [Health Care Technologies](/wiki/index.php/OpenEMR_Professional_Support#Health_Care_Technologies "OpenEMR Professional Support")
* Security fix in interface/patient\_file/summary/add\_edit\_issue.php script - contributed by yehster
* Bug fixes in E-prescribing Newcrop module - contributed by [Z&H Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Bug fixes in X12 module - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support") and yehster
* Bug fixes in backup script module - contributed by yehster
* Bug fixes in billing module - contributed by yehster
* Bug fix in the add list item widget - contributed by MMF Systems
* Bug fix in deleter popup - contributed by MMF Systems
* Security fix in interface/login/validateUser.php script - contributed by bradymiller
* 5010 X12 compliance - primarily contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support") with bug fixes by Kim Weesner
* Can click directly on a calendar slot time to set selected time/provider - contributed by yehster
* New calendar entries will list the current patient by default - contributed by yehster
* Support for multiple modifiers in the Fee sheet - contributed by [MI-Squared](/wiki/index.php/OpenEMR_Professional_Support#Medical_Information_Integration.2C_LLC_-_MI2 "OpenEMR Professional Support")
* Support justification of non-icd9 diagnosis codes in the Fee sheet - contributed by yehster
* Support for procedure-specific claim notes - contributed by [MD-Technologies](/wiki/index.php/OpenEMR_Professional_Support#MD-Technologies_Inc. "OpenEMR Professional Support")
* Bug fixes in xmlformgen - contributed by [ZoneOne](/wiki/index.php/OpenEMR_Professional_Support#ZoneOne_LLC. "OpenEMR Professional Support")
* Bug fix to show immunizations correctly in the patient report - contributed by bradymiller
* Bug fix to edit immunizations - contributed by bradymiller
* Bug fixes in messages module - contributed by [MI-Squared](/wiki/index.php/OpenEMR_Professional_Support#Medical_Information_Integration.2C_LLC_-_MI2 "OpenEMR Professional Support")
* Bug fix for encounter date display when showing historical LBF data - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Commercial_Help#Sunset_Systems "OpenEMR Commercial Help")
* Bug fix to remove non-working dynamic resizing of dialog frame - contributed by yehster
* Fixed time limit expiration bug from the administration clinical reminder module - contributed by bradymiller
* Integrated the new patch mechanism into the multi-site module (admin.php script) - contributed by bradymiller
* Billing module bug fixes related to NDC code and Subscriber RelationShip - contributed by [Z&H Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Optimized a textarea size in the CAMOS module - contributed by Jeff Guillory
* Bug fix in Messages module - contributed by yehster
* Fixed lots of undefined variables - contributed by yehster
* Bug fix in dates for CCR reporting - contributed by yehster
* Sort fax/scan pages to match the original order in a displayed document - contributed by [Sunset Systems](/wiki/index.php/OpenEMR_Professional_Support#Sunset_Systems "OpenEMR Professional Support")
* Nation Notes module bug Fix - contributed by [Z&H Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Database optimizations to improve OpenEMR performance - contributed by bradymiller
* Calendar feature to increment by months up to a year in the future when clicking the month label on the small calendar - contributed by yehster
* Offsite Portal Patient Link Bug Fixed - contributed by [Z&H Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Calendar layout bug fixes and improvements - contributed by yehster
* Fixed Disclosure display screen to allow viewing of more than 15 records with pagination - contributed by MMF Systems
* Bug fix to view the billing log file. - contributed by kevmccor
* Bug fix to show appt in patient portal for IE8 and IE9. - contributed by Ryan Madron
* EOB bug fix - contributed by [Z&H Healthcare](/wiki/index.php/OpenEMR_Professional_Support#Z.26H_Healthcare_Solutions.2C_LLC. "OpenEMR Professional Support")
* Bug fix to not display deleted vital signs - contributed by MMF Systems
* New feature to display warning message when attempt to add duplicate entries to any form fields using the Add button - contributed by MMF Systems
* Patient Portal calendar pop-up style bug fix - bug reported by Mauricio

### List of files (4.1)

(note the ones prepended with \*\* have new changes with this patch)

```
admin.php
ccr/createCCRActor.php
contrib/acog/print_form.php
contrib/forms/formmaker/formscript.pl
contrib/forms/xmlformgen/affirm_sheet.xml
contrib/forms/xmlformgen/dub_soap.xml
contrib/forms/xmlformgen/pelvic_soap.xml
contrib/forms/xmlformgen/urinary_soap.xml
contrib/forms/xmlformgen/vaginitis_soap.xml
contrib/forms/xmlformgen/xslt/common_objects.xslt
contrib/forms/xmlformgen/xslt/field_objects.xslt
contrib/forms/xmlformgen/xslt/new.php.xslt
contrib/forms/xmlformgen/xslt/print.php.xslt
contrib/forms/xmlformgen/xslt/report.php.xslt
contrib/forms/xmlformgen/xslt/report_objects.xslt
contrib/forms/xmlformgen/xslt/save.php.xslt
contrib/forms/xmlformgen/xslt/table.sql.xslt
contrib/forms/xmlformgen/xslt/view.php.xslt
interface/billing/billing_process.php
interface/billing/billing_report.php
interface/billing/sl_eob_process.php
interface/billing/sl_eob_search.php
interface/code_systems/standard_tables_manage.php
interface/eRx.php
interface/eRx_xml.php
interface/fax/fax_dispatch.php
interface/forms/CAMOS/view.php
interface/forms/CAMOS/table.sql
interface/forms/CAMOS/table_no_data.sql
interface/forms/fee_sheet/new.php
interface/forms/LBF/new.php
interface/forms/painmap/templates/podiatry-feet.png
interface/forms/painmap/templates/README.TXT
interface/forms/vitals/C_FormVitals.class.php
interface/forms/vitals/FormVitals.class.php
interface/forms/vitals/templates/vitals/general_new.html
interface/globals.php
interface/login/login.php
interface/login/validateUser.php
interface/logview/erx_logview.php
interface/main/backup.php
interface/main/calendar/add_edit_event.php
interface/main/calendar/index.php
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/header.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/monthSelector.php
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week/ajax_template.html
interface/main/dated_reminders/dated_reminders.php
interface/main/dated_reminders/dated_reminders_add.php
interface/main/dated_reminders/dated_reminders_log.php
interface/main/finder/patient_select.php
interface/main/left_nav.php
interface/main/main_info.php
interface/main/main_screen.php
interface/main/messages/messages.php
interface/new/new_comprehensive.php
interface/new/new_search_popup.php
interface/patient_file/deleter.php
interface/patient_file/encounter/delete_form.php
interface/patient_file/encounter/diagnosis.php
interface/patient_file/encounter/find_code_popup.php
interface/patient_file/encounter/load_form.php
interface/patient_file/encounter/trend_form.php
interface/patient_file/encounter/view_form.php
interface/patient_file/history/encounters.php
interface/patient_file/history/encounters_ajax.php
interface/patient_file/pos_checkout.php
interface/patient_file/reminder/patient_reminders.php
interface/patient_file/report/custom_report.php
interface/patient_file/summary/add_edit_issue.php
interface/patient_file/summary/create_portallogin.php
interface/patient_file/summary/demographics.php
interface/patient_file/summary/demographics_full.php
interface/patient_file/summary/demographics_save.php
interface/patient_file/summary/disclosure_full.php
interface/patient_file/summary/immunizations.php
interface/patient_file/summary/lbf_fragment.php
interface/patient_file/summary/pnotes_fragment.php
interface/patient_file/summary/shot_record.php
interface/patient_file/summary/stats.php
interface/patient_file/summary/stats_full.php
interface/patient_file/summary/vitals_fragment.php
interface/reports/cqm.php
interface/reports/players_report_ajax.php
interface/soap_functions/soap_allergy.php
interface/soap_functions/soap_patientfullmedication.php
interface/super/edit_list.php
interface/themes/ajax_calendar.css
interface/themes/ajax_calendar_ie.css
interface/usergroup/facilities_add.php
interface/usergroup/facility_admin.php
interface/usergroup/user_admin.php
interface/usergroup/usergroup_admin_add.php
**library/acl.inc
library/ajax/addlistitem.php
library/ajax/dated_reminders_counter.php
library/auth.inc
library/billing.inc
library/Claim.class.php
library/classes/Controller.class.php
library/classes/X12Partner.class.php
library/clinical_rules.php
library/custom_template/custom_template.php
library/custom_template/quest_popup.php
library/dated_reminder_functions.php
library/dialog.js
library/erx_javascript.inc.php
library/freeb/xmlrpcs.inc
library/gen_hcfa_1500.inc.php
library/gen_x12_837.inc.php
library/globals.inc.php
library/js/ajtooltip.js
library/js/calendarDirectSelect.js
library/log.inc
library/options_listadd.inc
library/options.inc.php
library/patient.inc
library/pnotes.inc
library/reminders.php
library/sanitize.inc.php
library/sql-ccr.inc
library/sql_upgrade_fx.php
library/standard_tables_capture.inc
myportal/soap_service/server_existingpatient.php
myportal/soap_service/server_newpatient.php
myportal/soap_service/server_side.php
patients/get_appointments.php
patients/summary_pat_portal.php
sql/patch.sql
sql_patch.php
templates/prescription/general_list.html
templates/x12_partners/general_edit.html
**version.php
```
# 4.0.0 Patch (04/15/2011)

### Download link

[4-0-0-Patch-2.zip](http://sourceforge.net/tracker/download.php?group_id=60081&atid=493003&file_id=408850&aid=3287237)

### Description

This is the 2nd patch, and it includes the fixes from previous patches. There are 8 files that are changed. **Please read through the [list of modified files](/wiki/index.php/Old_Outdated_OpenEMR_Patches#List_of_files_.284.0.29 "Old Outdated OpenEMR Patches") to ensure you haven't customized any of these, since this will copy over this.**

### Installation instructions

#### Windows

Simply extract the zipped file into the openemr web directory, and say yes to copying over files

#### Linux

Move the patch file to the openemr web directory, then type 'unzip 4-0-0-Patch-2.zip', and confirm ok to copy over files.

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Fix for bug in the backup script (Administration->Backup).\*\*
* Fix for bug in the appointment report when listing recurring appointments and filtering by facility.\*\*
* Fix for bug in the Facility data entry form.\*\*
* Fix for published security bug "Local File Inclusion".\*\*
* Fix for published security bug "Arbitrary Database Creation/Database Enumeration".\*\*
* Fix for bug that does not allow modification of Facilities.

### List of files (4.0)

```
contrib/util/express.php
index.php
interface/main/backup.php
interface/globals.php
interface/usergroup/facilities.php
interface/usergroup/facilities_add.php
interface/usergroup/facility_admin.php
library/appointments.inc.php
```
# 3.2.0 Patch (10/05/2010)

### Download link

[3-2-0-Patch-8.zip](http://sourceforge.net/tracker/download.php?group_id=60081&atid=493003&file_id=388982&aid=3081753)

### Description

This is the 8th patch, and it includes the changes from previous patches. There are 52 files that are changed.. **Please read through the [list of modified files](/wiki/index.php/Old_Outdated_OpenEMR_Patches#List_of_files_.283.2.29 "Old Outdated OpenEMR Patches") to ensure you haven't customized any of these, since this will copy over this.**

### Installation instructions

#### Windows

Simply extract the zipped file into the openemr web directory, and say yes to copying over files

#### Linux

Move the patch file to the openemr web directory, then type 'unzip 3-2-0-Patch-8.zip', and confirm ok to copy over files.

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Bug fix for patient balance computation that was introduced in the previous patch\*\*
* Added ability to delete a payment or adjustment, and to reset statements-sent count
* Added sorting in fax script, so page displays order matches original document
* Fix in EOB in creating ar\_session entries
* Fix to prevent cross-scripting security vulnerability (involving the patient name). Thank you Andrew Moore.
* Improvements in demographic form validation.
* Fixed provider matching bug in encounter report.
* Fixed display of provider in Billing Report page.
* Fixed a minor syntax issue in the main database file.
* Can now edit patient insurance information in the new patient form. thank you Ed.
* Link to the new patient form has been added to the calendar scheduler pop-up. than you Visolve.
* CAMOS prescription now works even if no encounter is selected. thank you Kanwaljit Singh.
* Bug fix to not show html code in billing statements. thank you EHR Live.
* Bug fix in the number to text converter. thank you Andrew Moore.
* Bug fix in the language gui to avoid duplicate definitions
* Bug fix in the sl\_convert.php script
* Added the initial code for automated bug testing. thank you Andrew Moore.
* Several bug fixes in the formmaker script
* Several bug fixes in the language editor
* Added a customization log feature to the language editor (If you want this feature, more configuration is required; see **[HERE](/wiki/index.php/Configure_Language_Editor_Improvements_For_3.2 "Configure Language Editor Improvements For 3.2")** for instruction)
* Can filter by definitions in the language editor
* Other improvements to the language editor gui
* Imagemagick in custom reports supports Windows (see **[HERE](/wiki/index.php/FAQ#What_is_ImageMagick.3F "FAQ")** for more information)
* Support internationalization (utf8 characters) in patient search screen
* Bug fix to show dob and age in header when click encounter link in Billing->Fee screen
* Support use of apostrophes and quotes in the administration->language gui
* CAMOS support to clone justification billing codes
* CAMOS billing codes set to be authorized by default
* CAMOS form placeholders work in the reports
* Increased document upload size limit to 64MB (thank you penguin8r)
* Added option for HCFA text form output (thank you bo2999)
* Ensure a prescription drug name is entered in the prescription entry form (thank you dle5400)
* Fixed CAMOS form title bug in the patient custom reports, and modified so the CAMOS links will not be included when print these reports
* Added a date widget to the insurance effective date entry in the demographics page
* Fixed the insurance date widgets in the demographics page
* Fixed the date widget in the find appointment page (thank you mmfsystems)

### List of files (3.2)

```
contrib/forms/formmaker/formscript.pl
contrib/forms/formmaker/README
controllers/C_Document.class.php
custom/chart_tracker.php
interface/billing/billing_process.php
interface/billing/billing_report.php
interface/billing/sl_eob_invoice.php
interface/billing/sl_eob_process.php
interface/billing/sl_eob_search.php
interface/fax/fax_dispatch.php
interface/forms/CAMOS/content_parser.php
interface/forms/CAMOS/new.php
interface/forms/CAMOS/notegen.php
interface/forms/CAMOS/report.php
interface/forms/CAMOS/rx_print.php
interface/language/lang_constant.php
interface/language/lang_definition.php
interface/language/lang.info.html
interface/language/lang_language.php
interface/language/lang_manage.php
interface/language/language.inc.php
interface/language/language.php
interface/login/login.php
interface/main/authorizations/authorizations.php
interface/main/calendar/add_edit_event.php
interface/main/calendar/find_appt_popup.php
interface/main/calendar/find_patient_popup.php
interface/main/finder/patient_select.php
interface/new/new_comprehensive.php
interface/new/new_comprehensive_save.php
interface/patient_file/encounter/forms.php
interface/patient_file/front_payment.php
interface/patient_file/report/custom_report.php
interface/patient_file/summary/demographics.php
interface/patient_file/summary/demographics_full.php
interface/practice/ins_search.php
interface/reports/encounters_report.php
interface/reports/patient_list.php
library/api.inc
library/classes/NumberToText.class.php
library/forms.inc
library/gen_hcfa_1500.inc.php
library/invoice_summary.inc.php
library/options.inc.php
library/patient.inc
phpunit.xml
sl_convert.php
sql/database.sql
templates/document_categories/general_upload.html
templates/documents/general_upload.html
templates/prescription/general_list.html
Tests/NumberToTextTest.php
```
# 3.1.0 Patch (12/17/2009)

### Download link

[3-1-0-Patch-5.zip](http://sourceforge.net/tracker/download.php?group_id=60081&atid=493003&file_id=355629&aid=2916630)

### Description

This is the 5th patch, and it includes the fixes from previous patches. There are 50 files that are changed. **Please read through the list (bottom of page) to ensure you haven't customized any of these, since this will copy over this.**

### Installation instructions

#### Windows

Simply extract the zipped file into the openemr web directory, and say yes to copying over files

#### Linux

Move the patch file to the openemr web directory, then type 'unzip 3-1-0-Patch-5.zip', and confirm ok to copy over files.

### Fixes and New Features

(note the ones with \*\* are new with this patch):

* Internationalization of the CAMOS form module\*\*
* Fee sheet category bug fix\*\*
* Fixes involving escaping of data and avoiding sql-injection in user input\*\*
* The Backup feature now also works in Windows
* Cosmetic fixes to demographic and calendar display
* Fixes to the Restore script
* Fixes to sql-ledger migration script
* Layout data bug fixes
* Fixed some Report bugs
* Fixed https bug in admin->calendar screen
* allow switching of calendar style without needing to logout
* support clicking of time to open a new appointment in the outlook calendar
* optimize search ordering
* fix contrib/util/load\_icd\_desc.plx script to work with ICD website change
* internationalization bug fixes in calendar
* in charges screen, support unit numbers and clearing of values when save
* disable a debugging php log error
* fix the 'don't save' link in misc\_billing\_options form
* clear copay amount when saver in charges screen
* improve flow of authorizations screen
* support line breaks when print pnotes
* fix to support apostrophes in patient names
* fix to support UTF8 encoded patient names in calendar (bug only noted in Windows)

### List of files (3.1)

```
contrib/util/load_icd_desc.plx
contrib/util/restore
gacl/gacl.class.php
interface/forms/CAMOS/admin.php
interface/forms/CAMOS/ajax_save.php
interface/forms/CAMOS/content_parser.php
interface/forms/CAMOS/new.php
interface/forms/CAMOS/notegen.php
interface/forms/CAMOS/report.php
interface/forms/CAMOS/rx_print.php
interface/forms/CAMOS/save.php
interface/forms/CAMOS/view.php
interface/forms/fee_sheet/new.php
interface/forms/misc_billing_options/new.php
interface/forms/misc_billing_options/view.php
interface/main/authorizations/authorizations_full.php
interface/main/backup.php
interface/main/calendar/add_edit_event.php
interface/main/calendar/find_patient_popup.php
interface/main/calendar/includes/pnAPI.php
interface/main/calendar/modules/PostCalendar/pntemplates/default/user/ajax_search.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day/orig_default.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day_print/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/day_print/outlook_ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month_print/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/month_print/outlook_ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week_print/ajax_template.html
interface/main/calendar/modules/PostCalendar/pntemplates/default/views/week_print/outlook_ajax_template.html
interface/main/calendar/modules/PostCalendar/pnuser.php
interface/main/finder/patient_select.php
interface/patient_file/deleter.php
interface/patient_file/encounter/copay.php
interface/patient_file/encounter/other.php
interface/patient_file/summary/demographics_save.php
interface/patient_file/summary/pnotes_print.php
interface/reports/collections_report.php
interface/reports/inventory_list.php
interface/reports/services_by_category.php
interface/super/edit_layout.php
interface/themes/style_sky_blue.css
interface/usergroup/addrbook_edit.php
interface/usergroup/addrbook_list.php
interface/usergroup/user_admin.php
library/formdata.inc.php
library/options.inc.php
library/patient.inc
sl_convert.php
```

Retrieved from "<https://www.open-emr.org/wiki/index.php?title=Old_Outdated_OpenEMR_Patches&oldid=35041>"

[Category](/wiki/index.php/Special%3ACategories "Special:Categories"):

* [Patch](/wiki/index.php/Category%3APatch "Category:Patch")

## Navigation menu

[# OpenEMR Project Wiki](/wiki/index.php/OpenEMR_Wiki_Home_Page)

### Search

### Personal tools

* [Log in](/wiki/index.php?title=Special:UserLogin&returnto=Old+Outdated+OpenEMR+Patches "You are encouraged to log in; however, it is not mandatory [o]")

### Namespaces

* [Page](/wiki/index.php/Old_Outdated_OpenEMR_Patches "View the content page [c]")
* [Discussion](/wiki/index.php?title=Talk:Old_Outdated_OpenEMR_Patches&action=edit&redlink=1 "Discussion about the content page (page does not exist) [t]")

### Variants

### Views

* [View](/wiki/index.php/Old_Outdated_OpenEMR_Patches)
* [View source](/wiki/index.php?title=Old_Outdated_OpenEMR_Patches&action=edit "This page is protected.
  You can view its source [e]")
* [History](/wiki/index.php?title=Old_Outdated_OpenEMR_Patches&action=history "Past revisions of this page [h]")

### More

### wiki navigation

* [Main wiki page](/wiki/index.php/OpenEMR_Wiki_Home_Page)
* [Categories](/wiki/index.php/Special%3ACategories)
* [Recent changes](/wiki/index.php/Special%3ARecentChanges "A list of recent changes in the wiki [r]")
* [Random page](/wiki/index.php/Special%3ARandom "Load a random page [x]")
* [Help](https://www.mediawiki.org/wiki/Special%3AMyLanguage/Help%3AContents "The place to find out")

### Tools

* [What links here](/wiki/index.php/Special%3AWhatLinksHere/Old_Outdated_OpenEMR_Patches "A list of all wiki pages that link here [j]")
* [Related changes](/wiki/index.php/Special%3ARecentChangesLinked/Old_Outdated_OpenEMR_Patches "Recent changes in pages linked from this page [k]")
* [Special pages](/wiki/index.php/Special%3ASpecialPages "A list of all special pages [q]")
* Printable version
* [Permanent link](/wiki/index.php?title=Old_Outdated_OpenEMR_Patches&oldid=35041 "Permanent link to this revision of the page")
* [Page information](/wiki/index.php?title=Old_Outdated_OpenEMR_Patches&action=info "More information about this page")

* [![GNU Free Documentation License 1.3](/wiki/resources/assets/licenses/gnu-fdl.png)](http://www.gnu.org/copyleft/fdl.html)
* [![Powered by MediaWiki](/wiki/resources/assets/poweredby_mediawiki_88x31.png)](https://www.mediawiki.org/)

* This page was last edited on 16 November 2023, at 07:36.
* Content is available under [GNU Free Documentation License 1.3](http://www.gnu.org/copyleft/fdl.html) unless otherwise noted.

* [Privacy policy](/wiki/index.php/OpenEMR_Project_Wiki%3APrivacy_policy "OpenEMR Project Wiki:Privacy policy")
* [About OpenEMR Project Wiki](/wiki/index.php/OpenEMR_Project_Wiki%3AAbout "OpenEMR Project Wiki:About")
* [Disclaimers](/wiki/index.php/OpenEMR_Project_Wiki%3AGeneral_disclaimer "OpenEMR Project Wiki:General disclaimer")



=== Content from blog.sonarsource.com_e87aea8d_20250114_183147.html ===
NEW![Sonar has entered a definitive agreement to acquire Tidelift! Read the press release.](/company/press-releases/sonar-to-acquire-tidelift/) [![](data:image/svg+xml;charset=utf-8...)![sonar logo ](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/8e59bcad-6e39-41dc-abd9-a0e251e8d63f/Sonar%20%282%29.svg?w=128&h=32&auto=format&fit=clip)![sonar logo ](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/8e59bcad-6e39-41dc-abd9-a0e251e8d63f/Sonar%20%282%29.svg?w=128&h=32&auto=format&fit=clip)](/ "Home")

* Solutions

  Use Cases

  [AI-assisted & quality-assured codeEnsure code generated by AI assistants is of the highest quality](/solutions/ai/)[DevOps transformationHarness the full potential of DevOps by reducing roll backs and improving quality of releases](/solutions/devops-transformation/)[Code coverageEnsure code quality and security by facilitating faster debugging through clear visibility of coverage gaps.](/solutions/code-coverage/) [Reduce & manage technical debtMaximize innovation by proactively managing technical debt](/solutions/reduce-technical-debt/)[Secure by designIntegrate code security in compliance with NIST Secure Software Development Framework](/solutions/secure-by-design-code/)[All Use CasesRead more about Sonar Use cases with blog articles, technical articles and developer guides](/solutions/use-cases/)

  Clean Code

  [What is clean codeA detailed definition of Clean Code](/solutions/clean-code/)[Power of clean codeBusiness success built on Clean Code](/solutions/power-of-clean-code/)[Security starts with Clean CodeStatic Application Security Testing with Sonar](/solutions/security/)[Clean as You CodeOur unique approach to Clean Code](/solutions/our-unique-approach/)

  Something For Everyone

  [For DevelopersFind and fix issues as you code](/solutions/for-developers/)[For DevOpsBuild your apps on Clean Code foundations](/solutions/infrastructure-as-code/)[For EnterpriseClean Code delivery from development to production](/solutions/for-enterprise/)[For the Public SectorClean Code for the public sector](/solutions/public-sector/)
* Products

  Industry Leading Products

  [![]()![](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/aa3b1f02-f1b0-448f-a3f2-a1bd32923a08/SQ_Logo_Cloud_Light%20Backgrounds.svg?w=176&h=48&auto=format&fit=crop)Formerly SonarCloudCloud-based static analysis tool for your CI/CD workflows](/products/sonarcloud/)[![]()![](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/bdac1871-464e-4051-88db-7df20c3bfffa/SQ_Logo_Server_Light%20Backgrounds.svg?w=176&h=48&auto=format&fit=crop)Formerly SonarQubeSelf-managed static analysis tool for continuous codebase inspection](/products/sonarqube/)[![]()![](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/49f23af2-a29b-4d0f-95d7-ffd361f375e1/SQ_Logo_IDE_Light%20Backgrounds.svg?w=176&h=48&auto=format&fit=crop)Formerly SonarLintFree IDE extension that provides on-the-fly analysis and coding guidance](/products/sonarlint/)

  Languages and Frameworks

  [Java](/knowledge/languages/java/)[JavaScript](/knowledge/languages/js/)[TypeScript](/knowledge/languages/ts/)[Python](/knowledge/languages/python/)[C#](/knowledge/languages/csharp/)[C++](/knowledge/languages/cpp/)[C](/knowledge/languages/c/)[PHP](/knowledge/languages/php/)[Kotlin](/knowledge/languages/kotlin/)[See All](/lp/knowledge/languages/)
* Resources

  Learn About Clean Code

  [BlogStay connected with our latest development news and articles](/blog/)[Events hubLet's meet up online or in person - browse our conferences and webinars, or watch previous talks](/resources/events/)[Customer StoriesCheck out Sonar implementation success stories](/resources/customer-stories/)[White PapersFind in-depth articles on clean code](/resources/white-papers/)[LearnDeveloper learning hub - covering essential topics](/learn/)[Solution BriefsOur library of solution briefs](/resources/solution-briefs/)

  Go In Depth

  [SonarQube Server DocumentationFind more information on the technical details of SonarQube Server](https://docs.sonarsource.com/sonarqube/latest/)[SonarQube Cloud DocumentationFind more information on the technical details of SonarQube Cloud](https://docs.sonarsource.com/sonarcloud/)[SonarQube for IDE DocumentationFind more information on the technical details of SonarQube IDE](https://docs.sonarsource.com/sonarlint/)[Explore SonarpediaExplore our publicly available multi-language rules database](https://rules.sonarsource.com/)[LanguagesSee our multi-language coverage](/knowledge/languages/)
* Company

  Deliver Better Software

  [About UsSonars industry leading solution enables developers to write clean code and remediate existing code organically](/company/about/)[CareersJoin our growing team](/company/careers/)[Commitment to open sourceOur commitment to transparency, security, and continuous improvement](/solutions/commitment-to-open-source/)[CommunityGet latest updates, suggest features, and share your knowledge](https://community.sonarsource.com/)[PartnersSonar partners with the best resellers to bring Clean Code closer to you](/company/partners/)[Contact usHave questions? Get in touch](/company/contact/)

  Media

  [NewsroomNews announcements, media coverage, and more](/company/newsroom/)[CoverageFind articles about Sonar in the news](/company/coverage/)[Press ReleasesThe latest Sonar updates](/company/press-releases/)[CustomersAn overview of customers using Sonar by industry](/company/customers/)[Press KitExecutive headshots, quick stats, customer logos, and more](/company/press-kit/)
[Start for free](/open-source-editions/)[Explore pricing](/plans-and-pricing/)
Search modal toggle button[Start for free](/open-source-editions/)[Explore pricing](/plans-and-pricing/)Mobile menu toggle button

Blog post

# Code vulnerabilities put health records at risk

![](data:image/svg+xml;charset=utf-8...)![Dennis Brinkrolf photo]()![Dennis Brinkrolf photo](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/4e33a3d4-6781-4fe3-aaa3-0ec178d00386/d118d723-bccb-4102-9d5c-ccf1a2a99e5f_dennis_brinkrolf.png?w=400&h=400&auto=format&fit=crop)

Dennis Brinkrolf

Security Researcher

October 28, 2020

Date

* [Security](/blog/tag/security/)
![](data:image/svg+xml;charset=utf-8...)![OpenEMR is the most popular open source software for electronic health record and medical practice management. It is used world-wide to manage sensitive patient data, including informatio...](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/c0d98af7-6fcf-4743-b562-af6b7a610cab/cover-92be9e22-afe0-4a95-a91d-f479e8a89281_hero%2Brisk.png?w=1200&h=600&auto=format&fit=crop)![OpenEMR is the most popular open source software for electronic health record and medical practice management. It is used world-wide to manage sensitive patient data, including informatio...](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/c0d98af7-6fcf-4743-b562-af6b7a610cab/cover-92be9e22-afe0-4a95-a91d-f479e8a89281_hero%2Brisk.png?w=1200&h=600&auto=format&fit=crop)

OpenEMR is the most popular open source software for electronic health record and medical practice management. It is used world-wide to manage sensitive patient data, including information about medications, laboratory values, and diseases. Patients use OpenEMR to schedule appointments, communicate with physicians, and pay online invoices. Specifically in these tumultuous times of an ongoing pandemic, this is highly sensitive data and protecting it is a concern for everyone, and particularly in the U.S.. Companies in America are required to protect individually identifiable and electronic health information by the Health Insurance Portability and Accountability Act (HIPAA).

During our security research of popular web applications, we discovered several code vulnerabilities in OpenEMR 5.0.2.1. A combination of these vulnerabilities allowed remote attackers to execute arbitrary system commands on any OpenEMR server that uses the Patient Portal component. This can lead to the compromise of sensitive patient data, or worse, to a compromise of critical infrastructure.

In this blog post we analyze the technical root cause of three vulnerabilities and demonstrate how attackers could have built a chain for exploitation. We reported all issues responsibly to the affected vendor who rated the fixes as critical and released a[security patch](https://www.open-emr.org/wiki/index.php/OpenEMR_Patches "security patch")in August immediately to protect all users.

## Impact

During the analysis of OpenEMR 5.0.2.1 we found the following code vulnerabilities:

1. Command Injection (admin privileges) (CVE-2020-36243)
2. Persistent XSS (admin privileges) (CVE-2021-32103)
3. Insecure API permissions (unauthenticated) (CVE-2021-32101)
4. SQL Injection (user privileges) (CVE-2021-32102, CVE-2021-32104)

The vulnerabilities impact OpenEMR's Patient Portal that needs to be active and accessible for online patients. A remote attacker can then insert a malicious JavaScript payload (XSS) into any user account. This works even when the portal's registration feature for new users is disabled.

Depending on the privilege role of the victim, further vulnerabilities in the backend can be exploited when a victims browser executes the XSS payload unconsciously. For example, if the victim is an administrator, the attacker can take over the entire server via a Command Injection vulnerability that allows to execute OS system commands. Other, lower privileged user sessions can be misused to exploit SQL injection vulnerabilities that enable to steal patient data from the database.

For demonstration purposes weve created a short video that shows how quick and easy a server is compromised.

## Technical Analysis

In the following section, we dive into three of the code vulnerabilities we found in OpenEMR. These can be combined by an attacker to gain pre-auth command execution in the Patient Portal of OpenEMR 5.0.2.1 when targeting an administrator user.

### 1. Command Injection Vulnerability (CVE-2020-36243)

The most critical vulnerability hides in the backend of OpenEMR. Here, administrators can use a feature to create data backups. For this purpose, different SQL queries are constructed dynamically that are later executed**as system commands**when creating the backup file. The following (simplified) code shows the critical code where these system commands are created depending on the operating system (OS).

**interface/main/backup.php**

```
 5   foreach ($_POST['form_sel_layouts'] as $layoutid) {
 6      if (IS_WINDOWS) {
 8         $cmd .= " echo DELETE FROM layout_options WHERE form_id = '" .
                           add_escape_custom($layoutid) . "'; >> " .
                           escapeshellarg($EXPORT_FILE) . " & ";
 9      }
10      else {
11         $cmd .= "echo \"DELETE FROM layout_options WHERE form_id = '" .
                           add_escape_custom($layoutid) . "';\" >> " .
                           escapeshellarg($EXPORT_FILE) . ";";
12      }
13   }
14
15   exec($cmd);
```

In line 5, the values in the HTTP POST parameter`form_sel_layouts`are received and used as`$layoutid`variables. Then these values are concatenated into an OS command`$cmd`in line 11.

As we can see here, the user-controlled input`$layoutid`is sanitized with the help of the function`add_escape_custom()`. This custom function is defined in the OpenEMR code base and makes use of the PHP built-in function`mysqli_real_escape_string()`that is known to protect against SQL injection vulnerabilities. Finally, the concatenated OS command string is executed in line 19. At first sight, it looks like the developers carefully sanitized all user inputs.

To understand why the sanitization is not sufficient in this code we need to understand how commands are executed. When we look at the final value of the variable`$cmd`in line 15, the shell command looks like the following at runtime:

```
echo "DELETE FROM layout_options WHERE form_id = '$layoutid';" >> /tmp/export;
```

Here, the variable`$layoutid`contains a user-controlled value. But why does the`add_escape_custom()`function not fully protect against a Command Injection vulnerability?

Lets assume the attacker sends the following payload:

```
?form_sel_layouts[]='sonar";source
```

This would result in the following shell command:

```
echo "DELETE FROM layout_options WHERE form_id = ' \'sonar\";source';" >> /tmp/export;
```

As we can see, the quotes are escaped and an attacker cannot break out of the single quotes`'`. A SQL injection is successfully prevented. Double quotes`"`are also escaped by`mysqli_real_escape_string()`and we are not breaking out of the`echo`command either. However, there is another way to exploit a Command Injection vulnerability.

An attacker can send the following payload:

```
?form_sel_layouts[]=`touch sonarsource.txt;`
```

Note the backtick characters````in our payload. This would end up in the shell command like this:

```
echo "DELETE FROM layout_options WHERE form_id = '`touch sonarsource.txt;`';" >> /tmp/export;
```

The problem here is that the`echo`shell command uses double quotes and thus allows to execute sub commands in Linux by using characters like backticks````or`$()`. Once our backticks are found within the system command, our new, injected command is executed and the output result is inserted into the initial command. From here, an attacker can fully compromise the system and read sensitive data.

**Patch**

It is tempting to use the PHP built-in function`escapeshellarg()`as a patch since it is designed to escape all malicious characters needed for a Command Injection attack. However, in this case this function would introduce a SQL injection vulnerability instead because`escapeshellarg()`introduces new single quotes. These single quotes would break the SQL query and probably that is the reason why it was not used here in the first place.

As a solution to protect against both vulnerability types, it is enough to simply swap the single and double quotes.

```
echo 'DELETE FROM layout_options WHERE form_id = "$layoutid";' >> /tmp/export;
```

A SQL injection vulnerability is then still prevented because the double quote`"`characters are escaped. More importantly,*command substitution*can no longer be opened because now the argument of`echo`is in single quotes`'`, which don't allow sub commands.

### 2. Persistent Cross-Site Scripting Vulnerability (CVE-2021-32103)

So far an attacker can only trigger the Command Injection vulnerability manually if he or she logs in as an admin. With the help of another code vulnerability, the attack can be carried out with the help of a valid administrator that triggers the exploitation unknowingly. We discovered a Persistent Cross-Site Scripting vulnerability that enables this kind of attack.

The attackers payload is hidden within the last name of a user account. This last name can be changed in line 4 of the following code. Note that this action can only be performed by an administrator (we will come back to this in the next section).

**interface/usergroup/usergroup\_admin.php**

```
1   if (isset($_POST["privatemode"]) && $_POST["privatemode"] =="user_admin") {
2      if ($_POST["mode"] == "update") {
3         if ($_POST["lname"]) {
4            sqlStatement("update users set lname=? where id= ? ", array($_POST["lname"], $_POST["id"]));
5         }
6      }
7   }
```

The new last name is stored permanently in the database table*users*. At a different code location, this name is read from the database again to present it in the frontend. This happens, for example, when an administrator changes the password of the renamed user.

**interface/usergroup/user\_info.php**

```
2   $userid = $_SESSION['authId'];
3   $user_name = getUserIDInfo($userid);
4   $user_full_name = $user_name['fname'] . " " . $user_name['lname'];
5   ?>
6   <legend><?php echo xlt('Change Password for') . " " . $user_full_name; ?></legend>
```

Here, in line 6, the user name is embedded into the HTML output without any sanitization.

This allows injection of malicious HTML code into the response page that will be rendered by the administrators browser. When`<script>`tags are injected into the last name, then malicious JavaScript code can be executed that will be able to control the victim's browser and its further activities. For example, it can be used to trigger the previously introduced Command Injection vulnerability that only an administrator can execute (Cross-Site Scripting).

**Patch**

This vulnerability can be easily prevented by using the popular PHP function`htmlspecialchars()`in line 6. It encodes special HTML characters into HTML entities (e.g.`<`into`&lt;`) and thus prevents that malicious JavaScript code can be embedded into the name.

```
echo htmlspecialchars($user_full_name, ENT_QUOTES);
```
### 3. Insecure API Permissions (CVE-2021-32101)

So far, we have learned about a Command Injection vulnerability that can be triggered by an administrator. And weve learned about a persistent XSS vulnerability that can also be used to trigger the Command Injection from a victim. However, to plant the XSS payload we again need administrator privileges. As long as the administrator itself, who has access to all data anyway, is not malicious there should be no risk - right? This is true, as long as the permission system is secure.

In OpenEMR, the Patient Portal has its own API interface to control all portal actions, for example for editing a user account. This API uses the*Phreeze*framework as a dispatcher that forwards requests to the respective component. Before this dispatcher is executed, the authentication is verified in the following include file.

**portal/patient/\_machine\_config.php**

```
3   OpenEMR\Common\Session\SessionUtil::portalSessionStart();
4   if (isset($_SESSION['pid'])
    && (isset($_SESSION['patient_portal_onsite_two'])
    || $_SESSION['register'] === true)) {
5   	$pid = $_SESSION['pid'];
6   	$ignoreAuth = true;
7   } else {
8   	$ignoreAuth = false;
9   	}
10   }
```

It creates a new session and checks in line 4 if the user is already on the portal page or whether she is currently trying to register. In this case, the authentication check is deactivated in line 6 (`$ignoreAuth = true`). Otherwise, the authentication check is active and the user has to authenticate.

Let's have a look at how the registration works in the Patient Portal. In the following code you can see the simplified*register.php*. In lines 4-6, the interesting session variables are set that indicate that we are within a new registration process.

**portal/account/register.php**

```
4   OpenEMR\Common\Session\SessionUtil::portalSessionStart();
5   $_SESSION['authUser'] = 'portal-user';
6   $_SESSION['pid'] = true;
7   $_SESSION['register'] = true;
```

No further checks are made and the session variable is not destroyed at the end of the file. An attacker could therefore make the first HTTP request to*register.php*which creates a session and sets the session variable`$_SESSION['register']`to*true*. Then, without completing the registration, the attacker can access the dispatcher and bypass the authentication because`$ignoreAuth`is set to*true*.

Once the authentication is bypassed, it is possible to use all features of the API as a*registered*Patient Portal user. This means an attacker can access all patient data or change the email address and passwords of the patients even if registration to the Patient Portal is closed.

Of special interest is the user controller of the API which can be used to change information of any backend user like the administrator. The attacker can now take advantage of the previously introduced Persistent XSS vulnerability by adding an XSS payload to the last name of the admin user. This XSS payload can then execute JavaScript code that exploits the Command Injection vulnerability. Ultimately, all three vulnerabilities are combined and lead to a pre-auth Command Execution in OpenEMR 5.0.2.1.

## Timeline

| **Date** | **What** |
| --- | --- |
| 24.02.2020 | We reported the vulnerabilities to the OpenEMR team |
| 29.04.2020 | OpenEMR team addresses the first vulnerabilities with a patch |
| 11.08.2020 | OpenEMR team releases another security patch |

## Summary

In this blog post we analyzed three code vulnerabilities found in OpenEMR, a widely adopted open source solution for electronic health records. The combination of these vulnerabilities can lead to a complete takeover of the OpenEMR application and put patient data as well as the infrastructure at risk. Weve evaluated the root causes in the PHP code base and described how to fix them. Due to the severity of the issues, we postponed the release of these details for several months. If you are hosting an OpenEMR instance and have not yet updated your installation, we highly recommend that you do so now. Last but not least, we would like to thank the OpenEMR team who quickly released a patch version 5.0.2.2 after our reports.

Please stay healthy and secure!

*You can join the discussion about this vulnerability in*[*our community forum*](https://community.sonarsource.com/t/openemr-5-0-2-1-command-injection-vulnerability-puts-health-records-at-risk/33592 "our community forum")*.*

#### SHARE

[twitter](https://twitter.com/share?text=undefined)[facebook](https://www.facebook.com/sharer/sharer.php?u=undefined)[linkedin](https://www.linkedin.com/sharing/share-offsite/?url=undefined)mail[Go to SonarSource homepage![](data:image/svg+xml;charset=utf-8...)![sonar logo ]()![sonar logo ](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/8e59bcad-6e39-41dc-abd9-a0e251e8d63f/Sonar%20%282%29.svg?w=160&h=40&auto=format&fit=crop)](/)

* **Sonar Solutions**
  + [SAST](/solutions/security/)
  + [What is clean code](/solutions/clean-code/)
  + [Power of clean code](/solutions/power-of-clean-code/)
  + [Clean as you code](/solutions/our-unique-approach/)
  + [AI-assisted & quality-assured code](/solutions/ai/)
  + [DevOps transformation](/solutions/devops-transformation/)
  + [Outsourcing software development](/solutions/reduce-outsourcing-software-development-risk/)
  + [Reduce & manage technical debt](/solutions/reduce-technical-debt/)
  + [Secure by design](/solutions/secure-by-design-code/)
  + [Code coverage](/solutions/code-coverage/)
  + [Code review](/solutions/code-review/)
  + [For developers](/solutions/for-developers/)
  + [For enterprise](/solutions/for-enterprise/)
  + [Infrastructure as code](/solutions/infrastructure-as-code/)
  + [Public sector](/solutions/public-sector/)
* **Products**
  + [SonarQube for IDE](/products/sonarlint/)
  + [SonarQube Server](/products/sonarqube/)
  + [SonarQube Cloud](/products/sonarcloud/)**Pricing**
  + [Start for free](/open-source-editions/)
  + [Explore pricing](/plans-and-pricing/)
* **Company**
  + [About](/company/about/)
  + [Careers](/company/careers/)
  + [Commitment to open source](/solutions/commitment-to-open-source/)
  + [Customers](/company/customers/)
  + [Partners](/company/partners/)
  + [Contact us](/company/contact/)
  + [Accessibility](/accessibility/)
  + [NEW! Brand identity](/brand-identity/)**Media**
  + [Coverage](/company/coverage/)
  + [Press releases](/company/press-releases/)
* **Resources**
  + [Events hub](/resources/events/)
  + [Customer stories](/resources/customer-stories/)
  + [White papers](/resources/white-papers/)
  + [Learn](/learn/guide/)
  + [Community](https://community.sonarsource.com/)
  + [Support](/support/)
* **Knowledge**
  + [Explore Sonarpedia](https://rules.sonarsource.com/)
  + [Blog](/blog/)
  + [Languages](/knowledge/languages/)
  + [SonarQube Server Documentation](https://docs.sonarsource.com/sonarqube/latest/)
  + [SonarQube Cloud Documentation](https://docs.sonarsource.com/sonarcloud/)
  + [SonarQube for IDE Documentation](https://docs.sonarsource.com/sonarlint/)

* [Legal documentation](/legal/)
* [Trust center](/trust-center/)

* [Follow SonarSource on Twitter](https://twitter.com/sonarsource)
* [Follow SonarSource on Linkedin](https://www.linkedin.com/company/sonarsource/)

 2008-2025 SonarSource SA. All rights reserved. SONAR, SONARSOURCE, SONARQUBE, and CLEAN AS YOU CODE are trademarks of SonarSource SA.



=== Content from portswigger.net_21fa9588_20250114_183148.html ===


[![The Daily Swig](/content/images/banners/the-daily-swig-logo.svg)](/daily-swig)

Latest threats

Bug bounty

For devs

Deep dives

More

[About](https://portswigger.net/daily-swig/about)
[Web security vulnerabilities](https://portswigger.net/daily-swig/vulnerabilities)
[Network security vulnerabilities](https://portswigger.net/daily-swig/network-security)
[Cloud security](https://portswigger.net/daily-swig/cloud-security)
[Zero-day news](https://portswigger.net/daily-swig/zero-day)
[Supply chain attacks](https://portswigger.net/daily-swig/supply-chain-attacks)

[View all web security news](https://portswigger.net/daily-swig/vulnerabilities)

[**Prototype pollution**

Prototype pollution project yields another Parse Server RCE

![Prototype-pollution](/daily-swig-mega-nav/images/latestthreats.png)](https://portswigger.net/daily-swig/prototype-pollution-project-yields-another-parse-server-rce)

[Bug bounty news](https://portswigger.net/daily-swig/bug-bounty)
[VDPs](https://portswigger.net/daily-swig/vdp)
[Bug Bounty Radar](https://portswigger.net/daily-swig/bug-bounty-radar)

[View all bug bounty news](https://portswigger.net/daily-swig/bug-bounty)

[**Bug Bounty Radar**

The latest programs for February 2023

![Bug bounties](/daily-swig-mega-nav/images/bug-bounties.png)](https://portswigger.net/daily-swig/bug-bounty-radar-the-latest-bug-bounty-programs-for-february-2023)

[DevSecOps](https://portswigger.net/daily-swig/devsecops)
[Security best practices](https://portswigger.net/daily-swig/security-best-practices)
[Dev stack tech](https://portswigger.net/daily-swig/dev-stack-tech)

[View all dev related news](https://portswigger.net/daily-swig/devsecops)

[**All Day DevOps**

AppSec engineer keynote says Log4j revealed lessons were not learned from the Equifax breach

![DevOps](/daily-swig-mega-nav/images/devsecops.png)](https://portswigger.net/daily-swig/all-day-devops-third-of-log4j-downloads-still-pull-vulnerable-version-despite-threat-of-supply-chain-attacks)

[Deep dives](https://portswigger.net/daily-swig/deep-dives)
[Interviews](https://portswigger.net/daily-swig/interviews)

[View all of the latest features](https://portswigger.net/daily-swig/deep-dives)

[**Infosec beginner?**

A rough guide to launching a career in cybersecurity

![cyber-career](/daily-swig-mega-nav/images/deepdives.png)](https://portswigger.net/daily-swig/a-rough-guide-to-launching-a-career-in-cybersecurity)

[Industry news](https://portswigger.net/daily-swig/industry-news)
[Enterprise security news](https://portswigger.net/daily-swig/enterprise)
[Web hacking tools](https://portswigger.net/daily-swig/hacking-tools)
[Events](https://portswigger.net/daily-swig/events)

[View all infosec industry news](https://portswigger.net/daily-swig/industry-news)

[**Cybersecurity conferences**

A schedule of events in 2022 and beyond

![More topics](/daily-swig-mega-nav/images/more-topics.jpg)](https://portswigger.net/daily-swig/cybersecurity-conferences-a-rundown-of-online-in-person-and-hybrid-events)

# Healthcare security: OpenEMR fixes serious flaws that lead to command execution in patient portal

[Adam Bannister](/daily-swig/by/adam-bannister)
02 November 2020 at 16:34 UTC

Updated: 05 November 2020 at 12:50 UTC

[Healthcare](/daily-swig/healthcare)
[Vulnerabilities](/daily-swig/vulnerabilities)
[XSS](/daily-swig/xss)

[Twitter](https://twitter.com/share?url=https%3a%2f%2fportswigger.net%2fdaily-swig%2fhealthcare-security-openemr-fixes-serious-flaws-that-lead-to-command-execution-in-patient-portal&text=Healthcare+security%3a+OpenEMR+fixes+serious+flaws+that+lead+to+command+execution+in+patient+portal+%7c+The+Daily+Swig%0A)
[WhatsApp](https://api.whatsapp.com/send?text=https%3a%2f%2fportswigger.net%2fdaily-swig%2fhealthcare-security-openemr-fixes-serious-flaws-that-lead-to-command-execution-in-patient-portal)
[Facebook](https://www.facebook.com/sharer.php?u=https%3a%2f%2fportswigger.net%2fdaily-swig%2fhealthcare-security-openemr-fixes-serious-flaws-that-lead-to-command-execution-in-patient-portal)
[Reddit](https://reddit.com/submit?url=https%3a%2f%2fportswigger.net%2fdaily-swig%2fhealthcare-security-openemr-fixes-serious-flaws-that-lead-to-command-execution-in-patient-portal)
[LinkedIn](https://www.linkedin.com/sharing/share-offsite?url=https%3a%2f%2fportswigger.net%2fdaily-swig%2fhealthcare-security-openemr-fixes-serious-flaws-that-lead-to-command-execution-in-patient-portal)
Email

Chained together, the flaws could imperil sensitive patient data and critical medical infrastructure

![OpenEMR fixes serious flaws that lead to command execution in Patient Portal](/cms/images/47/a6/60b6-article-201102-open-emr-body-text.jpg "OpenEMR logo via open-emr.org // Image credit: Sergei Domashenko / Shutterstock / PortSwigger Ltd")

Healthcare providers are urged to update their OpenEMR instances after the discovery of vulnerabilities that could surrender control of the medical practice management application to attackers.

Security researchers achieved unauthenticated command execution on OpenEMR servers thanks to a stored [cross-site scripting](https://portswigger.net/daily-swig/xss) ([XSS](/web-security/cross-site-scripting)) flaw in the open source platforms Patient Portal, itself unauthenticated courtesy of insecure permissions in the API.

A malicious [JavaScript](https://portswigger.net/daily-swig/JavaScript) payload could be injected into any user account even when the registration feature for new patients was disabled.

Doing so against an administrator account enabled attackers to take over the entire server, said Dennis Brinkrolf, security researcher at Swiss cybersecurity vendor SonarSource, in a [blog post](https://blog.sonarsource.com/openemr-5-0-2-1-command-injection-vulnerability). This is demonstrated in the video below.

Other, lower privileged user sessions can be misused to exploit an [SQL injection](/web-security/sql-injection) vulnerability also found by the researchers and steal patient data from the database.

The researchers praised the OpenEMR maintainers for rapidly patching the bugs.

OpenEMR says its [PHP](https://portswigger.net/daily-swig/php)-based software is used by around 100,000 medical providers worldwide.

The Patient Portal, which is downloaded more than 5,000 times per month, is used by patients to access their medical records, book appointments, conduct virtual consultations, and pay medical bills.

### Command injection

The [command injection](/web-security/os-command-injection) flaw was found in a feature for creating data backups.

The malicious payload ?form\_sel\_layouts[]=`touch sonarsource.txt;` resulted in backtick characters materializing in the shell command:

echo "DELETE FROM layout\_options WHERE form\_id = '`touch sonarsource.txt;`';" >> /tmp/export;

The problem here is that the echo shell command uses double quotes and thus allows [attackers] to execute sub commands in Linux by using characters like backticks `` or $(), said Brinkrolf.

Once our backticks are found within the system command, our new, injected command is executed and the output result is inserted into the initial command.

### Persistent XSS

Attackers could inject a persistent XSS payload within the last name of an administrator account, which is then read from the user [database](https://portswigger.net/daily-swig/database-security) and presented in the front end if, for example, the user changes their password.

Embedded into the HTML output without sanitization, the corrupted username then allows the insertion of malicious HTML code into the response page rendered by the administrators browser.

When <script> tags are injected into the last name, malicious JavaScript code can be executed that gives the attacker control of the victims [browser](https://portswigger.net/daily-swig/browsers).

RELATED [Aetna agrees million-dollar settlement after healthcare data breaches violate HIPAA rules](https://portswigger.net/daily-swig/aetna-agrees-million-dollar-settlement-after-healthcare-data-breaches-violate-hipaa-rules)

### Insecure API permissions

Insecure API permissions surfaced during the new user registration process. Because the session variable is not destroyed at the end of the file an attacker could make the first HTTP request to register.php which creates a session and sets the session variable $\_SESSION['register'] to true, explained Brinkrolf.

Then, without completing the registration, the attacker can access the dispatcher and bypass the authentication because $ignoreAuth is set to true.

The exploit is not difficult to pull off, Johannes Dahse, head of R&D at SonarSource, told The Daily Swig.

It can take some time for the attacker to succeed though, since the attacker must wait for the user to log in and trigger the payload.

Once achieved, however, this could lead to the extraction or even modification of highly sensitive patient data.

Brinkrolf included ways that developers might patch the flaws in the blog post to help other developers learn how to write secure code, added Dahse.

### Remediation

The four security flaws were found in OpenEMR 5.0.2.1.

Dahse said SonarSource reported the vulnerabilities to OpenEMR on Februrary 24, and the OpenEMR team released a [patch](https://community.open-emr.org/t/openemr-5-0-2-patch/13007/13) for the vulnerabilities on April 29.

OpenEMR released [version 5.0.2](https://www.open-emr.org/wiki/index.php/OpenEMR_Patches) on August 11.

Robert Down, chief operations officer at the OpenEMR Foundation, thanked SonarSource for uncovering the vulnerabilities.

OpenEMR is proud of our relationship with the security community and remains steadfast in our commitment to addressing any critical security vulnerabilities identified, he told The Daily Swig.

While no software is completely free of [vulnerabilities](https://portswigger.net/daily-swig/vulnerabilities), as an open source product, OpenEMR is well positioned to best identify and correct potential issues.

YOU MIGHT ALSO LIKE [Finnish mental health patients blackmailed after suspected data breach](https://portswigger.net/daily-swig/finnish-mental-health-patients-blackmailed-after-suspected-data-breach)

[Healthcare](/daily-swig/healthcare)
[Vulnerabilities](/daily-swig/vulnerabilities)
[XSS](/daily-swig/xss)
[Privacy](/daily-swig/privacy)
[SQL Injection](/daily-swig/sql-injection)
[Hacking Techniques](/daily-swig/hacking-techniques)
[Hacking News](/daily-swig/hacking-news)
[Browsers](/daily-swig/browsers)
[Database Security](/daily-swig/database-security)
[Network Security](/daily-swig/network-security)
[Open Source Software](/daily-swig/open-source-software)
[PHP](/daily-swig/php)
[JavaScript](/daily-swig/javascript)
[Authentication](/daily-swig/authentication)
[Organizations](/daily-swig/organizations)
[Critical Infrastructure](/daily-swig/critical-infrastructure)
[Industry News](/daily-swig/industry-news)
[Switzerland](/daily-swig/switzerland)
[Research](/daily-swig/research)

![Adam Bannister](/cms/profiles/adam-bannister.png)
[Twitter](https://twitter.com/share?url=https%3a%2f%2fportswigger.net%2fdaily-swig%2fhealthcare-security-openemr-fixes-serious-flaws-that-lead-to-command-execution-in-patient-portal&text=Healthcare+security%3a+OpenEMR+fixes+serious+flaws+that+lead+to+command+execution+in+patient+portal+%7c+The+Daily+Swig%0A)
[WhatsApp](https://api.whatsapp.com/send?text=https%3a%2f%2fportswigger.net%2fdaily-swig%2fhealthcare-security-openemr-fixes-serious-flaws-that-lead-to-command-execution-in-patient-portal)
[Facebook](https://www.facebook.com/sharer.php?u=https%3a%2f%2fportswigger.net%2fdaily-swig%2fhealthcare-security-openemr-fixes-serious-flaws-that-lead-to-command-execution-in-patient-portal)
[Reddit](https://reddit.com/submit?url=https%3a%2f%2fportswigger.net%2fdaily-swig%2fhealthcare-security-openemr-fixes-serious-flaws-that-lead-to-command-execution-in-patient-portal)
[LinkedIn](https://www.linkedin.com/sharing/share-offsite?url=https%3a%2f%2fportswigger.net%2fdaily-swig%2fhealthcare-security-openemr-fixes-serious-flaws-that-lead-to-command-execution-in-patient-portal)
Email

This page requires JavaScript for an enhanced user experience.

Latest Posts
[### Were going teetotal  Its goodbye to The Daily Swig

02 March 2023
Were going teetotal  Its goodbye to The Daily Swig
PortSwigger today announces that The Daily Swig is closing down](/daily-swig/were-going-teetotal-its-goodbye-to-the-daily-swig)
[### Bug Bounty Radar

The latest bug bounty programs for March 2023
28 February 2023
Bug Bounty Radar
The latest bug bounty programs for March 2023](/daily-swig/bug-bounty-radar-the-latest-bug-bounty-programs-for-march-2023)
[### Indian gov flaws allowed creation of counterfeit driving licenses

28 February 2023
Indian gov flaws allowed creation of counterfeit driving licenses
Armed with personal data fragments, a researcher could also access 185 million citizens PII](/daily-swig/indian-transport-ministry-flaws-potentially-allowed-creation-of-counterfeit-driving-licenses)

Burp Suite

[Web vulnerability scanner](/burp/vulnerability-scanner)
[Burp Suite Editions](/burp)
[Release Notes](/burp/releases)

Vulnerabilities

[Cross-site scripting (XSS)](/web-security/cross-site-scripting)
[SQL injection](/web-security/sql-injection)
[Cross-site request forgery](/web-security/csrf)
[XML external entity injection](/web-security/xxe)
[Directory traversal](/web-security/file-path-traversal)
[Server-side request forgery](/web-security/ssrf)

Customers

[Organizations](/organizations)
[Testers](/testers)
[Developers](/developers)

Company

[About](/about)
[Careers](/careers)
[Contact](/about/contact)
[Legal](/legal)
[Privacy Notice](/privacy)

Insights

[Web Security Academy](/web-security)
[Blog](/blog)
[Research](/research)

[![PortSwigger Logo](/content/images/logos/portswigger-logo.svg)](/)
 [Follow us](https://twitter.com/Burp_Suite)

 2025 PortSwigger Ltd.


