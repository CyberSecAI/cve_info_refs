Based on the provided documents, here's an analysis of CVE-2021-46150:

**1. Verification:**

The content from phabricator.wikimedia.org (specifically the task T292795) directly references "XSS vulnerability in Special:CheckUserLog (CVE-2021-46150)". Therefore, this content is **relevant** to the specified CVE.

**2. Vulnerability Details:**

*   **Root Cause:** The vulnerability stems from a lack of proper output escaping of date values within the `Special:CheckUserLog` page. Specifically, the code was using `userTimeAndDate()`, `userDate()`, and `userTime()` functions, without proper escaping before rendering in HTML. This allowed an attacker to inject arbitrary HTML and Javascript code through these values, leading to a Cross-Site Scripting (XSS) vulnerability.
*   **Weaknesses/Vulnerabilities:**
    *   **Cross-Site Scripting (XSS):** The core vulnerability is a stored XSS flaw. Malicious code injected through a date field (e.g. by setting `MediaWiki:October` to `<img src=x onerror=alert(1)>`) is stored and executed when other users access the CheckUser log.
    *   **Lack of Output Encoding:** The primary weakness is the failure to properly encode/escape output before displaying it in the HTML context. This allows user-controlled input to be interpreted as code by the browser.
*   **Impact of Exploitation:**
    *   **Arbitrary JavaScript Execution:** An attacker could execute arbitrary JavaScript code in the context of other usersâ€™ browsers who visit the `Special:CheckUserLog` page.
    *   **Account Takeover:** The malicious JavaScript could be used to steal cookies, session tokens, or perform other actions on behalf of the victim, potentially leading to account takeover.
    *   **Malware Distribution:** Injected JavaScript could redirect the user to malicious websites, distribute malware or perform other malicious activity.
    *   **Information Disclosure:** Could potentially be used to access sensitive information, based on user permissions.
*   **Attack Vectors:**
    *   **Manipulated date/time messages:** By manipulating date-related messages via MediaWiki namespace (e.g., by editing MediaWiki:October).
    *   **Special:CheckUserLog:** The attack is triggered by simply viewing the `Special:CheckUserLog` page after the malicious code is injected in date/time format.
*   **Required Attacker Capabilities/Position:**
    *   **Privileged User:** The attacker would need to have the ability to edit MediaWiki messages, which requires elevated permissions in most setups. However, an attacker could also utilize other exploits to achieve this privilege.
    *   **Knowledge of Injection Point:** The attacker must know that the date values in the `Special:CheckUserLog` were not being escaped properly.

**3. Remediation:**

The fix involved ensuring proper HTML escaping of date/time values by using MediaWiki's `Sanitizer` class within the `LogPager.php` file. The changes in gerrit show the added sanitization of the date fields using `$lang->userTimeAndDate()` and `$lang->userDate()` with `$this->getOutput()->text()` for sanitization to prevent cross-site scripting.
The commit messages describe this fix as "SECURITY: Escape date values."
The fix was backported to `REL1_35`, `REL1_36`, and `REL1_37` branches, in addition to `master`.

**4. Additional Notes:**

*   The Phabricator task T292795 indicates this vulnerability is similar to a previously reported XSS issue in Special:Search (CVE-2021-41798), highlighting a pattern of similar vulnerabilities in the MediaWiki platform.
*   The risk rating was initially low, due to the attacker requiring some privileged access to modify system messages. However, the impact of the attack could be significant if exploited.

**In summary, CVE-2021-46150 is a stored Cross-Site Scripting vulnerability in the MediaWiki CheckUser extension caused by the lack of output escaping of date values in the `Special:CheckUserLog` page. Exploitation required a privileged user capable of modifying system messages but allowed for arbitrary JavaScript execution in the context of other users who view the CheckUser Log, thus could lead to account compromise.**