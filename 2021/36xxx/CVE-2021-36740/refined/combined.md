=== Content from www.debian.org_a2c064c7_20250115_090342.html ===


---

[[Date Prev](msg00054.html)][[Date Next](msg00056.html)]
[[Thread Prev](msg00054.html)][[Thread Next](msg00056.html)]
[[Date Index](maillist.html#00055)]
[[Thread Index](threads.html#00055)]

# [SECURITY] [DSA 5088-1] varnish security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 5088-1] varnish security update
* *From*: Florian Weimer <fw@deneb.enyo.de>
* *Date*: Thu, 03 Mar 2022 20:50:31 +0100
* *Message-id*: <[[🔎]](/msgid-search/87mti64xyw.fsf%40mid.deneb.enyo.de) [87mti64xyw.fsf@mid.deneb.enyo.de](msg00055.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-5088-1                   security@debian.org
<https://www.debian.org/security/>                           Florian Weimer
March 03, 2022                        <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : varnish
CVE ID         : CVE-2021-36740 CVE-2022-23959
Debian Bug     : 991040 1004433

Brief introduction

CVE-2021-36740

    Martin Blix Grydeland discovered that Varnish is vulnerable to
    request smuggling attacks if the HTTP/2 protocol is enabled.

CVE-2022-23959

    James Kettle discovered a request smuggling attack against the
    HTTP/1 protocol implementation in Varnish.

For the oldstable distribution (buster), these problems have been fixed
in version 6.1.1-1+deb10u3.

For the stable distribution (bullseye), these problems have been fixed in
version 6.5.1-1+deb11u2.

We recommend that you upgrade your varnish packages.

For the detailed security status of varnish please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/varnish>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQEzBAEBCgAdFiEEyNPZz/qecFY/MvpUv3v/BALVJL4FAmIhF70ACgkQv3v/BALV
JL6sKAf/di/upNLJLi+nOCzJpEKWpkxZS0DRowL01MtHZyHqJlYzRA//B4Jj4e+3
IhTHdtKka8IH1AsjyOkfM7B70/Er/xtJBxceAiA7gMxpXaxtr8HqKjnx4ugs3t6E
ky63WpbrJKICTVtT/vqxVaJYnptPzsSMGpzzrIx7y7HrcYNZXJ67dfxHtyVvp6Te
5rOyDxql17mqJnZxgeAec3g0lXY7zRsD5/KGSN9QHx+HId9/eF9xss8cew1BM49C
w5DOv9wfZpjtT+NtS9NFoeTuxXmAa+WYGXu0MBob612BhL2Ux9ALqvx3StfQ0EMF
jmQWVbUUlYr0NnJ/XSFS2hAFN7aG7w==
=hu0U
-----END PGP SIGNATURE-----

```

---



=== Content from lists.fedoraproject.org_39e6e79b_20250115_090341.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ZHBNLDEOTGYRIEQZBWV7F6VPYS4O2AAK/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ZHBNLDEOTGYRIEQZBWV7F6VPYS4O2AAK/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ZHBNLDEOTGYRIEQZBWV7F6VPYS4O2AAK/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ZHBNLDEOTGYRIEQZBWV7F6VPYS4O2AAK/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-ZHBNLDEOTGYRIEQZBWV7F6VPYS4O2AAK.mbox.gz?message=ZHBNLDEOTGYRIEQZBWV7F6VPYS4O2AAK "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/ZHBNLDEOTGYRIEQZBWV7F6VPYS4O2AAK/#ZHBNLDEOTGYRIEQZBWV7F6VPYS4O2AAK)

# [SECURITY] Fedora 33 Update: varnish-6.4.0-5.fc33

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

25 Jul
2021

25 Jul
'21

3:05 a.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2021-36e10d3f9f
2021-07-25 01:04:54.499865
--------------------------------------------------------------------------------

Name : varnish
Product : Fedora 33
Version : 6.4.0
Release : 5.fc33
URL : <https://www.varnish-cache.org/>
Summary : High-performance HTTP accelerator
Description :
This is Varnish Cache, a high-performance HTTP accelerator.

Varnish Cache stores web pages in memory so web servers don���t have to
create the same web page over and over again. Varnish Cache serves
pages much faster than any application server; giving the website a
significant speed up.

Documentation wiki and additional information about Varnish Cache is
available on: <https://www.varnish-cache.org/>

--------------------------------------------------------------------------------
Update Information:

Security fix for CVE-2021-36740
--------------------------------------------------------------------------------
ChangeLog:

--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2021-36e10d3f9f' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/ZHBNLDEOTGYRIEQZBWV7F6VPYS4O2AAK/#ZHBNLDEOTGYRIEQZBWV7F6VPYS4O2AAK)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from varnish-cache.org_b2c4cacc_20250115_090341.html ===

# VSV00007 Varnish HTTP/2 Request Smuggling Attack[¶](#vsv00007-varnish-http-2-request-smuggling-attack "Permalink to this heading")

[CVE-2021-36740](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-36740)

Date: 2021-07-13

A request smuggling attack can be performed on Varnish Cache and Varnish
Cache Plus servers that have the HTTP/2 protocol enabled. The smuggled
requests do not go through normal VCL processing, and any authorization
steps implemented in VCL would be bypassed.

The responses to the smuggled requests can under some circumstances also
be obtained by the attacker. Also, it may be possible for an attacker to
use this for cache poisoning, where the response to a smuggled request is
inserted as the cached content.

## Identifying smuggled requests[¶](#identifying-smuggled-requests "Permalink to this heading")

Smuggled requests will not show in any logs generated by Varnish, but
would show in the backend logs. It may be possible to identify the
smuggled requests in the backend logs by missing Varnish inserted
artifacts, like the X-Varnish header. Though a determined attacker may
spoof these artifacts in the smuggled requests.

## Versions affected[¶](#versions-affected "Permalink to this heading")

* Varnish Cache releases 6.0.0, 6.0.1, 6.0.2, 6.0.3, 6.0.4, 6.0.5, 6.1.0,
  6.1.1, 6.2.0, 6.2.1, 6.2.2, 6.2.3, 6.3.0, 6.3.1, 6.3.2, 6.4.0, 6.5.0,
  6.5.1, 6.6.0.
* Varnish Cache releases 5.x.x. Notice that the experimental HTTP/2
  support in these releases are known to have several issues, and enabling
  HTTP/2 is not recommended.
* Varnish Cache 6.0 LTS by Varnish Software up to and including 6.0.7

## Versions not affected[¶](#versions-not-affected "Permalink to this heading")

* All versions of Varnish Cache prior to version 5.0.0

## Fixed in[¶](#fixed-in "Permalink to this heading")

* Varnish Cache 6.6.1
* Varnish Cache 6.5.2
* Varnish Cache 6.0 LTS version 6.0.8
* GitHub Varnish Cache master branch at commit 450961a019d1c1955ca1851d51940ff2c87bdc98

## Mitigation[¶](#mitigation "Permalink to this heading")

Mitigation is possible by either disabling the HTTP/2 protocol, or
preventing backend connection reuse.

### Turning off support for HTTP/2:[¶](#turning-off-support-for-http-2 "Permalink to this heading")

The problem only affects servers that have HTTP/2 support enabled. This
support can be turned off at runtime. To disable HTTP/2 on a server do:

```
sudo varnishadm param.set feature -http2

```

To verify that HTTP/2 is disabled on a server, execute this command and
make sure the current value does not list http2:

```
sudo varnishadm param.show feature

```

When using Hitch (or any other TLS termination proxy) in front of Varnish
to handle TLS termination, you should also unlist the h2 token as a
possible protocol in the ALPN advertisement sent to connecting clients.

To unlist h2 as a supported protocol in Hitch, remove or comment out the
line stating alpn-protos = “h2, http/1.1” in your Hitch configuration
file. Then restart the Hitch service (reload is not sufficient).

### Preventing connection reuse[¶](#preventing-connection-reuse "Permalink to this heading")

On compliant backends it is possible to prevent the execution of smuggled
requests by disabling connection reuse of backend requests. Note that for
this workaround to be effective, it relies on the backend to refuse any
additional requests after seeing a Connection: close header.

To disable backend connection reuse, add a Connection: close header on
the outgoing backend requests:

```
sub vcl_backend_fetch {
      set bereq.http.Connection = "close";
}

```

## Credits[¶](#credits "Permalink to this heading")

Martin Blix Grydeland at Varnish Software for identifying and handling the
issue.

[![Logo](../_static/varnish-bunny.png)](../index.html)

### Index

---

* [Download](../releases/index.html)
* [VMODS](../vmods/index.html) &
  [Extras](../extras/index.html)
* [Get help](../support/index.html)
* [Mailing Lists](/lists/mailman/listinfo)
* [Security](index.html)
* [Documentation](../docs/index.html)
* [trunk](../docs/trunk/index.html)
  | [7.6 (current)](../docs/7.6/index.html)
  | [7.5 (previous)](../docs/7.5/index.html)
  | [6.0 (supported)](../docs/6.0/index.html)
  | [other versions](../docs/index.html)
* [Varnish Book (PDF)](https://info.varnish-software.com/resources/varnish-6-by-example-book)
* [4.0](http://book.varnish-software.com/4.0/)
  | [3.0](http://book.varnish-software.com/3.0/)
* [Github project](https://github.com/varnishcache/varnish-cache)
* [Tips and tricks](../tips/index.html)
* [Tutorials](../tutorials/index.html)
* [Varnish Business](../business/index.html)
* [Project organization](../organization/index.html)
* [VTEST](/vtest)
  | [GCOV](/gcov)

### Our VM is sponsored by:

[![](../_static/NetActuate.png)](https://www.netactuate.net)
### …and:

[![](../_static/FreeBSD.gif)](https://www.freebsd.org)

©2016-2024, The Varnish Cache Contributors.
|
Powered by [Sphinx 5.3.0](https://www.sphinx-doc.org/)
& [Alabaster 0.7.16](https://alabaster.readthedocs.io)



=== Content from github.com_2727773a_20250115_090339.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvarnishcache%2Fvarnish-cache%2Fcommit%2F9be22198e258d0e7a5c41f4291792214a29405cf)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvarnishcache%2Fvarnish-cache%2Fcommit%2F9be22198e258d0e7a5c41f4291792214a29405cf)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=varnishcache%2Fvarnish-cache)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[varnishcache](/varnishcache)
/
**[varnish-cache](/varnishcache/varnish-cache)**
Public

* [Notifications](/login?return_to=%2Fvarnishcache%2Fvarnish-cache) You must be signed in to change notification settings
* [Fork
  381](/login?return_to=%2Fvarnishcache%2Fvarnish-cache)
* [Star
   3.7k](/login?return_to=%2Fvarnishcache%2Fvarnish-cache)

* [Code](/varnishcache/varnish-cache)
* [Issues
  86](/varnishcache/varnish-cache/issues)
* [Pull requests
  68](/varnishcache/varnish-cache/pulls)
* [Actions](/varnishcache/varnish-cache/actions)
* [Projects
  0](/varnishcache/varnish-cache/projects)
* [Wiki](/varnishcache/varnish-cache/wiki)
* [Security](/varnishcache/varnish-cache/security)
* [Insights](/varnishcache/varnish-cache/pulse)

Additional navigation options

* [Code](/varnishcache/varnish-cache)
* [Issues](/varnishcache/varnish-cache/issues)
* [Pull requests](/varnishcache/varnish-cache/pulls)
* [Actions](/varnishcache/varnish-cache/actions)
* [Projects](/varnishcache/varnish-cache/projects)
* [Wiki](/varnishcache/varnish-cache/wiki)
* [Security](/varnishcache/varnish-cache/security)
* [Insights](/varnishcache/varnish-cache/pulse)

## Commit

[Permalink](/varnishcache/varnish-cache/commit/9be22198e258d0e7a5c41f4291792214a29405cf)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Take content length into account on H/2 request bodies

[Browse files](/varnishcache/varnish-cache/tree/9be22198e258d0e7a5c41f4291792214a29405cf)
Browse the repository at this point in the history

```
When receiving H/2 data frames, make sure to take the advertised content
length into account, and fail appropriately if the combined sum of the
data frames does not match the content length.
```

* Loading branch information

[![@mbgrydeland](https://avatars.githubusercontent.com/u/661482?s=40&v=4)](/mbgrydeland)

[mbgrydeland](/varnishcache/varnish-cache/commits?author=mbgrydeland "View all commits by mbgrydeland")
committed
Jul 1, 2021

1 parent
[6e27d4d](/varnishcache/varnish-cache/commit/6e27d4dee58e0f3e63c014464cd663b6985e8c53)

commit 9be2219

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**40 additions**
and
**11 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* bin/varnishd/http2

  + bin/varnishd/http2/cache\_http2.h
    [cache\_http2.h](#diff-490791e6cd4536af707c5d9ee54a91e35f831503e0fcaa413714dec79e4275af)
  + bin/varnishd/http2/cache\_http2\_proto.c
    [cache\_http2\_proto.c](#diff-59753dc1d29a35a4adf4f24b711987bebc5997d14b84d95de4d340eeec06dafc)

## There are no files selected for viewing

2 changes: 2 additions & 0 deletions

2
[bin/varnishd/http2/cache\_http2.h](#diff-490791e6cd4536af707c5d9ee54a91e35f831503e0fcaa413714dec79e4275af "bin/varnishd/http2/cache_http2.h")

Show comments

[View file](/varnishcache/varnish-cache/blob/9be22198e258d0e7a5c41f4291792214a29405cf/bin/varnishd/http2/cache_http2.h)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -131,6 +131,8 @@ struct h2\_req { |
|  |  | /\* Where to wake this stream up \*/ |
|  |  | struct worker \*wrk; |
|  |  |  |
|  |  | ssize\_t reqbody\_bytes; |
|  |  |  |
|  |  | VTAILQ\_ENTRY(h2\_req) tx\_list; |
|  |  | h2\_error error; |
|  |  |  |
| Expand Down | |  |

49 changes: 38 additions & 11 deletions

49
[bin/varnishd/http2/cache\_http2\_proto.c](#diff-59753dc1d29a35a4adf4f24b711987bebc5997d14b84d95de4d340eeec06dafc "bin/varnishd/http2/cache_http2_proto.c")

Show comments

[View file](/varnishcache/varnish-cache/blob/9be22198e258d0e7a5c41f4291792214a29405cf/bin/varnishd/http2/cache_http2_proto.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -546,7 +546,7 @@ h2\_end\_headers(struct worker \*wrk, struct h2\_sess \*h2, |
|  |  | struct req \*req, struct h2\_req \*r2) |
|  |  | { |
|  |  | h2\_error h2e; |
|  |  | const char \*b; |
|  |  | ssize\_t cl; |
|  |  |  |
|  |  | ASSERT\_RXTHR(h2); |
|  |  | assert(r2->state == H2\_S\_OPEN); |
| Expand All | | @@ -572,14 +572,24 @@ h2\_end\_headers(struct worker \*wrk, struct h2\_sess \*h2, |
|  |  | // XXX: Have I mentioned H/2 Is hodge-podge ? |
|  |  | http\_CollectHdrSep(req->http, H\_Cookie, "; "); // rfc7540,l,3114,3120 |
|  |  |  |
|  |  | cl = http\_GetContentLength(req->http); |
|  |  | assert(cl >= -2); |
|  |  | if (cl == -2) { |
|  |  | VSLb(h2->vsl, SLT\_Debug, "Non-parseable Content-Length"); |
|  |  | return (H2SE\_PROTOCOL\_ERROR); |
|  |  | } |
|  |  |  |
|  |  | if (req->req\_body\_status == REQ\_BODY\_INIT) { |
|  |  | if (!http\_GetHdr(req->http, H\_Content\_Length, &b)) |
|  |  | if (cl == -1) |
|  |  | req->req\_body\_status = REQ\_BODY\_WITHOUT\_LEN; |
|  |  | else |
|  |  | req->req\_body\_status = REQ\_BODY\_WITH\_LEN; |
|  |  | req->htc->content\_length = cl; |
|  |  | } else { |
|  |  | /\* A HEADER frame contained END\_STREAM \*/ |
|  |  | assert (req->req\_body\_status == REQ\_BODY\_NONE); |
|  |  | if (http\_GetContentLength(req->http) > 0) |
|  |  | r2->state = H2\_S\_CLOS\_REM; |
|  |  | if (cl > 0) |
|  |  | return (H2CE\_PROTOCOL\_ERROR); //rfc7540,l,1838,1840 |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -736,6 +746,7 @@ h2\_rx\_data(struct worker \*wrk, struct h2\_sess \*h2, struct h2\_req \*r2) |
|  |  | int w1 = 0, w2 = 0; |
|  |  | char buf[4]; |
|  |  | unsigned wi; |
|  |  | ssize\_t cl; |
|  |  |  |
|  |  | CHECK\_OBJ\_NOTNULL(wrk, WORKER\_MAGIC); |
|  |  | ASSERT\_RXTHR(h2); |
| Expand All | | @@ -754,6 +765,23 @@ h2\_rx\_data(struct worker \*wrk, struct h2\_sess \*h2, struct h2\_req \*r2) |
|  |  | Lck\_Unlock(&h2->sess->mtx); |
|  |  | return (h2->error ? h2->error : r2->error); |
|  |  | } |
|  |  |  |
|  |  | r2->reqbody\_bytes += h2->rxf\_len; |
|  |  | if (h2->rxf\_flags & H2FF\_DATA\_END\_STREAM) |
|  |  | r2->state = H2\_S\_CLOS\_REM; |
|  |  | cl = r2->req->htc->content\_length; |
|  |  | if (cl >= 0 && (r2->reqbody\_bytes > cl || |
|  |  | (r2->state >= H2\_S\_CLOS\_REM && r2->reqbody\_bytes != cl))) { |
|  |  | VSLb(h2->vsl, SLT\_Debug, |
|  |  | "H2: stream %u: Received data and Content-Length" |
|  |  | " mismatch", h2->rxf\_stream); |
|  |  | r2->error = H2SE\_PROTOCOL\_ERROR; // rfc7540,l,3150,3163 |
|  |  | if (r2->cond) |
|  |  | AZ(pthread\_cond\_signal(r2->cond)); |
|  |  | Lck\_Unlock(&h2->sess->mtx); |
|  |  | return (H2SE\_PROTOCOL\_ERROR); |
|  |  | } |
|  |  |  |
|  |  | AZ(h2->mailcall); |
|  |  | h2->mailcall = r2; |
|  |  | h2->req0->r\_window -= h2->rxf\_len; |
| Expand All | | @@ -772,6 +800,8 @@ h2\_rx\_data(struct worker \*wrk, struct h2\_sess \*h2, struct h2\_req \*r2) |
|  |  | r2->r\_window += wi; |
|  |  | w2 = 1; |
|  |  | } |
|  |  |  |
|  |  |  |
|  |  | Lck\_Unlock(&h2->sess->mtx); |
|  |  |  |
|  |  | if (w1 || w2) { |
| Expand All | | @@ -794,7 +824,7 @@ h2\_vfp\_body(struct vfp\_ctx \*vc, struct vfp\_entry \*vfe, void \*ptr, ssize\_t \*lp) |
|  |  | struct h2\_req \*r2; |
|  |  | struct h2\_sess \*h2; |
|  |  | unsigned l; |
|  |  | enum vfp\_status retval = VFP\_OK; |
|  |  | enum vfp\_status retval; |
|  |  |  |
|  |  | CHECK\_OBJ\_NOTNULL(vc, VFP\_CTX\_MAGIC); |
|  |  | CHECK\_OBJ\_NOTNULL(vfe, VFP\_ENTRY\_MAGIC); |
| Expand All | | @@ -807,7 +837,6 @@ h2\_vfp\_body(struct vfp\_ctx \*vc, struct vfp\_entry \*vfe, void \*ptr, ssize\_t \*lp) |
|  |  | \*lp = 0; |
|  |  |  |
|  |  | Lck\_Lock(&h2->sess->mtx); |
|  |  | assert (r2->state == H2\_S\_OPEN); |
|  |  | r2->cond = &vc->wrk->cond; |
|  |  | while (h2->mailcall != r2 && h2->error == 0 && r2->error == 0) |
|  |  | AZ(Lck\_CondWait(r2->cond, &h2->sess->mtx, 0)); |
| Expand All | | @@ -830,12 +859,10 @@ h2\_vfp\_body(struct vfp\_ctx \*vc, struct vfp\_entry \*vfe, void \*ptr, ssize\_t \*lp) |
|  |  | Lck\_Unlock(&h2->sess->mtx); |
|  |  | return (VFP\_OK); |
|  |  | } |
|  |  | if (h2->rxf\_len == 0) { |
|  |  | if (h2->rxf\_flags & H2FF\_DATA\_END\_STREAM) { |
|  |  | retval = VFP\_END; |
|  |  | r2->state = H2\_S\_CLOS\_REM; |
|  |  | } |
|  |  | } |
|  |  | if (h2->rxf\_len == 0 && r2->state >= H2\_S\_CLOS\_REM) |
|  |  | retval = VFP\_END; |
|  |  | else |
|  |  | retval = VFP\_OK; |
|  |  | h2->mailcall = NULL; |
|  |  | AZ(pthread\_cond\_signal(h2->cond)); |
|  |  | } |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `9be2219`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvarnishcache%2Fvarnish-cache%2Fcommit%2F9be22198e258d0e7a5c41f4291792214a29405cf) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from lists.fedoraproject.org_7d967d46_20250115_090340.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/THV2DQA2GS65HUCKK4KSD2XLN3AAQ2V5/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/THV2DQA2GS65HUCKK4KSD2XLN3AAQ2V5/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/THV2DQA2GS65HUCKK4KSD2XLN3AAQ2V5/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/THV2DQA2GS65HUCKK4KSD2XLN3AAQ2V5/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-THV2DQA2GS65HUCKK4KSD2XLN3AAQ2V5.mbox.gz?message=THV2DQA2GS65HUCKK4KSD2XLN3AAQ2V5 "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/THV2DQA2GS65HUCKK4KSD2XLN3AAQ2V5/#THV2DQA2GS65HUCKK4KSD2XLN3AAQ2V5)

# [SECURITY] Fedora 34 Update: varnish-6.5.2-1.fc34

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

25 Jul
2021

25 Jul
'21

3:03 a.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2021-cf7585f0ca
2021-07-25 01:00:30.686549
--------------------------------------------------------------------------------

Name : varnish
Product : Fedora 34
Version : 6.5.2
Release : 1.fc34
URL : <https://www.varnish-cache.org/>
Summary : High-performance HTTP accelerator
Description :
This is Varnish Cache, a high-performance HTTP accelerator.

Varnish Cache stores web pages in memory so web servers don���t have to
create the same web page over and over again. Varnish Cache serves
pages much faster than any application server; giving the website a
significant speed up.

Documentation wiki and additional information about Varnish Cache is
available on: <https://www.varnish-cache.org/>

--------------------------------------------------------------------------------
Update Information:

New upstream release. This is a security release for CVE-2021-36740 aka VSV00007
--------------------------------------------------------------------------------
ChangeLog:

\* Fri Jul 16 2021 Ingvar Hagelund ingvar@redpill-linpro.com 6.5.2-1
- New upstream release
- Includes fix for VSV00007 aka CVE-2021-36740, bz#1982412
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #1982412 - CVE-2021-36740 varnish: HTTP/2 request smuggling attack via a large Content-Length header for a POST request [fedora-all]
<https://bugzilla.redhat.com/show_bug.cgi?id=1982412>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2021-cf7585f0ca' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/THV2DQA2GS65HUCKK4KSD2XLN3AAQ2V5/#THV2DQA2GS65HUCKK4KSD2XLN3AAQ2V5)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from docs.varnish-software.com_4e5f1e3e_20250115_090336.html ===

[![Varnish Software logo](/images/varnish_software_logo.png)](/ "Varnish Software documentation")[Search](/search)

---

# Varnish HTTP/2 Request Smuggling [Security](/security)

* [Overview](#overview)
* [Impact](#impact)
* [Status](#status)
  + [Affected software versions](#affected-software-versions)
  + [Versions not affected](#versions-not-affected)
  + [Resolved in](#resolved-in)
  + [Upgrading on RedHat and derivatives](#upgrading-on-redhat-and-derivatives)
  + [Upgrading on Ubuntu and Debian](#upgrading-on-ubuntu-and-debian)
* [Workaround](#workaround)
  + [Turning off support for HTTP/2](#turning-off-support-for-http2)
  + [Preventing connection reuse](#preventing-connection-reuse)
* [Identifying smuggled requests](#identifying-smuggled-requests)
* [Timeline](#timeline)
* [References](#references)
Published July 13, 2021.
# Overview

A request smuggling attack can be performed on Varnish Cache and Varnish
Cache Plus servers that have the HTTP/2 protocol enabled. The smuggled
requests do not go through normal VCL processing, and any authorization
steps implemented in VCL would be bypassed.

The responses to the smuggled requests can under some circumstances also
be obtained by the attacker. Also, it may be possible for an attacker to
use this for cache poisoning, where the response to a smuggled request is
inserted as the cached content.

This problem was discovered by Martin Blix Grydeland of Varnish Software.

# Impact

The potential impact is information disclosure and cache poisoning.

# Status

## Affected software versions

* Varnish Enterprise 6.0 series up to and including 6.0.8r2
* Varnish Cache 6.0 LTS series up to and including 6.0.7
* Varnish Cache releases 6.0.0, 6.0.1, 6.0.2, 6.0.3, 6.0.4, 6.0.5, 6.1.0,
  6.1.1, 6.2.0, 6.2.1, 6.2.2, 6.2.3, 6.3.0, 6.3.1, 6.3.2, 6.4.0, 6.5.0,
  6.5.1, 6.6.0.
* Varnish Cache releases 5.x.x. Notice that the experimental HTTP/2
  support in these releases are known to have several issues, and enabling
  HTTP/2 is not recommended.

## Versions not affected

* All versions of Varnish Enterprise 4.1
* All versions of Varnish Cache LTS 4.1 series.
* All versions of Varnish Cache prior to 5.0.0

## Resolved in

* Varnish Enterprise 6.0.8r3 (released )
* Varnish Cache LTS 6.0.8 (released )
* Varnish Cache 6.6.1 and 6.5.2 (released )

The recommended solution is to upgrade Varnish to one of the versions
where this issue has been resolved, and then ensure that Varnish is
restarted.

## Upgrading on RedHat and derivatives

You should already have configured the Varnish Enterprise repository, so a
normal upgrade will be enough:

```
sudo yum update varnish-plus
sudo systemctl restart varnish

```

Verify that the version that is installed is recent:

```
rpm -q varnish-plus
varnish-plus-6.0.8r3-1.el7.x86_64

```
## Upgrading on Ubuntu and Debian

You should already have configured the Varnish Enterprise repository, so a
normal upgrade should be enough:

```
sudo apt-get update
sudo apt-get install --only-upgrade varnish-plus
sudo systemctl restart varnish

```

Verify that the version that is installed is recent:

```
dpkg -l varnish-plus
[...]
ii  varnish-plus                6.0.8r3-1~xenial   amd64              A supercharged version of the popular web cache, Varnish Cache

```
# Workaround

## Turning off support for HTTP/2

The problem only affects servers that have HTTP/2 support enabled. This
support can be turned off at runtime. To disable HTTP/2 on a server do:

```
sudo varnishadm param.set feature -http2

```

To verify that HTTP/2 is disabled on a server, execute this command and
make sure the current value does not list `http2`:

```
sudo varnishadm param.show feature

```

When using in-core TLS termination, this will also remove `h2` as a
supported protocol advertised through ALPN.

When using Hitch (or any other TLS termination proxy) in front of Varnish
to handle TLS termination, it is also necessary unlist the `h2` token as a
possible protocol in the ALPN advertisement sent to connecting clients.

To unlist `h2` as a support protocol in Hitch, remove or comment out the
line stating `alpn-protos = "h2, http/1.1"` in your Hitch configuration
file. Then restart the Hitch service (reload is not sufficient).

## Preventing connection reuse

On compliant backends it is possible to prevent the execution of smuggled
requests by disabling connection reuse of backend requests. Note that for
this workaround to be effective, it relies on the backend to refuse any
additional requests after seeing a `Connection: close` header.

To disable backend connection reuse, add a `Connection: close` header on
the outgoing backend requests:

```
sub vcl_backend_fetch {
	set bereq.http.Connection = "close";
}

```
# Identifying smuggled requests

Smuggled requests will not show in any logs generated by Varnish, but
would show in the backend logs. It may be possible to identify the
smuggled requests in the backend logs by missing Varnish inserted
artifacts, like the `X-Varnish` header. Though a determined attacker may
spoof these artifacts in the smuggled requests.

# Timeline

**2021-05-31**

* The problem is identified during internal testing at Varnish Software.

**2021-06-11**

* Problem is analyzed and severity acknowledged.

**2021-06-15**

* Varnish Enterprise 6.0.8r3 released with patch for the issue.

**2021-07-13**

* Public disclosure and updated open source packages.

# References

* [CVE-2021-36740](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-36740)
* [Varnish Cache VSV00007 announcement](https://www.varnish-cache.org/security/VSV00007.html)

---

**Manuals**

[Varnish Enterprise](/varnish-enterprise/)

[Varnish Cloud](/varnish-cloud/)

[Varnish Controller](/varnish-controller/)

[Varnish High Availability](/varnish-high-availability/)

[Varnish Custom Statistics](/varnish-custom-statistics/)

[Varnish WAF](/varnish-waf/)

[Varnish Broadcaster](/varnish-broadcaster/)

[Varnish Helm Chart](/varnish-helm/)

[Packages](/packages)

[Docker](/docker)

**News**

[Varnish Controller 6.6.4](/releases/varnish-controller-6.6.4/)

[Varnish Controller 6.6.3](/releases/varnish-controller-6.6.3/)

[Varnish Enterprise 6.0.13r10](/releases/varnish-enterprise-6.0.13r10/)

[Varnish Controller 6.6.2](/releases/varnish-controller-6.6.2/)

[Varnish Controller 6.6.1](/releases/varnish-controller-6.6.1/)

*[News archive](/news)*

Cookie Settings
[Privacy Policy](https://www.varnish-software.com/privacy-policy/)
[Contact Us](https://www.varnish-software.com/contact-us/)
[Press](https://www.varnish-software.com/press/)
[Branding](https://www.varnish-software.com/branding/)

®Varnish Software, Wallingatan 12, 111 60 Stockholm, Organization nr. 556805-6203



=== Content from github.com_f193ad1f_20250115_090337.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvarnishcache%2Fvarnish-cache%2Fcommit%2F82b0a629f60136e76112c6f2c6372cce77b683be)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvarnishcache%2Fvarnish-cache%2Fcommit%2F82b0a629f60136e76112c6f2c6372cce77b683be)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=varnishcache%2Fvarnish-cache)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[varnishcache](/varnishcache)
/
**[varnish-cache](/varnishcache/varnish-cache)**
Public

* [Notifications](/login?return_to=%2Fvarnishcache%2Fvarnish-cache) You must be signed in to change notification settings
* [Fork
  381](/login?return_to=%2Fvarnishcache%2Fvarnish-cache)
* [Star
   3.7k](/login?return_to=%2Fvarnishcache%2Fvarnish-cache)

* [Code](/varnishcache/varnish-cache)
* [Issues
  86](/varnishcache/varnish-cache/issues)
* [Pull requests
  68](/varnishcache/varnish-cache/pulls)
* [Actions](/varnishcache/varnish-cache/actions)
* [Projects
  0](/varnishcache/varnish-cache/projects)
* [Wiki](/varnishcache/varnish-cache/wiki)
* [Security](/varnishcache/varnish-cache/security)
* [Insights](/varnishcache/varnish-cache/pulse)

Additional navigation options

* [Code](/varnishcache/varnish-cache)
* [Issues](/varnishcache/varnish-cache/issues)
* [Pull requests](/varnishcache/varnish-cache/pulls)
* [Actions](/varnishcache/varnish-cache/actions)
* [Projects](/varnishcache/varnish-cache/projects)
* [Wiki](/varnishcache/varnish-cache/wiki)
* [Security](/varnishcache/varnish-cache/security)
* [Insights](/varnishcache/varnish-cache/pulse)

## Commit

[Permalink](/varnishcache/varnish-cache/commit/82b0a629f60136e76112c6f2c6372cce77b683be)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Take content length into account on H/2 request bodies

[Browse files](/varnishcache/varnish-cache/tree/82b0a629f60136e76112c6f2c6372cce77b683be)
Browse the repository at this point in the history

```
When receiving H/2 data frames, make sure to take the advertised content
length into account, and fail appropriately if the combined sum of the
data frames does not match the content length.
```

* Loading branch information

[![@mbgrydeland](https://avatars.githubusercontent.com/u/661482?s=40&v=4)](/mbgrydeland)

[mbgrydeland](/varnishcache/varnish-cache/commits?author=mbgrydeland "View all commits by mbgrydeland")
committed
Jul 1, 2021

1 parent
[34d1193](/varnishcache/varnish-cache/commit/34d11938a9d195bf87f03c48759d14b2550b7400)

commit 82b0a62

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**38 additions**
and
**10 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* bin/varnishd/http2

  + bin/varnishd/http2/cache\_http2.h
    [cache\_http2.h](#diff-490791e6cd4536af707c5d9ee54a91e35f831503e0fcaa413714dec79e4275af)
  + bin/varnishd/http2/cache\_http2\_proto.c
    [cache\_http2\_proto.c](#diff-59753dc1d29a35a4adf4f24b711987bebc5997d14b84d95de4d340eeec06dafc)

## There are no files selected for viewing

2 changes: 2 additions & 0 deletions

2
[bin/varnishd/http2/cache\_http2.h](#diff-490791e6cd4536af707c5d9ee54a91e35f831503e0fcaa413714dec79e4275af "bin/varnishd/http2/cache_http2.h")

Show comments

[View file](/varnishcache/varnish-cache/blob/82b0a629f60136e76112c6f2c6372cce77b683be/bin/varnishd/http2/cache_http2.h)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -134,6 +134,8 @@ struct h2\_req { |
|  |  | /\* Where to wake this stream up \*/ |
|  |  | struct worker \*wrk; |
|  |  |  |
|  |  | ssize\_t reqbody\_bytes; |
|  |  |  |
|  |  | VTAILQ\_ENTRY(h2\_req) tx\_list; |
|  |  | h2\_error error; |
|  |  | }; |
| Expand Down | |  |

46 changes: 36 additions & 10 deletions

46
[bin/varnishd/http2/cache\_http2\_proto.c](#diff-59753dc1d29a35a4adf4f24b711987bebc5997d14b84d95de4d340eeec06dafc "bin/varnishd/http2/cache_http2_proto.c")

Show comments

[View file](/varnishcache/varnish-cache/blob/82b0a629f60136e76112c6f2c6372cce77b683be/bin/varnishd/http2/cache_http2_proto.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -554,6 +554,7 @@ h2\_end\_headers(struct worker \*wrk, struct h2\_sess \*h2, |
|  |  | struct req \*req, struct h2\_req \*r2) |
|  |  | { |
|  |  | h2\_error h2e; |
|  |  | ssize\_t cl; |
|  |  |  |
|  |  | ASSERT\_RXTHR(h2); |
|  |  | assert(r2->state == H2\_S\_OPEN); |
| Expand All | | @@ -574,16 +575,24 @@ h2\_end\_headers(struct worker \*wrk, struct h2\_sess \*h2, |
|  |  | // XXX: Have I mentioned H/2 Is hodge-podge ? |
|  |  | http\_CollectHdrSep(req->http, H\_Cookie, "; "); // rfc7540,l,3114,3120 |
|  |  |  |
|  |  | cl = http\_GetContentLength(req->http); |
|  |  | assert(cl >= -2); |
|  |  | if (cl == -2) { |
|  |  | VSLb(h2->vsl, SLT\_Debug, "Non-parseable Content-Length"); |
|  |  | return (H2SE\_PROTOCOL\_ERROR); |
|  |  | } |
|  |  |  |
|  |  | if (req->req\_body\_status == NULL) { |
|  |  | if (!http\_GetHdr(req->http, H\_Content\_Length, NULL)) |
|  |  | if (cl == -1) |
|  |  | req->req\_body\_status = BS\_EOF; |
|  |  | else |
|  |  | req->req\_body\_status = BS\_LENGTH; |
|  |  | req->htc->content\_length = cl; |
|  |  | } else { |
|  |  | /\* A HEADER frame contained END\_STREAM \*/ |
|  |  | assert (req->req\_body\_status == BS\_NONE); |
|  |  | r2->state = H2\_S\_CLOS\_REM; |
|  |  | if (http\_GetContentLength(req->http) > 0) |
|  |  | if (cl > 0) |
|  |  | return (H2CE\_PROTOCOL\_ERROR); //rfc7540,l,1838,1840 |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -737,6 +746,7 @@ h2\_rx\_data(struct worker \*wrk, struct h2\_sess \*h2, struct h2\_req \*r2) |
|  |  | int w1 = 0, w2 = 0; |
|  |  | char buf[4]; |
|  |  | unsigned wi; |
|  |  | ssize\_t cl; |
|  |  |  |
|  |  | CHECK\_OBJ\_NOTNULL(wrk, WORKER\_MAGIC); |
|  |  | ASSERT\_RXTHR(h2); |
| Expand All | | @@ -755,6 +765,23 @@ h2\_rx\_data(struct worker \*wrk, struct h2\_sess \*h2, struct h2\_req \*r2) |
|  |  | Lck\_Unlock(&h2->sess->mtx); |
|  |  | return (h2->error ? h2->error : r2->error); |
|  |  | } |
|  |  |  |
|  |  | r2->reqbody\_bytes += h2->rxf\_len; |
|  |  | if (h2->rxf\_flags & H2FF\_DATA\_END\_STREAM) |
|  |  | r2->state = H2\_S\_CLOS\_REM; |
|  |  | cl = r2->req->htc->content\_length; |
|  |  | if (cl >= 0 && (r2->reqbody\_bytes > cl || |
|  |  | (r2->state >= H2\_S\_CLOS\_REM && r2->reqbody\_bytes != cl))) { |
|  |  | VSLb(h2->vsl, SLT\_Debug, |
|  |  | "H2: stream %u: Received data and Content-Length" |
|  |  | " mismatch", h2->rxf\_stream); |
|  |  | r2->error = H2SE\_PROTOCOL\_ERROR; // rfc7540,l,3150,3163 |
|  |  | if (r2->cond) |
|  |  | AZ(pthread\_cond\_signal(r2->cond)); |
|  |  | Lck\_Unlock(&h2->sess->mtx); |
|  |  | return (H2SE\_PROTOCOL\_ERROR); |
|  |  | } |
|  |  |  |
|  |  | AZ(h2->mailcall); |
|  |  | h2->mailcall = r2; |
|  |  | h2->req0->r\_window -= h2->rxf\_len; |
| Expand All | | @@ -773,6 +800,8 @@ h2\_rx\_data(struct worker \*wrk, struct h2\_sess \*h2, struct h2\_req \*r2) |
|  |  | r2->r\_window += wi; |
|  |  | w2 = 1; |
|  |  | } |
|  |  |  |
|  |  |  |
|  |  | Lck\_Unlock(&h2->sess->mtx); |
|  |  |  |
|  |  | if (w1 || w2) { |
| Expand All | | @@ -795,7 +824,7 @@ h2\_vfp\_body(struct vfp\_ctx \*vc, struct vfp\_entry \*vfe, void \*ptr, ssize\_t \*lp) |
|  |  | struct h2\_req \*r2; |
|  |  | struct h2\_sess \*h2; |
|  |  | unsigned l; |
|  |  | enum vfp\_status retval = VFP\_OK; |
|  |  | enum vfp\_status retval; |
|  |  |  |
|  |  | CHECK\_OBJ\_NOTNULL(vc, VFP\_CTX\_MAGIC); |
|  |  | CHECK\_OBJ\_NOTNULL(vfe, VFP\_ENTRY\_MAGIC); |
| Expand All | | @@ -808,7 +837,6 @@ h2\_vfp\_body(struct vfp\_ctx \*vc, struct vfp\_entry \*vfe, void \*ptr, ssize\_t \*lp) |
|  |  | \*lp = 0; |
|  |  |  |
|  |  | Lck\_Lock(&h2->sess->mtx); |
|  |  | assert (r2->state == H2\_S\_OPEN); |
|  |  | r2->cond = &vc->wrk->cond; |
|  |  | while (h2->mailcall != r2 && h2->error == 0 && r2->error == 0) |
|  |  | AZ(Lck\_CondWait(r2->cond, &h2->sess->mtx, 0)); |
| Expand All | | @@ -831,12 +859,10 @@ h2\_vfp\_body(struct vfp\_ctx \*vc, struct vfp\_entry \*vfe, void \*ptr, ssize\_t \*lp) |
|  |  | Lck\_Unlock(&h2->sess->mtx); |
|  |  | return (VFP\_OK); |
|  |  | } |
|  |  | if (h2->rxf\_len == 0) { |
|  |  | if (h2->rxf\_flags & H2FF\_DATA\_END\_STREAM) { |
|  |  | retval = VFP\_END; |
|  |  | r2->state = H2\_S\_CLOS\_REM; |
|  |  | } |
|  |  | } |
|  |  | if (h2->rxf\_len == 0 && r2->state >= H2\_S\_CLOS\_REM) |
|  |  | retval = VFP\_END; |
|  |  | else |
|  |  | retval = VFP\_OK; |
|  |  | h2->mailcall = NULL; |
|  |  | AZ(pthread\_cond\_signal(h2->cond)); |
|  |  | } |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `82b0a62`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvarnishcache%2Fvarnish-cache%2Fcommit%2F82b0a629f60136e76112c6f2c6372cce77b683be) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


