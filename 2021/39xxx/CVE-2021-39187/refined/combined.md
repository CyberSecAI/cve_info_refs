=== Content from github.com_5c504429_20250114_191822.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fparse-community%2Fparse-server%2Freleases%2Ftag%2F4.10.3)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fparse-community%2Fparse-server%2Freleases%2Ftag%2F4.10.3)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=parse-community%2Fparse-server)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[parse-community](/parse-community)
/
**[parse-server](/parse-community/parse-server)**
Public

* [Notifications](/login?return_to=%2Fparse-community%2Fparse-server) You must be signed in to change notification settings
* [Fork
  4.8k](/login?return_to=%2Fparse-community%2Fparse-server)
* [Star
   21k](/login?return_to=%2Fparse-community%2Fparse-server)

* [Code](/parse-community/parse-server/tree/4.10.3)
* [Issues
  379](/parse-community/parse-server/issues)
* [Pull requests
  94](/parse-community/parse-server/pulls)
* [Actions](/parse-community/parse-server/actions)
* [Projects
  0](/parse-community/parse-server/projects)
* [Wiki](/parse-community/parse-server/wiki)
* [Security](/parse-community/parse-server/security)
* [Insights](/parse-community/parse-server/pulse)

Additional navigation options

* [Code](/parse-community/parse-server/tree/4.10.3)
* [Issues](/parse-community/parse-server/issues)
* [Pull requests](/parse-community/parse-server/pulls)
* [Actions](/parse-community/parse-server/actions)
* [Projects](/parse-community/parse-server/projects)
* [Wiki](/parse-community/parse-server/wiki)
* [Security](/parse-community/parse-server/security)
* [Insights](/parse-community/parse-server/pulse)

1. [Releases](/parse-community/parse-server/releases)
2. [4.10.3](/parse-community/parse-server/releases/tag/4.10.3)

# 4.10.3

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/parse-community/parse-server/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.10.3)

 Loading

[View all tags](/parse-community/parse-server/tags)

![@mtrezza](https://avatars.githubusercontent.com/u/5673677?s=40&v=4)
[mtrezza](/mtrezza)
released this
02 Sep 11:10

·
[47 commits](/parse-community/parse-server/compare/4.10.3...release-4.x.x)
to release-4.x.x
since this release

[4.10.3](/parse-community/parse-server/tree/4.10.3)

[`c71ae7d`](/parse-community/parse-server/commit/c71ae7d478ac27ed9cfdd5b0bb0e461c846d040e)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

[Full Changelog](https://github.com/parse-community/parse-server/compare/4.10.2...4.10.3)

### Security Fixes

* Validate `explain` query parameter to avoid a server crash due to MongoDB bug [NODE-3463](https://jira.mongodb.org/browse/NODE-3463) (Kartal Kaan Bozdogan) [GHSA-xqp8-w826-hh6x](https://github.com/parse-community/parse-server/security/advisories/GHSA-xqp8-w826-hh6x)

 Assets
2

 Loading

 ❤️
2
 sadortun and adamward459 reacted with heart emoji

All reactions

* ❤️
  2 reactions

 2 people reacted

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from jira.mongodb.org_6a61d418_20250114_191824.html ===


[Log in](/login.jsp?os_destination=%2Fbrowse%2FNODE-3463)[Skip to main content](#main)[Skip to sidebar](#sidebar)[![MongoDB Jira](/s/-n17lfl/9160001/fy41z4/_/jira-logo-scaled.png)](https://jira.mongodb.org/secure/MyJiraHome.jspa)

* [Dashboards](/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/secure/BrowseProjects.jspa "View recent projects and browse a list of projects")
* [Issues](/issues/ "Search for issues and view recent issues")
* [eazyBI](/plugins/servlet/eazybi)

* Give feedback to Atlassian
* [Help](/secure/ViewKeyboardShortcuts%21default.jspa "Help")
  + [Keyboard Shortcuts](/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [About Jira](/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/login.jsp?os_destination=%2Fbrowse%2FNODE-3463)
  + [Acknowledged notifications](/plugins/servlet/wittified/profile/notifications)

![Uploaded image for project: 'Node.js Driver'](https://jira.mongodb.org/secure/projectavatar?pid=10880&avatarId=26104)

1. [Node.js Driver](/browse/NODE)
2. [NODE-3463](/browse/NODE-3463)

## Cannot catch exception with useUnifiedTopology

Schedule Issue[Undo Transition](/secure/UndoTransition%21default.jspa?id=1827173)ClosedExportnullXMLWordPrintableJSON
### Details

* **Type:**
  ![Icon: Bug](/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.") Bug
* **Resolution:**
  Fixed
* **Priority:**
  ![Icon: Major - P3](/images/icons/priorities/major.svg "Major - P3 - Major loss of function.") Major - P3
* **Fix Version/s:**
  [3.7.0](/issues/?jql=project+%3D+NODE+AND+fixVersion+%3D+3.7.0 "3.7.0 ")
* **Affects Version/s:**
  3.6.0
* **Component/s:**
  None
* **Labels:**
  + [external-user](/issues/?jql=labels+%3D+external-user "external-user")

* [**Fields**](#customfield-panel-1)
* [**Validation Checklist**](#customfield-panel-2)
* [**Docs**](#customfield-panel-3)

* **Story Points:**
  2

* **Checklist:**
  Empty

  show more

  show less

* **Documentation Changes:**
  Not Needed

### Description

Passing an invalid value for the explain parameter throws an exception.

However, when *useUnifiedTopology* is set to true, the exception cannot be caught.

Tested with mongodb@3.6.9 and MongoDB server version 4.4.7

Please find attached a minimal example that demonstrates the issue. Note that setting *useUnifiedTopology* to false lets the application catch/handle the error.

### Attachments

### Attachments

* Options
  + - [Sort By Name](/browse/NODE-3463?attachmentSortBy=fileName#attachmentmodule "viewissue.subtasks.tab.show.all.name")
    - [Sort By Date](/browse/NODE-3463?attachmentSortBy=dateTime#attachmentmodule "Sort By Date")
    - [Ascending](/browse/NODE-3463?attachmentOrder=asc#attachmentmodule "Ascending")
    - [Descending](/browse/NODE-3463?attachmentOrder=desc#attachmentmodule "Descending")
    - [Thumbnails](/browse/NODE-3463?attachmentViewMode=gallery#attachmentmodule "Thumbnails")
    - [List](/browse/NODE-3463?attachmentViewMode=list#attachmentmodule "List")
    - [Download All](/secure/attachmentzip/1827173.zip "Download all attachments as a ZIP file")

1. [index.js](/secure/attachment/326243/index.js "index.js - Latest Jul 21 2021 01:16:19 PM UTC - Kartal Kaan Bozdoğan")0.8 kBJul 21 2021 01:16:19 PM UTC
### Issue Links

related to

![Bug - A problem which impairs or prevents the functions of the product.](/secure/viewavatar?size=xsmall&avatarId=14703&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.")
[NODE-3377](/browse/NODE-3377)
Driver does not allow arbitrary explain levels (3.7)

* ![Major - P3 - Major loss of function.](/images/icons/priorities/major.svg "Major - P3 - Major loss of function.")
* Closed

### Activity

### People

Assignee:
![daria.pardue@mongodb.com](https://jira.mongodb.org/secure/useravatar?size=small&avatarId=10122)
Daria Pardue

Reporter:
![kartalkaan.bozdogan@ocell.io](https://jira.mongodb.org/secure/useravatar?size=small&avatarId=10122)
Kartal Kaan Bozdoğan

Reviewers:

 Daria Pardue

Votes:
0
Vote for this issue

Watchers:
4
Start watching this issue

### Dates

Created:

Jul 21 2021 01:18:07 PM UTC

Updated:

Oct 29 2023 01:41:35 PM UTC

Resolved:

Aug 25 2021 06:47:11 PM UTC

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/secure/CreateIssue%21default.jspa)

Powered by a free Atlassian [Jira](http://www.atlassian.com/software/jira) open source license for MongoDB. Try Jira - [bug tracking software](http://www.atlassian.com/software/jira) for *your* team.

[Atlassian](http://www.atlassian.com/)



=== Content from github.com_d4bb2cd9_20250114_191821.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fparse-community%2Fparse-server%2Fcommit%2F308668c89474223e2448be92d6823b52c1c313ec)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fparse-community%2Fparse-server%2Fcommit%2F308668c89474223e2448be92d6823b52c1c313ec)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=parse-community%2Fparse-server)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[parse-community](/parse-community)
/
**[parse-server](/parse-community/parse-server)**
Public

* [Notifications](/login?return_to=%2Fparse-community%2Fparse-server) You must be signed in to change notification settings
* [Fork
  4.8k](/login?return_to=%2Fparse-community%2Fparse-server)
* [Star
   21k](/login?return_to=%2Fparse-community%2Fparse-server)

* [Code](/parse-community/parse-server)
* [Issues
  379](/parse-community/parse-server/issues)
* [Pull requests
  94](/parse-community/parse-server/pulls)
* [Actions](/parse-community/parse-server/actions)
* [Projects
  0](/parse-community/parse-server/projects)
* [Wiki](/parse-community/parse-server/wiki)
* [Security](/parse-community/parse-server/security)
* [Insights](/parse-community/parse-server/pulse)

Additional navigation options

* [Code](/parse-community/parse-server)
* [Issues](/parse-community/parse-server/issues)
* [Pull requests](/parse-community/parse-server/pulls)
* [Actions](/parse-community/parse-server/actions)
* [Projects](/parse-community/parse-server/projects)
* [Wiki](/parse-community/parse-server/wiki)
* [Security](/parse-community/parse-server/security)
* [Insights](/parse-community/parse-server/pulse)

## Commit

[Permalink](/parse-community/parse-server/commit/308668c89474223e2448be92d6823b52c1c313ec)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-xqp8-w826-hh6x](https://github.com/advisories/GHSA-xqp8-w826-hh6x "GHSA-xqp8-w826-hh6x")

[Browse files](/parse-community/parse-server/tree/308668c89474223e2448be92d6823b52c1c313ec)
Browse the repository at this point in the history

```
* Added a test case that triggers the query parameter crash

* rest.js: validate the explain parameter to keep the nodejs driver from throwing an uncatchable exception and crashing the server (see <https://jira.mongodb.org/browse/NODE-3463>)
RestQuery.js: Check whether explain mode is enabled not by "!== true", but by the "!" operator. explain can have string values.
Added tests that validate correct behaviour on different explain values

* Refactor the new tests

* Simplify the new tests
Also do a sanity check on the explain results

* Test refactor

* Exclude queryPlannerExtended as it is not supported by the testing environment
  Simplifies the tests

* Restrict the changes to mongodb
  Moved the verification of the explain value from rest.js to MongoStorageAdapter.js
  Also restricted the relevant unit tests to mongodb

* Added changelog entry

* reformat changelog entry

* Update CHANGELOG.md

Co-authored-by: Kartal Kaan Bozdoğan <kartalkaanbozdogan@gmail.com>
Co-authored-by: Manuel <5673677+mtrezza@users.noreply.github.com>
```

* Loading branch information

[![@davimacedo](https://avatars.githubusercontent.com/u/4430059?s=40&v=4)](/davimacedo) [![@mstniy](https://avatars.githubusercontent.com/u/20149697?s=40&v=4)](/mstniy) [![@mtrezza](https://avatars.githubusercontent.com/u/5673677?s=40&v=4)](/mtrezza)

3 people

authored
Sep 2, 2021

1 parent
[1e0d408](/parse-community/parse-server/commit/1e0d408ca38127813d2034eadc97e08abed21843)

commit 308668c

 Show file tree

 Hide file tree

Showing
**4 changed files**
with
**80 additions**
and
**4 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* CHANGELOG.md
  [CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
* spec

  + spec/ParseQuery.spec.js
    [ParseQuery.spec.js](#diff-4eb8d42a5d45b847a370a1bd1fa92f907b85cdb171aa4dcebece0c834fc6681c)
* src

  + Adapters/Storage/Mongo

    - src/Adapters/Storage/Mongo/MongoStorageAdapter.js
      [MongoStorageAdapter.js](#diff-5ee61855e1fb45f530b2d7dce4edc1e935a94c04564fa6471a86423c96043d5c)
  + src/RestQuery.js
    [RestQuery.js](#diff-172d93ac0d59afc111f2bccf8e2bcf10f618c05fc4b297300e7c8c65b60f942a)

## There are no files selected for viewing

13 changes: 11 additions & 2 deletions

13
[CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed "CHANGELOG.md")

Show comments

[View file](/parse-community/parse-server/blob/308668c89474223e2448be92d6823b52c1c313ec/CHANGELOG.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -4,7 +4,8 @@ Jump directly to a version: |
|  |  |  |
|  |  | | 4.x | |
|  |  | |--------------------------------------| |
|  |  | | [\*\*4.10.2 (latest release)\*\*](#4102) | |
|  |  | | [\*\*4.10.3 (latest release)\*\*](#4103) | |
|  |  | | [4.10.2](#4102) | |
|  |  | | [4.10.1](#4101) | |
|  |  | | [4.10.0](#4100) | |
|  |  | | [4.5.2](#452) | |
| Expand Down  Expand Up | | @@ -93,14 +94,16 @@ Jump directly to a version: |
|  |  | \_\_\_ |
|  |  |  |
|  |  | ## Unreleased (Master Branch) |
|  |  | [Full Changelog](https://github.com/parse-community/parse-server/compare/4.10.2...master) |
|  |  | [Full Changelog](https://github.com/parse-community/parse-server/compare/4.10.3...master) |
|  |  |  |
|  |  | ### Breaking Changes |
|  |  | - Improved schema caching through database real-time hooks. Reduces DB queries, decreases Parse Query execution time and fixes a potential schema memory leak. If multiple Parse Server instances connect to the same DB (for example behind a load balancer), set the [Parse Server Option](https://parseplatform.org/parse-server/api/master/ParseServerOptions.html) `databaseOptions.enableSchemaHooks: true` to enable this feature and keep the schema in sync across all instances. Failing to do so will cause a schema change to not propagate to other instances and re-syncing will only happen when these instances restart. The options `enableSingleSchemaCache` and `schemaCacheTTL` have been removed. To use this feature with MongoDB, a replica set cluster with [change stream](https://docs.mongodb.com/manual/changeStreams/#availability) support is required. (Diamond Lewis, SebC) [#7214](https://github.com/parse-community/parse-server/issues/7214) |
|  |  | - Added file upload restriction. File upload is now only allowed for authenticated users by default for improved security. To allow file upload also for Anonymous Users or Public, set the `fileUpload` parameter in the [Parse Server Options](https://parseplatform.org/parse-server/api/master/ParseServerOptions.html) (dblythy, Manuel Trezza) [#7071](https://github.com/parse-community/parse-server/pull/7071) |
|  |  | - Removed [parse-server-simple-mailgun-adapter](https://github.com/parse-community/parse-server-simple-mailgun-adapter) dependency; to continue using the adapter it has to be explicitly installed (Manuel Trezza) [#7321](https://github.com/parse-community/parse-server/pull/7321) |
|  |  | - Remove support for MongoDB 3.6 which has reached its End-of-Life date and PostgreSQL 10 (Manuel Trezza) [#7315](https://github.com/parse-community/parse-server/pull/7315) |
|  |  | - Remove support for Node 10 which has reached its End-of-Life date (Manuel Trezza) [#7314](https://github.com/parse-community/parse-server/pull/7314) |
|  |  | - Remove S3 Files Adapter from Parse Server, instead install separately as `@parse/s3-files-adapter` (Manuel Trezza) [#7324](https://github.com/parse-community/parse-server/pull/7324) |
|  |  |  |
|  |  | ### Notable Changes |
|  |  | - Added Parse Server Security Check to report weak security settings (Manuel Trezza, dblythy) [#7247](https://github.com/parse-community/parse-server/issues/7247) |
|  |  | - EXPERIMENTAL: Added new page router with placeholder rendering and localization of custom and feature pages such as password reset and email verification (Manuel Trezza) [#7128](https://github.com/parse-community/parse-server/pull/7128) |
| Expand Down  Expand Up | | @@ -147,6 +150,12 @@ \_\_\_ |
|  |  | - Add CI check to add changelog entry (Manuel Trezza) [#7512](https://github.com/parse-community/parse-server/pull/7512) |
|  |  | - Refactor: uniform issue templates across repos (Manuel Trezza) [#7528](https://github.com/parse-community/parse-server/pull/7528) |
|  |  |  |
|  |  | ## 4.10.3 |
|  |  | [Full Changelog](https://github.com/parse-community/parse-server/compare/4.10.2...4.10.3) |
|  |  |  |
|  |  | ### Security Fixes |
|  |  | - Validate `explain` query parameter to avoid a server crash due to MongoDB bug [NODE-3463](https://jira.mongodb.org/browse/NODE-3463) (Kartal Kaan Bozdogan) [GHSA-xqp8-w826-hh6x](https://github.com/parse-community/parse-server/security/advisories/GHSA-xqp8-w826-hh6x) |
|  |  |  |
|  |  | ## 4.10.2 |
|  |  | [Full Changelog](https://github.com/parse-community/parse-server/compare/4.10.1...4.10.2) |
|  |  |  |
| Expand Down | |  |

48 changes: 48 additions & 0 deletions

48
[spec/ParseQuery.spec.js](#diff-4eb8d42a5d45b847a370a1bd1fa92f907b85cdb171aa4dcebece0c834fc6681c "spec/ParseQuery.spec.js")

Show comments

[View file](/parse-community/parse-server/blob/308668c89474223e2448be92d6823b52c1c313ec/spec/ParseQuery.spec.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -37,6 +37,54 @@ describe('Parse.Query testing', () => { |
|  |  | }); |
|  |  | }); |
|  |  |  |
|  |  | it\_only\_db('mongo')('gracefully handles invalid explain values', async () => { |
|  |  | // Note that anything that is not truthy (like 0) does not cause an exception, as they get swallowed up by ClassesRouter::optionsFromBody |
|  |  | const values = [1, 'yolo', { a: 1 }, [1, 2, 3]]; |
|  |  | for (const value of values) { |
|  |  | try { |
|  |  | await request({ |
|  |  | method: 'GET', |
|  |  | url: `http://localhost:8378/1/classes/\_User?explain=${value}`, |
|  |  | json: true, |
|  |  | headers: masterKeyHeaders, |
|  |  | }); |
|  |  | fail('request did not throw'); |
|  |  | } catch (e) { |
|  |  | // Expect that Parse Server did not crash |
|  |  | expect(e.code).not.toEqual('ECONNRESET'); |
|  |  | // Expect that Parse Server validates the explain value and does not crash; |
|  |  | // see https://jira.mongodb.org/browse/NODE-3463 |
|  |  | equal(e.data.code, Parse.Error.INVALID\_QUERY); |
|  |  | equal(e.data.error, 'Invalid value for explain'); |
|  |  | } |
|  |  | // get queries (of the form '/classes/:className/:objectId' cannot have the explain key, see ClassesRouter.js) |
|  |  | // so it is enough that we test find queries |
|  |  | } |
|  |  | }); |
|  |  |  |
|  |  | it\_only\_db('mongo')('supports valid explain values', async () => { |
|  |  | const values = [ |
|  |  | false, |
|  |  | true, |
|  |  | 'queryPlanner', |
|  |  | 'executionStats', |
|  |  | 'allPlansExecution', |
|  |  | // 'queryPlannerExtended' is excluded as it only applies to MongoDB Data Lake which is currently not available in our CI environment |
|  |  | ]; |
|  |  | for (const value of values) { |
|  |  | const response = await request({ |
|  |  | method: 'GET', |
|  |  | url: `http://localhost:8378/1/classes/\_User?explain=${value}`, |
|  |  | json: true, |
|  |  | headers: masterKeyHeaders, |
|  |  | }); |
|  |  | expect(response.status).toBe(200); |
|  |  | if (value) { |
|  |  | expect(response.data.results.ok).toBe(1); |
|  |  | } |
|  |  | } |
|  |  | }); |
|  |  |  |
|  |  | it('searching for null', function (done) { |
|  |  | const baz = new TestObject({ foo: null }); |
|  |  | const qux = new TestObject({ foo: 'qux' }); |
| Expand Down | |  |

19 changes: 19 additions & 0 deletions

19
[src/Adapters/Storage/Mongo/MongoStorageAdapter.js](#diff-5ee61855e1fb45f530b2d7dce4edc1e935a94c04564fa6471a86423c96043d5c "src/Adapters/Storage/Mongo/MongoStorageAdapter.js")

Show comments

[View file](/parse-community/parse-server/blob/308668c89474223e2448be92d6823b52c1c313ec/src/Adapters/Storage/Mongo/MongoStorageAdapter.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -108,6 +108,23 @@ const mongoSchemaFromFieldsAndClassNameAndCLP = ( |
|  |  | return mongoObject; |
|  |  | }; |
|  |  |  |
|  |  | function validateExplainValue(explain) { |
|  |  | if (explain) { |
|  |  | // The list of allowed explain values is from node-mongodb-native/lib/explain.js |
|  |  | const explainAllowedValues = [ |
|  |  | 'queryPlanner', |
|  |  | 'queryPlannerExtended', |
|  |  | 'executionStats', |
|  |  | 'allPlansExecution', |
|  |  | false, |
|  |  | true, |
|  |  | ]; |
|  |  | if (!explainAllowedValues.includes(explain)) { |
|  |  | throw new Parse.Error(Parse.Error.INVALID\_QUERY, 'Invalid value for explain'); |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | export class MongoStorageAdapter implements StorageAdapter { |
|  |  | // Private |
|  |  | \_uri: string; |
| Expand Down  Expand Up | | @@ -578,6 +595,7 @@ export class MongoStorageAdapter implements StorageAdapter { |
|  |  | query: QueryType, |
|  |  | { skip, limit, sort, keys, readPreference, hint, caseInsensitive, explain }: QueryOptions |
|  |  | ): Promise<any> { |
|  |  | validateExplainValue(explain); |
|  |  | schema = convertParseSchemaToMongoSchema(schema); |
|  |  | const mongoWhere = transformWhere(className, query, schema); |
|  |  | const mongoSort = \_.mapKeys(sort, (value, fieldName) => |
| Expand Down  Expand Up | | @@ -756,6 +774,7 @@ export class MongoStorageAdapter implements StorageAdapter { |
|  |  | hint: ?mixed, |
|  |  | explain?: boolean |
|  |  | ) { |
|  |  | validateExplainValue(explain); |
|  |  | let isPointerField = false; |
|  |  | pipeline = pipeline.map(stage => { |
|  |  | if (stage.$group) { |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[src/RestQuery.js](#diff-172d93ac0d59afc111f2bccf8e2bcf10f618c05fc4b297300e7c8c65b60f942a "src/RestQuery.js")

Show comments

[View file](/parse-community/parse-server/blob/308668c89474223e2448be92d6823b52c1c313ec/src/RestQuery.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -657,7 +657,7 @@ RestQuery.prototype.runFind = function (options = {}) { |
|  |  | return this.config.database |
|  |  | .find(this.className, this.restWhere, findOptions, this.auth) |
|  |  | .then(results => { |
|  |  | if (this.className === '\_User' && findOptions.explain !== true) { |
|  |  | if (this.className === '\_User' && !findOptions.explain) { |
|  |  | for (var result of results) { |
|  |  | cleanResultAuthData(result); |
|  |  | } |
| Expand Down  Expand Up | | @@ -866,7 +866,7 @@ function includePath(config, auth, response, path, restOptions = {}) { |
|  |  | return set; |
|  |  | } |
|  |  | } |
|  |  | if (i == (keyPath.length - 1)) { |
|  |  | if (i == keyPath.length - 1) { |
|  |  | set.add(keyPath[i]); |
|  |  | } |
|  |  | return set; |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `308668c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fparse-community%2Fparse-server%2Fcommit%2F308668c89474223e2448be92d6823b52c1c313ec) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_098d95f9_20250114_191823.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fparse-community%2Fparse-server%2Fsecurity%2Fadvisories%2FGHSA-xqp8-w826-hh6x)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fparse-community%2Fparse-server%2Fsecurity%2Fadvisories%2FGHSA-xqp8-w826-hh6x)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=parse-community%2Fparse-server)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[parse-community](/parse-community)
/
**[parse-server](/parse-community/parse-server)**
Public

* [Notifications](/login?return_to=%2Fparse-community%2Fparse-server) You must be signed in to change notification settings
* [Fork
  4.8k](/login?return_to=%2Fparse-community%2Fparse-server)
* [Star
   21k](/login?return_to=%2Fparse-community%2Fparse-server)

* [Code](/parse-community/parse-server)
* [Issues
  379](/parse-community/parse-server/issues)
* [Pull requests
  94](/parse-community/parse-server/pulls)
* [Actions](/parse-community/parse-server/actions)
* [Projects
  0](/parse-community/parse-server/projects)
* [Wiki](/parse-community/parse-server/wiki)
* [Security](/parse-community/parse-server/security)
* [Insights](/parse-community/parse-server/pulse)

Additional navigation options

* [Code](/parse-community/parse-server)
* [Issues](/parse-community/parse-server/issues)
* [Pull requests](/parse-community/parse-server/pulls)
* [Actions](/parse-community/parse-server/actions)
* [Projects](/parse-community/parse-server/projects)
* [Wiki](/parse-community/parse-server/wiki)
* [Security](/parse-community/parse-server/security)
* [Insights](/parse-community/parse-server/pulse)

# Server crashes with invalid explain query parameter

High

[mtrezza](/mtrezza)
published
GHSA-xqp8-w826-hh6x
Sep 2, 2021

## Package

npm

parse-server
([npm](/advisories?query=ecosystem%3Anpm))

## Affected versions

< 4.10.3

## Patched versions

4.10.3

## Description

### Impact

Parse Server crashes when if a query request contains an invalid value for the `explain` option. This is due to a bug in the MongoDB Node.js driver which throws an exception that Parse Server cannot catch.

### Patches

Upgrade to Parse Server 4.10.3.

### Workarounds

No known workaround.

### References

<https://jira.mongodb.org/browse/NODE-3463>

### Severity

High

### CVE ID

CVE-2021-39187

### Weaknesses

No CWEs

### Credits

* [![@mstniy](https://avatars.githubusercontent.com/u/20149697?s=40&v=4)](/mstniy)
  [mstniy](/mstniy)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


