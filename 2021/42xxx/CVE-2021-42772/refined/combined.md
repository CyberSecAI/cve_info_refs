=== Content from docs.broadcom.com_1d01e8aa_20250115_082144.html ===
Release Notes

Emulex® HBA Manager Application
for Linux
Releases 12.8.542.28-1 and 12.8.542.31-1

Purpose and Contact Information

These release notes describe the new features, resolved issues, known issues, and technical tips associated with this
release of the Emulex® HBA Manager application for Linux.

For the latest product source files and documentation, and for supported driver versions, go to www.broadcom.com. If you
have questions or require additional information, contact an authorized Broadcom® Technical Support representative at
ecd-tech.support@broadcom.com.

NOTE: The Emulex OneCommand™ Manager application has been renamed as the Emulex HBA Manager application.

However, the following items within the application continue to use OneCommand:

 Kit names

 Script names

 Directory names

 Command names

New Features

Release 12.8.542.31-1

No new features were added to this release.

Release 12.8.542.28-1

Support is deprecated for the following operating systems:

 RHEL 8.1
 SLES 15 SP1

Broadcom

HBAManager-Lin-RN12811-101
November 2, 2021

Emulex HBA Manager Application for Linux Release Notes

Releases 12.8.542.28-1 and 12.8.542.31-1

Resolved Issues

Release 12.8.542.31-1

Four security issues related to remote management were resolved (CVE-2021-42772, CVE-2021-42773, CVE-2021-42774,
and CVE-2021-42775). These vulnerabilities were reported to Broadcom by the Red Team at Credit Suisse.

 CVE-2021-42772 - Broadcom Emulex HBA Manager/One Command Manager versions before 11.4.425.0 and

12.8.542.31, if not installed in Strictly Local Management mode, have a buffer overflow vulnerability in the remote
GetDumpFile command that could allow a user to attempt various attacks. In non-secure mode, the user is
unauthenticated.

 CVE-2021-42773 - Broadcom Emulex HBA Manager/One Command Manager versions before 11.4.425.0 and

12.8.542.31, if not installed in Strictly Local Management mode, could allow a user to retrieve an arbitrary file from a
remote host with the GetDumpFile command. In non-secure mode, the user is unauthenticated.

 CVE-2021-42774 - Broadcom Emulex HBA Manager/One Command Manager versions before 11.4.425.0 and

12.8.542.31, if not installed in Strictly Local Management mode, have a buffer overflow vulnerability in the remote
firmware download feature that could allow remote unauthenticated users to perform various attacks. In non-secure
mode, the user is unauthenticated.

 CVE-2021-42775 - Broadcom Emulex HBA Manager/One Command Manager versions before 11.4.425.0 and

12.8.542.31, if not installed in Strictly Local Management mode, have a vulnerability in the remote firmware download
feature that could allow a user to place or replace an arbitrary file on the remote host. In non-secure mode, the user is
unauthenticated.

Release 12.8.542.28-1

No issues were resolved in this release.

Known Issues

1. For an NVMe port, do not use the Emulex HBA Manager CLI utility to discover the host remotely. Otherwise, the port

type is displayed as FC instead of FC+NVMe.
Workaround

Use local management instead of remote management on NVMe ports.

2. Launching Help > Contents from the Emulex HBA Manager GUI in a Firefox browser results in an unresponsive page,

and the help contents are not seen.

Workaround

Turn off the strict cross-origin policy (enabled by default) in the Firefox configuration by performing the following steps:

a. Open a new tab and enter about:config in the address bar.
b. Search for the strict_origin_policy preference.

c. Toggle the security.fileuri.strict_origin_policy value to false (off).

d. Close the browser.

Broadcom

HBAManager-Lin-RN12811-101
2

Emulex HBA Manager Application for Linux Release Notes

Releases 12.8.542.28-1 and 12.8.542.31-1

3. The online help in the release 12.8.542.28-1 Emulex HBA Manager GUI is not up to date. Refer to the Emulex HBA

Manager Application User Guide release 12.8 for up-to-date information about the following topics:

– The correct illustration for adding a host
– The instructions for installing the Emulex HBA Manager application without invoking a daemon
– The description for the Function Summary area of the Host Information tab
– Instructions for performing an immediate authentication
– Procedures for managing firmware logging

4. Revision A of the FOIT AFCT-57F3TMZ-ELX (16GFC longwave optic transceiver) does not support D_Port (also called

ClearLink®) for Brocade® switches and MDS diagnostics for Cisco switches.

5. Neither Revision A nor Revision B of the FOIT AFCT-57F3TMZ-ELX (16GFC longwave optic transceiver) and

AFCT-57G5MZ-ELX (32GFC longwave optic transceiver) supports D_Port for Brocade switches.

6. The Emulex HBA Manager application does not display updated driver parameters after a batch update.

Workaround

None.

7. To perform a firmware dump on an LPe35000-series adapter on the Ubuntu 18.04 inbox driver (except on the Ubuntu

18.04.3 HWE release), you cannot use the Emulex HBA Manager application. To perform a firmware dump on this driver,
see Technical Tips, Item 1, in these release notes.

8. On LPe35000-series adapters, loopback tests are not functional on the Ubuntu 18.04 operating system (except on the

Ubuntu 18.04.3 HWE release).

9. On LPe35000-series adapters, a host reboot is required after a firmware update on the Ubuntu 18.04 operating system

(except on the Ubuntu 18.04.3 HWE release).

10. The Emulex HBA Manager application GUI cannot be used to set a hash priority to a single value on an HBA port.

Workaround

Use HBACMD to set a hash priority to a single value on the HBA port. Ensure that the same hash priority value is set on
the switch or authentication will fail.

11. Boot from SAN is not supported if FC-SP-2 authentication (DH-CHAP) is enabled.

12. Updating the NVMe BFS installation from RHEL 8.1 to a later RHEL 8.x release requires the rhel8u1_upgrade.sh

script, which ensures that the NVMe BFS setup is maintained through the update process.

The rhel8u1_upgrade.sh script is packaged in the nvmefc-dm--1.rhel8.tar.gz kit inside the elx-nvmefc-
dm-<build>-n.tar.gz preinstallation kit. For more information about the preinstallation kit, refer to the Emulex Boot
for the Fibre Channel and NVMe over FC Protocols User Guide.

Before you run the script, you must configure the yum repository for the new operating system. You can update the
operating system at any time after you have run the script.

Broadcom

HBAManager-Lin-RN12811-101
3

Emulex HBA Manager Application for Linux Release Notes

Releases 12.8.542.28-1 and 12.8.542.31-1

Technical Tips

1. To perform a firmware dump on the inbox drivers listed in Known Issues, Item 7, perform the following steps:

a. Ensure that the latest Emulex HBA Manager core application kit for Linux is installed on the host.

b. Download the LPe35000-series HBA FW Dump Tool from the Broadcom website at www.broadcom.com.

c. Type the following commands to extract and install the tool:

tar xzf elx-lpe-35000-fw-dump-tool-<version>-ds-1.tar.gz
cd elx-lpe-35000-fw-dump-tool-<version>-ds-1/
rpm -ivh elx-lpe-35000-fw-dump-tool-<version>.<platform>.rpm

A window similar to the following is displayed.

2. Type 1 and press Enter to select the port for which you want to perform the firmware dump.

A window similar to the following is displayed.

NOTE: A warning message appears if initiating a firmware dump on a specific port will also affect another port on the same

adapter ASIC.

Broadcom

HBAManager-Lin-RN12811-101
4

Emulex HBA Manager Application for Linux Release Notes

Releases 12.8.542.28-1 and 12.8.542.31-1

a. Type the number of the port for which you want to perform the firmware dump, and press Enter.

A window similar to the following is displayed.

b. When the desired port is identified as the current port, type 2 and press Enter to initiate the firmware dump on the

current port.

If the firmware dump is successful, the firmware dump tool closes automatically.

c. Restart the elxhbamgrd service by typing the following command:

service elxhbamgrd restart

This command allows such applications as the Emulex HBA Manager application to be refreshed.

By default, the firmware dump file is available on the host in the /var/opt/Emulex/ocmanager/Dump/ directory after
the elxhbamgrd service has been restarted.

3.

If you change the volatile World Wide Name (WWN) on an LPe16000-series adapter, a reboot is required.

4. The Emulex HBA Manager application does not display the OS Device Name for LUNs attached to vPorts.

In the LUN Information tab, under Mapping Information, the OS Device Name field displays N/A instead of the device
name. All other information on the LUN Information tab is displayed correctly.

5. When you install the Emulex HBA Manager application on a guest operating system, answers to the installer prompts

are ignored.

When you install the Emulex HBA Manager application on a guest operating system, you are presented with
management mode options (local only, full-management, read-only, and so on). Answers to these questions are ignored;
all installations on guest operating systems are set to local only, read-only, and remote management.

6.

Interference can occur with the Emulex HBA Manager application’s ability to permanently change WWNs.

Some newer adapters on some newer systems use techniques in the BIOS code at boot time to configure the adapter,
such as the adapter WWN. In such cases, this might interfere with the Emulex HBA Manager application’s ability to make
permanent (nonvolatile) changes to the adapter’s WWN.

Broadcom

HBAManager-Lin-RN12811-101
5

Emulex HBA Manager Application for Linux Release Notes

Releases 12.8.542.28-1 and 12.8.542.31-1

7. Creating Secure Management users and groups after the Emulex HBA Manager application is installed in Secure

Management mode causes the GUI to fail.

If the Secure Management users and groups are created after the Emulex HBA Manager application has been installed
in Secure Management mode, when you attempt to start the Emulex HBA Manager application GUI as a member of a
group, the application does not run. The operating system displays the following error message:
-Bash: /usr/sbin/OneCommand Manager/OneCommand Manager: Permission denied
Workaround

Do one of the following:

– Create the users and groups before you install the Emulex HBA Manager application in Secure Management mode.
– Uninstall and reinstall the Emulex HBA Manager application.

8. Secure Management mode on Linux systems requires Pluggable Authentication Module (PAM) authentication

configuration on the host machine.

In Secure Management mode, a user is authenticated on the machine at the Emulex HBA Manager application GUI
startup. The PAM interface manages this authentication.

Workaround

Configure the /etc/pam.d/passwd file authentication section or its earlier equivalent.

NOTE: Refer to the Emulex HBA Manager Application User Guide for additional information about Secure Management

mode.

9. On some RHEL systems, uninstalling the Red Hat 64-bit libhbaapi RPM deletes entries in the /etc/hba.conf

hbaapi configuration file, thereby disabling the Emulex HBA Manager application hbaapi layer.
Workaround

Reinstall the Emulex HBA Manager application.

10. A permanent driver parameter change fails if the system is rebooted too soon.

When you make permanent driver parameter changes using the Emulex HBA Manager application, the application
automatically makes the required entry in the /etc/modprobe.d/elx-lpfc.conf or equivalent file. Because the
driver loads so early in the Linux machine boot sequence, the new contents of the
/etc/modprobe.d/elx-lpfc.conf file must be reinserted into the Linux initial ramdisk file (using an operating
system utility) for the driver to pick up the new driver parameter value on the next boot. Failure to generate a new initial
ramdisk file prevents the driver from retrieving the new driver parameter value on subsequent driver loads (machine
boots). The Emulex HBA Manager application automatically re-creates the initial ramdisk; however, it can take as long
as 45 to 60 seconds after the driver parameter is changed for a complete initial ramdisk rebuild. If you reboot the machine
immediately after the driver parameter change is made, the automatic re-creation of the initial ramdisk file by the
Emulex HBA Manager application might fail to be completed. In these cases, this failure causes the driver to not obtain
the new driver parameter value upon subsequent reboots.

Workaround

Wait a minimum of 45 to 60 seconds after making the driver parameter change before rebooting the machine.

11. The elxhbamgrd daemon can take up to 30 seconds to stop.

The behavior of the elxhbamgrd daemon is linked with the maximum timeout that the Linux kernel associates with the
block BSG driver interface commands and with the Emulex HBA Manager application register for events function.

Broadcom

HBAManager-Lin-RN12811-101
6

Emulex HBA Manager Application for Linux Release Notes

Releases 12.8.542.28-1 and 12.8.542.31-1

12. Newly added LUNs on a storage array might not appear on the host machine Linux operating system or the Emulex HBA

Manager application.

Workaround

Perform one of the following actions:

– Run the following script from the command shell:

/usr/sbin/lpfc/lun_scan all

– Reboot the host machine after the LUN has been added at the target array.

13. A set link speed issue occurs after an SFP hot swap.

LPe16000-series adapters do not support hot-swapping an SFP if the replacement SFP is not the same model as the
original SFP. Two consequences occur in the Emulex HBA Manager application:
– The Port Attributes tab in the Emulex HBA Manager application or the Emulex HBA Manager PortAttributes

CLI command might display incorrect data for the Supported Link Speeds attribute. This issue is cosmetic.
– Boot from SAN Management might be unable to set the Boot Code Link Speed parameter to 16 Gb/s.
Workaround

After changing the SFP, either reset the LPe16000 port or reboot the server.

14. A dump command on a boot from SAN adapter might cause a system panic.

When the Emulex HBA Manager application performs a dump of an adapter that is booting from a SAN and has no
failover support, the operating system crashes when the adapter is taken offline to perform the boot and write the dump
file to the host file system. The file system is unavailable because the adapter was taken offline.

Workaround

Before performing a dump of an adapter, ensure that the desired adapter is not a boot from SAN adapter. Alternatively,
provide failover support so that when the adapter is taken offline to perform the dump, the boot from SAN connection is
maintained by the failover.

15. When using an Internet Explorer 11 browser, navigating to the Index or Search pages in the online help results in those

pages being blank.

Workaround

Click Contents and refresh the browser, or load the help URL in a different browser.

16. When using Secure Management, if you belong to the ocmadmin group, you might be unable to change settings for

remote adapters.

Workaround

Switch to Full Management when changing the settings on a remote adapter.

17. If the CLI (HBACMD) is used to perform a firmware download to a local adapter, and the Emulex HBA Manager

application GUI is running while that firmware download is occurring, the Emulex HBA Manager application GUI might
experience problems displaying information on various display tabs after the download completes. The value displayed
for most of the fields on the affected tabs or dialogs is N/A.

Workaround

Do one of the following:

– Perform the firmware download using the Emulex HBA Manager application GUI instead of HBACMD.
– When a firmware download has been performed by using HBACMD, if N/A is shown for most of the Emulex HBA

Manager application GUI display fields, exit the GUI and then restart it. The fields are displayed correctly after doing
this action.

– Ensure that the Emulex HBA Manager application GUI is stopped or is not running prior to performing a firmware

download using HBACMD.

Broadcom

HBAManager-Lin-RN12811-101
7

Emulex HBA Manager Application for Linux Release Notes

Releases 12.8.542.28-1 and 12.8.542.31-1

18. To view online help using the Google Chrome browser, you must disable Chrome's security check using the

--allow-file-access-from-files option:
a. Create a copy of the Chrome shortcut on the desktop, and rename it to RH Chrome L.

b. Right-click the new Chrome icon and select Properties.

c. Add the --allow-file-access-from-files text to the end of the path appearing in the target. You must leave

a space between the original string and the tag that you are adding.

d. Click OK to save your settings. Close any open instances of Chrome.

e. To open a local copy of the online help, either use the new shortcut to open Chrome, and then press Ctrl+Open and

browse to the start page or open Chrome with the new shortcut, and then right-click the start page and click
Open With > Google Chrome.

19. The Emulex HBA Manager application GUI might not appear to display the adapter's next boot configuration for all

available ports when a remote management console is being used; for example, integrated Lights Out (iLO), integrated
Dell Remote Access Controller (iDRAC), and Interactive Media Manager (IMM).

The size of the screen provided by these management modules might not be big enough for the Emulex HBA Manager
application window to fully display all the GUI components and information under the Adapter Configuration tab.
Readjust the size of the Emulex HBA Manager application GUI window for all the GUI scroll bars under the Adapter
Configuration tab to become visible. You can also decrease the width of the Discovery-Tree panel.

20. LPe31000-series and LPe32000-series adapters might experience a link-down condition after running a cable link
diagnostics test when they are connected to Brocade switches that are running Fabric OS versions prior to v8.1.2.

Workaround

Manually reset the switch port using the portdporttest --exit command.

21. Dynamic D_Port is enabled by default and cannot be simultaneously enabled with FA-PWWN or DH-CHAP.

Workaround

Disable Dynamic D_Port before enabling FA-PWWN or DH-CHAP.

22. Dynamic D_Port cannot coexist with the trunking feature on LPe35000-series adapters. If trunking is enabled, the

firmware automatically disables Dynamic D_Port.

23. Loopback tests attempt to run without a loopback connector on trunked ports if the loopback connector was removed

after running a previous loopback test.

Workaround

Ensure that a loopback connector is installed on the trunked port before running loopback tests.

24. On SLES 12 SP4, initiating a firmware dump might result in an error message similar to the following:

error: Invalid argument [arc/elx_lpe_35000_pci_device.app:TriggerFWDumps:510]
Consider adding “iomem-relaxed” to grub cfg kernel commandline.
[0x1000000090fa9483a2], [host8] [0000:01:00.0] Failed to trigger firmware dump.
If this message appears, do the following:

a. Add the following kernel command line to the host grub configuration file:

iomem=relaxed
b. Reboot the host.

c. Repeat the process to initiate a firmware dump.

Broadcom

HBAManager-Lin-RN12811-101
8

Emulex HBA Manager Application for Linux Release Notes

Releases 12.8.542.28-1 and 12.8.542.31-1

25. On Linux passthrough-only systems, the HBACMD listhba command might be slow to respond when adapters are

attached to VMs.

Workaround

None.

26. Enabling and disabling a Fabric Assigned Port World Wide Name (FA-PWWN) might cause an adapter port’s WWPN to
change. The Emulex HBA Manager application discovery-tree might not display the port’s newly assigned WWPN.

Workaround

Stop and restart the Emulex HBA Manager application services and daemons when prompted by the Emulex HBA
Manager application.

27. Except on LPe12000-series HBAs, resetting or disabling HBA ports turns off beaconing.

Workaround

Enable beaconing after resetting or disabling HBA ports.

28. Brocade switches using Fabric OS® version 8.2.1B and earlier might encounter the following issues with

DH-CHAP authentication:

– You might not be able to configure the secret pair between the switch and the HBA.
– When authentication is enabled on the switch, and authentication is disabled on the HBA, the switch disables the

port, but it does not issue the expected status messages.

– The Brocade switch authenticates the HBA port when authentication is disabled on the switch or when a frame is

dropped.

29. On Linux hosts that are running with kernel version 4.15 or earlier, an incorrect port speed can be reported by the Emulex

HBA Manager application GUI and HBACMD if trunking is enabled on the adapter.

Workaround

None.

30. On some inbox Linux distributions, the lpfc_enable_mds_diags driver parameter cannot be enabled dynamically.

Workaround

This parameter should be enabled only to run the Cisco diagnostics. Enable the lpfc_enable_mds_diags parameter
temporarily by issuing the following commands:

rmmod lpfc

modprobe lpfc lpfc_enable_mds_diags=1
After the diagnostics are complete, reload the driver without the lpfc_enable_mds_diags parameter.

31. Using the Brocade Portdporttest command with the stop option causes the HBA to stop responding when running
D_Port from the switch. Disabling a port while running D_Port tests from the switch can cause the switch port to get stuck
in D_Port mode.

Workaround

Do not stop D_Port tests while they are running from the switch. Do not disable a port while D_Port tests are running
from the switch.

If the HBA stops responding, remove the D_Port configuration from the switch port using the following commands. Refer
to the Brocade switch documentation for more information.
portdisable <portnumber>
portcfgdport --disable <portnumber>
portenable <portnumber>
If the switch port is stuck in D_Port mode, use the Portdporttest --exit command to clear the configuration.

Broadcom

HBAManager-Lin-RN12811-101
9

Copyright © 2021 Broadcom. All Rights Reserved. The term “Broadcom” refers to Broadcom Inc. and/or its subsidiaries. For
more information, go to www.broadcom.com. All trademarks, trade names, service marks, and logos referenced herein
belong to their respective companies.

Broadcom reserves the right to make changes without further notice to any products or data herein to improve reliability,
function, or design. Information furnished by Broadcom is believed to be accurate and reliable. However, Broadcom does
not assume any liability arising out of the application or use of this information, nor the application or use of any product or
circuit described herein, neither does it convey any license under its patent rights nor the rights of others.


