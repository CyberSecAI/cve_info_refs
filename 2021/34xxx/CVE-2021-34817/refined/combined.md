=== Content from github.com_5939dc21_20250115_081810.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fether%2Fetherpad-lite%2Fcommit%2Fa7968115581e20ef47a533e030f59f830486bdfa)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fether%2Fetherpad-lite%2Fcommit%2Fa7968115581e20ef47a533e030f59f830486bdfa)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=ether%2Fetherpad-lite)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ether](/ether)
/
**[etherpad-lite](/ether/etherpad-lite)**
Public

* [Notifications](/login?return_to=%2Fether%2Fetherpad-lite) You must be signed in to change notification settings
* [Fork
  2.9k](/login?return_to=%2Fether%2Fetherpad-lite)
* [Star
   17k](/login?return_to=%2Fether%2Fetherpad-lite)

* [Code](/ether/etherpad-lite)
* [Issues
  123](/ether/etherpad-lite/issues)
* [Pull requests
  10](/ether/etherpad-lite/pulls)
* [Discussions](/ether/etherpad-lite/discussions)
* [Actions](/ether/etherpad-lite/actions)
* [Projects
  0](/ether/etherpad-lite/projects)
* [Wiki](/ether/etherpad-lite/wiki)
* [Security](/ether/etherpad-lite/security)
* [Insights](/ether/etherpad-lite/pulse)

Additional navigation options

* [Code](/ether/etherpad-lite)
* [Issues](/ether/etherpad-lite/issues)
* [Pull requests](/ether/etherpad-lite/pulls)
* [Discussions](/ether/etherpad-lite/discussions)
* [Actions](/ether/etherpad-lite/actions)
* [Projects](/ether/etherpad-lite/projects)
* [Wiki](/ether/etherpad-lite/wiki)
* [Security](/ether/etherpad-lite/security)
* [Insights](/ether/etherpad-lite/pulse)

## Commit

[Permalink](/ether/etherpad-lite/commit/a7968115581e20ef47a533e030f59f830486bdfa)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

escape userId before setting it as HTML attribute

[Browse files](/ether/etherpad-lite/tree/a7968115581e20ef47a533e030f59f830486bdfa)
Browse the repository at this point in the history

* Loading branch information

[![@webzwo0i](https://avatars.githubusercontent.com/u/1636470?s=40&v=4)](/webzwo0i) [![@rhansen](https://avatars.githubusercontent.com/u/1612291?s=40&v=4)](/rhansen)

[webzwo0i](/ether/etherpad-lite/commits?author=webzwo0i "View all commits by webzwo0i")
authored and
[rhansen](/ether/etherpad-lite/commits?author=rhansen "View all commits by rhansen")
committed
Apr 8, 2021

1 parent
[9408d43](/ether/etherpad-lite/commit/9408d4395f67cc0fc9304bfc5177afe981a7374a)

commit a796811

Showing
**1 changed file**
with
**1 addition**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[src/static/js/chat.js](#diff-0296c4361c204c25f2120b1b2fe6fa0c77bdaf5391d4c00d7c1ea05692560099 "src/static/js/chat.js")

Show comments

[View file](/ether/etherpad-lite/blob/a7968115581e20ef47a533e030f59f830486bdfa/src/static/js/chat.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -129,6 +129,7 @@ exports.chat = (() => { |
|  |  | 'Replacing with "unknown". This may be a bug or a database corruption.'); |
|  |  | } |
|  |  |  |
|  |  | msg.userId = padutils.escapeHtml(msg.userId); |
|  |  | const authorClass = `author-${msg.userId.replace(/[^a-y0-9]/g, (c) => { |
|  |  | if (c === '.') return '-'; |
|  |  | return `z${c.charCodeAt(0)}z`; |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `a796811`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fether%2Fetherpad-lite%2Fcommit%2Fa7968115581e20ef47a533e030f59f830486bdfa) to comment.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from etherpad.org_027b25d1_20250115_081809.html ===
![etherpad logo](/_next/static/media/brand.9923586b.svg)

* About
* Download
* Contribute
* Links
* Contact
AboutDownloadContributeLinksContactToggle Theme
# **Etherpad** is a highly customizable **open source** online **editor** providing collaborative editing in really **real-time**.

![Show the editor and how fast you can collaborate with other people online.](/_next/static/media/etherpad_demo.9bd22127.gif)[290 Plugins](/plugins)105 LanguagesThousands of InstancesMillions of users
## Collaborating in really real-time

##### No more sending your stuff back and forth via email, just set up a pad, share the link and start collaborating!

Etherpad allows you to edit documents collaboratively in real-time, much like a live multi-player editor that runs in your browser. Write articles, press releases, to-do lists, etc. together with your friends, fellow students or colleagues, all working on the same document at the same time.

All instances provide access to all data through a well-documented API and support import/export to many major data exchange formats. And if the built-in feature set isn't enough for you, there's tons of plugins that allow you to customize your instance to suit your needs.

You don't need to set up a server and install Etherpad in order to use it. Just [pick](#links) one of the publicly available instances that friendly people from everywhere around the world have set up. Alternatively, you can set up your own instance by following our [installation guide](https://github.com/ether/etherpad-lite#installation).

## Add Functionalities

Etherpad is very customizable through plugins. Instructions can be found in the [plugin wiki article](https://github.com/ether/etherpad-lite/wiki/Available-Plugins)

![Linus Torvalds and Edward Snowden winking into the camera from a collaborate Etherpad. The document reads 'So many plugins can be added to the original instance](/_next/static/media/etherpad_full_features.2ca09583.png)

## Customize Appearance

![A video showing the possibility to customize the appearance of Etherpad. You can switch between dark, light, super light and super dark.](/_next/static/media/etherpad_skin_variants.c6e42124.gif)
## Download Version 2.2.7

Also, see our [installation instructions](https://github.com/ether/etherpad-lite#installation).

[Linux/Mac](https://github.com/ether/etherpad-lite/archive/v2.2.7.zip)Windows
Looking for older releases?
## Contribute

Etherpad is an open source project. Lots of passionate, helpful individuals have joined and voluntarily contributed every single bit throughout this project: From this website through the documentation to the very core of the application. So, if you like Etherpad and would like to give back some love, we'd like to see *your* contributions! It doesn't matter how familiar you are with real-time applications, or whether you know how to write programs for Node.js. There are plenty of ways to be helpful!

One of the first things you should do is actually use Etherpad, and get to know it - read about it, evangelise it, and engage with the wider community. You can also translate the user interface to your mother tongue or learn how to write plugins. Be creative!

If you'd like to help, [get in touch](#contact)! Also, [the wiki](https://github.com/ether/etherpad-lite/wiki) is always a valuable resource.

##### Development workflow

The main development happens on [GitHub](https://github.com/ether/etherpad-lite). To contribute, [fork](https://help.github.com/fork-a-repo/) the [main repo](https://github.com/ether/etherpad-lite), branch off a [feature branch](https://www.google.com/search?q=git+feature+branches) from `develop`, make your changes and [commit](https://git-scm.com/docs/git-commit) them, [push](https://git-scm.com/docs/git-push) to your fork and submit a [pull request](https://help.github.com/send-pull-requests/) for `ether/develop`.

Once in a while we merge `develop` into `master`, which results in a new release. This means you will always find the latest stable version in the `master` branch.

## Links

* [Blog](https://blog.etherpad.org)
* [GitHub repository](https://github.com/ether/etherpad-lite)
* [List of public instances](https://github.com/ether/etherpad-lite/wiki/Sites-That-Run-Etherpad)
* [Issue tracker](https://github.com/ether/etherpad-lite/issues)
* [Wiki](https://github.com/ether/etherpad-lite/wiki)
* [Documentation v2.2.7](/doc/v2.2.7/index.html)
## Get in touch

[Discord](https://discord.gg/gGJKrAnDvY)[@EtherpadOrg](https://twitter.com/etherpadorg)contact@etherpad.org
## Thanks

Many individuals, companies and organizations have contributed to Etherpad. We'd like to thank them all!

Additionally, our thanks go out to the tens of thousands of developers and organizations who have created all the modules we depend on or contributed in some way to our ability to provide Etherpad as open source.

We'd also like to thank you. You, who've been making Etherpad what it is, if you've been developing awesome features or plugins, whether you're running an instance or you're just one of our diligent users.

Thank you!

Copyright ¬© The¬†Etherpad¬†Foundation.

Design ¬© The Apache Software Foundation, adapted by Marcel Klehr ‚Äî Licensed under the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0)

The Etherpad logos by Marcel Klehr are licensed under a [Creative Commons Attribution-ShareAlike 3.0 Unported License](https://creativecommons.org/licenses/by-sa/3.0/).

Bitcoin public address: 198uyayMFVHUmrcuzWKFSMAkmwfkQgQEXj

Thanks to [@seballot](https://github.com/seballot) and [@SamTV12345](https://github.com/SamTV12345) for the redesign

![Logo of the footer showing a transmission mast](/_next/static/media/logo.f4d15e6e.svg)

=== Content from github.com_161d8039_20250115_081811.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fether%2Fetherpad-lite%2Freleases%2Ftag%2F1.8.14)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fether%2Fetherpad-lite%2Freleases%2Ftag%2F1.8.14)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=ether%2Fetherpad-lite)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ether](/ether)
/
**[etherpad-lite](/ether/etherpad-lite)**
Public

* [Notifications](/login?return_to=%2Fether%2Fetherpad-lite) You must be signed in to change notification settings
* [Fork
  2.9k](/login?return_to=%2Fether%2Fetherpad-lite)
* [Star
   17k](/login?return_to=%2Fether%2Fetherpad-lite)

* [Code](/ether/etherpad-lite/tree/1.8.14)
* [Issues
  123](/ether/etherpad-lite/issues)
* [Pull requests
  10](/ether/etherpad-lite/pulls)
* [Discussions](/ether/etherpad-lite/discussions)
* [Actions](/ether/etherpad-lite/actions)
* [Projects
  0](/ether/etherpad-lite/projects)
* [Wiki](/ether/etherpad-lite/wiki)
* [Security](/ether/etherpad-lite/security)
* [Insights](/ether/etherpad-lite/pulse)

Additional navigation options

* [Code](/ether/etherpad-lite/tree/1.8.14)
* [Issues](/ether/etherpad-lite/issues)
* [Pull requests](/ether/etherpad-lite/pulls)
* [Discussions](/ether/etherpad-lite/discussions)
* [Actions](/ether/etherpad-lite/actions)
* [Projects](/ether/etherpad-lite/projects)
* [Wiki](/ether/etherpad-lite/wiki)
* [Security](/ether/etherpad-lite/security)
* [Insights](/ether/etherpad-lite/pulse)

1. [Releases](/ether/etherpad-lite/releases)
2. [1.8.14](/ether/etherpad-lite/releases/tag/1.8.14)

# 1.8.14

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/ether/etherpad-lite/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...1.8.14)

 Loading

[View all tags](/ether/etherpad-lite/tags)

![@webzwo0i](https://avatars.githubusercontent.com/u/1636470?s=40&v=4)
[webzwo0i](/webzwo0i)
released this
04 Jul 06:05

¬∑
[1735 commits](/ether/etherpad-lite/compare/1.8.14...master)
to master
since this release

[1.8.14](/ether/etherpad-lite/tree/1.8.14)

This tag was signed with the committer‚Äôs **verified signature**.

[![](https://avatars.githubusercontent.com/u/1636470?s=64&v=4)](/webzwo0i)
[webzwo0i](/webzwo0i)

GPG key ID: 13D1D9D69299FAC6

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

[`571b37b`](/ether/etherpad-lite/commit/571b37b772c324d6f5eddcd3aecf3e02ffcac1c3)

# 1.8.14

### Security fixes

* Fixed a persistent XSS vulnerability in the Chat component. In case you can't update to 1.8.14 directly, we strongly recommend to cherry-pick [a796811](https://github.com/ether/etherpad-lite/commit/a7968115581e20ef47a533e030f59f830486bdfa). Thanks to sonarsource for the professional disclosure.

### Compatibility changes

* Node.js v12.13.0 or later is now required.
* The `favicon` setting is now interpreted as a pathname to a favicon file, not a URL. Please see the documentation comment in `settings.json.template`.
* The undocumented `faviconPad` and `faviconTimeslider` settings have been removed.
* MySQL/MariaDB now uses connection pooling, which means you will see up to 10 connections to the MySQL/MariaDB server (by default) instead of 1. This might cause Etherpad to crash with a "ER\_CON\_COUNT\_ERROR: Too many connections" error if your server is configured with a low connection limit.
* Changes to environment variable substitution in `settings.json` (see the documentation comments in `settings.json.template` for details):
* An environment variable set to the string "null" now becomes `null` instead of the string "null". Similarly, if the environment variable is unset and the default value is "null" (e.g., `"${UNSET_VAR:null}"`), the value now becomes `null` instead of the string "null". It is no longer possible to produce the string "null" via environment variable substitution.
* An environment variable set to the string "undefined" now causes the setting to be removed instead of set to the string "undefined". Similarly, if the environment variable is unset and the default value is "undefined" (e.g., `"${UNSET_VAR:undefined}"`), the setting is now removed instead of set to the string "undefined". It is no longer possible to produce the string "undefined" via environment variable substitution.
* Support for unset variables without a default value is now deprecated. Please change all instances of `"${FOO}"` in your `settings.json` to `${FOO:null}` to keep the current behavior.
* The `DB_*` variable substitutions in `settings.json.docker` that previously defaulted to `null` now default to "undefined".
* Calling `next` without argument when using `Changeset.opIterator` does always return a new Op. See [b9753dc](https://github.com/ether/etherpad-lite/commit/b9753dcc7156d8471a5aa5b6c9b85af47f630aa8) for details.

### Notable enhancements and fixes

* MySQL/MariaDB now uses connection pooling, which should improve stability and reduce latency.
* Bulk database writes are now retried individually on write failure.
* Minify: Avoid crash due to unhandled Promise rejection if stat fails.
* padIds are now included in /socket.io query string, e.g. `https://video.etherpad.com/socket.io/?padId=AWESOME&EIO=3&transport=websocket&t=...&sid=...`. This is useful for directing pads to separate socket.io nodes.
* <script> elements added via aceInitInnerdocbodyHead hook are now executed.
* Fix read only pad access with authentication.
* Await more db writes.
* Disabled wtfnode dump by default.
* Send `USER_NEWINFO` messages on reconnect.
* Fixed loading in a hidden iframe.
* Fixed a race condition with composition. (Thanks [@ingoncalves](https://github.com/ingoncalves) for an exceptionally detailed analysis and [@rhansen](https://github.com/rhansen) for the fix.)

 Assets
3

 Loading

 üéâ
12
 TwizzyDizzy, samlior, lsgwr, rhansen, paul-gerste-sonarsource, qianxk1116, bunkerheadz1998, 0x46616c6b, moritzlerch, RuthlessRuler, and 2 more reacted with hooray emoji
 ‚ù§Ô∏è
3
 nayemahmedniloy, ingoncalves, and HMarzban reacted with heart emoji

All reactions

* üéâ
  12 reactions
* ‚ù§Ô∏è
  3 reactions

 13 people reacted

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from blog.sonarsource.com_a0a6b3c0_20250115_081809.html ===
NEW![Sonar has entered a definitive agreement to acquire Tidelift! Read the press release.](/company/press-releases/sonar-to-acquire-tidelift/) [![](data:image/svg+xml;charset=utf-8...)![sonar logo ](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/8e59bcad-6e39-41dc-abd9-a0e251e8d63f/Sonar%20%282%29.svg?w=128&h=32&auto=format&fit=clip)![sonar logo ](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/8e59bcad-6e39-41dc-abd9-a0e251e8d63f/Sonar%20%282%29.svg?w=128&h=32&auto=format&fit=clip)](/ "Home")

* Solutions

  Use Cases

  [AI-assisted & quality-assured codeEnsure code generated by AI assistants is of the highest quality](/solutions/ai/)[DevOps transformationHarness the full potential of DevOps by reducing roll backs and improving quality of releases](/solutions/devops-transformation/)[Code coverageEnsure code quality and security by facilitating faster debugging through clear visibility of coverage gaps.](/solutions/code-coverage/) [Reduce & manage technical debtMaximize innovation by proactively managing technical debt](/solutions/reduce-technical-debt/)[Secure by designIntegrate code security in compliance with NIST Secure Software Development Framework](/solutions/secure-by-design-code/)[All Use CasesRead more about Sonar Use cases with blog articles, technical articles and developer guides](/solutions/use-cases/)

  Clean Code

  [What is clean codeA detailed definition of Clean Code](/solutions/clean-code/)[Power of clean codeBusiness success built on Clean Code](/solutions/power-of-clean-code/)[Security starts with Clean CodeStatic Application Security Testing with Sonar](/solutions/security/)[Clean as You CodeOur unique approach to Clean Code](/solutions/our-unique-approach/)

  Something For Everyone

  [For DevelopersFind and fix issues as you code](/solutions/for-developers/)[For DevOpsBuild your apps on Clean Code foundations](/solutions/infrastructure-as-code/)[For EnterpriseClean Code delivery from development to production](/solutions/for-enterprise/)[For the Public SectorClean Code for the public sector](/solutions/public-sector/)
* Products

  Industry Leading Products

  [![]()![](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/aa3b1f02-f1b0-448f-a3f2-a1bd32923a08/SQ_Logo_Cloud_Light%20Backgrounds.svg?w=176&h=48&auto=format&fit=crop)Formerly SonarCloudCloud-based static analysis tool for your CI/CD workflows](/products/sonarcloud/)[![]()![](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/bdac1871-464e-4051-88db-7df20c3bfffa/SQ_Logo_Server_Light%20Backgrounds.svg?w=176&h=48&auto=format&fit=crop)Formerly SonarQubeSelf-managed static analysis tool for continuous codebase inspection](/products/sonarqube/)[![]()![](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/49f23af2-a29b-4d0f-95d7-ffd361f375e1/SQ_Logo_IDE_Light%20Backgrounds.svg?w=176&h=48&auto=format&fit=crop)Formerly SonarLintFree IDE extension that provides on-the-fly analysis and coding guidance](/products/sonarlint/)

  Languages and Frameworks

  [Java](/knowledge/languages/java/)[JavaScript](/knowledge/languages/js/)[TypeScript](/knowledge/languages/ts/)[Python](/knowledge/languages/python/)[C#](/knowledge/languages/csharp/)[C++](/knowledge/languages/cpp/)[C](/knowledge/languages/c/)[PHP](/knowledge/languages/php/)[Kotlin](/knowledge/languages/kotlin/)[See All](/lp/knowledge/languages/)
* Resources

  Learn About Clean Code

  [BlogStay connected with our latest development news and articles](/blog/)[Events hubLet's meet up online or in person - browse our conferences and webinars, or watch previous talks](/resources/events/)[Customer StoriesCheck out Sonar implementation success stories](/resources/customer-stories/)[White PapersFind in-depth articles on clean code](/resources/white-papers/)[LearnDeveloper learning hub - covering essential topics](/learn/)[Solution BriefsOur library of solution briefs](/resources/solution-briefs/)

  Go In Depth

  [SonarQube Server DocumentationFind more information on the technical details of SonarQube Server](https://docs.sonarsource.com/sonarqube/latest/)[SonarQube Cloud DocumentationFind more information on the technical details of SonarQube Cloud](https://docs.sonarsource.com/sonarcloud/)[SonarQube for IDE DocumentationFind more information on the technical details of SonarQube IDE](https://docs.sonarsource.com/sonarlint/)[Explore SonarpediaExplore our publicly available multi-language rules database](https://rules.sonarsource.com/)[LanguagesSee our multi-language coverage](/knowledge/languages/)
* Company

  Deliver Better Software

  [About UsSonar‚Äôs industry leading solution enables developers to write clean code and remediate existing code organically](/company/about/)[CareersJoin our growing team](/company/careers/)[Commitment to open sourceOur commitment to transparency, security, and continuous improvement](/solutions/commitment-to-open-source/)[CommunityGet latest updates, suggest features, and share your knowledge](https://community.sonarsource.com/)[PartnersSonar partners with the best resellers to bring Clean Code closer to you](/company/partners/)[Contact usHave questions? Get in touch](/company/contact/)

  Media

  [NewsroomNews announcements, media coverage, and more](/company/newsroom/)[CoverageFind articles about Sonar in the news](/company/coverage/)[Press ReleasesThe latest Sonar updates](/company/press-releases/)[CustomersAn overview of customers using Sonar by industry](/company/customers/)[Press KitExecutive headshots, quick stats, customer logos, and more](/company/press-kit/)
[Start for free](/open-source-editions/)[Explore pricing](/plans-and-pricing/)
Search modal toggle button[Start for free](/open-source-editions/)[Explore pricing](/plans-and-pricing/)Mobile menu toggle button

Blog post

# Etherpad 1.8.13 - Code Execution Vulnerabilities

![](data:image/svg+xml;charset=utf-8...)![Paul Gerste photo]()![Paul Gerste photo](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/e712603b-cf90-4c56-a666-cd2691b3def2/404b3fe2-4818-41dc-bbe0-9cae851eb542_Paul_Gerste.jpg?w=800&h=800&auto=format&fit=crop)

Paul Gerste

Vulnerability Researcher

July 13, 2021

Date

* [Security](/blog/tag/security/)
![](data:image/svg+xml;charset=utf-8...)![We discovered two code execution vulnerabilities that affected Etherpad servers and data. Learn more about the technical details and how to avoid such coding issues.](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/1825ee47-2e1b-4855-a571-ad8947f58e1c/cover-f677a108-087d-4f93-b4f1-f0db9fab3d7a_RD-32%2BEtherpad%25402x.png?w=2400&h=1200&auto=format&fit=crop)![We discovered two code execution vulnerabilities that affected Etherpad servers and data. Learn more about the technical details and how to avoid such coding issues.](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/1825ee47-2e1b-4855-a571-ad8947f58e1c/cover-f677a108-087d-4f93-b4f1-f0db9fab3d7a_RD-32%2BEtherpad%25402x.png?w=2400&h=1200&auto=format&fit=crop)

Etherpad is one of the most popular online text editors that allows collaborating on documents in real-time. It is customizable with more than 250 plugins available and features a version history as well as a chat functionality. There are thousands of instances deployed worldwide with millions of users. The project is very popular within the open-source community as shown by the over 10,000 stars on GitHub. Etherpad instances are often publicly usable and can contain sensitive information.

As part of our security research on open source projects we analyzed Etherpad's code and found two critical vulnerabilities. Both can be combined by an attacker to completely take over an Etherpad instance and its data. In this blog post, we cover the technical details of these code vulnerabilities, show how they were patched, and give advice on how to avoid these types of bugs during development.

## Impact

Two injection vulnerabilities were found in Etherpad 1.8.13 that have been present since at least version 1.7.0:

* Cross-Site Scripting (XSS): CVE-2021-34817
* Argument Injection: CVE-2021-34816

The XSS vulnerability allows attackers to take over Etherpad users, including admins. This can be used to steal or manipulate sensitive data. The Argument Injection vulnerability allows attackers to execute arbitrary code on the server, which would allow them to steal, modify or delete all data, or to target other internal systems that are reachable from the server.

Exploiting the XSS vulnerability is possible on any Etherpad instance with a default configuration. The Argument Injection vulnerability requires an admin account to exist, which is not a default setting. Both vulnerabilities can be combined by an attacker to first compromise an admin and then to use these privileges to execute arbitrary code on the server.

A fix for the XSS vulnerability is implemented in Etherpad version 1.8.14. The Argument Injection vulnerability is still unpatched, but it is significantly harder to exploit on its own.

Here is a short demonstration of exploiting both vulnerabilities to get a shell on the server:

Etherpad 1.8.13 - Remote Code Execution

## Technical Details

In the following technical analysis, we analyze the root cause of the two code vulnerabilities. We first take a look at the XSS vulnerability, then we explain the Argument Injection vulnerability.

### Persistent XSS in Chat Messages (CVE-2021-34817)

To allow for better collaboration in a pad, Etherpad offers a chat feature. Here, users can exchange messages in a per-pad group chat. The messages are stored on the server, making the chat history available to everyone.

When a user opens a pad, the chat messages are rendered in the frontend, which involves creating HTML elements from that data. During rendering, the¬†`userId`¬†property of a chat message is inserted into the DOM without properly escaping special characters:

[**src/static/js/chat.js**](https://github.com/ether/etherpad-lite/blob/996a2d86ddea37c27b9ae11aa87c7fd6f8941b97/src/static/js/chat.js#L173-L177 "src/static/js/chat.js")

```
173    const html =
174        `<p data-authorId='${msg.userId}' ‚Ä¶> ‚Ä¶` +
175        `<span ‚Ä¶`;
176    if (isHistoryAdd) $(html).insertAfter('#chatloadmessagesbutton');
177    else $('#chattext').append(html);
```

In line 174 the¬†`userId`¬†value is used to build a string of HTML markup and in lines 176 and 177 this string is inserted into the DOM. If attackers manage to control a chatter's user ID, then they would be able to insert an XSS payload and perform actions as a victim user. So how can an attacker control a user ID?

Etherpad also features an export/import functionality that handles multiple formats, including a custom JSON-based one. Files in this format can contain a pad's content, its revision history, and all associated chat messages. Such a file can then be used to create a copy of a pad by importing it. An exemplary export file looks like the following:

**example.etherpad**

```
{
    "pad:1": {
        "chatHead": 0
    },
    "pad:1:chat:0": {
        "text": "Hello World!",
        "userId": "aE45C6209"
    }
}
```

Certain values are validated during the import, but the user IDs of chat messages are used as-is. Since the import feature is enabled by default, an attacker can use this to create a pad that has a chat message with a user ID that consists of arbitrary data.

When that data contains HTML markup, then this markup will be inserted into the DOM, which will execute any inline JavaScript code. As a result, an attacker is able to inject malicious JavaScript code into the chat history which is then executed in an administrator's browser when accessing a pad. This enables an attacker to initiate further attack requests in the browser context of the admin.

### Argument Injection in Plugin Management (CVE-2021-34816)

Etherpad also features an admin area that can be used by users that are configured to have the admin role. It allows them to manage plugins, edit settings, and view system information.

When an admin installs a plugin, a message with the name of the plugin is sent to the backend through a WebSocket connection. The backend then installs the NPM package that corresponds to that name:

[**src/static/js/pluginfw/installer.js**](https://github.com/ether/etherpad-lite/blob/996a2d86ddea37c27b9ae11aa87c7fd6f8941b97/src/static/js/pluginfw/installer.js#L49-L66 "src/static/js/pluginfw/installer.js")

```
49    exports.install = async (pluginName, cb = null) => {
 ‚Ä¶      // ...
52      try {
 ‚Ä¶        // ...
56        await runCmd(['npm', 'install', /* ... */ pluginName]);
57      } catch (err) {
 ‚Ä¶        // ...
61      }
 ‚Ä¶      // ...
66    };
```

In line 56, the plugin name is used as an argument for an¬†`npm install`¬†system command without any validation or sanitization. This allows an attacker to specify a malicious package from the NPM repository or to simply use a URL that points to a package on the attacker's server.

The attacker can either craft a plugin that hooks into Etherpad internals, e.g. creating a backdoor API endpoint, or just use a package with a post-install script which will be executed right after the installation of the package. As a result, the attacker can execute arbitrary code and system commands to fully compromise the Etherpad instance and its data.

To summarize, both vulnerabilities can be chained together in order to first take over an admin's client using the XSS and then gaining access to the server by installing an attacker-controlled plugin.

### Patch

In order to mitigate the XSS vulnerability, all values including the userId property should be properly escaped before inserting them into the DOM. This approach was taken by the Etherpad team:

[**src/static/js/chat.js**](https://github.com/ether/etherpad-lite/blob/a7968115581e20ef47a533e030f59f830486bdfa/src/static/js/chat.js#L132 "src/static/js/chat.js")

```
msg.userId = padutils.escapeHtml(msg.userId);
```

Fixing the Argument Injection is more complex because there is no vetted list of trusted plugins. A first step would be to limit plugin names to valid NPM package names. This prevents the use of URLs and has the benefit that now only packages from the official NPM repository can be installed. However, this is still not a complete fix, because attackers could publish malicious NPM packages.

The optimal solution would be to have a list of trusted plugins and then check a plugin's name against this allowlist before installing it. This is not practical here, as Etherpad is a community project and anybody can contribute plugins.

The Argument Injection vulnerability has not been fixed yet, because it is not really possible as we just saw. However, it is far less likely to be exploited on its own, so fixing the XSS vulnerability also reduced the risk of the Argument Injection. To completely mitigate exploitation, we recommend disabling all admin users and do configuration or plugin management via command-line access.

### Timeline

| **Date** | **Action** |
| --- | --- |
| 2021-04-06 | We report a detailed advisory via email |
| 2021-04-06 | Vulnerabilities are confirmed by the vendor |
| 2021-04-08 | Vendor fixes the XSS vulnerability |
| 2021-07-04 | Vendor releases version 1.8.14 that includes the fix |

### Summary

In this blog post, we analyzed two code vulnerabilities in Etherpad 1.8.13. The combination of the vulnerabilities can lead to a full compromise of an Etherpad installation. We looked at the vulnerable code snippets and explained how an attacker can exploit them. We also showed how important data validation and sanitization are for avoiding such flaws during development. As we have shown, the smallest coding mistake can be the first stepping stone for an attacker to launch further attacks against the software.

If you are hosting an Etherpad instance and have not updated your installation to version 1.8.14 yet, then we highly recommend that you do so now. Finally, we would like to thank the Etherpad team for their fast response to our initial advisory and their quick fix of the XSS vulnerability.

#### SHARE

[twitter](https://twitter.com/share?text=undefined)[facebook](https://www.facebook.com/sharer/sharer.php?u=undefined)[linkedin](https://www.linkedin.com/sharing/share-offsite/?url=undefined)mail[Go to SonarSource homepage![](data:image/svg+xml;charset=utf-8...)![sonar logo ]()![sonar logo ](https://assets-eu-01.kc-usercontent.com:443/95361965-6528-012b-61fc-b49456de9702/8e59bcad-6e39-41dc-abd9-a0e251e8d63f/Sonar%20%282%29.svg?w=160&h=40&auto=format&fit=crop)](/)

* **Sonar Solutions**
  + [SAST](/solutions/security/)
  + [What is clean code](/solutions/clean-code/)
  + [Power of clean code](/solutions/power-of-clean-code/)
  + [Clean as you code](/solutions/our-unique-approach/)
  + [AI-assisted & quality-assured code](/solutions/ai/)
  + [DevOps transformation](/solutions/devops-transformation/)
  + [Outsourcing software development](/solutions/reduce-outsourcing-software-development-risk/)
  + [Reduce & manage technical debt](/solutions/reduce-technical-debt/)
  + [Secure by design](/solutions/secure-by-design-code/)
  + [Code coverage](/solutions/code-coverage/)
  + [Code review](/solutions/code-review/)
  + [For developers](/solutions/for-developers/)
  + [For enterprise](/solutions/for-enterprise/)
  + [Infrastructure as code](/solutions/infrastructure-as-code/)
  + [Public sector](/solutions/public-sector/)
* **Products**
  + [SonarQube for IDE](/products/sonarlint/)
  + [SonarQube Server](/products/sonarqube/)
  + [SonarQube Cloud](/products/sonarcloud/)**Pricing**
  + [Start for free](/open-source-editions/)
  + [Explore pricing](/plans-and-pricing/)
* **Company**
  + [About](/company/about/)
  + [Careers](/company/careers/)
  + [Commitment to open source](/solutions/commitment-to-open-source/)
  + [Customers](/company/customers/)
  + [Partners](/company/partners/)
  + [Contact us](/company/contact/)
  + [Accessibility](/accessibility/)
  + [NEW! Brand identity](/brand-identity/)**Media**
  + [Coverage](/company/coverage/)
  + [Press releases](/company/press-releases/)
* **Resources**
  + [Events hub](/resources/events/)
  + [Customer stories](/resources/customer-stories/)
  + [White papers](/resources/white-papers/)
  + [Learn](/learn/guide/)
  + [Community](https://community.sonarsource.com/)
  + [Support](/support/)
* **Knowledge**
  + [Explore Sonarpedia](https://rules.sonarsource.com/)
  + [Blog](/blog/)
  + [Languages](/knowledge/languages/)
  + [SonarQube Server Documentation](https://docs.sonarsource.com/sonarqube/latest/)
  + [SonarQube Cloud Documentation](https://docs.sonarsource.com/sonarcloud/)
  + [SonarQube for IDE Documentation](https://docs.sonarsource.com/sonarlint/)

* [Legal documentation](/legal/)
* [Trust center](/trust-center/)

* [Follow SonarSource on Twitter](https://twitter.com/sonarsource)
* [Follow SonarSource on Linkedin](https://www.linkedin.com/company/sonarsource/)

¬© 2008-2025 SonarSource SA. All rights reserved. SONAR, SONARSOURCE, SONARQUBE, and CLEAN AS YOU CODE are trademarks of SonarSource SA.


