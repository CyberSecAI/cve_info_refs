=== Content from umbraco.com_657b66d4_20250115_100305.html ===


[Umbraco](/ "Umbraco")

* [For Business](/for-business/ "For Business")

  [For Business](/for-business/ "For Business")
  + [Find a partner](/partners/ "Find a partner")
  + [Case Studies](/case-studies-testimonials/ "Case Studies")
  + [Umbraco by Industry](/umbraco-by-industry/ "Umbraco by Industry")
* [Partners](/partners/ "Partners")

  [Partners](/partners/ "Partners")
  + [Become a partner](/partners/become-an-umbraco-solution-partner/ "Become a partner")
  + [Find a Partner](/partners/find-a-solution-partner/ "Find a Partner")
* [Products](/products/ "Products")

  [Products](/products/ "Products")
  + [CMS](/products/umbraco-cms/ "CMS")
  + [Cloud](/products/umbraco-cloud/ "Cloud")
  + [Heartcore](/products/umbraco-heartcore/ "Heartcore")
  + [Add-ons](/products/add-ons/ "Add-ons")
  + [Marketplace](https://marketplace.umbraco.com "Marketplace")
  + [Support](/products/support/ "Support")
* [Community](https://community.umbraco.com/ "Community")

  [Community](https://community.umbraco.com/ "Community")
  + [Get involved](https://community.umbraco.com/get-involved/ "Get involved")
  + [Events](https://community.umbraco.com/events/ "Events")
  + [MVP program](https://community.umbraco.com/mvp-program/ "MVP program")
  + [Diversity & Inclusion](https://community.umbraco.com/diversity-and-inclusion/ "Diversity & Inclusion")
  + [Discord](https://community.umbraco.com/get-involved/community-discord-channel/ "Discord")
* [Resources](/resources/ "Resources")

  [Resources](/resources/ "Resources")
  + [Blog](/blog/ "Blog")
  + [Training](/training/ "Training")
  + [Documentation](https://docs.umbraco.com/ "Documentation")
  + [Video Tutorials](https://www.youtube.com/channel/UCbGfwSAPflebnadyhEPw-wA "Video Tutorials")
  + [Knowledge Base](/knowledge-base/ "Knowledge Base")
  + [Trust Center](/trust-center/ "Trust Center")
  + [GitHub](https://github.com/umbraco "GitHub")
  + [Sign in](/sign-in/ "Sign in")
* [About us](/about-us/ "About us")

  [About us](/about-us/ "About us")
  + [Mission and Vision](/about-us/mission-and-vision/ "Mission and Vision")
  + [Values](/about-us/values/ "Values")
  + [Impact Report](/about-us/impact-report/ "Impact Report")
  + [Open Books](/about-us/open-books/ "Open Books")
  + [Work at Umbraco](/work-at-umbraco/ "Work at Umbraco")
  + [Contact us](/contact-us/ "Contact us")

[Book a discovery call](https://calendly.com/d/2wd-q6x-vg2 "Book a discovery call")

[Book a discovery call](https://calendly.com/d/2wd-q6x-vg2 "Book a discovery call")

Menu

[Umbraco](/ "Umbraco")

# Security advisory: Security patches for Umbraco Forms ready on July 20th, 2021, at 7 AM UTC

## This is a heads-up so you can prepare for action

![Andy Butland](/media/opuanzqk/andy_butland_02-square.jpg?width=100&height=100&format=webp)
Written by
Andy Butland

*A newly found, but not publicly known, security issue in Umbraco Forms could lead to a remote code execution attack and/or arbitrary file deletion. We have a fix ready which we will release on July 20th, 2021, at 7 AM UTC. This blog post is a heads-up as we highly advise you to be ready to apply the patch release. No action is required for Umbraco Cloud sites as they will be upgraded automatically on July 20th.*

**Patches are now available:** [https://umbraco.com/blog/security-advisory-20th-of-july-2021-patch-is-now-available/](/blog/security-advisory-20th-of-july-2021-patch-is-now-available/)

**Update:** *Since publishing the information we have also identified that the issue partially exists in Contour 3 (the predecessor to Umbraco Forms) and a patch is now available to help address this.*

## Who’s affected?

Versions affected:

All versions of Umbraco Forms v4.0.0 and up are affected by this vulnerability.

Thus, all sites should have the recommended patch implemented when it is released next week.

## How do I prepare?

Because we are looking at a patch upgrade, we expect the fix to be rather straightforward and to only require minimal time per project.

As this is a security patch, we highly advise you to put aside resources to get this fixed. This is also why we give you this information before we release the patch publicly.

## How to upgrade on July 20th?

If you’re using Umbraco Forms versions 8, 7 and 6 you will be able to upgrade to a new patch version of your current minor version, no matter what minor version you are using now. For example:

* You are using Forms 8.1.x (8.1.0, 8.1.2 or 8.1.3)  right now, you will be able to upgrade to 8.1.4
* You are using Forms 7.5.x (7.5.0, 7.5.1, 7.5.2 or 7.5.3) right now, you will be able to upgrade to 7.5.4.

And so on, so for each minor version of Umbraco Forms 6, 7, or 8, there will be a patch version to upgrade to.

For sites running Umbraco Forms version 4 will need to upgrade to the latest version of v4.

* We are releasing versions 4.4.8 on July 20
* If you’re on a (much) lower version than 4.4.7 right now then you can prepare by upgrading to 4.4.7 in the coming days, to make sure everything still works and that the final upgrade to 4.4.8 is as easy as possible.

How do you check which version you are on? Reach out with this blog post to your technical contact for your Umbraco site and they will be able to take care of the necessary precautions.

## Where do I find the necessary information on July 20th?

On July 20th at 7 AM UTC, ([find the time in your timezone here](https://www.timeanddate.com/worldclock/fixedtime.html?msg=Security+patch+ready+on+July+20th%2C+2021+at+7+AM+UTC&iso=20210720T07&p1=1440)) a post will be released here on the Umbraco blog with a detailed description of how to fix this security issue.

We will create a dedicated forum post on our community site; Our.Umbraco, which we will link to in the blog post published next week.

## What about sites on Umbraco Cloud?

As mentioned in the intro, all Umbraco Cloud sites will automatically get the security fix applied on July 20th between 7 AM - 9 PM UTC.

* Umbraco Cloud sites running Forms v8 and v7 will automatically be upgraded to the latest patch release for the minor version they are currently on.
* Umbraco Cloud sites running Forms v6 will be automatically upgraded to version 6.0.9
* Umbraco Cloud sites running Forms v4 will be automatically upgraded to version 4.4.8

Thus, no action is needed for Umbraco Cloud users.

## Acknowledgement

The issue was discovered and reported by Gary O’Leary-Steele from [AppCheck](https://appcheck-ng.com/). We would like to thank Gary and AppCheck for their discretion in reporting the issue and help in confirming that it will be addressed correctly with the patches. Furthermore, it is worth highlighting the speed with which they have responded to questions and their help in planning the timeline for rollout and communication.

## Severity details:

Due to the severity of this issue, we have chosen not to disclose any further details yet. This is to prevent any exploitation of the vulnerability before the patch is released. Currently, we have no indication that this vulnerability is being exploited in the wild.

The next update on this issue will be published on the Umbraco blog on July 20th at 7 AM UTC.

* **Published:** July 15, 2021
* **Read time:** 4 min. read
* **Category:** [Security](/blog/category/security/)

# The CMS that fits you. Not the other way around.

## About Umbraco

* [About us](/about-us/)
* [Work at Umbraco](/work-at-umbraco/)
* [Terms and conditions](/terms-and-conditions/)
* [Privacy policy](/trust-center/privacy-and-umbraco/privacy-statement/)
* [Contact us](/contact-us/)
* [Trust Center](/trust-center/)

## Other resources

* [Our blog](/blog/)
* [Developers & Community](https://our.umbraco.com/)
* [Documentation](https://docs.umbraco.com)
* [Learning Base (YouTube)](https://www.youtube.com/channel/UCbGfwSAPflebnadyhEPw-wA)
* [Umbraco on Github](https://github.com/umbraco)
* [Mastodon](https://umbracocommunity.social/%40umbraco)
* [Knowledge base](/knowledge-base/)

## Follow Umbraco and stay in the loop

[X (Twitter)](https://twitter.com/umbraco "X (Twitter)")
[Facebook](https://www.facebook.com/Umbraco/ "Facebook")
[LinkedIn](https://www.linkedin.com/company/umbraco/ "LinkedIn")



=== Content from umbraco.com_940cb2fd_20250115_100305.html ===


[Umbraco](/ "Umbraco")

* [For Business](/for-business/ "For Business")

  [For Business](/for-business/ "For Business")
  + [Find a partner](/partners/ "Find a partner")
  + [Case Studies](/case-studies-testimonials/ "Case Studies")
  + [Umbraco by Industry](/umbraco-by-industry/ "Umbraco by Industry")
* [Partners](/partners/ "Partners")

  [Partners](/partners/ "Partners")
  + [Become a partner](/partners/become-an-umbraco-solution-partner/ "Become a partner")
  + [Find a Partner](/partners/find-a-solution-partner/ "Find a Partner")
* [Products](/products/ "Products")

  [Products](/products/ "Products")
  + [CMS](/products/umbraco-cms/ "CMS")
  + [Cloud](/products/umbraco-cloud/ "Cloud")
  + [Heartcore](/products/umbraco-heartcore/ "Heartcore")
  + [Add-ons](/products/add-ons/ "Add-ons")
  + [Marketplace](https://marketplace.umbraco.com "Marketplace")
  + [Support](/products/support/ "Support")
* [Community](https://community.umbraco.com/ "Community")

  [Community](https://community.umbraco.com/ "Community")
  + [Get involved](https://community.umbraco.com/get-involved/ "Get involved")
  + [Events](https://community.umbraco.com/events/ "Events")
  + [MVP program](https://community.umbraco.com/mvp-program/ "MVP program")
  + [Diversity & Inclusion](https://community.umbraco.com/diversity-and-inclusion/ "Diversity & Inclusion")
  + [Discord](https://community.umbraco.com/get-involved/community-discord-channel/ "Discord")
* [Resources](/resources/ "Resources")

  [Resources](/resources/ "Resources")
  + [Blog](/blog/ "Blog")
  + [Training](/training/ "Training")
  + [Documentation](https://docs.umbraco.com/ "Documentation")
  + [Video Tutorials](https://www.youtube.com/channel/UCbGfwSAPflebnadyhEPw-wA "Video Tutorials")
  + [Knowledge Base](/knowledge-base/ "Knowledge Base")
  + [Trust Center](/trust-center/ "Trust Center")
  + [GitHub](https://github.com/umbraco "GitHub")
  + [Sign in](/sign-in/ "Sign in")
* [About us](/about-us/ "About us")

  [About us](/about-us/ "About us")
  + [Mission and Vision](/about-us/mission-and-vision/ "Mission and Vision")
  + [Values](/about-us/values/ "Values")
  + [Impact Report](/about-us/impact-report/ "Impact Report")
  + [Open Books](/about-us/open-books/ "Open Books")
  + [Work at Umbraco](/work-at-umbraco/ "Work at Umbraco")
  + [Contact us](/contact-us/ "Contact us")

[Book a discovery call](https://calendly.com/d/2wd-q6x-vg2 "Book a discovery call")

[Book a discovery call](https://calendly.com/d/2wd-q6x-vg2 "Book a discovery call")

Menu

[Umbraco](/ "Umbraco")

![](/media/0qrb1wvd/email_hero_780x405px-3.png?cc=0%2c0.31161690756503407%2c0.00013331555792548869%2c0.30419786393012943&width=800&height=200&v=1db0043a5bf0610&format=webp)
# Security Patch for Umbraco Forms is now available

## We recommend you apply the patch immediately

![Andy Butland](/media/opuanzqk/andy_butland_02-square.jpg?width=100&height=100&format=webp)
Written by
Andy Butland

A newly found, but not publicly known, security issue in Umbraco Forms could lead to a remote code execution attack and/or arbitrary file deletion. We have issued patch releases for all versions of Umbraco Form versions 6, 7 and 8 and a patch release for the latest version of Umbraco Forms version 4. Additionally, we have identified an issue in Contour and issued a patch for the latest version.
No action is required for Umbraco Cloud sites as they will be automatically patched today.

**Update: The reporter has published a [blog post with details on the issue](https://appcheck-ng.com/umbraco-forms-file-upload-vulnerability-technical-analysis/) on August 25th, 2021**

**Note: The post has been up to include the latest patch versions for Umbraco Forms 4 and 6**

If you are uncertain about how to handle this advisory, reach out to your technical contact/web agency for your Umbraco site and provide them with a link to this blog post and they will be able to take the necessary actions.

## Who’s affected?

As we mentioned in [the Security Advisory published on July 15th](/blog/security-advisory-security-patches-for-umbraco-forms-ready-on-july-20th-2021-at-7-am-utc/), the following versions of Umbraco Forms are affected:

All versions of Umbraco Forms v4.0.0 and up are affected by this vulnerability.

Specifically, the vulnerability applies only to forms that contain an upload field. Therefore we recommend that you prioritize patching sites that have an upload field on forms.

Identifying forms with an upload field can be tricky, especially on sites with a larger number of forms. You can do one of the following test whether any forms are using an upload field:

1. If your form definitions are stored in the database you can query for:
   ```
   SELECT * FROM [UFForms] WHERE [Definition] LIKE '%84a17cf8-b711-46a6-9840-0e4a072ad000%'

   ```
   Alternatively on older versions of Umbraco you should query the following:
   ```
   SELECT * FROM [UFFields] WHERE [Fieldtype] = '84a17cf8-b711-46a6-9840-0e4a072ad000'
   ```
2. Or, if your form definitions are stored on disk, you can search *App\_Data\UmbracoForms\Data\forms\\*.json* for the string
   ```
   84a17cf8-b711-46a6-9840-0e4a072ad000
   ```
   Note: If you're using a filesystem provider then look for forms definitions on the storage location you configured.

If neither of those give you results then there is no upload field on any forms at this moment. Remember that anybody who has access to the forms section in Umbraco could add an upload field at any time, so it is still important to patch sites that don’t currently have upload fields.

**Thus, all sites should have the recommended patch implemented as soon as possible.**

#### What about Contour?

We’ve had some questions about Contour, the predecessor to Umbraco Forms, after publishing the heads-up post last week. We’ve identified that it is also vulnerable to the remote code execution bug, but not the arbitrary file deletion bug.

Contour version 3 was released in 2012 and therefore no longer considered under long term support, in fact it is end-of-life. However, since we have had a few requests for security patches, we’ve decided to also release [a patch for Contour, which is version 3.0.32](https://our.umbraco.com/packages/umbraco-pro/contour/).

## Automatic fix on Umbraco Cloud, Uno & Heartcore

All projects on Umbraco Cloud will be automatically patched today (July 20th, 2021 between 7 AM - 9 PM UTC).

All Umbraco Cloud projects are being patched to the applicable patch release of Umbraco Forms. This also means that from today, all new projects created on Umbraco Cloud will automatically have the security fix implemented.

**No action is needed for Umbraco Cloud users** unless you have created [custom themes for your forms](#customthemes) in which case you might need to update your theme files.

Umbraco Uno and Umbraco Heartcore are also automatically updated and protected.

## Updating manually outside of Umbraco Cloud

There are several ways to update your sites outside of Umbraco Cloud depending on what is applicable for your setup. You can update manually, through NuGet or by updating to the latest version of Umbraco Forms.

### Which version of Umbraco Forms to upgrade to

We recommend upgrading to the latest patch release of the current minor version of Umbraco Forms you’re using. This ensures that you will not suddenly get new features or breaking changes that you were not prepared for.

In order to find the file that applies to your current Forms install, find the version number in the Umbraco backoffice by going to the Forms section, the dashboard should show you the current version:

![](/media/4ptjv10g/find-version-of-umbraco-forms.jpg?rmode=pad&width=1360&v=1db0043af3b4eb0&format=webp)

In the example above, we have Forms version 8.7.3 installed, so we find the newest patch release for the minor version 8.7 - this is version 8.7.6.

If, for example, you are using version 7.4.1, you would want to upgrade to the latest patch release for the minor version 7.4 - this version 7.4.3, and so on.

This is a list of minor versions and which version we recommend you upgrade to:

| **Minor version** | **Secure patch release** |
| --- | --- |
| 6.0.x | 6.0.10 (updated) |
| 7.0.x | 7.0.7 |
| 7.1.x | 7.1.4 |
| 7.2.x | 7.2.1 |
| 7.3.x | 7.3.2 |
| 7.4.x | 7.4.3 |
| 7.5.x | 7.5.4 |
| 8.0.x | 8.0.2 |
| 8.1.x | 8.1.6 |
| 8.2.x | 8.2.3 |
| 8.3.x | 8.3.4 |
| 8.4.x | 8.4.4 |
| 8.5.x | 8.5.7 |
| 8.6.x | 8.6.2 |
| 8.7.x | 8.7.6 |

If you are using any Umbraco Forms version 4, you will need to update to the latest version 4.4.9 (updated).

For Umbraco Contour, you will need to update to the latest version 3.0.32.

## Manual update

All the new Umbraco Forms patch releases are [available to download from Our Umbraco](https://our.umbraco.com/packages/developer-tools/umbraco-forms/).

In the list of files at the bottom of the package page on Our Umbraco, you will find zip files to download that are named *“UmbracoForms.Files.x.y.z.zip*”. You’re looking for the applicable version to upgrade to in the list above.

Once downloaded, unzip all the files in “*UmbracoForms.File.x.y.z.zip*“ into the root directory of your website, overwriting everything except for “~\***App\_Plugins\UmbracoForms\UmbracoForms.config*****”**. You will want to keep your configuration the same.

If your "*UmbracoForms.config*" has a version number in it, now would be a good time to update it to the version you’re upgrading to. If there's a *version* file in "*~/App\_Plugins\UmbracoForms*" then that should also contain the new version number.

We always recommend that you test first on a local copy of the site before you update a live site.

#### Umbraco Contour

The Umbraco Contour patch release is also available from Our Umbraco and follows the same procedure as above, download “*UmbracoContour.files.3.0.32.zip*” and overwrite all the files except for  “~\umbraco\plugins\umbracoContour\UmbracoContour.config”. You will want to keep your configuration the same.

If your UmbracoContour.config has a version number in it, now would be a good time to update it to the version you’re upgrading to.

### Update with NuGet

Run the following command in your Package Manager Console in Visual Studio:

Update-Package UmbracoForms -Version x.y.z

Where x.y.z is the applicable version number you found in the table above.

Alternatively, you can use the NuGet UI to search for the UmbracoForms package and update it to the applicable version using the version dropdown.

![](/media/okzlmcub/select-nuget-version-of-umbraco-forms.jpg?rmode=pad&width=1360&v=1db00435bbaa8d0&format=webp)

#### Umbraco Contour

Umbraco Contour is not available from NuGet. Make sure to follow the manual steps above.

## Updating your custom themes

If you have custom themes make sure to update **FieldType.FileUpload.cshtml** in your themes with the updated lines:

```
@using Umbraco.Forms.Core.Providers.FieldTypes
```

at the top and replace

```
var fileName = filePath.Split('/').Last();
```

with

```
var fileName = filePath.Split(new[] { FileUpload.EncryptedFilePathAndFileNameSeparator }, StringSplitOptions.None).Last();
```
## Details about the security issue

In order to give everybody a fair chance at updating their sites and be safe, we have chosen not to share details on what exactly the security problem is.

In respect to others, and in order to keep as many sites safe as possible, we therefore also ask for your discretion if you choose to discuss this issue publicly.

The exact details of the security issue and fix will be released in 4 weeks. We recommend you upgrade your sites before then.

**Update: The reporter has published a [blog post with details on the issue](https://appcheck-ng.com/umbraco-forms-file-upload-vulnerability-technical-analysis/) on August 25th, 2021**

### Credit

The issue was discovered and reported by Gary O’Leary-Steele from [AppCheck](https://appcheck-ng.com/). We would like to thank Gary and AppCheck for their discretion in reporting the issue and help in confirming that it will be addressed correctly with the patches. Furthermore, it is worth highlighting the speed with which they have responded to questions and their help in planning the timeline for rollout and communication.

## Any questions?

*If you have additional questions not covered in this blog post please* [*use the forum post on Our Umbraco dedicated to this topic*](https://our.umbraco.com/forum/using-umbraco-and-getting-started/106655-questions-about-the-forms-security-advisory-july-2021)*. You can subscribe to email notifications for this forum post (hit the "follow" button at the top right) to receive updates.*

* **Published:** July 20, 2021
* **Read time:** 7 min. read
* **Category:** [Security](/blog/category/security/)

![](/media/0qrb1wvd/email_hero_780x405px-3.png)
### Related story

![Andy Butland](/media/opuanzqk/andy_butland_02-square.jpg?width=100&height=100&format=webp)
Written by
Andy Butland

[#### Security advisory: Security patches for Umbraco Forms ready on July 20th, 2021, at 7 AM UTC](/blog/security-advisory-security-patches-for-umbraco-forms-ready-on-july-20th-2021-at-7-am-utc/)

*A newly found, but not publicly known, security issue in Umbraco Forms could lead to a remote code execution attack and/or arbitrary file deletion. We have a fix ready which we will release on July 20th, 2021, at 7 AM UTC. This blog post is a heads-up as we highly advise you to be ready to apply the patch release. No action is required for Umbraco Cloud sites as they will be upgraded automatically on July 20th.*

# The CMS that fits you. Not the other way around.

## About Umbraco

* [About us](/about-us/)
* [Work at Umbraco](/work-at-umbraco/)
* [Terms and conditions](/terms-and-conditions/)
* [Privacy policy](/trust-center/privacy-and-umbraco/privacy-statement/)
* [Contact us](/contact-us/)
* [Trust Center](/trust-center/)

## Other resources

* [Our blog](/blog/)
* [Developers & Community](https://our.umbraco.com/)
* [Documentation](https://docs.umbraco.com)
* [Learning Base (YouTube)](https://www.youtube.com/channel/UCbGfwSAPflebnadyhEPw-wA)
* [Umbraco on Github](https://github.com/umbraco)
* [Mastodon](https://umbracocommunity.social/%40umbraco)
* [Knowledge base](/knowledge-base/)

## Follow Umbraco and stay in the loop

[X (Twitter)](https://twitter.com/umbraco "X (Twitter)")
[Facebook](https://www.facebook.com/Umbraco/ "Facebook")
[LinkedIn](https://www.linkedin.com/company/umbraco/ "LinkedIn")


