=== Content from git.ffmpeg.org_ed7a82af_20250114_231502.html ===

[![git](static/git-logo.png)](http://git-scm.com/ "git homepage")[projects](/gitweb) / [ffmpeg.git](/gitweb/ffmpeg.git) / commit

commit
grep
author
committer
pickaxe
 [?](/gitweb/ffmpeg.git/search_help "search help") search:

re

[summary](/gitweb/ffmpeg.git) | [shortlog](/gitweb/ffmpeg.git/shortlog/99f8d32129dd233d4eb2efa44678a0bc44869f23) | [log](/gitweb/ffmpeg.git/log/99f8d32129dd233d4eb2efa44678a0bc44869f23) | commit | [commitdiff](/gitweb/ffmpeg.git/commitdiff/99f8d32129dd233d4eb2efa44678a0bc44869f23) | [tree](/gitweb/ffmpeg.git/tree/99f8d32129dd233d4eb2efa44678a0bc44869f23)

(parent: [3650835](/gitweb/ffmpeg.git/commit/365083556ea7773604cca90dce729f988899a830)) | [patch](/gitweb/ffmpeg.git/patch/99f8d32129dd233d4eb2efa44678a0bc44869f23)

[avfilter/vf\_convolution: fix undefined behaviour](/gitweb/ffmpeg.git/commitdiff/99f8d32129dd233d4eb2efa44678a0bc44869f23)

| author | [Paul B Mahol](/gitweb/ffmpeg.git/search/99f8d32129dd233d4eb2efa44678a0bc44869f23?s=Paul+B+Mahol;st=author "Search for commits authored by Paul B Mahol") [<onemda@gmail.com>](/gitweb/ffmpeg.git/search/99f8d32129dd233d4eb2efa44678a0bc44869f23?s=onemda@gmail.com;st=author "Search for commits authored by onemda@gmail.com") |  |
| --- | --- | --- |
|  | Sun, 13 Oct 2019 16:37:16 +0000 (18:37 +0200) |
| committer | [Paul B Mahol](/gitweb/ffmpeg.git/search/99f8d32129dd233d4eb2efa44678a0bc44869f23?s=Paul+B+Mahol;st=committer "Search for commits committed by Paul B Mahol") [<onemda@gmail.com>](/gitweb/ffmpeg.git/search/99f8d32129dd233d4eb2efa44678a0bc44869f23?s=onemda@gmail.com;st=committer "Search for commits committed by onemda@gmail.com") |  |
|  | Sun, 13 Oct 2019 16:37:16 +0000 (18:37 +0200) |
| commit | 99f8d32129dd233d4eb2efa44678a0bc44869f23 |
| tree | [d06a037e394d66fed4711a82c2ba7605b9b967c6](/gitweb/ffmpeg.git/tree/99f8d32129dd233d4eb2efa44678a0bc44869f23) | [tree](/gitweb/ffmpeg.git/tree/99f8d32129dd233d4eb2efa44678a0bc44869f23) |
| parent | [365083556ea7773604cca90dce729f988899a830](/gitweb/ffmpeg.git/commit/365083556ea7773604cca90dce729f988899a830) | [commit](/gitweb/ffmpeg.git/commit/365083556ea7773604cca90dce729f988899a830) | [diff](/gitweb/ffmpeg.git/commitdiff/99f8d32129dd233d4eb2efa44678a0bc44869f23?hp=365083556ea7773604cca90dce729f988899a830) |

avfilter/vf\_convolution: fix undefined behaviour

Fixes #8263

| [libavfilter/vf\_convolution.c](/gitweb/ffmpeg.git/blob/99f8d32129dd233d4eb2efa44678a0bc44869f23%3A/libavfilter/vf_convolution.c) |  | [diff](/gitweb/ffmpeg.git/blobdiff/365083556ea7773604cca90dce729f988899a830..99f8d32129dd233d4eb2efa44678a0bc44869f23%3A/libavfilter/vf_convolution.c) | [blob](/gitweb/ffmpeg.git/blob/99f8d32129dd233d4eb2efa44678a0bc44869f23%3A/libavfilter/vf_convolution.c) | [history](/gitweb/ffmpeg.git/history/99f8d32129dd233d4eb2efa44678a0bc44869f23%3A/libavfilter/vf_convolution.c) |
| --- | --- | --- |

FFmpeg git repo
[RSS](/gitweb/ffmpeg.git/rss "log RSS feed")
[Atom](/gitweb/ffmpeg.git/atom "log Atom feed")



=== Content from trac.ffmpeg.org_0ad94d17_20250114_231503.html ===


[![FFmpeg](/ffmpeg-logo.png)](https://ffmpeg.org)

Search:

* [Login](/login)
* [Preferences](/prefs)
* [Help/Guide](/wiki/TracGuide)
* [About Trac](/about)
* [Register](/register)
* [Forgot your password?](/reset_password)

* [Wiki](/wiki)
* [Timeline](/timeline)
* [View Tickets](/report)
* [Search](/search)
* [Tags](/tags)

## Context Navigation

* ![Up-vote](/chrome/vote/aupgray.png)+0![Down-vote](/chrome/vote/adowngray.png)
* ← [Previous Ticket](/ticket/8262 "Ticket #8262")
* [Next Ticket](/ticket/8264 "Ticket #8264") →

---

Opened [5 years ago](/timeline?from=2019-10-13T15%3A19%3A17Z&precision=second "See timeline at Oct 13, 2019, 3:19:17 PM")

Closed [5 years ago](/timeline?from=2019-10-13T16%3A39%3A04Z&precision=second "See timeline at Oct 13, 2019, 4:39:04 PM")

## [#8263](/ticket/8263) [closed](/query?status=closed) [defect](/query?status=!closed&type=defect) ([fixed](/query?resolution=fixed&status=closed))

# signed integer overflow at libavfilter/vf\_convolution.c:139

| Reported by: | [Suhwan](/query?reporter=Suhwan&status=!closed) | Owned by: |  |
| --- | --- | --- | --- |
| Priority: | [normal](/query?priority=normal&status=!closed) | Component: | [undetermined](/query?component=undetermined&status=!closed) |
| Version: | [git-master](/query?status=!closed&version=git-master) | Keywords: | [ubsan](/query?keywords=~ubsan&status=!closed) |
| Cc: |  | Blocked By: |  |
| Blocking: |  | Reproduced by developer: | [no](/query?reproduced=0&status=!closed) |
| Analyzed by developer: | [no](/query?analyzed=0&status=!closed) |  |  |

## Description

Summary of the bug:

There are 3 signed integer overflow and 1 outside the range of representable values of type 'int' at libavfilter/vf\_convolution.c:139

I compiled ffmpeg with "--toolchain=clang-usan" to check the undefined-behaviours and attached log file.

How to reproduce:

```
% ffmpeg_g -y -i $PoC -filter_complex roberts -target dvd -loglevel 0 tmp.subviewer1

ffmpeg version N-95336-g4f4334bcbc Copyright (c) 2000-2019 the FFmpeg developers
built with clang version 6.0.0-1ubuntu2 (tags/RELEASE_600/final)
configuration: --cc=clang --cxx=clang++ --ld=clang --enable-debug --toolchain=clang-usan

```

Here's UBSAN log

```
libavfilter/vf_convolution.c:139:48: runtime error: signed integer overflow: -65535 * -65535 cannot be represented in type 'int'
SUMMARY: UndefinedBehaviorSanitizer: undefined-behavior libavfilter/vf_convolution.c:139:48 in
libavfilter/vf_convolution.c:139:36: runtime error: signed integer overflow: 65535 * 65535 cannot be represented in type 'int'
SUMMARY: UndefinedBehaviorSanitizer: undefined-behavior libavfilter/vf_convolution.c:139:36 in
libavfilter/vf_convolution.c:139:26: runtime error: -nan is outside the range of representable values of type 'int'
SUMMARY: UndefinedBehaviorSanitizer: undefined-behavior libavfilter/vf_convolution.c:139:26 in
libavfilter/vf_convolution.c:139:42: runtime error: signed integer overflow: 1712056129 + 1886425489 cannot be represented in type 'int'
SUMMARY: UndefinedBehaviorSanitizer: undefined-behavior libavfilter/vf_convolution.c:139:42 in

```

Please confirm.

Thanks

### Attachments (2)

[gdb-vf\_convolution\_139](/attachment/ticket/8263/gdb-vf_convolution_139 "View attachment")[​](/raw-attachment/ticket/8263/gdb-vf_convolution_139 "Download")
(18.7 KB
) - added by Suhwan [5 years ago](/timeline?from=2019-10-13T15%3A19%3A30Z&precision=second "See timeline at Oct 13, 2019, 3:19:30 PM").
[PoC\_vf\_convolution\_139.png48](/attachment/ticket/8263/PoC_vf_convolution_139.png48 "View attachment")[​](/raw-attachment/ticket/8263/PoC_vf_convolution_139.png48 "Download")
(12.4 KB
) - added by Suhwan [5 years ago](/timeline?from=2019-10-13T15%3A19%3A45Z&precision=second "See timeline at Oct 13, 2019, 3:19:45 PM").
poc

Download all attachments as:
[.zip](/zip-attachment/ticket/8263/)

Oldest first

Newest first

Threaded

Show comments

Show property changes

### Change History (3)

### by Suhwan, [5 years ago](/timeline?from=2019-10-13T15%3A19%3A30Z&precision=second "See timeline at Oct 13, 2019, 3:19:30 PM")

| Attachment: | [*gdb-vf\_convolution\_139*](/attachment/ticket/8263/gdb-vf_convolution_139)[​](/raw-attachment/ticket/8263/gdb-vf_convolution_139 "Download") added |
| --- | --- |

### by Suhwan, [5 years ago](/timeline?from=2019-10-13T15%3A19%3A45Z&precision=second "See timeline at Oct 13, 2019, 3:19:45 PM")

| Attachment: | [*PoC\_vf\_convolution\_139.png48*](/attachment/ticket/8263/PoC_vf_convolution_139.png48)[​](/raw-attachment/ticket/8263/PoC_vf_convolution_139.png48 "Download") added |
| --- | --- |

poc

### [comment:1](#comment:1) by Elon Musk, [5 years ago](/timeline?from=2019-10-13T16%3A39%3A04Z&precision=second "See timeline at Oct 13, 2019, 4:39:04 PM")

| Resolution: | → fixed |
| --- | --- |
| Status: | new → closed |

**Note:**
See [TracTickets](/wiki/TracTickets)
for help on using tickets.

### Download in other formats:

* [RSS Feed](/ticket/8263?format=rss)
* [Comma-delimited Text](/ticket/8263?format=csv)
* [Tab-delimited Text](/ticket/8263?format=tab)

---

[![Trac Powered](/chrome/common/trac_logo_mini.png)](https://trac.edgewall.org/)

Powered by [**Trac 1.6**](/about)

By [Edgewall Software](http://www.edgewall.org/)
.

Visit the Trac open source project at
<http://trac.edgewall.org/>


