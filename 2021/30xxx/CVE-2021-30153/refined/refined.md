Based on the provided content, here's a breakdown of the vulnerability described in CVE-2021-30153:

**Root Cause of Vulnerability:**

The vulnerability lies in the `ApiVisualEditor` component of MediaWiki.  Specifically, the code responsible for displaying edit notices on user pages incorrectly handles hidden users. It was found that `ApiVisualEditor` duplicated code from `EditPage.php` but did not properly implement the security fix present in that core file.

**Weaknesses/Vulnerabilities Present:**

*   **Information Leak:** The `ApiVisualEditor` was leaking information about the existence of hidden users. When a user visited the page of a hidden user, the VisualEditor's edit notices would reveal that the user is blocked instead of showing the same message as the old wikitext editor indicating that the user is not registered on the wiki. This allows an attacker to enumerate hidden users on a wiki.
*  **Inconsistent User Handling:** The inconsistency in how hidden users were presented between the old wikitext editor and the VisualEditor exposed the vulnerability.

**Impact of Exploitation:**

*   **Enumeration of Hidden Users:** An attacker could use this vulnerability to identify users who are hidden from normal view due to privacy settings or administrative actions. This information can be used to target these hidden users with attacks or to gather information about them.

**Attack Vectors:**

*   **Direct Page Access:** The attacker can directly visit the userpage via the visual editor or API. By observing the edit notices displayed, the attacker could determine if a user exists and if the user is hidden.
*   **API Access:** The attacker can also exploit this vulnerability via the API by querying user pages and analyzing the metadata returned.

**Required Attacker Capabilities/Position:**

*   **Basic User Access:** The attacker only needs basic user access (such as a registered account) on the wiki to exploit this vulnerability. No special privileges are needed.
*   **Familiarity with Visual Editor:** The attacker needs to be familiar with the visual editor and API to identify the leaked information.

**Additional Notes:**

*   The fix involved applying the same logic present in `EditPage.php` to `ApiVisualEditor.php` to ensure that hidden users are treated as if they do not exist from the perspective of unauthorized users.
*   The fix was backported to multiple branches: REL1_31, REL1_35, REL1_36, and master branch.
*   The vulnerability was initially discovered on December 18, 2020, and the patch was deployed on December 21, 2020 to a specific environment. The patch was included in the MediaWiki 1.31.13 and 1.35.2 releases.
*   The fix for the VisualEditor was related to a similar fix in the core, which was tracked in task T120883.