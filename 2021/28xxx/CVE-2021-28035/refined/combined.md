=== Content from rustsec.org_9ea8f6e6_20250114_220946.html ===


RUSTSEC-2021-0033: stack\_dst: push\_cloned can drop uninitialized memory or double free on panic › RustSec Advisory Database

#

[About](/)
[Advisories](/advisories/)
[Report Vulnerabilities](/contributing.html)

[History](https://github.com/RustSec/advisory-db/commits/main/crates/stack_dst/RUSTSEC-2021-0033.md) ⋅
[Edit](https://github.com/RustSec/advisory-db/edit/main/crates/stack_dst/RUSTSEC-2021-0033.md) ⋅
[JSON (OSV)](https://api.osv.dev/v1/vulns/RUSTSEC-2021-0033)

# RUSTSEC-2021-0033

push\_cloned can drop uninitialized memory or double free on panic

Reported
February 22, 2021

Issued
March 3, 2021

(last modified: June 13, 2023)

Package
[stack\_dst](/packages/stack_dst.html)
([crates.io](https://crates.io/crates/stack_dst))

Type
Vulnerability

Categories

* [memory-corruption](/categories/memory-corruption.html)

Keywords
[#memory-safety](/keywords/memory-safety.html)
[#double-free](/keywords/double-free.html)

Aliases

* [CVE-2021-28034](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-28034)
* [CVE-2021-28035](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-28035)
* [GHSA-45w7-7g63-2m5w](https://github.com/advisories/GHSA-45w7-7g63-2m5w)
* [GHSA-8mjx-h23h-w2pg](https://github.com/advisories/GHSA-8mjx-h23h-w2pg)

References

* <https://github.com/thepowersgang/stack_dst-rs/issues/5>

CVSS Score
9.8
CRITICAL

CVSS Details
Attack vectorNetwork
Attack complexityLow
Privileges requiredNone
User interactionNone
ScopeUnchanged
ConfidentialityHigh
IntegrityHigh
AvailabilityHigh

CVSS Vector
[CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H](https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H)
Patched

* `>=0.6.1`

Affected Functions
Version
`stack_dst::StackA::push_cloned`

* `<0.6.1`

### Description

Affected versions of `stack_dst` used a `push_inner` function that increased
the internal length of the array and then called `val.clone()`.

If the `val.clone()` call panics, the stack could drop an already dropped
element or drop uninitialized memory.

This issue was fixed in `2a4d538` by increasing the length of the array after
elements are cloned.

Advisory available under [CC0-1.0](https://spdx.org/licenses/CC0-1.0.html)
license.


