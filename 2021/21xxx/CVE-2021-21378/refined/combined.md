=== Content from github.com_17b2b250_20250115_080554.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fenvoyproxy%2Fenvoy%2Fcommit%2Fea39e3cba652bcc4b11bb0d5c62b017e584d2e5a)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fenvoyproxy%2Fenvoy%2Fcommit%2Fea39e3cba652bcc4b11bb0d5c62b017e584d2e5a)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=envoyproxy%2Fenvoy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[envoyproxy](/envoyproxy)
/
**[envoy](/envoyproxy/envoy)**
Public

* [Notifications](/login?return_to=%2Fenvoyproxy%2Fenvoy) You must be signed in to change notification settings
* [Fork
  4.9k](/login?return_to=%2Fenvoyproxy%2Fenvoy)
* [Star
   25.3k](/login?return_to=%2Fenvoyproxy%2Fenvoy)

* [Code](/envoyproxy/envoy)
* [Issues
  1.5k](/envoyproxy/envoy/issues)
* [Pull requests
  129](/envoyproxy/envoy/pulls)
* [Actions](/envoyproxy/envoy/actions)
* [Projects
  0](/envoyproxy/envoy/projects)
* [Wiki](/envoyproxy/envoy/wiki)
* [Security](/envoyproxy/envoy/security)
* [Insights](/envoyproxy/envoy/pulse)

Additional navigation options

* [Code](/envoyproxy/envoy)
* [Issues](/envoyproxy/envoy/issues)
* [Pull requests](/envoyproxy/envoy/pulls)
* [Actions](/envoyproxy/envoy/actions)
* [Projects](/envoyproxy/envoy/projects)
* [Wiki](/envoyproxy/envoy/wiki)
* [Security](/envoyproxy/envoy/security)
* [Insights](/envoyproxy/envoy/pulse)

## Commit

[Permalink](/envoyproxy/envoy/commit/ea39e3cba652bcc4b11bb0d5c62b017e584d2e5a)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

jwt\_authn: fix a bug where JWT with wrong issuer is allowed in allow\_…

[Browse files](/envoyproxy/envoy/tree/ea39e3cba652bcc4b11bb0d5c62b017e584d2e5a)
Browse the repository at this point in the history

```
…missing case ([#15194](https://github.com/envoyproxy/envoy/pull/15194))

[jwt] When allow_missing is used inside RequiresAny, the requests with JWT with wrong issuer are accepted. This is a bug, allow_missing should only allow requests without any JWT. This change fixed the above issue by preserving JwtUnknownIssuer in allow_missing case.

Signed-off-by: Wayne Zhang <qiwzhang@google.com>
```

* Loading branch information

[![@qiwzhang](https://avatars.githubusercontent.com/u/11790727?s=40&v=4)](/qiwzhang)

[qiwzhang](/envoyproxy/envoy/commits?author=qiwzhang "View all commits by qiwzhang")
authored
Feb 26, 2021

1 parent
[d3ff1c6](/envoyproxy/envoy/commit/d3ff1c6c789636be6f74bd410c542a9d018fe69b)

commit ea39e3c

 Show file tree

 Hide file tree

Showing
**4 changed files**
with
**22 additions**
and
**13 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* docs/root/version\_history

  + docs/root/version\_history/current.rst
    [current.rst](#diff-486ddf71f632f6537c18c0735baa4eb49e33ce2646092a74f2ba7f63a346ed09)
* source/extensions/filters/http/jwt\_authn

  + source/extensions/filters/http/jwt\_authn/verifier.cc
    [verifier.cc](#diff-547f5fb01a9e175d0dcd5c4b72bda72596dcdeda682ea10aa28d187506321c4a)
* test/extensions/filters/http/jwt\_authn

  + test/extensions/filters/http/jwt\_authn/all\_verifier\_test.cc
    [all\_verifier\_test.cc](#diff-49ec2ea5ae0eb3458d664c9951a05b272e64f968f423f5a971af463ad1f6b8c9)
  + test/extensions/filters/http/jwt\_authn/group\_verifier\_test.cc
    [group\_verifier\_test.cc](#diff-84a4f8e6bb37684958ffeda143dc809380d1184af13f6fd151798fc0710bc92d)

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[docs/root/version\_history/current.rst](#diff-486ddf71f632f6537c18c0735baa4eb49e33ce2646092a74f2ba7f63a346ed09 "docs/root/version_history/current.rst")

Show comments

[View file](/envoyproxy/envoy/blob/ea39e3cba652bcc4b11bb0d5c62b017e584d2e5a/docs/root/version_history/current.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -58,6 +58,7 @@ Bug Fixes |
|  |  | \* grpc\_http\_bridge: the downstream HTTP status is now correctly set for trailers-only responses from the upstream. |
|  |  | \* http: disallowing "host:" in request\_headers\_to\_add for behavioral consistency with rejecting :authority header. This behavior can be temporarily reverted by setting `envoy.reloadable\_features.treat\_host\_like\_authority` to false. |
|  |  | \* http: reverting a behavioral change where upstream connect timeouts were temporarily treated differently from other connection failures. The change back to the original behavior can be temporarily reverted by setting `envoy.reloadable\_features.treat\_upstream\_connect\_timeout\_as\_connect\_failure` to false. |
|  |  | \* jwt\_authn: reject requests with a proper error if JWT has the wrong issuer when allow\_missing is used. Before this change, the requests are accepted. |
|  |  | \* listener: prevent crashing when an unknown listener config proto is received and debug logging is enabled. |
|  |  | \* overload: fix a bug that can cause use-after-free when one scaled timer disables another one with the same duration. |
|  |  | \* sni: as the server name in sni should be case-insensitive, envoy will convert the server name as lower case first before any other process inside envoy. |
| Expand Down | |  |

15 changes: 7 additions & 8 deletions

15
[source/extensions/filters/http/jwt\_authn/verifier.cc](#diff-547f5fb01a9e175d0dcd5c4b72bda72596dcdeda682ea10aa28d187506321c4a "source/extensions/filters/http/jwt_authn/verifier.cc")

Show comments

[View file](/envoyproxy/envoy/blob/ea39e3cba652bcc4b11bb0d5c62b017e584d2e5a/source/extensions/filters/http/jwt_authn/verifier.cc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -301,17 +301,16 @@ class AnyVerifierImpl : public BaseGroupVerifierImpl { |
|  |  | // Then wait for all children to be done. |
|  |  | if (++completion\_state.number\_completed\_children\_ == verifiers\_.size()) { |
|  |  | // Aggregate all children status into a final status. |
|  |  | // JwtMissing should be treated differently than other failure status |
|  |  | // since it simply means there is not Jwt token for the required provider. |
|  |  | // If there is a failure status other than JwtMissing in the children, |
|  |  | // it should be used as the final status. |
|  |  | // JwtMissed and JwtUnknownIssuer should be treated differently than other errors. |
|  |  | // JwtMissed means not Jwt token for the required provider. |
|  |  | // JwtUnknownIssuer means wrong issuer for the required provider. |
|  |  | Status final\_status = Status::JwtMissed; |
|  |  | for (const auto& it : verifiers\_) { |
|  |  | // If a Jwt is extracted from a location not specified by the required provider, |
|  |  | // the authenticator returns JwtUnknownIssuer. It should be treated the same as |
|  |  | // JwtMissed. |
|  |  | // Prefer errors which are not JwtMissed nor JwtUnknownIssuer. |
|  |  | // Prefer JwtUnknownIssuer between JwtMissed and JwtUnknownIssuer. |
|  |  | Status child\_status = context.getCompletionState(it.get()).status\_; |
|  |  | if (child\_status != Status::JwtMissed && child\_status != Status::JwtUnknownIssuer) { |
|  |  | if ((child\_status != Status::JwtMissed && child\_status != Status::JwtUnknownIssuer) || |
|  |  | final\_status == Status::JwtMissed) { |
|  |  | final\_status = child\_status; |
|  |  | } |
|  |  | } |
| Expand Down | |  |

13 changes: 11 additions & 2 deletions

13
[test/extensions/filters/http/jwt\_authn/all\_verifier\_test.cc](#diff-49ec2ea5ae0eb3458d664c9951a05b272e64f968f423f5a971af463ad1f6b8c9 "test/extensions/filters/http/jwt_authn/all_verifier_test.cc")

Show comments

[View file](/envoyproxy/envoy/blob/ea39e3cba652bcc4b11bb0d5c62b017e584d2e5a/test/extensions/filters/http/jwt_authn/all_verifier_test.cc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -197,7 +197,7 @@ TEST\_F(SingleAllowMissingInOrListTest, BadJwt) { |
|  |  | } |
|  |  |  |
|  |  | TEST\_F(SingleAllowMissingInOrListTest, MissingIssToken) { |
|  |  | EXPECT\_CALL(mock\_cb\_, onComplete(Status::Ok)); |
|  |  | EXPECT\_CALL(mock\_cb\_, onComplete(Status::JwtUnknownIssuer)); |
|  |  | auto headers = Http::TestRequestHeaderMapImpl{{kExampleHeader, ES256WithoutIssToken}}; |
|  |  | context\_ = Verifier::createContext(headers, parent\_span\_, &mock\_cb\_); |
|  |  | verifier\_->verify(context\_); |
| Expand Down  Expand Up | | @@ -471,6 +471,15 @@ TEST\_F(AllowMissingInOrListTest, OtherGoodJwt) { |
|  |  | EXPECT\_THAT(headers, JwtOutputFailedOrIgnore(kOtherHeader)); |
|  |  | } |
|  |  |  |
|  |  | TEST\_F(AllowMissingInOrListTest, WrongIssuer) { |
|  |  | EXPECT\_CALL(mock\_cb\_, onComplete(Status::JwtUnknownIssuer)); |
|  |  | auto headers = Http::TestRequestHeaderMapImpl{{kExampleHeader, OtherGoodToken}}; |
|  |  | context\_ = Verifier::createContext(headers, parent\_span\_, &mock\_cb\_); |
|  |  | verifier\_->verify(context\_); |
|  |  | // x-other JWT should be ignored. |
|  |  | EXPECT\_THAT(headers, JwtOutputFailedOrIgnore(kOtherHeader)); |
|  |  | } |
|  |  |  |
|  |  | TEST\_F(AllowMissingInOrListTest, BadAndGoodJwts) { |
|  |  | EXPECT\_CALL(mock\_cb\_, onComplete(Status::JwtVerificationFail)); |
|  |  | auto headers = Http::TestRequestHeaderMapImpl{{kExampleHeader, NonExistKidToken}, |
| Expand Down  Expand Up | | @@ -589,7 +598,7 @@ TEST\_F(AllowMissingInAndOfOrListTest, TwoGoodJwts) { |
|  |  | } |
|  |  |  |
|  |  | TEST\_F(AllowMissingInAndOfOrListTest, GoodAndBadJwts) { |
|  |  | EXPECT\_CALL(mock\_cb\_, onComplete(Status::Ok)); |
|  |  | EXPECT\_CALL(mock\_cb\_, onComplete(Status::JwtUnknownIssuer)); |
|  |  | // Use the token with example.com issuer for x-other. |
|  |  | auto headers = |
|  |  | Http::TestRequestHeaderMapImpl{{kExampleHeader, GoodToken}, {kOtherHeader, GoodToken}}; |
| Expand Down | |  |

6 changes: 3 additions & 3 deletions

6
[test/extensions/filters/http/jwt\_authn/group\_verifier\_test.cc](#diff-84a4f8e6bb37684958ffeda143dc809380d1184af13f6fd151798fc0710bc92d "test/extensions/filters/http/jwt_authn/group_verifier_test.cc")

Show comments

[View file](/envoyproxy/envoy/blob/ea39e3cba652bcc4b11bb0d5c62b017e584d2e5a/test/extensions/filters/http/jwt_authn/group_verifier_test.cc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -582,8 +582,8 @@ TEST\_F(GroupVerifierTest, TestRequiresAnyWithAllowMissingButFailed) { |
|  |  | callbacks\_["other\_provider"](Status::JwtExpired); |
|  |  | } |
|  |  |  |
|  |  | // Test RequiresAny with two providers and allow\_missing, but OK |
|  |  | TEST\_F(GroupVerifierTest, TestRequiresAnyWithAllowMissingButOk) { |
|  |  | // Test RequiresAny with two providers and allow\_missing, but one returns JwtUnknownIssuer |
|  |  | TEST\_F(GroupVerifierTest, TestRequiresAnyWithAllowMissingButUnknownIssuer) { |
|  |  | TestUtility::loadFromYaml(RequiresAnyConfig, proto\_config\_); |
|  |  | proto\_config\_.mutable\_rules(0) |
|  |  | ->mutable\_requires() |
| Expand All | | @@ -592,7 +592,7 @@ TEST\_F(GroupVerifierTest, TestRequiresAnyWithAllowMissingButOk) { |
|  |  | ->mutable\_allow\_missing(); |
|  |  |  |
|  |  | createAsyncMockAuthsAndVerifier(std::vector<std::string>{"example\_provider", "other\_provider"}); |
|  |  | EXPECT\_CALL(mock\_cb\_, onComplete(Status::Ok)); |
|  |  | EXPECT\_CALL(mock\_cb\_, onComplete(Status::JwtUnknownIssuer)); |
|  |  |  |
|  |  | auto headers = Http::TestRequestHeaderMapImpl{}; |
|  |  | context\_ = Verifier::createContext(headers, parent\_span\_, &mock\_cb\_); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `ea39e3c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fenvoyproxy%2Fenvoy%2Fcommit%2Fea39e3cba652bcc4b11bb0d5c62b017e584d2e5a) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_2c0fe267_20250115_080556.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fenvoyproxy%2Fenvoy%2Fsecurity%2Fadvisories%2FGHSA-4996-m8hf-hj27)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fenvoyproxy%2Fenvoy%2Fsecurity%2Fadvisories%2FGHSA-4996-m8hf-hj27)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=envoyproxy%2Fenvoy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[envoyproxy](/envoyproxy)
/
**[envoy](/envoyproxy/envoy)**
Public

* [Notifications](/login?return_to=%2Fenvoyproxy%2Fenvoy) You must be signed in to change notification settings
* [Fork
  4.9k](/login?return_to=%2Fenvoyproxy%2Fenvoy)
* [Star
   25.3k](/login?return_to=%2Fenvoyproxy%2Fenvoy)

* [Code](/envoyproxy/envoy)
* [Issues
  1.5k](/envoyproxy/envoy/issues)
* [Pull requests
  129](/envoyproxy/envoy/pulls)
* [Actions](/envoyproxy/envoy/actions)
* [Projects
  0](/envoyproxy/envoy/projects)
* [Wiki](/envoyproxy/envoy/wiki)
* [Security](/envoyproxy/envoy/security)
* [Insights](/envoyproxy/envoy/pulse)

Additional navigation options

* [Code](/envoyproxy/envoy)
* [Issues](/envoyproxy/envoy/issues)
* [Pull requests](/envoyproxy/envoy/pulls)
* [Actions](/envoyproxy/envoy/actions)
* [Projects](/envoyproxy/envoy/projects)
* [Wiki](/envoyproxy/envoy/wiki)
* [Security](/envoyproxy/envoy/security)
* [Insights](/envoyproxy/envoy/pulse)

# JWT authentication bypass with unknown issuer token

High

[htuch](/htuch)
published
GHSA-4996-m8hf-hj27
Mar 9, 2021

## Package

No package listed

## Affected versions

1.17.0

## Patched versions

1.17.1

## Description

### Brief Description

An attacker can bypass authentication by presenting a JWT token with an issuer that is not in the provider list when Envoy’s JWT Authentication filter is configured with the `allow_missing` requirement under `requires_any` due to a mistake in implementation.

#### CVSS

 [CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:L/A:N](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:L/A:N)

CVSS score 8.2 (High)

### Affected version(s)

Envoy 1.17.0

#### Affected component(s)

JWT filter

### Attack vector(s)

An attacker can present a JWT token with an unknown issuer to bypass authentication when the JWT filter configuration allows missing JWT under a requires\_any configuration.

### Details

Envoy’s JWT Authentication filter can be configured with the `allow_missing` requirement that will be satisfied if JWT is missing (JwtMissed error) and fail if JWT is presented or invalid. Due to a mistake in implementation, a JwtUnknownIssuer error was mistakenly converted to JwtMissed when `requires_any` was configured. So if `allow_missing` was configured under `requires_any`, an attacker can bypass authentication by presenting a JWT token with an issuer that is not in the provider list. Integrity may be impacted depending on configuration if the JWT token is used to protect against writes or modifications.

This regression was introduced on 2020/11/12 in PR [13839](https://github.com/envoyproxy/envoy/pull/13839) which fixed handling `allow_missing` under RequiresAny in a JwtRequirement (see issue [13458](https://github.com/envoyproxy/envoy/issues/13458)). The AnyVerifier aggregates the children verifiers’ results into a final status where JwtMissing is the default error. However, a JwtUnknownIssuer was mistakenly treated the same as a JwtMissing error and the resulting final aggregation was the default JwtMissing. As a result, `allow_missing` would allow a JWT token with an unknown issuer status.

PR [15194](https://github.com/envoyproxy/envoy/pull/15194) fixes the issue by preferring JwtUnknownIssuer over a JwtMissing error, fixing the accidental conversion and bypass with `allow_missing`.

The vulnerability was originally reported via private disclosure to Istio Product Security Team on 2021/02/20. It was disclosed to the Envoy Security team on 2021/02/24 after a fix was accidentally pushed to the public Envoy repository during the investigation. Due to this, Envoy Security team treated this as a public zero day and released a fix on 2021/02/25. Because of the recent regression, the issue only impacted Envoy version 1.17.0 and Istio version 1.9.

### Mitigations

Vulnerable users can mitigate this by using an RBAC filter that checks the dynamic metadata for the validation result. The JWT filter will write successfully verified JWT payloads to dynamic metadata when `payload_in_metadata` is enabled in the JWT filter. It will not be present if the JWT filter bypasses validation. For example, if `payload_in_metadata` has value `auth_payload`, you can configure RBAC like the following.

```
 - name: envoy.filters.http.rbac
    config:
      rules:
        action: ALLOW
        policies:
          "any":
            principals:
              - metadata:
                  filter: envoy.filters.http.jwt_authn
                  path:
                    - key: auth_payload
                  value:
                    present_match: true
            permissions:
              - any: true

```
### Detection

A user could detect whether a bypass occurred if they have Envoy logs enabled with debug verbosity. Users can enable component level debug logs for JWT. The JWT filter logs will indicate that there is a request with a JWT token and a failure that the JWT token is missing.

### References

[#13839](https://github.com/envoyproxy/envoy/pull/13839)

### Severity

High

8.2

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
Low

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:L/A:N

### CVE ID

CVE-2021-21378

### Weaknesses

[CWE-303](/advisories?query=cwe%3A303)

### Credits

* [![@farcaller](https://avatars.githubusercontent.com/u/693?s=40&v=4)](/farcaller)
  [farcaller](/farcaller)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_5754c502_20250115_080555.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fenvoyproxy%2Fenvoy%2Fpull%2F15194)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fenvoyproxy%2Fenvoy%2Fpull%2F15194)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=envoyproxy%2Fenvoy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[envoyproxy](/envoyproxy)
/
**[envoy](/envoyproxy/envoy)**
Public

* [Notifications](/login?return_to=%2Fenvoyproxy%2Fenvoy) You must be signed in to change notification settings
* [Fork
  4.9k](/login?return_to=%2Fenvoyproxy%2Fenvoy)
* [Star
   25.3k](/login?return_to=%2Fenvoyproxy%2Fenvoy)

* [Code](/envoyproxy/envoy)
* [Issues
  1.5k](/envoyproxy/envoy/issues)
* [Pull requests
  129](/envoyproxy/envoy/pulls)
* [Actions](/envoyproxy/envoy/actions)
* [Projects
  0](/envoyproxy/envoy/projects)
* [Wiki](/envoyproxy/envoy/wiki)
* [Security](/envoyproxy/envoy/security)
* [Insights](/envoyproxy/envoy/pulse)

Additional navigation options

* [Code](/envoyproxy/envoy)
* [Issues](/envoyproxy/envoy/issues)
* [Pull requests](/envoyproxy/envoy/pulls)
* [Actions](/envoyproxy/envoy/actions)
* [Projects](/envoyproxy/envoy/projects)
* [Wiki](/envoyproxy/envoy/wiki)
* [Security](/envoyproxy/envoy/security)
* [Insights](/envoyproxy/envoy/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fenvoyproxy%2Fenvoy%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fenvoyproxy%2Fenvoy%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# jwt\_authn: fix a bug where JWT with wrong issuer is allowed in allow\_missing case #15194

 Merged

[asraa](/asraa)
merged 3 commits into
[envoyproxy:main](/envoyproxy/envoy/tree/main "envoyproxy/envoy:main")
from
[qiwzhang:saved-jwt-allow-missing-bug](/qiwzhang/envoy/tree/saved-jwt-allow-missing-bug "qiwzhang/envoy:saved-jwt-allow-missing-bug")

Feb 26, 2021

 Merged

# [jwt\_authn: fix a bug where JWT with wrong issuer is allowed in allow\_missing case](#top) #15194

[asraa](/asraa)
merged 3 commits into
[envoyproxy:main](/envoyproxy/envoy/tree/main "envoyproxy/envoy:main")
from
[qiwzhang:saved-jwt-allow-missing-bug](/qiwzhang/envoy/tree/saved-jwt-allow-missing-bug "qiwzhang/envoy:saved-jwt-allow-missing-bug")

Feb 26, 2021

[Conversation
7](/envoyproxy/envoy/pull/15194)
[Commits
3](/envoyproxy/envoy/pull/15194/commits)
[Checks
0](/envoyproxy/envoy/pull/15194/checks)
[Files changed](/envoyproxy/envoy/pull/15194/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![qiwzhang](https://avatars.githubusercontent.com/u/11790727?s=60&v=4)](/qiwzhang)

Copy link

Contributor

### @qiwzhang **[qiwzhang](/qiwzhang)** commented [Feb 25, 2021](#issue-816743814) • edited Loading

When `allow_missing` is used inside `RequiresAny`, the requests with JWT with wrong issuer are accepted. This is a bug, `allow_missing` should only allow requests without any JWT.

This change fixed the above issue by preserving JwtUnknownIssuer in `allow_missing` case.

Change details:

* JwtUnkownIssuer error got converted to JwtMissing in error aggregation inside VerifyAny object. This is the root cause. Such conversion is not needed.
* Fix is to preserve JwtUknownIssuer in the error aggregation.

Risk Level: Low

Testing: unit-tested

Docs Changes: N/A

Release Notes: Yes

Sorry, something went wrong.

All reactions

 [qiwzhang](/qiwzhang)
added 2 commits
[February 25, 2021 11:41](#commits-pushed-fc1644e)

[![@qiwzhang](https://avatars.githubusercontent.com/u/11790727?s=40&v=4)](/qiwzhang)

`[Retain JwtUnknownIssuer error for allowing_missing](/envoyproxy/envoy/pull/15194/commits/fc1644ee11a53a60da349cacede8d6cb1d619eee "Retain JwtUnknownIssuer error for allowing_missing

Signed-off-by: Wayne Zhang <qiwzhang@google.com>")`
 …

`[fc1644e](/envoyproxy/envoy/pull/15194/commits/fc1644ee11a53a60da349cacede8d6cb1d619eee)`

```
Signed-off-by: Wayne Zhang <qiwzhang@google.com>
```

[![@qiwzhang](https://avatars.githubusercontent.com/u/11790727?s=40&v=4)](/qiwzhang)

`[update release note](/envoyproxy/envoy/pull/15194/commits/8f091544593f98360c9e8710a0717eefa07f33ea "update release note

Signed-off-by: Wayne Zhang <qiwzhang@google.com>")`
 …

`[8f09154](/envoyproxy/envoy/pull/15194/commits/8f091544593f98360c9e8710a0717eefa07f33ea)`

```
Signed-off-by: Wayne Zhang <qiwzhang@google.com>
```

 [![@qiwzhang](https://avatars.githubusercontent.com/u/11790727?s=40&v=4)](/qiwzhang)
[qiwzhang](/qiwzhang)
requested a review
from [lizan](/lizan)
as a [code owner](/envoyproxy/envoy/blob/c5fb3cfa43618cec49d5359b3042ec88db1b5763/CODEOWNERS#L35)
[February 25, 2021 19:52](#event-4378442688)

[![@asraa](https://avatars.githubusercontent.com/u/5194569?s=40&u=f7434e64e439c0a6534a4e77cebb842499736cc3&v=4)](/asraa)
[asraa](/asraa)
assigned [lizan](/lizan)
[Feb 25, 2021](#event-4378446093)

[![@qiwzhang](https://avatars.githubusercontent.com/u/11790727?s=80&v=4)](/qiwzhang)

Copy link

Contributor

Author

### **[qiwzhang](/qiwzhang)** commented [Feb 25, 2021](#issuecomment-786159749)

| [@yangminzhu](https://github.com/yangminzhu) could you help to review it? |
| --- |

All reactions

Sorry, something went wrong.

[![@htuch](https://avatars.githubusercontent.com/u/10914751?s=80&u=d0af247cd9d9e53782b6bd98967925a40f898f5b&v=4)](/htuch)

Copy link

Member

### **[htuch](/htuch)** commented [Feb 25, 2021](#issuecomment-786167680)

| [@lizan](https://github.com/lizan) tagging for a pass from you, thanks! |
| --- |

All reactions

Sorry, something went wrong.

[![lizan](https://avatars.githubusercontent.com/u/1016047?s=60&v=4)](/lizan)

**[lizan](/lizan)**
previously approved these changes
[Feb 25, 2021](#pullrequestreview-598957009)

 [View reviewed changes](/envoyproxy/envoy/pull/15194/files/8f091544593f98360c9e8710a0717eefa07f33ea)

[![yangminzhu](https://avatars.githubusercontent.com/u/2189160?s=60&v=4)](/yangminzhu)

**[yangminzhu](/yangminzhu)**
reviewed
[Feb 25, 2021](#pullrequestreview-598990628)

 [View reviewed changes](/envoyproxy/envoy/pull/15194/files/8f091544593f98360c9e8710a0717eefa07f33ea)

[source/extensions/filters/http/jwt\_authn/verifier.cc](/envoyproxy/envoy/pull/15194/files/8f091544593f98360c9e8710a0717eefa07f33ea#diff-547f5fb01a9e175d0dcd5c4b72bda72596dcdeda682ea10aa28d187506321c4a)

Show resolved

Hide resolved

[![yangminzhu](https://avatars.githubusercontent.com/u/2189160?s=60&v=4)](/yangminzhu)

**[yangminzhu](/yangminzhu)**
previously approved these changes
[Feb 25, 2021](#pullrequestreview-599018303)

 [View reviewed changes](/envoyproxy/envoy/pull/15194/files/8f091544593f98360c9e8710a0717eefa07f33ea)

[source/extensions/filters/http/jwt\_authn/verifier.cc](/envoyproxy/envoy/pull/15194/files/8f091544593f98360c9e8710a0717eefa07f33ea#diff-547f5fb01a9e175d0dcd5c4b72bda72596dcdeda682ea10aa28d187506321c4a)

Show resolved

Hide resolved

[![@qiwzhang](https://avatars.githubusercontent.com/u/11790727?s=40&v=4)](/qiwzhang)

`[Update comment](/envoyproxy/envoy/pull/15194/commits/57a2fb464c45c94df6d41118044895d70d1d0043 "Update comment

Signed-off-by: Wayne Zhang <qiwzhang@google.com>")`
 …

`[57a2fb4](/envoyproxy/envoy/pull/15194/commits/57a2fb464c45c94df6d41118044895d70d1d0043)`

```
Signed-off-by: Wayne Zhang <qiwzhang@google.com>
```

 [![@qiwzhang](https://avatars.githubusercontent.com/u/11790727?s=40&v=4)](/qiwzhang)
[qiwzhang](/qiwzhang)
dismissed stale reviews from [yangminzhu](/yangminzhu) and [lizan](/lizan)
via
`[57a2fb4](/envoyproxy/envoy/commit/57a2fb464c45c94df6d41118044895d70d1d0043)`
[February 25, 2021 20:59](#event-4378715913)

[![yangminzhu](https://avatars.githubusercontent.com/u/2189160?s=60&v=4)](/yangminzhu)

**[yangminzhu](/yangminzhu)**
approved these changes
[Feb 25, 2021](#pullrequestreview-599028817)

 [View reviewed changes](/envoyproxy/envoy/pull/15194/files/57a2fb464c45c94df6d41118044895d70d1d0043)

Copy link

Contributor

### @yangminzhu **[yangminzhu](/yangminzhu)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

LGTM, thanks for the fix!

Sorry, something went wrong.

All reactions

[![@asraa](https://avatars.githubusercontent.com/u/5194569?s=40&u=f7434e64e439c0a6534a4e77cebb842499736cc3&v=4)](/asraa)
[asraa](/asraa)
mentioned this pull request
[Feb 25, 2021](#ref-pullrequest-816844081)

[backport to 1.17: jwt\_authn: fix a bug where JWT with wrong issuer is allowed in allow\_missing case
#15199](/envoyproxy/envoy/pull/15199)
 Merged

[![asraa](https://avatars.githubusercontent.com/u/5194569?s=60&v=4)](/asraa)

**[asraa](/asraa)**
approved these changes
[Feb 26, 2021](#pullrequestreview-599166230)

 [View reviewed changes](/envoyproxy/envoy/pull/15194/files/57a2fb464c45c94df6d41118044895d70d1d0043)

[![@asraa](https://avatars.githubusercontent.com/u/5194569?s=40&u=f7434e64e439c0a6534a4e77cebb842499736cc3&v=4)](/asraa)
[asraa](/asraa)
merged commit [`ea39e3c`](/envoyproxy/envoy/commit/ea39e3cba652bcc4b11bb0d5c62b017e584d2e5a)
into
envoyproxy:main

[Feb 26, 2021](https://github.com/envoyproxy/envoy/pull/15194#event-4379454124)

[![@Shikugawa](https://avatars.githubusercontent.com/u/17607122?s=40&u=b8a660796bebfd858d027657420ddfd7702fe645&v=4)](/Shikugawa)
[Shikugawa](/Shikugawa)
added
the
[backport/approved](/envoyproxy/envoy/labels/backport/approved)
Approved backports to stable releases
label
[Feb 26, 2021](#event-4379789737)

[![@myidpt](https://avatars.githubusercontent.com/u/102881?s=40&v=4)](/myidpt)
[myidpt](/myidpt)
mentioned this pull request
[Feb 26, 2021](#ref-pullrequest-817574065)

[jwt\_authn: fix a bug where JWT with wrong issuer is allowed in allow\_missing case
istio/envoy#303](/istio/envoy/pull/303)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fenvoyproxy%2Fenvoy%2Fpull%2F15194)

Reviewers

[![@asraa](https://avatars.githubusercontent.com/u/5194569?s=40&v=4)](/asraa) [asraa](/asraa)

asraa approved these changes

[![@yangminzhu](https://avatars.githubusercontent.com/u/2189160?s=40&v=4)](/yangminzhu) [yangminzhu](/yangminzhu)

yangminzhu approved these changes

[![@lizan](https://avatars.githubusercontent.com/u/1016047?s=40&v=4)](/lizan) [lizan](/lizan)

lizan left review comments

Assignees

[![@lizan](https://avatars.githubusercontent.com/u/1016047?s=40&v=4)](/lizan) [lizan](/lizan)

Labels

[backport/approved](/envoyproxy/envoy/labels/backport/approved)
Approved backports to stable releases

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

6 participants

[![@qiwzhang](https://avatars.githubusercontent.com/u/11790727?s=52&v=4)](/qiwzhang) [![@htuch](https://avatars.githubusercontent.com/u/10914751?s=52&v=4)](/htuch) [![@lizan](https://avatars.githubusercontent.com/u/1016047?s=52&v=4)](/lizan) [![@yangminzhu](https://avatars.githubusercontent.com/u/2189160?s=52&v=4)](/yangminzhu) [![@asraa](https://avatars.githubusercontent.com/u/5194569?s=52&v=4)](/asraa) [![@Shikugawa](https://avatars.githubusercontent.com/u/17607122?s=52&v=4)](/Shikugawa)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


