=== Content from github.com_45532199_20250115_084743.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flaverdet%2Fisolated-vm%2Fcommit%2F27151bfecc260e96714443613880e3b2e6596704)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flaverdet%2Fisolated-vm%2Fcommit%2F27151bfecc260e96714443613880e3b2e6596704)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=laverdet%2Fisolated-vm)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[laverdet](/laverdet)
/
**[isolated-vm](/laverdet/isolated-vm)**
Public

* [Notifications](/login?return_to=%2Flaverdet%2Fisolated-vm) You must be signed in to change notification settings
* [Fork
  156](/login?return_to=%2Flaverdet%2Fisolated-vm)
* [Star
   2.3k](/login?return_to=%2Flaverdet%2Fisolated-vm)

* [Code](/laverdet/isolated-vm)
* [Issues
  73](/laverdet/isolated-vm/issues)
* [Pull requests
  1](/laverdet/isolated-vm/pulls)
* [Actions](/laverdet/isolated-vm/actions)
* [Projects
  0](/laverdet/isolated-vm/projects)
* [Security](/laverdet/isolated-vm/security)
* [Insights](/laverdet/isolated-vm/pulse)

Additional navigation options

* [Code](/laverdet/isolated-vm)
* [Issues](/laverdet/isolated-vm/issues)
* [Pull requests](/laverdet/isolated-vm/pulls)
* [Actions](/laverdet/isolated-vm/actions)
* [Projects](/laverdet/isolated-vm/projects)
* [Security](/laverdet/isolated-vm/security)
* [Insights](/laverdet/isolated-vm/pulse)

## Commit

[Permalink](/laverdet/isolated-vm/commit/27151bfecc260e96714443613880e3b2e6596704)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Disallow NativeModule creation unless main isolate

[Browse files](/laverdet/isolated-vm/tree/27151bfecc260e96714443613880e3b2e6596704)
Browse the repository at this point in the history

* Loading branch information

[![@laverdet](https://avatars.githubusercontent.com/u/128856?s=40&v=4)](/laverdet)

[laverdet](/laverdet/isolated-vm/commits?author=laverdet "View all commits by laverdet")
committed
Mar 18, 2021

1 parent
[b4ae52b](/laverdet/isolated-vm/commit/b4ae52bf60e7a25f258e4122ace7837659f1bd0e)

commit 27151bf

Showing
**1 changed file**
with
**3 additions**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

3 changes: 3 additions & 0 deletions

3
[src/module/native\_module\_handle.cc](#diff-501830836b453d284c5e2821d29d8c2be007e0886017cf02792527f49a09e6f9 "src/module/native_module_handle.cc")

Show comments

[View file](/laverdet/isolated-vm/blob/27151bfecc260e96714443613880e3b2e6596704/src/module/native_module_handle.cc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -15,6 +15,9 @@ namespace ivm { |
|  |  | \* RAII wrapper around libuv dlopen |
|  |  | \*/ |
|  |  | NativeModule::NativeModule(const std::string& filename) : init(nullptr) { |
|  |  | if (!IsolateEnvironment::GetCurrent()->IsDefault()) { |
|  |  | throw RuntimeGenericError("NativeModule may only be instantiated from default nodejs isolate"); |
|  |  | } |
|  |  | if (uv\_dlopen(filename.c\_str(), &lib) != 0) { |
|  |  | throw RuntimeGenericError("Failed to load module"); |
|  |  | } |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `27151bf`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flaverdet%2Fisolated-vm%2Fcommit%2F27151bfecc260e96714443613880e3b2e6596704) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_1d52fe83_20250115_084742.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flaverdet%2Fisolated-vm%2Fcommit%2F2646e6c1558bac66285daeab54c7d490ed332b15)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flaverdet%2Fisolated-vm%2Fcommit%2F2646e6c1558bac66285daeab54c7d490ed332b15)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=laverdet%2Fisolated-vm)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[laverdet](/laverdet)
/
**[isolated-vm](/laverdet/isolated-vm)**
Public

* [Notifications](/login?return_to=%2Flaverdet%2Fisolated-vm) You must be signed in to change notification settings
* [Fork
  156](/login?return_to=%2Flaverdet%2Fisolated-vm)
* [Star
   2.3k](/login?return_to=%2Flaverdet%2Fisolated-vm)

* [Code](/laverdet/isolated-vm)
* [Issues
  73](/laverdet/isolated-vm/issues)
* [Pull requests
  1](/laverdet/isolated-vm/pulls)
* [Actions](/laverdet/isolated-vm/actions)
* [Projects
  0](/laverdet/isolated-vm/projects)
* [Security](/laverdet/isolated-vm/security)
* [Insights](/laverdet/isolated-vm/pulse)

Additional navigation options

* [Code](/laverdet/isolated-vm)
* [Issues](/laverdet/isolated-vm/issues)
* [Pull requests](/laverdet/isolated-vm/pulls)
* [Actions](/laverdet/isolated-vm/actions)
* [Projects](/laverdet/isolated-vm/projects)
* [Security](/laverdet/isolated-vm/security)
* [Insights](/laverdet/isolated-vm/pulse)

## Commit

[Permalink](/laverdet/isolated-vm/commit/2646e6c1558bac66285daeab54c7d490ed332b15)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Don't invoke accessors or proxies via Reference functions

[Browse files](/laverdet/isolated-vm/tree/2646e6c1558bac66285daeab54c7d490ed332b15)
Browse the repository at this point in the history

* Loading branch information

[![@laverdet](https://avatars.githubusercontent.com/u/128856?s=40&v=4)](/laverdet)

[laverdet](/laverdet/isolated-vm/commits?author=laverdet "View all commits by laverdet")
committed
Mar 20, 2021

1 parent
[3a2408a](/laverdet/isolated-vm/commit/3a2408a2b42ac51c64a6c10f9388a6f7cc311156)

commit 2646e6c

 Show file tree

 Hide file tree

Showing
**7 changed files**
with
**249 additions**
and
**121 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* CHANGELOG.md
  [CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
* README.md
  [README.md](#diff-b335630551682c19a781afebcf4d07bf978fb1f8ac04c6bf87428ed5106870f5)
* isolated-vm.d.ts
  [isolated-vm.d.ts](#diff-da8ad408ae9b03385c3abf162858ac27f6dc4efca93ca7d3a02d918747c96946)
* src

  + isolate

    - src/isolate/strings.h
      [strings.h](#diff-094bae6562ea2af54e16c1314b820d5edc2c75933b3ee3e42847d7ab9c335e3a)
  + module

    - src/module/reference\_handle.cc
      [reference\_handle.cc](#diff-e6ad9336c3c8962ae97f051134b9320ebc07d28d5bb19ef1b6615b873cc2fe81)
    - src/module/reference\_handle.h
      [reference\_handle.h](#diff-6f0793c27ad48d63ebed255362b7a2cd56e86b01df082ae7a24f49e261f887c3)
* tests

  + tests/reference.js
    [reference.js](#diff-3f8e1a17283b6cdad5a2045283abc7f699d4b20d86f38de40558318059ee06d4)

## There are no files selected for viewing

3 changes: 2 additions & 1 deletion

3
[CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed "CHANGELOG.md")

Show comments

[View file](/laverdet/isolated-vm/blob/2646e6c1558bac66285daeab54c7d490ed332b15/CHANGELOG.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -1,8 +1,9 @@ |
|  |  | ## v4.0.0 |
|  |  | - `Callback` class addeed. |
|  |  | - When possible, `reference.get()` will return a function proxy instead of a `Reference`. |
|  |  | - When possible, `reference.get()` will return a function delegate instead of a `Reference`. |
|  |  | - `reference.get()` will no longer return inherited properties by default. |
|  |  | - `result` property on `eval` and `evalClosure` has been removed. The result is now just the return |
|  |  | value. |
|  |  | - All `isolated-vm` class prototypes, and most instances are frozen. |
|  |  | - `isolate.cpuTime` and `isolate.wallTime` now return bigints. |
|  |  | - Proxies and accessors are no longer tolerated via `reference.get`, and related functions. |

9 changes: 3 additions & 6 deletions

9
[README.md](#diff-b335630551682c19a781afebcf4d07bf978fb1f8ac04c6bf87428ed5106870f5 "README.md")

Show comments

[View file](/laverdet/isolated-vm/blob/2646e6c1558bac66285daeab54c7d490ed332b15/README.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -344,7 +344,7 @@ A instance of [`Reference`](#class-reference-transferable) is a pointer to a val |
|  |  | ##### `new ivm.Reference(value, options)` |
|  |  | \* `value` - The value to create a reference to. |
|  |  | \* `options` \*[object]\* |
|  |  | \* `inheritUnsafe` \*[boolean]\* - If enabled then the `get` family of functions will follow the |
|  |  | \* `unsafeInherit` \*[boolean]\* - If enabled then the `get` family of functions will follow the |
|  |  | object's prototype chain. References created with this option should never be given to untrusted |
|  |  | code. |
|  |  |  |
| Expand Down  Expand Up | | @@ -388,7 +388,6 @@ all attempts to access the reference will throw an error. |
|  |  | ##### `reference.deleteIgnored(property)` |
|  |  | ##### `reference.deleteSync(property)` |
|  |  | \* `property` \*[transferable]\* - The property to access on this object. |
|  |  | \* \*\*return\*\* `true` or `false` |
|  |  |  |
|  |  | Delete a property from this reference, as if using `delete reference[property]` |
|  |  |  |
| Expand All | | @@ -401,17 +400,15 @@ Delete a property from this reference, as if using `delete reference[property]` |
|  |  |  |
|  |  | Will access a reference as if using `reference[property]` and transfer the value out. |
|  |  |  |
|  |  | If the object is a proxy, or if the property is a getter, this method will throw. |
|  |  |  |
|  |  | ##### `reference.set(property, value, options)` \*[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\_Objects/Promise)\* |
|  |  | ##### `reference.setIgnored(property, value, options)` |
|  |  | ##### `reference.setSync(property, value, options)` |
|  |  | \* `property` \*[transferable]\* - The property to set on this object. |
|  |  | \* `value` \*[transferable]\* - The value to set on this object. |
|  |  | \* `options` \*[object]\* |
|  |  | \* [`{ ...TransferOptions }`](#transferoptions) |
|  |  | \* \*\*return\*\* `true` or `false` |
|  |  |  |
|  |  | Returns a boolean indicating whether or not this operation succeeded. I'm actually not really sure |
|  |  | when `false` would be returned, I'm just giving you the result back straight from the v8 API. |
|  |  |  |
|  |  | ##### `reference.apply(receiver, arguments, options)` \*[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\_Objects/Promise)\* |
|  |  | ##### `reference.applyIgnored(receiver, arguments, options)` |
| Expand Down | |  |

32 changes: 17 additions & 15 deletions

32
[isolated-vm.d.ts](#diff-da8ad408ae9b03385c3abf162858ac27f6dc4efca93ca7d3a02d918747c96946 "isolated-vm.d.ts")

Show comments

[View file](/laverdet/isolated-vm/blob/2646e6c1558bac66285daeab54c7d490ed332b15/isolated-vm.d.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -9,10 +9,12 @@ declare module "isolated-vm" { |
|  |  | | Context |
|  |  | | Script |
|  |  | | ExternalCopy<any> |
|  |  | | Callback<any> |
|  |  | | Copy<any> |
|  |  | | Reference<any> |
|  |  | | Dereference<any> |
|  |  | | Module |
|  |  | | ((...args: any[]) => any) |
|  |  | | typeof import("isolated-vm"); |
|  |  |  |
|  |  | /\*\* |
| Expand Down  Expand Up | | @@ -284,7 +286,7 @@ declare module "isolated-vm" { |
|  |  | \*/ |
|  |  | export class Reference<T = any> { |
|  |  | private \_\_ivm\_reference: T; |
|  |  | constructor(value: T, options?: { inheritUnsafe?: boolean }); |
|  |  | constructor(value: T, options?: { unsafeInherit?: boolean }); |
|  |  |  |
|  |  | /\*\* |
|  |  | \* This is the typeof the referenced value, and is available at any time |
| Expand Down  Expand Up | | @@ -331,31 +333,29 @@ declare module "isolated-vm" { |
|  |  | /\*\* |
|  |  | \* Delete a property from this reference, as if using `delete reference[property]` |
|  |  | \*/ |
|  |  | delete(property: keyof T): Promise<boolean>; |
|  |  | delete(property: keyof T): Promise<void>; |
|  |  | deleteIgnored(property: keyof T): void; |
|  |  | deleteSync(property: keyof T): boolean; |
|  |  | deleteSync(property: keyof T): void; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Will access a reference as if using reference[property] and return a reference to that value. |
|  |  | \* |
|  |  | \* If the object is a proxy, or if the property is a getter, this method will throw. |
|  |  | \*/ |
|  |  | get<Options extends TransferOptions, Key extends keyof T>( |
|  |  | property: Key, options?: Options): ResultTypeAsync<Options & AsReference, T[Key]>; |
|  |  | property: Key, options?: Options): ResultTypeAsync<Options & FallbackReference, T[Key]>; |
|  |  | getSync<Options extends TransferOptions, Key extends keyof T>( |
|  |  | property: Key, options?: Options): ResultTypeSync<Options & AsReference, T[Key]>; |
|  |  | property: Key, options?: Options): ResultTypeSync<Options & FallbackReference, T[Key]>; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Will access a reference as if using reference[property] and return a reference to that value. |
|  |  | \* |
|  |  | \* @return {boolean} Indicating whether or not this operation succeeded. I'm actually not really |
|  |  | \* sure when false would be returned, I'm just giving you the result back straight from the v8 |
|  |  | \* API. |
|  |  | \*/ |
|  |  | set<Options extends TransferOptions, Key extends keyof T>( |
|  |  | property: Key, value: ArgumentType<Options, T[Key]>, options?: Options): Promise<boolean>; |
|  |  | property: Key, value: ArgumentType<Options, T[Key]>, options?: Options): Promise<void>; |
|  |  | setIgnored<Options extends TransferOptions, Key extends keyof T>( |
|  |  | property: Key, value: ArgumentType<Options, T[Key]>, options?: Options): void; |
|  |  | setSync<Options extends TransferOptions, Key extends keyof T>( |
|  |  | property: Key, value: ArgumentType<Options, T[Key]>, options?: Options): boolean; |
|  |  | property: Key, value: ArgumentType<Options, T[Key]>, options?: Options): void; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Will attempt to invoke an object as if it were a function. If the return |
| Expand All | | @@ -366,17 +366,17 @@ declare module "isolated-vm" { |
|  |  | receiver?: ArgumentType<Options['arguments'], ApplyArgumentThis<T>>, |
|  |  | arguments?: ArgumentsTypeBidirectional<Options, ApplyArguments<T>>, |
|  |  | options?: Options |
|  |  | ): ResultTypeBidirectionalAsync<Options & ApplyAsReference, ApplyResult<T>>; |
|  |  | ): ResultTypeBidirectionalAsync<Options & FallbackReference, ApplyResult<T>>; |
|  |  | applyIgnored<Options extends ReferenceApplyOptions>( |
|  |  | receiver?: ArgumentType<Options['arguments'], ApplyArgumentThis<T>>, |
|  |  | arguments?: ArgumentsTypeBidirectional<Options & ApplyAsReference, ApplyArguments<T>>, |
|  |  | arguments?: ArgumentsTypeBidirectional<Options & FallbackReference, ApplyArguments<T>>, |
|  |  | options?: Options |
|  |  | ): void; |
|  |  | applySync<Options extends ReferenceApplyOptions>( |
|  |  | receiver?: ArgumentType<Options['arguments'], ApplyArgumentThis<T>>, |
|  |  | arguments?: ArgumentsTypeBidirectional<Options, ApplyArguments<T>>, |
|  |  | options?: Options |
|  |  | ): ResultTypeBidirectionalSync<Options & ApplyAsReference, ApplyResult<T>>; |
|  |  | ): ResultTypeBidirectionalSync<Options & FallbackReference, ApplyResult<T>>; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* `applySyncPromise` is a special version of `applySync` which may only be invoked on functions |
| Expand All | | @@ -392,7 +392,7 @@ declare module "isolated-vm" { |
|  |  | receiver?: ArgumentType<Options['arguments'], ApplyArgumentThis<T>>, |
|  |  | arguments?: ArgumentsTypeBidirectional<Options, ApplyArguments<T>>, |
|  |  | options?: Options |
|  |  | ): ResultTypeBidirectionalSync<Options & ApplyAsReference, ApplyResult<T>>; |
|  |  | ): ResultTypeBidirectionalSync<Options & FallbackReference, ApplyResult<T>>; |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
| Expand Down  Expand Up | | @@ -707,6 +707,7 @@ declare module "isolated-vm" { |
|  |  | type AsCopy = { copy: true }; |
|  |  | type AsExternal = { externalCopy: true }; |
|  |  | type AsReference = { reference: true }; |
|  |  | type FallbackReference = { \_reference: true }; |
|  |  | type ApplyAsReference = { result: AsReference }; |
|  |  | type WithTransfer = AsCopy | AsExternal | AsReference; |
|  |  |  |
| Expand All | | @@ -727,6 +728,7 @@ declare module "isolated-vm" { |
|  |  | Options extends AsReference ? Reference<Result> : |
|  |  | Result extends Transferable ? Result : |
|  |  | Result extends void ? void : |
|  |  | Options extends FallbackReference ? Reference<Result> : |
|  |  | Transferable; |
|  |  | type ResultTypeAsync<Options extends TransferOptions, Result = any> = Promise<ResultTypeBase<Options, Result>>; |
|  |  | type ResultTypeSync<Options extends TransferOptions, Result = any> = CheckPromise<Options, ResultTypeBase<Options, Result>>; |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[src/isolate/strings.h](#diff-094bae6562ea2af54e16c1314b820d5edc2c75933b3ee3e42847d7ab9c335e3a "src/isolate/strings.h")

Show comments

[View file](/laverdet/isolated-vm/blob/2646e6c1558bac66285daeab54c7d490ed332b15/src/isolate/strings.h)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -58,7 +58,6 @@ class StringTable { |
|  |  | String function{"function"}; |
|  |  | String global{"global"}; |
|  |  | String ignored{"ignored"}; |
|  |  | String inheritUnsafe{"inheritUnsafe"}; |
|  |  | String inspector{"inspector"}; |
|  |  | String isolateIsDisposed{"Isolate is disposed"}; |
|  |  | String isolatedVm{"isolated-vm"}; |
| Expand All | | @@ -82,6 +81,7 @@ class StringTable { |
|  |  | String transferList{"transferList"}; |
|  |  | String transferOut{"transferOut"}; |
|  |  | String undefined{"undefined"}; |
|  |  | String unsafeInherit{"unsafeInherit"}; |
|  |  |  |
|  |  | String does\_zap\_garbage{"does\_zap\_garbage"}; |
|  |  | String externally\_allocated\_size{"externally\_allocated\_size"}; |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `2646e6c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flaverdet%2Fisolated-vm%2Fcommit%2F2646e6c1558bac66285daeab54c7d490ed332b15) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_df252798_20250115_084744.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flaverdet%2Fisolated-vm%2Fsecurity%2Fadvisories%2FGHSA-mmhj-4w6j-76h7)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flaverdet%2Fisolated-vm%2Fsecurity%2Fadvisories%2FGHSA-mmhj-4w6j-76h7)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=laverdet%2Fisolated-vm)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[laverdet](/laverdet)
/
**[isolated-vm](/laverdet/isolated-vm)**
Public

* [Notifications](/login?return_to=%2Flaverdet%2Fisolated-vm) You must be signed in to change notification settings
* [Fork
  156](/login?return_to=%2Flaverdet%2Fisolated-vm)
* [Star
   2.3k](/login?return_to=%2Flaverdet%2Fisolated-vm)

* [Code](/laverdet/isolated-vm)
* [Issues
  73](/laverdet/isolated-vm/issues)
* [Pull requests
  1](/laverdet/isolated-vm/pulls)
* [Actions](/laverdet/isolated-vm/actions)
* [Projects
  0](/laverdet/isolated-vm/projects)
* [Security](/laverdet/isolated-vm/security)
* [Insights](/laverdet/isolated-vm/pulse)

Additional navigation options

* [Code](/laverdet/isolated-vm)
* [Issues](/laverdet/isolated-vm/issues)
* [Pull requests](/laverdet/isolated-vm/pulls)
* [Actions](/laverdet/isolated-vm/actions)
* [Projects](/laverdet/isolated-vm/projects)
* [Security](/laverdet/isolated-vm/security)
* [Insights](/laverdet/isolated-vm/pulse)

# Misuse of `Reference` and other transferable APIs may lead to access to nodejs isolate

High

[laverdet](/laverdet)
published
GHSA-mmhj-4w6j-76h7
Mar 30, 2021

## Package

npm

isolated-vm
([npm](/advisories?query=ecosystem%3Anpm))

## Affected versions

<4.0.0

## Patched versions

4.0.0

## Description

Versions of `isolated-vm` before v4.0.0, and especially before v3.0.0, have API pitfalls which may make it easy for implementers to expose supposed secure isolates to the permissions of the main nodejs isolate.

`Reference` objects allow access to the underlying reference's full prototype chain. In an environment where the implementer has exposed a `Reference` instance to an attacker they would be able to use it to acquire a `Reference` to the nodejs context's `Function` object.

Similar application-specific attacks could be possible by modifying the local prototype of other API objects.

Access to `NativeModule` objects could allow an attacker to load and run native code from anywhere on the filesystem. If combined with, for example, a file upload API this would allow for arbitrary code execution.

To address these issues the following changes were made in v4.0.0:

* Documentation was updated with more explicit guidelines on building secure applications.
* `Reference` instances will no longer follow prototype chains by default, nor will they invoke accessors or proxies.
* All `isolated-vm` API prototypes are now immutable.
* `NativeModule` constructor may only be invoked from a nodejs isolate.

### Severity

High

### CVE ID

CVE-2021-21413

### Weaknesses

No CWEs

### Credits

* [![@vdata1](https://avatars.githubusercontent.com/u/10380316?s=40&v=4)](/vdata1)
  [vdata1](/vdata1)
  Analyst
* [![@cristianstaicu](https://avatars.githubusercontent.com/u/1549455?s=40&v=4)](/cristianstaicu)
  [cristianstaicu](/cristianstaicu)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_b0a03f61_20250115_084739.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flaverdet%2Fisolated-vm%2Fblob%2Fmain%2FCHANGELOG.md)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flaverdet%2Fisolated-vm%2Fblob%2Fmain%2FCHANGELOG.md)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=laverdet%2Fisolated-vm)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[laverdet](/laverdet)
/
**[isolated-vm](/laverdet/isolated-vm)**
Public

* [Notifications](/login?return_to=%2Flaverdet%2Fisolated-vm) You must be signed in to change notification settings
* [Fork
  156](/login?return_to=%2Flaverdet%2Fisolated-vm)
* [Star
   2.3k](/login?return_to=%2Flaverdet%2Fisolated-vm)

* [Code](/laverdet/isolated-vm)
* [Issues
  73](/laverdet/isolated-vm/issues)
* [Pull requests
  1](/laverdet/isolated-vm/pulls)
* [Actions](/laverdet/isolated-vm/actions)
* [Projects
  0](/laverdet/isolated-vm/projects)
* [Security](/laverdet/isolated-vm/security)
* [Insights](/laverdet/isolated-vm/pulse)

Additional navigation options

* [Code](/laverdet/isolated-vm)
* [Issues](/laverdet/isolated-vm/issues)
* [Pull requests](/laverdet/isolated-vm/pulls)
* [Actions](/laverdet/isolated-vm/actions)
* [Projects](/laverdet/isolated-vm/projects)
* [Security](/laverdet/isolated-vm/security)
* [Insights](/laverdet/isolated-vm/pulse)

## Files

 main
## Breadcrumbs

1. [isolated-vm](/laverdet/isolated-vm/tree/main)
/
# CHANGELOG.md

Copy path Blame  Blame
## Latest commit

## History

[History](/laverdet/isolated-vm/commits/main/CHANGELOG.md)21 lines (18 loc) · 796 Bytes main
## Breadcrumbs

1. [isolated-vm](/laverdet/isolated-vm/tree/main)
/
# CHANGELOG.md

Top
## File metadata and controls

* Preview
* Code
* Blame

21 lines (18 loc) · 796 Bytes[Raw](https://github.com/laverdet/isolated-vm/raw/refs/heads/main/CHANGELOG.md)
## v4.3.0

* v8 inspector API fixed in nodejs v16.x
* `release` method added to `Module`

## v4.2.0

* `accessors` option added to `reference.get()`

## v4.1.0

* Support for nodejs v16.x
* `onCatastrophicError` added
* Fix for `null` error thrown from callback

## v4.0.0

* `Callback` class addeed.
* When possible, `reference.get()` will return a function delegate instead of a `Reference`.
* `reference.get()` will no longer return inherited properties by default.
* `result` property on `eval` and `evalClosure` has been removed. The result is now just the return
  value.
* All `isolated-vm` class prototypes, and most instances are frozen.
* `isolate.cpuTime` and `isolate.wallTime` now return bigints.
* Proxies and accessors are no longer tolerated via `reference.get`, and related functions.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


