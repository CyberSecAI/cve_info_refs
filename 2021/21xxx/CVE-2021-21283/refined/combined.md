=== Content from github.com_5d43b58e_20250115_080504.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fsticky%2Fsecurity%2Fadvisories%2FGHSA-h3gg-7wx2-cq3h)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fsticky%2Fsecurity%2Fadvisories%2FGHSA-h3gg-7wx2-cq3h)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=flarum%2Fsticky)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[flarum](/flarum)
/
**[sticky](/flarum/sticky)**
Public

* [Notifications](/login?return_to=%2Fflarum%2Fsticky) You must be signed in to change notification settings
* [Fork
  19](/login?return_to=%2Fflarum%2Fsticky)
* [Star
   9](/login?return_to=%2Fflarum%2Fsticky)

* [Code](/flarum/sticky)
* [Pull requests
  0](/flarum/sticky/pulls)
* [Actions](/flarum/sticky/actions)
* [Security](/flarum/sticky/security)
* [Insights](/flarum/sticky/pulse)

Additional navigation options

* [Code](/flarum/sticky)
* [Pull requests](/flarum/sticky/pulls)
* [Actions](/flarum/sticky/actions)
* [Security](/flarum/sticky/security)
* [Insights](/flarum/sticky/pulse)

# XSS in pinned discussion excerpt

Moderate

[clarkwinkelmann](/clarkwinkelmann)
published
GHSA-h3gg-7wx2-cq3h
Jan 26, 2021

## Package

composer

flarum/sticky
([Composer](/advisories?query=ecosystem%3Acomposer))

## Affected versions

>=v0.1.0-beta.14 <=v0.1.0-beta.15

## Patched versions

v0.1.0-beta.15.1

## Description

### Impact

A change in release beta 14 of the Sticky extension caused the plain text content of the first post of a pinned discussion to be injected as HTML on the discussion list. The issue was discovered following an internal audit.

Any HTML would be injected through Mithril's `m.trust()` helper. This resulted in an HTML injection where `<script>` tags would not be executed. However it was possible to run javascript from other HTML attributes, enabling a cross-site scripting (XSS) attack to be performed.

Since the exploit only happens with the first post of a pinned discussion, an attacker would need the ability to pin their own discussion, or be able to edit a discussion that was previously pinned.

On forums where all pinned posts are authored by your staff, you can be relatively certain the vulnerability has not been exploited.

Forums where some user-created discussions were pinned can look at the first post edit date to find whether the vulnerability might have been exploited. Because Flarum doesn't store the post content history, you cannot be certain if a malicious edit was reverted.

### Patches

The fix will be available in version v0.1.0-beta.16 with Flarum beta 16. The fix has already been back-ported to Flarum beta 15 as version v0.1.0-beta.15.1 of the Sticky extension.

### Workarounds

Forum administrators can disable the Sticky extension until they are able to apply the update. The vulnerability cannot be exploited while the extension is disabled.

### References

* [Release announcement](https://discuss.flarum.org/d/26042-security-update-to-flarum-sticky-010-beta151)
* [Pull Request](https://github.com/flarum/sticky/pull/24)

### For more information

If you have any questions or comments about this advisory, please start a new discussion on our [support forum](https://discuss.flarum.org/t/support).

If you discover a security vulnerability within Flarum, please send an e-mail to security@flarum.org. All security vulnerabilities will be promptly addressed. More details can be found in our [security policy](https://github.com/flarum/core/security/policy).

### Severity

Moderate

### CVE ID

CVE-2021-21283

### Weaknesses

No CWEs

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_70f5f79d_20250115_080503.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fsticky%2Fpull%2F24)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fsticky%2Fpull%2F24)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=flarum%2Fsticky)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[flarum](/flarum)
/
**[sticky](/flarum/sticky)**
Public

* [Notifications](/login?return_to=%2Fflarum%2Fsticky) You must be signed in to change notification settings
* [Fork
  19](/login?return_to=%2Fflarum%2Fsticky)
* [Star
   9](/login?return_to=%2Fflarum%2Fsticky)

* [Code](/flarum/sticky)
* [Pull requests
  0](/flarum/sticky/pulls)
* [Actions](/flarum/sticky/actions)
* [Security](/flarum/sticky/security)
* [Insights](/flarum/sticky/pulse)

Additional navigation options

* [Code](/flarum/sticky)
* [Pull requests](/flarum/sticky/pulls)
* [Actions](/flarum/sticky/actions)
* [Security](/flarum/sticky/security)
* [Insights](/flarum/sticky/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fflarum%2Fsticky%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fflarum%2Fsticky%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Fix evaluation of post content by m.trust() #24

 Merged

[askvortsov1](/askvortsov1)
merged 2 commits into
[master](/flarum/sticky/tree/master "flarum/sticky:master")
from
[sm/dont-use-mtrust](/flarum/sticky/tree/sm/dont-use-mtrust "flarum/sticky:sm/dont-use-mtrust")

Jan 22, 2021

 Merged

# [Fix evaluation of post content by m.trust()](#top) #24

[askvortsov1](/askvortsov1)
merged 2 commits into
[master](/flarum/sticky/tree/master "flarum/sticky:master")
from
[sm/dont-use-mtrust](/flarum/sticky/tree/sm/dont-use-mtrust "flarum/sticky:sm/dont-use-mtrust")

Jan 22, 2021

[Conversation
5](/flarum/sticky/pull/24)
[Commits
2](/flarum/sticky/pull/24/commits)
[Checks
0](/flarum/sticky/pull/24/checks)
[Files changed](/flarum/sticky/pull/24/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![SychO9](https://avatars.githubusercontent.com/u/20267363?s=60&v=4)](/SychO9)

Copy link

Member

### @SychO9 **[SychO9](/SychO9)** commented [Jan 13, 2021](#issue-785038558)

 *No description provided.*

Sorry, something went wrong.

All reactions

[![@SychO9](https://avatars.githubusercontent.com/u/20267363?s=40&v=4)](/SychO9)

`[Fix evaluation of post content by m.trust()](/flarum/sticky/pull/24/commits/f336a5c896047df4e17a02bab1a3f1083f0d686b "Fix evaluation of post content by m.trust()")`

`[f336a5c](/flarum/sticky/pull/24/commits/f336a5c896047df4e17a02bab1a3f1083f0d686b)`

 [![@SychO9](https://avatars.githubusercontent.com/u/20267363?s=40&u=691f588b58240090480cb27eed4a0622cb0b90e9&v=4)](/SychO9)
[SychO9](/SychO9)
requested a review
from [clarkwinkelmann](/clarkwinkelmann)
[January 13, 2021 11:50](#event-4200828968)

[![askvortsov1](https://avatars.githubusercontent.com/u/38059171?s=60&v=4)](/askvortsov1)

**[askvortsov1](/askvortsov1)**
approved these changes
[Jan 13, 2021](#pullrequestreview-567528096)

 [View reviewed changes](/flarum/sticky/pull/24/files/f336a5c896047df4e17a02bab1a3f1083f0d686b)

[![clarkwinkelmann](https://avatars.githubusercontent.com/u/5264300?s=60&v=4)](/clarkwinkelmann)

**[clarkwinkelmann](/clarkwinkelmann)**
reviewed
[Jan 15, 2021](#pullrequestreview-569329002)

 [View reviewed changes](/flarum/sticky/pull/24/files/f336a5c896047df4e17a02bab1a3f1083f0d686b)

Copy link

Member

### @clarkwinkelmann **[clarkwinkelmann](/clarkwinkelmann)** left a comment ‚Ä¢ edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Looking good and tested locally.

Should we add a comment maybe? Like

```
// Wrapping in <div> because ItemList entries need to be vnodes

```

Something else I thought of is that we can also use a text vnode. Unfortunately Mithril has no helper method to generate them, so that instantly makes the code less readable <https://mithril.js.org/vnodes.html#vnode-types>

This is how it would work if we wanted to use a text vnode. I tested it locally:

```
items.add('excerpt', {tag: "#", children: excerpt}, -100);

```

EDIT: also probably not an issue, but was this branched out of an older version? The fix from [55cc45c](https://github.com/flarum/sticky/commit/55cc45ccd36abf9078d0748fdfc4b2fbddb76cae) isn't present when I checkout this PR. Should fix itself by merging anyway.

Sorry, something went wrong.

All reactions

[![@SychO9](https://avatars.githubusercontent.com/u/20267363?s=40&v=4)](/SychO9)

`[Add explanatory comment](/flarum/sticky/pull/24/commits/1aaf4f9ed091cf06e1770942089973c8d06cfdb2 "Add explanatory comment")`

`[1aaf4f9](/flarum/sticky/pull/24/commits/1aaf4f9ed091cf06e1770942089973c8d06cfdb2)`

[![@SychO9](https://avatars.githubusercontent.com/u/20267363?s=80&u=691f588b58240090480cb27eed4a0622cb0b90e9&v=4)](/SychO9)

Copy link

Member

Author

### **[SychO9](/SychO9)** commented [Jan 15, 2021](#issuecomment-761006480) ‚Ä¢ edited Loading

| I don't have a strong opinion on using a text vnode or wrapping in `div` ü§∑üèº‚Äç‚ôÇÔ∏è as long as it works. I haven't made that change but we can do it if anyone wants to ofc.  EDIT: also probably not an issue, but was this branched out of an older version? The fix from [55cc45c](https://github.com/flarum/sticky/commit/55cc45ccd36abf9078d0748fdfc4b2fbddb76cae) isn't present when I checkout this PR. Should fix itself by merging anyway.  Ah yes, I seem to have forgotten to update my local master branch. Won't be a problem for git though. |
| --- |

All reactions

Sorry, something went wrong.

 [![@SychO9](https://avatars.githubusercontent.com/u/20267363?s=40&u=691f588b58240090480cb27eed4a0622cb0b90e9&v=4)](/SychO9)
[SychO9](/SychO9)
requested a review
from [clarkwinkelmann](/clarkwinkelmann)
[January 15, 2021 15:27](#event-4211679961)

[![clarkwinkelmann](https://avatars.githubusercontent.com/u/5264300?s=60&v=4)](/clarkwinkelmann)

**[clarkwinkelmann](/clarkwinkelmann)**
approved these changes
[Jan 15, 2021](#pullrequestreview-569369243)

 [View reviewed changes](/flarum/sticky/pull/24/files/1aaf4f9ed091cf06e1770942089973c8d06cfdb2)

Copy link

Member

### @clarkwinkelmann **[clarkwinkelmann](/clarkwinkelmann)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Tested locally again, all good for me üëç

Sorry, something went wrong.

All reactions

[![imorland](https://avatars.githubusercontent.com/u/16573496?s=60&v=4)](/imorland)

**[imorland](/imorland)**
approved these changes
[Jan 15, 2021](#pullrequestreview-569461937)

 [View reviewed changes](/flarum/sticky/pull/24/files/1aaf4f9ed091cf06e1770942089973c8d06cfdb2)

Copy link

Member

### @imorland **[imorland](/imorland)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

tested locally. confirmed to resolve the issue

Sorry, something went wrong.

All reactions

[![@askvortsov1](https://avatars.githubusercontent.com/u/38059171?s=40&u=3c2b4b6fd44eddf6340daadf2b56018c66c85d78&v=4)](/askvortsov1)
[askvortsov1](/askvortsov1)
merged commit [`7ebd304`](/flarum/sticky/commit/7ebd30462bd405c4c0570b93a6d48710e6c3db19)
into
master

[Jan 22, 2021](https://github.com/flarum/sticky/pull/24#event-4239950137)

[askvortsov1](/askvortsov1)
pushed a commit
that referenced
this pull request
[Jan 22, 2021](#ref-commit-fc995b8)
[![@SychO9](https://avatars.githubusercontent.com/u/20267363?s=40&u=691f588b58240090480cb27eed4a0622cb0b90e9&v=4)](/SychO9) [![@askvortsov1](https://avatars.githubusercontent.com/u/38059171?s=40&v=4)](/askvortsov1)

`[Fix evaluation of post content by m.trust() (](/flarum/sticky/commit/fc995b88aecb6095f77cf01a899a9cfe23145a30 "Fix evaluation of post content by m.trust() (#24)")[#24](https://github.com/flarum/sticky/pull/24)[)](/flarum/sticky/commit/fc995b88aecb6095f77cf01a899a9cfe23145a30 "Fix evaluation of post content by m.trust() (#24)")`

`[fc995b8](/flarum/sticky/commit/fc995b88aecb6095f77cf01a899a9cfe23145a30)`

[![@luceos](https://avatars.githubusercontent.com/u/504687?s=80&u=4811ef0257e5c9868b53899c78cef55e1547d083&v=4)](/luceos)

Copy link

Member

### **[luceos](/luceos)** commented [Mar 15, 2021](#issuecomment-799342587)

| [@SychO9](https://github.com/SychO9) please provide a reason for a PR when creating one, that makes writing changelogs a ton easier ;) |
| --- |

 üëç
1
 SychO9 reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

 [![@luceos](https://avatars.githubusercontent.com/u/504687?s=40&u=4811ef0257e5c9868b53899c78cef55e1547d083&v=4)](/luceos)
[luceos](/luceos)
deleted the
sm/dont-use-mtrust

branch
[March 15, 2021 11:25](#event-4458110709)

[askvortsov1](/askvortsov1)
pushed a commit
that referenced
this pull request
[Mar 11, 2022](#ref-commit-e26f04a)
[![@SychO9](https://avatars.githubusercontent.com/u/20267363?s=40&u=691f588b58240090480cb27eed4a0622cb0b90e9&v=4)](/SychO9)

`[Fix evaluation of post content by m.trust() (](/flarum/sticky/commit/e26f04a4e51979c85087b228118005925cda1c98 "Fix evaluation of post content by m.trust() (#24)")[#24](https://github.com/flarum/sticky/pull/24)[)](/flarum/sticky/commit/e26f04a4e51979c85087b228118005925cda1c98 "Fix evaluation of post content by m.trust() (#24)")`

`[e26f04a](/flarum/sticky/commit/e26f04a4e51979c85087b228118005925cda1c98)`

[askvortsov1](/askvortsov1)
pushed a commit
that referenced
this pull request
[May 10, 2022](#ref-commit-4f36f36)
[![@SychO9](https://avatars.githubusercontent.com/u/20267363?s=40&u=691f588b58240090480cb27eed4a0622cb0b90e9&v=4)](/SychO9)

`[Fix evaluation of post content by m.trust() (](/flarum/sticky/commit/4f36f3676d13b10d645aedf2658491b00423fd18 "Fix evaluation of post content by m.trust() (#24)")[#24](https://github.com/flarum/sticky/pull/24)[)](/flarum/sticky/commit/4f36f3676d13b10d645aedf2658491b00423fd18 "Fix evaluation of post content by m.trust() (#24)")`

`[4f36f36](/flarum/sticky/commit/4f36f3676d13b10d645aedf2658491b00423fd18)`

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fsticky%2Fpull%2F24)

Reviewers

[![@askvortsov1](https://avatars.githubusercontent.com/u/38059171?s=40&v=4)](/askvortsov1) [askvortsov1](/askvortsov1)

askvortsov1 approved these changes

[![@imorland](https://avatars.githubusercontent.com/u/16573496?s=40&v=4)](/imorland) [imorland](/imorland)

imorland approved these changes

[![@clarkwinkelmann](https://avatars.githubusercontent.com/u/5264300?s=40&v=4)](/clarkwinkelmann) [clarkwinkelmann](/clarkwinkelmann)

clarkwinkelmann approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

5 participants

[![@SychO9](https://avatars.githubusercontent.com/u/20267363?s=52&v=4)](/SychO9) [![@luceos](https://avatars.githubusercontent.com/u/504687?s=52&v=4)](/luceos) [![@clarkwinkelmann](https://avatars.githubusercontent.com/u/5264300?s=52&v=4)](/clarkwinkelmann) [![@imorland](https://avatars.githubusercontent.com/u/16573496?s=52&v=4)](/imorland) [![@askvortsov1](https://avatars.githubusercontent.com/u/38059171?s=52&v=4)](/askvortsov1)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_4718150a_20250115_080500.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fsticky%2Fcommit%2F7ebd30462bd405c4c0570b93a6d48710e6c3db19)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fsticky%2Fcommit%2F7ebd30462bd405c4c0570b93a6d48710e6c3db19)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=flarum%2Fsticky)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[flarum](/flarum)
/
**[sticky](/flarum/sticky)**
Public

* [Notifications](/login?return_to=%2Fflarum%2Fsticky) You must be signed in to change notification settings
* [Fork
  19](/login?return_to=%2Fflarum%2Fsticky)
* [Star
   9](/login?return_to=%2Fflarum%2Fsticky)

* [Code](/flarum/sticky)
* [Pull requests
  0](/flarum/sticky/pulls)
* [Actions](/flarum/sticky/actions)
* [Security](/flarum/sticky/security)
* [Insights](/flarum/sticky/pulse)

Additional navigation options

* [Code](/flarum/sticky)
* [Pull requests](/flarum/sticky/pulls)
* [Actions](/flarum/sticky/actions)
* [Security](/flarum/sticky/security)
* [Insights](/flarum/sticky/pulse)

## Commit

[Permalink](/flarum/sticky/commit/7ebd30462bd405c4c0570b93a6d48710e6c3db19)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Fix evaluation of post content by m.trust() ([#24](https://github.com/flarum/sticky/pull/24))

[Browse files](/flarum/sticky/tree/7ebd30462bd405c4c0570b93a6d48710e6c3db19)
Browse the repository at this point in the history

* Loading branch information

[![@SychO9](https://avatars.githubusercontent.com/u/20267363?s=40&v=4)](/SychO9)

[SychO9](/flarum/sticky/commits?author=SychO9 "View all commits by SychO9")
authored
Jan 22, 2021

1 parent
[62a74d2](/flarum/sticky/commit/62a74d25ab3f84f69d1c4b5920080963788a8360)

commit 7ebd304

Showing
**1 changed file**
with
**2 additions**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

3 changes: 2 additions & 1 deletion

3
[js/src/forum/addStickyExcerpt.js](#diff-91f52ac6e833353c28b12593628d87ec43d0337e782c11aacac515e26dfe153c "js/src/forum/addStickyExcerpt.js")

Show comments

[View file](/flarum/sticky/blob/7ebd30462bd405c4c0570b93a6d48710e6c3db19/js/src/forum/addStickyExcerpt.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -21,7 +21,8 @@ export default function addStickyControl() { |
|  |  | if (firstPost) { |
|  |  | const excerpt = truncate(firstPost.contentPlain(), 175); |
|  |  |  |
|  |  | items.add('excerpt', m.trust(excerpt), -100); |
|  |  | // Wrapping in <div> because ItemList entries need to be vnodes |
|  |  | items.add('excerpt', <div>{excerpt}</div>, -100); |
|  |  | } |
|  |  | } |
|  |  | }); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `7ebd304`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fflarum%2Fsticky%2Fcommit%2F7ebd30462bd405c4c0570b93a6d48710e6c3db19) to comment.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from discuss.flarum.org_610d7446_20250115_080500.html ===


[![Flarum Community](https://discuss.flarum.org/assets/logo-2q2rcevl.png)](https://discuss.flarum.org)

Loading...

This site is best viewed in a modern browser with JavaScript enabled.

Something went wrong while trying to load the full version of this site. Try hard-refreshing this page to fix the error.

# Security update to Flarum Sticky 0.1.0-beta.15.1

### clarkwinkelmann

Today we are releasing a security update for the bundled Flarum Sticky extension. It addresses a cross-site scripting (XSS) vulnerability present in versions beta 14 and beta 15 of the extension.

### How to update

If you are using Flarum beta 15:

In your Flarum folder (containing `composer.json` and `config.php`), run:

```
composer update flarum/sticky --prefer-dist --no-dev -a
```

You can then confirm the update worked by checking Composer output (should say "updating to v0.1.0-beta.15.1"), or by checking the version number in the admin panel on the extension page.

If you are using Flarum beta 14, disable the Sticky extension until you can update to Flarum beta 15.

If you are using Flarum beta 13, you are not impacted by this particular issue. You should still update to Flarum beta 15 as soon as possible because the version is no longer under support and will not receive any security fix.

### Impact

A change in release beta 14 of the Sticky extension caused the plain text content of the first post of a pinned discussion to be injected as HTML on the discussion list. The issue was discovered following an internal audit.

Any HTML would be injected through Mithril's `m.trust()` helper. This resulted in an HTML injection where `<script>` tags would not be executed. However it was possible to run javascript from other HTML attributes, enabling a cross-site scripting (XSS) attack to be performed.

Since the exploit only happens with the first post of a pinned discussion, an attacker would need the ability to pin their own discussion, or be able to edit a discussion that was previously pinned.

On forums where all pinned posts are authored by your staff, you can be relatively certain the vulnerability has not been exploited.

Forums where some user-created discussions were pinned can look at the first post edit date to find whether the vulnerability might have been exploited. Because Flarum doesn't store the post content history, you cannot be certain if a malicious edit was reverted.

### Patches

The fix will be available in version v0.1.0-beta.16 with Flarum beta 16. The fix has already been back-ported to Flarum beta 15 as version v0.1.0-beta.15.1 of the Sticky extension.

### Workarounds

Forum administrators can disable the Sticky extension until they are able to apply the update. The vulnerability cannot be exploited while the extension is disabled.

### Links

* [Advisory on GitHub](https://github.com/flarum/sticky/security/advisories/GHSA-h3gg-7wx2-cq3h)

---

### peopleinside

[clarkwinkelmann](https://discuss.flarum.org/d/26042-security-update-to-flarum-sticky-010-beta151/1) Hi, thank you for this update!

All done successfully.

In future I hope something will alert directly on Flarum user installation admin side about security updates.

Thank you!

---

### MikeJones

Just updated smoothly, thanks!

---

### Littlegolden

[peopleinside](https://discuss.flarum.org/d/26042-security-update-to-flarum-sticky-010-beta151/4) Yeah, system notification is definitely needed.

---

### clarkwinkelmann

[peopleinside](https://discuss.flarum.org/d/26042-security-update-to-flarum-sticky-010-beta151/4) thanks for the comments!

We are researching the best options. Currently we have no way of "pushing" updates or notifications to a forum so that's not a viable option, but this will definitely come in the future once we work on the marketplace.

Right now the following options are available to follow updates:

* Subscribe to the blog tag here on Discuss by visiting <https://discuss.flarum.org/t/blog> and enable the email notification for tag following (should be on by default)
* Join the Discord server and follow `#announcements`, you can even have it publish the updates on one of your own Discord servers
* Subscribe to the release notifications on GitHub. Unfortunately you will need to follow core and every core extension to be notified of their security updates

We will probably set up some kind of newsletter in the future.

Another useful feature is that if you manage your forum as a GitHub repository, GitHub will notify you when one of your packages has a security update, including Flarum and its extensions.

---

### MikeJones

[clarkwinkelmann](https://discuss.flarum.org/d/26042-security-update-to-flarum-sticky-010-beta151/6) not to get to off topic but I would be good with a twitter account and I can subscribe to be instantly pinged when your twitter posts. Maybe create an account for updates.

---

### peopleinside

[MikeJones](https://discuss.flarum.org/d/26042-security-update-to-flarum-sticky-010-beta151/7) I think the first one option is good for all members that are also active here.

I was not subscrived to the blog but now I'm active if this will not generate too much emails üòÉ Will try.

---

### LuckUnstoppable7

I have updated - thanks for the heads up!

Just wondering if this warning message I got means anything vital?

![](https://i.luckvintage.net/beta/WAsE2/qEyAbuxO60.png/raw)

Thank you!

---

### luceos

[LuckUnstoppable7](https://discuss.flarum.org/d/26042-security-update-to-flarum-sticky-010-beta151/9) looks like a capitalisation mistake by the developer. Will look at that, thanks for reporting!

---


