=== Content from github.com_1b2530f8_20250114_202923.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmatrix-org%2Fmatrix-react-sdk%2Fsecurity%2Fadvisories%2FGHSA-52mq-6jcv-j79x)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmatrix-org%2Fmatrix-react-sdk%2Fsecurity%2Fadvisories%2FGHSA-52mq-6jcv-j79x)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=matrix-org%2Fmatrix-react-sdk)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

This repository has been archived by the owner on Sep 11, 2024. It is now read-only.

[matrix-org](/matrix-org)
/
**[matrix-react-sdk](/matrix-org/matrix-react-sdk)**
Public archive

* [Notifications](/login?return_to=%2Fmatrix-org%2Fmatrix-react-sdk) You must be signed in to change notification settings
* [Fork
  827](/login?return_to=%2Fmatrix-org%2Fmatrix-react-sdk)
* [Star
   1.1k](/login?return_to=%2Fmatrix-org%2Fmatrix-react-sdk)

* [Code](/matrix-org/matrix-react-sdk)
* [Issues
  2](/matrix-org/matrix-react-sdk/issues)
* [Pull requests
  2](/matrix-org/matrix-react-sdk/pulls)
* [Actions](/matrix-org/matrix-react-sdk/actions)
* [Projects
  0](/matrix-org/matrix-react-sdk/projects)
* [Security](/matrix-org/matrix-react-sdk/security)
* [Insights](/matrix-org/matrix-react-sdk/pulse)

Additional navigation options

* [Code](/matrix-org/matrix-react-sdk)
* [Issues](/matrix-org/matrix-react-sdk/issues)
* [Pull requests](/matrix-org/matrix-react-sdk/pulls)
* [Actions](/matrix-org/matrix-react-sdk/actions)
* [Projects](/matrix-org/matrix-react-sdk/projects)
* [Security](/matrix-org/matrix-react-sdk/security)
* [Insights](/matrix-org/matrix-react-sdk/pulse)

# User content sandbox can be confused into opening arbitrary documents and exposing user data

Moderate

[jryans](/jryans)
published
GHSA-52mq-6jcv-j79x
Mar 1, 2021

## Package

npm

matrix-react-sdk
([npm](/advisories?query=ecosystem%3Anpm))

## Affected versions

< 3.15.0

## Patched versions

>= 3.15.0

## Description

### Impact

The user content sandbox can be abused to trick users into opening unexpected documents after several user interactions. The content can be opened with a `blob` origin from the Matrix client, so it is possible for a malicious document to access user messages and secrets.

### Patches

This has been fixed by [#5657](https://github.com/matrix-org/matrix-react-sdk/pull/5657), which is included in 3.15.0.

### Workarounds

There are no known workarounds.

### Severity

Moderate

### CVE ID

CVE-2021-21320

### Weaknesses

No CWEs

### Credits

* [![@keerok](https://avatars.githubusercontent.com/u/30030048?s=40&v=4)](/keerok)
  [keerok](/keerok)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.npmjs.com_6d71cd17_20250114_202926.html ===

skip to:[content](#main)[package search](#search)[sign in](#signin)â¤

* [Pro](/products/pro)
* [Teams](/products/teams)
* [Pricing](/products)
* [Documentation](https://docs.npmjs.com)
npmSearch[Sign Up](/signup)[Sign In](/login)
## matrix-react-sdkTypeScript icon, indicating that this package has built-in type declarations

3.114.0Â â¢Â PublicÂ â¢Â Published 3 months ago

* [Readme](?activeTab=readme)
* [Code Beta](?activeTab=code)
* [68 Dependencies](?activeTab=dependencies)
* [3 Dependents](?activeTab=dependents)
* [543 Versions](?activeTab=versions)

[![npm](https://camo.githubusercontent.com/1d4e2f0c2a9cec0c2eff8f4e406380513f647819e16e165141717103b7d61825/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f6d61747269782d72656163742d73646b)](https://www.npmjs.com/package/matrix-react-sdk)
[![Tests](https://github.com/matrix-org/matrix-react-sdk/actions/workflows/tests.yml/badge.svg)](https://github.com/matrix-org/matrix-react-sdk/actions/workflows/tests.yml/badge.svg)
[![Playwright](https://camo.githubusercontent.com/6801c46d55f267ff29512988fe0d16f4ebd9d0e4270fe81368c87b3b95d147fc/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f506c61797772696768742d656e645f746f5f656e645f74657374732d626c7565)](https://e2e-develop--matrix-react-sdk.netlify.app/)
[![Static Analysis](https://github.com/matrix-org/matrix-react-sdk/actions/workflows/static_analysis.yaml/badge.svg)](https://github.com/matrix-org/matrix-react-sdk/actions/workflows/static_analysis.yaml/badge.svg)
[![Localazy](https://camo.githubusercontent.com/4f6ecb85e6effb20a8e1e705ef8eb8624ba6c8759a7a90b12ad6e9f46d5957dc/68747470733a2f2f696d672e736869656c64732e696f2f656e64706f696e743f75726c3d6874747073253341253246253246636f6e6e6563742e6c6f63616c617a792e636f6d253246737461747573253246656c656d656e742d77656225324664617461253346636f6e74656e74253344616c6c2532367469746c652533446c6f63616c617a792532366c6f676f25334474727565)](https://localazy.com/p/element-web)
[![Quality Gate Status](https://camo.githubusercontent.com/efaa942a24e1b21aa9f372c7e0e27cbf4670e561a32c727646dee9c713a5ffbe/68747470733a2f2f736f6e6172636c6f75642e696f2f6170692f70726f6a6563745f6261646765732f6d6561737572653f70726f6a6563743d6d61747269782d72656163742d73646b266d65747269633d616c6572745f737461747573)](https://sonarcloud.io/summary/new_code?id=matrix-react-sdk)
[![Coverage](https://camo.githubusercontent.com/ec68f4db12ba7d85ba803f29dda979f27a921a565113ed724d809bf2d4ba2500/68747470733a2f2f736f6e6172636c6f75642e696f2f6170692f70726f6a6563745f6261646765732f6d6561737572653f70726f6a6563743d6d61747269782d72656163742d73646b266d65747269633d636f766572616765)](https://sonarcloud.io/summary/new_code?id=matrix-react-sdk)
[![Vulnerabilities](https://camo.githubusercontent.com/02f1b4f01852b926e8f701c4bd76aad76e78c129ad1b6f18b38a4d848c3483a8/68747470733a2f2f736f6e6172636c6f75642e696f2f6170692f70726f6a6563745f6261646765732f6d6561737572653f70726f6a6563743d6d61747269782d72656163742d73646b266d65747269633d76756c6e65726162696c6974696573)](https://sonarcloud.io/summary/new_code?id=matrix-react-sdk)
[![Bugs](https://camo.githubusercontent.com/6062a1568603be80e487f906405f0d058bdf1f3dfc266a701ed7f5ad8edca87a/68747470733a2f2f736f6e6172636c6f75642e696f2f6170692f70726f6a6563745f6261646765732f6d6561737572653f70726f6a6563743d6d61747269782d72656163742d73646b266d65747269633d62756773)](https://sonarcloud.io/summary/new_code?id=matrix-react-sdk)

# matrix-react-sdk

This is a react-based SDK for inserting a Matrix chat/voip client into a web page.

This package provides the React components needed to build a Matrix web client
using React. It is not useable in isolation, and instead must be used from
a 'skin'. A skin provides:

* Customised implementations of presentation components.
* Custom CSS
* The containing application
* Zero or more 'modules' containing non-UI functionality

As of Aug 2018, the only skin that exists is
[`vector-im/element-web`](https://github.com/vector-im/element-web/); it and
`matrix-org/matrix-react-sdk` should effectively
be considered as a single project (for instance, matrix-react-sdk bugs
are currently filed against vector-im/element-web rather than this project).

## Developer Guide

Platform Targets:

* Chrome, Firefox and Safari.
* WebRTC features (VoIP and Video calling) are only available in Chrome & Firefox.
* Mobile Web is not currently a target platform - instead please use the native
  iOS (<https://github.com/matrix-org/matrix-ios-kit>) and Android
  (<https://github.com/matrix-org/matrix-android-sdk2>) SDKs.

All code lands on the `develop` branch - `master` is only used for stable releases.
**Please file PRs against `develop`!!**

We use the same contribution guide as Element. Check it out here:
<https://github.com/vector-im/element-web/blob/develop/CONTRIBUTING.md>

Our code style is also the same as Element's:
<https://github.com/vector-im/element-web/blob/develop/code_style.md>

Code should be committed as follows:

* All new components:
  <https://github.com/matrix-org/matrix-react-sdk/tree/master/src/components>
* Element-specific components:
  <https://github.com/vector-im/element-web/tree/master/src/components>
  + In practice, `matrix-react-sdk` is still evolving so fast that the
    maintenance burden of customising and overriding these components for
    Element can seriously impede development. So right now, there should be
    very few (if any) customisations for Element.
* CSS: <https://github.com/matrix-org/matrix-react-sdk/tree/master/res/css>
* Theme specific CSS & resources:
  <https://github.com/matrix-org/matrix-react-sdk/tree/master/res/themes>

React components in matrix-react-sdk come in two different flavours:
'structures' and 'views'. Structures are stateful components which handle the
more complicated business logic of the app, delegating their actual presentation
rendering to stateless 'view' components. For instance, the RoomView component
that orchestrates the act of visualising the contents of a given Matrix chat
room tracks lots of state for its child components which it passes into them for
visual rendering via props.

Good separation between the components is maintained by adopting various best
practices that anyone working with the SDK needs to be aware of and uphold:

* Components are named with upper camel case (e.g. views/rooms/EventTile.js)
* They are organised in a typically two-level hierarchy - first whether the
  component is a view or a structure, and then a broad functional grouping
  (e.g. 'rooms' here)
* The view's CSS file MUST have the same name (e.g. view/rooms/MessageTile.css).
  CSS for matrix-react-sdk currently resides in
  <https://github.com/matrix-org/matrix-react-sdk/tree/master/res/css>.
* Per-view CSS is optional - it could choose to inherit all its styling from
  the context of the rest of the app, although this is unusual for any but
* Theme specific CSS & resources:
  <https://github.com/matrix-org/matrix-react-sdk/tree/master/res/themes>
  structural components (lacking presentation logic) and the simplest view
  components.
* The view MUST *only* refer to the CSS rules defined in its own CSS file.
  'Stealing' styling information from other components (including parents)
  is not cool, as it breaks the independence of the components.
* CSS classes are named with an app-specific name-spacing prefix to try to
  avoid CSS collisions. The base skin shipped by Matrix.org with the
  matrix-react-sdk uses the naming prefix "mx\*". A company called Yoyodyne
  Inc might use a prefix like "yy\*" for its app-specific classes.
* CSS classes use upper camel case when they describe React components - e.g.
  .mx\_MessageTile is the selector for the CSS applied to a MessageTile view.
* CSS classes for DOM elements within a view which aren't components are named
  by appending a lower camel case identifier to the view's class name - e.g.
  .mx\_MessageTile\_randomDiv is how you'd name the class of an arbitrary div
  within the MessageTile view.
* We deliberately use vanilla CSS 3.0 to avoid adding any more magic
  dependencies into the mix than we already have. App developers are welcome
  to use whatever floats their boat however. In future we'll start using
  css-next to pull in features like CSS variable support.
* The CSS for a component can override the rules for child components.
  For instance, .mx*RoomList .mx\_RoomTile {} would be the selector to override
  styles of RoomTiles when viewed in the context of a RoomList view.
  Overrides \_must* be scoped to the View's CSS class - i.e. don't just define
  .mx\_RoomTile {} in RoomList.css - only RoomTile.css is allowed to define its
  own CSS. Instead, say .mx\_RoomList .mx\_RoomTile {} to scope the override
  only to the context of RoomList views. N.B. overrides should be relatively
  rare as in general CSS inheritance should be enough.
* Components should render only within the bounding box of their outermost DOM
  element. Page-absolute positioning and negative CSS margins and similar are
  generally not cool and stop the component from being reused easily in
  different places.

Originally `matrix-react-sdk` followed the Atomic design pattern as per
<http://patternlab.io> to try to encourage a modular architecture. However, we
found that the grouping of components into atoms/molecules/organisms
made them harder to find relative to a functional split, and didn't emphasise
the distinction between 'structural' and 'view' components, so we backed away
from it.

## Github Issues

All issues should be filed under <https://github.com/vector-im/element-web/issues>
for now.

## Development

Ensure you have the latest LTS version of Node.js installed.

Using `yarn` instead of `npm` is recommended. Please see the Yarn 1 [install
guide](https://classic.yarnpkg.com/docs/install) if you do not have it
already. This project has not yet been migrated to Yarn 2, so please ensure
`yarn --version` shows a version from the 1.x series.

`matrix-react-sdk` depends on
[`matrix-js-sdk`](https://github.com/matrix-org/matrix-js-sdk). To make use of
changes in the latter and to ensure tests run against the develop branch of
`matrix-js-sdk`, you should set up `matrix-js-sdk`:

```
git clone https://github.com/matrix-org/matrix-js-sdk
cd matrix-js-sdk
git checkout develop
yarn link
yarn install
```

Then check out `matrix-react-sdk` and pull in dependencies:

```
git clone https://github.com/matrix-org/matrix-react-sdk
cd matrix-react-sdk
git checkout develop
yarn link matrix-js-sdk
yarn install
```

See the [help for `yarn link`](https://classic.yarnpkg.com/docs/cli/link) for
more details about this.

### Running tests

Ensure you've followed the above development instructions and then:

```
yarn test
```

### Running lint

To check your code complies with the project style, ensure you've followed the
above development instructions and then:

```
yarn lint
```

### Dependency problems

If you see errors (particularly "Cannot find module") running the lint or test
commands, and `yarn install` doesn't fix them, it may be because
yarn is not fetching git dependencies eagerly enough.

Try running this:

```
yarn cache clean && yarn install --force
```

Now the yarn commands should work as normal.

### End-to-End tests

We use Playwright and Element Web for end-to-end tests. See
[`docs/playwright.md`](https://github.com/element-hq/matrix-react-sdk/blob/HEAD/docs/playwright.md) for more information.

## Readme

### Keywords

none
## Package Sidebar

### Install

`npm i matrix-react-sdk`

### Repository

[Gitgithub.com/element-hq/matrix-react-sdk](https://github.com/element-hq/matrix-react-sdk)

### Homepage

[github.com/element-hq/matrix-react-sdk#readme](https://github.com/element-hq/matrix-react-sdk#readme)

### DownloadsWeekly Downloads

1,569

### Version

3.114.0

### License

AGPL-3.0-only OR GPL-3.0-only

### Unpacked Size

57.3 MB

### Total Files

5283

### Last publish

3 months ago

### Collaborators

* [![matrixdotorg](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9jNjNmN2Q3ZjJlMWM3NTk0MGZlM2Q0ODg2ZDQ3ZjdmOD9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.93eOCBvxpSMvqpD3Ovmz0UO9UMi2clpYccdi7oBCF70 "matrixdotorg")](/~matrixdotorg)
* [![vector-im](/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci80MGI3ZWNjMTFkYzAzZjUxZmViNmFhYTVhZDRiZjljZj9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.tUtrfRYypiQ6Vk6wg6NTzd7sN2vf443-zKYhBwHCoWM "vector-im")](/~vector-im)
[**Try** on RunKit](https://runkit.com/npm/matrix-react-sdk)[**Report** malware](/support?inquire=security&security-inquire=malware&package=matrix-react-sdk&version=3.114.0)
## Footer

### Support

* [Help](https://docs.npmjs.com)
* [Advisories](https://github.com/advisories)
* [Status](http://status.npmjs.org/)
* [Contact npm](/support)
### Company

* [About](/about)
* [Blog](https://github.blog/tag/npm/)
* [Press](/press)
### Terms & Policies

* [Policies](/policies/)
* [Terms of Use](/policies/terms)
* [Code of Conduct](/policies/conduct)
* [Privacy](/policies/privacy)



=== Content from github.com_80accf92_20250114_202921.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmatrix-org%2Fmatrix-react-sdk%2Fcommit%2Fb386f0c73b95ecbb6ea7f8f79c6ff5171a8dedd1)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmatrix-org%2Fmatrix-react-sdk%2Fcommit%2Fb386f0c73b95ecbb6ea7f8f79c6ff5171a8dedd1)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=matrix-org%2Fmatrix-react-sdk)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

This repository has been archived by the owner on Sep 11, 2024. It is now read-only.

[matrix-org](/matrix-org)
/
**[matrix-react-sdk](/matrix-org/matrix-react-sdk)**
Public archive

* [Notifications](/login?return_to=%2Fmatrix-org%2Fmatrix-react-sdk) You must be signed in to change notification settings
* [Fork
  827](/login?return_to=%2Fmatrix-org%2Fmatrix-react-sdk)
* [Star
   1.1k](/login?return_to=%2Fmatrix-org%2Fmatrix-react-sdk)

* [Code](/matrix-org/matrix-react-sdk)
* [Issues
  2](/matrix-org/matrix-react-sdk/issues)
* [Pull requests
  2](/matrix-org/matrix-react-sdk/pulls)
* [Actions](/matrix-org/matrix-react-sdk/actions)
* [Projects
  0](/matrix-org/matrix-react-sdk/projects)
* [Security](/matrix-org/matrix-react-sdk/security)
* [Insights](/matrix-org/matrix-react-sdk/pulse)

Additional navigation options

* [Code](/matrix-org/matrix-react-sdk)
* [Issues](/matrix-org/matrix-react-sdk/issues)
* [Pull requests](/matrix-org/matrix-react-sdk/pulls)
* [Actions](/matrix-org/matrix-react-sdk/actions)
* [Projects](/matrix-org/matrix-react-sdk/projects)
* [Security](/matrix-org/matrix-react-sdk/security)
* [Insights](/matrix-org/matrix-react-sdk/pulse)

## Commit

[Permalink](/matrix-org/matrix-react-sdk/commit/b386f0c73b95ecbb6ea7f8f79c6ff5171a8dedd1)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#5657](https://github.com/matrix-org/matrix-react-sdk/pull/5657) from matrix-org/t3chguy/usercontent

[Browse files](/matrix-org/matrix-react-sdk/tree/b386f0c73b95ecbb6ea7f8f79c6ff5171a8dedd1)
Browse the repository at this point in the history

```
Remove redundant lockOrigin parameter from usercontent
```

* Loading branch information

[![@t3chguy](https://avatars.githubusercontent.com/u/2403652?s=40&v=4)](/t3chguy)

[t3chguy](/matrix-org/matrix-react-sdk/commits?author=t3chguy "View all commits by t3chguy")
authored
Feb 16, 2021

2 parents
[fbf0a73](/matrix-org/matrix-react-sdk/commit/fbf0a737a3e3d44ffa107c18de64a82c4c4e21f2)
+
[6cb3381](/matrix-org/matrix-react-sdk/commit/6cb3381df59d576389ac69f1e4b01c99515fb0e6)

commit b386f0c

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**2 additions**
and
**9 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* src

  + components/views/messages

    - src/components/views/messages/MFileBody.js
      [MFileBody.js](#diff-15e77fa5a9955f111e58faf80b8d44ab81b4dab5e6f9f8273fc4e6eeb06793d6)
  + usercontent

    - src/usercontent/index.js
      [index.js](#diff-1025aecd11f2fca31404f7d7db61decf3c2d5e7c519f82ca608846d0fe8b4fe7)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[src/components/views/messages/MFileBody.js](#diff-15e77fa5a9955f111e58faf80b8d44ab81b4dab5e6f9f8273fc4e6eeb06793d6 "src/components/views/messages/MFileBody.js")

Show comments

[View file](/matrix-org/matrix-react-sdk/blob/b386f0c73b95ecbb6ea7f8f79c6ff5171a8dedd1/src/components/views/messages/MFileBody.js)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -288,7 +288,7 @@ export default class MFileBody extends React.Component { |
|  |  | <a ref={this.\_dummyLink} /> |
|  |  | </div> |
|  |  | <iframe |
|  |  | src={`${url}?origin=${encodeURIComponent(window.location.origin)}`} |
|  |  | src={url} |
|  |  | onLoad={onIframeLoad} |
|  |  | ref={this.\_iframe} |
|  |  | sandbox="allow-scripts allow-downloads allow-downloads-without-user-activation" /> |
| Expand Down | |  |

9 changes: 1 addition & 8 deletions

9
[src/usercontent/index.js](#diff-1025aecd11f2fca31404f7d7db61decf3c2d5e7c519f82ca608846d0fe8b4fe7 "src/usercontent/index.js")

Show comments

[View file](/matrix-org/matrix-react-sdk/blob/b386f0c73b95ecbb6ea7f8f79c6ff5171a8dedd1/src/usercontent/index.js)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,10 +1,3 @@ |
|  |  | const params = window.location.search.substring(1).split('&'); |
|  |  | let lockOrigin; |
|  |  | for (let i = 0; i < params.length; ++i) { |
|  |  | const parts = params[i].split('='); |
|  |  | if (parts[0] === 'origin') lockOrigin = decodeURIComponent(parts[1]); |
|  |  | } |
|  |  |  |
|  |  | function remoteRender(event) { |
|  |  | const data = event.data; |
|  |  |  |
| Expand Down  Expand Up | | @@ -45,7 +38,7 @@ function remoteSetTint(event) { |
|  |  | } |
|  |  |  |
|  |  | window.onmessage = function(e) { |
|  |  | if (e.origin === lockOrigin) { |
|  |  | if (e.origin === window.location.origin) { |
|  |  | if (e.data.blob) remoteRender(e); |
|  |  | else remoteSetTint(e); |
|  |  | } |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `b386f0c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmatrix-org%2Fmatrix-react-sdk%2Fcommit%2Fb386f0c73b95ecbb6ea7f8f79c6ff5171a8dedd1) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_6ed7155d_20250114_202921.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmatrix-org%2Fmatrix-react-sdk%2Fpull%2F5657)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmatrix-org%2Fmatrix-react-sdk%2Fpull%2F5657)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=matrix-org%2Fmatrix-react-sdk)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

This repository has been archived by the owner on Sep 11, 2024. It is now read-only.

[matrix-org](/matrix-org)
/
**[matrix-react-sdk](/matrix-org/matrix-react-sdk)**
Public archive

* [Notifications](/login?return_to=%2Fmatrix-org%2Fmatrix-react-sdk) You must be signed in to change notification settings
* [Fork
  827](/login?return_to=%2Fmatrix-org%2Fmatrix-react-sdk)
* [Star
   1.1k](/login?return_to=%2Fmatrix-org%2Fmatrix-react-sdk)

* [Code](/matrix-org/matrix-react-sdk)
* [Issues
  2](/matrix-org/matrix-react-sdk/issues)
* [Pull requests
  2](/matrix-org/matrix-react-sdk/pulls)
* [Actions](/matrix-org/matrix-react-sdk/actions)
* [Projects
  0](/matrix-org/matrix-react-sdk/projects)
* [Security](/matrix-org/matrix-react-sdk/security)
* [Insights](/matrix-org/matrix-react-sdk/pulse)

Additional navigation options

* [Code](/matrix-org/matrix-react-sdk)
* [Issues](/matrix-org/matrix-react-sdk/issues)
* [Pull requests](/matrix-org/matrix-react-sdk/pulls)
* [Actions](/matrix-org/matrix-react-sdk/actions)
* [Projects](/matrix-org/matrix-react-sdk/projects)
* [Security](/matrix-org/matrix-react-sdk/security)
* [Insights](/matrix-org/matrix-react-sdk/pulse)

# Remove redundant lockOrigin parameter from usercontent #5657

 Merged

[t3chguy](/t3chguy)
merged 1 commit into
[develop](/matrix-org/matrix-react-sdk/tree/develop "matrix-org/matrix-react-sdk:develop")
from
[t3chguy/usercontent](/matrix-org/matrix-react-sdk/tree/t3chguy/usercontent "matrix-org/matrix-react-sdk:t3chguy/usercontent")

Feb 16, 2021

 Merged

# [Remove redundant lockOrigin parameter from usercontent](#top) #5657

[t3chguy](/t3chguy)
merged 1 commit into
[develop](/matrix-org/matrix-react-sdk/tree/develop "matrix-org/matrix-react-sdk:develop")
from
[t3chguy/usercontent](/matrix-org/matrix-react-sdk/tree/t3chguy/usercontent "matrix-org/matrix-react-sdk:t3chguy/usercontent")

Feb 16, 2021

[Conversation
0](/matrix-org/matrix-react-sdk/pull/5657)
[Commits
1](/matrix-org/matrix-react-sdk/pull/5657/commits)
[Checks
0](/matrix-org/matrix-react-sdk/pull/5657/checks)
[Files changed](/matrix-org/matrix-react-sdk/pull/5657/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![t3chguy](https://avatars.githubusercontent.com/u/2403652?s=60&v=4)](/t3chguy)

Copy link

Member

### @t3chguy **[t3chguy](/t3chguy)** commented [Feb 16, 2021](#issue-809533646)

now that each Element has its own, and not usercontent.riot.im, it only has to permit its own origin

Sorry, something went wrong.

All reactions

[![@t3chguy](https://avatars.githubusercontent.com/u/2403652?s=40&v=4)](/t3chguy)

`[Remove redundant lockOrigin parameter from usercontent](/matrix-org/matrix-react-sdk/pull/5657/commits/6cb3381df59d576389ac69f1e4b01c99515fb0e6 "Remove redundant lockOrigin parameter from usercontent

now that each Element has its own, and not usercontent.riot.im
it only has to permit its own origin")`
 …

`[6cb3381](/matrix-org/matrix-react-sdk/pull/5657/commits/6cb3381df59d576389ac69f1e4b01c99515fb0e6)`

```
now that each Element has its own, and not usercontent.riot.im
it only has to permit its own origin
```

 [![@t3chguy](https://avatars.githubusercontent.com/u/2403652?s=40&u=722e46fb52978e0450ddd7a9be4de940c39916eb&v=4)](/t3chguy)
[t3chguy](/t3chguy)
requested a review
from a team
[February 16, 2021 18:04](#event-4337572937)

[![jryans](https://avatars.githubusercontent.com/u/279572?s=60&v=4)](/jryans)

**[jryans](/jryans)**
approved these changes
[Feb 16, 2021](#pullrequestreview-591504656)

 [View reviewed changes](/matrix-org/matrix-react-sdk/pull/5657/files/6cb3381df59d576389ac69f1e4b01c99515fb0e6)

[![@t3chguy](https://avatars.githubusercontent.com/u/2403652?s=40&u=722e46fb52978e0450ddd7a9be4de940c39916eb&v=4)](/t3chguy)
[t3chguy](/t3chguy)
merged commit [`b386f0c`](/matrix-org/matrix-react-sdk/commit/b386f0c73b95ecbb6ea7f8f79c6ff5171a8dedd1)
into
develop

[Feb 16, 2021](https://github.com/matrix-org/matrix-react-sdk/pull/5657#event-4337649576)

 [![@t3chguy](https://avatars.githubusercontent.com/u/2403652?s=40&u=722e46fb52978e0450ddd7a9be4de940c39916eb&v=4)](/t3chguy)
[t3chguy](/t3chguy)
deleted the
t3chguy/usercontent

branch
[February 16, 2021 18:23](#event-4337649803)

[Sign up for free](/join?source=comment-repo)
**to subscribe to this conversation on GitHub**.
Already have an account?
[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmatrix-org%2Fmatrix-react-sdk%2Fpull%2F5657).

Reviewers

[![@jryans](https://avatars.githubusercontent.com/u/279572?s=40&v=4)](/jryans) [jryans](/jryans)

jryans approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@t3chguy](https://avatars.githubusercontent.com/u/2403652?s=52&v=4)](/t3chguy) [![@jryans](https://avatars.githubusercontent.com/u/279572?s=52&v=4)](/jryans)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


