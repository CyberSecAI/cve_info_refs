=== Content from pkg.go.dev_96c5f651_20250114_214006.html ===


[![Go](/static/shared/logo/go-white.svg)](https://go.dev/)
 [Skip to Main Content](#main-content)

![](/static/shared/icon/search_gm_grey_24dp.svg)

![](/static/shared/icon/search_gm_grey_24dp.svg)

* Why Go
  ![submenu dropdown icon](/static/shared/icon/arrow_drop_down_gm_grey_24dp.svg)
  + [Case Studies](https://go.dev/solutions#case-studies)

    Common problems companies solve with Go
  + [Use Cases](https://go.dev/solutions#use-cases)

    Stories about how and why companies use Go
  + [Security Policy](https://go.dev/security/policy/)

    How Go can help keep you secure by default
* [Learn](https://go.dev/learn/)
* Docs
  ![submenu dropdown icon](/static/shared/icon/arrow_drop_down_gm_grey_24dp.svg)
  + [Effective Go](https://go.dev/doc/effective_go)

    Tips for writing clear, performant, and idiomatic Go code
  + [Go User Manual](https://go.dev/doc/)

    A complete introduction to building software with Go
  + [Standard library](https://pkg.go.dev/std)

    Reference documentation for Go's standard library
  + [Release Notes](https://go.dev/doc/devel/release)

    Learn what's new in each Go release
* [Packages](/)
* Community
  ![submenu dropdown icon](/static/shared/icon/arrow_drop_down_gm_grey_24dp.svg)
  + [Recorded Talks](https://go.dev/talks/)

    Videos from prior events
  + [Meetups
    *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://www.meetup.com/pro/go)

    Meet other local Go developers
  + [Conferences
    *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://github.com/golang/go/wiki/Conferences)

    Learn and network with Go developers from around the world
  + [Go blog](https://go.dev/blog)

    The Go project's official blog.
  + [Go project](https://go.dev/help)

    Get help and stay informed from Go
  + Get connected
    [![](/static/shared/logo/social/google-groups.svg)](https://groups.google.com/g/golang-nuts "Get connected with google-groups (Opens in new window)")
    [![](/static/shared/logo/social/github.svg)](https://github.com/golang "Get connected with github (Opens in new window)")
    [![](/static/shared/logo/social/twitter.svg)](https://twitter.com/golang "Get connected with twitter (Opens in new window)")
    [![](/static/shared/logo/social/reddit.svg)](https://www.reddit.com/r/golang/ "Get connected with reddit (Opens in new window)")
    [![](/static/shared/logo/social/slack.svg)](https://invite.slack.golangbridge.org/ "Get connected with slack (Opens in new window)")
    [![](/static/shared/logo/social/stack-overflow.svg)](https://stackoverflow.com/collectives/go)

[![Go.](/static/shared/logo/go-blue.svg)](https://go.dev/)

* Why Go
  *![](/static/shared/icon/navigate_next_gm_grey_24dp.svg)*
  *![](/static/shared/icon/navigate_before_gm_grey_24dp.svg)*
  Why Go
  + [Case Studies](https://go.dev/solutions#case-studies)
  + [Use Cases](https://go.dev/solutions#use-cases)
  + [Security Policy](https://go.dev/security/policy/)
* [Learn](https://go.dev/learn/)
* Docs
  *![](/static/shared/icon/navigate_next_gm_grey_24dp.svg)*
  *![](/static/shared/icon/navigate_before_gm_grey_24dp.svg)*
  Docs
  + [Effective Go](https://go.dev/doc/effective_go)
  + [Go User Manual](https://go.dev/doc/)
  + [Standard library](https://pkg.go.dev/std)
  + [Release Notes](https://go.dev/doc/devel/release)
* [Packages](/)
* Community
  *![](/static/shared/icon/navigate_next_gm_grey_24dp.svg)*
  *![](/static/shared/icon/navigate_before_gm_grey_24dp.svg)*
  Community
  + [Recorded Talks](https://go.dev/talks/)
  + [Meetups
    *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://www.meetup.com/pro/go)
  + [Conferences
    *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://github.com/golang/go/wiki/Conferences)
  + [Go blog](https://go.dev/blog)
  + [Go project](https://go.dev/help)
  + Get connected
    [![](/static/shared/logo/social/google-groups.svg)](https://groups.google.com/g/golang-nuts)
    [![](/static/shared/logo/social/github.svg)](https://github.com/golang)
    [![](/static/shared/logo/social/twitter.svg)](https://twitter.com/golang)
    [![](/static/shared/logo/social/reddit.svg)](https://www.reddit.com/r/golang/)
    [![](/static/shared/logo/social/slack.svg)](https://invite.slack.golangbridge.org/)
    [![](/static/shared/logo/social/stack-overflow.svg)](https://stackoverflow.com/collectives/go)

1. [Discover Packages](/)
2. [github.com/deislabs/oras](/github.com/deislabs/oras)
3. [pkg](/github.com/deislabs/oras/pkg)
4. [oras](/github.com/deislabs/oras%40v0.11.1/pkg/oras)
   ![](/static/shared/icon/content_copy_gm_grey_24dp.svg)

[![Go](/static/shared/logo/go-blue.svg)](https://go.dev/)
# oras

package
![](/static/shared/icon/content_copy_gm_grey_24dp.svg)

[Version:
v0.11.1](?tab=versions)
Opens a new window with list of versions in this module.

Latest
Latest
![Warning](/static/shared/icon/alert_gm_grey_24dp.svg)

This package is not in the latest version of its module.

[Go to latest](/github.com/deislabs/oras/pkg/oras)

Published: Mar 18, 2021

License: [MIT](/github.com/deislabs/oras/pkg/oras?tab=licenses)

Opens a new window with license information.

[Imports: 21](/github.com/deislabs/oras/pkg/oras?tab=imports)

Opens a new window with list of imports.

[Imported by: 0](/github.com/deislabs/oras/pkg/oras?tab=importedby)

Opens a new window with list of known importers.

Main
Versions

Licenses

Imports

Imported By

## Details

* ![checked](/static/shared/icon/check_circle_gm_grey_24dp.svg)
  Valid [go.mod](https://github.com/deislabs/oras/tree/v0.11.1/go.mod) file
  ![](/static/shared/icon/help_gm_grey_24dp.svg)

  The Go module system was introduced in Go 1.11 and is the official dependency management
  solution for Go.
* ![checked](/static/shared/icon/check_circle_gm_grey_24dp.svg)
  Redistributable license
  ![](/static/shared/icon/help_gm_grey_24dp.svg)

  Redistributable licenses place minimal restrictions on how software can be used,
  modified, and redistributed.
* ![checked](/static/shared/icon/check_circle_gm_grey_24dp.svg)
  Tagged version
  ![](/static/shared/icon/help_gm_grey_24dp.svg)

  Modules with tagged versions give importers more predictable builds.
* ![unchecked](/static/shared/icon/cancel_gm_grey_24dp.svg)
  Stable version
  ![](/static/shared/icon/help_gm_grey_24dp.svg)

  When a project reaches major version v1 it is considered stable.
* [Learn more about best practices](/about#best-practices)

## Repository

[github.com/deislabs/oras](https://github.com/deislabs/oras "https://github.com/deislabs/oras")
## Links

* [![Open Source Insights Logo](/static/shared/icon/depsdev-logo.svg)](https://deps.dev/go/github.com/deislabs/oras/v0.11.1 "View this module on Open Source Insights")

Jump to ...

* [Documentation](#section-documentation)
  + [Index](#pkg-index)
  + [Constants](#pkg-constants)
  + [Variables](#pkg-variables)
  + [Functions](#pkg-functions)
    - [Pull(ctx, resolver, ref, ingester, opts)](#Pull "Pull(ctx, resolver, ref, ingester, opts)")
    - [Push(ctx, resolver, ref, provider, descriptors, opts)](#Push "Push(ctx, resolver, ref, provider, descriptors, opts)")
    - [ValidateNameAsPath(desc)](#ValidateNameAsPath "ValidateNameAsPath(desc)")
    - [WithPullByBFS(o)](#WithPullByBFS "WithPullByBFS(o)")
  + [Types](#pkg-types)
    - [type PullOpt](#PullOpt "type PullOpt")
      * [WithAdditionalCachedMediaTypes(cachedMediaTypes)](#WithAdditionalCachedMediaTypes "WithAdditionalCachedMediaTypes(cachedMediaTypes)")
      * [WithAllowedMediaType(allowedMediaTypes)](#WithAllowedMediaType "WithAllowedMediaType(allowedMediaTypes)")
      * [WithAllowedMediaTypes(allowedMediaTypes)](#WithAllowedMediaTypes "WithAllowedMediaTypes(allowedMediaTypes)")
      * [WithCachedMediaTypes(cachedMediaTypes)](#WithCachedMediaTypes "WithCachedMediaTypes(cachedMediaTypes)")
      * [WithContentProvideIngester(store)](#WithContentProvideIngester "WithContentProvideIngester(store)")
      * [WithPullBaseHandler(handlers)](#WithPullBaseHandler "WithPullBaseHandler(handlers)")
      * [WithPullCallbackHandler(handlers)](#WithPullCallbackHandler "WithPullCallbackHandler(handlers)")
      * [WithPullEmptyNameAllowed()](#WithPullEmptyNameAllowed "WithPullEmptyNameAllowed()")
      * [WithPullStatusTrack(writer)](#WithPullStatusTrack "WithPullStatusTrack(writer)")
    - [type PushOpt](#PushOpt "type PushOpt")
      * [WithConfig(config)](#WithConfig "WithConfig(config)")
      * [WithConfigAnnotations(annotations)](#WithConfigAnnotations "WithConfigAnnotations(annotations)")
      * [WithConfigMediaType(mediaType)](#WithConfigMediaType "WithConfigMediaType(mediaType)")
      * [WithManifest(manifest)](#WithManifest "WithManifest(manifest)")
      * [WithManifestAnnotations(annotations)](#WithManifestAnnotations "WithManifestAnnotations(annotations)")
      * [WithNameValidation(validate)](#WithNameValidation "WithNameValidation(validate)")
      * [WithPushBaseHandler(handlers)](#WithPushBaseHandler "WithPushBaseHandler(handlers)")
      * [WithPushStatusTrack(writer)](#WithPushStatusTrack "WithPushStatusTrack(writer)")
* [Source Files](#section-sourcefiles)

Documentation

## Documentation [¶](#section-documentation "Go to Documentation")

### Index [¶](#pkg-index "Go to Index")

* [Variables](#pkg-variables)
* [func Pull(ctx context.Context, resolver remotes.Resolver, ref string, ...) (ocispec.Descriptor, []ocispec.Descriptor, error)](#Pull)
* [func Push(ctx context.Context, resolver remotes.Resolver, ref string, ...) (ocispec.Descriptor, error)](#Push)
* [func ValidateNameAsPath(desc ocispec.Descriptor) error](#ValidateNameAsPath)
* [func WithPullByBFS(o \*pullOpts) error](#WithPullByBFS)
* [type PullOpt](#PullOpt)
* + [func WithAdditionalCachedMediaTypes(cachedMediaTypes ...string) PullOpt](#WithAdditionalCachedMediaTypes)
  + [func WithAllowedMediaType(allowedMediaTypes ...string) PullOpt](#WithAllowedMediaType)
  + [func WithAllowedMediaTypes(allowedMediaTypes []string) PullOpt](#WithAllowedMediaTypes)
  + [func WithCachedMediaTypes(cachedMediaTypes ...string) PullOpt](#WithCachedMediaTypes)
  + [func WithContentProvideIngester(store orascontent.ProvideIngester) PullOpt](#WithContentProvideIngester)
  + [func WithPullBaseHandler(handlers ...images.Handler) PullOpt](#WithPullBaseHandler)
  + [func WithPullCallbackHandler(handlers ...images.Handler) PullOpt](#WithPullCallbackHandler)
  + [func WithPullEmptyNameAllowed() PullOpt](#WithPullEmptyNameAllowed)
  + [func WithPullStatusTrack(writer io.Writer) PullOpt](#WithPullStatusTrack)
* [type PushOpt](#PushOpt)
* + [func WithConfig(config ocispec.Descriptor) PushOpt](#WithConfig)
  + [func WithConfigAnnotations(annotations map[string]string) PushOpt](#WithConfigAnnotations)
  + [func WithConfigMediaType(mediaType string) PushOpt](#WithConfigMediaType)
  + [func WithManifest(manifest ocispec.Descriptor) PushOpt](#WithManifest)
  + [func WithManifestAnnotations(annotations map[string]string) PushOpt](#WithManifestAnnotations)
  + [func WithNameValidation(validate func(desc ocispec.Descriptor) error) PushOpt](#WithNameValidation)
  + [func WithPushBaseHandler(handlers ...images.Handler) PushOpt](#WithPushBaseHandler)
  + [func WithPushStatusTrack(writer io.Writer) PushOpt](#WithPushStatusTrack)
### Constants [¶](#pkg-constants "Go to Constants")

This section is empty.

### Variables [¶](#pkg-variables "Go to Variables")

[View Source](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/errors.go#L14)
```
var (
	ErrDirtyPath               = [errors](/errors).[New](/errors#New)("dirty path")
	ErrPathNotSlashSeparated   = [errors](/errors).[New](/errors#New)("path not slash separated")
	ErrAbsolutePathDisallowed  = [errors](/errors).[New](/errors#New)("absolute path disallowed")
	ErrPathTraversalDisallowed = [errors](/errors).[New](/errors#New)("path traversal disallowed")
)
```

Path validation related errors

[View Source](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/errors.go#L9)
```
var (
	ErrResolverUndefined = [errors](/errors).[New](/errors#New)("resolver undefined")
)
```

Common errors

[View Source](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/errors.go#L23)
```
var ErrStopProcessing = [fmt](/fmt).[Errorf](/fmt#Errorf)("stop processing")
```

ErrStopProcessing is used to stop processing an oras operation.
This error only makes sense in sequential pulling operation.

### Functions [¶](#pkg-functions "Go to Functions")

#### func [Pull](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull.go#L19) [¶](#Pull "Go to Pull")

```
func Pull(ctx [context](/context).[Context](/context#Context), resolver [remotes](/github.com/containerd/containerd/remotes).[Resolver](/github.com/containerd/containerd/remotes#Resolver), ref [string](/builtin#string), ingester [content](/github.com/containerd/containerd/content).[Ingester](/github.com/containerd/containerd/content#Ingester), opts ...[PullOpt](#PullOpt)) ([ocispec](/github.com/opencontainers/image-spec/specs-go/v1).[Descriptor](/github.com/opencontainers/image-spec/specs-go/v1#Descriptor), [][ocispec](/github.com/opencontainers/image-spec/specs-go/v1).[Descriptor](/github.com/opencontainers/image-spec/specs-go/v1#Descriptor), [error](/builtin#error))
```

Pull pull files from the remote

#### func [Push](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push.go#L17) [¶](#Push "Go to Push")

```
func Push(ctx [context](/context).[Context](/context#Context), resolver [remotes](/github.com/containerd/containerd/remotes).[Resolver](/github.com/containerd/containerd/remotes#Resolver), ref [string](/builtin#string), provider [content](/github.com/containerd/containerd/content).[Provider](/github.com/containerd/containerd/content#Provider), descriptors [][ocispec](/github.com/opencontainers/image-spec/specs-go/v1).[Descriptor](/github.com/opencontainers/image-spec/specs-go/v1#Descriptor), opts ...[PushOpt](#PushOpt)) ([ocispec](/github.com/opencontainers/image-spec/specs-go/v1).[Descriptor](/github.com/opencontainers/image-spec/specs-go/v1#Descriptor), [error](/builtin#error))
```

Push pushes files to the remote

#### func [ValidateNameAsPath](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push_opts.go#L90) [¶](#ValidateNameAsPath "Go to ValidateNameAsPath") added in v0.4.0

```
func ValidateNameAsPath(desc [ocispec](/github.com/opencontainers/image-spec/specs-go/v1).[Descriptor](/github.com/opencontainers/image-spec/specs-go/v1#Descriptor)) [error](/builtin#error)
```

ValidateNameAsPath validates name in the descriptor as file path in order
to generate good packages intended to be pulled using the FileStore or
the oras cli.
For cross-platform considerations, only unix paths are accepted.

#### func [WithPullByBFS](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go#L72) [¶](#WithPullByBFS "Go to WithPullByBFS") added in v0.4.0

```
func WithPullByBFS(o *pullOpts) [error](/builtin#error)
```

WithPullByBFS opt to pull in sequence with breath-first search

### Types [¶](#pkg-types "Go to Types")

#### type [PullOpt](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go#L28) [¶](#PullOpt "Go to PullOpt") added in v0.4.0

```
type PullOpt func(o *pullOpts) [error](/builtin#error)
```

PullOpt allows callers to set options on the oras pull

#### func [WithAdditionalCachedMediaTypes](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go#L48) [¶](#WithAdditionalCachedMediaTypes "Go to WithAdditionalCachedMediaTypes") added in v0.11.0

```
func WithAdditionalCachedMediaTypes(cachedMediaTypes ...[string](/builtin#string)) [PullOpt](#PullOpt)
```

WithAdditionalCachedMediaTypes adds media types normally cached in memory when pulling.
This does not replace the default media types, but appends to them

#### func [WithAllowedMediaType](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go#L56) [¶](#WithAllowedMediaType "Go to WithAllowedMediaType") added in v0.4.0

```
func WithAllowedMediaType(allowedMediaTypes ...[string](/builtin#string)) [PullOpt](#PullOpt)
```

WithAllowedMediaType sets the allowed media types

#### func [WithAllowedMediaTypes](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go#L64) [¶](#WithAllowedMediaTypes "Go to WithAllowedMediaTypes") added in v0.4.0

```
func WithAllowedMediaTypes(allowedMediaTypes [][string](/builtin#string)) [PullOpt](#PullOpt)
```

WithAllowedMediaTypes sets the allowed media types

#### func [WithCachedMediaTypes](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go#L39) [¶](#WithCachedMediaTypes "Go to WithCachedMediaTypes") added in v0.11.0

```
func WithCachedMediaTypes(cachedMediaTypes ...[string](/builtin#string)) [PullOpt](#PullOpt)
```

WithCachedMediaTypes sets the media types normally cached in memory when pulling.

#### func [WithContentProvideIngester](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go#L97) [¶](#WithContentProvideIngester "Go to WithContentProvideIngester") added in v0.6.0

```
func WithContentProvideIngester(store [orascontent](/github.com/deislabs/oras%40v0.11.1/pkg/content).[ProvideIngester](/github.com/deislabs/oras%40v0.11.1/pkg/content#ProvideIngester)) [PullOpt](#PullOpt)
```

WithContentProvideIngester opt to the provided Provider and Ingester
for file system I/O, including caches.

#### func [WithPullBaseHandler](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go#L79) [¶](#WithPullBaseHandler "Go to WithPullBaseHandler") added in v0.4.0

```
func WithPullBaseHandler(handlers ...[images](/github.com/containerd/containerd/images).[Handler](/github.com/containerd/containerd/images#Handler)) [PullOpt](#PullOpt)
```

WithPullBaseHandler provides base handlers, which will be called before
any pull specific handlers.

#### func [WithPullCallbackHandler](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go#L88) [¶](#WithPullCallbackHandler "Go to WithPullCallbackHandler") added in v0.4.0

```
func WithPullCallbackHandler(handlers ...[images](/github.com/containerd/containerd/images).[Handler](/github.com/containerd/containerd/images#Handler)) [PullOpt](#PullOpt)
```

WithPullCallbackHandler provides callback handlers, which will be called after
any pull specific handlers.

#### func [WithPullEmptyNameAllowed](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go#L105) [¶](#WithPullEmptyNameAllowed "Go to WithPullEmptyNameAllowed") added in v0.6.0

```
func WithPullEmptyNameAllowed() [PullOpt](#PullOpt)
```

WithPullEmptyNameAllowed allows pulling blobs with empty name.

#### func [WithPullStatusTrack](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go#L115) [¶](#WithPullStatusTrack "Go to WithPullStatusTrack") added in v0.9.0

```
func WithPullStatusTrack(writer [io](/io).[Writer](/io#Writer)) [PullOpt](#PullOpt)
```

WithPullStatusTrack report results to stdout

#### type [PushOpt](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push_opts.go#L35) [¶](#PushOpt "Go to PushOpt") added in v0.4.0

```
type PushOpt func(o *pushOpts) [error](/builtin#error)
```

PushOpt allows callers to set options on the oras push

#### func [WithConfig](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push_opts.go#L38) [¶](#WithConfig "Go to WithConfig") added in v0.4.0

```
func WithConfig(config [ocispec](/github.com/opencontainers/image-spec/specs-go/v1).[Descriptor](/github.com/opencontainers/image-spec/specs-go/v1#Descriptor)) [PushOpt](#PushOpt)
```

WithConfig overrides the config - setting this will ignore WithConfigMediaType and WithConfigAnnotations

#### func [WithConfigAnnotations](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push_opts.go#L54) [¶](#WithConfigAnnotations "Go to WithConfigAnnotations") added in v0.4.0

```
func WithConfigAnnotations(annotations map[[string](/builtin#string)][string](/builtin#string)) [PushOpt](#PushOpt)
```

WithConfigAnnotations overrides the config annotations

#### func [WithConfigMediaType](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push_opts.go#L46) [¶](#WithConfigMediaType "Go to WithConfigMediaType") added in v0.5.0

```
func WithConfigMediaType(mediaType [string](/builtin#string)) [PushOpt](#PushOpt)
```

WithConfigMediaType overrides the config media type

#### func [WithManifest](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push_opts.go#L62) [¶](#WithManifest "Go to WithManifest") added in v0.8.0

```
func WithManifest(manifest [ocispec](/github.com/opencontainers/image-spec/specs-go/v1).[Descriptor](/github.com/opencontainers/image-spec/specs-go/v1#Descriptor)) [PushOpt](#PushOpt)
```

WithManifest overrides the manifest - setting this will ignore WithManifestConfigAnnotations

#### func [WithManifestAnnotations](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push_opts.go#L70) [¶](#WithManifestAnnotations "Go to WithManifestAnnotations") added in v0.4.0

```
func WithManifestAnnotations(annotations map[[string](/builtin#string)][string](/builtin#string)) [PushOpt](#PushOpt)
```

WithManifestAnnotations overrides the manifest annotations

#### func [WithNameValidation](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push_opts.go#L79) [¶](#WithNameValidation "Go to WithNameValidation") added in v0.4.0

```
func WithNameValidation(validate func(desc [ocispec](/github.com/opencontainers/image-spec/specs-go/v1).[Descriptor](/github.com/opencontainers/image-spec/specs-go/v1#Descriptor)) [error](/builtin#error)) [PushOpt](#PushOpt)
```

WithNameValidation validates the image title in the descriptor.
Pass nil to disable name validation.

#### func [WithPushBaseHandler](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push_opts.go#L128) [¶](#WithPushBaseHandler "Go to WithPushBaseHandler") added in v0.4.0

```
func WithPushBaseHandler(handlers ...[images](/github.com/containerd/containerd/images).[Handler](/github.com/containerd/containerd/images#Handler)) [PushOpt](#PushOpt)
```

WithPushBaseHandler provides base handlers, which will be called before
any push specific handlers.

#### func [WithPushStatusTrack](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push_opts.go#L136) [¶](#WithPushStatusTrack "Go to WithPushStatusTrack") added in v0.9.0

```
func WithPushStatusTrack(writer [io](/io).[Writer](/io#Writer)) [PushOpt](#PushOpt)
```

WithPushStatusTrack report results to a provided writer

## Source Files [¶](#section-sourcefiles "Go to Source Files")

[View all Source files](https://github.com/deislabs/oras/tree/v0.11.1/pkg/oras)

* [errors.go](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/errors.go "errors.go")
* [pull.go](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull.go "pull.go")
* [pull\_opts.go](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/pull_opts.go "pull_opts.go")
* [push.go](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push.go "push.go")
* [push\_opts.go](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/push_opts.go "push_opts.go")
* [store.go](https://github.com/deislabs/oras/blob/v0.11.1/pkg/oras/store.go "store.go")

 Click to show internal directories.
 Click to hide internal directories.

[Why Go](https://go.dev/solutions)
[Use Cases](https://go.dev/solutions#use-cases)
[Case Studies](https://go.dev/solutions#case-studies)

[Get Started](https://learn.go.dev/)
[Playground](https://play.golang.org)
[Tour](https://tour.golang.org)
[Stack Overflow](https://stackoverflow.com/questions/tagged/go?tab=Newest)
[Help](https://go.dev/help)

[Packages](https://pkg.go.dev)
[Standard Library](/std)
[Sub-repositories](/golang.org/x)
[About Go Packages](https://pkg.go.dev/about)

[About](https://go.dev/project)
[Download](https://go.dev/dl/)
[Blog](https://go.dev/blog)
[Issue Tracker](https://github.com/golang/go/issues)
[Release Notes](https://go.dev/doc/devel/release.html)
[Brand Guidelines](https://blog.golang.org/go-brand)
[Code of Conduct](https://go.dev/conduct)

[Connect](https://www.twitter.com/golang)
[Twitter](https://www.twitter.com/golang)
[GitHub](https://github.com/golang)
[Slack](https://invite.slack.golangbridge.org/)
[r/golang](https://reddit.com/r/golang)
[Meetup](https://www.meetup.com/pro/go)
[Golang Weekly](https://golangweekly.com/)

![Gopher in flight goggles](/static/shared/gopher/pilot-bust-1431x901.svg)

* [Copyright](https://go.dev/copyright)
* [Terms of Service](https://go.dev/tos)
* [Privacy Policy](http://www.google.com/intl/en/policies/privacy/)
* [Report an Issue](https://go.dev/s/pkgsite-feedback)
* ![System theme](/static/shared/icon/brightness_6_gm_grey_24dp.svg)
  ![Dark theme](/static/shared/icon/brightness_2_gm_grey_24dp.svg)
  ![Light theme](/static/shared/icon/light_mode_gm_grey_24dp.svg)

  Theme Toggle
* ![](/static/shared/icon/keyboard_grey_24dp.svg)

  Shortcuts Modal

[![Google logo](/static/shared/logo/google-white.svg)](https://google.com)

## Jump to

![](/static/shared/icon/close_gm_grey_24dp.svg)

Close

## Keyboard shortcuts

![](/static/shared/icon/close_gm_grey_24dp.svg)

| **?** | : This menu |
| --- | --- |
| **/** | : Search site |
| **f** or **F** | : Jump to |
| **y** or **Y** | : Canonical URL |

Close

go.dev uses cookies from Google to deliver and enhance the quality of its services and to
analyze traffic. [Learn more.](https://policies.google.com/technologies/cookies)
Okay



=== Content from github.com_45aa1bb4_20250114_214002.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Foras-project%2Foras%2Fcommit%2F96cd90423303f1bb42bd043cb4c36085e6e91e8e)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Foras-project%2Foras%2Fcommit%2F96cd90423303f1bb42bd043cb4c36085e6e91e8e)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=oras-project%2Foras)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[oras-project](/oras-project)
/
**[oras](/oras-project/oras)**
Public

* [Notifications](/login?return_to=%2Foras-project%2Foras) You must be signed in to change notification settings
* [Fork
  183](/login?return_to=%2Foras-project%2Foras)
* [Star
   1.6k](/login?return_to=%2Foras-project%2Foras)

* [Code](/oras-project/oras)
* [Issues
  58](/oras-project/oras/issues)
* [Pull requests
  9](/oras-project/oras/pulls)
* [Discussions](/oras-project/oras/discussions)
* [Actions](/oras-project/oras/actions)
* [Projects
  0](/oras-project/oras/projects)
* [Security](/oras-project/oras/security)
* [Insights](/oras-project/oras/pulse)

Additional navigation options

* [Code](/oras-project/oras)
* [Issues](/oras-project/oras/issues)
* [Pull requests](/oras-project/oras/pulls)
* [Discussions](/oras-project/oras/discussions)
* [Actions](/oras-project/oras/actions)
* [Projects](/oras-project/oras/projects)
* [Security](/oras-project/oras/security)
* [Insights](/oras-project/oras/pulse)

## Commit

[Permalink](/oras-project/oras/commit/96cd90423303f1bb42bd043cb4c36085e6e91e8e)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-g5v4-5x39-vwhx](https://github.com/advisories/GHSA-g5v4-5x39-vwhx "GHSA-g5v4-5x39-vwhx")

[Browse files](/oras-project/oras/tree/96cd90423303f1bb42bd043cb4c36085e6e91e8e)
Browse the repository at this point in the history

```
* check hard link

* no following symbolic link

* bug fix

* add initial test to reproduce [GHSA-g5v4-5x39-vwhx](https://github.com/advisories/GHSA-g5v4-5x39-vwhx "GHSA-g5v4-5x39-vwhx")

Signed-off-by: jdolitsky <393494+jdolitsky@users.noreply.github.com>

* fix test for symbolic link

* fix bug

* add test for hardlink

Signed-off-by: jdolitsky <393494+jdolitsky@users.noreply.github.com>

* catch the parent folder

* remove check for hard link for consistency

* remove unncessary test for hard links

* Revert "remove unncessary test for hard links"

This reverts commit b3136611810f49074dfc6aef158b3d24466d2ed9.

* Revert "remove check for hard link for consistency"

This reverts commit d7b7346598c92ff9c430a42763d810b34d3f1ac2.

* check links for all link types

* add tests

Co-authored-by: jdolitsky <393494+jdolitsky@users.noreply.github.com>
```

* Loading branch information

[![@shizhMSFT](https://avatars.githubusercontent.com/u/32161882?s=40&v=4)](/shizhMSFT) [![@jdolitsky](https://avatars.githubusercontent.com/u/393494?s=40&v=4)](/jdolitsky)

[shizhMSFT](/oras-project/oras/commits?author=shizhMSFT "View all commits by shizhMSFT")
and
[jdolitsky](/oras-project/oras/commits?author=jdolitsky "View all commits by jdolitsky")
authored
Jan 22, 2021

1 parent
[200d032](/oras-project/oras/commit/200d032e6ec090d805709144fc740919d780f6d2)

commit 96cd904

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**170 additions**
and
**4 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* pkg

  + content

    - pkg/content/utils.go
      [utils.go](#diff-e1f1069ec70cb038b55a178319aad475d4414536564a71d24d4263bdc098dc3b)
  + oras

    - pkg/oras/oras\_test.go
      [oras\_test.go](#diff-8ee8c15bc842e84a68e1e75d32014d9c2fbc239541dcdff3a46454c9154fd497)

## There are no files selected for viewing

45 changes: 41 additions & 4 deletions

45
[pkg/content/utils.go](#diff-e1f1069ec70cb038b55a178319aad475d4414536564a71d24d4263bdc098dc3b "pkg/content/utils.go")

Show comments

[View file](/oras-project/oras/blob/96cd90423303f1bb42bd043cb4c36085e6e91e8e/pkg/content/utils.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -101,15 +101,24 @@ func extractTarDirectory(root, prefix string, r io.Reader) error { |
|  |  |  |
|  |  | // Name check |
|  |  | name := header.Name |
|  |  | path, err := filepath.Rel(prefix, name) |
|  |  | path, err := ensureBasePath(root, prefix, name) |
|  |  | if err != nil { |
|  |  | return err |
|  |  | } |
|  |  | if strings.HasPrefix(path, "../") { |
|  |  | return fmt.Errorf("%q does not have prefix %q", name, prefix) |
|  |  | } |
|  |  | path = filepath.Join(root, path) |
|  |  |  |
|  |  | // Link check |
|  |  | switch header.Typeflag { |
|  |  | case tar.TypeLink, tar.TypeSymlink: |
|  |  | link := header.Linkname |
|  |  | if !filepath.IsAbs(link) { |
|  |  | link = filepath.Join(filepath.Dir(name), link) |
|  |  | } |
|  |  | if \_, err := ensureBasePath(root, prefix, link); err != nil { |
|  |  | return err |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // Create content |
|  |  | switch header.Typeflag { |
|  |  | case tar.TypeReg: |
| Expand All | | @@ -132,6 +141,34 @@ func extractTarDirectory(root, prefix string, r io.Reader) error { |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // ensureBasePath ensures the target path is in the base path, |
|  |  | // returning its relative path to the base path. |
|  |  | func ensureBasePath(root, base, target string) (string, error) { |
|  |  | path, err := filepath.Rel(base, target) |
|  |  | if err != nil { |
|  |  | return "", err |
|  |  | } |
|  |  | cleanPath := filepath.ToSlash(filepath.Clean(path)) |
|  |  | if cleanPath == ".." || strings.HasPrefix(cleanPath, "../") { |
|  |  | return "", fmt.Errorf("%q is outside of %q", target, base) |
|  |  | } |
|  |  |  |
|  |  | // No symbolic link allowed in the relative path |
|  |  | dir := filepath.Dir(path) |
|  |  | for dir != "." { |
|  |  | if info, err := os.Lstat(filepath.Join(root, dir)); err != nil { |
|  |  | if !os.IsNotExist(err) { |
|  |  | return "", err |
|  |  | } |
|  |  | } else if info.Mode()&os.ModeSymlink != 0 { |
|  |  | return "", fmt.Errorf("no symbolic link allowed between %q and %q", base, target) |
|  |  | } |
|  |  | dir = filepath.Dir(dir) |
|  |  | } |
|  |  |  |
|  |  | return path, nil |
|  |  | } |
|  |  |  |
|  |  | func writeFile(path string, r io.Reader, perm os.FileMode) error { |
|  |  | file, err := os.OpenFile(path, os.O\_WRONLY|os.O\_CREATE|os.O\_TRUNC, perm) |
|  |  | if err != nil { |
| Expand Down | |  |

129 changes: 129 additions & 0 deletions

129
[pkg/oras/oras\_test.go](#diff-8ee8c15bc842e84a68e1e75d32014d9c2fbc239541dcdff3a46454c9154fd497 "pkg/oras/oras_test.go")

Show comments

[View file](/oras-project/oras/blob/96cd90423303f1bb42bd043cb4c36085e6e91e8e/pkg/oras/oras_test.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,8 +1,13 @@ |
|  |  | package oras |
|  |  |  |
|  |  | import ( |
|  |  | "archive/tar" |
|  |  | "bytes" |
|  |  | "compress/gzip" |
|  |  | "context" |
|  |  | \_ "crypto/sha256" |
|  |  | "fmt" |
|  |  | "io" |
|  |  | "io/ioutil" |
|  |  | "os" |
|  |  | "path/filepath" |
| Expand All | | @@ -17,6 +22,7 @@ import ( |
|  |  | "github.com/docker/distribution/configuration" |
|  |  | "github.com/docker/distribution/registry" |
|  |  | \_ "github.com/docker/distribution/registry/storage/driver/inmemory" |
|  |  | digest "github.com/opencontainers/go-digest" |
|  |  | ocispec "github.com/opencontainers/image-spec/specs-go/v1" |
|  |  | "github.com/phayes/freeport" |
|  |  | "github.com/stretchr/testify/suite" |
| Expand Down  Expand Up | | @@ -313,6 +319,129 @@ func (suite \*ORASTestSuite) Test\_3\_Conditional\_Pull() { |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // Test for vulnerability GHSA-g5v4-5x39-vwhx |
|  |  | func (suite \*ORASTestSuite) Test\_4\_GHSA\_g5v4\_5x39\_vwhx() { |
|  |  | var testVulnerability = func(headers []tar.Header, tag string, expectedError string) { |
|  |  | // Step 1: build malicious tar+gzip |
|  |  | buf := bytes.NewBuffer(nil) |
|  |  | digester := digest.Canonical.Digester() |
|  |  | zw := gzip.NewWriter(io.MultiWriter(buf, digester.Hash())) |
|  |  | tarDigester := digest.Canonical.Digester() |
|  |  | tw := tar.NewWriter(io.MultiWriter(zw, tarDigester.Hash())) |
|  |  | for \_, header := range headers { |
|  |  | err := tw.WriteHeader(&header) |
|  |  | suite.Nil(err, "error writing header") |
|  |  | } |
|  |  | err := tw.Close() |
|  |  | suite.Nil(err, "error closing tar") |
|  |  | err = zw.Close() |
|  |  | suite.Nil(err, "error closing gzip") |
|  |  |  |
|  |  | // Step 2: construct malicious descriptor |
|  |  | evilDesc := ocispec.Descriptor{ |
|  |  | MediaType: ocispec.MediaTypeImageLayerGzip, |
|  |  | Digest: digester.Digest(), |
|  |  | Size: int64(buf.Len()), |
|  |  | Annotations: map[string]string{ |
|  |  | orascontent.AnnotationDigest: tarDigester.Digest().String(), |
|  |  | orascontent.AnnotationUnpack: "true", |
|  |  | ocispec.AnnotationTitle: "foo", |
|  |  | }, |
|  |  | } |
|  |  |  |
|  |  | // Step 3: upload malicious artifact to registry |
|  |  | memoryStore := orascontent.NewMemoryStore() |
|  |  | memoryStore.Set(evilDesc, buf.Bytes()) |
|  |  | ref := fmt.Sprintf("%s/evil:%s", suite.DockerRegistryHost, tag) |
|  |  | \_, err = Push(newContext(), newResolver(), ref, memoryStore, []ocispec.Descriptor{evilDesc}) |
|  |  | suite.Nil(err, "no error pushing test data") |
|  |  |  |
|  |  | // Step 4: pull malicious tar with oras filestore and ensure error |
|  |  | tempDir, err := ioutil.TempDir("", "oras\_test") |
|  |  | if err != nil { |
|  |  | suite.FailNow("error creating temp directory", err) |
|  |  | } |
|  |  | defer os.RemoveAll(tempDir) |
|  |  | store := orascontent.NewFileStore(tempDir) |
|  |  | defer store.Close() |
|  |  | ref = fmt.Sprintf("%s/evil:%s", suite.DockerRegistryHost, tag) |
|  |  | \_, \_, err = Pull(newContext(), newResolver(), ref, store) |
|  |  | suite.NotNil(err, "error expected pulling malicious tar") |
|  |  | suite.Contains(err.Error(), |
|  |  | expectedError, |
|  |  | "did not get correct error message", |
|  |  | ) |
|  |  | } |
|  |  |  |
|  |  | tests := []struct { |
|  |  | name string |
|  |  | headers []tar.Header |
|  |  | tag string |
|  |  | expectedError string |
|  |  | }{ |
|  |  | { |
|  |  | name: "Test symbolic link path traversal", |
|  |  | headers: []tar.Header{ |
|  |  | { |
|  |  | Typeflag: tar.TypeDir, |
|  |  | Name: "foo/subdir/", |
|  |  | Mode: 0755, |
|  |  | }, |
|  |  | { // Symbolic link to `foo` |
|  |  | Typeflag: tar.TypeSymlink, |
|  |  | Name: "foo/subdir/parent", |
|  |  | Linkname: "..", |
|  |  | Mode: 0755, |
|  |  | }, |
|  |  | { // Symbolic link to `../etc/passwd` |
|  |  | Typeflag: tar.TypeSymlink, |
|  |  | Name: "foo/subdir/parent/passwd", |
|  |  | Linkname: "../../etc/passwd", |
|  |  | Mode: 0644, |
|  |  | }, |
|  |  | { // Symbolic link to `../etc` |
|  |  | Typeflag: tar.TypeSymlink, |
|  |  | Name: "foo/subdir/parent/etc", |
|  |  | Linkname: "../../etc", |
|  |  | Mode: 0644, |
|  |  | }, |
|  |  | }, |
|  |  | tag: "symlink\_path", |
|  |  | expectedError: "no symbolic link allowed", |
|  |  | }, |
|  |  | { |
|  |  | name: "Test symbolic link pointing to outside", |
|  |  | headers: []tar.Header{ |
|  |  | { // Symbolic link to `/etc/passwd` |
|  |  | Typeflag: tar.TypeSymlink, |
|  |  | Name: "foo/passwd", |
|  |  | Linkname: "../../../etc/passwd", |
|  |  | Mode: 0644, |
|  |  | }, |
|  |  | }, |
|  |  | tag: "symlink", |
|  |  | expectedError: "is outside of", |
|  |  | }, |
|  |  | { |
|  |  | name: "Test hard link pointing to outside", |
|  |  | headers: []tar.Header{ |
|  |  | { // Hard link to `/etc/passwd` |
|  |  | Typeflag: tar.TypeLink, |
|  |  | Name: "foo/passwd", |
|  |  | Linkname: "../../../etc/passwd", |
|  |  | Mode: 0644, |
|  |  | }, |
|  |  | }, |
|  |  | tag: "hardlink", |
|  |  | expectedError: "is outside of", |
|  |  | }, |
|  |  | } |
|  |  | for \_, test := range tests { |
|  |  | suite.T().Log(test.name) |
|  |  | testVulnerability(test.headers, test.tag, test.expectedError) |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | func TestORASTestSuite(t \*testing.T) { |
|  |  | suite.Run(t, new(ORASTestSuite)) |
|  |  | } |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `96cd904`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Foras-project%2Foras%2Fcommit%2F96cd90423303f1bb42bd043cb4c36085e6e91e8e) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_8c490635_20250114_214004.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Foras-project%2Foras%2Fsecurity%2Fadvisories%2FGHSA-g5v4-5x39-vwhx)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Foras-project%2Foras%2Fsecurity%2Fadvisories%2FGHSA-g5v4-5x39-vwhx)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=oras-project%2Foras)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[oras-project](/oras-project)
/
**[oras](/oras-project/oras)**
Public

* [Notifications](/login?return_to=%2Foras-project%2Foras) You must be signed in to change notification settings
* [Fork
  183](/login?return_to=%2Foras-project%2Foras)
* [Star
   1.6k](/login?return_to=%2Foras-project%2Foras)

* [Code](/oras-project/oras)
* [Issues
  58](/oras-project/oras/issues)
* [Pull requests
  9](/oras-project/oras/pulls)
* [Discussions](/oras-project/oras/discussions)
* [Actions](/oras-project/oras/actions)
* [Projects
  0](/oras-project/oras/projects)
* [Security](/oras-project/oras/security)
* [Insights](/oras-project/oras/pulse)

Additional navigation options

* [Code](/oras-project/oras)
* [Issues](/oras-project/oras/issues)
* [Pull requests](/oras-project/oras/pulls)
* [Discussions](/oras-project/oras/discussions)
* [Actions](/oras-project/oras/actions)
* [Projects](/oras-project/oras/projects)
* [Security](/oras-project/oras/security)
* [Insights](/oras-project/oras/pulse)

# Tarballs with links can escape working directory upon extraction ("zip slip")

High

[jdolitsky](/jdolitsky)
published
GHSA-g5v4-5x39-vwhx
Jan 22, 2021

## Package

gomod

oras
([Go](/advisories?query=ecosystem%3Ago))

## Affected versions

0.4.0 - 0.8.1

## Patched versions

0.9.0

## Description

### Impact

The directory support ([#55](https://github.com/oras-project/oras/pull/55)) allows the downloaded gzipped tarballs to be automatically extracted to the user-specified directory where the tarball can have symbolic links and hard links.

A well-crafted tarball or tarballs allow malicious artifact providers linking, writing, or overwriting specific files on the host filesystem outside of the user-specified directory unexpectedly with the same permissions as the user who runs `oras pull`.

Precisely, the following users of the affected versions are impacted:

* `oras` CLI users who runs `oras pull`.
* Go programs, which invokes `github.com/deislabs/oras/pkg/content.FileStore`.

### Patches

The problem has been patched by the PR linked with this advisory. Users should upgrade their `oras` CLI and packages to `0.9.0`.

### Workarounds

For `oras` CLI users, there is no workarounds other than pulling from a trusted artifact provider.

For `oras` package users, the workaround is to not use `github.com/deislabs/oras/pkg/content.FileStore`, and use other content stores instead, or pull from a trusted artifact provider.

### References

* [Zip Slip](https://github.com/snyk/zip-slip-vulnerability)

### For more information

If you have any questions or comments about this advisory:

* Open an issue on the [GitHub repo](https://github.com/deislabs/oras)
* Email the [list of maintainers](https://github.com/deislabs/oras/blob/main/MAINTAINERS)

### Severity

High

### CVE ID

CVE-2021-21272

### Weaknesses

No CWEs

### Credits

* [![@smowton](https://avatars.githubusercontent.com/u/283483?s=40&v=4)](/smowton)
  [smowton](/smowton)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_53791201_20250114_214003.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Foras-project%2Foras%2Freleases%2Ftag%2Fv0.9.0)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Foras-project%2Foras%2Freleases%2Ftag%2Fv0.9.0)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=oras-project%2Foras)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[oras-project](/oras-project)
/
**[oras](/oras-project/oras)**
Public

* [Notifications](/login?return_to=%2Foras-project%2Foras) You must be signed in to change notification settings
* [Fork
  183](/login?return_to=%2Foras-project%2Foras)
* [Star
   1.6k](/login?return_to=%2Foras-project%2Foras)

* [Code](/oras-project/oras/tree/v0.9.0)
* [Issues
  58](/oras-project/oras/issues)
* [Pull requests
  9](/oras-project/oras/pulls)
* [Discussions](/oras-project/oras/discussions)
* [Actions](/oras-project/oras/actions)
* [Projects
  0](/oras-project/oras/projects)
* [Security](/oras-project/oras/security)
* [Insights](/oras-project/oras/pulse)

Additional navigation options

* [Code](/oras-project/oras/tree/v0.9.0)
* [Issues](/oras-project/oras/issues)
* [Pull requests](/oras-project/oras/pulls)
* [Discussions](/oras-project/oras/discussions)
* [Actions](/oras-project/oras/actions)
* [Projects](/oras-project/oras/projects)
* [Security](/oras-project/oras/security)
* [Insights](/oras-project/oras/pulse)

1. [Releases](/oras-project/oras/releases)
2. [v0.9.0](/oras-project/oras/releases/tag/v0.9.0)

# v0.9.0

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/oras-project/oras/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v0.9.0)

 Loading

[View all tags](/oras-project/oras/tags)

![@jdolitsky](https://avatars.githubusercontent.com/u/393494?s=40&v=4)
[jdolitsky](/jdolitsky)
released this
22 Jan 15:31

·
[710 commits](/oras-project/oras/compare/v0.9.0...main)
to main
since this release

[v0.9.0](/oras-project/oras/tree/v0.9.0)

[`96cd904`](/oras-project/oras/commit/96cd90423303f1bb42bd043cb4c36085e6e91e8e)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

## IMPORTANT: Please read

**This release contains an important security patch. Users are recommended to upgrade immediately.**

Please see the security advisory for more information: [GHSA-g5v4-5x39-vwhx](https://github.com/advisories/GHSA-g5v4-5x39-vwhx "GHSA-g5v4-5x39-vwhx")

This release was signed with `E97F 9DA5 AE2E 39CF 48A1 42B7 852A 7470 A39F B81D` ([@jdolitsky](https://github.com/jdolitsky)'s GPG key) which can be found [here](https://github.com/jdolitsky.gpg).

## Changelog

[96cd904](https://github.com/oras-project/oras/commit/96cd90423303f1bb42bd043cb4c36085e6e91e8e) Merge pull request from [GHSA-g5v4-5x39-vwhx](https://github.com/advisories/GHSA-g5v4-5x39-vwhx "GHSA-g5v4-5x39-vwhx")

[200d032](https://github.com/oras-project/oras/commit/200d032e6ec090d805709144fc740919d780f6d2) maint: bump internal version to 0.9.0

[ccd6d00](https://github.com/oras-project/oras/commit/ccd6d0074e65d20e77afb4296819bbb57b37b3b3) maint: fix makefile signatures

[4891e69](https://github.com/oras-project/oras/commit/4891e693636355738b8da2f749f17aea6a18336e) maint: prep for v0.9.0 release

[a71cd72](https://github.com/oras-project/oras/commit/a71cd72c8c74cb12eb9c4cde5b2b5c4731b7d2f0) use armored signatures ([#210](https://github.com/oras-project/oras/pull/210))

[ee4d00f](https://github.com/oras-project/oras/commit/ee4d00f0795369a2047b9d5bcbc8b8ca726672b2) prep for v0.9.0 release ([#209](https://github.com/oras-project/oras/pull/209))

[07b7182](https://github.com/oras-project/oras/commit/07b7182640abacb2168d82051fd870923edb48b6) Bump github.com/stretchr/testify from 1.6.1 to 1.7.0 ([#206](https://github.com/oras-project/oras/pull/206))

[d3683ca](https://github.com/oras-project/oras/commit/d3683ca92611fe2c71f60ffaf49425fd336bdb97) Fix `pkg/auth/docker` test ([#204](https://github.com/oras-project/oras/pull/204))

[9a978bb](https://github.com/oras-project/oras/commit/9a978bb22a633a1d19cc8111b97a87951f496c4e) oras pull with cache ([#203](https://github.com/oras-project/oras/pull/203))

[50141da](https://github.com/oras-project/oras/commit/50141daa2bf1cee232a36933a389a8d4ce185e48) Bump github.com/containerd/containerd from 1.4.1 to 1.4.3 ([#202](https://github.com/oras-project/oras/pull/202))

[9555bb8](https://github.com/oras-project/oras/commit/9555bb810abdcfb58c4ccfd539c4f4c489214c9e) add multireader ([#199](https://github.com/oras-project/oras/pull/199))

[0bffdbc](https://github.com/oras-project/oras/commit/0bffdbc8b717fdf774259c96f7ac285089f8ceaa) add optional decompressstore ([#198](https://github.com/oras-project/oras/pull/198))

[f7447b4](https://github.com/oras-project/oras/commit/f7447b4c82c2c1c907b30bcd3daddf69e6dc1ab6) maint: update CI branch to main

[a64b0ac](https://github.com/oras-project/oras/commit/a64b0ac4faf26c58016fbd7ed1a9eb9d049e54ee) Bump github.com/containerd/containerd from 1.3.2 to 1.4.1 ([#190](https://github.com/oras-project/oras/pull/190))

[b489434](https://github.com/oras-project/oras/commit/b4894349897953c2540122bb961eba814f2f3045) Bump github.com/spf13/cobra from 0.0.5 to 0.0.7 ([#189](https://github.com/oras-project/oras/pull/189))

[63f4762](https://github.com/oras-project/oras/commit/63f4762af99695c8485cc69fde65e0191cf72790) Bump github.com/stretchr/testify from 1.4.0 to 1.6.1 ([#188](https://github.com/oras-project/oras/pull/188))

[da7584b](https://github.com/oras-project/oras/commit/da7584b24bdfb0f4c17eac5a1ce898136af5e4fe) Bump github.com/sirupsen/logrus from 1.4.2 to 1.7.0 ([#187](https://github.com/oras-project/oras/pull/187))

[ff65769](https://github.com/oras-project/oras/commit/ff657695a9d0a5caa2c4bd1cd57756da81d3de51) Bump github.com/opencontainers/go-digest from 1.0.0-rc1 to 1.0.0 ([#186](https://github.com/oras-project/oras/pull/186))

[f1caa17](https://github.com/oras-project/oras/commit/f1caa175232fb9a487bb01a2ac935475478f1e61) prevent anyone from accidentally setting the blocksize to zero ([#197](https://github.com/oras-project/oras/pull/197))

[d2037e9](https://github.com/oras-project/oras/commit/d2037e92aeb49c00751ad936183c0dd907d9f5cd) Fix broken OCI blog link in readme ([#195](https://github.com/oras-project/oras/pull/195))

[2ca9464](https://github.com/oras-project/oras/commit/2ca946426597a90e64baf31e372bdf4cc2519e77) options to content writers, including pre-providing the input and output hashes ([#192](https://github.com/oras-project/oras/pull/192))

[4cae1db](https://github.com/oras-project/oras/commit/4cae1dba9cb465913e233ed5f805097c7abb00a2) gunzip and untar passthrough writers ([#191](https://github.com/oras-project/oras/pull/191))

[79a6cf6](https://github.com/oras-project/oras/commit/79a6cf6ab877ddccfb9aacdf3606e63f67bb8575) chore(deps): add dependabot.yml ([#185](https://github.com/oras-project/oras/pull/185))

[d1f055b](https://github.com/oras-project/oras/commit/d1f055bd6b53f31603c0af3038ab67cf935054d9) create pass-through writer and iowriter ([#182](https://github.com/oras-project/oras/pull/182))

[6414398](https://github.com/oras-project/oras/commit/6414398e514585f6e8de332cce43a8df8b856285) add gar doc ([#184](https://github.com/oras-project/oras/pull/184))

[78a9b6b](https://github.com/oras-project/oras/commit/78a9b6b637bbed567a120718a69e4536c3a2799e) move reporting of status to lib ([#179](https://github.com/oras-project/oras/pull/179))

[ad8a2d6](https://github.com/oras-project/oras/commit/ad8a2d65800fca1516861e9cbd4b38a3011c96fd) Add GitHub Actions CI ([#183](https://github.com/oras-project/oras/pull/183))

[73b72c5](https://github.com/oras-project/oras/commit/73b72c5ddfc495520fd8d1bcdccbb893a08085f8) bump up version of docker depdendency ([#180](https://github.com/oras-project/oras/pull/180))

[eeb3b5f](https://github.com/oras-project/oras/commit/eeb3b5f12bc44c562380d9638cc80ed98d0a3d76) docs: add ECR docs ([#174](https://github.com/oras-project/oras/pull/174))

[d19ad98](https://github.com/oras-project/oras/commit/d19ad98995af835edefc3ec89bcbe913fac628ee) Remove dependency on k8s.io/kubernetes ([#175](https://github.com/oras-project/oras/pull/175))

[e68c514](https://github.com/oras-project/oras/commit/e68c514afd46296fe0e4cee09bf8b744f2cb1bdd) Refactor docker/NewClient to use early return ([#169](https://github.com/oras-project/oras/pull/169))

[3a7c320](https://github.com/oras-project/oras/commit/3a7c320f5b2149e12292596ff55a4d7ada6e1024) update doc for go mod ([#168](https://github.com/oras-project/oras/pull/168))

[c4facb5](https://github.com/oras-project/oras/commit/c4facb5b7752ccdaa97d9a9d4bc6d294df12384d) Readme content updates, prepping for OCI adoption ([#164](https://github.com/oras-project/oras/pull/164))

[2f7ca83](https://github.com/oras-project/oras/commit/2f7ca83c005223cf6d4c5b731320187ebdf59270) Proposal to add Vincent Batts as a maintainer of ORAS ([#163](https://github.com/oras-project/oras/pull/163))

[16f59e3](https://github.com/oras-project/oras/commit/16f59e3ef410ef54b3cb851eeb1be3d8e8fee03f) reducing maintainers ([#162](https://github.com/oras-project/oras/pull/162))

[e227ad1](https://github.com/oras-project/oras/commit/e227ad1d2ad691280ef95013c4f28b2002694a5f) fix typo in BUILDING.md ([#158](https://github.com/oras-project/oras/pull/158))

[19a0d44](https://github.com/oras-project/oras/commit/19a0d4482aed33ec4431dc8fa126a484c475f2db) Allow empty artifact ([#154](https://github.com/oras-project/oras/pull/154))

[fb588f7](https://github.com/oras-project/oras/commit/fb588f70f9c276fe27925b7f41cd0c728fb0b105) Enable ARM64 linux builds. ([#152](https://github.com/oras-project/oras/pull/152))

 Assets
10

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


