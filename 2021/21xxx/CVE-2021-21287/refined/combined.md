=== Content from github.com_7c19f610_20250114_190759.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fcommit%2Feb6871ecd960d570f70698877209e6db181bf276)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fcommit%2Feb6871ecd960d570f70698877209e6db181bf276)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=minio%2Fminio)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[minio](/minio)
/
**[minio](/minio/minio)**
Public

* [Notifications](/login?return_to=%2Fminio%2Fminio) You must be signed in to change notification settings
* [Fork
  5.6k](/login?return_to=%2Fminio%2Fminio)
* [Star
   49.4k](/login?return_to=%2Fminio%2Fminio)

* [Code](/minio/minio)
* [Issues
  23](/minio/minio/issues)
* [Pull requests
  11](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

Additional navigation options

* [Code](/minio/minio)
* [Issues](/minio/minio/issues)
* [Pull requests](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

## Commit

[Permalink](/minio/minio/commit/eb6871ecd960d570f70698877209e6db181bf276)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

fix: LoginSTS should be an inline implementation ([#11337](https://github.com/minio/minio/pull/11337))

[Browse files](/minio/minio/tree/eb6871ecd960d570f70698877209e6db181bf276)
Browse the repository at this point in the history

```
STS tokens can be obtained by using local APIs
once the remote JWT token is presented, current
code was not validating the incoming token in the
first place and was incorrectly making a network
operation using that token.

For the most part this always works without issues,
but under adversarial scenarios it exposes client
to hand-craft a request that can reach internal
services without authentication.

This kind of proxying should be avoided before
validating the incoming token.
```

* Loading branch information

[![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&v=4)](/harshavardhana)

[harshavardhana](/minio/minio/commits?author=harshavardhana "View all commits by harshavardhana")
authored
Jan 25, 2021

1 parent
[9cdd981](/minio/minio/commit/9cdd981ce7de3c9c4ede4ff85cf9a0fb8c798b1f)

commit eb6871e

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**42 additions**
and
**28 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* cmd

  + cmd/api-errors.go
    [api-errors.go](#diff-5593efac7db1cbcdb2c44dd9d935523c3ccebaa1245dfc26aad37e765f1319c7)
  + cmd/web-handlers.go
    [web-handlers.go](#diff-2b3f29fdeadc144f19a2d0e02e076608e0dd58cb2cce21b1b974bfc5bd21304b)

## There are no files selected for viewing

6 changes: 6 additions & 0 deletions

6
[cmd/api-errors.go](#diff-5593efac7db1cbcdb2c44dd9d935523c3ccebaa1245dfc26aad37e765f1319c7 "cmd/api-errors.go")

Show comments

[View file](/minio/minio/blob/eb6871ecd960d570f70698877209e6db181bf276/cmd/api-errors.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2125,6 +2125,12 @@ func toAPIError(ctx context.Context, err error) APIError { |
|  |  | HTTPStatusCode: e.Response().StatusCode, |
|  |  | } |
|  |  | // Add more Gateway SDKs here if any in future. |
|  |  | default: |
|  |  | apiErr = APIError{ |
|  |  | Code: apiErr.Code, |
|  |  | Description: fmt.Sprintf("%s: cause(%v)", apiErr.Description, err), |
|  |  | HTTPStatusCode: apiErr.HTTPStatusCode, |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  |  |
| Expand Down | |  |

64 changes: 36 additions & 28 deletions

64
[cmd/web-handlers.go](#diff-2b3f29fdeadc144f19a2d0e02e076608e0dd58cb2cce21b1b974bfc5bd21304b "cmd/web-handlers.go")

Show comments

[View file](/minio/minio/blob/eb6871ecd960d570f70698877209e6db181bf276/cmd/web-handlers.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -20,7 +20,6 @@ import ( |
|  |  | "context" |
|  |  | "crypto/subtle" |
|  |  | "encoding/json" |
|  |  | "encoding/xml" |
|  |  | "errors" |
|  |  | "fmt" |
|  |  | "io" |
| Expand Down  Expand Up | | @@ -2202,54 +2201,61 @@ type LoginSTSArgs struct { |
|  |  | Token string `json:"token" form:"token"` |
|  |  | } |
|  |  |  |
|  |  | var errSTSNotInitialized = errors.New("STS API not initialized, please configure STS support") |
|  |  |  |
|  |  | // LoginSTS - STS user login handler. |
|  |  | func (web \*webAPIHandlers) LoginSTS(r \*http.Request, args \*LoginSTSArgs, reply \*LoginRep) error { |
|  |  | ctx := newWebContext(r, args, "WebLoginSTS") |
|  |  |  |
|  |  | v := url.Values{} |
|  |  | v.Set("Action", webIdentity) |
|  |  | v.Set("WebIdentityToken", args.Token) |
|  |  | v.Set("Version", stsAPIVersion) |
|  |  |  |
|  |  | scheme := "http" |
|  |  | if sourceScheme := handlers.GetSourceScheme(r); sourceScheme != "" { |
|  |  | scheme = sourceScheme |
|  |  | } |
|  |  | if globalIsTLS { |
|  |  | scheme = "https" |
|  |  | if globalOpenIDValidators == nil { |
|  |  | return toJSONError(ctx, errSTSNotInitialized) |
|  |  | } |
|  |  |  |
|  |  | u := &url.URL{ |
|  |  | Scheme: scheme, |
|  |  | Host: r.Host, |
|  |  | v, err := globalOpenIDValidators.Get("jwt") |
|  |  | if err != nil { |
|  |  | logger.LogIf(ctx, err) |
|  |  | return toJSONError(ctx, errSTSNotInitialized) |
|  |  | } |
|  |  |  |
|  |  | u.RawQuery = v.Encode() |
|  |  |  |
|  |  | req, err := http.NewRequest(http.MethodPost, u.String(), nil) |
|  |  | m, err := v.Validate(args.Token, "") |
|  |  | if err != nil { |
|  |  | return toJSONError(ctx, err) |
|  |  | } |
|  |  |  |
|  |  | clnt := &http.Client{ |
|  |  | Transport: NewGatewayHTTPTransport(), |
|  |  | // JWT has requested a custom claim with policy value set. |
|  |  | // This is a MinIO STS API specific value, this value should |
|  |  | // be set and configured on your identity provider as part of |
|  |  | // JWT custom claims. |
|  |  | var policyName string |
|  |  | policySet, ok := iampolicy.GetPoliciesFromClaims(m, iamPolicyClaimNameOpenID()) |
|  |  | if ok { |
|  |  | policyName = globalIAMSys.CurrentPolicies(strings.Join(policySet.ToSlice(), ",")) |
|  |  | } |
|  |  | resp, err := clnt.Do(req) |
|  |  | if policyName == "" && globalPolicyOPA == nil { |
|  |  | return toJSONError(ctx, fmt.Errorf("%s claim missing from the JWT token, credentials will not be generated", iamPolicyClaimNameOpenID())) |
|  |  | } |
|  |  | m[iamPolicyClaimNameOpenID()] = policyName |
|  |  |  |
|  |  | secret := globalActiveCred.SecretKey |
|  |  | cred, err := auth.GetNewCredentialsWithMetadata(m, secret) |
|  |  | if err != nil { |
|  |  | return toJSONError(ctx, err) |
|  |  | } |
|  |  | defer xhttp.DrainBody(resp.Body) |
|  |  |  |
|  |  | if resp.StatusCode != http.StatusOK { |
|  |  | return toJSONError(ctx, errors.New(resp.Status)) |
|  |  | // Set the newly generated credentials. |
|  |  | if err = globalIAMSys.SetTempUser(cred.AccessKey, cred, policyName); err != nil { |
|  |  | return toJSONError(ctx, err) |
|  |  | } |
|  |  |  |
|  |  | a := AssumeRoleWithWebIdentityResponse{} |
|  |  | if err = xml.NewDecoder(resp.Body).Decode(&a); err != nil { |
|  |  | return toJSONError(ctx, err) |
|  |  | // Notify all other MinIO peers to reload temp users |
|  |  | for \_, nerr := range globalNotificationSys.LoadUser(cred.AccessKey, true) { |
|  |  | if nerr.Err != nil { |
|  |  | logger.GetReqInfo(ctx).SetTags("peerAddress", nerr.Host.String()) |
|  |  | logger.LogIf(ctx, nerr.Err) |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | reply.Token = a.Result.Credentials.SessionToken |
|  |  | reply.Token = cred.SessionToken |
|  |  | reply.UIVersion = browser.UIVersion |
|  |  | return nil |
|  |  | } |
| Expand Down  Expand Up | | @@ -2304,6 +2310,8 @@ func toWebAPIError(ctx context.Context, err error) APIError { |
|  |  | HTTPStatusCode: http.StatusBadRequest, |
|  |  | Description: err.Error(), |
|  |  | } |
|  |  | case errSTSNotInitialized: |
|  |  | return APIError(stsErrCodes.ToSTSErr(ErrSTSNotInitialized)) |
|  |  | case errServerNotInitialized: |
|  |  | return APIError{ |
|  |  | Code: "XMinioServerNotInitialized", |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `eb6871e`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fcommit%2Feb6871ecd960d570f70698877209e6db181bf276) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_551dad79_20250114_190800.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fpull%2F11337)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fpull%2F11337)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=minio%2Fminio)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[minio](/minio)
/
**[minio](/minio/minio)**
Public

* [Notifications](/login?return_to=%2Fminio%2Fminio) You must be signed in to change notification settings
* [Fork
  5.6k](/login?return_to=%2Fminio%2Fminio)
* [Star
   49.4k](/login?return_to=%2Fminio%2Fminio)

* [Code](/minio/minio)
* [Issues
  23](/minio/minio/issues)
* [Pull requests
  11](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

Additional navigation options

* [Code](/minio/minio)
* [Issues](/minio/minio/issues)
* [Pull requests](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fminio%2Fminio%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fminio%2Fminio%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# fix: LoginSTS should be an inline implementation #11337

 Merged

[harshavardhana](/harshavardhana)
merged 1 commit into
[minio:master](/minio/minio/tree/master "minio/minio:master")
from
[harshavardhana:fix-login](/harshavardhana/minio/tree/fix-login "harshavardhana/minio:fix-login")

Jan 25, 2021

 Merged

# [fix: LoginSTS should be an inline implementation](#top) #11337

[harshavardhana](/harshavardhana)
merged 1 commit into
[minio:master](/minio/minio/tree/master "minio/minio:master")
from
[harshavardhana:fix-login](/harshavardhana/minio/tree/fix-login "harshavardhana/minio:fix-login")

Jan 25, 2021

[Conversation
3](/minio/minio/pull/11337)
[Commits
1](/minio/minio/pull/11337/commits)
[Checks
0](/minio/minio/pull/11337/checks)
[Files changed](/minio/minio/pull/11337/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![harshavardhana](https://avatars.githubusercontent.com/u/622699?s=60&v=4)](/harshavardhana)

Copy link

Member

### @harshavardhana **[harshavardhana](/harshavardhana)** commented [Jan 23, 2021](#issue-792635786)

## Description

fix: LoginSTS should be an inline implementation

## Motivation and Context

STS tokens can be obtained by using local APIs

once the remote JWT token is presented, current

code was not validating the incoming token in the

first place and was incorrectly making a network

operation using that token.

For the most part, this always works without issues,

but under adversarial scenarios, it exposes the client

to hand-craft a request that can reach internal

services without authentication.

This kind of proxying should be avoided before

validating the incoming token.

## How to test this PR?

You need to setup STS OpenID to test the

entire login flow, but this fix can be readily

tested without a local running server.

## Types of changes

* Bug fix (non-breaking change which fixes an issue)
* New feature (non-breaking change which adds functionality)
* Optimization (provides speedup with no functional changes)
* Breaking change (fix or feature that would cause existing functionality to change)

## Checklist:

* Fixes a regression (If yes, please add `commit-id` or `PR #` here)
* Documentation updated
* Unit tests added/updated

Sorry, something went wrong.

 👍
2
 aead and monkeym4ster reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

 [![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
requested a review
from [Alevsk](/Alevsk)
[January 23, 2021 19:45](#event-4241856307)

[![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&v=4)](/harshavardhana)

`[fix: LoginSTS should be an inline implementation](/minio/minio/pull/11337/commits/6620a53d965d744ff117dd50676981e8bff619eb "fix: LoginSTS should be an inline implementation

STS tokens can be obtained by using local APIs
once the remote JWT token is presented, current
code was not validating the incoming token in the
first place and was incorrectly making a network
operation using that token.

For the most part this always works without issues,
but under adversarial scenarios it exposes client
to hand-craft a request that can reach internal
services without authentication.

This kind of proxying should be avoided before
validating the incoming token.")`
 …

`[6620a53](/minio/minio/pull/11337/commits/6620a53d965d744ff117dd50676981e8bff619eb)`

```
STS tokens can be obtained by using local APIs
once the remote JWT token is presented, current
code was not validating the incoming token in the
first place and was incorrectly making a network
operation using that token.

For the most part this always works without issues,
but under adversarial scenarios it exposes client
to hand-craft a request that can reach internal
services without authentication.

This kind of proxying should be avoided before
validating the incoming token.
```

 [![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
requested a review
from [aead](/aead)
[January 23, 2021 21:02](#event-4241912134)

 [![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
[force-pushed](/minio/minio/compare/bd9044aa0c30572fbbde0d2a2e99f17bf190cfc1..6620a53d965d744ff117dd50676981e8bff619eb)
the
fix-login

branch
from
[`bd9044a`](/minio/minio/commit/bd9044aa0c30572fbbde0d2a2e99f17bf190cfc1) to
[`6620a53`](/minio/minio/commit/6620a53d965d744ff117dd50676981e8bff619eb)  [Compare](/minio/minio/compare/bd9044aa0c30572fbbde0d2a2e99f17bf190cfc1..6620a53d965d744ff117dd50676981e8bff619eb)
[January 23, 2021 21:02](#event-4241912178)

[![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
added
the
[priority: high](/minio/minio/labels/priority%3A%20high)
label
[Jan 23, 2021](#event-4241912223)

[![@minio-trusted](https://avatars.githubusercontent.com/u/21070888?s=80&u=dea40fc2b755017ae911f9fca3f94d09f111aef7&v=4)](/minio-trusted)

Copy link

Contributor

### **[minio-trusted](/minio-trusted)** commented [Jan 23, 2021](#issuecomment-766186265)

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Mint Automation  | Test | Result | | --- | --- | | mint-large-bucket.sh | ✔️ | | mint-fs.sh | ✔️ | | mint-gateway-s3.sh | ✔️ | | mint-erasure.sh | ✔️ | | mint-dist-erasure.sh | ✔️ | | mint-zoned.sh | ✔️ | | mint-gateway-nas.sh | ✔️ | | mint-gateway-azure.sh | ❌ [more...](#22c71f9c-a24e-48c2-9664-e2aa42374847) | |  |  |  11337-6620a53/mint-gateway-azure.sh.log: ``` Running with SERVER_ENDPOINT:      minio-c2.minio.io:30367 ACCESS_KEY:           minioazure SECRET_KEY:           ***REDACTED*** ENABLE_HTTPS:         0 SERVER_REGION:        us-east-1 MINT_DATA_DIR:        /mint/data MINT_MODE:            full ENABLE_VIRTUAL_STYLE: 0  To get logs, run 'docker cp adf4d508dc8f:/mint/log /tmp/mint-logs'  (1/15) Running aws-sdk-go tests ... done in 9 seconds (2/15) Running aws-sdk-java tests ... done in 2 seconds (3/15) Running aws-sdk-php tests ... done in 3 minutes and 5 seconds (4/15) Running aws-sdk-ruby tests ... done in 20 seconds (5/15) Running awscli tests ... FAILED in 51 seconds {   "name": "awscli",   "duration": 1535,   "function": "make_bucket\n",   "status": "FAIL",   "error": "An error occurred (BucketAlreadyOwnedByYou) when calling the CreateBucket operation: Your previous request to create the named bucket succeeded and you already own it." } (5/15) Running healthcheck tests ... done in 1 seconds (6/15) Running mc tests ... done in 3 minutes and 59 seconds (7/15) Running minio-dotnet tests ... done in 1 minutes and 43 seconds (8/15) Running minio-go tests ... done in 6 minutes and 38 seconds (9/15) Running minio-java tests ... FAILED in 9 minutes and 14 seconds {   "name": "minio-java",   "function": "putObject()",   "args": "[user metadata]",   "duration": 172,   "status": "FAIL",   "error": "error occurred\nErrorResponse(code = AuthenticationFailed, message = -> github.com/Azure/azure-storage-blob-go/azblob.newStorageError, github.com/Azure/azure-storage-blob-go@v0.10.0/azblob/zc_storage_error.go:42\n===== RESPONSE ERROR (ServiceCode=AuthenticationFailed) =====\nDescription=Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.\nRequestId:328fd72b-f01e-004f-2ecf-f129f6000000\nTime:2021-01-23T21:35:26.4816303Z, Details: \n   AuthenticationErrorDetail: The MAC signature found in the HTTP request '75X+2IzvzT9GsTGE224oOteLyVs9gbwm+sdftWEssE8=' is not the same as any computed signature. Server used following string to sign: 'PUT\n\n\n128\n\napplication/xml\n\n\n\n\n\n\nx-ms-blob-cache-control:\nx-ms-blob-content-disposition:\nx-ms-blob-content-encoding:\nx-ms-blob-content-language:\nx-ms-blob-content-type:application/octet-stream\nx-ms-client-request-id:9a3ba3ae-2a05-4dfe-7e46-a2420c20a445\nx-ms-date:Sat, 23 Jan 2021 21:35:26 GMT\nx-ms-meta-my_header1:a   b   c\nx-ms-meta-my_header2:\"a   b   c\"\nx-ms-meta-my_project:Project One\nx-ms-meta-my_unicode_tag:å•†å“�\nx-ms-version:2019-02-02\n/minioazure/minio-java-test-3923qhc/minio-java-test-3nkduvi\ncomp:blocklist\ntimeout:1501'.\n   Code: AuthenticationFailed\n   PUT https://minioazure.blob.core.windows.net/minio-java-test-3923qhc/minio-java-test-3nkduvi?comp=blocklist&timeout=1501\n   Authorization: REDACTED\n   Content-Length: [128]\n   Content-Type: [application/xml]\n   User-Agent: [APN/1.0 MinIO/1.0 MinIO/2021-01-23T21:03:03Z]\n   X-Ms-Blob-Cache-Control: []\n   X-Ms-Blob-Content-Disposition: []\n   X-Ms-Blob-Content-Encoding: []\n   X-Ms-Blob-Content-Language: []\n   X-Ms-Blob-Content-Type: [application/octet-stream]\n   X-Ms-Client-Request-Id: [9a3ba3ae-2a05-4dfe-7e46-a2420c20a445]\n   X-Ms-Date: [Sat, 23 Jan 2021 21:35:26 GMT]\n   X-Ms-Meta-My_header1: [a   b   c]\n   X-Ms-Meta-My_header2: [\"a   b   c\"]\n   X-Ms-Meta-My_project: [Project One]\n   X-Ms-Meta-My_unicode_tag: [商品]\n   X-Ms-Version: [2019-02-02]\n   --------------------------------------------------------------------------------\n   RESPONSE Status: 403 Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.\n   Content-Length: [1092]\n   Content-Type: [application/xml]\n   Date: [Sat, 23 Jan 2021 21:35:25 GMT]\n   Server: [Microsoft-HTTPAPI/2.0]\n   X-Ms-Error-Code: [AuthenticationFailed]\n   X-Ms-Request-Id: [328fd72b-f01e-004f-2ecf-f129f6000000]\n\n\n, bucketName = minio-java-test-3923qhc, objectName = minio-java-test-3nkduvi, resource = /minio-java-test-3923qhc/minio-java-test-3nkduvi, requestId = 165CFA1309B3B503, hostId = 254f6f73-85dd-4217-bac4-d1eacbfc3554)\nrequest={method=PUT, url=http://minio-c2.minio.io:30367/minio-java-test-3923qhc/minio-java-test-3nkduvi, headers=x-amz-meta-My-Unicode-Tag: 商品\nx-amz-meta-My-Project: Project One\nx-amz-meta-My-header1: a   b   c\nx-amz-meta-My-Header2: \"a   b   c\"\nContent-Type: application/octet-stream\nHost: minio-c2.minio.io:30367\nAccept-Encoding: identity\nUser-Agent: MinIO (Linux; amd64) minio-java/8.0.3\nContent-MD5: A9oFTxee7YVcJ9fWsgQeKg==\nx-amz-content-sha256: 1ff7959f86334ddc5c188a5083268f600146328b2b6c5185e75bf7d9387d6b74\nx-amz-date: 20210123T213526Z\nAuthorization: AWS4-HMAC-SHA256 Credential=*REDACTED*/20210123/us-east-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-meta-my-header1;x-amz-meta-my-header2;x-amz-meta-my-project;x-amz-meta-my-unicode-tag, Signature=*REDACTED*\n}\nresponse={code=403, headers=Accept-Ranges: bytes\nContent-Length: 3086\nContent-Security-Policy: block-all-mixed-content\nContent-Type: application/xml\nServer: MinIO\nVary: Origin\nX-Amz-Request-Id: 165CFA1309B3B503\nX-Xss-Protection: 1; mode=block\nDate: Sat, 23 Jan 2021 21:35:26 GMT\n}\n >>> [io.minio.MinioClient.execute(MinioClient.java:775), io.minio.MinioClient.putObject(MinioClient.java:4547), io.minio.MinioClient.putObject(MinioClient.java:2713), io.minio.MinioClient.putObject(MinioClient.java:2830), FunctionalTest.testPutObject(FunctionalTest.java:763), FunctionalTest.putObject(FunctionalTest.java:890), FunctionalTest.runObjectTests(FunctionalTest.java:3751), FunctionalTest.runTests(FunctionalTest.java:3783), FunctionalTest.main(FunctionalTest.java:3927)]" } (9/15) Running minio-js tests ... done in 2 minutes and 43 seconds (10/15) Running minio-py tests ... done in 18 minutes and 49 seconds (11/15) Running s3cmd tests ... done in 2 minutes and 20 seconds (12/15) Running s3select tests ... done in 1 minutes and 0 seconds (13/15) Running security tests ... done in 0 seconds  Executed 13 out of 15 tests successfully.  ```  Deleting image on docker hub Deleting image locally |

All reactions

Sorry, something went wrong.

[![Alevsk](https://avatars.githubusercontent.com/u/1795553?s=60&v=4)](/Alevsk)

**[Alevsk](/Alevsk)**
approved these changes
[Jan 24, 2021](#pullrequestreview-574953527)

 [View reviewed changes](/minio/minio/pull/11337/files/6620a53d965d744ff117dd50676981e8bff619eb)

Copy link

Contributor

### @Alevsk **[Alevsk](/Alevsk)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Tested, no more SSRF

Sorry, something went wrong.

All reactions

[![aead](https://avatars.githubusercontent.com/u/20368805?s=60&v=4)](/aead)

**[aead](/aead)**
approved these changes
[Jan 25, 2021](#pullrequestreview-575676915)

 [View reviewed changes](/minio/minio/pull/11337/files/6620a53d965d744ff117dd50676981e8bff619eb)

[![@aead](https://avatars.githubusercontent.com/u/20368805?s=80&u=298b102a2997c1e5b52f7252933aeb89977f0a20&v=4)](/aead)

Copy link

Member

### **[aead](/aead)** commented [Jan 25, 2021](#issuecomment-767012599)

| We should make a release to get this deployed.... |
| --- |

All reactions

Sorry, something went wrong.

[![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
merged commit [`eb6871e`](/minio/minio/commit/eb6871ecd960d570f70698877209e6db181bf276)
into
minio:master

[Jan 25, 2021](https://github.com/minio/minio/pull/11337#event-4247026473)

 [![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
deleted the
fix-login

branch
[January 25, 2021 18:15](#event-4247027299)

[![@mocsharp](https://avatars.githubusercontent.com/u/4236590?s=40&v=4)](/mocsharp)
[mocsharp](/mocsharp)
mentioned this pull request
[Nov 1, 2022](#ref-issue-1431766883)

[CVE-2021-21287 high vulnerability for Minio package
Project-MONAI/monai-deploy-workflow-manager#554](/Project-MONAI/monai-deploy-workflow-manager/issues/554)

Closed

1 task

[![@tatianab](https://avatars.githubusercontent.com/u/6238967?s=40&v=4)](/tatianab)
[tatianab](/tatianab)
mentioned this pull request
[Nov 8, 2023](#ref-issue-1984475759)

[x/vulndb: potential Go vuln in github.com/minio/minio: CVE-2021-21287
golang/vulndb#2318](/golang/vulndb/issues/2318)

Closed

[![@Xianyu0day](https://avatars.githubusercontent.com/u/186995331?s=40&v=4)](/Xianyu0day)
[Xianyu0day](/Xianyu0day)
mentioned this pull request
[Nov 27, 2024](#ref-issue-2697608154)

[似乎是bug：使用yak命令行nuclei插件时。数据库还显示了一堆dnslog 都不知道是哪个洞 也没显示
yaklang/yakit#2152](/yaklang/yakit/issues/2152)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fpull%2F11337)

Reviewers

[![@aead](https://avatars.githubusercontent.com/u/20368805?s=40&v=4)](/aead) [aead](/aead)

aead approved these changes

[![@Alevsk](https://avatars.githubusercontent.com/u/1795553?s=40&v=4)](/Alevsk) [Alevsk](/Alevsk)

Alevsk approved these changes

Assignees

No one assigned

Labels

[priority: high](/minio/minio/labels/priority%3A%20high)

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

4 participants

[![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=52&v=4)](/harshavardhana) [![@minio-trusted](https://avatars.githubusercontent.com/u/21070888?s=52&v=4)](/minio-trusted) [![@aead](https://avatars.githubusercontent.com/u/20368805?s=52&v=4)](/aead) [![@Alevsk](https://avatars.githubusercontent.com/u/1795553?s=52&v=4)](/Alevsk)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_7eb4778a_20250114_190801.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Freleases%2Ftag%2FRELEASE.2021-01-30T00-20-58Z)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Freleases%2Ftag%2FRELEASE.2021-01-30T00-20-58Z)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=minio%2Fminio)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[minio](/minio)
/
**[minio](/minio/minio)**
Public

* [Notifications](/login?return_to=%2Fminio%2Fminio) You must be signed in to change notification settings
* [Fork
  5.6k](/login?return_to=%2Fminio%2Fminio)
* [Star
   49.4k](/login?return_to=%2Fminio%2Fminio)

* [Code](/minio/minio/tree/RELEASE.2021-01-30T00-20-58Z)
* [Issues
  23](/minio/minio/issues)
* [Pull requests
  11](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

Additional navigation options

* [Code](/minio/minio/tree/RELEASE.2021-01-30T00-20-58Z)
* [Issues](/minio/minio/issues)
* [Pull requests](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

1. [Releases](/minio/minio/releases)
2. [RELEASE.2021-01-30T00-20-58Z](/minio/minio/releases/tag/RELEASE.2021-01-30T00-20-58Z)

# Security Bug Fix Release

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/minio/minio/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...RELEASE.2021-01-30T00-20-58Z)

 Loading

[View all tags](/minio/minio/tags)

![@minio-trusted](https://avatars.githubusercontent.com/u/21070888?s=40&v=4)
[minio-trusted](/minio-trusted)
released this
30 Jan 03:22

·
[4616 commits](/minio/minio/compare/RELEASE.2021-01-30T00-20-58Z...master)
to master
since this release

[RELEASE.2021-01-30T00-20-58Z](/minio/minio/tree/RELEASE.2021-01-30T00-20-58Z)

This tag was signed with the committer’s **verified signature**.

[![](https://avatars.githubusercontent.com/u/21070888?s=64&v=4)](/minio-trusted)
[minio-trusted](/minio-trusted)

GPG key ID: 12C74390F9AAC728

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

[`c82aef0`](/minio/minio/commit/c82aef0a565439d27e01b7d7cfd779d6c329e028)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

## Highlights

* Users are advised to upgrade to the latest version of MinIO. Click [here](https://github.com/minio/minio/security/advisories/GHSA-m4qq-5f7c-693q) for more details.
* Click [here](https://min.io/download) to download the latest version of MinIO.
* Click [here](https://min.io/pricing) for production support.
* Support variable server pools. See ([#11256](https://github.com/minio/minio/pull/11256), [#11299](https://github.com/minio/minio/pull/11299), [#11309](https://github.com/minio/minio/pull/11309), [#11372](https://github.com/minio/minio/pull/11372), [#11320](https://github.com/minio/minio/pull/11320)) for more details.
* Add LDAP Lookup-Bind mode. See ([#11318](https://github.com/minio/minio/pull/11318), [#11357](https://github.com/minio/minio/pull/11357), [#11276](https://github.com/minio/minio/pull/11276)) for more details.
* Add cluster level Prometheus metrics. See ([#11141](https://github.com/minio/minio/pull/11141), [#11328](https://github.com/minio/minio/pull/11328), [#11333](https://github.com/minio/minio/pull/11333)) for more details.
* replication related fixes. See ([#11356](https://github.com/minio/minio/pull/11356), [#11308](https://github.com/minio/minio/pull/11308)) for more details.
* audit: per object send pool number, set number and servers per operation. See ([#11233](https://github.com/minio/minio/pull/11233)) for more details.
* Improvements and fixes to healing. See ([#11348](https://github.com/minio/minio/pull/11348), [#11341](https://github.com/minio/minio/pull/11341), [#11358](https://github.com/minio/minio/pull/11358), [#11274](https://github.com/minio/minio/pull/11274), [#11338](https://github.com/minio/minio/pull/11338)) for more details.
* fix: load credentials from etcd directly when possible. See ([#11339](https://github.com/minio/minio/pull/11339)) for more details.
* fix: allow delayed etcd updates to have fallbacks. See ([#11151](https://github.com/minio/minio/pull/11151)) for more details.
* Minor fixes in lifecycle. See ([#11288](https://github.com/minio/minio/pull/11288)) for more details.
* fix: notify bucket replication after replication/ilm. See ([#11343](https://github.com/minio/minio/pull/11343)) for more details.
* Notification related fixes. See ([#11351](https://github.com/minio/minio/pull/11351), [#11307](https://github.com/minio/minio/pull/11307)) for more details.
* Federation related fixes. See ([#11334](https://github.com/minio/minio/pull/11334), [#11365](https://github.com/minio/minio/pull/11365)) for more details.
* fix: expire locks only on participating lockers. See ([#11335](https://github.com/minio/minio/pull/11335)) for more details.
* fix ObjectInfo returned by CopyObject. See ([#11377](https://github.com/minio/minio/pull/11377)) for more details.
* fix: reduce an extra readdir() attempted on non-legacy setups. See ([#11301](https://github.com/minio/minio/pull/11301)) for more details.
* fix: check for O\_DIRECT support for reads and writes. See ([#11331](https://github.com/minio/minio/pull/11331)) for more details.
* Don't mark remotes online when shutting down. See ([#11368](https://github.com/minio/minio/pull/11368)) for more details.
* fix: LoginSTS should be an inline implementation. See ([#11337](https://github.com/minio/minio/pull/11337)) for more details.
* Feed correct part number to sio. See ([#11326](https://github.com/minio/minio/pull/11326)) for more details.
* Clarify root disk error. See ([#11314](https://github.com/minio/minio/pull/11314)) for more details.
* select: Fix leak on compressed files. See ([#11302](https://github.com/minio/minio/pull/11302)) for more details.
* fix: optimize parentDirIsObject method. See ([#11280](https://github.com/minio/minio/pull/11280), [#11291](https://github.com/minio/minio/pull/11291)) for more details.

## Changelog

* fix ObjectInfo returned by CopyObject ([#11377](https://github.com/minio/minio/pull/11377)) (01/29/21) (Poorna Krishnamoorthy)
* fix: allow expansion with newer constraints for older setups ([#11372](https://github.com/minio/minio/pull/11372)) (01/29/21) (Harshavardhana)
* add hotfix+commit-id+docker builds (01/28/21) (Harshavardhana)
* fix: log notification errors only once ([#11350](https://github.com/minio/minio/pull/11350)) (01/28/21) (Ritesh H Shukla)
* Don't mark remotes online when shutting down ([#11368](https://github.com/minio/minio/pull/11368)) (01/28/21) (Klaus Post)
* fix: verify overlapping domains when > 1 (01/28/21) (Harshavardhana)
* fix: allow updated domain names in federation ([#11365](https://github.com/minio/minio/pull/11365)) (01/28/21) (Harshavardhana)
* Bind to lookup user after user auth to lookup ldap groups ([#11357](https://github.com/minio/minio/pull/11357)) (01/27/21) (Aditya Manthramurthy)
* fix: replication regression due to proxying requests ([#11356](https://github.com/minio/minio/pull/11356)) (01/27/21) (Poorna Krishnamoorthy)
* fix: trigger heal if one of the parts are not found ([#11358](https://github.com/minio/minio/pull/11358)) (01/27/21) (Harshavardhana)
* heal: Remove empty directories ([#11354](https://github.com/minio/minio/pull/11354)) (01/27/21) (Anis Elleuch)
* rename last remaining Zone->Pool (01/26/21) (Harshavardhana)
* Send bucket name to peers when bucket notification is enabled ([#11351](https://github.com/minio/minio/pull/11351)) (01/26/21) (massintha azamoum)
* fix: rename audit log docs and datastructure (01/26/21) (Harshavardhana)
* audit: per object send pool number, set number and servers per operation ([#11233](https://github.com/minio/minio/pull/11233)) (01/26/21) (Anis Elleuch)
* fix: purge LDAP deprecated keys (01/26/21) (Harshavardhana)
* fix: load credentials from etcd directly when possible ([#11339](https://github.com/minio/minio/pull/11339)) (01/25/21) (Harshavardhana)
* Add LDAP Lookup-Bind mode ([#11318](https://github.com/minio/minio/pull/11318)) (01/25/21) (Aditya Manthramurthy)
* fix: notify bucket replication after replication/ilm ([#11343](https://github.com/minio/minio/pull/11343)) (01/25/21) (Harshavardhana)
* fix: LoginSTS should be an inline implementation ([#11337](https://github.com/minio/minio/pull/11337)) (01/25/21) (Harshavardhana)
* fix: expire locks only on participating lockers ([#11335](https://github.com/minio/minio/pull/11335)) (01/25/21) (Harshavardhana)
* heal: Decode object name in healing result ([#11348](https://github.com/minio/minio/pull/11348)) (01/25/21) (Anis Elleuch)
* fix: healBucket across sets should capture results properly ([#11341](https://github.com/minio/minio/pull/11341)) (01/25/21) (Harshavardhana)
* honor maxWait heal config when maxIO hits ([#11338](https://github.com/minio/minio/pull/11338)) (01/25/21) (Harshavardhana)
* update new metrics url docs ([#11342](https://github.com/minio/minio/pull/11342)) (01/25/21) (Ritesh H Shukla)
* avoid double CORS headers in federation ([#11334](https://github.com/minio/minio/pull/11334)) (01/23/21) (Harshavardhana)
* Add open FD and FD limit to cluster metrics ([#11328](https://github.com/minio/minio/pull/11328)) (01/22/21) (Ritesh H Shukla)
* fix: check for O\_DIRECT support for reads and writes ([#11331](https://github.com/minio/minio/pull/11331)) (01/22/21) (Harshavardhana)
* initialize forwarder after init() to avoid crashes ([#11330](https://github.com/minio/minio/pull/11330)) (01/22/21) (Harshavardhana)
* validate storage class across pools when setting config ([#11320](https://github.com/minio/minio/pull/11320)) (01/22/21) (Harshavardhana)
* update healthcheck tests for new prometheus endpoint ([#11333](https://github.com/minio/minio/pull/11333)) (01/22/21) (Harshavardhana)
* fix: prometheus metrics link typo update to latest (01/22/21) (Harshavardhana)
* Feed correct part number to sio ([#11326](https://github.com/minio/minio/pull/11326)) (01/21/21) (Klaus Post)
* Compress profiling data ([#11313](https://github.com/minio/minio/pull/11313)) (01/20/21) (Klaus Post)
* fix: crash in notificationsys when peers online is 0 ([#11307](https://github.com/minio/minio/pull/11307)) (01/20/21) (Poorna Krishnamoorthy)
* fix possible crashes on deleteMarker replication ([#11308](https://github.com/minio/minio/pull/11308)) (01/20/21) (Harshavardhana)
* Clarify root disk error ([#11314](https://github.com/minio/minio/pull/11314)) (01/20/21) (Klaus Post)
* fix: honor storage class uniformity for multiple pools ([#11309](https://github.com/minio/minio/pull/11309)) (01/20/21) (Harshavardhana)
* select: Fix leak on compressed files ([#11302](https://github.com/minio/minio/pull/11302)) (01/19/21) (Klaus Post)
* fix: allow delayed etcd updates to have fallbacks ([#11151](https://github.com/minio/minio/pull/11151)) (01/19/21) (Harshavardhana)
* fix: add stricter validation for erasure server pools ([#11299](https://github.com/minio/minio/pull/11299)) (01/19/21) (Harshavardhana)
* fix: reduce an extra readdir() attempted on non-legacy setups ([#11301](https://github.com/minio/minio/pull/11301)) (01/19/21) (Harshavardhana)
* fix: crawler to skip healing the drives in a set being healed ([#11274](https://github.com/minio/minio/pull/11274)) (01/19/21) (Harshavardhana)
* crypto: Escape JSON text ([#10794](https://github.com/minio/minio/pull/10794)) (01/19/21) (Klaus Post)
* fix go mod tidy, remove unexpected deps (01/18/21) (Harshavardhana)
* Updated Prometheus metrics ([#11141](https://github.com/minio/minio/pull/11141)) (01/18/21) (Ritesh H Shukla)
* update gjson dependency (01/18/21) (Harshavardhana)
* fix: optimize parentDirIsObject by moving isObject to storage layer ([#11291](https://github.com/minio/minio/pull/11291)) (01/18/21) (Harshavardhana)
* Upgrade simdjson to v0.2.0 with 30-50% faster parsing ([#11295](https://github.com/minio/minio/pull/11295)) (01/18/21) (Klaus Post)
* Fix support for multiple LDAP user formats ([#11276](https://github.com/minio/minio/pull/11276)) (01/17/21) (Aditya Manthramurthy)
* fix: do not compute usage for not found lifecycle operations ([#11288](https://github.com/minio/minio/pull/11288)) (01/17/21) (Harshavardhana)
* fix: bucket lifecycle again to remove Days parameter (01/17/21) (Harshavardhana)
* fix: lifecycle documentation for DeleteMarker (01/17/21) (Harshavardhana)
* fix: make sure parentDirIsObject is used at set level ([#11280](https://github.com/minio/minio/pull/11280)) (01/17/21) (Harshavardhana)
* fix: standard storage class is allowed to be '0' (01/16/21) (Harshavardhana)
* Support variable server pools ([#11256](https://github.com/minio/minio/pull/11256)) (01/16/21) (Harshavardhana)

 Assets
2

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_4a7670fe_20250114_190803.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fsecurity%2Fadvisories%2FGHSA-m4qq-5f7c-693q)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fsecurity%2Fadvisories%2FGHSA-m4qq-5f7c-693q)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=minio%2Fminio)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[minio](/minio)
/
**[minio](/minio/minio)**
Public

* [Notifications](/login?return_to=%2Fminio%2Fminio) You must be signed in to change notification settings
* [Fork
  5.6k](/login?return_to=%2Fminio%2Fminio)
* [Star
   49.4k](/login?return_to=%2Fminio%2Fminio)

* [Code](/minio/minio)
* [Issues
  23](/minio/minio/issues)
* [Pull requests
  11](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

Additional navigation options

* [Code](/minio/minio)
* [Issues](/minio/minio/issues)
* [Pull requests](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

# MinIO Browser API SSRF vulnerability

Moderate

[harshavardhana](/harshavardhana)
published
GHSA-m4qq-5f7c-693q
Jan 30, 2021

## Package

No package listed

## Affected versions

>= RELEASE.2019-12-17T23-16-33Z

## Patched versions

RELEASE.2021-01-30T00-20-58Z

## Description

Thanks to [@phith0n](https://github.com/phith0n) from our community upon a code review, discovered an SSRF (Server Side Request Forgery) in our Browser API implementation. We have not observed this report/attack in the wild or reported elsewhere in the community at large.

All users are advised to upgrade ASAP.

### Impact

The target application may have functionality for importing data from a URL, publishing data to a URL, or otherwise reading data from a URL that can be tampered with. The attacker modifies the calls to this functionality by supplying a completely different URL or by manipulating how URLs are built (path traversal etc.).

In a Server-Side Request Forgery (SSRF) attack, the attacker can abuse functionality on the server to read or update internal resources. The attacker can supply or modify a URL which the code running on the server will read or submit data, and by carefully selecting the URLs, the attacker may be able to read server configuration such as AWS metadata, connect to internal services like HTTP enabled databases, or perform post requests towards internal services which are not intended to be exposed.

### Patches

This issue was fixed by PR [#11337](https://github.com/minio/minio/pull/11337), users should upgrade to RELEASE.2021-01-30T00-20-58Z for the fix.

### Workarounds

You can disable the browser front-end with `MINIO_BROWSER=off` environment variable.

### Binary Download

Please download the latest server binary that contains the fix from

| Platform | Architecture | URL |
| --- | --- | --- |
| Apple macOS | 64-bit Intel | <https://dl.min.io/server/minio/release/darwin-amd64/minio> |
| GNU/Linux | 64-bit Intel | <https://dl.min.io/server/minio/release/linux-amd64/minio> |
| Microsoft Windows | 64-bit | <https://dl.min.io/server/minio/release/windows-amd64/minio.exe> |

For all other architectures please visit <https://min.io/download>

### Docker Container Download

```
docker pull minio/minio:RELEASE.2021-01-30T00-20-58Z

```
### Questions

If you have any questions or comments regarding this advisory please reach out to us through any of the following means.

* If you are a community user [minio/minio](https://github.com/minio/minio/issues)
* Email us at security@min.io
* If you are a paid customer please open an issue at <https://subnet.min.io>

### Severity

Moderate

### CVE ID

CVE-2021-21287

### Weaknesses

No CWEs

### Credits

* [![@Alevsk](https://avatars.githubusercontent.com/u/1795553?s=40&v=4)](/Alevsk)
  [Alevsk](/Alevsk)
  Analyst
* [![@aead](https://avatars.githubusercontent.com/u/20368805?s=40&v=4)](/aead)
  [aead](/aead)
  Analyst
* [![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&v=4)](/harshavardhana)
  [harshavardhana](/harshavardhana)
  Analyst
* [![@phith0n](https://avatars.githubusercontent.com/u/5711185?s=40&v=4)](/phith0n)
  [phith0n](/phith0n)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


