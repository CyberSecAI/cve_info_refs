=== Content from github.com_91183069_20250114_224426.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fcommit%2F039f59b552319fcc2f83631bb421a7d4b82bc482)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fcommit%2F039f59b552319fcc2f83631bb421a7d4b82bc482)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=minio%2Fminio)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[minio](/minio)
/
**[minio](/minio/minio)**
Public

* [Notifications](/login?return_to=%2Fminio%2Fminio) You must be signed in to change notification settings
* [Fork
  5.6k](/login?return_to=%2Fminio%2Fminio)
* [Star
   49.4k](/login?return_to=%2Fminio%2Fminio)

* [Code](/minio/minio)
* [Issues
  22](/minio/minio/issues)
* [Pull requests
  10](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

Additional navigation options

* [Code](/minio/minio)
* [Issues](/minio/minio/issues)
* [Pull requests](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

## Commit

[Permalink](/minio/minio/commit/039f59b552319fcc2f83631bb421a7d4b82bc482)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

fix: missing user policy enforcement in PostPolicyHandler ([#11682](https://github.com/minio/minio/pull/11682))

[Browse files](/minio/minio/tree/039f59b552319fcc2f83631bb421a7d4b82bc482)
Browse the repository at this point in the history

* Loading branch information

[![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&v=4)](/harshavardhana)

[harshavardhana](/minio/minio/commits?author=harshavardhana "View all commits by harshavardhana")
authored
Mar 3, 2021

1 parent
[c6a120d](/minio/minio/commit/c6a120df0ed21efc10dc841e562fa7b6f845e5b0)

commit 039f59b

 Show file tree

 Hide file tree

Showing
**6 changed files**
with
**63 additions**
and
**24 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* cmd

  + cmd/auth-handler.go
    [auth-handler.go](#diff-da28a0c0b4e726eabd4cc316dedb9d6e86e2dfff586047857aa43864cdebb0d5)
  + cmd/bucket-handlers.go
    [bucket-handlers.go](#diff-be8383605d637cd937d113f6baf42a205379935d376ecf1afdd1b631325d9e4a)
  + cmd/signature-v2.go
    [signature-v2.go](#diff-c3b2e1812b59e99f705aebaf77be5c835f47fbe3fb2f76345b26c8afc378cf4a)
  + cmd/signature-v2\_test.go
    [signature-v2\_test.go](#diff-956126b7b49c7a64c8740afb7650782ac89a1aaba9743084f7abbdd41c7c6179)
  + cmd/signature-v4.go
    [signature-v4.go](#diff-0b7db5b598bd6d265b3615af5769500bb2eab5ff5639605d4ffa4de7f8645afb)
  + cmd/signature-v4\_test.go
    [signature-v4\_test.go](#diff-03c24040da0e58ea4d6df265937a66177bef6d5eb058aa9a3a93c30f35d03826)

## There are no files selected for viewing

8 changes: 4 additions & 4 deletions

8
[cmd/auth-handler.go](#diff-da28a0c0b4e726eabd4cc316dedb9d6e86e2dfff586047857aa43864cdebb0d5 "cmd/auth-handler.go")

Show comments

[View file](/minio/minio/blob/039f59b552319fcc2f83631bb421a7d4b82bc482/cmd/auth-handler.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -185,12 +185,12 @@ func getSessionToken(r \*http.Request) (token string) { |
|  |  | // Fetch claims in the security token returned by the client, doesn't return |
|  |  | // errors - upon errors the returned claims map will be empty. |
|  |  | func mustGetClaimsFromToken(r \*http.Request) map[string]interface{} { |
|  |  | claims, \_ := getClaimsFromToken(r, getSessionToken(r)) |
|  |  | claims, \_ := getClaimsFromToken(getSessionToken(r)) |
|  |  | return claims |
|  |  | } |
|  |  |  |
|  |  | // Fetch claims in the security token returned by the client. |
|  |  | func getClaimsFromToken(r \*http.Request, token string) (map[string]interface{}, error) { |
|  |  | func getClaimsFromToken(token string) (map[string]interface{}, error) { |
|  |  | claims := xjwt.NewMapClaims() |
|  |  | if token == "" { |
|  |  | return claims.Map(), nil |
| Expand Down  Expand Up | | @@ -237,7 +237,7 @@ func getClaimsFromToken(r \*http.Request, token string) (map[string]interface{}, |
|  |  | if err != nil { |
|  |  | // Base64 decoding fails, we should log to indicate |
|  |  | // something is malforming the request sent by client. |
|  |  | logger.LogIf(r.Context(), err, logger.Application) |
|  |  | logger.LogIf(GlobalContext, err, logger.Application) |
|  |  | return nil, errAuthentication |
|  |  | } |
|  |  | claims.MapClaims[iampolicy.SessionPolicyName] = string(spBytes) |
| Expand All | | @@ -258,7 +258,7 @@ func checkClaimsFromToken(r \*http.Request, cred auth.Credentials) (map[string]in |
|  |  | if subtle.ConstantTimeCompare([]byte(token), []byte(cred.SessionToken)) != 1 { |
|  |  | return nil, ErrInvalidToken |
|  |  | } |
|  |  | claims, err := getClaimsFromToken(r, token) |
|  |  | claims, err := getClaimsFromToken(token) |
|  |  | if err != nil { |
|  |  | return nil, toAPIErrorCode(r.Context(), err) |
|  |  | } |
| Expand Down | |  |

52 changes: 46 additions & 6 deletions

52
[cmd/bucket-handlers.go](#diff-be8383605d637cd937d113f6baf42a205379935d376ecf1afdd1b631325d9e4a "cmd/bucket-handlers.go")

Show comments

[View file](/minio/minio/blob/039f59b552319fcc2f83631bb421a7d4b82bc482/cmd/bucket-handlers.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -17,6 +17,7 @@ |
|  |  | package cmd |
|  |  |  |
|  |  | import ( |
|  |  | "crypto/subtle" |
|  |  | "encoding/base64" |
|  |  | "encoding/xml" |
|  |  | "fmt" |
| Expand All | | @@ -25,7 +26,6 @@ import ( |
|  |  | "net/textproto" |
|  |  | "net/url" |
|  |  | "path" |
|  |  | "path/filepath" |
|  |  | "sort" |
|  |  | "strconv" |
|  |  | "strings" |
| Expand Down  Expand Up | | @@ -337,7 +337,7 @@ func (api objectAPIHandlers) ListBucketsHandler(w http.ResponseWriter, r \*http.R |
|  |  |  |
|  |  | // err will be nil here as we already called this function |
|  |  | // earlier in this request. |
|  |  | claims, \_ := getClaimsFromToken(r, getSessionToken(r)) |
|  |  | claims, \_ := getClaimsFromToken(getSessionToken(r)) |
|  |  | n := 0 |
|  |  | // Use the following trick to filter in place |
|  |  | // https://github.com/golang/go/wiki/SliceTricks#filter-in-place |
| Expand Down  Expand Up | | @@ -797,13 +797,15 @@ func (api objectAPIHandlers) PostPolicyBucketHandler(w http.ResponseWriter, r \*h |
|  |  | writeErrorResponse(ctx, w, errorCodes.ToAPIErr(ErrMissingContentLength), r.URL, guessIsBrowserReq(r)) |
|  |  | return |
|  |  | } |
|  |  |  |
|  |  | resource, err := getResource(r.URL.Path, r.Host, globalDomainNames) |
|  |  | if err != nil { |
|  |  | writeErrorResponse(ctx, w, errorCodes.ToAPIErr(ErrInvalidRequest), r.URL, guessIsBrowserReq(r)) |
|  |  | return |
|  |  | } |
|  |  | // Make sure that the URL does not contain object name. |
|  |  | if bucket != filepath.Clean(resource[1:]) { |
|  |  |  |
|  |  | // Make sure that the URL does not contain object name. |
|  |  | if bucket != path.Clean(resource[1:]) { |
|  |  | writeErrorResponse(ctx, w, errorCodes.ToAPIErr(ErrMethodNotAllowed), r.URL, guessIsBrowserReq(r)) |
|  |  | return |
|  |  | } |
| Expand Down  Expand Up | | @@ -846,7 +848,6 @@ func (api objectAPIHandlers) PostPolicyBucketHandler(w http.ResponseWriter, r \*h |
|  |  | defer fileBody.Close() |
|  |  |  |
|  |  | formValues.Set("Bucket", bucket) |
|  |  |  |
|  |  | if fileName != "" && strings.Contains(formValues.Get("Key"), "${filename}") { |
|  |  | // S3 feature to replace ${filename} found in Key form field |
|  |  | // by the filename attribute passed in multipart |
| Expand All | | @@ -866,12 +867,51 @@ func (api objectAPIHandlers) PostPolicyBucketHandler(w http.ResponseWriter, r \*h |
|  |  | } |
|  |  |  |
|  |  | // Verify policy signature. |
|  |  | errCode := doesPolicySignatureMatch(formValues) |
|  |  | cred, errCode := doesPolicySignatureMatch(formValues) |
|  |  | if errCode != ErrNone { |
|  |  | writeErrorResponse(ctx, w, errorCodes.ToAPIErr(errCode), r.URL, guessIsBrowserReq(r)) |
|  |  | return |
|  |  | } |
|  |  |  |
|  |  | // Once signature is validated, check if the user has |
|  |  | // explicit permissions for the user. |
|  |  | { |
|  |  | token := formValues.Get(xhttp.AmzSecurityToken) |
|  |  | if token != "" && cred.AccessKey == "" { |
|  |  | writeErrorResponse(ctx, w, errorCodes.ToAPIErr(ErrNoAccessKey), r.URL, guessIsBrowserReq(r)) |
|  |  | return |
|  |  | } |
|  |  |  |
|  |  | if cred.IsServiceAccount() && token == "" { |
|  |  | token = cred.SessionToken |
|  |  | } |
|  |  |  |
|  |  | if subtle.ConstantTimeCompare([]byte(token), []byte(cred.SessionToken)) != 1 { |
|  |  | writeErrorResponse(ctx, w, errorCodes.ToAPIErr(ErrInvalidToken), r.URL, guessIsBrowserReq(r)) |
|  |  | return |
|  |  | } |
|  |  |  |
|  |  | // Extract claims if any. |
|  |  | claims, err := getClaimsFromToken(token) |
|  |  | if err != nil { |
|  |  | writeErrorResponse(ctx, w, toAPIError(ctx, err), r.URL, guessIsBrowserReq(r)) |
|  |  | return |
|  |  | } |
|  |  |  |
|  |  | if !globalIAMSys.IsAllowed(iampolicy.Args{ |
|  |  | AccountName: cred.AccessKey, |
|  |  | Action: iampolicy.PutObjectAction, |
|  |  | ConditionValues: getConditionValues(r, "", cred.AccessKey, claims), |
|  |  | BucketName: bucket, |
|  |  | ObjectName: object, |
|  |  | IsOwner: globalActiveCred.AccessKey == cred.AccessKey, |
|  |  | Claims: claims, |
|  |  | }) { |
|  |  | writeErrorResponse(ctx, w, errorCodes.ToAPIErr(ErrAccessDenied), r.URL, guessIsBrowserReq(r)) |
|  |  | return |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | policyBytes, err := base64.StdEncoding.DecodeString(formValues.Get("Policy")) |
|  |  | if err != nil { |
|  |  | writeErrorResponse(ctx, w, errorCodes.ToAPIErr(ErrMalformedPOSTRequest), r.URL, guessIsBrowserReq(r)) |
| Expand Down | |  |

10 changes: 4 additions & 6 deletions

10
[cmd/signature-v2.go](#diff-c3b2e1812b59e99f705aebaf77be5c835f47fbe3fb2f76345b26c8afc378cf4a "cmd/signature-v2.go")

Show comments

[View file](/minio/minio/blob/039f59b552319fcc2f83631bb421a7d4b82bc482/cmd/signature-v2.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -75,20 +75,18 @@ const ( |
|  |  |  |
|  |  | // AWS S3 Signature V2 calculation rule is give here: |
|  |  | // http://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationStringToSign |
|  |  |  |
|  |  | func doesPolicySignatureV2Match(formValues http.Header) APIErrorCode { |
|  |  | cred := globalActiveCred |
|  |  | func doesPolicySignatureV2Match(formValues http.Header) (auth.Credentials, APIErrorCode) { |
|  |  | accessKey := formValues.Get(xhttp.AmzAccessKeyID) |
|  |  | cred, \_, s3Err := checkKeyValid(accessKey) |
|  |  | if s3Err != ErrNone { |
|  |  | return s3Err |
|  |  | return cred, s3Err |
|  |  | } |
|  |  | policy := formValues.Get("Policy") |
|  |  | signature := formValues.Get(xhttp.AmzSignatureV2) |
|  |  | if !compareSignatureV2(signature, calculateSignatureV2(policy, cred.SecretKey)) { |
|  |  | return ErrSignatureDoesNotMatch |
|  |  | return cred, ErrSignatureDoesNotMatch |
|  |  | } |
|  |  | return ErrNone |
|  |  | return cred, ErrNone |
|  |  | } |
|  |  |  |
|  |  | // Escape encodedQuery string into unescaped list of query params, returns error |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[cmd/signature-v2\_test.go](#diff-956126b7b49c7a64c8740afb7650782ac89a1aaba9743084f7abbdd41c7c6179 "cmd/signature-v2_test.go")

Show comments

[View file](/minio/minio/blob/039f59b552319fcc2f83631bb421a7d4b82bc482/cmd/signature-v2_test.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -265,7 +265,7 @@ func TestDoesPolicySignatureV2Match(t \*testing.T) { |
|  |  | formValues.Set("Awsaccesskeyid", test.accessKey) |
|  |  | formValues.Set("Signature", test.signature) |
|  |  | formValues.Set("Policy", test.policy) |
|  |  | errCode := doesPolicySignatureV2Match(formValues) |
|  |  | \_, errCode := doesPolicySignatureV2Match(formValues) |
|  |  | if errCode != test.errCode { |
|  |  | t.Fatalf("(%d) expected to get %s, instead got %s", i+1, niceError(test.errCode), niceError(errCode)) |
|  |  | } |
| Expand Down | |  |

13 changes: 7 additions & 6 deletions

13
[cmd/signature-v4.go](#diff-0b7db5b598bd6d265b3615af5769500bb2eab5ff5639605d4ffa4de7f8645afb "cmd/signature-v4.go")

Show comments

[View file](/minio/minio/blob/039f59b552319fcc2f83631bb421a7d4b82bc482/cmd/signature-v4.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -39,6 +39,7 @@ import ( |
|  |  | "github.com/minio/minio-go/v7/pkg/s3utils" |
|  |  | "github.com/minio/minio-go/v7/pkg/set" |
|  |  | xhttp "github.com/minio/minio/cmd/http" |
|  |  | "github.com/minio/minio/pkg/auth" |
|  |  | ) |
|  |  |  |
|  |  | // AWS Signature Version '4' constants. |
| Expand Down  Expand Up | | @@ -149,7 +150,7 @@ func getSignature(signingKey []byte, stringToSign string) string { |
|  |  | } |
|  |  |  |
|  |  | // Check to see if Policy is signed correctly. |
|  |  | func doesPolicySignatureMatch(formValues http.Header) APIErrorCode { |
|  |  | func doesPolicySignatureMatch(formValues http.Header) (auth.Credentials, APIErrorCode) { |
|  |  | // For SignV2 - Signature field will be valid |
|  |  | if \_, ok := formValues["Signature"]; ok { |
|  |  | return doesPolicySignatureV2Match(formValues) |
| Expand All | | @@ -169,19 +170,19 @@ func compareSignatureV4(sig1, sig2 string) bool { |
|  |  | // doesPolicySignatureMatch - Verify query headers with post policy |
|  |  | // - http://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-HTTPPOSTConstructPolicy.html |
|  |  | // returns ErrNone if the signature matches. |
|  |  | func doesPolicySignatureV4Match(formValues http.Header) APIErrorCode { |
|  |  | func doesPolicySignatureV4Match(formValues http.Header) (auth.Credentials, APIErrorCode) { |
|  |  | // Server region. |
|  |  | region := globalServerRegion |
|  |  |  |
|  |  | // Parse credential tag. |
|  |  | credHeader, s3Err := parseCredentialHeader("Credential="+formValues.Get(xhttp.AmzCredential), region, serviceS3) |
|  |  | if s3Err != ErrNone { |
|  |  | return s3Err |
|  |  | return auth.Credentials{}, s3Err |
|  |  | } |
|  |  |  |
|  |  | cred, \_, s3Err := checkKeyValid(credHeader.accessKey) |
|  |  | if s3Err != ErrNone { |
|  |  | return s3Err |
|  |  | return cred, s3Err |
|  |  | } |
|  |  |  |
|  |  | // Get signing key. |
| Expand All | | @@ -192,11 +193,11 @@ func doesPolicySignatureV4Match(formValues http.Header) APIErrorCode { |
|  |  |  |
|  |  | // Verify signature. |
|  |  | if !compareSignatureV4(newSignature, formValues.Get(xhttp.AmzSignature)) { |
|  |  | return ErrSignatureDoesNotMatch |
|  |  | return cred, ErrSignatureDoesNotMatch |
|  |  | } |
|  |  |  |
|  |  | // Success. |
|  |  | return ErrNone |
|  |  | return cred, ErrNone |
|  |  | } |
|  |  |  |
|  |  | // doesPresignedSignatureMatch - Verify query headers with presigned signature |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[cmd/signature-v4\_test.go](#diff-03c24040da0e58ea4d6df265937a66177bef6d5eb058aa9a3a93c30f35d03826 "cmd/signature-v4_test.go")

Show comments

[View file](/minio/minio/blob/039f59b552319fcc2f83631bb421a7d4b82bc482/cmd/signature-v4_test.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -84,7 +84,7 @@ func TestDoesPolicySignatureMatch(t \*testing.T) { |
|  |  |  |
|  |  | // Run each test case individually. |
|  |  | for i, testCase := range testCases { |
|  |  | code := doesPolicySignatureMatch(testCase.form) |
|  |  | \_, code := doesPolicySignatureMatch(testCase.form) |
|  |  | if code != testCase.expected { |
|  |  | t.Errorf("(%d) expected to get %s, instead got %s", i, niceError(testCase.expected), niceError(code)) |
|  |  | } |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `039f59b`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fcommit%2F039f59b552319fcc2f83631bb421a7d4b82bc482) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_da46088e_20250114_224428.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fsecurity%2Fadvisories%2FGHSA-hq5j-6r98-9m8v)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fsecurity%2Fadvisories%2FGHSA-hq5j-6r98-9m8v)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=minio%2Fminio)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[minio](/minio)
/
**[minio](/minio/minio)**
Public

* [Notifications](/login?return_to=%2Fminio%2Fminio) You must be signed in to change notification settings
* [Fork
  5.6k](/login?return_to=%2Fminio%2Fminio)
* [Star
   49.4k](/login?return_to=%2Fminio%2Fminio)

* [Code](/minio/minio)
* [Issues
  22](/minio/minio/issues)
* [Pull requests
  10](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

Additional navigation options

* [Code](/minio/minio)
* [Issues](/minio/minio/issues)
* [Pull requests](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

# Bypassing readOnly policy by creating a temporary 'mc share upload' URL

Moderate

[harshavardhana](/harshavardhana)
published
GHSA-hq5j-6r98-9m8v
Mar 4, 2021

## Package

MinIO

## Affected versions

< RELEASE.2021-03-04T00-53-13Z

## Patched versions

RELEASE.2021-03-04T00-53-13Z

## Description

### Impact

Everyone is impacted who uses MinIO multi-users.

### Patches

Users are advised to upgrade to RELEASE.2021-03-04T00-53-13Z to fix this problem.

The problem is sufficiently addressed by this PR [#11682](https://github.com/minio/minio/pull/11682)

### Workarounds

Disable uploads with `Content-Type: multipart/form-data` as mentioned in the S3 API <https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPOST.html> by using a proxy in front of MinIO.

### References

This issue was directly reported to us at security@minio.io and successfully reproduced by [@vonera](https://github.com/vonera)

### For more information

If you have any questions or comments about this advisory:

* Open an issue <https://github.com/minio/minio/issues>
* Email us at security

### Severity

Moderate

### CVE ID

CVE-2021-21362

### Weaknesses

No CWEs

### Credits

* [![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&v=4)](/harshavardhana)
  [harshavardhana](/harshavardhana)
  Analyst
* [![@vonera](https://avatars.githubusercontent.com/u/155880?s=40&v=4)](/vonera)
  [vonera](/vonera)
  Analyst

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_75b98f20_20250114_224427.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fpull%2F11682)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fpull%2F11682)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=minio%2Fminio)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[minio](/minio)
/
**[minio](/minio/minio)**
Public

* [Notifications](/login?return_to=%2Fminio%2Fminio) You must be signed in to change notification settings
* [Fork
  5.6k](/login?return_to=%2Fminio%2Fminio)
* [Star
   49.4k](/login?return_to=%2Fminio%2Fminio)

* [Code](/minio/minio)
* [Issues
  22](/minio/minio/issues)
* [Pull requests
  10](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

Additional navigation options

* [Code](/minio/minio)
* [Issues](/minio/minio/issues)
* [Pull requests](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fminio%2Fminio%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fminio%2Fminio%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# fix: missing user policy enforcement in PostPolicyHandler #11682

 Merged

[harshavardhana](/harshavardhana)
merged 1 commit into
[minio:master](/minio/minio/tree/master "minio/minio:master")
from
[harshavardhana:policy-enforcement](/harshavardhana/minio/tree/policy-enforcement "harshavardhana/minio:policy-enforcement")

Mar 3, 2021

 Merged

# [fix: missing user policy enforcement in PostPolicyHandler](#top) #11682

[harshavardhana](/harshavardhana)
merged 1 commit into
[minio:master](/minio/minio/tree/master "minio/minio:master")
from
[harshavardhana:policy-enforcement](/harshavardhana/minio/tree/policy-enforcement "harshavardhana/minio:policy-enforcement")

Mar 3, 2021

[Conversation
8](/minio/minio/pull/11682)
[Commits
1](/minio/minio/pull/11682/commits)
[Checks
0](/minio/minio/pull/11682/checks)
[Files changed](/minio/minio/pull/11682/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![harshavardhana](https://avatars.githubusercontent.com/u/622699?s=60&v=4)](/harshavardhana)

Copy link

Member

### @harshavardhana **[harshavardhana](/harshavardhana)** commented [Mar 2, 2021](#issue-820304008)

## Description

fix: missing user policy enforcement in PostPolicyHandler

## Motivation and Context

PostPolicyHandler did not honor the user policies

## How to test this PR?

Manually using

```
mc alias set nio http://127.0.0.1:9000 nio_admin nio_admin

mc mb nio/mybucket

mc admin user add nio alice alice123
mc alias set nio_alice http://127.0.0.1:9000 alice alice123
```

```
cat > r_mybucket.json << EOF
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Action": [
                "s3:ListBucket",
                "s3:GetObject"
            ],
            "Effect": "Allow",
            "Resource": [
                "arn:aws:s3:::mybucket/*"
            ]
        }
    ]
}
EOF
```

```
mc admin policy add nio rMybucket r_mybucket.json
mc admin policy set nio rMybucket user=alice

mc ls nio_alice/mybucket
mc cp file.png nio_alice/mybucket/
>> mc: <ERROR> Failed to copy `file.png`. Insufficient permissions to access  this file `http://127.0.0.1:9000/mybucket/file.png`

```

**crucial part**

```
mc share upload  --expire 10m nio_alice/mybucket/file.png
#> URL: http://127.0.0.1:9000/mybucket/file.png
#> Expire: 10 minutes 0 seconds
#> Share: curl http://127.0.0.1:9000/mybucket/ -F x-amz-algorithm=AWS4-HMAC-SHA256 -F x-amz-credential=alice/20210216/us-east-1/s3/aws4_request -F x-amz-date=20210216T132315Z -F x-amz-signature=8ec77bb40ab98baa711aded91bf0e79827fb0335820789e95f03db6be29d57e3 -F bucket=mybucket -F policy=eyJleHBpcmF0aW9uIjoiMjAyMS0wMi0xNlQxMzozMzoxNS4wMTdaIiwiY29uZGl0aW9ucyI6W1siZXEiLCIkYnVja2V0IiwibXlidWNrZXQiXSxbImVxIiwiJGtleSIsImZpbGUucG5nIl0sWyJlcSIsIiR4LWFtei1kYXRlIiwiMjAyMTAyMTZUMTMyMzE1WiJdLFsiZXEiLCIkeC1hbXotYWxnb3JpdGhtIiwiQVdTNC1ITUFDLVNIQTI1NiJdLFsiZXEiLCIkeC1hbXotY3JlZGVudGlhbCIsImFsaWNlLzIwMjEwMjE2L3VzLWVhc3QtMS9zMy9hd3M0X3JlcXVlc3QiXV19 -F key=file.png -F file=@<FILE>

curl http://127.0.0.1:9000/mybucket/ -F x-amz-algorithm=AWS4-HMAC-SHA256 -F x-amz-credential=alice/20210216/us-east-1/s3/aws4_request -F x-amz-date=20210216T132315Z -F x-amz-signature=8ec77bb40ab98baa711aded91bf0e79827fb0335820789e95f03db6be29d57e3 -F bucket=mybucket -F policy=eyJleHBpcmF0aW9uIjoiMjAyMS0wMi0xNlQxMzozMzoxNS4wMTdaIiwiY29uZGl0aW9ucyI6W1siZXEiLCIkYnVja2V0IiwibXlidWNrZXQiXSxbImVxIiwiJGtleSIsImZpbGUucG5nIl0sWyJlcSIsIiR4LWFtei1kYXRlIiwiMjAyMTAyMTZUMTMyMzE1WiJdLFsiZXEiLCIkeC1hbXotYWxnb3JpdGhtIiwiQVdTNC1ITUFDLVNIQTI1NiJdLFsiZXEiLCIkeC1hbXotY3JlZGVudGlhbCIsImFsaWNlLzIwMjEwMjE2L3VzLWVhc3QtMS9zMy9hd3M0X3JlcXVlc3QiXV19 -F key=file.png -F file=@file.png

mc ls nio_alice/mybucket
[2021-02-16 14:23:42 CET] 135KiB file.png
```
## Types of changes

* Bug fix (non-breaking change which fixes an issue)
* New feature (non-breaking change which adds functionality)
* Optimization (provides speedup with no functional changes)
* Breaking change (fix or feature that would cause existing functionality to change)

## Checklist:

* Fixes a regression (If yes, please add `commit-id` or `PR #` here)
* Documentation updated
* Unit tests added/updated

Sorry, something went wrong.

All reactions

 [![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
requested review from
[aead](/aead) and
[Alevsk](/Alevsk)
[March 2, 2021 19:21](#event-4397674546)

[![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
added
the
[priority: high](/minio/minio/labels/priority%3A%20high)
label
[Mar 2, 2021](#event-4397723700)

 [![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
requested a review
from [vadmeste](/vadmeste)
[March 2, 2021 19:34](#event-4397732003)

[![vadmeste](https://avatars.githubusercontent.com/u/283197?s=60&v=4)](/vadmeste)

**[vadmeste](/vadmeste)**
reviewed
[Mar 2, 2021](#pullrequestreview-602213284)

 [View reviewed changes](/minio/minio/pull/11682/files)

Copy link

Member

### @vadmeste **[vadmeste](/vadmeste)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Some comments

Sorry, something went wrong.

All reactions

[cmd/bucket-handlers.go](/minio/minio/pull/11682/files#diff-be8383605d637cd937d113f6baf42a205379935d376ecf1afdd1b631325d9e4a)

Show resolved

Hide resolved

[cmd/bucket-handlers.go](/minio/minio/pull/11682/files#diff-be8383605d637cd937d113f6baf42a205379935d376ecf1afdd1b631325d9e4a)

Show resolved

Hide resolved

 [![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
requested a review
from [vadmeste](/vadmeste)
[March 2, 2021 20:06](#event-4397867504)

[![Alevsk](https://avatars.githubusercontent.com/u/1795553?s=60&v=4)](/Alevsk)

**[Alevsk](/Alevsk)**
approved these changes
[Mar 2, 2021](#pullrequestreview-602235189)

 [View reviewed changes](/minio/minio/pull/11682/files)

Copy link

Contributor

### @Alevsk **[Alevsk](/Alevsk)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Tested, works fine

Sorry, something went wrong.

All reactions

[![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&v=4)](/harshavardhana)

`[fix: missing user policy enforcement in PostPolicyHandler](/minio/minio/pull/11682/commits/5d4daadeb3311cca4e883747137e900b48daad17 "fix: missing user policy enforcement in PostPolicyHandler")`

`[5d4daad](/minio/minio/pull/11682/commits/5d4daadeb3311cca4e883747137e900b48daad17)`

 [![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
[force-pushed](/minio/minio/compare/e343bdd2b1616624fc9f788cb990607ca817ebbc..5d4daadeb3311cca4e883747137e900b48daad17)
the
policy-enforcement

branch
from
[`e343bdd`](/minio/minio/commit/e343bdd2b1616624fc9f788cb990607ca817ebbc) to
[`5d4daad`](/minio/minio/commit/5d4daadeb3311cca4e883747137e900b48daad17)  [Compare](/minio/minio/compare/e343bdd2b1616624fc9f788cb990607ca817ebbc..5d4daadeb3311cca4e883747137e900b48daad17)
[March 3, 2021 00:18](#event-4398760333)

[![@minio-trusted](https://avatars.githubusercontent.com/u/21070888?s=80&u=dea40fc2b755017ae911f9fca3f94d09f111aef7&v=4)](/minio-trusted)

Copy link

Contributor

### **[minio-trusted](/minio-trusted)** commented [Mar 3, 2021](#issuecomment-789332248)

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Mint Automation  | Test | Result | | --- | --- | | mint-large-bucket.sh | ✔️ | | mint-fs.sh | ✔️ | | mint-gateway-s3.sh | ✔️ | | mint-erasure.sh | ✔️ | | mint-dist-erasure.sh | ✔️ | | mint-zoned.sh | ✔️ | | mint-gateway-nas.sh | ❌ [more...](#2e844d4f-6ded-4e85-a2b7-1f0f18c666b2) | | mint-compress-encrypt-dist-erasure.sh | ❌ [more...](#923115fb-f10a-40fa-a688-67b177370777) | |  |  |  11682-5d4daad/mint-compress-encrypt-dist-erasure.sh.log: ``` Running with SERVER_ENDPOINT:      minio-c3.minio.io:32226 ACCESS_KEY:           minio SECRET_KEY:           ***REDACTED*** ENABLE_HTTPS:         0 SERVER_REGION:        us-east-1 MINT_DATA_DIR:        /mint/data MINT_MODE:            full ENABLE_VIRTUAL_STYLE: 0  To get logs, run 'docker cp f8e9ed17ef08:/mint/log /tmp/mint-logs'  (1/15) Running aws-sdk-go tests ... done in 2 seconds (2/15) Running aws-sdk-java tests ... done in 1 seconds (3/15) Running aws-sdk-php tests ... done in 43 seconds (4/15) Running aws-sdk-ruby tests ... done in 4 seconds (5/15) Running awscli tests ... FAILED in 32 seconds {   "name": "awscli",   "duration": 2594,   "function": "aws --endpoint-url http://minio-c3.minio.io:32226 s3api copy-object --bucket awscli-mint-test-bucket-17628 --key datafile-1-kB-copy --copy-source awscli-mint-test-bucket-17628/datafile-1-kB\n",   "status": "FAIL",   "error": "Hash mismatch expected 084e1383b70fb0c51acc680fef370023, got ac57de7156d7fc25ac1a65f81fa3989b" } (5/15) Running healthcheck tests ... done in 1 seconds (6/15) Running mc tests ... done in 50 seconds (7/15) Running minio-dotnet tests ... done in 48 seconds (8/15) Running minio-go tests ... FAILED in 2 minutes and 42 seconds {   "args": {     "destination": {       "Bucket": "minio-go-test-tlbgqrfnwx42d20n",       "Object": "dstObject",       "Encryption": {},       "UserMetadata": null,       "ReplaceMetadata": false,       "UserTags": null,       "ReplaceTags": false,       "LegalHold": "",       "Mode": "",       "RetainUntilDate": "0001-01-01T00:00:00Z",       "Size": 0,       "Progress": null     },     "source": {       "Bucket": "minio-go-test-tlbgqrfnwx42d20n",       "Object": "srcObject",       "VersionID": "",       "MatchETag": "",       "NoMatchETag": "",       "MatchModifiedSince": "0001-01-01T00:00:00Z",       "MatchUnmodifiedSince": "0001-01-01T00:00:00Z",       "MatchRange": false,       "Start": 0,       "End": 0,       "Encryption": null     }   },   "duration": 7896,   "error": "We encountered an internal error, please try again.: cause(s2: corrupt input)",   "function": "CopyObject(destination, source)",   "message": "GetObject failed",   "name": "minio-go: testUnencryptedToSSES3CopyObject",   "status": "FAIL" } (8/15) Running minio-java tests ... FAILED in 1 minutes and 37 seconds {   "name": "minio-java",   "function": "copyObject()",   "args": "[match etag]",   "duration": 329,   "status": "FAIL",   "error": "error occurred\nErrorResponse(code = PreconditionFailed, message = At least one of the pre-conditions you specified did not hold, bucketName = minio-java-test-2qelgi6, objectName = minio-java-test-189pp9-copy, resource = /minio-java-test-2qelgi6/minio-java-test-189pp9-copy, requestId = 1668ADC9E824BCD8, hostId = 22b9e7dd-e361-4da7-9000-a08ee0af4e95)\nrequest={method=PUT, url=http://minio-c3.minio.io:32226/minio-java-test-2qelgi6/minio-java-test-189pp9-copy, headers=x-amz-copy-source-if-match: 71cff0a060f852067e443ad1e24ae26c-1\nx-amz-copy-source: /minio-java-test-4oqb3i/minio-java-test-189pp9\nHost: minio-c3.minio.io:32226\nAccept-Encoding: identity\nUser-Agent: MinIO (Linux; amd64) minio-java/8.0.3\nContent-MD5: 1B2M2Y8AsgTpgAmY7PhCfg==\nx-amz-content-sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\nx-amz-date: 20210303T003229Z\nAuthorization: AWS4-HMAC-SHA256 Credential=*REDACTED*/20210303/us-east-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-copy-source;x-amz-copy-source-if-match;x-amz-date, Signature=*REDACTED*\n}\nresponse={code=412, headers=Accept-Ranges: bytes\nContent-Length: 416\nContent-Security-Policy: block-all-mixed-content\nContent-Type: application/xml\nETag: \"71cff0a060f852067e443ad1e24ae26c\"\nLast-Modified: Wed, 03 Mar 2021 00:32:28 GMT\nServer: MinIO\nVary: Origin\nX-Amz-Request-Id: 1668ADC9E824BCD8\nX-Xss-Protection: 1; mode=block\nDate: Wed, 03 Mar 2021 00:32:29 GMT\n}\n >>> [io.minio.MinioClient.execute(MinioClient.java:775), io.minio.MinioClient.execute(MinioClient.java:563), io.minio.MinioClient.executePut(MinioClient.java:904), io.minio.MinioClient.copyObject(MinioClient.java:1232), FunctionalTest.testCopyObjectMatchETag(FunctionalTest.java:1850), FunctionalTest.copyObject(FunctionalTest.java:2016), FunctionalTest.runObjectTests(FunctionalTest.java:3757), FunctionalTest.runTests(FunctionalTest.java:3783), FunctionalTest.main(FunctionalTest.java:3927)]" } (8/15) Running minio-js tests ... done in 53 seconds (9/15) Running minio-py tests ... done in 3 minutes and 13 seconds (10/15) Running s3cmd tests ... FAILED in 6 seconds {   "name": "s3cmd",   "duration": "3111",   "function": "test_put_object_multipart",   "status": "FAIL",   "error": "WARNING: MD5 Sums don't match!\nWARNING: Retrying upload of /mint/data/datafile-65-MB\nWARNING: MD5 Sums don't match!\nWARNING: Retrying upload of /mint/data/datafile-65-MB\nWARNING: MD5 Sums don't match!\nWARNING: Retrying upload of /mint/data/datafile-65-MB\nWARNING: MD5 Sums don't match!\nWARNING: Retrying upload of /mint/data/datafile-65-MB\nWARNING: MD5 Sums don't match!\nWARNING: Retrying upload of /mint/data/datafile-65-MB\nWARNING: MD5 Sums don't match!\nWARNING: Too many failures. Giving up on '/mint/data/datafile-65-MB'\nERROR: \nUpload of '/mint/data/datafile-65-MB' part 1 failed. Use\n  /usr/local/bin/s3cmd abortmp s3://s3cmd-test-bucket-26109/s3cmd-test-object-13780 497ce7fc-f1fa-43d2-aea3-0d0a1294cda7\nto abort the upload, or\n  /usr/local/bin/s3cmd --upload-id 497ce7fc-f1fa-43d2-aea3-0d0a1294cda7 put ...\nto continue the upload.\nERROR: Upload of '/mint/data/datafile-65-MB' failed too many times (Last reason: )" } (10/15) Running s3select tests ... done in 7 seconds (11/15) Running security tests ... done in 0 seconds  Executed 11 out of 15 tests successfully.  ```   11682-5d4daad/mint-gateway-nas.sh.log: ``` Running with SERVER_ENDPOINT:      minio-dev6.minio.io:31689 ACCESS_KEY:           minio SECRET_KEY:           ***REDACTED*** ENABLE_HTTPS:         0 SERVER_REGION:        us-east-1 MINT_DATA_DIR:        /mint/data MINT_MODE:            full ENABLE_VIRTUAL_STYLE: 0  To get logs, run 'docker cp 5afe0018f2b7:/mint/log /tmp/mint-logs'  (1/15) Running aws-sdk-go tests ... done in 0 seconds (2/15) Running aws-sdk-java tests ... done in 2 seconds (3/15) Running aws-sdk-php tests ... done in 41 seconds (4/15) Running aws-sdk-ruby tests ... done in 2 seconds (5/15) Running awscli tests ... done in 1 minutes and 9 seconds (6/15) Running healthcheck tests ... done in 1 seconds (7/15) Running mc tests ... done in 44 seconds (8/15) Running minio-dotnet tests ... done in 35 seconds (9/15) Running minio-go tests ... done in 1 minutes and 36 seconds (10/15) Running minio-java tests ... done in 12 seconds (11/15) Running minio-js tests ... done in 43 seconds (12/15) Running minio-py tests ... FAILED in 1 minutes and 0 seconds {   "name": "minio-py:test_presigned_get_object_expiry",   "status": "FAIL",   "args": {     "bucket_name": "minio-py-test-f43ce1ac-2fb3-490e-96e1-e8a9f2e93ae1",     "object_name": "3971a2ca-8a3b-4840-9be1-9d91718325fa",     "presigned_get_object_url": "http://minio-dev6.minio.io:31689/minio-py-test-f43ce1ac-2fb3-490e-96e1-e8a9f2e93ae1/3971a2ca-8a3b-4840-9be1-9d91718325fa?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=minio%2F20210303%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20210303T003154Z&X-Amz-Expires=120&X-Amz-SignedHeaders=host&X-Amz-Signature=3aac22c536484611b55ef21b295fd3cfbc6bc417272a1c5d9382203d4482487a",     "response.status": 200,     "response.reason": "OK",     "response.headers": "{\"_container\": {\"accept-ranges\": [\"Accept-Ranges\", \"bytes\"], \"content-length\": [\"Content-Length\", \"1024\"], \"content-security-policy\": [\"Content-Security-Policy\", \"block-all-mixed-content\"], \"content-type\": [\"Content-Type\", \"application/octet-stream\"], \"etag\": [\"ETag\", \"\\\"1eeaad3aba4f7d2a5fa4646187d08d6e\\\"\"], \"last-modified\": [\"Last-Modified\", \"Wed, 03 Mar 2021 00:31:52 GMT\"], \"server\": [\"Server\", \"MinIO\"], \"vary\": [\"Vary\", \"Origin\"], \"x-amz-request-id\": [\"X-Amz-Request-Id\", \"1668ADC17B68AFA2\"], \"x-xss-protection\": [\"X-Xss-Protection\", \"1; mode=block\"], \"date\": [\"Date\", \"Wed, 03 Mar 2021 00:31:52 GMT\"]}}",     "response._body": "rfbxycswemzzswlutqeobtfmvqjsxpqgwehgoyhlafplhwojoibmetoriqpcctkuahblmlpmrsjoomjpbkzzaywlpeciwusbqzoxvashaczndbjcnawkyiqhmlmkkqkhiwywbidcjjenfmagutsagmygcucfguzzxjoodncisexayyblqkhkegatibxqhlpcunqyrmoheiyuuprkmwnrjdsivtrlywqypdfveeykgbicrvhyxbtxpwospievhqocxwfnkqnvzewywuxmnvxvrmfqystggfkvvacdsosyvcbdtrlgubsqnkmonxbvqzgcfdhmcbivccsrbqowaahnfjlphzgxgmhwsrruuprvukqgovwdnxugpuzywbkqfejmuoexdhgkdxrvkdlybqbmehkfeyfgaomikqnisoyvqlpfernhivqwkppwpzkhblrliazijvaddlvpnemleraxkclyjzledudjqhejgqdessrqiyfuhplffkxzjgwfmlgzsnizvigkfwkgjsvonottvvqhnesroaztaciuezuyxxkzljxfsjqptzbmruxpnefcrldzzsdbjgjjamgiwzcgfndjezwteoxmdhkoimpbruhtddewvcfhujtfuslncresgxfpninttdkhotjgjvsbeuuprevtdnhtgnblewrijhhfssifinfooufkdnjdscyauktgaptztmowhlcmdhtiyxvzbhjaqcecmpzaywblrmyhidpujwvigclcsnjaxdtaqvdterkupocebdjiqtceiasfltfdozwynjlqpwyakluknbyurubaazdwbsnoxrttazcaxqketcrdjgaeccpamkkdauqpplzyxrxffhlrjskjxtnefjisoqpuufmgyriztvztxhanwbyihofmvlkqgbfwqydwytdgcjjdcmizprxhjqcxpfbzusyyasxblsrrnirgzxwltxfpvwivaaxwnonnigbqhoypmmlhgogaxorvvptukvbmmobdvgblnzms",     "response.status-2": 200,     "response.reason-2": "OK",     "response.headers-2": "{\"_container\": {\"accept-ranges\": [\"Accept-Ranges\", \"bytes\"], \"content-length\": [\"Content-Length\", \"1024\"], \"content-security-policy\": [\"Content-Security-Policy\", \"block-all-mixed-content\"], \"content-type\": [\"Content-Type\", \"application/octet-stream\"], \"etag\": [\"ETag\", \"\\\"1eeaad3aba4f7d2a5fa4646187d08d6e\\\"\"], \"last-modified\": [\"Last-Modified\", \"Wed, 03 Mar 2021 00:31:52 GMT\"], \"server\": [\"Server\", \"MinIO\"], \"vary\": [\"Vary\", \"Origin\"], \"x-amz-request-id\": [\"X-Amz-Request-Id\", \"1668ADC1F325D8F1\"], \"x-xss-protection\": [\"X-Xss-Protection\", \"1; mode=block\"], \"date\": [\"Date\", \"Wed, 03 Mar 2021 00:31:54 GMT\"]}}",     "response._body-2": "rfbxycswemzzswlutqeobtfmvqjsxpqgwehgoyhlafplhwojoibmetoriqpcctkuahblmlpmrsjoomjpbkzzaywlpeciwusbqzoxvashaczndbjcnawkyiqhmlmkkqkhiwywbidcjjenfmagutsagmygcucfguzzxjoodncisexayyblqkhkegatibxqhlpcunqyrmoheiyuuprkmwnrjdsivtrlywqypdfveeykgbicrvhyxbtxpwospievhqocxwfnkqnvzewywuxmnvxvrmfqystggfkvvacdsosyvcbdtrlgubsqnkmonxbvqzgcfdhmcbivccsrbqowaahnfjlphzgxgmhwsrruuprvukqgovwdnxugpuzywbkqfejmuoexdhgkdxrvkdlybqbmehkfeyfgaomikqnisoyvqlpfernhivqwkppwpzkhblrliazijvaddlvpnemleraxkclyjzledudjqhejgqdessrqiyfuhplffkxzjgwfmlgzsnizvigkfwkgjsvonottvvqhnesroaztaciuezuyxxkzljxfsjqptzbmruxpnefcrldzzsdbjgjjamgiwzcgfndjezwteoxmdhkoimpbruhtddewvcfhujtfuslncresgxfpninttdkhotjgjvsbeuuprevtdnhtgnblewrijhhfssifinfooufkdnjdscyauktgaptztmowhlcmdhtiyxvzbhjaqcecmpzaywblrmyhidpujwvigclcsnjaxdtaqvdterkupocebdjiqtceiasfltfdozwynjlqpwyakluknbyurubaazdwbsnoxrttazcaxqketcrdjgaeccpamkkdauqpplzyxrxffhlrjskjxtnefjisoqpuufmgyriztvztxhanwbyihofmvlkqgbfwqydwytdgcjjdcmizprxhjqcxpfbzusyyasxblsrrnirgzxwltxfpvwivaaxwnonnigbqhoypmmlhgogaxorvvptukvbmmobdvgblnzms"   },   "message": "Presigned get url failed to expire!",   "error": "Traceback (most recent call last):\n  File \"/mint/run/core/minio-py/tests.py\", line 126, in _call_test\n    func(log_entry, *args, **kwargs)\n  File \"/mint/run/core/minio-py/tests.py\", line 1364, in test_presigned_get_object_expiry\n    raise ValueError('Presigned get url failed to expire!')\nValueError: Presigned get url failed to expire!\n",   "duration": 2039 } (12/15) Running s3cmd tests ... done in 16 seconds (13/15) Running s3select tests ... done in 4 seconds (14/15) Running security tests ... done in 0 seconds  Executed 14 out of 15 tests successfully.  ```  Deleting image on docker hub Deleting image locally |

All reactions

Sorry, something went wrong.

[![aead](https://avatars.githubusercontent.com/u/20368805?s=60&v=4)](/aead)

**[aead](/aead)**
approved these changes
[Mar 3, 2021](#pullrequestreview-602655891)

 [View reviewed changes](/minio/minio/pull/11682/files/5d4daadeb3311cca4e883747137e900b48daad17)

[![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
merged commit [`039f59b`](/minio/minio/commit/039f59b552319fcc2f83631bb421a7d4b82bc482)
into
minio:master

[Mar 3, 2021](https://github.com/minio/minio/pull/11682#event-4403105969)

 [![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)
[harshavardhana](/harshavardhana)
deleted the
policy-enforcement

branch
[March 3, 2021 16:47](#event-4403106631)

[harshavardhana](/harshavardhana)
added a commit
that referenced
this pull request
[May 18, 2021](#ref-commit-d04201e)
[![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=40&u=1f4e3198b671d70f13407b2e6c14b4885e295a1b&v=4)](/harshavardhana)

`[fix: missing user policy enforcement in PostPolicyHandler (](/minio/minio/commit/d04201e2a6219a35be8da74003de850f59e0a3a8 "fix: missing user policy enforcement in PostPolicyHandler (#11682)")[#11682](https://github.com/minio/minio/pull/11682)[)](/minio/minio/commit/d04201e2a6219a35be8da74003de850f59e0a3a8 "fix: missing user policy enforcement in PostPolicyHandler (#11682)")`

`[d04201e](/minio/minio/commit/d04201e2a6219a35be8da74003de850f59e0a3a8)`

[![@tatianab](https://avatars.githubusercontent.com/u/6238967?s=40&v=4)](/tatianab)
[tatianab](/tatianab)
mentioned this pull request
[Nov 8, 2023](#ref-issue-1984476004)

[x/vulndb: potential Go vuln in github.com/minio/minio: CVE-2021-21362
golang/vulndb#2322](/golang/vulndb/issues/2322)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Fpull%2F11682)

Reviewers

[![@aead](https://avatars.githubusercontent.com/u/20368805?s=40&v=4)](/aead) [aead](/aead)

aead approved these changes

[![@Alevsk](https://avatars.githubusercontent.com/u/1795553?s=40&v=4)](/Alevsk) [Alevsk](/Alevsk)

Alevsk approved these changes

[![@vadmeste](https://avatars.githubusercontent.com/u/283197?s=40&v=4)](/vadmeste) [vadmeste](/vadmeste)

 Awaiting requested review from vadmeste

Assignees

No one assigned

Labels

[priority: high](/minio/minio/labels/priority%3A%20high)

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

5 participants

[![@harshavardhana](https://avatars.githubusercontent.com/u/622699?s=52&v=4)](/harshavardhana) [![@minio-trusted](https://avatars.githubusercontent.com/u/21070888?s=52&v=4)](/minio-trusted) [![@vadmeste](https://avatars.githubusercontent.com/u/283197?s=52&v=4)](/vadmeste) [![@Alevsk](https://avatars.githubusercontent.com/u/1795553?s=52&v=4)](/Alevsk) [![@aead](https://avatars.githubusercontent.com/u/20368805?s=52&v=4)](/aead)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_2d001aea_20250114_224428.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Freleases%2Ftag%2FRELEASE.2021-03-04T00-53-13Z)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fminio%2Fminio%2Freleases%2Ftag%2FRELEASE.2021-03-04T00-53-13Z)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=minio%2Fminio)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[minio](/minio)
/
**[minio](/minio/minio)**
Public

* [Notifications](/login?return_to=%2Fminio%2Fminio) You must be signed in to change notification settings
* [Fork
  5.6k](/login?return_to=%2Fminio%2Fminio)
* [Star
   49.4k](/login?return_to=%2Fminio%2Fminio)

* [Code](/minio/minio/tree/RELEASE.2021-03-04T00-53-13Z)
* [Issues
  22](/minio/minio/issues)
* [Pull requests
  10](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

Additional navigation options

* [Code](/minio/minio/tree/RELEASE.2021-03-04T00-53-13Z)
* [Issues](/minio/minio/issues)
* [Pull requests](/minio/minio/pulls)
* [Discussions](/minio/minio/discussions)
* [Actions](/minio/minio/actions)
* [Security](/minio/minio/security)
* [Insights](/minio/minio/pulse)

1. [Releases](/minio/minio/releases)
2. [RELEASE.2021-03-04T00-53-13Z](/minio/minio/releases/tag/RELEASE.2021-03-04T00-53-13Z)

# Security Bugfix Release

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/minio/minio/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...RELEASE.2021-03-04T00-53-13Z)

 Loading

[View all tags](/minio/minio/tags)

![@minio-trusted](https://avatars.githubusercontent.com/u/21070888?s=40&v=4)
[minio-trusted](/minio-trusted)
released this
04 Mar 03:31

·
[4467 commits](/minio/minio/compare/RELEASE.2021-03-04T00-53-13Z...master)
to master
since this release

[RELEASE.2021-03-04T00-53-13Z](/minio/minio/tree/RELEASE.2021-03-04T00-53-13Z)

This tag was signed with the committer’s **verified signature**.

[![](https://avatars.githubusercontent.com/u/21070888?s=64&v=4)](/minio-trusted)
[minio-trusted](/minio-trusted)

GPG key ID: 12C74390F9AAC728

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

[`c3217bd`](/minio/minio/commit/c3217bd6ebc0ecdad45219d6a46c06a54c4405f2)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

## Highlights

* Click [here](https://min.io/download) to download the latest version of MinIO.
* Click [here](https://min.io/pricing) for production support.
* Bypassing readOnly policy by creating a temporary 'mc share upload' URL fixed by PR [#11682](https://github.com/minio/minio/pull/11682)

  Security advisory published [here](https://github.com/minio/minio/security/advisories/GHSA-hq5j-6r98-9m8v)
* Add support for mTLS with Audit webhook targets.
* Optimizing memory usage for compressed objects.
* Implement [*GetBucketPolicyStatus* API](https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetBucketPolicyStatus.html)

## Changelog

* Use actual size for buffer selection ([#11687](https://github.com/minio/minio/pull/11687)) (03/03/21) (Klaus Post)
* etag: add FromContentMD5 to parse content-md5 as ETag ([#11688](https://github.com/minio/minio/pull/11688)) (03/03/21) (Andreas Auernhammer)
* fix: prometheus metrics disks\_online count when disks are down ([#11689](https://github.com/minio/minio/pull/11689)) (03/03/21) (Harshavardhana)
* Avoid notification event for replicas ([#11683](https://github.com/minio/minio/pull/11683)) (03/03/21) (Poorna Krishnamoorthy)
* fix: missing user policy enforcement in PostPolicyHandler ([#11682](https://github.com/minio/minio/pull/11682)) (03/03/21) (Harshavardhana)
* fix: Prometheus metrics to re-use storage disks ([#11647](https://github.com/minio/minio/pull/11647)) (03/02/21) (Harshavardhana)
* IAM: Block while loading users ([#11671](https://github.com/minio/minio/pull/11671)) (03/02/21) (Klaus Post)
* fix: do not deny admins to change other passwords (03/02/21) (Harshavardhana)
* fix: enforce deny if present for implicit permissions ([#11680](https://github.com/minio/minio/pull/11680)) (03/02/21) (Harshavardhana)
* [feat]: implement GetBucketPolicyStatus API ([#11673](https://github.com/minio/minio/pull/11673)) (03/01/21) (Harshavardhana)
* Add metric for internode RPC calls errors ([#11669](https://github.com/minio/minio/pull/11669)) (03/01/21) (Anis Elleuch)
* Add support for mTLS for Audit log target ([#11645](https://github.com/minio/minio/pull/11645)) (03/01/21) (Nitish Tiwari)
* fix: listObjectVersions Include object in marker ([#11562](https://github.com/minio/minio/pull/11562)) (03/01/21) (Klaus Post)
* fix: pool number not added for one server ([#11670](https://github.com/minio/minio/pull/11670)) (03/01/21) (Shireesh Anjal)
* update gopsutil to use the v3 API ([#11638](https://github.com/minio/minio/pull/11638)) (03/01/21) (Harshavardhana)
* Add PoolNumber field to madmin.ServerProperties ([#11327](https://github.com/minio/minio/pull/11327)) (03/01/21) (Bala FA)

 Assets
2

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


