=== Content from gitlab.com_1a1f06b9_20250114_202059.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

* [cves](/gitlab-org/cves/-/tree/master)
* [2021](/gitlab-org/cves/-/tree/master/2021)
* [**CVE-2021-22229.json**](/gitlab-org/cves/-/blob/master/2021/CVE-2021-22229.json)

Find file

[Blame](/gitlab-org/cves/-/blame/master/2021/CVE-2021-22229.json)
[Permalink](/gitlab-org/cves/-/blob/5dbfc725a86e6d942deec9c36b7f06f5b8d912fc/2021/CVE-2021-22229.json "Go to permalink <kbd class='flat ml-1' aria-hidden=true>y</kbd>")

* [![🤖 GitLab Bot 🤖's avatar](/uploads/-/system/user/avatar/1786152/avatar.png?width=64 "🤖 GitLab Bot 🤖")](/gitlab-bot)

  Jul 05, 2021

  [4ea04617](/gitlab-org/cves/-/commit/4ea046179b11779c8475e81e458324e6cf69af99)
  [Publishing 0 updated advisories and 1 new advisories](/gitlab-org/cves/-/commit/4ea046179b11779c8475e81e458324e6cf69af99)
  ·
  4ea04617

  [🤖 GitLab Bot 🤖](/gitlab-bot) authored Jul 05, 2021

  4ea04617

  [Publishing 0 updated advisories and 1 new advisories](/gitlab-org/cves/-/commit/4ea046179b11779c8475e81e458324e6cf69af99)
  [🤖 GitLab Bot 🤖](/gitlab-bot) authored Jul 05, 2021

Loading



=== Content from gitlab.com_ac66167b_20250114_202101.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# Forks of public projects by project members can leak codebase

### Summary

There are public projects that intentionally restrict visibility of the source code to *only* project members. (for example: <https://gitlab.com/gitlab-org/customers-gitlab-com>)

Project members can fork these projects into another namespace to test changes without impacting the upstream project.

A project member clicking "Fork" will copy the project, but not the project visibility settings. This can lead to unintentionally exposing proprietary source code never intended for public consumption.

### Steps to reproduce

1. Create public project in a group namespace.
2. Set repository view/edit access to "Only Project Members"
   [![image](data:image/gif;base64...)](/-/project/278964/uploads/37ef9cd5e081298b5bf6472fecb9ee23/image.png)
3. Verify that project source code is not publicly visible using different browser or incognito mode
4. Fork this project into your personal namespace.
5. Verify that the project source code on the fork is publicly visible.

Results of not realizing this happened: <https://gitlab.com/gitlab-com/gl-security/security-operations/sirt/operations/-/issues/1454>

### Example Project

<https://gitlab.com/gitlab-org/customers-gitlab-com> (any GitLab team member forking this project will publicly expose the source code)

### What is the current *bug* behavior?

As a project member, forking a project with Repository visibility set to "Only Project Members" creates a project where Repository is visible to all.

### What is the expected *correct* behavior?

Project members forking a project with Repository visibility set to "Only Project Members" have their fork's Repository visibility also configured to "Only Project Members" (perhaps with them as the only member?)

### Relevant logs and/or screenshots

### Output of checks

This bug happens on GitLab.com

#### Results of GitLab environment info

Expand for output related to GitLab environment info
```

(For installations with omnibus-gitlab package run and paste the output of:
`sudo gitlab-rake gitlab:env:info`)

(For installations from source run and paste the output of:
`sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production`)

```
#### Results of GitLab application Check

Expand for output related to the GitLab application check
```

(For installations with omnibus-gitlab package run and paste the output of:
sudo gitlab-rake gitlab:check SANITIZE=true)

(For installations from source run and paste the output of:
sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production SANITIZE=true)

(we will only investigate if the tests are passing)

```
### Possible fixes

### Example of how this can unintentionally leak data

<https://gitlab.com/gitlab-com/gl-security/security-operations/sirt/operations/-/issues/1454>

Edited Jun 04, 2021 by [Greg Myers](/greg)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.


