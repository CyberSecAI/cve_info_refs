=== Content from gitlab.com_d89e800d_20250115_090233.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# Deduplicated objects from an internal repository are publicly accessible by name through a public project

In [#33318 (closed)](https://gitlab.com/gitlab-org/gitlab/-/issues/33318 "Allow internal projects to create or join an object pool") we made it possible to deduplicate internal projects. A consequence of this is that in the following scenario it is possible:

1. Fork public project `Project A` -> `Project B`, currently Both projects are public, the object pool is created
2. Change the visibility level on `Project A` to internal, the fork network is broken, but `Project B` remains part of the maintained object pool
3. Create a commit in `Project A`, and take note of the hash.
4. Trigger housekeeping on `Project A`, this will cause objects to be fetched into the object pool
5. In a clone of `Project B` as an Anonymous user, perform `git fetch origin <commit sha>`, this succeeds because it is available in the object pool

The refs aren't advertised, so users need to know the sha of objects to be able to fetch them through the public project.

**Qeustion:**

If we are okay with internal objects being publicly accessible in this way, could we allow deduplication for private projects?

Edited Sep 10, 2020 by [Bob Van Landuyt](/reprazent)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.



=== Content from gitlab.com_a5c56b83_20250115_090230.html ===


[Skip to content](#content-body)
GitLab
[Next](https://next.gitlab.com)

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

* [cves](/gitlab-org/cves/-/tree/master)
* [2021](/gitlab-org/cves/-/tree/master/2021)
* [**CVE-2021-22200.json**](/gitlab-org/cves/-/blob/master/2021/CVE-2021-22200.json)

Find file

[Blame](/gitlab-org/cves/-/blame/master/2021/CVE-2021-22200.json)
[Permalink](/gitlab-org/cves/-/blob/5dbfc725a86e6d942deec9c36b7f06f5b8d912fc/2021/CVE-2021-22200.json "Go to permalink <kbd class='flat ml-1' aria-hidden=true>y</kbd>")

* [![ GitLab Bot 's avatar](/uploads/-/system/user/avatar/1786152/avatar.png?width=64 " GitLab Bot ")](/gitlab-bot)

  Apr 28, 2021

  [2086a3b3](/gitlab-org/cves/-/commit/2086a3b31d4d748d9f092ff4ea1b8e374496c534)
  [Publishing 13 updated advisories and 0 new advisories](/gitlab-org/cves/-/commit/2086a3b31d4d748d9f092ff4ea1b8e374496c534)
  繚
  2086a3b3

  [ GitLab Bot ](/gitlab-bot) authored Apr 28, 2021

  2086a3b3

  [Publishing 13 updated advisories and 0 new advisories](/gitlab-org/cves/-/commit/2086a3b31d4d748d9f092ff4ea1b8e374496c534)
  [ GitLab Bot ](/gitlab-bot) authored Apr 28, 2021

Loading


