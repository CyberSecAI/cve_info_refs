=== Content from www.openwall.com_be2d61f7_20250114_210405.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](../../../2022/01/16/3) [[next>]](2) [[<thread-prev]](../../../2021/12/14/2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <CAFcO6XMeXqzHL3JDV2mrBv8KXd2=QyMFSzK4-rUfrA1u2TueKw@mail.gmail.com>
Date: Mon, 17 Jan 2022 12:33:54 +0800
From: butt3rflyh4ck <butterflyhuangxx@...il.com>
To: oss-security@...ts.openwall.com
Subject: Re: CVE-2021-4095: kernel: KVM: NULL pointer
 dereference in kvm_dirty_ring_get() in virt/kvm/dirty_ring.c

The patch for this issue is available upstream now.
<https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=55749769fe608fa3f4a075e42e89d237c8e37637>

Regards,
 butt3rflyh4ck.

On Tue, Dec 14, 2021 at 11:26 PM butt3rflyh4ck
<butterflyhuangxx@...il.com> wrote:
>
> Hi, there was a null-ptr-deref bug in kvm_dirty_ring_get in
> virt/kvm/dirty_ring.c and I reproduced it on 5.15.0-rc5+.
>
> #Root Cause
> When dirty ring logging is enabled, any dirty logging without an active
> vCPU context will cause a kernel oops via a KVM KVM_XEN_HVM_SET_ATTR ioctl.
>
> we can call KVM_XEN_HVM_SET_ATTR ioctl and it would invoke
> kvm_xen_hvm_set_attr(), it would call mark_page_dirty_in_slot().
> Call chains is like this:
> KVM_XEN_HVM_SET_ATTR ioctl
>   --->kvm_xen_hvm_set_attr
>       --->kvm_write_wall_clock
>          --->kvm_write_guest
>             -->__kvm_write_guest_page
>                --->mark_page_dirty_in_slot
> mark_page_dirty_in_slot().
> if kvm->dirty_ring_size is sat.
> ```
> void mark_page_dirty_in_slot(struct kvm *kvm,
>      struct kvm_memory_slot *memslot,
>      gfn_t gfn)
> {
> if (memslot && kvm_slot_dirty_track_enabled(memslot)) {
> unsigned long rel_gfn = gfn - memslot->base_gfn;
> u32 slot = (memslot->as_id << 16) | memslot->id;
>
> if (kvm->dirty_ring_size)
> kvm_dirty_ring_push(kvm_dirty_ring_get(kvm),
>     slot, rel_gfn);
> else
> set_bit_le(rel_gfn, memslot->dirty_bitmap);
> }
> }
> ```
> mark_page_dirty_in_slot() would call kvm_dirty_ring_push() to push a
> dirty-page to dirty ring
> then kvm_dirty_ring_get() would get vcpu->dirty_ring.
>
> kvm_dirty_ring_get()
> ```
> struct kvm_dirty_ring *kvm_dirty_ring_get(struct kvm *kvm)
> {
> struct kvm_vcpu *vcpu = kvm_get_running_vcpu();  //-------> invoke
> kvm_get_running_vcpu() to get a vcpu.
>
> WARN_ON_ONCE(vcpu->kvm != kvm); [1]
>
> return &vcpu->dirty_ring;
> }
> ```
> If vCPU stat did not work, kvm_get_running_vcpu() would get a NULL
> vcpu pointer .
>
> #Details
> Analyze and some discussion on this issue.
> [https://lore.kernel.org/kvm/CAFcO6XOmoS7EacN_n6v4Txk7xL7iqRa2gABg3F7E3Naf5uG94g@mail.gmail.com/](https://lore.kernel.org/kvm/CAFcO6XOmoS7EacN_n6v4Txk7xL7iqRa2gABg3F7E3Naf5uG94g%40mail.gmail.com/)
>
> #Fix
> The patch for this issue, not available upstream now.
> [https://patchwork.kernel.org/project/kvm/patch/20211121125451.9489-12-dwmw2@infradead.org/](https://patchwork.kernel.org/project/kvm/patch/20211121125451.9489-12-dwmw2%40infradead.org/)
>
> #CVE
> Red Hat has assigned CVE-2021-4095 to this issue.
> <https://access.redhat.com/security/cve/CVE-2021-4095>
> <https://bugzilla.redhat.com/show_bug.cgi?id=2031194>
>
> #Cedit
> Active Defense Lab of Venustech.
>
>
> Regards,
>  butt3rflyh4ck.
> --
> Active Defense Lab of Venustech

--
Active Defense Lab of Venustech

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from patchwork.kernel.org_b89fc545_20250115_184734.html ===

Toggle navigation

[Patchwork](/)
KVM development

* [Patches](/project/kvm/list/)
* [Bundles](/project/kvm/bundles/)
* [About this project](/project/kvm/)

* [Login](/user/login/)
* [Register](/register/)
* [Mail settings](/mail/)

12630835

[diff](/project/kvm/patch/20211121125451.9489-12-dwmw2%40infradead.org/raw/ "Download patch diff")
[mbox](/project/kvm/patch/20211121125451.9489-12-dwmw2%40infradead.org/mbox/ "Download patch mbox")
[series](/series/583543/mbox/ "Download patch mbox with dependencies")
# [v5,11/12] KVM: x86: Fix wall clock writes in Xen shared\_info not to mark page dirty

| Message ID | 20211121125451.9489-12-dwmw2@infradead.org ([mailing list archive](https://lore.kernel.org/r/20211121125451.9489-12-dwmw2%40infradead.org)) |
| --- | --- |
| State | New, archived |
| Headers | show ``` Return-Path: <kvm-owner@kernel.org> X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on 	aws-us-west-2-korg-lkml-1.web.codeaurora.org Received: from vger.kernel.org (vger.kernel.org [23.128.96.18]) 	by smtp.lore.kernel.org (Postfix) with ESMTP id 1A571C35263 	for <kvm@archiver.kernel.org>; Sun, 21 Nov 2021 12:55:24 +0000 (UTC) Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand         id S238290AbhKUM62 (ORCPT <rfc822;kvm@archiver.kernel.org>);         Sun, 21 Nov 2021 07:58:28 -0500 Received: from lindbergh.monkeyblade.net ([23.128.96.19]:46550 "EHLO         lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org         with ESMTP id S238161AbhKUM6W (ORCPT <rfc822;kvm@vger.kernel.org>);         Sun, 21 Nov 2021 07:58:22 -0500 Received: from desiato.infradead.org (desiato.infradead.org  [IPv6:2001:8b0:10b:1:d65d:64ff:fe57:4e05])         by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 6BAEAC061748;         Sun, 21 Nov 2021 04:55:17 -0800 (PST) DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;         d=infradead.org; s=desiato.20200630;  h=Sender:Content-Transfer-Encoding:         MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From:         Reply-To:Content-Type:Content-ID:Content-Description;         bh=G37/BXwBbO12qoWQX4NnszYh9zVH3UVeyBIJn+2R4aE=;  b=JD9cQyYlj+W5TB6WMpsgkdF1A3         lckDprksXoBNRjXhASB/77BiS5aIQMdJsqFZAM2r2V50z/AxsKbwPrH1068TV0RnchaLQrnzToD91         M60FWV/dEiuXe+jPs9vHPU8j0LHQCIL8QLO12sWstP+R+TkFi3jVusg4+izng5PA5uhgUGdYD0Tun         /PJtQGs/UgmdJ67BWKd9m1JI0R40I66od2U4SDlu9kyBveyZI/eZLbf02yIorr10DC7Am7C0KX3q4         NJa8QlqM2dw89VT3gFnRWHs5whZXWS598sT3cLBv1CFA2ieI1sIyNhm/ad4OKba5de8DJjP667znA         RKYPPrhQ==; Received: from i7.infradead.org ([2001:8b0:10b:1:21e:67ff:fecb:7a92])         by desiato.infradead.org with esmtpsa (Exim 4.94.2 #2 (Red Hat Linux))         id 1momMx-00HIgM-AJ; Sun, 21 Nov 2021 12:54:55 +0000 Received: from dwoodhou by i7.infradead.org with local (Exim 4.94.2 #2 (Red  Hat Linux))         id 1momMw-0002XY-VB; Sun, 21 Nov 2021 12:54:54 +0000 From: David Woodhouse <dwmw2@infradead.org> To: Paolo Bonzini <pbonzini@redhat.com>, kvm <kvm@vger.kernel.org> Cc: Boris Ostrovsky <boris.ostrovsky@oracle.com>,         Joao Martins <joao.m.martins@oracle.com>,         "jmattson @ google . com" <jmattson@google.com>,         "wanpengli @ tencent . com" <wanpengli@tencent.com>,         "seanjc @ google . com" <seanjc@google.com>,         "vkuznets @ redhat . com" <vkuznets@redhat.com>,         "mtosatti @ redhat . com" <mtosatti@redhat.com>,         "joro @ 8bytes . org" <joro@8bytes.org>, karahmed@amazon.com,         Marc Zyngier <maz@kernel.org>,         James Morse <james.morse@arm.com>,         Alexandru Elisei <alexandru.elisei@arm.com>,         Suzuki K Poulose <suzuki.poulose@arm.com>,         Catalin Marinas <catalin.marinas@arm.com>,         Will Deacon <will@kernel.org>,         Huacai Chen <chenhuacai@kernel.org>,         Aleksandar Markovic <aleksandar.qemu.devel@gmail.com>,         Michael Ellerman <mpe@ellerman.id.au>,         Benjamin Herrenschmidt <benh@kernel.crashing.org>,         Anup Patel <anup.patel@wdc.com>,         Christian Borntraeger <borntraeger@de.ibm.com>,         kvmarm@lists.cs.columbia.edu,         linux-arm-kernel <linux-arm-kernel@lists.infradead.org>,         linux-mips@vger.kernel.org, linuxppc-dev@lists.ozlabs.org,         kvm-riscv@lists.infradead.org, linux-s390@vger.kernel.org,         butt3rflyh4ck <butterflyhuangxx@gmail.com> Subject: [PATCH v5 11/12] KVM: x86: Fix wall clock writes in Xen shared_info  not to mark page dirty Date: Sun, 21 Nov 2021 12:54:50 +0000 Message-Id: <20211121125451.9489-12-dwmw2@infradead.org> X-Mailer: git-send-email 2.31.1 In-Reply-To: <20211121125451.9489-1-dwmw2@infradead.org> References: <20211121125451.9489-1-dwmw2@infradead.org> MIME-Version: 1.0 Content-Transfer-Encoding: 8bit Sender: David Woodhouse <dwmw2@infradead.org> X-SRS-Rewrite: SMTP reverse-path rewritten from <dwmw2@infradead.org> by  desiato.infradead.org. See http://www.infradead.org/rpr.html Precedence: bulk List-ID: <kvm.vger.kernel.org> X-Mailing-List: kvm@vger.kernel.org ``` |
| Series | [KVM: x86/xen: Add in-kernel Xen event channel delivery](/project/kvm/list/?series=583543) | expand  * [[v5,00/12] KVM: x86/xen: Add in-kernel Xen event channel delivery](/project/kvm/cover/20211121125451.9489-1-dwmw2%40infradead.org/) * [[v5,01/12] KVM: Introduce CONFIG\_HAVE\_KVM\_DIRTY\_RING](/project/kvm/patch/20211121125451.9489-2-dwmw2%40infradead.org/) * [[v5,02/12] KVM: Add Makefile.kvm for common files, use it for x86](/project/kvm/patch/20211121125451.9489-3-dwmw2%40infradead.org/) * [[v5,03/12] KVM: s390: Use Makefile.kvm for common files](/project/kvm/patch/20211121125451.9489-4-dwmw2%40infradead.org/) * [[v5,04/12] KVM: mips: Use Makefile.kvm for common files](/project/kvm/patch/20211121125451.9489-5-dwmw2%40infradead.org/) * [[v5,05/12] KVM: RISC-V: Use Makefile.kvm for common files](/project/kvm/patch/20211121125451.9489-6-dwmw2%40infradead.org/) * [[v5,06/12] KVM: powerpc: Use Makefile.kvm for common files](/project/kvm/patch/20211121125451.9489-7-dwmw2%40infradead.org/) * [[v5,07/12] KVM: arm64: Use Makefile.kvm for common files](/project/kvm/patch/20211121125451.9489-8-dwmw2%40infradead.org/) * [[v5,08/12] KVM: Reinstate gfn\_to\_pfn\_cache with invalidation support](/project/kvm/patch/20211121125451.9489-9-dwmw2%40infradead.org/) * [[v5,09/12] KVM: x86/xen: Maintain valid mapping of Xen shared\_info page](/project/kvm/patch/20211121125451.9489-10-dwmw2%40infradead.org/) * [[v5,10/12] KVM: x86/xen: Add KVM\_IRQ\_ROUTING\_XEN\_EVTCHN and event channel delivery](/project/kvm/patch/20211121125451.9489-11-dwmw2%40infradead.org/) * [v5,11/12] KVM: x86: Fix wall clock writes in Xen shared\_info not to mark page dirty * [[v5,12/12] KVM: x86: First attempt at converting nested virtual APIC page to gpc](/project/kvm/patch/20211121125451.9489-13-dwmw2%40infradead.org/) |

## Commit Message

[David Woodhouse](/project/kvm/list/?submitter=308)
Nov. 21, 2021, 12:54 p.m. UTC
```

From: David Woodhouse <dwmw@amazon.co.uk>

When dirty ring logging is enabled, any dirty logging without an active
vCPU context will cause a kernel oops. But we've already declared that
the shared_info page doesn't get dirty tracking anyway, since it would
be kind of insane to mark it dirty every time we deliver an event channel
interrupt. Userspace is supposed to just assume it's always dirty any
time a vCPU can run or event channels are routed.

So stop using the generic kvm_write_wall_clock() and just write directly
through the gfn_to_pfn_cache that we already have set up.

We can make kvm_write_wall_clock() static in x86.c again now, but let's
not remove the 'sec_hi_ofs' argument even though it's not used yet. At
some point we *will* want to use that for KVM guests too.

Fixes: 629b5348841a ("KVM: x86/xen: update wallclock region")
Reported-by: butt3rflyh4ck <butterflyhuangxx@gmail.com>
Signed-off-by: David Woodhouse <dwmw@amazon.co.uk>
---
 arch/x86/kvm/x86.c |  2 +-
 arch/x86/kvm/x86.h |  1 -
 arch/x86/kvm/xen.c | 62 +++++++++++++++++++++++++++++++++++-----------
 3 files changed, 49 insertions(+), 16 deletions(-)

```

12630835

[diff](/project/kvm/patch/20211121125451.9489-12-dwmw2%40infradead.org/raw/ "Download patch diff")
[mbox](/project/kvm/patch/20211121125451.9489-12-dwmw2%40infradead.org/mbox/ "Download patch mbox")
[series](/series/583543/mbox/ "Download patch mbox with dependencies")
## Patch

```

diff --git a/arch/x86/kvm/x86.c b/arch/x86/kvm/x86.c
index fa56c590d8db..6cb022d0afab 100644
--- a/arch/x86/kvm/x86.c
+++ b/arch/x86/kvm/x86.c
@@ -2118,7 +2118,7 @@  static s64 get_kvmclock_base_ns(void)
 }
 #endif

-void kvm_write_wall_clock(struct kvm *kvm, gpa_t wall_clock, int sec_hi_ofs)
+static void kvm_write_wall_clock(struct kvm *kvm, gpa_t wall_clock, int sec_hi_ofs)
 {
 	int version;
 	int r;
diff --git a/arch/x86/kvm/x86.h b/arch/x86/kvm/x86.h
index 997669ae9caa..0260836b42ff 100644
--- a/arch/x86/kvm/x86.h
+++ b/arch/x86/kvm/x86.h
@@ -306,7 +306,6 @@  static inline bool kvm_vcpu_latch_init(struct kvm_vcpu *vcpu)
 	return is_smm(vcpu) || static_call(kvm_x86_apic_init_signal_blocked)(vcpu);
 }

-void kvm_write_wall_clock(struct kvm *kvm, gpa_t wall_clock, int sec_hi_ofs);
 void kvm_inject_realmode_interrupt(struct kvm_vcpu *vcpu, int irq, int inc_eip);

 u64 get_kvmclock_ns(struct kvm *kvm);
diff --git a/arch/x86/kvm/xen.c b/arch/x86/kvm/xen.c
index ceddabd1f5c6..0e3f7d6e9fd7 100644
--- a/arch/x86/kvm/xen.c
+++ b/arch/x86/kvm/xen.c
@@ -25,8 +25,11 @@  DEFINE_STATIC_KEY_DEFERRED_FALSE(kvm_xen_enabled, HZ);
 static int kvm_xen_shared_info_init(struct kvm *kvm, gfn_t gfn)
 {
 	struct gfn_to_pfn_cache *gpc = &kvm->arch.xen.shinfo_cache;
+	struct pvclock_wall_clock *wc;
 	gpa_t gpa = gfn_to_gpa(gfn);
-	int wc_ofs, sec_hi_ofs;
+	u32 *wc_sec_hi;
+	u32 wc_version;
+	u64 wall_nsec;
 	int ret = 0;
 	int idx = srcu_read_lock(&kvm->srcu);

@@ -35,32 +38,63 @@  static int kvm_xen_shared_info_init(struct kvm *kvm, gfn_t gfn)
 		goto out;
 	}

-	ret = kvm_gfn_to_pfn_cache_init(kvm, gpc, NULL, false, true, gpa,
-					PAGE_SIZE, false);
-	if (ret)
-		goto out;
+	do {
+		ret = kvm_gfn_to_pfn_cache_init(kvm, gpc, NULL, false, true,
+						gpa, PAGE_SIZE, false);
+		if (ret)
+			goto out;
+
+		/*
+		 * This code mirrors kvm_write_wall_clock() except that it writes
+		 * directly through the pfn cache and doesn't mark the page dirty.
+		 */
+		wall_nsec = ktime_get_real_ns() - get_kvmclock_ns(kvm);
+
+		/* It could be invalid again already, so we need to check */
+		read_lock_irq(&gpc->lock);
+
+		if (gpc->valid)
+			break;
+
+		read_unlock_irq(&gpc->lock);
+	} while (1);

 	/* Paranoia checks on the 32-bit struct layout */
 	BUILD_BUG_ON(offsetof(struct compat_shared_info, wc) != 0x900);
 	BUILD_BUG_ON(offsetof(struct compat_shared_info, arch.wc_sec_hi) != 0x924);
 	BUILD_BUG_ON(offsetof(struct pvclock_vcpu_time_info, version) != 0);

-	/* 32-bit location by default */
-	wc_ofs = offsetof(struct compat_shared_info, wc);
-	sec_hi_ofs = offsetof(struct compat_shared_info, arch.wc_sec_hi);
-
 #ifdef CONFIG_X86_64
 	/* Paranoia checks on the 64-bit struct layout */
 	BUILD_BUG_ON(offsetof(struct shared_info, wc) != 0xc00);
 	BUILD_BUG_ON(offsetof(struct shared_info, wc_sec_hi) != 0xc0c);

-	if (kvm->arch.xen.long_mode) {
-		wc_ofs = offsetof(struct shared_info, wc);
-		sec_hi_ofs = offsetof(struct shared_info, wc_sec_hi);
-	}
+	if (IS_ENABLED(CONFIG_64BIT) && kvm->arch.xen.long_mode) {
+		struct shared_info *shinfo = gpc->khva;
+
+		wc_sec_hi = &shinfo->wc_sec_hi;
+		wc = &shinfo->wc;
+	} else
 #endif
+	{
+		struct compat_shared_info *shinfo = gpc->khva;
+
+		wc_sec_hi = &shinfo->arch.wc_sec_hi;
+		wc = &shinfo->wc;
+	}
+
+	/* Increment and ensure an odd value */
+	wc_version = wc->version = (wc->version + 1) | 1;
+	smp_wmb();
+
+	wc->nsec = do_div(wall_nsec,  1000000000);
+	wc->sec = (u32)wall_nsec;
+	*wc_sec_hi = wall_nsec >> 32;
+	smp_wmb();
+
+	wc->version = wc_version + 1;
+	read_unlock_irq(&gpc->lock);

-	kvm_write_wall_clock(kvm, gpa + wc_ofs, sec_hi_ofs - wc_ofs);
 	kvm_make_all_cpus_request(kvm, KVM_REQ_MASTERCLOCK_UPDATE);

 out:

```

[patchwork](http://jk.ozlabs.org/projects/patchwork/)
patch tracking system | version v2.2.6 | [about patchwork](/about/)



=== Content from lists.fedoraproject.org_64c1221c_20250114_210408.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/QIOQN7JJNN6ABIDGRSTVZA65MHRLMH2Q/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/QIOQN7JJNN6ABIDGRSTVZA65MHRLMH2Q/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/QIOQN7JJNN6ABIDGRSTVZA65MHRLMH2Q/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/QIOQN7JJNN6ABIDGRSTVZA65MHRLMH2Q/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-QIOQN7JJNN6ABIDGRSTVZA65MHRLMH2Q.mbox.gz?message=QIOQN7JJNN6ABIDGRSTVZA65MHRLMH2Q "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/QIOQN7JJNN6ABIDGRSTVZA65MHRLMH2Q/#QIOQN7JJNN6ABIDGRSTVZA65MHRLMH2Q)

# [SECURITY] Fedora 34 Update: kernel-tools-5.17.4-100.fc34

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

24 Apr
2022

24 Apr
'22

2:43 p.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2022-0816754490
2022-04-24 19:42:27.497148
--------------------------------------------------------------------------------

Name : kernel-tools
Product : Fedora 34
Version : 5.17.4
Release : 100.fc34
URL : <http://www.kernel.org/>
Summary : Assortment of tools for the Linux kernel
Description :
This package contains the tools/ directory from the kernel source
and the supporting documentation.

--------------------------------------------------------------------------------
Update Information:

The 5.17.4 kernel rebase contains new features, improved hardware support, and a
number of important fixes across the tree.
--------------------------------------------------------------------------------
ChangeLog:

\* Wed Apr 20 2022 Justin M. Forbes jforbes@fedoraproject.org - 5.17.4-100
- Linux v5.17.4 rebase
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #2031194 - CVE-2021-4095 kernel: KVM: NULL pointer dereference in kvm\_dirty\_ring\_get() in virt/kvm/dirty\_ring.c
<https://bugzilla.redhat.com/show_bug.cgi?id=2031194>
[ 2 ] Bug #2039178 - CVE-2021-4204 kernel: improper input validation may lead to privilege escalation
<https://bugzilla.redhat.com/show_bug.cgi?id=2039178>
[ 3 ] Bug #2071051 - CVE-2022-1204 kernel: Use after free in net/ax25/af\_ax25.c
<https://bugzilla.redhat.com/show_bug.cgi?id=2071051>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2022-0816754490' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/QIOQN7JJNN6ABIDGRSTVZA65MHRLMH2Q/#QIOQN7JJNN6ABIDGRSTVZA65MHRLMH2Q)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from lists.fedoraproject.org_ef495989_20250114_210409.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/VT6573CGKVK3DU2632VVO5BVM4IU7SBV/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/VT6573CGKVK3DU2632VVO5BVM4IU7SBV/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/VT6573CGKVK3DU2632VVO5BVM4IU7SBV/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/VT6573CGKVK3DU2632VVO5BVM4IU7SBV/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-VT6573CGKVK3DU2632VVO5BVM4IU7SBV.mbox.gz?message=VT6573CGKVK3DU2632VVO5BVM4IU7SBV "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/VT6573CGKVK3DU2632VVO5BVM4IU7SBV/#VT6573CGKVK3DU2632VVO5BVM4IU7SBV)

# [SECURITY] Fedora 35 Update: kernel-5.17.4-200.fc35

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updates＠fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updates＠fedoraproject.org")

24 Apr
2022

24 Apr
'22

4:06 p.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2022-8efcea6e67
2022-04-24 20:05:56.279739
--------------------------------------------------------------------------------

Name : kernel
Product : Fedora 35
Version : 5.17.4
Release : 200.fc35
URL : <https://www.kernel.org/>
Summary : The Linux kernel
Description :
The kernel meta package

--------------------------------------------------------------------------------
Update Information:

The 5.17.4 kernel rebase contains new features, improved hardware support, and a
number of important fixes across the tree.
--------------------------------------------------------------------------------
ChangeLog:

\* Wed Apr 20 2022 Justin M. Forbes jforbes@fedoraproject.org [5.17.4-0]
- Add F34 and F35 as release targets (Justin M. Forbes)
- Revert "net: bcmgenet: Use stronger register read/writes to assure ordering" (Justin M. Forbes)
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #2031194 - CVE-2021-4095 kernel: KVM: NULL pointer dereference in kvm\_dirty\_ring\_get() in virt/kvm/dirty\_ring.c
<https://bugzilla.redhat.com/show_bug.cgi?id=2031194>
[ 2 ] Bug #2039178 - CVE-2021-4204 kernel: improper input validation may lead to privilege escalation
<https://bugzilla.redhat.com/show_bug.cgi?id=2039178>
[ 3 ] Bug #2071051 - CVE-2022-1204 kernel: Use after free in net/ax25/af\_ax25.c
<https://bugzilla.redhat.com/show_bug.cgi?id=2071051>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2022-8efcea6e67' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/VT6573CGKVK3DU2632VVO5BVM4IU7SBV/#VT6573CGKVK3DU2632VVO5BVM4IU7SBV)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from patchwork.kernel.org_20a3eb9b_20250115_121655.html ===

Toggle navigation

[Patchwork](/)
KVM development

* [Patches](/project/kvm/list/)
* [Bundles](/project/kvm/bundles/)
* [About this project](/project/kvm/)

* [Login](/user/login/)
* [Register](/register/)
* [Mail settings](/mail/)

12630835

[diff](/project/kvm/patch/20211121125451.9489-12-dwmw2%40infradead.org/raw/ "Download patch diff")
[mbox](/project/kvm/patch/20211121125451.9489-12-dwmw2%40infradead.org/mbox/ "Download patch mbox")
[series](/series/583543/mbox/ "Download patch mbox with dependencies")
# [v5,11/12] KVM: x86: Fix wall clock writes in Xen shared\_info not to mark page dirty

| Message ID | 20211121125451.9489-12-dwmw2@infradead.org ([mailing list archive](https://lore.kernel.org/r/20211121125451.9489-12-dwmw2%40infradead.org)) |
| --- | --- |
| State | New, archived |
| Headers | show ``` Return-Path: <kvm-owner@kernel.org> X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on 	aws-us-west-2-korg-lkml-1.web.codeaurora.org Received: from vger.kernel.org (vger.kernel.org [23.128.96.18]) 	by smtp.lore.kernel.org (Postfix) with ESMTP id 1A571C35263 	for <kvm@archiver.kernel.org>; Sun, 21 Nov 2021 12:55:24 +0000 (UTC) Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand         id S238290AbhKUM62 (ORCPT <rfc822;kvm@archiver.kernel.org>);         Sun, 21 Nov 2021 07:58:28 -0500 Received: from lindbergh.monkeyblade.net ([23.128.96.19]:46550 "EHLO         lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org         with ESMTP id S238161AbhKUM6W (ORCPT <rfc822;kvm@vger.kernel.org>);         Sun, 21 Nov 2021 07:58:22 -0500 Received: from desiato.infradead.org (desiato.infradead.org  [IPv6:2001:8b0:10b:1:d65d:64ff:fe57:4e05])         by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 6BAEAC061748;         Sun, 21 Nov 2021 04:55:17 -0800 (PST) DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;         d=infradead.org; s=desiato.20200630;  h=Sender:Content-Transfer-Encoding:         MIME-Version:References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From:         Reply-To:Content-Type:Content-ID:Content-Description;         bh=G37/BXwBbO12qoWQX4NnszYh9zVH3UVeyBIJn+2R4aE=;  b=JD9cQyYlj+W5TB6WMpsgkdF1A3         lckDprksXoBNRjXhASB/77BiS5aIQMdJsqFZAM2r2V50z/AxsKbwPrH1068TV0RnchaLQrnzToD91         M60FWV/dEiuXe+jPs9vHPU8j0LHQCIL8QLO12sWstP+R+TkFi3jVusg4+izng5PA5uhgUGdYD0Tun         /PJtQGs/UgmdJ67BWKd9m1JI0R40I66od2U4SDlu9kyBveyZI/eZLbf02yIorr10DC7Am7C0KX3q4         NJa8QlqM2dw89VT3gFnRWHs5whZXWS598sT3cLBv1CFA2ieI1sIyNhm/ad4OKba5de8DJjP667znA         RKYPPrhQ==; Received: from i7.infradead.org ([2001:8b0:10b:1:21e:67ff:fecb:7a92])         by desiato.infradead.org with esmtpsa (Exim 4.94.2 #2 (Red Hat Linux))         id 1momMx-00HIgM-AJ; Sun, 21 Nov 2021 12:54:55 +0000 Received: from dwoodhou by i7.infradead.org with local (Exim 4.94.2 #2 (Red  Hat Linux))         id 1momMw-0002XY-VB; Sun, 21 Nov 2021 12:54:54 +0000 From: David Woodhouse <dwmw2@infradead.org> To: Paolo Bonzini <pbonzini@redhat.com>, kvm <kvm@vger.kernel.org> Cc: Boris Ostrovsky <boris.ostrovsky@oracle.com>,         Joao Martins <joao.m.martins@oracle.com>,         "jmattson @ google . com" <jmattson@google.com>,         "wanpengli @ tencent . com" <wanpengli@tencent.com>,         "seanjc @ google . com" <seanjc@google.com>,         "vkuznets @ redhat . com" <vkuznets@redhat.com>,         "mtosatti @ redhat . com" <mtosatti@redhat.com>,         "joro @ 8bytes . org" <joro@8bytes.org>, karahmed@amazon.com,         Marc Zyngier <maz@kernel.org>,         James Morse <james.morse@arm.com>,         Alexandru Elisei <alexandru.elisei@arm.com>,         Suzuki K Poulose <suzuki.poulose@arm.com>,         Catalin Marinas <catalin.marinas@arm.com>,         Will Deacon <will@kernel.org>,         Huacai Chen <chenhuacai@kernel.org>,         Aleksandar Markovic <aleksandar.qemu.devel@gmail.com>,         Michael Ellerman <mpe@ellerman.id.au>,         Benjamin Herrenschmidt <benh@kernel.crashing.org>,         Anup Patel <anup.patel@wdc.com>,         Christian Borntraeger <borntraeger@de.ibm.com>,         kvmarm@lists.cs.columbia.edu,         linux-arm-kernel <linux-arm-kernel@lists.infradead.org>,         linux-mips@vger.kernel.org, linuxppc-dev@lists.ozlabs.org,         kvm-riscv@lists.infradead.org, linux-s390@vger.kernel.org,         butt3rflyh4ck <butterflyhuangxx@gmail.com> Subject: [PATCH v5 11/12] KVM: x86: Fix wall clock writes in Xen shared_info  not to mark page dirty Date: Sun, 21 Nov 2021 12:54:50 +0000 Message-Id: <20211121125451.9489-12-dwmw2@infradead.org> X-Mailer: git-send-email 2.31.1 In-Reply-To: <20211121125451.9489-1-dwmw2@infradead.org> References: <20211121125451.9489-1-dwmw2@infradead.org> MIME-Version: 1.0 Content-Transfer-Encoding: 8bit Sender: David Woodhouse <dwmw2@infradead.org> X-SRS-Rewrite: SMTP reverse-path rewritten from <dwmw2@infradead.org> by  desiato.infradead.org. See http://www.infradead.org/rpr.html Precedence: bulk List-ID: <kvm.vger.kernel.org> X-Mailing-List: kvm@vger.kernel.org ``` |
| Series | [KVM: x86/xen: Add in-kernel Xen event channel delivery](/project/kvm/list/?series=583543) | expand  * [[v5,00/12] KVM: x86/xen: Add in-kernel Xen event channel delivery](/project/kvm/cover/20211121125451.9489-1-dwmw2%40infradead.org/) * [[v5,01/12] KVM: Introduce CONFIG\_HAVE\_KVM\_DIRTY\_RING](/project/kvm/patch/20211121125451.9489-2-dwmw2%40infradead.org/) * [[v5,02/12] KVM: Add Makefile.kvm for common files, use it for x86](/project/kvm/patch/20211121125451.9489-3-dwmw2%40infradead.org/) * [[v5,03/12] KVM: s390: Use Makefile.kvm for common files](/project/kvm/patch/20211121125451.9489-4-dwmw2%40infradead.org/) * [[v5,04/12] KVM: mips: Use Makefile.kvm for common files](/project/kvm/patch/20211121125451.9489-5-dwmw2%40infradead.org/) * [[v5,05/12] KVM: RISC-V: Use Makefile.kvm for common files](/project/kvm/patch/20211121125451.9489-6-dwmw2%40infradead.org/) * [[v5,06/12] KVM: powerpc: Use Makefile.kvm for common files](/project/kvm/patch/20211121125451.9489-7-dwmw2%40infradead.org/) * [[v5,07/12] KVM: arm64: Use Makefile.kvm for common files](/project/kvm/patch/20211121125451.9489-8-dwmw2%40infradead.org/) * [[v5,08/12] KVM: Reinstate gfn\_to\_pfn\_cache with invalidation support](/project/kvm/patch/20211121125451.9489-9-dwmw2%40infradead.org/) * [[v5,09/12] KVM: x86/xen: Maintain valid mapping of Xen shared\_info page](/project/kvm/patch/20211121125451.9489-10-dwmw2%40infradead.org/) * [[v5,10/12] KVM: x86/xen: Add KVM\_IRQ\_ROUTING\_XEN\_EVTCHN and event channel delivery](/project/kvm/patch/20211121125451.9489-11-dwmw2%40infradead.org/) * [v5,11/12] KVM: x86: Fix wall clock writes in Xen shared\_info not to mark page dirty * [[v5,12/12] KVM: x86: First attempt at converting nested virtual APIC page to gpc](/project/kvm/patch/20211121125451.9489-13-dwmw2%40infradead.org/) |

## Commit Message

[David Woodhouse](/project/kvm/list/?submitter=308)
Nov. 21, 2021, 12:54 p.m. UTC
```

From: David Woodhouse <dwmw@amazon.co.uk>

When dirty ring logging is enabled, any dirty logging without an active
vCPU context will cause a kernel oops. But we've already declared that
the shared_info page doesn't get dirty tracking anyway, since it would
be kind of insane to mark it dirty every time we deliver an event channel
interrupt. Userspace is supposed to just assume it's always dirty any
time a vCPU can run or event channels are routed.

So stop using the generic kvm_write_wall_clock() and just write directly
through the gfn_to_pfn_cache that we already have set up.

We can make kvm_write_wall_clock() static in x86.c again now, but let's
not remove the 'sec_hi_ofs' argument even though it's not used yet. At
some point we *will* want to use that for KVM guests too.

Fixes: 629b5348841a ("KVM: x86/xen: update wallclock region")
Reported-by: butt3rflyh4ck <butterflyhuangxx@gmail.com>
Signed-off-by: David Woodhouse <dwmw@amazon.co.uk>
---
 arch/x86/kvm/x86.c |  2 +-
 arch/x86/kvm/x86.h |  1 -
 arch/x86/kvm/xen.c | 62 +++++++++++++++++++++++++++++++++++-----------
 3 files changed, 49 insertions(+), 16 deletions(-)

```

12630835

[diff](/project/kvm/patch/20211121125451.9489-12-dwmw2%40infradead.org/raw/ "Download patch diff")
[mbox](/project/kvm/patch/20211121125451.9489-12-dwmw2%40infradead.org/mbox/ "Download patch mbox")
[series](/series/583543/mbox/ "Download patch mbox with dependencies")
## Patch

```

diff --git a/arch/x86/kvm/x86.c b/arch/x86/kvm/x86.c
index fa56c590d8db..6cb022d0afab 100644
--- a/arch/x86/kvm/x86.c
+++ b/arch/x86/kvm/x86.c
@@ -2118,7 +2118,7 @@  static s64 get_kvmclock_base_ns(void)
 }
 #endif

-void kvm_write_wall_clock(struct kvm *kvm, gpa_t wall_clock, int sec_hi_ofs)
+static void kvm_write_wall_clock(struct kvm *kvm, gpa_t wall_clock, int sec_hi_ofs)
 {
 	int version;
 	int r;
diff --git a/arch/x86/kvm/x86.h b/arch/x86/kvm/x86.h
index 997669ae9caa..0260836b42ff 100644
--- a/arch/x86/kvm/x86.h
+++ b/arch/x86/kvm/x86.h
@@ -306,7 +306,6 @@  static inline bool kvm_vcpu_latch_init(struct kvm_vcpu *vcpu)
 	return is_smm(vcpu) || static_call(kvm_x86_apic_init_signal_blocked)(vcpu);
 }

-void kvm_write_wall_clock(struct kvm *kvm, gpa_t wall_clock, int sec_hi_ofs);
 void kvm_inject_realmode_interrupt(struct kvm_vcpu *vcpu, int irq, int inc_eip);

 u64 get_kvmclock_ns(struct kvm *kvm);
diff --git a/arch/x86/kvm/xen.c b/arch/x86/kvm/xen.c
index ceddabd1f5c6..0e3f7d6e9fd7 100644
--- a/arch/x86/kvm/xen.c
+++ b/arch/x86/kvm/xen.c
@@ -25,8 +25,11 @@  DEFINE_STATIC_KEY_DEFERRED_FALSE(kvm_xen_enabled, HZ);
 static int kvm_xen_shared_info_init(struct kvm *kvm, gfn_t gfn)
 {
 	struct gfn_to_pfn_cache *gpc = &kvm->arch.xen.shinfo_cache;
+	struct pvclock_wall_clock *wc;
 	gpa_t gpa = gfn_to_gpa(gfn);
-	int wc_ofs, sec_hi_ofs;
+	u32 *wc_sec_hi;
+	u32 wc_version;
+	u64 wall_nsec;
 	int ret = 0;
 	int idx = srcu_read_lock(&kvm->srcu);

@@ -35,32 +38,63 @@  static int kvm_xen_shared_info_init(struct kvm *kvm, gfn_t gfn)
 		goto out;
 	}

-	ret = kvm_gfn_to_pfn_cache_init(kvm, gpc, NULL, false, true, gpa,
-					PAGE_SIZE, false);
-	if (ret)
-		goto out;
+	do {
+		ret = kvm_gfn_to_pfn_cache_init(kvm, gpc, NULL, false, true,
+						gpa, PAGE_SIZE, false);
+		if (ret)
+			goto out;
+
+		/*
+		 * This code mirrors kvm_write_wall_clock() except that it writes
+		 * directly through the pfn cache and doesn't mark the page dirty.
+		 */
+		wall_nsec = ktime_get_real_ns() - get_kvmclock_ns(kvm);
+
+		/* It could be invalid again already, so we need to check */
+		read_lock_irq(&gpc->lock);
+
+		if (gpc->valid)
+			break;
+
+		read_unlock_irq(&gpc->lock);
+	} while (1);

 	/* Paranoia checks on the 32-bit struct layout */
 	BUILD_BUG_ON(offsetof(struct compat_shared_info, wc) != 0x900);
 	BUILD_BUG_ON(offsetof(struct compat_shared_info, arch.wc_sec_hi) != 0x924);
 	BUILD_BUG_ON(offsetof(struct pvclock_vcpu_time_info, version) != 0);

-	/* 32-bit location by default */
-	wc_ofs = offsetof(struct compat_shared_info, wc);
-	sec_hi_ofs = offsetof(struct compat_shared_info, arch.wc_sec_hi);
-
 #ifdef CONFIG_X86_64
 	/* Paranoia checks on the 64-bit struct layout */
 	BUILD_BUG_ON(offsetof(struct shared_info, wc) != 0xc00);
 	BUILD_BUG_ON(offsetof(struct shared_info, wc_sec_hi) != 0xc0c);

-	if (kvm->arch.xen.long_mode) {
-		wc_ofs = offsetof(struct shared_info, wc);
-		sec_hi_ofs = offsetof(struct shared_info, wc_sec_hi);
-	}
+	if (IS_ENABLED(CONFIG_64BIT) && kvm->arch.xen.long_mode) {
+		struct shared_info *shinfo = gpc->khva;
+
+		wc_sec_hi = &shinfo->wc_sec_hi;
+		wc = &shinfo->wc;
+	} else
 #endif
+	{
+		struct compat_shared_info *shinfo = gpc->khva;
+
+		wc_sec_hi = &shinfo->arch.wc_sec_hi;
+		wc = &shinfo->wc;
+	}
+
+	/* Increment and ensure an odd value */
+	wc_version = wc->version = (wc->version + 1) | 1;
+	smp_wmb();
+
+	wc->nsec = do_div(wall_nsec,  1000000000);
+	wc->sec = (u32)wall_nsec;
+	*wc_sec_hi = wall_nsec >> 32;
+	smp_wmb();
+
+	wc->version = wc_version + 1;
+	read_unlock_irq(&gpc->lock);

-	kvm_write_wall_clock(kvm, gpa + wc_ofs, sec_hi_ofs - wc_ofs);
 	kvm_make_all_cpus_request(kvm, KVM_REQ_MASTERCLOCK_UPDATE);

 out:

```

[patchwork](http://jk.ozlabs.org/projects/patchwork/)
patch tracking system | version v2.2.6 | [about patchwork](/about/)



=== Content from lore.kernel.org_fa3c75d0_20250115_121656.html ===

```
[kvm.vger.kernel.org archive mirror](../?t=20211018171456)
 [help](../_/text/help/) / [color](../_/text/color/) / [mirror](../_/text/mirror/) / [Atom feed](../new.atom)
```
```
From: butt3rflyh4ck <butterflyhuangxx@gmail.com>
To: pbonzini@redhat.com
Cc: [kvm@vger.kernel.org](../../kvm/?t=20211018171456), LKML <[linux-kernel@vger.kernel.org](../../lkml/?t=20211018171456)>
Subject: [There is a null-ptr-deref bug in kvm_dirty_ring_get in virt/kvm/dirty_ring.c](#r)
Date: Tue, 19 Oct 2021 01:14:40 +0800	[[thread overview]](#r)
Message-ID: <CAFcO6XOmoS7EacN_n6v4Txk7xL7iqRa2gABg3F7E3Naf5uG94g@mail.gmail.com> (<raw>)

Hi, there is a null-ptr-deref bug in kvm_dirty_ring_get in
virt/kvm/dirty_ring.c and I reproduce it on 5.15.0-rc5+.

###analyze
we can call KVM_XEN_HVM_SET_ATTR ioctl and it would invoke
kvm_xen_hvm_set_attr(), it would call mark_page_dirty_in_slot().
mark_page_dirty_in_slot()
```
void mark_page_dirty_in_slot(struct kvm *kvm,
     struct kvm_memory_slot *memslot,
     gfn_t gfn)
{
if (memslot && kvm_slot_dirty_track_enabled(memslot)) {
unsigned long rel_gfn = gfn - memslot->base_gfn;
u32 slot = (memslot->as_id << 16) | memslot->id;

if (kvm->dirty_ring_size)
kvm_dirty_ring_push(kvm_dirty_ring_get(kvm),
    slot, rel_gfn);
else
set_bit_le(rel_gfn, memslot->dirty_bitmap);
}
}
```
mark_page_dirty_in_slot() would call kvm_dirty_ring_get() to get
vcpu->dirty_ring.
kvm_dirty_ring_get()
```
struct kvm_dirty_ring *kvm_dirty_ring_get(struct kvm *kvm)
{
struct kvm_vcpu *vcpu = kvm_get_running_vcpu();  //-------> invoke
kvm_get_running_vcpu() to get a vcpu.

WARN_ON_ONCE(vcpu->kvm != kvm); [1]

return &vcpu->dirty_ring;
}
```
but we had not called KVM_CREATE_VCPU ioctl to create a kvm_vcpu so
vcpu is NULL.

[1].vcpu->kvm caused a null pointer dereference.

###Crash log
root@syzkaller:/home/user# ./kvm_dirty_ring_get
[ 2608.490187][ T6513] BUG: kernel NULL pointer dereference, address:
0000000000000000
[ 2608.491652][ T6513] #PF: supervisor read access in kernel mode
[ 2608.492713][ T6513] #PF: error_code(0x0000) - not-present page
[ 2608.493770][ T6513] PGD 15944067 P4D 15944067 PUD 1589d067 PMD 0
[ 2608.495568][ T6513] Oops: 0000 [#1] PREEMPT SMP
[ 2608.496355][ T6513] CPU: 1 PID: 6513 Comm: kvm_dirty_ring_ Not
tainted 5.15.0-rc5+ #14
[ 2608.497755][ T6513] Hardware name: QEMU Standard PC (i440FX + PIIX,
1996), BIOS 1.13.0-1ubuntu1 04/01/2014
[ 2608.499451][ T6513] RIP: 0010:kvm_dirty_ring_get+0x9/0x20
[ 2608.500480][ T6513] Code: 90 e8 5b bb 04 00 83 c0 40 c3 0f 1f 80 00
00 00 00 8b 07 8b 57 04 29 d0 39 47 0c 0f 96 c0 c3 66 90 cc 48 89 fb
e8 17 06 ff ff <48> b
[ 2608.503997][ T6513] RSP: 0018:ffffc90000ab3c08 EFLAGS: 00010286
[ 2608.505054][ T6513] RAX: 0000000000000000 RBX: ffffc90000abd000
RCX: 0000000000000000
[ 2608.506346][ T6513] RDX: 0000000000000001 RSI: ffffffff84fc5baf
RDI: 00000000ffffffff
[ 2608.507705][ T6513] RBP: 0000000000000000 R08: 0000000000000000
R09: 0000000000050198
[ 2608.509119][ T6513] R10: 0000000000000001 R11: 0000000000000000
R12: 0000000000000000
[ 2608.510527][ T6513] R13: 0000000020fff000 R14: 0000000000000000
R15: 0000000000000004
[ 2608.512259][ T6513] FS:  0000000001cb0880(0000)
GS:ffff88807ec00000(0000) knlGS:0000000000000000
[ 2608.513848][ T6513] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 2608.515061][ T6513] CR2: 0000000000000000 CR3: 000000001583c000
CR4: 00000000000006e0
[ 2608.516506][ T6513] Call Trace:
[ 2608.517110][ T6513]  mark_page_dirty_in_slot.part.0+0x21/0x50
[ 2608.518163][ T6513]  __kvm_write_guest_page+0xa1/0xc0
[ 2608.519078][ T6513]  kvm_write_guest+0x42/0x80
[ 2608.519901][ T6513]  kvm_write_wall_clock+0x7f/0x140
[ 2608.520835][ T6513]  kvm_xen_hvm_set_attr+0x13d/0x190
[ 2608.521775][ T6513]  kvm_arch_vm_ioctl+0xa8b/0xc50
[ 2608.522762][ T6513]  ? tomoyo_path_number_perm+0xee/0x290
[ 2608.523771][ T6513]  kvm_vm_ioctl+0x716/0xe10
[ 2608.524545][ T6513]  __x64_sys_ioctl+0x7b/0xb0
[ 2608.525362][ T6513]  do_syscall_64+0x35/0xb0
[ 2608.530275][ T6513]  entry_SYSCALL_64_after_hwframe+0x44/0xae
[ 2608.531327][ T6513] RIP: 0033:0x44953d
[ 2608.532096][ T6513] Code: 28 c3 e8 36 29 00 00 66 0f 1f 44 00 00 f3
0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b
4c 24 08 0f 05 <48> 8
[ 2608.535565][ T6513] RSP: 002b:00007ffeb22c2238 EFLAGS: 00000202
ORIG_RAX: 0000000000000010
[ 2608.537028][ T6513] RAX: ffffffffffffffda RBX: 0000000000400518
RCX: 000000000044953d
[ 2608.538436][ T6513] RDX: 0000000020001080 RSI: 000000004048aec9
RDI: 0000000000000004
[ 2608.539851][ T6513] RBP: 00007ffeb22c2250 R08: 0000000000000000
R09: 0000000000000000
[ 2608.541273][ T6513] R10: 0000000000000000 R11: 0000000000000202
R12: 0000000000402fb0
[ 2608.542845][ T6513] R13: 0000000000000000 R14: 00000000004c0018
R15: 0000000000000000
[ 2608.544260][ T6513] Modules linked in:
[ 2608.544965][ T6513] CR2: 0000000000000000
[ 2608.547791][ T6513] ---[ end trace 69dbdf44c6028ede ]---
[ 2608.548674][ T6513] RIP: 0010:kvm_dirty_ring_get+0x9/0x20
[ 2608.549513][ T6513] Code: 90 e8 5b bb 04 00 83 c0 40 c3 0f 1f 80 00
00 00 00 8b 07 8b 57 04 29 d0 39 47 0c 0f 96 c0 c3 66 90 cc 48 89 fb
e8 17 06 ff ff <48> b
[ 2608.552808][ T6513] RSP: 0018:ffffc90000ab3c08 EFLAGS: 00010286
[ 2608.553702][ T6513] RAX: 0000000000000000 RBX: ffffc90000abd000
RCX: 0000000000000000
[ 2608.556308][ T6513] RDX: 0000000000000001 RSI: ffffffff84fc5baf
RDI: 00000000ffffffff
[ 2608.557778][ T6513] RBP: 0000000000000000 R08: 0000000000000000
R09: 0000000000050198
[ 2608.559314][ T6513] R10: 0000000000000001 R11: 0000000000000000
R12: 0000000000000000
[ 2608.560877][ T6513] R13: 0000000020fff000 R14: 0000000000000000
R15: 0000000000000004
[ 2608.562799][ T6513] FS:  0000000001cb0880(0000)
GS:ffff88803ec00000(0000) knlGS:0000000000000000
[ 2608.564529][ T6513] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 2608.565864][ T6513] CR2: 0000000020000001 CR3: 000000001583c000
CR4: 00000000000006f0
[ 2608.567378][ T6513] Kernel panic - not syncing: Fatal exception
[ 2608.568551][ T6513] Kernel Offset: disabled
[ 2608.574584][ T6513] Rebooting in 86400 seconds..

Regards,
 butt3rflyh4ck.

--
Active Defense Lab of Venustech

```

---

```
[next](../9eb83cdd-9314-0d1f-0d4b-0cf4432e1e84%40redhat.com/)             [reply](#R)other threads:[[~2021-10-18 17:14 UTC](../?t=20211018171456)|[newest](../)]

Thread overview: 27+ messages / expand[[flat](T/#u)|[nested](t/#u)]  [mbox.gz](t.mbox.gz)  [Atom feed](t.atom)  [top](#b)
2021-10-18 17:14 [butt3rflyh4ck [this message]](#t)
2021-10-21 20:08 ` [There is a null-ptr-deref bug in kvm_dirty_ring_get in virt/kvm/dirty_ring.c](../9eb83cdd-9314-0d1f-0d4b-0cf4432e1e84%40redhat.com/) Paolo Bonzini
2021-10-28  7:42   ` [butt3rflyh4ck](../CAFcO6XO7YMxHN%2BTwZvr3fxFypTt_nE3xLdvuBKPF_j0-ApsiFg%40mail.gmail.com/)
2021-11-08  5:11   ` [butt3rflyh4ck](../CAFcO6XMe9RXRHxbjXoNBE3xFaATJggrpiRH-9127XBrBzf3eeg%40mail.gmail.com/)
2021-11-16 15:41   ` [butt3rflyh4ck](../CAFcO6XMyBDU8hYNAa7s9sGHEntTz5iJmLF2QbRN-S8PPpYd_ZQ%40mail.gmail.com/)
2021-11-16 16:22   ` [[EXTERNAL]](../a6d8416c50ba86b57f7f193c1ea2f388de90c0bc.camel%40infradead.org/) " David Woodhouse
2021-11-16 17:07     ` [David Woodhouse](../2563218f606faac912d17a40edb4d564191fd9f8.camel%40infradead.org/)
2021-11-17  9:46   ` [Woodhouse, David](../4b739ed0ce31e459eb8af9f5b0e2b1516d8e4517.camel%40amazon.co.uk/)
2021-11-17 16:49     ` [Paolo Bonzini](../20eddd70-7abb-e1a8-a003-62ed08fc1cac%40redhat.com/)
2021-11-17 18:10       ` [Woodhouse, David](../f83554ba7bfea1ab45d316db4b68569382727175.camel%40amazon.co.uk/)
2021-11-20 10:16   ` [KVM: Warn if mark_page_dirty() is called without an active vCPU](../e8f40b8765f2feefb653d8a67e487818f66581aa.camel%40infradead.org/) David Woodhouse
2021-11-22 17:01     ` [Sean Christopherson](../YZvNB0ByFmdEkUVX%40google.com/)
2021-11-22 17:52       ` [David Woodhouse](../ee872549432eaf62c0c5a722b94ac4390ef3df83.camel%40infradead.org/)
2021-11-22 18:49         ` [Sean Christopherson](../YZvmQjgdI/gQj6T6%40google.com/)
2022-01-13 12:06     ` [Christian Borntraeger](../20220113120609.736701-1-borntraeger%40linux.ibm.com/)
2022-01-13 12:14       ` [Paolo Bonzini](../e9e5521d-21e5-8f6f-902c-17b0516b9839%40redhat.com/)
2022-01-13 12:29         ` [[PATCH] KVM: avoid warning on s390 in mark_page_dirty](../20220113122924.740496-1-borntraeger%40linux.ibm.com/) Christian Borntraeger
2022-01-13 12:31           ` [David Woodhouse](../c11eeeba5a1633a59fea601772d55ab2b7f4db98.camel%40infradead.org/)
2022-01-18  8:37           ` [Christian Borntraeger](../eda019b1-8e1d-5d2b-4be4-2725e5814b23%40linux.ibm.com/)
2022-01-18  8:44             ` [Paolo Bonzini](../14380a1b-669f-8f0f-139b-7c89fabd4276%40redhat.com/)
2022-01-18  8:53               ` [Christian Borntraeger](../d39d9a13-e797-b7d3-6240-db3957b6ff53%40linux.ibm.com/)
2022-01-18 11:44                 ` [Paolo Bonzini](../073cdc28-6dbb-a2d1-ee1b-f3b53d5b7c81%40redhat.com/)
2022-01-13 12:30         ` [KVM: Warn if mark_page_dirty() is called without an active vCPU](../b6d9785d769f98da0b057fac643b0f088e346a94.camel%40infradead.org/) David Woodhouse
2022-01-13 12:51           ` [Christian Borntraeger](../c685a543-a524-9c95-4b85-f53a0ff744a9%40linux.ibm.com/)
2022-01-13 13:22             ` [David Woodhouse](../bfc53985a178f43a3a21796f33449570cf9e4649.camel%40infradead.org/)
2022-01-13 15:09               ` [Christian Borntraeger](../4a54cba5-6fce-7810-2966-b990d0dbb7c3%40linux.ibm.com/)
2022-01-13 14:36           ` [Paolo Bonzini](../bdad7add-408f-e649-c796-6f83420077fc%40redhat.com/)

```

---

```
Reply instructions:

You may reply publicly to [this message](#t) via plain-text email
using any one of the following methods:

* Save the following mbox file, import it into your mail client,
  and reply-to-all from there: [mbox](raw)

  Avoid top-posting and favor interleaved quoting:
  <https://en.wikipedia.org/wiki/Posting_style#Interleaved_style>

* Reply using the --to, --cc, and --in-reply-to
  switches of git-send-email(1):

  git send-email \
    --in-reply-to=CAFcO6XOmoS7EacN_n6v4Txk7xL7iqRa2gABg3F7E3Naf5uG94g@mail.gmail.com \
    --to=butterflyhuangxx@gmail.com \
    --cc=kvm@vger.kernel.org \
    --cc=linux-kernel@vger.kernel.org \
    --cc=pbonzini@redhat.com \
    /path/to/YOUR_REPLY

  <https://kernel.org/pub/software/scm/git/docs/git-send-email.html>

* If your mail client supports setting the In-Reply-To header
  via mailto: links, try the mailto: link

```
Be sure your reply has a **Subject:** header at the top and a blank line
before the message body.

---

```
This is a public inbox, see [mirroring instructions](../_/text/mirror/)
for how to clone and mirror all data and code used for this inbox;
as well as URLs for NNTP newsgroup(s).
```


=== Content from bugzilla.redhat.com_0b5bf223_20250115_184737.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D2031194)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D2031194)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D2031194)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 2031194

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 2031194**](show_bug.cgi?id=2031194)
(CVE-2021-4095)
- [CVE-2021-4095](https://access.redhat.com/security/cve/CVE-2021-4095) kernel: KVM: NULL pointer dereference in kvm\_dirty\_ring\_get() in virt/kvm/dirty\_ring.c

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2021-4095 kernel: KVM: NULL pointer dereference in kvm\_dirty\_ring\_get() i...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED NOTABUG | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2021-4095 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [2031195](show_bug.cgi?id=2031195 "CLOSED ERRATA - CVE-2021-4095 kernel: KVM: NULL pointer dereference in kvm_dirty_ring_get() in virt/kvm/dirty_ring.c [fedora-all]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [2026458](show_bug.cgi?id=2026458) [2031196](show_bug.cgi?id=2031196) | | TreeView+ | [depends on](buglist.cgi?bug_id=2031194&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=2031194&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2021-12-10 18:20 UTC by Guilherme de Almeida Suckevicz | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2022-08-03 09:43 UTC ([History](show_activity.cgi?id=2031194)) | | [CC List:](page.cgi?id=fields.html#cclist) | 48 users (show)  acaringi adscvr airlied alciregi bhu blc brdeoliv bskeggs carnil chwhite crwood dhoward dvlasenk fhrbata fpacheco hdegoede hkrzesin jarod jarodwilson jburrell jeremy jfaracco jforbes jglisse jlelli jonathan josef jshortt jstancek jwboyer kcarcia kernel-maint kernel-mgr lgoncalv linville lzampier masami256 mchehab mlangsdo nmurray ptalbert qzhao rvrbovsk scweaver steved vkumar walters williams | | Fixed In Version: | kernel 5.17 | | | Doc Type: | If docs needed, set a value | | | Doc Text: | A NULL pointer dereference was found in the Linux kernel's KVM when dirty ring logging is enabled without an active vCPU context. An unprivileged local attacker on the host may use this flaw to cause a kernel oops condition and thus a denial of service by issuing a KVM\_XEN\_HVM\_SET\_ATTR ioctl. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2021-12-16 15:15:09 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=2031194#c0)  Guilherme de Almeida Suckevicz    2021-12-10 18:20:34 UTC  ``` A NULL pointer dereference in kvm_dirty_ring_get() in virt/kvm/dirty_ring.c via a KVM KVM_XEN_HVM_SET_ATTR ioctl when there is no vCPU created.  References: [https://lore.kernel.org/kvm/CAFcO6XOmoS7EacN_n6v4Txk7xL7iqRa2gABg3F7E3Naf5uG94g@mail.gmail.com/](https://lore.kernel.org/kvm/CAFcO6XOmoS7EacN_n6v4Txk7xL7iqRa2gABg3F7E3Naf5uG94g%40mail.gmail.com/) [https://patchwork.kernel.org/project/kvm/patch/20211121125451.9489-12-dwmw2@infradead.org/](https://patchwork.kernel.org/project/kvm/patch/20211121125451.9489-12-dwmw2%40infradead.org/)   ```  [Comment 1](show_bug.cgi?id=2031194#c1)  Guilherme de Almeida Suckevicz    2021-12-10 18:21:26 UTC  ``` Created kernel tracking bugs for this issue:  Affects: fedora-all [[bug 2031195](show_bug.cgi?id=2031195 "CLOSED ERRATA - CVE-2021-4095 kernel: KVM: NULL pointer dereference in kvm_dirty_ring_get() in virt/kvm/dirty_ring.c [fedora-all]")]   ```  [Comment 4](show_bug.cgi?id=2031194#c4)  Mauro Matteo Cascella    2022-01-17 11:31:24 UTC  ``` The patch for this issue is now available upstream: <https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=55749769fe608fa3f4a075e42e89d237c8e37637>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=2031194&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from git.kernel.org_3896a586_20250115_184732.html ===


| [cgit logo](/) | Kernel.org git repositories |
| --- | --- |
| Git repositories hosted at kernel.org |

| [index](/) |  |
| --- | --- |

| [Name](/pub/scm/linux/kernel/git/torvalds?s=name) | [Description](/pub/scm/linux/kernel/git/torvalds?s=desc) | [Owner](/pub/scm/linux/kernel/git/torvalds?s=owner) | [Idle](/pub/scm/linux/kernel/git/torvalds?s=idle) | Links |
| --- | --- | --- | --- | --- |
| pub/scm/linux | | | | |
| [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | [Linux kernel source tree](/pub/scm/linux/kernel/git/torvalds/linux.git/) | [Linus Torvalds](/pub/scm/linux/kernel/git/torvalds?q=Linus+Torvalds) | 16 hours | [summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/) |
| [kernel/git/torvalds/pesconvert.git](/pub/scm/linux/kernel/git/torvalds/pesconvert.git/) | [PES-file thumbnailer, Brother embroidery format](/pub/scm/linux/kernel/git/torvalds/pesconvert.git/) | [Linus Torvalds](/pub/scm/linux/kernel/git/torvalds?q=Linus+Torvalds) | 7 years | [summary](/pub/scm/linux/kernel/git/torvalds/pesconvert.git/)[log](/pub/scm/linux/kernel/git/torvalds/pesconvert.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/pesconvert.git/tree/) |
| [kernel/git/torvalds/sparse.git](/pub/scm/linux/kernel/git/torvalds/sparse.git/) | [Unnamed repository; edit this file 'description' to name the repository.](/pub/scm/linux/kernel/git/torvalds/sparse.git/) | [Linus Torvalds](/pub/scm/linux/kernel/git/torvalds?q=Linus+Torvalds) | 2 years | [summary](/pub/scm/linux/kernel/git/torvalds/sparse.git/)[log](/pub/scm/linux/kernel/git/torvalds/sparse.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/sparse.git/tree/) |
| [kernel/git/torvalds/uemacs.git](/pub/scm/linux/kernel/git/torvalds/uemacs.git/) | [Micro-emacs](/pub/scm/linux/kernel/git/torvalds/uemacs.git/) | [Linus Torvalds](/pub/scm/linux/kernel/git/torvalds?q=Linus+Torvalds) | 12 years | [summary](/pub/scm/linux/kernel/git/torvalds/uemacs.git/)[log](/pub/scm/linux/kernel/git/torvalds/uemacs.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/uemacs.git/tree/) |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 18:46:09 +0000



=== Content from git.kernel.org_dfaabb81_20250115_121655.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=55749769fe608fa3f4a075e42e89d237c8e37637)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=55749769fe608fa3f4a075e42e89d237c8e37637)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=55749769fe608fa3f4a075e42e89d237c8e37637)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=55749769fe608fa3f4a075e42e89d237c8e37637)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | David Woodhouse <dwmw@amazon.co.uk> | 2021-12-10 16:36:24 +0000 |
| --- | --- | --- |
| committer | Paolo Bonzini <pbonzini@redhat.com> | 2022-01-07 10:44:45 -0500 |
| commit | [55749769fe608fa3f4a075e42e89d237c8e37637](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=55749769fe608fa3f4a075e42e89d237c8e37637) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=55749769fe608fa3f4a075e42e89d237c8e37637)) | |
| tree | [c99579f4f18b42a971d486fe53aabf02756dd538](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=55749769fe608fa3f4a075e42e89d237c8e37637) | |
| parent | [14243b387137a4afbe1df5d9dc15182d6657bb79](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=14243b387137a4afbe1df5d9dc15182d6657bb79) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=55749769fe608fa3f4a075e42e89d237c8e37637&id2=14243b387137a4afbe1df5d9dc15182d6657bb79)) | |
| download | [linux-55749769fe608fa3f4a075e42e89d237c8e37637.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-55749769fe608fa3f4a075e42e89d237c8e37637.tar.gz) | |

KVM: x86: Fix wall clock writes in Xen shared\_info not to mark page dirtyWhen dirty ring logging is enabled, any dirty logging without an active
vCPU context will cause a kernel oops. But we've already declared that
the shared\_info page doesn't get dirty tracking anyway, since it would
be kind of insane to mark it dirty every time we deliver an event channel
interrupt. Userspace is supposed to just assume it's always dirty any
time a vCPU can run or event channels are routed.
So stop using the generic kvm\_write\_wall\_clock() and just write directly
through the gfn\_to\_pfn\_cache that we already have set up.
We can make kvm\_write\_wall\_clock() static in x86.c again now, but let's
not remove the 'sec\_hi\_ofs' argument even though it's not used yet. At
some point we \*will\* want to use that for KVM guests too.
Fixes: 629b5348841a ("KVM: x86/xen: update wallclock region")
Reported-by: butt3rflyh4ck <butterflyhuangxx@gmail.com>
Signed-off-by: David Woodhouse <dwmw@amazon.co.uk>
Message-Id: <20211210163625.2886-6-dwmw2@infradead.org>
Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=55749769fe608fa3f4a075e42e89d237c8e37637)

| -rw-r--r-- | [arch/x86/kvm/x86.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/x86/kvm/x86.c?id=55749769fe608fa3f4a075e42e89d237c8e37637) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [arch/x86/kvm/x86.h](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/x86/kvm/x86.h?id=55749769fe608fa3f4a075e42e89d237c8e37637) | 1 | |  |  |  | | --- | --- | --- | |
| -rw-r--r-- | [arch/x86/kvm/xen.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/x86/kvm/xen.c?id=55749769fe608fa3f4a075e42e89d237c8e37637) | 62 | |  |  |  | | --- | --- | --- | |

3 files changed, 49 insertions, 16 deletions

| diff --git a/arch/x86/kvm/x86.c b/arch/x86/kvm/x86.cindex 3050601d5d7364..6492329f2e9a3f 100644--- a/[arch/x86/kvm/x86.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/x86.c?id=14243b387137a4afbe1df5d9dc15182d6657bb79)+++ b/[arch/x86/kvm/x86.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/x86.c?id=55749769fe608fa3f4a075e42e89d237c8e37637)@@ -2135,7 +2135,7 @@ static s64 get\_kvmclock\_base\_ns(void) } #endif -void kvm\_write\_wall\_clock(struct kvm \*kvm, gpa\_t wall\_clock, int sec\_hi\_ofs)+static void kvm\_write\_wall\_clock(struct kvm \*kvm, gpa\_t wall\_clock, int sec\_hi\_ofs) { int version; int r;diff --git a/arch/x86/kvm/x86.h b/arch/x86/kvm/x86.hindex 4abcd8d9836ddc..da7031e80f23a3 100644--- a/[arch/x86/kvm/x86.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/x86.h?id=14243b387137a4afbe1df5d9dc15182d6657bb79)+++ b/[arch/x86/kvm/x86.h](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/x86.h?id=55749769fe608fa3f4a075e42e89d237c8e37637)@@ -301,7 +301,6 @@ static inline bool kvm\_vcpu\_latch\_init(struct kvm\_vcpu \*vcpu) return is\_smm(vcpu) || static\_call(kvm\_x86\_apic\_init\_signal\_blocked)(vcpu); } -void kvm\_write\_wall\_clock(struct kvm \*kvm, gpa\_t wall\_clock, int sec\_hi\_ofs); void kvm\_inject\_realmode\_interrupt(struct kvm\_vcpu \*vcpu, int irq, int inc\_eip);  u64 get\_kvmclock\_ns(struct kvm \*kvm);diff --git a/arch/x86/kvm/xen.c b/arch/x86/kvm/xen.cindex ceddabd1f5c6f3..0e3f7d6e9fd775 100644--- a/[arch/x86/kvm/xen.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/xen.c?id=14243b387137a4afbe1df5d9dc15182d6657bb79)+++ b/[arch/x86/kvm/xen.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kvm/xen.c?id=55749769fe608fa3f4a075e42e89d237c8e37637)@@ -25,8 +25,11 @@ DEFINE\_STATIC\_KEY\_DEFERRED\_FALSE(kvm\_xen\_enabled, HZ); static int kvm\_xen\_shared\_info\_init(struct kvm \*kvm, gfn\_t gfn) { struct gfn\_to\_pfn\_cache \*gpc = &kvm->arch.xen.shinfo\_cache;+ struct pvclock\_wall\_clock \*wc; gpa\_t gpa = gfn\_to\_gpa(gfn);- int wc\_ofs, sec\_hi\_ofs;+ u32 \*wc\_sec\_hi;+ u32 wc\_version;+ u64 wall\_nsec; int ret = 0; int idx = srcu\_read\_lock(&kvm->srcu); @@ -35,32 +38,63 @@ static int kvm\_xen\_shared\_info\_init(struct kvm \*kvm, gfn\_t gfn) goto out; } - ret = kvm\_gfn\_to\_pfn\_cache\_init(kvm, gpc, NULL, false, true, gpa,- PAGE\_SIZE, false);- if (ret)- goto out;+ do {+ ret = kvm\_gfn\_to\_pfn\_cache\_init(kvm, gpc, NULL, false, true,+ gpa, PAGE\_SIZE, false);+ if (ret)+ goto out;++ /\*+ \* This code mirrors kvm\_write\_wall\_clock() except that it writes+ \* directly through the pfn cache and doesn't mark the page dirty.+ \*/+ wall\_nsec = ktime\_get\_real\_ns() - get\_kvmclock\_ns(kvm);++ /\* It could be invalid again already, so we need to check \*/+ read\_lock\_irq(&gpc->lock);++ if (gpc->valid)+ break;++ read\_unlock\_irq(&gpc->lock);+ } while (1);  /\* Paranoia checks on the 32-bit struct layout \*/ BUILD\_BUG\_ON(offsetof(struct compat\_shared\_info, wc) != 0x900); BUILD\_BUG\_ON(offsetof(struct compat\_shared\_info, arch.wc\_sec\_hi) != 0x924); BUILD\_BUG\_ON(offsetof(struct pvclock\_vcpu\_time\_info, version) != 0); - /\* 32-bit location by default \*/- wc\_ofs = offsetof(struct compat\_shared\_info, wc);- sec\_hi\_ofs = offsetof(struct compat\_shared\_info, arch.wc\_sec\_hi);- #ifdef CONFIG\_X86\_64 /\* Paranoia checks on the 64-bit struct layout \*/ BUILD\_BUG\_ON(offsetof(struct shared\_info, wc) != 0xc00); BUILD\_BUG\_ON(offsetof(struct shared\_info, wc\_sec\_hi) != 0xc0c); - if (kvm->arch.xen.long\_mode) {- wc\_ofs = offsetof(struct shared\_info, wc);- sec\_hi\_ofs = offsetof(struct shared\_info, wc\_sec\_hi);- }+ if (IS\_ENABLED(CONFIG\_64BIT) && kvm->arch.xen.long\_mode) {+ struct shared\_info \*shinfo = gpc->khva;++ wc\_sec\_hi = &shinfo->wc\_sec\_hi;+ wc = &shinfo->wc;+ } else #endif+ {+ struct compat\_shared\_info \*shinfo = gpc->khva;++ wc\_sec\_hi = &shinfo->arch.wc\_sec\_hi;+ wc = &shinfo->wc;+ }++ /\* Increment and ensure an odd value \*/+ wc\_version = wc->version = (wc->version + 1) | 1;+ smp\_wmb();++ wc->nsec = do\_div(wall\_nsec, 1000000000);+ wc->sec = (u32)wall\_nsec;+ \*wc\_sec\_hi = wall\_nsec >> 32;+ smp\_wmb();++ wc->version = wc\_version + 1;+ read\_unlock\_irq(&gpc->lock); - kvm\_write\_wall\_clock(kvm, gpa + wc\_ofs, sec\_hi\_ofs - wc\_ofs); kvm\_make\_all\_cpus\_request(kvm, KVM\_REQ\_MASTERCLOCK\_UPDATE);  out: |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 12:15:32 +0000



=== Content from lore.kernel.org_3de262c6_20250115_121656.html ===

```
[kvm.vger.kernel.org archive mirror](../?t=20211018171456)
 [help](../_/text/help/) / [color](../_/text/color/) / [mirror](../_/text/mirror/) / [Atom feed](../new.atom)
```
```
From: butt3rflyh4ck <butterflyhuangxx@gmail.com>
To: pbonzini@redhat.com
Cc: [kvm@vger.kernel.org](../../kvm/?t=20211018171456), LKML <[linux-kernel@vger.kernel.org](../../lkml/?t=20211018171456)>
Subject: [There is a null-ptr-deref bug in kvm_dirty_ring_get in virt/kvm/dirty_ring.c](#r)
Date: Tue, 19 Oct 2021 01:14:40 +0800	[[thread overview]](#r)
Message-ID: <CAFcO6XOmoS7EacN_n6v4Txk7xL7iqRa2gABg3F7E3Naf5uG94g@mail.gmail.com> (<raw>)

Hi, there is a null-ptr-deref bug in kvm_dirty_ring_get in
virt/kvm/dirty_ring.c and I reproduce it on 5.15.0-rc5+.

###analyze
we can call KVM_XEN_HVM_SET_ATTR ioctl and it would invoke
kvm_xen_hvm_set_attr(), it would call mark_page_dirty_in_slot().
mark_page_dirty_in_slot()
```
void mark_page_dirty_in_slot(struct kvm *kvm,
     struct kvm_memory_slot *memslot,
     gfn_t gfn)
{
if (memslot && kvm_slot_dirty_track_enabled(memslot)) {
unsigned long rel_gfn = gfn - memslot->base_gfn;
u32 slot = (memslot->as_id << 16) | memslot->id;

if (kvm->dirty_ring_size)
kvm_dirty_ring_push(kvm_dirty_ring_get(kvm),
    slot, rel_gfn);
else
set_bit_le(rel_gfn, memslot->dirty_bitmap);
}
}
```
mark_page_dirty_in_slot() would call kvm_dirty_ring_get() to get
vcpu->dirty_ring.
kvm_dirty_ring_get()
```
struct kvm_dirty_ring *kvm_dirty_ring_get(struct kvm *kvm)
{
struct kvm_vcpu *vcpu = kvm_get_running_vcpu();  //-------> invoke
kvm_get_running_vcpu() to get a vcpu.

WARN_ON_ONCE(vcpu->kvm != kvm); [1]

return &vcpu->dirty_ring;
}
```
but we had not called KVM_CREATE_VCPU ioctl to create a kvm_vcpu so
vcpu is NULL.

[1].vcpu->kvm caused a null pointer dereference.

###Crash log
root@syzkaller:/home/user# ./kvm_dirty_ring_get
[ 2608.490187][ T6513] BUG: kernel NULL pointer dereference, address:
0000000000000000
[ 2608.491652][ T6513] #PF: supervisor read access in kernel mode
[ 2608.492713][ T6513] #PF: error_code(0x0000) - not-present page
[ 2608.493770][ T6513] PGD 15944067 P4D 15944067 PUD 1589d067 PMD 0
[ 2608.495568][ T6513] Oops: 0000 [#1] PREEMPT SMP
[ 2608.496355][ T6513] CPU: 1 PID: 6513 Comm: kvm_dirty_ring_ Not
tainted 5.15.0-rc5+ #14
[ 2608.497755][ T6513] Hardware name: QEMU Standard PC (i440FX + PIIX,
1996), BIOS 1.13.0-1ubuntu1 04/01/2014
[ 2608.499451][ T6513] RIP: 0010:kvm_dirty_ring_get+0x9/0x20
[ 2608.500480][ T6513] Code: 90 e8 5b bb 04 00 83 c0 40 c3 0f 1f 80 00
00 00 00 8b 07 8b 57 04 29 d0 39 47 0c 0f 96 c0 c3 66 90 cc 48 89 fb
e8 17 06 ff ff <48> b
[ 2608.503997][ T6513] RSP: 0018:ffffc90000ab3c08 EFLAGS: 00010286
[ 2608.505054][ T6513] RAX: 0000000000000000 RBX: ffffc90000abd000
RCX: 0000000000000000
[ 2608.506346][ T6513] RDX: 0000000000000001 RSI: ffffffff84fc5baf
RDI: 00000000ffffffff
[ 2608.507705][ T6513] RBP: 0000000000000000 R08: 0000000000000000
R09: 0000000000050198
[ 2608.509119][ T6513] R10: 0000000000000001 R11: 0000000000000000
R12: 0000000000000000
[ 2608.510527][ T6513] R13: 0000000020fff000 R14: 0000000000000000
R15: 0000000000000004
[ 2608.512259][ T6513] FS:  0000000001cb0880(0000)
GS:ffff88807ec00000(0000) knlGS:0000000000000000
[ 2608.513848][ T6513] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 2608.515061][ T6513] CR2: 0000000000000000 CR3: 000000001583c000
CR4: 00000000000006e0
[ 2608.516506][ T6513] Call Trace:
[ 2608.517110][ T6513]  mark_page_dirty_in_slot.part.0+0x21/0x50
[ 2608.518163][ T6513]  __kvm_write_guest_page+0xa1/0xc0
[ 2608.519078][ T6513]  kvm_write_guest+0x42/0x80
[ 2608.519901][ T6513]  kvm_write_wall_clock+0x7f/0x140
[ 2608.520835][ T6513]  kvm_xen_hvm_set_attr+0x13d/0x190
[ 2608.521775][ T6513]  kvm_arch_vm_ioctl+0xa8b/0xc50
[ 2608.522762][ T6513]  ? tomoyo_path_number_perm+0xee/0x290
[ 2608.523771][ T6513]  kvm_vm_ioctl+0x716/0xe10
[ 2608.524545][ T6513]  __x64_sys_ioctl+0x7b/0xb0
[ 2608.525362][ T6513]  do_syscall_64+0x35/0xb0
[ 2608.530275][ T6513]  entry_SYSCALL_64_after_hwframe+0x44/0xae
[ 2608.531327][ T6513] RIP: 0033:0x44953d
[ 2608.532096][ T6513] Code: 28 c3 e8 36 29 00 00 66 0f 1f 44 00 00 f3
0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b
4c 24 08 0f 05 <48> 8
[ 2608.535565][ T6513] RSP: 002b:00007ffeb22c2238 EFLAGS: 00000202
ORIG_RAX: 0000000000000010
[ 2608.537028][ T6513] RAX: ffffffffffffffda RBX: 0000000000400518
RCX: 000000000044953d
[ 2608.538436][ T6513] RDX: 0000000020001080 RSI: 000000004048aec9
RDI: 0000000000000004
[ 2608.539851][ T6513] RBP: 00007ffeb22c2250 R08: 0000000000000000
R09: 0000000000000000
[ 2608.541273][ T6513] R10: 0000000000000000 R11: 0000000000000202
R12: 0000000000402fb0
[ 2608.542845][ T6513] R13: 0000000000000000 R14: 00000000004c0018
R15: 0000000000000000
[ 2608.544260][ T6513] Modules linked in:
[ 2608.544965][ T6513] CR2: 0000000000000000
[ 2608.547791][ T6513] ---[ end trace 69dbdf44c6028ede ]---
[ 2608.548674][ T6513] RIP: 0010:kvm_dirty_ring_get+0x9/0x20
[ 2608.549513][ T6513] Code: 90 e8 5b bb 04 00 83 c0 40 c3 0f 1f 80 00
00 00 00 8b 07 8b 57 04 29 d0 39 47 0c 0f 96 c0 c3 66 90 cc 48 89 fb
e8 17 06 ff ff <48> b
[ 2608.552808][ T6513] RSP: 0018:ffffc90000ab3c08 EFLAGS: 00010286
[ 2608.553702][ T6513] RAX: 0000000000000000 RBX: ffffc90000abd000
RCX: 0000000000000000
[ 2608.556308][ T6513] RDX: 0000000000000001 RSI: ffffffff84fc5baf
RDI: 00000000ffffffff
[ 2608.557778][ T6513] RBP: 0000000000000000 R08: 0000000000000000
R09: 0000000000050198
[ 2608.559314][ T6513] R10: 0000000000000001 R11: 0000000000000000
R12: 0000000000000000
[ 2608.560877][ T6513] R13: 0000000020fff000 R14: 0000000000000000
R15: 0000000000000004
[ 2608.562799][ T6513] FS:  0000000001cb0880(0000)
GS:ffff88803ec00000(0000) knlGS:0000000000000000
[ 2608.564529][ T6513] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 2608.565864][ T6513] CR2: 0000000020000001 CR3: 000000001583c000
CR4: 00000000000006f0
[ 2608.567378][ T6513] Kernel panic - not syncing: Fatal exception
[ 2608.568551][ T6513] Kernel Offset: disabled
[ 2608.574584][ T6513] Rebooting in 86400 seconds..

Regards,
 butt3rflyh4ck.

--
Active Defense Lab of Venustech

```

---

```
[next](../9eb83cdd-9314-0d1f-0d4b-0cf4432e1e84%40redhat.com/)             [reply](#R)other threads:[[~2021-10-18 17:14 UTC](../?t=20211018171456)|[newest](../)]

Thread overview: 27+ messages / expand[[flat](T/#u)|[nested](t/#u)]  [mbox.gz](t.mbox.gz)  [Atom feed](t.atom)  [top](#b)
2021-10-18 17:14 [butt3rflyh4ck [this message]](#t)
2021-10-21 20:08 ` [There is a null-ptr-deref bug in kvm_dirty_ring_get in virt/kvm/dirty_ring.c](../9eb83cdd-9314-0d1f-0d4b-0cf4432e1e84%40redhat.com/) Paolo Bonzini
2021-10-28  7:42   ` [butt3rflyh4ck](../CAFcO6XO7YMxHN%2BTwZvr3fxFypTt_nE3xLdvuBKPF_j0-ApsiFg%40mail.gmail.com/)
2021-11-08  5:11   ` [butt3rflyh4ck](../CAFcO6XMe9RXRHxbjXoNBE3xFaATJggrpiRH-9127XBrBzf3eeg%40mail.gmail.com/)
2021-11-16 15:41   ` [butt3rflyh4ck](../CAFcO6XMyBDU8hYNAa7s9sGHEntTz5iJmLF2QbRN-S8PPpYd_ZQ%40mail.gmail.com/)
2021-11-16 16:22   ` [[EXTERNAL]](../a6d8416c50ba86b57f7f193c1ea2f388de90c0bc.camel%40infradead.org/) " David Woodhouse
2021-11-16 17:07     ` [David Woodhouse](../2563218f606faac912d17a40edb4d564191fd9f8.camel%40infradead.org/)
2021-11-17  9:46   ` [Woodhouse, David](../4b739ed0ce31e459eb8af9f5b0e2b1516d8e4517.camel%40amazon.co.uk/)
2021-11-17 16:49     ` [Paolo Bonzini](../20eddd70-7abb-e1a8-a003-62ed08fc1cac%40redhat.com/)
2021-11-17 18:10       ` [Woodhouse, David](../f83554ba7bfea1ab45d316db4b68569382727175.camel%40amazon.co.uk/)
2021-11-20 10:16   ` [KVM: Warn if mark_page_dirty() is called without an active vCPU](../e8f40b8765f2feefb653d8a67e487818f66581aa.camel%40infradead.org/) David Woodhouse
2021-11-22 17:01     ` [Sean Christopherson](../YZvNB0ByFmdEkUVX%40google.com/)
2021-11-22 17:52       ` [David Woodhouse](../ee872549432eaf62c0c5a722b94ac4390ef3df83.camel%40infradead.org/)
2021-11-22 18:49         ` [Sean Christopherson](../YZvmQjgdI/gQj6T6%40google.com/)
2022-01-13 12:06     ` [Christian Borntraeger](../20220113120609.736701-1-borntraeger%40linux.ibm.com/)
2022-01-13 12:14       ` [Paolo Bonzini](../e9e5521d-21e5-8f6f-902c-17b0516b9839%40redhat.com/)
2022-01-13 12:29         ` [[PATCH] KVM: avoid warning on s390 in mark_page_dirty](../20220113122924.740496-1-borntraeger%40linux.ibm.com/) Christian Borntraeger
2022-01-13 12:31           ` [David Woodhouse](../c11eeeba5a1633a59fea601772d55ab2b7f4db98.camel%40infradead.org/)
2022-01-18  8:37           ` [Christian Borntraeger](../eda019b1-8e1d-5d2b-4be4-2725e5814b23%40linux.ibm.com/)
2022-01-18  8:44             ` [Paolo Bonzini](../14380a1b-669f-8f0f-139b-7c89fabd4276%40redhat.com/)
2022-01-18  8:53               ` [Christian Borntraeger](../d39d9a13-e797-b7d3-6240-db3957b6ff53%40linux.ibm.com/)
2022-01-18 11:44                 ` [Paolo Bonzini](../073cdc28-6dbb-a2d1-ee1b-f3b53d5b7c81%40redhat.com/)
2022-01-13 12:30         ` [KVM: Warn if mark_page_dirty() is called without an active vCPU](../b6d9785d769f98da0b057fac643b0f088e346a94.camel%40infradead.org/) David Woodhouse
2022-01-13 12:51           ` [Christian Borntraeger](../c685a543-a524-9c95-4b85-f53a0ff744a9%40linux.ibm.com/)
2022-01-13 13:22             ` [David Woodhouse](../bfc53985a178f43a3a21796f33449570cf9e4649.camel%40infradead.org/)
2022-01-13 15:09               ` [Christian Borntraeger](../4a54cba5-6fce-7810-2966-b990d0dbb7c3%40linux.ibm.com/)
2022-01-13 14:36           ` [Paolo Bonzini](../bdad7add-408f-e649-c796-6f83420077fc%40redhat.com/)

```

---

```
Reply instructions:

You may reply publicly to [this message](#t) via plain-text email
using any one of the following methods:

* Save the following mbox file, import it into your mail client,
  and reply-to-all from there: [mbox](raw)

  Avoid top-posting and favor interleaved quoting:
  <https://en.wikipedia.org/wiki/Posting_style#Interleaved_style>

* Reply using the --to, --cc, and --in-reply-to
  switches of git-send-email(1):

  git send-email \
    --in-reply-to=CAFcO6XOmoS7EacN_n6v4Txk7xL7iqRa2gABg3F7E3Naf5uG94g@mail.gmail.com \
    --to=butterflyhuangxx@gmail.com \
    --cc=kvm@vger.kernel.org \
    --cc=linux-kernel@vger.kernel.org \
    --cc=pbonzini@redhat.com \
    /path/to/YOUR_REPLY

  <https://kernel.org/pub/software/scm/git/docs/git-send-email.html>

* If your mail client supports setting the In-Reply-To header
  via mailto: links, try the mailto: link

```
Be sure your reply has a **Subject:** header at the top and a blank line
before the message body.

---

```
This is a public inbox, see [mirroring instructions](../_/text/mirror/)
for how to clone and mirror all data and code used for this inbox;
as well as URLs for NNTP newsgroup(s).
```


=== Content from access.redhat.com_77c6e9f4_20250115_184734.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)


