=== Content from git.kernel.org_538ab0d9_20250115_093359.html ===


| [cgit logo](/) | [index](/) : [klibc/klibc.git](/pub/scm/libs/klibc/klibc.git/) | fopencookie master stdio sysconf update-dash |
| --- | --- | --- |
| klibc main development tree | KLibC Group |

| [about](/pub/scm/libs/klibc/klibc.git/about/)[summary](/pub/scm/libs/klibc/klibc.git/)[refs](/pub/scm/libs/klibc/klibc.git/refs/?id=292650f04c2b5348b4efbad61fb014ed09b4f3f2)[log](/pub/scm/libs/klibc/klibc.git/log/)[tree](/pub/scm/libs/klibc/klibc.git/tree/?id=292650f04c2b5348b4efbad61fb014ed09b4f3f2)[commit](/pub/scm/libs/klibc/klibc.git/commit/?id=292650f04c2b5348b4efbad61fb014ed09b4f3f2)[diff](/pub/scm/libs/klibc/klibc.git/diff/?id=292650f04c2b5348b4efbad61fb014ed09b4f3f2)[stats](/pub/scm/libs/klibc/klibc.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ben Hutchings <ben@decadent.org.uk> | 2021-04-28 04:29:50 +0200 |
| --- | --- | --- |
| committer | Ben Hutchings <ben@decadent.org.uk> | 2021-04-29 16:02:20 +0200 |
| commit | [292650f04c2b5348b4efbad61fb014ed09b4f3f2](/pub/scm/libs/klibc/klibc.git/commit/?id=292650f04c2b5348b4efbad61fb014ed09b4f3f2) ([patch](/pub/scm/libs/klibc/klibc.git/patch/?id=292650f04c2b5348b4efbad61fb014ed09b4f3f2)) | |
| tree | [d7fa3f8844d87766943104120b39da471d4d9be0](/pub/scm/libs/klibc/klibc.git/tree/?id=292650f04c2b5348b4efbad61fb014ed09b4f3f2) | |
| parent | [a31ae8c508fc8d1bca4f57e9f9f88127572d5202](/pub/scm/libs/klibc/klibc.git/commit/?id=a31ae8c508fc8d1bca4f57e9f9f88127572d5202) ([diff](/pub/scm/libs/klibc/klibc.git/diff/?id=292650f04c2b5348b4efbad61fb014ed09b4f3f2&id2=a31ae8c508fc8d1bca4f57e9f9f88127572d5202)) | |
| download | [klibc-292650f04c2b5348b4efbad61fb014ed09b4f3f2.tar.gz](/pub/scm/libs/klibc/klibc.git/snapshot/klibc-292650f04c2b5348b4efbad61fb014ed09b4f3f2.tar.gz) | |

[klibc] calloc: Fail if multiplication overflowscalloc() multiplies its 2 arguments together and passes the result to
malloc(). Since the factors and product both have type size\_t, this
can result in an integer overflow and subsequent buffer overflow.
Check for this and fail if it happens.
CVE-2021-31870
Signed-off-by: Ben Hutchings <ben@decadent.org.uk>
[Diffstat](/pub/scm/libs/klibc/klibc.git/diff/?id=292650f04c2b5348b4efbad61fb014ed09b4f3f2)

| -rw-r--r-- | [usr/klibc/calloc.c](/pub/scm/libs/klibc/klibc.git/diff/usr/klibc/calloc.c?id=292650f04c2b5348b4efbad61fb014ed09b4f3f2) | 11 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 8 insertions, 3 deletions

| diff --git a/usr/klibc/calloc.c b/usr/klibc/calloc.cindex 53dcc6b2f6bf63..4a81cda15e1ce2 100644--- a/[usr/klibc/calloc.c](/pub/scm/libs/klibc/klibc.git/tree/usr/klibc/calloc.c?id=a31ae8c508fc8d1bca4f57e9f9f88127572d5202)+++ b/[usr/klibc/calloc.c](/pub/scm/libs/klibc/klibc.git/tree/usr/klibc/calloc.c?id=292650f04c2b5348b4efbad61fb014ed09b4f3f2)@@ -2,12 +2,17 @@ \* calloc.c \*/ +#include <errno.h> #include <stdlib.h> #include <string.h> -/\* FIXME: This should look for multiplication overflow \*/- void \*calloc(size\_t nmemb, size\_t size) {- return zalloc(nmemb \* size);+ unsigned long prod;++ if (\_\_builtin\_umull\_overflow(nmemb, size, &prod)) {+ errno = ENOMEM;+ return NULL;+ }+ return zalloc(prod); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 09:32:36 +0000



=== Content from kernel.org_cd9a891f_20250115_093359.html ===

# Index of /pub/linux/libs/klibc/2.0/

---

```
<../>
<klibc-2.0.1.tar.bz2>                                28-Jun-2012 16:03    505K
<klibc-2.0.1.tar.gz>                                 28-Jun-2012 16:03    606K
<klibc-2.0.1.tar.sign>                               28-Jun-2012 16:03     836
<klibc-2.0.1.tar.xz>                                 28-Jun-2012 16:03    456K
<klibc-2.0.10.tar.gz>                                30-Dec-2021 15:15    617K
<klibc-2.0.10.tar.sign>                              30-Dec-2021 15:15     833
<klibc-2.0.10.tar.xz>                                30-Dec-2021 15:15    463K
<klibc-2.0.11.tar.gz>                                01-Oct-2022 23:43    618K
<klibc-2.0.11.tar.sign>                              01-Oct-2022 23:43     833
<klibc-2.0.11.tar.xz>                                01-Oct-2022 23:43    461K
<klibc-2.0.12.tar.gz>                                12-Feb-2023 17:12    618K
<klibc-2.0.12.tar.sign>                              12-Feb-2023 17:12     833
<klibc-2.0.12.tar.xz>                                12-Feb-2023 17:12    461K
<klibc-2.0.13.tar.gz>                                28-Jul-2023 00:22    620K
<klibc-2.0.13.tar.sign>                              28-Jul-2023 00:22     833
<klibc-2.0.13.tar.xz>                                28-Jul-2023 00:22    462K
<klibc-2.0.2.tar.bz2>                                05-Oct-2012 19:08    504K
<klibc-2.0.2.tar.gz>                                 05-Oct-2012 19:08    606K
<klibc-2.0.2.tar.sign>                               05-Oct-2012 19:08     836
<klibc-2.0.2.tar.xz>                                 05-Oct-2012 19:08    456K
<klibc-2.0.3.tar.bz2>                                03-Dec-2013 18:57    506K
<klibc-2.0.3.tar.gz>                                 03-Dec-2013 18:57    610K
<klibc-2.0.3.tar.sign>                               03-Dec-2013 18:57     836
<klibc-2.0.3.tar.xz>                                 03-Dec-2013 18:57    458K
<klibc-2.0.4.tar.gz>                                 09-Jul-2014 18:26    610K
<klibc-2.0.4.tar.sign>                               09-Jul-2014 18:26     819
<klibc-2.0.4.tar.xz>                                 09-Jul-2014 18:26    458K
<klibc-2.0.5.tar.gz>                                 21-Jan-2019 22:39    611K
<klibc-2.0.5.tar.sign>                               21-Jan-2019 22:39     833
<klibc-2.0.5.tar.xz>                                 21-Jan-2019 22:39    459K
<klibc-2.0.6.tar.gz>                                 01-Feb-2019 04:04    615K
<klibc-2.0.6.tar.sign>                               01-Feb-2019 04:04     833
<klibc-2.0.6.tar.xz>                                 01-Feb-2019 04:04    462K
<klibc-2.0.7.tar.gz>                                 07-Oct-2019 18:17    616K
<klibc-2.0.7.tar.sign>                               07-Oct-2019 18:17     833
<klibc-2.0.7.tar.xz>                                 07-Oct-2019 18:17    462K
<klibc-2.0.8.tar.gz>                                 20-Aug-2020 22:17    614K
<klibc-2.0.8.tar.sign>                               20-Aug-2020 22:17     833
<klibc-2.0.8.tar.xz>                                 20-Aug-2020 22:17    461K
<klibc-2.0.9.tar.gz>                                 29-Apr-2021 23:25    617K
<klibc-2.0.9.tar.sign>                               29-Apr-2021 23:25     833
<klibc-2.0.9.tar.xz>                                 29-Apr-2021 23:25    463K
<klibc-2.0.tar.bz2>                                  31-May-2012 14:15    505K
<klibc-2.0.tar.gz>                                   31-May-2012 14:15    606K
<klibc-2.0.tar.sign>                                 31-May-2012 14:15     836
<klibc-2.0.tar.xz>                                   31-May-2012 14:15    456K
<sha256sums.asc>                                     28-Jul-2023 00:25    3611

```

---



=== Content from lists.zytor.com_2549811c_20250115_093400.html ===

# [klibc] [ANNOUNCE] klibc 2.0.9

**Ben Hutchings**
ben at decadent.org.uk

*Thu Apr 29 16:47:34 PDT 2021*

* Previous message (by thread): [[klibc] [klibc:master] losetup: Fix warnings about \_\_u64 arguments to printf](004592.html)
* Next message (by thread): [[klibc] [klibc:master] Define SIZE\_MAX in <stdint.h>](004594.html)
* **Messages sorted by:**
  [[ date ]](date.html#4593)
  [[ thread ]](thread.html#4593)
  [[ subject ]](subject.html#4593)
  [[ author ]](author.html#4593)

---

```
I have released version 2.0.9.Â  This is available in the git
repository at:

Â Â Â  <https://git.kernel.org/pub/scm/libs/klibc/klibc.git>

and as a tarball at:

Â Â Â  <https://mirrors.kernel.org/pub/linux/libs/klibc/2.0/>

Security fixes:
- Integer overflows in heap functions (CVE-2021-31870, CVE-2021-31873)
- Integer overflows in cpio (CVE-2021-31871, CVE-2021-31872)

New features:
- Signal handling on alpha, s390(x), and sparc no longer requires
  stack trampolines, and the stack should no longer be executable
- The finit_module() system call has a wrapper function
- arm64 builds can be done using LLVM's lld; other architectures may
  also work

Other bug fixes:
- Signal handling on alpha and ia64
- Crash in vfork on ia64
- Build failure with older versions of make
- Build failure for some binutils configurations

Other changes:
- riscv64 builds now use linker relaxation
- Various warning fixes
- dash build uses mktemp command instead of tempfile
- Static library builds are now always reproducible, rather than this
  being optional

Thanks to Microsoft Vulnerability Research for reporting the heap bugs
and going some of the way to identifying the cpio bugs.

A git shortlog of changes since version 2.0.8 follows.

Ben.

Andrej Shadura (1):
      [klibc] dash: builtin: Default to mktemp, not tempfile

Andrew Delgadillo (1):
      [klibc] support llvm's lld for arm64

Ben Hutchings (32):
      [klibc] 2.0.8 released, next version is 2.0.9
      [klibc] alpha: Fix definitions of _NSIG and struct sigaction
      [klibc] signal: Add compile-time check on signal types
      [klibc] signal: Note another reason to define _KLIBC_NEEDS_SA_RESTORER
      [klibc] signal: Add sysconfig setting to force SA_SIGINFO on
      [klibc] s390: Set sa_restorer for signals and disable executable stack
      [klibc] alpha: Pass restorer to rt_sigaction() and disable executable stack
      [klibc] sparc: Set sa_restorer for signals and disable executable stack
      [klibc] signal: Move rt_sigaction() argument mangling to arch directories
      [klibc] signal: Add config flag for additional sigaction fixup
      [klibc] ia64: Fix definition of struct sigaction
      [klibc] ia64: sigaction: Make signal updates atomic
      [klibc] README.klibc: List alpha and ia64 as "working"
      [klibc] README.klibc: Refresh architecture list
      [klibc] Kbuild, klcc: Support multiple objects in KLIBCCRTSHARED
      [klibc] riscv64: Make linker relaxation work and enable it
      [klibc] klcc: Force make to use a shell to run 'command'
      [klibc] Move linker option probing to Kbuild.klibc
      [klibc] Kbuild: Rename LLD to LD_IS_LLD
      [klibc] Replace all the remaining instances of -Ttext-segment
      [klibc] Make typesize extraction more robust
      [klibc] zlib: Suppress implicit-fallthrough warning
      [klibc] Kbuild: Always build static library reproducibly
      [klibc] losetup: Fix warnings about __u64 arguments to printf
      [klibc] Define SIZE_MAX in <stdint.h>
      [klibc] tests: Add test for malloc size arithmetic
      [klibc] malloc: Set errno on failure
      [klibc] malloc: Fail if requested size > PTRDIFF_MAX
      [klibc] calloc: Fail if multiplication overflows
      [klibc] malloc: Fail if block size is out of range for sbrk
      [klibc] cpio: Fix possible integer overflow on 32-bit systems
      [klibc] cpio: Fix possible crash on 64-bit systems

Bill Wendling (3):
      [klibc] dash: shell: Fix clang warnings
      [klibc] dash: shell: Fix clang warnings about format string
      [klibc] kinit: use an enum to silence a clang warning

Jessica Clarke (2):
      [klibc] ia64: Fix sigaction function implementation
      [klibc] ia64: Fix invalid memory access in vfork

Nikita Ermakov (1):
      [klibc] SYSCALLS.def: Add finit_module() system call

--
Ben Hutchings
I'm not a reverse psychological virus.
Please don't copy me into your signature.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part
URL: <<https://lists.zytor.com/archives/klibc/attachments/20210430/2bba8cef/attachment.sig>>

```

---

* Previous message (by thread): [[klibc] [klibc:master] losetup: Fix warnings about \_\_u64 arguments to printf](004592.html)
* Next message (by thread): [[klibc] [klibc:master] Define SIZE\_MAX in <stdint.h>](004594.html)
* **Messages sorted by:**
  [[ date ]](date.html#4593)
  [[ thread ]](thread.html#4593)
  [[ subject ]](subject.html#4593)
  [[ author ]](author.html#4593)

---

[More information about the klibc
mailing list](https://lists.zytor.com/listinfo/klibc)



=== Content from www.openwall.com_6e285425_20250115_093359.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux Â  *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper Â  *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists Â  *for password cracking*](/wordlists/)+ [passwdqc Â  *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt Â  *KDF & password hashing*](/yescrypt/)+ [yespower Â  *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish Â  *password hashing*](/crypt/)+ [phpass Â  *ditto in PHP*](/phpass/)+ [tcb Â  *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd Â  *port scan detector*](/scanlogd/)+ [popa3d Â  *tiny POP3 daemon*](/popa3d/)+ [blists Â  *web interface to mailing lists*](/blists/)+ [msulogin Â  *single user mode login*](/msulogin/)+ [php\_mt\_seed Â  *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](../../../2021/04/29/5) [[next>]](../../../2021/05/01/1) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <d3f1107ee2eb7ca5308d8346ed1d8f7b5549dc3e.camel@decadent.org.uk>
Date: Fri, 30 Apr 2021 01:47:34 +0200
From: Ben Hutchings <ben@...adent.org.uk>
To: klibc mailing list <klibc@...or.com>
Cc: initramfs@...r.kernel.org, oss-security <oss-security@...ts.openwall.com>
Subject: [ANNOUNCE] klibc 2.0.9

I have released version 2.0.9.Â  This is available in the git
repository at:

Â Â Â  <https://git.kernel.org/pub/scm/libs/klibc/klibc.git>

and as a tarball at:

Â Â Â  <https://mirrors.kernel.org/pub/linux/libs/klibc/2.0/>

Security fixes:
- Integer overflows in heap functions (CVE-2021-31870, CVE-2021-31873)
- Integer overflows in cpio (CVE-2021-31871, CVE-2021-31872)

New features:
- Signal handling on alpha, s390(x), and sparc no longer requires
  stack trampolines, and the stack should no longer be executable
- The finit_module() system call has a wrapper function
- arm64 builds can be done using LLVM's lld; other architectures may
  also work

Other bug fixes:
- Signal handling on alpha and ia64
- Crash in vfork on ia64
- Build failure with older versions of make
- Build failure for some binutils configurations

Other changes:
- riscv64 builds now use linker relaxation
- Various warning fixes
- dash build uses mktemp command instead of tempfile
- Static library builds are now always reproducible, rather than this
  being optional

Thanks to Microsoft Vulnerability Research for reporting the heap bugs
and going some of the way to identifying the cpio bugs.

A git shortlog of changes since version 2.0.8 follows.

Ben.

Andrej Shadura (1):
      [klibc] dash: builtin: Default to mktemp, not tempfile

Andrew Delgadillo (1):
      [klibc] support llvm's lld for arm64

Ben Hutchings (32):
      [klibc] 2.0.8 released, next version is 2.0.9
      [klibc] alpha: Fix definitions of _NSIG and struct sigaction
      [klibc] signal: Add compile-time check on signal types
      [klibc] signal: Note another reason to define _KLIBC_NEEDS_SA_RESTORER
      [klibc] signal: Add sysconfig setting to force SA_SIGINFO on
      [klibc] s390: Set sa_restorer for signals and disable executable stack
      [klibc] alpha: Pass restorer to rt_sigaction() and disable executable stack
      [klibc] sparc: Set sa_restorer for signals and disable executable stack
      [klibc] signal: Move rt_sigaction() argument mangling to arch directories
      [klibc] signal: Add config flag for additional sigaction fixup
      [klibc] ia64: Fix definition of struct sigaction
      [klibc] ia64: sigaction: Make signal updates atomic
      [klibc] README.klibc: List alpha and ia64 as "working"
      [klibc] README.klibc: Refresh architecture list
      [klibc] Kbuild, klcc: Support multiple objects in KLIBCCRTSHARED
      [klibc] riscv64: Make linker relaxation work and enable it
      [klibc] klcc: Force make to use a shell to run 'command'
      [klibc] Move linker option probing to Kbuild.klibc
      [klibc] Kbuild: Rename LLD to LD_IS_LLD
      [klibc] Replace all the remaining instances of -Ttext-segment
      [klibc] Make typesize extraction more robust
      [klibc] zlib: Suppress implicit-fallthrough warning
      [klibc] Kbuild: Always build static library reproducibly
      [klibc] losetup: Fix warnings about __u64 arguments to printf
      [klibc] Define SIZE_MAX in <stdint.h>
      [klibc] tests: Add test for malloc size arithmetic
      [klibc] malloc: Set errno on failure
      [klibc] malloc: Fail if requested size > PTRDIFF_MAX
      [klibc] calloc: Fail if multiplication overflows
      [klibc] malloc: Fail if block size is out of range for sbrk
      [klibc] cpio: Fix possible integer overflow on 32-bit systems
      [klibc] cpio: Fix possible crash on 64-bit systems

Bill Wendling (3):
      [klibc] dash: shell: Fix clang warnings
      [klibc] dash: shell: Fix clang warnings about format string
      [klibc] kinit: use an enum to silence a clang warning

Jessica Clarke (2):
      [klibc] ia64: Fix sigaction function implementation
      [klibc] ia64: Fix invalid memory access in vfork

Nikita Ermakov (1):
      [klibc] SYSCALLS.def: Add finit_module() system call

--
Ben Hutchings
I'm not a reverse psychological virus.
Please don't copy me into your signature.

Download attachment "[signature.asc](1/1)" of type "application/pgp-signature" (834 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from lists.debian.org_f07d38f2_20250115_093400.html ===


---

[[Date Prev](msg00024.html)][[Date Next](msg00026.html)]
[[Thread Prev](msg00024.html)][[Thread Next](msg00026.html)]
[[Date Index](maillist.html#00025)]
[[Thread Index](threads.html#00025)]

# [SECURITY] [DLA 2695-1] klibc security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 2695-1] klibc security update
* *From*: Ben Hutchings <benh@debian.org>
* *Date*: Mon, 28 Jun 2021 20:17:14 +0200
* *Message-id*: <[[ðŸ”Ž]](/msgid-search/YNoSKqeeXcQ3ZgP7%40decadent.org.uk)Â [YNoSKqeeXcQ3ZgP7@decadent.org.uk](msg00025.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-------------------------------------------------------------------------
Debian LTS Advisory DLA-2695-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                        Ben Hutchings
June 28, 2021                                 <https://wiki.debian.org/LTS>
-------------------------------------------------------------------------

Package        : klibc
Version        : 2.0.4-9+deb9u1
CVE ID         : CVE-2021-31870 CVE-2021-31871 CVE-2021-31872 CVE-2021-31873
Debian Bug     : 989505

Several vulnerabilities have been discovered in klibc.  Depending on
how klibc is used, these could lead to the execution of arbitrary
code, privilege escalation, or denial of service.

Thanks to Microsoft Vulnerability Research for reporting the heap bugs
and going some of the way to identifying the cpio bugs.

CVE-2021-31870

    Multiplication in the calloc() function may result in an integer
    overflow and a subsequent heap buffer overflow.

CVE-2021-31871

    An integer overflow in the cpio command may result in a NULL
    pointer dereference.

CVE-2021-31872

    Multiple possible integer overflows in the cpio command on 32-bit
    systems may result in a buffer overflow or other security impact.

CVE-2021-31873

    Additions in malloc() function may result in integer overflow and
    subsequent heap buffer overflow.

For Debian 9 stretch, these problems have been fixed in version
2.0.4-9+deb9u1.

We recommend that you upgrade your klibc packages.

For the detailed security status of klibc please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/klibc>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

--
Ben Hutchings - Debian developer, member of kernel, installer and LTS teams

```

**Attachment:
[signature.asc](pgpDKNjpMVPWE.pgp)**

*Description:* PGP signature

---


