=== Content from rustsec.org_a16a6c65_20250115_080130.html ===


RUSTSEC-2021-0021: nb-connect: `nb-connect` invalidly assumes the memory layout of std::net::SocketAddr › RustSec Advisory Database

#

[About](/)
[Advisories](/advisories/)
[Report Vulnerabilities](/contributing.html)

[History](https://github.com/RustSec/advisory-db/commits/main/crates/nb-connect/RUSTSEC-2021-0021.md) ⋅
[Edit](https://github.com/RustSec/advisory-db/edit/main/crates/nb-connect/RUSTSEC-2021-0021.md) ⋅
[JSON (OSV)](https://api.osv.dev/v1/vulns/RUSTSEC-2021-0021)

# RUSTSEC-2021-0021

`nb-connect` invalidly assumes the memory layout of std::net::SocketAddr

Reported
February 14, 2021

Issued
February 14, 2021

(last modified: June 13, 2023)

Package
[nb-connect](/packages/nb-connect.html)
([crates.io](https://crates.io/crates/nb-connect))

Type
INFO
Unsound

Keywords
[#memory](/keywords/memory.html)
[#layout](/keywords/layout.html)
[#cast](/keywords/cast.html)

Aliases

* [CVE-2021-27376](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-27376)
* [GHSA-rm4w-6696-r77p](https://github.com/advisories/GHSA-rm4w-6696-r77p)

References

* <https://github.com/smol-rs/nb-connect/issues/1>

CVSS Score
9.8
CRITICAL

CVSS Details
Attack vectorNetwork
Attack complexityLow
Privileges requiredNone
User interactionNone
ScopeUnchanged
ConfidentialityHigh
IntegrityHigh
AvailabilityHigh

CVSS Vector
[CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H](https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H)
Patched

* `>=1.0.3`

### Description

The [`nb-connect`](https://crates.io/crates/nb-connect) crate has assumed `std::net::SocketAddrV4`
and `std::net::SocketAddrV6` have the same memory layout as the system C representation
`sockaddr`. It has simply casted the pointers to convert the socket addresses to the
system representation. The standard library does not say anything about the memory
layout, and this will cause invalid memory access if the standard library
changes the implementation. No warnings or errors will be emitted once the
change happens.

Advisory available under [CC0-1.0](https://spdx.org/licenses/CC0-1.0.html)
license.


