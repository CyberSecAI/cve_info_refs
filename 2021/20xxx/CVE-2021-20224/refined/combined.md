=== Content from github.com_3b917dd0_20250114_184953.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fpull%2F3083)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fpull%2F3083)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=ImageMagick%2FImageMagick)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ImageMagick](/ImageMagick)
/
**[ImageMagick](/ImageMagick/ImageMagick)**
Public

* [Notifications](/login?return_to=%2FImageMagick%2FImageMagick) You must be signed in to change notification settings
* [Fork
  1.4k](/login?return_to=%2FImageMagick%2FImageMagick)
* [Star
   12.6k](/login?return_to=%2FImageMagick%2FImageMagick)

* [Code](/ImageMagick/ImageMagick)
* [Issues
  115](/ImageMagick/ImageMagick/issues)
* [Pull requests
  3](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

Additional navigation options

* [Code](/ImageMagick/ImageMagick)
* [Issues](/ImageMagick/ImageMagick/issues)
* [Pull requests](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FImageMagick%2FImageMagick%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FImageMagick%2FImageMagick%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# outside the range of representable values of type 'unsigned char' #3083

 Merged

[urban-warrior](/urban-warrior)
merged 1 commit into
[ImageMagick:master](/ImageMagick/ImageMagick/tree/master "ImageMagick/ImageMagick:master")
from
[hifoolno:master](/hifoolno/ImageMagick/tree/master "hifoolno/ImageMagick:master")

Jan 6, 2021

 Merged

# [outside the range of representable values of type 'unsigned char'](#top) #3083

[urban-warrior](/urban-warrior)
merged 1 commit into
[ImageMagick:master](/ImageMagick/ImageMagick/tree/master "ImageMagick/ImageMagick:master")
from
[hifoolno:master](/hifoolno/ImageMagick/tree/master "hifoolno/ImageMagick:master")

Jan 6, 2021

[Conversation
0](/ImageMagick/ImageMagick/pull/3083)
[Commits
1](/ImageMagick/ImageMagick/pull/3083/commits)
[Checks
0](/ImageMagick/ImageMagick/pull/3083/checks)
[Files changed](/ImageMagick/ImageMagick/pull/3083/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![hifoolno](https://avatars.githubusercontent.com/u/19338538?s=60&v=4)](/hifoolno)

Copy link

Contributor

### @hifoolno **[hifoolno](/hifoolno)** commented [Jan 6, 2021](#issue-780646147)

### Prerequisites

* I have written a descriptive pull-request title
* I have verified that there are no overlapping [pull-requests](https://github.com/ImageMagick/ImageMagick/pulls) open
* I have verified that I am following the existing coding patterns and practices as demonstrated in the repository.

### Description

There is an outside the range of representable values of type 'unsigned char' at MagickCore/quantum-export.c.

Sorry, something went wrong.

All reactions

`[outside the range of representable values of type 'unsigned char'](/ImageMagick/ImageMagick/pull/3083/commits/9583e97bfe0a80ebf321e05399a9e6490747f397 "outside the range of representable values of type 'unsigned char'")`

`[9583e97](/ImageMagick/ImageMagick/pull/3083/commits/9583e97bfe0a80ebf321e05399a9e6490747f397)`

[![@urban-warrior](https://avatars.githubusercontent.com/u/12486802?s=40&u=a51f81f4f2ca705372663295a9423870c8462b7d&v=4)](/urban-warrior)
[urban-warrior](/urban-warrior)
merged commit [`5af1dff`](/ImageMagick/ImageMagick/commit/5af1dffa4b6ab984b5f13d1e91c95760d75f12a6)
into
ImageMagick:master

[Jan 6, 2021](https://github.com/ImageMagick/ImageMagick/pull/3083#event-4177498480)

[urban-warrior](/urban-warrior)
pushed a commit
that referenced
this pull request
[Jan 6, 2021](#ref-commit-1d9c658)

`[https://github.com/ImageMagick/ImageMagick/pull/3083](/ImageMagick/ImageMagick/commit/1d9c658f2343980dd20c52347262dbe105c81660 "https://github.com/ImageMagick/ImageMagick/pull/3083")`

`[1d9c658](/ImageMagick/ImageMagick/commit/1d9c658f2343980dd20c52347262dbe105c81660)`

[urban-warrior](/urban-warrior)
pushed a commit
to ImageMagick/ImageMagick6
that referenced
this pull request
[Jan 6, 2021](#ref-commit-553054c)

`[https://github.com/ImageMagick/ImageMagick/pull/3083](/ImageMagick/ImageMagick6/commit/553054c1cb1e4e05ec86237afef76a32cd7c464d "https://github.com/ImageMagick/ImageMagick/pull/3083")`

`[553054c](/ImageMagick/ImageMagick6/commit/553054c1cb1e4e05ec86237afef76a32cd7c464d)`

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fpull%2F3083)

Reviewers

No reviews

Assignees

No one assigned

Labels

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@hifoolno](https://avatars.githubusercontent.com/u/19338538?s=52&v=4)](/hifoolno) [![@urban-warrior](https://avatars.githubusercontent.com/u/12486802?s=52&v=4)](/urban-warrior)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_93904629_20250114_184955.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick6%2Fcommit%2F553054c1cb1e4e05ec86237afef76a32cd7c464d)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick6%2Fcommit%2F553054c1cb1e4e05ec86237afef76a32cd7c464d)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=ImageMagick%2FImageMagick6)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ImageMagick](/ImageMagick)
/
**[ImageMagick6](/ImageMagick/ImageMagick6)**
Public

* [Notifications](/login?return_to=%2FImageMagick%2FImageMagick6) You must be signed in to change notification settings
* [Fork
  84](/login?return_to=%2FImageMagick%2FImageMagick6)
* [Star
   202](/login?return_to=%2FImageMagick%2FImageMagick6)

* [Code](/ImageMagick/ImageMagick6)
* [Issues
  11](/ImageMagick/ImageMagick6/issues)
* [Pull requests
  0](/ImageMagick/ImageMagick6/pulls)
* [Discussions](/ImageMagick/ImageMagick6/discussions)
* [Actions](/ImageMagick/ImageMagick6/actions)
* [Security](/ImageMagick/ImageMagick6/security)
* [Insights](/ImageMagick/ImageMagick6/pulse)

Additional navigation options

* [Code](/ImageMagick/ImageMagick6)
* [Issues](/ImageMagick/ImageMagick6/issues)
* [Pull requests](/ImageMagick/ImageMagick6/pulls)
* [Discussions](/ImageMagick/ImageMagick6/discussions)
* [Actions](/ImageMagick/ImageMagick6/actions)
* [Security](/ImageMagick/ImageMagick6/security)
* [Insights](/ImageMagick/ImageMagick6/pulse)

## Commit

[Permalink](/ImageMagick/ImageMagick6/commit/553054c1cb1e4e05ec86237afef76a32cd7c464d)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

https://github.com/ImageMagick/ImageMagick/pull/3083

[Browse files](/ImageMagick/ImageMagick6/tree/553054c1cb1e4e05ec86237afef76a32cd7c464d)
Browse the repository at this point in the history

* Loading branch information

Cristy
committed
Jan 6, 2021

1 parent
[833f2e3](/ImageMagick/ImageMagick6/commit/833f2e30aa0bca27bc73c08590e951efeef3d2c0)

commit 553054c

Showing
**1 changed file**
with
**37 additions**
and
**32 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

69 changes: 37 additions & 32 deletions

69
[magick/quantum-export.c](#diff-9e52a7bece5c47c42972561c6d5156ed35e9fdad2a6524d1a93fa5133bc3fe00 "magick/quantum-export.c")

Show comments

[View file](/ImageMagick/ImageMagick6/blob/553054c1cb1e4e05ec86237afef76a32cd7c464d/magick/quantum-export.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2516,21 +2516,21 @@ static void ExportIndexQuantum(const Image \*image,QuantumInfo \*quantum\_info, |
|  |  |  |
|  |  | for (x=((ssize\_t) number\_pixels-7); x > 0; x-=8) |
|  |  | { |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q=((pixel & 0x01) << 7); |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << 6); |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << 5); |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << 4); |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << 3); |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << 2); |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << 1); |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << 0); |
|  |  | q++; |
|  |  | } |
| Expand All | | @@ -2539,7 +2539,7 @@ static void ExportIndexQuantum(const Image \*image,QuantumInfo \*quantum\_info, |
|  |  | \*q='\0'; |
|  |  | for (bit=7; bit >= (ssize\_t) (8-(number\_pixels % 8)); bit--) |
|  |  | { |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << (unsigned char) bit); |
|  |  | } |
|  |  | q++; |
| Expand All | | @@ -2553,15 +2553,15 @@ static void ExportIndexQuantum(const Image \*image,QuantumInfo \*quantum\_info, |
|  |  |  |
|  |  | for (x=0; x < (ssize\_t) (number\_pixels-1) ; x+=2) |
|  |  | { |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q=((pixel & 0xf) << 4); |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0xf) << 0); |
|  |  | q++; |
|  |  | } |
|  |  | if ((number\_pixels % 2) != 0) |
|  |  | { |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q=((pixel & 0xf) << 4); |
|  |  | q++; |
|  |  | } |
| Expand Down  Expand Up | | @@ -2669,25 +2669,25 @@ static void ExportIndexAlphaQuantum(const Image \*image, |
|  |  |  |
|  |  | for (x=((ssize\_t) number\_pixels-3); x > 0; x-=4) |
|  |  | { |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q=((pixel & 0x01) << 7); |
|  |  | pixel=(unsigned char) (GetPixelOpacity(p) == (Quantum) |
|  |  | TransparentOpacity ? 1 : 0); |
|  |  | \*q|=((pixel & 0x01) << 6); |
|  |  | p++; |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << 5); |
|  |  | pixel=(unsigned char) (GetPixelOpacity(p) == (Quantum) |
|  |  | TransparentOpacity ? 1 : 0); |
|  |  | \*q|=((pixel & 0x01) << 4); |
|  |  | p++; |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << 3); |
|  |  | pixel=(unsigned char) (GetPixelOpacity(p) == (Quantum) |
|  |  | TransparentOpacity ? 1 : 0); |
|  |  | \*q|=((pixel & 0x01) << 2); |
|  |  | p++; |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << 1); |
|  |  | pixel=(unsigned char) (GetPixelOpacity(p) == (Quantum) |
|  |  | TransparentOpacity ? 1 : 0); |
| Expand All | | @@ -2700,7 +2700,7 @@ static void ExportIndexAlphaQuantum(const Image \*image, |
|  |  | \*q='\0'; |
|  |  | for (bit=3; bit >= (ssize\_t) (4-(number\_pixels % 4)); bit-=2) |
|  |  | { |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q|=((pixel & 0x01) << (unsigned char) (bit+4)); |
|  |  | pixel=(unsigned char) (GetPixelOpacity(p) == (Quantum) |
|  |  | TransparentOpacity ? 1 : 0); |
| Expand All | | @@ -2718,10 +2718,10 @@ static void ExportIndexAlphaQuantum(const Image \*image, |
|  |  |  |
|  |  | for (x=0; x < (ssize\_t) number\_pixels ; x++) |
|  |  | { |
|  |  | pixel=(unsigned char) \*indexes++; |
|  |  | pixel=(unsigned char) ((ssize\_t) \*indexes++); |
|  |  | \*q=((pixel & 0xf) << 4); |
|  |  | pixel=(unsigned char) (16\*QuantumScale\*((Quantum) (QuantumRange- |
|  |  | GetPixelOpacity(p)))+0.5); |
|  |  | pixel=(unsigned char) ((ssize\_t) (16\*QuantumScale\*((Quantum) |
|  |  | (QuantumRange-GetPixelOpacity(p)))+0.5)); |
|  |  | \*q|=((pixel & 0xf) << 0); |
|  |  | p++; |
|  |  | q++; |
| Expand Down  Expand Up | | @@ -2752,7 +2752,8 @@ static void ExportIndexAlphaQuantum(const Image \*image, |
|  |  | { |
|  |  | for (x=0; x < (ssize\_t) number\_pixels; x++) |
|  |  | { |
|  |  | q=PopShortPixel(quantum\_info->endian,(unsigned short) GetPixelIndex(indexes+x),q); |
|  |  | q=PopShortPixel(quantum\_info->endian,(unsigned short) |
|  |  | ((ssize\_t) GetPixelIndex(indexes+x)),q); |
|  |  | pixel=SinglePrecisionToHalf(QuantumScale\*GetPixelAlpha(p)); |
|  |  | q=PopShortPixel(quantum\_info->endian,pixel,q); |
|  |  | p++; |
| Expand All | | @@ -2762,7 +2763,8 @@ static void ExportIndexAlphaQuantum(const Image \*image, |
|  |  | } |
|  |  | for (x=0; x < (ssize\_t) number\_pixels; x++) |
|  |  | { |
|  |  | q=PopShortPixel(quantum\_info->endian,(unsigned short) GetPixelIndex(indexes+x),q); |
|  |  | q=PopShortPixel(quantum\_info->endian,(unsigned short) |
|  |  | ((ssize\_t) GetPixelIndex(indexes+x)),q); |
|  |  | pixel=ScaleQuantumToShort((Quantum) (QuantumRange-GetPixelOpacity(p))); |
|  |  | q=PopShortPixel(quantum\_info->endian,pixel,q); |
|  |  | p++; |
| Expand Down  Expand Up | | @@ -2792,7 +2794,8 @@ static void ExportIndexAlphaQuantum(const Image \*image, |
|  |  | } |
|  |  | for (x=0; x < (ssize\_t) number\_pixels; x++) |
|  |  | { |
|  |  | q=PopLongPixel(quantum\_info->endian,(unsigned int) GetPixelIndex(indexes+x),q); |
|  |  | q=PopLongPixel(quantum\_info->endian,(unsigned int) |
|  |  | GetPixelIndex(indexes+x),q); |
|  |  | pixel=ScaleQuantumToLong((Quantum) (QuantumRange-GetPixelOpacity(p))); |
|  |  | q=PopLongPixel(quantum\_info->endian,pixel,q); |
|  |  | p++; |
| Expand Down  Expand Up | | @@ -2827,10 +2830,9 @@ static void ExportIndexAlphaQuantum(const Image \*image, |
|  |  | range=GetQuantumRange(quantum\_info->depth); |
|  |  | for (x=0; x < (ssize\_t) number\_pixels; x++) |
|  |  | { |
|  |  | q=PopQuantumPixel(quantum\_info, |
|  |  | GetPixelIndex(indexes+x),q); |
|  |  | q=PopQuantumPixel(quantum\_info, |
|  |  | ScaleQuantumToAny((Quantum) (GetPixelAlpha(p)),range),q); |
|  |  | q=PopQuantumPixel(quantum\_info,GetPixelIndex(indexes+x),q); |
|  |  | q=PopQuantumPixel(quantum\_info,ScaleQuantumToAny((Quantum) |
|  |  | (GetPixelAlpha(p)),range),q); |
|  |  | p++; |
|  |  | q+=quantum\_info->pad; |
|  |  | } |
| Expand Down  Expand Up | | @@ -3035,8 +3037,8 @@ static void ExportRedQuantum(QuantumInfo \*quantum\_info, |
|  |  | range=GetQuantumRange(quantum\_info->depth); |
|  |  | for (x=0; x < (ssize\_t) number\_pixels; x++) |
|  |  | { |
|  |  | q=PopQuantumPixel(quantum\_info, |
|  |  | ScaleQuantumToAny(GetPixelRed(p),range),q); |
|  |  | q=PopQuantumPixel(quantum\_info,ScaleQuantumToAny(GetPixelRed(p),range), |
|  |  | q); |
|  |  | p++; |
|  |  | q+=quantum\_info->pad; |
|  |  | } |
| Expand Down  Expand Up | | @@ -3150,7 +3152,8 @@ static void ExportRGBQuantum(QuantumInfo \*quantum\_info, |
|  |  | break; |
|  |  | } |
|  |  | } |
|  |  | q=PopShortPixel(quantum\_info->endian,(unsigned short) (pixel << 4),q); |
|  |  | q=PopShortPixel(quantum\_info->endian,(unsigned short) (pixel << 4), |
|  |  | q); |
|  |  | switch ((x+1) % 3) |
|  |  | { |
|  |  | default: |
| Expand All | | @@ -3171,7 +3174,8 @@ static void ExportRGBQuantum(QuantumInfo \*quantum\_info, |
|  |  | break; |
|  |  | } |
|  |  | } |
|  |  | q=PopShortPixel(quantum\_info->endian,(unsigned short) (pixel << 4),q); |
|  |  | q=PopShortPixel(quantum\_info->endian,(unsigned short) (pixel << 4), |
|  |  | q); |
|  |  | q+=quantum\_info->pad; |
|  |  | } |
|  |  | for (bit=0; bit < (ssize\_t) (3\*number\_pixels % 2); bit++) |
| Expand All | | @@ -3196,7 +3200,8 @@ static void ExportRGBQuantum(QuantumInfo \*quantum\_info, |
|  |  | break; |
|  |  | } |
|  |  | } |
|  |  | q=PopShortPixel(quantum\_info->endian,(unsigned short) (pixel << 4),q); |
|  |  | q=PopShortPixel(quantum\_info->endian,(unsigned short) (pixel << 4), |
|  |  | q); |
|  |  | q+=quantum\_info->pad; |
|  |  | } |
|  |  | if (bit != 0) |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `553054c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick6%2Fcommit%2F553054c1cb1e4e05ec86237afef76a32cd7c464d) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from lists.debian.org_c0ef4e1c_20250114_184955.html ===


---

[[Date Prev](msg00007.html)][[Date Next](msg00009.html)]
[[Thread Prev](msg00007.html)][[Thread Next](msg00009.html)]
[[Date Index](maillist.html#00008)]
[[Thread Index](threads.html#00008)]

# [SECURITY] [DLA 3357-1] imagemagick security update

---

* *To*: <debian-lts-announce@lists.debian.org>
* *Subject*: [SECURITY] [DLA 3357-1] imagemagick security update
* *From*: Bastien Roucaries <rouca@debian.org>
* *Date*: Sat, 11 Mar 2023 19:39:30 +0000
* *Message-id*: <[[🔎]](/msgid-search/1d4d33c61795a16ec6114090b75ad9d7.rouca%40debian.org) [1d4d33c61795a16ec6114090b75ad9d7.rouca@debian.org](msg00008.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian LTS Advisory DLA-3357-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                    Bastien RoucariÃ¨s
March 11, 2023                                <https://wiki.debian.org/LTS>
- -------------------------------------------------------------------------

Package        : imagemagick
Version        : 8:6.9.10.23+dfsg-2.1+deb10u2
CVE ID         : CVE-2020-19667 CVE-2020-25665 CVE-2020-25666 CVE-2020-25674
		 CVE-2020-25675 CVE-2020-25676 CVE-2020-27560 CVE-2020-27750
		 CVE-2020-27751 CVE-2020-27754 CVE-2020-27756 CVE-2020-27757
		 CVE-2020-27758 CVE-2020-27759 CVE-2020-27760 CVE-2020-27761
		 CVE-2020-27762 CVE-2020-27763 CVE-2020-27764 CVE-2020-27765
		 CVE-2020-27766 CVE-2020-27767 CVE-2020-27768 CVE-2020-27769
		 CVE-2020-27770 CVE-2020-27771 CVE-2020-27772 CVE-2020-27773
		 CVE-2020-27774 CVE-2020-27775 CVE-2020-27776 CVE-2020-29599
		 CVE-2021-3574 CVE-2021-3596 CVE-2021-20224 CVE-2022-44267
		 CVE-2022-44268
Debian Bug     : 1027164 1030767

Several vulnerabilities have been discovered in imagemagick that may
lead to a privilege escalation, denial of service or information leaks.

CVE-2020-19667

    A stack-based buffer overflow and unconditional jump was found in
    ReadXPMImage in coders/xpm.c

CVE-2020-25665

    An out-of-bounds read in the PALM image coder was found in
    WritePALMImage in coders/palm.c

CVE-2020-25666

    An integer overflow was possible during simple math
    calculations in HistogramCompare() in MagickCore/histogram.c

CVE-2020-25674

    A for loop with an improper exit condition was found that can
    allow an out-of-bounds READ via heap-buffer-overflow in
    WriteOnePNGImage from coders/png.c

CVE-2020-25675

    A undefined behavior was found in the form of integer overflow
    and out-of-range values as a result of rounding calculations
    performed on unconstrained pixel offsets in the CropImage()
    and CropImageToTiles() routines of MagickCore/transform.c

CVE-2020-25676

    A undefined behavior was found in the form of integer overflow
    and out-of-range values as a result of rounding calculations
    performed on unconstrained pixel offsets in CatromWeights(),
    MeshInterpolate(), InterpolatePixelChannel(),
    InterpolatePixelChannels(), and InterpolatePixelInfo(),
    which are all functions in /MagickCore/pixel.c

CVE-2020-27560

    A division by Zero was found in OptimizeLayerFrames in
    MagickCore/layer.c, which may cause a denial of service.

CVE-2020-27750

    A division by Zero was found in MagickCore/colorspace-private.h
    and MagickCore/quantum.h, which may cause a denial of service

CVE-2020-27751

    A undefined behavior was found in the form of values outside the
    range of type `unsigned long long` as well as a shift exponent
    that is too large for 64-bit type in MagickCore/quantum-export.c

CVE-2020-27754

    A integer overflow was found in IntensityCompare() of
    /magick/quantize.c

CVE-2020-27756

    A division by zero was found in ParseMetaGeometry() of
    MagickCore/geometry.c.
    Image height and width calculations can lead to
    divide-by-zero conditions which also lead to undefined behavior.

CVE-2020-27757

    A undefined behavior was found in MagickCore/quantum-private.h
    A floating point math calculation in
    ScaleAnyToQuantum() of /MagickCore/quantum-private.h could lead to
    undefined behavior in the form of a value outside the range of type
    unsigned long long.

CVE-2020-27758

    Undefined behavior was found in the form of values outside the
    range of type `unsigned long long` in coders/txt.c

CVE-2020-27759

    In IntensityCompare() of /MagickCore/quantize.c, a
    double value was being casted to int and returned, which in some
    cases caused a value outside the range of type `int` to be
    returned.

CVE-2020-27760

    In `GammaImage()` of /MagickCore/enhance.c, depending
    on the `gamma` value, it's possible to trigger a
    divide-by-zero condition when a crafted input file
    is processed.

CVE-2020-27761

    WritePALMImage() in /coders/palm.c used size_t casts
    in several areas of a calculation which could lead to
    values outside the range of representable type `unsigned long`
    undefined behavior when a crafted input file was processed.

CVE-2020-27762

    Undefined behavior was found in the form of values outside the
    range of type `unsigned char` in coders/hdr.c

CVE-2020-27763

    Undefined behavior was found in the form of math division by
    zero in MagickCore/resize.c

CVE-2020-27764

    Out-of-range values was found under some
    circumstances when a crafted input file is processed in
    /MagickCore/statistic.c

CVE-2020-27765

    Undefined behavior was found in the form of math division by
    zero in MagickCore/segment.c when a crafted file is processed

CVE-2020-27766

    A crafted file that is processed by ImageMagick could trigger
    undefined behavior in the form of values outside the range of
    type `unsigned long`

CVE-2020-27767

    Undefined behavior was found in the form of values outside the
    range of types `float` and `unsigned char` in MagickCore/quantum.h

CVE-2020-27768

    An outside the range of representable values of type
    `unsigned int` was found in MagickCore/quantum-private.h

CVE-2020-27769

    An outside the range of representable values of type
    `float` was found in MagickCore/quantize.c

CVE-2020-27770

    Due to a missing check for 0 value of
    `replace_extent`, it is possible for offset `p` to overflow in
    SubstituteString()

CVE-2020-27771

    In RestoreMSCWarning() of /coders/pdf.c there are
    several areas where calls to GetPixelIndex() could result in values
    outside the range of representable for the `unsigned char` type

CVE-2020-27772

    Undefined behavior was found in the form of values outside the
    range of type `unsigned int` in coders/bmp.c

CVE-2020-27773

    Undefined behavior was found in the form of values outside the
    range of type `unsigned char` or division by zero

CVE-2020-27774

    A crafted file that is processed by ImageMagick could trigger
    undefined behavior in the form of a too large shift for
    64-bit type `ssize_t`.

CVE-2020-27775

    Undefined behavior was found in the form of values outside the
    range of type `unsigned char` in MagickCore/quantum.h

CVE-2020-27776

    A crafted file that is processed by ImageMagick could trigger
    undefined behavior in the form of values outside the range of
    type unsigned long.

CVE-2020-29599

    ImageMagick mishandles the -authenticate option, which
    allows setting a password for password-protected PDF files.
    The user-controlled password was not properly escaped/sanitized
    and it was therefore possible to inject additional
    shell commands via coders/pdf.c.
    On debian system, by default the imagemagick policy
    mitigated this CVE.

CVE-2021-3574

    A memory leak was found converting a crafted TIFF file.

CVE-2021-3596

    A NULL pointer dereference was found in ReadSVGImage() in
    coders/svg.c

CVE-2021-20224

    An integer overflow issue was discovered in ImageMagick's
    ExportIndexQuantum() function in MagickCore/quantum-export.c.

CVE-2022-44267

    A Denial of Service was found. When it parses a PNG image,
    the convert process could be left waiting for stdin input.

CVE-2022-44268

    An Information Disclosure was found. When it parses a PNG image,
    (e.g., for resize), the resulting image could have embedded
    the content of an arbitrary. file.

For Debian 10 buster, these problems have been fixed in version
8:6.9.10.23+dfsg-2.1+deb10u2.

We recommend that you upgrade your imagemagick packages.

For the detailed security status of imagemagick please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/imagemagick>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEEXQGHuUCiRbrXsPVqADoaLapBCF8FAmQM2PIACgkQADoaLapB
CF9Mag/+Pnnmozh7UJX+WALezTQBJYQG67E/mMIOVt4w460WgXCKj9oQVenWFnhM
hY4ZpKrdgCvFrW0fr/m9jLPoQuYN9fJrhvRcnQzyq60Le9X8QRDkjPzYGjWfBrJg
s/whu8R2l6qIed97Om1TN0uryw+M2v+Jsnw5KiNKL2FkUayXmzuiEb95YIt4MSNh
qW4Nirc7Ym3/M01RA3tiKiHOfYBk17eeITb2R/307mhKUXpWBtv9BJrTKdhz1dVJ
+0XXTkY0WNXtRl1mmE1w+xSEsP3kH8Hx40URs1tZ7yTHY2jBbDilJh/Br3OtqLCX
y3+2Snm0OZNwouTki9xjlhI0bgFSZsQykV8hbxyVS4rHaG/z2YeUmCrBvtfeNHmn
K3nB0YWTOssP9YfdVMpNABE6L+mTMiuj/xr7+X8Dmw5q+S8TE9+2u1RGOcolEVRB
KwOCcv/ZF/jAiWbifWd/QdN4jy+Sq5byRcsuTbXHZhbwu0l6yxMTWAP2fXNIlr4r
iHRA9bmnfFHdzzaUp8vRmUgOup5RmyWratm00XKkFLbAdMmUTJl16CQ2A7ESGyKM
FXH0raG00UevheoRYuSy+6K9vA/D5u6TdTmwsgmgJnspHZcnwlApiC03t9e7cX64
EJCCPy3pFsz22A5ZOJrjIDVi+P1WZCsLjk2D3xOdliiV6uHr4+o=
=Ra+j
-----END PGP SIGNATURE-----

```

---



=== Content from github.com_e7a53c0a_20250114_184953.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fcommit%2F5af1dffa4b6ab984b5f13d1e91c95760d75f12a6)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fcommit%2F5af1dffa4b6ab984b5f13d1e91c95760d75f12a6)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=ImageMagick%2FImageMagick)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ImageMagick](/ImageMagick)
/
**[ImageMagick](/ImageMagick/ImageMagick)**
Public

* [Notifications](/login?return_to=%2FImageMagick%2FImageMagick) You must be signed in to change notification settings
* [Fork
  1.4k](/login?return_to=%2FImageMagick%2FImageMagick)
* [Star
   12.6k](/login?return_to=%2FImageMagick%2FImageMagick)

* [Code](/ImageMagick/ImageMagick)
* [Issues
  115](/ImageMagick/ImageMagick/issues)
* [Pull requests
  3](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

Additional navigation options

* [Code](/ImageMagick/ImageMagick)
* [Issues](/ImageMagick/ImageMagick/issues)
* [Pull requests](/ImageMagick/ImageMagick/pulls)
* [Discussions](/ImageMagick/ImageMagick/discussions)
* [Actions](/ImageMagick/ImageMagick/actions)
* [Security](/ImageMagick/ImageMagick/security)
* [Insights](/ImageMagick/ImageMagick/pulse)

## Commit

[Permalink](/ImageMagick/ImageMagick/commit/5af1dffa4b6ab984b5f13d1e91c95760d75f12a6)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

outside the range of representable values of type 'unsigned char' ([#3083](https://github.com/ImageMagick/ImageMagick/pull/3083)

[Browse files](/ImageMagick/ImageMagick/tree/5af1dffa4b6ab984b5f13d1e91c95760d75f12a6)
Browse the repository at this point in the history

```
)

Co-authored-by: Zhang Xiaohui <ruc_zhangxiaohui@163.com>
```

* Loading branch information

[![@hifoolno](https://avatars.githubusercontent.com/u/19338538?s=40&v=4)](/hifoolno)

[hifoolno](/ImageMagick/ImageMagick/commits?author=hifoolno "View all commits by hifoolno")
and
Zhang Xiaohui
authored
Jan 6, 2021

1 parent
[fbd9a96](/ImageMagick/ImageMagick/commit/fbd9a963db1ae5551c45dc8af57db0abd7695774)

commit 5af1dff

Showing
**1 changed file**
with
**13 additions**
and
**13 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

26 changes: 13 additions & 13 deletions

26
[MagickCore/quantum-export.c](#diff-93c73366426a6655879a4080c065251dcc044452cd23bdfbc41185177a48eac2 "MagickCore/quantum-export.c")

Show comments

[View file](/ImageMagick/ImageMagick/blob/5af1dffa4b6ab984b5f13d1e91c95760d75f12a6/MagickCore/quantum-export.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2530,28 +2530,28 @@ static void ExportIndexQuantum(const Image \*image,QuantumInfo \*quantum\_info, |
|  |  |  |
|  |  | for (x=((ssize\_t) number\_pixels-7); x > 0; x-=8) |
|  |  | { |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q=((pixel & 0x01) << 7); |
|  |  | p+=GetPixelChannels(image); |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q|=((pixel & 0x01) << 6); |
|  |  | p+=GetPixelChannels(image); |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q|=((pixel & 0x01) << 5); |
|  |  | p+=GetPixelChannels(image); |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q|=((pixel & 0x01) << 4); |
|  |  | p+=GetPixelChannels(image); |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q|=((pixel & 0x01) << 3); |
|  |  | p+=GetPixelChannels(image); |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q|=((pixel & 0x01) << 2); |
|  |  | p+=GetPixelChannels(image); |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q|=((pixel & 0x01) << 1); |
|  |  | p+=GetPixelChannels(image); |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q|=((pixel & 0x01) << 0); |
|  |  | p+=GetPixelChannels(image); |
|  |  | q++; |
| Expand All | | @@ -2561,7 +2561,7 @@ static void ExportIndexQuantum(const Image \*image,QuantumInfo \*quantum\_info, |
|  |  | \*q='\0'; |
|  |  | for (bit=7; bit >= (ssize\_t) (8-(number\_pixels % 8)); bit--) |
|  |  | { |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q|=((pixel & 0x01) << (unsigned char) bit); |
|  |  | p+=GetPixelChannels(image); |
|  |  | } |
| Expand All | | @@ -2576,17 +2576,17 @@ static void ExportIndexQuantum(const Image \*image,QuantumInfo \*quantum\_info, |
|  |  |  |
|  |  | for (x=0; x < (ssize\_t) (number\_pixels-1) ; x+=2) |
|  |  | { |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q=((pixel & 0xf) << 4); |
|  |  | p+=GetPixelChannels(image); |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q|=((pixel & 0xf) << 0); |
|  |  | p+=GetPixelChannels(image); |
|  |  | q++; |
|  |  | } |
|  |  | if ((number\_pixels % 2) != 0) |
|  |  | { |
|  |  | pixel=(unsigned char) GetPixelIndex(image,p); |
|  |  | pixel=(unsigned char) ((ssize\_t) GetPixelIndex(image,p)); |
|  |  | \*q=((pixel & 0xf) << 4); |
|  |  | p+=GetPixelChannels(image); |
|  |  | q++; |
| Expand All | | @@ -2597,7 +2597,7 @@ static void ExportIndexQuantum(const Image \*image,QuantumInfo \*quantum\_info, |
|  |  | { |
|  |  | for (x=0; x < (ssize\_t) number\_pixels; x++) |
|  |  | { |
|  |  | q=PopCharPixel((unsigned char) GetPixelIndex(image,p),q); |
|  |  | q=PopCharPixel((unsigned char) ((ssize\_t) GetPixelIndex(image,p)),q); |
|  |  | p+=GetPixelChannels(image); |
|  |  | q+=quantum\_info->pad; |
|  |  | } |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `5af1dff`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fcommit%2F5af1dffa4b6ab984b5f13d1e91c95760d75f12a6) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


