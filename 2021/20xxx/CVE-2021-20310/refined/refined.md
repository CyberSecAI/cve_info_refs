Based on the provided information, here's an analysis of CVE-2021-20310:

**Root Cause of Vulnerability:**
The vulnerability is a division-by-zero error in the `ConvertXYZToJzazbz()` function within `MagickCore/colorspace.c` of ImageMagick. This occurs when the `white-luminance` property of an image is set to zero. The zero value is then used as the divisor in the function, leading to the error.

**Weaknesses/Vulnerabilities Present:**
- **Division by Zero:** The core vulnerability is the direct division by a user-controlled value that can be zero.
- **Lack of Input Validation:** The code doesn't validate the `white-luminance` value before using it as a divisor, allowing a zero value to propagate to the vulnerable calculation.

**Impact of Exploitation:**
- **Undefined Behavior:** The division by zero leads to undefined behavior, which can cause the application using ImageMagick to crash.
- **Denial of Service (DoS):** The primary threat is to system availability, as an attacker can cause the application to crash.

**Attack Vectors:**
- **Crafted Image File:** An attacker can create a specially crafted image file with the `white-luminance` property set to "0".
- **Image Processing:** When an application uses ImageMagick to process this crafted image, the vulnerable code is executed.

**Required Attacker Capabilities/Position:**
- **Ability to Create/Modify Image Files:** The attacker needs to be able to create or modify an image file to include the malicious `white-luminance` property.
- **Access to Image Processing Application:** The attacker needs to be able to submit this crafted image file to an application using a vulnerable version of ImageMagick.

**Technical Details:**

The vulnerability occurs in the following steps:
1.  The `white-luminance` property is read from the image and assigned to a variable through `StringToDouble()` without validation.
2.  This variable is passed to `ConvertRGBToJzazbz()`.
3.  `ConvertRGBToJzazbz()` then passes the variable to `ConvertXYZToJzazbz()`.
4.  Within `ConvertXYZToJzazbz()`, the value of `white_luminance` is used as a divisor in multiple calculations resulting in a division by zero when `white_luminance` is zero. Specifically, lines 332, 334 and 336 within `MagickCore/colorspace.c` are vulnerable.

**Patch:**
The fix was implemented by using the `PerceptibleReciprocal()` function, which prevents division by zero.

```c
gamma=pow(L/white_luminance,Jzazbz_n); // Original vulnerable code
gamma=pow(L*PerceptibleReciprocal(white_luminance),Jzazbz_n); // patched code
```

This effectively replaces `x/y` with `x * PerceptibleReciprocal(y)`, where `PerceptibleReciprocal()` returns a very large number instead of infinity when y is zero.

**Additional Notes:**

-   The vulnerability was fixed in ImageMagick version 7.0.11.
-   Red Hat has marked this as "NOTABUG" for RHEL 6 and 7 since they are out of support scope and doesn't affect RHEL 8 because the ImageMagick package is not shipped.
-   The vulnerability is also tracked as GHSA-g68g-qfgw-mffh in GitHub.

The provided content gives a comprehensive description of the vulnerability, the vulnerable code location, the exploit, and the fix.