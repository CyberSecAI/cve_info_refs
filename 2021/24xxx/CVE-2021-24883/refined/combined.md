=== Content from wpscan.com_7f8302c4_20250114_224406.html ===


[Skip to content](#wp--skip-link--target)

* [Features](https://a8cteam5105.wordpress.com/features/)
* [Pricing](https://a8cteam5105.wordpress.com/pricing/)
* Solutions
  + [Status](https://status.wpscan.com/)
  + [API Details](/api)
  + [CLI Scanner](https://a8cteam5105.wordpress.com/wordpress-cli-scanner/)
* Vulnerabilities
  + [Themes](/themes)
  + [WordPress](/wordpresses)
  + [Plugins](/plugins)
  + [Stats](/statistics)
  + [Submit Vulnerabilities](/submit)
  + [Leaderboard](/leaderboard)
* Resources
  + [Blog](/blog)
  + [Enterprise Features](https://a8cteam5105.wordpress.com/enterprise-customers-features/)
  + [How to Install WPScan](https://a8cteam5105.wordpress.com/how-to-install-wpscan/)
  + [WPScan Glossary](/wpscan-glossary)
  + [2024 Website Threat Report](https://wpscan.com/2023-website-threat-report/)

Search

## WordPress Plugin Vulnerabilities

# Popup Anything < 2.0.4 - Contributor+ Stored Cross-Site Scripting

### Description

The plugin does not escape the Link Text and Button Text fields of Popup, which could allow users with a role as low as Contributor to perform Cross-Site Scripting attacks

### Affects Plugins

[![Plugin icon](https://s2.wp.com/wp-content/themes/a8c/wpscan/assets/img/plugin-icon.svg)

popup-anything-on-click](https://a8cteam5105.wordpress.com/plugin/popup-anything-on-click/)

![](https://s2.wp.com/wp-content/themes/a8c/wpscan/assets/img/checkmark-green-alt.svg)
Fixed in 2.0.4

### References

CVE
[CVE-2021-24883](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-24883)

URL
<https://www.fortiguard.com/zeroday/FG-VD-21-069>

URL
<https://plugins.trac.wordpress.org/changeset/2610975>

### Classification

Type
XSS

OWASP top 10
[A7: Cross-Site Scripting (XSS)](https://www.owasp.org/index.php/Top_10-2017_A7-Cross-Site_Scripting_%28XSS%29)

CWE
[CWE-79](https://cwe.mitre.org/data/definitions/79.html)

CVSS
[6.8 (medium)](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:H/UI:R/S:U/C:H/I:H/A:H)

### Miscellaneous

Original Researcher
Vishnupriya ilango

Submitter
Vishnupriya ilango

Submitter website
<https://www.fortiguard.com/zeroday>

Verified
Yes

WPVDB ID
[c5dd3812-ea20-4e05-a5d3-84830b452822](https://a8cteam5105.wordpress.com/vulnerability/c5dd3812-ea20-4e05-a5d3-84830b452822/)

### Timeline

Publicly Published
2021-10-25 (about 3 years ago)

Added
2021-10-26 (about 3 years ago)

Last Updated
2022-04-13 (about 2 years ago)

### Other

Published
Title

Published
2015-08-21
Title
[YITH Maintenance Mode < 1.2.0 - Authenticated Reflected Cross-Site Scripting (XSS)](https://a8cteam5105.wordpress.com/vulnerability/b613b18e-6c3b-4a7d-b6bd-a51d3ae6b37c/)

Published
2024-11-08
Title
[WP Listings Pro <= 3.0.14 - Authenticated (Contributor+) Stored Cross-Site Scripting](https://a8cteam5105.wordpress.com/vulnerability/6275e1ab-5478-4f0e-9736-3004e5c715dc/)

Published
2024-12-05
Title
[Flixita < 1.0.83 - Reflected Cross-Site Scripting via id Parameter](https://a8cteam5105.wordpress.com/vulnerability/95e4e9e0-0347-4f03-adc6-8423205370f0/)

Published
2021-06-30
Title
[Newspaper < 11 - Reflected Cross-Site Scripting (XSS)](https://a8cteam5105.wordpress.com/vulnerability/5ccb3cb0-681a-4e5b-8850-871a700083c0/)

Published
2022-07-19
Title
[WP-UserOnline < 2.88.0 - Admin+ Stored Cross-Site Scripting](https://a8cteam5105.wordpress.com/vulnerability/d518ac85-96eb-45ec-bafa-f547aa556988/)

![](https://wpscan.com/wp-content/uploads/2023/10/wpscan-logo-dark.png?w=246)

### Vulnerabilities

* [WordPress](/wordpresses)
* [Plugins](/plugins)
* [Themes](/themes)
* [Our Stats](https://a8cteam5105.wordpress.com/statistics/)
* [Submit vulnerabilities](https://a8cteam5105.wordpress.com/submit/)

#### About

* [How it works](/features)
* [Pricing](/pricing)
* [WordPress plugin](https://wordpress.org/plugins/wpscan/)
* [Blog](/blog)
* [Contact](/contact)

#### For Developers

* [Status](https://status.wpscan.com/)
* [API details](/api)
* [CLI scanner](/wordpress-cli-scanner)

#### Other

* [Privacy](https://automattic.com/privacy/)
* [Terms of service](/terms)
* [Submission terms](/submission-terms/)
* [Disclosure policy](/vulnerability-disclosure-policy)
* [Privacy Notice for California Users](https://automattic.com/privacy/#california-consumer-privacy-act-ccpa)

---

![](https://wpscan.com/wp-content/uploads/2023/08/frame-1323.png?w=48)

In partnership with [Jetpack](https://jetpack.com/)

* [GitHub](https://github.com/wpscanteam/wpscan/)
* [Twitter](https://twitter.com/_wpscan_)
* [Facebook](https://www.facebook.com/WPScan)

---

An

![](https://wpscan.com/wp-content/uploads/2023/08/autpmattic-logo.png?w=298)

endeavor

[Work With Us](https://automattic.com/work-with-us/)

[Press](https://automattic.com/press/)

* Subscribe
  Subscribed

  + [![](https://wpscan.com/wp-content/uploads/2023/08/cropped-83c25-favicon.png?w=50) WPScan](https://wpscan.com)

  Join 30,404 other subscribers

  Sign me up

  + Already have a WordPress.com account? [Log in now.](https://wordpress.com/log-in?redirect_to=https%3A%2F%2Fr-login.wordpress.com%2Fremote-login.php%3Faction%3Dlink%26back%3Dhttps%253A%252F%252Fwpscan.com%252Fblog%252Funauthorized-plugin-installation-activation-in-hunk-companion%252F)
* Privacy
* + [![](https://wpscan.com/wp-content/uploads/2023/08/cropped-83c25-favicon.png?w=50) WPScan](https://wpscan.com)
  + Subscribe
    Subscribed
  + [Sign up](https://wordpress.com/start/)
  + [Log in](https://wordpress.com/log-in?redirect_to=https%3A%2F%2Fr-login.wordpress.com%2Fremote-login.php%3Faction%3Dlink%26back%3Dhttps%253A%252F%252Fwpscan.com%252Fblog%252Funauthorized-plugin-installation-activation-in-hunk-companion%252F)
  + [Report this content](https://wordpress.com/abuse/?report_url=https://wpscan.com)
  + [View site in Reader](https://wordpress.com/read/feeds/156197069)
  + [Manage subscriptions](https://subscribe.wordpress.com/)
  + Collapse this bar

![](https://pixel.wp.com/b.gif?v=noscript)


=== Content from plugins.trac.wordpress.org_a72eb5b0_20250114_224404.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F2610975)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/2610974 "Changeset 2610974")
* [Next Changeset](/changeset/2610976 "Changeset 2610976") →

---

# Changeset 2610975

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/07/2021 12:25:10 PM
([3 years](/timeline?from=2021-10-07T12%3A25%3A10Z&precision=second "See timeline at 10/07/2021 12:25:10 PM") ago)

Author:
wponlinesupport
Message:

Update to version 2.0.3

Location:
[popup-anything-on-click/trunk](/browser/popup-anything-on-click/trunk?rev=2610975)
Files:

12 edited

* [assets/css/popupaoc-public.css](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2610975 "Show entry in browser")
  (modified)
  ([7 diffs](#file0 "Show differences"))
* [assets/js/popupaoc-public.js](/browser/popup-anything-on-click/trunk/assets/js/popupaoc-public.js?rev=2610975 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [includes/admin/class-popupaoc-admin.php](/browser/popup-anything-on-click/trunk/includes/admin/class-popupaoc-admin.php?rev=2610975 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [includes/admin/metabox/behaviour-metabox.php](/browser/popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php?rev=2610975 "Show entry in browser")
  (modified)
  ([4 diffs](#file3 "Show differences"))
* [includes/admin/metabox/content-metabox.php](/browser/popup-anything-on-click/trunk/includes/admin/metabox/content-metabox.php?rev=2610975 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [includes/admin/paoc-db-upgrade.php](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610975 "Show entry in browser")
  (modified)
  ([6 diffs](#file5 "Show differences"))
* [includes/popupaoc-functions.php](/browser/popup-anything-on-click/trunk/includes/popupaoc-functions.php?rev=2610975 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [includes/shortcode/popupaoc-popup-shortcode.php](/browser/popup-anything-on-click/trunk/includes/shortcode/popupaoc-popup-shortcode.php?rev=2610975 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [popup-anything-on-click.php](/browser/popup-anything-on-click/trunk/popup-anything-on-click.php?rev=2610975 "Show entry in browser")
  (modified)
  ([4 diffs](#file9 "Show differences"))
* [readme.txt](/browser/popup-anything-on-click/trunk/readme.txt?rev=2610975 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [templates/announcement/design-1.php](/browser/popup-anything-on-click/trunk/templates/announcement/design-1.php?rev=2610975 "Show entry in browser")
  (modified)
  ([2 diffs](#file11 "Show differences"))
* [templates/content.php](/browser/popup-anything-on-click/trunk/templates/content.php?rev=2610975 "Show entry in browser")
  (modified)
  ([2 diffs](#file12 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [popup-anything-on-click/trunk/assets/css/popupaoc-public.css](/changeset/2610975/popup-anything-on-click/trunk/assets/css/popupaoc-public.css "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/assets/css/popupaoc-public.css")

  | [r2609519](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2609519#L10 "Show revision 2609519 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2610975#L10 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | .paoc-center{text-align: center;} |
  | 11 | 11 | .paoc-left{text-align: left;} |
  |  | 12 | .paoc-padding-20{padding: 20px;} |
  | 12 | 13 | .paoc-padding-30{padding: 30px;} |
  | 13 | 14 | .paoc-lr-padding{padding-left: 15px; padding-right: 15px;} |
  | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2609519#L22) | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2610975#L23) |  |
  | 22 | 23 | .paoc-iframe-wrap iframe{position: absolute; left: 0; top: 0; border: 0; height: 100%;} |
  | 23 | 24 |  |
  | 24 |  | .paoc-~~pro-~~image-popup{ padding: 10px 0; } |
  |  | 25 | .paoc-image-popup{ padding: 10px 0; } |
  | 25 | 26 | .paoc-popup-inr-wrap{position: relative;} |
  | 26 |  | .paoc-popup-inr{color: #333;} |
  |  | 27 | .paoc-popup-inr{color: #333; -ms-flex-preferred-size: 100%; flex-basis: 100%;} |
  | 27 | 28 | .paoc-popup-mheading{font-size: 26px; color: #000000; line-height:normal; font-weight: 700;} |
  | 28 | 29 | .paoc-popup-sheading{font-size: 20px; color: #333333; line-height:normal; font-weight: 500;} |
  | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2609519#L42) | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2610975#L43) |  |
  | 42 | 43 | .paoc-cb-popup-body .paoc-popup-content p:last-child, |
  | 43 | 44 | .paoc-cb-popup-body .paoc-secondary-con p:last-child{margin-bottom: 0;} |
  | 44 |  | .paoc-~~pro-close-popup{position: absolute; top: -10px; right: -10px; width: 35px; height: 35px; font-size: 0; cursor: pointer; text-decoration: none; text-align: center; line-height: 29px; fill: #fff; border-radius: 50px; background-color: rgb(0, 0, 0); border: 3px solid #fff~~;} |
  | 45 |  | .paoc-~~pro-~~close-popup svg{display: inline-block; vertical-align: middle; height: 19px; width: 19px;} |
  | 46 |  | .paoc-~~pro-~~close-popup:hover{background-color: #000000;} |
  |  | 45 | .paoc-close-popup{position: absolute; top: -10px; right: -10px; width: 35px; height: 35px; font-size: 0; cursor: pointer; text-decoration: none; text-align: center; line-height: 29px; fill: #fff; border-radius: 50px; background-color: rgb(0, 0, 0); border: 3px solid #fff; outline: none !important;} |
  |  | 46 | .paoc-close-popup svg{display: inline-block; vertical-align: middle; height: 19px; width: 19px;} |
  |  | 47 | .paoc-close-popup:hover{background-color: #000000;} |
  | 47 | 48 |  |
  | 48 | 49 | /\* Ninja Form CSS \*/ |
  | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2609519#L51) | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2610975#L52) |  |
  | 51 | 52 |  |
  | 52 | 53 | /\* Button Style CSS \*/ |
  | 53 |  | .paoc-pro-popup-button{padding: 8px 20px; background:#e91e63; color:#fff; text-decoration:none; border-radius:3px;} |
  | 54 |  | .paoc-pro-popup-button:hover, .paoc-pro-popup-button:focus{background:#555; color:#fff;} |
  |  | 54 | .paoc-popup-btn{display: inline-block; padding: 8px 20px; text-align:center; background:#e91e63; color:#fff; border-radius: 3px;} |
  |  | 55 | .paoc-popup-btn:hover, |
  |  | 56 | .paoc-popup-btn:focus, |
  |  | 57 | .paoc-popup-btn:active{background:#555; color:#fff;} |
  | 55 | 58 |  |
  | 56 | 59 | .popupaoc-black{background-color: #252525;} |
  | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2609519#L172) | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2610975#L175) |  |
  | 172 | 175 | .paoc-hide-overlay.paoc-popup-right-bottom{right: 0; bottom: 0; top: unset;} |
  | 173 | 176 | .paoc-cb-popup-complete.paoc-hide-overlay.paoc-popup-center-center{height: -webkit-max-content; height: -moz-max-content; height: max-content;} |
  | 174 |  | .paoc-hide-overlay .paoc-~~pro-~~close-popup{top: 0; right: 0;} |
  |  | 177 | .paoc-hide-overlay .paoc-close-popup{top: 0; right: 0;} |
  | 175 | 178 | /\* Popup Position With Hide Overlay - End \*/ |
  | 176 | 179 |  |
  | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2609519#L182) | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2610975#L185) |  |
  | 182 | 185 | .custombox-fullscreen.paoc-cb-popup .paoc-cb-popup-body{height: 100%; overflow-y: auto;} |
  | 183 | 186 | .custombox-fullscreen .paoc-popup-fullscreen .paoc-popup-inr-wrap{height: 100%;} |
  | 184 |  | .paoc-popup-fullscreen.paoc-cb-popup-body{max-width: ~~unset~~;} |
  | 185 |  | .paoc-popup-fullscreen .paoc-~~pro-~~close-popup{top: 0; right: 0;} |
  |  | 187 | .paoc-popup-fullscreen.paoc-cb-popup-body{max-width: 100%;} |
  |  | 188 | .paoc-popup-fullscreen .paoc-close-popup{top: 0; right: 0;} |
  | 186 | 189 | /\* Fullscreen Popup CSS - End \*/ |
  | 187 | 190 |  |
  | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2609519#L200) | […](/browser/popup-anything-on-click/trunk/assets/css/popupaoc-public.css?rev=2610975#L203) |  |
  | 200 | 203 | /\* General CSS \*/ |
  | 201 | 204 | .paoc-padding-30{padding: 30px 15px;} |
  | 202 |  | .paoc-~~pro-~~close-popup{background-color: rgba(255, 255, 255, 0.5);} |
  |  | 205 | .paoc-close-popup{background-color: rgba(255, 255, 255, 0.5);} |
  | 203 | 206 | } |
  | 204 | 207 |  |
* ## [popup-anything-on-click/trunk/assets/js/popupaoc-public.js](/changeset/2610975/popup-anything-on-click/trunk/assets/js/popupaoc-public.js "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/assets/js/popupaoc-public.js")

  | [r2609519](/browser/popup-anything-on-click/trunk/assets/js/popupaoc-public.js?rev=2609519#L51 "Show revision 2609519 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/assets/js/popupaoc-public.js?rev=2610975#L51 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 51 | 51 |  |
  | 52 | 52 | /\* On Click Popup Link, Button, Image \*/ |
  | 53 |  | $(document).on('click', '[class\*="paoc-p~~ro-p~~opup-cust-"]', function() { |
  |  | 53 | $(document).on('click', '[class\*="paoc-popup-cust-"]', function() { |
  | 54 | 54 |  |
  | 55 | 55 | var html\_classes = $(this).attr("class").split(' '); |
  | […](/browser/popup-anything-on-click/trunk/assets/js/popupaoc-public.js?rev=2609519#L57) | […](/browser/popup-anything-on-click/trunk/assets/js/popupaoc-public.js?rev=2610975#L57) |  |
  | 57 | 57 | $.each(html\_classes, function( class\_key, class\_val ) { |
  | 58 | 58 |  |
  | 59 |  | var normal\_cls\_pos = class\_val.indexOf('paoc-p~~ro-p~~opup-cust-'); |
  |  | 59 | var normal\_cls\_pos = class\_val.indexOf('paoc-popup-cust-'); |
  | 60 | 60 |  |
  | 61 | 61 | /\* Popup custom classes is not there \*/ |
  | […](/browser/popup-anything-on-click/trunk/assets/js/popupaoc-public.js?rev=2609519#L64) | […](/browser/popup-anything-on-click/trunk/assets/js/popupaoc-public.js?rev=2610975#L64) |  |
  | 64 | 64 | } |
  | 65 | 65 |  |
  | 66 |  | var target      = class\_val.replace("paoc-p~~ro-p~~opup-cust-", "paoc-popup-"); |
  |  | 66 | var target      = class\_val.replace("paoc-popup-cust-", "paoc-popup-"); |
  | 67 | 67 | target      = target.trim(); |
  | 68 | 68 | var popup\_ele   = $('.'+target).attr('id'); |
* ## [popup-anything-on-click/trunk/includes/admin/class-popupaoc-admin.php](/changeset/2610975/popup-anything-on-click/trunk/includes/admin/class-popupaoc-admin.php "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/includes/admin/class-popupaoc-admin.php")

  | [r2610241](/browser/popup-anything-on-click/trunk/includes/admin/class-popupaoc-admin.php?rev=2610241#L129 "Show revision 2610241 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/includes/admin/class-popupaoc-admin.php?rev=2610975#L129 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 129 | 129 | $behaviour['popup\_img\_id']      = ! empty( $behaviour['popup\_img\_id'] )     ? popupaoc\_clean\_number( $behaviour['popup\_img\_id'] )           : 0; |
  | 130 | 130 | $behaviour['image\_url']         = isset( $behaviour['image\_url'] )          ? popupaoc\_clean\_url( $behaviour['image\_url'] )                 : ''; |
  | 131 |  | $behaviour['btn\_class']         = isset( $behaviour['btn\_class'] )          ? popupaoc\_clean( $behaviour['btn\_class'] )                     : ''; |
  | 132 |  | $behaviour['btn\_text']          = ! empty( $behaviour['btn\_text'] )         ? popupaoc\_clean( $behaviour['btn\_text'] )                      : \_\_('Click Here!!!', 'popup-anything-on-click'); |
  | 133 |  | $behaviour['link\_text']         = ! empty( $behaviour['link\_text'] )        ? popupaoc\_clean( $behaviour['link\_text'] )                     : \_\_('Click Me!!!', 'popup-anything-on-click'); |
  |  | 131 | $behaviour['btn\_class']         = isset( $behaviour['btn\_class'] )          ? popupaoc\_sanitize\_html\_classes( $behaviour['btn\_class'] )     : ''; |
  |  | 132 | $behaviour['btn\_text']          = ! empty( $behaviour['btn\_text'] )         ? popupaoc\_clean\_html( $behaviour['btn\_text'] )                 : ''; |
  |  | 133 | $behaviour['btn\_text']          = ! empty( $behaviour['btn\_text'] )         ? $behaviour['btn\_text']                                        : esc\_html\_\_('Click Here!!!', 'popup-anything-on-click'); |
  |  | 134 | $behaviour['link\_text']         = ! empty( $behaviour['link\_text'] )        ? popupaoc\_clean\_html( $behaviour['link\_text'] )                : ''; |
  |  | 135 | $behaviour['link\_text']         = ! empty( $behaviour['link\_text'] )        ? $behaviour['link\_text']                                       : esc\_html\_\_('Click Me!!!', 'popup-anything-on-click'); |
  | 134 | 136 | $behaviour['image\_title']       = ! empty( $behaviour['image\_title'] )      ? 1 : 0; |
  | 135 | 137 | $behaviour['image\_caption']     = ! empty( $behaviour['image\_caption'] )    ? 1 : 0; |
* ## [popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php](/changeset/2610975/popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php")

  | [r2609519](/browser/popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php?rev=2609519#L26 "Show revision 2609519 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php?rev=2610975#L26 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | $image\_url          = isset( $behaviour['image\_url'] )          ? $behaviour['image\_url']       : ''; |
  | 27 | 27 | $btn\_class          = isset( $behaviour['btn\_class'] )          ? $behaviour['btn\_class']       : ''; |
  | 28 |  | $link\_text          = ! empty( $behaviour['link\_text'] )        ? $behaviour['link\_text']       : ~~\_\_('Click Me!!!', 'popup-anything-on-click')~~; |
  | 29 |  | $btn\_text           = ! empty( $behaviour['btn\_text'] )         ? $behaviour['btn\_text']        : ~~\_\_('Click Here!!!', 'popup-anything-on-click')~~; |
  |  | 28 | $link\_text          = ! empty( $behaviour['link\_text'] )        ? $behaviour['link\_text']       : ''; |
  |  | 29 | $btn\_text           = ! empty( $behaviour['btn\_text'] )         ? $behaviour['btn\_text']        : ''; |
  | 30 | 30 | $popup\_img\_id       = ! empty( $behaviour['popup\_img\_id'] )     ? $behaviour['popup\_img\_id']    : 0; |
  | 31 | 31 | $image\_title        = ! empty( $behaviour['image\_title'] )      ? 1                             : 0; |
  | […](/browser/popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php?rev=2609519#L139) | […](/browser/popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php?rev=2610975#L139) |  |
  | 139 | 139 | </th> |
  | 140 | 140 | <td> |
  | 141 |  | <div class="paoc-pro-shortcode-preview paoc-copy-clipboard">[popup\_anything id="<?php echo ~~$post->ID~~; ?>"]</div><br/> |
  |  | 141 | <div class="paoc-pro-shortcode-preview paoc-copy-clipboard">[popup\_anything id="<?php echo popupaoc\_esc\_attr( $post->ID ); ?>"]</div><br/> |
  | 142 | 142 | <span class="description"><?php \_e('Add this shortcode and popup will display on its click.', 'popup-anything-on-click'); ?></span> |
  | 143 | 143 | </td> |
  | […](/browser/popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php?rev=2609519#L194) | […](/browser/popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php?rev=2610975#L194) |  |
  | 194 | 194 | </th> |
  | 195 | 195 | <td> |
  | 196 |  | <div class="paoc-pro-shortcode-preview paoc-copy-clipboard">[popup\_anything id="<?php echo ~~$post->ID~~; ?>"]</div><br/> |
  |  | 196 | <div class="paoc-pro-shortcode-preview paoc-copy-clipboard">[popup\_anything id="<?php echo popupaoc\_esc\_attr( $post->ID ); ?>"]</div><br/> |
  | 197 | 197 | <span class="description"><?php \_e('Add this shortcode and popup will display on its click.', 'popup-anything-on-click'); ?></span> |
  | 198 | 198 | </td> |
  | […](/browser/popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php?rev=2609519#L230) | […](/browser/popup-anything-on-click/trunk/includes/admin/metabox/behaviour-metabox.php?rev=2610975#L230) |  |
  | 230 | 230 | </th> |
  | 231 | 231 | <td> |
  | 232 |  | <div class="paoc-pro-shortcode-preview paoc-copy-clipboard">[popup\_anything id="<?php echo ~~$post->ID~~; ?>"]</div><br/> |
  |  | 232 | <div class="paoc-pro-shortcode-preview paoc-copy-clipboard">[popup\_anything id="<?php echo popupaoc\_esc\_attr( $post->ID ); ?>"]</div><br/> |
  | 233 | 233 | <span class="description"><?php \_e('Add this shortcode and popup will display on its click.', 'popup-anything-on-click'); ?></span> |
  | 234 | 234 | </td> |
* ## [popup-anything-on-click/trunk/includes/admin/metabox/content-metabox.php](/changeset/2610975/popup-anything-on-click/trunk/includes/admin/metabox/content-metabox.php "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/includes/admin/metabox/content-metabox.php")

  | [r2609519](/browser/popup-anything-on-click/trunk/includes/admin/metabox/content-metabox.php?rev=2609519#L55 "Show revision 2609519 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/includes/admin/metabox/content-metabox.php?rev=2610975#L55 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 55 | 55 | </th> |
  | 56 | 56 | <td> |
  | 57 |  | <?php wp\_editor( $popup\_content, 'paoc-popup-content', array('textarea\_name' => 'content', '~~textarea\_rows' => 8~~, 'media\_buttons' => true) ); ?> |
  |  | 57 | <?php wp\_editor( $popup\_content, 'paoc-popup-content', array('textarea\_name' => 'content', 'editor\_height' => 300, 'media\_buttons' => true) ); ?> |
  | 58 | 58 | <span class="description"><?php echo sprintf( esc\_html\_\_('Enter popup content which will display after respective `Call to Action` like email form etc. Available template tags are %s.', 'popup-anything-on-click'), '<a href="javascript:void(0)" class="paoc-show-popup-tags" title="'.esc\_html\_\_('Popup Tags', 'popup-anything-on-click').'" data-tags="general">'.esc\_html\_\_('here', 'popup-anything-on-click').'</a>' ); ?></span> |
  | 59 | 59 | </td> |
  | […](/browser/popup-anything-on-click/trunk/includes/admin/metabox/content-metabox.php?rev=2609519#L65) | […](/browser/popup-anything-on-click/trunk/includes/admin/metabox/content-metabox.php?rev=2610975#L65) |  |
  | 65 | 65 | </th> |
  | 66 | 66 | <td> |
  | 67 |  | <?php wp\_editor( $secondary\_content, 'paoc-secondary-con', array('textarea\_name' => $prefix.'content[secondary\_content]', '~~textarea\_rows' => 8~~, 'media\_buttons' => true) ); ?> |
  |  | 67 | <?php wp\_editor( $secondary\_content, 'paoc-secondary-con', array('textarea\_name' => $prefix.'content[secondary\_content]', 'editor\_height' => 300, 'media\_buttons' => true) ); ?> |
  | 68 | 68 | <span class="description"><?php echo sprintf( esc\_html\_\_('Enter popup secondary content which will display after respective `Call to Action` like email form etc. Available template tags are %s.', 'popup-anything-on-click'), '<a href="javascript:void(0)" class="paoc-show-popup-tags" title="'.esc\_html\_\_('Popup Tags', 'popup-anything-on-click').'" data-tags="general">'.esc\_html\_\_('here', 'popup-anything-on-click').'</a>' ); ?></span> |
  | 69 | 69 | </td> |
* ## [popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php](/changeset/2610975/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php")

  | [r2610241](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610241#L22 "Show revision 2610241 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610975#L22 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 22 | 22 | if( $screen\_id != 'aoc\_popup\_page\_popupaoc-db-update' ) { |
  | 23 | 23 |  |
  | 24 |  | // Taking metabox prefix |
  | 25 |  | $prefix = POPUPAOC\_META\_PREFIX; |
  | 26 |  |  |
  | 27 |  | // WP Query Parameters |
  | 28 |  | $args = array ( |
  | 29 |  | 'posts\_per\_page'        => 1, |
  | 30 |  | 'post\_type'             => POPUPAOC\_POST\_TYPE, |
  | 31 |  | 'post\_status'           => array( 'any', 'inherit', 'trash' ), |
  | 32 |  | 'fields'                => 'ids', |
  | 33 |  | 'no\_found\_rows'         => true, |
  | 34 |  | 'ignore\_sticky\_posts'   => true, |
  | 35 |  | 'meta\_query'            => array( |
  | 36 |  | array( |
  | 37 |  | 'key'       => $prefix.'design', |
  | 38 |  | 'value'     => '', |
  | 39 |  | 'compare'   => 'NOT EXISTS', |
  | 40 |  | ), |
  | 41 |  | ) |
  | 42 |  | ); |
  | 43 |  |  |
  | 44 |  | // WP Query |
  | 45 |  | $popup\_post = get\_posts( $args ); |
  | 46 |  |  |
  | 47 |  | // If Old Popup Post Found |
  | 48 |  | if( ! empty( $popup\_post ) ) { |
  | 49 |  |  |
  | 50 |  | $update\_url = add\_query\_arg( array( 'post\_type' => POPUPAOC\_POST\_TYPE, 'page' => 'popupaoc-db-update' ), admin\_url( 'edit.php' ) ); |
  | 51 |  |  |
  | 52 |  | echo '<div class="notice notice-error"> |
  | 53 |  | <p><strong>'. esc\_html\_\_('Popup Anything database update required.', 'popup-anything-on-click'). '</strong></p> |
  | 54 |  | <p><strong>'. esc\_html\_\_('Popup Anything needs to be updated! To keep things running smoothly, we have to update your database to the newest version. The database update process runs in the background and may take a little while, so please be patient.', 'popup-anything-on-click'). '</strong></p> |
  | 55 |  | <p><a class="button button-primary" href="'.esc\_url( $update\_url ).'">'.esc\_html\_\_('Update Database', 'popup-anything-on-click').'</a></p> |
  | 56 |  | </div>'; |
  | 57 |  | } |
  |  | 24 | // Taking some variable |
  |  | 25 | $update\_url = add\_query\_arg( array( 'post\_type' => POPUPAOC\_POST\_TYPE, 'page' => 'popupaoc-db-update' ), admin\_url( 'edit.php' ) ); |
  |  | 26 |  |
  |  | 27 | echo '<div class="notice notice-error"> |
  |  | 28 | <p><strong>'. esc\_html\_\_('Popup Anything database update required.', 'popup-anything-on-click'). '</strong></p> |
  |  | 29 | <p><strong>'. esc\_html\_\_('Popup Anything needs to be updated! To keep things running smoothly, we have to update your database to the newest version. The database update process runs in the background and may take a little while, so please be patient.', 'popup-anything-on-click'). '</strong></p> |
  |  | 30 | <p><a class="button button-primary" href="'.esc\_url( $update\_url ).'">'.esc\_html\_\_('Update Database', 'popup-anything-on-click').'</a></p> |
  |  | 31 | </div>'; |
  | 58 | 32 | } |
  | 59 | 33 | } |
  | […](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610241#L153) | […](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610975#L127) |  |
  | 153 | 127 | function popupaoc\_popup\_data\_migrate() { |
  | 154 | 128 |  |
  | 155 |  | global $popupaoc\_options; |
  |  | 129 | global $wpdb, $popupaoc\_options; |
  | 156 | 130 |  |
  | 157 | 131 | // Taking some defaults |
  | 158 |  | $limit          = 10; |
  | 159 |  | $count          = 0; |
  | 160 |  | $prefix         = POPUPAOC\_META\_PREFIX; |
  | 161 |  | $page           = ! empty( $\_POST['page'] )         ? popupaoc\_clean\_number( $\_POST['page'] )           : 1; |
  | 162 |  | $data\_process   = ! empty( $\_POST['data\_process'] ) ? popupaoc\_clean\_number( $\_POST['data\_process'] )   : 0; |
  | 163 |  | $nonce          = isset( $\_POST['nonce'] )          ? popupaoc\_clean( $\_POST['nonce'] )                 : ''; |
  | 164 |  | $result         = array( |
  | 165 |  | 'status'            => 0, |
  | 166 |  | 'result\_message'    => '', |
  | 167 |  | 'message'           => esc\_html\_\_('Sorry, Something happened wrong.', 'popup-anything-on-click'), |
  | 168 |  | ); |
  |  | 132 | $limit              = 10; |
  |  | 133 | $count              = 0; |
  |  | 134 | $prefix             = POPUPAOC\_META\_PREFIX; |
  |  | 135 | $popup\_post\_type    = POPUPAOC\_POST\_TYPE; |
  |  | 136 | $page               = ! empty( $\_POST['page'] )         ? popupaoc\_clean\_number( $\_POST['page'] )           : 1; |
  |  | 137 | $data\_process       = ! empty( $\_POST['data\_process'] ) ? popupaoc\_clean\_number( $\_POST['data\_process'] )   : 0; |
  |  | 138 | $total\_count        = ! empty( $\_POST['total\_count'] )  ? popupaoc\_clean\_number( $\_POST['total\_count'] )    : 0; |
  |  | 139 | $nonce              = isset( $\_POST['nonce'] )          ? popupaoc\_clean( $\_POST['nonce'] )                 : ''; |
  |  | 140 | $result             = array( |
  |  | 141 | 'status'            => 0, |
  |  | 142 | 'result\_message'    => '', |
  |  | 143 | 'message'           => esc\_html\_\_('Sorry, Something happened wrong.', 'popup-anything-on-click'), |
  |  | 144 | ); |
  | 169 | 145 |  |
  | 170 | 146 | // Verify Nonce |
  | […](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610241#L194) | […](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610975#L170) |  |
  | 194 | 170 | } |
  | 195 | 171 |  |
  | 196 |  | // Get All Old Popup |
  | 197 |  | $args = array( |
  | 198 |  | 'post\_type'                 => POPUPAOC\_POST\_TYPE, |
  | 199 |  | 'post\_status'               => array( 'any', 'inherit', 'trash' ), |
  | 200 |  | 'fields'                    => 'ids', |
  | 201 |  | 'order'                     => 'DESC', |
  | 202 |  | 'orderby'                   => 'date', |
  | 203 |  | 'paged'                     => 1, |
  | 204 |  | 'posts\_per\_page'            => $limit, |
  | 205 |  | 'cache\_results'             => false, |
  | 206 |  | 'update\_post\_meta\_cache'    => false, |
  | 207 |  | 'update\_post\_term\_cache'    => false, |
  | 208 |  | 'meta\_query'                => array( |
  | 209 |  | array( |
  | 210 |  | 'key'       => $prefix.'design', |
  | 211 |  | 'value'     => '', |
  | 212 |  | 'compare'   => 'NOT EXISTS', |
  | 213 |  | ), |
  | 214 |  | ) |
  | 215 |  | ); |
  | 216 |  | $popup\_query = new WP\_Query( $args ); |
  |  | 172 | // Get All Old Popup |
  |  | 173 | $popup\_query\_sql = $wpdb->prepare( "SELECT SQL\_CALC\_FOUND\_ROWS  p.ID FROM {$wpdb->posts} AS p LEFT JOIN {$wpdb->postmeta} AS pm ON ( p.ID = pm.post\_id AND pm.meta\_key = '{$prefix}design' ) WHERE 1=1  AND ( pm.post\_id IS NULL ) AND p.post\_type = '{$popup\_post\_type}' AND ((p.post\_status <> 'auto-draft')) GROUP BY p.ID ORDER BY p.post\_date DESC LIMIT 0, %d", $limit ); |
  |  | 174 | $popup\_query\_res = $wpdb->get\_results( $popup\_query\_sql, ARRAY\_A ); |
  | 217 | 175 |  |
  | 218 | 176 | if( $page < 2 ) { |
  | 219 | 177 |  |
  | 220 |  | $total\_count = $~~popup\_query->found\_posts~~; |
  |  | 178 | $total\_count = $wpdb->get\_var( 'SELECT FOUND\_ROWS();' ); |
  | 221 | 179 |  |
  | 222 | 180 | $result['result\_message'] .= '<p>'. sprintf( \_\_( 'Total %d Popup found for update.', 'popup-anything-on-click' ), $total\_count ) .'</p>'; |
  | […](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610241#L224) | […](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610975#L182) |  |
  | 224 | 182 | } |
  | 225 | 183 |  |
  | 226 |  | if( ! empty( $popup\_query~~->post~~s ) ) { |
  | 227 |  | foreach ($popup\_query~~->posts as $popup\_post\_key => $popup\_id~~) { |
  |  | 184 | if( ! empty( $popup\_query\_res ) ) { |
  |  | 185 | foreach ($popup\_query\_res as $popup\_post\_key => $popup\_data) { |
  | 228 | 186 |  |
  | 229 | 187 | $count++; |
  | 230 | 188 |  |
  | 231 | 189 | // Taking some Old Popup Meta |
  |  | 190 | $popup\_id       = $popup\_data['ID']; |
  | 232 | 191 | $behaviour\_meta = get\_post\_meta( $popup\_id, $prefix.'behaviour', true ); |
  | 233 | 192 | $advance\_meta   = get\_post\_meta( $popup\_id, $prefix.'advance', true ); |
  | […](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610241#L326) | […](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610975#L285) |  |
  | 326 | 285 |  |
  | 327 | 286 | // Update plugin db version to latest |
  | 328 |  | if ( version\_compare( $plugin\_version, '1.~~2~~' ) < 0 ) { |
  | 329 |  | update\_option( 'popupaoc\_plugin\_version', '1.~~2~~' ); |
  |  | 287 | if ( version\_compare( $plugin\_version, '1.3' ) < 0 ) { |
  |  | 288 | update\_option( 'popupaoc\_plugin\_version', '1.3' ); |
  | 330 | 289 | } |
  | 331 | 290 | } |
  | […](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610241#L345) | […](/browser/popup-anything-on-click/trunk/includes/admin/paoc-db-upgrade.php?rev=2610975#L304) |  |
  | 345 | 304 |  |
  | 346 | 305 | // Update plugin db version to latest |
  | 347 |  | if ( version\_compare( $plugin\_version, '1.~~2~~' ) < 0 ) { |
  | 348 |  | update\_option( 'popupaoc\_plugin\_version', '1.~~2~~' ); |
  |  | 306 | if ( version\_compare( $plugin\_version, '1.3' ) < 0 ) { |
  |  | 307 | update\_option( 'popupaoc\_plugin\_version', '1.3' ); |
  | 349 | 308 | } |
  | 350 | 309 |  |
* ## [popup-anything-on-click/trunk/includes/popupaoc-functions.php](/changeset/2610975/popup-anything-on-click/trunk/includes/popupaoc-functions.php "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/includes/popupaoc-functions.php")

  | [r2609519](/browser/popup-anything-on-click/trunk/includes/popupaoc-functions.php?rev=2609519#L199 "Show revision 2609519 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/includes/popupaoc-functions.php?rev=2610975#L199 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 199 | 199 |  |
  | 200 | 200 | return $data; |
  |  | 201 | } |
  |  | 202 |  |
  |  | 203 | /\*\* |
  |  | 204 | \* Sanitize Multiple HTML class |
  |  | 205 | \* |
  |  | 206 | \* @package Popup Anything on Click |
  |  | 207 | \* @since 2.0.2 |
  |  | 208 | \*/ |
  |  | 209 | function popupaoc\_sanitize\_html\_classes( $classes, $sep = " " ) { |
  |  | 210 | $return = ""; |
  |  | 211 |  |
  |  | 212 | if( $classes && ! is\_array( $classes ) ) { |
  |  | 213 | $classes = explode( $sep, $classes ); |
  |  | 214 | } |
  |  | 215 |  |
  |  | 216 | if( ! empty( $classes ) ) { |
  |  | 217 | foreach( $classes as $class ){ |
  |  | 218 | $return .= sanitize\_html\_class( $class ) . " "; |
  |  | 219 | } |
  |  | 220 | $return = trim( $return ); |
  |  | 221 | } |
  |  | 222 |  |
  |  | 223 | return $return; |
  | 201 | 224 | } |
  | 202 | 225 |  |
* ## [popup-anything-on-click/trunk/includes/shortcode/popupaoc-popup-shortcode.php](/changeset/2610975/popup-anything-on-click/trunk/includes/shortcode/popupaoc-popup-shortcode.php "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/includes/shortcode/popupaoc-popup-shortcode.php")

  | [r2609519](/browser/popup-anything-on-click/trunk/includes/shortcode/popupaoc-popup-shortcode.php?rev=2609519#L93 "Show revision 2609519 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/includes/shortcode/popupaoc-popup-shortcode.php?rev=2610975#L93 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 93 | 93 | $show\_img\_title     = ! empty( $behaviour['image\_title'] )      ? 1 : 0; |
  | 94 | 94 | $show\_img\_caption   = ! empty( $behaviour['image\_caption'] )    ? 1 : 0; |
  |  | 95 | $image\_title        = ''; |
  |  | 96 | $image\_caption      = ''; |
  |  | 97 | $image\_alt          = ''; |
  | 95 | 98 |  |
  | 96 | 99 | // Get Image `Title` & `Caption` |
* ## [popup-anything-on-click/trunk/popup-anything-on-click.php](/changeset/2610975/popup-anything-on-click/trunk/popup-anything-on-click.php "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/popup-anything-on-click.php")

  | [r2610241](/browser/popup-anything-on-click/trunk/popup-anything-on-click.php?rev=2610241#L6 "Show revision 2610241 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/popup-anything-on-click.php?rev=2610975#L6 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \* Description: Display a modal popup on a page load or by clicking link, image or button. Also work with Gutenberg shortcode block. |
  | 7 | 7 | \* Domain Path: /languages/ |
  | 8 |  | \* Version: 2.0.~~1~~ |
  |  | 8 | \* Version: 2.0.2 |
  | 9 | 9 | \* Author: WP OnlineSupport, Essential Plugin |
  | 10 | 10 | \* Author URI: https://www.essentialplugin.com/ |
  | […](/browser/popup-anything-on-click/trunk/popup-anything-on-click.php?rev=2610241#L16) | […](/browser/popup-anything-on-click/trunk/popup-anything-on-click.php?rev=2610975#L16) |  |
  | 16 | 16 |  |
  | 17 | 17 | if( ! defined( 'POPUPAOC\_VERSION' ) ) { |
  | 18 |  | define( 'POPUPAOC\_VERSION', '2.0.~~1~~' ); // Version of plugin |
  |  | 18 | define( 'POPUPAOC\_VERSION', '2.0.2' ); // Version of plugin |
  | 19 | 19 | } |
  | 20 | 20 |  |
  | […](/browser/popup-anything-on-click/trunk/popup-anything-on-click.php?rev=2610241#L89) | […](/browser/popup-anything-on-click/trunk/popup-anything-on-click.php?rev=2610975#L89) |  |
  | 89 | 89 | $plugin\_version = get\_option( 'popupaoc\_plugin\_version' ); |
  | 90 | 90 |  |
  | 91 |  | if ( current\_user\_can( 'manage\_options' ) && version\_compare( $plugin\_version, '1.~~2~~' ) < 0 ) { |
  |  | 91 | if ( current\_user\_can( 'manage\_options' ) && version\_compare( $plugin\_version, '1.3' ) < 0 ) { |
  | 92 | 92 | require\_once( POPUPAOC\_DIR . '/includes/admin/paoc-db-upgrade.php' ); |
  | 93 | 93 | } |
  | […](/browser/popup-anything-on-click/trunk/popup-anything-on-click.php?rev=2610241#L135) | […](/browser/popup-anything-on-click/trunk/popup-anything-on-click.php?rev=2610975#L135) |  |
  | 135 | 135 |  |
  | 136 | 136 | // Plugin DB Version |
  | 137 |  | update\_option( 'popupaoc\_plugin\_version', '1.~~2~~' ); |
  |  | 137 | update\_option( 'popupaoc\_plugin\_version', '1.3' ); |
  | 138 | 138 | } |
  | 139 | 139 |  |
* ## [popup-anything-on-click/trunk/readme.txt](/changeset/2610975/popup-anything-on-click/trunk/readme.txt "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/readme.txt")

  | [r2610241](/browser/popup-anything-on-click/trunk/readme.txt?rev=2610241#L4 "Show revision 2610241 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/readme.txt?rev=2610975#L4 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Requires at least: 5.2 |
  | 5 | 5 | Tested up to: 5.8.1 |
  | 6 |  | Stable tag: 2.0.~~1~~ |
  |  | 6 | Stable tag: 2.0.2 |
  | 7 | 7 | License: GPLv3 |
  | 8 | 8 | License URI: https://www.gnu.org/licenses/gpl-3.0.html |
  | […](/browser/popup-anything-on-click/trunk/readme.txt?rev=2610241#L121) | […](/browser/popup-anything-on-click/trunk/readme.txt?rev=2610975#L121) |  |
  | 121 | 121 | == Changelog == |
  | 122 | 122 |  |
  |  | 123 | = 2.0.2 (07, Oct 2021) = |
  |  | 124 | \* [\*] Update - Fixed some designing issues. |
  |  | 125 | \* [\*] Fixed - Fixed some issues with migration. |
  |  | 126 |  |
  | 123 | 127 | = 2.0.1 (06, Oct 2021) = |
  | 124 | 128 | \* [\*] Fixed - Fixed some issues with migration. |
* ## [popup-anything-on-click/trunk/templates/announcement/design-1.php](/changeset/2610975/popup-anything-on-click/trunk/templates/announcement/design-1.php "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/templates/announcement/design-1.php")

  | [r2609519](/browser/popup-anything-on-click/trunk/templates/announcement/design-1.php?rev=2609519#L12 "Show revision 2609519 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/templates/announcement/design-1.php?rev=2610975#L12 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 |  |
  | 13 | 13 | <div class="paoc-cb-popup-body paoc-wrap paoc-popup paoc-modal-popup <?php echo $popup\_classes; ?>" id="paoc-popup-<?php echo $popup\_id.'-'.$unique; ?>" <?php echo $popup\_attr; ?>> |
  | 14 |  | <div class="paoc-~~center paoc-~~popup-inr-wrap"> |
  | 15 |  | <div class="paoc-padding-~~3~~0 paoc-popup-con-bg"> |
  |  | 14 | <div class="paoc-popup-inr-wrap"> |
  |  | 15 | <div class="paoc-padding-20 paoc-popup-con-bg"> |
  | 16 | 16 | <div class="paoc-popup-inr"> |
  | 17 | 17 | <?php if( $main\_heading ) { ?> |
  | […](/browser/popup-anything-on-click/trunk/templates/announcement/design-1.php?rev=2609519#L58) | […](/browser/popup-anything-on-click/trunk/templates/announcement/design-1.php?rev=2610975#L58) |  |
  | 58 | 58 |  |
  | 59 | 59 | if( ! $hide\_close ) { ?> |
  | 60 |  | <a href="javascript:void(0);" class="paoc-~~pro-~~close-popup paoc-popup-close"> |
  |  | 60 | <a href="javascript:void(0);" class="paoc-close-popup paoc-popup-close"> |
  | 61 | 61 | <svg viewBox="0 0 1792 1792"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"></path></svg> |
  | 62 | 62 | </a> |
* ## [popup-anything-on-click/trunk/templates/content.php](/changeset/2610975/popup-anything-on-click/trunk/templates/content.php "Show the changeset 2610975 restricted to popup-anything-on-click/trunk/templates/content.php")

  | [r2609519](/browser/popup-anything-on-click/trunk/templates/content.php?rev=2609519#L14 "Show revision 2609519 of this file in browser") | [r2610975](/browser/popup-anything-on-click/trunk/templates/content.php?rev=2610975#L14 "Show revision 2610975 of this file in browser") |  |
  | --- | --- | --- |
  | 14 | 14 | if( $popup\_appear == 'simple\_link' ) { ?> |
  | 15 | 15 |  |
  | 16 |  | <a class="paoc-popup-click paoc-p~~ro-popup-cust-<?php echo $id; ?> paoc-popup-<?php echo $popup\_appear; ?> paoc-pro-popup-link" href="javascript:void(0);" data-target="paoc-pro-modal-<?php echo $id; ?>~~"><?php echo $link\_text;?></a> |
  |  | 16 | <a class="paoc-popup-click paoc-popup-cust-<?php echo $id; ?> paoc-popup-<?php echo popupaoc\_esc\_attr( $popup\_appear ); ?> paoc-popup-link" href="javascript:void(0);"><?php echo $link\_text;?></a> |
  | 17 | 17 |  |
  | 18 |  | <?php } else if( $popup\_appear == 'image' ) { // If `Image Popup` is there ?> |
  |  | 18 | <?php } else if( $popup\_appear == 'image' && $image\_url ) { // If `Image Popup` is there ?> |
  | 19 | 19 |  |
  | 20 |  | <div class="paoc-~~pro-~~image-popup"> |
  | 21 |  | <a class="paoc-popup-click paoc-p~~ro-popup-cust-<?php echo $id; ?> paoc-popup-<?php echo $popup\_appear; ?> paoc-pro-popup-image" href="javascript:void(0);" data-target="paoc-pro-modal-<?php echo $id; ?>"><img class="popupaoc-img" src="<?php echo esc\_url( $image\_url );?>" alt="<?php echo $image\_alt~~; ?>" /></a> |
  |  | 20 | <div class="paoc-image-popup"> |
  |  | 21 | <a class="paoc-popup-click paoc-popup-cust-<?php echo $id; ?> paoc-popup-<?php echo $popup\_appear; ?> paoc-popup-image" href="javascript:void(0);"><img class="popupaoc-img" src="<?php echo esc\_url( $image\_url );?>" alt="<?php echo popupaoc\_esc\_attr( $image\_alt ); ?>" /></a> |
  | 22 | 22 |  |
  | 23 | 23 | <?php if( ! empty( $show\_img\_title ) && $image\_title ) { ?> |
  | 24 | 24 |  |
  | 25 |  | <h4 class="paoc-~~pro-~~image-title"><?php echo $image\_title; ?></h4> |
  |  | 25 | <h4 class="paoc-image-title"><?php echo $image\_title; ?></h4> |
  | 26 | 26 |  |
  | 27 | 27 | <?php } if( ! empty( $show\_img\_caption ) && $image\_caption ) { ?> |
  | 28 | 28 |  |
  | 29 |  | <div class="paoc-~~pro-~~image-caption"><?php echo $image\_caption; ?></div> |
  |  | 29 | <div class="paoc-image-caption"><?php echo $image\_caption; ?></div> |
  | 30 | 30 |  |
  | 31 | 31 | <?php } ?> |
  | […](/browser/popup-anything-on-click/trunk/templates/content.php?rev=2609519#L33) | […](/browser/popup-anything-on-click/trunk/templates/content.php?rev=2610975#L33) |  |
  | 33 | 33 |  |
  | 34 | 34 | <?php } else if( $popup\_appear == 'button' ) { // If `Button Popup` is there ?> |
  | 35 |  | <a class="paoc-popup-click paoc-p~~ro-popup-cust-<?php echo $id; ?> paoc-popup-<?php echo $popup\_appear; ?> paoc-pro-popup-button <?php echo $button\_class; ?>" href="javascript:void(0);" data-target="paoc-pro-modal-<?php echo $id; ?>~~"><?php echo $btn\_text;?></a> |
  |  | 35 | <a class="paoc-popup-click paoc-popup-cust-<?php echo $id; ?> paoc-popup-<?php echo popupaoc\_esc\_attr( $popup\_appear ); ?> paoc-popup-btn <?php echo popupaoc\_esc\_attr( $button\_class ); ?>" href="javascript:void(0);"><?php echo $btn\_text;?></a> |
  | 36 | 36 | <?php } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2610975)
* [Zip Archive](?format=zip&new=2610975)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


