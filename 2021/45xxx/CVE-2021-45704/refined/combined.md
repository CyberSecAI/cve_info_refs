=== Content from raw.githubusercontent.com_f4a9bc9a_20250115_100020.html ===
```toml
[advisory]
id = "RUSTSEC-2021-0113"
package = "metrics-util"
date = "2021-04-07"
url = "https://github.com/metrics-rs/metrics/issues/190"
categories = ["memory-corruption", "thread-safety"]
aliases = ["CVE-2021-45704", "GHSA-3hxh-7jxm-59x4", "GHSA-cwvc-87xq-pc5m"]
[versions]
patched = [">= 0.7.0"]
```
# AtomicBucket unconditionally implements Send/Sync
In the affected versions of the crate, `AtomicBucket` unconditionally implements `Send`/`Sync` traits. Therefore, users can create a data race to the inner
`T: !Sync` by using the `AtomicBucket::data\_with()` API.
Such data races can potentially cause memory corruption or other undefined behavior.
The flaw was fixed in commit 8e6daab by adding appropriate Send/Sync bounds to the Send/Sync impl of struct `Block` (which is a data type contained inside `AtomicBucket`).


=== Content from rustsec.org_e1d8b60f_20250115_100022.html ===


RUSTSEC-2021-0113: metrics-util: AtomicBucket<T> unconditionally implements Send/Sync › RustSec Advisory Database

#

[About](/)
[Advisories](/advisories/)
[Report Vulnerabilities](/contributing.html)

[History](https://github.com/RustSec/advisory-db/commits/main/crates/metrics-util/RUSTSEC-2021-0113.md) ⋅
[Edit](https://github.com/RustSec/advisory-db/edit/main/crates/metrics-util/RUSTSEC-2021-0113.md) ⋅
[JSON (OSV)](https://api.osv.dev/v1/vulns/RUSTSEC-2021-0113)

# RUSTSEC-2021-0113

AtomicBucket unconditionally implements Send/Sync

Reported
April 7, 2021

Issued
September 18, 2021

(last modified: June 13, 2023)

Package
[metrics-util](/packages/metrics-util.html)
([crates.io](https://crates.io/crates/metrics-util))

Type
Vulnerability

Categories

* [memory-corruption](/categories/memory-corruption.html)
* [thread-safety](/categories/thread-safety.html)

Aliases

* [CVE-2021-45704](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-45704)
* [GHSA-3hxh-7jxm-59x4](https://github.com/advisories/GHSA-3hxh-7jxm-59x4)
* [GHSA-cwvc-87xq-pc5m](https://github.com/advisories/GHSA-cwvc-87xq-pc5m)

References

* <https://github.com/metrics-rs/metrics/issues/190>

Patched

* `>=0.7.0`

### Description

In the affected versions of the crate, `AtomicBucket<T>` unconditionally implements `Send`/`Sync` traits. Therefore, users can create a data race to the inner
`T: !Sync` by using the `AtomicBucket::data_with()` API.
Such data races can potentially cause memory corruption or other undefined behavior.

The flaw was fixed in commit 8e6daab by adding appropriate Send/Sync bounds to the Send/Sync impl of struct `Block<T>` (which is a data type contained inside `AtomicBucket<T>`).

Advisory available under [CC0-1.0](https://spdx.org/licenses/CC0-1.0.html)
license.


