=== Content from wpscan.com_b5ee7a4d_20250114_192427.html ===


[Skip to content](#wp--skip-link--target)

* [Features](https://a8cteam5105.wordpress.com/features/)
* [Pricing](https://a8cteam5105.wordpress.com/pricing/)
* Solutions
  + [Status](https://status.wpscan.com/)
  + [API Details](/api)
  + [CLI Scanner](https://a8cteam5105.wordpress.com/wordpress-cli-scanner/)
* Vulnerabilities
  + [Themes](/themes)
  + [WordPress](/wordpresses)
  + [Plugins](/plugins)
  + [Stats](/statistics)
  + [Submit Vulnerabilities](/submit)
  + [Leaderboard](/leaderboard)
* Resources
  + [Blog](/blog)
  + [Enterprise Features](https://a8cteam5105.wordpress.com/enterprise-customers-features/)
  + [How to Install WPScan](https://a8cteam5105.wordpress.com/how-to-install-wpscan/)
  + [WPScan Glossary](/wpscan-glossary)
  + [2024 Website Threat Report](https://wpscan.com/2023-website-threat-report/)

Search

## WordPress Plugin Vulnerabilities

# WP User Frontend < 3.5.26 - SQL Injection to Reflected Cross-Site Scripting

### Description

The plugin does not validate and escape the status parameter before using it in a SQL statement in the Subscribers dashboard, leading to an SQL injection. Due to the lack of sanitisation and escaping, this could also lead to Reflected Cross-Site Scripting

### Proof of Concept

https://example.com/wp-admin/admin.php?page=wpuf\_subscribers&post\_ID=1&status=%22+union+select+1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C0x3c696d6720737263206f6e6572726f723d616c6572742831293e+--+g

### Affects Plugins

[![Plugin icon](https://s2.wp.com/wp-content/themes/a8c/wpscan/assets/img/plugin-icon.svg)

wp-user-frontend](https://a8cteam5105.wordpress.com/plugin/wp-user-frontend/)

![](https://s2.wp.com/wp-content/themes/a8c/wpscan/assets/img/checkmark-green-alt.svg)
Fixed in 3.5.26

### References

CVE
[CVE-2021-25076](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-25076)

URL
<https://plugins.trac.wordpress.org/changeset/2648715>

### Classification

Type
XSS

OWASP top 10
[A7: Cross-Site Scripting (XSS)](https://www.owasp.org/index.php/Top_10-2017_A7-Cross-Site_Scripting_%28XSS%29)

CWE
[CWE-79](https://cwe.mitre.org/data/definitions/79.html)

CVSS
[7.5 (high)](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:H/PR:N/UI:R/S:U/C:H/I:H/A:H)

### Miscellaneous

Original Researcher
Krzysztof Zając

Submitter
Krzysztof Zając

Submitter website
<https://kazet.cc/>

Verified
Yes

WPVDB ID
[6d3eeba6-5560-4380-a6e9-f008a9112ac6](https://a8cteam5105.wordpress.com/vulnerability/6d3eeba6-5560-4380-a6e9-f008a9112ac6/)

### Timeline

Publicly Published
2021-12-27 (about 3 years ago)

Added
2021-12-27 (about 3 years ago)

Last Updated
2022-04-13 (about 2 years ago)

### Other

Published
Title

Published
2022-02-28
Title
[Modern Events Calendar Lite < 6.4.0 - Contributor+ Stored Cross Site Scripting](https://a8cteam5105.wordpress.com/vulnerability/0eb40cd5-838e-4b53-994d-22cf7c8a6c50/)

Published
2024-11-18
Title
[GoQMieruca <= 1.0.0 - Reflected Cross-Site Scripting](https://a8cteam5105.wordpress.com/vulnerability/a72b314f-6837-4e9c-930d-1bb4ab52f99d/)

Published
2021-12-01
Title
[Booster for Woocommerce < 5.4.9 - Reflected Cross-Site Scripting in PDF Invoicing Module](https://a8cteam5105.wordpress.com/vulnerability/8527f4fe-312f-45c1-ae4c-7e799702fc26/)

Published
2024-03-25
Title
[Web Icons < 1.0.0.11 - Authenticated (Contributor+) Stored Cross-Site Scripting via Shortcode](https://a8cteam5105.wordpress.com/vulnerability/36fcd74e-278d-41b5-80b8-579d8cc8e636/)

Published
2023-12-07
Title
[Advanced Page Visit Counter <= 8.0.6 - Authenticated (Contributor+) Stored Cross-Site Scripting](https://a8cteam5105.wordpress.com/vulnerability/f7934bcc-5ff5-48af-9a3d-c961fa02a017/)

![](https://wpscan.com/wp-content/uploads/2023/10/wpscan-logo-dark.png?w=246)

### Vulnerabilities

* [WordPress](/wordpresses)
* [Plugins](/plugins)
* [Themes](/themes)
* [Our Stats](https://a8cteam5105.wordpress.com/statistics/)
* [Submit vulnerabilities](https://a8cteam5105.wordpress.com/submit/)

#### About

* [How it works](/features)
* [Pricing](/pricing)
* [WordPress plugin](https://wordpress.org/plugins/wpscan/)
* [Blog](/blog)
* [Contact](/contact)

#### For Developers

* [Status](https://status.wpscan.com/)
* [API details](/api)
* [CLI scanner](/wordpress-cli-scanner)

#### Other

* [Privacy](https://automattic.com/privacy/)
* [Terms of service](/terms)
* [Submission terms](/submission-terms/)
* [Disclosure policy](/vulnerability-disclosure-policy)
* [Privacy Notice for California Users](https://automattic.com/privacy/#california-consumer-privacy-act-ccpa)

---

![](https://wpscan.com/wp-content/uploads/2023/08/frame-1323.png?w=48)

In partnership with [Jetpack](https://jetpack.com/)

* [GitHub](https://github.com/wpscanteam/wpscan/)
* [Twitter](https://twitter.com/_wpscan_)
* [Facebook](https://www.facebook.com/WPScan)

---

An

![](https://wpscan.com/wp-content/uploads/2023/08/autpmattic-logo.png?w=298)

endeavor

[Work With Us](https://automattic.com/work-with-us/)

[Press](https://automattic.com/press/)

* Subscribe
  Subscribed

  + [![](https://wpscan.com/wp-content/uploads/2023/08/cropped-83c25-favicon.png?w=50) WPScan](https://wpscan.com)

  Join 30,404 other subscribers

  Sign me up

  + Already have a WordPress.com account? [Log in now.](https://wordpress.com/log-in?redirect_to=https%3A%2F%2Fr-login.wordpress.com%2Fremote-login.php%3Faction%3Dlink%26back%3Dhttps%253A%252F%252Fwpscan.com%252Fblog%252Funauthorized-plugin-installation-activation-in-hunk-companion%252F)
* Privacy
* + [![](https://wpscan.com/wp-content/uploads/2023/08/cropped-83c25-favicon.png?w=50) WPScan](https://wpscan.com)
  + Subscribe
    Subscribed
  + [Sign up](https://wordpress.com/start/)
  + [Log in](https://wordpress.com/log-in?redirect_to=https%3A%2F%2Fr-login.wordpress.com%2Fremote-login.php%3Faction%3Dlink%26back%3Dhttps%253A%252F%252Fwpscan.com%252Fblog%252Funauthorized-plugin-installation-activation-in-hunk-companion%252F)
  + [Report this content](https://wordpress.com/abuse/?report_url=https://wpscan.com)
  + [View site in Reader](https://wordpress.com/read/feeds/156197069)
  + [Manage subscriptions](https://subscribe.wordpress.com/)
  + Collapse this bar

![](https://pixel.wp.com/b.gif?v=noscript)


=== Content from packetstormsecurity.com_82887466_20250114_192422.html ===

[![](/logos/smalllogobeta.png)](/)

* files
* news
* users
* cve

[![](/logos/smalllogobeta.png)](/)

* files
* news
* users
* cve

![](/logos/linegray.png)

 [About](/help/view/4) |
[Terms](/tos/) |
[Copyright](/help/view/7) |
[Privacy](/help/view/6) |
[BlueSky](https://bsky.app/profile/packetstorm.bsky.social) |
[X](https://x.com/packet_storm) |
[Mastodon](https://infosec.exchange/%40packet_storm/)



=== Content from plugins.trac.wordpress.org_a561798b_20250114_192426.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F2648715)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/2648714 "Changeset 2648714")
* [Next Changeset](/changeset/2648716 "Changeset 2648716") →

---

# Changeset 2648715

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
12/24/2021 10:40:40 AM
([3 years](/timeline?from=2021-12-24T10%3A40%3A40Z&precision=second "See timeline at 12/24/2021 10:40:40 AM") ago)

Author:
tareq1988
Message:

Tagging version 3.5.26

Location:
[wp-user-frontend](/browser/wp-user-frontend?rev=2648715)
Files:

2 added
26 edited
1 copied

* [tags/3.5.26](/browser/wp-user-frontend/tags/3.5.26?rev=2648715 "Show entry in browser")
  (copied)
  *(copied from [wp-user-frontend/trunk](/browser/wp-user-frontend/trunk?rev=2631872 "Show original file (revision 2648714)"))*
* [tags/3.5.26/admin/class-admin-subscription.php](/browser/wp-user-frontend/tags/3.5.26/admin/class-admin-subscription.php?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [tags/3.5.26/admin/form-builder/assets/js/form-builder.js](/browser/wp-user-frontend/tags/3.5.26/admin/form-builder/assets/js/form-builder.js?rev=2648715 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [tags/3.5.26/admin/html/whats-new.php](/browser/wp-user-frontend/tags/3.5.26/admin/html/whats-new.php?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [tags/3.5.26/admin/promotion.php](/browser/wp-user-frontend/tags/3.5.26/admin/promotion.php?rev=2648715 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [tags/3.5.26/assets/js/frontend-form.js](/browser/wp-user-frontend/tags/3.5.26/assets/js/frontend-form.js?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [tags/3.5.26/assets/js/frontend-form.min.js](/browser/wp-user-frontend/tags/3.5.26/assets/js/frontend-form.min.js?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [tags/3.5.26/assets/js/promotion.json](/browser/wp-user-frontend/tags/3.5.26/assets/js/promotion.json?rev=2648715 "Show entry in browser")
  (added)
* [tags/3.5.26/assets/js/wpuf-form-builder.js](/browser/wp-user-frontend/tags/3.5.26/assets/js/wpuf-form-builder.js?rev=2648715 "Show entry in browser")
  (modified)
  ([2 diffs](#file8 "Show differences"))
* [tags/3.5.26/changelog.txt](/browser/wp-user-frontend/tags/3.5.26/changelog.txt?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [tags/3.5.26/includes/class-gutenblock.php](/browser/wp-user-frontend/tags/3.5.26/includes/class-gutenblock.php?rev=2648715 "Show entry in browser")
  (modified)
  ([4 diffs](#file10 "Show differences"))
* [tags/3.5.26/includes/class-list-table-subscribers.php](/browser/wp-user-frontend/tags/3.5.26/includes/class-list-table-subscribers.php?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [tags/3.5.26/includes/fields/class-field-textarea.php](/browser/wp-user-frontend/tags/3.5.26/includes/fields/class-field-textarea.php?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [tags/3.5.26/readme.txt](/browser/wp-user-frontend/tags/3.5.26/readme.txt?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file13 "Show differences"))
* [tags/3.5.26/wpuf.php](/browser/wp-user-frontend/tags/3.5.26/wpuf.php?rev=2648715 "Show entry in browser")
  (modified)
  ([2 diffs](#file14 "Show differences"))
* [trunk/admin/class-admin-subscription.php](/browser/wp-user-frontend/trunk/admin/class-admin-subscription.php?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [trunk/admin/form-builder/assets/js/form-builder.js](/browser/wp-user-frontend/trunk/admin/form-builder/assets/js/form-builder.js?rev=2648715 "Show entry in browser")
  (modified)
  ([2 diffs](#file16 "Show differences"))
* [trunk/admin/html/whats-new.php](/browser/wp-user-frontend/trunk/admin/html/whats-new.php?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file17 "Show differences"))
* [trunk/admin/promotion.php](/browser/wp-user-frontend/trunk/admin/promotion.php?rev=2648715 "Show entry in browser")
  (modified)
  ([2 diffs](#file18 "Show differences"))
* [trunk/assets/js/frontend-form.js](/browser/wp-user-frontend/trunk/assets/js/frontend-form.js?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file19 "Show differences"))
* [trunk/assets/js/frontend-form.min.js](/browser/wp-user-frontend/trunk/assets/js/frontend-form.min.js?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file20 "Show differences"))
* [trunk/assets/js/promotion.json](/browser/wp-user-frontend/trunk/assets/js/promotion.json?rev=2648715 "Show entry in browser")
  (added)
* [trunk/assets/js/wpuf-form-builder.js](/browser/wp-user-frontend/trunk/assets/js/wpuf-form-builder.js?rev=2648715 "Show entry in browser")
  (modified)
  ([2 diffs](#file22 "Show differences"))
* [trunk/changelog.txt](/browser/wp-user-frontend/trunk/changelog.txt?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file23 "Show differences"))
* [trunk/includes/class-gutenblock.php](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2648715 "Show entry in browser")
  (modified)
  ([4 diffs](#file24 "Show differences"))
* [trunk/includes/class-list-table-subscribers.php](/browser/wp-user-frontend/trunk/includes/class-list-table-subscribers.php?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file25 "Show differences"))
* [trunk/includes/fields/class-field-textarea.php](/browser/wp-user-frontend/trunk/includes/fields/class-field-textarea.php?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file26 "Show differences"))
* [trunk/readme.txt](/browser/wp-user-frontend/trunk/readme.txt?rev=2648715 "Show entry in browser")
  (modified)
  ([1 diff](#file27 "Show differences"))
* [trunk/wpuf.php](/browser/wp-user-frontend/trunk/wpuf.php?rev=2648715 "Show entry in browser")
  (modified)
  ([2 diffs](#file28 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [wp-user-frontend/tags/3.5.26/admin/class-admin-subscription.php](/changeset/2648715/wp-user-frontend/tags/3.5.26/admin/class-admin-subscription.php "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/admin/class-admin-subscription.php")

  | [r2626578](/browser/wp-user-frontend/trunk/admin/class-admin-subscription.php?rev=2626578#L150 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/admin/class-admin-subscription.php?rev=2648715#L150 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 150 | 150 | $user\_pack['posts'][ $type ] = isset( $\_POST[ $type ] ) ? sanitize\_text\_field( wp\_unslash( $\_POST[ $type ] ) ) : 0; |
  | 151 | 151 | } |
  | 152 |  | $user\_pack['expire'] = isset( $\_POST['expire'] ) ? wpuf\_date2mysql( sanitize\_text\_field( wp\_unslash( $\_POST['expire'] ) ) ) : $user\_pack['expire']; |
  |  | 152 | $user\_pack['expire'] = isset( $\_POST['expire'] ) && 'Unlimited' !== $\_POST['expire'] ? wpuf\_date2mysql( sanitize\_text\_field( wp\_unslash( $\_POST['expire'] ) ) ) : $user\_pack['expire']; |
  | 153 | 153 | } |
  | 154 | 154 | wpuf\_get\_user( $user\_id )->subscription()->update\_meta( $user\_pack ); |
* ## [wp-user-frontend/tags/3.5.26/admin/form-builder/assets/js/form-builder.js](/changeset/2648715/wp-user-frontend/tags/3.5.26/admin/form-builder/assets/js/form-builder.js "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/admin/form-builder/assets/js/form-builder.js")

  | [r2626578](/browser/wp-user-frontend/trunk/admin/form-builder/assets/js/form-builder.js?rev=2626578#L144 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/admin/form-builder/assets/js/form-builder.js?rev=2648715#L144 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 144 | 144 | // add new form field element |
  | 145 | 145 | add\_form\_field\_element: function (state, payload) { |
  |  | 146 |  |
  | 146 | 147 | state.form\_fields.splice(payload.toIndex, 0, payload.field); |
  | 147 | 148 | var sprintf = wp.i18n.sprintf; |
  | 148 | 149 | var \_\_ = wp.i18n.\_\_; |
  | 149 |  | // bring newly added element into viewport |
  |  | 150 | // bring newly added element into viewport, do not show for reg form |
  |  | 151 | if ( window.location.search.substring(1).split('&').includes('page=wpuf-profile-forms') ) return; |
  | 150 | 152 | Vue.nextTick(function () { |
  | 151 | 153 | var el = $('#form-preview-stage .wpuf-form .field-items').eq(payload.toIndex); |
  | […](/browser/wp-user-frontend/trunk/admin/form-builder/assets/js/form-builder.js?rev=2626578#L538) | […](/browser/wp-user-frontend/tags/3.5.26/admin/form-builder/assets/js/form-builder.js?rev=2648715#L540) |  |
  | 538 | 540 | var form\_id = $('#wpuf-form-builder [name="wpuf\_form\_id"]').val(); |
  | 539 | 541 |  |
  | 540 |  | if ( typeof tinyMCE !== 'undefined' ) { |
  |  | 542 | if ( typeof tinyMCE !== 'undefined' && window.location.search.substring(1).split('&').includes('page=wpuf-profile-forms') ) { |
  | 541 | 543 | $('textarea[name="wpuf\_settings[notification][verification\_body]"]').val(tinyMCE.get('wpuf\_verification\_body\_' + form\_id).getContent()); |
  | 542 | 544 | $('textarea[name="wpuf\_settings[notification][welcome\_email\_body]"]').val(tinyMCE.get('wpuf\_welcome\_email\_body\_' + form\_id).getContent()); |
* ## [wp-user-frontend/tags/3.5.26/admin/html/whats-new.php](/changeset/2648715/wp-user-frontend/tags/3.5.26/admin/html/whats-new.php "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/admin/html/whats-new.php")

  | [r2631872](/browser/wp-user-frontend/trunk/admin/html/whats-new.php?rev=2631872#L1 "Show revision 2631872 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/admin/html/whats-new.php?rev=2648715#L1 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | $changelog = [ |
  |  | 3 | [ |
  |  | 4 | 'version'  => 'Version 3.5.26', |
  |  | 5 | 'released' => '2021-12-24', |
  |  | 6 | 'changes'  =>  [ |
  |  | 7 |  |
  |  | 8 | [ |
  |  | 9 | 'title' => \_\_( 'Promotion notice enhanced through api', 'wp-user-frontend' ), |
  |  | 10 | 'type'  => 'Enhancement', |
  |  | 11 | ], |
  |  | 12 | ], |
  |  | 13 | ], |
  | 3 | 14 | [ |
  | 4 | 15 | 'version'  => 'Version 3.5.25', |
* ## [wp-user-frontend/tags/3.5.26/admin/promotion.php](/changeset/2648715/wp-user-frontend/tags/3.5.26/admin/promotion.php "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/admin/promotion.php")

  | [r2626578](/browser/wp-user-frontend/trunk/admin/promotion.php?rev=2626578#L5 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/admin/promotion.php?rev=2648715#L5 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \*/ |
  | 6 | 6 | class WPUF\_Admin\_Promotion { |
  |  | 7 | const PROMO\_KEY = 'wpuf\_promo\_notices'; |
  | 7 | 8 |  |
  | 8 | 9 | public function \_\_construct() { |
  | […](/browser/wp-user-frontend/trunk/admin/promotion.php?rev=2626578#L25) | […](/browser/wp-user-frontend/tags/3.5.26/admin/promotion.php?rev=2648715#L26) |  |
  | 25 | 26 | } |
  | 26 | 27 | // Showing only for Uf menu |
  | 27 |  | if ( 'wp-user-frontend' !== get\_admin\_page\_parent() ){ |
  | 28 |  | return; |
  | 29 |  | } |
  |  | 28 | if ( 'wp-user-frontend' !== get\_admin\_page\_parent() ) { |
  |  | 29 | return; |
  |  | 30 | } |
  |  | 31 |  |
  |  | 32 | $promos = get\_transient( self::PROMO\_KEY ); |
  |  | 33 |  |
  |  | 34 | if ( false === $promos ) { |
  |  | 35 | $promo\_notice\_url = 'https://raw.githubusercontent.com/weDevsOfficial/wp-user-frontend/develop/assets/js/promotion.json'; |
  |  | 36 | $response         = wp\_remote\_get( $promo\_notice\_url, array( 'timeout' => 15 ) ); |
  |  | 37 | $promos           = wp\_remote\_retrieve\_body( $response ); |
  |  | 38 |  |
  |  | 39 | if ( is\_wp\_error( $response ) || $response['response']['code'] !== 200 ) { |
  |  | 40 | $promos = '[]'; |
  |  | 41 | } |
  |  | 42 |  |
  |  | 43 | set\_transient( self::PROMO\_KEY, $promos, DAY\_IN\_SECONDS ); |
  |  | 44 | } |
  |  | 45 |  |
  |  | 46 | $promos = json\_decode( $promos, true ); |
  |  | 47 |  |
  |  | 48 | if ( empty( $promos ) || ! is\_array( $promos ) ) { |
  |  | 49 | return; |
  |  | 50 | } |
  |  | 51 |  |
  |  | 52 | $option\_name = $promos['key']; |
  |  | 53 | $start\_date  = $promos['start\_date']; |
  |  | 54 | $end\_date    = $promos['end\_date']; |
  |  | 55 | $content     = $promos['content'] . '.' . $promos['title']; |
  |  | 56 | $action\_url  = $promos['action\_url']; |
  |  | 57 | $action\_title = $promos['action\_title']; |
  | 30 | 58 |  |
  | 31 | 59 | $current\_time = $this->convert\_utc\_to\_est(); |
  | 32 | 60 |  |
  | 33 | 61 | if ( |
  | 34 |  | strtotime( ~~'2021-11-19 09:00:00 EST'~~ ) < strtotime( $current\_time ) |
  | 35 |  | && strtotime( $current\_time ) < strtotime( ~~'2021-11-30 11:00:00 EST'~~ ) |
  |  | 62 | strtotime( $start\_date ) < strtotime( $current\_time ) |
  |  | 63 | && strtotime( $current\_time ) < strtotime( $end\_date ) |
  | 36 | 64 | ) { |
  | 37 |  | $option\_name = 'wpuf-bfcm2021'; |
  | 38 |  | $notice      = sprintf( '<p>%s <a href="%s" target="\_blank">%s</a></p>', \_\_( 'Irresistible Black Friday & Cyber Monday Deals. Enjoy Up To 50% OFF on WP User Frontend Pro.', 'wp-user-frontend' ), 'https://wedevs.com/wp-user-frontend-pro/pricing?utm\_medium=text&utm\_source=wordpress-wpuf-bfcm2021', \_\_( 'Get Now', 'wp-user-frontend' ) ); |
  |  | 65 | $notice = sprintf( '<p>%s <a href="%s" target="\_blank">%s</a></p>', \_\_( $content, 'wp-user-frontend' ), $action\_url, \_\_( $action\_title, 'wp-user-frontend' ) ); |
  | 39 | 66 | $this->generate\_notice( $notice, $option\_name ); |
  | 40 | 67 | } |
* ## [wp-user-frontend/tags/3.5.26/assets/js/frontend-form.js](/changeset/2648715/wp-user-frontend/tags/3.5.26/assets/js/frontend-form.js "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/assets/js/frontend-form.js")

  | [r2626578](/browser/wp-user-frontend/trunk/assets/js/frontend-form.js?rev=2626578#L91 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/assets/js/frontend-form.js?rev=2648715#L91 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 91 | 91 |  |
  | 92 | 92 | warningOnExit: function () { |
  | 93 |  | $('input[name="submit"]').on('click', function () { |
  |  | 93 | $('input[name="submit"], #wpuf-post-draft').on('click', function () { |
  | 94 | 94 | window.onbeforeunload = null; |
  | 95 | 95 | return; |
* ## [wp-user-frontend/tags/3.5.26/assets/js/frontend-form.min.js](/changeset/2648715/wp-user-frontend/tags/3.5.26/assets/js/frontend-form.min.js "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/assets/js/frontend-form.min.js")

  | [r2626578](/browser/wp-user-frontend/trunk/assets/js/frontend-form.min.js?rev=2626578#L1 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/assets/js/frontend-form.min.js?rev=2648715#L1 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | !function(a,b){a.fn.listautowidth=function(){return this.each(function(){var b=a(this).width(),c=b/a(this).children("li").length;a(this).children("li").each(function(){var b=a(this).outerWidth(!0)-a(this).width();a(this).width(c-b)})})},b.WP\_User\_Frontend={init:function(){this.enableMultistep(this),a(".wpuf-form").on("click","img.wpuf-clone-field",this.cloneField),a(".wpuf-form").on("click","img.wpuf-remove-field",this.removeField),a(".wpuf-form").on("click","a.wpuf-delete-avatar",this.deleteAvatar),a(".wpuf-form").on("click","a#wpuf-post-draft",this.draftPost),a(".wpuf-form").on("click","button#wpuf-account-update-profile",this.account\_update\_profile),a(".wpuf-form-add").on("submit",this.formSubmit),a("form#post").on("submit",this.adminPostSubmit),b.matchMedia("(max-width: 600px)").matches&&(a("table.items-table tr td .post-edit-icon").click(function(b){b.preventDefault(),a(this).parents("tr").find(".data-column").toggleClass("flex-column"),a(this).toggleClass("toggle-icon")}),a(".wpuf-dashboard-navigation ul li:first-child").after().click(function(b){b.preventDefault(),a(".wpuf-dashboard-navigation ul li").not(":first").toggle()})),a(".wpuf-form").on("step-change-fieldset",function(a,b,c){if(wpuf\_plupload\_items.length)for(var d=wpuf\_plupload\_items.length-1;d>=0;d--)wpuf\_plupload\_items[d].refresh();if(wpuf\_map\_items.length)for(var d=wpuf\_map\_items.length-1;d>=0;d--)google.maps.event.trigger(wpuf\_map\_items[d].map,"resize"),wpuf\_map\_items[d].map.setCenter(wpuf\_map\_items[d].center)}),this.ajaxCategory(),a(':submit[name="wpuf\_user\_subscription\_cancel"]').click(function(b){b.preventDefault(),swal({text:wpuf\_frontend.cancelSubMsg,type:"warning",showCancelButton:!0,confirmButtonColor:"#d54e21",confirmButtonText:wpuf\_frontend.delete\_it,cancelButtonText:wpuf\_frontend.cancel\_it,confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger"}).then(function(b){if(!b)return!1;a("#wpuf\_cancel\_subscription").submit()})}),this.warningOnExit()},warningOnExit:function(){a('input[name="submit"]').on("click",function(){b.onbeforeunload=null}),a(".wpuf-form-add").on("change",function(){a(".wpuf-form-add input, .wpuf-form-add select, .wpuf-form-add textarea").each(function(c){"hidden"===a(this).attr("type")&&"submit"===a(this).attr("type")&&-1===a(this).val()||(b.onbeforeunload=function(){return"you have changes"})})})},check\_pass\_strength:function(){var b=a("#pass1").val();if(a("#pass-strength-result").show(),a("#pass-strength-result").removeClass("short bad good strong"),!b)return a("#pass-strength-result").html("&nbsp;"),void a("#pass-strength-result").hide();if(void 0!==wp.passwordStrength)switch(wp.passwordStrength.meter(b,wp.passwordStrength.userInputBlacklist(),b)){case 2:a("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:a("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:a("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:a("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:a("#pass-strength-result").addClass("short").html(pwsL10n.short)}},enableMultistep:function(c){var d=this,e=0,f=a(':hidden[name="wpuf\_multistep\_type"]').val();if(null!=f){if(a("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-prev-btn").first().remove(),a("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-next-btn").last().remove(),a(".wpuf-form fieldset").removeClass("field-active").first().addClass("field-active"),"progressive"==f&&0!=a(".wpuf-form .wpuf-multistep-fieldset").length){a("fieldset.wpuf-multistep-fieldset legend").first();a(".wpuf-multistep-progressbar").html('<div class="wpuf-progress-percentage"></div>');var g=a(".wpuf-multistep-progressbar"),h=a(".wpuf-progress-percentage");a(".wpuf-multistep-progressbar").progressbar({change:function(){h.text(g.progressbar("value")+"%")}}),a(".wpuf-multistep-fieldset legend").hide()}else a(".wpuf-form").each(function(){var b=a(this),c=a(".wpuf-multistep-progressbar",b),d="";c.addClass("wizard-steps"),d+='<ul class="wpuf-step-wizard">',a(".wpuf-multistep-fieldset",this).each(function(){d+="<li>"+a.trim(a("legend",this).text())+"</li>",a("legend",this).hide()}),d+="</ul>",c.append(d),a(".wpuf-step-wizard li",c).first().addClass("active-step"),a(".wpuf-step-wizard",c).listautowidth()});this.change\_fieldset(e,f),a("fieldset .wpuf-multistep-prev-btn, fieldset .wpuf-multistep-next-btn").click(function(g){if(a(this).hasClass("wpuf-multistep-next-btn")){0!=d.formStepCheck("",a(this).closest("fieldset"))&&c.change\_fieldset(++e,f)}else a(this).hasClass("wpuf-multistep-prev-btn")&&c.change\_fieldset(--e,f);var h=a("form.wpuf-form-add"),i=h.offset().top;return b.scrollTo({top:i-32,behavior:"smooth"}),!1})}},change\_fieldset:function(b,c){var d=a("fieldset.wpuf-multistep-fieldset").eq(b);a("fieldset.wpuf-multistep-fieldset").removeClass("field-active").eq(b).addClass("field-active"),a(".wpuf-step-wizard li").each(function(){a(this).index()<=b?"step\_by\_step"==c?a(this).addClass("passed-wpuf-ms-bar"):a(".wpuf-ps-bar",this).addClass("passed-wpuf-ms-bar"):"step\_by\_step"==c?a(this).removeClass("passed-wpuf-ms-bar"):a(".wpuf-ps-bar",this).removeClass("passed-wpuf-ms-bar")}),a(".wpuf-step-wizard li").removeClass("wpuf-ms-bar-active active-step completed-step"),a(".passed-wpuf-ms-bar").addClass("completed-step").last().addClass("wpuf-ms-bar-active"),a(".wpuf-ms-bar-active").addClass("active-step");var e=a("fieldset.wpuf-multistep-fieldset").eq(b).find("legend").text();if(e=a.trim(e),"progressive"==c&&0!=a(".wpuf-form .wpuf-multistep-fieldset").length){var f=100\*(b+1)/a("fieldset.wpuf-multistep-fieldset").length,f=Number(f.toFixed(2));a(".wpuf-multistep-progressbar").progressbar({value:f}),a(".wpuf-progress-percentage").text(e+" ("+f+"%)")}a(".wpuf-form").trigger("step-change-fieldset",[b,d])},ajaxCategory:function(){a(".category-wrap").on("change",".cat-ajax",function(){var b=a(this).data("form-id");currentLevel=parseInt(a(this).parent().attr("level")),WP\_User\_Frontend.getChildCats(a(this),currentLevel+1,"category",b)})},getChildCats:function(b,c,d,e){var f=a(b).val(),g="wpuf-category-dropdown-lvl-"+c,d=void 0!==d?d:"category",h=a(b).siblings("span").data("taxonomy");a.ajax({type:"post",url:wpuf\_frontend.ajaxurl,data:{action:"wpuf\_get\_child\_cat",catID:f,nonce:wpuf\_frontend.nonce,field\_attr:h,form\_id:e},beforeSend:function(){a(b).parent().parent().next(".loading").addClass("wpuf-loading")},complete:function(){a(b).parent().parent().next(".loading").removeClass("wpuf-loading")},success:function(e){a(b).parent().nextAll().each(function(){a(this).remove()}),""!=e&&(a(b).parent().addClass("hasChild").parent().append('<div id="'+g+'" level="'+c+'"></div>'),b.parent().parent().find("#"+g).html(e).slideDown("fast")),a(document).trigger("wpuf-ajax-fetched-child-categories",g,c,d)}})},cloneField:function(b){b.preventDefault();var c=a(this).closest("tr"),d=c.clone();d.find("input").val(""),d.find(":checked").attr("checked",""),c.after(d)},removeField:function(){var b=a(this).closest("tr");b.siblings().andSelf().length>1&&b.remove()},adminPostSubmit:function(b){b.preventDefault();var c=a(this);if(WP\_User\_Frontend.validateForm(c))return!0},draftPost:function(b){b.preventDefault();var c=a(this),d=a(this).closest("form"),e=d.serialize()+"&action=wpuf\_draft\_post",f=d.find('input[type="hidden"][name="post\_id"]').val(),g=[];a(".wpuf-rich-validation").each(function(b,c){var c=a(c),d=c.data("id"),e=c.data("name"),f=a.trim(tinyMCE.get(d).getContent());g.push(e+"="+encodeURIComponent(f))}),e=e+"&"+g.join("&"),c.after(' <span class="wpuf-loading"></span>'),a.post(wpuf\_frontend.ajaxurl,e,function(b){if(void 0===f){var e='<input type="hidden" name="post\_id" value="'+b.post\_id+'">';e+='<input type="hidden" name="post\_date" value="'+b.date+'">',e+='<input type="hidden" name="post\_author" value="'+b.post\_author+'">',e+='<input type="hidden" name="comment\_status" value="'+b.comment\_status+'">',d.append(e)}c.next("span.wpuf-loading").remove(),c.after('<span class="wpuf-draft-saved">&nbsp; Post Saved</span>'),a(".wpuf-draft-saved").delay(2500).fadeOut("fast",function(){a(this).remove()})})},account\_update\_profile:function(b){b.preventDefault();var c=a(this).closest("form");a.post(wpuf\_frontend.ajaxurl,c.serialize(),function(a){a.success?(c.find(".wpuf-error").hide(),c.find(".wpuf-success").show()):(c.find(".wpuf-success").hide(),c.find(".wpuf-error").show(),c.find(".wpuf-error").text(a.data))})},formStepCheck:function(a,b){var c=b,d=(c.find("input[type=submit]"),WP\_User\_Frontend.validateForm(c));return 0==d&&WP\_User\_Frontend.addErrorNotice(self,"bottom"),d},formSubmit:function(c){c.preventDefault();var d=a(this),e=d.find("input[type=submit]");form\_data=WP\_User\_Frontend.validateForm(d),form\_data&&(d.find("li.wpuf-submit").append('<span class="wpuf-loading"></span>'),e.attr("disabled","disabled").addClass("button-primary-disabled"),a.post(wpuf\_frontend.ajaxurl,form\_data,function(c){if(c.success)a("body").trigger("wpuf:postform:success",c),1==c.show\_message?(d.before('<div class="wpuf-success">'+c.message+"</div>"),d.slideUp("fast",function(){d.remove()}),a("html, body").animate({scrollTop:a(".wpuf-success").offset().top-100},"fast")):b.location=c.redirect\_to;else{if(void 0!==c.type&&"login"===c.type)return void(confirm(c.error)?b.location=c.redirect\_to:(e.removeAttr("disabled"),e.removeClass("button-primary-disabled"),d.find("span.wpuf-loading").remove()));d.find(".g-recaptcha").length>0&&grecaptcha.reset(),swal({html:c.error,type:"warning",showCancelButton:!1,confirmButtonColor:"#d54e21",confirmButtonText:"OK",cancelButtonClass:"btn btn-danger"}),e.removeAttr("disabled")}e.removeClass("button-primary-disabled"),d.find("span.wpuf-loading").remove()}))},validateForm:function(b){var c=!1,d="";WP\_User\_Frontend.removeErrors(b),WP\_User\_Frontend.removeErrorNotice(b),b.find('[data-required="yes"]:visible').each(function(b,e){var f=a(e).data("type"),g="";switch(f){case"rich":var h=a(e).data("id");""===(g=a.trim(tinyMCE.get(h).getContent()))&&(c=!0,WP\_User\_Frontend.markError(e));break;case"textarea":case"text":""===(g=a.trim(a(e).val()))&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"password":case"confirm\_password":var i=a(e).data("repeat");if(g=a.trim(a(e).val()),""===g&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d)),i){var j=a('[data-type="confirm\_password"]').eq(0);j.val()!=g&&(c=!0,d="mismatch",WP\_User\_Frontend.markError(j,d))}break;case"select":(g=a(e).val())&&"-1"!==g||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"multiselect":null!==(g=a(e).val())&&0!==g.length||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"tax-checkbox":var k=a(e).children().find("input:checked").length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"radio":var k=a(e).find("input:checked").length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"file":var k=a(e).find("ul").children().length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"email":var g=a(e).val();""!==g?WP\_User\_Frontend.isValidEmail(g)||(c=!0,d="validation",WP\_User\_Frontend.markError(e,d)):""===g&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"url":var g=a(e).val();""!==g&&(WP\_User\_Frontend.isValidURL(g)||(c=!0,d="validation",WP\_User\_Frontend.markError(e,d)))}});var e=b.find('[data-required="yes"]').parents(".wpuf-form-google-map-container");if(a.each(e,function(b,e){""==a(e).val()&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d))}),c)return WP\_User\_Frontend.addErrorNotice(b,"end"),!1;var f=b.serialize(),g=[];return a(".wpuf-rich-validation",b).each(function(b,c){var c=a(c),d=c.data("id"),e=c.data("name"),f=a.trim(tinyMCE.get(d).getContent());g.push(e+"="+encodeURIComponent(f))}),f=f+"&"+g.join("&")},addErrorNotice:function(b,c){"bottom"==c?a(".wpuf-multistep-fieldset:visible").append('<div class="wpuf-errors">'+wpuf\_frontend.error\_message+"</div>"):a(b).find("li.wpuf-submit").append('<div class="wpuf-errors">'+wpuf\_frontend.error\_message+"</div>")},removeErrorNotice:function(b){a(b).find(".wpuf-errors").remove()},markError:function(b,c){if(a(b).closest("div").addClass("has-error"),c){var d="",e=a(b).data("label");switch(d=e||a(b).closest("li").data("label"),c){case"required":case"mismatch":case"validation":d=d+" "+error\_str\_obj[c];break;case"limit":d=""}a(b).siblings(".wpuf-error-msg").remove(),"DIV"===a(b).prev().prop("nodeName")?a(b).append('<div class="wpuf-error-msg">'+d+"</div>"):a(b).after('<div class="wpuf-error-msg">'+d+"</div>")}a(b).focus()},removeErrors:function(b){a(b).find(".has-error").removeClass("has-error"),a(".wpuf-error-msg").remove()},isValidEmail:function(a){return new RegExp(/^((([a-z]|\d|[!#\$%&'\\*\+\-\/=\?\^\_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\\*\+\-\/=\?\^\_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)\*)|((\x22)((((\x20|\x09)\*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))\*(((\x20|\x09)\*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|\_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|\_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(a)},isValidURL:function(a){return new RegExp("^(http://www.|https://www.|ftp://www.|www.|http://|https://){1}([0-9A-Za-z]+.)").test(a)},insertImage:function(b,c){if(a("#"+b).length){var d=new plupload.Uploader({runtimes:"html5,html4",browse\_button:b,container:"wpuf-insert-image-container",multipart:!0,multipart\_params:{action:"wpuf\_insert\_image",form\_id:a("#"+b).data("form\_id")},multiple\_queues:!1,multi\_selection:!1,urlstream\_upload:!0,file\_data\_name:"wpuf\_file",max\_file\_size:wpuf\_frontend\_upload.max\_filesize,url:wpuf\_frontend\_upload.plupload.url,flash\_swf\_url:wpuf\_frontend\_upload.flash\_swf\_url,filters:[{title:"Allowed Files",extensions:"jpg,jpeg,gif,png,bmp"}]});d.bind("Init",function(a,b){}),d.bind("FilesAdded",function(b,c){var d=a("#wpuf-insert-image-container");a.each(c,function(a,b){d.append('<div class="upload-item" id="'+b.id+'"><div class="progress progress-striped active"><div class="bar"></div></div></div>')}),b.refresh(),b.start()}),d.bind("QueueChanged",function(a){d.start()}),d.bind("UploadProgress",function(b,c){var d=a("#"+c.id);a(".bar",d).css({width:c.percent+"%"}),a(".percent",d).html(c.percent+"%")}),d.bind("Error",function(a,b){alert("Error #"+b.code+": "+b.message)}),d.bind("FileUploaded",function(b,d,e){if(a("#"+d.id).remove(),"error"!==e.response){if("undefined"!=typeof tinyMCE)if("function"!=typeof tinyMCE.execInstanceCommand){var f=tinyMCE.get("post\_content\_"+c);null!==f&&f.insertContent(e.response)}else tinyMCE.execInstanceCommand("post\_content\_"+c,"mceInsertContent",!1,e.response);var g=a("#post\_content\_"+c);g.val(g.val()+e.response)}else alert("Something went wrong")}),d.init()}},deleteAvatar:function(b){b.preventDefault(),confirm(a(this).data("confirm"))&&a.post(wpuf\_frontend.ajaxurl,{action:"wpuf\_delete\_avatar",\_wpnonce:wpuf\_frontend.nonce},function(){a(b.target).parent().remove(),a("[id^=wpuf-avatar]").css("display","")})},editorLimit:{bind:function(b,c,d,e,f){"no"===d?(a("textarea#"+c).keydown(function(a){WP\_User\_Frontend.editorLimit.textLimit.call(this,a,b,e,f)}),a("input#"+c).keydown(function(a){WP\_User\_Frontend.editorLimit.textLimit.call(this,a,b,e,f)}),a("textarea#"+c).on("paste",function(c){var d=a(this);setTimeout(function(){WP\_User\_Frontend.editorLimit.textLimit.call(d,c,b,e,f)},100)}),a("input#"+c).on("paste",function(c){var d=a(this);setTimeout(function(){WP\_User\_Frontend.editorLimit.textLimit.call(d,c,b,e,f)},100)})):setTimeout(function(){tinyMCE.get(c).onKeyDown.add(function(a,c){WP\_User\_Frontend.editorLimit.tinymce.onKeyDown(a,c,b,e,f)}),tinyMCE.get(c).onPaste.add(function(a,c){setTimeout(function(){WP\_User\_Frontend.editorLimit.tinymce.onPaste(a,c,b,e,f)},100)})},1e3)},tinymce:{getStats:function(a){var b=a.getBody(),c=tinymce.trim(b.innerText||b.textContent);return{chars:c.length,words:c.split(/[\w\u2019\'-]+/).length}},onKeyDown:function(b,c,d,e,f){field=a(".post\_content");var g=WP\_User\_Frontend.editorLimit.tinymce.getStats(b).chars+1;"word"===e&&(g=WP\_User\_Frontend.editorLimit.tinymce.getStats(b).words),d&&g>d&&"max"===f?(WP\_User\_Frontend.editorLimit.blockTyping(c),WP\_User\_Frontend.markError(field,"limit"),jQuery(".mce-path-item.mce-last",b.container).html(wpuf\_frontend["word\_"+f]+g+"/"+d)):d&&g<d&&"min"===f?(WP\_User\_Frontend.markError(field,"limit"),jQuery(".mce-path-item.mce-last",b.container).html(wpuf\_frontend["word\_"+f]+g+"/"+d)):(field.removeClass("has-error"),jQuery(".mce-path-item.mce-last",b.container).html(""))},onPaste:function(a,b,c){var d=a.getContent().split(" ").slice(0,c).join(" ");a.setContent(d),WP\_User\_Frontend.editorLimit.make\_media\_embed\_code(d,a)}},textLimit:function(b,c,d,e){var f=a(this),g=f.val().length+1;"word"===d&&(g=f.val().split(" ").length),c&&g>c&&"max"===e?(WP\_User\_Frontend.content\_limit\_message(f,d,e,c),WP\_User\_Frontend.editorLimit.blockTyping(b)):c&&g<c&&"min"===e?WP\_User\_Frontend.content\_limit\_message(f,d,e,c):(f.closest("li").removeClass("has-error"),f.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html("")),"paste"===b.type&&(f.val(content.substring(0,c)),"word"===d&&f.val(content.slice(0,c).join(" ")))},blockTyping:function(b){-1!==a.inArray(b.keyCode,[46,8,9,27,13,110,190,189])||65==b.keyCode&&!0===b.ctrlKey||b.keyCode>=35&&b.keyCode<=40||(b.preventDefault(),b.stopPropagation())},make\_media\_embed\_code:function(b,c){a.post(ajaxurl,{action:"make\_media\_embed\_code",content:b},function(a){c.setContent(c.getContent()+c.setContent(a))})}},doUncheckRadioBtn:function(a){a.checked=!1},content\_limit\_message:function(a,b,c,d){WP\_User\_Frontend.markError(a,"limit"),"word"===b&&(limit\_message=wpuf\_frontend["word\_"+c]+d),"character"===b&&(limit\_message=wpuf\_frontend["char\_"+c]+d),a.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html(limit\_message)}},a(function(){if(WP\_User\_Frontend.init(),a("ul.wpuf-payment-gateways").on("click","input[type=radio]",function(b){a(".wpuf-payment-instruction").slideUp(250),a(this).parents("li").find(".wpuf-payment-instruction").slideDown(250)}),a("ul.wpuf-payment-gateways li").find("input[type=radio]").is(":checked")){a("ul.wpuf-payment-gateways li").find("input[type=radio]:checked").parents("li").find(".wpuf-payment-instruction").slideDown(250)}else a("ul.wpuf-payment-gateways li").first().find("input[type=radio]").click()}),a(function(){a('input[name="first\_name"], input[name="last\_name"]').on("change keyup",function(){var b,c=a.makeArray(a('input[name="first\_name"], input[name="last\_name"]').map(function(){if(b=a(this).val())return b})).join(" ");a('input[name="display\_name"]').val(c)})}),a(function(a){a('.wpuf-form-add input[name="dokan\_store\_name"]').on("focusout",function(){var b=a(this).val().toLowerCase().replace(/-+/g,"").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");a('input[name="shopurl"]').val(b),a("#url-alart").text(b),a('input[name="shopurl"]').focus()}),a('.wpuf-form-add input[name="shopurl"]').keydown(function(b){a(this).val();-1!==a.inArray(b.keyCode,[46,8,9,27,13,91,109,110,173,189,190])||65==b.keyCode&&!0===b.ctrlKey||b.keyCode>=35&&b.keyCode<=39||(b.shiftKey||(b.keyCode<65||b.keyCode>90)&&(b.keyCode<48||b.keyCode>57))&&(b.keyCode<96||b.keyCode>105)&&b.preventDefault()}),a('.wpuf-form-add input[name="shopurl"]').keyup(function(b){a("#url-alart").text(a(this).val())}),a('.wpuf-form-add input[name="shopurl"]').on("focusout",function(){var b=a(this),c={action:"shop\_url",url\_slug:b.val(),\_nonce:dokan.nonce};""!==b.val()&&a.post(dokan.ajaxurl,c,function(b){0==b?(a("#url-alart").removeClass("text-success").addClass("text-danger"),a("#url-alart-mgs").removeClass("text-success").addClass("text-danger").text(dokan.seller.notAvailable)):(a("#url-alart").removeClass("text-danger").addClass("text-success"),a("#url-alart-mgs").removeClass("text-danger").addClass("text-success").text(dokan.seller.available))})}),a(".wpuf-form-add #wpuf-map-add-location").attr("name","find\_address")})}(jQuery,window); |
  |  | 1 | !function(a,b){a.fn.listautowidth=function(){return this.each(function(){var b=a(this).width(),c=b/a(this).children("li").length;a(this).children("li").each(function(){var b=a(this).outerWidth(!0)-a(this).width();a(this).width(c-b)})})},b.WP\_User\_Frontend={init:function(){this.enableMultistep(this),a(".wpuf-form").on("click","img.wpuf-clone-field",this.cloneField),a(".wpuf-form").on("click","img.wpuf-remove-field",this.removeField),a(".wpuf-form").on("click","a.wpuf-delete-avatar",this.deleteAvatar),a(".wpuf-form").on("click","a#wpuf-post-draft",this.draftPost),a(".wpuf-form").on("click","button#wpuf-account-update-profile",this.account\_update\_profile),a(".wpuf-form-add").on("submit",this.formSubmit),a("form#post").on("submit",this.adminPostSubmit),b.matchMedia("(max-width: 600px)").matches&&(a("table.items-table tr td .post-edit-icon").click(function(b){b.preventDefault(),a(this).parents("tr").find(".data-column").toggleClass("flex-column"),a(this).toggleClass("toggle-icon")}),a(".wpuf-dashboard-navigation ul li:first-child").after().click(function(b){b.preventDefault(),a(".wpuf-dashboard-navigation ul li").not(":first").toggle()})),a(".wpuf-form").on("step-change-fieldset",function(a,b,c){if(wpuf\_plupload\_items.length)for(var d=wpuf\_plupload\_items.length-1;d>=0;d--)wpuf\_plupload\_items[d].refresh();if(wpuf\_map\_items.length)for(var d=wpuf\_map\_items.length-1;d>=0;d--)google.maps.event.trigger(wpuf\_map\_items[d].map,"resize"),wpuf\_map\_items[d].map.setCenter(wpuf\_map\_items[d].center)}),this.ajaxCategory(),a(':submit[name="wpuf\_user\_subscription\_cancel"]').click(function(b){b.preventDefault(),swal({text:wpuf\_frontend.cancelSubMsg,type:"warning",showCancelButton:!0,confirmButtonColor:"#d54e21",confirmButtonText:wpuf\_frontend.delete\_it,cancelButtonText:wpuf\_frontend.cancel\_it,confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger"}).then(function(b){if(!b)return!1;a("#wpuf\_cancel\_subscription").submit()})}),this.warningOnExit()},warningOnExit:function(){a('input[name="submit"], #wpuf-post-draft').on("click",function(){b.onbeforeunload=null}),a(".wpuf-form-add").on("change",function(){a(".wpuf-form-add input, .wpuf-form-add select, .wpuf-form-add textarea").each(function(c){"hidden"===a(this).attr("type")&&"submit"===a(this).attr("type")&&-1===a(this).val()||(b.onbeforeunload=function(){return"you have changes"})})})},check\_pass\_strength:function(){var b=a("#pass1").val();if(a("#pass-strength-result").show(),a("#pass-strength-result").removeClass("short bad good strong"),!b)return a("#pass-strength-result").html("&nbsp;"),void a("#pass-strength-result").hide();if(void 0!==wp.passwordStrength)switch(wp.passwordStrength.meter(b,wp.passwordStrength.userInputBlacklist(),b)){case 2:a("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:a("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:a("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:a("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:a("#pass-strength-result").addClass("short").html(pwsL10n.short)}},enableMultistep:function(c){var d=this,e=0,f=a(':hidden[name="wpuf\_multistep\_type"]').val();if(null!=f){if(a("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-prev-btn").first().remove(),a("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-next-btn").last().remove(),a(".wpuf-form fieldset").removeClass("field-active").first().addClass("field-active"),"progressive"==f&&0!=a(".wpuf-form .wpuf-multistep-fieldset").length){a("fieldset.wpuf-multistep-fieldset legend").first();a(".wpuf-multistep-progressbar").html('<div class="wpuf-progress-percentage"></div>');var g=a(".wpuf-multistep-progressbar"),h=a(".wpuf-progress-percentage");a(".wpuf-multistep-progressbar").progressbar({change:function(){h.text(g.progressbar("value")+"%")}}),a(".wpuf-multistep-fieldset legend").hide()}else a(".wpuf-form").each(function(){var b=a(this),c=a(".wpuf-multistep-progressbar",b),d="";c.addClass("wizard-steps"),d+='<ul class="wpuf-step-wizard">',a(".wpuf-multistep-fieldset",this).each(function(){d+="<li>"+a.trim(a("legend",this).text())+"</li>",a("legend",this).hide()}),d+="</ul>",c.append(d),a(".wpuf-step-wizard li",c).first().addClass("active-step"),a(".wpuf-step-wizard",c).listautowidth()});this.change\_fieldset(e,f),a("fieldset .wpuf-multistep-prev-btn, fieldset .wpuf-multistep-next-btn").click(function(g){if(a(this).hasClass("wpuf-multistep-next-btn")){0!=d.formStepCheck("",a(this).closest("fieldset"))&&c.change\_fieldset(++e,f)}else a(this).hasClass("wpuf-multistep-prev-btn")&&c.change\_fieldset(--e,f);var h=a("form.wpuf-form-add"),i=h.offset().top;return b.scrollTo({top:i-32,behavior:"smooth"}),!1})}},change\_fieldset:function(b,c){var d=a("fieldset.wpuf-multistep-fieldset").eq(b);a("fieldset.wpuf-multistep-fieldset").removeClass("field-active").eq(b).addClass("field-active"),a(".wpuf-step-wizard li").each(function(){a(this).index()<=b?"step\_by\_step"==c?a(this).addClass("passed-wpuf-ms-bar"):a(".wpuf-ps-bar",this).addClass("passed-wpuf-ms-bar"):"step\_by\_step"==c?a(this).removeClass("passed-wpuf-ms-bar"):a(".wpuf-ps-bar",this).removeClass("passed-wpuf-ms-bar")}),a(".wpuf-step-wizard li").removeClass("wpuf-ms-bar-active active-step completed-step"),a(".passed-wpuf-ms-bar").addClass("completed-step").last().addClass("wpuf-ms-bar-active"),a(".wpuf-ms-bar-active").addClass("active-step");var e=a("fieldset.wpuf-multistep-fieldset").eq(b).find("legend").text();if(e=a.trim(e),"progressive"==c&&0!=a(".wpuf-form .wpuf-multistep-fieldset").length){var f=100\*(b+1)/a("fieldset.wpuf-multistep-fieldset").length,f=Number(f.toFixed(2));a(".wpuf-multistep-progressbar").progressbar({value:f}),a(".wpuf-progress-percentage").text(e+" ("+f+"%)")}a(".wpuf-form").trigger("step-change-fieldset",[b,d])},ajaxCategory:function(){a(".category-wrap").on("change",".cat-ajax",function(){var b=a(this).data("form-id");currentLevel=parseInt(a(this).parent().attr("level")),WP\_User\_Frontend.getChildCats(a(this),currentLevel+1,"category",b)})},getChildCats:function(b,c,d,e){var f=a(b).val(),g="wpuf-category-dropdown-lvl-"+c,d=void 0!==d?d:"category",h=a(b).siblings("span").data("taxonomy");a.ajax({type:"post",url:wpuf\_frontend.ajaxurl,data:{action:"wpuf\_get\_child\_cat",catID:f,nonce:wpuf\_frontend.nonce,field\_attr:h,form\_id:e},beforeSend:function(){a(b).parent().parent().next(".loading").addClass("wpuf-loading")},complete:function(){a(b).parent().parent().next(".loading").removeClass("wpuf-loading")},success:function(e){a(b).parent().nextAll().each(function(){a(this).remove()}),""!=e&&(a(b).parent().addClass("hasChild").parent().append('<div id="'+g+'" level="'+c+'"></div>'),b.parent().parent().find("#"+g).html(e).slideDown("fast")),a(document).trigger("wpuf-ajax-fetched-child-categories",g,c,d)}})},cloneField:function(b){b.preventDefault();var c=a(this).closest("tr"),d=c.clone();d.find("input").val(""),d.find(":checked").attr("checked",""),c.after(d)},removeField:function(){var b=a(this).closest("tr");b.siblings().andSelf().length>1&&b.remove()},adminPostSubmit:function(b){b.preventDefault();var c=a(this);if(WP\_User\_Frontend.validateForm(c))return!0},draftPost:function(b){b.preventDefault();var c=a(this),d=a(this).closest("form"),e=d.serialize()+"&action=wpuf\_draft\_post",f=d.find('input[type="hidden"][name="post\_id"]').val(),g=[];a(".wpuf-rich-validation").each(function(b,c){var c=a(c),d=c.data("id"),e=c.data("name"),f=a.trim(tinyMCE.get(d).getContent());g.push(e+"="+encodeURIComponent(f))}),e=e+"&"+g.join("&"),c.after(' <span class="wpuf-loading"></span>'),a.post(wpuf\_frontend.ajaxurl,e,function(b){if(void 0===f){var e='<input type="hidden" name="post\_id" value="'+b.post\_id+'">';e+='<input type="hidden" name="post\_date" value="'+b.date+'">',e+='<input type="hidden" name="post\_author" value="'+b.post\_author+'">',e+='<input type="hidden" name="comment\_status" value="'+b.comment\_status+'">',d.append(e)}c.next("span.wpuf-loading").remove(),c.after('<span class="wpuf-draft-saved">&nbsp; Post Saved</span>'),a(".wpuf-draft-saved").delay(2500).fadeOut("fast",function(){a(this).remove()})})},account\_update\_profile:function(b){b.preventDefault();var c=a(this).closest("form");a.post(wpuf\_frontend.ajaxurl,c.serialize(),function(a){a.success?(c.find(".wpuf-error").hide(),c.find(".wpuf-success").show()):(c.find(".wpuf-success").hide(),c.find(".wpuf-error").show(),c.find(".wpuf-error").text(a.data))})},formStepCheck:function(a,b){var c=b,d=(c.find("input[type=submit]"),WP\_User\_Frontend.validateForm(c));return 0==d&&WP\_User\_Frontend.addErrorNotice(self,"bottom"),d},formSubmit:function(c){c.preventDefault();var d=a(this),e=d.find("input[type=submit]");form\_data=WP\_User\_Frontend.validateForm(d),form\_data&&(d.find("li.wpuf-submit").append('<span class="wpuf-loading"></span>'),e.attr("disabled","disabled").addClass("button-primary-disabled"),a.post(wpuf\_frontend.ajaxurl,form\_data,function(c){if(c.success)a("body").trigger("wpuf:postform:success",c),1==c.show\_message?(d.before('<div class="wpuf-success">'+c.message+"</div>"),d.slideUp("fast",function(){d.remove()}),a("html, body").animate({scrollTop:a(".wpuf-success").offset().top-100},"fast")):b.location=c.redirect\_to;else{if(void 0!==c.type&&"login"===c.type)return void(confirm(c.error)?b.location=c.redirect\_to:(e.removeAttr("disabled"),e.removeClass("button-primary-disabled"),d.find("span.wpuf-loading").remove()));d.find(".g-recaptcha").length>0&&grecaptcha.reset(),swal({html:c.error,type:"warning",showCancelButton:!1,confirmButtonColor:"#d54e21",confirmButtonText:"OK",cancelButtonClass:"btn btn-danger"}),e.removeAttr("disabled")}e.removeClass("button-primary-disabled"),d.find("span.wpuf-loading").remove()}))},validateForm:function(b){var c=!1,d="";WP\_User\_Frontend.removeErrors(b),WP\_User\_Frontend.removeErrorNotice(b),b.find('[data-required="yes"]:visible').each(function(b,e){var f=a(e).data("type"),g="";switch(f){case"rich":var h=a(e).data("id");""===(g=a.trim(tinyMCE.get(h).getContent()))&&(c=!0,WP\_User\_Frontend.markError(e));break;case"textarea":case"text":""===(g=a.trim(a(e).val()))&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"password":case"confirm\_password":var i=a(e).data("repeat");if(g=a.trim(a(e).val()),""===g&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d)),i){var j=a('[data-type="confirm\_password"]').eq(0);j.val()!=g&&(c=!0,d="mismatch",WP\_User\_Frontend.markError(j,d))}break;case"select":(g=a(e).val())&&"-1"!==g||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"multiselect":null!==(g=a(e).val())&&0!==g.length||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"tax-checkbox":var k=a(e).children().find("input:checked").length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"radio":var k=a(e).find("input:checked").length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"file":var k=a(e).find("ul").children().length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"email":var g=a(e).val();""!==g?WP\_User\_Frontend.isValidEmail(g)||(c=!0,d="validation",WP\_User\_Frontend.markError(e,d)):""===g&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"url":var g=a(e).val();""!==g&&(WP\_User\_Frontend.isValidURL(g)||(c=!0,d="validation",WP\_User\_Frontend.markError(e,d)))}});var e=b.find('[data-required="yes"]').parents(".wpuf-form-google-map-container");if(a.each(e,function(b,e){""==a(e).val()&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d))}),c)return WP\_User\_Frontend.addErrorNotice(b,"end"),!1;var f=b.serialize(),g=[];return a(".wpuf-rich-validation",b).each(function(b,c){var c=a(c),d=c.data("id"),e=c.data("name"),f=a.trim(tinyMCE.get(d).getContent());g.push(e+"="+encodeURIComponent(f))}),f=f+"&"+g.join("&")},addErrorNotice:function(b,c){"bottom"==c?a(".wpuf-multistep-fieldset:visible").append('<div class="wpuf-errors">'+wpuf\_frontend.error\_message+"</div>"):a(b).find("li.wpuf-submit").append('<div class="wpuf-errors">'+wpuf\_frontend.error\_message+"</div>")},removeErrorNotice:function(b){a(b).find(".wpuf-errors").remove()},markError:function(b,c){if(a(b).closest("div").addClass("has-error"),c){var d="",e=a(b).data("label");switch(d=e||a(b).closest("li").data("label"),c){case"required":case"mismatch":case"validation":d=d+" "+error\_str\_obj[c];break;case"limit":d=""}a(b).siblings(".wpuf-error-msg").remove(),"DIV"===a(b).prev().prop("nodeName")?a(b).append('<div class="wpuf-error-msg">'+d+"</div>"):a(b).after('<div class="wpuf-error-msg">'+d+"</div>")}a(b).focus()},removeErrors:function(b){a(b).find(".has-error").removeClass("has-error"),a(".wpuf-error-msg").remove()},isValidEmail:function(a){return new RegExp(/^((([a-z]|\d|[!#\$%&'\\*\+\-\/=\?\^\_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\\*\+\-\/=\?\^\_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)\*)|((\x22)((((\x20|\x09)\*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))\*(((\x20|\x09)\*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|\_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|\_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(a)},isValidURL:function(a){return new RegExp("^(http://www.|https://www.|ftp://www.|www.|http://|https://){1}([0-9A-Za-z]+.)").test(a)},insertImage:function(b,c){if(a("#"+b).length){var d=new plupload.Uploader({runtimes:"html5,html4",browse\_button:b,container:"wpuf-insert-image-container",multipart:!0,multipart\_params:{action:"wpuf\_insert\_image",form\_id:a("#"+b).data("form\_id")},multiple\_queues:!1,multi\_selection:!1,urlstream\_upload:!0,file\_data\_name:"wpuf\_file",max\_file\_size:wpuf\_frontend\_upload.max\_filesize,url:wpuf\_frontend\_upload.plupload.url,flash\_swf\_url:wpuf\_frontend\_upload.flash\_swf\_url,filters:[{title:"Allowed Files",extensions:"jpg,jpeg,gif,png,bmp"}]});d.bind("Init",function(a,b){}),d.bind("FilesAdded",function(b,c){var d=a("#wpuf-insert-image-container");a.each(c,function(a,b){d.append('<div class="upload-item" id="'+b.id+'"><div class="progress progress-striped active"><div class="bar"></div></div></div>')}),b.refresh(),b.start()}),d.bind("QueueChanged",function(a){d.start()}),d.bind("UploadProgress",function(b,c){var d=a("#"+c.id);a(".bar",d).css({width:c.percent+"%"}),a(".percent",d).html(c.percent+"%")}),d.bind("Error",function(a,b){alert("Error #"+b.code+": "+b.message)}),d.bind("FileUploaded",function(b,d,e){if(a("#"+d.id).remove(),"error"!==e.response){if("undefined"!=typeof tinyMCE)if("function"!=typeof tinyMCE.execInstanceCommand){var f=tinyMCE.get("post\_content\_"+c);null!==f&&f.insertContent(e.response)}else tinyMCE.execInstanceCommand("post\_content\_"+c,"mceInsertContent",!1,e.response);var g=a("#post\_content\_"+c);g.val(g.val()+e.response)}else alert("Something went wrong")}),d.init()}},deleteAvatar:function(b){b.preventDefault(),confirm(a(this).data("confirm"))&&a.post(wpuf\_frontend.ajaxurl,{action:"wpuf\_delete\_avatar",\_wpnonce:wpuf\_frontend.nonce},function(){a(b.target).parent().remove(),a("[id^=wpuf-avatar]").css("display","")})},editorLimit:{bind:function(b,c,d,e,f){"no"===d?(a("textarea#"+c).keydown(function(a){WP\_User\_Frontend.editorLimit.textLimit.call(this,a,b,e,f)}),a("input#"+c).keydown(function(a){WP\_User\_Frontend.editorLimit.textLimit.call(this,a,b,e,f)}),a("textarea#"+c).on("paste",function(c){var d=a(this);setTimeout(function(){WP\_User\_Frontend.editorLimit.textLimit.call(d,c,b,e,f)},100)}),a("input#"+c).on("paste",function(c){var d=a(this);setTimeout(function(){WP\_User\_Frontend.editorLimit.textLimit.call(d,c,b,e,f)},100)})):setTimeout(function(){tinyMCE.get(c).onKeyDown.add(function(a,c){WP\_User\_Frontend.editorLimit.tinymce.onKeyDown(a,c,b,e,f)}),tinyMCE.get(c).onPaste.add(function(a,c){setTimeout(function(){WP\_User\_Frontend.editorLimit.tinymce.onPaste(a,c,b,e,f)},100)})},1e3)},tinymce:{getStats:function(a){var b=a.getBody(),c=tinymce.trim(b.innerText||b.textContent);return{chars:c.length,words:c.split(/[\w\u2019\'-]+/).length}},onKeyDown:function(b,c,d,e,f){field=a(".post\_content");var g=WP\_User\_Frontend.editorLimit.tinymce.getStats(b).chars+1;"word"===e&&(g=WP\_User\_Frontend.editorLimit.tinymce.getStats(b).words),d&&g>d&&"max"===f?(WP\_User\_Frontend.editorLimit.blockTyping(c),WP\_User\_Frontend.markError(field,"limit"),jQuery(".mce-path-item.mce-last",b.container).html(wpuf\_frontend["word\_"+f]+g+"/"+d)):d&&g<d&&"min"===f?(WP\_User\_Frontend.markError(field,"limit"),jQuery(".mce-path-item.mce-last",b.container).html(wpuf\_frontend["word\_"+f]+g+"/"+d)):(field.removeClass("has-error"),jQuery(".mce-path-item.mce-last",b.container).html(""))},onPaste:function(a,b,c){var d=a.getContent().split(" ").slice(0,c).join(" ");a.setContent(d),WP\_User\_Frontend.editorLimit.make\_media\_embed\_code(d,a)}},textLimit:function(b,c,d,e){var f=a(this),g=f.val().length+1;"word"===d&&(g=f.val().split(" ").length),c&&g>c&&"max"===e?(WP\_User\_Frontend.content\_limit\_message(f,d,e,c),WP\_User\_Frontend.editorLimit.blockTyping(b)):c&&g<c&&"min"===e?WP\_User\_Frontend.content\_limit\_message(f,d,e,c):(f.closest("li").removeClass("has-error"),f.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html("")),"paste"===b.type&&(f.val(content.substring(0,c)),"word"===d&&f.val(content.slice(0,c).join(" ")))},blockTyping:function(b){-1!==a.inArray(b.keyCode,[46,8,9,27,13,110,190,189])||65==b.keyCode&&!0===b.ctrlKey||b.keyCode>=35&&b.keyCode<=40||(b.preventDefault(),b.stopPropagation())},make\_media\_embed\_code:function(b,c){a.post(ajaxurl,{action:"make\_media\_embed\_code",content:b},function(a){c.setContent(c.getContent()+c.setContent(a))})}},doUncheckRadioBtn:function(a){a.checked=!1},content\_limit\_message:function(a,b,c,d){WP\_User\_Frontend.markError(a,"limit"),"word"===b&&(limit\_message=wpuf\_frontend["word\_"+c]+d),"character"===b&&(limit\_message=wpuf\_frontend["char\_"+c]+d),a.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html(limit\_message)}},a(function(){if(WP\_User\_Frontend.init(),a("ul.wpuf-payment-gateways").on("click","input[type=radio]",function(b){a(".wpuf-payment-instruction").slideUp(250),a(this).parents("li").find(".wpuf-payment-instruction").slideDown(250)}),a("ul.wpuf-payment-gateways li").find("input[type=radio]").is(":checked")){a("ul.wpuf-payment-gateways li").find("input[type=radio]:checked").parents("li").find(".wpuf-payment-instruction").slideDown(250)}else a("ul.wpuf-payment-gateways li").first().find("input[type=radio]").click()}),a(function(){a('input[name="first\_name"], input[name="last\_name"]').on("change keyup",function(){var b,c=a.makeArray(a('input[name="first\_name"], input[name="last\_name"]').map(function(){if(b=a(this).val())return b})).join(" ");a('input[name="display\_name"]').val(c)})}),a(function(a){a('.wpuf-form-add input[name="dokan\_store\_name"]').on("focusout",function(){var b=a(this).val().toLowerCase().replace(/-+/g,"").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");a('input[name="shopurl"]').val(b),a("#url-alart").text(b),a('input[name="shopurl"]').focus()}),a('.wpuf-form-add input[name="shopurl"]').keydown(function(b){a(this).val();-1!==a.inArray(b.keyCode,[46,8,9,27,13,91,109,110,173,189,190])||65==b.keyCode&&!0===b.ctrlKey||b.keyCode>=35&&b.keyCode<=39||(b.shiftKey||(b.keyCode<65||b.keyCode>90)&&(b.keyCode<48||b.keyCode>57))&&(b.keyCode<96||b.keyCode>105)&&b.preventDefault()}),a('.wpuf-form-add input[name="shopurl"]').keyup(function(b){a("#url-alart").text(a(this).val())}),a('.wpuf-form-add input[name="shopurl"]').on("focusout",function(){var b=a(this),c={action:"shop\_url",url\_slug:b.val(),\_nonce:dokan.nonce};""!==b.val()&&a.post(dokan.ajaxurl,c,function(b){0==b?(a("#url-alart").removeClass("text-success").addClass("text-danger"),a("#url-alart-mgs").removeClass("text-success").addClass("text-danger").text(dokan.seller.notAvailable)):(a("#url-alart").removeClass("text-danger").addClass("text-success"),a("#url-alart-mgs").removeClass("text-danger").addClass("text-success").text(dokan.seller.available))})}),a(".wpuf-form-add #wpuf-map-add-location").attr("name","find\_address")})}(jQuery,window); |
* ## [wp-user-frontend/tags/3.5.26/assets/js/wpuf-form-builder.js](/changeset/2648715/wp-user-frontend/tags/3.5.26/assets/js/wpuf-form-builder.js "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/assets/js/wpuf-form-builder.js")

  | [r2626578](/browser/wp-user-frontend/trunk/assets/js/wpuf-form-builder.js?rev=2626578#L144 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/assets/js/wpuf-form-builder.js?rev=2648715#L144 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 144 | 144 | // add new form field element |
  | 145 | 145 | add\_form\_field\_element: function (state, payload) { |
  |  | 146 |  |
  | 146 | 147 | state.form\_fields.splice(payload.toIndex, 0, payload.field); |
  | 147 | 148 | var sprintf = wp.i18n.sprintf; |
  | 148 | 149 | var \_\_ = wp.i18n.\_\_; |
  | 149 |  | // bring newly added element into viewport |
  |  | 150 | // bring newly added element into viewport, do not show for reg form |
  |  | 151 | if ( window.location.search.substring(1).split('&').includes('page=wpuf-profile-forms') ) return; |
  | 150 | 152 | Vue.nextTick(function () { |
  | 151 | 153 | var el = $('#form-preview-stage .wpuf-form .field-items').eq(payload.toIndex); |
  | […](/browser/wp-user-frontend/trunk/assets/js/wpuf-form-builder.js?rev=2626578#L538) | […](/browser/wp-user-frontend/tags/3.5.26/assets/js/wpuf-form-builder.js?rev=2648715#L540) |  |
  | 538 | 540 | var form\_id = $('#wpuf-form-builder [name="wpuf\_form\_id"]').val(); |
  | 539 | 541 |  |
  | 540 |  | if ( typeof tinyMCE !== 'undefined' ) { |
  |  | 542 | if ( typeof tinyMCE !== 'undefined' && window.location.search.substring(1).split('&').includes('page=wpuf-profile-forms') ) { |
  | 541 | 543 | $('textarea[name="wpuf\_settings[notification][verification\_body]"]').val(tinyMCE.get('wpuf\_verification\_body\_' + form\_id).getContent()); |
  | 542 | 544 | $('textarea[name="wpuf\_settings[notification][welcome\_email\_body]"]').val(tinyMCE.get('wpuf\_welcome\_email\_body\_' + form\_id).getContent()); |
* ## [wp-user-frontend/tags/3.5.26/changelog.txt](/changeset/2648715/wp-user-frontend/tags/3.5.26/changelog.txt "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/changelog.txt")

  | [r2631872](/browser/wp-user-frontend/trunk/changelog.txt?rev=2631872#L1 "Show revision 2631872 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/changelog.txt?rev=2648715#L1 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  |  | 1 | = v3.5.25 (18 Nov, 2021) = |
  |  | 2 |  |
  |  | 3 | \* Enhancement - Promotion notice enhanced through api |
  |  | 4 |  |
  | 1 | 5 | = v3.5.25 (18 Nov, 2021) = |
  | 2 | 6 |  |
* ## [wp-user-frontend/tags/3.5.26/includes/class-gutenblock.php](/changeset/2648715/wp-user-frontend/tags/3.5.26/includes/class-gutenblock.php "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/includes/class-gutenblock.php")

  | [r2227051](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2227051#L11 "Show revision 2227051 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/includes/class-gutenblock.php?rev=2648715#L11 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 11 | 11 | public function \_\_construct() { |
  | 12 | 12 | //Enqueue the Dashicons script as they are not loading |
  | 13 |  | ~~//when wpuf\_form shortcode exists in admin pages.~~ |
  | 14 |  | ~~add\_action( 'admin\_enqueue\_scripts', [ $this, 'load\_dashicons' ] );~~ |
  | 15 | 13 | // wait for Gutenberg to enqueue it's block assets |
  | 16 | 14 | add\_action( 'enqueue\_block\_editor\_assets', [ $this, 'wpuf\_form\_block' ], 10 ); |
  | […](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2227051#L26) | […](/browser/wp-user-frontend/tags/3.5.26/includes/class-gutenblock.php?rev=2648715#L24) |  |
  | 26 | 24 |  |
  | 27 | 25 | public function wpuf\_form\_block() { |
  |  | 26 | $this->load\_dashicons(); |
  |  | 27 |  |
  | 28 | 28 | $js\_dir  = WPUF\_ASSET\_URI . '/js/admin/'; |
  | 29 | 29 | $css\_dir = WPUF\_ASSET\_URI . '/css/admin/'; |
  | 30 | 30 |  |
  | 31 | 31 | // Once we have Gutenberg block javascript, we can enqueue our assets |
  | 32 |  | wp\_register\_script( |
  |  | 32 | wp\_register\_script( |
  | 33 | 33 | 'wpuf-forms-block', |
  | 34 | 34 | $js\_dir . 'gutenblock.js', |
  | […](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2227051#L36) | […](/browser/wp-user-frontend/tags/3.5.26/includes/class-gutenblock.php?rev=2648715#L36) |  |
  | 36 | 36 | ); |
  | 37 | 37 |  |
  | 38 |  | wp\_register\_style( |
  |  | 38 | wp\_register\_style( |
  | 39 | 39 | 'wpuf-forms-block-style', |
  | 40 | 40 | $css\_dir . 'gutenblock.css', |
  | 41 | 41 | [ 'wp-edit-blocks' ] |
  | 42 | 42 | ); |
  | 43 |  | wp\_register\_style( |
  |  | 43 | wp\_register\_style( |
  | 44 | 44 | 'wpuf-forms-block-editor', |
  | 45 | 45 | $css\_dir . 'gutenblock-editor.css', |
  | […](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2227051#L107) | […](/browser/wp-user-frontend/tags/3.5.26/includes/class-gutenblock.php?rev=2648715#L107) |  |
  | 107 | 107 |  |
  | 108 | 108 | // register our script to target the form iFrame in page builder |
  | 109 |  | wp\_register\_script( |
  |  | 109 | wp\_register\_script( |
  | 110 | 110 | 'wpuf-block-setup', |
  | 111 | 111 | $js\_dir . 'blockFrameSetup.js', |
* ## [wp-user-frontend/tags/3.5.26/includes/class-list-table-subscribers.php](/changeset/2648715/wp-user-frontend/tags/3.5.26/includes/class-list-table-subscribers.php "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/includes/class-list-table-subscribers.php")

  | [r2631872](/browser/wp-user-frontend/trunk/includes/class-list-table-subscribers.php?rev=2631872#L177 "Show revision 2631872 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/includes/class-list-table-subscribers.php?rev=2648715#L177 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 177 | 177 | $sql .= isset( $\_REQUEST['post\_ID'] ) ? ' WHERE subscribtion\_id = ' . intval( sanitize\_text\_field( wp\_unslash( $\_REQUEST['post\_ID'] ) ) ): ''; |
  | 178 | 178 |  |
  | 179 |  | $sql .= isset( $\_REQUEST['status'] ) ? ' AND subscribtion\_status = "' . sanitize\_~~text\_field~~( wp\_unslash( $\_REQUEST['status'] ) ) . '"' : ''; |
  |  | 179 | $sql .= isset( $\_REQUEST['status'] ) ? ' AND subscribtion\_status = "' . sanitize\_key( wp\_unslash( $\_REQUEST['status'] ) ) . '"' : ''; |
  | 180 | 180 |  |
  | 181 | 181 | $this->items  = $wpdb->get\_results( $sql, OBJECT ); |
* ## [wp-user-frontend/tags/3.5.26/includes/fields/class-field-textarea.php](/changeset/2648715/wp-user-frontend/tags/3.5.26/includes/fields/class-field-textarea.php "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/includes/fields/class-field-textarea.php")

  | [r2599944](/browser/wp-user-frontend/trunk/includes/fields/class-field-textarea.php?rev=2599944#L90 "Show revision 2599944 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/includes/fields/class-field-textarea.php?rev=2648715#L90 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 90 | 90 | $this->check\_content\_restriction\_func( |
  | 91 | 91 | $field\_settings['content\_restriction'], |
  | 92 |  | 'no', |
  |  | 92 | $field\_settings['rich'] ? 'yes' : 'no', |
  | 93 | 93 | $field\_settings['name'] . '\_' . $form\_id, |
  | 94 | 94 | $field\_settings['restriction\_type'], |
* ## [wp-user-frontend/tags/3.5.26/readme.txt](/changeset/2648715/wp-user-frontend/tags/3.5.26/readme.txt "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/readme.txt")

  | [r2631872](/browser/wp-user-frontend/trunk/readme.txt?rev=2631872#L4 "Show revision 2631872 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/readme.txt?rev=2648715#L4 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: Forms, registration, profile-builder, login, membership, frontend-post |
  | 5 | 5 | Requires at least: 4.0 |
  | 6 |  | Tested up to: 5.8.~~1~~ |
  |  | 6 | Tested up to: 5.8.2 |
  | 7 | 7 | Requires PHP: 5.6 |
  | 8 |  | Stable tag: 3.5.2~~5~~ |
  |  | 8 | Stable tag: 3.5.26 |
  | 9 | 9 | License: GPLv2 |
  | 10 | 10 | License URI: https://www.gnu.org/licenses/gpl-2.0.html |
* ## [wp-user-frontend/tags/3.5.26/wpuf.php](/changeset/2648715/wp-user-frontend/tags/3.5.26/wpuf.php "Show the changeset 2648715 restricted to wp-user-frontend/tags/3.5.26/wpuf.php")

  | [r2631872](/browser/wp-user-frontend/trunk/wpuf.php?rev=2631872#L5 "Show revision 2631872 of this file in browser") | [r2648715](/browser/wp-user-frontend/tags/3.5.26/wpuf.php?rev=2648715#L5 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Description: Create, edit, delete, manages your post, pages or custom post types from frontend. Create registration forms, frontend profile and more... |
  | 6 | 6 | Author: weDevs |
  | 7 |  | Version: 3.5.2~~5~~ |
  |  | 7 | Version: 3.5.26 |
  | 8 | 8 | Author URI: https://wedevs.com/?utm\_source=WPUF\_Author\_URI |
  | 9 | 9 | License: GPL2 or later |
  | […](/browser/wp-user-frontend/trunk/wpuf.php?rev=2631872#L13) | […](/browser/wp-user-frontend/tags/3.5.26/wpuf.php?rev=2648715#L13) |  |
  | 13 | 13 | \*/ |
  | 14 | 14 |  |
  | 15 |  | define( 'WPUF\_VERSION', '3.5.2~~5~~' ); |
  |  | 15 | define( 'WPUF\_VERSION', '3.5.26' ); |
  | 16 | 16 | define( 'WPUF\_FILE', \_\_FILE\_\_ ); |
  | 17 | 17 | define( 'WPUF\_ROOT', \_\_DIR\_\_ ); |
* ## [wp-user-frontend/trunk/admin/class-admin-subscription.php](/changeset/2648715/wp-user-frontend/trunk/admin/class-admin-subscription.php "Show the changeset 2648715 restricted to wp-user-frontend/trunk/admin/class-admin-subscription.php")

  | [r2626578](/browser/wp-user-frontend/trunk/admin/class-admin-subscription.php?rev=2626578#L150 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/admin/class-admin-subscription.php?rev=2648715#L150 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 150 | 150 | $user\_pack['posts'][ $type ] = isset( $\_POST[ $type ] ) ? sanitize\_text\_field( wp\_unslash( $\_POST[ $type ] ) ) : 0; |
  | 151 | 151 | } |
  | 152 |  | $user\_pack['expire'] = isset( $\_POST['expire'] ) ? wpuf\_date2mysql( sanitize\_text\_field( wp\_unslash( $\_POST['expire'] ) ) ) : $user\_pack['expire']; |
  |  | 152 | $user\_pack['expire'] = isset( $\_POST['expire'] ) && 'Unlimited' !== $\_POST['expire'] ? wpuf\_date2mysql( sanitize\_text\_field( wp\_unslash( $\_POST['expire'] ) ) ) : $user\_pack['expire']; |
  | 153 | 153 | } |
  | 154 | 154 | wpuf\_get\_user( $user\_id )->subscription()->update\_meta( $user\_pack ); |
* ## [wp-user-frontend/trunk/admin/form-builder/assets/js/form-builder.js](/changeset/2648715/wp-user-frontend/trunk/admin/form-builder/assets/js/form-builder.js "Show the changeset 2648715 restricted to wp-user-frontend/trunk/admin/form-builder/assets/js/form-builder.js")

  | [r2626578](/browser/wp-user-frontend/trunk/admin/form-builder/assets/js/form-builder.js?rev=2626578#L144 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/admin/form-builder/assets/js/form-builder.js?rev=2648715#L144 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 144 | 144 | // add new form field element |
  | 145 | 145 | add\_form\_field\_element: function (state, payload) { |
  |  | 146 |  |
  | 146 | 147 | state.form\_fields.splice(payload.toIndex, 0, payload.field); |
  | 147 | 148 | var sprintf = wp.i18n.sprintf; |
  | 148 | 149 | var \_\_ = wp.i18n.\_\_; |
  | 149 |  | // bring newly added element into viewport |
  |  | 150 | // bring newly added element into viewport, do not show for reg form |
  |  | 151 | if ( window.location.search.substring(1).split('&').includes('page=wpuf-profile-forms') ) return; |
  | 150 | 152 | Vue.nextTick(function () { |
  | 151 | 153 | var el = $('#form-preview-stage .wpuf-form .field-items').eq(payload.toIndex); |
  | […](/browser/wp-user-frontend/trunk/admin/form-builder/assets/js/form-builder.js?rev=2626578#L538) | […](/browser/wp-user-frontend/trunk/admin/form-builder/assets/js/form-builder.js?rev=2648715#L540) |  |
  | 538 | 540 | var form\_id = $('#wpuf-form-builder [name="wpuf\_form\_id"]').val(); |
  | 539 | 541 |  |
  | 540 |  | if ( typeof tinyMCE !== 'undefined' ) { |
  |  | 542 | if ( typeof tinyMCE !== 'undefined' && window.location.search.substring(1).split('&').includes('page=wpuf-profile-forms') ) { |
  | 541 | 543 | $('textarea[name="wpuf\_settings[notification][verification\_body]"]').val(tinyMCE.get('wpuf\_verification\_body\_' + form\_id).getContent()); |
  | 542 | 544 | $('textarea[name="wpuf\_settings[notification][welcome\_email\_body]"]').val(tinyMCE.get('wpuf\_welcome\_email\_body\_' + form\_id).getContent()); |
* ## [wp-user-frontend/trunk/admin/html/whats-new.php](/changeset/2648715/wp-user-frontend/trunk/admin/html/whats-new.php "Show the changeset 2648715 restricted to wp-user-frontend/trunk/admin/html/whats-new.php")

  | [r2631872](/browser/wp-user-frontend/trunk/admin/html/whats-new.php?rev=2631872#L1 "Show revision 2631872 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/admin/html/whats-new.php?rev=2648715#L1 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | $changelog = [ |
  |  | 3 | [ |
  |  | 4 | 'version'  => 'Version 3.5.26', |
  |  | 5 | 'released' => '2021-12-24', |
  |  | 6 | 'changes'  =>  [ |
  |  | 7 |  |
  |  | 8 | [ |
  |  | 9 | 'title' => \_\_( 'Promotion notice enhanced through api', 'wp-user-frontend' ), |
  |  | 10 | 'type'  => 'Enhancement', |
  |  | 11 | ], |
  |  | 12 | ], |
  |  | 13 | ], |
  | 3 | 14 | [ |
  | 4 | 15 | 'version'  => 'Version 3.5.25', |
* ## [wp-user-frontend/trunk/admin/promotion.php](/changeset/2648715/wp-user-frontend/trunk/admin/promotion.php "Show the changeset 2648715 restricted to wp-user-frontend/trunk/admin/promotion.php")

  | [r2626578](/browser/wp-user-frontend/trunk/admin/promotion.php?rev=2626578#L5 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/admin/promotion.php?rev=2648715#L5 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \*/ |
  | 6 | 6 | class WPUF\_Admin\_Promotion { |
  |  | 7 | const PROMO\_KEY = 'wpuf\_promo\_notices'; |
  | 7 | 8 |  |
  | 8 | 9 | public function \_\_construct() { |
  | […](/browser/wp-user-frontend/trunk/admin/promotion.php?rev=2626578#L25) | […](/browser/wp-user-frontend/trunk/admin/promotion.php?rev=2648715#L26) |  |
  | 25 | 26 | } |
  | 26 | 27 | // Showing only for Uf menu |
  | 27 |  | if ( 'wp-user-frontend' !== get\_admin\_page\_parent() ){ |
  | 28 |  | return; |
  | 29 |  | } |
  |  | 28 | if ( 'wp-user-frontend' !== get\_admin\_page\_parent() ) { |
  |  | 29 | return; |
  |  | 30 | } |
  |  | 31 |  |
  |  | 32 | $promos = get\_transient( self::PROMO\_KEY ); |
  |  | 33 |  |
  |  | 34 | if ( false === $promos ) { |
  |  | 35 | $promo\_notice\_url = 'https://raw.githubusercontent.com/weDevsOfficial/wp-user-frontend/develop/assets/js/promotion.json'; |
  |  | 36 | $response         = wp\_remote\_get( $promo\_notice\_url, array( 'timeout' => 15 ) ); |
  |  | 37 | $promos           = wp\_remote\_retrieve\_body( $response ); |
  |  | 38 |  |
  |  | 39 | if ( is\_wp\_error( $response ) || $response['response']['code'] !== 200 ) { |
  |  | 40 | $promos = '[]'; |
  |  | 41 | } |
  |  | 42 |  |
  |  | 43 | set\_transient( self::PROMO\_KEY, $promos, DAY\_IN\_SECONDS ); |
  |  | 44 | } |
  |  | 45 |  |
  |  | 46 | $promos = json\_decode( $promos, true ); |
  |  | 47 |  |
  |  | 48 | if ( empty( $promos ) || ! is\_array( $promos ) ) { |
  |  | 49 | return; |
  |  | 50 | } |
  |  | 51 |  |
  |  | 52 | $option\_name = $promos['key']; |
  |  | 53 | $start\_date  = $promos['start\_date']; |
  |  | 54 | $end\_date    = $promos['end\_date']; |
  |  | 55 | $content     = $promos['content'] . '.' . $promos['title']; |
  |  | 56 | $action\_url  = $promos['action\_url']; |
  |  | 57 | $action\_title = $promos['action\_title']; |
  | 30 | 58 |  |
  | 31 | 59 | $current\_time = $this->convert\_utc\_to\_est(); |
  | 32 | 60 |  |
  | 33 | 61 | if ( |
  | 34 |  | strtotime( ~~'2021-11-19 09:00:00 EST'~~ ) < strtotime( $current\_time ) |
  | 35 |  | && strtotime( $current\_time ) < strtotime( ~~'2021-11-30 11:00:00 EST'~~ ) |
  |  | 62 | strtotime( $start\_date ) < strtotime( $current\_time ) |
  |  | 63 | && strtotime( $current\_time ) < strtotime( $end\_date ) |
  | 36 | 64 | ) { |
  | 37 |  | $option\_name = 'wpuf-bfcm2021'; |
  | 38 |  | $notice      = sprintf( '<p>%s <a href="%s" target="\_blank">%s</a></p>', \_\_( 'Irresistible Black Friday & Cyber Monday Deals. Enjoy Up To 50% OFF on WP User Frontend Pro.', 'wp-user-frontend' ), 'https://wedevs.com/wp-user-frontend-pro/pricing?utm\_medium=text&utm\_source=wordpress-wpuf-bfcm2021', \_\_( 'Get Now', 'wp-user-frontend' ) ); |
  |  | 65 | $notice = sprintf( '<p>%s <a href="%s" target="\_blank">%s</a></p>', \_\_( $content, 'wp-user-frontend' ), $action\_url, \_\_( $action\_title, 'wp-user-frontend' ) ); |
  | 39 | 66 | $this->generate\_notice( $notice, $option\_name ); |
  | 40 | 67 | } |
* ## [wp-user-frontend/trunk/assets/js/frontend-form.js](/changeset/2648715/wp-user-frontend/trunk/assets/js/frontend-form.js "Show the changeset 2648715 restricted to wp-user-frontend/trunk/assets/js/frontend-form.js")

  | [r2626578](/browser/wp-user-frontend/trunk/assets/js/frontend-form.js?rev=2626578#L91 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/assets/js/frontend-form.js?rev=2648715#L91 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 91 | 91 |  |
  | 92 | 92 | warningOnExit: function () { |
  | 93 |  | $('input[name="submit"]').on('click', function () { |
  |  | 93 | $('input[name="submit"], #wpuf-post-draft').on('click', function () { |
  | 94 | 94 | window.onbeforeunload = null; |
  | 95 | 95 | return; |
* ## [wp-user-frontend/trunk/assets/js/frontend-form.min.js](/changeset/2648715/wp-user-frontend/trunk/assets/js/frontend-form.min.js "Show the changeset 2648715 restricted to wp-user-frontend/trunk/assets/js/frontend-form.min.js")

  | [r2626578](/browser/wp-user-frontend/trunk/assets/js/frontend-form.min.js?rev=2626578#L1 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/assets/js/frontend-form.min.js?rev=2648715#L1 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | !function(a,b){a.fn.listautowidth=function(){return this.each(function(){var b=a(this).width(),c=b/a(this).children("li").length;a(this).children("li").each(function(){var b=a(this).outerWidth(!0)-a(this).width();a(this).width(c-b)})})},b.WP\_User\_Frontend={init:function(){this.enableMultistep(this),a(".wpuf-form").on("click","img.wpuf-clone-field",this.cloneField),a(".wpuf-form").on("click","img.wpuf-remove-field",this.removeField),a(".wpuf-form").on("click","a.wpuf-delete-avatar",this.deleteAvatar),a(".wpuf-form").on("click","a#wpuf-post-draft",this.draftPost),a(".wpuf-form").on("click","button#wpuf-account-update-profile",this.account\_update\_profile),a(".wpuf-form-add").on("submit",this.formSubmit),a("form#post").on("submit",this.adminPostSubmit),b.matchMedia("(max-width: 600px)").matches&&(a("table.items-table tr td .post-edit-icon").click(function(b){b.preventDefault(),a(this).parents("tr").find(".data-column").toggleClass("flex-column"),a(this).toggleClass("toggle-icon")}),a(".wpuf-dashboard-navigation ul li:first-child").after().click(function(b){b.preventDefault(),a(".wpuf-dashboard-navigation ul li").not(":first").toggle()})),a(".wpuf-form").on("step-change-fieldset",function(a,b,c){if(wpuf\_plupload\_items.length)for(var d=wpuf\_plupload\_items.length-1;d>=0;d--)wpuf\_plupload\_items[d].refresh();if(wpuf\_map\_items.length)for(var d=wpuf\_map\_items.length-1;d>=0;d--)google.maps.event.trigger(wpuf\_map\_items[d].map,"resize"),wpuf\_map\_items[d].map.setCenter(wpuf\_map\_items[d].center)}),this.ajaxCategory(),a(':submit[name="wpuf\_user\_subscription\_cancel"]').click(function(b){b.preventDefault(),swal({text:wpuf\_frontend.cancelSubMsg,type:"warning",showCancelButton:!0,confirmButtonColor:"#d54e21",confirmButtonText:wpuf\_frontend.delete\_it,cancelButtonText:wpuf\_frontend.cancel\_it,confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger"}).then(function(b){if(!b)return!1;a("#wpuf\_cancel\_subscription").submit()})}),this.warningOnExit()},warningOnExit:function(){a('input[name="submit"]').on("click",function(){b.onbeforeunload=null}),a(".wpuf-form-add").on("change",function(){a(".wpuf-form-add input, .wpuf-form-add select, .wpuf-form-add textarea").each(function(c){"hidden"===a(this).attr("type")&&"submit"===a(this).attr("type")&&-1===a(this).val()||(b.onbeforeunload=function(){return"you have changes"})})})},check\_pass\_strength:function(){var b=a("#pass1").val();if(a("#pass-strength-result").show(),a("#pass-strength-result").removeClass("short bad good strong"),!b)return a("#pass-strength-result").html("&nbsp;"),void a("#pass-strength-result").hide();if(void 0!==wp.passwordStrength)switch(wp.passwordStrength.meter(b,wp.passwordStrength.userInputBlacklist(),b)){case 2:a("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:a("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:a("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:a("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:a("#pass-strength-result").addClass("short").html(pwsL10n.short)}},enableMultistep:function(c){var d=this,e=0,f=a(':hidden[name="wpuf\_multistep\_type"]').val();if(null!=f){if(a("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-prev-btn").first().remove(),a("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-next-btn").last().remove(),a(".wpuf-form fieldset").removeClass("field-active").first().addClass("field-active"),"progressive"==f&&0!=a(".wpuf-form .wpuf-multistep-fieldset").length){a("fieldset.wpuf-multistep-fieldset legend").first();a(".wpuf-multistep-progressbar").html('<div class="wpuf-progress-percentage"></div>');var g=a(".wpuf-multistep-progressbar"),h=a(".wpuf-progress-percentage");a(".wpuf-multistep-progressbar").progressbar({change:function(){h.text(g.progressbar("value")+"%")}}),a(".wpuf-multistep-fieldset legend").hide()}else a(".wpuf-form").each(function(){var b=a(this),c=a(".wpuf-multistep-progressbar",b),d="";c.addClass("wizard-steps"),d+='<ul class="wpuf-step-wizard">',a(".wpuf-multistep-fieldset",this).each(function(){d+="<li>"+a.trim(a("legend",this).text())+"</li>",a("legend",this).hide()}),d+="</ul>",c.append(d),a(".wpuf-step-wizard li",c).first().addClass("active-step"),a(".wpuf-step-wizard",c).listautowidth()});this.change\_fieldset(e,f),a("fieldset .wpuf-multistep-prev-btn, fieldset .wpuf-multistep-next-btn").click(function(g){if(a(this).hasClass("wpuf-multistep-next-btn")){0!=d.formStepCheck("",a(this).closest("fieldset"))&&c.change\_fieldset(++e,f)}else a(this).hasClass("wpuf-multistep-prev-btn")&&c.change\_fieldset(--e,f);var h=a("form.wpuf-form-add"),i=h.offset().top;return b.scrollTo({top:i-32,behavior:"smooth"}),!1})}},change\_fieldset:function(b,c){var d=a("fieldset.wpuf-multistep-fieldset").eq(b);a("fieldset.wpuf-multistep-fieldset").removeClass("field-active").eq(b).addClass("field-active"),a(".wpuf-step-wizard li").each(function(){a(this).index()<=b?"step\_by\_step"==c?a(this).addClass("passed-wpuf-ms-bar"):a(".wpuf-ps-bar",this).addClass("passed-wpuf-ms-bar"):"step\_by\_step"==c?a(this).removeClass("passed-wpuf-ms-bar"):a(".wpuf-ps-bar",this).removeClass("passed-wpuf-ms-bar")}),a(".wpuf-step-wizard li").removeClass("wpuf-ms-bar-active active-step completed-step"),a(".passed-wpuf-ms-bar").addClass("completed-step").last().addClass("wpuf-ms-bar-active"),a(".wpuf-ms-bar-active").addClass("active-step");var e=a("fieldset.wpuf-multistep-fieldset").eq(b).find("legend").text();if(e=a.trim(e),"progressive"==c&&0!=a(".wpuf-form .wpuf-multistep-fieldset").length){var f=100\*(b+1)/a("fieldset.wpuf-multistep-fieldset").length,f=Number(f.toFixed(2));a(".wpuf-multistep-progressbar").progressbar({value:f}),a(".wpuf-progress-percentage").text(e+" ("+f+"%)")}a(".wpuf-form").trigger("step-change-fieldset",[b,d])},ajaxCategory:function(){a(".category-wrap").on("change",".cat-ajax",function(){var b=a(this).data("form-id");currentLevel=parseInt(a(this).parent().attr("level")),WP\_User\_Frontend.getChildCats(a(this),currentLevel+1,"category",b)})},getChildCats:function(b,c,d,e){var f=a(b).val(),g="wpuf-category-dropdown-lvl-"+c,d=void 0!==d?d:"category",h=a(b).siblings("span").data("taxonomy");a.ajax({type:"post",url:wpuf\_frontend.ajaxurl,data:{action:"wpuf\_get\_child\_cat",catID:f,nonce:wpuf\_frontend.nonce,field\_attr:h,form\_id:e},beforeSend:function(){a(b).parent().parent().next(".loading").addClass("wpuf-loading")},complete:function(){a(b).parent().parent().next(".loading").removeClass("wpuf-loading")},success:function(e){a(b).parent().nextAll().each(function(){a(this).remove()}),""!=e&&(a(b).parent().addClass("hasChild").parent().append('<div id="'+g+'" level="'+c+'"></div>'),b.parent().parent().find("#"+g).html(e).slideDown("fast")),a(document).trigger("wpuf-ajax-fetched-child-categories",g,c,d)}})},cloneField:function(b){b.preventDefault();var c=a(this).closest("tr"),d=c.clone();d.find("input").val(""),d.find(":checked").attr("checked",""),c.after(d)},removeField:function(){var b=a(this).closest("tr");b.siblings().andSelf().length>1&&b.remove()},adminPostSubmit:function(b){b.preventDefault();var c=a(this);if(WP\_User\_Frontend.validateForm(c))return!0},draftPost:function(b){b.preventDefault();var c=a(this),d=a(this).closest("form"),e=d.serialize()+"&action=wpuf\_draft\_post",f=d.find('input[type="hidden"][name="post\_id"]').val(),g=[];a(".wpuf-rich-validation").each(function(b,c){var c=a(c),d=c.data("id"),e=c.data("name"),f=a.trim(tinyMCE.get(d).getContent());g.push(e+"="+encodeURIComponent(f))}),e=e+"&"+g.join("&"),c.after(' <span class="wpuf-loading"></span>'),a.post(wpuf\_frontend.ajaxurl,e,function(b){if(void 0===f){var e='<input type="hidden" name="post\_id" value="'+b.post\_id+'">';e+='<input type="hidden" name="post\_date" value="'+b.date+'">',e+='<input type="hidden" name="post\_author" value="'+b.post\_author+'">',e+='<input type="hidden" name="comment\_status" value="'+b.comment\_status+'">',d.append(e)}c.next("span.wpuf-loading").remove(),c.after('<span class="wpuf-draft-saved">&nbsp; Post Saved</span>'),a(".wpuf-draft-saved").delay(2500).fadeOut("fast",function(){a(this).remove()})})},account\_update\_profile:function(b){b.preventDefault();var c=a(this).closest("form");a.post(wpuf\_frontend.ajaxurl,c.serialize(),function(a){a.success?(c.find(".wpuf-error").hide(),c.find(".wpuf-success").show()):(c.find(".wpuf-success").hide(),c.find(".wpuf-error").show(),c.find(".wpuf-error").text(a.data))})},formStepCheck:function(a,b){var c=b,d=(c.find("input[type=submit]"),WP\_User\_Frontend.validateForm(c));return 0==d&&WP\_User\_Frontend.addErrorNotice(self,"bottom"),d},formSubmit:function(c){c.preventDefault();var d=a(this),e=d.find("input[type=submit]");form\_data=WP\_User\_Frontend.validateForm(d),form\_data&&(d.find("li.wpuf-submit").append('<span class="wpuf-loading"></span>'),e.attr("disabled","disabled").addClass("button-primary-disabled"),a.post(wpuf\_frontend.ajaxurl,form\_data,function(c){if(c.success)a("body").trigger("wpuf:postform:success",c),1==c.show\_message?(d.before('<div class="wpuf-success">'+c.message+"</div>"),d.slideUp("fast",function(){d.remove()}),a("html, body").animate({scrollTop:a(".wpuf-success").offset().top-100},"fast")):b.location=c.redirect\_to;else{if(void 0!==c.type&&"login"===c.type)return void(confirm(c.error)?b.location=c.redirect\_to:(e.removeAttr("disabled"),e.removeClass("button-primary-disabled"),d.find("span.wpuf-loading").remove()));d.find(".g-recaptcha").length>0&&grecaptcha.reset(),swal({html:c.error,type:"warning",showCancelButton:!1,confirmButtonColor:"#d54e21",confirmButtonText:"OK",cancelButtonClass:"btn btn-danger"}),e.removeAttr("disabled")}e.removeClass("button-primary-disabled"),d.find("span.wpuf-loading").remove()}))},validateForm:function(b){var c=!1,d="";WP\_User\_Frontend.removeErrors(b),WP\_User\_Frontend.removeErrorNotice(b),b.find('[data-required="yes"]:visible').each(function(b,e){var f=a(e).data("type"),g="";switch(f){case"rich":var h=a(e).data("id");""===(g=a.trim(tinyMCE.get(h).getContent()))&&(c=!0,WP\_User\_Frontend.markError(e));break;case"textarea":case"text":""===(g=a.trim(a(e).val()))&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"password":case"confirm\_password":var i=a(e).data("repeat");if(g=a.trim(a(e).val()),""===g&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d)),i){var j=a('[data-type="confirm\_password"]').eq(0);j.val()!=g&&(c=!0,d="mismatch",WP\_User\_Frontend.markError(j,d))}break;case"select":(g=a(e).val())&&"-1"!==g||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"multiselect":null!==(g=a(e).val())&&0!==g.length||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"tax-checkbox":var k=a(e).children().find("input:checked").length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"radio":var k=a(e).find("input:checked").length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"file":var k=a(e).find("ul").children().length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"email":var g=a(e).val();""!==g?WP\_User\_Frontend.isValidEmail(g)||(c=!0,d="validation",WP\_User\_Frontend.markError(e,d)):""===g&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"url":var g=a(e).val();""!==g&&(WP\_User\_Frontend.isValidURL(g)||(c=!0,d="validation",WP\_User\_Frontend.markError(e,d)))}});var e=b.find('[data-required="yes"]').parents(".wpuf-form-google-map-container");if(a.each(e,function(b,e){""==a(e).val()&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d))}),c)return WP\_User\_Frontend.addErrorNotice(b,"end"),!1;var f=b.serialize(),g=[];return a(".wpuf-rich-validation",b).each(function(b,c){var c=a(c),d=c.data("id"),e=c.data("name"),f=a.trim(tinyMCE.get(d).getContent());g.push(e+"="+encodeURIComponent(f))}),f=f+"&"+g.join("&")},addErrorNotice:function(b,c){"bottom"==c?a(".wpuf-multistep-fieldset:visible").append('<div class="wpuf-errors">'+wpuf\_frontend.error\_message+"</div>"):a(b).find("li.wpuf-submit").append('<div class="wpuf-errors">'+wpuf\_frontend.error\_message+"</div>")},removeErrorNotice:function(b){a(b).find(".wpuf-errors").remove()},markError:function(b,c){if(a(b).closest("div").addClass("has-error"),c){var d="",e=a(b).data("label");switch(d=e||a(b).closest("li").data("label"),c){case"required":case"mismatch":case"validation":d=d+" "+error\_str\_obj[c];break;case"limit":d=""}a(b).siblings(".wpuf-error-msg").remove(),"DIV"===a(b).prev().prop("nodeName")?a(b).append('<div class="wpuf-error-msg">'+d+"</div>"):a(b).after('<div class="wpuf-error-msg">'+d+"</div>")}a(b).focus()},removeErrors:function(b){a(b).find(".has-error").removeClass("has-error"),a(".wpuf-error-msg").remove()},isValidEmail:function(a){return new RegExp(/^((([a-z]|\d|[!#\$%&'\\*\+\-\/=\?\^\_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\\*\+\-\/=\?\^\_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)\*)|((\x22)((((\x20|\x09)\*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))\*(((\x20|\x09)\*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|\_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|\_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(a)},isValidURL:function(a){return new RegExp("^(http://www.|https://www.|ftp://www.|www.|http://|https://){1}([0-9A-Za-z]+.)").test(a)},insertImage:function(b,c){if(a("#"+b).length){var d=new plupload.Uploader({runtimes:"html5,html4",browse\_button:b,container:"wpuf-insert-image-container",multipart:!0,multipart\_params:{action:"wpuf\_insert\_image",form\_id:a("#"+b).data("form\_id")},multiple\_queues:!1,multi\_selection:!1,urlstream\_upload:!0,file\_data\_name:"wpuf\_file",max\_file\_size:wpuf\_frontend\_upload.max\_filesize,url:wpuf\_frontend\_upload.plupload.url,flash\_swf\_url:wpuf\_frontend\_upload.flash\_swf\_url,filters:[{title:"Allowed Files",extensions:"jpg,jpeg,gif,png,bmp"}]});d.bind("Init",function(a,b){}),d.bind("FilesAdded",function(b,c){var d=a("#wpuf-insert-image-container");a.each(c,function(a,b){d.append('<div class="upload-item" id="'+b.id+'"><div class="progress progress-striped active"><div class="bar"></div></div></div>')}),b.refresh(),b.start()}),d.bind("QueueChanged",function(a){d.start()}),d.bind("UploadProgress",function(b,c){var d=a("#"+c.id);a(".bar",d).css({width:c.percent+"%"}),a(".percent",d).html(c.percent+"%")}),d.bind("Error",function(a,b){alert("Error #"+b.code+": "+b.message)}),d.bind("FileUploaded",function(b,d,e){if(a("#"+d.id).remove(),"error"!==e.response){if("undefined"!=typeof tinyMCE)if("function"!=typeof tinyMCE.execInstanceCommand){var f=tinyMCE.get("post\_content\_"+c);null!==f&&f.insertContent(e.response)}else tinyMCE.execInstanceCommand("post\_content\_"+c,"mceInsertContent",!1,e.response);var g=a("#post\_content\_"+c);g.val(g.val()+e.response)}else alert("Something went wrong")}),d.init()}},deleteAvatar:function(b){b.preventDefault(),confirm(a(this).data("confirm"))&&a.post(wpuf\_frontend.ajaxurl,{action:"wpuf\_delete\_avatar",\_wpnonce:wpuf\_frontend.nonce},function(){a(b.target).parent().remove(),a("[id^=wpuf-avatar]").css("display","")})},editorLimit:{bind:function(b,c,d,e,f){"no"===d?(a("textarea#"+c).keydown(function(a){WP\_User\_Frontend.editorLimit.textLimit.call(this,a,b,e,f)}),a("input#"+c).keydown(function(a){WP\_User\_Frontend.editorLimit.textLimit.call(this,a,b,e,f)}),a("textarea#"+c).on("paste",function(c){var d=a(this);setTimeout(function(){WP\_User\_Frontend.editorLimit.textLimit.call(d,c,b,e,f)},100)}),a("input#"+c).on("paste",function(c){var d=a(this);setTimeout(function(){WP\_User\_Frontend.editorLimit.textLimit.call(d,c,b,e,f)},100)})):setTimeout(function(){tinyMCE.get(c).onKeyDown.add(function(a,c){WP\_User\_Frontend.editorLimit.tinymce.onKeyDown(a,c,b,e,f)}),tinyMCE.get(c).onPaste.add(function(a,c){setTimeout(function(){WP\_User\_Frontend.editorLimit.tinymce.onPaste(a,c,b,e,f)},100)})},1e3)},tinymce:{getStats:function(a){var b=a.getBody(),c=tinymce.trim(b.innerText||b.textContent);return{chars:c.length,words:c.split(/[\w\u2019\'-]+/).length}},onKeyDown:function(b,c,d,e,f){field=a(".post\_content");var g=WP\_User\_Frontend.editorLimit.tinymce.getStats(b).chars+1;"word"===e&&(g=WP\_User\_Frontend.editorLimit.tinymce.getStats(b).words),d&&g>d&&"max"===f?(WP\_User\_Frontend.editorLimit.blockTyping(c),WP\_User\_Frontend.markError(field,"limit"),jQuery(".mce-path-item.mce-last",b.container).html(wpuf\_frontend["word\_"+f]+g+"/"+d)):d&&g<d&&"min"===f?(WP\_User\_Frontend.markError(field,"limit"),jQuery(".mce-path-item.mce-last",b.container).html(wpuf\_frontend["word\_"+f]+g+"/"+d)):(field.removeClass("has-error"),jQuery(".mce-path-item.mce-last",b.container).html(""))},onPaste:function(a,b,c){var d=a.getContent().split(" ").slice(0,c).join(" ");a.setContent(d),WP\_User\_Frontend.editorLimit.make\_media\_embed\_code(d,a)}},textLimit:function(b,c,d,e){var f=a(this),g=f.val().length+1;"word"===d&&(g=f.val().split(" ").length),c&&g>c&&"max"===e?(WP\_User\_Frontend.content\_limit\_message(f,d,e,c),WP\_User\_Frontend.editorLimit.blockTyping(b)):c&&g<c&&"min"===e?WP\_User\_Frontend.content\_limit\_message(f,d,e,c):(f.closest("li").removeClass("has-error"),f.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html("")),"paste"===b.type&&(f.val(content.substring(0,c)),"word"===d&&f.val(content.slice(0,c).join(" ")))},blockTyping:function(b){-1!==a.inArray(b.keyCode,[46,8,9,27,13,110,190,189])||65==b.keyCode&&!0===b.ctrlKey||b.keyCode>=35&&b.keyCode<=40||(b.preventDefault(),b.stopPropagation())},make\_media\_embed\_code:function(b,c){a.post(ajaxurl,{action:"make\_media\_embed\_code",content:b},function(a){c.setContent(c.getContent()+c.setContent(a))})}},doUncheckRadioBtn:function(a){a.checked=!1},content\_limit\_message:function(a,b,c,d){WP\_User\_Frontend.markError(a,"limit"),"word"===b&&(limit\_message=wpuf\_frontend["word\_"+c]+d),"character"===b&&(limit\_message=wpuf\_frontend["char\_"+c]+d),a.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html(limit\_message)}},a(function(){if(WP\_User\_Frontend.init(),a("ul.wpuf-payment-gateways").on("click","input[type=radio]",function(b){a(".wpuf-payment-instruction").slideUp(250),a(this).parents("li").find(".wpuf-payment-instruction").slideDown(250)}),a("ul.wpuf-payment-gateways li").find("input[type=radio]").is(":checked")){a("ul.wpuf-payment-gateways li").find("input[type=radio]:checked").parents("li").find(".wpuf-payment-instruction").slideDown(250)}else a("ul.wpuf-payment-gateways li").first().find("input[type=radio]").click()}),a(function(){a('input[name="first\_name"], input[name="last\_name"]').on("change keyup",function(){var b,c=a.makeArray(a('input[name="first\_name"], input[name="last\_name"]').map(function(){if(b=a(this).val())return b})).join(" ");a('input[name="display\_name"]').val(c)})}),a(function(a){a('.wpuf-form-add input[name="dokan\_store\_name"]').on("focusout",function(){var b=a(this).val().toLowerCase().replace(/-+/g,"").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");a('input[name="shopurl"]').val(b),a("#url-alart").text(b),a('input[name="shopurl"]').focus()}),a('.wpuf-form-add input[name="shopurl"]').keydown(function(b){a(this).val();-1!==a.inArray(b.keyCode,[46,8,9,27,13,91,109,110,173,189,190])||65==b.keyCode&&!0===b.ctrlKey||b.keyCode>=35&&b.keyCode<=39||(b.shiftKey||(b.keyCode<65||b.keyCode>90)&&(b.keyCode<48||b.keyCode>57))&&(b.keyCode<96||b.keyCode>105)&&b.preventDefault()}),a('.wpuf-form-add input[name="shopurl"]').keyup(function(b){a("#url-alart").text(a(this).val())}),a('.wpuf-form-add input[name="shopurl"]').on("focusout",function(){var b=a(this),c={action:"shop\_url",url\_slug:b.val(),\_nonce:dokan.nonce};""!==b.val()&&a.post(dokan.ajaxurl,c,function(b){0==b?(a("#url-alart").removeClass("text-success").addClass("text-danger"),a("#url-alart-mgs").removeClass("text-success").addClass("text-danger").text(dokan.seller.notAvailable)):(a("#url-alart").removeClass("text-danger").addClass("text-success"),a("#url-alart-mgs").removeClass("text-danger").addClass("text-success").text(dokan.seller.available))})}),a(".wpuf-form-add #wpuf-map-add-location").attr("name","find\_address")})}(jQuery,window); |
  |  | 1 | !function(a,b){a.fn.listautowidth=function(){return this.each(function(){var b=a(this).width(),c=b/a(this).children("li").length;a(this).children("li").each(function(){var b=a(this).outerWidth(!0)-a(this).width();a(this).width(c-b)})})},b.WP\_User\_Frontend={init:function(){this.enableMultistep(this),a(".wpuf-form").on("click","img.wpuf-clone-field",this.cloneField),a(".wpuf-form").on("click","img.wpuf-remove-field",this.removeField),a(".wpuf-form").on("click","a.wpuf-delete-avatar",this.deleteAvatar),a(".wpuf-form").on("click","a#wpuf-post-draft",this.draftPost),a(".wpuf-form").on("click","button#wpuf-account-update-profile",this.account\_update\_profile),a(".wpuf-form-add").on("submit",this.formSubmit),a("form#post").on("submit",this.adminPostSubmit),b.matchMedia("(max-width: 600px)").matches&&(a("table.items-table tr td .post-edit-icon").click(function(b){b.preventDefault(),a(this).parents("tr").find(".data-column").toggleClass("flex-column"),a(this).toggleClass("toggle-icon")}),a(".wpuf-dashboard-navigation ul li:first-child").after().click(function(b){b.preventDefault(),a(".wpuf-dashboard-navigation ul li").not(":first").toggle()})),a(".wpuf-form").on("step-change-fieldset",function(a,b,c){if(wpuf\_plupload\_items.length)for(var d=wpuf\_plupload\_items.length-1;d>=0;d--)wpuf\_plupload\_items[d].refresh();if(wpuf\_map\_items.length)for(var d=wpuf\_map\_items.length-1;d>=0;d--)google.maps.event.trigger(wpuf\_map\_items[d].map,"resize"),wpuf\_map\_items[d].map.setCenter(wpuf\_map\_items[d].center)}),this.ajaxCategory(),a(':submit[name="wpuf\_user\_subscription\_cancel"]').click(function(b){b.preventDefault(),swal({text:wpuf\_frontend.cancelSubMsg,type:"warning",showCancelButton:!0,confirmButtonColor:"#d54e21",confirmButtonText:wpuf\_frontend.delete\_it,cancelButtonText:wpuf\_frontend.cancel\_it,confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger"}).then(function(b){if(!b)return!1;a("#wpuf\_cancel\_subscription").submit()})}),this.warningOnExit()},warningOnExit:function(){a('input[name="submit"], #wpuf-post-draft').on("click",function(){b.onbeforeunload=null}),a(".wpuf-form-add").on("change",function(){a(".wpuf-form-add input, .wpuf-form-add select, .wpuf-form-add textarea").each(function(c){"hidden"===a(this).attr("type")&&"submit"===a(this).attr("type")&&-1===a(this).val()||(b.onbeforeunload=function(){return"you have changes"})})})},check\_pass\_strength:function(){var b=a("#pass1").val();if(a("#pass-strength-result").show(),a("#pass-strength-result").removeClass("short bad good strong"),!b)return a("#pass-strength-result").html("&nbsp;"),void a("#pass-strength-result").hide();if(void 0!==wp.passwordStrength)switch(wp.passwordStrength.meter(b,wp.passwordStrength.userInputBlacklist(),b)){case 2:a("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:a("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:a("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:a("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:a("#pass-strength-result").addClass("short").html(pwsL10n.short)}},enableMultistep:function(c){var d=this,e=0,f=a(':hidden[name="wpuf\_multistep\_type"]').val();if(null!=f){if(a("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-prev-btn").first().remove(),a("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-next-btn").last().remove(),a(".wpuf-form fieldset").removeClass("field-active").first().addClass("field-active"),"progressive"==f&&0!=a(".wpuf-form .wpuf-multistep-fieldset").length){a("fieldset.wpuf-multistep-fieldset legend").first();a(".wpuf-multistep-progressbar").html('<div class="wpuf-progress-percentage"></div>');var g=a(".wpuf-multistep-progressbar"),h=a(".wpuf-progress-percentage");a(".wpuf-multistep-progressbar").progressbar({change:function(){h.text(g.progressbar("value")+"%")}}),a(".wpuf-multistep-fieldset legend").hide()}else a(".wpuf-form").each(function(){var b=a(this),c=a(".wpuf-multistep-progressbar",b),d="";c.addClass("wizard-steps"),d+='<ul class="wpuf-step-wizard">',a(".wpuf-multistep-fieldset",this).each(function(){d+="<li>"+a.trim(a("legend",this).text())+"</li>",a("legend",this).hide()}),d+="</ul>",c.append(d),a(".wpuf-step-wizard li",c).first().addClass("active-step"),a(".wpuf-step-wizard",c).listautowidth()});this.change\_fieldset(e,f),a("fieldset .wpuf-multistep-prev-btn, fieldset .wpuf-multistep-next-btn").click(function(g){if(a(this).hasClass("wpuf-multistep-next-btn")){0!=d.formStepCheck("",a(this).closest("fieldset"))&&c.change\_fieldset(++e,f)}else a(this).hasClass("wpuf-multistep-prev-btn")&&c.change\_fieldset(--e,f);var h=a("form.wpuf-form-add"),i=h.offset().top;return b.scrollTo({top:i-32,behavior:"smooth"}),!1})}},change\_fieldset:function(b,c){var d=a("fieldset.wpuf-multistep-fieldset").eq(b);a("fieldset.wpuf-multistep-fieldset").removeClass("field-active").eq(b).addClass("field-active"),a(".wpuf-step-wizard li").each(function(){a(this).index()<=b?"step\_by\_step"==c?a(this).addClass("passed-wpuf-ms-bar"):a(".wpuf-ps-bar",this).addClass("passed-wpuf-ms-bar"):"step\_by\_step"==c?a(this).removeClass("passed-wpuf-ms-bar"):a(".wpuf-ps-bar",this).removeClass("passed-wpuf-ms-bar")}),a(".wpuf-step-wizard li").removeClass("wpuf-ms-bar-active active-step completed-step"),a(".passed-wpuf-ms-bar").addClass("completed-step").last().addClass("wpuf-ms-bar-active"),a(".wpuf-ms-bar-active").addClass("active-step");var e=a("fieldset.wpuf-multistep-fieldset").eq(b).find("legend").text();if(e=a.trim(e),"progressive"==c&&0!=a(".wpuf-form .wpuf-multistep-fieldset").length){var f=100\*(b+1)/a("fieldset.wpuf-multistep-fieldset").length,f=Number(f.toFixed(2));a(".wpuf-multistep-progressbar").progressbar({value:f}),a(".wpuf-progress-percentage").text(e+" ("+f+"%)")}a(".wpuf-form").trigger("step-change-fieldset",[b,d])},ajaxCategory:function(){a(".category-wrap").on("change",".cat-ajax",function(){var b=a(this).data("form-id");currentLevel=parseInt(a(this).parent().attr("level")),WP\_User\_Frontend.getChildCats(a(this),currentLevel+1,"category",b)})},getChildCats:function(b,c,d,e){var f=a(b).val(),g="wpuf-category-dropdown-lvl-"+c,d=void 0!==d?d:"category",h=a(b).siblings("span").data("taxonomy");a.ajax({type:"post",url:wpuf\_frontend.ajaxurl,data:{action:"wpuf\_get\_child\_cat",catID:f,nonce:wpuf\_frontend.nonce,field\_attr:h,form\_id:e},beforeSend:function(){a(b).parent().parent().next(".loading").addClass("wpuf-loading")},complete:function(){a(b).parent().parent().next(".loading").removeClass("wpuf-loading")},success:function(e){a(b).parent().nextAll().each(function(){a(this).remove()}),""!=e&&(a(b).parent().addClass("hasChild").parent().append('<div id="'+g+'" level="'+c+'"></div>'),b.parent().parent().find("#"+g).html(e).slideDown("fast")),a(document).trigger("wpuf-ajax-fetched-child-categories",g,c,d)}})},cloneField:function(b){b.preventDefault();var c=a(this).closest("tr"),d=c.clone();d.find("input").val(""),d.find(":checked").attr("checked",""),c.after(d)},removeField:function(){var b=a(this).closest("tr");b.siblings().andSelf().length>1&&b.remove()},adminPostSubmit:function(b){b.preventDefault();var c=a(this);if(WP\_User\_Frontend.validateForm(c))return!0},draftPost:function(b){b.preventDefault();var c=a(this),d=a(this).closest("form"),e=d.serialize()+"&action=wpuf\_draft\_post",f=d.find('input[type="hidden"][name="post\_id"]').val(),g=[];a(".wpuf-rich-validation").each(function(b,c){var c=a(c),d=c.data("id"),e=c.data("name"),f=a.trim(tinyMCE.get(d).getContent());g.push(e+"="+encodeURIComponent(f))}),e=e+"&"+g.join("&"),c.after(' <span class="wpuf-loading"></span>'),a.post(wpuf\_frontend.ajaxurl,e,function(b){if(void 0===f){var e='<input type="hidden" name="post\_id" value="'+b.post\_id+'">';e+='<input type="hidden" name="post\_date" value="'+b.date+'">',e+='<input type="hidden" name="post\_author" value="'+b.post\_author+'">',e+='<input type="hidden" name="comment\_status" value="'+b.comment\_status+'">',d.append(e)}c.next("span.wpuf-loading").remove(),c.after('<span class="wpuf-draft-saved">&nbsp; Post Saved</span>'),a(".wpuf-draft-saved").delay(2500).fadeOut("fast",function(){a(this).remove()})})},account\_update\_profile:function(b){b.preventDefault();var c=a(this).closest("form");a.post(wpuf\_frontend.ajaxurl,c.serialize(),function(a){a.success?(c.find(".wpuf-error").hide(),c.find(".wpuf-success").show()):(c.find(".wpuf-success").hide(),c.find(".wpuf-error").show(),c.find(".wpuf-error").text(a.data))})},formStepCheck:function(a,b){var c=b,d=(c.find("input[type=submit]"),WP\_User\_Frontend.validateForm(c));return 0==d&&WP\_User\_Frontend.addErrorNotice(self,"bottom"),d},formSubmit:function(c){c.preventDefault();var d=a(this),e=d.find("input[type=submit]");form\_data=WP\_User\_Frontend.validateForm(d),form\_data&&(d.find("li.wpuf-submit").append('<span class="wpuf-loading"></span>'),e.attr("disabled","disabled").addClass("button-primary-disabled"),a.post(wpuf\_frontend.ajaxurl,form\_data,function(c){if(c.success)a("body").trigger("wpuf:postform:success",c),1==c.show\_message?(d.before('<div class="wpuf-success">'+c.message+"</div>"),d.slideUp("fast",function(){d.remove()}),a("html, body").animate({scrollTop:a(".wpuf-success").offset().top-100},"fast")):b.location=c.redirect\_to;else{if(void 0!==c.type&&"login"===c.type)return void(confirm(c.error)?b.location=c.redirect\_to:(e.removeAttr("disabled"),e.removeClass("button-primary-disabled"),d.find("span.wpuf-loading").remove()));d.find(".g-recaptcha").length>0&&grecaptcha.reset(),swal({html:c.error,type:"warning",showCancelButton:!1,confirmButtonColor:"#d54e21",confirmButtonText:"OK",cancelButtonClass:"btn btn-danger"}),e.removeAttr("disabled")}e.removeClass("button-primary-disabled"),d.find("span.wpuf-loading").remove()}))},validateForm:function(b){var c=!1,d="";WP\_User\_Frontend.removeErrors(b),WP\_User\_Frontend.removeErrorNotice(b),b.find('[data-required="yes"]:visible').each(function(b,e){var f=a(e).data("type"),g="";switch(f){case"rich":var h=a(e).data("id");""===(g=a.trim(tinyMCE.get(h).getContent()))&&(c=!0,WP\_User\_Frontend.markError(e));break;case"textarea":case"text":""===(g=a.trim(a(e).val()))&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"password":case"confirm\_password":var i=a(e).data("repeat");if(g=a.trim(a(e).val()),""===g&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d)),i){var j=a('[data-type="confirm\_password"]').eq(0);j.val()!=g&&(c=!0,d="mismatch",WP\_User\_Frontend.markError(j,d))}break;case"select":(g=a(e).val())&&"-1"!==g||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"multiselect":null!==(g=a(e).val())&&0!==g.length||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"tax-checkbox":var k=a(e).children().find("input:checked").length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"radio":var k=a(e).find("input:checked").length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"file":var k=a(e).find("ul").children().length;k||(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"email":var g=a(e).val();""!==g?WP\_User\_Frontend.isValidEmail(g)||(c=!0,d="validation",WP\_User\_Frontend.markError(e,d)):""===g&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d));break;case"url":var g=a(e).val();""!==g&&(WP\_User\_Frontend.isValidURL(g)||(c=!0,d="validation",WP\_User\_Frontend.markError(e,d)))}});var e=b.find('[data-required="yes"]').parents(".wpuf-form-google-map-container");if(a.each(e,function(b,e){""==a(e).val()&&(c=!0,d="required",WP\_User\_Frontend.markError(e,d))}),c)return WP\_User\_Frontend.addErrorNotice(b,"end"),!1;var f=b.serialize(),g=[];return a(".wpuf-rich-validation",b).each(function(b,c){var c=a(c),d=c.data("id"),e=c.data("name"),f=a.trim(tinyMCE.get(d).getContent());g.push(e+"="+encodeURIComponent(f))}),f=f+"&"+g.join("&")},addErrorNotice:function(b,c){"bottom"==c?a(".wpuf-multistep-fieldset:visible").append('<div class="wpuf-errors">'+wpuf\_frontend.error\_message+"</div>"):a(b).find("li.wpuf-submit").append('<div class="wpuf-errors">'+wpuf\_frontend.error\_message+"</div>")},removeErrorNotice:function(b){a(b).find(".wpuf-errors").remove()},markError:function(b,c){if(a(b).closest("div").addClass("has-error"),c){var d="",e=a(b).data("label");switch(d=e||a(b).closest("li").data("label"),c){case"required":case"mismatch":case"validation":d=d+" "+error\_str\_obj[c];break;case"limit":d=""}a(b).siblings(".wpuf-error-msg").remove(),"DIV"===a(b).prev().prop("nodeName")?a(b).append('<div class="wpuf-error-msg">'+d+"</div>"):a(b).after('<div class="wpuf-error-msg">'+d+"</div>")}a(b).focus()},removeErrors:function(b){a(b).find(".has-error").removeClass("has-error"),a(".wpuf-error-msg").remove()},isValidEmail:function(a){return new RegExp(/^((([a-z]|\d|[!#\$%&'\\*\+\-\/=\?\^\_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\\*\+\-\/=\?\^\_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)\*)|((\x22)((((\x20|\x09)\*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))\*(((\x20|\x09)\*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|\_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|\_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(a)},isValidURL:function(a){return new RegExp("^(http://www.|https://www.|ftp://www.|www.|http://|https://){1}([0-9A-Za-z]+.)").test(a)},insertImage:function(b,c){if(a("#"+b).length){var d=new plupload.Uploader({runtimes:"html5,html4",browse\_button:b,container:"wpuf-insert-image-container",multipart:!0,multipart\_params:{action:"wpuf\_insert\_image",form\_id:a("#"+b).data("form\_id")},multiple\_queues:!1,multi\_selection:!1,urlstream\_upload:!0,file\_data\_name:"wpuf\_file",max\_file\_size:wpuf\_frontend\_upload.max\_filesize,url:wpuf\_frontend\_upload.plupload.url,flash\_swf\_url:wpuf\_frontend\_upload.flash\_swf\_url,filters:[{title:"Allowed Files",extensions:"jpg,jpeg,gif,png,bmp"}]});d.bind("Init",function(a,b){}),d.bind("FilesAdded",function(b,c){var d=a("#wpuf-insert-image-container");a.each(c,function(a,b){d.append('<div class="upload-item" id="'+b.id+'"><div class="progress progress-striped active"><div class="bar"></div></div></div>')}),b.refresh(),b.start()}),d.bind("QueueChanged",function(a){d.start()}),d.bind("UploadProgress",function(b,c){var d=a("#"+c.id);a(".bar",d).css({width:c.percent+"%"}),a(".percent",d).html(c.percent+"%")}),d.bind("Error",function(a,b){alert("Error #"+b.code+": "+b.message)}),d.bind("FileUploaded",function(b,d,e){if(a("#"+d.id).remove(),"error"!==e.response){if("undefined"!=typeof tinyMCE)if("function"!=typeof tinyMCE.execInstanceCommand){var f=tinyMCE.get("post\_content\_"+c);null!==f&&f.insertContent(e.response)}else tinyMCE.execInstanceCommand("post\_content\_"+c,"mceInsertContent",!1,e.response);var g=a("#post\_content\_"+c);g.val(g.val()+e.response)}else alert("Something went wrong")}),d.init()}},deleteAvatar:function(b){b.preventDefault(),confirm(a(this).data("confirm"))&&a.post(wpuf\_frontend.ajaxurl,{action:"wpuf\_delete\_avatar",\_wpnonce:wpuf\_frontend.nonce},function(){a(b.target).parent().remove(),a("[id^=wpuf-avatar]").css("display","")})},editorLimit:{bind:function(b,c,d,e,f){"no"===d?(a("textarea#"+c).keydown(function(a){WP\_User\_Frontend.editorLimit.textLimit.call(this,a,b,e,f)}),a("input#"+c).keydown(function(a){WP\_User\_Frontend.editorLimit.textLimit.call(this,a,b,e,f)}),a("textarea#"+c).on("paste",function(c){var d=a(this);setTimeout(function(){WP\_User\_Frontend.editorLimit.textLimit.call(d,c,b,e,f)},100)}),a("input#"+c).on("paste",function(c){var d=a(this);setTimeout(function(){WP\_User\_Frontend.editorLimit.textLimit.call(d,c,b,e,f)},100)})):setTimeout(function(){tinyMCE.get(c).onKeyDown.add(function(a,c){WP\_User\_Frontend.editorLimit.tinymce.onKeyDown(a,c,b,e,f)}),tinyMCE.get(c).onPaste.add(function(a,c){setTimeout(function(){WP\_User\_Frontend.editorLimit.tinymce.onPaste(a,c,b,e,f)},100)})},1e3)},tinymce:{getStats:function(a){var b=a.getBody(),c=tinymce.trim(b.innerText||b.textContent);return{chars:c.length,words:c.split(/[\w\u2019\'-]+/).length}},onKeyDown:function(b,c,d,e,f){field=a(".post\_content");var g=WP\_User\_Frontend.editorLimit.tinymce.getStats(b).chars+1;"word"===e&&(g=WP\_User\_Frontend.editorLimit.tinymce.getStats(b).words),d&&g>d&&"max"===f?(WP\_User\_Frontend.editorLimit.blockTyping(c),WP\_User\_Frontend.markError(field,"limit"),jQuery(".mce-path-item.mce-last",b.container).html(wpuf\_frontend["word\_"+f]+g+"/"+d)):d&&g<d&&"min"===f?(WP\_User\_Frontend.markError(field,"limit"),jQuery(".mce-path-item.mce-last",b.container).html(wpuf\_frontend["word\_"+f]+g+"/"+d)):(field.removeClass("has-error"),jQuery(".mce-path-item.mce-last",b.container).html(""))},onPaste:function(a,b,c){var d=a.getContent().split(" ").slice(0,c).join(" ");a.setContent(d),WP\_User\_Frontend.editorLimit.make\_media\_embed\_code(d,a)}},textLimit:function(b,c,d,e){var f=a(this),g=f.val().length+1;"word"===d&&(g=f.val().split(" ").length),c&&g>c&&"max"===e?(WP\_User\_Frontend.content\_limit\_message(f,d,e,c),WP\_User\_Frontend.editorLimit.blockTyping(b)):c&&g<c&&"min"===e?WP\_User\_Frontend.content\_limit\_message(f,d,e,c):(f.closest("li").removeClass("has-error"),f.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html("")),"paste"===b.type&&(f.val(content.substring(0,c)),"word"===d&&f.val(content.slice(0,c).join(" ")))},blockTyping:function(b){-1!==a.inArray(b.keyCode,[46,8,9,27,13,110,190,189])||65==b.keyCode&&!0===b.ctrlKey||b.keyCode>=35&&b.keyCode<=40||(b.preventDefault(),b.stopPropagation())},make\_media\_embed\_code:function(b,c){a.post(ajaxurl,{action:"make\_media\_embed\_code",content:b},function(a){c.setContent(c.getContent()+c.setContent(a))})}},doUncheckRadioBtn:function(a){a.checked=!1},content\_limit\_message:function(a,b,c,d){WP\_User\_Frontend.markError(a,"limit"),"word"===b&&(limit\_message=wpuf\_frontend["word\_"+c]+d),"character"===b&&(limit\_message=wpuf\_frontend["char\_"+c]+d),a.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html(limit\_message)}},a(function(){if(WP\_User\_Frontend.init(),a("ul.wpuf-payment-gateways").on("click","input[type=radio]",function(b){a(".wpuf-payment-instruction").slideUp(250),a(this).parents("li").find(".wpuf-payment-instruction").slideDown(250)}),a("ul.wpuf-payment-gateways li").find("input[type=radio]").is(":checked")){a("ul.wpuf-payment-gateways li").find("input[type=radio]:checked").parents("li").find(".wpuf-payment-instruction").slideDown(250)}else a("ul.wpuf-payment-gateways li").first().find("input[type=radio]").click()}),a(function(){a('input[name="first\_name"], input[name="last\_name"]').on("change keyup",function(){var b,c=a.makeArray(a('input[name="first\_name"], input[name="last\_name"]').map(function(){if(b=a(this).val())return b})).join(" ");a('input[name="display\_name"]').val(c)})}),a(function(a){a('.wpuf-form-add input[name="dokan\_store\_name"]').on("focusout",function(){var b=a(this).val().toLowerCase().replace(/-+/g,"").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");a('input[name="shopurl"]').val(b),a("#url-alart").text(b),a('input[name="shopurl"]').focus()}),a('.wpuf-form-add input[name="shopurl"]').keydown(function(b){a(this).val();-1!==a.inArray(b.keyCode,[46,8,9,27,13,91,109,110,173,189,190])||65==b.keyCode&&!0===b.ctrlKey||b.keyCode>=35&&b.keyCode<=39||(b.shiftKey||(b.keyCode<65||b.keyCode>90)&&(b.keyCode<48||b.keyCode>57))&&(b.keyCode<96||b.keyCode>105)&&b.preventDefault()}),a('.wpuf-form-add input[name="shopurl"]').keyup(function(b){a("#url-alart").text(a(this).val())}),a('.wpuf-form-add input[name="shopurl"]').on("focusout",function(){var b=a(this),c={action:"shop\_url",url\_slug:b.val(),\_nonce:dokan.nonce};""!==b.val()&&a.post(dokan.ajaxurl,c,function(b){0==b?(a("#url-alart").removeClass("text-success").addClass("text-danger"),a("#url-alart-mgs").removeClass("text-success").addClass("text-danger").text(dokan.seller.notAvailable)):(a("#url-alart").removeClass("text-danger").addClass("text-success"),a("#url-alart-mgs").removeClass("text-danger").addClass("text-success").text(dokan.seller.available))})}),a(".wpuf-form-add #wpuf-map-add-location").attr("name","find\_address")})}(jQuery,window); |
* ## [wp-user-frontend/trunk/assets/js/wpuf-form-builder.js](/changeset/2648715/wp-user-frontend/trunk/assets/js/wpuf-form-builder.js "Show the changeset 2648715 restricted to wp-user-frontend/trunk/assets/js/wpuf-form-builder.js")

  | [r2626578](/browser/wp-user-frontend/trunk/assets/js/wpuf-form-builder.js?rev=2626578#L144 "Show revision 2626578 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/assets/js/wpuf-form-builder.js?rev=2648715#L144 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 144 | 144 | // add new form field element |
  | 145 | 145 | add\_form\_field\_element: function (state, payload) { |
  |  | 146 |  |
  | 146 | 147 | state.form\_fields.splice(payload.toIndex, 0, payload.field); |
  | 147 | 148 | var sprintf = wp.i18n.sprintf; |
  | 148 | 149 | var \_\_ = wp.i18n.\_\_; |
  | 149 |  | // bring newly added element into viewport |
  |  | 150 | // bring newly added element into viewport, do not show for reg form |
  |  | 151 | if ( window.location.search.substring(1).split('&').includes('page=wpuf-profile-forms') ) return; |
  | 150 | 152 | Vue.nextTick(function () { |
  | 151 | 153 | var el = $('#form-preview-stage .wpuf-form .field-items').eq(payload.toIndex); |
  | […](/browser/wp-user-frontend/trunk/assets/js/wpuf-form-builder.js?rev=2626578#L538) | […](/browser/wp-user-frontend/trunk/assets/js/wpuf-form-builder.js?rev=2648715#L540) |  |
  | 538 | 540 | var form\_id = $('#wpuf-form-builder [name="wpuf\_form\_id"]').val(); |
  | 539 | 541 |  |
  | 540 |  | if ( typeof tinyMCE !== 'undefined' ) { |
  |  | 542 | if ( typeof tinyMCE !== 'undefined' && window.location.search.substring(1).split('&').includes('page=wpuf-profile-forms') ) { |
  | 541 | 543 | $('textarea[name="wpuf\_settings[notification][verification\_body]"]').val(tinyMCE.get('wpuf\_verification\_body\_' + form\_id).getContent()); |
  | 542 | 544 | $('textarea[name="wpuf\_settings[notification][welcome\_email\_body]"]').val(tinyMCE.get('wpuf\_welcome\_email\_body\_' + form\_id).getContent()); |
* ## [wp-user-frontend/trunk/changelog.txt](/changeset/2648715/wp-user-frontend/trunk/changelog.txt "Show the changeset 2648715 restricted to wp-user-frontend/trunk/changelog.txt")

  | [r2631872](/browser/wp-user-frontend/trunk/changelog.txt?rev=2631872#L1 "Show revision 2631872 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/changelog.txt?rev=2648715#L1 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  |  | 1 | = v3.5.25 (18 Nov, 2021) = |
  |  | 2 |  |
  |  | 3 | \* Enhancement - Promotion notice enhanced through api |
  |  | 4 |  |
  | 1 | 5 | = v3.5.25 (18 Nov, 2021) = |
  | 2 | 6 |  |
* ## [wp-user-frontend/trunk/includes/class-gutenblock.php](/changeset/2648715/wp-user-frontend/trunk/includes/class-gutenblock.php "Show the changeset 2648715 restricted to wp-user-frontend/trunk/includes/class-gutenblock.php")

  | [r2227051](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2227051#L11 "Show revision 2227051 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2648715#L11 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 11 | 11 | public function \_\_construct() { |
  | 12 | 12 | //Enqueue the Dashicons script as they are not loading |
  | 13 |  | ~~//when wpuf\_form shortcode exists in admin pages.~~ |
  | 14 |  | ~~add\_action( 'admin\_enqueue\_scripts', [ $this, 'load\_dashicons' ] );~~ |
  | 15 | 13 | // wait for Gutenberg to enqueue it's block assets |
  | 16 | 14 | add\_action( 'enqueue\_block\_editor\_assets', [ $this, 'wpuf\_form\_block' ], 10 ); |
  | […](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2227051#L26) | […](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2648715#L24) |  |
  | 26 | 24 |  |
  | 27 | 25 | public function wpuf\_form\_block() { |
  |  | 26 | $this->load\_dashicons(); |
  |  | 27 |  |
  | 28 | 28 | $js\_dir  = WPUF\_ASSET\_URI . '/js/admin/'; |
  | 29 | 29 | $css\_dir = WPUF\_ASSET\_URI . '/css/admin/'; |
  | 30 | 30 |  |
  | 31 | 31 | // Once we have Gutenberg block javascript, we can enqueue our assets |
  | 32 |  | wp\_register\_script( |
  |  | 32 | wp\_register\_script( |
  | 33 | 33 | 'wpuf-forms-block', |
  | 34 | 34 | $js\_dir . 'gutenblock.js', |
  | […](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2227051#L36) | […](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2648715#L36) |  |
  | 36 | 36 | ); |
  | 37 | 37 |  |
  | 38 |  | wp\_register\_style( |
  |  | 38 | wp\_register\_style( |
  | 39 | 39 | 'wpuf-forms-block-style', |
  | 40 | 40 | $css\_dir . 'gutenblock.css', |
  | 41 | 41 | [ 'wp-edit-blocks' ] |
  | 42 | 42 | ); |
  | 43 |  | wp\_register\_style( |
  |  | 43 | wp\_register\_style( |
  | 44 | 44 | 'wpuf-forms-block-editor', |
  | 45 | 45 | $css\_dir . 'gutenblock-editor.css', |
  | […](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2227051#L107) | […](/browser/wp-user-frontend/trunk/includes/class-gutenblock.php?rev=2648715#L107) |  |
  | 107 | 107 |  |
  | 108 | 108 | // register our script to target the form iFrame in page builder |
  | 109 |  | wp\_register\_script( |
  |  | 109 | wp\_register\_script( |
  | 110 | 110 | 'wpuf-block-setup', |
  | 111 | 111 | $js\_dir . 'blockFrameSetup.js', |
* ## [wp-user-frontend/trunk/includes/class-list-table-subscribers.php](/changeset/2648715/wp-user-frontend/trunk/includes/class-list-table-subscribers.php "Show the changeset 2648715 restricted to wp-user-frontend/trunk/includes/class-list-table-subscribers.php")

  | [r2631872](/browser/wp-user-frontend/trunk/includes/class-list-table-subscribers.php?rev=2631872#L177 "Show revision 2631872 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/includes/class-list-table-subscribers.php?rev=2648715#L177 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 177 | 177 | $sql .= isset( $\_REQUEST['post\_ID'] ) ? ' WHERE subscribtion\_id = ' . intval( sanitize\_text\_field( wp\_unslash( $\_REQUEST['post\_ID'] ) ) ): ''; |
  | 178 | 178 |  |
  | 179 |  | $sql .= isset( $\_REQUEST['status'] ) ? ' AND subscribtion\_status = "' . sanitize\_~~text\_field~~( wp\_unslash( $\_REQUEST['status'] ) ) . '"' : ''; |
  |  | 179 | $sql .= isset( $\_REQUEST['status'] ) ? ' AND subscribtion\_status = "' . sanitize\_key( wp\_unslash( $\_REQUEST['status'] ) ) . '"' : ''; |
  | 180 | 180 |  |
  | 181 | 181 | $this->items  = $wpdb->get\_results( $sql, OBJECT ); |
* ## [wp-user-frontend/trunk/includes/fields/class-field-textarea.php](/changeset/2648715/wp-user-frontend/trunk/includes/fields/class-field-textarea.php "Show the changeset 2648715 restricted to wp-user-frontend/trunk/includes/fields/class-field-textarea.php")

  | [r2599944](/browser/wp-user-frontend/trunk/includes/fields/class-field-textarea.php?rev=2599944#L90 "Show revision 2599944 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/includes/fields/class-field-textarea.php?rev=2648715#L90 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 90 | 90 | $this->check\_content\_restriction\_func( |
  | 91 | 91 | $field\_settings['content\_restriction'], |
  | 92 |  | 'no', |
  |  | 92 | $field\_settings['rich'] ? 'yes' : 'no', |
  | 93 | 93 | $field\_settings['name'] . '\_' . $form\_id, |
  | 94 | 94 | $field\_settings['restriction\_type'], |
* ## [wp-user-frontend/trunk/readme.txt](/changeset/2648715/wp-user-frontend/trunk/readme.txt "Show the changeset 2648715 restricted to wp-user-frontend/trunk/readme.txt")

  | [r2631872](/browser/wp-user-frontend/trunk/readme.txt?rev=2631872#L4 "Show revision 2631872 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/readme.txt?rev=2648715#L4 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: Forms, registration, profile-builder, login, membership, frontend-post |
  | 5 | 5 | Requires at least: 4.0 |
  | 6 |  | Tested up to: 5.8.~~1~~ |
  |  | 6 | Tested up to: 5.8.2 |
  | 7 | 7 | Requires PHP: 5.6 |
  | 8 |  | Stable tag: 3.5.2~~5~~ |
  |  | 8 | Stable tag: 3.5.26 |
  | 9 | 9 | License: GPLv2 |
  | 10 | 10 | License URI: https://www.gnu.org/licenses/gpl-2.0.html |
* ## [wp-user-frontend/trunk/wpuf.php](/changeset/2648715/wp-user-frontend/trunk/wpuf.php "Show the changeset 2648715 restricted to wp-user-frontend/trunk/wpuf.php")

  | [r2631872](/browser/wp-user-frontend/trunk/wpuf.php?rev=2631872#L5 "Show revision 2631872 of this file in browser") | [r2648715](/browser/wp-user-frontend/trunk/wpuf.php?rev=2648715#L5 "Show revision 2648715 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Description: Create, edit, delete, manages your post, pages or custom post types from frontend. Create registration forms, frontend profile and more... |
  | 6 | 6 | Author: weDevs |
  | 7 |  | Version: 3.5.2~~5~~ |
  |  | 7 | Version: 3.5.26 |
  | 8 | 8 | Author URI: https://wedevs.com/?utm\_source=WPUF\_Author\_URI |
  | 9 | 9 | License: GPL2 or later |
  | […](/browser/wp-user-frontend/trunk/wpuf.php?rev=2631872#L13) | […](/browser/wp-user-frontend/trunk/wpuf.php?rev=2648715#L13) |  |
  | 13 | 13 | \*/ |
  | 14 | 14 |  |
  | 15 |  | define( 'WPUF\_VERSION', '3.5.2~~5~~' ); |
  |  | 15 | define( 'WPUF\_VERSION', '3.5.26' ); |
  | 16 | 16 | define( 'WPUF\_FILE', \_\_FILE\_\_ ); |
  | 17 | 17 | define( 'WPUF\_ROOT', \_\_DIR\_\_ ); |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2648715)
* [Zip Archive](?format=zip&new=2648715)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


