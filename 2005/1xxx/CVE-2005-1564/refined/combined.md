=== Content from www.bugzilla.org_81b9d365_20250124_154036.html ===

[![Bugzilla Logo](/assets/img/logo-header.svg)
Bugzilla](/)
Show Nav Menu

* [About](/about/ "Find out more about Bugzilla.")
  [Project](/about/ "Find out more about Bugzilla.")
  [Features](/about/features.html)
  [Who Uses Bugzilla?](/about/installation-list.html "Hundreds of companies and organizations trust Bugzilla.")
  [Meet the Team](/about/developers "Meet the Bugzilla team.")
  [Zarro Boogs Corporation](/about/zarroboogs.html "Find out about the company managing the Bugzilla Project.")
* [News](/blog/ "Get the low down on what's happening with the project.")
  [Blog](/blog/ "Bugzilla Blog")
  [Release Information](/releases/ "Information on current and previous releases.")
  [Security Advisories](/security/ "Important updates regarding Bugzilla security.")
  [Planet Bugzilla](http://planet.bugzilla.org "View the status of the Bugzilla project.")
* [Download](/download/ "Download Bugzilla")
* [Documentation](/docs/ "Bugzilla Documentation")
* [Support](/support/ "Find out where to get more information and help.")
* [Contribute](/contributing/ "Ways you can help Bugzilla")
  [How to?](/contributing/ "Ways you can help Bugzilla")
  [Report a Bug](/contributing/reporting_bugs "Let us know if there is an error in Bugzilla.")
  [Donate](/donate "Donate to Bugzilla, and see how your money is used.")
  [Wiki](https://wiki.mozilla.org/Bugzilla%3AHome "Collaboratively updated information about Bugzilla.")

Search bugzilla.org

1. [Security Advisories](/security/)
2. 2.16.8, 2.18, 2.19.2 Security Advisory

# 2.16.8, 2.18, 2.19.2 Security Advisory

Wednesday, May 11th, 2005
# 2.16.8, 2.18, 2.19.2 Security Advisory

May 11, 2005
```

Summary
=======

Bugzilla is a Web-based bug-tracking system, used by a large number of
software projects.

This advisory covers two security bugs that have recently been
discovered and fixed in the Bugzilla code:

+ In all versions of Bugzilla since at least 2.16, it is possible
  to guess the name of a hidden product and have Bugzilla confirm that
  you were correct.
+ In Bugzilla 2.18 and above, a user's username and password are
  sometimes exposed in the URL after generating a Report.

All Bugzilla installations are advised to upgrade to the latest stable
version of Bugzilla, 2.18.1.

Development snapshots of 2.19 and above are also vulnerable. If you are
using a development snapshot, you should obtain a newer one (2.19.3)
or use CVS to update or apply the patches from the specific bugs listed
below.

Vulnerability Details
=====================

Issue 1
-------
Class:       Information Leak
Versions:    2.10 through 2.18, 2.19.1, 2.19.2
Description: If a user correctly guesses the name of a product that
             should be invisible to them, they will be specifically
             informed that they do not have access to it, thus letting
             them know that the product exists.
             Also, users can enter bugs into products that are closed for
             bug entry, if they correctly guess the name of the product.
Reference:   https://bugzilla.mozilla.org/show_bug.cgi?id=287109

Issue 2
-------
Class:       User Password Embedded in URL
Versions:    2.17.1 through 2.18, 2.19.1, 2.19.2
Description: The user's password can be embedded as part of a report URL,
             and thus visible in the web server logs, if the user is
             prompted to log in while attempting to view a chart.
Reference:   https://bugzilla.mozilla.org/show_bug.cgi?id=287436

Vulnerability Solutions
=======================

The fixes for all of the security bugs mentioned in this advisory
are included in the 2.16.9, 2.18.1, and 2.19.3 releases.  Upgrading
to these releases will protect installations from possible exploits
of these issues.

Full release downloads, patches to upgrade Bugzilla from previous
versions, and CVS upgrade instructions are available at:
  https://www.bugzilla.org/download.html

Specific patches for each of the individual issues can be found on the
corresponding bug reports for each issue, at the URL given in the
reference for that issue in the list above.

Credits
=======

The Bugzilla team wish to thank the following people for their
assistance in locating, advising us of, and assisting us to fix
these situations:

Roman Pszonka
Gervase Markham
Frédéric Buclin
Myk Melez
Joel Peshkin
Marc Schumann

General information about the Bugzilla bug-tracking system can be found
at https://www.bugzilla.org/

Comments and follow-ups can be directed to the
netscape.public.mozilla.webtools newsgroup or the mozilla-webtools
mailing list; https://www.bugzilla.org/support/ has directions for
accessing these forums.

```

* [GitHub
  GitHub](https://github.com/bugzilla "GitHub")
* [X](https://x.com/%40bugzilla "X")
* [Mastodon
  Mastodon](https://techhub.social/%40bugzilla "Mastodon")
* [Bluesky](https://bsky.app/profile/bugzilla.org "Bluesky")
* [Facebook
  Facebook](https://www.facebook.com/BugzillaProject "Facebook")
* [LinkedIn
  LinkedIn](https://www.linkedin.com/company/bugzilla-project "LinkedIn")
* [IRC
  IRC on Libera.Chat](https://web.libera.chat/#/#bugzilla "IRC on Libera.Chat")
* [Discord
  Discord](https://discord.gg/ZhN6uBA "Discord")
* [Matrix
  Matrix](https://matrix.to/#/#bugzilla:mozilla.org "Matrix")
* [YouTube
  YouTube](https://www.youtube.com/%40bugzillaproject "YouTube")
* [Twitch
  Twitch](https://twitch.tv/bugzillaproject "Twitch")

---

Copyright © 1998-2024 bugzilla.org contributors
Creative Commons Attribution-ShareAlike 2.0[Creative CommonsAttributionShareAlike](https://creativecommons.org/licenses/by-sa/2.0/)



=== Content from bugzilla.mozilla.org_9b34c527_20250124_154038.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/287109)
* [XML](/show_bug.cgi?ctype=xml&id=287109)

Closed
[Bug 287109](/show_bug.cgi?id=287109)

Opened 20 years ago
Closed 20 years ago

# [SECURITY] Names of private products/components can be exposed on certain CGIs

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

[SECURITY] Names of private products/components can be exposed on certain CGIs

## Categories

### (Bugzilla :: Creating/Changing Bugs, defect, P1)

[Product:](/describecomponents.cgi?product=Bugzilla)

Bugzilla
▾

Bugzilla
The [Bugzilla](http://www.bugzilla.org) bug-tracking system.

**Note:** This is **not** the place to request configuration, permission, or account changes to this installation of Bugzilla (bugzilla.mozilla.org). File such changes under the appropriate component in the [**bugzilla.mozilla.org**](enter_bug.cgi?product=bugzilla.mozilla.org) product.
[See Open Bugs in This Product](/buglist.cgi?product=Bugzilla&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Bugzilla)
Watch This Product

[Component:](/describecomponents.cgi?product=Bugzilla&component=Creating%2FChanging%20Bugs#Creating%2FChanging%20Bugs)

Creating/Changing Bugs
▾

Bugzilla :: Creating/Changing Bugs
Creating, changing, and viewing bugs. `enter_bug.cgi, post_bug.cgi, show_bug.cgi, process_bug.cgi`
[See Open Bugs in This Component](/buglist.cgi?product=Bugzilla&component=Creating%2FChanging%20Bugs&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Bugzilla&component=Creating%2FChanging%20Bugs&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Bugzilla&component=Creating%2FChanging%20Bugs)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

2.16

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

major

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

Bugzilla 2.16

## People

### (Reporter: LpSolit, Assigned: LpSolit)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](extensions/Gravatar/web/default.jpg)  [LpSolit](/user_profile?user_id=120380)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/9df24a05a7e63cf07e49d30ddfeee31a?d=mm&size=40)  [default-qa](/user_profile?user_id=5086)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [LpSolit](/user_profile?user_id=120380)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

13 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[169459](/show_bug.cgi?id=169459 "RESOLVED FIXED - enter_bug.cgi should not lie saying: \"Derivatives\" is not a valid product."), [290249](/show_bug.cgi?id=290249 "RESOLVED FIXED - Security Advisory for 2.18.1, 2.19.3, and 2.16.9"), [294655](/show_bug.cgi?id=294655 "RESOLVED FIXED - It is not possible to enter a bug on many installations of Bugzilla 2.16.9")

Dependency [tree](/showdependencytree.cgi?id=287109&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=287109)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [justdave](/user_profile?user_id=10297) | [approval](#c50 "20 years ago") | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | approval | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | [blocking2.20](#a185_10297 "20 years ago") | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | blocking2.20 | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | [approval2.18](#c50 "20 years ago") | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | approval2.18 | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | [blocking2.18.1](#a185_10297 "20 years ago") | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | blocking2.18.1 | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | [approval2.16](#c50 "20 years ago") | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | approval2.16 | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | [blocking2.16.9](#a185_10297 "20 years ago") | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | blocking2.16.9 | + |
| --- | --- | --- |
|  | approval5.0 | ? |
| --- | --- | --- |
|  | approval5.2 | ? |
|  | approval6.0 | ? |
|  | blocking5.0.4.1 | ? |
|  | blocking5.2 | ? |
|  | blocking6.0 | ? |
|  | approval4.4 | ? |
|  | blocking4.4.14 | ? |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | documentation | ? + - |
|  | testcase |  | | |
|  | relnote |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files, 9 obsolete files)

| [fix CanEnterProduct(), trunk, v1](/attachment.cgi?id=179986)  [20 years ago](#c7)  [Frédéric Buclin](/user_profile?user_id=120380)   1.89 KB, patch | bugreport : [review+](#c8 "20 years ago")  myk : [review-](#c10 "20 years ago") | [Details](/attachment.cgi?id=179986&action=edit) | [Diff](/attachment.cgi?id=179986&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=179986) |
| --- | --- | --- |
| [fix CanEnterProduct(), trunk, v2](/attachment.cgi?id=181728)  [20 years ago](#c15)  [Frédéric Buclin](/user_profile?user_id=120380)   6.86 KB, patch | bugreport : [review+](#c17 "20 years ago")  myk : [review+](#c18 "20 years ago") | [Details](/attachment.cgi?id=181728&action=edit) | [Diff](/attachment.cgi?id=181728&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=181728) |
| [final fix for the trunk (error message updated), v2.1](/attachment.cgi?id=182035)  [20 years ago](#c20)  [Frédéric Buclin](/user_profile?user_id=120380)   6.81 KB, patch |  | [Details](/attachment.cgi?id=182035&action=edit) | [Diff](/attachment.cgi?id=182035&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182035) |
| [2.18 backport, v1](/attachment.cgi?id=182051)  [20 years ago](#c21)  [Frédéric Buclin](/user_profile?user_id=120380)   8.04 KB, patch |  | [Details](/attachment.cgi?id=182051&action=edit) | [Diff](/attachment.cgi?id=182051&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182051) |
| [2.16 backport, v1](/attachment.cgi?id=182062)  [20 years ago](#c23)  [Frédéric Buclin](/user_profile?user_id=120380)   4.61 KB, patch |  | [Details](/attachment.cgi?id=182062&action=edit) | [Diff](/attachment.cgi?id=182062&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182062) |
| [2.16 backport, v1.1](/attachment.cgi?id=182063)  [20 years ago](#c25)  [Frédéric Buclin](/user_profile?user_id=120380)   4.63 KB, patch |  | [Details](/attachment.cgi?id=182063&action=edit) | [Diff](/attachment.cgi?id=182063&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182063) |
| [2.16 backport, v1.2](/attachment.cgi?id=182074)  [20 years ago](#c27)  [Nick Barnes](/user_profile?user_id=99212)   5.28 KB, patch |  | [Details](/attachment.cgi?id=182074&action=edit) | [Diff](/attachment.cgi?id=182074&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182074) |
| [2.16 backport, v1.3](/attachment.cgi?id=182076)  [20 years ago](#c28)  [Nick Barnes](/user_profile?user_id=99212)   6.03 KB, patch |  | [Details](/attachment.cgi?id=182076&action=edit) | [Diff](/attachment.cgi?id=182076&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182076) |
| [patch for the trunk, v3](/attachment.cgi?id=182124)  [20 years ago](#c32)  [Frédéric Buclin](/user_profile?user_id=120380)   9.48 KB, patch | bugreport : [review+](#c35 "20 years ago")  myk : [review+](#c39 "20 years ago") | [Details](/attachment.cgi?id=182124&action=edit) | [Diff](/attachment.cgi?id=182124&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182124) |
| [2.18 backport, v2](/attachment.cgi?id=182735)  [20 years ago](#c40)  [Frédéric Buclin](/user_profile?user_id=120380)   9.83 KB, patch | myk : [review+](#c46 "20 years ago") | [Details](/attachment.cgi?id=182735&action=edit) | [Diff](/attachment.cgi?id=182735&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182735) |
| [2.16 backport, v2](/attachment.cgi?id=182741)  [20 years ago](#c41)  [Frédéric Buclin](/user_profile?user_id=120380)   6.06 KB, patch | mkanat : [review+](#c54 "20 years ago") | [Details](/attachment.cgi?id=182741&action=edit) | [Diff](/attachment.cgi?id=182741&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182741) |
| [test results for 2.18 and 2.16 v2 patches](/attachment.cgi?id=183124)  [20 years ago](#c44)  [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300)   4.80 KB, text/html |  | [Details](/attachment.cgi?id=183124&action=edit) |
| [updated test results for 2.18 and 2.16 patches](/attachment.cgi?id=183125)  [20 years ago](#c45)  [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300)   5.00 KB, text/html |  | [Details](/attachment.cgi?id=183125&action=edit) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=287109#c0)• 20 years ago |
|  | |

\*\*\* Please do not remove the security flag till we have clearly identified if
there are "real" security holes \*\*\*
Per discussion with justdave in IRC, it appears that some validation functions
have confusing name or do incomplete validation.
Two examples:
1. In enter\_bug.cgi, CanEnterProduct() is called to "check and make sure that
the user has permission to enter a bug against this product." (comment taken
from that file, line 293). Based on this statement, I removed an additional
check as part of [bug 282267](/show_bug.cgi?id=282267 "RESOLVED FIXED - product name is checked twice in enter_bug.cgi"), because I thought CanEnterProduct() and
lsearch(\@::enterable\_products, $product) == -1 were both doing the same job. It
appears that it is \*not\* the case!! So the validation done by CanEnterProduct()
is incomplete, as it should also check the 'disallownew' bit.
2. Independently of my "mistake" about this validation in enter\_bug.cgi, it's
still possible to enter bugs in "closed" products by hacking the URL given to
post\_bug.cgi as this file "only" calls CanEnterProduct()! I can reproduce this
on both 2.18 and 2.20 (I haven't tested with 2.16).
There are several functions (in globals.pl) with similar names: CanEnterProduct,
GetEnterableProducts and GetSelectableProducts for example. But they do not seem
to do what they really should do and some of them seem to be incorrectly used.
Coming back to my previous examples 1. and 2., CanEnterProduct() should consider
the 'disallownew' bit. There may be more...
Before releasing any new version, we should make sure that everything is ok...

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a70_120380)• 20 years ago |

Status: NEW → ASSIGNEDFlags: blocking2.20?Flags: blocking2.18.1?Flags: blocking2.16.9?

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a185_10297)• 20 years ago |

Flags: blocking2.20?Flags: blocking2.20+Flags: blocking2.18.1?Flags: blocking2.18.1+Flags: blocking2.16.9?Flags: blocking2.16.9+Target Milestone: --- → Bugzilla 2.16

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=287109#c1)• 20 years ago |
|  | |

CanEnterProduct should just use @::enterable\_products, and should call
GetVersionTable to make sure that that variable exists.

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=287109#c2)• 20 years ago |
|  | |

(22:14:31) joel: Yes... if you want to get rid of the versioncache thing (die
versioncache!!), you need to have GetEnterableProducts take that into account
(22:15:04) LpSolit: joel, what about versioncache? I'm ok to remove it ;)
(22:15:25) kiko: yeah, it should be a goner by now :-(
(22:15:25) joel: yes... make it go away

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=287109#c3)• 20 years ago |
|  | |

If the situation is as you describe, it means that (if they know the names of
them) attackers can enter bugs in products they shouldn't be able to. While a
nuisance, this doesn't give them access to any confidential information, does it?
Gerv

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=287109#c4)• 20 years ago |
|  | |

(In reply to [comment #3](/show_bug.cgi?id=287109#c3 "RESOLVED FIXED - [SECURITY] Names of private products/components can be exposed on certain CGIs"))
> nuisance, this doesn't give them access to any confidential information, does it?
You are correct... about post\_bug.cgi. The security flag is set till we are sure
such functions are not misused in other files, such as show\_bug.cgi.

|  | [Joel Peshkin](/user_profile?user_id=40200) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=287109#c5)• 20 years ago |
|  | |

IIUC, the problem is post\_bug is that a product could be "closed for bug entry,"
but still accessible and a user who could have entered a bug in that product had
it been open could still enter a bug.
That doesn't make it as a security problem in my book.
---------------
HOWEVER -- In show\_bug.cgi, the history of comments IS AVAILABLE even if the bug
is not, so long as we are in the "long format" mode. So, if you hack form data,
you CAN get the comments. ValidateBugID() is only called for a single bug.
Try this...
Search for a bunch of bugs, some non-public.
Click on LONG FORMAT
see results
select one bug, view it, and log out
back up to the LONG FORMAT listing and hit reload...

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=287109#c6)• 20 years ago |
|  | |

> this doesn't give them access to any confidential information, does it?
Component names might be confidential in commercial products.

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=287109#c7)• 20 years ago |
|  | |

Attached patch

[fix CanEnterProduct(), trunk, v1](attachment.cgi?id=179986&action=diff) (obsolete)
— [Details](attachment.cgi?id=179986&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=179986)

[Attachment #179986](/attachment.cgi?id=179986&action=edit "fix CanEnterProduct(), trunk, v1") -
Flags: review?(bugreport)

|  | [Joel Peshkin](/user_profile?user_id=40200) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=287109#c8)• 20 years ago |
|  | |

Comment on [attachment 179986](/attachment.cgi?id=179986 "fix CanEnterProduct(), trunk, v1") [[details]](/attachment.cgi?id=179986&action=edit "fix CanEnterProduct(), trunk, v1") [[diff]](/attachment.cgi?id=179986&action=diff "fix CanEnterProduct(), trunk, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=179986)
fix CanEnterProduct(), trunk, v1
r=joel by inspection
I'd like a 2xr from someone who both inspects and tests it.
[Attachment #179986](/attachment.cgi?id=179986&action=edit "fix CanEnterProduct(), trunk, v1") -
Flags: review?(bugreport) → review+

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a1566473_27300)• 20 years ago |

[Attachment #179986](/attachment.cgi?id=179986&action=edit "fix CanEnterProduct(), trunk, v1") -
Flags: review?(myk)

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=287109#c9)• 20 years ago |
|  | |

(In reply to [comment #5](/show_bug.cgi?id=287109#c5 "RESOLVED FIXED - [SECURITY] Names of private products/components can be exposed on certain CGIs"))
> HOWEVER -- In show\_bug.cgi, the history of comments IS AVAILABLE even if the
> bug is not, so long as we are in the "long format" mode. So, if you hack
> form data, you CAN get the comments.
For the record since nobody actually mentioned it here, that was filed
separately as [bug 287880](/show_bug.cgi?id=287880 "RESOLVED FIXED - Comments on secure bugs still available to templates... show_bug leaks") and has already been fixed.

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a2172282_73187)• 20 years ago |

Whiteboard: patch awaiting review & backport

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=287109#c10)• 20 years ago |
|  | |

Comment on [attachment 179986](/attachment.cgi?id=179986 "fix CanEnterProduct(), trunk, v1") [[details]](/attachment.cgi?id=179986&action=edit "fix CanEnterProduct(), trunk, v1") [[diff]](/attachment.cgi?id=179986&action=diff "fix CanEnterProduct(), trunk, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=179986)
fix CanEnterProduct(), trunk, v1
>-# This function determines if a user can enter bugs in the named
>-# product.
>+# This function determines if a user can submit new bugs
>+# in the named product.
Nit: submit new bugs in -> enter bugs into
Nit: while you're updating the comment, if -> whether or not
>+ my $allow\_new\_bugs =
>+ $dbh->selectrow\_array("SELECT CASE WHEN disallownew = 0 THEN 1 ELSE 0 END
>+ FROM products LEFT JOIN components
>+ ON components.product\_id = products.id
>+ WHERE products.name = ?
>+ AND components.product\_id IS NOT NULL " .
>+ $dbh->sql\_limit(1),
>+ undef, $productname);
>+
>+ return 0 unless $allow\_new\_bugs;
Note that DBI's documentation suggests exercising caution when using
selectrow\_array in a scalar context. It doesn't seem there's any reason to do
it in this case, so it'd be better to do:
my ($allow\_new\_bugs) = $dbh->selectrow\_array(...);
However, you could also do this more simply with an inner join and using scalar
context:
my $allow\_new\_bugs =
$dbh->selectrow\_array("SELECT CASE WHEN disallownew = 0 THEN 1 ELSE 0
END
FROM products JOIN components
ON components.product\_id = products.id
WHERE products.name = ? " .
$dbh->sql\_limit(1),
undef, $productname);
Then, $allow\_new\_bugs would contain 1 if disallownew = 0 and there are any
components, 0 if disallownew = 1 and there are any components, and undef (which
equals 0) if there are no components.
In testing: without the patch, I can enter bugs into disabled products, but I
can't enter bugs into componentless products. When I try to enter a bug into a
componentless product by hacking the URL to enter\_bug.cgi, switching the
product parameter from a valid product to the componentless product, I get:
Sorry; there needs to be at least one component for this product
in order to create a new bug. Create a new component.
When I try to do so by saving the enter\_bug.cgi form locally and hacking it, I
get the following whether or not I specify a component:
To file this bug, you must first choose a component.
If necessary, just guess.
With the patch, I can't enter bugs into either kind of product. Whether I hack
the URL or the form, both kinds of products give me the error:
Sorry, either the product PRODUCTNAME does not exist, or you don't have the
required permissions to enter a bug against that product.
So the fix does prevent me from entering bugs into products I shouldn't be
entering them into. But in the process it makes the error message for
componentless products worse. We need to give users accurate information about
why they can't enter bugs into products instead of just telling them they don't
have permission to do so.
The message for disabled products should be:
Sorry, entering bugs into product PRODUCTNAME has been disabled.
For componentless products, it's:
Sorry, product PRODUCTNAME needs to have at least one component
before you can enter bugs into it. Create a new component.
>- $query .= "WHERE products.name = " . SqlQuote($productname) . " " .
>+ $query .= "WHERE products.name = ? " .
> $dbh->sql\_limit(1);
>- PushGlobalSQLState();
>- SendSQL($query);
>- my ($ret) = FetchSQLData();
>- PopGlobalSQLState();
>- return ($ret);
>+
>+ return $dbh->selectrow\_array($query, undef, $productname);
Is this part of the fix for this bug or just serendipitous modernization?
[Attachment #179986](/attachment.cgi?id=179986&action=edit "fix CanEnterProduct(), trunk, v1") -
Flags: review?(myk) → review-

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=287109#c11)• 20 years ago |
|  | |

Comment on [attachment 179986](/attachment.cgi?id=179986 "fix CanEnterProduct(), trunk, v1") [[details]](/attachment.cgi?id=179986&action=edit "fix CanEnterProduct(), trunk, v1") [[diff]](/attachment.cgi?id=179986&action=diff "fix CanEnterProduct(), trunk, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=179986)
fix CanEnterProduct(), trunk, v1
>-# This function determines if a user can enter bugs in the named
>-# product.
>+# This function determines if a user can submit new bugs
>+# in the named product.
Nit: submit new bugs in -> enter bugs into
Nit: while you're updating the comment, if -> whether or not
>+ my $allow\_new\_bugs =
>+ $dbh->selectrow\_array("SELECT CASE WHEN disallownew = 0 THEN 1 ELSE 0 END
>+ FROM products LEFT JOIN components
>+ ON components.product\_id = products.id
>+ WHERE products.name = ?
>+ AND components.product\_id IS NOT NULL " .
>+ $dbh->sql\_limit(1),
>+ undef, $productname);
>+
>+ return 0 unless $allow\_new\_bugs;
Note that DBI's documentation suggests exercising caution when using
selectrow\_array in a scalar context. It doesn't seem there's any reason to do
it in this case, so it'd be better to do:
my ($allow\_new\_bugs) = $dbh->selectrow\_array(...);
However, you could also do this more simply with an inner join and using scalar
context:
my $allow\_new\_bugs =
$dbh->selectrow\_array("SELECT CASE WHEN disallownew = 0 THEN 1 ELSE 0
END
FROM products JOIN components
ON components.product\_id = products.id
WHERE products.name = ? " .
$dbh->sql\_limit(1),
undef, $productname);
Then, $allow\_new\_bugs would contain 1 if disallownew = 0 and there are any
components, 0 if disallownew = 1 and there are any components, and undef (which
equals 0) if there are no components.
In testing: without the patch, I can enter bugs into disabled products, but I
can't enter bugs into componentless products. When I try to enter a bug into a
componentless product by hacking the URL to enter\_bug.cgi, switching the
product parameter from a valid product to the componentless product, I get:
Sorry; there needs to be at least one component for this product
in order to create a new bug. Create a new component.
When I try to do so by saving the enter\_bug.cgi form locally and hacking it, I
get the following whether or not I specify a component:
To file this bug, you must first choose a component.
If necessary, just guess.
With the patch, I can't enter bugs into either kind of product. Whether I hack
the URL or the form, both kinds of products give me the error:
Sorry, either the product PRODUCTNAME does not exist, or you don't have the
required permissions to enter a bug against that product.
So the fix does prevent me from entering bugs into products I shouldn't be
entering them into. But in the process it makes the error message for
componentless products worse. We need to give users accurate information about
why they can't enter bugs into products instead of just telling them they don't
have permission to do so.
The message for disabled products should be:
Sorry, entering bugs into product PRODUCTNAME has been disabled.
For componentless products, it's:
Sorry, product PRODUCTNAME needs to have at least one component
before you can enter bugs into it. Create a new component.
>- $query .= "WHERE products.name = " . SqlQuote($productname) . " " .
>+ $query .= "WHERE products.name = ? " .
> $dbh->sql\_limit(1);
>- PushGlobalSQLState();
>- SendSQL($query);
>- my ($ret) = FetchSQLData();
>- PopGlobalSQLState();
>- return ($ret);
>+
>+ return $dbh->selectrow\_array($query, undef, $productname);
Is this part of the fix for this bug or just serendipitous modernization?

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=287109#c12)• 20 years ago |
|  | |

(In reply to [comment #11](/show_bug.cgi?id=287109#c11 "RESOLVED FIXED - [SECURITY] Names of private products/components can be exposed on certain CGIs"))
> So the fix does prevent me from entering bugs into products I shouldn't be
> entering them into. But in the process it makes the error message for
> componentless products worse. We need to give users accurate information
I disagree! We said several times the user should not know if a product does not
exist or if it has restrictions on who can enter bugs into. Applying this idea
to disabled products or products without components, I think we should not give
the exact reason why the user cannot access this product... or am I missing
something? Any opinion guys?
> >- $query .= "WHERE products.name = " . SqlQuote($productname) . " " .
> >+ $query .= "WHERE products.name = ? " .
> > $dbh->sql\_limit(1);
> >- PushGlobalSQLState();
> >- SendSQL($query);
> >- my ($ret) = FetchSQLData();
> >- PopGlobalSQLState();
> >- return ($ret);
> >+
> >+ return $dbh->selectrow\_array($query, undef, $productname);
>
> Is this part of the fix for this bug or just serendipitous modernization?
>
Modernization only.

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=287109#c13)• 20 years ago |
|  | |

Here's what I said on IRC when LpSolit asked me about this:
<justdave\_> LpSolit: Myk is correct.
<justdave\_> As long as the user would otherwise be able to see the product
<LpSolit> justdave\_: so you want to display some "confidential" information?
<justdave\_> they should get an accurate reason why they can't enter in it.
<justdave\_> neither of those are confidential situations
<justdave\_> he's talking about if the user can already see the product, but the
product has been disabled or hasn't had components created yet.
<justdave\_> that's completely different from if the product doesn't exist of if
the user doesn't have access to the product.
<justdave\_> A user not having access to a product should be treated as if the
product doesn't exist
<justdave\_> (or give an ambiguous message indicating that either is possible)
<justdave\_> "doesn't exist or you don't have access to it"
<justdave\_> if the user DOES have access to the product, but the product has
been closed for entry or there are not components defined in it, then there's no
reason to hide that from the user, as they can already see it anyway.
<justdave\_> whether the user has access to the product should be checked prior
to checking for closed or no components though.

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a2516238_73187)• 20 years ago |

Priority: -- → P1

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=287109#c14)• 20 years ago |
|  | |

What you ask me to do is a pain. CanEnterProduct() has to reject a request
returning an appropriate value based on the following cases:
1) the user cannot enter the product
2) the product is closed for new bug entry
3) the product has no component
Most developers use "if (CanEnterProduct($product))" so that we should be
careful on the value returned by this function. I see only two possible values:
0 and undef, meaning that I cannot distinguish more than two cases. :(
Another possibility is to use an intermediate function CanEnterProductOrWarn()
which would return an appropriate error message based on the value returned by
CanEnterProduct(), assuming it can returned any value, for example -1 for no
access, 0 for a closed product and undef for a product with no component. But
then, we would need to change the logic in the whole code, replacing "if
(CanEnterProduct($product))" by "if (CanEnterProduct($product)) > 0". Is that a
safe solution? I'm not sure!
Any better idea?

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=287109#c15)• 20 years ago |
|  | |

Attached patch

[fix CanEnterProduct(), trunk, v2](attachment.cgi?id=181728&action=diff) (obsolete)
— [Details](attachment.cgi?id=181728&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=181728)

I created a new CanEnterProductOrWarn() function which takes care of the value
returned by CanEnterProduct() in order to display the correct error message, if
any.
[Attachment #179986](/attachment.cgi?id=179986&action=edit "fix CanEnterProduct(), trunk, v1") -
Attachment is obsolete: true
[Attachment #181728](/attachment.cgi?id=181728&action=edit "fix CanEnterProduct(), trunk, v2") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=287109#c16)• 20 years ago |
|  | |

Comment on [attachment 181728](/attachment.cgi?id=181728 "fix CanEnterProduct(), trunk, v2") [[details]](/attachment.cgi?id=181728&action=edit "fix CanEnterProduct(), trunk, v2") [[diff]](/attachment.cgi?id=181728&action=diff "fix CanEnterProduct(), trunk, v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=181728)
fix CanEnterProduct(), trunk, v2
Is my superreviewer satisfied now? :)
[Attachment #181728](/attachment.cgi?id=181728&action=edit "fix CanEnterProduct(), trunk, v2") -
Flags: review?(myk)

|  | [Joel Peshkin](/user_profile?user_id=40200) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=287109#c17)• 20 years ago |
|  | |

Comment on [attachment 181728](/attachment.cgi?id=181728 "fix CanEnterProduct(), trunk, v2") [[details]](/attachment.cgi?id=181728&action=edit "fix CanEnterProduct(), trunk, v2") [[diff]](/attachment.cgi?id=181728&action=diff "fix CanEnterProduct(), trunk, v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=181728)
fix CanEnterProduct(), trunk, v2
>
>+ [% ELSIF error == "product\_disabled" %]
>+ [% title = BLOCK %]Product closed for [% terms.Bug %] Entry[% END %]
>+ The product <em>[% product FILTER html %]</em> accepts no new [% terms.bug %].
>+
Make that bugs instead of bug and r=joel
[Attachment #181728](/attachment.cgi?id=181728&action=edit "fix CanEnterProduct(), trunk, v2") -
Flags: review?(bugreport) → review+

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=287109#c18)• 20 years ago |
|  | |

Comment on [attachment 181728](/attachment.cgi?id=181728 "fix CanEnterProduct(), trunk, v2") [[details]](/attachment.cgi?id=181728&action=edit "fix CanEnterProduct(), trunk, v2") [[diff]](/attachment.cgi?id=181728&action=diff "fix CanEnterProduct(), trunk, v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=181728)
fix CanEnterProduct(), trunk, v2
>+ [% ELSIF error == "product\_disabled" %]
>+ [% title = BLOCK %]Product closed for [% terms.Bug %] Entry[% END %]
>+ The product <em>[% product FILTER html %]</em> accepts no new [% terms.bug %].
Nit: this should be "Sorry, entering bugs into product [product name] has been
disabled."
Otherwise this looks good and works as expected. r=myk
[Attachment #181728](/attachment.cgi?id=181728&action=edit "fix CanEnterProduct(), trunk, v2") -
Flags: review?(myk) → review+

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=287109#c19)• 20 years ago |
|  | |

Requesting approval but not setting it, since this will get approved for checkin
right before release of the security update.Flags: approval?

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=287109#c20)• 20 years ago |
|  | |

Attached patch

[final fix for the trunk (error message updated), v2.1](attachment.cgi?id=182035&action=diff) (obsolete)
— [Details](attachment.cgi?id=182035&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182035)

Fixing myk's nit about the error message. Forwarding r+
[Attachment #181728](/attachment.cgi?id=181728&action=edit "fix CanEnterProduct(), trunk, v2") -
Attachment is obsolete: true
[Attachment #182035](/attachment.cgi?id=182035&action=edit "final fix for the trunk (error message updated), v2.1") -
Flags: review+

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=287109#c21)• 20 years ago |
|  | |

Attached patch

[2.18 backport, v1](attachment.cgi?id=182051&action=diff) (obsolete)
— [Details](attachment.cgi?id=182051&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182051)

In 2.18, CanEnterProductOrWarn() requires an additional parameter
$unlock\_tables because process\_bug.cgi calls this function while most tables
are locked. This parameter is not required in 2.19 because tables are
automatically unlocked when Throw\*Error() is called, see [bug 277782](/show_bug.cgi?id=277782 "RESOLVED FIXED - _throw_error should unlock tables when tables are locked, automatically").
[Attachment #182051](/attachment.cgi?id=182051&action=edit "2.18 backport, v1") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=287109#c22)• 20 years ago |
|  | |

Comment on [attachment 182051](/attachment.cgi?id=182051 "2.18 backport, v1") [[details]](/attachment.cgi?id=182051&action=edit "2.18 backport, v1") [[diff]](/attachment.cgi?id=182051&action=diff "2.18 backport, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182051)
2.18 backport, v1
I'm not sure if two reviews are required for this backport. If not, the first
who reviews this patch should feel free to remove the other request for review.
[Attachment #182051](/attachment.cgi?id=182051&action=edit "2.18 backport, v1") -
Flags: review?(myk)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=287109#c23)• 20 years ago |
|  | |

Attached patch

[2.16 backport, v1](attachment.cgi?id=182062&action=diff) (obsolete)
— [Details](attachment.cgi?id=182062&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182062)

This patch does not alter process\_bug.cgi. I'm not sure it worths fixing it.
And reports.cgi seems not to be affected.
[Attachment #182062](/attachment.cgi?id=182062&action=edit "2.16 backport, v1") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3258403_120380)• 20 years ago |

[Attachment #182062](/attachment.cgi?id=182062&action=edit "2.16 backport, v1") -
Flags: review?(myk)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=287109#c24)• 20 years ago |
|  | |

Comment on [attachment 182062](/attachment.cgi?id=182062 "2.16 backport, v1") [[details]](/attachment.cgi?id=182062&action=edit "2.16 backport, v1") [[diff]](/attachment.cgi?id=182062&action=diff "2.16 backport, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182062)
2.16 backport, v1
Nick has an active 2.16.8 installation. I haven't one so please test it
carefully! ;)
[Attachment #182062](/attachment.cgi?id=182062&action=edit "2.16 backport, v1") -
Flags: review?(nb+bz)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=287109#c25)• 20 years ago |
|  | |

Attached patch

[2.16 backport, v1.1](attachment.cgi?id=182063&action=diff) (obsolete)
— [Details](attachment.cgi?id=182063&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182063)

oops, I forgot a 'exit;' after a call to DisplayError(). Sorry for bug spam.
[Attachment #182062](/attachment.cgi?id=182062&action=edit "2.16 backport, v1") -
Attachment is obsolete: true
[Attachment #182063](/attachment.cgi?id=182063&action=edit "2.16 backport, v1.1") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3259049_120380)• 20 years ago |

[Attachment #182063](/attachment.cgi?id=182063&action=edit "2.16 backport, v1.1") -
Flags: review?(myk)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3259096_120380)• 20 years ago |

[Attachment #182063](/attachment.cgi?id=182063&action=edit "2.16 backport, v1.1") -
Flags: review?(nb+bz)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3259140_120380)• 20 years ago |

[Attachment #182062](/attachment.cgi?id=182062&action=edit "2.16 backport, v1") -
Flags: review?(nb+bz)
[Attachment #182062](/attachment.cgi?id=182062&action=edit "2.16 backport, v1") -
Flags: review?(myk)
[Attachment #182062](/attachment.cgi?id=182062&action=edit "2.16 backport, v1") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=287109#c26)• 20 years ago |
|  | |

It's really a pain!!! When moving a bug to a different product, Bugzilla asks
you to choose the component, the version and the target\_milestone independently
whether or not the product has group restrictions or is closed for bugs entry!!!
Even with my patch applied! :(

|  | [Nick Barnes](/user_profile?user_id=99212) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=287109#c27)• 20 years ago |
|  | |

Attached patch

[2.16 backport, v1.2](attachment.cgi?id=182074&action=diff) (obsolete)
— [Details](attachment.cgi?id=182074&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182074)

2.16 backport patch v1,2. like v1.1 except it tests in process\_bug.cgi that a
bug is not being moved to a product which is closed for bug entry. The
placement of the test here is tricky. We don't want to leak version and
component names of a product to a user who is not entitled to see that product.
So we test \*before\* showing the version/component selection dropdowns.
However, we test by calling CanEnterProductOrWarn(). What if usebuggroupsentry
is not set but usebuggroups is set, and the user isn't in the necessary group?
Should such a user be allowed to move bugs into the product? What's the desired
semantics?

|  | [Nick Barnes](/user_profile?user_id=99212) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3263442_99212)• 20 years ago |

[Attachment #182063](/attachment.cgi?id=182063&action=edit "2.16 backport, v1.1") -
Attachment is obsolete: true

|  | [Nick Barnes](/user_profile?user_id=99212) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=287109#c28)• 20 years ago |
|  | |

Attached patch

[2.16 backport, v1.3](attachment.cgi?id=182076&action=diff) (obsolete)
— [Details](attachment.cgi?id=182076&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182076)

Let's try again; LpSolit spotted a problem straight off, and I think I've
learned how to use cvs diff as well.
[Attachment #182074](/attachment.cgi?id=182074&action=edit "2.16 backport, v1.2") -
Attachment is obsolete: true

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=287109#c29)• 20 years ago |
|  | |

Comment on [attachment 182051](/attachment.cgi?id=182051 "2.18 backport, v1") [[details]](/attachment.cgi?id=182051&action=edit "2.18 backport, v1") [[diff]](/attachment.cgi?id=182051&action=diff "2.18 backport, v1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182051)
2.18 backport, v1
I will update this patch soon...
[Attachment #182051](/attachment.cgi?id=182051&action=edit "2.18 backport, v1") -
Flags: review?(myk)
[Attachment #182051](/attachment.cgi?id=182051&action=edit "2.18 backport, v1") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3270524_120380)• 20 years ago |

[Attachment #182063](/attachment.cgi?id=182063&action=edit "2.16 backport, v1.1") -
Flags: review?(nb+bz)
[Attachment #182063](/attachment.cgi?id=182063&action=edit "2.16 backport, v1.1") -
Flags: review?(myk)
[Attachment #182063](/attachment.cgi?id=182063&action=edit "2.16 backport, v1.1") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=287109#c30)• 20 years ago |
|  | |

Comment on [attachment 182035](/attachment.cgi?id=182035 "final fix for the trunk (error message updated), v2.1") [[details]](/attachment.cgi?id=182035&action=edit "final fix for the trunk (error message updated), v2.1") [[diff]](/attachment.cgi?id=182035&action=diff "final fix for the trunk (error message updated), v2.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182035)
final fix for the trunk (error message updated), v2.1
There is still an issue in process\_bug.cgi...
[Attachment #182035](/attachment.cgi?id=182035&action=edit "final fix for the trunk (error message updated), v2.1") -
Flags: review+ → review-

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=287109#c31)• 20 years ago |
|  | |

Comment on [attachment 182035](/attachment.cgi?id=182035 "final fix for the trunk (error message updated), v2.1") [[details]](/attachment.cgi?id=182035&action=edit "final fix for the trunk (error message updated), v2.1") [[diff]](/attachment.cgi?id=182035&action=diff "final fix for the trunk (error message updated), v2.1") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182035)
final fix for the trunk (error message updated), v2.1
There is still an issue in process\_bug.cgi...
[Attachment #182035](/attachment.cgi?id=182035&action=edit "final fix for the trunk (error message updated), v2.1") -
Flags: review-

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3270736_120380)• 20 years ago |

Flags: approval?

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=287109#c32)• 20 years ago |
|  | |

Attached patch

[patch for the trunk, v3](attachment.cgi?id=182124&action=diff)
— [Details](attachment.cgi?id=182124&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182124)

Fixes leakage in process\_bug.cgi.
[Attachment #182035](/attachment.cgi?id=182035&action=edit "final fix for the trunk (error message updated), v2.1") -
Attachment is obsolete: true
[Attachment #182124](/attachment.cgi?id=182124&action=edit "patch for the trunk, v3") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3294813_120380)• 20 years ago |

[Attachment #182124](/attachment.cgi?id=182124&action=edit "patch for the trunk, v3") -
Flags: review?(myk)

|  | [Nick Barnes](/user_profile?user_id=99212) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=287109#c33)• 20 years ago |
|  | |

I'm having some difficulty testing this on 2.16.8 as I don't have a concrete
list of use cases and the desired outcome, for all the affected code. This v1.3
patch seems to work for the tests which I have devised so far.

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=287109#c34)• 20 years ago |
|  | |

(In reply to [comment #33](/show_bug.cgi?id=287109#c33 "RESOLVED FIXED - [SECURITY] Names of private products/components can be exposed on certain CGIs"))
> I'm having some difficulty testing this on 2.16.8 as I don't have a concrete
> list of use cases and the desired outcome, for all the affected code. This v1.3
> patch seems to work for the tests which I have devised so far.
Your version 1.3 of the 2.16 backport does not consider the fact that all bugs
could already be in the product we are moving to and you would then generate a
useless (and incorrect) error message. I'm waiting for joel's and myk's review
of the v3 patch before backporting it to 2.18 and 2.16.

|  | [Joel Peshkin](/user_profile?user_id=40200) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=287109#c35)• 20 years ago |
|  | |

Comment on [attachment 182124](/attachment.cgi?id=182124 "patch for the trunk, v3") [[details]](/attachment.cgi?id=182124&action=edit "patch for the trunk, v3") [[diff]](/attachment.cgi?id=182124&action=diff "patch for the trunk, v3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182124)
patch for the trunk, v3
r=joel by inspection if you've tested it.
2xr still needed since it touches enough security stuff.
[Attachment #182124](/attachment.cgi?id=182124&action=edit "patch for the trunk, v3") -
Flags: review?(bugreport) → review+

|  | [Nick Barnes](/user_profile?user_id=99212) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=287109#c36)• 20 years ago |
|  | |

(In reply to [comment #34](/show_bug.cgi?id=287109#c34 "RESOLVED FIXED - [SECURITY] Names of private products/components can be exposed on certain CGIs"))
> Your version 1.3 of the 2.16 backport does not consider the fact that all bugs
> could already be in the product we are moving to and you would then generate a
> useless (and incorrect) error message. I'm waiting for joel's and myk's review
> of the v3 patch before backporting it to 2.18 and 2.16.
Well, it does consider that fact. It documents in the comment that it doesn't
handle it well.
The only alternative is to iterate through the bug IDs getting their current
products, before potentially asking CanEnterProductOrWarn. I'm happy to write
that code, if we decide it's indicated. But it'll make this a bigger patch, and
we should endeavour to keep it small for a security fix to a maintenance branch.

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=287109#c37)• 20 years ago |
|  | |

(In reply to [comment #36](/show_bug.cgi?id=287109#c36 "RESOLVED FIXED - [SECURITY] Names of private products/components can be exposed on certain CGIs"))
> Well, it does consider that fact. It documents in the comment that it doesn't
> handle it well.
So it's a bad solution. ;)
> The only alternative is to iterate through the bug IDs getting their current
> products, before potentially asking CanEnterProductOrWarn.
Huh? Please read my last patch first. I already fixed that problem.
I'm happy to write
> that code, if we decide it's indicated.
There is no need to be two developers on this bug. This one is already assigned
to me and I feel able to fix it without any help. But thanks for proposing your
help! You can help by reviewing the 2.16 patch as soon as I upload a new one. :)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=287109#c38)• 20 years ago |
|  | |

Comment on [attachment 182124](/attachment.cgi?id=182124 "patch for the trunk, v3") [[details]](/attachment.cgi?id=182124&action=edit "patch for the trunk, v3") [[diff]](/attachment.cgi?id=182124&action=diff "patch for the trunk, v3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182124)
patch for the trunk, v3
/me hopes this bug to be fixed before 2007.
[Attachment #182124](/attachment.cgi?id=182124&action=edit "patch for the trunk, v3") -
Flags: review?(justdave)

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=287109#c39)• 20 years ago |
|  | |

Comment on [attachment 182124](/attachment.cgi?id=182124 "patch for the trunk, v3") [[details]](/attachment.cgi?id=182124&action=edit "patch for the trunk, v3") [[diff]](/attachment.cgi?id=182124&action=diff "patch for the trunk, v3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182124)
patch for the trunk, v3
>+ $cgi->param('component\_id', $comp\_id);
Nice simplification of the code!
I haven't tested this, but it looks good. r=myk
[Attachment #182124](/attachment.cgi?id=182124&action=edit "patch for the trunk, v3") -
Flags: review?(myk) → review+

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3877385_120380)• 20 years ago |

[Attachment #182124](/attachment.cgi?id=182124&action=edit "patch for the trunk, v3") -
Flags: review?(justdave)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3890353_120380)• 20 years ago |

Blocks: [169459](/show_bug.cgi?id=169459 "RESOLVED FIXED - enter_bug.cgi should not lie saying: \"Derivatives\" is not a valid product.")

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=287109#c40)• 20 years ago |
|  | |

Attached patch

[2.18 backport, v2](attachment.cgi?id=182735&action=diff)
— [Details](attachment.cgi?id=182735&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182735)

[Attachment #182051](/attachment.cgi?id=182051&action=edit "2.18 backport, v1") -
Attachment is obsolete: true
[Attachment #182735](/attachment.cgi?id=182735&action=edit "2.18 backport, v2") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3898019_120380)• 20 years ago |

[Attachment #182735](/attachment.cgi?id=182735&action=edit "2.18 backport, v2") -
Flags: review?(myk)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3898077_120380)• 20 years ago |

Flags: approval?Whiteboard: patch awaiting review & backport → patch awaiting review

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=287109#c41)• 20 years ago |
|  | |

Attached patch

[2.16 backport, v2](attachment.cgi?id=182741&action=diff)
— [Details](attachment.cgi?id=182741&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182741)

I have no 2.16 installation, so I cannot test this patch, except running
runtests.pl, which does not complain. Table fields have changed a lot between
2.16 and 2.19 so I may be wrong here. This patch \*really\* needs to be tested.
Nick, could you do some tests for 2.16? I just realized that you did not test
previous 2.16 patches, even yours, because there are invalid field names in
them and any trivial test would have failed immediately. ;)
[Attachment #182076](/attachment.cgi?id=182076&action=edit "2.16 backport, v1.3") -
Attachment is obsolete: true
[Attachment #182741](/attachment.cgi?id=182741&action=edit "2.16 backport, v2") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a3903050_120380)• 20 years ago |

[Attachment #182741](/attachment.cgi?id=182741&action=edit "2.16 backport, v2") -
Flags: review?(myk)

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=287109#c42)• 20 years ago |
|  | |

I made a 2.16 testing installation for this bug at:
<http://landfill.bugzillla.org/bz287109/>

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=287109#c43)• 20 years ago |
|  | |

Typo correction: <http://landfill.bugzilla.org/bz287109/>

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=287109#c44)• 20 years ago |
|  | |

Attached file
[test results for 2.18 and 2.16 v2 patches](attachment.cgi?id=183124) (obsolete)
— [Details](attachment.cgi?id=183124&action=edit)

A basic set of tests for these fixes are to create componentless, disabled, and
confidential products and then try to load enter\_bug.cgi and post\_bug.cgi,
specifying those products, both before and after applying the patch.
I ran such tests on 2.18 and 2.16 installations and got the attached results.

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=287109#c45)• 20 years ago |
|  | |

Attached file
[updated test results for 2.18 and 2.16 patches](attachment.cgi?id=183125)
— [Details](attachment.cgi?id=183125&action=edit)

Here are updated test results after I enabled "usebuggroupsentry" in the 2.16
installation's parameters.
[Attachment #183124](/attachment.cgi?id=183124&action=edit "test results for 2.18 and 2.16 v2 patches") -
Attachment is obsolete: true

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=287109#c46)• 20 years ago |
|  | |

Comment on [attachment 182735](/attachment.cgi?id=182735 "2.18 backport, v2") [[details]](/attachment.cgi?id=182735&action=edit "2.18 backport, v2") [[diff]](/attachment.cgi?id=182735&action=diff "2.18 backport, v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182735)
2.18 backport, v2
>Index: globals.pl
>-# This function determines if a user can enter bugs in the named
>-# product.
>+# This function determines whether or not a user can enter
>+# bugs into the named product.
Nit: writing the comment this way is a little easier to read:
>+# This function determines whether or not a user can enter bugs
>+# into the named product.
(Putting the line break between the phrases "a user can enter bugs" and "into
the named product" makes the comment easier to read than putting it within the
phrase "can enter bugs".)
>+ my $allow\_new\_bugs =
>+ $dbh->selectrow\_array("SELECT CASE WHEN disallownew = 0 THEN 1 ELSE 0 END
Nit: I recommend "my ($allow\_new\_bugs) = ...".
>Index: process\_bug.cgi
>+ my $check\_can\_enter =
>+ $dbh->selectrow\_array("SELECT 1 FROM bugs
Nit: better as "my ($check\_can\_enter) = ...".
Nit: the message for componentless products should be "Sorry, the product
<product> has to have at least one component in order for you to enter a bug
into it. Please contact <maintainer> and ask them to add a component to this
product."
Nit: the message for disabled products should be "Sorry, entering bugs into the
product <product> has been disabled." (adding the word "the"--yes, I realize I
missed this on the trunk review)
Nit: the message for confidential products should be "Sorry, either the product
<product> does not exist or you aren't authorized to enter a bug into that
product."
All comments nits; this looks good, and tests show that it works well. r=myk
[Attachment #182735](/attachment.cgi?id=182735&action=edit "2.18 backport, v2") -
Flags: review?(myk) → review+

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=287109#c47)• 20 years ago |
|  | |

> Nit: the message for confidential products should be "Sorry, either the product
> <product> does not exist or you aren't authorized to enter a bug into that
> product."
Err, sorry, revising this nit. The message should say, "Sorry, either the
product <product> does not exist or you aren't authorized to enter a bug into it."

|  | [Myk Melez [:myk] [@mykmelez]](/user_profile?user_id=27300) |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=287109#c48)• 20 years ago |
|  | |

Comment on [attachment 182741](/attachment.cgi?id=182741 "2.16 backport, v2") [[details]](/attachment.cgi?id=182741&action=edit "2.16 backport, v2") [[diff]](/attachment.cgi?id=182741&action=diff "2.16 backport, v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182741)
2.16 backport, v2
>Index: globals.pl
>+sub CanEnterProductOrWarn {
Seems like this works, and 2.16 is virtually EOLed anyway, so it probably
doesn't matter, but is there a particular reason you combined the work done by
both CanEnterProduct and CanEnterProductOrWarn in other patches into a single
function in this patch? It seems like unnecessarily divergent code paths.
>+ SendSQL("SELECT CASE WHEN disallownew = 0 THEN 1 ELSE 0 END
>+ FROM products INNER JOIN components
>+ ON components.program = products.product
>+ WHERE products.product = " . SqlQuote($productname) . " LIMIT 1");
>+
>+ my $status = FetchOneColumn();
Nit: though I don't think it'll cause problems in this particular case, queries
in subroutines that don't push and pop the global SQL state run the risk of
corrupting a query done outside the subroutine whose data has not been fully
retrieved when the subroutine gets called. You should push and pop the global
SQL state around these statements.
Message nits from the 2.18 patch apply here as well.
Otherwise, the code looks good and the tests all come up smelling like roses.
r=myk
[Attachment #182741](/attachment.cgi?id=182741&action=edit "2.16 backport, v2") -
Flags: review?(myk) → review+

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=287109#c49)• 20 years ago |
|  | |

Thanks a lot myk for your reviews and tests! :)
Flags: approval2.18?Flags: approval2.16?

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a4291703_120380)• 20 years ago |

[Attachment #182735](/attachment.cgi?id=182735&action=edit "2.18 backport, v2") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a4291738_120380)• 20 years ago |

[Attachment #182741](/attachment.cgi?id=182741&action=edit "2.16 backport, v2") -
Flags: review?(bugreport)

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a4291823_120380)• 20 years ago |

Whiteboard: patch awaiting review → patch awaiting approval

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a4299995_120380)• 20 years ago |

Whiteboard: patch awaiting approval → [ready for 2.19.3] [ready for 2.18.1] [ready for 2.16.9]

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a4313129_73187)• 20 years ago |

Summary: Potential security holes when submitting or searching for bugs → [SECURITY] Names of private products/components can be exposed on certain CGIs

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a4354768_10297)• 20 years ago |

Whiteboard: [ready for 2.19.3] [ready for 2.18.1] [ready for 2.16.9] → [ready for 2.16.9] [ready for 2.18.1] [ready for 2.19.3]

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a4360347_73187)• 20 years ago |

Blocks: [290249](/show_bug.cgi?id=290249 "RESOLVED FIXED - Security Advisory for 2.18.1, 2.19.3, and 2.16.9")

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=287109#c50)• 20 years ago |
|  | |

ok, release is imminent, let's roll :)Flags: approval?Flags: approval2.18?Flags: approval2.18+Flags: approval2.16?Flags: approval2.16+Flags: approval+

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=287109#c51)• 20 years ago |
|  | |

Unfortunately, the patch author isn't around to do these checkins, and I don't
feel comfortable addressing the message nits on my personal checkin. Perhaps we
should have another bug marked as "trivial" for dealing with them.
Tip:
Checking in enter\_bug.cgi;
/cvsroot/mozilla/webtools/bugzilla/enter\_bug.cgi,v <-- enter\_bug.cgi
new revision: 1.114; previous revision: 1.113
done
Checking in globals.pl;
/cvsroot/mozilla/webtools/bugzilla/globals.pl,v <-- globals.pl
new revision: 1.323; previous revision: 1.322
done
Checking in post\_bug.cgi;
/cvsroot/mozilla/webtools/bugzilla/post\_bug.cgi,v <-- post\_bug.cgi
new revision: 1.116; previous revision: 1.115
done
Checking in process\_bug.cgi;
/cvsroot/mozilla/webtools/bugzilla/process\_bug.cgi,v <-- process\_bug.cgi
new revision: 1.255; previous revision: 1.254
done
Checking in reports.cgi;
/cvsroot/mozilla/webtools/bugzilla/reports.cgi,v <-- reports.cgi
new revision: 1.74; previous revision: 1.73
done
Checking in template/en/default/global/user-error.html.tmpl;
/cvsroot/mozilla/webtools/bugzilla/template/en/default/global/user-error.html.tmpl,v
<-- user-error.html.tmpl
new revision: 1.108; previous revision: 1.107
done
2.18:
Checking in enter\_bug.cgi;
/cvsroot/mozilla/webtools/bugzilla/enter\_bug.cgi,v <-- enter\_bug.cgi
new revision: 1.94.2.3; previous revision: 1.94.2.2
done
Checking in globals.pl;
/cvsroot/mozilla/webtools/bugzilla/globals.pl,v <-- globals.pl
new revision: 1.270.2.9; previous revision: 1.270.2.8
done
Checking in post\_bug.cgi;
/cvsroot/mozilla/webtools/bugzilla/post\_bug.cgi,v <-- post\_bug.cgi
new revision: 1.88.2.7; previous revision: 1.88.2.6
done
Checking in process\_bug.cgi;
/cvsroot/mozilla/webtools/bugzilla/process\_bug.cgi,v <-- process\_bug.cgi
new revision: 1.205.2.19; previous revision: 1.205.2.18
done
Checking in reports.cgi;
/cvsroot/mozilla/webtools/bugzilla/reports.cgi,v <-- reports.cgi
new revision: 1.72.2.2; previous revision: 1.72.2.1
done
Checking in template/en/default/global/user-error.html.tmpl;
/cvsroot/mozilla/webtools/bugzilla/template/en/default/global/user-error.html.tmpl,v
<-- user-error.html.tmpl
new revision: 1.61.2.11; previous revision: 1.61.2.10
done
2.16:
Checking in enter\_bug.cgi;
/cvsroot/mozilla/webtools/bugzilla/enter\_bug.cgi,v <-- enter\_bug.cgi
new revision: 1.66.2.4; previous revision: 1.66.2.3
done
Checking in globals.pl;
/cvsroot/mozilla/webtools/bugzilla/globals.pl,v <-- globals.pl
new revision: 1.169.2.26; previous revision: 1.169.2.25
done
Checking in post\_bug.cgi;
/cvsroot/mozilla/webtools/bugzilla/post\_bug.cgi,v <-- post\_bug.cgi
new revision: 1.52.2.9; previous revision: 1.52.2.8
done
Checking in process\_bug.cgi;
/cvsroot/mozilla/webtools/bugzilla/process\_bug.cgi,v <-- process\_bug.cgi
new revision: 1.125.2.13; previous revision: 1.125.2.12
doneSeverity: blocker → majorStatus: ASSIGNED → RESOLVEDClosed: 20 years agoResolution: --- → FIXEDWhiteboard: [ready for 2.16.9] [ready for 2.18.1] [ready for 2.19.3]Version: 2.19.2 → 2.16

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a4436360_73187)• 20 years ago |

Group: webtools-security

|  | [Frédéric Buclin](/user_profile?user_id=120380)  Assignee |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=287109#c52)• 20 years ago |
|  | |

(In reply to [comment #51](/show_bug.cgi?id=287109#c51 "RESOLVED FIXED - [SECURITY] Names of private products/components can be exposed on certain CGIs"))
> Unfortunately, the patch author isn't around to do these checkins, and I don't
> feel comfortable addressing the message nits on my personal checkin. Perhaps we
> should have another bug marked as "trivial" for dealing with them.
mkanat, yes. That's what I had in mind. Don't worry for that. :)

|  | [Alexis Sukrieh](/user_profile?user_id=174337) |  |
| --- | --- | --- |
| [Comment 53](/show_bug.cgi?id=287109#c53)• 20 years ago |
|  | |

Comment on [attachment 182741](/attachment.cgi?id=182741 "2.16 backport, v2") [[details]](/attachment.cgi?id=182741&action=edit "2.16 backport, v2") [[diff]](/attachment.cgi?id=182741&action=diff "2.16 backport, v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182741)
2.16 backport, v2
This really seems to break something in bugzilla 2.16. enter\_bug.cgi now gives
me always an error saying that I'm not alowed to access the component while I
do have a component.
[Attachment #182741](/attachment.cgi?id=182741&action=edit "2.16 backport, v2") -
Flags: review+ → review-

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Comment 54](/show_bug.cgi?id=287109#c54)• 20 years ago |
|  | |

Comment on [attachment 182741](/attachment.cgi?id=182741 "2.16 backport, v2") [[details]](/attachment.cgi?id=182741&action=edit "2.16 backport, v2") [[diff]](/attachment.cgi?id=182741&action=diff "2.16 backport, v2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=287109&attachment=182741)
2.16 backport, v2
This should actually still be r+, since it passed review, and the review was
myk's. I talked to sukria about it on IRC.
If we do find a problem with this patch... we'll probably have to open anohther
bug and pull 2.16.9 if possible.
[Attachment #182741](/attachment.cgi?id=182741&action=edit "2.16 backport, v2") -
Flags: review- → review+

|  | [Alexis Sukrieh](/user_profile?user_id=174337) |  |
| --- | --- | --- |
| [Comment 55](/show_bug.cgi?id=287109#c55)• 20 years ago |
|  | |

Just for the record, I confirm that the bug still appears with a 2.16.9 tarball.
The problem really seems to come from the fact that I use a database wich was
created for a 2.16.7 system. Maybe something is missing somewhere... (running
checksetup.pl did not help)

|  | [Max Kanat-Alexander](/user_profile?user_id=73187) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=287109#a5027360_73187)• 20 years ago |

Blocks: [294655](/show_bug.cgi?id=294655 "RESOLVED FIXED - It is not possible to enter a bug on many installations of Bugzilla 2.16.9")
You need to [log in](/show_bug.cgi?id=287109&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Frédéric Buclin](/user_profile?user_id=120380)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


