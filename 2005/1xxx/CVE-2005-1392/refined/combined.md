=== Content from bugs.gentoo.org_c8674b4e_20250124_205119.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 88831
dev-db/phpmyadmin installs template SQL insecurely.
Last modified: 2005-05-15 08:56:32 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=88831&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=88831&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 88831**](show_bug.cgi?id=88831)
- dev-db/phpmyadmin installs template SQL insecurely.

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
dev-db/phpmyadmin installs template SQL insecurely.

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Security | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Security "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Vulnerabilities ([show other bugs](buglist.cgi?component=Vulnerabilities&product=Gentoo%20Security&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | High minor | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Security | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | B4 [glsa] jaervosz | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2005-04-12 04:30 UTC by MAL | | --- | --- | | Modified: | 2005-05-15 08:56 UTC ([History](show_activity.cgi?id=88831)) | | CC List: | 2 users (show)  php-bugs web-apps | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [**fn\_get\_random\_string() pseudo-random string generation**](attachment.cgi?id=57779 "View the content of the attachment") (random-string-gen.patch,2.75 KB, patch)  [2005-05-01 16:13 UTC](#attach_57779 "Go to the comment associated with the attachment"), Lorenzo Hernández García-Hierro | *no flags* | [Details](attachment.cgi?id=57779&action=edit) | [Diff](attachment.cgi?id=57779&action=diff) | | [View All](attachment.cgi?bugid=88831&action=viewall)  [Add an attachment](attachment.cgi?bugid=88831&action=enter) (proposed patch, testcase, etc.) | | |   | Note You need to [log in](show_bug.cgi?id=88831&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  MAL    2005-04-12 04:30:01 UTC  ``` phpmyadmin installs /usr/share/webapps/phpmyadmin/<version>/sqlscripts/mysql/<version>_create.sql with world readable permissions.  That file contains the login password for the pma user, which means any user with shell access to the system can log in to phpmyadmin and modify the PMA_* tables.  Reproducible: Always Steps to Reproduce:    Expected Results:   The sqlscripts should be readble only by root. ```  [Comment 1](#c1)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-15 10:35:06 UTC  ``` php please advise. ```  [Comment 2](#c2)  Matthias Geerdsen (RETIRED)   gentoo-dev  2005-04-22 13:02:28 UTC  ``` CC'ing web-apps as they are listed in metadata.xml  the file is indeed worldreadable and contains the initial password for pma@localhost ```  [Comment 3](#c3)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-23 04:07:56 UTC  ``` The file (and the password therein) is only relevant for the very first phpmyadmin install - the new password never get ```  [Comment 4](#c4)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-23 04:07:56 UTC  ``` The file (and the password therein) is only relevant for the very first phpmyadmin install - the new password never get´s set when upgrading, even if you follow the (mistaken) post-install instructions. Actually, if you upgrade config.inc.php then phpmyadmin fails b/c the generated password is does not match the one stored in MySQL.   The ebuild should only generate the password if this is install (not upgrade). If the intention was to change the pma password every time phpmyadmin is upgraded, then this does not work. ```  [Comment 5](#c5)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-04-25 04:02:14 UTC  ``` Bumped in CVS, the 'mysql create' script is now installed with mode 0600. ```  [Comment 6](#c6)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-04-25 04:22:27 UTC  ``` Stable on x86.  Archs, please test and mark phpmyadmin-2.6.2-r1 stable. ```  [Comment 7](#c7)  Michael Hanselmann (hansmi) (RETIRED)   gentoo-dev  2005-04-25 10:45:16 UTC  ``` Stable on ppc. ```  [Comment 8](#c8)  Gustavo Zacarias (RETIRED)   gentoo-dev  2005-04-25 10:58:50 UTC  ``` sparc stable.  ```  [Comment 9](#c9)  Michael Hanselmann (hansmi) (RETIRED)   gentoo-dev  2005-04-25 11:10:57 UTC  ``` Stable on hppa. ```  [Comment 10](#c10)  Jan Brinkmann (RETIRED)   gentoo-dev  2005-04-25 12:36:33 UTC  ``` stable on amd64 ```  [Comment 11](#c11)  Bryan Østergaard (RETIRED)   gentoo-dev  2005-04-27 00:10:25 UTC  ``` Stable on alpha. ```  [Comment 12](#c12)  Thierry Carrez (RETIRED)   gentoo-dev  2005-04-27 00:35:57 UTC  ``` Ready for GLSA vote ```  [Comment 13](#c13)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-27 07:33:45 UTC  ``` As I understand this it is a very minor issue and only relevant on the very first install. So there is no point in upgrading -> I vote for NO GLSA. ```  [Comment 14](#c14)  Thierry Carrez (RETIRED)   gentoo-dev  2005-04-27 08:58:24 UTC  ``` Agreed ```  [Comment 15](#c15)  MAL    2005-04-27 09:16:18 UTC  ``` It's hardly minor - shell users on my server could modify the PMA database however they chose.  A lot of Gentoo servers only update such software when there are security fixes such as this. ```  [Comment 16](#c16)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-27 09:47:43 UTC  ``` Hadn't thought of that possiblity -> reopening. ```  [Comment 17](#c17)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-27 12:27:10 UTC  ``` I tend to vote YES for GLSA release now. ```  [Comment 18](#c18)  Thierry Carrez (RETIRED)   gentoo-dev  2005-04-27 13:36:37 UTC  ``` Would upgrading change the compromised password ? ```  [Comment 19](#c19)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 14:01:37 UTC  ``` [Comment #17](show_bug.cgi?id=88831#c17): No, it would not. Also, the only possibility to abuse this is the very first phpmyadmin install, the password never get ```  [Comment 20](#c20)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 14:01:37 UTC  ``` [Comment #17](show_bug.cgi?id=88831#c17): No, it would not. Also, the only possibility to abuse this is the very first phpmyadmin install, the password never get´s updated/used thereafter. ```  [Comment 21](#c21)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-27 14:05:02 UTC  ``` So this is really only a half fix, unless the original version is unmerged. ```  [Comment 22](#c22)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 14:48:28 UTC  ``` Yup, that ```  [Comment 23](#c23)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 14:48:28 UTC  ``` Yup, that´s related to the fact that the update instructions are broken. You´d have to purge PMA user account and related permissions from MySQL DB and only then the password would be changed if you follow the current instructions and import/install the PMA DB.  ```  [Comment 24](#c24)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-04-27 14:55:19 UTC  ``` Right, okies, I have a bumped ebuild - diff between -r1 and -r2 (new):  --- phpmyadmin-2.6.2-r1.ebuild  2005-04-27 10:22:41.000000000 +0100 +++ phpmyadmin-2.6.2-r2.ebuild  2005-04-27 22:34:16.000000000 +0100 @@ -17,6 +17,14 @@ DEPEND=">=dev-db/mysql-3.23.32 <dev-db/m         !<=dev-db/phpmyadmin-2.5.6"  S=${WORKDIR}/${MY_P}  +pkg_setup() { +       if has_version www-apps/wordpress; then +               if test -d "${ROOT}/usr/share/webapps/${PN}"; then +                       chmod 0600 "${ROOT}/usr/share/webapps/${PN}"/*/sqlscripts/mysql/*.sql +               fi +       fi +} +  src_unpack() {         unpack ${A}         cd ${S}  So this will take care of upgrades, too.  Any issues with this ? :)  If not, I'll commit the bump and finally go home after 16 hours. ;)  ```  [Comment 25](#c25)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-04-27 15:01:25 UTC  ``` s:www-apps-wordpress:dev-db/phpmyadmin:  Sorry, lack of sleep affecting hacking abilities. :( ```  [Comment 26](#c26)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 15:47:56 UTC  ``` Well, the _real_ problem is that this does not solve the _real_ problem. :-)   I.e, once a mischievous user gets the initial pma password, that password will remain valid for any number of upgrades unless the BOFH will ignore the instructions and really change the pma password manually.  So, besides this fix, the SQL script needs to be changed so that it actually changes the password for pma user when upgrading, like:  SET PASSWORD FOR 'pma'@'localhost' = PASSWORD('@pmapass@');  I ```  [Comment 27](#c27)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 15:47:56 UTC  ``` Well, the _real_ problem is that this does not solve the _real_ problem. :-)   I.e, once a mischievous user gets the initial pma password, that password will remain valid for any number of upgrades unless the BOFH will ignore the instructions and really change the pma password manually.  So, besides this fix, the SQL script needs to be changed so that it actually changes the password for pma user when upgrading, like:  SET PASSWORD FOR 'pma'@'localhost' = PASSWORD('@pmapass@');  I´m no MySQL hacker but the password never got changed after upgrading and importing the SQL script... ```  [Comment 28](#c28)  John Mylchreest (RETIRED)   gentoo-dev  2005-04-28 04:53:54 UTC  ``` Personal opinions are that as a distribution it isnt our position to randomly change passwords for applications on upgrade. The real issue here is that the install was setting insecure permissions, which has since been rectified. The repercussions of this are a potentially insecure password. It should however be in our responsibility to recommend a password change to our users. ```  [Comment 29](#c29)  Thierry Carrez (RETIRED)   gentoo-dev  2005-04-28 09:38:54 UTC  ``` I agree we need a GLSA, don't forget to state that people should consider their password as potentially locally compromised and act accordingly (change password, check integrity...) ```  [Comment 30](#c30)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-28 10:42:46 UTC  ``` #24, 25: Sounds reasonable, the ebuild should not be more complicated than necessary... Just a recommendation to change the password should be enough.  ```  [Comment 31](#c31)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-30 13:57:42 UTC  ``` Thx everyone.  GLSA 200504-30 ```  [Comment 32](#c32)  eromang    2005-05-01 02:51:59 UTC  ``` Hello,  config.inc.php is still world readable ...  should be :  chown apache:apache && chmod o-r config.inc.php  Regards ```  [Comment 33](#c33)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-01 03:03:35 UTC  ``` web-apps back to you. ```  [Comment 34](#c34)  solar (RETIRED)   gentoo-dev  2005-05-01 06:29:51 UTC  ``` chown apache:apache <-- this also seems wrong. No reason for the webserver to need  to have the ability to write to said file. root:apache 640 is ideal if apache  needs to read from it. btw pretty much any file apache owned is world readable as it's a trivial task to  just lynx <http://localhost/filename> ```  [Comment 35](#c35)  Lorenzo Hernández García-Hierro    2005-05-01 16:13:15 UTC  ``` Created [attachment 57779](attachment.cgi?id=57779 "fn_get_random_string() pseudo-random string generation") [[details](attachment.cgi?id=57779&action=edit "fn_get_random_string() pseudo-random string generation"), [diff](attachment.cgi?id=57779&action=diff "fn_get_random_string() pseudo-random string generation")] fn_get_random_string() pseudo-random string generation  Brief description: "This patch adds support for generation of pseudo-random string (33 bytes) using a simplistic seeding "algorithm" that uses the /dev/urandom pseudo-random  numbers generator device to gather  entropy, and MD5 to calculate pseudo-random  sums to be used for calculating the final MD5 sum, that is, the pseudo-random string to be used finally (ie. for generating a random password value to be used in automatically-created configuration or installation files)."  I hadn't time to work more on it, but it looks sane. The only thing that can be a little issue is the entropy pool exhausting in server environments, that is, our main targeted as of webapp-config. It would happen once we ask for more entropy than the amount the kernel is prepared to fill, a common case when we can't feed the pool with interrupt-generated entropy. A solution to this is to use Robert Love's netdev-random patches that cause network drivers interrupts to feed entropy to the pool, but I doubt on the impact of this patch (though it's quite useful at first view).  Note the stupid simplicity of the patch itself, but I just thought it could help.  Cheers, Lorenzo. ```  [Comment 36](#c36)  Aaron Walker (RETIRED)   gentoo-dev  2005-05-02 17:56:45 UTC  ``` 2.6.2-r2 is in cvs.  config.inc.php is now installed 0640 root:apache. ```  [Comment 37](#c37)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-02 22:16:57 UTC  ``` Thx Aaron. This seems to only fix new installs so we'd still have to do a manual chmod for existing install.s ```  [Comment 38](#c38)  Robert Paskowitz (RETIRED)   gentoo-dev  2005-05-02 23:35:59 UTC  ``` Regarding the permissions on config.inc.php, when there is an existing install, the config protected file retains the permissions root:root and 644.  # ls -l ._cfg0001_config.inc.php  -rw-r--r--  1 root root 39199 May  3 01:48 ._cfg0001_config.inc.php  ```  [Comment 39](#c39)  Robert Paskowitz (RETIRED)   gentoo-dev  2005-05-03 00:29:17 UTC  ``` I believe I've narrowed down the issue to when the file is config protected to /usr/sbin/webapp-config, around line 1966 in whatever-vesion-I-have:  case "$my_type" in   ...                 config-owned)                         # config-owned files are copied in, and then are                         # owned by $G_CONFIG_UID:$G_CONFIG_GID                          libsh_erun cp "$MY_APPDIR/$1/$2" "$3/$my_file"                         libsh_erun chown "$G_CONFIG_UID:$G_CONFIG_GID" "$3/$my_file"                         libsh_erun chmod "$G_PERMS_CONFIGOWNED_FILE" "$3/$my_file"                         fn_add_contents "$MY_INSTALLCONTENTS" "file" "$my_type" "$3" "$2" "$4"                         ;; ...   So, basically, the owner and permissions are quite forced, and I don't see any way to overcome this from the ebuild. Personally, I think webapp-config should follow what portage does (the actual copy is done with movefile(), which states:  "moves a file from src to dest, preserving all permissions and attributes; mtime will be preserved even when moving across filesystems.  Returns true on success and false on failure.  Move is atomic."  I find preserving all permissions and attributes to be quite important. ```  [Comment 40](#c40)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-03 09:50:50 UTC  ``` Elfyn please advise. ```  [Comment 41](#c41)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-05-03 16:38:53 UTC  ``` Apologies for the late response.  I'm cutting patches for this now that fixes the permissions used for config files such as pma's config.inc.php, and also fixes another fubar where site directories (typically /var/www/$site and /var/www/$site/htdocs) are created mode 777.  There are a few remaining issues I have to work out, but I'll have those sorted in a couple of hours (sorry, keeps getting longer :/). ```  [Comment 42](#c42)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-05 22:22:47 UTC  ``` Elfyn, a couple of hours have passed, what is the current status? ```  [Comment 43](#c43)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-05-07 07:52:38 UTC  ``` Finally, we have an updated webapp-config (net-www/webapp-config-1.10-r13) to deal with the problem above.  Permissions on configuration files are now preserved, and webapp config files will be installed in the webroot 640 root:apache by default (requires that the webapp-config config file (/etc/vhosts/webapp-config be etc-update'd).  This rev bump is package.mask'd as it _might_ break an app or two (initial tests are good, though), and will stay there until I've checked out other www-apps packages.  (/me promises this _will_ not take days ;)  Again, apologies for the huge delays.  Please locally unmask and test with www-apps/phpmyadmin-2.6.2-r2.  Thanks ! ```  [Comment 44](#c44)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-07 10:36:56 UTC  ``` Elfyn, we can mark webapp-config stable on this bug as well. Is it ready for that? ```  [Comment 45](#c45)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-05-07 11:22:59 UTC  ``` It looks that way :)  I have 4 more packages to test out, and if they look good this webapp-config will be going stable ASAP (it will also contain a fix for [bug #91785](show_bug.cgi?id=91785 "RESOLVED FIXED - net-www/webapp-config insecure temporary file creation") once i've finished testing the above). ```  [Comment 46](#c46)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-07 11:31:15 UTC  ``` Thx Elfyn, please let me know when you have finished your tests. ```  [Comment 47](#c47)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-05-08 22:19:20 UTC  ``` Okies, webapp-config-1.10-r14 in the tree and fixes this issue (as well as the issues from [bug #87708](show_bug.cgi?id=87708 "RESOLVED FIXED - webapp-config creates htdocs directory with permissions 777") and [bug #91785](show_bug.cgi?id=91785 "RESOLVED FIXED - net-www/webapp-config insecure temporary file creation")).  Tested with as many webapps in the tree as possible, without issue.  Once all arches have marked it stable (being called in [bug #91785](show_bug.cgi?id=91785 "RESOLVED FIXED - net-www/webapp-config insecure temporary file creation")), this bug can finally die - or at least, one can hope. ;) ```  [Comment 48](#c48)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-15 08:56:32 UTC  ``` Remaining file permissions issue will be handled by the webapp-config update on [bug #91785](show_bug.cgi?id=91785 "RESOLVED FIXED - net-www/webapp-config insecure temporary file creation") -> Closing this one. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=88831)
* - [XML](show_bug.cgi?ctype=xml&id=88831)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=88831)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=88831&product=Gentoo%20Security)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=88831&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=88831&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from www.vupen.com_b05afadb_20250124_205120.html ===

[![](/__ovh/common/img/logo-white.png)](https://www.ovhcloud.com/)

![](/__ovh/common/img/icon-traffic-cone.png)

# Site en construction

![](/__ovh/common/img/shadow.png)

Besoin d'assistance ou d'informations ?

[![](/__ovh/common/img/icon-book.png)
Guides](https://docs.ovh.com/fr/hosting/ "Guides")
[![](/__ovh/common/img/icon-speech-bubble.png)
Forum](https://community.ovh.com/ "Forum")
[![](/__ovh/common/img/icon-user-support.png)
Contact](https://help.ovhcloud.com/fr/ "Contact")
[![](/__ovh/common/img/icon-app-gear.png)
Espace Client](https://www.ovh.com/manager/ "Espace Client")

© Copyright 1999 [OVHcloud](https://www.ovhcloud.com/)

v1v2v3v4v5v6v7v8v9v10v11v12v13v14v15v16v17v18v19v20v21v22v23v24v25v26v27v28v29v30v31v32v33v34v35v36v37v38v39v40v41v42v43v44v45v46v47v48v49v50v51v52v53v54v55v56v57v58v59v60v61v62v63v64v65v66v67v68v69v70

u1u2u3u4u5u6u7u8u9u10u11u12u13u14u15u16u17u18u19u20u21u22u23u24u25u26u27u28u29u30u31u32u33u34u35u36u37u38u39u40u41u42u43u44u45u46u47u48u49u50u51u52u53u54u55u56u57u58u59u60u61u62u63u64u65u66u67u68u69

p1p2p3p4p5p6p7p8p9p10p11p12p13p14p15p16p17p18p19p20p21p22p23p24p25p26p27p28p29p30p31p32p33p34p35p36p37p38p39p40p41p42p43p44p45p46p47p48p49p50p51p52p53p54p55p56p57p58p59p60p61p62p63p64

e1e2e3e4e5e6e7e8e9e10e11e12e13e14e15e16e17e18e19e20e21e22e23e24e25e26e27e28e29e30e31e32e33e34e35e36e37e38e39e40e41e42e43e44e45e46e47e48e49e50e51e52e53

n1n2n3n4n5n6n7n8n9n10n11n12n13n14n15n16n17n18n19n20n21n22n23n24n25n26n27n28n29n30n31n32n33n34n35n36n37n38n39n40n41n42n43n44n45n46n47n48n49n50n51n52n53n54n55n56n57n58n59n60n61n62

---

c1c2c3c4c5c6c7c8c9c10c11c12c13c14c15c16c17c18c19c20c21c22c23c24c25c26c27c28c29c30c31c32c33c34c35c36c37c38c39c40c41c42c43c44c45c46c47c48c49c50c51

o1o2o3o4o5o6o7o8o9o10o11o12o13o14o15o16o17o18o19o20o21o22o23o24o25o26o27o28o29o30o31o32o33o34o35o36o37o38o39o40o41o42o43o44o45o46o47o48o49o50o51o52o53o54o55o56o57o58o59o60o61o62o63

m1m2m3m4m5m6m7m8m9m10m11m12m13m14m15m16m17m18m19m20m21m22m23m24m25m26m27m28m29m30m31m32m33m34m35m36m37m38m39m40m41m42m43m44m45m46m47m48m49m50m51m52m53m54m55m56m57m58m59m60m61



=== Content from bugs.gentoo.org_4d664533_20250126_032631.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 88831
dev-db/phpmyadmin installs template SQL insecurely.
Last modified: 2005-05-15 08:56:32 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=88831&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=88831&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 88831**](show_bug.cgi?id=88831)
- dev-db/phpmyadmin installs template SQL insecurely.

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
dev-db/phpmyadmin installs template SQL insecurely.

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Security | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Security "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Vulnerabilities ([show other bugs](buglist.cgi?component=Vulnerabilities&product=Gentoo%20Security&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | High minor | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Security | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | B4 [glsa] jaervosz | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2005-04-12 04:30 UTC by MAL | | --- | --- | | Modified: | 2005-05-15 08:56 UTC ([History](show_activity.cgi?id=88831)) | | CC List: | 2 users (show)  php-bugs web-apps | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [**fn\_get\_random\_string() pseudo-random string generation**](attachment.cgi?id=57779 "View the content of the attachment") (random-string-gen.patch,2.75 KB, patch)  [2005-05-01 16:13 UTC](#attach_57779 "Go to the comment associated with the attachment"), Lorenzo Hernández García-Hierro | *no flags* | [Details](attachment.cgi?id=57779&action=edit) | [Diff](attachment.cgi?id=57779&action=diff) | | [View All](attachment.cgi?bugid=88831&action=viewall)  [Add an attachment](attachment.cgi?bugid=88831&action=enter) (proposed patch, testcase, etc.) | | |   | Note You need to [log in](show_bug.cgi?id=88831&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  MAL    2005-04-12 04:30:01 UTC  ``` phpmyadmin installs /usr/share/webapps/phpmyadmin/<version>/sqlscripts/mysql/<version>_create.sql with world readable permissions.  That file contains the login password for the pma user, which means any user with shell access to the system can log in to phpmyadmin and modify the PMA_* tables.  Reproducible: Always Steps to Reproduce:    Expected Results:   The sqlscripts should be readble only by root. ```  [Comment 1](#c1)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-15 10:35:06 UTC  ``` php please advise. ```  [Comment 2](#c2)  Matthias Geerdsen (RETIRED)   gentoo-dev  2005-04-22 13:02:28 UTC  ``` CC'ing web-apps as they are listed in metadata.xml  the file is indeed worldreadable and contains the initial password for pma@localhost ```  [Comment 3](#c3)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-23 04:07:56 UTC  ``` The file (and the password therein) is only relevant for the very first phpmyadmin install - the new password never get ```  [Comment 4](#c4)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-23 04:07:56 UTC  ``` The file (and the password therein) is only relevant for the very first phpmyadmin install - the new password never get´s set when upgrading, even if you follow the (mistaken) post-install instructions. Actually, if you upgrade config.inc.php then phpmyadmin fails b/c the generated password is does not match the one stored in MySQL.   The ebuild should only generate the password if this is install (not upgrade). If the intention was to change the pma password every time phpmyadmin is upgraded, then this does not work. ```  [Comment 5](#c5)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-04-25 04:02:14 UTC  ``` Bumped in CVS, the 'mysql create' script is now installed with mode 0600. ```  [Comment 6](#c6)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-04-25 04:22:27 UTC  ``` Stable on x86.  Archs, please test and mark phpmyadmin-2.6.2-r1 stable. ```  [Comment 7](#c7)  Michael Hanselmann (hansmi) (RETIRED)   gentoo-dev  2005-04-25 10:45:16 UTC  ``` Stable on ppc. ```  [Comment 8](#c8)  Gustavo Zacarias (RETIRED)   gentoo-dev  2005-04-25 10:58:50 UTC  ``` sparc stable.  ```  [Comment 9](#c9)  Michael Hanselmann (hansmi) (RETIRED)   gentoo-dev  2005-04-25 11:10:57 UTC  ``` Stable on hppa. ```  [Comment 10](#c10)  Jan Brinkmann (RETIRED)   gentoo-dev  2005-04-25 12:36:33 UTC  ``` stable on amd64 ```  [Comment 11](#c11)  Bryan Østergaard (RETIRED)   gentoo-dev  2005-04-27 00:10:25 UTC  ``` Stable on alpha. ```  [Comment 12](#c12)  Thierry Carrez (RETIRED)   gentoo-dev  2005-04-27 00:35:57 UTC  ``` Ready for GLSA vote ```  [Comment 13](#c13)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-27 07:33:45 UTC  ``` As I understand this it is a very minor issue and only relevant on the very first install. So there is no point in upgrading -> I vote for NO GLSA. ```  [Comment 14](#c14)  Thierry Carrez (RETIRED)   gentoo-dev  2005-04-27 08:58:24 UTC  ``` Agreed ```  [Comment 15](#c15)  MAL    2005-04-27 09:16:18 UTC  ``` It's hardly minor - shell users on my server could modify the PMA database however they chose.  A lot of Gentoo servers only update such software when there are security fixes such as this. ```  [Comment 16](#c16)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-27 09:47:43 UTC  ``` Hadn't thought of that possiblity -> reopening. ```  [Comment 17](#c17)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-27 12:27:10 UTC  ``` I tend to vote YES for GLSA release now. ```  [Comment 18](#c18)  Thierry Carrez (RETIRED)   gentoo-dev  2005-04-27 13:36:37 UTC  ``` Would upgrading change the compromised password ? ```  [Comment 19](#c19)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 14:01:37 UTC  ``` [Comment #17](show_bug.cgi?id=88831#c17): No, it would not. Also, the only possibility to abuse this is the very first phpmyadmin install, the password never get ```  [Comment 20](#c20)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 14:01:37 UTC  ``` [Comment #17](show_bug.cgi?id=88831#c17): No, it would not. Also, the only possibility to abuse this is the very first phpmyadmin install, the password never get´s updated/used thereafter. ```  [Comment 21](#c21)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-27 14:05:02 UTC  ``` So this is really only a half fix, unless the original version is unmerged. ```  [Comment 22](#c22)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 14:48:28 UTC  ``` Yup, that ```  [Comment 23](#c23)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 14:48:28 UTC  ``` Yup, that´s related to the fact that the update instructions are broken. You´d have to purge PMA user account and related permissions from MySQL DB and only then the password would be changed if you follow the current instructions and import/install the PMA DB.  ```  [Comment 24](#c24)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-04-27 14:55:19 UTC  ``` Right, okies, I have a bumped ebuild - diff between -r1 and -r2 (new):  --- phpmyadmin-2.6.2-r1.ebuild  2005-04-27 10:22:41.000000000 +0100 +++ phpmyadmin-2.6.2-r2.ebuild  2005-04-27 22:34:16.000000000 +0100 @@ -17,6 +17,14 @@ DEPEND=">=dev-db/mysql-3.23.32 <dev-db/m         !<=dev-db/phpmyadmin-2.5.6"  S=${WORKDIR}/${MY_P}  +pkg_setup() { +       if has_version www-apps/wordpress; then +               if test -d "${ROOT}/usr/share/webapps/${PN}"; then +                       chmod 0600 "${ROOT}/usr/share/webapps/${PN}"/*/sqlscripts/mysql/*.sql +               fi +       fi +} +  src_unpack() {         unpack ${A}         cd ${S}  So this will take care of upgrades, too.  Any issues with this ? :)  If not, I'll commit the bump and finally go home after 16 hours. ;)  ```  [Comment 25](#c25)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-04-27 15:01:25 UTC  ``` s:www-apps-wordpress:dev-db/phpmyadmin:  Sorry, lack of sleep affecting hacking abilities. :( ```  [Comment 26](#c26)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 15:47:56 UTC  ``` Well, the _real_ problem is that this does not solve the _real_ problem. :-)   I.e, once a mischievous user gets the initial pma password, that password will remain valid for any number of upgrades unless the BOFH will ignore the instructions and really change the pma password manually.  So, besides this fix, the SQL script needs to be changed so that it actually changes the password for pma user when upgrading, like:  SET PASSWORD FOR 'pma'@'localhost' = PASSWORD('@pmapass@');  I ```  [Comment 27](#c27)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-27 15:47:56 UTC  ``` Well, the _real_ problem is that this does not solve the _real_ problem. :-)   I.e, once a mischievous user gets the initial pma password, that password will remain valid for any number of upgrades unless the BOFH will ignore the instructions and really change the pma password manually.  So, besides this fix, the SQL script needs to be changed so that it actually changes the password for pma user when upgrading, like:  SET PASSWORD FOR 'pma'@'localhost' = PASSWORD('@pmapass@');  I´m no MySQL hacker but the password never got changed after upgrading and importing the SQL script... ```  [Comment 28](#c28)  John Mylchreest (RETIRED)   gentoo-dev  2005-04-28 04:53:54 UTC  ``` Personal opinions are that as a distribution it isnt our position to randomly change passwords for applications on upgrade. The real issue here is that the install was setting insecure permissions, which has since been rectified. The repercussions of this are a potentially insecure password. It should however be in our responsibility to recommend a password change to our users. ```  [Comment 29](#c29)  Thierry Carrez (RETIRED)   gentoo-dev  2005-04-28 09:38:54 UTC  ``` I agree we need a GLSA, don't forget to state that people should consider their password as potentially locally compromised and act accordingly (change password, check integrity...) ```  [Comment 30](#c30)  Jakub Moc (RETIRED)   gentoo-dev  2005-04-28 10:42:46 UTC  ``` #24, 25: Sounds reasonable, the ebuild should not be more complicated than necessary... Just a recommendation to change the password should be enough.  ```  [Comment 31](#c31)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-04-30 13:57:42 UTC  ``` Thx everyone.  GLSA 200504-30 ```  [Comment 32](#c32)  eromang    2005-05-01 02:51:59 UTC  ``` Hello,  config.inc.php is still world readable ...  should be :  chown apache:apache && chmod o-r config.inc.php  Regards ```  [Comment 33](#c33)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-01 03:03:35 UTC  ``` web-apps back to you. ```  [Comment 34](#c34)  solar (RETIRED)   gentoo-dev  2005-05-01 06:29:51 UTC  ``` chown apache:apache <-- this also seems wrong. No reason for the webserver to need  to have the ability to write to said file. root:apache 640 is ideal if apache  needs to read from it. btw pretty much any file apache owned is world readable as it's a trivial task to  just lynx <http://localhost/filename> ```  [Comment 35](#c35)  Lorenzo Hernández García-Hierro    2005-05-01 16:13:15 UTC  ``` Created [attachment 57779](attachment.cgi?id=57779 "fn_get_random_string() pseudo-random string generation") [[details](attachment.cgi?id=57779&action=edit "fn_get_random_string() pseudo-random string generation"), [diff](attachment.cgi?id=57779&action=diff "fn_get_random_string() pseudo-random string generation")] fn_get_random_string() pseudo-random string generation  Brief description: "This patch adds support for generation of pseudo-random string (33 bytes) using a simplistic seeding "algorithm" that uses the /dev/urandom pseudo-random  numbers generator device to gather  entropy, and MD5 to calculate pseudo-random  sums to be used for calculating the final MD5 sum, that is, the pseudo-random string to be used finally (ie. for generating a random password value to be used in automatically-created configuration or installation files)."  I hadn't time to work more on it, but it looks sane. The only thing that can be a little issue is the entropy pool exhausting in server environments, that is, our main targeted as of webapp-config. It would happen once we ask for more entropy than the amount the kernel is prepared to fill, a common case when we can't feed the pool with interrupt-generated entropy. A solution to this is to use Robert Love's netdev-random patches that cause network drivers interrupts to feed entropy to the pool, but I doubt on the impact of this patch (though it's quite useful at first view).  Note the stupid simplicity of the patch itself, but I just thought it could help.  Cheers, Lorenzo. ```  [Comment 36](#c36)  Aaron Walker (RETIRED)   gentoo-dev  2005-05-02 17:56:45 UTC  ``` 2.6.2-r2 is in cvs.  config.inc.php is now installed 0640 root:apache. ```  [Comment 37](#c37)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-02 22:16:57 UTC  ``` Thx Aaron. This seems to only fix new installs so we'd still have to do a manual chmod for existing install.s ```  [Comment 38](#c38)  Robert Paskowitz (RETIRED)   gentoo-dev  2005-05-02 23:35:59 UTC  ``` Regarding the permissions on config.inc.php, when there is an existing install, the config protected file retains the permissions root:root and 644.  # ls -l ._cfg0001_config.inc.php  -rw-r--r--  1 root root 39199 May  3 01:48 ._cfg0001_config.inc.php  ```  [Comment 39](#c39)  Robert Paskowitz (RETIRED)   gentoo-dev  2005-05-03 00:29:17 UTC  ``` I believe I've narrowed down the issue to when the file is config protected to /usr/sbin/webapp-config, around line 1966 in whatever-vesion-I-have:  case "$my_type" in   ...                 config-owned)                         # config-owned files are copied in, and then are                         # owned by $G_CONFIG_UID:$G_CONFIG_GID                          libsh_erun cp "$MY_APPDIR/$1/$2" "$3/$my_file"                         libsh_erun chown "$G_CONFIG_UID:$G_CONFIG_GID" "$3/$my_file"                         libsh_erun chmod "$G_PERMS_CONFIGOWNED_FILE" "$3/$my_file"                         fn_add_contents "$MY_INSTALLCONTENTS" "file" "$my_type" "$3" "$2" "$4"                         ;; ...   So, basically, the owner and permissions are quite forced, and I don't see any way to overcome this from the ebuild. Personally, I think webapp-config should follow what portage does (the actual copy is done with movefile(), which states:  "moves a file from src to dest, preserving all permissions and attributes; mtime will be preserved even when moving across filesystems.  Returns true on success and false on failure.  Move is atomic."  I find preserving all permissions and attributes to be quite important. ```  [Comment 40](#c40)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-03 09:50:50 UTC  ``` Elfyn please advise. ```  [Comment 41](#c41)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-05-03 16:38:53 UTC  ``` Apologies for the late response.  I'm cutting patches for this now that fixes the permissions used for config files such as pma's config.inc.php, and also fixes another fubar where site directories (typically /var/www/$site and /var/www/$site/htdocs) are created mode 777.  There are a few remaining issues I have to work out, but I'll have those sorted in a couple of hours (sorry, keeps getting longer :/). ```  [Comment 42](#c42)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-05 22:22:47 UTC  ``` Elfyn, a couple of hours have passed, what is the current status? ```  [Comment 43](#c43)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-05-07 07:52:38 UTC  ``` Finally, we have an updated webapp-config (net-www/webapp-config-1.10-r13) to deal with the problem above.  Permissions on configuration files are now preserved, and webapp config files will be installed in the webroot 640 root:apache by default (requires that the webapp-config config file (/etc/vhosts/webapp-config be etc-update'd).  This rev bump is package.mask'd as it _might_ break an app or two (initial tests are good, though), and will stay there until I've checked out other www-apps packages.  (/me promises this _will_ not take days ;)  Again, apologies for the huge delays.  Please locally unmask and test with www-apps/phpmyadmin-2.6.2-r2.  Thanks ! ```  [Comment 44](#c44)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-07 10:36:56 UTC  ``` Elfyn, we can mark webapp-config stable on this bug as well. Is it ready for that? ```  [Comment 45](#c45)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-05-07 11:22:59 UTC  ``` It looks that way :)  I have 4 more packages to test out, and if they look good this webapp-config will be going stable ASAP (it will also contain a fix for [bug #91785](show_bug.cgi?id=91785 "RESOLVED FIXED - net-www/webapp-config insecure temporary file creation") once i've finished testing the above). ```  [Comment 46](#c46)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-07 11:31:15 UTC  ``` Thx Elfyn, please let me know when you have finished your tests. ```  [Comment 47](#c47)  Elfyn McBratney (beu) (RETIRED)   gentoo-dev  2005-05-08 22:19:20 UTC  ``` Okies, webapp-config-1.10-r14 in the tree and fixes this issue (as well as the issues from [bug #87708](show_bug.cgi?id=87708 "RESOLVED FIXED - webapp-config creates htdocs directory with permissions 777") and [bug #91785](show_bug.cgi?id=91785 "RESOLVED FIXED - net-www/webapp-config insecure temporary file creation")).  Tested with as many webapps in the tree as possible, without issue.  Once all arches have marked it stable (being called in [bug #91785](show_bug.cgi?id=91785 "RESOLVED FIXED - net-www/webapp-config insecure temporary file creation")), this bug can finally die - or at least, one can hope. ;) ```  [Comment 48](#c48)  Sune Kloppenborg Jeppesen (RETIRED)   gentoo-dev  2005-05-15 08:56:32 UTC  ``` Remaining file permissions issue will be handled by the webapp-config update on [bug #91785](show_bug.cgi?id=91785 "RESOLVED FIXED - net-www/webapp-config insecure temporary file creation") -> Closing this one. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=88831)
* - [XML](show_bug.cgi?ctype=xml&id=88831)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=88831)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=88831&product=Gentoo%20Security)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=88831&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=88831&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from security.gentoo.org_6dd0deb2_20250124_205120.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# phpMyAdmin: Insecure SQL script installation — GLSA **200504-30**

phpMyAdmin leaves the SQL install script with insecure permissions,
potentially leading to a database compromise.

### Affected packages

| Package | **dev-db/phpmyadmin** on all architectures |
| --- | --- |
| Affected versions | < **2.6.2-r1** |
| Unaffected versions | >= **2.6.2-r1** |

### Background

phpMyAdmin is a tool written in PHP intended to handle the
administration of MySQL databases from a web-browser. phpMyAdmin uses a
pma MySQL user to control the linked-tables infrastructure. The SQL
install script sets the initial password for the pma user.

### Description

The phpMyAdmin installation process leaves the SQL install script with
insecure permissions.

### Impact

A local attacker could exploit this vulnerability to obtain the initial
phpMyAdmin password and from there obtain information about databases
accessible by phpMyAdmin.

### Workaround

Change the password for the phpMyAdmin MySQL user (pma):

`mysql -u root -p
SET PASSWORD FOR 'pma'@'localhost' = PASSWORD('MyNewPassword');`

Update your phpMyAdmin config.inc.php:

`$cfg['Servers'][$i]['controlpass'] = 'MyNewPassword';`
### Resolution

All phpMyAdmin users should change password for the pma user as
described above and upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=dev-db/phpmyadmin-2.6.2-r1"
```
### References

* [CVE-2005-1392](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2005-1392)

**Release date**

April 30, 2005

**Latest revision**

May 22, 2006: 02

**Severity**

normal

**Exploitable**

local

**Bugzilla entries**

* [88831](https://bugs.gentoo.org/show_bug.cgi?id=88831)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**


