=== Content from www.openwall.com_ba74dd22_20250124_152938.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](2) [[next>]](4) [[<thread-prev]](../../../2010/09/22/3) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <Pine.GSO.4.64.1009241357250.5338@faron.mitre.org>
Date: Fri, 24 Sep 2010 14:08:01 -0400 (EDT)
From: "Steven M. Christey" <coley@...us.mitre.org>
To: oss-security@...ts.openwall.com
cc: David Malcolm <dmalcolm@...hat.com>,
        "Steven M. Christey" <coley@...us.mitre.org>
Subject: Re: CVE Request -- Python -- accept() implementation
 in async core is broken => more subcases

On Wed, 22 Sep 2010, Josh Bressers wrote:

> Any update on this Steve?

This was a weird one to deal with.  There are a couple different
approaches.

We don't capture API "design limitations" in CVE (it would basically be
like assigning a CVE to "strcpy can be called with parameters that are
longer than the output buffer" or "setuid requires that the programmer
must check the return code to ensure that privileges were dropped.")

In this case, there is a "proper" way to handle the accept() behavior;
i.e. by catching the appropriate exceptions and accounting for an unusual
return value, the programmer can use the API safely.  That would argue for
treating it like strcpy/setuid/etc. design limitations, and holding
application programmers "responsible" for using it incorrectly.

However, there isn't some security-relevant documentation about these
specific API limitations.  So, a CVE could be assigned for the missing
documentation; alternately, we could treat it as "undocumented behavior"
in the API.  (This wouldn't be the first CVE related to documentation.)

Then, individual programs that happen to use the unpatched/older Pythons
can be held responsible for not accounting for this; similar to how we
"blame" applications for allowing XSS due to some non-standard
implementations within Internet Explorer, or Firefox, etc.

So:

CVE-2010-3492 - Python poor documentation of accept() behavior

CVE-2010-3493 - smtpd.py not catching errors generated by handle_accept

CVE-2010-3494 - pyftpdlib not catching errors generated by handle_accept

CVE-2010-3495 - ZODB not catching errors generated by handle_accept

- Steve

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from code.google.com_efe34ce8_20250124_152936.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgiampaolo%2Fpyftpdlib)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgiampaolo%2Fpyftpdlib)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=giampaolo%2Fpyftpdlib)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[giampaolo](/giampaolo)
/
**[pyftpdlib](/giampaolo/pyftpdlib)**
Public

* [Notifications](/login?return_to=%2Fgiampaolo%2Fpyftpdlib) You must be signed in to change notification settings
* [Fork
  264](/login?return_to=%2Fgiampaolo%2Fpyftpdlib)
* [Star
   1.7k](/login?return_to=%2Fgiampaolo%2Fpyftpdlib)

Extremely fast and scalable Python FTP server library

### License

[MIT license](/giampaolo/pyftpdlib/blob/master/LICENSE)

[1.7k
stars](/giampaolo/pyftpdlib/stargazers) [264
forks](/giampaolo/pyftpdlib/forks) [Branches](/giampaolo/pyftpdlib/branches) [Tags](/giampaolo/pyftpdlib/tags) [Activity](/giampaolo/pyftpdlib/activity)
 [Star](/login?return_to=%2Fgiampaolo%2Fpyftpdlib)

 [Notifications](/login?return_to=%2Fgiampaolo%2Fpyftpdlib) You must be signed in to change notification settings

* [Code](/giampaolo/pyftpdlib)
* [Issues
  119](/giampaolo/pyftpdlib/issues)
* [Pull requests
  16](/giampaolo/pyftpdlib/pulls)
* [Actions](/giampaolo/pyftpdlib/actions)
* [Security](/giampaolo/pyftpdlib/security)
* [Insights](/giampaolo/pyftpdlib/pulse)

Additional navigation options

* [Code](/giampaolo/pyftpdlib)
* [Issues](/giampaolo/pyftpdlib/issues)
* [Pull requests](/giampaolo/pyftpdlib/pulls)
* [Actions](/giampaolo/pyftpdlib/actions)
* [Security](/giampaolo/pyftpdlib/security)
* [Insights](/giampaolo/pyftpdlib/pulse)

# giampaolo/pyftpdlib

    master[Branches](/giampaolo/pyftpdlib/branches)[Tags](/giampaolo/pyftpdlib/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[1,458 Commits](/giampaolo/pyftpdlib/commits/master/) | | |
| [.github](/giampaolo/pyftpdlib/tree/master/.github ".github") | | [.github](/giampaolo/pyftpdlib/tree/master/.github ".github") |  |  |
| [demo](/giampaolo/pyftpdlib/tree/master/demo "demo") | | [demo](/giampaolo/pyftpdlib/tree/master/demo "demo") |  |  |
| [docs](/giampaolo/pyftpdlib/tree/master/docs "docs") | | [docs](/giampaolo/pyftpdlib/tree/master/docs "docs") |  |  |
| [pyftpdlib](/giampaolo/pyftpdlib/tree/master/pyftpdlib "pyftpdlib") | | [pyftpdlib](/giampaolo/pyftpdlib/tree/master/pyftpdlib "pyftpdlib") |  |  |
| [scripts](/giampaolo/pyftpdlib/tree/master/scripts "scripts") | | [scripts](/giampaolo/pyftpdlib/tree/master/scripts "scripts") |  |  |
| [.gitignore](/giampaolo/pyftpdlib/blob/master/.gitignore ".gitignore") | | [.gitignore](/giampaolo/pyftpdlib/blob/master/.gitignore ".gitignore") |  |  |
| [CREDITS](/giampaolo/pyftpdlib/blob/master/CREDITS "CREDITS") | | [CREDITS](/giampaolo/pyftpdlib/blob/master/CREDITS "CREDITS") |  |  |
| [HISTORY.rst](/giampaolo/pyftpdlib/blob/master/HISTORY.rst "HISTORY.rst") | | [HISTORY.rst](/giampaolo/pyftpdlib/blob/master/HISTORY.rst "HISTORY.rst") |  |  |
| [LICENSE](/giampaolo/pyftpdlib/blob/master/LICENSE "LICENSE") | | [LICENSE](/giampaolo/pyftpdlib/blob/master/LICENSE "LICENSE") |  |  |
| [MANIFEST.in](/giampaolo/pyftpdlib/blob/master/MANIFEST.in "MANIFEST.in") | | [MANIFEST.in](/giampaolo/pyftpdlib/blob/master/MANIFEST.in "MANIFEST.in") |  |  |
| [Makefile](/giampaolo/pyftpdlib/blob/master/Makefile "Makefile") | | [Makefile](/giampaolo/pyftpdlib/blob/master/Makefile "Makefile") |  |  |
| [README.rst](/giampaolo/pyftpdlib/blob/master/README.rst "README.rst") | | [README.rst](/giampaolo/pyftpdlib/blob/master/README.rst "README.rst") |  |  |
| [make.bat](/giampaolo/pyftpdlib/blob/master/make.bat "make.bat") | | [make.bat](/giampaolo/pyftpdlib/blob/master/make.bat "make.bat") |  |  |
| [pyproject.toml](/giampaolo/pyftpdlib/blob/master/pyproject.toml "pyproject.toml") | | [pyproject.toml](/giampaolo/pyftpdlib/blob/master/pyproject.toml "pyproject.toml") |  |  |
| [setup.py](/giampaolo/pyftpdlib/blob/master/setup.py "setup.py") | | [setup.py](/giampaolo/pyftpdlib/blob/master/setup.py "setup.py") |  |  |
| View all files | | |

## Repository files navigation

* README
* MIT license
[![Downloads](https://camo.githubusercontent.com/3302e299aa1107ab24463d60faa1b3d588255114506521c61eea8f857df9be15/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f7079667470646c69622e737667)](https://pepy.tech/project/pyftpdlib) [![Github stars](https://camo.githubusercontent.com/5a38ee6a52537bb989eb9ede7d2bd53eba11550ebea914895c5ef2598518abe0/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f6769616d70616f6c6f2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/stargazers) [![Github forks](https://camo.githubusercontent.com/73433aaa011d4b1b18b58fbf09cd5856700939aad5a59788599a9d3d69316937/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f666f726b732f6769616d70616f6c6f2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/network/members) [![Contributors](https://camo.githubusercontent.com/0df10cea93a0a4caffe0685f49bb0abb1cb70d6ba940ce2b9ffd2c7e27895711/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f636f6e7472696275746f72732f6769616d70616f6c6f2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/graphs/contributors)
[![Latest version](https://camo.githubusercontent.com/47a1255b797241faa45479e25dc0e1d92edc824927e2bbb314d4cd4360cede5f/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f7079667470646c69622e7376673f6c6162656c3d70797069)](https://pypi.org/project/pyftpdlib) [![Binary packages](https://camo.githubusercontent.com/b25fce4758205ab6017a5cab2d2840c8eb77fc4822021ef41a4350a588ce97c1/68747470733a2f2f7265706f6c6f67792e6f72672f62616467652f74696e792d7265706f732f707974686f6e3a7079667470646c69622e737667)](https://repology.org/metapackage/python%3Apyftpdlib/versions) [![License](https://camo.githubusercontent.com/bd7f5360f1fe45a2b0c950fd1eee9da2b23ac15040de51f0eea81c19ae8742db/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/blob/master/LICENSE)
[![GH actions](https://camo.githubusercontent.com/c5458f220fee18ed63d4e67fde1457133dec7291b1a084b7c4f7b4b75dadd2fe/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f6769616d70616f6c6f2f7079667470646c69622f2e6769746875622f776f726b666c6f77732f74657374732e796d6c)](https://github.com/giampaolo/pyftpdlib/actions) [![Documentation Status](https://camo.githubusercontent.com/202de5ae4e0544f9e8ac2c083343b843a106f907ff5ef94d563fd2f1699a9bad/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f7079667470646c69622f62616467652f3f76657273696f6e3d6c6174657374)](https://pyftpdlib.readthedocs.io/en/latest/) [![Twitter Follow](https://camo.githubusercontent.com/f1d83acf6a8ccedb437f86f280e270cd9743b291564d159352d958d9f0954549/68747470733a2f2f696d672e736869656c64732e696f2f747769747465722f666f6c6c6f772f67726f646f6c612e7376673f6c6162656c3d666f6c6c6f77267374796c653d666c6174266c6f676f3d74776974746572266c6f676f436f6c6f723d344641444646)](https://twitter.com/grodola)

## Quick links

* [Home](https://github.com/giampaolo/pyftpdlib)
* [Documentation](https://pyftpdlib.readthedocs.io)
* [Download](https://pypi.org/project/pyftpdlib/)
* [Mailing list](https://groups.google.com/group/pyftpdlib/topics)
* [What's new](https://github.com/giampaolo/pyftpdlib/blob/master/HISTORY.rst)

## About

Python FTP server library provides a high-level portable interface to easily
write very efficient, scalable and asynchronous FTP servers with Python. It is
the most complete [RFC-959](https://datatracker.ietf.org/doc/html/rfc959.html) FTP server implementation available for [Python](https://www.python.org/)
programming language.

## Features

* Extremely **lightweight**, **fast** and **scalable** (see
  [why](https://github.com/giampaolo/pyftpdlib/issues/203) and
  [benchmarks](https://pyftpdlib.readthedocs.io/en/latest/benchmarks.html)).
* Uses **sendfile(2)** (see [pysendfile](https://github.com/giampaolo/pysendfile))
  system call for uploads (Linux only).
* Uses `epoll()` / `kqueue()` / `select()` to handle concurrency
  asynchronously.
* ...But can optionally skip to a [multiple thread / process](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html#changing-the-concurrency-model) model (as in:
  you'll be free to block or use slow filesystems).
* Portable: entirely written in pure Python.
* Supports **FTPS** ([RFC-4217](https://datatracker.ietf.org/doc/html/rfc4217)), **IPv6** ([RFC-2428](https://datatracker.ietf.org/doc/html/rfc2428)), **Unicode** file
  names ([RFC-2640](https://datatracker.ietf.org/doc/html/rfc2640)), **MLSD/MLST** commands ([RFC-3659](https://datatracker.ietf.org/doc/html/rfc3659)).
* Support for virtual users and virtual filesystem.
* Flexible system of "authorizers" able to manage both "virtual" and
  "real" users on on both
  [UNIX](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html#unix-ftp-server)
  and
  [Windows](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html#windows-ftp-server).

## Performances

Despite being written in an interpreted language, pyftpdlib has transfer rates
comparable or superior to common UNIX FTP servers written in C. It usually
tends to scale better (see [benchmarks](https://pyftpdlib.readthedocs.io/en/latest/benchmarks.html)) because whereas vsftpd and proftpd
use multiple processes to achieve concurrency, pyftpdlib only uses one (see
[the C10K problem](http://www.kegel.com/c10k.html)).

### pyftpdlib vs. proftpd 1.3.4

| **benchmark type** | **pyftpdlib** | **proftpd** | **speedup** |
| --- | --- | --- | --- |
| STOR (client -> server) | 585.90 MB/sec | 600.49 MB/sec | -0.02x |
| RETR (server -> client) | 1652.72 MB/sec | 1524.05 MB/sec | **+0.08** |
| 300 concurrent clients (connect, login) | 0.19 secs | 9.98 secs | **+51x** |
| STOR (1 file with 300 idle clients) | 585.59 MB/sec | 518.55 MB/sec | **+0.1x** |
| RETR (1 file with 300 idle clients) | 1497.58 MB/sec | 1478.19 MB/sec | 0x |
| 300 concurrent clients (RETR 10M file) | 3.41 secs | 3.60 secs | **+0.05x** |
| 300 concurrent clients (STOR 10M file) | 8.60 secs | 11.56 secs | **+0.3x** |
| 300 concurrent clients (QUIT) | 0.03 secs | 0.39 secs | **+12x** |

### pyftpdlib vs. vsftpd 2.3.5

| **benchmark type** | **pyftpdlib** | **vsftpd** | **speedup** |
| --- | --- | --- | --- |
| STOR (client -> server) | 585.90 MB/sec | 611.73 MB/sec | -0.04x |
| RETR (server -> client) | 1652.72 MB/sec | 1512.92 MB/sec | **+0.09** |
| 300 concurrent clients (connect, login) | 0.19 secs | 20.39 secs | **+106x** |
| STOR (1 file with 300 idle clients) | 585.59 MB/sec | 610.23 MB/sec | -0.04x |
| RETR (1 file with 300 idle clients) | 1497.58 MB/sec | 1493.01 MB/sec | 0x |
| 300 concurrent clients (RETR 10M file) | 3.41 secs | 3.67 secs | **+0.07x** |
| 300 concurrent clients (STOR 10M file) | 8.60 secs | 9.82 secs | **+0.07x** |
| 300 concurrent clients (QUIT) | 0.03 secs | 0.01 secs | +0.14x |

For more benchmarks see [here](https://pyftpdlib.readthedocs.io/en/latest/benchmarks.html).

## Command line usage

Start a FTP server, with an anonymous user with write permissions, on port 2121:

```
$ python3 -m pyftpdlib --write
RuntimeWarning: write permissions assigned to anonymous user.
  self._check_permissions(username, perm)
[I 2024-06-23 13:49:35] concurrency model: async
[I 2024-06-23 13:49:35] masquerade (NAT) address: None
[I 2024-06-23 13:49:35] passive ports: None
[I 2024-06-23 13:49:35] >>> starting FTP server on 0.0.0.0:2121, pid=763634 <<<
```

## API usage

```
>>> from pyftpdlib.authorizers import DummyAuthorizer
>>> from pyftpdlib.handlers import FTPHandler
>>> from pyftpdlib.servers import FTPServer
>>>
>>> authorizer = DummyAuthorizer()
>>> authorizer.add_user("user", "12345", "/home/giampaolo", perm="elradfmwMT")
>>> authorizer.add_anonymous("/home/nobody")
>>>
>>> handler = FTPHandler
>>> handler.authorizer = authorizer
>>>
>>> server = FTPServer(("127.0.0.1", 21), handler)
>>> server.serve_forever()
[I 13-02-19 10:55:42] >>> starting FTP server on 127.0.0.1:21 <<<
[I 13-02-19 10:55:42] poller: <class 'pyftpdlib.ioloop.Epoll'>
[I 13-02-19 10:55:42] masquerade (NAT) address: None
[I 13-02-19 10:55:42] passive ports: None
[I 13-02-19 10:55:42] use sendfile(2): True
[I 13-02-19 10:55:45] 127.0.0.1:34178-[] FTP session opened (connect)
[I 13-02-19 10:55:48] 127.0.0.1:34178-[user] USER 'user' logged in.
[I 13-02-19 10:56:27] 127.0.0.1:34179-[user] RETR /home/giampaolo/.vimrc completed=1 bytes=1700 seconds=0.001
[I 13-02-19 10:56:39] 127.0.0.1:34179-[user] FTP session closed (disconnect).
```

For other code samples read the [tutorial](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html)

## Donate

A lot of time and effort went into making pyftpdlib as it is right now.
If you feel pyftpdlib is useful to you or your business and want to support its
future development please consider [donating](https://gmpy.dev/donate) me some money.

## About

Extremely fast and scalable Python FTP server library

### Topics

[python](/topics/python "Topic: python")
[asynchronous](/topics/asynchronous "Topic: asynchronous")
[ftp](/topics/ftp "Topic: ftp")
[ftp-server](/topics/ftp-server "Topic: ftp-server")
[ftps](/topics/ftps "Topic: ftps")

### Resources

[Readme](#readme-ov-file)
### License

[MIT license](#MIT-1-ov-file)

[Activity](/giampaolo/pyftpdlib/activity)
### Stars

[**1.7k**
stars](/giampaolo/pyftpdlib/stargazers)
### Watchers

[**53**
watching](/giampaolo/pyftpdlib/watchers)
### Forks

[**264**
forks](/giampaolo/pyftpdlib/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fgiampaolo%2Fpyftpdlib&report=giampaolo+%28user%29)

## Sponsor this project

* <https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ZSSF7G42VA2XE>

[Learn more about GitHub Sponsors](/sponsors)

## [Contributors 35](/giampaolo/pyftpdlib/graphs/contributors)

* [![@giampaolo](https://avatars.githubusercontent.com/u/681260?s=64&v=4)](https://github.com/giampaolo)
* [![@tahirijaz24](https://avatars.githubusercontent.com/u/30835856?s=64&v=4)](https://github.com/tahirijaz24)
* [![@jloden](https://avatars.githubusercontent.com/u/7715199?s=64&v=4)](https://github.com/jloden)
* [![@Ryanb58](https://avatars.githubusercontent.com/u/3086302?s=64&v=4)](https://github.com/Ryanb58)
* [![@gliptak](https://avatars.githubusercontent.com/u/50109?s=64&v=4)](https://github.com/gliptak)
* [![@andrewshulgin](https://avatars.githubusercontent.com/u/3032891?s=64&v=4)](https://github.com/andrewshulgin)
* [![@lurch](https://avatars.githubusercontent.com/u/476186?s=64&v=4)](https://github.com/lurch)
* [![@emilv](https://avatars.githubusercontent.com/u/1684914?s=64&v=4)](https://github.com/emilv)
* [![@sbraz](https://avatars.githubusercontent.com/u/4833332?s=64&v=4)](https://github.com/sbraz)
* [![@stat1c-void](https://avatars.githubusercontent.com/u/9142081?s=64&v=4)](https://github.com/stat1c-void)
* [![@davetapley](https://avatars.githubusercontent.com/u/48232?s=64&v=4)](https://github.com/davetapley)
* [![@D3X](https://avatars.githubusercontent.com/u/82002?s=64&v=4)](https://github.com/D3X)
* [![@pjona](https://avatars.githubusercontent.com/u/170732?s=64&v=4)](https://github.com/pjona)
* [![@PonyPC](https://avatars.githubusercontent.com/u/284594?s=64&v=4)](https://github.com/PonyPC)

[+ 21 contributors](/giampaolo/pyftpdlib/graphs/contributors)

## Languages

* [Python
  98.3%](/giampaolo/pyftpdlib/search?l=python)
* [Makefile
  1.6%](/giampaolo/pyftpdlib/search?l=makefile)
* [Batchfile
  0.1%](/giampaolo/pyftpdlib/search?l=batchfile)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from code.google.com_5c31ec22_20250124_152936.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgiampaolo%2Fpyftpdlib)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgiampaolo%2Fpyftpdlib)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=giampaolo%2Fpyftpdlib)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[giampaolo](/giampaolo)
/
**[pyftpdlib](/giampaolo/pyftpdlib)**
Public

* [Notifications](/login?return_to=%2Fgiampaolo%2Fpyftpdlib) You must be signed in to change notification settings
* [Fork
  264](/login?return_to=%2Fgiampaolo%2Fpyftpdlib)
* [Star
   1.7k](/login?return_to=%2Fgiampaolo%2Fpyftpdlib)

Extremely fast and scalable Python FTP server library

### License

[MIT license](/giampaolo/pyftpdlib/blob/master/LICENSE)

[1.7k
stars](/giampaolo/pyftpdlib/stargazers) [264
forks](/giampaolo/pyftpdlib/forks) [Branches](/giampaolo/pyftpdlib/branches) [Tags](/giampaolo/pyftpdlib/tags) [Activity](/giampaolo/pyftpdlib/activity)
 [Star](/login?return_to=%2Fgiampaolo%2Fpyftpdlib)

 [Notifications](/login?return_to=%2Fgiampaolo%2Fpyftpdlib) You must be signed in to change notification settings

* [Code](/giampaolo/pyftpdlib)
* [Issues
  119](/giampaolo/pyftpdlib/issues)
* [Pull requests
  16](/giampaolo/pyftpdlib/pulls)
* [Actions](/giampaolo/pyftpdlib/actions)
* [Security](/giampaolo/pyftpdlib/security)
* [Insights](/giampaolo/pyftpdlib/pulse)

Additional navigation options

* [Code](/giampaolo/pyftpdlib)
* [Issues](/giampaolo/pyftpdlib/issues)
* [Pull requests](/giampaolo/pyftpdlib/pulls)
* [Actions](/giampaolo/pyftpdlib/actions)
* [Security](/giampaolo/pyftpdlib/security)
* [Insights](/giampaolo/pyftpdlib/pulse)

# giampaolo/pyftpdlib

    master[Branches](/giampaolo/pyftpdlib/branches)[Tags](/giampaolo/pyftpdlib/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[1,458 Commits](/giampaolo/pyftpdlib/commits/master/) | | |
| [.github](/giampaolo/pyftpdlib/tree/master/.github ".github") | | [.github](/giampaolo/pyftpdlib/tree/master/.github ".github") |  |  |
| [demo](/giampaolo/pyftpdlib/tree/master/demo "demo") | | [demo](/giampaolo/pyftpdlib/tree/master/demo "demo") |  |  |
| [docs](/giampaolo/pyftpdlib/tree/master/docs "docs") | | [docs](/giampaolo/pyftpdlib/tree/master/docs "docs") |  |  |
| [pyftpdlib](/giampaolo/pyftpdlib/tree/master/pyftpdlib "pyftpdlib") | | [pyftpdlib](/giampaolo/pyftpdlib/tree/master/pyftpdlib "pyftpdlib") |  |  |
| [scripts](/giampaolo/pyftpdlib/tree/master/scripts "scripts") | | [scripts](/giampaolo/pyftpdlib/tree/master/scripts "scripts") |  |  |
| [.gitignore](/giampaolo/pyftpdlib/blob/master/.gitignore ".gitignore") | | [.gitignore](/giampaolo/pyftpdlib/blob/master/.gitignore ".gitignore") |  |  |
| [CREDITS](/giampaolo/pyftpdlib/blob/master/CREDITS "CREDITS") | | [CREDITS](/giampaolo/pyftpdlib/blob/master/CREDITS "CREDITS") |  |  |
| [HISTORY.rst](/giampaolo/pyftpdlib/blob/master/HISTORY.rst "HISTORY.rst") | | [HISTORY.rst](/giampaolo/pyftpdlib/blob/master/HISTORY.rst "HISTORY.rst") |  |  |
| [LICENSE](/giampaolo/pyftpdlib/blob/master/LICENSE "LICENSE") | | [LICENSE](/giampaolo/pyftpdlib/blob/master/LICENSE "LICENSE") |  |  |
| [MANIFEST.in](/giampaolo/pyftpdlib/blob/master/MANIFEST.in "MANIFEST.in") | | [MANIFEST.in](/giampaolo/pyftpdlib/blob/master/MANIFEST.in "MANIFEST.in") |  |  |
| [Makefile](/giampaolo/pyftpdlib/blob/master/Makefile "Makefile") | | [Makefile](/giampaolo/pyftpdlib/blob/master/Makefile "Makefile") |  |  |
| [README.rst](/giampaolo/pyftpdlib/blob/master/README.rst "README.rst") | | [README.rst](/giampaolo/pyftpdlib/blob/master/README.rst "README.rst") |  |  |
| [make.bat](/giampaolo/pyftpdlib/blob/master/make.bat "make.bat") | | [make.bat](/giampaolo/pyftpdlib/blob/master/make.bat "make.bat") |  |  |
| [pyproject.toml](/giampaolo/pyftpdlib/blob/master/pyproject.toml "pyproject.toml") | | [pyproject.toml](/giampaolo/pyftpdlib/blob/master/pyproject.toml "pyproject.toml") |  |  |
| [setup.py](/giampaolo/pyftpdlib/blob/master/setup.py "setup.py") | | [setup.py](/giampaolo/pyftpdlib/blob/master/setup.py "setup.py") |  |  |
| View all files | | |

## Repository files navigation

* README
* MIT license
[![Downloads](https://camo.githubusercontent.com/3302e299aa1107ab24463d60faa1b3d588255114506521c61eea8f857df9be15/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f7079667470646c69622e737667)](https://pepy.tech/project/pyftpdlib) [![Github stars](https://camo.githubusercontent.com/5a38ee6a52537bb989eb9ede7d2bd53eba11550ebea914895c5ef2598518abe0/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f6769616d70616f6c6f2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/stargazers) [![Github forks](https://camo.githubusercontent.com/73433aaa011d4b1b18b58fbf09cd5856700939aad5a59788599a9d3d69316937/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f666f726b732f6769616d70616f6c6f2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/network/members) [![Contributors](https://camo.githubusercontent.com/0df10cea93a0a4caffe0685f49bb0abb1cb70d6ba940ce2b9ffd2c7e27895711/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f636f6e7472696275746f72732f6769616d70616f6c6f2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/graphs/contributors)
[![Latest version](https://camo.githubusercontent.com/47a1255b797241faa45479e25dc0e1d92edc824927e2bbb314d4cd4360cede5f/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f7079667470646c69622e7376673f6c6162656c3d70797069)](https://pypi.org/project/pyftpdlib) [![Binary packages](https://camo.githubusercontent.com/b25fce4758205ab6017a5cab2d2840c8eb77fc4822021ef41a4350a588ce97c1/68747470733a2f2f7265706f6c6f67792e6f72672f62616467652f74696e792d7265706f732f707974686f6e3a7079667470646c69622e737667)](https://repology.org/metapackage/python%3Apyftpdlib/versions) [![License](https://camo.githubusercontent.com/bd7f5360f1fe45a2b0c950fd1eee9da2b23ac15040de51f0eea81c19ae8742db/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/blob/master/LICENSE)
[![GH actions](https://camo.githubusercontent.com/c5458f220fee18ed63d4e67fde1457133dec7291b1a084b7c4f7b4b75dadd2fe/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f6769616d70616f6c6f2f7079667470646c69622f2e6769746875622f776f726b666c6f77732f74657374732e796d6c)](https://github.com/giampaolo/pyftpdlib/actions) [![Documentation Status](https://camo.githubusercontent.com/202de5ae4e0544f9e8ac2c083343b843a106f907ff5ef94d563fd2f1699a9bad/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f7079667470646c69622f62616467652f3f76657273696f6e3d6c6174657374)](https://pyftpdlib.readthedocs.io/en/latest/) [![Twitter Follow](https://camo.githubusercontent.com/f1d83acf6a8ccedb437f86f280e270cd9743b291564d159352d958d9f0954549/68747470733a2f2f696d672e736869656c64732e696f2f747769747465722f666f6c6c6f772f67726f646f6c612e7376673f6c6162656c3d666f6c6c6f77267374796c653d666c6174266c6f676f3d74776974746572266c6f676f436f6c6f723d344641444646)](https://twitter.com/grodola)

## Quick links

* [Home](https://github.com/giampaolo/pyftpdlib)
* [Documentation](https://pyftpdlib.readthedocs.io)
* [Download](https://pypi.org/project/pyftpdlib/)
* [Mailing list](https://groups.google.com/group/pyftpdlib/topics)
* [What's new](https://github.com/giampaolo/pyftpdlib/blob/master/HISTORY.rst)

## About

Python FTP server library provides a high-level portable interface to easily
write very efficient, scalable and asynchronous FTP servers with Python. It is
the most complete [RFC-959](https://datatracker.ietf.org/doc/html/rfc959.html) FTP server implementation available for [Python](https://www.python.org/)
programming language.

## Features

* Extremely **lightweight**, **fast** and **scalable** (see
  [why](https://github.com/giampaolo/pyftpdlib/issues/203) and
  [benchmarks](https://pyftpdlib.readthedocs.io/en/latest/benchmarks.html)).
* Uses **sendfile(2)** (see [pysendfile](https://github.com/giampaolo/pysendfile))
  system call for uploads (Linux only).
* Uses `epoll()` / `kqueue()` / `select()` to handle concurrency
  asynchronously.
* ...But can optionally skip to a [multiple thread / process](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html#changing-the-concurrency-model) model (as in:
  you'll be free to block or use slow filesystems).
* Portable: entirely written in pure Python.
* Supports **FTPS** ([RFC-4217](https://datatracker.ietf.org/doc/html/rfc4217)), **IPv6** ([RFC-2428](https://datatracker.ietf.org/doc/html/rfc2428)), **Unicode** file
  names ([RFC-2640](https://datatracker.ietf.org/doc/html/rfc2640)), **MLSD/MLST** commands ([RFC-3659](https://datatracker.ietf.org/doc/html/rfc3659)).
* Support for virtual users and virtual filesystem.
* Flexible system of "authorizers" able to manage both "virtual" and
  "real" users on on both
  [UNIX](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html#unix-ftp-server)
  and
  [Windows](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html#windows-ftp-server).

## Performances

Despite being written in an interpreted language, pyftpdlib has transfer rates
comparable or superior to common UNIX FTP servers written in C. It usually
tends to scale better (see [benchmarks](https://pyftpdlib.readthedocs.io/en/latest/benchmarks.html)) because whereas vsftpd and proftpd
use multiple processes to achieve concurrency, pyftpdlib only uses one (see
[the C10K problem](http://www.kegel.com/c10k.html)).

### pyftpdlib vs. proftpd 1.3.4

| **benchmark type** | **pyftpdlib** | **proftpd** | **speedup** |
| --- | --- | --- | --- |
| STOR (client -> server) | 585.90 MB/sec | 600.49 MB/sec | -0.02x |
| RETR (server -> client) | 1652.72 MB/sec | 1524.05 MB/sec | **+0.08** |
| 300 concurrent clients (connect, login) | 0.19 secs | 9.98 secs | **+51x** |
| STOR (1 file with 300 idle clients) | 585.59 MB/sec | 518.55 MB/sec | **+0.1x** |
| RETR (1 file with 300 idle clients) | 1497.58 MB/sec | 1478.19 MB/sec | 0x |
| 300 concurrent clients (RETR 10M file) | 3.41 secs | 3.60 secs | **+0.05x** |
| 300 concurrent clients (STOR 10M file) | 8.60 secs | 11.56 secs | **+0.3x** |
| 300 concurrent clients (QUIT) | 0.03 secs | 0.39 secs | **+12x** |

### pyftpdlib vs. vsftpd 2.3.5

| **benchmark type** | **pyftpdlib** | **vsftpd** | **speedup** |
| --- | --- | --- | --- |
| STOR (client -> server) | 585.90 MB/sec | 611.73 MB/sec | -0.04x |
| RETR (server -> client) | 1652.72 MB/sec | 1512.92 MB/sec | **+0.09** |
| 300 concurrent clients (connect, login) | 0.19 secs | 20.39 secs | **+106x** |
| STOR (1 file with 300 idle clients) | 585.59 MB/sec | 610.23 MB/sec | -0.04x |
| RETR (1 file with 300 idle clients) | 1497.58 MB/sec | 1493.01 MB/sec | 0x |
| 300 concurrent clients (RETR 10M file) | 3.41 secs | 3.67 secs | **+0.07x** |
| 300 concurrent clients (STOR 10M file) | 8.60 secs | 9.82 secs | **+0.07x** |
| 300 concurrent clients (QUIT) | 0.03 secs | 0.01 secs | +0.14x |

For more benchmarks see [here](https://pyftpdlib.readthedocs.io/en/latest/benchmarks.html).

## Command line usage

Start a FTP server, with an anonymous user with write permissions, on port 2121:

```
$ python3 -m pyftpdlib --write
RuntimeWarning: write permissions assigned to anonymous user.
  self._check_permissions(username, perm)
[I 2024-06-23 13:49:35] concurrency model: async
[I 2024-06-23 13:49:35] masquerade (NAT) address: None
[I 2024-06-23 13:49:35] passive ports: None
[I 2024-06-23 13:49:35] >>> starting FTP server on 0.0.0.0:2121, pid=763634 <<<
```

## API usage

```
>>> from pyftpdlib.authorizers import DummyAuthorizer
>>> from pyftpdlib.handlers import FTPHandler
>>> from pyftpdlib.servers import FTPServer
>>>
>>> authorizer = DummyAuthorizer()
>>> authorizer.add_user("user", "12345", "/home/giampaolo", perm="elradfmwMT")
>>> authorizer.add_anonymous("/home/nobody")
>>>
>>> handler = FTPHandler
>>> handler.authorizer = authorizer
>>>
>>> server = FTPServer(("127.0.0.1", 21), handler)
>>> server.serve_forever()
[I 13-02-19 10:55:42] >>> starting FTP server on 127.0.0.1:21 <<<
[I 13-02-19 10:55:42] poller: <class 'pyftpdlib.ioloop.Epoll'>
[I 13-02-19 10:55:42] masquerade (NAT) address: None
[I 13-02-19 10:55:42] passive ports: None
[I 13-02-19 10:55:42] use sendfile(2): True
[I 13-02-19 10:55:45] 127.0.0.1:34178-[] FTP session opened (connect)
[I 13-02-19 10:55:48] 127.0.0.1:34178-[user] USER 'user' logged in.
[I 13-02-19 10:56:27] 127.0.0.1:34179-[user] RETR /home/giampaolo/.vimrc completed=1 bytes=1700 seconds=0.001
[I 13-02-19 10:56:39] 127.0.0.1:34179-[user] FTP session closed (disconnect).
```

For other code samples read the [tutorial](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html)

## Donate

A lot of time and effort went into making pyftpdlib as it is right now.
If you feel pyftpdlib is useful to you or your business and want to support its
future development please consider [donating](https://gmpy.dev/donate) me some money.

## About

Extremely fast and scalable Python FTP server library

### Topics

[python](/topics/python "Topic: python")
[asynchronous](/topics/asynchronous "Topic: asynchronous")
[ftp](/topics/ftp "Topic: ftp")
[ftp-server](/topics/ftp-server "Topic: ftp-server")
[ftps](/topics/ftps "Topic: ftps")

### Resources

[Readme](#readme-ov-file)
### License

[MIT license](#MIT-1-ov-file)

[Activity](/giampaolo/pyftpdlib/activity)
### Stars

[**1.7k**
stars](/giampaolo/pyftpdlib/stargazers)
### Watchers

[**53**
watching](/giampaolo/pyftpdlib/watchers)
### Forks

[**264**
forks](/giampaolo/pyftpdlib/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fgiampaolo%2Fpyftpdlib&report=giampaolo+%28user%29)

## Sponsor this project

* <https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ZSSF7G42VA2XE>

[Learn more about GitHub Sponsors](/sponsors)

## [Contributors 35](/giampaolo/pyftpdlib/graphs/contributors)

* [![@giampaolo](https://avatars.githubusercontent.com/u/681260?s=64&v=4)](https://github.com/giampaolo)
* [![@tahirijaz24](https://avatars.githubusercontent.com/u/30835856?s=64&v=4)](https://github.com/tahirijaz24)
* [![@jloden](https://avatars.githubusercontent.com/u/7715199?s=64&v=4)](https://github.com/jloden)
* [![@Ryanb58](https://avatars.githubusercontent.com/u/3086302?s=64&v=4)](https://github.com/Ryanb58)
* [![@gliptak](https://avatars.githubusercontent.com/u/50109?s=64&v=4)](https://github.com/gliptak)
* [![@andrewshulgin](https://avatars.githubusercontent.com/u/3032891?s=64&v=4)](https://github.com/andrewshulgin)
* [![@lurch](https://avatars.githubusercontent.com/u/476186?s=64&v=4)](https://github.com/lurch)
* [![@emilv](https://avatars.githubusercontent.com/u/1684914?s=64&v=4)](https://github.com/emilv)
* [![@sbraz](https://avatars.githubusercontent.com/u/4833332?s=64&v=4)](https://github.com/sbraz)
* [![@stat1c-void](https://avatars.githubusercontent.com/u/9142081?s=64&v=4)](https://github.com/stat1c-void)
* [![@davetapley](https://avatars.githubusercontent.com/u/48232?s=64&v=4)](https://github.com/davetapley)
* [![@D3X](https://avatars.githubusercontent.com/u/82002?s=64&v=4)](https://github.com/D3X)
* [![@pjona](https://avatars.githubusercontent.com/u/170732?s=64&v=4)](https://github.com/pjona)
* [![@PonyPC](https://avatars.githubusercontent.com/u/284594?s=64&v=4)](https://github.com/PonyPC)

[+ 21 contributors](/giampaolo/pyftpdlib/graphs/contributors)

## Languages

* [Python
  98.3%](/giampaolo/pyftpdlib/search?l=python)
* [Makefile
  1.6%](/giampaolo/pyftpdlib/search?l=makefile)
* [Batchfile
  0.1%](/giampaolo/pyftpdlib/search?l=batchfile)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from bugs.python.org_335b0f06_20250124_152933.html ===

# [homepage](.)

open

all

* [Python Home](https://www.python.org/ "Go to the Python homepage")
* [About](https://www.python.org/about/ "About The Python Language")
* [News](https://www.python.org/blogs/)
* [Documentation](https://www.python.org/doc/)
* [Downloads](https://www.python.org/downloads/)
* [Community](https://www.python.org/community/)
* [Foundation](https://www.python.org/psf/ "Python Software Foundation")
* [Developer's Guide](https://devguide.python.org/ "Python Developer's Guide")
* [Issue Tracker](. "Python Issue Tracker")
  + **Issues**
    - [Search](issue?@template=search&status=1)
    - [Random Issue](issue?@action=random)
  + **Summaries**
    - [Issues with patch](issue?status=1&@sort=-activity&@columns=id%2Cgithub%2Cactivity%2Ctitle%2Ccreator%2Cstatus&@dispname=Issues%20with%20patch&@startwith=0&@group=priority&keywords=2&@action=search&@filter=&@pagesize=50)
    - [Easy issues](issue?status=1&@sort=-activity&@columns=id%2Cgithub%2Cactivity%2Ctitle%2Ccreator%2Cstatus&@dispname=Easy%20issues&@startwith=0&@group=priority&keywords=6&@action=search&@filter=&@pagesize=50)
    - [Stats](issue?@template=stats)
  + **User**
    - Login

      Remember me?
    - [Lost your login?](user?@template=forgotten)
  + **Administration**
    - [User List](user?@sort=username)
    - [Committer List](user?iscommitter=1&@action=search&@sort=username&@pagesize=300)
  + **Help**
    - [Tracker Documentation](http://docs.python.org/devguide/triaging.html)
    - [Tracker Development](http://wiki.python.org/moin/TrackerDevelopment)
    - [Report Tracker Problem](https://github.com/python/psf-infra-meta/issues)

Issue6706

![](@@file/python-logo-small.png)
➜
[![](@@file/gh-icon.png)](https://github.com/python/cpython/issues)

This issue tracker **has been migrated to [GitHub](https://github.com/python/cpython/issues)**,
and is currently **read-only**.

For more information, [see the GitHub FAQs in the Python's Developer Guide.](https://devguide.python.org/gh-faq/ "GitHub FAQs")

[![](@@file/gh-icon.png)

This issue has been migrated to GitHub:
https://github.com/python/cpython/issues/50955](https://github.com/python/cpython/issues/50955)

classification

| [Title](http://docs.python.org/devguide/triaging.html#title): | asyncore's accept() is broken | | |
| --- | --- | --- | --- |
| [Type](http://docs.python.org/devguide/triaging.html#type): | security | [Stage](http://docs.python.org/devguide/triaging.html#stage): | resolved |
| [Components](http://docs.python.org/devguide/triaging.html#components): | Library (Lib) | [Versions](http://docs.python.org/devguide/triaging.html#versions): | Python 3.1, Python 3.2, Python 2.7 |

process

| [Status](http://docs.python.org/devguide/triaging.html#status): | closed | [Resolution](http://docs.python.org/devguide/triaging.html#resolution): | fixed |
| --- | --- | --- | --- |
| [Dependencies](http://docs.python.org/devguide/triaging.html#dependencies): |  | [Superseder](http://docs.python.org/devguide/triaging.html#superseder): |  |
| [Assigned To](http://docs.python.org/devguide/triaging.html#assigned-to): | giampaolo.rodola | [Nosy List](http://docs.python.org/devguide/triaging.html#nosy-list): | Arfrever, BreamoreBoy, barry, dmalcolm, giampaolo.rodola, josiahcarlson, matejcik, pitrou, santoso.wijaya |
| [Priority](http://docs.python.org/devguide/triaging.html#priority): | normal | [Keywords](http://docs.python.org/devguide/triaging.html#keywords): | patch |

Created on **2009-08-14 23:03** by **giampaolo.rodola**, last changed **2022-04-11 14:56** by **admin**. This issue is now **closed**.

| Files | | | | |
| --- | --- | --- | --- | --- |
| File name | Uploaded | Description | Edit |
| [accept.patch](file19001/accept.patch) | giampaolo.rodola, 2010-09-24 20:15 |  | [review](/review/6706/#ps25) |
| [accept.patch](file19005/accept.patch) | giampaolo.rodola, 2010-09-25 10:37 |  | [review](/review/6706/#ps24) |
| [accept.patch](file19104/accept.patch) | giampaolo.rodola, 2010-10-02 13:18 | adds handled\_accepted() method | [review](/review/6706/#ps3) |

| Messages (16) | | | |
| --- | --- | --- | --- |
| [msg91579](#msg91579) - [(view)](msg91579) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2009-08-14 23:03 |
| ``` An old bad design choice in asyncore is how it forces the user to  override handle_accept() and then call self.accept() to obtain a socket  pair.      def handle_accept(self):         conn, addr = self.accept()  The documentation itself shows the code above as an example of how an  asyncore-based server should handle an incoming connection. What the doc doesn't say is that the user calling self.accept() is  exposed to different risks:  - self.accept() can return None instead of a socket pair in which case  TypeError is raised (see pyftpdlib bug:  <http://code.google.com/p/pyftpdlib/issues/detail?id=91>)  - ECONNABORTED can be raised. This is reproducible on Linux by hammering  the server with nmap (see pyftpdlib bug:  <http://code.google.com/p/pyftpdlib/issues/detail?id=105>)  - EAGAIN can be raised too. I never experienced this error condition  myself in pyftpdlib but by looking at twisted/internet/tcp.py it seems  reasonable to catch EAGAIN too.  - The resulting address can be None, which means that the connection  didn't take place. This is reproducible by hammering the server with nmap (see pyftpdlib  bug <http://code.google.com/p/pyftpdlib/issues/detail?id=104>).   The right thing to do when one of such events occur is to "return" as no  connection has really been established between client and server.  Now, altough handling these kind of conditions is quite easy, the API  design remains fundamentally wrong, as it forces the user to call  accept(). As asyncore.py is structured right now the only chance the user has to  properly accepting a connection is manually handling all these cases in  his subclass.   My patch in attachment tries to solve this problem by defining a new  "handle_accept_event()" method which takes care of all the error  conditions described above resulting in handle_accept() be called *only  when a connection really took place*. When the connection is established handle_accept_event() stores the  socket pair as an attribute and the next call to accept() returns that  pair. This preserves the current implementation without breaking any code as  the user will have to override handle_accept() and then call accept() in  the same manner [1], with the difference that self.accept() will always  return a valid socket pair.  [1]      def handle_accept(self):         conn, addr = self.accept() ``` | | | |
| [msg112315](#msg112315) - [(view)](msg112315) | Author: Mark Lawrence (BreamoreBoy) \* | Date: 2010-08-01 11:47 |
| ``` @Giampaolo it looks as if you meant to attach a patch but didn't! :)  If you do attach one could you also supply a modified unit test file with it, thanks. ``` | | | |
| [msg112699](#msg112699) - [(view)](msg112699) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-08-03 21:51 |
| ``` Shame on me, it seems I totally forgot to attach the patch. Unfortunately the patch went lost but I'm going to try to rewrite it. As for tests, ECONN and EAGAIN error conditions are hardly reproducible unless you're using nmap. I'm assigning this to me for now as a reminder and update the issue as long as I have a working patch. ``` | | | |
| [msg117240](#msg117240) - [(view)](msg117240) | Author: Dave Malcolm (dmalcolm) (Python committer) | Date: 2010-09-23 22:11 |
| ``` giampaolo: did you ever rewrite the patch?  For reference to other users: <http://code.google.com/p/pyftpdlib/source/browse/trunk/pyftpdlib/ftpserver.py>  Note the complexity of the two handle_accept implementations in that file; both of them begin:         try:             sock, addr = self.accept()         except TypeError:             # sometimes accept() might return None (see issue 91)             return         except socket.error, err:             # ECONNABORTED might be thrown on *BSD (see issue 105)             if err[0] != errno.ECONNABORTED:                 logerror(traceback.format_exc())             return         else:             # sometimes addr == None instead of (ip, port) (see issue 104)             if addr == None:                 return ``` | | | |
| [msg117329](#msg117329) - [(view)](msg117329) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-09-24 20:15 |
| ``` Here's a rewriting attempt (not tested). Now that I look at it I must say it's quite ugly, so I don't think we should follow this road. An alternative I see is to return None in case of errors occurring on accept() and make this very clear in doc.  Other than accept(), doc should explicitly show how to use handle_accept() in general, which would end up looking like this:  class SomeServer(asyncore.dispatcher):          ...      def handle_accept():        conn = self.accept()        if conn is None:            return        else:            sock, addr = conn        ...      ...   A completely different approach could be to provide a new "TCPServer" class which deprecates direct accept() method usage. Something like this:   class TCPServer(asyncore.dispatcher):      def __init__(self, ip, port, handler, interface='', map=None):         asyncore.dispatcher.__init__(self, map=map)         self.create_socket(family=socket.AF_INET, type=socket.SOCK_STREAM)         self.bind((ip, port))         self.listen(5)         self.handler = handler      def handle_accept(self):         try:             sock, addr = self.accept()         except TypeError:             return         except socket.error, err:             if err[0] != errno.ECONNABORTED:                 raise             return         else:             if addr == None:                 return         handler = self.handler(conn, self._map)      def writable(self):         return 0    ...but for some reason I don't like it either. Point is asyncore API design is fundamentally wrong and there's nothing we can do about it unless we break backward compatibility or a brand new "asyncore2" module is written. ``` | | | |
| [msg117356](#msg117356) - [(view)](msg117356) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-09-25 10:37 |
| ``` Patch in attachment makes accept() return None in case no connection takes place and modifies the doc to make this very clear, also providing an example on how an asyncore-based server should be properly set-up . ``` | | | |
| [msg117357](#msg117357) - [(view)](msg117357) | Author: Antoine Pitrou (pitrou) \* (Python committer) | Date: 2010-09-25 10:54 |
| ``` > EAGAIN can be raised too. I never experienced this error condition  > myself in pyftpdlib  From the accept() man page:  EAGAIN or EWOULDBLOCK               The  socket  is  marked  nonblocking and no connections are present to be accepted.               POSIX.1-2001 allows either error to be returned for this case, and does not require               these  constants to have the same value, so a portable application should check for               both possibilities.  > The resulting address can be None, which means that the connection  > didn't take place.  The only way this can happen is if the accept() system call returned 0 in addrlen, which sounds rather strange. I'm not convinced hiding operating system bugs is a good idea. ``` | | | |
| [msg117358](#msg117358) - [(view)](msg117358) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-09-25 11:43 |
| ``` > I'm not convinced hiding operating system bugs is a good idea.  Do you propose to let the error raise then? The point of frameworks such as asyncore and twisted is to hide all system-specific errors as much as possible and provide a portable interface across all platforms. AFAICT, the whole point of this issue is that there should be only one way for an asyncore-based server to accept an incoming connection, possibly avoiding the user to deal with low-level details such as catching EWOULDBLOCK/ECONNABORTED/... in his application, and looking for accept() returning None is one possibility.  As I said, in a better designed framework the user shouldn't be supposed to call accept() at all, but that's how asyncore is designed. ``` | | | |
| [msg117359](#msg117359) - [(view)](msg117359) | Author: Antoine Pitrou (pitrou) \* (Python committer) | Date: 2010-09-25 11:56 |
| ``` > The point of frameworks such as asyncore and twisted is to hide all > system-specific errors as much as possible and provide a portable > interface across all platforms.  As long as these errors are reasonably explainable. If a strange error only occurs when running nmap on an OS X server, then it might be useful for the user to know that the OS X server isn't able to service all connections properly due to a bug in the operating system.  > AFAICT, the whole point of this issue is that there should be only one > way for an asyncore-based server to accept an incoming connection, > possibly avoiding the user to deal with low-level details such as > catching EWOULDBLOCK/ECONNABORTED/...  I am talking specifically about the address being None (i.e., a (sock, None) tuple is successfully returned). EWOULDBLOCK and ECONNABORTED are documented error conditions for accept(), but returning 0 in addrlen is not.  > As I said, in a better designed framework the user shouldn't be > supposed to call accept() at all, but that's how asyncore is designed.  Perhaps it's time to add an alternative handle_accepted(sock, addr) which relieves the user from calling accept() :)) Then, perhaps self.accept() shouldn't filter any errors at all, but the default handle_accept() would silence them before calling handle_accepted(). ``` | | | |
| [msg117360](#msg117360) - [(view)](msg117360) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-09-25 12:34 |
| ``` > As long as these errors are reasonably explainable. > If a strange error only occurs when running nmap on an OS X server,  > then it might be useful for the user to know that the OS X server  > isn't able to service all connections properly due to a bug in the  > operating system.  It might be useful to find whether this is tracked somewhere. For the record, here (comment #10) is a code which should reproduce this problem: [https://bugs.launchpad.net/zodb/+bug/135108](https://bugs.launchpad.net/zodb/%2Bbug/135108) As for what asyncore should in this case I think it should theoretically be safe for accept() to return (sock, None). What usually happen after that is that the socket object is passed to another dispatcher subclass (the handler) and the connection gets automatically closed once recv() or send() get called on the next async-loop.  > Perhaps it's time to add an alternative handle_accepted(sock, addr) > which relieves the user from calling accept() :))  This sounds like a very good idea for 3.2. As for 3.1 and 2.7 (2.6?) I think it can be useful to suppress EWOULDBLOCK/ECONNABORTED and return None instead. Considering accept() can *already* return None it wouldn't break backward compatibility. ``` | | | |
| [msg117873](#msg117873) - [(view)](msg117873) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-10-02 13:18 |
| ``` Patch in attachment adds a handled_accepted() method to dispatcher class as recommended by Antoine. ``` | | | |
| [msg117925](#msg117925) - [(view)](msg117925) | Author: Antoine Pitrou (pitrou) \* (Python committer) | Date: 2010-10-03 19:28 |
| ``` I'm not an asyncore expert, but I can't see anything wrong with the patch. ``` | | | |
| [msg117981](#msg117981) - [(view)](msg117981) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-10-04 21:09 |
| ``` Python 3.2 changes committed in [r85220](https://hg.python.org/lookup/r85220). Still have to commit EWOULDBLOCK/ECONNABORTED changes for 3.1 and 2.7. ``` | | | |
| [msg120003](#msg120003) - [(view)](msg120003) | Author: Arfrever Frehtes Taifersar Arahesis (Arfrever) \* (Python triager) | Date: 2010-10-30 16:44 |
| ``` CVE-2010-3492 references this issue. <http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-3492> ``` | | | |
| [msg120132](#msg120132) - [(view)](msg120132) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-11-01 15:19 |
| ``` Fixed in [r86084](https://hg.python.org/lookup/r86084) (2.7) and [r86085](https://hg.python.org/lookup/r86085) (3.1). ``` | | | |
| [msg123556](#msg123556) - [(view)](msg123556) | Author: Barry A. Warsaw (barry) \* (Python committer) | Date: 2010-12-07 15:22 |
| ``` I do not see this as a security bug so no patch for 2.6 please.  (Comment requested from IRC). ``` | | | |

| History | | | |
| --- | --- | --- | --- |
| Date | User | Action | Args |
| 2022-04-11 14:56:51 | admin | set | github: 50955 |
| 2010-12-07 15:22:09 | barry | set | nosy: + [barry](user19)messages: + <msg123556> |
| 2010-11-01 15:19:36 | giampaolo.rodola | set | status: open -> closedversions: + Python 3.1, Python 2.7type: behavior -> securitymessages: + <msg120132>resolution: fixedstage: patch review -> resolved |
| 2010-10-30 16:44:26 | Arfrever | set | messages: + <msg120003> |
| 2010-10-30 16:40:31 | Arfrever | set | nosy: + [Arfrever](user9138) |
| 2010-10-04 21:09:57 | giampaolo.rodola | set | messages: + <msg117981> |
| 2010-10-03 19:28:59 | pitrou | set | stage: needs patch -> patch reviewmessages: + <msg117925>versions: - Python 2.6, Python 3.1, Python 2.7 |
| 2010-10-02 13:18:23 | giampaolo.rodola | set | files: + [accept.patch](file19104)messages: + <msg117873> |
| 2010-09-25 12:34:54 | giampaolo.rodola | set | messages: + <msg117360> |
| 2010-09-25 11:56:47 | pitrou | set | messages: + <msg117359> |
| 2010-09-25 11:43:40 | giampaolo.rodola | set | messages: + <msg117358> |
| 2010-09-25 10:54:43 | pitrou | set | messages: + <msg117357> |
| 2010-09-25 10:37:46 | giampaolo.rodola | set | files: + [accept.patch](file19005)messages: + <msg117356>versions: + Python 2.6 |
| 2010-09-24 20:15:53 | giampaolo.rodola | set | files: + [accept.patch](file19001)nosy: + [pitrou](user2040)messages: + <msg117329>keywords: + [patch](keyword2) |
| 2010-09-23 22:11:47 | dmalcolm | set | nosy: + [dmalcolm](user11193)messages: + <msg117240> |
| 2010-09-13 19:32:25 | santoso.wijaya | set | nosy: + [santoso.wijaya](user12244) |
| 2010-09-13 14:05:13 | matejcik | set | nosy: + [matejcik](user3981) |
| 2010-08-03 21:51:24 | giampaolo.rodola | set | assignee: [giampaolo.rodola](user3080)messages: + <msg112699> |
| 2010-08-01 11:47:47 | BreamoreBoy | set | versions: + Python 3.1, Python 3.2nosy: + [BreamoreBoy](user12545)messages: + <msg112315>type: behaviorstage: needs patch |
| 2009-08-14 23:03:35 | giampaolo.rodola | create |  |

Supported by [The Python Software Foundation](https://python.org/psf-landing/ "The Python Software Foundation"),

Powered by [Roundup](http://roundup.sourceforge.net "Powered by the Roundup Issue Tracker")

Copyright © 1990-2022, [Python Software Foundation](http://python.org/psf)



=== Content from code.google.com_225bdedb_20250124_152934.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgiampaolo%2Fpyftpdlib%2Fissues%2F91)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgiampaolo%2Fpyftpdlib%2Fissues%2F91)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=giampaolo%2Fpyftpdlib)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[giampaolo](/giampaolo)
/
**[pyftpdlib](/giampaolo/pyftpdlib)**
Public

* [Notifications](/login?return_to=%2Fgiampaolo%2Fpyftpdlib) You must be signed in to change notification settings
* [Fork
  264](/login?return_to=%2Fgiampaolo%2Fpyftpdlib)
* [Star
   1.7k](/login?return_to=%2Fgiampaolo%2Fpyftpdlib)

* [Code](/giampaolo/pyftpdlib)
* [Issues
  119](/giampaolo/pyftpdlib/issues)
* [Pull requests
  16](/giampaolo/pyftpdlib/pulls)
* [Actions](/giampaolo/pyftpdlib/actions)
* [Security](/giampaolo/pyftpdlib/security)
* [Insights](/giampaolo/pyftpdlib/pulse)

Additional navigation options

* [Code](/giampaolo/pyftpdlib)
* [Issues](/giampaolo/pyftpdlib/issues)
* [Pull requests](/giampaolo/pyftpdlib/pulls)
* [Actions](/giampaolo/pyftpdlib/actions)
* [Security](/giampaolo/pyftpdlib/security)
* [Insights](/giampaolo/pyftpdlib/pulse)

# pyftpdlib should handle the case when accept() returns None instead of a socket #91

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[pyftpdlib should handle the case when accept() returns None instead of a socket](#top)#91Copy linkLabels[Component-Library](https://github.com/giampaolo/pyftpdlib/issues?q=state%3Aopen%20label%3A%22Component-Library%22)[bug](https://github.com/giampaolo/pyftpdlib/issues?q=state%3Aopen%20label%3A%22bug%22)[importedimported from old googlecode site and very likely outdated](https://github.com/giampaolo/pyftpdlib/issues?q=state%3Aopen%20label%3A%22imported%22)imported from old googlecode site and very likely outdated[![@giampaolo](https://avatars.githubusercontent.com/u/681260?u=4d58d8d263f5a717d21aa37e2e44ab277686fd4c&v=4&size=80)](/giampaolo)
## Description

[![@giampaolo](https://avatars.githubusercontent.com/u/681260?u=4d58d8d263f5a717d21aa37e2e44ab277686fd4c&v=4&size=48)](/giampaolo)[giampaolo](https://github.com/giampaolo)opened [on May 28, 2014](https://github.com/giampaolo/pyftpdlib/issues/91#issue-34479370)

*From [billiej...@gmail.com](https://code.google.com/u/107489592441517285058/) on November 17, 2008 01:18:45*

```
Sometimes when running the server under heavy loads (e.g. while serving a
lot of clients) an exception can be raised at the time the server is
accepting a new connection:

  File "C:\Python25\lib\asyncore.py", line 384, in handle_read_event
    self.handle_accept()
  File "C:\python25\lib\site-packages\pyftpdlib\ftpserver.py", line 3072,
in handle_accept
    sock_obj, addr = self.accept()
TypeError: 'NoneType' object is not iterable

This happens because for some reason, sometimes accept() returns None
instead of a socket.  The code should ignore this case.

```

*Original issue: <http://code.google.com/p/pyftpdlib/issues/detail?id=91>*

## Metadata

### Assignees

No one assigned

### Labels

[Component-Library](https://github.com/giampaolo/pyftpdlib/issues?q=state%3Aopen%20label%3A%22Component-Library%22)[bug](https://github.com/giampaolo/pyftpdlib/issues?q=state%3Aopen%20label%3A%22bug%22)[importedimported from old googlecode site and very likely outdated](https://github.com/giampaolo/pyftpdlib/issues?q=state%3Aopen%20label%3A%22imported%22)imported from old googlecode site and very likely outdated
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from bugs.launchpad.net_1be154df_20250124_152939.html ===

[Log in / Register](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Blogin)

[![](https://launchpadlibrarian.net/45212005/zopelogo.gif)](https://launchpad.net/zodb)

## [ZODB](https://launchpad.net/zodb)

* [Overview](https://launchpad.net/zodb)
* [Code](https://code.launchpad.net/zodb)
* [Bugs](https://bugs.launchpad.net/zodb)
* [Blueprints](https://blueprints.launchpad.net/zodb)
* [Translations](https://translations.launchpad.net/zodb)
* [Answers](https://answers.launchpad.net/zodb)

# mac osx socket.accept return None instead of ""

Bug #135108 reported by
[Paolo Losi](https://launchpad.net/~paolo-enuan)
on 2007-08-27

[6](/%2Bhelp-bugs/bug-heat.html)

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [ZODB](https://bugs.launchpad.net/zodb) | Fix Released | High | [Christian Theune](https://launchpad.net/~ctheune) | [ZODB 3.9.6](https://launchpad.net/zodb/%2Bmilestone/3.9.6) |
|  | [3.10](https://bugs.launchpad.net/zodb/3.10) | Fix Released | Undecided | Unassigned | [ZODB 3.10.0a2](https://launchpad.net/zodb/%2Bmilestone/3.10.0a2) |
|  | [3.6](https://bugs.launchpad.net/zodb/3.6) | Won't Fix | Undecided | Unassigned |  |

### Bug Description

ZODB 3.6.0 (should apply to trunk as well)

on OS X version:

hypermac:~ paolo$ uname -a

Darwin hypermac.local 8.10.1 Darwin Kernel Version 8.10.1: Wed May 23 16:33:00 PDT 2007; root:xnu-792.22.5~1/RELEASE\_I386 i386 i386

python installed from mac ports:

Python 2.4.4 (#1, Jun 30 2007, 16:45:04)

[GCC 4.0.1 (Apple Computer, Inc. build 5367)] on darwin

unix socket accept return addr == None instead of addr == "".

--- StorageServer.py.old 2007-08-27 19:04:54.000000000 +0200

+++ StorageServer.py 2007-08-27 19:18:31.000000000 +0200

@@ -113,6 +113,8 @@

         addr = conn.addr

         if isinstance(addr, type("")):

             label = addr

+ elif addr is None:

+ label = ''

         else:

             host, port = addr

             label = str(host) + ":" + str(port)

## Related branches

[lp:~python-dev/python/trunk](https://code.launchpad.net/~python-dev/python/trunk)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Christian Theune (ctheune)](https://launchpad.net/~ctheune) wrote on 2007-11-09: |  |  | [#1](/zodb/%2Bbug/135108/comments/1) |
| --- | --- | --- | --- |

What error happens in your case? Can you maybe provide a test case that shows this?

What error happens in your case? Can you maybe provide a test case that shows this?

| Changed in zodb: | |
| --- | --- |
| **importance**: | Undecided → Medium |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paolo Losi (paolo-enuan)](https://launchpad.net/~paolo-enuan) wrote on 2007-11-12: |  |  | [#2](/zodb/%2Bbug/135108/comments/2) |
| --- | --- | --- | --- |

* [small test case](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Battachment/170281/%2Bfiles/osx_bug.tgz)
  [Edit](/zodb/%2Bbug/135108/%2Battachment/170281)
  (280 bytes,
  application/x-tar)

I've just reproduced it with ZODB3.8 beta4

OS: Mac OS X 10.4.10

python version: 2.4.4 (mac ports version)

You find a small test case attacched.

Here you have the ZEO log.

zeo log:

(zeotest)hypermac:~/schifo/zeotest/src paolo$ ./launch\_zeo.sh

------

2007-11-12T09:54:34 INFO ZEO.runzeo (511) opening storage '1' using FileStorage

------

2007-11-12T09:54:34 INFO ZEO.StorageServer (511) StorageServer created RW with storages: 1:RW:test.fs

------

2007-11-12T09:54:34 INFO ZEO.zrpc (511) listening on ./test.sock

error: uncaptured python exception, closing channel <ZEO.zrpc.server.Dispatcher listening './test.sock' at 0x12015d0> (exceptions.TypeError:unpack non-sequence [/opt/local/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/asyncore.py|read|69] [/opt/local/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/asyncore.py|handle\_read\_event|385] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/zrpc/server.py|handle\_accept|58] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/StorageServer.py|new\_connection|957] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/zrpc/connection.py|\_\_init\_\_|863] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/StorageServer.py|notifyConnected|130])

------

2007-11-12T09:54:37 INFO ZEO.zrpc.Connection(S) () received handshake 'Z308'

------

2007-11-12T09:54:37 INFO ZEO.StorageServer (511) disconnected

------

2007-11-12T09:54:37 INFO ZEO.runzeo (511) closing storage '1'

I've just reproduced it with ZODB3.8 beta4
OS: Mac OS X 10.4.10
python version: 2.4.4 (mac ports version)
You find a small test case attacched.
Here you have the ZEO log.
zeo log:
(zeotest)hypermac:~/schifo/zeotest/src paolo$ ./launch\_zeo.sh
------
2007-11-12T09:54:34 INFO ZEO.runzeo (511) opening storage '1' using FileStorage
------
2007-11-12T09:54:34 INFO ZEO.StorageServer (511) StorageServer created RW with storages: 1:RW:test.fs
------
2007-11-12T09:54:34 INFO ZEO.zrpc (511) listening on ./test.sock
error: uncaptured python exception, closing channel <ZEO.zrpc.server.Dispatcher listening './test.sock' at 0x12015d0> (exceptions.TypeError:unpack non-sequence [/opt/local/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/asyncore.py|read|69] [/opt/local/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/asyncore.py|handle\_read\_event|385] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/zrpc/server.py|handle\_accept|58] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/StorageServer.py|new\_connection|957] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/zrpc/connection.py|\_\_init\_\_|863] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/StorageServer.py|notifyConnected|130])
------
2007-11-12T09:54:37 INFO ZEO.zrpc.Connection(S) () received handshake 'Z308'
------
2007-11-12T09:54:37 INFO ZEO.StorageServer (511) disconnected
------
2007-11-12T09:54:37 INFO ZEO.runzeo (511) closing storage '1'

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paolo Losi (paolo-enuan)](https://launchpad.net/~paolo-enuan) wrote on 2007-11-12: |  |  | [#3](/zodb/%2Bbug/135108/comments/3) |
| --- | --- | --- | --- |

* [patch against ZODB 3.8beta4](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Battachment/170282/%2Bfiles/patch.diff)
  [Edit](/zodb/%2Bbug/135108/%2Battachment/170282)
  (386 bytes,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Christian Theune (ctheune)](https://launchpad.net/~ctheune) wrote on 2007-11-12: |  |  | [#4](/zodb/%2Bbug/135108/comments/4) |
| --- | --- | --- | --- |

Note to self: the bug is referring to a \*unix\* socket, not a tcp socket.

Note to self: the bug is referring to a \*unix\* socket, not a tcp socket.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Christian Theune (ctheune)](https://launchpad.net/~ctheune) wrote on 2007-11-12: |  |  | [#5](/zodb/%2Bbug/135108/comments/5) |
| --- | --- | --- | --- |

I'll look at this today.

I'll look at this today.

| Changed in zodb: | |
| --- | --- |
| **assignee**: | nobody → ct-gocept |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Christian Theune (ctheune)](https://launchpad.net/~ctheune) wrote on 2007-11-12: |  |  | [#6](/zodb/%2Bbug/135108/comments/6) |
| --- | --- | --- | --- |

The test applies neither to the trunk nor the 3.6 branch.

There is an API mismatch regarding the database interface in your test case: db.conn() does not exist and db.open() works.

Also, your testcase says DB.conn() which I'm not sure was ever working.

Please try to provide a test case that works directly and try to make it work against a current version of the release branch you are referring to.

The test applies neither to the trunk nor the 3.6 branch.
There is an API mismatch regarding the database interface in your test case: db.conn() does not exist and db.open() works.
Also, your testcase says DB.conn() which I'm not sure was ever working.
Please try to provide a test case that works directly and try to make it work against a current version of the release branch you are referring to.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paolo Losi (paolo-enuan)](https://launchpad.net/~paolo-enuan) wrote on 2007-11-18: |  |  | [#7](/zodb/%2Bbug/135108/comments/7) |
| --- | --- | --- | --- |

* [test case (v2.0)](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Battachment/171460/%2Bfiles/osx_bug.tgz)
  [Edit](/zodb/%2Bbug/135108/%2Battachment/171460)
  (285 bytes,
  application/x-tar)

Christian,

I've updated the test case and still getting the same traceback.

Please note the problem is server side (zeo).

I'm using ZODB3.8b4.

Wich OS X version / python version are you using?

please note the problem is OS X specific AFAIK

Thanks

Paolo

2007-11-18T16:29:49 INFO ZEO.StorageServer (535) StorageServer created RW with storages: 1:RW:test.fs

------

2007-11-18T16:29:49 INFO ZEO.zrpc (535) listening on ./test.sock

error: uncaptured python exception, closing channel <ZEO.zrpc.server.Dispatcher listening './test.sock' at 0x1478580> (exceptions.TypeError:unpack non-sequence [/opt/local/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/asyncore.py|read|69] [/opt/local/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/asyncore.py|handle\_read\_event|385] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/zrpc/server.py|handle\_accept|58] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/StorageServer.py|new\_connection|957] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/zrpc/connection.py|\_\_init\_\_|863] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/StorageServer.py|notifyConnected|130])

Christian,
I've updated the test case and still getting the same traceback.
Please note the problem is server side (zeo).
I'm using ZODB3.8b4.
Wich OS X version / python version are you using?
please note the problem is OS X specific AFAIK
Thanks
Paolo
2007-11-18T16:29:49 INFO ZEO.StorageServer (535) StorageServer created RW with storages: 1:RW:test.fs
------
2007-11-18T16:29:49 INFO ZEO.zrpc (535) listening on ./test.sock
error: uncaptured python exception, closing channel <ZEO.zrpc.server.Dispatcher listening './test.sock' at 0x1478580> (exceptions.TypeError:unpack non-sequence [/opt/local/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/asyncore.py|read|69] [/opt/local/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/asyncore.py|handle\_read\_event|385] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/zrpc/server.py|handle\_accept|58] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/StorageServer.py|new\_connection|957] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/zrpc/connection.py|\_\_init\_\_|863] [/Users/paolo/schifo/zeotest/lib/python2.4/ZODB3-3.8.0b4-py2.4-macosx-10.3-i386.egg/ZEO/StorageServer.py|notifyConnected|130])

[Christian Theune (ctheune)](https://launchpad.net/~ctheune)
on 2007-12-04

| Changed in zodb: | |
| --- | --- |
| **status**: | Incomplete → New |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Christian Theune (ctheune)](https://launchpad.net/~ctheune) wrote on 2007-12-07: |  |  | [#8](/zodb/%2Bbug/135108/comments/8) |
| --- | --- | --- | --- |

I'm using a Mac:

Darwin lrrr.whq.gocept.com 9.1.0 Darwin Kernel Version 9.1.0: Wed Oct 31 17:46:22 PDT 2007; root:xnu-1228.0.2~1/RELEASE\_I386 i386

With Python:

Python 2.5.1 (r251:54863, Oct 5 2007, 21:08:09)

[GCC 4.0.1 (Apple Inc. build 5465)] on darwin

on ZODB trunk and 3.6 branch.

The test works fine for me.

Are you using a system python. Can you try using a custom-compiled python?

I'm using a Mac:
Darwin lrrr.whq.gocept.com 9.1.0 Darwin Kernel Version 9.1.0: Wed Oct 31 17:46:22 PDT 2007; root:xnu-1228.0.2~1/RELEASE\_I386 i386
With Python:
Python 2.5.1 (r251:54863, Oct 5 2007, 21:08:09)
[GCC 4.0.1 (Apple Inc. build 5465)] on darwin
on ZODB trunk and 3.6 branch.
The test works fine for me.
Are you using a system python. Can you try using a custom-compiled python?

| Changed in zodb: | |
| --- | --- |
| **status**: | New → Incomplete |

[Jim Fulton (jim-zope)](https://launchpad.net/~jim-zope)
on 2009-07-08

| Changed in zodb: | |
| --- | --- |
| **importance**: | Medium → High |

[Gerry C. (ubuntunerd-nospammail)](https://launchpad.net/~ubuntunerd-nospammail)
on 2010-02-09

| Changed in python: | |
| --- | --- |
| **assignee**: | nobody → Python Development (python-dev) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jim Fulton (jim-zope)](https://launchpad.net/~jim-zope) wrote on 2010-04-26: |  |  | [#9](/zodb/%2Bbug/135108/comments/9) |
| --- | --- | --- | --- |

I don't know that there's enough info here for the Python folks to

work on. Here's an explanation from a guy here at ZC:

"Setting the SO\_LINGER option to off on a socket means that when the

 socket is closed, the call returns immediately, and a TCP RST packet

 is sent to the peer.

Normally when a socket is closed it is handled gracefully, i.e., care

 is taken that all outstanding packets have been received, and a TCP

 FIN packet is sent.

In a way this is a race condition. In Mac OS X, the sockaddr struct

 must be deallocated as soon as a RST packet is received (causing

 accept to return None). This may only happen if the RST packet is

 sent close enough to the initial TCP handshake."

It sounds like the implementation of socket.accept should check this

condition.

ZEO has a broader problem, with a broader solution, that it isn't

proprtly handling exceptions raised in it's application-level accept

logic.

Interestingly, I can't repoduce the symptom reported in this issue,

although I get a result, for ZEO, that is just as bad. The ZEO server

stops accepting new connections.

I don't know that there's enough info here for the Python folks to
work on. Here's an explanation from a guy here at ZC:
"Setting the SO\_LINGER option to off on a socket means that when the
socket is closed, the call returns immediately, and a TCP RST packet
is sent to the peer.
Normally when a socket is closed it is handled gracefully, i.e., care
is taken that all outstanding packets have been received, and a TCP
FIN packet is sent.
In a way this is a race condition. In Mac OS X, the sockaddr struct
must be deallocated as soon as a RST packet is received (causing
accept to return None). This may only happen if the RST packet is
sent close enough to the initial TCP handshake."
It sounds like the implementation of socket.accept should check this
condition.
ZEO has a broader problem, with a broader solution, that it isn't
proprtly handling exceptions raised in it's application-level accept
logic.
Interestingly, I can't repoduce the symptom reported in this issue,
although I get a result, for ZEO, that is just as bad. The ZEO server
stops accepting new connections.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jim Fulton (jim-zope)](https://launchpad.net/~jim-zope) wrote on 2010-04-27: |  |  | [#10](/zodb/%2Bbug/135108/comments/10) |
| --- | --- | --- | --- |

* [135108.py](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Battachment/1354572/%2Bfiles/135108.py)
  [Edit](/zodb/%2Bbug/135108/%2Battachment/1354572)
  (696 bytes,
  text/x-python)

This is for Python maintainers, if anyone is paying attention. :)

I was able to reproduce this problem with Python 2.6 on Mac OS X 10.6.

I've attached a demonstration script, 135108.py.

Run it with a "server" argument:

python2.6 135108.py server

In a separate shell, run it with a client argument:

python2.6 135108.py client

On my mac, this causes the server to print None and exit,

demonstrating that that accept returned None, when it probably should

have done something else. :)

This is for Python maintainers, if anyone is paying attention. :)
I was able to reproduce this problem with Python 2.6 on Mac OS X 10.6.
I've attached a demonstration script, 135108.py.
Run it with a "server" argument:
python2.6 135108.py server
In a separate shell, run it with a client argument:
python2.6 135108.py client
On my mac, this causes the server to print None and exit,
demonstrating that that accept returned None, when it probably should
have done something else. :)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jim Fulton (jim-zope)](https://launchpad.net/~jim-zope) wrote on 2010-04-27: |  |  | [#11](/zodb/%2Bbug/135108/comments/11) |
| --- | --- | --- | --- |

Bonus:

If getpeername is called on the returned socket, [Errno 22] Invalid

argument is raised, rather than errno.ENOTCONN, which is what asyncore

expects. :)

Bonus:
If getpeername is called on the returned socket, [Errno 22] Invalid
argument is raised, rather than errno.ENOTCONN, which is what asyncore
expects. :)

[Jim Fulton (jim-zope)](https://launchpad.net/~jim-zope)
on 2010-04-27

| Changed in zodb: | |
| --- | --- |
| **milestone**: | none → 3.9.6 |
| **status**: | Incomplete → Fix Committed |
| **milestone**: | 3.9.6 → 3.10.0a2 |
| **milestone**: | 3.10.0a2 → 3.9.6 |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tres Seaver (tseaver)](https://launchpad.net/~tseaver) wrote on 2010-05-13: |  |  | [#12](/zodb/%2Bbug/135108/comments/12) |
| --- | --- | --- | --- |

Fix released in ZODB 3.10.0a2:

<http://pypi.python.org/pypi/ZODB3/3.10.0a2#a2-2010-05-04>

Fix released in ZODB 3.10.0a2:
http://pypi.python.org/pypi/ZODB3/3.10.0a2#a2-2010-05-04

[Hanno Schlichting (hannosch)](https://launchpad.net/~hannosch)
on 2010-11-06

| Changed in zodb: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Curtis Hovey (sinzui)](https://launchpad.net/~sinzui)
on 2012-08-07

| **affects**: | python → obsolete-junk |
| --- | --- |
| **no longer affects**: | obsolete-junk |

[See full activity log](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/zodb/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

You are
[not directly subscribed to this bug's notifications.](/zodb/%2Bbug/135108/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [patch against ZODB 3.8beta4](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Battachment/170282/%2Bfiles/patch.diff)
  [Edit](/zodb/%2Bbug/135108/%2Battachment/170282 "Change patch details")

* [Add patch](/zodb/%2Bbug/135108/%2Baddcomment?field.patch=on)

## Bug attachments

* [small test case](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Battachment/170281/%2Bfiles/osx_bug.tgz)
  [Edit](/zodb/%2Bbug/135108/%2Battachment/170281 "Change attachment details")
* [test case (v2.0)](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Battachment/171460/%2Bfiles/osx_bug.tgz)
  [Edit](/zodb/%2Bbug/135108/%2Battachment/171460 "Change attachment details")
* [135108.py](https://bugs.launchpad.net/zodb/%2Bbug/135108/%2Battachment/1354572/%2Bfiles/135108.py)
  [Edit](/zodb/%2Bbug/135108/%2Battachment/1354572 "Change attachment details")

* [Add attachment](/zodb/%2Bbug/135108/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from www.openwall.com_c1288546_20250124_152938.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](3) [[<thread-prev]](../../../2010/09/09/6) [[thread-next>]](../../../2010/09/22/3) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <2144085049.2142031284165154353.JavaMail.root@zmail01.collab.prod.int.phx2.redhat.com>
Date: Fri, 10 Sep 2010 20:32:34 -0400 (EDT)
From: Josh Bressers <bressers@...hat.com>
To: oss-security@...ts.openwall.com
Cc: David Malcolm <dmalcolm@...hat.com>,
        "Steven M. Christey" <coley@...us.mitre.org>
Subject: Re: CVE Request -- Python -- accept() implementation
 in async core is broken => more subcases

Steve,

I'm going to leave this one up to you. While it's really a python bug, I
suspect several affected projects will end up patching themselves (I'm not
sure how MITRE hadnles this situation).

Thanks.

--
    JB

----- "Jan Lieskovsky" <jlieskov@...hat.com> wrote:

> Hello Steve, vendors,
>
>    Giampaolo Rodola reported a deficiency in the implementation of
> Python's accept() routine:
>    [1] <http://bugs.python.org/issue6706>
>
>    The following seems to be all symptoms for the same issue:
>    A, SMTP (smtpd.py):
>       [2] <https://bugzilla.redhat.com/show_bug.cgi?id=632200>
>       [3] <http://bugs.python.org/issue9129>
>
>    B, pyftpdlib:
>       [4] <http://code.google.com/p/pyftpdlib/issues/detail?id=104>
>
>    C, ZODB:
>       [5] [https://bugs.launchpad.net/zodb/+bug/135108](https://bugs.launchpad.net/zodb/%2Bbug/135108)
>
>    D, more?
>
> Not sure, how to proceed in this case:
> i,  if assign only one CVE id for [1] or,
> ii, assign also separate CVE ids for the child symptoms? ([2], [3],
> [4])
>
> Cc-ed David Malcom on this post, to shed more light how to handle this
> case.
>
> Once the way, how to further proceed with this, specified. Steve could
> you allocate CVE id (ids)?
>
> Thanks && Regards, Jan.
> --
> Jan iankko Lieskovsky / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.openwall.com_9c6e9253_20250124_152938.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](5) [[next>]](7) [[thread-next>]](../../../2010/09/11/2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <4C88DB97.1060602@redhat.com>
Date: Thu, 09 Sep 2010 15:05:27 +0200
From: Jan Lieskovsky <jlieskov@...hat.com>
To: "Steven M. Christey" <coley@...us.mitre.org>
CC: oss-security <oss-security@...ts.openwall.com>,
        David Malcolm <dmalcolm@...hat.com>
Subject: CVE Request -- Python -- accept() implementation in async core is
 broken => more subcases

Hello Steve, vendors,

   Giampaolo Rodola reported a deficiency in the implementation of Python's accept() routine:
   [1] <http://bugs.python.org/issue6706>

   The following seems to be all symptoms for the same issue:
   A, SMTP (smtpd.py):
      [2] <https://bugzilla.redhat.com/show_bug.cgi?id=632200>
      [3] <http://bugs.python.org/issue9129>

   B, pyftpdlib:
      [4] <http://code.google.com/p/pyftpdlib/issues/detail?id=104>

   C, ZODB:
      [5] [https://bugs.launchpad.net/zodb/+bug/135108](https://bugs.launchpad.net/zodb/%2Bbug/135108)

   D, more?

Not sure, how to proceed in this case:
i,  if assign only one CVE id for [1] or,
ii, assign also separate CVE ids for the child symptoms? ([2], [3], [4])

Cc-ed David Malcom on this post, to shed more light how to handle this case.

Once the way, how to further proceed with this, specified. Steve could you allocate CVE id (ids)?

Thanks && Regards, Jan.
--
Jan iankko Lieskovsky / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from code.google.com_8c64d798_20250124_152937.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgiampaolo%2Fpyftpdlib)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgiampaolo%2Fpyftpdlib)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=giampaolo%2Fpyftpdlib)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[giampaolo](/giampaolo)
/
**[pyftpdlib](/giampaolo/pyftpdlib)**
Public

* [Notifications](/login?return_to=%2Fgiampaolo%2Fpyftpdlib) You must be signed in to change notification settings
* [Fork
  264](/login?return_to=%2Fgiampaolo%2Fpyftpdlib)
* [Star
   1.7k](/login?return_to=%2Fgiampaolo%2Fpyftpdlib)

Extremely fast and scalable Python FTP server library

### License

[MIT license](/giampaolo/pyftpdlib/blob/master/LICENSE)

[1.7k
stars](/giampaolo/pyftpdlib/stargazers) [264
forks](/giampaolo/pyftpdlib/forks) [Branches](/giampaolo/pyftpdlib/branches) [Tags](/giampaolo/pyftpdlib/tags) [Activity](/giampaolo/pyftpdlib/activity)
 [Star](/login?return_to=%2Fgiampaolo%2Fpyftpdlib)

 [Notifications](/login?return_to=%2Fgiampaolo%2Fpyftpdlib) You must be signed in to change notification settings

* [Code](/giampaolo/pyftpdlib)
* [Issues
  119](/giampaolo/pyftpdlib/issues)
* [Pull requests
  16](/giampaolo/pyftpdlib/pulls)
* [Actions](/giampaolo/pyftpdlib/actions)
* [Security](/giampaolo/pyftpdlib/security)
* [Insights](/giampaolo/pyftpdlib/pulse)

Additional navigation options

* [Code](/giampaolo/pyftpdlib)
* [Issues](/giampaolo/pyftpdlib/issues)
* [Pull requests](/giampaolo/pyftpdlib/pulls)
* [Actions](/giampaolo/pyftpdlib/actions)
* [Security](/giampaolo/pyftpdlib/security)
* [Insights](/giampaolo/pyftpdlib/pulse)

# giampaolo/pyftpdlib

    master[Branches](/giampaolo/pyftpdlib/branches)[Tags](/giampaolo/pyftpdlib/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[1,458 Commits](/giampaolo/pyftpdlib/commits/master/) | | |
| [.github](/giampaolo/pyftpdlib/tree/master/.github ".github") | | [.github](/giampaolo/pyftpdlib/tree/master/.github ".github") |  |  |
| [demo](/giampaolo/pyftpdlib/tree/master/demo "demo") | | [demo](/giampaolo/pyftpdlib/tree/master/demo "demo") |  |  |
| [docs](/giampaolo/pyftpdlib/tree/master/docs "docs") | | [docs](/giampaolo/pyftpdlib/tree/master/docs "docs") |  |  |
| [pyftpdlib](/giampaolo/pyftpdlib/tree/master/pyftpdlib "pyftpdlib") | | [pyftpdlib](/giampaolo/pyftpdlib/tree/master/pyftpdlib "pyftpdlib") |  |  |
| [scripts](/giampaolo/pyftpdlib/tree/master/scripts "scripts") | | [scripts](/giampaolo/pyftpdlib/tree/master/scripts "scripts") |  |  |
| [.gitignore](/giampaolo/pyftpdlib/blob/master/.gitignore ".gitignore") | | [.gitignore](/giampaolo/pyftpdlib/blob/master/.gitignore ".gitignore") |  |  |
| [CREDITS](/giampaolo/pyftpdlib/blob/master/CREDITS "CREDITS") | | [CREDITS](/giampaolo/pyftpdlib/blob/master/CREDITS "CREDITS") |  |  |
| [HISTORY.rst](/giampaolo/pyftpdlib/blob/master/HISTORY.rst "HISTORY.rst") | | [HISTORY.rst](/giampaolo/pyftpdlib/blob/master/HISTORY.rst "HISTORY.rst") |  |  |
| [LICENSE](/giampaolo/pyftpdlib/blob/master/LICENSE "LICENSE") | | [LICENSE](/giampaolo/pyftpdlib/blob/master/LICENSE "LICENSE") |  |  |
| [MANIFEST.in](/giampaolo/pyftpdlib/blob/master/MANIFEST.in "MANIFEST.in") | | [MANIFEST.in](/giampaolo/pyftpdlib/blob/master/MANIFEST.in "MANIFEST.in") |  |  |
| [Makefile](/giampaolo/pyftpdlib/blob/master/Makefile "Makefile") | | [Makefile](/giampaolo/pyftpdlib/blob/master/Makefile "Makefile") |  |  |
| [README.rst](/giampaolo/pyftpdlib/blob/master/README.rst "README.rst") | | [README.rst](/giampaolo/pyftpdlib/blob/master/README.rst "README.rst") |  |  |
| [make.bat](/giampaolo/pyftpdlib/blob/master/make.bat "make.bat") | | [make.bat](/giampaolo/pyftpdlib/blob/master/make.bat "make.bat") |  |  |
| [pyproject.toml](/giampaolo/pyftpdlib/blob/master/pyproject.toml "pyproject.toml") | | [pyproject.toml](/giampaolo/pyftpdlib/blob/master/pyproject.toml "pyproject.toml") |  |  |
| [setup.py](/giampaolo/pyftpdlib/blob/master/setup.py "setup.py") | | [setup.py](/giampaolo/pyftpdlib/blob/master/setup.py "setup.py") |  |  |
| View all files | | |

## Repository files navigation

* README
* MIT license
[![Downloads](https://camo.githubusercontent.com/3302e299aa1107ab24463d60faa1b3d588255114506521c61eea8f857df9be15/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f7079667470646c69622e737667)](https://pepy.tech/project/pyftpdlib) [![Github stars](https://camo.githubusercontent.com/5a38ee6a52537bb989eb9ede7d2bd53eba11550ebea914895c5ef2598518abe0/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f6769616d70616f6c6f2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/stargazers) [![Github forks](https://camo.githubusercontent.com/73433aaa011d4b1b18b58fbf09cd5856700939aad5a59788599a9d3d69316937/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f666f726b732f6769616d70616f6c6f2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/network/members) [![Contributors](https://camo.githubusercontent.com/0df10cea93a0a4caffe0685f49bb0abb1cb70d6ba940ce2b9ffd2c7e27895711/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f636f6e7472696275746f72732f6769616d70616f6c6f2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/graphs/contributors)
[![Latest version](https://camo.githubusercontent.com/47a1255b797241faa45479e25dc0e1d92edc824927e2bbb314d4cd4360cede5f/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f7079667470646c69622e7376673f6c6162656c3d70797069)](https://pypi.org/project/pyftpdlib) [![Binary packages](https://camo.githubusercontent.com/b25fce4758205ab6017a5cab2d2840c8eb77fc4822021ef41a4350a588ce97c1/68747470733a2f2f7265706f6c6f67792e6f72672f62616467652f74696e792d7265706f732f707974686f6e3a7079667470646c69622e737667)](https://repology.org/metapackage/python%3Apyftpdlib/versions) [![License](https://camo.githubusercontent.com/bd7f5360f1fe45a2b0c950fd1eee9da2b23ac15040de51f0eea81c19ae8742db/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f7079667470646c69622e737667)](https://github.com/giampaolo/pyftpdlib/blob/master/LICENSE)
[![GH actions](https://camo.githubusercontent.com/c5458f220fee18ed63d4e67fde1457133dec7291b1a084b7c4f7b4b75dadd2fe/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f6769616d70616f6c6f2f7079667470646c69622f2e6769746875622f776f726b666c6f77732f74657374732e796d6c)](https://github.com/giampaolo/pyftpdlib/actions) [![Documentation Status](https://camo.githubusercontent.com/202de5ae4e0544f9e8ac2c083343b843a106f907ff5ef94d563fd2f1699a9bad/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f7079667470646c69622f62616467652f3f76657273696f6e3d6c6174657374)](https://pyftpdlib.readthedocs.io/en/latest/) [![Twitter Follow](https://camo.githubusercontent.com/f1d83acf6a8ccedb437f86f280e270cd9743b291564d159352d958d9f0954549/68747470733a2f2f696d672e736869656c64732e696f2f747769747465722f666f6c6c6f772f67726f646f6c612e7376673f6c6162656c3d666f6c6c6f77267374796c653d666c6174266c6f676f3d74776974746572266c6f676f436f6c6f723d344641444646)](https://twitter.com/grodola)

## Quick links

* [Home](https://github.com/giampaolo/pyftpdlib)
* [Documentation](https://pyftpdlib.readthedocs.io)
* [Download](https://pypi.org/project/pyftpdlib/)
* [Mailing list](https://groups.google.com/group/pyftpdlib/topics)
* [What's new](https://github.com/giampaolo/pyftpdlib/blob/master/HISTORY.rst)

## About

Python FTP server library provides a high-level portable interface to easily
write very efficient, scalable and asynchronous FTP servers with Python. It is
the most complete [RFC-959](https://datatracker.ietf.org/doc/html/rfc959.html) FTP server implementation available for [Python](https://www.python.org/)
programming language.

## Features

* Extremely **lightweight**, **fast** and **scalable** (see
  [why](https://github.com/giampaolo/pyftpdlib/issues/203) and
  [benchmarks](https://pyftpdlib.readthedocs.io/en/latest/benchmarks.html)).
* Uses **sendfile(2)** (see [pysendfile](https://github.com/giampaolo/pysendfile))
  system call for uploads (Linux only).
* Uses `epoll()` / `kqueue()` / `select()` to handle concurrency
  asynchronously.
* ...But can optionally skip to a [multiple thread / process](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html#changing-the-concurrency-model) model (as in:
  you'll be free to block or use slow filesystems).
* Portable: entirely written in pure Python.
* Supports **FTPS** ([RFC-4217](https://datatracker.ietf.org/doc/html/rfc4217)), **IPv6** ([RFC-2428](https://datatracker.ietf.org/doc/html/rfc2428)), **Unicode** file
  names ([RFC-2640](https://datatracker.ietf.org/doc/html/rfc2640)), **MLSD/MLST** commands ([RFC-3659](https://datatracker.ietf.org/doc/html/rfc3659)).
* Support for virtual users and virtual filesystem.
* Flexible system of "authorizers" able to manage both "virtual" and
  "real" users on on both
  [UNIX](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html#unix-ftp-server)
  and
  [Windows](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html#windows-ftp-server).

## Performances

Despite being written in an interpreted language, pyftpdlib has transfer rates
comparable or superior to common UNIX FTP servers written in C. It usually
tends to scale better (see [benchmarks](https://pyftpdlib.readthedocs.io/en/latest/benchmarks.html)) because whereas vsftpd and proftpd
use multiple processes to achieve concurrency, pyftpdlib only uses one (see
[the C10K problem](http://www.kegel.com/c10k.html)).

### pyftpdlib vs. proftpd 1.3.4

| **benchmark type** | **pyftpdlib** | **proftpd** | **speedup** |
| --- | --- | --- | --- |
| STOR (client -> server) | 585.90 MB/sec | 600.49 MB/sec | -0.02x |
| RETR (server -> client) | 1652.72 MB/sec | 1524.05 MB/sec | **+0.08** |
| 300 concurrent clients (connect, login) | 0.19 secs | 9.98 secs | **+51x** |
| STOR (1 file with 300 idle clients) | 585.59 MB/sec | 518.55 MB/sec | **+0.1x** |
| RETR (1 file with 300 idle clients) | 1497.58 MB/sec | 1478.19 MB/sec | 0x |
| 300 concurrent clients (RETR 10M file) | 3.41 secs | 3.60 secs | **+0.05x** |
| 300 concurrent clients (STOR 10M file) | 8.60 secs | 11.56 secs | **+0.3x** |
| 300 concurrent clients (QUIT) | 0.03 secs | 0.39 secs | **+12x** |

### pyftpdlib vs. vsftpd 2.3.5

| **benchmark type** | **pyftpdlib** | **vsftpd** | **speedup** |
| --- | --- | --- | --- |
| STOR (client -> server) | 585.90 MB/sec | 611.73 MB/sec | -0.04x |
| RETR (server -> client) | 1652.72 MB/sec | 1512.92 MB/sec | **+0.09** |
| 300 concurrent clients (connect, login) | 0.19 secs | 20.39 secs | **+106x** |
| STOR (1 file with 300 idle clients) | 585.59 MB/sec | 610.23 MB/sec | -0.04x |
| RETR (1 file with 300 idle clients) | 1497.58 MB/sec | 1493.01 MB/sec | 0x |
| 300 concurrent clients (RETR 10M file) | 3.41 secs | 3.67 secs | **+0.07x** |
| 300 concurrent clients (STOR 10M file) | 8.60 secs | 9.82 secs | **+0.07x** |
| 300 concurrent clients (QUIT) | 0.03 secs | 0.01 secs | +0.14x |

For more benchmarks see [here](https://pyftpdlib.readthedocs.io/en/latest/benchmarks.html).

## Command line usage

Start a FTP server, with an anonymous user with write permissions, on port 2121:

```
$ python3 -m pyftpdlib --write
RuntimeWarning: write permissions assigned to anonymous user.
  self._check_permissions(username, perm)
[I 2024-06-23 13:49:35] concurrency model: async
[I 2024-06-23 13:49:35] masquerade (NAT) address: None
[I 2024-06-23 13:49:35] passive ports: None
[I 2024-06-23 13:49:35] >>> starting FTP server on 0.0.0.0:2121, pid=763634 <<<
```

## API usage

```
>>> from pyftpdlib.authorizers import DummyAuthorizer
>>> from pyftpdlib.handlers import FTPHandler
>>> from pyftpdlib.servers import FTPServer
>>>
>>> authorizer = DummyAuthorizer()
>>> authorizer.add_user("user", "12345", "/home/giampaolo", perm="elradfmwMT")
>>> authorizer.add_anonymous("/home/nobody")
>>>
>>> handler = FTPHandler
>>> handler.authorizer = authorizer
>>>
>>> server = FTPServer(("127.0.0.1", 21), handler)
>>> server.serve_forever()
[I 13-02-19 10:55:42] >>> starting FTP server on 127.0.0.1:21 <<<
[I 13-02-19 10:55:42] poller: <class 'pyftpdlib.ioloop.Epoll'>
[I 13-02-19 10:55:42] masquerade (NAT) address: None
[I 13-02-19 10:55:42] passive ports: None
[I 13-02-19 10:55:42] use sendfile(2): True
[I 13-02-19 10:55:45] 127.0.0.1:34178-[] FTP session opened (connect)
[I 13-02-19 10:55:48] 127.0.0.1:34178-[user] USER 'user' logged in.
[I 13-02-19 10:56:27] 127.0.0.1:34179-[user] RETR /home/giampaolo/.vimrc completed=1 bytes=1700 seconds=0.001
[I 13-02-19 10:56:39] 127.0.0.1:34179-[user] FTP session closed (disconnect).
```

For other code samples read the [tutorial](https://pyftpdlib.readthedocs.io/en/latest/tutorial.html)

## Donate

A lot of time and effort went into making pyftpdlib as it is right now.
If you feel pyftpdlib is useful to you or your business and want to support its
future development please consider [donating](https://gmpy.dev/donate) me some money.

## About

Extremely fast and scalable Python FTP server library

### Topics

[python](/topics/python "Topic: python")
[asynchronous](/topics/asynchronous "Topic: asynchronous")
[ftp](/topics/ftp "Topic: ftp")
[ftp-server](/topics/ftp-server "Topic: ftp-server")
[ftps](/topics/ftps "Topic: ftps")

### Resources

[Readme](#readme-ov-file)
### License

[MIT license](#MIT-1-ov-file)

[Activity](/giampaolo/pyftpdlib/activity)
### Stars

[**1.7k**
stars](/giampaolo/pyftpdlib/stargazers)
### Watchers

[**53**
watching](/giampaolo/pyftpdlib/watchers)
### Forks

[**264**
forks](/giampaolo/pyftpdlib/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fgiampaolo%2Fpyftpdlib&report=giampaolo+%28user%29)

## Sponsor this project

* <https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ZSSF7G42VA2XE>

[Learn more about GitHub Sponsors](/sponsors)

## [Contributors 35](/giampaolo/pyftpdlib/graphs/contributors)

* [![@giampaolo](https://avatars.githubusercontent.com/u/681260?s=64&v=4)](https://github.com/giampaolo)
* [![@tahirijaz24](https://avatars.githubusercontent.com/u/30835856?s=64&v=4)](https://github.com/tahirijaz24)
* [![@jloden](https://avatars.githubusercontent.com/u/7715199?s=64&v=4)](https://github.com/jloden)
* [![@Ryanb58](https://avatars.githubusercontent.com/u/3086302?s=64&v=4)](https://github.com/Ryanb58)
* [![@gliptak](https://avatars.githubusercontent.com/u/50109?s=64&v=4)](https://github.com/gliptak)
* [![@andrewshulgin](https://avatars.githubusercontent.com/u/3032891?s=64&v=4)](https://github.com/andrewshulgin)
* [![@lurch](https://avatars.githubusercontent.com/u/476186?s=64&v=4)](https://github.com/lurch)
* [![@emilv](https://avatars.githubusercontent.com/u/1684914?s=64&v=4)](https://github.com/emilv)
* [![@sbraz](https://avatars.githubusercontent.com/u/4833332?s=64&v=4)](https://github.com/sbraz)
* [![@stat1c-void](https://avatars.githubusercontent.com/u/9142081?s=64&v=4)](https://github.com/stat1c-void)
* [![@davetapley](https://avatars.githubusercontent.com/u/48232?s=64&v=4)](https://github.com/davetapley)
* [![@D3X](https://avatars.githubusercontent.com/u/82002?s=64&v=4)](https://github.com/D3X)
* [![@pjona](https://avatars.githubusercontent.com/u/170732?s=64&v=4)](https://github.com/pjona)
* [![@PonyPC](https://avatars.githubusercontent.com/u/284594?s=64&v=4)](https://github.com/PonyPC)

[+ 21 contributors](/giampaolo/pyftpdlib/graphs/contributors)

## Languages

* [Python
  98.3%](/giampaolo/pyftpdlib/search?l=python)
* [Makefile
  1.6%](/giampaolo/pyftpdlib/search?l=makefile)
* [Batchfile
  0.1%](/giampaolo/pyftpdlib/search?l=batchfile)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.openwall.com_18e6afc4_20250124_152938.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](2) [[next>]](../../../2010/09/24/1) [[<thread-prev]](../../../2010/09/11/2) [[thread-next>]](../../../2010/09/24/3) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <813825154.401931285185278932.JavaMail.root@zmail01.collab.prod.int.phx2.redhat.com>
Date: Wed, 22 Sep 2010 15:54:38 -0400 (EDT)
From: Josh Bressers <bressers@...hat.com>
To: oss-security@...ts.openwall.com
Cc: David Malcolm <dmalcolm@...hat.com>,
        "Steven M. Christey" <coley@...us.mitre.org>
Subject: Re: CVE Request -- Python -- accept() implementation
 in async core is broken => more subcases

Any update on this Steve?

Thanks.

--
    JB

----- "Josh Bressers" <bressers@...hat.com> wrote:

> Steve,
>
> I'm going to leave this one up to you. While it's really a python bug,
> I
> suspect several affected projects will end up patching themselves (I'm
> not
> sure how MITRE hadnles this situation).
>
> Thanks.
>
> --
>     JB
>
>
> ----- "Jan Lieskovsky" <jlieskov@...hat.com> wrote:
>
> > Hello Steve, vendors,
> >
> >    Giampaolo Rodola reported a deficiency in the implementation of
> > Python's accept() routine:
> >    [1] <http://bugs.python.org/issue6706>
> >
> >    The following seems to be all symptoms for the same issue:
> >    A, SMTP (smtpd.py):
> >       [2] <https://bugzilla.redhat.com/show_bug.cgi?id=632200>
> >       [3] <http://bugs.python.org/issue9129>
> >
> >    B, pyftpdlib:
> >       [4] <http://code.google.com/p/pyftpdlib/issues/detail?id=104>
> >
> >    C, ZODB:
> >       [5] [https://bugs.launchpad.net/zodb/+bug/135108](https://bugs.launchpad.net/zodb/%2Bbug/135108)
> >
> >    D, more?
> >
> > Not sure, how to proceed in this case:
> > i,  if assign only one CVE id for [1] or,
> > ii, assign also separate CVE ids for the child symptoms? ([2], [3],
> > [4])
> >
> > Cc-ed David Malcom on this post, to shed more light how to handle
> this
> > case.
> >
> > Once the way, how to further proceed with this, specified. Steve
> could
> > you allocate CVE id (ids)?
> >
> > Thanks && Regards, Jan.
> > --
> > Jan iankko Lieskovsky / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


