=== Content from rhn.redhat.com_6f9071e6_20250124_163959.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2010:0773 - Security Advisory

Issued:
2010-10-14
Updated:
2010-10-14
# RHSA-2010:0773 - Security Advisory

* [Overview](#overview)

## Synopsis

Moderate: Red Hat Enterprise MRG Messaging and Grid Version 1.3

## Type/Severity

Security Advisory: Moderate

## Topic

Updated packages that fix two security issues, several bugs, and add
multiple enhancements are now available as part of the ongoing support and
maintenance of Red Hat Enterprise MRG Messaging and Grid for Red Hat
Enterprise Linux 5.

The Red Hat Security Response Team has rated this update as having moderate
security impact. Common Vulnerability Scoring System (CVSS) base scores,
which give detailed severity ratings, are available for each vulnerability
from the CVE links in the References section.

## Description

Red Hat Enterprise MRG (Messaging, Realtime, and Grid) is a realtime IT
infrastructure for enterprise computing. MRG Messaging uses Apache Qpid to
implement the Advanced Message Queuing Protocol (AMQP) standard, adding
persistence options, kernel optimizations, and operating system services.

This update moves Red Hat Enterprise MRG to version 1.3.

A flaw was found in the way Apache Qpid handled the receipt of invalid AMQP
data. A remote user could send invalid AMQP data to the server, causing it
to crash, resulting in the cluster shutting down. (CVE-2009-5005)

A flaw was found in the way Apache Qpid handled a request to redeclare an
existing exchange while adding a new alternate exchange. If a remote,
authenticated user issued such a request, the server would crash, resulting
in the cluster shutting down. (CVE-2009-5006)

This update also adds the following enhancements:

* This update introduces a protocol-independent C++ API. The extra layer of

indirection will make it easy to support new versions of the AMQP protocol,
as well as multiple versions simultaneously. (BZ#497747)

* The management component is now capable of working in a cluster.

(BZ#501015)

* The Messaging Client Python API is now protocol-independent. (BZ#497748)
* This update allows a JMS client to subscribe to the failover exchange to

retrieve cluster membership information and subsequently to receive
updates. (BZ#483753)

* With this update, the qpidd service can be run without additional

authentication options. (BZ#515513)

* This update adds an OpenMPI wrapper script to Condor. It adds support for

OpenMPI jobs. (BZ#537232)

* The Messaging Client Python API now provides a failover mechanism for

clustered brokers. (BZ#495718)

* The Python Messaging API now includes support for Simple Authentication

and Security Layer (SASL), which allows authentication support to be added
to connection-based protocols. (BZ#548493)

* The qpid-tool is now able to determine which session a queue consumer

belongs to. (BZ#504325)

* This update handles backward/forward compatibility for QMF and its

components. (BZ#506698)

* Both Secure Sockets Layer (SSL) and Remote Direct Memory Access (RDMA)

entries can now appear in the list of known URLs. (BZ#471632)

* This update allows for the scheduler daemon to run without swap.

(BZ#548090)

* This update introduces a mechanism that specifies the queue size of a

queue that is setup via the Java API. (BZ#534008)

* Previously, a collector could not be remotely restarted. With this

update, the restart is possible and works as expected. (BZ#543021)

* The usage information for the qpid-config utility (that is, the output of

the "qpid-config -h" command) has been updated to include a brief
explanation of the exchange type. (BZ#506420)

These updated packages include many other bug fixes and enhancements. Users
are directed to the Red Hat Enterprise MRG 1.3 Technical Notes for
information on these changes:

<http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_MRG/1/html/Technical_Notes/index.html>

All Red Hat Enterprise MRG users are advised to upgrade to these updated
packages, which resolve these issues and add these enhancements, as well as
resolving the issues and adding the enhancements noted in the Red Hat
Enterprise MRG 1.3 Technical Notes. After installing the updated packages,
the qpidd service must be restarted ("service qpidd restart") for this
update to take effect.

## Solution

Before applying this update, make sure all previously-released errata
relevant to your system have been applied.

This update is available via the Red Hat Network. Details on how to
use the Red Hat Network to apply this update are available at
<http://kbase.redhat.com/faq/docs/DOC-11259>

## Affected Products

* MRG Realtime 1 x86\_64
* MRG Realtime 1 i386
* Red Hat Enterprise MRG Messaging 1 x86\_64
* Red Hat Enterprise MRG Messaging 1 i386
* MRG Grid 1 x86\_64
* MRG Grid 1 i386
* MRG Grid Execute 1 x86\_64
* MRG Grid Execute 1 i386
* MRG Management 1 x86\_64
* MRG Management 1 i386

## Fixes

* [BZ - 498056](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=498056)
  - SASL/GSSAPI - Connection hangs when GSSAPI context expires
* [BZ - 498247](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=498247)
  - CLI utilities display Python back-traces in some error cases
* [BZ - 500712](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=500712)
  - QMF queries to the broker may return records for deleted objects
* [BZ - 500779](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=500779)
  - Feature: Provide access to the Connection a Session corresponds to
* [BZ - 501015](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=501015)
  - Management and cluster do not work together.
* [BZ - 501305](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=501305)
  - Cluster node gets stuck as updatee and 'hangs' cluster
* [BZ - 501749](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=501749)
  - If an XML exchange is declared durable, the broker crashes on recovery
* [BZ - 504000](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=504000)
  - qpid-config's altern-ex option doesn't work
* [BZ - 504325](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=504325)
  - Enhancement: it should be possible to determine through qpid-tool which sessions a queues consumers belong to
* [BZ - 504691](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=504691)
  - alternate-exchange proprty of exchange and queue are not persisted
* [BZ - 505287](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=505287)
  - Messages with no content that 'flow to disk' result in protocol errors on delivery
* [BZ - 505314](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=505314)
  - qpid-tool crashes down after input wrong command list query
* [BZ - 505923](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=505923)
  - dedicated scheduler may be inappropriately reusing claims
* [BZ - 506420](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=506420)
  - qpid-config -h does not explain exchange type
* [BZ - 506553](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=506553)
  - sesame - memory bloat over time
* [BZ - 506556](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=506556)
  - c++ client may not timeout accurately where multiple connections exist in the process
* [BZ - 506698](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=506698)
  - Handle backward/forward compatibility for QMF
* [BZ - 507363](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=507363)
  - clustered qpidd fails to start - gather loop causes openais\_dispatch\_recv() to block
* [BZ - 507413](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=507413)
  - Broker with single IO thread gets stuck looping if it runs out of file handles
* [BZ - 507421](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=507421)
  - Cluster flow control does not appear to be working properly.
* [BZ - 507538](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=507538)
  - method exchange\_declare is missing in ruby qpid session class
* [BZ - 507586](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=507586)
  - qpid-config ends with failure
* [BZ - 508137](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=508137)
  - C++ QMF agent not connecting to broker under valgrind
* [BZ - 508144](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=508144)
  - A broker stopped and restarted does not remember 'redelivered' status correctly
* [BZ - 508675](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=508675)
  - Unresponsive qpidd process hangs the cluster
* [BZ - 508959](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=508959)
  - Attempt to propagate binding info over dynamic link can crash broker if link is concurrently destroyed
* [BZ - 509395](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=509395)
  - The JMS Client does not default to the correct priority as specified in the spec
* [BZ - 509437](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=509437)
  - Failure in failover\_soak
* [BZ - 509449](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=509449)
  - JMS client releases messages in an unpredictable order on recover
* [BZ - 509454](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=509454)
  - [RFE] Add validation for the '--cluster-url' qpidd option
* [BZ - 509800](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=509800)
  - If journal capacity is exceeded as a result of cluster-durable mode being invoked, last man standing exits
* [BZ - 554980](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=554980)
  - [qpidd+store] broker rarely aborts when stressed by perftest
* [BZ - 555716](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=555716)
  - [qpidd+store] broker rarely segfaults when stressed by perftest
* [BZ - 556351](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=556351)
  - clustered qpidd - durable exchanges do not survive cluster restart.
* [BZ - 557159](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=557159)
  - Queue-Purge does not send messages to alternate-exchange
* [BZ - 557896](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=557896)
  - The ttl of messages is not adjusted when forwarding on to other brokers in a federation.
* [BZ - 558526](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=558526)
  - clustered qpidd shutdowns during start-up with 'Authentication failed: SASL(-1): generic failure: Unable to find a callback: 32775'
* [BZ - 558864](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=558864)
  - JMS\_QPID\_DESTTYPE is not set making getJMSDestination unusable.
* [BZ - 558968](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=558968)
  - initscript lsb compliance
* [BZ - 559014](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=559014)
  - clustered qpid: durable exchange state not replicated to broker joining cluster
* [BZ - 559071](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=559071)
  - VM\_MEMORY handled inconsistently between Startd and VMGahp
* [BZ - 559625](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=559625)
  - Segfault if FailoverManager is closed before being opened.
* [BZ - 560005](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=560005)
  - Broker options "--auth" and "--require-encryption" can fail when used with SSL/TLS
* [BZ - 561955](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=561955)
  - PREPARE hook invoked as condor, not as user. cannot access $PWD.
* [BZ - 561958](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=561958)
  - PREPARE hook invocation failure does not abort job execution
* [BZ - 565618](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=565618)
  - condor\_submit fsync()s UserLog for each job
* [BZ - 566825](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=566825)
  - Grid with no slots throws exception in MRG Management Console
* [BZ - 568502](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=568502)
  - Collector should advertise itself immediately
* [BZ - 568661](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=568661)
  - JMS client does not verify that the hostname connected to matches that specified in the servers certificate
* [BZ - 568718](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=568718)
  - Is acl reload safe to use?
* [BZ - 568838](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=568838)
  - Dynamic federation duplicates messages
* [BZ - 568863](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=568863)
  - Dynamic federation tears links down incorrectly
* [BZ - 570756](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=570756)
  - DtxSetTimeout sent after XID has already been committed
* [BZ - 572574](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=572574)
  - Error reported from execute node incomplete for IWD access failure
* [BZ - 572668](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=572668)
  - Potential shadow/schedd protocol error
* [BZ - 575147](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=575147)
  - condor\_master can't start additional schedd's without a restart
* [BZ - 575150](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=575150)
  - Need to be able to configure maximum cluster id
* [BZ - 575177](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=575177)
  - Messages set with a TTL expire immediately when sent on qpid queues with LVQ ordering
* [BZ - 575748](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=575748)
  - broker exits with "critical Broker start-up failed: St9bad\_alloc" when ran with --worker-threads 0|-1
* [BZ - 575777](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=575777)
  - scheduler universe jobs can start during schedd shutdown
* [BZ - 575784](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=575784)
  - improper RELEASE\_CLAIM after REQUEST\_CLAIM rejection
* [BZ - 576693](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=576693)
  - qpid-cluster -d does not close the client connection
* [BZ - 578216](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=578216)
  - condor\_schedd reuses claims to partitioned slots inappropriately
* [BZ - 578600](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=578600)
  - Dyanamic Slot INVALIDATE\_STARTD\_ADS causes collector pegging
* [BZ - 579681](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=579681)
  - Topic exchange duplicates messages
* [BZ - 582366](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=582366)
  - When reloading a large acl file , the broker core dumps
* [BZ - 583131](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=583131)
  - Fix Java Client logging
* [BZ - 583526](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=583526)
  - Management methods disallowed in Clusters must be re-enabled
* [BZ - 584089](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=584089)
  - ACL module core dumps if management is disabled
* [BZ - 591292](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=591292)
  - MRG-M Heartbeat causes core
* [BZ - 509892](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=509892)
  - byte credit calculation inconsistent for messages transfered to new joiner
* [BZ - 510241](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=510241)
  - clustered qpidd crash in qpid::sys::Poller::run()
* [BZ - 510475](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=510475)
  - clustered qpidd startup - abort because of unhandled exception
* [BZ - 510583](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=510583)
  - Unhandled exception when running qpid-cluster against a standalone broker.
* [BZ - 510747](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=510747)
  - Out of Bounds exception when sending large QMF response
* [BZ - 511066](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=511066)
  - Replication exchange type should record the usual management stats
* [BZ - 511292](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=511292)
  - Unexpected connection shows up for qpid-stat -c
* [BZ - 513426](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=513426)
  - string to double conversion results in questionable precision
* [BZ - 513641](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=513641)
  - qpid-config gives error "Failed: ()" when creating persistent queue
* [BZ - 514054](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=514054)
  - [store] Journal can fill under some conditions, and recover from full condition not possible
* [BZ - 514751](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=514751)
  - QMF agent logging to file, no stdout
* [BZ - 515513](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=515513)
  - Make cluster update work out of the box without special authentication options
* [BZ - 517836](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=517836)
  - exclusive parameter ignored in JMS url binding, if durable attribute is present
* [BZ - 518291](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=518291)
  - Python management tools must handle SystemExit exception properly
* [BZ - 518394](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=518394)
  - Creating durable and cluster-durable queue which has bad --file-count and/or --file-size parameter causes an exception only for first time
* [BZ - 518872](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=518872)
  - [FEATURE] exchange flag auto-delete is not recognizable
* [BZ - 519183](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=519183)
  - Matchmaker code doesn't implement fair share correctly
* [BZ - 519476](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=519476)
  - Invalid accept data sent by Java client after failover.
* [BZ - 519505](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=519505)
  - Broker strips domain from userID, causes mismatch on GSSAPI id checking
* [BZ - 520600](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=520600)
  - Intermittent leak in client library, connector thread not joined.
* [BZ - 522267](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=522267)
  - Windows: Qpid C++ pid\_t and ssize\_t 3rd-party compat
* [BZ - 526299](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=526299)
  - the clustered broker seems to sometimes not send a close-ok before shutting down the socket
* [BZ - 526680](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=526680)
  - Exchanges named "amq." are declarable, but amqp spec
* [BZ - 527233](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=527233)
  - shadow process bloat
* [BZ - 529670](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=529670)
  - qpid-config - inappropriate error message if trying to authenticate with non-existing user
* [BZ - 530594](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=530594)
  - restart of libvirtd causes condor\_vm-gahp to hang.
* [BZ - 531561](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=531561)
  - alternate exchange not visible on a queue via QMF
* [BZ - 531833](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=531833)
  - FailoverExchangeMethod getNextBrokerDetails() loops infinitely after a total cluster failure or if the inital connect node is down
* [BZ - 531837](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=531837)
  - Java client should set the process ID in the client properties during Connection open
* [BZ - 531842](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=531842)
  - When kerberos auth is used, Java client should use the kerberos user\_id & domain when setting the user\_id in messages
* [BZ - 533045](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=533045)
  - Feature Request: support for SASL EXTERNAL with TLS/SSL
* [BZ - 533173](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=533173)
  - --max-connectoins has no effect
* [BZ - 534008](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=534008)
  - Need mechanism to specify the queue size of a queue that is setup via the Java API.
* [BZ - 537232](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=537232)
  - PU: need OpenMPI wrapper script
* [BZ - 537481](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=537481)
  - qpid-stat needs option to link sesion to queue via subscription object
* [BZ - 538188](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=538188)
  - connection.start() hangs if connection is not accepted
* [BZ - 540545](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=540545)
  - WANT\_SUSPEND evaluating to UNDEFIEND causes condor\_startd exception
* [BZ - 541927](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=541927)
  - Persistent cluster problems after reboot -f
* [BZ - 543021](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=543021)
  - Unable to restart collector with condor\_restart on remote node
* [BZ - 543524](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=543524)
  - Cluster with --cluster-size should not hold up init scripts.
* [BZ - 543560](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=543560)
  - VM Universe libvirt script issues
* [BZ - 544092](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=544092)
  - message store should not delete backups when qpidd starts
* [BZ - 544306](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=544306)
  - clustered broker does not retry CPG calls that return TRY\_AGAIN
* [BZ - 545436](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=545436)
  - Cluster node shutsdown with inconsistent error
* [BZ - 546736](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=546736)
  - Schedd performs unnecessary file operations on SPOOL, targeting mpp.X.Y files
* [BZ - 546770](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=546770)
  - condor\_schedd performance, job removal fsync for each job
* [BZ - 547295](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=547295)
  - qpid-stat -b threading exception during shutdown 'exceptions.TypeError: 'NoneType' object is not callable'
* [BZ - 547397](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=547397)
  - Compile with -O2
* [BZ - 547769](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=547769)
  - clustered qpidd: qpid-cluster/qpid-stat -b reports different widths on different nodes while replication is working well on all nodes
* [BZ - 548090](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=548090)
  - RESERVED\_SWAP doesn't default to 0 as stated in docs
* [BZ - 548137](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=548137)
  - TIMEOUT\_MULTIPLIER only available in <SUBSYS>\_ form
* [BZ - 548493](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=548493)
  - SASL support missing for Python messaging API
* [BZ - 549389](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=549389)
  - condor\_master -pidfile will stomp pidfile of running master
* [BZ - 549432](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=549432)
  - Parallel Universe jobs require job spool directory
* [BZ - 549443](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=549443)
  - qpid-config cannot create bindings for the XML or Headers exchange types
* [BZ - 549956](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=549956)
  - Clustered broker crashes with inconsistency error
* [BZ - 552330](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=552330)
  - qpid-config from trunk causes exception in broker
* [BZ - 552407](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=552407)
  - classad debug() function doesn't work with IfThenElse
* [BZ - 445749](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=445749)
  - [python client] kerberos based authentication
* [BZ - 452546](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=452546)
  - No way to determine if session/connection is established
* [BZ - 455318](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=455318)
  - A tx commit fails without a proper error message when a queue runs out of capacity
* [BZ - 456482](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=456482)
  - submit -spool and transfer\_executable = false
* [BZ - 458344](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=458344)
  - Messages are not released on rollback
* [BZ - 462461](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=462461)
  - Clustering broker fail-over must replicate federation links
* [BZ - 469919](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=469919)
  - qpidd init script over-rides user option settings.
* [BZ - 470080](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=470080)
  - Cluster integration with security.
* [BZ - 471054](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=471054)
  - focus linking of gsoap, X11 and pq into daemons and tools
* [BZ - 471286](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=471286)
  - Grid Statistics Job Activity Graphics doesn't update correctly
* [BZ - 471315](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=471315)
  - Grid, Parse error on Hold a job reason entry.
* [BZ - 471326](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=471326)
  - Grid: It appears that the default for jobs is to show up as held in the boxed graphic
* [BZ - 471632](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=471632)
  - Add support for SSL/RDMA URLs in cluster's know urls list
* [BZ - 479031](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=479031)
  - Cluster member can't be added while management session open
* [BZ - 479326](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=479326)
  - cluster broker crashes with race condition in DispatchHandle
* [BZ - 482944](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=482944)
  - Management messages can get staged - which breaks management
* [BZ - 483666](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=483666)
  - Dynamic Slots and STARTD\_JOB\_EXPRS, invalid attribute name
* [BZ - 483753](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=483753)
  - Add failover exchange support for the java client
* [BZ - 484048](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=484048)
  - qpidd+store flush() failed: jexception 0x0106 slock::slo ck() threw JERR\_\_PTHREAD: pthread failure. (pthread\_mutex\_lock failed: errno=22 (Invalid argument)) (MessageStoreImpl.cpp:1331)
* [BZ - 485091](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=485091)
  - "Unknown Publisher" when installing Windows grid client
* [BZ - 485429](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=485429)
  - qpidd stopped by critical Broker start-up failed: Cannot lock ... Resource temporarily unavailable
* [BZ - 486595](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=486595)
  - condor\_configuration\_node input validation
* [BZ - 486779](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=486779)
  - [RFE] configurable sesame publish rate (sesame publishing too often)
* [BZ - 487023](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=487023)
  - UID&FILESYSTEM\_DOMAIN mis-configuration causing unintended side-effects
* [BZ - 488942](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=488942)
  - c++ client aborts when session and connection not closed
* [BZ - 489315](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=489315)
  - perftest shutdown seems to be not clean 'Error in shutdown: Connection closed'
* [BZ - 489537](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=489537)
  - Cluster - Bogus(?) messages in log file when a new broker joins a cluster
* [BZ - 489540](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=489540)
  - Memory leak in SASL client code.
* [BZ - 490170](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=490170)
  - qpidd init script does not implement condrestart though the rpm has a script to call it
* [BZ - 490855](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=490855)
  - clustered qpidd segfaults in qpid::broker::Exchange::propagateFedOp
* [BZ - 491203](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=491203)
  - "Timed out waiting for daemon" if recovery from journal takes a long time
* [BZ - 491305](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=491305)
  - clustered qpidd - replicating non-acked messages is not made visible for managent tools qpid-tool/cumin
* [BZ - 491313](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=491313)
  - Subscribing sessions should be terminated with exception if the queue they are subscribed to is deleted
* [BZ - 492334](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=492334)
  - qpidd+store startup crash in mrg::msgstore::MessageStoreImpl::init()
* [BZ - 493710](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=493710)
  - condor\_configure\_node: delete not inverse of add
* [BZ - 494393](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=494393)
  - First two nodes join 'simultaneously'; no node can reach the 'ready' state.
* [BZ - 494399](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=494399)
  - Bindings from durable queues to the default exchange are not shown after restore
* [BZ - 494651](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=494651)
  - sesame README points to old apache SVN location
* [BZ - 495718](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=495718)
  - Python client needs to have failover for clustering
* [BZ - 497747](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=497747)
  - Feature: Protocol independent API for c++
* [BZ - 497748](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=497748)
  - Feature: Protocol independent API for python
* [BZ - 592861](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=592861)
  - Recovered messages larger than 65523 bytes result in framing violation
* [BZ - 597362](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=597362)
  - Sporadic failure of check-long in cluster\_tests.py test\_failover
* [BZ - 601828](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=601828)
  - QMF Agent returning STATUS\_USER returns error 7 to QMF Console
* [BZ - 603201](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=603201)
  - condor-7.4.3-0.17.el5 postuninstall uses invalid init script option
* [BZ - 603839](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=603839)
  - Concurrent tagging of message with trace id while message is delivered from another queue causes segfault
* [BZ - 605311](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=605311)
  - condor\_schedd double free on SOAP transaction timeout
* [BZ - 606824](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=606824)
  - Acquired but Not Accepted Messages Not Sent to Alterntate Exchange
* [BZ - 614993](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=614993)
  - Using Memory or RequestMemory in job requirements drops both default RequestMemory and Memory requirements
* [BZ - 615313](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=615313)
  - condor\_chirp fails when querying the value of a non-existing attribute
* [BZ - 615492](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=615492)
  - starter hooks, HOOK\_UPDATE\_JOB\_INFO and HOOK\_JOB\_EXIT not run as job owner
* [BZ - 615504](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=615504)
  - condor\_chirp relies on getenv("\_CONDOR\_SCRATCH\_DIR")
* [BZ - 615510](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=615510)
  - Job hooks environment does not contain \_CONDOR\_SCRATCH\_DIR and the like
* [BZ - 615633](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=615633)
  - condor\_chirp get\_job\_attr can return garbage
* [BZ - 617709](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=617709)
  - fix hfs accountant stats
* [BZ - 619552](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=619552)
  - negotiator hfs incorrect remaining and infinite loop
* [BZ - 621902](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=621902)
  - Permissions not set correctly on key pair file
* [BZ - 623684](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=623684)
  - condor\_userlog core dumps when unable to open log file r/o
* [BZ - 625205](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=625205)
  - shadows create a spool directory per job
* [BZ - 628034](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=628034)
  - negotiator core on quota\_dynamic =0
* [BZ - 628086](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=628086)
  - GROUP\_DYNAMIC\_MACH\_CONSTRAINT unused with HFS
* [BZ - 642373](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=642373)
  - CVE-2009-5005 qpid: crash on receipt of invalid AMQP data
* [BZ - 642377](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=642377)
  - CVE-2009-5006 qpid: crash when redeclaring the exchange with specified alternate\_exchange

## CVEs

* [CVE-2009-5006](https://www.redhat.com/security/data/cve/CVE-2009-5006.html)
* [CVE-2009-5005](https://www.redhat.com/security/data/cve/CVE-2009-5005.html)

## References

* <http://www.redhat.com/security/updates/classification/#moderate>
* <http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_MRG/1/html/Technical_Notes/index.html>

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from htcondor-wiki.cs.wisc.edu_fad01181_20250124_164001.html ===

[![HTCondor High Throughput Computing](https://research.cs.wisc.edu/htcondor/images/HTCondor_wiki_logo_small.png)](https://www.cs.wisc.edu/condor)

# Ticket #1001

[Not logged in](login?nxp=/index.cgi/tktview%3Ftn%3D1001 "Log in")

* [Browse](dir)
* [Help](wiki?p=CvstracTicket)
* [Home](index)
* [Login](login)
* [Reports](reportlist)
* [Search](search?t=1)
* [Timeline](timeline)
* [Wiki](wiki)

* [History](tkthistory?tn=1001)

## Ticket #1001: Default WANT\_SUSPEND policy goes UNDEFINED, startd EXCEPTs

> Activation timer showed up in 1998 (git show 3cef52db). The conditional setting of ATTR\_JOB\_START has been around since at least 2003 (see V6\_5-branch).
>
> See: <https://bugzilla.redhat.com/show_bug.cgi?id=540545>

| | [[Append remarks](tktappend?tn=1001)] | | --- | |
| --- | --- |

### Remarks:

> *2009-Nov-25 17:17:30 by tannenba:*
>
> So... bold proposal: all startd policy expressions must meta-equals True to be triggered. In other words, if any of the policy expressions evaluate to UNDEFINED it is the same as evaluating to False. Thoughts?
>
>
>
> ---
>
>
> *2009-Nov-30 08:55:38 by tstclair:*
>
> The code actually did the "right" thing, but it was rather difficult to diagnose. I believe this points to a more fundamental issue, leaving breadcrumbs in error handling. The original error was EXCEPT( "Can't find WANT\_SUSPEND in internal [ClassAd](wiki?p=ClassAd "Class Ad")" ), which gives a starting point, but developers have to whip out their sloothing hats and determine a direction.
>
> It may be beneficial to examine the EXCEPT sites and leave breadcrumbs (e.g. - "Hint: Check that your expression does not have an UNDEFINED variable.")
>
> maybe an EXCEPT\_TYPE(T, "Message")
> T appends debugging info based on type.
> Check a, then b, then c, if all else fails nuke this code.
>
> To be honest, I would use exceptions, or a tribool... but hey, that's me. ;-)
>
>
>
> ---
>
>
> *2009-Nov-30 09:36:52 by matt:*
>
> I would be for pulling the policy expressions into a central place where we can document and enforce consistency.

| | [[Append remarks](tktappend?tn=1001)] | | --- | |
| --- | --- |

### Properties:

> | Type: | **defect** |  | Last Change: | **2009-Dec-18 15:02** |
> | --- | --- | --- | --- | --- |
> | Status: | **resolved** |  | Created: | **2009-Nov-25 11:50** |
> | Fixed Version: | **v070402** |  | Broken Version: | **v070000** |
> | Priority: | **3** |  | Subsystem: | **Daemons** |
> | Assigned To: | **matt** |  | Derived From: |  |
> | Creator: | **matt** |  | Rust: |  |
> | Customer Group: | **other** |  | Visibility: | **public** |
> | Notify: | **matt@cs.wisc.edu,zmiller@cs.wisc.edu,tannenba@cs.wisc.edu** |  | Due Date: |  |

### Related Check-ins:

| 2022-Nov-28 14:25 |  | Check-in [[70706]](chngview?cn=70706): Merged [[70695]](chngview?cn=70695), Merge pull request [#1001](tktview?tn=1001 "Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs") from htcondor/V10\_2-HTCONDOR-1337-no-sort-by-qdate HTCONDOR-1337-no-sort-by-qdate Committer: [GitHub](wiki?p=GitHub "Git Hub") (By [GregThain](wiki?p=GregThain "Greg Thain") ) |
| --- | --- | --- |
| 2010-Nov-29 15:35 |  | Check-in [[25797]](chngview?cn=25797): more correctly document WANT\_SUSPEND behavior -- changed in 7.4.2 (gittrac [#1001](tktview?tn=1001 "Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs")) (By Karen Miller ) |
| 2010-Nov-29 15:05 |  | Check-in [[25795]](chngview?cn=25795): Revert "Documented meaning of UNDEFINED WANT\_SUSPEND. [#1001](tktview?tn=1001 "Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs")" This reverts commit ba7dae13e5d9103838cd5bcf5753410c03f83fda. (By Karen Miller ) |
| 2010-Nov-29 12:26 |  | Check-in [[25794]](chngview?cn=25794): Documented meaning of UNDEFINED WANT\_SUSPEND. [#1001](tktview?tn=1001 "Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs") (By Dan Bradley ) |
| 2009-Dec-18 14:55 |  | Check-in [[16728]](chngview?cn=16728): WANT\_SUSPEND that is UNDEFINED, either by being absent or evaluating to UNDEFINED, now means FALSE. It used to mean EXCEPT! ([#1001](tktview?tn=1001 "Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs")) (By Matthew Farrellee ) |
| 2009-Dec-18 14:50 |  | Check-in [[16727]](chngview?cn=16727): Protect [ActivationTimer](wiki?p=ActivationTimer "Activation Timer") from going to UNDEFINED ([#1001](tktview?tn=1001 "Default WANT_SUSPEND policy goes UNDEFINED, startd EXCEPTs")) (By Matthew Farrellee ) |

This work is supported by NSF under Cooperative Agreement OAC-2030508 as part of the  [PATh Project](https://path-cc.io/). Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the NSF. Site built using [CVSTrac](about).



=== Content from research.cs.wisc.edu_fffa93b5_20250124_163958.html ===
**This is an outdated version of the HTCondor Manual.** You can find current documentation at [**http://htcondor.org/manual**](http://htcondor.org/manual).

[![next](next.png)](9_Command_Reference.html)
[![up](up.png)](8_Version_History.html)
[![previous](prev.png)](8_4Development_Release.html)
[![contents](contents.png)](Contents.html)
[![index](index.png)](Index.html)

 **Next:** [9. Command Reference Manual](9_Command_Reference.html)
 **Up:** [8. Version History and](8_Version_History.html)
 **Previous:** [8.4 Development Release Series](8_4Development_Release.html)
   **[Contents](Contents.html)**
   **[Index](Index.html)**

**Subsections**

* [Version 7.4.5](8_5Stable_Release.html#SECTION00951000000000000000)* [Version 7.4.4](8_5Stable_Release.html#SECTION00952000000000000000)* [Version 7.4.3](8_5Stable_Release.html#SECTION00953000000000000000)* [Version 7.4.2](8_5Stable_Release.html#SECTION00954000000000000000)* [Version 7.4.1](8_5Stable_Release.html#SECTION00955000000000000000)* [Version 7.4.0](8_5Stable_Release.html#SECTION00956000000000000000)

---

# 8.5 Stable Release Series 7.4

This is a stable release series of Condor.
As usual, only bug fixes (and potentially, ports to new platforms)
will be provided in future 7.4.x releases.
New features will be added in the 7.5.x development series.

The details of each version are described below.

## Version 7.4.5

Release Notes:

* Condor version 7.4.5 not yet released.

New Features:

* *condor\_dagman* now prints a message in the dagman.out file
  whenever it truncates a node job user log file.
* *condor\_dagman* now prints additional diagnostic information in the
  case of certain log file errors.

Configuration Variable and ClassAd Attribute Additions and Changes:

* None.

Bugs Fixed:

* A network disconnect between the submit machine and execute
  machine during the transfer of output files caused the
  *condor\_starter* daemon to immediately give up, rather than waiting
  for the *condor\_shadow* to reconnect. This problem was introduced
  in Condor version 7.4.4.
* If *condor\_ssh\_to\_job* attempted to connect to a job while the
  job's input files were being transferred, this caused the file
  transfer to fail, which resulted in the job returning to the idle
  state in the queue.
* In privsep mode, the transfer of output failed if a job's execute
  directory contained symbolic links to non-existent paths.

Known Bugs:

* None.

Additions and Changes to the Manual:

* None.

## Version 7.4.4

Release Notes:

* Condor version 7.4.4 released on October 18, 2010.
* *Security Item*:
  This release fixes a bug in which Amazon EC2 jobs
  (jobs with **universe = grid** and **grid\_resource = amazon**)
  that use the **amazon\_keypair\_file**
  command may expose the private SSH key to other users.
  The created file had insecure permissions,
  allowing other users on the submit host to read the file.
  Any other user who could see the file could learn about these EC2 jobs
  using *condor\_q*,
  and the other user could then connect to them with the private SSH key.

  To work around the bug without installing this release,
  do one or both of the following:
  + Do not use the submit description file command
    **amazon\_keypair\_file**.
  + Ensure that the directory holding the private SSH key
    has suitably restrictive permissions,
    such that other users cannot read files inside the directory.
* Condor can now be built on Mac OS X 10.6.
* The *condor\_master* shutdown program, which is configured via
  the MASTER\_SHUTDOWN\_![$<$](img8.png)Name![$>$](img9.png)   configuration variable,
  is now run with root (Unix) or administrator (Windows) privileges.
  The adminstrator must ensure
  that this cannot be used in such a way as to violate system integrity.

New Features:

* **load\_profile** is now supported by the Unix version of
  *condor\_submit* when submitting jobs to Windows. Previously, this command
  was only supported by the Windows version of *condor\_submit*.
* Added an example Mac OS X launchd configuration file for starting Condor.

Configuration Variable and ClassAd Attribute Additions and Changes:

* None.

Bugs Fixed:

* Fixed bad behavior in *condor\_quill* where, under certain error
  conditions, many copies of the schedd\_sql.log file would be
  inserted into the database, filling up the disk volume used by the
  database. As a consequence of this bug fix, the `LogBody` column
  for each row in the `Error_SqlLogs` table will be empty. Please
  consult the *condor\_quill* daemon log file for the error instead.
* Fixed a bug with how the **standard** universe
  remote system call getrlimit() functioned.
  Under certain conditions with
  32-bit and 64-bit **standard** universe binaries,
  getrlimit() would erroneously report 2147483647 bytes as a limit,
  when RLIM\_INFINITY should have been the correct response.
* Fixed a misleading error message issued by *condor\_run*,
  which stated
  ```

  The DAGMan job was aborted by the user.

  ```
  when the job submitted by *condor\_run* was aborted by the user.
  It now states
  ```

  The job was aborted by the user.

  ```
* When the *condor\_startd* daemon is running with an execute directory on
  a very large file system, with more than 32 bits worth of free blocks
  on a 32-bit system, it would incorrectly report 0 free bytes. This
  has been fixed.
* For spooled jobs, input files were sometimes transferred twice from
  the submit machine to the execute machine. This happened if the input files
  were specified without any path information,
  as with a file name with no directory specified.
  This problem has existed since before Condor version 7.0.0.
* The configuration variable NETWORK\_INTERFACE did not
  work in some situations, because of Condor's attempts to
  automatically rewrite published addresses to match the IP address of
  the network interface used to make the publication.
* Fixed a bug in which the default unit of configuration variable
  STARTD\_CRON\_TEST\_PERIOD
  should have been seconds, but instead was Undefined.
* Fixed a bug in which *condor\_submit* checked for bad *condor\_schedd* cron
  arguments incorrectly within a submit description file.
  Now *condor\_submit* will detect the problem and print out an error message.
* With some versions of *ssh*, *condor\_ssh\_to\_job* failed if
  the SHELL environment variable was set to */bin/csh*.
* Submission of **vm** universe jobs via Globus was not possible,
  because the Globus Condor jobmanager explicitly set the input, output,
  and error files to /dev/null,
  and *condor\_submit* refused any setting of these files for
  **vm** universe jobs.
  Now, /dev/null is an allowed setting for the input, output,
  and error files for **vm** universe jobs.
* Fixed a bug that caused a **vm** universe job's output files
  to be incorrectly transferred back to the submit machine,
  when the submit description file command **vm\_no\_output\_vm**
  was set to false,
  indicating that no files should be transferred.
* String literals within `$$([])` expressions within a submit
  description file failed to be evaluated and resulted in the job going on hold.
  This problem has existed since before Condor 7.0.0.
* *condor\_preen* was not able to clean up files in the EXECUTE
  directory when in privsep mode.
* A problem was fixed that could cause a Condor daemon that
  connects to other daemons via CCB to permanently run out of space
  for more registered sockets until restarted. This problem appeared
  in the logs as the following message:

  ```

  file descriptor safety level exceeded

  ```
* Fixed a problem that could cause the *condor\_collector* to crash
  when receiving updated matchmaking information for offline ClassAds that do
  not exist.
* *condor\_ssh\_to\_job* did not work when
  SEC\_DEFAULT\_NEGOTIATION was set to OPTIONAL.
* The **vm** universe now works properly on machines that
  have Condor's Privilege Separation mechanism enabled.
* *condor\_submit* no longer pads a **vm** universe job's disk usage
  estimation by 100MB.
* Fixed a bug with the vm\_cdrom\_files   submit file
  command, that caused VMware **vm** universe jobs to fail if the virtual
  machine already had a CD-ROM image associated with it.
* Configuration variables SOAP\_SSL\_CA\_DIR   and
  SOAP\_SSL\_CA\_FILE   are now properly used when authenticating
  with Amazon EC2 servers.
* Fix a bug with the <subsys>\_LOCK   configuration variable.
  It could let daemons writing to the same daemon log overwrite each other's
  entries and cause daemons to exit when the log is rotated.
* Fixed a bug that caused nordugrid jobs to fail if the
  **grid\_resource** attribute included a port as part of the server
  host name.
* Fixed a confusing error message mentioning
  `LocalUserLog::logStarterError()` when the *condor\_starter* fails to
  communicate with the *condor\_shadow* before the job has started.
* Fixed the event log and shadow log for standard universe jobs to
  identify the checkpoint server on which a job might have failed to store
  its checkpoint or from which it might have failed to restore its checkpoint.
* Fixed a bug in the *condor\_gridmanager* that could cause it to crash
  while handling grid-type cream jobs.
* Improved the *condor\_gridmanager*'s handling of grid-type cream jobs
  that are held or removed by the user. Canceling the cream job is much less
  likely to fail and jobs can no longer get stuck in the cream state of
  CANCELED.
* Fixed the web server feature controlled by ENABLE\_WEB\_SERVER  .
  Previously, all HTTP GET requests would fail on non-linux Unix machines.

Known Bugs:

* None.

Additions and Changes to the Manual:

* The Windows platform installation instructions have been updated.
* Section [2.5.4](2_5Submitting_Job.html#sec:file-transfer) on Condor's File Transfer Mechanism
  has been revised and updated.
* Section [![[*]](crossref.png)](#classad-query-examples), providing examples of utilizing
  ClassAd expressions within the **-constraint** option of *condor\_q*
  or *condor\_status* commands has been expanded to clarify both
  Unix and Windows platform specifics.

## Version 7.4.3

Release Notes:

* Condor version 7.4.3 released on August 16, 2010.

New Features:

* None.

Configuration Variable and ClassAd Attribute Additions and Changes:

* The new configuration variable ENABLE\_CHIRP
  defaults to True.
  An administrator may set it to False, which
  disables Chirp remote file access from execute machines.
* The new configuration variable
  ENABLE\_ADDRESS\_REWRITING   defaults to True. It may
  be set to False to disable Condor's dynamic algorithm for choosing
  which IP address to publish in multi-homed environments. The dynamic
  algorithm chooses the IP address associated with the network interface
  used to make the publication, for example, the network interface used
  to communicate with the *condor\_collector*.
* Configuration variable VM\_BRIDGE\_SCRIPT   has been removed
  and is no longer valid.
* The new configuration variable
  VM\_NETWORKING\_BRIDGE\_INTERFACE   specifies the networking interface
  that Xen or KVM **vm** universe jobs will use.
  See section [3.3.29](3_3Configuration.html#param:VMNetworkingBridgeInterface) for documentation.
* Allowed the configuration file entries GSI\_DAEMON\_TRUSTED\_CA\_DIR
  and GSI\_DAEMON\_DIRECTORY to be set with environment variables,
  as the rest of Condor configuration variables can be.

Bugs Fixed:

* When using file transfer semantics,
  if the job exited in such a manner so as to not produce all
  output files specified in **transfer\_output\_files**,
  then which files were transferred was potentially incorrect.
  Now, all existing files are transferred back,
  and the files which are not able to be transferred back due to non-existence
  appear as zero length files.
  An example of when this occurred would be the job dumping core
  and then being placed on hold.
* Fetch work hooks to prepare are now invoked as the condor user,
  instead of as the job user.
* Improved the file extension detection on Windows platforms.
* *condor\_wait* could occasionally get stuck in an infinite loop,
  if it missed the execution event of the job it is waiting for.
  This is now fixed.
* Fixed a bug within the *condor\_startd* cron capabilities,
  that only occurred on Windows platforms.
  *condor\_startd* cron scripts failed to run if an initial directory was left
  unspecified.
* Fixed a bug in which a job would be incorrectly placed on hold, with
  a confusing error message that appeared similar to
  ```

  Condor failed to start your job 9090.-1 because job attribute Args contains $$(VirtualMachineID).

  ```
  This occurred if the submit command **copy\_to\_spool**
  was true,
  the submit description file for the job contained $$ macros,
  and *condor\_preen* ran after the job was submitted and before it started.
* Added the jobs\_vertical\_history table to the list of tables that
  *condor\_quill* periodically re-indexes.
* Fixed bug in *condor\_preen* in which it would delete *condor\_startd* daemon
  history files.
* Fixed a bug where if a user job using file transfer with
  **transfer\_output\_files** and **when\_to\_transfer\_output**
  is set to ON\_EXIT\_OR\_EVICT fails
  to produce all of the specified files and exit, as when core
  dumping due to a fault, then the stdout, stderr, and core file of the
  job were not transferred back to the submitting machine.
* Fixed numerous, small, rare memory leaks.
* Fixed a bug in which processor affinity settings were ignored if
  privilege separation was enabled.
* Network connections for Condor file transfers were ignoring
  private network settings. The connection from the execute node to
  the submit node always attempted to use the public network address
  of the submit machine.
* The configuration variable TCP\_FORWARDING\_HOST did not work
  in some situations
  because of Condor's attempts to automatically rewrite published addresses to
  match the IP address of the network interface used to make the publication.
* A single job could match multiple offline slots in a single
  negotiation cycle. This problem could cause *condor\_rooster* to
  wake up too many offline machines for the number of jobs available
  to run on them. The fix for this problem requires updating both
  the *condor\_negotiator* and the *condor\_schedd*.
* Fixed a problem that caused the *condor\_startd* daemon to
  crash in some cases when STARTD\_SENDS\_ALIVES was True.
  This setting is False by default.
* Fixed a problem where the *condor\_kbdd* has a chance of
  entering an infinite loop on platforms that use X-Windows.
  Microsoft Windows and Mac OS X platforms were not affected. This bug is
  present in all earlier 7.4.x Condor releases.
* The default path to *sftp-server* has been improved,
  so that *condor\_ssh\_to\_job* can use *sftp* out-of-the-box on
  RedHat Enterprise Linux 5 platforms.
* A *nordugrid\_gahp* binary built on RedHat Enterprise Linux 3
  no longer crashes
  when run on a RedHat Enterprise Linux 4 or Scientific Linux 4 machine.
* Fixed a bug in *condor\_rm* that caused it to misinterpret user names
  that begin with a digit, such as 4abc.
  It incorrectly used them as cluster numbers.
* Fixed a bug that caused the *condor\_startd* to invoke the
  ``power\_state'' plug-in as the condor user. This caused
  hibernation to fail because power\_state requires root privileges
  to function properly.
* Fixed a bug that could cause the *condor\_schedd* to crash if there
  were any idle scheduler universe jobs when files were staged into the
  *condor\_schedd* for a new job.
* Fixed a bug in the *nordugrid\_gahp* that could cause it to exit
  when connecting to a misconfigured LDAP server.
* Fixed a bug that prevented the log file defined with the configuration
  variable NEGOTIATOR\_MATCH\_LOG   from rotating.
  See section [3.3.4](3_3Configuration.html#param:SubsysLevelLog) for the definition of this variable.
* Fixed a bug that caused *startd\_cron* jobs to fail on Windows.
  This bug is present in all earlier 7.4.x Condor releases.
* The submit description file command **vm\_cdrom\_files**
  now works properly with Windows execute machines.
  Previously, creation of the ISO file would fail,
  causing job execution to be aborted.
* Fixed a bug that caused the *condor\_startd* to invoke the
  *power\_state* plug-in as the condor user.
  This caused hibernation to fail,
  because *power\_state* requires root privileges to function properly.

Known Bugs:

* None.

Additions and Changes to the Manual:

* Searching the PDF version of the manual for items containing
  underscore characters, such as many configuration variable names,
  now works correctly.
* The new subsection [4.1.3](4_1Condor_s_ClassAd.html#ClassAd:examples) provides examples of
  evaluation results when using the operators ==, =?=,
  !=, and =!=.
* Section [2.11](2_11Virtual_Machine.html#sec:vmuniverse) with specifics on **vm**
  universe jobs has been updated to contain more details about
  both checkpoints and **vm** universe jobs in general.

## Version 7.4.2

Release Notes:

* Condor version 7.4.2 released on April 6, 2010.

New Features:

* None.

Configuration Variable and ClassAd Attribute Additions and Changes:

* When WANT\_SUSPEND is defined and evaluates to anything
  other than the value True,
  it is now utilized as if it were False.
  If WANT\_SUSPEND is not explicitly defined,
  the *condor\_startd* exits with an error message.
  Previously, if Undefined, it was treated as an error,
  which caused the *condor\_startd* to exit with an error message.

Bugs Fixed:

* Fixed a bug in which the *condor\_schedd* would sometimes negotiate
  for and try to run
  more jobs than specified by MAX\_RUNNING\_JOBS. Once the
  jobs started running, it would then kill them off to get back below
  the limit. This was more likely to happen with slow preemption
  caused by MaxJobRetirementTime or by a large timeout
  imposed by KILL. This problem has existed since before
  Condor 6.5. When this problem happened, the following message
  appeared in the *condor\_schedd* log:

  ```

  Preempting X jobs due to MAX_JOBS_RUNNING change

  ```
* Fixed a problem that caused *condor\_ssh\_to\_job* to fail to connect
  to a job running on a slot with multiple '@' signs in its name. This bug
  has existed since the introduction of *condor\_ssh\_to\_job* in 7.3.2.
* In all previous versions of Condor, *condor\_status* refused to
  accept **-long**, **-xml**, and **-format** when followed by
  an argument such as **-master** that specified which type of
  daemon to look at. The order of the arguments had to be reversed or
  it would produce a message such as the following:

  ```

  Error:  arg 4 (-master) contradicts arg 1 (-format)

  ```
* Fixed a bug which caused the *condor\_master* to crash if
  VIEW\_SERVER was included in DAEMON\_LIST and
  CONDOR\_VIEW\_HOST was unset.
* Fixed a bug that caused configuration parameter
  LOCAL\_CONFIG\_DIR to be ignored if it was set in a local
  configuration file, as opposed to the top-level configuration file.
* Fixed a bug that could cause the *condor\_schedd* to behave
  incorrectly when reading an invalid job queue log on startup.
* Fixed a bug that could corrupt the job queue log
  if the *condor\_schedd* daemon's attempt to compact it fails.
* Fixed a problem that in rare cases caused the *condor\_schedd* to
  crash shortly after the *condor\_gridmanager* exited.
  This bug has existed since before Condor version 6.8.
* Fixed a problem that was resulting in messages such as the following:

  ```

  ERROR: receiving new UDP message but found a long message still waiting
  to be closed (consumed=0). Closing it now.

  ```
* The file extension specified to *condor\_fetch\_log* can no longer
  contain a path delimiter.
* When in graceful shutdown mode, the *condor\_schedd* was
  sometimes starting idle scheduler universe jobs. With a large
  enough number of scheduler universe jobs, this could lead to a cycle
  of stopping and restarting jobs until the graceful shutdown time
  expired.
* Fixed multiple bugs that prevented Condor from building on or
  running correctly on OpenSolaris X86/64 version 2009.06.
* Fixed a bug which caused the *condor\_startd* to incorrectly
  count the number of processors on some machines with
  Hyper-threading enabled. This bug was introduced in
  Condor version 7.3.2, and exists in 7.4.0 and 7.4.1.
* Fixed a problem with GSI authentication in Condor that would cause
  daemons to consume more and more memory over time. The biggest source
  of trouble was introduced in Condor version 7.3.2.
  However, a smaller memory leak that
  existed in all previous versions of Condor has also been fixed.
* Fixed a bug where if *condor\_compile* is invoked in a manner such as:
  ```

    condor_compile gcc -print-prog-name=ld

  ```
  an error would be emitted,
  and *condor\_compile* would exit with a bad exit code.
* The sort based on *condor\_status* output accidentally changed in
  Condor version 7.3,
  so that the output was based on the slot name first, then machine name.
  The behavior is now restored to the original sorting: first on machine name,
  then slot name.
* If one machine running a parallel job crashed,
  and job leases are enabled (which they are by default),
  the job would not exit until the job lease duration expired.
  As the *condor\_starter* will not get respawned,
  there is no need to wait.
  Many sites set long job lease durations,
  to prevent jobs from being killed when the machine running
  the *condor\_schedd* daemon reboots.
  Now, if one node goes away, the whole computation is shut down immediately.
* Fixed the verbosity level of some *condor\_dagman* messages written to
  the dagman.out file.
* Fixed a bug introduced in Condor version 7.3.2 that resulted in
  messages such as the following even in cases where no problem in
  communicating with the *condor\_collector* had been encountered:

  ```

  Collector <X> is still being avoided if an alternative succeeds.

  ```

  This problem was believed to be fixed in Condor 7.4.1, but some cases
  of the problem remained in that version.
* Fixed a bug from Condor version 6.1.14,
  that resulted in the *condor\_schedd* performing
  the operation scheduled via WALL\_CLOCK\_CKPT\_INTERVAL at the
  specified frequency (default time of 1 hour),
  multiplied by the number of times the
  *condor\_schedd* daemon had been reconfigured during its lifetime.
  This could lead to degraded performance,
  especially prior to Condor version 7.4.1,
  when this operation was more disk-intensive.
* 32-bit Linux versions of Condor running in a 64-bit environment would
  sometimes not detect the existence of some processes and sometimes
  wrongly detect that a tracked process belonged to root when it
  actually belonged to some other user. This could lead to failure to run
  jobs or failure to properly monitor and clean up after them. When the wrong
  process ownership problem happened,
  the following message appeared in the *condor\_master* and/or *condor\_procd*
  logs:

  ```

  ProcAPI: fstat failed in /proc! (errno=75)

  ```

  If *condor\_procd* failed to detect the existence of its own parent process,
  it would exit with the following message in its log:

  ```

  ERROR: master has exited

  ```
* Fixed a problem in the *condor\_job\_router* daemon,
  introduced in Condor version 7.2.2,
  that could cause the daemon to crash when failing to carry out the change
  of state dictated by a job's periodic policy expressions,
  for example, the failure to put a job on hold when periodic\_hold
  becomes True.
* Fixed a bug introduced in Condor 7.3.2 that caused Grid Monitor
  jobs to receive a full X.509 proxy. Now, it always receives a limited
  proxy, which was the previous behavior.
* Fixed a bug that could cause the nordugrid\_gahp to crash.
* Fixed a problem introduced in 7.4.0 that could cause two
  *condor\_schedd* daemons
  with a match to the same slot to both fail to claim it, rather than
  letting the first one to claim it succeed. This sort of situation
  can happen when the *condor\_negotiator* has a stale view of the pool,
  either because the gap between negotiation cycles is configured to
  be shorter than usual, or because updates from the *condor\_startd*
  to the *condor\_collector*
  are not reliably delivered and processed.
* The *condor\_kbdd* is no longer ignored by the *condor\_startd*
  when the configuration variable CONSOLE\_DEVICES   is defined.
* When using the **-d** command line argument with a daemon,
  the values of LOG, SPOOL, and EXECUTE
  no longer change every time a *condor\_reconfig* command is received.

Known Bugs:

* The *condor\_kbdd* has a chance of entering an infinite loop
  on platforms that use X-Windows. Microsoft Windows and Mac OS X
  are not affected. Removing KBDD from DAEMON\_LIST is a
  workaround, although this impairs Condor's ability to detect
  console usage. This bug is fixed in Condor version 7.4.3.

Additions and Changes to the Manual:

* Descriptions of all the commands that may be placed into a
  submit description file are now located within the *condor\_submit*
  manual page, instead of within Chapter 2, the Users' Manual.
* An initial, but not yet complete set of configuration variables
  that require a restart when changed,
  is listed in section [3.3.1](3_3Configuration.html#sec:Macros-Requiring-Restart).
  Using *condor\_reconfig* to change these variables' values is not sufficient.

## Version 7.4.1

Release Notes:

* *Security Item*: A flaw was found that could allow a user who already is authorized to
  submit jobs into Condor, to queue a job under the guise of a different
  user. In this way, someone who has access to a Condor submission
  service and is allowed to submit jobs into Condor could gain access to
  another non-root or non-administrator account on the system.
  This flaw was discovered during the development process; no incidents
  have been reported. Details of the problem will be made available on Feb 1st,
  2010.
* The default value of JOB\_ROUTER\_NAME has changed
  from an empty string to `jobrouter` in order to address
  problems caused by the previous default. Without special handling,
  this means that jobs being managed by *condor\_job\_router* before
  upgrading will not be adopted by the new version of
  *condor\_job\_router* if the default JOB\_ROUTER\_NAME was
  being used. To correct this, follow the instructions given in the
  description of JOB\_ROUTER\_NAME on
  page [![[*]](crossref.png)](3_3Configuration.html#JobRouterName).

New Features:

* Condor allows submit files to specify an **IwdFlushNFSCache**
  expression,
  to control whether or not Condor tries to flush the NFS cache for
  a job's initial working directory on job completion.
* The new **-attributes** option to *condor\_status*
  explicitly specifies the attributes to be listed when using the
  **-xml** or **-long** options.

Configuration Variable and ClassAd Attribute Additions and Changes:

* New VOMS attributes have been introduced into the job ad to keep them
  separate from the X509UserProxySubjectName.
* The default for JOB\_ROUTER\_NAME has changed from an
  empty string to `jobrouter`. See the release notes for more
  information about upgrading from an old version.
* The configuration variable TCP\_FORWARDING\_HOST
  has existed in Condor since version 7.0.0, but was not documented.
  See section [3.3.6](3_3Configuration.html#param:TcpForwardingHost) for documentation.
* The new configuration variable STARTD\_PER\_JOB\_HISTORY\_DIR
  allows ClassAds of completed jobs to be stored in a directory separate
  from the existing one specified with PER\_JOB\_HISTORY\_DIR.

Bugs Fixed:

* Condor no longer creates the job sandbox in its SPOOL
  directory if it is not needed.
* Fixed a problem introduced in Condor version 7.4.0 that caused GSI
  authentication between Condor processes to fail with using a
  non-legacy format X.509 proxy.
* Fixed a problem with CCB under Windows platforms that has existed since
  Condor version 7.3.0.
  This problem caused CCB-enabled daemons to become unresponsive
  after the exit of a child process.
* Improved the handling of previously-submitted gt2 grid jobs upon
  release from hold, when there is no Globus job manager for the job running
  on the remote resource.
* Fixed a problem with job leases for jobs that use a *condor\_shadow*.
  Previously, while these jobs were running, lease renewals from the
  submitter would not be
  noticed, and the job would be aborted when the original lease expired.
* Fixed a bug that only allowed approximately 50 splices to be included into
  a DAG input file. There is now no limit to the number of splices
  one may include into a DAG input file except, of course, for the
  implicit memory allocation limit of the *condor\_dagman* process.
* Removed attempted limiting of swap space via *ulimit -v* using the
  VirtualMemory machine ClassAd attribute in the script
  condor\_limits\_wrapper.sh.
* Fixed a bug that caused ALLOW\_CONFIG and
  HOSTALLOW\_CONFIG, as well as the corresponding
  DENY configuration variables to incorrectly handle a
  setting consisting of a single \* or the equivalent \*/\*. This
  also fixes a bug that caused incorrect merging of ALLOW
  and HOSTALLOW settings when one, but not both, consisted of
  a single \* or the equivalent \*/\*.
  These bugs have existed since before Condor version 6.8.
* Fixed a bug introduced in Condor version 7.3.0 that could cause
  Condor daemons to crash when reading malformed network addresses.
* Removed a check for root ownership of a script specified by
  the configuration variable VM\_SCRIPT.
* Fixed a bug in writing the header of the file identified by
  the configuration variable EVENT\_LOG.
* Fixed a bug that could cause the *condor\_startd* to segfault on shutdown
  when using dynamic slots.
* Fixed a problem introduced in Condor version 7.3.2 that changed
  the behavior of
  an undocumented method for selecting attributes to be displayed in
  *condor\_q* **-xml**. Prior to this bug, the following command
  would produce XML output with the attributes A and B,
  plus a few other attributes that were always shown.

  ```

  condor_q -xml -format "%s" A+B

  ```

  In Condor versions 7.3.2 and 7.4.0,
  this same command produced an empty XML ClassAd.
  The workaround was to use multiple **-format** options, each listing
  just one desired attribute, rather than a single one with an
  expression of all desired attributes. Although this is now fixed, the
  more straightforward way to select attributes since Condor version 7.3.2
  is to use the **-attributes** option.
* Fixed a bug introduced in Condor version 7.3.2 that resulted in
  messages such
  as the following even in cases where no problem in communicating
  with the *condor\_collector* had been encountered:

  ```

  Collector <X> is still being avoided if an alternative succeeds.

  ```
* Fixed a bug that has been in the *condor\_startd* since before
  Condor version 6.8. If the *condor\_startd* ever failed to send signals to the
  *condor\_starter* process, it could fail to properly clean up the
  machine ClassAd, leaving attributes from
  STARTD\_JOB\_EXPRS in the ClassAd but not making them visible
  in *condor\_status* queries. One possible problem resulting from
  this could be matches being made by the *condor\_negotiator* that are then
  rejected by the *condor\_startd*. Repeated messages such as the following
  would then result in the *condor\_startd* log:

  ```

  slot1: Request to claim resource refused.

  ```
* Fixed a problem that resulted in the following message in the
  *condor\_startd* log:

  ```

  Timer -1 not found

  ```
* Fixed a problem in which security sessions were not cached
  correctly when using CCB. This resulted in re-authentication in
  some cases where a cached security session could have been used.
* Fixed multiple problems with the handling of VOMS attributes in GSI
  proxies.
* Fixed a bug that caused *condor\_dagman* to hang when running a
  DAG with POST scripts, if the global event log is turned on.
* Improved how the private network address is published when using
  the configuration variables PRIVATE\_NETWORK\_NAME and
  PRIVATE\_NETWORK\_INTERFACE. In some cases, this
  information was not being used, and therefore connections were made
  to the public address when they could have been made to the private
  address.
* Fixed a bug exhibited under Windows XP,
  where using USE\_VISIBLE\_DESKTOP
  would cause strange behavior after a job completed.
* CCB now works with TCP\_FORWARDING\_HOST. Previously,
  the reverse connection was made to the private address rather than
  to the host defined by TCP\_FORWARDING\_HOST.
* Removed a bad optimization that caused some information about job
  execution to be lost during job completion or removal,
  if a history file was not configured.
* Condor now checks whether the configuration variable
  GRIDFTP\_URL\_BASE is set before
  submitting cream grid jobs, as that variable is required for cream jobs
  to function properly. If the variable is not set, cream jobs are put on
  hold with an appropriate message.
* Fixed a bug that allowed running virtual machines to be leaked
  if the *condor\_startd* crashed.
* Fixed a bug in *cream\_gahp* which could cause crashes when
  there were more than 500 cream jobs queued.
* Improved recovery when Condor crashes during the submission of a cream
  grid job. Before, affected jobs would remain in REGISTERED state
  on the cream server, but never run.
* Improved the HoldReason message when cream grid jobs are
  held by the *condor\_gridmanager*.
* When naming a resource for a cream grid job, Condor now properly
  recognizes the format used by the standard cream client UI:
  https://foo.edu:8443/cream-pbs-cream\_queue.
* The configuration variable SOAP\_SSL\_CA\_FILE is now
  consulted in addition to
  SOAP\_SSL\_CA\_DIR when authenticating
  an https proxy for Amazon EC2, when AMAZON\_HTTP\_PROXY is defined.
* Previously, if *condor\_rm* and friends were given both a constraint
  and a user name or cluster id, they would act on all jobs matching the
  constraint and all jobs associated with the user or cluster. Now, this
  combination of arguments results in an error.
* Failure to purge a cream grid universe job from the remote server
  because it was previously purged no longer results in the job being held.
* The *condor\_gridmanager* now recognizes VOMS attributes in X.509
  proxies and will handle them appropriately. For example, it recognizes
  that two proxies with the same identity but different VOMS attributes may
  be mapped to different accounts on a remote machine.
* Fixed a bug in *condor\_dagman*, introduced in 7.3.2, that will
  cause *condor\_dagman* running on Windows to hang on any DAG using
  more than one log file for the node jobs.
* Fixed a bug in *condor\_dagman*, introduced in 7.3.2, that could
  cause *condor\_dagman* to fail on a DAG using node job log files on
  multiple devices, if log files on different devices happened to have
  the same inode number.
* Fixed a bug that caused the *condor\_schedd* daemon to segfault when
  spooling more than 9 files.
* Fixed a bug that caused the *condor\_startd* daemon to crash on
  Debian Stable.
* Fixed keyboard activity detection on the Windows XP platform.
* Fixed a bug in the *condor\_had* daemon that caused it to not start
  the controlled daemon if CCB was enabled.

Known Bugs:

* The *condor\_kbdd* has a chance of entering an infinite loop
  on platforms that use X-Windows. Microsoft Windows and Mac OS X
  are not affected. Removing KBDD from DAEMON\_LIST is a
  workaround, although this impairs Condor's ability to detect
  console usage. This bug is fixed in Condor version 7.4.3.
* *condor\_dagman* may fail on Windows if the set of node job log
  file names includes multiple paths that are hard links (not symbolic links)
  to the same file.
* *condor\_dagman* PRE and POST script arguments (and the names of
  the scripts themselves) cannot contain spaces.
* *condor\_dagman* VARS values cannot contain single quotes.

Additions and Changes to the Manual:

* Added documentation about how to include spaces (and other
  special characters) in *condor\_dagman* VARS values.

## Version 7.4.0

Release Notes:

* The default configuration file within the release now uses
  ALLOW/DENY in place of
  HOSTALLOW/HOSTDENY for security related settings.
  We recommend making this
  same change throughout all configuration files. That way,
  a policy that depends on the default policy should continue to
  work as it did before. The behavior of these configuration variables
  remains unchanged. The ALLOW/DENY lists are
  added to the HOSTALLOW/HOSTDENY lists to form the
  authorization policy. Both styles support the same syntax.
  This change permits an anticipated
  phasing out of the HOSTALLOW/HOSTDENY configuration
  variables, in order to simplify configuration.
* As of Condor version 7.3.2, *condor\_q* **-xml** output no longer
  begins with the non-XML consisting of two blank lines followed by a line
  of the following form:

  ```

  -- Submitter: schedd-name : <IP> : hostname

  ```
* All *Stork* data placement is now supported by the Stork
  project at the
  LSU Center for Computation and Technology
  (<http://www.cct.lsu.edu/www.cct.lsu.edu>).
  Please see the home page of the Stork project at
  <http://www.cct.lsu.edu/~kosar/stork/index.php>
  for details and
  software.

New Features:

* Condor is now integrated with the Hadoop Distributed File System (HDFS).
  See documentation in section [3.13.2](3_13Setting_Up.html#sec:Condor-HDFS) and
  section [3.3.23](3_3Configuration.html#sec:HDFS-Config-File-Entries).
* *condor\_q* using the options **-analyze** and **-better-analyze**
  now provide analysis for scheduler and local universe jobs.
  Specifically, the START\_SCHEDULER\_UNIVERSE and
  START\_LOCAL\_UNIVERSE expressions are checked.
* Added the ClassAd attributes
  TotalLocalRunningJobs, TotalLocalIdleJobs,
  TotalSchedulerRunningJobs, and TotalSchedulerIdleJobs
  to the published ClassAd for the *condor\_schedd*. This means that
  *condor\_q* **-analyze** can still give helpful information about
  why local or scheduler universe jobs are idle when
  the configuration variables START\_LOCAL\_UNIVERSE or
  START\_SCHEDULER\_UNIVERSE refer to these attributes.
  These attributes were already present internally within
  the *condor\_schedd* daemon,
  just not published.
* The *condor\_vm-gahp* now supports KVM and links with libvirt, rather
  than calling virsh command-line tools.
* Greatly improved the *condor\_gridmanager*'s scalability when handling
  many grid type gt2 grid universe jobs. Improvements include more quickly
  processing updated X.509 certificates, not checking jobs for status updates if
  they have not been submitted to the remote site, and eliminating unnecessary
  updates to the *condor\_schedd* daemon.
* Latency in the submission and cleaning up of Condor-C jobs
  has been improved by changing the default value of
  C\_GAHP\_CONTACT\_SCHEDD\_DELAY   from 20 to 5.
* The eval() ClassAd function added in Condor version 7.3.2
  is now also understood by the *condor\_job\_router* and
  *condor\_q* using the **-better-analyze** option.
* The submit command **run\_as\_owner** is now supported
  for Unix platforms. Previously, it was only supported on Windows platforms.
* When setting AMAZON\_HTTP\_PROXY, a username and password
  can now be given as part of the proxy URL.
  The value of SOAP\_SSL\_CA\_DIR is now consulted when authenticating
  an https proxy for Amazon EC2, when AMAZON\_HTTP\_PROXY is defined.
* The *condor\_collector* daemon now advertises to itself, and will appear
  in the output of *condor\_status* **-collector**.
* Optimizations in core Condor systems should provide minor speed
  improvements.
* Updated the maximum log size to the maximum operating system's file size.

Configuration Variable and ClassAd Attribute Additions and Changes:

* The undocumented configuration variable
  TOOLS\_PROVIDE\_OLD\_MESSAGES   is no longer recognized by Condor.
* The new configuration variable
  SCHEDD\_JOB\_QUEUE\_LOG\_FLUSH\_DELAY   sets an
  upper bound in seconds on how long it takes for changes to the job
  ClassAd to be visible to the Condor Job Router and to Quill.
  The default value is 5 seconds.
  Previously, there was no upper limit. Typically, other activity in
  the job queue, such as jobs being submitted or completed would cause
  buffered data to be flushed to disk, such that the effective upper bound was
  a function of how busy the job queue was.
* The default configuration file now uses
  ALLOW/DENY in place of
  HOSTALLOW/HOSTDENY. See the release notes above
  for more information.
* The default value for MAX\_JOBS\_RUNNING   has changed.
  Previously, it was 200. Now it is defined by an expression that depends
  on the total amount of memory and the operating system. The default
  expression requires 1MByte of RAM per running job, on the submit machine.
  In some environments and configurations, this is overly
  generous and can be cut by as much as 50%. Under Windows, the
  number of running jobs is still capped at 200.
  A 64-bit version of Windows is recommended in order to raise the value
  above the default.
  Under Unix, the maximum default is now 10,000. To scale higher, we
  recommend that the system ephemeral port range is extended
  such that there are at least 2.1 ports per running job.
* The default value of RESERVED\_SWAP has changed to
  the value 0, which
  disables the *condor\_schedd* daemon's check for sufficient swap space
  before starting more jobs. The new expression defined with
  MAX\_JOBS\_RUNNING has a more appropriate memory check, so
  the configuration variable RESERVED\_SWAP will no longer
  be used in the near future.
  For cases where
  RESERVED\_SWAP is not set to 0, the default value
  of SHADOW\_SIZE\_ESTIMATE has changed to 800 Kbytes.
  Previously, it was 200 if not set,
  but it was set to 1800 in the example configuration file.
* The default values of START\_LOCAL\_UNIVERSE   and
  START\_SCHEDULER\_UNIVERSE   have changed. Previously,
  these were set to True. Now, they are set using an expression
  that allows
  up to 200 local universe and 200 scheduler universe jobs to run.
* The default value of
  GRIDMANAGER\_MAX\_SUBMITTED\_JOBS\_PER\_RESOURCE   has
  changed from 100 to 1000.
* The default value of NEGOTIATOR\_INTERVAL
  has changed from 300 to 60.
* The default value of ENABLE\_GRID\_MONITOR   has been
  changed from False to True. This variable
  was assigned to True in the example configuration file, so
  the change in default value now matches the value set in the example
  configuration.
* The configuration variable VM\_VERSION has been removed,
  as has the machine ClassAd attribute of the same name.
  When the virtual machine version information is needed in the machine ClassAd,
  the configuration variable STARTD\_ATTRS can be used to
  add it.
* The default configuration now uses
  VM\_BRIDGE\_SCRIPT and VM\_SCRIPT in place of
  XEN\_BRIDGE\_SCRIPT and XEN\_SCRIPT due to the
  support of KVM.
  Submit description file commands have also been added, and they include:
  **kvm\_disk**, **kvm\_transfer\_files**,
  and **kvm\_cd\_rom\_device**.
* The configuration variables XEN\_DEFAULT\_KERNEL
  and XEN\_DEFAULT\_INITRD have been removed.
  Corresponding to this, the submit description file command
  xen\_kernel = any is no longer valid.

Bugs Fixed:

* Fixed a bug that prevented parallel universe jobs from running
  on *condor\_startd* daemons with dynamic slots enabled.
* Fixed a race condition bug in the *condor\_startd* which allowed
  it to send Unix signals, intended for *condor\_starter* processes, as
  root to non-Condor related processes.
* A Windows platform bug has been fixed.
  The bug caused a 20-second interval in which
  the *condor\_shadow*, *condor\_startd*, and *condor\_starter* daemons
  appeared as deadlocked.
  The bug was visible if a job ClassAd update from the *condor\_starter* caused
  the job's periodic hold or remove policy to become True.
* Fixed a bug that could cause *condor\_dagman* to generate an
  illegal rescue DAG, if it read events incorrectly in recovery mode.
  *condor\_dagman* now checks for events that violate DAG semantics
  when reading events in recovery mode, and it exits without creating a
  rescue DAG if it reads such an event.
* Fixed a bug that could cause *condor\_dagman* to abort if it saw
  the combination of a terminated event and an aborted event on a node with
  retries.
* Changed some logged warnings in *condor\_dagman* to not be
  printed at the default verbosity setting.
* The version compatibility checking between a .condor.sub
  file and the *condor\_dagman* binary which is done at DAG startup
  is now much more permissive.
  Currently, .condor.sub files with
  Condor versions of 7.1.2 and later accepted by *condor\_dagman*.
* Fixed a bug introduced with the new *condor\_dagman* lazy log file
  evaluation code in Condor version 7.3.2.
  The bug sometimes caused failure when running rescue DAGs.
* Fixed a bug originating in Condor version 7.1.4.
  When a user submitted a job
  with an executable that did not have execute permission enabled,
  Condor was running as root, and file transfer was specified in the job,
  Condor failed to automatically turn on execute permission after
  transferring the file.
* Fixed a bug that appeared in Condor version 7.3.2.
  The configuration variable
  COUNT\_HYPERTHREAD\_CPUS was ignored and was effectively
  treated as False in all cases.
* Fixed a bug in which the Condor Job Router was not able
  to see matchmaking diagnostic attributes such as LastRejMatchTime.
  Therefore, when evaluating policy
  expressions that referred to these attributes, they were effectively
  treated as though Undefined.
  Quill was also not able to see these attributes.
* Fixed a bug introduced in Condor version 7.3.2 that could cause the
  *condor\_gridmanager* to crash repeatedly on startup,
  if the job queue
  contained grid type gt2 jobs that had been previously submitted.
* Fixed two bugs introduced in Condor version 7.3.2,
  and related to VOMS.
  The first bug
  prevented jobs with X.509 proxies from being submitted on platforms
  on which Condor does not support VOMS.
  The second bug prevented submission
  of jobs with VOMS proxies, if the authenticity of the VOMS extensions
  could not be verified.
  At the same time, improved memory usage when VOMS extensions are not used.
* Fixed a bad default in the file batch\_gahp.config,
  that prevented
  Condor from observing job state changes for grid universe jobs
  with a grid type of pbs or lsf.
* Fixed a bug that caused Condor-C jobs to fail if
  the submit description file command **transfer\_executable**
  was set to False.
* Fixed a bug that caused Condor-C jobs to fail if the executable
  or one of the stdin, stdout, or stderr file names
  contained a comma.
* File transfer for grid type gt4 jobs requires an empty directory
  within /tmp, which the *condor\_gridmanager* creates.
  If this directory is deleted, the *condor\_gridmanager* will now recreate it.
* Fixed a bug that could cause the user job log to become
  corrupted on Windows platforms. This bug would manifest itself only if the
  same log file was specified with different paths. For example, the
  following submit file could have triggered this bug:
  ```

  ...
  initialdir = /data/job1
  log = ../JobLog
  queue

  initialdir = /data/job2
  log = ../JobLog
  queue

  ```
* Fixed a memory leak introduced into Condor version 7.3.2.
  The leak was in the *condor\_collector* daemon.
* Fixed a bug introduced in Condor version 7.3.2
  that resulted in the *condor\_negotiator* daemon
  refusing to run, if the configuration variable GROUP\_QUOTA
  for any group was set to 0.
* Fixed a bug that caused the ctime in the event log header
  to always be zero.
* Fixed the output of *condor\_status* when used with the command-line
  options **-java** or **-vm**.
* Fixed a problem in the *condor\_schedd* daemon introduced in
  7.3.2. For *condor\_schedd* daemons with lots of jobs having periodic release
  expressions, this bug could result in the *condor\_schedd* taking a long
  time while evaluating periodic expressions, causing it to become
  unresponsive to queries and other tasks.
  With a job queue of 30,000 jobs,
  a period of unresponsiveness of an hour was observed,
  whereas the evaluation of periodic expressions in this same environment
  normally takes less than 5 seconds.
* Potential bugs and memory leaks were identified and
  fixed throughout Condor. The Condor Team is not aware of anyone having
  encountered these bugs.
* The *condor\_starter* cleans up working directories in more
  situations. Previously during some error conditions, the working
  directory within $(EXECUTE) might be left behind.
* If the user log cannot be accessed when a local universe
  job starts, the job would fail and immediately be retried. Now
  the job is placed on hold.
* Fixed a bug in the *condor\_startd* in which vacating jobs would not
  respect the value of JobLeaseDuration.
* Updated the detection of HasVM within the *condor\_startd*
  to publish an update to the *condor\_collector*,
  when the configuration variable VM\_RECHECK\_INTERVAL is specified.
* Fixed a bug in which the *condor\_gridmanager* could, in rare cases,
  waste a
  small amount of memory and processor time checking for proxy files no longer
  being used by any active jobs.
* The setting CREAM\_GAHP   was added to the default configuration
  file with a value of $(SBIN)/cream\_gahp.
  Existing installations desiring to
  submit jobs to CREAM should add this setting.
* Fixed a bug where *condor\_restart* would fail on a *condor\_collector*
  daemon configured for high availability with multiple *condor\_collector*
  daemons.
* Fixed a bug in which multiple entries of output from
  the command
  *condor\_status* **-negotiator**
  would be on a single line. They are now listed one per line.
* Fixed a bug in which the command
  *condor\_submit* **-dump** would crash if multiple
  jobs were queued from within a single submit file.
* Fixed a bug in which a slot whose associated job disappeared
  could remain in the Claimed/Idle state until the claim lease expired.
  The slot should now promptly return to the Unclaimed/Idle state.
* Fixed a bug in which a *condor\_startd* using dynamic slots could
  crash on shutdown or reconfiguration.

Known Bugs:

* The *condor\_kbdd* has a chance of entering an infinite loop
  on platforms that use X-Windows. Microsoft Windows and Mac OS X
  are not affected. Removing KBDD from DAEMON\_LIST is a
  workaround, although this impairs Condor's ability to detect
  console usage. This bug is fixed in Condor version 7.4.3.
* There are multiple bugs related to using VOMS attributes.
  In Condor version 7.4.0, VOMS support should be disabled by setting
  the configuration variable USE\_VOMS\_ATTRIBUTES = FALSE.
* A configuration variable of USE\_VISIBLE\_DESKTOP   set
  to True will corrupt the visible desktop.
  This bug is present back through Condor version 7.2.4.
  This configuration variable did not work at all in 7.2 releases
  prior to 7.2.4. This bug will be fixed in Condor version 7.4.1.
* If the global event log (see section [3.3.4](3_3Configuration.html#param:EventLog)) is
  turned on, *condor\_dagman* will hang when running any DAG that has
  POST scripts.
* *condor\_dagman* will hang on Windows when running any DAG that
  uses more than one log file for the node jobs.

Additions and Changes to the Manual:

* See section [3.13.2](3_13Setting_Up.html#sec:Condor-HDFS) and
  section [3.3.23](3_3Configuration.html#sec:HDFS-Config-File-Entries) for preliminary documentation of
  Condor's integration with the Hadoop Distributed File System (HDFS).

---

[![next](next.png)](9_Command_Reference.html)
[![up](up.png)](8_Version_History.html)
[![previous](prev.png)](8_4Development_Release.html)
[![contents](contents.png)](Contents.html)
[![index](index.png)](Index.html)

 **Next:** [9. Command Reference Manual](9_Command_Reference.html)
 **Up:** [8. Version History and](8_Version_History.html)
 **Previous:** [8.4 Development Release Series](8_4Development_Release.html)
   **[Contents](Contents.html)**
   **[Index](Index.html)**

htcondor-admin@cs.wisc.edu



=== Content from bugzilla.redhat.com_28068d7e_20250124_164000.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D540545)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D540545)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D540545)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 540545

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 540545**](show_bug.cgi?id=540545)
- WANT\_SUSPEND evaluating to UNDEFIEND causes condor\_startd exception

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
WANT\_SUSPEND evaluating to UNDEFIEND causes condor\_startd exception

| | [Keywords](describekeywords.cgi): |  | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat Enterprise MRG | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat Enterprise MRG "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | condor | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 1.0 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | 1.3 | | [Target Release](page.cgi?id=fields.html#target_release): | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Matthew Farrellee | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Martin Kudlej | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=540545&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=540545&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2009-11-23 16:16 UTC by Martin Kudlej | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2010-10-14 16:12 UTC ([History](show_activity.cgi?id=540545)) | | [CC List:](page.cgi?id=fields.html#cclist) | 2 users (show)  fnadge matt | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: | The default 'WANT\_SUSPEND' policy included the JobStart attribute, which in some cases was 'UNDEFINED'. A 'WANT\_SUSPEND' with the value 'UNDEFINED' was considered an error and startd would exit. With this update, the JobStart attribute was removed from 'WANT\_SUSPEND'. Startd now treats a 'WANT\_SUSPEND' that evaluates to 'UNDEFINED' as if it evaluated to 'FALSE'. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2010-10-14 16:12:48 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2010:0773](https://access.redhat.com/errata/RHSA-2010%3A0773) | 0 | normal | SHIPPED\_LIVE | Moderate: Red Hat Enterprise MRG Messaging and Grid Version 1.3 | 2010-10-14 15:56:44 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=540545#c0)  Martin Kudlej    2009-11-23 16:16:45 UTC  ``` Description of problem: I've submitted 10000 simple jobs "sleep 3" and after few minutes I can see in logs that condor_startd and condor_shadow crash. There is no corefile in ~condor even if I've set up it properly.  Version-Release number of selected component (if applicable): RHEL 5.3 and 5.4 with condor-7.4.1-0.6 and -0.7. There are i386 and x86_64 architectures there.  How reproducible: 100% submittion of 10000 simple jobs  Steps to Reproduce: 1. turn off qmf plugins 2. turn on advance logging 3. submit 10000 simple jobs    Actual results: condor_shadow condor_startd crash  Expected results: core dumps setup: # common part rhel4/5/...   ulimit -c unlimited   export DAEMON_COREFILE_LIMIT='unlimited'   grep DAEMON_COREFILE_LIMIT /etc/sysconfig/init ||    echo "DAEMON_COREFILE_LIMIT='unlimited'" >>/etc/sysconfig/init    # condor specific   grep ^CREATE_CORE_FILES ${condor_config} || \     echo "CREATE_CORE_FILES = True" >> ${condor_config}        # condor optional (useful in some cases)     grep ^ABORT_ON_EXCEPTION ${condor_config} || \       echo "ABORT_ON_EXCEPTION = True" >> ${condor_config}    # rhel5/... only   echo 2 > /proc/sys/fs/suid_dumpable    # rhel4 only   echo 2 > /proc/sys/kernel/suid_dumpable  condor_shadow condor_startd don't crash  Additional info: submition file: executable = /bin/sleep arguments = 3 universe=vanilla should_transfer_files = YES when_to_transfer_output = ON_EXIT  queue 10000  MasterLog: 11/23 14:28:44 ProcAPI::getProcInfo() pid 14406 does not exist. 11/23 14:28:44 ProcAPI::getProcInfo() pid 14406 does not exist. 11/23 14:28:44 ProcAPI::getProcInfo() pid 14406 does not exist. 11/23 14:28:44 ProcAPI::getProcInfo() pid 14406 does not exist. 11/23 14:28:44 ProcAPI::getProcInfo() pid 14407 does not exist. 11/23 14:28:44 ProcAPI::getProcInfo() pid 14407 does not exist. 11/23 14:28:44 ProcAPI::getProcInfo() pid 14407 does not exist. 11/23 14:28:44 ProcAPI::getProcInfo() pid 14407 does not exist. 11/23 14:28:44 ProcAPI::getProcInfo() pid 14407 does not exist. 11/23 14:29:30 DaemonCore: No more children processes to reap. 11/23 14:29:30 The STARTD (pid 24153) died due to signal 11 (Segmentation fault) 11/23 14:29:30 ProcAPI::getProcInfo() pid 18780 does not exist. 11/23 14:29:30 ProcAPI::getProcInfo() pid 18780 does not exist. 11/23 14:29:30 ProcAPI::getProcInfo() pid 18780 does not exist. 11/23 14:29:30 ProcAPI::getProcInfo() pid 18780 does not exist. 11/23 14:29:30 ProcAPI::getProcInfo() pid 18780 does not exist. 11/23 14:29:30 ProcAPI::getProcInfo() pid 18805 does not exist. 11/23 14:29:30 ProcAPI::getProcInfo() pid 18805 does not exist. 11/23 14:29:30 ProcAPI::getProcInfo() pid 18805 does not exist. 11/23 14:29:30 ProcAPI::getProcInfo() pid 18805 does not exist.  StartdLog: 11/23 14:29:30 slot1: match_info called 11/23 14:29:30 slot1: Received match <:51411>#1259003801#17#... 11/23 14:29:30 slot1: Started match timer (4569) for 120 seconds. 11/23 14:29:30 slot1: State change: match notification protocol successful 11/23 14:29:30 slot1: Changing state: Unclaimed -> Matched 11/23 14:29:30 slot1: Canceled match timer (4569) 11/23 14:29:30 slot1: Schedd addr = <:43049> 11/23 14:29:30 slot1: Alive interval = 300 11/23 14:29:30 slot1: Received ClaimId from schedd (<:51411>#1259003801#17#...) 11/23 14:29:30 slot1: Rank of this claim is: 0.000000 11/23 14:29:30 slot1: Request accepted. 11/23 14:29:30 slot1: Remote owner is condor@.. 11/23 14:29:30 slot1: State change: claiming protocol successful 11/23 14:29:30 slot1: Changing state: Matched -> Claimed 11/23 14:29:30 slot1: Started ClaimLease timer (4572) w/ 1800 second lease duration 11/23 14:29:30 ERROR "Can't find WANT_SUSPEND in internal ClassAd" at line 1261 in file Resource.cpp 11/23 14:29:30 CronMgr: 0 jobs alive 11/23 14:29:30 slot1: Canceled ClaimLease timer (4572) 11/23 14:29:30 slot1: Changing state and activity: Claimed/Idle -> Preempting/Killing 11/23 14:29:30 Entered vacate_client <:43049> ... 11/23 14:29:30 slot1: State change: No preempting claim, returning to owner 11/23 14:29:30 slot1: Changing state and activity: Preempting/Killing -> Owner/Idle 11/23 14:29:30 slot1: State change: IS_OWNER is false 11/23 14:29:30 slot1: Changing state: Owner -> Unclaimed 11/23 14:29:30 slot2: Canceled ClaimLease timer (33) 11/23 14:29:30 slot2: Changing state and activity: Claimed/Busy -> Preempting/Killing 11/23 14:29:30 slot2: In Starter::kill() with pid 18939, sig 3 (SIGQUIT) 11/23 14:29:30 Send_Signal(): Doing kill(18939,3) [SIGQUIT] 11/23 14:29:30 slot3: Canceled ClaimLease timer (35) 11/23 14:29:30 slot3: Changing state and activity: Claimed/Busy -> Preempting/Killing 11/23 14:29:30 slot3: In Starter::kill() with pid 18780, sig 3 (SIGQUIT) 11/23 14:29:30 Send_Signal(): Doing kill(18780,3) [SIGQUIT] 11/23 14:29:30 slot4: Canceled ClaimLease timer (37) 11/23 14:29:30 slot4: Changing state and activity: Claimed/Busy -> Preempting/Killing 11/23 14:29:30 slot4: In Starter::kill() with pid 18889, sig 3 (SIGQUIT) 11/23 14:29:30 Send_Signal(): Doing kill(18889,3) [SIGQUIT] 11/23 14:29:30 slot5: Canceled ClaimLease timer (39) 11/23 14:29:30 slot5: Changing state and activity: Claimed/Busy -> Preempting/Killing 11/23 14:29:30 slot5: In Starter::kill() with pid 18828, sig 3 (SIGQUIT) 11/23 14:29:30 Send_Signal(): Doing kill(18828,3) [SIGQUIT] 11/23 14:29:30 slot6: Canceled ClaimLease timer (41) 11/23 14:29:30 slot6: Changing state and activity: Claimed/Busy -> Preempting/Killing 11/23 14:29:30 slot6: In Starter::kill() with pid 18805, sig 3 (SIGQUIT) 11/23 14:29:30 Send_Signal(): Doing kill(18805,3) [SIGQUIT] 11/23 14:29:30 slot7: Canceled ClaimLease timer (43) 11/23 14:29:30 slot7: Changing state and activity: Claimed/Busy -> Preempting/Killing 11/23 14:29:30 slot7: In Starter::kill() with pid 18863, sig 3 (SIGQUIT) 11/23 14:29:30 Send_Signal(): Doing kill(18863,3) [SIGQUIT] 11/23 14:29:30 slot8: Canceled ClaimLease timer (31) 11/23 14:29:30 slot8: Changing state and activity: Claimed/Busy -> Preempting/Killing 11/23 14:29:30 slot8: In Starter::kill() with pid 18915, sig 3 (SIGQUIT) 11/23 14:29:30 Send_Signal(): Doing kill(18915,3) [SIGQUIT] 11/23 14:29:30 startd exiting because of fatal exception. Stack dump for process 24153 at timestamp 1259004570 (24 frames) condor_startd(dprintf_dump_stack+0xb7)[0x5020d1] condor_startd[0x50233e] /lib64/libpthread.so.0[0x34c380e7c0] /lib64/libc.so.6(abort+0x28f)[0x34c3031e8f] condor_startd(_EXCEPT_+0x1a5)[0x500663] condor_startd(_ZN8Resource13wants_suspendEv+0x113)[0x4a5065] condor_startd(_ZN8ResState4evalEv+0xe5)[0x4a40d9] condor_startd(_ZN8ResState6changeE5State8Activity+0x2af)[0x4a335b] condor_startd(_ZN8ResState6changeE5State+0x7e)[0x4a33e4] condor_startd(_ZN8Resource12change_stateE5State+0x1f)[0x49819d] condor_startd(_Z20accept_request_claimP8Resource+0x66c)[0x4b1eae] condor_startd(_Z13request_claimP8ResourceP5ClaimPcP6Stream+0x144a)[0x4b343c] condor_startd(_Z21command_request_claimP7ServiceiP6Stream+0x2a6)[0x4b494e] condor_startd(_ZN10DaemonCore18CallCommandHandlerEiP6Streamb+0x29f)[0x4d7675] condor_startd(_ZN10DaemonCore9HandleReqEP6StreamS1_+0x3393)[0x4eb671] condor_startd(_ZN10DaemonCore22HandleReqSocketHandlerEP6Stream+0x99)[0x4ec287] condor_startd(_ZN10DaemonCore24CallSocketHandler_workerEibP6Stream+0x279)[0x4ebffb] condor_startd(_ZN10DaemonCore35CallSocketHandler_worker_demarshallEPv+0x39)[0x4ec1e3] condor_startd(_ZN13CondorThreads8pool_addEPFvPvES0_PiPKc+0x3f)[0x579acd] condor_startd(_ZN10DaemonCore17CallSocketHandlerERib+0x1cd)[0x4de445] condor_startd(_ZN10DaemonCore6DriverEv+0x1876)[0x4dfd3c] condor_startd(main+0x1917)[0x4f7785] /lib64/libc.so.6(__libc_start_main+0xf4)[0x34c301d994] condor_startd[0x490169] 11/23 14:29:40 Found have_phsy 1, have_core 1 11/23 14:29:40 Analyzing 8 processors with IDs 11/23 14:29:40 Comparing P0 and P1: 0!=1 or  0!=0 (! match) 11/23 14:29:40 Comparing P0 and P2: 0!=0 or  0!=1 (! match) 11/23 14:29:40 Comparing P0 and P3: 0!=1 or  0!=1 (! match) 11/23 14:29:40 Comparing P0 and P4: 0!=0 or  0!=2 (! match) 11/23 14:29:40 Comparing P0 and P5: 0!=1 or  0!=2 (! match) 11/23 14:29:40 Comparing P0 and P6: 0!=0 or  0!=3 (! match) 11/23 14:29:40 Comparing P0 and P7: 0!=1 or  0!=3 (! match) 11/23 14:29:40 P0: match->1 11/23 14:29:40 Comparing P1 and P2: 1!=0 or  0!=1 (! match) 11/23 14:29:40 Comparing P1 and P3: 1!=1 or  0!=1 (! match) 11/23 14:29:40 Comparing P1 and P4: 1!=0 or  0!=2 (! match) 11/23 14:29:40 Comparing P1 and P5: 1!=1 or  0!=2 (! match) 11/23 14:29:40 Comparing P1 and P6: 1!=0 or  0!=3 (! match) 11/23 14:29:40 Comparing P1 and P7: 1!=1 or  0!=3 (! match) 11/23 14:29:40 P1: match->1 11/23 14:29:40 Comparing P2 and P3: 0!=1 or  1!=1 (! match) 11/23 14:29:40 Comparing P2 and P4: 0!=0 or  1!=2 (! match) 11/23 14:29:40 Comparing P2 and P5: 0!=1 or  1!=2 (! match) 11/23 14:29:40 Comparing P2 and P6: 0!=0 or  1!=3 (! match) 11/23 14:29:40 Comparing P2 and P7: 0!=1 or  1!=3 (! match) 11/23 14:29:40 P2: match->1 11/23 14:29:40 Comparing P3 and P4: 1!=0 or  1!=2 (! match) 11/23 14:29:40 Comparing P3 and P5: 1!=1 or  1!=2 (! match) 11/23 14:29:40 Comparing P3 and P6: 1!=0 or  1!=3 (! match) 11/23 14:29:40 Comparing P3 and P7: 1!=1 or  1!=3 (! match) 11/23 14:29:40 P3: match->1 11/23 14:29:40 Comparing P4 and P5: 0!=1 or  2!=2 (! match) 11/23 14:29:40 Comparing P4 and P6: 0!=0 or  2!=3 (! match) 11/23 14:29:40 Comparing P4 and P7: 0!=1 or  2!=3 (! match) 11/23 14:29:40 P4: match->1 11/23 14:29:40 Comparing P5 and P6: 1!=0 or  2!=3 (! match) 11/23 14:29:40 Comparing P5 and P7: 1!=1 or  2!=3 (! match) 11/23 14:29:40 P5: match->1 11/23 14:29:40 Comparing P6 and P7: 0!=1 or  3!=3 (! match) 11/23 14:29:40 P6: match->1 11/23 14:29:40 P7: match->1 11/23 14:29:40 Using IDs: 8 processors, 8 CPUs, 0 HTs  ShadowLog: 11/23 14:29:29 (1.944) (18849): Set NumJobStarts to 1 11/23 14:29:29 (1.945) (18875): Resource slot4@... changing state from STARTUP to EXECUTING 11/23 14:29:29 (1.945) (18875): WriteUserLog: not initialized @ writeEvent() 11/23 14:29:29 (1.945) (18875): Started timer to evaluate periodic user policy expressions every 60 seconds 11/23 14:29:29 (1.945) (18875): QmgrJobUpdater: started timer to update queue every 900 seconds (tid=11) 11/23 14:29:29 (1.945) (18875): Set NumJobStarts to 1 11/23 14:29:29 (1.946) (18902): Resource slot8@... changing state from STARTUP to EXECUTING 11/23 14:29:29 (1.946) (18902): WriteUserLog: not initialized @ writeEvent() 11/23 14:29:29 (1.946) (18902): Started timer to evaluate periodic user policy expressions every 60 seconds 11/23 14:29:29 (1.946) (18902): QmgrJobUpdater: started timer to update queue every 900 seconds (tid=11) 11/23 14:29:29 (1.946) (18902): Set NumJobStarts to 1 11/23 14:29:29 (1.947) (18923): Resource slot2@... changing state from STARTUP to EXECUTING 11/23 14:29:29 (1.947) (18923): WriteUserLog: not initialized @ writeEvent() 11/23 14:29:29 (1.947) (18923): Started timer to evaluate periodic user policy expressions every 60 seconds 11/23 14:29:29 (1.947) (18923): QmgrJobUpdater: started timer to update queue every 900 seconds (tid=11) 11/23 14:29:29 (1.947) (18923): Set NumJobStarts to 1 11/23 14:29:30 (1.947) (18923): WriteUserLog: not initialized @ writeEvent() 11/23 14:29:30 (1.947) (18923): ERROR "Error from slot2@...: ProcD has failed" at line 655 in file pseudo_ops.cpp 11/23 14:29:30 (1.942) (18782): WriteUserLog: not initialized @ writeEvent() 11/23 14:29:30 (1.942) (18782): ERROR "Error from slot6@...: ProcD has failed" at line 655 in file pseudo_ops.cpp Stack dump for process 18923 at timestamp 1259004570 (17 frames) condor_shadow(dprintf_dump_stack+0xb7)[0x4df855] condor_shadow[0x4dfac2] /lib64/libpthread.so.0[0x34c380e7c0] /lib64/libc.so.6(gsignal+0x35)[0x34c3030265] /lib64/libc.so.6(abort+0x110)[0x34c3031d10] condor_shadow(_EXCEPT_+0x1a5)[0x4ddde7] condor_shadow(_Z11pseudo_ulogP7ClassAd+0x37d)[0x4a0355] condor_shadow(_Z17do_REMOTE_syscallv+0x3609)[0x4a4f9d] condor_shadow(_ZN14RemoteResource14handleSysCallsEP6Stream+0x32)[0x49d22a] condor_shadow(_ZN10DaemonCore24CallSocketHandler_workerEibP6Stream+0x279)[0x4cb7d7] condor_shadow(_ZN10DaemonCore35CallSocketHandler_worker_demarshallEPv+0x39)[0x4cb9bf] condor_shadow(_ZN13CondorThreads8pool_addEPFvPvES0_PiPKc+0x3f)[0x56bdd9] condor_shadow(_ZN10DaemonCore17CallSocketHandlerERib+0x1cd)[0x4bdc21] condor_shadow(_ZN10DaemonCore6DriverEv+0x1876)[0x4bf518] condor_shadow(main+0x1917)[0x4d70d1] /lib64/libc.so.6(__libc_start_main+0xf4)[0x34c301d994] condor_shadow[0x48ef69] 11/23 14:29:30 (1.941) (18766): WriteUserLog: not initialized @ writeEvent() 11/23 14:29:30 (1.941) (18766): ERROR "Error from slot3@...: ProcD has failed" at line 655 in file pseudo_ops.cpp 11/23 14:29:30 (1.944) (18849): WriteUserLog: not initialized @ writeEvent() Stack dump for process 18766 at timestamp 1259004570 (17 frames) condor_shadow(dprintf_dump_stack+0xb7)[0x4df855] condor_shadow[0x4dfac2] /lib64/libpthread.so.0[0x34c380e7c0] /lib64/libc.so.6(gsignal+0x35)[0x34c3030265] /lib64/libc.so.6(abort+0x110)[0x34c3031d10] condor_shadow(_EXCEPT_+0x1a5)[0x4ddde7] condor_shadow(_Z11pseudo_ulogP7ClassAd+0x37d)[0x4a0355] condor_shadow(_Z17do_REMOTE_syscallv+0x3609)[0x4a4f9d] Stack dump for process 18782 at timestcondor_shadow(_ZN14RemoteResource14handleSysCallsEP6Stream+0x32)[0x49d22a] condor_shadow(_ZN10DaemonCore24CallSocketHandler_workerEibP6Stream+0x279)[0x4cb7d7] condor_shadow(_ZN10DaemonCore35CallSocketHandler_worker_demarshallEPv+0x39)[0x4cb9bf] condor_shadow(_ZN13CondorThreads8pool_addEPFvPvES0_PiPKc+0x3f)[0x56bdd9] condor_shadow(_ZN10DaemonCore17CallSocketHandlerERib+0x1cd)[0x4bdc21] condor_shadow(_ZN10DaemonCore6DriverEv+0x1876)[0x4bf518] condor_shadow(main+0x1917)[0x4d70d1] /lib64/libc.so.6(__libc_start_main+0xf4)[0x34c301d994] condor_shadow[0x48ef69] 11/23 14:29:30 (1.944) (18849): ERROR "Error from slot7@...: ProcD has failed" at line 655 in file pseudo_ops.cpp 11/23 14:29:30 (1.945) (18875): WriteUserLog: not initialized @ writeEvent() 11/23 14:29:30 (1.943) (18816): WriteUserLog: not initialized @ writeEvent() 11/23 14:29:30 (1.943) (18816): ERROR "Error from slot5@...: ProcD has failed" at line 655 in file pseudo_ops.cpp Stack dump for procesamp 1259004570 (17 frames) Stack dump for process 18849 at timestamp 1259004570 (17 frames) condor_shadow(dprintf_dump_stack+0xb7)[0x4df855] condor_shadow[0x4dfac2] /lib64/libpthread.so.0[0x34c380e7c0] /lib64/libc.so.6(gsignal+0x35)[0x34c3030265] /lib64/libc.so.6(abort+0x110)[0x34c3031d10] condor_shadow(_EXCEPT_+0x1a5)[0x4ddde7] condor_shadow(_Z11pseudo_ulogP7ClassAd+0x37d)[0x4a0355] condor_shadow(_Z17do_REMOTE_syscallv+0x3609)[0x4a4f9d] condor_shadow(_ZN14RemoteResource14handleSysCallsEP6Stream+0x32)[0x49d22a] condor_shadow(_ZN10DaemonCore24CallSocketHandler_workerEibP6Stream+0x279)[0x4cb7d7] condor_shadow(_ZN10DaemonCore35CallSocketHandler_worker_demarshallEPv+0x39)[0x4cb9bf] condor_shadow(_ZN13CondorThreads8pool_addEPFvPvES0_PiPKc+0x3f)[0x56bdd9] condor_shadow(_ZN10DaemonCore17CallSocketHandlerERib+0x1cd)[0x4bdc21] condor_shadow(_ZN10DaemonCore6DriverEv+0x1876)[0x4bf518] condor_shadow(main+0x1917)[0x4d70d1] scondor_shadow(dprintf_dump_stack+0xb7)[0x4df855] condor_shadow[0x4dfac2] /lib64/libpthread.so.0[0x34c380e7c0] /lib64/libc.so.6(gsignal+0x35)[0x34c3030265] /lib64/libc.so.6(abort+0x110)[0x34c3031d10] condor_shadow(_EXCEPT_+0x1a5)[0x4ddde7] condor_shadow(_Z11pseudo_ulogP7ClassAd+0x37d)[0x4a0355] 11/23 14:29:30 (1.946) (18902): WriteUserLog: not initialized @ writeEvent()  /lib64/libc.so.6(__libc_start_main+0xf4)[0x34c301d994] condor_shadow(_Z17do_REMOTE_syscallv+0x3609)[0x4a4f9d] 11/23 14:29:30 (1.945) (18875): ERROR "Error from slot4@...: ProcD has failed" at line 655 in file pseudo_ops.cpp 11/23 14:29:30 (1.946) (18902): ERROR "Error from slot8@...: ProcD has failed" at line 655 in file pseudo_ops.cpp condor_shadow[0x48ef69] condor_shadow(_ZN14RemoteResource14handleSysCallsEP6Stream+0x32)[0x49d22a] Stack dump for proceScondor_shadow(_ZN10DaemonCore24CallSocketHandler_workerEibP6Stream+0x279)[0x4cb7d7] 18816 at timestamp 1259004570 (17 frames) condor_shadow(_ZN10DaemonCore35CallSocketHandler_worker_demarshallEPv+0x39)[0x4cb9bf] condor_shadow(_ZN13CondorThreads8pool_addEPFvPvES0_PiPKc+0x3f)[0x56bdd9] condor_shadow(dprintf_dump_stack+0xb7)[0x4df855] condor_shadow(_ZN10DaemonCore17CallSocketHandlerERib+0x1cd)[0x4bdc21] condor_shadow[0x4dfac2] /lib64/libpthread.so.0[0x34c380e7c0] /lib64/libc.so.6(gsignal+0x35)[0x34c3030265] /lib64/libc.so.6(abort+0x110)[0x34c3031d10] condor_shadow(_ZN10DaemonCore6DriverEv+0x1876)[0x4bf518] condor_shadow(_EXCEPT_+0x1a5)[0x4ddde7] scondor_shadow(main+0x1917)[0x4d70d1] s 18875/lib64/libc.so.6(__libc_start_main+0xf4)[0x34c301d994] t at timestamp 12590045condor_shadow[0x48ef69] ack dump for process 18902 at timestamp 1259004570 (17 frames) condor_shadow(_Z11pseudo_ulogP7ClassAd+0x37d)[0x4a0355] 70 (17 frames) condor_shadow(_Z17do_REMOTE_syscallv+0x3609)[0x4a4f9d] condor_shadow(dprintf_dump_stack+0xb7)[0x4df855] condor_shadow(_ZN14RemoteResource14handleSysCallsEP6Stream+0x32)[0x49d22a] condor_shadow(dprintf_dump_stack+0xb7)[0x4df855] condor_shadow[0x4dfac2] /lib64/libpthread.so.0[0x34c380e7c0] condor_shadow(_ZN10DaemonCore24CallSocketHandler_workerEibP6Stream+0x279)[0x4cb7d7] /lib64/libc.so.6(gsignal+0x35)[0x34c3030265] condor_shadow[0x4dfac2] /lib64/libpthread.so.0[0x34c380e7c0] /lib64/libc.so.6(abort+0x110)[0x34c3031d10] /lib64/libc.so.6(gsignal+0x35)[0x34c3030265] /lib64/libc.so.6(abort+0x110)[0x34c3031d10] condor_shadow(_ZN10DaemonCore35CallSocketHandler_worker_demarshallEPv+0x39)[0x4cb9bf] condor_shadow(_EXCEPT_+0x1a5)[0x4ddde7] condor_shadow(_EXCEPT_+0x1a5)[0x4ddde7] condor_shadow(_ZN13CondorThreads8pool_addEPFvPvES0_PiPKc+0x3f)[0x56bdd9] condor_shadow(_Z11pseudo_ulogP7ClassAd+0x37d)[0x4a0355] condor_shadow(_Z11pseudo_ulogP7ClassAd+0x37d)[0x4a0355] condor_shadow(_ZN10DaemonCore17CallSocketHandlerERib+0x1cd)[0x4bdc21] condor_shadow(_Z17do_REMOTE_syscallv+0x3609)[0x4a4f9d] condor_shadow(_Z17do_REMOTE_syscallv+0x3609)[0x4a4f9d] condor_shadow(_ZN14RemoteResource14handleSysCallsEP6Stream+0x32)[0x49d22a] condor_shadow(_ZN10DaemonCore6DriverEv+0x1876)[0x4bf518] condor_shadow(_ZN14RemoteResource14handleSysCallsEP6Stream+0x32)[0x49d22a] condor_shadow(_ZN10DaemonCore24CallSocketHandler_workerEibP6Stream+0x279)[0x4cb7d7] condor_shadow(main+0x1917)[0x4d70d1] condor_shadow(_ZN10DaemonCore24CallSocketHandler_workerEibP6Stream+0x279)[0x4cb7d7] /lib64/libc.so.6(__libc_start_main+0xf4)[0x34c301d994] condor_shadow(_ZN10DaemonCore35CallSocketHandler_worker_demarshallEPv+0x39)[0x4cb9bf] condor_shadow(_ZN10DaemonCore35CallSocketHandler_worker_demarshallEPv+0x39)[0x4cb9bf] condor_shadow[0x48ef69] condor_shadow(_ZN13CondorThreads8pool_addEPFvPvES0_PiPKc+0x3f)[0x56bdd9] condor_shadow(_ZN13CondorThreads8pool_addEPFvPvES0_PiPKc+0x3f)[0x56bdd9] condor_shadow(_ZN10DaemonCore17CallSocketHandlerERib+0x1cd)[0x4bdc21] condor_shadow(_ZN10DaemonCore17CallSocketHandlerERib+0x1cd)[0x4bdc21] condor_shadow(_ZN10DaemonCore6DriverEv+0x1876)[0x4bf518] condor_shadow(_ZN10DaemonCore6DriverEv+0x1876)[0x4bf518] condor_shadow(main+0x1917)[0x4d70d1] condor_shadow(main+0x1917)[0x4d70d1] /lib64/libc.so.6(__libc_start_main+0xf4)[0x34c301d994] /lib64/libc.so.6(__libc_start_main+0xf4)[0x34c301d994] condor_shadow[0x48ef69] condor_shadow[0x48ef69] 11/23 14:29:30 Found have_phsy 1, have_core 1 11/23 14:29:30 Analyzing 8 processors with IDs 11/23 14:29:30 Comparing P0 and P1: 0!=1 or  0!=0 (! match) 11/23 14:29:30 Comparing P0 and P2: 0!=0 or  0!=1 (! match) 11/23 14:29:30 Comparing P0 and P3: 0!=1 or  0!=1 (! match) 11/23 14:29:30 Comparing P0 and P4: 0!=0 or  0!=2 (! match) 11/23 14:29:30 Comparing P0 and P5: 0!=1 or  0!=2 (! match) 11/23 14:29:30 Comparing P0 and P6: 0!=0 or  0!=3 (! match) 11/23 14:29:30 Comparing P0 and P7: 0!=1 or  0!=3 (! match) 11/23 14:29:30 P0: match->1 11/23 14:29:30 Comparing P1 and P2: 1!=0 or  0!=1 (! match) 11/23 14:29:30 Comparing P1 and P3: 1!=1 or  0!=1 (! match) 11/23 14:29:30 Comparing P1 and P4: 1!=0 or  0!=2 (! match) 11/23 14:29:30 Comparing P1 and P5: 1!=1 or  0!=2 (! match) 11/23 14:29:30 Comparing P1 and P6: 1!=0 or  0!=3 (! match) 11/23 14:29:30 Comparing P1 and P7: 1!=1 or  0!=3 (! match) 11/23 14:29:30 P1: match->1 11/23 14:29:30 Comparing P2 and P3: 0!=1 or  1!=1 (! match) 11/23 14:29:30 Comparing P2 and P4: 0!=0 or  1!=2 (! match) 11/23 14:29:30 Comparing P2 and P5: 0!=1 or  1!=2 (! match) 11/23 14:29:30 Comparing P2 and P6: 0!=0 or  1!=3 (! match) 11/23 14:29:30 Comparing P2 and P7: 0!=1 or  1!=3 (! match) 11/23 14:29:30 P2: match->1 11/23 14:29:30 Comparing P3 and P4: 1!=0 or  1!=2 (! match) 11/23 14:29:30 Comparing P3 and P5: 1!=1 or  1!=2 (! match) 11/23 14:29:30 Comparing P3 and P6: 1!=0 or  1!=3 (! match) 11/23 14:29:30 Comparing P3 and P7: 1!=1 or  1!=3 (! match) 11/23 14:29:30 P3: match->1 11/23 14:29:30 Comparing P4 and P5: 0!=1 or  2!=2 (! match) 11/23 14:29:30 Comparing P4 and P6: 0!=0 or  2!=3 (! match) 11/23 14:29:30 Comparing P4 and P7: 0!=1 or  2!=3 (! match) 11/23 14:29:30 P4: match->1 11/23 14:29:30 Comparing P5 and P6: 1!=0 or  2!=3 (! match) 11/23 14:29:30 Comparing P5 and P7: 1!=1 or  2!=3 (! match) 11/23 14:29:30 P5: match->1 11/23 14:29:30 Comparing P6 and P7: 0!=1 or  3!=3 (! match) 11/23 14:29:30 P6: match->1 11/23 14:29:30 P7: match->1 11/23 14:29:30 Using IDs: 8 processors, 8 CPUs, 0 HTs   ```  [Comment 1](show_bug.cgi?id=540545#c1)  Matthew Farrellee    2009-11-25 14:27:37 UTC  ``` What's the frequency of this bug?  For instance,  $ grep -e "STARTING UP" -e "signal 11" MasterLog; tail -n1 MasterLog 11/25 13:49:56 ** condor_master (CONDOR_MASTER) STARTING UP 11/25 14:06:09 The STARTD (pid 15559) died due to signal 11 (Segmentation fault) 11/25 14:21:20 exit Daemons::UpdateCollector  That shows one crash over a period of about 30 minutes. However, we need more than 1 data point to have any confidence in the rate.   ```  [Comment 2](show_bug.cgi?id=540545#c2)  Matthew Farrellee    2009-11-25 14:47:07 UTC  ``` The condor_shadow failures are a response to a condor_starter failure.  The condor_starter failure, only indirectly shown in the logs above, is because "ProcD has failed". The condor_procd is a process shared between the condor_startd and condor_starter processes to track process families.  $ pstree -p 12992 condor_startd(12992)─┬─condor_procd(13254)                      ├─condor_starter(25486)───condor_exec.exe(25567)                      ├─condor_starter(25519)───condor_exec.exe(25568)                      ├─condor_starter(25542)───condor_exec.exe(25569)                      ├─condor_starter(25588)                      ├─condor_starter(25620)                      ├─condor_starter(25647)                      └─condor_starter(31030)───condor_exec.exe(31054)  The procd, which is terminated as part of ~DaemonCore and Proc_Family_Cleanup, may be in a race with the condor_starter. This should be a separate BZ.   ```  [Comment 3](show_bug.cgi?id=540545#c3)  Matthew Farrellee    2009-11-25 15:22:05 UTC  ``` What is the occurrence of this bug?  Basically, how many jobs are processed by a single startd before it crashes.  Very roughly,  $ echo "Jobs per crash: $(($(grep "Idle -> Busy" StartLog | wc -l) / $(grep -e "STARTING UP" StartLog | wc -l)))" Jobs per crash: 1129   ```  [Comment 4](show_bug.cgi?id=540545#c4)  Matthew Farrellee    2009-11-25 15:31:02 UTC  ``` The stack is easier to read after being piped through c++filt,  $ grep -A24 Stack StartLog | c++filt  Stack dump for process 15559 at timestamp 1259175969 (24 frames) condor_startd(dprintf_dump_stack+0xb7)[0x5020d1] condor_startd[0x50233e] /lib64/libpthread.so.0[0x34c380e7c0] /lib64/libc.so.6(abort+0x28f)[0x34c3031e8f] condor_startd(_EXCEPT_+0x1a5)[0x500663] condor_startd(Resource::wants_suspend()+0x113)[0x4a5065] condor_startd(ResState::eval()+0xe5)[0x4a40d9] condor_startd(ResState::change(State, Activity)+0x2af)[0x4a335b] condor_startd(ResState::change(State)+0x7e)[0x4a33e4] condor_startd(Resource::change_state(State)+0x1f)[0x49819d] condor_startd(accept_request_claim(Resource*)+0x66c)[0x4b1eae] condor_startd(request_claim(Resource*, Claim*, char*, Stream*)+0x144a)[0x4b343c] condor_startd(command_request_claim(Service*, int, Stream*)+0x2a6)[0x4b494e] condor_startd(DaemonCore::CallCommandHandler(int, Stream*, bool)+0x29f)[0x4d7675] condor_startd(DaemonCore::HandleReq(Stream*, Stream*)+0x3393)[0x4eb671] condor_startd(DaemonCore::HandleReqSocketHandler(Stream*)+0x99)[0x4ec287] condor_startd(DaemonCore::CallSocketHandler_worker(int, bool, Stream*)+0x279)[0x4ebffb] condor_startd(DaemonCore::CallSocketHandler_worker_demarshall(void*)+0x39)[0x4ec1e3] condor_startd(CondorThreads::pool_add(void (*)(void*), void*, int*, char const*)+0x3f)[0x579acd] condor_startd(DaemonCore::CallSocketHandler(int&, bool)+0x1cd)[0x4de445] condor_startd(DaemonCore::Driver()+0x1876)[0x4dfd3c] condor_startd(main+0x1917)[0x4f7785] /lib64/libc.so.6(__libc_start_main+0xf4)[0x34c301d994] condor_startd[0x490169]   ```  [Comment 5](show_bug.cgi?id=540545#c5)  Matthew Farrellee    2009-11-25 15:49:57 UTC  ``` NOTE (thanks GregT for the reminder): The check for WANT_SUSPEND is an EvalBool, which means WANT_SUSPEND evaluating to UNDEFINED results in this assertion.  Debug with: WANT_SUSPEND = debug($(WANT_SUSPEND))  The assertion may be misguided. It attempts to assert that WANT_SUSPEND is set, and cannot distinguish between a WANT_SUSPEND that evaluates to UNDEFINED vs was never set.   ```  [Comment 6](show_bug.cgi?id=540545#c6)  Matthew Farrellee    2009-11-25 15:53:32 UTC  ``` $ condor_config_val -v WANT_SUSPEND WANT_SUSPEND: debug(( (TARGET.ImageSize <  (15 * 1024)) || ((KeyboardIdle < 60) == False) || (TARGET.JobUniverse == 5) ) && ( ( (KeyboardIdle < 60) || ( (CpuBusyTime > 2 * 60) && (CurrentTime - JobStart) > 90 ) ) ))  I would suspect JobStart, aka ATTR_JOB_START   ```  [Comment 7](show_bug.cgi?id=540545#c7)  Matthew Farrellee    2009-11-25 15:55:43 UTC  ``` Indeed JobStart is evaluating to UNDEFINED  StartLog:  11/25 15:49:27 Classad debug: ImageSize --> ERROR 11/25 15:49:27 Classad debug: TARGET.ImageSize --> 22 11/25 15:49:27 Classad debug: KeyboardIdle --> ERROR 11/25 15:49:27 Classad debug: KeyboardIdle --> 66 11/25 15:49:27 Classad debug: CpuBusyTime --> ERROR 11/25 15:49:27 Classad debug: CpuBusyTime --> 318 11/25 15:49:27 Classad debug: CurrentTime --> 1259182167 11/25 15:49:27 Classad debug: JobStart --> UNDEFINED 11/25 15:49:27 Classad debug: debug(((TARGET.ImageSize < (15 * 1024)) || ((KeyboardIdle < 60) == FALSE) || (TARGET.JobUniverse == 5)) && (((KeyboardIdle < 60) || ((CpuBusyTime > 2 * 60) && (CurrentTime - JobStart) > 90)))) --> UNDEFINED 11/25 15:49:27 ERROR "Can't find WANT_SUSPEND in internal ClassAd" at line 1261 in file Resource.cpp   ```  [Comment 8](show_bug.cgi?id=540545#c8)  Matthew Farrellee    2009-11-25 16:11:02 UTC  ``` With debugging,  $ grep -e "STARTING UP" -e "signal 11" MasterLog; tail -n1 MasterLog 11/25 13:49:56 ** condor_master (CONDOR_MASTER) STARTING UP 11/25 14:06:09 The STARTD (pid 15559) died due to signal 11 (Segmentation fault) 11/25 14:27:46 The STARTD (pid 12992) died due to signal 11 (Segmentation fault) 11/25 14:49:01 The STARTD (pid 28825) died due to signal 11 (Segmentation fault) 11/25 15:10:41 The STARTD (pid 11562) died due to signal 11 (Segmentation fault) 11/25 15:38:20 The STARTD (pid 27427) died due to signal 11 (Segmentation fault) 11/25 15:49:27 The STARTD (pid 29229) died due to signal 11 (Segmentation fault) 11/25 16:06:40 ProcAPI::getProcInfo() pid 16745 does not exist. $ grep "JobStart --> UNDEFINED" StartLog 11/25 15:49:27 Classad debug: JobStart --> UNDEFINED   ```  [Comment 9](show_bug.cgi?id=540545#c9)  Matthew Farrellee    2009-11-25 16:38:53 UTC  ``` Proposed workaround:  $ grep ActivationTimer ~condor/condor_config.overrides ActivationTimer = ifThenElse(JobStart =!= UNDEFINED, (CurrentTime - JobStart), 0)   ```  [Comment 10](show_bug.cgi?id=540545#c10)  Matthew Farrellee    2009-11-25 16:46:47 UTC  ``` This crash was only happening when the evaluation of WANT_SUSPEND made it to evaluation of JobStart, which was protected by KeyboardIdle and CpuBusyTime.  The crash can be easily reproduced with: WANT_SUSPEND = (CurrentTime - JobStart) < 90  JobStart is defined by a claim with an active job in the startd. It is not always present, making it a dangerous choice for default policy.   ```  [Comment 11](show_bug.cgi?id=540545#c11)  Matthew Farrellee    2009-11-25 17:53:27 UTC  ``` Two actions on this:  1) Update the assertion to differentiate between not present and evaluating to UNDEFINED 2) Update the default configuration to protect access to JobStart   ```  [Comment 12](show_bug.cgi?id=540545#c12)  Matthew Farrellee    2009-11-25 18:01:53 UTC  ``` This bug has likely been around for a very long time: Activation timer showed up in 1998 (git show 3cef52db). The conditional setting of ATTR_JOB_START has been around since at least 2003 (see V6_5-branch).   ```  [Comment 13](show_bug.cgi?id=540545#c13)  Matthew Farrellee    2009-11-25 18:09:03 UTC  ``` Upstream ticket: <http://condor-wiki.cs.wisc.edu/index.cgi/tktview?tn=1001>   ```  [Comment 14](show_bug.cgi?id=540545#c14)  Matthew Farrellee    2009-12-18 20:59:45 UTC  ``` commit 745a047243d94d23ac286fd604c57542f3f3cd15 Author: Matthew Farrellee <matt@> Date:   Fri Dec 18 15:50:16 2009 -0500      Protect ActivationTimer from going to UNDEFINED (#1001)  diff --git a/src/condor_examples/condor_config.generic b/src/condor_examples/condor_config.generic index 4a49eae..3d93b5a 100644 --- a/src/condor_examples/condor_config.generic +++ b/src/condor_examples/condor_config.generic @@ -622,7 +622,7 @@ MINUTE    = 60  HOUR    = (60 * $(MINUTE))  StateTimer = (CurrentTime - EnteredCurrentState)  ActivityTimer = (CurrentTime - EnteredCurrentActivity) -ActivationTimer = (CurrentTime - JobStart) +ActivationTimer = ifThenElse(JobStart =!= UNDEFINED, (CurrentTime - JobStart), 0)  LastCkpt   = (CurrentTime - LastPeriodicCheckpoint)    ##  The JobUniverse attribute is just an int.  These macros can be   ```  [Comment 15](show_bug.cgi?id=540545#c15)  Matthew Farrellee    2009-12-18 21:00:00 UTC  ``` commit 6d4b6e5119261851e17996e5121c42b7c3a045fe Author: Matthew Farrellee <matt@> Date:   Fri Dec 18 15:55:12 2009 -0500      WANT_SUSPEND that is UNDEFINED, either by being absent or evaluating to UNDEFINED, now means FALSE. It used to mean EXCEPT! (#1001)  diff --git a/src/condor_startd.V6/Resource.cpp b/src/condor_startd.V6/Resource.cpp index 6a23889..76da635 100644 --- a/src/condor_startd.V6/Resource.cpp +++ b/src/condor_startd.V6/Resource.cpp @@ -1255,10 +1255,8 @@ Resource::wants_suspend( void )       if( r_classad->EvalBool( "WANT_SUSPEND",                            r_cur->ad(),                            want_suspend ) == 0) { -           // This should never happen, since we already check -           // when we're constructing the internal config classad -           // if we've got this defined. -Derek Wright 4/12/00 -        EXCEPT( "Can't find WANT_SUSPEND in internal ClassAd" ); +           // UNDEFINED means FALSE for WANT_SUSPEND +        want_suspend = false;       }    }    return want_suspend;   ```  [Comment 16](show_bug.cgi?id=540545#c16)  Matthew Farrellee    2010-01-04 18:22:11 UTC  ``` Fixed in 7.4.2-0.1   ```  [Comment 17](show_bug.cgi?id=540545#c17)  Martin Kudlej    2010-03-19 15:10:54 UTC  ``` Tested on Rhel 5.5/4.8 x x86_64/i386 with condor-7.4.3-0.5. I submitted 100000 simple job from [comment #1](show_bug.cgi?id=540545#c1) and another 100000 simple jobs to condor with "WANT_SUSPEND = (CurrentTime - JobStart) < 90" in configuration. I didn't see any error or coredump from [comment #1](show_bug.cgi?id=540545#c1)  -->VERIFIED   ```  [Comment 18](show_bug.cgi?id=540545#c18)  Florian Nadge    2010-10-08 10:19:30 UTC  ```      Technical note added. If any revisions are required, please edit the "Technical Notes" field     accordingly. All revisions will be proofread by the Engineering Content Services team.          New Contents: Previously, if the user submitted around 10000 simple jobs "sleep 3", condor_startd and condor_shadow failed. With this update, condor_startd and condor_shadow work as expected, even with large numbers of jobs.   ```  [Comment 19](show_bug.cgi?id=540545#c19)  Florian Nadge    2010-10-08 11:36:14 UTC  ```      Technical note updated. If any revisions are required, please edit the "Technical Notes" field     accordingly. All revisions will be proofread by the Engineering Content Services team.          Diffed Contents: @@ -1 +1 @@ -Previously, if the user submitted around 10000 simple jobs "sleep 3", condor_startd and condor_shadow failed. With this update, condor_startd and condor_shadow work as expected, even with large numbers of jobs.+Previously, condor_startd and condor_shadow failed because default the value of WANT_SUSPEND policy becomes to UNDEFINED.  With this update, condor_startd and condor_shadow work as expected, even if WANT_SUSPEND evaluates to UNDEFINED.   ```  [Comment 20](show_bug.cgi?id=540545#c20)  Matthew Farrellee    2010-10-08 11:39:36 UTC  ```      Technical note updated. If any revisions are required, please edit the "Technical Notes" field     accordingly. All revisions will be proofread by the Engineering Content Services team.          Diffed Contents: @@ -1 +1,4 @@ -Previously, condor_startd and condor_shadow failed because default the value of WANT_SUSPEND policy becomes to UNDEFINED.  With this update, condor_startd and condor_shadow work as expected, even if WANT_SUSPEND evaluates to UNDEFINED.+C: The default WANT_SUSPEND policy included JobStart, which in some cases may be UNDEFINED. +C: The WANT_SUSPEND policy expression would evaluated to UNDEFINED when JobStart was also not defined. A WANT_SUSPEND of UNDEFINED was considered an error, and the Startd would exit. +F: Workaround by removing JobStart from WANT_SUSPEND. Fixed by making WANT_SUSPEND evaluating to UNDEFINED equivalent to evaluating to FALSE. +R: Startd now treats a WANT_SUSPEND that evaluates to UNDEFINED as if it evaluated to FALSE.   ```  [Comment 21](show_bug.cgi?id=540545#c21)  Martin Prpič    2010-10-10 11:23:58 UTC  ```      Technical note updated. If any revisions are required, please edit the "Technical Notes" field     accordingly. All revisions will be proofread by the Engineering Content Services team.          Diffed Contents: @@ -1,4 +1 @@ -C: The default WANT_SUSPEND policy included JobStart, which in some cases may be UNDEFINED. +The default 'WANT_SUSPEND' policy included the JobStart attribute, which in some cases was 'UNDEFINED'. A 'WANT_SUSPEND' with the value 'UNDEFINED' was considered an error and startd would exit. With this update, the JobStart attribute was removed from 'WANT_SUSPEND'. Startd now treats a 'WANT_SUSPEND' that evaluates to 'UNDEFINED' as if it evaluated to 'FALSE'.-C: The WANT_SUSPEND policy expression would evaluated to UNDEFINED when JobStart was also not defined. A WANT_SUSPEND of UNDEFINED was considered an error, and the Startd would exit. -F: Workaround by removing JobStart from WANT_SUSPEND. Fixed by making WANT_SUSPEND evaluating to UNDEFINED equivalent to evaluating to FALSE. -R: Startd now treats a WANT_SUSPEND that evaluates to UNDEFINED as if it evaluated to FALSE.   ```  [Comment 23](show_bug.cgi?id=540545#c23)  errata-xmlrpc    2010-10-14 16:12:48 UTC  ``` An advisory has been issued which should help the problem described in this bug report. This report is therefore being closed with a resolution of ERRATA. For more information on therefore solution and/or where to find the updated files, please follow the link below. You may reopen this bug report if the solution does not work for you.  <http://rhn.redhat.com/errata/RHSA-2010-0773.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=540545&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)


