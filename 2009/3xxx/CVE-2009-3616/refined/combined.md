=== Content from bugzilla.redhat.com_88db57e0_20250125_152344.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D505641)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D505641)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D505641)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 505641

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 505641**](show_bug.cgi?id=505641)
(CVE-2009-3616)
- [CVE-2009-3616](https://access.redhat.com/security/cve/CVE-2009-3616) Remote VNC client can cause any QEMU VNC server to crash with a double-free

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2009-3616 Remote VNC client can cause any QEMU VNC server to crash with a...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2009-3616 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat Enterprise Linux 5 | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat Enterprise Linux 5 "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | kvm | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 5.4 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | low | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | rc | | [Target Release](page.cgi?id=fields.html#target_release): | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Eduardo Habkost | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Lawrence Lim | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [505640](show_bug.cgi?id=505640) [537902](show_bug.cgi?id=537902) [537903](show_bug.cgi?id=537903) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=505641&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=505641&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2009-06-12 17:53 UTC by Daniel Berrangé | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2014-03-26 00:58 UTC ([History](show_activity.cgi?id=505641)) | | [CC List:](page.cgi?id=fields.html#cclist) | 15 users (show)  bressers cpelland ehabkost green lihuang ovirt-maint Rhev-m-bugs security-response-team sghosh tburke thoger tools-bugs vdanen virt-maint ykaul | | Fixed In Version: | kvm-83-82.el5 | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: | [505640](show_bug.cgi?id=505640) | | | Environment: |  | | | Last Closed: | 2009-09-02 09:33:36 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | | [Dependent Products:](page.cgi?id=fields.html#dependent_products "Other Products that are affected by this bug.") | Red Hat Developer Toolset Red Hat OpenStack Red Hat Software Collections | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | | [**fix use after free.**](attachment.cgi?id=348075 "View the content of the attachment") (5.37 KB, patch)  [2009-06-16 10:10 UTC](#attach_348075 "Go to the comment associated with the attachment"), Gerd Hoffmann | *no flags* | [Details](attachment.cgi?id=348075&action=edit) | [Diff](attachment.cgi?id=348075&action=diff) | | [**fix more use-after-free cases**](attachment.cgi?id=348096 "View the content of the attachment") (1.43 KB, patch)  [2009-06-16 12:01 UTC](#attach_348096 "Go to the comment associated with the attachment"), Gerd Hoffmann | *no flags* | [Details](attachment.cgi?id=348096&action=edit) | [Diff](attachment.cgi?id=348096&action=diff) | | [**The two fixes combined into one patch.**](attachment.cgi?id=348099 "View the content of the attachment") (6.36 KB, patch)  [2009-06-16 12:22 UTC](#attach_348099 "Go to the comment associated with the attachment"), Gerd Hoffmann | *no flags* | [Details](attachment.cgi?id=348099&action=edit) | [Diff](attachment.cgi?id=348099&action=diff) | | [**Delibrarely broken VNC audio client to crash server**](attachment.cgi?id=348111 "View the content of the attachment") (1.31 KB, patch)  [2009-06-16 13:50 UTC](#attach_348111 "Go to the comment associated with the attachment"), Daniel Berrangé | *no flags* | [Details](attachment.cgi?id=348111&action=edit) | [Diff](attachment.cgi?id=348111&action=diff) | | [Show Obsolete](#a0) (2) [View All](attachment.cgi?bugid=505641&action=viewall&hide_obsolete=1) | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHEA-2009:1272](https://access.redhat.com/errata/RHEA-2009%3A1272) | 0 | normal | SHIPPED\_LIVE | New package: kvm | 2009-09-01 09:34:32 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=505641#c0)  Daniel Berrangé    2009-06-12 17:53:24 UTC  ``` +++ This bug was initially created as a clone of [Bug #505640](show_bug.cgi?id=505640) +++  Description of problem: I was attempting the implement the client side of QEMU's VNC extension for capturing audio streams. In doing so I typo'd and sent a uint8_t instead of a uint16_t for one of the fields. QEMU noticed the bogus data, printed a message and then crashed with  double-free memory corruption. It is trivially reproduceable and allows a remote client to crash any QEMU instance running VNC I'm not sure whether this has security implications or not, so marked this bug security sensitive.   Version-Release number of selected component (if applicable): qemu-0.10-16.fc11  How reproducible: Always  Steps to Reproduce: 1. Run QEMU with     /usr/bin/qemu -cdrom boot.iso -soundhw ac97 -vnc :5  2. Take a regular VNC client and modify its code to... 3. Send server a SetEncodings message including psuedo-encoding -259 4. Wait for server to send back a framebuffer update with encoding -259 5. Send the following 3 bytes to the server      255     1     0  Actual results: The server will now crash  Invalid audio message 1 Msg: 1 *** glibc detected *** /usr/bin/qemu: double free or corruption (out): 0x000000000109e4a0 *** Missing separate debuginfo for /lib64/libgcc_s.so.1 Try: yum --enablerepo='*-debuginfo' install /usr/lib/debug/.build-id/2d/71efecf2876da5ca07c3b5acf28fe281c96942.debug ======= Backtrace: ========= /lib64/libc.so.6[0x33b0075a26] /usr/bin/qemu[0x496c83] /usr/bin/qemu[0x4983da] /usr/bin/qemu[0x496e8b] /usr/bin/qemu[0x409572] /usr/bin/qemu[0x40c59a] /lib64/libc.so.6(__libc_start_main+0xfd)[0x33b001ea2d] /usr/bin/qemu[0x406e39] ======= Memory map: ======== 00400000-005bc000 r-xp 00000000 fd:00 426968                             /usr/bin/qemu 007bc000-007c1000 rw-p 001bc000 fd:00 426968                             /usr/bin/qemu 007c1000-00b99000 rw-p 007c1000 00:00 0  00b99000-00b9a000 rwxp 00b99000 00:00 0  00b9a000-00bb0000 rw-p 00b9a000 00:00 0  00f68000-010bf000 rw-p 00f68000 00:00 0                                  [heap] 41bfc000-440fc000 rwxp 41bfc000 00:00 0  33afc00000-33afc1f000 r-xp 00000000 fd:00 408034                         /lib64/ld-2.10.1.so 33afe1e000-33afe1f000 r--p 0001e000 fd:00 408034                         /lib64/ld-2.10.1.so 33afe1f000-33afe20000 rw-p 0001f000 fd:00 408034                         /lib64/ld-2.10.1.so 33b0000000-33b0164000 r-xp 00000000 fd:00 408128                         /lib64/libc-2.10.1.so 33b0164000-33b0364000 ---p 00164000 fd:00 408128                         /lib64/libc-2.10.1.so 33b0364000-33b0368000 r--p 00164000 fd:00 408128                         /lib64/libc-2.10.1.so 33b0368000-33b0369000 rw-p 00168000 fd:00 408128                         /lib64/libc-2.10.1.so 33b0369000-33b036e000 rw-p 33b0369000 00:00 0  33b0400000-33b0482000 r-xp 00000000 fd:00 844388                         /lib64/libm-2.10.1.so 33b0482000-33b0682000 ---p 00082000 fd:00 844388                         /lib64/libm-2.10.1.so 33b0682000-33b0683000 r--p 00082000 fd:00 844388                         /lib64/libm-2.10.1.so 33b0683000-33b0684000 rw-p 00083000 fd:00 844388                         /lib64/libm-2.10.1.so 33b0800000-33b0802000 r-xp 00000000 fd:00 844364                         /lib64/libdl-2.10.1.so 33b0802000-33b0a02000 ---p 00002000 fd:00 844364                         /lib64/libdl-2.10.1.so 33b0a02000-33b0a03000 r--p 00002000 fd:00 844364                         /lib64/libdl-2.10.1.so 33b0a03000-33b0a04000 rw-p 00003000 fd:00 844364                         /lib64/libdl-2.10.1.so 33b0c00000-33b0c17000 r-xp 00000000 fd:00 844472                         /lib64/libpthread-2.10.1.so 33b0c17000-33b0e16000 ---p 00017000 fd:00 844472                         /lib64/libpthread-2.10.1.so 33b0e16000-33b0e17000 r--p 00016000 fd:00 844472                         /lib64/libpthread-2.10.1.so 33b0e17000-33b0e18000 rw-p 00017000 fd:00 844472                         /lib64/libpthread-2.10.1.so 33b0e18000-33b0e1c000 rw-p 33b0e18000 00:00 0  33b1000000-33b1015000 r-xp 00000000 fd:00 956376                         /lib64/libz.so.1.2.3 33b1015000-33b1214000 ---p 00015000 fd:00 956376                         /lib64/libz.so.1.2.3 33b1214000-33b1215000 rw-p 00014000 fd:00 956376                         /lib64/libz.so.1.2.3 33b1400000-33b1407000 r-xp 00000000 fd:00 844474                         /lib64/librt-2.10.1.so 33b1407000-33b1606000 ---p 00007000 fd:00 844474                         /lib64/librt-2.10.1.so 33b1606000-33b1607000 r--p 00006000 fd:00 844474                         /lib64/librt-2.10.1.so 33b1607000-33b1608000 rw-p 00007000 fd:00 844474                         /lib64/librt-2.10.1.so 33b1800000-33b181c000 r-xp 00000000 fd:00 408070                         /lib64/libselinux.so.1 33b181c000-33b1a1b000 ---p 0001c000 fd:00 408070                         /lib64/libselinux.so.1 33b1a1b000-33b1a1c000 r--p 0001b000 fd:00 408070                         /lib64/libselinux.so.1 33b1a1c000-33b1a1d000 rw-p 0001c000 fd:00 408070                         /lib64/libselinux.so.1 33b1a1d000-33b1a1e000 rw-p 33b1a1d000 00:00 0  33b2000000-33b206b000 r-xp 00000000 fd:00 163003                         /usr/lib64/libSDL-1.2.so.0.11.2 33b206b000-33b226a000 ---p 0006b000 fd:00 163003                         /usr/lib64/libSDL-1.2.so.0.11.2 33b226a000-33b226d000 rw-p 0006a000 fd:00 163003                         /usr/lib64/libSDL-1.2.so.0.11.2 33b226d000-33b229d000 rw-p 33b226d000 00:00 0  33b2800000-33b2804000 r-xp 00000000 fd:00 844273                         /lib64/libcap.so.2.16 33b2804000-33b2a03000 ---p 00004000 fd:00 844273                         /lib64/libcap.so.2.16 33b2a03000-33b2a04000 rw-p 00003000 fd:00 844273                         /lib64/libcap.so.2.16 33b2c00000-33b2c02000 r-xp 00000000 fd:00 427455                         /usr/lib64/libXau.so.6.0.0 33b2c02000-33b2e01000 ---p 00002000 fd:00 427455                         /usr/lib64/libXau.so.6.0.0 33b2e01000-33b2e02000 rw-p 00001000 fd:00 427455                         /usr/lib64/libXau.so.6.0.0 33b3000000-33b301a000 r-xp 00000000 fd:00 430096                         /usr/lib64/libxcb.so.1.1.0 33b301a000-33b321a000 ---p 0001a000 fd:00 430096                         /usr/lib64/libxcb.so.1.1.0 33b321a000-33b321b000 rw-p 0001a000 fd:00 430096                         /usr/lib64/libxcb.so.1.1.0 33b3400000-33b343d000 r-xp 00000000 fd:00 844324                         /lib64/libdbus-1.so.3.4.0 33b343d000-33b363c000 ---p 0003d000 fd:00 844324                         /lib64/libdbus-1.so.3.4.0 33b363c000-33b363d000 r--p 0003c000 fd:00 844324                         /lib64/libdbus-1.so.3.4.0 33b363d000-33b363e000 rw-p 0003d000 fd:00 844324                         /lib64/libdbus-1.so.3.4.0 33b3800000-33b3935000 r-xp 00000000 fd:00 430236                         /usr/lib64/libX11.so.6.2.0 33b3935000-33b3b35000 ---p 00135000 fd:00 430236                         /usr/lib64/libX11.so.6.2.0 33b3b35000-33b3b3b000 rw-p 00135000 fd:00 430236                         /usr/lib64/libX11.so.6.2.0 33b4400000-33b4411000 r-xp 00000000 fd:00 429607                         /usr/lib64/libXext.so.6.4.0 33b4411000-33b4611000 ---p 00011000 fd:00 429607                         /usr/lib64/libXext.so.6.4.0 33b4611000-33b4612000 rw-p 00011000 fd:00 429607                         /usr/lib64/libXext.so.6.4.0 33b5c00000-33b5c15000 r-xp 00000000 fd:00 956393                         /lib64/libresolv-2.10.1.so 33b5c15000-33b5e15000 ---p 00015000 fd:00 956393                         /lib64/libresolv-2.10.1.so 33b5e15000-33b5e16000 r--p 00015000 fd:00 956393                         /lib64/libresolv-2.10.1.so 33b5e16000-33b5e17000 rw-p 00016000 fd:00 956393                         /lib64/libresolv-2.10.1.so 33b5e17000-33b5e19000 rw-p 33b5e17000 00:00 0  33b6000000-33b6003000 r-xp 00000000 fd:00 864380                         /lib64/libuuid.so.1.2 33b6003000-33b6203000 ---p 00003000 fd:00 864380                         /lib64/libuuid.so.1.2 33b6203000-33b6204000 rw-p 00003000 fd:00 864380                         /lib64/libuuid.so.1.2 33b8400000-33b8419000 r-xp 00000000 fd:00 956383                         /lib64/libgcc_s-4.4.0-20090506.so.1 33b8419000-33b8619000 ---p 00019000 fd:00 956383                         /lib64/libgcc_s-4.4.0-20090506.so.1 33b8619000-33b861a000 rw-p 00019000 fd:00 956383                         /lib64/libgcc_s-4.4.0-20090506.so.1 33ba400000-33ba407000 r-xp 00000000 fd:00 161524                         /usr/lib64/libSM.so.6.0.0 33ba407000-33ba607000 ---p 00007000 fd:00 161524                         /usr/lib64/libSM.so.6.0.0 33ba607000-33ba608000 rw-p 00007000 fd:00 161524                         /usr/lib64/libSM.so.6.0.0 33bac00000-33bac17000 r-xp 00000000 fd:00 158488                         /usr/lib64/libICE.so.6.3.0 33bac17000-33bae17000 ---p 00017000 fd:00 158488                         /usr/lib64/libICE.so.6.3.0 33bae17000-33bae18000 rw-p 00017000 fd:00 158488                         /usr/lib64/libICE.so.6.3.0 33bae18000-33bae1c000 rw-p 33bae18000 00:00 0  33bc200000-33bc206000 r-xp 00000000 fd:00 431351                         /usr/lib64/libgdbm.so.2.0.0 33bc206000-33bc405000 ---p 00006000 fd:00 431351                         /usr/lib64/libgdbm.so.2.0.0 33bc405000-33bc406000 rw-p 00005000 fd:00 431351                         /usr/lib64/libgdbm.so.2.0.0 33bc600000-33bc608000 r-xp 00000000 fd:00 844403                         /lib64/libwrap.so.0.7.6 33bc608000-33bc807000 ---p 00008000 fd:00 844403                         /lib64/libwrap.so.0.7.6 33bc807000-33bc809000 rw-p 00007000 fd:00 844403                         /lib64/libwrap.so.0.7.6 33bca00000-33bca0e000 r-xp 00000000 fd:00 425528                         /usr/lib64/liblber-2.4.so.2.4.1 33bca0e000-33bcc0e000 ---p 0000e000 fd:00 425528                         /usr/lib64/liblber-2.4.so.2.4.1 33bcc0e000-33bcc0f000 rw-p 0000e000 fd:00 425528                         /usr/lib64/liblber-2.4.so.2.4.1 33bce00000-33bce05000 r-xp 00000000 fd:00 155202                         /usr/lib64/libasyncns.so.0.3.1 33bce05000-33bd004000 ---p 00005000 fd:00 155202                         /usr/lib64/libasyncns.so.0.3.1 33bd004000-33bd005000 rw-p 00004000 fd:00 155202                         /usr/lib64/libasyncns.so.0.3.1 33bd200000-33bd259000 r-xp 00000000 fd:00 158446                         /usr/lib64/libpulsecommon-0.9.15.so 33bd259000-33bd458000 ---p 00059000 fd:00 158446                         /usr/lib64/libpulsecommon-0.9.15.so 33bd458000-33bd45a000 rw-p 00058000 fd:00 158446                         /usr/lib64/libpulsecommon-0.9.15.so 33bd600000-33bd647000 r-xp 00000000 fd:00 427502                         /usr/lib64/libpulse.so.0.8.0 33bd647000-33bd847000 ---p 00047000 fd:00 427502                         /usr/lib64/libpulse.so.0.8.0 33bd847000-33bd849000 rw-p 00047000 fd:00 427502                         /usr/lib64/libpulse.so.0.8.0 33bda00000-33bda2b000 r-xp 00000000 fd:00 162798                         /usr/lib64/libgssapi_krb5.so.2.2 33bda2b000-33bdc2a000 ---p 0002b000 fd:00 162798                         /usr/lib64/libgssapi_krb5.so.2.2 33bdc2a000-33bdc2c000 rw-p 0002a000 fd:00 162798                         /usr/lib64/libgssapi_krb5.so.2.2 33be600000-33be64b000 r-xp 00000000 fd:00 163001                         /usr/lib64/libssl.so.0.9.8k 33be64b000-33be84a000 ---p 0004b000 fd:00 163001                         /usr/lib64/libssl.so.0.9.8k 33be84a000-33be851000 rw-p 0004a000 fd:00 163001                         /usr/lib64/libssl.so.0.9.8k 33bea00000-33bea02000 r-xp 00000000 fd:00 956398                         /lib64/libutil-2.10.1.so 33bea02000-33bec01000 ---p 00002000 fd:00 956398                         /lib64/libutil-2.10.1.so 33bec01000-33bec02000 r--p 00001000 fd:00 956398                         /lib64/libutil-2.10.1.so 33bec02000-33bec03000 rw-p 00002000 fd:00 956398                         /lib64/libutil-2.10.1.so 33bee00000-33bef5d000 r-xp 00000000 fd:00 163000                         /usr/lib64/libcrypto.so.0.9.8k 33bef5d000-33bf15c000 ---p 0015d000 fd:00 163000                         /usr/lib64/libcrypto.so.0.9.8k 33bf15c000-33bf182000 rw-p 0015c000 fd:00 163000                         /usr/lib64/libcrypto.so.0.9.8k 33bf182000-33bf186000 rw-p 33bf182000 00:00 0  33bf200000-33bf203000 r-xp 00000000 fd:00 956396                         /lib64/libgpg-error.so.0.4.0 33bf203000-33bf402000 ---p 00003000 fd:00 956396                         /lib64/libgpg-error.so.0.4.0 33bf402000-33bf403000 rw-p 00002000 fd:00 956396                         /lib64/libgpg-error.so.0.4.0 33bfa00000-33bfa70000 r-xp 00000000 fd:00 956397                         /lib64/libgcrypt.so.11.5.2 33bfa70000-33bfc6f000 ---p 00070000 fd:00 956397                         /lib64/libgcrypt.so.11.5.2 33bfc6f000-33bfc73000 rw-p 0006f000 fd:00 956397                         /lib64/libgcrypt.so.11.5.2 33c1a00000-33c1a16000 r-xp 00000000 fd:00 844339                         /lib64/libnsl-2.10.1.so 33c1a16000-33c1c16000 ---p 00016000 fd:00 844339                         /lib64/libnsl-2.10.1.so 33c1c16000-33c1c17000 r--p 00016000 fd:00 844339                         /lib64/libnsl-2.10.1.so 33c1c17000-33c1c18000 rw-p 00017000 fd:00 844339                         /lib64/libnsl-2.10.1.so 33c1c18000-33c1c1a000 rw-p 33c1c18000 00:00 0  33c1e00000-33c1e05000 r-xp 00000000 fd:00 425807                         /usr/lib64/libXtst.so.6.1.0 33c1e05000-33c2005000 ---p 00005000 fd:00 425807                         /usr/lib64/libXtst.so.6.1.0 33c2005000-33c2006000 rw-p 00005000 fd:00 425807                         /usr/lib64/libXtst.so.6.1.0 33c2600000-33c269f000 r-xp 00000000 fd:00 163002                         /usr/lib64/libgnutls.so.26.11.7 33c269f000-33c289f000 ---p 0009f000 fd:00 163002                         /usr/lib64/libgnutls.so.26.11.7 33c289f000-33c28aa000 rw-p 0009f000 fd:00 163002                         /usr/lib64/libgnutls.so.26.11.7 33c2a00000-33c2a10000 r-xp 00000000 fd:00 430214                         /usr/lib64/libtasn1.so.3.1.2 33c2a10000-33c2c10000 ---p 00010000 fd:00 430214                         /usr/lib64/libtasn1.so.3.1.2 33c2c10000-33c2c11000 rw-p 00010000 fd:00 430214                         /usr/lib64/libtasn1.so.3.1.2 33c6a00000-33c6add000 r-xp 00000000 fd:00 956395                         /lib64/libasound.so.2.0.0 33c6add000-33c6cdc000 ---p 000dd000 fd:00 956395                         /lib64/libasound.so.2.0.0 33c6cdc000-33c6ce4000 rw-p 000dc000 fd:00 956395                         /lib64/libasound.so.2.0.0 37f1a00000-37f1a19000 r-xp 00000000 fd:00 157602                         /usr/lib64/libsasl2.so.2.0.22 37f1a19000-37f1c19000 ---p 00019000 fd:00 157602                         /usr/lib64/libsasl2.so.2.0.22 37f1c19000-37f1c1a000 rw-p 00019000 fd:00 157602                         /usr/lib64/libsasl2.so.2.0.22 7f64fc000000-7f64fc021000 rw-p 7f64fc000000 00:00 0  7f64fc021000-7f6500000000 ---p 7f64fc021000 00:00 0  7f6501a03000-7f6501a04000 ---p 7f6501a03000 00:00 0  7f6501a04000-7f6502404000 rw-p 7f6501a04000 00:00 0  7f6503158000-7f6503159000 rw-p 7f6503158000 00:00 0  7f6503286000-7f6503327000 rw-p 7f6503286000 00:00 0  7f6503327000-7f650332a000 r-xp 00000000 fd:00 429437                     /usr/lib64/libdes425.so.3.0 7f650332a000-7f6503529000 ---p 00003000 fd:00 429437                     /usr/lib64/libdes425.so.3.0 7f6503529000-7f650352a000 rw-p 00002000 fd:00 429437                     /usr/lib64/libdes425.so.3.0 7f650352a000-7f6503544000 r-xp 00000000 fd:00 425581                     /usr/lib64/libkrb4.so.2.0 7f6503544000-7f6503744000 ---p 0001a000 fd:00 425581                     /usr/lib64/libkrb4.so.2.0 7f6503744000-7f6503746000 rw-p 0001a000 fd:00 425581                     /usr/lib64/libkrb4.so.2.0 7f6503746000-7f650374b000 rw-p 7f6503746000 00:00 0  7f650374b000-7f6503751000 r-xp 00000000 fd:00 449066                     /usr/lib64/sasl2/libkerberos4.so.2.0.22 7f6503751000-7f6503950000 ---p 00006000 fd:00 449066                     /usr/lib64/sasl2/libkerberos4.so.2.0.22 7f6503950000-7f6503951000 rw-p 00005000 fd:00 449066                     /usr/lib64/sasl2/libkerberos4.so.2.0.22 7f6503951000-7f6503955000 r-xp 00000000 fd:00 450859                     /usr/lib64/sasl2/libcrammd5.so.2.0.22 7f6503955000-7f6503b55000 ---p 00004000 fd:00 450859                     /usr/lib64/sasl2/libcrammd5.so.2.0.22 7f6503b55000-7f6503b56000 rw-p 00004000 fd:00 450859                     /usr/lib64/sasl2/libcrammd5.so.2.0.22 7f6503b56000-7f6503b9a000 r-xp 00000000 fd:00 161564                     /usr/lib64/libldap-2.4.so.2.4.1 7f6503b9a000-7f6503d99000 ---p 00044000 fd:00 161564                     /usr/lib64/libldap-2.4.so.2.4.1 7f6503d99000-7f6503d9c000 rw-p 00043000 fd:00 161564                     /usr/lib64/libldap-2.4.so.2.4.1 7f6503d9c000-7f6503da0000 r-xp 00000000 fd:00 449078                     /usr/lib64/sasl2/libldapdb.so.2.0.22 7f6503da0000-7f6503f9f000 ---p 00004000 fd:00 449078                     /usr/lib64/sasl2/libldapdb.so.2.0.22 7f6503f9f000-7f6503fa0000 rw-p 00003000 fd:00 449078                     /usr/lib64/sasl2/libldapdb.so.2.0.22 7f6503fa0000-7f6503fa7000 r-xp 00000000 fd:00 449069                     /usr/lib64/sasl2/libgssapiv2.so.2.0.22 7f6503fa7000-7f65041a6000 ---p 00007000 fd:00 449069                     /usr/lib64/sasl2/libgssapiv2.so.2.0.22 7f65041a6000-7f65041a7000 rw-p 00006000 fd:00 449069                     /usr/lib64/sasl2/libgssapiv2.so.2.0.22 7f65041a7000-7f65041ab000 r-xp 00000000 fd:00 450474                     /usr/lib64/sasl2/libplain.so.2.0.22 7f65041ab000-7f65043aa000 ---p 00004000 fd:00 450474                     /usr/lib64/sasl2/libplain.so.2.0.22 7f65043aa000-7f65043ab000 rw-p 00003000 fd:00 450474                     /usr/lib64/sasl2/libplain.so.2.0.22 7f65043ab000-7f65043b3000 r-xp 00000000 fd:00 449072                     /usr/lib64/sasl2/libntlm.so.2.0.22 7f65043b3000-7f65045b2000 ---p 00008000 fd:00 449072                     /usr/lib64/sasl2/libntlm.so.2.0.22 7f65045b2000-7f65045b3000 rw-p 00007000 fd:00 449072                     /usr/lib64/sasl2/libntlm.so.2.0.22 7f65045b3000-7f65045b7000 r-xp 00000000 fd:00 450471                     /usr/lib64/sasl2/liblogin.so.2.0.22 7f65045b7000-7f65047b6000 ---p 00004000 fd:00 450471                     /usr/lib64/sasl2/liblogin.so.2.0.22 7f65047b6000-7f65047b7000 rw-p 00003000 fd:00 450471                     /usr/lib64/sasl2/liblogin.so.2.0.22 7f65047b7000-7f65047b9000 r-xp 00000000 fd:00 956392                     /lib64/libkeyutils-1.2.so 7f65047b9000-7f65049b8000 ---p 00002000 fd:00 956392                     /lib64/libkeyutils-1.2.so 7f65049b8000-7f65049b9000 rw-p 00001000 fd:00 956392                     /lib64/libkeyutils-1.2.so 7f65049b9000-7f65049c2000 r-xp 00000000 fd:00 430940                     /usr/lib64/libkrb5support.so.0.1 7f65049c2000-7f6504bc1000 ---p 00009000 fd:00 430940                     /usr/lib64/libkrb5support.so.0.1 7f6504bc1000-7f6504bc2000 rw-p 00008000 fd:00 430940                     /usr/lib64/libkrb5support.so.0.1 7f6504bc2000-7f6504be6000 r-xp 00000000 fd:00 162060                     /usr/lib64/libk5crypto.so.3.1 7f6504be6000-7f6504de6000 ---p 00024000 fd:00 162060                     /usr/lib64/libk5crypto.so.3.1 7f6504de6000-7f6504de8000 rw-p 00024000 fd:00 162060                     /usr/lib64/libk5crypto.so.3.1 7f6504de8000-7f6504e31000 r-xp 00000000 fd:00 161566                     /usr/lib64/libldap_r-2.4.so.2.4.1 7f6504e31000-7f6505031000 ---p 00049000 fd:00 161566                     /usr/lib64/libldap_r-2.4.so.2.4.1 7f6505031000-7f6505034000 rw-p 00049000 fd:00 161566                     /usr/lib64/libldap_r-2.4.so.2.4.1 7f6505034000-7f6505037000 rw-p 7f6505034000 00:00 0  7f6505037000-7f650503a000 r-xp 00000000 fd:00 956394                     /lib64/libcom_err.so.2.1 7f650503a000-7f6505239000 ---p 00003000 fd:00 956394                     /lib64/libcom_err.so.2.1 7f6505239000-7f650523a000 rw-p 00002000 fd:00 956394                     /lib64/libcom_err.so.2.1 7f650523a000-7f65052d5000 r-xp 00000000 fd:00 162171                     /usr/lib64/libkrb5.so.3.3 7f65052d5000-7f65054d5000 ---p 0009b000 fd:00 162171                     /usr/lib64/libkrb5.so.3.3 7f65054d5000-7f65054d9000 rw-p 0009b000 fd:00 162171                     /usr/lib64/libkrb5.so.3.3 7f65054d9000-7f65054fb000 r-xp 00000000 fd:00 161620                     /usr/lib64/libpq.so.5.1 7f65054fb000-7f65056fb000 ---p 00022000 fd:00 161620                     /usr/lib64/libpq.so.5.1 7f65056fb000-7f65056fd000 rw-p 00022000 fd:00 161620                     /usr/lib64/libpq.so.5.1 7f65056fd000-7f6505831000 r-xp 00000000 fd:00 2744066                    /usr/lib64/mysql/libmysqlclient.so.16.0.0 7f6505831000-7f6505a30000 ---p 00134000 fd:00 2744066                    /usr/lib64/mysql/libmysqlclient.so.16.0.0 7f6505a30000-7f6505a7d000 rw-p 00133000 fd:00 2744066                    /usr/lib64/mysql/libmysqlclient.so.16.0.0 7f6505a7d000-7f6505a7e000 rw-p 7f6505a7d000 00:00 0  7f6505a7e000-7f6505a84000 r-xp 00000000 fd:00 449075                     /usr/lib64/sasl2/libsql.so.2.0.22 7f6505a84000-7f6505c83000 ---p 00006000 fd:00 449075                     /usr/lib64/sasl2/libsql.so.2.0.22 7f6505c83000-7f6505c84000 rw-p 00005000 fd:00 449075                     /usr/lib64/sasl2/libsql.so.2.0.22 7f6505c84000-7f6505c88000 r-xp 00000000 fd:00 450216                     /usr/lib64/sasl2/libanonymous.so.2.0.22 7f6505c88000-7f6505e87000 ---p 00004000 fd:00 450216                     /usr/lib64/sasl2/libanonymous.so.2.0.22 7f6505e87000-7f6505e88000 rw-p 00003000 fd:00 450216                     /usr/lib64/sasl2/libanonymous.so.2.0.22 7f6505e88000-7f6505e94000 r-xp 00000000 fd:00 450862                     /usr/lib64/sasl2/libdigestmd5.so.2.0.22 7f6505e94000-7f6506093000 ---p 0000c000 fd:00 450862                     /usr/lib64/sasl2/libdigestmd5.so.2.0.22 7f6506093000-7f6506094000 rw-p 0000b000 fd:00 450862                     /usr/lib64/sasl2/libdigestmd5.so.2.0.22 7f6506094000-7f6506201000 r-xp 00000000 fd:00 844471                     /lib64/libdb-4.7.so 7f6506201000-7f6506400000 ---p 0016d000 fd:00 844471                     /lib64/libdb-4.7.so 7f6506400000-7f6506406000 rw-p 0016c000 fd:00 844471                     /lib64/libdb-4.7.so 7f6506406000-7f650640b000 r-xp 00000000 fd:00 450219                     /usr/lib64/sasl2/libsasldb.so.2.0.22 7f650640b000-7f650660a000 ---p 00005000 fd:00 450219                     /usr/lib64/sasl2/libsasldb.so.2.0.22 7f650660a000-7f650660b000 rw-p 00004000 fd:00 450219                     /usr/lib64/sasl2/libsasldb.so.2.0.22 7f650660b000-7f650660f000 r-xp 00000000 fd:00 844251                     /lib64/libattr.so.1.1.0 7f650660f000-7f650680e000 ---p 00004000 fd:00 844251                     /lib64/libattr.so.1.1.0 7f650680e000-7f650680f000 rw-p 00003000 fd:00 844251                     /lib64/libattr.so.1.1.0 7f650680f000-7f6506813000 r-xp 00000000 fd:00 430687                     /usr/lib64/libpulse-simple.so.0.0.2 7f6506813000-7f6506a12000 ---p 00004000 fd:00 430687                     /usr/lib64/libpulse-simple.so.0.0.2 7f6506a12000-7f6506a13000 rw-p 00003000 fd:00 430687                     /usr/lib64/libpulse-simple.so.0.0.2 7f6506a2d000-7f65120e2000 rw-p 7f6506a2d000 00:00 0  7f65120e2000-7f65120e7000 r-xp 00000000 fd:00 958096                     /lib64/libnss_dns-2.10.1.so 7f65120e7000-7f65122e6000 ---p 00005000 fd:00 958096                     /lib64/libnss_dns-2.10.1.so 7f65122e6000-7f65122e7000 r--p 00004000 fd:00 958096                     /lib64/libnss_dns-2.10.1.so 7f65122e7000-7f65122e8000 rw-p 00005000 fd:00 958096                     /lib64/libnss_dns-2.10.1.so 7f65122e8000-7f65122f4000 r-xp 00000000 fd:00 958097                     /lib64/libnss_files-2.10.1.so 7f65122f4000-7f65124f3000 ---p 0000c000 fd:00 958097                     /lib64/libnss_files-2.10.1.so 7f65124f3000-7f65124f4000 r--p 0000b000 fd:00 958097                     /lib64/libnss_files-2.10.1.so 7f65124f4000-7f65124f5000 rw-p 0000c000 fd:00 958097                     /lib64/libnss_files-2.10.1.so 7f65124f5000-7f65124f8000 rw-p 7f65124f5000 00:00 0  7f65124f8000-7f6512551000 r-xp 00000000 fd:00 957313                     /lib64/libfreebl3.so 7f6512551000-7f6512750000 ---p 00059000 fd:00 957313                     /lib64/libfreebl3.so 7f6512750000-7f6512751000 rw-p 00058000 fd:00 957313                     /lib64/libfreebl3.so 7f6512751000-7f6512757000 rw-p 7f6512751000 00:00 0  7f6512757000-7f651275f000 r-xp 00000000 fd:00 957069                     /lib64/libcrypt-2.10.1.so 7f651275f000-7f651295e000 ---p 00008000 fd:00 957069                     /lib64/libcrypt-2.10.1.so 7f651295e000-7f651295f000 r--p 00007000 fd:00 957069                     /lib64/libcrypt-2.10.1.so 7f651295f000-7f6512960000 rw-p 00008000 fd:00 957069                     /lib64/libcrypt-2.10.1.so 7f6512960000-7f6512993000 rw-p 7f6512960000 00:00 0  7f65129a6000-7f65129ad000 r--s 00000000 fd:00 472373                     /usr/lib64/gconv/gconv-modules.cache 7f65129ad000-7f65129af000 rw-p 7f65129ad000 00:00 0  7fff1a999000-7fff1a9ae000 rw-p 7ffffffea000 00:00 0                      [stack] 7fff1a9fe000-7fff1a9ff000 r-xp 7fff1a9fe000 00:00 0                      [vdso] ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]  Program received signal SIGABRT, Aborted. 0x00000033b00332f5 in raise () from /lib64/libc.so.6  (gdb) bt #0  0x00000033b00332f5 in raise () from /lib64/libc.so.6 #1  0x00000033b0034b20 in abort () from /lib64/libc.so.6 #2  0x00000033b007005d in __libc_message () from /lib64/libc.so.6 #3  0x00000033b0075a26 in malloc_printerr () from /lib64/libc.so.6 #4  0x0000000000496c83 in vnc_client_io_error (vs=0x1096020, ret=<value optimized out>, last_errno=<value optimized out>)     at vnc.c:870 #5  0x00000000004983da in protocol_client_msg (vs=0x1096020, data=0x109e4a0 "\1", len=<value optimized out>)     at vnc.c:1729 #6  0x0000000000496e8b in vnc_client_read (opaque=<value optimized out>) at vnc.c:1095 #7  0x0000000000409572 in main_loop_wait (timeout=<value optimized out>) at /usr/src/debug/qemu-kvm-0.10/qemu/vl.c:3774 #8  0x000000000040c59a in main_loop () at /usr/src/debug/qemu-kvm-0.10/qemu/vl.c:3972 #9  main () at /usr/src/debug/qemu-kvm-0.10/qemu/vl.c:6126    Expected results: Server reports invalid message and drops the client connection  Additional info:   ```  [Comment 1](show_bug.cgi?id=505641#c1)  Daniel Berrangé    2009-06-12 17:54:05 UTC  ``` I've reproduced this crash on the RHELV/RHEL-5.4 trees too with kvm-83-59.el5ovirt   ```  [Comment 2](show_bug.cgi?id=505641#c2)  Dor Laor    2009-06-14 11:41:15 UTC  ``` Let's fix it in future releases. I don't see any security issue since if someone can access the host network it can only crash qemu the most.   ```  [Comment 3](show_bug.cgi?id=505641#c3)  Tomas Hoger    2009-06-15 13:40:43 UTC  ``` I believe there are 2 things to consider here:  - This can be an issue in setups where user has VNC console access to the system where (s)he does not have admin privileges.  I believe this VNC crash takes qemu process, hence effectively kills VM.  Given that VNC access is console access, hence allowing things like reboot to single user mode, I presume such access is never granted to any untrusted user, and hence bug only gives sufficiently privileged user yet another way to shoot herself in the foot.  - Is this limited to double-free?  Possible exploitable memory corruptions in this case may need to be treated as possible guest -> host escape.  Does the same affect EL5 Xen's qemu?   ```  [Comment 4](show_bug.cgi?id=505641#c4)  Daniel Berrangé    2009-06-15 13:55:06 UTC  ``` Agree with point 1, that if a user has VNC console access they can be assumed to be the guest administrator. It was the point 2 that I'm not so sure of yet, so I'm doing a build of QEMU with VNC debugging enabled to figure out the  precise sequence of errors.  RHEL-5 Xen's QEMU is not impacted. It is a much older codebase without the audio capture code present at all.   ```  [Comment 5](show_bug.cgi?id=505641#c5)  Daniel Berrangé    2009-06-15 14:30:47 UTC  ``` Ok, here's what's going on in QEMU's  vnc.c file  First to clarify my original steps to reproduce.   When I said to reproduce   > 5. Send the following 3 bytes to the server > >    255 >    1 >    0  You actually need to send one extra byte, where the 4th byte is > 2, eg this will do the trick      255     1     0     255   When the client message arrives in the server, it invokes:    static int protocol_client_msg(VncState *vs, uint8_t *data, size_t len)    This particular audio extension message gets handled by the last case statement , which expects a u8 followed by a u16. The bug involves sending an unhandled value for the u16 field    [...snip...]      case 255:         if (len == 1)             return 2;          switch (read_u8(data, 1)) {         case 0:             if (len == 2)                 return 12;              ext_key_event(vs, read_u16(data, 2),                           read_u32(data, 4), read_u32(data, 8));             break;         case 1:             if (len == 2)                 return 4;              switch (read_u16 (data, 2)) {   [...snip...]              default:                 printf ("Invalid audio message %d\n", read_u8(data, 4));                 vnc_client_error(vs);                 break;             }             break;          default:             printf("Msg: %d\n", read_u16(data, 0));             vnc_client_error(vs);             break;         }         break;     default:         printf("Msg: %d\n", data[0]);         vnc_client_error(vs);         break;     }      vnc_read_when(vs, protocol_client_msg, 1);     return 0; }   So in this bug, we get the 'Invalid audio message' and then call 'vnc_client_error(vs)'.  This function actually *frees* the 'vs' parameter.  Now protocol_client_msg goes onto call vnc_read_when(vs,...), which scribbles on the just-freed memory. Control returns to vnc_client_read, which reads just-freed memory, and because we didn't reset vs->csock back to -1 after closing the socket, vnc_client_read does another loop iteration, calling back into protocol_client_msg. This causes the second error message on console 'Msg: 0', and then calls vnc_client_error again, resulting in the double free. You can probably exercise other codepaths in protocol_client_msg() with careful choice of data on the wire.  So there are reads & writes to free'd memory, and then the subsequent double-free.   ```  [Comment 6](show_bug.cgi?id=505641#c6)  Daniel Berrangé    2009-06-15 15:45:46 UTC  ``` This problem appears much much more widespread than just the audio extension. It appears Mark has separately identified countless other scenarios in which a client can crash the server  [https://bugzilla.redhat.com/show_bug.cgi?id=501131](show_bug.cgi?id=501131 "CLOSED ERRATA - qemu segfault when VNC client disconnects")  this all stems from the recent change to split client & server state out into separate structs. Previously all this usage was safe because the 'vs' object would never be freed.   ```  [Comment 7](show_bug.cgi?id=505641#c7)  Gerd Hoffmann    2009-06-16 10:10:22 UTC  ``` Created [attachment 348075](attachment.cgi?id=348075&action=diff "fix use after free.") [[details]](attachment.cgi?id=348075&action=edit "fix use after free.") fix use after free.  Can you give it a spin?   ```  [Comment 8](show_bug.cgi?id=505641#c8)  Gerd Hoffmann    2009-06-16 12:01:15 UTC  ``` Created [attachment 348096](attachment.cgi?id=348096&action=diff "fix more use-after-free cases") [[details]](attachment.cgi?id=348096&action=edit "fix more use-after-free cases") fix more use-after-free cases  Found a few more places where we have to take care while preparing a version for upstream.   ```  [Comment 9](show_bug.cgi?id=505641#c9)  Gerd Hoffmann    2009-06-16 12:22:46 UTC  ``` Created [attachment 348099](attachment.cgi?id=348099&action=diff "The two fixes combined into one patch.") [[details]](attachment.cgi?id=348099&action=edit "The two fixes combined into one patch.") The two fixes combined into one patch.   ```  [Comment 10](show_bug.cgi?id=505641#c10)  Daniel Berrangé    2009-06-16 13:50:58 UTC  ``` Created [attachment 348111](attachment.cgi?id=348111&action=diff "Delibrarely broken VNC audio client to crash server") [[details]](attachment.cgi?id=348111&action=edit "Delibrarely broken VNC audio client to crash server") Delibrarely broken VNC audio client to crash server  To reproduce the problem, apply the attached patch, to this commit of gtk-vnc client, rebuild and run its demo client app ./examples/gvncviewer localhost:1 (assuming you have QEMU on localhost:1 too of course)  <http://git.gnome.org/cgit/gtk-vnc/commit/?id=6634acb2ccaf01e237fc03ed9f15b25e6f9897b6>   ```  [Comment 11](show_bug.cgi?id=505641#c11)  Gerd Hoffmann    2009-06-16 14:07:28 UTC  ``` Gives me just a "Invalid audio message 255" on stderr (with patch #9 applied). No qemu crash, guest continues to run.   ```  [Comment 12](show_bug.cgi?id=505641#c12)  Daniel Berrangé    2009-06-16 14:13:06 UTC  ``` Try it again. It usually crashes first time for me, but occassionally needs to be run a couple of times, since it is a tiny bit susceptible to kernel schedular variations   ```  [Comment 13](show_bug.cgi?id=505641#c13)  Eduardo Habkost    2009-06-18 15:40:25 UTC  ``` As we have a patch, I will propose this for rhel-5.4.0/rhev-2.1, in case it get positive results and reviews.   ```  [Comment 20](show_bug.cgi?id=505641#c20)  Daniel Berrangé    2009-07-07 11:02:39 UTC  ``` FYI, a much easier way to demonstrate the crash is using the rdesktop program, eg   rdesktop  hostname:port  It exercises the same basic problem, although not quite the same codepath as my original demo   ```  [Comment 21](show_bug.cgi?id=505641#c21)  lihuang    2009-07-07 15:00:36 UTC  ``` using the steps in [comment #20](show_bug.cgi?id=505641#c20).   reproduce the bug in kvm-83-80.el5  ( host RHEL5u4 beta ) verified in kvm-83-83.el5   steps : 1. start guest by command : /usr/libexec/qemu-kvm -cdrom ~/boot.iso -vnc :15 2. run ` rdesktop host_ip:15 ` in another terminal.  effect : 1 kvm-83-80.el5 :  segfault. (gdb) bt  #0  qemu_del_timer (ts=0x13f2dd0)      at /usr/src/debug/kvm-83-maint-snapshot-20090205/qemu/vl.c:1191  #1  0x000000000049336a in vnc_client_io_error (vs=0x1502010,       ret=<value optimized out>, last_errno=<value optimized out>) at vnc.c:804  #2  0x0000000000493a95 in protocol_version (vs=0x1502010,       version=<value optimized out>, len=<value optimized out>) at vnc.c:2321  #3  0x000000000049657b in vnc_client_read (opaque=<value optimized out>)      at vnc.c:912  #4  0x00000000004098f2 in main_loop_wait (timeout=<value optimized out>)      at /usr/src/debug/kvm-83-maint-snapshot-20090205/qemu/vl.c:3910  #5  0x0000000000516eaa in kvm_main_loop ()      at /usr/src/debug/kvm-83-maint-snapshot-20090205/qemu/qemu-kvm.c:599  #6  0x000000000040e415 in main (argc=5, argv=0x7fff47ea1858,       envp=<value optimized out>)      at /usr/src/debug/kvm-83-maint-snapshot-20090205/qemu/vl.c:3967   3 kvm-83-83.el5 # rdesktop 10.66.70.3:5901 Autoselected keyboard map en-us ERROR: Connection closed  qemu-kvm not crash.   ```  [Comment 23](show_bug.cgi?id=505641#c23)  errata-xmlrpc    2009-09-02 09:33:36 UTC  ``` An advisory has been issued which should help the problem described in this bug report. This report is therefore being closed with a resolution of ERRATA. For more information on therefore solution and/or where to find the updated files, please follow the link below. You may reopen this bug report if the solution does not work for you.  <http://rhn.redhat.com/errata/RHEA-2009-1272.html>   ```  [Comment 24](show_bug.cgi?id=505641#c24)  Vincent Danen    2009-11-16 18:20:26 UTC  ``` This was corrected in upstream qemu 0.11.0, however qemu in Fedora 10 and 11 is still affected by this issue (0.9.1-12.fc10 and 0.10.6-9.fc11 respectively).  So Fedora still requires the fix.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=505641&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from rhn.redhat.com_b534da17_20250125_152340.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHEA-2009:1272 - Product Enhancement Advisory

Issued:
2009-09-01
Updated:
2009-09-01
# RHEA-2009:1272 - Product Enhancement Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

New package: kvm

## Type/Severity

Product Enhancement Advisory

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHEA-2009%3A1272)

## Topic

A new KVM package that adds a new hypervisor for full virtualization is now
available.

## Description

KVM (for Kernel-based Virtual Machine) is a full virtualization solution
for Linux on x86 hardware.

KVM is a Linux kernel module built for the standard Red Hat Enterprise
Linux kernel. KVM can run multiple unmodified, virtualized guest Windows
and Linux operating systems. KVM is a hypervisor which uses the libvirt
virtualization tools (virt-manager and virsh).

The KVM hypervisor cannot run at the same time as the Xen hypervisor. Both
hypervisors, Xen and KVM, can be installed on the same system, however,
only one hypervisor can be used at a time.

KVM is only available for the Intel 64 and AMD64 architectures.

For more information on changing hypervisor or using KVM refer to the Red
Hat Enterprise Linux Virtualization Guide.

All users requiring KVM should install this newly released package.

## Solution

Before applying this update, make sure that all previously-released
errata relevant to your system have been applied.

This update is available via Red Hat Network. Details on how to use
the Red Hat Network to apply this update are available at
<http://kbase.redhat.com/faq/docs/DOC-11259>

## Affected Products

* Red Hat Enterprise Linux Server 5 x86\_64
* Red Hat Enterprise Linux Workstation 5 x86\_64

## Fixes

* [BZ - 496150](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=496150)
  - Export HOST UUID through SMBIOS to show in guest dmidecode
* [BZ - 500263](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=500263)
  - Import RHEV kvm fixes added between kvm-83-35.el5ovirt and kvm-83-42.el5ovirt
* [BZ - 500717](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=500717)
  - qemu-kvm can generate invalid screendumps during reboot
* [BZ - 501693](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=501693)
  - must notify success of exec migration on destination
* [BZ - 501729](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=501729)
  - Pull RHEV bugfixes between kvm-83-42.el5ovirt and kvm-83-52.el5ovirt
* [BZ - 501777](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=501777)
  - kvm doesn't build on newer RHEL-5.4 kernels because of get\_user\_pages\_fast()
* [BZ - 503790](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=503790)
  - virtio balloon: add a command-line option to disable it at runtime
* [BZ - 503793](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=503793)
  - Pull RHEV bugfixes between kvm-83-52.el5ovirt and kvm-83-58.el5ovirt
* [BZ - 503811](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=503811)
  - Pull disable-virtio-balloon patch from RHEV branch
* [BZ - 503955](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=503955)
  - Move qemu-kvm to /usr/libexec
* [BZ - 504018](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=504018)
  - kernel oops at kvm\_get\_intr\_delivery\_bitmask+0x4e/0x86
* [BZ - 504047](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=504047)
  - kvm doesn't use native get\_user\_pages\_fast()
* [BZ - 504237](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=504237)
  - Pull RHEV bugfixes for RHEL
* [BZ - 504351](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=504351)
  - KVM-QEMU: 100% CPU - VM stuck scenario (trying to boot from CD in the 2nd reboot)
* [BZ - 504647](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=504647)
  - Low UDP throughput from Linux KVM guest
* [BZ - 504713](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=504713)
  - BIOS bug - processor goes missing with RHEL3U8 boot kernel
* [BZ - 505090](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=505090)
  - Virtual machine fails to start without cdom - qemu: could not open disk image /dev/sr0
* [BZ - 505440](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=505440)
  - Panic on suspend with KSM module loaded
* [BZ - 505641](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=505641)
  - Remote VNC client can cause any QEMU VNC server to crash with a double-free
* [BZ - 507659](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=507659)
  - Migrate command not end and vm responseless on Nahalem host
* [BZ - 507730](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=507730)
  - KVM: SVM: Remove port 80 passthrough (upstream backport)
* [BZ - 507733](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=507733)
  - KVM: protect concurrent make\_all\_cpus\_request (upstream backport)
* [BZ - 507880](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=507880)
  - qemu hangs during VNC connection from RHEVM
* [BZ - 508623](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=508623)
  - Only 1 processor can be detected in "systeminfo" of win2k3 guest with -smp 2 and ACPI multiprocessor HAL.
* [BZ - 508776](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=508776)
  - KVM: MMU: limit rmap chain
* [BZ - 508861](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=508861)
  - kvm: add tap send buffer limit to help UDP networking
* [BZ - 509208](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=509208)
  - KVM fixes to make gPXE boot ROMs work
* [BZ - 510087](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=510087)
  - KVM: limit lapic periodic timer frequency
* [BZ - 510806](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=510806)
  - KVM: invoke pci\_reset\_function() when PCI device assigned or deassigned to a guest
* [BZ - 511031](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=511031)
  - qemu-kvm hang during migration when stress test is running in the guest
* [BZ - 512712](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=512712)
  - Support huge pages in KVM
* [BZ - 512894](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=512894)
  - Disable hpet by default
* [BZ - 512898](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=512898)
  - Enable rtd-hack by default
* [BZ - 513098](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=513098)
  - KVM: take mmu\_lock when updating a deleted slot (upstream backport)
* [BZ - 513252](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=513252)
  - Asignation instead of comparation inside if
* [BZ - 513394](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=513394)
  - KVM: SVM: force new asid on vcpu migration (upstream backport)
* [BZ - 513946](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=513946)
  - keyboard is slow in windows SMP guest.
* [BZ - 514526](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=514526)
  - Reset qxl, vdi irq line on guest reset
* [BZ - 514887](https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=514887)
  - Mouse and keyboard of guest are unavailable after migration-[kvm-83-101.el5]

## CVEs

(none)

## References

(none)

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat Enterprise Linux Server 5

| SRPM | |
| --- | --- |
| kvm-83-105.el5.src.rpm | SHA-256: 589197b77a147987cc1ba0694d85d775a8d7ec525062da1c91ea8e976d737388 |
| x86\_64 | |
| kmod-kvm-83-105.el5.x86\_64.rpm | SHA-256: 874e1ea0918004d726d5cb6831ddfefb806b938c3a4ad821239bded25754880f |
| kvm-83-105.el5.x86\_64.rpm | SHA-256: 97fb4145a27319665e0159070712a747c750d19191683952891b74bdf8cc0b08 |
| kvm-qemu-img-83-105.el5.x86\_64.rpm | SHA-256: 8a6214134d0baaab4078e44a57e40d9f790a1555036e2a14161fcdf86dc70208 |
| kvm-tools-83-105.el5.x86\_64.rpm | SHA-256: d1c3d0d73295a64b73162da08f813cfa8d3c2b5b251b42ef1069a5373e952875 |

## Red Hat Enterprise Linux Workstation 5

| SRPM | |
| --- | --- |
| kvm-83-105.el5.src.rpm | SHA-256: 589197b77a147987cc1ba0694d85d775a8d7ec525062da1c91ea8e976d737388 |
| x86\_64 | |
| kmod-kvm-83-105.el5.x86\_64.rpm | SHA-256: 874e1ea0918004d726d5cb6831ddfefb806b938c3a4ad821239bded25754880f |
| kvm-83-105.el5.x86\_64.rpm | SHA-256: 97fb4145a27319665e0159070712a747c750d19191683952891b74bdf8cc0b08 |
| kvm-qemu-img-83-105.el5.x86\_64.rpm | SHA-256: 8a6214134d0baaab4078e44a57e40d9f790a1555036e2a14161fcdf86dc70208 |
| kvm-tools-83-105.el5.x86\_64.rpm | SHA-256: d1c3d0d73295a64b73162da08f813cfa8d3c2b5b251b42ef1069a5373e952875 |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_a34159d9_20250125_152346.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D508567)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D508567)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D508567)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 508567

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 508567**](show_bug.cgi?id=508567)
- Virtual Machine aborts abrupt when executing rdesktop localhost:5900 command

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
Virtual Machine aborts abrupt when executing rdesktop localhost:5900 command

| | [Keywords](describekeywords.cgi): |  | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED DUPLICATE of [bug 501131](show_bug.cgi?id=501131 "CLOSED ERRATA - qemu segfault when VNC client disconnects") | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Fedora | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Fedora | | [Component:](describecomponents.cgi?product=Fedora "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | qemu | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 11 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | low | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Glauber Costa | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Fedora Extras Quality Assurance | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=508567&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=508567&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2009-06-28 16:32 UTC by Michael Gruys | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2009-07-03 11:14 UTC ([History](show_activity.cgi?id=508567)) | | [CC List:](page.cgi?id=fields.html#cclist) | 10 users (show)  berrange crobinso dwmw2 gcosta hbrock itamar jaswinder markmc quintela virt-maint | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2009-07-03 11:14:07 UTC | | | Type: | --- | | | Embargoed: |  | | | [Dependent Products:](page.cgi?id=fields.html#dependent_products "Other Products that are affected by this bug.") | Ember-CSI Red Hat Enterprise Virtualization Manager Red Hat OpenStack Service Telemetry Framework | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=508567#c0)  Michael Gruys    2009-06-28 16:32:20 UTC  ``` Description of problem: A running virtual machine in then virt-manager aborts without any warning (or entry in the logfile virt-manager.log) when in a terminal the 'rdesktop localhost:5900' will be executed (as normal user)  Version-Release number of selected component (if applicable): Virtual Machine Manager 0.7.0  How reproducible: Always  Steps to Reproduce: 1.start virt-manager 2.run a random installed virtual machine (i.e. right click on machine and choose Run) 3.open a terminal window (i.e. gnome-terminal) 4 type the following command: rdesktop localhost:5900    Actual results: The running virtual machine will be aborted without warning or saving it's data. Any data loss in the virtual machine will occur!  Expected results: A window of the running virtual machine will be showed in rdesktop At least a warning that something is wrong that it is not possible to connect to the virtual machine  Additional info:   ```  [Comment 1](show_bug.cgi?id=508567#c1)  Daniel Berrangé    2009-06-29 09:14:18 UTC  ``` THis will be a bug in the QEMU VNC server not correctly validating client data, and then crashing. Can you tell me what version of 'qemu' RPM you have installed.   NB, QEMU does not implement rdesktop, it implements VNC. So if you want to see the graphical console use virt-manager's console window, or 'virt-viewer' or the generic 'vinagre' VNC client.   ```  [Comment 2](show_bug.cgi?id=508567#c2)  Michael Gruys    2009-06-29 09:21:53 UTC  ``` yum info qemu  Name       : qemu Arch       : i586 Epoch      : 2 Version    : 0.10.5 Release    : 3.fc11 Size       : 0.0  Repo       : installed From repo  : updates  qemu QEMU PC emulator version 0.10.5 (qemu-kvm-0.10.5), Copyright (c) 2003-2008 Fabrice Bellard   ```  [Comment 3](show_bug.cgi?id=508567#c3)  Michael Gruys    2009-06-29 20:08:11 UTC  ``` Thanks for reply sir Berrange. Should i file this issue under qemu (=make a new bug report)?  Thx in advance   ```  [Comment 4](show_bug.cgi?id=508567#c4)  Daniel Berrangé    2009-06-29 21:41:53 UTC  ``` I've already re-assigned this existing bug to 'qemu' so no need todo anything more at this time :-)   ```  [Comment 5](show_bug.cgi?id=508567#c5)  Mark McLoughlin    2009-07-03 11:14:07 UTC  ``` Okay, I can reproduce and it looks like a dup of #501131  Thanks for the report!  *** This bug has been marked as a duplicate of [bug 501131](show_bug.cgi?id=501131 "CLOSED ERRATA - qemu segfault when VNC client disconnects") ***   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=508567&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugzilla.redhat.com_aeb21da5_20250125_152342.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D501131)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D501131)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D501131)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 501131

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 501131**](show_bug.cgi?id=501131)
- qemu segfault when VNC client disconnects

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
qemu segfault when VNC client disconnects

| | [Keywords](describekeywords.cgi): |  | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Fedora | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Fedora | | [Component:](describecomponents.cgi?product=Fedora "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | qemu | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 11 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Mark McLoughlin | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Fedora Extras Quality Assurance | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | Duplicates (3): | [505640](show_bug.cgi?id=505640) [508567](show_bug.cgi?id=508567 "CLOSED DUPLICATE - Virtual Machine aborts abrupt when executing rdesktop localhost:5900 command") [537903](show_bug.cgi?id=537903)  ([view as bug list](buglist.cgi?bug_id=505640,508567,537903)) | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [F11VirtTarget](show_bug.cgi?id=480594 "CLOSED CURRENTRELEASE - Fedora 11 Virtualization Target Tracker") | | TreeView+ | [depends on](buglist.cgi?bug_id=501131&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=501131&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2009-05-16 20:55 UTC by Enrico Scholz | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2009-11-19 10:47 UTC ([History](show_activity.cgi?id=501131)) | | [CC List:](page.cgi?id=fields.html#cclist) | 8 users (show)  berrange dwmw2 gcosta itamar markmc m.gruys vdanen virt-maint | | Fixed In Version: | 0.10.6-5.fc11 | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2009-09-24 05:24:12 UTC | | | Type: | --- | | | Embargoed: |  | | | [Dependent Products:](page.cgi?id=fields.html#dependent_products "Other Products that are affected by this bug.") | Ember-CSI Red Hat Enterprise Virtualization Manager Red Hat OpenStack Service Telemetry Framework | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | | [**gdb backtrace**](attachment.cgi?id=344297 "View the content of the attachment") (7.00 KB, text/plain)  [2009-05-16 20:56 UTC](#attach_344297 "Go to the comment associated with the attachment"), Enrico Scholz | *no flags* | [Details](attachment.cgi?id=344297&action=edit) | | [**qemu-vnc-segfault.patch**](attachment.cgi?id=345104 "View the content of the attachment") (11.69 KB, patch)  [2009-05-22 15:25 UTC](#attach_345104 "Go to the comment associated with the attachment"), Mark McLoughlin | *no flags* | [Details](attachment.cgi?id=345104&action=edit) | [Diff](attachment.cgi?id=345104&action=diff) | | [**gdb backtrace**](attachment.cgi?id=345451 "View the content of the attachment") (3.56 KB, text/plain)  [2009-05-26 12:04 UTC](#attach_345451 "Go to the comment associated with the attachment"), Enrico Scholz | *no flags* | [Details](attachment.cgi?id=345451&action=edit) | | [**gdb backtraces (100% reproducible)**](attachment.cgi?id=345452 "View the content of the attachment") (3.11 KB, text/plain)  [2009-05-26 12:08 UTC](#attach_345452 "Go to the comment associated with the attachment"), Enrico Scholz | *no flags* | [Details](attachment.cgi?id=345452&action=edit) | | [**fix**](attachment.cgi?id=348098 "View the content of the attachment") (7.04 KB, patch)  [2009-06-16 12:17 UTC](#attach_348098 "Go to the comment associated with the attachment"), Gerd Hoffmann | *no flags* | [Details](attachment.cgi?id=348098&action=edit) | [Diff](attachment.cgi?id=348098&action=diff) | | [View All](attachment.cgi?bugid=501131&action=viewall) | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=501131#c0)  Enrico Scholz    2009-05-16 20:55:31 UTC  ``` Description of problem:  I got the attached segfault when a VNC client disconnects while guest gives out something. In current case, I executed 'type long-textfile' in a Windoze guest (SMP, 2 cpu i686).  I used 'vinagre' VNC client and the VNC connection was tunneled through slow SSH portforwarding.  Abort seems to be caused by a double-free().   Version-Release number of selected component (if applicable):  qemu-system-x86-0.10.4-4.fc11.x86_64 vinagre-2.24.2-1.fc10.x86_64   How reproducible:  20-30%   ```  [Comment 1](show_bug.cgi?id=501131#c1)  Enrico Scholz    2009-05-16 20:56:58 UTC  ``` Created [attachment 344297](attachment.cgi?id=344297 "gdb backtrace") [[details]](attachment.cgi?id=344297&action=edit "gdb backtrace") gdb backtrace   ```  [Comment 2](show_bug.cgi?id=501131#c2)  Mark McLoughlin    2009-05-22 15:22:07 UTC  ``` Thanks for the backtrace Enrico  I can't reproduce this, but I think I see the issue  vnc_client_io_error() frees the VncState if there was an error  This means that after e.g. vnc_flush() or vnc_write() are called, VncState might have been freed. There is no error return from vnc_flush() and there are lots of places we continue to use the VncState even though it may have been freed.  So, in this stack trace we may have hit an I/O error in vnc_update_client() and freed the VncState yet vnc_copy() continues on and tries to do a vnc_flush()   ```  [Comment 3](show_bug.cgi?id=501131#c3)  Mark McLoughlin    2009-05-22 15:25:28 UTC  ``` Created [attachment 345104](attachment.cgi?id=345104&action=diff "qemu-vnc-segfault.patch") [[details]](attachment.cgi?id=345104&action=edit "qemu-vnc-segfault.patch") qemu-vnc-segfault.patch  So, this is a hacky and incomplete fix, but it will help us confirm whether we've identified the cause.  I don't think this solution is workable - it's just too difficult to audit the entire protocol handling to make sure that we correctly handle an I/O error everywhere. Instead, I think we'll probably add a ->deleted flag to VncState, set that on I/O error and only in a small fixed number of places actually handle deleting.   ```  [Comment 4](show_bug.cgi?id=501131#c4)  Mark McLoughlin    2009-05-22 15:28:05 UTC  ``` Enrico: when it finished building, could you try out this scratch build:  <https://koji.fedoraproject.org/koji/taskinfo?taskID=1370743>  the RPMs should wind up here:  <http://koji.fedoraproject.org/scratch/markmc/task_1370743>   ```  [Comment 5](show_bug.cgi?id=501131#c5)  Enrico Scholz    2009-05-26 12:04:37 UTC  ``` Created [attachment 345451](attachment.cgi?id=345451 "gdb backtrace") [[details]](attachment.cgi?id=345451&action=edit "gdb backtrace") gdb backtrace  still there :(  qemu-common-0.10.4-5.1.fc11.x86_64   ```  [Comment 6](show_bug.cgi?id=501131#c6)  Enrico Scholz    2009-05-26 12:08:01 UTC  ``` Created [attachment 345452](attachment.cgi?id=345452 "gdb backtraces (100% reproducible)") [[details]](attachment.cgi?id=345452&action=edit "gdb backtraces (100% reproducible)") gdb backtraces (100% reproducible)  These are two backtraces which are 100% reproducibly by   $ rdesktop localhost:7905   ```  [Comment 7](show_bug.cgi?id=501131#c7)  Mark McLoughlin    2009-06-04 13:32:40 UTC  ``` Perhaps my test patch didn't catch all cases where this could happen - oh well, we need to fix this in a better way anyway   ```  [Comment 8](show_bug.cgi?id=501131#c8)  Mark McLoughlin    2009-06-04 13:36:54 UTC  ``` Someone else reported this when running qemu on windows:    <http://marc.info/?l=qemu-devel&m=124324043812915>   ```  [Comment 9](show_bug.cgi?id=501131#c9)  Bug Zapper    2009-06-09 15:57:18 UTC  ```  This bug appears to have been reported against 'rawhide' during the Fedora 11 development cycle. Changing version to '11'.  More information and reason for this action is here: <http://fedoraproject.org/wiki/BugZappers/HouseKeeping>   ```  [Comment 10](show_bug.cgi?id=501131#c10)  Gerd Hoffmann    2009-06-16 12:17:04 UTC  ``` Created [attachment 348098](attachment.cgi?id=348098&action=diff "fix") [[details]](attachment.cgi?id=348098&action=edit "fix") fix  Against latest git, will send this one upstream shortly.   ```  [Comment 11](show_bug.cgi?id=501131#c11)  Mark McLoughlin    2009-06-16 14:54:16 UTC  ``` *** [Bug 505640](show_bug.cgi?id=505640) has been marked as a duplicate of this bug. ***   ```  [Comment 12](show_bug.cgi?id=501131#c12)  Mark McLoughlin    2009-06-17 12:05:30 UTC  ``` Thanks Gerd - any chance you could re-base it to F-11 ?   ```  [Comment 13](show_bug.cgi?id=501131#c13)  Mark McLoughlin    2009-07-03 11:14:07 UTC  ``` *** [Bug 508567](show_bug.cgi?id=508567 "CLOSED DUPLICATE - Virtual Machine aborts abrupt when executing rdesktop localhost:5900 command") has been marked as a duplicate of this bug. ***   ```  [Comment 14](show_bug.cgi?id=501131#c14)  Mark McLoughlin    2009-08-07 14:44:51 UTC  ``` The upstream commit we need re-based to stable-0.10 is:    <http://git.savannah.gnu.org/cgit/qemu.git/commit/?id=198a0039c5>   ```  [Comment 15](show_bug.cgi?id=501131#c15)  Mark McLoughlin    2009-09-07 17:33:28 UTC  ``` 0.10.7 should be released relatively soon with this backport:    <http://git.savannah.gnu.org/cgit/qemu.git/commit/?h=stable-0.10&id=c2723a9606>   ```  [Comment 16](show_bug.cgi?id=501131#c16)  Mark McLoughlin    2009-09-11 11:17:20 UTC  ``` Will push this to updates-testing soon:  * Fri Sep 11 2009 Mark McLoughlin <markmc> - 2:0.10.6-5 - Fix vnc segfault on disconnect (#501131) - Fix vnc screen corruption with e.g. xterm (#503156) - Rebase vnc sasl patches on top of these two vnc fixes   ```  [Comment 17](show_bug.cgi?id=501131#c17)  Fedora Update System    2009-09-14 07:27:22 UTC  ``` qemu-0.10.6-5.fc11 has been submitted as an update for Fedora 11. <http://admin.fedoraproject.org/updates/qemu-0.10.6-5.fc11>   ```  [Comment 18](show_bug.cgi?id=501131#c18)  Fedora Update System    2009-09-15 07:36:17 UTC  ``` qemu-0.10.6-5.fc11 has been pushed to the Fedora 11 testing repository.  If problems still persist, please make note of it in this bug report.  If you want to test the update, you can install it with   su -c 'yum --enablerepo=updates-testing update qemu'.  You can provide feedback for this update here: <http://admin.fedoraproject.org/updates/F11/FEDORA-2009-9542>   ```  [Comment 19](show_bug.cgi?id=501131#c19)  Fedora Update System    2009-09-24 05:24:06 UTC  ``` qemu-0.10.6-5.fc11 has been pushed to the Fedora 11 stable repository.  If problems still persist, please make note of it in this bug report.   ```  [Comment 20](show_bug.cgi?id=501131#c20)  Mark McLoughlin    2009-11-19 10:47:41 UTC  ``` *** [Bug 537903](show_bug.cgi?id=537903) has been marked as a duplicate of this bug. ***   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=501131&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from access.redhat.com_380338fb_20250126_095206.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.openwall.com_546e1c13_20250125_152341.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](4) [[next>]](6) [[thread-next>]](8) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20091016105823.03fed81f@redhat.com>
Date: Fri, 16 Oct 2009 10:58:23 +0200
From: Tomas Hoger <thoger@...hat.com>
To: OSS Security <oss-security@...ts.openwall.com>
Subject: QEMU VNC use-after-free

Hi!

Use-after-free / double-free problems were reported for QEMU's VNC
server:

<https://bugzilla.redhat.com/show_bug.cgi?id=501131>
<https://bugzilla.redhat.com/show_bug.cgi?id=505641>

Problem can cause QEMU process (and hence virtual machine) to crash
(which is not security in most use cases, as VNC access means console
access for the virtual machine), but if used for code execution, it can
mean guest -> host escape.

Versions in between the following two commits are affected:

<http://git.savannah.gnu.org/cgit/qemu.git/commit/?id=753b405331>
<http://git.savannah.gnu.org/cgit/qemu.git/commit/?id=198a0039c5>

--
Tomas Hoger / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from marc.info_6f43883c_20250125_152340.html ===

```
[[prev in list](?l=qemu-devel&m=124324019112539&w=2)] [[next in list](?l=qemu-devel&m=124324446118855&w=2)] [[prev in thread](?l=qemu-devel&m=124319580026146&w=2)] [next in thread]
List:       [qemu-devel](?l=qemu-devel&r=1&w=2)
Subject:    [Re: [Qemu-devel] [STABLE] [BUG] VNC mode can crash QEMU](?t=124319596700001&r=1&w=2)
From:       [Mark McLoughlin <markmc () redhat ! com>](?a=107722158200002&r=1&w=2)
Date:       [2009-05-25 8:33:24](?l=qemu-devel&r=1&w=2&b=200905)
Message-ID: [1243240404.18067.6.camel () blaa](?i=1243240404.18067.6.camel%20()%20blaa)
[Download RAW [message](?l=qemu-devel&m=124324043812915&q=mbox) or [body](?l=qemu-devel&m=124324043812915&q=raw)]

On Sun, 2009-05-24 at 22:08 +0200, Stefan Weil wrote:
> Hello,
>
> this scenario crashs the latest QEMU HEAD on Windows
> (Linux users, please note that the bug is not Windows related,
> so don't stop reading!):
>
> * run qemu.exe -vnc :0
> * connect using UltraVnc
> * select fuzzy screen mode in UltraVnc
>
> => segfault of qemu.exe
>
> The crash is caused by VNC protocols which are unsupported
> by QEMU - in my case it was the fuzzy screen mode protocol.
> These protocols trigger a call stack which releases the
> VncState vs:
>
> qemu_free(vs)
> vnc_client_io_error(vs, ...)
> vnc_client_error(vs, ...)
> protocol_client_msg(vs, ...)
> vnc_client_read
> main_loop_wait
> main_loop
>
> The default handlers for unimplemented protocols in
> protocol_client_msg call vnc_client_error which finally
> calls qemu_free for the current VncState vs.
>
> vs is then used in protocol_client_msg and vnc_client_read
> although it is no longer valid. On Windows, this results
> in a crash, for other host platforms, the result depends
> on implementation details of the C library.
>
> In any case, access to a data structure after a free()
> is a bug.

Yep, I looked into a similar report recently:

  <https://bugzilla.redhat.com/show_bug.cgi?id=501131>

Basically, vnc_flush() or vnc_update_client() will handle an error by
freeing VncState, yet we will not detect this error and happily continue
on using the freed VncState.

The approach I tried in the patch attached to the bug isn't going to
work, I think. Instead, we should just mark the VncState with a
"deleted" flag on I/O error and only free it later on when the
in-progress protocol step has completed.

Cheers,
Mark.

[[prev in list](?l=qemu-devel&m=124324019112539&w=2)] [[next in list](?l=qemu-devel&m=124324446118855&w=2)] [[prev in thread](?l=qemu-devel&m=124319580026146&w=2)] [next in thread]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from bugzilla.redhat.com_13fbe16e_20250126_095207.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=index.cgi)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=index.cgi)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=index.cgi)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Main Page
version 5.0.4.rh103

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

# Welcome to Red Hat Bugzilla

Thank you for visiting Red Hat Bugzilla. Red Hat Bugzilla is the Red Hat bug-tracking
system and is used to submit and review defects that have been found in Red
Hat distributions. Red Hat Bugzilla is not an avenue for
technical assistance or support, but simply a bug tracking system. If you submit a
defect, please provide detailed information in your submission after you
have queried Red Hat Bugzilla to ensure the defect has not been reported yet.
Defects will go directly to the engineer responsible for the component you
filed the defect against. Engineers have many responsibilities and will get to
your defect in due time.

If you are a Red Hat customer with an active subscription, please
visit the  [Red Hat Customer Portal](http://access.redhat.com)
for assistance with your issue.

If you are a Fedora Project user and require assistance, please consider using one
of the [mailing lists](http://fedoraproject.org/wiki/Communicate) we host for the Fedora Project.

* [File a Bug](enter_bug.cgi)
* [Search](query.cgi)
* [Open a New Account](createaccount.cgi)
* [Documentation](docs/en/html/using/index.html)

[[?]](page.cgi?id=quicksearch.html "Quick Search help")

## Common Queries:

* Bugs reported in the
  [last 24 hours](buglist.cgi?chfield=%5BBug%20creation%5D&chfieldfrom=-24h)

  | [last 7 days](buglist.cgi?chfield=%5BBug%20creation%5D&chfieldfrom=-7d)
* Bugs changed in the
  [last 24 hours](buglist.cgi?chfieldfrom=-24h)

  | [last 7 days](buglist.cgi?chfieldfrom=-7d)

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.openwall.com_e3824ac7_20250125_152341.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](7) [[next>]](9) [[<thread-prev]](5) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <565172377.476791255720212930.JavaMail.root@zmail01.collab.prod.int.phx2.redhat.com>
Date: Fri, 16 Oct 2009 15:10:12 -0400 (EDT)
From: Josh Bressers <bressers@...hat.com>
To: oss-security@...ts.openwall.com
Subject: Re: QEMU VNC use-after-free

Use CVE-2009-3616 for this.

Thanks.

--
    JB

----- "Tomas Hoger" <thoger@...hat.com> wrote:

> Hi!
>
> Use-after-free / double-free problems were reported for QEMU's VNC
> server:
>
> <https://bugzilla.redhat.com/show_bug.cgi?id=501131>
> <https://bugzilla.redhat.com/show_bug.cgi?id=505641>
>
> Problem can cause QEMU process (and hence virtual machine) to crash
> (which is not security in most use cases, as VNC access means console
> access for the virtual machine), but if used for code execution, it
> can
> mean guest -> host escape.
>
> Versions in between the following two commits are affected:
>
> <http://git.savannah.gnu.org/cgit/qemu.git/commit/?id=753b405331>
> <http://git.savannah.gnu.org/cgit/qemu.git/commit/?id=198a0039c5>
>
> --
> Tomas Hoger / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


