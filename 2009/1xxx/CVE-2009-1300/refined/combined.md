=== Content from www.debian.org_b0d36eb0_20250125_192504.html ===


---

[[Date Prev](msg00089.html)][[Date Next](msg00091.html)]
[[Thread Prev](msg00089.html)][[Thread Next](msg00091.html)]
[[Date Index](maillist.html#00090)]
[[Thread Index](threads.html#00090)]

# [SECURITY] [DSA 1779-1] New apt packages fix several vulnerabilities

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 1779-1] New apt packages fix several vulnerabilities
* *From*: Thijs Kinkhorst <thijs@debian.org>
* *Date*: Sun, 26 Apr 2009 17:36:06 +0200 (CEST)
* *Message-id*: <[[ðŸ”Ž]](/msgid-search/20090426153606.37C56BFFE%40morgana.loeki.tv)Â [20090426153606.37C56BFFE@morgana.loeki.tv](msg00090.html)>
* *Reply-to*: debian-security@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

- ------------------------------------------------------------------------
Debian Security Advisory DSA-1779-1                  security@debian.org
<http://www.debian.org/security/>                          Thijs Kinkhorst
April 26, 2009                        <http://www.debian.org/security/faq>
- ------------------------------------------------------------------------

Package        : apt
Vulnerability  : several
Problem type   : local/remote
Debian-specific: no
CVE Id(s)      : CVE-2009-1300 CVE-2009-1358
Debian Bug     : 523213 433091

Two vulnerabilities have been discovered in APT, the well-known dpkg
frontend. The Common Vulnerabilities and Exposures project identifies
the following problems:

CVE-2009-1300

    In time zones where daylight savings time occurs at midnight,
    the apt cron.daily script fails, stopping new security updates
    from being applied automatically.

CVE-2009-1358

    A repository that has been signed with an expired or revoked
    OpenPGP key would still be considered valid by APT.

For the old stable distribution (etch), these problems have been fixed in
version 0.6.46.4-0.1+etch1.

For the stable distribution (lenny), these problems have been fixed in
version 0.7.20.2+lenny1.

For the unstable distribution (sid), these problems have been fixed in
version 0.7.21.

We recommend that you upgrade your apt package.

Upgrade instructions
- --------------------

wget url
        will fetch the file for you
dpkg -i file.deb
        will install the referenced file.

If you are using the apt-get package manager, use the line for
sources.list as given below:

apt-get update
        will update the internal database
apt-get upgrade
        will install corrected packages

You may use an automated update by adding the resources from the
footer to the proper configuration.

Debian GNU/Linux 4.0 alias etch
- -------------------------------

Source archives:

  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1.tar.gz](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1.tar.gz)
    Size/MD5 checksum:  1798703 e6eaebb8a12f5243668ca56e65c8c71e
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1.dsc](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1.dsc)
    Size/MD5 checksum:     1108 c631100edac082afe2dddb28030ed6ff

Architecture independent packages:

  [http://security.debian.org/pool/updates/main/a/apt/apt-doc_0.6.46.4-0.1+etch1_all.deb](http://security.debian.org/pool/updates/main/a/apt/apt-doc_0.6.46.4-0.1%2Betch1_all.deb)
    Size/MD5 checksum:    89752 999f34683b7cb7818258ac1ebfca701c
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-doc_0.6.46.4-0.1+etch1_all.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-doc_0.6.46.4-0.1%2Betch1_all.deb)
    Size/MD5 checksum:   112248 b91e59e2e1093ecbe387ccc7e8111d73

alpha architecture (DEC Alpha)

  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1+etch1_alpha.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1%2Betch1_alpha.deb)
    Size/MD5 checksum:   216152 3fde92f88576df84cb57aaf846ba3816
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1+etch1_alpha.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1%2Betch1_alpha.deb)
    Size/MD5 checksum:    84560 48019ace277299ac3495eb77ddb94320
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1_alpha.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1_alpha.deb)
    Size/MD5 checksum:  1505198 088f74bfebfac8c33f19e5b05f536761

amd64 architecture (AMD x86_64 (AMD64))

  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1+etch1_amd64.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1%2Betch1_amd64.deb)
    Size/MD5 checksum:   198456 7cad50de61d033a85b079211ab282ec7
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1+etch1_amd64.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1%2Betch1_amd64.deb)
    Size/MD5 checksum:    84796 66930e40732a85913fff7815591ea784
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1_amd64.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1_amd64.deb)
    Size/MD5 checksum:  1448634 b29859a90e52b5f47048f38e115e44dd

arm architecture (ARM)

  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1+etch1_arm.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1%2Betch1_arm.deb)
    Size/MD5 checksum:   214264 5ab7d5e622e9425b3f5163b007e7e71e
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1+etch1_arm.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1%2Betch1_arm.deb)
    Size/MD5 checksum:    83810 04ec509e12759ee2af94881e0d5ef724
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1_arm.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1_arm.deb)
    Size/MD5 checksum:  1497802 2a03e41c76e2720707dbbfb790c17f62

i386 architecture (Intel ia32)

  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1+etch1_i386.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1%2Betch1_i386.deb)
    Size/MD5 checksum:    84166 6aa9a63c060eb0461b66f67e35ed20c7
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1+etch1_i386.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1%2Betch1_i386.deb)
    Size/MD5 checksum:   198392 7245c5ea84b1c4eefa816af20868a794
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1_i386.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1_i386.deb)
    Size/MD5 checksum:  1438190 73f115b27de4fdf11af97e2b5afca613

ia64 architecture (Intel ia64)

  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1+etch1_ia64.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1%2Betch1_ia64.deb)
    Size/MD5 checksum:   247928 a7c2581155ab49d35af4d365d51dbf8e
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1+etch1_ia64.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1%2Betch1_ia64.deb)
    Size/MD5 checksum:    84186 c94ee0563a7531b142d8728699f17d96
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1_ia64.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1_ia64.deb)
    Size/MD5 checksum:  1631044 4313242ccadf096fd8088c27050141e9

mips architecture (MIPS (Big Endian))

  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1_mips.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1_mips.deb)
    Size/MD5 checksum:  1413928 0d07461fb18e97564be6227cf04031e9
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1+etch1_mips.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1%2Betch1_mips.deb)
    Size/MD5 checksum:   195524 35b9ad4c2121fde59d5a67f52f01ce1c
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1+etch1_mips.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1%2Betch1_mips.deb)
    Size/MD5 checksum:    84186 3fd16873a28ee85e1b42c6f6bb801852

mipsel architecture (MIPS (Little Endian))

  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1+etch1_mipsel.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1%2Betch1_mipsel.deb)
    Size/MD5 checksum:    84192 715de146cd96db7fc9421df5dd4fd5e5
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1+etch1_mipsel.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1%2Betch1_mipsel.deb)
    Size/MD5 checksum:   195046 6bf1cd0ee7cc374a55c0cbfec7f1a2a7
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1_mipsel.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1_mipsel.deb)
    Size/MD5 checksum:  1410850 192ab91f19c4fd4f7a49bbe82bd9ccaa

powerpc architecture (PowerPC)

  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1_powerpc.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1_powerpc.deb)
    Size/MD5 checksum:  1450594 f90c89e0e003ac88befb170a14709afc
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1+etch1_powerpc.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1%2Betch1_powerpc.deb)
    Size/MD5 checksum:   206392 7d78be4ec2c5ac8a1c06b88e27053541
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1+etch1_powerpc.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1%2Betch1_powerpc.deb)
    Size/MD5 checksum:    84190 1e771c856f024be9ddd7b5c86b599b8e

s390 architecture (IBM S/390)

  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1+etch1_s390.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1%2Betch1_s390.deb)
    Size/MD5 checksum:   188942 fd67a46fd4260be589b2634d2df509f8
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1+etch1_s390.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1%2Betch1_s390.deb)
    Size/MD5 checksum:    84186 0d4d1110459a4d334332218f3cf9f9ac
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1_s390.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1_s390.deb)
    Size/MD5 checksum:  1430202 55abf0323abb3ce4df57b82706b1ec1c

sparc architecture (Sun SPARC/UltraSPARC)

  [http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1+etch1_sparc.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.6.46.4-0.1%2Betch1_sparc.deb)
    Size/MD5 checksum:  1423156 f7dcd42161f64afc103bfa53f853c34e
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1+etch1_sparc.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1%2Betch1_sparc.deb)
    Size/MD5 checksum:    85288 e8402a5ced27cae1c8ba13df05e8972b
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1+etch1_sparc.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.6.46.4-0.1%2Betch1_sparc.deb)
    Size/MD5 checksum:   189344 63b3411e1f3aea4920aee57fd92be904

Debian GNU/Linux 5.0 alias lenny
- --------------------------------

Source archives:

  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1.tar.gz](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1.tar.gz)
    Size/MD5 checksum:  2043258 c23dc4256af67c1644a9dbc5ae0115c8
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1.dsc](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1.dsc)
    Size/MD5 checksum:     1540 60e740d25e23101d5f7a9c90b90ee698

Architecture independent packages:

  [http://security.debian.org/pool/updates/main/a/apt/apt-doc_0.7.20.2+lenny1_all.deb](http://security.debian.org/pool/updates/main/a/apt/apt-doc_0.7.20.2%2Blenny1_all.deb)
    Size/MD5 checksum:   102110 099c1c85cb08d668e9e4668516ebc763
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-doc_0.7.20.2+lenny1_all.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-doc_0.7.20.2%2Blenny1_all.deb)
    Size/MD5 checksum:   125292 68c3671fa441778e16dbbe838cc893e5

alpha architecture (DEC Alpha)

  [http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2+lenny1_alpha.deb](http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2%2Blenny1_alpha.deb)
    Size/MD5 checksum:    59682 c6f12690975904f490bae51e8896d2d2
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_alpha.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2%2Blenny1_alpha.deb)
    Size/MD5 checksum:   108326 e9ba5bbd066c440766eddd3f568f0762
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2+lenny1_alpha.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2%2Blenny1_alpha.deb)
    Size/MD5 checksum:   215062 3e20fc15cdca71bba1011828f0bf7b7d
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1_alpha.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1_alpha.deb)
    Size/MD5 checksum:  1733134 6c1a53539011c887e6436c98dd2f9459

amd64 architecture (AMD x86_64 (AMD64))

  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2+lenny1_amd64.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2%2Blenny1_amd64.deb)
    Size/MD5 checksum:   192392 5c7789c5c31c810c45ad5ff9914449d0
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1_amd64.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1_amd64.deb)
    Size/MD5 checksum:  1657772 1e7f04ceddd59e28213c67d7fd7a0cac
  [http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2+lenny1_amd64.deb](http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2%2Blenny1_amd64.deb)
    Size/MD5 checksum:    59416 52d21612bd4ad79d834c4e86ddd70e00
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_amd64.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2%2Blenny1_amd64.deb)
    Size/MD5 checksum:   108906 b67790820711fb84894286e75a552464

arm architecture (ARM)

  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2+lenny1_arm.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2%2Blenny1_arm.deb)
    Size/MD5 checksum:   207490 b6ae12f5fe907f0aae2cba5aefdae74e
  [http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2+lenny1_arm.deb](http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2%2Blenny1_arm.deb)
    Size/MD5 checksum:    61332 18784a8161b32752a27e5ac6f7ba3fbc
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_arm.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2%2Blenny1_arm.deb)
    Size/MD5 checksum:   109296 7bbcd9dd0c351d822b651cdc71d8b5d3
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1_arm.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1_arm.deb)
    Size/MD5 checksum:  1715472 96a43332145ddc6a32c33cd470d2a98b

armel architecture (ARM EABI)

  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2+lenny1_armel.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2%2Blenny1_armel.deb)
    Size/MD5 checksum:   183664 26c61ff554b0870d7b3b076c58e4cd48
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1_armel.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1_armel.deb)
    Size/MD5 checksum:  1618204 0ece85e822c3a6b9a5fcdbd95154d6fc
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_armel.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2%2Blenny1_armel.deb)
    Size/MD5 checksum:   109100 b5d6253870c61ffcfd86bcbd3abfdc69
  [http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2+lenny1_armel.deb](http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2%2Blenny1_armel.deb)
    Size/MD5 checksum:    59644 7867c8452ef5dc79e7db094d35e823a7

i386 architecture (Intel ia32)

  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1_i386.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1_i386.deb)
    Size/MD5 checksum:  1639116 f2021728f2e92ffe32f7eb1bdc2d6231
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_i386.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2%2Blenny1_i386.deb)
    Size/MD5 checksum:   107586 e5ac47a6a1892c8ae12b0c25136b163d
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2+lenny1_i386.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2%2Blenny1_i386.deb)
    Size/MD5 checksum:   188158 a0f4a903e2fc11d9d6535d310e7f5a9e
  [http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2+lenny1_i386.deb](http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2%2Blenny1_i386.deb)
    Size/MD5 checksum:    58824 68cbda40b139645b347d3168e09c722b

ia64 architecture (Intel ia64)

  [http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2+lenny1_ia64.deb](http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2%2Blenny1_ia64.deb)
    Size/MD5 checksum:    62086 351cdc33240bebee0e0a117ba6d3bbe6
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_ia64.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2%2Blenny1_ia64.deb)
    Size/MD5 checksum:   107180 44f5541e6a61acd8b118cb7c69760ec5
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2+lenny1_ia64.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2%2Blenny1_ia64.deb)
    Size/MD5 checksum:   241400 5f124aa45329433fd321f26c855acd98
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1_ia64.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1_ia64.deb)
    Size/MD5 checksum:  1845584 d817332b5edd89be78c54c9952776879

mips architecture (MIPS (Big Endian))

  [http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2+lenny1_mips.deb](http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2%2Blenny1_mips.deb)
    Size/MD5 checksum:    59008 6a278db4d415830cec5c5eb6b636492b
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2+lenny1_mips.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2%2Blenny1_mips.deb)
    Size/MD5 checksum:   191408 bd2dcf570bee282e29ec379db8a32f14
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_mips.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2%2Blenny1_mips.deb)
    Size/MD5 checksum:   107180 ce3b0385df6fd640bb3b1a2ae35a25d5
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1_mips.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1_mips.deb)
    Size/MD5 checksum:  1616524 78ad8122717febb7952a1d6b14d27250

mipsel architecture (MIPS (Little Endian))

  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_mipsel.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2%2Blenny1_mipsel.deb)
    Size/MD5 checksum:   107190 e231d8c9eea5e564a6d19e9eefc4c25e
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2+lenny1_mipsel.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2%2Blenny1_mipsel.deb)
    Size/MD5 checksum:   190900 4528466ab570e603256df256ea2de659
  [http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2+lenny1_mipsel.deb](http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2%2Blenny1_mipsel.deb)
    Size/MD5 checksum:    58926 48dec2bd2641270e95b4bdea5cc0a8d5
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1_mipsel.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1_mipsel.deb)
    Size/MD5 checksum:  1612746 92056ec6276c0b931859e6110125b861

powerpc architecture (PowerPC)

  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1_powerpc.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1_powerpc.deb)
    Size/MD5 checksum:  1706540 da3fd3aaab8a8e7c2e7028bbd05237a5
  [http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2+lenny1_powerpc.deb](http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2%2Blenny1_powerpc.deb)
    Size/MD5 checksum:    61758 768c59f133efa8d32293ec8cbb756d57
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_powerpc.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2%2Blenny1_powerpc.deb)
    Size/MD5 checksum:   107198 d8483f3ebee001a9524e5c60a2f8201b
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2+lenny1_powerpc.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2%2Blenny1_powerpc.deb)
    Size/MD5 checksum:   211530 b656601d1a6b1dac2a0c43a99ba43e33

s390 architecture (IBM S/390)

  [http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2+lenny1_s390.deb](http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2%2Blenny1_s390.deb)
    Size/MD5 checksum:    59122 34cad4143dc249606699d6580ff5fb66
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2+lenny1_s390.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2%2Blenny1_s390.deb)
    Size/MD5 checksum:   190036 57f06428b14903ce2d7821fd40261593
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_s390.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2%2Blenny1_s390.deb)
    Size/MD5 checksum:   107188 2b4e8b377bf7aad46621dd933c68792c
  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1_s390.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1_s390.deb)
    Size/MD5 checksum:  1649230 8405441f082af794841ba20cebaa7807

sparc architecture (Sun SPARC/UltraSPARC)

  [http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2+lenny1_sparc.deb](http://security.debian.org/pool/updates/main/a/apt/apt_0.7.20.2%2Blenny1_sparc.deb)
    Size/MD5 checksum:  1649532 608c2627d477e3053b53dc622020c449
  [http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2+lenny1_sparc.deb](http://security.debian.org/pool/updates/main/a/apt/apt-utils_0.7.20.2%2Blenny1_sparc.deb)
    Size/MD5 checksum:   192880 5dccb38f4a4cc0dca8aaa485f4168aa3
  [http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_sparc.deb](http://security.debian.org/pool/updates/main/a/apt/libapt-pkg-dev_0.7.20.2%2Blenny1_sparc.deb)
    Size/MD5 checksum:   108746 ff9121fd1ff12c3b6bf406b43126ff44
  [http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2+lenny1_sparc.deb](http://security.debian.org/pool/updates/main/a/apt/apt-transport-https_0.7.20.2%2Blenny1_sparc.deb)
    Size/MD5 checksum:    60400 d6e12757ed28a524264f5e0b426e6779

  These files will probably be moved into the stable distribution on
  its next update.

- ---------------------------------------------------------------------------------
For apt-get: deb <http://security.debian.org/> stable/updates main
For dpkg-ftp: ftp://security.debian.org/debian-security dists/stable/updates/main
Mailing list: debian-security-announce@lists.debian.org
Package info: `apt-cache show <pkg>' and <http://packages.debian.org/><pkg>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iQEcBAEBAgAGBQJJ9H6fAAoJECIIoQCMVaAciTIIAJ2GW/XljzRPQcISazdbjmQm
VV2OywJUYwKcEBhscNFdf2TuAJaJ2ViRGboqirKzboFq+eDDDPBES5MAP6nOW771
6kAoj3vxHZJXoRe8hjaYGz40frOFdQF/nP7tFtoSCLVUDLxwyz5YFSe1mS0tYe6s
MX9Bi14wsqeB+MKDULUJwG8UGBrxz2pP15kDF83s17uLe0RmSoKmHMwAaF/0TkqW
hE74JsV0PUa9ITPInzvbcxdfQPL76PjWRKaXwduOGrnctL3+xQPqiCPosYdAwalJ
JUqj+pUPchdSDOY9cn8srRmhWU80ITypeE4UBMfAT4LIV3LkNZaOZpy76remUis=
=woEu
-----END PGP SIGNATURE-----

```

---



=== Content from bugs.launchpad.net_33505e3e_20250125_192506.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[coreutils package](https://launchpad.net/ubuntu/%2Bsource/coreutils)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/coreutils)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/coreutils)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/coreutils)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/coreutils)

# date returns "invalid date" for some timezone's DST

Bug #354793 reported by
[Alexandre Martani](https://launchpad.net/~amartani)
on 2009-04-03

[270](/%2Bhelp-bugs/bug-heat.html)

This bug affects 3 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [apt (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/apt "Latest release: 2.9.25, uploaded to main on 2025-01-22 16:28:38.682201+00:00 by APT Development Team (deity), maintained by APT Development Team (deity)") | Fix Released | High | [Michael Vogt](https://launchpad.net/~mvo) |  |
|  | [Dapper](https://bugs.launchpad.net/ubuntu/dapper/%2Bsource/apt) | Fix Released | High | [Jamie Strandboge](https://launchpad.net/~jdstrand) |  |
|  | [Gutsy](https://bugs.launchpad.net/ubuntu/gutsy/%2Bsource/apt) | Won't Fix | High | [Jamie Strandboge](https://launchpad.net/~jdstrand) |  |
|  | [Hardy](https://bugs.launchpad.net/ubuntu/hardy/%2Bsource/apt) | Fix Released | High | [Jamie Strandboge](https://launchpad.net/~jdstrand) |  |
|  | [Intrepid](https://bugs.launchpad.net/ubuntu/intrepid/%2Bsource/apt) | Fix Released | High | [Jamie Strandboge](https://launchpad.net/~jdstrand) |  |
|  | [Jaunty](https://bugs.launchpad.net/ubuntu/jaunty/%2Bsource/apt) | Fix Released | High | [Michael Vogt](https://launchpad.net/~mvo) |  |
|  | [coreutils (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils "Latest release: 9.4-3.1ubuntu1, uploaded to main on 2024-08-09 17:35:09.722006+00:00 by Dominik Viererbe (dviererbe), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Won't Fix | Medium | Unassigned |  |
|  | [Dapper](https://bugs.launchpad.net/ubuntu/dapper/%2Bsource/coreutils) | Won't Fix | Undecided | Unassigned |  |
|  | [Gutsy](https://bugs.launchpad.net/ubuntu/gutsy/%2Bsource/coreutils) | Won't Fix | Undecided | Unassigned |  |
|  | [Hardy](https://bugs.launchpad.net/ubuntu/hardy/%2Bsource/coreutils) | Won't Fix | Undecided | Unassigned |  |
|  | [Intrepid](https://bugs.launchpad.net/ubuntu/intrepid/%2Bsource/coreutils) | Won't Fix | Undecided | Unassigned |  |
|  | [Jaunty](https://bugs.launchpad.net/ubuntu/jaunty/%2Bsource/coreutils) | Won't Fix | Medium | Unassigned |  |

### Bug Description

Date command gives an error when trying to get a day that starts the daylight saving time. Examples:

$ date --date=2008-10-18

SÃ¡b Out 18 00:00:00 BRT 2008

$ date --date=2008-10-19

date: data invÃ¡lida "2008-10-19"

$ date --date=2008-10-20

Seg Out 20 00:00:00 BRST 2008

$ date --date=2009-10-17

SÃ¡b Out 17 00:00:00 BRT 2009

$ date --date=2009-10-18

date: data invÃ¡lida "2009-10-18"

$ date --date=2009-10-19

Seg Out 19 00:00:00 BRST 2009

I checked this as a security bug as this can cause scripts to fail. For example, cron's apt script fails if update-stamp is in this day, causing the system to never more update periodically. In other words: Many servers can be out of date because of this bug.

## Related branches

[lp:ubuntu/lucid/apt](https://code.launchpad.net/~ubuntu-branches/ubuntu/lucid/apt/lucid)

## CVE References

* [2009-1300](/bugs/cve/2009-1300 "apt 0.7.20 does not check when the da...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-03: |  |  | [#1](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/1) |
| --- | --- | --- | --- |

Thanks for taking the time to report this bug and helping to make Ubuntu better. We appreciate the difficulties you are facing, but this appears to be a "regular" (non-security) bug. I have unmarked it as a security issue since this bug does not show evidence of allowing attackers to cross privilege boundaries nor directly cause loss of data/privacy. Please feel free to report any other bugs you may find.

Thanks for taking the time to report this bug and helping to make Ubuntu better. We appreciate the difficulties you are facing, but this appears to be a "regular" (non-security) bug. I have unmarked it as a security issue since this bug does not show evidence of allowing attackers to cross privilege boundaries nor directly cause loss of data/privacy. Please feel free to report any other bugs you may find.

| **security vulnerability**: | yes â†’ no |
| --- | --- |
| **visibility**: | private â†’ public |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alexandre Martani (amartani)](https://launchpad.net/~amartani) wrote on 2009-04-07:  [**Re: date error on saving time starting day**](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/2) |  |  | [#2](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/2) |
| --- | --- | --- | --- |

If this isn't a security bug on date, it is, at least, a security bug on apt, since, as I said, it makes well configured servers out of date.

If this isn't a security bug on date, it is, at least, a security bug on apt, since, as I said, it makes well configured servers out of date.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [C de-Avillez (hggdh2)](https://launchpad.net/~hggdh2) wrote on 2009-04-08: |  |  | [#3](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/3) |
| --- | --- | --- | --- |

Can you please give us:

1. the version of Ubuntu you are running;

2. the output for 'date --version'

3. Your locale (run 'locale', and paste the output here).

Per the output you show I would guess you are in a PT locale, but I do not know if pt\_BR or pt\_PT.

I have tried your commands with both date 6.10 and 7.2.10, under the en\_US and pt\_PT locales, and could not reproduce it (for the US DST).

Can you also give us what exactly went wrong on your system(s)? Which component failed, and how did it fail? I cannot see, at least on my systems, any cron entries for root.

Can you please give us:
1. the version of Ubuntu you are running;
2. the output for 'date --version'
3. Your locale (run 'locale', and paste the output here).
Per the output you show I would guess you are in a PT locale, but I do not know if pt\_BR or pt\_PT.
I have tried your commands with both date 6.10 and 7.2.10, under the en\_US and pt\_PT locales, and could not reproduce it (for the US DST).
Can you also give us what exactly went wrong on your system(s)? Which component failed, and how did it fail? I cannot see, at least on my systems, any cron entries for root.

| Changed in coreutils (Ubuntu): | |
| --- | --- |
| **importance**: | Undecided â†’ Medium |
| **status**: | New â†’ Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alexandre Martani (amartani)](https://launchpad.net/~amartani) wrote on 2009-04-08: |  |  | [#4](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/4) |
| --- | --- | --- | --- |

1. Running Ubuntu Server 8.04.2

2. date (GNU coreutils) 6.10

3. locale

LANG=pt\_BR.UTF-8

LANGUAGE=pt\_BR:pt:en

LC\_CTYPE="pt\_BR.UTF-8"

LC\_NUMERIC="pt\_BR.UTF-8"

LC\_TIME="pt\_BR.UTF-8"

LC\_COLLATE="pt\_BR.UTF-8"

LC\_MONETARY="pt\_BR.UTF-8"

LC\_MESSAGES="pt\_BR.UTF-8"

LC\_PAPER="pt\_BR.UTF-8"

LC\_NAME="pt\_BR.UTF-8"

LC\_ADDRESS="pt\_BR.UTF-8"

LC\_TELEPHONE="pt\_BR.UTF-8"

LC\_MEASUREMENT="pt\_BR.UTF-8"

LC\_IDENTIFICATION="pt\_BR.UTF-8"

LC\_ALL=

It happens when using BRT timezone.

I found the same bug reported here:

<http://lists.gnu.org/archive/html/bug-coreutils/2007-09/msg00176.html>

This causes the script /etc/cron.daily/apt fail on line 53:

stamp=$(date --date=$(date -r $stamp --iso-8601) +%s)

In this script, $stamp assumes, among others, the values:

/var/lib/apt/periodic/update-stamp

/var/lib/apt/periodic/upgrade-stamp

/var/lib/apt/periodic/autoclean-stamp

The biggest problem is, if these files where last modified on the dates that triggers the bug, it makes the script exit, without even touching the files again. So, the system is never more updated periodically.

1. Running Ubuntu Server 8.04.2
2. date (GNU coreutils) 6.10
3. locale
LANG=pt\_BR.UTF-8
LANGUAGE=pt\_BR:pt:en
LC\_CTYPE="pt\_BR.UTF-8"
LC\_NUMERIC="pt\_BR.UTF-8"
LC\_TIME="pt\_BR.UTF-8"
LC\_COLLATE="pt\_BR.UTF-8"
LC\_MONETARY="pt\_BR.UTF-8"
LC\_MESSAGES="pt\_BR.UTF-8"
LC\_PAPER="pt\_BR.UTF-8"
LC\_NAME="pt\_BR.UTF-8"
LC\_ADDRESS="pt\_BR.UTF-8"
LC\_TELEPHONE="pt\_BR.UTF-8"
LC\_MEASUREMENT="pt\_BR.UTF-8"
LC\_IDENTIFICATION="pt\_BR.UTF-8"
LC\_ALL=
It happens when using BRT timezone.
I found the same bug reported here:
http://lists.gnu.org/archive/html/bug-coreutils/2007-09/msg00176.html
This causes the script /etc/cron.daily/apt fail on line 53:
stamp=$(date --date=$(date -r $stamp --iso-8601) +%s)
In this script, $stamp assumes, among others, the values:
/var/lib/apt/periodic/update-stamp
/var/lib/apt/periodic/upgrade-stamp
/var/lib/apt/periodic/autoclean-stamp
The biggest problem is, if these files where last modified on the dates that triggers the bug, it makes the script exit, without even touching the files again. So, the system is never more updated periodically.

[Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur)
on 2009-04-08

| Changed in apt (Ubuntu): | |
| --- | --- |
| **status**: | New â†’ Confirmed |
| Changed in coreutils (Ubuntu): | |
| **status**: | Incomplete â†’ Confirmed |
| Changed in apt (Ubuntu): | |
| **importance**: | Undecided â†’ High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-08: |  |  | [#5](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/5) |
| --- | --- | --- | --- |

/etc/cron.daily/apt needs to be more robust in case the stamp files have an invalid date. The upstream bug clearly indicates that the developers don't intend to fix this bug, so /etc/cron.daily/apt needs to better handle this condition.

/etc/cron.daily/apt needs to be more robust in case the stamp files have an invalid date. The upstream bug clearly indicates that the developers don't intend to fix this bug, so /etc/cron.daily/apt needs to better handle this condition.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-08: |  |  | [#6](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/6) |
| --- | --- | --- | --- |

Marking coreutils bug as "Won't Fix" as upstream isn't fixing it because they feel that returning 'Invalid date' is correct behavior.

Marking coreutils bug as "Won't Fix" as upstream isn't fixing it because they feel that returning 'Invalid date' is correct behavior.

| Changed in coreutils (Ubuntu): | |
| --- | --- |
| **status**: | Confirmed â†’ Won't Fix |
| **security vulnerability**: | no â†’ yes |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [C de-Avillez (hggdh2)](https://launchpad.net/~hggdh2) wrote on 2009-04-08: |  |  | [#7](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/7) |
| --- | --- | --- | --- |

@Alexandre: thank you for bringing this to our attention. I do not believe 'date' behaviour will be changed (since it is, after all, correct), but an internal discussion with the security folks got us back as a security issue.

Please do keep on bringing us any issues you find.

@Alexandre: thank you for bringing this to our attention. I do not believe 'date' behaviour will be changed (since it is, after all, correct), but an internal discussion with the security folks got us back as a security issue.
Please do keep on bringing us any issues you find.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-08: |  |  | [#8](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/8) |
| --- | --- | --- | --- |

FYI-- an affected timezone is America/Sao\_Paulo (at least a few others in BRT are not affected). With America/Sao\_Paulo, have (locale does not matter):

$ date --date=2009-10-18

date: invalid date `2009-10-18'

FYI-- an affected timezone is America/Sao\_Paulo (at least a few others in BRT are not affected). With America/Sao\_Paulo, have (locale does not matter):
$ date --date=2009-10-18
date: invalid date `2009-10-18'

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-08: |  |  | [#9](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/9) |
| --- | --- | --- | --- |

* [354793.diff](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/544623/%2Bfiles/354793.diff)
  [Edit](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/544623)
  (796 bytes,
  text/plain)

Here is a possible fix for apt. Basically, if date exits with error when getting the data on the stamp file, remove the stamp file and continue as if the stamp file didn't exist. This should allow apt to recover regardless of DST or date bugs.

Here is a possible fix for apt. Basically, if date exits with error when getting the data on the stamp file, remove the stamp file and continue as if the stamp file didn't exist. This should allow apt to recover regardless of DST or date bugs.

| Changed in apt (Ubuntu): | |
| --- | --- |
| **status**: | Confirmed â†’ In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [C de-Avillez (hggdh2)](https://launchpad.net/~hggdh2) wrote on 2009-04-08: |  |  | [#10](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/10) |
| --- | --- | --- | --- |

I am not sure why I also got coreutils nominated for releases... sorry. I do not know if Dapper/Gutsy are also affected (don't have them).

I am not sure why I also got coreutils nominated for releases... sorry. I do not know if Dapper/Gutsy are also affected (don't have them).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alexandre Martani (amartani)](https://launchpad.net/~amartani) wrote on 2009-04-08: |  |  | [#11](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/11) |
| --- | --- | --- | --- |

About the fix, I think $now should also be fixed, as it will be invalid on these dates.

Regarding coreutils, I really can't understand how this can be considered the correct behavior. If it accepts dates formated as "yyyy-mm-dd", it should handle it the best as possible. I wouldn't be surprised to find other scripts that rely on this. And, if you decide this is really correct, there must be some kind of warning somewhere, so that other programmers don't need to predict such strange behavior.

About the fix, I think $now should also be fixed, as it will be invalid on these dates.
Regarding coreutils, I really can't understand how this can be considered the correct behavior. If it accepts dates formated as "yyyy-mm-dd", it should handle it the best as possible. I wouldn't be surprised to find other scripts that rely on this. And, if you decide this is really correct, there must be some kind of warning somewhere, so that other programmers don't need to predict such strange behavior.

[Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand)
on 2009-04-08

| **summary**: | - date error on saving time starting day+ date returns "invalid date" for some timezone's DST |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-08: |  |  | [#12](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/12) |
| --- | --- | --- | --- |

Alexandre: 'now' shouldn't need to be fixed, because date will get the system time and convert it to the proper date. The problem comes with 'stamp' using 'date -r' on a file on the system, which could conceivably have the wrong date. Please correct me if I missed something.

As for coreutils, upstream (ie, not me or Ubuntu) has decided that the time in question and other dates such as 'Feb 30' are wrong because they don't exist and choose to express that as an error condition. As such, we need to adjust our tools/scripts to account for this.

Alexandre: 'now' shouldn't need to be fixed, because date will get the system time and convert it to the proper date. The problem comes with 'stamp' using 'date -r' on a file on the system, which could conceivably have the wrong date. Please correct me if I missed something.
As for coreutils, upstream (ie, not me or Ubuntu) has decided that the time in question and other dates such as 'Feb 30' are wrong because they don't exist and choose to express that as an error condition. As such, we need to adjust our tools/scripts to account for this.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-08: |  |  | [#13](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/13) |
| --- | --- | --- | --- |

Alexandre: I see the issue with 'now' now. Since we use 'date --iso-8601' and feed that to date, then the hour, minute and second are all zero. My patch doesn't properly address using --iso-8601 for stamp either. I'll send an updated patch in a few minutes.

Alexandre: I see the issue with 'now' now. Since we use 'date --iso-8601' and feed that to date, then the hour, minute and second are all zero. My patch doesn't properly address using --iso-8601 for stamp either. I'll send an updated patch in a few minutes.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [C de-Avillez (hggdh2)](https://launchpad.net/~hggdh2) wrote on 2009-04-08: |  |  | [#14](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/14) |
| --- | --- | --- | --- |

I agree that other scripts may probably also be hit by this type of error. Nevertheless, 'date' \*does\* return a non-zero return code if an error if found; \*not\* checking if a command ended in error is a much more serious programming error than this, ah, "invalid" date returned. With that said, if 'date' did not return a non-zero RC on this... then \*this\* is certainly a bug, no doubt.

The behaviour of 'date' is well-documented (or, at least, well, documented), and this type of 'invalid' return can happen. We can discuss upstream (in the same mailing list you quoted) -- this would be the best venue. I can see -- and, again, quoting from the email thread you provided -- that a case that 'date' should return the first available time in a date, instead or erroring out if 00:00:00 (or some other time/date/TZ combination) does not exist.

Just be aware that this will be a "short blanket" thing, since (now) the apt cron scripts will work, but somewhere out in the wild world someone will have a script that depends on the day beginning at 00:00:00... and this will now fail!

I agree that other scripts may probably also be hit by this type of error. Nevertheless, 'date' \*does\* return a non-zero return code if an error if found; \*not\* checking if a command ended in error is a much more serious programming error than this, ah, "invalid" date returned. With that said, if 'date' did not return a non-zero RC on this... then \*this\* is certainly a bug, no doubt.
The behaviour of 'date' is well-documented (or, at least, well, documented), and this type of 'invalid' return can happen. We can discuss upstream (in the same mailing list you quoted) -- this would be the best venue. I can see -- and, again, quoting from the email thread you provided -- that a case that 'date' should return the first available time in a date, instead or erroring out if 00:00:00 (or some other time/date/TZ combination) does not exist.
Just be aware that this will be a "short blanket" thing, since (now) the apt cron scripts will work, but somewhere out in the wild world someone will have a script that depends on the day beginning at 00:00:00... and this will now fail!

[Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand)
on 2009-04-08

| Changed in coreutils (Ubuntu Dapper): | |
| --- | --- |
| **status**: | New â†’ Won't Fix |
| Changed in coreutils (Ubuntu Gutsy): | |
| **status**: | New â†’ Won't Fix |
| Changed in coreutils (Ubuntu Hardy): | |
| **status**: | New â†’ Won't Fix |
| Changed in coreutils (Ubuntu Intrepid): | |
| **status**: | New â†’ Won't Fix |
| Changed in apt (Ubuntu Dapper): | |
| **status**: | New â†’ In Progress |
| **importance**: | Undecided â†’ High |
| **assignee**: | nobody â†’ Jamie Strandboge (jdstrand) |
| Changed in apt (Ubuntu Gutsy): | |
| **status**: | New â†’ In Progress |
| **importance**: | Undecided â†’ High |
| **assignee**: | nobody â†’ Jamie Strandboge (jdstrand) |
| Changed in apt (Ubuntu Hardy): | |
| **status**: | New â†’ In Progress |
| **importance**: | Undecided â†’ High |
| **assignee**: | nobody â†’ Jamie Strandboge (jdstrand) |
| Changed in apt (Ubuntu Intrepid): | |
| **status**: | New â†’ In Progress |
| **importance**: | Undecided â†’ High |
| **assignee**: | nobody â†’ Jamie Strandboge (jdstrand) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-08: |  |  | [#15](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/15) |
| --- | --- | --- | --- |

* [354793\_v2.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545150/%2Bfiles/354793_v2.patch)
  [Edit](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545150)
  (1.3 KiB,
  text/plain)

Here is an updated patch. It should now properly handle --iso-8601 for 'stamp' and 'now'. This patch is against 0.7.20.2ubuntu5 in Jaunty.

Here is an updated patch. It should now properly handle --iso-8601 for 'stamp' and 'now'. This patch is against 0.7.20.2ubuntu5 in Jaunty.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-08: |  |  | [#16](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/16) |
| --- | --- | --- | --- |

* [354793\_test.sh](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545151/%2Bfiles/354793_test.sh)
  [Edit](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545151)
  (863 bytes,
  text/x-sh)

Here is a simple test case for the bug. It will return '2' if the stamp file has a bad date, '1' if 'now' is a bad date (this is hardcoded) and '0' if all is well. The code is the same as in the patch, except for the return codes and hardcoded 'now'. Note, you need to have your timezone set to America/San\_Paulo.

Here is a simple test case for the bug. It will return '2' if the stamp file has a bad date, '1' if 'now' is a bad date (this is hardcoded) and '0' if all is well. The code is the same as in the patch, except for the return codes and hardcoded 'now'. Note, you need to have your timezone set to America/San\_Paulo.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-08: |  |  | [#17](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/17) |
| --- | --- | --- | --- |

* [354793.tar](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545164/%2Bfiles/354793.tar)
  [Edit](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545164)
  (10.0 KiB,
  application/x-tar)

Here is a tar file which contains the file 'foo', with a date that will trigger the bug. To use with the test case:

$ tar -xvf ./354793.tar

foo

tar: foo: time stamp 2009-10-18 01:00:00 is 16613753.588577226 s in the future

$ ./354793\_test.sh ./foo ; echo "$?"

2

$ ./354793\_test.sh ./foo ; echo "$?"

date: ./foo: No such file or directory

1

The first run removed the file, and the second checked the hard coded date.

Here is a tar file which contains the file 'foo', with a date that will trigger the bug. To use with the test case:
$ tar -xvf ./354793.tar
foo
tar: foo: time stamp 2009-10-18 01:00:00 is 16613753.588577226 s in the future
$ ./354793\_test.sh ./foo ; echo "$?"
2
$ ./354793\_test.sh ./foo ; echo "$?"
date: ./foo: No such file or directory
1
The first run removed the file, and the second checked the hard coded date.

[Steve Langasek (vorlon)](https://launchpad.net/~vorlon)
on 2009-04-10

| Changed in apt (Ubuntu Jaunty): | |
| --- | --- |
| **assignee**: | nobody â†’ mvo |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2009-04-17: |  |  | [#18](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/18) |
| --- | --- | --- | --- |

This bug was fixed in the package apt - 0.7.20.2ubuntu6

---------------

apt (0.7.20.2ubuntu6) jaunty; urgency=low

[ Jamie Strandboge ]

Â Â \* apt.cron.daily: catch invalid dates due to DST time changes

Â Â Â Â in the stamp files (LP: [#354793](/bugs/354793))

[ Michael Vogt ]

Â Â \* methods/gpgv.cc:

Â Â Â Â - properly check for expired and revoked keys (closes: #433091)

Â Â Â Â Â Â LP: [#356012](/bugs/356012)

-- Michael Vogt <email address hidden> Wed, 08 Apr 2009 22:39:50 +0200

This bug was fixed in the package apt - 0.7.20.2ubuntu6
---------------
apt (0.7.20.2ubuntu6) jaunty; urgency=low
[ Jamie Strandboge ]
\* apt.cron.daily: catch invalid dates due to DST time changes
in the stamp files (LP: #354793)
[ Michael Vogt ]
\* methods/gpgv.cc:
- properly check for expired and revoked keys (closes: #433091)
LP: #356012
-- Michael Vogt <michael.vogt@ubuntu.com> Wed, 08 Apr 2009 22:39:50 +0200

| Changed in apt (Ubuntu Jaunty): | |
| --- | --- |
| **status**: | In Progress â†’ Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-17: |  |  | [#19](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/19) |
| --- | --- | --- | --- |

I won't have an upload for Gutsy, because I won't be publishing this until next week, and Gutsy will be EOL.

I won't have an upload for Gutsy, because I won't be publishing this until next week, and Gutsy will be EOL.

| Changed in apt (Ubuntu Gutsy): | |
| --- | --- |
| **status**: | In Progress â†’ Won't Fix |
| Changed in apt (Ubuntu Dapper): | |
| **status**: | In Progress â†’ Fix Committed |
| Changed in apt (Ubuntu Hardy): | |
| **status**: | In Progress â†’ Fix Committed |
| Changed in apt (Ubuntu Intrepid): | |
| **status**: | In Progress â†’ Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jamie Strandboge (jdstrand)](https://launchpad.net/~jdstrand) wrote on 2009-04-20: |  |  | [#20](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/20) |
| --- | --- | --- | --- |

<http://www.ubuntu.com/usn/usn-762-1>

http://www.ubuntu.com/usn/usn-762-1

| Changed in apt (Ubuntu Dapper): | |
| --- | --- |
| **status**: | Fix Committed â†’ Fix Released |
| Changed in apt (Ubuntu Hardy): | |
| **status**: | Fix Committed â†’ Fix Released |
| Changed in apt (Ubuntu Intrepid): | |
| **status**: | Fix Committed â†’ Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [tocals (carlos-listas)](https://launchpad.net/~carlos-listas) wrote on 2009-11-17: |  |  | [#21](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/21) |
| --- | --- | --- | --- |

same error:

date: invalid date `2009/10/18'

==================================================================================

Linux hp-work 2.6.28-16-generic #55-Ubuntu SMP Tue Oct 20 19:48:32 UTC 2009 x86\_64 GNU/Linux

-----------------------------------------------------

date --version

date (GNU coreutils) 6.10

Copyright (C) 2008 Free Software Foundation, Inc.

License GPLv3+: GNU GPL version 3 or later <<http://gnu.org/licenses/gpl.html>>

This is free software: you are free to change and redistribute it.

There is NO WARRANTY, to the extent permitted by law.

Written by David MacKenzie.

---------------------------------------------------------------------------------

same error:
date: invalid date `2009/10/18'
==================================================================================
Linux hp-work 2.6.28-16-generic #55-Ubuntu SMP Tue Oct 20 19:48:32 UTC 2009 x86\_64 GNU/Linux
-----------------------------------------------------
date --version
date (GNU coreutils) 6.10
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Written by David MacKenzie.
---------------------------------------------------------------------------------

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [gep (gep)](https://launchpad.net/~gep) wrote on 2010-03-28: |  |  | [#22](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/22) |
| --- | --- | --- | --- |

I have a problem setting the date on:

gep@gep-work:~$ sudo date 03280243

date: invalid date `03280243'

But:

gep@gep-work:~$ sudo date 03280343

Sun Mar 28 03:43:00 EEST 2010

I have a problem setting the date on:
gep@gep-work:~$ sudo date 03280243
date: invalid date `03280243'
But:
gep@gep-work:~$ sudo date 03280343
Sun Mar 28 03:43:00 EEST 2010

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Raulo (raulo-olapodrido)](https://launchpad.net/~raulo-olapodrido) wrote on 2011-10-24: |  |  | [#23](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/23) |
| --- | --- | --- | --- |

It is still not working as expected with Lucid.

And it's breaking a script of mine, sending every instance to an endless, CPU eating loopâ€¦

It is still not working as expected with Lucid.
And it's breaking a script of mine, sending every instance to an endless, CPU eating loopâ€¦

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Eduardo (ebatista)](https://launchpad.net/~ebatista) wrote on 2015-10-18: |  |  | [#24](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/comments/24) |
| --- | --- | --- | --- |

It happens on Ubuntu 14.04 too.

# date

Sun Oct 18 02:08:18 BRST 2015

# date --date=2015-10-18

date: invalid date â€˜2015-10-18â€™

# date --date=2015-10-19

Mon Oct 19 00:00:00 BRST 2015

# lsb\_release -a

No LSB modules are available.

Distributor ID: Ubuntu

Description: Ubuntu 14.04.3 LTS

Release: 14.04

Codename: trusty

It happens on Ubuntu 14.04 too.
# date
Sun Oct 18 02:08:18 BRST 2015
# date --date=2015-10-18
date: invalid date â€˜2015-10-18â€™
# date --date=2015-10-19
Mon Oct 19 00:00:00 BRST 2015
# lsb\_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description: Ubuntu 14.04.3 LTS
Release: 14.04
Codename: trusty

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/coreutils/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [354793.diff](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/544623/%2Bfiles/354793.diff)
  [Edit](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/544623 "Change patch details")
* [354793\_v2.patch](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545150/%2Bfiles/354793_v2.patch)
  [Edit](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545150 "Change patch details")

* [Add patch](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Baddcomment?field.patch=on)

## Bug attachments

* [354793\_test.sh](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545151/%2Bfiles/354793_test.sh)
  [Edit](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545151 "Change attachment details")
* [354793.tar](https://bugs.launchpad.net/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545164/%2Bfiles/354793.tar)
  [Edit](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Battachment/545164 "Change attachment details")

* [Add attachment](/ubuntu/%2Bsource/coreutils/%2Bbug/354793/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
Â â€¢
[Take the tour](https://launchpad.net/%2Btour)
Â â€¢
[Read the guide](https://help.launchpad.net/)

Â© 2004
[CanonicalÂ Ltd.](http://canonical.com/)
Â â€¢
[Terms of use](https://launchpad.net/legal)
Â â€¢
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
Â â€¢
[Contact Launchpad Support](/feedback)
Â â€¢
[Blog](http://blog.launchpad.net/)
Â â€¢
[Careers](https://canonical.com/careers)
Â â€¢
[System status](https://ubuntu.social/%40launchpadstatus)
Â â€¢
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.debian.org_3b9c291e_20250125_192501.html ===

# Debian Bug report logs - #523213 /etc/cron.daily/apt does not check return code of date

[![version graph](version.cgi?package=apt;collapse=1;height=2;absolute=0;fixed=0.7.21;fixed=apt%2F0.7.20.2%2Blenny1;fixed=apt%2F0.6.46.4-0.1%2Betch1;fixed=apt%2F0.7.20.2%2Bsqueeze1;found=apt%2F0.7.20.2;width=2)](version.cgi?info=1;found=apt%2F0.7.20.2;fixed=0.7.21;fixed=apt%2F0.7.20.2%2Blenny1;fixed=apt%2F0.6.46.4-0.1%2Betch1;fixed=apt%2F0.7.20.2%2Bsqueeze1;package=apt;absolute=0;collapse=1)

Package:
[apt](pkgreport.cgi?package=apt);
Maintainer for [apt](pkgreport.cgi?package=apt) is [APT Development Team <deity@lists.debian.org>](pkgreport.cgi?maint=deity%40lists.debian.org); Source for [apt](pkgreport.cgi?package=apt) is [src:apt](pkgreport.cgi?src=apt) ([PTS](https://tracker.debian.org/pkg/apt), [buildd](https://buildd.debian.org/apt), [popcon](https://qa.debian.org/popcon.php?package=apt)).

Reported by: [Jamie Strandboge <jamie@ubuntu.com>](pkgreport.cgi?submitter=jamie%40ubuntu.com)

Date: Wed, 8 Apr 2009 22:42:01 UTC

Severity: *grave*

Tags: patch, security

Found in version apt/0.7.20.2

Fixed in versions 0.7.21, apt/0.7.20.2+lenny1, apt/0.6.46.4-0.1+etch1, apt/0.7.20.2+squeeze1

**Done:** Michael Vogt <mvo@debian.org>

Bug is archived. No further changes may be made.

Display info messages

View this report as an [mbox folder](bugreport.cgi?bug=523213;mbox=yes), [status mbox](bugreport.cgi?bug=523213;mbox=yes;mboxstatus=yes), [maintainer mbox](bugreport.cgi?bug=523213;mbox=yes;mboxmaint=yes)

---

**Report forwarded**
to `debian-bugs-dist@lists.debian.org, team@security.debian.org, Debian Security Team <team@security.debian.org>, Debian Testing Security Team <secure-testing-team@lists.alioth.debian.org>, APT Development Team <deity@lists.debian.org>`:

`Bug#523213`; Package `apt`.
(Wed, 08 Apr 2009 22:42:03 GMT) ([full text](bugreport.cgi?bug=523213;msg=2), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=2), [link](#1)).

---

**Acknowledgement sent**
to `Jamie Strandboge <jamie@ubuntu.com>`:

New Bug report received and forwarded. Copy sent to `team@security.debian.org, Debian Security Team <team@security.debian.org>, Debian Testing Security Team <secure-testing-team@lists.alioth.debian.org>, APT Development Team <deity@lists.debian.org>`.
(Wed, 08 Apr 2009 22:42:03 GMT) ([full text](bugreport.cgi?bug=523213;msg=4), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=4), [link](#3)).

---

[Message #5](#5) received at submit@bugs.debian.org ([full text](bugreport.cgi?bug=523213;msg=5), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=5), reply):

![](/cgi-bin/libravatar.cgi?email=jamie%40ubuntu.com)
From: Jamie Strandboge <jamie@ubuntu.com>
To: Debian Bug Tracking System <submit@bugs.debian.org>
Subject: /etc/cron.daily/apt does not check return code of date
Date: Wed, 08 Apr 2009 17:39:37 -0500
```
[[Message part 1](bugreport.cgi?att=0;bug=523213;msg=5) (text/plain, inline)]
```
```
Package: apt
Version: 0.7.20.2
Severity: grave
Tags: security patch
Justification: user security hole

The following is also being sent to oss-security@lists.openwall.com for
a CVE request.

Summary
-------
Systems in certain timezones with automatic updates enabled won't be
upgraded on the first day of DST and some systems in affected timezones
could end up with automatic updates being disabled permanently. Normal
usage of apt is not affected.

Discovery credited to: Alexandre Martani

Public bug: <https://launchpad.net/bugs/354793>

The Problem
-----------
The problem arises because the date command errors out on dates/times
that are invalid. Eg, DST starts at 03:00 in the Central time zone of
the US:

$ date --date="2009-03-08 02:00:00"
date: invalid date `2009-03-08 02:00:00'

This is fine and in and of itself not a problem. However,
/etc/cron.daily/apt has:
    stamp=$(date --date=$(date -r $stamp --iso-8601) +%s)
    now=$(date --date=$(date --iso-8601) +%s)

'--iso-8601' creates dates of the form YYYY-MM-DD. Since this is then
fed into the date command, the hour, minute and second all default to
0. Some timezones start their DST at midnight, with America/Sao_Paulo as
one example. Eg, on a system configured to use the America/Sao_Paulo
timezone:

$ date --date=2009-10-18
date: invalid date `2009-10-18'

This condition causes 'delta=$(($now-$stamp))' in check_stamp() to fail
when $stamp is empty (returning non-zero) or for when $now is empty,
'$delta -ge $interval' evaluates to false because delta is negative
(return non-zero). Either condition results in all or part of the
automatic update process to not be performed.

Affected Users
--------------
For users in timezones with DST starting at midnight with automatic
updates enabled, this can lead to the following error conditions:

1. /etc/cron.daily/apt is run on the first day of the DST, resulting in
'$delta -ge $interval' being negative because 'now' is empty and the
automatic update is not run. The timestamps are not updated, so the
automatic update will occur normally the following day.

2. /etc/cron.daily/apt is run late in the day on the day prior to DST
(eg 23:59 on 2009-10-17) and finishes on the day of DST (eg one minute
later, at 01:00 on 2009-10-18). This will update the stamp files to have
the date of the DST. At this point, apt cannot recover and automatic
updates are disabled until manually updating/removing the stamp files.

3. A user using a non-affected timezone and has /etc/cron.daily/apt run
normally on the day of the DST. Sometime after that, but before
/etc/cron.daily/apt runs again, the user changes her timezone to an
affected timezone. At this point, apt cannot recover and automatic
updates are disabled until manually updating/removing the stamp files.

While all users in scenario '1' are affected, they will eventually get
their updates. Though the number of users in '2' and especially '3' are
presumed low, the impact for these users is very high, since the
expected, automatic security updates will never be applied.

The Fix
-------
The fix is simply to check the return codes of date, and return '0' if
the date for 'now' fails, and remove the bad stamp file and return '0'
if the date for 'stamp' fails. A patch is attached to the Ubuntu bug,
though I have contacted the Debian and Ubuntu maintainer directly and he
is working on an update for the development releases of Debian and
Ubuntu.

Thanks,
Jamie

-- Package-specific info:

-- (no /etc/apt/preferences present) --

-- (/etc/apt/sources.list present, but not submitted) --

-- System Information:
Debian Release: squeeze/sid
  APT prefers unstable
  APT policy: (500, 'unstable')
Architecture: amd64 (x86_64)

Kernel: Linux 2.6.28-11-generic (SMP w/2 CPU cores)
Locale: LANG=C, LC_CTYPE=C (charmap=ANSI_X3.4-1968)
Shell: /bin/sh linked to /bin/bash

Versions of packages apt depends on:
ii  debian-archive-keyring        2009.01.31 GnuPG archive keys of the Debian a
ii  libc6                         2.9-7      GNU C Library: Shared libraries
ii  libgcc1                       1:4.3.3-5  GCC support library
ii  libstdc++6                    4.3.3-5    The GNU Standard C++ Library v3

apt recommends no packages.

Versions of packages apt suggests:
pn  apt-doc                       <none>     (no description available)
pn  aptitude | synaptic | gnome-a <none>     (no description available)
ii  bzip2                         1.0.5-1    high-quality block-sorting file co
ii  dpkg-dev                      1.14.25    Debian package development tools
ii  lzma                          4.43-14    Compression method of 7z format in
pn  python-apt                    <none>     (no description available)

-- no debconf information

```
```
[[354793_v2.patch](bugreport.cgi?att=1;bug=523213;filename=354793_v2.patch;msg=5) (text/x-diff, attachment)]
```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, APT Development Team <deity@lists.debian.org>`:

`Bug#523213`; Package `apt`.
(Thu, 09 Apr 2009 07:36:06 GMT) ([full text](bugreport.cgi?bug=523213;msg=7), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=7), [link](#6)).

---

**Acknowledgement sent**
to `Michael Vogt <mvo@debian.org>`:

Extra info received and forwarded to list. Copy sent to `APT Development Team <deity@lists.debian.org>`.
(Thu, 09 Apr 2009 07:36:07 GMT) ([full text](bugreport.cgi?bug=523213;msg=9), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=9), [link](#8)).

---

[Message #10](#10) received at 523213@bugs.debian.org ([full text](bugreport.cgi?bug=523213;msg=10), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=10), reply):

![](/cgi-bin/libravatar.cgi?email=mvo%40debian.org)
From: Michael Vogt <mvo@debian.org>
To: Jamie Strandboge <jamie@ubuntu.com>, 523213@bugs.debian.org
Subject: Re: Bug#523213: /etc/cron.daily/apt does not check return code of
date
Date: Thu, 9 Apr 2009 09:24:07 +0200
```
On Wed, Apr 08, 2009 at 05:39:37PM -0500, Jamie Strandboge wrote:
> Package: apt
> Version: 0.7.20.2
> Severity: grave
> Tags: security patch
> Justification: user security hole
[..]

Thanks for the bugreport and the patch. I merged the patch into the
debian-sid bzr branch.

Cheers,
 Michael

```

---

**Reply sent**
to `Thijs Kinkhorst <thijs@debian.org>`:

You have taken responsibility.
(Thu, 16 Apr 2009 18:45:06 GMT) ([full text](bugreport.cgi?bug=523213;msg=12), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=12), [link](#11)).

---

**Notification sent**
to `Jamie Strandboge <jamie@ubuntu.com>`:

Bug acknowledged by developer.
(Thu, 16 Apr 2009 18:45:06 GMT) ([full text](bugreport.cgi?bug=523213;msg=14), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=14), [link](#13)).

---

[Message #15](#15) received at 523213-done@bugs.debian.org ([full text](bugreport.cgi?bug=523213;msg=15), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=15), reply):

![](/cgi-bin/libravatar.cgi?email=thijs%40debian.org)
From: Thijs Kinkhorst <thijs@debian.org>
To: 523213-done@bugs.debian.org
Subject: fixed in 0.7.21
Date: Thu, 16 Apr 2009 20:43:12 +0200
```
[[Message part 1](bugreport.cgi?att=0;bug=523213;msg=15) (text/plain, inline)]
```
```
Version: 0.7.21

According to the bug- and changelog, this has been fixed in the recent 0.7.21
upload:

   [ Jamie Strandboge ]
   * apt.cron.daily: catch invalid dates due to DST time changes
     in the stamp files

cheers,
Thijs

```
```
[[signature.asc](bugreport.cgi?att=1;bug=523213;filename=signature.asc;msg=15) (application/pgp-signature, inline)]
```

---

**Information forwarded**
to `debian-bugs-dist@lists.debian.org, APT Development Team <deity@lists.debian.org>`:

`Bug#523213`; Package `apt`.
(Sat, 18 Apr 2009 11:09:02 GMT) ([full text](bugreport.cgi?bug=523213;msg=17), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=17), [link](#16)).

---

**Acknowledgement sent**
to `Thijs Kinkhorst <thijs@debian.org>`:

Extra info received and forwarded to list. Copy sent to `APT Development Team <deity@lists.debian.org>`.
(Sat, 18 Apr 2009 11:09:02 GMT) ([full text](bugreport.cgi?bug=523213;msg=19), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=19), [link](#18)).

---

[Message #20](#20) received at 523213@bugs.debian.org ([full text](bugreport.cgi?bug=523213;msg=20), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=20), reply):

![](/cgi-bin/libravatar.cgi?email=thijs%40debian.org)
From: Thijs Kinkhorst <thijs@debian.org>
To: 523213@bugs.debian.org
Subject: CVE name assigned
Date: Sat, 18 Apr 2009 13:07:33 +0200
```
[[Message part 1](bugreport.cgi?att=0;bug=523213;msg=20) (text/plain, inline)]
```
```
This is [CVE-2009-1300](https://security-tracker.debian.org/tracker/CVE-2009-1300).
Please add it in the relevant package changelog.

```
```
[[signature.asc](bugreport.cgi?att=1;bug=523213;filename=signature.asc;msg=20) (application/pgp-signature, inline)]
```

---

**Reply sent**
to `Michael Vogt <mvo@debian.org>`:

You have taken responsibility.
(Sat, 02 May 2009 13:57:10 GMT) ([full text](bugreport.cgi?bug=523213;msg=22), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=22), [link](#21)).

---

**Notification sent**
to `Jamie Strandboge <jamie@ubuntu.com>`:

Bug acknowledged by developer.
(Sat, 02 May 2009 13:57:10 GMT) ([full text](bugreport.cgi?bug=523213;msg=24), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=24), [link](#23)).

---

[Message #25](#25) received at 523213-close@bugs.debian.org ([full text](bugreport.cgi?bug=523213;msg=25), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=25), reply):

![](/cgi-bin/libravatar.cgi?email=mvo%40debian.org)
From: Michael Vogt <mvo@debian.org>
To: 523213-close@bugs.debian.org
Subject: Bug#523213: fixed in apt 0.7.20.2+lenny1
Date: Sat, 02 May 2009 13:53:45 +0000
```
Source: apt
Source-Version: 0.7.20.2+lenny1

We believe that the bug you reported is fixed in the latest version of
apt, which is due to be installed in the Debian FTP archive:

apt-doc_0.7.20.2+lenny1_all.deb
  to pool/main/a/apt/apt-doc_0.7.20.2+lenny1_all.deb
apt-transport-https_0.7.20.2+lenny1_i386.deb
  to pool/main/a/apt/apt-transport-https_0.7.20.2+lenny1_i386.deb
apt-utils_0.7.20.2+lenny1_i386.deb
  to pool/main/a/apt/apt-utils_0.7.20.2+lenny1_i386.deb
apt_0.7.20.2+lenny1.dsc
  to pool/main/a/apt/apt_0.7.20.2+lenny1.dsc
apt_0.7.20.2+lenny1.tar.gz
  to pool/main/a/apt/apt_0.7.20.2+lenny1.tar.gz
apt_0.7.20.2+lenny1_i386.deb
  to pool/main/a/apt/apt_0.7.20.2+lenny1_i386.deb
libapt-pkg-dev_0.7.20.2+lenny1_i386.deb
  to pool/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_i386.deb
libapt-pkg-doc_0.7.20.2+lenny1_all.deb
  to pool/main/a/apt/libapt-pkg-doc_0.7.20.2+lenny1_all.deb

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 523213@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Michael Vogt <mvo@debian.org> (supplier of updated apt package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.8
Date: Sun, 19 Apr 2009 21:23:46 +0200
Source: apt
Binary: apt apt-doc libapt-pkg-dev libapt-pkg-doc apt-utils apt-transport-https
Architecture: source all i386
Version: 0.7.20.2+lenny1
Distribution: stable-security
Urgency: high
Maintainer: APT Development Team <deity@lists.debian.org>
Changed-By: Michael Vogt <mvo@debian.org>
Description:
 apt        - Advanced front-end for dpkg
 apt-doc    - Documentation for APT
 apt-transport-https - APT https transport
 apt-utils  - APT utility programs
 libapt-pkg-dev - Development files for APT's libapt-pkg and libapt-inst
 libapt-pkg-doc - Documentation for APT development
Closes: [433091](bugreport.cgi?bug=433091) [523213](bugreport.cgi?bug=523213)
Changes:
 apt (0.7.20.2+lenny1) stable-security; urgency=high
 .
   * debian/apt.cron.daily:
     - fix possible DST timestamp releated auto-update problem
       ([CVE-2009-1300](https://security-tracker.debian.org/tracker/CVE-2009-1300), closes: #[523213](bugreport.cgi?bug=523213))
   * methods/gpgv.cc:
     - properly check for expired and revoked keys (closes: #[433091](bugreport.cgi?bug=433091))
Checksums-Sha1:
 80d7d53646c2e3fd3604b7d6dc507fb68ed6357d 1540 apt_0.7.20.2+lenny1.dsc
 bdb5687a0ade523d395da3bf21bddfb5ebb31f9a 2043258 apt_0.7.20.2+lenny1.tar.gz
 07f88ed68e5d5576e8ab28e2bec144f74147be68 102110 apt-doc_0.7.20.2+lenny1_all.deb
 3a1590b2a583928cb1f2bac9f7e150e69e2db562 125292 libapt-pkg-doc_0.7.20.2+lenny1_all.deb
 10c8643be9c1725f266349f8ec9cb16afffedb0b 1639116 apt_0.7.20.2+lenny1_i386.deb
 ef2602d7b81295cc70f0f3fec01837d493f1f848 107586 libapt-pkg-dev_0.7.20.2+lenny1_i386.deb
 d0acf24212f4ae67bc5259cbb009c23f95274115 188158 apt-utils_0.7.20.2+lenny1_i386.deb
 aef12bbd95a37b1a1e2870ab0ba78be769d5b800 58824 apt-transport-https_0.7.20.2+lenny1_i386.deb
Checksums-Sha256:
 1d2459ddfcf220064412b4053ea9248c0107c8800710852372abba6e97f2bbad 1540 apt_0.7.20.2+lenny1.dsc
 fd8091400ab45b24950211dd22f1a26457adbd4e37a9d13923aed57e8a9c5269 2043258 apt_0.7.20.2+lenny1.tar.gz
 2b8e00bcc16992d5df403c67e27e0d89b97ea49b5febde5a50f20846e10db8d8 102110 apt-doc_0.7.20.2+lenny1_all.deb
 e5be5ac36657d1e52d4c6b7124f5c0a8f874e27b37112f9599d5ad3a1e8fe6de 125292 libapt-pkg-doc_0.7.20.2+lenny1_all.deb
 0c376bf8208292c3b1100a61e40adab95501d2f7cc2e6cabbd70643cfb70f733 1639116 apt_0.7.20.2+lenny1_i386.deb
 2f7a1a8903aac858d4dc23bb483948c6ee0849a296a9cf6cf8030ee77572c45c 107586 libapt-pkg-dev_0.7.20.2+lenny1_i386.deb
 5a75db904448e43a0713b68622f90fbb2ab87c7468fee5a67eeb39ce43075bb0 188158 apt-utils_0.7.20.2+lenny1_i386.deb
 e04bd88a41f174bff59e5b8227fdaeb0903c1537459ffdaeb5ed31d17e4d366a 58824 apt-transport-https_0.7.20.2+lenny1_i386.deb
Files:
 60e740d25e23101d5f7a9c90b90ee698 1540 admin important apt_0.7.20.2+lenny1.dsc
 c23dc4256af67c1644a9dbc5ae0115c8 2043258 admin important apt_0.7.20.2+lenny1.tar.gz
 099c1c85cb08d668e9e4668516ebc763 102110 doc optional apt-doc_0.7.20.2+lenny1_all.deb
 68c3671fa441778e16dbbe838cc893e5 125292 doc optional libapt-pkg-doc_0.7.20.2+lenny1_all.deb
 f2021728f2e92ffe32f7eb1bdc2d6231 1639116 admin important apt_0.7.20.2+lenny1_i386.deb
 e5ac47a6a1892c8ae12b0c25136b163d 107586 libdevel optional libapt-pkg-dev_0.7.20.2+lenny1_i386.deb
 a0f4a903e2fc11d9d6535d310e7f5a9e 188158 admin important apt-utils_0.7.20.2+lenny1_i386.deb
 68cbda40b139645b347d3168e09c722b 58824 admin optional apt-transport-https_0.7.20.2+lenny1_i386.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iQEcBAEBAgAGBQJJ7NNGAAoJECIIoQCMVaAcWmYIAIxLk0Hbhs9eOAt4asY5U4/g
8Brl5T2Fj+W7QB9sclmohdsejy6sVqPB34Wxscfdff1EacVMv2ZeLPWiQmx1GaEV
T5LiMlxbDMAhyVYnRRfKqLiguH0zXbZOc8wfehe2l1Lk8WzHpfJ2KBxPaAHBnyKC
atpd4rSutNPfyF+8uV9oD5/PqmdSecFrO56hw3rrVNTJiOO+YAjtZDn+cwPRm+Er
ldxzn1fTbT7g4IwwUVab93TeZxSbQqYjZbiI9Dgm5Y7pPnJJnHHVN+spUnYGdpvM
dVwU5LnULsc1GqHoovsXzcmZYVHx5b+7Ve1Y4MosG6rJogGrPQLRb3Lk6vqoDt8=
=i8fJ
-----END PGP SIGNATURE-----

```

---

**Reply sent**
to `Michael Vogt <mvo@debian.org>`:

You have taken responsibility.
(Sat, 02 May 2009 20:00:18 GMT) ([full text](bugreport.cgi?bug=523213;msg=27), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=27), [link](#26)).

---

**Notification sent**
to `Jamie Strandboge <jamie@ubuntu.com>`:

Bug acknowledged by developer.
(Sat, 02 May 2009 20:00:18 GMT) ([full text](bugreport.cgi?bug=523213;msg=29), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=29), [link](#28)).

---

[Message #30](#30) received at 523213-close@bugs.debian.org ([full text](bugreport.cgi?bug=523213;msg=30), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=30), reply):

![](/cgi-bin/libravatar.cgi?email=mvo%40debian.org)
From: Michael Vogt <mvo@debian.org>
To: 523213-close@bugs.debian.org
Subject: Bug#523213: fixed in apt 0.6.46.4-0.1+etch1
Date: Sat, 02 May 2009 19:54:46 +0000
```
Source: apt
Source-Version: 0.6.46.4-0.1+etch1

We believe that the bug you reported is fixed in the latest version of
apt, which is due to be installed in the Debian FTP archive:

apt-doc_0.6.46.4-0.1+etch1_all.deb
  to pool/main/a/apt/apt-doc_0.6.46.4-0.1+etch1_all.deb
apt-utils_0.6.46.4-0.1+etch1_i386.deb
  to pool/main/a/apt/apt-utils_0.6.46.4-0.1+etch1_i386.deb
apt_0.6.46.4-0.1+etch1.dsc
  to pool/main/a/apt/apt_0.6.46.4-0.1+etch1.dsc
apt_0.6.46.4-0.1+etch1.tar.gz
  to pool/main/a/apt/apt_0.6.46.4-0.1+etch1.tar.gz
apt_0.6.46.4-0.1+etch1_i386.deb
  to pool/main/a/apt/apt_0.6.46.4-0.1+etch1_i386.deb
libapt-pkg-dev_0.6.46.4-0.1+etch1_i386.deb
  to pool/main/a/apt/libapt-pkg-dev_0.6.46.4-0.1+etch1_i386.deb
libapt-pkg-doc_0.6.46.4-0.1+etch1_all.deb
  to pool/main/a/apt/libapt-pkg-doc_0.6.46.4-0.1+etch1_all.deb

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 523213@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Michael Vogt <mvo@debian.org> (supplier of updated apt package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.7
Date: Sun, 19 Apr 2009 21:06:46 +0200
Source: apt
Binary: apt-utils libapt-pkg-doc libapt-pkg-dev apt-doc apt
Architecture: source all i386
Version: 0.6.46.4-0.1+etch1
Distribution: oldstable-security
Urgency: high
Maintainer: APT Development Team <deity@lists.debian.org>
Changed-By: Michael Vogt <mvo@debian.org>
Description:
 apt        - Advanced front-end for dpkg
 apt-doc    - Documentation for APT
 apt-utils  - APT utility programs
 libapt-pkg-dev - Development files for APT's libapt-pkg and libapt-inst
 libapt-pkg-doc - Documentation for APT development
Closes: [433091](bugreport.cgi?bug=433091) [523213](bugreport.cgi?bug=523213)
Changes:
 apt (0.6.46.4-0.1+etch1) oldstable-security; urgency=high
 .
   * debian/apt.cron.daily:
     - fix possible DST timestap releated auto-update problem
       ([CVE-2009-1300](https://security-tracker.debian.org/tracker/CVE-2009-1300), closes: #[523213](bugreport.cgi?bug=523213))
   * methods/gpgv.cc:
     - properly check for expired and revoked keys (closes: #[433091](bugreport.cgi?bug=433091))
Files:
 c631100edac082afe2dddb28030ed6ff 1108 admin important apt_0.6.46.4-0.1+etch1.dsc
 e6eaebb8a12f5243668ca56e65c8c71e 1798703 admin important apt_0.6.46.4-0.1+etch1.tar.gz
 999f34683b7cb7818258ac1ebfca701c 89752 doc optional apt-doc_0.6.46.4-0.1+etch1_all.deb
 b91e59e2e1093ecbe387ccc7e8111d73 112248 doc optional libapt-pkg-doc_0.6.46.4-0.1+etch1_all.deb
 73f115b27de4fdf11af97e2b5afca613 1438190 admin important apt_0.6.46.4-0.1+etch1_i386.deb
 6aa9a63c060eb0461b66f67e35ed20c7 84166 libdevel optional libapt-pkg-dev_0.6.46.4-0.1+etch1_i386.deb
 7245c5ea84b1c4eefa816af20868a794 198392 admin important apt-utils_0.6.46.4-0.1+etch1_i386.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iQEcBAEBAgAGBQJJ7ZDZAAoJECIIoQCMVaAcYgQH+wXRkiChxfmz1vuiqDe1yx/K
a5T5c+zb/mrY1Q3M0zh/p0sB9xmE6XBC9c4UYEX3qLS/V0PJ4eND1DHyT8qBtm67
mB2G/+U0MDFB607l5vCIstSchgJP9XTLA7cdvTudQCgEihYhvXpySSzHNPcn+WHv
Bb5fTvcERQ7zVfjFv2tySyn/y5dwssqf0dwm625NuYc75oD1eVHZ+vpX1WVMHI4K
795kdmDE7X0/vbg0P6CIZn4xRo1P/JLuhzZt1f7facB0mCLnHphHKhB2e7vBHECu
OPqW9ryZsPDD34Zs/v0UPosYqFOwyrY8JMyJQog2/VljHqhAVB1/A4aZShLuwIw=
=9jPa
-----END PGP SIGNATURE-----

```

---

**Reply sent**
to `Nico Golde <nion@debian.org>`:

You have taken responsibility.
(Wed, 06 May 2009 12:33:22 GMT) ([full text](bugreport.cgi?bug=523213;msg=32), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=32), [link](#31)).

---

**Notification sent**
to `Jamie Strandboge <jamie@ubuntu.com>`:

Bug acknowledged by developer.
(Wed, 06 May 2009 12:33:22 GMT) ([full text](bugreport.cgi?bug=523213;msg=34), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=34), [link](#33)).

---

[Message #35](#35) received at 523213-close@bugs.debian.org ([full text](bugreport.cgi?bug=523213;msg=35), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=35), reply):

![](/cgi-bin/libravatar.cgi?email=nion%40debian.org)
From: Nico Golde <nion@debian.org>
To: 523213-close@bugs.debian.org
Subject: Bug#523213: fixed in apt 0.7.20.2+squeeze1
Date: Wed, 06 May 2009 12:17:05 +0000
```
Source: apt
Source-Version: 0.7.20.2+squeeze1

We believe that the bug you reported is fixed in the latest version of
apt, which is due to be installed in the Debian FTP archive:

apt-doc_0.7.20.2+squeeze1_all.deb
  to pool/main/a/apt/apt-doc_0.7.20.2+squeeze1_all.deb
apt-transport-https_0.7.20.2+squeeze1_i386.deb
  to pool/main/a/apt/apt-transport-https_0.7.20.2+squeeze1_i386.deb
apt-utils_0.7.20.2+squeeze1_i386.deb
  to pool/main/a/apt/apt-utils_0.7.20.2+squeeze1_i386.deb
apt_0.7.20.2+squeeze1.dsc
  to pool/main/a/apt/apt_0.7.20.2+squeeze1.dsc
apt_0.7.20.2+squeeze1.tar.gz
  to pool/main/a/apt/apt_0.7.20.2+squeeze1.tar.gz
apt_0.7.20.2+squeeze1_i386.deb
  to pool/main/a/apt/apt_0.7.20.2+squeeze1_i386.deb
libapt-pkg-dev_0.7.20.2+squeeze1_i386.deb
  to pool/main/a/apt/libapt-pkg-dev_0.7.20.2+squeeze1_i386.deb
libapt-pkg-doc_0.7.20.2+squeeze1_all.deb
  to pool/main/a/apt/libapt-pkg-doc_0.7.20.2+squeeze1_all.deb

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 523213@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Nico Golde <nion@debian.org> (supplier of updated apt package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.8
Date: Tue, 05 May 2009 15:37:03 +0200
Source: apt
Binary: apt apt-doc libapt-pkg-dev libapt-pkg-doc apt-utils apt-transport-https
Architecture: source all i386
Version: 0.7.20.2+squeeze1
Distribution: testing-security
Urgency: high
Maintainer: APT Development Team <deity@lists.debian.org>
Changed-By: Nico Golde <nion@debian.org>
Description:
 apt        - Advanced front-end for dpkg
 apt-doc    - Documentation for APT
 apt-transport-https - APT https transport
 apt-utils  - APT utility programs
 libapt-pkg-dev - Development files for APT's libapt-pkg and libapt-inst
 libapt-pkg-doc - Documentation for APT development
Closes: [433091](bugreport.cgi?bug=433091) [523213](bugreport.cgi?bug=523213)
Changes:
 apt (0.7.20.2+squeeze1) testing-security; urgency=high
 .
   * debian/apt.cron.daily:
     - fix possible DST timestamp releated auto-update problem
       ([CVE-2009-1300](https://security-tracker.debian.org/tracker/CVE-2009-1300), closes: #[523213](bugreport.cgi?bug=523213))
   * methods/gpgv.cc:
     - properly check for expired and revoked keys (closes: #[433091](bugreport.cgi?bug=433091))
Checksums-Sha1:
 fe2ce2e9f49343fef4b371efbf3b2bf1e3f7b942 1256 apt_0.7.20.2+squeeze1.dsc
 b8523f3cc7bb81355f4b6702a6e6efd2c2aa20dd 2044030 apt_0.7.20.2+squeeze1.tar.gz
 e2f9c7fef94f911aba002490d57e3898f98ac4a5 99974 apt-doc_0.7.20.2+squeeze1_all.deb
 7d9d3e0bd339a9db541602c73842291fc1a5dedd 124124 libapt-pkg-doc_0.7.20.2+squeeze1_all.deb
 9b242d6f1fe1f225c8b24fd548ccfb9298eb4bc1 1628232 apt_0.7.20.2+squeeze1_i386.deb
 ee83f97fdb2dfffd0a07ed90fcfc1c3c89c2549b 109144 libapt-pkg-dev_0.7.20.2+squeeze1_i386.deb
 d2eea9704693e4f0a4b4ff9424cd23e1366bbfe6 188466 apt-utils_0.7.20.2+squeeze1_i386.deb
 2ae45b806c0b0cc8aa4e22040088be76a5e1a302 58674 apt-transport-https_0.7.20.2+squeeze1_i386.deb
Checksums-Sha256:
 dd175ff29e5489eb8937170bfc851f538ef5483f894c62b507259389461ad209 1256 apt_0.7.20.2+squeeze1.dsc
 6d5fd840fba4fb7baacd2802abf0a89588aaa0b0d64b90b28015ea272278003b 2044030 apt_0.7.20.2+squeeze1.tar.gz
 bfafcb1b7dd33567cdd2314a22c113237a85fd1b27f5ef39434aeeb81cb3a982 99974 apt-doc_0.7.20.2+squeeze1_all.deb
 e7eaa5f035e54c5c3a96adb78dd2965c8f4485c2d4428f738109a9a7d836d149 124124 libapt-pkg-doc_0.7.20.2+squeeze1_all.deb
 7ea5ceaf0fbae59613351a11cb222191f93c00edd0c31999b6afd42076d0866a 1628232 apt_0.7.20.2+squeeze1_i386.deb
 00d4e5d4d342af6d31616aef595d0ce9bf1a9ed17b4e98767a96ea28c2ac6f21 109144 libapt-pkg-dev_0.7.20.2+squeeze1_i386.deb
 23b2db6e64b80b0f2ef406d28e9af07878e12ff1a12c151fcfcf28e4c9261f33 188466 apt-utils_0.7.20.2+squeeze1_i386.deb
 aeddbb1c88465fb199eb08db57247500093bbd1dde434dba6dea1d24a9d06f64 58674 apt-transport-https_0.7.20.2+squeeze1_i386.deb
Files:
 337d5d3f86d65005905029eb272415bf 1256 admin important apt_0.7.20.2+squeeze1.dsc
 7a68e55346cf8ec2cf2019e0959e5907 2044030 admin important apt_0.7.20.2+squeeze1.tar.gz
 f7c4871dd7e7242fc04c15c0ca45dc7e 99974 doc optional apt-doc_0.7.20.2+squeeze1_all.deb
 d7d02f781c56217438ecd176bee1a515 124124 doc optional libapt-pkg-doc_0.7.20.2+squeeze1_all.deb
 f6e27ef8e207a4660161cd71d8474487 1628232 admin important apt_0.7.20.2+squeeze1_i386.deb
 aaeefc58ae6ca8d928bd7fdaddb86efa 109144 libdevel optional libapt-pkg-dev_0.7.20.2+squeeze1_i386.deb
 5e7aba28edf7976597336c89545cefbf 188466 admin important apt-utils_0.7.20.2+squeeze1_i386.deb
 fab50bd430585e9ac3128e041177448b 58674 admin optional apt-transport-https_0.7.20.2+squeeze1_i386.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iEYEARECAAYFAkoAQb0ACgkQHYflSXNkfP9ZyQCgp3hPfN1XPMz/QrJ9khUArUY9
Z+IAnjSuBN3GVIBmOIzW85M/cVSirnlh
=WAqS
-----END PGP SIGNATURE-----

```

---

**Reply sent**
to `Michael Vogt <mvo@debian.org>`:

You have taken responsibility.
(Sat, 27 Jun 2009 16:39:11 GMT) ([full text](bugreport.cgi?bug=523213;msg=37), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=37), [link](#36)).

---

**Notification sent**
to `Jamie Strandboge <jamie@ubuntu.com>`:

Bug acknowledged by developer.
(Sat, 27 Jun 2009 16:39:11 GMT) ([full text](bugreport.cgi?bug=523213;msg=39), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=39), [link](#38)).

---

[Message #40](#40) received at 523213-close@bugs.debian.org ([full text](bugreport.cgi?bug=523213;msg=40), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=40), reply):

![](/cgi-bin/libravatar.cgi?email=mvo%40debian.org)
From: Michael Vogt <mvo@debian.org>
To: 523213-close@bugs.debian.org
Subject: Bug#523213: fixed in apt 0.7.20.2+lenny1
Date: Sat, 27 Jun 2009 16:04:16 +0000
```
Source: apt
Source-Version: 0.7.20.2+lenny1

We believe that the bug you reported is fixed in the latest version of
apt, which is due to be installed in the Debian FTP archive:

apt-doc_0.7.20.2+lenny1_all.deb
  to pool/main/a/apt/apt-doc_0.7.20.2+lenny1_all.deb
apt-transport-https_0.7.20.2+lenny1_i386.deb
  to pool/main/a/apt/apt-transport-https_0.7.20.2+lenny1_i386.deb
apt-utils_0.7.20.2+lenny1_i386.deb
  to pool/main/a/apt/apt-utils_0.7.20.2+lenny1_i386.deb
apt_0.7.20.2+lenny1.dsc
  to pool/main/a/apt/apt_0.7.20.2+lenny1.dsc
apt_0.7.20.2+lenny1.tar.gz
  to pool/main/a/apt/apt_0.7.20.2+lenny1.tar.gz
apt_0.7.20.2+lenny1_i386.deb
  to pool/main/a/apt/apt_0.7.20.2+lenny1_i386.deb
libapt-pkg-dev_0.7.20.2+lenny1_i386.deb
  to pool/main/a/apt/libapt-pkg-dev_0.7.20.2+lenny1_i386.deb
libapt-pkg-doc_0.7.20.2+lenny1_all.deb
  to pool/main/a/apt/libapt-pkg-doc_0.7.20.2+lenny1_all.deb

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 523213@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Michael Vogt <mvo@debian.org> (supplier of updated apt package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@debian.org)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.8
Date: Sun, 19 Apr 2009 21:23:46 +0200
Source: apt
Binary: apt apt-doc libapt-pkg-dev libapt-pkg-doc apt-utils apt-transport-https
Architecture: source all i386
Version: 0.7.20.2+lenny1
Distribution: stable-security
Urgency: high
Maintainer: APT Development Team <deity@lists.debian.org>
Changed-By: Michael Vogt <mvo@debian.org>
Description:
 apt        - Advanced front-end for dpkg
 apt-doc    - Documentation for APT
 apt-transport-https - APT https transport
 apt-utils  - APT utility programs
 libapt-pkg-dev - Development files for APT's libapt-pkg and libapt-inst
 libapt-pkg-doc - Documentation for APT development
Closes: [433091](bugreport.cgi?bug=433091) [523213](bugreport.cgi?bug=523213)
Changes:
 apt (0.7.20.2+lenny1) stable-security; urgency=high
 .
   * debian/apt.cron.daily:
     - fix possible DST timestamp releated auto-update problem
       ([CVE-2009-1300](https://security-tracker.debian.org/tracker/CVE-2009-1300), closes: #[523213](bugreport.cgi?bug=523213))
   * methods/gpgv.cc:
     - properly check for expired and revoked keys (closes: #[433091](bugreport.cgi?bug=433091))
Checksums-Sha1:
 80d7d53646c2e3fd3604b7d6dc507fb68ed6357d 1540 apt_0.7.20.2+lenny1.dsc
 bdb5687a0ade523d395da3bf21bddfb5ebb31f9a 2043258 apt_0.7.20.2+lenny1.tar.gz
 07f88ed68e5d5576e8ab28e2bec144f74147be68 102110 apt-doc_0.7.20.2+lenny1_all.deb
 3a1590b2a583928cb1f2bac9f7e150e69e2db562 125292 libapt-pkg-doc_0.7.20.2+lenny1_all.deb
 10c8643be9c1725f266349f8ec9cb16afffedb0b 1639116 apt_0.7.20.2+lenny1_i386.deb
 ef2602d7b81295cc70f0f3fec01837d493f1f848 107586 libapt-pkg-dev_0.7.20.2+lenny1_i386.deb
 d0acf24212f4ae67bc5259cbb009c23f95274115 188158 apt-utils_0.7.20.2+lenny1_i386.deb
 aef12bbd95a37b1a1e2870ab0ba78be769d5b800 58824 apt-transport-https_0.7.20.2+lenny1_i386.deb
Checksums-Sha256:
 1d2459ddfcf220064412b4053ea9248c0107c8800710852372abba6e97f2bbad 1540 apt_0.7.20.2+lenny1.dsc
 fd8091400ab45b24950211dd22f1a26457adbd4e37a9d13923aed57e8a9c5269 2043258 apt_0.7.20.2+lenny1.tar.gz
 2b8e00bcc16992d5df403c67e27e0d89b97ea49b5febde5a50f20846e10db8d8 102110 apt-doc_0.7.20.2+lenny1_all.deb
 e5be5ac36657d1e52d4c6b7124f5c0a8f874e27b37112f9599d5ad3a1e8fe6de 125292 libapt-pkg-doc_0.7.20.2+lenny1_all.deb
 0c376bf8208292c3b1100a61e40adab95501d2f7cc2e6cabbd70643cfb70f733 1639116 apt_0.7.20.2+lenny1_i386.deb
 2f7a1a8903aac858d4dc23bb483948c6ee0849a296a9cf6cf8030ee77572c45c 107586 libapt-pkg-dev_0.7.20.2+lenny1_i386.deb
 5a75db904448e43a0713b68622f90fbb2ab87c7468fee5a67eeb39ce43075bb0 188158 apt-utils_0.7.20.2+lenny1_i386.deb
 e04bd88a41f174bff59e5b8227fdaeb0903c1537459ffdaeb5ed31d17e4d366a 58824 apt-transport-https_0.7.20.2+lenny1_i386.deb
Files:
 60e740d25e23101d5f7a9c90b90ee698 1540 admin important apt_0.7.20.2+lenny1.dsc
 c23dc4256af67c1644a9dbc5ae0115c8 2043258 admin important apt_0.7.20.2+lenny1.tar.gz
 099c1c85cb08d668e9e4668516ebc763 102110 doc optional apt-doc_0.7.20.2+lenny1_all.deb
 68c3671fa441778e16dbbe838cc893e5 125292 doc optional libapt-pkg-doc_0.7.20.2+lenny1_all.deb
 f2021728f2e92ffe32f7eb1bdc2d6231 1639116 admin important apt_0.7.20.2+lenny1_i386.deb
 e5ac47a6a1892c8ae12b0c25136b163d 107586 libdevel optional libapt-pkg-dev_0.7.20.2+lenny1_i386.deb
 a0f4a903e2fc11d9d6535d310e7f5a9e 188158 admin important apt-utils_0.7.20.2+lenny1_i386.deb
 68cbda40b139645b347d3168e09c722b 58824 admin optional apt-transport-https_0.7.20.2+lenny1_i386.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iQEcBAEBAgAGBQJJ7NNGAAoJECIIoQCMVaAcWmYIAIxLk0Hbhs9eOAt4asY5U4/g
8Brl5T2Fj+W7QB9sclmohdsejy6sVqPB34Wxscfdff1EacVMv2ZeLPWiQmx1GaEV
T5LiMlxbDMAhyVYnRRfKqLiguH0zXbZOc8wfehe2l1Lk8WzHpfJ2KBxPaAHBnyKC
atpd4rSutNPfyF+8uV9oD5/PqmdSecFrO56hw3rrVNTJiOO+YAjtZDn+cwPRm+Er
ldxzn1fTbT7g4IwwUVab93TeZxSbQqYjZbiI9Dgm5Y7pPnJJnHHVN+spUnYGdpvM
dVwU5LnULsc1GqHoovsXzcmZYVHx5b+7Ve1Y4MosG6rJogGrPQLRb3Lk6vqoDt8=
=i8fJ
-----END PGP SIGNATURE-----

```

---

**Bug archived.**
Request was from `Debbugs Internal Request <owner@bugs.debian.org>`
to `internal_control@bugs.debian.org`.
(Sun, 26 Jul 2009 07:28:46 GMT) ([full text](bugreport.cgi?bug=523213;msg=42), [mbox](bugreport.cgi?bug=523213;mbox=yes;msg=42), [link](#41)).

---

Send a report that [this bug log contains spam](https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=523213).

---

Debian bug tracking system administrator <owner@bugs.debian.org>.
Last modified:
Sat Jan 25 19:25:00 2025;
Machine Name:
buxtehude

[Debian Bug tracking system](https://www.debian.org/Bugs/)

Debbugs is free software and licensed under the terms of the GNU General
Public License version 2. The current version can be obtained
from <https://bugs.debian.org/debbugs-source/>.

Copyright Â© 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.



=== Content from security-tracker.debian.org_7b680492_20250126_111833.html ===

# CVE-2009-1300

| **Name** | CVE-2009-1300 |
| --- | --- |
| **Description** | apt 0.7.20 does not check when the date command returns an "invalid date" error, which can prevent apt from loading security updates in time zones for which DST occurs at midnight. |
| **Source** | [CVE](https://www.cve.org/CVERecord?id=CVE-2009-1300) (at [NVD](https://nvd.nist.gov/vuln/detail/CVE-2009-1300); [CERT](https://www.kb.cert.org/vuls/byid?searchview=&query=CVE-2009-1300), [LWN](https://lwn.net/Search/DoSearch?words=CVE-2009-1300), [oss-sec](https://marc.info/?l=oss-security&s=CVE-2009-1300), [fulldisc](https://marc.info/?l=full-disclosure&s=CVE-2009-1300), [Red Hat](https://bugzilla.redhat.com/show_bug.cgi?id=CVE-2009-1300), [Ubuntu](https://people.canonical.com/~ubuntu-security/cve/CVE-2009-1300), [Gentoo](https://bugs.gentoo.org/show_bug.cgi?id=CVE-2009-1300), SUSE [bugzilla](https://bugzilla.suse.com/show_bug.cgi?id=CVE-2009-1300)/[CVE](https://www.suse.com/security/cve/CVE-2009-1300/), GitHub [advisories](https://github.com/advisories?query=CVE-2009-1300)/[code](https://github.com/search?type=Code&q=%22CVE-2009-1300%22)/[issues](https://github.com/search?type=Issues&q=%22CVE-2009-1300%22), [web search](https://duckduckgo.com/html?q=%22CVE-2009-1300%22), [more](https://oss-security.openwall.org/wiki/vendors)) |
| **References** | [DSA-1779-1](/tracker/DSA-1779-1), [DTSA-199-1](/tracker/DTSA-199-1) |
| **Debian Bugs** | [523213](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=523213) |

## Vulnerable and fixed packages

The table below lists information on source packages.

| Source Package | Release | Version | Status |
| --- | --- | --- | --- |
| [apt](/tracker/source-package/apt) ([PTS](https://tracker.debian.org/pkg/apt)) | bullseye | 2.2.4 | fixed |
|  | bookworm | 2.6.1 | fixed |
|  | trixie | 2.9.23 | fixed |
|  | sid | 2.9.25 | fixed |

The information below is based on the following data on fixed versions.

| Package | Type | Release | Fixed Version | Urgency | Origin | Debian Bugs |
| --- | --- | --- | --- | --- | --- | --- |
| [apt](/tracker/source-package/apt) | source | etch | 0.6.46.4-0.1+etch1 |  | [DSA-1779-1](/tracker/DSA-1779-1) |  |
| [apt](/tracker/source-package/apt) | source | lenny | 0.7.20.2+lenny1 |  | [DSA-1779-1](/tracker/DSA-1779-1) |  |
| [apt](/tracker/source-package/apt) | source | squeeze | 0.7.20.2+squeeze1 |  | [DTSA-199-1](/tracker/DTSA-199-1) |  |
| [apt](/tracker/source-package/apt) | source | (unstable) | 0.7.21 |  |  | [523213](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=523213) |

---

Search for package or bug name:  [Reporting problems](/tracker/data/report)

[Home](/tracker/) - [Debian Security](https://www.debian.org/security/) - [Source](https://salsa.debian.org/security-tracker-team/security-tracker/blob/master/bin/tracker_service.py) [(Git)](https://salsa.debian.org/security-tracker-team/security-tracker)



=== Content from www.openwall.com_6cfb8524_20250125_192504.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux Â  *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper Â  *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists Â  *for password cracking*](/wordlists/)+ [passwdqc Â  *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt Â  *KDF & password hashing*](/yescrypt/)+ [yespower Â  *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish Â  *password hashing*](/crypt/)+ [phpass Â  *ditto in PHP*](/phpass/)+ [tcb Â  *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd Â  *port scan detector*](/scanlogd/)+ [popa3d Â  *tiny POP3 daemon*](/popa3d/)+ [blists Â  *web interface to mailing lists*](/blists/)+ [msulogin Â  *single user mode login*](/msulogin/)+ [php\_mt\_seed Â  *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](10) [[next>]](../../../2009/04/09/1) [[thread-next>]](../../../2009/04/17/5) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20090408225236.GA653@severus.strandboge.com>
Date: Wed, 8 Apr 2009 17:52:36 -0500
From: Jamie Strandboge <jamie@...onical.com>
To: coley@...us.mitre.org
Cc: oss-security@...ts.openwall.com, team@...urity.debian.org
Subject: CVE request: apt

Summary
-------
Systems in certain timezones with automatic updates enabled won't be
upgraded on the first day of DST and some systems in affected timezones
could end up with automatic updates being disabled permanently. Normal
usage of apt is not affected.

Discovery credited to: Alexandre Martani

Public bug: <https://launchpad.net/bugs/354793>

The Problem
-----------
The problem arises because the date command errors out on dates/times
that are invalid. Eg, DST starts at 03:00 in the Central time zone of
the US:

$ date --date="2009-03-08 02:00:00"
date: invalid date `2009-03-08 02:00:00'

This is fine and in and of itself not a problem. However,
/etc/cron.daily/apt has:
    stamp=$(date --date=$(date -r $stamp --iso-8601) +%s)
    now=$(date --date=$(date --iso-8601) +%s)

'--iso-8601' creates dates of the form YYYY-MM-DD. Since this is then
fed into the date command, the hour, minute and second all default to
0. Some timezones start their DST at midnight, with America/Sao_Paulo as
one example. Eg, on a system configured to use the America/Sao_Paulo
timezone:

$ date --date=2009-10-18
date: invalid date `2009-10-18'

This condition causes 'delta=$(($now-$stamp))' in check_stamp() to fail
when $stamp is empty (returning non-zero) or for when $now is empty,
'$delta -ge $interval' evaluates to false because delta is negative
(return non-zero). Either condition results in all or part of the
automatic update process to not be performed.

Affected Users
--------------
For users in timezones with DST starting at midnight with automatic
updates enabled, this can lead to the following error conditions:

1. /etc/cron.daily/apt is run on the first day of the DST, resulting in
'$delta -ge $interval' being negative because 'now' is empty and the
automatic update is not run. The timestamps are not updated, so the
automatic update will occur normally the following day.

2. /etc/cron.daily/apt is run late in the day on the day prior to DST
(eg 23:59 on 2009-10-17) and finishes on the day of DST (eg one minute
later, at 01:00 on 2009-10-18). This will update the stamp files to have
the date of the DST. At this point, apt cannot recover and automatic
updates are disabled until manually updating/removing the stamp files.

3. A user using a non-affected timezone and has /etc/cron.daily/apt run
normally on the day of the DST. Sometime after that, but before
/etc/cron.daily/apt runs again, the user changes her timezone to an
affected timezone. At this point, apt cannot recover and automatic
updates are disabled until manually updating/removing the stamp files.

While all users in scenario '1' are affected, they will eventually get
their updates. Though the number of users in '2' and especially '3' are
presumed low, the impact for these users is very high, since the
expected, automatic security updates will never be applied.

The Fix
-------
The fix is simply to check the return codes of date, and return '0' if
the date for 'now' fails, and remove the bad stamp file and return '0'
if the date for 'stamp' fails. A patch is attached to the Ubuntu bug,
though I have contacted the Debian and Ubuntu maintainer directly and he
is working on an update for the development releases of Debian and
Ubuntu. I also filed a Debian bug[1].

Thanks,
Jamie

[1] <http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=523213>

--
Jamie Strandboge             | <http://www.canonical.com>

Download attachment "[signature.asc](11/1)" of type "application/pgp-signature" (198 bytes)

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


