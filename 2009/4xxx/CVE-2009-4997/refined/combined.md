=== Content from bugs.launchpad.net_1e0c6a75_20250124_120256.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[gnome-power-manager package](https://launchpad.net/ubuntu/%2Bsource/gnome-power-manager)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/gnome-power-manager)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/gnome-power-manager)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/gnome-power-manager)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/gnome-power-manager)

# Screen not locked on resume from hibernate/suspend

Bug #42052 reported by
[Mark W. Tomlinson](https://launchpad.net/~mark-tomlinson)
on 2006-04-29

[112](/%2Bhelp-bugs/bug-heat.html)

This bug affects 6 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [gnome-power-manager (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager "Latest release: 43.0-3, uploaded to main on 2025-01-16 22:31:36.008344+00:00 by Debian GNOME Maintainers (pkg-gnome-maintainers), maintained by Debian GNOME Maintainers (pkg-gnome-maintainers)") | Fix Released | Medium | Unassigned |  |
| Declined for Gutsy by [Henrik Nilsen Omma](https://launchpad.net/~henrik) | | | | | |
|  | [xscreensaver (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/xscreensaver "Latest release: 6.08+dfsg1-1ubuntu3, uploaded to universe on 2024-03-31 17:33:15.925541+00:00 by Steve Langasek (vorlon), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Invalid | Undecided | Unassigned |  |
| Declined for Gutsy by [Henrik Nilsen Omma](https://launchpad.net/~henrik) | | | | | |

### Bug Description

On my Sony VAIO PCG-GRZ610 laptop, suspend and hibernate are working correctly - except that resuming from either state does not require a password - my desktop comes back exactly where I left off. This as currently updated at 08:14AM EST on 04/29/06.

The current versions of (possibly) pertinent files are:

acpi: 0.09-1

acpid: 1.0.4-1ubuntu10

acpi-support: 0.73

gnome-power-manager: 2.14.0-1ubuntu1

powermanagement-interface: 0.3.11

powermgmt-base: 1.23

(Let me know if I missed anything...)

I first brought up gnome-power-manager and looked for an option such as "Require password on resume". Not finding one, I then set gnome-screensaver for "Lock screen when screensaver is active" and forced suspend. On resume, again no password was required.

I then opened gconf-editor and selected apps/gnome-power-manager and looked at the 4 lock keys:

lock\_on\_blank\_screen

lock\_on\_hibernate

lock\_on\_suspend

lock\_on\_use\_screensaver\_settings

The long description from lock\_on\_hibernate (and \_suspend, with appropriate edits) reads:

Whether or not to lock the screen when the computer wakes up from a hibernate. NOTE this option is only used if lock\_use\_screensaver\_settings is set to false.

Okay, I set lock\_on\_hibernate and \_suspend to true, set lock\_on\_use\_screensaver\_settings to false and tried a suspend/resume. No change, it still resumes back to my "naked" desktop. Same for hibernate.

I tried (I think) all possible permutations of the 4 lock keys, with no success.

Also, in my opinion, screensaver locking should be completely separate from power management locking - i.e. I don't want screensaver locking but I do on resume from hibernate/suspend.

As ever, let me know what else you might need from me on this one...

## Related branches

[lp:ubuntu/lucid/gnome-power-manager](https://code.launchpad.net/~ubuntu-branches/ubuntu/lucid/gnome-power-manager/lucid)

## CVE References

* [2006-7240](/bugs/cve/2006-7240 "gnome-power-manager 2.14.0 does not p...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mark W. Tomlinson (mark-tomlinson)](https://launchpad.net/~mark-tomlinson) wrote on 2006-04-29: |  |  | [#1](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/1) |
| --- | --- | --- | --- |

Funny, I tried to flag this as security-related but Launchpad oopsed on me...

Funny, I tried to flag this as security-related but Launchpad oopsed on me...

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dominic Sacré (dooooomi)](https://launchpad.net/~dooooomi) wrote on 2006-04-30: |  |  | [#2](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/2) |
| --- | --- | --- | --- |

I second this. In fact the screen is locked when I suspend the machine via the gnome-power-manager icon. But it is not if I use the logout button, or my thinkpad's function keys. This is certainly not the behaviour I would expect, and should be changed.

I second this. In fact the screen is locked when I suspend the machine via the gnome-power-manager icon. But it is not if I use the logout button, or my thinkpad's function keys. This is certainly not the behaviour I would expect, and should be changed.

| Changed in gnome-power-manager: | |
| --- | --- |
| **status**: | Unconfirmed → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel Silverstone (dsilvers)](https://launchpad.net/~dsilvers) wrote on 2006-05-08: |  |  | [#3](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/3) |
| --- | --- | --- | --- |

I don't believe the logout button is anything to do with gnome-power-manager.

The suspend button on your keyboard however should invoke gnome-power-manager to suspend the computer. That it isn't is very odd.

Can you please kill gnome-power-manager, run it in a terminal as:

gnome-power-manager --no-daemon --verbose 2>&1 | tee /tmp/gpm-trace

then press your suspend keyboard button, wait for the suspend, resume your laptop, wait for it to settle again, hit control+C in the terminal and use the 'add attachment' link in the actions box at the top to attach the trace to this bug?

I don't believe the logout button is anything to do with gnome-power-manager.
The suspend button on your keyboard however should invoke gnome-power-manager to suspend the computer. That it isn't is very odd.
Can you please kill gnome-power-manager, run it in a terminal as:
gnome-power-manager --no-daemon --verbose 2>&1 | tee /tmp/gpm-trace
then press your suspend keyboard button, wait for the suspend, resume your laptop, wait for it to settle again, hit control+C in the terminal and use the 'add attachment' link in the actions box at the top to attach the trace to this bug?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mark W. Tomlinson (mark-tomlinson)](https://launchpad.net/~mark-tomlinson) wrote on 2006-05-08:  [**gnome-power-manager trace**](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/4) |  |  | [#4](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/4) |
| --- | --- | --- | --- |

* [gnome-power-manager trace](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/10784/%2Bfiles/gpm-trace)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/10784)
  (23.1 KiB,
  text/plain)

Results from:

Can you please kill gnome-power-manager, run it in a terminal as:

gnome-power-manager --no-daemon --verbose 2>&1 | tee /tmp/gpm-trace

then press your suspend keyboard button, wait for the suspend, resume your laptop, wait for it to settle again, hit control+C in the terminal and use the 'add attachment' link in the actions box at the top to attach the trace to this bug?

Results from:
Can you please kill gnome-power-manager, run it in a terminal as:
gnome-power-manager --no-daemon --verbose 2>&1 | tee /tmp/gpm-trace
then press your suspend keyboard button, wait for the suspend, resume your laptop, wait for it to settle again, hit control+C in the terminal and use the 'add attachment' link in the actions box at the top to attach the trace to this bug?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mark W. Tomlinson (mark-tomlinson)](https://launchpad.net/~mark-tomlinson) wrote on 2006-05-08:  [**Re: No security on resume from suspend/hibernate**](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/5) |  |  | [#5](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/5) |
| --- | --- | --- | --- |

Daniel - I just uploaded the trace you requested. Let me know if there's anything else I can do to help with this.

Daniel - I just uploaded the trace you requested. Let me know if there's anything else I can do to help with this.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mark W. Tomlinson (mark-tomlinson)](https://launchpad.net/~mark-tomlinson) wrote on 2006-05-17: |  |  | [#6](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/6) |
| --- | --- | --- | --- |

Okay, the latest (c. 11:00AM EST on 05/17/06) updates have brought some change. If I suspend or hibernate via gnome-power-manager, it definitely prompt me for a password on resume. However, now gnome-power-manager is the ONLY way I can suspend.

Previously, my laptop's hot keys (Fn-Esc for suspend, Fn-F12 for hibernate) worked correctly (or at least the way Sony says they should<g>). Now, Fn-F12 still gets me hibernate but Fn-Esc causes a very brief spurt of hard drive activity, but nothing else. Is there some other configuration trick I'm missing somewhere?

Okay, the latest (c. 11:00AM EST on 05/17/06) updates have brought some change. If I suspend or hibernate via gnome-power-manager, it definitely prompt me for a password on resume. However, now gnome-power-manager is the ONLY way I can suspend.
Previously, my laptop's hot keys (Fn-Esc for suspend, Fn-F12 for hibernate) worked correctly (or at least the way Sony says they should<g>). Now, Fn-F12 still gets me hibernate but Fn-Esc causes a very brief spurt of hard drive activity, but nothing else. Is there some other configuration trick I'm missing somewhere?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mark W. Tomlinson (mark-tomlinson)](https://launchpad.net/~mark-tomlinson) wrote on 2006-05-20: |  |  | [#7](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/7) |
| --- | --- | --- | --- |

After this morning's (05/20/06) updates, I'm still seeing the same behavior - g-p-m correctly suspends and hibernates and locks my laptop on resume, but only the hibernate (Fn-F12) hotkey works, not suspend (Fn-Esc).

But now, I'm seeing the message "Resuming from hibernation..." immediately following "Mounting root file system...", regardless of the boot condition (power-on, restart or resume). And I'm seeing it on my desktop, as well.

Is this a usplash issue?

After this morning's (05/20/06) updates, I'm still seeing the same behavior - g-p-m correctly suspends and hibernates and locks my laptop on resume, but only the hibernate (Fn-F12) hotkey works, not suspend (Fn-Esc).
But now, I'm seeing the message "Resuming from hibernation..." immediately following "Mounting root file system...", regardless of the boot condition (power-on, restart or resume). And I'm seeing it on my desktop, as well.
Is this a usplash issue?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mark W. Tomlinson (mark-tomlinson)](https://launchpad.net/~mark-tomlinson) wrote on 2006-05-23: |  |  | [#8](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/8) |
| --- | --- | --- | --- |

Following this morning's updates (05/23/06), I'm pleased to see that the "resuming from hibernation..." message is gone. However, I still don't have Fn-Esc hotkey functionality for suspend on my laptop. Hibernate hotkey (Fn-F12) and both hibernate and suspend selections from g-p-m continue to work correctly.

Following this morning's updates (05/23/06), I'm pleased to see that the "resuming from hibernation..." message is gone. However, I still don't have Fn-Esc hotkey functionality for suspend on my laptop. Hibernate hotkey (Fn-F12) and both hibernate and suspend selections from g-p-m continue to work correctly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mark W. Tomlinson (mark-tomlinson)](https://launchpad.net/~mark-tomlinson) wrote on 2006-05-30: |  |  | [#9](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/9) |
| --- | --- | --- | --- |

I got my hotkeys back!!! This morning's (05/30/06) updates included gnome-power-manager 2.14.3-0ubuntu11 that seems to have corrected all my issues. I can now either use the g-p-m applet or Sony's hotkey combinations to invoke suspend (Fn-Esc) or hibernate (Fn-F12) - and the screen is locked on resume.

Thanks, people! (Now, don't change a thing...<g>)

I got my hotkeys back!!! This morning's (05/30/06) updates included gnome-power-manager 2.14.3-0ubuntu11 that seems to have corrected all my issues. I can now either use the g-p-m applet or Sony's hotkey combinations to invoke suspend (Fn-Esc) or hibernate (Fn-F12) - and the screen is locked on resume.
Thanks, people! (Now, don't change a thing...<g>)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jean-Pierre Rupp (xenog)](https://launchpad.net/~xenog) wrote on 2007-08-09:  [**Happens on Presario V2615LA on Gutsy**](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/10) |  |  | [#10](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/10) |
| --- | --- | --- | --- |

I didn't have this problem on Feisty on this same laptop, but now that I'm using Gutsy it does happen whenever I suspend or hybernate the machine. This is most definitely a security issue.

I didn't have this problem on Feisty on this same laptop, but now that I'm using Gutsy it does happen whenever I suspend or hybernate the machine. This is most definitely a security issue.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jean-Pierre Rupp (xenog)](https://launchpad.net/~xenog) wrote on 2007-08-10:  [**I don't have the problem anymore**](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/11) |  |  | [#11](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/11) |
| --- | --- | --- | --- |

Today I don't have the problem, I think it's because I selected the option to lock the screen when the screensaver is active in the screensaver preferences menu.

Today I don't have the problem, I think it's because I selected the option to lock the screen when the screensaver is active in the screensaver preferences menu.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Anthony DeStefano (ajd-tasteslikeburning)](https://launchpad.net/~ajd-tasteslikeburning) wrote on 2007-08-16: |  |  | [#12](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/12) |
| --- | --- | --- | --- |

The fix is what Jean mentioned. When gnome-power-manager starts suspend it sends a dbus message to gnome-screen-saver that the machine is now inactive. That kicks on the screen saver. During the resume a dbus message is sent that the system is now active and to disable the screen saver. If you tell gnome-screen-saver to lock the screen then it will ask for a password.

The fix is what Jean mentioned. When gnome-power-manager starts suspend it sends a dbus message to gnome-screen-saver that the machine is now inactive. That kicks on the screen saver. During the resume a dbus message is sent that the system is now active and to disable the screen saver. If you tell gnome-screen-saver to lock the screen then it will ask for a password.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dave Gilbert (ubuntu-treblig)](https://launchpad.net/~ubuntu-treblig) wrote on 2007-08-27: |  |  | [#13](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/13) |
| --- | --- | --- | --- |

(This started happening for me when I upgraded to Gutsy latest on ~ August 25)

This needs to be slightly separate from screen saver settings; the choice of locking screen when the screen saver pops in and when you come out of hibernation are certainly different for me; it's also a change in behaviour that for some people leaves there machine less secure.

(This started happening for me when I upgraded to Gutsy latest on ~ August 25)
This needs to be slightly separate from screen saver settings; the choice of locking screen when the screen saver pops in and when you come out of hibernation are certainly different for me; it's also a change in behaviour that for some people leaves there machine less secure.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [unggnu (unggnu)](https://launchpad.net/~unggnu) wrote on 2007-09-06: |  |  | [#14](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/14) |
| --- | --- | --- | --- |

This still happens in Gutsy but a fix is much more easier.

It is a good idea to lock screen on suspend/hibernate only if people want it. Everybody who enables screen saver locking wants to lock screen on suspend/hinbernate too.

The easiest solution for this is to enable the gconf option /apps/gnome-power-manager/lock\_use\_screensaver\_settings per default.

So everybody who needs no protection and don't want any password dialog are happy and the others who need security are happy too and there is no need for an extra option.

This still happens in Gutsy but a fix is much more easier.
It is a good idea to lock screen on suspend/hibernate only if people want it. Everybody who enables screen saver locking wants to lock screen on suspend/hinbernate too.
The easiest solution for this is to enable the gconf option /apps/gnome-power-manager/lock\_use\_screensaver\_settings per default.
So everybody who needs no protection and don't want any password dialog are happy and the others who need security are happy too and there is no need for an extra option.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [unggnu (unggnu)](https://launchpad.net/~unggnu) wrote on 2007-09-17: |  |  | [#15](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/15) |
| --- | --- | --- | --- |

* [gnome-power-manager\_2.19.92.debdiff for enabling the lock\_use\_screensaver\_settings per default](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/139794/%2Bfiles/gnome-power-manager_2.19.92.debdiff)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/139794)
  (552 bytes,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Oliver Grawert (ogra)](https://launchpad.net/~ogra) wrote on 2007-09-28: |  |  | [#16](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/16) |
| --- | --- | --- | --- |

gnome-power-manager (2.20.0-0ubuntu2) gutsy; urgency=low

\* adjust the default gconf paths for our default keys so the defined

    default behavior is the same as in feisty. to address the return of

    LP: [#42052](/bugs/42052) and LP: [#39448](/bugs/39448)

-- Oliver Grawert <email address hidden> Wed, 26 Sep 2007 01:16:44 +0200

gnome-power-manager (2.20.0-0ubuntu2) gutsy; urgency=low
\* adjust the default gconf paths for our default keys so the defined
default behavior is the same as in feisty. to address the return of
LP: #42052 and LP: #39448
-- Oliver Grawert <ogra@ubuntu.com> Wed, 26 Sep 2007 01:16:44 +0200

| Changed in gnome-power-manager: | |
| --- | --- |
| **status**: | Confirmed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Forest (foresto)](https://launchpad.net/~foresto) wrote on 2007-11-27: |  |  | [#17](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/17) |
| --- | --- | --- | --- |

It's still broken for me.

If I hibernate using the power manager icon in the notification area, I am prompted for my password when I resume. If I hibernate using the usual Quit / Log Out menu, the password prompt is bypassed when I resume.

Xfce desktop.

Upgraded from Feisty to Gutsy.

gnome-screensaver 2.20.0-0ubuntu4.2

gnome-power-manager 2.20.0-0ubuntu6

/apps/gnome-power-manager/lock/hibernate: true

/apps/gnome-power-manager/lock/suspend: true

/apps/gnome-power-manager/lock/use\_screensaver\_settings: false

I do not have gnome-screensaver configured to lock the screen automatically. I prefer the screen to lock only when I tell it to (using control-alt-delete) and when resuming from hibernate.

See [bug 123080](/bugs/123080) for more info.

It's still broken for me.
If I hibernate using the power manager icon in the notification area, I am prompted for my password when I resume. If I hibernate using the usual Quit / Log Out menu, the password prompt is bypassed when I resume.
Xfce desktop.
Upgraded from Feisty to Gutsy.
gnome-screensaver 2.20.0-0ubuntu4.2
gnome-power-manager 2.20.0-0ubuntu6
/apps/gnome-power-manager/lock/hibernate: true
/apps/gnome-power-manager/lock/suspend: true
/apps/gnome-power-manager/lock/use\_screensaver\_settings: false
I do not have gnome-screensaver configured to lock the screen automatically. I prefer the screen to lock only when I tell it to (using control-alt-delete) and when resuming from hibernate.
See bug 123080 for more info.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Forest (foresto)](https://launchpad.net/~foresto) wrote on 2007-12-04: |  |  | [#18](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/18) |
| --- | --- | --- | --- |

Re-opening in hopes that someone will notice this is not entirely fixed. Gutsy is still broken where Feisty worked.

Re-opening in hopes that someone will notice this is not entirely fixed. Gutsy is still broken where Feisty worked.

[Forest (lpforest-merged)](https://launchpad.net/~lpforest-merged)
on 2007-12-04

| Changed in gnome-power-manager: | |
| --- | --- |
| **status**: | Fix Released → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [ceg (ceg)](https://launchpad.net/~ceg) wrote on 2008-07-02: |  |  | [#19](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/19) |
| --- | --- | --- | --- |

Same in hardy

maybe putting a script in a pm-tools directory to lock the screens (and open consoles Alt-Ctrl-F1, ...)

Same in hardy
maybe putting a script in a pm-tools directory to lock the screens (and open consoles Alt-Ctrl-F1, ...)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Oliver Grawert (ogra)](https://launchpad.net/~ogra) wrote on 2008-07-02: |  |  | [#20](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/20) |
| --- | --- | --- | --- |

@ceg, in all hardy test installs i have ever seen the keys are set like:

/apps/gnome-power-manager/lock/hibernate: true

/apps/gnome-power-manager/lock/suspend: true

/apps/gnome-power-manager/lock/use\_screensaver\_settings: false

do you say thats not the case for you ?

@ceg, in all hardy test installs i have ever seen the keys are set like:
/apps/gnome-power-manager/lock/hibernate: true
/apps/gnome-power-manager/lock/suspend: true
/apps/gnome-power-manager/lock/use\_screensaver\_settings: false
do you say thats not the case for you ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [P. Pereira (p-pereira2)](https://launchpad.net/~p-pereira2) wrote on 2008-10-29: |  |  | [#21](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/21) |
| --- | --- | --- | --- |

The same happens with the latest xubuntu 8.10 rc. Screensaver options are set to lock, after resume screen is unlocked.

The same happens with the latest xubuntu 8.10 rc. Screensaver options are set to lock, after resume screen is unlocked.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Luca Zorzi (lucazorzi91)](https://launchpad.net/~lucazorzi91) wrote on 2008-12-15: |  |  | [#22](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/22) |
| --- | --- | --- | --- |

I think that this is not a gnome-only issue, I have the same one with Kubuntu Intrepid with KDE4.

It worked perfectly with Hardy, it got broken after upgrading to Intrepid.

I think that this is not a gnome-only issue, I have the same one with Kubuntu Intrepid with KDE4.
It worked perfectly with Hardy, it got broken after upgrading to Intrepid.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jarno Suni (jarnos)](https://launchpad.net/~jarnos) wrote on 2008-12-16: |  |  | [#23](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/23) |
| --- | --- | --- | --- |

In 8.10:

In Gnome:

You can get screen locked in Gnome, it you check "Lock screen"... in Screensaver preferences.

In Xfce4:

Additionally choose Power Management in Screensaver preferences and choose a way to suspend/hibernate.

You can not use the "Ask me" option in Power Management preferences like above (or you can, but it doesn't lock screen when you resume). Then use that way to suspend/hibernate. In summary: whenever you suspend/hibernate using the Quit dialog, screen will not be locked.

In 8.10:
In Gnome:
You can get screen locked in Gnome, it you check "Lock screen"... in Screensaver preferences.
In Xfce4:
Additionally choose Power Management in Screensaver preferences and choose a way to suspend/hibernate.
You can not use the "Ask me" option in Power Management preferences like above (or you can, but it doesn't lock screen when you resume). Then use that way to suspend/hibernate. In summary: whenever you suspend/hibernate using the Quit dialog, screen will not be locked.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Forest (foresto)](https://launchpad.net/~foresto) wrote on 2009-01-08: |  |  | [#24](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/24) |
| --- | --- | --- | --- |

This problem still exists after upgrading to Intrepid. (It worked fine before upgrading from Feisty to Gutsy.)

When I choose to hibernate using the power applet on the panel, the screen fades to black before hibernating, and is locked when I resume from hibernation. I'm guessing that fade indicates that the panel applet is locking the screen via the screen saver before hibernating.

When I hibernate using the shutdown menu, no such fade occurs, and the screen is not locked when I resume from hibernation. That is the broken behavior.

Does the shutdown menu's hibernate button operate via gnome-power-manager? If not, can someone identify the mechanism it does use and add it to this bug report?

(For the record, I'm using xfce on Intrepid.)

This problem still exists after upgrading to Intrepid. (It worked fine before upgrading from Feisty to Gutsy.)
When I choose to hibernate using the power applet on the panel, the screen fades to black before hibernating, and is locked when I resume from hibernation. I'm guessing that fade indicates that the panel applet is locking the screen via the screen saver before hibernating.
When I hibernate using the shutdown menu, no such fade occurs, and the screen is not locked when I resume from hibernation. That is the broken behavior.
Does the shutdown menu's hibernate button operate via gnome-power-manager? If not, can someone identify the mechanism it does use and add it to this bug report?
(For the record, I'm using xfce on Intrepid.)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jarno Suni (jarnos)](https://launchpad.net/~jarnos) wrote on 2009-01-08: |  |  | [#25](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/25) |
| --- | --- | --- | --- |

Forest, do you mean the Action Buttons panel item by the power applet?

Forest, do you mean the Action Buttons panel item by the power applet?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Forest (foresto)](https://launchpad.net/~foresto) wrote on 2009-01-08: |  |  | [#26](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/26) |
| --- | --- | --- | --- |

* [power-applet.png](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/436500/%2Bfiles/power-applet.png)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/436500)
  (4.2 KiB,
  image/png)

When I said "power applet on the panel" I meant the little power plug icon that lives near the clock on my xfce panel. Now that you mention it, I don't think it's a panel applet after all. That icon appears in the notification tray when I select "Always display an icon" in the xfce Power Management Preferences. I'm guessing it gets added to the tray by gnome-power-manager. Screen shot attached.

When I said "power applet on the panel" I meant the little power plug icon that lives near the clock on my xfce panel. Now that you mention it, I don't think it's a panel applet after all. That icon appears in the notification tray when I select "Always display an icon" in the xfce Power Management Preferences. I'm guessing it gets added to the tray by gnome-power-manager. Screen shot attached.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ray (gunblad3)](https://launchpad.net/~gunblad3) wrote on 2009-04-28: |  |  | [#27](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/27) |
| --- | --- | --- | --- |

Experiencing the same here with UNR 9.04 Jaunty.

Experiencing the same here with UNR 9.04 Jaunty.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Luca Zorzi (lucazorzi91)](https://launchpad.net/~lucazorzi91) wrote on 2009-04-29: |  |  | [#28](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/28) |
| --- | --- | --- | --- |

Still experiencing this issue with Kubuntu 9.04

Still experiencing this issue with Kubuntu 9.04

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Sean Kennedy (sean-worker)](https://launchpad.net/~sean-worker) wrote on 2009-07-29: |  |  | [#29](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/29) |
| --- | --- | --- | --- |

I see this with xfce4 in 9.04.

This should be marked as a security issue.

Call me dumb, but it took me at least a month to clue in that when I suspended my computer that I didn't need a password to resume.

During all that time my computer was insecure whenever suspended.

I see this with xfce4 in 9.04.
This should be marked as a security issue.
Call me dumb, but it took me at least a month to clue in that when I suspended my computer that I didn't need a password to resume.
During all that time my computer was insecure whenever suspended.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Scott Howard (showard314)](https://launchpad.net/~showard314) wrote on 2009-07-29: |  |  | [#30](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/30) |
| --- | --- | --- | --- |

Has anyone tested this bug with Karmic yet? There has been significant changes to GPM from Jaunty to Karmic, and if this is not fixed in Karmic we should work on it. While it is a security issue, Ubuntu tends to be extra careful in allowing SRUs. The best course of action would be to get it fixed in Karmic and then assess our ability to get it fixed in Jaunty.

Has anyone tested this bug with Karmic yet? There has been significant changes to GPM from Jaunty to Karmic, and if this is not fixed in Karmic we should work on it. While it is a security issue, Ubuntu tends to be extra careful in allowing SRUs. The best course of action would be to get it fixed in Karmic and then assess our ability to get it fixed in Jaunty.

| Changed in gnome-power-manager (Ubuntu): | |
| --- | --- |
| **status**: | Confirmed → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Scott Howard (showard314)](https://launchpad.net/~showard314) wrote on 2009-07-29: |  |  | [#31](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/31) |
| --- | --- | --- | --- |

I marked as incomplete until it is checked in Karmic, then it can go back to confirmed.

I marked as incomplete until it is checked in Karmic, then it can go back to confirmed.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dave Gilbert (ubuntu-treblig)](https://launchpad.net/~ubuntu-treblig) wrote on 2009-08-06: |  |  | [#32](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/32) |
| --- | --- | --- | --- |

On Karmic this bug has returned for me; this was working for the last couple of years but has come back in the last 2 or 3 weeks of Karmic - so since this bug was marked as 'incomplete someone try karmic' - sorry, it's back - although to be fair I suspect it's a different bug since the original one was files 3.5 years ago!

Dave

On Karmic this bug has returned for me; this was working for the last couple of years but has come back in the last 2 or 3 weeks of Karmic - so since this bug was marked as 'incomplete someone try karmic' - sorry, it's back - although to be fair I suspect it's a different bug since the original one was files 3.5 years ago!
Dave

| Changed in gnome-power-manager (Ubuntu): | |
| --- | --- |
| **status**: | Incomplete → New |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dominik George (natureshadow)](https://launchpad.net/~natureshadow) wrote on 2009-08-06: |  |  | [#33](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/33) |
| --- | --- | --- | --- |

This also happens sometimes on my SAMSUNG R700 Aura on amd64.

This also happens sometimes on my SAMSUNG R700 Aura on amd64.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Scott Howard (showard314)](https://launchpad.net/~showard314) wrote on 2009-08-06: |  |  | [#34](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/34) |
| --- | --- | --- | --- |

Thanks for checking, setting it back to confirmed.

(This is an existing bugs that still exist and can be fixed in Karmic.)

Thanks for checking, setting it back to confirmed.
(This is an existing bugs that still exist and can be fixed in Karmic.)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Mathieu Pellerin (nirvn-asia)](https://launchpad.net/~nirvn-asia) wrote on 2009-08-15: |  |  | [#35](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/35) |
| --- | --- | --- | --- |

I wonder if the resurgence of this bug has anything to do with [Bug 397892](/bugs/397892) (Screensaver does not turn on [Ubuntu/Xubuntu Karmic])

I wonder if the resurgence of this bug has anything to do with Bug 397892 (Screensaver does not turn on [Ubuntu/Xubuntu Karmic])

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Alexander Hartl (alx321)](https://launchpad.net/~alx321) wrote on 2009-08-19: |  |  | [#36](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/36) |
| --- | --- | --- | --- |

Same problem on an acer aspire 6920 with karmic

Same problem on an acer aspire 6920 with karmic

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Sean Kennedy (sean-worker)](https://launchpad.net/~sean-worker) wrote on 2009-09-08: |  |  | [#37](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/37) |
| --- | --- | --- | --- |

I have found that using xscreensaver instead of gnome-screensaver results in the session resumes as locked.

(Currently, it is also locking me out every time I close the lid ... but that is less of a problem since the security problem has been resolved.)

I am also using xfce4-power-manager instead of gnome-power-manager.

I have found that using xscreensaver instead of gnome-screensaver results in the session resumes as locked.
(Currently, it is also locking me out every time I close the lid ... but that is less of a problem since the security problem has been resolved.)
I am also using xfce4-power-manager instead of gnome-power-manager.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Scott Howard (showard314)](https://launchpad.net/~showard314) wrote on 2009-09-08: |  |  | [#38](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/38) |
| --- | --- | --- | --- |

Moving this bug to xscreensaver since it exists when you are using a different power manager and does not exist when using gnome-screensaver.

Moving this bug to xscreensaver since it exists when you are using a different power manager and does not exist when using gnome-screensaver.

| Changed in gnome-power-manager (Ubuntu): | |
| --- | --- |
| **status**: | New → Triaged |
| **status**: | Triaged → Invalid |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Sean Kennedy (sean-worker)](https://launchpad.net/~sean-worker) wrote on 2009-09-08:  [**Re: [Bug 42052] Re: Screen not locked on resume from hibernate/suspend**](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/39) |  |  | [#39](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/39) |
| --- | --- | --- | --- |

no ... it does NOT exist when using xscreensaver and xfce4-power-manager

it DOES exist when using gnome-screensaver and gnome-power-manager

(those are the only two combination I've tested ... if you want to move it,

it should go to gnome-screensaver)

2009/9/8 Scott Howard <email address hidden>

> Moving this bug to xscreensaver since it exists when you are using a

> different power manager and does not exist when using gnome-screensaver.

>

> \*\* Changed in: gnome-power-manager (Ubuntu)

> Status: New => Triaged

>

> \*\* Also affects: xscreensaver (Ubuntu)

> Importance: Undecided

> Status: New

>

> \*\* Changed in: gnome-power-manager (Ubuntu)

> Status: Triaged => Invalid

>

> --

> Screen not locked on resume from hibernate/suspend

> <https://bugs.launchpad.net/bugs/42052>

> You received this bug notification because you are a direct subscriber

> of the bug.

>

no ... it does NOT exist when using xscreensaver and xfce4-power-manager
it DOES exist when using gnome-screensaver and gnome-power-manager
(those are the only two combination I've tested ... if you want to move it,
it should go to gnome-screensaver)
2009/9/8 Scott Howard <showard314@gmail.com>
> Moving this bug to xscreensaver since it exists when you are using a
> different power manager and does not exist when using gnome-screensaver.
>
> \*\* Changed in: gnome-power-manager (Ubuntu)
> Status: New => Triaged
>
> \*\* Also affects: xscreensaver (Ubuntu)
> Importance: Undecided
> Status: New
>
> \*\* Changed in: gnome-power-manager (Ubuntu)
> Status: Triaged => Invalid
>
> --
> Screen not locked on resume from hibernate/suspend
> https://bugs.launchpad.net/bugs/42052
> You received this bug notification because you are a direct subscriber
> of the bug.
>

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Sean Kennedy (sean-worker)](https://launchpad.net/~sean-worker) wrote on 2009-09-08: |  |  | [#40](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/40) |
| --- | --- | --- | --- |

also ... before calling it "invalid" against gnome-power-manager, someone

should try the combination:

gnome-power-manager + xscreensaver

2009/9/8 Sean Kennedy <email address hidden>

> no ... it does NOT exist when using xscreensaver and xfce4-power-manager

> it DOES exist when using gnome-screensaver and gnome-power-manager

> (those are the only two combination I've tested ... if you want to move it,

> it should go to gnome-screensaver)

>

> 2009/9/8 Scott Howard <email address hidden>

>

> Moving this bug to xscreensaver since it exists when you are using a

>> different power manager and does not exist when using gnome-screensaver.

>>

>> \*\* Changed in: gnome-power-manager (Ubuntu)

>> Status: New => Triaged

>>

>> \*\* Also affects: xscreensaver (Ubuntu)

>> Importance: Undecided

>> Status: New

>>

>> \*\* Changed in: gnome-power-manager (Ubuntu)

>> Status: Triaged => Invalid

>>

>> --

>> Screen not locked on resume from hibernate/suspend

>> <https://bugs.launchpad.net/bugs/42052>

>> You received this bug notification because you are a direct subscriber

>> of the bug.

>>

>

>

also ... before calling it "invalid" against gnome-power-manager, someone
should try the combination:
gnome-power-manager + xscreensaver
2009/9/8 Sean Kennedy <sean.worker@gmail.com>
> no ... it does NOT exist when using xscreensaver and xfce4-power-manager
> it DOES exist when using gnome-screensaver and gnome-power-manager
> (those are the only two combination I've tested ... if you want to move it,
> it should go to gnome-screensaver)
>
> 2009/9/8 Scott Howard <showard314@gmail.com>
>
> Moving this bug to xscreensaver since it exists when you are using a
>> different power manager and does not exist when using gnome-screensaver.
>>
>> \*\* Changed in: gnome-power-manager (Ubuntu)
>> Status: New => Triaged
>>
>> \*\* Also affects: xscreensaver (Ubuntu)
>> Importance: Undecided
>> Status: New
>>
>> \*\* Changed in: gnome-power-manager (Ubuntu)
>> Status: Triaged => Invalid
>>
>> --
>> Screen not locked on resume from hibernate/suspend
>> https://bugs.launchpad.net/bugs/42052
>> You received this bug notification because you are a direct subscriber
>> of the bug.
>>
>
>

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Scott Howard (showard314)](https://launchpad.net/~showard314) wrote on 2009-09-08: |  |  | [#41](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/41) |
| --- | --- | --- | --- |

Thanks for the pointing it that out, sorry I misread it. I'm resetting this bug to the previous state.

Thanks for the pointing it that out, sorry I misread it. I'm resetting this bug to the previous state.

| Changed in gnome-power-manager (Ubuntu): | |
| --- | --- |
| **status**: | Invalid → Confirmed |
| Changed in xscreensaver (Ubuntu): | |
| **status**: | New → Invalid |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [mokabar (tim-klingt)](https://launchpad.net/~tim-klingt) wrote on 2009-09-17: |  |  | [#42](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/42) |
| --- | --- | --- | --- |

on my laptop, i had this issue with 8.10, it was resolved with 9.04 but appeared again with 9.10 ...

on my laptop, i had this issue with 8.10, it was resolved with 9.04 but appeared again with 9.10 ...

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brian Murray (brian-murray)](https://launchpad.net/~brian-murray) wrote on 2009-09-18: |  |  | [#43](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/43) |
| --- | --- | --- | --- |

[Bug 428115](/bugs/428115) is a fresh bug report dealing with this issue on Karmic and I'd prefer to use that to track progress on the bug. Barring any objections I'd like to set this back to Fix Released.

Bug 428115 is a fresh bug report dealing with this issue on Karmic and I'd prefer to use that to track progress on the bug. Barring any objections I'd like to set this back to Fix Released.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dave Gilbert (ubuntu-treblig)](https://launchpad.net/~ubuntu-treblig) wrote on 2009-09-26: |  |  | [#44](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/44) |
| --- | --- | --- | --- |

OK by me - and by the looks of it a fix happened yesterday that seems to work for me (just as I got round to trying to figure out how this worked!).

Dave

OK by me - and by the looks of it a fix happened yesterday that seems to work for me (just as I got round to trying to figure out how this worked!).
Dave

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dominik George (natureshadow)](https://launchpad.net/~natureshadow) wrote on 2009-09-30: |  |  | [#45](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/45) |
| --- | --- | --- | --- |

Fixed in yesterday's update.

Fixed in yesterday's update.

| Changed in gnome-power-manager (Ubuntu): | |
| --- | --- |
| **status**: | Confirmed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Paul Taylor (ptptaylor)](https://launchpad.net/~ptptaylor) wrote on 2011-04-23: |  |  | [#46](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/comments/46) |
| --- | --- | --- | --- |

I'm not sure if it's related, but I just then experienced the same thing. I was able to use the computer for about 30 seconds after being away from the computer for 20 minutes.

The computer wasn't in sleep mode, but the screensaver had kicked in. When I moved the mouse I was able to do things, and 30 seconds later it took me to the resume screen requiring a password.

I'm using ubuntu 11.04 64bit.

I'm not sure if it's related, but I just then experienced the same thing. I was able to use the computer for about 30 seconds after being away from the computer for 20 minutes.
The computer wasn't in sleep mode, but the screensaver had kicked in. When I moved the mouse I was able to do things, and 30 seconds later it took me to the resume screen requiring a password.
I'm using ubuntu 11.04 64bit.

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/gnome-power-manager/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

## Duplicates of this bug

* [Bug #123080](https://bugs.launchpad.net/bugs/123080 "[gutsy] booting after hibernation doesn't prompt for a password")
* [Bug #137737](https://bugs.launchpad.net/bugs/137737 "[Gutsy] session isn't locked after resume")
* [Bug #363371](https://bugs.launchpad.net/bugs/363371 "No password prompt when recovering from suspend")
* [Bug #409776](https://bugs.launchpad.net/bugs/409776 "[karmic] Screen sometimes doesn't lock when going into standby")

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [gnome-power-manager\_2.19.92.debdiff for enabling the lock\_use\_screensaver\_settings per default](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/139794/%2Bfiles/gnome-power-manager_2.19.92.debdiff)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/139794 "Change patch details")

* [Add patch](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Baddcomment?field.patch=on)

## Bug attachments

* [gnome-power-manager trace](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/10784/%2Bfiles/gpm-trace)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/10784 "Change attachment details")
* [power-applet.png](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/436500/%2Bfiles/power-applet.png)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Battachment/436500 "Change attachment details")

* [Add attachment](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/42052/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
50c26bf
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_8755772d_20250124_120258.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[gnome-power-manager package](https://launchpad.net/ubuntu/%2Bsource/gnome-power-manager)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/gnome-power-manager)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/gnome-power-manager)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/gnome-power-manager)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/gnome-power-manager)

# Does not lock screen on lid close

Bug #428115 reported by
[Andrew Aylett](https://launchpad.net/~andrew-aylett)
on 2009-09-11

[118](/%2Bhelp-bugs/bug-heat.html)

This bug affects 24 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Session Menu](https://bugs.launchpad.net/indicator-session) | Fix Released | Medium | Unassigned | [Session Menu 0.1.5](https://launchpad.net/indicator-session/%2Bmilestone/0.1.5) |
|  | [gnome-power-manager (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager "Latest release: 43.0-3, uploaded to main on 2025-01-16 22:31:36.008344+00:00 by Debian GNOME Maintainers (pkg-gnome-maintainers), maintained by Debian GNOME Maintainers (pkg-gnome-maintainers)") | Fix Released | High | [Martin Pitt](https://launchpad.net/~pitti) |  |
|  | [Karmic](https://bugs.launchpad.net/ubuntu/karmic/%2Bsource/gnome-power-manager) | Fix Released | High | [Martin Pitt](https://launchpad.net/~pitti) |  |
|  | [gnome-session (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-session "Latest release: 47.0.1-1ubuntu1, uploaded to main on 2025-01-16 20:02:11.169398+00:00 by Alessandro Astone (aleasto), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Fix Released | High | [Ubuntu Desktop Bugs](https://launchpad.net/~desktop-bugs) |  |
|  | [Karmic](https://bugs.launchpad.net/ubuntu/karmic/%2Bsource/gnome-session) | Fix Released | High | [Ubuntu Desktop Bugs](https://launchpad.net/~desktop-bugs) |  |
|  | [indicator-session (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/indicator-session "Latest release: 17.3.20+21.10.20210613.1-0ubuntu3, uploaded to universe on 2024-04-12 23:25:10.416631+00:00 by Aaron Rainbolt (arraybolt3), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Fix Released | High | [Canonical Desktop Experience Team](https://launchpad.net/~canonical-dx-team) |  |
|  | [Karmic](https://bugs.launchpad.net/ubuntu/karmic/%2Bsource/indicator-session) | Fix Released | High | [Canonical Desktop Experience Team](https://launchpad.net/~canonical-dx-team) |  |

### Bug Description

Binary package hint: gnome-power-manager

Since a recent update to Karmic, my laptop doesn't lock when exiting suspend or when the lid is lifted. Both worked fine in Jaunty and in Karmic up to a few days ago (I've been updating more than weekly). The laptop appears to correctly blank the screen when the lid is shut and it does suspend (although I have an issue with using my hardware button to activate suspend, bug to follow).

ProblemType: Bug

Architecture: i386

Date: Fri Sep 11 21:44:01 2009

DistroRelease: Ubuntu 9.10

Package: gnome-power-manager 2.27.92-0ubuntu1

ProcEnviron:

 LANGUAGE=en\_GB.utf8

 LC\_COLLATE=C

 PATH=(custom, user)

 LANG=en\_GB.UTF8

 SHELL=/bin/bash

ProcVersionSignature: Ubuntu 2.6.31-10.31-generic

SourcePackage: gnome-power-manager

Uname: Linux 2.6.31-10-generic i686

See [original description](comments/0)

Tags:

[apport-bug](/ubuntu/%2Bsource/gnome-power-manager/%2Bbugs?field.tag=apport-bug)
[i386](/ubuntu/%2Bsource/gnome-power-manager/%2Bbugs?field.tag=i386)
[regression-potential](/ubuntu/%2Bsource/gnome-power-manager/%2Bbugs?field.tag=regression-potential)

## Related branches

[lp:~ubuntu-desktop/gnome-power/ubuntu](https://code.launchpad.net/~ubuntu-desktop/gnome-power/ubuntu)

[lp:~indicator-applet-developers/indicator-session/ubuntu](https://code.launchpad.net/~indicator-applet-developers/indicator-session/ubuntu)
![](/@@/merge-proposal-icon)
[Merged](https://code.launchpad.net/~indicator-applet-developers/indicator-session/ubuntu/%2Bmerge/79325)
into
[lp:~ubuntu-desktop/indicator-session/ubuntu](https://code.launchpad.net/~ubuntu-desktop/indicator-session/ubuntu)
at
[revision 167](https://bazaar.launchpad.net/~ubuntu-desktop/indicator-session/ubuntu/revision/167)

[Ken VanDine](https://launchpad.net/~ken-vandine):
Pending
requested
2011-10-13

Diff: [201 lines (+75/-13)](https://code.launchpad.net/~indicator-applet-developers/indicator-session/ubuntu/%2Bmerge/79325/%2Bpreview-diff/178199/%2Bfiles/preview.diff)7 files modifiedChangeLog (+44/-0)
configure (+1/-1)
configure.ac (+1/-1)
debian/changelog (+9/-0)
src/apt-transaction.c (+0/-1)
src/apt-watcher.c (+2/-1)
src/settings-helper.c (+18/-9)
[api](/~indicator-applet-developers/indicator-session/ubuntu/%2Bmerge/79325/%2Bpreview-diff/178199)

[lp:~ubuntu-desktop/indicator-session/ubuntu](https://code.launchpad.net/~ubuntu-desktop/indicator-session/ubuntu)
(Merged)

[lp:ubuntu/karmic/indicator-session](https://code.launchpad.net/~ubuntu-branches/ubuntu/karmic/indicator-session/karmic)

[lp:ubuntu/lucid/gnome-power-manager](https://code.launchpad.net/~ubuntu-branches/ubuntu/lucid/gnome-power-manager/lucid)

[lp:ubuntu/lucid/gnome-session](https://code.launchpad.net/~ubuntu-branches/ubuntu/lucid/gnome-session/lucid)

## CVE References

* [2009-4997](/bugs/cve/2009-4997 "gnome-power-manager 2.27.92 does not ...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Andrew Aylett (andrew-aylett)](https://launchpad.net/~andrew-aylett) wrote on 2009-09-11: |  |  | [#1](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/1) |
| --- | --- | --- | --- |

* [Dependencies.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711725/%2Bfiles/Dependencies.txt)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711725)
  (5.3 KiB,
  text/plain; charset="utf-8")
* [DevkitPower.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711726/%2Bfiles/DevkitPower.txt)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711726)
  (1.6 KiB,
  text/plain; charset="utf-8")
* [GConfNonDefault.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711727/%2Bfiles/GConfNonDefault.txt)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711727)
  (766 bytes,
  text/plain; charset="utf-8")
* [gnome-power-bugreport.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711728/%2Bfiles/gnome-power-bugreport.txt)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711728)
  (4.5 KiB,
  text/plain; charset="utf-8")

[Brian Murray (brian-murray)](https://launchpad.net/~brian-murray)
on 2009-09-18

| **tags**: | added: regression-potential |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brian Murray (brian-murray)](https://launchpad.net/~brian-murray) wrote on 2009-09-18: |  |  | [#2](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/2) |
| --- | --- | --- | --- |

I experienced this bug using gnome-power-manger version 2.27.92-0ubuntu1 in karmic. I built the previous version of the package, version 2.27.91-0ubuntu1, and installed it. Using that version of the package the bug no longer occurs, the gconf settings with both version of the package installed were the same.

I experienced this bug using gnome-power-manger version 2.27.92-0ubuntu1 in karmic. I built the previous version of the package, version 2.27.91-0ubuntu1, and installed it. Using that version of the package the bug no longer occurs, the gconf settings with both version of the package installed were the same.

| Changed in gnome-power-manager (Ubuntu): | |
| --- | --- |
| **assignee**: | nobody → Canonical Desktop Team (canonical-desktop-team) |
| **importance**: | Undecided → High |
| **status**: | New → Triaged |

[Martin Pitt (pitti)](https://launchpad.net/~pitti)
on 2009-09-21

| Changed in gnome-power-manager (Ubuntu): | |
| --- | --- |
| **assignee**: | Canonical Desktop Team (canonical-desktop-team) → Martin Pitt (pitti) |

[Martin Pitt (pitti)](https://launchpad.net/~pitti)
on 2009-09-21

| Changed in gnome-power-manager (Ubuntu): | |
| --- | --- |
| **status**: | Triaged → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2009-09-21: |  |  | [#3](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/3) |
| --- | --- | --- | --- |

This bug was fixed in the package gnome-power-manager - 2.28.0-0ubuntu1

---------------

gnome-power-manager (2.28.0-0ubuntu1) karmic; urgency=low

\* New upstream release:

    - Use accessor functions instead direct access.

    - Only print the DeviceKit-power device data when debugging.

    - Use the correct interface name for DeviceKit-disks.

    - Use the correct gnome-screensaver path. (LP: [#428115](/bugs/428115))

    - Use g\_ptr\_array\_unref() in more places, which also fixes a few small

      memory leaks.

    - Comment out the AuthRequest signal handling.

    - Change the default of show\_actions\_in\_menu to FALSE.

    - Inhibit applet now will inhibit the session from being marked IDLE.

      Gnome #593800.

    - Many translation updates.

-- Martin Pitt <email address hidden> Mon, 21 Sep 2009 16:04:07 +0200

This bug was fixed in the package gnome-power-manager - 2.28.0-0ubuntu1
---------------
gnome-power-manager (2.28.0-0ubuntu1) karmic; urgency=low
\* New upstream release:
- Use accessor functions instead direct access.
- Only print the DeviceKit-power device data when debugging.
- Use the correct interface name for DeviceKit-disks.
- Use the correct gnome-screensaver path. (LP: #428115)
- Use g\_ptr\_array\_unref() in more places, which also fixes a few small
memory leaks.
- Comment out the AuthRequest signal handling.
- Change the default of show\_actions\_in\_menu to FALSE.
- Inhibit applet now will inhibit the session from being marked IDLE.
Gnome #593800.
- Many translation updates.
-- Martin Pitt <martin.pitt@ubuntu.com> Mon, 21 Sep 2009 16:04:07 +0200

| Changed in gnome-power-manager (Ubuntu): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Sebastien Bacher (seb128)](https://launchpad.net/~seb128)
on 2009-09-21

| Changed in gnome-session (Ubuntu): | |
| --- | --- |
| **importance**: | Undecided → High |
| **assignee**: | nobody → Ubuntu Desktop Bugs (desktop-bugs) |

[Sebastien Bacher (seb128)](https://launchpad.net/~seb128)
on 2009-09-21

| Changed in gnome-session (Ubuntu): | |
| --- | --- |
| **status**: | New → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2009-09-22: |  |  | [#4](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/4) |
| --- | --- | --- | --- |

This bug was fixed in the package gnome-session - 2.28.0-0ubuntu1

---------------

gnome-session (2.28.0-0ubuntu1) karmic; urgency=low

\* New upstream version:

    - Trivial code fixes

    - Lock the screen before hibernate/suspend (lp: [#428115](/bugs/428115))

  \* debian/patches/98\_autotools.patch:

    - new version update

[ Chris Coulson ]

  \* debian/patches/97\_fix\_query\_end\_session\_crash.patch:

    - Don't crash on XSMP clients which don't respond to SaveYourself

      within the timeout, and which don't have a SmProgram property set

      (lp: [#408481](/bugs/408481), [#432692](/bugs/432692), [#433302](/bugs/433302))

-- Sebastien Bacher <email address hidden> Tue, 22 Sep 2009 00:39:18 +0200

This bug was fixed in the package gnome-session - 2.28.0-0ubuntu1
---------------
gnome-session (2.28.0-0ubuntu1) karmic; urgency=low
\* New upstream version:
- Trivial code fixes
- Lock the screen before hibernate/suspend (lp: #428115)
\* debian/patches/98\_autotools.patch:
- new version update
[ Chris Coulson ]
\* debian/patches/97\_fix\_query\_end\_session\_crash.patch:
- Don't crash on XSMP clients which don't respond to SaveYourself
within the timeout, and which don't have a SmProgram property set
(lp: #408481, #432692, #433302)
-- Sebastien Bacher <seb128@ubuntu.com> Tue, 22 Sep 2009 00:39:18 +0200

| Changed in gnome-session (Ubuntu): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel Lee (longinus00)](https://launchpad.net/~longinus00) wrote on 2009-09-22: |  |  | [#5](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/5) |
| --- | --- | --- | --- |

apt-cache shows me as having gnome-session and gnome-power-manager 2.28.0-0ubuntu1 installed but I still get taken directly to my desktop when resuming.

apt-cache shows me as having gnome-session and gnome-power-manager 2.28.0-0ubuntu1 installed but I still get taken directly to my desktop when resuming.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-09-22:  [**Re: [Bug 428115] Re: Computer no longer locks on suspend or lid close**](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/6) |  |  | [#6](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/6) |
| --- | --- | --- | --- |

Daniel Lee [2009-09-22 16:20 -0000]:

> apt-cache shows me as having gnome-session and gnome-power-manager

> 2.28.0-0ubuntu1 installed but I still get taken directly to my desktop

> when resuming.

Did you restart your session after the upgrade?

Daniel Lee [2009-09-22 16:20 -0000]:
> apt-cache shows me as having gnome-session and gnome-power-manager
> 2.28.0-0ubuntu1 installed but I still get taken directly to my desktop
> when resuming.
Did you restart your session after the upgrade?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [unggnu (unggnu)](https://launchpad.net/~unggnu) wrote on 2009-09-23:  [**Re: Computer no longer locks on suspend or lid close**](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/7) |  |  | [#7](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/7) |
| --- | --- | --- | --- |

I have the same problem here and have restarted the whole system.

I have the same problem here and have restarted the whole system.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [unggnu (unggnu)](https://launchpad.net/~unggnu) wrote on 2009-09-23: |  |  | [#8](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/8) |
| --- | --- | --- | --- |

Ok, I have found the reason. If I suspend the system through closing lid the system is locked properly but if I use the indicator-applet no screensaver/locking is initiated.

Ok, I have found the reason. If I suspend the system through closing lid the system is locked properly but if I use the indicator-applet no screensaver/locking is initiated.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Sebastien Bacher (seb128)](https://launchpad.net/~seb128) wrote on 2009-09-23: |  |  | [#9](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/9) |
| --- | --- | --- | --- |

thank you for the update, indicator-session probably needs to be updated too

thank you for the update, indicator-session probably needs to be updated too

| Changed in indicator-session (Ubuntu): | |
| --- | --- |
| **importance**: | Undecided → High |
| Changed in indicator-session (Ubuntu Karmic): | |
| **assignee**: | nobody → Canonical Desktop Experience Team (canonical-dx-team) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [unggnu (unggnu)](https://launchpad.net/~unggnu) wrote on 2009-09-23: |  |  | [#10](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/10) |
| --- | --- | --- | --- |

I have found another problem. It is not only the indicator applet, if the system goes to sleep after x minutes because of the gnome-power-manager setting the screen is also not locked.

It seems that only the lid close and sleep button function seem to lock the system.

I have found another problem. It is not only the indicator applet, if the system goes to sleep after x minutes because of the gnome-power-manager setting the screen is also not locked.
It seems that only the lid close and sleep button function seem to lock the system.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Ted Gould (ted)](https://launchpad.net/~ted) wrote on 2009-09-23: |  |  | [#11](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/11) |
| --- | --- | --- | --- |

This seems to be caused by the fact that in Jaunty we asked GNOME Power to suspend for us but now we're using DeviceKit-power (which is good) but it's not handling the desktop side of things for us. So it seems we should be locking the screen now.

This seems to be caused by the fact that in Jaunty we asked GNOME Power to suspend for us but now we're using DeviceKit-power (which is good) but it's not handling the desktop side of things for us. So it seems we should be locking the screen now.

| Changed in indicator-session: | |
| --- | --- |
| **importance**: | Undecided → Medium |
| **milestone**: | none → ubuntu-9.10-beta-freeze |
| **status**: | New → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Noel J. Bergman (noeljb)](https://launchpad.net/~noeljb) wrote on 2009-09-24: |  |  | [#12](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/12) |
| --- | --- | --- | --- |

FWIW, the indicator-session lock menu item does work for me, as does the Fn-F2 (lock) button, lid close (recently fixed again), etc.

FWIW, the indicator-session lock menu item does work for me, as does the Fn-F2 (lock) button, lid close (recently fixed again), etc.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [unggnu (unggnu)](https://launchpad.net/~unggnu) wrote on 2009-09-24: |  |  | [#13](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/13) |
| --- | --- | --- | --- |

@Noel J. Bergman

The indicator session lock menu works but the screen is not locked if you use the suspend function of this applet.

@Noel J. Bergman
The indicator session lock menu works but the screen is not locked if you use the suspend function of this applet.

[Ted Gould (ted)](https://launchpad.net/~ted)
on 2009-09-24

| Changed in indicator-session: | |
| --- | --- |
| **milestone**: | ubuntu-9.10-beta-freeze → 0.1.5 |
| **status**: | Confirmed → Fix Committed |

[Ted Gould (ted)](https://launchpad.net/~ted)
on 2009-09-24

| Changed in indicator-session: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2009-09-25: |  |  | [#14](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/14) |
| --- | --- | --- | --- |

This bug was fixed in the package indicator-session - 0.1.5-0ubuntu1

---------------

indicator-session (0.1.5-0ubuntu1) karmic; urgency=low

\* Upstream release 0.1.5 (LP: [#436223](/bugs/436223))

    \* PolicyKit-1 support (LP: [#418643](/bugs/418643))

    \* GDM User list support (LP: [#422052](/bugs/422052))

    \* MissionControl5 support (LP: [#427643](/bugs/427643))

    \* Better locking of the screensaver (LP: [#428115](/bugs/428115))

  \* debian/control: Adding in a libempathy-dev build dependency

    as it's now required by upstream.

  \* Removing patches 01\_polkit-1.patch and 99\_autoreconf.patch

    as they were merged upstream.

-- Ted Gould <email address hidden> Thu, 24 Sep 2009 17:07:51 -0500

This bug was fixed in the package indicator-session - 0.1.5-0ubuntu1
---------------
indicator-session (0.1.5-0ubuntu1) karmic; urgency=low
\* Upstream release 0.1.5 (LP: #436223)
\* PolicyKit-1 support (LP: #418643)
\* GDM User list support (LP: #422052)
\* MissionControl5 support (LP: #427643)
\* Better locking of the screensaver (LP: #428115)
\* debian/control: Adding in a libempathy-dev build dependency
as it's now required by upstream.
\* Removing patches 01\_polkit-1.patch and 99\_autoreconf.patch
as they were merged upstream.
-- Ted Gould <ted@ubuntu.com> Thu, 24 Sep 2009 17:07:51 -0500

| Changed in indicator-session (Ubuntu Karmic): | |
| --- | --- |
| **status**: | New → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [unggnu (unggnu)](https://launchpad.net/~unggnu) wrote on 2009-09-25: |  |  | [#15](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/15) |
| --- | --- | --- | --- |

The problem still appears if standby is initiated through the gnome shut down menu under System and through gnome-power-manager after x minutes absence.

The problem still appears if standby is initiated through the gnome shut down menu under System and through gnome-power-manager after x minutes absence.

[Sebastien Bacher (seb128)](https://launchpad.net/~seb128)
on 2009-09-25

| Changed in gnome-power-manager (Ubuntu Karmic): | |
| --- | --- |
| **status**: | Fix Released → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dave Gilbert (ubuntu-treblig)](https://launchpad.net/~ubuntu-treblig) wrote on 2009-09-26: |  |  | [#16](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/16) |
| --- | --- | --- | --- |

For me this appears to be working as of about today - so maybe that fix did it

For me this appears to be working as of about today - so maybe that fix did it

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Bart Rose (jbrose3)](https://launchpad.net/~jbrose3) wrote on 2009-10-01: |  |  | [#17](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/17) |
| --- | --- | --- | --- |

My Acer Aspire One will return from suspend locked if suspended via the indicator applet, but not if through lid closure. My packages are up to date and I have restarted today.

My Acer Aspire One will return from suspend locked if suspended via the indicator applet, but not if through lid closure. My packages are up to date and I have restarted today.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-10-02: |  |  | [#18](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/18) |
| --- | --- | --- | --- |

Please copy&paste the output of

gconftool -R /apps/gnome-power-manager/buttons

Thanks!

Please copy&paste the output of
gconftool -R /apps/gnome-power-manager/buttons
Thanks!

| Changed in gnome-power-manager (Ubuntu Karmic): | |
| --- | --- |
| **status**: | Confirmed → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Bart Rose (jbrose3)](https://launchpad.net/~jbrose3) wrote on 2009-10-02: |  |  | [#19](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/19) |
| --- | --- | --- | --- |

Here you go:

lid\_battery = suspend

 hibernate = hibernate

 suspend = suspend

 lid\_ac = suspend

 power = interactive

Here you go:
lid\_battery = suspend
hibernate = hibernate
suspend = suspend
lid\_ac = suspend
power = interactive

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-10-05: |  |  | [#20](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/20) |
| --- | --- | --- | --- |

I cannot reproduce this. On current Karmic, when I close the lid and reopen it again, it resumes and I get the gnome-screensaver lock dialog. Bart, do you have anything in ~/.xsession-errors after a lid close/open? Can you please attach it?

I cannot reproduce this. On current Karmic, when I close the lid and reopen it again, it resumes and I get the gnome-screensaver lock dialog. Bart, do you have anything in ~/.xsession-errors after a lid close/open? Can you please attach it?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-10-05: |  |  | [#21](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/21) |
| --- | --- | --- | --- |

I also got confirmation from mat\_t that it works for him as well.

I also got confirmation from mat\_t that it works for him as well.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-10-05: |  |  | [#22](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/22) |
| --- | --- | --- | --- |

Bart, can you please confirm with "dpkg -l gnome-power-manager|cat" that you have 2.28.0 installed? 2.27.x was known broken.

Bart, can you please confirm with "dpkg -l gnome-power-manager|cat" that you have 2.28.0 installed? 2.27.x was known broken.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Bart Rose (jbrose3)](https://launchpad.net/~jbrose3) wrote on 2009-10-05: |  |  | [#23](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/23) |
| --- | --- | --- | --- |

Here is my .xsession-errors output following a lid closure:

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: old state indicates that this was not a disconnect 2

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: foo\_client\_state\_changed\_cb

\*\* (nm-applet:1660): DEBUG: going for offline with icon: notification-network-wireless-disconnected

\*\* (nm-applet:1660): DEBUG: going for offline with icon: notification-network-wireless-disconnected

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: old state indicates that this was not a disconnect 1

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: old state indicates that this was not a disconnect 1

\*\* (nm-applet:1660): DEBUG: foo\_client\_state\_changed\_cb

\*\* (nm-applet:1660): DEBUG: going for offline with icon: notification-network-disconnected

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: old state indicates that this was not a disconnect 2

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: foo\_client\_state\_changed\_cb

\*\* (nm-applet:1660): DEBUG: going for offline with icon: notification-network-disconnected

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed

\*\* (nm-applet:1660): DEBUG: foo\_client\_state\_changed\_cb

Here is the dpkg output:

gnome-power-manager 2.28.0-0ubuntu1

Here is my .xsession-errors output following a lid closure:
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: old state indicates that this was not a disconnect 2
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: foo\_client\_state\_changed\_cb
\*\* (nm-applet:1660): DEBUG: going for offline with icon: notification-network-wireless-disconnected
\*\* (nm-applet:1660): DEBUG: going for offline with icon: notification-network-wireless-disconnected
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: old state indicates that this was not a disconnect 1
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: old state indicates that this was not a disconnect 1
\*\* (nm-applet:1660): DEBUG: foo\_client\_state\_changed\_cb
\*\* (nm-applet:1660): DEBUG: going for offline with icon: notification-network-disconnected
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: old state indicates that this was not a disconnect 2
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: foo\_client\_state\_changed\_cb
\*\* (nm-applet:1660): DEBUG: going for offline with icon: notification-network-disconnected
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: applet\_common\_device\_state\_changed
\*\* (nm-applet:1660): DEBUG: foo\_client\_state\_changed\_cb
Here is the dpkg output:
gnome-power-manager 2.28.0-0ubuntu1

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-10-05: |  |  | [#24](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/24) |
| --- | --- | --- | --- |

Bart, thanks. Nothing interesting in xsession-errors then. Can you please check whether this happens for a newly created user as well? This will tell us if it's a package/hardware specific problem or a problem in the per-user configuration.

Bart, thanks. Nothing interesting in xsession-errors then. Can you please check whether this happens for a newly created user as well? This will tell us if it's a package/hardware specific problem or a problem in the per-user configuration.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Bart Rose (jbrose3)](https://launchpad.net/~jbrose3) wrote on 2009-10-05: |  |  | [#25](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/25) |
| --- | --- | --- | --- |

Logging in as new user didn't fix the issue. Still no lockscreen.

Logging in as new user didn't fix the issue. Still no lockscreen.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [JanG (jan-ge)](https://launchpad.net/~jan-ge) wrote on 2009-10-06: |  |  | [#26](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/26) |
| --- | --- | --- | --- |

For me, there is nothing fixed. Using indicator-session -> hibernate and turning back on brings me directly to the desktop, even if i have activated locking the screen in screensaver settings.

Or is this the same as [https://bugs.launchpad.net/ubuntu/+source/indicator-session/+bug/436724](https://bugs.launchpad.net/ubuntu/%2Bsource/indicator-session/%2Bbug/436724) as I have auto-login enabled?

Packages are up-to-date karmic:

gnome-power-manager: 2.28.0-0ubuntu2

indicator-session: 0.1.6-0ubuntu1

$ gconftool -R /apps/gnome-power-manager/buttons

 lid\_battery = blank

 hibernate = hibernate

 suspend = suspend

 lid\_ac = nothing

 power = interactive

For me, there is nothing fixed. Using indicator-session -> hibernate and turning back on brings me directly to the desktop, even if i have activated locking the screen in screensaver settings.
Or is this the same as https://bugs.launchpad.net/ubuntu/+source/indicator-session/+bug/436724 as I have auto-login enabled?
Packages are up-to-date karmic:
gnome-power-manager: 2.28.0-0ubuntu2
indicator-session: 0.1.6-0ubuntu1
$ gconftool -R /apps/gnome-power-manager/buttons
lid\_battery = blank
hibernate = hibernate
suspend = suspend
lid\_ac = nothing
power = interactive

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Sebastien Bacher (seb128)](https://launchpad.net/~seb128) wrote on 2009-10-06: |  |  | [#27](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/27) |
| --- | --- | --- | --- |

> Using indicator-session -> hibernate and turning back on brings me directly to the desktop, even if i have activated locking the screen in screensaver settings.

The bug is about suspend, hibernate is a different case and could use a different bug

> Using indicator-session -> hibernate and turning back on brings me directly to the desktop, even if i have activated locking the screen in screensaver settings.
The bug is about suspend, hibernate is a different case and could use a different bug

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel Lee (longinus00)](https://launchpad.net/~longinus00) wrote on 2009-10-06: |  |  | [#28](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/28) |
| --- | --- | --- | --- |

My computer still doesn't lock when suspending if I use the interactive chooser when I push the power button.

My computer still doesn't lock when suspending if I use the interactive chooser when I push the power button.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [JanG (jan-ge)](https://launchpad.net/~jan-ge) wrote on 2009-10-06: |  |  | [#29](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/29) |
| --- | --- | --- | --- |

>The bug is about suspend, hibernate is a different case and could use

> a different bug

Sorry, I meant suspend!

With gdm auto-login disabled this is working for me, so [bug #436724](/bugs/436724) is the right one for my problem.

>The bug is about suspend, hibernate is a different case and could use
> a different bug
Sorry, I meant suspend!
With gdm auto-login disabled this is working for me, so bug #436724 is the right one for my problem.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-10-06:  [**Re: Does not lock screen on lid close when using gdm autologin**](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/30) |  |  | [#30](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/30) |
| --- | --- | --- | --- |

I updated the bug title. In this report, let's track the missing screen locking on lid close when using gdm autologin. Please file (or lookfor) separate reports for other cases, like the indicator or the power button dialog, otherwise it becomes too hard to track.

Thanks!

I updated the bug title. In this report, let's track the missing screen locking on lid close when using gdm autologin. Please file (or lookfor) separate reports for other cases, like the indicator or the power button dialog, otherwise it becomes too hard to track.
Thanks!

| **summary**: | - Computer no longer locks on suspend or lid close+ Does not lock screen on lid close when using gdm autologin |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-10-06: |  |  | [#31](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/31) |
| --- | --- | --- | --- |

Please open a terminal, and do

killall gnome-power-manager

  gnome-power-manager --verbose 2>&1 | tee /tmp/gpm.log

Then close the lid, reopen again, confirm that it suspended/resumed, but does not lock the screen. Press Control-C, and attach /tmp/gpm.log here.

Then press Alt+F2 and run "gnome-power-manager", to restore it for your session.

Thanks!

Please open a terminal, and do
killall gnome-power-manager
gnome-power-manager --verbose 2>&1 | tee /tmp/gpm.log
Then close the lid, reopen again, confirm that it suspended/resumed, but does not lock the screen. Press Control-C, and attach /tmp/gpm.log here.
Then press Alt+F2 and run "gnome-power-manager", to restore it for your session.
Thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Bart Rose (jbrose3)](https://launchpad.net/~jbrose3) wrote on 2009-10-06: |  |  | [#32](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/32) |
| --- | --- | --- | --- |

* [gpm.log](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/786414/%2Bfiles/gpm.log)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/786414)
  (44.2 KiB,
  text/plain)

Here you go. Also, I'm not using autologin...

Here you go. Also, I'm not using autologin...

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tormod Volden (tormodvolden)](https://launchpad.net/~tormodvolden) wrote on 2009-10-06: |  |  | [#33](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/33) |
| --- | --- | --- | --- |

Martin, isn't locking disabled by design when using autologin? <http://bazaar.launchpad.net/~indicator-applet-developers/indicator-session/trunk/revision/45>

Martin, isn't locking disabled by design when using autologin? http://bazaar.launchpad.net/~indicator-applet-developers/indicator-session/trunk/revision/45

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Chris Coulson (chrisccoulson)](https://launchpad.net/~chrisccoulson) wrote on 2009-10-06: |  |  | [#34](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/34) |
| --- | --- | --- | --- |

Tormod - locking via the inidicator is a separate issue.

Anyway, this bit of the log shows why g-p-m is not locking the screen on lid-close:

TI:16:49:01 TH:0x84d5168 FI:gpm-control.c FN:gpm\_control\_get\_lock\_policy,227

 - Using ScreenSaver settings (0)

This is because it's disabled in your user config somewhere. Please post the output of:

gconftool -R /apps/gnome-screensaver

gconftool -R /apps/gnome-power-manager/lock

Thanks!

Tormod - locking via the inidicator is a separate issue.
Anyway, this bit of the log shows why g-p-m is not locking the screen on lid-close:
TI:16:49:01 TH:0x84d5168 FI:gpm-control.c FN:gpm\_control\_get\_lock\_policy,227
- Using ScreenSaver settings (0)
This is because it's disabled in your user config somewhere. Please post the output of:
gconftool -R /apps/gnome-screensaver
gconftool -R /apps/gnome-power-manager/lock
Thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Chris Coulson (chrisccoulson)](https://launchpad.net/~chrisccoulson) wrote on 2009-10-06: |  |  | [#35](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/35) |
| --- | --- | --- | --- |

I suspect that your user config shows "/apps/gnome-power-manager/lock/use\_screensaver\_settings = TRUE" and "/apps/gnome-screensaver/lock\_enabled = FALSE"

I suspect that your user config shows "/apps/gnome-power-manager/lock/use\_screensaver\_settings = TRUE" and "/apps/gnome-screensaver/lock\_enabled = FALSE"

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tormod Volden (tormodvolden)](https://launchpad.net/~tormodvolden) wrote on 2009-10-06: |  |  | [#36](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/36) |
| --- | --- | --- | --- |

Chris, it is a separate issue, but should not the same logic apply?

Chris, it is a separate issue, but should not the same logic apply?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Chris Coulson (chrisccoulson)](https://launchpad.net/~chrisccoulson) wrote on 2009-10-06: |  |  | [#37](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/37) |
| --- | --- | --- | --- |

Our current default setting for "/apps/gnome-power-manager/lock/use\_screensaver\_settings" is "true", which means that the screen will not lock on suspend (when you close the lid) if you have disabled locking in the screensaver preferences. The log above shows that this is the most likely cause for this issue.

Perhaps we should consider changing the default, and have g-p-m use it's own policy for screen locking instead?

Our current default setting for "/apps/gnome-power-manager/lock/use\_screensaver\_settings" is "true", which means that the screen will not lock on suspend (when you close the lid) if you have disabled locking in the screensaver preferences. The log above shows that this is the most likely cause for this issue.
Perhaps we should consider changing the default, and have g-p-m use it's own policy for screen locking instead?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Bart Rose (jbrose3)](https://launchpad.net/~jbrose3) wrote on 2009-10-06: |  |  | [#38](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/38) |
| --- | --- | --- | --- |

bart@AAO-Lin:~$ gconftool -R /apps/gnome-screensaver

 lock\_enabled = false

 idle\_activation\_enabled = true

 cycle\_delay = 10

 status\_message\_enabled = true

 mode = blank-only

 theme = screensavers-ubuntu\_theme

 user\_switch\_enabled = true

 idle\_delay = 10

 logout\_delay = 120

 power\_management\_delay = 30

 embedded\_keyboard\_enabled = false

 logout\_enabled = false

 embedded\_keyboard\_command =

 lock\_dialog\_theme = default

 logout\_command =

 themes = []

 lock\_delay = 0

bart@AAO-Lin:~$ gconftool -R /apps/gnome-power-manager/lock

 hibernate = true

 suspend = true

 gnome\_keyring\_hibernate = true

 blank\_screen = false

 use\_screensaver\_settings = true

 gnome\_keyring\_suspend = false

Your prediction was correct. Why would this work when suspended via the indicator applet and not lid closure?

bart@AAO-Lin:~$ gconftool -R /apps/gnome-screensaver
lock\_enabled = false
idle\_activation\_enabled = true
cycle\_delay = 10
status\_message\_enabled = true
mode = blank-only
theme = screensavers-ubuntu\_theme
user\_switch\_enabled = true
idle\_delay = 10
logout\_delay = 120
power\_management\_delay = 30
embedded\_keyboard\_enabled = false
logout\_enabled = false
embedded\_keyboard\_command =
lock\_dialog\_theme = default
logout\_command =
themes = []
lock\_delay = 0
bart@AAO-Lin:~$ gconftool -R /apps/gnome-power-manager/lock
hibernate = true
suspend = true
gnome\_keyring\_hibernate = true
blank\_screen = false
use\_screensaver\_settings = true
gnome\_keyring\_suspend = false
Your prediction was correct. Why would this work when suspended via the indicator applet and not lid closure?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Chris Coulson (chrisccoulson)](https://launchpad.net/~chrisccoulson) wrote on 2009-10-06: |  |  | [#39](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/39) |
| --- | --- | --- | --- |

Tormod - perhaps the same logic should apply, but the indicator applet doesn't user gnome-power-manager for suspend (it talks directly to DK-power) so it is responsible for locking the screen itself. I'm not sure what the policy is for locking the screen on suspend from the session applet, as I'm not familiar with the code (and I can't test it reliably on my machine anyway). It should probably honour user preferences too (if it doesn't already)

Tormod - perhaps the same logic should apply, but the indicator applet doesn't user gnome-power-manager for suspend (it talks directly to DK-power) so it is responsible for locking the screen itself. I'm not sure what the policy is for locking the screen on suspend from the session applet, as I'm not familiar with the code (and I can't test it reliably on my machine anyway). It should probably honour user preferences too (if it doesn't already)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Chris Coulson (chrisccoulson)](https://launchpad.net/~chrisccoulson) wrote on 2009-10-06: |  |  | [#40](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/40) |
| --- | --- | --- | --- |

Bart - thanks. So your issue is that you disabled "Lock screen when screensaver is active" in the user preferences.

This is confusing, and I think we should change use\_screensaver\_settings to false by default.

Bart - thanks. So your issue is that you disabled "Lock screen when screensaver is active" in the user preferences.
This is confusing, and I think we should change use\_screensaver\_settings to false by default.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Bart Rose (jbrose3)](https://launchpad.net/~jbrose3) wrote on 2009-10-06: |  |  | [#41](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/41) |
| --- | --- | --- | --- |

This fixed the issue, however I never changed this option. It must have been a default on the alpha version I installed. This should definitely be the default option, if it isn't already with newer versions. Thanks for the help.

This fixed the issue, however I never changed this option. It must have been a default on the alpha version I installed. This should definitely be the default option, if it isn't already with newer versions. Thanks for the help.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Chris Coulson (chrisccoulson)](https://launchpad.net/~chrisccoulson) wrote on 2009-10-07: |  |  | [#42](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/42) |
| --- | --- | --- | --- |

You're right, "/apps/gnome-screensaver/lock\_enabled" is actually false by default (it is true in the schema, but false in /use/share/gconf/defaults/10\_gnome-screensaver".

You're right, "/apps/gnome-screensaver/lock\_enabled" is actually false by default (it is true in the schema, but false in /use/share/gconf/defaults/10\_gnome-screensaver".

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-10-07: |  |  | [#43](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/43) |
| --- | --- | --- | --- |

So I close this again. The initially reported bug was fixed in comment 3, and it was determined that the people who still experience this have a local configuration which disables locking.

I verified the default settings in karmic:

\* /apps/gnome-screensaver/lock\_enabled is "false" by default (locking after screen saver timeout), which still makes sense IMHO. It was like this in all previous Ubuntu releases, changing it now would be unexpected, and you can easily enable it in the screensaver settings.

\* /apps/gnome-power-manager/lock/use\_screensaver\_settings is also false by default, and /suspend and /hibernate are true, meaning that it does lock by default.

So I close this again. The initially reported bug was fixed in comment 3, and it was determined that the people who still experience this have a local configuration which disables locking.
I verified the default settings in karmic:
\* /apps/gnome-screensaver/lock\_enabled is "false" by default (locking after screen saver timeout), which still makes sense IMHO. It was like this in all previous Ubuntu releases, changing it now would be unexpected, and you can easily enable it in the screensaver settings.
\* /apps/gnome-power-manager/lock/use\_screensaver\_settings is also false by default, and /suspend and /hibernate are true, meaning that it does lock by default.

| **summary**: | - Does not lock screen on lid close when using gdm autologin+ Does not lock screen on lid close |
| --- | --- |
| Changed in gnome-power-manager (Ubuntu Karmic): | |
| **status**: | Incomplete → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Rocko (rockorequin)](https://launchpad.net/~rockorequin) wrote on 2009-10-08: |  |  | [#44](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/44) |
| --- | --- | --- | --- |

I have the same settings as the default karmic, ie as outlined in comment #43, but I still don't get prompted for a password when I resume. I'm running gnome-power-manager 2.28.0-0ubuntu3.

The only unusual thing I had to do when testing is that I had to manually suspend using "sudo /etc/acpi/sleep.sh sleep" because the suspend option has disappeared in the latest karmic.

Here's my relevant configuration details - is there something else that needs changing as well?

gconftool -R /apps/gnome-power-manager/lock

 hibernate = true

 suspend = true

 gnome\_keyring\_hibernate = true

 blank\_screen = false

 use\_screensaver\_settings = false

 gnome\_keyring\_suspend = false

gconftool -R /apps/gnome-screensaver

 lock\_enabled = false

 idle\_activation\_enabled = true

 cycle\_delay = 10

 status\_message\_enabled = true

 mode = blank-only

 theme = screensavers-ubuntu\_theme

 user\_switch\_enabled = true

 idle\_delay = 10

 logout\_delay = 120

 power\_management\_delay = 30

 embedded\_keyboard\_enabled = false

 logout\_enabled = false

 embedded\_keyboard\_command =

 lock\_dialog\_theme = default

 logout\_command =

 themes = []

 lock\_delay = 0

I have the same settings as the default karmic, ie as outlined in comment #43, but I still don't get prompted for a password when I resume. I'm running gnome-power-manager 2.28.0-0ubuntu3.
The only unusual thing I had to do when testing is that I had to manually suspend using "sudo /etc/acpi/sleep.sh sleep" because the suspend option has disappeared in the latest karmic.
Here's my relevant configuration details - is there something else that needs changing as well?
gconftool -R /apps/gnome-power-manager/lock
hibernate = true
suspend = true
gnome\_keyring\_hibernate = true
blank\_screen = false
use\_screensaver\_settings = false
gnome\_keyring\_suspend = false
gconftool -R /apps/gnome-screensaver
lock\_enabled = false
idle\_activation\_enabled = true
cycle\_delay = 10
status\_message\_enabled = true
mode = blank-only
theme = screensavers-ubuntu\_theme
user\_switch\_enabled = true
idle\_delay = 10
logout\_delay = 120
power\_management\_delay = 30
embedded\_keyboard\_enabled = false
logout\_enabled = false
embedded\_keyboard\_command =
lock\_dialog\_theme = default
logout\_command =
themes = []
lock\_delay = 0

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-10-08: |  |  | [#45](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/45) |
| --- | --- | --- | --- |

> The only unusual thing I had to do when testing is that I had to manually suspend using "sudo /etc/acpi/sleep.sh sleep"

Right, it won't (and can't even) lock the screen with sleep.sh. Please try it with closing/reopening the lid.

> because the suspend option has disappeared in the latest karmic.

This was fixed in yesterday's gnome-session upload.

> The only unusual thing I had to do when testing is that I had to manually suspend using "sudo /etc/acpi/sleep.sh sleep"
Right, it won't (and can't even) lock the screen with sleep.sh. Please try it with closing/reopening the lid.
> because the suspend option has disappeared in the latest karmic.
This was fixed in yesterday's gnome-session upload.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Rocko (rockorequin)](https://launchpad.net/~rockorequin) wrote on 2009-10-08: |  |  | [#46](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/46) |
| --- | --- | --- | --- |

> This was fixed in yesterday's gnome-session upload.

Yes - I discovered this after rebooting (it wasn't automatically applied).

However, the problem persists. If I suspend from the System / Shut Down menu and resume, I don't get asked for a password using my normal login. I created a new user, switched to this new user, suspended and resumed and I \*did\* get asked for password on resume.

So what might be different between my normal user and the default settings, given that I already have the settings mentioned above? It might be relevant that I copied my normal user folder from jaunty when I first installed karmic (at around alpha 2, I think it was).

> This was fixed in yesterday's gnome-session upload.
Yes - I discovered this after rebooting (it wasn't automatically applied).
However, the problem persists. If I suspend from the System / Shut Down menu and resume, I don't get asked for a password using my normal login. I created a new user, switched to this new user, suspended and resumed and I \*did\* get asked for password on resume.
So what might be different between my normal user and the default settings, given that I already have the settings mentioned above? It might be relevant that I copied my normal user folder from jaunty when I first installed karmic (at around alpha 2, I think it was).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Rocko (rockorequin)](https://launchpad.net/~rockorequin) wrote on 2009-10-08: |  |  | [#47](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/47) |
| --- | --- | --- | --- |

I've discovered what it is - if you suspend from user switcher applet, it locks the screen on suspend; if you remove the applet from gnome-panel and suspend from the System / Shut Down menu, it doesn't lock the screen. Should I log a separate bug for this or is it still relevant to g-p-m and this bug?

I've discovered what it is - if you suspend from user switcher applet, it locks the screen on suspend; if you remove the applet from gnome-panel and suspend from the System / Shut Down menu, it doesn't lock the screen. Should I log a separate bug for this or is it still relevant to g-p-m and this bug?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-10-08:  [**Re: [Bug 428115] Re: Does not lock screen on lid close**](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/48) |  |  | [#48](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/48) |
| --- | --- | --- | --- |

Rocko [2009-10-08 8:51 -0000]:

> I've discovered what it is - if you suspend from user switcher applet,

> it locks the screen on suspend; if you remove the applet from gnome-

> panel and suspend from the System / Shut Down menu, it doesn't lock the

> screen. Should I log a separate bug for this or is it still relevant to

> g-p-m and this bug?

Ah, this sounds like a bug in gnome-panel then. Can you please file a

new one? I suppose it's something trivial like updating the gconf keys

for current gnome-screensaver.

Rocko [2009-10-08 8:51 -0000]:
> I've discovered what it is - if you suspend from user switcher applet,
> it locks the screen on suspend; if you remove the applet from gnome-
> panel and suspend from the System / Shut Down menu, it doesn't lock the
> screen. Should I log a separate bug for this or is it still relevant to
> g-p-m and this bug?
Ah, this sounds like a bug in gnome-panel then. Can you please file a
new one? I suppose it's something trivial like updating the gconf keys
for current gnome-screensaver.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [unggnu (unggnu)](https://launchpad.net/~unggnu) wrote on 2009-10-12: |  |  | [#49](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/49) |
| --- | --- | --- | --- |

The problem was fixed in the indicator applet but it seems to have reappeared again. Locking is enabled in gconf and I am using the indicator applet.

The problem was fixed in the indicator applet but it seems to have reappeared again. Locking is enabled in gconf and I am using the indicator applet.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [unggnu (unggnu)](https://launchpad.net/~unggnu) wrote on 2009-10-16: |  |  | [#50](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/50) |
| --- | --- | --- | --- |

Just wanted to confirm that it works again. I haven't changed anything so I guess it was an update.

Just wanted to confirm that it works again. I haven't changed anything so I guess it was an update.

[Rob W (wilsonr0)](https://launchpad.net/~wilsonr0)
on 2009-11-12

| **description**: | updated |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Noel J. Bergman (noeljb)](https://launchpad.net/~noeljb) wrote on 2009-11-12: |  |  | [#51](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/51) |
| --- | --- | --- | --- |

I found, on a clean karmic install, that I had to do this:

# blank screen and lock on lid close

gconftool -s --type bool /apps/gnome-power-manager/lock/blank\_screen true

gconftool -s --type string /apps/gnome-power-manager/buttons/lid\_battery blank

gconftool -s --type string /apps/gnome-power-manager/buttons/lid\_ac blank

to get the laptop to work as desired.

I found, on a clean karmic install, that I had to do this:
# blank screen and lock on lid close
gconftool -s --type bool /apps/gnome-power-manager/lock/blank\_screen true
gconftool -s --type string /apps/gnome-power-manager/buttons/lid\_battery blank
gconftool -s --type string /apps/gnome-power-manager/buttons/lid\_ac blank
to get the laptop to work as desired.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel (daniel-jacobs)](https://launchpad.net/~daniel-jacobs) wrote on 2009-11-13: |  |  | [#52](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/52) |
| --- | --- | --- | --- |

For me the screen is NOT locked on suspend.

(It doesn't matter if pressing Fn+Esc or using indicator-applet-session!)

Comment #51 does not work for me!

My system is up to date!

For me the screen is NOT locked on suspend.
(It doesn't matter if pressing Fn+Esc or using indicator-applet-session!)
Comment #51 does not work for me!
My system is up to date!

| Changed in gnome-power-manager (Ubuntu): | |
| --- | --- |
| **status**: | Fix Released → New |
| Changed in indicator-session (Ubuntu Karmic): | |
| **status**: | Fix Released → New |
| **status**: | New → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-11-13: |  |  | [#53](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/53) |
| --- | --- | --- | --- |

Daniel, the bug title is "does not lock screen on lid close" (which is what g-p-m does). Also comment 51 will actually \_break\_ it:

gconftool -s --type string /apps/gnome-power-manager/buttons/lid\_battery blank

This configured g-p-m to \_not\_ suspend any more on any lid actions. I suggest to revert with

gconftool --recursive-unset /apps/gnome-power-manager/buttons/

to restore the defaults again.

Daniel, the bug title is "does not lock screen on lid close" (which is what g-p-m does). Also comment 51 will actually \_break\_ it:
gconftool -s --type string /apps/gnome-power-manager/buttons/lid\_battery blank
This configured g-p-m to \_not\_ suspend any more on any lid actions. I suggest to revert with
gconftool --recursive-unset /apps/gnome-power-manager/buttons/
to restore the defaults again.

| Changed in gnome-power-manager (Ubuntu): | |
| --- | --- |
| **status**: | New → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Noel J. Bergman (noeljb)](https://launchpad.net/~noeljb) wrote on 2009-11-13: |  |  | [#54](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/54) |
| --- | --- | --- | --- |

@Martin, "This configured g-p-m to \_not\_ suspend any more on any lid actions" -- Exactly. Perhaps should discuss this on IRC rather than back-and-forth here, but as you note, "the bug title is "does not lock screen on lid close"", not "the system does not suspend on lid close." My entries in comment 51 are exactly what I am using on a clean install of Karmic, and they work perfectly. I simply want it to lock. I never want it to suspend just because I close the lid. I, in fact, \*hate\* that feature. Perfectly happy with how karmic works now, with those gconf entries. :-)

@Martin, "This configured g-p-m to \_not\_ suspend any more on any lid actions" -- Exactly. Perhaps should discuss this on IRC rather than back-and-forth here, but as you note, "the bug title is "does not lock screen on lid close"", not "the system does not suspend on lid close." My entries in comment 51 are exactly what I am using on a clean install of Karmic, and they work perfectly. I simply want it to lock. I never want it to suspend just because I close the lid. I, in fact, \*hate\* that feature. Perfectly happy with how karmic works now, with those gconf entries. :-)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2009-11-13: |  |  | [#55](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/comments/55) |
| --- | --- | --- | --- |

Noel J. Bergman [2009-11-13 19:00 -0000]:

> @Martin, "This configured g-p-m to \_not\_ suspend any more on any lid

> actions" -- Exactly. Perhaps should discuss this on IRC rather than

> back-and-forth here, but as you note, "the bug title is "does not lock

> screen on lid close"", not "the system does not suspend on lid close."

Oops, sorry. Friday-evening braindeath.

Noel J. Bergman [2009-11-13 19:00 -0000]:
> @Martin, "This configured g-p-m to \_not\_ suspend any more on any lid
> actions" -- Exactly. Perhaps should discuss this on IRC rather than
> back-and-forth here, but as you note, "the bug title is "does not lock
> screen on lid close"", not "the system does not suspend on lid close."
Oops, sorry. Friday-evening braindeath.

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/gnome-power-manager/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

## Duplicates of this bug

* [Bug #407315](https://bugs.launchpad.net/bugs/407315 "Screen does not lock after suspend")
* [Bug #419111](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/419111 "[karmic, regression] screen does not get locked at suspend")
* [Bug #437329](https://bugs.launchpad.net/bugs/437329 "Does not sleep/resume when closing/opening lid")

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Bug attachments

* [Dependencies.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711725/%2Bfiles/Dependencies.txt)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711725 "Change attachment details")
* [DevkitPower.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711726/%2Bfiles/DevkitPower.txt)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711726 "Change attachment details")
* [GConfNonDefault.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711727/%2Bfiles/GConfNonDefault.txt)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711727 "Change attachment details")
* [gnome-power-bugreport.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711728/%2Bfiles/gnome-power-bugreport.txt)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/711728 "Change attachment details")
* [gpm.log](https://bugs.launchpad.net/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/786414/%2Bfiles/gpm.log)
  [Edit](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Battachment/786414 "Change attachment details")

* [Add attachment](/ubuntu/%2Bsource/gnome-power-manager/%2Bbug/428115/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
50c26bf
([Get the code!](https://dev.launchpad.net/))


