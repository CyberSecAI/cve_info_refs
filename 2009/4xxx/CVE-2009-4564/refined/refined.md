Based on the provided content, here's the breakdown of the vulnerability:

**CVE ID:** CVE-2009-4564 (The exploit also mentions CVE-2009-4566, but the focus is on 4564)

**Root Cause:** The `sanitize` function used in ZenPhoto 1.2.5 does not properly escape single quotes in the `$_GET['category']` parameter.

**Weaknesses/Vulnerabilities Present:**
*   **Blind SQL Injection:** The lack of proper sanitization allows an attacker to inject arbitrary SQL code into the database query. This is a *blind* SQL injection because the attacker does not directly see the results of the query in the web page, but must use timing or other methods to infer results.

**Impact of Exploitation:**
*   **Data Exfiltration:** An attacker can extract sensitive information from the database, such as admin usernames and password hashes.
*   **Admin Access:** The extracted username/password hash can be used to gain administrative access to the ZenPhoto application.
*   **Full compromise**: By gaining admin access, the attacker can further compromise the server.

**Attack Vectors:**
*   **HTTP GET Request:** The vulnerability is exploited by crafting a malicious URL that includes SQL injection code within the `category` parameter of a GET request to a Zenphoto news category page.
*   **Javascript Injection:** The provided javascript exploit allows automated extraction of data through the use of benchmark queries to infer the value of specific characters in the user/password string.

**Required Attacker Capabilities/Position:**
*   **Network Access:** The attacker needs to be able to send HTTP requests to the vulnerable ZenPhoto server.
*   **Knowledge of Vulnerable Endpoint:** The attacker needs to know the location of the vulnerable news category page.
*   **Javascript Execution**: The attacker must be able to have the user's browser execute the malicious javascript.

**Technical Details:**
*   **Vulnerable Code:**
    ```php
    $catname = sanitize($_GET['category']);
    query("UPDATE ".prefix('zenpage_news_categories')." SET `hitcounter` = `hitcounter`+1 WHERE `cat_link` = '".$catname."'",true);
    ```
*   **Patch:**
    ```php
    $catname = mysql_real_escape_string($_GET['category']);
    ```
*   **Exploit Technique:**
    *   The exploit leverages the `hitcounter` update query, which is vulnerable to SQL injection via the `cat_link` parameter.
    *   It uses `BENCHMARK()` to introduce time delays based on the results of the SQL query, allowing character-by-character extraction of the username and password hash.
    *   It also includes Javascript functions for automating the exploitation process.

This content provides more details than the typical CVE description by including the vulnerable code snippet, patch, a detailed explanation of the exploit and a javascript exploit script.