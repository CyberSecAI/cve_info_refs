=== Content from www.robtex.com_90d917b8_20250124_120122.html ===
=========================================================================
=changelog for viking =
= =
=please note that there are probably more changes than documented below =
=this is an attempt to document all important changes. =
=========================================================================
-387 RBLs need to be specified manually. (seems like RBLs have a tendency
of getting discontinued, and I don't want the responsibility
to keep it updated)
ignore rfc1918-nets for rbl-check.
readahead on fullduplex sockets to prevent deadlocks.
dynamic writebuffer.
-386 better cachepolicy set on admin interface to prevent caching
logging of username and proxyusername in cl\*-logs
speedup in threadsynchronisation.
fixed x-viking/bounce trigged doubleslash-antihack.
new x-viking/frame (transparent bounce)
-385 x-robot problem solved (crashed)
faster flush to disk of cached objects
keep-alive set for tcp-connections
-384 nntp-list command fixed
easing up a little on url-antihack, especially for proxy. now virtually
no url-antihack is done for proxy, so don't trust viking to protect other
servers. (in case you've set it up as reverse proxy)
reject server http-request which contains ugly/hackish
constructs such as "::" (for ::$DATA-exploits, thanks to Greg Briggs!)
some not interesting info removed from consolelog
some other minor changes
-383 large smtp "rcpt to:" fix (Joe Testa again)
-382 \...\-exploit fix (thanks to Joe Testa http://hogs.rit.edu/~joet )
-381 Time protocol extended with UDP-support. %2e%2e-exploit fix
-380 fix in http-proxy-authentication serverside. better ICP-handling.
-379 http-proxy-authentication
fix for dns-authorative when bind>9 resolving.
1.07
-378 isapi/cgi fix (variables like iis instead of apache/rfc-style), runs php4 fine.
-377 internet-topology-analyzer-and-rtt-predictor.
gui-hang fixed. slightly new gui.
write0-bug fixed
configurable tcpmaxidle-time.
-376 mailias (one-to-many) expansion via non-smtp could cause problems in
certain complex setups.
new \*experimental\* mail-log (ml\*.txt) introduced.
fixed handling of harddisk full on reception of mail.
popserver does no longer load entire message in memory. (easier to pop down a huge mail)
timerfunctions improved (minor problems with wrapping of signed/unsigned 32bit milliseconds-counters)
-375 memoryleak in filefunctions fixed.
-374 bugfix default BeDNS. bugfix "c:httpd.cnf". ReloadIntoIMS feature
now configurable. DNS-resolver now handles greatdomains.com
buggy nameservers.
-373 support for selecting default listening ip.
support for multiple listening ports. mailbox-cache.
-372 cache private mode. cache-fix: delete previously cacheable content replaced by noncacheable content.
securityfix: axfr can only be done from TrustNet. SMTP early connect supports dynamic host-failure-list.
forwarding smtp address failure learning.
-371 debugwrapper for some bugs.
-370 vulnerability fixes. Please see http://www.robtex.com/viking/bugs.htm
thanks to Noam Rathaus at http://www.BeyondSecurity.com
-369 bugfix in dns-database.
-368 bugfix for chunked encoding logging. removes some old criticalsections. improved
internal functions. watchdog disable option. minor webmail improvements.
-367 reduced idle diskactivity, dns-fixes.
-366 fixed restart-code (could spawn multiple vikings), byteranges-code fixes (for acrobat),
minor fixes, some more minor fixes, unnecesary debugcode added, more mutexes discovered
-365 fixed mutex-order in bandom.
-364 fixed mutex-order in prefetcher. malloc-enhancements.
-363 fixed mutex-order in logging/databasehandler and in vreporter.
-362 fixed mutex issues and dns issues. should be quite functional by now.
-361 new internal database-handler. mutex fixes, dns fixes. this release
is intended only for the extremely bold people.
-360 enhancements in dns again. still not satisfied, though.
test of new mutexes.
-359 fixed wildcards and filespec in ftp-listing
enhancements in dns (mostly affects rev dns in log backlog)
-358 fixed src 53 for udp dns outgoing queries if not wandering dns is activated.
maximum workerthreads increased
other dns-resolv fixes
-357 new test. AUTH LOGIN and AUTH=LOGIN only announced for clients NOT on trustnet.
-356 fixed AUTH LOGIN incompatibility with Netscape Messenger
implemented SessionCookieFor
1.06 minor change to cl-logfile and ex-logfile to support webtrends
-355 APOP-support (you must use unencrypted password, i.e. beginning with a hyphen)
AUTH LOGIN support for SMTP.
dynamically allocated multiple loggerworkers.
(logs and reverselookups in parallell)
more generous caching of cookied pages according to rfc.
previous vikings were too paranoid.
-354 fixed windows95 pre-osr2 (GetDiskFreeSpaceEx missing)
-353 fixed windows 2000 serious problems.
-352 fixed problems with cachedirs (due to support for multiple dirs)
faster cache-reading
-351 small isapi-reentrant-cache bugfix.
experimental multiple cachedirs,
multisubdir cachestruct
disk free checker for cache.
multiline mailheader fixes
longer poptimeout
udp redirection
-350 faster http-clientside (fixed select wait timevalues)
removed a lot of unnecessary logmessages
-349 even faster header-handler
safer dnswalker (changes src-port for queries) configurable in DNSWalker
this seems to cause some problems. feature default is now off.
-348 started chglog
can set uucpblocksize
new option Paranoia to hide sensitive information about local net
dns-parser robustified more.
serverside pipeline-function ignores extra cr/lf.
safer handling of out-of-memory cases
preconnection of smtp to external hosts (while receiving outgoing mail)
internal functions and parsers optimized
---
miscellaneous old news:
can resolve dns from roots down
serverside pipeline
---
=========================================================================
= wishlist/todo, possibly to be organized in some kind of order =
=========================================================================
\* bind socks harder
\* private cache option
\* remove dup identical records
\* faster ftp-server (marked for deletion-code)
\* docs
features/functions:
\* https
\* ftp port deny data-channel to/from (?) other host than ctrl-channel [option]
\* possibility to be slave-nameserver
\* support attachments in webmail
\* fix all mutex-orders
\* linux-port
\* multiple serverports (e.g. http on 80,8080 and 3128)
\* imap
\* RTSP realaudio-proxy
\* mail2exe gateway
\* multiple dialups (redundant?)
\* flag to not steal/use current RAS-session
\* isapi-perl cgi
cosmetic:
\* fix sort-order in webmail interface
\* Changing page colours in BodyBegin makes most text in config
pages invisible because you enforce white background but not
text color in config "tables" (try "body text=black
bgcolor=white")
bugs:
\* Dir listing should not show hidden files.
\* It seems %20 is not recognized in AllowDirList, can not specify a directory name with spaces.
\* There should be a forward option in the mail interface
\* Mail interface ignores reply-to header.
\* ftp via http proxy bugs on url to directory on a microsoft ftp server
if url is not slashterminated (server datachannel gets reset, make workaround)
\* fcp server does not work, crashes
\* inetd-detection has problems after millisecond-counter wrapped.
verify fixed bugs:
\* full harddisk loss of email
fixed bugs:
\* shutdown-problem on certain machines (watchdog loosing pulse-feedback)
\* (under evaluation in 367) DNS-resolv goes bad and wont trust any reply
\* fix more info on write0-errors. | 376
\* problems with serverside ftp on network-volumes ( /f/ a.s.o very strange) | false alarm
=========================================================================
= Requests/bugreports and other comments: =
=========================================================================
- Prefetching of URLs in HTML mail. Make it configurable?
[toggle prefetching for non http-traffic ? ]
- Proxy doesn't pass Accept-Language. User receives page in wrong language (e.g.: WindowsUpdate).
- Support for html tags in files.bbs descriptions.
[how to tell viking a files.bbs is html? another filename?]
- Support for html tags in welcome.txt
[how to tell viking a welcome.txt is html? another filename?]
- Something like welcome.txt for FTP.
- POP AUTH CRAM-MD5
- Viking should be APOP and SMTP AUTH "client" as well as "server".
(e.g.: APOP when doing POPFROM).
- If username not listed in PASSWORD.TXT or no PASSWORD.TXT in
current directory, look for it in PASSWORD.TXT in parent
directories.
- If only username is present, and s/he is a Viking's user, then
use the user account password.
- A way to specify the position of a wildcard rule. (e.g.: if a
rule appears as "210 something...", I want it to be "90
something...")
- Encrypted passwords in password.txt (Unix crypt format would be nice if
possible)
- IMHO, the mail interface should be completely overhauled. I would be
willing to do a nice design and graphics for it.
- This is kind of major, and shouldn't be high priority, but would be
helpful. It would be nice to have a website add/modify interface similar to
the user add/modify interface, in which you could create a website, tell it
what domains point to it, select services to be activated for that
particular domain, mail aliases for that domain, etc. While the current
interface is OK, it gets to be a pain after there are a lot of domains (I'm
currently hosting over 30).
- Addsite should accept wild-cards. Right now I either have to define 2
entries (sitename and www.sitename), or add a redirect.
- \*.sitename.com should also include sitename.com. I've been using
\*sitename.com, which works, but will also include other domains that end in
"sitename.com," and I actually have an instance where this happens.
[will work in wild when I get my regex engine into gear: (.\*\.)?sitename.com
probably better though to make a macro-command of some kind to add a redirect
]
-PHP4 ISAPI support (currently doesn't work).

