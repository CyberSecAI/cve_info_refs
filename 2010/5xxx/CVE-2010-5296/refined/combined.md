=== Content from codex.wordpress.org_ce734b76_20250125_213030.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Documentation](https://wordpress.org/documentation)

Version 3.0.2

* [WordPress Overview](https://wordpress.org/documentation/overview/)
* [Technical Guides](https://wordpress.org/documentation/technical-guides/)
* [Support Guides](https://wordpress.org/documentation/support-guides/)
* [Customization](https://wordpress.org/documentation/customization/)
* [Get Involved](https://make.wordpress.org/docs/)

* [WordPress Overview](https://wordpress.org/documentation/overview/)
* [Technical Guides](https://wordpress.org/documentation/technical-guides/)
* [Support Guides](https://wordpress.org/documentation/support-guides/)
* [Customization](https://wordpress.org/documentation/customization/)
* [Get Involved](https://make.wordpress.org/docs/)

[Home](https://wordpress.org/documentation)Version 3.0.2

Search documentation

# Version 3.0.2

## In this article

Table of Contents

* [Installation/Update Information](#installation-update-information)
* [Summary](#summary)
* [List of Files Revised](#list-of-files-revised)

[↑ Back to top](#wp--skip-link--target)

On November 30, 2010, WordPress 3.0.2 was released to the public. This was a mandatory security update for all previous WordPress versions.

For version 3.0.2, the database version (**db\_version** in **wp\_options**) remained at 15477.

## [Installation/Update Information](#installation-update-information)

To download WordPress 3.0.2, update automatically from the Dashboard > Updates menu in your site’s admin area or visit <https://wordpress.org/download/release-archive/>.

For step-by-step instructions on installing and updating WordPress:

* [Updating WordPress](https://wordpress.org/documentation/article/updating-wordpress/)

If you are new to WordPress, we recommend that you begin with the following:

* [New To WordPress – Where to Start](https://wordpress.org/documentation/article/new_to_wordpress_-_where_to_start/)
* [First Steps With WordPress](https://wordpress.org/documentation/article/first-steps-with-wordpress/) or [Upgrading WordPress Extended](https://wordpress.org/documentation/article/upgrading-wordpress-extended-instructions/)
* [WordPress Lessons](https://wordpress.org/documentation/article/wordpress-lessons/)

## [Summary](#summary)

* Fix moderate security issue where a malicious Author-level user could gain further access to the site. ([r16625](https://core.trac.wordpress.org/changeset/16625))

Other bugs and security hardening:

* Remove pingback/trackback blogroll whitelisting feature as it can easily be abused. ([#13887](https://core.trac.wordpress.org/ticket/13887))
* Fix canonical redirection for permalinks containing %category% with nested categories and paging. ([#13471](https://core.trac.wordpress.org/ticket/13471))
* Fix occasional irrelevant error messages on plugin activation. ([#15062](https://core.trac.wordpress.org/ticket/15062))
* Minor XSS fixes in request\_filesystem\_credentials() and when deleting a plugin. ([r16367](https://core.trac.wordpress.org/changeset/16367), [r16373](https://core.trac.wordpress.org/changeset/16373))
* Clarify the license in the readme ([r15534](https://core.trac.wordpress.org/changeset/15534))
* Multisite: Fix the delete\_user meta capability ([r15562](https://core.trac.wordpress.org/changeset/15562))
* Multisite: Force current\_user\_can\_for\_blog() to run map\_meta\_cap() even for super admins ([#15122](https://core.trac.wordpress.org/ticket/15122))
* Multisite: Fix ms-files.php content type headers when requesting a URL with a query string ([#14450](https://core.trac.wordpress.org/ticket/14450))
* Multisite: Fix the usage of the SUBDOMAIN\_INSTALL constant for upgraded WordPress MU installs ([#14536](https://core.trac.wordpress.org/ticket/14536))

## [List of Files Revised](#list-of-files-revised)

```
wp-includes/ms-files.php
wp-includes/version.php
wp-includes/comment.php
wp-includes/functions.php
wp-includes/load.php
wp-includes/canonical.php
wp-includes/capabilities.php
readme.html
wp-admin/includes/plugin.php
wp-admin/includes/file.php
wp-admin/includes/update-core.php
wp-admin/plugins.php
```

First published

May 19, 2019

Last updated

## Get more help

[Support forums](https://wordpress.org/support/forums/)

Ask questions in the support forums.

[Developers](https://developer.wordpress.org/)

Check out the developer documentation.

[Content suggestions](https://github.com/WordPress/Documentation-Issue-Tracker/issues)

Report an error or change in the documentation issue tracker.

[Get involved](https://make.wordpress.org/docs/)

Learn about the Documentation Team and how to contribute.

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from core.trac.wordpress.org_9849c4c5_20250125_213031.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Make WordPress Core](https://make.wordpress.org/core/)

* [Blog](https://make.wordpress.org/core/)
* [Handbook](https://make.wordpress.org/core/handbook/)
* [Tickets](https://make.wordpress.org/core/reports/)
* [Components](https://make.wordpress.org/core/components/)
* [Browse Source](https://core.trac.wordpress.org/browser "Browse Source")
* [Trac Timeline](https://core.trac.wordpress.org/timeline "Trac Timeline")
* [Create a New Ticket](https://login.wordpress.org/?redirect_to=https://core.trac.wordpress.org/newticket "Create a New Ticket")

Search:

* [Login](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fcore.trac.wordpress.org%2Fchangeset%2F15562)
* [Notifications](https://make.wordpress.org/core/notifications/)

## Context Navigation

* ← [Previous Changeset](/changeset/15561 "Changeset 15561")
* [Next Changeset](/changeset/15563 "Changeset 15563") →

---

# Changeset 15562

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/04/2010 12:25:44 PM
([14 years](/timeline?from=2010-09-04T12%3A25%3A44Z&precision=second "See timeline at 09/04/2010 12:25:44 PM") ago)

Author:
nacin
Message:

Fix the delete\_user meta cap.

File:

1 edited

* [branches/3.0/wp-includes/capabilities.php](/browser/branches/3.0/wp-includes/capabilities.php?rev=15562 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [branches/3.0/wp-includes/capabilities.php](/changeset/15562/branches/3.0/wp-includes/capabilities.php "Show the changeset 15562 restricted to branches/3.0/wp-includes/capabilities.php")

  | [r15478](/browser/branches/3.0/wp-includes/capabilities.php?rev=15478#L799 "Show revision 15478 of this file in browser") | [r15562](/browser/branches/3.0/wp-includes/capabilities.php?rev=15562#L799 "Show revision 15562 of this file in browser") |  |
  | --- | --- | --- |
  | 799 | 799 | case 'remove\_user': |
  | 800 | 800 | $caps[] = 'remove\_users'; |
  | 801 |  | ~~break;~~ |
  | 802 |  | ~~case 'delete\_user':~~ |
  | 803 |  | ~~$caps[] = 'delete\_users';~~ |
  | 804 | 801 | break; |
  | 805 | 802 | case 'promote\_user': |
  | […](/browser/branches/3.0/wp-includes/capabilities.php?rev=15478#L1029) | […](/browser/branches/3.0/wp-includes/capabilities.php?rev=15562#L1026) |  |
  | 1029 | 1026 | case 'delete\_users': |
  | 1030 | 1027 | // If multisite these caps are allowed only for super admins. |
  | 1031 |  | if ( is\_multisite() && !is\_super\_admin( $user\_id ) ) |
  |  | 1028 | if ( is\_multisite() && !is\_super\_admin( $user\_id ) ) { |
  | 1032 | 1029 | $caps[] = 'do\_not\_allow'; |
  | 1033 |  | else |
  |  | 1030 | } else { |
  |  | 1031 | if ( 'delete\_user' == $cap ) |
  |  | 1032 | $cap = 'delete\_users'; |
  | 1034 | 1033 | $caps[] = $cap; |
  |  | 1034 | } |
  | 1035 | 1035 | break; |
  | 1036 | 1036 | case 'create\_users': |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=15562)
* [Zip Archive](?format=zip&new=15562)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


