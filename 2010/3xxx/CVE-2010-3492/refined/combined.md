=== Content from www.mandriva.com_1a2d5d80_20250124_212420.html ===


* [Tuxedo.org](https://tuxedo.org/ "Go to: Tuxedo")
* Store
* Mandriva Linux
* Enterprise Solutions
* Contact Us
* Language ![](/sites/all/themes/mandriva_customer/images/arrow-grey-bottom.gif)
  + English (International)
  + Français
  + Ð ÑÑÑÐºÐ¸Ð¹

# [Mandriva](/mandriva/)

* Download
* Mandriva Linux
* Community
* Help

## One

### The Linux desktopthat's easy to try and easy to keep

Download
![Mandriva One](/sites/all/themes/mandriva_customer/images/front/packshot_Mandriva_One.png)

## Powerpack

### Mandriva Linux- and more

Download
![Mandriva Linux Powerpack](/sites/all/themes/mandriva_customer/images/front/en-49.png)

## Mandriva Flash

### The mobile and installable Linux desktopon a USB key

Buy on Store
![Mandriva Flash](/sites/all/themes/mandriva_customer/images/front/mandriva-flash2.png)

### [Community](community)

* User Forums
* Support - FAQ
* Free Software
* Become a member

### Enterprise Solutions

* Enterprise Linux Products
* Asset Management Solution
* Professional Services
* Support & Maintenance

* Go to site »

### Mandriva Partners

* Worldwide offices
* Partner Program
* Technology Partners
* OEM
* Classmate PC with Mandriva Linux

### News

* Mandriva presents the launch of its new mobile desktop: Mandriva Flash 2008 Spring
* Speaking about Mandriva Linux 2008 Spring in media
* Speaking about Mandriva Linux 2008 Spring in media
* Mandriva presents its latest distribution: Mandriva Linux 2008 Spring
* Mandriva and Novatice Technologies present Edutice, The ready to use solution dedicated to educationand multimedia spaces
* # [Top 50 Online Casinos UK in 2023](https://montycasinos.com/online-casinos/)

more

* Download
  + Mandriva Linux 2008
  + Writing an ISO image
* Mandriva Linux
  + One
  + Powerpack
  + Mandriva Flash
* Community
  + Start
  + Register
  + Stay informed
  + Participate
  + Free software
* Help
  + Getting help
  + Knowledge Base
  + Documentation
  + Forums
  + Support Requests
  + Customer Care
  + Enterprise Support
* Enterprise Solutions
  + Products
  + Support
  + Services
  + Partners
  + Go to site »

Language
English (International)
Français
Ð ÑÑÑÐºÐ¸Ð¹

* © 2007 Mandriva S.A.
* About Us
* Legal Information
* Privacy Policy
* Contact Us



=== Content from www.openwall.com_c1288546_20250124_212422.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](3) [[<thread-prev]](../../../2010/09/09/6) [[thread-next>]](../../../2010/09/22/3) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <2144085049.2142031284165154353.JavaMail.root@zmail01.collab.prod.int.phx2.redhat.com>
Date: Fri, 10 Sep 2010 20:32:34 -0400 (EDT)
From: Josh Bressers <bressers@...hat.com>
To: oss-security@...ts.openwall.com
Cc: David Malcolm <dmalcolm@...hat.com>,
        "Steven M. Christey" <coley@...us.mitre.org>
Subject: Re: CVE Request -- Python -- accept() implementation
 in async core is broken => more subcases

Steve,

I'm going to leave this one up to you. While it's really a python bug, I
suspect several affected projects will end up patching themselves (I'm not
sure how MITRE hadnles this situation).

Thanks.

--
    JB

----- "Jan Lieskovsky" <jlieskov@...hat.com> wrote:

> Hello Steve, vendors,
>
>    Giampaolo Rodola reported a deficiency in the implementation of
> Python's accept() routine:
>    [1] <http://bugs.python.org/issue6706>
>
>    The following seems to be all symptoms for the same issue:
>    A, SMTP (smtpd.py):
>       [2] <https://bugzilla.redhat.com/show_bug.cgi?id=632200>
>       [3] <http://bugs.python.org/issue9129>
>
>    B, pyftpdlib:
>       [4] <http://code.google.com/p/pyftpdlib/issues/detail?id=104>
>
>    C, ZODB:
>       [5] [https://bugs.launchpad.net/zodb/+bug/135108](https://bugs.launchpad.net/zodb/%2Bbug/135108)
>
>    D, more?
>
> Not sure, how to proceed in this case:
> i,  if assign only one CVE id for [1] or,
> ii, assign also separate CVE ids for the child symptoms? ([2], [3],
> [4])
>
> Cc-ed David Malcom on this post, to shed more light how to handle this
> case.
>
> Once the way, how to further proceed with this, specified. Steve could
> you allocate CVE id (ids)?
>
> Thanks && Regards, Jan.
> --
> Jan iankko Lieskovsky / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.openwall.com_9c6e9253_20250124_212421.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](5) [[next>]](7) [[thread-next>]](../../../2010/09/11/2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <4C88DB97.1060602@redhat.com>
Date: Thu, 09 Sep 2010 15:05:27 +0200
From: Jan Lieskovsky <jlieskov@...hat.com>
To: "Steven M. Christey" <coley@...us.mitre.org>
CC: oss-security <oss-security@...ts.openwall.com>,
        David Malcolm <dmalcolm@...hat.com>
Subject: CVE Request -- Python -- accept() implementation in async core is
 broken => more subcases

Hello Steve, vendors,

   Giampaolo Rodola reported a deficiency in the implementation of Python's accept() routine:
   [1] <http://bugs.python.org/issue6706>

   The following seems to be all symptoms for the same issue:
   A, SMTP (smtpd.py):
      [2] <https://bugzilla.redhat.com/show_bug.cgi?id=632200>
      [3] <http://bugs.python.org/issue9129>

   B, pyftpdlib:
      [4] <http://code.google.com/p/pyftpdlib/issues/detail?id=104>

   C, ZODB:
      [5] [https://bugs.launchpad.net/zodb/+bug/135108](https://bugs.launchpad.net/zodb/%2Bbug/135108)

   D, more?

Not sure, how to proceed in this case:
i,  if assign only one CVE id for [1] or,
ii, assign also separate CVE ids for the child symptoms? ([2], [3], [4])

Cc-ed David Malcom on this post, to shed more light how to handle this case.

Once the way, how to further proceed with this, specified. Steve could you allocate CVE id (ids)?

Thanks && Regards, Jan.
--
Jan iankko Lieskovsky / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.mandriva.com_d8fce230_20250124_212421.html ===


* [Tuxedo.org](https://tuxedo.org/ "Go to: Tuxedo")
* Store
* Mandriva Linux
* Enterprise Solutions
* Contact Us
* Language ![](/sites/all/themes/mandriva_customer/images/arrow-grey-bottom.gif)
  + English (International)
  + Français
  + Ð ÑÑÑÐºÐ¸Ð¹

# [Mandriva](/mandriva/)

* Download
* Mandriva Linux
* Community
* Help

## One

### The Linux desktopthat's easy to try and easy to keep

Download
![Mandriva One](/sites/all/themes/mandriva_customer/images/front/packshot_Mandriva_One.png)

## Powerpack

### Mandriva Linux- and more

Download
![Mandriva Linux Powerpack](/sites/all/themes/mandriva_customer/images/front/en-49.png)

## Mandriva Flash

### The mobile and installable Linux desktopon a USB key

Buy on Store
![Mandriva Flash](/sites/all/themes/mandriva_customer/images/front/mandriva-flash2.png)

### [Community](community)

* User Forums
* Support - FAQ
* Free Software
* Become a member

### Enterprise Solutions

* Enterprise Linux Products
* Asset Management Solution
* Professional Services
* Support & Maintenance

* Go to site »

### Mandriva Partners

* Worldwide offices
* Partner Program
* Technology Partners
* OEM
* Classmate PC with Mandriva Linux

### News

* Mandriva presents the launch of its new mobile desktop: Mandriva Flash 2008 Spring
* Speaking about Mandriva Linux 2008 Spring in media
* Speaking about Mandriva Linux 2008 Spring in media
* Mandriva presents its latest distribution: Mandriva Linux 2008 Spring
* Mandriva and Novatice Technologies present Edutice, The ready to use solution dedicated to educationand multimedia spaces
* # [Top 50 Online Casinos UK in 2023](https://montycasinos.com/online-casinos/)

more

* Download
  + Mandriva Linux 2008
  + Writing an ISO image
* Mandriva Linux
  + One
  + Powerpack
  + Mandriva Flash
* Community
  + Start
  + Register
  + Stay informed
  + Participate
  + Free software
* Help
  + Getting help
  + Knowledge Base
  + Documentation
  + Forums
  + Support Requests
  + Customer Care
  + Enterprise Support
* Enterprise Solutions
  + Products
  + Support
  + Services
  + Partners
  + Go to site »

Language
English (International)
Français
Ð ÑÑÑÐºÐ¸Ð¹

* © 2007 Mandriva S.A.
* About Us
* Legal Information
* Privacy Policy
* Contact Us



=== Content from www.openwall.com_18e6afc4_20250124_212422.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](2) [[next>]](../../../2010/09/24/1) [[<thread-prev]](../../../2010/09/11/2) [[thread-next>]](../../../2010/09/24/3) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <813825154.401931285185278932.JavaMail.root@zmail01.collab.prod.int.phx2.redhat.com>
Date: Wed, 22 Sep 2010 15:54:38 -0400 (EDT)
From: Josh Bressers <bressers@...hat.com>
To: oss-security@...ts.openwall.com
Cc: David Malcolm <dmalcolm@...hat.com>,
        "Steven M. Christey" <coley@...us.mitre.org>
Subject: Re: CVE Request -- Python -- accept() implementation
 in async core is broken => more subcases

Any update on this Steve?

Thanks.

--
    JB

----- "Josh Bressers" <bressers@...hat.com> wrote:

> Steve,
>
> I'm going to leave this one up to you. While it's really a python bug,
> I
> suspect several affected projects will end up patching themselves (I'm
> not
> sure how MITRE hadnles this situation).
>
> Thanks.
>
> --
>     JB
>
>
> ----- "Jan Lieskovsky" <jlieskov@...hat.com> wrote:
>
> > Hello Steve, vendors,
> >
> >    Giampaolo Rodola reported a deficiency in the implementation of
> > Python's accept() routine:
> >    [1] <http://bugs.python.org/issue6706>
> >
> >    The following seems to be all symptoms for the same issue:
> >    A, SMTP (smtpd.py):
> >       [2] <https://bugzilla.redhat.com/show_bug.cgi?id=632200>
> >       [3] <http://bugs.python.org/issue9129>
> >
> >    B, pyftpdlib:
> >       [4] <http://code.google.com/p/pyftpdlib/issues/detail?id=104>
> >
> >    C, ZODB:
> >       [5] [https://bugs.launchpad.net/zodb/+bug/135108](https://bugs.launchpad.net/zodb/%2Bbug/135108)
> >
> >    D, more?
> >
> > Not sure, how to proceed in this case:
> > i,  if assign only one CVE id for [1] or,
> > ii, assign also separate CVE ids for the child symptoms? ([2], [3],
> > [4])
> >
> > Cc-ed David Malcom on this post, to shed more light how to handle
> this
> > case.
> >
> > Once the way, how to further proceed with this, specified. Steve
> could
> > you allocate CVE id (ids)?
> >
> > Thanks && Regards, Jan.
> > --
> > Jan iankko Lieskovsky / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.openwall.com_ba74dd22_20250124_212422.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](2) [[next>]](4) [[<thread-prev]](../../../2010/09/22/3) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <Pine.GSO.4.64.1009241357250.5338@faron.mitre.org>
Date: Fri, 24 Sep 2010 14:08:01 -0400 (EDT)
From: "Steven M. Christey" <coley@...us.mitre.org>
To: oss-security@...ts.openwall.com
cc: David Malcolm <dmalcolm@...hat.com>,
        "Steven M. Christey" <coley@...us.mitre.org>
Subject: Re: CVE Request -- Python -- accept() implementation
 in async core is broken => more subcases

On Wed, 22 Sep 2010, Josh Bressers wrote:

> Any update on this Steve?

This was a weird one to deal with.  There are a couple different
approaches.

We don't capture API "design limitations" in CVE (it would basically be
like assigning a CVE to "strcpy can be called with parameters that are
longer than the output buffer" or "setuid requires that the programmer
must check the return code to ensure that privileges were dropped.")

In this case, there is a "proper" way to handle the accept() behavior;
i.e. by catching the appropriate exceptions and accounting for an unusual
return value, the programmer can use the API safely.  That would argue for
treating it like strcpy/setuid/etc. design limitations, and holding
application programmers "responsible" for using it incorrectly.

However, there isn't some security-relevant documentation about these
specific API limitations.  So, a CVE could be assigned for the missing
documentation; alternately, we could treat it as "undocumented behavior"
in the API.  (This wouldn't be the first CVE related to documentation.)

Then, individual programs that happen to use the unpatched/older Pythons
can be held responsible for not accounting for this; similar to how we
"blame" applications for allowing XSS due to some non-standard
implementations within Internet Explorer, or Firefox, etc.

So:

CVE-2010-3492 - Python poor documentation of accept() behavior

CVE-2010-3493 - smtpd.py not catching errors generated by handle_accept

CVE-2010-3494 - pyftpdlib not catching errors generated by handle_accept

CVE-2010-3495 - ZODB not catching errors generated by handle_accept

- Steve

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from bugs.python.org_335b0f06_20250124_212418.html ===

# [homepage](.)

open

all

* [Python Home](https://www.python.org/ "Go to the Python homepage")
* [About](https://www.python.org/about/ "About The Python Language")
* [News](https://www.python.org/blogs/)
* [Documentation](https://www.python.org/doc/)
* [Downloads](https://www.python.org/downloads/)
* [Community](https://www.python.org/community/)
* [Foundation](https://www.python.org/psf/ "Python Software Foundation")
* [Developer's Guide](https://devguide.python.org/ "Python Developer's Guide")
* [Issue Tracker](. "Python Issue Tracker")
  + **Issues**
    - [Search](issue?@template=search&status=1)
    - [Random Issue](issue?@action=random)
  + **Summaries**
    - [Issues with patch](issue?status=1&@sort=-activity&@columns=id%2Cgithub%2Cactivity%2Ctitle%2Ccreator%2Cstatus&@dispname=Issues%20with%20patch&@startwith=0&@group=priority&keywords=2&@action=search&@filter=&@pagesize=50)
    - [Easy issues](issue?status=1&@sort=-activity&@columns=id%2Cgithub%2Cactivity%2Ctitle%2Ccreator%2Cstatus&@dispname=Easy%20issues&@startwith=0&@group=priority&keywords=6&@action=search&@filter=&@pagesize=50)
    - [Stats](issue?@template=stats)
  + **User**
    - Login

      Remember me?
    - [Lost your login?](user?@template=forgotten)
  + **Administration**
    - [User List](user?@sort=username)
    - [Committer List](user?iscommitter=1&@action=search&@sort=username&@pagesize=300)
  + **Help**
    - [Tracker Documentation](http://docs.python.org/devguide/triaging.html)
    - [Tracker Development](http://wiki.python.org/moin/TrackerDevelopment)
    - [Report Tracker Problem](https://github.com/python/psf-infra-meta/issues)

Issue6706

![](@@file/python-logo-small.png)
➜
[![](@@file/gh-icon.png)](https://github.com/python/cpython/issues)

This issue tracker **has been migrated to [GitHub](https://github.com/python/cpython/issues)**,
and is currently **read-only**.

For more information, [see the GitHub FAQs in the Python's Developer Guide.](https://devguide.python.org/gh-faq/ "GitHub FAQs")

[![](@@file/gh-icon.png)

This issue has been migrated to GitHub:
https://github.com/python/cpython/issues/50955](https://github.com/python/cpython/issues/50955)

classification

| [Title](http://docs.python.org/devguide/triaging.html#title): | asyncore's accept() is broken | | |
| --- | --- | --- | --- |
| [Type](http://docs.python.org/devguide/triaging.html#type): | security | [Stage](http://docs.python.org/devguide/triaging.html#stage): | resolved |
| [Components](http://docs.python.org/devguide/triaging.html#components): | Library (Lib) | [Versions](http://docs.python.org/devguide/triaging.html#versions): | Python 3.1, Python 3.2, Python 2.7 |

process

| [Status](http://docs.python.org/devguide/triaging.html#status): | closed | [Resolution](http://docs.python.org/devguide/triaging.html#resolution): | fixed |
| --- | --- | --- | --- |
| [Dependencies](http://docs.python.org/devguide/triaging.html#dependencies): |  | [Superseder](http://docs.python.org/devguide/triaging.html#superseder): |  |
| [Assigned To](http://docs.python.org/devguide/triaging.html#assigned-to): | giampaolo.rodola | [Nosy List](http://docs.python.org/devguide/triaging.html#nosy-list): | Arfrever, BreamoreBoy, barry, dmalcolm, giampaolo.rodola, josiahcarlson, matejcik, pitrou, santoso.wijaya |
| [Priority](http://docs.python.org/devguide/triaging.html#priority): | normal | [Keywords](http://docs.python.org/devguide/triaging.html#keywords): | patch |

Created on **2009-08-14 23:03** by **giampaolo.rodola**, last changed **2022-04-11 14:56** by **admin**. This issue is now **closed**.

| Files | | | | |
| --- | --- | --- | --- | --- |
| File name | Uploaded | Description | Edit |
| [accept.patch](file19001/accept.patch) | giampaolo.rodola, 2010-09-24 20:15 |  | [review](/review/6706/#ps25) |
| [accept.patch](file19005/accept.patch) | giampaolo.rodola, 2010-09-25 10:37 |  | [review](/review/6706/#ps24) |
| [accept.patch](file19104/accept.patch) | giampaolo.rodola, 2010-10-02 13:18 | adds handled\_accepted() method | [review](/review/6706/#ps3) |

| Messages (16) | | | |
| --- | --- | --- | --- |
| [msg91579](#msg91579) - [(view)](msg91579) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2009-08-14 23:03 |
| ``` An old bad design choice in asyncore is how it forces the user to  override handle_accept() and then call self.accept() to obtain a socket  pair.      def handle_accept(self):         conn, addr = self.accept()  The documentation itself shows the code above as an example of how an  asyncore-based server should handle an incoming connection. What the doc doesn't say is that the user calling self.accept() is  exposed to different risks:  - self.accept() can return None instead of a socket pair in which case  TypeError is raised (see pyftpdlib bug:  <http://code.google.com/p/pyftpdlib/issues/detail?id=91>)  - ECONNABORTED can be raised. This is reproducible on Linux by hammering  the server with nmap (see pyftpdlib bug:  <http://code.google.com/p/pyftpdlib/issues/detail?id=105>)  - EAGAIN can be raised too. I never experienced this error condition  myself in pyftpdlib but by looking at twisted/internet/tcp.py it seems  reasonable to catch EAGAIN too.  - The resulting address can be None, which means that the connection  didn't take place. This is reproducible by hammering the server with nmap (see pyftpdlib  bug <http://code.google.com/p/pyftpdlib/issues/detail?id=104>).   The right thing to do when one of such events occur is to "return" as no  connection has really been established between client and server.  Now, altough handling these kind of conditions is quite easy, the API  design remains fundamentally wrong, as it forces the user to call  accept(). As asyncore.py is structured right now the only chance the user has to  properly accepting a connection is manually handling all these cases in  his subclass.   My patch in attachment tries to solve this problem by defining a new  "handle_accept_event()" method which takes care of all the error  conditions described above resulting in handle_accept() be called *only  when a connection really took place*. When the connection is established handle_accept_event() stores the  socket pair as an attribute and the next call to accept() returns that  pair. This preserves the current implementation without breaking any code as  the user will have to override handle_accept() and then call accept() in  the same manner [1], with the difference that self.accept() will always  return a valid socket pair.  [1]      def handle_accept(self):         conn, addr = self.accept() ``` | | | |
| [msg112315](#msg112315) - [(view)](msg112315) | Author: Mark Lawrence (BreamoreBoy) \* | Date: 2010-08-01 11:47 |
| ``` @Giampaolo it looks as if you meant to attach a patch but didn't! :)  If you do attach one could you also supply a modified unit test file with it, thanks. ``` | | | |
| [msg112699](#msg112699) - [(view)](msg112699) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-08-03 21:51 |
| ``` Shame on me, it seems I totally forgot to attach the patch. Unfortunately the patch went lost but I'm going to try to rewrite it. As for tests, ECONN and EAGAIN error conditions are hardly reproducible unless you're using nmap. I'm assigning this to me for now as a reminder and update the issue as long as I have a working patch. ``` | | | |
| [msg117240](#msg117240) - [(view)](msg117240) | Author: Dave Malcolm (dmalcolm) (Python committer) | Date: 2010-09-23 22:11 |
| ``` giampaolo: did you ever rewrite the patch?  For reference to other users: <http://code.google.com/p/pyftpdlib/source/browse/trunk/pyftpdlib/ftpserver.py>  Note the complexity of the two handle_accept implementations in that file; both of them begin:         try:             sock, addr = self.accept()         except TypeError:             # sometimes accept() might return None (see issue 91)             return         except socket.error, err:             # ECONNABORTED might be thrown on *BSD (see issue 105)             if err[0] != errno.ECONNABORTED:                 logerror(traceback.format_exc())             return         else:             # sometimes addr == None instead of (ip, port) (see issue 104)             if addr == None:                 return ``` | | | |
| [msg117329](#msg117329) - [(view)](msg117329) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-09-24 20:15 |
| ``` Here's a rewriting attempt (not tested). Now that I look at it I must say it's quite ugly, so I don't think we should follow this road. An alternative I see is to return None in case of errors occurring on accept() and make this very clear in doc.  Other than accept(), doc should explicitly show how to use handle_accept() in general, which would end up looking like this:  class SomeServer(asyncore.dispatcher):          ...      def handle_accept():        conn = self.accept()        if conn is None:            return        else:            sock, addr = conn        ...      ...   A completely different approach could be to provide a new "TCPServer" class which deprecates direct accept() method usage. Something like this:   class TCPServer(asyncore.dispatcher):      def __init__(self, ip, port, handler, interface='', map=None):         asyncore.dispatcher.__init__(self, map=map)         self.create_socket(family=socket.AF_INET, type=socket.SOCK_STREAM)         self.bind((ip, port))         self.listen(5)         self.handler = handler      def handle_accept(self):         try:             sock, addr = self.accept()         except TypeError:             return         except socket.error, err:             if err[0] != errno.ECONNABORTED:                 raise             return         else:             if addr == None:                 return         handler = self.handler(conn, self._map)      def writable(self):         return 0    ...but for some reason I don't like it either. Point is asyncore API design is fundamentally wrong and there's nothing we can do about it unless we break backward compatibility or a brand new "asyncore2" module is written. ``` | | | |
| [msg117356](#msg117356) - [(view)](msg117356) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-09-25 10:37 |
| ``` Patch in attachment makes accept() return None in case no connection takes place and modifies the doc to make this very clear, also providing an example on how an asyncore-based server should be properly set-up . ``` | | | |
| [msg117357](#msg117357) - [(view)](msg117357) | Author: Antoine Pitrou (pitrou) \* (Python committer) | Date: 2010-09-25 10:54 |
| ``` > EAGAIN can be raised too. I never experienced this error condition  > myself in pyftpdlib  From the accept() man page:  EAGAIN or EWOULDBLOCK               The  socket  is  marked  nonblocking and no connections are present to be accepted.               POSIX.1-2001 allows either error to be returned for this case, and does not require               these  constants to have the same value, so a portable application should check for               both possibilities.  > The resulting address can be None, which means that the connection  > didn't take place.  The only way this can happen is if the accept() system call returned 0 in addrlen, which sounds rather strange. I'm not convinced hiding operating system bugs is a good idea. ``` | | | |
| [msg117358](#msg117358) - [(view)](msg117358) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-09-25 11:43 |
| ``` > I'm not convinced hiding operating system bugs is a good idea.  Do you propose to let the error raise then? The point of frameworks such as asyncore and twisted is to hide all system-specific errors as much as possible and provide a portable interface across all platforms. AFAICT, the whole point of this issue is that there should be only one way for an asyncore-based server to accept an incoming connection, possibly avoiding the user to deal with low-level details such as catching EWOULDBLOCK/ECONNABORTED/... in his application, and looking for accept() returning None is one possibility.  As I said, in a better designed framework the user shouldn't be supposed to call accept() at all, but that's how asyncore is designed. ``` | | | |
| [msg117359](#msg117359) - [(view)](msg117359) | Author: Antoine Pitrou (pitrou) \* (Python committer) | Date: 2010-09-25 11:56 |
| ``` > The point of frameworks such as asyncore and twisted is to hide all > system-specific errors as much as possible and provide a portable > interface across all platforms.  As long as these errors are reasonably explainable. If a strange error only occurs when running nmap on an OS X server, then it might be useful for the user to know that the OS X server isn't able to service all connections properly due to a bug in the operating system.  > AFAICT, the whole point of this issue is that there should be only one > way for an asyncore-based server to accept an incoming connection, > possibly avoiding the user to deal with low-level details such as > catching EWOULDBLOCK/ECONNABORTED/...  I am talking specifically about the address being None (i.e., a (sock, None) tuple is successfully returned). EWOULDBLOCK and ECONNABORTED are documented error conditions for accept(), but returning 0 in addrlen is not.  > As I said, in a better designed framework the user shouldn't be > supposed to call accept() at all, but that's how asyncore is designed.  Perhaps it's time to add an alternative handle_accepted(sock, addr) which relieves the user from calling accept() :)) Then, perhaps self.accept() shouldn't filter any errors at all, but the default handle_accept() would silence them before calling handle_accepted(). ``` | | | |
| [msg117360](#msg117360) - [(view)](msg117360) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-09-25 12:34 |
| ``` > As long as these errors are reasonably explainable. > If a strange error only occurs when running nmap on an OS X server,  > then it might be useful for the user to know that the OS X server  > isn't able to service all connections properly due to a bug in the  > operating system.  It might be useful to find whether this is tracked somewhere. For the record, here (comment #10) is a code which should reproduce this problem: [https://bugs.launchpad.net/zodb/+bug/135108](https://bugs.launchpad.net/zodb/%2Bbug/135108) As for what asyncore should in this case I think it should theoretically be safe for accept() to return (sock, None). What usually happen after that is that the socket object is passed to another dispatcher subclass (the handler) and the connection gets automatically closed once recv() or send() get called on the next async-loop.  > Perhaps it's time to add an alternative handle_accepted(sock, addr) > which relieves the user from calling accept() :))  This sounds like a very good idea for 3.2. As for 3.1 and 2.7 (2.6?) I think it can be useful to suppress EWOULDBLOCK/ECONNABORTED and return None instead. Considering accept() can *already* return None it wouldn't break backward compatibility. ``` | | | |
| [msg117873](#msg117873) - [(view)](msg117873) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-10-02 13:18 |
| ``` Patch in attachment adds a handled_accepted() method to dispatcher class as recommended by Antoine. ``` | | | |
| [msg117925](#msg117925) - [(view)](msg117925) | Author: Antoine Pitrou (pitrou) \* (Python committer) | Date: 2010-10-03 19:28 |
| ``` I'm not an asyncore expert, but I can't see anything wrong with the patch. ``` | | | |
| [msg117981](#msg117981) - [(view)](msg117981) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-10-04 21:09 |
| ``` Python 3.2 changes committed in [r85220](https://hg.python.org/lookup/r85220). Still have to commit EWOULDBLOCK/ECONNABORTED changes for 3.1 and 2.7. ``` | | | |
| [msg120003](#msg120003) - [(view)](msg120003) | Author: Arfrever Frehtes Taifersar Arahesis (Arfrever) \* (Python triager) | Date: 2010-10-30 16:44 |
| ``` CVE-2010-3492 references this issue. <http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-3492> ``` | | | |
| [msg120132](#msg120132) - [(view)](msg120132) | Author: Giampaolo Rodola' (giampaolo.rodola) \* (Python committer) | Date: 2010-11-01 15:19 |
| ``` Fixed in [r86084](https://hg.python.org/lookup/r86084) (2.7) and [r86085](https://hg.python.org/lookup/r86085) (3.1). ``` | | | |
| [msg123556](#msg123556) - [(view)](msg123556) | Author: Barry A. Warsaw (barry) \* (Python committer) | Date: 2010-12-07 15:22 |
| ``` I do not see this as a security bug so no patch for 2.6 please.  (Comment requested from IRC). ``` | | | |

| History | | | |
| --- | --- | --- | --- |
| Date | User | Action | Args |
| 2022-04-11 14:56:51 | admin | set | github: 50955 |
| 2010-12-07 15:22:09 | barry | set | nosy: + [barry](user19)messages: + <msg123556> |
| 2010-11-01 15:19:36 | giampaolo.rodola | set | status: open -> closedversions: + Python 3.1, Python 2.7type: behavior -> securitymessages: + <msg120132>resolution: fixedstage: patch review -> resolved |
| 2010-10-30 16:44:26 | Arfrever | set | messages: + <msg120003> |
| 2010-10-30 16:40:31 | Arfrever | set | nosy: + [Arfrever](user9138) |
| 2010-10-04 21:09:57 | giampaolo.rodola | set | messages: + <msg117981> |
| 2010-10-03 19:28:59 | pitrou | set | stage: needs patch -> patch reviewmessages: + <msg117925>versions: - Python 2.6, Python 3.1, Python 2.7 |
| 2010-10-02 13:18:23 | giampaolo.rodola | set | files: + [accept.patch](file19104)messages: + <msg117873> |
| 2010-09-25 12:34:54 | giampaolo.rodola | set | messages: + <msg117360> |
| 2010-09-25 11:56:47 | pitrou | set | messages: + <msg117359> |
| 2010-09-25 11:43:40 | giampaolo.rodola | set | messages: + <msg117358> |
| 2010-09-25 10:54:43 | pitrou | set | messages: + <msg117357> |
| 2010-09-25 10:37:46 | giampaolo.rodola | set | files: + [accept.patch](file19005)messages: + <msg117356>versions: + Python 2.6 |
| 2010-09-24 20:15:53 | giampaolo.rodola | set | files: + [accept.patch](file19001)nosy: + [pitrou](user2040)messages: + <msg117329>keywords: + [patch](keyword2) |
| 2010-09-23 22:11:47 | dmalcolm | set | nosy: + [dmalcolm](user11193)messages: + <msg117240> |
| 2010-09-13 19:32:25 | santoso.wijaya | set | nosy: + [santoso.wijaya](user12244) |
| 2010-09-13 14:05:13 | matejcik | set | nosy: + [matejcik](user3981) |
| 2010-08-03 21:51:24 | giampaolo.rodola | set | assignee: [giampaolo.rodola](user3080)messages: + <msg112699> |
| 2010-08-01 11:47:47 | BreamoreBoy | set | versions: + Python 3.1, Python 3.2nosy: + [BreamoreBoy](user12545)messages: + <msg112315>type: behaviorstage: needs patch |
| 2009-08-14 23:03:35 | giampaolo.rodola | create |  |

Supported by [The Python Software Foundation](https://python.org/psf-landing/ "The Python Software Foundation"),

Powered by [Roundup](http://roundup.sourceforge.net "Powered by the Roundup Issue Tracker")

Copyright © 1990-2022, [Python Software Foundation](http://python.org/psf)


