=== Content from issues.apache.org_bf74b416_20250124_160019.html ===


[Log in](/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-2925)[Skip to main content](#main)[Skip to sidebar](#sidebar)Linked ApplicationsLoadingâ€¦[![ASF JIRA](/jira/s/xd97tr/820010/13pdxe5/_/jira-logo-scaled.png)](https://issues.apache.org/jira/secure/MyJiraHome.jspa)

* [Dashboards](/jira/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/jira/browse/DERBY "View recent projects and browse a list of projects")
* [Issues](/jira/issues/ "Search for issues and view recent issues")

* [Help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Help")
  + [Jira Core help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Go to the online documentation for Jira Core")
  + [Keyboard Shortcuts](/jira/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [About Jira](/jira/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/jira/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-2925)

Public signup for this instance is **disabled**. Go to our [Self serve sign up page](https://selfserve.apache.org/jira-account.html) to request an account. Report potential security issues [privately](https://apache.org/security/#reporting-a-vulnerability)

![Uploaded image for project: 'Derby'](https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122)

1. [Derby](/jira/browse/DERBY)
2. [DERBY-2437 SYSCS\_EXPORT\_TABLE can be used to overwrite derby files](/jira/browse/DERBY-2437 "SYSCS_EXPORT_TABLE can be used to overwrite derby files")
3. [DERBY-2925](/jira/browse/DERBY-2925)

# Prevent export from overwriting existing files

[Log In](/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-2925 "Log In")Export

XMLWordPrintableJSON
#### Details

* **Type:**
  ![](/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype "Sub-task - The sub-task of the issue") Sub-task
* **Status:**
  Closed
* **Priority:**
  ![](/jira/images/icons/priorities/major.svg "Major - Major loss of function.") Major
* **Resolution:**
  Fixed
* **Affects Version/s:**
  10.1.2.1, 10.2.2.0, 10.3.1.4, 10.4.1.3
* **Fix Version/s:**
  [10.3.1.4](/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.3.1.4 "10.3.1.4 "), [10.4.1.3](/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.1.3 "10.4.1.3 "), [10.6.2.1](/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.6.2.1 "10.6.2.1 Derby 10.6.2.1 Release"), [10.7.1.1](/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.7.1.1 "10.7.1.1 First release on the 10.7 branch.")
* **Component/s:**
  [Tools](/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Tools "Tools ")
* **Labels:**
  None

* **Issue & fix info:**
  Release Note Needed
* **Bug behavior facts:**
  Security

#### Description

Export should not overwrite existing files, but rather insist that the user remove them before writing to the file. This will help prevent accidental or intentional corruption of the database with export. This may introduce a compatibility issue with export but because export is usually an attended utility and not typically invoked as part of an application, I think the risk is worth the additional security this will provide.

#### Attachments

#### Attachments

* Options
  + [Sort By Name](/jira/browse/DERBY-2925?attachmentSortBy=fileName#attachmentmodule "viewissue.subtasks.tab.show.all.name")
  + [Sort By Date](/jira/browse/DERBY-2925?attachmentSortBy=dateTime#attachmentmodule "Sort By Date")
  + [Ascending](/jira/browse/DERBY-2925?attachmentOrder=asc#attachmentmodule "Ascending")
  + [Descending](/jira/browse/DERBY-2925?attachmentOrder=desc#attachmentmodule "Descending")

1. [derby-2925-07-aa-fileUrl.diff](/jira/secure/attachment/12447701/derby-2925-07-aa-fileUrl.diff "Latest  22/Jun/10 14:02 - Richard N. Hillegas")22/Jun/10 14:025 kBRichard N. Hillegas
2. [DERBY-2925v0.diff](/jira/secure/attachment/12361803/DERBY-2925v0.diff "Latest  13/Jul/07 18:47 - Ramin Moazeni")13/Jul/07 18:476 kBRamin Moazeni
3. [DERBY-2925v0.stat](/jira/secure/attachment/12361804/DERBY-2925v0.stat "Latest  13/Jul/07 18:47 - Ramin Moazeni")13/Jul/07 18:470.3 kBRamin Moazeni
4. [DERBY-2925v1.diff](/jira/secure/attachment/12362225/DERBY-2925v1.diff "Latest  20/Jul/07 15:55 - Ramin Moazeni")20/Jul/07 15:5545 kBRamin Moazeni
5. [DERBY-2925v1.stat](/jira/secure/attachment/12362226/DERBY-2925v1.stat "Latest  20/Jul/07 15:55 - Ramin Moazeni")20/Jul/07 15:551.0 kBRamin Moazeni
6. [DERBY-2925v2.diff](/jira/secure/attachment/12362349/DERBY-2925v2.diff "Latest  23/Jul/07 16:06 - Ramin Moazeni")23/Jul/07 16:0657 kBRamin Moazeni
7. [DERBY-2925v2.stat](/jira/secure/attachment/12362350/DERBY-2925v2.stat "Latest  23/Jul/07 16:06 - Ramin Moazeni")23/Jul/07 16:061 kBRamin Moazeni
8. [DERBY-2925v3.diff](/jira/secure/attachment/12362450/DERBY-2925v3.diff "Latest  24/Jul/07 15:24 - Ramin Moazeni")24/Jul/07 15:2468 kBRamin Moazeni
9. [DERBY-2925v3.stat](/jira/secure/attachment/12362451/DERBY-2925v3.stat "Latest  24/Jul/07 15:24 - Ramin Moazeni")24/Jul/07 15:241 kBRamin Moazeni
10. [DERBY-2925v4.diff](/jira/secure/attachment/12362708/DERBY-2925v4.diff "Latest  27/Jul/07 22:45 - Ramin Moazeni")27/Jul/07 22:453 kBRamin Moazeni
11. [DERBY-2925v4.stat](/jira/secure/attachment/12362709/DERBY-2925v4.stat "Latest  27/Jul/07 22:45 - Ramin Moazeni")27/Jul/07 22:450.2 kBRamin Moazeni
12. [DERBY-2925v5.diff](/jira/secure/attachment/12362816/DERBY-2925v5.diff "Latest  30/Jul/07 21:52 - Ramin Moazeni")30/Jul/07 21:521 kBRamin Moazeni
13. [DERBY-2925v5.stat](/jira/secure/attachment/12362817/DERBY-2925v5.stat "Latest  30/Jul/07 21:52 - Ramin Moazeni")30/Jul/07 21:520.1 kBRamin Moazeni
14. [DERBY-2925v6.diff](/jira/secure/attachment/12362903/DERBY-2925v6.diff "Latest  31/Jul/07 18:19 - Ramin Moazeni")31/Jul/07 18:193 kBRamin Moazeni
15. [DERBY-2925v6.stat](/jira/secure/attachment/12362904/DERBY-2925v6.stat "Latest  31/Jul/07 18:19 - Ramin Moazeni")31/Jul/07 18:190.2 kBRamin Moazeni
16. [releaseNote.html](/jira/secure/attachment/12379029/releaseNote.html "Latest  01/Apr/08 13:33 - Richard N. Hillegas")01/Apr/08 13:335 kBRichard N. Hillegas
17. [releaseNotev0.html](/jira/secure/attachment/12362552/releaseNotev0.html "Latest  25/Jul/07 19:01 - Ramin Moazeni")25/Jul/07 19:015 kBRamin Moazeni
#### Issue Links

is related to

![Bug - A problem which impairs or prevents the functions of the product.](/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.")
[DERBY-2980](/jira/browse/DERBY-2980)
three test failed with 'java.security.AccessControlException

* ![Major - Major loss of function.](/jira/images/icons/priorities/major.svg "Major - Major loss of function.")
* Closed

relates to

![Improvement - An improvement or enhancement to an existing feature or task.](/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype "Improvement - An improvement or enhancement to an existing feature or task.")
[DERBY-4708](/jira/browse/DERBY-4708)
In the Administration Guide, clarify that you need to adjust file permissions in your security policy in order to prevent import/export from accessing sensitive files outside your Derby subsystem

* ![Major - Major loss of function.](/jira/images/icons/priorities/major.svg "Major - Major loss of function.")
* Closed

#### Activity

#### People

Assignee:

![moazeni](https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452)
Ramin Moazeni

Reporter:

![kmarsden](https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452)
Katherine Marsden

Votes:
0
Vote for this issue

Watchers:
2
Start watching this issue

#### Dates

Created:

12/Jul/07 01:16

Updated:

05/Nov/17 18:51

Resolved:

23/Jun/10 17:36

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/jira/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/jira/secure/CreateIssue%21default.jspa)

Powered by a free Atlassian [Jira](http://www.atlassian.com/software/jira) open source license for Apache Software Foundation. Try Jira - [bug tracking software](http://www.atlassian.com/software/jira) for *your* team.

[Atlassian](http://www.atlassian.com/)



=== Content from db.apache.org_3e594f45_20250124_160018.html ===


[apache](http://www.apache.org/) > [db](http://db.apache.org/)

[![Apache Derby](../images/derby-logo-web.png "Derby is a zero-admin Java RDBMS")](http://db.apache.org/derby)

[![Apache DB Project](../images/db-logo-white.png "Apache DB creates and maintains database solutions.")](http://db.apache.org)

* [Home](../index.html)
* [Quick Start](../quick_start.html)
* [Download](../derby_downloads.html)
* [Community](../derby_comm.html)
* [Documentation](../manuals/index.html)
* [Resources](../blogs/index.html)

Home
[Apache Derby](../index.html)

[Charter](../derby_charter.html)

[Derby License Info](../license.html)

[FAQs](../faq.html)

[Derby Wiki](https://cwiki.apache.org/confluence/display/DERBY/FrontPage)

[Apache DB Home](http://db.apache.org/)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

Quick Start
[Quick Start](../quick_start.html)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

Download
[Overview](../derby_downloads.html)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

Community
[Get Involved!](../derby_comm.html)

[Mailing Lists](../derby_mail.html)

[Source Code](../dev/derby_source.html)

[Bugs](../DerbyBugGuidelines.html)

[Tests](../derby_tests.html)

[Logo](../logo.html)

[Updating the web site](../papers/derby_web.html)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

Documentation
[Overview](../manuals/index.html)

[DITA Source](../manuals/dita.html)

[Writing Guidelines](../manuals/guidelines.html)

[Documenting Messages](../manuals/messages.html)

[Writing FAQs](../manuals/docsfaq.html)

[Release Checklist](../manuals/docscheck.html)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

Blogs and Articles About Derby
[Overview](../blogs/index.html)

[Blogs](../blogs/index.html#blogs)

Articles
Tutorials, Tips and Tuning
[Getting Started](../blogs/index.html#getstarted)

[Features, Hints and Tips](../blogs/index.html#features)

[Security](../blogs/index.html#security)

[Performance and Tuning](../blogs/index.html#performance)

Tools and Migration
[Tools](../blogs/index.html#tools)

[Migration](../blogs/index.html#migration)

Applications
[Client](../blogs/index.html#client)

[Middle Tier](../blogs/index.html#middletier)

[Persistence](../blogs/index.html#persistence)

[Scalability and Failover](../blogs/index.html#scalability)

Integration With Other Products
[Overview](../integrate/index.html)

[What works with Derby?](../integrate/index.html#uses)

[Product Writeups](../integrate/index.html#products)

Eclipse Plug-ins
[Info](../integrate/derby_plugin_info.html)

Papers and Presentations
[Overview](../papers/index.html)

Derby Engine
Javadoc
[Engine](http://db.apache.org/derby/javadoc/engine)

[Language](http://db.apache.org/derby/javadoc/language)

[Tools](http://db.apache.org/derby/javadoc/tools)

[API](http://db.apache.org/derby/javadoc/publishedapi)

[Architecture](../papers/derby_arch.html)

[BTree](../papers/btree_package.html)

[Disk Page Format](../papers/pageformats.html)

[How Things Work](../papers/derby_htw.html)

[Intersect & Except](../papers/Intersect-design.html)

[JDBC](../papers/JDBCImplementation.html)

[Log Format](../papers/logformats.html)

[Logging & Recovery](../papers/recovery.html)

[Optimizer](../papers/optimizer.html)

[Type System](http://db.apache.org/derby/javadoc/engine/org/apache/derby/iapi/types/package-summary.html#package_description)

[Versioning](../papers/versionupgrade.html)

Derby Network Client
[Functional Spec](../papers/DerbyClientSpec.html)

Derby Tutorial
[Overview](../papers/DerbyTut/index.html)

[Step 1: Install Software](../papers/DerbyTut/install_software.html)

[Step 2: ij Basics](../papers/DerbyTut/ij_intro.html)

[Step 3: Embedded Derby](../papers/DerbyTut/embedded_intro.html)

[Step 4: Derby Network Server](../papers/DerbyTut/ns_intro.html)

Presentations
[ApacheCon](../papers/ApacheCon.html)

[Victorian JUG 2008](../papers/MiscPresentations.html#Victorian+Java+User+Group)

[OSCON 2005](../papers/MiscPresentations.html#OSCON+2005)

[Colorado 2004](../papers/MiscPresentations.html#Colorado+Software+Summit+2004)

The Apache Software Foundation
[License](http://www.apache.org/licenses/)

[Donate](http://www.apache.org/foundation/sponsorship.html)

[Thanks](http://www.apache.org/foundation/thanks.html)

[Security](http://www.apache.org/security/)

[ASF Home](http://www.apache.org/)

---

![](../skin/images/rc-b-l-15-1body-2menu-3menu.png)

Font size:

# Apache Derby 10.6.2.1 Release

* [Distributions](#Distributions)
* [Release Notes for Derby 10.6.2.1](#Release Notes for Derby 10.6.2.1)
  + [Overview](#Overview)
  + [New Features](#New+Features)
  + [Bug Fixes](#Bug+Fixes)
  + [Issues](#Issues)
    - [Note for DERBY-4677](#Note+for+DERBY-4677)
    - [Note for DERBY-2925](#Note+for+DERBY-2925)
  + [Build Environment](#Build+Environment)
  + [Verifying releases](#Verifying+releases)

## Distributions

Use the links below to download a distribution of Apache Derby. You should **always** [verify the integrity](#Verifying+releases) of distribution files downloaded from a mirror.

There are four different distributions:

* bin distribution - contains the documentation, javadoc, and jar files for Derby.
* lib distribution - contains only the jar files for Derby.
* lib-debug distribution - contains jar files for Derby with source line numbers.
* src distribution - contains the Derby source tree at the point which the binaries were built.

[db-derby-10.6.2.1-bin.zip](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-bin.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-bin.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-bin.zip.md5)]

[db-derby-10.6.2.1-bin.tar.gz](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-bin.tar.gz) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-bin.tar.gz.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-bin.tar.gz.md5)]

[db-derby-10.6.2.1-lib.zip](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib.zip.md5)]

[db-derby-10.6.2.1-lib.tar.gz](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib.tar.gz) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib.tar.gz.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib.tar.gz.md5)]

[db-derby-10.6.2.1-lib-debug.zip](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib-debug.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib-debug.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib-debug.zip.md5)]

[db-derby-10.6.2.1-lib-debug.tar.gz](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib-debug.tar.gz) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib-debug.tar.gz.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-lib-debug.tar.gz.md5)]

[db-derby-10.6.2.1-src.zip](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-src.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-src.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-src.zip.md5)]

[db-derby-10.6.2.1-src.tar.gz](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-src.tar.gz) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-src.tar.gz.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/db-derby-10.6.2.1-src.tar.gz.md5)] (Note that, due to long filenames, you will need gnu tar to unravel this tarball.)

There are two separate Eclipse plugins for Derby:

* derby\_core\_plugin - provides the Derby jar files to other plugins in Eclipse.
* derby\_ui\_plugin - provides an Apache Derby Nature in Eclipse for easy database application development.

[derby\_core\_plugin\_10.6.2.999685.zip](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/derby_core_plugin_10.6.2.999685.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/derby_core_plugin_10.6.2.999685.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/derby_core_plugin_10.6.2.999685.zip.md5)]

[derby\_ui\_doc\_plugin\_1.1.2.zip](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/derby_ui_doc_plugin_1.1.2.zip) [[PGP](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/derby_ui_doc_plugin_1.1.2.zip.asc)] [[MD5](http://archive.apache.org/dist/db/derby/db-derby-10.6.2.1/derby_ui_doc_plugin_1.1.2.zip.md5)]

Please note: both plugins must be installed for full functionality. For information on installing and using the Derby plugins for Eclipse, please see the [Using the 10 Core and 1.1 UI Derby plug-ins](http://db.apache.org/derby/integrate/plugin_howto.html) page.

## Release Notes for Derby 10.6.2.1

These notes describe the difference between Derby release 10.6.2.1 and the preceding release 10.6.1.0.

### Overview

Derby is a pure Java relational database engine using standard SQL and JDBC as its APIs.

Derby functionality includes:

* Embedded engine with JDBC drivers
* Network Server
* Network client JDBC drivers
* Command line tools: ij (SQL scripting), dblook (schema dump) and sysinfo (sy stem info)

### New Features

This is a bug fix release which also provides localizations of new 10.6 messages. No new features were added.

* **DERBY-4677** - This release addresses a data corruption issue. See Issues or [DERBY-4677](http://issues.apache.org/jira/browse/DERBY-4677) for unique index corruption detection and repair.

### Bug Fixes

The following issues are addressed by Derby release 10.6.2.1. These issues are not addressed in the preceding 10.6.1.0 release.

| **Issue Id** | **Description** |
| --- | --- |
| [DERBY-4798](https://issues.apache.org/jira/browse/DERBY-4798) | NPE in nested outer join |
| [DERBY-4770](https://issues.apache.org/jira/browse/DERBY-4770) | Files missing svn:eol-style (August 2010) |
| [DERBY-4748](https://issues.apache.org/jira/browse/DERBY-4748) | StringIndexOutOfBoundsException on syntax error (invalid COMMIT) |
| [DERBY-4747](https://issues.apache.org/jira/browse/DERBY-4747) | ttestSetPortPriority junit test failing in tinderbox runs with junit.framework.AssertionFailedError: Port 1537 exceeeds expected maximum. |
| [DERBY-4736](https://issues.apache.org/jira/browse/DERBY-4736) | ASSERT FAIL when code generating a column reference in a join predicate in presence of other outer join reordering |
| [DERBY-4731](https://issues.apache.org/jira/browse/DERBY-4731) | XA two phase commit with active GLOBAL TEMPORARY TABLE causes An internal error identified by RawStore module |
| [DERBY-4722](https://issues.apache.org/jira/browse/DERBY-4722) | Error in SQL example of SYSCS\_UTIL.SYSCS\_DISABLE\_LOG\_ARCHIVE\_MODE |
| [DERBY-4717](https://issues.apache.org/jira/browse/DERBY-4717) | Driver trace file isn't closed/released on physical connection close when specified with the traceFile attribute/setter |
| [DERBY-4715](https://issues.apache.org/jira/browse/DERBY-4715) | Write jvm information and path of derby.jar to derby.log |
| [DERBY-4712](https://issues.apache.org/jira/browse/DERBY-4712) | Complex nested joins problems |
| [DERBY-4706](https://issues.apache.org/jira/browse/DERBY-4706) | Remove stale and potentially unused code Request.writeEncryptedScalarStream |
| [DERBY-4700](https://issues.apache.org/jira/browse/DERBY-4700) | Add method to obtain a bogus port in TestConfiguration |
| [DERBY-4699](https://issues.apache.org/jira/browse/DERBY-4699) | Build breaks if a Java 6 JDK is detected when compiling with a Java 5 compiler |
| [DERBY-4698](https://issues.apache.org/jira/browse/DERBY-4698) | Simple query with HAVING clause crashes with NullPointerException |
| [DERBY-4694](https://issues.apache.org/jira/browse/DERBY-4694) | Build breaks on Mac OS X due to JDK classpath issues |
| [DERBY-4693](https://issues.apache.org/jira/browse/DERBY-4693) | column rename looses 'identity' attribute. |
| [DERBY-4686](https://issues.apache.org/jira/browse/DERBY-4686) | SQLBinary.writeBlob is inefficient, reading one byte at a time from the source BLOB |
| [DERBY-4682](https://issues.apache.org/jira/browse/DERBY-4682) | Inaccurate description of how a statement is completed in Developer's guide |
| [DERBY-4679](https://issues.apache.org/jira/browse/DERBY-4679) | Several left outer joins causes unstable query with incorrect results |
| [DERBY-4677](https://issues.apache.org/jira/browse/DERBY-4677) | SYSCS\_COMPRESS\_TABLE disables unique constraints |
| [DERBY-4676](https://issues.apache.org/jira/browse/DERBY-4676) | NullPointerException on SELECT on INNER JOIN |
| [DERBY-4671](https://issues.apache.org/jira/browse/DERBY-4671) | Embedded driver does not work with jbossCache |
| [DERBY-4666](https://issues.apache.org/jira/browse/DERBY-4666) | Localize 10.6.1 messages |
| [DERBY-4664](https://issues.apache.org/jira/browse/DERBY-4664) | Change Derby internal stored procedures to avoid DriverManager.getConnection(&quot;jdbc:default:connection&quot;) as it may be recognized by other Drivers |
| [DERBY-4661](https://issues.apache.org/jira/browse/DERBY-4661) | Reduce size of encoding buffer for short character values |
| [DERBY-4654](https://issues.apache.org/jira/browse/DERBY-4654) | Restriction.toSQL() doesn't escape special characters |
| [DERBY-4651](https://issues.apache.org/jira/browse/DERBY-4651) | Hidden assumptions in FromVTI.makeRestriction() |
| [DERBY-4638](https://issues.apache.org/jira/browse/DERBY-4638) | Expose names of top-level test suites for easier scripting |
| [DERBY-4632](https://issues.apache.org/jira/browse/DERBY-4632) | Delete Maven1 build files |
| [DERBY-4610](https://issues.apache.org/jira/browse/DERBY-4610) | Error attempting delete with cascade and triggers |
| [DERBY-4597](https://issues.apache.org/jira/browse/DERBY-4597) | remove references to IBM jcc driver from sysinfo |
| [DERBY-4582](https://issues.apache.org/jira/browse/DERBY-4582) | Timestamps inserted with GMT calendar are 1 hour later when subsequently read with GMT calendar (Server Mode Only). |
| [DERBY-4548](https://issues.apache.org/jira/browse/DERBY-4548) | would like an alternative location for ant.properties |
| [DERBY-4471](https://issues.apache.org/jira/browse/DERBY-4471) | Left outer join reassociation rewrite gives wrong result |
| [DERBY-4211](https://issues.apache.org/jira/browse/DERBY-4211) | 'derbyall/encryptionAll/storemats.fail:store/updatelocksJDBC30.sql' fails with unexpected locks |
| [DERBY-4179](https://issues.apache.org/jira/browse/DERBY-4179) | bootLock.java fails with missing exception on z/OS with pmz3160sr2ifix-20081021\_01(SR2+IZ32776+IZ33456), and Windows Vista |
| [DERBY-3856](https://issues.apache.org/jira/browse/DERBY-3856) | difference between Embedded vs DerbyNetClient in format of return from timestamp(cast(? as varchar(32))) |
| [DERBY-2925](https://issues.apache.org/jira/browse/DERBY-2925) | Prevent export from overwriting existing files |
| [DERBY-2532](https://issues.apache.org/jira/browse/DERBY-2532) | Client does not return SQLException on XAConnection.getXAResource() on a closed connection, Embedded does |
| [DERBY-2026](https://issues.apache.org/jira/browse/DERBY-2026) | Setting a login timeout in client driver can lead to query timeout |
| [DERBY-1595](https://issues.apache.org/jira/browse/DERBY-1595) | Network server fails with DRDAProtocolException if a BLOB with size 2147483647 is streamed from client |

### Issues

Compared with the previous release (10.6.1.0), Derby release 10.6.2.1 introduces the following new features and incompatibilities. These merit your special attention.

* Note for DERBY-4677: Unique nullable constraint may be disabled after compress or import operations on the table.
* Note for DERBY-2925: Prevent export from overwriting existing files

---

#### Note for DERBY-4677

##### Summary of Change

Unique nullable constraint may be disabled after compress or import operations on the table.

##### Symptoms Seen by Applications Affected by Change

Prior to DERBY-4677 fix, the unique nullable constraint might have been disabled or violated after calls to SYSCS\_UTIL.SYSCS\_COMPRESS\_TABLE, or SYSCS\_UTIL.SYSCS\_IMPORT\_TABLE. While the DERBY-4677 fix corrects the problem for new indexes, it does not automatically repair damage to existing indexes. Applications using unique nullable indexes, (first allowed in version 10.4.2.1) may find that duplicate rows exist, despite the table being created with the unique constraint. In addition to the obvious problem of this being allowed, users may also see incorrect query results where one row is returned even though there are multiple qualifying rows.

##### Rationale for Change

The change fixed a serious bug that allowed duplicate rows despite a unique index. Users should upgrade and manually resolve prior damage as described below.

##### Application Changes Required

Users using unique nullable indexes (Derby 10.4 and higher) should upgrade immediately to a Derby version that contains the fix for DERBY-4677 AND drop and recreate those indexes. The fix was made in the following revisions.

* 10.4.2.1 (build 956034)
* 10.5.3.1 (build 955487)
* 10.6.1.1 (build 955790)

```

  The fix will not take care of duplicate rows that may have already made their way into the database. Such duplicate rows will
  have to be handled by the user manually. The steps to take would be to drop and recreate unique nullable indexes. During
  recreation, user might run into duplicate rows SQL exception. Such duplicate rows will have to be manually handled appropriately
  by the user.

```

---

#### Note for DERBY-2925

```

```
##### Summary of Change

```

Prevent export from overwriting existing files.

```
##### Symptoms Seen by Applications Affected by Change

```

Due to security concerns, and to avoid accidental file damage, Export processing
will not overwrite existing files. As a result, applications may observe some behavioral changes with respect to Export operations.

```
```

```
##### Incompatibilities with Previous Release

* SYSCS\_UTIL.SYSCS\_EXPORT\_TABLE: Exports of all the data from a table to an existing file is no longer possible and the user/application must remove the existing file, otherwise ERROR XIE0S will be returned.
* SYSCS\_UTIL.SYSCS\_EXPORT\_QUERY: Exports of all the data returned from the SELECT statement to an existing file is no longer possible and the user/application must remove the existing file, otherwise ERROR XIE0S will be returned.
* SYSCS\_UTIL.SYSCS\_EXPORT\_QUERY\_LOBS\_TO\_EXTFILE: Export of the result of a SELECT statement to a main data output file, and the LOB data into a large object auxiliary file to an existing file is no longer possible and the user/application must remove the existing data file and/or large object auxiliary file, otherwise ERROR XIE0S will be returned if the data file exists or ERROR XIE0T will be returned if the large object auxiliary file exists.

```

```
##### Rationale for Change

```

Due to security concerns and to avoid accidental file damage, Export processing will no longer overwrite an existing file.

```
##### Application Changes Required

```

The application needs to specify a different filename which does not exists or delete the existing file before performing the Export operation.

```
### Build Environment

```

Derby release 10.6.2.1 was built using the following environment:

```

* **Branch** - Source code came from the 10.6 branch.
* **Machine** - Git(Msysgit) on Microsoft Windows 7 Ultimate 2009 64 bits
* **Ant** - Apache Ant version 1.7.1 compiled on June 27 2008
* **JDK 1.4** - java version "1.4.2\_19" Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2\_19-b04) Java HotSpot(TM) Client VM (build 1.4.2\_19-b04, mixed mode)
* **Java 6** - java version "1.6.0\_13" Java(TM) SE Runtime Environment (build 1.6.0\_13-b03) Java HotSpot(TM) Client VM (build 11.3-b02, mixed mode)
* **Compiler** - Sun 1.6.0\_13\_b03

### Verifying releases

It is essential that you verify the integrity of the downloaded files using the PGP and MD5 signatures. MD5 verification ensures the file was not corrupted during the download process. PGP verification ensures that the file came from a certain person.

The PGP signatures can be verified using [PGP](http://www.pgpi.org/) or [GPG](http://www.gnupg.org/). First download the Apache Derby [KEYS](http://archive.apache.org/dist/db/derby/KEYS) as well as the asc signature file for the particular distribution. It is important that you get these files from the ultimate trusted source - the main ASF distribution site, rather than from a mirror. Then verify the signatures using ...

```
% pgpk -a KEYS
% pgpv db-derby-X.Y.tar.gz.asc

or

% pgp -ka KEYS
% pgp db-derby-X.Y.tar.gz.asc

or

% gpg --import KEYS
% gpg --verify db-derby-X.Y.tar.gz.asc

```

To verify the MD5 signature on the files, you need to use a program called md5 or md5sum, which is included in many unix distributions. It is also available as part of [GNU Textutils](http://www.gnu.org/software/textutils/textutils.html). Windows users can get binary md5 programs from [here](http://www.fourmilab.ch/md5/), [here](http://www.pc-tools.net/win32/freeware/console/), or [here](http://www.slavasoft.com/fsum/).

We strongly recommend you verify your downloads with both PGP and MD5.

Copyright Â©
2004-2023 Apache, Apache DB, Apache Derby, Apache Torque, Apache JDO, Apache DDLUtils, the Derby hat logo, the Apache JDO logo, and the Apache feather logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
Send feedback about the website to:
derby-user@db.apache.org


