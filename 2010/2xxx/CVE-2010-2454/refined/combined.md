=== Content from bugzilla.mozilla.org_b1cf6468_20250126_001121.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/556957)
* [XML](/show_bug.cgi?ctype=xml&id=556957)

Closed
[Bug 556957](/show_bug.cgi?id=556957)
(CVE-2010-1206)

Opened 15 years ago
Closed 15 years ago

# Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()

## Categories

### (Firefox :: Security, defect)

[Product:](/describecomponents.cgi?product=Firefox)

Firefox
▾

Firefox
For bugs in Firefox Desktop, the Mozilla Foundation's web browser. For Firefox user interface issues in menus, bookmarks, location bar, and preferences. Many Firefox bugs will either be filed here or in the [Core](https://bugzilla.mozilla.org/describecomponents.cgi?product=Core) product. Bugs for developer tools (F12) should be filed in the [DevTools](https://bugzilla.mozilla.org/describecomponents.cgi?product=DevTools) product. ([more info](https://wiki.mozilla.org/Modules/All#Firefox))
[See Open Bugs in This Product](/buglist.cgi?product=Firefox&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Firefox)
Watch This Product

[Component:](/describecomponents.cgi?product=Firefox&component=Security#Security)

Security
▾

Firefox :: Security
For app-level security bugs.

If the problem relates to underlying components (PSM, NSS, Core, Toolkit) then please file it in the appropriate product instead of here.

[See Open Bugs in This Component](/buglist.cgi?product=Firefox&component=Security&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Firefox&component=Security&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Firefox&component=Security)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

3.6 Branch

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

Firefox 3.7a5

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| status1.9.2 | --- | [.7-fixed](/buglist.cgi?f1=cf_status_192&o1=equals&v1=.7-fixed) |
| status1.9.1 | --- | [.11-fixed](/buglist.cgi?f1=cf_status_191&o1=equals&v1=.11-fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| status1.9.2 |  | .7-fixed |
| relnote-firefox |  | --- |
| status1.9.1 |  | .11-fixed |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: lcamtuf, Assigned: Gavin)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/08de945228403cb0598d5906e2407a7d?d=mm&size=40)  [Gavin](/user_profile?user_id=103593)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/2ffdf44e5f0f5d0391e4631d41e3c956?d=mm&size=40)  [lcamtuf](/user_profile?user_id=253619)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/fe2c2192f4fabf01f2d2e700631bb8fe?d=mm&size=40)  [manuel](/user_profile?user_id=688976)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

12 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[579907](/show_bug.cgi?id=579907 "RESOLVED FIXED - SeaMonkey 2.0.5 Address Bar Spoofing Vulnerability")

Dependency [tree](/showdependencytree.cgi?id=556957&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=556957)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: testcase, verified1.9.1, verified1.9.2, Whiteboard: [sg:moderate spoof])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2010-1206

[Keywords:](/describekeywords.cgi)

[testcase](/buglist.cgi?keywords=testcase&resolution=---),
[verified1.9.1](/buglist.cgi?keywords=verified1.9.1&resolution=---),
[verified1.9.2](/buglist.cgi?keywords=verified1.9.2&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[sg:moderate spoof]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | blocking-fx-sync1.7 | ? |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 5 obsolete files)

| [testcase](/attachment.cgi?id=436906)  [15 years ago](#c6)  [Dão Gottwald [:dao]](/user_profile?user_id=219124)   311 bytes, text/html |  | [Details](/attachment.cgi?id=436906&action=edit) |
| --- | --- | --- |
| [potential patch](/attachment.cgi?id=437110)  [15 years ago](#c8)  [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)   1.17 KB, patch |  | [Details](/attachment.cgi?id=437110&action=edit) | [Diff](/attachment.cgi?id=437110&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=437110) |
| [patch #2](/attachment.cgi?id=437176)  [15 years ago](#c13)  [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)   1015 bytes, patch | dao : [review-](#c23 "15 years ago") | [Details](/attachment.cgi?id=437176&action=edit) | [Diff](/attachment.cgi?id=437176&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=437176) |
| [patch v3](/attachment.cgi?id=438475)  [15 years ago](#c24)  [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)   1.82 KB, patch | dao : [review-](#c28 "15 years ago") | [Details](/attachment.cgi?id=438475&action=edit) | [Diff](/attachment.cgi?id=438475&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=438475) |
| [patch, v4](/attachment.cgi?id=441581)  [15 years ago](#c31)  [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)   1.16 KB, patch | dao : [review+](#a2279062_219124 "15 years ago")  dveditz : [approval1.9.2.7+](#c0 "15 years ago")  dveditz : [approval1.9.1.11+](#c42 "15 years ago") | [Details](/attachment.cgi?id=441581&action=edit) | [Diff](/attachment.cgi?id=441581&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=441581) |
| [patch?](/attachment.cgi?id=441823)  [15 years ago](#c33)  [Dão Gottwald [:dao]](/user_profile?user_id=219124)   8.69 KB, patch |  | [Details](/attachment.cgi?id=441823&action=edit) | [Diff](/attachment.cgi?id=441823&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=441823) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=556957#c0)• 15 years ago |
|  | |

Hi folks,
A considerable number of large sites on the Internet have at least one write-only location that responds with HTTP 204 ("No content") when queried directly.
Unfortunately, Firefox seems to handle 204 responses in a weird way, in some cases displaying the new URL in the URL bar, but keeping the old document in place. Specifically, consider this example:
-- snip! --
<html>
<input type=submit value="Click me now" onclick="clicked()">
<script>
var w;
function clicked() {
w = window.open("<https://www.google.com/csi>","\_blank");
setTimeout('w.document.body.innerHTML = "I am not <https://www.google.com> at all!"', 500);
}
</script>
-- snip! --
This, obviously, looks pretty bad.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=556957#c1)• 15 years ago |
|  | |

Yeah, the thing Firefox does with sticking the url in the url field before the document has actually loaded in the window.open case needs to also clear the url if the document load returns 204....

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=556957#c2)• 15 years ago |
|  | |

Now that you mention it - this also works, sans 204:
<html>
<input type=submit value="Click here to claim your prize!" onclick="clicked()">
<script>
var w;
function clicked() {
w = window.open("<http://1.2.3.4/>","\_blank");
setTimeout('w.document.body.innerHTML = "I am not 1.2.3.4 at all!";w.stop();', 500);
}
</script>
Even without the ability to call stop(), the opener could probably just navigate the window at regular intervals, slightly shorter than actual network rtt for the target site. The whole thing should probably be redesigned.

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a51165_253619)• 15 years ago |

Summary: Address bar spoofing possible with HTTP 204 responses → Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()Version: 3.5 Branch → 3.6 Branch

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=556957#c3)• 15 years ago |
|  | |

Wild guess: seems like maybe we should just skip the "pretend the user typed this" part of addTab when called via nsBrowserAccess's loadOneTab.

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=556957#c4)• 15 years ago |
|  | |

Just as a side note, the PoCs above only work if you have "open new windows in a tab instead" unchecked. But it can be easily tweaked by adding a third parameter to window.open():
"toolbar=1,menubar=1"

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=556957#c5)• 15 years ago |
|  | |

Oh, well then [comment 3](/show_bug.cgi?id=556957#c3 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()") can be ignored!

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=556957#c6)• 15 years ago |
|  | |

Attached file
[testcase](attachment.cgi?id=436906) (obsolete)
— [Details](attachment.cgi?id=436906&action=edit)

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a102276_219124)• 15 years ago |

Keywords: [testcase](/buglist.cgi?keywords=testcase&resolution=---)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=556957#c7)• 15 years ago |
|  | |

I'm pretty sure the user wants the address bar to show the "page to be loaded" as long as "nothing" is currently loaded. That way you know what the heck is going on with that window/tab....

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=556957#c8)• 15 years ago |
|  | |

Attached patch

[potential patch](attachment.cgi?id=437110&action=diff) (obsolete)
— [Details](attachment.cgi?id=437110&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=437110)

This fixes the testcase. I haven't considered all of the potential side effects of doing this.Assignee: nobody → gavin.sharpStatus: NEW → ASSIGNED

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=556957#c9)• 15 years ago |
|  | |

Would it fix the test case without w.stop()? A spinning throbber is a pretty weak indicator of foul play, and it could probably be kept in this state indefinitely even against a responsive target, simply by retrying navigation in a loop.Status: ASSIGNED → NEW

|  | [Jesse Ruderman](/user_profile?user_id=11608) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a240015_11608)• 15 years ago |

Whiteboard: [sg:moderate spoof]

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=556957#c10)• 15 years ago |
|  | |

It doesn't fix the testcase without the stop().
Other browsers seem to handle that case differently:
- Chrome seems to just show about:blank until the load fails
- Opera behaves the same way we do
- Safari seems to somehow block the document.write, so the URL bar shows 1.2.3.4 but there's no spoofing (it also opens in a new tab)

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=556957#c11)• 15 years ago |
|  | |

(In reply to [comment #10](/show_bug.cgi?id=556957#c10 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> - Chrome seems to just show about:blank until the load fails
The document.write also doesn't appear.
I'm not exactly sure how to check for JS exceptions with Safari/Chrome, so I don't know why the document.write is failing to have an effect.

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=556957#c12)• 15 years ago |
|  | |

In Chrome it fails because w.document.body is undefined for about:blank; if you change it to w.document.firstChild.innerHTML, it works OK (but the URL bar does not show the destination address).
Safari is vulnerable, I reported this to them as well.

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=556957#c13)• 15 years ago |
|  | |

Attached patch

[patch #2](attachment.cgi?id=437176&action=diff) (obsolete)
— [Details](attachment.cgi?id=437176&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=437176)

Maybe we should just do this, then. This doesn't regress the Ctrl+Click case, since that goes through contentAreaClick->loadOneTab which hits the "pretend" case I mentioned in [comment 3](/show_bug.cgi?id=556957#c3 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()").
[Attachment #437110](/attachment.cgi?id=437110&action=edit "potential patch") -
Attachment is obsolete: true

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a246352_103593)• 15 years ago |

[Attachment #437176](/attachment.cgi?id=437176&action=edit "patch #2") -
Attachment is patch: true
[Attachment #437176](/attachment.cgi?id=437176&action=edit "patch #2") -
Attachment mime type: application/octet-stream → text/plain

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=556957#c14)• 15 years ago |
|  | |

Hmm, this code was added in [bug 254714](/show_bug.cgi?id=254714 "VERIFIED FIXED - while loading a page, on a new tab/window, the location bar does not display the address URL"). The addTab "pretend" code has been there since well before that ([bug 231393](/show_bug.cgi?id=231393 "RESOLVED WORKSFORME - Tab URL does not persist on bad links if tabs switched")), so I'm not sure why (or whether) it was necessary.

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a394336_103593)• 15 years ago |

[Attachment #437176](/attachment.cgi?id=437176&action=edit "patch #2") -
Flags: review?(dao)

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=556957#c15)• 15 years ago |
|  | |

Comment on [attachment 437176](/attachment.cgi?id=437176 "patch #2") [[details]](/attachment.cgi?id=437176&action=edit "patch #2") [[diff]](/attachment.cgi?id=437176&action=diff "patch #2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=437176)
patch #2
This regresses [bug 254714](/show_bug.cgi?id=254714 "VERIFIED FIXED - while loading a page, on a new tab/window, the location bar does not display the address URL") / goes against [comment 7](/show_bug.cgi?id=556957#c7 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"), right?

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=556957#c16)• 15 years ago |
|  | |

I wasn't able to find a scenario where loading a new page didn't show the URL in the URL bar while it was loading, but maybe I'm missing something.
One example I tested was Ctrl+Shift+clicking the link on data:text/html,<a href="<http://gavinsharp.com/os/slow.php?time=10&url=http://gavinsharp.com>">a</a>.

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=556957#c17)• 15 years ago |
|  | |

(And my reasoning for why that case isn't regressed is in [comment 13](/show_bug.cgi?id=556957#c13 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()")/[comment 14](/show_bug.cgi?id=556957#c14 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=556957#c18)• 15 years ago |
|  | |

I might be misreading this, but if we want to keep ctrl-click / shift-click behavior the same, and just affect window.open() pop-ups, what's stopping the attacker from doing this instead?
-- snip! --
<a href="<http://1.2.3.4/>" target="foo" onclick="setTimeout('pwned()',1000)">click me</a>
<script>
function pwned() {
var t = window.open('','foo');
t.document.body.innerHTML = 'Hello world!';
t.stop();
}
</script>
-- snip! --

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=556957#c19)• 15 years ago |
|  | |

(In reply to [comment #16](/show_bug.cgi?id=556957#c16 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> I wasn't able to find a scenario where loading a new page didn't show the URL
> in the URL bar while it was loading, but maybe I'm missing something.
>
> One example I tested was Ctrl+Shift+clicking the link on data:text/html,<a
> href="<http://gavinsharp.com/os/slow.php?time=10&url=http://gavinsharp.com>">a</a>.
What does <http://gavinsharp.com/os/slow.php> exactly do?
[Bug 231393](/show_bug.cgi?id=231393 "RESOLVED WORKSFORME - Tab URL does not persist on bad links if tabs switched") just set userTypedValue, but the code you're removing actually displays it before onLocationChange is invoked.

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=556957#c20)• 15 years ago |
|  | |

slow.php is just a php script that sleep()s before returning a Location: header.

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=556957#c21)• 15 years ago |
|  | |

I hit [bug 254714](/show_bug.cgi?id=254714 "VERIFIED FIXED - while loading a page, on a new tab/window, the location bar does not display the address URL") when opening your test URL from an external app (e.g. bugmail in Thunderbird).

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=556957#c22)• 15 years ago |
|  | |

Sooooo is there any consensus on how to fix?:p

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=556957#c23)• 15 years ago |
|  | |

Comment on [attachment 437176](/attachment.cgi?id=437176 "patch #2") [[details]](/attachment.cgi?id=437176&action=edit "patch #2") [[diff]](/attachment.cgi?id=437176&action=diff "patch #2") [[review]](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=437176)
patch #2
I think [comment 21](/show_bug.cgi?id=556957#c21 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()") needs special treatment, maybe adding && !content.opener does the trick, maybe it can be taken care of entirely differently, or maybe we should take the first patch -- not sure if there was a real problem with that.
[Attachment #437176](/attachment.cgi?id=437176&action=edit "patch #2") -
Flags: review?(dao) → review-

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=556957#c24)• 15 years ago |
|  | |

Attached patch

[patch v3](attachment.cgi?id=438475&action=diff) (obsolete)
— [Details](attachment.cgi?id=438475&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=438475)

Maybe this is what we want. Still needs testing.
[Attachment #437176](/attachment.cgi?id=437176&action=edit "patch #2") -
Attachment is obsolete: true

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=556957#c25)• 15 years ago |
|  | |

Just a gentle ping.

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=556957#c26)• 15 years ago |
|  | |

Attached file
[testcase](attachment.cgi?id=440810)
— [Details](attachment.cgi?id=440810&action=edit)

This includes the three variants.
[Attachment #436906](/attachment.cgi?id=436906&action=edit "testcase") -
Attachment is obsolete: true

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=556957#c27)• 15 years ago |
|  | |

Comment on [attachment 438475](/attachment.cgi?id=438475 "patch v3") [[details]](/attachment.cgi?id=438475&action=edit "patch v3") [[diff]](/attachment.cgi?id=438475&action=diff "patch v3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=438475)
patch v3
This works. Scenarios tested:
- testcase here (3 cases) - URL doesn't appear while loading, gets reset on load failures
- Cmd+Shift+Click link to <http://gavinsharp.com/os/slow.php?time=50&url=http://nhl.com> - URL appears while loading
- Click <http://gavinsharp.com/os/slow.php?time=50&url=http://nhl.com> in external app - URL appears while loading
[Attachment #438475](/attachment.cgi?id=438475&action=edit "patch v3") -
Flags: review?(dao)

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=556957#c28)• 15 years ago |
|  | |

Comment on [attachment 438475](/attachment.cgi?id=438475 "patch v3") [[details]](/attachment.cgi?id=438475&action=edit "patch v3") [[diff]](/attachment.cgi?id=438475&action=diff "patch v3") [[review]](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=438475)
patch v3
> endDocumentLoad: function (aRequest, aStatus) {
> var urlStr = aRequest.QueryInterface(Ci.nsIChannel).originalURI.spec;
>
>- var notification = Components.isSuccessCode(aStatus) ? "EndDocumentLoad" : "FailDocumentLoad";
>+ var notification = "EndDocumentLoad";
>+ if (!Components.isSuccessCode(aStatus)) {
>+ notification = "FailDocumentLoad";
>+
>+ // The load failed, so the URL bar value set in startDocumentLoad
>+ // shouldn't persist - update it now.
>+ if (gURLBar)
>+ URLBarSetURI();
>+ }
This clears the location bar when executing `firefox <http://gavinsharp.com/os/slow.php?time=50>` and pressing Esc. We probably need to set userTypedValue, just like with Ctrl+click on content links.
[Attachment #438475](/attachment.cgi?id=438475&action=edit "patch v3") -
Flags: review?(dao) → review-

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=556957#c29)• 15 years ago |
|  | |

(In reply to [comment #28](/show_bug.cgi?id=556957#c28 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> This clears the location bar when executing `firefox
> <http://gavinsharp.com/os/slow.php?time=50>` and pressing Esc. We probably need
> to set userTypedValue, just like with Ctrl+click on content links.
The reason we don't do this currently is that we open the tab with about:blank rather than the real URI: <http://hg.mozilla.org/mozilla-central/annotate/2968d19b0165/browser/base/content/browser.js#l4487>
Looks like we should add a flags argument to loadOneTab and addTab.

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=556957#c30)• 15 years ago |
|  | |

(In reply to [comment #29](/show_bug.cgi?id=556957#c29 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> Looks like we should add a flags argument to loadOneTab and addTab.
This doesn't actually work, since loadOneTab starts the load before selecting the tab, so startDocumentLoad() doesn't get called, and nothing actually updates the URL bar.
I suppose we could just omit the endDocumentLoad hunk. It seemed logical to me that the URL bar should be reset in the failed load case, but I guess that's not actually the behavior we want at all, and not setting the URL bar in startDocumentLoad is sufficient to cover the cases in this bug, I think.

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=556957#c31)• 15 years ago |
|  | |

Attached patch

[patch, v4](attachment.cgi?id=441581&action=diff)
— [Details](attachment.cgi?id=441581&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=441581)

[Attachment #438475](/attachment.cgi?id=438475&action=edit "patch v3") -
Attachment is obsolete: true
[Attachment #441581](/attachment.cgi?id=441581&action=edit "patch, v4") -
Flags: review?(dao)

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a2044706_103593)• 15 years ago |

[Attachment #438475](/attachment.cgi?id=438475&action=edit "patch v3") -
Attachment description: patch → patch v3

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=556957#c32)• 15 years ago |
|  | |

(In reply to [comment #30](/show_bug.cgi?id=556957#c30 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> (In reply to [comment #29](/show_bug.cgi?id=556957#c29 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> > Looks like we should add a flags argument to loadOneTab and addTab.
>
> This doesn't actually work, since loadOneTab starts the load before selecting
> the tab, so startDocumentLoad() doesn't get called, and nothing actually
> updates the URL bar.
Selecting the tab should update the location bar, but we seem to clear userTypedValue before this happens.

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=556957#c33)• 15 years ago |
|  | |

Attached patch

[patch?](attachment.cgi?id=441823&action=diff) (obsolete)
— [Details](attachment.cgi?id=441823&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=441823)

This seems to work, but I really don't know what I'm doing in browser.xml. The userTypedClear stuff always scared me...

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=556957#c34)• 15 years ago |
|  | |

(In reply to [comment #33](/show_bug.cgi?id=556957#c33 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> Created an attachment (id=441823) [details]
> patch?
>
> This seems to work,
and it should fix this bug:
1. `firefox <http://gavinsharp.com/os/slow.php?time=50>`
2. switch to a different tab
3. switch back to the previous tab
Expected result: The location bar displays <http://gavinsharp.com/os/slow.php?time=50>
Actual result: It doesn't.

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=556957#c35)• 15 years ago |
|  | |

When do you guys plan to release the fix?
Certainly no rush, especially since it proved to be trickier than expected, but it would be good to be able to plan ahead.

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=556957#c36)• 15 years ago |
|  | |

Not before 3.6.5/3.5.11, which are likely at least a month away (assuming normal scheduling).

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=556957#c37)• 15 years ago |
|  | |

(In reply to [comment #33](/show_bug.cgi?id=556957#c33 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> userTypedClear stuff always scared me...
Indeed. Why is that change needed? The only use of userTypedClear I can see is in mTabProgressListener's onLocationChange, where a non-zero value allows the userTypedValue to be cleared, but I don't see how that could be a problem. Presumably if we've received an onLocationChange for the tab, clearing the userTypedValue shouldn't be a problem, since we'd fall back to the currentURI which should be correct. On the other hand, I don't really understand why we bother incrementing userTypedClear around calls to loadURI(), since I don't think it can have any relevant synchronous side effects.
Is there anything wrong with my patch? It seems much less risky...

|  | [neil@parkwaycc.co.uk](/user_profile?user_id=14006) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=556957#c38)• 15 years ago |
|  | |

(In reply to [comment #37](/show_bug.cgi?id=556957#c37 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> I don't really understand why we
> bother incrementing userTypedClear around calls to loadURI(), since I don't
> think it can have any relevant synchronous side effects.
See [bug 302575](/show_bug.cgi?id=302575 "VERIFIED FIXED - URL bar gets confused about what URI is loaded").

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=556957#c39)• 15 years ago |
|  | |

(In reply to [comment #37](/show_bug.cgi?id=556957#c37 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> Presumably if we've received an onLocationChange for the tab, clearing the
> userTypedValue shouldn't be a problem, since we'd fall back to the currentURI
> which should be correct.
Right, that's my understanding as well, but something else appears to be happening...
> Is there anything wrong with my patch? It seems much less risky...
It expands the workaround that seems to be there only because we don't set userTypedValue and handle it correctly when loading external URIs. That's ok as an interim solution and for the branches, but in the longer term I think we should dig a little deeper.

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=556957#c40)• 15 years ago |
|  | |

Comment on [attachment 441823](/attachment.cgi?id=441823 "patch?") [[details]](/attachment.cgi?id=441823&action=edit "patch?") [[diff]](/attachment.cgi?id=441823&action=diff "patch?") [[review]](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=441823)
patch?
filed [bug 562649](/show_bug.cgi?id=562649 "RESOLVED FIXED - set and correctly handle userTypedValue when loading external URIs")
[Attachment #441823](/attachment.cgi?id=441823&action=edit "patch?") -
Attachment is obsolete: true

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a2279062_219124)• 15 years ago |

[Attachment #441581](/attachment.cgi?id=441581&action=edit "patch, v4") -
Flags: review?(dao) → review+

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=556957#c41)• 15 years ago |
|  | |

<http://hg.mozilla.org/mozilla-central/rev/cadddabb1178>Status: NEW → RESOLVEDClosed: 15 years agoResolution: --- → FIXEDTarget Milestone: --- → Firefox 3.7a5

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a3555804_219124)• 15 years ago |

[Attachment #441581](/attachment.cgi?id=441581&action=edit "patch, v4") -
Flags: approval1.9.2.5?

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a3571901_219124)• 15 years ago |

[Attachment #441581](/attachment.cgi?id=441581&action=edit "patch, v4") -
Flags: approval1.9.1.11?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a6028526_1689)• 15 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- → [wanted](/buglist.cgi?f1=cf_status_191&o1=equals&v1=wanted)
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
--- → [wanted](/buglist.cgi?f1=cf_status_192&o1=equals&v1=wanted)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=556957#c42)• 15 years ago |
|  | |

Comment on [attachment 441581](/attachment.cgi?id=441581 "patch, v4") [[details]](/attachment.cgi?id=441581&action=edit "patch, v4") [[diff]](/attachment.cgi?id=441581&action=diff "patch, v4") [[review]](/page.cgi?id=splinter.html&ignore=&bug=556957&attachment=441581)
patch, v4
Approved for 1.9.2.6 and 1.9.1.11, a=dveditz for release-drivers
[Attachment #441581](/attachment.cgi?id=441581&action=edit "patch, v4") -
Flags: approval1.9.2.5?
[Attachment #441581](/attachment.cgi?id=441581&action=edit "patch, v4") -
Flags: approval1.9.2.5+
[Attachment #441581](/attachment.cgi?id=441581&action=edit "patch, v4") -
Flags: approval1.9.1.11?
[Attachment #441581](/attachment.cgi?id=441581&action=edit "patch, v4") -
Flags: approval1.9.1.11+

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a6052517_219124)• 15 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Dão Gottwald [:dao]](/user_profile?user_id=219124) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=556957#c43)• 15 years ago |
|  | |

<http://hg.mozilla.org/releases/mozilla-1.9.2/rev/a011dbe8896f>
[status1.9.2](/buglist.cgi?f1=cf_status_192&o1=isnotempty):
[wanted](/buglist.cgi?f1=cf_status_192&o1=equals&v1=wanted) → [.6-fixed](/buglist.cgi?f1=cf_status_192&o1=equals&v1=.6-fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a6619908_1689)• 15 years ago |

[Attachment #441581](/attachment.cgi?id=441581&action=edit "patch, v4") -
Flags: approval1.9.2.5+ → approval1.9.2.6+

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=556957#c44)• 15 years ago |
|  | |

This is not listed as fixed in 3.6.4?
<http://www.mozilla.org/security/known-vulnerabilities/firefox36.html#firefox3.6.4>

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=556957#c45)• 15 years ago |
|  | |

Oops, sorry. Looks like you targeted this for 3.6.5.

|  | [Michal Zalewski](/user_profile?user_id=253619)  Reporter |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=556957#c46)• 15 years ago |
|  | |

I unfortunately mixed this bug up with the focus() thing, fixed in 3.6.4, and posted this on my blog shortly after noticing that 3.6.4 is out:
<http://lcamtuf.blogspot.com/2010/06/yeah-about-that-address-bar-thing.html>
It's probably not feasible to pull it down at this point, as it got picked up by several sources, and the severity of this bug is not that high - but let me know if you disagree.
Again, sorry for the trouble :-( Not intended.

|  | [:Gavin Sharp [email: gavin@gavinsharp.com]](/user_profile?user_id=103593)  Assignee |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=556957#c47)• 15 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-1.9.1/rev/8c17cad9e838>
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
[wanted](/buglist.cgi?f1=cf_status_191&o1=equals&v1=wanted) → [.11-fixed](/buglist.cgi?f1=cf_status_191&o1=equals&v1=.11-fixed)Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=556957#c48)• 15 years ago |
|  | |

Assigned [CVE-2010-1206](https://www.cve.org/CVERecord?id=CVE-2010-1206) to this one.Alias: CVE-2010-1206

|  | [Reed Loden [:reed]](/user_profile?user_id=159758) |  |
| --- | --- | --- |
| [Comment 49](/show_bug.cgi?id=556957#c49)• 15 years ago |
|  | |

(In reply to [comment #45](/show_bug.cgi?id=556957#c45 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> Oops, sorry. Looks like you targeted this for 3.6.5.
Firefox 3.6.6, actually. We're skipping 3.6.5, as per <http://christian.legnitto.com/blog/2010/06/09/heads-up-the-next-firefox-platform-version-is-1-9-2-6-instead-of-1-9-2-5/>.
[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
[.11-fixed](/buglist.cgi?f1=cf_status_191&o1=equals&v1=.11-fixed) → ---

|  | [Reed Loden [:reed]](/user_profile?user_id=159758) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a6978421_159758)• 15 years ago |

[status1.9.1](/buglist.cgi?f1=cf_status_191&o1=isnotempty):
--- → [.11-fixed](/buglist.cgi?f1=cf_status_191&o1=equals&v1=.11-fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a6978455_1689)• 15 years ago |

Group: core-security

|  | [Yuhong Bao](/user_profile?user_id=250311) |  |
| --- | --- | --- |
| [Comment 50](/show_bug.cgi?id=556957#c50)• 15 years ago |
|  | |

(In reply to [comment #46](/show_bug.cgi?id=556957#c46 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> It's probably not feasible to pull it down at this point, as it got picked up
> by several sources, and the severity of this bug is not that high - but let me
> know if you disagree.
Yea, I posted this comment after it got onto slashdot:
<http://slashdot.org/comments.pl?sid=1694932&cid=32661632>

|  | [LegNeato](/user_profile?user_id=482154) |  |
| --- | --- | --- |
| [Comment 51](/show_bug.cgi?id=556957#c51)• 15 years ago |
|  | |

The plan is still to include this in 3.6.6. If we have to spin a quick build off the 3.6.4 relbranch, we'll include this fix as well. We don't intend to have to do a quick build of the relbranch though.

|  | [Reed Loden [:reed]](/user_profile?user_id=159758) |  |
| --- | --- | --- |
| [Comment 52](/show_bug.cgi?id=556957#c52)• 15 years ago |
|  | |

(In reply to [comment #51](/show_bug.cgi?id=556957#c51 "RESOLVED FIXED - Address bar spoofing possible via window.open() + HTTP 204 responses or window.stop()"))
> The plan is still to include this in 3.6.6. If we have to spin a quick build
> off the 3.6.4 relbranch, we'll include this fix as well. We don't intend to
> have to do a quick build of the relbranch though.
Due to the insertion of a Firefox 3.6.6 release schedule for this weekend to fix a stability issue with OOPP, this fix won't be included until Firefox 3.6.7, currently scheduled for July 20th (see <https://wiki.mozilla.org/Releases> for latest estimate).
Michal, can you update your blog post to say 3.6.7 instead? Thanks!

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 53](/show_bug.cgi?id=556957#c53)• 15 years ago |
|  | |

Verified for 1.9.1.11 using Gavin's testcases with Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.11) Gecko/20100701 Firefox/3.5.11 (.NET CLR 3.5.30729).
Verified for 1.9.2.7 with Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.7) Gecko/20100713 Firefox/3.6.7 (.NET CLR 3.5.30729).Keywords: [verified1.9.1](/buglist.cgi?keywords=verified1.9.1&resolution=---),
[verified1.9.2](/buglist.cgi?keywords=verified1.9.2&resolution=---)

|  | [Robert Kaiser](/user_profile?user_id=5189) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=556957#a9615726_5189)• 15 years ago |

Blocks: [579907](/show_bug.cgi?id=579907 "RESOLVED FIXED - SeaMonkey 2.0.5 Address Bar Spoofing Vulnerability")
You need to [log in](/show_bug.cgi?id=556957&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Dão Gottwald [:dao]](/user_profile?user_id=219124)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


