=== Content from bugs.squid-cache.org_2583e9a8_20250125_123454.html ===


Bugzilla – Bug 3021
Large DNS reply causes crash when no ipv6 resolver present
Last modified: 2010-12-28 17:54:43 UTC

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=3021&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=3021&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 3021**](show_bug.cgi?id=3021)
- Large DNS reply causes crash when no ipv6 resolver present

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
Large DNS reply causes crash when no ipv6 resolver present

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Squid | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Squid "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | other ([show other bugs](buglist.cgi?component=other&product=Squid&bug_status=__open__)) | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 3.1 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All All | |  | | | [Importance](page.cgi?id=fields.html#importance): | P2 blocker | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | SQUID BUGS ALIAS | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | |  | | | Duplicates (2): | [3009](show_bug.cgi?id=3009 "RESOLVED DUPLICATE - epoll fails") [3030](show_bug.cgi?id=3030 "RESOLVED DUPLICATE - hang up")  ([view as bug list](buglist.cgi?bug_id=3009,3030)) | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2010-08-18 22:20 UTC by Stephen Thorne | | --- | --- | | Modified: | 2010-12-28 17:54 UTC ([History](show_activity.cgi?id=3021)) | | CC List: | 4 users (show)  boynux hno huzaifas msoffice | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Browser:](page.cgi?id=fields.html#cf_browser "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Fixed Versions:](page.cgi?id=fields.html#cf_fixed "The particuar release versions in which this bug was fixed. See Target Milestone for the current fixed series.") |  | | [Needs:](page.cgi?id=fields.html#cf_needs "This bug requires more information to be provided for anyone to fix it.") |  | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [**Fix for dns issue.**](attachment.cgi?id=2243 "View the content of the attachment") (865 bytes, patch)  [2010-08-18 22:20 UTC](#attach_2243 "Go to the comment associated with the attachment"), Stephen Thorne | [Details](attachment.cgi?id=2243&action=edit) | | [Add an attachment](attachment.cgi?bugid=3021&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=3021&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=3021#c0)  Stephen Thorne    2010-08-18 22:20:22 UTC  ``` Created [attachment 2243](attachment.cgi?id=2243 "Fix for dns issue.") [[details]](attachment.cgi?id=2243&action=edit "Fix for dns issue.") Fix for dns issue.  This can be replicated on squid 3.1.6，using the domain name <http://big.nbgold.net/> (this domain is just something I threw in our DNS config to test, it doesn't go anywhere useful, and responds with >512 bytes of data).  Assertion is: 2010/08/19 13:57:22.013| assertion failed: comm_epoll.cc:142: "fd >= 0"  dns_internal.cc will get a TC flag from the server because the response would be >512, and will try to query over TCP instead of UDP. Squid starts the TCP connection, and then erroneously thinks that it is sending an ipv6 dns query, and will fall over.  This is the backtrace:  #0  0x009ea206 in raise () from /lib/libc.so.6 #1  0x009ebbd1 in abort () from /lib/libc.so.6 #2  0x001824bc in xassert (msg=0x2df6ff "fd >= 0", file=0x2dc676 "comm_epoll.cc", line=142) at debug.cc:556 #3  0x00180123 in commSetSelect (fd=-1, type=1, handler=0x1949b0 <idnsRead>, client_data=0x0, timeout=0) at comm_epoll.cc:142 #4  0x001924bf in idnsSendQuery (q=0x9d96820) at dns_internal.cc:837 #5  0x001936bf in idnsGrokReply (buf=0x376b00 "D-\203\200", sz=512) at dns_internal.cc:981 #6  0x00194bac in idnsRead (fd=7, data=0x0) at dns_internal.cc:1187 #7  0x00180344 in comm_select (msec=290) at comm_epoll.cc:307 #8  0x002500ed in CommSelectEngine::checkEvents (this=0xbfdbfe64, timeout=290) at comm.cc:2686 #9  0x0019ae02 in EventLoop::checkEngine (this=0xbfdbfe30, engine=0xbfdbfe64, primary=true) at EventLoop.cc:50 #10 0x0019af9c in EventLoop::runOnce (this=0xbfdbfe30) at EventLoop.cc:124 #11 0x0019b0aa in EventLoop::run (this=0xbfdbfe30) at EventLoop.cc:94 #12 0x001ee711 in SquidMain (argc=3, argv=0xbfdbff44) at main.cc:1407 #13 0x001eee55 in main (argc=1717532517, argv=0x656c69) at main.cc:1163  in #4  0x001924bf in idnsSendQuery (q=0x9d96820) at dns_internal.cc:837, y = 0, x = 0, DnsSocketB = -1.  This patch seems to fix the problem, we are testing it internally here: ```  [Comment 1](show_bug.cgi?id=3021#c1)  Amos Jeffries    2010-08-18 23:05:34 UTC  ``` Patch looks right. Thank you. This one is quite serious. How fast can this be confirmed not to introduce any other problems? ```  [Comment 2](show_bug.cgi?id=3021#c2)  Stephen Thorne    2010-08-18 23:12:46 UTC  ``` Its passed our tests so far, will be putting it on a major site overnight, so 24 hours or so and I'll be confident that it doesn't cause other problems.  May also be the cause of 3009, I've made a note there. ```  [Comment 3](show_bug.cgi?id=3021#c3)  Stephen Thorne    2010-08-19 21:58:23 UTC  ``` I haven't seen any problems since applying this patch, I reckon it's good to go. ```  [Comment 4](show_bug.cgi?id=3021#c4)  Amos Jeffries    2010-08-22 19:17:32 UTC  ``` Thanks applied. ```  [Comment 5](show_bug.cgi?id=3021#c5)  Stephen Thorne    2010-08-23 00:59:57 UTC  ``` *** [Bug 3009](show_bug.cgi?id=3009 "RESOLVED DUPLICATE - epoll fails") has been marked as a duplicate of this bug. *** ```  [Comment 6](show_bug.cgi?id=3021#c6)  Amos Jeffries    2010-08-29 01:43:42 UTC  ``` *** [Bug 3030](show_bug.cgi?id=3030 "RESOLVED DUPLICATE - hang up") has been marked as a duplicate of this bug. *** ```  [Comment 7](show_bug.cgi?id=3021#c7)  Huzaifa Sidhpurwala    2010-12-27 00:03:57 UTC  ``` Would we consider this as a security issue, since its user who does not have "admin" access to the squid server causing it to crash? ```  [Comment 8](show_bug.cgi?id=3021#c8)  Henrik Nordstrom    2010-12-27 03:24:28 UTC  ``` It's a very noticeable bug. Squid versions having this bug will randomly crash in normal usage and do not need any malicious users to trigger the issue just noral users trying to browse some of the bigger wwebsites.  So no I would not consider it being a securitu issue, only a major stability issue. ```  [Comment 9](show_bug.cgi?id=3021#c9)  Stephen Thorne    2010-12-28 17:54:43 UTC  ``` This is reported in CVE-2010-2951 and on redhat's bugzilla:   <https://bugzilla.redhat.com/show_bug.cgi?id=626927>  As I recall, this only affected squid 3.1.5.1 and 3.1.6, not any later releases, and it was only affecting fedora for a short period of time. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=3021)
* - [XML](show_bug.cgi?ctype=xml&id=3021)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=3021)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=3021&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=3021&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from access.redhat.com_f9f211a7_20250126_083437.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_99da37f0_20250126_083437.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D626927)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D626927)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D626927)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 626927

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 626927**](show_bug.cgi?id=626927)
(CVE-2010-2951)
- [CVE-2010-2951](https://access.redhat.com/security/cve/CVE-2010-2951) squid: child assertion failure when processing large DNS replies with no IPv6 resolver present

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2010-2951 squid: child assertion failure when processing large DNS replie...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED NOTABUG | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2010-2951 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | low | | [Severity:](page.cgi?id=fields.html#bug_severity) | low | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | Duplicates (1): | [649543](show_bug.cgi?id=649543 "CLOSED DUPLICATE - squid: crash due to large DNS response when no IPv6 resolver present")  ([view as bug list](buglist.cgi?bug_id=649543)) | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [626933](show_bug.cgi?id=626933 "CLOSED RAWHIDE - Squid: Buffer overread when processing large DNS replies with no IPv6 resolver present [fedora-all]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=626927&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=626927&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2010-08-24 17:25 UTC by Jan Lieskovsky | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-03-26 15:08 UTC ([History](show_activity.cgi?id=626927)) | | [CC List:](page.cgi?id=fields.html#cclist) | 4 users (show)  henrik jonathansteffan jskala vdanen | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2010-08-25 13:03:30 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=626927#c0)  Jan Lieskovsky    2010-08-24 17:25:28 UTC  ``` A buffer overread flaw was found in the way Squid proxy caching server processed large DNS replies in cases, when no IPv6 resolver was present. A remote attacker could provide DNS reply with large amount of data, leading to denial of service (squid server crash).  Upstream bug report:   [1] <http://bugs.squid-cache.org/show_bug.cgi?id=3021>  Relevant upstream changeset:   [2] <http://bazaar.launchpad.net/~squid/squid/3.1/revision/10072>  References:   [3] <http://marc.info/?l=squid-users&m=128263555724981&w=2>   [4] <http://bugs.gentoo.org/show_bug.cgi?id=334263>  CVE Request:   [5] <http://www.openwall.com/lists/oss-security/2010/08/24/6>   ```  [Comment 1](show_bug.cgi?id=626927#c1)  Jan Lieskovsky    2010-08-24 17:27:34 UTC  ``` This issue did NOT affect the versions of the squid package, as shipped with Red Hat Enterprise Linux 3, 4, or 5.  --  This issue affects the versions of the squid package, as shipped with Fedora release of 12 and 13.  Please fix.   ```  [Comment 2](show_bug.cgi?id=626927#c2)  Jan Lieskovsky    2010-08-24 17:39:46 UTC  ``` Created squid tracking bugs for this issue  Affects: fedora-all [[bug 626933](show_bug.cgi?id=626933 "CLOSED RAWHIDE - Squid: Buffer overread when processing large DNS replies with no IPv6 resolver present [fedora-all]")]   ```  [Comment 3](show_bug.cgi?id=626927#c3)  Henrik Nordström    2010-08-24 17:58:45 UTC  ``` This affects the 3.1.6 version in Fedora updates-testing only. Issue got introduced in Squid-3.1.5.1. Latest stable release pushed for Fedora is 3.1.4 which do not have this issue.  It's a stability issue where Squid due to a coding error automatically restarts if not able to talk to a resolver over IPv6 and needing to retry the DNS query over TCP.  It's not really something I would grade as a security issue.   ```  [Comment 4](show_bug.cgi?id=626927#c4)  Henrik Nordström    2010-08-24 18:03:44 UTC  ``` And no, it's not a buffer overflow. Just a plain assertion failed crash/abort due to trying to use a unset socket filedescriptor (-1) for talking to the resolver.   ```  [Comment 5](show_bug.cgi?id=626927#c5)  Tomas Hoger    2010-08-25 13:03:30 UTC  ``` Henrik, thank you for clarifications!   ```  [Comment 6](show_bug.cgi?id=626927#c6)  Vincent Danen    2010-11-03 23:45:36 UTC  ``` *** [Bug 649543](show_bug.cgi?id=649543 "CLOSED DUPLICATE - squid: crash due to large DNS response when no IPv6 resolver present") has been marked as a duplicate of this bug. ***   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=626927&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.openwall.com_259a4e9b_20250125_123456.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](5) [[next>]](7) [[thread-next>]](7) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <4C74038B.8010103@redhat.com>
Date: Tue, 24 Aug 2010 19:38:19 +0200
From: Jan Lieskovsky <jlieskov@...hat.com>
To: "Steven M. Christey" <coley@...us.mitre.org>
CC: oss-security <oss-security@...ts.openwall.com>,
        Amos Jeffries <amosjeffries@...id-cache.org>,
        Stephen Thorne <stephen@...rne.id.au>
Subject: CVE Request -- Squid v3.1.6 -- DoS (crash) while processing large
 DNS replies with no IPv6 resolver present

Hi Steve, vendors,

   Stephen Thorne reported a buffer overread flaw in the way Squid proxy caching server
processed large DNS replies in cases, when no IPv6 resolver was present.
A remote attacker could provide DNS reply with large amount of data,
leading to denial of service (squid server crash).

Upstream bug report:
   [1] <http://bugs.squid-cache.org/show_bug.cgi?id=3021>

Relevant upstream changeset:
   [2] <http://bazaar.launchpad.net/~squid/squid/3.1/revision/10072>

References:
   [3] <http://marc.info/?l=squid-users&m=128263555724981&w=2>
   [4] <https://bugzilla.redhat.com/show_bug.cgi?id=626927>
   [5] <http://bugs.gentoo.org/show_bug.cgi?id=334263>

Could you allocate CVE id for this issue?

Amos, Stephen please correct me, if some of [1] and [2] doesn't correspond to:

"One regression introduced with 3.1.6 when contacting IPv4-only DNS
resolvers opens a small but exploitable DoS vulnerability."

issue mentioned in [3].

Thanks && Regards, Jan.
--
Jan iankko Lieskovsky / Red Hat Security Response Team

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from bugs.gentoo.org_f6360541_20250125_123448.html ===

[![Gentoo Websites Logo](extensions/Gentoo/web/gentoo_org.png)](/ "Go to the Gentoo Bugzilla homepage")
Go to:
[Gentoo Home](https://www.gentoo.org/)
[Documentation](https://www.gentoo.org/support/documentation/)
[Forums](https://forums.gentoo.org/)
[Lists](https://www.gentoo.org/get-involved/mailing-lists/)
[Bugs](/)
[Planet](https://planet.gentoo.org/)
[Store](https://www.gentoo.org/inside-gentoo/stores/)
[Wiki](https://wiki.gentoo.org/)
**[Get Gentoo!](https://www.gentoo.org/downloads/)**

Gentoo's Bugzilla – Bug 334263
<net-proxy/squid-3.1.8 Multiple vulnerabilities (CVE-2010-3072)
Last modified: 2011-10-26 20:48:06 UTC node [vulture]

* [Home](./)
* | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=334263&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=334263&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 334263**](show_bug.cgi?id=334263)
(CVE-2010-3072)
- <net-proxy/squid-3.1.8 Multiple vulnerabilities (CVE-2010-3072)

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
<net-proxy/squid-3.1.8 Multiple vulnerabilities (CVE-2010-3072)

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2010-3072 | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Gentoo Security | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Gentoo Security "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Vulnerabilities ([show other bugs](buglist.cgi?component=Vulnerabilities&product=Gentoo%20Security&bug_status=__open__)) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | High minor | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Gentoo Security | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") | [http://marc.info/?l=squid-users&m=128...](http://marc.info/?l=squid-users&m=128263555724981&w=2) | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | B3 [glsa] | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | Duplicates (1): | [336217](show_bug.cgi?id=336217 "RESOLVED DUPLICATE - <=net-proxy/squid-{3.0.25,3.1.7} DOS")  ([view as bug list](buglist.cgi?bug_id=336217)) | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2010-08-24 11:21 UTC by Eray Aslan | | --- | --- | | Modified: | 2011-10-26 20:48 UTC ([History](show_activity.cgi?id=334263)) | | CC List: | 4 users (show)  craig holger net-proxy+disabled ooblick | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Package list:](page.cgi?id=fields.html#cf_stabilisation_atoms "Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package.") |  | | [Runtime testing required:](page.cgi?id=fields.html#cf_runtime_testing_required "Indicate what level of testing is required. For manual testing following instructions in the bug, choose \"Manual\". For only compile-testing, choose \"No\". For where tests must pass, choose \"Yes\".") | --- | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | | --- | --- | --- | | [Add an attachment](attachment.cgi?bugid=334263&action=enter) (proposed patch, testcase, etc.) | | |   | Note You need to [log in](show_bug.cgi?id=334263&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](#c0)  Eray Aslan   gentoo-dev  2010-08-24 11:21:12 UTC  ``` The Squid HTTP Proxy team is very pleased to announce the availability of the Squid-3.1.7 release!   This release fixes a number of bugs in the earlier Squid releases.  One regression introduced with 3.1.6 when contacting IPv4-only DNS resolvers opens a small but exploitable DoS vulnerability. All users of Squid-3.1.6 are urged to upgrade to this release as soon as possible.   Several HTTP/1.1 compliance bugs have been resolved. The most noticeable of these is that Squid is now more correctly operating connection keep-alive to clients.   The fix for keep-alive has resolved several apparent bugs in NTLM and Negotiate authentication and brought to light a compatibility issue with the major modern browsers. The issue appears to end-users as multiple browser popups if for any reason they need to supply new NTLM/Negotiate credentials for a connection.  The default if unset for NTLM and Negotiate auth_param keep_alive has become OFF to avoid this.   The visible_hostname directive has been updated with several fixes to avoid killing Squid when the machine hostname is mis-configured or unavailable at startup. To retain consistency with existing distributions practice the value of "localhost" is used in the event of a lookup failure.   All users of Squid-3.1.6 are urged to upgrade to this release as soon as possible.  Users of other Squid-3.1 and 3.0 are encouraged to upgrade at their earliest convenience.   Reproducible: Always ```  [Comment 1](#c1)  Holger Hoffstätte    2010-08-24 14:24:15 UTC  ``` FYI I tried to bump this locally (risk assessment :) and the only necessary change was to drop squid-3.1.6-[bug3011](show_bug.cgi?id=3011 "RESOLVED FIXED - kdeadmin fails to emerge (due to broken rpm?)").patch, since this was fixed upstream. No other changes are necessary. Hope this helps and saves some time.   ```  [Comment 2](#c2)  Alex Legler (RETIRED)   archtester gentoo-dev Security  2010-08-24 18:49:16 UTC  ``` net-proxy: Please bump. ```  [Comment 3](#c3)  Eray Aslan   gentoo-dev  2010-09-06 12:48:06 UTC  ``` net-proxy/squid-3.1.8 is out with some security fixes:   This release brings several very important bug fixes, security updates and some HTTP/1.1 improvements into 3.1.  On the security front we have three major additions:   * Fixes for the request processing vulnerability tagged SQUID-2010:3.    <http://www.squid-cache.org/Advisories/SQUID-2010_3.txt>   * A hardening of the DNS client against packet queueing approaches used to enable attacks. This completes the protection against attacks published by Yamaguchi late in 2009.   * An HTTP request-line parser hardened against several categories of request attack. This greatly increasing the speed of detection and reducing resources used to detect these categories of attack.   Several outstanding major bugs have also been identified and fixed:    - [Bug 3020](show_bug.cgi?id=3020 "RESOLVED INVALID - Error when emerging dev-libs/aterm-1.6.6"): Segmentation fault: nameservers[vc->ns].vc = NULL   - [Bug 3005](show_bug.cgi?id=3005 "RESOLVED FIXED - Gnome 2 Fail to Emerge With failure @ gnome-vfs library >= 0.9"),2972: Locate LTDL headers correctly (again)   - [Bug 2872](show_bug.cgi?id=2872 "RESOLVED FIXED - bind-9.2.1.ebuild - named should own /var/bind"): leaking file descriptors   - [Bug 2583](show_bug.cgi?id=2583 "RESOLVED FIXED - transcode-0.6.0_pre4-r2 does not build"): pure virtual method called  As you can see yet another attempt to get over the libtool / libltdl build issues has been made. If you are building Squid with a libtool 1.x version please try to do so first on these bundles without using any of the hacks and workarounds. For any libltdl or LoadableModules problems in this package please mention in the [bug 2972](show_bug.cgi?id=2972 "RESOLVED FIXED - ebuild for sonypid") bugzilla report along with your libtool/libltdl versions.   Due to the security enhancements all users of Squid-3 are urged to upgrade to this release as soon as possible.   Please refer to the release notes at <http://www.squid-cache.org/Versions/v3/3.1/RELEASENOTES.html> if and when you are ready to make the switch to Squid-3.1  ```  [Comment 4](#c4)  Stefan Behte (RETIRED)   gentoo-dev Security  2010-09-07 19:22:53 UTC  ``` *** [Bug 336217](show_bug.cgi?id=336217 "RESOLVED DUPLICATE - <=net-proxy/squid-{3.0.25,3.1.7} DOS") has been marked as a duplicate of this bug. *** ```  [Comment 5](#c5)  Matus UHLAR - fantomas    2010-09-23 15:50:35 UTC  ``` anyone cares? ```  [Comment 6](#c6)  Alin Năstac (RETIRED)   gentoo-dev  2010-09-23 22:31:31 UTC  ``` squid-3.1.8 has been added to the tree. Arches, please do your magic. ```  [Comment 7](#c7)  Markos Chandras (RETIRED)   gentoo-dev  2010-09-24 07:37:31 UTC  ``` amd64 done ```  [Comment 8](#c8)  Jeroen Roovers (RETIRED)   gentoo-dev  2010-09-24 16:39:38 UTC  ``` (In reply to [comment #6](show_bug.cgi?id=334263#c6)) > squid-3.1.8 has been added to the tree.  Arch teams, please test and mark stable: =net-proxy/squid-3.1.8 Target KEYWORDS="alpha amd64 arm hppa ia64 ppc ppc64 sparc x86" ```  [Comment 9](#c9)  Jeroen Roovers (RETIRED)   gentoo-dev  2010-09-25 05:37:57 UTC  ``` Stable for PPC. ```  [Comment 10](#c10)  Markus Meier   gentoo-dev  2010-09-25 13:57:41 UTC  ``` arm stable ```  [Comment 11](#c11)  Markus Meier   gentoo-dev  2010-09-26 09:18:30 UTC  ``` x86 stable ```  [Comment 12](#c12)  Tobias Klausmann (RETIRED)   gentoo-dev  2010-09-26 16:12:17 UTC  ``` Stable on alpha. ```  [Comment 13](#c13)  Jeroen Roovers (RETIRED)   gentoo-dev  2010-09-29 15:13:42 UTC  ``` Stable for HPPA. ```  [Comment 14](#c14)  Brent Baude (RETIRED)   gentoo-dev  2010-09-30 01:54:53 UTC  ``` ppc64 done ```  [Comment 15](#c15)  Stefan Behte (RETIRED)   gentoo-dev Security  2010-10-01 20:28:58 UTC  ``` CVE-2010-3072 (<http://nvd.nist.gov/nvd.cfm?cvename=CVE-2010-3072>):   The string-comparison functions in String.cci in Squid 3.x before   3.1.8 and 3.2.x before 3.2.0.2 allow remote attackers to cause a   denial of service (NULL pointer dereference and daemon crash) via a   crafted request.   ```  [Comment 16](#c16)  Raúl Porcel (RETIRED)   gentoo-dev  2010-10-09 16:34:32 UTC  ``` ia64/sparc stable ```  [Comment 17](#c17)  Stefan Behte (RETIRED)   gentoo-dev Security  2010-10-13 04:09:17 UTC  ``` In reverse mode (in front of public webserver/s) there is the possiblity of remote DOS by anyone worldwide. Squid will usually be a critical service.  Also: " There are applications already in general public use which can  trigger this problem for 3.1 and 3.2 on occasion without intended  malice."  So, I cancel voting hereby and directly say: GLSA request filed.   ```  [Comment 18](#c18)  esc    2010-12-24 08:17:54 UTC  ``` version bump! <http://www2.de.squid-cache.org/Versions/v3/3.1/changesets/SQUID_3_1_10.html> ```  [Comment 19](#c19)  Alex Legler (RETIRED)   archtester gentoo-dev Security  2010-12-24 13:44:57 UTC  ``` (In reply to [comment #18](show_bug.cgi?id=334263#c18)) > version bump! > <http://www2.de.squid-cache.org/Versions/v3/3.1/changesets/SQUID_3_1_10.html> >   Please don't hijack other bugs, file a new bug instead. ```  [Comment 20](#c20)  esc    2010-12-24 14:23:47 UTC  ``` (In reply to [comment #19](show_bug.cgi?id=334263#c19)) > (In reply to [comment #18](show_bug.cgi?id=334263#c18)) > > version bump! > > <http://www2.de.squid-cache.org/Versions/v3/3.1/changesets/SQUID_3_1_10.html> > >  >  > Please don't hijack other bugs, file a new bug instead. >  Sorry! It was already corrected.  ```  [Comment 21](#c21)  GLSAMaker/CVETool Bot   gentoo-dev  2011-10-26 20:48:06 UTC  ``` This issue was resolved and addressed in  GLSA 201110-24 at <http://security.gentoo.org/glsa/glsa-201110-24.xml> by GLSA coordinator Tim Sammut (underling). ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=334263)
* - [XML](show_bug.cgi?ctype=xml&id=334263)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=334263)
* - [Clone In The Same
  Product](enter_bug.cgi?cloned_bug_id=334263&product=Gentoo%20Security)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi?format=guided)–[[Ex]](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + | [Privacy Policy](https://wiki.gentoo.org/wiki/Foundation%3APrivacy_Policy)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=334263&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=334263&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from bazaar.launchpad.net_314f1aed_20250125_123447.html ===


[← Back to branch summary](https://code.launchpad.net/~squid/squid/3.1)
# ~squid/squid/3.1

* [Changes](/~squid/squid/3.1/changes "Changes")
* [Files](/~squid/squid/3.1/files "Files")

[~squid/squid/3.1](https://code.launchpad.net/~squid/squid/3.1)
» Revision
10072

# Viewing all changes in revision 10072.

* [browse files at revision 10072](/~squid/squid/3.1/files/10072 "browse files at revision 10072")
* [compare with another revision](/~squid/squid/3.1/revision/10072?remember=10072 "compare with another revision")
* [download diff](/~squid/squid/3.1/diff/10072)
* [download tarball](/~squid/squid/3.1/tarball/10072)
* [view history from revision 10072](/~squid/squid/3.1/changes/10072 "view history from revision 10072")

* **Committer:**
  Amos Jeffries
* **Date:**
  2010-08-23 02:24:51 UTC
* **Revision ID:**
  amosjeffries@squid-cache.org-20100823022451-agth132qibh2zqij

Author:Â StephenÂ ThorneÂ <stephen@thorne.id.au>
BugÂ 3021:Â LargeÂ DNSÂ replyÂ causesÂ crashÂ whenÂ noÂ ipv6Â resolverÂ present

+ files modified:
+ [src/dns\_internal.cc](/~squid/squid/3.1/revision/10072/src/dns_internal.cc#src/dns_internal.cc "View changes to src/dns_internal.cc in revision 10072")

![expand all](/static/images/treeCollapsed.png) expand all

![collapse all](/static/images/treeExpanded.png) collapse all

Show diffs side-by-side

![added](/static/images/newCode.gif) added

![removed](/static/images/deleteCode.gif) removed

Lines of Context:

[![](/static/images/treeCollapsed.png)
src/dns\_internal.cc](/~squid/squid/3.1/revision/10072/src/dns_internal.cc "View changes to src/dns_internal.cc only")

![](/static/images/spinner.gif)

* [Older »](/~squid/squid/3.1/revision/10498?start_revid=10499)

Loggerhead is a web-based interface for [Breezy](https://www.breezy-vcs.org/)

Version: 2.0.1



=== Content from bugs.squid-cache.org_0e44bb6d_20250125_123451.html ===


Bugzilla – Bug 3009
epoll fails
Last modified: 2010-08-23 00:59:57 UTC

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=3009&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=3009&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 3009**](show_bug.cgi?id=3009)
- epoll fails

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
epoll fails

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED DUPLICATE of [bug 3021](show_bug.cgi?id=3021 "RESOLVED FIXED - Large DNS reply causes crash when no ipv6 resolver present") | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | Squid | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=Squid "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | other ([show other bugs](buglist.cgi?component=other&product=Squid&bug_status=__open__)) | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 3.1 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | PC Linux: Gentoo | |  | | | [Importance](page.cgi?id=fields.html#importance): | P2 blocker | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | SQUID BUGS ALIAS | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2010-08-08 20:36 UTC by Mohamad H. ARAB | | --- | --- | | Modified: | 2010-08-23 00:59 UTC ([History](show_activity.cgi?id=3009)) | | CC List: | 2 users (show)  nwhisper stephen | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Browser:](page.cgi?id=fields.html#cf_browser "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Fixed Versions:](page.cgi?id=fields.html#cf_fixed "The particuar release versions in which this bug was fixed. See Target Milestone for the current fixed series.") |  | | [Needs:](page.cgi?id=fields.html#cf_needs "This bug requires more information to be provided for anyone to fix it.") |  | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=3009&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=3009&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=3009#c0)  Mohamad H. ARAB    2010-08-08 20:36:55 UTC  ``` Hi,  I've set up over productive cache servers using squid and most of them working very nice and some of them handling over 100Mbps, except this recent one.  I set up new cache recently using squid 3.1.5 + TProxy enabled but after just some minutes of working it was crashed with this assertion failure: assertion failed: comm_epoll.cc:139: "fd >= 0" actually squid tries to restart itself a few times with the same error and finally giving up! I also tested recent release 3.1.6 but result was same. I also tested this on linux kernels 2.6.32 and 21.6.31 with same result!  Finally I downgraded squid to version 3.1.1 and the problem disappeared!  I'm using Gentoo and squid configuration is:   configure options:  '--prefix=/usr' '--build=i686-pc-linux-gnu' '--host=i686-pc-linux-gnu' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--datadir=/usr/share' '--sysconfdir=/etc' '--localstatedir=/var/lib' '--sysconfdir=/etc/squid' '--libexecdir=/usr/libexec/squid' '--localstatedir=/var' '--datadir=/usr/share/squid' '--with-default-user=squid' '--enable-auth=basic,digest,negotiate,ntlm' '--enable-removal-policies=lru,heap' '--enable-digest-auth-helpers=password' '--enable-basic-auth-helpers=DB,PAM,getpwnam,NCSA,MSNT' '--enable-external-acl-helpers=ip_user,session,unix_group' '--enable-ntlm-auth-helpers=fakeauth' '--enable-negotiate-auth-helpers=' '--enable-useragent-log' '--enable-cache-digests' '--enable-delay-pools' '--enable-referer-log' '--enable-arp-acl' '--with-large-files' '--with-filedescriptors=8192' '--disable-caps' '--enable-snmp' '--enable-ssl' '--disable-icap-client' '--enable-storeio=ufs,diskd,aufs' '--enable-linux-netfilter' '--enable-epoll' 'build_alias=i686-pc-linux-gnu' 'host_alias=i686-pc-linux-gnu' 'CC=i686-pc-linux-gnu-gcc' 'CFLAGS=-O2 -march=i686 -pipe' 'LDFLAGS=-Wl,-O1' 'CXXFLAGS=-O2 -march=i686 -pipe' --with-squid=/usr/src/squid-3.1.1 --enable-ltdl-convenience  would you please check what cause the crashes in these two new releases.  Thanks and regards, ARAB ```  [Comment 1](show_bug.cgi?id=3009#c1)  nwhisper@gmail.com    2010-08-10 02:18:20 UTC  ``` With comm_poll some error. ```  [Comment 2](show_bug.cgi?id=3009#c2)  nwhisper@gmail.com    2010-08-10 02:32:23 UTC  ``` With 2.6.35 some error. ```  [Comment 3](show_bug.cgi?id=3009#c3)  Stephen Thorne    2010-08-18 17:43:54 UTC  ``` We observed this assertion on a site running with direct, and NTLM authentication. Squid version 3.1.6 + 1.1 replies + chunked replies.  log line from cache.log is this: 2010/08/19 08:58:50| assertion failed: comm_epoll.cc:139: "fd >= 0" ```  [Comment 4](show_bug.cgi?id=3009#c4)  Stephen Thorne    2010-08-18 22:22:17 UTC  ``` I have replicated and fixed the problem I experienced, see patch in [bug 3021](show_bug.cgi?id=3021 "RESOLVED FIXED - Large DNS reply causes crash when no ipv6 resolver present"). Please verify that your issues are resolved by the same patch. ```  [Comment 5](show_bug.cgi?id=3009#c5)  nwhisper@gmail.com    2010-08-23 00:45:37 UTC  ``` It seems that with a patch from [bug 3021](show_bug.cgi?id=3021 "RESOLVED FIXED - Large DNS reply causes crash when no ipv6 resolver present") my problem has disappeared. ```  [Comment 6](show_bug.cgi?id=3009#c6)  Stephen Thorne    2010-08-23 00:59:57 UTC  ``` Good to hear the patch works, closing as dup of the other ticket.  *** This bug has been marked as a duplicate of [bug 3021](show_bug.cgi?id=3021 "RESOLVED FIXED - Large DNS reply causes crash when no ipv6 resolver present") *** ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=3009)
* - [XML](show_bug.cgi?ctype=xml&id=3009)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=3009)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=3009&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=3009&GoAheadAndLogIn=1#forgot)
    Login:

    [x]



=== Content from www.openwall.com_9ad7f5df_20250125_123457.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](5) [[next>]](7) [[<thread-prev]](2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <448348997.262011282746290470.JavaMail.root@zmail01.collab.prod.int.phx2.redhat.com>
Date: Wed, 25 Aug 2010 10:24:50 -0400 (EDT)
From: Josh Bressers <bressers@...hat.com>
To: oss-security@...ts.openwall.com
Cc: "Steven M. Christey" <coley@...us.mitre.org>,
        Amos Jeffries <amosjeffries@...id-cache.org>,
        Stephen Thorne <stephen@...rne.id.au>
Subject: Re: Re: CVE Request -- Squid v3.1.6 -- DoS (crash)
 while processing large DNS replies with no IPv6 resolver present

Please use CVE-2010-2951 for this.

Thanks.

--
    JB

----- "Stephen Thorne" <stephen@...rne.id.au> wrote:

> On 2010-08-24, Jan Lieskovsky wrote:
> >   Stephen Thorne reported a buffer overread flaw in the way Squid
> proxy caching server
> > processed large DNS replies in cases, when no IPv6 resolver was
> present.
> > A remote attacker could provide DNS reply with large amount of
> data,
> > leading to denial of service (squid server crash).
>
> Those references all look correct, but I have one small niggle, this
> was not a
> buffer overread flaw.
>
> What actually happens is that if a TCP DNS request is required, a
> logic error
> causes a sockopt to be set on the ipv6 resolver fd, which will be
> fatal if that
> resolver is not configured.
>
> --
> Regards,
> Stephen Thorne
> Development Engineer
> Netbox Blue

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.openwall.com_9aee5a34_20250125_123457.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](1) [[next>]](3) [[<thread-prev]](../../../2010/08/24/7) [[thread-next>]](6) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <4C74C3C8.10005@treenet.co.nz>
Date: Wed, 25 Aug 2010 19:18:32 +1200
From: Amos Jeffries <squid3@...enet.co.nz>
To: oss-security <oss-security@...ts.openwall.com>
CC: "Steven M. Christey" <coley@...us.mitre.org>,
 Amos Jeffries <amosjeffries@...id-cache.org>,
 Stephen Thorne <stephen@...rne.id.au>
Subject: Re: CVE Request -- Squid v3.1.6 -- DoS (crash) while processing large
 DNS replies with no IPv6 resolver present

Jan Lieskovsky wrote:
> Hi Steve, vendors,
>
>   Stephen Thorne reported a buffer overread flaw in the way Squid proxy
> caching server
> processed large DNS replies in cases, when no IPv6 resolver was present.
> A remote attacker could provide DNS reply with large amount of data,
> leading to denial of service (squid server crash).
>
> Upstream bug report:
>   [1] <http://bugs.squid-cache.org/show_bug.cgi?id=3021>
>
> Relevant upstream changeset:
>   [2] <http://bazaar.launchpad.net/~squid/squid/3.1/revision/10072>
>

Also for use as needed our patch archive copy:
<http://www.squid-cache.org/Versions/v3/3.1/changesets/squid-3.1-10072.patch>

> References:
>   [3] <http://marc.info/?l=squid-users&m=128263555724981&w=2>
>   [4] <https://bugzilla.redhat.com/show_bug.cgi?id=626927>
>   [5] <http://bugs.gentoo.org/show_bug.cgi?id=334263>
>
> Could you allocate CVE id for this issue?
>
> Amos, Stephen please correct me, if some of [1] and [2] doesn't
> correspond to:
>
> "One regression introduced with 3.1.6 when contacting IPv4-only DNS
> resolvers opens a small but exploitable DoS vulnerability."
>
> issue mentioned in [3].
>
> Thanks && Regards, Jan.
> --
> Jan iankko Lieskovsky / Red Hat Security Response Team

Henrik covered the rest in your bug report [4].

Amos
--
Please be using
   Current Stable Squid 2.7.STABLE9 or 3.1.7
   Beta testers wanted for 3.2.0.1

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from marc.info_8a2c489d_20250125_123455.html ===

```
[[prev in list](?l=squid-users&m=128263475924026&w=2)] [[next in list](?l=squid-users&m=128263732027118&w=2)] [prev in thread] [[next in thread](?l=squid-announce&m=128272875313301&w=2)]
List:       [squid-users](?l=squid-users&r=1&w=2)
Subject:    [[squid-users] Squid 3.1.7 is available](?t=128263560600002&r=1&w=2)
From:       [Amos Jeffries <squid3 () treenet ! co ! nz>](?a=116823418900009&r=1&w=2)
Date:       [2010-08-24 7:39:04](?l=squid-users&r=1&w=2&b=201008)
Message-ID: [4C737718.1050006 () treenet ! co ! nz](?i=4C737718.1050006%20()%20treenet%20!%20co%20!%20nz)
[Download RAW [message](?l=squid-users&m=128263555724981&q=mbox) or [body](?l=squid-users&m=128263555724981&q=raw)]

The Squid HTTP Proxy team is very pleased to announce the
availability of the Squid-3.1.7 release!

This release fixes a number of bugs in the earlier Squid releases.

One regression introduced with 3.1.6 when contacting IPv4-only DNS
resolvers opens a small but exploitable DoS vulnerability. All users of
Squid-3.1.6 are urged to upgrade to this release as soon as possible.

Several HTTP/1.1 compliance bugs have been resolved. The most noticeable
of these is that Squid is now more correctly operating connection
keep-alive to clients.

  The fix for keep-alive has resolved several apparent bugs in NTLM and
Negotiate authentication and brought to light a compatibility issue with
the major modern browsers. The issue appears to end-users as multiple
browser popups if for any reason they need to supply new NTLM/Negotiate
credentials for a connection.  The default if unset for NTLM and
Negotiate auth_param keep_alive has become OFF to avoid this.

The visible_hostname directive has been updated with several fixes to
avoid killing Squid when the machine hostname is mis-configured or
unavailable at startup. To retain consistency with existing
distributions practice the value of "localhost" is used in the event of
a lookup failure.

All users of Squid-3.1.6 are urged to upgrade to this release as soon as
possible.

Users of other Squid-3.1 and 3.0 are encouraged to upgrade at their
earliest convenience.

Please refer to the release notes at
<http://www.squid-cache.org/Versions/v3/3.1/RELEASENOTES.html>
if and when you are ready to make the switch to Squid-3.1

This new release can be downloaded from our HTTP or FTP servers

       <http://www.squid-cache.org/Versions/v3/3.1/>
       ftp://ftp.squid-cache.org/pub/squid/
       ftp://ftp.squid-cache.org/pub/archive/3.1/

or the mirrors. For a list of mirror sites see

       <http://www.squid-cache.org/Download/http-mirrors.dyn>
       <http://www.squid-cache.org/Download/mirrors.dyn>

If you encounter any issues with this release please file a bug report.
       <http://bugs.squid-cache.org/>

Amos Jeffries
[[prev in list](?l=squid-users&m=128263475924026&w=2)] [[next in list](?l=squid-users&m=128263732027118&w=2)] [prev in thread] [[next in thread](?l=squid-announce&m=128272875313301&w=2)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from www.openwall.com_5d65ff00_20250125_123457.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](6) [[next>]](../../../2010/08/25/1) [[<thread-prev]](6) [[thread-next>]](../../../2010/08/25/2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20100824234550.GF4358@thorne.id.au>
Date: Wed, 25 Aug 2010 09:45:50 +1000
From: Stephen Thorne <stephen@...rne.id.au>
To: oss-security <oss-security@...ts.openwall.com>
Cc: "Steven M. Christey" <coley@...us.mitre.org>,
	Amos Jeffries <amosjeffries@...id-cache.org>,
	Stephen Thorne <stephen@...rne.id.au>
Subject: Re: CVE Request -- Squid v3.1.6 -- DoS (crash) while processing
 large DNS replies with no IPv6 resolver present

On 2010-08-24, Jan Lieskovsky wrote:
>   Stephen Thorne reported a buffer overread flaw in the way Squid proxy caching server
> processed large DNS replies in cases, when no IPv6 resolver was present.
> A remote attacker could provide DNS reply with large amount of data,
> leading to denial of service (squid server crash).

Those references all look correct, but I have one small niggle, this was not a
buffer overread flaw.

What actually happens is that if a TCP DNS request is required, a logic error
causes a sockopt to be set on the ipv6 resolver fd, which will be fatal if that
resolver is not configured.

--
Regards,
Stephen Thorne
Development Engineer
Netbox Blue

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.squid-cache.org_271f4558_20250125_123458.html ===
------------------------------------------------------------
revno: 10072
revision-id: amosjeffries@squid-cache.org-20100823022451-agth132qibh2zqij
parent: amosjeffries@squid-cache.org-20100819022734-i2z1a0nk85gc7mrj
committer: Amos Jeffries
branch nick: SQUID\_3\_1
timestamp: Sun 2010-08-22 20:24:51 -0600
message:
Author: Stephen Thorne
Bug 3021: Large DNS reply causes crash when no ipv6 resolver present
------------------------------------------------------------
# Bazaar merge directive format 2 (Bazaar 0.90)
# revision\_id: amosjeffries@squid-cache.org-20100823022451-\
# agth132qibh2zqij
# target\_branch: http://www.squid-cache.org/bzr/squid3/trunk/
# testament\_sha1: bda3dc76450383081aa6cb18a4d9ed437a216fc8
# timestamp: 2010-08-23 02:42:29 +0000
# source\_branch: http://www.squid-cache.org/bzr/squid3/branches\
# /SQUID\_3\_1
# base\_revision\_id: amosjeffries@squid-cache.org-20100819022734-\
# i2z1a0nk85gc7mrj
#
# Begin patch
=== modified file 'src/dns\_internal.cc'
--- src/dns\_internal.cc 2010-08-11 11:16:41 +0000
+++ src/dns\_internal.cc 2010-08-23 02:24:51 +0000
@@ -843,14 +843,16 @@
} while ( (x<0 && y<0) && q->nsends % nns != 0);
- if (y >= 0) {
- fd\_bytes(DnsSocketB, y, FD\_WRITE);
- commSetSelect(DnsSocketB, COMM\_SELECT\_READ, idnsRead, NULL, 0);
- }
+ if (!q->need\_vc) {
+ if (y >= 0) {
+ fd\_bytes(DnsSocketB, y, FD\_WRITE);
+ commSetSelect(DnsSocketB, COMM\_SELECT\_READ, idnsRead, NULL, 0);
+ }
- if (x >= 0) {
- fd\_bytes(DnsSocketA, x, FD\_WRITE);
- commSetSelect(DnsSocketA, COMM\_SELECT\_READ, idnsRead, NULL, 0);
+ if (x >= 0) {
+ fd\_bytes(DnsSocketA, x, FD\_WRITE);
+ commSetSelect(DnsSocketA, COMM\_SELECT\_READ, idnsRead, NULL, 0);
+ }
}
nameservers[ns].nqueries++;

