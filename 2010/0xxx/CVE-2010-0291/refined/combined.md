=== Content from marc.info_64c501ca_20250125_212309.html ===

```
[[prev in list](?l=oss-security&m=126384937215718&w=2)] [[next in list](?l=oss-security&m=126392871222451&w=2)] [prev in thread] [[next in thread](?l=oss-security&m=126393370931972&w=2)]
List:       [oss-security](?l=oss-security&r=1&w=2)
Subject:    [[oss-security] CVE request - kernel: untangle the do_mremap() mess](?t=126388199300001&r=1&w=2)
From:       [Eugene Teo <eugene () redhat ! com>](?a=123544296600013&r=1&w=2)
Date:       [2010-01-19 6:16:22](?l=oss-security&r=1&w=2&b=201001)
Message-ID: [4B554E36.1080108 () redhat ! com](?i=4B554E36.1080108%20()%20redhat%20!%20com)
[Download RAW [message](?l=oss-security&m=126388181420690&q=mbox) or [body](?l=oss-security&m=126388181420690&q=raw)]

There's a pile of upstream commits that fixed issues that can lead to
user-triggerable panics on supported boxes:
<http://groups.google.com/group/linux.kernel/msg/895f20870532241e>.

<http://groups.google.co.jp/group/fa.linux.kernel/browse_thread/thread/8bf22336b1082090>

Thanks, Eugene
--
Eugene Teo / Red Hat Security Response Team
[[prev in list](?l=oss-security&m=126384937215718&w=2)] [[next in list](?l=oss-security&m=126392871222451&w=2)] [prev in thread] [[next in thread](?l=oss-security&m=126393370931972&w=2)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from marc.info_d995cc5f_20250125_212312.html ===

```
[[prev in list](?l=oss-security&m=126396065732697&w=2)] [[next in list](?l=oss-security&m=126397813617806&w=2)] [[prev in thread](?l=oss-security&m=126396065732697&w=2)] [[next in thread](?l=oss-security&m=126399980216047&w=2)]
List:       [oss-security](?l=oss-security&r=1&w=2)
Subject:    [Re: [oss-security] CVE request - kernel: untangle the do_mremap()](?t=126388199300001&r=1&w=2)
From:       ["Steven M. Christey" <coley () linus ! mitre ! org>](?a=91888144900001&r=1&w=2)
Date:       [2010-01-20 5:41:04](?l=oss-security&r=1&w=2&b=201001)
Message-ID: [Pine.GSO.4.64.1001200029150.1049 () faron ! mitre ! org](?i=Pine.GSO.4.64.1001200029150.1049%20()%20faron%20!%20mitre%20!%20org)
[Download RAW [message](?l=oss-security&m=126396609004884&q=mbox) or [body](?l=oss-security&m=126396609004884&q=raw)]

On Wed, 20 Jan 2010, Eugene Teo wrote:

> Anyway, Al summarised the mess here:
> <http://marc.info/?l=linux-arch&m=126004438008670&w=2>
>
> And the pile of upstream commits were meant to address the problems described
> AFAIK. It will probably make more sense to associate all these related
> commits to just one CVE name.

I defer to Josh on this, but in a series of patches that is referred to as
"mremap/mmap mess" in some linux-kernel subject lines, for which a
specialist like Eugene is not entirely certain about, in which some of the
patches are assembly-level changes for individual architectures, and where
few of the patch diffs make it clear what the underlying problem was - we
could collectively spend a week of labor trying to figure everything out
from a purist CVE perspective, or anchor on a single series of commits
that are hopefully attached to a single kernel RC or minor version
release.  I suspect the latter would be more helpful to the general CVE
consumer community, so my recommendation is for a single CVE, assuming
that all of these patches make it into a single kernel update.

- Steve

P.S. for those with a long memory, the vim issues were different, just
don't ask me how.

> I rated these cvss2=7.2/AV:L/AC:L/Au:N/C:C/I:C/A:C.
>
> Here are the related links and patch descriptions:
> 1) untangling do_mremap(), part 1
> 54f5de709984bae0d31d823ff03de755f9dcac54
> <http://marc.info/?l=linux-arch&m=126015794920298&w=2>
> 2) do_mremap() untangling, part 2
> ecc1a8993751de4e82eb18640d631dae1f626bd6
> <http://marc.info/?l=linux-arch&m=126015795020304&w=2>
> 3) do_mremap() untangling, part 3
> 1a0ef85f84feb13f07b604fcf5b90ef7c2b5c82f
> <http://marc.info/?l=linux-arch&m=126015799020341&w=2>
> 4) fix checks for expand-in-place mremap
> f106af4e90eadd76cfc0b5325f659619e08fb762
> <http://marc.info/?l=linux-kernel&m=126015827720681&w=2>
> 5) fix the arch checks in MREMAP_FIXED case
> 097eed103862f9c6a97f2e415e21d1134017b135
> <http://marc.info/?l=linux-kernel&m=126015827720686&w=2>
> 6) fix pgoff in "have to relocate" case of mremap()
> 935874141df839c706cd6cdc438e85eb69d1525e
> <http://marc.info/?l=linux-kernel&m=126015825720659&w=2>
> 7) kill useless checks in sparc mremap variants
> 0ec62d290912bb4b989be7563851bc364ec73b56
> <http://marc.info/?l=linux-kernel&m=126015822220608&w=2>
> 8) file ->get_unmapped_area() shouldn't duplicate work of get_unmapped_area()
> c4caa778157dbbf04116f0ac2111e389b5cd7a29
> <http://marc.info/?l=linux-arch&m=126015804620397&w=2>
> 9) arm: add arch_mmap_check(), get rid of sys_arm_mremap()
> 2ea1d13f64efdf49319e86c87d9ba38c30902782
> <http://marc.info/?l=linux-arch&m=126015819820566&w=2>
> 10) Kill ancient crap in s390 compat mmap
> 570dcf2c15463842e384eb597a87c1e39bead99b
> <http://marc.info/?l=linux-kernel&m=126015810620436&w=2>
> 11) arch_mmap_check() on mn10300
> 564b3bffc619dcbdd160de597b0547a7017ea010
> <http://marc.info/?l=linux-kernel&m=126015810620439&w=2>
> 12) Cut hugetlb case early for 32bit on ia64
> 0067bd8a55862ac9dd212bd1c4f6f5bff1ca1301
> <http://marc.info/?l=linux-kernel&m=126015810620442&w=2>
> 13) Unify sys_mmap*
> f8b7256096a20436f6d0926747e3ac3d64c81d24
> <http://marc.info/?l=linux-kernel&m=126015815920506&w=2>
> 14) fix a struct file leak in do_mmap_pgoff()
> 8c7b49b3ecd48923eb64ff57e07a1cdb74782970
> <http://marc.info/?l=linux-kernel&m=126015815920509&w=2>
> 15) Take arch_mmap_check() into get_unmapped_area()
> 9206de95b1ea68357996ec02be5db0638a0de2c1
> <http://marc.info/?l=linux-kernel&m=126015815920512&w=2>
> 16) switch do_brk() to get_unmapped_area()
> 2c6a10161d0b5fc047b5bd81b03693b9af99fab5
> <http://marc.info/?l=linux-arch&m=126015810820457&w=2>
> 17) sparc_brk() is not needed anymore
> 05d72faa6d13c9d857478a5d35c85db9adada685
> <http://marc.info/?l=linux-arch&m=126015810920463&w=2>
> 18) Get rid of open-coding in ia64_brk()
> bb52d6694002b9d632bb355f64daa045c6293a4e
> <http://marc.info/?l=linux-arch&m=126015811020469&w=2>
> 19) fix broken aliasing checks for MAP_FIXED on sparc32,mips,arm and sh
> e77414e0aad6a1b063ba5e5750c582c75327ea6a
> <http://marc.info/?l=linux-arch&m=126015816020518&w=2>
> 20) Add missing alignment check in arch/score sys_mmap()
> aa65607373a4daf2010e8c3867b6317619f3c1a3
>
> Reference:
> <https://bugzilla.redhat.com/show_bug.cgi?id=556703>
>
> Thanks, Eugene
>
[[prev in list](?l=oss-security&m=126396065732697&w=2)] [[next in list](?l=oss-security&m=126397813617806&w=2)] [[prev in thread](?l=oss-security&m=126396065732697&w=2)] [[next in thread](?l=oss-security&m=126399980216047&w=2)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from marc.info_ff9e32f0_20250125_212310.html ===

```
[[prev in list](?l=oss-security&m=126393356731664&w=2)] [[next in list](?l=oss-security&m=126393609503704&w=2)] [[prev in thread](?l=oss-security&m=126388181420690&w=2)] [[next in thread](?l=oss-security&m=126395874130875&w=2)]
List:       [oss-security](?l=oss-security&r=1&w=2)
Subject:    [Re: [oss-security] CVE request - kernel: untangle the do_mremap()](?t=126388199300001&r=1&w=2)
From:       [Josh Bressers <bressers () redhat ! com>](?a=108872111000004&r=1&w=2)
Date:       [2010-01-19 20:41:21](?l=oss-security&r=1&w=2&b=201001)
Message-ID: [206979674.229731263933681428.JavaMail.root () zmail01 ! collab ! prod ! int ! phx2 ! redhat ! com](?i=206979674.229731263933681428.JavaMail.root%20()%20zmail01%20!%20collab%20!%20prod%20!%20int%20!%20phx2%20!%20redhat%20!%20com)
[Download RAW [message](?l=oss-security&m=126393370931972&q=mbox) or [body](?l=oss-security&m=126393370931972&q=raw)]

----- "Eugene Teo" <eugene@redhat.com> wrote:

> There's a pile of upstream commits that fixed issues that can lead to
>
> user-triggerable panics on supported boxes:
> <http://groups.google.com/group/linux.kernel/msg/895f20870532241e>.
>
> <http://groups.google.co.jp/group/fa.linux.kernel/browse_thread/thread/8bf22336b1082090>
>

I don't think CVE ids can be assigned to this without more information. I'm
not knowledgeable enough, nor do I have the time to properly understand
this list.

Thanks.

--
    JB
[[prev in list](?l=oss-security&m=126393356731664&w=2)] [[next in list](?l=oss-security&m=126393609503704&w=2)] [[prev in thread](?l=oss-security&m=126388181420690&w=2)] [[next in thread](?l=oss-security&m=126395874130875&w=2)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from marc.info_18bf2f19_20250125_212309.html ===

```
[[prev in list](?l=linux-kernel&m=126004431708596&w=2)] [[next in list](?l=linux-kernel&m=126004438008679&w=2)] [[prev in thread](?l=linux-arch&m=126004437908664&w=2)] [[next in thread](?l=linux-arch&m=126004589510643&w=2)]
List:       [linux-kernel](?l=linux-kernel&r=1&w=2)
Subject:    [[RFC][PATCHSET] mremap/mmap mess](?t=126004444800002&r=1&w=2)
From:       [Al Viro <viro () ftp ! linux ! org ! uk>](?a=112682053000004&r=1&w=2)
Date:       [2009-12-05 19:08:50](?l=linux-kernel&r=1&w=2&b=200912)
Message-ID: [E1NGzzu-0008RH-T2 () ZenIV ! linux ! org ! uk](?i=E1NGzzu-0008RH-T2%20()%20ZenIV%20!%20linux%20!%20org%20!%20uk)
[Download RAW [message](?l=linux-kernel&m=126004438008670&q=mbox) or [body](?l=linux-kernel&m=126004438008670&q=raw)]

[NOTE: the patch series below is not for merge until ACKed by arch maintainers]

	We have a bunch of interesting problems with mmap/mremap.

1) MREMAP_FIXED allows remap to any location, regardless of what
the architecture has to say about it.  The only check is TASK_SIZE.
That's not enough - e.g. there are architectures where some ranges
are simply absent (itanic, sparc), there are some that have cache
coherency requirements on alignments of shared mapping (a lot -
anything with VIPT cache, itanic where it's not a coherency but
a performance issue).  There are architectures where specific ranges
are reserved for hugetlb and they either simply do not allow normal
mappings in there or need to do something to make them possible (as
ppc64 does).  sparc tried to deal with that problem, but it hadn't
been complete (alignment issues) and it had been actually wrong for
non-MREMAP_FIXED calls of mremap().

2) without MREMAP_FIXED we happily allowed extension into a hole in
address space - the only check for being able to extend without
move had been for TASK_SIZE (and for non-overlap with other vmas).
Victims: sparc, itanic due to extending into holes, powerpc due to
extending into hugetlb range.

3) in case of relocation without MREMAP_FIXED we ended up doing
get_unmapped_area() with wrong pgoff if the starting address had
been in the middle of a mapping.  New vma gets the right pgoff,
the checks are done for the wrong one.  Cache coherency issues
on all VIPT architectures.

4) mmap() with MAP_HUGETLB leaks struct file if it bails out anywhere
past the allocation of struct file (by do_mmap_pgoff())

5) brk() into a hugetlb range failed without trying to do anything;
known thing, ppc folks had been unhappy about that.

Series below should deal with those, mostly by switching to consistent
use of get_unmapped_area() and sanitizing mmap/mremap code in general.

There is one case where we still have a serious PITA and I'm not sure
how to deal with that; it's expand_stack().  We can trigger that by
creating a VM_GROWS{UP,DOWN} mapping and either hitting a pagefault
on address {below,above} it or doing PTRACE_POKEDATA on such address.
As it is, we only check that range we are expanding into is not a
hugetlb-only one.  The thing is, we *can't* just do the normal checks
as-is there.

For cases when we do expand_stack() for our own mm that would work just
fine and do the right thing.  Unfortunately, we have places that hit
it from get_user_pages() for another process.  And checks (starting with
"what's the maximal address we allow") are process-dependent on biarch
architectures.  Worse yet, execve() does that when we have no other
process - it creates new mm, puts an anonymous mapping as high as
possible in it and copies argv/envp in there.  And that's done with
get_user_pages() on new mm.  If we have a 32bit task on e.g. amd64,
we'll have that mapping at addresses far above the TASK_SIZE of caller.
Later, when  ->load_binary() figures out what personality we'll get,
it turns that mapping into a valid vma for stack, possibly relocating
the entire thing to address suitable for resulting process.

Breaking execve() from 32bit processes on biarch architectures would
be a bad thing, so we can't just add the normal set of checks to
expand_stack() (acct_stack_growth(), actually).  The problem is quite
real, though, since e.g. on itanic PTRACE_POKEDATA can be used to get
a vma hanging down into a gap in address space quite easily.  Results
are not pretty...

One way to deal with that would be to put enough information into mm_struct
so that all these checks wouldn't have to look at the caller's personality.
I'm not sure how much PITA would that be, though; I've been digging through
the arch/* VM code for several weeks by now, but I certainly don't pretend
to be able to spot e.g. performance implications of such change.

Comments (both on that issue and on following patch series) would be very
welcome.
--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  <http://vger.kernel.org/majordomo-info.html>
Please read the FAQ at  <http://www.tux.org/lkml/>
[[prev in list](?l=linux-kernel&m=126004431708596&w=2)] [[next in list](?l=linux-kernel&m=126004438008679&w=2)] [[prev in thread](?l=linux-arch&m=126004437908664&w=2)] [[next in thread](?l=linux-arch&m=126004589510643&w=2)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from www.vmware.com_bb28f4f9_20250125_212319.html ===


Menu

* [Products](https://www.broadcom.com/products/)
* [Solutions](https://www.broadcom.com/solutions)
* [Support and Services](https://www.broadcom.com/support)
* [Company](https://www.broadcom.com/company/about-us/)
* [How To Buy](https://www.broadcom.com/how-to-buy/#sales)

* Log in

  [Log In](/c/portal/login)
  [Register](https://profile.broadcom.com/web/registration)

[Register](https://profile.broadcom.com/web/registration)
[Login](/c/portal/login)

VMSA-2011-0003:Third party component updates for VMware vCenter Server, vCenter Update Manager, ESXi and ESX

Product/Component

VMware

0 more products

List of Products

1 Products

* VMware

Notification Id

23418

Last Updated

08 February 2011

Initial Publication Date

08 February 2011

Status

CLOSED

Severity

HIGH

CVSS Base Score

WorkAround

Affected CVE

CVE-2009-2693

## VMSA-2011-0003.2

### Third party component updates for VMware vCenter Server, vCenter Update Manager, ESXi and ESX

##### VMware Security Advisory

#####

VMware Security Advisory Advisory ID: VMSA-2011-0003.2VMware Security Advisory Synopsis: Third party component updates for VMware vCenter Server, vCenter Update Manager, ESXi and ESXVMware Security Advisory Issue date: VMware Security Advisory Updated on: VMware Security Advisory CVE numbers:
## VMSA-2011-0003.2

### Third party component updates for VMware vCenter Server, vCenter Update Manager, ESXi and ESX

```
------------------------------------------------------------------------
                   VMware Security Advisory
```
```
Advisory ID:       VMSA-2011-0003.2
Synopsis:          Third party component updates for VMware vCenter
                   Server, vCenter Update Manager, ESXi and ESX
Issue date:        2011-02-10
Updated on:        2011-05-05
CVE numbers:       --- Apache Tomcat ---
                   CVE-2009-2693 CVE-2009-2901 CVE-2009-2902
                   CVE-2009-3548 CVE-2010-2227 CVE-2010-1157
                   --- Apache Tomcat Manager ---
                   CVE-2010-2928
                   --- cURL ---
                   CVE-2010-0734
                   --- COS Kernel ---
                   CVE-2010-1084 CVE-2010-2066 CVE-2010-2070
                   CVE-2010-2226 CVE-2010-2248 CVE-2010-2521
                   CVE-2010-2524 CVE-2010-0008 CVE-2010-0415
                   CVE-2010-0437 CVE-2009-4308 CVE-2010-0003
                   CVE-2010-0007 CVE-2010-0307 CVE-2010-1086
                   CVE-2010-0410 CVE-2010-0730 CVE-2010-1085
                   CVE-2010-0291 CVE-2010-0622 CVE-2010-1087
                   CVE-2010-1173 CVE-2010-1437 CVE-2010-1088
                   CVE-2010-1187 CVE-2010-1436 CVE-2010-1641
                   CVE-2010-3081 CVE-2010-2240
                   --- Microsoft SQL Express ---
                   CVE-2008-5416 CVE-2008-0085 CVE-2008-0086
                   CVE-2008-0107 CVE-2008-0106
                   --- OpenSSL ---
                   CVE-2010-0740 CVE-2010-0433
                   CVE-2010-3864 CVE-2010-2939
                   --- Oracle (Sun) JRE ---
                   CVE-2009-3555 CVE-2010-0082 CVE-2010-0084
                   CVE-2010-0085 CVE-2010-0087 CVE-2010-0088
                   CVE-2010-0089 CVE-2010-0090 CVE-2010-0091
                   CVE-2010-0092 CVE-2010-0093 CVE-2010-0094
                   CVE-2010-0095 CVE-2010-0837 CVE-2010-0838
                   CVE-2010-0839 CVE-2010-0840 CVE-2010-0841
                   CVE-2010-0842 CVE-2010-0843 CVE-2010-0844
                   CVE-2010-0845 CVE-2010-0846 CVE-2010-0847
                   CVE-2010-0848 CVE-2010-0849 CVE-2010-0850
                   CVE-2010-0886 CVE-2010-3556 CVE-2010-3566
                   CVE-2010-3567 CVE-2010-3550 CVE-2010-3561
                   CVE-2010-3573 CVE-2010-3565 CVE-2010-3568
                   CVE-2010-3569 CVE-2010-1321 CVE-2010-3548
                   CVE-2010-3551 CVE-2010-3562 CVE-2010-3571
                   CVE-2010-3554 CVE-2010-3559 CVE-2010-3572
                   CVE-2010-3553 CVE-2010-3549 CVE-2010-3557
                   CVE-2010-3541 CVE-2010-3574
                   --- pam_krb5 ---
                   CVE-2008-3825 CVE-2009-1384
------------------------------------------------------------------------
```
```
1. Summary
```
```
   Update 1 for vCenter Server 4.x, vCenter Update Manager 4.x, vSphere
   Hypervisor (ESXi) 4.1, ESXi 4.1, addresses several security issues.
```
```

2. Relevant releases
```
```
   vCenter Server 4.1 without Update 1,
```
```
   vCenter Server 4.0 without Update 3,
```
```
   vCenter Update Manager 4.1 without Update 1,
```
```
   vCenter Update Manager 4.0 without Update 3,
```
```
   ESXi 4.1 without patch ESXi410-201101201-SG,
```
```
   ESXi 4.0 without patch ESXi400-201103401-SG.
```
```
   ESX 4.1 without patch ESX410-201101201-SG.
```
```
   ESX 4.0 without patches ESX400-201103401-SG, ESX400-201103403-SG.
```
```

3. Problem Description
```
```
 a. vCenter Server and vCenter Update Manager update Microsoft
    SQL Server 2005 Express Edition to Service Pack 3
```
```
    Microsoft SQL Server 2005 Express Edition (SQL Express)
    distributed with vCenter Server 4.1 Update 1 and vCenter Update
    Manager 4.1 Update 1 is upgraded from  SQL Express Service Pack 2
    to SQL Express Service Pack 3, to address multiple security
    issues that exist in the earlier releases of Microsoft SQL Express.
```
```
    Customers using other database solutions need not update for
    these issues.
```
```
    The Common Vulnerabilities and Exposures project (cve.mitre.org)
    has assigned the names CVE-2008-5416, CVE-2008-0085, CVE-2008-0086,
    CVE-2008-0107 and CVE-2008-0106 to the issues addressed in MS SQL
    Express Service Pack 3.
```
```
    Column 4 of the following table lists the action required to
    remediate the vulnerability in each release, if a solution is
    available.
```
```
    VMware         Product   Running  Replace with/
    Product        Version   on       Apply Patch
    =============  ========  =======  =================
    vCenter        4.1       Windows  Update 1
    vCenter        4.0       Windows  Update 3
    VirtualCenter  2.5       Windows  affected, no patch planned
```
```
    Update Manager 4.1       Windows  Update 1
    Update Manager 4.0       Windows  Update 3
    Update Manager 1.0       Windows  affected, no patch planned
```
```
    hosted *       any       any      not affected
```
```
    ESXi           any       ESXi     not affected
```
```
    ESX            any       ESX      not affected
```
```
  * Hosted products are VMware Workstation, Player, ACE, Fusion.
```
```
 b. vCenter Apache Tomcat Management Application Credential Disclosure
```
```
    The Apache Tomcat Manager application configuration file contains
    logon credentials that can be read by unprivileged local users.
```
```
    The issue is resolved by removing the Manager application in
    vCenter 4.1 Update 1.
```
```
    If vCenter 4.1 is updated to vCenter 4.1 Update 1 the logon
    credentials are not present in the configuration file after the
    update.
```
```
    VMware would like to thank Claudio Criscione of Secure Networking
    for reporting this issue to us.
```
```
    The Common Vulnerabilities and Exposures Project (cve.mitre.org)
    has assigned the name CVE-2010-2928 to this issue.
```
```
    Column 4 of the following table lists the action required to
    remediate the vulnerability in each release, if a solution is
    available.
```
```
    VMware         Product   Running  Replace with/
    Product        Version   on       Apply Patch
    =============  ========  =======  =================
    vCenter        4.1       Windows  Update 1
    vCenter        4.0       Windows  not affected
    VirtualCenter  2.5       Windows  not affected
```
```
    hosted *       any       any      not affected
```
```
    ESXi           any       ESXi     not affected
```
```
    ESX            any       ESX      not affected
```
```
  * hosted products are VMware Workstation, Player, ACE, Fusion.
```
```
 c. vCenter Server and ESX, Oracle (Sun) JRE is updated to version
    1.6.0_21
```
```
    Oracle (Sun) JRE update to version 1.6.0_21, which addresses
    multiple security issues that existed in earlier releases of
    Oracle (Sun) JRE.
```
```
    The Common Vulnerabilities and Exposures project (cve.mitre.org)
    has assigned the following names to the security issues fixed in
    Oracle (Sun) JRE 1.6.0_19: CVE-2009-3555, CVE-2010-0082,
    CVE-2010-0084, CVE-2010-0085, CVE-2010-0087, CVE-2010-0088,
    CVE-2010-0089, CVE-2010-0090, CVE-2010-0091, CVE-2010-0092,
    CVE-2010-0093, CVE-2010-0094, CVE-2010-0095, CVE-2010-0837,
    CVE-2010-0838, CVE-2010-0839, CVE-2010-0840, CVE-2010-0841,
    CVE-2010-0842, CVE-2010-0843, CVE-2010-0844, CVE-2010-0845,
    CVE-2010-0846, CVE-2010-0847, CVE-2010-0848, CVE-2010-0849,
    CVE-2010-0850.
```
```
    The Common Vulnerabilities and Exposures project (cve.mitre.org)
    has assigned the following name to the security issue fixed in
    Oracle (Sun) JRE 1.6.0_20: CVE-2010-0886.
```
```
    Column 4 of the following table lists the action required to
    remediate the vulnerability in each release, if a solution is
    available.
```
```
    VMware         Product   Running  Replace with/
    Product        Version   on       Apply Patch
    =============  ========  =======  =================
    vCenter        4.1       Windows  Update 1
    vCenter        4.0       Windows  not applicable **
    VirtualCenter  2.5       Windows  not applicable **
```
```
    Update Manager 4.1       Windows  not applicable **
    Update Manager 4.0       Windows  not applicable **
    Update Manager 1.0       Windows  not applicable **
```
```

    hosted *       any       any      not affected
```
```
    ESXi           any       ESXi     not affected
```
```
    ESX            4.1       ESX      ESX410-201101201-SG
    ESX            4.0       ESX      not applicable **
    ESX            3.5       ESX      not applicable **
    ESX            3.0.3     ESX      not applicable **
```
```
  * hosted products are VMware Workstation, Player, ACE, Fusion.
 ** this product uses the Oracle (Sun) JRE 1.5.0 family
```
```
d. vCenter Update Manager Oracle (Sun) JRE is updated to version
   1.5.0_26
```
```
    Oracle (Sun) JRE update to version 1.5.0_26, which addresses
    multiple security issues that existed in earlier releases of
    Oracle (Sun) JRE.
```
```
    The Common Vulnerabilities and Exposures project (cve.mitre.org)
    has assigned the following names to the security issues fixed in
    Oracle (Sun) JRE 1.5.0_26: CVE-2010-3556, CVE-2010-3566,
    CVE-2010-3567, CVE-2010-3550, CVE-2010-3561, CVE-2010-3573,
    CVE-2010-3565,CVE-2010-3568, CVE-2010-3569,  CVE-2009-3555,
    CVE-2010-1321, CVE-2010-3548, CVE-2010-3551, CVE-2010-3562,
    CVE-2010-3571, CVE-2010-3554, CVE-2010-3559, CVE-2010-3572,
    CVE-2010-3553, CVE-2010-3549, CVE-2010-3557, CVE-2010-3541,
    CVE-2010-3574.
```
```
    Column 4 of the following table lists the action required to
    remediate the vulnerability in each release, if a solution is
    available.
```
```
    VMware         Product   Running  Replace with/
    Product        Version   on       Apply Patch
    =============  ========  =======  =================
    vCenter        4.1       Windows  not applicable **
    vCenter        4.0       Windows  Update 3
    VirtualCenter  2.5       Windows  affected, no patch planned
```
```
    Update Manager 4.1       Windows  Update 1
    Update Manager 4.0       Windows  Update 3
    Update Manager 1.0       Windows  affected, no patch planned
```
```
    hosted *       any       any      not affected
```
```
    ESXi           any       ESXi     not affected
```
```
    ESX            4.1       ESX      not applicable **
    ESX            4.0       ESX      ESX400-201103403-SG
    ESX            3.5       ESX      affected, no patch planned
    ESX            3.0.3     ESX      affected, no patch planned
```
```
  * hosted products are VMware Workstation, Player, ACE, Fusion.
 ** this product uses the Oracle (Sun) JRE 1.6.0 family
```
```
 e. vCenter Server and ESX Apache Tomcat updated to version 6.0.28
```
```
    Apache Tomcat updated to version 6.0.28, which addresses multiple
    security issues that existed in earlier releases of Apache Tomcat
```
```
    The Common Vulnerabilities and Exposures project (cve.mitre.org)
    has assigned the following names to the security issues fixed in
    Apache Tomcat 6.0.24: CVE-2009-2693, CVE-2009-2901, CVE-2009-2902,i
    and CVE-2009-3548.
```
```
    The Common Vulnerabilities and Exposures project (cve.mitre.org)
    has assigned the following names to the security issues fixed in
    Apache Tomcat 6.0.28: CVE-2010-2227, CVE-2010-1157.
```
```
    Column 4 of the following table lists the action required to
    remediate the vulnerability in each release, if a solution is
    available.
```
```
    VMware         Product   Running  Replace with/
    Product        Version   on       Apply Patch
    =============  ========  =======  =================
    vCenter        4.1       Windows  Update 1
    vCenter        4.0       Windows  Update 3
    VirtualCenter  2.5       Windows  not applicable **
```
```
    hosted *       any       any      not affected
```
```
    ESXi           any       ESXi     not affected
```
```
    ESX            4.1       ESX      ESX410-201101201-SG
    ESX            4.0       ESX      ESX400-201103403-SG
    ESX            3.5       ESX      not applicable **
    ESX            3.0.3     ESX      not applicable **
```
```
  * hosted products are VMware Workstation, Player, ACE, Fusion.
 ** this product uses the Apache Tomcat 5.5 family
```
```
 f. vCenter Server third party component OpenSSL updated to version
    0.9.8n
```
```
    The version of the OpenSSL library in vCenter Server is updated to
    0.9.8n.
```
```
    The Common Vulnerabilities and Exposures project (cve.mitre.org)
    has assigned the names CVE-2010-0740 and CVE-2010-0433 to the
    issues addressed in this version of OpenSSL.
```
```
    Column 4 of the following table lists the action required to
    remediate the vulnerability in each release, if a solution is
    available.
```
```
    VMware         Product   Running  Replace with/
    Product        Version   on       Apply Patch
    =============  ========  =======  =================
    vCenter        4.1       Windows  Update 1
    vCenter        4.0       Windows  Update 3
    VirtualCenter  2.5       Windows  affected, no patch planned
```
```
    hosted *       any       any      not applicable
```
```
    ESXi           any       ESXi     not applicable
```
```
    ESX            any       ESX      not applicable
```
```
  * hosted products are VMware Workstation, Player, ACE,  Fusion.
```
```
 g. ESX third party component OpenSSL updated to version 0.9.8p
```
```
    The version of the ESX OpenSSL library is updated to 0.9.8p.
```
```
    The Common Vulnerabilities and Exposures project (cve.mitre.org)
    has assigned the names CVE-2010-3864 and CVE-2010-2939 to the
    issues addressed in this update.
```
```
    Column 4 of the following table lists the action required to
    remediate the vulnerability in each release, if a solution is
    available.
```
```
    VMware         Product   Running  Replace with/
    Product        Version   on       Apply Patch
    =============  ========  =======  =================
    vCenter        any       Windows  not applicable
```
```
    hosted *       any       any      not applicable
```
```
    ESXi           4.1       ESXi     ESXi410-201101201-SG
    ESXi           4.0       ESXi     ESXi400-201103401-SG
    ESXi           3.5       ESXi     affected, patch pending
```
```
    ESX            4.1       ESX      ESX410-201101201-SG
    ESX            4.0       ESX      ESX400-201103401-SG
    ESX            3.5       ESX      affected, patch pending
    ESX            3.0.3     ESX      affected, patch pending
```
```
  * hosted products are VMware Workstation, Player, ACE, Fusion.
```
```
 h. ESXi third party component cURL updated
```
```
    The version of cURL library in ESXi is updated.
```
```
    The Common Vulnerabilities and Exposures project (cve.mitre.org)
    has assigned the name CVE-2010-0734 to the issues addressed in
    this update.
```
```
    Column 4 of the following table lists the action required to
    remediate the vulnerability in each release, if a solution is
    available.
```
```
    VMware         Product   Running  Replace with/
    Product        Version   on       Apply Patch
    =============  ========  =======  =================
    vCenter        any       Windows  not affected
```
```
    hosted *       any       any      not affected
```
```
    ESXi           4.1       ESXi     ESXi410-201101201-SG
    ESXi           4.0       ESXi     affected, patch pending
    ESXi           3.5       ESXi     affected, patch pending
```
```
    ESX            any       ESX      not applicable
```
```
  * hosted products are VMware Workstation, Player, ACE, Fusion.
```
```
 i. ESX third party component pam_krb5 updated
```
```
    The version of pam_krb5 library is updated.
```
```
    The Common Vulnerabilities and Exposures project (cve.mitre.org)
    has assigned the names CVE-2008-3825 and CVE-2009-1384 to the
    issues addressed in the update.
```
```
    Column 4 of the following table lists the action required to
    remediate the vulnerability in each release, if a solution is
    available.
```
```
    VMware         Product   Running  Replace with/
    Product        Version   on       Apply Patch
    =============  ========  =======  =================
    vCenter        any       Windows  not affected
```
```
    hosted *       any       any      not affected
```
```
    ESXi           any       ESXi     not affected
```
```
    ESX            4.1       ESX      ESX410-201101201-SG
    ESX            4.0       ESX      not affected
    ESX            3.5       ESX      not affected
    ESX            3.0.3     ESX      not affected
```
```
  * hosted products are VMware Workstation, Player, ACE, Fusion.
```
```
 j. ESX third party update for Service Console kernel
```
```
    The Service Console kernel is updated to include kernel version
    2.6.18-194.11.1.
```
```
    The Common Vulnerabilities and Exposures project (cve.mitre.org)
    has assigned the names CVE-2010-1084, CVE-2010-2066, CVE-2010-2070,
    CVE-2010-2226, CVE-2010-2248, CVE-2010-2521, CVE-2010-2524,
    CVE-2010-0008, CVE-2010-0415, CVE-2010-0437, CVE-2009-4308,
    CVE-2010-0003, CVE-2010-0007, CVE-2010-0307, CVE-2010-1086,
    CVE-2010-0410, CVE-2010-0730, CVE-2010-1085, CVE-2010-0291,
    CVE-2010-0622, CVE-2010-1087, CVE-2010-1173, CVE-2010-1437,
    CVE-2010-1088, CVE-2010-1187, CVE-2010-1436, CVE-2010-1641, and
    CVE-2010-3081 to the issues addressed in the update.
```
```
    Notes:
    - The update also addresses the 64-bit compatibility mode
    stack pointer underflow issue identified by CVE-2010-3081. This
    issue was patched in an ESX 4.1 patch prior to the release of
    ESX 4.1 Update 1 and in a previous ESX 4.0 patch release.
    - The update also addresses CVE-2010-2240 for ESX 4.0.
```
```
    Column 4 of the following table lists the action required to
    remediate the vulnerability in each release, if a solution is
    available.
```
```
    VMware         Product   Running  Replace with/
    Product        Version   on       Apply Patch
    =============  ========  =======  =================
    vCenter        any       Windows  not affected
```
```
    hosted *       any       any      not affected
```
```
    ESXi           any       ESXi     not affected
```
```
    ESX            4.1       ESX      ESX410-201101201-SG
    ESX            4.0       ESX      ESX400-201103401-SG
    ESX            3.5       ESX      not applicable
    ESX            3.0.3     ESX      not applicable
```
```
  * hosted products are VMware Workstation, Player, ACE, Fusion.
```
```

4. Solution
```
```
   Please review the patch/release notes for your product and version
   and verify the checksum of your downloaded file.
```
```
   VMware vCenter Server 4.1 Update 1 and modules
   ----------------------------------------------
   <http://downloads.vmware.com/d/info/datacenter_downloads/vmware_vsphere_4/4_0>   Release Notes:
   <http://downloads.vmware.com/support/pubs/vs_pages/vsp_pubs_esx41_vc41.html>
   File type: .iso
   md5sum: 729cf247aa5d33ceec431c86377eee1a
   sha1sum: c1e10a5fcbc1ae9d13348d43541d574c563d66f0
```
```
   File type: .zip
   md5sum: fd1441bef48a153f2807f6823790e2f0
   sha1sum: 31737a816ed1c08ab3a505fb6db2483f49ad7c19
```
```
   VMware vSphere Client
   File type: .exe
   md5sum: cb6aa91ada1289575355d79e8c2a9f8e
   sha1sum: f9e3d8eb83196ae7c31aab554e344a46b722b1e4
```
```
   vCenter Server 4.0 Update 3
   ----------------------------------------------
   <http://downloads.vmware.com/d/info/datacenter_downloads/vmware_vsphere_4/4_0>   Release Notes:
   [http://www.vmware.com/support/vsphere4/doc/vsp_vc40_u3_rel_notes.html](/support/vsphere4/doc/vsp_vc40_u3_rel_notes.html)
   File type: .iso
   md5sum: b04780df75f70621d0c8794e8773a983
   sha1sum: a9f1398306158572ea1c3d202ed8c6ad922e0764
```
```
   File type: .zip
   md5sum: bc8179a639dcc6563d7dbf968095edc7
   sha1sum: 61b6dbb1bcf3aa74503e183317a00733b0253faa
```
```
   VMware vSphere Client
   File type: .exe
   md5sum: 1b90081e422358c407ad9696c70c70f7
   sha1sum: 7ba9043421f8b529b0da08fa83458069ccac0fe9
```
```
   ESXi 4.1 Installable Update 1
   -----------------------------
   <http://downloads.vmware.com/d/info/datacenter_downloads/vmware_vsphere_4/4_0>   Release Notes:
   <http://downloads.vmware.com/support/vsphere4/doc/vsp_esxi41_u1_rel_notes.html>   <http://kb.vmware.com/kb/1027919>
```
```
   File type: .iso
   MD5SUM: d68d6c2e040a87cd04cd18c04c22c998
   SHA1SUM: bbaacc0d34503822c14f6ccfefb6a5b62d18ae64
```
```
   ESXi 4.1 Update 1 (upgrade ZIP from ESXi 4.1)
   File type: .zip
   MD5SUM: 2f1e009c046b20042fae3b7ca42a840f
   SHA1SUM: 1c9c644012dec657a705ddd3d033cbfb87a1fab1
```
```
   ESXi 4.1 Update 1 (upgrade ZIP from ESXi 4.0)
   File type: .zip
   MD5SUM: 67b924618d196dafaf268a7691bd1a0f
   SHA1SUM: 9d74b639e703259d9e49c0341158e0d4e45de516
```
```
   ESXi 4.1 Update 1 (upgrade ZIP from ESXi 3.5)
   File type: .zip
   MD5SUM: a6024b9f6c6b7b2c629696afc6d07cf4
   SHA1SUM: b3841de1a30617ac68d5a861882aa72de3a93488
```
```
   VMware Tools CD image for Linux Guest OSes
   File type: .iso
   MD5SUM: dad66fa8ece1dd121c302f45444daa70
   SHA1SUM: 56535a2cfa7799607356c6fd0a7d9f041da614af
```
```
   VMware vSphere Client
   File type: .exe
   MD5SUM: cb6aa91ada1289575355d79e8c2a9f8e
   SHA1SUM: f9e3d8eb83196ae7c31aab554e344a46b722b1e4
```
```
   ESXi Installable Update 1 contains the following security bulletins:
   ESXi410-201101201-SG.
```
```
   ESX 4.1 Update 1
   ----------------
   <http://downloads.vmware.com/d/info/datacenter_downloads/vmware_vsphere_4/4_0>   Release Notes:
   <http://downloads.vmware.com/support/vsphere4/doc/vsp_esx41_u1_rel_notes.html>   <http://kb.vmware.com/kb/1029353>
```
```
   ESX 4.1 Update 1 (DVD ISO)
   File type: .iso
   md5sum: b9a275b419a20c7bedf31c0bf64f504e
   sha1sum: 2d85edcaca8218013585e1eab00bc80db6d96e11
```
```
   ESX 4.1 Update 1 (upgrade ZIP from ESX 4.1)
   File type: .zip
   md5sum: 2d81a87e994aa2b329036f11d90b4c14
   sha1sum: c2bfc0cf7ac03d24afd5049ddbd09a865aad1798
```
```
   Pre-upgrade package for ESX 4.0 to ESX 4.1 Update 1
   File type: .zip
   md5sum: 75f8cebfd55d8a81deb57c27def963c2
   sha1sum: 889c15aa8008fe0e29439d0ab3468c2beb1c4fe2
```
```
   ESX 4.1 Update 1 (upgrade ZIP from ESX 4.0)
   File type: .zip
   md5sum: 1dc9035cd10e7e60d27e7a7aef57b4c2
   sha1sum: e6d3fb65d83a3e263d0f634a3572025854ff8922
```
```
   VMware Tools CD image for Linux Guest OSes
   File type: .iso
   md5sum: dad66fa8ece1dd121c302f45444daa70
   sha1sum: 56535a2cfa7799607356c6fd0a7d9f041da614af
```
```
   VMware vSphere Client
   File type: .exe
   md5sum: cb6aa91ada1289575355d79e8c2a9f8e
   sha1sum: f9e3d8eb83196ae7c31aab554e344a46b722b1e4
```
```
   ESX410-Update01 contains the following security bulletins:
   ESX410-201101201-SG (COS kernel, pam_krb5, cURL, OpenSSL,
   Apache Tomcat, Oracle (Sun) JRE) | <http://kb.vmware.com/kb/1027904>   ESX410-201101226-SG (glibc)      | <http://kb.vmware.com/kb/1031330>
```
```
   ESX410-Update01 also contains the following non-security bulletins
   ESX410-201101211-UG, ESX410-201101213-UG, ESX410-201101215-UG,
   ESX410-201101202-UG, ESX410-201101203-UG, ESX410-201101204-UG,
   ESX410-201101206-UG, ESX410-201101207-UG, ESX410-201101208-UG,
   ESX410-201101214-UG, ESX410-201101216-UG, ESX410-201101217-UG,
   ESX410-201101218-UG, ESX410-201101219-UG, ESX410-201101220-UG,
   ESX410-201101221-UG, ESX410-201101222-UG, ESX410-201101225-UG.
```
```
   To install an individual bulletin use esxupdate with the -b option.
```
```
   ESXi 4.0
   --------
   ESXi400-201103001
   <https://hostupdate.vmware.com/software/VUM/OFFLINE/release-274-20110303-677367/ESXi400-201103001.zip>   md5sum: a68ef31414573460cdadef4d81fb95d0
   sha1sum: 7155e60962b21b5c295a2e9412ac4a445382db31
   <http://kb.vmware.com/kb/1032823>
```
```
   ESXi400-201103001 containes the following security bulletins:
   ESXi400-201103401-SG (openssl)  | <http://kb.vmware.com/kb/1032820>
   ESXi400-201103402-SG            | <http://kb.vmware.com/kb/1032821>

   ESX 4.0
   -------
   ESX400-201103001
   <https://hostupdate.vmware.com/software/VUM/OFFLINE/release-273-20110303-574144/ESX400-201103001.zip>
   md5sum: 5b9a0cfe6c0ff1467c09c8d115910ff8
   sha1sum: 8bfb5df8066a01704eaa24e4d8a34f371816904b
   <http://kb.vmware.com/kb/1032822>
```
```
   ESX400-201103001 containes the following security bulletins:
   ESX400-201103401-SG (SLPD, openssl, COS kernel)
                                     | <http://kb.vmware.com/kb/1032814>
   ESX400-201103403-SG (JRE, Tomcat) | <http://kb.vmware.com/kb/1032815>
   ESX400-201103404-SG (pam)         | <http://kb.vmware.com/kb/1032816>   ESX400-201103405-SG (bzip2)       | <http://kb.vmware.com/kb/1032817>
   ESX400-201103406-SG (popt/rpm)    | <http://kb.vmware.com/kb/1032818>
   ESX400-201103407-SG (bind)        | <http://kb.vmware.com/kb/1032819>
```
```
5. References
```
```
   CVE numbers
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-5416>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-0085>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-0086>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-0107>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-0106>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-2928>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-3555>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0082>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0084>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0085>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0087>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0088>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0089>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0090>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0091>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0092>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0093>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0094>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0095>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0837>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0838>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0839>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0840>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0841>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0842>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0843>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0844>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0845>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0846>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0847>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0848>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0849>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0850>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0886>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-2693>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-2901>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-2902>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-3548>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-2227>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1157>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0740>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0433>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3864>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-2939>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0734>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-3825>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-1384>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1084>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-2066>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-2070>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-2226>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-2248>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-2521>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-2524>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0008>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0415>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0437>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-4308>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0003>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0007>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0307>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1086>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0410>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0730>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1085>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0291>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-0622>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1087>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1173>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1437>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1088>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1187>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1436>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1641>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3081>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3556>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3566>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3567>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3550>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3561>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3573>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3565>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3568>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3569>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-1321>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3548>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3551>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3562>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3571>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3554>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3559>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3572>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3553>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3549>
   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3557>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3541>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3574>   <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-2240>
```
```
------------------------------------------------------------------------
6. Change log
```
```
2011-02-10  VMSA-2011-0003
Initial security advisory in conjunction with the release of vCenter
Server 4.1 Update 1, vCenter Update Manager 4.1 Update 1, ESXi 4.1
Update 1, and ESX 4.1 Update 1 on 2011-02-10.
2011-03-07  VMSA-2011-0003.1
Updated advisory after release of ESX 4.0 patches on 2011-03-07.
2011-05-05  VMSA-2011-0003.2
Updated advisory after the release of vCenter Server 4.0 Update 3 and vCenter Update Manager 4.0 Update 3 on 2011-05-05.
```
```
-----------------------------------------------------------------------
7. Contact
```
```
E-mail list for product security notifications and announcements:
<http://lists.vmware.com/cgi-bin/mailman/listinfo/security-announce>
```
```
This Security Advisory is posted to the following lists:
```
```
  * security-announce at lists.vmware.com
  * bugtraq at securityfocus.com
  * full-disclosure at lists.grok.org.uk
```
```
E-mail:  security at vmware.com
PGP key at: <http://kb.vmware.com/kb/1055>
```
```
VMware Security Advisories
[http://www.vmware.com/security/advisories](/security/advisories.html)
```
```
VMware security response policy
[http://www.vmware.com/support/policies/security_response.html](/support/policies/security_response.html)
```
```
General support life cycle policy
[http://www.vmware.com/support/policies/eos.html](/support/policies/eos.html)
```
```
VMware Infrastructure support life cycle policy
[http://www.vmware.com/support/policies/eos_vi.html](/support/policies/eos_vi.html)
```
```
Copyright 2011 VMware Inc.  All rights reserved.
```

Hidden

#####

×

It appears your Broadcom Products and Services are

supported by one of our certified Support partners

Click below to be redirected to the appropriate Support

Partner Portal to request support

For non-product related issues (Support Portal / Licensing) Click HERE

Continue

#####

×

For **Technical Support** (issues with products or services)

1. Select **Technical** to be redirected to the My Entitlements page
2. Expand the product you require support on
3. Select the case icon from the case column
4. You will be redirected to the appropriate vendor portal where you can raise your technical request

For **Non-Technical Support** (issues with portal access, license keys, software downloads)

1. Select **Non-Technical** to be redirected to Broadcom's case management portal

Technical
Non-Technical

#####

×

# Access Denied

This feature has been disabled by your administrator.

#####

×

To prevent this message from showing again, please enable pop-up blockers for [support.broadcom.com](https://support.broadcom.com/)
or click Continue to proceed.

Continue

Top

* [Products](https://www.broadcom.com/products)
* [Solutions](https://www.broadcom.com/solutions)
* [Support and Services](https://www.broadcom.com/support)
* [Company](https://www.broadcom.com/)
* [How to Buy](https://www.broadcom.com/how-to-buy)

 Copyright © 2005-2024 Broadcom. All Rights Reserved. The term “Broadcom” refers to Broadcom Inc. and/or its subsidiaries.

* [Accessibility](https://www.broadcom.com/company/legal/accessibility)
* [Privacy](https://www.broadcom.com/company/legal/privacy)
* [Supplier Responsibility](https://www.broadcom.com/company/citizenship/supplier-responsibility)
* [Terms of Use](https://www.broadcom.com/company/legal/terms-of-use)
* [Site Map](https://www.broadcom.com/sitemap)



=== Content from groups.google.com_0da32e68_20250125_212307.html ===
[![](https://fonts.gstatic.com/s/i/productlogos/groups/v9/web-48dp/logo_groups_color_1x_web_48dp.png)Groups](./my-groups "Groups")ConversationsAll groups and messagesSend feedback to GoogleHelpTraining[Sign in](https://accounts.google.com/ServiceLogin?hl=en&passive=true&continue=https://groups.google.com&ec=GAZA0AM)[Groups](./my-groups "Groups")
## linux.kernel

[Conversations](./g/linux.kernel)[About](./g/linux.kernel/about)[Privacy](https://policies.google.com/privacy?hl=en_US) • [Terms](https://policies.google.com/terms?hl=en_US)

*info*Google Groups no longer supports new Usenet posts or subscriptions. Historical content remains viewable.Dismiss[Learn more](https://support.google.com/groups?p=usenet)Groups keyboard shortcuts have been updatedDismissSee shortcuts
# [PATCH 22/52] cgroups: fix 2.6.32 regression causing BUG\_ON() in cgroup\_diput()

 137 viewsSkip to first unread message![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:30:02 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Dave Anderson <ande...@redhat.com>

commit bd4f490a079730aadfaf9a728303ea0135c01945 upstream.

The LTP cgroup test suite generates a "kernel BUG at kernel/cgroup.c:790!"
here in cgroup\_diput():

/\*
 \* if we're getting rid of the cgroup, refcount should ensure
 \* that there are no pidlists left.
 \*/
 BUG\_ON(!list\_empty(&cgrp->pidlists));

The cgroup pidlist rework in 2.6.32 generates the BUG\_ON, which is caused
when pidlist\_array\_load() calls cgroup\_pidlist\_find():

(1) if a matching cgroup\_pidlist is found, it down\_write's the mutex of the
 pre-existing cgroup\_pidlist, and increments its use\_count.
(2) if no matching cgroup\_pidlist is found, then a new one is allocated, it
 down\_write's its mutex, and the use\_count is set to 0.
(3) the matching, or new, cgroup\_pidlist gets returned back to pidlist\_array\_load(),
 which increments its use\_count -- regardless whether new or pre-existing --
 and up\_write's the mutex.

So if a matching list is ever encountered by cgroup\_pidlist\_find() during
the life of a cgroup directory, it results in an inflated use\_count value,
preventing it from ever getting released by cgroup\_release\_pid\_array().
Then if the directory is subsequently removed, cgroup\_diput() hits the
BUG\_ON() when it finds that the directory's cgroup is still populated with
a pidlist.

The patch simply removes the use\_count increment when a matching pidlist
is found by cgroup\_pidlist\_find(), because it gets bumped by the calling
pidlist\_array\_load() function while still protected by the list's mutex.

Signed-off-by: Dave Anderson <ande...@redhat.com>
Reviewed-by: Li Zefan <li...@cn.fujitsu.com>
Acked-by: Ben Blum <bb...@andrew.cmu.edu>
Cc: Paul Menage <men...@google.com>
Signed-off-by: Andrew Morton <ak...@linux-foundation.org>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---
 kernel/cgroup.c | 1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/kernel/cgroup.c b/kernel/cgroup.c
index 0249f4b..1fbcc74 100644
--- a/kernel/cgroup.c
+++ b/kernel/cgroup.c
@@ -2468,7 +2468,6 @@ static struct cgroup\_pidlist \*cgroup\_pidlist\_find(struct cgroup \*cgrp,
 /\* make sure l doesn't vanish out from under us \*/
 down\_write(&l->mutex);
 mutex\_unlock(&cgrp->pidlist\_mutex);
- l->use\_count++;
 return l;
 }
 }
--
1.6.6

--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majo...@vger.kernel.org
More majordomo info at <http://vger.kernel.org/majordomo-info.html>
Please read the FAQ at <http://www.tux.org/lkml/>

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:30:03 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Zhenyu Wang <zhenyu...@intel.com>

commit e6be8d9d17bd44061116f601fe2609b3ace7aa69 upstream.

drm\_pci\_alloc() has input of address mask for setting pci dma
mask on the device, which should be properly setup by drm driver.
And leave it as a param for drm\_pci\_alloc() would cause confusion
or mistake would corrupt the correct dma mask setting, as seen on
intel hw which set wrong dma mask for hw status page. So remove
it from drm\_pci\_alloc() function.

Signed-off-by: Zhenyu Wang <zhe...@linux.intel.com>
Signed-off-by: Dave Airlie <air...@redhat.com>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/gpu/drm/ati\_pcigart.c | 10 ++++++++--
 drivers/gpu/drm/drm\_bufs.c | 4 ++--
 drivers/gpu/drm/drm\_pci.c | 8 +-------
 drivers/gpu/drm/i915/i915\_dma.c | 2 +-
 drivers/gpu/drm/i915/i915\_gem.c | 2 +-
 include/drm/drmP.h | 2 +-
 6 files changed, 14 insertions(+), 14 deletions(-)

diff --git a/drivers/gpu/drm/ati\_pcigart.c b/drivers/gpu/drm/ati\_pcigart.c
index 628eae3..a1fce68 100644
--- a/drivers/gpu/drm/ati\_pcigart.c
+++ b/drivers/gpu/drm/ati\_pcigart.c
@@ -39,8 +39,7 @@ static int drm\_ati\_alloc\_pcigart\_table(struct drm\_device \*dev,
 struct drm\_ati\_pcigart\_info \*gart\_info)
 {
 gart\_info->table\_handle = drm\_pci\_alloc(dev, gart\_info->table\_size,
- PAGE\_SIZE,
- gart\_info->table\_mask);
+ PAGE\_SIZE);
 if (gart\_info->table\_handle == NULL)
 return -ENOMEM;

@@ -112,6 +111,13 @@ int drm\_ati\_pcigart\_init(struct drm\_device \*dev, struct drm\_ati\_pcigart\_info \*ga
 if (gart\_info->gart\_table\_location == DRM\_ATI\_GART\_MAIN) {
 DRM\_DEBUG("PCI: no table in VRAM: using normal RAM\n");

+ if (pci\_set\_dma\_mask(dev->pdev, gart\_info->table\_mask)) {
+ DRM\_ERROR("fail to set dma mask to 0x%Lx\n",
+ gart\_info->table\_mask);
+ ret = 1;
+ goto done;
+ }
+
 ret = drm\_ati\_alloc\_pcigart\_table(dev, gart\_info);
 if (ret) {
 DRM\_ERROR("cannot allocate PCI GART page!\n");
diff --git a/drivers/gpu/drm/drm\_bufs.c b/drivers/gpu/drm/drm\_bufs.c
index 3d09e30..8417cc4 100644
--- a/drivers/gpu/drm/drm\_bufs.c
+++ b/drivers/gpu/drm/drm\_bufs.c
@@ -326,7 +326,7 @@ static int drm\_addmap\_core(struct drm\_device \* dev, resource\_size\_t offset,
 \* As we're limiting the address to 2^32-1 (or less),
 \* casting it down to 32 bits is no problem, but we
 \* need to point to a 64bit variable first. \*/
- dmah = drm\_pci\_alloc(dev, map->size, map->size, 0xffffffffUL);
+ dmah = drm\_pci\_alloc(dev, map->size, map->size);
 if (!dmah) {
 kfree(map);
 return -ENOMEM;
@@ -885,7 +885,7 @@ int drm\_addbufs\_pci(struct drm\_device \* dev, struct drm\_buf\_desc \* request)

 while (entry->buf\_count < count) {

- dmah = drm\_pci\_alloc(dev, PAGE\_SIZE << page\_order, 0x1000, 0xfffffffful);
+ dmah = drm\_pci\_alloc(dev, PAGE\_SIZE << page\_order, 0x1000);

 if (!dmah) {
 /\* Set count correctly so we free the proper amount. \*/
diff --git a/drivers/gpu/drm/drm\_pci.c b/drivers/gpu/drm/drm\_pci.c
index 577094f..e68ebf9 100644
--- a/drivers/gpu/drm/drm\_pci.c
+++ b/drivers/gpu/drm/drm\_pci.c
@@ -47,8 +47,7 @@
 /\*\*
 \* \brief Allocate a PCI consistent memory block, for DMA.
 \*/
-drm\_dma\_handle\_t \*drm\_pci\_alloc(struct drm\_device \* dev, size\_t size, size\_t align,
- dma\_addr\_t maxaddr)
+drm\_dma\_handle\_t \*drm\_pci\_alloc(struct drm\_device \* dev, size\_t size, size\_t align)
 {
 drm\_dma\_handle\_t \*dmah;
 #if 1
@@ -63,11 +62,6 @@ drm\_dma\_handle\_t \*drm\_pci\_alloc(struct drm\_device \* dev, size\_t size, size\_t ali
 if (align > size)
 return NULL;

- if (pci\_set\_dma\_mask(dev->pdev, maxaddr) != 0) {
- DRM\_ERROR("Setting pci dma mask failed\n");
- return NULL;
- }
-
 dmah = kmalloc(sizeof(drm\_dma\_handle\_t), GFP\_KERNEL);
 if (!dmah)
 return NULL;
diff --git a/drivers/gpu/drm/i915/i915\_dma.c b/drivers/gpu/drm/i915/i915\_dma.c
index e5b138b..4a553ad 100644
--- a/drivers/gpu/drm/i915/i915\_dma.c
+++ b/drivers/gpu/drm/i915/i915\_dma.c
@@ -123,7 +123,7 @@ static int i915\_init\_phys\_hws(struct drm\_device \*dev)
 drm\_i915\_private\_t \*dev\_priv = dev->dev\_private;
 /\* Program Hardware Status Page \*/
 dev\_priv->status\_page\_dmah =
- drm\_pci\_alloc(dev, PAGE\_SIZE, PAGE\_SIZE, 0xffffffff);
+ drm\_pci\_alloc(dev, PAGE\_SIZE, PAGE\_SIZE);

 if (!dev\_priv->status\_page\_dmah) {
 DRM\_ERROR("Can not allocate hardware status page\n");
diff --git a/drivers/gpu/drm/i915/i915\_gem.c b/drivers/gpu/drm/i915/i915\_gem.c
index 3d75c67..df2c625 100644
--- a/drivers/gpu/drm/i915/i915\_gem.c
+++ b/drivers/gpu/drm/i915/i915\_gem.c
@@ -4637,7 +4637,7 @@ int i915\_gem\_init\_phys\_object(struct drm\_device \*dev,

 phys\_obj->id = id;

- phys\_obj->handle = drm\_pci\_alloc(dev, size, 0, 0xffffffff);
+ phys\_obj->handle = drm\_pci\_alloc(dev, size, 0);
 if (!phys\_obj->handle) {
 ret = -ENOMEM;
 goto kfree\_obj;
diff --git a/include/drm/drmP.h b/include/drm/drmP.h
index 9d3d684..7ad3faa 100644
--- a/include/drm/drmP.h
+++ b/include/drm/drmP.h
@@ -1402,7 +1402,7 @@ extern int drm\_ati\_pcigart\_cleanup(struct drm\_device \*dev,
 struct drm\_ati\_pcigart\_info \* gart\_info);

 extern drm\_dma\_handle\_t \*drm\_pci\_alloc(struct drm\_device \*dev, size\_t size,
- size\_t align, dma\_addr\_t maxaddr);
+ size\_t align);
 extern void \_\_drm\_pci\_free(struct drm\_device \*dev, drm\_dma\_handle\_t \* dmah);
 extern void drm\_pci\_free(struct drm\_device \*dev, drm\_dma\_handle\_t \* dmah);

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:30:02 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Boaz Harrosh <bhar...@panasas.com>

commit efd124b999fb4d426b30675f1684521af0872789 upstream.

exofs uses simple\_write\_end() for it's .write\_end handler. But
it is not enough because simple\_write\_end() does not call
mark\_inode\_dirty() when it extends i\_size. So even if we do
call mark\_inode\_dirty at beginning of write out, with a very
long IO and a saturated system we might get the .write\_inode()
called while still extend-writing to file and miss out on the last
i\_size updates.

So override .write\_end, call simple\_write\_end(), and afterwords if
i\_size was changed call mark\_inode\_dirty().

It stands to logic that since simple\_write\_end() was the one extending
i\_size it should also call mark\_inode\_dirty(). But it looks like all
users of simple\_write\_end() are memory-bound pseudo filesystems, who
could careless about mark\_inode\_dirty(). I might submit a
warning-comment patch to simple\_write\_end() in future.

Signed-off-by: Boaz Harrosh <bhar...@panasas.com>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

fs/exofs/inode.c | 17 ++++++++++++++++-
 1 files changed, 16 insertions(+), 1 deletions(-)

diff --git a/fs/exofs/inode.c b/fs/exofs/inode.c
index 6c10f74..6f7df0f 100644
--- a/fs/exofs/inode.c
+++ b/fs/exofs/inode.c
@@ -731,13 +731,28 @@ static int exofs\_write\_begin\_export(struct file \*file,
 fsdata);
 }

+static int exofs\_write\_end(struct file \*file, struct address\_space \*mapping,
+ loff\_t pos, unsigned len, unsigned copied,
+ struct page \*page, void \*fsdata)
+{
+ struct inode \*inode = mapping->host;
+ /\* According to comment in simple\_write\_end i\_mutex is held \*/
+ loff\_t i\_size = inode->i\_size;
+ int ret;
+
+ ret = simple\_write\_end(file, mapping,pos, len, copied, page, fsdata);
+ if (i\_size != inode->i\_size)
+ mark\_inode\_dirty(inode);
+ return ret;
+}
+
 const struct address\_space\_operations exofs\_aops = {
 .readpage = exofs\_readpage,
 .readpages = exofs\_readpages,
 .writepage = exofs\_writepage,
 .writepages = exofs\_writepages,
 .write\_begin = exofs\_write\_begin\_export,
- .write\_end = simple\_write\_end,
+ .write\_end = exofs\_write\_end,
 };

 /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:30:01 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Al Viro <vi...@zeniv.linux.org.uk>

This backports the following upstream commits all as one patch:
 54f5de709984bae0d31d823ff03de755f9dcac54
 ecc1a8993751de4e82eb18640d631dae1f626bd6
 1a0ef85f84feb13f07b604fcf5b90ef7c2b5c82f
 f106af4e90eadd76cfc0b5325f659619e08fb762
 097eed103862f9c6a97f2e415e21d1134017b135
 935874141df839c706cd6cdc438e85eb69d1525e
 0ec62d290912bb4b989be7563851bc364ec73b56
 c4caa778157dbbf04116f0ac2111e389b5cd7a29
 2ea1d13f64efdf49319e86c87d9ba38c30902782
 570dcf2c15463842e384eb597a87c1e39bead99b
 564b3bffc619dcbdd160de597b0547a7017ea010
 0067bd8a55862ac9dd212bd1c4f6f5bff1ca1301
 f8b7256096a20436f6d0926747e3ac3d64c81d24
 8c7b49b3ecd48923eb64ff57e07a1cdb74782970
 9206de95b1ea68357996ec02be5db0638a0de2c1
 2c6a10161d0b5fc047b5bd81b03693b9af99fab5
 05d72faa6d13c9d857478a5d35c85db9adada685
 bb52d6694002b9d632bb355f64daa045c6293a4e
 e77414e0aad6a1b063ba5e5750c582c75327ea6a
 aa65607373a4daf2010e8c3867b6317619f3c1a3

Backport done by Greg Kroah-Hartman. Only minor tweaks were needed.

Cc: David S. Miller <da...@davemloft.net>
Cc: Hugh Dickins <hugh.d...@tiscali.co.uk>
Cc: Paul Mundt <let...@linux-sh.org>
Cc: Russell King <rmk+k...@arm.linux.org.uk>
Cc: Linus Torvalds <torv...@linux-foundation.org>
Signed-off-by: Al Viro <vi...@zeniv.linux.org.uk>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

arch/alpha/kernel/osf\_sys.c | 19 +--
 arch/arm/include/asm/mman.h | 3 +
 arch/arm/kernel/calls.S | 2 +-
 arch/arm/kernel/entry-common.S | 4 +-
 arch/arm/kernel/sys\_arm.c | 55 +-------
 arch/arm/mm/mmap.c | 3 +-
 arch/avr32/include/asm/syscalls.h | 4 -
 arch/avr32/kernel/sys\_avr32.c | 31 ----
 arch/avr32/kernel/syscall-stubs.S | 2 +-
 arch/blackfin/kernel/sys\_bfin.c | 33 ----
 arch/blackfin/mach-common/entry.S | 2 +-
 arch/cris/kernel/sys\_cris.c | 30 +----
 arch/frv/kernel/sys\_frv.c | 66 +--------
 arch/h8300/kernel/sys\_h8300.c | 83 +----------
 arch/h8300/kernel/syscalls.S | 2 +-
 arch/ia64/ia32/sys\_ia32.c | 3 +
 arch/ia64/kernel/sys\_ia64.c | 83 +----------
 arch/m32r/kernel/sys\_m32r.c | 24 ---
 arch/m32r/kernel/syscall\_table.S | 2 +-
 arch/m68k/kernel/sys\_m68k.c | 83 +---------
 arch/m68knommu/kernel/sys\_m68k.c | 38 +-----
 arch/m68knommu/kernel/syscalltable.S | 2 +-
 arch/microblaze/kernel/sys\_microblaze.c | 38 +----
 arch/microblaze/kernel/syscall\_table.S | 2 +-
 arch/mips/kernel/linux32.c | 19 +--
 arch/mips/kernel/syscall.c | 32 +----
 arch/mn10300/include/asm/mman.h | 5 +
 arch/mn10300/kernel/entry.S | 2 +-
 arch/mn10300/kernel/sys\_mn10300.c | 36 +----
 arch/parisc/kernel/sys\_parisc.c | 30 +---
 arch/powerpc/kernel/syscalls.c | 15 +--
 arch/s390/kernel/compat\_linux.c | 37 +----
 arch/s390/kernel/sys\_s390.c | 30 +----
 arch/score/kernel/sys\_score.c | 28 +---
 arch/sh/kernel/sys\_sh.c | 28 +---
 arch/sh/mm/mmap.c | 3 +-
 arch/sparc/kernel/sys\_sparc\_32.c | 64 +-------
 arch/sparc/kernel/sys\_sparc\_64.c | 50 ++-----
 arch/sparc/kernel/systbls.h | 1 -
 arch/sparc/kernel/systbls\_32.S | 4 +-
 arch/sparc/kernel/systbls\_64.S | 4 +-
 arch/um/kernel/syscall.c | 28 +---
 arch/um/sys-i386/shared/sysdep/syscalls.h | 4 -
 arch/x86/ia32/ia32entry.S | 2 +-
 arch/x86/ia32/sys\_ia32.c | 43 +-----
 arch/x86/include/asm/sys\_ia32.h | 3 -
 arch/x86/include/asm/syscalls.h | 2 -
 arch/x86/kernel/sys\_i386\_32.c | 27 +---
 arch/x86/kernel/sys\_x86\_64.c | 17 +--
 arch/x86/kernel/syscall\_table\_32.S | 2 +-
 arch/xtensa/include/asm/syscall.h | 2 -
 arch/xtensa/include/asm/unistd.h | 2 +-
 arch/xtensa/kernel/syscall.c | 25 ---
 include/linux/syscalls.h | 4 +
 ipc/shm.c | 31 ++--
 mm/mmap.c | 42 ++----
 mm/mremap.c | 241 +++++++++++++++++++----------
 mm/util.c | 44 ++++++
 58 files changed, 342 insertions(+), 1179 deletions(-)

diff --git a/arch/alpha/kernel/osf\_sys.c b/arch/alpha/kernel/osf\_sys.c
index 9a3334a..62619f2 100644
--- a/arch/alpha/kernel/osf\_sys.c
+++ b/arch/alpha/kernel/osf\_sys.c
@@ -178,25 +178,18 @@ SYSCALL\_DEFINE6(osf\_mmap, unsigned long, addr, unsigned long, len,
 unsigned long, prot, unsigned long, flags, unsigned long, fd,
 unsigned long, off)
 {
- struct file \*file = NULL;
- unsigned long ret = -EBADF;
+ unsigned long ret = -EINVAL;

 #if 0
 if (flags & (\_MAP\_HASSEMAPHORE | \_MAP\_INHERIT | \_MAP\_UNALIGNED))
 printk("%s: unimplemented OSF mmap flags %04lx\n",
 current->comm, flags);
 #endif
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- down\_write(&current->mm->mmap\_sem);
- ret = do\_mmap(file, addr, len, prot, flags, off);
- up\_write(&current->mm->mmap\_sem);
- if (file)
- fput(file);
+ if ((off + PAGE\_ALIGN(len)) < off)
+ goto out;
+ if (off & ~PAGE\_MASK)
+ goto out;
+ ret = sys\_mmap\_pgoff(addr, len, prot, flags, fd, off >> PAGE\_SHIFT);
 out:
 return ret;
 }
diff --git a/arch/arm/include/asm/mman.h b/arch/arm/include/asm/mman.h
index 8eebf89..41f99c5 100644
--- a/arch/arm/include/asm/mman.h
+++ b/arch/arm/include/asm/mman.h
@@ -1 +1,4 @@
 #include <asm-generic/mman.h>
+
+#define arch\_mmap\_check(addr, len, flags) \
+ (((flags) & MAP\_FIXED && (addr) < FIRST\_USER\_ADDRESS) ? -EINVAL : 0)
diff --git a/arch/arm/kernel/calls.S b/arch/arm/kernel/calls.S
index fafce1b..4f07168 100644
--- a/arch/arm/kernel/calls.S
+++ b/arch/arm/kernel/calls.S
@@ -172,7 +172,7 @@
 /\* 160 \*/ CALL(sys\_sched\_get\_priority\_min)
 CALL(sys\_sched\_rr\_get\_interval)
 CALL(sys\_nanosleep)
- CALL(sys\_arm\_mremap)
+ CALL(sys\_mremap)
 CALL(sys\_setresuid16)
 /\* 165 \*/ CALL(sys\_getresuid16)
 CALL(sys\_ni\_syscall) /\* vm86 \*/
diff --git a/arch/arm/kernel/entry-common.S b/arch/arm/kernel/entry-common.S
index f0fe95b..2c1db77 100644
--- a/arch/arm/kernel/entry-common.S
+++ b/arch/arm/kernel/entry-common.S
@@ -416,12 +416,12 @@ sys\_mmap2:
 tst r5, #PGOFF\_MASK
 moveq r5, r5, lsr #PAGE\_SHIFT - 12
 streq r5, [sp, #4]
- beq do\_mmap2
+ beq sys\_mmap\_pgoff
 mov r0, #-EINVAL
 mov pc, lr
 #else
 str r5, [sp, #4]
- b do\_mmap2
+ b sys\_mmap\_pgoff
 #endif
 ENDPROC(sys\_mmap2)

diff --git a/arch/arm/kernel/sys\_arm.c b/arch/arm/kernel/sys\_arm.c
index 78ecaac..ae4027b 100644
--- a/arch/arm/kernel/sys\_arm.c
+++ b/arch/arm/kernel/sys\_arm.c
@@ -28,41 +28,6 @@
 #include <linux/ipc.h>
 #include <linux/uaccess.h>

-extern unsigned long do\_mremap(unsigned long addr, unsigned long old\_len,
- unsigned long new\_len, unsigned long flags,
- unsigned long new\_addr);
-
-/\* common code for old and new mmaps \*/
-inline long do\_mmap2(
- unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- int error = -EINVAL;
- struct file \* file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
-
- if (flags & MAP\_FIXED && addr < FIRST\_USER\_ADDRESS)
- goto out;
-
- error = -EBADF;
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
 struct mmap\_arg\_struct {
 unsigned long addr;
 unsigned long len;
@@ -84,29 +49,11 @@ asmlinkage int old\_mmap(struct mmap\_arg\_struct \_\_user \*arg)
 if (a.offset & ~PAGE\_MASK)
 goto out;

- error = do\_mmap2(a.addr, a.len, a.prot, a.flags, a.fd, a.offset >> PAGE\_SHIFT);
+ error = sys\_mmap\_pgoff(a.addr, a.len, a.prot, a.flags, a.fd, a.offset >> PAGE\_SHIFT);
 out:
 return error;
 }

-asmlinkage unsigned long
-sys\_arm\_mremap(unsigned long addr, unsigned long old\_len,
- unsigned long new\_len, unsigned long flags,
- unsigned long new\_addr)
-{
- unsigned long ret = -EINVAL;
-
- if (flags & MREMAP\_FIXED && new\_addr < FIRST\_USER\_ADDRESS)
- goto out;
-
- down\_write(&current->mm->mmap\_sem);
- ret = do\_mremap(addr, old\_len, new\_len, flags, new\_addr);
- up\_write(&current->mm->mmap\_sem);
-
-out:
- return ret;
-}
-
 /\*
 \* Perform the select(nd, in, out, ex, tv) and mmap() system
 \* calls.
diff --git a/arch/arm/mm/mmap.c b/arch/arm/mm/mmap.c
index 2b79964..f5abc51 100644
--- a/arch/arm/mm/mmap.c
+++ b/arch/arm/mm/mmap.c
@@ -54,7 +54,8 @@ arch\_get\_unmapped\_area(struct file \*filp, unsigned long addr,
 \* We enforce the MAP\_FIXED case.
 \*/
 if (flags & MAP\_FIXED) {
- if (aliasing && flags & MAP\_SHARED && addr & (SHMLBA - 1))
+ if (aliasing && flags & MAP\_SHARED &&
+ (addr - (pgoff << PAGE\_SHIFT)) & (SHMLBA - 1))
 return -EINVAL;
 return addr;
 }
diff --git a/arch/avr32/include/asm/syscalls.h b/arch/avr32/include/asm/syscalls.h
index 483d666..66a1972 100644
--- a/arch/avr32/include/asm/syscalls.h
+++ b/arch/avr32/include/asm/syscalls.h
@@ -29,10 +29,6 @@ asmlinkage int sys\_sigaltstack(const stack\_t \_\_user \*, stack\_t \_\_user \*,
 struct pt\_regs \*);
 asmlinkage int sys\_rt\_sigreturn(struct pt\_regs \*);

-/\* kernel/sys\_avr32.c \*/
-asmlinkage long sys\_mmap2(unsigned long, unsigned long, unsigned long,
- unsigned long, unsigned long, off\_t);
-
 /\* mm/cache.c \*/
 asmlinkage int sys\_cacheflush(int, void \_\_user \*, size\_t);

diff --git a/arch/avr32/kernel/sys\_avr32.c b/arch/avr32/kernel/sys\_avr32.c
index 5d2daea..459349b 100644
--- a/arch/avr32/kernel/sys\_avr32.c
+++ b/arch/avr32/kernel/sys\_avr32.c
@@ -5,39 +5,8 @@
 \* it under the terms of the GNU General Public License version 2 as
 \* published by the Free Software Foundation.
 \*/
-#include <linux/errno.h>
-#include <linux/fs.h>
-#include <linux/file.h>
-#include <linux/mm.h>
 #include <linux/unistd.h>

-#include <asm/mman.h>
-#include <asm/uaccess.h>
-#include <asm/syscalls.h>
-
-asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, off\_t offset)
-{
- int error = -EBADF;
- struct file \*file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- return error;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, offset);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
- return error;
-}
-
 int kernel\_execve(const char \*file, char \*\*argv, char \*\*envp)
 {
 register long scno asm("r8") = \_\_NR\_execve;
diff --git a/arch/avr32/kernel/syscall-stubs.S b/arch/avr32/kernel/syscall-stubs.S
index f7244cd..0447a3e 100644
--- a/arch/avr32/kernel/syscall-stubs.S
+++ b/arch/avr32/kernel/syscall-stubs.S
@@ -61,7 +61,7 @@ \_\_sys\_execve:
 \_\_sys\_mmap2:
 pushm lr
 st.w --sp, ARG6
- call sys\_mmap2
+ call sys\_mmap\_pgoff
 sub sp, -4
 popm pc

diff --git a/arch/blackfin/kernel/sys\_bfin.c b/arch/blackfin/kernel/sys\_bfin.c
index afcef12..2e7f8e1 100644
--- a/arch/blackfin/kernel/sys\_bfin.c
+++ b/arch/blackfin/kernel/sys\_bfin.c
@@ -22,39 +22,6 @@
 #include <asm/cacheflush.h>
 #include <asm/dma.h>

-/\* common code for old and new mmaps \*/
-static inline long
-do\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- int error = -EBADF;
- struct file \*file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
- out:
- return error;
-}
-
-asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- return do\_mmap2(addr, len, prot, flags, fd, pgoff);
-}
-
 asmlinkage void \*sys\_sram\_alloc(size\_t size, unsigned long flags)
 {
 return sram\_alloc\_with\_lsl(size, flags);
diff --git a/arch/blackfin/mach-common/entry.S b/arch/blackfin/mach-common/entry.S
index 94a0375..1d8f00a 100644
--- a/arch/blackfin/mach-common/entry.S
+++ b/arch/blackfin/mach-common/entry.S
@@ -1422,7 +1422,7 @@ ENTRY(\_sys\_call\_table)
 .long \_sys\_ni\_syscall /\* streams2 \*/
 .long \_sys\_vfork /\* 190 \*/
 .long \_sys\_getrlimit
- .long \_sys\_mmap2
+ .long \_sys\_mmap\_pgoff
 .long \_sys\_truncate64
 .long \_sys\_ftruncate64
 .long \_sys\_stat64 /\* 195 \*/
diff --git a/arch/cris/kernel/sys\_cris.c b/arch/cris/kernel/sys\_cris.c
index 2ad962c..c2bbb1a 100644
--- a/arch/cris/kernel/sys\_cris.c
+++ b/arch/cris/kernel/sys\_cris.c
@@ -26,31 +26,6 @@
 #include <asm/uaccess.h>
 #include <asm/segment.h>

-/\* common code for old and new mmaps \*/
-static inline long
-do\_mmap2(unsigned long addr, unsigned long len, unsigned long prot,
- unsigned long flags, unsigned long fd, unsigned long pgoff)
-{
- int error = -EBADF;
- struct file \* file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
 asmlinkage unsigned long old\_mmap(unsigned long \_\_user \*args)
 {
 unsigned long buffer[6];
@@ -63,7 +38,7 @@ asmlinkage unsigned long old\_mmap(unsigned long \_\_user \*args)
 if (buffer[5] & ~PAGE\_MASK) /\* verify that offset is on page boundary \*/
 goto out;

- err = do\_mmap2(buffer[0], buffer[1], buffer[2], buffer[3],
+ err = sys\_mmap\_pgoff(buffer[0], buffer[1], buffer[2], buffer[3],
 buffer[4], buffer[5] >> PAGE\_SHIFT);
 out:
 return err;
@@ -73,7 +48,8 @@ asmlinkage long
 sys\_mmap2(unsigned long addr, unsigned long len, unsigned long prot,
 unsigned long flags, unsigned long fd, unsigned long pgoff)
 {
- return do\_mmap2(addr, len, prot, flags, fd, pgoff);
+ /\* bug(?): 8Kb pages here \*/
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd, pgoff);
 }

 /\*
diff --git a/arch/frv/kernel/sys\_frv.c b/arch/frv/kernel/sys\_frv.c
index 2b6b528..1d3d4c9 100644
--- a/arch/frv/kernel/sys\_frv.c
+++ b/arch/frv/kernel/sys\_frv.c
@@ -31,9 +31,6 @@ asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,
 unsigned long prot, unsigned long flags,
 unsigned long fd, unsigned long pgoff)
 {
- int error = -EBADF;
- struct file \* file = NULL;
-
 /\* As with sparc32, make sure the shift for mmap2 is constant
 (12), no matter what PAGE\_SIZE we have.... \*/

@@ -41,69 +38,10 @@ asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,
 trying to map something we can't \*/
 if (pgoff & ((1 << (PAGE\_SHIFT - 12)) - 1))
 return -EINVAL;
- pgoff >>= PAGE\_SHIFT - 12;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
-#if 0 /\* DAVIDM - do we want this \*/
-struct mmap\_arg\_struct64 {
- \_\_u32 addr;
- \_\_u32 len;
- \_\_u32 prot;
- \_\_u32 flags;
- \_\_u64 offset; /\* 64 bits \*/
- \_\_u32 fd;
-};
-
-asmlinkage long sys\_mmap64(struct mmap\_arg\_struct64 \*arg)
-{
- int error = -EFAULT;
- struct file \* file = NULL;
- struct mmap\_arg\_struct64 a;
- unsigned long pgoff;
-
- if (copy\_from\_user(&a, arg, sizeof(a)))
- return -EFAULT;
-
- if ((long)a.offset & ~PAGE\_MASK)
- return -EINVAL;
-
- pgoff = a.offset >> PAGE\_SHIFT;
- if ((a.offset >> PAGE\_SHIFT) != pgoff)
- return -EINVAL;
-
- if (!(a.flags & MAP\_ANONYMOUS)) {
- error = -EBADF;
- file = fget(a.fd);
- if (!file)
- goto out;
- }
- a.flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);

- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, a.addr, a.len, a.prot, a.flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
- if (file)
- fput(file);
-out:
- return error;
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd,
+ pgoff >> (PAGE\_SHIFT - 12));
 }
-#endif

 /\*
 \* sys\_ipc() is the de-multiplexer for the SysV IPC calls..
diff --git a/arch/h8300/kernel/sys\_h8300.c b/arch/h8300/kernel/sys\_h8300.c
index 8cb5d73..b5969db 100644
--- a/arch/h8300/kernel/sys\_h8300.c
+++ b/arch/h8300/kernel/sys\_h8300.c
@@ -26,39 +26,6 @@
 #include <asm/traps.h>
 #include <asm/unistd.h>

-/\* common code for old and new mmaps \*/
-static inline long do\_mmap2(
- unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- int error = -EBADF;
- struct file \* file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
-asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- return do\_mmap2(addr, len, prot, flags, fd, pgoff);
-}
-
 /\*
 \* Perform the select(nd, in, out, ex, tv) and mmap() system
 \* calls. Linux/m68k cloned Linux/i386, which didn't use to be able to
@@ -87,57 +54,11 @@ asmlinkage int old\_mmap(struct mmap\_arg\_struct \*arg)
 if (a.offset & ~PAGE\_MASK)
 goto out;

- a.flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
-
- error = do\_mmap2(a.addr, a.len, a.prot, a.flags, a.fd, a.offset >> PAGE\_SHIFT);
-out:
- return error;
-}
-
-#if 0 /\* DAVIDM - do we want this \*/
-struct mmap\_arg\_struct64 {
- \_\_u32 addr;
- \_\_u32 len;
- \_\_u32 prot;
- \_\_u32 flags;
- \_\_u64 offset; /\* 64 bits \*/
- \_\_u32 fd;
-};
-
-asmlinkage long sys\_mmap64(struct mmap\_arg\_struct64 \*arg)
-{
- int error = -EFAULT;
- struct file \* file = NULL;
- struct mmap\_arg\_struct64 a;
- unsigned long pgoff;
-
- if (copy\_from\_user(&a, arg, sizeof(a)))
- return -EFAULT;
-
- if ((long)a.offset & ~PAGE\_MASK)
- return -EINVAL;
-
- pgoff = a.offset >> PAGE\_SHIFT;
- if ((a.offset >> PAGE\_SHIFT) != pgoff)
- return -EINVAL;
-
- if (!(a.flags & MAP\_ANONYMOUS)) {
- error = -EBADF;
- file = fget(a.fd);
- if (!file)
- goto out;
- }
- a.flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, a.addr, a.len, a.prot, a.flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
- if (file)
- fput(file);
+ error = sys\_mmap\_pgoff(a.addr, a.len, a.prot, a.flags, a.fd,
+ a.offset >> PAGE\_SHIFT);
 out:
 return error;
 }
-#endif

 struct sel\_arg\_struct {
 unsigned long n;
diff --git a/arch/h8300/kernel/syscalls.S b/arch/h8300/kernel/syscalls.S
index 4eb67fa..2d69881 100644
--- a/arch/h8300/kernel/syscalls.S
+++ b/arch/h8300/kernel/syscalls.S
@@ -206,7 +206,7 @@ SYMBOL\_NAME\_LABEL(sys\_call\_table)
 .long SYMBOL\_NAME(sys\_ni\_syscall) /\* streams2 \*/
 .long SYMBOL\_NAME(sys\_vfork) /\* 190 \*/
 .long SYMBOL\_NAME(sys\_getrlimit)
- .long SYMBOL\_NAME(sys\_mmap2)
+ .long SYMBOL\_NAME(sys\_mmap\_pgoff)
 .long SYMBOL\_NAME(sys\_truncate64)
 .long SYMBOL\_NAME(sys\_ftruncate64)
 .long SYMBOL\_NAME(sys\_stat64) /\* 195 \*/
diff --git a/arch/ia64/ia32/sys\_ia32.c b/arch/ia64/ia32/sys\_ia32.c
index 625ed8f..e031ee8 100644
--- a/arch/ia64/ia32/sys\_ia32.c
+++ b/arch/ia64/ia32/sys\_ia32.c
@@ -858,6 +858,9 @@ ia32\_do\_mmap (struct file \*file, unsigned long addr, unsigned long len, int prot

 prot = get\_prot32(prot);

+ if (flags & MAP\_HUGETLB)
+ return -ENOMEM;
+
 #if PAGE\_SHIFT > IA32\_PAGE\_SHIFT
 mutex\_lock(&ia32\_mmap\_mutex);
 {
diff --git a/arch/ia64/kernel/sys\_ia64.c b/arch/ia64/kernel/sys\_ia64.c
index 92ed83f..609d500 100644
--- a/arch/ia64/kernel/sys\_ia64.c
+++ b/arch/ia64/kernel/sys\_ia64.c
@@ -100,51 +100,7 @@ sys\_getpagesize (void)
 asmlinkage unsigned long
 ia64\_brk (unsigned long brk)
 {
- unsigned long rlim, retval, newbrk, oldbrk;
- struct mm\_struct \*mm = current->mm;
-
- /\*
- \* Most of this replicates the code in sys\_brk() except for an additional safety
- \* check and the clearing of r8. However, we can't call sys\_brk() because we need
- \* to acquire the mmap\_sem before we can do the test...
- \*/
- down\_write(&mm->mmap\_sem);
-
- if (brk < mm->end\_code)
- goto out;
- newbrk = PAGE\_ALIGN(brk);
- oldbrk = PAGE\_ALIGN(mm->brk);
- if (oldbrk == newbrk)
- goto set\_brk;
-
- /\* Always allow shrinking brk. \*/
- if (brk <= mm->brk) {
- if (!do\_munmap(mm, newbrk, oldbrk-newbrk))
- goto set\_brk;
- goto out;
- }
-
- /\* Check against unimplemented/unmapped addresses: \*/
- if ((newbrk - oldbrk) > RGN\_MAP\_LIMIT || REGION\_OFFSET(newbrk) > RGN\_MAP\_LIMIT)
- goto out;
-
- /\* Check against rlimit.. \*/
- rlim = current->signal->rlim[RLIMIT\_DATA].rlim\_cur;
- if (rlim < RLIM\_INFINITY && brk - mm->start\_data > rlim)
- goto out;
-
- /\* Check against existing mmap mappings. \*/
- if (find\_vma\_intersection(mm, oldbrk, newbrk+PAGE\_SIZE))
- goto out;
-
- /\* Ok, looks good - let it rip. \*/
- if (do\_brk(oldbrk, newbrk-oldbrk) != oldbrk)
- goto out;
-set\_brk:
- mm->brk = brk;
-out:
- retval = mm->brk;
- up\_write(&mm->mmap\_sem);
+ unsigned long retval = sys\_brk(brk);
 force\_successful\_syscall\_return();
 return retval;
 }
@@ -185,39 +141,6 @@ int ia64\_mmap\_check(unsigned long addr, unsigned long len,
 return 0;
 }

-static inline unsigned long
-do\_mmap2 (unsigned long addr, unsigned long len, int prot, int flags, int fd, unsigned long pgoff)
-{
- struct file \*file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- return -EBADF;
-
- if (!file->f\_op || !file->f\_op->mmap) {
- addr = -ENODEV;
- goto out;
- }
- }
-
- /\* Careful about overflows.. \*/
- len = PAGE\_ALIGN(len);
- if (!len || len > TASK\_SIZE) {
- addr = -EINVAL;
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- addr = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
-out: if (file)
- fput(file);
- return addr;
-}
-
 /\*
 \* mmap2() is like mmap() except that the offset is expressed in units
 \* of PAGE\_SIZE (instead of bytes). This allows to mmap2() (pieces
@@ -226,7 +149,7 @@ out: if (file)
 asmlinkage unsigned long
 sys\_mmap2 (unsigned long addr, unsigned long len, int prot, int flags, int fd, long pgoff)
 {
- addr = do\_mmap2(addr, len, prot, flags, fd, pgoff);
+ addr = sys\_mmap\_pgoff(addr, len, prot, flags, fd, pgoff);
 if (!IS\_ERR((void \*) addr))
 force\_successful\_syscall\_return();
 return addr;
@@ -238,7 +161,7 @@ sys\_mmap (unsigned long addr, unsigned long len, int prot, int flags, int fd, lo
 if (offset\_in\_page(off) != 0)
 return -EINVAL;

- addr = do\_mmap2(addr, len, prot, flags, fd, off >> PAGE\_SHIFT);
+ addr = sys\_mmap\_pgoff(addr, len, prot, flags, fd, off >> PAGE\_SHIFT);
 if (!IS\_ERR((void \*) addr))
 force\_successful\_syscall\_return();
 return addr;
diff --git a/arch/m32r/kernel/sys\_m32r.c b/arch/m32r/kernel/sys\_m32r.c
index 305ac85..d3c865c 100644
--- a/arch/m32r/kernel/sys\_m32r.c
+++ b/arch/m32r/kernel/sys\_m32r.c
@@ -76,30 +76,6 @@ asmlinkage int sys\_tas(int \_\_user \*addr)
 return oldval;
 }

-asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- int error = -EBADF;
- struct file \*file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
 /\*
 \* sys\_ipc() is the de-multiplexer for the SysV IPC calls..
 \*
diff --git a/arch/m32r/kernel/syscall\_table.S b/arch/m32r/kernel/syscall\_table.S
index aa3bf4c..60536e2 100644
--- a/arch/m32r/kernel/syscall\_table.S
+++ b/arch/m32r/kernel/syscall\_table.S
@@ -191,7 +191,7 @@ ENTRY(sys\_call\_table)
 .long sys\_ni\_syscall /\* streams2 \*/
 .long sys\_vfork /\* 190 \*/
 .long sys\_getrlimit
- .long sys\_mmap2
+ .long sys\_mmap\_pgoff
 .long sys\_truncate64
 .long sys\_ftruncate64
 .long sys\_stat64 /\* 195 \*/
diff --git a/arch/m68k/kernel/sys\_m68k.c b/arch/m68k/kernel/sys\_m68k.c
index 7deb402..218f441 100644
--- a/arch/m68k/kernel/sys\_m68k.c
+++ b/arch/m68k/kernel/sys\_m68k.c
@@ -29,37 +29,16 @@
 #include <asm/page.h>
 #include <asm/unistd.h>

-/\* common code for old and new mmaps \*/
-static inline long do\_mmap2(
- unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- int error = -EBADF;
- struct file \* file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
 asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,
 unsigned long prot, unsigned long flags,
 unsigned long fd, unsigned long pgoff)
 {
- return do\_mmap2(addr, len, prot, flags, fd, pgoff);
+ /\*
+ \* This is wrong for sun3 - there PAGE\_SIZE is 8Kb,
+ \* so we need to shift the argument down by 1; m68k mmap64(3)
+ \* (in libc) expects the last argument of mmap2 in 4Kb units.
+ \*/
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd, pgoff);
 }

 /\*
@@ -90,57 +69,11 @@ asmlinkage int old\_mmap(struct mmap\_arg\_struct \_\_user \*arg)
 if (a.offset & ~PAGE\_MASK)
 goto out;

- a.flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
-
- error = do\_mmap2(a.addr, a.len, a.prot, a.flags, a.fd, a.offset >> PAGE\_SHIFT);
-out:
- return error;
-}
-
-#if 0
-struct mmap\_arg\_struct64 {
- \_\_u32 addr;
- \_\_u32 len;
- \_\_u32 prot;
- \_\_u32 flags;
- \_\_u64 offset; /\* 64 bits \*/
- \_\_u32 fd;
-};
-
-asmlinkage long sys\_mmap64(struct mmap\_arg\_struct64 \*arg)
-{
- int error = -EFAULT;
- struct file \* file = NULL;
- struct mmap\_arg\_struct64 a;
- unsigned long pgoff;
-
- if (copy\_from\_user(&a, arg, sizeof(a)))
- return -EFAULT;
-
- if ((long)a.offset & ~PAGE\_MASK)
- return -EINVAL;
-
- pgoff = a.offset >> PAGE\_SHIFT;
- if ((a.offset >> PAGE\_SHIFT) != pgoff)
- return -EINVAL;
-
- if (!(a.flags & MAP\_ANONYMOUS)) {
- error = -EBADF;
- file = fget(a.fd);
- if (!file)
- goto out;
- }
- a.flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, a.addr, a.len, a.prot, a.flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
- if (file)
- fput(file);
+ error = sys\_mmap\_pgoff(a.addr, a.len, a.prot, a.flags, a.fd,
+ a.offset >> PAGE\_SHIFT);
 out:
 return error;
 }
-#endif

 struct sel\_arg\_struct {
 unsigned long n;
diff --git a/arch/m68knommu/kernel/sys\_m68k.c b/arch/m68knommu/kernel/sys\_m68k.c
index efdd090..b67cbc7 100644
--- a/arch/m68knommu/kernel/sys\_m68k.c
+++ b/arch/m68knommu/kernel/sys\_m68k.c
@@ -27,39 +27,6 @@
 #include <asm/cacheflush.h>
 #include <asm/unistd.h>

-/\* common code for old and new mmaps \*/
-static inline long do\_mmap2(
- unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- int error = -EBADF;
- struct file \* file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
-asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- return do\_mmap2(addr, len, prot, flags, fd, pgoff);
-}
-
 /\*
 \* Perform the select(nd, in, out, ex, tv) and mmap() system
 \* calls. Linux/m68k cloned Linux/i386, which didn't use to be able to
@@ -88,9 +55,8 @@ asmlinkage int old\_mmap(struct mmap\_arg\_struct \*arg)
 if (a.offset & ~PAGE\_MASK)
 goto out;

- a.flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
-
- error = do\_mmap2(a.addr, a.len, a.prot, a.flags, a.fd, a.offset >> PAGE\_SHIFT);
+ error = sys\_mmap\_pgoff(a.addr, a.len, a.prot, a.flags, a.fd,
+ a.offset >> PAGE\_SHIFT);
 out:
 return error;
 }
diff --git a/arch/m68knommu/kernel/syscalltable.S b/arch/m68knommu/kernel/syscalltable.S
index 23535cc..486837e 100644
--- a/arch/m68knommu/kernel/syscalltable.S
+++ b/arch/m68knommu/kernel/syscalltable.S
@@ -210,7 +210,7 @@ ENTRY(sys\_call\_table)
 .long sys\_ni\_syscall /\* streams2 \*/
 .long sys\_vfork /\* 190 \*/
 .long sys\_getrlimit
- .long sys\_mmap2
+ .long sys\_mmap\_pgoff
 .long sys\_truncate64
 .long sys\_ftruncate64
 .long sys\_stat64 /\* 195 \*/
diff --git a/arch/microblaze/kernel/sys\_microblaze.c b/arch/microblaze/kernel/sys\_microblaze.c
index 07cabed..9f3c205 100644
--- a/arch/microblaze/kernel/sys\_microblaze.c
+++ b/arch/microblaze/kernel/sys\_microblaze.c
@@ -62,46 +62,14 @@ out:
 return error;
 }

-asmlinkage long
-sys\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- struct file \*file = NULL;
- int ret = -EBADF;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file) {
- printk(KERN\_INFO "no fd in mmap\r\n");
- goto out;
- }
- }
-
- down\_write(&current->mm->mmap\_sem);
- ret = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
- if (file)
- fput(file);
-out:
- return ret;
-}
-
 asmlinkage long sys\_mmap(unsigned long addr, unsigned long len,
 unsigned long prot, unsigned long flags,
 unsigned long fd, off\_t pgoff)
 {
- int err = -EINVAL;
-
- if (pgoff & ~PAGE\_MASK) {
- printk(KERN\_INFO "no pagemask in mmap\r\n");
- goto out;
- }
+ if (pgoff & ~PAGE\_MASK)
+ return -EINVAL;

- err = sys\_mmap2(addr, len, prot, flags, fd, pgoff >> PAGE\_SHIFT);
-out:
- return err;
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd, pgoff >> PAGE\_SHIFT);
 }

 /\*
diff --git a/arch/microblaze/kernel/syscall\_table.S b/arch/microblaze/kernel/syscall\_table.S
index ecec191..eb50ce5 100644
--- a/arch/microblaze/kernel/syscall\_table.S
+++ b/arch/microblaze/kernel/syscall\_table.S
@@ -196,7 +196,7 @@ ENTRY(sys\_call\_table)
 .long sys\_ni\_syscall /\* reserved for streams2 \*/
 .long sys\_vfork /\* 190 \*/
 .long sys\_getrlimit
- .long sys\_mmap2 /\* mmap2 \*/
+ .long sys\_mmap\_pgoff /\* mmap2 \*/
 .long sys\_truncate64
 .long sys\_ftruncate64
 .long sys\_stat64 /\* 195 \*/
diff --git a/arch/mips/kernel/linux32.c b/arch/mips/kernel/linux32.c
index b77fefa..ea4a746 100644
--- a/arch/mips/kernel/linux32.c
+++ b/arch/mips/kernel/linux32.c
@@ -67,28 +67,13 @@ SYSCALL\_DEFINE6(32\_mmap2, unsigned long, addr, unsigned long, len,
 unsigned long, prot, unsigned long, flags, unsigned long, fd,
 unsigned long, pgoff)
 {
- struct file \* file = NULL;
 unsigned long error;

 error = -EINVAL;
 if (pgoff & (~PAGE\_MASK >> 12))
 goto out;
- pgoff >>= PAGE\_SHIFT-12;
-
- if (!(flags & MAP\_ANONYMOUS)) {
- error = -EBADF;
- file = fget(fd);
- if (!file)
- goto out;
- }
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
- if (file)
- fput(file);
-
+ error = sys\_mmap\_pgoff(addr, len, prot, flags, fd,
+ pgoff >> (PAGE\_SHIFT-12));
 out:
 return error;
 }
diff --git a/arch/mips/kernel/syscall.c b/arch/mips/kernel/syscall.c
index fe0d798..3f7f466 100644
--- a/arch/mips/kernel/syscall.c
+++ b/arch/mips/kernel/syscall.c
@@ -93,7 +93,8 @@ unsigned long arch\_get\_unmapped\_area(struct file \*filp, unsigned long addr,
 \* We do not accept a shared mapping if it would violate
 \* cache aliasing constraints.
 \*/
- if ((flags & MAP\_SHARED) && (addr & shm\_align\_mask))
+ if ((flags & MAP\_SHARED) &&
+ ((addr - (pgoff << PAGE\_SHIFT)) & shm\_align\_mask))
 return -EINVAL;
 return addr;
 }
@@ -129,31 +130,6 @@ unsigned long arch\_get\_unmapped\_area(struct file \*filp, unsigned long addr,
 }
 }

-/\* common code for old and new mmaps \*/
-static inline unsigned long
-do\_mmap2(unsigned long addr, unsigned long len, unsigned long prot,
- unsigned long flags, unsigned long fd, unsigned long pgoff)
-{
- unsigned long error = -EBADF;
- struct file \* file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
 SYSCALL\_DEFINE6(mips\_mmap, unsigned long, addr, unsigned long, len,
 unsigned long, prot, unsigned long, flags, unsigned long,
 fd, off\_t, offset)
@@ -164,7 +140,7 @@ SYSCALL\_DEFINE6(mips\_mmap, unsigned long, addr, unsigned long, len,
 if (offset & ~PAGE\_MASK)
 goto out;

- result = do\_mmap2(addr, len, prot, flags, fd, offset >> PAGE\_SHIFT);
+ result = sys\_mmap\_pgoff(addr, len, prot, flags, fd, offset >> PAGE\_SHIFT);

 out:
 return result;
@@ -177,7 +153,7 @@ SYSCALL\_DEFINE6(mips\_mmap2, unsigned long, addr, unsigned long, len,
 if (pgoff & (~PAGE\_MASK >> 12))
 return -EINVAL;

- return do\_mmap2(addr, len, prot, flags, fd, pgoff >> (PAGE\_SHIFT-12));
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd, pgoff >> (PAGE\_SHIFT-12));
 }

 save\_static\_function(sys\_fork);
diff --git a/arch/mn10300/include/asm/mman.h b/arch/mn10300/include/asm/mman.h
index 8eebf89..db5c53d 100644
--- a/arch/mn10300/include/asm/mman.h
+++ b/arch/mn10300/include/asm/mman.h
@@ -1 +1,6 @@
 #include <asm-generic/mman.h>
+
+#define MIN\_MAP\_ADDR PAGE\_SIZE /\* minimum fixed mmap address \*/
+
+#define arch\_mmap\_check(addr, len, flags) \
+ (((flags) & MAP\_FIXED && (addr) < MIN\_MAP\_ADDR) ? -EINVAL : 0)
diff --git a/arch/mn10300/kernel/entry.S b/arch/mn10300/kernel/entry.S
index a94e7ea..c9ee6c0 100644
--- a/arch/mn10300/kernel/entry.S
+++ b/arch/mn10300/kernel/entry.S
@@ -578,7 +578,7 @@ ENTRY(sys\_call\_table)
 .long sys\_ni\_syscall /\* reserved for streams2 \*/
 .long sys\_vfork /\* 190 \*/
 .long sys\_getrlimit
- .long sys\_mmap2
+ .long sys\_mmap\_pgoff
 .long sys\_truncate64
 .long sys\_ftruncate64
 .long sys\_stat64 /\* 195 \*/
diff --git a/arch/mn10300/kernel/sys\_mn10300.c b/arch/mn10300/kernel/sys\_mn10300.c
index 8ca5af0..17cc6ce 100644
--- a/arch/mn10300/kernel/sys\_mn10300.c
+++ b/arch/mn10300/kernel/sys\_mn10300.c
@@ -23,47 +23,13 @@

 #include <asm/uaccess.h>

-#define MIN\_MAP\_ADDR PAGE\_SIZE /\* minimum fixed mmap address \*/
-
-/\*
- \* memory mapping syscall
- \*/
-asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- struct file \*file = NULL;
- long error = -EINVAL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
-
- if (flags & MAP\_FIXED && addr < MIN\_MAP\_ADDR)
- goto out;
-
- error = -EBADF;
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
 asmlinkage long old\_mmap(unsigned long addr, unsigned long len,
 unsigned long prot, unsigned long flags,
 unsigned long fd, unsigned long offset)
 {
 if (offset & ~PAGE\_MASK)
 return -EINVAL;
- return sys\_mmap2(addr, len, prot, flags, fd, offset >> PAGE\_SHIFT);
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd, offset >> PAGE\_SHIFT);
 }

 struct sel\_arg\_struct {
diff --git a/arch/parisc/kernel/sys\_parisc.c b/arch/parisc/kernel/sys\_parisc.c
index 71b3195..9147391 100644
--- a/arch/parisc/kernel/sys\_parisc.c
+++ b/arch/parisc/kernel/sys\_parisc.c
@@ -110,37 +110,14 @@ unsigned long arch\_get\_unmapped\_area(struct file \*filp, unsigned long addr,
 return addr;
 }

-static unsigned long do\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags, unsigned long fd,
- unsigned long pgoff)
-{
- struct file \* file = NULL;
- unsigned long error = -EBADF;
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file != NULL)
- fput(file);
-out:
- return error;
-}
-
 asmlinkage unsigned long sys\_mmap2(unsigned long addr, unsigned long len,
 unsigned long prot, unsigned long flags, unsigned long fd,
 unsigned long pgoff)
 {
 /\* Make sure the shift for mmap2 is constant (12), no matter what PAGE\_SIZE
 we have. \*/
- return do\_mmap2(addr, len, prot, flags, fd, pgoff >> (PAGE\_SHIFT - 12));
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd,
+ pgoff >> (PAGE\_SHIFT - 12));
 }

 asmlinkage unsigned long sys\_mmap(unsigned long addr, unsigned long len,
@@ -148,7 +125,8 @@ asmlinkage unsigned long sys\_mmap(unsigned long addr, unsigned long len,
 unsigned long offset)
 {
 if (!(offset & ~PAGE\_MASK)) {
- return do\_mmap2(addr, len, prot, flags, fd, offset >> PAGE\_SHIFT);
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd,
+ offset >> PAGE\_SHIFT);
 } else {
 return -EINVAL;
 }
diff --git a/arch/powerpc/kernel/syscalls.c b/arch/powerpc/kernel/syscalls.c
index c04832c..3370e62 100644
--- a/arch/powerpc/kernel/syscalls.c
+++ b/arch/powerpc/kernel/syscalls.c
@@ -140,7 +140,6 @@ static inline unsigned long do\_mmap2(unsigned long addr, size\_t len,
 unsigned long prot, unsigned long flags,
 unsigned long fd, unsigned long off, int shift)
 {
- struct file \* file = NULL;
 unsigned long ret = -EINVAL;

 if (!arch\_validate\_prot(prot))
@@ -151,20 +150,8 @@ static inline unsigned long do\_mmap2(unsigned long addr, size\_t len,
 goto out;
 off >>= shift;
 }
-
- ret = -EBADF;
- if (!(flags & MAP\_ANONYMOUS)) {
- if (!(file = fget(fd)))
- goto out;
- }
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);

- down\_write(&current->mm->mmap\_sem);
- ret = do\_mmap\_pgoff(file, addr, len, prot, flags, off);
- up\_write(&current->mm->mmap\_sem);
- if (file)
- fput(file);
+ ret = sys\_mmap\_pgoff(addr, len, prot, flags, fd, off);
 out:
 return ret;
 }
diff --git a/arch/s390/kernel/compat\_linux.c b/arch/s390/kernel/compat\_linux.c
index 0debcec..9c746c0 100644
--- a/arch/s390/kernel/compat\_linux.c
+++ b/arch/s390/kernel/compat\_linux.c
@@ -683,38 +683,6 @@ struct mmap\_arg\_struct\_emu31 {
 u32 offset;
 };

-/\* common code for old and new mmaps \*/
-static inline long do\_mmap2(
- unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- struct file \* file = NULL;
- unsigned long error = -EBADF;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- if (!IS\_ERR((void \*) error) && error + len >= 0x80000000ULL) {
- /\* Result is out of bounds. \*/
- do\_munmap(current->mm, addr, len);
- error = -ENOMEM;
- }
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
-
 asmlinkage unsigned long
 old32\_mmap(struct mmap\_arg\_struct\_emu31 \_\_user \*arg)
 {
@@ -728,7 +696,8 @@ old32\_mmap(struct mmap\_arg\_struct\_emu31 \_\_user \*arg)
 if (a.offset & ~PAGE\_MASK)
 goto out;

- error = do\_mmap2(a.addr, a.len, a.prot, a.flags, a.fd, a.offset >> PAGE\_SHIFT);
+ error = sys\_mmap\_pgoff(a.addr, a.len, a.prot, a.flags, a.fd,
+ a.offset >> PAGE\_SHIFT);
 out:
 return error;
 }
@@ -741,7 +710,7 @@ sys32\_mmap2(struct mmap\_arg\_struct\_emu31 \_\_user \*arg)

 if (copy\_from\_user(&a, arg, sizeof(a)))
 goto out;
- error = do\_mmap2(a.addr, a.len, a.prot, a.flags, a.fd, a.offset);
+ error = sys\_mmap\_pgoff(a.addr, a.len, a.prot, a.flags, a.fd, a.offset);
 out:
 return error;
 }
diff --git a/arch/s390/kernel/sys\_s390.c b/arch/s390/kernel/sys\_s390.c
index e9d94f6..86a74c9 100644
--- a/arch/s390/kernel/sys\_s390.c
+++ b/arch/s390/kernel/sys\_s390.c
@@ -32,32 +32,6 @@
 #include <asm/uaccess.h>
 #include "entry.h"

-/\* common code for old and new mmaps \*/
-static inline long do\_mmap2(
- unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- long error = -EBADF;
- struct file \* file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
 /\*
 \* Perform the select(nd, in, out, ex, tv) and mmap() system
 \* calls. Linux for S/390 isn't able to handle more than 5
@@ -81,7 +55,7 @@ SYSCALL\_DEFINE1(mmap2, struct mmap\_arg\_struct \_\_user \*, arg)

 if (copy\_from\_user(&a, arg, sizeof(a)))
 goto out;
- error = do\_mmap2(a.addr, a.len, a.prot, a.flags, a.fd, a.offset);
+ error = sys\_mmap\_pgoff(a.addr, a.len, a.prot, a.flags, a.fd, a.offset);
 out:
 return error;
 }
@@ -98,7 +72,7 @@ SYSCALL\_DEFINE1(s390\_old\_mmap, struct mmap\_arg\_struct \_\_user \*, arg)
 if (a.offset & ~PAGE\_MASK)
 goto out;

- error = do\_mmap2(a.addr, a.len, a.prot, a.flags, a.fd, a.offset >> PAGE\_SHIFT);
+ error = sys\_mmap\_pgoff(a.addr, a.len, a.prot, a.flags, a.fd, a.offset >> PAGE\_SHIFT);
 out:
 return error;
 }
diff --git a/arch/score/kernel/sys\_score.c b/arch/score/kernel/sys\_score.c
index 0012494..856ed68 100644
--- a/arch/score/kernel/sys\_score.c
+++ b/arch/score/kernel/sys\_score.c
@@ -36,34 +36,16 @@ asmlinkage long
 sys\_mmap2(unsigned long addr, unsigned long len, unsigned long prot,
 unsigned long flags, unsigned long fd, unsigned long pgoff)
 {
- int error = -EBADF;
- struct file \*file = NULL;
-
- if (pgoff & (~PAGE\_MASK >> 12))
- return -EINVAL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- return error;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-
- return error;
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd, pgoff);
 }

 asmlinkage long
 sys\_mmap(unsigned long addr, unsigned long len, unsigned long prot,
- unsigned long flags, unsigned long fd, off\_t pgoff)
+ unsigned long flags, unsigned long fd, off\_t offset)
 {
- return sys\_mmap2(addr, len, prot, flags, fd, pgoff >> PAGE\_SHIFT);
+ if (unlikely(offset & ~PAGE\_MASK))
+ return -EINVAL;
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd, offset >> PAGE\_SHIFT);
 }

 asmlinkage long
diff --git a/arch/sh/kernel/sys\_sh.c b/arch/sh/kernel/sys\_sh.c
index 8aa5d1c..71399cd 100644
--- a/arch/sh/kernel/sys\_sh.c
+++ b/arch/sh/kernel/sys\_sh.c
@@ -28,37 +28,13 @@
 #include <asm/cacheflush.h>
 #include <asm/cachectl.h>

-static inline long
-do\_mmap2(unsigned long addr, unsigned long len, unsigned long prot,
- unsigned long flags, int fd, unsigned long pgoff)
-{
- int error = -EBADF;
- struct file \*file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
 asmlinkage int old\_mmap(unsigned long addr, unsigned long len,
 unsigned long prot, unsigned long flags,
 int fd, unsigned long off)
 {
 if (off & ~PAGE\_MASK)
 return -EINVAL;
- return do\_mmap2(addr, len, prot, flags, fd, off>>PAGE\_SHIFT);
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd, off>>PAGE\_SHIFT);
 }

 asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,
@@ -74,7 +50,7 @@ asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,

 pgoff >>= PAGE\_SHIFT - 12;

- return do\_mmap2(addr, len, prot, flags, fd, pgoff);
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd, pgoff);
 }

 /\*
diff --git a/arch/sh/mm/mmap.c b/arch/sh/mm/mmap.c
index d2984fa..afeb710 100644
--- a/arch/sh/mm/mmap.c
+++ b/arch/sh/mm/mmap.c
@@ -54,7 +54,8 @@ unsigned long arch\_get\_unmapped\_area(struct file \*filp, unsigned long addr,
 /\* We do not accept a shared mapping if it would violate
 \* cache aliasing constraints.
 \*/
- if ((flags & MAP\_SHARED) && (addr & shm\_align\_mask))
+ if ((flags & MAP\_SHARED) &&
+ ((addr - (pgoff << PAGE\_SHIFT)) & shm\_align\_mask))
 return -EINVAL;
 return addr;
 }
diff --git a/arch/sparc/kernel/sys\_sparc\_32.c b/arch/sparc/kernel/sys\_sparc\_32.c
index 03035c8..3a82e65 100644
--- a/arch/sparc/kernel/sys\_sparc\_32.c
+++ b/arch/sparc/kernel/sys\_sparc\_32.c
@@ -45,7 +45,8 @@ unsigned long arch\_get\_unmapped\_area(struct file \*filp, unsigned long addr, unsi
 /\* We do not accept a shared mapping if it would violate
 \* cache aliasing constraints.
 \*/
- if ((flags & MAP\_SHARED) && (addr & (SHMLBA - 1)))
+ if ((flags & MAP\_SHARED) &&
+ ((addr - (pgoff << PAGE\_SHIFT)) & (SHMLBA - 1)))
 return -EINVAL;
 return addr;
 }
@@ -79,15 +80,6 @@ unsigned long arch\_get\_unmapped\_area(struct file \*filp, unsigned long addr, unsi
 }
 }

-asmlinkage unsigned long sparc\_brk(unsigned long brk)
-{
- if(ARCH\_SUN4C) {
- if ((brk & 0xe0000000) != (current->mm->brk & 0xe0000000))
- return current->mm->brk;
- }
- return sys\_brk(brk);
-}
-
 /\*
 \* sys\_pipe() is the normal C calling standard for creating
 \* a pipe. It's not the way unix traditionally does this, though.
@@ -234,31 +226,6 @@ int sparc\_mmap\_check(unsigned long addr, unsigned long len)
 }

 /\* Linux version of mmap \*/
-static unsigned long do\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags, unsigned long fd,
- unsigned long pgoff)
-{
- struct file \* file = NULL;
- unsigned long retval = -EBADF;
-
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- len = PAGE\_ALIGN(len);
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
-
- down\_write(&current->mm->mmap\_sem);
- retval = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return retval;
-}

 asmlinkage unsigned long sys\_mmap2(unsigned long addr, unsigned long len,
 unsigned long prot, unsigned long flags, unsigned long fd,
@@ -266,14 +233,16 @@ asmlinkage unsigned long sys\_mmap2(unsigned long addr, unsigned long len,
 {
 /\* Make sure the shift for mmap2 is constant (12), no matter what PAGE\_SIZE
 we have. \*/
- return do\_mmap2(addr, len, prot, flags, fd, pgoff >> (PAGE\_SHIFT - 12));
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd,
+ pgoff >> (PAGE\_SHIFT - 12));
 }

 asmlinkage unsigned long sys\_mmap(unsigned long addr, unsigned long len,
 unsigned long prot, unsigned long flags, unsigned long fd,
 unsigned long off)
 {
- return do\_mmap2(addr, len, prot, flags, fd, off >> PAGE\_SHIFT);
+ /\* no alignment check? \*/
+ return sys\_mmap\_pgoff(addr, len, prot, flags, fd, off >> PAGE\_SHIFT);
 }

 long sparc\_remap\_file\_pages(unsigned long start, unsigned long size,
@@ -287,27 +256,6 @@ long sparc\_remap\_file\_pages(unsigned long start, unsigned long size,
 (pgoff >> (PAGE\_SHIFT - 12)), flags);
 }

-extern unsigned long do\_mremap(unsigned long addr,
- unsigned long old\_len, unsigned long new\_len,
- unsigned long flags, unsigned long new\_addr);
-
-asmlinkage unsigned long sparc\_mremap(unsigned long addr,
- unsigned long old\_len, unsigned long new\_len,
- unsigned long flags, unsigned long new\_addr)
-{
- unsigned long ret = -EINVAL;
-
- if (unlikely(sparc\_mmap\_check(addr, old\_len)))
- goto out;
- if (unlikely(sparc\_mmap\_check(new\_addr, new\_len)))
- goto out;
- down\_write(&current->mm->mmap\_sem);
- ret = do\_mremap(addr, old\_len, new\_len, flags, new\_addr);
- up\_write(&current->mm->mmap\_sem);
-out:
- return ret;
-}
-
 /\* we come to here via sys\_nis\_syscall so it can setup the regs argument \*/
 asmlinkage unsigned long
 c\_sys\_nis\_syscall (struct pt\_regs \*regs)
diff --git a/arch/sparc/kernel/sys\_sparc\_64.c b/arch/sparc/kernel/sys\_sparc\_64.c
index e2d1024..cfa0e19 100644
--- a/arch/sparc/kernel/sys\_sparc\_64.c
+++ b/arch/sparc/kernel/sys\_sparc\_64.c
@@ -317,10 +317,14 @@ bottomup:
 unsigned long get\_fb\_unmapped\_area(struct file \*filp, unsigned long orig\_addr, unsigned long len, unsigned long pgoff, unsigned long flags)
 {
 unsigned long align\_goal, addr = -ENOMEM;
+ unsigned long (\*get\_area)(struct file \*, unsigned long,
+ unsigned long, unsigned long, unsigned long);
+
+ get\_area = current->mm->get\_unmapped\_area;

 if (flags & MAP\_FIXED) {
 /\* Ok, don't mess with it. \*/
- return get\_unmapped\_area(NULL, orig\_addr, len, pgoff, flags);
+ return get\_area(NULL, orig\_addr, len, pgoff, flags);
 }
 flags &= ~MAP\_SHARED;

@@ -333,7 +337,7 @@ unsigned long get\_fb\_unmapped\_area(struct file \*filp, unsigned long orig\_addr, u
 align\_goal = (64UL \* 1024);

 do {
- addr = get\_unmapped\_area(NULL, orig\_addr, len + (align\_goal - PAGE\_SIZE), pgoff, flags);
+ addr = get\_area(NULL, orig\_addr, len + (align\_goal - PAGE\_SIZE), pgoff, flags);
 if (!(addr & ~PAGE\_MASK)) {
 addr = (addr + (align\_goal - 1UL)) & ~(align\_goal - 1UL);
 break;
@@ -351,7 +355,7 @@ unsigned long get\_fb\_unmapped\_area(struct file \*filp, unsigned long orig\_addr, u
 \* be obtained.
 \*/
 if (addr & ~PAGE\_MASK)
- addr = get\_unmapped\_area(NULL, orig\_addr, len, pgoff, flags);
+ addr = get\_area(NULL, orig\_addr, len, pgoff, flags);

 return addr;
 }
@@ -399,18 +403,6 @@ void arch\_pick\_mmap\_layout(struct mm\_struct \*mm)
 }
 }

-SYSCALL\_DEFINE1(sparc\_brk, unsigned long, brk)
-{
- /\* People could try to be nasty and use ta 0x6d in 32bit programs \*/
- if (test\_thread\_flag(TIF\_32BIT) && brk >= STACK\_TOP32)
- return current->mm->brk;
-
- if (unlikely(straddles\_64bit\_va\_hole(current->mm->brk, brk)))
- return current->mm->brk;
-
- return sys\_brk(brk);
-}
-
 /\*
 \* sys\_pipe() is the normal C calling standard for creating
 \* a pipe. It's not the way unix traditionally does this, though.
@@ -568,23 +560,13 @@ SYSCALL\_DEFINE6(mmap, unsigned long, addr, unsigned long, len,
 unsigned long, prot, unsigned long, flags, unsigned long, fd,
 unsigned long, off)
 {
- struct file \* file = NULL;
- unsigned long retval = -EBADF;
-
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- len = PAGE\_ALIGN(len);
+ unsigned long retval = -EINVAL;

- down\_write(&current->mm->mmap\_sem);
- retval = do\_mmap(file, addr, len, prot, flags, off);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
+ if ((off + PAGE\_ALIGN(len)) < off)
+ goto out;
+ if (off & ~PAGE\_MASK)
+ goto out;
+ retval = sys\_mmap\_pgoff(addr, len, prot, flags, fd, off >> PAGE\_SHIFT);
 out:
 return retval;
 }
@@ -614,12 +596,6 @@ SYSCALL\_DEFINE5(64\_mremap, unsigned long, addr, unsigned long, old\_len,

 if (test\_thread\_flag(TIF\_32BIT))
 goto out;
- if (unlikely(new\_len >= VA\_EXCLUDE\_START))
- goto out;
- if (unlikely(sparc\_mmap\_check(addr, old\_len)))
- goto out;
- if (unlikely(sparc\_mmap\_check(new\_addr, new\_len)))
- goto out;

 down\_write(&current->mm->mmap\_sem);
 ret = do\_mremap(addr, old\_len, new\_len, flags, new\_addr);
diff --git a/arch/sparc/kernel/systbls.h b/arch/sparc/kernel/systbls.h
index a63c5d2..d2f999a 100644
--- a/arch/sparc/kernel/systbls.h
+++ b/arch/sparc/kernel/systbls.h
@@ -9,7 +9,6 @@
 struct new\_utsname;

 extern asmlinkage unsigned long sys\_getpagesize(void);
-extern asmlinkage unsigned long sparc\_brk(unsigned long brk);
 extern asmlinkage long sparc\_pipe(struct pt\_regs \*regs);
 extern asmlinkage long sys\_ipc(unsigned int call, int first,
 unsigned long second,
diff --git a/arch/sparc/kernel/systbls\_32.S b/arch/sparc/kernel/systbls\_32.S
index 0f1658d..14f950a 100644
--- a/arch/sparc/kernel/systbls\_32.S
+++ b/arch/sparc/kernel/systbls\_32.S
@@ -19,7 +19,7 @@ sys\_call\_table:
 /\*0\*/ .long sys\_restart\_syscall, sys\_exit, sys\_fork, sys\_read, sys\_write
 /\*5\*/ .long sys\_open, sys\_close, sys\_wait4, sys\_creat, sys\_link
 /\*10\*/ .long sys\_unlink, sunos\_execv, sys\_chdir, sys\_chown16, sys\_mknod
-/\*15\*/ .long sys\_chmod, sys\_lchown16, sparc\_brk, sys\_nis\_syscall, sys\_lseek
+/\*15\*/ .long sys\_chmod, sys\_lchown16, sys\_brk, sys\_nis\_syscall, sys\_lseek
 /\*20\*/ .long sys\_getpid, sys\_capget, sys\_capset, sys\_setuid16, sys\_getuid16
 /\*25\*/ .long sys\_vmsplice, sys\_ptrace, sys\_alarm, sys\_sigaltstack, sys\_pause
 /\*30\*/ .long sys\_utime, sys\_lchown, sys\_fchown, sys\_access, sys\_nice
@@ -67,7 +67,7 @@ sys\_call\_table:
 /\*235\*/ .long sys\_fstatfs64, sys\_llseek, sys\_mlock, sys\_munlock, sys\_mlockall
 /\*240\*/ .long sys\_munlockall, sys\_sched\_setparam, sys\_sched\_getparam, sys\_sched\_setscheduler, sys\_sched\_getscheduler
 /\*245\*/ .long sys\_sched\_yield, sys\_sched\_get\_priority\_max, sys\_sched\_get\_priority\_min, sys\_sched\_rr\_get\_interval, sys\_nanosleep
-/\*250\*/ .long sparc\_mremap, sys\_sysctl, sys\_getsid, sys\_fdatasync, sys\_nfsservctl
+/\*250\*/ .long sys\_mremap, sys\_sysctl, sys\_getsid, sys\_fdatasync, sys\_nfsservctl
 /\*255\*/ .long sys\_sync\_file\_range, sys\_clock\_settime, sys\_clock\_gettime, sys\_clock\_getres, sys\_clock\_nanosleep
 /\*260\*/ .long sys\_sched\_getaffinity, sys\_sched\_setaffinity, sys\_timer\_settime, sys\_timer\_gettime, sys\_timer\_getoverrun
 /\*265\*/ .long sys\_timer\_delete, sys\_timer\_create, sys\_nis\_syscall, sys\_io\_setup, sys\_io\_destroy
diff --git a/arch/sparc/kernel/systbls\_64.S b/arch/sparc/kernel/systbls\_64.S
index 009825f..f63c871 100644
--- a/arch/sparc/kernel/systbls\_64.S
+++ b/arch/sparc/kernel/systbls\_64.S
@@ -21,7 +21,7 @@ sys\_call\_table32:
 /\*0\*/ .word sys\_restart\_syscall, sys32\_exit, sys\_fork, sys\_read, sys\_write
 /\*5\*/ .word sys32\_open, sys\_close, sys32\_wait4, sys32\_creat, sys\_link
 /\*10\*/ .word sys\_unlink, sunos\_execv, sys\_chdir, sys\_chown16, sys32\_mknod
-/\*15\*/ .word sys\_chmod, sys\_lchown16, sys\_sparc\_brk, sys32\_perfctr, sys32\_lseek
+/\*15\*/ .word sys\_chmod, sys\_lchown16, sys\_brk, sys32\_perfctr, sys32\_lseek
 /\*20\*/ .word sys\_getpid, sys\_capget, sys\_capset, sys\_setuid16, sys\_getuid16
 /\*25\*/ .word sys32\_vmsplice, compat\_sys\_ptrace, sys\_alarm, sys32\_sigaltstack, sys\_pause
 /\*30\*/ .word compat\_sys\_utime, sys\_lchown, sys\_fchown, sys32\_access, sys32\_nice
@@ -96,7 +96,7 @@ sys\_call\_table:
 /\*0\*/ .word sys\_restart\_syscall, sparc\_exit, sys\_fork, sys\_read, sys\_write
 /\*5\*/ .word sys\_open, sys\_close, sys\_wait4, sys\_creat, sys\_link
 /\*10\*/ .word sys\_unlink, sys\_nis\_syscall, sys\_chdir, sys\_chown, sys\_mknod
-/\*15\*/ .word sys\_chmod, sys\_lchown, sys\_sparc\_brk, sys\_perfctr, sys\_lseek
+/\*15\*/ .word sys\_chmod, sys\_lchown, sys\_brk, sys\_perfctr, sys\_lseek
 /\*20\*/ .word sys\_getpid, sys\_capget, sys\_capset, sys\_setuid, sys\_getuid
 /\*25\*/ .word sys\_vmsplice, sys\_ptrace, sys\_alarm, sys\_sigaltstack, sys\_nis\_syscall
 /\*30\*/ .word sys\_utime, sys\_nis\_syscall, sys\_nis\_syscall, sys\_access, sys\_nice
diff --git a/arch/um/kernel/syscall.c b/arch/um/kernel/syscall.c
index a4625c7..cccab85 100644
--- a/arch/um/kernel/syscall.c
+++ b/arch/um/kernel/syscall.c
@@ -8,6 +8,7 @@
 #include "linux/mm.h"
 #include "linux/sched.h"
 #include "linux/utsname.h"
+#include "linux/syscalls.h"
 #include "asm/current.h"
 #include "asm/mman.h"
 #include "asm/uaccess.h"
@@ -37,31 +38,6 @@ long sys\_vfork(void)
 return ret;
 }

-/\* common code for old and new mmaps \*/
-long sys\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- long error = -EBADF;
- struct file \* file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
- out:
- return error;
-}
-
 long old\_mmap(unsigned long addr, unsigned long len,
 unsigned long prot, unsigned long flags,
 unsigned long fd, unsigned long offset)
@@ -70,7 +46,7 @@ long old\_mmap(unsigned long addr, unsigned long len,
 if (offset & ~PAGE\_MASK)
 goto out;

- err = sys\_mmap2(addr, len, prot, flags, fd, offset >> PAGE\_SHIFT);
+ err = sys\_mmap\_pgoff(addr, len, prot, flags, fd, offset >> PAGE\_SHIFT);
 out:
 return err;
 }
diff --git a/arch/um/sys-i386/shared/sysdep/syscalls.h b/arch/um/sys-i386/shared/sysdep/syscalls.h
index 9056981..e778767 100644
--- a/arch/um/sys-i386/shared/sysdep/syscalls.h
+++ b/arch/um/sys-i386/shared/sysdep/syscalls.h
@@ -20,7 +20,3 @@ extern syscall\_handler\_t \*sys\_call\_table[];
 #define EXECUTE\_SYSCALL(syscall, regs) \
 ((long (\*)(struct syscall\_args)) \
 (\*sys\_call\_table[syscall]))(SYSCALL\_ARGS(&regs->regs))
-
-extern long sys\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff);
diff --git a/arch/x86/ia32/ia32entry.S b/arch/x86/ia32/ia32entry.S
index 581b056..5294d84 100644
--- a/arch/x86/ia32/ia32entry.S
+++ b/arch/x86/ia32/ia32entry.S
@@ -696,7 +696,7 @@ ia32\_sys\_call\_table:
 .quad quiet\_ni\_syscall /\* streams2 \*/
 .quad stub32\_vfork /\* 190 \*/
 .quad compat\_sys\_getrlimit
- .quad sys32\_mmap2
+ .quad sys\_mmap\_pgoff
 .quad sys32\_truncate64
 .quad sys32\_ftruncate64
 .quad sys32\_stat64 /\* 195 \*/
diff --git a/arch/x86/ia32/sys\_ia32.c b/arch/x86/ia32/sys\_ia32.c
index 9f55271..016218c 100644
--- a/arch/x86/ia32/sys\_ia32.c
+++ b/arch/x86/ia32/sys\_ia32.c
@@ -155,9 +155,6 @@ struct mmap\_arg\_struct {
 asmlinkage long sys32\_mmap(struct mmap\_arg\_struct \_\_user \*arg)
 {
 struct mmap\_arg\_struct a;
- struct file \*file = NULL;
- unsigned long retval;
- struct mm\_struct \*mm ;

 if (copy\_from\_user(&a, arg, sizeof(a)))
 return -EFAULT;
@@ -165,22 +162,8 @@ asmlinkage long sys32\_mmap(struct mmap\_arg\_struct \_\_user \*arg)
 if (a.offset & ~PAGE\_MASK)
 return -EINVAL;

- if (!(a.flags & MAP\_ANONYMOUS)) {
- file = fget(a.fd);
- if (!file)
- return -EBADF;
- }
-
- mm = current->mm;
- down\_write(&mm->mmap\_sem);
- retval = do\_mmap\_pgoff(file, a.addr, a.len, a.prot, a.flags,
+ return sys\_mmap\_pgoff(a.addr, a.len, a.prot, a.flags, a.fd,
 a.offset>>PAGE\_SHIFT);
- if (file)
- fput(file);
-
- up\_write(&mm->mmap\_sem);
-
- return retval;
 }

 asmlinkage long sys32\_mprotect(unsigned long start, size\_t len,
@@ -539,30 +522,6 @@ asmlinkage long sys32\_sendfile(int out\_fd, int in\_fd,
 return ret;
 }

-asmlinkage long sys32\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- struct mm\_struct \*mm = current->mm;
- unsigned long error;
- struct file \*file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- return -EBADF;
- }
-
- down\_write(&mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&mm->mmap\_sem);
-
- if (file)
- fput(file);
- return error;
-}
-
 asmlinkage long sys32\_olduname(struct oldold\_utsname \_\_user \*name)
 {
 char \*arch = "x86\_64";
diff --git a/arch/x86/include/asm/sys\_ia32.h b/arch/x86/include/asm/sys\_ia32.h
index 72a6dcd..77c1184 100644
--- a/arch/x86/include/asm/sys\_ia32.h
+++ b/arch/x86/include/asm/sys\_ia32.h
@@ -62,9 +62,6 @@ asmlinkage long sys32\_pwrite(unsigned int, char \_\_user \*, u32, u32, u32);
 asmlinkage long sys32\_personality(unsigned long);
 asmlinkage long sys32\_sendfile(int, int, compat\_off\_t \_\_user \*, s32);

-asmlinkage long sys32\_mmap2(unsigned long, unsigned long, unsigned long,
- unsigned long, unsigned long, unsigned long);
-
 struct oldold\_utsname;
 struct old\_utsname;
 asmlinkage long sys32\_olduname(struct oldold\_utsname \_\_user \*);
diff --git a/arch/x86/include/asm/syscalls.h b/arch/x86/include/asm/syscalls.h
index 372b76e..1bb6e39 100644
--- a/arch/x86/include/asm/syscalls.h
+++ b/arch/x86/include/asm/syscalls.h
@@ -55,8 +55,6 @@ struct sel\_arg\_struct;
 struct oldold\_utsname;
 struct old\_utsname;

-asmlinkage long sys\_mmap2(unsigned long, unsigned long, unsigned long,
- unsigned long, unsigned long, unsigned long);
 asmlinkage int old\_mmap(struct mmap\_arg\_struct \_\_user \*);
 asmlinkage int old\_select(struct sel\_arg\_struct \_\_user \*);
 asmlinkage int sys\_ipc(uint, int, int, int, void \_\_user \*, long);
diff --git a/arch/x86/kernel/sys\_i386\_32.c b/arch/x86/kernel/sys\_i386\_32.c
index 1884a8d..dee1ff7 100644
--- a/arch/x86/kernel/sys\_i386\_32.c
+++ b/arch/x86/kernel/sys\_i386\_32.c
@@ -24,31 +24,6 @@

 #include <asm/syscalls.h>

-asmlinkage long sys\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- int error = -EBADF;
- struct file \*file = NULL;
- struct mm\_struct \*mm = current->mm;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
 /\*
 \* Perform the select(nd, in, out, ex, tv) and mmap() system
 \* calls. Linux/i386 didn't use to be able to handle more than
@@ -77,7 +52,7 @@ asmlinkage int old\_mmap(struct mmap\_arg\_struct \_\_user \*arg)
 if (a.offset & ~PAGE\_MASK)
 goto out;

- err = sys\_mmap2(a.addr, a.len, a.prot, a.flags,
+ err = sys\_mmap\_pgoff(a.addr, a.len, a.prot, a.flags,
 a.fd, a.offset >> PAGE\_SHIFT);
 out:
 return err;
diff --git a/arch/x86/kernel/sys\_x86\_64.c b/arch/x86/kernel/sys\_x86\_64.c
index 45e00eb..8aa2057 100644
--- a/arch/x86/kernel/sys\_x86\_64.c
+++ b/arch/x86/kernel/sys\_x86\_64.c
@@ -23,26 +23,11 @@ SYSCALL\_DEFINE6(mmap, unsigned long, addr, unsigned long, len,
 unsigned long, fd, unsigned long, off)
 {
 long error;
- struct file \*file;
-
 error = -EINVAL;
 if (off & ~PAGE\_MASK)
 goto out;

- error = -EBADF;
- file = NULL;
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, off >> PAGE\_SHIFT);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
+ error = sys\_mmap\_pgoff(addr, len, prot, flags, fd, off >> PAGE\_SHIFT);
 out:
 return error;
 }
diff --git a/arch/x86/kernel/syscall\_table\_32.S b/arch/x86/kernel/syscall\_table\_32.S
index 0157cd2..76d70a4 100644
--- a/arch/x86/kernel/syscall\_table\_32.S
+++ b/arch/x86/kernel/syscall\_table\_32.S
@@ -191,7 +191,7 @@ ENTRY(sys\_call\_table)
 .long sys\_ni\_syscall /\* reserved for streams2 \*/
 .long ptregs\_vfork /\* 190 \*/
 .long sys\_getrlimit
- .long sys\_mmap2
+ .long sys\_mmap\_pgoff
 .long sys\_truncate64
 .long sys\_ftruncate64
 .long sys\_stat64 /\* 195 \*/
diff --git a/arch/xtensa/include/asm/syscall.h b/arch/xtensa/include/asm/syscall.h
index 05cebf8..4352dbe 100644
--- a/arch/xtensa/include/asm/syscall.h
+++ b/arch/xtensa/include/asm/syscall.h
@@ -13,8 +13,6 @@ struct sigaction;
 asmlinkage long xtensa\_execve(char\*, char\*\*, char\*\*, struct pt\_regs\*);
 asmlinkage long xtensa\_clone(unsigned long, unsigned long, struct pt\_regs\*);
 asmlinkage long xtensa\_pipe(int \_\_user \*);
-asmlinkage long xtensa\_mmap2(unsigned long, unsigned long, unsigned long,
- unsigned long, unsigned long, unsigned long);
 asmlinkage long xtensa\_ptrace(long, long, long, long);
 asmlinkage long xtensa\_sigreturn(struct pt\_regs\*);
 asmlinkage long xtensa\_rt\_sigreturn(struct pt\_regs\*);
diff --git a/arch/xtensa/include/asm/unistd.h b/arch/xtensa/include/asm/unistd.h
index c092c8f..9a5c354 100644
--- a/arch/xtensa/include/asm/unistd.h
+++ b/arch/xtensa/include/asm/unistd.h
@@ -189,7 +189,7 @@ \_\_SYSCALL( 79, sys\_fremovexattr, 2)
 /\* File Map / Shared Memory Operations \*/

 #define \_\_NR\_mmap2 80
-\_\_SYSCALL( 80, xtensa\_mmap2, 6)
+\_\_SYSCALL( 80, sys\_mmap\_pgoff, 6)
 #define \_\_NR\_munmap 81
 \_\_SYSCALL( 81, sys\_munmap, 2)
 #define \_\_NR\_mprotect 82
diff --git a/arch/xtensa/kernel/syscall.c b/arch/xtensa/kernel/syscall.c
index ac15ecb..1e67bab 100644
--- a/arch/xtensa/kernel/syscall.c
+++ b/arch/xtensa/kernel/syscall.c
@@ -57,31 +57,6 @@ asmlinkage long xtensa\_pipe(int \_\_user \*userfds)
 return error;
 }

-
-asmlinkage long xtensa\_mmap2(unsigned long addr, unsigned long len,
- unsigned long prot, unsigned long flags,
- unsigned long fd, unsigned long pgoff)
-{
- int error = -EBADF;
- struct file \* file = NULL;
-
- flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
- if (!(flags & MAP\_ANONYMOUS)) {
- file = fget(fd);
- if (!file)
- goto out;
- }
-
- down\_write(&current->mm->mmap\_sem);
- error = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
- up\_write(&current->mm->mmap\_sem);
-
- if (file)
- fput(file);
-out:
- return error;
-}
-
 asmlinkage long xtensa\_shmat(int shmid, char \_\_user \*shmaddr, int shmflg)
 {
 unsigned long ret;
diff --git a/include/linux/syscalls.h b/include/linux/syscalls.h
index a990ace..93515c6 100644
--- a/include/linux/syscalls.h
+++ b/include/linux/syscalls.h
@@ -879,4 +879,8 @@ int kernel\_execve(const char \*filename, char \*const argv[], char \*const envp[]);
 asmlinkage long sys\_perf\_event\_open(
 struct perf\_event\_attr \_\_user \*attr\_uptr,
 pid\_t pid, int cpu, int group\_fd, unsigned long flags);
+
+asmlinkage long sys\_mmap\_pgoff(unsigned long addr, unsigned long len,
+ unsigned long prot, unsigned long flags,
+ unsigned long fd, unsigned long pgoff);
 #endif
diff --git a/ipc/shm.c b/ipc/shm.c
index 464694e..11bec62 100644
--- a/ipc/shm.c
+++ b/ipc/shm.c
@@ -290,28 +290,28 @@ static unsigned long shm\_get\_unmapped\_area(struct file \*file,
 unsigned long flags)
 {
 struct shm\_file\_data \*sfd = shm\_file\_data(file);
- return get\_unmapped\_area(sfd->file, addr, len, pgoff, flags);
-}
-
-int is\_file\_shm\_hugepages(struct file \*file)
-{
- int ret = 0;
-
- if (file->f\_op == &shm\_file\_operations) {
- struct shm\_file\_data \*sfd;
- sfd = shm\_file\_data(file);
- ret = is\_file\_hugepages(sfd->file);
- }
- return ret;
+ return sfd->file->f\_op->get\_unmapped\_area(sfd->file, addr, len,
+ pgoff, flags);
 }

 static const struct file\_operations shm\_file\_operations = {
 .mmap = shm\_mmap,
 .fsync = shm\_fsync,
 .release = shm\_release,
+};
+
+static const struct file\_operations shm\_file\_operations\_huge = {
+ .mmap = shm\_mmap,
+ .fsync = shm\_fsync,
+ .release = shm\_release,
 .get\_unmapped\_area = shm\_get\_unmapped\_area,
 };

+int is\_file\_shm\_hugepages(struct file \*file)
+{
+ return file->f\_op == &shm\_file\_operations\_huge;
+}
+
 static const struct vm\_operations\_struct shm\_vm\_ops = {
 .open = shm\_open, /\* callback for a new vm-area open \*/
 .close = shm\_close, /\* callback for when the vm-area is released \*/
@@ -889,7 +889,10 @@ long do\_shmat(int shmid, char \_\_user \*shmaddr, int shmflg, ulong \*raddr)
 if (!sfd)
 goto out\_put\_dentry;

- file = alloc\_file(path.mnt, path.dentry, f\_mode, &shm\_file\_operations);
+ file = alloc\_file(path.mnt, path.dentry, f\_mode,
+ is\_file\_hugepages(shp->shm\_file) ?
+ &shm\_file\_operations\_huge :
+ &shm\_file\_operations);
 if (!file)
 goto out\_free;
 ima\_counts\_get(file);
diff --git a/mm/mmap.c b/mm/mmap.c
index 73f5e4b..ae19746 100644
--- a/mm/mmap.c
+++ b/mm/mmap.c
@@ -932,13 +932,9 @@ unsigned long do\_mmap\_pgoff(struct file \*file, unsigned long addr,
 if (!(flags & MAP\_FIXED))
 addr = round\_hint\_to\_min(addr);

- error = arch\_mmap\_check(addr, len, flags);
- if (error)
- return error;
-
 /\* Careful about overflows.. \*/
 len = PAGE\_ALIGN(len);
- if (!len || len > TASK\_SIZE)
+ if (!len)
 return -ENOMEM;

 /\* offset overflow? \*/
@@ -949,24 +945,6 @@ unsigned long do\_mmap\_pgoff(struct file \*file, unsigned long addr,
 if (mm->map\_count > sysctl\_max\_map\_count)
 return -ENOMEM;

- if (flags & MAP\_HUGETLB) {
- struct user\_struct \*user = NULL;
- if (file)
- return -EINVAL;
-
- /\*
- \* VM\_NORESERVE is used because the reservations will be
- \* taken when vm\_ops->mmap() is called
- \* A dummy user value is used because we are not locking
- \* memory so no accounting is necessary
- \*/
- len = ALIGN(len, huge\_page\_size(&default\_hstate));
- file = hugetlb\_file\_setup(HUGETLB\_ANON\_FILE, len, VM\_NORESERVE,
- &user, HUGETLB\_ANONHUGE\_INODE);
- if (IS\_ERR(file))
- return PTR\_ERR(file);
- }
-
 /\* Obtain the address to map to. we verify (or select) it and ensure
 \* that it represents a valid section of the address space.
 \*/
@@ -1459,6 +1437,14 @@ get\_unmapped\_area(struct file \*file, unsigned long addr, unsigned long len,
 unsigned long (\*get\_area)(struct file \*, unsigned long,
 unsigned long, unsigned long, unsigned long);

+ unsigned long error = arch\_mmap\_check(addr, len, flags);
+ if (error)
+ return error;
+
+ /\* Careful about overflows.. \*/
+ if (len > TASK\_SIZE)
+ return -ENOMEM;
+
 get\_area = current->mm->get\_unmapped\_area;
 if (file && file->f\_op && file->f\_op->get\_unmapped\_area)
 get\_area = file->f\_op->get\_unmapped\_area;
@@ -2003,20 +1989,14 @@ unsigned long do\_brk(unsigned long addr, unsigned long len)
 if (!len)
 return addr;

- if ((addr + len) > TASK\_SIZE || (addr + len) < addr)
- return -EINVAL;
-
- if (is\_hugepage\_only\_range(mm, addr, len))
- return -EINVAL;
-
 error = security\_file\_mmap(NULL, 0, 0, 0, addr, 1);
 if (error)
 return error;

 flags = VM\_DATA\_DEFAULT\_FLAGS | VM\_ACCOUNT | mm->def\_flags;

- error = arch\_mmap\_check(addr, len, flags);
- if (error)
+ error = get\_unmapped\_area(NULL, addr, len, 0, MAP\_FIXED);
+ if (error & ~PAGE\_MASK)
 return error;

 /\*
diff --git a/mm/mremap.c b/mm/mremap.c
index 97bff25..8451908 100644
--- a/mm/mremap.c
+++ b/mm/mremap.c
@@ -261,6 +261,137 @@ static unsigned long move\_vma(struct vm\_area\_struct \*vma,
 return new\_addr;
 }

+static struct vm\_area\_struct \*vma\_to\_resize(unsigned long addr,
+ unsigned long old\_len, unsigned long new\_len, unsigned long \*p)
+{
+ struct mm\_struct \*mm = current->mm;
+ struct vm\_area\_struct \*vma = find\_vma(mm, addr);
+
+ if (!vma || vma->vm\_start > addr)
+ goto Efault;
+
+ if (is\_vm\_hugetlb\_page(vma))
+ goto Einval;
+
+ /\* We can't remap across vm area boundaries \*/
+ if (old\_len > vma->vm\_end - addr)
+ goto Efault;
+
+ if (vma->vm\_flags & (VM\_DONTEXPAND | VM\_PFNMAP)) {
+ if (new\_len > old\_len)
+ goto Efault;
+ }
+
+ if (vma->vm\_flags & VM\_LOCKED) {
+ unsigned long locked, lock\_limit;
+ locked = mm->locked\_vm << PAGE\_SHIFT;
+ lock\_limit = current->signal->rlim[RLIMIT\_MEMLOCK].rlim\_cur;
+ locked += new\_len - old\_len;
+ if (locked > lock\_limit && !capable(CAP\_IPC\_LOCK))
+ goto Eagain;
+ }
+
+ if (!may\_expand\_vm(mm, (new\_len - old\_len) >> PAGE\_SHIFT))
+ goto Enomem;
+
+ if (vma->vm\_flags & VM\_ACCOUNT) {
+ unsigned long charged = (new\_len - old\_len) >> PAGE\_SHIFT;
+ if (security\_vm\_enough\_memory(charged))
+ goto Efault;
+ \*p = charged;
+ }
+
+ return vma;
+
+Efault: /\* very odd choice for most of the cases, but... \*/
+ return ERR\_PTR(-EFAULT);
+Einval:
+ return ERR\_PTR(-EINVAL);
+Enomem:
+ return ERR\_PTR(-ENOMEM);
+Eagain:
+ return ERR\_PTR(-EAGAIN);
+}
+
+static unsigned long mremap\_to(unsigned long addr,
+ unsigned long old\_len, unsigned long new\_addr,
+ unsigned long new\_len)
+{
+ struct mm\_struct \*mm = current->mm;
+ struct vm\_area\_struct \*vma;
+ unsigned long ret = -EINVAL;
+ unsigned long charged = 0;
+ unsigned long map\_flags;
+
+ if (new\_addr & ~PAGE\_MASK)
+ goto out;
+
+ if (new\_len > TASK\_SIZE || new\_addr > TASK\_SIZE - new\_len)
+ goto out;
+
+ /\* Check if the location we're moving into overlaps the
+ \* old location at all, and fail if it does.
+ \*/
+ if ((new\_addr <= addr) && (new\_addr+new\_len) > addr)
+ goto out;
+
+ if ((addr <= new\_addr) && (addr+old\_len) > new\_addr)
+ goto out;
+
+ ret = security\_file\_mmap(NULL, 0, 0, 0, new\_addr, 1);
+ if (ret)
+ goto out;
+
+ ret = do\_munmap(mm, new\_addr, new\_len);
+ if (ret)
+ goto out;
+
+ if (old\_len >= new\_len) {
+ ret = do\_munmap(mm, addr+new\_len, old\_len - new\_len);
+ if (ret && old\_len != new\_len)
+ goto out;
+ old\_len = new\_len;
+ }
+
+ vma = vma\_to\_resize(addr, old\_len, new\_len, &charged);
+ if (IS\_ERR(vma)) {
+ ret = PTR\_ERR(vma);
+ goto out;
+ }
+
+ map\_flags = MAP\_FIXED;
+ if (vma->vm\_flags & VM\_MAYSHARE)
+ map\_flags |= MAP\_SHARED;
+
+ ret = get\_unmapped\_area(vma->vm\_file, new\_addr, new\_len, vma->vm\_pgoff +
+ ((addr - vma->vm\_start) >> PAGE\_SHIFT),
+ map\_flags);
+ if (ret & ~PAGE\_MASK)
+ goto out1;
+
+ ret = move\_vma(vma, addr, old\_len, new\_len, new\_addr);
+ if (!(ret & ~PAGE\_MASK))
+ goto out;
+out1:
+ vm\_unacct\_memory(charged);
+
+out:

+ return ret;
+}
+

+static int vma\_expandable(struct vm\_area\_struct \*vma, unsigned long delta)
+{
+ unsigned long end = vma->vm\_end + delta;
+ if (end < vma->vm\_end) /\* overflow \*/
+ return 0;
+ if (vma->vm\_next && vma->vm\_next->vm\_start < end) /\* intersection \*/
+ return 0;
+ if (get\_unmapped\_area(NULL, vma->vm\_start, end - vma->vm\_start,
+ 0, MAP\_FIXED) & ~PAGE\_MASK)
+ return 0;
+ return 1;
+}
+
 /\*
 \* Expand (or shrink) an existing mapping, potentially moving it at the
 \* same time (controlled by the MREMAP\_MAYMOVE flag and available VM space)
@@ -294,32 +425,10 @@ unsigned long do\_mremap(unsigned long addr,
 if (!new\_len)
 goto out;

- /\* new\_addr is only valid if MREMAP\_FIXED is specified \*/
 if (flags & MREMAP\_FIXED) {
- if (new\_addr & ~PAGE\_MASK)
- goto out;
- if (!(flags & MREMAP\_MAYMOVE))
- goto out;
-
- if (new\_len > TASK\_SIZE || new\_addr > TASK\_SIZE - new\_len)
- goto out;
-
- /\* Check if the location we're moving into overlaps the
- \* old location at all, and fail if it does.
- \*/
- if ((new\_addr <= addr) && (new\_addr+new\_len) > addr)
- goto out;
-
- if ((addr <= new\_addr) && (addr+old\_len) > new\_addr)
- goto out;
-
- ret = security\_file\_mmap(NULL, 0, 0, 0, new\_addr, 1);
- if (ret)
- goto out;
-
- ret = do\_munmap(mm, new\_addr, new\_len);
- if (ret)
- goto out;
+ if (flags & MREMAP\_MAYMOVE)
+ ret = mremap\_to(addr, old\_len, new\_addr, new\_len);
+ goto out;
 }

 /\*
@@ -332,60 +441,23 @@ unsigned long do\_mremap(unsigned long addr,
 if (ret && old\_len != new\_len)
 goto out;
 ret = addr;
- if (!(flags & MREMAP\_FIXED) || (new\_addr == addr))
- goto out;
- old\_len = new\_len;
+ goto out;
 }

 /\*
- \* Ok, we need to grow.. or relocate.
+ \* Ok, we need to grow..
 \*/
- ret = -EFAULT;
- vma = find\_vma(mm, addr);
- if (!vma || vma->vm\_start > addr)
- goto out;
- if (is\_vm\_hugetlb\_page(vma)) {
- ret = -EINVAL;
- goto out;
- }
- /\* We can't remap across vm area boundaries \*/
- if (old\_len > vma->vm\_end - addr)
- goto out;
- if (vma->vm\_flags & (VM\_DONTEXPAND | VM\_PFNMAP)) {
- if (new\_len > old\_len)
- goto out;
- }
- if (vma->vm\_flags & VM\_LOCKED) {
- unsigned long locked, lock\_limit;
- locked = mm->locked\_vm << PAGE\_SHIFT;
- lock\_limit = current->signal->rlim[RLIMIT\_MEMLOCK].rlim\_cur;
- locked += new\_len - old\_len;
- ret = -EAGAIN;
- if (locked > lock\_limit && !capable(CAP\_IPC\_LOCK))
- goto out;
- }
- if (!may\_expand\_vm(mm, (new\_len - old\_len) >> PAGE\_SHIFT)) {
- ret = -ENOMEM;
+ vma = vma\_to\_resize(addr, old\_len, new\_len, &charged);
+ if (IS\_ERR(vma)) {
+ ret = PTR\_ERR(vma);
 goto out;
 }

- if (vma->vm\_flags & VM\_ACCOUNT) {
- charged = (new\_len - old\_len) >> PAGE\_SHIFT;
- if (security\_vm\_enough\_memory(charged))
- goto out\_nc;
- }
-
 /\* old\_len exactly to the end of the area..
- \* And we're not relocating the area.
 \*/
- if (old\_len == vma->vm\_end - addr &&
- !((flags & MREMAP\_FIXED) && (addr != new\_addr)) &&
- (old\_len != new\_len || !(flags & MREMAP\_MAYMOVE))) {
- unsigned long max\_addr = TASK\_SIZE;
- if (vma->vm\_next)
- max\_addr = vma->vm\_next->vm\_start;
+ if (old\_len == vma->vm\_end - addr) {
 /\* can we just expand the current mapping? \*/
- if (max\_addr - addr >= new\_len) {
+ if (vma\_expandable(vma, new\_len - old\_len)) {
 int pages = (new\_len - old\_len) >> PAGE\_SHIFT;

 vma\_adjust(vma, vma->vm\_start,
@@ -409,28 +481,27 @@ unsigned long do\_mremap(unsigned long addr,
 \*/
 ret = -ENOMEM;
 if (flags & MREMAP\_MAYMOVE) {
- if (!(flags & MREMAP\_FIXED)) {
- unsigned long map\_flags = 0;
- if (vma->vm\_flags & VM\_MAYSHARE)
- map\_flags |= MAP\_SHARED;
-
- new\_addr = get\_unmapped\_area(vma->vm\_file, 0, new\_len,
- vma->vm\_pgoff, map\_flags);
- if (new\_addr & ~PAGE\_MASK) {
- ret = new\_addr;
- goto out;
- }
-
- ret = security\_file\_mmap(NULL, 0, 0, 0, new\_addr, 1);
- if (ret)
- goto out;
+ unsigned long map\_flags = 0;
+ if (vma->vm\_flags & VM\_MAYSHARE)
+ map\_flags |= MAP\_SHARED;
+
+ new\_addr = get\_unmapped\_area(vma->vm\_file, 0, new\_len,
+ vma->vm\_pgoff +
+ ((addr - vma->vm\_start) >> PAGE\_SHIFT),
+ map\_flags);
+ if (new\_addr & ~PAGE\_MASK) {
+ ret = new\_addr;
+ goto out;
 }
+
+ ret = security\_file\_mmap(NULL, 0, 0, 0, new\_addr, 1);
+ if (ret)
+ goto out;
 ret = move\_vma(vma, addr, old\_len, new\_len, new\_addr);
 }
 out:
 if (ret & ~PAGE\_MASK)
 vm\_unacct\_memory(charged);
-out\_nc:
 return ret;
 }

diff --git a/mm/util.c b/mm/util.c
index 7c35ad9..b377ce4 100644
--- a/mm/util.c
+++ b/mm/util.c
@@ -4,6 +4,10 @@
 #include <linux/module.h>
 #include <linux/err.h>
 #include <linux/sched.h>
+#include <linux/hugetlb.h>
+#include <linux/syscalls.h>
+#include <linux/mman.h>
+#include <linux/file.h>
 #include <asm/uaccess.h>

 #define CREATE\_TRACE\_POINTS
@@ -268,6 +272,46 @@ int \_\_attribute\_\_((weak)) get\_user\_pages\_fast(unsigned long start,
 }
 EXPORT\_SYMBOL\_GPL(get\_user\_pages\_fast);

+SYSCALL\_DEFINE6(mmap\_pgoff, unsigned long, addr, unsigned long, len,
+ unsigned long, prot, unsigned long, flags,
+ unsigned long, fd, unsigned long, pgoff)
+{
+ struct file \* file = NULL;
+ unsigned long retval = -EBADF;
+
+ if (!(flags & MAP\_ANONYMOUS)) {
+ if (unlikely(flags & MAP\_HUGETLB))
+ return -EINVAL;
+ file = fget(fd);
+ if (!file)
+ goto out;
+ } else if (flags & MAP\_HUGETLB) {
+ struct user\_struct \*user = NULL;
+ /\*
+ \* VM\_NORESERVE is used because the reservations will be
+ \* taken when vm\_ops->mmap() is called
+ \* A dummy user value is used because we are not locking
+ \* memory so no accounting is necessary
+ \*/
+ len = ALIGN(len, huge\_page\_size(&default\_hstate));
+ file = hugetlb\_file\_setup(HUGETLB\_ANON\_FILE, len, VM\_NORESERVE,
+ &user, HUGETLB\_ANONHUGE\_INODE);
+ if (IS\_ERR(file))
+ return PTR\_ERR(file);
+ }
+
+ flags &= ~(MAP\_EXECUTABLE | MAP\_DENYWRITE);
+
+ down\_write(&current->mm->mmap\_sem);
+ retval = do\_mmap\_pgoff(file, addr, len, prot, flags, pgoff);
+ up\_write(&current->mm->mmap\_sem);
+
+ if (file)
+ fput(file);
+out:
+ return retval;
+}
+
 /\* Tracepoints definitions. \*/
 EXPORT\_TRACEPOINT\_SYMBOL(kmalloc);
 EXPORT\_TRACEPOINT\_SYMBOL(kmem\_cache\_alloc);

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:01 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Chris Wilson <ch...@chris-wilson.co.uk>

commit e3d8affb0d2d95f2da61e30ce86b33177feb91e8 upstream.

As pinning (allocating and binding GTT memory) does not actually invoke
GPU commands, it is safe, and indeed is attempted, during resumption
from suspension:

[drm:intel\_init\_clock\_gating] \*ERROR\* failed to pin power context: -16

Signed-off-by: Chris Wilson <ch...@chris-wilson.co.uk>
Reported-by: Hugh Dickins <hugh.d...@tiscali.co.uk>
Signed-off-by: Eric Anholt <er...@anholt.net>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/gpu/drm/i915/i915\_gem.c | 3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915\_gem.c b/drivers/gpu/drm/i915/i915\_gem.c
index 2e10b9a..3d75c67 100644
--- a/drivers/gpu/drm/i915/i915\_gem.c
+++ b/drivers/gpu/drm/i915/i915\_gem.c
@@ -2571,9 +2571,6 @@ i915\_gem\_object\_bind\_to\_gtt(struct drm\_gem\_object \*obj, unsigned alignment)
 bool retry\_alloc = false;
 int ret;

- if (dev\_priv->mm.suspended)
- return -EBUSY;
-
 if (obj\_priv->madv != I915\_MADV\_WILLNEED) {
 DRM\_ERROR("Attempting to bind a purgeable object\n");
 return -EINVAL;

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:01 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Daniel T Chen <cri...@ubuntu.com>

commit af9a75dd1a1f8a9aa406466cc8bb16208120488a upstream.

This model needs both 'Headphone Jack Sense' and 'Line Jack Sense' muted
for audible playback, so just add it to the ad1981 jack sense blacklist.

Tested-by: Pete <x412...@gmail.com>
Signed-off-by: Daniel T Chen <cri...@ubuntu.com>
Signed-off-by: Jaroslav Kysela <pe...@perex.cz>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

sound/pci/ac97/ac97\_patch.c | 1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/sound/pci/ac97/ac97\_patch.c b/sound/pci/ac97/ac97\_patch.c
index 7337abd..67ca440 100644
--- a/sound/pci/ac97/ac97\_patch.c
+++ b/sound/pci/ac97/ac97\_patch.c
@@ -1870,6 +1870,7 @@ static unsigned int ad1981\_jacks\_blacklist[] = {
 0x10140554, /\* Thinkpad T42p/R50p \*/
 0x10140567, /\* Thinkpad T43p 2668-G7U \*/
 0x10140581, /\* Thinkpad X41-2527 \*/
+ 0x10280160, /\* Dell Dimension 2400 \*/
 0x104380b0, /\* Asus A7V8X-MX \*/
 0x11790241, /\* Toshiba Satellite A-15 S127 \*/
 0x144dc01a, /\* Samsung NP-X20C004/SEG \*/

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:02 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Jeff Layton <jla...@redhat.com>

commit 486bad2e40e938cd68fd853b7a9fa3115a9d3a4a upstream.

When handling the gssd downcall, the kernel should distinguish between a
successful downcall that contains an error code and a failed downcall
(i.e. where the parsing failed or some other sort of problem occurred).

In the former case, gss\_pipe\_downcall should be returning the number of
bytes written to the pipe instead of an error. In the event of other
errors, we generally want the initiating task to retry the upcall so
we set msg.errno to -EAGAIN. An unexpected error code here is a bug
however, so BUG() in that case.

Signed-off-by: Jeff Layton <jla...@redhat.com>
Signed-off-by: Trond Myklebust <Trond.M...@netapp.com>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

net/sunrpc/auth\_gss/auth\_gss.c | 17 ++++++++++++++++-

 1 files changed, 16 insertions(+), 1 deletions(-)

diff --git a/net/sunrpc/auth\_gss/auth\_gss.c b/net/sunrpc/auth\_gss/auth\_gss.c
index 129d75e..9c5a19d 100644
--- a/net/sunrpc/auth\_gss/auth\_gss.c
+++ b/net/sunrpc/auth\_gss/auth\_gss.c
@@ -644,7 +644,22 @@ gss\_pipe\_downcall(struct file \*filp, const char \_\_user \*src, size\_t mlen)
 p = gss\_fill\_context(p, end, ctx, gss\_msg->auth->mech);
 if (IS\_ERR(p)) {
 err = PTR\_ERR(p);
- gss\_msg->msg.errno = (err == -EAGAIN) ? -EAGAIN : -EACCES;
+ switch (err) {
+ case -EACCES:
+ gss\_msg->msg.errno = err;
+ err = mlen;
+ break;
+ case -EFAULT:
+ case -ENOMEM:
+ case -EINVAL:
+ case -ENOSYS:
+ gss\_msg->msg.errno = -EAGAIN;
+ break;
+ default:
+ printk(KERN\_CRIT "%s: bad return from "
+ "gss\_fill\_context: %ld\n", \_\_func\_\_, err);
+ BUG();
+ }
 goto err\_release\_msg;
 }
 gss\_msg->ctx = gss\_get\_ctx(ctx);

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:03 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Andrew Morton <ak...@linux-foundation.org>

commit 29bd0ae25f8cb96b63560c2cbccec77b425e1603 upstream.

drivers/gpu/drm/i915/i915\_dma.c: In function 'i915\_driver\_load':
drivers/gpu/drm/i915/i915\_dma.c:1114: warning: 'll\_base' may be used uninitialized in this function

Partly this is because gcc isn't smart enough. But `ll\_base' does get used
uninitialised in the DRM\_DEBUG() call.

Cc: Jesse Barnes <jba...@virtuousgeek.org>
Cc: Eric Anholt <er...@anholt.net>
Cc: Dave Airlie <air...@linux.ie>
Signed-off-by: Andrew Morton <ak...@linux-foundation.org>
Signed-off-by: Eric Anholt <er...@anholt.net>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/gpu/drm/i915/i915\_dma.c | 3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915\_dma.c b/drivers/gpu/drm/i915/i915\_dma.c
index 4a553ad..bc2db7d 100644
--- a/drivers/gpu/drm/i915/i915\_dma.c
+++ b/drivers/gpu/drm/i915/i915\_dma.c
@@ -1111,7 +1111,8 @@ static void i915\_setup\_compression(struct drm\_device \*dev, int size)
 {
 struct drm\_i915\_private \*dev\_priv = dev->dev\_private;
 struct drm\_mm\_node \*compressed\_fb, \*compressed\_llb;
- unsigned long cfb\_base, ll\_base;
+ unsigned long cfb\_base;
+ unsigned long ll\_base = 0;

 /\* Leave 1M for line length buffer & misc. \*/
 compressed\_fb = drm\_mm\_search\_free(&dev\_priv->vram, size, 4096, 0);

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:02 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Zhao Yakui <yakui...@intel.com>

commit 8faf3b317471179c02db339aa80955a2e88c036d upstream.

Make the BPC in FDI rx/transcoder be consistent with that in pipeconf on Ironlake.

Signed-off-by: Zhao Yakui <yakui...@intel.com>
Signed-off-by: Eric Anholt <er...@anholt.net>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/gpu/drm/i915/intel\_display.c | 26 +++++++++++++++++++++++++-
 1 files changed, 25 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel\_display.c b/drivers/gpu/drm/i915/intel\_display.c
index 2e7e521..d02016d 100644
--- a/drivers/gpu/drm/i915/intel\_display.c
+++ b/drivers/gpu/drm/i915/intel\_display.c
@@ -1473,6 +1473,10 @@ static void igdng\_crtc\_dpms(struct drm\_crtc \*crtc, int mode)
 int trans\_vsync\_reg = (pipe == 0) ? TRANS\_VSYNC\_A : TRANS\_VSYNC\_B;
 u32 temp;
 int tries = 5, j, n;
+ u32 pipe\_bpc;
+
+ temp = I915\_READ(pipeconf\_reg);
+ pipe\_bpc = temp & PIPE\_BPC\_MASK;

 /\* XXX: When our outputs are all unaware of DPMS modes other than off
 \* and on, we should map those modes to DRM\_MODE\_DPMS\_OFF in the CRTC.
@@ -1504,6 +1508,12 @@ static void igdng\_crtc\_dpms(struct drm\_crtc \*crtc, int mode)

 /\* enable PCH FDI RX PLL, wait warmup plus DMI latency \*/
 temp = I915\_READ(fdi\_rx\_reg);
+ /\*
+ \* make the BPC in FDI Rx be consistent with that in
+ \* pipeconf reg.
+ \*/
+ temp &= ~(0x7 << 16);
+ temp |= (pipe\_bpc << 11);
 I915\_WRITE(fdi\_rx\_reg, temp | FDI\_RX\_PLL\_ENABLE |
 FDI\_SEL\_PCDCLK |
 FDI\_DP\_PORT\_WIDTH\_X4); /\* default 4 lanes \*/
@@ -1644,6 +1654,12 @@ static void igdng\_crtc\_dpms(struct drm\_crtc \*crtc, int mode)

 /\* enable PCH transcoder \*/
 temp = I915\_READ(transconf\_reg);
+ /\*
+ \* make the BPC in transcoder be consistent with
+ \* that in pipeconf reg.
+ \*/
+ temp &= ~PIPE\_BPC\_MASK;
+ temp |= pipe\_bpc;
 I915\_WRITE(transconf\_reg, temp | TRANS\_ENABLE);
 I915\_READ(transconf\_reg);

@@ -1722,6 +1738,9 @@ static void igdng\_crtc\_dpms(struct drm\_crtc \*crtc, int mode)
 I915\_READ(fdi\_tx\_reg);

 temp = I915\_READ(fdi\_rx\_reg);
+ /\* BPC in FDI rx is consistent with that in pipeconf \*/
+ temp &= ~(0x07 << 16);
+ temp |= (pipe\_bpc << 11);
 I915\_WRITE(fdi\_rx\_reg, temp & ~FDI\_RX\_ENABLE);
 I915\_READ(fdi\_rx\_reg);

@@ -1765,7 +1784,12 @@ static void igdng\_crtc\_dpms(struct drm\_crtc \*crtc, int mode)
 }
 }
 }
-
+ temp = I915\_READ(transconf\_reg);
+ /\* BPC in transcoder is consistent with that in pipeconf \*/
+ temp &= ~PIPE\_BPC\_MASK;
+ temp |= pipe\_bpc;
+ I915\_WRITE(transconf\_reg, temp);
+ I915\_READ(transconf\_reg);
 udelay(100);

 /\* disable PCH DPLL \*/

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:03 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Jarkko Lavinen <jarkko....@nokia.com>

commit 0a74ff29b8dd8b748f8856352f9a9b5c6cc362cc upstream.

If mmc\_blk\_set\_blksize() fails mmc\_blk\_probe() the request queue and its
thread have been set up and they need to be shut down properly before
putting the disk.

Signed-off-by: Jarkko Lavinen <jarkko....@nokia.com>
Signed-off-by: Adrian Hunter <adrian...@nokia.com>
Cc: <linu...@vger.kernel.org>

Signed-off-by: Andrew Morton <ak...@linux-foundation.org>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/mmc/card/block.c | 1 +

 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/mmc/card/block.c b/drivers/mmc/card/block.c
index 5988573..ee87911 100644
--- a/drivers/mmc/card/block.c
+++ b/drivers/mmc/card/block.c
@@ -618,6 +618,7 @@ static int mmc\_blk\_probe(struct mmc\_card \*card)
 return 0;

 out:
+ mmc\_cleanup\_queue(&md->queue);
 mmc\_blk\_put(md);

 return err;

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:04 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Anna Lemehova <EXT-Anna...@nokia.com>

commit 7d92df692994472cab6045bbd9d0e2c4afa4365f upstream.

When a card is removed before mmc\_blk\_probe() has called add\_disk(), then
the minor field is uninitialized and has value 0. This caused
mmc\_blk\_put() to always release devidx 0 even if 0 was still in use. Then
the next mmc\_blk\_probe() used the first free idx of 0, which oopses in
sysfs, since it is used by another card.

Signed-off-by: Anna Lemehova <EXT-Anna...@nokia.com>

Signed-off-by: Adrian Hunter <adrian...@nokia.com>
Cc: <linu...@vger.kernel.org>

Signed-off-by: Andrew Morton <ak...@linux-foundation.org>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/mmc/card/block.c | 5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/drivers/mmc/card/block.c b/drivers/mmc/card/block.c
index 85f0e8c..5988573 100644
--- a/drivers/mmc/card/block.c
+++ b/drivers/mmc/card/block.c
@@ -85,7 +85,12 @@ static void mmc\_blk\_put(struct mmc\_blk\_data \*md)
 mutex\_lock(&open\_lock);
 md->usage--;
 if (md->usage == 0) {
+ int devmaj = MAJOR(disk\_devt(md->disk));
 int devidx = MINOR(disk\_devt(md->disk)) >> MMC\_SHIFT;
+
+ if (!devmaj)
+ devidx = md->disk->first\_minor >> MMC\_SHIFT;
+
 \_\_clear\_bit(devidx, dev\_use);

 put\_disk(md->disk);

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:02 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: OGAWA Hirofumi <hiro...@mail.parknet.co.jp>

commit 004731b2c7c658d36bee167cb1e1a399c2cbccc9 upstream.

commit abd6633c67925f90775bb74755f9c547e30f1f20 ("pnp: add a shutdown
method to pnp drivers") adds shutdown method to bus driver blindly. With
it, driver->shutdown is no longer valid.

Use pnp\_driver->shutdown instead.

Addresses <http://bugzilla.kernel.org/show_bug.cgi?id=14889>

Signed-off-by: OGAWA Hirofumi <hiro...@mail.parknet.co.jp>
Reported-by: Malte Schröder <malt...@gmx.de>
Cc: "Rafael J. Wysocki" <r...@sisk.pl>
Cc: Bjorn Helgaas <bjorn....@hp.com>
Cc: David Hardeman <da...@hardeman.nu>
Cc: Dmitry Torokhov <dt...@mail.ru>
Cc: Alessandro Zummo <a.z...@towertech.it>
Cc: Paul Gortmaker <p\_gor...@yahoo.com>
Signed-off-by: Andrew Morton <ak...@linux-foundation.org>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/rtc/rtc-cmos.c | 9 +++------
 1 files changed, 3 insertions(+), 6 deletions(-)

diff --git a/drivers/rtc/rtc-cmos.c b/drivers/rtc/rtc-cmos.c
index f7a4701..473e5f2 100644
--- a/drivers/rtc/rtc-cmos.c
+++ b/drivers/rtc/rtc-cmos.c
@@ -1099,9 +1099,9 @@ static int cmos\_pnp\_resume(struct pnp\_dev \*pnp)
 #define cmos\_pnp\_resume NULL
 #endif

-static void cmos\_pnp\_shutdown(struct device \*pdev)
+static void cmos\_pnp\_shutdown(struct pnp\_dev \*pnp)
 {
- if (system\_state == SYSTEM\_POWER\_OFF && !cmos\_poweroff(pdev))
+ if (system\_state == SYSTEM\_POWER\_OFF && !cmos\_poweroff(&pnp->dev))
 return;

 cmos\_do\_shutdown();
@@ -1120,15 +1120,12 @@ static struct pnp\_driver cmos\_pnp\_driver = {
 .id\_table = rtc\_ids,
 .probe = cmos\_pnp\_probe,
 .remove = \_\_exit\_p(cmos\_pnp\_remove),
+ .shutdown = cmos\_pnp\_shutdown,

 /\* flag ensures resume() gets called, and stops syslog spam \*/
 .flags = PNP\_DRIVER\_RES\_DO\_NOT\_CHANGE,
 .suspend = cmos\_pnp\_suspend,
 .resume = cmos\_pnp\_resume,
- .driver = {
- .name = (char \*)driver\_name,
- .shutdown = cmos\_pnp\_shutdown,
- }
 };

 #endif /\* CONFIG\_PNP \*/

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:05 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Daniel Vetter <daniel...@ffwll.ch>

commit 96b47b65594fe2365f73aede060cb5203561fed3 upstream.

i915\_gem\_object\_unbind had the ordering wrong. The other user,
i915\_gem\_object\_put\_fence\_reg already has the correct ordering.

Results was usually corrupted pixmaps, especially garbled font glyphs
after a suspend/resume (because this evicts everything).

I'm still waiting for the feedback from the bug-reporters, but
because this obviously fixes a bug (at least for me) I'm already
submitting it.

Bugzilla: <http://bugs.freedesktop.org/show_bug.cgi?id=25406>
Signed-off-by: Daniel Vetter <daniel...@ffwll.ch>
Signed-off-by: Eric Anholt <er...@anholt.net>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/gpu/drm/i915/i915\_gem.c | 7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915\_gem.c b/drivers/gpu/drm/i915/i915\_gem.c
index 5ddbd38..2e10b9a 100644
--- a/drivers/gpu/drm/i915/i915\_gem.c
+++ b/drivers/gpu/drm/i915/i915\_gem.c
@@ -2010,9 +2010,6 @@ i915\_gem\_object\_unbind(struct drm\_gem\_object \*obj)
 /\* blow away mappings if mapped through GTT \*/
 i915\_gem\_release\_mmap(obj);

- if (obj\_priv->fence\_reg != I915\_FENCE\_REG\_NONE)
- i915\_gem\_clear\_fence\_reg(obj);
-
 /\* Move the object to the CPU domain to ensure that
 \* any possible CPU writes while it's not in the GTT
 \* are flushed when we go to remap it. This will
@@ -2028,6 +2025,10 @@ i915\_gem\_object\_unbind(struct drm\_gem\_object \*obj)

 BUG\_ON(obj\_priv->active);

+ /\* release the fence reg \_after\_ flushing \*/
+ if (obj\_priv->fence\_reg != I915\_FENCE\_REG\_NONE)
+ i915\_gem\_clear\_fence\_reg(obj);
+
 if (obj\_priv->agp\_mem != NULL) {
 drm\_unbind\_agp(obj\_priv->agp\_mem);
 drm\_free\_agp(obj\_priv->agp\_mem, obj->size / PAGE\_SIZE);

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:05 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Krzysztof Halasa <k...@pm.waw.pl>

commit 42d53b4ff7d61487d18274ebdf1f70c1aef6f122 upstream.

There is no need to perform full BIDIR sync (copying the buffers in case
of swiotlb and similar schemes) if we know that the owner (CPU or device)
hasn't altered the data.

Addresses the false-positive reported at
<http://bugzilla.kernel.org/show_bug.cgi?id=14169>

Signed-off-by: Krzysztof Halasa <k...@pm.waw.pl>
Cc: David Miller <da...@davemloft.net>
Cc: Joerg Roedel <joerg....@amd.com>

Signed-off-by: Andrew Morton <ak...@linux-foundation.org>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

lib/dma-debug.c | 7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

diff --git a/lib/dma-debug.c b/lib/dma-debug.c
index 5a77c7c..084e879 100644
--- a/lib/dma-debug.c
+++ b/lib/dma-debug.c
@@ -913,6 +913,9 @@ static void check\_sync(struct device \*dev,
 ref->size);
 }

+ if (entry->direction == DMA\_BIDIRECTIONAL)
+ goto out;
+
 if (ref->direction != entry->direction) {
 err\_printk(dev, entry, "DMA-API: device driver syncs "
 "DMA memory with different direction "
@@ -923,9 +926,6 @@ static void check\_sync(struct device \*dev,
 dir2name[ref->direction]);
 }

- if (entry->direction == DMA\_BIDIRECTIONAL)
- goto out;
-
 if (to\_cpu && !(entry->direction == DMA\_FROM\_DEVICE) &&
 !(ref->direction == DMA\_TO\_DEVICE))
 err\_printk(dev, entry, "DMA-API: device driver syncs "
@@ -948,7 +948,6 @@ static void check\_sync(struct device \*dev,

 out:
 put\_hash\_bucket(bucket, &flags);
-
 }

 void debug\_dma\_map\_page(struct device \*dev, struct page \*page, size\_t offset,

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:04 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Stephen Hemminger <shemm...@linux-foundation.org>

commit 5787536edf18e33d06e2bf038bfd0910f4def213 upstream.

menu: use proper 64 bit math

The new menu governor is incorrectly doing a 64 bit divide. Compile
tested only

Signed-off-by: Stephen Hemminger <shemm...@vyatta.com>
Cc: Arjan van de Ven <ar...@linux.intel.com>
Cc: Len Brown <len....@intel.com>
Cc: Venkatesh Pallipadi <venkatesh...@intel.com>

Signed-off-by: Andrew Morton <ak...@linux-foundation.org>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/cpuidle/governors/menu.c | 12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

diff --git a/drivers/cpuidle/governors/menu.c b/drivers/cpuidle/governors/menu.c
index 6810443..73655ae 100644
--- a/drivers/cpuidle/governors/menu.c
+++ b/drivers/cpuidle/governors/menu.c
@@ -18,6 +18,7 @@
 #include <linux/hrtimer.h>
 #include <linux/tick.h>
 #include <linux/sched.h>
+#include <linux/math64.h>

 #define BUCKETS 12
 #define RESOLUTION 1024
@@ -169,6 +170,12 @@ static DEFINE\_PER\_CPU(struct menu\_device, menu\_devices);

 static void menu\_update(struct cpuidle\_device \*dev);

+/\* This implements DIV\_ROUND\_CLOSEST but avoids 64 bit division \*/
+static u64 div\_round64(u64 dividend, u32 divisor)
+{
+ return div\_u64(dividend + (divisor / 2), divisor);
+}
+
 /\*\*
 \* menu\_select - selects the next idle state to enter
 \* @dev: the CPU
@@ -209,9 +216,8 @@ static int menu\_select(struct cpuidle\_device \*dev)
 data->correction\_factor[data->bucket] = RESOLUTION \* DECAY;

 /\* Make sure to round up for half microseconds \*/
- data->predicted\_us = DIV\_ROUND\_CLOSEST(
- data->expected\_us \* data->correction\_factor[data->bucket],
- RESOLUTION \* DECAY);
+ data->predicted\_us = div\_round64(data->expected\_us \* data->correction\_factor[data->bucket],
+ RESOLUTION \* DECAY);

 /\*
 \* We want to default to C1 (hlt), not to busy polling

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:02 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Sascha Hauer <s.h...@pengutronix.de>

commit 7ee3aebe31d2cb22c84e1c8f48182947b13a3607 upstream.

lib/rational.c:62: warning: data definition has no type or storage class
lib/rational.c:62: warning: type defaults to 'int' in declaration of 'EXPORT\_SYMBOL'
lib/rational.c:62: warning: parameter names (without types) in function declaration

Signed-off-by: Sascha Hauer <s.h...@pengutronix.de>
Signed-off-by: Uwe Kleine-König <u.klein...@pengutronix.de>
Acked-by: WANG Cong <xiyou.w...@gmail.com>
Cc: Oskar Schirmer <o...@emlix.com>

Signed-off-by: Andrew Morton <ak...@linux-foundation.org>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

lib/rational.c | 1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/lib/rational.c b/lib/rational.c
index b3c099b..3ed247b 100644
--- a/lib/rational.c
+++ b/lib/rational.c
@@ -7,6 +7,7 @@
 \*/

 #include <linux/rational.h>
+#include <linux/module.h>

 /\*
 \* calculate best rational approximation for a given fraction

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:04 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Daniel T Chen <cri...@ubuntu.com>

commit dfb12eeb0f04b37e5eb3858864d074af4ecd2ac7 upstream.

BugLink: [https://bugs.launchpad.net/ubuntu/+bug/498863](https://bugs.launchpad.net/ubuntu/%2Bbug/498863)

This mainboard needs ac97\_codec=0.

Tested-by: Apoorv Parle <app...@yahoo.co.in>

Signed-off-by: Daniel T Chen <cri...@ubuntu.com>

Signed-off-by: Takashi Iwai <ti...@suse.de>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

sound/pci/atiixp.c | 1 +

 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/sound/pci/atiixp.c b/sound/pci/atiixp.c
index d6752df..42b4fbb 100644
--- a/sound/pci/atiixp.c
+++ b/sound/pci/atiixp.c
@@ -297,6 +297,7 @@ static struct pci\_device\_id snd\_atiixp\_ids[] = {
 MODULE\_DEVICE\_TABLE(pci, snd\_atiixp\_ids);

 static struct snd\_pci\_quirk atiixp\_quirks[] \_\_devinitdata = {
+ SND\_PCI\_QUIRK(0x105b, 0x0c81, "Foxconn RC4107MA-RS2", 0),
 SND\_PCI\_QUIRK(0x15bd, 0x3100, "DFI RS482", 0),
 { } /\* terminator \*/

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:04 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Takashi Iwai <ti...@suse.de>

commit 9c0afc861a7228f718cb6a79fa7f9d46bf9ff300 upstream.

The capture source or input source mixer element wasn't created properly
for ALC861-VD codec due to the wrong NID passed to
alc\_auto\_create\_input\_ctls().

References: Novell bnc#568305
 <http://bugzilla.novell.com/show_bug.cgi?id=568305>

Signed-off-by: Takashi Iwai <ti...@suse.de>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

sound/pci/hda/patch\_realtek.c | 2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/sound/pci/hda/patch\_realtek.c b/sound/pci/hda/patch\_realtek.c
index e40d31f..a4cb183 100644
--- a/sound/pci/hda/patch\_realtek.c
+++ b/sound/pci/hda/patch\_realtek.c
@@ -15323,7 +15323,7 @@ static struct alc\_config\_preset alc861vd\_presets[] = {
 static int alc861vd\_auto\_create\_input\_ctls(struct hda\_codec \*codec,
 const struct auto\_pin\_cfg \*cfg)
 {
- return alc\_auto\_create\_input\_ctls(codec, cfg, 0x15, 0x09, 0);
+ return alc\_auto\_create\_input\_ctls(codec, cfg, 0x15, 0x22, 0);

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:02 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Zhao Yakui <yakui...@intel.com>

commit a2565377a5c31e25c77c7cabaf6752abe9a2d83a upstream.

Dirk reports that nothing is displayed on LVDS when using ubuntu 9.1 after
close/reopen the LID. And I also reproduce this issue on another laptop.
After some tests and debug, it seems that it is related with that the
LVDS status is not updated in time in course of suspend/resume.

Now the LID state is used to check whether the LVDS is connected or
disconnected. And when the LID is closed, it means that the LVDS is
disconnected. When it is reopened, it means that the LVDS is connected.
At the same time on some distributions the LID event is also used to put
the system into suspend state. When the LID is closed, the system will enter
the suspend state. When the LID is reopened, the system will be resumed.

In such case when the LID is closed, user-space script will receive the LID
notification event and detect the LVDS as disconnected. Then the system will
enter the suspended state. When the LID is reopened, the system will be
resumed. As the LVDS status is not updated in course of resume, it will cause
that the LVDS connector is marked as unused and disabled. After the resume is
finished,user-space script will try to configure the display mode for LVDS.
But unfortunately as the LVDS status is not updated in time and it is still
marked as disconnected, the LVDS and its corresponding CRTC will be disabled
again in the function of drm\_helper\_disable\_unused\_functions after changing
mode for LVDS.

So we had better check and update the status of LVDS connector after receiving
the LID notication event. Then after the system is resumed from suspended
state, we can set the display mode for LVDS correctly.

Signed-off-by: Zhao Yakui <yakui...@intel.com>
Reported-by: Dirk Hohndel <hoh...@infradead.org>
Reviewed-by: Jesse Barnes <jba...@virtuousgeek.org>
Signed-off-by: Eric Anholt <er...@anholt.net>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/gpu/drm/i915/i915\_drv.h | 1 +
 drivers/gpu/drm/i915/intel\_lvds.c | 9 +++++++++
 2 files changed, 10 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915\_drv.h b/drivers/gpu/drm/i915/i915\_drv.h
index ecbafd0..791fded 100644
--- a/drivers/gpu/drm/i915/i915\_drv.h
+++ b/drivers/gpu/drm/i915/i915\_drv.h
@@ -546,6 +546,7 @@ typedef struct drm\_i915\_private {
 struct timer\_list idle\_timer;
 bool busy;
 u16 orig\_clock;
+ struct drm\_connector \*int\_lvds\_connector;
 } drm\_i915\_private\_t;

 /\*\* driver private structure attached to each drm\_gem\_object \*/
diff --git a/drivers/gpu/drm/i915/intel\_lvds.c b/drivers/gpu/drm/i915/intel\_lvds.c
index 05598ae..0e0e4b4 100644
--- a/drivers/gpu/drm/i915/intel\_lvds.c
+++ b/drivers/gpu/drm/i915/intel\_lvds.c
@@ -679,7 +679,14 @@ static int intel\_lid\_notify(struct notifier\_block \*nb, unsigned long val,
 struct drm\_i915\_private \*dev\_priv =
 container\_of(nb, struct drm\_i915\_private, lid\_notifier);
 struct drm\_device \*dev = dev\_priv->dev;
+ struct drm\_connector \*connector = dev\_priv->int\_lvds\_connector;

+ /\*
+ \* check and update the status of LVDS connector after receiving
+ \* the LID nofication event.
+ \*/
+ if (connector)
+ connector->status = connector->funcs->detect(connector);
 if (!acpi\_lid\_open()) {
 dev\_priv->modeset\_on\_lid = 1;
 return NOTIFY\_OK;
@@ -1085,6 +1092,8 @@ out:
 DRM\_DEBUG("lid notifier registration failed\n");
 dev\_priv->lid\_notifier.notifier\_call = NULL;
 }
+ /\* keep the LVDS connector \*/
+ dev\_priv->int\_lvds\_connector = connector;
 drm\_sysfs\_connector\_add(connector);
 return;

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:03 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Adrian Hunter <adrian...@nokia.com>

commit 5fa83ce284a4b7cd9dcfadd01500b0ed4ab9b740 upstream.

The main bug was that 'blk\_cleanup\_queue()' was called while the block
device could still be in use, for example, because the card was removed
while files were still open.

In addition, to be sure that 'mmc\_request()' will get called for all new
requests (so it can error them out), the queue is emptied during cleanup.
This is done after the worker thread is stopped to avoid racing with it.

Finally, it is not a device error for this to be happening, so quiet the
(sometimes very many) error messages.

Signed-off-by: Adrian Hunter <adrian...@nokia.com>
Cc: <linu...@vger.kernel.org>
Signed-off-by: Andrew Morton <ak...@linux-foundation.org>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/mmc/card/block.c | 2 ++
 drivers/mmc/card/queue.c | 18 +++++++++---------
 2 files changed, 11 insertions(+), 9 deletions(-)

diff --git a/drivers/mmc/card/block.c b/drivers/mmc/card/block.c
index ee87911..1f552c6 100644
--- a/drivers/mmc/card/block.c
+++ b/drivers/mmc/card/block.c
@@ -91,6 +91,8 @@ static void mmc\_blk\_put(struct mmc\_blk\_data \*md)
 if (!devmaj)

 devidx = md->disk->first\_minor >> MMC\_SHIFT;

+ blk\_cleanup\_queue(md->queue.queue);

+
 \_\_clear\_bit(devidx, dev\_use);

 put\_disk(md->disk);

diff --git a/drivers/mmc/card/queue.c b/drivers/mmc/card/queue.c
index 49e5823..c5a7a85 100644
--- a/drivers/mmc/card/queue.c
+++ b/drivers/mmc/card/queue.c
@@ -90,9 +90,10 @@ static void mmc\_request(struct request\_queue \*q)
 struct request \*req;

 if (!mq) {
- printk(KERN\_ERR "MMC: killing requests for dead queue\n");
- while ((req = blk\_fetch\_request(q)) != NULL)
+ while ((req = blk\_fetch\_request(q)) != NULL) {
+ req->cmd\_flags |= REQ\_QUIET;
 \_\_blk\_end\_request\_all(req, -EIO);
+ }
 return;
 }

@@ -223,17 +224,18 @@ void mmc\_cleanup\_queue(struct mmc\_queue \*mq)
 struct request\_queue \*q = mq->queue;
 unsigned long flags;

- /\* Mark that we should start throwing out stragglers \*/
- spin\_lock\_irqsave(q->queue\_lock, flags);
- q->queuedata = NULL;
- spin\_unlock\_irqrestore(q->queue\_lock, flags);
-
 /\* Make sure the queue isn't suspended, as that will deadlock \*/
 mmc\_queue\_resume(mq);

 /\* Then terminate our worker thread \*/
 kthread\_stop(mq->thread);

+ /\* Empty the queue \*/
+ spin\_lock\_irqsave(q->queue\_lock, flags);
+ q->queuedata = NULL;
+ blk\_start\_queue(q);
+ spin\_unlock\_irqrestore(q->queue\_lock, flags);
+
 if (mq->bounce\_sg)
 kfree(mq->bounce\_sg);
 mq->bounce\_sg = NULL;
@@ -245,8 +247,6 @@ void mmc\_cleanup\_queue(struct mmc\_queue \*mq)
 kfree(mq->bounce\_buf);
 mq->bounce\_buf = NULL;

- blk\_cleanup\_queue(mq->queue);
-
 mq->card = NULL;
 }
 EXPORT\_SYMBOL(mmc\_cleanup\_queue);

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:01 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Christoph Hellwig <h...@lst.de>

commit 7211a4e859ad070b28545c06e0a6cb60b3b8aa31 upstream.

nfsd is not using vfs\_fsync, so I missed it when changing the calling
convention during the 2.6.32 window. This patch fixes it to not only
start the data writeout, but also wait for it to complete before calling
into ->fsync.

Signed-off-by: Christoph Hellwig <h...@lst.de>
Signed-off-by: J. Bruce Fields <bfi...@citi.umich.edu>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

fs/nfsd/vfs.c | 5 +----
 1 files changed, 1 insertions(+), 4 deletions(-)

diff --git a/fs/nfsd/vfs.c b/fs/nfsd/vfs.c
index a293f02..570dd1c 100644
--- a/fs/nfsd/vfs.c
+++ b/fs/nfsd/vfs.c
@@ -774,12 +774,9 @@ static inline int nfsd\_dosync(struct file \*filp, struct dentry \*dp,
 int (\*fsync) (struct file \*, struct dentry \*, int);
 int err;

- err = filemap\_fdatawrite(inode->i\_mapping);
+ err = filemap\_write\_and\_wait(inode->i\_mapping);
 if (err == 0 && fop && (fsync = fop->fsync))
 err = fsync(filp, dp, 0);
- if (err == 0)
- err = filemap\_fdatawait(inode->i\_mapping);
-
 return err;

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:02 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Trond Myklebust <Trond.M...@netapp.com>

commit 14ace024b1e16d2bb9445c8387494fbbd820a738 upstream.

If the context allocation fails, the function currently returns a random
error code, since the variable 'p' still points to a valid memory location.

Ensure that it returns ENOMEM...

Signed-off-by: Trond Myklebust <Trond.M...@netapp.com>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

net/sunrpc/auth\_gss/gss\_krb5\_mech.c | 4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/net/sunrpc/auth\_gss/gss\_krb5\_mech.c b/net/sunrpc/auth\_gss/gss\_krb5\_mech.c
index ef45eba..2deb0ed 100644
--- a/net/sunrpc/auth\_gss/gss\_krb5\_mech.c
+++ b/net/sunrpc/auth\_gss/gss\_krb5\_mech.c
@@ -131,8 +131,10 @@ gss\_import\_sec\_context\_kerberos(const void \*p,
 struct krb5\_ctx \*ctx;
 int tmp;

- if (!(ctx = kzalloc(sizeof(\*ctx), GFP\_NOFS)))
+ if (!(ctx = kzalloc(sizeof(\*ctx), GFP\_NOFS))) {
+ p = ERR\_PTR(-ENOMEM);
 goto out\_err;
+ }

 p = simple\_get\_bytes(p, end, &ctx->initiate, sizeof(ctx->initiate));
 if (IS\_ERR(p))

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:03 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Trond Myklebust <Trond.M...@netapp.com>

commit b891e4a05ef6beac85465295a032431577c66b16 upstream.

If the context allocation fails, it will return GSS\_S\_FAILURE, which is
neither a valid error code, nor is it even negative.

Return ENOMEM instead...

Reported-by: Jeff Layton <jla...@redhat.com>

Signed-off-by: Trond Myklebust <Trond.M...@netapp.com>
Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

net/sunrpc/auth\_gss/gss\_mech\_switch.c | 2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/net/sunrpc/auth\_gss/gss\_mech\_switch.c b/net/sunrpc/auth\_gss/gss\_mech\_switch.c
index 6efbb0c..76e4c6f 100644
--- a/net/sunrpc/auth\_gss/gss\_mech\_switch.c
+++ b/net/sunrpc/auth\_gss/gss\_mech\_switch.c
@@ -252,7 +252,7 @@ gss\_import\_sec\_context(const void \*input\_token, size\_t bufsize,
 struct gss\_ctx \*\*ctx\_id)
 {
 if (!(\*ctx\_id = kzalloc(sizeof(\*\*ctx\_id), GFP\_KERNEL)))
- return GSS\_S\_FAILURE;
+ return -ENOMEM;
 (\*ctx\_id)->mech\_type = gss\_mech\_get(mech);

 return mech->gm\_ops

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:03 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Zhao Yakui <yakui...@intel.com>

commit 898822ce9561ab9b58a7eb60580a162a83dadecd upstream.

Enable/disable the dithering for LVDS based on VBT setting. On the 965/g4x
platform the dithering flag is defined in LVDS register. And on the ironlake
the dithering flag is defined in pipeconf register.

Signed-off-by: Zhao Yakui <yakui...@intel.com>
Signed-off-by: Eric Anholt <er...@anholt.net>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/gpu/drm/i915/i915\_reg.h | 4 ++++
 drivers/gpu/drm/i915/intel\_display.c | 15 ++++++++++++++-
 2 files changed, 18 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915\_reg.h b/drivers/gpu/drm/i915/i915\_reg.h
index 1687edf..54e5907 100644
--- a/drivers/gpu/drm/i915/i915\_reg.h
+++ b/drivers/gpu/drm/i915/i915\_reg.h
@@ -968,6 +968,8 @@
 #define LVDS\_PORT\_EN (1 << 31)
 /\* Selects pipe B for LVDS data. Must be set on pre-965. \*/
 #define LVDS\_PIPEB\_SELECT (1 << 30)
+/\* LVDS dithering flag on 965/g4x platform \*/
+#define LVDS\_ENABLE\_DITHER (1 << 25)
 /\* Enable border for unscaled (or aspect-scaled) display \*/
 #define LVDS\_BORDER\_ENABLE (1 << 15)
 /\*
@@ -1737,6 +1739,8 @@

 /\* Display & cursor control \*/

+/\* dithering flag on Ironlake \*/
+#define PIPE\_ENABLE\_DITHER (1 << 4)
 /\* Pipe A \*/
 #define PIPEADSL 0x70000
 #define PIPEACONF 0x70008
diff --git a/drivers/gpu/drm/i915/intel\_display.c b/drivers/gpu/drm/i915/intel\_display.c
index f1de53b..2e7e521 100644
--- a/drivers/gpu/drm/i915/intel\_display.c
+++ b/drivers/gpu/drm/i915/intel\_display.c
@@ -3104,7 +3104,20 @@ static int intel\_crtc\_mode\_set(struct drm\_crtc \*crtc,
 \* appropriately here, but we need to look more thoroughly into how
 \* panels behave in the two modes.
 \*/
-
+ /\* set the dithering flag \*/
+ if (IS\_I965G(dev)) {
+ if (dev\_priv->lvds\_dither) {
+ if (IS\_IGDNG(dev))
+ pipeconf |= PIPE\_ENABLE\_DITHER;
+ else
+ lvds |= LVDS\_ENABLE\_DITHER;
+ } else {
+ if (IS\_IGDNG(dev))
+ pipeconf &= ~PIPE\_ENABLE\_DITHER;
+ else
+ lvds &= ~LVDS\_ENABLE\_DITHER;
+ }
+ }
 I915\_WRITE(lvds\_reg, lvds);
 I915\_READ(lvds\_reg);

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:05 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Zhao Yakui <yakui...@intel.com>

commit e5a95eb778690bc864eb330202d2c1b974caaeb4 upstream.

Select the correct BPC for LVDS on Ironlake. If it is 18-bit LVDS panel,
the BPC will be 6. When it is 24-bit LVDS panel, the BPC will 8.
At the same time the BPC will be 8 when the output device is CRT/HDMI/DP.

Signed-off-by: Zhao Yakui <yakui...@intel.com>
Signed-off-by: Eric Anholt <er...@anholt.net>
Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

drivers/gpu/drm/i915/intel\_display.c | 12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel\_display.c b/drivers/gpu/drm/i915/intel\_display.c
index d02016d..406b532 100644
--- a/drivers/gpu/drm/i915/intel\_display.c
+++ b/drivers/gpu/drm/i915/intel\_display.c
@@ -2901,6 +2901,18 @@ static int intel\_crtc\_mode\_set(struct drm\_crtc \*crtc,

 /\* determine panel color depth \*/
 temp = I915\_READ(pipeconf\_reg);
+ temp &= ~PIPE\_BPC\_MASK;
+ if (is\_lvds) {
+ int lvds\_reg = I915\_READ(PCH\_LVDS);
+ /\* the BPC will be 6 if it is 18-bit LVDS panel \*/
+ if ((lvds\_reg & LVDS\_A3\_POWER\_MASK) == LVDS\_A3\_POWER\_UP)
+ temp |= PIPE\_8BPC;
+ else
+ temp |= PIPE\_6BPC;
+ } else
+ temp |= PIPE\_8BPC;
+ I915\_WRITE(pipeconf\_reg, temp);
+ I915\_READ(pipeconf\_reg);

 switch (temp & PIPE\_BPC\_MASK) {
 case PIPE\_8BPC:

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:40:05 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Andi Kleen <an...@firstfloor.org>

commit b45c6e76bc2c72f6426c14bed64fdcbc9bf37cb0 upstream.

When print-fatal-signals is enabled it's possible to dump any memory
reachable by the kernel to the log by simply jumping to that address from
user space.

Or crash the system if there's some hardware with read side effects.

The fatal signals handler will dump 16 bytes at the execution address,
which is fully controlled by ring 3.

In addition when something jumps to a unmapped address there will be up to
16 additional useless page faults, which might be potentially slow (and at
least is not very efficient)

Fortunately this option is off by default and only there on i386.

But fix it by checking for kernel addresses and also stopping when there's
a page fault.

Signed-off-by: Andi Kleen <a...@linux.intel.com>
Cc: Ingo Molnar <mi...@elte.hu>
Cc: Oleg Nesterov <ol...@redhat.com>

Signed-off-by: Andrew Morton <ak...@linux-foundation.org>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>
Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

kernel/signal.c | 3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/kernel/signal.c b/kernel/signal.c
index 6705320..4d0658d 100644
--- a/kernel/signal.c
+++ b/kernel/signal.c
@@ -939,7 +939,8 @@ static void print\_fatal\_signal(struct pt\_regs \*regs, int signr)
 for (i = 0; i < 16; i++) {
 unsigned char insn;

- \_\_get\_user(insn, (unsigned char \*)(regs->ip + i));
+ if (get\_user(insn, (unsigned char \*)(regs->ip + i)))
+ break;
 printk("%02x ", insn);

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:50:01 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Xiaotian Feng <df...@redhat.com>

commit b292cf9ce70d221c3f04ff62db5ab13d9a249ca8 upstream.

There're some warnings of "nfsd: peername failed (err 107)!"
socket error -107 means Transport endpoint is not connected.
This warning message was outputed by svc\_tcp\_accept() [net/sunrpc/svcsock.c],
when kernel\_getpeername returns -107. This means socket might be CLOSED.

And svc\_tcp\_accept was called by svc\_recv() [net/sunrpc/svc\_xprt.c]

if (test\_bit(XPT\_LISTENER, &xprt->xpt\_flags)) {
 <snip>
 newxpt = xprt->xpt\_ops->xpo\_accept(xprt);
 <snip>

So this might happen when xprt->xpt\_flags has both XPT\_LISTENER and XPT\_CLOSE.

Let's take a look at commit b0401d72, this commit has moved the close
processing after do recvfrom method, but this commit also introduces this
warnings, if the xpt\_flags has both XPT\_LISTENER and XPT\_CLOSED, we should
close it, not accpet then close.

Signed-off-by: Xiaotian Feng <df...@redhat.com>
Cc: J. Bruce Fields <bfi...@fieldses.org>
Cc: Neil Brown <ne...@suse.de>
Cc: Trond Myklebust <Trond.M...@netapp.com>

Cc: David S. Miller <da...@davemloft.net>

Cc: Nikola Ciprich <extma...@linuxbox.cz>

Signed-off-by: J. Bruce Fields <bfi...@citi.umich.edu>
Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

net/sunrpc/svc\_xprt.c | 3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/net/sunrpc/svc\_xprt.c b/net/sunrpc/svc\_xprt.c
index df124f7..0266cca 100644
--- a/net/sunrpc/svc\_xprt.c
+++ b/net/sunrpc/svc\_xprt.c
@@ -711,7 +711,8 @@ int svc\_recv(struct svc\_rqst \*rqstp, long timeout)
 spin\_unlock\_bh(&pool->sp\_lock);

 len = 0;
- if (test\_bit(XPT\_LISTENER, &xprt->xpt\_flags)) {
+ if (test\_bit(XPT\_LISTENER, &xprt->xpt\_flags) &&
+ !test\_bit(XPT\_CLOSE, &xprt->xpt\_flags)) {
 struct svc\_xprt \*newxpt;
 newxpt = xprt->xpt\_ops->xpo\_accept(xprt);
 if (newxpt) {

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:50:01 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Guennadi Liakhovetski <g.liakh...@gmx.de>

commit b3172f222ab5afdc91ea058bd11c42cf169728f3 upstream.

Sevelar ASoC codec drivers wrongly assume, that the params\_rate() macro
returns one of SNDRV\_PCM\_RATE\_\* defines instead of the actual numerical
sampling rate. Fix them.

Signed-off-by: Guennadi Liakhovetski <g.liakh...@gmx.de>
Acked-by: Liam Girdwood <l...@slimlogic.co.uk>
Signed-off-by: Mark Brown <bro...@opensource.wolfsonmicro.com>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

sound/soc/codecs/wm8510.c | 14 +++++++-------
 sound/soc/codecs/wm8940.c | 14 +++++++-------
 sound/soc/codecs/wm8974.c | 14 +++++++-------
 3 files changed, 21 insertions(+), 21 deletions(-)

diff --git a/sound/soc/codecs/wm8510.c b/sound/soc/codecs/wm8510.c
index 060d5d0..8db62e2 100644
--- a/sound/soc/codecs/wm8510.c
+++ b/sound/soc/codecs/wm8510.c
@@ -425,23 +425,23 @@ static int wm8510\_pcm\_hw\_params(struct snd\_pcm\_substream \*substream,

 /\* filter coefficient \*/
 switch (params\_rate(params)) {
- case SNDRV\_PCM\_RATE\_8000:
+ case 8000:
 adn |= 0x5 << 1;
 break;
- case SNDRV\_PCM\_RATE\_11025:
+ case 11025:
 adn |= 0x4 << 1;
 break;
- case SNDRV\_PCM\_RATE\_16000:
+ case 16000:
 adn |= 0x3 << 1;
 break;
- case SNDRV\_PCM\_RATE\_22050:
+ case 22050:
 adn |= 0x2 << 1;
 break;
- case SNDRV\_PCM\_RATE\_32000:
+ case 32000:
 adn |= 0x1 << 1;
 break;
- case SNDRV\_PCM\_RATE\_44100:
- case SNDRV\_PCM\_RATE\_48000:
+ case 44100:
+ case 48000:
 break;
 }

diff --git a/sound/soc/codecs/wm8940.c b/sound/soc/codecs/wm8940.c
index 1ef2454..63bc2ae 100644
--- a/sound/soc/codecs/wm8940.c
+++ b/sound/soc/codecs/wm8940.c
@@ -379,23 +379,23 @@ static int wm8940\_i2s\_hw\_params(struct snd\_pcm\_substream \*substream,
 iface |= (1 << 9);

 switch (params\_rate(params)) {
- case SNDRV\_PCM\_RATE\_8000:
+ case 8000:
 addcntrl |= (0x5 << 1);
 break;
- case SNDRV\_PCM\_RATE\_11025:
+ case 11025:
 addcntrl |= (0x4 << 1);
 break;
- case SNDRV\_PCM\_RATE\_16000:
+ case 16000:
 addcntrl |= (0x3 << 1);
 break;
- case SNDRV\_PCM\_RATE\_22050:
+ case 22050:
 addcntrl |= (0x2 << 1);
 break;
- case SNDRV\_PCM\_RATE\_32000:
+ case 32000:
 addcntrl |= (0x1 << 1);
 break;
- case SNDRV\_PCM\_RATE\_44100:
- case SNDRV\_PCM\_RATE\_48000:
+ case 44100:
+ case 48000:
 break;
 }
 ret = snd\_soc\_write(codec, WM8940\_ADDCNTRL, addcntrl);
diff --git a/sound/soc/codecs/wm8974.c b/sound/soc/codecs/wm8974.c
index b0bd1c0..0dbf6fe 100644
--- a/sound/soc/codecs/wm8974.c
+++ b/sound/soc/codecs/wm8974.c
@@ -480,23 +480,23 @@ static int wm8974\_pcm\_hw\_params(struct snd\_pcm\_substream \*substream,

 /\* filter coefficient \*/
 switch (params\_rate(params)) {
- case SNDRV\_PCM\_RATE\_8000:
+ case 8000:
 adn |= 0x5 << 1;
 break;
- case SNDRV\_PCM\_RATE\_11025:
+ case 11025:
 adn |= 0x4 << 1;
 break;
- case SNDRV\_PCM\_RATE\_16000:
+ case 16000:
 adn |= 0x3 << 1;
 break;
- case SNDRV\_PCM\_RATE\_22050:
+ case 22050:
 adn |= 0x2 << 1;
 break;
- case SNDRV\_PCM\_RATE\_32000:
+ case 32000:
 adn |= 0x1 << 1;
 break;
- case SNDRV\_PCM\_RATE\_44100:
- case SNDRV\_PCM\_RATE\_48000:
+ case 44100:
+ case 48000:
 break;

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:50:01 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Linus Torvalds <torv...@linux-foundation.org>

commit 53281b6d34d44308372d16acb7fb5327609f68b6 upstream.

Yes, the add and remove cases do share the same basic loop and the
locking, but the compiler can inline and then CSE some of the end result
anyway. And splitting it up makes the code way easier to follow,
and makes it clearer exactly what the semantics are.

In particular, we must make sure that the FASYNC flag in file->f\_flags
exactly matches the state of "is this file on any fasync list", since
not only is that flag visible to user space (F\_GETFL), but we also use
that flag to check whether we need to remove any fasync entries on file
close.

We got that wrong for the case of a mixed use of file locking (which
tries to remove any fasync entries for file leases) and fasync.

Splitting the function up also makes it possible to do some future
optimizations without making the function even messier. In particular,
since the FASYNC flag has to match the state of "is this on a list", we
can do the following future optimizations:

- on remove, we don't even need to get the locks and traverse the list
 if FASYNC isn't set, since we can know a priori that there is no
 point (this is effectively the same optimization that we already do
 in \_\_fput() wrt removing fasync on file close)

- on add, we can use the FASYNC flag to decide whether we are changing
 an existing entry or need to allocate a new one.

but this is just the cleanup + fix for the FASYNC flag.

Acked-by: Al Viro <vi...@ZenIV.linux.org.uk>
Tested-by: Tavis Ormandy <tav...@google.com>
Cc: Jeff Dike <jd...@addtoit.com>
Cc: Matt Mackall <m...@selenic.com>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

fs/fcntl.c | 102 ++++++++++++++++++++++++++++++++++++++---------------------
 1 files changed, 66 insertions(+), 36 deletions(-)

diff --git a/fs/fcntl.c b/fs/fcntl.c
index 2cf93ec..97e01dc 100644
--- a/fs/fcntl.c
+++ b/fs/fcntl.c
@@ -618,60 +618,90 @@ static DEFINE\_RWLOCK(fasync\_lock);
 static struct kmem\_cache \*fasync\_cache \_\_read\_mostly;

 /\*
- \* fasync\_helper() is used by almost all character device drivers
- \* to set up the fasync queue. It returns negative on error, 0 if it did
- \* no changes and positive if it added/deleted the entry.
+ \* Remove a fasync entry. If successfully removed, return
+ \* positive and clear the FASYNC flag. If no entry exists,
+ \* do nothing and return 0.
+ \*
+ \* NOTE! It is very important that the FASYNC flag always
+ \* match the state "is the filp on a fasync list".
+ \*
+ \* We always take the 'filp->f\_lock', in since fasync\_lock
+ \* needs to be irq-safe.
 \*/
-int fasync\_helper(int fd, struct file \* filp, int on, struct fasync\_struct \*\*fapp)
+static int fasync\_remove\_entry(struct file \*filp, struct fasync\_struct \*\*fapp)
 {
 struct fasync\_struct \*fa, \*\*fp;
- struct fasync\_struct \*new = NULL;
 int result = 0;

- if (on) {
- new = kmem\_cache\_alloc(fasync\_cache, GFP\_KERNEL);
- if (!new)
- return -ENOMEM;
+ spin\_lock(&filp->f\_lock);
+ write\_lock\_irq(&fasync\_lock);
+ for (fp = fapp; (fa = \*fp) != NULL; fp = &fa->fa\_next) {
+ if (fa->fa\_file != filp)
+ continue;
+ \*fp = fa->fa\_next;
+ kmem\_cache\_free(fasync\_cache, fa);
+ filp->f\_flags &= ~FASYNC;
+ result = 1;
+ break;
 }
+ write\_unlock\_irq(&fasync\_lock);
+ spin\_unlock(&filp->f\_lock);
+ return result;
+}
+
+/\*
+ \* Add a fasync entry. Return negative on error, positive if
+ \* added, and zero if did nothing but change an existing one.
+ \*
+ \* NOTE! It is very important that the FASYNC flag always
+ \* match the state "is the filp on a fasync list".
+ \*/
+static int fasync\_add\_entry(int fd, struct file \*filp, struct fasync\_struct \*\*fapp)
+{
+ struct fasync\_struct \*new, \*fa, \*\*fp;
+ int result = 0;
+
+ new = kmem\_cache\_alloc(fasync\_cache, GFP\_KERNEL);
+ if (!new)
+ return -ENOMEM;

- /\*
- \* We need to take f\_lock first since it's not an IRQ-safe
- \* lock.
- \*/
 spin\_lock(&filp->f\_lock);
 write\_lock\_irq(&fasync\_lock);
 for (fp = fapp; (fa = \*fp) != NULL; fp = &fa->fa\_next) {
- if (fa->fa\_file == filp) {
- if(on) {
- fa->fa\_fd = fd;
- kmem\_cache\_free(fasync\_cache, new);
- } else {
- \*fp = fa->fa\_next;
- kmem\_cache\_free(fasync\_cache, fa);
- result = 1;
- }
- goto out;
- }
+ if (fa->fa\_file != filp)
+ continue;
+ fa->fa\_fd = fd;
+ kmem\_cache\_free(fasync\_cache, new);
+ goto out;
 }

- if (on) {
- new->magic = FASYNC\_MAGIC;
- new->fa\_file = filp;
- new->fa\_fd = fd;
- new->fa\_next = \*fapp;
- \*fapp = new;
- result = 1;
- }
+ new->magic = FASYNC\_MAGIC;
+ new->fa\_file = filp;
+ new->fa\_fd = fd;
+ new->fa\_next = \*fapp;
+ \*fapp = new;
+ result = 1;
+ filp->f\_flags |= FASYNC;
+
 out:
- if (on)
- filp->f\_flags |= FASYNC;
- else
- filp->f\_flags &= ~FASYNC;
 write\_unlock\_irq(&fasync\_lock);
 spin\_unlock(&filp->f\_lock);
 return result;
 }

+/\*
+ \* fasync\_helper() is used by almost all character device drivers
+ \* to set up the fasync queue, and for regular files by the file
+ \* lease code. It returns negative on error, 0 if it did no changes
+ \* and positive if it added/deleted the entry.
+ \*/
+int fasync\_helper(int fd, struct file \* filp, int on, struct fasync\_struct \*\*fapp)
+{
+ if (!on)
+ return fasync\_remove\_entry(filp, fapp);
+ return fasync\_add\_entry(fd, filp, fapp);
+}
+
 EXPORT\_SYMBOL(fasync\_helper);

 void \_\_kill\_fasync(struct fasync\_struct \*fa, int sig, int band)

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:50:02 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Rusty Russell <ru...@rustcorp.com.au>

commit db677ffa5f5a4f15b9dad4d132b3477b80766d82 upstream.

This reverts commit ae1b22f6e46c03cede7cea234d0bf2253b4261cf.

As Linus said in 982d007a6ee: "There was something really messy about
cmpxchg8b and clone CPU's, so if you enable it on other CPUs later, do it
carefully."

This breaks lguest for those configs, but we can fix that by emulating
if we have to.

Fixes: <http://bugzilla.kernel.org/show_bug.cgi?id=14884>
Signed-off-by: Rusty Russell <ru...@rustcorp.com.au>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

arch/x86/Kconfig.cpu | 2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/x86/Kconfig.cpu b/arch/x86/Kconfig.cpu
index 2649840..f2824fb 100644
--- a/arch/x86/Kconfig.cpu
+++ b/arch/x86/Kconfig.cpu
@@ -400,7 +400,7 @@ config X86\_TSC

 config X86\_CMPXCHG64
 def\_bool y
- depends on !M386 && !M486
+ depends on X86\_PAE || X86\_64 || MCORE2 || MPENTIUM4 || MPENTIUMM || MPENTIUMIII || MPENTIUMII || M686 || MATOM

 # this should be set for all -march=.. options where the compiler
 # generates cmov.

![Greg Kroah-Hartman's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg Kroah-Hartman

unread,Jan 14, 2010, 10:50:02 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto From: Ben Hutchings <b...@decadent.org.uk>

commit 10b465aaf9536ee5a16652fa0700740183d48ec9 upstream.

Commit 35dead4 "modules: don't export section names of empty sections
via sysfs" changed the set of sections that have attributes, but did
not change the iteration over these attributes in add\_notes\_attrs().
This can lead to add\_notes\_attrs() creating attributes with the wrong
names or with null name pointers.

Introduce a sect\_empty() function and use it in both add\_sect\_attrs()
and add\_notes\_attrs().

Reported-by: Martin Michlmayr <t...@cyrius.com>
Signed-off-by: Ben Hutchings <b...@decadent.org.uk>
Tested-by: Martin Michlmayr <t...@cyrius.com>

Signed-off-by: Rusty Russell <ru...@rustcorp.com.au>
Signed-off-by: Linus Torvalds <torv...@linux-foundation.org>

Signed-off-by: Greg Kroah-Hartman <gre...@suse.de>
---

kernel/module.c | 17 ++++++++++-------
 1 files changed, 10 insertions(+), 7 deletions(-)

diff --git a/kernel/module.c b/kernel/module.c
index 5842a71..37caef0 100644
--- a/kernel/module.c
+++ b/kernel/module.c
@@ -1146,6 +1146,12 @@ static const struct kernel\_symbol \*resolve\_symbol(Elf\_Shdr \*sechdrs,
 \* J. Corbet <cor...@lwn.net>
 \*/
 #if defined(CONFIG\_KALLSYMS) && defined(CONFIG\_SYSFS)
+
+static inline bool sect\_empty(const Elf\_Shdr \*sect)
+{
+ return !(sect->sh\_flags & SHF\_ALLOC) || sect->sh\_size == 0;
+}
+
 struct module\_sect\_attr
 {
 struct module\_attribute mattr;
@@ -1187,8 +1193,7 @@ static void add\_sect\_attrs(struct module \*mod, unsigned int nsect,

 /\* Count loaded sections and allocate structures \*/
 for (i = 0; i < nsect; i++)
- if (sechdrs[i].sh\_flags & SHF\_ALLOC
- && sechdrs[i].sh\_size)
+ if (!sect\_empty(&sechdrs[i]))
 nloaded++;
 size[0] = ALIGN(sizeof(\*sect\_attrs)
 + nloaded \* sizeof(sect\_attrs->attrs[0]),
@@ -1206,9 +1211,7 @@ static void add\_sect\_attrs(struct module \*mod, unsigned int nsect,
 sattr = &sect\_attrs->attrs[0];
 gattr = &sect\_attrs->grp.attrs[0];
 for (i = 0; i < nsect; i++) {
- if (! (sechdrs[i].sh\_flags & SHF\_ALLOC))
- continue;
- if (!sechdrs[i].sh\_size)
+ if (sect\_empty(&sechdrs[i]))
 continue;
 sattr->address = sechdrs[i].sh\_addr;
 sattr->name = kstrdup(secstrings + sechdrs[i].sh\_name,
@@ -1292,7 +1295,7 @@ static void add\_notes\_attrs(struct module \*mod, unsigned int nsect,
 /\* Count notes sections and allocate structures. \*/
 notes = 0;
 for (i = 0; i < nsect; i++)
- if ((sechdrs[i].sh\_flags & SHF\_ALLOC) &&
+ if (!sect\_empty(&sechdrs[i]) &&
 (sechdrs[i].sh\_type == SHT\_NOTE))
 ++notes;

@@ -1308,7 +1311,7 @@ static void add\_notes\_attrs(struct module \*mod, unsigned int nsect,
 notes\_attrs->notes = notes;
 nattr = &notes\_attrs->attrs[0];
 for (loaded = i = 0; i < nsect; ++i) {
- if (!(sechdrs[i].sh\_flags & SHF\_ALLOC))
+ if (sect\_empty(&sechdrs[i]))
 continue;
 if (sechdrs[i].sh\_type == SHT\_NOTE) {
 nattr->[attr.name](http://attr.name) = mod->sect\_attrs->attrs[loaded].name;

![Ben Hutchings's profile photo](//lh3.googleusercontent.com/a-/ALV-UjWoz2WrZSA8BOtFiI88mMvUorEaaSGrzcEHX161EVfwNz30bg=s40-c)
### Ben Hutchings

unread,Jan 14, 2010, 11:40:01 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto On Thu, 2010-01-14 at 14:26 -0800, Greg Kroah-Hartman wrote:
> From: Zhenyu Wang <zhenyu...@intel.com>
>
> commit e6be8d9d17bd44061116f601fe2609b3ace7aa69 upstream.
>
> drm\_pci\_alloc() has input of address mask for setting pci dma
> mask on the device, which should be properly setup by drm driver.
> And leave it as a param for drm\_pci\_alloc() would cause confusion
> or mistake would corrupt the correct dma mask setting, as seen on
> intel hw which set wrong dma mask for hw status page. So remove
> it from drm\_pci\_alloc() function.

Based on comments at <<http://bugs.freedesktop.org/show_bug.cgi?id=25510>>
I think we also need this fix:

commit fc61901373987ad61851ed001fe971f3ee8d96a3
Author: David Woodhouse <dw...@infradead.org>
Date: Wed Dec 2 11:00:05 2009 +0000

agp/intel-agp: Clear entire GTT on startup

Ben.

--
Ben Hutchings
The generation of random numbers is too important to be left to chance.
 - Robert Coveyou

signature.asc[](https://groups.google.com/group/linux.kernel/attach/51701777e435872e/signature.asc?part=0.1)![Greg KH's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg KH

unread,Jan 14, 2010, 11:50:02 PM1/14/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto On Thu, Jan 14, 2010 at 11:38:48PM +0000, Ben Hutchings wrote:
> On Thu, 2010-01-14 at 14:26 -0800, Greg Kroah-Hartman wrote:
> > From: Zhenyu Wang <zhenyu...@intel.com>
> >
> > commit e6be8d9d17bd44061116f601fe2609b3ace7aa69 upstream.
> >
> > drm\_pci\_alloc() has input of address mask for setting pci dma
> > mask on the device, which should be properly setup by drm driver.
> > And leave it as a param for drm\_pci\_alloc() would cause confusion
> > or mistake would corrupt the correct dma mask setting, as seen on
> > intel hw which set wrong dma mask for hw status page. So remove
> > it from drm\_pci\_alloc() function.
>
> Based on comments at <<http://bugs.freedesktop.org/show_bug.cgi?id=25510>>
> I think we also need this fix:
>
> commit fc61901373987ad61851ed001fe971f3ee8d96a3
> Author: David Woodhouse <dw...@infradead.org>
> Date: Wed Dec 2 11:00:05 2009 +0000
>
> agp/intel-agp: Clear entire GTT on startup
>
> Ben.

Ok, I can add that as well, if the Intel / DRM people do not object.

Anyone?

thanks,

greg k-h

![Zhenyu Wang's profile photo](//lh3.googleusercontent.com/a-/ALV-UjWdECpabyEOqonNyxPAs9ITyvWnDg6Ei2Sj_S4qljjXwR-dMA=s40-c)
### Zhenyu Wang

unread,Jan 15, 2010, 1:00:01 AM1/15/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto On 2010.01.14 15:45:16 -0800, Greg KH wrote:
> On Thu, Jan 14, 2010 at 11:38:48PM +0000, Ben Hutchings wrote:
> > On Thu, 2010-01-14 at 14:26 -0800, Greg Kroah-Hartman wrote:
> > > From: Zhenyu Wang <zhenyu...@intel.com>
> > >
> > > commit e6be8d9d17bd44061116f601fe2609b3ace7aa69 upstream.
> > >
> > > drm\_pci\_alloc() has input of address mask for setting pci dma
> > > mask on the device, which should be properly setup by drm driver.
> > > And leave it as a param for drm\_pci\_alloc() would cause confusion
> > > or mistake would corrupt the correct dma mask setting, as seen on
> > > intel hw which set wrong dma mask for hw status page. So remove
> > > it from drm\_pci\_alloc() function.
> >
> > Based on comments at <<http://bugs.freedesktop.org/show_bug.cgi?id=25510>>
> > I think we also need this fix:
> >
> > commit fc61901373987ad61851ed001fe971f3ee8d96a3
> > Author: David Woodhouse <dw...@infradead.org>
> > Date: Wed Dec 2 11:00:05 2009 +0000
> >
> > agp/intel-agp: Clear entire GTT on startup
> >
> > Ben.
>
> Ok, I can add that as well, if the Intel / DRM people do not object.
>
> Anyone?
>

yeah, please add that one too, it's an important fix.

thanks.

--
Open Source Technology Center, Intel ltd.

$gpg --keyserver [wwwkeys.pgp.net](http://wwwkeys.pgp.net) --recv-keys 4D781827

signature.asc[](https://groups.google.com/group/linux.kernel/attach/cc890ac09912b37f/signature.asc?part=0.1&view=1)![Greg KH's profile photo](https://lh3.googleusercontent.com/a/default-user=s40-c)
### Greg KH

unread,Jan 16, 2010, 12:40:02 AM1/16/10DeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto 

Ok, I've queued it up now.

0 new messages

=== Content from www.debian.org_36bcee1d_20250125_212317.html ===

[![Debian](./Pics/openlogo-50.png)](./ "Debian Home")

[Skip Quicknav](#content)

* [Blog](https://bits.debian.org/ "Bits from Debian")
* [Micronews](https://micronews.debian.org "Micronews from Debian")
* [Planet](https://planet.debian.org/ "The Planet of Debian")

# Debian

# The Community

## Debian is a Community of People!

### DC24 Group Photo

![DebConf23 Group Photo](Pics/debconf24_group_photo.jpg)

### MiniDebConf Berlin 2024

![Group photo of the MiniDebConf Berlin 2024](Pics/mini-dc24-berlin.jpg)

### MiniDebConf BrasÃ­lia 2023

![Group photo of the MiniDebConf BrasÃ­lia 2023](Pics/mini-dc23-brasilia.jpg)

### Screenshot Calamares Installer

![Screenshot from the Calamares installer](Pics/calamares-bookworm.png)

### Debian is like a Swiss Army Knife

![Debian is like a Swiss Army Knife](Pics/debian-swiss-knife-hands-1024x576.jpg)

### People have fun with Debian

![Debian people at Debconf18 in Hsinchu really having fun](Pics/debian-funny-people-1024x576.jpg)

[![](Pics/users.svg)](intro/people)

## [People](intro/people)

Who we are and what we do

[![](Pics/heartbeat.svg)](intro/philosophy)

## [Our Philosophy](intro/philosophy)

Why we do it, and how we do it

[![](Pics/user-plus.svg)](devel/join/)

## [Get Involved, Contribute](devel/join/)

How you can join us!

[![](Pics/list.svg)](intro/index#community)

## [More...](intro/index#community)

Additional information about the Debian community

# The Operating System

## Debian is a complete Free Operating System!

![Debian](Pics/debian-logo-1024x576.png)
[Download](https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-12.9.0-amd64-netinst.iso)
[Other downloads](distrib)

[![](Pics/trophy.svg)](intro/why_debian)

## [Why Debian](intro/why_debian)

What makes Debian special

[![](Pics/life-ring.svg)](support)

## [User Support](support)

Getting help and documentation

[![](Pics/security.svg)](security/)

## [Security Updates](security/)

Debian Security Advisories (DSA)

[![](Pics/list.svg)](intro/index#software)

## [More...](intro/index#software)

Further links to downloads and software

---

# Project News

## News and Announcements about Debian

17January2025[The Debian Project mourns the loss of Steve Langasek (vorlon)](News/2025/20250117)
11January2025[Updated Debian 12: 12.9 released](News/2025/20250111)
19November2024[The Debian Project mourns the loss of JÃ©rÃ©my Bobbio (Lunar)](News/2024/20241119)
31August2024[Updated Debian 11: 11.11 released](News/2024/2024083102)
14August2024[Security support for Bullseye handed over to the LTS team](News/2024/20240814)

[All the news](News)
[RSS](News/news)

---

This page is also available in the following languages:
Select your language
català
dansk
Deutsch
español
français
Galego
Indonesia
Italiano
magyar
Nederlands
norsk (bokmål)
polski
Português
suomi
svenska
Tiếng Việt
Български (Bəlgarski)
Русский (Russkij)
українська (ukrajins'ka)
عربية (Arabiya)
中文(简)
中文(HK)
中文(繁)
한국어 (Korean)
Ελληνικά (Ellinika)
فارسی (Farsi)

How to set [the default document language](./intro/cn)

---

See our [contact page](./contact) to get in touch. Web site source code is [available](https://salsa.debian.org/webmaster-team/webwml).

Last Modified: Sat, Sep 16 13:09:56 UTC 2023

Last Built: Sun, Jan 19 23:26:10 UTC 2025

Copyright © 1997-2025 [SPI](https://www.spi-inc.org/) and others; See [license terms](./license)

Debian is a registered [trademark](./trademark) of Software in the Public Interest, Inc.



=== Content from marc.info_8d35ba60_20250125_212313.html ===

```
[[prev in list](?l=oss-security&m=126406719003308&w=2)] [[next in list](?l=oss-security&m=126408826630012&w=2)] [[prev in thread](?l=oss-security&m=126400443123998&w=2)] [next in thread]
List:       [oss-security](?l=oss-security&r=1&w=2)
Subject:    [Re: [oss-security] CVE request - kernel: untangle the do_mremap() mess](?t=126388199300001&r=1&w=2)
From:       [Marcus Meissner <meissner () suse ! de>](?a=101948123100001&r=1&w=2)
Date:       [2010-01-21 10:01:56](?l=oss-security&r=1&w=2&b=201001)
Message-ID: [20100121100156.GA28846 () suse ! de](?i=20100121100156.GA28846%20()%20suse%20!%20de)
[Download RAW [message](?l=oss-security&m=126406814304720&q=mbox) or [body](?l=oss-security&m=126406814304720&q=raw)]

On Wed, Jan 20, 2010 at 11:38:30AM +0800, Eugene Teo wrote:
> On 01/20/2010 04:41 AM, Josh Bressers wrote:
> >----- "Eugene Teo"<eugene@redhat.com>  wrote:
> >>There's a pile of upstream commits that fixed issues that can lead to
> >>
> >>user-triggerable panics on supported boxes:
> >><http://groups.google.com/group/linux.kernel/msg/895f20870532241e>.
> >>
> >><http://groups.google.co.jp/group/fa.linux.kernel/browse_thread/thread/8bf22336b1082090>
> >
> >I don't think CVE ids can be assigned to this without more information. I'm
> >not knowledgeable enough, nor do I have the time to properly understand
> >this list.
>
> And upstream continues to give us grief...
>
> Anyway, Al summarised the mess here:
> <http://marc.info/?l=linux-arch&m=126004438008670&w=2>
>
> And the pile of upstream commits were meant to address the problems
> described AFAIK. It will probably make more sense to associate all these
> related commits to just one CVE name.
>
> I rated these cvss2=7.2/AV:L/AC:L/Au:N/C:C/I:C/A:C.
>
> Here are the related links and patch descriptions:
> 6) fix pgoff in "have to relocate" case of mremap()
> 935874141df839c706cd6cdc438e85eb69d1525e
> <http://marc.info/?l=linux-kernel&m=126015825720659&w=2>

This is a long standing bug I think, where mremap with MREMAP_MAYMOVE set
of an address that was offset into a file seems to then use a different
offset into the file.

I cannot think of a security issue with it right now.

> 14) fix a struct file leak in do_mmap_pgoff()
> 8c7b49b3ecd48923eb64ff57e07a1cdb74782970
> <http://marc.info/?l=linux-kernel&m=126015815920509&w=2>

This one is likely a security issue.
The code however was introduced in 2.6.32, the hugetlb implementation
was very different in previous kernels.

Ciao, Marcus
[[prev in list](?l=oss-security&m=126406719003308&w=2)] [[next in list](?l=oss-security&m=126408826630012&w=2)] [[prev in thread](?l=oss-security&m=126400443123998&w=2)] [next in thread]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from www.redhat.com_fbb8d06e_20250125_212317.html ===

[Skip to content](#rhb-main-content)
## Featured links

* [![Red Hat Summit](/themes/custom/rh_base_ui/dist/img/red-hat-summit-logo.svg)](https://www.redhat.com/en/summit)
* [Support](https://access.redhat.com/)
* [Documentation](https://docs.redhat.com/en)
* [Console](https://cloud.redhat.com/)
* [Developers](https://developers.redhat.com/)
* [Start a trial](/en/products/trials)
* All Red Hat
  + For customers
    - [Customer support](https://access.redhat.com/)
    - [Subscription management](https://access.redhat.com/management)
    - [Support cases](https://access.redhat.com/support/cases)
    - [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
    - [Find a partner](https://catalog.redhat.com/partners)
  + For partners
    - [Partner portal](https://connect.redhat.com/partner-admin/dashboard)
    - [Partner support](https://connect.redhat.com/en/support)
    - [Become a partner](https://connect.redhat.com/)
  + Try, buy, & sell
    - [Red Hat Marketplace](https://marketplace.redhat.com/en-us)
    - [Red Hat Store](https://www.redhat.com/en/store)
    - [Contact sales](/en/contact)
    - [Start a trial](/en/products/trials)
  + Learning resources
    - [Documentation](https://docs.redhat.com/en)
    - [Training and certification](/en/services/training-and-certification)
    - [Hybrid cloud learning hub](https://cloud.redhat.com/learn)
    - [Interactive labs](/en/interactive-labs)
    - [Learning community](https://learn.redhat.com/)
    - [Red Hat TV](https://tv.redhat.com)
  + Open source communities
    - [Global advocacy](https://access.redhat.com/accelerators)
    - [How we contribute](/en/about/our-community-contributions)
[Red Hat](/en)

* [Products](https://www.redhat.com/en/technologies/all-products)
* [Solutions](https://www.redhat.com/en/solutions)
* [Training & services](https://www.redhat.com/en/services)
* [Resources](https://www.redhat.com/en/resources)
* Partners
* [About](https://www.redhat.com/en/about)
* Explore more
### Platform products

* [Red Hat Enterprise LinuxA flexible, stable operating system to support hybrid cloud innovation.](/en/technologies/linux-platforms/enterprise-linux)
* [Red Hat OpenShiftA container platform to build, modernize, and deploy applications at scale.](/en/technologies/cloud-computing/openshift)
* [Red Hat Ansible Automation PlatformNew versionA foundation for implementing enterprise-wide automation.](/en/technologies/management/ansible)
### Try & buy

* [Start a trialAssess a product with a no-cost trial.](/en/products/trials)
* [Buy onlineBuy select products and services in the Red Hat Store.](https://www.redhat.com/en/store)
* [Integrate with major cloud providersBuy Red Hat solutions using committed spend from providers, including:
  ![Cloud providers: Amazon Web Services, Microsoft Azure, and Google Cloud](https://www.redhat.com/rhdc/managed-files/cloud-providers-2x.png)](/en/partners/certified-cloud-and-service-providers)
### Featured

* [Red Hat Enterprise Linux AI](/en/technologies/linux-platforms/enterprise-linux/ai)
* [Red Hat OpenShift AI](/en/technologies/cloud-computing/openshift/openshift-ai)
* [Red Hat OpenShift Virtualization](/en/technologies/cloud-computing/openshift/virtualization)
* [Red Hat OpenShift Service on AWS](/en/technologies/cloud-computing/openshift/aws)
* [Microsoft Azure Red Hat OpenShift](/en/technologies/cloud-computing/openshift/azure)
[See all products](/en/technologies/all-products)

* [Application platformSimplify the way you build, deploy, manage, and secure apps across the hybrid cloud.](/en/solutions/application-platform)
* [Artificial intelligenceBuild, deploy, and monitor AI models and apps with Red Hat's open source platforms.](/en/solutions/ai)
* [Edge computingDeploy workloads closer to the source with security-focused edge technology.](/en/products/edge)

* [IT automationUnite disparate tech, teams, and environments with 1 comprehensive automation platform.](/en/solutions/it-automation)
* [Linux standardizationGet consistency across operating environments with an open, flexible infrastructure.](/en/solutions/linux-standardization)

* [SecurityDeliver software using trusted platforms and real-time security scanning and remediation.](/en/solutions/trusted-software-supply-chain)
* [VirtualizationModernize operations using a single platform for virtualized and containerized workloads.](/en/solutions/virtualization)
### By industry

* [Automotive](/en/solutions/automotive)
* [Financial services](/en/solutions/financial-services)
* [Healthcare](/en/solutions/healthcare)
* [Industrial sector](/en/solutions/industrial-sector)
* [Media and entertainment](/en/solutions/media-entertainment)
* [Public sector](/en/solutions/public-sector)
* [Telecommunications](/en/solutions/telecommunications)
[Explore solutions](/en/solutions)
### [Services](/en/services)

* [Consulting](/en/services/consulting)
* [Services for AI](/en/services/consulting/red-hat-consulting-for-ai)
* [Technical Account Management](/en/services/support/technical-account-management)
### [Training & certification](/en/services/training-and-certification)

* [All courses and exams](/en/services/training/all-courses-exams)
* [All certifications](/en/services/certifications)
* [Verify a certification](https://www.redhat.com/rhtapps/services/verify/)
* [Skills assessment](https://skills.ole.redhat.com)
* [Learning subscription](/en/services/training/learning-subscription)
* [Learning community](https://learn.redhat.com/)
* [Red Hat Academy](/en/services/training/red-hat-academy)
* [FAQs](/en/services/training-and-certification/faq)
* [Connect with learning experts](/en/services/training-and-certification/contact-us)
### Featured

* [Ansible Basics: Automation Technical Overview (No cost)](/en/services/training/do007-ansible-essentials-simplicity-automation-technical-overview)
* [Containers, Kubernetes and Red Hat OpenShift Technical Overview (No cost)](/en/services/training/do080-deploying-containerized-applications-technical-overview)
* [Red Hat Enterprise Linux Technical Overview (No cost)](/en/services/training/rh024-red-hat-linux-technical-overview)
* [Red Hat Certified System Administrator exam](/en/services/training/ex200-red-hat-certified-system-administrator-rhcsa-exam)
* [Red Hat System Administration I](/en/services/training/rh124-red-hat-system-administration-i)
[Explore services](/en/services)
### Topics

* [AI](/en/topics/ai)
* [Application modernization](/en/topics/application-modernization)
* [Automation](/en/topics/automation)
* [Cloud computing](/en/topics/cloud-computing)
* [Cloud-native applications](/en/topics/cloud-native-apps)
* [Containers](/en/topics/containers)
* [DevOps](/en/topics/devops)
* [Edge computing](/en/topics/edge-computing)
* [Linux](/en/topics/linux)
* [Virtualization](/en/topics/virtualization)
* [See all topics](/en/topics)
### Articles

* [What is InstructLab?](/en/topics/ai/what-is-instructlab)
* [What are cloud services?](/en/topics/cloud-computing/what-are-cloud-services)
* [What is edge computing?](/en/topics/edge-computing/what-is-edge-computing)
* [What is hybrid cloud?](/en/topics/cloud-computing/what-is-hybrid-cloud)
* [Why build a Red Hat cloud?](/en/topics/cloud-computing/why-choose-red-hat-cloud)
* [Cloud vs. edge](/en/topics/cloud-computing/cloud-vs-edge)
* [Red Hat OpenShift vs. Kubernetes](/en/technologies/cloud-computing/openshift/red-hat-openshift-kubernetes)
* [Learning Ansible basics](/en/topics/automation/learning-ansible-tutorial)
* [What is Linux?](/en/topics/linux/what-is-linux)
### More to explore

* [Blog](/en/blog)
* [Customer success stories](/en/success-stories)
* [Events and webinars](/en/events)
* [Newsroom](/en/about/newsroom)
* [Podcasts and video series](/en/red-hat-original-series)
* [Documentation](https://docs.redhat.com/en)
* [Resource library](/en/resources)
* [Training and certification](/en/services/training-and-certification)
[Explore resources](/en/resources)
### For customers

* [Our partners](/en/partners)
* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
* [Find a partner](https://catalog.redhat.com/partners)
### For partners

* [Partner Connect](https://connect.redhat.com)
* [Become a partner](https://connect.redhat.com/en/benefits-of-being-a-partner)
* [Training](https://connect.redhat.com/en/training)
* [Support](https://connect.redhat.com/en/support)
* [Access the partner portal](https://connect.redhat.com/partner-admin/dashboard)
### About us

* [Our company](/en/about/company)
* [How we work](/en/about/our-culture)
* [Our social impact](/en/about/community-social-responsibility)
* [Development model](/en/about/development-model)
* [Subscription model](/en/about/value-of-Red-Hat)
* [Product support](/en/services/support)
### Open source

* [Open source commitments](/en/about/open-source)
* [How we contribute](/en/about/our-community-contributions)
* [Red Hat on GitHub](https://github.com/RedHatOfficial)
### Company details

* [Analyst relations](/en/about/analysts)
* [Blog](/en/blog)
* [Locations](/en/about/office-locations)
* [Newsroom](/en/about/newsroom)
[Explore Red Hat](/en/about)[Contact us](/en/contact)For customers

* [Customer support](https://access.redhat.com/)* [Subscription management](https://access.redhat.com/management)* [Support cases](https://access.redhat.com/support/cases)* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)* [Find a partner](https://catalog.redhat.com/partners)
For partners

* [Partner portal](https://connect.redhat.com/partner-admin/dashboard)* [Partner support](https://connect.redhat.com/en/support)* [Become a partner](https://connect.redhat.com/)
Try, buy, & sell

* [Red Hat Marketplace](https://marketplace.redhat.com/en-us)* [Red Hat Store](https://www.redhat.com/en/store)* [Contact sales](/en/contact)* [Start a trial](/en/products/trials)
Learning resources

* [Documentation](https://docs.redhat.com/en)* [Training and certification](/en/services/training-and-certification) * [Hybrid cloud learning hub](https://cloud.redhat.com/learn)* [Interactive labs](/en/interactive-labs)* [Learning community](https://learn.redhat.com/)* [Red Hat TV](https://tv.redhat.com)
Open source communities

* [Global advocacy](https://access.redhat.com/accelerators)* [How we contribute](/en/about/our-community-contributions)
For you
New
### Recommendations

As you browse redhat.com, we'll recommend resources you may like. For now, try these.

---

* [All Red Hat products](/en/technologies/all-products)
* [Tech topics](/en/topics)
* [Red Hat resources](/en/resources)
![close](https://static.redhat.com/libs/redhat/rh-iconfont/latest/svg/web-icon-close.svg)[![Red Hat Summit](/themes/custom/rh_base_ui/dist/img/red-hat-summit-logo.svg)Red Hat Summit](https://www.redhat.com/en/summit)[Support](https://access.redhat.com/)[Documentation](https://docs.redhat.com/en)[Console](https://cloud.redhat.com/)[Developers](https://developers.redhat.com/)[Start a trial](/en/products/trials)[Contact](/en/contact)Select a language简体中文EnglishFrançaisDeutschItaliano日本語한국어PortuguêsEspañol[Contact us](/en/contact)
English
### Select a language

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)
Select a language简体中文EnglishFrançaisDeutschItaliano日本語한국어PortuguêsEspañol![](/themes/custom/rh_base_ui/dist/img/talk-bubble.svg)

* [Products](https://www.redhat.com/en/technologies/all-products)
* [Solutions](https://www.redhat.com/en/solutions)
* [Training & services](https://www.redhat.com/en/services)
* [Resources](https://www.redhat.com/en/resources)
* Partners
* [About](https://www.redhat.com/en/about)
* [Contact us](/en/contact)

### Select a language

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)

# Red Hat Support

## Go beyond support by engaging with our experts

Our teams collaborate with you to ensure you accomplish your goals with Red Hat solutions. The relationship we build with you is designed to provide you with the tools and resources you need to find success on your IT journey.

![](/rhdc/managed-files/support-header.svg)

## Configured for your success

We develop a holistic understanding of your experience as a customer by ensuring our support and engineering teams work together.

Our support team works hand in hand with the best engineers in the industry to quickly turn customer feedback into product improvements. This direct line of communication allows us to hone in on proactive fixes that can impact your bottom line.

### Quick links

* Search our [Knowledgebase](https://access.redhat.com/search/#/?q=&p=1&sort=relevant&scoped&documentKind=Knowledgebase)
* Find [product documentation](https://access.redhat.com/documentation/en-us/)
* Access the [product security center](https://access.redhat.com/security/)
* Connect with [our support team](https://access.redhat.com/support)
* Team up with a [technical account manager](/en/services/support/technical-account-management "Technical account management")
* Take advantage of [partner support](https://connect.redhat.com/en/support)

## Find the right level of support

We have different tiers of support designed to meet your unique needs.

|  | Self-support | Standard | Premium |
| --- | --- | --- | --- |
| Access to Red Hat products | checkmark | checkmark | checkmark |
| Access to our knowledgebase and tools in our award-winning Customer Portal | checkmark | checkmark | checkmark |
| Access to support engineers during standard business hours |  | checkmark | checkmark |
| Access to support engineers 24x7 for high-severity issues |  |  | checkmark |

We also feature specialized support options that can be tailored to the unique needs of companies of all sizes and industries. The Red Hat® [Enhanced Solution Support](/en/resources/enhanced-solution-support-datasheet "Red Hat Enhanced Solution Support: 24x7 engineering support") offering reduces downtime and boosts confidence through access to senior level engineers, as well as resolution and restoration SLAs—helping you stay up and running as you innovate, scale, and deploy. Our engineers help restore your operations quickly and accelerate the path to final resolution, identifying the root cause which helps protect against recurrences in the future. Enhanced Solution Support engineers, who are already familiar with your environment, will be there to assist with critical issues in production environments so that you can consistently deliver the cloud services your customers demand. This offering is available for Red Hat OpenShift® and Red Hat OpenStack® Platform customers.

### Personalized support

Connect with a technical adviser for collaborative planning and specialized guidance. Our Technical Account Managers help you streamline deployments, resolve issues, and shape your technology strategy to meet your toughest business challenges.

[Explore Technical Account Management](/en/services/support/technical-account-management)

## Award winners since 2011

We’ve evolved the traditional software subscription model, combining the best elements of our services to exceed customer expectations. The Association of Support Professionals has honored Red Hat’s Customer Portal as one of “The Top Ten Best Support Websites” for 13 years running.

[See why the Customer Portal keeps earning industry recognition](https://access.redhat.com/)

![Gold and green star with text ASP best support websites of 2023](/rhdc/managed-files/ASP-Award-Design.jpg)

## What they're saying

![BSE logo](/rhdc/managed-files/bse-logo-2.png)

> Icon-Red\_Hat-Media\_and\_documents-Quotemark\_Open-B-Red-RGB
>
> We have found the support from Red Hat to be exemplary. Whenever we need anything from them, they have given it … Red Hat is now our backbone. Our business cannot run if Red Hat is not there.
>
> Ashishkumar Chauhan
>
> CEO, BSE

> Icon-Red\_Hat-Media\_and\_documents-Quotemark\_Open-B-Red-RGB
>
> I like the fact that they really dig into things and then provide answers. As the single Linux guy, I kind of need that second admin next to me sometimes to say, "Hey, what about this?" and I am able to do that through the portal. I get my questions answered and trouble tickets resolved.
>
> Erik Widholm
>
> Sr. Enterprise Engineer

[Read more user reviews](/en/technologies/linux-platforms/enterprise-linux/user-reviews)

## Have questions?

[Contact Support team](https://access.redhat.com/support)

[Visit the Customer Portal](https://access.redhat.com/)

[![Red Hat logo](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](/en)[LinkedIn](https://www.linkedin.com/company/red-hat)[YouTube](https://www.youtube.com/user/RedHatVideos)[Facebook](https://www.facebook.com/redhatinc)[X](https://twitter.com/RedHat)
### Products

* [Red Hat Enterprise Linux](/en/technologies/linux-platforms/enterprise-linux)
* [Red Hat OpenShift](/en/technologies/cloud-computing/openshift)
* [Red Hat Ansible Automation Platform](/en/technologies/management/ansible)
* [Cloud services](/en/technologies/cloud-computing/openshift/cloud-services)
* [See all products](/en/technologies/all-products)

### Tools

* [Training and certification](/en/services/training-and-certification)
* [My account](https://www.redhat.com/wapps/ugc/protected/personalInfo.html)
* [Customer support](https://access.redhat.com)
* [Developer resources](https://developers.redhat.com/)
* [Find a partner](https://catalog.redhat.com/partners)
* [Red Hat Ecosystem Catalog](https://catalog.redhat.com/)
* [Red Hat value calculator](/en/solutions/value-calculator)
* [Documentation](https://docs.redhat.com/en)

### Try, buy, & sell

* [Product trial center](/en/products/trials)
* [Red Hat Marketplace](https://marketplace.redhat.com)
* [Red Hat Store](https://www.redhat.com/en/store)
* [Buy online (Japan)](https://www.redhat.com/en/about/japan-buy)
* [Console](https://cloud.redhat.com/)

### Communicate

* [Contact sales](/en/contact/sales)
* [Contact customer service](/en/contact/customer-service)
* [Contact training](/en/services/training-and-certification/contact-us)
* [Social](/en/about/social)

### About Red Hat

We’re the world’s leading provider of enterprise open source solutions—including Linux, cloud, container, and Kubernetes. We deliver hardened solutions that make it easier for enterprises to work across platforms and environments, from the core datacenter to the network edge.

### Select a language

![](https://static.redhat.com/libs/redhat/rh-iconfont/4/svg/web-icon-globe.svg)

* [简体中文](/zh/services/support)
* [English](/en/services/support)
* [Français](/fr/services/support)
* [Deutsch](/de/services/support)
* [Italiano](/it/services/support)
* [日本語](/ja/services/support)
* [한국어](/ko/services/support)
* [Português](/pt-br/services/support)
* [Español](/es/services/support)
### Red Hat legal and privacy links

* [About Red Hat](/en/about/company)
* [Jobs](/en/jobs)
* [Events](/en/events)
* [Locations](/en/about/office-locations)
* [Contact Red Hat](/en/contact)
* [Red Hat Blog](/en/blog)
* [Diversity, equity, and inclusion](/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

© 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](/en/about/privacy-policy)
* [Terms of use](/en/about/terms-use)
* [All policies and guidelines](/en/about/all-policies-guidelines)
* [Digital accessibility](/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_b6c082c4_20250125_212322.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D556703)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D556703)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D556703)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 556703

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 556703**](show_bug.cgi?id=556703)
(CVE-2010-0291)
- [CVE-2010-0291](https://access.redhat.com/security/cve/CVE-2010-0291) kernel: untangle the do\_mremap()

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2010-0291 kernel: untangle the do\_mremap()

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2010-0291 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [556705](show_bug.cgi?id=556705) [556706](show_bug.cgi?id=556706) [556707](show_bug.cgi?id=556707) [556708](show_bug.cgi?id=556708) [556709](show_bug.cgi?id=556709) [556710](show_bug.cgi?id=556710) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=556703&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=556703&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2010-01-19 06:22 UTC by Eugene Teo (Security Response) | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-25 01:49 UTC ([History](show_activity.cgi?id=556703)) | | [CC List:](page.cgi?id=fields.html#cclist) | 12 users (show)  arozansk atangrin aviro bhu dhoward jolsa jpirko lgoncalv lwang rcvalle vgoyal williams | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2013-04-12 15:49:15 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2010:0161](https://access.redhat.com/errata/RHSA-2010%3A0161) | 0 | normal | SHIPPED\_LIVE | Important: kernel-rt security and bug fix update | 2010-03-23 15:42:25 UTC | | Red Hat Product Errata | [RHSA-2010:0504](https://access.redhat.com/errata/RHSA-2010%3A0504) | 0 | normal | SHIPPED\_LIVE | Important: kernel security and bug fix update | 2010-07-01 18:26:58 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=556703#c0)  Eugene Teo (Security Response)    2010-01-19 06:22:03 UTC  ``` Description of problem: There's a pile of upstream commits that fixed issues that can lead to user-triggerable panics on supported boxes: <http://groups.google.com/group/linux.kernel/msg/895f20870532241e>.         54f5de709984bae0d31d823ff03de755f9dcac54         ecc1a8993751de4e82eb18640d631dae1f626bd6         1a0ef85f84feb13f07b604fcf5b90ef7c2b5c82f         f106af4e90eadd76cfc0b5325f659619e08fb762         097eed103862f9c6a97f2e415e21d1134017b135         935874141df839c706cd6cdc438e85eb69d1525e         0ec62d290912bb4b989be7563851bc364ec73b56         c4caa778157dbbf04116f0ac2111e389b5cd7a29         2ea1d13f64efdf49319e86c87d9ba38c30902782         570dcf2c15463842e384eb597a87c1e39bead99b         564b3bffc619dcbdd160de597b0547a7017ea010         0067bd8a55862ac9dd212bd1c4f6f5bff1ca1301         f8b7256096a20436f6d0926747e3ac3d64c81d24         8c7b49b3ecd48923eb64ff57e07a1cdb74782970         9206de95b1ea68357996ec02be5db0638a0de2c1         2c6a10161d0b5fc047b5bd81b03693b9af99fab5         05d72faa6d13c9d857478a5d35c85db9adada685         bb52d6694002b9d632bb355f64daa045c6293a4e         e77414e0aad6a1b063ba5e5750c582c75327ea6a         aa65607373a4daf2010e8c3867b6317619f3c1a3   <http://groups.google.co.jp/group/fa.linux.kernel/browse_thread/thread/8bf22336b1082090>   ```  [Comment 3](show_bug.cgi?id=556703#c3)  Eugene Teo (Security Response)    2010-01-20 03:43:28 UTC  ``` <http://marc.info/?l=linux-arch&m=126004438008670&w=2>  From Al Viro: We have a bunch of interesting problems with mmap/mremap.  1) MREMAP_FIXED allows remap to any location, regardless of what the architecture has to say about it.  The only check is TASK_SIZE. That's not enough - e.g. there are architectures where some ranges are simply absent (itanic, sparc), there are some that have cache coherency requirements on alignments of shared mapping (a lot - anything with VIPT cache, itanic where it's not a coherency but a performance issue).  There are architectures where specific ranges are reserved for hugetlb and they either simply do not allow normal mappings in there or need to do something to make them possible (as ppc64 does).  sparc tried to deal with that problem, but it hadn't been complete (alignment issues) and it had been actually wrong for non-MREMAP_FIXED calls of mremap().  2) without MREMAP_FIXED we happily allowed extension into a hole in address space - the only check for being able to extend without move had been for TASK_SIZE (and for non-overlap with other vmas). Victims: sparc, itanic due to extending into holes, powerpc due to extending into hugetlb range.  3) in case of relocation without MREMAP_FIXED we ended up doing get_unmapped_area() with wrong pgoff if the starting address had been in the middle of a mapping.  New vma gets the right pgoff, the checks are done for the wrong one.  Cache coherency issues on all VIPT architectures.  4) mmap() with MAP_HUGETLB leaks struct file if it bails out anywhere past the allocation of struct file (by do_mmap_pgoff())  5) brk() into a hugetlb range failed without trying to do anything; known thing, ppc folks had been unhappy about that.  Series below should deal with those, mostly by switching to consistent use of get_unmapped_area() and sanitizing mmap/mremap code in general.  There is one case where we still have a serious PITA and I'm not sure how to deal with that; it's expand_stack().  We can trigger that by creating a VM_GROWS{UP,DOWN} mapping and either hitting a pagefault on address {below,above} it or doing PTRACE_POKEDATA on such address. As it is, we only check that range we are expanding into is not a hugetlb-only one.  The thing is, we *can't* just do the normal checks as-is there. For cases when we do expand_stack() for our own mm that would work just fine and do the right thing.  Unfortunately, we have places that hit it from get_user_pages() for another process.  And checks (starting with "what's the maximal address we allow") are process-dependent on biarch architectures.  Worse yet, execve() does that when we have no other process - it creates new mm, puts an anonymous mapping as high as possible in it and copies argv/envp in there.  And that's done with get_user_pages() on new mm.  If we have a 32bit task on e.g. amd64, we'll have that mapping at addresses far above the TASK_SIZE of caller. Later, when  ->load_binary() figures out what personality we'll get, it turns that mapping into a valid vma for stack, possibly relocating the entire thing to address suitable for resulting process.  Breaking execve() from 32bit processes on biarch architectures would be a bad thing, so we can't just add the normal set of checks to expand_stack() (acct_stack_growth(), actually).  The problem is quite real, though, since e.g. on itanic PTRACE_POKEDATA can be used to get a vma hanging down into a gap in address space quite easily.  Results are not pretty...  One way to deal with that would be to put enough information into mm_struct so that all these checks wouldn't have to look at the caller's personality. I'm not sure how much PITA would that be, though; I've been digging through the arch/* VM code for several weeks by now, but I certainly don't pretend to be able to spot e.g. performance implications of such change.   ```  [Comment 4](show_bug.cgi?id=556703#c4)  Eugene Teo (Security Response)    2010-01-20 03:44:06 UTC  ``` Here are the related links and patch descriptions: 1) untangling do_mremap(), part 1 54f5de709984bae0d31d823ff03de755f9dcac54 <http://marc.info/?l=linux-arch&m=126015794920298&w=2> 2) do_mremap() untangling, part 2 ecc1a8993751de4e82eb18640d631dae1f626bd6 <http://marc.info/?l=linux-arch&m=126015795020304&w=2> 3) do_mremap() untangling, part 3 1a0ef85f84feb13f07b604fcf5b90ef7c2b5c82f <http://marc.info/?l=linux-arch&m=126015799020341&w=2> 4) fix checks for expand-in-place mremap f106af4e90eadd76cfc0b5325f659619e08fb762 <http://marc.info/?l=linux-kernel&m=126015827720681&w=2> 5) fix the arch checks in MREMAP_FIXED case 097eed103862f9c6a97f2e415e21d1134017b135 <http://marc.info/?l=linux-kernel&m=126015827720686&w=2> 6) fix pgoff in "have to relocate" case of mremap() 935874141df839c706cd6cdc438e85eb69d1525e <http://marc.info/?l=linux-kernel&m=126015825720659&w=2> 7) kill useless checks in sparc mremap variants 0ec62d290912bb4b989be7563851bc364ec73b56 <http://marc.info/?l=linux-kernel&m=126015822220608&w=2> 8) file ->get_unmapped_area() shouldn't duplicate work of get_unmapped_area() c4caa778157dbbf04116f0ac2111e389b5cd7a29 <http://marc.info/?l=linux-arch&m=126015804620397&w=2> 9) arm: add arch_mmap_check(), get rid of sys_arm_mremap() 2ea1d13f64efdf49319e86c87d9ba38c30902782 <http://marc.info/?l=linux-arch&m=126015819820566&w=2> 10) Kill ancient crap in s390 compat mmap 570dcf2c15463842e384eb597a87c1e39bead99b <http://marc.info/?l=linux-kernel&m=126015810620436&w=2> 11) arch_mmap_check() on mn10300 564b3bffc619dcbdd160de597b0547a7017ea010 <http://marc.info/?l=linux-kernel&m=126015810620439&w=2> 12) Cut hugetlb case early for 32bit on ia64 0067bd8a55862ac9dd212bd1c4f6f5bff1ca1301 <http://marc.info/?l=linux-kernel&m=126015810620442&w=2> 13) Unify sys_mmap* f8b7256096a20436f6d0926747e3ac3d64c81d24 <http://marc.info/?l=linux-kernel&m=126015815920506&w=2> 14) fix a struct file leak in do_mmap_pgoff() 8c7b49b3ecd48923eb64ff57e07a1cdb74782970 <http://marc.info/?l=linux-kernel&m=126015815920509&w=2> 15) Take arch_mmap_check() into get_unmapped_area() 9206de95b1ea68357996ec02be5db0638a0de2c1 <http://marc.info/?l=linux-kernel&m=126015815920512&w=2> 16) switch do_brk() to get_unmapped_area() 2c6a10161d0b5fc047b5bd81b03693b9af99fab5 <http://marc.info/?l=linux-arch&m=126015810820457&w=2> 17) sparc_brk() is not needed anymore 05d72faa6d13c9d857478a5d35c85db9adada685 <http://marc.info/?l=linux-arch&m=126015810920463&w=2> 18) Get rid of open-coding in ia64_brk() bb52d6694002b9d632bb355f64daa045c6293a4e <http://marc.info/?l=linux-arch&m=126015811020469&w=2> 19) fix broken aliasing checks for MAP_FIXED on sparc32,mips,arm and sh e77414e0aad6a1b063ba5e5750c582c75327ea6a <http://marc.info/?l=linux-arch&m=126015816020518&w=2> 20) Add missing alignment check in arch/score sys_mmap() aa65607373a4daf2010e8c3867b6317619f3c1a3  There are some architecture-specific patches that we can ignore when backporting them to our kernels.   ```  [Comment 7](show_bug.cgi?id=556703#c7)  errata-xmlrpc    2010-03-23 15:42:32 UTC  ``` This issue has been addressed in following products:    MRG for RHEL-5  Via RHSA-2010:0161 <https://rhn.redhat.com/errata/RHSA-2010-0161.html>   ```  [Comment 8](show_bug.cgi?id=556703#c8)  errata-xmlrpc    2010-07-01 18:27:43 UTC  ``` This issue has been addressed in following products:    Red Hat Enterprise Linux 5  Via RHSA-2010:0504 <https://rhn.redhat.com/errata/RHSA-2010-0504.html>   ```  [Comment 9](show_bug.cgi?id=556703#c9)  Eugene Teo (Security Response)    2011-01-18 03:51:23 UTC  ``` Statement:  The risks associated with fixing this bug are greater than the important severity security risk. We therefore currently have no plans to fix this flaw in Red Hat Enterprise Linux 3 and 4. This issue was addressed in Red Hat Enterprise Linux 5 and Red Hat Enterprise MRG via <https://rhn.redhat.com/errata/RHSA-2010-0504.html> and <https://rhn.redhat.com/errata/RHSA-2010-0161.html>.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=556703&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from access.redhat.com_09e4db7b_20250126_120451.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from secunia.com_963b578d_20250125_212315.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from Gartner®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexera’s 2025 IT Priorities Report highlight what’s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The world’s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the world’s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoft’s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that aren’t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNow® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

×

...



=== Content from marc.info_fd873c7d_20250125_212311.html ===

```
[[prev in list](?l=oss-security&m=126395520927811&w=2)] [[next in list](?l=oss-security&m=126396065732697&w=2)] [[prev in thread](?l=oss-security&m=126393370931972&w=2)] [[next in thread](?l=oss-security&m=126396065732697&w=2)]
List:       [oss-security](?l=oss-security&r=1&w=2)
Subject:    [Re: [oss-security] CVE request - kernel: untangle the do_mremap()](?t=126388199300001&r=1&w=2)
From:       [Eugene Teo <eugeneteo () kernel ! sg>](?a=117975818600002&r=1&w=2)
Date:       [2010-01-20 3:38:30](?l=oss-security&r=1&w=2&b=201001)
Message-ID: [4B567AB6.4010303 () kernel ! sg](?i=4B567AB6.4010303%20()%20kernel%20!%20sg)
[Download RAW [message](?l=oss-security&m=126395874130875&q=mbox) or [body](?l=oss-security&m=126395874130875&q=raw)]

On 01/20/2010 04:41 AM, Josh Bressers wrote:
> ----- "Eugene Teo"<eugene@redhat.com>  wrote:
>> There's a pile of upstream commits that fixed issues that can lead to
>>
>> user-triggerable panics on supported boxes:
>> <http://groups.google.com/group/linux.kernel/msg/895f20870532241e>.
>>
>> <http://groups.google.co.jp/group/fa.linux.kernel/browse_thread/thread/8bf22336b1082090>
>
> I don't think CVE ids can be assigned to this without more information. I'm
> not knowledgeable enough, nor do I have the time to properly understand
> this list.

And upstream continues to give us grief...

Anyway, Al summarised the mess here:
<http://marc.info/?l=linux-arch&m=126004438008670&w=2>

And the pile of upstream commits were meant to address the problems
described AFAIK. It will probably make more sense to associate all these
related commits to just one CVE name.

I rated these cvss2=7.2/AV:L/AC:L/Au:N/C:C/I:C/A:C.

Here are the related links and patch descriptions:
1) untangling do_mremap(), part 1
54f5de709984bae0d31d823ff03de755f9dcac54
<http://marc.info/?l=linux-arch&m=126015794920298&w=2>
2) do_mremap() untangling, part 2
ecc1a8993751de4e82eb18640d631dae1f626bd6
<http://marc.info/?l=linux-arch&m=126015795020304&w=2>
3) do_mremap() untangling, part 3
1a0ef85f84feb13f07b604fcf5b90ef7c2b5c82f
<http://marc.info/?l=linux-arch&m=126015799020341&w=2>
4) fix checks for expand-in-place mremap
f106af4e90eadd76cfc0b5325f659619e08fb762
<http://marc.info/?l=linux-kernel&m=126015827720681&w=2>
5) fix the arch checks in MREMAP_FIXED case
097eed103862f9c6a97f2e415e21d1134017b135
<http://marc.info/?l=linux-kernel&m=126015827720686&w=2>
6) fix pgoff in "have to relocate" case of mremap()
935874141df839c706cd6cdc438e85eb69d1525e
<http://marc.info/?l=linux-kernel&m=126015825720659&w=2>
7) kill useless checks in sparc mremap variants
0ec62d290912bb4b989be7563851bc364ec73b56
<http://marc.info/?l=linux-kernel&m=126015822220608&w=2>
8) file ->get_unmapped_area() shouldn't duplicate work of
get_unmapped_area()
c4caa778157dbbf04116f0ac2111e389b5cd7a29
<http://marc.info/?l=linux-arch&m=126015804620397&w=2>
9) arm: add arch_mmap_check(), get rid of sys_arm_mremap()
2ea1d13f64efdf49319e86c87d9ba38c30902782
<http://marc.info/?l=linux-arch&m=126015819820566&w=2>
10) Kill ancient crap in s390 compat mmap
570dcf2c15463842e384eb597a87c1e39bead99b
<http://marc.info/?l=linux-kernel&m=126015810620436&w=2>
11) arch_mmap_check() on mn10300
564b3bffc619dcbdd160de597b0547a7017ea010
<http://marc.info/?l=linux-kernel&m=126015810620439&w=2>
12) Cut hugetlb case early for 32bit on ia64
0067bd8a55862ac9dd212bd1c4f6f5bff1ca1301
<http://marc.info/?l=linux-kernel&m=126015810620442&w=2>
13) Unify sys_mmap*
f8b7256096a20436f6d0926747e3ac3d64c81d24
<http://marc.info/?l=linux-kernel&m=126015815920506&w=2>
14) fix a struct file leak in do_mmap_pgoff()
8c7b49b3ecd48923eb64ff57e07a1cdb74782970
<http://marc.info/?l=linux-kernel&m=126015815920509&w=2>
15) Take arch_mmap_check() into get_unmapped_area()
9206de95b1ea68357996ec02be5db0638a0de2c1
<http://marc.info/?l=linux-kernel&m=126015815920512&w=2>
16) switch do_brk() to get_unmapped_area()
2c6a10161d0b5fc047b5bd81b03693b9af99fab5
<http://marc.info/?l=linux-arch&m=126015810820457&w=2>
17) sparc_brk() is not needed anymore
05d72faa6d13c9d857478a5d35c85db9adada685
<http://marc.info/?l=linux-arch&m=126015810920463&w=2>
18) Get rid of open-coding in ia64_brk()
bb52d6694002b9d632bb355f64daa045c6293a4e
<http://marc.info/?l=linux-arch&m=126015811020469&w=2>
19) fix broken aliasing checks for MAP_FIXED on sparc32,mips,arm and sh
e77414e0aad6a1b063ba5e5750c582c75327ea6a
<http://marc.info/?l=linux-arch&m=126015816020518&w=2>
20) Add missing alignment check in arch/score sys_mmap()
aa65607373a4daf2010e8c3867b6317619f3c1a3

Reference:
<https://bugzilla.redhat.com/show_bug.cgi?id=556703>

Thanks, Eugene
[[prev in list](?l=oss-security&m=126395520927811&w=2)] [[next in list](?l=oss-security&m=126396065732697&w=2)] [[prev in thread](?l=oss-security&m=126393370931972&w=2)] [[next in thread](?l=oss-security&m=126396065732697&w=2)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from marc.info_2eae49a7_20250125_212313.html ===

```
[[prev in list](?l=oss-security&m=126399980216047&w=2)] [[next in list](?l=oss-security&m=126406349530644&w=2)] [[prev in thread](?l=oss-security&m=126399980216047&w=2)] [[next in thread](?l=oss-security&m=126406814304720&w=2)]
List:       [oss-security](?l=oss-security&r=1&w=2)
Subject:    [Re: [oss-security] CVE request - kernel: untangle the do_mremap()](?t=126388199300001&r=1&w=2)
From:       [Josh Bressers <bressers () redhat ! com>](?a=108872111000004&r=1&w=2)
Date:       [2010-01-20 16:19:59](?l=oss-security&r=1&w=2&b=201001)
Message-ID: [847761369.309221264004399691.JavaMail.root () zmail01 ! collab ! prod ! int ! phx2 ! redhat ! com](?i=847761369.309221264004399691.JavaMail.root%20()%20zmail01%20!%20collab%20!%20prod%20!%20int%20!%20phx2%20!%20redhat%20!%20com)
[Download RAW [message](?l=oss-security&m=126400443123998&q=mbox) or [body](?l=oss-security&m=126400443123998&q=raw)]

----- "Steven M. Christey" <coley@linus.mitre.org> wrote:
> On Wed, 20 Jan 2010, Eugene Teo wrote:
>
> > Anyway, Al summarised the mess here:
> > <http://marc.info/?l=linux-arch&m=126004438008670&w=2>
> >
> > And the pile of upstream commits were meant to address the problems
> > described AFAIK. It will probably make more sense to associate all
> > these related commits to just one CVE name.
>
> I defer to Josh on this, but in a series of patches that is referred to
> as "mremap/mmap mess" in some linux-kernel subject lines, for which a
> specialist like Eugene is not entirely certain about, in which some of
> the patches are assembly-level changes for individual architectures, and
> where few of the patch diffs make it clear what the underlying problem
> was - we could collectively spend a week of labor trying to figure
> everything out from a purist CVE perspective, or anchor on a single
> series of commits that are hopefully attached to a single kernel RC or
> minor version release.  I suspect the latter would be more helpful to the
> general CVE consumer community, so my recommendation is for a single CVE,
> assuming that all of these patches make it into a single kernel update.
>

Let's use CVE-2010-0291 for this one.

Thanks.

--
    JB
[[prev in list](?l=oss-security&m=126399980216047&w=2)] [[next in list](?l=oss-security&m=126406349530644&w=2)] [[prev in thread](?l=oss-security&m=126399980216047&w=2)] [[next in thread](?l=oss-security&m=126406814304720&w=2)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from marc.info_71b0a444_20250125_212311.html ===

```
[[prev in list](?l=oss-security&m=126395874130875&w=2)] [[next in list](?l=oss-security&m=126396609004884&w=2)] [[prev in thread](?l=oss-security&m=126395874130875&w=2)] [[next in thread](?l=oss-security&m=126396609004884&w=2)]
List:       [oss-security](?l=oss-security&r=1&w=2)
Subject:    [Re: [oss-security] CVE request - kernel: untangle the do_mremap()](?t=126388199300001&r=1&w=2)
From:       [Greg KH <greg () kroah ! com>](?a=93270967100001&r=1&w=2)
Date:       [2010-01-20 4:10:10](?l=oss-security&r=1&w=2&b=201001)
Message-ID: [20100120041010.GA23371 () kroah ! com](?i=20100120041010.GA23371%20()%20kroah%20!%20com)
[Download RAW [message](?l=oss-security&m=126396065732697&q=mbox) or [body](?l=oss-security&m=126396065732697&q=raw)]

On Wed, Jan 20, 2010 at 11:38:30AM +0800, Eugene Teo wrote:
> On 01/20/2010 04:41 AM, Josh Bressers wrote:
>> ----- "Eugene Teo"<eugene@redhat.com>  wrote:
>>> There's a pile of upstream commits that fixed issues that can lead to
>>>
>>> user-triggerable panics on supported boxes:
>>> <http://groups.google.com/group/linux.kernel/msg/895f20870532241e>.
>>>
>>> <http://groups.google.co.jp/group/fa.linux.kernel/browse_thread/thread/8bf22336b1082090>
>>
>> I don't think CVE ids can be assigned to this without more information. I'm
>> not knowledgeable enough, nor do I have the time to properly understand
>> this list.
>
> And upstream continues to give us grief...

I have backported everything into the 2.6.32.4 release, so all
should be good now.

thanks,

greg k-h
[[prev in list](?l=oss-security&m=126395874130875&w=2)] [[next in list](?l=oss-security&m=126396609004884&w=2)] [[prev in thread](?l=oss-security&m=126395874130875&w=2)] [[next in thread](?l=oss-security&m=126396609004884&w=2)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from secunia.com_c65f8e1d_20250125_212314.html ===


[Skip to main content](#main-content)
[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

[![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

Search

## Main navigation

* Solutions
  + Column 1
    - Business challenge
      * [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
      * [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
      * [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
      * [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
      * [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
      * [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
      * [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
      * [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
      * [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
      * [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
      * [Public sector](https://www.flexera.com/solutions/public-sector)
  + Column 2
    - Spend management by vendor
      * [IBM](https://www.flexera.com/solutions/vendor/ibm)
      * [Oracle](https://www.flexera.com/solutions/vendor/oracle)
      * [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
      * [SAP](https://www.flexera.com/solutions/vendor/sap)
      * [VMware](https://www.flexera.com/solutions/vendor/vmware)
      * [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
      * [AWS](https://www.flexera.com/solutions/vendor/aws)
      * [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
      * [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
      * [Adobe](https://www.flexera.com/solutions/vendor/adobe)

  ### Achieve more through a united FinOps and ITAM function

  The future is hybrid. Break down the walls between ITAM and FinOps to drive more revenue, more customer growth and more innovation.

  [Discover More](https://www.flexera.com/resources/hybrid-itam-finops)
* Products
  + Column 1
    - [Flexera One](https://www.flexera.com/products/flexera-one)
      * [IT Visibility](https://www.flexera.com/products/flexera-one/it-visibility)
      * [ITAM](https://www.flexera.com/products/flexera-one/it-asset-management)
      * [SaaS Management](https://www.flexera.com/products/flexera-one/saas-management)
      * [FinOps](https://www.flexera.com/products/flexera-one/finops)
      * [Technology Intelligence Platform](https://www.flexera.com/products/flexera-one/technology-intelligence-platform)
  + Column 2
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
      * [Snow Spend Optimizer](https://www.flexera.com/products/snow-atlas/snow-spend-optimizer)
      * [Snow SaaS Management](https://www.flexera.com/products/snow-atlas/snow-saas-management)
  + Column 3
    - Hide group
      * [Security](https://www.flexera.com/products/security)
      * [Application Readiness](https://www.flexera.com/products/adminstudio)
      * [All products](https://www.flexera.com/products)
      * [All Snow products](https://www.flexera.com/products/snow)
      * [Integrations](https://www.flexera.com/products/integrations)

  ### Flexera 2024 State of the Cloud Report

  What do transformative initiatives such as GenAI, machine learning and sustainability mean for the cloud? Check out the 2024 State of the Cloud Report to find the answer as well as all the latest cloud computing trends.

  [View Report](https://info.flexera.com/CM-REPORT-State-of-the-Cloud)
* Success
  + Column 1
    - [Customer success](https://www.flexera.com/customer-success)
      * Support
        + [Flexera support portal](https://community.flexera.com/s/support-hub)
        + [Flexera product documentation](https://docs.flexera.com)
        + [Snow product documentation](https://docs.snowsoftware.io/)
      * Services and training
        + [Services](https://www.flexera.com/customer-success/services)
        + [Training](https://www.flexera.com/customer-success/training)
  + Column 2
    - Hide group
      * [Technology Intelligence Awards](https://www.flexera.com/customer-success/awards)
      * [Flexera community](https://community.flexera.com/s/)

  ### Insights from Gartner®

  Find a curated series of actionable and objective insights for IT executives and their teams. Get expert insights from valued analysts, courtesy of Flexera.

  [Discover More](https://www.flexera.com/resources/gartner-analyst-research)
* Resources
  + Column 1
    - [Resources](https://www.flexera.com/resources)
      * [Webinars](https://www.flexera.com/resources?type%5Bwebinar%5D=webinar)
      * [Videos](https://www.flexera.com/resources?type%5Bvideo%5D=video)
      * [Datasheets](https://www.flexera.com/resources?type%5Bdatasheet%5D=datasheet)
      * [White papers & reports](https://www.flexera.com/resources?type%5Bwhite-paper-industry-report%5D=white-paper-industry-report)
  + Column 2
    - Hide group
      * [Blog](/blog/)
      * [Case studies](https://www.flexera.com/resources/case-studies)
      * [Events](https://www.flexera.com/resources?type%5Bevent%5D=event)
      * [Analyst Research](https://www.flexera.com/resources/gartner-analyst-research)
      * [Glossary](https://www.flexera.com/resources/glossary)
      * [Demos & trials](https://www.flexera.com/resources?type%5Bdemo-trials%5D=demo-trials)
      * [Business value calculator](https://www.flexera.com/resources/business-value-calculator)

  ### Flexera 2025 IT Priorities Report

  Insights from Flexera’s 2025 IT Priorities Report highlight what’s top of mind for IT decision makers in the year ahead. Discover the challenges, priorities and opportunities that will shape the future IT landscape.

  [View Report](https://info.flexera.com/ITV-REPORT-IT-Priorities)
* About
  + Column 1
    - [Company](https://www.flexera.com/about-us)
      * [About](https://www.flexera.com/about-us)
      * [Careers](https://www.flexera.com/about-us/careers)
      * [Contact](https://www.flexera.com/about-us/contact-us)
      * [Leadership](https://www.flexera.com/about-us/leadership)
    - [Partners](https://www.flexera.com/about-us/partners)
      * [Partner program](https://www.flexera.com/about-us/partners/partner-program)
      * [Partner directory](https://www.flexera.com/about-us/partners/directory)
  + Column 2
    - [Press center](https://www.flexera.com/about-us/press-center)
      * [Press releases](https://www.flexera.com/about-us/all-press-releases)
      * [Awards](https://www.flexera.com/about-us/press-center#awards)
      * [Articles](https://www.flexera.com/about-us/all-articles)
    - Hide group
      * Social responsibility
        + [ESG](https://www.flexera.com/about-us/environmental-social-governance)
        + [Diversity](https://www.flexera.com/about-us/diversity)

  ### More value with technology intelligence

  The unparalleled synergy of Flexera and Snow provides the Technology Intelligence you need for more efficiency, insight and governance than ever before.

  [Discover More](https://www.flexera.com/more-value-with-technology-intelligence)

Search

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

## External Links

* External Links
  + [Community](https://community.flexera.com/)
  + [Product Access](https://app.flexera.com/login)
  + [Partner Portal](https://flexera.channeltivity.com/Login)

[Book a demo](/about-us/contact-us?C_Interest1=sales)

# Secunia Research

## The world’s best vulnerability intelligence

The Secunia Research team from Flexera provides the most accurate and reliable source of vulnerability intelligence.

[Contact Us](https://www.flexera.com/about-us/contact-us?C_Interest1=sales&C_SolutionInterest=SVM)
Watch video (0:29)

Related links

* [Anatomy of a security advisory](https://www.flexera.com/resources/infographics/anatomy-of-a-security-advisory)
* [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)
* [Software Vulnerability Manager](/products/software-vulnerability-manager)
* [Security advisories from Secunia Research](https://www.flexera.com/products/security/software-vulnerability-advisories)
* [Report a vulnerability](https://www.flexera.com/about-us/contact-us/report-vulnerability)

 ![Secunia Research](/sites/default/files/2022-04/hero-secunia-research-bg.jpg)

Featured Details

## Multiple ways to consume Secunia Research

Secunia delivers software security research that provides reliable, curated and actionable vulnerability intelligence. Organizations can expect to receive standardized, validated and enriched vulnerability research on a specific version of a software product. Secunia Research supports four solutions:

![Software Vulnerability Research](/sites/default/files/2022-04/icon-secunia-research-svr.svg)

### [Software Vulnerability Research](https://www.flexera.com/products/software-vulnerability-research)

Software Vulnerability Research utilizes Secunia Research to drive awareness of vulnerabilities matching your specified criteria

[Learn More](https://www.flexera.com/products/software-vulnerability-research)

![Software Vulnerability Manager](/sites/default/files/2022-04/icon-secunia-research-svm.svg)

### [Software Vulnerability Manager](/products/software-vulnerability-manager)

Software Vulnerability Manager uses Secunia Research data to identify, prioritize and patch known vulnerable software detected in your environment

[Learn More](/products/software-vulnerability-manager)

![Data Platform](/sites/default/files/2022-04/icon-secunia-research-dp.svg)

### [Data Platform](https://www.flexera.com/products/data-platform)

Data Platform leverages Secunia Research to provide high-level insights based on major or minor versions of software in your normalized inventory

[Learn More](https://www.flexera.com/products/data-platform)

![Flexera One](/sites/default/files/2022-04/icon-secunia-research-flexera-one.svg)

### [Flexera One](/flexera-one)

Flexera One utilizes Secunia Research (alongside public NVD data) to provide more granular matching of build-level versions of software in your normalized inventory within its IT Asset Management and IT Visibility solutions

[Learn More](/flexera-one)

How it works

## Accurate, reliable vulnerability insights at your fingertips

The Secunia Research team from Flexera is comprised of several security specialists who conduct vulnerability research in various products in addition to testing, verifying and validating public vulnerability reports. Since its inception in 2002, the goal of the Secunia Research team is to provide the most accurate and reliable source of vulnerability intelligence.

Delivering the world’s best vulnerability intelligence requires skill and passion. Team members continually develop their skills exploring various high-profile closed and open-source software using a variety of approaches, focusing chiefly on thorough code audits and binary analysis. The team has received industry recognition, including naming members to [Microsoft’s Most Valuable Security Researchers](https://msrc-blog.microsoft.com/2019/08/07/announcing-2019-msrc-most-valuable-security-researchers/) list.

Secunia researchers discover hard-to-find vulnerabilities that aren’t normally identified with techniques such as fuzzing, and the results have been impressive. Members of the Secunia Research team have discovered critical vulnerabilities in products from vendors including Microsoft, Symantec, IBM, Adobe, RealNetworks, Trend Micro, HP, Blue Coat, Samba, CA, Mozilla and Apple.

The team produces invaluable security advisories based on research of the vulnerabilities affecting any given software update. Sometimes a single update can address multiple vulnerabilities of varying criticalities and threats; but these advisories aggregate and distill findings down to a single advisory perfect for the prioritization of patching efforts within [Software Vulnerability Manager](/products/software-vulnerability-manager). Criticality scores are consistently applied along with details around attack vector and other valuable details within [Software Vulnerability Research](/products/software-vulnerability-research/secunia-research). Illegitimate vulnerability reports are also investigated and rejected so you can focus only on what truly matters.

Informing IT, Transforming IT

## Industry insights to help keep you informed

[#### Webinar

### Stay Ahead of Cyber Threats: Flexera's Latest Vulnerability Insights

Join us for this session where we'll explore the latest findings from the Flexera Monthly Vulnerability Insights Report.](https://info.flexera.com/SVM-WBNR-Vulnerability-Insights-Roundtable)

[#### Webinar

### Dive deeper into the Flexera Annual Vulnerability Insights

We'll explore the key findings from the Flexera Annual Vulnerability Insights Report. Learn about the latest cybersecurity trends, the most targeted industries, the types of vulnerabilities, plus management and mitigation strategies.](https://info.flexera.com/SVM-WBNR-Flexera-Annual-Vulnerability-Insights?lead_source=Website%20Visitor&id=Flexera.com-Resources)

#### Video

### Close the Risk Window with Software Vulnerability Manager

Stop reacting. Gain control. Stay secure. Build a more effective risk mitigation process leveraging Secunia Research vulnerability intelligence and the largest repository of third-party patch data in the industry.

Remote video URL

[#### Trial

### Software Vulnerability Manager Assessment free trial

Get access to the complete set of modules of Software Vulnerability Manager: Research, Assessment and Patching](https://info.flexera.com/SVM-EVAL-Software-Vulnerability-Manager)

[#### Datasheet

### Protect your ServiceNow® investment with the highest quality data

IT Visibility offers certified ServiceNow integrations that accelerate platform expansion, improve ROI and increase efficiencies across ITIL processes by delivering clean software and hardware asset data directly.](/sites/default/files/datasheet-itv-maximize-servicenow-investment.pdf)

[#### Blog

### Avoid missing crucial vulnerability intelligence amid NVD backlog

Recent developments regarding the National Vulnerability Database (NVD) have some technology leaders on edge. Since February, the U.S. National Institute of Standards and Technology (NIST) has almost completely stopped enriching software vulnerabi...](https://www.flexera.com/blog/vulnerability-management/avoid-missing-crucial-vulnerability-intelligence-amid-nvd-backlog/)

[View all resources](https://www.flexera.com/resources?category%5Bsoftware-vulnerability-management%5D=software-vulnerability-management)

## Footer Menu

* Column
  + Business challenge
    - [Software renewals and audits](https://www.flexera.com/solutions/software-renewals-audits)
    - [Software license management and optimization](https://www.flexera.com/solutions/software-usage-costs)
    - [SaaS spend management](https://www.flexera.com/solutions/saas-spend)
    - [Cloud cost management](https://www.flexera.com/solutions/cloud-cost)
    - [IT asset lifecycle management](https://www.flexera.com/solutions/it-asset-lifecycle)
    - [CMDB data quality](https://www.flexera.com/solutions/cmdb-data-quality)
    - [Accurate IT inventory](https://www.flexera.com/solutions/it-inventory)
    - [Security and regulatory risk management](https://www.flexera.com/solutions/it-security-regulatory-risk)
    - [Sustainable IT](https://www.flexera.com/solutions/sustainable-it)
    - [AI-powered transformation](https://www.flexera.com/solutions/ai-powered-transformation)
    - [Public sector](https://www.flexera.com/solutions/public-sector)
* Column
  + Spend management by vendor
    - [IBM](https://www.flexera.com/solutions/vendor/ibm)
    - [Oracle](https://www.flexera.com/solutions/vendor/oracle)
    - [Microsoft](https://www.flexera.com/solutions/vendor/microsoft)
    - [SAP](https://www.flexera.com/solutions/vendor/sap)
    - [VMware](https://www.flexera.com/solutions/vendor/vmware)
    - [ServiceNow](https://www.flexera.com/solutions/vendor/servicenow)
    - [AWS](https://www.flexera.com/solutions/vendor/aws)
    - [Salesforce](https://www.flexera.com/solutions/vendor/salesforce)
    - [BMC](https://www.flexera.com/solutions/cmdb-data-quality/bmc)
    - [Adobe](https://www.flexera.com/solutions/vendor/adobe)
* Column
  + Products
    - [Flexera One](https://www.flexera.com/products/flexera-one)
    - [Snow Atlas](https://www.flexera.com/products/snow-atlas)
    - [Security](https://www.flexera.com/products/security)
    - [Application Readiness](https://www.flexera.com/products/adminstudio)
    - [All products](https://www.flexera.com/products)
    - [All Snow products](https://www.flexera.com/products/snow)
    - [Integrations](https://www.flexera.com/products/integrations)
* Column
  + Company
    - [About](https://www.flexera.com/about-us)
    - [Careers](https://www.flexera.com/about-us/careers)
    - [Leadership](https://www.flexera.com/about-us/leadership)
    - [Contact us](https://www.flexera.com/about-us/contact-us)
    - [Media / press center](https://www.flexera.com/about-us/press-center)
    - [Revenera.com](https://www.revenera.com)

 +1.800.374.4353

en

* [English](https://www.flexera.com/products/security/software-vulnerability-research/secunia-research?referrer=secunia)
* [Deutsch](https://www.flexera.de/products/security/software-vulnerability-research/secunia-research?referrer=secunia)

 [![Home](/themes/custom/flexera/images/logo.svg)](https://www.flexera.com/)

© 2025 Flexera. All Rights Reserved.

## Footer

* [Privacy Policy](https://www.flexera.com/legal/privacy-policy)
* [Terms and conditions](https://www.flexera.com/legal)
* [Contact Us](https://www.flexera.com/about-us/contact-us)
* [Impressum](https://www.flexera.com/about-us/impressum)
* [Site Map](https://www.flexera.com/sitemap)

#####

×

...



=== Content from marc.info_6654d6ba_20250125_212312.html ===

```
[[prev in list](?l=oss-security&m=126399602810086&w=2)] [[next in list](?l=oss-security&m=126400443123998&w=2)] [[prev in thread](?l=oss-security&m=126396609004884&w=2)] [[next in thread](?l=oss-security&m=126400443123998&w=2)]
List:       [oss-security](?l=oss-security&r=1&w=2)
Subject:    [Re: [oss-security] CVE request - kernel: untangle the do_mremap()](?t=126388199300001&r=1&w=2)
From:       [Greg KH <greg () kroah ! com>](?a=93270967100001&r=1&w=2)
Date:       [2010-01-20 15:03:09](?l=oss-security&r=1&w=2&b=201001)
Message-ID: [20100120150309.GD28823 () kroah ! com](?i=20100120150309.GD28823%20()%20kroah%20!%20com)
[Download RAW [message](?l=oss-security&m=126399980216047&q=mbox) or [body](?l=oss-security&m=126399980216047&q=raw)]

On Wed, Jan 20, 2010 at 12:41:04AM -0500, Steven M. Christey wrote:
>
> On Wed, 20 Jan 2010, Eugene Teo wrote:
>
>> Anyway, Al summarised the mess here:
>> <http://marc.info/?l=linux-arch&m=126004438008670&w=2>
>>
>> And the pile of upstream commits were meant to address the problems
>> described AFAIK. It will probably make more sense to associate all these
>> related commits to just one CVE name.
>
> I defer to Josh on this, but in a series of patches that is referred to as
> "mremap/mmap mess" in some linux-kernel subject lines, for which a
> specialist like Eugene is not entirely certain about, in which some of the
> patches are assembly-level changes for individual architectures, and where
> few of the patch diffs make it clear what the underlying problem was - we
> could collectively spend a week of labor trying to figure everything out
> from a purist CVE perspective, or anchor on a single series of commits that
> are hopefully attached to a single kernel RC or minor version release.  I
> suspect the latter would be more helpful to the general CVE consumer
> community, so my recommendation is for a single CVE, assuming that all of
> these patches make it into a single kernel update.

They are all in the 2.6.32.4 release.

thanks,

greg k-h
[[prev in list](?l=oss-security&m=126399602810086&w=2)] [[next in list](?l=oss-security&m=126400443123998&w=2)] [[prev in thread](?l=oss-security&m=126396609004884&w=2)] [[next in thread](?l=oss-security&m=126400443123998&w=2)]

```

[Configure](?q=configure) |
[About](?q=about) |
[News](?q=news) |
Add a list |
Sponsored by [KoreLogic](http://www.korelogic.com/)



=== Content from www.debian.org_ed77bf5b_20250125_212316.html ===


---

[[Date Prev](msg00035.html)][[Date Next](msg00037.html)]
[[Thread Prev](msg00035.html)][[Thread Next](msg00037.html)]
[[Date Index](maillist.html#00036)]
[[Thread Index](threads.html#00036)]

# [SECURITY] [DSA-1996-1] New Linux 2.6.26 packages fix several vulnerabilities

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA-1996-1] New Linux 2.6.26 packages fix several vulnerabilities
* *From*: dann frazier <dannf@debian.org>
* *Date*: Fri, 12 Feb 2010 18:39:51 -0700
* *Message-id*: <[[🔎]](/msgid-search/20100213013951.GC6549%40ldl.fc.hp.com) [20100213013951.GC6549@ldl.fc.hp.com](msg00036.html)>
* *Reply-to*: debian-security@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

- ----------------------------------------------------------------------
Debian Security Advisory DSA-1996-1                security@debian.org
<http://www.debian.org/security/>                           dann frazier
February 12, 2010                   <http://www.debian.org/security/faq>
- ----------------------------------------------------------------------

Package        : linux-2.6
Vulnerability  : privilege escalation/denial of service/sensitive memory leak
Problem type   : local/remote
Debian-specific: no
CVE Id(s)      : CVE-2009-3939 CVE-2009-4027 CVE-2009-4536 CVE-2009-4538
                 CVE-2010-0003 CVE-2010-0007 CVE-2010-0291 CVE-2010-0298
                 CVE-2010-0306 CVE-2010-0307 CVE-2010-0309 CVE-2010-0410
                 CVE-2010-0415

Several vulnerabilities have been discovered in the Linux kernel that
may lead to a denial of service, sensitive memory leak or privilege
escalation.  The Common Vulnerabilities and Exposures project
identifies the following problems:

CVE-2009-3939

    Joseph Malicki reported that the dbg_lvl sysfs attribute for the
    megaraid_sas device driver had world-writable permissions,
    permitting local users to modify logging settings.

CVE-2009-4027

    Lennert Buytenhek reported a race in the mac80211 subsystem that
    may allow remote users to cause a denial of service (system crash)
    on a system connected to the same wireless network.

CVE-2009-4536 & CVE-2009-4538

    Fabian Yamaguchi reported issues in the e1000 and e1000e drivers
    for Intel gigabit network adapters which allow remote users to
    bypass packet filters using specially crafted ethernet frames.

CVE-2010-0003

    Andi Kleen reported a defect which allows local users to gain read
    access to memory reachable by the kernel when the
    print-fatal-signals option is enabled. This option is disabled by
    default.

CVE-2010-0007

    Florian Westphal reported a lack of capability checking in the
    ebtables netfilter subsystem. If the ebtables module is loaded,
    local users can add and modify ebtables rules.

CVE-2010-0291

    Al Viro reported several issues with the mmap/mremap system calls
    that allow local users to cause a denial of service (system panic)
    or obtain elevated privileges.

CVE-2010-0298 & CVE-2010-0306

    Gleb Natapov discovered issues in the KVM subsystem where missing
    permission checks (CPL/IOPL) permit a user in a guest system to
    denial of service a guest (system crash) or gain escalated
    privileges with the guest.

CVE-2010-0307

    Mathias Krause reported an issue with the load_elf_binary code on
    the amd64 flavor kernels that allows local users to cause a denial
    of service (system crash).

CVE-2010-0309

    Marcelo Tosatti fixed an issue in the PIT emulation code in the
    KVM subsystem that allows privileged users in a guest domain to
    cause a denial of service (crash) of the host system.

CVE-2010-0410

     Sebastian Krahmer discovered an issue in the netlink connector
     subsystem that permits local users to allocate large amounts of
     system memory resulting in a denial of service (out of memory).

CVE-2010-0415

    Ramon de Carvalho Valle discovered an issue in the sys_move_pages
    interface, limited to amd64, ia64 and powerpc64 flavors in Debian.
    Local users can exploit this issue to cause a denial of service
    (system crash) or gain access to sensitive kernel memory.

For the stable distribution (lenny), this problem has been fixed in
version 2.6.26-21lenny3.

For the oldstable distribution (etch), these problems, where
applicable, will be fixed in updates to linux-2.6 and linux-2.6.24.

We recommend that you upgrade your linux-2.6 and user-mode-linux
packages.

Note: Debian carefully tracks all known security issues across every
linux kernel package in all releases under active security support.
However, given the high frequency at which low-severity security
issues are discovered in the kernel and the resource requirements of
doing an update, updates for lower priority issues will normally not
be released for all kernels at the same time. Rather, they will be
released in a staggered or "leap-frog" fashion.

The following matrix lists additional source packages that were
rebuilt for compatibility with or to take advantage of this update:

                                             Debian 5.0 (lenny)
     user-mode-linux                         2.6.26-1um-2+21lenny3

Upgrade instructions
- --------------------

wget url
        will fetch the file for you
dpkg -i file.deb
        will install the referenced file.

If you are using the apt-get package manager, use the line for
sources.list as given below:

apt-get update
        will update the internal database
apt-get upgrade
        will install corrected packages

You may use an automated update by adding the resources from the
footer to the proper configuration.

Debian GNU/Linux 5.0 alias lenny
- --------------------------------

Stable updates are available for alpha, amd64, arm, armel, hppa, i386, ia64, mips, mipsel, powerpc, s390 and sparc.

Source archives:

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-2.6_2.6.26-21lenny2.diff.gz>
    Size/MD5 checksum:  7743374 ab69790fa702dc6902a48328ed655e17
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-2.6_2.6.26-21lenny1.dsc>
    Size/MD5 checksum:     5778 5a4c27a374c304a0f727a6bc8ca107f3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-2.6_2.6.26.orig.tar.gz>
    Size/MD5 checksum: 61818969 85e039c2588d5bf3cb781d1c9218bbcb
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-2.6_2.6.26-21lenny1.diff.gz>
    Size/MD5 checksum:  7739467 c8cd3620be097861ec74ba95738bf627
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-2.6_2.6.26-21lenny2.dsc>
    Size/MD5 checksum:     5778 71b62f2c2ce9bf12c5c8c7b1aead68a2
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-2.6_2.6.26-21lenny3.diff.gz>
    Size/MD5 checksum:  7763646 65572787e140a954f0b5cbc00ce52038
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-2.6_2.6.26-21lenny3.dsc>
    Size/MD5 checksum:     5778 3de1d44da4b4d993a2662b458bac2141

Architecture independent packages:

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-patch-debian-2.6.26_2.6.26-21lenny2_all.deb>
    Size/MD5 checksum:  2690888 80c31909190e7ef5a0b888cd985aefdb
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-source-2.6.26_2.6.26-21lenny3_all.deb>
    Size/MD5 checksum: 48683206 b0eacf9609bf144218de5826c134b802
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-manual-2.6.26_2.6.26-21lenny3_all.deb>
    Size/MD5 checksum:  1772374 969fd31b2eeb9172960519e484b1450c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-doc-2.6.26_2.6.26-21lenny2_all.deb>
    Size/MD5 checksum:  4626604 9dc643ca17ca24bb437f7727e41fa9ef
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-tree-2.6.26_2.6.26-21lenny2_all.deb>
    Size/MD5 checksum:   109086 d2d99e3343807acfcec613fe2b0faade
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-source-2.6.26_2.6.26-21lenny2_all.deb>
    Size/MD5 checksum: 48679310 626bdb9481a68d788c3af070bd83972a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-manual-2.6.26_2.6.26-21lenny2_all.deb>
    Size/MD5 checksum:  1772624 f3978cd4cbae4410fdd01812ca49314d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-support-2.6.26-2_2.6.26-21lenny2_all.deb>
    Size/MD5 checksum:   124282 3ef6c6a2c133f85b34e86a9060d59d8e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-tree-2.6.26_2.6.26-21lenny3_all.deb>
    Size/MD5 checksum:   109244 949b55283cd8b9ed179b0b3451fdcc10
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-doc-2.6.26_2.6.26-21lenny3_all.deb>
    Size/MD5 checksum:  4629852 2881e6e3bea4a10f553cfb6359b05a04
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-tree-2.6.26_2.6.26-21lenny1_all.deb>
    Size/MD5 checksum:   108954 f965d54958173c8651d5292164546ee6
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-doc-2.6.26_2.6.26-21lenny1_all.deb>
    Size/MD5 checksum:  4629238 079c11cad4d2427bf43ae65406dfa295
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-support-2.6.26-2_2.6.26-21lenny1_all.deb>
    Size/MD5 checksum:   124158 d7bb76a2c77dfac430ea437e61a47c65
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-manual-2.6.26_2.6.26-21lenny1_all.deb>
    Size/MD5 checksum:  1768622 002384ba86962914e82a90a7b5252d96
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-support-2.6.26-2_2.6.26-21lenny3_all.deb>
    Size/MD5 checksum:   124518 4940f30671a058397e8e12df185736b9
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-patch-debian-2.6.26_2.6.26-21lenny3_all.deb>
    Size/MD5 checksum:  2718306 3a5702e13f5771a6c076105a3a574086
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-patch-debian-2.6.26_2.6.26-21lenny1_all.deb>
    Size/MD5 checksum:  2684268 6d1015f72a67ceb41f02e8f632a6b377
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-source-2.6.26_2.6.26-21lenny1_all.deb>
    Size/MD5 checksum: 48675436 3714144183dfa64da47107af27c143a8

alpha architecture (DEC Alpha)

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny2_alpha.deb>
    Size/MD5 checksum:   743134 cf4a7865896e9e113e476aca6cc65ed5
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny1_alpha.deb>
    Size/MD5 checksum:   743006 47d0012e0502eb92092776e835e0036b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-alpha-generic_2.6.26-21lenny3_alpha.deb>
    Size/MD5 checksum: 28609290 40877622ce1a766e130fc198e67631d5
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-alpha-legacy_2.6.26-21lenny1_alpha.deb>
    Size/MD5 checksum:   366504 60066c18d1053316f39e16ddde67e13a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny2_alpha.deb>
    Size/MD5 checksum:   108558 db2317ea07ec9ea8ded1fd1e999380b3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-alpha-generic_2.6.26-21lenny3_alpha.deb>
    Size/MD5 checksum:   370704 0d938cd26f870cdd1a2ac068ad8738ba
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny1_alpha.deb>
    Size/MD5 checksum:  3545962 30082d9aa5156be7116d9dc1761c5f5f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-alpha-smp_2.6.26-21lenny2_alpha.deb>
    Size/MD5 checksum: 29184354 7086136bc3f0af19907e504b8a68f0e7
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-alpha_2.6.26-21lenny3_alpha.deb>
    Size/MD5 checksum:   108728 e01aaf461b32767332e50440ca1b8073
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-alpha-generic_2.6.26-21lenny2_alpha.deb>
    Size/MD5 checksum: 28489518 e43aa4137aaea8225993cd55219ca6e7
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-alpha-smp_2.6.26-21lenny2_alpha.deb>
    Size/MD5 checksum:   367130 dfc6af330d308a43ed5ba326368eabbc
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-alpha-generic_2.6.26-21lenny1_alpha.deb>
    Size/MD5 checksum: 28488834 6820b322ef5f3c5a604f95d7757f0e97
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-alpha-generic_2.6.26-21lenny1_alpha.deb>
    Size/MD5 checksum:   365698 361caa0394224ff46f8f75587f2d3aff
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-alpha-legacy_2.6.26-21lenny2_alpha.deb>
    Size/MD5 checksum:   367346 2498260a6e3837db87b97a78970740b4
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-alpha-legacy_2.6.26-21lenny2_alpha.deb>
    Size/MD5 checksum: 28472206 4552e0e14143dbc3111e3b353d3804de
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-alpha_2.6.26-21lenny2_alpha.deb>
    Size/MD5 checksum:   108574 47e3f313c9ac8f071f74a408b7c93d2f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-alpha-legacy_2.6.26-21lenny3_alpha.deb>
    Size/MD5 checksum:   370366 60a9815a9a19873c70586dbd32a7dbf0
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-alpha-smp_2.6.26-21lenny3_alpha.deb>
    Size/MD5 checksum: 29295384 435f89962b985d1de69e425bf304d219
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-alpha-smp_2.6.26-21lenny3_alpha.deb>
    Size/MD5 checksum:   371476 de6e1346acc8231c319ec76a607dff2a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-alpha_2.6.26-21lenny1_alpha.deb>
    Size/MD5 checksum:   108446 b0040c54aa8a2b657f4d55a02fc50bc8
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_alpha.deb>
    Size/MD5 checksum:  3612802 fb5c52064b92d844e3bc663654b4de8a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny1_alpha.deb>
    Size/MD5 checksum:   108430 5200f39f4bebd0807a179a0812f7c3cc
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-alpha-legacy_2.6.26-21lenny3_alpha.deb>
    Size/MD5 checksum: 28592640 21a58865548deda20521de56bd5362e1
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-alpha-smp_2.6.26-21lenny1_alpha.deb>
    Size/MD5 checksum:   367038 e905881cf4ec730fac2657f7fb4f664c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny2_alpha.deb>
    Size/MD5 checksum:  3546082 1bad5ef07ae9042c3df480c675475b5f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-alpha-smp_2.6.26-21lenny1_alpha.deb>
    Size/MD5 checksum: 29184122 0c80f7b5e1387271ef37420e97da962f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-alpha-generic_2.6.26-21lenny2_alpha.deb>
    Size/MD5 checksum:   365834 6cc1189d57ac0006204a26e19e1d2536
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_alpha.deb>
    Size/MD5 checksum:   755446 35d03e320438bced6901f61ad8e111d9
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-alpha-legacy_2.6.26-21lenny1_alpha.deb>
    Size/MD5 checksum: 28472668 bc33990bce302d2a70906deb5d3ae7bb
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_alpha.deb>
    Size/MD5 checksum:   108704 134d95bbe8c49b00d91ebb96e864e0ce

amd64 architecture (AMD x86_64 (AMD64))

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:   108706 255f99a00d2d7d1241aeb55cb4941607
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-modules-2.6.26-2-xen-amd64_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum: 19275592 452896220df1ef20183ce97e5897590d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-openvz_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:  3777462 bc1448c45ba29a99605dc4caf03591cf
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:  3721884 d145b6140e015b3ec6149a73d8ab0fb7
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:   751486 8e754d45a468cbd949d02e21b8f10b3c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/xen-linux-system-2.6.26-2-xen-amd64_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:   108686 ca630ca6d3e5743197878761a6e32386
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-xen_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:  3854084 bbac30d36345039e9036fb372d7ffdd0
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-amd64_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:   390288 fcfc06d7a3e5e9ed3e68396ac6fdd46a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-xen-amd64_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:   386658 a82ce6a325c10a22361e10c32171ab8e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-xen-amd64_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:   387216 f0e564f52e143b68183373485062b036
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-amd64_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:   108578 6f0c584a51282de966fb3f680535edbc
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-openvz_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:  3777410 a97413b19da80972bfc433cd1782149c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:   751526 3103db650456c14a768e4a1dbcd65a82
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-xen-amd64_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:  1807168 892c524cbc3014e4c6d136af79b51ad0
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-amd64_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum: 20912064 b2faa4db19ca1f9bad36db345004bd63
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-openvz-amd64_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum: 21064476 0480eeb89071e5773ca76697cc897edf
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:  3754412 81f809eb9d8703163a8d626f431af02e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-amd64_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum: 20894650 5866fb12c183a8a34421e58b69199a52
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:  3721852 d964b38118d93b5d26675a73bbb600cb
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-openvz-amd64_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum: 21064028 5d1655c4936c175e6a91355ab022a9b9
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-amd64_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:   389696 aa7b4b067f01db03132eb9d4d6d58091
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-amd64_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:   391906 4f47f5cd839c41a1ab4c7b2f54cd0f2c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-openvz-amd64_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:   395926 ea1253cda840d49d41e13702efbed02a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:   108548 c92d21172898d445763a4d8fd05cbe0d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-amd64_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:   108734 3587ae10e018dd195d218d3a124bd06f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-modules-2.6.26-2-xen-amd64_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum: 19276528 eea793d5e6bc477da5633dd90ab68a80
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-openvz-amd64_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:   397146 5d1ac382c997a823a0a003dcb3ba2070
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-amd64_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum: 20894254 a4085dc5c64b1c9248a5063d01195fcd
  <http://security.debian.org/pool/updates/main/l/linux-2.6/xen-linux-system-2.6.26-2-xen-amd64_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:   108534 70aaa46a803e0e0359f62572d9c3fd47
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-amd64_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum: 20912152 1cfacd064cda0fa03a64985f9fa93ff4
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-xen_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:  3854086 577d66e2d5ad76a18100929016adb4b9
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny3_amd64.deb>
    Size/MD5 checksum:  3754410 a6271de66c96f5a97cd4e355da812069
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-amd64_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:   389496 9464058c967a225f838a9fad0aab3612
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-xen-amd64_2.6.26-21lenny2_amd64.deb>
    Size/MD5 checksum:  1807208 cf864e620211634cacb9fe349da96e67

arm architecture (ARM)

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum:   749514 1b7b54fc5a3c088408fcadb17eced0bf
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-orion5x_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum:   362960 e996c77f5d49a6f216b71a9449a55b30
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum:   108748 6fd11cf124041f35486898948bcd345a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-orion5x_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum:   363278 965b088ffa539bc9b7437963832c4c55
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-ixp4xx_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum: 11720320 f23ec924b931ed33227f3e3b0e017b0b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-footbridge_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum:   350880 836aa5293823be9983382878a706b11c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-arm_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum:   108786 eec5ef010eb4d265862730eea462735d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-iop32x_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum: 12454778 d61744348179cd47e3ea948126aad499
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-arm_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum:   108642 0409de8db98786b9cc98fa78491188d9
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-orion5x_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum: 11422168 0a738e9c8a223035938587231ab29be0
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-footbridge_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum:   351962 778ef245efcc634d56f25afa60a4880b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-iop32x_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum: 12447084 9ce402f2d3f9231155657e2c10f33510
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-ixp4xx_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum:   365886 ee6bc34915a84fc025fcc7ce105d1888
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum:  4142286 2493399a50d78a16f1946bf572409cd8
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum:   748962 b2b554707ecd14c922ac5e0bc812bf2e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-orion5x_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum: 11410256 f34c33699b5aa8c80f4d2cdf27f43d98
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-footbridge_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum: 10241948 f6d25d1eee96031b8b0203d0e7711b1d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-ixp4xx_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum: 11728562 9c14add2ef000e7b62c52e7e2b2d8682
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-ixp4xx_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum:   365840 50aa3ef4b64c3bda32171c302e468e80
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-iop32x_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum:   368962 b8e3d95e9da32e61398e2b481ea85259
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum:  4138498 7b4f0bf9d70d63d22aa04fd72de9071f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-footbridge_2.6.26-21lenny3_arm.deb>
    Size/MD5 checksum: 10253486 07767d4f8e4f038738d9dae099a5e27c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum:   108596 ee087da9b5e9314d94728c173079d128
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-iop32x_2.6.26-21lenny2_arm.deb>
    Size/MD5 checksum:   368146 ac75a805d9a76f9f28fec550f1b3ff62

armel architecture (ARM EABI)

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-iop32x_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum: 12400530 761c33f67bbe6616cab21192e4256df5
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-orion5x_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum: 11377936 b692b4724667bfc12aa8e80cac8723f8
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-ixp4xx_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum: 11688238 06544e3ce8794e071fc873a2cc1b4e27
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-versatile_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum:  9581042 37b21f42a1ee2256f9aa17c092738a61
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-orion5x_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum:   364802 ed63e7a262130ef9bd8711f73152f06f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-iop32x_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum:   368672 4447fc56fa6118d87ad47a721e5bf793
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-versatile_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum:   337618 3b21371c9423d38e5031724464d01950
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum:   749306 4361179f0f5572d5b56a7747c3547512
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum:   749706 acbe317294eeca0f43da9211b726817e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum:  4134366 d9461c790b30d017090e74e97f5a3325
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum:   108712 7a9cc05416f6c06bdd8f388cc3c0c5f9
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum:   108462 7e7adfb769f8cb5b1f48ecf2f5c15ea3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-ixp4xx_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum:   367112 08975a13584af0230b8e592686573d64
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-armel_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum:   108744 8d645205e1ef21e2759df33d39227a28
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-orion5x_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum:   361902 a389f0082ce6653e7b2a08168787887d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-versatile_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum:  9583098 6acf27fb79f8ddd46f42ff81cb91ea14
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-ixp4xx_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum:   365012 b7b78539a5da9ef226af3bd8c00f4a27
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-iop32x_2.6.26-21lenny3_armel.deb>
    Size/MD5 checksum: 12408468 a9aa31723c34fd0d7c668ce06afa49df
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-iop32x_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum:   367392 c18589de88fbff8bf744b2082fbd0d21
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-orion5x_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum: 11373712 a8136ebb88c293b538afd2227605665d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-versatile_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum:   336788 ca9ea27ae187f347ce1f917708338374
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-ixp4xx_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum: 11682376 96c874e9988ecfe3bf29ab87a59bc800
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum:  4138826 9c36123a7336f66315eb00d38455b364
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-armel_2.6.26-21lenny1_armel.deb>
    Size/MD5 checksum:   108502 c3d8036a8945c598bc45d9703b6b033e

hppa architecture (HP PA RISC)

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-parisc-smp_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum: 16329288 5218a1a4f278d7b57b15c28b8484d14b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-parisc-smp_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum: 16329740 c5cdc0e069cb6ede4e78bbde3c1c9d38
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-parisc_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum:   298428 0a9230bddf14ff72e72f5f8364a7065b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-parisc64_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum: 17065708 68733ed99b8bf117045e91993d3e34e1
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum:   760596 c7073dae32f1da80546996f9be99dc4b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-parisc64-smp_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum: 17606836 e6b141686e83c8e87708eb32ba5f765b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-parisc64_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum: 17064682 6ee4beb8ddc3ec65d2e44ef2abc52711
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-hppa_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum:   108774 dcaac67bb66ab3993c236e0c39cbc863
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum:  3602414 5ae801276f46a79329e53e9b6f7ae5c8
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-parisc-smp_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum:   300986 eeeab86991aa8d4d2570d7d1efe7e0c1
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-parisc_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum: 15732620 4142cd60023a49fc5cba7e524a0e677e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-parisc64_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum:   300704 247bcb4b71e6d7fea75987dcddbfb843
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-parisc64_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum:   299420 d976a36fe5f633475bf2c0c06ef10b43
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-parisc64-smp_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum:   301474 c0ee7622dd755b3b5fece4fab4814b37
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-parisc-smp_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum:   301264 f3ebd75938c150e31532d22957cae48a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum:   108592 caa307b157d81c1b02d2ad0c0f342fcb
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-parisc_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum:   298662 afdc4001e99590a38eff17434f8dbf6e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-hppa_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum:   108624 7fdd70b403b07234c57272a5956c7637
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum:   760622 dc5b55d7cd8aec6cac4f4de8d3908138
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum:   108748 8231281dd48d07f51a6c76cae28b03b6
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-parisc64-smp_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum: 17607646 3fbc0828d0dc3c8730bebd789cf6a99c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-parisc_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum: 15734148 24cb2bcfc207fe3b0fa5063c043e0485
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_hppa.deb>
    Size/MD5 checksum:  3602208 9faa4dde7cf95d0eceb8173b0797bab4
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-parisc64-smp_2.6.26-21lenny2_hppa.deb>
    Size/MD5 checksum:   301262 5585e2c5657f24afec825d9c48069afb

i386 architecture (Intel ia32)

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-686-bigmem_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   400552 f0ab806af132585894a0b4d488f681e1
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-486_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum: 20182002 68bf490913715a3a4893a0f3030fd08a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/xen-linux-system-2.6.26-2-xen-686_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   108698 05e475352e3e9e7f7ca058b02da5e596
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-xen-686_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   395282 9ca23e9ea72d7267547488df93ed3891
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   751496 4bb4db205fe5a3e5b08a2f96ef535dae
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-openvz-686_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum: 20512122 404f343a28b757905e08c4ed06938025
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-openvz-686_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   414984 17003e8c4d69f33f139d0b838253296f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:  3754214 c13bbf441f92bd7e5d443bcc120056bf
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:  3804582 0703c8ce4817e2691bd967eb2a1e2aaa
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-486_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum: 20309414 e71604df8f47dbe29e4eb480d523dcf4
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-openvz-686_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   406794 2363770c63d9f8466ccd7d705b0f52c2
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-xen_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:  3854214 9aa41ff3e4c1dd59cd75c504ad138251
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-686_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum: 20369630 e8bd60ec3f9da0fadbb042abaf36c139
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-686_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   406598 acdc58c26d377b6dd5875734aa065ac0
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-686-bigmem_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum: 20335314 dcb229f6502f1917863bced44e26415e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-modules-2.6.26-2-xen-686_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum: 18044830 1ec4594316ac2f6b6fae6aabaa9b2375
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-amd64_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum: 20875430 71438d596864b15028d568cfc15086d8
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:  3721614 7fc667d57644e72926ad94679040808f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-686_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum: 20242322 bb675ba8ac183757940fc2f9a38cff3f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-openvz_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:  3777298 7bc44c56c67d7347d1d14b33969d43d0
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-modules-2.6.26-2-xen-686_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum: 18043878 bd5cc921dc8b99aee2349949b268742d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-686_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   400030 5cf9b3313efc0353d53270ff6c810b52
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-openvz-686_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   407430 a0005c58b226ce7a2c6cbd32c52e4707
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-i386_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   108652 125393b32f78a83b5487f86609caef9c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-686_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum: 20242572 21545fdd42b8b74a9d76a5fdefff5d71
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-i386_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   108470 39f81b9bc97be71c303134ea39d39668
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-i386_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   108760 ff55bc8837a8e5d3f1c9f846c3b49df8
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-openvz_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:  3863030 f60938819e03e8dc8dcfa4998c02acd2
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-686-bigmem_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum: 20465042 23bc3025baf8c3fc11cfd182d928a16e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-amd64_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum: 20979960 77e4935a71746ca71a48a6fec79aace8
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-486_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   407034 d2671fbd82a221a68c7ddaba28e770cc
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-686_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   399662 054c4c2158e54a5e340aa61bf79c8621
  <http://security.debian.org/pool/updates/main/l/linux-2.6/xen-linux-system-2.6.26-2-xen-686_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   108586 b9d0b66a7f7d3cd72220a28b1a16e3db
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-686-bigmem_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   400428 d166f07671c10db0e501e005d59c0dbe
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-686_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum: 20217898 fa4b16b6a046746c752edaa45fd4fc64
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-openvz-686_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum: 20640882 06e18bca999a2c1e460259b6c4682aa3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-amd64_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum: 20875948 baba9d22a44a1ee0814f7acd950727e1
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   108596 9a34da9105c07f3fd7caaafa38fd4a09
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   108418 85098acb63d71b952a5e2bec67315522
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-amd64_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   389694 403c43df5849b1b00101dcd77a0ffa27
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-modules-2.6.26-2-xen-686_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum: 18160862 f7852726d5fb05ce76e3ce406ca491ae
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-686_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   400640 a46d929bd03a31d8455057852186cf04
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-openvz_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:  3777542 b3a9d9c191efecc4ebdead63e0e1a1b6
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-686-bigmem_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum: 20335320 c257003a37486c77eb7236b74a1d5bc4
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   108706 80501c6c7b452434f9afccea416b709f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:  3754468 1eb8fcf5397026e02228ad5896598f44
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-xen-686_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:  1594926 2405c55c21f13bacecfec840c81216fe
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   751384 c150bf84cf8b4f41309bb353d6e0f0ea
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-xen-686_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   387262 0b501ef2dd8f259e336c70bfac6db9a4
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-686_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   400902 031d09121cb1b04cf75fcc7fb1fa4925
  <http://security.debian.org/pool/updates/main/l/linux-2.6/xen-linux-system-2.6.26-2-xen-686_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   108414 b9cc53f856782ac942ca3b98ece340e0
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-486_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum: 20182500 d4dc224037d71e76f7ed3878f3aa9630
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-686_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum: 20341764 e59a069f5d07703913f9488cf2c17021
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:  3721846 229b2c54999ea5a7e3679bf5f4a2d473
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   765918 d172b7dcad29aa4ee04def9a221d6fba
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-686-bigmem_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   400638 9612c907573cf5785e91bdd309c97ab4
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-686_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum: 20217866 cd265b0c5c7940df3723df5b1e6b8a0b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-686_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   408114 33446a9ba1aaf26565b86dcd7991310c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-686-bigmem_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   408332 e7b92f9c7e2281e2050156a126481d0b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-xen-686_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   388204 f05bb15f0d5ac59b92c0e7e58666f582
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-686-bigmem_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   407184 759e686be26e57c5fa7831d410a59b42
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-686-bigmem_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   400086 47b28b4325c193b07bd877e849d015c8
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-486_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   399920 8c8f053d50d3c7e72e5543f9a36fd6d5
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-amd64_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:   396974 0fae2cc8843879be33a567cd4247d77a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-xen-686_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:  1594510 86fed72851b3bbd9af666dca50a74718
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-xen-686_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:  1594836 932befcaafaf934e0d49110cb144933e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-486_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:   399700 a2824e942fb9f0365c29f32f301da907
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-686-bigmem_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum: 20359926 7c7e0e8cff5215ad2b683dafc3ed6a60
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-xen_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:  3944378 c4c879bbbaa703dc76a8d163cc9d0d00
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-686-bigmem_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum: 20490380 679b0811cd187d7e624cd089da8a43b1
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-686-bigmem_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum: 20359822 5cee4d1bfbaf186efc124b7aba33e6e0
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-xen_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum:  3853962 5e3d260ca6e9f5436b12c30a0eeec239
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-openvz-686_2.6.26-21lenny1_i386.deb>
    Size/MD5 checksum: 20511694 cd40e02a7dd10aa8699a54ae5540c68e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-amd64_2.6.26-21lenny3_i386.deb>
    Size/MD5 checksum:   389638 245b487189ca0af34526b8f770094172
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny2_i386.deb>
    Size/MD5 checksum:  3839050 85f7e26766452c9ce8e88d43c83fecbc

ia64 architecture (Intel ia64)

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-itanium_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum:   359070 86419da16f001cb7f6478b592cc0a47f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum:   108430 edba219dabfb91c9c7b2fa3d9f4a4bc7
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-mckinley_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum: 34359310 89151596f07a1d74a7585d5209bc577f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-mckinley_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum:   357818 98556ca82088020d3599d5f2261e7e0d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-mckinley_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum:   358114 b27fddaebd882ea5442fb858f9dfd4bf
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-mckinley_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum: 34362562 f584be340a1d6fad3d55586d605e20c1
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum:  3689594 b153ada0e53662ce15c1c89bc2adfa56
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-itanium_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum:   357710 19bddfe6c9db67ac1db5b5542dcd58f1
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-itanium_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum: 34109258 059e79f42c661f2e1549a6354caa43ce
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-itanium_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum: 34107508 ecaa06007b46aafebb67e3b4f9a05b2d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-itanium_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum:   357568 00dd418b3433ca1f93f4368191d8b72c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum:  3657036 814b6e4b81ab9173f027f556615d0bc3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-mckinley_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum:   357550 9f3c74754dc8f874e3815e621e143754
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum:   750092 4a6ae1dd8acbbf0180c71954694b1526
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum:   108708 f1285ff67a0f561915765bcb50ecbead
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum:  3689576 20a59a5041e7647d0391f854686664a7
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-ia64_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum:   108462 1c02ca719c0feb638de4f4f5c256eb84
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-itanium_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum:   357964 c45479bde1eb1f6f5e2c362ff947a0e5
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum:  3657030 4482b2b529976d961f3020c77222693d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-mckinley_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum:   357208 fa7766e518316520ab7dc1272ca58ece
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-mckinley_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum: 34284740 d90557ca07fc3e8c301ac7eecb7af9bd
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-mckinley_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum: 34289814 c5bcd6bd38d18693b2f211cda0d4d68e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-ia64_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum:   108736 ff3225f77a14a14e998443a8cb8d296a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum:   750184 3fc4607bbae8e1646b2022c405906cb2
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-itanium_2.6.26-21lenny1_ia64.deb>
    Size/MD5 checksum: 34172758 2c92b359fd81b2698905506af74eed9b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-itanium_2.6.26-21lenny3_ia64.deb>
    Size/MD5 checksum: 34170826 bb4ed05b498a4f153ff5ed49d295055a

mips architecture (MIPS (Big Endian))

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-5kc-malta_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum: 29281456 5b9a8e4a0a9fa48b5cedfcc57839e414
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sb1-bcm91250a_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum:   296956 9dcc3a6d73cc4703251ad1ae76ee30a7
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-5kc-malta_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum: 29278756 9c890b56c619dea8c6786149f065b409
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sb1a-bcm91480b_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum:   297228 c24d99d38ed9c0f76aef1db87ea9927f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-4kc-malta_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum:   353130 526563ac3ea7cae71a2431d1c16d5148
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum:   744330 30d4553c7165d0636d44ec819573c378
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sb1-bcm91250a_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum: 20135908 7852982d46bc9c28f8c6df1f069ebd0b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum:  3893146 cf461075d9af08b66a1565123df5db0f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum:   108708 9f84a606392f0ea233a6560be5acefd9
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-r4k-ip22_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum: 11493164 0f75a57fcc89d5c9e3274d76d3b0dd01
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-r4k-ip22_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum:   255094 aba773b89f23e5b1d39a58486c000d85
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-5kc-malta_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum:   350880 62f184f11f05d085dd9e5ca8038864d3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-r5k-ip32_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum: 15652112 cd6f08d973b6d56d8ad1d348ead030fe
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-r5k-ip32_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum:   280804 a283c8f566d27f8429017cc280fae633
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-r4k-ip22_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum:   254932 62bb2cb1fb9920375c15d7566aa3711d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum:   744386 dd652dfa4e958776dde0af9554972399
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-4kc-malta_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum: 23361964 1154ed62d11f482dc7aa0195754dd2df
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sb1a-bcm91480b_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum:   296378 ac0de038db87e9909627f0cc2edeaed9
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum:  3893178 25c2f247293ab5fafb2396d7ebe20be4
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-4kc-malta_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum: 23363494 31066703509d7bbaea31272350df78a4
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sb1-bcm91250a_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum: 20135662 777f9ee3f47b55d1faeba8b2a3903942
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-mips_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum:   108760 3a0e18806710cf691522c6a0808128e4
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-r5k-ip32_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum: 15652726 47e9d348fb7cbb113198a26981601e0c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum:   108554 22d6bf0c82b4f969af7c9855d8e54198
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-r5k-ip32_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum:   280788 2fc79c75a0e2fc12ec263b902370e10f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-4kc-malta_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum:   352166 86b7b9b0f7953b14663ac49ba072d395
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sb1-bcm91250a_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum:   297878 b67b45ea758b284a0d48c00d446cd748
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sb1a-bcm91480b_2.6.26-21lenny3_mips.deb>
    Size/MD5 checksum: 20122020 6b407d7fd8efffeaf63d45319db0fc55
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sb1a-bcm91480b_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum: 20122988 3b90f7c4b6f70455de8a5c6fc7668c90
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-5kc-malta_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum:   350718 673dc7f162bd005127309ecc81421b0c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-r4k-ip22_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum: 11493416 b77c1c4c8bfe696e5de4641b6359b1f6
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-mips_2.6.26-21lenny2_mips.deb>
    Size/MD5 checksum:   108606 aa52252ee2852e92c33cec271aff9916

mipsel architecture (MIPS (Little Endian))

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum:  3893180 73266c7fc609bf9f750e841875192915
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-4kc-malta_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum: 22910150 e2748973530548f7159cbf6f538cb4c3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-5kc-malta_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum: 28415222 3ae3611f1517f2ecfc899d0cbda71e6f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sb1-bcm91250a_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum:   297088 1f70ee9f4282255390e63065e9fa622a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-mipsel_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum:   108760 717a49d4823040faab42145c1b2e1e41
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-5kc-malta_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum:   350948 92c44d0ecd82b440afa0e7d741ad5684
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-r5k-cobalt_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum: 14949410 0353fee416b7488c848453208a0f4cca
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum:   108708 04c572a258e844e1595f8d810ead5a93
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sb1-bcm91250a_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum: 19563254 0782f6e31196abc07bbc0290c2b767a7
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-4kc-malta_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum:   352038 a8013bf2fa8e126b71bf4c1158f1002c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum:   744406 c2fbab4a4e1e882b1388f6adc6032213
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-r5k-cobalt_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum:   292376 a4e4702b73d9283a5bc26dad7c3323b6
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sb1a-bcm91480b_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum: 19558208 909b1772ff02ef617734dfcb8bf18747
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sb1a-bcm91480b_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum:   296318 b6730e89326eee6c9306dd1cc7ebc928
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sb1-bcm91250a_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum: 19567570 094286b9487c516a27a850e08c32931d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum:   108556 b4bcc6570f0b7337263d34ebd7e7ceb6
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sb1a-bcm91480b_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum:   297264 fbb0ada7a1680fb2f00b615186936f73
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-5kc-malta_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum: 28416038 27237e256488565425ebaa8d6ab781b8
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-4kc-malta_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum: 22910044 ce0baa79dcc512708e04d5dc668e3119
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-mipsel_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum:   108608 7680f595061b4146bedd8a319e0af7ad
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sb1-bcm91250a_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum:   296886 4223f4b9674acc651572e3cb432c8dec
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum:  3893194 5c157b25a27392a97c5aec2d078985df
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-4kc-malta_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum:   351946 c134f08fc56a4d7288433cba264437e3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-r5k-cobalt_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum:   292572 6ddf47b5231ff541a6ebb0cc386228f7
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sb1a-bcm91480b_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum: 19556346 01e04778dc95a69e11e6198194985b8f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_mipsel.deb>
    Size/MD5 checksum:   744340 dedd7c4693d5227fc726874988b6a0f1
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-r5k-cobalt_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum: 14949144 dc4f2aa55f036d3d2ffaf92f0e0f1ca3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-5kc-malta_2.6.26-21lenny2_mipsel.deb>
    Size/MD5 checksum:   350654 1b7fe619ab4fc0cb0df29c3a2675e8b6

powerpc architecture (PowerPC)

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum:   108752 6bce46cb07333205c6d970db413a51df
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum:   758014 1f68cb39b3c3d26d654dbbcf17e38570
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-powerpc64_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum:   374268 b8682d2fb8d9e75eecb3d046d606d321
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-powerpc_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum: 23659188 e24d0a87309db7d7a63e3273f8432899
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-powerpc64_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum:   374612 a2841b95f64a4b7486f431504b992d95
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-powerpc_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum: 23232706 664334238582c7421ca887e155b5114c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-powerpc-smp_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum: 23634322 df1bf16b4f8e6bf59f33fb409bf9f62b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-powerpc64_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum: 23480278 adcd1522810051a3adefe3b84df84b1d
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum:  3886604 e7ca971a8ed765aefd349a914bb55a66
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-powerpc_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum:   370296 4e330a4850fda773f6ef212c9cb6b0cf
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-powerpc64_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum: 23535520 7dc32e3fa484672149c86080ff072315
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-powerpc_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum:   368624 d0a1ad90a03d524d6e5e3fedd5dddf01
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-powerpc_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum:   108790 26a11a94f15ceeb11e29b6d631471170
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-powerpc-smp_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum:   370170 7616bfb6b57b95757a63c4e0b3870ad1
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_powerpc.deb>
    Size/MD5 checksum:  3851336 6812d0f66042a59ae627cf08398396e6

s390 architecture (IBM S/390)

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-s390x_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:   231812 443d9a58058ef675f117774c6acb53e6
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-s390x_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:  7782010 4150695cebaa7114b588086a85b8d761
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-s390x_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:  7843882 49726eeb18d912aae4c501609b06e321
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-s390x_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:   233290 ea85fcc3ad76b995206105d1ad0f8f0b
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-s390x_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:   232154 724e6da916fb3eabc419900417e45c10
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-s390x_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:   233170 b6a5976881616d1c07212bc6f17ad314
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-s390_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:   231438 9da054d96d343d8c5e4af7a3a7b94a74
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:   108544 fa872af4eef01b3c001a1312107b4127
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-s390_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:   108568 d100107291909e29dc1b4026916959c2
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-s390x_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:  7844118 044d92fce39f973d466a84dab2ced59e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-s390x_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:  7780936 aa4394bec7213a65e1c3f59fe637b2d6
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-s390x_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:   232980 00e17f6e7a6719d0cef0e89fda1d3a76
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:  3532850 0ade36f410f94be998164118f36aa832
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-s390x_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:   231988 9e9a3e06b018c3aa676ef7ab6af83c59
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:   743394 4e8feb51e6eb5fbc8e62895cef2b73cd
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:  3532886 5b7b7e631e3bb226e3baad772169f633
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-s390_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:   231350 371b0d728b1462b23646f59854e179c3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:  3565332 fc1be5997c795ab339153d571116ee2e
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-s390_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:  7491026 a2e9b13bd73fe526a607551cfded3032
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:  3565334 2f991b448d637633ff0450d084eda972
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-s390-tape_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:  1631554 1324987d809936d18f08c781d8e66107
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:   743468 d0083c16129f2f21574146ad117ec17f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:  3533014 213740094d15f4b7f552d543b2aa4518
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:   108424 931c2376543c633f7c4fbaa122c4fa59
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:  3565296 5763e23f048ece3acac12c334a3aa1dc
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-s390_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:   108726 fc1cdbbe5bf3760aab56899b484839b1
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:   743536 51ef4a41d5b6b58c2df474d41bb97c4f
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-s390-tape_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:  1631388 05ca9fa4452242e54c5eddefd70005d3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-s390-tape_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:  1631704 0c1a5fe63cb770950bef2dbc55821e33
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-s390_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:  7491476 7cedc121923d537a208b5217b8d1b96c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-s390x_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:  7782028 4a92f28cc6b0f6bdeb2df5686bcf4739
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-s390_2.6.26-21lenny2_s390.deb>
    Size/MD5 checksum:  7491588 3c58a3f4a1d9b89c0c189eb2407783c7
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-s390_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:   231486 4f229cd14a2c27f0d2784acfc5929f92
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:   108702 1c33ae2d8ad15eed26d365f8815fcf06
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-s390x_2.6.26-21lenny3_s390.deb>
    Size/MD5 checksum:  7842050 5dcd3840524dad2b8dca28091e265c77
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-s390_2.6.26-21lenny1_s390.deb>
    Size/MD5 checksum:   108442 05e65d77de538f379150ff888d4da788

sparc architecture (Sun SPARC/UltraSPARC)

  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sparc64-smp_2.6.26-21lenny3_sparc.deb>
    Size/MD5 checksum:   304836 60db894e762c4c762d878fa4a538cee6
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-sparc_2.6.26-21lenny1_sparc.deb>
    Size/MD5 checksum:   108454 122fa3253107c5867f1d7171b6802630
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sparc64_2.6.26-21lenny3_sparc.deb>
    Size/MD5 checksum: 14249708 fd2527370a79250e8f374d05c5e48cfe
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-sparc64_2.6.26-21lenny1_sparc.deb>
    Size/MD5 checksum:   300434 4681dd7de1437b3ac2c8420c0c793496
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-sparc64_2.6.26-21lenny2_sparc.deb>
    Size/MD5 checksum:   305056 09a2296bbad709fadaa0a7acf597f123
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sparc64-smp_2.6.26-21lenny2_sparc.deb>
    Size/MD5 checksum: 14573800 f8d7e11eb1667f2ead6bb8aa92dce7c4
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sparc64_2.6.26-21lenny3_sparc.deb>
    Size/MD5 checksum:   303008 ca229d3e1d36665400bd0005858473e0
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny1_sparc.deb>
    Size/MD5 checksum:   784800 44122e452c72b7d854c6d29ce98e3d48
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny3_sparc.deb>
    Size/MD5 checksum:   799228 7f5dfb496b80755569d320bbf0ee4888
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny3_sparc.deb>
    Size/MD5 checksum:  3822248 3048df9d0a20c7866253f79afa934735
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sparc64-smp_2.6.26-21lenny2_sparc.deb>
    Size/MD5 checksum:   305374 05ade563f319712d4b8de7407a25e106
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sparc64_2.6.26-21lenny1_sparc.deb>
    Size/MD5 checksum: 14199372 14dd0886b189b1ffa86855caf9568d71
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sparc64_2.6.26-21lenny2_sparc.deb>
    Size/MD5 checksum: 14250896 29dc2c98bb0f9bc154b59486892686bd
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-sparc_2.6.26-21lenny2_sparc.deb>
    Size/MD5 checksum:   108576 1ba3270b78802cd3fe15c8cc3746b482
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sparc64_2.6.26-21lenny2_sparc.deb>
    Size/MD5 checksum:   302700 8d5d0c42583d5fa2bf0af6a4774b6be9
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-sparc64_2.6.26-21lenny3_sparc.deb>
    Size/MD5 checksum: 14592944 7098b971ee9d70eb92335ccfc9e071e9
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sparc64_2.6.26-21lenny1_sparc.deb>
    Size/MD5 checksum:   297880 b8c7da78c57207af9f51fefef74810d3
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny1_sparc.deb>
    Size/MD5 checksum:  3718614 62431ffe89341ef70445cc9b18b680aa
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-vserver-sparc64_2.6.26-21lenny3_sparc.deb>
    Size/MD5 checksum:   305236 1ecbd687d76f725e8ba018eaa3fac6c5
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sparc64-smp_2.6.26-21lenny3_sparc.deb>
    Size/MD5 checksum: 14572560 614993b7b9f13159922158175d673ab9
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny2_sparc.deb>
    Size/MD5 checksum:  3822498 20e7f68725ddf51332e0554a96f7bd6c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-sparc64_2.6.26-21lenny1_sparc.deb>
    Size/MD5 checksum: 14539066 ff1e7b5d4c1d279254925efe261cbca7
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny3_sparc.deb>
    Size/MD5 checksum:   108710 56304708930d0cd9c64a055b03511d4c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-libc-dev_2.6.26-21lenny2_sparc.deb>
    Size/MD5 checksum:   799118 7a64b7389f1bf41511ce0c93665d8792
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny1_sparc.deb>
    Size/MD5 checksum:   108430 a67227f066768bde2bb78cd578986f88
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-sparc64-smp_2.6.26-21lenny1_sparc.deb>
    Size/MD5 checksum: 14520660 dce34d857d90cbdab0dd73efa18b6859
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all-sparc_2.6.26-21lenny3_sparc.deb>
    Size/MD5 checksum:   108726 8295960b735e2799a889d5fd593b128a
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny3_sparc.deb>
    Size/MD5 checksum:  3788028 34c07fccd4d1e9dbc1cfdd0918fb6bae
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common-vserver_2.6.26-21lenny1_sparc.deb>
    Size/MD5 checksum:  3751162 980707bc74c46c3859b6a1f0a10c1e5c
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-all_2.6.26-21lenny2_sparc.deb>
    Size/MD5 checksum:   108556 9cf91819aceb42e810eed1da7ff5e384
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-image-2.6.26-2-vserver-sparc64_2.6.26-21lenny2_sparc.deb>
    Size/MD5 checksum: 14593082 1bcc020b8d5d0d58788293017b1c67ec
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-sparc64-smp_2.6.26-21lenny1_sparc.deb>
    Size/MD5 checksum:   299360 aa33980c597218177f9023b8b3dcb3f2
  <http://security.debian.org/pool/updates/main/l/linux-2.6/linux-headers-2.6.26-2-common_2.6.26-21lenny2_sparc.deb>
    Size/MD5 checksum:  3788198 22648123f5cde436d78c937cabe9655e

  These files will probably be moved into the stable distribution on
  its next update.

- ---------------------------------------------------------------------------------
For apt-get: deb <http://security.debian.org/> stable/updates main
For dpkg-ftp: ftp://security.debian.org/debian-security dists/stable/updates/main
Mailing list: debian-security-announce@lists.debian.org
Package info: `apt-cache show <pkg>' and <http://packages.debian.org/><pkg>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iD8DBQFLdgJnhuANDBmkLRkRAvkcAJ966OcKeGTe+uPm0HUdNQsk5vqJ5gCfTdsc
cvnialeoC48w0oVq4wmdfoc=
=Xil3
-----END PGP SIGNATURE-----

```

---


