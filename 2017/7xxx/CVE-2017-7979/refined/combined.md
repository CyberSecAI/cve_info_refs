=== Content from launchpad.net_389ce8f4_20250126_012523.html ===

[Log in / Register](https://launchpad.net/%2Blogin)

![Launchpad logo and name](/@@/launchpad-logo-and-name.svg)

---

Search

Search

**47,168** projects,
**2,043,835** bugs,
**1,009,617** branches,
**86,958** Git repositories,
**3,149,475** translations,
**817,744** answers,
**76,153** blueprints,
and counting...

## Launchpad

#### A software collaboration platform that provides

#### [Bug tracking](https://bugs.launchpad.net/)

One place to track bugs across project boundaries and tools

#### [Code hosting](https://code.launchpad.net/) using [Git](https://git-scm.com/) and [Bazaar](http://bazaar.canonical.com/)

Easy for anyone to get your project's code using Git or Bazaar

#### [Code reviews](https://help.launchpad.net/Code/Review)

Full control of who can land code in your project remains with you

#### [Ubuntu package building and hosting](https://launchpad.net/ubuntu)

Publishing your software is simple with Personal Package Archives

#### [Crowd source translations](https://translations.launchpad.net/)

Build an open community to translate your software into almost any language

#### [Mailing lists](https://help.launchpad.net/Teams/MailingLists)

Find and work with the right people by building a social network of individuals and teams around projects

#### [Answer tracking and FAQs](https://answers.launchpad.net/)

Free software thrives on people helping each other when the unexpected happens

#### [Specification tracking](https://blueprints.launchpad.net/)

Track ideas and chunks of work as “blueprints”

## Get started

Learn more about Launchpad in the
[user guide](https://help.launchpad.net/).

If you're ready, you can:

* ![add](/@@/add-homepage.png)
  #### [Create an account](/%2Blogin)
* ![tour](/@@/tour-homepage.png)
  #### [Take the tour](/%2Btour)
* ![question](/@@/question-homepage.png)
  #### [Find answers](https://answers.launchpad.net/)

## Featured projects

* ![Beautiful Soup](/@@/product-logo)
  #### [Beautiful Soup](/beautifulsoup)

  A program designed for screen-scraping HTML. The discussion group is at: http://groups.google.com...
* ![Breezy](/@@/product-logo)
  #### [Breezy](/brz)

  Breezy is a friendly powerful distributed version control system.
* ![Inkscape](https://launchpadlibrarian.net/66795469/ink-lp-logo.png)
  #### [Inkscape](/inkscape)

  Inkscape is an SVG-based graphics editor featuring alpha
  blending, node editing, SVG to PNG exp...
* ![Launchpad itself](https://launchpadlibrarian.net/600817174/Canonical_Launchpad_icon_64px.png)
  #### [Launchpad itself](/launchpad)

  Launchpad is a set of Web services to help software developers collaborate.
* ![OpenMW](/@@/product-logo)
  #### [OpenMW](/openmw)

  OpenMW is an attempt to reimplement the popular role playing game Morrowind. It aims to be a full...
* ![OpenShot Video Editor](https://launchpadlibrarian.net/250357498/OpenShot-2-Logo.png)
  #### [OpenShot Video Editor](/openshot)

  OpenShot Video Editor is a free, open-source, non-linear video editor. It can create and edit vid...
* ![OpenStack](https://launchpadlibrarian.net/52042558/os64.png)
  #### [OpenStack](/openstack)

  The OpenStack Open Source Cloud Mission: to produce the ubiquitous Open Source Cloud Computing pl...
* ![txpkgupload](/@@/product-logo)
  #### [txpkgupload](/txpkgupload)

  Package upload server used by Launchpad.
* ![Ubuntu](https://launchpadlibrarian.net/606381979/CoF%2064px.png)
  #### [Ubuntu](/ubuntu)

  Ubuntu is a complete Linux-based operating system, freely available with both community and profe...

* **[Browse all
  47168
  projects](/projects)!**

## Recent Launchpad blog posts

[Read the blog](http://blog.launchpad.net)

* [Introducing Launchpad Bug Templates](https://blog.launchpad.net/general/introducing-launchpad-bug-templates)
  – 03 Dec 2024

  The new feature bug templates in Launchpad aims to streamline the bug reporting process, making it more efficient for both users and project maintainers. In the past, Launchpad provided only a basic description field for filling bug reports. This often led to incomplete or vague submissions, as users may not include essential details or steps […]
* [Launchpad’s new homepage](https://blog.launchpad.net/general/launchpads-new-homepage)
  – 01 Mar 2024

  Launchpad’s new homepage Launchpad has been around for a while, and its frontpage has remained untouched for a few years now. If you go into launchpad.net, you’ll notice it looks quite different from what it has looked like for the past 10 years – it has been updated! The goal was to modernize it while […]
* [Launchpad-linked federated Matrix accounts](https://blog.launchpad.net/general/launchpad-verified-federated-matrix-accounts)
  – 22 Jan 2024

  Users can now add their Matrix accounts to their profile in Launchpad, as requested by Canonical’s Community team. We also took the chance to slightly rework the frontend and how we display social accounts in the user profiles. Instead of having different sections in the profile for each social account , all social accounts are […]
* [Self-service riscv64 builds](https://blog.launchpad.net/ppa/self-service-riscv64-builds)
  – 22 Nov 2023

  Launchpad has supported building for riscv64 for a while, since it was a requirement to get Ubuntu’s riscv64 port going. We don’t actually have riscv64 hardware in our datacentre, since we’d need server-class hardware with the hypervisor extension and that’s still in its infancy; instead, we do full-system emulation of riscv64 on beefy amd64 hardware […]
* [Introducing Project-Scoped Access Tokens](https://blog.launchpad.net/general/introducing-project-scoped-access-tokens)
  – 20 Nov 2023

  Access tokens can be used to access repositories on behalf of someone. They have scope limitations, optional expiry dates, and can be revoked at any time. They are a stricter and safer alternative to using real user authentication when needing to automate pushing and/or pulling from your git repositories. This is a concept that has […]
* [New domain names for PPAs](https://blog.launchpad.net/ppa/new-domain-names-for-ppas)
  – 16 Feb 2022

  Since they were introduced in 2007, Launchpad’s Personal Package Archives (PPAs) have always been hosted on ppa.launchpad.net. This has generally worked well, but one significant snag became clear later on: it was difficult to add HTTPS support for PPAs due to the way that cookies work on the web. Launchpad uses a cookie for your […]

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_807438ba_20250124_140129.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[linux package](https://launchpad.net/ubuntu/%2Bsource/linux)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/linux)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/linux)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/linux)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/linux)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/linux)

# refcount underflow / kernel NULL dereference after attempting to add basic tc filter

Bug #1682368 reported by
[Fabian Grünbichler](https://launchpad.net/~f-gruenbichler)
on 2017-04-13

[258](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [linux (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/linux "Latest release: 5.4.0-207.227, uploaded to main on 2025-01-21 03:36:11.159826+00:00 by Mehmet Basaran (mehmetbasaran), maintained by Ubuntu Kernel Team (kernel-team)") | Fix Released | Medium | [Fabian Grünbichler](https://launchpad.net/~f-gruenbichler) |  |
|  | [Zesty](https://bugs.launchpad.net/ubuntu/zesty/%2Bsource/linux) | Fix Released | Medium | [Fabian Grünbichler](https://launchpad.net/~f-gruenbichler) |  |

### Bug Description

== SRU Justification ==

Impact: adding a tc filter sometimes fails, potentially followed by kernel hangs and kernel NULL pointer dereference

Fix: proposed upstream by Wolfgang Bumiller [1,2]

Regression Potential: Since nobody else noticed this issue in 4.11 >= rc1 or Ubuntu 4.10 >= 15.17, and the fix only touches the broken code, the regression potential should be minimal ;)

1: <http://marc.info/?l=linux-netdev&m=149200746116365>

2: <http://marc.info/?l=linux-netdev&m=149200742616349>

---

Commit 1045ba77a which was backported for #1674087 in fc0cef7a8ec1e63ee3405f642983dd86e04ab6cc (first released with Ubuntu-4.10.0-15.17) introduces the problematic code. Note that while the traces below were generated using a custom patched kernel, the same issue is reproducible using Ubuntu Zesty's 4.10.0-15.17 (and later) kernels.

The full cover letter of the proposed fix by my colleague Wolfgang Bumiller follows:

Commit 1045ba77a ("net sched actions: Add support for user cookies")

added code to net/sched/act\_api.c's tcf\_action\_init\_1 using the `tb`

nlattr array unconditionally, while it was otherwise used as well as

initialized only when `name == NULL`:

if (name == NULL) {

  err = nla\_parse\_nested(tb, TCA\_ACT\_MAX, nla, NULL);

In the other case `nla` is instead passed over to ->init to be parsed

there (using a different set of TCA\_ enum values, iow. TCA\_ACT\_COOKIE

then "clashes" with some other value). This lead to the following three

example commands resulting in errors (sometimes followed by more traces

and hangups some time later (although the hangups happened seconds or

sometimes minutes later, sometimes not at all - results differed between

different kernel versions (linux git-master vs ubuntu's mainline 4.11

rc6 vs. pve 4.10.5 (based off ubuntu's zesty kernel where the commit is

cherry-picked)...))):

# ip link add ve0 type veth peer name ve0b

 # tc qdisc add dev ve0 handle ffff: ingress

 # tc filter add dev ve0 parent ffff: prio 50 basic police rate 1000bps burst 1000b drop

The 3rd command would sometimes succeed, sometimes error with:

RTNETLINK answers: Invalid argument

 We have an error talking to the kernel

and sometimes error with:

RTNETLINK answers: Cannot allocate memory

 We have an error talking to the kernel

In the latter case I assume `cklen` became negative, which passes the

TC\_COOKIE\_MAX\_SIZE check since it is signed but becomes unsigned later

in kmemdup() (see the crash dump below)

When the `tc filter add` command fails a backtrace shows up in dmesg,

added below.

I'm not sure why the TC\_ACT\_COOKIE code was added to tcf\_action\_init\_1

where it is now. It makes me think that it's supposed to be available

universally, but the `name == NULL` check for how nla is used or passed

to ->init() shows that the there are various different TC\_ACT\_\* enums in

use at this point, hence the 'RFC' part of the patches, I'm not that

familiar with the code yet.

Backtrace when running `tc filter add`:

Apr 12 11:31:38 testmachine kernel: ------------[ cut here ]------------

    Apr 12 11:31:38 testmachine kernel: WARNING: CPU: 7 PID: 16596 at mm/page\_alloc.c:3541 \_\_alloc\_pages\_slowpath+0x9fe/0xba0

    Apr 12 11:31:38 testmachine kernel: Modules linked in: act\_police cls\_basic sch\_ingress veth nfsv3 nfs\_acl nfs lockd grace ip6t\_REJECT nf\_reject\_ipv6 nf\_conntrack\_ipv6 nf\_defrag\_ipv6 ip6table\_filter ip6\_tables xt\_mac ipt\_REJECT nf\_reject\_ipv4 xt\_physdev xt\_comment nf\_conntrack\_ipv4 nf\_defrag\_ipv4 xt\_tcpudp xt\_mark xt\_set xt\_addrtype xt\_multiport xt\_conntrack nf\_conntrack ip\_set\_hash\_net ip\_set arc4 md4 nls\_utf8 cifs ccm fscache ipta

    Apr 12 11:31:38 testmachine kernel: snd\_hda\_codec\_realtek snd\_hda\_codec\_generic aesni\_intel aes\_x86\_64 crypto\_simd drm\_kms\_helper glue\_helper cryptd drm snd\_hda\_intel intel\_cstate snd\_hda\_codec i2c\_algo\_bit fb\_sys\_fops snd\_hda\_core joydev syscopyarea snd\_hwdep sysfillrect input\_leds sysimgblt intel\_rapl\_perf snd\_pcm snd\_timer snd pcspkr soundcore mei\_me lpc\_ich mei shpchp tpm\_infineon mac\_hid wmi acpi\_pad video vhost\_net vhost macv

    Apr 12 11:31:38 testmachine kernel: CPU: 7 PID: 16596 Comm: tc Tainted: P O 4.10.5-1-pve #1

    Apr 12 11:31:38 testmachine kernel: Hardware name: ASUS All Series/Z97-A, BIOS 2801 11/11/2015

    Apr 12 11:31:38 testmachine kernel: Call Trace:

    Apr 12 11:31:38 testmachine kernel: dump\_stack+0x63/0x81

    Apr 12 11:31:38 testmachine kernel: \_\_warn+0xcb/0xf0

    Apr 12 11:31:38 testmachine kernel: warn\_slowpath\_null+0x1d/0x20

    Apr 12 11:31:38 testmachine kernel: \_\_alloc\_pages\_slowpath+0x9fe/0xba0

    Apr 12 11:31:38 testmachine kernel: ? get\_page\_from\_freelist+0x46a/0xb20

    Apr 12 11:31:38 testmachine kernel: ? schedule+0x36/0x80

    Apr 12 11:31:38 testmachine kernel: ? schedule\_timeout+0x22a/0x3f0

    Apr 12 11:31:38 testmachine kernel: \_\_alloc\_pages\_nodemask+0x209/0x260

    Apr 12 11:31:38 testmachine kernel: alloc\_pages\_current+0x95/0x140

    Apr 12 11:31:38 testmachine kernel: kmalloc\_order+0x18/0x40

    Apr 12 11:31:38 testmachine kernel: kmalloc\_order\_trace+0x24/0xa0

    Apr 12 11:31:38 testmachine kernel: \_\_kmalloc\_track\_caller+0x1e5/0x200

    Apr 12 11:31:38 testmachine kernel: kmemdup+0x20/0x50

    Apr 12 11:31:38 testmachine kernel: nla\_memdup\_cookie+0x55/0x90

    Apr 12 11:31:38 testmachine kernel: tcf\_action\_init\_1+0xcc/0x230

    Apr 12 11:31:38 testmachine kernel: tcf\_exts\_validate+0x52/0x110

    Apr 12 11:31:38 testmachine kernel: basic\_change+0x194/0x4d2 [cls\_basic]

    Apr 12 11:31:38 testmachine kernel: tc\_ctl\_tfilter+0x54d/0x9a0

    Apr 12 11:31:38 testmachine kernel: rtnetlink\_rcv\_msg+0xe6/0x210

    Apr 12 11:31:38 testmachine kernel: ? \_\_kmalloc\_node\_track\_caller+0x1f0/0x2a0

    Apr 12 11:31:38 testmachine kernel: ? \_\_alloc\_skb+0x87/0x1e0

    Apr 12 11:31:38 testmachine kernel: ? rtnl\_newlink+0x860/0x860

    Apr 12 11:31:38 testmachine kernel: netlink\_rcv\_skb+0xa4/0xc0

    Apr 12 11:31:38 testmachine kernel: rtnetlink\_rcv+0x28/0x30

    Apr 12 11:31:38 testmachine kernel: netlink\_unicast+0x18c/0x220

    Apr 12 11:31:38 testmachine kernel: netlink\_sendmsg+0x2f7/0x3b0

    Apr 12 11:31:38 testmachine kernel: ? aa\_sock\_msg\_perm+0x61/0x150

    Apr 12 11:31:38 testmachine kernel: sock\_sendmsg+0x38/0x50

    Apr 12 11:31:38 testmachine kernel: \_\_\_sys\_sendmsg+0x2c2/0x2d0

    Apr 12 11:31:38 testmachine kernel: ? schedule+0x36/0x80

    Apr 12 11:31:38 testmachine kernel: ? ptrace\_stop+0x20a/0x2a0

    Apr 12 11:31:38 testmachine kernel: ? ptrace\_do\_notify+0x98/0xc0

    Apr 12 11:31:38 testmachine kernel: \_\_sys\_sendmsg+0x54/0x90

    Apr 12 11:31:38 testmachine kernel: SyS\_sendmsg+0x12/0x20

    Apr 12 11:31:38 testmachine kernel: do\_syscall\_64+0x5b/0xc0

    Apr 12 11:31:38 testmachine kernel: entry\_SYSCALL64\_slow\_path+0x25/0x25

    Apr 12 11:31:38 testmachine kernel: RIP: 0033:0x7f0aef7d0a77

    Apr 12 11:31:38 testmachine kernel: RSP: 002b:00007ffe88627568 EFLAGS: 00000246 ORIG\_RAX: 000000000000002e

    Apr 12 11:31:38 testmachine kernel: RAX: ffffffffffffffda RBX: 0000000058edf3fc RCX: 00007f0aef7d0a77

    Apr 12 11:31:38 testmachine kernel: RDX: 0000000000000000 RSI: 00007ffe886275b0 RDI: 0000000000000003

    Apr 12 11:31:38 testmachine kernel: RBP: 00007ffe886275b0 R08: 0000000000000001 R09: 0000000000000050

    Apr 12 11:31:38 testmachine kernel: R10: 00000000000005e9 R11: 0000000000000246 R12: 00007ffe886275f0

    Apr 12 11:31:38 testmachine kernel: R13: 00005619ea31ee00 R14: 00007ffe8862f690 R15: 0000000000000000

    Apr 12 11:31:38 testmachine kernel: ---[ end trace be009b606808485e ]---

Which would later on be followed by different kinds of hangups,

sometimes with more seemingly unrelated crash dumps such as:

Apr 12 11:38:50 testmachine kernel: general protection fault: 0000 [#1] SMP

    Apr 12 11:38:50 testmachine kernel: Modules linked in: act\_police cls\_basic sch\_ingress veth nfsv3 nfs\_acl nfs lockd grace ip6t\_REJECT nf\_reject\_ipv6 nf\_conntrack\_ipv6 nf\_defrag\_ipv6 ip6table\_filter ip6\_tables xt\_mac ipt\_REJECT nf\_reject\_ipv4 xt\_physdev xt\_comment nf\_conntrack\_ipv4 nf\_defrag\_ipv4 xt\_tcpudp xt\_mark xt\_set xt\_addrtype xt\_multiport xt\_conntrack nf\_conntrack ip\_set\_hash\_net ip\_set arc4 md4 nls\_utf8 cifs ccm fscache ipta

    Apr 12 11:38:50 testmachine kernel: snd\_hda\_codec\_realtek snd\_hda\_codec\_generic aesni\_intel aes\_x86\_64 crypto\_simd drm\_kms\_helper glue\_helper cryptd drm snd\_hda\_intel intel\_cstate snd\_hda\_codec i2c\_algo\_bit fb\_sys\_fops snd\_hda\_core joydev syscopyarea snd\_hwdep sysfillrect input\_leds sysimgblt intel\_rapl\_perf snd\_pcm snd\_timer snd pcspkr soundcore mei\_me lpc\_ich mei shpchp tpm\_infineon mac\_hid wmi acpi\_pad video vhost\_net vhost macv

    Apr 12 11:38:50 testmachine kernel: CPU: 7 PID: 4829 Comm: chromium Tainted: P W O 4.10.5-1-pve #1

    Apr 12 11:38:50 testmachine kernel: Hardware name: ASUS All Series/Z97-A, BIOS 2801 11/11/2015

    Apr 12 11:38:50 testmachine kernel: task: ffff93679b132d00 task.stack: ffffa479a0e00000

    Apr 12 11:38:50 testmachine kernel: RIP: 0010:kmem\_cache\_alloc\_trace+0x7b/0x190

    Apr 12 11:38:50 testmachine kernel: RSP: 0018:ffffa479a0e03ad0 EFLAGS: 00010202

    Apr 12 11:38:50 testmachine kernel: RAX: 0000000000000000 RBX: 00000000014000c0 RCX: 0000000000005291

    Apr 12 11:38:50 testmachine kernel: RDX: 0000000000005290 RSI: 00000000014000c0 RDI: 000000000001c5c0

    Apr 12 11:38:50 testmachine kernel: RBP: ffffa479a0e03b00 R08: ffff9367bfbdc5c0 R09: ffff936724698580

    Apr 12 11:38:50 testmachine kernel: R10: 0017ffffc0040038 R11: 0000000000000007 R12: 00000000014000c0

    Apr 12 11:38:50 testmachine kernel: R13: ffff93679f003b80 R14: ffffffffc0b9090f R15: ffff93679f003b80

    Apr 12 11:38:50 testmachine kernel: FS: 00007f5a069c4040(0000) GS:ffff9367bfbc0000(0000) knlGS:0000000000000000

    Apr 12 11:38:50 testmachine kernel: CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033

    Apr 12 11:38:50 testmachine kernel: CR2: 00007f5a068de000 CR3: 00000007ccb8b000 CR4: 00000000001426e0

    Apr 12 11:38:50 testmachine kernel: DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000

    Apr 12 11:38:50 testmachine kernel: DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400

    Apr 12 11:38:50 testmachine kernel: Call Trace:

    Apr 12 11:38:50 testmachine kernel: i915\_gem\_object\_get\_pages\_internal+0x6f/0x250 [i915]

    Apr 12 11:38:50 testmachine kernel: ? kmem\_cache\_alloc+0x185/0x1a0

    Apr 12 11:38:50 testmachine kernel: \_\_\_\_i915\_gem\_object\_get\_pages+0x20/0x60 [i915]

    Apr 12 11:38:50 testmachine kernel: \_\_i915\_gem\_object\_get\_pages+0x52/0x60 [i915]

    Apr 12 11:38:50 testmachine kernel: i915\_gem\_batch\_pool\_get+0x11d/0x180 [i915]

    Apr 12 11:38:50 testmachine kernel: i915\_gem\_do\_execbuffer.isra.38+0x1027/0x1790 [i915]

    Apr 12 11:38:50 testmachine kernel: ? shmem\_getpage\_gfp+0xf9/0xc20

    Apr 12 11:38:50 testmachine kernel: i915\_gem\_execbuffer2+0xc5/0x240 [i915]

    Apr 12 11:38:50 testmachine kernel: drm\_ioctl+0x21b/0x4c0 [drm]

    Apr 12 11:38:50 testmachine kernel: ? i915\_gem\_execbuffer+0x310/0x310 [i915]

    Apr 12 11:38:50 testmachine kernel: ? \_\_seccomp\_filter+0x67/0x250

    Apr 12 11:38:50 testmachine kernel: do\_vfs\_ioctl+0xa3/0x610

    Apr 12 11:38:50 testmachine kernel: ? \_\_secure\_computing+0x3f/0xd0

    Apr 12 11:38:50 testmachine kernel: ? syscall\_trace\_enter+0xcd/0x2e0

    Apr 12 11:38:50 testmachine kernel: SyS\_ioctl+0x79/0x90

    Apr 12 11:38:50 testmachine kernel: do\_syscall\_64+0x5b/0xc0

    Apr 12 11:38:50 testmachine kernel: entry\_SYSCALL64\_slow\_path+0x25/0x25

    Apr 12 11:38:50 testmachine kernel: RIP: 0033:0x7f59fba67ca7

    Apr 12 11:38:50 testmachine kernel: RSP: 002b:00007ffd39778868 EFLAGS: 00000246 ORIG\_RAX: 0000000000000010

    Apr 12 11:38:50 testmachine kernel: RAX: ffffffffffffffda RBX: 000024e398f52800 RCX: 00007f59fba67ca7

    Apr 12 11:38:50 testmachine kernel: RDX: 00007ffd397788b0 RSI: 0000000040406469 RDI: 00000000000000a4

    Apr 12 11:38:50 testmachine kernel: RBP: 00007ffd397788b0 R08: 0000000000000000 R09: 0000000000000000

    Apr 12 11:38:50 testmachine kernel: R10: 0000000000000000 R11: 0000000000000246 R12: 0000000040406469

    Apr 12 11:38:50 testmachine kernel: R13: 00000000000000a4 R14: 000024e399dd82c0 R15: 0000000000000070

    Apr 12 11:38:50 testmachine kernel: Code: 08 65 4c 03 05 e7 de 9e 68 49 83 78 10 00 4d 8b 10 0f 84 e0 00 00 00 4d 85 d2 0f 84 d7 00 00 00 49 63 47 20 49 8b 3f 48 8d 4a 01 <49> 8b 1c 02 4c 89 d0 65 48 0f c7 0f 0f 94 c0 84 c0 74 bb 49 63

    Apr 12 11:38:50 testmachine kernel: RIP: kmem\_cache\_alloc\_trace+0x7b/0x190 RSP: ffffa479a0e03ad0

    Apr 12 11:38:50 testmachine kernel: general protection fault: 0000 [#2] SMP

    Apr 12 11:38:50 testmachine kernel: general protection fault: 0000 [#3] SMP

or:

Apr 12 09:19:35 testmachine kernel: BUG: unable to handle kernel NULL pointer dereference at 000000000000019c

    Apr 12 09:19:35 testmachine kernel: IP: \_\_free\_pages+0x5/0x30

    Apr 12 09:19:35 testmachine kernel: PGD 0

    Apr 12 09:19:35 testmachine kernel:

    Apr 12 09:19:35 testmachine kernel: Oops: 0002 [#1] SMP

    Apr 12 09:19:35 testmachine kernel: Modules linked in: act\_police cls\_basic sch\_ingress veth nfsv3 nfs\_acl nfs lockd grace ip6t\_REJECT nf\_reject\_ipv6 nf\_conntrack\_ipv6 nf\_defrag\_ipv6 ip6table\_filter ip6\_tables xt\_mac ipt\_REJECT nf\_reject\_ipv4 xt\_physdev xt\_comment nf\_conntrack\_ipv4 nf\_defrag\_ipv4 xt\_tcpudp xt\_mark xt\_set xt\_addrtype xt\_multiport xt\_conntrack nf\_conntrack ip\_set\_hash\_net ip\_set arc4 md4 nls\_utf8 cifs ccm fscache ipta

    Apr 12 09:19:35 testmachine kernel: aes\_x86\_64 crypto\_simd glue\_helper cryptd intel\_cstate snd\_hda\_codec\_realtek snd\_hda\_codec\_generic i915 intel\_rapl\_perf snd\_hda\_intel drm\_kms\_helper input\_leds joydev snd\_hda\_codec drm snd\_hda\_core snd\_hwdep i2c\_algo\_bit fb\_sys\_fops snd\_pcm syscopyarea snd\_timer sysfillrect sysimgblt snd soundcore mei\_me shpchp lpc\_ich mei pcspkr tpm\_infineon wmi video mac\_hid acpi\_pad vhost\_net vhost macvtap mac

    Apr 12 09:19:35 testmachine kernel: CPU: 2 PID: 69 Comm: kworker/2:1 Tainted: P W O 4.10.5-1-pve #1

    Apr 12 09:19:35 testmachine kernel: Hardware name: ASUS All Series/Z97-A, BIOS 2801 11/11/2015

    Apr 12 09:19:35 testmachine kernel: Workqueue: events \_\_i915\_gem\_free\_work [i915]

    Apr 12 09:19:35 testmachine kernel: task: ffff88885b134380 task.stack: ffffa7e243410000

    Apr 12 09:19:35 testmachine kernel: RIP: 0010:\_\_free\_pages+0x5/0x30

    Apr 12 09:19:35 testmachine kernel: RSP: 0018:ffffa7e243413d18 EFLAGS: 00010206

    Apr 12 09:19:35 testmachine kernel: RAX: 00000000000ffff8 RBX: ffff888762473460 RCX: ffff888762473470

    Apr 12 09:19:35 testmachine kernel: RDX: ffff888762473460 RSI: 0000000000000014 RDI: 0000000000000180

    Apr 12 09:19:35 testmachine kernel: RBP: ffffa7e243413d38 R08: 0000000000000000 R09: 0000000000000000

    Apr 12 09:19:35 testmachine kernel: R10: ffff8887dd8c1080 R11: 0000000000000000 R12: ffff8887624738f0

    Apr 12 09:19:35 testmachine kernel: R13: 00000000ffffffff R14: ffff8887dd8c0440 R15: 0000000000000000

    Apr 12 09:19:35 testmachine kernel: FS: 0000000000000000(0000) GS:ffff88887fa80000(0000) knlGS:0000000000000000

    Apr 12 09:19:35 testmachine kernel: CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033

    Apr 12 09:19:35 testmachine kernel: CR2: 000000000000019c CR3: 0000000476e09000 CR4: 00000000001426e0

    Apr 12 09:19:35 testmachine kernel: DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000

    Apr 12 09:19:35 testmachine kernel: DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400

    Apr 12 09:19:35 testmachine kernel: Call Trace:

    Apr 12 09:19:35 testmachine kernel: ? internal\_free\_pages+0x40/0x80 [i915]

    Apr 12 09:19:35 testmachine kernel: i915\_gem\_object\_put\_pages\_internal+0x1f/0x30 [i915]

    Apr 12 09:19:35 testmachine kernel: \_\_i915\_gem\_object\_put\_pages.part.62+0x11d/0x180 [i915]

    Apr 12 09:19:35 testmachine kernel: ? dma\_fence\_context\_alloc+0x20/0x20

    Apr 12 09:19:35 testmachine kernel: \_\_i915\_gem\_free\_objects+0x161/0x330 [i915]

    Apr 12 09:19:35 testmachine kernel: \_\_i915\_gem\_free\_work+0x33/0x50 [i915]

    Apr 12 09:19:35 testmachine kernel: process\_one\_work+0x1fc/0x4b0

    Apr 12 09:19:35 testmachine kernel: worker\_thread+0x4b/0x500

    Apr 12 09:19:35 testmachine kernel: kthread+0x101/0x140

    Apr 12 09:19:35 testmachine kernel: ? process\_one\_work+0x4b0/0x4b0

    Apr 12 09:19:35 testmachine kernel: ? kthread\_create\_on\_node+0x60/0x60

    Apr 12 09:19:35 testmachine kernel: ret\_from\_fork+0x2c/0x40

    Apr 12 09:19:35 testmachine kernel: Code: ff 41 b8 05 00 00 00 31 c9 4c 89 ea 4c 89 fe e8 a2 e0 ff ff e9 1e ff ff ff 0f 1f 00 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 <f0> ff 4f 1c 75 0e 55 85 f6 48 89 e5 74 08 e8 48 e4 ff ff 5d f3

    Apr 12 09:19:35 testmachine kernel: RIP: \_\_free\_pages+0x5/0x30 RSP: ffffa7e243413d18

    Apr 12 09:19:35 testmachine kernel: CR2: 000000000000019c

    Apr 12 09:19:35 testmachine kernel: ---[ end trace 89cb022ec57f7bd1 ]---

Tags:

[verification-done-zesty](/ubuntu/%2Bsource/linux/%2Bbugs?field.tag=verification-done-zesty)
[zesty](/ubuntu/%2Bsource/linux/%2Bbugs?field.tag=zesty)

## CVE References

* [2017-0605](/bugs/cve/2017-0605 "** REJECT **  DO NOT USE THIS CANDIDA...")
* [2017-7979](/bugs/cve/2017-7979 "The cookie feature in the packet acti...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler) wrote on 2017-04-13: |  |  | [#1](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/1) |
| --- | --- | --- | --- |

SRU request sent to kernel-team list.

SRU request sent to kernel-team list.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Brad Figg (brad-figg)](https://launchpad.net/~brad-figg) wrote on 2017-04-13:  [**Missing required logs.**](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/2) |  |  | [#2](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/2) |
| --- | --- | --- | --- |

This bug is missing log files that will aid in diagnosing the problem. From a terminal window please run:

apport-collect 1682368

and then change the status of the bug to 'Confirmed'.

If, due to the nature of the issue you have encountered, you are unable to run this command, please add a comment stating that fact and change the bug status to 'Confirmed'.

This change has been made by an automated script, maintained by the Ubuntu Kernel Team.

This bug is missing log files that will aid in diagnosing the problem. From a terminal window please run:
apport-collect 1682368
and then change the status of the bug to 'Confirmed'.
If, due to the nature of the issue you have encountered, you are unable to run this command, please add a comment stating that fact and change the bug status to 'Confirmed'.
This change has been made by an automated script, maintained by the Ubuntu Kernel Team.

| Changed in linux (Ubuntu): | |
| --- | --- |
| **status**: | New → Incomplete |

[Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler)
on 2017-04-13

| Changed in linux (Ubuntu): | |
| --- | --- |
| **status**: | Incomplete → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler) wrote on 2017-04-13: |  |  | [#3](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/3) |
| --- | --- | --- | --- |

See <https://bugzilla.proxmox.com/show_bug.cgi?id=1351> and <https://forum.proxmox.com/threads/proxmox-ve-5-0-beta1-released.33731/page-4#post-167127> for downstream reports by users.

See https://bugzilla.proxmox.com/show\_bug.cgi?id=1351 and https://forum.proxmox.com/threads/proxmox-ve-5-0-beta1-released.33731/page-4#post-167127 for downstream reports by users.

[Joseph Salisbury (jsalisbury)](https://launchpad.net/~jsalisbury)
on 2017-04-13

| Changed in linux (Ubuntu): | |
| --- | --- |
| **importance**: | Undecided → Medium |
| Changed in linux (Ubuntu Zesty): | |
| **status**: | Confirmed → In Progress |
| **assignee**: | nobody → Fabian Grünbichler (f-gruenbichler) |
| **tags**: | added: kernel-da-key zesty |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler) wrote on 2017-04-14: |  |  | [#4](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/4) |
| --- | --- | --- | --- |

this is easily reproducible and triggers at least a DoS on a freshly installed 17.04 system, from within an unprivileged LXD container. see the transcript for the executed commands, and journal-1 and journal-2 for the first and second kernel traces (caused by the second to last and last "tc" commands executed in the container).

the end result is a complete hang/crash of the system.

this is easily reproducible and triggers at least a DoS on a freshly installed 17.04 system, from within an unprivileged LXD container. see the transcript for the executed commands, and journal-1 and journal-2 for the first and second kernel traces (caused by the second to last and last "tc" commands executed in the container).
the end result is a complete hang/crash of the system.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler) wrote on 2017-04-14: |  |  | [#5](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/5) |
| --- | --- | --- | --- |

* [transcript](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861893/%2Bfiles/transcript)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861893)
  (3.1 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler) wrote on 2017-04-14: |  |  | [#6](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/6) |
| --- | --- | --- | --- |

* [journal-1](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861894/%2Bfiles/journal-1)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861894)
  (3.7 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler) wrote on 2017-04-14: |  |  | [#7](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/7) |
| --- | --- | --- | --- |

* [journal-2](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861895/%2Bfiles/journal-2)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861895)
  (5.2 KiB,
  text/plain)

| **information type**: | Public → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Arnold (seth-arnold)](https://launchpad.net/~seth-arnold) wrote on 2017-04-19: |  |  | [#8](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/8) |
| --- | --- | --- | --- |

New threads at

<http://marc.info/?l=linux-netdev&m=149251041420195&w=2>

<http://marc.info/?l=linux-netdev&m=149251041420194&w=2>

Does this issue have a CVE number or numbers yet?

Thanks

New threads at
http://marc.info/?l=linux-netdev&m=149251041420195&w=2
http://marc.info/?l=linux-netdev&m=149251041420194&w=2
Does this issue have a CVE number or numbers yet?
Thanks

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler) wrote on 2017-04-19: |  |  | [#9](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/9) |
| --- | --- | --- | --- |

@seth-arnold: no, not yet. shall we request one from Mitre or does Ubuntu/Canonical have a pool to assign one?

@seth-arnold: no, not yet. shall we request one from Mitre or does Ubuntu/Canonical have a pool to assign one?

[Joseph Salisbury (jsalisbury)](https://launchpad.net/~jsalisbury)
on 2017-04-19

| **tags**: | removed: kernel-da-key |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Seth Arnold (seth-arnold)](https://launchpad.net/~seth-arnold) wrote on 2017-04-19: |  |  | [#10](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/10) |
| --- | --- | --- | --- |

Hi Fabian, Ubuntu is currently not assigning CVE numbers; MITRE can be best contacted at <https://cveform.mitre.org/>

Thanks

Hi Fabian, Ubuntu is currently not assigning CVE numbers; MITRE can be best contacted at https://cveform.mitre.org/
Thanks

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler) wrote on 2017-04-19: |  |  | [#11](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/11) |
| --- | --- | --- | --- |

CVE requested, will include once I get a reply.

Note that Canonical is listed as CNA for "Ubuntu/Linux issues" at <http://cve.mitre.org/cve/cna.html> - maybe that list needs an update then?

CVE requested, will include once I get a reply.
Note that Canonical is listed as CNA for "Ubuntu/Linux issues" at http://cve.mitre.org/cve/cna.html - maybe that list needs an update then?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler) wrote on 2017-04-20: |  |  | [#12](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/12) |
| --- | --- | --- | --- |

2017-7979 was assigned (<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-7979>), but is not yet known to LP it seems..

2017-7979 was assigned (http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-7979), but is not yet known to LP it seems..

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler) wrote on 2017-04-21: |  |  | [#13](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/13) |
| --- | --- | --- | --- |

the proposed fix has been queue for -stable in v3, now as a single patch:

<http://marc.info/?t=149269023200005>

the proposed fix has been queue for -stable in v3, now as a single patch:
http://marc.info/?t=149269023200005

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler) wrote on 2017-04-24: |  |  | [#14](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/14) |
| --- | --- | --- | --- |

and applied in v4.11-rc8:

<https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=e0535ce58b92d7baf0b33284a6c4f8f0338f943e>

and applied in v4.11-rc8:
https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=e0535ce58b92d7baf0b33284a6c4f8f0338f943e

[Seth Forshee (sforshee)](https://launchpad.net/~sforshee)
on 2017-04-25

| Changed in linux (Ubuntu): | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

[Stefan Bader (smb)](https://launchpad.net/~smb)
on 2017-05-04

| Changed in linux (Ubuntu Zesty): | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thadeu Lima de Souza Cascardo (cascardo)](https://launchpad.net/~cascardo) wrote on 2017-05-26: |  |  | [#15](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/15) |
| --- | --- | --- | --- |

This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag 'verification-needed-zesty' to 'verification-done-zesty'. If the problem still exists, change the tag 'verification-needed-zesty' to 'verification-failed-zesty'.

If verification is not done by 5 working days from today, this fix will be dropped from the source code, and this bug will be closed.

See <https://wiki.ubuntu.com/Testing/EnableProposed> for documentation how to enable and use -proposed. Thank you!

This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag 'verification-needed-zesty' to 'verification-done-zesty'. If the problem still exists, change the tag 'verification-needed-zesty' to 'verification-failed-zesty'.
If verification is not done by 5 working days from today, this fix will be dropped from the source code, and this bug will be closed.
See https://wiki.ubuntu.com/Testing/EnableProposed for documentation how to enable and use -proposed. Thank you!

| **tags**: | added: verification-needed-zesty |
| --- | --- |

[Fabian Grünbichler (f-gruenbichler)](https://launchpad.net/~f-gruenbichler)
on 2017-05-26

| **tags**: | added: verification-done-zestyremoved: verification-needed-zesty |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2017-06-01: |  |  | [#16](/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/16) |
| --- | --- | --- | --- |

[Download full text](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1682368/comments/16/%2Bdownload) (16.0 KiB)

This bug was fixed in the package linux - 4.10.0-22.24

---------------

linux (4.10.0-22.24) zesty; urgency=low

\* linux: 4.10.0-22.24 -proposed tracker (LP: [#1691146](/bugs/1691146))

\* Fix NVLINK2 TCE route (LP: [#1690155](/bugs/1690155))

    - powerpc/powernv: Fix TCE kill on NVLink2

\* CVE-2017-0605

    - tracing: Use strlcpy() instead of strcpy() in \_\_trace\_find\_cmdline()

\* perf: qcom: Add L3 cache PMU driver (LP: [#1689856](/bugs/1689856))

    - [Config] CONFIG\_QCOM\_L3\_PMU=y

    - perf: qcom: Add L3 cache PMU driver

\* No PMU support for ACPI-based arm64 systems (LP: [#1689661](/bugs/1689661))

    - drivers/perf: arm\_pmu: rework per-cpu allocation

    - drivers/perf: arm\_pmu: manage interrupts per-cpu

    - drivers/perf: arm\_pmu: split irq request from enable

    - drivers/perf: arm\_pmu: remove pointless PMU disabling

    - drivers/perf: arm\_pmu: define armpmu\_init\_fn

    - drivers/perf: arm\_pmu: fold init into alloc

    - drivers/perf: arm\_pmu: factor out pmu registration

    - drivers/perf: arm\_pmu: simplify cpu\_pmu\_request\_irqs()

    - drivers/perf: arm\_pmu: handle no platform\_device

    - drivers/perf: arm\_pmu: rename irq request/free functions

    - drivers/perf: arm\_pmu: split cpu-local irq request/free

    - drivers/perf: arm\_pmu: move irq request/free into probe

    - drivers/perf: arm\_pmu: split out platform device probe logic

    - arm64: add function to get a cpu's MADT GICC table

    - [Config] CONFIG\_ARM\_PMU\_ACPI=y

    - drivers/perf: arm\_pmu: add ACPI framework

    - arm64: pmuv3: handle !PMUv3 when probing

    - arm64: pmuv3: use arm\_pmu ACPI framework

\* [SRU][Zesty]QDF2400 kernel oops on ipmitool fru write 0 fru.bin

    (LP: [#1689886](/bugs/1689886))

    - ipmi: Fix kernel panic at ipmi\_ssif\_thread()

\* tty: pl011: fix earlycon work-around for QDF2400 erratum 44 (LP: [#1689818](/bugs/1689818))

    - tty: pl011: fix earlycon work-around for QDF2400 erratum 44

    - tty: pl011: use "qdf2400\_e44" as the earlycon name for QDF2400 E44

\* kernel-wedge fails in artful due to leftover squashfs-modules d-i files

    (LP: [#1688259](/bugs/1688259))

    - Remove squashfs-modules files from d-i

    - [Config] as squashfs-modules is builtin kernel-image must Provides: it

\* arm64/ACPI support for SBSA watchdog (LP: [#1688114](/bugs/1688114))

    - clocksource: arm\_arch\_timer: clean up printk usage

    - clocksource: arm\_arch\_timer: rename type macros

    - clocksource: arm\_arch\_timer: rename the PPI enum

    - clocksource: arm\_arch\_timer: move enums and defines to header file

    - clocksource: arm\_arch\_timer: add a new enum for spi type

    - clocksource: arm\_arch\_timer: rework PPI selection

    - clocksource: arm\_arch\_timer: split dt-only rate handling

    - clocksource: arm\_arch\_timer: refactor arch\_timer\_needs\_probing

    - clocksource: arm\_arch\_timer: move arch\_timer\_needs\_of\_probing into DT init

      call

    - clocksource: arm\_arch\_timer: add structs to describe MMIO timer

    - clocksource: arm\_arch\_timer: split MMIO timer probing.

    - [Config] CONFIG\_ACPI\_GTDT=y

    - acpi/arm64: Add GTDT table parse driver

    - clocksource: arm\_arch\_timer: simplify ACPI support code.

    - acpi/arm64: Add memory-mapped timer support in GTDT driver

    - clocksource: arm\_arch\_timer: add GTDT support for memory-mapped timer

    - acpi/arm64: Add SBS...

This bug was fixed in the package linux - 4.10.0-22.24
---------------
linux (4.10.0-22.24) zesty; urgency=low
\* linux: 4.10.0-22.24 -proposed tracker (LP: #1691146)
\* Fix NVLINK2 TCE route (LP: #1690155)
- powerpc/powernv: Fix TCE kill on NVLink2
\* CVE-2017-0605
- tracing: Use strlcpy() instead of strcpy() in \_\_trace\_find\_cmdline()
\* perf: qcom: Add L3 cache PMU driver (LP: #1689856)
- [Config] CONFIG\_QCOM\_L3\_PMU=y
- perf: qcom: Add L3 cache PMU driver
\* No PMU support for ACPI-based arm64 systems (LP: #1689661)
- drivers/perf: arm\_pmu: rework per-cpu allocation
- drivers/perf: arm\_pmu: manage interrupts per-cpu
- drivers/perf: arm\_pmu: split irq request from enable
- drivers/perf: arm\_pmu: remove pointless PMU disabling
- drivers/perf: arm\_pmu: define armpmu\_init\_fn
- drivers/perf: arm\_pmu: fold init into alloc
- drivers/perf: arm\_pmu: factor out pmu registration
- drivers/perf: arm\_pmu: simplify cpu\_pmu\_request\_irqs()
- drivers/perf: arm\_pmu: handle no platform\_device
- drivers/perf: arm\_pmu: rename irq request/free functions
- drivers/perf: arm\_pmu: split cpu-local irq request/free
- drivers/perf: arm\_pmu: move irq request/free into probe
- drivers/perf: arm\_pmu: split out platform device probe logic
- arm64: add function to get a cpu's MADT GICC table
- [Config] CONFIG\_ARM\_PMU\_ACPI=y
- drivers/perf: arm\_pmu: add ACPI framework
- arm64: pmuv3: handle !PMUv3 when probing
- arm64: pmuv3: use arm\_pmu ACPI framework
\* [SRU][Zesty]QDF2400 kernel oops on ipmitool fru write 0 fru.bin
(LP: #1689886)
- ipmi: Fix kernel panic at ipmi\_ssif\_thread()
\* tty: pl011: fix earlycon work-around for QDF2400 erratum 44 (LP: #1689818)
- tty: pl011: fix earlycon work-around for QDF2400 erratum 44
- tty: pl011: use "qdf2400\_e44" as the earlycon name for QDF2400 E44
\* kernel-wedge fails in artful due to leftover squashfs-modules d-i files
(LP: #1688259)
- Remove squashfs-modules files from d-i
- [Config] as squashfs-modules is builtin kernel-image must Provides: it
\* arm64/ACPI support for SBSA watchdog (LP: #1688114)
- clocksource: arm\_arch\_timer: clean up printk usage
- clocksource: arm\_arch\_timer: rename type macros
- clocksource: arm\_arch\_timer: rename the PPI enum
- clocksource: arm\_arch\_timer: move enums and defines to header file
- clocksource: arm\_arch\_timer: add a new enum for spi type
- clocksource: arm\_arch\_timer: rework PPI selection
- clocksource: arm\_arch\_timer: split dt-only rate handling
- clocksource: arm\_arch\_timer: refactor arch\_timer\_needs\_probing
- clocksource: arm\_arch\_timer: move arch\_timer\_needs\_of\_probing into DT init
call
- clocksource: arm\_arch\_timer: add structs to describe MMIO timer
- clocksource: arm\_arch\_timer: split MMIO timer probing.
- [Config] CONFIG\_ACPI\_GTDT=y
- acpi/arm64: Add GTDT table parse driver
- clocksource: arm\_arch\_timer: simplify ACPI support code.
- acpi/arm64: Add memory-mapped timer support in GTDT driver
- clocksource: arm\_arch\_timer: add GTDT support for memory-mapped timer
- acpi/arm64: Add SBSA Generic Watchdog support in GTDT driver
\* kernel BUG at /build/linux-7LGLH\_/linux-4.10.0/include/linux/swapops.h:129
(LP: #1674838)
- Revert "mm/ksm: handle protnone saved writes when making page write protect"
- Revert "mm, ksm: convert write\_protect\_page() to use page\_vma\_mapped\_walk()"
- Revert "mm: introduce page\_vma\_mapped\_walk()"
- mm/ksm: handle protnone saved writes when making page write protect
\* arm64: Add CNTFRQ\_EL0 handler (LP: #1688164)
- arm64: Add CNTFRQ\_EL0 trap handler
\* Support IPMI system interface on Cavium ThunderX (LP: #1688132)
- i2c: thunderx: Enable HWMON class probing
\* Update ENA driver to 1.1.2 from net-next (LP: #1664312)
- net/ena: remove ntuple filter support from device feature list
- net/ena: fix queues number calculation
- net/ena: fix ethtool RSS flow configuration
- net/ena: fix RSS default hash configuration
- net/ena: fix NULL dereference when removing the driver after device reset
failed
- net/ena: refactor ena\_get\_stats64 to be atomic context safe
- net/ena: fix potential access to freed memory during device reset
- net/ena: use READ\_ONCE to access completion descriptors
- net/ena: reduce the severity of ena printouts
- net/ena: change driver's default timeouts
- net/ena: change condition for host attribute configuration
- net/ena: update driver version to 1.1.2
\* Zesty update to 4.10.15 stable release (LP: #1689258)
- timerfd: Protect the might cancel mechanism proper
- Handle mismatched open calls
- hwmon: (it87) Avoid registering the same chip on both SIO addresses
- dm ioctl: prevent stack leak in dm ioctl call
- Linux 4.10.15
\* Zesty update to 4.10.14 stable release (LP: #1688499)
- ping: implement proper locking
- sparc64: kern\_addr\_valid regression
- sparc64: Fix kernel panic due to erroneous #ifdef surrounding pmd\_write()
- net: neigh: guard against NULL solicit() method
- net: phy: handle state correctly in phy\_stop\_machine
- kcm: return immediately after copy\_from\_user() failure
- secure\_seq: downgrade to per-host timestamp offsets
- bpf: improve verifier packet range checks
- Revert "UBUNTU: SAUCE: (no-up) net/mlx5: Avoid dereferencing uninitialized
pointer"
- net/mlx5: Avoid dereferencing uninitialized pointer
- l2tp: hold tunnel socket when handling control frames in l2tp\_ip and
l2tp\_ip6
- l2tp: purge socket queues in the .destruct() callback
- openvswitch: Fix ovs\_flow\_key\_update()
- l2tp: take reference on sessions being dumped
- l2tp: fix PPP pseudo-wire auto-loading
- net: ipv4: fix multipath RTM\_GETROUTE behavior when iif is given
- sctp: listen on the sock only when it's state is listening or closed
- tcp: clear saved\_syn in tcp\_disconnect()
- ipv6: Fix idev->addr\_list corruption
- net-timestamp: avoid use-after-free in ip\_recv\_error
- net: vrf: Fix setting NLM\_F\_EXCL flag when adding l3mdev rule
- sh\_eth: unmap DMA buffers when freeing rings
- ipv6: sr: fix out-of-bounds access in SRH validation
- dp83640: don't recieve time stamps twice
- ipv6: sr: fix double free of skb after handling invalid SRH
- ipv6: fix source routing
- gso: Validate assumption of frag\_list segementation
- net: ipv6: RTF\_PCPU should not be settable from userspace
- netpoll: Check for skb->queue\_mapping
- ip6mr: fix notification device destruction
- net/mlx5: Fix driver load bad flow when having fw initializing timeout
- net/mlx5: E-Switch, Correctly deal with inline mode on ConnectX-5
- net/mlx5e: Fix small packet threshold
- net/mlx5e: Fix ETHTOOL\_GRXCLSRLALL handling
- tcp: fix SCM\_TIMESTAMPING\_OPT\_STATS for normal skbs
- tcp: mark skbs with SCM\_TIMESTAMPING\_OPT\_STATS
- macvlan: Fix device ref leak when purging bc\_queue
- net: ipv6: regenerate host route if moved to gc list
- net: phy: fix auto-negotiation stall due to unavailable interrupt
- ipv6: check skb->protocol before lookup for nexthop
- tcp: memset ca\_priv data to 0 properly
- ipv6: check raw payload size correctly in ioctl
- ALSA: oxfw: fix regression to handle Stanton SCS.1m/1d
- ALSA: firewire-lib: fix inappropriate assignment between signed/unsigned
type
- ALSA: seq: Don't break snd\_use\_lock\_sync() loop by timeout
- scsi: return correct blkprep status code in case scsi\_init\_io() fails.
- ARC: [plat-eznps] Fix build error
- MIPS: KGDB: Use kernel context for sleeping threads
- MIPS: cevt-r4k: Fix out-of-bounds array access
- MIPS: Avoid BUG warning in arch\_check\_elf
- p9\_client\_readdir() fix
- ASoC: intel: Fix PM and non-atomic crash in bytcr drivers
- Input: i8042 - add Clevo P650RS to the i8042 reset list
- nfsd: check for oversized NFSv2/v3 arguments
- nfsd4: minor NFSv2/v3 write decoding cleanup
- nfsd: stricter decoding of write-like NFSv2/v3 ops
- ceph: fix recursion between ceph\_set\_acl() and \_\_ceph\_setattr()
- macsec: avoid heap overflow in skb\_to\_sgvec
- net: can: usb: gs\_usb: Fix buffer on stack
- cpu/hotplug: Serialize callback invocations proper
- ftrace/x86: Fix triple fault with graph tracing and suspend-to-ram
- Linux 4.10.14
\* Zesty update to 4.10.13 stable release (LP: #1688485)
- KEYS: Disallow keyrings beginning with '.' to be joined as session keyrings
- KEYS: Change the name of the dead type to ".dead" to prevent user access
- KEYS: fix keyctl\_set\_reqkey\_keyring() to not leak thread keyrings
- tracing: Allocate the snapshot buffer before enabling probe
- HID: wacom: Treat HID\_DG\_TOOLSERIALNUMBER as unsigned
- ring-buffer: Have ring\_buffer\_iter\_empty() return true when empty
- mm: prevent NR\_ISOLATE\_\* stats from going negative
- cifs: Do not send echoes before Negotiate is complete
- CIFS: remove bad\_network\_name flag
- mmc: dw\_mmc: silent verbose log when calling from PM context
- s390/mm: fix CMMA vs KSM vs others
- Input: elantech - add Fujitsu Lifebook E547 to force crc\_enabled
- ACPI / power: Avoid maybe-uninitialized warning
- mmc: dw\_mmc: Don't allow Runtime PM for SDIO cards
- mmc: sdhci-esdhc-imx: increase the pad I/O drive strength for DDR50 card
- ubifs: Fix RENAME\_WHITEOUT support
- ubifs: Fix O\_TMPFILE corner case in ubifs\_link()
- mac80211: reject ToDS broadcast data frames
- mac80211: fix MU-MIMO follow-MAC mode
- x86/mce: Make the MCE notifier a blocking one
- ubi/upd: Always flush after prepared for an update
- powerpc/kprobe: Fix oops when kprobed on 'stdu' instruction
- x86/mce/AMD: Give a name to MCA bank 3 when accessed with legacy MSRs
- device-dax: switch to srcu, fix rcu\_read\_lock() vs pte allocation
- Linux 4.10.13
\* Zesty update to 4.10.12 stable release (LP: #1687045)
- Revert "UBUNTU: SAUCE: Revert "audit: fix auditd/kernel connection state
tracking""
- cgroup, kthread: close race window where new kthreads can be migrated to
non-root cgroups
- audit: make sure we don't let the retry queue grow without bounds
- tcmu: Fix possible overwrite of t\_data\_sg's last iov[]
- tcmu: Fix wrongly calculating of the base\_command\_size
- tcmu: Skip Data-Out blocks before gathering Data-In buffer for BIDI case
- thp: fix MADV\_DONTNEED vs. MADV\_FREE race
- thp: fix MADV\_DONTNEED vs clear soft dirty race
- zsmalloc: expand class bit
- orangefs: free superblock when mount fails
- drm/nouveau/mpeg: mthd returns true on success now
- drm/nouveau/mmu/nv4a: use nv04 mmu rather than the nv44 one
- drm/nouveau/kms/nv50: fix setting of HeadSetRasterVertBlankDmi method
- drm/nouveau/kms/nv50: fix double dma\_fence\_put() when destroying plane state
- drm/nouveau: initial support (display-only) for GP107
- drm/etnaviv: fix missing unlock on error in etnaviv\_gpu\_submit()
- drm/fb-helper: Allow var->x/yres(\_virtual) < fb->width/height again
- CIFS: reconnect thread reschedule itself
- CIFS: store results of cifs\_reopen\_file to avoid infinite wait
- Input: xpad - add support for Razer Wildcat gamepad
- perf annotate s390: Fix perf annotate error -95 (4.10 regression)
- perf/x86: Avoid exposing wrong/stale data in intel\_pmu\_lbr\_read\_32()
- x86/efi: Don't try to reserve runtime regions
- x86/signals: Fix lower/upper bound reporting in compat siginfo
- x86/intel\_rdt: Fix locking in rdtgroup\_schemata\_write()
- x86, pmem: fix broken \_\_copy\_user\_nocache cache-bypass assumptions
- x86/vdso: Ensure vdso32\_enabled gets set to valid values only
- x86/vdso: Plug race between mapping and ELF header setup
- acpi, nfit, libnvdimm: fix interleave set cookie calculation (64-bit
comparison)
- ACPI / scan: Set the visited flag for all enumerated devices
- parisc: fix bugs in pa\_memcpy
- efi/libstub: Skip GOP with PIXEL\_BLT\_ONLY format
- efi/fb: Avoid reconfiguration of BAR that covers the framebuffer
- iscsi-target: Fix TMR reference leak during session shutdown
- iscsi-target: Drop work-around for legacy GlobalSAN initiator
- scsi: sr: Sanity check returned mode data
- scsi: sd: Consider max\_xfer\_blocks if opt\_xfer\_blocks is unusable
- scsi: qla2xxx: Add fix to read correct register value for ISP82xx.
- scsi: sd: Fix capacity calculation with 32-bit sector\_t
- target: Avoid mappedlun symlink creation during lun shutdown
- xen, fbfront: fix connecting to backend
- new privimitive: iov\_iter\_revert()
- make skb\_copy\_datagram\_msg() et.al. preserve ->msg\_iter on error
- libnvdimm: fix blk free space accounting
- libnvdimm: fix reconfig\_mutex, mmap\_sem, and jbd2\_handle lockdep splat
- libnvdimm: band aid btt vs clear poison locking
- can: ifi: use correct register to read rx status
- pwm: rockchip: State of PWM clock should synchronize with PWM enabled state
- cpufreq: Bring CPUs up even if cpufreq\_online() failed
- irqchip/irq-imx-gpcv2: Fix spinlock initialization
- ftrace: Fix removing of second function probe
- drm/i915/gvt: set the correct default value of CTX STATUS PTR
- char: lack of bool string made CONFIG\_DEVPORT always on
- Revert "MIPS: Lantiq: Fix cascaded IRQ setup"
- zram: do not use copy\_page with non-page aligned address
- ftrace: Fix function pid filter on instances
- crypto: algif\_aead - Fix bogus request dereference in completion function
- crypto: xts - Fix use-after-free on EINPROGRESS
- crypto: ahash - Fix EINPROGRESS notification callback
- crypto: lrw - Fix use-after-free on EINPROGRESS
- parisc: Fix get\_user() for 64-bit value on 32-bit kernel
- dvb-usb-v2: avoid use-after-free
- [Config] CONFIG\_SND\_SOC\_INTEL\_BDW\_RT5677\_MACH=m
- ASoC: Intel: select DW\_DMAC\_CORE since it's mandatory
- platform/x86: acer-wmi: setup accelerometer when machine has appropriate
notify event
- x86/xen: Fix APIC id mismatch warning on Intel
- ACPI / EC: Use busy polling mode when GPE is not enabled
- rtc: tegra: Implement clock handling
- mm: Tighten x86 /dev/mem with zeroing reads
- cxusb: Use a dma capable buffer also for reading
- virtio-console: avoid DMA from stack
- Linux 4.10.12
\* Support low-pin-count devices on Hisilicon SoCs (LP: #1677319)
- [Config] CONFIG\_LIBIO=y on arm64 only
- SAUCE: LIBIO: Introduce a generic PIO mapping method
- SAUCE: OF: Add missing I/O range exception for indirect-IO devices
- [Config] CONFIG\_HISILICON\_LPC=y
- SAUCE: LPC: Support the device-tree LPC host on Hip06/Hip07
- SAUCE: LIBIO: Support the dynamically logical PIO registration of ACPI host
I/O
- SAUCE: LPC: Add the ACPI LPC support
- SAUCE: PCI: Apply the new generic I/O management on PCI IO hosts
- SAUCE: PCI: Restore codepath for !CONFIG\_LIBIO
\* APST quirk needed for Samsung 512GB NVMe drive (LP: #1678184)
- nvme: Adjust the Samsung APST quirk
- nvme: Quirk APST off on "THNSF5256GPUK TOSHIBA"
\* [Zesty] d-i: replace msm\_emac with qcom\_emac (LP: #1677297)
- Revert "UBUNTU: d-i: initrd needs msm\_emac on amberwing platform."
- d-i: initrd needs qcom\_emac on amberwing platform.
\* POWER9: CAPI2 enablement (LP: #1686519)
- cxl: Fix build when CONFIG\_DEBUG\_FS=n
- cxl: Read vsec perst load image
- cxl: Remove unused values in bare-metal environment.
- cxl: Keep track of mm struct associated with a context
- cxl: Update implementation service layer
- cxl: Rename some psl8 specific functions
- cxl: Isolate few psl8 specific calls
- cxl: Force psl data-cache flush during device shutdown
- cxl: Add psl9 specific code
\* CVE-2017-7979
- net sched actions: allocate act cookie early
\* refcount underflow / kernel NULL dereference after attempting to add basic
tc filter (LP: #1682368)
- net\_sched: nla\_memdup\_cookie() can be static
-- Thadeu Lima de Souza Cascardo <cascardo@canonical.com> Wed, 17 May 2017 18:13:39 -0300

| Changed in linux (Ubuntu): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[Launchpad Janitor (janitor)](https://launchpad.net/~janitor)
on 2017-06-06

| Changed in linux (Ubuntu Zesty): | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/linux/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Bug attachments

* [transcript](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861893/%2Bfiles/transcript)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861893 "Change attachment details")
* [journal-1](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861894/%2Bfiles/journal-1)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861894 "Change attachment details")
* [journal-2](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861895/%2Bfiles/journal-2)
  [Edit](/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Battachment/4861895 "Change attachment details")

* [Add attachment](/ubuntu/%2Bsource/linux/%2Bbug/1682368/%2Baddcomment)

## Remote bug watches

* [auto-bugzilla.proxmox.com #1351](https://bugzilla.proxmox.com/show_bug.cgi?id=1351)

  [RESOLVED FIXED]
  [Edit](/bugs/1682368/%2Bwatch/123906 "Change watch details")

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugzilla.proxmox.com_6c2da866_20250124_140130.html ===


Proxmox Bugzilla – Bug 1351
VM not start if use network rate limit (like 12.5)
Last modified: 2022-01-24 09:25:09 CET

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
* |
  [New Account](createaccount.cgi)
* |
  [Log In](show_bug.cgi?id=1351&GoAheadAndLogIn=1)

  [x]
* |
  [Forgot Password](show_bug.cgi?id=1351&GoAheadAndLogIn=1#forgot)
  Login:

  [x]

[**Bug 1351**](show_bug.cgi?id=1351)
- VM not start if use network rate limit (like 12.5)

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VM not start if use network rate limit (like 12.5)

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | pve | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=pve "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Kernel ([show other bugs](buglist.cgi?component=Kernel&product=pve&bug_status=__open__)) | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 5 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | x86\_64 (AMD64) Linux | |  | | | [Importance](page.cgi?id=fields.html#importance): | --- enhancement | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Wolfgang Bumiller | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") | <https://wp.me/dk5d2> | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2017-04-11 20:56 CEST by Ivensiya | | --- | --- | | Modified: | 2022-01-24 09:25 CET ([History](show_activity.cgi?id=1351)) | | CC List: | 2 users (show)  casenet.us f.gruenbichler | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=1351&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=1351&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1351#c0)  Ivensiya    2017-04-11 20:56:07 CEST  ``` VM not start if network rate limit (like 12.5). RTNETLINK answers: Invalid argument We have an error talking to the kernel command '/sbin/tc filter add dev tap301i0 parent ffff: prio 50 basic police rate 13107200bps burst 1048576b mtu 64kb drop flowid :1' failed: exit code 2  PVE 5.0.6 4.10.5-1 ```  [Comment 1](show_bug.cgi?id=1351#c1)  Fabian Grünbichler    2017-04-20 09:45:04 CEST  ``` Fixed in pve-kernel-4.10.8-1-pve, released April 14th: <http://download.proxmox.com/debian/dists/stretch/pvetest/binary-amd64/pve-kernel-4.10.8-1-pve_4.10.8-6.changelog> ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=1351)
* - [XML](show_bug.cgi?ctype=xml&id=1351)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=1351)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Help](https://bugzilla.readthedocs.org/en/5.0/using/understanding.html)
  + |
    [New Account](createaccount.cgi)
  + |
    [Log In](show_bug.cgi?id=1351&GoAheadAndLogIn=1)

    [x]
  + |
    [Forgot Password](show_bug.cgi?id=1351&GoAheadAndLogIn=1#forgot)
    Login:

    [x]

+ Service provided by Proxmox Server Solutions GmbH+ | [Privacy](https://www.proxmox.com/en/privacy-policy)
  + | [Legal](https://www.proxmox.com/en/legal)


