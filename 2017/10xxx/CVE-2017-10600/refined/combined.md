=== Content from people.canonical.com_35cc4bef_20250126_101423.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# CVE-2017-10600

Publication date 11 July 2017

Last updated 24 July 2024

---

Ubuntu priority

![](https://assets.ubuntu.com/v1/3887354e-CVE-Priority-icon-High.svg)

**High**

[Why this priority?](/security/cves/about#priority )

## Cvss 3 Severity Score

![](https://assets.ubuntu.com/v1/8010f9e0-CVE-Priority-icon-Medium.svg)

**5.9 · Medium**

[Score breakdown](#impact-score)

Toggle side navigation

Toggle table of contents

* [Description](#description)
* [Status](#status)
* [Notes](#notes)
* [Severity score breakdown](#impact-score)
* [References](#references)

ubuntu-image 1.0 before 2017-07-07, when invoked as non-root, creates files
in the resulting image with the uid of the invoking user. When the
resulting image is booted, a local attacker with the same uid as the image
creator has unintended access to cloud-init and snapd directories.

## From the Ubuntu Security Team

ubuntu-image 1.0 when invoked as non-root on systems with e2fsprogs >= 1.43
creates file permissions in the resulting image with the UID of the invoking
user. When the resulting image is booted, a local attacker with the same UID
as the image creator can alter installed snap packages and signatures to
downgrade or potentially replace snap packages.

[Read the notes from the security team](#notes)

## Status

Show unmaintained releases

| Package | Ubuntu Release | Status |
| --- | --- | --- |
| ubuntu-image | 17.04 zesty | Fixed 1.0+17.04ubuntu1.1 |
| 16.10 yakkety | Fixed 1.0+16.10ubuntu1.1 |
| 16.04 LTS xenial | Ignored |
| 14.04 LTS trusty | Not in release |

---

* [How can I get the fixes?](/security/cves/about#security)
* [What do statuses mean?](/security/cves/about#statuses)
* [Patch details](#patch-details)

## Notes

---

### [jdstrand](https://launchpad.net/~jdstrand)

this issue only affects Ubuntu Core and not snapd on Ubuntu classic
while snapd is not affected, an updated snapd will attempt to
correct permissions on refresh. Because this only affects Ubuntu Core, that
update will happen via the snap store and not included as a separate security
update for the Ubuntu archive.
Ubuntu 16.04 LTS has e2fsprogs 1.42.13

### Patch details

For informational purposes only. We recommend not to cherry-pick updates. [How can I get the fixes?](/security/cves/about#security)

| Package | Patch details |
| --- | --- |
| ubuntu-image | * Upstream:   <https://github.com/CanonicalLtd/ubuntu-image/pull/135> |

## Severity score breakdown

| Parameter | Value |
| --- | --- |
| Base score | 5.9 · Medium |
| Attack vector | Local |
| Attack complexity | Low |
| Privileges required | None |
| User interaction | None |
| Scope | Unchanged |
| Confidentiality | Low |
| Integrity impact | Low |
| Availability impact | Low |
| Vector | CVSS:3.0/AV:L/AC:L/PR:N/UI:N/S:U/C:L/I:L/A:L |

## References

* [MITRE](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-10600)
* [NVD](https://nvd.nist.gov/vuln/detail/CVE-2017-10600)
* [Launchpad](https://launchpad.net/bugs/cve/CVE-2017-10600)
* [Debian](https://security-tracker.debian.org/tracker/CVE-2017-10600)

### Other references

* <https://github.com/CanonicalLtd/ubuntu-image/pull/135>
* <https://forum.snapcraft.io/t/ownership-bug-in-ubuntu-image/1285/1>
* <https://www.cve.org/CVERecord?id=CVE-2017-10600>

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from forum.snapcraft.io_fc94dde4_20250125_162139.html ===


![snapcraft.io](data:image/svg;base64...)
Loading

[snapcraft.io](/)

# [Ownership bug in ubuntu-image](/t/ownership-bug-in-ubuntu-image/1285)

[device](/c/device/10)

[jdstrand](https://forum.snapcraft.io/u/jdstrand)

July 11, 2017, 2:42pm

1

Hello everyone,

We had a bug in ubuntu-image that affected some of the ubuntu-core published images, and might affect one of your images as well depending on how you used the tool.

ubuntu-image when run as non-root on systems with e2fsprogs >= 1.43 would create images with certain files and directories with the UID of the invoking user ([CVE-2017-10600](https://people.canonical.com/~ubuntu-security/cve/2017/CVE-2017-10600.html)). When booting into an affected Ubuntu Core image, a local user with the same UID/GID of the image’s creator had privileged access to cloud-init and snapd directories (and some files within them):

* /etc/cloud
* /var/lib/cloud
* /var/lib/snapd
* /writable/system-data
* /writable/system-data/var
* /writable/system-data/var/lib
* /writable/system-data/boot
* /writable/system-data/etc

Official Ubuntu Core images downloaded from the following URLs between 2017-01-26 and 2017-07-05 are affected by this issue:

* <http://cdimage.ubuntu.com/ubuntu-core/16/stable/current>
* <http://cdimage.ubuntu.com/ubuntu-core/16/candidate/current>
* <http://cdimage.ubuntu.com/ubuntu-snappy/16.04/current>

When booting into an affected official image, these files and directories are incorrectly owned by UID/GID 1000. Because the default user in the image is UID/GID 1000, the default user has access to these files and directories (note that in the default configuration these files are already accessible via sudo). The default configuration of Ubuntu Core protects the default user by disabling console logins and only allowing remote access via ssh key.

Third-party images created with ubuntu-image may have the same issue if the system the image was created on had e2fsprogs 1.43 or higher. For example, Ubuntu 16.04 LTS has e2fsprogs 1.42.13 so images created there are not affected, but Ubuntu 16.10 has 1.43.3 so images are affected when ubuntu-image is invoked as non-root. Furthermore, depending on the invoking user of ubuntu-image, the ownership on affected 3rd-party images might be for a different UID/GID, in which case only a matching non-default user would have improper access to these files and directories.

On 2017-07-03, the core snap in the stable channel was updated to correct the improper ownership of the affected files and directories and by today, devices should have automatically refreshed. You can see the changes made by comparing `/var/lib/snapd/device/ownership-change.before` and `/var/lib/snapd/device/ownership-change.after`. The cleanup operation intentionally does not include removing data from the system, so owners and administrators of affected devices may want to verify the contents of the affected directories.

On 2017-07-05, the ubuntu-core images for [stable](http://cdimage.ubuntu.com/ubuntu-core/16/stable/current) and [edge](http://cdimage.ubuntu.com/ubuntu-core/16/edge/current) were updated with corrected permissions. The [candidate](http://cdimage.ubuntu.com/ubuntu-core/16/candidate/current) channel’s fix is currently [pending](http://cdimage.ubuntu.com/ubuntu-core/16/candidate/pending/). The images in the old <http://cdimage.ubuntu.com/ubuntu-snappy/16.04/current> location won’t be updated and users should use the [ubuntu-core stable image](http://cdimage.ubuntu.com/ubuntu-core/16/stable/current) location instead.

On 2017-07-07, the fix for ubuntu-image tool was [committed to upstream](https://github.com/CanonicalLtd/ubuntu-image/pull/135) sources with corresponding updates for the snap in the the snap store and debs in the Ubuntu archive.

Because this is a bug in the image creation tool and not snapd or the core snap, this issue only affects certain all-snaps Ubuntu Core devices. Classic distributions using snappy are not affected by this issue.

6 Likes

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](/tos)
* [Privacy Policy](/privacy)

Powered by [Discourse](https://www.discourse.org), best viewed with JavaScript enabled

* [Blog](https://snapcraft.io/blog)
* [Build](https://snapcraft.io/build)
* [Docs](https://snapcraft.io/docs/)
* [Tutorials](https://snapcraft.io/docs/snap-tutorials)

[![](https://assets.ubuntu.com/v1/11ff571b-snapcraft.svg)

Canonical Snapcraft](https://snapcraft.io/)

* [Snap Store](https://snapcraft.io/store)
* [About](https://snapcraft.io/about)
* [Learn](#learn-menu)
* [IoT](https://snapcraft.io/iot)
* [Forum](https://forum.snapcraft.io/)
##### Forum


