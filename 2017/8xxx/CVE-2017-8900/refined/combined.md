=== Content from launchpad.net_17b6a3a5_20250126_111049.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[lightdm package](https://launchpad.net/ubuntu/%2Bsource/lightdm)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/lightdm)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/lightdm)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/lightdm)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/lightdm)

# Guest session processes are not confined in 16.10 and newer releases

Bug #1663157 reported by
[Tyler Hicks](https://launchpad.net/~tyhicks)
on 2017-02-09

[352](/%2Bhelp-bugs/bug-heat.html)

This bug affects 15 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Light Display Manager](https://bugs.launchpad.net/lightdm) | New | Undecided | Unassigned |  |
|  | [lightdm (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm "Latest release: 1.32.0-6ubuntu2, uploaded to universe on 2025-01-07 18:26:10.774357+00:00 by Simon Quigley (tsimonq2), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Fix Released | High | [Balint Reczey](https://launchpad.net/~rbalint) | [Ubuntu ubuntu-17.05](https://launchpad.net/ubuntu/%2Bmilestone/ubuntu-17.05) |
|  | [Yakkety](https://bugs.launchpad.net/ubuntu/yakkety/%2Bsource/lightdm) | Fix Released | High | [Tyler Hicks](https://launchpad.net/~tyhicks) |  |
|  | [Zesty](https://bugs.launchpad.net/ubuntu/zesty/%2Bsource/lightdm) | Fix Released | High | [Tyler Hicks](https://launchpad.net/~tyhicks) |  |
|  | [Artful](https://bugs.launchpad.net/ubuntu/artful/%2Bsource/lightdm) | Fix Released | High | [Balint Reczey](https://launchpad.net/~rbalint) | [Ubuntu ubuntu-17.05](https://launchpad.net/ubuntu/%2Bmilestone/ubuntu-17.05) |

### Bug Description

Processes launched under a lightdm guest session are not confined by the /usr/lib/lightdm/lightdm-guest-session AppArmor profile in Ubuntu 16.10, Ubuntu 17.04, and Ubuntu Artful (current dev release). The processes are unconfined.

The simple test case is to log into a guest session, launch a terminal with ctrl-alt-t, and run the following command:

$ cat /proc/self/attr/current

Expected output, as seen in Ubuntu 16.04 LTS, is:

/usr/lib/lightdm/lightdm-guest-session (enforce)

Running the command inside of an Ubuntu 16.10 and newer guest session results in:

unconfined

See [original description](comments/0)

Tags:

[patch](/ubuntu/%2Bsource/lightdm/%2Bbugs?field.tag=patch)
[id-5a57962350afc7d4aa391919](/ubuntu/%2Bsource/lightdm/%2Bbugs?field.tag=id-5a57962350afc7d4aa391919)

## Related branches

[lp:lightdm/1.20](https://code.launchpad.net/~lightdm-team/lightdm/1.20)

[lp:lightdm/1.22](https://code.launchpad.net/~lightdm-team/lightdm/1.22)

[lp:lightdm](https://code.launchpad.net/~lightdm-team/lightdm/trunk)

## CVE References

* [2017-8900](/bugs/cve/2017-8900 "LightDM through 1.22.0, when systemd ...")

[Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks)
on 2017-02-09

| Changed in apparmor (Ubuntu): | |
| --- | --- |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-02-24: |  |  | [#1](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/1) |
| --- | --- | --- | --- |

After coming back to this bug, I noticed that Robert was not subscribed and couldn't see the bug. He's now subscribed.

After coming back to this bug, I noticed that Robert was not subscribed and couldn't see the bug. He's now subscribed.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-02-24: |  |  | [#2](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/2) |
| --- | --- | --- | --- |

* [pstree-yakkety.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826102/%2Bfiles/pstree-yakkety.txt)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826102)
  (4.9 KiB,
  text/plain)

The pstree output helps shed some light on this bug. It looks like the portions of the guest session that are spawned upstart are properly confined. The portions spawned by systemd are not confined. I'm attaching the `pstree -Z guest-XXXXXX` output from a running yakkety guest session.

The pstree output helps shed some light on this bug. It looks like the portions of the guest session that are spawned upstart are properly confined. The portions spawned by systemd are not confined. I'm attaching the `pstree -Z guest-XXXXXX` output from a running yakkety guest session.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-02-24: |  |  | [#3](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/3) |
| --- | --- | --- | --- |

* [pstree-zesty.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826103/%2Bfiles/pstree-zesty.txt)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826103)
  (4.0 KiB,
  text/plain)

Here's the pstree output for a zesty system. It looks like more things have been moved over to systemd's control and, therefore, more things are unconfined.

Here's the pstree output for a zesty system. It looks like more things have been moved over to systemd's control and, therefore, more things are unconfined.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-02-24: |  |  | [#4](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/4) |
| --- | --- | --- | --- |

I should mention that the above pstree outputs require some changes to the pstree code to get the AppArmor label included in the output when the -Z option is specified. I've pushed a work-in-progress quality git branch of psmisc to [https://code.launchpad.net/~tyhicks/psmisc/+git/psmisc/+ref/apparmor](https://code.launchpad.net/~tyhicks/psmisc/%2Bgit/psmisc/%2Bref/apparmor) that includes the necessary changes.

I should mention that the above pstree outputs require some changes to the pstree code to get the AppArmor label included in the output when the -Z option is specified. I've pushed a work-in-progress quality git branch of psmisc to https://code.launchpad.net/~tyhicks/psmisc/+git/psmisc/+ref/apparmor that includes the necessary changes.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-03-22: |  |  | [#5](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/5) |
| --- | --- | --- | --- |

Ow. Unfortunately I don't have any information on how to fix this since most of the work on guest sessions and systemd was done by Martin Pitt.

Ow. Unfortunately I don't have any information on how to fix this since most of the work on guest sessions and systemd was done by Martin Pitt.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-04-04: |  |  | [#6](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/6) |
| --- | --- | --- | --- |

@pitti - I know you don't have any responsibility here but wondering if you have any advice on what direction to solve this?

@pitti - I know you don't have any responsibility here but wondering if you have any advice on what direction to solve this?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [John Johansen (jjohansen)](https://launchpad.net/~jjohansen) wrote on 2017-04-05: |  |  | [#7](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/7) |
| --- | --- | --- | --- |

The proper way to do this would be to use pam\_apparmor, similar to how selinux is doing this, through systemd --user

  /etc/pam.d/systemd-user

However currently this would require updating to a new version of pam\_apparmor OR confining systemd to define hats and potentially other setup, which is probably something we are not ready to do just yet.

The proper way to do this would be to use pam\_apparmor, similar to how selinux is doing this, through systemd --user
/etc/pam.d/systemd-user
However currently this would require updating to a new version of pam\_apparmor OR confining systemd to define hats and potentially other setup, which is probably something we are not ready to do just yet.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [John Johansen (jjohansen)](https://launchpad.net/~jjohansen) wrote on 2017-04-05: |  |  | [#8](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/8) |
| --- | --- | --- | --- |

Note: ideally we want to set things up to use a policy namespace stack so that snaps can work from the guest session.

Note: ideally we want to set things up to use a policy namespace stack so that snaps can work from the guest session.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-04-05: |  |  | [#9](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/9) |
| --- | --- | --- | --- |

I spent some time looking into pam\_apparmor and understanding how could be used. It seems like it would be extremely risky to introduce in a security update and I'm not sure if it even supports everything that would be needed. IIUC, it requires us to confine all login applications that use PAM and it isn't clear if we can selectively confine only the guest users and leave all other users unconfined. At this point, I'm not comfortable/confident in pam\_apparmor as a solution in stable release.

I also did a bit of experimenting with adding "AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session" to the bottom of /lib/systemd/system/user@.service and logging in via a guest session in LightDM. After some scary lightdm-guest-session profile updates, I was able to log in to the guest session. The scary permissions are required because `systemd --user` is being confined by the lightdm-guest-session profile so rules are needed to allow all of the session setup stuff that it does. That's not promising because then all of those permissions will be granted to the guest session itself. I don't see a way to get `systemd --user` to transition to another profile when launching processes inside of the session but I could be missing something.

Modifying the user@.service file also isn't ideal because I don't see a way to only apply the AppArmor profile to guest user sessions while leaving regular user sessions unconfined.

I don't see a good solution to this problem.

I spent some time looking into pam\_apparmor and understanding how could be used. It seems like it would be extremely risky to introduce in a security update and I'm not sure if it even supports everything that would be needed. IIUC, it requires us to confine all login applications that use PAM and it isn't clear if we can selectively confine only the guest users and leave all other users unconfined. At this point, I'm not comfortable/confident in pam\_apparmor as a solution in stable release.
I also did a bit of experimenting with adding "AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session" to the bottom of /lib/systemd/system/user@.service and logging in via a guest session in LightDM. After some scary lightdm-guest-session profile updates, I was able to log in to the guest session. The scary permissions are required because `systemd --user` is being confined by the lightdm-guest-session profile so rules are needed to allow all of the session setup stuff that it does. That's not promising because then all of those permissions will be granted to the guest session itself. I don't see a way to get `systemd --user` to transition to another profile when launching processes inside of the session but I could be missing something.
Modifying the user@.service file also isn't ideal because I don't see a way to only apply the AppArmor profile to guest user sessions while leaving regular user sessions unconfined.
I don't see a good solution to this problem.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [John Johansen (jjohansen)](https://launchpad.net/~jjohansen) wrote on 2017-04-06: |  |  | [#10](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/10) |
| --- | --- | --- | --- |

@tyhicks you are correct that pam\_apparmor is NOT a good solution currently. I will restate, it requires either

- a new version of pam\_apparmor

or

- confining systemd and setting up hats for the guest session user (which currently means the user name can not have randomization).

pam\_apparmor does NOT require we confine all pam applications, just those that are using it.

A minimal patch to better support guest sessions in pam\_apparmor (using change\_onexec instead of change\_hat) could be done (again basically a new version of pam\_apparmor), and might be the best solution. Or if you want I guess we could look at landing full support but that is larger and would involve the parser, etc.

@tyhicks you are correct that pam\_apparmor is NOT a good solution currently. I will restate, it requires either
- a new version of pam\_apparmor
or
- confining systemd and setting up hats for the guest session user (which currently means the user name can not have randomization).
pam\_apparmor does NOT require we confine all pam applications, just those that are using it.
A minimal patch to better support guest sessions in pam\_apparmor (using change\_onexec instead of change\_hat) could be done (again basically a new version of pam\_apparmor), and might be the best solution. Or if you want I guess we could look at landing full support but that is larger and would involve the parser, etc.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur) wrote on 2017-05-05: |  |  | [#11](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/11) |
| --- | --- | --- | --- |

We need to either find a solution to this issue, or push an update to disable guest sessions.

We need to either find a solution to this issue, or push an update to disable guest sessions.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Will Cooke (willcooke)](https://launchpad.net/~willcooke) wrote on 2017-05-08: |  |  | [#12](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/12) |
| --- | --- | --- | --- |

FWIW - Desktop are fine with disabling the guest session while we work out the systemd stuff.

FWIW - Desktop are fine with disabling the guest session while we work out the systemd stuff.

[Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell)
on 2017-05-08

| Changed in lightdm (Ubuntu Zesty): | |
| --- | --- |
| **importance**: | Undecided → High |
| Changed in lightdm (Ubuntu Yakkety): | |
| **importance**: | Undecided → High |
| Changed in lightdm (Ubuntu Artful): | |
| **status**: | New → Triaged |
| Changed in lightdm (Ubuntu Zesty): | |
| **status**: | New → Triaged |
| Changed in lightdm (Ubuntu Yakkety): | |
| **status**: | New → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-05-08: |  |  | [#13](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/13) |
| --- | --- | --- | --- |

* [lightdm-yakkety-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873709/%2Bfiles/lightdm-yakkety-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873709)
  (1.7 KiB,
  text/plain)

Patch to Yakkety that disables guest support by default.

Patch to Yakkety that disables guest support by default.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-05-08: |  |  | [#14](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/14) |
| --- | --- | --- | --- |

* [lightdm-zesty-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873710/%2Bfiles/lightdm-zesty-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873710)
  (2.1 KiB,
  text/plain)

Patch to Zesty that disables guest support by default.

Patch to Zesty that disables guest support by default.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-05-08: |  |  | [#15](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/15) |
| --- | --- | --- | --- |

These patches ship LightDM with guest support disabled by default. You can re-enable it by putting a config file with higher priority containing:

[Seat:\*]

allow-guest=true

e.g. put this in:

/etc/lightdm/lightdm.conf (if editing manually)

/etc/lightdm/lightdm.conf.d/enable-guest.conf (if managing with snippets)

/usr/share/lightdm/lightdm.conf.d/99-enable-guest.conf (if shipping in a package)

These patches ship LightDM with guest support disabled by default. You can re-enable it by putting a config file with higher priority containing:
[Seat:\*]
allow-guest=true
e.g. put this in:
/etc/lightdm/lightdm.conf (if editing manually)
/etc/lightdm/lightdm.conf.d/enable-guest.conf (if managing with snippets)
/usr/share/lightdm/lightdm.conf.d/99-enable-guest.conf (if shipping in a package)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-05-10: |  |  | [#16](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/16) |
| --- | --- | --- | --- |

@robert-ancell thanks for the debdiffs! Is the addition of debian/99-disable-guest.conf intentional in the zesty debdiff? I suspect that debian/50-disable-guest.conf is sufficient and that 99-disable-guest.conf was meant to be removed.

@robert-ancell thanks for the debdiffs! Is the addition of debian/99-disable-guest.conf intentional in the zesty debdiff? I suspect that debian/50-disable-guest.conf is sufficient and that 99-disable-guest.conf was meant to be removed.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2017-05-10: |  |  | [#17](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/17) |
| --- | --- | --- | --- |

> I also did a bit of experimenting with adding "AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session" to the bottom of /lib/systemd/system/user@.service

That was my first thought, too. This can be be done like this:

1) lightdm creates the temporary guest user/id.

2) lightdm then creates /run/systemd/system/user@${GUEST\_UID}.service.d/lightdm.conf with

[Service]

AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session

so that it applies \*only\* to the guest UID.

3) lightdm calls org.freedesktop.systemd1.Manager.Reload() (i. e. systemctl daemon-reload)

4) lightdm then goes on with starting the session

5) after the session finishes, clean up the above drop-in.

I tested that with a permanent user (as I don't want to change the lightdm code for experimentation), and I now get violations like

audit: type=1400 audit(1494448667.005:30): apparmor="DENIED" operation="sendmsg" profile="/usr/lib/lightdm/lightdm-guest-session" name="/run/systemd/journal/socket" pid=3252 comm="systemd" requested\_mask="w" denied\_mask="w" fsuid=1001 ouid=0

audit: type=1400 audit(1494448667.005:34): apparmor="DENIED" operation="open" profile="/usr/lib/lightdm/lightdm-guest-session" name="/proc/sys/kernel/cap\_last\_cap" pid=3252 comm="systemd" requested\_mask="r" denied\_mask="r" fsuid=1001 ouid=0

audit: type=1400 audit(1494448667.005:35): apparmor="DENIED" operation="mkdir" profile="/usr/lib/lightdm/lightdm-guest-session" name="/sys/fs/cgroup/systemd/user.slice/user-1001.slice/user@1001.service/init.scope/" pid=3252 comm="systemd" requested\_mask="c" denied\_mask="c" fsuid=1001 ouid=1001

As Tyler mentioned, the profile needs updating for a systemd user session, as that now confines each service into its own cgroup. Some stuff like reading cap\_last\_cap (the second violation) can probably just be quiesced, and maybe it can even disallow journal access, but access to the cgroup fs for and beneath user-$ID.slice is required if you want to use a systemd session for the guest session at all. The normal ACLs should already provide sufficient isolation there.

There is an alternative for SRUs: don't use the systemd user session but the upstart one. This requires adding an upstart dependency/recommends to lightdm, and use a different session than /usr/share/xsessions/ubuntu.desktop (which runs run-systemd-session) and use an upstart-y one instead. But at least for devel I think the above approach with a drop-in for AppArmorProfile= is better.

> I also did a bit of experimenting with adding "AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session" to the bottom of /lib/systemd/system/user@.service
That was my first thought, too. This can be be done like this:
1) lightdm creates the temporary guest user/id.
2) lightdm then creates /run/systemd/system/user@${GUEST\_UID}.service.d/lightdm.conf with
[Service]
AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session
so that it applies \*only\* to the guest UID.
3) lightdm calls org.freedesktop.systemd1.Manager.Reload() (i. e. systemctl daemon-reload)
4) lightdm then goes on with starting the session
5) after the session finishes, clean up the above drop-in.
I tested that with a permanent user (as I don't want to change the lightdm code for experimentation), and I now get violations like
audit: type=1400 audit(1494448667.005:30): apparmor="DENIED" operation="sendmsg" profile="/usr/lib/lightdm/lightdm-guest-session" name="/run/systemd/journal/socket" pid=3252 comm="systemd" requested\_mask="w" denied\_mask="w" fsuid=1001 ouid=0
audit: type=1400 audit(1494448667.005:34): apparmor="DENIED" operation="open" profile="/usr/lib/lightdm/lightdm-guest-session" name="/proc/sys/kernel/cap\_last\_cap" pid=3252 comm="systemd" requested\_mask="r" denied\_mask="r" fsuid=1001 ouid=0
audit: type=1400 audit(1494448667.005:35): apparmor="DENIED" operation="mkdir" profile="/usr/lib/lightdm/lightdm-guest-session" name="/sys/fs/cgroup/systemd/user.slice/user-1001.slice/user@1001.service/init.scope/" pid=3252 comm="systemd" requested\_mask="c" denied\_mask="c" fsuid=1001 ouid=1001
As Tyler mentioned, the profile needs updating for a systemd user session, as that now confines each service into its own cgroup. Some stuff like reading cap\_last\_cap (the second violation) can probably just be quiesced, and maybe it can even disallow journal access, but access to the cgroup fs for and beneath user-$ID.slice is required if you want to use a systemd session for the guest session at all. The normal ACLs should already provide sufficient isolation there.
There is an alternative for SRUs: don't use the systemd user session but the upstart one. This requires adding an upstart dependency/recommends to lightdm, and use a different session than /usr/share/xsessions/ubuntu.desktop (which runs run-systemd-session) and use an upstart-y one instead. But at least for devel I think the above approach with a drop-in for AppArmorProfile= is better.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-05-11: |  |  | [#18](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/18) |
| --- | --- | --- | --- |

@Tyler - yes, the 99 should have been removed...

@Tyler - yes, the 99 should have been removed...

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-05-11: |  |  | [#19](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/19) |
| --- | --- | --- | --- |

* [lightdm-zesty-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4874963/%2Bfiles/lightdm-zesty-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4874963)
  (1.7 KiB,
  text/plain)

Fixed zesty debdiff

Fixed zesty debdiff

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-05-11: |  |  | [#20](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/20) |
| --- | --- | --- | --- |

This is CVE-2017-8900.

This is CVE-2017-8900.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2017-05-11: |  |  | [#21](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/21) |
| --- | --- | --- | --- |

This bug was fixed in the package lightdm - 1.19.5-0ubuntu1.2

---------------

lightdm (1.19.5-0ubuntu1.2) yakkety-security; urgency=medium

\* SECURITY UPDATE: Guest session not confined (LP: [#1663157](/bugs/1663157))

    - debian/50-disable-guest.conf:

    - debian/lightdm.install:

      - Disable guest sessions by default, this can be overridden by custom

        configuration (e.g. /etc/lightdm/lightdm.conf)

    - CVE-2017-8900

-- Robert Ancell <email address hidden> Tue, 09 May 2017 09:32:16 +1200

This bug was fixed in the package lightdm - 1.19.5-0ubuntu1.2
---------------
lightdm (1.19.5-0ubuntu1.2) yakkety-security; urgency=medium
\* SECURITY UPDATE: Guest session not confined (LP: #1663157)
- debian/50-disable-guest.conf:
- debian/lightdm.install:
- Disable guest sessions by default, this can be overridden by custom
configuration (e.g. /etc/lightdm/lightdm.conf)
- CVE-2017-8900
-- Robert Ancell <robert.ancell@canonical.com> Tue, 09 May 2017 09:32:16 +1200

| Changed in lightdm (Ubuntu Yakkety): | |
| --- | --- |
| **status**: | Triaged → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2017-05-11: |  |  | [#22](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/22) |
| --- | --- | --- | --- |

This bug was fixed in the package lightdm - 1.22.0-0ubuntu2.1

---------------

lightdm (1.22.0-0ubuntu2.1) zesty-security; urgency=medium

\* SECURITY UPDATE: Guest session not confined (LP: [#1663157](/bugs/1663157))

    - debian/50-disable-guest.conf:

    - debian/lightdm.install:

      - Disable guest sessions by default, this can be overridden by custom

        configuration (e.g. /etc/lightdm/lightdm.conf)

    - CVE-2017-8900

-- Robert Ancell <email address hidden> Tue, 09 May 2017 09:32:16 +1200

This bug was fixed in the package lightdm - 1.22.0-0ubuntu2.1
---------------
lightdm (1.22.0-0ubuntu2.1) zesty-security; urgency=medium
\* SECURITY UPDATE: Guest session not confined (LP: #1663157)
- debian/50-disable-guest.conf:
- debian/lightdm.install:
- Disable guest sessions by default, this can be overridden by custom
configuration (e.g. /etc/lightdm/lightdm.conf)
- CVE-2017-8900
-- Robert Ancell <robert.ancell@canonical.com> Tue, 09 May 2017 09:32:16 +1200

| Changed in lightdm (Ubuntu Zesty): | |
| --- | --- |
| **status**: | Triaged → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-05-11: |  |  | [#23](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/23) |
| --- | --- | --- | --- |

I'm making this bug public now that we have security updates published which disable the guest session. My hope is that we can re-enable it after the changes suggested by pitti can be investigated/implemented.

I'm making this bug public now that we have security updates published which disable the guest session. My hope is that we can re-enable it after the changes suggested by pitti can be investigated/implemented.

| **no longer affects**: | apparmor (Ubuntu Artful) |
| --- | --- |
| **no longer affects**: | apparmor (Ubuntu Zesty) |
| **no longer affects**: | apparmor (Ubuntu Yakkety) |
| Changed in apparmor (Ubuntu): | |
| **status**: | New → Invalid |
| **description**: | updated |
| **information type**: | Private Security → Public Security |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-05-11: |  |  | [#24](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/24) |
| --- | --- | --- | --- |

If you have a use case which requires the guest session, you can manually re-enable it by writing the following contents to /etc/lightdm/lightdm.conf:

# Manually enable guest sessions despite them not being confined

# IMPORTANT: Makes the system vulnerable to CVE-2017-8900

# <https://bugs.launchpad.net/bugs/1663157>

[Seat:\*]

allow-guest=true

If you have a use case which requires the guest session, you can manually re-enable it by writing the following contents to /etc/lightdm/lightdm.conf:
# Manually enable guest sessions despite them not being confined
# IMPORTANT: Makes the system vulnerable to CVE-2017-8900
# https://bugs.launchpad.net/bugs/1663157
[Seat:\*]
allow-guest=true

[Ubuntu Foundations Team Bug Bot (crichton)](https://launchpad.net/~crichton)
on 2017-05-12

| **tags**: | added: patch |
| --- | --- |

[Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks)
on 2017-05-12

| Changed in lightdm (Ubuntu Artful): | |
| --- | --- |
| **assignee**: | nobody → Robert Ancell (robert-ancell) |
| Changed in lightdm: | |
| **assignee**: | nobody → Robert Ancell (robert-ancell) |
| Changed in lightdm (Ubuntu Yakkety): | |
| **assignee**: | nobody → Tyler Hicks (tyhicks) |
| Changed in lightdm (Ubuntu Zesty): | |
| **assignee**: | nobody → Tyler Hicks (tyhicks) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steve Langasek (vorlon)](https://launchpad.net/~vorlon) wrote on 2017-05-16: |  |  | [#25](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/25) |
| --- | --- | --- | --- |

Balint, could you follow through on this bug? Martin has provided some good general guidance already about what's required to re-enable secure guest sessions in artful.

Balint, could you follow through on this bug? Martin has provided some good general guidance already about what's required to re-enable secure guest sessions in artful.

| Changed in lightdm (Ubuntu Artful): | |
| --- | --- |
| **assignee**: | Robert Ancell (robert-ancell) → Balint Reczey (rbalint) |
| **milestone**: | none → ubuntu-17.05 |

[Balint Reczey (rbalint)](https://launchpad.net/~rbalint)
on 2017-05-22

| Changed in lightdm (Ubuntu Artful): | |
| --- | --- |
| **status**: | Triaged → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2017-06-19: |  |  | [#26](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/26) |
| --- | --- | --- | --- |

This bug was fixed in the package lightdm - 1.22.0-0ubuntu4

---------------

lightdm (1.22.0-0ubuntu4) artful; urgency=medium

\* SECURITY UPDATE: Guest session not confined (LP: [#1663157](/bugs/1663157))

    - debian/50-disable-guest.conf:

    - debian/lightdm.install:

      - Disable guest sessions by default, this can be overridden by custom

        configuration (e.g. /etc/lightdm/lightdm.conf)

    - CVE-2017-8900

-- Robert Ancell <email address hidden> Mon, 19 Jun 2017 16:32:24 +1200

This bug was fixed in the package lightdm - 1.22.0-0ubuntu4
---------------
lightdm (1.22.0-0ubuntu4) artful; urgency=medium
\* SECURITY UPDATE: Guest session not confined (LP: #1663157)
- debian/50-disable-guest.conf:
- debian/lightdm.install:
- Disable guest sessions by default, this can be overridden by custom
configuration (e.g. /etc/lightdm/lightdm.conf)
- CVE-2017-8900
-- Robert Ancell <robert.ancell@canonical.com> Mon, 19 Jun 2017 16:32:24 +1200

| Changed in lightdm (Ubuntu Artful): | |
| --- | --- |
| **status**: | In Progress → Fix Released |

[Mathew Hodson (mhodson)](https://launchpad.net/~mhodson)
on 2017-06-23

| **no longer affects**: | apparmor (Ubuntu) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Magezi Sagesse (magezi)](https://launchpad.net/~magezi) wrote on 2017-11-14: |  |  | [#27](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/27) |
| --- | --- | --- | --- |

Hey guys I am a newbie to linux and I am coming from windows...I just want to have that button on my login screen or somewhere on the notification zone ...everything you have explained is hard for me to understand can you please elaborate it in steps ..so that I enable guest-session on my computer?

Hey guys I am a newbie to linux and I am coming from windows...I just want to have that button on my login screen or somewhere on the notification zone ...everything you have explained is hard for me to understand can you please elaborate it in steps ..so that I enable guest-session on my computer?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Gunnar Hjalmarsson (gunnarhj)](https://launchpad.net/~gunnarhj) wrote on 2017-11-14: |  |  | [#28](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/28) |
| --- | --- | --- | --- |

@Magezi: Please note that this is a bug report, not a support forum. This Ask Ubuntu question may help:

<https://askubuntu.com/q/915415>

@Magezi: Please note that this is a bug report, not a support forum. This Ask Ubuntu question may help:
https://askubuntu.com/q/915415

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Balint Reczey (rbalint)](https://launchpad.net/~rbalint) wrote on 2018-01-11: |  |  | [#29](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/29) |
| --- | --- | --- | --- |

Reopening, since the guest session is disabled by default but it is still not confined.

Reopening, since the guest session is disabled by default but it is still not confined.

| Changed in lightdm (Ubuntu): | |
| --- | --- |
| **status**: | Fix Released → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2018-01-12: |  |  | [#30](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/30) |
| --- | --- | --- | --- |

@rbalint can you please open a new bug to track re-enabling the guest session with proper confinement rather than piggy back on this bug?

@rbalint can you please open a new bug to track re-enabling the guest session with proper confinement rather than piggy back on this bug?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Balint Reczey (rbalint)](https://launchpad.net/~rbalint) wrote on 2018-01-12: |  |  | [#31](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/31) |
| --- | --- | --- | --- |

@tyhicks I just opened LP #1742912 for tracking the confinement fix.

@tyhicks I just opened LP #1742912 for tracking the confinement fix.

| Changed in lightdm (Ubuntu): | |
| --- | --- |
| **status**: | Triaged → Fix Released |

[Francis Ginther (fginther)](https://launchpad.net/~fginther)
on 2018-02-15

| **tags**: | added: id-5a57962350afc7d4aa391919 |
| --- | --- |

[Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell)
on 2018-03-06

| Changed in lightdm: | |
| --- | --- |
| **assignee**: | Robert Ancell (robert-ancell) → nobody |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/lightdm/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [lightdm-yakkety-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873709/%2Bfiles/lightdm-yakkety-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873709 "Change patch details")
* [lightdm-zesty-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873710/%2Bfiles/lightdm-zesty-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873710 "Change patch details")
* [lightdm-zesty-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4874963/%2Bfiles/lightdm-zesty-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4874963 "Change patch details")

* [Add patch](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Baddcomment?field.patch=on)

## Bug attachments

* [pstree-yakkety.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826102/%2Bfiles/pstree-yakkety.txt)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826102 "Change attachment details")
* [pstree-zesty.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826103/%2Bfiles/pstree-zesty.txt)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826103 "Change attachment details")

* [Add attachment](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from usn.ubuntu.com_7236a494_20250126_111110.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3285-1: LightDM vulnerability

12 May 2017

LightDM could allow unintended access to files.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 17.04](/security/notices?release=zesty)
* [Ubuntu 16.10](/security/notices?release=yakkety)

## Packages

* [lightdm](/security/cves?package=lightdm) - Display Manager

## Details

Tyler Hicks discovered that LightDM did not confine the user session for guest

users. An attacker with physical access could use this issue to access files

and other resources that they should not be able to access. In the default

installation, this includes files in the home directories of other users on the

system. This update fixes the issue by disabling the guest session. It may be

re-enabled in a future update. Please see the bug referenced below for

instructions on how to manually re-enable the guest session.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 17.04

* [lightdm](https://launchpad.net/ubuntu/%2Bsource/lightdm)
  -
  [1.22.0-0ubuntu2.1](https://launchpad.net/ubuntu/%2Bsource/lightdm/1.22.0-0ubuntu2.1)

##### Ubuntu 16.10

* [lightdm](https://launchpad.net/ubuntu/%2Bsource/lightdm)
  -
  [1.19.5-0ubuntu1.2](https://launchpad.net/ubuntu/%2Bsource/lightdm/1.19.5-0ubuntu1.2)

After a standard system update you need to reboot your computer to make

all the necessary changes.

## References

* [CVE-2017-8900](/security/CVE-2017-8900)
* <https://launchpad.net/bugs/1663157>

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from assets.ubuntu.com_9a4aab3c_20250126_111115.html ===
!�   ������l��Ж���M��=�z���`" ��mQ�G9�A�nc;�Nj�8��a�%���v���=�xT\n��Q�=��������<]7��ss���`<�]7��k����Ϻ�;t���Ǥ�զ{��c[ gy��H�b���6��d��f~ݴ��u��$�\_t/p�zݍ���I����9��yI�$T�+<R-Q�sR,Y�ap�^��I!��������#��W�D���ZIa-�&d���Ţ�$��k�Z�φ��MJR,┩�#��,IP���`B� cN��=�WSO���n�U��\*GQ`t�Ȯ��#a�>�����l6fx�а0��R���\���$�Hd ]��K���M���7=

=== Content from www.ubuntu.com_aa6cc334_20250125_185359.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3285-1: LightDM vulnerability

12 May 2017

LightDM could allow unintended access to files.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 17.04](/security/notices?release=zesty)
* [Ubuntu 16.10](/security/notices?release=yakkety)

## Packages

* [lightdm](/security/cves?package=lightdm) - Display Manager

## Details

Tyler Hicks discovered that LightDM did not confine the user session for guest

users. An attacker with physical access could use this issue to access files

and other resources that they should not be able to access. In the default

installation, this includes files in the home directories of other users on the

system. This update fixes the issue by disabling the guest session. It may be

re-enabled in a future update. Please see the bug referenced below for

instructions on how to manually re-enable the guest session.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 17.04

* [lightdm](https://launchpad.net/ubuntu/%2Bsource/lightdm)
  -
  [1.22.0-0ubuntu2.1](https://launchpad.net/ubuntu/%2Bsource/lightdm/1.22.0-0ubuntu2.1)

##### Ubuntu 16.10

* [lightdm](https://launchpad.net/ubuntu/%2Bsource/lightdm)
  -
  [1.19.5-0ubuntu1.2](https://launchpad.net/ubuntu/%2Bsource/lightdm/1.19.5-0ubuntu1.2)

After a standard system update you need to reboot your computer to make

all the necessary changes.

## References

* [CVE-2017-8900](/security/CVE-2017-8900)
* <https://launchpad.net/bugs/1663157>

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from security-tracker.debian.org_8ae0c130_20250126_111059.html ===

# CVE-2017-8900

| **Name** | CVE-2017-8900 |
| --- | --- |
| **Description** | LightDM through 1.22.0, when systemd is used in Ubuntu 16.10 and 17.x, allows physically proximate attackers to bypass intended AppArmor restrictions and visit the home directories of arbitrary users by establishing a guest session. |
| **Source** | [CVE](https://www.cve.org/CVERecord?id=CVE-2017-8900) (at [NVD](https://nvd.nist.gov/vuln/detail/CVE-2017-8900); [CERT](https://www.kb.cert.org/vuls/byid?searchview=&query=CVE-2017-8900), [LWN](https://lwn.net/Search/DoSearch?words=CVE-2017-8900), [oss-sec](https://marc.info/?l=oss-security&s=CVE-2017-8900), [fulldisc](https://marc.info/?l=full-disclosure&s=CVE-2017-8900), [Red Hat](https://bugzilla.redhat.com/show_bug.cgi?id=CVE-2017-8900), [Ubuntu](https://people.canonical.com/~ubuntu-security/cve/CVE-2017-8900), [Gentoo](https://bugs.gentoo.org/show_bug.cgi?id=CVE-2017-8900), SUSE [bugzilla](https://bugzilla.suse.com/show_bug.cgi?id=CVE-2017-8900)/[CVE](https://www.suse.com/security/cve/CVE-2017-8900/), GitHub [advisories](https://github.com/advisories?query=CVE-2017-8900)/[code](https://github.com/search?type=Code&q=%22CVE-2017-8900%22)/[issues](https://github.com/search?type=Issues&q=%22CVE-2017-8900%22), [web search](https://duckduckgo.com/html?q=%22CVE-2017-8900%22), [more](https://oss-security.openwall.org/wiki/vendors)) |

## Vulnerable and fixed packages

The table below lists information on source packages.

| Source Package | Release | Version | Status |
| --- | --- | --- | --- |
| [lightdm](/tracker/source-package/lightdm) ([PTS](https://tracker.debian.org/pkg/lightdm)) | bullseye | 1.26.0-7 | fixed |
|  | bookworm | 1.26.0-8 | fixed |
|  | sid, trixie | 1.32.0-6 | fixed |

The information below is based on the following data on fixed versions.

| Package | Type | Release | Fixed Version | Urgency | Origin | Debian Bugs |
| --- | --- | --- | --- | --- | --- | --- |
| [lightdm](/tracker/source-package/lightdm) | source | (unstable) | (not affected) |  |  |  |

## Notes

```
- lightdm <not-affected> (No guest account support in Debian, cf. #661230)

```

---

Search for package or bug name:  [Reporting problems](/tracker/data/report)

[Home](/tracker/) - [Debian Security](https://www.debian.org/security/) - [Source](https://salsa.debian.org/security-tracker-team/security-tracker/blob/master/bin/tracker_service.py) [(Git)](https://salsa.debian.org/security-tracker-team/security-tracker)



=== Content from launchpad.net_176c806f_20250126_111057.html ===

[Log in / Register](https://launchpad.net/~tyhicks/%2Blogin)

[![](https://launchpadlibrarian.net/83129119/tyhicks-small.png)](https://launchpad.net/~tyhicks)

## [Tyler Hicks](https://launchpad.net/~tyhicks)

* Overview
* [Code](https://code.launchpad.net/~tyhicks)
* [Bugs](https://bugs.launchpad.net/~tyhicks)
* [Blueprints](https://blueprints.launchpad.net/~tyhicks)
* [Translations](https://translations.launchpad.net/~tyhicks)
* [Answers](https://answers.launchpad.net/~tyhicks)

* [Related packages](https://launchpad.net/~tyhicks/%2Brelated-packages)
* [Related projects](https://launchpad.net/~tyhicks/%2Brelated-projects)

## User information

Launchpad Id:
tyhicks

Email:
[Log in](%2Blogin) for email information.

Member since:
2008-10-03

[![Icon of AppArmor Developers](https://launchpadlibrarian.net/65472736/toxie-14.png "Member of AppArmor Developers")](/~apparmor-dev)
[![Icon of Bluetooth](https://launchpadlibrarian.net/4683649/stock_bluetooth.png "Member of Bluetooth")](/~bluetooth)
[![Icon of eCryptfs](https://launchpadlibrarian.net/88108046/ecryptfs_14.png "Member of eCryptfs")](/~ecryptfs)
[![Icon of Edubuntu Developers](https://launchpadlibrarian.net/71879383/edubuntu-logo-only_14.png "Member of Edubuntu Developers")](/~edubuntu-dev)
[![Icon of GNOME3 Team](https://launchpadlibrarian.net/235731434/roundel14.png "Member of GNOME3 Team")](/~gnome3-team)
[![Icon of Indicator Applet Developers](https://launchpadlibrarian.net/22816053/add-notification-applet.14.png "Member of Indicator Applet Developers")](/~indicator-applet-developers)
[![Icon of Kubuntu Ninjas - Yellow belts](https://launchpadlibrarian.net/192173133/belt2-yellow3.png "Member of Kubuntu Ninjas - Yellow belts")](/~kubuntu-ninjas-yellow-belts)
[![Icon of Kubuntu Ninjas](https://launchpadlibrarian.net/31496145/icon.png "Member of Kubuntu Ninjas")](/~kubuntu-ninjas)
[![Icon of Kubuntu Package Archives](https://launchpadlibrarian.net/44411915/deb-small.png "Member of Kubuntu Package Archives")](/~kubuntu-ppa)
[![Icon of Lubuntu Code](https://launchpadlibrarian.net/704307155/lennyborg_14.png "Member of Lubuntu Code")](/~lubuntu-code)
[![Icon of Lubuntu Continuous Integration](https://launchpadlibrarian.net/704307325/lennyborg_14.png "Member of Lubuntu Continuous Integration")](/~lubuntu-ci)
[![Icon of Lubuntu Developers](https://launchpadlibrarian.net/704306355/lennyborg_14.png "Member of Lubuntu Developers")](/~lubuntu-dev)
[![Icon of Lubuntu Packages Team](https://launchpadlibrarian.net/704305879/lenny_bug_14.png "Member of Lubuntu Packages Team")](/~lubuntu-packaging)
[![Icon of Lubuntu](https://launchpadlibrarian.net/357050187/14.png "Member of Lubuntu")](/~lubuntu-desktop)
[![Icon of MOTU](https://launchpadlibrarian.net/1516491/motu-image-2.png "Member of MOTU")](/~motu)
[![Icon of Network-manager](https://launchpadlibrarian.net/11610188/nm-team.png "Member of Network-manager")](/~network-manager)
[![Icon of Super Friends](https://launchpadlibrarian.net/134634591/superman14.png "Member of Super Friends")](/~super-friends)
[![Icon of Ubuntu Bug Control](https://launchpadlibrarian.net/4423778/qa-icon.png "Member of Ubuntu Bug Control")](/~ubuntu-bugcontrol)
[![Icon of Ubuntu Contributing Developers](https://launchpadlibrarian.net/17290192/wrench_emblem-trans.png "Member of Ubuntu Contributing Developers")](/~ubuntu-developer-members)
[![Icon of Ubuntu Core Development Team](https://launchpadlibrarian.net/1072365/main.png "Member of Ubuntu Core Development Team")](/~ubuntu-core-dev)
[![Icon of Ubuntu Development Team](https://launchpadlibrarian.net/1072363/motu.png "Member of Ubuntu Development Team")](/~ubuntu-dev)
[![Icon of Ubuntu Documentation Project Team](https://launchpadlibrarian.net/162165522/ubuntu-doc.png "Member of Ubuntu Documentation Project Team")](/~ubuntu-doc)
[![Icon of Ubuntu GNOME Developers](https://launchpadlibrarian.net/254356645/roundel14.png "Member of Ubuntu GNOME Developers")](/~ubuntu-gnome-dev)
[![Icon of Ubuntu GNOME](https://launchpadlibrarian.net/258611022/ubuntu-gnome_14.png "Member of Ubuntu GNOME")](/~ubuntu-gnome)
[![Icon of Ubuntu Kylin Members](https://launchpadlibrarian.net/444398797/623185830.jpg "Member of Ubuntu Kylin Members")](/~ubuntukylin-members)
[![Icon of Ubuntu MATE Developers](https://launchpadlibrarian.net/212349832/icon.png "Member of Ubuntu MATE Developers")](/~ubuntu-mate-dev)
[![Icon of Ubuntu Members](https://launchpadlibrarian.net/606495581/CoF%2014px.png "Member of Ubuntu Members")](/~ubuntumembers)
[![Icon of Ubuntu Studio Development](https://launchpadlibrarian.net/479050820/14.png "Member of Ubuntu Studio Development")](/~ubuntustudio-dev)
[![Icon of Xubuntu Artwork](https://launchpadlibrarian.net/341831649/icon_optimized_14.png "Member of Xubuntu Artwork")](/~xubuntu-art)
[![Icon of Xubuntu Developers](https://launchpadlibrarian.net/139019912/x-dev.png "Member of Xubuntu Developers")](/~xubuntu-dev)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English

OpenPGP keys:

CE1D6FE48F85F246C77C3516AD3F818B34FA35B7

SSH keys:

[tyhicks@elm - Canonical](%2Bsshkeys)

[tyhicks@sec - Canonical](%2Bsshkeys)

[tyhicks@boyd - Canonical](%2Bsshkeys)

Time zone:

America/Chicago
(UTC-0600)

Karma:
[0](https://launchpad.net/~tyhicks/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**tyhicks**
 on
**irc.oftc.net**

![IRC](/@@/social-irc "IRC")
**tyhicks**
 on
**irc.libera.chat**

## [All bugs in progress](https://launchpad.net/~tyhicks/%2Bassignedbugs?search=Search&field.status=In+Progress) Assigned bugs

||  | #1379536 [Coarse-grained kernel keyring mediation](https://bugs.launchpad.net/apparmor/%2Bbug/1379536) |  |
| --- | --- | --- |
| in [AppArmor](/apparmor), [Ubuntu](/ubuntu) | | |

| --- | --- | --- | --- | --- | --- |
||  | #842647 [[git] file blocks duplicated at the end of the file](https://bugs.launchpad.net/ecryptfs/%2Bbug/842647) |  |
| --- | --- | --- |
| in [eCryptfs](/ecryptfs), [Ubuntu](/ubuntu) | | |

||  | #1501913 [Apparmor Abstraction Prevents Firefox From Opening Torrents in Deluge-Gtk](https://bugs.launchpad.net/apparmor/%2Bbug/1501913) |  |
| --- | --- | --- |
| in [AppArmor](/apparmor), [Ubuntu](/ubuntu) | | |

||  | #1439849 [BUG: unable to handle kernel NULL pointer dereference at 0000000000000010](https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/1439849) |  |
| --- | --- | --- |
| in [Ubuntu](/ubuntu) | | |

## [All assigned blueprints](/~tyhicks/%2Bspecs?role=assignee) Assigned blueprints

| **[User data encryption requirements and work for 14.04](https://blueprints.launchpad.net/ubuntu/%2Bspec/client-1311-user-data-encryption "client-1311-user-data-encryption")** for **Ubuntu**  Ubuntu Desktop currently offer both encrypted disk and encrypted home as part of the install. Ubuntu Touch should also offer a user data encryption option for its users. | |
| --- | --- |
| **[Application Confinement (Online Accounts)](https://blueprints.launchpad.net/ubuntu/%2Bspec/security-r-app-online-accounts "security-r-app-online-accounts")** for **Ubuntu**  Acceptance criteria for July: Goal: Developers can integrate AppArmor into online accounts Acceptance criteria for August: Goal: Users receive a contextual runtime prompt when an app uses online accounts | |
| **[eCryptfs status and future](https://blueprints.launchpad.net/ubuntu/%2Bspec/security-p-ecryptfs "security-p-ecryptfs")** for **Ubuntu**  This session is about discussing the current status and issues with eCryptfs, and making a decision what needs to be done in order for it to be an appropriate install-time option in the LTS release. | |

## Personal package archives

| [AppArmor-mediated DBus prototype](/~tyhicks/%2Barchive/ubuntu/aadbus) |
| --- |
| [PPA named ecryptfs-utils-daily for Tyler Hicks](/~tyhicks/%2Barchive/ubuntu/ecryptfs-utils-daily) |
| [Testing PPA](/~tyhicks/%2Barchive/ubuntu/testing) |

* [View snap packages](https://launchpad.net/~tyhicks/%2Bsnaps)

## [All memberships](https://launchpad.net/~tyhicks/%2Bparticipation) Latest memberships

| [Ubuntu cloaked people on Libera](/~ubuntu-irc-cloaks)  Joined on 2021-05-24 | |
| --- | --- |
| [Ubuntu SSO 2-factor testers](/~sso-2f-testers)  Joined on 2020-02-20 | |
| [Ubuntu Core Development Team](/~ubuntu-core-dev)  Joined on 2016-02-29 | |
| [AppArmor Developers](/~apparmor-dev)  Joined on 2012-11-07 | |
| [eCryptfs](/~ecryptfs)  Joined on 2008-11-11 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_65146586_20250126_111054.html ===

[Log in / Register](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[lightdm package](https://launchpad.net/ubuntu/%2Bsource/lightdm)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/lightdm)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/lightdm)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/lightdm)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/lightdm)

# Guest session processes are not confined in 16.10 and newer releases

Bug #1663157 reported by
[Tyler Hicks](https://launchpad.net/~tyhicks)
on 2017-02-09

[352](/%2Bhelp-bugs/bug-heat.html)

This bug affects 15 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [Light Display Manager](https://bugs.launchpad.net/lightdm) | New | Undecided | Unassigned |  |
|  | [lightdm (Ubuntu)](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm "Latest release: 1.32.0-6ubuntu2, uploaded to universe on 2025-01-07 18:26:10.774357+00:00 by Simon Quigley (tsimonq2), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)") | Fix Released | High | [Balint Reczey](https://launchpad.net/~rbalint) | [Ubuntu ubuntu-17.05](https://launchpad.net/ubuntu/%2Bmilestone/ubuntu-17.05) |
|  | [Yakkety](https://bugs.launchpad.net/ubuntu/yakkety/%2Bsource/lightdm) | Fix Released | High | [Tyler Hicks](https://launchpad.net/~tyhicks) |  |
|  | [Zesty](https://bugs.launchpad.net/ubuntu/zesty/%2Bsource/lightdm) | Fix Released | High | [Tyler Hicks](https://launchpad.net/~tyhicks) |  |
|  | [Artful](https://bugs.launchpad.net/ubuntu/artful/%2Bsource/lightdm) | Fix Released | High | [Balint Reczey](https://launchpad.net/~rbalint) | [Ubuntu ubuntu-17.05](https://launchpad.net/ubuntu/%2Bmilestone/ubuntu-17.05) |

### Bug Description

Processes launched under a lightdm guest session are not confined by the /usr/lib/lightdm/lightdm-guest-session AppArmor profile in Ubuntu 16.10, Ubuntu 17.04, and Ubuntu Artful (current dev release). The processes are unconfined.

The simple test case is to log into a guest session, launch a terminal with ctrl-alt-t, and run the following command:

$ cat /proc/self/attr/current

Expected output, as seen in Ubuntu 16.04 LTS, is:

/usr/lib/lightdm/lightdm-guest-session (enforce)

Running the command inside of an Ubuntu 16.10 and newer guest session results in:

unconfined

See [original description](comments/0)

Tags:

[patch](/ubuntu/%2Bsource/lightdm/%2Bbugs?field.tag=patch)
[id-5a57962350afc7d4aa391919](/ubuntu/%2Bsource/lightdm/%2Bbugs?field.tag=id-5a57962350afc7d4aa391919)

## Related branches

[lp:lightdm/1.20](https://code.launchpad.net/~lightdm-team/lightdm/1.20)

[lp:lightdm/1.22](https://code.launchpad.net/~lightdm-team/lightdm/1.22)

[lp:lightdm](https://code.launchpad.net/~lightdm-team/lightdm/trunk)

## CVE References

* [2017-8900](/bugs/cve/2017-8900 "LightDM through 1.22.0, when systemd ...")

[Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks)
on 2017-02-09

| Changed in apparmor (Ubuntu): | |
| --- | --- |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-02-24: |  |  | [#1](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/1) |
| --- | --- | --- | --- |

After coming back to this bug, I noticed that Robert was not subscribed and couldn't see the bug. He's now subscribed.

After coming back to this bug, I noticed that Robert was not subscribed and couldn't see the bug. He's now subscribed.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-02-24: |  |  | [#2](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/2) |
| --- | --- | --- | --- |

* [pstree-yakkety.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826102/%2Bfiles/pstree-yakkety.txt)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826102)
  (4.9 KiB,
  text/plain)

The pstree output helps shed some light on this bug. It looks like the portions of the guest session that are spawned upstart are properly confined. The portions spawned by systemd are not confined. I'm attaching the `pstree -Z guest-XXXXXX` output from a running yakkety guest session.

The pstree output helps shed some light on this bug. It looks like the portions of the guest session that are spawned upstart are properly confined. The portions spawned by systemd are not confined. I'm attaching the `pstree -Z guest-XXXXXX` output from a running yakkety guest session.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-02-24: |  |  | [#3](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/3) |
| --- | --- | --- | --- |

* [pstree-zesty.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826103/%2Bfiles/pstree-zesty.txt)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826103)
  (4.0 KiB,
  text/plain)

Here's the pstree output for a zesty system. It looks like more things have been moved over to systemd's control and, therefore, more things are unconfined.

Here's the pstree output for a zesty system. It looks like more things have been moved over to systemd's control and, therefore, more things are unconfined.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-02-24: |  |  | [#4](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/4) |
| --- | --- | --- | --- |

I should mention that the above pstree outputs require some changes to the pstree code to get the AppArmor label included in the output when the -Z option is specified. I've pushed a work-in-progress quality git branch of psmisc to [https://code.launchpad.net/~tyhicks/psmisc/+git/psmisc/+ref/apparmor](https://code.launchpad.net/~tyhicks/psmisc/%2Bgit/psmisc/%2Bref/apparmor) that includes the necessary changes.

I should mention that the above pstree outputs require some changes to the pstree code to get the AppArmor label included in the output when the -Z option is specified. I've pushed a work-in-progress quality git branch of psmisc to https://code.launchpad.net/~tyhicks/psmisc/+git/psmisc/+ref/apparmor that includes the necessary changes.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-03-22: |  |  | [#5](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/5) |
| --- | --- | --- | --- |

Ow. Unfortunately I don't have any information on how to fix this since most of the work on guest sessions and systemd was done by Martin Pitt.

Ow. Unfortunately I don't have any information on how to fix this since most of the work on guest sessions and systemd was done by Martin Pitt.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-04-04: |  |  | [#6](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/6) |
| --- | --- | --- | --- |

@pitti - I know you don't have any responsibility here but wondering if you have any advice on what direction to solve this?

@pitti - I know you don't have any responsibility here but wondering if you have any advice on what direction to solve this?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [John Johansen (jjohansen)](https://launchpad.net/~jjohansen) wrote on 2017-04-05: |  |  | [#7](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/7) |
| --- | --- | --- | --- |

The proper way to do this would be to use pam\_apparmor, similar to how selinux is doing this, through systemd --user

  /etc/pam.d/systemd-user

However currently this would require updating to a new version of pam\_apparmor OR confining systemd to define hats and potentially other setup, which is probably something we are not ready to do just yet.

The proper way to do this would be to use pam\_apparmor, similar to how selinux is doing this, through systemd --user
/etc/pam.d/systemd-user
However currently this would require updating to a new version of pam\_apparmor OR confining systemd to define hats and potentially other setup, which is probably something we are not ready to do just yet.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [John Johansen (jjohansen)](https://launchpad.net/~jjohansen) wrote on 2017-04-05: |  |  | [#8](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/8) |
| --- | --- | --- | --- |

Note: ideally we want to set things up to use a policy namespace stack so that snaps can work from the guest session.

Note: ideally we want to set things up to use a policy namespace stack so that snaps can work from the guest session.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-04-05: |  |  | [#9](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/9) |
| --- | --- | --- | --- |

I spent some time looking into pam\_apparmor and understanding how could be used. It seems like it would be extremely risky to introduce in a security update and I'm not sure if it even supports everything that would be needed. IIUC, it requires us to confine all login applications that use PAM and it isn't clear if we can selectively confine only the guest users and leave all other users unconfined. At this point, I'm not comfortable/confident in pam\_apparmor as a solution in stable release.

I also did a bit of experimenting with adding "AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session" to the bottom of /lib/systemd/system/user@.service and logging in via a guest session in LightDM. After some scary lightdm-guest-session profile updates, I was able to log in to the guest session. The scary permissions are required because `systemd --user` is being confined by the lightdm-guest-session profile so rules are needed to allow all of the session setup stuff that it does. That's not promising because then all of those permissions will be granted to the guest session itself. I don't see a way to get `systemd --user` to transition to another profile when launching processes inside of the session but I could be missing something.

Modifying the user@.service file also isn't ideal because I don't see a way to only apply the AppArmor profile to guest user sessions while leaving regular user sessions unconfined.

I don't see a good solution to this problem.

I spent some time looking into pam\_apparmor and understanding how could be used. It seems like it would be extremely risky to introduce in a security update and I'm not sure if it even supports everything that would be needed. IIUC, it requires us to confine all login applications that use PAM and it isn't clear if we can selectively confine only the guest users and leave all other users unconfined. At this point, I'm not comfortable/confident in pam\_apparmor as a solution in stable release.
I also did a bit of experimenting with adding "AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session" to the bottom of /lib/systemd/system/user@.service and logging in via a guest session in LightDM. After some scary lightdm-guest-session profile updates, I was able to log in to the guest session. The scary permissions are required because `systemd --user` is being confined by the lightdm-guest-session profile so rules are needed to allow all of the session setup stuff that it does. That's not promising because then all of those permissions will be granted to the guest session itself. I don't see a way to get `systemd --user` to transition to another profile when launching processes inside of the session but I could be missing something.
Modifying the user@.service file also isn't ideal because I don't see a way to only apply the AppArmor profile to guest user sessions while leaving regular user sessions unconfined.
I don't see a good solution to this problem.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [John Johansen (jjohansen)](https://launchpad.net/~jjohansen) wrote on 2017-04-06: |  |  | [#10](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/10) |
| --- | --- | --- | --- |

@tyhicks you are correct that pam\_apparmor is NOT a good solution currently. I will restate, it requires either

- a new version of pam\_apparmor

or

- confining systemd and setting up hats for the guest session user (which currently means the user name can not have randomization).

pam\_apparmor does NOT require we confine all pam applications, just those that are using it.

A minimal patch to better support guest sessions in pam\_apparmor (using change\_onexec instead of change\_hat) could be done (again basically a new version of pam\_apparmor), and might be the best solution. Or if you want I guess we could look at landing full support but that is larger and would involve the parser, etc.

@tyhicks you are correct that pam\_apparmor is NOT a good solution currently. I will restate, it requires either
- a new version of pam\_apparmor
or
- confining systemd and setting up hats for the guest session user (which currently means the user name can not have randomization).
pam\_apparmor does NOT require we confine all pam applications, just those that are using it.
A minimal patch to better support guest sessions in pam\_apparmor (using change\_onexec instead of change\_hat) could be done (again basically a new version of pam\_apparmor), and might be the best solution. Or if you want I guess we could look at landing full support but that is larger and would involve the parser, etc.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Marc Deslauriers (mdeslaur)](https://launchpad.net/~mdeslaur) wrote on 2017-05-05: |  |  | [#11](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/11) |
| --- | --- | --- | --- |

We need to either find a solution to this issue, or push an update to disable guest sessions.

We need to either find a solution to this issue, or push an update to disable guest sessions.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Will Cooke (willcooke)](https://launchpad.net/~willcooke) wrote on 2017-05-08: |  |  | [#12](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/12) |
| --- | --- | --- | --- |

FWIW - Desktop are fine with disabling the guest session while we work out the systemd stuff.

FWIW - Desktop are fine with disabling the guest session while we work out the systemd stuff.

[Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell)
on 2017-05-08

| Changed in lightdm (Ubuntu Zesty): | |
| --- | --- |
| **importance**: | Undecided → High |
| Changed in lightdm (Ubuntu Yakkety): | |
| **importance**: | Undecided → High |
| Changed in lightdm (Ubuntu Artful): | |
| **status**: | New → Triaged |
| Changed in lightdm (Ubuntu Zesty): | |
| **status**: | New → Triaged |
| Changed in lightdm (Ubuntu Yakkety): | |
| **status**: | New → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-05-08: |  |  | [#13](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/13) |
| --- | --- | --- | --- |

* [lightdm-yakkety-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873709/%2Bfiles/lightdm-yakkety-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873709)
  (1.7 KiB,
  text/plain)

Patch to Yakkety that disables guest support by default.

Patch to Yakkety that disables guest support by default.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-05-08: |  |  | [#14](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/14) |
| --- | --- | --- | --- |

* [lightdm-zesty-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873710/%2Bfiles/lightdm-zesty-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873710)
  (2.1 KiB,
  text/plain)

Patch to Zesty that disables guest support by default.

Patch to Zesty that disables guest support by default.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-05-08: |  |  | [#15](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/15) |
| --- | --- | --- | --- |

These patches ship LightDM with guest support disabled by default. You can re-enable it by putting a config file with higher priority containing:

[Seat:\*]

allow-guest=true

e.g. put this in:

/etc/lightdm/lightdm.conf (if editing manually)

/etc/lightdm/lightdm.conf.d/enable-guest.conf (if managing with snippets)

/usr/share/lightdm/lightdm.conf.d/99-enable-guest.conf (if shipping in a package)

These patches ship LightDM with guest support disabled by default. You can re-enable it by putting a config file with higher priority containing:
[Seat:\*]
allow-guest=true
e.g. put this in:
/etc/lightdm/lightdm.conf (if editing manually)
/etc/lightdm/lightdm.conf.d/enable-guest.conf (if managing with snippets)
/usr/share/lightdm/lightdm.conf.d/99-enable-guest.conf (if shipping in a package)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-05-10: |  |  | [#16](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/16) |
| --- | --- | --- | --- |

@robert-ancell thanks for the debdiffs! Is the addition of debian/99-disable-guest.conf intentional in the zesty debdiff? I suspect that debian/50-disable-guest.conf is sufficient and that 99-disable-guest.conf was meant to be removed.

@robert-ancell thanks for the debdiffs! Is the addition of debian/99-disable-guest.conf intentional in the zesty debdiff? I suspect that debian/50-disable-guest.conf is sufficient and that 99-disable-guest.conf was meant to be removed.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Martin Pitt (pitti)](https://launchpad.net/~pitti) wrote on 2017-05-10: |  |  | [#17](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/17) |
| --- | --- | --- | --- |

> I also did a bit of experimenting with adding "AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session" to the bottom of /lib/systemd/system/user@.service

That was my first thought, too. This can be be done like this:

1) lightdm creates the temporary guest user/id.

2) lightdm then creates /run/systemd/system/user@${GUEST\_UID}.service.d/lightdm.conf with

[Service]

AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session

so that it applies \*only\* to the guest UID.

3) lightdm calls org.freedesktop.systemd1.Manager.Reload() (i. e. systemctl daemon-reload)

4) lightdm then goes on with starting the session

5) after the session finishes, clean up the above drop-in.

I tested that with a permanent user (as I don't want to change the lightdm code for experimentation), and I now get violations like

audit: type=1400 audit(1494448667.005:30): apparmor="DENIED" operation="sendmsg" profile="/usr/lib/lightdm/lightdm-guest-session" name="/run/systemd/journal/socket" pid=3252 comm="systemd" requested\_mask="w" denied\_mask="w" fsuid=1001 ouid=0

audit: type=1400 audit(1494448667.005:34): apparmor="DENIED" operation="open" profile="/usr/lib/lightdm/lightdm-guest-session" name="/proc/sys/kernel/cap\_last\_cap" pid=3252 comm="systemd" requested\_mask="r" denied\_mask="r" fsuid=1001 ouid=0

audit: type=1400 audit(1494448667.005:35): apparmor="DENIED" operation="mkdir" profile="/usr/lib/lightdm/lightdm-guest-session" name="/sys/fs/cgroup/systemd/user.slice/user-1001.slice/user@1001.service/init.scope/" pid=3252 comm="systemd" requested\_mask="c" denied\_mask="c" fsuid=1001 ouid=1001

As Tyler mentioned, the profile needs updating for a systemd user session, as that now confines each service into its own cgroup. Some stuff like reading cap\_last\_cap (the second violation) can probably just be quiesced, and maybe it can even disallow journal access, but access to the cgroup fs for and beneath user-$ID.slice is required if you want to use a systemd session for the guest session at all. The normal ACLs should already provide sufficient isolation there.

There is an alternative for SRUs: don't use the systemd user session but the upstart one. This requires adding an upstart dependency/recommends to lightdm, and use a different session than /usr/share/xsessions/ubuntu.desktop (which runs run-systemd-session) and use an upstart-y one instead. But at least for devel I think the above approach with a drop-in for AppArmorProfile= is better.

> I also did a bit of experimenting with adding "AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session" to the bottom of /lib/systemd/system/user@.service
That was my first thought, too. This can be be done like this:
1) lightdm creates the temporary guest user/id.
2) lightdm then creates /run/systemd/system/user@${GUEST\_UID}.service.d/lightdm.conf with
[Service]
AppArmorProfile=/usr/lib/lightdm/lightdm-guest-session
so that it applies \*only\* to the guest UID.
3) lightdm calls org.freedesktop.systemd1.Manager.Reload() (i. e. systemctl daemon-reload)
4) lightdm then goes on with starting the session
5) after the session finishes, clean up the above drop-in.
I tested that with a permanent user (as I don't want to change the lightdm code for experimentation), and I now get violations like
audit: type=1400 audit(1494448667.005:30): apparmor="DENIED" operation="sendmsg" profile="/usr/lib/lightdm/lightdm-guest-session" name="/run/systemd/journal/socket" pid=3252 comm="systemd" requested\_mask="w" denied\_mask="w" fsuid=1001 ouid=0
audit: type=1400 audit(1494448667.005:34): apparmor="DENIED" operation="open" profile="/usr/lib/lightdm/lightdm-guest-session" name="/proc/sys/kernel/cap\_last\_cap" pid=3252 comm="systemd" requested\_mask="r" denied\_mask="r" fsuid=1001 ouid=0
audit: type=1400 audit(1494448667.005:35): apparmor="DENIED" operation="mkdir" profile="/usr/lib/lightdm/lightdm-guest-session" name="/sys/fs/cgroup/systemd/user.slice/user-1001.slice/user@1001.service/init.scope/" pid=3252 comm="systemd" requested\_mask="c" denied\_mask="c" fsuid=1001 ouid=1001
As Tyler mentioned, the profile needs updating for a systemd user session, as that now confines each service into its own cgroup. Some stuff like reading cap\_last\_cap (the second violation) can probably just be quiesced, and maybe it can even disallow journal access, but access to the cgroup fs for and beneath user-$ID.slice is required if you want to use a systemd session for the guest session at all. The normal ACLs should already provide sufficient isolation there.
There is an alternative for SRUs: don't use the systemd user session but the upstart one. This requires adding an upstart dependency/recommends to lightdm, and use a different session than /usr/share/xsessions/ubuntu.desktop (which runs run-systemd-session) and use an upstart-y one instead. But at least for devel I think the above approach with a drop-in for AppArmorProfile= is better.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-05-11: |  |  | [#18](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/18) |
| --- | --- | --- | --- |

@Tyler - yes, the 99 should have been removed...

@Tyler - yes, the 99 should have been removed...

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell) wrote on 2017-05-11: |  |  | [#19](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/19) |
| --- | --- | --- | --- |

* [lightdm-zesty-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4874963/%2Bfiles/lightdm-zesty-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4874963)
  (1.7 KiB,
  text/plain)

Fixed zesty debdiff

Fixed zesty debdiff

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-05-11: |  |  | [#20](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/20) |
| --- | --- | --- | --- |

This is CVE-2017-8900.

This is CVE-2017-8900.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2017-05-11: |  |  | [#21](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/21) |
| --- | --- | --- | --- |

This bug was fixed in the package lightdm - 1.19.5-0ubuntu1.2

---------------

lightdm (1.19.5-0ubuntu1.2) yakkety-security; urgency=medium

\* SECURITY UPDATE: Guest session not confined (LP: [#1663157](/bugs/1663157))

    - debian/50-disable-guest.conf:

    - debian/lightdm.install:

      - Disable guest sessions by default, this can be overridden by custom

        configuration (e.g. /etc/lightdm/lightdm.conf)

    - CVE-2017-8900

-- Robert Ancell <email address hidden> Tue, 09 May 2017 09:32:16 +1200

This bug was fixed in the package lightdm - 1.19.5-0ubuntu1.2
---------------
lightdm (1.19.5-0ubuntu1.2) yakkety-security; urgency=medium
\* SECURITY UPDATE: Guest session not confined (LP: #1663157)
- debian/50-disable-guest.conf:
- debian/lightdm.install:
- Disable guest sessions by default, this can be overridden by custom
configuration (e.g. /etc/lightdm/lightdm.conf)
- CVE-2017-8900
-- Robert Ancell <robert.ancell@canonical.com> Tue, 09 May 2017 09:32:16 +1200

| Changed in lightdm (Ubuntu Yakkety): | |
| --- | --- |
| **status**: | Triaged → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2017-05-11: |  |  | [#22](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/22) |
| --- | --- | --- | --- |

This bug was fixed in the package lightdm - 1.22.0-0ubuntu2.1

---------------

lightdm (1.22.0-0ubuntu2.1) zesty-security; urgency=medium

\* SECURITY UPDATE: Guest session not confined (LP: [#1663157](/bugs/1663157))

    - debian/50-disable-guest.conf:

    - debian/lightdm.install:

      - Disable guest sessions by default, this can be overridden by custom

        configuration (e.g. /etc/lightdm/lightdm.conf)

    - CVE-2017-8900

-- Robert Ancell <email address hidden> Tue, 09 May 2017 09:32:16 +1200

This bug was fixed in the package lightdm - 1.22.0-0ubuntu2.1
---------------
lightdm (1.22.0-0ubuntu2.1) zesty-security; urgency=medium
\* SECURITY UPDATE: Guest session not confined (LP: #1663157)
- debian/50-disable-guest.conf:
- debian/lightdm.install:
- Disable guest sessions by default, this can be overridden by custom
configuration (e.g. /etc/lightdm/lightdm.conf)
- CVE-2017-8900
-- Robert Ancell <robert.ancell@canonical.com> Tue, 09 May 2017 09:32:16 +1200

| Changed in lightdm (Ubuntu Zesty): | |
| --- | --- |
| **status**: | Triaged → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-05-11: |  |  | [#23](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/23) |
| --- | --- | --- | --- |

I'm making this bug public now that we have security updates published which disable the guest session. My hope is that we can re-enable it after the changes suggested by pitti can be investigated/implemented.

I'm making this bug public now that we have security updates published which disable the guest session. My hope is that we can re-enable it after the changes suggested by pitti can be investigated/implemented.

| **no longer affects**: | apparmor (Ubuntu Artful) |
| --- | --- |
| **no longer affects**: | apparmor (Ubuntu Zesty) |
| **no longer affects**: | apparmor (Ubuntu Yakkety) |
| Changed in apparmor (Ubuntu): | |
| **status**: | New → Invalid |
| **description**: | updated |
| **information type**: | Private Security → Public Security |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2017-05-11: |  |  | [#24](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/24) |
| --- | --- | --- | --- |

If you have a use case which requires the guest session, you can manually re-enable it by writing the following contents to /etc/lightdm/lightdm.conf:

# Manually enable guest sessions despite them not being confined

# IMPORTANT: Makes the system vulnerable to CVE-2017-8900

# <https://bugs.launchpad.net/bugs/1663157>

[Seat:\*]

allow-guest=true

If you have a use case which requires the guest session, you can manually re-enable it by writing the following contents to /etc/lightdm/lightdm.conf:
# Manually enable guest sessions despite them not being confined
# IMPORTANT: Makes the system vulnerable to CVE-2017-8900
# https://bugs.launchpad.net/bugs/1663157
[Seat:\*]
allow-guest=true

[Ubuntu Foundations Team Bug Bot (crichton)](https://launchpad.net/~crichton)
on 2017-05-12

| **tags**: | added: patch |
| --- | --- |

[Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks)
on 2017-05-12

| Changed in lightdm (Ubuntu Artful): | |
| --- | --- |
| **assignee**: | nobody → Robert Ancell (robert-ancell) |
| Changed in lightdm: | |
| **assignee**: | nobody → Robert Ancell (robert-ancell) |
| Changed in lightdm (Ubuntu Yakkety): | |
| **assignee**: | nobody → Tyler Hicks (tyhicks) |
| Changed in lightdm (Ubuntu Zesty): | |
| **assignee**: | nobody → Tyler Hicks (tyhicks) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steve Langasek (vorlon)](https://launchpad.net/~vorlon) wrote on 2017-05-16: |  |  | [#25](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/25) |
| --- | --- | --- | --- |

Balint, could you follow through on this bug? Martin has provided some good general guidance already about what's required to re-enable secure guest sessions in artful.

Balint, could you follow through on this bug? Martin has provided some good general guidance already about what's required to re-enable secure guest sessions in artful.

| Changed in lightdm (Ubuntu Artful): | |
| --- | --- |
| **assignee**: | Robert Ancell (robert-ancell) → Balint Reczey (rbalint) |
| **milestone**: | none → ubuntu-17.05 |

[Balint Reczey (rbalint)](https://launchpad.net/~rbalint)
on 2017-05-22

| Changed in lightdm (Ubuntu Artful): | |
| --- | --- |
| **status**: | Triaged → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Launchpad Janitor (janitor)](https://launchpad.net/~janitor) wrote on 2017-06-19: |  |  | [#26](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/26) |
| --- | --- | --- | --- |

This bug was fixed in the package lightdm - 1.22.0-0ubuntu4

---------------

lightdm (1.22.0-0ubuntu4) artful; urgency=medium

\* SECURITY UPDATE: Guest session not confined (LP: [#1663157](/bugs/1663157))

    - debian/50-disable-guest.conf:

    - debian/lightdm.install:

      - Disable guest sessions by default, this can be overridden by custom

        configuration (e.g. /etc/lightdm/lightdm.conf)

    - CVE-2017-8900

-- Robert Ancell <email address hidden> Mon, 19 Jun 2017 16:32:24 +1200

This bug was fixed in the package lightdm - 1.22.0-0ubuntu4
---------------
lightdm (1.22.0-0ubuntu4) artful; urgency=medium
\* SECURITY UPDATE: Guest session not confined (LP: #1663157)
- debian/50-disable-guest.conf:
- debian/lightdm.install:
- Disable guest sessions by default, this can be overridden by custom
configuration (e.g. /etc/lightdm/lightdm.conf)
- CVE-2017-8900
-- Robert Ancell <robert.ancell@canonical.com> Mon, 19 Jun 2017 16:32:24 +1200

| Changed in lightdm (Ubuntu Artful): | |
| --- | --- |
| **status**: | In Progress → Fix Released |

[Mathew Hodson (mhodson)](https://launchpad.net/~mhodson)
on 2017-06-23

| **no longer affects**: | apparmor (Ubuntu) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Magezi Sagesse (magezi)](https://launchpad.net/~magezi) wrote on 2017-11-14: |  |  | [#27](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/27) |
| --- | --- | --- | --- |

Hey guys I am a newbie to linux and I am coming from windows...I just want to have that button on my login screen or somewhere on the notification zone ...everything you have explained is hard for me to understand can you please elaborate it in steps ..so that I enable guest-session on my computer?

Hey guys I am a newbie to linux and I am coming from windows...I just want to have that button on my login screen or somewhere on the notification zone ...everything you have explained is hard for me to understand can you please elaborate it in steps ..so that I enable guest-session on my computer?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Gunnar Hjalmarsson (gunnarhj)](https://launchpad.net/~gunnarhj) wrote on 2017-11-14: |  |  | [#28](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/28) |
| --- | --- | --- | --- |

@Magezi: Please note that this is a bug report, not a support forum. This Ask Ubuntu question may help:

<https://askubuntu.com/q/915415>

@Magezi: Please note that this is a bug report, not a support forum. This Ask Ubuntu question may help:
https://askubuntu.com/q/915415

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Balint Reczey (rbalint)](https://launchpad.net/~rbalint) wrote on 2018-01-11: |  |  | [#29](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/29) |
| --- | --- | --- | --- |

Reopening, since the guest session is disabled by default but it is still not confined.

Reopening, since the guest session is disabled by default but it is still not confined.

| Changed in lightdm (Ubuntu): | |
| --- | --- |
| **status**: | Fix Released → Triaged |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tyler Hicks (tyhicks)](https://launchpad.net/~tyhicks) wrote on 2018-01-12: |  |  | [#30](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/30) |
| --- | --- | --- | --- |

@rbalint can you please open a new bug to track re-enabling the guest session with proper confinement rather than piggy back on this bug?

@rbalint can you please open a new bug to track re-enabling the guest session with proper confinement rather than piggy back on this bug?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Balint Reczey (rbalint)](https://launchpad.net/~rbalint) wrote on 2018-01-12: |  |  | [#31](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/comments/31) |
| --- | --- | --- | --- |

@tyhicks I just opened LP #1742912 for tracking the confinement fix.

@tyhicks I just opened LP #1742912 for tracking the confinement fix.

| Changed in lightdm (Ubuntu): | |
| --- | --- |
| **status**: | Triaged → Fix Released |

[Francis Ginther (fginther)](https://launchpad.net/~fginther)
on 2018-02-15

| **tags**: | added: id-5a57962350afc7d4aa391919 |
| --- | --- |

[Robert Ancell (robert-ancell)](https://launchpad.net/~robert-ancell)
on 2018-03-06

| Changed in lightdm: | |
| --- | --- |
| **assignee**: | Robert Ancell (robert-ancell) → nobody |

[See full activity log](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/ubuntu/%2Bsource/lightdm/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [lightdm-yakkety-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873709/%2Bfiles/lightdm-yakkety-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873709 "Change patch details")
* [lightdm-zesty-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873710/%2Bfiles/lightdm-zesty-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4873710 "Change patch details")
* [lightdm-zesty-lp1663157.debdiff](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4874963/%2Bfiles/lightdm-zesty-lp1663157.debdiff)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4874963 "Change patch details")

* [Add patch](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Baddcomment?field.patch=on)

## Bug attachments

* [pstree-yakkety.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826102/%2Bfiles/pstree-yakkety.txt)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826102 "Change attachment details")
* [pstree-zesty.txt](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826103/%2Bfiles/pstree-zesty.txt)
  [Edit](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Battachment/4826103 "Change attachment details")

* [Add attachment](/ubuntu/%2Bsource/lightdm/%2Bbug/1663157/%2Baddcomment)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from lists.ubuntu.com_be8ed54b_20250126_111049.html ===


| **ubuntu-hardened -- Ubuntu security discussion** | |
| --- | --- |
|  | |
| **About ubuntu-hardened** | English (USA)   Chinese (Taiwan) |
| Discussion on Ubuntu security updates, development of new security technologies, and general "hardening" of the operating system.  A place to talk about MAC systems (SELinux, AppArmor, Smack) in Ubuntu, about both kernel-level and user-land security improvements and technologies, etc.  To see the collection of prior postings to the list, visit the [ubuntu-hardened Archives](https://lists.ubuntu.com/archives/ubuntu-hardened). | |
| **Using ubuntu-hardened** | |
| To post a message to all the list members, send email to ubuntu-hardened@lists.ubuntu.com. You can subscribe to the list, or change your existing subscription, in the sections below. | |
| **Subscribing to ubuntu-hardened** | |
| Subscribe to ubuntu-hardened by filling out the following form. You will be sent email requesting confirmation, to prevent others from gratuitously subscribing you. This is a hidden list, which means that the list of members is available only to the list administrator.    | Your email address: |  |  | | --- | --- | --- | | Your name (optional): |  |  | | You may enter a privacy password below. This provides only mild security, but should prevent others from messing with your subscription. **Do not use a valuable password** as it will occasionally be emailed back to you in cleartext. If you choose not to enter a password, one will be automatically generated for you, and it will be sent to you once you've confirmed your subscription. You can always request a mail-back of your password when you edit your personal options. | | | | Pick a password: |  |  | | Reenter password to confirm: |  |  | | Which language do you prefer to display your messages? | English (USA)   Chinese (Taiwan) |  | | Would you like to receive list mail batched in a daily digest? | No  Yes | |  | | | | |

| **ubuntu-hardened Subscribers** | |
| (*The subscribers list is only available to the list administrator.*) Enter your admin address and password to visit the subscribers list: Admin address: Password:  To unsubscribe from ubuntu-hardened, get a password reminder, or change your subscription options enter your subscription email address: If you leave the field blank, you will be prompted for your email address | |

---

[ubuntu-hardened](../listinfo/ubuntu-hardened) list run by jamie at ubuntu.com, mdeslaur at ubuntu.com, sbeattie at ubuntu.com, alex.murray at canonical.com
[ubuntu-hardened administrative interface](../admin/ubuntu-hardened) (requires authorization)
[Overview of all lists.ubuntu.com mailing lists](../listinfo)

| [Delivered by Mailmanversion 2.1.20](http://www.gnu.org/software/mailman/index.html) | [Python Powered](http://www.python.org/) | [GNU's Not Unix](http://www.gnu.org/) | [Debian Powered](http://www.debian.org/) |
| --- | --- | --- | --- |

[![](http://tuxedo-es.org/images/hardened_debian.png)](http://www.debian-hardened.org)



=== Content from people.canonical.com_3a8526cb_20250125_185357.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# CVE-2017-8900

Publication date 11 May 2017

Last updated 24 July 2024

---

Ubuntu priority

![](https://assets.ubuntu.com/v1/8010f9e0-CVE-Priority-icon-Medium.svg)

**Medium**

[Why this priority?](/security/cves/about#priority )

## Cvss 3 Severity Score

![](https://assets.ubuntu.com/v1/8010f9e0-CVE-Priority-icon-Medium.svg)

**4.6 · Medium**

[Score breakdown](#impact-score)

Toggle side navigation

Toggle table of contents

* [Description](#description)
* [Status](#status)
* [Notes](#notes)
* [Severity score breakdown](#impact-score)
* [References](#references)

LightDM through 1.22.0, when systemd is used in Ubuntu 16.10 and 17.x,
allows physically proximate attackers to bypass intended AppArmor
restrictions and visit the home directories of arbitrary users by
establishing a guest session.

[Read the notes from the security team](#notes)

## Status

Show unmaintained releases

| Package | Ubuntu Release | Status |
| --- | --- | --- |
| lightdm | 17.04 zesty | Fixed 1.22.0-0ubuntu2.1 |
| 16.10 yakkety | Fixed 1.19.5-0ubuntu1.2 |
| 16.04 LTS xenial | Not affected |
| 14.04 LTS trusty | Not in release |

---

* [How can I get the fixes?](/security/cves/about#security)
* [What do statuses mean?](/security/cves/about#statuses)

## Notes

---

### [tyhicks](https://launchpad.net/~tyhicks)

This issue was introduced when the user session handling moved from
upstart to systemd in Ubuntu 16.10.

## Severity score breakdown

| Parameter | Value |
| --- | --- |
| Base score | 4.6 · Medium |
| Attack vector | Physical |
| Attack complexity | Low |
| Privileges required | None |
| User interaction | None |
| Scope | Unchanged |
| Confidentiality | High |
| Integrity impact | None |
| Availability impact | None |
| Vector | CVSS:3.0/AV:P/AC:L/PR:N/UI:N/S:U/C:H/I:N/A:N |

## References

* [MITRE](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-8900)
* [NVD](https://nvd.nist.gov/vuln/detail/CVE-2017-8900)
* [Launchpad](https://launchpad.net/bugs/cve/CVE-2017-8900)
* [Debian](https://security-tracker.debian.org/tracker/CVE-2017-8900)

### Related Ubuntu Security Notices (USN)

+ [USN-3285-1](https://usn.ubuntu.com/USN-3285-1)
+ LightDM vulnerability
+ 12 May 2017

### Other references

* <https://www.cve.org/CVERecord?id=CVE-2017-8900>

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from launchpad.net_9f645890_20250126_111052.html ===

[Log in / Register](https://launchpad.net/~crichton/%2Blogin)

[![](https://launchpadlibrarian.net/61632396/crichton-small.jpg)](https://launchpad.net/~crichton)

## [Ubuntu Foundations Team Bug Bot](https://launchpad.net/~crichton)

* Overview
* [Code](https://code.launchpad.net/~crichton)
* [Bugs](https://bugs.launchpad.net/~crichton)
* [Blueprints](https://blueprints.launchpad.net/~crichton)
* [Translations](https://translations.launchpad.net/~crichton)
* [Answers](https://answers.launchpad.net/~crichton)

here

* [Related packages](https://launchpad.net/~crichton/%2Brelated-packages)
* [Related projects](https://launchpad.net/~crichton/%2Brelated-projects)

## User information

Launchpad Id:
crichton

Email:
[Log in](%2Blogin) for email information.

Member since:
2008-08-12

[![Icon of Ubuntu Bug Control](https://launchpadlibrarian.net/4423778/qa-icon.png "Member of Ubuntu Bug Control")](/~ubuntu-bugcontrol)

Languages:

English

Time zone:

UTC
(UTC+0000)

Karma:
[27](https://launchpad.net/~crichton/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

## [All memberships](https://launchpad.net/~crichton/%2Bparticipation) Latest memberships

| [Ubuntu Bug Control](/~ubuntu-bugcontrol)  Joined on 2008-08-12 | |
| --- | --- |

## [Recent activities](https://launchpad.net/~crichton/%2Bkarma) Most active in

| [Ubuntu](/ubuntu) |  |
| --- | --- |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_54bd9e03_20250126_111051.html ===

[Log in / Register](https://launchpad.net/ubuntu/%2Bsource/lightdm/1.19.5-0ubuntu1.2/%2Blogin)

[![](https://launchpadlibrarian.net/606381979/CoF%2064px.png)](https://launchpad.net/ubuntu)

## [Ubuntu](https://launchpad.net/ubuntu)[lightdm package](https://launchpad.net/ubuntu/%2Bsource/lightdm)

* [Overview](https://launchpad.net/ubuntu/%2Bsource/lightdm)
* [Code](https://code.launchpad.net/ubuntu/%2Bsource/lightdm)
* [Bugs](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm)
* Blueprints
* [Translations](https://translations.launchpad.net/ubuntu/%2Bsource/lightdm)
* [Answers](https://answers.launchpad.net/ubuntu/%2Bsource/lightdm)

# lightdm 1.19.5-0ubuntu1.2 source package in Ubuntu

## Changelog

```
lightdm (1.19.5-0ubuntu1.2) yakkety-security; urgency=medium

  * SECURITY UPDATE: Guest session not confined (LP: [#1663157](/bugs/1663157))
    - debian/50-disable-guest.conf:
    - debian/lightdm.install:
      - Disable guest sessions by default, this can be overridden by custom
        configuration (e.g. /etc/lightdm/lightdm.conf)
    - CVE-2017-8900

 -- Robert Ancell <email address hidden>  Tue, 09 May 2017 09:32:16 +1200
```

## Upload details

Uploaded by:
[Robert Ancell](/~robert-ancell)
on 2017-05-11

Sponsored by:
[Tyler Hicks](/~tyhicks)

Uploaded to:
[Yakkety](/ubuntu/yakkety)

Original maintainer:
[Robert Ancell](/~robert-ancell)

Architectures:
any all

Section:
x11

Urgency:
Medium Urgency

## [See full publishing history](%2Bpublishinghistory) Publishing

| Series | Pocket | Published | Component | Section |
| --- | --- | --- | --- | --- |

## Builds

[Yakkety](/ubuntu/yakkety):
![[FULLYBUILT]](/@@/build-success "Successfully built")
[amd64](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/12569292)
![[FULLYBUILT]](/@@/build-success "Successfully built")
[arm64](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/12569293)
![[FULLYBUILT]](/@@/build-success "Successfully built")
[armhf](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/12569294)
![[FULLYBUILT]](/@@/build-success "Successfully built")
[i386](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/12569295)
![[FULLYBUILT]](/@@/build-success "Successfully built")
[powerpc](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/12569296)
![[FULLYBUILT]](/@@/build-success "Successfully built")
[ppc64el](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/12569297)
![[FULLYBUILT]](/@@/build-success "Successfully built")
[s390x](/~ubuntu-security/%2Barchive/ubuntu/ppa/%2Bbuild/12569298)

## Downloads

| File | Size | SHA-256 Checksum |
| --- | --- | --- |
| [lightdm\_1.19.5-0ubuntu1.2.tar.gz](https://launchpad.net/ubuntu/%2Barchive/primary/%2Bsourcefiles/lightdm/1.19.5-0ubuntu1.2/lightdm_1.19.5-0ubuntu1.2.tar.gz) | 413.7 KiB | e41e6aa74e5a319ea0ab655d20cdfbd869f88575078f6efc8a8a362b6c1b5464 |
| [lightdm\_1.19.5-0ubuntu1.2.dsc](https://launchpad.net/ubuntu/%2Barchive/primary/%2Bsourcefiles/lightdm/1.19.5-0ubuntu1.2/lightdm_1.19.5-0ubuntu1.2.dsc) | 2.4 KiB | dcbb3e4134837b61a9dda372b987a5c28b16798fbf92ba5fe9e81e25eec33417 |

### Available diffs

* [diff from 1.19.5-0ubuntu1.1 to 1.19.5-0ubuntu1.2](http://launchpadlibrarian.net/319248899/lightdm_1.19.5-0ubuntu1.1_1.19.5-0ubuntu1.2.diff.gz) (689 bytes)

[View changes file](http://launchpadlibrarian.net/319248396/lightdm_1.19.5-0ubuntu1.2_source.changes)

## Binary packages built by this source

[gir1.2-lightdm-1](/ubuntu/yakkety/%2Bpackage/gir1.2-lightdm-1):
No summary available for gir1.2-lightdm-1 in ubuntu yakkety.

No description available for gir1.2-lightdm-1 in ubuntu yakkety.

[liblightdm-gobject-1-0](/ubuntu/yakkety/%2Bpackage/liblightdm-gobject-1-0):
No summary available for liblightdm-gobject-1-0 in ubuntu yakkety.

No description available for liblightdm-gobject-1-0 in ubuntu yakkety.

[liblightdm-gobject-1-0-dbgsym](/ubuntu/yakkety/%2Bpackage/liblightdm-gobject-1-0-dbgsym):
No summary available for liblightdm-gobject-1-0-dbgsym in ubuntu yakkety.

No description available for liblightdm-gobject-1-0-dbgsym in ubuntu yakkety.

[liblightdm-gobject-1-dev](/ubuntu/yakkety/%2Bpackage/liblightdm-gobject-1-dev):
No summary available for liblightdm-gobject-1-dev in ubuntu yakkety.

No description available for liblightdm-gobject-1-dev in ubuntu yakkety.

[liblightdm-gobject-1-doc](/ubuntu/yakkety/%2Bpackage/liblightdm-gobject-1-doc):
No summary available for liblightdm-gobject-1-doc in ubuntu yakkety.

No description available for liblightdm-gobject-1-doc in ubuntu yakkety.

[liblightdm-qt-3-0](/ubuntu/yakkety/%2Bpackage/liblightdm-qt-3-0):
No summary available for liblightdm-qt-3-0 in ubuntu yakkety.

No description available for liblightdm-qt-3-0 in ubuntu yakkety.

[liblightdm-qt-3-0-dbgsym](/ubuntu/yakkety/%2Bpackage/liblightdm-qt-3-0-dbgsym):
No summary available for liblightdm-qt-3-0-dbgsym in ubuntu yakkety.

No description available for liblightdm-qt-3-0-dbgsym in ubuntu yakkety.

[liblightdm-qt-dev](/ubuntu/yakkety/%2Bpackage/liblightdm-qt-dev):
No summary available for liblightdm-qt-dev in ubuntu yakkety.

No description available for liblightdm-qt-dev in ubuntu yakkety.

[liblightdm-qt5-3-0](/ubuntu/yakkety/%2Bpackage/liblightdm-qt5-3-0):
No summary available for liblightdm-qt5-3-0 in ubuntu yakkety.

No description available for liblightdm-qt5-3-0 in ubuntu yakkety.

[liblightdm-qt5-3-0-dbgsym](/ubuntu/yakkety/%2Bpackage/liblightdm-qt5-3-0-dbgsym):
No summary available for liblightdm-qt5-3-0-dbgsym in ubuntu yakkety.

No description available for liblightdm-qt5-3-0-dbgsym in ubuntu yakkety.

[liblightdm-qt5-3-dev](/ubuntu/yakkety/%2Bpackage/liblightdm-qt5-3-dev):
No summary available for liblightdm-qt5-3-dev in ubuntu yakkety.

No description available for liblightdm-qt5-3-dev in ubuntu yakkety.

[lightdm](/ubuntu/yakkety/%2Bpackage/lightdm):
No summary available for lightdm in ubuntu yakkety.

No description available for lightdm in ubuntu yakkety.

[lightdm-dbgsym](/ubuntu/yakkety/%2Bpackage/lightdm-dbgsym):
No summary available for lightdm-dbgsym in ubuntu yakkety.

No description available for lightdm-dbgsym in ubuntu yakkety.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_512e8996_20250126_111058.html ===

[Log in / Register](https://launchpad.net/bugs/cve/CVE-2017-8900/%2Blogin)

![](/@@/launchpad-logo)

## Launchpad.net

* [Launchpad Home](https://launchpad.net/)
* [Code](https://code.launchpad.net/)
* [Bugs](https://bugs.launchpad.net/)
* [Blueprints](https://blueprints.launchpad.net/)
* [Translations](https://translations.launchpad.net/)
* [Answers](https://answers.launchpad.net/)

[Launchpad CVE tracker](/bugs/cve)
# CVE 2017-8900

LightDM through 1.22.0, when systemd is used in Ubuntu 16.10 and 17.x, allows physically proximate attackers to bypass intended AppArmor restrictions and visit the home directories of arbitrary users by establishing a guest session.

## Related bugs and status

CVE-2017-8900 (Candidate)
is related to these bugs:

**[Bug #1663157: Guest session processes are not confined in 16.10 and newer releases](https://bugs.launchpad.net/bugs/1663157)**

| Summary | | | | In | Importance | Status |
| --- | --- | --- | --- | --- | --- | --- |
|  | 1663157 | [Guest session processes are not confined in 16.10 and newer releases](https://bugs.launchpad.net/ubuntu/%2Bsource/lightdm/%2Bbug/1663157) |  | lightdm (Ubuntu) | High | Fix Released |
|  | 1663157 | [Guest session processes are not confined in 16.10 and newer releases](https://bugs.launchpad.net/lightdm/%2Bbug/1663157) |  | Light Display Manager | Undecided | New |
|  | 1663157 | [Guest session processes are not confined in 16.10 and newer releases](https://bugs.launchpad.net/ubuntu/artful/%2Bsource/lightdm/%2Bbug/1663157) |  | lightdm (Ubuntu Artful) | High | Fix Released |
|  | 1663157 | [Guest session processes are not confined in 16.10 and newer releases](https://bugs.launchpad.net/ubuntu/yakkety/%2Bsource/lightdm/%2Bbug/1663157) |  | lightdm (Ubuntu Yakkety) | High | Fix Released |
|  | 1663157 | [Guest session processes are not confined in 16.10 and newer releases](https://bugs.launchpad.net/ubuntu/zesty/%2Bsource/lightdm/%2Bbug/1663157) |  | lightdm (Ubuntu Zesty) | High | Fix Released |

See the ![](/@@/link)
[CVE page on Mitre.org](https://cve.mitre.org/cgi-bin/cvename.cgi?name=2017-8900)
for more details.

## Related bugs

* [#1663157:
  Guest session processes are not confined in 16.10 and newer releases](https://bugs.launchpad.net/bugs/1663157)

* [Link to bug](%2Blinkbug)
* [Remove bug link](%2Bunlinkbug)

## References

* CONFIRM:
  [https://launchpad.net/...](https://launchpad.net/bugs/1663157)
* CONFIRM:
  [https://people.canonic...](https://people.canonical.com/~ubuntu-security/cve/2017/CVE-2017-8900.html)
* CONFIRM:
  [https://www.ubuntu.com...](https://www.ubuntu.com/usn/usn-3285-1/)
* BID:
  [98554](http://www.securityfocus.com/bid/98554)

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from launchpad.net_0dca030f_20250126_111055.html ===

[Log in / Register](https://launchpad.net/~janitor/%2Blogin)

[![](/@@/person-inactive-logo)](https://launchpad.net/~janitor)

## [Launchpad Janitor](https://launchpad.net/~janitor)

* Overview
* [Code](https://code.launchpad.net/~janitor)
* [Bugs](https://bugs.launchpad.net/~janitor)
* [Blueprints](https://blueprints.launchpad.net/~janitor)
* [Translations](https://translations.launchpad.net/~janitor)
* [Answers](https://answers.launchpad.net/~janitor)

Launchpad Janitor does not use Launchpad.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))


