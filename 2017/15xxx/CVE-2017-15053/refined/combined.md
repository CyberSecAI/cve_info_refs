=== Content from github.com_a793b500_20250125_032117.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnilsteampassnet%2FTeamPass%2Fcommit%2Fef32e9c28b6ddc33cee8a25255bc8da54434af3e)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnilsteampassnet%2FTeamPass%2Fcommit%2Fef32e9c28b6ddc33cee8a25255bc8da54434af3e)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=nilsteampassnet%2FTeamPass)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[nilsteampassnet](/nilsteampassnet)
/
**[TeamPass](/nilsteampassnet/TeamPass)**
Public

* [Notifications](/login?return_to=%2Fnilsteampassnet%2FTeamPass) You must be signed in to change notification settings
* [Fork
  552](/login?return_to=%2Fnilsteampassnet%2FTeamPass)
* [Star
   1.7k](/login?return_to=%2Fnilsteampassnet%2FTeamPass)

* [Code](/nilsteampassnet/TeamPass)
* [Issues
  703](/nilsteampassnet/TeamPass/issues)
* [Pull requests
  9](/nilsteampassnet/TeamPass/pulls)
* [Discussions](/nilsteampassnet/TeamPass/discussions)
* [Actions](/nilsteampassnet/TeamPass/actions)
* [Projects
  0](/nilsteampassnet/TeamPass/projects)
* [Wiki](/nilsteampassnet/TeamPass/wiki)
* [Security](/nilsteampassnet/TeamPass/security)
* [Insights](/nilsteampassnet/TeamPass/pulse)

Additional navigation options

* [Code](/nilsteampassnet/TeamPass)
* [Issues](/nilsteampassnet/TeamPass/issues)
* [Pull requests](/nilsteampassnet/TeamPass/pulls)
* [Discussions](/nilsteampassnet/TeamPass/discussions)
* [Actions](/nilsteampassnet/TeamPass/actions)
* [Projects](/nilsteampassnet/TeamPass/projects)
* [Wiki](/nilsteampassnet/TeamPass/wiki)
* [Security](/nilsteampassnet/TeamPass/security)
* [Insights](/nilsteampassnet/TeamPass/pulse)

## Commit

[Permalink](/nilsteampassnet/TeamPass/commit/ef32e9c28b6ddc33cee8a25255bc8da54434af3e)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

2.1.27

[Browse files](/nilsteampassnet/TeamPass/tree/ef32e9c28b6ddc33cee8a25255bc8da54434af3e)
Browse the repository at this point in the history

```
Added filter in Roles page
Improve truncating title in list of items
```

* Loading branch information

[![@nilsteampassnet](https://avatars.githubusercontent.com/u/1197546?s=40&v=4)](/nilsteampassnet)

[nilsteampassnet](/nilsteampassnet/TeamPass/commits?author=nilsteampassnet "View all commits by nilsteampassnet")
committed
Oct 4, 2017

1 parent
[8be3cc3](/nilsteampassnet/TeamPass/commit/8be3cc3d48bb62a8b95225d4410526cae9d5138d)

commit ef32e9c

 Show file tree

 Hide file tree

Showing
**11 changed files**
with
**135 additions**
and
**58 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* changelog.md
  [changelog.md](#diff-3bd14d078188074c410028847113ceae68865d0ad5b844a27183ef87fbe2fcc3)
* includes/css

  + includes/css/passman.css
    [passman.css](#diff-1649a797279c05f813ded63a39c79fe373f477691dcad37cf78c640c02b93df3)
* index.php
  [index.php](#diff-7413d6453f901e939bbd840c8f0d1c7b20c2ca0e7f71741e4e07c6cf036f16c0)
* install

  + install/install.queries.php
    [install.queries.php](#diff-ddfa9f208b5d639a1356de9cb7cb19b7767eb2c255e761c9602ad2f837acfe5c)
  + install/upgrade\_run\_2.1.27.php
    [upgrade\_run\_2.1.27.php](#diff-4b859093cc74a7f97ca572049cd45c0301287d302c0b91f9c464753098a91a3b)
* items.load.php
  [items.load.php](#diff-2569b5b1b2fce55e564b64928ccc701df3a2f2972428ec69bdfe69690e5f8b85)
* items.php
  [items.php](#diff-882d1a265bd338f86e21608a5895f19c7ae25343edd4c50380942736f0742f14)
* roles.load.php
  [roles.load.php](#diff-82039c1e6250fa46a2e4c9ecff97167328a47528273c3a9e7471a15c465c7702)
* roles.php
  [roles.php](#diff-bb3d2f72a71fe6e57a2ce49d25ee2bb1cb19ec4010c0064f74d0cf8bbeeda199)
* sources

  + sources/import.queries.php
    [import.queries.php](#diff-d696a2a4a5b98c72b48f9b58e1a9f796c9c3fafe3502e88f40f206587112c5e0)
  + sources/roles.queries.php
    [roles.queries.php](#diff-ed962d25b228a8e8bd56a8aebebf9f1c5af70c93609e14d626556d9f434f1cf5)

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[changelog.md](#diff-3bd14d078188074c410028847113ceae68865d0ad5b844a27183ef87fbe2fcc3 "changelog.md")

Show comments

[View file](/nilsteampassnet/TeamPass/blob/ef32e9c28b6ddc33cee8a25255bc8da54434af3e/changelog.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -11,6 +11,7 @@ |
|  |  | Fixed issue while restoring DB from administration page |
|  |  | Improved / Fixed administration task for encrypting/decrypting files |
|  |  | Improved security regarding item history display |
|  |  | Added filter in Roles |
|  |  | #1947 Dependency & array update in install checks |
|  |  | #1945 Cannot delete items |
|  |  | #1944 File upload results in error |
| Expand Down | |  |

12 changes: 11 additions & 1 deletion

12
[includes/css/passman.css](#diff-1649a797279c05f813ded63a39c79fe373f477691dcad37cf78c640c02b93df3 "includes/css/passman.css")

Show comments

[View file](/nilsteampassnet/TeamPass/blob/ef32e9c28b6ddc33cee8a25255bc8da54434af3e/includes/css/passman.css)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -165,7 +165,7 @@ float:left; |
|  |  |  |
|  |  | .td\_title{ |
|  |  | font-weight:bold; |
|  |  | min-width: 150px; |
|  |  | min-width: 120px; |
|  |  | } |
|  |  |  |
|  |  | ul{ |
| Expand All | | @@ -181,6 +181,11 @@ list-style-type:none; |
|  |  | padding: 10px; |
|  |  | } |
|  |  |  |
|  |  | .normal { |
|  |  | font: normal; "Lucida Grande"; |
|  |  | color: #464646; |
|  |  | } |
|  |  |  |
|  |  | .readme{ |
|  |  | font-family: sans-serif; |
|  |  | font-size: 9px; |
| Expand Down  Expand Up | | @@ -392,4 +397,9 @@ div.dataTables\_processing { z-index: 1; } |
|  |  |  |
|  |  | .hidden { |
|  |  | display: none; |
|  |  | } |
|  |  |  |
|  |  | .no-border { |
|  |  | border: none; |
|  |  | border-collapse: collapse; |
|  |  | } |

3 changes: 2 additions & 1 deletion

3
[index.php](#diff-7413d6453f901e939bbd840c8f0d1c7b20c2ca0e7f71741e4e07c6cf036f16c0 "index.php")

Show comments

[View file](/nilsteampassnet/TeamPass/blob/ef32e9c28b6ddc33cee8a25255bc8da54434af3e/index.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -117,6 +117,7 @@ |
|  |  | $session\_hide\_maintenance = $superGlobal->get("hide\_maintenance", "SESSION"); |
|  |  | $session\_initial\_url = $superGlobal->get("initial\_url", "SESSION"); |
|  |  | $server\_request\_uri = $superGlobal->get("REQUEST\_URI", "SERVER"); |
|  |  | $session\_nb\_users\_online = $superGlobal->get("nb\_users\_online", "SESSION"); |
|  |  |  |
|  |  |  |
|  |  | /\* DEFINE WHAT LANGUAGE TO USE \*/ |
| Expand Down  Expand Up | | @@ -783,7 +784,7 @@ class="ui-state-error ui-corner-all"> |
|  |  | <a href="https://www.reddit.com/r/TeamPass/" target="\_blank" style="color:#F0F0F0;" class="tip" title="'.addslashes($LANG['admin\_help']).'"><i class="fa fa-reddit-alien"></i></a> |
|  |  | </div> |
|  |  | <div style="float:left;width:32%;text-align:center;"> |
|  |  | ', ($session\_user\_id !== null && empty($session\_user\_id) === false) ? '<i class="fa fa-users"></i>&nbsp;'.$\_SESSION['nb\_users\_online'].'&nbsp;'.$LANG['users\_online'].'&nbsp;|&nbsp;<i class="fa fa-hourglass-end"></i>&nbsp;'.$LANG['index\_expiration\_in'].'&nbsp;<div style="display:inline;" id="countdown"></div>' : '', ' |
|  |  | ', ($session\_user\_id !== null && empty($session\_user\_id) === false) ? '<i class="fa fa-users"></i>&nbsp;'.$session\_nb\_users\_online.'&nbsp;'.$LANG['users\_online'].'&nbsp;|&nbsp;<i class="fa fa-hourglass-end"></i>&nbsp;'.$LANG['index\_expiration\_in'].'&nbsp;<div style="display:inline;" id="countdown"></div>' : '', ' |
|  |  | </div><div id="countdown2"></div> |
|  |  | <div style="float:right;text-align:right;"> |
|  |  | <i class="fa fa-clock-o"></i>&nbsp;'. $LANG['server\_time']." : ".@date($SETTINGS['date\_format'], (string) $\_SERVER['REQUEST\_TIME'])." - ".@date($SETTINGS['time\_format'], (string) $\_SERVER['REQUEST\_TIME']).' |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[install/install.queries.php](#diff-ddfa9f208b5d639a1356de9cb7cb19b7767eb2c255e761c9602ad2f837acfe5c "install/install.queries.php")

Show comments

[View file](/nilsteampassnet/TeamPass/blob/ef32e9c28b6ddc33cee8a25255bc8da54434af3e/install/install.queries.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -364,7 +364,7 @@ function encryptFollowingDefuse($message, $ascii\_key) |
|  |  | $mysqli\_result = mysqli\_query( |
|  |  | $dbTmp, |
|  |  | "CREATE TABLE IF NOT EXISTS `".$var['tbl\_prefix']."misc` ( |
|  |  | `id` int(12) NOT null AUTO\_INCREMENT, |
|  |  | `increment\_id` int(12) NOT null AUTO\_INCREMENT, |
|  |  | `type` varchar(50) NOT NULL, |
|  |  | `intitule` varchar(100) NOT NULL, |
|  |  | `valeur` varchar(500) NOT NULL, |
| Expand Down | |  |

20 changes: 14 additions & 6 deletions

20
[install/upgrade\_run\_2.1.27.php](#diff-4b859093cc74a7f97ca572049cd45c0301287d302c0b91f9c464753098a91a3b "install/upgrade_run_2.1.27.php")

Show comments

[View file](/nilsteampassnet/TeamPass/blob/ef32e9c28b6ddc33cee8a25255bc8da54434af3e/install/upgrade_run_2.1.27.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -188,11 +188,19 @@ function cleanFields($txt) |
|  |  | // alter table Items |
|  |  | mysqli\_query($db\_link, "ALTER TABLE `".$pre."items` MODIFY pw\_len INT(5) NOT NULL DEFAULT '0'"); |
|  |  |  |
|  |  | // alter table misc to add an index |
|  |  | mysqli\_query( |
|  |  | $db\_link, |
|  |  | "ALTER TABLE `".$pre."misc` ADD `id` INT(12) NOT NULL AUTO\_INCREMENT FIRST, ADD PRIMARY KEY (`id`)" |
|  |  | ); |
|  |  | // alter table MISC - rename ID is exists |
|  |  | $result = mysqli\_query("SHOW COLUMNS FROM `misc` LIKE 'id'"); |
|  |  | if (mysqli\_num\_rows($result) !== 0) { |
|  |  | // Change name of field |
|  |  | mysqli\_query($db\_link, "ALTER TABLE `".$pre."misc` CHANGE `id` `increment\_id` INT(12) NOT NULL"); |
|  |  | } else { |
|  |  | // alter table misc to add an index |
|  |  | $res = addColumnIfNotExist( |
|  |  | $pre."misc", |
|  |  | "increment\_id", |
|  |  | "INT(12) NOT NULL AUTO\_INCREMENT FIRST, ADD PRIMARY KEY (`id`)" |
|  |  | ); |
|  |  | } |
|  |  |  |
|  |  | // alter table misc to add an index |
|  |  | mysqli\_query( |
| Expand Down  Expand Up | | @@ -703,7 +711,7 @@ function replace\_a\_line($data) |
|  |  | utf8\_encode( |
|  |  | "<?php |
|  |  | global \$SETTINGS; |
|  |  | \$SETTINGS = array (" . $config\_text . " |
|  |  | \$SETTINGS = array (" . $config\_text . " |
|  |  | );" |
|  |  | ) |
|  |  | ); |
| Expand Down | |  |

27 changes: 21 additions & 6 deletions

27
[items.load.php](#diff-2569b5b1b2fce55e564b64928ccc701df3a2f2972428ec69bdfe69690e5f8b85 "items.load.php")

Show comments

[View file](/nilsteampassnet/TeamPass/blob/ef32e9c28b6ddc33cee8a25255bc8da54434af3e/items.load.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -792,7 +792,9 @@ function(data) { |
|  |  |  |
|  |  | function EditerItem() |
|  |  | { |
|  |  | $("#div\_formulaire\_edition\_item\_info").html("<?php echo "<i class='fa fa-cog fa-spin fa-lg'></i>&nbsp;".addslashes($LANG['please\_wait'])."..."; ?>").show(); |
|  |  | $("#div\_formulaire\_edition\_item\_info") |
|  |  | .html("<?php echo "<i class='fa fa-cog fa-spin fa-lg'></i>&nbsp;".addslashes($LANG['please\_wait'])."..."; ?>") |
|  |  | .removeClass("hidden"); |
|  |  | $("#item\_detail\_zone\_loader").addClass("hidden"); |
|  |  | var erreur = ""; |
|  |  | var reg=new RegExp("[.|,|;|:|!|=|+|-|\*|/|#|\"|'|&]"); |
| Expand Down  Expand Up | | @@ -965,7 +967,7 @@ function(data) { |
|  |  | LoadingPage(); |
|  |  | } else { |
|  |  | //refresh item in list |
|  |  | $("#fileclass"+data.id).text($('#edit\_label').val()); |
|  |  | $("#fileclass"+data.id).html('<div class="truncate">' + $('#edit\_label').val() + '</div>'); |
|  |  |  |
|  |  | //Refresh form |
|  |  | $("#id\_label").text($('#edit\_label').val()); |
| Expand Down  Expand Up | | @@ -1088,16 +1090,24 @@ function(data) { |
|  |  | );\*/ |
|  |  |  |
|  |  | } else { |
|  |  | $('#edit\_show\_error').html("<?php echo addslashes($LANG['error\_complex\_not\_enought']); ?>").show(); |
|  |  | $('#edit\_show\_error') |
|  |  | .html("<?php echo addslashes($LANG['error\_complex\_not\_enought']); ?>") |
|  |  | .show(); |
|  |  | $("#div\_formulaire\_edition\_item ~ .ui-dialog-buttonpane").find("button:contains('<?php echo addslashes($LANG['save\_button']); ?>')").prop("disabled", false); |
|  |  | $("#div\_formulaire\_edition\_item\_info").addClass("hidden").html(""); |
|  |  | $("#div\_formulaire\_edition\_item\_info") |
|  |  | .addClass("hidden") |
|  |  | .html(""); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | if (erreur != "") { |
|  |  | $('#edit\_show\_error').html(erreur).show(); |
|  |  | $("#div\_formulaire\_edition\_item\_info").addClass("hidden").html(""); |
|  |  | $("#div\_formulaire\_edition\_item ~ .ui-dialog-buttonpane").find("button:contains('<?php echo addslashes($LANG['save\_button']); ?>')").prop("disabled", false); |
|  |  | $("#div\_formulaire\_edition\_item\_info") |
|  |  | .addClass("hidden") |
|  |  | .html(""); |
|  |  | $("#div\_formulaire\_edition\_item ~ .ui-dialog-buttonpane") |
|  |  | .find("button:contains('<?php echo addslashes($LANG['save\_button']); ?>')") |
|  |  | .prop("disabled", false); |
|  |  | } |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -3293,6 +3303,11 @@ function(data) { |
|  |  | function(data) { |
|  |  | if (data[0].error === "") { |
|  |  | $("#div\_suggest\_change\_wait").html("<?php echo addslashes($LANG['suggestion\_done']); ?>").show(1).delay(1500).fadeOut(1000); |
|  |  |  |
|  |  | // set indicator if item has change proposal |
|  |  | $("#item\_extra\_info").prepend('<i class="fa fa-lightbulb-o fa-sm mi-yellow tip" title="<?php echo addslashes($LANG['item\_has\_change\_proposal']); ?>" onclick=""></i>&nbsp;'); |
|  |  | $(".tip").tooltipster({multiple: true}); |
|  |  |  |
|  |  | setTimeout( |
|  |  | function() { |
|  |  | $("#div\_suggest\_change").dialog("close"); |
| Expand Down | |  |

50 changes: 27 additions & 23 deletions

50
[items.php](#diff-882d1a265bd338f86e21608a5895f19c7ae25343edd4c50380942736f0742f14 "items.php")

Show comments

[View file](/nilsteampassnet/TeamPass/blob/ef32e9c28b6ddc33cee8a25255bc8da54434af3e/items.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -226,11 +226,11 @@ |
|  |  | <i class="fa fa-warning"></i>&nbsp;<b>'.$LANG['pw\_is\_expired\_-\_update\_it'].'</b> |
|  |  | </div> |
|  |  | </div> |
|  |  | <table width="100%" id="item\_details\_table">'; |
|  |  | <table width="100%" class="no-border" id="item\_details\_table">'; |
|  |  | // Line for LABEL |
|  |  | echo ' |
|  |  | <tr> |
|  |  | <td valign="top" class="td\_title" colspan="2"> |
|  |  | <td valign="top" class="td\_title" width="120px" style="background-color:rgba(178, 178, 178, 0.13);"> |
|  |  | <div class="quick\_menu2" style="float:left; margin-right: 5px;"> |
|  |  | <ul class="quick\_menu ui-menu"> |
|  |  | <li><i class="fa fa-bars"></i> |
| Expand All | | @@ -252,7 +252,11 @@ |
|  |  | </li> |
|  |  | </ul> |
|  |  | </div> |
|  |  | <div id="id\_label" style="display:inline; margin:4px 0px 0px 120px; "></div> |
|  |  | </td> |
|  |  | <td valign="middle" style="background-color:rgba(178, 178, 178, 0.13);"> |
|  |  | <span id="id\_label" style="font-weight:bold;"></span> |
|  |  | </td> |
|  |  | <td style="background-color:rgba(178, 178, 178, 0.13);"> |
|  |  | <input type="hidden" id="hid\_label" value="', isset($dataItem) ? htmlspecialchars($dataItem['label']) : '', '" /> |
|  |  | <div style="float:right; font-family:arial; margin-right:5px;" id="item\_viewed\_x\_times"></div> |
|  |  |  |
| Expand All | | @@ -266,15 +270,15 @@ |
|  |  | echo ' |
|  |  | <tr> |
|  |  | <td valign="top" class="td\_title" width="180px">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$LANG['description'].' :</td> |
|  |  | <td> |
|  |  | <td colspan="2"> |
|  |  | <div id="id\_desc" style="font-style:italic;display:inline;"></div><input type="hidden" id="hid\_desc" value="', isset($dataItem) ? htmlspecialchars($dataItem['description']) : '', '" /> |
|  |  | </td> |
|  |  | </tr>'; |
|  |  | // Line for PW |
|  |  | echo ' |
|  |  | <tr> |
|  |  | <td valign="top" class="td\_title">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$LANG['pw'].' :<span id="button\_quick\_pw\_copy" class="fa fa-paste fa-border fa-sm tip" style="cursor:pointer;display:none;float:right;margin-right:2px;" title="'.$LANG['item\_menu\_copy\_pw'].'"></i></td> |
|  |  | <td> |
|  |  | <td colspan="2"> |
|  |  | &nbsp; |
|  |  | <div id="id\_pw" class="unhide\_masked\_data" style="float:left; cursor:pointer; width:300px;"></div> |
|  |  | <input type="hidden" id="hid\_pw" value="" /> |
| Expand All | | @@ -285,7 +289,7 @@ |
|  |  | echo ' |
|  |  | <tr> |
|  |  | <td valign="top" class="td\_title">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$LANG['index\_login'].' :<span id="button\_quick\_login\_copy" class="fa fa-paste fa-border fa-sm tip" style="cursor:pointer;display:none;float:right;margin-right:2px;" title="'.$LANG['item\_menu\_copy\_login'].'"></span></td> |
|  |  | <td> |
|  |  | <td colspan="2"> |
|  |  | <div id="id\_login" style="float:left;"></div> |
|  |  | <input type="hidden" id="hid\_login" value="" /> |
|  |  | </td> |
| Expand All | | @@ -294,23 +298,23 @@ |
|  |  | echo ' |
|  |  | <tr> |
|  |  | <td valign="top" class="td\_title">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$LANG['email'].' :</td> |
|  |  | <td> |
|  |  | <td colspan="2"> |
|  |  | <div id="id\_email" style="display:inline;"></div><input type="hidden" id="hid\_email" value="" /> |
|  |  | </td> |
|  |  | </tr>'; |
|  |  | // Line for URL |
|  |  | echo ' |
|  |  | <tr> |
|  |  | <td valign="top" class="td\_title">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$LANG['url'].' :</td> |
|  |  | <td> |
|  |  | <td colspan="2"> |
|  |  | <div id="id\_url" style="display:inline;"></div><input type="hidden" id="hid\_url" value="" /> |
|  |  | </td> |
|  |  | </tr>'; |
|  |  | // Line for FILES |
|  |  | echo ' |
|  |  | <tr> |
|  |  | <td valign="top" class="td\_title">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$LANG['files\_&\_images'].' :</td> |
|  |  | <td> |
|  |  | <td colspan="2"> |
|  |  | <div id="id\_files" style="display:inline;font-size:11px;"></div><input type="hidden" id="hid\_files" /> |
|  |  | <div id="dialog\_files" style="display: none;"> |
|  |  |  |
| Expand All | | @@ -321,42 +325,42 @@ |
|  |  | echo ' |
|  |  | <tr> |
|  |  | <td valign="top" class="td\_title">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$LANG['restricted\_to'].' :</td> |
|  |  | <td> |
|  |  | <td colspan="2"> |
|  |  | <div id="id\_restricted\_to" style="display:inline;"></div><input type="hidden" id="hid\_restricted\_to" /><input type="hidden" id="hid\_restricted\_to\_roles" /> |
|  |  | </td> |
|  |  | </tr>'; |
|  |  | // Line for TAGS |
|  |  | echo ' |
|  |  | <tr> |
|  |  | <td valign="top" class="td\_title">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$LANG['tags'].' :</td> |
|  |  | <td> |
|  |  | <td colspan="2"> |
|  |  | <div id="id\_tags" style="display:inline;"></div><input type="hidden" id="hid\_tags" /> |
|  |  | </td> |
|  |  | </tr>'; |
|  |  | // Line for KBs |
|  |  | if (isset($SETTINGS['enable\_kb']) && $SETTINGS['enable\_kb'] == 1) { |
|  |  | echo ' |
|  |  | <tr> |
|  |  | <td valign="top" class="td\_title">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$LANG['kbs'].' :</td> |
|  |  | <td> |
|  |  | <div id="id\_kbs" style="display:inline;"></div><input type="hidden" id="hid\_kbs" /> |
|  |  | </td> |
|  |  | </tr>'; |
|  |  | <tr> |
|  |  | <td valign="top" class="td\_title">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$LANG['kbs'].' :</td> |
|  |  | <td colspan="2"> |
|  |  | <div id="id\_kbs" style="display:inline;"></div><input type="hidden" id="hid\_kbs" /> |
|  |  | </td> |
|  |  | </tr>'; |
|  |  | } |
|  |  | // lines for FIELDS |
|  |  | if (isset($SETTINGS['item\_extra\_fields']) && $SETTINGS['item\_extra\_fields'] == 1) { |
|  |  | foreach ($\_SESSION['item\_fields'] as $elem) { |
|  |  | $itemCatName = $elem[0]; |
|  |  | echo ' |
|  |  | <tr class="tr\_fields hidden" id="tr\_catfield\_'.$elem[0].'"> |
|  |  | <td valign="top" class="td\_title">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$elem[1].' :</td> |
|  |  | <td></td> |
|  |  | </tr>'; |
|  |  | <tr class="tr\_fields hidden" id="tr\_catfield\_'.$elem[0].'"> |
|  |  | <td valign="top" class="td\_title">&nbsp;<i class="fa fa-angle-right"></i>&nbsp;'.$elem[1].' :</td> |
|  |  | <td colspan="2"></td> |
|  |  | </tr>'; |
|  |  | foreach ($elem[2] as $field) { |
|  |  | echo ' |
|  |  | <tr class="tr\_cf tr\_fields hidden" id="cf\_tr\_'.$field[0].'"> |
|  |  | <td valign="top" class="td\_title">&nbsp;&nbsp;<i class="fa fa-caret-right"></i>&nbsp;<i>'.$field[1].'</i> :</td> |
|  |  | <td>'; |
|  |  | <td colspan="2">'; |
|  |  | if ($field[3] === "masked") { |
|  |  | echo ' |
|  |  | <div id="id\_field\_'.htmlspecialchars($field[0]).'\_'.$elem[0].'" style="float:left; cursor:pointer; width:300px;" class="fields\_div unhide\_masked\_data pointer"></div><input type="hidden" id="hid\_field\_'.htmlspecialchars($field[0]).'\_'.$elem[0].'" class="fields" />'; |
| Expand Down  Expand Up | | @@ -778,7 +782,7 @@ |
|  |  | </div>'; |
|  |  | } |
|  |  | echo ' |
|  |  | <div style="display:none; padding:5px;" id="div\_formulaire\_edition\_item\_info" class="ui-state-default ui-corner-all"></div> |
|  |  | <div style="padding:5px;" id="div\_formulaire\_edition\_item\_info" class="ui-state-default ui-corner-all hidden"></div> |
|  |  | </div> |
|  |  | </form> |
|  |  | </div>'; |
| Expand Down | |  |

30 changes: 22 additions & 8 deletions

30
[roles.load.php](#diff-82039c1e6250fa46a2e4c9ecff97167328a47528273c3a9e7471a15c465c7702 "roles.load.php")

Show comments

[View file](/nilsteampassnet/TeamPass/blob/ef32e9c28b6ddc33cee8a25255bc8da54434af3e/roles.load.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -205,8 +205,6 @@ function(data) { |
|  |  | } |
|  |  | }); |
|  |  |  |
|  |  |  |
|  |  |  |
|  |  | refresh\_roles\_matrix(); |
|  |  | }); |
|  |  |  |
| Expand Down  Expand Up | | @@ -280,7 +278,7 @@ function refresh\_roles\_matrix(order) |
|  |  | $("#div\_loading").show(); |
|  |  |  |
|  |  | //clean up |
|  |  | $("#roles\_next, #roles\_previous").hide(); |
|  |  | $(".roles\_next, .roles\_previous").hide(); |
|  |  |  |
|  |  | //manage start query |
|  |  | if (order == "next") { |
| Expand All | | @@ -299,26 +297,42 @@ function refresh\_roles\_matrix(order) |
|  |  | "sources/roles.queries.php", |
|  |  | { |
|  |  | type : "refresh\_roles\_matrix", |
|  |  | start : start |
|  |  | start : start, |
|  |  | filter : $("#filter\_roles").val() |
|  |  | }, |
|  |  | function(data) { |
|  |  | //decrypt data |
|  |  | data = $.parseJSON(data); |
|  |  | $("#matrice\_droits").html(""); |
|  |  | if (data.new\_table != "") { |
|  |  | if (data.new\_table !== "") { |
|  |  | $("#matrice\_droits").html(data.new\_table); |
|  |  | if (data.next < data.all) { |
|  |  | $("#roles\_next").show(); |
|  |  | if (data.next < data.all && data.next >= 9) { |
|  |  | $(".roles\_next").show(); |
|  |  | } |
|  |  | if (data.next >= 9 && data.previous >= 0) { |
|  |  | $("#roles\_previous").show(); |
|  |  | $(".roles\_previous").show(); |
|  |  | } |
|  |  | //manage next & previous arrows |
|  |  | $('#next\_role').val(data.next); |
|  |  | $('#previous\_role').val(data.previous); |
|  |  |  |
|  |  | $("#filter\_roles").val(""); |
|  |  | } else { |
|  |  | $("#matrice\_droits").html(data.error); |
|  |  | } |
|  |  |  |
|  |  | // Prepare autocomplete for filterbox |
|  |  | //Prepare autocomplete for filter |
|  |  | $("#filter\_roles") |
|  |  | .autocomplete({ |
|  |  | source: data.list\_of\_roles, |
|  |  | focus: function() { |
|  |  | // prevent value inserted on focus |
|  |  | return false; |
|  |  | } |
|  |  | } |
|  |  | ); |
|  |  |  |
|  |  | $("#div\_loading").hide(); |
|  |  | } |
|  |  | ); |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `ef32e9c`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnilsteampassnet%2FTeamPass%2Fcommit%2Fef32e9c28b6ddc33cee8a25255bc8da54434af3e) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


