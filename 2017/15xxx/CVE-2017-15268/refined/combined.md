=== Content from access.redhat.com_d83c3b3a_20250126_122940.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)

  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Product Documentation](https://access.redhat.com/documentation)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)

  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform)
  [All Product Docs](//docs.redhat.com/en/products/)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)

  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Classifications](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Severety Ratings](https://access.redhat.com/security/security-updates/#/cve)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)

  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

 Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

# Severity ratings

## Understanding Red Hat security ratings

Red Hat Product Security rates the severity of security issues found
in Red Hat products using a four-point scale (Low, Moderate,
Important, and Critical), as well as including a separate Common
Vulnerability Scoring System (CVSS) base score. These scoring systems
provide a prioritized risk assessment to help you understand and
schedule upgrades to your systems, enabling informed decisions on the
risk each issue places on your unique environment.

The four-point scale tells you how serious Red Hat considers an issue
to be, helping you judge the severity and determine the most important
updates. The scale takes into account the potential risk based on a technical analysis of the exact flaw and its type. The risk level of a flaw does not change if an exploit or worm is later released for a flaw, or if one is available before the release of a fix. A flaw will only be re-evaluated if new technical details emerge.

The following table provides severity ratings for Red Hat products and systems. For flaws specific to AI models, see [Red Hat security ratings for AI models](https://access.redhat.com/security/ai).

| **Severity ratings** | **Security flaw description** |
| --- | --- |
| **Critical impact** | This rating is given to flaws that could be easily exploited by a remote unauthenticated attacker and lead to system compromise (arbitrary code execution) without requiring user interaction, or easily cause system compromise via inference end points on AI systems. Flaws that require authentication, local or physical access to a system, or an unlikely configuration are not classified as Critical impact. These are the types of vulnerabilities that can be exploited by worms. |
| **Important impact** | This rating is given to flaws that can easily compromise the confidentiality, integrity or availability of resources. These are the types of vulnerabilities that allow local or authenticated users to gain additional privileges, allow unauthenticated remote users to view resources that should otherwise be protected by authentication or other controls, allow authenticated remote users to execute arbitrary code, allow remote users to cause a denial of service, or can cause system compromise via inference end points on AI systems. |
| **Moderate impact** | This rating is given to flaws that may be more difficult to exploit but could still lead to some compromise of the confidentiality, integrity or availability of resources under certain circumstances. It is also given to flaws that could be exploited to cause denial of service-like conditions on AI systems via an inference end point, or allow attackers to steal other users’ data from the AI system without authorization. These are the types of vulnerabilities that could have had a Critical or Important impact but are less easily exploited based on a technical evaluation of the flaw and/or affect unlikely configurations. || **Low impact** | This rating is given to all other issues that may have a security impact. These are the types of vulnerabilities that are believed to require unlikely circumstances to be able to be exploited, or where a successful exploit would give minimal consequences. This includes flaws that are present in a program’s source code but to which no current or theoretically possible, but unproven, exploitation vectors exist or were found during the technical analysis of the flaw. |

A Red Hat security advisory can contain fixes for more than one
vulnerability and for packages for more than one product (such as both
Red Hat Enterprise Linux 7 and 8). Each issue in an advisory has a
severity rating for each product. The overall severity of an advisory
is the highest severity out of all the individual issues, across all
the products the advisory targets. For simplicity, advisories only
show the overall severity. The advisories contain links to the
relevant entries in Red Hat's bug-tracking system, where you can
examine individual severity ratings and additional commentary, as well
as links to the relevant pages in Red Hat’s CVE database.

When a technology—enabled and most likely used by default—completely
blocks the exploitation of a particular vulnerability across all
architectures, we will adjust the severity level. When a technology
reduces the risk of a vulnerability, we may adjust the severity level
and give an explanation of the decision in the bug-tracking  and CVE
database entries.

## Common Vulnerability Scoring System (CVSS)

Common Vulnerability Scoring System (CVSS) base scores provide
additional guidance about a vulnerability, giving a detailed severity
rating by scoring the constant aspects of a vulnerability: Attack
Vector, Attack Complexity, User Interaction, Privileges Required,
Scope, Confidentiality, Integrity, and Availability.

CVSS version 2 base metrics are available for all vulnerabilities from
2009-2016, as well as selected earlier vulnerabilities. In 2016, Red
Hat adopted the CVSS v3 standard, and all vulnerabilities going
forward will use version 3.1 for scoring. These scores are found on
the
[CVE pages](https://access.redhat.com/security/security-updates/#/cve)
(linked from the References section of each Red Hat Security Advisory).

Red Hat does not solely use the CVSS rating to determine the priority
with which flaws are fixed, or to determine the severity rating of the
vulnerability. It is used as a guideline to identify and describe key
metrics of a flaw, however the priority for which flaws are fixed is
determined by the overall severity of the flaw using the
aforementioned four-point scale.  CVSS is meant to help customers
prioritize the order in which they remediate flaws.

### CVSS v3 Base Metrics

The CVSS v3 base metrics group covers the constant aspects of a
vulnerability:

* Attack Vector (AV) - Expresses the "remoteness" of the attack and
  how the vulnerability is exploited.
* Attack Complexity (AC) - Speaks to the difficulty of executing an
  attack and what factors are needed for it to be successful. (Along
  with User Interaction, Attack Complexity was formerly part of the
  Access Complexity metric.).
* User Interaction (UI) - Determines whether the attack requires an
  active human to participate or if the attack can be automated.
* Privileges Required (PR) - Documents the level of user
  authentication required for the attack to be successful. (This
  replaces the former Authentication metric.).
* Scope (S) - Determines whether an attacker can impact a component
  beyond its security scope/authority.
* Confidentiality (C) - Determines whether unauthorized parties can
  access data and to what extent.
* Integrity (I) - Measures the impact to the trustworthiness and
  veracity of data.
* Availability (A) - Refers to the impact to accessibility of data or
  services for authorized users.

A formula translates these measurements into a single, numerical base
score, ranging from 0.0 (no risk) to 10.0 (highest risk). Refer to
[Common Vulnerability Scoring System v3.1: User Guide](https://www.first.org/cvss/user-guide)
for detailed descriptions of the base metrics. It is important to note
that the CVSS base metrics were designed to be used with the other
CVSS metric groups, notably the Temporal and Environmental metrics, to
provide an accurate representation of risk in customer environments.
Alone, the Base metrics offer a shallow view of the vulnerability
itself without accounting for deployment or the environment.

### How Red Hat Uses CVSS v3 Base Metrics

We aim to comply with the CVSS v3 standard when assigning base scores,
and Red Hat uses base metrics that reflect how a vulnerability affects
our products specifically.  In addition, we do not use the Qualitative
Severity Rating Scale in the CVSS v3.1 User Guide to rate severity,
and our severity ratings are always based on the aforementioned
four-point scale.  In some circumstances, it may not be obvious why a
flaw received a particular score. The following are some common
vulnerability types with our interpretation and typical scoring:

#### Libraries

It is not always possible to know how third-party applications use
libraries, making it difficult to give accurate CVSS v3 base metrics
for flaws in system libraries. When rating these flaws, we take into
account the way the library is used by applications that we ship, and
also look at other popular software that may use the library in a way
that would cause an issue to be of higher severity, and adjust the
score appropriately.

#### Other Common Scores

Flaws where a local, unprivileged user can cause a kernel to crash
(denial of service) typically score 5.5 (for example,
[CVE-2019-9213](https://access.redhat.com/security/cve/CVE-2019-9213)).

Flaws that allow a local, unprivileged user to escalate their
privileges to root typically score 7.8 (for example,
[CVE-2019-18634](https://access.redhat.com/security/cve/CVE-2019-18634)).

Cross-site scripting flaws are generally scored as having Low impact
to Integrity and/or Confidentiality, with no impact to Availability,
in line with scoring from other vendors and NVD. A typical score for
these flaws is 6.1 (for example,
[CVE-2020-11023](https://access.redhat.com/security/cve/CVE-2020-11023)).

### Base Score Variations Across Products

It is common for a given CVE-named vulnerability to have several
different CVSS base metrics, depending on the product, version, and
architecture. Examples of this include:

* A vulnerability that only affected some architectures. For example,
  [CVE-2019-15031](https://access.redhat.com/security/cve/CVE-2019-15031)
  only affected PowerPC.
* A vulnerability that is mitigated by source code protection
  mechanisms on some platforms. For example,
  [CVE-2018-1125](https://access.redhat.com/security/cve/CVE-2018-1125)
  could have led to arbitrary code execution on Red Hat Enterprise
  Linux, but it is only a denial of service because it was compiled
  with FORTIFY protections.
* A vulnerability that affected more than one product.  For example,
  [CVE-2020-14060](https://access.redhat.com/security/cve/CVE-2020-14060)
  affected a component in both OpenShift and OpenStack.  The severity
  to OpenStack was lower (Low) as compared to OpenShift (Moderate)
  based on its usage; the overall vulnerability itself was rated
  Important.

If CVSS v3 base scores are significantly different across products, we
note that separately wherever possible. If we do not split the score,
we report the metric that gives the highest CVSS v3 base score (the
worst-case outcome).

### Differences Between NVD and Red Hat Scores

For open source software shipped by multiple vendors, the CVSS base
scores may vary for each vendor's version, depending on the version
they ship, how they ship it, the platform, and even how the software
is compiled. This makes scoring vulnerabilities difficult for
third-party vulnerability databases, such as NVD, who can give only a
single CVSS base score to each vulnerability, or when comparing to
other vendors who score based on the characteristics of use in their
own products. See the
[National Vulnerability Database](https://nvd.nist.gov/vuln-metrics/cvss)
for more information regarding NVD security ratings.

These differences can cause the scores to vary widely. Other reasons
may include how the source code was compiled with certain compiler
flags or hardening technologies that reduce or eliminate the security
severity of a flaw, or how the software is used within the product.
Software running standalone may suffer from a flaw, but its use within
a product may preclude the vulnerable code from ever being used in a
way that could be exploited.

For example, NVD may rate a flaw in a particular service as having
High Impact on the CVSS CIA Triad (Confidentiality, Integrity,
Availability) where the service in question is typically run as the
root user with full privileges on a system. However, in a Red Hat
product, the service may be specifically configured to run as a
dedicated non-privileged user running entirely in a SELinux sandbox,
greatly reducing the immediate impact from compromise, resulting in
Low impact.

For these reasons, we recommend that, whenever possible, you use a
CVSS base score provided by Red Hat in preference to a score from a
third party. Please
[let us know](https://access.redhat.com/site/security/team/contact/)
if you believe we have given an incorrect CVSS v3 base score for a
particular vulnerability. We are happy to discuss and update if
needed.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com)

### Help

* [Contact Customer Portal](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Systems Status

### About

* [Red Hat Subscription Value](https://access.redhat.com/subscription-value)
* [About Red Hat](https://www.redhat.com/about/)
* [Red Hat Jobs](http://jobs.redhat.com)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

Copyright © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)

×
### Formatting Tips

Here are the common uses of Markdown.

Code blocks
```
~~~
Code surrounded in tildes is easier to read
~~~
```

Links/URLs`[Red Hat Customer Portal](https://access.redhat.com)`

[Learn more](/help/markdown)
Close



=== Content from usn.ubuntu.com_2af07666_20250125_223332.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3575-1: QEMU vulnerabilities

20 February 2018

Several security issues were fixed in QEMU.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 17.10](/security/notices?release=artful)
* [Ubuntu 16.04 ESM](/security/notices?release=xenial)
* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [qemu](/security/cves?package=qemu) - Machine emulator and virtualizer

## Details

It was discovered that QEMU incorrectly handled guest ram. A privileged

attacker inside the guest could use this issue to cause QEMU to crash,

resulting in a denial of service. This issue only affected Ubuntu 14.04 LTS

and Ubuntu 16.04 LTS. ([CVE-2017-11334](/security/CVE-2017-11334))

David Buchanan discovered that QEMU incorrectly handled the VGA device. A

privileged attacker inside the guest could use this issue to cause QEMU to

crash, resulting in a denial of service. This issue was only addressed in

Ubuntu 17.10. ([CVE-2017-13672](/security/CVE-2017-13672))

Thomas Garnier discovered that QEMU incorrectly handled multiboot. An

attacker could use this issue to cause QEMU to crash, resulting in a denial

of service, or possibly execute arbitrary code on the host. In the default

installation, when QEMU is used with libvirt, attackers would be isolated

by the libvirt AppArmor profile. This issue only affected Ubuntu 14.04 LTS

and Ubuntu 16.04 LTS. ([CVE-2017-14167](/security/CVE-2017-14167))

Tuomas Tynkkynen discovered that QEMU incorrectly handled VirtFS directory

sharing. An attacker could use this issue to obtain sensitive information

from host memory. ([CVE-2017-15038](/security/CVE-2017-15038))

Eric Blake discovered that QEMU incorrectly handled memory in the

NBD server. An attacker could use this issue to cause the NBD server to

crash, resulting in a denial of service. This issue only affected Ubuntu

17.10. ([CVE-2017-15118](/security/CVE-2017-15118))

Eric Blake discovered that QEMU incorrectly handled certain options to the

NBD server. An attacker could use this issue to cause the NBD server to

crash, resulting in a denial of service. This issue only affected Ubuntu

14.04 LTS and Ubuntu 16.04 LTS. ([CVE-2017-15119](/security/CVE-2017-15119))

Daniel Berrange discovered that QEMU incorrectly handled the VNC server. A

remote attacker could possibly use this issue to consume memory, resulting

in a denial of service. This issue was only addressed in Ubuntu 17.10.

([CVE-2017-15124](/security/CVE-2017-15124))

Carl Brassey discovered that QEMU incorrectly handled certain websockets. A

remote attacker could possibly use this issue to consume memory, resulting

in a denial of service. This issue only affected Ubuntu 17.10.

([CVE-2017-15268](/security/CVE-2017-15268))

Guoxiang Niu discovered that QEMU incorrectly handled the Cirrus VGA

device. A privileged attacker inside the guest could use this issue to

cause QEMU to crash, resulting in a denial of service. ([CVE-2017-15289](/security/CVE-2017-15289))

Cyrille Chatras discovered that QEMU incorrectly handled certain PS2 values

during migration. An attacker could possibly use this issue to cause QEMU

to crash, resulting in a denial of service, or possibly execute arbitrary

code. This issue only affected Ubuntu 16.04 LTS and Ubuntu 17.10.

([CVE-2017-16845](/security/CVE-2017-16845))

It was discovered that QEMU incorrectly handled the Virtio Vring

implementation. An attacker could possibly use this issue to cause QEMU to

crash, resulting in a denial of service. This issue only affected Ubuntu

16.04 LTS and Ubuntu 17.10. ([CVE-2017-17381](/security/CVE-2017-17381))

Eric Blake discovered that QEMU incorrectly handled certain rounding

operations. An attacker could possibly use this issue to cause QEMU to

crash, resulting in a denial of service. This issue only affected Ubuntu

14.04 LTS and Ubuntu 16.04 LTS. ([CVE-2017-18043](/security/CVE-2017-18043))

Jiang Xin and Lin ZheCheng discovered that QEMU incorrectly handled the

VGA device. A privileged attacker inside the guest could use this issue to

cause QEMU to crash, resulting in a denial of service. ([CVE-2018-5683](/security/CVE-2018-5683))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 17.10

* [qemu-system](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.10+dfsg-0ubuntu3.5](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.10%2Bdfsg-0ubuntu3.5)
* [qemu-system-aarch64](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.10+dfsg-0ubuntu3.5](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.10%2Bdfsg-0ubuntu3.5)
* [qemu-system-arm](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.10+dfsg-0ubuntu3.5](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.10%2Bdfsg-0ubuntu3.5)
* [qemu-system-mips](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.10+dfsg-0ubuntu3.5](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.10%2Bdfsg-0ubuntu3.5)
* [qemu-system-misc](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.10+dfsg-0ubuntu3.5](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.10%2Bdfsg-0ubuntu3.5)
* [qemu-system-ppc](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.10+dfsg-0ubuntu3.5](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.10%2Bdfsg-0ubuntu3.5)
* [qemu-system-s390x](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.10+dfsg-0ubuntu3.5](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.10%2Bdfsg-0ubuntu3.5)
* [qemu-system-sparc](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.10+dfsg-0ubuntu3.5](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.10%2Bdfsg-0ubuntu3.5)
* [qemu-system-x86](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.10+dfsg-0ubuntu3.5](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.10%2Bdfsg-0ubuntu3.5)

##### Ubuntu 16.04

* [qemu-system](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.5+dfsg-5ubuntu10.22](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.5%2Bdfsg-5ubuntu10.22)
* [qemu-system-aarch64](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.5+dfsg-5ubuntu10.22](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.5%2Bdfsg-5ubuntu10.22)
* [qemu-system-arm](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.5+dfsg-5ubuntu10.22](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.5%2Bdfsg-5ubuntu10.22)
* [qemu-system-mips](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.5+dfsg-5ubuntu10.22](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.5%2Bdfsg-5ubuntu10.22)
* [qemu-system-misc](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.5+dfsg-5ubuntu10.22](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.5%2Bdfsg-5ubuntu10.22)
* [qemu-system-ppc](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.5+dfsg-5ubuntu10.22](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.5%2Bdfsg-5ubuntu10.22)
* [qemu-system-s390x](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.5+dfsg-5ubuntu10.22](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.5%2Bdfsg-5ubuntu10.22)
* [qemu-system-sparc](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.5+dfsg-5ubuntu10.22](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.5%2Bdfsg-5ubuntu10.22)
* [qemu-system-x86](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [1:2.5+dfsg-5ubuntu10.22](https://launchpad.net/ubuntu/%2Bsource/qemu/1%3A2.5%2Bdfsg-5ubuntu10.22)

##### Ubuntu 14.04

* [qemu-system](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [2.0.0+dfsg-2ubuntu1.39](https://launchpad.net/ubuntu/%2Bsource/qemu/2.0.0%2Bdfsg-2ubuntu1.39)
* [qemu-system-aarch64](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [2.0.0+dfsg-2ubuntu1.39](https://launchpad.net/ubuntu/%2Bsource/qemu/2.0.0%2Bdfsg-2ubuntu1.39)
* [qemu-system-arm](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [2.0.0+dfsg-2ubuntu1.39](https://launchpad.net/ubuntu/%2Bsource/qemu/2.0.0%2Bdfsg-2ubuntu1.39)
* [qemu-system-mips](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [2.0.0+dfsg-2ubuntu1.39](https://launchpad.net/ubuntu/%2Bsource/qemu/2.0.0%2Bdfsg-2ubuntu1.39)
* [qemu-system-misc](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [2.0.0+dfsg-2ubuntu1.39](https://launchpad.net/ubuntu/%2Bsource/qemu/2.0.0%2Bdfsg-2ubuntu1.39)
* [qemu-system-ppc](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [2.0.0+dfsg-2ubuntu1.39](https://launchpad.net/ubuntu/%2Bsource/qemu/2.0.0%2Bdfsg-2ubuntu1.39)
* [qemu-system-sparc](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [2.0.0+dfsg-2ubuntu1.39](https://launchpad.net/ubuntu/%2Bsource/qemu/2.0.0%2Bdfsg-2ubuntu1.39)
* [qemu-system-x86](https://launchpad.net/ubuntu/%2Bsource/qemu)
  -
  [2.0.0+dfsg-2ubuntu1.39](https://launchpad.net/ubuntu/%2Bsource/qemu/2.0.0%2Bdfsg-2ubuntu1.39)

After a standard system update you need to restart all QEMU virtual

machines to make all the necessary changes.

## References

* [CVE-2017-11334](/security/CVE-2017-11334)
* [CVE-2017-13672](/security/CVE-2017-13672)
* [CVE-2017-14167](/security/CVE-2017-14167)
* [CVE-2017-15038](/security/CVE-2017-15038)
* [CVE-2017-15118](/security/CVE-2017-15118)
* [CVE-2017-15119](/security/CVE-2017-15119)
* [CVE-2017-15124](/security/CVE-2017-15124)
* [CVE-2017-15268](/security/CVE-2017-15268)
* [CVE-2017-15289](/security/CVE-2017-15289)
* [CVE-2017-16845](/security/CVE-2017-16845)
* [CVE-2017-17381](/security/CVE-2017-17381)
* [CVE-2017-18043](/security/CVE-2017-18043)
* [CVE-2018-5683](/security/CVE-2018-5683)

## Related notices

* [USN-3649-1](/security/notices/USN-3649-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugzilla.redhat.com_bff51b66_20250126_122936.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1511802)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1511802)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1511802)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1511802

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

RHEL Engineering is moving the tracking of its product development work on RHEL 6 through RHEL 9 to Red Hat Jira ([**issues.redhat.com**](https://issues.redhat.com)). If you're a Red Hat customer, please continue to file support cases via the [**Red Hat customer portal**](https://access.redhat.com/support/cases/). If you're not, please head to the "[**RHEL project**](https://issues.redhat.com/projects/RHEL)" in Red Hat Jira and file new tickets here. Individual Bugzilla bugs in the statuses "**NEW**", "**ASSIGNED**", and "**POST**" are being migrated throughout September 2023. Bugs of Red Hat partners with an assigned Engineering Partner Manager (EPM) are migrated in late September as per pre-agreed dates. Bugs against components "**kernel**", "**kernel-rt**", and "**kpatch**" are only migrated if still in "**NEW**" or "**ASSIGNED**". If you cannot log in to RH Jira, please consult [**article #7032570**](https://access.redhat.com/articles/7032570). That failing, please send an e-mail to the RH Jira admins at **rh-issues@redhat.com** to troubleshoot your issue as a user management inquiry. The email creates a ServiceNow ticket with Red Hat. Individual Bugzilla bugs that are migrated will be moved to status "**CLOSED**", resolution "**MIGRATED**", and set with "**MigratedToJIRA**" in "**Keywords**". The link to the successor Jira issue will be found under "**Links**", have a little "two-footprint" icon next to it, and direct you to the "[**RHEL project**](https://issues.redhat.com/projects/RHEL)" in Red Hat Jira (issue links are of type "**https://issues.redhat.com/browse/RHEL-XXXX**", where "**X**" is a digit). This same link will be available in a blue banner at the top of the page informing you that that bug has been migrated.

[**Bug 1511802**](show_bug.cgi?id=1511802)
- Regression in QEMU handling for sub-page MMIO BARs for vfio-pci devices

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
Regression in QEMU handling for sub-page MMIO BARs for vfio-pci devices

| | [Keywords](describekeywords.cgi): | Regression  TestOnly  ZStream | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat Enterprise Linux 7 | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat Enterprise Linux 7 "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | qemu-kvm | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 7.4 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | rc | | [Target Release](page.cgi?id=fields.html#target_release): | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Alex Williamson | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Yanan Fu | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1494181](show_bug.cgi?id=1494181 "CLOSED ERRATA - Backport vGPU support to qemu-kvm") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1515110](show_bug.cgi?id=1515110 "CLOSED ERRATA - Regression in QEMU handling for sub-page MMIO BARs for vfio-pci devices [rhel-7.4.z]") | | TreeView+ | [depends on](buglist.cgi?bug_id=1511802&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1511802&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2017-11-10 08:11 UTC by Sergio Lopez | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-03-11 16:14 UTC ([History](show_activity.cgi?id=1511802)) | | [CC List:](page.cgi?id=fields.html#cclist) | 14 users (show)  alex.williamson chayang jen jherrman juzhang knoel michen mkalinin mtessun qzhang rbalakri slopezpa virt-maint yfu | | Fixed In Version: | qemu-kvm-1.5.3-146.el7 | | | Doc Type: | Bug Fix | | | Doc Text: | Previously, the memory mapping of processor access to base address registers (BARs) smaller than the system page size was incorrect. As a consequence, devices assigned to a guest virtual machine using the vfio-pci driver did not work, which in some cases prevented the guest from booting. This update fixes the QEMU emulator to map the affected devices properly, and the described problem no longer occurs. | | | Clone Of: |  | | | Clones: | [1515110](show_bug.cgi?id=1515110 "CLOSED ERRATA - Regression in QEMU handling for sub-page MMIO BARs for vfio-pci devices [rhel-7.4.z]")  ([view as bug list](buglist.cgi?bug_id=1515110)) | | | Environment: |  | | | Last Closed: | 2018-04-10 14:38:15 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | | [**Patch backporting vfio\_sub\_page\_bar\_update\_mapping**](attachment.cgi?id=1350352 "View the content of the attachment") (6.16 KB, patch)  [2017-11-10 08:11 UTC](#attach_1350352 "Go to the comment associated with the attachment"), Sergio Lopez | *no flags* | [Details](attachment.cgi?id=1350352&action=edit) | [Diff](attachment.cgi?id=1350352&action=diff) | | [View All](attachment.cgi?bugid=1511802&action=viewall) | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2018:0816](https://access.redhat.com/errata/RHSA-2018%3A0816) | 0 | normal | SHIPPED\_LIVE | Low: qemu-kvm security, bug fix, and enhancement update | 2018-04-10 12:47:03 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1511802#c0)  Sergio Lopez    2017-11-10 08:11:07 UTC  ``` Created [attachment 1350352](attachment.cgi?id=1350352&action=diff "Patch backporting vfio_sub_page_bar_update_mapping") [[details]](attachment.cgi?id=1350352&action=edit "Patch backporting vfio_sub_page_bar_update_mapping") Patch backporting vfio_sub_page_bar_update_mapping  Kernels from 3.10.0-693 series increase the number of VFIO_REGION_INFO_FLAG_MMAP capable devices. This has triggered a dormant issue in qemu 1.5, where BARs smaller than host's page size get mmap'ed but not dma_map'ed, making them unreachable from the guest side.  The BAR is mmap'ed here:  hw/misc/vfio.c: 2573 static int vfio_mmap_bar(VFIOBAR *bar, MemoryRegion *mem, MemoryRegion *submem, 2574                          void **map, size_t size, off_t offset, 2575                          const char *name) 2576 { 2577     int ret = 0; 2578  2579     if (VFIO_ALLOW_MMAP && size && bar->flags & VFIO_REGION_INFO_FLAG_MMAP) { 2580         int prot = 0; 2581  2582         if (bar->flags & VFIO_REGION_INFO_FLAG_READ) { 2583             prot |= PROT_READ; 2584         } 2585  2586         if (bar->flags & VFIO_REGION_INFO_FLAG_WRITE) { 2587             prot |= PROT_WRITE; 2588         } 2589  2590         *map = mmap(NULL, size, prot, MAP_SHARED, 2591                     bar->fd, bar->fd_offset + offset); 2592         if (*map == MAP_FAILED) { 2593             *map = NULL; 2594             ret = -errno; 2595             goto empty_region; 2596         } 2597  2598         memory_region_init_ram_ptr(submem, name, size, *map); 2599         memory_region_set_skip_dump(submem); 2600     } else { 2601 empty_region: 2602         /* Create a zero sized sub-region to make cleanup easy. */ 2603         memory_region_init(submem, name, 0); 2604     } 2605  2606     memory_region_add_subregion(mem, offset, submem); 2607  2608     return ret; 2609 }  But the region will be omitted here:  2257 static void vfio_listener_region_add(MemoryListener *listener, (...) 2278  2279     iova = TARGET_PAGE_ALIGN(section->offset_within_address_space);          // end is being rounded down for page alignment 2280     end = (section->offset_within_address_space + section->size) & 2281           TARGET_PAGE_MASK;          // if end was smaller than TARGET_PAGE_SIZE, now end equals iova,          // returning here from the function 2283     if (iova >= end) { 2284         return; 2285     }  This can be fixed by backporting vfio_sub_page_bar_update_mapping from qemu 2.x. I'm attaching a patch with this approach.  Alternatively, a more conservative option could be rejecting subpage sizes in vfio_mmap_bar, falling back to the non-mmap'ed mode.  This has been reproduced with qemu-kvm-1.5.3-141.el7_4.2, passing through this USB EHCI device:  00:1a.0 USB controller: Intel Corporation C610/X99 series chipset USB Enhanced Host Controller #2 (rev 05)  I suspect any USB EHCI device can trigger the issue.  On the guest, the problem manifests itself with SeaBIOS reading bogus data from the controller on the EHCI initialization and rebooting in a loop.   ```  [Comment 2](show_bug.cgi?id=1511802#c2)  Alex Williamson    2017-11-10 21:39:57 UTC  ``` This bug is already fixed in qemu-kvm for RHEL-7.5 by [bug 1494181](show_bug.cgi?id=1494181 "CLOSED ERRATA - Backport vGPU support to qemu-kvm") which includes commit db0da029a185 ('vfio: Generalize region support') that inadvertently fixed this issue upstream by not mmap'ing sub-page regions:      if (!vbasedev->no_mmap && size && region->flags &         VFIO_REGION_INFO_FLAG_MMAP) {  becomes:      if (!vbasedev->no_mmap &&         region->flags & VFIO_REGION_INFO_FLAG_MMAP &&         !(region->size & ~qemu_real_host_page_mask)) {  The sub-page mmap is thus excluded as it was prior to the kernel change.  Also note that the issue is with the mmap, not with the DMA map.  Prior to the kernel change or with the above fix, the region is not DMA mapped and the VM works well.  DMA mapping only enables the possibility of peer-to-peer DMA between devices, the vCPU has full access to the region.  I believe it's the sizing of the region which resolves the problem in the proposed fix, which also happens to enable it to be DMA mapped, but the DMA mapping is not actually the fix.  Also note that qemu-kvm-rhev-2.6.0-28.el7_3.z already contains db0da029a185 (the fix above) and additionally qemu-kvm-rhev-2.9.0-16.el7_4.z contains 95251725e335 which includes the basis for the proposed patch, allowing sub-page mmaps.  Unless there is a specific need to support sub-page mmaps (the performance difference for a USB device is likely immeasurable) or the user is unable or unwilling to move to qemu-kvm-rhev, I would suggest that the existing qemu-kvm fix is sufficient.  I've also verified that current RHEL-7.5 builds of qemu-kvm do work with assignment of Terradici USB functions.  [Bug 1494181](show_bug.cgi?id=1494181 "CLOSED ERRATA - Backport vGPU support to qemu-kvm") is however not a good z-stream candidate and if z-stream is requested here I would suggest a very limited version of db0da029a185 including only a backport of the change noted above.   ```  [Comment 4](show_bug.cgi?id=1511802#c4)  Sergio Lopez    2017-11-13 07:42:42 UTC  ``` Hi Alex,  (In reply to Alex Williamson from [comment #2](show_bug.cgi?id=1511802#c2)) > The sub-page mmap is thus excluded as it was prior to the kernel change.  > Also note that the issue is with the mmap, not with the DMA map.  Prior to > the kernel change or with the above fix, the region is not DMA mapped and > the VM works well.  DMA mapping only enables the possibility of peer-to-peer > DMA between devices, the vCPU has full access to the region.  I believe it's > the sizing of the region which resolves the problem in the proposed fix, > which also happens to enable it to be DMA mapped, but the DMA mapping is not > actually the fix.  Hum... that doesn't match my observations:   - Unpatched QEMU, device _without_ VFIO_REGION_INFO_FLAG_MMAP    1. The BAR is not mmap'ed nor DMA mapped    2. A zero-sized MR is installed, which allows QEMU to fall back to the underlying MR which is configured with "vfio_bar_ops" MemoryRegionOps.    * The Guest can access the BAR thanks to 2.   - Unpatched QEMU, device _with_ VFIO_REGION_INFO_FLAG_MMAP and BAR smaller than 4096:    1. The BAR is successfully mmap'ed (I verified that it's possible to access the device's BAR reading from the mapped region on the Host).    2. A BAR-sized MR is installed, preventing QEMU from falling back to "vfio_bar_ops".    3. A DMA map will _not_ be requested in vfio_listener_region_add, as it's explained in this BZ description.    * As a consequence of 2 and 3, the BAR is not accessible from the Guest.  Sergio.   ```  [Comment 6](show_bug.cgi?id=1511802#c6)  Alex Williamson    2017-11-14 23:31:12 UTC  ``` (In reply to Sergio Lopez from [comment #4](show_bug.cgi?id=1511802#c4)) > Hi Alex, >  > (In reply to Alex Williamson from [comment #2](show_bug.cgi?id=1511802#c2)) > > The sub-page mmap is thus excluded as it was prior to the kernel change.  > > Also note that the issue is with the mmap, not with the DMA map.  Prior to > > the kernel change or with the above fix, the region is not DMA mapped and > > the VM works well.  DMA mapping only enables the possibility of peer-to-peer > > DMA between devices, the vCPU has full access to the region.  I believe it's > > the sizing of the region which resolves the problem in the proposed fix, > > which also happens to enable it to be DMA mapped, but the DMA mapping is not > > actually the fix. >  > Hum... that doesn't match my observations: >  >  - Unpatched QEMU, device _without_ VFIO_REGION_INFO_FLAG_MMAP >    1. The BAR is not mmap'ed nor DMA mapped >    2. A zero-sized MR is installed, which allows QEMU to fall back to the > underlying MR which is configured with "vfio_bar_ops" MemoryRegionOps. >    * The Guest can access the BAR thanks to 2. >  >  - Unpatched QEMU, device _with_ VFIO_REGION_INFO_FLAG_MMAP and BAR smaller > than 4096: >    1. The BAR is successfully mmap'ed (I verified that it's possible to > access the device's BAR reading from the mapped region on the Host). >    2. A BAR-sized MR is installed, preventing QEMU from falling back to > "vfio_bar_ops". >    3. A DMA map will _not_ be requested in vfio_listener_region_add, as it's > explained in this BZ description. >    * As a consequence of 2 and 3, the BAR is not accessible from the Guest.  The point is that 3 is actually irrelevant.  That step is missing in the first example and the device still works.  The problem is at step 2 in this latter example, the MemoryRegion is BAR sized and with the patch applied it's expanded out to a full page size (the BAR in question is 1k).  If we take a simple example QEMU instance:  /usr/libexec/qemu-kvm -m 2G -net none -vga none -nographic -serial none -device vfio-pci,host=8:00.1 -monitor stdio  Where 8:00.1 is:  08:00.1 USB controller: Teradici Corp. Device 2200 (prog-if 20 [EHCI]) 	Subsystem: Teradici Corp. Device 2200 	Physical Slot: 5 	Flags: fast devsel, IRQ 16, NUMA node 0 	Memory at ef908000 (64-bit, non-prefetchable) [size=1K] 	Capabilities: [80] Power Management version 3 	Capabilities: [90] MSI: Enable- Count=1/1 Maskable- 64bit+ 	Capabilities: [c0] Express Endpoint, MSI 00 	Kernel driver in use: vfio-pci 	Kernel modules: snd_hda_intel  In the monitor we can see the mappings of the device:  (qemu) info mtree   ...   00000000febff000-00000000febff3ff (prio 1, RW): VFIO 0000:08:00.1 BAR 0     00000000febff000-00000000febff3ff (prio 0, RW): VFIO 0000:08:00.1 BAR 0 mmap  So let's try to read from the device:  (qemu) xp /32x 0xfebff000 00000000febff000: 0xf000ff53 0xf000ff53 0xf000e2c3 0xf000ff53 00000000febff010: 0xf000ff53 0xf000ff54 0xf000ff53 0xf000ff53 00000000febff020: 0xf000fea5 0xf000e987 0xf000ef4b 0xf000ef4b 00000000febff030: 0xf000ef4b 0xf000ef4b 0xf000ef57 0xf000ef4b 00000000febff040: 0xf000f065 0xf000f84d 0xf000f841 0xf000e3fe 00000000febff050: 0xc200e739 0xf000f059 0xf000e82e 0xf000efd2 00000000febff060: 0x0000d75c 0xf0000000 0xf000fe6e 0xf000ff53 00000000febff070: 0xf000ff53 0xf000ff53 0xf0007774 0xf000ff53  Is that good or bad?  Let's disable the mmap for this BAR and re-check:  (qemu) info mtree   ...   00000000febff000-00000000febff3ff (prio 1, RW): VFIO 0000:08:00.1 BAR 0     00000000febff000-00000000febfefff (prio 0, RW): VFIO 0000:08:00.1 BAR 0 mmap  Here we see the zero size mmap (appears -1 sized), but reading from the device:  (qemu) xp /32x 0xfebff000 00000000febff000: 0x01000014 0x00001414 0x00000086 0x00000000 00000000febff010: 0x00000000 0x00080b00 0x00001008 0x00000000 00000000febff020: 0x00000df8 0x00000000 0x7fffd000 0x7fffcf00 00000000febff030: 0x00000000 0x00000000 0x00000000 0x00000000 00000000febff040: 0x00000000 0x00000000 0x00000000 0x00000000 00000000febff050: 0x00000000 0x00000001 0x00001000 0x00001000 00000000febff060: 0x00001000 0x00001000 0x00000000 0x00000000 00000000febff070: 0x00000000 0x00000000 0x00000000 0x00000000  We know this latter VM boots, so we can infer that we're correctly reading from the device here.  Testing again with qemu-kvm-rhev, we get:  (qemu) info mtree       ...       00000000febff000-00000000febfffff (prio 0, i/o): 0000:08:00.1 BAR 0         00000000febff000-00000000febfffff (prio 0, ramd): 0000:08:00.1 BAR 0 mmaps[0]  So we can see that the BAR is expanded from 1K to 4K and is fully covered by an mmap, and now:  (qemu) xp /32x 0xfebff000 00000000febff000: 0x01000014 0x01000014 0x00000086 0x00000086 00000000febff010: 0x00000000 0x00000000 0x00001008 0x00001008 00000000febff020: 0x00002adb 0x00002adb 0x7ffdf000 0x7ffdf000 00000000febff030: 0x00000000 0x00000000 0x00000000 0x00000000 00000000febff040: 0x00000000 0x00000000 0x00000000 0x00000000 00000000febff050: 0x00000000 0x00000000 0x00001000 0x00001000 00000000febff060: 0x00001000 0x00001000 0x00000000 0x00000000 00000000febff070: 0x00000000 0x00000000 0x00000000 0x00000000  The data changes since we reading from the device, but the format matches the working case, and of course this case also works.  These cases are the CPU reading from the device.  DMA mapping only comes into play for access initiated by the device.  So bumping the BAR up to 4k does allow the DMA mapping, but that doesn't play a role in the examples above for CPU reads from the device, which is where SeaBIOS is failing.  DMA mapping device MMIO space is only relevant for peer-to-peer between devices, which is almost never used.  DMA mapping of VM RAM is the key factor that is unchanged in any of these cases.   ```  [Comment 10](show_bug.cgi?id=1511802#c10)  Sergio Lopez    2017-11-15 13:12:51 UTC  ``` (In reply to Alex Williamson from [comment #6](show_bug.cgi?id=1511802#c6)) > These cases are the CPU reading from the device.  DMA mapping only comes > into play for access initiated by the device.  So bumping the BAR up to 4k > does allow the DMA mapping, but that doesn't play a role in the examples > above for CPU reads from the device, which is where SeaBIOS is failing.  DMA > mapping device MMIO space is only relevant for peer-to-peer between devices, > which is almost never used.  DMA mapping of VM RAM is the key factor that is > unchanged in any of these cases.  As expected from the VFIO maintainer, you're definitely right ;-)  I did a quick test with the patch but commenting out the VFIO_IOMMU_MAP_DMA ioctl call, and the guest is still able to access the BAR.  But I still couldn't understand why using a smaller than a page size for the mmap and the MR resulted in the guest not being able to reach the BAR, so I kept digging.  Turns out that, in qemu-kvm 1.5.3, there's a bug with exec.c:subpage subsystem when dealing with a MR where mr->ram == true. These are my observations:   1. Patched QEMU + BAR size == 4096 + VFIO_REGION_INFO_FLAG_MMAP:    - Guest reads from BAR: address_space_rw -> qemu_get_ram_ptr    - Works as expected   2. Patched QEMU + BAR size == 1024 + !(VFIO_REGION_INFO_FLAG_MMAP):    - Guest reads from BAR: address_space_rw -> io_mem_read -> subpage_read -> io_mem_read -> vfio_bar_read    - Works as expected   3. Patched QEMU + BAR size == 1024 + VFIO_REGION_INFO_FLAG_MMAP:    - Guest reads from BAR: address_space_rw -> io_mem_read -> subpage_read -> io_mem_read -> subpage_ram_read -> qemu_get_ram_ptr    - Reads from a bogus address  The behavior in (3) happens because:  exec.c: 1621 static uint64_t subpage_read(void *opaque, hwaddr addr, 1622                              unsigned len) 1623 { (...)  1632     section = &mmio->as->dispatch->map.sections[mmio->sub_section[idx]];           // addr == 0x0          // mmio->base == 0xfebff000 1633     addr += mmio->base;           // section->offset_within_address_space == 0xfebff000 1634     addr -= section->offset_within_address_space;           // section->offset_within_address_space == 0 1635     addr += section->offset_within_region;           // addr == 0x0 1636     return io_mem_read(section->mr, addr, len); 1637 }   exec.c: 1664 static uint64_t subpage_ram_read(void *opaque, hwaddr addr, 1665                                  unsigned size) 1666 { 1667     ram_addr_t raddr = addr;          // addr == raddr == 0x0 1668     void *ptr = qemu_get_ram_ptr(raddr); 1669     switch (size) { 1670     case 1: return ldub_p(ptr); 1671     case 2: return lduw_p(ptr); 1672     case 4: return ldl_p(ptr); 1673     default: abort(); 1674     } 1675 }   So subpage_read() assumes the next mr->ops->read will deal with a relative "addr", while subpage_ram_read() needs an abolute one, resulting in qemu_get_ram_ptr() obtaining a pointer to a different location.  And that's the reason why SeaBIOS acted weird, hanging or rebooting when USB EHCI support was enabled, because each write it did was hitting an arbitrary location (IDT?).  I've stopped investigating the problem with subpage_ram_read(), because this function it's not even present in qemu-kvm-rhev, but perhaps it'd be worth keeping this in mind in case something weird happens in the future (I was about to suggest to abort() in subpage_register if mr->ram == true, but that'd probably be an overkill).   ```  [Comment 22](show_bug.cgi?id=1511802#c22)  Yanan Fu    2017-12-07 12:21:50 UTC  ``` Reproduce this bz successfully, and it is ok with qemu-kvm-1.5.3-149.el7  Test steps: 1. Unbind one EHCI device from host, and bind to vfio-pci. #lspci | grep "USB Enhanced" 00:1a.0 USB controller: Intel Corporation C610/X99 series chipset USB Enhanced Host Controller #2 (rev 05) 00:1d.0 USB controller: Intel Corporation C610/X99 series chipset USB Enhanced Host Controller #1 (rev 05)  Choose "00:1a.0". # readlink /sys/bus/pci/devices/0000\:00\:1a.0/iommu_group ../../../kernel/iommu_groups/10 # ls /sys/kernel/iommu_groups/10/devices/ 0000:00:1a.0  ---> iommu group 10 only have one device, it is ok for testing.   Unbind it from host and bind it vfio-pci. #ll /sys/bus/pci/devices/0000\:00\:1a.0/driver lrwxrwxrwx. 1 root root 0 Nov 29 04:19 /sys/bus/pci/devices/0000:00:1a.0/driver -> ../../../bus/pci/drivers/vfio-pci  2. Boot VM with this passthrough device: -device vfio-pci,host=00:1a.0,id=ehci \  3. Connect to VM and check the status of the VM.  ----------------Reproduce-------------- Test version: qemu: qemu-kvm-1.5.3-145.el7 kernel: kernel-3.10.0-797.el7.x86_64  Test result: Guest stuck at "Press ESC for boot menu" (i add "-boot menu=on in the command line"), without "-boot menu=on", guest stuck at "ipxe(hrrp://ipxe.org)...."  when i boot without the pass through EHCI device, guest work well.   ----------------Verification-------------- Test version: qemu: qemu-kvm-1.5.3-149.el7 kernel: kernel-3.10.0-797.el7.x86_64   Test result: Guest can boot up normally, reboot, shutdown and hot-plug/unplug the pass through device several times, no problem.   Move to VERIFIED accordingly.   ```  [Comment 23](show_bug.cgi?id=1511802#c23)  Alex Williamson    2017-12-11 16:07:55 UTC  ``` Jiri, DMA is relevant to memory reads and writes initiated by the device.  That's not the problem here.  The problem was with processor access to memory mapped BARs, specifically BARs which are smaller than the system page size.  The mapping of processor accesses to these regions was incorrect.   ```  [Comment 28](show_bug.cgi?id=1511802#c28)  errata-xmlrpc    2018-04-10 14:38:15 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  [https://access.redhat.com/errata/RHSA-2018:0816](https://access.redhat.com/errata/RHSA-2018%3A0816)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1511802&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugs.launchpad.net_dbada01e_20250126_122954.html ===

[Log in / Register](https://bugs.launchpad.net/qemu/%2Bbug/1718964/%2Blogin)

[![](https://launchpadlibrarian.net/27372372/qemu_64.png)](https://launchpad.net/qemu)

## [QEMU](https://launchpad.net/qemu)

* [Overview](https://launchpad.net/qemu)
* [Code](https://code.launchpad.net/qemu)
* [Bugs](https://bugs.launchpad.net/qemu)
* [Blueprints](https://blueprints.launchpad.net/qemu)
* [Translations](https://translations.launchpad.net/qemu)
* [Answers](https://answers.launchpad.net/qemu)

# Memory leak when using websocket over a low speed network

Bug #1718964 reported by
[Carl Brassey](https://launchpad.net/~carl.brassey)
on 2017-09-22

[20](/%2Bhelp-bugs/bug-heat.html)

This bug affects 3 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [QEMU](https://bugs.launchpad.net/qemu) | Fix Released | Undecided | [Daniel Berrange](https://launchpad.net/~berrange) |  |

### Bug Description

Description of problem

-------------------------

When VNC is connected to QEMU via websocket over a low speed network (e.g. 300KB/S Wide Area Network), and there is a lot of frame buffer update, the VNC Client will get stuck, the cursor is almost impossible to move, which may result in accumulation of a large number of data in the QEMU process (memory consumption will keep increasing).

Environment

-------------------------

All of the following versions have been tested:

QEMU: 2.5.1 / 2.6.0 / 2.8.1.1 / 2.9.0 / 2.10.0

Host OS: Ubuntu 16.04 Server LTS / CentOS 7 x86\_64\_1611

Guest OS: Windows 7 64bit / Ubuntu 16.04 Desktop LTS

Client OS: Windows 7 64bit / Windows 10 64bit

Client Browser: IE 11.0.9600 / Chrome 60.0.3112 / Firefox 55.0.2

VNC Client: TigerVNC Viewer 1.8 / UltraVNC Viewer 1.2.1.5 / TightVNC Viewer 2.8.8

VNC Web Client: noVNC 0.5.1 / noVNC 0.61 / noVNC 0.62

VNC Server: TigerVNC 1.8 / x11vnc 0.9.13 / TightVNC 2.8.8

VNC Client: TigerVNC Viewer 1.8 / UltraVNC Viewer 1.2.1.5 / TightVNC Viewer 2.8.8

Steps to reproduce:

-------------------------

100% reproducible.

1. Launch a QEMU instance with websocket option:

qemu-system-x86\_64 -enable-kvm -m 6G ./win\_x64.qcow2 -vnc :1,websocket=5701

2. Open VNC Web Client (noVNC/vnc.html) in browser and connect to QEMU VM via websocket

3. Play a video (e.g. Watch YouTube) on VM (To produce a lot of frame buffer update)

4. Limit (e.g. Use NetLimiter) the client inbound bandwidth to 300KB/S (To simulate a low speed WAN)

5. Then client's output gets stuck(less than 1 fps), the cursor is almost impossible to move

6. Observe QEMU process on the host, more and more data are accumulated in the process, the consumption of memory continues to keep increasing

Current result:

-------------------------

[Top - Initial status]

  PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND

 2725 root 20 0 7229144 5.910g 23024 S 16.3 18.9 0:12.84 qemu-system-x86\_64

[Top - After an hour's playing w/o limit (6-8MB/S)]

  PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND

 2725 root 20 0 7370284 6.046g 23132 S 28.0 19.3 35:58.15 qemu-system-x86\_64

[Top - Limit the bandwidth and continue to playing for another an hour (300KB/S)]

  PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND

 2725 root 20 0 11.029g 8.853g 23132 S 20.0 28.2 72:14.17 qemu-system-x86\_64

Also test several other combinations in the same environment:

1. Client(VNC Viewer) - Server(QEMU)

2. Client(VNC Viewer) - Server(tigervnc/x11vnc/tightvnc)

3. Client(noVNC) - Server(tigervnc/x11vnc/tightvnc)

Likewise, the client's inbound bandwidth is limited to 300KB/S,

although a lot of frame are lost, all of they still works (at least the mouse is movable).

It's found that when connect to QEMU via websocket, it never drop any frames.

QEMU still sends a lot of data to its websocket even when the network is congested,

the process is continually consuming more memory, then it gets stack.

Expected results:

-------------------------

When the network is poor (non-LAN), QEMU would reduce the VNC data send to its websocket correspondingly, and the memory usage remains stable.

## CVE References

* [2017-15268](/bugs/cve/2017-15268 "Qemu through 2.10.0 allows remote att...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel Berrange (berrange)](https://launchpad.net/~berrange) wrote on 2017-10-02: |  |  | [#1](/qemu/%2Bbug/1718964/comments/1) |
| --- | --- | --- | --- |

Thanks for your report. I've not tried reproducing yet, but from the looking at the code I think I can see why this happens. Code in vnc\_update\_client discards incoming frame updates from the guest if the output buffer has data pending in it, but it only checks the main VNC server output buffer usage. It fails to check the websockets output buffer usage.

Thanks for your report. I've not tried reproducing yet, but from the looking at the code I think I can see why this happens. Code in vnc\_update\_client discards incoming frame updates from the guest if the output buffer has data pending in it, but it only checks the main VNC server output buffer usage. It fails to check the websockets output buffer usage.

| Changed in qemu: | |
| --- | --- |
| **assignee**: | nobody → Daniel Berrange (berrange) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel Berrange (berrange)](https://launchpad.net/~berrange) wrote on 2017-10-10: |  |  | [#2](/qemu/%2Bbug/1718964/comments/2) |
| --- | --- | --- | --- |

In the modern code this needs fixing in the io/channel-websock.c impl - it is checking the output buffer limit against the wrong buffer - it uses 'rawoutput' instead of 'encoutput', so this fix is easy enough there.

The code is in fact broken all the way back to day1 of the introduction of websockets support though in QEMU 1.2.1 In the historical code it can be fixed by checking ws\_output.offset in vnc\_update\_client as I mentioned previously

In the modern code this needs fixing in the io/channel-websock.c impl - it is checking the output buffer limit against the wrong buffer - it uses 'rawoutput' instead of 'encoutput', so this fix is easy enough there.
The code is in fact broken all the way back to day1 of the introduction of websockets support though in QEMU 1.2.1 In the historical code it can be fixed by checking ws\_output.offset in vnc\_update\_client as I mentioned previously

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [lynncn (lynncn)](https://launchpad.net/~lynncn) wrote on 2017-10-10: |  |  | [#3](/qemu/%2Bbug/1718964/comments/3) |
| --- | --- | --- | --- |

We are experiencing the same problem.

At first, we thought the bug is in QEMU's websocket code then we tried using a standalone websocket proxy (websockify). Unfortunately, problems persisted.

We also tried various other VNC servers (with websockify), all of them work fine. It seems that the issue is specific to QEMU.

We are experiencing the same problem.
At first, we thought the bug is in QEMU's websocket code then we tried using a standalone websocket proxy (websockify). Unfortunately, problems persisted.
We also tried various other VNC servers (with websockify), all of them work fine. It seems that the issue is specific to QEMU.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel Berrange (berrange)](https://launchpad.net/~berrange) wrote on 2017-10-12: |  |  | [#4](/qemu/%2Bbug/1718964/comments/4) |
| --- | --- | --- | --- |

This has been assigned CVE-2017-15268

<http://www.openwall.com/lists/oss-security/2017/10/12/4>

This has been assigned CVE-2017-15268
http://www.openwall.com/lists/oss-security/2017/10/12/4

[Daniel Berrange (berrange)](https://launchpad.net/~berrange)
on 2017-10-17

| Changed in qemu: | |
| --- | --- |
| **status**: | New → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel Berrange (berrange)](https://launchpad.net/~berrange) wrote on 2017-10-17: |  |  | [#5](/qemu/%2Bbug/1718964/comments/5) |
| --- | --- | --- | --- |

commit a7b20a8efa28e5f22c26c06cd06c2f12bc863493

Author: Daniel P. Berrange <email address hidden>

Date: Mon Oct 9 14:43:42 2017 +0100

io: monitor encoutput buffer size from websocket GSource

The websocket GSource is monitoring the size of the rawoutput

    buffer to determine if the channel can accepts more writes.

    The rawoutput buffer, however, is merely a temporary staging

    buffer before data is copied into the encoutput buffer. Thus

    its size will always be zero when the GSource runs.

This flaw causes the encoutput buffer to grow without bound

    if the other end of the underlying data channel doesn't

    read data being sent. This can be seen with VNC if a client

    is on a slow WAN link and the guest OS is sending many screen

    updates. A malicious VNC client can act like it is on a slow

    link by playing a video in the guest and then reading data

    very slowly, causing QEMU host memory to expand arbitrarily.

This issue is assigned CVE-2017-15268, publically reported in

[https://bugs.launchpad.net/qemu/+bug/1718964](https://bugs.launchpad.net/qemu/%2Bbug/1718964)

Reviewed-by: Eric Blake <email address hidden>

    Signed-off-by: Daniel P. Berrange <email address hidden>

commit a7b20a8efa28e5f22c26c06cd06c2f12bc863493
Author: Daniel P. Berrange <berrange@redhat.com>
Date: Mon Oct 9 14:43:42 2017 +0100
io: monitor encoutput buffer size from websocket GSource
The websocket GSource is monitoring the size of the rawoutput
buffer to determine if the channel can accepts more writes.
The rawoutput buffer, however, is merely a temporary staging
buffer before data is copied into the encoutput buffer. Thus
its size will always be zero when the GSource runs.
This flaw causes the encoutput buffer to grow without bound
if the other end of the underlying data channel doesn't
read data being sent. This can be seen with VNC if a client
is on a slow WAN link and the guest OS is sending many screen
updates. A malicious VNC client can act like it is on a slow
link by playing a video in the guest and then reading data
very slowly, causing QEMU host memory to expand arbitrarily.
This issue is assigned CVE-2017-15268, publically reported in
https://bugs.launchpad.net/qemu/+bug/1718964
Reviewed-by: Eric Blake <eblake@redhat.com>
Signed-off-by: Daniel P. Berrange <berrange@redhat.com>

[Thomas Huth (th-huth)](https://launchpad.net/~th-huth)
on 2017-12-15

| Changed in qemu: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[See full activity log](https://bugs.launchpad.net/qemu/%2Bbug/1718964/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/qemu/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

You are
[not directly subscribed to this bug's notifications.](/qemu/%2Bbug/1718964/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/qemu/%2Bbug/1718964/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/qemu/%2Bbug/1718964/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugzilla.redhat.com_6031c28b_20250126_122933.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1494181)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1494181)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1494181)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1494181

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

RHEL Engineering is moving the tracking of its product development work on RHEL 6 through RHEL 9 to Red Hat Jira ([**issues.redhat.com**](https://issues.redhat.com)). If you're a Red Hat customer, please continue to file support cases via the [**Red Hat customer portal**](https://access.redhat.com/support/cases/). If you're not, please head to the "[**RHEL project**](https://issues.redhat.com/projects/RHEL)" in Red Hat Jira and file new tickets here. Individual Bugzilla bugs in the statuses "**NEW**", "**ASSIGNED**", and "**POST**" are being migrated throughout September 2023. Bugs of Red Hat partners with an assigned Engineering Partner Manager (EPM) are migrated in late September as per pre-agreed dates. Bugs against components "**kernel**", "**kernel-rt**", and "**kpatch**" are only migrated if still in "**NEW**" or "**ASSIGNED**". If you cannot log in to RH Jira, please consult [**article #7032570**](https://access.redhat.com/articles/7032570). That failing, please send an e-mail to the RH Jira admins at **rh-issues@redhat.com** to troubleshoot your issue as a user management inquiry. The email creates a ServiceNow ticket with Red Hat. Individual Bugzilla bugs that are migrated will be moved to status "**CLOSED**", resolution "**MIGRATED**", and set with "**MigratedToJIRA**" in "**Keywords**". The link to the successor Jira issue will be found under "**Links**", have a little "two-footprint" icon next to it, and direct you to the "[**RHEL project**](https://issues.redhat.com/projects/RHEL)" in Red Hat Jira (issue links are of type "**https://issues.redhat.com/browse/RHEL-XXXX**", where "**X**" is a digit). This same link will be available in a blue banner at the top of the page informing you that that bug has been migrated.

[**Bug 1494181**](show_bug.cgi?id=1494181)
- Backport vGPU support to qemu-kvm

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
Backport vGPU support to qemu-kvm

| | [Keywords](describekeywords.cgi): | FutureFeature | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat Enterprise Linux 7 | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat Enterprise Linux 7 "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | qemu-kvm | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 7.5 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | x86\_64 | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | rc | | [Target Release](page.cgi?id=fields.html#target_release): | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Alex Williamson | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Guo, Zhiyi | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1528122](show_bug.cgi?id=1528122) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1449793](show_bug.cgi?id=1449793) [1461180](show_bug.cgi?id=1461180) [1471872](show_bug.cgi?id=1471872) [1511802](show_bug.cgi?id=1511802 "CLOSED ERRATA - Regression in QEMU handling for sub-page MMIO BARs for vfio-pci devices") [1522983](show_bug.cgi?id=1522983) | | TreeView+ | [depends on](buglist.cgi?bug_id=1494181&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1494181&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2017-09-21 15:31 UTC by Martin Tessun | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-10-06 17:39 UTC ([History](show_activity.cgi?id=1494181)) | | [CC List:](page.cgi?id=fields.html#cclist) | 15 users (show)  chayang gordon.jin hang.yuan jinzhao jkachuck juzhang knoel michen mkalinin mtessun rbalakri terrence.xu virt-maint zhguo zhiyuan.lv | | Fixed In Version: | qemu-kvm-1.5.3-146.el7 | | | Doc Type: | Enhancement | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2018-04-10 14:35:07 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Knowledge Base (Solution) | [3221241](https://access.redhat.com/solutions/3221241) | 0 | None | None | None | 2017-10-20 18:18:09 UTC | | Red Hat Product Errata | [RHSA-2018:0816](https://access.redhat.com/errata/RHSA-2018%3A0816) | 0 | normal | SHIPPED\_LIVE | Low: qemu-kvm security, bug fix, and enhancement update | 2018-04-10 12:47:03 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1494181#c0)  Martin Tessun    2017-09-21 15:31:50 UTC  ``` NVIDIA asked for enabling vGPU support also in RHEL/KVM. This BZ is for evaluating and tracking this effort.   ```  [Comment 6](show_bug.cgi?id=1494181#c6)  Miroslav Rezanina    2017-10-24 04:41:09 UTC  ``` Fix included in qemu-kvm-1.5.3-146.el7   ```  [Comment 9](show_bug.cgi?id=1494181#c9)  Guo, Zhiyi    2018-01-26 03:27:49 UTC  ``` QE perform a test run against qemu-kvm-1.5.3-154 and rhel7.5 guest  vgpu type used: M60-8Q M60-4Q M60-2A   <https://polarion.engineering.redhat.com/polarion/#/project/RedHatEnterpriseLinux7/testrun?id=virtkvmqe-x86-vgpu-M60-qemu-kvm-1-5-3-154-rhel75>  No block issue found during test, one one issue found during use qemu + vgpu + sr-iov, and it has been tracked by [Bug 1538866](show_bug.cgi?id=1538866 "CLOSED ERRATA - qemu will coredump after executing info qtree") qemu will coredump after executing info qtree   ```  [Comment 10](show_bug.cgi?id=1494181#c10)  Guo, Zhiyi    2018-01-26 03:28:49 UTC  ``` Host/Guest kernel used: 3.10.0-836.el7.x86_64 Host/Guest nvidia vgpu driver used: 390.21   ```  [Comment 11](show_bug.cgi?id=1494181#c11)  Guo, Zhiyi    2018-01-26 03:29:24 UTC  ``` Verified per [comment 9](show_bug.cgi?id=1494181#c9) & 10   ```  [Comment 15](show_bug.cgi?id=1494181#c15)  errata-xmlrpc    2018-04-10 14:35:07 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  [https://access.redhat.com/errata/RHSA-2018:0816](https://access.redhat.com/errata/RHSA-2018%3A0816)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1494181&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugzilla.redhat.com_86424226_20250126_122947.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1497120)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1497120)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1497120)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1497120

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

RHEL Engineering is moving the tracking of its product development work on RHEL 6 through RHEL 9 to Red Hat Jira ([**issues.redhat.com**](https://issues.redhat.com)). If you're a Red Hat customer, please continue to file support cases via the [**Red Hat customer portal**](https://access.redhat.com/support/cases/). If you're not, please head to the "[**RHEL project**](https://issues.redhat.com/projects/RHEL)" in Red Hat Jira and file new tickets here. Individual Bugzilla bugs in the statuses "**NEW**", "**ASSIGNED**", and "**POST**" are being migrated throughout September 2023. Bugs of Red Hat partners with an assigned Engineering Partner Manager (EPM) are migrated in late September as per pre-agreed dates. Bugs against components "**kernel**", "**kernel-rt**", and "**kpatch**" are only migrated if still in "**NEW**" or "**ASSIGNED**". If you cannot log in to RH Jira, please consult [**article #7032570**](https://access.redhat.com/articles/7032570). That failing, please send an e-mail to the RH Jira admins at **rh-issues@redhat.com** to troubleshoot your issue as a user management inquiry. The email creates a ServiceNow ticket with Red Hat. Individual Bugzilla bugs that are migrated will be moved to status "**CLOSED**", resolution "**MIGRATED**", and set with "**MigratedToJIRA**" in "**Keywords**". The link to the successor Jira issue will be found under "**Links**", have a little "two-footprint" icon next to it, and direct you to the "[**RHEL project**](https://issues.redhat.com/projects/RHEL)" in Red Hat Jira (issue links are of type "**https://issues.redhat.com/browse/RHEL-XXXX**", where "**X**" is a digit). This same link will be available in a blue banner at the top of the page informing you that that bug has been migrated.

[**Bug 1497120**](show_bug.cgi?id=1497120)
- migration+new block migration race: bdrv\_co\_do\_pwritev: Assertion `!(bs->open\_flags & 0x0800)' failed

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
migration+new block migration race: bdrv\_co\_do\_pwritev: Assertion `!(bs->open...

| | [Keywords](describekeywords.cgi): |  | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat Enterprise Linux 7 | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat Enterprise Linux 7 "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | qemu-kvm-rhev | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 7.5 | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | unspecified | | [Severity:](page.cgi?id=fields.html#bug_severity) | unspecified | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | rc | | [Target Release](page.cgi?id=fields.html#target_release): | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Dr. David Alan Gilbert | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | xianwang | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1506494](show_bug.cgi?id=1506494 "CLOSED ERRATA - Use pause-before-switchover migration capability") | | TreeView+ | [depends on](buglist.cgi?bug_id=1497120&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1497120&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2017-09-29 08:57 UTC by Dr. David Alan Gilbert | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2018-04-11 00:37 UTC ([History](show_activity.cgi?id=1497120)) | | [CC List:](page.cgi?id=fields.html#cclist) | 12 users (show)  chayang dgilbert juzhang kchamart knoel michen mrezanin qizhu qzhang virt-maint xfu xianwang | | Fixed In Version: | qemu-kvm-rhev-2.10.0-4.el7 | | | Doc Type: | If docs needed, set a value | | | Doc Text: |  | | | Clone Of: |  | | | Clones: | [1506494](show_bug.cgi?id=1506494 "CLOSED ERRATA - Use pause-before-switchover migration capability")  ([view as bug list](buglist.cgi?bug_id=1506494)) | | | Environment: |  | | | Last Closed: | 2018-04-11 00:36:03 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | | [**Raw QMP test procedure with NBD-based migration with 'pause-before-switchover'**](attachment.cgi?id=1352558 "View the content of the attachment") (6.46 KB, text/plain)  [2017-11-15 11:38 UTC](#attach_1352558 "Go to the comment associated with the attachment"), Kashyap Chamarthy | *no flags* | [Details](attachment.cgi?id=1352558&action=edit) | | [View All](attachment.cgi?bugid=1497120&action=viewall) | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2018:1104](https://access.redhat.com/errata/RHSA-2018%3A1104) | 0 | None | None | None | 2018-04-11 00:37:49 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1497120#c0)  Dr. David Alan Gilbert    2017-09-29 08:57:13 UTC  ``` Description of problem: There's a race between the end of migration (and it inactivating disks) and the end of drive-mirroring that can lead to a fatal assert of the source. It seems rare to trigger, but the theory is that it happens if there's write activity right near the end of migration as we stop the CPUs then those writes will take a little time to bubble through the drive-mirror, but if we hit the end of the migration code before then we end up calling bdrv_inactivate_all before those writes are done.  Version-Release number of selected component (if applicable): Found upstream on >2.10, [bz 1456086](show_bug.cgi?id=1456086 "CLOSED INSUFFICIENT_DATA - Random SIGABRT when migrate from 7.4 to 7.3 !(bs->open_flags & 0x0800)") might be this and hit it on 2.9  How reproducible: Reported upstream, possible we've seen it once  Steps to Reproduce: 1. Not yet known 2. 3.  Actual results: Source crashes with bdrv_co_do_pwritev: Assertion `!(bs->open_flags & 0x0800)' failed  Expected results: A successful migration  Additional info: This was reported upstream by wangjie88 but could have also been [https://bugzilla.redhat.com/show_bug.cgi?id=1456086](show_bug.cgi?id=1456086 "CLOSED INSUFFICIENT_DATA - Random SIGABRT when migrate from 7.4 to 7.3 !(bs->open_flags & 0x0800)")  which was closed because we didn't find a way to reproduce it  Current discussions with kwolf are that we're going to need some changes at the visible interface to libvirt to fix this; e.g. a new migration state and extra command.   ```  [Comment 1](show_bug.cgi?id=1497120#c1)  Dr. David Alan Gilbert    2017-10-20 09:47:45 UTC  ``` This seems to have settled out OK upstream; see todays:    [PATCH v4 0/7] migration: pause-before-switchover   ```  [Comment 2](show_bug.cgi?id=1497120#c2)  Dr. David Alan Gilbert    2017-10-25 16:25:54 UTC  ``` upstream commits 93fbd0314ec060ffaf90..0331c8cabf6168aa263a   ```  [Comment 4](show_bug.cgi?id=1497120#c4)  Miroslav Rezanina    2017-11-02 10:09:35 UTC  ``` Fix included in qemu-kvm-rhev-2.10.0-4.el7   ```  [Comment 6](show_bug.cgi?id=1497120#c6)  xianwang    2017-11-06 08:27:59 UTC  ``` Hi, Dave, I have found some information about your patch, that in this link: <http://patchwork.ozlabs.org/cover/827760/> there is two work flow as said in this link, The precopy flow is: active->pre-switchover->device->completed  The postcopy flow is: active->pre-switchover->postcopy-active->completed  But I didn't know the detail test steps for this bug, could you give me the detail test steps and expected results for these two scenarios? thanks   ```  [Comment 7](show_bug.cgi?id=1497120#c7)  xianwang    2017-11-14 08:19:22 UTC  ``` Hi, Dave and kwolf, according to my understand and referring to <http://patchwork.ozlabs.org/cover/827760/>, the following is my test steps for this scenario, could you help to review whether this bug could be verified as following steps, thanks: version: Host: 3.10.0-776.el7.ppc64le qemu-kvm-rhev-2.10.0-5.el7.ppc64le SLOF-20170724-2.git89f519f.el7.noarch  Guest: 3.10.0-776.el7.ppc64  steps: 1.Boot a guest on src host with drive:     -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=/home/RHEL74_BE.qcow2 \     -device scsi-hd,id=image1,drive=drive_image1,bus=virtio_scsi_pci0.0,lun=0,bootindex=0 \     -qmp tcp:0:8881,server,nowait \ 2.Launch listening mode on dst host, with same qemu cli as src end but different disk:     -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=/home/mount_point/block.qcow2 \     -device scsi-hd,id=image1,drive=drive_image1,bus=virtio_scsi_pci0.0,lun=0,bootindex=0 \ 3.On src host, do drive-mirror job via qmp: {"execute":"qmp_capabilities"} { "execute": "drive-mirror", "arguments": { "device": "drive_image1", "target": "/home/block.qcow2", "format": "qcow2", "mode": "absolute-paths", "sync": "full", "on-source-error": "stop", "on-target-error": "stop"} } after a while, block job becomes ready automatically: {"timestamp": {"seconds": 1510641851, "microseconds": 178028}, "event": "BLOCK_JOB_READY", "data": {"device": "drive_image1", "len": 10142023680, "offset": 10142023680, "speed": 0, "type": "mirror"}} 4.In guest, execute "stress": # stress --cpu 4 --io 8 --vm 2 --vm-bytes 128M 5.On src host, do live migration with enabling "pause-before-switchover": (qemu) migrate_set_capability pause-before-switchover on (qemu) info migrate_capabilities  xbzrle: off rdma-pin-all: off auto-converge: off zero-blocks: off compress: off events: off postcopy-ram: off x-colo: off release-ram: off return-path: off pause-before-switchover: on (qemu) migrate -d tcp:10.16.42.48:5801 (qemu) info migrate Migration status: active in order to make "migrate status" to "pre-switchover" quickly, I enlarge the value of "downtime" and "speed" (qemu) migrate_set_downtime 10 (qemu) migrate_set_speed 1G (qemu) info migrate Migration status: pre-switchover (qemu) info status  VM status: paused (finish-migrate) 6.On src host, do block-job-complete {"execute":"block-job-complete","arguments":{"device":"drive_image1"}} {"timestamp": {"seconds": 1510642464, "microseconds": 566489}, "event": "BLOCK_JOB_COMPLETED", "data": {"device": "drive_image1", "len": 10163388416, "offset": 10163388416, "speed": 0, "type": "mirror"}} 7.On src host (qemu) migrate_continue pre-switchover  Result: Block job and migration completed and vm works well. On src host: (qemu) info migrate globals: store-global-state=1, only_migratable=0, send-configuration=1, send-section-footer=1 capabilities: xbzrle: off rdma-pin-all: off auto-converge: off zero-blocks: off compress: off events: off postcopy-ram: off x-colo: off release-ram: off return-path: off pause-before-switchover: on  Migration status: completed (qemu) info status  VM status: paused (postmigrate)  On dst host: (qemu) info status  VM status: running  1)Due to after "block-job-complete", data will only write to target disk while live migration is in process, I don't know whether this steps are right, I just wonder if we don't execute "block-job-complete" before "migrate_continue pre-switchover", because once live migration complete and quit qemu of src end, block job would complete automatically.  2)For cancelling migration scenarios, which phases could cancel live migration? at least, during post-copy mode, migration can't be cancelled.  Thanks   ```  [Comment 8](show_bug.cgi?id=1497120#c8)  Dr. David Alan Gilbert    2017-11-14 10:49:07 UTC  ``` (In reply to xianwang from [comment #7](show_bug.cgi?id=1497120#c7)) > Hi, Dave and kwolf, > according to my understand and referring to > <http://patchwork.ozlabs.org/cover/827760/>, the following is my test steps > for this scenario, could you help to review whether this bug could be > verified as following steps, thanks: > version: > Host: > 3.10.0-776.el7.ppc64le > qemu-kvm-rhev-2.10.0-5.el7.ppc64le > SLOF-20170724-2.git89f519f.el7.noarch >  > Guest: > 3.10.0-776.el7.ppc64 >  > steps: > 1.Boot a guest on src host with drive: >     -drive > id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2, > file=/home/RHEL74_BE.qcow2 \ >     -device > scsi-hd,id=image1,drive=drive_image1,bus=virtio_scsi_pci0.0,lun=0, > bootindex=0 \ >     -qmp tcp:0:8881,server,nowait \ > 2.Launch listening mode on dst host, with same qemu cli as src end but > different disk: >     -drive > id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2, > file=/home/mount_point/block.qcow2 \ >     -device > scsi-hd,id=image1,drive=drive_image1,bus=virtio_scsi_pci0.0,lun=0, > bootindex=0 \ > 3.On src host, do drive-mirror job via qmp: > {"execute":"qmp_capabilities"} > { "execute": "drive-mirror", "arguments": { "device": "drive_image1", > "target": "/home/block.qcow2", "format": "qcow2", "mode": "absolute-paths", > "sync": "full", "on-source-error": "stop", "on-target-error": "stop"} } > after a while, block job becomes ready automatically: > {"timestamp": {"seconds": 1510641851, "microseconds": 178028}, "event": > "BLOCK_JOB_READY", "data": {"device": "drive_image1", "len": 10142023680, > "offset": 10142023680, "speed": 0, "type": "mirror"}}  I think that's probably the wrong way to do a drive-mirror; I was expecting to see an nbd-server setup with a mirror with that. See: <https://kashyapc.fedorapeople.org/QEMU-Docs/_build/html/docs/live-block-operations.html#qmp-invocation-for-live-storage-migration-with-drive-mirror-nbd>  (although you don't need any backing chain)  > 4.In guest, execute "stress": > # stress --cpu 4 --io 8 --vm 2 --vm-bytes 128M  I don't think you need much of a stress test for this; just the io stress side should be enough.  > 5.On src host, do live migration with enabling "pause-before-switchover": > (qemu) migrate_set_capability pause-before-switchover on > (qemu) info migrate_capabilities  > xbzrle: off > rdma-pin-all: off > auto-converge: off > zero-blocks: off > compress: off > events: off > postcopy-ram: off > x-colo: off > release-ram: off > return-path: off > pause-before-switchover: on > (qemu) migrate -d tcp:10.16.42.48:5801 > (qemu) info migrate > Migration status: active > in order to make "migrate status" to "pre-switchover" quickly, I enlarge the > value of "downtime" and "speed" > (qemu) migrate_set_downtime 10 > (qemu) migrate_set_speed 1G > (qemu) info migrate > Migration status: pre-switchover > (qemu) info status  > VM status: paused (finish-migrate)  That downtime is a bit long; if you're not running the full stress then you should be able to set that downtime to a more sensible .5  > 6.On src host, do block-job-complete > {"execute":"block-job-complete","arguments":{"device":"drive_image1"}} > {"timestamp": {"seconds": 1510642464, "microseconds": 566489}, "event": > "BLOCK_JOB_COMPLETED", "data": {"device": "drive_image1", "len": > 10163388416, "offset": 10163388416, "speed": 0, "type": "mirror"}}  Hmm is that right? Or do we need a block-job-cancel rather than complete for a migrate?  > 7.On src host > (qemu) migrate_continue pre-switchover >  > Result: > Block job and migration completed and vm works well. > On src host: > (qemu) info migrate > globals: store-global-state=1, only_migratable=0, send-configuration=1, > send-section-footer=1 > capabilities: xbzrle: off rdma-pin-all: off auto-converge: off zero-blocks: > off compress: off events: off postcopy-ram: off x-colo: off release-ram: off > return-path: off pause-before-switchover: on  > Migration status: completed > (qemu) info status  > VM status: paused (postmigrate) >  > On dst host: > (qemu) info status  > VM status: running >  > 1)Due to after "block-job-complete", data will only write to target disk > while live migration is in process, I don't know whether this steps are > right, I just wonder if we don't execute "block-job-complete" before > "migrate_continue pre-switchover", because once live migration complete and > quit qemu of src end, block job would complete automatically. >  We need to check this with kwolf.  > 2)For cancelling migration scenarios, which phases could cancel live > migration? > at least, during post-copy mode, migration can't be cancelled.  Yes, for the test above we should be checking cancel in precopy before and after it's entered the new pause state.  Dave >  > Thanks   ```  [Comment 9](show_bug.cgi?id=1497120#c9)  Kashyap Chamarthy    2017-11-14 14:23:57 UTC  ``` (In reply to Dr. David Alan Gilbert from [comment #8](show_bug.cgi?id=1497120#c8)) > (In reply to xianwang from [comment #7](show_bug.cgi?id=1497120#c7))  [...]  > > 3.On src host, do drive-mirror job via qmp: > > {"execute":"qmp_capabilities"} > > { "execute": "drive-mirror", "arguments": { "device": "drive_image1", > > "target": "/home/block.qcow2", "format": "qcow2", "mode": "absolute-paths", > > "sync": "full", "on-source-error": "stop", "on-target-error": "stop"} } > > after a while, block job becomes ready automatically: > > {"timestamp": {"seconds": 1510641851, "microseconds": 178028}, "event": > > "BLOCK_JOB_READY", "data": {"device": "drive_image1", "len": 10142023680, > > "offset": 10142023680, "speed": 0, "type": "mirror"}} >  > I think that's probably the wrong way to do a drive-mirror; I was expecting > to see an nbd-server setup with a mirror with that.  Yes, you're right.  NBD server setup is required indeed.  The below link does talk about it.  > See: > <https://kashyapc.fedorapeople.org/QEMU-Docs/_build/html/docs/live-block>- > operations.html#qmp-invocation-for-live-storage-migration-with-drive-mirror- > nbd >  > (although you don't need any backing chain)  [...]  > > 6.On src host, do block-job-complete > > {"execute":"block-job-complete","arguments":{"device":"drive_image1"}} > > {"timestamp": {"seconds": 1510642464, "microseconds": 566489}, "event": > > "BLOCK_JOB_COMPLETED", "data": {"device": "drive_image1", "len": > > 10163388416, "offset": 10163388416, "speed": 0, "type": "mirror"}} >  > Hmm is that right? Or do we need a block-job-cancel rather than complete for > a migrate?  Yes, `block-job-cancel` is what libvirt uses in its `drive-mirror` + NBD workflow.  While a ``drive-mirror` job is active, and it has issued a BLOCK_JOB_READY event, signalling that synchronization of source and destination has completed.  And you can take one of the two following action:    (1) By issuing `block-job-complete`, the synchronization will stop,       and live QEMU will be pivoted to the copy.  (Event:       BLOCK_JOB_COMPLETED)       (2) By issuing `block-job-cancel`, the synchronization will stop, but       live QEMU will NOT be pivoted to the copy.  But what you end up       with is a point-in-time (which is at the time of _triggering_ the       'cancel' command) copy.  (Event: BLOCK_JOB_CANCELLED)  In the NBD workflow, after `block-job-cancel`, you also stop the NBD server on the destination, by issuing QMP `nbd-server-stop`.   ```  [Comment 10](show_bug.cgi?id=1497120#c10)  Kashyap Chamarthy    2017-11-15 11:38:54 UTC  ``` Created [attachment 1352558](attachment.cgi?id=1352558 "Raw QMP test procedure with NBD-based migration with 'pause-before-switchover'") [[details]](attachment.cgi?id=1352558&action=edit "Raw QMP test procedure with NBD-based migration with 'pause-before-switchover'") Raw QMP test procedure with NBD-based migration with 'pause-before-switchover'  This was tested with upstream QEMU:  {     "QMP":{       "version":{         "qemu":{           "micro":90,         "minor":10,         "major":2       },       "package":" (v2.11.0-rc0-47-g55ed8d6)"     },     "capabilities":[        ]   } }   ```  [Comment 11](show_bug.cgi?id=1497120#c11)  xianwang    2017-11-17 12:57:19 UTC  ``` Hi, Dave and kwolf, FYI and that link, I have re-test this scenario as following: version: 3.10.0-768.el7.ppc64le qemu-kvm-rhev-2.10.0-6.el7.ppc64le SLOF-20170724-2.git89f519f.el7.noarch  localmigration:  src end: 1.boot guest:     -drive id=drive_image1,if=none,aio=threads,cache=none,format=qcow2,file=/home/test.qcow2 \     -device virtio-blk-pci,id=image1,drive=drive_image1,bus=pci.0,addr=07,bootindex=0 \  check: (qemu) info block drive_image1 (#block173): /home/test.qcow2 (qcow2)     Attached to:      /machine/peripheral/image1/virtio-backend     Cache mode:       writeback, direct   2.dst end: firstly, create an qcow2 as exported disk: #qemu-img create -f qcow2 nbd.qcow2 20G then boot guest:     -blockdev node-name=node-TargetDisk,driver=qcow2,file.driver=file,file.node-name=file,file.filename=/home/nbd.qcow2 \     -device virtio-blk,id=virtio0,drive=node-TargetDisk \  check: (qemu) info block node-TargetDisk: /home/nbd.qcow2 (qcow2)     Attached to:      /machine/peripheral/virtio0/virtio-backend     Cache mode:       writeback  3.set dst as nbd server: # telnet 127.0.0.1 8882 {"execute":"qmp_capabilities"} {"return": {}} {"execute":"nbd-server-start","arguments":{"addr":{"type":"inet","data":{"host":"127.0.0.1","port":"12345"}}}} {"return": {}} {"execute":"nbd-server-add","arguments":{"device":"node-TargetDisk"}} {"return": {}}  4.in src end, do drive-mirror # telnet 127.0.0.1 8881 {"execute":"qmp_capabilities"} {"return": {}} {"execute": "drive-mirror","arguments":{"device":"drive_image1","mode":"existing","job-id":"job0","target":"nbd:127.0.0.1:12345:exportname=node-TargetDisk","sync":"top","format":"qcow2"}} {"error": {"class": "GenericError", "desc": "Image is not in qcow2 format"}}  {"execute": "drive-mirror","arguments":{"device":"drive_image1","mode":"existing","job-id":"job0","target":"nbd:127.0.0.1:12345:exportname=node-TargetDisk","sync":"top"}} {"return": {}} {"timestamp": {"seconds": 1510922579, "microseconds": 879307}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 879787}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 882765}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 884881}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 887108}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 889323}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 890445}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 891936}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 893544}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 893579}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 894186}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 895497}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 895883}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 896305}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 897920}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 899138}, "event": "BLOCK_JOB_ERROR", "data": {"device": "job0", "operation": "write", "action": "report"}} {"timestamp": {"seconds": 1510922579, "microseconds": 899443}, "event": "BLOCK_JOB_COMPLETED", "data": {"device": "job0", "len": 21474836480, "offset": 0, "speed": 0, "type": "mirror", "error": "Operation not permitted"}}  on src end: (qemu) WARNING: Image format was not specified for 'nbd://127.0.0.1:12345/node-TargetDisk' and probing guessed raw.          Automatically detecting the format is dangerous for raw images, write operations on block 0 will be restricted.          Specify the 'raw' format explicitly to remove the restrictions.  on dst end: (qemu) qemu-kvm: Server is read-only, return error  please help to check it, thanks   ```  [Comment 12](show_bug.cgi?id=1497120#c12)  Dr. David Alan Gilbert    2017-11-17 13:05:38 UTC  ``` I think the problem here is:   {"execute": "drive-mirror","arguments": {"device":"drive_image1","mode":"existing","job id":"job0","target":"nbd:127.0.0.1:12345:exportname=node-TargetDisk","sync":"top","format":"qcow2"}}  and the error:  {"error": {"class": "GenericError", "desc": "Image is not in qcow2 format"}}  the drive-mirror should be told the image format is raw even if the backing is really qcow2, because it's sent raw over the NBD; see kashyap's docs has:  { "execute": "drive-mirror", "arguments": { "device": "virtio0", "target": "nbd:localhost:3333:exportname=virtio0", "sync": "full","format": "raw", "mode": "existing" } }   ```  [Comment 13](show_bug.cgi?id=1497120#c13)  xianwang    2017-11-17 17:35:22 UTC  ``` Hi, Dave and kwolf, I)First: For nbd server is not writable, the resolution maybe is that we need to add "write" permission for nbd server, but there is one little problem about qmp: -HMP (qemu) nbd_server_add -w node-TargetDisk  *******works well -QMP {"execute":"nbd-server-add","arguments":{"device":"node-TargetDisk","writable":"true"}} {"error": {"class": "GenericError", "desc": "Invalid parameter type for 'writable', expected: boolean"}} {"execute":"nbd-server-add","arguments":{"device":"node-TargetDisk","boolean":"true"}} {"error": {"class": "GenericError", "desc": "Parameter 'boolean' is unexpected"}} {"execute":"nbd-server-add","arguments":{"device":"node-TargetDisk","writable":"boolean"}} {"error": {"class": "GenericError", "desc": "Invalid parameter type for 'writable', expected: boolean"}}  so, I don't know what is the right qmp command  II)Second: I have re-test four scenarios, all are local migrations, but only one scenario is pass, other three are all failed.  pass: a)src end:     -drive id=drive_image1,if=none,aio=threads,cache=none,format=qcow2,file=/home/test.qcow2 \     -device virtio-blk-pci,id=image1,drive=drive_image1,bus=pci.0,addr=07,bootindex=0 \  check block and enable pause-before-switchover: (qemu) info block drive_image1 (#block143): /home/test.qcow2 (qcow2)     Attached to:      /machine/peripheral/image1/virtio-backend     Cache mode:       writeback, direct (qemu) migrate_set_capability pause-before-switchover on (qemu) info migrate_capabilities  xbzrle: off rdma-pin-all: off auto-converge: off zero-blocks: off compress: off events: off postcopy-ram: off x-colo: off release-ram: off return-path: off pause-before-switchover: on   b)dst end:     -blockdev node-name=node-TargetDisk,driver=qcow2,file.driver=file,file.node-name=file,file.filename=/home/nbd.qcow2 \     -device virtio-blk-pci,id=virtio0,drive=node-TargetDisk,bus=pci.0,addr=07,bootindex=0 \  check: (qemu) info block node-TargetDisk: /home/nbd.qcow2 (qcow2)     Attached to:      /machine/peripheral/virtio0/virtio-backend     Cache mode:       writeback  setup nbd server on dst host(make dst qemu as nbd server) (qemu) nbd_server_start 127.0.0.1:12345 (qemu) nbd_server_add -w node-TargetDisk  c)on src end, begin to do migration and then begin to do block-mirror on dst end src end: (qemu) migrate -d tcp:127.0.0.1:5801 (qemu) info migrate globals: store-global-state=1, only_migratable=0, send-configuration=1, send-section-footer=1 Migration status: active  then, begin to do block-mirror on src end during live migration, after block job becomes "BLOCK_JOB_READY", cancel block job and stop nbd server src end: {"execute": "drive-mirror","arguments":{"device":"drive_image1","mode":"existing","job-id":"job0","target":"nbd:127.0.0.1:12345:exportname=node-TargetDisk","sync":"top"}} {"return": {}} {"timestamp": {"seconds": 1510937156, "microseconds": 30791}, "event": "BLOCK_JOB_READY", "data": {"device": "job0", "len": 21475229696, "offset": 21475229696, "speed": 0, "type": "mirror"}} {"execute": "block-job-cancel","arguments":{"device":"job0"}} {"return": {}}  dst end: (qemu) nbd_server_stop  d)check the status of migration on src end, and switch to "pre-switchover" on src: (qemu) info migrate globals: store-global-state=1, only_migratable=0, send-configuration=1, send-section-footer=1 capabilities: xbzrle: off rdma-pin-all: off auto-converge: off zero-blocks: off compress: off events: off postcopy-ram: off x-colo: off release-ram: off return-path: off pause-before-switchover: on  Migration status: pre-switchover (qemu) info status  VM status: paused (finish-migrate) (qemu) migrate_continue pre-switchover (qemu) info migrate Migration status: completed (qemu) info status  VM status: paused (postmigrate)  on dst: (qemu) info status  VM status: running vm works well and reboot works well.  other three scenarios are similar with above, the qemu cli are all same with above one, the difference between them is as following:  1)do drive-mirror job firstly, when block job becomes "ready", then cancel block job, then begin to do live migration, result is:migration complete, vm works well on dst end without error message in guest by "demesg", but reboot guest, the file system is broken as attachment guest;  2)do drive-mirror job, cancel job before it becomes "ready", then whether do live migration before or after cancelling block job, the result is same: migration complete, but guest can't be login via vnc and there is error massage in guest via "dmesg" as following:  [  318.990587] XFS (dm-0): metadata I/O error: block 0x1aa9860 ("xfs_trans_read_buf_map") error 117 numblks 32 [  318.990588] XFS (dm-0): xfs_imap_to_bp: xfs_trans_read_buf() returned error -117. [  318.992416] XFS (dm-0): Metadata CRC error detected at xfs_dir3_block_read_verify+0x78/0x1c0 [xfs], xfs_dir3_block block 0x1aad650 [  318.992422] XFS (dm-0): metadata I/O error: block 0x1aad650 ("xfs_trans_read_buf_map") error 74 numblks 8  guest reboot failed, vnc screenshot is same as attachment guest.  1)please check whether the test steps of the pass one is right, for it is pass, does it indicate this bug is fixed?  2)I am not sure the failed three scenarios are illegal test scenarios or they are bugs. Thanks very much   ```  [Comment 14](show_bug.cgi?id=1497120#c14)  Dr. David Alan Gilbert    2017-11-17 17:39:53 UTC  ``` xianwang:   Please copy kashyap's example - json is very fussy;  { "execute": "nbd-server-add", "arguments": { "device": "virtio0","writable": true } }  Note there are no " around the true   ```  [Comment 15](show_bug.cgi?id=1497120#c15)  xianwang    2017-11-18 01:02:45 UTC  ``` (In reply to Dr. David Alan Gilbert from [comment #14](show_bug.cgi?id=1497120#c14)) > xianwang: >   Please copy kashyap's example - json is very fussy; >  > { "execute": "nbd-server-add", "arguments": { "device": > "virtio0","writable": true } } >  > Note there are no " around the true  Dave, I have tried as: {"execute":"nbd-server-start","arguments":{"addr":{"type":"inet","data":{"host":"127.0.0.1","port":"12345"}}}} {"return": {}} {"execute":"nbd-server-add","arguments":{"device":"node-TargetDisk","writable":true}} {"return": {}}  it works, thanks.  But I have another question, for "pre-switchover", what is the right order of doing "live migration" and doing "block mirror" ?  I think we should first do block-mirror, after block job becomes to "BLOCK_JOB_COMPLETED" whether by "`block-job-complete` or `block-job-cancel`, then begin do live migration, but this failed, on contrary, first do live migration, during live migration do block-mirror, it succeed, I am confused why   ```  [Comment 16](show_bug.cgi?id=1497120#c16)  Kashyap Chamarthy    2017-11-21 08:48:17 UTC  ``` (In reply to xianwang from [comment #15](show_bug.cgi?id=1497120#c15))  [...]  > I have tried as: > {"execute":"nbd-server-start","arguments":{"addr":{"type":"inet","data": > {"host":"127.0.0.1","port":"12345"}}}} > {"return": {}} > {"execute":"nbd-server-add","arguments":{"device":"node-TargetDisk", > "writable":true}} > {"return": {}} >  > it works, thanks. >  > But I have another question, for "pre-switchover", what is the right order > of doing "live migration" and doing "block mirror" ?  > I think we should first do block-mirror, after block job becomes to > "BLOCK_JOB_COMPLETED" whether by "`block-job-complete` or > `block-job-cancel`, then begin do live migration, but this failed, on > contrary, first do live migration, during live migration do block-mirror, it > succeed, I am confused why  The right order using 'pause-before-switchover' is documented in the text file I attached in [comment#10](show_bug.cgi?id=1497120#c10).  Copying here's the full sequence:  [I didn't copy / paste the first step intentionally; it just launches source & destination QEMU -- refer the file in [comment#10](show_bug.cgi?id=1497120#c10)].   (2) [SOURCE] Set the "pause-before-switchover" capability. ----------------------------------------------------------------------- {"execute":"migrate-set-capabilities","arguments":{"capabilities":[{"capability":"pause-before-switchover","state":true}]}} {"return": {}} ----------------------------------------------------------------------- {"execute":"query-migrate-capabilities"} {"return": [{"state": false, "capability": "xbzrle"}, {"state": false, "capability": "rdma-pin-all"}, {"state": false, "capability": "auto-converge"}, {"state": false, "capability": "zero-blocks"}, {"state": false, "capability": "compress"}, {"state": false, "capability": "events"}, {"state": false, "capability": "postcopy-ram"}, {"state": false, "capability": "x-colo"}, {"state": false, "capability": "release-ram"}, {"state": false, "capability": "block"}, {"state": false, "capability": "return-path"}, {"state": true, "capability": "pause-before-switchover"}, {"state": false, "capability": "x-multifd"}]} -----------------------------------------------------------------------   (3) [DEST] Start the NBD server ----------------------------------------------------------------------- { "execute": "nbd-server-start", "arguments": { "addr": { "type": "inet","data": { "host": "localhost", "port": "3333" } } } } {"return": {}} { "execute": "nbd-server-add", "arguments": { "device": "virtio0","writable": true } } {"return": {}} -----------------------------------------------------------------------   (4) [SOURCE] Execute the `drive-mirror` command ----------------------------------------------------------------------- { "execute": "drive-mirror", "arguments": { "device": "virtio0", "target": "nbd:localhost:3333:exportname=virtio0", "sync": "full","format": "raw", "mode": "existing" } } {"return": {}} {"timestamp": {"seconds": 1510677793, "microseconds": 645286}, "event": "BLOCK_JOB_READY", "data": {"device": "virtio0", "len": 41126400, "offset": 41126400, "speed": 0, "type": "mirror"}} -----------------------------------------------------------------------   (5) [SOURCE] Issue the `migrate` command (and query the migration status): ----------------------------------------------------------------------- {"execute":"migrate","arguments":{"blk":false,"inc":false,"uri":"tcp:localhost:6666"}} {"return": {}} {"timestamp": {"seconds": 1510744913, "microseconds": 630373}, "event": "STOP"}  {"execute":"query-migrate"}                                                                                                                                                               {"return": {"expected-downtime": 300, "status": "pre-switchover", "setup-time": 2, "total-time": 110111, "ram": {"total": 537403392, "postcopy-requests": 0, "dirty-sync-count": 2, "page-size": 4096, "remaining": 4141056, "mbps": 268.56432, "transferred": 59759367, "duplicate": 115920, "dirty-pages-rate": 72829, "skipped": 0, "normal-bytes": 58601472, "normal": 14307}}} -----------------------------------------------------------------------   (6) [SOURCE] Issue the `block-job-cancel` command ----------------------------------------------------------------------- {"execute":"block-job-cancel","arguments":{"device":"virtio0"} } {"return": {}} {"timestamp": {"seconds": 1510678024, "microseconds": 526240}, "event": "BLOCK_JOB_COMPLETED", "data": {"device": "virtio0", "len": 41126400, "offset": 41126400, "speed": 0, "type": "mirror"}} -----------------------------------------------------------------------   (7) [DEST] Stop the NBD server ----------------------------------------------------------------------- {"execute":"nbd-server-stop"} {"return": {}} -----------------------------------------------------------------------   (8) [DEST] Resume the guest vCPUs ----------------------------------------------------------------------- {"execute":"cont"} {"return": {}} -----------------------------------------------------------------------   (9) [SOURCE] Gracefully terminate the QEMU process (repeat the same on     destination.) ----------------------------------------------------------------------- {"execute":"quit"} {"return": {}} {"timestamp": {"seconds": 1510678728, "microseconds": 574318}, "event": "SHUTDOWN", "data": {"guest": false}} -----------------------------------------------------------------------   ```  [Comment 17](show_bug.cgi?id=1497120#c17)  Dr. David Alan Gilbert    2017-11-21 09:31:33 UTC  ``` (In reply to xianwang from [comment #15](show_bug.cgi?id=1497120#c15)) > (In reply to Dr. David Alan Gilbert from [comment #14](show_bug.cgi?id=1497120#c14)) > > xianwang: > >   Please copy kashyap's example - json is very fussy; > >  > > { "execute": "nbd-server-add", "arguments": { "device": > > "virtio0","writable": true } } > >  > > Note there are no " around the true >  > Dave, > I have tried as: > {"execute":"nbd-server-start","arguments":{"addr":{"type":"inet","data": > {"host":"127.0.0.1","port":"12345"}}}} > {"return": {}} > {"execute":"nbd-server-add","arguments":{"device":"node-TargetDisk", > "writable":true}} > {"return": {}} >  > it works, thanks. >  > But I have another question, for "pre-switchover", what is the right order > of doing "live migration" and doing "block mirror" ?  > I think we should first do block-mirror, after block job becomes to > "BLOCK_JOB_COMPLETED" whether by "`block-job-complete` or > `block-job-cancel`, then begin do live migration, but this failed, on > contrary, first do live migration, during live migration do block-mirror, it > succeed, I am confused why  Since the guest is still running during live migration you've got to mirror the changes made to the disk by the guest during the live migration itself; so you can't finish the mirror before the migration.   You have to wait for the drive mirror to declare 'block job ready' before starting the migrate command, that way you know the block code has done the first pass of copying the disk across.   ```  [Comment 18](show_bug.cgi?id=1497120#c18)  xianwang    2017-11-21 16:04:28 UTC  ``` Thanks for Dave's and Kashyap's reply, FYI, I have test this scenario as following:  Version: Host: 3.10.0-768.el7.ppc64le qemu-kvm-rhev-2.10.0-6.el7.ppc64le SLOF-20170724-2.git89f519f.el7.noarch  Guest: 3.10.0-768.el7.ppc64le  a)src end:     -drive id=drive_image1,if=none,aio=threads,cache=none,format=qcow2,file=/home/test.qcow2 \     -device virtio-blk-pci,id=image1,drive=drive_image1,bus=pci.0,addr=07,bootindex=0 \  check block and enable pause-before-switchover: (qemu) info block drive_image1 (#block143): /home/test.qcow2 (qcow2)     Attached to:      /machine/peripheral/image1/virtio-backend     Cache mode:       writeback, direct (qemu) migrate_set_capability pause-before-switchover on (qemu) info migrate_capabilities  xbzrle: off rdma-pin-all: off auto-converge: off zero-blocks: off compress: off events: off postcopy-ram: off x-colo: off release-ram: off return-path: off pause-before-switchover: on or ----------------------------------------------------------------------- {"execute":"migrate-set-capabilities","arguments":{"capabilities":[{"capability":"pause-before-switchover","state":true}]}} {"return": {}} ----------------------------------------------------------------------- {"execute":"query-migrate-capabilities"} {"return": [{"state": false, "capability": "xbzrle"}, {"state": false, "capability": "rdma-pin-all"}, {"state": false, "capability": "auto-converge"}, {"state": false, "capability": "zero-blocks"}, {"state": false, "capability": "compress"}, {"state": false, "capability": "events"}, {"state": false, "capability": "postcopy-ram"}, {"state": false, "capability": "x-colo"}, {"state": false, "capability": "release-ram"}, {"state": false, "capability": "block"}, {"state": false, "capability": "return-path"}, {"state": true, "capability": "pause-before-switchover"}, {"state": false, "capability": "x-multifd"}]} -----------------------------------------------------------------------  b)dst end:     -blockdev node-name=node-TargetDisk,driver=raw,file.driver=file,file.node-name=file,file.filename=/home/nbd.raw \     -device virtio-blk-pci,id=virtio0,drive=node-TargetDisk,bus=pci.0,addr=07,bootindex=0 \  check: (qemu) info block node-TargetDisk: /home/nbd.raw (raw)     Attached to:      /machine/peripheral/virtio0/virtio-backend     Cache mode:       writeback  setup nbd server on dst host(make dst qemu as nbd server) (qemu) nbd_server_start 10.16.69.77:12345 (qemu) nbd_server_add -w node-TargetDisk or ----------------------------------------------------------------------- { "execute": "nbd-server-start", "arguments": { "addr": { "type": "inet","data": { "host": "10.16.69.77", "port": "12345" } } } } {"return": {}} { "execute": "nbd-server-add", "arguments": { "device": "node-TargetDisk","writable": true } } {"return": {}} -----------------------------------------------------------------------  c)on src end, begin to do block-mirror and after block job becomes to "BLOCK_JOB_READY" then do live migration, when live migration becomes to "pre-switchover" and cancel block job and then "migrate_continue pre-switchover"  src end: block-mirror: ----------------------------------------------------------------------- { "execute": "drive-mirror", "arguments": { "device": "drive_image1", "target": "nbd:10.16.69.77:12345:exportname=node-TargetDisk", "sync": "full","format": "raw", "mode": "existing" } } {"return": {}} {"timestamp": {"seconds": 1510677793, "microseconds": 645286}, "event": "BLOCK_JOB_READY", "data": {"device": "virtio0", "len": 41126400, "offset": 41126400, "speed": 0, "type": "mirror"}} -----------------------------------------------------------------------  live migration: (qemu) migrate -d tcp:10.16.69.77:5801 (qemu) info migrate Migration status: pre-switchover or ----------------------------------------------------------------------- {"execute":"migrate","arguments":{"blk":false,"inc":false,"uri":"tcp:10.16.69.77:5801"}} {"return": {}} {"timestamp": {"seconds": 1510744913, "microseconds": 630373}, "event": "STOP"}  {"execute":"query-migrate"}                                                                                                                                                               {"return": {"expected-downtime": 300, "status": "pre-switchover", "setup-time": 2, "total-time": 110111, "ram": {"total": 537403392, "postcopy-requests": 0, "dirty-sync-count": 2, "page-size": 4096, "remaining": 4141056, "mbps": 268.56432, "transferred": 59759367, "duplicate": 115920, "dirty-pages-rate": 72829, "skipped": 0, "normal-bytes": 58601472, "normal": 14307}}} -----------------------------------------------------------------------  cancel block-job: ----------------------------------------------------------------------- {"execute": "block-job-cancel","arguments":{"device":"drive_image1"}} {"return": {}} {"timestamp": {"seconds": 1510678024, "microseconds": 526240}, "event": "BLOCK_JOB_COMPLETED", "data": {"device": "virtio0", "len": 41126400, "offset": 41126400, "speed": 0, "type": "mirror"}} -----------------------------------------------------------------------  d)on dst host, stop nbd server: (qemu) nbd_server_stop or ----------------------------------------------------------------------- {"execute":"nbd-server-stop"} {"return": {}} -----------------------------------------------------------------------  e)on src host, continue pre-switchover (qemu) migrate_continue pre-switchover (qemu) info migrate Migration status: completed or  ----------------------------------------------------------------------- {"execute":"query-migrate"} {"return": {"status": "completed", "setup-time": 27, "downtime": 383168, "total-time": 401383, "ram": {"total": 8607039488, "postcopy-requests": 0, "dirty-sync-count": 5, "page-size": 4096, "remaining": 0, "mbps": 12.560209, "transferred": 621304158, "duplicate": 1964677, "dirty-pages-rate": 0, "skipped": 0, "normal-bytes": 602443776, "normal": 147081}}} -----------------------------------------------------------------------  f)on src host, check the vm status (qemu) info status  VM status: running or ----------------------------------------------------------------------- {"execute":"query-status"} {"return": {"status": "running", "singlestep": false, "running": true}} -----------------------------------------------------------------------  So, this bug is fixed.   ```  [Comment 19](show_bug.cgi?id=1497120#c19)  xianwang    2017-11-22 22:42:32 UTC  ``` (In reply to xianwang from [comment #6](show_bug.cgi?id=1497120#c6)) > Hi, Dave, > I have found some information about your patch, that in this link: > <http://patchwork.ozlabs.org/cover/827760/> > there is two work flow as said in this link, > The precopy flow is: > active->pre-switchover->device->completed >  > The postcopy flow is: > active->pre-switchover->postcopy-active->completed >  > But I didn't know the detail test steps for this bug, could you give me the > detail test steps and expected results for these two scenarios? thanks  Although I have added a case for scenario "precopy flow" to migration test plan, I think I should also add the second scenario "postcopy flow", I have tried two different test steps but I didn't catch the "postcopy-active" status of migration, the test flows are as following:  a)                 block mirror-->"BLOCK_JOB_READY"-->live migration-->"Migration status: pre-switchover"-->block-job-cancel-->nbd_server_stop-->(qemu)migrate_continue pre-switchover-->(qemu) migrate_start_postcopy-->"Migration status: completed"  b)block mirror-->"BLOCK_JOB_READY"-->live migration-->(qemu) migrate_start_postcopy-->"Migration status: pre-switchover"-->block-job-cancel-->nbd_server_stop-->(qemu)migrate_continue pre-switchover-->"Migration status: completed"  questions: 1)In these two test scenarios about postcopy, I can't catch "postcopy-active" status of migration, is there something wrong for these steps? or what is the right way for postcopy flow?   2)it seems that the state of "Migration status: pre-switchover" is a state that guest and migration process are both paused; only execute "migrate_continue pre-switchover", migration could continue and will complete directly, yes? so, any operation after "migrate_continue pre-switchover" would not work including "(qemu) migrate_start_postcopy", yes? btw, what is the condition of switching to "pre-switchover" for migration? Is that condition same with the condition of going into "downtime"?  Dave and Kashyap, could you help to reply the above questions? thanks   ```  [Comment 20](show_bug.cgi?id=1497120#c20)  Kashyap Chamarthy    2017-11-23 12:49:14 UTC  ``` (In reply to Kashyap Chamarthy from [comment #16](show_bug.cgi?id=1497120#c16))  [...]  > The right order using 'pause-before-switchover' is documented in the text > file I attached in [comment#10](show_bug.cgi?id=1497120#c10). >  > Copying here's the full sequence: >  > [I didn't copy / paste the first step intentionally; it just launches source > & destination QEMU -- refer the file in [comment#10](show_bug.cgi?id=1497120#c10)].  Dave pointed out on IRC that I was missing the "-S" (Do not start CPU at start-up) in my notes in [comment#10](show_bug.cgi?id=1497120#c10) for the destination QEMU command-line.   So don't forget to note that when reusing those notes that you ought to start your destination QEMU with "-S"  [...]   ```  [Comment 21](show_bug.cgi?id=1497120#c21)  Kashyap Chamarthy    2017-11-23 15:20:56 UTC  ``` (In reply to Kashyap Chamarthy from [comment #20](show_bug.cgi?id=1497120#c20)) > (In reply to Kashyap Chamarthy from [comment #16](show_bug.cgi?id=1497120#c16)) >  > [...] >  > > The right order using 'pause-before-switchover' is documented in the text > > file I attached in [comment#10](show_bug.cgi?id=1497120#c10). > >  > > Copying here's the full sequence: > >  > > [I didn't copy / paste the first step intentionally; it just launches source > > & destination QEMU -- refer the file in [comment#10](show_bug.cgi?id=1497120#c10)]. >  > Dave pointed out on IRC that I was missing the "-S" (Do not start CPU at > start-up) in my notes in [comment#10](show_bug.cgi?id=1497120#c10) for the destination QEMU command-line.  >  > So don't forget to note that when reusing those notes that you ought to > start your destination QEMU with "-S"   So Dave explains to me on IRC that when using "-incoming" on destination, using "-S" is not *mandatory*.  (But if you _do_ start your destination QEMU with "-S", then you need to issue the QMP command "cont" to start the vCPUs again.)  To that end, I my updated instructions are here:  [https://kashyapc.fedorapeople.org/virt/qemu/Live-Migration-drive-mirror+NBD-pause-before-switchover.txt](https://kashyapc.fedorapeople.org/virt/qemu/Live-Migration-drive-mirror%2BNBD-pause-before-switchover.txt)   ```  [Comment 22](show_bug.cgi?id=1497120#c22)  Dr. David Alan Gilbert    2017-11-23 15:29:56 UTC  ``` (In reply to xianwang from [comment #19](show_bug.cgi?id=1497120#c19)) > (In reply to xianwang from [comment #6](show_bug.cgi?id=1497120#c6)) > > Hi, Dave, > > I have found some information about your patch, that in this link: > > <http://patchwork.ozlabs.org/cover/827760/> > > there is two work flow as said in this link, > > The precopy flow is: > > active->pre-switchover->device->completed > >  > > The postcopy flow is: > > active->pre-switchover->postcopy-active->completed > >  > > But I didn't know the detail test steps for this bug, could you give me the > > detail test steps and expected results for these two scenarios? thanks >  > Although I have added a case for scenario "precopy flow" to migration test > plan, I think I should also add the second scenario "postcopy flow", I have > tried two different test steps but I didn't catch the "postcopy-active" > status of migration, the test flows are as following:  Postcopy with block migration is something that's not yet ready (it's waiting on a series by mreitz that does it a different way from block_mirror); so the test isn't really valid for postcopy yet.  > a)                 > block mirror-->"BLOCK_JOB_READY"-->live migration-->"Migration status: > pre-switchover"-->block-job-cancel-->nbd_server_stop-- > >(qemu)migrate_continue pre-switchover-->(qemu) > migrate_start_postcopy-->"Migration status: completed" >  > b)block mirror-->"BLOCK_JOB_READY"-->live migration-->(qemu) > migrate_start_postcopy-->"Migration status: > pre-switchover"-->block-job-cancel-->nbd_server_stop-- > >(qemu)migrate_continue pre-switchover-->"Migration status: completed" >  > questions: > 1)In these two test scenarios about postcopy, I can't catch > "postcopy-active" status of migration, is there something wrong for these > steps? or what is the right way for postcopy flow?   To catch a postcopy case you need to have a guest that's very busy accessing memory and/or a slow network bandwidth.  > 2)it seems that the state of "Migration status: pre-switchover" is a state > that guest and migration process are both paused; only execute > "migrate_continue pre-switchover", migration could continue and will > complete directly, yes? so, any operation after "migrate_continue > pre-switchover" would not work including "(qemu) migrate_start_postcopy", > yes?  If performing postcopy, you'll have done a migrate_start_postcopy and then hit the pre-switchover state after it. (Or migration finishes without needing postcopy, in which case you hit pre-switchover before giving migrate_start_postcopy).  > btw, what is the condition of switching to "pre-switchover" for > migration? Is that condition same with the condition of going into > "downtime"?  Yes, it's about the same time; but it gives the management layer a chance to do some cleanup just after going into downtime.  >  > Dave and Kashyap, could you help to reply the above questions? thanks   ```  [Comment 23](show_bug.cgi?id=1497120#c23)  xianwang    2017-11-24 02:44:45 UTC  ``` (In reply to Dr. David Alan Gilbert from [comment #22](show_bug.cgi?id=1497120#c22)) > (In reply to xianwang from [comment #19](show_bug.cgi?id=1497120#c19)) > > (In reply to xianwang from [comment #6](show_bug.cgi?id=1497120#c6)) > > > Hi, Dave, > > > I have found some information about your patch, that in this link: > > > <http://patchwork.ozlabs.org/cover/827760/> > > > there is two work flow as said in this link, > > > The precopy flow is: > > > active->pre-switchover->device->completed > > >  > > > The postcopy flow is: > > > active->pre-switchover->postcopy-active->completed > > >  > > > But I didn't know the detail test steps for this bug, could you give me the > > > detail test steps and expected results for these two scenarios? thanks > >  > > Although I have added a case for scenario "precopy flow" to migration test > > plan, I think I should also add the second scenario "postcopy flow", I have > > tried two different test steps but I didn't catch the "postcopy-active" > > status of migration, the test flows are as following: >  > Postcopy with block migration is something that's not yet ready (it's > waiting on a series by mreitz that does it a different way from > block_mirror); so the test isn't really valid for postcopy yet. >  FYI, I didn't need to add the case of "postcopy flow"?   > > a)                 > > block mirror-->"BLOCK_JOB_READY"-->live migration-->"Migration status: > > pre-switchover"-->block-job-cancel-->nbd_server_stop-- > > >(qemu)migrate_continue pre-switchover-->(qemu) > > migrate_start_postcopy-->"Migration status: completed" > >  > > b)block mirror-->"BLOCK_JOB_READY"-->live migration-->(qemu) > > migrate_start_postcopy-->"Migration status: > > pre-switchover"-->block-job-cancel-->nbd_server_stop-- > > >(qemu)migrate_continue pre-switchover-->"Migration status: completed" > >  > > questions: > > 1)In these two test scenarios about postcopy, I can't catch > > "postcopy-active" status of migration, is there something wrong for these > > steps? or what is the right way for postcopy flow?  >  > To catch a postcopy case you need to have a guest that's very busy accessing > memory and/or a slow network bandwidth. >  > > 2)it seems that the state of "Migration status: pre-switchover" is a state > > that guest and migration process are both paused; only execute > > "migrate_continue pre-switchover", migration could continue and will > > complete directly, yes? so, any operation after "migrate_continue > > pre-switchover" would not work including "(qemu) migrate_start_postcopy", > > yes? >  > If performing postcopy, you'll have done a migrate_start_postcopy and then > hit the pre-switchover state after it. > (Or migration finishes without needing postcopy, in which case you hit > pre-switchover before giving migrate_start_postcopy). >  As you said, I have "stress --io 4" in guest, the scenario "a)" of my test is same with that you said the first one, the scenario "b)" of my test is as you said the other scenario. I think the first scenario is more reasonable; so how do you think it's better to add the scenario "a)" to test plan or don't need to add "postcopy flow" this case?    > > btw, what is the condition of switching to "pre-switchover" for > > migration? Is that condition same with the condition of going into > > "downtime"? >  > Yes, it's about the same time; but it gives the management layer a chance to > do some cleanup just after going into downtime. >  > >  > > Dave and Kashyap, could you help to reply the above questions? thanks   ```  [Comment 24](show_bug.cgi?id=1497120#c24)  xianwang    2017-11-24 02:47:31 UTC  ``` (In reply to Dr. David Alan Gilbert from [comment #22](show_bug.cgi?id=1497120#c22)) > (In reply to xianwang from [comment #19](show_bug.cgi?id=1497120#c19)) > > (In reply to xianwang from [comment #6](show_bug.cgi?id=1497120#c6)) > > > Hi, Dave, > > > I have found some information about your patch, that in this link: > > > <http://patchwork.ozlabs.org/cover/827760/> > > > there is two work flow as said in this link, > > > The precopy flow is: > > > active->pre-switchover->device->completed > > >  > > > The postcopy flow is: > > > active->pre-switchover->postcopy-active->completed > > >  > > > But I didn't know the detail test steps for this bug, could you give me the > > > detail test steps and expected results for these two scenarios? thanks > >  > > Although I have added a case for scenario "precopy flow" to migration test > > plan, I think I should also add the second scenario "postcopy flow", I have > > tried two different test steps but I didn't catch the "postcopy-active" > > status of migration, the test flows are as following: >  > Postcopy with block migration is something that's not yet ready (it's > waiting on a series by mreitz that does it a different way from > block_mirror); so the test isn't really valid for postcopy yet. >  FYI, I didn't need to add the case of "postcopy flow"?   > > a)                 > > block mirror-->"BLOCK_JOB_READY"-->live migration-->"Migration status: > > pre-switchover"-->block-job-cancel-->nbd_server_stop-- > > >(qemu)migrate_continue pre-switchover-->(qemu) > > migrate_start_postcopy-->"Migration status: completed" > >  > > b)block mirror-->"BLOCK_JOB_READY"-->live migration-->(qemu) > > migrate_start_postcopy-->"Migration status: > > pre-switchover"-->block-job-cancel-->nbd_server_stop-- > > >(qemu)migrate_continue pre-switchover-->"Migration status: completed" > >  > > questions: > > 1)In these two test scenarios about postcopy, I can't catch > > "postcopy-active" status of migration, is there something wrong for these > > steps? or what is the right way for postcopy flow?  >  > To catch a postcopy case you need to have a guest that's very busy accessing > memory and/or a slow network bandwidth. >  > > 2)it seems that the state of "Migration status: pre-switchover" is a state > > that guest and migration process are both paused; only execute > > "migrate_continue pre-switchover", migration could continue and will > > complete directly, yes? so, any operation after "migrate_continue > > pre-switchover" would not work including "(qemu) migrate_start_postcopy", > > yes? >  > If performing postcopy, you'll have done a migrate_start_postcopy and then > hit the pre-switchover state after it. > (Or migration finishes without needing postcopy, in which case you hit > pre-switchover before giving migrate_start_postcopy). >  As you said, I have "stress --io 4" in guest, the scenario "a)" of my test is same with that you said the first one, the scenario "b)" of my test is as you said the other scenario. I think the first scenario is more reasonable; so how do you think it's better to add the scenario "a)" to test plan or don't need to add "postcopy flow" this case?    > > btw, what is the condition of switching to "pre-switchover" for > > migration? Is that condition same with the condition of going into > > "downtime"? >  > Yes, it's about the same time; but it gives the management layer a chance to > do some cleanup just after going into downtime. >  > >  > > Dave and Kashyap, could you help to reply the above questions? thanks  For the postcopy scenario is need to confirm, I modify this bug to on_qa, if this issue resolved, I will verify this bug, thanks for understanding   ```  [Comment 25](show_bug.cgi?id=1497120#c25)  Dr. David Alan Gilbert    2017-11-24 10:03:15 UTC  ``` Yes, you don't need to do postcopy; we'll sort out postcopy+storage behaviour when Max's patches are done.   ```  [Comment 26](show_bug.cgi?id=1497120#c26)  xianwang    2017-11-27 02:11:45 UTC  ``` (In reply to Dr. David Alan Gilbert from [comment #25](show_bug.cgi?id=1497120#c25)) > Yes, you don't need to do postcopy; we'll sort out postcopy+storage > behaviour when Max's patches are done.  OK, got it, thanks for Dave's confirmation   ```  [Comment 27](show_bug.cgi?id=1497120#c27)  xianwang    2017-11-28 04:52:22 UTC  ``` According to [comment25](show_bug.cgi?id=1497120#c25), this bug is fixed.   ```  [Comment 29](show_bug.cgi?id=1497120#c29)  errata-xmlrpc    2018-04-11 00:36:03 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  [https://access.redhat.com/errata/RHSA-2018:1104](https://access.redhat.com/errata/RHSA-2018%3A1104)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1497120&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from lists.gnu.org_f54f2011_20250125_223329.html ===


| | **qemu-devel** | | --- | |
| --- | --- |

[[Top](../)][[All Lists](/archive/html)]

[Advanced](/archive/cgi-bin/namazu.cgi?idxname=qemu-devel)

---

[[Date Prev](msg02277.html)][[Date Next](msg02279.html)][[Thread Prev](msg02313.html)][[Thread Next](msg02310.html)][[Date Index](index.html#02278)][[Thread Index](threads.html#02278)]

## [Qemu-devel] [PATCH v1 1/7] io: monitor encoutput buffer size from webso

---

| **From**: | Daniel P. Berrange |
| --- | --- |

| **Subject**: | [Qemu-devel] [PATCH v1 1/7] io: monitor encoutput buffer size from websocket GSource |
| **Date**: | Tue, 10 Oct 2017 16:43:22 +0100 |

---

```
The websocket GSource is monitoring the size of the rawoutput
buffer to determine if the channel can accepts more writes.
The rawoutput buffer, however, is merely a temporary staging
buffer before data is copied into the encoutput buffer. This
its size will always be zero when the GSource runs.

This flaw causes the encoutput buffer to grow without bound
if the other end of the underlying data channel doesn't
read data being sent. This can be seen with VNC if a client
is on a slow WAN link and the guest OS is sending many screen
updates. A malicious VNC client can act like it is on a slow
link by playing a video in the guest and then reading data
very slowly, causing QEMU host memory to expand arbitrarily.

This issue is assigned CVE-2017-????, publically reported in

  [https://bugs.launchpad.net/qemu/+bug/1718964](https://bugs.launchpad.net/qemu/%2Bbug/1718964)

Signed-off-by: Daniel P. Berrange <address@hidden>
---
 io/channel-websock.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/io/channel-websock.c b/io/channel-websock.c
index d1d471f86e..04bcc059cd 100644
--- a/io/channel-websock.c
+++ b/io/channel-websock.c
@@ -28,7 +28,7 @@
 #include <time.h>

-/* Max amount to allow in rawinput/rawoutput buffers */
+/* Max amount to allow in rawinput/encoutput buffers */
 #define QIO_CHANNEL_WEBSOCK_MAX_BUFFER 8192

 #define QIO_CHANNEL_WEBSOCK_CLIENT_KEY_LEN 24
@@ -1208,7 +1208,7 @@ qio_channel_websock_source_check(GSource *source)
     if (wsource->wioc->rawinput.offset || wsource->wioc->io_eof) {
         cond |= G_IO_IN;
     }
-    if (wsource->wioc->rawoutput.offset < QIO_CHANNEL_WEBSOCK_MAX_BUFFER) {
+    if (wsource->wioc->encoutput.offset < QIO_CHANNEL_WEBSOCK_MAX_BUFFER) {
         cond |= G_IO_OUT;
     }

--
2.13.5

```

---

reply via email to

---

| [[Prev in Thread](msg02313.html)] | **Current Thread** | [[Next in Thread](msg02310.html)] |
| --- | --- | --- |

* **[[Qemu-devel] [PATCH v1 0/7] Limit websockets memory usage & other bug fixes](msg02275.html)**, *Daniel P. Berrange*, 2017/10/10
  + **[[Qemu-devel] [PATCH v1 2/7] io: simplify websocket ping reply handling](msg02276.html)**, *Daniel P. Berrange*, 2017/10/10
    - **[Re: [Qemu-devel] [PATCH v1 2/7] io: simplify websocket ping reply handling](msg02312.html)**, *Eric Blake*, 2017/10/10
      * **[Re: [Qemu-devel] [PATCH v1 2/7] io: simplify websocket ping reply handling](msg02349.html)**, *Daniel P. Berrange*, 2017/10/10
  + **[[Qemu-devel] [PATCH v1 3/7] io: get rid of qio\_channel\_websock\_encode helper method](msg02277.html)**, *Daniel P. Berrange*, 2017/10/10
    - **[Re: [Qemu-devel] [PATCH v1 3/7] io: get rid of qio\_channel\_websock\_encode helper method](msg02313.html)**, *Eric Blake*, 2017/10/10
  + **[Qemu-devel] [PATCH v1 1/7] io: monitor encoutput buffer size from websocket GSource**,
    *Daniel P. Berrange* **<=**
    - **[Re: [Qemu-devel] [PATCH v1 1/7] io: monitor encoutput buffer size from websocket GSource](msg02310.html)**, *Eric Blake*, 2017/10/10
      * **[Re: [Qemu-devel] [PATCH v1 1/7] io: monitor encoutput buffer size from websocket GSource](msg02350.html)**, *Daniel P. Berrange*, 2017/10/10
  + **[[Qemu-devel] [PATCH v1 5/7] io: get rid of bounce buffering in websock write path](msg02279.html)**, *Daniel P. Berrange*, 2017/10/10
    - **[Re: [Qemu-devel] [PATCH v1 5/7] io: get rid of bounce buffering in websock write path](msg02348.html)**, *Eric Blake*, 2017/10/10
  + **[[Qemu-devel] [PATCH v1 4/7] io: pass a struct iovec into qio\_channel\_websock\_encode](msg02280.html)**, *Daniel P. Berrange*, 2017/10/10
    - **[Re: [Qemu-devel] [PATCH v1 4/7] io: pass a struct iovec into qio\_channel\_websock\_encode](msg02345.html)**, *Eric Blake*, 2017/10/10
      * **[Re: [Qemu-devel] [PATCH v1 4/7] io: pass a struct iovec into qio\_channel\_websock\_encode](msg02351.html)**, *Daniel P. Berrange*, 2017/10/10
  + **[[Qemu-devel] [PATCH v1 7/7] io: add trace points for websocket HTTP protocol headers](msg02281.html)**, *Daniel P. Berrange*, 2017/10/10
    - **[Re: [Qemu-devel] [PATCH v1 7/7] io: add trace points for websocket HTTP protocol headers](msg02355.html)**, *Eric Blake*, 2017/10/10
  + **[[Qemu-devel] [PATCH v1 6/7] io: cope with websock 'Connection' header having multiple values](msg02282.html)**, *Daniel P. Berrange*, 2017/10/10

---

* Prev by Date:
  **[[Qemu-devel] [PATCH v1 3/7] io: get rid of qio\_channel\_websock\_encode helper method](msg02277.html)**
* Next by Date:
  **[[Qemu-devel] [PATCH v1 5/7] io: get rid of bounce buffering in websock write path](msg02279.html)**
* Previous by thread:
  **[Re: [Qemu-devel] [PATCH v1 3/7] io: get rid of qio\_channel\_websock\_encode helper method](msg02313.html)**
* Next by thread:
  **[Re: [Qemu-devel] [PATCH v1 1/7] io: monitor encoutput buffer size from websocket GSource](msg02310.html)**
* Index(es):
  + [**Date**](index.html#02278)
  + [**Thread**](threads.html#02278)



=== Content from www.debian.org_fb4c89ef_20250125_223334.html ===


---

[[Date Prev](msg00140.html)][[Date Next](msg00142.html)]
[[Thread Prev](msg00140.html)][[Thread Next](msg00142.html)]
[[Date Index](maillist.html#00141)]
[[Thread Index](threads.html#00141)]

# [SECURITY] [DSA 4213-1] qemu security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 4213-1] qemu security update
* *From*: Salvatore Bonaccorso <carnil@debian.org>
* *Date*: Tue, 29 May 2018 21:25:45 +0000
* *Message-id*: <[[🔎]](/msgid-search/E1fNm7l-00061k-MY%40seger.debian.org) [E1fNm7l-00061k-MY@seger.debian.org](msg00141.html)>
* *Reply-to*: debian-security-announce-request@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-4213-1                   security@debian.org
<https://www.debian.org/security/>                     Salvatore Bonaccorso
May 29, 2018                          <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : qemu
CVE ID         : CVE-2017-5715 CVE-2017-15038 CVE-2017-15119 CVE-2017-15124
                 CVE-2017-15268 CVE-2017-15289 CVE-2017-16845 CVE-2017-17381
                 CVE-2017-18043 CVE-2018-5683 CVE-2018-7550
Debian Bug     : 877890 880832 880836 882136 883399 883625 884806 886532
                 887392 892041

Several vulnerabilities were discovered in qemu, a fast processor
emulator.

CVE-2017-15038

    Tuomas Tynkkynen discovered an information leak in 9pfs.

CVE-2017-15119

    Eric Blake discovered that the NBD server insufficiently restricts
    large option requests, resulting in denial of service.

CVE-2017-15124

    Daniel Berrange discovered that the integrated VNC server
    insufficiently restricted memory allocation, which could result in
    denial of service.

CVE-2017-15268

    A memory leak in websockets support may result in denial of service.

CVE-2017-15289

    Guoxiang Niu discovered an OOB write in the emulated Cirrus graphics
    adaptor which could result in denial of service.

CVE-2017-16845

    Cyrille Chatras discovered an information leak in PS/2 mouse and
    keyboard emulation which could be exploited during instance
    migration.

CVE-2017-17381

    Dengzhan Heyuandong Bijunhua and Liweichao discovered that an
    implementation error in the virtio vring implementation could result
    in denial of service.

CVE-2017-18043

    Eric Blake discovered an integer overflow in an internally used
    macro which could result in denial of service.

CVE-2018-5683

    Jiang Xin and Lin ZheCheng discovered an OOB memory access in the
    emulated VGA adaptor which could result in denial of service.

CVE-2018-7550

    Cyrille Chatras discovered that an OOB memory write when using
    multiboot could result in the execution of arbitrary code.

This update also backports a number of mitigations against the Spectre
v2 vulnerability affecting modern CPUs (CVE-2017-5715).  For additional
information please refer to
<https://www.qemu.org/2018/01/04/spectre/>

For the stable distribution (stretch), these problems have been fixed in
version 1:2.8+dfsg-6+deb9u4.

We recommend that you upgrade your qemu packages.

For the detailed security status of qemu please refer to its security
tracker page at:
<https://security-tracker.debian.org/tracker/qemu>

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----

iQKTBAEBCgB9FiEERkRAmAjBceBVMd3uBUy48xNDz0QFAlsNxApfFIAAAAAALgAo
aXNzdWVyLWZwckBub3RhdGlvbnMub3BlbnBncC5maWZ0aGhvcnNlbWFuLm5ldDQ2
NDQ0MDk4MDhDMTcxRTA1NTMxRERFRTA1NENCOEYzMTM0M0NGNDQACgkQBUy48xND
z0Q/ng/+MBZU0v54RPrZbRVTOQZZfFsVac+l69QrTjGwDyQKomJXR0g3awp5xxIK
/0qeeE+8lttR1FVu/go5B40wNc5y9guzO8WnWvIwR1hI7Mu16kPlrK+fLBho3q0Q
Yk820iD62urEnbTx5eBCCm3UJDD7i8wZIoACEnbeihuXcnsM37lwnSBQ5EYgOidn
h9tSjuIiQJVlRQqLSG8He6zTt7Iwga1LbGvUFiZyFxddFotDFzXz2CdQXzTlYZpW
CfSCt5dnbp6/JjLNPJkQiyPiEFrzeasza35xVGTA/c+6/vLI/S7FHWpYVDTP/ezi
giamA2QOEmsYJNRVm5JmRpBLU8lQZz5jxvLB2FJbe/1mBEjmh8SyJecG9TCVCqHq
gchbGdX1Iw2cLvub1sogkM+EF4ZLtlk7xfkiVkcWbqUKB1xGb6E5GEDT5h07yh1b
o0+EL9CgjpAIzM7AB9JODrFy0PUTY/DHU4cFVn6BYghYVq7V/MBEj+E3sm6DMVGP
EwCywxi2IHhkmvmEx0IFQdx8FU58laUoFciWXYaGZiWQFVnt+AWcRJXnsZtUFCdD
ZNnoGMnp/5EuyqJa+3imDaLiVhix3J8njNUNRhQ/zOLbFvzVuXYVy8UpZKzo3Aeq
2n6PjtRNSEj88kk3bqO8uJC71QAcOCBsIz21VTGjSt6+PhcHR/c=
=+/0Y
-----END PGP SIGNATURE-----

```

---



=== Content from www.redhat.com_9c9b226f_20250126_122942.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugs.launchpad.net_50993fb1_20250126_123005.html ===

[Log in / Register](https://bugs.launchpad.net/qemu/%2Bbug/1718964/%2Blogin)

[![](https://launchpadlibrarian.net/27372372/qemu_64.png)](https://launchpad.net/qemu)

## [QEMU](https://launchpad.net/qemu)

* [Overview](https://launchpad.net/qemu)
* [Code](https://code.launchpad.net/qemu)
* [Bugs](https://bugs.launchpad.net/qemu)
* [Blueprints](https://blueprints.launchpad.net/qemu)
* [Translations](https://translations.launchpad.net/qemu)
* [Answers](https://answers.launchpad.net/qemu)

# Memory leak when using websocket over a low speed network

Bug #1718964 reported by
[Carl Brassey](https://launchpad.net/~carl.brassey)
on 2017-09-22

[20](/%2Bhelp-bugs/bug-heat.html)

This bug affects 3 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [QEMU](https://bugs.launchpad.net/qemu) | Fix Released | Undecided | [Daniel Berrange](https://launchpad.net/~berrange) |  |

### Bug Description

Description of problem

-------------------------

When VNC is connected to QEMU via websocket over a low speed network (e.g. 300KB/S Wide Area Network), and there is a lot of frame buffer update, the VNC Client will get stuck, the cursor is almost impossible to move, which may result in accumulation of a large number of data in the QEMU process (memory consumption will keep increasing).

Environment

-------------------------

All of the following versions have been tested:

QEMU: 2.5.1 / 2.6.0 / 2.8.1.1 / 2.9.0 / 2.10.0

Host OS: Ubuntu 16.04 Server LTS / CentOS 7 x86\_64\_1611

Guest OS: Windows 7 64bit / Ubuntu 16.04 Desktop LTS

Client OS: Windows 7 64bit / Windows 10 64bit

Client Browser: IE 11.0.9600 / Chrome 60.0.3112 / Firefox 55.0.2

VNC Client: TigerVNC Viewer 1.8 / UltraVNC Viewer 1.2.1.5 / TightVNC Viewer 2.8.8

VNC Web Client: noVNC 0.5.1 / noVNC 0.61 / noVNC 0.62

VNC Server: TigerVNC 1.8 / x11vnc 0.9.13 / TightVNC 2.8.8

VNC Client: TigerVNC Viewer 1.8 / UltraVNC Viewer 1.2.1.5 / TightVNC Viewer 2.8.8

Steps to reproduce:

-------------------------

100% reproducible.

1. Launch a QEMU instance with websocket option:

qemu-system-x86\_64 -enable-kvm -m 6G ./win\_x64.qcow2 -vnc :1,websocket=5701

2. Open VNC Web Client (noVNC/vnc.html) in browser and connect to QEMU VM via websocket

3. Play a video (e.g. Watch YouTube) on VM (To produce a lot of frame buffer update)

4. Limit (e.g. Use NetLimiter) the client inbound bandwidth to 300KB/S (To simulate a low speed WAN)

5. Then client's output gets stuck(less than 1 fps), the cursor is almost impossible to move

6. Observe QEMU process on the host, more and more data are accumulated in the process, the consumption of memory continues to keep increasing

Current result:

-------------------------

[Top - Initial status]

  PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND

 2725 root 20 0 7229144 5.910g 23024 S 16.3 18.9 0:12.84 qemu-system-x86\_64

[Top - After an hour's playing w/o limit (6-8MB/S)]

  PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND

 2725 root 20 0 7370284 6.046g 23132 S 28.0 19.3 35:58.15 qemu-system-x86\_64

[Top - Limit the bandwidth and continue to playing for another an hour (300KB/S)]

  PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND

 2725 root 20 0 11.029g 8.853g 23132 S 20.0 28.2 72:14.17 qemu-system-x86\_64

Also test several other combinations in the same environment:

1. Client(VNC Viewer) - Server(QEMU)

2. Client(VNC Viewer) - Server(tigervnc/x11vnc/tightvnc)

3. Client(noVNC) - Server(tigervnc/x11vnc/tightvnc)

Likewise, the client's inbound bandwidth is limited to 300KB/S,

although a lot of frame are lost, all of they still works (at least the mouse is movable).

It's found that when connect to QEMU via websocket, it never drop any frames.

QEMU still sends a lot of data to its websocket even when the network is congested,

the process is continually consuming more memory, then it gets stack.

Expected results:

-------------------------

When the network is poor (non-LAN), QEMU would reduce the VNC data send to its websocket correspondingly, and the memory usage remains stable.

## CVE References

* [2017-15268](/bugs/cve/2017-15268 "Qemu through 2.10.0 allows remote att...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel Berrange (berrange)](https://launchpad.net/~berrange) wrote on 2017-10-02: |  |  | [#1](/qemu/%2Bbug/1718964/comments/1) |
| --- | --- | --- | --- |

Thanks for your report. I've not tried reproducing yet, but from the looking at the code I think I can see why this happens. Code in vnc\_update\_client discards incoming frame updates from the guest if the output buffer has data pending in it, but it only checks the main VNC server output buffer usage. It fails to check the websockets output buffer usage.

Thanks for your report. I've not tried reproducing yet, but from the looking at the code I think I can see why this happens. Code in vnc\_update\_client discards incoming frame updates from the guest if the output buffer has data pending in it, but it only checks the main VNC server output buffer usage. It fails to check the websockets output buffer usage.

| Changed in qemu: | |
| --- | --- |
| **assignee**: | nobody → Daniel Berrange (berrange) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel Berrange (berrange)](https://launchpad.net/~berrange) wrote on 2017-10-10: |  |  | [#2](/qemu/%2Bbug/1718964/comments/2) |
| --- | --- | --- | --- |

In the modern code this needs fixing in the io/channel-websock.c impl - it is checking the output buffer limit against the wrong buffer - it uses 'rawoutput' instead of 'encoutput', so this fix is easy enough there.

The code is in fact broken all the way back to day1 of the introduction of websockets support though in QEMU 1.2.1 In the historical code it can be fixed by checking ws\_output.offset in vnc\_update\_client as I mentioned previously

In the modern code this needs fixing in the io/channel-websock.c impl - it is checking the output buffer limit against the wrong buffer - it uses 'rawoutput' instead of 'encoutput', so this fix is easy enough there.
The code is in fact broken all the way back to day1 of the introduction of websockets support though in QEMU 1.2.1 In the historical code it can be fixed by checking ws\_output.offset in vnc\_update\_client as I mentioned previously

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [lynncn (lynncn)](https://launchpad.net/~lynncn) wrote on 2017-10-10: |  |  | [#3](/qemu/%2Bbug/1718964/comments/3) |
| --- | --- | --- | --- |

We are experiencing the same problem.

At first, we thought the bug is in QEMU's websocket code then we tried using a standalone websocket proxy (websockify). Unfortunately, problems persisted.

We also tried various other VNC servers (with websockify), all of them work fine. It seems that the issue is specific to QEMU.

We are experiencing the same problem.
At first, we thought the bug is in QEMU's websocket code then we tried using a standalone websocket proxy (websockify). Unfortunately, problems persisted.
We also tried various other VNC servers (with websockify), all of them work fine. It seems that the issue is specific to QEMU.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel Berrange (berrange)](https://launchpad.net/~berrange) wrote on 2017-10-12: |  |  | [#4](/qemu/%2Bbug/1718964/comments/4) |
| --- | --- | --- | --- |

This has been assigned CVE-2017-15268

<http://www.openwall.com/lists/oss-security/2017/10/12/4>

This has been assigned CVE-2017-15268
http://www.openwall.com/lists/oss-security/2017/10/12/4

[Daniel Berrange (berrange)](https://launchpad.net/~berrange)
on 2017-10-17

| Changed in qemu: | |
| --- | --- |
| **status**: | New → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Daniel Berrange (berrange)](https://launchpad.net/~berrange) wrote on 2017-10-17: |  |  | [#5](/qemu/%2Bbug/1718964/comments/5) |
| --- | --- | --- | --- |

commit a7b20a8efa28e5f22c26c06cd06c2f12bc863493

Author: Daniel P. Berrange <email address hidden>

Date: Mon Oct 9 14:43:42 2017 +0100

io: monitor encoutput buffer size from websocket GSource

The websocket GSource is monitoring the size of the rawoutput

    buffer to determine if the channel can accepts more writes.

    The rawoutput buffer, however, is merely a temporary staging

    buffer before data is copied into the encoutput buffer. Thus

    its size will always be zero when the GSource runs.

This flaw causes the encoutput buffer to grow without bound

    if the other end of the underlying data channel doesn't

    read data being sent. This can be seen with VNC if a client

    is on a slow WAN link and the guest OS is sending many screen

    updates. A malicious VNC client can act like it is on a slow

    link by playing a video in the guest and then reading data

    very slowly, causing QEMU host memory to expand arbitrarily.

This issue is assigned CVE-2017-15268, publically reported in

[https://bugs.launchpad.net/qemu/+bug/1718964](https://bugs.launchpad.net/qemu/%2Bbug/1718964)

Reviewed-by: Eric Blake <email address hidden>

    Signed-off-by: Daniel P. Berrange <email address hidden>

commit a7b20a8efa28e5f22c26c06cd06c2f12bc863493
Author: Daniel P. Berrange <berrange@redhat.com>
Date: Mon Oct 9 14:43:42 2017 +0100
io: monitor encoutput buffer size from websocket GSource
The websocket GSource is monitoring the size of the rawoutput
buffer to determine if the channel can accepts more writes.
The rawoutput buffer, however, is merely a temporary staging
buffer before data is copied into the encoutput buffer. Thus
its size will always be zero when the GSource runs.
This flaw causes the encoutput buffer to grow without bound
if the other end of the underlying data channel doesn't
read data being sent. This can be seen with VNC if a client
is on a slow WAN link and the guest OS is sending many screen
updates. A malicious VNC client can act like it is on a slow
link by playing a video in the guest and then reading data
very slowly, causing QEMU host memory to expand arbitrarily.
This issue is assigned CVE-2017-15268, publically reported in
https://bugs.launchpad.net/qemu/+bug/1718964
Reviewed-by: Eric Blake <eblake@redhat.com>
Signed-off-by: Daniel P. Berrange <berrange@redhat.com>

[Thomas Huth (th-huth)](https://launchpad.net/~th-huth)
on 2017-12-15

| Changed in qemu: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

[See full activity log](https://bugs.launchpad.net/qemu/%2Bbug/1718964/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/qemu/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

You are
[not directly subscribed to this bug's notifications.](/qemu/%2Bbug/1718964/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/qemu/%2Bbug/1718964/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/qemu/%2Bbug/1718964/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from access.redhat.com_939cb557_20250125_223326.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2018:0816 - Security Advisory

Issued:
2018-04-10
Updated:
2018-04-10
# RHSA-2018:0816 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Low: qemu-kvm security, bug fix, and enhancement update

## Type/Severity

Security Advisory: Low

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2018%3A0816)

## Topic

An update for qemu-kvm is now available for Red Hat Enterprise Linux 7.

Red Hat Product Security has rated this update as having a security impact of Low. A Common Vulnerability Scoring System (CVSS) base score, which gives a detailed severity rating, is available for each vulnerability from the CVE link(s) in the References section.

## Description

Kernel-based Virtual Machine (KVM) is a full virtualization solution for Linux on a variety of architectures. The qemu-kvm packages provide the user-space component for running virtual machines that use KVM.

Security Fix(es):

* Qemu: vga: OOB read access during display update (CVE-2017-13672)
* Qemu: Slirp: use-after-free when sending response (CVE-2017-13711)
* Qemu: memory exhaustion through framebuffer update request message in VNC server (CVE-2017-15124)
* Qemu: I/O: potential memory exhaustion via websock connection to VNC (CVE-2017-15268)
* Qemu: Out-of-bounds read in vga\_draw\_text routine (CVE-2018-5683)

For more details about the security issue(s), including the impact, a CVSS score, and other related information, refer to the CVE page(s) listed in the References section.

Red Hat would like to thank David Buchanan for reporting CVE-2017-13672; Wjjzhang (Tencent.com) for reporting CVE-2017-13711; and Jiang Xin and Lin ZheCheng for reporting CVE-2018-5683. The CVE-2017-15124 issue was discovered by Daniel Berrange (Red Hat).

Additional Changes:

For detailed information on changes in this release, see the Red Hat Enterprise Linux 7.5 Release Notes linked from the References section.

## Solution

For details on how to apply this update, which includes the changes described in this advisory, refer to:

<https://access.redhat.com/articles/11258>

After installing this update, shut down all running virtual machines. Once all virtual machines have shut down, start them again for this update to take effect.

## Affected Products

* Red Hat Enterprise Linux Server 7 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.7 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.6 x86\_64
* Red Hat Enterprise Linux Server - AUS 7.7 x86\_64
* Red Hat Enterprise Linux Server - AUS 7.6 x86\_64
* Red Hat Enterprise Linux Server - Extended Life Cycle Support 7 x86\_64
* Red Hat Enterprise Linux Workstation 7 x86\_64
* Red Hat Enterprise Linux Desktop 7 x86\_64
* Red Hat Enterprise Linux for Scientific Computing 7 x86\_64
* Red Hat Enterprise Linux Server - TUS 7.7 x86\_64
* Red Hat Enterprise Linux Server - TUS 7.6 x86\_64
* Red Hat Enterprise Linux EUS Compute Node 7.7 x86\_64
* Red Hat Enterprise Linux EUS Compute Node 7.6 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.7 x86\_64
* Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.6 x86\_64

## Fixes

* [BZ - 1411490](https://bugzilla.redhat.com/show_bug.cgi?id=1411490)
  - [RFE] Kernel address space layout randomization [KASLR] support (qemu-kvm)
* [BZ - 1417864](https://bugzilla.redhat.com/show_bug.cgi?id=1417864)
  - Qemu-kvm starts with unspecified port
* [BZ - 1435352](https://bugzilla.redhat.com/show_bug.cgi?id=1435352)
  - qemu started with "-vnc none,..." doesn't support any VNC authentication
* [BZ - 1450396](https://bugzilla.redhat.com/show_bug.cgi?id=1450396)
  - Add support for AMD EPYC processors
* [BZ - 1455451](https://bugzilla.redhat.com/show_bug.cgi?id=1455451)
  - VM with pty based serial console hangs if PTS buffer is full
* [BZ - 1459725](https://bugzilla.redhat.com/show_bug.cgi?id=1459725)
  - Prevent qemu-img resize from causing "Active L1 table too large"
* [BZ - 1460872](https://bugzilla.redhat.com/show_bug.cgi?id=1460872)
  - Aborted(core dumped) when booting guest with "-netdev tap....vhost=on,queues=32"
* [BZ - 1461672](https://bugzilla.redhat.com/show_bug.cgi?id=1461672)
  - qemu-img core dumped when create external snapshot through ssh protocol without specifying image size
* [BZ - 1470244](https://bugzilla.redhat.com/show_bug.cgi?id=1470244)
  - reboot leads to shutoff of qemu-kvm-vm if i6300esb-watchdog set to poweroff
* [BZ - 1473536](https://bugzilla.redhat.com/show_bug.cgi?id=1473536)
  - Hangs in serial console under qemu
* [BZ - 1476641](https://bugzilla.redhat.com/show_bug.cgi?id=1476641)
  - ui/vnc\_keysym.h is very out of date and does not correctly support many Eastern European keyboards
* [BZ - 1486400](https://bugzilla.redhat.com/show_bug.cgi?id=1486400)
  - CVE-2017-13711 Qemu: Slirp: use-after-free when sending response
* [BZ - 1486560](https://bugzilla.redhat.com/show_bug.cgi?id=1486560)
  - CVE-2017-13672 Qemu: vga: OOB read access during display update
* [BZ - 1491434](https://bugzilla.redhat.com/show_bug.cgi?id=1491434)
  - KVM leaks file descriptors when attaching and detaching virtio-scsi block devices
* [BZ - 1492559](https://bugzilla.redhat.com/show_bug.cgi?id=1492559)
  - virtio-blk mutiwrite merge causes too big IO
* [BZ - 1494181](https://bugzilla.redhat.com/show_bug.cgi?id=1494181)
  - Backport vGPU support to qemu-kvm
* [BZ - 1496879](https://bugzilla.redhat.com/show_bug.cgi?id=1496879)
  - CVE-2017-15268 Qemu: I/O: potential memory exhaustion via websock connection to VNC
* [BZ - 1511802](https://bugzilla.redhat.com/show_bug.cgi?id=1511802)
  - Regression in QEMU handling for sub-page MMIO BARs for vfio-pci devices
* [BZ - 1520793](https://bugzilla.redhat.com/show_bug.cgi?id=1520793)
  - Do not build non-x86\_64 subpackages
* [BZ - 1525195](https://bugzilla.redhat.com/show_bug.cgi?id=1525195)
  - CVE-2017-15124 Qemu: memory exhaustion through framebuffer update request message in VNC server
* [BZ - 1530356](https://bugzilla.redhat.com/show_bug.cgi?id=1530356)
  - CVE-2018-5683 Qemu: Out-of-bounds read in vga\_draw\_text routine
* [BZ - 1536883](https://bugzilla.redhat.com/show_bug.cgi?id=1536883)
  - [abrt] [faf] qemu-kvm: unknown function(): /usr/libexec/qemu-kvm killed by 6
* [BZ - 1538866](https://bugzilla.redhat.com/show_bug.cgi?id=1538866)
  - qemu will coredump after executing info qtree

## CVEs

* [CVE-2017-13672](https://www.redhat.com/security/data/cve/CVE-2017-13672.html)
* [CVE-2017-13711](https://www.redhat.com/security/data/cve/CVE-2017-13711.html)
* [CVE-2017-15124](https://www.redhat.com/security/data/cve/CVE-2017-15124.html)
* [CVE-2017-15268](https://www.redhat.com/security/data/cve/CVE-2017-15268.html)
* [CVE-2018-5683](https://www.redhat.com/security/data/cve/CVE-2018-5683.html)

## References

* <https://access.redhat.com/security/updates/classification/#low>
* <https://access.redhat.com/documentation/en-US/red_hat_enterprise_linux/7/html/7.5_release_notes/index.html>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat Enterprise Linux Server 7

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.7

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux for x86\_64 - Extended Update Support 7.6

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux Server - AUS 7.7

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux Server - AUS 7.6

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux Server - Extended Life Cycle Support 7

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux Workstation 7

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux Desktop 7

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux for Scientific Computing 7

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux Server - TUS 7.7

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux Server - TUS 7.6

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux EUS Compute Node 7.7

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux EUS Compute Node 7.6

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.7

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

## Red Hat Enterprise Linux for x86\_64 - Update Services for SAP Solutions 7.6

| SRPM | |
| --- | --- |
| qemu-kvm-1.5.3-156.el7.src.rpm | SHA-256: 4c69b0b7f6a8aad1064e655e3884285cb6adff299422f5ea93b56e86ef2683f9 |
| x86\_64 | |
| qemu-img-1.5.3-156.el7.x86\_64.rpm | SHA-256: 725d03a584bb5076c9b32ba9911d18c6d362332dcbcef5b025ce13294146df68 |
| qemu-kvm-1.5.3-156.el7.x86\_64.rpm | SHA-256: ee63c7e78020aac27374b7045fae6503f9ca6e1b76ef364d5db00152410cb011 |
| qemu-kvm-common-1.5.3-156.el7.x86\_64.rpm | SHA-256: 302bd8e9bb03adfcf5488d7626e7d8c2ceebc3200f164f45865e39b276f49311 |
| qemu-kvm-debuginfo-1.5.3-156.el7.x86\_64.rpm | SHA-256: efa9f40648ce5d7b0d000d1d50a8e8b767fdd54bcc55d08860cd5ff50f727f7f |
| qemu-kvm-tools-1.5.3-156.el7.x86\_64.rpm | SHA-256: 612d983859ed89a40ca4743f0e14e9b91c04abd826c09a45927c3f555081838c |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from launchpad.net_5ae84eb1_20250126_122952.html ===

[Log in / Register](https://launchpad.net/~berrange/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~berrange)

## [Daniel Berrange](https://launchpad.net/~berrange)

* Overview
* [Code](https://code.launchpad.net/~berrange)
* [Bugs](https://bugs.launchpad.net/~berrange)
* [Blueprints](https://blueprints.launchpad.net/~berrange)
* [Translations](https://translations.launchpad.net/~berrange)
* [Answers](https://answers.launchpad.net/~berrange)

* [Related packages](https://launchpad.net/~berrange/%2Brelated-packages)
* [Related projects](https://launchpad.net/~berrange/%2Brelated-projects)

## User information

Launchpad Id:
berrange

Email:
[Log in](%2Blogin) for email information.

Member since:
2011-10-05

[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)
[![Icon of Swift](https://launchpadlibrarian.net/52560230/os14.png "Member of Swift")](/~swift)

Languages:

English

Time zone:

UTC
(UTC+0000)

Karma:
[0](https://launchpad.net/~berrange/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

## [All memberships](https://launchpad.net/~berrange/%2Bparticipation) Latest memberships

| [os-vif drivers](/~os-vif-drivers)  Joined on 2015-11-10 | |
| --- | --- |
| [os-vif bugs](/~os-vif-bugs)  Joined on 2015-11-10 | |
| [OpenStack Contributors](/~openstack-cla)  Joined on 2012-01-05 | |
| [Glance](/~glance)  Joined on 2011-10-17 | |
| [Swift](/~swift)  Joined on 2011-10-17 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from access.redhat.com_3f8ffadb_20250125_223327.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2018:1104 - Security Advisory

Issued:
2018-04-10
Updated:
2018-04-10
# RHSA-2018:1104 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Important: qemu-kvm-rhev security, bug fix, and enhancement update

## Type/Severity

Security Advisory: Important

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2018%3A1104)

## Topic

An update for qemu-kvm-rhev is now available for Red Hat Virtualization 4 for Red Hat Enterprise Linux 7.

Red Hat Product Security has rated this update as having a security impact of Important. A Common Vulnerability Scoring System (CVSS) base score, which gives a detailed severity rating, is available for each vulnerability from the CVE link(s) in the References section.

## Description

KVM (Kernel-based Virtual Machine) is a full virtualization solution for Linux on a variety of architectures. The qemu-kvm-rhev packages provide the user-space component for running virtual machines that use KVM in environments managed by Red Hat products.

The following packages have been upgraded to a later upstream version: qemu-kvm-rhev (2.10.0). (BZ#1470749)

Security Fix(es):

* Qemu: stack buffer overflow in NBD server triggered via long export name (CVE-2017-15118)
* Qemu: DoS via large option request (CVE-2017-15119)
* Qemu: vga: OOB read access during display update (CVE-2017-13672)
* Qemu: vga: reachable assert failure during display update (CVE-2017-13673)
* Qemu: Slirp: use-after-free when sending response (CVE-2017-13711)
* Qemu: memory exhaustion through framebuffer update request message in VNC server (CVE-2017-15124)
* Qemu: I/O: potential memory exhaustion via websock connection to VNC (CVE-2017-15268)
* Qemu: Out-of-bounds read in vga\_draw\_text routine (CVE-2018-5683)

For more details about the security issue(s), including the impact, a CVSS score, and other related information, refer to the CVE page(s) listed in the References section.

Red Hat would like to thank David Buchanan for reporting CVE-2017-13672 and CVE-2017-13673; Wjjzhang (Tencent.com) for reporting CVE-2017-13711; and Jiang Xin and Lin ZheCheng for reporting CVE-2018-5683. The CVE-2017-15118 and CVE-2017-15119 issues were discovered by Eric Blake (Red Hat) and the CVE-2017-15124 issue was discovered by Daniel Berrange (Red Hat).

## Solution

For details on how to apply this update, which includes the changes described in this advisory, refer to:

<https://access.redhat.com/articles/11258>

After installing this update, shut down all running virtual machines. Once all virtual machines have shut down, start them again for this update to take effect.

## Affected Products

* Red Hat Virtualization 4 for RHEL 7 x86\_64
* Red Hat Virtualization for IBM Power LE 4 for RHEL 7 ppc64le

## Fixes

* [BZ - 1139507](https://bugzilla.redhat.com/show_bug.cgi?id=1139507)
  - wrong data-plane properties via info qtree to check if use iothread object syntax
* [BZ - 1178472](https://bugzilla.redhat.com/show_bug.cgi?id=1178472)
  - fail to boot win2012r2 guest with hv\_relaxed&hv\_vapic&hv\_spinlocks=0x1fff&hv\_time & -smp 80,cores=2,threads=1,sockets=40
* [BZ - 1212715](https://bugzilla.redhat.com/show_bug.cgi?id=1212715)
  - qemu-img gets wrong actual path of backing file when the file name contains colon
* [BZ - 1213786](https://bugzilla.redhat.com/show_bug.cgi?id=1213786)
  - qemu-img doesn't check if base image exists when size parameter indicated.
* [BZ - 1285044](https://bugzilla.redhat.com/show_bug.cgi?id=1285044)
  - migration/RDMA: Race condition
* [BZ - 1305398](https://bugzilla.redhat.com/show_bug.cgi?id=1305398)
  - [RFE] PAPR Hash Page Table (HPT) resizing (qemu-kvm-rhev)
* [BZ - 1320114](https://bugzilla.redhat.com/show_bug.cgi?id=1320114)
  - qemu prompt "main-loop: WARNING: I/O thread spun for 1000 iterations" when block mirror from format qcow2 to raw
* [BZ - 1344299](https://bugzilla.redhat.com/show_bug.cgi?id=1344299)
  - PCIe: Add an option to PCIe ports to disable IO port space support
* [BZ - 1372583](https://bugzilla.redhat.com/show_bug.cgi?id=1372583)
  - Keyboard can't be used when install rhel7 in guest which has SATA CDROM and spice+qxl mode sometimes
* [BZ - 1378241](https://bugzilla.redhat.com/show_bug.cgi?id=1378241)
  - QEMU image file locking
* [BZ - 1390346](https://bugzilla.redhat.com/show_bug.cgi?id=1390346)
  - PCI: Reserve MMIO space over 4G for PCI hotplug
* [BZ - 1390348](https://bugzilla.redhat.com/show_bug.cgi?id=1390348)
  - PCI: Provide to libvirt a new query command whether a device is PCI/PCIe/hybrid
* [BZ - 1398633](https://bugzilla.redhat.com/show_bug.cgi?id=1398633)
  - [RFE] Kernel address space layout randomization [KASLR] support (qemu-kvm-rhev)
* [BZ - 1406803](https://bugzilla.redhat.com/show_bug.cgi?id=1406803)
  - RFE: native integration of LUKS and qcow2
* [BZ - 1414049](https://bugzilla.redhat.com/show_bug.cgi?id=1414049)
  - [RFE] Add support to qemu-img for resizing with preallocation
* [BZ - 1433670](https://bugzilla.redhat.com/show_bug.cgi?id=1433670)
  - Provide an API that estimates the size of QCOW2 image converted from a raw image
* [BZ - 1434321](https://bugzilla.redhat.com/show_bug.cgi?id=1434321)
  - [Q35] code 10 error when install VF in windows 2016
* [BZ - 1437113](https://bugzilla.redhat.com/show_bug.cgi?id=1437113)
  - PCIe: Allow configuring Generic PCIe Root Ports MMIO Window
* [BZ - 1441460](https://bugzilla.redhat.com/show_bug.cgi?id=1441460)
  - 'query-block' dirty bitmap count is shown in sectors but documented in bytes
* [BZ - 1441684](https://bugzilla.redhat.com/show_bug.cgi?id=1441684)
  - Re-enable op blocker assertions
* [BZ - 1441938](https://bugzilla.redhat.com/show_bug.cgi?id=1441938)
  - When boot windows guest with two numa nodes and pc-dimm assigned to the second node, the dimm cannot be recognized by the guest
* [BZ - 1443877](https://bugzilla.redhat.com/show_bug.cgi?id=1443877)
  - All the memory was assigned to the last node when guest booted up with 128 nodes
* [BZ - 1445834](https://bugzilla.redhat.com/show_bug.cgi?id=1445834)
  - Add support for AMD EPYC processors
* [BZ - 1446565](https://bugzilla.redhat.com/show_bug.cgi?id=1446565)
  - Some keys are missing when using fr-ca keyboard layout with VNC display
* [BZ - 1447258](https://bugzilla.redhat.com/show_bug.cgi?id=1447258)
  - Fail to create internal snapshot with data plane enable
* [BZ - 1447413](https://bugzilla.redhat.com/show_bug.cgi?id=1447413)
  - RFE: provide a secure way to pass cookies to curl block driver
* [BZ - 1448344](https://bugzilla.redhat.com/show_bug.cgi?id=1448344)
  - Failed to hot unplug cpu core which hotplugged in early boot stages
* [BZ - 1449067](https://bugzilla.redhat.com/show_bug.cgi?id=1449067)
  - [RFE] Device passthrough support for VT-d emulation
* [BZ - 1449609](https://bugzilla.redhat.com/show_bug.cgi?id=1449609)
  - qemu coredump when dd on multiple usb-storage devices concurrently in guest
* [BZ - 1449991](https://bugzilla.redhat.com/show_bug.cgi?id=1449991)
  - [rhel7.4][usb-hub]usb kdb doesn't work under 2 tier usb hubs with xhci contronnler for win2016 guest
* [BZ - 1451015](https://bugzilla.redhat.com/show_bug.cgi?id=1451015)
  - Qemu core dump when do 'quit ' in HMP via ide drive.
* [BZ - 1451189](https://bugzilla.redhat.com/show_bug.cgi?id=1451189)
  - Add way to select qemu-xhci / nec-usb-xhci device only
* [BZ - 1451269](https://bugzilla.redhat.com/show_bug.cgi?id=1451269)
  - Clarify the relativity of backing file and created image in "qemu-img create"
* [BZ - 1453167](https://bugzilla.redhat.com/show_bug.cgi?id=1453167)
  - [PPC] [Hot unplug CPU] Failed to hot unplug after migration
* [BZ - 1454362](https://bugzilla.redhat.com/show_bug.cgi?id=1454362)
  - QEMU fails to report error when requesting migration bind to "::" when ipv6 disabled
* [BZ - 1454367](https://bugzilla.redhat.com/show_bug.cgi?id=1454367)
  - QEMU fails to reject IPv4 connections when IPv4 listening is disabled
* [BZ - 1455074](https://bugzilla.redhat.com/show_bug.cgi?id=1455074)
  - qemu core dump when continuouly hotplug/unplug virtserialport and virito-serial-pci in a loop
* [BZ - 1457662](https://bugzilla.redhat.com/show_bug.cgi?id=1457662)
  - Windows guest cannot boot with interrupt remapping (VT-d)
* [BZ - 1459906](https://bugzilla.redhat.com/show_bug.cgi?id=1459906)
  - The guest with intel-iommu device enabled can not restore after managedsave
* [BZ - 1459945](https://bugzilla.redhat.com/show_bug.cgi?id=1459945)
  - migration fails with hungup serial console reader on -M pc-i440fx-rhel7.0.0 and pc-i440fx-rhel7.1.0
* [BZ - 1460119](https://bugzilla.redhat.com/show_bug.cgi?id=1460119)
  - qemu gets SIGABRT when hot-plug nvdimm device twice
* [BZ - 1460595](https://bugzilla.redhat.com/show_bug.cgi?id=1460595)
  - [virtio-vga]Display 2 should be dropped when guest reboot
* [BZ - 1460848](https://bugzilla.redhat.com/show_bug.cgi?id=1460848)
  - RFE: Enhance qemu to support freeing memory before exit when using memory-backend-file
* [BZ - 1462145](https://bugzilla.redhat.com/show_bug.cgi?id=1462145)
  - Qemu crashes when all fw\_cfg slots are used
* [BZ - 1463172](https://bugzilla.redhat.com/show_bug.cgi?id=1463172)
  - [Tracing] capturing trace data failed
* [BZ - 1464908](https://bugzilla.redhat.com/show_bug.cgi?id=1464908)
  - [RFE] Add SCSI-3 PR support to qemu (similar to mpathpersist)
* [BZ - 1465799](https://bugzilla.redhat.com/show_bug.cgi?id=1465799)
  - When do migration from RHEL7.4 host to RHEL7.3.Z host, dst host prompt "error while loading state for instance 0x0 of device 'spapr\_pci'"
* [BZ - 1468260](https://bugzilla.redhat.com/show_bug.cgi?id=1468260)
  - vhost-user/iommu: crash when backend disconnects
* [BZ - 1470634](https://bugzilla.redhat.com/show_bug.cgi?id=1470634)
  - Wrong allocation value after virDomainBlockCopy() (alloc=capacity)
* [BZ - 1472756](https://bugzilla.redhat.com/show_bug.cgi?id=1472756)
  - Keys to control audio are not forwarded to the guest
* [BZ - 1474464](https://bugzilla.redhat.com/show_bug.cgi?id=1474464)
  - Unable to send PAUSE/BREAK to guests in VNC or SPICE
* [BZ - 1475634](https://bugzilla.redhat.com/show_bug.cgi?id=1475634)
  - Requires for the seabios version that support vIOMMU of virtio
* [BZ - 1476121](https://bugzilla.redhat.com/show_bug.cgi?id=1476121)
  - Unable to start vhost if iommu\_platform=on but intel\_iommu=on not specified in guest
* [BZ - 1481593](https://bugzilla.redhat.com/show_bug.cgi?id=1481593)
  - Boot guest failed with "src/central\_freelist.cc:333] tcmalloc: allocation failed 196608" when 465 disks are attached to 465 pci-bridges
* [BZ - 1482478](https://bugzilla.redhat.com/show_bug.cgi?id=1482478)
  - Fail to quit source qemu when do live migration after mirroring guest to NBD server
* [BZ - 1486400](https://bugzilla.redhat.com/show_bug.cgi?id=1486400)
  - CVE-2017-13711 Qemu: Slirp: use-after-free when sending response
* [BZ - 1486560](https://bugzilla.redhat.com/show_bug.cgi?id=1486560)
  - CVE-2017-13672 Qemu: vga: OOB read access during display update
* [BZ - 1486588](https://bugzilla.redhat.com/show_bug.cgi?id=1486588)
  - CVE-2017-13673 Qemu: vga: reachable assert failure during display update
* [BZ - 1489670](https://bugzilla.redhat.com/show_bug.cgi?id=1489670)
  - Hot-unplugging a vhost network device leaks references to VFIOPCIDevice's
* [BZ - 1489800](https://bugzilla.redhat.com/show_bug.cgi?id=1489800)
  - q35/ovmf: Machine type compat vs OVMF vs windows
* [BZ - 1491909](https://bugzilla.redhat.com/show_bug.cgi?id=1491909)
  - IP network can not recover after several vhost-user reconnect
* [BZ - 1492178](https://bugzilla.redhat.com/show_bug.cgi?id=1492178)
  - Non-top-level change-backing-file causes assertion failure
* [BZ - 1492295](https://bugzilla.redhat.com/show_bug.cgi?id=1492295)
  - Guest hit call trace with iothrottling(iops) after the status from stop to cont during doing io testing
* [BZ - 1495090](https://bugzilla.redhat.com/show_bug.cgi?id=1495090)
  - Transfer a file about 10M failed from host to guest through spapr-vty device
* [BZ - 1495456](https://bugzilla.redhat.com/show_bug.cgi?id=1495456)
  - Update downstream qemu's max supported cpus for pseries to the RHEL supported number
* [BZ - 1496879](https://bugzilla.redhat.com/show_bug.cgi?id=1496879)
  - CVE-2017-15268 Qemu: I/O: potential memory exhaustion via websock connection to VNC
* [BZ - 1497120](https://bugzilla.redhat.com/show_bug.cgi?id=1497120)
  - migration+new block migration race: bdrv\_co\_do\_pwritev: Assertion `!(bs->open\_flags & 0x0800)' failed
* [BZ - 1497137](https://bugzilla.redhat.com/show_bug.cgi?id=1497137)
  - Update kvm\_stat
* [BZ - 1497740](https://bugzilla.redhat.com/show_bug.cgi?id=1497740)
  - -cdrom option is broken
* [BZ - 1498042](https://bugzilla.redhat.com/show_bug.cgi?id=1498042)
  - RFE: option to mark virtual block device as rotational/non-rotational
* [BZ - 1498496](https://bugzilla.redhat.com/show_bug.cgi?id=1498496)
  - Handle device tree changes in QEMU 2.10.0
* [BZ - 1498754](https://bugzilla.redhat.com/show_bug.cgi?id=1498754)
  - Definition of HW\_COMPAT\_RHEL7\_3 is not correct
* [BZ - 1498817](https://bugzilla.redhat.com/show_bug.cgi?id=1498817)
  - Vhost IOMMU support regression since qemu-kvm-rhev-2.9.0-16.el7\_4.5
* [BZ - 1498865](https://bugzilla.redhat.com/show_bug.cgi?id=1498865)
  - There is no switch to build qemu-kvm-rhev or qemu-kvm-ma packages
* [BZ - 1499011](https://bugzilla.redhat.com/show_bug.cgi?id=1499011)
  - 7.5: x86 machine types for 7.5
* [BZ - 1499647](https://bugzilla.redhat.com/show_bug.cgi?id=1499647)
  - qemu miscalculates guest RAM size during HPT resizing
* [BZ - 1500181](https://bugzilla.redhat.com/show_bug.cgi?id=1500181)
  - [Q35] guest boot up failed with ovmf
* [BZ - 1500334](https://bugzilla.redhat.com/show_bug.cgi?id=1500334)
  - LUKS driver has poor performance compared to in-kernel driver
* [BZ - 1501240](https://bugzilla.redhat.com/show_bug.cgi?id=1501240)
  - Enable migration device
* [BZ - 1501337](https://bugzilla.redhat.com/show_bug.cgi?id=1501337)
  - Support specialized spapr-dr-connector devices
* [BZ - 1501468](https://bugzilla.redhat.com/show_bug.cgi?id=1501468)
  - Remove RHEL-7.4 machine machine type in 7.5 release
* [BZ - 1502949](https://bugzilla.redhat.com/show_bug.cgi?id=1502949)
  - Update configure parameters to cover changes in 2.10.0
* [BZ - 1505654](https://bugzilla.redhat.com/show_bug.cgi?id=1505654)
  - Missing libvxhs share-able object file when try to query vxhs protocol
* [BZ - 1505696](https://bugzilla.redhat.com/show_bug.cgi?id=1505696)
  - Qemu crashed when open the second display of virtio video
* [BZ - 1505701](https://bugzilla.redhat.com/show_bug.cgi?id=1505701)
  - -blockdev fails if a qcow2 image has backing store format and backing store is referenced via node-name
* [BZ - 1506151](https://bugzilla.redhat.com/show_bug.cgi?id=1506151)
  - [data-plane] Quitting qemu in destination side encounters "core dumped" when doing live migration
* [BZ - 1506531](https://bugzilla.redhat.com/show_bug.cgi?id=1506531)
  - [data-plane] Qemu-kvm core dumped when hot-unplugging a block device with data-plane while the drive-mirror job is running
* [BZ - 1506882](https://bugzilla.redhat.com/show_bug.cgi?id=1506882)
  - Call trace showed up in dmesg after migrating guest when "stress-ng --numa 2" was running inside guest
* [BZ - 1507693](https://bugzilla.redhat.com/show_bug.cgi?id=1507693)
  - Unable to hot plug device to VM reporting libvirt errors.
* [BZ - 1508271](https://bugzilla.redhat.com/show_bug.cgi?id=1508271)
  - Migration is failed from host RHEL7.4.z to host RHEL7.5 with "-machine pseries-rhel7.4.0 -device pci-bridge,id=pci\_bridge,bus=pci.0,addr=03,chassis\_nr=1"
* [BZ - 1508799](https://bugzilla.redhat.com/show_bug.cgi?id=1508799)
  - qemu-kvm core dumped when doing 'savevm/loadvm/delvm' for the second time
* [BZ - 1508886](https://bugzilla.redhat.com/show_bug.cgi?id=1508886)
  - QEMU's AIO subsystem gets stuck inhibiting all I/O operations on virtio-blk-pci devices
* [BZ - 1510809](https://bugzilla.redhat.com/show_bug.cgi?id=1510809)
  - qemu-kvm core dumped when booting up guest using both virtio-vga and VGA
* [BZ - 1511312](https://bugzilla.redhat.com/show_bug.cgi?id=1511312)
  - Migrate an VM with pci-bridge or pcie-root-port failed
* [BZ - 1513870](https://bugzilla.redhat.com/show_bug.cgi?id=1513870)
  - For VNC connection, characters '|' and '<' are both recognized as '>' in linux guests, while '<' and '>' are both recognized as '|' in windows guest
* [BZ - 1515173](https://bugzilla.redhat.com/show_bug.cgi?id=1515173)
  - Cross migration from rhel6.9 to rhel7.5 failed
* [BZ - 1515393](https://bugzilla.redhat.com/show_bug.cgi?id=1515393)
  - bootindex is not taken into account for virtio-scsi devices on ppc64 if the LUN is >= 256
* [BZ - 1515604](https://bugzilla.redhat.com/show_bug.cgi?id=1515604)
  - qemu-img info: failed to get "consistent read" lock on a mirroring image
* [BZ - 1516922](https://bugzilla.redhat.com/show_bug.cgi?id=1516922)
  - CVE-2017-15118 Qemu: stack buffer overflow in NBD server triggered via long export name
* [BZ - 1516925](https://bugzilla.redhat.com/show_bug.cgi?id=1516925)
  - CVE-2017-15119 qemu: DoS via large option request
* [BZ - 1517144](https://bugzilla.redhat.com/show_bug.cgi?id=1517144)
  - Provide a ppc64le specific /etc/modprobe.d/kvm.conf
* [BZ - 1518482](https://bugzilla.redhat.com/show_bug.cgi?id=1518482)
  - "share-rw" property is unavailable on scsi passthrough devices
* [BZ - 1518649](https://bugzilla.redhat.com/show_bug.cgi?id=1518649)
  - Client compatibility flaws in VNC websockets server
* [BZ - 1519721](https://bugzilla.redhat.com/show_bug.cgi?id=1519721)
  - Both qemu and guest hang when performing live snapshot transaction with data-plane
* [BZ - 1520294](https://bugzilla.redhat.com/show_bug.cgi?id=1520294)
  - Hot-unplug the second pf cause qemu promote " Failed to remove group $iommu\_group\_num from KVM VFIO device:"
* [BZ - 1520824](https://bugzilla.redhat.com/show_bug.cgi?id=1520824)
  - Migration with dataplane, qemu processor hang, vm hang and migration can't finish
* [BZ - 1523414](https://bugzilla.redhat.com/show_bug.cgi?id=1523414)
  - [POWER guests] Verify compatible CPU & hypervisor capabilities across migration
* [BZ - 1525195](https://bugzilla.redhat.com/show_bug.cgi?id=1525195)
  - CVE-2017-15124 Qemu: memory exhaustion through framebuffer update request message in VNC server
* [BZ - 1525324](https://bugzilla.redhat.com/show_bug.cgi?id=1525324)
  - 2 VMs both with 'share-rw=on' appending on '-device usb-storage' for the same source image can not be started at the same time
* [BZ - 1525868](https://bugzilla.redhat.com/show_bug.cgi?id=1525868)
  - Guest hit core dump with both IO throttling and data plane
* [BZ - 1526212](https://bugzilla.redhat.com/show_bug.cgi?id=1526212)
  - qemu-img should not need a write lock for creating the overlay image
* [BZ - 1526423](https://bugzilla.redhat.com/show_bug.cgi?id=1526423)
  - QEMU hang with data plane enabled after some sg\_write\_same operations in guest
* [BZ - 1528173](https://bugzilla.redhat.com/show_bug.cgi?id=1528173)
  - Hot-unplug memory during booting early stage induced qemu-kvm coredump
* [BZ - 1529053](https://bugzilla.redhat.com/show_bug.cgi?id=1529053)
  - Miss the handling of EINTR in the fcntl calls made by QEMU
* [BZ - 1529243](https://bugzilla.redhat.com/show_bug.cgi?id=1529243)
  - Migration from P9 to P8, migration failed and qemu quit on dst end with "error while loading state for instance 0x0 of device 'ics'"
* [BZ - 1529676](https://bugzilla.redhat.com/show_bug.cgi?id=1529676)
  - kvm\_stat: option '--guest' doesn't work
* [BZ - 1530356](https://bugzilla.redhat.com/show_bug.cgi?id=1530356)
  - CVE-2018-5683 Qemu: Out-of-bounds read in vga\_draw\_text routine
* [BZ - 1534491](https://bugzilla.redhat.com/show_bug.cgi?id=1534491)
  - Mirror jobs for drives with iothreads make QEMU to abort with "block.c:1895: bdrv\_attach\_child: Assertion `bdrv\_get\_aio\_context(parent\_bs) == bdrv\_get\_aio\_context(child\_bs)' failed."
* [BZ - 1535752](https://bugzilla.redhat.com/show_bug.cgi?id=1535752)
  - Device tree incorrectly advertises compatibility modes for secondary CPUs
* [BZ - 1535992](https://bugzilla.redhat.com/show_bug.cgi?id=1535992)
  - Set force shared option "-U" as default option for "qemu-img info"
* [BZ - 1538494](https://bugzilla.redhat.com/show_bug.cgi?id=1538494)
  - Guest crashed on the source host when cancel migration by virDomainMigrateBegin3Params sometimes
* [BZ - 1538953](https://bugzilla.redhat.com/show_bug.cgi?id=1538953)
  - IOTLB entry size mismatch before/after migration during DPDK PVP testing
* [BZ - 1540003](https://bugzilla.redhat.com/show_bug.cgi?id=1540003)
  - Postcopy migration failed with "Unreasonably large packaged state"
* [BZ - 1540182](https://bugzilla.redhat.com/show_bug.cgi?id=1540182)
  - QEMU: disallow virtio-gpu to boot with vIOMMU
* [BZ - 1542045](https://bugzilla.redhat.com/show_bug.cgi?id=1542045)
  - qemu-kvm-rhev seg-faults at qemu\_co\_queue\_run\_restart (co=co@entry=0x5602801e8080) at util/qemu-coroutine-lock.c:83)

## CVEs

* [CVE-2017-13672](https://www.redhat.com/security/data/cve/CVE-2017-13672.html)
* [CVE-2017-13673](https://www.redhat.com/security/data/cve/CVE-2017-13673.html)
* [CVE-2017-13711](https://www.redhat.com/security/data/cve/CVE-2017-13711.html)
* [CVE-2017-15118](https://www.redhat.com/security/data/cve/CVE-2017-15118.html)
* [CVE-2017-15119](https://www.redhat.com/security/data/cve/CVE-2017-15119.html)
* [CVE-2017-15124](https://www.redhat.com/security/data/cve/CVE-2017-15124.html)
* [CVE-2017-15268](https://www.redhat.com/security/data/cve/CVE-2017-15268.html)
* [CVE-2018-5683](https://www.redhat.com/security/data/cve/CVE-2018-5683.html)

## References

* <https://access.redhat.com/security/updates/classification/#important>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat Virtualization 4 for RHEL 7

| SRPM | |
| --- | --- |
| qemu-kvm-rhev-2.10.0-21.el7.src.rpm | SHA-256: cbc79a0d8ac5c859f1bfd858735a08d04e642a9342e677e23c406fca9f8619c0 |
| x86\_64 | |
| qemu-img-rhev-2.10.0-21.el7.x86\_64.rpm | SHA-256: 31a73d9d5ad5bc2425a2372a65ec3582599b0ee11ae8724ee020665a44a7deb6 |
| qemu-kvm-common-rhev-2.10.0-21.el7.x86\_64.rpm | SHA-256: 22f427679165fc0014474d05d8553cf6475388bc0d20cba4c726ad0ae7a954b5 |
| qemu-kvm-rhev-2.10.0-21.el7.x86\_64.rpm | SHA-256: c4c75d1aa54b06a70b5a73573aa6c728136d26b64dbdac06947a3cbb0db5a52f |
| qemu-kvm-rhev-debuginfo-2.10.0-21.el7.x86\_64.rpm | SHA-256: 36149db9712cf5281389c21131cfdfa9a33ffb835ba3263907c5373b925919e4 |
| qemu-kvm-tools-rhev-2.10.0-21.el7.x86\_64.rpm | SHA-256: 0aca8b45b8edd3844eabacd58566152c651517f155e1bebaf1e163796682a98d |

## Red Hat Virtualization for IBM Power LE 4 for RHEL 7

| SRPM | |
| --- | --- |
| qemu-kvm-rhev-2.10.0-21.el7.src.rpm | SHA-256: cbc79a0d8ac5c859f1bfd858735a08d04e642a9342e677e23c406fca9f8619c0 |
| ppc64le | |
| qemu-img-rhev-2.10.0-21.el7.ppc64le.rpm | SHA-256: cbf4ba869b693ef6e014bf6b35d85c007fcf02d655b89307cd05488f7b875f28 |
| qemu-kvm-common-rhev-2.10.0-21.el7.ppc64le.rpm | SHA-256: 4337dedd46d76487068ee14a0bf8224f04c148fdc7d02462b2e785d6b42fffdb |
| qemu-kvm-rhev-2.10.0-21.el7.ppc64le.rpm | SHA-256: 01e11fad640819ad3bc35068841d8e36d110188889492b22ac97a03cef45ee5c |
| qemu-kvm-rhev-debuginfo-2.10.0-21.el7.ppc64le.rpm | SHA-256: 6fe0f747b8a773b605424901619fe83a4e6fccb83fb0ae4915332b7142c39b12 |
| qemu-kvm-tools-rhev-2.10.0-21.el7.ppc64le.rpm | SHA-256: a604782b90f1d8be0b7c542a4fe009ae29e3f0aa86ee06679dda061f78dd533d |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_e63fdd68_20250126_122948.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from access.redhat.com_f3632052_20250126_122951.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)

  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Product Documentation](https://access.redhat.com/documentation)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)

  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform)
  [All Product Docs](//docs.redhat.com/en/products/)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)

  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Classifications](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Severety Ratings](https://access.redhat.com/security/security-updates/#/cve)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)

  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

 Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

# Severity ratings

## Understanding Red Hat security ratings

Red Hat Product Security rates the severity of security issues found
in Red Hat products using a four-point scale (Low, Moderate,
Important, and Critical), as well as including a separate Common
Vulnerability Scoring System (CVSS) base score. These scoring systems
provide a prioritized risk assessment to help you understand and
schedule upgrades to your systems, enabling informed decisions on the
risk each issue places on your unique environment.

The four-point scale tells you how serious Red Hat considers an issue
to be, helping you judge the severity and determine the most important
updates. The scale takes into account the potential risk based on a technical analysis of the exact flaw and its type. The risk level of a flaw does not change if an exploit or worm is later released for a flaw, or if one is available before the release of a fix. A flaw will only be re-evaluated if new technical details emerge.

The following table provides severity ratings for Red Hat products and systems. For flaws specific to AI models, see [Red Hat security ratings for AI models](https://access.redhat.com/security/ai).

| **Severity ratings** | **Security flaw description** |
| --- | --- |
| **Critical impact** | This rating is given to flaws that could be easily exploited by a remote unauthenticated attacker and lead to system compromise (arbitrary code execution) without requiring user interaction, or easily cause system compromise via inference end points on AI systems. Flaws that require authentication, local or physical access to a system, or an unlikely configuration are not classified as Critical impact. These are the types of vulnerabilities that can be exploited by worms. |
| **Important impact** | This rating is given to flaws that can easily compromise the confidentiality, integrity or availability of resources. These are the types of vulnerabilities that allow local or authenticated users to gain additional privileges, allow unauthenticated remote users to view resources that should otherwise be protected by authentication or other controls, allow authenticated remote users to execute arbitrary code, allow remote users to cause a denial of service, or can cause system compromise via inference end points on AI systems. |
| **Moderate impact** | This rating is given to flaws that may be more difficult to exploit but could still lead to some compromise of the confidentiality, integrity or availability of resources under certain circumstances. It is also given to flaws that could be exploited to cause denial of service-like conditions on AI systems via an inference end point, or allow attackers to steal other users’ data from the AI system without authorization. These are the types of vulnerabilities that could have had a Critical or Important impact but are less easily exploited based on a technical evaluation of the flaw and/or affect unlikely configurations. || **Low impact** | This rating is given to all other issues that may have a security impact. These are the types of vulnerabilities that are believed to require unlikely circumstances to be able to be exploited, or where a successful exploit would give minimal consequences. This includes flaws that are present in a program’s source code but to which no current or theoretically possible, but unproven, exploitation vectors exist or were found during the technical analysis of the flaw. |

A Red Hat security advisory can contain fixes for more than one
vulnerability and for packages for more than one product (such as both
Red Hat Enterprise Linux 7 and 8). Each issue in an advisory has a
severity rating for each product. The overall severity of an advisory
is the highest severity out of all the individual issues, across all
the products the advisory targets. For simplicity, advisories only
show the overall severity. The advisories contain links to the
relevant entries in Red Hat's bug-tracking system, where you can
examine individual severity ratings and additional commentary, as well
as links to the relevant pages in Red Hat’s CVE database.

When a technology—enabled and most likely used by default—completely
blocks the exploitation of a particular vulnerability across all
architectures, we will adjust the severity level. When a technology
reduces the risk of a vulnerability, we may adjust the severity level
and give an explanation of the decision in the bug-tracking  and CVE
database entries.

## Common Vulnerability Scoring System (CVSS)

Common Vulnerability Scoring System (CVSS) base scores provide
additional guidance about a vulnerability, giving a detailed severity
rating by scoring the constant aspects of a vulnerability: Attack
Vector, Attack Complexity, User Interaction, Privileges Required,
Scope, Confidentiality, Integrity, and Availability.

CVSS version 2 base metrics are available for all vulnerabilities from
2009-2016, as well as selected earlier vulnerabilities. In 2016, Red
Hat adopted the CVSS v3 standard, and all vulnerabilities going
forward will use version 3.1 for scoring. These scores are found on
the
[CVE pages](https://access.redhat.com/security/security-updates/#/cve)
(linked from the References section of each Red Hat Security Advisory).

Red Hat does not solely use the CVSS rating to determine the priority
with which flaws are fixed, or to determine the severity rating of the
vulnerability. It is used as a guideline to identify and describe key
metrics of a flaw, however the priority for which flaws are fixed is
determined by the overall severity of the flaw using the
aforementioned four-point scale.  CVSS is meant to help customers
prioritize the order in which they remediate flaws.

### CVSS v3 Base Metrics

The CVSS v3 base metrics group covers the constant aspects of a
vulnerability:

* Attack Vector (AV) - Expresses the "remoteness" of the attack and
  how the vulnerability is exploited.
* Attack Complexity (AC) - Speaks to the difficulty of executing an
  attack and what factors are needed for it to be successful. (Along
  with User Interaction, Attack Complexity was formerly part of the
  Access Complexity metric.).
* User Interaction (UI) - Determines whether the attack requires an
  active human to participate or if the attack can be automated.
* Privileges Required (PR) - Documents the level of user
  authentication required for the attack to be successful. (This
  replaces the former Authentication metric.).
* Scope (S) - Determines whether an attacker can impact a component
  beyond its security scope/authority.
* Confidentiality (C) - Determines whether unauthorized parties can
  access data and to what extent.
* Integrity (I) - Measures the impact to the trustworthiness and
  veracity of data.
* Availability (A) - Refers to the impact to accessibility of data or
  services for authorized users.

A formula translates these measurements into a single, numerical base
score, ranging from 0.0 (no risk) to 10.0 (highest risk). Refer to
[Common Vulnerability Scoring System v3.1: User Guide](https://www.first.org/cvss/user-guide)
for detailed descriptions of the base metrics. It is important to note
that the CVSS base metrics were designed to be used with the other
CVSS metric groups, notably the Temporal and Environmental metrics, to
provide an accurate representation of risk in customer environments.
Alone, the Base metrics offer a shallow view of the vulnerability
itself without accounting for deployment or the environment.

### How Red Hat Uses CVSS v3 Base Metrics

We aim to comply with the CVSS v3 standard when assigning base scores,
and Red Hat uses base metrics that reflect how a vulnerability affects
our products specifically.  In addition, we do not use the Qualitative
Severity Rating Scale in the CVSS v3.1 User Guide to rate severity,
and our severity ratings are always based on the aforementioned
four-point scale.  In some circumstances, it may not be obvious why a
flaw received a particular score. The following are some common
vulnerability types with our interpretation and typical scoring:

#### Libraries

It is not always possible to know how third-party applications use
libraries, making it difficult to give accurate CVSS v3 base metrics
for flaws in system libraries. When rating these flaws, we take into
account the way the library is used by applications that we ship, and
also look at other popular software that may use the library in a way
that would cause an issue to be of higher severity, and adjust the
score appropriately.

#### Other Common Scores

Flaws where a local, unprivileged user can cause a kernel to crash
(denial of service) typically score 5.5 (for example,
[CVE-2019-9213](https://access.redhat.com/security/cve/CVE-2019-9213)).

Flaws that allow a local, unprivileged user to escalate their
privileges to root typically score 7.8 (for example,
[CVE-2019-18634](https://access.redhat.com/security/cve/CVE-2019-18634)).

Cross-site scripting flaws are generally scored as having Low impact
to Integrity and/or Confidentiality, with no impact to Availability,
in line with scoring from other vendors and NVD. A typical score for
these flaws is 6.1 (for example,
[CVE-2020-11023](https://access.redhat.com/security/cve/CVE-2020-11023)).

### Base Score Variations Across Products

It is common for a given CVE-named vulnerability to have several
different CVSS base metrics, depending on the product, version, and
architecture. Examples of this include:

* A vulnerability that only affected some architectures. For example,
  [CVE-2019-15031](https://access.redhat.com/security/cve/CVE-2019-15031)
  only affected PowerPC.
* A vulnerability that is mitigated by source code protection
  mechanisms on some platforms. For example,
  [CVE-2018-1125](https://access.redhat.com/security/cve/CVE-2018-1125)
  could have led to arbitrary code execution on Red Hat Enterprise
  Linux, but it is only a denial of service because it was compiled
  with FORTIFY protections.
* A vulnerability that affected more than one product.  For example,
  [CVE-2020-14060](https://access.redhat.com/security/cve/CVE-2020-14060)
  affected a component in both OpenShift and OpenStack.  The severity
  to OpenStack was lower (Low) as compared to OpenShift (Moderate)
  based on its usage; the overall vulnerability itself was rated
  Important.

If CVSS v3 base scores are significantly different across products, we
note that separately wherever possible. If we do not split the score,
we report the metric that gives the highest CVSS v3 base score (the
worst-case outcome).

### Differences Between NVD and Red Hat Scores

For open source software shipped by multiple vendors, the CVSS base
scores may vary for each vendor's version, depending on the version
they ship, how they ship it, the platform, and even how the software
is compiled. This makes scoring vulnerabilities difficult for
third-party vulnerability databases, such as NVD, who can give only a
single CVSS base score to each vulnerability, or when comparing to
other vendors who score based on the characteristics of use in their
own products. See the
[National Vulnerability Database](https://nvd.nist.gov/vuln-metrics/cvss)
for more information regarding NVD security ratings.

These differences can cause the scores to vary widely. Other reasons
may include how the source code was compiled with certain compiler
flags or hardening technologies that reduce or eliminate the security
severity of a flaw, or how the software is used within the product.
Software running standalone may suffer from a flaw, but its use within
a product may preclude the vulnerable code from ever being used in a
way that could be exploited.

For example, NVD may rate a flaw in a particular service as having
High Impact on the CVSS CIA Triad (Confidentiality, Integrity,
Availability) where the service in question is typically run as the
root user with full privileges on a system. However, in a Red Hat
product, the service may be specifically configured to run as a
dedicated non-privileged user running entirely in a SELinux sandbox,
greatly reducing the immediate impact from compromise, resulting in
Low impact.

For these reasons, we recommend that, whenever possible, you use a
CVSS base score provided by Red Hat in preference to a score from a
third party. Please
[let us know](https://access.redhat.com/site/security/team/contact/)
if you believe we have given an incorrect CVSS v3 base score for a
particular vulnerability. We are happy to discuss and update if
needed.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com)

### Help

* [Contact Customer Portal](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Systems Status

### About

* [Red Hat Subscription Value](https://access.redhat.com/subscription-value)
* [About Red Hat](https://www.redhat.com/about/)
* [Red Hat Jobs](http://jobs.redhat.com)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

Copyright © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)

×
### Formatting Tips

Here are the common uses of Markdown.

Code blocks
```
~~~
Code surrounded in tildes is easier to read
~~~
```

Links/URLs`[Red Hat Customer Portal](https://access.redhat.com)`

[Learn more](/help/markdown)
Close



=== Content from www.redhat.com_c672a460_20250126_122949.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_777faaa5_20250126_122945.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_d7438e66_20250126_122944.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1496879)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1496879)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1496879)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1496879

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1496879**](show_bug.cgi?id=1496879)
(CVE-2017-15268)
- [CVE-2017-15268](https://access.redhat.com/security/cve/CVE-2017-15268) QEMU: I/O: potential memory exhaustion via websock connection to VNC

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2017-15268 QEMU: I/O: potential memory exhaustion via websock connection ...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2017-15268 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | low | | [Severity:](page.cgi?id=fields.html#bug_severity) | low | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | Duplicates (2): | [1500749](show_bug.cgi?id=1500749 "CLOSED DUPLICATE - Qemu: I/O: potential memory exhaustion via websock channel") [1500751](show_bug.cgi?id=1500751 "CLOSED DUPLICATE - Qemu: I/O: potential memory exhaustion via websock channel")  ([view as bug list](buglist.cgi?bug_id=1500749,1500751)) | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1496881](show_bug.cgi?id=1496881 "CLOSED NOTABUG - CVE-2017-15268. xen: CVE-2017-15268. . Qemu: I/O: potential memory exhaustion via websock connection to VNC [fedora-all]") [1496882](show_bug.cgi?id=1496882 "CLOSED CURRENTRELEASE - CVE-2017-15268. qemu: CVE-2017-15268. . Qemu: I/O: potential memory exhaustion via websock connection to VNC [fedora-all]") [1518650](show_bug.cgi?id=1518650) [1518651](show_bug.cgi?id=1518651) [1518711](show_bug.cgi?id=1518711) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1496886](show_bug.cgi?id=1496886) | | TreeView+ | [depends on](buglist.cgi?bug_id=1496879&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1496879&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2017-09-28 17:26 UTC by Pedro Sampaio | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2019-09-29 14:23 UTC ([History](show_activity.cgi?id=1496879)) | | [CC List:](page.cgi?id=fields.html#cclist) | 47 users (show)  ailan amit apevec areis berrange bmcclain cfergeau chrisw dblechte drjones dwmw2 eedri imammedo itamar jen jforbes jjoyce jschluet kbasil knoel lhh lpeer lynncn1 markmc m.a.young mburns mgoldboi michal.skrivanek mkenneth mrezanin mst pbonzini ppandit rbryant rjones rkrcmar robinlee.sysu sclewis sherold slinaber srevivo tdecacqu virt-maint virt-maint vkuznets xen-maint ykaul | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: | A memory leakage issue was found in the I/O channels websockets implementation of the Quick Emulator (QEMU). It could occur while sending screen updates to a client, which is slow to read and process them further. A privileged guest user could use this flaw to cause a denial of service on the host and/or potentially crash the QEMU process instance on the host. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2019-06-08 03:26:20 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2018:0816](https://access.redhat.com/errata/RHSA-2018%3A0816) | 0 | None | None | None | 2018-04-10 08:24:11 UTC | | Red Hat Product Errata | [RHSA-2018:1104](https://access.redhat.com/errata/RHSA-2018%3A1104) | 0 | None | None | None | 2018-04-10 18:57:48 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1496879#c0)  Pedro Sampaio    2017-09-28 17:26:46 UTC  ``` Quick Emulator(Qemu) built with the I/O channels websockets support is vulnerable to a memory leakage issue. It could occur while sending screen updates to a client, which is slow to read and process them further.  A privileged guest user could use this flaw to cause a DoS on the host and/or potentially crash the Qemu process instance on the host.  Upstream patch: ---------------   -> <https://lists.gnu.org/archive/html/qemu-devel/2017-10/msg02278.html>  References: -----------   -> <https://bugs.launchpad.net/bugs/1718964>   -> <http://www.openwall.com/lists/oss-security/2017/10/12/4>   ```  [Comment 1](show_bug.cgi?id=1496879#c1)  Pedro Sampaio    2017-09-28 17:27:49 UTC  ``` Created qemu tracking bugs for this issue:  Affects: fedora-all [[bug 1496882](show_bug.cgi?id=1496882 "CLOSED CURRENTRELEASE - CVE-2017-15268. qemu: CVE-2017-15268. . Qemu: I/O: potential memory exhaustion via websock connection to VNC [fedora-all]")]   Created xen tracking bugs for this issue:  Affects: fedora-all [[bug 1496881](show_bug.cgi?id=1496881 "CLOSED NOTABUG - CVE-2017-15268. xen: CVE-2017-15268. . Qemu: I/O: potential memory exhaustion via websock connection to VNC [fedora-all]")]   ```  [Comment 2](show_bug.cgi?id=1496879#c2)  Joshua Padman    2017-10-11 03:21:17 UTC  ``` Closing as wontfix. OSP12 should consume from platform and will take the packages, fixed or not from there.  Reasoning: Openstack uses websockify.py to provide the websockets for the vnc console (as consumed by novnc in dashboard).  The default qemu command, as run by OpenStack is as follows: "/usr/libexec/qemu-kvm -name ..... -vnc 0.0.0.0:0 ..... -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x5 -msg timestamp=on"  The bug is in the websocket portion of vnc provided by qemu, which is not used by OpenStack by default.   ```  [Comment 4](show_bug.cgi?id=1496879#c4)  Prasad Pandit    2017-10-11 12:11:02 UTC  ``` *** [Bug 1500749](show_bug.cgi?id=1500749 "CLOSED DUPLICATE - Qemu: I/O: potential memory exhaustion via websock channel") has been marked as a duplicate of this bug. ***   ```  [Comment 5](show_bug.cgi?id=1496879#c5)  Prasad Pandit    2017-10-11 12:11:13 UTC  ``` *** [Bug 1500751](show_bug.cgi?id=1500751 "CLOSED DUPLICATE - Qemu: I/O: potential memory exhaustion via websock channel") has been marked as a duplicate of this bug. ***   ```  [Comment 6](show_bug.cgi?id=1496879#c6)  Albert Lynncn    2017-10-16 21:13:26 UTC  ``` At first, we thought the bug is in QEMU's websocket code, so we tried to use a standalone websocket proxy (websockify). Unfortunately, problems persisted.  We also tried various other VNC servers (with websockify), all of them works fine. It seems that the underlying problem is in the QEMU's VNC/RFB implementation.  Therefore, if you use OpenStack, you will also experience memory exhaustion on the controller node(which nova-novncproxy/websockify runs on by default).   ```  [Comment 7](show_bug.cgi?id=1496879#c7)  Fedora Update System    2017-11-07 22:12:58 UTC  ``` qemu-2.9.1-2.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.   ```  [Comment 8](show_bug.cgi?id=1496879#c8)  Fedora Update System    2017-11-11 02:58:23 UTC  ``` qemu-2.10.1-1.fc27 has been pushed to the Fedora 27 stable repository. If problems still persist, please make note of it in this bug report.   ```  [Comment 11](show_bug.cgi?id=1496879#c11)  errata-xmlrpc    2018-04-10 08:23:48 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux 7  Via RHSA-2018:0816 [https://access.redhat.com/errata/RHSA-2018:0816](https://access.redhat.com/errata/RHSA-2018%3A0816)   ```  [Comment 12](show_bug.cgi?id=1496879#c12)  errata-xmlrpc    2018-04-10 18:57:25 UTC  ``` This issue has been addressed in the following products:    Red Hat Virtualization 4 for RHEL-7  Via RHSA-2018:1104 [https://access.redhat.com/errata/RHSA-2018:1104](https://access.redhat.com/errata/RHSA-2018%3A1104)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1496879&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.redhat.com_3f6cda2f_20250126_122939.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)


