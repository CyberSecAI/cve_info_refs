=== Content from git.openstack.org_3e70883b_20250124_125552.html ===

This website requires JavaScript.
[![Logo](/assets/img/logo.svg)](/)

[Explore](/explore/repos)
[Get Started](https://docs.opendev.org/opendev/infra-manual/latest/gettingstarted.html)

[openstack](/openstack)/[tripleo-heat-templates](/openstack/tripleo-heat-templates)

[Code](/openstack/tripleo-heat-templates/src/branch/master)
[Issues](https://bugs.launchpad.net/tripleo-heat-templates)
[Proposed changes](https://review.opendev.org/#/q/status:open+project:openstack/tripleo-heat-templates)

### Disable live migration over TLS

[Browse Source](/openstack/tripleo-heat-templates/src/commit/994922a8ba996fe68d047df0e1486fa805dbea31)

```
Due to the fact that it doesn't use a separate CA (or sub CA) for
libvirtd, and that proper SASL is not being used. We are disabling this
option since it doesn't meet the appropriate security requirements.
We'll look into adding this back once these issues get fixed.

Change-Id: I6a5e4db1b6dd6bc8b7e73e53b614b070d15b8a23
Closes-Bug: [#1730370](https://bugs.launchpad.net/tripleo-heat-templates/%2Bbug/1730370)
(cherry picked from commit 645757cbd6bdb1a1b75cb4aa8acce80a178099ce)
```
...

This commit is contained in:

![](/assets/img/avatar_default.png "jaosorior@redhat.com")
parent
[a5ba2c29ec](/openstack/tripleo-heat-templates/commit/a5ba2c29ec88a78289023048492dc8189ea8e183)

commit
994922a8ba

 **3 changed files** with **26 additions** and **18 deletions**

[Show all changes](?style=unified&whitespace=show-all&show-outdated=)
[Ignore whitespace when comparing lines](?style=unified&whitespace=ignore-all&show-outdated=)
[Ignore changes in amount of whitespace](?style=unified&whitespace=ignore-change&show-outdated=)
[Ignore changes in whitespace at EOL](?style=unified&whitespace=ignore-eol&show-outdated=)

Show Stats
[Download Patch File](/openstack/tripleo-heat-templates/commit/994922a8ba996fe68d047df0e1486fa805dbea31.patch)
[Download Diff File](/openstack/tripleo-heat-templates/commit/994922a8ba996fe68d047df0e1486fa805dbea31.diff)
Expand all files
Collapse all files

#### 19 [docker/services/nova-libvirt.yaml](#diff-ee4f7d16a98d70202777d4c40faaca2de0434d21 "docker/services/nova-libvirt.yaml") Unescape Escape [View File](/openstack/tripleo-heat-templates/src/commit/994922a8ba996fe68d047df0e1486fa805dbea31/docker/services/nova-libvirt.yaml)

|  | |  |  | `@ -46,7 +46,8 @@ parameters:` |
|  |  |  |  | `default: true` |
|  |  |  |  | `description: If set to true and if EnableInternalTLS is enabled, it will` |
|  |  |  |  | `set the libvirt URI's transport to tls and configure the` |
|  |  |  |  | `relevant keys for libvirt.` |
|  |  |  |  | `relevant keys for libvirt. NOTE. this is currently being` |
|  |  |  |  | `ignored and TLS for libvirtd is always disabled for now.` |
|  |  |  |  | `DockerNovaMigrationSshdPort:` |
|  |  |  |  | `default: 2022` |
|  |  |  |  | `description: Port that dockerized nova migration target sshd service` |
|  | |  |  | `@ -70,14 +71,14 @@ parameters:` |
|  |  |  |  |  |
|  |  |  |  | `conditions:` |
|  |  |  |  |  |
|  |  |  |  | `use_tls_for_live_migration:` |
|  |  |  |  | `and:` |
|  |  |  |  | `- equals:` |
|  |  |  |  | `- {get_param: EnableInternalTLS}` |
|  |  |  |  | `- true` |
|  |  |  |  | `- equals:` |
|  |  |  |  | `- {get_param: UseTLSTransportForLiveMigration}` |
|  |  |  |  | `- true` |
|  |  |  |  | `use_tls_for_live_migration: false` |
|  |  |  |  | `# and:` |
|  |  |  |  | `# - equals:` |
|  |  |  |  | `# - {get_param: EnableInternalTLS}` |
|  |  |  |  | `# - true` |
|  |  |  |  | `# - equals:` |
|  |  |  |  | `# - {get_param: UseTLSTransportForLiveMigration}` |
|  |  |  |  | `# - true` |
|  |  |  |  |  |
|  |  |  |  | `need_libvirt_secret:` |
|  |  |  |  | `or:` |
|  | |  |  |  |

#### 19 [puppet/services/nova-libvirt.yaml](#diff-b40c5195a4e52973ef638bf359ca1ac4a2d62a36 "puppet/services/nova-libvirt.yaml") Unescape Escape [View File](/openstack/tripleo-heat-templates/src/commit/994922a8ba996fe68d047df0e1486fa805dbea31/puppet/services/nova-libvirt.yaml)

|  | |  |  | `@ -66,7 +66,8 @@ parameters:` |
|  |  |  |  | `default: true` |
|  |  |  |  | `description: If set to true and if EnableInternalTLS is enabled, it will` |
|  |  |  |  | `set the libvirt URI's transport to tls and configure the` |
|  |  |  |  | `relevant keys for libvirt.` |
|  |  |  |  | `relevant keys for libvirt. NOTE. this is currently being` |
|  |  |  |  | `ignored and TLS for libvirtd is always disabled for now.` |
|  |  |  |  | `InternalTLSCAFile:` |
|  |  |  |  | `default: '/etc/ipa/ca.crt'` |
|  |  |  |  | `type: string` |
|  | |  |  | `@ -100,14 +101,14 @@ parameters:` |
|  |  |  |  |  |
|  |  |  |  | `conditions:` |
|  |  |  |  |  |
|  |  |  |  | `use_tls_for_live_migration:` |
|  |  |  |  | `and:` |
|  |  |  |  | `- equals:` |
|  |  |  |  | `- {get_param: EnableInternalTLS}` |
|  |  |  |  | `- true` |
|  |  |  |  | `- equals:` |
|  |  |  |  | `- {get_param: UseTLSTransportForLiveMigration}` |
|  |  |  |  | `- true` |
|  |  |  |  | `use_tls_for_live_migration: false` |
|  |  |  |  | `# and:` |
|  |  |  |  | `# - equals:` |
|  |  |  |  | `# - {get_param: EnableInternalTLS}` |
|  |  |  |  | `# - true` |
|  |  |  |  | `# - equals:` |
|  |  |  |  | `# - {get_param: UseTLSTransportForLiveMigration}` |
|  |  |  |  | `# - true` |
|  |  |  |  |  |
|  |  |  |  | `libvirt_specific_ca_unset:` |
|  |  |  |  | `equals:` |
|  | |  |  |  |

#### 6 [releasenotes/notes/libvirtd-tls-6de6fb35e0ac0ab1.yaml](#diff-83e74e99c18db729ef81b68df58317555096c49c "releasenotes/notes/libvirtd-tls-6de6fb35e0ac0ab1.yaml") Normal file Unescape Escape [View File](/openstack/tripleo-heat-templates/src/commit/994922a8ba996fe68d047df0e1486fa805dbea31/releasenotes/notes/libvirtd-tls-6de6fb35e0ac0ab1.yaml)

|  | |  |  | `@ -0,0 +1,6 @@` |
|  |  |  |  | `---` |
|  |  |  |  | `security:` |
|  |  |  |  | `- |` |
|  |  |  |  | `Live migration over TLS has been disabled since the settings it was using` |
|  |  |  |  | `don't meet the required security standards. It is currently not possible to` |
|  |  |  |  | `enable it via t-h-t.` |

Write
Preview

Loading…

x

Add

Cancel
Save

Reference in New Issue

**Repository**
openstack/tripleo-heat-templates

**Title**

**Body**

Create Issue

Block a user
Blocking a user prevents them from interacting with repositories, such as opening or commenting on pull requests or issues. Learn more about blocking a user.

User to block:

Optional note:

The note is not visible to the blocked user.

Cancel
Block

[Powered by Gitea](https://about.gitea.com)
Version:
v1.23.1
Page: **1525ms**
Template: **73ms**

 English
Bahasa Indonesia
Deutsch
English
Español
Français
Gaeilge
Italiano
Latviešu
Magyar nyelv
Nederlands
Polski
Português de Portugal
Português do Brasil
Suomi
Svenska
Türkçe
Čeština
Ελληνικά
Български
Русский
Українська
فارسی
മലയാളം
日本語
简体中文
繁體中文（台灣）
繁體中文（香港）
한국어

[Licenses](/assets/licenses.txt)
[API](/api/swagger)


